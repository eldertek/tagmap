var FC=Object.defineProperty;var jC=(e,n,t)=>n in e?FC(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var Wt=(e,n,t)=>jC(e,typeof n!="symbol"?n+"":n,t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Pm(e){const n=Object.create(null);for(const t of e.split(","))n[t]=1;return t=>t in n}const Oi={},Zh=[],mu=()=>{},$C=()=>!1,Mp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),N1=e=>e.startsWith("onUpdate:"),yo=Object.assign,D1=(e,n)=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)},zC=Object.prototype.hasOwnProperty,Xi=(e,n)=>zC.call(e,n),ir=Array.isArray,Kh=e=>dd(e)==="[object Map]",uh=e=>dd(e)==="[object Set]",N2=e=>dd(e)==="[object Date]",UC=e=>dd(e)==="[object RegExp]",Tr=e=>typeof e=="function",Co=e=>typeof e=="string",Gu=e=>typeof e=="symbol",lo=e=>e!==null&&typeof e=="object",I1=e=>(lo(e)||Tr(e))&&Tr(e.then)&&Tr(e.catch),rw=Object.prototype.toString,dd=e=>rw.call(e),VC=e=>dd(e).slice(8,-1),Mm=e=>dd(e)==="[object Object]",O1=e=>Co(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Yh=Pm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Am=e=>{const n=Object.create(null);return t=>n[t]||(n[t]=e(t))},GC=/-(\w)/g,ma=Am(e=>e.replace(GC,(n,t)=>t?t.toUpperCase():"")),HC=/\B([A-Z])/g,Sl=Am(e=>e.replace(HC,"-$1").toLowerCase()),Ap=Am(e=>e.charAt(0).toUpperCase()+e.slice(1)),Kd=Am(e=>e?`on${Ap(e)}`:""),nl=(e,n)=>!Object.is(e,n),Jh=(e,...n)=>{for(let t=0;t<e.length;t++)e[t](...n)},iw=(e,n,t,r=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:r,value:t})},Kg=e=>{const n=parseFloat(e);return isNaN(n)?e:n},Yg=e=>{const n=Co(e)?Number(e):NaN;return isNaN(n)?e:n};let D2;const km=()=>D2||(D2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),qC="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",WC=Pm(qC);function El(e){if(ir(e)){const n={};for(let t=0;t<e.length;t++){const r=e[t],i=Co(r)?JC(r):El(r);if(i)for(const s in i)n[s]=i[s]}return n}else if(Co(e)||lo(e))return e}const ZC=/;(?![^(]*\))/g,KC=/:([^]+)/,YC=/\/\*[^]*?\*\//g;function JC(e){const n={};return e.replace(YC,"").split(ZC).forEach(t=>{if(t){const r=t.split(KC);r.length>1&&(n[r[0].trim()]=r[1].trim())}}),n}function Gi(e){let n="";if(Co(e))n=e;else if(ir(e))for(let t=0;t<e.length;t++){const r=Gi(e[t]);r&&(n+=r+" ")}else if(lo(e))for(const t in e)e[t]&&(n+=t+" ");return n.trim()}function XC(e){if(!e)return null;let{class:n,style:t}=e;return n&&!Co(n)&&(e.class=Gi(n)),t&&(e.style=El(t)),e}const QC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eP=Pm(QC);function ow(e){return!!e||e===""}function tP(e,n){if(e.length!==n.length)return!1;let t=!0;for(let r=0;t&&r<e.length;r++)t=Lf(e[r],n[r]);return t}function Lf(e,n){if(e===n)return!0;let t=N2(e),r=N2(n);if(t||r)return t&&r?e.getTime()===n.getTime():!1;if(t=Gu(e),r=Gu(n),t||r)return e===n;if(t=ir(e),r=ir(n),t||r)return t&&r?tP(e,n):!1;if(t=lo(e),r=lo(n),t||r){if(!t||!r)return!1;const i=Object.keys(e).length,s=Object.keys(n).length;if(i!==s)return!1;for(const o in e){const u=e.hasOwnProperty(o),f=n.hasOwnProperty(o);if(u&&!f||!u&&f||!Lf(e[o],n[o]))return!1}}return String(e)===String(n)}function Tm(e,n){return e.findIndex(t=>Lf(t,n))}const sw=e=>!!(e&&e.__v_isRef===!0),It=e=>Co(e)?e:e==null?"":ir(e)||lo(e)&&(e.toString===rw||!Tr(e.toString))?sw(e)?It(e.value):JSON.stringify(e,aw,2):String(e),aw=(e,n)=>sw(n)?aw(e,n.value):Kh(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((t,[r,i],s)=>(t[O0(r,s)+" =>"]=i,t),{})}:uh(n)?{[`Set(${n.size})`]:[...n.values()].map(t=>O0(t))}:Gu(n)?O0(n):lo(n)&&!ir(n)&&!Mm(n)?String(n):n,O0=(e,n="")=>{var t;return Gu(e)?`Symbol(${(t=e.description)!=null?t:n})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tl;class B1{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=tl,!n&&tl&&(this.index=(tl.scopes||(tl.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].pause();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let n,t;if(this.scopes)for(n=0,t=this.scopes.length;n<t;n++)this.scopes[n].resume();for(n=0,t=this.effects.length;n<t;n++)this.effects[n].resume()}}run(n){if(this._active){const t=tl;try{return tl=this,n()}finally{tl=t}}}on(){tl=this}off(){tl=this.parent}stop(n){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!n){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function R1(e){return new B1(e)}function F1(){return tl}function lw(e,n=!1){tl&&tl.cleanups.push(e)}let Eo;const B0=new WeakSet;class dp{constructor(n){this.fn=n,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,tl&&tl.active&&tl.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,B0.has(this)&&(B0.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||cw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,I2(this),fw(this);const n=Eo,t=Vu;Eo=this,Vu=!0;try{return this.fn()}finally{hw(this),Eo=n,Vu=t,this.flags&=-3}}stop(){if(this.flags&1){for(let n=this.deps;n;n=n.nextDep)z1(n);this.deps=this.depsTail=void 0,I2(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?B0.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ev(this)&&this.run()}get dirty(){return Ev(this)}}let uw=0,Yd,Jd;function cw(e,n=!1){if(e.flags|=8,n){e.next=Jd,Jd=e;return}e.next=Yd,Yd=e}function j1(){uw++}function $1(){if(--uw>0)return;if(Jd){let n=Jd;for(Jd=void 0;n;){const t=n.next;n.next=void 0,n.flags&=-9,n=t}}let e;for(;Yd;){let n=Yd;for(Yd=void 0;n;){const t=n.next;if(n.next=void 0,n.flags&=-9,n.flags&1)try{n.trigger()}catch(r){e||(e=r)}n=t}}if(e)throw e}function fw(e){for(let n=e.deps;n;n=n.nextDep)n.version=-1,n.prevActiveLink=n.dep.activeLink,n.dep.activeLink=n}function hw(e){let n,t=e.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),z1(r),nP(r)):n=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=n,e.depsTail=t}function Ev(e){for(let n=e.deps;n;n=n.nextDep)if(n.dep.version!==n.version||n.dep.computed&&(dw(n.dep.computed)||n.dep.version!==n.version))return!0;return!!e._dirty}function dw(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===pp))return;e.globalVersion=pp;const n=e.dep;if(e.flags|=2,n.version>0&&!e.isSSR&&e.deps&&!Ev(e)){e.flags&=-3;return}const t=Eo,r=Vu;Eo=e,Vu=!0;try{fw(e);const i=e.fn(e._value);(n.version===0||nl(i,e._value))&&(e._value=i,n.version++)}catch(i){throw n.version++,i}finally{Eo=t,Vu=r,hw(e),e.flags&=-3}}function z1(e,n=!1){const{dep:t,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),t.subs===e&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)z1(s,!0)}!n&&!--t.sc&&t.map&&t.map.delete(t.key)}function nP(e){const{prevDep:n,nextDep:t}=e;n&&(n.nextDep=t,e.prevDep=void 0),t&&(t.prevDep=n,e.nextDep=void 0)}function rP(e,n){e.effect instanceof dp&&(e=e.effect.fn);const t=new dp(e);n&&yo(t,n);try{t.run()}catch(i){throw t.stop(),i}const r=t.run.bind(t);return r.effect=t,r}function iP(e){e.effect.stop()}let Vu=!0;const pw=[];function Af(){pw.push(Vu),Vu=!1}function kf(){const e=pw.pop();Vu=e===void 0?!0:e}function I2(e){const{cleanup:n}=e;if(e.cleanup=void 0,n){const t=Eo;Eo=void 0;try{n()}finally{Eo=t}}}let pp=0;class oP{constructor(n,t){this.sub=n,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Nm{constructor(n){this.computed=n,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(n){if(!Eo||!Vu||Eo===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Eo)t=this.activeLink=new oP(Eo,this),Eo.deps?(t.prevDep=Eo.depsTail,Eo.depsTail.nextDep=t,Eo.depsTail=t):Eo.deps=Eo.depsTail=t,gw(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=Eo.depsTail,t.nextDep=void 0,Eo.depsTail.nextDep=t,Eo.depsTail=t,Eo.deps===t&&(Eo.deps=r)}return t}trigger(n){this.version++,pp++,this.notify(n)}notify(n){j1();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{$1()}}}function gw(e){if(e.dep.sc++,e.sub.flags&4){const n=e.dep.computed;if(n&&!e.dep.subs){n.flags|=20;for(let r=n.deps;r;r=r.nextDep)gw(r)}const t=e.dep.subs;t!==e&&(e.prevSub=t,t&&(t.nextSub=e)),e.dep.subs=e}}const Jg=new WeakMap,Qf=Symbol(""),Cv=Symbol(""),gp=Symbol("");function Ia(e,n,t){if(Vu&&Eo){let r=Jg.get(e);r||Jg.set(e,r=new Map);let i=r.get(t);i||(r.set(t,i=new Nm),i.map=r,i.key=t),i.track()}}function Rc(e,n,t,r,i,s){const o=Jg.get(e);if(!o){pp++;return}const u=f=>{f&&f.trigger()};if(j1(),n==="clear")o.forEach(u);else{const f=ir(e),d=f&&O1(t);if(f&&t==="length"){const m=Number(r);o.forEach((_,b)=>{(b==="length"||b===gp||!Gu(b)&&b>=m)&&u(_)})}else switch((t!==void 0||o.has(void 0))&&u(o.get(t)),d&&u(o.get(gp)),n){case"add":f?d&&u(o.get("length")):(u(o.get(Qf)),Kh(e)&&u(o.get(Cv)));break;case"delete":f||(u(o.get(Qf)),Kh(e)&&u(o.get(Cv)));break;case"set":Kh(e)&&u(o.get(Qf));break}}$1()}function sP(e,n){const t=Jg.get(e);return t&&t.get(n)}function kh(e){const n=Ii(e);return n===e?n:(Ia(n,"iterate",gp),Wl(e)?n:n.map(Oa))}function Dm(e){return Ia(e=Ii(e),"iterate",gp),e}const aP={__proto__:null,[Symbol.iterator](){return R0(this,Symbol.iterator,Oa)},concat(...e){return kh(this).concat(...e.map(n=>ir(n)?kh(n):n))},entries(){return R0(this,"entries",e=>(e[1]=Oa(e[1]),e))},every(e,n){return Nc(this,"every",e,n,void 0,arguments)},filter(e,n){return Nc(this,"filter",e,n,t=>t.map(Oa),arguments)},find(e,n){return Nc(this,"find",e,n,Oa,arguments)},findIndex(e,n){return Nc(this,"findIndex",e,n,void 0,arguments)},findLast(e,n){return Nc(this,"findLast",e,n,Oa,arguments)},findLastIndex(e,n){return Nc(this,"findLastIndex",e,n,void 0,arguments)},forEach(e,n){return Nc(this,"forEach",e,n,void 0,arguments)},includes(...e){return F0(this,"includes",e)},indexOf(...e){return F0(this,"indexOf",e)},join(e){return kh(this).join(e)},lastIndexOf(...e){return F0(this,"lastIndexOf",e)},map(e,n){return Nc(this,"map",e,n,void 0,arguments)},pop(){return Cd(this,"pop")},push(...e){return Cd(this,"push",e)},reduce(e,...n){return O2(this,"reduce",e,n)},reduceRight(e,...n){return O2(this,"reduceRight",e,n)},shift(){return Cd(this,"shift")},some(e,n){return Nc(this,"some",e,n,void 0,arguments)},splice(...e){return Cd(this,"splice",e)},toReversed(){return kh(this).toReversed()},toSorted(e){return kh(this).toSorted(e)},toSpliced(...e){return kh(this).toSpliced(...e)},unshift(...e){return Cd(this,"unshift",e)},values(){return R0(this,"values",Oa)}};function R0(e,n,t){const r=Dm(e),i=r[n]();return r!==e&&!Wl(e)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const lP=Array.prototype;function Nc(e,n,t,r,i,s){const o=Dm(e),u=o!==e&&!Wl(e),f=o[n];if(f!==lP[n]){const _=f.apply(e,s);return u?Oa(_):_}let d=t;o!==e&&(u?d=function(_,b){return t.call(this,Oa(_),b,e)}:t.length>2&&(d=function(_,b){return t.call(this,_,b,e)}));const m=f.call(o,d,r);return u&&i?i(m):m}function O2(e,n,t,r){const i=Dm(e);let s=t;return i!==e&&(Wl(e)?t.length>3&&(s=function(o,u,f){return t.call(this,o,u,f,e)}):s=function(o,u,f){return t.call(this,o,Oa(u),f,e)}),i[n](s,...r)}function F0(e,n,t){const r=Ii(e);Ia(r,"iterate",gp);const i=r[n](...t);return(i===-1||i===!1)&&Bm(t[0])?(t[0]=Ii(t[0]),r[n](...t)):i}function Cd(e,n,t=[]){Af(),j1();const r=Ii(e)[n].apply(e,t);return $1(),kf(),r}const uP=Pm("__proto__,__v_isRef,__isVue"),mw=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Gu));function cP(e){Gu(e)||(e=String(e));const n=Ii(this);return Ia(n,"has",e),n.hasOwnProperty(e)}class vw{constructor(n=!1,t=!1){this._isReadonly=n,this._isShallow=t}get(n,t,r){if(t==="__v_skip")return n.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?Lw:xw:s?ww:bw).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(r)?n:void 0;const o=ir(n);if(!i){let f;if(o&&(f=aP[t]))return f;if(t==="hasOwnProperty")return cP}const u=Reflect.get(n,t,Xo(n)?n:r);return(Gu(t)?mw.has(t):uP(t))||(i||Ia(n,"get",t),s)?u:Xo(u)?o&&O1(t)?u:u.value:lo(u)?i?Ru(u):Jl(u):u}}class yw extends vw{constructor(n=!1){super(!1,n)}set(n,t,r,i){let s=n[t];if(!this._isShallow){const f=Sf(s);if(!Wl(r)&&!Sf(r)&&(s=Ii(s),r=Ii(r)),!ir(n)&&Xo(s)&&!Xo(r))return f?!1:(s.value=r,!0)}const o=ir(n)&&O1(t)?Number(t)<n.length:Xi(n,t),u=Reflect.set(n,t,r,Xo(n)?n:i);return n===Ii(i)&&(o?nl(r,s)&&Rc(n,"set",t,r):Rc(n,"add",t,r)),u}deleteProperty(n,t){const r=Xi(n,t);n[t];const i=Reflect.deleteProperty(n,t);return i&&r&&Rc(n,"delete",t,void 0),i}has(n,t){const r=Reflect.has(n,t);return(!Gu(t)||!mw.has(t))&&Ia(n,"has",t),r}ownKeys(n){return Ia(n,"iterate",ir(n)?"length":Qf),Reflect.ownKeys(n)}}class _w extends vw{constructor(n=!1){super(!0,n)}set(n,t){return!0}deleteProperty(n,t){return!0}}const fP=new yw,hP=new _w,dP=new yw(!0),pP=new _w(!0),Pv=e=>e,sg=e=>Reflect.getPrototypeOf(e);function gP(e,n,t){return function(...r){const i=this.__v_raw,s=Ii(i),o=Kh(s),u=e==="entries"||e===Symbol.iterator&&o,f=e==="keys"&&o,d=i[e](...r),m=t?Pv:n?Mv:Oa;return!n&&Ia(s,"iterate",f?Cv:Qf),{next(){const{value:_,done:b}=d.next();return b?{value:_,done:b}:{value:u?[m(_[0]),m(_[1])]:m(_),done:b}},[Symbol.iterator](){return this}}}}function ag(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function mP(e,n){const t={get(i){const s=this.__v_raw,o=Ii(s),u=Ii(i);e||(nl(i,u)&&Ia(o,"get",i),Ia(o,"get",u));const{has:f}=sg(o),d=n?Pv:e?Mv:Oa;if(f.call(o,i))return d(s.get(i));if(f.call(o,u))return d(s.get(u));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!e&&Ia(Ii(i),"iterate",Qf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Ii(s),u=Ii(i);return e||(nl(i,u)&&Ia(o,"has",i),Ia(o,"has",u)),i===u?s.has(i):s.has(i)||s.has(u)},forEach(i,s){const o=this,u=o.__v_raw,f=Ii(u),d=n?Pv:e?Mv:Oa;return!e&&Ia(f,"iterate",Qf),u.forEach((m,_)=>i.call(s,d(m),d(_),o))}};return yo(t,e?{add:ag("add"),set:ag("set"),delete:ag("delete"),clear:ag("clear")}:{add(i){!n&&!Wl(i)&&!Sf(i)&&(i=Ii(i));const s=Ii(this);return sg(s).has.call(s,i)||(s.add(i),Rc(s,"add",i,i)),this},set(i,s){!n&&!Wl(s)&&!Sf(s)&&(s=Ii(s));const o=Ii(this),{has:u,get:f}=sg(o);let d=u.call(o,i);d||(i=Ii(i),d=u.call(o,i));const m=f.call(o,i);return o.set(i,s),d?nl(s,m)&&Rc(o,"set",i,s):Rc(o,"add",i,s),this},delete(i){const s=Ii(this),{has:o,get:u}=sg(s);let f=o.call(s,i);f||(i=Ii(i),f=o.call(s,i)),u&&u.call(s,i);const d=s.delete(i);return f&&Rc(s,"delete",i,void 0),d},clear(){const i=Ii(this),s=i.size!==0,o=i.clear();return s&&Rc(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=gP(i,e,n)}),t}function Im(e,n){const t=mP(e,n);return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(Xi(t,i)&&i in r?t:r,i,s)}const vP={get:Im(!1,!1)},yP={get:Im(!1,!0)},_P={get:Im(!0,!1)},bP={get:Im(!0,!0)},bw=new WeakMap,ww=new WeakMap,xw=new WeakMap,Lw=new WeakMap;function wP(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xP(e){return e.__v_skip||!Object.isExtensible(e)?0:wP(VC(e))}function Jl(e){return Sf(e)?e:Om(e,!1,fP,vP,bw)}function U1(e){return Om(e,!1,dP,yP,ww)}function Ru(e){return Om(e,!0,hP,_P,xw)}function LP(e){return Om(e,!0,pP,bP,Lw)}function Om(e,n,t,r,i){if(!lo(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const o=xP(e);if(o===0)return e;const u=new Proxy(e,o===2?r:t);return i.set(e,u),u}function pc(e){return Sf(e)?pc(e.__v_raw):!!(e&&e.__v_isReactive)}function Sf(e){return!!(e&&e.__v_isReadonly)}function Wl(e){return!!(e&&e.__v_isShallow)}function Bm(e){return e?!!e.__v_raw:!1}function Ii(e){const n=e&&e.__v_raw;return n?Ii(n):e}function Rm(e){return!Xi(e,"__v_skip")&&Object.isExtensible(e)&&iw(e,"__v_skip",!0),e}const Oa=e=>lo(e)?Jl(e):e,Mv=e=>lo(e)?Ru(e):e;function Xo(e){return e?e.__v_isRef===!0:!1}function Ft(e){return Sw(e,!1)}function V1(e){return Sw(e,!0)}function Sw(e,n){return Xo(e)?e:new SP(e,n)}class SP{constructor(n,t){this.dep=new Nm,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?n:Ii(n),this._value=t?n:Oa(n),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(n){const t=this._rawValue,r=this.__v_isShallow||Wl(n)||Sf(n);n=r?n:Ii(n),nl(n,t)&&(this._rawValue=n,this._value=r?n:Oa(n),this.dep.trigger())}}function EP(e){e.dep&&e.dep.trigger()}function Kn(e){return Xo(e)?e.value:e}function CP(e){return Tr(e)?e():Kn(e)}const PP={get:(e,n,t)=>n==="__v_raw"?e:Kn(Reflect.get(e,n,t)),set:(e,n,t,r)=>{const i=e[n];return Xo(i)&&!Xo(t)?(i.value=t,!0):Reflect.set(e,n,t,r)}};function G1(e){return pc(e)?e:new Proxy(e,PP)}class MP{constructor(n){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Nm,{get:r,set:i}=n(t.track.bind(t),t.trigger.bind(t));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(n){this._set(n)}}function Ew(e){return new MP(e)}function Cw(e){const n=ir(e)?new Array(e.length):{};for(const t in e)n[t]=Pw(e,t);return n}class AP{constructor(n,t,r){this._object=n,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const n=this._object[this._key];return this._value=n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return sP(Ii(this._object),this._key)}}class kP{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function TP(e,n,t){return Xo(e)?e:Tr(e)?new kP(e):lo(e)&&arguments.length>1?Pw(e,n,t):Ft(e)}function Pw(e,n,t){const r=e[n];return Xo(r)?r:new AP(e,n,t)}class NP{constructor(n,t,r){this.fn=n,this.setter=t,this._value=void 0,this.dep=new Nm(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=pp-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Eo!==this)return cw(this,!0),!0}get value(){const n=this.dep.track();return dw(this),n&&(n.version=this.dep.version),this._value}set value(n){this.setter&&this.setter(n)}}function DP(e,n,t=!1){let r,i;return Tr(e)?r=e:(r=e.get,i=e.set),new NP(r,i,t)}const IP={GET:"get",HAS:"has",ITERATE:"iterate"},OP={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},lg={},Xg=new WeakMap;let uf;function BP(){return uf}function Mw(e,n=!1,t=uf){if(t){let r=Xg.get(t);r||Xg.set(t,r=[]),r.push(e)}}function RP(e,n,t=Oi){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:u,call:f}=t,d=ee=>i?ee:Wl(ee)||i===!1||i===0?Fc(ee,1):Fc(ee);let m,_,b,y,M=!1,k=!1;if(Xo(e)?(_=()=>e.value,M=Wl(e)):pc(e)?(_=()=>d(e),M=!0):ir(e)?(k=!0,M=e.some(ee=>pc(ee)||Wl(ee)),_=()=>e.map(ee=>{if(Xo(ee))return ee.value;if(pc(ee))return d(ee);if(Tr(ee))return f?f(ee,2):ee()})):Tr(e)?n?_=f?()=>f(e,2):e:_=()=>{if(b){Af();try{b()}finally{kf()}}const ee=uf;uf=m;try{return f?f(e,3,[y]):e(y)}finally{uf=ee}}:_=mu,n&&i){const ee=_,he=i===!0?1/0:i;_=()=>Fc(ee(),he)}const F=F1(),I=()=>{m.stop(),F&&F.active&&D1(F.effects,m)};if(s&&n){const ee=n;n=(...he)=>{ee(...he),I()}}let R=k?new Array(e.length).fill(lg):lg;const Y=ee=>{if(!(!(m.flags&1)||!m.dirty&&!ee))if(n){const he=m.run();if(i||M||(k?he.some((fe,ve)=>nl(fe,R[ve])):nl(he,R))){b&&b();const fe=uf;uf=m;try{const ve=[he,R===lg?void 0:k&&R[0]===lg?[]:R,y];f?f(n,3,ve):n(...ve),R=he}finally{uf=fe}}}else m.run()};return u&&u(Y),m=new dp(_),m.scheduler=o?()=>o(Y,!1):Y,y=ee=>Mw(ee,!1,m),b=m.onStop=()=>{const ee=Xg.get(m);if(ee){if(f)f(ee,4);else for(const he of ee)he();Xg.delete(m)}},n?r?Y(!0):R=m.run():o?o(Y.bind(null,!0),!0):m.run(),I.pause=m.pause.bind(m),I.resume=m.resume.bind(m),I.stop=I,I}function Fc(e,n=1/0,t){if(n<=0||!lo(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),n--,Xo(e))Fc(e.value,n,t);else if(ir(e))for(let r=0;r<e.length;r++)Fc(e[r],n,t);else if(uh(e)||Kh(e))e.forEach(r=>{Fc(r,n,t)});else if(Mm(e)){for(const r in e)Fc(e[r],n,t);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Fc(e[r],n,t)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Aw=[];function FP(e){Aw.push(e)}function jP(){Aw.pop()}function $P(e,n){}const zP={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},UP={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function pd(e,n,t,r){try{return r?e(...r):e()}catch(i){ch(i,n,t)}}function yu(e,n,t,r){if(Tr(e)){const i=pd(e,n,t,r);return i&&I1(i)&&i.catch(s=>{ch(s,n,t)}),i}if(ir(e)){const i=[];for(let s=0;s<e.length;s++)i.push(yu(e[s],n,t,r));return i}}function ch(e,n,t,r=!0){const i=n?n.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=n&&n.appContext.config||Oi;if(n){let u=n.parent;const f=n.proxy,d=`https://vuejs.org/error-reference/#runtime-${t}`;for(;u;){const m=u.ec;if(m){for(let _=0;_<m.length;_++)if(m[_](e,f,d)===!1)return}u=u.parent}if(s){Af(),pd(s,null,10,[e,f,d]),kf();return}}VP(e,t,i,r,o)}function VP(e,n,t,r=!0,i=!1){if(i)throw e;console.error(e)}const rl=[];let uc=-1;const Xh=[];let cf=null,Fh=0;const kw=Promise.resolve();let Qg=null;function Us(e){const n=Qg||kw;return e?n.then(this?e.bind(this):e):n}function GP(e){let n=uc+1,t=rl.length;for(;n<t;){const r=n+t>>>1,i=rl[r],s=vp(i);s<e||s===e&&i.flags&2?n=r+1:t=r}return n}function H1(e){if(!(e.flags&1)){const n=vp(e),t=rl[rl.length-1];!t||!(e.flags&2)&&n>=vp(t)?rl.push(e):rl.splice(GP(n),0,e),e.flags|=1,Tw()}}function Tw(){Qg||(Qg=kw.then(Nw))}function mp(e){ir(e)?Xh.push(...e):cf&&e.id===-1?cf.splice(Fh+1,0,e):e.flags&1||(Xh.push(e),e.flags|=1),Tw()}function B2(e,n,t=uc+1){for(;t<rl.length;t++){const r=rl[t];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;rl.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function em(e){if(Xh.length){const n=[...new Set(Xh)].sort((t,r)=>vp(t)-vp(r));if(Xh.length=0,cf){cf.push(...n);return}for(cf=n,Fh=0;Fh<cf.length;Fh++){const t=cf[Fh];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}cf=null,Fh=0}}const vp=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Nw(e){try{for(uc=0;uc<rl.length;uc++){const n=rl[uc];n&&!(n.flags&8)&&(n.flags&4&&(n.flags&=-2),pd(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2))}}finally{for(;uc<rl.length;uc++){const n=rl[uc];n&&(n.flags&=-2)}uc=-1,rl.length=0,em(),Qg=null,(rl.length||Xh.length)&&Nw()}}let jh,ug=[];function Dw(e,n){var t,r;jh=e,jh?(jh.enabled=!0,ug.forEach(({event:i,args:s})=>jh.emit(i,...s)),ug=[]):typeof window<"u"&&window.HTMLElement&&!((r=(t=window.navigator)==null?void 0:t.userAgent)!=null&&r.includes("jsdom"))?((n.__VUE_DEVTOOLS_HOOK_REPLAY__=n.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{Dw(s,n)}),setTimeout(()=>{jh||(n.__VUE_DEVTOOLS_HOOK_REPLAY__=null,ug=[])},3e3)):ug=[]}let Gs=null,Fm=null;function yp(e){const n=Gs;return Gs=e,Fm=e&&e.type.__scopeId||null,n}function HP(e){Fm=e}function qP(){Fm=null}const WP=e=>gu;function gu(e,n=Gs,t){if(!n||e._n)return e;const r=(...i)=>{r._d&&Rv(-1);const s=yp(n);let o;try{o=e(...i)}finally{yp(s),r._d&&Rv(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Nn(e,n){if(Gs===null)return e;const t=Np(Gs),r=e.dirs||(e.dirs=[]);for(let i=0;i<n.length;i++){let[s,o,u,f=Oi]=n[i];s&&(Tr(s)&&(s={mounted:s,updated:s}),s.deep&&Fc(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:u,modifiers:f}))}return e}function cc(e,n,t,r){const i=e.dirs,s=n&&n.dirs;for(let o=0;o<i.length;o++){const u=i[o];s&&(u.oldValue=s[o].value);let f=u.dir[r];f&&(Af(),yu(f,t,8,[e.el,u,e,n]),kf())}}const Iw=Symbol("_vte"),Ow=e=>e.__isTeleport,Xd=e=>e&&(e.disabled||e.disabled===""),R2=e=>e&&(e.defer||e.defer===""),F2=e=>typeof SVGElement<"u"&&e instanceof SVGElement,j2=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Av=(e,n)=>{const t=e&&e.to;return Co(t)?n?n(t):null:t},Bw={name:"Teleport",__isTeleport:!0,process(e,n,t,r,i,s,o,u,f,d){const{mc:m,pc:_,pbc:b,o:{insert:y,querySelector:M,createText:k,createComment:F}}=d,I=Xd(n.props);let{shapeFlag:R,children:Y,dynamicChildren:ee}=n;if(e==null){const he=n.el=k(""),fe=n.anchor=k("");y(he,t,r),y(fe,t,r);const ve=(U,Z)=>{R&16&&(i&&i.isCE&&(i.ce._teleportTarget=U),m(Y,U,Z,i,s,o,u,f))},$=()=>{const U=n.target=Av(n.props,M),Z=Rw(U,n,k,y);U&&(o!=="svg"&&F2(U)?o="svg":o!=="mathml"&&j2(U)&&(o="mathml"),I||(ve(U,Z),Ag(n,!1)))};I&&(ve(t,fe),Ag(n,!0)),R2(n.props)?zs(()=>{$(),n.el.__isMounted=!0},s):$()}else{if(R2(n.props)&&!e.el.__isMounted){zs(()=>{Bw.process(e,n,t,r,i,s,o,u,f,d),delete e.el.__isMounted},s);return}n.el=e.el,n.targetStart=e.targetStart;const he=n.anchor=e.anchor,fe=n.target=e.target,ve=n.targetAnchor=e.targetAnchor,$=Xd(e.props),U=$?t:fe,Z=$?he:ve;if(o==="svg"||F2(fe)?o="svg":(o==="mathml"||j2(fe))&&(o="mathml"),ee?(b(e.dynamicChildren,ee,U,i,s,o,u),ty(e,n,!0)):f||_(e,n,U,Z,i,s,o,u,!1),I)$?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):cg(n,t,he,d,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const T=n.target=Av(n.props,M);T&&cg(n,T,null,d,0)}else $&&cg(n,fe,ve,d,1);Ag(n,I)}},remove(e,n,t,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:u,anchor:f,targetStart:d,targetAnchor:m,target:_,props:b}=e;if(_&&(i(d),i(m)),s&&i(f),o&16){const y=s||!Xd(b);for(let M=0;M<u.length;M++){const k=u[M];r(k,n,t,y,!!k.dynamicChildren)}}},move:cg,hydrate:ZP};function cg(e,n,t,{o:{insert:r},m:i},s=2){s===0&&r(e.targetAnchor,n,t);const{el:o,anchor:u,shapeFlag:f,children:d,props:m}=e,_=s===2;if(_&&r(o,n,t),(!_||Xd(m))&&f&16)for(let b=0;b<d.length;b++)i(d[b],n,t,2);_&&r(u,n,t)}function ZP(e,n,t,r,i,s,{o:{nextSibling:o,parentNode:u,querySelector:f,insert:d,createText:m}},_){const b=n.target=Av(n.props,f);if(b){const y=Xd(n.props),M=b._lpa||b.firstChild;if(n.shapeFlag&16)if(y)n.anchor=_(o(e),n,u(e),t,r,i,s),n.targetStart=M,n.targetAnchor=M&&o(M);else{n.anchor=o(e);let k=M;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")n.targetStart=k;else if(k.data==="teleport anchor"){n.targetAnchor=k,b._lpa=n.targetAnchor&&o(n.targetAnchor);break}}k=o(k)}n.targetAnchor||Rw(b,n,m,d),_(M&&o(M),n,b,t,r,i,s)}Ag(n,y)}return n.anchor&&o(n.anchor)}const kv=Bw;function Ag(e,n){const t=e.ctx;if(t&&t.ut){let r,i;for(n?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function Rw(e,n,t,r){const i=n.targetStart=t(""),s=n.targetAnchor=t("");return i[Iw]=s,e&&(r(i,e),r(s,e)),s}const ff=Symbol("_leaveCb"),fg=Symbol("_enterCb");function q1(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ps(()=>{e.isMounted=!0}),fh(()=>{e.isUnmounting=!0}),e}const lu=[Function,Array],W1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:lu,onEnter:lu,onAfterEnter:lu,onEnterCancelled:lu,onBeforeLeave:lu,onLeave:lu,onAfterLeave:lu,onLeaveCancelled:lu,onBeforeAppear:lu,onAppear:lu,onAfterAppear:lu,onAppearCancelled:lu},Fw=e=>{const n=e.subTree;return n.component?Fw(n.component):n},KP={name:"BaseTransition",props:W1,setup(e,{slots:n}){const t=bu(),r=q1();return()=>{const i=n.default&&jm(n.default(),!0);if(!i||!i.length)return;const s=jw(i),o=Ii(e),{mode:u}=o;if(r.isLeaving)return j0(s);const f=$2(s);if(!f)return j0(s);let d=id(f,o,r,t,_=>d=_);f.type!==Rs&&Uc(f,d);let m=t.subTree&&$2(t.subTree);if(m&&m.type!==Rs&&!$u(f,m)&&Fw(t).type!==Rs){let _=id(m,o,r,t);if(Uc(m,_),u==="out-in"&&f.type!==Rs)return r.isLeaving=!0,_.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete _.afterLeave,m=void 0},j0(s);u==="in-out"&&f.type!==Rs?_.delayLeave=(b,y,M)=>{const k=zw(r,m);k[String(m.key)]=m,b[ff]=()=>{y(),b[ff]=void 0,delete d.delayedLeave,m=void 0},d.delayedLeave=()=>{M(),delete d.delayedLeave,m=void 0}}:m=void 0}else m&&(m=void 0);return s}}};function jw(e){let n=e[0];if(e.length>1){for(const t of e)if(t.type!==Rs){n=t;break}}return n}const $w=KP;function zw(e,n){const{leavingVNodes:t}=e;let r=t.get(n.type);return r||(r=Object.create(null),t.set(n.type,r)),r}function id(e,n,t,r,i){const{appear:s,mode:o,persisted:u=!1,onBeforeEnter:f,onEnter:d,onAfterEnter:m,onEnterCancelled:_,onBeforeLeave:b,onLeave:y,onAfterLeave:M,onLeaveCancelled:k,onBeforeAppear:F,onAppear:I,onAfterAppear:R,onAppearCancelled:Y}=n,ee=String(e.key),he=zw(t,e),fe=(U,Z)=>{U&&yu(U,r,9,Z)},ve=(U,Z)=>{const T=Z[1];fe(U,Z),ir(U)?U.every(N=>N.length<=1)&&T():U.length<=1&&T()},$={mode:o,persisted:u,beforeEnter(U){let Z=f;if(!t.isMounted)if(s)Z=F||f;else return;U[ff]&&U[ff](!0);const T=he[ee];T&&$u(e,T)&&T.el[ff]&&T.el[ff](),fe(Z,[U])},enter(U){let Z=d,T=m,N=_;if(!t.isMounted)if(s)Z=I||d,T=R||m,N=Y||_;else return;let O=!1;const z=U[fg]=q=>{O||(O=!0,q?fe(N,[U]):fe(T,[U]),$.delayedLeave&&$.delayedLeave(),U[fg]=void 0)};Z?ve(Z,[U,z]):z()},leave(U,Z){const T=String(e.key);if(U[fg]&&U[fg](!0),t.isUnmounting)return Z();fe(b,[U]);let N=!1;const O=U[ff]=z=>{N||(N=!0,Z(),z?fe(k,[U]):fe(M,[U]),U[ff]=void 0,he[T]===e&&delete he[T])};he[T]=e,y?ve(y,[U,O]):O()},clone(U){const Z=id(U,n,t,r,i);return i&&i(Z),Z}};return $}function j0(e){if(kp(e))return e=vc(e),e.children=null,e}function $2(e){if(!kp(e))return Ow(e.type)&&e.children?jw(e.children):e;const{shapeFlag:n,children:t}=e;if(t){if(n&16)return t[0];if(n&32&&Tr(t.default))return t.default()}}function Uc(e,n){e.shapeFlag&6&&e.component?(e.transition=n,Uc(e.component.subTree,n)):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function jm(e,n=!1,t){let r=[],i=0;for(let s=0;s<e.length;s++){let o=e[s];const u=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===Mn?(o.patchFlag&128&&i++,r=r.concat(jm(o.children,n,u))):(n||o.type!==Rs)&&r.push(u!=null?vc(o,{key:u}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Qo(e,n){return Tr(e)?yo({name:e.name},n,{setup:e}):e}function YP(){const e=bu();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Z1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function JP(e){const n=bu(),t=V1(null);if(n){const i=n.refs===Oi?n.refs={}:n.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>t.value,set:s=>t.value=s})}return t}function _p(e,n,t,r,i=!1){if(ir(e)){e.forEach((M,k)=>_p(M,n&&(ir(n)?n[k]:n),t,r,i));return}if(bf(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&_p(e,n,t,r.component.subTree);return}const s=r.shapeFlag&4?Np(r.component):r.el,o=i?null:s,{i:u,r:f}=e,d=n&&n.r,m=u.refs===Oi?u.refs={}:u.refs,_=u.setupState,b=Ii(_),y=_===Oi?()=>!1:M=>Xi(b,M);if(d!=null&&d!==f&&(Co(d)?(m[d]=null,y(d)&&(_[d]=null)):Xo(d)&&(d.value=null)),Tr(f))pd(f,u,12,[o,m]);else{const M=Co(f),k=Xo(f);if(M||k){const F=()=>{if(e.f){const I=M?y(f)?_[f]:m[f]:f.value;i?ir(I)&&D1(I,s):ir(I)?I.includes(s)||I.push(s):M?(m[f]=[s],y(f)&&(_[f]=m[f])):(f.value=[s],e.k&&(m[e.k]=f.value))}else M?(m[f]=o,y(f)&&(_[f]=o)):k&&(f.value=o,e.k&&(m[e.k]=o))};o?(F.id=-1,zs(F,t)):F()}}}let z2=!1;const Th=()=>{z2||(console.error("Hydration completed but contains mismatches."),z2=!0)},XP=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",QP=e=>e.namespaceURI.includes("MathML"),hg=e=>{if(e.nodeType===1){if(XP(e))return"svg";if(QP(e))return"mathml"}},Hh=e=>e.nodeType===8;function eM(e){const{mt:n,p:t,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:u,insert:f,createComment:d}}=e,m=(Y,ee)=>{if(!ee.hasChildNodes()){t(null,Y,ee),em(),ee._vnode=Y;return}_(ee.firstChild,Y,null,null,null),em(),ee._vnode=Y},_=(Y,ee,he,fe,ve,$=!1)=>{$=$||!!ee.dynamicChildren;const U=Hh(Y)&&Y.data==="[",Z=()=>k(Y,ee,he,fe,ve,U),{type:T,ref:N,shapeFlag:O,patchFlag:z}=ee;let q=Y.nodeType;ee.el=Y,z===-2&&($=!1,ee.dynamicChildren=null);let G=null;switch(T){case wf:q!==3?ee.children===""?(f(ee.el=i(""),o(Y),Y),G=Y):G=Z():(Y.data!==ee.children&&(Th(),Y.data=ee.children),G=s(Y));break;case Rs:R(Y)?(G=s(Y),I(ee.el=Y.content.firstChild,Y,he)):q!==8||U?G=Z():G=s(Y);break;case th:if(U&&(Y=s(Y),q=Y.nodeType),q===1||q===3){G=Y;const oe=!ee.children.length;for(let ie=0;ie<ee.staticCount;ie++)oe&&(ee.children+=G.nodeType===1?G.outerHTML:G.data),ie===ee.staticCount-1&&(ee.anchor=G),G=s(G);return U?s(G):G}else Z();break;case Mn:U?G=M(Y,ee,he,fe,ve,$):G=Z();break;default:if(O&1)(q!==1||ee.type.toLowerCase()!==Y.tagName.toLowerCase())&&!R(Y)?G=Z():G=b(Y,ee,he,fe,ve,$);else if(O&6){ee.slotScopeIds=ve;const oe=o(Y);if(U?G=F(Y):Hh(Y)&&Y.data==="teleport start"?G=F(Y,Y.data,"teleport end"):G=s(Y),n(ee,oe,null,he,fe,hg(oe),$),bf(ee)&&!ee.type.__asyncResolved){let ie;U?(ie=pi(Mn),ie.anchor=G?G.previousSibling:oe.lastChild):ie=Y.nodeType===3?ii(""):pi("div"),ie.el=Y,ee.component.subTree=ie}}else O&64?q!==8?G=Z():G=ee.type.hydrate(Y,ee,he,fe,ve,$,e,y):O&128&&(G=ee.type.hydrate(Y,ee,he,fe,hg(o(Y)),ve,$,e,_))}return N!=null&&_p(N,null,fe,ee),G},b=(Y,ee,he,fe,ve,$)=>{$=$||!!ee.dynamicChildren;const{type:U,props:Z,patchFlag:T,shapeFlag:N,dirs:O,transition:z}=ee,q=U==="input"||U==="option";if(q||T!==-1){O&&cc(ee,null,he,"created");let G=!1;if(R(Y)){G=p4(null,z)&&he&&he.vnode.props&&he.vnode.props.appear;const ie=Y.content.firstChild;G&&z.beforeEnter(ie),I(ie,Y,he),ee.el=Y=ie}if(N&16&&!(Z&&(Z.innerHTML||Z.textContent))){let ie=y(Y.firstChild,ee,Y,he,fe,ve,$);for(;ie;){dg(Y,1)||Th();const _e=ie;ie=ie.nextSibling,u(_e)}}else if(N&8){let ie=ee.children;ie[0]===`
`&&(Y.tagName==="PRE"||Y.tagName==="TEXTAREA")&&(ie=ie.slice(1)),Y.textContent!==ie&&(dg(Y,0)||Th(),Y.textContent=ee.children)}if(Z){if(q||!$||T&48){const ie=Y.tagName.includes("-");for(const _e in Z)(q&&(_e.endsWith("value")||_e==="indeterminate")||Mp(_e)&&!Yh(_e)||_e[0]==="."||ie)&&r(Y,_e,null,Z[_e],void 0,he)}else if(Z.onClick)r(Y,"onClick",null,Z.onClick,void 0,he);else if(T&4&&pc(Z.style))for(const ie in Z.style)Z.style[ie]}let oe;(oe=Z&&Z.onVnodeBeforeMount)&&wl(oe,he,ee),O&&cc(ee,null,he,"beforeMount"),((oe=Z&&Z.onVnodeMounted)||O||G)&&L4(()=>{oe&&wl(oe,he,ee),G&&z.enter(Y),O&&cc(ee,null,he,"mounted")},fe)}return Y.nextSibling},y=(Y,ee,he,fe,ve,$,U)=>{U=U||!!ee.dynamicChildren;const Z=ee.children,T=Z.length;for(let N=0;N<T;N++){const O=U?Z[N]:Z[N]=Ll(Z[N]),z=O.type===wf;Y?(z&&!U&&N+1<T&&Ll(Z[N+1]).type===wf&&(f(i(Y.data.slice(O.children.length)),he,s(Y)),Y.data=O.children),Y=_(Y,O,fe,ve,$,U)):z&&!O.children?f(O.el=i(""),he):(dg(he,1)||Th(),t(null,O,he,null,fe,ve,hg(he),$))}return Y},M=(Y,ee,he,fe,ve,$)=>{const{slotScopeIds:U}=ee;U&&(ve=ve?ve.concat(U):U);const Z=o(Y),T=y(s(Y),ee,Z,he,fe,ve,$);return T&&Hh(T)&&T.data==="]"?s(ee.anchor=T):(Th(),f(ee.anchor=d("]"),Z,T),T)},k=(Y,ee,he,fe,ve,$)=>{if(dg(Y.parentElement,1)||Th(),ee.el=null,$){const T=F(Y);for(;;){const N=s(Y);if(N&&N!==T)u(N);else break}}const U=s(Y),Z=o(Y);return u(Y),t(null,ee,Z,U,he,fe,hg(Z),ve),he&&(he.vnode.el=ee.el,Vm(he,ee.el)),U},F=(Y,ee="[",he="]")=>{let fe=0;for(;Y;)if(Y=s(Y),Y&&Hh(Y)&&(Y.data===ee&&fe++,Y.data===he)){if(fe===0)return s(Y);fe--}return Y},I=(Y,ee,he)=>{const fe=ee.parentNode;fe&&fe.replaceChild(Y,ee);let ve=he;for(;ve;)ve.vnode.el===ee&&(ve.vnode.el=ve.subTree.el=Y),ve=ve.parent},R=Y=>Y.nodeType===1&&Y.tagName==="TEMPLATE";return[m,_]}const U2="data-allow-mismatch",tM={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function dg(e,n){if(n===0||n===1)for(;e&&!e.hasAttribute(U2);)e=e.parentElement;const t=e&&e.getAttribute(U2);if(t==null)return!1;if(t==="")return!0;{const r=t.split(",");return n===0&&r.includes("children")?!0:t.split(",").includes(tM[n])}}const nM=km().requestIdleCallback||(e=>setTimeout(e,1)),rM=km().cancelIdleCallback||(e=>clearTimeout(e)),iM=(e=1e4)=>n=>{const t=nM(n,{timeout:e});return()=>rM(t)};function oM(e){const{top:n,left:t,bottom:r,right:i}=e.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(n>0&&n<s||r>0&&r<s)&&(t>0&&t<o||i>0&&i<o)}const sM=e=>(n,t)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),n();break}},e);return t(i=>{if(i instanceof Element){if(oM(i))return n(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},aM=e=>n=>{if(e){const t=matchMedia(e);if(t.matches)n();else return t.addEventListener("change",n,{once:!0}),()=>t.removeEventListener("change",n)}},lM=(e=[])=>(n,t)=>{Co(e)&&(e=[e]);let r=!1;const i=o=>{r||(r=!0,s(),n(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{t(o=>{for(const u of e)o.removeEventListener(u,i)})};return t(o=>{for(const u of e)o.addEventListener(u,i,{once:!0})}),s};function uM(e,n){if(Hh(e)&&e.data==="["){let t=1,r=e.nextSibling;for(;r;){if(r.nodeType===1){if(n(r)===!1)break}else if(Hh(r))if(r.data==="]"){if(--t===0)break}else r.data==="["&&t++;r=r.nextSibling}}else n(e)}const bf=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function cM(e){Tr(e)&&(e={loader:e});const{loader:n,loadingComponent:t,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:u=!0,onError:f}=e;let d=null,m,_=0;const b=()=>(_++,d=null,y()),y=()=>{let M;return d||(M=d=n().catch(k=>{if(k=k instanceof Error?k:new Error(String(k)),f)return new Promise((F,I)=>{f(k,()=>F(b()),()=>I(k),_+1)});throw k}).then(k=>M!==d&&d?d:(k&&(k.__esModule||k[Symbol.toStringTag]==="Module")&&(k=k.default),m=k,k)))};return Qo({name:"AsyncComponentWrapper",__asyncLoader:y,__asyncHydrate(M,k,F){const I=s?()=>{const R=s(F,Y=>uM(M,Y));R&&(k.bum||(k.bum=[])).push(R)}:F;m?I():y().then(()=>!k.isUnmounted&&I())},get __asyncResolved(){return m},setup(){const M=Vs;if(Z1(M),m)return()=>$0(m,M);const k=Y=>{d=null,ch(Y,M,13,!r)};if(u&&M.suspense||od)return y().then(Y=>()=>$0(Y,M)).catch(Y=>(k(Y),()=>r?pi(r,{error:Y}):null));const F=Ft(!1),I=Ft(),R=Ft(!!i);return i&&setTimeout(()=>{R.value=!1},i),o!=null&&setTimeout(()=>{if(!F.value&&!I.value){const Y=new Error(`Async component timed out after ${o}ms.`);k(Y),I.value=Y}},o),y().then(()=>{F.value=!0,M.parent&&kp(M.parent.vnode)&&M.parent.update()}).catch(Y=>{k(Y),I.value=Y}),()=>{if(F.value&&m)return $0(m,M);if(I.value&&r)return pi(r,{error:I.value});if(t&&!R.value)return pi(t)}}})}function $0(e,n){const{ref:t,props:r,children:i,ce:s}=n.vnode,o=pi(e,r,i);return o.ref=t,o.ce=s,delete n.vnode.ce,o}const kp=e=>e.type.__isKeepAlive,fM={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:n}){const t=bu(),r=t.ctx;if(!r.renderer)return()=>{const R=n.default&&n.default();return R&&R.length===1?R[0]:R};const i=new Map,s=new Set;let o=null;const u=t.suspense,{renderer:{p:f,m:d,um:m,o:{createElement:_}}}=r,b=_("div");r.activate=(R,Y,ee,he,fe)=>{const ve=R.component;d(R,Y,ee,0,u),f(ve.vnode,R,Y,ee,ve,u,he,R.slotScopeIds,fe),zs(()=>{ve.isDeactivated=!1,ve.a&&Jh(ve.a);const $=R.props&&R.props.onVnodeMounted;$&&wl($,ve.parent,R)},u)},r.deactivate=R=>{const Y=R.component;nm(Y.m),nm(Y.a),d(R,b,null,1,u),zs(()=>{Y.da&&Jh(Y.da);const ee=R.props&&R.props.onVnodeUnmounted;ee&&wl(ee,Y.parent,R),Y.isDeactivated=!0},u)};function y(R){z0(R),m(R,t,u,!0)}function M(R){i.forEach((Y,ee)=>{const he=Uv(Y.type);he&&!R(he)&&k(ee)})}function k(R){const Y=i.get(R);Y&&(!o||!$u(Y,o))?y(Y):o&&z0(o),i.delete(R),s.delete(R)}oo(()=>[e.include,e.exclude],([R,Y])=>{R&&M(ee=>jd(R,ee)),Y&&M(ee=>!jd(Y,ee))},{flush:"post",deep:!0});let F=null;const I=()=>{F!=null&&(rm(t.subTree.type)?zs(()=>{i.set(F,pg(t.subTree))},t.subTree.suspense):i.set(F,pg(t.subTree)))};return ps(I),zm(I),fh(()=>{i.forEach(R=>{const{subTree:Y,suspense:ee}=t,he=pg(Y);if(R.type===he.type&&R.key===he.key){z0(he);const fe=he.component.da;fe&&zs(fe,ee);return}y(R)})}),()=>{if(F=null,!n.default)return o=null;const R=n.default(),Y=R[0];if(R.length>1)return o=null,R;if(!Vc(Y)||!(Y.shapeFlag&4)&&!(Y.shapeFlag&128))return o=null,Y;let ee=pg(Y);if(ee.type===Rs)return o=null,ee;const he=ee.type,fe=Uv(bf(ee)?ee.type.__asyncResolved||{}:he),{include:ve,exclude:$,max:U}=e;if(ve&&(!fe||!jd(ve,fe))||$&&fe&&jd($,fe))return ee.shapeFlag&=-257,o=ee,Y;const Z=ee.key==null?he:ee.key,T=i.get(Z);return ee.el&&(ee=vc(ee),Y.shapeFlag&128&&(Y.ssContent=ee)),F=Z,T?(ee.el=T.el,ee.component=T.component,ee.transition&&Uc(ee,ee.transition),ee.shapeFlag|=512,s.delete(Z),s.add(Z)):(s.add(Z),U&&s.size>parseInt(U,10)&&k(s.values().next().value)),ee.shapeFlag|=256,o=ee,rm(Y.type)?Y:ee}}},hM=fM;function jd(e,n){return ir(e)?e.some(t=>jd(t,n)):Co(e)?e.split(",").includes(n):UC(e)?(e.lastIndex=0,e.test(n)):!1}function Uw(e,n){Gw(e,"a",n)}function Vw(e,n){Gw(e,"da",n)}function Gw(e,n,t=Vs){const r=e.__wdc||(e.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if($m(n,r,t),t){let i=t.parent;for(;i&&i.parent;)kp(i.parent.vnode)&&dM(r,n,t,i),i=i.parent}}function dM(e,n,t,r){const i=$m(n,e,r,!0);Hu(()=>{D1(r[n],i)},t)}function z0(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function pg(e){return e.shapeFlag&128?e.ssContent:e}function $m(e,n,t=Vs,r=!1){if(t){const i=t[e]||(t[e]=[]),s=n.__weh||(n.__weh=(...o)=>{Af();const u=sh(t),f=yu(n,t,e,o);return u(),kf(),f});return r?i.unshift(s):i.push(s),s}}const qc=e=>(n,t=Vs)=>{(!od||e==="sp")&&$m(e,(...r)=>n(...r),t)},Hw=qc("bm"),ps=qc("m"),K1=qc("bu"),zm=qc("u"),fh=qc("bum"),Hu=qc("um"),qw=qc("sp"),Ww=qc("rtg"),Zw=qc("rtc");function Kw(e,n=Vs){$m("ec",e,n)}const Y1="components",pM="directives";function Yw(e,n){return J1(Y1,e,!0,n)||e}const Jw=Symbol.for("v-ndc");function gM(e){return Co(e)?J1(Y1,e,!1)||e:e||Jw}function mM(e){return J1(pM,e)}function J1(e,n,t=!0,r=!1){const i=Gs||Vs;if(i){const s=i.type;if(e===Y1){const u=Uv(s,!1);if(u&&(u===n||u===ma(n)||u===Ap(ma(n))))return s}const o=V2(i[e]||s[e],n)||V2(i.appContext[e],n);return!o&&r?s:o}}function V2(e,n){return e&&(e[n]||e[ma(n)]||e[Ap(ma(n))])}function br(e,n,t,r){let i;const s=t&&t[r],o=ir(e);if(o||Co(e)){const u=o&&pc(e);let f=!1;u&&(f=!Wl(e),e=Dm(e)),i=new Array(e.length);for(let d=0,m=e.length;d<m;d++)i[d]=n(f?Oa(e[d]):e[d],d,void 0,s&&s[d])}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=n(u+1,u,void 0,s&&s[u])}else if(lo(e))if(e[Symbol.iterator])i=Array.from(e,(u,f)=>n(u,f,void 0,s&&s[f]));else{const u=Object.keys(e);i=new Array(u.length);for(let f=0,d=u.length;f<d;f++){const m=u[f];i[f]=n(e[m],m,f,s&&s[f])}}else i=[];return t&&(t[r]=i),i}function vM(e,n){for(let t=0;t<n.length;t++){const r=n[t];if(ir(r))for(let i=0;i<r.length;i++)e[r[i].name]=r[i].fn;else r&&(e[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return e}function yM(e,n,t={},r,i){if(Gs.ce||Gs.parent&&bf(Gs.parent)&&Gs.parent.ce)return n!=="default"&&(t.name=n),Fe(),il(Mn,null,[pi("slot",t,r&&r())],64);let s=e[n];s&&s._c&&(s._d=!1),Fe();const o=s&&X1(s(t)),u=t.key||o&&o.key,f=il(Mn,{key:(u&&!Gu(u)?u:`_${n}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&e._===1?64:-2);return!i&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),s&&s._c&&(s._d=!0),f}function X1(e){return e.some(n=>Vc(n)?!(n.type===Rs||n.type===Mn&&!X1(n.children)):!0)?e:null}function _M(e,n){const t={};for(const r in e)t[n&&/[A-Z]/.test(r)?`on:${r}`:Kd(r)]=e[r];return t}const Tv=e=>e?k4(e)?Np(e):Tv(e.parent):null,Qd=yo(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Tv(e.parent),$root:e=>Tv(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Q1(e),$forceUpdate:e=>e.f||(e.f=()=>{H1(e.update)}),$nextTick:e=>e.n||(e.n=Us.bind(e.proxy)),$watch:e=>KM.bind(e)}),U0=(e,n)=>e!==Oi&&!e.__isScriptSetup&&Xi(e,n),Nv={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:u,appContext:f}=e;let d;if(n[0]!=="$"){const y=o[n];if(y!==void 0)switch(y){case 1:return r[n];case 2:return i[n];case 4:return t[n];case 3:return s[n]}else{if(U0(r,n))return o[n]=1,r[n];if(i!==Oi&&Xi(i,n))return o[n]=2,i[n];if((d=e.propsOptions[0])&&Xi(d,n))return o[n]=3,s[n];if(t!==Oi&&Xi(t,n))return o[n]=4,t[n];Dv&&(o[n]=0)}}const m=Qd[n];let _,b;if(m)return n==="$attrs"&&Ia(e.attrs,"get",""),m(e);if((_=u.__cssModules)&&(_=_[n]))return _;if(t!==Oi&&Xi(t,n))return o[n]=4,t[n];if(b=f.config.globalProperties,Xi(b,n))return b[n]},set({_:e},n,t){const{data:r,setupState:i,ctx:s}=e;return U0(i,n)?(i[n]=t,!0):r!==Oi&&Xi(r,n)?(r[n]=t,!0):Xi(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(s[n]=t,!0)},has({_:{data:e,setupState:n,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let u;return!!t[o]||e!==Oi&&Xi(e,o)||U0(n,o)||(u=s[0])&&Xi(u,o)||Xi(r,o)||Xi(Qd,o)||Xi(i.config.globalProperties,o)},defineProperty(e,n,t){return t.get!=null?e._.accessCache[n]=0:Xi(t,"value")&&this.set(e,n,t.value,null),Reflect.defineProperty(e,n,t)}},bM=yo({},Nv,{get(e,n){if(n!==Symbol.unscopables)return Nv.get(e,n,e)},has(e,n){return n[0]!=="_"&&!WC(n)}});function wM(){return null}function xM(){return null}function LM(e){}function SM(e){}function EM(){return null}function CM(){}function PM(e,n){return null}function MM(){return Xw().slots}function AM(){return Xw().attrs}function Xw(){const e=bu();return e.setupContext||(e.setupContext=D4(e))}function bp(e){return ir(e)?e.reduce((n,t)=>(n[t]=null,n),{}):e}function kM(e,n){const t=bp(e);for(const r in n){if(r.startsWith("__skip"))continue;let i=t[r];i?ir(i)||Tr(i)?i=t[r]={type:i,default:n[r]}:i.default=n[r]:i===null&&(i=t[r]={default:n[r]}),i&&n[`__skip_${r}`]&&(i.skipFactory=!0)}return t}function TM(e,n){return!e||!n?e||n:ir(e)&&ir(n)?e.concat(n):yo({},bp(e),bp(n))}function NM(e,n){const t={};for(const r in e)n.includes(r)||Object.defineProperty(t,r,{enumerable:!0,get:()=>e[r]});return t}function DM(e){const n=bu();let t=e();return jv(),I1(t)&&(t=t.catch(r=>{throw sh(n),r})),[t,()=>sh(n)]}let Dv=!0;function IM(e){const n=Q1(e),t=e.proxy,r=e.ctx;Dv=!1,n.beforeCreate&&G2(n.beforeCreate,e,"bc");const{data:i,computed:s,methods:o,watch:u,provide:f,inject:d,created:m,beforeMount:_,mounted:b,beforeUpdate:y,updated:M,activated:k,deactivated:F,beforeDestroy:I,beforeUnmount:R,destroyed:Y,unmounted:ee,render:he,renderTracked:fe,renderTriggered:ve,errorCaptured:$,serverPrefetch:U,expose:Z,inheritAttrs:T,components:N,directives:O,filters:z}=n;if(d&&OM(d,r,null),o)for(const oe in o){const ie=o[oe];Tr(ie)&&(r[oe]=ie.bind(t))}if(i){const oe=i.call(t,t);lo(oe)&&(e.data=Jl(oe))}if(Dv=!0,s)for(const oe in s){const ie=s[oe],_e=Tr(ie)?ie.bind(t,t):Tr(ie.get)?ie.get.bind(t,t):mu,Ce=!Tr(ie)&&Tr(ie.set)?ie.set.bind(t):mu,Te=rr({get:_e,set:Ce});Object.defineProperty(r,oe,{enumerable:!0,configurable:!0,get:()=>Te.value,set:J=>Te.value=J})}if(u)for(const oe in u)Qw(u[oe],r,t,oe);if(f){const oe=Tr(f)?f.call(t):f;Reflect.ownKeys(oe).forEach(ie=>{ep(ie,oe[ie])})}m&&G2(m,e,"c");function G(oe,ie){ir(ie)?ie.forEach(_e=>oe(_e.bind(t))):ie&&oe(ie.bind(t))}if(G(Hw,_),G(ps,b),G(K1,y),G(zm,M),G(Uw,k),G(Vw,F),G(Kw,$),G(Zw,fe),G(Ww,ve),G(fh,R),G(Hu,ee),G(qw,U),ir(Z))if(Z.length){const oe=e.exposed||(e.exposed={});Z.forEach(ie=>{Object.defineProperty(oe,ie,{get:()=>t[ie],set:_e=>t[ie]=_e})})}else e.exposed||(e.exposed={});he&&e.render===mu&&(e.render=he),T!=null&&(e.inheritAttrs=T),N&&(e.components=N),O&&(e.directives=O),U&&Z1(e)}function OM(e,n,t=mu){ir(e)&&(e=Iv(e));for(const r in e){const i=e[r];let s;lo(i)?"default"in i?s=Zl(i.from||r,i.default,!0):s=Zl(i.from||r):s=Zl(i),Xo(s)?Object.defineProperty(n,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):n[r]=s}}function G2(e,n,t){yu(ir(e)?e.map(r=>r.bind(n.proxy)):e.bind(n.proxy),n,t)}function Qw(e,n,t,r){let i=r.includes(".")?_4(t,r):()=>t[r];if(Co(e)){const s=n[e];Tr(s)&&oo(i,s)}else if(Tr(e))oo(i,e.bind(t));else if(lo(e))if(ir(e))e.forEach(s=>Qw(s,n,t,r));else{const s=Tr(e.handler)?e.handler.bind(t):n[e.handler];Tr(s)&&oo(i,s,e)}}function Q1(e){const n=e.type,{mixins:t,extends:r}=n,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,u=s.get(n);let f;return u?f=u:!i.length&&!t&&!r?f=n:(f={},i.length&&i.forEach(d=>tm(f,d,o,!0)),tm(f,n,o)),lo(n)&&s.set(n,f),f}function tm(e,n,t,r=!1){const{mixins:i,extends:s}=n;s&&tm(e,s,t,!0),i&&i.forEach(o=>tm(e,o,t,!0));for(const o in n)if(!(r&&o==="expose")){const u=BM[o]||t&&t[o];e[o]=u?u(e[o],n[o]):n[o]}return e}const BM={data:H2,props:q2,emits:q2,methods:$d,computed:$d,beforeCreate:Ya,created:Ya,beforeMount:Ya,mounted:Ya,beforeUpdate:Ya,updated:Ya,beforeDestroy:Ya,beforeUnmount:Ya,destroyed:Ya,unmounted:Ya,activated:Ya,deactivated:Ya,errorCaptured:Ya,serverPrefetch:Ya,components:$d,directives:$d,watch:FM,provide:H2,inject:RM};function H2(e,n){return n?e?function(){return yo(Tr(e)?e.call(this,this):e,Tr(n)?n.call(this,this):n)}:n:e}function RM(e,n){return $d(Iv(e),Iv(n))}function Iv(e){if(ir(e)){const n={};for(let t=0;t<e.length;t++)n[e[t]]=e[t];return n}return e}function Ya(e,n){return e?[...new Set([].concat(e,n))]:n}function $d(e,n){return e?yo(Object.create(null),e,n):n}function q2(e,n){return e?ir(e)&&ir(n)?[...new Set([...e,...n])]:yo(Object.create(null),bp(e),bp(n??{})):n}function FM(e,n){if(!e)return n;if(!n)return e;const t=yo(Object.create(null),e);for(const r in n)t[r]=Ya(e[r],n[r]);return t}function e4(){return{app:null,config:{isNativeTag:$C,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jM=0;function $M(e,n){return function(r,i=null){Tr(r)||(r=yo({},r)),i!=null&&!lo(i)&&(i=null);const s=e4(),o=new WeakSet,u=[];let f=!1;const d=s.app={_uid:jM++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:O4,get config(){return s.config},set config(m){},use(m,..._){return o.has(m)||(m&&Tr(m.install)?(o.add(m),m.install(d,..._)):Tr(m)&&(o.add(m),m(d,..._))),d},mixin(m){return s.mixins.includes(m)||s.mixins.push(m),d},component(m,_){return _?(s.components[m]=_,d):s.components[m]},directive(m,_){return _?(s.directives[m]=_,d):s.directives[m]},mount(m,_,b){if(!f){const y=d._ceVNode||pi(r,i);return y.appContext=s,b===!0?b="svg":b===!1&&(b=void 0),_&&n?n(y,m):e(y,m,b),f=!0,d._container=m,m.__vue_app__=d,Np(y.component)}},onUnmount(m){u.push(m)},unmount(){f&&(yu(u,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(m,_){return s.provides[m]=_,d},runWithContext(m){const _=eh;eh=d;try{return m()}finally{eh=_}}};return d}}let eh=null;function ep(e,n){if(Vs){let t=Vs.provides;const r=Vs.parent&&Vs.parent.provides;r===t&&(t=Vs.provides=Object.create(r)),t[e]=n}}function Zl(e,n,t=!1){const r=Vs||Gs;if(r||eh){const i=eh?eh._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return t&&Tr(n)?n.call(r&&r.proxy):n}}function t4(){return!!(Vs||Gs||eh)}const n4={},r4=()=>Object.create(n4),i4=e=>Object.getPrototypeOf(e)===n4;function zM(e,n,t,r=!1){const i={},s=r4();e.propsDefaults=Object.create(null),o4(e,n,i,s);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);t?e.props=r?i:U1(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function UM(e,n,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=e,u=Ii(i),[f]=e.propsOptions;let d=!1;if((r||o>0)&&!(o&16)){if(o&8){const m=e.vnode.dynamicProps;for(let _=0;_<m.length;_++){let b=m[_];if(Um(e.emitsOptions,b))continue;const y=n[b];if(f)if(Xi(s,b))y!==s[b]&&(s[b]=y,d=!0);else{const M=ma(b);i[M]=Ov(f,u,M,y,e,!1)}else y!==s[b]&&(s[b]=y,d=!0)}}}else{o4(e,n,i,s)&&(d=!0);let m;for(const _ in u)(!n||!Xi(n,_)&&((m=Sl(_))===_||!Xi(n,m)))&&(f?t&&(t[_]!==void 0||t[m]!==void 0)&&(i[_]=Ov(f,u,_,void 0,e,!0)):delete i[_]);if(s!==u)for(const _ in s)(!n||!Xi(n,_))&&(delete s[_],d=!0)}d&&Rc(e.attrs,"set","")}function o4(e,n,t,r){const[i,s]=e.propsOptions;let o=!1,u;if(n)for(let f in n){if(Yh(f))continue;const d=n[f];let m;i&&Xi(i,m=ma(f))?!s||!s.includes(m)?t[m]=d:(u||(u={}))[m]=d:Um(e.emitsOptions,f)||(!(f in r)||d!==r[f])&&(r[f]=d,o=!0)}if(s){const f=Ii(t),d=u||Oi;for(let m=0;m<s.length;m++){const _=s[m];t[_]=Ov(i,f,_,d[_],e,!Xi(d,_))}}return o}function Ov(e,n,t,r,i,s){const o=e[t];if(o!=null){const u=Xi(o,"default");if(u&&r===void 0){const f=o.default;if(o.type!==Function&&!o.skipFactory&&Tr(f)){const{propsDefaults:d}=i;if(t in d)r=d[t];else{const m=sh(i);r=d[t]=f.call(null,n),m()}}else r=f;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!u?r=!1:o[1]&&(r===""||r===Sl(t))&&(r=!0))}return r}const VM=new WeakMap;function s4(e,n,t=!1){const r=t?VM:n.propsCache,i=r.get(e);if(i)return i;const s=e.props,o={},u=[];let f=!1;if(!Tr(e)){const m=_=>{f=!0;const[b,y]=s4(_,n,!0);yo(o,b),y&&u.push(...y)};!t&&n.mixins.length&&n.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!s&&!f)return lo(e)&&r.set(e,Zh),Zh;if(ir(s))for(let m=0;m<s.length;m++){const _=ma(s[m]);W2(_)&&(o[_]=Oi)}else if(s)for(const m in s){const _=ma(m);if(W2(_)){const b=s[m],y=o[_]=ir(b)||Tr(b)?{type:b}:yo({},b),M=y.type;let k=!1,F=!0;if(ir(M))for(let I=0;I<M.length;++I){const R=M[I],Y=Tr(R)&&R.name;if(Y==="Boolean"){k=!0;break}else Y==="String"&&(F=!1)}else k=Tr(M)&&M.name==="Boolean";y[0]=k,y[1]=F,(k||Xi(y,"default"))&&u.push(_)}}const d=[o,u];return lo(e)&&r.set(e,d),d}function W2(e){return e[0]!=="$"&&!Yh(e)}const a4=e=>e[0]==="_"||e==="$stable",ey=e=>ir(e)?e.map(Ll):[Ll(e)],GM=(e,n,t)=>{if(n._n)return n;const r=gu((...i)=>ey(n(...i)),t);return r._c=!1,r},l4=(e,n,t)=>{const r=e._ctx;for(const i in e){if(a4(i))continue;const s=e[i];if(Tr(s))n[i]=GM(i,s,r);else if(s!=null){const o=ey(s);n[i]=()=>o}}},u4=(e,n)=>{const t=ey(n);e.slots.default=()=>t},c4=(e,n,t)=>{for(const r in n)(t||r!=="_")&&(e[r]=n[r])},HM=(e,n,t)=>{const r=e.slots=r4();if(e.vnode.shapeFlag&32){const i=n._;i?(c4(r,n,t),t&&iw(r,"_",i,!0)):l4(n,r)}else n&&u4(e,n)},qM=(e,n,t)=>{const{vnode:r,slots:i}=e;let s=!0,o=Oi;if(r.shapeFlag&32){const u=n._;u?t&&u===1?s=!1:c4(i,n,t):(s=!n.$stable,l4(n,i)),o=n}else n&&(u4(e,n),o={default:1});if(s)for(const u in i)!a4(u)&&o[u]==null&&delete i[u]},zs=L4;function f4(e){return d4(e)}function h4(e){return d4(e,eM)}function d4(e,n){const t=km();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:u,createComment:f,setText:d,setElementText:m,parentNode:_,nextSibling:b,setScopeId:y=mu,insertStaticContent:M}=e,k=(ce,te,ye,de=null,We=null,He=null,tt=void 0,Ze=null,et=!!te.dynamicChildren)=>{if(ce===te)return;ce&&!$u(ce,te)&&(de=pe(ce),J(ce,We,He,!0),ce=null),te.patchFlag===-2&&(et=!1,te.dynamicChildren=null);const{type:ze,ref:wt,shapeFlag:Pt}=te;switch(ze){case wf:F(ce,te,ye,de);break;case Rs:I(ce,te,ye,de);break;case th:ce==null&&R(te,ye,de,tt);break;case Mn:N(ce,te,ye,de,We,He,tt,Ze,et);break;default:Pt&1?he(ce,te,ye,de,We,He,tt,Ze,et):Pt&6?O(ce,te,ye,de,We,He,tt,Ze,et):(Pt&64||Pt&128)&&ze.process(ce,te,ye,de,We,He,tt,Ze,et,ke)}wt!=null&&We&&_p(wt,ce&&ce.ref,He,te||ce,!te)},F=(ce,te,ye,de)=>{if(ce==null)r(te.el=u(te.children),ye,de);else{const We=te.el=ce.el;te.children!==ce.children&&d(We,te.children)}},I=(ce,te,ye,de)=>{ce==null?r(te.el=f(te.children||""),ye,de):te.el=ce.el},R=(ce,te,ye,de)=>{[ce.el,ce.anchor]=M(ce.children,te,ye,de,ce.el,ce.anchor)},Y=({el:ce,anchor:te},ye,de)=>{let We;for(;ce&&ce!==te;)We=b(ce),r(ce,ye,de),ce=We;r(te,ye,de)},ee=({el:ce,anchor:te})=>{let ye;for(;ce&&ce!==te;)ye=b(ce),i(ce),ce=ye;i(te)},he=(ce,te,ye,de,We,He,tt,Ze,et)=>{te.type==="svg"?tt="svg":te.type==="math"&&(tt="mathml"),ce==null?fe(te,ye,de,We,He,tt,Ze,et):U(ce,te,We,He,tt,Ze,et)},fe=(ce,te,ye,de,We,He,tt,Ze)=>{let et,ze;const{props:wt,shapeFlag:Pt,transition:kt,dirs:Jt}=ce;if(et=ce.el=o(ce.type,He,wt&&wt.is,wt),Pt&8?m(et,ce.children):Pt&16&&$(ce.children,et,null,de,We,V0(ce,He),tt,Ze),Jt&&cc(ce,null,de,"created"),ve(et,ce,ce.scopeId,tt,de),wt){for(const cn in wt)cn!=="value"&&!Yh(cn)&&s(et,cn,null,wt[cn],He,de);"value"in wt&&s(et,"value",null,wt.value,He),(ze=wt.onVnodeBeforeMount)&&wl(ze,de,ce)}Jt&&cc(ce,null,de,"beforeMount");const on=p4(We,kt);on&&kt.beforeEnter(et),r(et,te,ye),((ze=wt&&wt.onVnodeMounted)||on||Jt)&&zs(()=>{ze&&wl(ze,de,ce),on&&kt.enter(et),Jt&&cc(ce,null,de,"mounted")},We)},ve=(ce,te,ye,de,We)=>{if(ye&&y(ce,ye),de)for(let He=0;He<de.length;He++)y(ce,de[He]);if(We){let He=We.subTree;if(te===He||rm(He.type)&&(He.ssContent===te||He.ssFallback===te)){const tt=We.vnode;ve(ce,tt,tt.scopeId,tt.slotScopeIds,We.parent)}}},$=(ce,te,ye,de,We,He,tt,Ze,et=0)=>{for(let ze=et;ze<ce.length;ze++){const wt=ce[ze]=Ze?hf(ce[ze]):Ll(ce[ze]);k(null,wt,te,ye,de,We,He,tt,Ze)}},U=(ce,te,ye,de,We,He,tt)=>{const Ze=te.el=ce.el;let{patchFlag:et,dynamicChildren:ze,dirs:wt}=te;et|=ce.patchFlag&16;const Pt=ce.props||Oi,kt=te.props||Oi;let Jt;if(ye&&zf(ye,!1),(Jt=kt.onVnodeBeforeUpdate)&&wl(Jt,ye,te,ce),wt&&cc(te,ce,ye,"beforeUpdate"),ye&&zf(ye,!0),(Pt.innerHTML&&kt.innerHTML==null||Pt.textContent&&kt.textContent==null)&&m(Ze,""),ze?Z(ce.dynamicChildren,ze,Ze,ye,de,V0(te,We),He):tt||ie(ce,te,Ze,null,ye,de,V0(te,We),He,!1),et>0){if(et&16)T(Ze,Pt,kt,ye,We);else if(et&2&&Pt.class!==kt.class&&s(Ze,"class",null,kt.class,We),et&4&&s(Ze,"style",Pt.style,kt.style,We),et&8){const on=te.dynamicProps;for(let cn=0;cn<on.length;cn++){const Ke=on[cn],ot=Pt[Ke],rt=kt[Ke];(rt!==ot||Ke==="value")&&s(Ze,Ke,ot,rt,We,ye)}}et&1&&ce.children!==te.children&&m(Ze,te.children)}else!tt&&ze==null&&T(Ze,Pt,kt,ye,We);((Jt=kt.onVnodeUpdated)||wt)&&zs(()=>{Jt&&wl(Jt,ye,te,ce),wt&&cc(te,ce,ye,"updated")},de)},Z=(ce,te,ye,de,We,He,tt)=>{for(let Ze=0;Ze<te.length;Ze++){const et=ce[Ze],ze=te[Ze],wt=et.el&&(et.type===Mn||!$u(et,ze)||et.shapeFlag&70)?_(et.el):ye;k(et,ze,wt,null,de,We,He,tt,!0)}},T=(ce,te,ye,de,We)=>{if(te!==ye){if(te!==Oi)for(const He in te)!Yh(He)&&!(He in ye)&&s(ce,He,te[He],null,We,de);for(const He in ye){if(Yh(He))continue;const tt=ye[He],Ze=te[He];tt!==Ze&&He!=="value"&&s(ce,He,Ze,tt,We,de)}"value"in ye&&s(ce,"value",te.value,ye.value,We)}},N=(ce,te,ye,de,We,He,tt,Ze,et)=>{const ze=te.el=ce?ce.el:u(""),wt=te.anchor=ce?ce.anchor:u("");let{patchFlag:Pt,dynamicChildren:kt,slotScopeIds:Jt}=te;Jt&&(Ze=Ze?Ze.concat(Jt):Jt),ce==null?(r(ze,ye,de),r(wt,ye,de),$(te.children||[],ye,wt,We,He,tt,Ze,et)):Pt>0&&Pt&64&&kt&&ce.dynamicChildren?(Z(ce.dynamicChildren,kt,ye,We,He,tt,Ze),(te.key!=null||We&&te===We.subTree)&&ty(ce,te,!0)):ie(ce,te,ye,wt,We,He,tt,Ze,et)},O=(ce,te,ye,de,We,He,tt,Ze,et)=>{te.slotScopeIds=Ze,ce==null?te.shapeFlag&512?We.ctx.activate(te,ye,de,tt,et):z(te,ye,de,We,He,tt,et):q(ce,te,et)},z=(ce,te,ye,de,We,He,tt)=>{const Ze=ce.component=A4(ce,de,We);if(kp(ce)&&(Ze.ctx.renderer=ke),T4(Ze,!1,tt),Ze.asyncDep){if(We&&We.registerDep(Ze,G,tt),!ce.el){const et=Ze.subTree=pi(Rs);I(null,et,te,ye)}}else G(Ze,ce,te,ye,We,He,tt)},q=(ce,te,ye)=>{const de=te.component=ce.component;if(tA(ce,te,ye))if(de.asyncDep&&!de.asyncResolved){oe(de,te,ye);return}else de.next=te,de.update();else te.el=ce.el,de.vnode=te},G=(ce,te,ye,de,We,He,tt)=>{const Ze=()=>{if(ce.isMounted){let{next:Pt,bu:kt,u:Jt,parent:on,vnode:cn}=ce;{const Qt=g4(ce);if(Qt){Pt&&(Pt.el=cn.el,oe(ce,Pt,tt)),Qt.asyncDep.then(()=>{ce.isUnmounted||Ze()});return}}let Ke=Pt,ot;zf(ce,!1),Pt?(Pt.el=cn.el,oe(ce,Pt,tt)):Pt=cn,kt&&Jh(kt),(ot=Pt.props&&Pt.props.onVnodeBeforeUpdate)&&wl(ot,on,Pt,cn),zf(ce,!0);const rt=kg(ce),$t=ce.subTree;ce.subTree=rt,k($t,rt,_($t.el),pe($t),ce,We,He),Pt.el=rt.el,Ke===null&&Vm(ce,rt.el),Jt&&zs(Jt,We),(ot=Pt.props&&Pt.props.onVnodeUpdated)&&zs(()=>wl(ot,on,Pt,cn),We)}else{let Pt;const{el:kt,props:Jt}=te,{bm:on,m:cn,parent:Ke,root:ot,type:rt}=ce,$t=bf(te);if(zf(ce,!1),on&&Jh(on),!$t&&(Pt=Jt&&Jt.onVnodeBeforeMount)&&wl(Pt,Ke,te),zf(ce,!0),kt&&Ge){const Qt=()=>{ce.subTree=kg(ce),Ge(kt,ce.subTree,ce,We,null)};$t&&rt.__asyncHydrate?rt.__asyncHydrate(kt,ce,Qt):Qt()}else{ot.ce&&ot.ce._injectChildStyle(rt);const Qt=ce.subTree=kg(ce);k(null,Qt,ye,de,ce,We,He),te.el=Qt.el}if(cn&&zs(cn,We),!$t&&(Pt=Jt&&Jt.onVnodeMounted)){const Qt=te;zs(()=>wl(Pt,Ke,Qt),We)}(te.shapeFlag&256||Ke&&bf(Ke.vnode)&&Ke.vnode.shapeFlag&256)&&ce.a&&zs(ce.a,We),ce.isMounted=!0,te=ye=de=null}};ce.scope.on();const et=ce.effect=new dp(Ze);ce.scope.off();const ze=ce.update=et.run.bind(et),wt=ce.job=et.runIfDirty.bind(et);wt.i=ce,wt.id=ce.uid,et.scheduler=()=>H1(wt),zf(ce,!0),ze()},oe=(ce,te,ye)=>{te.component=ce;const de=ce.vnode.props;ce.vnode=te,ce.next=null,UM(ce,te.props,de,ye),qM(ce,te.children,ye),Af(),B2(ce),kf()},ie=(ce,te,ye,de,We,He,tt,Ze,et=!1)=>{const ze=ce&&ce.children,wt=ce?ce.shapeFlag:0,Pt=te.children,{patchFlag:kt,shapeFlag:Jt}=te;if(kt>0){if(kt&128){Ce(ze,Pt,ye,de,We,He,tt,Ze,et);return}else if(kt&256){_e(ze,Pt,ye,de,We,He,tt,Ze,et);return}}Jt&8?(wt&16&&se(ze,We,He),Pt!==ze&&m(ye,Pt)):wt&16?Jt&16?Ce(ze,Pt,ye,de,We,He,tt,Ze,et):se(ze,We,He,!0):(wt&8&&m(ye,""),Jt&16&&$(Pt,ye,de,We,He,tt,Ze,et))},_e=(ce,te,ye,de,We,He,tt,Ze,et)=>{ce=ce||Zh,te=te||Zh;const ze=ce.length,wt=te.length,Pt=Math.min(ze,wt);let kt;for(kt=0;kt<Pt;kt++){const Jt=te[kt]=et?hf(te[kt]):Ll(te[kt]);k(ce[kt],Jt,ye,null,We,He,tt,Ze,et)}ze>wt?se(ce,We,He,!0,!1,Pt):$(te,ye,de,We,He,tt,Ze,et,Pt)},Ce=(ce,te,ye,de,We,He,tt,Ze,et)=>{let ze=0;const wt=te.length;let Pt=ce.length-1,kt=wt-1;for(;ze<=Pt&&ze<=kt;){const Jt=ce[ze],on=te[ze]=et?hf(te[ze]):Ll(te[ze]);if($u(Jt,on))k(Jt,on,ye,null,We,He,tt,Ze,et);else break;ze++}for(;ze<=Pt&&ze<=kt;){const Jt=ce[Pt],on=te[kt]=et?hf(te[kt]):Ll(te[kt]);if($u(Jt,on))k(Jt,on,ye,null,We,He,tt,Ze,et);else break;Pt--,kt--}if(ze>Pt){if(ze<=kt){const Jt=kt+1,on=Jt<wt?te[Jt].el:de;for(;ze<=kt;)k(null,te[ze]=et?hf(te[ze]):Ll(te[ze]),ye,on,We,He,tt,Ze,et),ze++}}else if(ze>kt)for(;ze<=Pt;)J(ce[ze],We,He,!0),ze++;else{const Jt=ze,on=ze,cn=new Map;for(ze=on;ze<=kt;ze++){const Dn=te[ze]=et?hf(te[ze]):Ll(te[ze]);Dn.key!=null&&cn.set(Dn.key,ze)}let Ke,ot=0;const rt=kt-on+1;let $t=!1,Qt=0;const Rn=new Array(rt);for(ze=0;ze<rt;ze++)Rn[ze]=0;for(ze=Jt;ze<=Pt;ze++){const Dn=ce[ze];if(ot>=rt){J(Dn,We,He,!0);continue}let ar;if(Dn.key!=null)ar=cn.get(Dn.key);else for(Ke=on;Ke<=kt;Ke++)if(Rn[Ke-on]===0&&$u(Dn,te[Ke])){ar=Ke;break}ar===void 0?J(Dn,We,He,!0):(Rn[ar-on]=ze+1,ar>=Qt?Qt=ar:$t=!0,k(Dn,te[ar],ye,null,We,He,tt,Ze,et),ot++)}const Ln=$t?WM(Rn):Zh;for(Ke=Ln.length-1,ze=rt-1;ze>=0;ze--){const Dn=on+ze,ar=te[Dn],En=Dn+1<wt?te[Dn+1].el:de;Rn[ze]===0?k(null,ar,ye,En,We,He,tt,Ze,et):$t&&(Ke<0||ze!==Ln[Ke]?Te(ar,ye,En,2):Ke--)}}},Te=(ce,te,ye,de,We=null)=>{const{el:He,type:tt,transition:Ze,children:et,shapeFlag:ze}=ce;if(ze&6){Te(ce.component.subTree,te,ye,de);return}if(ze&128){ce.suspense.move(te,ye,de);return}if(ze&64){tt.move(ce,te,ye,ke);return}if(tt===Mn){r(He,te,ye);for(let Pt=0;Pt<et.length;Pt++)Te(et[Pt],te,ye,de);r(ce.anchor,te,ye);return}if(tt===th){Y(ce,te,ye);return}if(de!==2&&ze&1&&Ze)if(de===0)Ze.beforeEnter(He),r(He,te,ye),zs(()=>Ze.enter(He),We);else{const{leave:Pt,delayLeave:kt,afterLeave:Jt}=Ze,on=()=>r(He,te,ye),cn=()=>{Pt(He,()=>{on(),Jt&&Jt()})};kt?kt(He,on,cn):cn()}else r(He,te,ye)},J=(ce,te,ye,de=!1,We=!1)=>{const{type:He,props:tt,ref:Ze,children:et,dynamicChildren:ze,shapeFlag:wt,patchFlag:Pt,dirs:kt,cacheIndex:Jt}=ce;if(Pt===-2&&(We=!1),Ze!=null&&_p(Ze,null,ye,ce,!0),Jt!=null&&(te.renderCache[Jt]=void 0),wt&256){te.ctx.deactivate(ce);return}const on=wt&1&&kt,cn=!bf(ce);let Ke;if(cn&&(Ke=tt&&tt.onVnodeBeforeUnmount)&&wl(Ke,te,ce),wt&6)ue(ce.component,ye,de);else{if(wt&128){ce.suspense.unmount(ye,de);return}on&&cc(ce,null,te,"beforeUnmount"),wt&64?ce.type.remove(ce,te,ye,ke,de):ze&&!ze.hasOnce&&(He!==Mn||Pt>0&&Pt&64)?se(ze,te,ye,!1,!0):(He===Mn&&Pt&384||!We&&wt&16)&&se(et,te,ye),de&&H(ce)}(cn&&(Ke=tt&&tt.onVnodeUnmounted)||on)&&zs(()=>{Ke&&wl(Ke,te,ce),on&&cc(ce,null,te,"unmounted")},ye)},H=ce=>{const{type:te,el:ye,anchor:de,transition:We}=ce;if(te===Mn){Q(ye,de);return}if(te===th){ee(ce);return}const He=()=>{i(ye),We&&!We.persisted&&We.afterLeave&&We.afterLeave()};if(ce.shapeFlag&1&&We&&!We.persisted){const{leave:tt,delayLeave:Ze}=We,et=()=>tt(ye,He);Ze?Ze(ce.el,He,et):et()}else He()},Q=(ce,te)=>{let ye;for(;ce!==te;)ye=b(ce),i(ce),ce=ye;i(te)},ue=(ce,te,ye)=>{const{bum:de,scope:We,job:He,subTree:tt,um:Ze,m:et,a:ze}=ce;nm(et),nm(ze),de&&Jh(de),We.stop(),He&&(He.flags|=8,J(tt,ce,te,ye)),Ze&&zs(Ze,te),zs(()=>{ce.isUnmounted=!0},te),te&&te.pendingBranch&&!te.isUnmounted&&ce.asyncDep&&!ce.asyncResolved&&ce.suspenseId===te.pendingId&&(te.deps--,te.deps===0&&te.resolve())},se=(ce,te,ye,de=!1,We=!1,He=0)=>{for(let tt=He;tt<ce.length;tt++)J(ce[tt],te,ye,de,We)},pe=ce=>{if(ce.shapeFlag&6)return pe(ce.component.subTree);if(ce.shapeFlag&128)return ce.suspense.next();const te=b(ce.anchor||ce.el),ye=te&&te[Iw];return ye?b(ye):te};let K=!1;const D=(ce,te,ye)=>{ce==null?te._vnode&&J(te._vnode,null,null,!0):k(te._vnode||null,ce,te,null,null,null,ye),te._vnode=ce,K||(K=!0,B2(),em(),K=!1)},ke={p:k,um:J,m:Te,r:H,mt:z,mc:$,pc:ie,pbc:Z,n:pe,o:e};let Me,Ge;return n&&([Me,Ge]=n(ke)),{render:D,hydrate:Me,createApp:$M(D,Me)}}function V0({type:e,props:n},t){return t==="svg"&&e==="foreignObject"||t==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:t}function zf({effect:e,job:n},t){t?(e.flags|=32,n.flags|=4):(e.flags&=-33,n.flags&=-5)}function p4(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function ty(e,n,t=!1){const r=e.children,i=n.children;if(ir(r)&&ir(i))for(let s=0;s<r.length;s++){const o=r[s];let u=i[s];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=i[s]=hf(i[s]),u.el=o.el),!t&&u.patchFlag!==-2&&ty(o,u)),u.type===wf&&(u.el=o.el)}}function WM(e){const n=e.slice(),t=[0];let r,i,s,o,u;const f=e.length;for(r=0;r<f;r++){const d=e[r];if(d!==0){if(i=t[t.length-1],e[i]<d){n[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)u=s+o>>1,e[t[u]]<d?s=u+1:o=u;d<e[t[s]]&&(s>0&&(n[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=n[o];return t}function g4(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:g4(n)}function nm(e){if(e)for(let n=0;n<e.length;n++)e[n].flags|=8}const m4=Symbol.for("v-scx"),v4=()=>Zl(m4);function wp(e,n){return Tp(e,null,n)}function ZM(e,n){return Tp(e,null,{flush:"post"})}function y4(e,n){return Tp(e,null,{flush:"sync"})}function oo(e,n,t){return Tp(e,n,t)}function Tp(e,n,t=Oi){const{immediate:r,deep:i,flush:s,once:o}=t,u=yo({},t),f=n&&r||!n&&s!=="post";let d;if(od){if(s==="sync"){const y=v4();d=y.__watcherHandles||(y.__watcherHandles=[])}else if(!f){const y=()=>{};return y.stop=mu,y.resume=mu,y.pause=mu,y}}const m=Vs;u.call=(y,M,k)=>yu(y,m,M,k);let _=!1;s==="post"?u.scheduler=y=>{zs(y,m&&m.suspense)}:s!=="sync"&&(_=!0,u.scheduler=(y,M)=>{M?y():H1(y)}),u.augmentJob=y=>{n&&(y.flags|=4),_&&(y.flags|=2,m&&(y.id=m.uid,y.i=m))};const b=RP(e,n,u);return od&&(d?d.push(b):f&&b()),b}function KM(e,n,t){const r=this.proxy,i=Co(e)?e.includes(".")?_4(r,e):()=>r[e]:e.bind(r,r);let s;Tr(n)?s=n:(s=n.handler,t=n);const o=sh(this),u=Tp(i,s.bind(r),t);return o(),u}function _4(e,n){const t=n.split(".");return()=>{let r=e;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}function YM(e,n,t=Oi){const r=bu(),i=ma(n),s=Sl(n),o=b4(e,i),u=Ew((f,d)=>{let m,_=Oi,b;return y4(()=>{const y=e[i];nl(m,y)&&(m=y,d())}),{get(){return f(),t.get?t.get(m):m},set(y){const M=t.set?t.set(y):y;if(!nl(M,m)&&!(_!==Oi&&nl(y,_)))return;const k=r.vnode.props;k&&(n in k||i in k||s in k)&&(`onUpdate:${n}`in k||`onUpdate:${i}`in k||`onUpdate:${s}`in k)||(m=y,d()),r.emit(`update:${n}`,M),nl(y,M)&&nl(y,_)&&!nl(M,b)&&d(),_=y,b=M}}});return u[Symbol.iterator]=()=>{let f=0;return{next(){return f<2?{value:f++?o||Oi:u,done:!1}:{done:!0}}}},u}const b4=(e,n)=>n==="modelValue"||n==="model-value"?e.modelModifiers:e[`${n}Modifiers`]||e[`${ma(n)}Modifiers`]||e[`${Sl(n)}Modifiers`];function JM(e,n,...t){if(e.isUnmounted)return;const r=e.vnode.props||Oi;let i=t;const s=n.startsWith("update:"),o=s&&b4(r,n.slice(7));o&&(o.trim&&(i=t.map(m=>Co(m)?m.trim():m)),o.number&&(i=t.map(Kg)));let u,f=r[u=Kd(n)]||r[u=Kd(ma(n))];!f&&s&&(f=r[u=Kd(Sl(n))]),f&&yu(f,e,6,i);const d=r[u+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,yu(d,e,6,i)}}function w4(e,n,t=!1){const r=n.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let o={},u=!1;if(!Tr(e)){const f=d=>{const m=w4(d,n,!0);m&&(u=!0,yo(o,m))};!t&&n.mixins.length&&n.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!s&&!u?(lo(e)&&r.set(e,null),null):(ir(s)?s.forEach(f=>o[f]=null):yo(o,s),lo(e)&&r.set(e,o),o)}function Um(e,n){return!e||!Mp(n)?!1:(n=n.slice(2).replace(/Once$/,""),Xi(e,n[0].toLowerCase()+n.slice(1))||Xi(e,Sl(n))||Xi(e,n))}function kg(e){const{type:n,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:u,emit:f,render:d,renderCache:m,props:_,data:b,setupState:y,ctx:M,inheritAttrs:k}=e,F=yp(e);let I,R;try{if(t.shapeFlag&4){const ee=i||r,he=ee;I=Ll(d.call(he,ee,m,_,y,b,M)),R=u}else{const ee=n;I=Ll(ee.length>1?ee(_,{attrs:u,slots:o,emit:f}):ee(_,null)),R=n.props?u:QM(u)}}catch(ee){tp.length=0,ch(ee,e,1),I=pi(Rs)}let Y=I;if(R&&k!==!1){const ee=Object.keys(R),{shapeFlag:he}=Y;ee.length&&he&7&&(s&&ee.some(N1)&&(R=eA(R,s)),Y=vc(Y,R,!1,!0))}return t.dirs&&(Y=vc(Y,null,!1,!0),Y.dirs=Y.dirs?Y.dirs.concat(t.dirs):t.dirs),t.transition&&Uc(Y,t.transition),I=Y,yp(F),I}function XM(e,n=!0){let t;for(let r=0;r<e.length;r++){const i=e[r];if(Vc(i)){if(i.type!==Rs||i.children==="v-if"){if(t)return;t=i}}else return}return t}const QM=e=>{let n;for(const t in e)(t==="class"||t==="style"||Mp(t))&&((n||(n={}))[t]=e[t]);return n},eA=(e,n)=>{const t={};for(const r in e)(!N1(r)||!(r.slice(9)in n))&&(t[r]=e[r]);return t};function tA(e,n,t){const{props:r,children:i,component:s}=e,{props:o,children:u,patchFlag:f}=n,d=s.emitsOptions;if(n.dirs||n.transition)return!0;if(t&&f>=0){if(f&1024)return!0;if(f&16)return r?Z2(r,o,d):!!o;if(f&8){const m=n.dynamicProps;for(let _=0;_<m.length;_++){const b=m[_];if(o[b]!==r[b]&&!Um(d,b))return!0}}}else return(i||u)&&(!u||!u.$stable)?!0:r===o?!1:r?o?Z2(r,o,d):!0:!!o;return!1}function Z2(e,n,t){const r=Object.keys(n);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(n[s]!==e[s]&&!Um(t,s))return!0}return!1}function Vm({vnode:e,parent:n},t){for(;n;){const r=n.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=n.vnode).el=t,n=n.parent;else break}}const rm=e=>e.__isSuspense;let Bv=0;const nA={name:"Suspense",__isSuspense:!0,process(e,n,t,r,i,s,o,u,f,d){if(e==null)iA(n,t,r,i,s,o,u,f,d);else{if(s&&s.deps>0&&!e.suspense.isInFallback){n.suspense=e.suspense,n.suspense.vnode=n,n.el=e.el;return}oA(e,n,t,r,i,o,u,f,d)}},hydrate:sA,normalize:aA},rA=nA;function xp(e,n){const t=e.props&&e.props[n];Tr(t)&&t()}function iA(e,n,t,r,i,s,o,u,f){const{p:d,o:{createElement:m}}=f,_=m("div"),b=e.suspense=x4(e,i,r,n,_,t,s,o,u,f);d(null,b.pendingBranch=e.ssContent,_,null,r,b,s,o),b.deps>0?(xp(e,"onPending"),xp(e,"onFallback"),d(null,e.ssFallback,n,t,r,null,s,o),Qh(b,e.ssFallback)):b.resolve(!1,!0)}function oA(e,n,t,r,i,s,o,u,{p:f,um:d,o:{createElement:m}}){const _=n.suspense=e.suspense;_.vnode=n,n.el=e.el;const b=n.ssContent,y=n.ssFallback,{activeBranch:M,pendingBranch:k,isInFallback:F,isHydrating:I}=_;if(k)_.pendingBranch=b,$u(b,k)?(f(k,b,_.hiddenContainer,null,i,_,s,o,u),_.deps<=0?_.resolve():F&&(I||(f(M,y,t,r,i,null,s,o,u),Qh(_,y)))):(_.pendingId=Bv++,I?(_.isHydrating=!1,_.activeBranch=k):d(k,i,_),_.deps=0,_.effects.length=0,_.hiddenContainer=m("div"),F?(f(null,b,_.hiddenContainer,null,i,_,s,o,u),_.deps<=0?_.resolve():(f(M,y,t,r,i,null,s,o,u),Qh(_,y))):M&&$u(b,M)?(f(M,b,t,r,i,_,s,o,u),_.resolve(!0)):(f(null,b,_.hiddenContainer,null,i,_,s,o,u),_.deps<=0&&_.resolve()));else if(M&&$u(b,M))f(M,b,t,r,i,_,s,o,u),Qh(_,b);else if(xp(n,"onPending"),_.pendingBranch=b,b.shapeFlag&512?_.pendingId=b.component.suspenseId:_.pendingId=Bv++,f(null,b,_.hiddenContainer,null,i,_,s,o,u),_.deps<=0)_.resolve();else{const{timeout:R,pendingId:Y}=_;R>0?setTimeout(()=>{_.pendingId===Y&&_.fallback(y)},R):R===0&&_.fallback(y)}}function x4(e,n,t,r,i,s,o,u,f,d,m=!1){const{p:_,m:b,um:y,n:M,o:{parentNode:k,remove:F}}=d;let I;const R=lA(e);R&&n&&n.pendingBranch&&(I=n.pendingId,n.deps++);const Y=e.props?Yg(e.props.timeout):void 0,ee=s,he={vnode:e,parent:n,parentComponent:t,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:Bv++,timeout:typeof Y=="number"?Y:-1,activeBranch:null,pendingBranch:null,isInFallback:!m,isHydrating:m,isUnmounted:!1,effects:[],resolve(fe=!1,ve=!1){const{vnode:$,activeBranch:U,pendingBranch:Z,pendingId:T,effects:N,parentComponent:O,container:z}=he;let q=!1;he.isHydrating?he.isHydrating=!1:fe||(q=U&&Z.transition&&Z.transition.mode==="out-in",q&&(U.transition.afterLeave=()=>{T===he.pendingId&&(b(Z,z,s===ee?M(U):s,0),mp(N))}),U&&(k(U.el)===z&&(s=M(U)),y(U,O,he,!0)),q||b(Z,z,s,0)),Qh(he,Z),he.pendingBranch=null,he.isInFallback=!1;let G=he.parent,oe=!1;for(;G;){if(G.pendingBranch){G.effects.push(...N),oe=!0;break}G=G.parent}!oe&&!q&&mp(N),he.effects=[],R&&n&&n.pendingBranch&&I===n.pendingId&&(n.deps--,n.deps===0&&!ve&&n.resolve()),xp($,"onResolve")},fallback(fe){if(!he.pendingBranch)return;const{vnode:ve,activeBranch:$,parentComponent:U,container:Z,namespace:T}=he;xp(ve,"onFallback");const N=M($),O=()=>{he.isInFallback&&(_(null,fe,Z,N,U,null,T,u,f),Qh(he,fe))},z=fe.transition&&fe.transition.mode==="out-in";z&&($.transition.afterLeave=O),he.isInFallback=!0,y($,U,null,!0),z||O()},move(fe,ve,$){he.activeBranch&&b(he.activeBranch,fe,ve,$),he.container=fe},next(){return he.activeBranch&&M(he.activeBranch)},registerDep(fe,ve,$){const U=!!he.pendingBranch;U&&he.deps++;const Z=fe.vnode.el;fe.asyncDep.catch(T=>{ch(T,fe,0)}).then(T=>{if(fe.isUnmounted||he.isUnmounted||he.pendingId!==fe.suspenseId)return;fe.asyncResolved=!0;const{vnode:N}=fe;$v(fe,T,!1),Z&&(N.el=Z);const O=!Z&&fe.subTree.el;ve(fe,N,k(Z||fe.subTree.el),Z?null:M(fe.subTree),he,o,$),O&&F(O),Vm(fe,N.el),U&&--he.deps===0&&he.resolve()})},unmount(fe,ve){he.isUnmounted=!0,he.activeBranch&&y(he.activeBranch,t,fe,ve),he.pendingBranch&&y(he.pendingBranch,t,fe,ve)}};return he}function sA(e,n,t,r,i,s,o,u,f){const d=n.suspense=x4(n,r,t,e.parentNode,document.createElement("div"),null,i,s,o,u,!0),m=f(e,d.pendingBranch=n.ssContent,t,d,s,o);return d.deps===0&&d.resolve(!1,!0),m}function aA(e){const{shapeFlag:n,children:t}=e,r=n&32;e.ssContent=K2(r?t.default:t),e.ssFallback=r?K2(t.fallback):pi(Rs)}function K2(e){let n;if(Tr(e)){const t=oh&&e._c;t&&(e._d=!1,Fe()),e=e(),t&&(e._d=!0,n=ja,S4())}return ir(e)&&(e=XM(e)),e=Ll(e),n&&!e.dynamicChildren&&(e.dynamicChildren=n.filter(t=>t!==e)),e}function L4(e,n){n&&n.pendingBranch?ir(e)?n.effects.push(...e):n.effects.push(e):mp(e)}function Qh(e,n){e.activeBranch=n;const{vnode:t,parentComponent:r}=e;let i=n.el;for(;!i&&n.component;)n=n.component.subTree,i=n.el;t.el=i,r&&r.subTree===t&&(r.vnode.el=i,Vm(r,i))}function lA(e){const n=e.props&&e.props.suspensible;return n!=null&&n!==!1}const Mn=Symbol.for("v-fgt"),wf=Symbol.for("v-txt"),Rs=Symbol.for("v-cmt"),th=Symbol.for("v-stc"),tp=[];let ja=null;function Fe(e=!1){tp.push(ja=e?null:[])}function S4(){tp.pop(),ja=tp[tp.length-1]||null}let oh=1;function Rv(e,n=!1){oh+=e,e<0&&ja&&n&&(ja.hasOnce=!0)}function E4(e){return e.dynamicChildren=oh>0?ja||Zh:null,S4(),oh>0&&ja&&ja.push(e),e}function Ve(e,n,t,r,i,s){return E4(S(e,n,t,r,i,s,!0))}function il(e,n,t,r,i){return E4(pi(e,n,t,r,i,!0))}function Vc(e){return e?e.__v_isVNode===!0:!1}function $u(e,n){return e.type===n.type&&e.key===n.key}function uA(e){}const C4=({key:e})=>e??null,Tg=({ref:e,ref_key:n,ref_for:t})=>(typeof e=="number"&&(e=""+e),e!=null?Co(e)||Xo(e)||Tr(e)?{i:Gs,r:e,k:n,f:!!t}:e:null);function S(e,n=null,t=null,r=0,i=null,s=e===Mn?0:1,o=!1,u=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&C4(n),ref:n&&Tg(n),scopeId:Fm,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Gs};return u?(ny(f,t),s&128&&e.normalize(f)):t&&(f.shapeFlag|=Co(t)?8:16),oh>0&&!o&&ja&&(f.patchFlag>0||s&6)&&f.patchFlag!==32&&ja.push(f),f}const pi=cA;function cA(e,n=null,t=null,r=0,i=null,s=!1){if((!e||e===Jw)&&(e=Rs),Vc(e)){const u=vc(e,n,!0);return t&&ny(u,t),oh>0&&!s&&ja&&(u.shapeFlag&6?ja[ja.indexOf(e)]=u:ja.push(u)),u.patchFlag=-2,u}if(vA(e)&&(e=e.__vccOpts),n){n=P4(n);let{class:u,style:f}=n;u&&!Co(u)&&(n.class=Gi(u)),lo(f)&&(Bm(f)&&!ir(f)&&(f=yo({},f)),n.style=El(f))}const o=Co(e)?1:rm(e)?128:Ow(e)?64:lo(e)?4:Tr(e)?2:0;return S(e,n,t,r,i,o,s,!0)}function P4(e){return e?Bm(e)||i4(e)?yo({},e):e:null}function vc(e,n,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:u,transition:f}=e,d=n?M4(i||{},n):i,m={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&C4(d),ref:n&&n.ref?t&&s?ir(s)?s.concat(Tg(n)):[s,Tg(n)]:Tg(n):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==Mn?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&vc(e.ssContent),ssFallback:e.ssFallback&&vc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&r&&Uc(m,f.clone(m)),m}function ii(e=" ",n=0){return pi(wf,null,e,n)}function zu(e,n){const t=pi(th,null,e);return t.staticCount=n,t}function nn(e="",n=!1){return n?(Fe(),il(Rs,null,e)):pi(Rs,null,e)}function Ll(e){return e==null||typeof e=="boolean"?pi(Rs):ir(e)?pi(Mn,null,e.slice()):Vc(e)?hf(e):pi(wf,null,String(e))}function hf(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:vc(e)}function ny(e,n){let t=0;const{shapeFlag:r}=e;if(n==null)n=null;else if(ir(n))t=16;else if(typeof n=="object")if(r&65){const i=n.default;i&&(i._c&&(i._d=!1),ny(e,i()),i._c&&(i._d=!0));return}else{t=32;const i=n._;!i&&!i4(n)?n._ctx=Gs:i===3&&Gs&&(Gs.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else Tr(n)?(n={default:n,_ctx:Gs},t=32):(n=String(n),r&64?(t=16,n=[ii(n)]):t=8);e.children=n,e.shapeFlag|=t}function M4(...e){const n={};for(let t=0;t<e.length;t++){const r=e[t];for(const i in r)if(i==="class")n.class!==r.class&&(n.class=Gi([n.class,r.class]));else if(i==="style")n.style=El([n.style,r.style]);else if(Mp(i)){const s=n[i],o=r[i];o&&s!==o&&!(ir(s)&&s.includes(o))&&(n[i]=s?[].concat(s,o):o)}else i!==""&&(n[i]=r[i])}return n}function wl(e,n,t,r=null){yu(e,n,7,[t,r])}const fA=e4();let hA=0;function A4(e,n,t){const r=e.type,i=(n?n.appContext:e.appContext)||fA,s={uid:hA++,vnode:e,type:r,parent:n,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new B1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(i.provides),ids:n?n.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:s4(r,i),emitsOptions:w4(r,i),emit:null,emitted:null,propsDefaults:Oi,inheritAttrs:r.inheritAttrs,ctx:Oi,data:Oi,props:Oi,attrs:Oi,slots:Oi,refs:Oi,setupState:Oi,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=n?n.root:s,s.emit=JM.bind(null,s),e.ce&&e.ce(s),s}let Vs=null;const bu=()=>Vs||Gs;let im,Fv;{const e=km(),n=(t,r)=>{let i;return(i=e[t])||(i=e[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};im=n("__VUE_INSTANCE_SETTERS__",t=>Vs=t),Fv=n("__VUE_SSR_SETTERS__",t=>od=t)}const sh=e=>{const n=Vs;return im(e),e.scope.on(),()=>{e.scope.off(),im(n)}},jv=()=>{Vs&&Vs.scope.off(),im(null)};function k4(e){return e.vnode.shapeFlag&4}let od=!1;function T4(e,n=!1,t=!1){n&&Fv(n);const{props:r,children:i}=e.vnode,s=k4(e);zM(e,r,s,n),HM(e,i,t);const o=s?dA(e,n):void 0;return n&&Fv(!1),o}function dA(e,n){const t=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Nv);const{setup:r}=t;if(r){Af();const i=e.setupContext=r.length>1?D4(e):null,s=sh(e),o=pd(r,e,0,[e.props,i]),u=I1(o);if(kf(),s(),(u||e.sp)&&!bf(e)&&Z1(e),u){if(o.then(jv,jv),n)return o.then(f=>{$v(e,f,n)}).catch(f=>{ch(f,e,0)});e.asyncDep=o}else $v(e,o,n)}else N4(e,n)}function $v(e,n,t){Tr(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:lo(n)&&(e.setupState=G1(n)),N4(e,t)}let om,zv;function pA(e){om=e,zv=n=>{n.render._rc&&(n.withProxy=new Proxy(n.ctx,bM))}}const gA=()=>!om;function N4(e,n,t){const r=e.type;if(!e.render){if(!n&&om&&!r.render){const i=r.template||Q1(e).template;if(i){const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:u,compilerOptions:f}=r,d=yo(yo({isCustomElement:s,delimiters:u},o),f);r.render=om(i,d)}}e.render=r.render||mu,zv&&zv(e)}{const i=sh(e);Af();try{IM(e)}finally{kf(),i()}}}const mA={get(e,n){return Ia(e,"get",""),e[n]}};function D4(e){const n=t=>{e.exposed=t||{}};return{attrs:new Proxy(e.attrs,mA),slots:e.slots,emit:e.emit,expose:n}}function Np(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(G1(Rm(e.exposed)),{get(n,t){if(t in n)return n[t];if(t in Qd)return Qd[t](e)},has(n,t){return t in n||t in Qd}})):e.proxy}function Uv(e,n=!0){return Tr(e)?e.displayName||e.name:e.name||n&&e.__name}function vA(e){return Tr(e)&&"__vccOpts"in e}const rr=(e,n)=>DP(e,n,od);function Gm(e,n,t){const r=arguments.length;return r===2?lo(n)&&!ir(n)?Vc(n)?pi(e,null,[n]):pi(e,n):pi(e,null,n):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Vc(t)&&(t=[t]),pi(e,n,t))}function yA(){}function _A(e,n,t,r){const i=t[r];if(i&&I4(i,e))return i;const s=n();return s.memo=e.slice(),s.cacheIndex=r,t[r]=s}function I4(e,n){const t=e.memo;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(nl(t[r],n[r]))return!1;return oh>0&&ja&&ja.push(e),!0}const O4="3.5.13",bA=mu,wA=UP,xA=jh,LA=Dw,SA={createComponentInstance:A4,setupComponent:T4,renderComponentRoot:kg,setCurrentRenderingInstance:yp,isVNode:Vc,normalizeVNode:Ll,getComponentPublicInstance:Np,ensureValidVNode:X1,pushWarningContext:FP,popWarningContext:jP},EA=SA,CA=null,PA=null,MA=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vv;const Y2=typeof window<"u"&&window.trustedTypes;if(Y2)try{Vv=Y2.createPolicy("vue",{createHTML:e=>e})}catch{}const B4=Vv?e=>Vv.createHTML(e):e=>e,AA="http://www.w3.org/2000/svg",kA="http://www.w3.org/1998/Math/MathML",Bc=typeof document<"u"?document:null,J2=Bc&&Bc.createElement("template"),TA={insert:(e,n,t)=>{n.insertBefore(e,t||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,t,r)=>{const i=n==="svg"?Bc.createElementNS(AA,e):n==="mathml"?Bc.createElementNS(kA,e):t?Bc.createElement(e,{is:t}):Bc.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Bc.createTextNode(e),createComment:e=>Bc.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Bc.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,t,r,i,s){const o=t?t.previousSibling:n.lastChild;if(i&&(i===s||i.nextSibling))for(;n.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{J2.innerHTML=B4(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const u=J2.content;if(r==="svg"||r==="mathml"){const f=u.firstChild;for(;f.firstChild;)u.appendChild(f.firstChild);u.removeChild(f)}n.insertBefore(u,t)}return[o?o.nextSibling:n.firstChild,t?t.previousSibling:n.lastChild]}},tf="transition",Pd="animation",sd=Symbol("_vtc"),R4={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},F4=yo({},W1,R4),NA=e=>(e.displayName="Transition",e.props=F4,e),Gv=NA((e,{slots:n})=>Gm($w,j4(e),n)),Uf=(e,n=[])=>{ir(e)?e.forEach(t=>t(...n)):e&&e(...n)},X2=e=>e?ir(e)?e.some(n=>n.length>1):e.length>1:!1;function j4(e){const n={};for(const N in e)N in R4||(n[N]=e[N]);if(e.css===!1)return n;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:u=`${t}-enter-to`,appearFromClass:f=s,appearActiveClass:d=o,appearToClass:m=u,leaveFromClass:_=`${t}-leave-from`,leaveActiveClass:b=`${t}-leave-active`,leaveToClass:y=`${t}-leave-to`}=e,M=DA(i),k=M&&M[0],F=M&&M[1],{onBeforeEnter:I,onEnter:R,onEnterCancelled:Y,onLeave:ee,onLeaveCancelled:he,onBeforeAppear:fe=I,onAppear:ve=R,onAppearCancelled:$=Y}=n,U=(N,O,z,q)=>{N._enterCancelled=q,af(N,O?m:u),af(N,O?d:o),z&&z()},Z=(N,O)=>{N._isLeaving=!1,af(N,_),af(N,y),af(N,b),O&&O()},T=N=>(O,z)=>{const q=N?ve:R,G=()=>U(O,N,z);Uf(q,[O,G]),Q2(()=>{af(O,N?f:s),ac(O,N?m:u),X2(q)||e_(O,r,k,G)})};return yo(n,{onBeforeEnter(N){Uf(I,[N]),ac(N,s),ac(N,o)},onBeforeAppear(N){Uf(fe,[N]),ac(N,f),ac(N,d)},onEnter:T(!1),onAppear:T(!0),onLeave(N,O){N._isLeaving=!0;const z=()=>Z(N,O);ac(N,_),N._enterCancelled?(ac(N,b),Hv()):(Hv(),ac(N,b)),Q2(()=>{N._isLeaving&&(af(N,_),ac(N,y),X2(ee)||e_(N,r,F,z))}),Uf(ee,[N,z])},onEnterCancelled(N){U(N,!1,void 0,!0),Uf(Y,[N])},onAppearCancelled(N){U(N,!0,void 0,!0),Uf($,[N])},onLeaveCancelled(N){Z(N),Uf(he,[N])}})}function DA(e){if(e==null)return null;if(lo(e))return[G0(e.enter),G0(e.leave)];{const n=G0(e);return[n,n]}}function G0(e){return Yg(e)}function ac(e,n){n.split(/\s+/).forEach(t=>t&&e.classList.add(t)),(e[sd]||(e[sd]=new Set)).add(n)}function af(e,n){n.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const t=e[sd];t&&(t.delete(n),t.size||(e[sd]=void 0))}function Q2(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let IA=0;function e_(e,n,t,r){const i=e._endId=++IA,s=()=>{i===e._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:o,timeout:u,propCount:f}=$4(e,n);if(!o)return r();const d=o+"end";let m=0;const _=()=>{e.removeEventListener(d,b),s()},b=y=>{y.target===e&&++m>=f&&_()};setTimeout(()=>{m<f&&_()},u+1),e.addEventListener(d,b)}function $4(e,n){const t=window.getComputedStyle(e),r=M=>(t[M]||"").split(", "),i=r(`${tf}Delay`),s=r(`${tf}Duration`),o=t_(i,s),u=r(`${Pd}Delay`),f=r(`${Pd}Duration`),d=t_(u,f);let m=null,_=0,b=0;n===tf?o>0&&(m=tf,_=o,b=s.length):n===Pd?d>0&&(m=Pd,_=d,b=f.length):(_=Math.max(o,d),m=_>0?o>d?tf:Pd:null,b=m?m===tf?s.length:f.length:0);const y=m===tf&&/\b(transform|all)(,|$)/.test(r(`${tf}Property`).toString());return{type:m,timeout:_,propCount:b,hasTransform:y}}function t_(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((t,r)=>n_(t)+n_(e[r])))}function n_(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Hv(){return document.body.offsetHeight}function OA(e,n,t){const r=e[sd];r&&(n=(n?[n,...r]:[...r]).join(" ")),n==null?e.removeAttribute("class"):t?e.setAttribute("class",n):e.className=n}const sm=Symbol("_vod"),z4=Symbol("_vsh"),Hm={beforeMount(e,{value:n},{transition:t}){e[sm]=e.style.display==="none"?"":e.style.display,t&&n?t.beforeEnter(e):Md(e,n)},mounted(e,{value:n},{transition:t}){t&&n&&t.enter(e)},updated(e,{value:n,oldValue:t},{transition:r}){!n!=!t&&(r?n?(r.beforeEnter(e),Md(e,!0),r.enter(e)):r.leave(e,()=>{Md(e,!1)}):Md(e,n))},beforeUnmount(e,{value:n}){Md(e,n)}};function Md(e,n){e.style.display=n?e[sm]:"none",e[z4]=!n}function BA(){Hm.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const U4=Symbol("");function RA(e){const n=bu();if(!n)return;const t=n.ut=(i=e(n.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${n.uid}"]`)).forEach(s=>am(s,i))},r=()=>{const i=e(n.proxy);n.ce?am(n.ce,i):qv(n.subTree,i),t(i)};K1(()=>{mp(r)}),ps(()=>{oo(r,mu,{flush:"post"});const i=new MutationObserver(r);i.observe(n.subTree.el.parentNode,{childList:!0}),Hu(()=>i.disconnect())})}function qv(e,n){if(e.shapeFlag&128){const t=e.suspense;e=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{qv(t.activeBranch,n)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)am(e.el,n);else if(e.type===Mn)e.children.forEach(t=>qv(t,n));else if(e.type===th){let{el:t,anchor:r}=e;for(;t&&(am(t,n),t!==r);)t=t.nextSibling}}function am(e,n){if(e.nodeType===1){const t=e.style;let r="";for(const i in n)t.setProperty(`--${i}`,n[i]),r+=`--${i}: ${n[i]};`;t[U4]=r}}const FA=/(^|;)\s*display\s*:/;function jA(e,n,t){const r=e.style,i=Co(t);let s=!1;if(t&&!i){if(n)if(Co(n))for(const o of n.split(";")){const u=o.slice(0,o.indexOf(":")).trim();t[u]==null&&Ng(r,u,"")}else for(const o in n)t[o]==null&&Ng(r,o,"");for(const o in t)o==="display"&&(s=!0),Ng(r,o,t[o])}else if(i){if(n!==t){const o=r[U4];o&&(t+=";"+o),r.cssText=t,s=FA.test(t)}}else n&&e.removeAttribute("style");sm in e&&(e[sm]=s?r.display:"",e[z4]&&(r.display="none"))}const r_=/\s*!important$/;function Ng(e,n,t){if(ir(t))t.forEach(r=>Ng(e,n,r));else if(t==null&&(t=""),n.startsWith("--"))e.setProperty(n,t);else{const r=$A(e,n);r_.test(t)?e.setProperty(Sl(r),t.replace(r_,""),"important"):e[r]=t}}const i_=["Webkit","Moz","ms"],H0={};function $A(e,n){const t=H0[n];if(t)return t;let r=ma(n);if(r!=="filter"&&r in e)return H0[n]=r;r=Ap(r);for(let i=0;i<i_.length;i++){const s=i_[i]+r;if(s in e)return H0[n]=s}return n}const o_="http://www.w3.org/1999/xlink";function s_(e,n,t,r,i,s=eP(n)){r&&n.startsWith("xlink:")?t==null?e.removeAttributeNS(o_,n.slice(6,n.length)):e.setAttributeNS(o_,n,t):t==null||s&&!ow(t)?e.removeAttribute(n):e.setAttribute(n,s?"":Gu(t)?String(t):t)}function a_(e,n,t,r,i){if(n==="innerHTML"||n==="textContent"){t!=null&&(e[n]=n==="innerHTML"?B4(t):t);return}const s=e.tagName;if(n==="value"&&s!=="PROGRESS"&&!s.includes("-")){const u=s==="OPTION"?e.getAttribute("value")||"":e.value,f=t==null?e.type==="checkbox"?"on":"":String(t);(u!==f||!("_value"in e))&&(e.value=f),t==null&&e.removeAttribute(n),e._value=t;return}let o=!1;if(t===""||t==null){const u=typeof e[n];u==="boolean"?t=ow(t):t==null&&u==="string"?(t="",o=!0):u==="number"&&(t=0,o=!0)}try{e[n]=t}catch{}o&&e.removeAttribute(i||n)}function jc(e,n,t,r){e.addEventListener(n,t,r)}function zA(e,n,t,r){e.removeEventListener(n,t,r)}const l_=Symbol("_vei");function UA(e,n,t,r,i=null){const s=e[l_]||(e[l_]={}),o=s[n];if(r&&o)o.value=r;else{const[u,f]=VA(n);if(r){const d=s[n]=qA(r,i);jc(e,u,d,f)}else o&&(zA(e,u,o,f),s[n]=void 0)}}const u_=/(?:Once|Passive|Capture)$/;function VA(e){let n;if(u_.test(e)){n={};let r;for(;r=e.match(u_);)e=e.slice(0,e.length-r[0].length),n[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Sl(e.slice(2)),n]}let q0=0;const GA=Promise.resolve(),HA=()=>q0||(GA.then(()=>q0=0),q0=Date.now());function qA(e,n){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;yu(WA(r,t.value),n,5,[r])};return t.value=e,t.attached=HA(),t}function WA(e,n){if(ir(n)){const t=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{t.call(e),e._stopped=!0},n.map(r=>i=>!i._stopped&&r&&r(i))}else return n}const c_=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ZA=(e,n,t,r,i,s)=>{const o=i==="svg";n==="class"?OA(e,r,o):n==="style"?jA(e,t,r):Mp(n)?N1(n)||UA(e,n,t,r,s):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):KA(e,n,r,o))?(a_(e,n,r),!e.tagName.includes("-")&&(n==="value"||n==="checked"||n==="selected")&&s_(e,n,r,o,s,n!=="value")):e._isVueCE&&(/[A-Z]/.test(n)||!Co(r))?a_(e,ma(n),r,s,n):(n==="true-value"?e._trueValue=r:n==="false-value"&&(e._falseValue=r),s_(e,n,r,o))};function KA(e,n,t,r){if(r)return!!(n==="innerHTML"||n==="textContent"||n in e&&c_(n)&&Tr(t));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return c_(n)&&Co(t)?!1:n in e}const f_={};/*! #__NO_SIDE_EFFECTS__ */function V4(e,n,t){const r=Qo(e,n);Mm(r)&&yo(r,n);class i extends qm{constructor(o){super(r,o,t)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const YA=(e,n)=>V4(e,n,Q4),JA=typeof HTMLElement<"u"?HTMLElement:class{};class qm extends JA{constructor(n,t={},r=um){super(),this._def=n,this._props=t,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==um?this._root=this.shadowRoot:n.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof qm){this._parent=n;break}this._instance||(this._resolved?(this._setParent(),this._update()):n&&n._pendingResolve?this._pendingResolve=n._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(n=this._parent){n&&(this._instance.parent=n._instance,this._instance.provides=n._instance.provides)}disconnectedCallback(){this._connected=!1,Us(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const n=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let u;if(s&&!ir(s))for(const f in s){const d=s[f];(d===Number||d&&d.type===Number)&&(f in this._props&&(this._props[f]=Yg(this._props[f])),(u||(u=Object.create(null)))[ma(f)]=!0)}this._numberProps=u,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(r=>n(this._def=r,!0)):n(this._def)}_mount(n){this._app=this._createApp(n),n.configureApp&&n.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const r in t)Xi(this,r)||Object.defineProperty(this,r,{get:()=>Kn(t[r])})}_resolveProps(n){const{props:t}=n,r=ir(t)?t:Object.keys(t||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(ma))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(n){if(n.startsWith("data-v-"))return;const t=this.hasAttribute(n);let r=t?this.getAttribute(n):f_;const i=ma(n);t&&this._numberProps&&this._numberProps[i]&&(r=Yg(r)),this._setProp(i,r,!1,!0)}_getProp(n){return this._props[n]}_setProp(n,t,r=!0,i=!1){if(t!==this._props[n]&&(t===f_?delete this._props[n]:(this._props[n]=t,n==="key"&&this._app&&(this._app._ceVNode.key=t)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),t===!0?this.setAttribute(Sl(n),""):typeof t=="string"||typeof t=="number"?this.setAttribute(Sl(n),t+""):t||this.removeAttribute(Sl(n)),s&&s.observe(this,{attributes:!0})}}_update(){X4(this._createVNode(),this._root)}_createVNode(){const n={};this.shadowRoot||(n.onVnodeMounted=n.onVnodeUpdated=this._renderSlots.bind(this));const t=pi(this._def,yo(n,this._props));return this._instance||(t.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,Mm(o[0])?yo({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Sl(s)!==s&&i(Sl(s),o)},this._setParent()}),t}_applyStyles(n,t){if(!n)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const r=this._nonce;for(let i=n.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=n[i],this.shadowRoot.prepend(s)}}_parseSlots(){const n=this._slots={};let t;for(;t=this.firstChild;){const r=t.nodeType===1&&t.getAttribute("slot")||"default";(n[r]||(n[r]=[])).push(t),this.removeChild(t)}}_renderSlots(){const n=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let r=0;r<n.length;r++){const i=n[r],s=i.getAttribute("name")||"default",o=this._slots[s],u=i.parentNode;if(o)for(const f of o){if(t&&f.nodeType===1){const d=t+"-s",m=document.createTreeWalker(f,1);f.setAttribute(d,"");let _;for(;_=m.nextNode();)_.setAttribute(d,"")}u.insertBefore(f,i)}else for(;i.firstChild;)u.insertBefore(i.firstChild,i);u.removeChild(i)}}_injectChildStyle(n){this._applyStyles(n.styles,n)}_removeChildStyle(n){}}function G4(e){const n=bu(),t=n&&n.ce;return t||null}function XA(){const e=G4();return e&&e.shadowRoot}function QA(e="$style"){{const n=bu();if(!n)return Oi;const t=n.type.__cssModules;if(!t)return Oi;const r=t[e];return r||Oi}}const H4=new WeakMap,q4=new WeakMap,lm=Symbol("_moveCb"),h_=Symbol("_enterCb"),e6=e=>(delete e.props.mode,e),t6=e6({name:"TransitionGroup",props:yo({},F4,{tag:String,moveClass:String}),setup(e,{slots:n}){const t=bu(),r=q1();let i,s;return zm(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!s6(i[0].el,t.vnode.el,o))return;i.forEach(r6),i.forEach(i6);const u=i.filter(o6);Hv(),u.forEach(f=>{const d=f.el,m=d.style;ac(d,o),m.transform=m.webkitTransform=m.transitionDuration="";const _=d[lm]=b=>{b&&b.target!==d||(!b||/transform$/.test(b.propertyName))&&(d.removeEventListener("transitionend",_),d[lm]=null,af(d,o))};d.addEventListener("transitionend",_)})}),()=>{const o=Ii(e),u=j4(o);let f=o.tag||Mn;if(i=[],s)for(let d=0;d<s.length;d++){const m=s[d];m.el&&m.el instanceof Element&&(i.push(m),Uc(m,id(m,u,r,t)),H4.set(m,m.el.getBoundingClientRect()))}s=n.default?jm(n.default()):[];for(let d=0;d<s.length;d++){const m=s[d];m.key!=null&&Uc(m,id(m,u,r,t))}return pi(f,null,s)}}}),n6=t6;function r6(e){const n=e.el;n[lm]&&n[lm](),n[h_]&&n[h_]()}function i6(e){q4.set(e,e.el.getBoundingClientRect())}function o6(e){const n=H4.get(e),t=q4.get(e),r=n.left-t.left,i=n.top-t.top;if(r||i){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",e}}function s6(e,n,t){const r=e.cloneNode(),i=e[sd];i&&i.forEach(u=>{u.split(/\s+/).forEach(f=>f&&r.classList.remove(f))}),t.split(/\s+/).forEach(u=>u&&r.classList.add(u)),r.style.display="none";const s=n.nodeType===1?n:n.parentNode;s.appendChild(r);const{hasTransform:o}=$4(r);return s.removeChild(r),o}const Ef=e=>{const n=e.props["onUpdate:modelValue"]||!1;return ir(n)?t=>Jh(n,t):n};function a6(e){e.target.composing=!0}function d_(e){const n=e.target;n.composing&&(n.composing=!1,n.dispatchEvent(new Event("input")))}const vu=Symbol("_assign"),Zr={created(e,{modifiers:{lazy:n,trim:t,number:r}},i){e[vu]=Ef(i);const s=r||i.props&&i.props.type==="number";jc(e,n?"change":"input",o=>{if(o.target.composing)return;let u=e.value;t&&(u=u.trim()),s&&(u=Kg(u)),e[vu](u)}),t&&jc(e,"change",()=>{e.value=e.value.trim()}),n||(jc(e,"compositionstart",a6),jc(e,"compositionend",d_),jc(e,"change",d_))},mounted(e,{value:n}){e.value=n??""},beforeUpdate(e,{value:n,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},o){if(e[vu]=Ef(o),e.composing)return;const u=(s||e.type==="number")&&!/^0\d/.test(e.value)?Kg(e.value):e.value,f=n??"";u!==f&&(document.activeElement===e&&e.type!=="range"&&(r&&n===t||i&&e.value.trim()===f)||(e.value=f))}},xl={deep:!0,created(e,n,t){e[vu]=Ef(t),jc(e,"change",()=>{const r=e._modelValue,i=ad(e),s=e.checked,o=e[vu];if(ir(r)){const u=Tm(r,i),f=u!==-1;if(s&&!f)o(r.concat(i));else if(!s&&f){const d=[...r];d.splice(u,1),o(d)}}else if(uh(r)){const u=new Set(r);s?u.add(i):u.delete(i),o(u)}else o(W4(e,s))})},mounted:p_,beforeUpdate(e,n,t){e[vu]=Ef(t),p_(e,n,t)}};function p_(e,{value:n,oldValue:t},r){e._modelValue=n;let i;if(ir(n))i=Tm(n,r.props.value)>-1;else if(uh(n))i=n.has(r.props.value);else{if(n===t)return;i=Lf(n,W4(e,!0))}e.checked!==i&&(e.checked=i)}const ry={created(e,{value:n},t){e.checked=Lf(n,t.props.value),e[vu]=Ef(t),jc(e,"change",()=>{e[vu](ad(e))})},beforeUpdate(e,{value:n,oldValue:t},r){e[vu]=Ef(r),n!==t&&(e.checked=Lf(n,r.props.value))}},so={deep:!0,created(e,{value:n,modifiers:{number:t}},r){const i=uh(n);jc(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>t?Kg(ad(o)):ad(o));e[vu](e.multiple?i?new Set(s):s:s[0]),e._assigning=!0,Us(()=>{e._assigning=!1})}),e[vu]=Ef(r)},mounted(e,{value:n}){g_(e,n)},beforeUpdate(e,n,t){e[vu]=Ef(t)},updated(e,{value:n}){e._assigning||g_(e,n)}};function g_(e,n){const t=e.multiple,r=ir(n);if(!(t&&!r&&!uh(n))){for(let i=0,s=e.options.length;i<s;i++){const o=e.options[i],u=ad(o);if(t)if(r){const f=typeof u;f==="string"||f==="number"?o.selected=n.some(d=>String(d)===String(u)):o.selected=Tm(n,u)>-1}else o.selected=n.has(u);else if(Lf(ad(o),n)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!t&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ad(e){return"_value"in e?e._value:e.value}function W4(e,n){const t=n?"_trueValue":"_falseValue";return t in e?e[t]:n}const iy={created(e,n,t){gg(e,n,t,null,"created")},mounted(e,n,t){gg(e,n,t,null,"mounted")},beforeUpdate(e,n,t,r){gg(e,n,t,r,"beforeUpdate")},updated(e,n,t,r){gg(e,n,t,r,"updated")}};function Z4(e,n){switch(e){case"SELECT":return so;case"TEXTAREA":return Zr;default:switch(n){case"checkbox":return xl;case"radio":return ry;default:return Zr}}}function gg(e,n,t,r,i){const o=Z4(e.tagName,t.props&&t.props.type)[i];o&&o(e,n,t,r)}function l6(){Zr.getSSRProps=({value:e})=>({value:e}),ry.getSSRProps=({value:e},n)=>{if(n.props&&Lf(n.props.value,e))return{checked:!0}},xl.getSSRProps=({value:e},n)=>{if(ir(e)){if(n.props&&Tm(e,n.props.value)>-1)return{checked:!0}}else if(uh(e)){if(n.props&&e.has(n.props.value))return{checked:!0}}else if(e)return{checked:!0}},iy.getSSRProps=(e,n)=>{if(typeof n.type!="string")return;const t=Z4(n.type.toUpperCase(),n.props&&n.props.type);if(t.getSSRProps)return t.getSSRProps(e,n)}}const u6=["ctrl","shift","alt","meta"],c6={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>u6.some(t=>e[`${t}Key`]&&!n.includes(t))},Gc=(e,n)=>{const t=e._withMods||(e._withMods={}),r=n.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<n.length;o++){const u=c6[n[o]];if(u&&u(i,n))return}return e(i,...s)})},f6={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},h6=(e,n)=>{const t=e._withKeys||(e._withKeys={}),r=n.join(".");return t[r]||(t[r]=i=>{if(!("key"in i))return;const s=Sl(i.key);if(n.some(o=>o===s||f6[o]===s))return e(i)})},K4=yo({patchProp:ZA},TA);let np,m_=!1;function Y4(){return np||(np=f4(K4))}function J4(){return np=m_?np:h4(K4),m_=!0,np}const X4=(...e)=>{Y4().render(...e)},d6=(...e)=>{J4().hydrate(...e)},um=(...e)=>{const n=Y4().createApp(...e),{mount:t}=n;return n.mount=r=>{const i=t5(r);if(!i)return;const s=n._component;!Tr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,e5(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},n},Q4=(...e)=>{const n=J4().createApp(...e),{mount:t}=n;return n.mount=r=>{const i=t5(r);if(i)return t(i,!0,e5(i))},n};function e5(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function t5(e){return Co(e)?document.querySelector(e):e}let v_=!1;const p6=()=>{v_||(v_=!0,l6(),BA())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const g6=()=>{},m6=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:$w,BaseTransitionPropsValidators:W1,Comment:Rs,DeprecationTypes:MA,EffectScope:B1,ErrorCodes:zP,ErrorTypeStrings:wA,Fragment:Mn,KeepAlive:hM,ReactiveEffect:dp,Static:th,Suspense:rA,Teleport:kv,Text:wf,TrackOpTypes:IP,Transition:Gv,TransitionGroup:n6,TriggerOpTypes:OP,VueElement:qm,assertNumber:$P,callWithAsyncErrorHandling:yu,callWithErrorHandling:pd,camelize:ma,capitalize:Ap,cloneVNode:vc,compatUtils:PA,compile:g6,computed:rr,createApp:um,createBlock:il,createCommentVNode:nn,createElementBlock:Ve,createElementVNode:S,createHydrationRenderer:h4,createPropsRestProxy:NM,createRenderer:f4,createSSRApp:Q4,createSlots:vM,createStaticVNode:zu,createTextVNode:ii,createVNode:pi,customRef:Ew,defineAsyncComponent:cM,defineComponent:Qo,defineCustomElement:V4,defineEmits:xM,defineExpose:LM,defineModel:CM,defineOptions:SM,defineProps:wM,defineSSRCustomElement:YA,defineSlots:EM,devtools:xA,effect:rP,effectScope:R1,getCurrentInstance:bu,getCurrentScope:F1,getCurrentWatcher:BP,getTransitionRawChildren:jm,guardReactiveProps:P4,h:Gm,handleError:ch,hasInjectionContext:t4,hydrate:d6,hydrateOnIdle:iM,hydrateOnInteraction:lM,hydrateOnMediaQuery:aM,hydrateOnVisible:sM,initCustomFormatter:yA,initDirectivesForSSR:p6,inject:Zl,isMemoSame:I4,isProxy:Bm,isReactive:pc,isReadonly:Sf,isRef:Xo,isRuntimeOnly:gA,isShallow:Wl,isVNode:Vc,markRaw:Rm,mergeDefaults:kM,mergeModels:TM,mergeProps:M4,nextTick:Us,normalizeClass:Gi,normalizeProps:XC,normalizeStyle:El,onActivated:Uw,onBeforeMount:Hw,onBeforeUnmount:fh,onBeforeUpdate:K1,onDeactivated:Vw,onErrorCaptured:Kw,onMounted:ps,onRenderTracked:Zw,onRenderTriggered:Ww,onScopeDispose:lw,onServerPrefetch:qw,onUnmounted:Hu,onUpdated:zm,onWatcherCleanup:Mw,openBlock:Fe,popScopeId:qP,provide:ep,proxyRefs:G1,pushScopeId:HP,queuePostFlushCb:mp,reactive:Jl,readonly:Ru,ref:Ft,registerRuntimeCompiler:pA,render:X4,renderList:br,renderSlot:yM,resolveComponent:Yw,resolveDirective:mM,resolveDynamicComponent:gM,resolveFilter:CA,resolveTransitionHooks:id,setBlockTracking:Rv,setDevtoolsHook:LA,setTransitionHooks:Uc,shallowReactive:U1,shallowReadonly:LP,shallowRef:V1,ssrContextKey:m4,ssrUtils:EA,stop:iP,toDisplayString:It,toHandlerKey:Kd,toHandlers:_M,toRaw:Ii,toRef:TP,toRefs:Cw,toValue:CP,transformVNodeArgs:uA,triggerRef:EP,unref:Kn,useAttrs:AM,useCssModule:QA,useCssVars:RA,useHost:G4,useId:YP,useModel:YM,useSSRContext:v4,useShadowRoot:XA,useSlots:MM,useTemplateRef:JP,useTransitionState:q1,vModelCheckbox:xl,vModelDynamic:iy,vModelRadio:ry,vModelSelect:so,vModelText:Zr,vShow:Hm,version:O4,warn:bA,watch:oo,watchEffect:wp,watchPostEffect:ZM,watchSyncEffect:y4,withAsyncContext:DM,withCtx:gu,withDefaults:PM,withDirectives:Nn,withKeys:h6,withMemo:_A,withModifiers:Gc,withScopeId:WP},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let n5;const Wm=e=>n5=e,r5=Symbol();function Wv(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var rp;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(rp||(rp={}));function v6(){const e=R1(!0),n=e.run(()=>Ft({}));let t=[],r=[];const i=Rm({install(s){Wm(i),i._a=s,s.provide(r5,i),s.config.globalProperties.$pinia=i,r.forEach(o=>t.push(o)),r=[]},use(s){return this._a?t.push(s):r.push(s),this},_p:t,_a:null,_e:e,_s:new Map,state:n});return i}const i5=()=>{};function y_(e,n,t,r=i5){e.push(n);const i=()=>{const s=e.indexOf(n);s>-1&&(e.splice(s,1),r())};return!t&&F1()&&lw(i),i}function Nh(e,...n){e.slice().forEach(t=>{t(...n)})}const y6=e=>e(),__=Symbol(),W0=Symbol();function Zv(e,n){e instanceof Map&&n instanceof Map?n.forEach((t,r)=>e.set(r,t)):e instanceof Set&&n instanceof Set&&n.forEach(e.add,e);for(const t in n){if(!n.hasOwnProperty(t))continue;const r=n[t],i=e[t];Wv(i)&&Wv(r)&&e.hasOwnProperty(t)&&!Xo(r)&&!pc(r)?e[t]=Zv(i,r):e[t]=r}return e}const _6=Symbol();function b6(e){return!Wv(e)||!e.hasOwnProperty(_6)}const{assign:lf}=Object;function w6(e){return!!(Xo(e)&&e.effect)}function x6(e,n,t,r){const{state:i,actions:s,getters:o}=n,u=t.state.value[e];let f;function d(){u||(t.state.value[e]=i?i():{});const m=Cw(t.state.value[e]);return lf(m,s,Object.keys(o||{}).reduce((_,b)=>(_[b]=Rm(rr(()=>{Wm(t);const y=t._s.get(e);return o[b].call(y,y)})),_),{}))}return f=o5(e,d,n,t,r,!0),f}function o5(e,n,t={},r,i,s){let o;const u=lf({actions:{}},t),f={deep:!0};let d,m,_=[],b=[],y;const M=r.state.value[e];!s&&!M&&(r.state.value[e]={}),Ft({});let k;function F($){let U;d=m=!1,typeof $=="function"?($(r.state.value[e]),U={type:rp.patchFunction,storeId:e,events:y}):(Zv(r.state.value[e],$),U={type:rp.patchObject,payload:$,storeId:e,events:y});const Z=k=Symbol();Us().then(()=>{k===Z&&(d=!0)}),m=!0,Nh(_,U,r.state.value[e])}const I=s?function(){const{state:U}=t,Z=U?U():{};this.$patch(T=>{lf(T,Z)})}:i5;function R(){o.stop(),_=[],b=[],r._s.delete(e)}const Y=($,U="")=>{if(__ in $)return $[W0]=U,$;const Z=function(){Wm(r);const T=Array.from(arguments),N=[],O=[];function z(oe){N.push(oe)}function q(oe){O.push(oe)}Nh(b,{args:T,name:Z[W0],store:he,after:z,onError:q});let G;try{G=$.apply(this&&this.$id===e?this:he,T)}catch(oe){throw Nh(O,oe),oe}return G instanceof Promise?G.then(oe=>(Nh(N,oe),oe)).catch(oe=>(Nh(O,oe),Promise.reject(oe))):(Nh(N,G),G)};return Z[__]=!0,Z[W0]=U,Z},ee={_p:r,$id:e,$onAction:y_.bind(null,b),$patch:F,$reset:I,$subscribe($,U={}){const Z=y_(_,$,U.detached,()=>T()),T=o.run(()=>oo(()=>r.state.value[e],N=>{(U.flush==="sync"?m:d)&&$({storeId:e,type:rp.direct,events:y},N)},lf({},f,U)));return Z},$dispose:R},he=Jl(ee);r._s.set(e,he);const ve=(r._a&&r._a.runWithContext||y6)(()=>r._e.run(()=>(o=R1()).run(()=>n({action:Y}))));for(const $ in ve){const U=ve[$];if(Xo(U)&&!w6(U)||pc(U))s||(M&&b6(U)&&(Xo(U)?U.value=M[$]:Zv(U,M[$])),r.state.value[e][$]=U);else if(typeof U=="function"){const Z=Y(U,$);ve[$]=Z,u.actions[$]=U}}return lf(he,ve),lf(Ii(he),ve),Object.defineProperty(he,"$state",{get:()=>r.state.value[e],set:$=>{F(U=>{lf(U,$)})}}),r._p.forEach($=>{lf(he,o.run(()=>$({store:he,app:r._a,pinia:r,options:u})))}),M&&s&&t.hydrate&&t.hydrate(he.$state,M),d=!0,m=!0,he}/*! #__NO_SIDE_EFFECTS__ */function Dp(e,n,t){let r,i;const s=typeof n=="function";typeof e=="string"?(r=e,i=s?t:n):(i=e,r=e.id);function o(u,f){const d=t4();return u=u||(d?Zl(r5,null):null),u&&Wm(u),u=n5,u._s.has(r)||(s?o5(r,n,i,u):x6(r,i,u)),u._s.get(r)}return o.$id=r,o}function s5(e,n){return function(){return e.apply(n,arguments)}}const{toString:L6}=Object.prototype,{getPrototypeOf:oy}=Object,Zm=(e=>n=>{const t=L6.call(n);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Zu=e=>(e=e.toLowerCase(),n=>Zm(n)===e),Km=e=>n=>typeof n===e,{isArray:gd}=Array,Lp=Km("undefined");function S6(e){return e!==null&&!Lp(e)&&e.constructor!==null&&!Lp(e.constructor)&&Kl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const a5=Zu("ArrayBuffer");function E6(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&a5(e.buffer),n}const C6=Km("string"),Kl=Km("function"),l5=Km("number"),Ym=e=>e!==null&&typeof e=="object",P6=e=>e===!0||e===!1,Dg=e=>{if(Zm(e)!=="object")return!1;const n=oy(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},M6=Zu("Date"),A6=Zu("File"),k6=Zu("Blob"),T6=Zu("FileList"),N6=e=>Ym(e)&&Kl(e.pipe),D6=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||Kl(e.append)&&((n=Zm(e))==="formdata"||n==="object"&&Kl(e.toString)&&e.toString()==="[object FormData]"))},I6=Zu("URLSearchParams"),[O6,B6,R6,F6]=["ReadableStream","Request","Response","Headers"].map(Zu),j6=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ip(e,n,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),gd(e))for(r=0,i=e.length;r<i;r++)n.call(null,e[r],r,e);else{const s=t?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let u;for(r=0;r<o;r++)u=s[r],n.call(null,e[u],u,e)}}function u5(e,n){n=n.toLowerCase();const t=Object.keys(e);let r=t.length,i;for(;r-- >0;)if(i=t[r],n===i.toLowerCase())return i;return null}const Jf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,c5=e=>!Lp(e)&&e!==Jf;function Kv(){const{caseless:e}=c5(this)&&this||{},n={},t=(r,i)=>{const s=e&&u5(n,i)||i;Dg(n[s])&&Dg(r)?n[s]=Kv(n[s],r):Dg(r)?n[s]=Kv({},r):gd(r)?n[s]=r.slice():n[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ip(arguments[r],t);return n}const $6=(e,n,t,{allOwnKeys:r}={})=>(Ip(n,(i,s)=>{t&&Kl(i)?e[s]=s5(i,t):e[s]=i},{allOwnKeys:r}),e),z6=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),U6=(e,n,t,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),t&&Object.assign(e.prototype,t)},V6=(e,n,t,r)=>{let i,s,o;const u={};if(n=n||{},e==null)return n;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],(!r||r(o,e,n))&&!u[o]&&(n[o]=e[o],u[o]=!0);e=t!==!1&&oy(e)}while(e&&(!t||t(e,n))&&e!==Object.prototype);return n},G6=(e,n,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=n.length;const r=e.indexOf(n,t);return r!==-1&&r===t},H6=e=>{if(!e)return null;if(gd(e))return e;let n=e.length;if(!l5(n))return null;const t=new Array(n);for(;n-- >0;)t[n]=e[n];return t},q6=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&oy(Uint8Array)),W6=(e,n)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const s=i.value;n.call(e,s[0],s[1])}},Z6=(e,n)=>{let t;const r=[];for(;(t=e.exec(n))!==null;)r.push(t);return r},K6=Zu("HTMLFormElement"),Y6=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),b_=(({hasOwnProperty:e})=>(n,t)=>e.call(n,t))(Object.prototype),J6=Zu("RegExp"),f5=(e,n)=>{const t=Object.getOwnPropertyDescriptors(e),r={};Ip(t,(i,s)=>{let o;(o=n(i,s,e))!==!1&&(r[s]=o||i)}),Object.defineProperties(e,r)},X6=e=>{f5(e,(n,t)=>{if(Kl(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=e[t];if(Kl(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Q6=(e,n)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return gd(e)?r(e):r(String(e).split(n)),t},ek=()=>{},tk=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function nk(e){return!!(e&&Kl(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const rk=e=>{const n=new Array(10),t=(r,i)=>{if(Ym(r)){if(n.indexOf(r)>=0)return;if(!("toJSON"in r)){n[i]=r;const s=gd(r)?[]:{};return Ip(r,(o,u)=>{const f=t(o,i+1);!Lp(f)&&(s[u]=f)}),n[i]=void 0,s}}return r};return t(e,0)},ik=Zu("AsyncFunction"),ok=e=>e&&(Ym(e)||Kl(e))&&Kl(e.then)&&Kl(e.catch),h5=((e,n)=>e?setImmediate:n?((t,r)=>(Jf.addEventListener("message",({source:i,data:s})=>{i===Jf&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Jf.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Kl(Jf.postMessage)),sk=typeof queueMicrotask<"u"?queueMicrotask.bind(Jf):typeof process<"u"&&process.nextTick||h5,Yt={isArray:gd,isArrayBuffer:a5,isBuffer:S6,isFormData:D6,isArrayBufferView:E6,isString:C6,isNumber:l5,isBoolean:P6,isObject:Ym,isPlainObject:Dg,isReadableStream:O6,isRequest:B6,isResponse:R6,isHeaders:F6,isUndefined:Lp,isDate:M6,isFile:A6,isBlob:k6,isRegExp:J6,isFunction:Kl,isStream:N6,isURLSearchParams:I6,isTypedArray:q6,isFileList:T6,forEach:Ip,merge:Kv,extend:$6,trim:j6,stripBOM:z6,inherits:U6,toFlatObject:V6,kindOf:Zm,kindOfTest:Zu,endsWith:G6,toArray:H6,forEachEntry:W6,matchAll:Z6,isHTMLForm:K6,hasOwnProperty:b_,hasOwnProp:b_,reduceDescriptors:f5,freezeMethods:X6,toObjectSet:Q6,toCamelCase:Y6,noop:ek,toFiniteNumber:tk,findKey:u5,global:Jf,isContextDefined:c5,isSpecCompliantForm:nk,toJSONObject:rk,isAsyncFn:ik,isThenable:ok,setImmediate:h5,asap:sk};function ri(e,n,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Yt.inherits(ri,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Yt.toJSONObject(this.config),code:this.code,status:this.status}}});const d5=ri.prototype,p5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{p5[e]={value:e}});Object.defineProperties(ri,p5);Object.defineProperty(d5,"isAxiosError",{value:!0});ri.from=(e,n,t,r,i,s)=>{const o=Object.create(d5);return Yt.toFlatObject(e,o,function(f){return f!==Error.prototype},u=>u!=="isAxiosError"),ri.call(o,e.message,n,t,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const ak=null;function Yv(e){return Yt.isPlainObject(e)||Yt.isArray(e)}function g5(e){return Yt.endsWith(e,"[]")?e.slice(0,-2):e}function w_(e,n,t){return e?e.concat(n).map(function(i,s){return i=g5(i),!t&&s?"["+i+"]":i}).join(t?".":""):n}function lk(e){return Yt.isArray(e)&&!e.some(Yv)}const uk=Yt.toFlatObject(Yt,{},null,function(n){return/^is[A-Z]/.test(n)});function Jm(e,n,t){if(!Yt.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,t=Yt.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,F){return!Yt.isUndefined(F[k])});const r=t.metaTokens,i=t.visitor||m,s=t.dots,o=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&Yt.isSpecCompliantForm(n);if(!Yt.isFunction(i))throw new TypeError("visitor must be a function");function d(M){if(M===null)return"";if(Yt.isDate(M))return M.toISOString();if(!f&&Yt.isBlob(M))throw new ri("Blob is not supported. Use a Buffer instead.");return Yt.isArrayBuffer(M)||Yt.isTypedArray(M)?f&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function m(M,k,F){let I=M;if(M&&!F&&typeof M=="object"){if(Yt.endsWith(k,"{}"))k=r?k:k.slice(0,-2),M=JSON.stringify(M);else if(Yt.isArray(M)&&lk(M)||(Yt.isFileList(M)||Yt.endsWith(k,"[]"))&&(I=Yt.toArray(M)))return k=g5(k),I.forEach(function(Y,ee){!(Yt.isUndefined(Y)||Y===null)&&n.append(o===!0?w_([k],ee,s):o===null?k:k+"[]",d(Y))}),!1}return Yv(M)?!0:(n.append(w_(F,k,s),d(M)),!1)}const _=[],b=Object.assign(uk,{defaultVisitor:m,convertValue:d,isVisitable:Yv});function y(M,k){if(!Yt.isUndefined(M)){if(_.indexOf(M)!==-1)throw Error("Circular reference detected in "+k.join("."));_.push(M),Yt.forEach(M,function(I,R){(!(Yt.isUndefined(I)||I===null)&&i.call(n,I,Yt.isString(R)?R.trim():R,k,b))===!0&&y(I,k?k.concat(R):[R])}),_.pop()}}if(!Yt.isObject(e))throw new TypeError("data must be an object");return y(e),n}function x_(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function sy(e,n){this._pairs=[],e&&Jm(e,this,n)}const m5=sy.prototype;m5.append=function(n,t){this._pairs.push([n,t])};m5.toString=function(n){const t=n?function(r){return n.call(this,r,x_)}:x_;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function ck(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function v5(e,n,t){if(!n)return e;const r=t&&t.encode||ck;Yt.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(n,t):s=Yt.isURLSearchParams(n)?n.toString():new sy(n,t).toString(r),s){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class L_{constructor(){this.handlers=[]}use(n,t,r){return this.handlers.push({fulfilled:n,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Yt.forEach(this.handlers,function(r){r!==null&&n(r)})}}const y5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fk=typeof URLSearchParams<"u"?URLSearchParams:sy,hk=typeof FormData<"u"?FormData:null,dk=typeof Blob<"u"?Blob:null,pk={isBrowser:!0,classes:{URLSearchParams:fk,FormData:hk,Blob:dk},protocols:["http","https","file","blob","url","data"]},ay=typeof window<"u"&&typeof document<"u",Jv=typeof navigator=="object"&&navigator||void 0,gk=ay&&(!Jv||["ReactNative","NativeScript","NS"].indexOf(Jv.product)<0),mk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",vk=ay&&window.location.href||"http://localhost",yk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ay,hasStandardBrowserEnv:gk,hasStandardBrowserWebWorkerEnv:mk,navigator:Jv,origin:vk},Symbol.toStringTag,{value:"Module"})),Ba={...yk,...pk};function _k(e,n){return Jm(e,new Ba.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return Ba.isNode&&Yt.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},n))}function bk(e){return Yt.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function wk(e){const n={},t=Object.keys(e);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],n[s]=e[s];return n}function _5(e){function n(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),f=s>=t.length;return o=!o&&Yt.isArray(i)?i.length:o,f?(Yt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!u):((!i[o]||!Yt.isObject(i[o]))&&(i[o]=[]),n(t,r,i[o],s)&&Yt.isArray(i[o])&&(i[o]=wk(i[o])),!u)}if(Yt.isFormData(e)&&Yt.isFunction(e.entries)){const t={};return Yt.forEachEntry(e,(r,i)=>{n(bk(r),i,t,0)}),t}return null}function xk(e,n,t){if(Yt.isString(e))try{return(n||JSON.parse)(e),Yt.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(e)}const Op={transitional:y5,adapter:["xhr","http","fetch"],transformRequest:[function(n,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=Yt.isObject(n);if(s&&Yt.isHTMLForm(n)&&(n=new FormData(n)),Yt.isFormData(n))return i?JSON.stringify(_5(n)):n;if(Yt.isArrayBuffer(n)||Yt.isBuffer(n)||Yt.isStream(n)||Yt.isFile(n)||Yt.isBlob(n)||Yt.isReadableStream(n))return n;if(Yt.isArrayBufferView(n))return n.buffer;if(Yt.isURLSearchParams(n))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return _k(n,this.formSerializer).toString();if((u=Yt.isFileList(n))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Jm(u?{"files[]":n}:n,f&&new f,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),xk(n)):n}],transformResponse:[function(n){const t=this.transitional||Op.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(Yt.isResponse(n)||Yt.isReadableStream(n))return n;if(n&&Yt.isString(n)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(n)}catch(u){if(o)throw u.name==="SyntaxError"?ri.from(u,ri.ERR_BAD_RESPONSE,this,null,this.response):u}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ba.classes.FormData,Blob:Ba.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Yt.forEach(["delete","get","head","post","put","patch"],e=>{Op.headers[e]={}});const Lk=Yt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Sk=e=>{const n={};let t,r,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||n[t]&&Lk[t])&&(t==="set-cookie"?n[t]?n[t].push(r):n[t]=[r]:n[t]=n[t]?n[t]+", "+r:r)}),n},S_=Symbol("internals");function Ad(e){return e&&String(e).trim().toLowerCase()}function Ig(e){return e===!1||e==null?e:Yt.isArray(e)?e.map(Ig):String(e)}function Ek(e){const n=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(e);)n[r[1]]=r[2];return n}const Ck=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Z0(e,n,t,r,i){if(Yt.isFunction(r))return r.call(this,n,t);if(i&&(n=t),!!Yt.isString(n)){if(Yt.isString(r))return n.indexOf(r)!==-1;if(Yt.isRegExp(r))return r.test(n)}}function Pk(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,t,r)=>t.toUpperCase()+r)}function Mk(e,n){const t=Yt.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+t,{value:function(i,s,o){return this[r].call(this,n,i,s,o)},configurable:!0})})}let Cl=class{constructor(n){n&&this.set(n)}set(n,t,r){const i=this;function s(u,f,d){const m=Ad(f);if(!m)throw new Error("header name must be a non-empty string");const _=Yt.findKey(i,m);(!_||i[_]===void 0||d===!0||d===void 0&&i[_]!==!1)&&(i[_||f]=Ig(u))}const o=(u,f)=>Yt.forEach(u,(d,m)=>s(d,m,f));if(Yt.isPlainObject(n)||n instanceof this.constructor)o(n,t);else if(Yt.isString(n)&&(n=n.trim())&&!Ck(n))o(Sk(n),t);else if(Yt.isHeaders(n))for(const[u,f]of n.entries())s(f,u,r);else n!=null&&s(t,n,r);return this}get(n,t){if(n=Ad(n),n){const r=Yt.findKey(this,n);if(r){const i=this[r];if(!t)return i;if(t===!0)return Ek(i);if(Yt.isFunction(t))return t.call(this,i,r);if(Yt.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,t){if(n=Ad(n),n){const r=Yt.findKey(this,n);return!!(r&&this[r]!==void 0&&(!t||Z0(this,this[r],r,t)))}return!1}delete(n,t){const r=this;let i=!1;function s(o){if(o=Ad(o),o){const u=Yt.findKey(r,o);u&&(!t||Z0(r,r[u],u,t))&&(delete r[u],i=!0)}}return Yt.isArray(n)?n.forEach(s):s(n),i}clear(n){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!n||Z0(this,this[s],s,n,!0))&&(delete this[s],i=!0)}return i}normalize(n){const t=this,r={};return Yt.forEach(this,(i,s)=>{const o=Yt.findKey(r,s);if(o){t[o]=Ig(i),delete t[s];return}const u=n?Pk(s):String(s).trim();u!==s&&delete t[s],t[u]=Ig(i),r[u]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const t=Object.create(null);return Yt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=n&&Yt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,t])=>n+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...t){const r=new this(n);return t.forEach(i=>r.set(i)),r}static accessor(n){const r=(this[S_]=this[S_]={accessors:{}}).accessors,i=this.prototype;function s(o){const u=Ad(o);r[u]||(Mk(i,o),r[u]=!0)}return Yt.isArray(n)?n.forEach(s):s(n),this}};Cl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Yt.reduceDescriptors(Cl.prototype,({value:e},n)=>{let t=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[t]=r}}});Yt.freezeMethods(Cl);function K0(e,n){const t=this||Op,r=n||t,i=Cl.from(r.headers);let s=r.data;return Yt.forEach(e,function(u){s=u.call(t,s,i.normalize(),n?n.status:void 0)}),i.normalize(),s}function b5(e){return!!(e&&e.__CANCEL__)}function md(e,n,t){ri.call(this,e??"canceled",ri.ERR_CANCELED,n,t),this.name="CanceledError"}Yt.inherits(md,ri,{__CANCEL__:!0});function w5(e,n,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?e(t):n(new ri("Request failed with status code "+t.status,[ri.ERR_BAD_REQUEST,ri.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Ak(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function kk(e,n){e=e||10;const t=new Array(e),r=new Array(e);let i=0,s=0,o;return n=n!==void 0?n:1e3,function(f){const d=Date.now(),m=r[s];o||(o=d),t[i]=f,r[i]=d;let _=s,b=0;for(;_!==i;)b+=t[_++],_=_%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),d-o<n)return;const y=m&&d-m;return y?Math.round(b*1e3/y):void 0}}function Tk(e,n){let t=0,r=1e3/n,i,s;const o=(d,m=Date.now())=>{t=m,i=null,s&&(clearTimeout(s),s=null),e.apply(null,d)};return[(...d)=>{const m=Date.now(),_=m-t;_>=r?o(d,m):(i=d,s||(s=setTimeout(()=>{s=null,o(i)},r-_)))},()=>i&&o(i)]}const cm=(e,n,t=3)=>{let r=0;const i=kk(50,250);return Tk(s=>{const o=s.loaded,u=s.lengthComputable?s.total:void 0,f=o-r,d=i(f),m=o<=u;r=o;const _={loaded:o,total:u,progress:u?o/u:void 0,bytes:f,rate:d||void 0,estimated:d&&u&&m?(u-o)/d:void 0,event:s,lengthComputable:u!=null,[n?"download":"upload"]:!0};e(_)},t)},E_=(e,n)=>{const t=e!=null;return[r=>n[0]({lengthComputable:t,total:e,loaded:r}),n[1]]},C_=e=>(...n)=>Yt.asap(()=>e(...n)),Nk=Ba.hasStandardBrowserEnv?((e,n)=>t=>(t=new URL(t,Ba.origin),e.protocol===t.protocol&&e.host===t.host&&(n||e.port===t.port)))(new URL(Ba.origin),Ba.navigator&&/(msie|trident)/i.test(Ba.navigator.userAgent)):()=>!0,Dk=Ba.hasStandardBrowserEnv?{write(e,n,t,r,i,s){const o=[e+"="+encodeURIComponent(n)];Yt.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Yt.isString(r)&&o.push("path="+r),Yt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ik(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ok(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function x5(e,n,t){let r=!Ik(n);return e&&(r||t==!1)?Ok(e,n):n}const P_=e=>e instanceof Cl?{...e}:e;function ah(e,n){n=n||{};const t={};function r(d,m,_,b){return Yt.isPlainObject(d)&&Yt.isPlainObject(m)?Yt.merge.call({caseless:b},d,m):Yt.isPlainObject(m)?Yt.merge({},m):Yt.isArray(m)?m.slice():m}function i(d,m,_,b){if(Yt.isUndefined(m)){if(!Yt.isUndefined(d))return r(void 0,d,_,b)}else return r(d,m,_,b)}function s(d,m){if(!Yt.isUndefined(m))return r(void 0,m)}function o(d,m){if(Yt.isUndefined(m)){if(!Yt.isUndefined(d))return r(void 0,d)}else return r(void 0,m)}function u(d,m,_){if(_ in n)return r(d,m);if(_ in e)return r(void 0,d)}const f={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(d,m,_)=>i(P_(d),P_(m),_,!0)};return Yt.forEach(Object.keys(Object.assign({},e,n)),function(m){const _=f[m]||i,b=_(e[m],n[m],m);Yt.isUndefined(b)&&_!==u||(t[m]=b)}),t}const L5=e=>{const n=ah({},e);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:u}=n;n.headers=o=Cl.from(o),n.url=v5(x5(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let f;if(Yt.isFormData(t)){if(Ba.hasStandardBrowserEnv||Ba.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((f=o.getContentType())!==!1){const[d,...m]=f?f.split(";").map(_=>_.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...m].join("; "))}}if(Ba.hasStandardBrowserEnv&&(r&&Yt.isFunction(r)&&(r=r(n)),r||r!==!1&&Nk(n.url))){const d=i&&s&&Dk.read(s);d&&o.set(i,d)}return n},Bk=typeof XMLHttpRequest<"u",Rk=Bk&&function(e){return new Promise(function(t,r){const i=L5(e);let s=i.data;const o=Cl.from(i.headers).normalize();let{responseType:u,onUploadProgress:f,onDownloadProgress:d}=i,m,_,b,y,M;function k(){y&&y(),M&&M(),i.cancelToken&&i.cancelToken.unsubscribe(m),i.signal&&i.signal.removeEventListener("abort",m)}let F=new XMLHttpRequest;F.open(i.method.toUpperCase(),i.url,!0),F.timeout=i.timeout;function I(){if(!F)return;const Y=Cl.from("getAllResponseHeaders"in F&&F.getAllResponseHeaders()),he={data:!u||u==="text"||u==="json"?F.responseText:F.response,status:F.status,statusText:F.statusText,headers:Y,config:e,request:F};w5(function(ve){t(ve),k()},function(ve){r(ve),k()},he),F=null}"onloadend"in F?F.onloadend=I:F.onreadystatechange=function(){!F||F.readyState!==4||F.status===0&&!(F.responseURL&&F.responseURL.indexOf("file:")===0)||setTimeout(I)},F.onabort=function(){F&&(r(new ri("Request aborted",ri.ECONNABORTED,e,F)),F=null)},F.onerror=function(){r(new ri("Network Error",ri.ERR_NETWORK,e,F)),F=null},F.ontimeout=function(){let ee=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const he=i.transitional||y5;i.timeoutErrorMessage&&(ee=i.timeoutErrorMessage),r(new ri(ee,he.clarifyTimeoutError?ri.ETIMEDOUT:ri.ECONNABORTED,e,F)),F=null},s===void 0&&o.setContentType(null),"setRequestHeader"in F&&Yt.forEach(o.toJSON(),function(ee,he){F.setRequestHeader(he,ee)}),Yt.isUndefined(i.withCredentials)||(F.withCredentials=!!i.withCredentials),u&&u!=="json"&&(F.responseType=i.responseType),d&&([b,M]=cm(d,!0),F.addEventListener("progress",b)),f&&F.upload&&([_,y]=cm(f),F.upload.addEventListener("progress",_),F.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(m=Y=>{F&&(r(!Y||Y.type?new md(null,e,F):Y),F.abort(),F=null)},i.cancelToken&&i.cancelToken.subscribe(m),i.signal&&(i.signal.aborted?m():i.signal.addEventListener("abort",m)));const R=Ak(i.url);if(R&&Ba.protocols.indexOf(R)===-1){r(new ri("Unsupported protocol "+R+":",ri.ERR_BAD_REQUEST,e));return}F.send(s||null)})},Fk=(e,n)=>{const{length:t}=e=e?e.filter(Boolean):[];if(n||t){let r=new AbortController,i;const s=function(d){if(!i){i=!0,u();const m=d instanceof Error?d:this.reason;r.abort(m instanceof ri?m:new md(m instanceof Error?m.message:m))}};let o=n&&setTimeout(()=>{o=null,s(new ri(`timeout ${n} of ms exceeded`,ri.ETIMEDOUT))},n);const u=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(s):d.removeEventListener("abort",s)}),e=null)};e.forEach(d=>d.addEventListener("abort",s));const{signal:f}=r;return f.unsubscribe=()=>Yt.asap(u),f}},jk=function*(e,n){let t=e.byteLength;if(t<n){yield e;return}let r=0,i;for(;r<t;)i=r+n,yield e.slice(r,i),r=i},$k=async function*(e,n){for await(const t of zk(e))yield*jk(t,n)},zk=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:t,value:r}=await n.read();if(t)break;yield r}}finally{await n.cancel()}},M_=(e,n,t,r)=>{const i=$k(e,n);let s=0,o,u=f=>{o||(o=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:d,value:m}=await i.next();if(d){u(),f.close();return}let _=m.byteLength;if(t){let b=s+=_;t(b)}f.enqueue(new Uint8Array(m))}catch(d){throw u(d),d}},cancel(f){return u(f),i.return()}},{highWaterMark:2})},Xm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",S5=Xm&&typeof ReadableStream=="function",Uk=Xm&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),E5=(e,...n)=>{try{return!!e(...n)}catch{return!1}},Vk=S5&&E5(()=>{let e=!1;const n=new Request(Ba.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),A_=64*1024,Xv=S5&&E5(()=>Yt.isReadableStream(new Response("").body)),fm={stream:Xv&&(e=>e.body)};Xm&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!fm[n]&&(fm[n]=Yt.isFunction(e[n])?t=>t[n]():(t,r)=>{throw new ri(`Response type '${n}' is not supported`,ri.ERR_NOT_SUPPORT,r)})})})(new Response);const Gk=async e=>{if(e==null)return 0;if(Yt.isBlob(e))return e.size;if(Yt.isSpecCompliantForm(e))return(await new Request(Ba.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Yt.isArrayBufferView(e)||Yt.isArrayBuffer(e))return e.byteLength;if(Yt.isURLSearchParams(e)&&(e=e+""),Yt.isString(e))return(await Uk(e)).byteLength},Hk=async(e,n)=>{const t=Yt.toFiniteNumber(e.getContentLength());return t??Gk(n)},qk=Xm&&(async e=>{let{url:n,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:u,onUploadProgress:f,responseType:d,headers:m,withCredentials:_="same-origin",fetchOptions:b}=L5(e);d=d?(d+"").toLowerCase():"text";let y=Fk([i,s&&s.toAbortSignal()],o),M;const k=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let F;try{if(f&&Vk&&t!=="get"&&t!=="head"&&(F=await Hk(m,r))!==0){let he=new Request(n,{method:"POST",body:r,duplex:"half"}),fe;if(Yt.isFormData(r)&&(fe=he.headers.get("content-type"))&&m.setContentType(fe),he.body){const[ve,$]=E_(F,cm(C_(f)));r=M_(he.body,A_,ve,$)}}Yt.isString(_)||(_=_?"include":"omit");const I="credentials"in Request.prototype;M=new Request(n,{...b,signal:y,method:t.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:I?_:void 0});let R=await fetch(M);const Y=Xv&&(d==="stream"||d==="response");if(Xv&&(u||Y&&k)){const he={};["status","statusText","headers"].forEach(U=>{he[U]=R[U]});const fe=Yt.toFiniteNumber(R.headers.get("content-length")),[ve,$]=u&&E_(fe,cm(C_(u),!0))||[];R=new Response(M_(R.body,A_,ve,()=>{$&&$(),k&&k()}),he)}d=d||"text";let ee=await fm[Yt.findKey(fm,d)||"text"](R,e);return!Y&&k&&k(),await new Promise((he,fe)=>{w5(he,fe,{data:ee,headers:Cl.from(R.headers),status:R.status,statusText:R.statusText,config:e,request:M})})}catch(I){throw k&&k(),I&&I.name==="TypeError"&&/fetch/i.test(I.message)?Object.assign(new ri("Network Error",ri.ERR_NETWORK,e,M),{cause:I.cause||I}):ri.from(I,I&&I.code,e,M)}}),Qv={http:ak,xhr:Rk,fetch:qk};Yt.forEach(Qv,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const k_=e=>`- ${e}`,Wk=e=>Yt.isFunction(e)||e===null||e===!1,C5={getAdapter:e=>{e=Yt.isArray(e)?e:[e];const{length:n}=e;let t,r;const i={};for(let s=0;s<n;s++){t=e[s];let o;if(r=t,!Wk(t)&&(r=Qv[(o=String(t)).toLowerCase()],r===void 0))throw new ri(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,f])=>`adapter ${u} `+(f===!1?"is not supported by the environment":"is not available in the build"));let o=n?s.length>1?`since :
`+s.map(k_).join(`
`):" "+k_(s[0]):"as no adapter specified";throw new ri("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:Qv};function Y0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new md(null,e)}function T_(e){return Y0(e),e.headers=Cl.from(e.headers),e.data=K0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),C5.getAdapter(e.adapter||Op.adapter)(e).then(function(r){return Y0(e),r.data=K0.call(e,e.transformResponse,r),r.headers=Cl.from(r.headers),r},function(r){return b5(r)||(Y0(e),r&&r.response&&(r.response.data=K0.call(e,e.transformResponse,r.response),r.response.headers=Cl.from(r.response.headers))),Promise.reject(r)})}const P5="1.8.4",Qm={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{Qm[e]=function(r){return typeof r===e||"a"+(n<1?"n ":" ")+e}});const N_={};Qm.transitional=function(n,t,r){function i(s,o){return"[Axios v"+P5+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,u)=>{if(n===!1)throw new ri(i(o," has been removed"+(t?" in "+t:"")),ri.ERR_DEPRECATED);return t&&!N_[o]&&(N_[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),n?n(s,o,u):!0}};Qm.spelling=function(n){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function Zk(e,n,t){if(typeof e!="object")throw new ri("options must be an object",ri.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=n[s];if(o){const u=e[s],f=u===void 0||o(u,s,e);if(f!==!0)throw new ri("option "+s+" must be "+f,ri.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ri("Unknown option "+s,ri.ERR_BAD_OPTION)}}const Og={assertOptions:Zk,validators:Qm},oc=Og.validators;let nh=class{constructor(n){this.defaults=n,this.interceptors={request:new L_,response:new L_}}async request(n,t){try{return await this._request(n,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(n,t){typeof n=="string"?(t=t||{},t.url=n):t=n||{},t=ah(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&Og.assertOptions(r,{silentJSONParsing:oc.transitional(oc.boolean),forcedJSONParsing:oc.transitional(oc.boolean),clarifyTimeoutError:oc.transitional(oc.boolean)},!1),i!=null&&(Yt.isFunction(i)?t.paramsSerializer={serialize:i}:Og.assertOptions(i,{encode:oc.function,serialize:oc.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Og.assertOptions(t,{baseUrl:oc.spelling("baseURL"),withXsrfToken:oc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&Yt.merge(s.common,s[t.method]);s&&Yt.forEach(["delete","get","head","post","put","patch","common"],M=>{delete s[M]}),t.headers=Cl.concat(o,s);const u=[];let f=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(f=f&&k.synchronous,u.unshift(k.fulfilled,k.rejected))});const d=[];this.interceptors.response.forEach(function(k){d.push(k.fulfilled,k.rejected)});let m,_=0,b;if(!f){const M=[T_.bind(this),void 0];for(M.unshift.apply(M,u),M.push.apply(M,d),b=M.length,m=Promise.resolve(t);_<b;)m=m.then(M[_++],M[_++]);return m}b=u.length;let y=t;for(_=0;_<b;){const M=u[_++],k=u[_++];try{y=M(y)}catch(F){k.call(this,F);break}}try{m=T_.call(this,y)}catch(M){return Promise.reject(M)}for(_=0,b=d.length;_<b;)m=m.then(d[_++],d[_++]);return m}getUri(n){n=ah(this.defaults,n);const t=x5(n.baseURL,n.url,n.allowAbsoluteUrls);return v5(t,n.params,n.paramsSerializer)}};Yt.forEach(["delete","get","head","options"],function(n){nh.prototype[n]=function(t,r){return this.request(ah(r||{},{method:n,url:t,data:(r||{}).data}))}});Yt.forEach(["post","put","patch"],function(n){function t(r){return function(s,o,u){return this.request(ah(u||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}nh.prototype[n]=t(),nh.prototype[n+"Form"]=t(!0)});let Kk=class M5{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(u=>{r.subscribe(u),s=u}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},n(function(s,o,u){r.reason||(r.reason=new md(s,o,u),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const t=this._listeners.indexOf(n);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const n=new AbortController,t=r=>{n.abort(r)};return this.subscribe(t),n.signal.unsubscribe=()=>this.unsubscribe(t),n.signal}static source(){let n;return{token:new M5(function(i){n=i}),cancel:n}}};function Yk(e){return function(t){return e.apply(null,t)}}function Jk(e){return Yt.isObject(e)&&e.isAxiosError===!0}const e1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(e1).forEach(([e,n])=>{e1[n]=e});function A5(e){const n=new nh(e),t=s5(nh.prototype.request,n);return Yt.extend(t,nh.prototype,n,{allOwnKeys:!0}),Yt.extend(t,n,null,{allOwnKeys:!0}),t.create=function(i){return A5(ah(e,i))},t}const Ps=A5(Op);Ps.Axios=nh;Ps.CanceledError=md;Ps.CancelToken=Kk;Ps.isCancel=b5;Ps.VERSION=P5;Ps.toFormData=Jm;Ps.AxiosError=ri;Ps.Cancel=Ps.CanceledError;Ps.all=function(n){return Promise.all(n)};Ps.spread=Yk;Ps.isAxiosError=Jk;Ps.mergeConfig=ah;Ps.AxiosHeaders=Cl;Ps.formToJSON=e=>_5(Yt.isHTMLForm(e)?new FormData(e):e);Ps.getAdapter=C5.getAdapter;Ps.HttpStatusCode=e1;Ps.default=Ps;const{Axios:GG,AxiosError:HG,CanceledError:qG,isCancel:WG,CancelToken:ZG,VERSION:KG,all:YG,Cancel:JG,isAxiosError:XG,spread:QG,toFormData:eH,AxiosHeaders:tH,HttpStatusCode:nH,formToJSON:rH,getAdapter:iH,mergeConfig:oH}=Ps,gn=Jl({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let xf=null,Xf=null;const Xk=1e3;function e0(){if(gn.isEnabled){gn.isRecording=!0,gn.startTime=performance.now(),gn.frameCount=0,gn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(xf=new PerformanceObserver(e=>{e.getEntries().forEach(t=>{gn.longTasks.push({duration:t.duration,startTime:t.startTime,name:t.name,component:qu()})})}),xf.observe({entryTypes:["longtask"]}))}catch(e){console.warn("PerformanceObserver pour longues tches non support",e)}Qk(),ly()}}function hm(){gn.isRecording=!1,xf&&(xf.disconnect(),xf=null),D5()}function t1(){xf&&(xf.disconnect(),xf=null),D5(),gn.measures=[],gn.longTasks=[],gn.memorySnapshots=[],gn.operationHistory=[],gn.frameCount=0,gn.framesPerSecond=0,gn.lastFpsUpdate=0,gn.isEnabled&&e0()}function k5(e,n,t){if(!gn.isEnabled||!gn.isRecording)return()=>{};const r=performance.now(),i=gn.currentOperation;return gn.currentOperation=e,gn.operationStack.push(e),()=>{const s=performance.now()-r;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:r,duration:s,component:n||qu(),info:t,parentOperation:i||void 0}),s>10&&gn.operationHistory.push({operation:e,component:n||qu()||"unknown",durationMs:s,timestamp:Date.now()})}}async function T5(e,n,t,r){if(!gn.isEnabled||!gn.isRecording)return n();const i=performance.now(),s=gn.currentOperation;gn.currentOperation=e,gn.operationStack.push(e);try{return await n()}finally{const o=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:i,duration:o,component:t||qu(),info:r,parentOperation:s||void 0}),o>10&&gn.operationHistory.push({operation:e,component:t||qu()||"unknown",durationMs:o,timestamp:Date.now()})}}function N5(e,n,t,r){if(!gn.isEnabled||!gn.isRecording)return n();const i=performance.now(),s=gn.currentOperation;gn.currentOperation=e,gn.operationStack.push(e);try{return n()}finally{const o=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:e,startTime:i,duration:o,component:t||qu(),info:r,parentOperation:s||void 0}),o>10&&gn.operationHistory.push({operation:e,component:t||qu()||"unknown",durationMs:o,timestamp:Date.now()})}}function ly(){!gn.isEnabled||!gn.isRecording||(performance.memory?gn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):gn.memorySnapshots.push({timestamp:performance.now()}))}function Qk(){Xf!==null&&cancelAnimationFrame(Xf),gn.frameCount=0,gn.lastFpsUpdate=performance.now();function e(){gn.frameCount++;const n=performance.now();n-gn.lastFpsUpdate>=Xk&&(gn.framesPerSecond=Math.round(gn.frameCount*1e3/(n-gn.lastFpsUpdate)),gn.frameCount=0,gn.lastFpsUpdate=n),gn.isRecording&&(Xf=requestAnimationFrame(e))}Xf=requestAnimationFrame(e)}function D5(){Xf!==null&&(cancelAnimationFrame(Xf),Xf=null)}function qu(){return""}function n1(e){gn.isEnabled=e,e&&!gn.isRecording?e0():!e&&gn.isRecording&&hm()}function I5(e,n,t){return(...r)=>{if(!gn.isEnabled||!gn.isRecording)return e(...r);const i=performance.now();try{return e(...r)}finally{const s=performance.now()-i;gn.measures.push({name:n,startTime:i,duration:s,component:t||qu(),info:{args:r}}),s>10&&gn.operationHistory.push({operation:n,component:t||qu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function O5(e,n,t){return async(...r)=>{if(!gn.isEnabled||!gn.isRecording)return await e(...r);const i=performance.now();try{return await e(...r)}finally{const s=performance.now()-i;gn.measures.push({name:n,startTime:i,duration:s,component:t||qu(),info:{args:r}}),s>10&&gn.operationHistory.push({operation:n,component:t||qu()||"unknown",durationMs:s,timestamp:Date.now()})}}}function eT(e,n){const t=gn.measures.filter(o=>o.startTime>=e&&o.startTime+o.duration<=n),r=new Map,i=[];t.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const u=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:u.sort((f,d)=>d.duration-f.duration).map(f=>s(f))}}return i.sort((o,u)=>u.duration-o.duration).map(o=>s(o))}function r1(e,n){const t=e||gn.startTime,r=n||performance.now(),i=eT(t,r),s=r-t,o=new Map;function u(d){const m=o.get(d.operation)||{duration:0,component:d.component};m.duration+=d.duration,o.set(d.operation,m),d.children.forEach(_=>u(_))}i.forEach(d=>u(d));const f=Array.from(o.entries()).map(([d,{duration:m,component:_}])=>({operation:d,duration:m,component:_,impact:m/s*100})).sort((d,m)=>m.impact-d.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:f}}function vd(){const e=Ft(!1);ps(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";e.value=r,n1(r),t1()}catch(t){console.warn("Erreur lors de la vrification du paramtre perf:",t),e.value=!1,n1(!1)}}),Hu(()=>{gn.isRecording&&hm()});const n=(t,r)=>{if(!gn.isEnabled||!gn.isRecording)return null;const i=gn.measures.find(d=>d.name===t&&d.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=gn.measures.filter(d=>d.startTime>=i.startTime&&d.startTime<=s&&d!==i),u=gn.longTasks.filter(d=>d.startTime>=i.startTime&&d.startTime<=s),f=gn.memorySnapshots.filter(d=>d.timestamp>=i.startTime&&d.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(d=>({name:d.name,component:d.component,startTime:d.startTime-i.startTime,duration:d.duration,info:d.info})),longTasks:u.map(d=>({duration:d.duration,startTime:d.startTime-i.startTime,name:d.name,component:d.component})),memorySnapshots:f.map(d=>({...d,timestamp:d.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:u.length,maxLongTaskDuration:Math.max(...u.map(d=>d.duration),0),memoryDelta:f.length>1?(f[f.length-1].usedJSHeapSize||0)-(f[0].usedJSHeapSize||0):0}}};return{isEnabled:Ru(Ft(gn.isEnabled)),isQueryParamEnabled:Ru(e),isRecording:Ru(Ft(gn.isRecording)),measures:Ru(Ft(gn.measures)),longTasks:Ru(Ft(gn.longTasks)),memorySnapshots:Ru(Ft(gn.memorySnapshots)),framesPerSecond:Ru(Ft(gn.framesPerSecond)),operationHistory:Ru(Ft(gn.operationHistory)),startRecording:e0,stopRecording:hm,clearRecording:t1,startMeasure:k5,measure:N5,measureAsync:T5,captureMemorySnapshot:ly,createPerformanceTracker:I5,createAsyncPerformanceTracker:O5,getOperationDetails:n,getSlowOperations:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.measures].sort((t,r)=>r.duration-t.duration).slice(0,10),getLongTasks:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.longTasks].sort((t,r)=>r.duration-t.duration),getPerformanceReport:()=>{if(!gn.isEnabled||!gn.isRecording)return null;const t=r1();return{totalMeasures:gn.measures.length,totalLongTasks:gn.longTasks.length,slowestOperations:[...gn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:gn.framesPerSecond,memoryUsage:gn.memorySnapshots.length>0?gn.memorySnapshots[gn.memorySnapshots.length-1]:null,operationsByComponent:tT(gn.measures),criticalPaths:t.criticalPaths,bottlenecks:t.bottlenecks,recordingDuration:gn.isRecording?performance.now()-gn.startTime:null}},analyzeCriticalPaths:r1}}function tT(e){if(!gn.isEnabled||!gn.isRecording)return{};const n={};return e.forEach(t=>{const r=t.component||"unknown";n[r]||(n[r]={totalTime:0,callCount:0,operations:{}}),n[r].totalTime+=t.duration,n[r].callCount++,n[r].operations[t.name]||(n[r].operations[t.name]={totalTime:0,callCount:0}),n[r].operations[t.name].totalTime+=t.duration,n[r].operations[t.name].callCount++}),n}const dn={startRecording:e0,stopRecording:hm,clearRecording:t1,startMeasure:k5,measure:N5,measureAsync:T5,captureMemorySnapshot:ly,createPerformanceTracker:I5,createAsyncPerformanceTracker:O5,setEnabled:n1,analyzeCriticalPaths:r1},Vn=Ps.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Pi=vd();function B5(e){var r;const t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}Vn.interceptors.request.use(async e=>{const n=Pi.startMeasure("api_request_interceptor","ApiService");try{const t=B5("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:e.url,method:e.method,headers:e.headers,withCredentials:e.withCredentials}),e}finally{n()}},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Vn.interceptors.response.use(e=>e,async e=>{var r,i;const n=Pi.startMeasure("api_response_interceptor","ApiService"),t=e.config;try{if(((r=e.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;const s=ta();try{await Pi.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=B5("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Vn(t)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(e)}finally{n()}});function nT(e){var t;const n=[];if((t=e.response)!=null&&t.data){const r=e.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{n.push({field:i,message:o})}):typeof s=="string"&&n.push({field:i,message:s})}):typeof r=="string"?n.push({field:"non_field_error",message:r}):r.detail&&n.push({field:"non_field_error",message:r.detail})}else e.message&&n.push({field:"non_field_error",message:`Erreur de connexion: ${e.message}`});return n.length===0&&n.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),n}async function Bg(e){console.log("[fetchUsersByHierarchy] Rcupration des utilisateurs:",e);const n={role:e.role};e.entrepriseId&&(n.entreprise=e.entrepriseId),e.salarieId&&(n.salarie=e.salarieId),e.includeDetails&&(n.include_plans=!0),e.search&&(n.search=e.search),console.log("[fetchUsersByHierarchy] Filtres appliqus:",n);try{const t=await el.getUsers(n);return console.log(`[fetchUsersByHierarchy] Rsultat (${t.data.length} utilisateurs):`,t.data),t.data}catch(t){throw console.error("[fetchUsersByHierarchy] Erreur lors de la rcupration des utilisateurs:",t),t}}const el={async getUsers(e={}){const n=Pi.startMeasure("get_users","UserService");try{return await Pi.measureAsync("get_users_request",()=>Vn.get("/users/",{params:e}),"UserService")}finally{n()}},async getUser(e){return await Vn.get(`/users/${e}/`)},async createUser(e){return await Vn.post("/users/",e)},async updateUser(e,n){return await Vn.patch(`/users/${e}/`,n)},async deleteUser(e){return await Vn.delete(`/users/${e}/`)},async getEntreprises(){return await Vn.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(e){const n={role:"SALARIE"};return e&&(n.entreprise=e),await Vn.get("/users/",{params:n})},async getSalarieVisiteurs(e){return await Vn.get("/users/",{params:{role:"VISITEUR",salarie:e}})},async getEntrepriseVisiteurs(e){return await Vn.get("/users/",{params:{role:"VISITEUR",entreprise:e}})},async getUsersByHierarchy(e){const n=Pi.startMeasure("get_users_hierarchy","UserService");try{const t=Pi.measure("prepare_hierarchy_filters",()=>{const r={role:e.role};return e.entrepriseId&&(r.entreprise=e.entrepriseId),e.salarieId&&(r.salarie=e.salarieId),e.includeDetails&&(r.include_plans=!0),e.search&&(r.search=e.search),r},"UserService");return await Pi.measureAsync("get_users_hierarchy_request",()=>Vn.get("/users/",{params:t}),"UserService")}finally{n()}},async getEntrepriseSalaries(e){return await Vn.get("/users/",{params:{role:"SALARIE",entreprise:e}})},async getVisiteurs(e,n){const t={role:"VISITEUR"};return e&&(t.salarie=e),n&&(t.entreprise=n),await Vn.get("/users/",{params:t})},async assignEntrepriseToSalarie(e,n){return await Vn.patch(`/users/${e}/`,{entreprise:n})},async assignSalarieToVisiteur(e,n){return await Vn.patch(`/users/${e}/`,{salarie:n})},formatLogoFileName(e){return Pi.measure("format_logo_filename",()=>{var i;const n=new Date().getTime(),t=((i=e.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${e.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${n}.${t}`},"UserService")},async uploadLogo(e){const n=Pi.startMeasure("upload_logo","UserService");try{const t=new FormData,r=this.formatLogoFileName(e),i=new File([e],r,{type:e.type});return t.append("logo",i),await Pi.measureAsync("upload_logo_request",()=>Vn.post("/users/upload_logo/",t,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{n()}}},mg={async getPlans(){const e=Pi.startMeasure("get_plans","IrrigationService");try{return await Pi.measureAsync("get_plans_request",()=>Vn.get("/plans/"),"IrrigationService")}finally{e()}},async createPlan(e){const n=Pi.startMeasure("create_plan","IrrigationService");try{const t=Pi.measure("format_plan_data",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationService");return await Pi.measureAsync("create_plan_request",()=>Vn.post("/plans/",t),"IrrigationService")}finally{n()}},async updatePlan(e,n){const t=Pi.startMeasure("update_plan","IrrigationService");try{return await Pi.measureAsync("update_plan_request",()=>Vn.put(`/plans/${e}/`,n),"IrrigationService")}finally{t()}},async deletePlan(e){const n=Pi.startMeasure("delete_plan","IrrigationService");try{return await Pi.measureAsync("delete_plan_request",()=>Vn.delete(`/plans/${e}/`),"IrrigationService")}finally{n()}},async getVisiteurPlans(e){return await Vn.get("/plans/",{params:{visiteur:e}})},async createPlanForVisiteur(e){return await Vn.post("/plans/",e)},async getEntreprisePlans(e){return await Vn.get("/plans/",{params:{entreprise:e}})},async getSalariePlans(e){return await Vn.get("/plans/",{params:{salarie:e}})},async createPlanForSalarie(e,n){const t={...e,salarie:n};return await Vn.post("/plans/",t)},async createPlanForEntreprise(e,n){const t={...e,entreprise:n};return await Vn.post("/plans/",t)}},Qs={async getNotes(e={}){const n=Pi.startMeasure("get_notes","NoteService");try{return await Pi.measureAsync("get_notes_request",()=>Vn.get("/notes/",{params:e}),"NoteService")}finally{n()}},async getNotesByPlan(e){const n=Pi.startMeasure("get_notes_by_plan","NoteService");try{return await Pi.measureAsync("get_notes_by_plan_request",()=>Vn.get("/notes/",{params:{plan:e}}),"NoteService")}finally{n()}},async getNote(e){const n=Pi.startMeasure("get_note","NoteService");try{return await Pi.measureAsync("get_note_request",()=>Vn.get(`/notes/${e}/`),"NoteService")}finally{n()}},async createNote(e){const n=Pi.startMeasure("create_note","NoteService");try{const t={...e};return t.location&&Object.keys(t.location).length===0&&delete t.location,await Pi.measureAsync("create_note_request",()=>Vn.post("/notes/",t),"NoteService")}finally{n()}},async updateNote(e,n){console.log("[noteService][updateNote] Mise  jour de la note:",{noteId:e,noteData:n});const t=Pi.startMeasure("update_note","NoteService");try{const r={...n};r.location&&Object.keys(r.location).length===0&&delete r.location,n.column!==void 0?r.column=n.column:n.columnId!==void 0&&(r.column=n.columnId),delete r.columnId,delete r.column_id,delete r.column_details,console.log("[noteService][updateNote] Donnes formates:",r);const i=await Pi.measureAsync("update_note_request",()=>Vn.patch(`/notes/${e}/`,r),"NoteService");return console.log("[noteService][updateNote] Rponse du serveur:",i.data),i}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise  jour:",r),r}finally{t()}},async deleteNote(e){const n=Pi.startMeasure("delete_note","NoteService");try{return await Pi.measureAsync("delete_note_request",()=>Vn.delete(`/notes/${e}/`),"NoteService")}finally{n()}},async getComments(e){return await Vn.get(`/notes/${e}/comments/`)},async addComment(e,n){const t=typeof n=="string"?{text:n}:n;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${e}:`,t),await Vn.post(`/notes/${e}/comments/`,t)},async updateComment(e,n,t){return await Vn.patch(`/notes/${e}/comments/${n}/`,t)},async deleteComment(e,n){return await Vn.delete(`/notes/${e}/comments/${n}/`)},async getPhotos(e){return await Vn.get(`/notes/${e}/photos/`)},async addPhoto(e,n){return await Vn.post(`/notes/${e}/photos/`,n,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(e,n,t){return await Vn.patch(`/notes/${e}/photos/${n}/`,t)},async deletePhoto(e,n){return await Vn.delete(`/notes/${e}/photos/${n}/`)}},D_={async getDevices(e={}){const n=Pi.startMeasure("get_weather_devices","WeatherService");try{return await Pi.measureAsync("get_weather_devices_request",()=>Vn.get("/weather/real-time/devices/",{params:e}),"WeatherService")}finally{n()}},async getRealTimeData(e){const n=Pi.startMeasure("get_weather_data","WeatherService");try{const t=typeof e=="string"?{mac:e}:e;return await Pi.measureAsync("get_weather_data_request",()=>Vn.get("/weather/real-time/",{params:t}),"WeatherService")}finally{n()}}};Vn.defaults.baseURL="/api";Vn.defaults.headers.common["Content-Type"]="application/json";Vn.defaults.withCredentials=!0;function Sp(e){var r;const t=`; ${document.cookie}`.split(`; ${e}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}Vn.interceptors.request.use(e=>{const n=Sp("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),e},e=>(console.error("Request interceptor error:",e),Promise.reject(e)));Vn.interceptors.response.use(e=>e,async e=>{var r,i;const n=ta(),t=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;try{if(!Sp("access_token"))throw new Error("No token available");await n.refreshToken();const o=Sp("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Vn(t)}catch(s){console.error("Token refresh failed:",s),await n.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(e)});function rT(e,n,t=1){const r=new Date;r.setTime(r.getTime()+t*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${e}=${n};${i};path=/;secure;samesite=Strict`}function Hl(e){if(!e)return"-";const n=e.first_name||"",t=e.last_name?e.last_name.toUpperCase():"",r=`${n} ${t}`.trim(),i=e.company_name||e.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function iT(e="",n=""){return`${(e==null?void 0:e.charAt(0))||""}${(n==null?void 0:n.charAt(0))||""}`.toUpperCase()}const oT={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function sT(e){return oT[e]||e}function aT(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function lT(e){return e?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function uT({role:e,entrepriseId:n,salarieId:t,includeDetails:r=!1}){const i={role:e};return n&&(i.entreprise=n),t&&(i.salarie=t),r&&(i.include_plans=!0),(await el.getUsers(i)).data}const ta=Dp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="admin"},isEntreprise:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="entreprise"},isSalarie:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="salarie"},isVisiteur:e=>{var n;return((n=e.user)==null?void 0:n.user_type)==="visiteur"},currentUser:e=>e.user,hasEnterprise:e=>{var n;return!!((n=e.user)!=null&&n.enterprise_id)},hasEmployee:e=>{var n;return!!((n=e.user)!=null&&n.employee_id)}},actions:{async initialize(e){if(!e){const t=await this.restoreSession();return this.initialized=!0,t}if(e.isAuthenticated&&e.user)return this.user=e.user,this.isAuthenticated=!0,this.mustChangePassword=e.user.must_change_password||!1,this.initialized=!0,!0;const n=await this.restoreSession();return this.initialized=!0,n},async restoreSession(){try{if(!Sp("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const n=await Vn.post("/token/refresh/");return n.data.user?(this.user=n.data.user,this.isAuthenticated=!0,this.mustChangePassword=n.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(e){return console.error("Failed to restore session:",e),this.isAuthenticated=!1,this.user=null,!1}},async login(e,n){var t,r,i;try{const s=await Vn.post("/token/",{username:e,password:n});if(!s.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((t=s.response)==null?void 0:t.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const e=await Vn.get("/users/me/");return this.user=e.data,this.isAuthenticated=!0,this.mustChangePassword=e.data.must_change_password||!1,e.data}catch(e){throw this.isAuthenticated=!1,this.user=null,e}},async changePassword(e,n){try{const t=await Vn.post("/users/change_password/",{old_password:e,password:n});return this.user={...this.user,must_change_password:!1},t.data}catch(t){throw console.error("Password change error:",t),t}},async refreshToken(){var e,n;try{if(!Sp("refresh_token"))throw new Error("No refresh token available");const r=await Vn.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return rT("access_token",i,1),this.isAuthenticated=!0,i}catch(t){throw console.error("Error refreshing token:",{status:(e=t.response)==null?void 0:e.status,data:(n=t.response)==null?void 0:n.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",t}},async fetchUsers(e={}){this.loading=!0;try{return(await el.getUsers(e)).data}catch(n){throw this.error="Erreur lors de la rcupration des utilisateurs",n}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const e=await el.getUsers({role:"ENTREPRISE"});return this.enterprises=e.data,this.enterprises}catch(e){throw this.error="Erreur lors de la rcupration des entreprises",e}finally{this.loading=!1}},async fetchEnterpriseEmployees(e){this.loading=!0;try{const n=await el.getUsers({role:"SALARIE",entreprise:e});return this.employees=n.data,this.employees}catch(n){throw this.error="Erreur lors de la rcupration des salaries",n}finally{this.loading=!1}},async fetchEnterpriseVisitors(e){this.loading=!0;try{const n=await el.getUsers({role:"VISITEUR",entreprise:e});return this.visitors=n.data,this.visitors}catch(n){throw this.error="Erreur lors de la rcupration des visiteurs",n}finally{this.loading=!1}},async createUser(e){this.loading=!0;try{return(await el.createUser(e)).data}catch(n){throw this.error="Erreur lors de la cration de l'utilisateur",n}finally{this.loading=!1}},async updateUser(e,n){this.loading=!0;try{return(await el.updateUser(e,n)).data}catch(t){throw this.error="Erreur lors de la mise  jour de l'utilisateur",t}finally{this.loading=!1}},async deleteUser(e){this.loading=!0;try{return await el.deleteUser(e),!0}catch(n){throw this.error="Erreur lors de la suppression de l'utilisateur",n}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const e=await Vn.get("/users/",{params:{role:"entreprise"}});this.enterprises=e.data}catch(e){throw this.error="Erreur lors de la rcupration des entreprises",e}finally{this.loading=!1}},async setEnterprise(e,n){this.loading=!0;try{await Vn.patch(`/users/${e}/`,{enterprise:n}),this.user&&this.user.id===e&&(this.user.enterprise_id=n)}catch(t){throw this.error="Erreur lors de la mise  jour de l'entreprise",t}finally{this.loading=!1}},async updateUserRole(e,n){this.loading=!0;try{const t=await Vn.patch(`/users/${e}/`,{role:n});return this.user&&this.user.id===e&&(this.user.user_type=n),t.data}catch(t){throw this.error="Erreur lors de la mise  jour du rle",t}finally{this.loading=!1}},async updateUserEmail(e){var n;this.loading=!0;try{const t=await Vn.patch(`/users/${(n=this.user)==null?void 0:n.id}/`,{email:e});return this.user&&(this.user.email=e),t.data}catch(t){throw this.error="Erreur lors de la mise  jour de l'email",t}finally{this.loading=!1}},async uploadLogo(e){this.loading=!0;try{const n=await el.uploadLogo(e);return this.user&&n.data.logo&&(this.user.logo=n.data.logo),n.data}catch(n){throw this.error="Erreur lors du tlversement du logo",n}finally{this.loading=!1}},checkAccess(e){return this.user?e.includes(this.user.user_type):!1},async fetchUsersByRole(e){this.loading=!0;try{return await uT(e)}catch(n){throw console.error(`Error fetching ${e.role}:`,n),n}finally{this.loading=!1}},async fetchEntrepriseSalaries(e){this.loading=!0;try{return(await el.getUsers({role:"SALARIE",entreprise:e})).data}catch(n){throw this.error="Erreur lors de la rcupration des salaries",n}finally{this.loading=!1}},async fetchSalarieVisiteurs(e){this.loading=!0;try{return(await el.getUsers({role:"VISITEUR",salarie:e})).data}catch(n){throw this.error="Erreur lors de la rcupration des visiteurs",n}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const $h=typeof document<"u";function R5(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function cT(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&R5(e.default)}const ro=Object.assign;function J0(e,n){const t={};for(const r in n){const i=n[r];t[r]=Wu(i)?i.map(e):e(i)}return t}const ip=()=>{},Wu=Array.isArray,F5=/#/g,fT=/&/g,hT=/\//g,dT=/=/g,pT=/\?/g,j5=/\+/g,gT=/%5B/g,mT=/%5D/g,$5=/%5E/g,vT=/%60/g,z5=/%7B/g,yT=/%7C/g,U5=/%7D/g,_T=/%20/g;function uy(e){return encodeURI(""+e).replace(yT,"|").replace(gT,"[").replace(mT,"]")}function bT(e){return uy(e).replace(z5,"{").replace(U5,"}").replace($5,"^")}function i1(e){return uy(e).replace(j5,"%2B").replace(_T,"+").replace(F5,"%23").replace(fT,"%26").replace(vT,"`").replace(z5,"{").replace(U5,"}").replace($5,"^")}function wT(e){return i1(e).replace(dT,"%3D")}function xT(e){return uy(e).replace(F5,"%23").replace(pT,"%3F")}function LT(e){return e==null?"":xT(e).replace(hT,"%2F")}function Ep(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ST=/\/$/,ET=e=>e.replace(ST,"");function X0(e,n,t="/"){let r,i={},s="",o="";const u=n.indexOf("#");let f=n.indexOf("?");return u<f&&u>=0&&(f=-1),f>-1&&(r=n.slice(0,f),s=n.slice(f+1,u>-1?u:n.length),i=e(s)),u>-1&&(r=r||n.slice(0,u),o=n.slice(u,n.length)),r=AT(r??n,t),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:Ep(o)}}function CT(e,n){const t=n.query?e(n.query):"";return n.path+(t&&"?")+t+(n.hash||"")}function I_(e,n){return!n||!e.toLowerCase().startsWith(n.toLowerCase())?e:e.slice(n.length)||"/"}function PT(e,n,t){const r=n.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&ld(n.matched[r],t.matched[i])&&V5(n.params,t.params)&&e(n.query)===e(t.query)&&n.hash===t.hash}function ld(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function V5(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const t in e)if(!MT(e[t],n[t]))return!1;return!0}function MT(e,n){return Wu(e)?O_(e,n):Wu(n)?O_(n,e):e===n}function O_(e,n){return Wu(n)?e.length===n.length&&e.every((t,r)=>t===n[r]):e.length===1&&e[0]===n}function AT(e,n){if(e.startsWith("/"))return e;if(!e)return n;const t=n.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,o,u;for(o=0;o<r.length;o++)if(u=r[o],u!==".")if(u==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const nf={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Cp;(function(e){e.pop="pop",e.push="push"})(Cp||(Cp={}));var op;(function(e){e.back="back",e.forward="forward",e.unknown=""})(op||(op={}));function kT(e){if(!e)if($h){const n=document.querySelector("base");e=n&&n.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ET(e)}const TT=/^[^#]+#/;function NT(e,n){return e.replace(TT,"#")+n}function DT(e,n){const t=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:n.behavior,left:r.left-t.left-(n.left||0),top:r.top-t.top-(n.top||0)}}const t0=()=>({left:window.scrollX,top:window.scrollY});function IT(e){let n;if("el"in e){const t=e.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;n=DT(i,e)}else n=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(n):window.scrollTo(n.left!=null?n.left:window.scrollX,n.top!=null?n.top:window.scrollY)}function B_(e,n){return(history.state?history.state.position-n:-1)+e}const o1=new Map;function OT(e,n){o1.set(e,n)}function BT(e){const n=o1.get(e);return o1.delete(e),n}let RT=()=>location.protocol+"//"+location.host;function G5(e,n){const{pathname:t,search:r,hash:i}=n,s=e.indexOf("#");if(s>-1){let u=i.includes(e.slice(s))?e.slice(s).length:1,f=i.slice(u);return f[0]!=="/"&&(f="/"+f),I_(f,"")}return I_(t,e)+r+i}function FT(e,n,t,r){let i=[],s=[],o=null;const u=({state:b})=>{const y=G5(e,location),M=t.value,k=n.value;let F=0;if(b){if(t.value=y,n.value=b,o&&o===M){o=null;return}F=k?b.position-k.position:0}else r(y);i.forEach(I=>{I(t.value,M,{delta:F,type:Cp.pop,direction:F?F>0?op.forward:op.back:op.unknown})})};function f(){o=t.value}function d(b){i.push(b);const y=()=>{const M=i.indexOf(b);M>-1&&i.splice(M,1)};return s.push(y),y}function m(){const{history:b}=window;b.state&&b.replaceState(ro({},b.state,{scroll:t0()}),"")}function _(){for(const b of s)b();s=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",m,{passive:!0}),{pauseListeners:f,listen:d,destroy:_}}function R_(e,n,t,r=!1,i=!1){return{back:e,current:n,forward:t,replaced:r,position:window.history.length,scroll:i?t0():null}}function jT(e){const{history:n,location:t}=window,r={value:G5(e,t)},i={value:n.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:n.length-1,replaced:!0,scroll:null},!0);function s(f,d,m){const _=e.indexOf("#"),b=_>-1?(t.host&&document.querySelector("base")?e:e.slice(_))+f:RT()+e+f;try{n[m?"replaceState":"pushState"](d,"",b),i.value=d}catch(y){console.error(y),t[m?"replace":"assign"](b)}}function o(f,d){const m=ro({},n.state,R_(i.value.back,f,i.value.forward,!0),d,{position:i.value.position});s(f,m,!0),r.value=f}function u(f,d){const m=ro({},i.value,n.state,{forward:f,scroll:t0()});s(m.current,m,!0);const _=ro({},R_(r.value,f,null),{position:m.position+1},d);s(f,_,!1),r.value=f}return{location:r,state:i,push:u,replace:o}}function $T(e){e=kT(e);const n=jT(e),t=FT(e,n.state,n.location,n.replace);function r(s,o=!0){o||t.pauseListeners(),history.go(s)}const i=ro({location:"",base:e,go:r,createHref:NT.bind(null,e)},n,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>n.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>n.state.value}),i}function zT(e){return typeof e=="string"||e&&typeof e=="object"}function H5(e){return typeof e=="string"||typeof e=="symbol"}const q5=Symbol("");var F_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(F_||(F_={}));function ud(e,n){return ro(new Error,{type:e,[q5]:!0},n)}function Dc(e,n){return e instanceof Error&&q5 in e&&(n==null||!!(e.type&n))}const j_="[^/]+?",UT={sensitive:!1,strict:!1,start:!0,end:!0},VT=/[.+*?^${}()[\]/\\]/g;function GT(e,n){const t=ro({},UT,n),r=[];let i=t.start?"^":"";const s=[];for(const d of e){const m=d.length?[]:[90];t.strict&&!d.length&&(i+="/");for(let _=0;_<d.length;_++){const b=d[_];let y=40+(t.sensitive?.25:0);if(b.type===0)_||(i+="/"),i+=b.value.replace(VT,"\\$&"),y+=40;else if(b.type===1){const{value:M,repeatable:k,optional:F,regexp:I}=b;s.push({name:M,repeatable:k,optional:F});const R=I||j_;if(R!==j_){y+=10;try{new RegExp(`(${R})`)}catch(ee){throw new Error(`Invalid custom RegExp for param "${M}" (${R}): `+ee.message)}}let Y=k?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;_||(Y=F&&d.length<2?`(?:/${Y})`:"/"+Y),F&&(Y+="?"),i+=Y,y+=20,F&&(y+=-8),k&&(y+=-20),R===".*"&&(y+=-50)}m.push(y)}r.push(m)}if(t.strict&&t.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function u(d){const m=d.match(o),_={};if(!m)return null;for(let b=1;b<m.length;b++){const y=m[b]||"",M=s[b-1];_[M.name]=y&&M.repeatable?y.split("/"):y}return _}function f(d){let m="",_=!1;for(const b of e){(!_||!m.endsWith("/"))&&(m+="/"),_=!1;for(const y of b)if(y.type===0)m+=y.value;else if(y.type===1){const{value:M,repeatable:k,optional:F}=y,I=M in d?d[M]:"";if(Wu(I)&&!k)throw new Error(`Provided param "${M}" is an array but it is not repeatable (* or + modifiers)`);const R=Wu(I)?I.join("/"):I;if(!R)if(F)b.length<2&&(m.endsWith("/")?m=m.slice(0,-1):_=!0);else throw new Error(`Missing required param "${M}"`);m+=R}}return m||"/"}return{re:o,score:r,keys:s,parse:u,stringify:f}}function HT(e,n){let t=0;for(;t<e.length&&t<n.length;){const r=n[t]-e[t];if(r)return r;t++}return e.length<n.length?e.length===1&&e[0]===80?-1:1:e.length>n.length?n.length===1&&n[0]===80?1:-1:0}function W5(e,n){let t=0;const r=e.score,i=n.score;for(;t<r.length&&t<i.length;){const s=HT(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if($_(r))return 1;if($_(i))return-1}return i.length-r.length}function $_(e){const n=e[e.length-1];return e.length>0&&n[n.length-1]<0}const qT={type:0,value:""},WT=/[a-zA-Z0-9_]/;function ZT(e){if(!e)return[[]];if(e==="/")return[[qT]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function n(y){throw new Error(`ERR (${t})/"${d}": ${y}`)}let t=0,r=t;const i=[];let s;function o(){s&&i.push(s),s=[]}let u=0,f,d="",m="";function _(){d&&(t===0?s.push({type:0,value:d}):t===1||t===2||t===3?(s.length>1&&(f==="*"||f==="+")&&n(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:d,regexp:m,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):n("Invalid state to consume buffer"),d="")}function b(){d+=f}for(;u<e.length;){if(f=e[u++],f==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:f==="/"?(d&&_(),o()):f===":"?(_(),t=1):b();break;case 4:b(),t=r;break;case 1:f==="("?t=2:WT.test(f)?b():(_(),t=0,f!=="*"&&f!=="?"&&f!=="+"&&u--);break;case 2:f===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+f:t=3:m+=f;break;case 3:_(),t=0,f!=="*"&&f!=="?"&&f!=="+"&&u--,m="";break;default:n("Unknown state");break}}return t===2&&n(`Unfinished custom RegExp for param "${d}"`),_(),o(),i}function KT(e,n,t){const r=GT(ZT(e.path),t),i=ro(r,{record:e,parent:n,children:[],alias:[]});return n&&!i.record.aliasOf==!n.record.aliasOf&&n.children.push(i),i}function YT(e,n){const t=[],r=new Map;n=G_({strict:!1,end:!0,sensitive:!1},n);function i(_){return r.get(_)}function s(_,b,y){const M=!y,k=U_(_);k.aliasOf=y&&y.record;const F=G_(n,_),I=[k];if("alias"in _){const ee=typeof _.alias=="string"?[_.alias]:_.alias;for(const he of ee)I.push(U_(ro({},k,{components:y?y.record.components:k.components,path:he,aliasOf:y?y.record:k})))}let R,Y;for(const ee of I){const{path:he}=ee;if(b&&he[0]!=="/"){const fe=b.record.path,ve=fe[fe.length-1]==="/"?"":"/";ee.path=b.record.path+(he&&ve+he)}if(R=KT(ee,b,F),y?y.alias.push(R):(Y=Y||R,Y!==R&&Y.alias.push(R),M&&_.name&&!V_(R)&&o(_.name)),Z5(R)&&f(R),k.children){const fe=k.children;for(let ve=0;ve<fe.length;ve++)s(fe[ve],R,y&&y.children[ve])}y=y||R}return Y?()=>{o(Y)}:ip}function o(_){if(H5(_)){const b=r.get(_);b&&(r.delete(_),t.splice(t.indexOf(b),1),b.children.forEach(o),b.alias.forEach(o))}else{const b=t.indexOf(_);b>-1&&(t.splice(b,1),_.record.name&&r.delete(_.record.name),_.children.forEach(o),_.alias.forEach(o))}}function u(){return t}function f(_){const b=QT(_,t);t.splice(b,0,_),_.record.name&&!V_(_)&&r.set(_.record.name,_)}function d(_,b){let y,M={},k,F;if("name"in _&&_.name){if(y=r.get(_.name),!y)throw ud(1,{location:_});F=y.record.name,M=ro(z_(b.params,y.keys.filter(Y=>!Y.optional).concat(y.parent?y.parent.keys.filter(Y=>Y.optional):[]).map(Y=>Y.name)),_.params&&z_(_.params,y.keys.map(Y=>Y.name))),k=y.stringify(M)}else if(_.path!=null)k=_.path,y=t.find(Y=>Y.re.test(k)),y&&(M=y.parse(k),F=y.record.name);else{if(y=b.name?r.get(b.name):t.find(Y=>Y.re.test(b.path)),!y)throw ud(1,{location:_,currentLocation:b});F=y.record.name,M=ro({},b.params,_.params),k=y.stringify(M)}const I=[];let R=y;for(;R;)I.unshift(R.record),R=R.parent;return{name:F,path:k,params:M,matched:I,meta:XT(I)}}e.forEach(_=>s(_));function m(){t.length=0,r.clear()}return{addRoute:s,resolve:d,removeRoute:o,clearRoutes:m,getRoutes:u,getRecordMatcher:i}}function z_(e,n){const t={};for(const r of n)r in e&&(t[r]=e[r]);return t}function U_(e){const n={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:JT(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(n,"mods",{value:{}}),n}function JT(e){const n={},t=e.props||!1;if("component"in e)n.default=t;else for(const r in e.components)n[r]=typeof t=="object"?t[r]:t;return n}function V_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function XT(e){return e.reduce((n,t)=>ro(n,t.meta),{})}function G_(e,n){const t={};for(const r in e)t[r]=r in n?n[r]:e[r];return t}function QT(e,n){let t=0,r=n.length;for(;t!==r;){const s=t+r>>1;W5(e,n[s])<0?r=s:t=s+1}const i=e8(e);return i&&(r=n.lastIndexOf(i,r-1)),r}function e8(e){let n=e;for(;n=n.parent;)if(Z5(n)&&W5(e,n)===0)return n}function Z5({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function t8(e){const n={};if(e===""||e==="?")return n;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(j5," "),o=s.indexOf("="),u=Ep(o<0?s:s.slice(0,o)),f=o<0?null:Ep(s.slice(o+1));if(u in n){let d=n[u];Wu(d)||(d=n[u]=[d]),d.push(f)}else n[u]=f}return n}function H_(e){let n="";for(let t in e){const r=e[t];if(t=wT(t),r==null){r!==void 0&&(n+=(n.length?"&":"")+t);continue}(Wu(r)?r.map(s=>s&&i1(s)):[r&&i1(r)]).forEach(s=>{s!==void 0&&(n+=(n.length?"&":"")+t,s!=null&&(n+="="+s))})}return n}function n8(e){const n={};for(const t in e){const r=e[t];r!==void 0&&(n[t]=Wu(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return n}const r8=Symbol(""),q_=Symbol(""),n0=Symbol(""),cy=Symbol(""),s1=Symbol("");function kd(){let e=[];function n(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function t(){e=[]}return{add:n,list:()=>e.slice(),reset:t}}function df(e,n,t,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((u,f)=>{const d=b=>{b===!1?f(ud(4,{from:t,to:n})):b instanceof Error?f(b):zT(b)?f(ud(2,{from:n,to:b})):(o&&r.enterCallbacks[i]===o&&typeof b=="function"&&o.push(b),u())},m=s(()=>e.call(r&&r.instances[i],n,t,d));let _=Promise.resolve(m);e.length<3&&(_=_.then(d)),_.catch(b=>f(b))})}function Q0(e,n,t,r,i=s=>s()){const s=[];for(const o of e)for(const u in o.components){let f=o.components[u];if(!(n!=="beforeRouteEnter"&&!o.instances[u]))if(R5(f)){const m=(f.__vccOpts||f)[n];m&&s.push(df(m,t,r,o,u,i))}else{let d=f();s.push(()=>d.then(m=>{if(!m)throw new Error(`Couldn't resolve component "${u}" at "${o.path}"`);const _=cT(m)?m.default:m;o.mods[u]=m,o.components[u]=_;const y=(_.__vccOpts||_)[n];return y&&df(y,t,r,o,u,i)()}))}}return s}function W_(e){const n=Zl(n0),t=Zl(cy),r=rr(()=>{const f=Kn(e.to);return n.resolve(f)}),i=rr(()=>{const{matched:f}=r.value,{length:d}=f,m=f[d-1],_=t.matched;if(!m||!_.length)return-1;const b=_.findIndex(ld.bind(null,m));if(b>-1)return b;const y=Z_(f[d-2]);return d>1&&Z_(m)===y&&_[_.length-1].path!==y?_.findIndex(ld.bind(null,f[d-2])):b}),s=rr(()=>i.value>-1&&a8(t.params,r.value.params)),o=rr(()=>i.value>-1&&i.value===t.matched.length-1&&V5(t.params,r.value.params));function u(f={}){if(s8(f)){const d=n[Kn(e.replace)?"replace":"push"](Kn(e.to)).catch(ip);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:rr(()=>r.value.href),isActive:s,isExactActive:o,navigate:u}}function i8(e){return e.length===1?e[0]:e}const o8=Qo({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:W_,setup(e,{slots:n}){const t=Jl(W_(e)),{options:r}=Zl(n0),i=rr(()=>({[K_(e.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[K_(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=n.default&&i8(n.default(t));return e.custom?s:Gm("a",{"aria-current":t.isExactActive?e.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),zd=o8;function s8(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const n=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(n))return}return e.preventDefault&&e.preventDefault(),!0}}function a8(e,n){for(const t in n){const r=n[t],i=e[t];if(typeof r=="string"){if(r!==i)return!1}else if(!Wu(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Z_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const K_=(e,n,t)=>e??n??t,l8=Qo({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:n,slots:t}){const r=Zl(s1),i=rr(()=>e.route||r.value),s=Zl(q_,0),o=rr(()=>{let d=Kn(s);const{matched:m}=i.value;let _;for(;(_=m[d])&&!_.components;)d++;return d}),u=rr(()=>i.value.matched[o.value]);ep(q_,rr(()=>o.value+1)),ep(r8,u),ep(s1,i);const f=Ft();return oo(()=>[f.value,u.value,e.name],([d,m,_],[b,y,M])=>{m&&(m.instances[_]=d,y&&y!==m&&d&&d===b&&(m.leaveGuards.size||(m.leaveGuards=y.leaveGuards),m.updateGuards.size||(m.updateGuards=y.updateGuards))),d&&m&&(!y||!ld(m,y)||!b)&&(m.enterCallbacks[_]||[]).forEach(k=>k(d))},{flush:"post"}),()=>{const d=i.value,m=e.name,_=u.value,b=_&&_.components[m];if(!b)return Y_(t.default,{Component:b,route:d});const y=_.props[m],M=y?y===!0?d.params:typeof y=="function"?y(d):y:null,F=Gm(b,ro({},M,n,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(_.instances[m]=null)},ref:f}));return Y_(t.default,{Component:F,route:d})||F}}});function Y_(e,n){if(!e)return null;const t=e(n);return t.length===1?t[0]:t}const K5=l8;function u8(e){const n=YT(e.routes,e),t=e.parseQuery||t8,r=e.stringifyQuery||H_,i=e.history,s=kd(),o=kd(),u=kd(),f=V1(nf);let d=nf;$h&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=J0.bind(null,pe=>""+pe),_=J0.bind(null,LT),b=J0.bind(null,Ep);function y(pe,K){let D,ke;return H5(pe)?(D=n.getRecordMatcher(pe),ke=K):ke=pe,n.addRoute(ke,D)}function M(pe){const K=n.getRecordMatcher(pe);K&&n.removeRoute(K)}function k(){return n.getRoutes().map(pe=>pe.record)}function F(pe){return!!n.getRecordMatcher(pe)}function I(pe,K){if(K=ro({},K||f.value),typeof pe=="string"){const te=X0(t,pe,K.path),ye=n.resolve({path:te.path},K),de=i.createHref(te.fullPath);return ro(te,ye,{params:b(ye.params),hash:Ep(te.hash),redirectedFrom:void 0,href:de})}let D;if(pe.path!=null)D=ro({},pe,{path:X0(t,pe.path,K.path).path});else{const te=ro({},pe.params);for(const ye in te)te[ye]==null&&delete te[ye];D=ro({},pe,{params:_(te)}),K.params=_(K.params)}const ke=n.resolve(D,K),Me=pe.hash||"";ke.params=m(b(ke.params));const Ge=CT(r,ro({},pe,{hash:bT(Me),path:ke.path})),ce=i.createHref(Ge);return ro({fullPath:Ge,hash:Me,query:r===H_?n8(pe.query):pe.query||{}},ke,{redirectedFrom:void 0,href:ce})}function R(pe){return typeof pe=="string"?X0(t,pe,f.value.path):ro({},pe)}function Y(pe,K){if(d!==pe)return ud(8,{from:K,to:pe})}function ee(pe){return ve(pe)}function he(pe){return ee(ro(R(pe),{replace:!0}))}function fe(pe){const K=pe.matched[pe.matched.length-1];if(K&&K.redirect){const{redirect:D}=K;let ke=typeof D=="function"?D(pe):D;return typeof ke=="string"&&(ke=ke.includes("?")||ke.includes("#")?ke=R(ke):{path:ke},ke.params={}),ro({query:pe.query,hash:pe.hash,params:ke.path!=null?{}:pe.params},ke)}}function ve(pe,K){const D=d=I(pe),ke=f.value,Me=pe.state,Ge=pe.force,ce=pe.replace===!0,te=fe(D);if(te)return ve(ro(R(te),{state:typeof te=="object"?ro({},Me,te.state):Me,force:Ge,replace:ce}),K||D);const ye=D;ye.redirectedFrom=K;let de;return!Ge&&PT(r,ke,D)&&(de=ud(16,{to:ye,from:ke}),Te(ke,ke,!0,!1)),(de?Promise.resolve(de):Z(ye,ke)).catch(We=>Dc(We)?Dc(We,2)?We:Ce(We):ie(We,ye,ke)).then(We=>{if(We){if(Dc(We,2))return ve(ro({replace:ce},R(We.to),{state:typeof We.to=="object"?ro({},Me,We.to.state):Me,force:Ge}),K||ye)}else We=N(ye,ke,!0,ce,Me);return T(ye,ke,We),We})}function $(pe,K){const D=Y(pe,K);return D?Promise.reject(D):Promise.resolve()}function U(pe){const K=Q.values().next().value;return K&&typeof K.runWithContext=="function"?K.runWithContext(pe):pe()}function Z(pe,K){let D;const[ke,Me,Ge]=c8(pe,K);D=Q0(ke.reverse(),"beforeRouteLeave",pe,K);for(const te of ke)te.leaveGuards.forEach(ye=>{D.push(df(ye,pe,K))});const ce=$.bind(null,pe,K);return D.push(ce),se(D).then(()=>{D=[];for(const te of s.list())D.push(df(te,pe,K));return D.push(ce),se(D)}).then(()=>{D=Q0(Me,"beforeRouteUpdate",pe,K);for(const te of Me)te.updateGuards.forEach(ye=>{D.push(df(ye,pe,K))});return D.push(ce),se(D)}).then(()=>{D=[];for(const te of Ge)if(te.beforeEnter)if(Wu(te.beforeEnter))for(const ye of te.beforeEnter)D.push(df(ye,pe,K));else D.push(df(te.beforeEnter,pe,K));return D.push(ce),se(D)}).then(()=>(pe.matched.forEach(te=>te.enterCallbacks={}),D=Q0(Ge,"beforeRouteEnter",pe,K,U),D.push(ce),se(D))).then(()=>{D=[];for(const te of o.list())D.push(df(te,pe,K));return D.push(ce),se(D)}).catch(te=>Dc(te,8)?te:Promise.reject(te))}function T(pe,K,D){u.list().forEach(ke=>U(()=>ke(pe,K,D)))}function N(pe,K,D,ke,Me){const Ge=Y(pe,K);if(Ge)return Ge;const ce=K===nf,te=$h?history.state:{};D&&(ke||ce?i.replace(pe.fullPath,ro({scroll:ce&&te&&te.scroll},Me)):i.push(pe.fullPath,Me)),f.value=pe,Te(pe,K,D,ce),Ce()}let O;function z(){O||(O=i.listen((pe,K,D)=>{if(!ue.listening)return;const ke=I(pe),Me=fe(ke);if(Me){ve(ro(Me,{replace:!0,force:!0}),ke).catch(ip);return}d=ke;const Ge=f.value;$h&&OT(B_(Ge.fullPath,D.delta),t0()),Z(ke,Ge).catch(ce=>Dc(ce,12)?ce:Dc(ce,2)?(ve(ro(R(ce.to),{force:!0}),ke).then(te=>{Dc(te,20)&&!D.delta&&D.type===Cp.pop&&i.go(-1,!1)}).catch(ip),Promise.reject()):(D.delta&&i.go(-D.delta,!1),ie(ce,ke,Ge))).then(ce=>{ce=ce||N(ke,Ge,!1),ce&&(D.delta&&!Dc(ce,8)?i.go(-D.delta,!1):D.type===Cp.pop&&Dc(ce,20)&&i.go(-1,!1)),T(ke,Ge,ce)}).catch(ip)}))}let q=kd(),G=kd(),oe;function ie(pe,K,D){Ce(pe);const ke=G.list();return ke.length?ke.forEach(Me=>Me(pe,K,D)):console.error(pe),Promise.reject(pe)}function _e(){return oe&&f.value!==nf?Promise.resolve():new Promise((pe,K)=>{q.add([pe,K])})}function Ce(pe){return oe||(oe=!pe,z(),q.list().forEach(([K,D])=>pe?D(pe):K()),q.reset()),pe}function Te(pe,K,D,ke){const{scrollBehavior:Me}=e;if(!$h||!Me)return Promise.resolve();const Ge=!D&&BT(B_(pe.fullPath,0))||(ke||!D)&&history.state&&history.state.scroll||null;return Us().then(()=>Me(pe,K,Ge)).then(ce=>ce&&IT(ce)).catch(ce=>ie(ce,pe,K))}const J=pe=>i.go(pe);let H;const Q=new Set,ue={currentRoute:f,listening:!0,addRoute:y,removeRoute:M,clearRoutes:n.clearRoutes,hasRoute:F,getRoutes:k,resolve:I,options:e,push:ee,replace:he,go:J,back:()=>J(-1),forward:()=>J(1),beforeEach:s.add,beforeResolve:o.add,afterEach:u.add,onError:G.add,isReady:_e,install(pe){const K=this;pe.component("RouterLink",zd),pe.component("RouterView",K5),pe.config.globalProperties.$router=K,Object.defineProperty(pe.config.globalProperties,"$route",{enumerable:!0,get:()=>Kn(f)}),$h&&!H&&f.value===nf&&(H=!0,ee(i.location).catch(Me=>{}));const D={};for(const Me in nf)Object.defineProperty(D,Me,{get:()=>f.value[Me],enumerable:!0});pe.provide(n0,K),pe.provide(cy,U1(D)),pe.provide(s1,f);const ke=pe.unmount;Q.add(pe),pe.unmount=function(){Q.delete(pe),Q.size<1&&(d=nf,O&&O(),O=null,f.value=nf,H=!1,oe=!1),ke()}}};function se(pe){return pe.reduce((K,D)=>K.then(()=>U(D)),Promise.resolve())}return ue}function c8(e,n){const t=[],r=[],i=[],s=Math.max(n.matched.length,e.matched.length);for(let o=0;o<s;o++){const u=n.matched[o];u&&(e.matched.find(d=>ld(d,u))?r.push(u):t.push(u));const f=e.matched[o];f&&(n.matched.find(d=>ld(d,f))||i.push(f))}return[t,r,i]}function Bp(){return Zl(n0)}function f8(e){return Zl(cy)}const Yl=Dp("notification",()=>{const e=Ft([]),n=Ft(0),t=Ft(null),r=rr(()=>[...e.value].sort((_,b)=>b.timestamp-_.timestamp));function i({type:_,message:b,duration:y=5e3}){const M=++n.value,k=Date.now(),F={id:M,type:_,message:b,duration:y,timestamp:k};return e.value.push(F),t.value=M,y>0&&setTimeout(()=>{d(M)},y),M}const s=(_,b=5e3)=>i({type:"success",message:_,duration:b}),o=(_,b=5e3)=>i({type:"error",message:_,duration:b}),u=(_,b=5e3)=>i({type:"info",message:_,duration:b}),f=(_,b=5e3)=>i({type:"warning",message:_,duration:b});function d(_){const b=e.value.findIndex(y=>y.id===_);b!==-1&&e.value.splice(b,1),t.value===_&&(t.value=null)}function m(){e.value=[],t.value=null}return{notifications:r,lastAddedId:t,addNotification:i,removeNotification:d,clearAll:m,success:s,error:o,info:u,warning:f}}),h8=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:Yl},Symbol.toStringTag,{value:"Module"}));var ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Y5(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function r(){return this instanceof r?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),t}function d8(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var J5=d8,p8=typeof ea=="object"&&ea&&ea.Object===Object&&ea,g8=p8,m8=g8,v8=typeof self=="object"&&self&&self.Object===Object&&self,y8=m8||v8||Function("return this")(),X5=y8,_8=X5,b8=function(){return _8.Date.now()},w8=b8,x8=/\s/;function L8(e){for(var n=e.length;n--&&x8.test(e.charAt(n)););return n}var S8=L8,E8=S8,C8=/^\s+/;function P8(e){return e&&e.slice(0,E8(e)+1).replace(C8,"")}var M8=P8,A8=X5,k8=A8.Symbol,Q5=k8,J_=Q5,ex=Object.prototype,T8=ex.hasOwnProperty,N8=ex.toString,Td=J_?J_.toStringTag:void 0;function D8(e){var n=T8.call(e,Td),t=e[Td];try{e[Td]=void 0;var r=!0}catch{}var i=N8.call(e);return r&&(n?e[Td]=t:delete e[Td]),i}var I8=D8,O8=Object.prototype,B8=O8.toString;function R8(e){return B8.call(e)}var F8=R8,X_=Q5,j8=I8,$8=F8,z8="[object Null]",U8="[object Undefined]",Q_=X_?X_.toStringTag:void 0;function V8(e){return e==null?e===void 0?U8:z8:Q_&&Q_ in Object(e)?j8(e):$8(e)}var G8=V8;function H8(e){return e!=null&&typeof e=="object"}var q8=H8,W8=G8,Z8=q8,K8="[object Symbol]";function Y8(e){return typeof e=="symbol"||Z8(e)&&W8(e)==K8}var J8=Y8,X8=M8,eb=J5,Q8=J8,tb=NaN,eN=/^[-+]0x[0-9a-f]+$/i,tN=/^0b[01]+$/i,nN=/^0o[0-7]+$/i,rN=parseInt;function iN(e){if(typeof e=="number")return e;if(Q8(e))return tb;if(eb(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=eb(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=X8(e);var t=tN.test(e);return t||nN.test(e)?rN(e.slice(2),t?2:8):eN.test(e)?tb:+e}var oN=iN,sN=J5,ev=w8,nb=oN,aN="Expected a function",lN=Math.max,uN=Math.min;function cN(e,n,t){var r,i,s,o,u,f,d=0,m=!1,_=!1,b=!0;if(typeof e!="function")throw new TypeError(aN);n=nb(n)||0,sN(t)&&(m=!!t.leading,_="maxWait"in t,s=_?lN(nb(t.maxWait)||0,n):s,b="trailing"in t?!!t.trailing:b);function y(fe){var ve=r,$=i;return r=i=void 0,d=fe,o=e.apply($,ve),o}function M(fe){return d=fe,u=setTimeout(I,n),m?y(fe):o}function k(fe){var ve=fe-f,$=fe-d,U=n-ve;return _?uN(U,s-$):U}function F(fe){var ve=fe-f,$=fe-d;return f===void 0||ve>=n||ve<0||_&&$>=s}function I(){var fe=ev();if(F(fe))return R(fe);u=setTimeout(I,k(fe))}function R(fe){return u=void 0,b&&r?y(fe):(r=i=void 0,o)}function Y(){u!==void 0&&clearTimeout(u),d=0,r=f=i=u=void 0}function ee(){return u===void 0?o:R(ev())}function he(){var fe=ev(),ve=F(fe);if(r=arguments,i=this,f=fe,ve){if(u===void 0)return M(f);if(_)return clearTimeout(u),u=setTimeout(I,n),y(f)}return u===void 0&&(u=setTimeout(I,n)),o}return he.cancel=Y,he.flush=ee,he}var fN=cN;const hN=fy(fN),dN={class:"relative w-full"},pN={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},gN=["onClick"],rb=Qo({__name:"SearchBar",emits:["select-location"],setup(e,{emit:n}){const t=Ft(""),r=Ft([]),i=n,s=hN(async f=>{if(f.length<3){r.value=[];return}try{const m=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(f)}`)).json();r.value=m}catch(d){console.error("Erreur lors de la recherche d'adresse:",d),r.value=[]}},300);function o(){s(t.value)}function u(f){t.value=f.display_name,r.value=[],i("select-location",{lat:parseFloat(f.lat),lng:parseFloat(f.lon)})}return(f,d)=>(Fe(),Ve("div",dN,[Nn(S("input",{"onUpdate:modelValue":d[0]||(d[0]=m=>t.value=m),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Zr,t.value]]),r.value.length>0?(Fe(),Ve("div",pN,[(Fe(!0),Ve(Mn,null,br(r.value,m=>(Fe(),Ve("div",{key:m.place_id,onClick:_=>u(m),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},It(m.display_name),9,gN))),128))])):nn("",!0)]))}}),mN={class:"perf-title"},vN={class:"perf-basic-stats"},yN={class:"perf-stat"},_N={class:"perf-stat"},bN={class:"perf-expand-btn"},wN={key:0,class:"perf-content"},xN={class:"perf-section"},LN={class:"perf-metrics"},SN={class:"perf-metric"},EN={class:"perf-metric-value"},CN={class:"perf-metric"},PN={class:"perf-metric-value"},MN={class:"perf-metric"},AN={class:"perf-metric-value"},kN={class:"perf-metric"},TN={class:"perf-metric-value"},NN={class:"perf-section"},DN={class:"perf-metrics"},IN={key:0,class:"perf-metric"},ON={class:"perf-metric-value"},BN={key:1,class:"perf-metric"},RN={class:"perf-metric-value"},FN={key:2,class:"perf-metric"},jN={class:"perf-metric-value"},$N={class:"perf-section"},zN={class:"perf-table"},UN={class:"perf-table-cell"},VN={class:"perf-table-cell"},GN={class:"perf-table-cell"},HN={class:"perf-table-cell"},qN=["onClick"],WN={key:0,class:"perf-empty"},ZN=Qo({__name:"PerformancePanel",props:{position:{}},setup(e){const t=e.position||"bottom-left",r=Ft(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:u,memorySnapshots:f,framesPerSecond:d,operationHistory:m,startRecording:_,stopRecording:b,clearRecording:y,captureMemorySnapshot:M,getSlowOperations:k,getPerformanceReport:F,getOperationDetails:I}=vd(),R=rr(()=>{const N=F()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:N.totalMeasures,totalLongTasks:N.totalLongTasks,averageDuration:N.slowestOperations.length>0?N.slowestOperations.reduce((O,z)=>O+z.duration,0)/N.slowestOperations.length:0,fps:N.averageFps,slowestOperations:N.slowestOperations,memoryUsage:N.memoryUsage}}),Y=rr(()=>(F()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(O=>({operation:O.name,component:O.component||"unknown",durationMs:O.duration,timestamp:O.startTime}))),ee=Ft(null);ps(()=>{i.value&&(ee.value=window.setInterval(()=>{M()},1e3))}),Hu(()=>{ee.value!==null&&clearInterval(ee.value)});function he(N){return N===void 0?"N/A":N<1024?N+" B":N<1024*1024?(N/1024).toFixed(2)+" KB":N<1024*1024*1024?(N/(1024*1024)).toFixed(2)+" MB":(N/(1024*1024*1024)).toFixed(2)+" GB"}function fe(N){return N.toFixed(2)}const ve=()=>{M()};function $(){const N=F(),O="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(N,null,2)),z=document.createElement("a");z.setAttribute("href",O),z.setAttribute("download","performance_report.json"),document.body.appendChild(z),z.click(),z.remove()}function U(){y(),ve()}function Z(){const N=F();navigator.clipboard.writeText(JSON.stringify(N,null,2)).then(()=>{alert("Donnes de performance copies dans le presse-papiers")}).catch(O=>{console.error("Erreur lors de la copie des donnes",O),alert("Erreur lors de la copie des donnes")})}async function T(N){const O=I(N.operation,N.timestamp);if(!O){alert("Impossible de trouver les dtails de cette opration");return}const z={operation:{...O.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(O.operation.startTime).toISOString()},context:{...O.context,relatedOperations:O.context.relatedOperations.map(q=>({...q,startTime:`+${q.startTime.toFixed(2)}ms`})),longTasks:O.context.longTasks.map(q=>({...q,startTime:`+${q.startTime.toFixed(2)}ms`})),memorySnapshots:O.context.memorySnapshots.map(q=>({...q,timestamp:`+${q.timestamp.toFixed(2)}ms`,usedJSHeapSize:q.usedJSHeapSize?he(q.usedJSHeapSize):"N/A",totalJSHeapSize:q.totalJSHeapSize?he(q.totalJSHeapSize):"N/A"}))},summary:{...O.summary,memoryDelta:he(O.summary.memoryDelta),maxLongTaskDuration:`${O.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(z,null,2)),alert("Dtails de l'opration copis dans le presse-papiers")}catch(q){console.error("Erreur lors de la copie des dtails",q),alert("Erreur lors de la copie des dtails")}}return(N,O)=>{var z,q,G,oe,ie,_e;return Kn(i)?(Fe(),Ve("div",{key:0,class:Gi(["performance-panel",`position-${Kn(t)}`,{expanded:r.value}])},[S("div",{class:"perf-header",onClick:O[0]||(O[0]=Ce=>r.value=!r.value)},[S("div",mN,[S("div",{class:Gi(["perf-indicator",{active:Kn(s)}])},null,2),O[1]||(O[1]=S("span",null,"Performance",-1))]),S("div",vN,[S("span",yN,It(R.value.fps)+" FPS",1),S("span",_N,It(fe(R.value.averageDuration))+"ms",1)]),S("button",bN,It(r.value?"":""),1)]),r.value?(Fe(),Ve("div",wN,[S("div",xN,[O[6]||(O[6]=S("h3",null,"Mtriques gnrales",-1)),S("div",LN,[S("div",SN,[O[2]||(O[2]=S("span",{class:"perf-metric-label"},"Mesures",-1)),S("span",EN,It(R.value.totalMeasures),1)]),S("div",CN,[O[3]||(O[3]=S("span",{class:"perf-metric-label"},"Tches longues",-1)),S("span",PN,It(R.value.totalLongTasks),1)]),S("div",MN,[O[4]||(O[4]=S("span",{class:"perf-metric-label"},"Dure moyenne",-1)),S("span",AN,It(fe(R.value.averageDuration))+"ms",1)]),S("div",kN,[O[5]||(O[5]=S("span",{class:"perf-metric-label"},"FPS",-1)),S("span",TN,It(R.value.fps),1)])])]),S("div",NN,[O[10]||(O[10]=S("h3",null,"Mmoire",-1)),S("div",DN,[((z=R.value.memoryUsage)==null?void 0:z.usedJSHeapSize)!==void 0?(Fe(),Ve("div",IN,[O[7]||(O[7]=S("span",{class:"perf-metric-label"},"Utilise",-1)),S("span",ON,It(he((q=R.value.memoryUsage)==null?void 0:q.usedJSHeapSize)),1)])):nn("",!0),((G=R.value.memoryUsage)==null?void 0:G.totalJSHeapSize)!==void 0?(Fe(),Ve("div",BN,[O[8]||(O[8]=S("span",{class:"perf-metric-label"},"Totale",-1)),S("span",RN,It(he((oe=R.value.memoryUsage)==null?void 0:oe.totalJSHeapSize)),1)])):nn("",!0),((ie=R.value.memoryUsage)==null?void 0:ie.jsHeapSizeLimit)!==void 0?(Fe(),Ve("div",FN,[O[9]||(O[9]=S("span",{class:"perf-metric-label"},"Limite",-1)),S("span",jN,It(he((_e=R.value.memoryUsage)==null?void 0:_e.jsHeapSizeLimit)),1)])):nn("",!0)])]),S("div",$N,[O[13]||(O[13]=S("h3",null,"Oprations les plus lentes",-1)),S("div",zN,[O[12]||(O[12]=zu('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opration</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Dure</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Fe(!0),Ve(Mn,null,br(Y.value,Ce=>(Fe(),Ve("div",{class:"perf-table-row",key:Ce.timestamp},[S("div",UN,It(Ce.operation),1),S("div",VN,It(Ce.component),1),S("div",GN,It(fe(Ce.durationMs))+"ms",1),S("div",HN,[S("button",{onClick:Te=>T(Ce),class:"perf-action-button",title:"Copier les dtails"},O[11]||(O[11]=[S("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,qN)])]))),128)),Y.value.length===0?(Fe(),Ve("div",WN," Aucune opration enregistre ")):nn("",!0)])]),S("div",{class:"perf-actions"},[S("button",{onClick:U,class:"perf-button"}," Rinitialiser "),S("button",{onClick:$,class:"perf-button"}," Tlcharger "),S("button",{onClick:Z,class:"perf-button"}," Copier ")])])):nn("",!0)],2)):nn("",!0)}}}),hh=(e,n)=>{const t=e.__vccOpts||e;for(const[r,i]of n)t[r]=i;return t},KN=hh(ZN,[["__scopeId","data-v-fefe39b0"]]),YN={class:"h-screen flex flex-col"},JN={key:0,class:"bg-white shadow-sm z-[2500] flex-shrink-0"},XN={class:"mx-auto px-4 sm:px-6 lg:px-8"},QN={class:"flex h-16 items-center justify-between"},eD={class:"flex items-center"},tD={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},nD={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},rD={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},iD={class:"hidden md:flex md:ml-6 space-x-8"},oD={key:0,class:"flex-1 mx-2"},sD={class:"hidden md:block"},aD={class:"md:hidden"},lD={key:1,class:"flex-1"},uD={class:"flex items-center space-x-2 md:space-x-4"},cD={key:0,class:"hidden md:flex items-center justify-center p-2 text-amber-500 hover:text-amber-600 rounded-full hover:bg-amber-50 focus:outline-none focus:ring-2 focus:ring-amber-400",title:"Performance active"},fD={class:"relative"},hD={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},dD={class:"flex items-center justify-between w-full"},pD={class:"flex items-center space-x-3"},gD={class:"max-h-72 overflow-y-auto"},mD={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},vD={class:"flex items-start"},yD={class:"flex-shrink-0 mr-3"},_D={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},bD={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},wD={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},xD={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},LD={class:"flex-1"},SD={class:"text-sm md:text-sm text-gray-800"},ED=["onClick"],CD={class:"relative"},PD={class:"hidden md:flex flex-col items-end"},MD={class:"text-sm font-medium text-gray-700"},AD={key:0,class:"text-xs text-gray-500"},kD=["src","alt"],TD={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},ND={class:"text-sm font-semibold text-gray-700"},DD={class:"text-xs text-gray-500"},ID={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},OD={class:"space-y-1 px-2 pb-3 pt-2"},BD=Qo({__name:"App",setup(e){const n=Bp(),t=ta(),r=Yl(),{isQueryParamEnabled:i}=vd(),s=Ft(!1),o=Ft(!1),u=Ft(!1),f=Ft(!1),d=Ft(null),m=Ft(!1),_=Ft(!1),b=Ft(null),y=Ft("13px"),M=Ft("65px");function k(){_.value=window.innerWidth<768}ps(()=>{k(),window.addEventListener("resize",k),window.addEventListener("resize",F)}),fh(()=>{window.removeEventListener("resize",k),window.removeEventListener("resize",F)});function F(){if(!b.value)return;const O=b.value.getBoundingClientRect();y.value=`${O.top+window.scrollY+5}px`;const z=O.left+O.width/2;M.value=`${window.innerWidth-z-22}px`}const I=rr(()=>{const O=t.user;if(!O)return"";const z=`${O.first_name} ${O.last_name.toUpperCase()}`;return O.company_name?`${z} (${O.company_name})`:z}),R=rr(()=>{var z;switch((z=t.user)==null?void 0:z.user_type){case"admin":return"Accs administrateur";case"entreprise":return"Accs entreprise";case"salarie":return"Accs salarie";case"visiteur":return"Accs visiteur";default:return""}}),Y=rr(()=>{var O;return((O=t.user)==null?void 0:O.user_type)==="admin"}),ee=rr(()=>t.isAuthenticated),he=[{name:"Carte",to:"/"},{name:"Mto",to:"/meteo"},{name:"Notes",to:"/notes"}],fe=rr(()=>{var z;if(!ee.value)return[];const O=[...he];return(Y.value||((z=t.user)==null?void 0:z.user_type)==="entreprise")&&O.push({name:"Utilisateurs",to:"/users"}),O}),ve=rr(()=>ee.value?[{name:"Mon profil",to:"/profile"}]:[]);async function $(){try{await t.logout(),n.push("/login")}catch(O){console.error("Erreur lors de la dconnexion:",O)}}function U(O){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:O.lat,lng:O.lng,zoom:16}}))}ps(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await t.checkAuth(),await t.fetchUserProfile();const z=localStorage.getItem("lastPlanId");z&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:z}}))}else console.log("No token found")}catch(O){console.error("Auth check error:",O),n.push("/login")}});const Z=rr(()=>{const O="TagMap";if(!ee.value)return`${O} - Connexion`;const z=n.currentRoute.value,G={home:"Carte",meteo:"Mto",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[z.name]||"";return G?`${O} - ${G}`:O});oo(Z,O=>{document.title=O},{immediate:!0});const T=rr(()=>r.notifications.length);function N(){r.clearAll(),u.value=!1}return wp(()=>{if(r.lastAddedId!==null){const O=r.notifications.find(z=>z.id===r.lastAddedId);O&&Us(()=>{F(),f.value=!0,d.value={id:O.id,message:O.message,type:O.type},requestAnimationFrame(()=>{setTimeout(()=>{m.value=!0,setTimeout(()=>{m.value=!1,setTimeout(()=>{var z;((z=d.value)==null?void 0:z.id)===O.id&&(d.value=null,f.value=!1)},300)},4e3)},50)})})}}),(O,z)=>{var q;return Fe(),Ve("div",YN,[ee.value?(Fe(),Ve("header",JN,[S("nav",XN,[S("div",QN,[S("div",eD,[S("button",{onClick:z[0]||(z[0]=G=>o.value=!o.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[z[7]||(z[7]=S("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Fe(),Ve("svg",tD,[o.value?(Fe(),Ve("path",rD)):(Fe(),Ve("path",nD))]))]),pi(Kn(zd),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:gu(()=>z[8]||(z[8]=[S("span",{class:"md:inline hidden"},"TagMap",-1),S("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),S("div",iD,[(Fe(!0),Ve(Mn,null,br(fe.value,G=>(Fe(),il(Kn(zd),{key:G.name,to:G.to,class:Gi(["text-sm font-medium transition-colors duration-200",[O.$route.path===G.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:gu(()=>[ii(It(G.name),1)]),_:2},1032,["to","class"]))),128))])]),O.$route.path==="/"?(Fe(),Ve("div",oD,[S("div",sD,[pi(rb,{onSelectLocation:U})]),S("div",aD,[pi(rb,{onSelectLocation:U,class:"max-w-full"})])])):(Fe(),Ve("div",lD)),S("div",uD,[Kn(i)?(Fe(),Ve("button",cD,z[9]||(z[9]=[S("span",{class:"sr-only"},"Performance",-1),S("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]))):nn("",!0),S("div",fD,[S("button",{ref_key:"bellButtonRef",ref:b,onClick:z[1]||(z[1]=G=>u.value=!u.value),class:Gi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":f.value}])},z[10]||(z[10]=[S("span",{class:"sr-only"},"Voir les notifications",-1),S("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),u.value?(Fe(),Ve("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:El(_.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[S("div",hD,[S("div",dD,[z[12]||(z[12]=S("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),S("div",pD,[T.value>0?(Fe(),Ve("button",{key:0,onClick:N,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):nn("",!0),S("button",{onClick:z[2]||(z[2]=G=>u.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},z[11]||(z[11]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),S("div",gD,[T.value===0?(Fe(),Ve("div",mD," Aucune notification ")):nn("",!0),(Fe(!0),Ve(Mn,null,br(Kn(r).notifications,G=>(Fe(),Ve("div",{key:G.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[S("div",vD,[S("div",yD,[G.type==="success"?(Fe(),Ve("svg",_D,z[13]||(z[13]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):G.type==="error"?(Fe(),Ve("svg",bD,z[14]||(z[14]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):G.type==="warning"?(Fe(),Ve("svg",wD,z[15]||(z[15]=[S("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Fe(),Ve("svg",xD,z[16]||(z[16]=[S("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),S("div",LD,[S("p",SD,It(G.message),1),S("button",{onClick:oe=>Kn(r).removeNotification(G.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,ED)])])]))),128))])],4)):nn("",!0)]),S("div",CD,[S("button",{onClick:z[3]||(z[3]=G=>s.value=!s.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[S("div",PD,[S("span",MD,It(I.value),1),R.value?(Fe(),Ve("span",AD,It(R.value),1)):nn("",!0)]),S("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((q=Kn(t).user)==null?void 0:q.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(I.value),alt:I.value},null,8,kD)]),s.value?(Fe(),Ve("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:El(_.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[S("div",TD,[S("div",null,[S("div",ND,It(I.value),1),S("div",DD,It(R.value),1)]),S("button",{onClick:z[4]||(z[4]=G=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},z[17]||(z[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Fe(!0),Ve(Mn,null,br(ve.value,G=>(Fe(),il(Kn(zd),{key:G.name,to:G.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:z[5]||(z[5]=oe=>s.value=!1)},{default:gu(()=>[ii(It(G.name),1)]),_:2},1032,["to"]))),128)),S("button",{onClick:$,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Dconnexion ")],4)):nn("",!0)])])]),o.value?(Fe(),Ve("div",ID,[S("div",OD,[(Fe(!0),Ve(Mn,null,br(fe.value,G=>(Fe(),il(Kn(zd),{key:G.name,to:G.to,class:Gi(["block px-3 py-2 rounded-md text-base font-medium",[O.$route.path===G.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:z[6]||(z[6]=oe=>o.value=!1)},{default:gu(()=>[ii(It(G.name),1)]),_:2},1032,["to","class"]))),128))])])):nn("",!0)])])):nn("",!0),S("main",{class:Gi([O.$route.path==="/"&&!_.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[pi(Kn(K5))],2),pi(KN,{position:"bottom-left"})])}}}),RD="modulepreload",FD=function(e){return"/static/frontend/"+e},ib={},mf=function(n,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(f=>{if(f=FD(f),f in ib)return;ib[f]=!0;const d=f.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const _=document.createElement("link");if(_.rel=d?"stylesheet":RD,d||(_.as="script"),_.crossOrigin="",_.href=f,u&&_.setAttribute("nonce",u),document.head.appendChild(_),d)return new Promise((b,y)=>{_.addEventListener("load",b),_.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return i.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return n().catch(s)})},jD={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},$D={class:"max-w-md w-full space-y-8"},zD={class:"space-y-4"},UD={class:"mt-1"},VD={class:"mt-1"},GD={class:"mt-1"},HD={key:0,class:"rounded-md bg-red-50 p-4"},qD={class:"flex"},WD={class:"ml-3"},ZD={class:"text-sm font-medium text-red-800"},KD={key:1,class:"rounded-md bg-yellow-50 p-4"},YD={class:"flex"},JD={class:"ml-3"},XD={class:"mt-2 text-sm text-yellow-700"},QD={class:"list-disc pl-5 space-y-1"},e7=["disabled"],t7={class:"absolute left-0 inset-y-0 flex items-center pl-3"},n7={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r7={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},i7=Qo({__name:"ChangePasswordForm",setup(e){const n=Bp(),t=ta(),r=Jl({oldPassword:"",newPassword:"",confirmPassword:""}),i=Ft(!1),s=Ft("");ps(()=>{var d,m;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:t.isAuthenticated,userId:(d=t.user)==null?void 0:d.id,mustChangePassword:(m=t.user)==null?void 0:m.must_change_password})});const o=rr(()=>{const d=[];return r.newPassword&&r.newPassword.length<8&&d.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&d.push("Les mots de passe ne correspondent pas"),d}),u=rr(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function f(){var d,m,_,b,y,M,k,F;if(!u.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((d=t.user)!=null&&d.id)){s.value="Erreur : utilisateur non identifi";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await t.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),n.push("/")}catch(I){console.error("Password change failed:",I),(_=(m=I.response)==null?void 0:m.data)!=null&&_.detail?s.value=I.response.data.detail:(y=(b=I.response)==null?void 0:b.data)!=null&&y.old_password?s.value=I.response.data.old_password[0]:(k=(M=I.response)==null?void 0:M.data)!=null&&k.password?s.value=I.response.data.password[0]:((F=I.response)==null?void 0:F.status)===401?(s.value="Session expire, veuillez vous reconnecter",await t.logout(),n.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(d,m)=>(Fe(),Ve("div",jD,[S("div",$D,[m[12]||(m[12]=S("div",null,[S("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),S("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),S("form",{class:"mt-8 space-y-6",onSubmit:Gc(f,["prevent"])},[S("div",zD,[S("div",null,[m[3]||(m[3]=S("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),S("div",UD,[Nn(S("input",{id:"old-password","onUpdate:modelValue":m[0]||(m[0]=_=>r.oldPassword=_),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Zr,r.oldPassword]])])]),S("div",null,[m[4]||(m[4]=S("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),S("div",VD,[Nn(S("input",{id:"new-password","onUpdate:modelValue":m[1]||(m[1]=_=>r.newPassword=_),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Zr,r.newPassword]])]),m[5]||(m[5]=S("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),S("div",null,[m[6]||(m[6]=S("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),S("div",GD,[Nn(S("input",{id:"confirm-password","onUpdate:modelValue":m[2]||(m[2]=_=>r.confirmPassword=_),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Zr,r.confirmPassword]])])])]),s.value?(Fe(),Ve("div",HD,[S("div",qD,[m[7]||(m[7]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",WD,[S("h3",ZD,It(s.value),1)])])])):nn("",!0),o.value.length>0?(Fe(),Ve("div",KD,[S("div",YD,[m[9]||(m[9]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),S("div",JD,[m[8]||(m[8]=S("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),S("div",XD,[S("ul",QD,[(Fe(!0),Ve(Mn,null,br(o.value,(_,b)=>(Fe(),Ve("li",{key:b},It(_),1))),128))])])])])])):nn("",!0),S("div",null,[S("button",{type:"submit",disabled:i.value||!u.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[S("span",t7,[i.value?(Fe(),Ve("svg",r7,m[11]||(m[11]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Fe(),Ve("svg",n7,m[10]||(m[10]=[S("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),ii(" "+It(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,e7)])],32)])]))}}),o7="/static/frontend/assets/background.svg",s7={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},a7={class:"container mx-auto relative z-10"},l7={class:"sm:mx-auto sm:w-full sm:max-w-md"},u7={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},c7={key:0,class:"rounded-md bg-red-50 p-4"},f7={class:"flex"},h7={class:"ml-3"},d7={class:"text-sm font-medium text-red-800"},p7={class:"mt-1"},g7={class:"mt-1 relative"},m7=["type"],v7={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},y7={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},_7={class:"flex items-center justify-between"},b7={class:"flex items-center"},w7={class:"text-sm"},x7=["disabled"],L7={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},S7={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},E7={class:"mt-12"},C7={class:"flex flex-wrap justify-center gap-2 mb-8"},P7=["onClick"],M7={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},A7={class:"flex items-center mb-4"},k7={class:"text-2xl mr-2"},T7={class:"text-xl font-semibold text-gray-900"},N7={class:"text-gray-600 text-sm"},D7={key:0,class:"flex justify-center mt-8 gap-2"},I7=["onClick"],tv=6,O7=Qo({__name:"LoginView",setup(e){const n=Bp(),t=ta(),r=Ft(!1),i=Ft(null),s=Ft(!1),o=Ft("Tous"),u=Ft(1),f=Jl({username:"",password:"",rememberMe:!1}),d=[{type:"Liniculteur",sector:"Agriculture",icon:"",text:"En tant qu'entreprise, j'ai mis en place un sous-compte  agriculteur  permettant la golocalisation des parcelles. Cela offre  nos salaris et prestataires une visibilit complte sur l'ensemble des parcelles et facilite leur accs. De plus, ils peuvent y ajouter des notes et des photos si ncessaire. Grce aux trackers, nous renforons galement la scurit de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrler l'accs de nos salaris aux diffrentes tches."},{type:"Agence de voyage",sector:"Tourisme",icon:"",text:"L'outil nous permet de crer gratuitement et sans limite des sous-comptes clients, d'tablir des itinraires personnaliss avec des points d'intrt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"",text:"Nous disposons d'un compte entreprise avec des sous-comptes ddis  chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grce aux stations mto connectes, nous optimisons la gestion des tours d'irrigation par secteur gographique en fonction des prcipitations."},{type:"Conseil municipal",sector:"Collectivit",icon:"",text:"Cette solution nous permet de gagner en efficacit dans la gestion des tches  raliser, en les golocalisant et en offrant  nos employs communaux la possibilit d'ajouter des commentaires et des photos sur chaque tche gorfrence."},{type:"Location de matriel",sector:"Services",icon:"",text:"Cette solution nous permet de golocaliser notre flotte grce  des trackers sans abonnement, avec uniquement un abonnement  la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"",text:"J'ai quip tous mes canons d'enrouleurs de trackers et de camras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"",text:"Nous assurons la golocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"",text:"Nous avons golocalis tous les forages de nos clients et ajout en commentaire la procdure d'entre, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"",text:"Nous golocalisons tous nos chantiers et ajoutons une photo du chantier termin en commentaire, servant de preuve en cas de litige."}],m=rr(()=>["Tous",...new Set(d.map(k=>k.sector))]),_=rr(()=>{let M=o.value==="Tous"?d:d.filter(I=>I.sector===o.value);const k=(u.value-1)*tv,F=k+tv;return M.slice(k,F)}),b=rr(()=>{const M=o.value==="Tous"?d:d.filter(k=>k.sector===o.value);return Math.ceil(M.length/tv)});ps(async()=>{var M;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((M=window.INITIAL_STATE)!=null&&M.isAuthenticated){console.log("User is authenticated, redirecting to home"),n.push("/");return}await t.restoreSession()&&(console.log("Session restored, redirecting to home"),n.push("/"))}catch(k){console.error("Error during initialization:",k),i.value=null}});async function y(){var M,k,F,I,R,Y,ee,he,fe;r.value=!0,i.value=null;try{if(!f.username||!f.password){i.value="Veuillez remplir tous les champs";return}await t.login(f.username,f.password),(M=t.user)!=null&&M.must_change_password?n.push("/change-password"):n.push("/")}catch(ve){console.error("Login error:",ve),((k=ve==null?void 0:ve.response)==null?void 0:k.status)===500?i.value="Le service est temporairement indisponible. Veuillez ressayer dans quelques instants.":((F=ve==null?void 0:ve.response)==null?void 0:F.status)===401||((I=ve==null?void 0:ve.response)==null?void 0:I.status)===403?i.value="Identifiants incorrects. Veuillez vrifier votre nom d'utilisateur et mot de passe.":(Y=(R=ve==null?void 0:ve.response)==null?void 0:R.data)!=null&&Y.detail?i.value=ve.response.data.detail:(fe=(he=(ee=ve==null?void 0:ve.response)==null?void 0:ee.data)==null?void 0:he.non_field_errors)!=null&&fe[0]?i.value=ve.response.data.non_field_errors[0]:(ve==null?void 0:ve.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vrifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez ressayer."}finally{r.value=!1}}return(M,k)=>{const F=Yw("router-link");return Fe(),Ve("div",s7,[S("div",{class:"fixed inset-0 z-0",style:El({backgroundImage:`url(${Kn(o7)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),k[16]||(k[16]=S("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),S("div",a7,[S("div",l7,[S("div",u7,[k[12]||(k[12]=S("div",{class:"text-center mb-8"},[S("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),S("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),S("form",{class:"space-y-6",onSubmit:Gc(y,["prevent"])},[i.value?(Fe(),Ve("div",c7,[S("div",f7,[k[4]||(k[4]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",h7,[S("h3",d7,It(i.value),1)])])])):nn("",!0),S("div",null,[k[5]||(k[5]=S("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),S("div",p7,[Nn(S("input",{id:"username","onUpdate:modelValue":k[0]||(k[0]=I=>f.username=I),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Zr,f.username]])])]),S("div",null,[k[8]||(k[8]=S("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),S("div",g7,[Nn(S("input",{id:"password","onUpdate:modelValue":k[1]||(k[1]=I=>f.password=I),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,m7),[[iy,f.password]]),S("button",{type:"button",onClick:k[2]||(k[2]=I=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Fe(),Ve("svg",v7,k[6]||(k[6]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Fe(),Ve("svg",y7,k[7]||(k[7]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),S("div",_7,[S("div",b7,[Nn(S("input",{id:"remember-me","onUpdate:modelValue":k[3]||(k[3]=I=>f.rememberMe=I),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[xl,f.rememberMe]]),k[9]||(k[9]=S("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),S("div",w7,[pi(F,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:gu(()=>k[10]||(k[10]=[ii(" Mot de passe oubli ? ")])),_:1})])]),S("div",null,[S("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Fe(),Ve("svg",L7,k[11]||(k[11]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),ii(" "+It(r.value?"Connexion en cours...":"Se connecter"),1)],8,x7)])],32)])]),S("div",S7,[k[14]||(k[14]=zu('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>quipements Connects sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32></div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Golocalisez et scurisez votre matriel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32></div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station mto</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos dcisions avec des donnes en temps rel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive o tout est sous contrle ! Tout est centralis, organis et accessible en un clin d&#39;il !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Rel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;quipe simplifi : Collaborez en temps rel sur une interface ultra-intuitive. Vos quipes restent synchronises et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accs Scuris</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accs scuris et intelligent : Grez les droits d&#39;accs de vos salaris et prestataires en un clic.</p></div></div>',2)),S("div",E7,[k[13]||(k[13]=S("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),S("div",C7,[(Fe(!0),Ve(Mn,null,br(m.value,I=>(Fe(),Ve("button",{key:I,onClick:R=>o.value=I,class:Gi(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===I?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},It(I),11,P7))),128))]),S("div",M7,[(Fe(!0),Ve(Mn,null,br(_.value,I=>(Fe(),Ve("div",{key:I.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[S("div",A7,[S("span",k7,It(I.icon),1),S("span",T7,It(I.type),1)]),S("p",N7,It(I.text),1)]))),128))]),b.value>1?(Fe(),Ve("div",D7,[(Fe(!0),Ve(Mn,null,br(b.value,I=>(Fe(),Ve("button",{key:I,onClick:R=>u.value=I,class:Gi(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",u.value===I?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},It(I),11,I7))),128))])):nn("",!0)])]),k[15]||(k[15]=S("div",{class:"h-16"},null,-1))])])}}}),B7=hh(O7,[["__scopeId","data-v-9ff7ee32"]]),ob="/static/frontend/assets/logo.svg";var a1={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,n){(function(t,r){r(n)})(ea,function(t){var r="1.9.4";function i(a){var p,E,V,ae;for(E=1,V=arguments.length;E<V;E++){ae=arguments[E];for(p in ae)a[p]=ae[p]}return a}var s=Object.create||function(){function a(){}return function(p){return a.prototype=p,new a}}();function o(a,p){var E=Array.prototype.slice;if(a.bind)return a.bind.apply(a,E.call(arguments,1));var V=E.call(arguments,2);return function(){return a.apply(p,V.length?V.concat(E.call(arguments)):arguments)}}var u=0;function f(a){return"_leaflet_id"in a||(a._leaflet_id=++u),a._leaflet_id}function d(a,p,E){var V,ae,Se,st;return st=function(){V=!1,ae&&(Se.apply(E,ae),ae=!1)},Se=function(){V?ae=arguments:(a.apply(E,arguments),setTimeout(st,p),V=!0)},Se}function m(a,p,E){var V=p[1],ae=p[0],Se=V-ae;return a===V&&E?a:((a-ae)%Se+Se)%Se+ae}function _(){return!1}function b(a,p){if(p===!1)return a;var E=Math.pow(10,p===void 0?6:p);return Math.round(a*E)/E}function y(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function M(a){return y(a).split(/\s+/)}function k(a,p){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?s(a.options):{});for(var E in p)a.options[E]=p[E];return a.options}function F(a,p,E){var V=[];for(var ae in a)V.push(encodeURIComponent(E?ae.toUpperCase():ae)+"="+encodeURIComponent(a[ae]));return(!p||p.indexOf("?")===-1?"?":"&")+V.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function R(a,p){return a.replace(I,function(E,V){var ae=p[V];if(ae===void 0)throw new Error("No value provided for variable "+E);return typeof ae=="function"&&(ae=ae(p)),ae})}var Y=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function ee(a,p){for(var E=0;E<a.length;E++)if(a[E]===p)return E;return-1}var he="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function fe(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var ve=0;function $(a){var p=+new Date,E=Math.max(0,16-(p-ve));return ve=p+E,window.setTimeout(a,E)}var U=window.requestAnimationFrame||fe("RequestAnimationFrame")||$,Z=window.cancelAnimationFrame||fe("CancelAnimationFrame")||fe("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function T(a,p,E){if(E&&U===$)a.call(p);else return U.call(window,o(a,p))}function N(a){a&&Z.call(window,a)}var O={__proto__:null,extend:i,create:s,bind:o,get lastId(){return u},stamp:f,throttle:d,wrapNum:m,falseFn:_,formatNum:b,trim:y,splitWords:M,setOptions:k,getParamString:F,template:R,isArray:Y,indexOf:ee,emptyImageUrl:he,requestFn:U,cancelFn:Z,requestAnimFrame:T,cancelAnimFrame:N};function z(){}z.extend=function(a){var p=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},E=p.__super__=this.prototype,V=s(E);V.constructor=p,p.prototype=V;for(var ae in this)Object.prototype.hasOwnProperty.call(this,ae)&&ae!=="prototype"&&ae!=="__super__"&&(p[ae]=this[ae]);return a.statics&&i(p,a.statics),a.includes&&(q(a.includes),i.apply(null,[V].concat(a.includes))),i(V,a),delete V.statics,delete V.includes,V.options&&(V.options=E.options?s(E.options):{},i(V.options,a.options)),V._initHooks=[],V.callInitHooks=function(){if(!this._initHooksCalled){E.callInitHooks&&E.callInitHooks.call(this),this._initHooksCalled=!0;for(var Se=0,st=V._initHooks.length;Se<st;Se++)V._initHooks[Se].call(this)}},p},z.include=function(a){var p=this.prototype.options;return i(this.prototype,a),a.options&&(this.prototype.options=p,this.mergeOptions(a.options)),this},z.mergeOptions=function(a){return i(this.prototype.options,a),this},z.addInitHook=function(a){var p=Array.prototype.slice.call(arguments,1),E=typeof a=="function"?a:function(){this[a].apply(this,p)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(E),this};function q(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=Y(a)?a:[a];for(var p=0;p<a.length;p++)a[p]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(a,p,E){if(typeof a=="object")for(var V in a)this._on(V,a[V],p);else{a=M(a);for(var ae=0,Se=a.length;ae<Se;ae++)this._on(a[ae],p,E)}return this},off:function(a,p,E){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var V in a)this._off(V,a[V],p);else{a=M(a);for(var ae=arguments.length===1,Se=0,st=a.length;Se<st;Se++)ae?this._off(a[Se]):this._off(a[Se],p,E)}return this},_on:function(a,p,E,V){if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}if(this._listens(a,p,E)===!1){E===this&&(E=void 0);var ae={fn:p,ctx:E};V&&(ae.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(ae)}},_off:function(a,p,E){var V,ae,Se;if(this._events&&(V=this._events[a],!!V)){if(arguments.length===1){if(this._firingCount)for(ae=0,Se=V.length;ae<Se;ae++)V[ae].fn=_;delete this._events[a];return}if(typeof p!="function"){console.warn("wrong listener type: "+typeof p);return}var st=this._listens(a,p,E);if(st!==!1){var At=V[st];this._firingCount&&(At.fn=_,this._events[a]=V=V.slice()),V.splice(st,1)}}},fire:function(a,p,E){if(!this.listens(a,E))return this;var V=i({},p,{type:a,target:this,sourceTarget:p&&p.sourceTarget||this});if(this._events){var ae=this._events[a];if(ae){this._firingCount=this._firingCount+1||1;for(var Se=0,st=ae.length;Se<st;Se++){var At=ae[Se],Gt=At.fn;At.once&&this.off(a,Gt,At.ctx),Gt.call(At.ctx||this,V)}this._firingCount--}}return E&&this._propagateEvent(V),this},listens:function(a,p,E,V){typeof a!="string"&&console.warn('"string" type argument expected');var ae=p;typeof p!="function"&&(V=!!p,ae=void 0,E=void 0);var Se=this._events&&this._events[a];if(Se&&Se.length&&this._listens(a,ae,E)!==!1)return!0;if(V){for(var st in this._eventParents)if(this._eventParents[st].listens(a,p,E,V))return!0}return!1},_listens:function(a,p,E){if(!this._events)return!1;var V=this._events[a]||[];if(!p)return!!V.length;E===this&&(E=void 0);for(var ae=0,Se=V.length;ae<Se;ae++)if(V[ae].fn===p&&V[ae].ctx===E)return ae;return!1},once:function(a,p,E){if(typeof a=="object")for(var V in a)this._on(V,a[V],p,!0);else{a=M(a);for(var ae=0,Se=a.length;ae<Se;ae++)this._on(a[ae],p,E,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[f(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[f(a)],this},_propagateEvent:function(a){for(var p in this._eventParents)this._eventParents[p].fire(a.type,i({layer:a.target,propagatedFrom:a.target},a),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var oe=z.extend(G);function ie(a,p,E){this.x=E?Math.round(a):a,this.y=E?Math.round(p):p}var _e=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(a){return this.clone()._add(Ce(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Ce(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new ie(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new ie(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(a){a=Ce(a);var p=a.x-this.x,E=a.y-this.y;return Math.sqrt(p*p+E*E)},equals:function(a){return a=Ce(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=Ce(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function Ce(a,p,E){return a instanceof ie?a:Y(a)?new ie(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new ie(a.x,a.y):new ie(a,p,E)}function Te(a,p){if(a)for(var E=p?[a,p]:a,V=0,ae=E.length;V<ae;V++)this.extend(E[V])}Te.prototype={extend:function(a){var p,E;if(!a)return this;if(a instanceof ie||typeof a[0]=="number"||"x"in a)p=E=Ce(a);else if(a=J(a),p=a.min,E=a.max,!p||!E)return this;return!this.min&&!this.max?(this.min=p.clone(),this.max=E.clone()):(this.min.x=Math.min(p.x,this.min.x),this.max.x=Math.max(E.x,this.max.x),this.min.y=Math.min(p.y,this.min.y),this.max.y=Math.max(E.y,this.max.y)),this},getCenter:function(a){return Ce((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return Ce(this.min.x,this.max.y)},getTopRight:function(){return Ce(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var p,E;return typeof a[0]=="number"||a instanceof ie?a=Ce(a):a=J(a),a instanceof Te?(p=a.min,E=a.max):p=E=a,p.x>=this.min.x&&E.x<=this.max.x&&p.y>=this.min.y&&E.y<=this.max.y},intersects:function(a){a=J(a);var p=this.min,E=this.max,V=a.min,ae=a.max,Se=ae.x>=p.x&&V.x<=E.x,st=ae.y>=p.y&&V.y<=E.y;return Se&&st},overlaps:function(a){a=J(a);var p=this.min,E=this.max,V=a.min,ae=a.max,Se=ae.x>p.x&&V.x<E.x,st=ae.y>p.y&&V.y<E.y;return Se&&st},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var p=this.min,E=this.max,V=Math.abs(p.x-E.x)*a,ae=Math.abs(p.y-E.y)*a;return J(Ce(p.x-V,p.y-ae),Ce(E.x+V,E.y+ae))},equals:function(a){return a?(a=J(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function J(a,p){return!a||a instanceof Te?a:new Te(a,p)}function H(a,p){if(a)for(var E=p?[a,p]:a,V=0,ae=E.length;V<ae;V++)this.extend(E[V])}H.prototype={extend:function(a){var p=this._southWest,E=this._northEast,V,ae;if(a instanceof ue)V=a,ae=a;else if(a instanceof H){if(V=a._southWest,ae=a._northEast,!V||!ae)return this}else return a?this.extend(se(a)||Q(a)):this;return!p&&!E?(this._southWest=new ue(V.lat,V.lng),this._northEast=new ue(ae.lat,ae.lng)):(p.lat=Math.min(V.lat,p.lat),p.lng=Math.min(V.lng,p.lng),E.lat=Math.max(ae.lat,E.lat),E.lng=Math.max(ae.lng,E.lng)),this},pad:function(a){var p=this._southWest,E=this._northEast,V=Math.abs(p.lat-E.lat)*a,ae=Math.abs(p.lng-E.lng)*a;return new H(new ue(p.lat-V,p.lng-ae),new ue(E.lat+V,E.lng+ae))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof ue||"lat"in a?a=se(a):a=Q(a);var p=this._southWest,E=this._northEast,V,ae;return a instanceof H?(V=a.getSouthWest(),ae=a.getNorthEast()):V=ae=a,V.lat>=p.lat&&ae.lat<=E.lat&&V.lng>=p.lng&&ae.lng<=E.lng},intersects:function(a){a=Q(a);var p=this._southWest,E=this._northEast,V=a.getSouthWest(),ae=a.getNorthEast(),Se=ae.lat>=p.lat&&V.lat<=E.lat,st=ae.lng>=p.lng&&V.lng<=E.lng;return Se&&st},overlaps:function(a){a=Q(a);var p=this._southWest,E=this._northEast,V=a.getSouthWest(),ae=a.getNorthEast(),Se=ae.lat>p.lat&&V.lat<E.lat,st=ae.lng>p.lng&&V.lng<E.lng;return Se&&st},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,p){return a?(a=Q(a),this._southWest.equals(a.getSouthWest(),p)&&this._northEast.equals(a.getNorthEast(),p)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Q(a,p){return a instanceof H?a:new H(a,p)}function ue(a,p,E){if(isNaN(a)||isNaN(p))throw new Error("Invalid LatLng object: ("+a+", "+p+")");this.lat=+a,this.lng=+p,E!==void 0&&(this.alt=+E)}ue.prototype={equals:function(a,p){if(!a)return!1;a=se(a);var E=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return E<=(p===void 0?1e-9:p)},toString:function(a){return"LatLng("+b(this.lat,a)+", "+b(this.lng,a)+")"},distanceTo:function(a){return K.distance(this,se(a))},wrap:function(){return K.wrapLatLng(this)},toBounds:function(a){var p=180*a/40075017,E=p/Math.cos(Math.PI/180*this.lat);return Q([this.lat-p,this.lng-E],[this.lat+p,this.lng+E])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function se(a,p,E){return a instanceof ue?a:Y(a)&&typeof a[0]!="object"?a.length===3?new ue(a[0],a[1],a[2]):a.length===2?new ue(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new ue(a.lat,"lng"in a?a.lng:a.lon,a.alt):p===void 0?null:new ue(a,p,E)}var pe={latLngToPoint:function(a,p){var E=this.projection.project(a),V=this.scale(p);return this.transformation._transform(E,V)},pointToLatLng:function(a,p){var E=this.scale(p),V=this.transformation.untransform(a,E);return this.projection.unproject(V)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var p=this.projection.bounds,E=this.scale(a),V=this.transformation.transform(p.min,E),ae=this.transformation.transform(p.max,E);return new Te(V,ae)},infinite:!1,wrapLatLng:function(a){var p=this.wrapLng?m(a.lng,this.wrapLng,!0):a.lng,E=this.wrapLat?m(a.lat,this.wrapLat,!0):a.lat,V=a.alt;return new ue(E,p,V)},wrapLatLngBounds:function(a){var p=a.getCenter(),E=this.wrapLatLng(p),V=p.lat-E.lat,ae=p.lng-E.lng;if(V===0&&ae===0)return a;var Se=a.getSouthWest(),st=a.getNorthEast(),At=new ue(Se.lat-V,Se.lng-ae),Gt=new ue(st.lat-V,st.lng-ae);return new H(At,Gt)}},K=i({},pe,{wrapLng:[-180,180],R:6371e3,distance:function(a,p){var E=Math.PI/180,V=a.lat*E,ae=p.lat*E,Se=Math.sin((p.lat-a.lat)*E/2),st=Math.sin((p.lng-a.lng)*E/2),At=Se*Se+Math.cos(V)*Math.cos(ae)*st*st,Gt=2*Math.atan2(Math.sqrt(At),Math.sqrt(1-At));return this.R*Gt}}),D=6378137,ke={R:D,MAX_LATITUDE:85.0511287798,project:function(a){var p=Math.PI/180,E=this.MAX_LATITUDE,V=Math.max(Math.min(E,a.lat),-E),ae=Math.sin(V*p);return new ie(this.R*a.lng*p,this.R*Math.log((1+ae)/(1-ae))/2)},unproject:function(a){var p=180/Math.PI;return new ue((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*p,a.x*p/this.R)},bounds:function(){var a=D*Math.PI;return new Te([-a,-a],[a,a])}()};function Me(a,p,E,V){if(Y(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=p,this._c=E,this._d=V}Me.prototype={transform:function(a,p){return this._transform(a.clone(),p)},_transform:function(a,p){return p=p||1,a.x=p*(this._a*a.x+this._b),a.y=p*(this._c*a.y+this._d),a},untransform:function(a,p){return p=p||1,new ie((a.x/p-this._b)/this._a,(a.y/p-this._d)/this._c)}};function Ge(a,p,E,V){return new Me(a,p,E,V)}var ce=i({},K,{code:"EPSG:3857",projection:ke,transformation:function(){var a=.5/(Math.PI*ke.R);return Ge(a,.5,-a,.5)}()}),te=i({},ce,{code:"EPSG:900913"});function ye(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function de(a,p){var E="",V,ae,Se,st,At,Gt;for(V=0,Se=a.length;V<Se;V++){for(At=a[V],ae=0,st=At.length;ae<st;ae++)Gt=At[ae],E+=(ae?"L":"M")+Gt.x+" "+Gt.y;E+=p?mt.svg?"z":"x":""}return E||"M0 0"}var We=document.documentElement.style,He="ActiveXObject"in window,tt=He&&!document.addEventListener,Ze="msLaunchUri"in navigator&&!("documentMode"in document),et=St("webkit"),ze=St("android"),wt=St("android 2")||St("android 3"),Pt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),kt=ze&&St("Google")&&Pt<537&&!("AudioNode"in window),Jt=!!window.opera,on=!Ze&&St("chrome"),cn=St("gecko")&&!et&&!Jt&&!He,Ke=!on&&St("safari"),ot=St("phantom"),rt="OTransition"in We,$t=navigator.platform.indexOf("Win")===0,Qt=He&&"transition"in We,Rn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!wt,Ln="MozPerspective"in We,Dn=!window.L_DISABLE_3D&&(Qt||Rn||Ln)&&!rt&&!ot,ar=typeof orientation<"u"||St("mobile"),En=ar&&et,jn=ar&&Rn,An=!window.PointerEvent&&window.MSPointerEvent,Yn=!!(window.PointerEvent||An),wr="ontouchstart"in window||!!window.TouchEvent,Or=!window.L_NO_TOUCH&&(wr||Yn),gr=ar&&Jt,oi=ar&&cn,ft=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Qe=function(){var a=!1;try{var p=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",_,p),window.removeEventListener("testPassiveEventSupport",_,p)}catch{}return a}(),Ut=function(){return!!document.createElement("canvas").getContext}(),xn=!!(document.createElementNS&&ye("svg").createSVGRect),vn=!!xn&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),bn=!xn&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var p=a.firstChild;return p.style.behavior="url(#default#VML)",p&&typeof p.adj=="object"}catch{return!1}}(),qt=navigator.platform.indexOf("Mac")===0,Hn=navigator.platform.indexOf("Linux")===0;function St(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var mt={ie:He,ielt9:tt,edge:Ze,webkit:et,android:ze,android23:wt,androidStock:kt,opera:Jt,chrome:on,gecko:cn,safari:Ke,phantom:ot,opera12:rt,win:$t,ie3d:Qt,webkit3d:Rn,gecko3d:Ln,any3d:Dn,mobile:ar,mobileWebkit:En,mobileWebkit3d:jn,msPointer:An,pointer:Yn,touch:Or,touchNative:wr,mobileOpera:gr,mobileGecko:oi,retina:ft,passiveEvents:Qe,canvas:Ut,svg:xn,vml:bn,inlineSvg:vn,mac:qt,linux:Hn},wn=mt.msPointer?"MSPointerDown":"pointerdown",ei=mt.msPointer?"MSPointerMove":"pointermove",Tt=mt.msPointer?"MSPointerUp":"pointerup",Fn=mt.msPointer?"MSPointerCancel":"pointercancel",Qn={touchstart:wn,touchmove:ei,touchend:Tt,touchcancel:Fn},Mi={touchstart:Bi,touchmove:zi,touchend:zi,touchcancel:zi},Sr={},Pr=!1;function dr(a,p,E){return p==="touchstart"&&tn(),Mi[p]?(E=Mi[p].bind(this,E),a.addEventListener(Qn[p],E,!1),E):(console.warn("wrong event specified:",p),_)}function Ai(a,p,E){if(!Qn[p]){console.warn("wrong event specified:",p);return}a.removeEventListener(Qn[p],E,!1)}function xr(a){Sr[a.pointerId]=a}function Gr(a){Sr[a.pointerId]&&(Sr[a.pointerId]=a)}function Ir(a){delete Sr[a.pointerId]}function tn(){Pr||(document.addEventListener(wn,xr,!0),document.addEventListener(ei,Gr,!0),document.addEventListener(Tt,Ir,!0),document.addEventListener(Fn,Ir,!0),Pr=!0)}function zi(a,p){if(p.pointerType!==(p.MSPOINTER_TYPE_MOUSE||"mouse")){p.touches=[];for(var E in Sr)p.touches.push(Sr[E]);p.changedTouches=[p],a(p)}}function Bi(a,p){p.MSPOINTER_TYPE_TOUCH&&p.pointerType===p.MSPOINTER_TYPE_TOUCH&&Er(p),zi(a,p)}function Qi(a){var p={},E,V;for(V in a)E=a[V],p[V]=E&&E.bind?E.bind(a):E;return a=p,p.type="dblclick",p.detail=2,p.isTrusted=!1,p._simulated=!0,p}var ti=200;function Br(a,p){a.addEventListener("dblclick",p);var E=0,V;function ae(Se){if(Se.detail!==1){V=Se.detail;return}if(!(Se.pointerType==="mouse"||Se.sourceCapabilities&&!Se.sourceCapabilities.firesTouchEvents)){var st=Va(Se);if(!(st.some(function(Gt){return Gt instanceof HTMLLabelElement&&Gt.attributes.for})&&!st.some(function(Gt){return Gt instanceof HTMLInputElement||Gt instanceof HTMLSelectElement}))){var At=Date.now();At-E<=ti?(V++,V===2&&p(Qi(Se))):V=1,E=At}}}return a.addEventListener("click",ae),{dblclick:p,simDblclick:ae}}function ci(a,p){a.removeEventListener("dblclick",p.dblclick),a.removeEventListener("click",p.simDblclick)}var mr=Cn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Si=Cn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),gs=Si==="webkitTransition"||Si==="OTransition"?Si+"End":"transitionend";function va(a){return typeof a=="string"?document.getElementById(a):a}function Rr(a,p){var E=a.style[p]||a.currentStyle&&a.currentStyle[p];if((!E||E==="auto")&&document.defaultView){var V=document.defaultView.getComputedStyle(a,null);E=V?V[p]:null}return E==="auto"?null:E}function mn(a,p,E){var V=document.createElement(a);return V.className=p||"",E&&E.appendChild(V),V}function Zn(a){var p=a.parentNode;p&&p.removeChild(a)}function Ei(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Ri(a){var p=a.parentNode;p&&p.lastChild!==a&&p.appendChild(a)}function Fi(a){var p=a.parentNode;p&&p.firstChild!==a&&p.insertBefore(a,p.firstChild)}function jo(a,p){if(a.classList!==void 0)return a.classList.contains(p);var E=si(a);return E.length>0&&new RegExp("(^|\\s)"+p+"(\\s|$)").test(E)}function cr(a,p){if(a.classList!==void 0)for(var E=M(p),V=0,ae=E.length;V<ae;V++)a.classList.add(E[V]);else if(!jo(a,p)){var Se=si(a);Ms(a,(Se?Se+" ":"")+p)}}function Gn(a,p){a.classList!==void 0?a.classList.remove(p):Ms(a,y((" "+si(a)+" ").replace(" "+p+" "," ")))}function Ms(a,p){a.className.baseVal===void 0?a.className=p:a.className.baseVal=p}function si(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function ki(a,p){"opacity"in a.style?a.style.opacity=p:"filter"in a.style&&fi(a,p)}function fi(a,p){var E=!1,V="DXImageTransform.Microsoft.Alpha";try{E=a.filters.item(V)}catch{if(p===1)return}p=Math.round(p*100),E?(E.Enabled=p!==100,E.Opacity=p):a.style.filter+=" progid:"+V+"(opacity="+p+")"}function Cn(a){for(var p=document.documentElement.style,E=0;E<a.length;E++)if(a[E]in p)return a[E];return!1}function fn(a,p,E){var V=p||new ie(0,0);a.style[mr]=(mt.ie3d?"translate("+V.x+"px,"+V.y+"px)":"translate3d("+V.x+"px,"+V.y+"px,0)")+(E?" scale("+E+")":"")}function fr(a,p){a._leaflet_pos=p,mt.any3d?fn(a,p):(a.style.left=p.x+"px",a.style.top=p.y+"px")}function eo(a){return a._leaflet_pos||new ie(0,0)}var Ao,_o,$a;if("onselectstart"in document)Ao=function(){yr(window,"selectstart",Er)},_o=function(){$r(window,"selectstart",Er)};else{var es=Cn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ao=function(){if(es){var a=document.documentElement.style;$a=a[es],a[es]="none"}},_o=function(){es&&(document.documentElement.style[es]=$a,$a=void 0)}}function ol(){yr(window,"dragstart",Er)}function jr(){$r(window,"dragstart",Er)}var As,uo;function ts(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(ji(),As=a,uo=a.style.outlineStyle,a.style.outlineStyle="none",yr(window,"keydown",ji))}function ji(){As&&(As.style.outlineStyle=uo,As=void 0,uo=void 0,$r(window,"keydown",ji))}function Ml(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function za(a){var p=a.getBoundingClientRect();return{x:p.width/a.offsetWidth||1,y:p.height/a.offsetHeight||1,boundingClientRect:p}}var vr={__proto__:null,TRANSFORM:mr,TRANSITION:Si,TRANSITION_END:gs,get:va,getStyle:Rr,create:mn,remove:Zn,empty:Ei,toFront:Ri,toBack:Fi,hasClass:jo,addClass:cr,removeClass:Gn,setClass:Ms,getClass:si,setOpacity:ki,testProp:Cn,setTransform:fn,setPosition:fr,getPosition:eo,get disableTextSelection(){return Ao},get enableTextSelection(){return _o},disableImageDrag:ol,enableImageDrag:jr,preventOutline:ts,restoreOutline:ji,getSizedParentNode:Ml,getScale:za};function yr(a,p,E,V){if(p&&typeof p=="object")for(var ae in p)rs(a,ae,p[ae],E);else{p=M(p);for(var Se=0,st=p.length;Se<st;Se++)rs(a,p[Se],E,V)}return this}var ns="_leaflet_events";function $r(a,p,E,V){if(arguments.length===1)Al(a),delete a[ns];else if(p&&typeof p=="object")for(var ae in p)to(a,ae,p[ae],E);else if(p=M(p),arguments.length===2)Al(a,function(At){return ee(p,At)!==-1});else for(var Se=0,st=p.length;Se<st;Se++)to(a,p[Se],E,V);return this}function Al(a,p){for(var E in a[ns]){var V=E.split(/\d/)[0];(!p||p(V))&&to(a,V,null,null,E)}}var hi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function rs(a,p,E,V){var ae=p+f(E)+(V?"_"+f(V):"");if(a[ns]&&a[ns][ae])return this;var Se=function(At){return E.call(V||a,At||window.event)},st=Se;!mt.touchNative&&mt.pointer&&p.indexOf("touch")===0?Se=dr(a,p,Se):mt.touch&&p==="dblclick"?Se=Br(a,Se):"addEventListener"in a?p==="touchstart"||p==="touchmove"||p==="wheel"||p==="mousewheel"?a.addEventListener(hi[p]||p,Se,mt.passiveEvents?{passive:!1}:!1):p==="mouseenter"||p==="mouseleave"?(Se=function(At){At=At||window.event,sl(a,At)&&st(At)},a.addEventListener(hi[p],Se,!1)):a.addEventListener(p,st,!1):a.attachEvent("on"+p,Se),a[ns]=a[ns]||{},a[ns][ae]=Se}function to(a,p,E,V,ae){ae=ae||p+f(E)+(V?"_"+f(V):"");var Se=a[ns]&&a[ns][ae];if(!Se)return this;!mt.touchNative&&mt.pointer&&p.indexOf("touch")===0?Ai(a,p,Se):mt.touch&&p==="dblclick"?ci(a,Se):"removeEventListener"in a?a.removeEventListener(hi[p]||p,Se,!1):a.detachEvent("on"+p,Se),a[ns][ae]=null}function Ua(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function wu(a){return rs(a,"wheel",Ua),this}function kl(a){return yr(a,"mousedown touchstart dblclick contextmenu",Ua),a._leaflet_disable_click=!0,this}function Er(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Hr(a){return Er(a),Ua(a),this}function Va(a){if(a.composedPath)return a.composedPath();for(var p=[],E=a.target;E;)p.push(E),E=E.parentNode;return p}function Ju(a,p){if(!p)return new ie(a.clientX,a.clientY);var E=za(p),V=E.boundingClientRect;return new ie((a.clientX-V.left)/E.x-p.clientLeft,(a.clientY-V.top)/E.y-p.clientTop)}var Tl=mt.linux&&mt.chrome?window.devicePixelRatio:mt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xl(a){return mt.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/Tl:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function sl(a,p){var E=p.relatedTarget;if(!E)return!0;try{for(;E&&E!==a;)E=E.parentNode}catch{return!1}return E!==a}var Nl={__proto__:null,on:yr,off:$r,stopPropagation:Ua,disableScrollPropagation:wu,disableClickPropagation:kl,preventDefault:Er,stop:Hr,getPropagationPath:Va,getMousePosition:Ju,getWheelDelta:Xl,isExternalTarget:sl,addListener:yr,removeListener:$r},Ql=oe.extend({run:function(a,p,E,V){this.stop(),this._el=a,this._inProgress=!0,this._duration=E||.25,this._easeOutPower=1/Math.max(V||.5,.2),this._startPos=eo(a),this._offset=p.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(a){var p=+new Date-this._startTime,E=this._duration*1e3;p<E?this._runFrame(this._easeOut(p/E),a):(this._runFrame(1),this._complete())},_runFrame:function(a,p){var E=this._startPos.add(this._offset.multiplyBy(a));p&&E._round(),fr(this._el,E),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Kr=oe.extend({options:{crs:ce,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,p){p=k(this,p),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),p.maxBounds&&this.setMaxBounds(p.maxBounds),p.zoom!==void 0&&(this._zoom=this._limitZoom(p.zoom)),p.center&&p.zoom!==void 0&&this.setView(se(p.center),p.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Si&&mt.any3d&&!mt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),yr(this._proxy,gs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,p,E){if(p=p===void 0?this._zoom:this._limitZoom(p),a=this._limitCenter(se(a),p,this.options.maxBounds),E=E||{},this._stop(),this._loaded&&!E.reset&&E!==!0){E.animate!==void 0&&(E.zoom=i({animate:E.animate},E.zoom),E.pan=i({animate:E.animate,duration:E.duration},E.pan));var V=this._zoom!==p?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,p,E.zoom):this._tryAnimatedPan(a,E.pan);if(V)return clearTimeout(this._sizeTimer),this}return this._resetView(a,p,E.pan&&E.pan.noMoveStart),this},setZoom:function(a,p){return this._loaded?this.setView(this.getCenter(),a,{zoom:p}):(this._zoom=a,this)},zoomIn:function(a,p){return a=a||(mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,p)},zoomOut:function(a,p){return a=a||(mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,p)},setZoomAround:function(a,p,E){var V=this.getZoomScale(p),ae=this.getSize().divideBy(2),Se=a instanceof ie?a:this.latLngToContainerPoint(a),st=Se.subtract(ae).multiplyBy(1-1/V),At=this.containerPointToLatLng(ae.add(st));return this.setView(At,p,{zoom:E})},_getBoundsCenterZoom:function(a,p){p=p||{},a=a.getBounds?a.getBounds():Q(a);var E=Ce(p.paddingTopLeft||p.padding||[0,0]),V=Ce(p.paddingBottomRight||p.padding||[0,0]),ae=this.getBoundsZoom(a,!1,E.add(V));if(ae=typeof p.maxZoom=="number"?Math.min(p.maxZoom,ae):ae,ae===1/0)return{center:a.getCenter(),zoom:ae};var Se=V.subtract(E).divideBy(2),st=this.project(a.getSouthWest(),ae),At=this.project(a.getNorthEast(),ae),Gt=this.unproject(st.add(At).divideBy(2).add(Se),ae);return{center:Gt,zoom:ae}},fitBounds:function(a,p){if(a=Q(a),!a.isValid())throw new Error("Bounds are not valid.");var E=this._getBoundsCenterZoom(a,p);return this.setView(E.center,E.zoom,p)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,p){return this.setView(a,this._zoom,{pan:p})},panBy:function(a,p){if(a=Ce(a).round(),p=p||{},!a.x&&!a.y)return this.fire("moveend");if(p.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ql,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),p.noMoveStart||this.fire("movestart"),p.animate!==!1){cr(this._mapPane,"leaflet-pan-anim");var E=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,E,p.duration||.25,p.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,p,E){if(E=E||{},E.animate===!1||!mt.any3d)return this.setView(a,p,E);this._stop();var V=this.project(this.getCenter()),ae=this.project(a),Se=this.getSize(),st=this._zoom;a=se(a),p=p===void 0?st:p;var At=Math.max(Se.x,Se.y),Gt=At*this.getZoomScale(st,p),an=ae.distanceTo(V)||1,On=1.42,er=On*On;function Fr(gi){var Wo=gi?-1:1,De=gi?Gt:At,bs=Gt*Gt-At*At+Wo*er*er*an*an,Su=2*De*er*an,Bo=bs/Su,Vr=Math.sqrt(Bo*Bo+1)-Bo,Zc=Vr<1e-9?-18:Math.log(Vr);return Zc}function Lo(gi){return(Math.exp(gi)-Math.exp(-gi))/2}function io(gi){return(Math.exp(gi)+Math.exp(-gi))/2}function Oo(gi){return Lo(gi)/io(gi)}var Yi=Fr(0);function _s(gi){return At*(io(Yi)/io(Yi+On*gi))}function wc(gi){return At*(io(Yi)*Oo(Yi+On*gi)-Lo(Yi))/er}function fa(gi){return 1-Math.pow(1-gi,1.5)}var Ys=Date.now(),$s=(Fr(1)-Yi)/On,Tf=E.duration?1e3*E.duration:1e3*$s*.8;function nu(){var gi=(Date.now()-Ys)/Tf,Wo=fa(gi)*$s;gi<=1?(this._flyToFrame=T(nu,this),this._move(this.unproject(V.add(ae.subtract(V).multiplyBy(wc(Wo)/an)),st),this.getScaleZoom(At/_s(Wo),st),{flyTo:!0})):this._move(a,p)._moveEnd(!0)}return this._moveStart(!0,E.noMoveStart),nu.call(this),this},flyToBounds:function(a,p){var E=this._getBoundsCenterZoom(a,p);return this.flyTo(E.center,E.zoom,p)},setMaxBounds:function(a){return a=Q(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var p=this.options.minZoom;return this.options.minZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var p=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&p!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,p){this._enforcingBounds=!0;var E=this.getCenter(),V=this._limitCenter(E,this._zoom,Q(a));return E.equals(V)||this.panTo(V,p),this._enforcingBounds=!1,this},panInside:function(a,p){p=p||{};var E=Ce(p.paddingTopLeft||p.padding||[0,0]),V=Ce(p.paddingBottomRight||p.padding||[0,0]),ae=this.project(this.getCenter()),Se=this.project(a),st=this.getPixelBounds(),At=J([st.min.add(E),st.max.subtract(V)]),Gt=At.getSize();if(!At.contains(Se)){this._enforcingBounds=!0;var an=Se.subtract(At.getCenter()),On=At.extend(Se).getSize().subtract(Gt);ae.x+=an.x<0?-On.x:On.x,ae.y+=an.y<0?-On.y:On.y,this.panTo(this.unproject(ae),p),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=i({animate:!1,pan:!0},a===!0?{animate:!0}:a);var p=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var E=this.getSize(),V=p.divideBy(2).round(),ae=E.divideBy(2).round(),Se=V.subtract(ae);return!Se.x&&!Se.y?this:(a.animate&&a.pan?this.panBy(Se):(a.pan&&this._rawPanBy(Se),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:p,newSize:E}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=i({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var p=o(this._handleGeolocationResponse,this),E=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(p,E,a):navigator.geolocation.getCurrentPosition(p,E,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var p=a.code,E=a.message||(p===1?"permission denied":p===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:p,message:"Geolocation error: "+E+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var p=a.coords.latitude,E=a.coords.longitude,V=new ue(p,E),ae=V.toBounds(a.coords.accuracy*2),Se=this._locateOptions;if(Se.setView){var st=this.getBoundsZoom(ae);this.setView(V,Se.maxZoom?Math.min(st,Se.maxZoom):st)}var At={latlng:V,bounds:ae,timestamp:a.timestamp};for(var Gt in a.coords)typeof a.coords[Gt]=="number"&&(At[Gt]=a.coords[Gt]);this.fire("locationfound",At)}},addHandler:function(a,p){if(!p)return this;var E=this[a]=new p(this);return this._handlers.push(E),this.options[a]&&E.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Zn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Zn(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,p){var E="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),V=mn("div",E,p||this._mapPane);return a&&(this._panes[a]=V),V},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),p=this.unproject(a.getBottomLeft()),E=this.unproject(a.getTopRight());return new H(p,E)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,p,E){a=Q(a),E=Ce(E||[0,0]);var V=this.getZoom()||0,ae=this.getMinZoom(),Se=this.getMaxZoom(),st=a.getNorthWest(),At=a.getSouthEast(),Gt=this.getSize().subtract(E),an=J(this.project(At,V),this.project(st,V)).getSize(),On=mt.any3d?this.options.zoomSnap:1,er=Gt.x/an.x,Fr=Gt.y/an.y,Lo=p?Math.max(er,Fr):Math.min(er,Fr);return V=this.getScaleZoom(Lo,V),On&&(V=Math.round(V/(On/100))*(On/100),V=p?Math.ceil(V/On)*On:Math.floor(V/On)*On),Math.max(ae,Math.min(Se,V))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,p){var E=this._getTopLeftPoint(a,p);return new Te(E,E.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,p){var E=this.options.crs;return p=p===void 0?this._zoom:p,E.scale(a)/E.scale(p)},getScaleZoom:function(a,p){var E=this.options.crs;p=p===void 0?this._zoom:p;var V=E.zoom(a*E.scale(p));return isNaN(V)?1/0:V},project:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.latLngToPoint(se(a),p)},unproject:function(a,p){return p=p===void 0?this._zoom:p,this.options.crs.pointToLatLng(Ce(a),p)},layerPointToLatLng:function(a){var p=Ce(a).add(this.getPixelOrigin());return this.unproject(p)},latLngToLayerPoint:function(a){var p=this.project(se(a))._round();return p._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(se(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(Q(a))},distance:function(a,p){return this.options.crs.distance(se(a),se(p))},containerPointToLayerPoint:function(a){return Ce(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Ce(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var p=this.containerPointToLayerPoint(Ce(a));return this.layerPointToLatLng(p)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(se(a)))},mouseEventToContainerPoint:function(a){return Ju(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var p=this._container=va(a);if(p){if(p._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");yr(p,"scroll",this._onScroll,this),this._containerId=f(p)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&mt.any3d,cr(a,"leaflet-container"+(mt.touch?" leaflet-touch":"")+(mt.retina?" leaflet-retina":"")+(mt.ielt9?" leaflet-oldie":"")+(mt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var p=Rr(a,"position");p!=="absolute"&&p!=="relative"&&p!=="fixed"&&p!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),fr(this._mapPane,new ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(cr(a.markerPane,"leaflet-zoom-hide"),cr(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,p,E){fr(this._mapPane,new ie(0,0));var V=!this._loaded;this._loaded=!0,p=this._limitZoom(p),this.fire("viewprereset");var ae=this._zoom!==p;this._moveStart(ae,E)._move(a,p)._moveEnd(ae),this.fire("viewreset"),V&&this.fire("load")},_moveStart:function(a,p){return a&&this.fire("zoomstart"),p||this.fire("movestart"),this},_move:function(a,p,E,V){p===void 0&&(p=this._zoom);var ae=this._zoom!==p;return this._zoom=p,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),V?E&&E.pinch&&this.fire("zoom",E):((ae||E&&E.pinch)&&this.fire("zoom",E),this.fire("move",E)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){fr(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[f(this._container)]=this;var p=a?$r:yr;p(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&p(window,"resize",this._onResize,this),mt.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=T(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,p){for(var E=[],V,ae=p==="mouseout"||p==="mouseover",Se=a.target||a.srcElement,st=!1;Se;){if(V=this._targets[f(Se)],V&&(p==="click"||p==="preclick")&&this._draggableMoved(V)){st=!0;break}if(V&&V.listens(p,!0)&&(ae&&!sl(Se,a)||(E.push(V),ae))||Se===this._container)break;Se=Se.parentNode}return!E.length&&!st&&!ae&&this.listens(p,!0)&&(E=[this]),E},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var p=a.target||a.srcElement;if(!(!this._loaded||p._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(p))){var E=a.type;E==="mousedown"&&ts(p),this._fireDOMEvent(a,E)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,p,E){if(a.type==="click"){var V=i({},a);V.type="preclick",this._fireDOMEvent(V,V.type,E)}var ae=this._findEventTargets(a,p);if(E){for(var Se=[],st=0;st<E.length;st++)E[st].listens(p,!0)&&Se.push(E[st]);ae=Se.concat(ae)}if(ae.length){p==="contextmenu"&&Er(a);var At=ae[0],Gt={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var an=At.getLatLng&&(!At._radius||At._radius<=10);Gt.containerPoint=an?this.latLngToContainerPoint(At.getLatLng()):this.mouseEventToContainerPoint(a),Gt.layerPoint=this.containerPointToLayerPoint(Gt.containerPoint),Gt.latlng=an?At.getLatLng():this.layerPointToLatLng(Gt.layerPoint)}for(st=0;st<ae.length;st++)if(ae[st].fire(p,Gt,!0),Gt.originalEvent._stopped||ae[st].options.bubblingMouseEvents===!1&&ee(this._mouseEvents,p)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,p=this._handlers.length;a<p;a++)this._handlers[a].disable()},whenReady:function(a,p){return this._loaded?a.call(p||this,{target:this}):this.on("load",a,p),this},_getMapPanePos:function(){return eo(this._mapPane)||new ie(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,p){var E=a&&p!==void 0?this._getNewPixelOrigin(a,p):this.getPixelOrigin();return E.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,p){var E=this.getSize()._divideBy(2);return this.project(a,p)._subtract(E)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,p,E){var V=this._getNewPixelOrigin(E,p);return this.project(a,p)._subtract(V)},_latLngBoundsToNewLayerBounds:function(a,p,E){var V=this._getNewPixelOrigin(E,p);return J([this.project(a.getSouthWest(),p)._subtract(V),this.project(a.getNorthWest(),p)._subtract(V),this.project(a.getSouthEast(),p)._subtract(V),this.project(a.getNorthEast(),p)._subtract(V)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,p,E){if(!E)return a;var V=this.project(a,p),ae=this.getSize().divideBy(2),Se=new Te(V.subtract(ae),V.add(ae)),st=this._getBoundsOffset(Se,E,p);return Math.abs(st.x)<=1&&Math.abs(st.y)<=1?a:this.unproject(V.add(st),p)},_limitOffset:function(a,p){if(!p)return a;var E=this.getPixelBounds(),V=new Te(E.min.add(a),E.max.add(a));return a.add(this._getBoundsOffset(V,p))},_getBoundsOffset:function(a,p,E){var V=J(this.project(p.getNorthEast(),E),this.project(p.getSouthWest(),E)),ae=V.min.subtract(a.min),Se=V.max.subtract(a.max),st=this._rebound(ae.x,-Se.x),At=this._rebound(ae.y,-Se.y);return new ie(st,At)},_rebound:function(a,p){return a+p>0?Math.round(a-p)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(p))},_limitZoom:function(a){var p=this.getMinZoom(),E=this.getMaxZoom(),V=mt.any3d?this.options.zoomSnap:1;return V&&(a=Math.round(a/V)*V),Math.max(p,Math.min(E,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Gn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,p){var E=this._getCenterOffset(a)._trunc();return(p&&p.animate)!==!0&&!this.getSize().contains(E)?!1:(this.panBy(E,p),!0)},_createAnimProxy:function(){var a=this._proxy=mn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(p){var E=mr,V=this._proxy.style[E];fn(this._proxy,this.project(p.center,p.zoom),this.getZoomScale(p.zoom,1)),V===this._proxy.style[E]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Zn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),p=this.getZoom();fn(this._proxy,this.project(a,p),this.getZoomScale(p,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,p,E){if(this._animatingZoom)return!0;if(E=E||{},!this._zoomAnimated||E.animate===!1||this._nothingToAnimate()||Math.abs(p-this._zoom)>this.options.zoomAnimationThreshold)return!1;var V=this.getZoomScale(p),ae=this._getCenterOffset(a)._divideBy(1-1/V);return E.animate!==!0&&!this.getSize().contains(ae)?!1:(T(function(){this._moveStart(!0,E.noMoveStart||!1)._animateZoom(a,p,!0)},this),!0)},_animateZoom:function(a,p,E,V){this._mapPane&&(E&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=p,cr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:p,noUpdate:V}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Gn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function co(a,p){return new Kr(a,p)}var lr=z.extend({options:{position:"topright"},initialize:function(a){k(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var p=this._map;return p&&p.removeControl(this),this.options.position=a,p&&p.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var p=this._container=this.onAdd(a),E=this.getPosition(),V=a._controlCorners[E];return cr(p,"leaflet-control"),E.indexOf("bottom")!==-1?V.insertBefore(p,V.firstChild):V.appendChild(p),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Zn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),fo=function(a){return new lr(a)};Kr.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},p="leaflet-",E=this._controlContainer=mn("div",p+"control-container",this._container);function V(ae,Se){var st=p+ae+" "+p+Se;a[ae+Se]=mn("div",st,E)}V("top","left"),V("top","right"),V("bottom","left"),V("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Zn(this._controlCorners[a]);Zn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var al=lr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,p,E,V){return E<V?-1:V<E?1:0}},initialize:function(a,p,E){k(this,E),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var V in a)this._addLayer(a[V],V);for(V in p)this._addLayer(p[V],V,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var p=0;p<this._layers.length;p++)this._layers[p].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return lr.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,p){return this._addLayer(a,p),this._map?this._update():this},addOverlay:function(a,p){return this._addLayer(a,p,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var p=this._getLayer(f(a));return p&&this._layers.splice(this._layers.indexOf(p),1),this._map?this._update():this},expand:function(){cr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(cr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Gn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Gn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",p=this._container=mn("div",a),E=this.options.collapsed;p.setAttribute("aria-haspopup",!0),kl(p),wu(p);var V=this._section=mn("section",a+"-list");E&&(this._map.on("click",this.collapse,this),yr(p,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ae=this._layersLink=mn("a",a+"-toggle",p);ae.href="#",ae.title="Layers",ae.setAttribute("role","button"),yr(ae,{keydown:function(Se){Se.keyCode===13&&this._expandSafely()},click:function(Se){Er(Se),this._expandSafely()}},this),E||this.expand(),this._baseLayersList=mn("div",a+"-base",V),this._separator=mn("div",a+"-separator",V),this._overlaysList=mn("div",a+"-overlays",V),p.appendChild(V)},_getLayer:function(a){for(var p=0;p<this._layers.length;p++)if(this._layers[p]&&f(this._layers[p].layer)===a)return this._layers[p]},_addLayer:function(a,p,E){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:p,overlay:E}),this.options.sortLayers&&this._layers.sort(o(function(V,ae){return this.options.sortFunction(V.layer,ae.layer,V.name,ae.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ei(this._baseLayersList),Ei(this._overlaysList),this._layerControlInputs=[];var a,p,E,V,ae=0;for(E=0;E<this._layers.length;E++)V=this._layers[E],this._addItem(V),p=p||V.overlay,a=a||!V.overlay,ae+=V.overlay?0:1;return this.options.hideSingleBase&&(a=a&&ae>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=p&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var p=this._getLayer(f(a.target)),E=p.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;E&&this._map.fire(E,p)},_createRadioElement:function(a,p){var E='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(p?' checked="checked"':"")+"/>",V=document.createElement("div");return V.innerHTML=E,V.firstChild},_addItem:function(a){var p=document.createElement("label"),E=this._map.hasLayer(a.layer),V;a.overlay?(V=document.createElement("input"),V.type="checkbox",V.className="leaflet-control-layers-selector",V.defaultChecked=E):V=this._createRadioElement("leaflet-base-layers_"+f(this),E),this._layerControlInputs.push(V),V.layerId=f(a.layer),yr(V,"click",this._onInputClick,this);var ae=document.createElement("span");ae.innerHTML=" "+a.name;var Se=document.createElement("span");p.appendChild(Se),Se.appendChild(V),Se.appendChild(ae);var st=a.overlay?this._overlaysList:this._baseLayersList;return st.appendChild(p),this._checkDisabledLayers(),p},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,p,E,V=[],ae=[];this._handlingClick=!0;for(var Se=a.length-1;Se>=0;Se--)p=a[Se],E=this._getLayer(p.layerId).layer,p.checked?V.push(E):p.checked||ae.push(E);for(Se=0;Se<ae.length;Se++)this._map.hasLayer(ae[Se])&&this._map.removeLayer(ae[Se]);for(Se=0;Se<V.length;Se++)this._map.hasLayer(V[Se])||this._map.addLayer(V[Se]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,p,E,V=this._map.getZoom(),ae=a.length-1;ae>=0;ae--)p=a[ae],E=this._getLayer(p.layerId).layer,p.disabled=E.options.minZoom!==void 0&&V<E.options.minZoom||E.options.maxZoom!==void 0&&V>E.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,yr(a,"click",Er),this.expand();var p=this;setTimeout(function(){$r(a,"click",Er),p._preventClick=!1})}}),ya=function(a,p,E){return new al(a,p,E)},Wi=lr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var p="leaflet-control-zoom",E=mn("div",p+" leaflet-bar"),V=this.options;return this._zoomInButton=this._createButton(V.zoomInText,V.zoomInTitle,p+"-in",E,this._zoomIn),this._zoomOutButton=this._createButton(V.zoomOutText,V.zoomOutTitle,p+"-out",E,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),E},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,p,E,V,ae){var Se=mn("a",E,V);return Se.innerHTML=a,Se.href="#",Se.title=p,Se.setAttribute("role","button"),Se.setAttribute("aria-label",p),kl(Se),yr(Se,"click",Hr),yr(Se,"click",ae,this),yr(Se,"click",this._refocusOnMap,this),Se},_updateDisabled:function(){var a=this._map,p="leaflet-disabled";Gn(this._zoomInButton,p),Gn(this._zoomOutButton,p),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(cr(this._zoomOutButton,p),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(cr(this._zoomInButton,p),this._zoomInButton.setAttribute("aria-disabled","true"))}});Kr.mergeOptions({zoomControl:!0}),Kr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Wi,this.addControl(this.zoomControl))});var eu=function(a){return new Wi(a)},na=lr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var p="leaflet-control-scale",E=mn("div",p),V=this.options;return this._addScales(V,p+"-line",E),a.on(V.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),E},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,p,E){a.metric&&(this._mScale=mn("div",p,E)),a.imperial&&(this._iScale=mn("div",p,E))},_update:function(){var a=this._map,p=a.getSize().y/2,E=a.distance(a.containerPointToLatLng([0,p]),a.containerPointToLatLng([this.options.maxWidth,p]));this._updateScales(E)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var p=this._getRoundNum(a),E=p<1e3?p+" m":p/1e3+" km";this._updateScale(this._mScale,E,p/a)},_updateImperial:function(a){var p=a*3.2808399,E,V,ae;p>5280?(E=p/5280,V=this._getRoundNum(E),this._updateScale(this._iScale,V+" mi",V/E)):(ae=this._getRoundNum(p),this._updateScale(this._iScale,ae+" ft",ae/p))},_updateScale:function(a,p,E){a.style.width=Math.round(this.options.maxWidth*E)+"px",a.innerHTML=p},_getRoundNum:function(a){var p=Math.pow(10,(Math.floor(a)+"").length-1),E=a/p;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:1,p*E}}),Dl=function(a){return new na(a)},Il='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Fs=lr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(mt.inlineSvg?Il+" ":"")+"Leaflet</a>"},initialize:function(a){k(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=mn("div","leaflet-control-attribution"),kl(this._container);for(var p in a._layers)a._layers[p].getAttribution&&this.addAttribution(a._layers[p].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var p in this._attributions)this._attributions[p]&&a.push(p);var E=[];this.options.prefix&&E.push(this.options.prefix),a.length&&E.push(a.join(", ")),this._container.innerHTML=E.join(' <span aria-hidden="true">|</span> ')}}});Kr.mergeOptions({attributionControl:!0}),Kr.addInitHook(function(){this.options.attributionControl&&new Fs().addTo(this)});var Ol=function(a){return new Fs(a)};lr.Layers=al,lr.Zoom=Wi,lr.Scale=na,lr.Attribution=Fs,fo.layers=ya,fo.zoom=eu,fo.scale=Dl,fo.attribution=Ol;var yi=z.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});yi.addTo=function(a,p){return a.addHandler(p,this),this};var Xu={Events:G},ko=mt.touch?"touchstart mousedown":"mousedown",Hs=oe.extend({options:{clickTolerance:3},initialize:function(a,p,E,V){k(this,V),this._element=a,this._dragStartTarget=p||a,this._preventOutline=E},enable:function(){this._enabled||(yr(this._dragStartTarget,ko,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Hs._dragging===this&&this.finishDrag(!0),$r(this._dragStartTarget,ko,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!jo(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Hs._dragging===this&&this.finishDrag();return}if(!(Hs._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Hs._dragging=this,this._preventOutline&&ts(this._element),ol(),Ao(),!this._moving)){this.fire("down");var p=a.touches?a.touches[0]:a,E=Ml(this._element);this._startPoint=new ie(p.clientX,p.clientY),this._startPos=eo(this._element),this._parentScale=za(E);var V=a.type==="mousedown";yr(document,V?"mousemove":"touchmove",this._onMove,this),yr(document,V?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var p=a.touches&&a.touches.length===1?a.touches[0]:a,E=new ie(p.clientX,p.clientY)._subtract(this._startPoint);!E.x&&!E.y||Math.abs(E.x)+Math.abs(E.y)<this.options.clickTolerance||(E.x/=this._parentScale.x,E.y/=this._parentScale.y,Er(a),this._moved||(this.fire("dragstart"),this._moved=!0,cr(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),cr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(E),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),fr(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Gn(document.body,"leaflet-dragging"),this._lastTarget&&(Gn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$r(document,"mousemove touchmove",this._onMove,this),$r(document,"mouseup touchend touchcancel",this._onUp,this),jr(),_o();var p=this._moved&&this._moving;this._moving=!1,Hs._dragging=!1,p&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Bl(a,p,E){var V,ae=[1,4,2,8],Se,st,At,Gt,an,On,er,Fr;for(Se=0,On=a.length;Se<On;Se++)a[Se]._code=Vt(a[Se],p);for(At=0;At<4;At++){for(er=ae[At],V=[],Se=0,On=a.length,st=On-1;Se<On;st=Se++)Gt=a[Se],an=a[st],Gt._code&er?an._code&er||(Fr=Lt(an,Gt,er,p,E),Fr._code=Vt(Fr,p),V.push(Fr)):(an._code&er&&(Fr=Lt(an,Gt,er,p,E),Fr._code=Vt(Fr,p),V.push(Fr)),V.push(Gt));a=V}return a}function qs(a,p){var E,V,ae,Se,st,At,Gt,an,On;if(!a||a.length===0)throw new Error("latlngs not passed");$n(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var er=se([0,0]),Fr=Q(a),Lo=Fr.getNorthWest().distanceTo(Fr.getSouthWest())*Fr.getNorthEast().distanceTo(Fr.getNorthWest());Lo<1700&&(er=ll(a));var io=a.length,Oo=[];for(E=0;E<io;E++){var Yi=se(a[E]);Oo.push(p.project(se([Yi.lat-er.lat,Yi.lng-er.lng])))}for(At=Gt=an=0,E=0,V=io-1;E<io;V=E++)ae=Oo[E],Se=Oo[V],st=ae.y*Se.x-Se.y*ae.x,Gt+=(ae.x+Se.x)*st,an+=(ae.y+Se.y)*st,At+=st*3;At===0?On=Oo[0]:On=[Gt/At,an/At];var _s=p.unproject(Ce(On));return se([_s.lat+er.lat,_s.lng+er.lng])}function ll(a){for(var p=0,E=0,V=0,ae=0;ae<a.length;ae++){var Se=se(a[ae]);p+=Se.lat,E+=Se.lng,V++}return se([p/V,E/V])}var ul={__proto__:null,clipPolygon:Bl,polygonCenter:qs,centroid:ll};function _i(a,p){if(!p||!a.length)return a.slice();var E=p*p;return a=be(a,E),a=ho(a,E),a}function ks(a,p,E){return Math.sqrt(In(a,p,E,!0))}function _a(a,p,E){return In(a,p,E)}function ho(a,p){var E=a.length,V=typeof Uint8Array<"u"?Uint8Array:Array,ae=new V(E);ae[0]=ae[E-1]=1,B(a,ae,p,0,E-1);var Se,st=[];for(Se=0;Se<E;Se++)ae[Se]&&st.push(a[Se]);return st}function B(a,p,E,V,ae){var Se=0,st,At,Gt;for(At=V+1;At<=ae-1;At++)Gt=In(a[At],a[V],a[ae],!0),Gt>Se&&(st=At,Se=Gt);Se>E&&(p[st]=1,B(a,p,E,V,st),B(a,p,E,st,ae))}function be(a,p){for(var E=[a[0]],V=1,ae=0,Se=a.length;V<Se;V++)hn(a[V],a[ae])>p&&(E.push(a[V]),ae=V);return ae<Se-1&&E.push(a[Se-1]),E}var Ye;function ut(a,p,E,V,ae){var Se=V?Ye:Vt(a,E),st=Vt(p,E),At,Gt,an;for(Ye=st;;){if(!(Se|st))return[a,p];if(Se&st)return!1;At=Se||st,Gt=Lt(a,p,At,E,ae),an=Vt(Gt,E),At===Se?(a=Gt,Se=an):(p=Gt,st=an)}}function Lt(a,p,E,V,ae){var Se=p.x-a.x,st=p.y-a.y,At=V.min,Gt=V.max,an,On;return E&8?(an=a.x+Se*(Gt.y-a.y)/st,On=Gt.y):E&4?(an=a.x+Se*(At.y-a.y)/st,On=At.y):E&2?(an=Gt.x,On=a.y+st*(Gt.x-a.x)/Se):E&1&&(an=At.x,On=a.y+st*(At.x-a.x)/Se),new ie(an,On,ae)}function Vt(a,p){var E=0;return a.x<p.min.x?E|=1:a.x>p.max.x&&(E|=2),a.y<p.min.y?E|=4:a.y>p.max.y&&(E|=8),E}function hn(a,p){var E=p.x-a.x,V=p.y-a.y;return E*E+V*V}function In(a,p,E,V){var ae=p.x,Se=p.y,st=E.x-ae,At=E.y-Se,Gt=st*st+At*At,an;return Gt>0&&(an=((a.x-ae)*st+(a.y-Se)*At)/Gt,an>1?(ae=E.x,Se=E.y):an>0&&(ae+=st*an,Se+=At*an)),st=a.x-ae,At=a.y-Se,V?st*st+At*At:new ie(ae,Se)}function $n(a){return!Y(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function or(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$n(a)}function _r(a,p){var E,V,ae,Se,st,At,Gt,an;if(!a||a.length===0)throw new Error("latlngs not passed");$n(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var On=se([0,0]),er=Q(a),Fr=er.getNorthWest().distanceTo(er.getSouthWest())*er.getNorthEast().distanceTo(er.getNorthWest());Fr<1700&&(On=ll(a));var Lo=a.length,io=[];for(E=0;E<Lo;E++){var Oo=se(a[E]);io.push(p.project(se([Oo.lat-On.lat,Oo.lng-On.lng])))}for(E=0,V=0;E<Lo-1;E++)V+=io[E].distanceTo(io[E+1])/2;if(V===0)an=io[0];else for(E=0,Se=0;E<Lo-1;E++)if(st=io[E],At=io[E+1],ae=st.distanceTo(At),Se+=ae,Se>V){Gt=(Se-V)/ae,an=[At.x-Gt*(At.x-st.x),At.y-Gt*(At.y-st.y)];break}var Yi=p.unproject(Ce(an));return se([Yi.lat+On.lat,Yi.lng+On.lng])}var zr={__proto__:null,simplify:_i,pointToSegmentDistance:ks,closestPointOnSegment:_a,clipSegment:ut,_getEdgeIntersection:Lt,_getBitCode:Vt,_sqClosestPointOnSegment:In,isFlat:$n,_flat:or,polylineCenter:_r},Hi={project:function(a){return new ie(a.lng,a.lat)},unproject:function(a){return new ue(a.y,a.x)},bounds:new Te([-180,-90],[180,90])},di={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Te([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var p=Math.PI/180,E=this.R,V=a.lat*p,ae=this.R_MINOR/E,Se=Math.sqrt(1-ae*ae),st=Se*Math.sin(V),At=Math.tan(Math.PI/4-V/2)/Math.pow((1-st)/(1+st),Se/2);return V=-E*Math.log(Math.max(At,1e-10)),new ie(a.lng*p*E,V)},unproject:function(a){for(var p=180/Math.PI,E=this.R,V=this.R_MINOR/E,ae=Math.sqrt(1-V*V),Se=Math.exp(-a.y/E),st=Math.PI/2-2*Math.atan(Se),At=0,Gt=.1,an;At<15&&Math.abs(Gt)>1e-7;At++)an=ae*Math.sin(st),an=Math.pow((1-an)/(1+an),ae/2),Gt=Math.PI/2-2*Math.atan(Se*an)-st,st+=Gt;return new ue(st*p,a.x*p/E)}},bi={__proto__:null,LonLat:Hi,Mercator:di,SphericalMercator:ke},po=i({},K,{code:"EPSG:3395",projection:di,transformation:function(){var a=.5/(Math.PI*di.R);return Ge(a,.5,-a,.5)}()}),bo=i({},K,{code:"EPSG:4326",projection:Hi,transformation:Ge(1/180,1,-1/180,.5)}),Ts=i({},pe,{projection:Hi,transformation:Ge(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,p){var E=p.lng-a.lng,V=p.lat-a.lat;return Math.sqrt(E*E+V*V)},infinite:!0});pe.Earth=K,pe.EPSG3395=po,pe.EPSG3857=ce,pe.EPSG900913=te,pe.EPSG4326=bo,pe.Simple=Ts;var Ur=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[f(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[f(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var p=a.target;if(p.hasLayer(this)){if(this._map=p,this._zoomAnimated=p._zoomAnimated,this.getEvents){var E=this.getEvents();p.on(E,this),this.once("remove",function(){p.off(E,this)},this)}this.onAdd(p),this.fire("add"),p.fire("layeradd",{layer:this})}}});Kr.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var p=f(a);return this._layers[p]?this:(this._layers[p]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var p=f(a);return this._layers[p]?(this._loaded&&a.onRemove(this),delete this._layers[p],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return f(a)in this._layers},eachLayer:function(a,p){for(var E in this._layers)a.call(p,this._layers[E]);return this},_addLayers:function(a){a=a?Y(a)?a:[a]:[];for(var p=0,E=a.length;p<E;p++)this.addLayer(a[p])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[f(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var p=f(a);this._zoomBoundLayers[p]&&(delete this._zoomBoundLayers[p],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,p=-1/0,E=this._getZoomSpan();for(var V in this._zoomBoundLayers){var ae=this._zoomBoundLayers[V].options;a=ae.minZoom===void 0?a:Math.min(a,ae.minZoom),p=ae.maxZoom===void 0?p:Math.max(p,ae.maxZoom)}this._layersMaxZoom=p===-1/0?void 0:p,this._layersMinZoom=a===1/0?void 0:a,E!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $o=Ur.extend({initialize:function(a,p){k(this,p),this._layers={};var E,V;if(a)for(E=0,V=a.length;E<V;E++)this.addLayer(a[E])},addLayer:function(a){var p=this.getLayerId(a);return this._layers[p]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var p=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[p]&&this._map.removeLayer(this._layers[p]),delete this._layers[p],this},hasLayer:function(a){var p=typeof a=="number"?a:this.getLayerId(a);return p in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var p=Array.prototype.slice.call(arguments,1),E,V;for(E in this._layers)V=this._layers[E],V[a]&&V[a].apply(V,p);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,p){for(var E in this._layers)a.call(p,this._layers[E]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return f(a)}}),cl=function(a,p){return new $o(a,p)},is=$o.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),$o.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),$o.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new H;for(var p in this._layers){var E=this._layers[p];a.extend(E.getBounds?E.getBounds():E.getLatLng())}return a}}),tu=function(a,p){return new is(a,p)},ra=z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){k(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,p){var E=this._getIconUrl(a);if(!E){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var V=this._createImg(E,p&&p.tagName==="IMG"?p:null);return this._setIconStyles(V,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(V.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),V},_setIconStyles:function(a,p){var E=this.options,V=E[p+"Size"];typeof V=="number"&&(V=[V,V]);var ae=Ce(V),Se=Ce(p==="shadow"&&E.shadowAnchor||E.iconAnchor||ae&&ae.divideBy(2,!0));a.className="leaflet-marker-"+p+" "+(E.className||""),Se&&(a.style.marginLeft=-Se.x+"px",a.style.marginTop=-Se.y+"px"),ae&&(a.style.width=ae.x+"px",a.style.height=ae.y+"px")},_createImg:function(a,p){return p=p||document.createElement("img"),p.src=a,p},_getIconUrl:function(a){return mt.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function xu(a){return new ra(a)}var Ga=ra.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Ga.imagePath!="string"&&(Ga.imagePath=this._detectIconPath()),(this.options.imagePath||Ga.imagePath)+ra.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var p=function(E,V,ae){var Se=V.exec(E);return Se&&Se[ae]};return a=p(a,/^url\((['"])?(.+)\1\)$/,2),a&&p(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=mn("div","leaflet-default-icon-path",document.body),p=Rr(a,"background-image")||Rr(a,"backgroundImage");if(document.body.removeChild(a),p=this._stripUrl(p),p)return p;var E=document.querySelector('link[href$="leaflet.css"]');return E?E.href.substring(0,E.href.length-11-1):""}}),Ha=yi.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Hs(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),cr(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Gn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var p=this._marker,E=p._map,V=this._marker.options.autoPanSpeed,ae=this._marker.options.autoPanPadding,Se=eo(p._icon),st=E.getPixelBounds(),At=E.getPixelOrigin(),Gt=J(st.min._subtract(At).add(ae),st.max._subtract(At).subtract(ae));if(!Gt.contains(Se)){var an=Ce((Math.max(Gt.max.x,Se.x)-Gt.max.x)/(st.max.x-Gt.max.x)-(Math.min(Gt.min.x,Se.x)-Gt.min.x)/(st.min.x-Gt.min.x),(Math.max(Gt.max.y,Se.y)-Gt.max.y)/(st.max.y-Gt.max.y)-(Math.min(Gt.min.y,Se.y)-Gt.min.y)/(st.min.y-Gt.min.y)).multiplyBy(V);E.panBy(an,{animate:!1}),this._draggable._newPos._add(an),this._draggable._startPos._add(an),fr(p._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=T(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,a)))},_onDrag:function(a){var p=this._marker,E=p._shadow,V=eo(p._icon),ae=p._map.layerPointToLatLng(V);E&&fr(E,V),p._latlng=ae,a.latlng=ae,a.oldLatLng=this._oldLatLng,p.fire("move",a).fire("drag",a)},_onDragEnd:function(a){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),wo=Ur.extend({options:{icon:new Ga,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,p){k(this,p),this._latlng=se(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var p=this._latlng;return this._latlng=se(a),this.update(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,p="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),E=a.icon.createIcon(this._icon),V=!1;E!==this._icon&&(this._icon&&this._removeIcon(),V=!0,a.title&&(E.title=a.title),E.tagName==="IMG"&&(E.alt=a.alt||"")),cr(E,p),a.keyboard&&(E.tabIndex="0",E.setAttribute("role","button")),this._icon=E,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&yr(E,"focus",this._panOnFocus,this);var ae=a.icon.createShadow(this._shadow),Se=!1;ae!==this._shadow&&(this._removeShadow(),Se=!0),ae&&(cr(ae,p),ae.alt=""),this._shadow=ae,a.opacity<1&&this._updateOpacity(),V&&this.getPane().appendChild(this._icon),this._initInteraction(),ae&&Se&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$r(this._icon,"focus",this._panOnFocus,this),Zn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Zn(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&fr(this._icon,a),this._shadow&&fr(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(p)},_initInteraction:function(){if(this.options.interactive&&(cr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ha)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ha(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&ki(this._icon,a),this._shadow&&ki(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var p=this.options.icon.options,E=p.iconSize?Ce(p.iconSize):Ce(0,0),V=p.iconAnchor?Ce(p.iconAnchor):Ce(0,0);a.panInside(this._latlng,{paddingTopLeft:V,paddingBottomRight:E.subtract(V)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ia(a,p){return new wo(a,p)}var Ns=Ur.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return k(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ms=Ns.extend({options:{fill:!0,radius:10},initialize:function(a,p){k(this,p),this._latlng=se(a),this._radius=this.options.radius},setLatLng:function(a){var p=this._latlng;return this._latlng=se(a),this.redraw(),this.fire("move",{oldLatLng:p,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var p=a&&a.radius||this._radius;return Ns.prototype.setStyle.call(this,a),this.setRadius(p),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,p=this._radiusY||a,E=this._clickTolerance(),V=[a+E,p+E];this._pxBounds=new Te(this._point.subtract(V),this._point.add(V))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function fl(a,p){return new ms(a,p)}var zo=ms.extend({initialize:function(a,p,E){if(typeof p=="number"&&(p=i({},E,{radius:p})),k(this,p),this._latlng=se(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Ns.prototype.setStyle,_project:function(){var a=this._latlng.lng,p=this._latlng.lat,E=this._map,V=E.options.crs;if(V.distance===K.distance){var ae=Math.PI/180,Se=this._mRadius/K.R/ae,st=E.project([p+Se,a]),At=E.project([p-Se,a]),Gt=st.add(At).divideBy(2),an=E.unproject(Gt).lat,On=Math.acos((Math.cos(Se*ae)-Math.sin(p*ae)*Math.sin(an*ae))/(Math.cos(p*ae)*Math.cos(an*ae)))/ae;(isNaN(On)||On===0)&&(On=Se/Math.cos(Math.PI/180*p)),this._point=Gt.subtract(E.getPixelOrigin()),this._radius=isNaN(On)?0:Gt.x-E.project([an,a-On]).x,this._radiusY=Gt.y-st.y}else{var er=V.unproject(V.project(this._latlng).subtract([this._mRadius,0]));this._point=E.latLngToLayerPoint(this._latlng),this._radius=this._point.x-E.latLngToLayerPoint(er).x}this._updateBounds()}});function os(a,p,E){return new zo(a,p,E)}var ss=Ns.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,p){k(this,p),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var p=1/0,E=null,V=In,ae,Se,st=0,At=this._parts.length;st<At;st++)for(var Gt=this._parts[st],an=1,On=Gt.length;an<On;an++){ae=Gt[an-1],Se=Gt[an];var er=V(a,ae,Se,!0);er<p&&(p=er,E=V(a,ae,Se))}return E&&(E.distance=Math.sqrt(p)),E},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _r(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,p){return p=p||this._defaultShape(),a=se(a),p.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new H,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return $n(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var p=[],E=$n(a),V=0,ae=a.length;V<ae;V++)E?(p[V]=se(a[V]),this._bounds.extend(p[V])):p[V]=this._convertLatLngs(a[V]);return p},_project:function(){var a=new Te;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),p=new ie(a,a);this._rawPxBounds&&(this._pxBounds=new Te([this._rawPxBounds.min.subtract(p),this._rawPxBounds.max.add(p)]))},_projectLatlngs:function(a,p,E){var V=a[0]instanceof ue,ae=a.length,Se,st;if(V){for(st=[],Se=0;Se<ae;Se++)st[Se]=this._map.latLngToLayerPoint(a[Se]),E.extend(st[Se]);p.push(st)}else for(Se=0;Se<ae;Se++)this._projectLatlngs(a[Se],p,E)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var p=this._parts,E,V,ae,Se,st,At,Gt;for(E=0,ae=0,Se=this._rings.length;E<Se;E++)for(Gt=this._rings[E],V=0,st=Gt.length;V<st-1;V++)At=ut(Gt[V],Gt[V+1],a,V,!0),At&&(p[ae]=p[ae]||[],p[ae].push(At[0]),(At[1]!==Gt[V+1]||V===st-2)&&(p[ae].push(At[1]),ae++))}},_simplifyPoints:function(){for(var a=this._parts,p=this.options.smoothFactor,E=0,V=a.length;E<V;E++)a[E]=_i(a[E],p)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,p){var E,V,ae,Se,st,At,Gt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(E=0,Se=this._parts.length;E<Se;E++)for(At=this._parts[E],V=0,st=At.length,ae=st-1;V<st;ae=V++)if(!(!p&&V===0)&&ks(a,At[ae],At[V])<=Gt)return!0;return!1}});function Qu(a,p){return new ss(a,p)}ss._flat=or;var Po=ss.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var p=ss.prototype._convertLatLngs.call(this,a),E=p.length;return E>=2&&p[0]instanceof ue&&p[0].equals(p[E-1])&&p.pop(),p},_setLatLngs:function(a){ss.prototype._setLatLngs.call(this,a),$n(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $n(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,p=this.options.weight,E=new ie(p,p);if(a=new Te(a.min.subtract(E),a.max.add(E)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var V=0,ae=this._rings.length,Se;V<ae;V++)Se=Bl(this._rings[V],a,!0),Se.length&&this._parts.push(Se)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var p=!1,E,V,ae,Se,st,At,Gt,an;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(Se=0,Gt=this._parts.length;Se<Gt;Se++)for(E=this._parts[Se],st=0,an=E.length,At=an-1;st<an;At=st++)V=E[st],ae=E[At],V.y>a.y!=ae.y>a.y&&a.x<(ae.x-V.x)*(a.y-V.y)/(ae.y-V.y)+V.x&&(p=!p);return p||ss.prototype._containsPoint.call(this,a,!0)}});function ba(a,p){return new Po(a,p)}var Uo=is.extend({initialize:function(a,p){k(this,p),this._layers={},a&&this.addData(a)},addData:function(a){var p=Y(a)?a:a.features,E,V,ae;if(p){for(E=0,V=p.length;E<V;E++)ae=p[E],(ae.geometries||ae.geometry||ae.features||ae.coordinates)&&this.addData(ae);return this}var Se=this.options;if(Se.filter&&!Se.filter(a))return this;var st=Vo(a,Se);return st?(st.feature=Ho(a),st.defaultOptions=st.options,this.resetStyle(st),Se.onEachFeature&&Se.onEachFeature(a,st),this.addLayer(st)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=i({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(p){this._setLayerStyle(p,a)},this)},_setLayerStyle:function(a,p){a.setStyle&&(typeof p=="function"&&(p=p(a.feature)),a.setStyle(p))}});function Vo(a,p){var E=a.type==="Feature"?a.geometry:a,V=E?E.coordinates:null,ae=[],Se=p&&p.pointToLayer,st=p&&p.coordsToLatLng||xa,At,Gt,an,On;if(!V&&!E)return null;switch(E.type){case"Point":return At=st(V),wa(Se,a,At,p);case"MultiPoint":for(an=0,On=V.length;an<On;an++)At=st(V[an]),ae.push(wa(Se,a,At,p));return new is(ae);case"LineString":case"MultiLineString":return Gt=Go(V,E.type==="LineString"?0:1,st),new ss(Gt,p);case"Polygon":case"MultiPolygon":return Gt=Go(V,E.type==="Polygon"?1:2,st),new Po(Gt,p);case"GeometryCollection":for(an=0,On=E.geometries.length;an<On;an++){var er=Vo({geometry:E.geometries[an],type:"Feature",properties:a.properties},p);er&&ae.push(er)}return new is(ae);case"FeatureCollection":for(an=0,On=E.features.length;an<On;an++){var Fr=Vo(E.features[an],p);Fr&&ae.push(Fr)}return new is(ae);default:throw new Error("Invalid GeoJSON object.")}}function wa(a,p,E,V){return a?a(p,E):new wo(E,V&&V.markersInheritOptions&&V)}function xa(a){return new ue(a[1],a[0],a[2])}function Go(a,p,E){for(var V=[],ae=0,Se=a.length,st;ae<Se;ae++)st=p?Go(a[ae],p-1,E):(E||xa)(a[ae]),V.push(st);return V}function To(a,p){return a=se(a),a.alt!==void 0?[b(a.lng,p),b(a.lat,p),b(a.alt,p)]:[b(a.lng,p),b(a.lat,p)]}function oa(a,p,E,V){for(var ae=[],Se=0,st=a.length;Se<st;Se++)ae.push(p?oa(a[Se],$n(a[Se])?0:p-1,E,V):To(a[Se],V));return!p&&E&&ae.length>0&&ae.push(ae[0].slice()),ae}function Ds(a,p){return a.feature?i({},a.feature,{geometry:p}):Ho(p)}function Ho(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var _t={toGeoJSON:function(a){return Ds(this,{type:"Point",coordinates:To(this.getLatLng(),a)})}};wo.include(_t),zo.include(_t),ms.include(_t),ss.include({toGeoJSON:function(a){var p=!$n(this._latlngs),E=oa(this._latlngs,p?1:0,!1,a);return Ds(this,{type:(p?"Multi":"")+"LineString",coordinates:E})}}),Po.include({toGeoJSON:function(a){var p=!$n(this._latlngs),E=p&&!$n(this._latlngs[0]),V=oa(this._latlngs,E?2:p?1:0,!0,a);return p||(V=[V]),Ds(this,{type:(E?"Multi":"")+"Polygon",coordinates:V})}}),$o.include({toMultiPoint:function(a){var p=[];return this.eachLayer(function(E){p.push(E.toGeoJSON(a).geometry.coordinates)}),Ds(this,{type:"MultiPoint",coordinates:p})},toGeoJSON:function(a){var p=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(p==="MultiPoint")return this.toMultiPoint(a);var E=p==="GeometryCollection",V=[];return this.eachLayer(function(ae){if(ae.toGeoJSON){var Se=ae.toGeoJSON(a);if(E)V.push(Se.geometry);else{var st=Ho(Se);st.type==="FeatureCollection"?V.push.apply(V,st.features):V.push(st)}}}),E?Ds(this,{geometries:V,type:"GeometryCollection"}):{type:"FeatureCollection",features:V}}});function Zt(a,p){return new Uo(a,p)}var Nt=Zt,kn=Ur.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,p,E){this._url=a,this._bounds=Q(p),k(this,E)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(cr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Zn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Ri(this._image),this},bringToBack:function(){return this._map&&Fi(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=Q(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",p=this._image=a?this._url:mn("img");if(cr(p,"leaflet-image-layer"),this._zoomAnimated&&cr(p,"leaflet-zoom-animated"),this.options.className&&cr(p,this.options.className),p.onselectstart=_,p.onmousemove=_,p.onload=o(this.fire,this,"load"),p.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=p.src;return}p.src=this._url,p.alt=this.options.alt},_animateZoom:function(a){var p=this._map.getZoomScale(a.zoom),E=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;fn(this._image,E,p)},_reset:function(){var a=this._image,p=new Te(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),E=p.getSize();fr(a,p.min),a.style.width=E.x+"px",a.style.height=E.y+"px"},_updateOpacity:function(){ki(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),Jn=function(a,p,E){return new kn(a,p,E)},Lr=kn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",p=this._image=a?this._url:mn("video");if(cr(p,"leaflet-image-layer"),this._zoomAnimated&&cr(p,"leaflet-zoom-animated"),this.options.className&&cr(p,this.options.className),p.onselectstart=_,p.onmousemove=_,p.onloadeddata=o(this.fire,this,"load"),a){for(var E=p.getElementsByTagName("source"),V=[],ae=0;ae<E.length;ae++)V.push(E[ae].src);this._url=E.length>0?V:[p.src];return}Y(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(p.style,"objectFit")&&(p.style.objectFit="fill"),p.autoplay=!!this.options.autoplay,p.loop=!!this.options.loop,p.muted=!!this.options.muted,p.playsInline=!!this.options.playsInline;for(var Se=0;Se<this._url.length;Se++){var st=mn("source");st.src=this._url[Se],p.appendChild(st)}}});function Zi(a,p,E){return new Lr(a,p,E)}var wi=kn.extend({_initImage:function(){var a=this._image=this._url;cr(a,"leaflet-image-layer"),this._zoomAnimated&&cr(a,"leaflet-zoom-animated"),this.options.className&&cr(a,this.options.className),a.onselectstart=_,a.onmousemove=_}});function Rl(a,p,E){return new wi(a,p,E)}var as=Ur.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,p){a&&(a instanceof ue||Y(a))?(this._latlng=se(a),k(this,p)):(k(this,a),this._source=p),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&ki(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&ki(this._container,1),this.bringToFront(),this.options.interactive&&(cr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(ki(this._container,0),this._removeTimeout=setTimeout(o(Zn,void 0,this._container),200)):Zn(this._container),this.options.interactive&&(Gn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=se(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ri(this._container),this},bringToBack:function(){return this._map&&Fi(this._container),this},_prepareOpen:function(a){var p=this._source;if(!p._map)return!1;if(p instanceof is){p=null;var E=this._source._layers;for(var V in E)if(E[V]._map){p=E[V];break}if(!p)return!1;this._source=p}if(!a)if(p.getCenter)a=p.getCenter();else if(p.getLatLng)a=p.getLatLng();else if(p.getBounds)a=p.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,p=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof p=="string")a.innerHTML=p;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(p)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),p=Ce(this.options.offset),E=this._getAnchor();this._zoomAnimated?fr(this._container,a.add(E)):p=p.add(a).add(E);var V=this._containerBottom=-p.y,ae=this._containerLeft=-Math.round(this._containerWidth/2)+p.x;this._container.style.bottom=V+"px",this._container.style.left=ae+"px"}},_getAnchor:function(){return[0,0]}});Kr.include({_initOverlay:function(a,p,E,V){var ae=p;return ae instanceof a||(ae=new a(V).setContent(p)),E&&ae.setLatLng(E),ae}}),Ur.include({_initOverlay:function(a,p,E,V){var ae=E;return ae instanceof a?(k(ae,V),ae._source=this):(ae=p&&!V?p:new a(V,this),ae.setContent(E)),ae}});var Ki=as.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,as.prototype.openOn.call(this,a)},onAdd:function(a){as.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ns||this._source.on("preclick",Ua))},onRemove:function(a){as.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ns||this._source.off("preclick",Ua))},getEvents:function(){var a=as.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",p=this._container=mn("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),E=this._wrapper=mn("div",a+"-content-wrapper",p);if(this._contentNode=mn("div",a+"-content",E),kl(p),wu(this._contentNode),yr(p,"contextmenu",Ua),this._tipContainer=mn("div",a+"-tip-container",p),this._tip=mn("div",a+"-tip",this._tipContainer),this.options.closeButton){var V=this._closeButton=mn("a",a+"-close-button",p);V.setAttribute("role","button"),V.setAttribute("aria-label","Close popup"),V.href="#close",V.innerHTML='<span aria-hidden="true">&#215;</span>',yr(V,"click",function(ae){Er(ae),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,p=a.style;p.width="",p.whiteSpace="nowrap";var E=a.offsetWidth;E=Math.min(E,this.options.maxWidth),E=Math.max(E,this.options.minWidth),p.width=E+1+"px",p.whiteSpace="",p.height="";var V=a.offsetHeight,ae=this.options.maxHeight,Se="leaflet-popup-scrolled";ae&&V>ae?(p.height=ae+"px",cr(a,Se)):Gn(a,Se),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),E=this._getAnchor();fr(this._container,p.add(E))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,p=parseInt(Rr(this._container,"marginBottom"),10)||0,E=this._container.offsetHeight+p,V=this._containerWidth,ae=new ie(this._containerLeft,-E-this._containerBottom);ae._add(eo(this._container));var Se=a.layerPointToContainerPoint(ae),st=Ce(this.options.autoPanPadding),At=Ce(this.options.autoPanPaddingTopLeft||st),Gt=Ce(this.options.autoPanPaddingBottomRight||st),an=a.getSize(),On=0,er=0;Se.x+V+Gt.x>an.x&&(On=Se.x+V-an.x+Gt.x),Se.x-On-At.x<0&&(On=Se.x-At.x),Se.y+E+Gt.y>an.y&&(er=Se.y+E-an.y+Gt.y),Se.y-er-At.y<0&&(er=Se.y-At.y),(On||er)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([On,er]))}},_getAnchor:function(){return Ce(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),sa=function(a,p){return new Ki(a,p)};Kr.mergeOptions({closePopupOnClick:!0}),Kr.include({openPopup:function(a,p,E){return this._initOverlay(Ki,a,p,E).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),Ur.include({bindPopup:function(a,p){return this._popup=this._initOverlay(Ki,this._popup,a,p),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof is||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Hr(a);var p=a.layer||a.target;if(this._popup._source===p&&!(p instanceof Ns)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=p,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var La=as.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){as.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){as.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=as.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",p=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=mn("div",p),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var p,E,V=this._map,ae=this._container,Se=V.latLngToContainerPoint(V.getCenter()),st=V.layerPointToContainerPoint(a),At=this.options.direction,Gt=ae.offsetWidth,an=ae.offsetHeight,On=Ce(this.options.offset),er=this._getAnchor();At==="top"?(p=Gt/2,E=an):At==="bottom"?(p=Gt/2,E=0):At==="center"?(p=Gt/2,E=an/2):At==="right"?(p=0,E=an/2):At==="left"?(p=Gt,E=an/2):st.x<Se.x?(At="right",p=0,E=an/2):(At="left",p=Gt+(On.x+er.x)*2,E=an/2),a=a.subtract(Ce(p,E,!0)).add(On).add(er),Gn(ae,"leaflet-tooltip-right"),Gn(ae,"leaflet-tooltip-left"),Gn(ae,"leaflet-tooltip-top"),Gn(ae,"leaflet-tooltip-bottom"),cr(ae,"leaflet-tooltip-"+At),fr(ae,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&ki(this._container,a)},_animateZoom:function(a){var p=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(p)},_getAnchor:function(){return Ce(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),aa=function(a,p){return new La(a,p)};Kr.include({openTooltip:function(a,p,E){return this._initOverlay(La,a,p,E).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),Ur.include({bindTooltip:function(a,p){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(La,this._tooltip,a,p),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var p=a?"off":"on",E={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?E.add=this._openTooltip:(E.mouseover=this._openTooltip,E.mouseout=this.closeTooltip,E.click=this._openTooltip,this._map?this._addFocusListeners():E.add=this._addFocusListeners),this._tooltip.options.sticky&&(E.mousemove=this._moveTooltip),this[p](E),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof is||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&(yr(p,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),yr(p,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var p=typeof a.getElement=="function"&&a.getElement();p&&p.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var p=this;this._map.once("moveend",function(){p._openOnceFlag=!1,p._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var p=a.latlng,E,V;this._tooltip.options.sticky&&a.originalEvent&&(E=this._map.mouseEventToContainerPoint(a.originalEvent),V=this._map.containerPointToLayerPoint(E),p=this._map.layerPointToLatLng(V)),this._tooltip.setLatLng(p)}});var la=ra.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var p=a&&a.tagName==="DIV"?a:document.createElement("div"),E=this.options;if(E.html instanceof Element?(Ei(p),p.appendChild(E.html)):p.innerHTML=E.html!==!1?E.html:"",E.bgPos){var V=Ce(E.bgPos);p.style.backgroundPosition=-V.x+"px "+-V.y+"px"}return this._setIconStyles(p,"icon"),p},createShadow:function(){return null}});function ua(a){return new la(a)}ra.Default=Ga;var Yr=Ur.extend({options:{tileSize:256,opacity:1,updateWhenIdle:mt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){k(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Zn(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ri(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Fi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof ie?a:new ie(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var p=this.getPane().children,E=-a(-1/0,1/0),V=0,ae=p.length,Se;V<ae;V++)Se=p[V].style.zIndex,p[V]!==this._container&&Se&&(E=a(E,+Se));isFinite(E)&&(this.options.zIndex=E+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!mt.ielt9){ki(this._container,this.options.opacity);var a=+new Date,p=!1,E=!1;for(var V in this._tiles){var ae=this._tiles[V];if(!(!ae.current||!ae.loaded)){var Se=Math.min(1,(a-ae.loaded)/200);ki(ae.el,Se),Se<1?p=!0:(ae.active?E=!0:this._onOpaqueTile(ae),ae.active=!0)}}E&&!this._noPrune&&this._pruneTiles(),p&&(N(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=mn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,p=this.options.maxZoom;if(a!==void 0){for(var E in this._levels)E=Number(E),this._levels[E].el.children.length||E===a?(this._levels[E].el.style.zIndex=p-Math.abs(a-E),this._onUpdateLevel(E)):(Zn(this._levels[E].el),this._removeTilesAtZoom(E),this._onRemoveLevel(E),delete this._levels[E]);var V=this._levels[a],ae=this._map;return V||(V=this._levels[a]={},V.el=mn("div","leaflet-tile-container leaflet-zoom-animated",this._container),V.el.style.zIndex=p,V.origin=ae.project(ae.unproject(ae.getPixelOrigin()),a).round(),V.zoom=a,this._setZoomTransform(V,ae.getCenter(),ae.getZoom()),_(V.el.offsetWidth),this._onCreateLevel(V)),this._level=V,V}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var a,p,E=this._map.getZoom();if(E>this.options.maxZoom||E<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)p=this._tiles[a],p.retain=p.current;for(a in this._tiles)if(p=this._tiles[a],p.current&&!p.active){var V=p.coords;this._retainParent(V.x,V.y,V.z,V.z-5)||this._retainChildren(V.x,V.y,V.z,V.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var p in this._tiles)this._tiles[p].coords.z===a&&this._removeTile(p)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Zn(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,p,E,V){var ae=Math.floor(a/2),Se=Math.floor(p/2),st=E-1,At=new ie(+ae,+Se);At.z=+st;var Gt=this._tileCoordsToKey(At),an=this._tiles[Gt];return an&&an.active?(an.retain=!0,!0):(an&&an.loaded&&(an.retain=!0),st>V?this._retainParent(ae,Se,st,V):!1)},_retainChildren:function(a,p,E,V){for(var ae=2*a;ae<2*a+2;ae++)for(var Se=2*p;Se<2*p+2;Se++){var st=new ie(ae,Se);st.z=E+1;var At=this._tileCoordsToKey(st),Gt=this._tiles[At];if(Gt&&Gt.active){Gt.retain=!0;continue}else Gt&&Gt.loaded&&(Gt.retain=!0);E+1<V&&this._retainChildren(ae,Se,E+1,V)}},_resetView:function(a){var p=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),p,p)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var p=this.options;return p.minNativeZoom!==void 0&&a<p.minNativeZoom?p.minNativeZoom:p.maxNativeZoom!==void 0&&p.maxNativeZoom<a?p.maxNativeZoom:a},_setView:function(a,p,E,V){var ae=Math.round(p);this.options.maxZoom!==void 0&&ae>this.options.maxZoom||this.options.minZoom!==void 0&&ae<this.options.minZoom?ae=void 0:ae=this._clampZoom(ae);var Se=this.options.updateWhenZooming&&ae!==this._tileZoom;(!V||Se)&&(this._tileZoom=ae,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ae!==void 0&&this._update(a),E||this._pruneTiles(),this._noPrune=!!E),this._setZoomTransforms(a,p)},_setZoomTransforms:function(a,p){for(var E in this._levels)this._setZoomTransform(this._levels[E],a,p)},_setZoomTransform:function(a,p,E){var V=this._map.getZoomScale(E,a.zoom),ae=a.origin.multiplyBy(V).subtract(this._map._getNewPixelOrigin(p,E)).round();mt.any3d?fn(a.el,ae,V):fr(a.el,ae)},_resetGrid:function(){var a=this._map,p=a.options.crs,E=this._tileSize=this.getTileSize(),V=this._tileZoom,ae=this._map.getPixelWorldBounds(this._tileZoom);ae&&(this._globalTileRange=this._pxBoundsToTileRange(ae)),this._wrapX=p.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,p.wrapLng[0]],V).x/E.x),Math.ceil(a.project([0,p.wrapLng[1]],V).x/E.y)],this._wrapY=p.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([p.wrapLat[0],0],V).y/E.x),Math.ceil(a.project([p.wrapLat[1],0],V).y/E.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var p=this._map,E=p._animatingZoom?Math.max(p._animateToZoom,p.getZoom()):p.getZoom(),V=p.getZoomScale(E,this._tileZoom),ae=p.project(a,this._tileZoom).floor(),Se=p.getSize().divideBy(V*2);return new Te(ae.subtract(Se),ae.add(Se))},_update:function(a){var p=this._map;if(p){var E=this._clampZoom(p.getZoom());if(a===void 0&&(a=p.getCenter()),this._tileZoom!==void 0){var V=this._getTiledPixelBounds(a),ae=this._pxBoundsToTileRange(V),Se=ae.getCenter(),st=[],At=this.options.keepBuffer,Gt=new Te(ae.getBottomLeft().subtract([At,-At]),ae.getTopRight().add([At,-At]));if(!(isFinite(ae.min.x)&&isFinite(ae.min.y)&&isFinite(ae.max.x)&&isFinite(ae.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var an in this._tiles){var On=this._tiles[an].coords;(On.z!==this._tileZoom||!Gt.contains(new ie(On.x,On.y)))&&(this._tiles[an].current=!1)}if(Math.abs(E-this._tileZoom)>1){this._setView(a,E);return}for(var er=ae.min.y;er<=ae.max.y;er++)for(var Fr=ae.min.x;Fr<=ae.max.x;Fr++){var Lo=new ie(Fr,er);if(Lo.z=this._tileZoom,!!this._isValidTile(Lo)){var io=this._tiles[this._tileCoordsToKey(Lo)];io?io.current=!0:st.push(Lo)}}if(st.sort(function(Yi,_s){return Yi.distanceTo(Se)-_s.distanceTo(Se)}),st.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Oo=document.createDocumentFragment();for(Fr=0;Fr<st.length;Fr++)this._addTile(st[Fr],Oo);this._level.el.appendChild(Oo)}}}},_isValidTile:function(a){var p=this._map.options.crs;if(!p.infinite){var E=this._globalTileRange;if(!p.wrapLng&&(a.x<E.min.x||a.x>E.max.x)||!p.wrapLat&&(a.y<E.min.y||a.y>E.max.y))return!1}if(!this.options.bounds)return!0;var V=this._tileCoordsToBounds(a);return Q(this.options.bounds).overlaps(V)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var p=this._map,E=this.getTileSize(),V=a.scaleBy(E),ae=V.add(E),Se=p.unproject(V,a.z),st=p.unproject(ae,a.z);return[Se,st]},_tileCoordsToBounds:function(a){var p=this._tileCoordsToNwSe(a),E=new H(p[0],p[1]);return this.options.noWrap||(E=this._map.wrapLatLngBounds(E)),E},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var p=a.split(":"),E=new ie(+p[0],+p[1]);return E.z=+p[2],E},_removeTile:function(a){var p=this._tiles[a];p&&(Zn(p.el),delete this._tiles[a],this.fire("tileunload",{tile:p.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){cr(a,"leaflet-tile");var p=this.getTileSize();a.style.width=p.x+"px",a.style.height=p.y+"px",a.onselectstart=_,a.onmousemove=_,mt.ielt9&&this.options.opacity<1&&ki(a,this.options.opacity)},_addTile:function(a,p){var E=this._getTilePos(a),V=this._tileCoordsToKey(a),ae=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(ae),this.createTile.length<2&&T(o(this._tileReady,this,a,null,ae)),fr(ae,E),this._tiles[V]={el:ae,coords:a,current:!0},p.appendChild(ae),this.fire("tileloadstart",{tile:ae,coords:a})},_tileReady:function(a,p,E){p&&this.fire("tileerror",{error:p,tile:E,coords:a});var V=this._tileCoordsToKey(a);E=this._tiles[V],E&&(E.loaded=+new Date,this._map._fadeAnimated?(ki(E.el,0),N(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(E.active=!0,this._pruneTiles()),p||(cr(E.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:E.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),mt.ielt9||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var p=new ie(this._wrapX?m(a.x,this._wrapX):a.x,this._wrapY?m(a.y,this._wrapY):a.y);return p.z=a.z,p},_pxBoundsToTileRange:function(a){var p=this.getTileSize();return new Te(a.min.unscaleBy(p).floor(),a.max.unscaleBy(p).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function Ws(a){return new Yr(a)}var No=Yr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,p){this._url=a,p=k(this,p),p.detectRetina&&mt.retina&&p.maxZoom>0?(p.tileSize=Math.floor(p.tileSize/2),p.zoomReverse?(p.zoomOffset--,p.minZoom=Math.min(p.maxZoom,p.minZoom+1)):(p.zoomOffset++,p.maxZoom=Math.max(p.minZoom,p.maxZoom-1)),p.minZoom=Math.max(0,p.minZoom)):p.zoomReverse?p.minZoom=Math.min(p.maxZoom,p.minZoom):p.maxZoom=Math.max(p.minZoom,p.maxZoom),typeof p.subdomains=="string"&&(p.subdomains=p.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,p){return this._url===a&&p===void 0&&(p=!0),this._url=a,p||this.redraw(),this},createTile:function(a,p){var E=document.createElement("img");return yr(E,"load",o(this._tileOnLoad,this,p,E)),yr(E,"error",o(this._tileOnError,this,p,E)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(E.referrerPolicy=this.options.referrerPolicy),E.alt="",E.src=this.getTileUrl(a),E},getTileUrl:function(a){var p={r:mt.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var E=this._globalTileRange.max.y-a.y;this.options.tms&&(p.y=E),p["-y"]=E}return R(this._url,i(p,this.options))},_tileOnLoad:function(a,p){mt.ielt9?setTimeout(o(a,this,null,p),0):a(null,p)},_tileOnError:function(a,p,E){var V=this.options.errorTileUrl;V&&p.getAttribute("src")!==V&&(p.src=V),a(E,p)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,p=this.options.maxZoom,E=this.options.zoomReverse,V=this.options.zoomOffset;return E&&(a=p-a),a+V},_getSubdomain:function(a){var p=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[p]},_abortLoading:function(){var a,p;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(p=this._tiles[a].el,p.onload=_,p.onerror=_,!p.complete)){p.src=he;var E=this._tiles[a].coords;Zn(p),delete this._tiles[a],this.fire("tileabort",{tile:p,coords:E})}},_removeTile:function(a){var p=this._tiles[a];if(p)return p.el.setAttribute("src",he),Yr.prototype._removeTile.call(this,a)},_tileReady:function(a,p,E){if(!(!this._map||E&&E.getAttribute("src")===he))return Yr.prototype._tileReady.call(this,a,p,E)}});function xi(a,p){return new No(a,p)}var Ti=No.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,p){this._url=a;var E=i({},this.defaultWmsParams);for(var V in p)V in this.options||(E[V]=p[V]);p=k(this,p);var ae=p.detectRetina&&mt.retina?2:1,Se=this.getTileSize();E.width=Se.x*ae,E.height=Se.y*ae,this.wmsParams=E},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var p=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[p]=this._crs.code,No.prototype.onAdd.call(this,a)},getTileUrl:function(a){var p=this._tileCoordsToNwSe(a),E=this._crs,V=J(E.project(p[0]),E.project(p[1])),ae=V.min,Se=V.max,st=(this._wmsVersion>=1.3&&this._crs===bo?[ae.y,ae.x,Se.y,Se.x]:[ae.x,ae.y,Se.x,Se.y]).join(","),At=No.prototype.getTileUrl.call(this,a);return At+F(this.wmsParams,At,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+st},setParams:function(a,p){return i(this.wmsParams,a),p||this.redraw(),this}});function go(a,p){return new Ti(a,p)}No.WMS=Ti,xi.wms=go;var Ui=Ur.extend({options:{padding:.1},initialize:function(a){k(this,a),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),cr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,p){var E=this._map.getZoomScale(p,this._zoom),V=this._map.getSize().multiplyBy(.5+this.options.padding),ae=this._map.project(this._center,p),Se=V.multiplyBy(-E).add(ae).subtract(this._map._getNewPixelOrigin(a,p));mt.any3d?fn(this._container,Se,E):fr(this._container,Se)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,p=this._map.getSize(),E=this._map.containerPointToLayerPoint(p.multiplyBy(-a)).round();this._bounds=new Te(E,E.add(p.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Is=Ui.extend({options:{tolerance:0},getEvents:function(){var a=Ui.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");yr(a,"mousemove",this._onMouseMove,this),yr(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),yr(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,Zn(this._container),$r(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var p in this._layers)a=this._layers[p],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var a=this._bounds,p=this._container,E=a.getSize(),V=mt.retina?2:1;fr(p,a.min),p.width=V*E.x,p.height=V*E.y,p.style.width=E.x+"px",p.style.height=E.y+"px",mt.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[f(a)]=a;var p=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=p),this._drawLast=p,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var p=a._order,E=p.next,V=p.prev;E?E.prev=V:this._drawLast=V,V?V.next=E:this._drawFirst=E,delete a._order,delete this._layers[f(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var p=a.options.dashArray.split(/[, ]+/),E=[],V,ae;for(ae=0;ae<p.length;ae++){if(V=Number(p[ae]),isNaN(V))return;E.push(V)}a.options._dashArray=E}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var p=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Te,this._redrawBounds.extend(a._pxBounds.min.subtract([p,p])),this._redrawBounds.extend(a._pxBounds.max.add([p,p]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var p=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,p.x,p.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,p=this._redrawBounds;if(this._ctx.save(),p){var E=p.getSize();this._ctx.beginPath(),this._ctx.rect(p.min.x,p.min.y,E.x,E.y),this._ctx.clip()}this._drawing=!0;for(var V=this._drawFirst;V;V=V.next)a=V.layer,(!p||a._pxBounds&&a._pxBounds.intersects(p))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,p){if(this._drawing){var E,V,ae,Se,st=a._parts,At=st.length,Gt=this._ctx;if(At){for(Gt.beginPath(),E=0;E<At;E++){for(V=0,ae=st[E].length;V<ae;V++)Se=st[E][V],Gt[V?"lineTo":"moveTo"](Se.x,Se.y);p&&Gt.closePath()}this._fillStroke(Gt,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var p=a._point,E=this._ctx,V=Math.max(Math.round(a._radius),1),ae=(Math.max(Math.round(a._radiusY),1)||V)/V;ae!==1&&(E.save(),E.scale(1,ae)),E.beginPath(),E.arc(p.x,p.y/ae,V,0,Math.PI*2,!1),ae!==1&&E.restore(),this._fillStroke(E,a)}},_fillStroke:function(a,p){var E=p.options;E.fill&&(a.globalAlpha=E.fillOpacity,a.fillStyle=E.fillColor||E.color,a.fill(E.fillRule||"evenodd")),E.stroke&&E.weight!==0&&(a.setLineDash&&a.setLineDash(p.options&&p.options._dashArray||[]),a.globalAlpha=E.opacity,a.lineWidth=E.weight,a.strokeStyle=E.color,a.lineCap=E.lineCap,a.lineJoin=E.lineJoin,a.stroke())},_onClick:function(a){for(var p=this._map.mouseEventToLayerPoint(a),E,V,ae=this._drawFirst;ae;ae=ae.next)E=ae.layer,E.options.interactive&&E._containsPoint(p)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(E))&&(V=E);this._fireEvent(V?[V]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var p=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,p)}},_handleMouseOut:function(a){var p=this._hoveredLayer;p&&(Gn(this._container,"leaflet-interactive"),this._fireEvent([p],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,p){if(!this._mouseHoverThrottled){for(var E,V,ae=this._drawFirst;ae;ae=ae.next)E=ae.layer,E.options.interactive&&E._containsPoint(p)&&(V=E);V!==this._hoveredLayer&&(this._handleMouseOut(a),V&&(cr(this._container,"leaflet-interactive"),this._fireEvent([V],a,"mouseover"),this._hoveredLayer=V)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,p,E){this._map._fireDOMEvent(p,E||p.type,a)},_bringToFront:function(a){var p=a._order;if(p){var E=p.next,V=p.prev;if(E)E.prev=V;else return;V?V.next=E:E&&(this._drawFirst=E),p.prev=this._drawLast,this._drawLast.next=p,p.next=null,this._drawLast=p,this._requestRedraw(a)}},_bringToBack:function(a){var p=a._order;if(p){var E=p.next,V=p.prev;if(V)V.next=E;else return;E?E.prev=V:V&&(this._drawLast=V),p.prev=null,p.next=this._drawFirst,this._drawFirst.prev=p,this._drawFirst=p,this._requestRedraw(a)}}});function vs(a){return mt.canvas?new Is(a):null}var js=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Lu={_initContainer:function(){this._container=mn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ui.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var p=a._container=js("shape");cr(p,"leaflet-vml-shape "+(this.options.className||"")),p.coordsize="1 1",a._path=js("path"),p.appendChild(a._path),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){var p=a._container;this._container.appendChild(p),a.options.interactive&&a.addInteractiveTarget(p)},_removePath:function(a){var p=a._container;Zn(p),a.removeInteractiveTarget(p),delete this._layers[f(a)]},_updateStyle:function(a){var p=a._stroke,E=a._fill,V=a.options,ae=a._container;ae.stroked=!!V.stroke,ae.filled=!!V.fill,V.stroke?(p||(p=a._stroke=js("stroke")),ae.appendChild(p),p.weight=V.weight+"px",p.color=V.color,p.opacity=V.opacity,V.dashArray?p.dashStyle=Y(V.dashArray)?V.dashArray.join(" "):V.dashArray.replace(/( *, *)/g," "):p.dashStyle="",p.endcap=V.lineCap.replace("butt","flat"),p.joinstyle=V.lineJoin):p&&(ae.removeChild(p),a._stroke=null),V.fill?(E||(E=a._fill=js("fill")),ae.appendChild(E),E.color=V.fillColor||V.color,E.opacity=V.fillOpacity):E&&(ae.removeChild(E),a._fill=null)},_updateCircle:function(a){var p=a._point.round(),E=Math.round(a._radius),V=Math.round(a._radiusY||E);this._setPath(a,a._empty()?"M0 0":"AL "+p.x+","+p.y+" "+E+","+V+" 0,"+65535*360)},_setPath:function(a,p){a._path.v=p},_bringToFront:function(a){Ri(a._container)},_bringToBack:function(a){Fi(a._container)}},ca=mt.vml?js:ye,xo=Ui.extend({_initContainer:function(){this._container=ca("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ca("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Zn(this._container),$r(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var a=this._bounds,p=a.getSize(),E=this._container;(!this._svgSize||!this._svgSize.equals(p))&&(this._svgSize=p,E.setAttribute("width",p.x),E.setAttribute("height",p.y)),fr(E,a.min),E.setAttribute("viewBox",[a.min.x,a.min.y,p.x,p.y].join(" ")),this.fire("update")}},_initPath:function(a){var p=a._path=ca("path");a.options.className&&cr(p,a.options.className),a.options.interactive&&cr(p,"leaflet-interactive"),this._updateStyle(a),this._layers[f(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Zn(a._path),a.removeInteractiveTarget(a._path),delete this._layers[f(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var p=a._path,E=a.options;p&&(E.stroke?(p.setAttribute("stroke",E.color),p.setAttribute("stroke-opacity",E.opacity),p.setAttribute("stroke-width",E.weight),p.setAttribute("stroke-linecap",E.lineCap),p.setAttribute("stroke-linejoin",E.lineJoin),E.dashArray?p.setAttribute("stroke-dasharray",E.dashArray):p.removeAttribute("stroke-dasharray"),E.dashOffset?p.setAttribute("stroke-dashoffset",E.dashOffset):p.removeAttribute("stroke-dashoffset")):p.setAttribute("stroke","none"),E.fill?(p.setAttribute("fill",E.fillColor||E.color),p.setAttribute("fill-opacity",E.fillOpacity),p.setAttribute("fill-rule",E.fillRule||"evenodd")):p.setAttribute("fill","none"))},_updatePoly:function(a,p){this._setPath(a,de(a._parts,p))},_updateCircle:function(a){var p=a._point,E=Math.max(Math.round(a._radius),1),V=Math.max(Math.round(a._radiusY),1)||E,ae="a"+E+","+V+" 0 1,0 ",Se=a._empty()?"M0 0":"M"+(p.x-E)+","+p.y+ae+E*2+",0 "+ae+-E*2+",0 ";this._setPath(a,Se)},_setPath:function(a,p){a._path.setAttribute("d",p)},_bringToFront:function(a){Ri(a._path)},_bringToBack:function(a){Fi(a._path)}});mt.vml&&xo.include(Lu);function $i(a){return mt.svg||mt.vml?new xo(a):null}Kr.include({getRenderer:function(a){var p=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return p||(p=this._renderer=this._createRenderer()),this.hasLayer(p)||this.addLayer(p),p},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var p=this._paneRenderers[a];return p===void 0&&(p=this._createRenderer({pane:a}),this._paneRenderers[a]=p),p},_createRenderer:function(a){return this.options.preferCanvas&&vs(a)||$i(a)}});var qo=Po.extend({initialize:function(a,p){Po.prototype.initialize.call(this,this._boundsToLatLngs(a),p)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=Q(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function ys(a,p){return new qo(a,p)}xo.create=ca,xo.pointsToPath=de,Uo.geometryToLayer=Vo,Uo.coordsToLatLng=xa,Uo.coordsToLatLngs=Go,Uo.latLngToCoords=To,Uo.latLngsToCoords=oa,Uo.getFeature=Ds,Uo.asFeature=Ho,Kr.mergeOptions({boxZoom:!0});var pr=yi.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){yr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$r(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Zn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ao(),ol(),this._startPoint=this._map.mouseEventToContainerPoint(a),yr(document,{contextmenu:Hr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=mn("div","leaflet-zoom-box",this._container),cr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var p=new Te(this._point,this._startPoint),E=p.getSize();fr(this._box,p.min),this._box.style.width=E.x+"px",this._box.style.height=E.y+"px"},_finish:function(){this._moved&&(Zn(this._box),Gn(this._container,"leaflet-crosshair")),_o(),jr(),$r(document,{contextmenu:Hr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var p=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(p).fire("boxzoomend",{boxZoomBounds:p})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Kr.addInitHook("addHandler","boxZoom",pr),Kr.mergeOptions({doubleClickZoom:!0});var Sa=yi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var p=this._map,E=p.getZoom(),V=p.options.zoomDelta,ae=a.originalEvent.shiftKey?E-V:E+V;p.options.doubleClickZoom==="center"?p.setZoom(ae):p.setZoomAround(a.containerPoint,ae)}});Kr.addInitHook("addHandler","doubleClickZoom",Sa),Kr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ea=yi.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Hs(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}cr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Gn(this._map._container,"leaflet-grab"),Gn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var p=Q(this._map.options.maxBounds);this._offsetLimit=J(this._map.latLngToContainerPoint(p.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(p.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var p=this._lastTime=+new Date,E=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(E),this._times.push(p),this._prunePositions(p)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),p=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=p.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,p){return a-(a-p)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),p=this._offsetLimit;a.x<p.min.x&&(a.x=this._viscousLimit(a.x,p.min.x)),a.y<p.min.y&&(a.y=this._viscousLimit(a.y,p.min.y)),a.x>p.max.x&&(a.x=this._viscousLimit(a.x,p.max.x)),a.y>p.max.y&&(a.y=this._viscousLimit(a.y,p.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,p=Math.round(a/2),E=this._initialWorldOffset,V=this._draggable._newPos.x,ae=(V-p+E)%a+p-E,Se=(V+p+E)%a-p-E,st=Math.abs(ae+E)<Math.abs(Se+E)?ae:Se;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=st},_onDragEnd:function(a){var p=this._map,E=p.options,V=!E.inertia||a.noInertia||this._times.length<2;if(p.fire("dragend",a),V)p.fire("moveend");else{this._prunePositions(+new Date);var ae=this._lastPos.subtract(this._positions[0]),Se=(this._lastTime-this._times[0])/1e3,st=E.easeLinearity,At=ae.multiplyBy(st/Se),Gt=At.distanceTo([0,0]),an=Math.min(E.inertiaMaxSpeed,Gt),On=At.multiplyBy(an/Gt),er=an/(E.inertiaDeceleration*st),Fr=On.multiplyBy(-er/2).round();!Fr.x&&!Fr.y?p.fire("moveend"):(Fr=p._limitOffset(Fr,p.options.maxBounds),T(function(){p.panBy(Fr,{duration:er,easeLinearity:st,noMoveStart:!0,animate:!0})}))}}});Kr.addInitHook("addHandler","dragging",Ea),Kr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zs=yi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),yr(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$r(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,p=document.documentElement,E=a.scrollTop||p.scrollTop,V=a.scrollLeft||p.scrollLeft;this._map._container.focus(),window.scrollTo(V,E)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var p=this._panKeys={},E=this.keyCodes,V,ae;for(V=0,ae=E.left.length;V<ae;V++)p[E.left[V]]=[-1*a,0];for(V=0,ae=E.right.length;V<ae;V++)p[E.right[V]]=[a,0];for(V=0,ae=E.down.length;V<ae;V++)p[E.down[V]]=[0,a];for(V=0,ae=E.up.length;V<ae;V++)p[E.up[V]]=[0,-1*a]},_setZoomDelta:function(a){var p=this._zoomKeys={},E=this.keyCodes,V,ae;for(V=0,ae=E.zoomIn.length;V<ae;V++)p[E.zoomIn[V]]=a;for(V=0,ae=E.zoomOut.length;V<ae;V++)p[E.zoomOut[V]]=-a},_addHooks:function(){yr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$r(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var p=a.keyCode,E=this._map,V;if(p in this._panKeys){if(!E._panAnim||!E._panAnim._inProgress)if(V=this._panKeys[p],a.shiftKey&&(V=Ce(V).multiplyBy(3)),E.options.maxBounds&&(V=E._limitOffset(Ce(V),E.options.maxBounds)),E.options.worldCopyJump){var ae=E.wrapLatLng(E.unproject(E.project(E.getCenter()).add(V)));E.panTo(ae)}else E.panBy(V)}else if(p in this._zoomKeys)E.setZoom(E.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[p]);else if(p===27&&E._popup&&E._popup.options.closeOnEscapeKey)E.closePopup();else return;Hr(a)}}});Kr.addInitHook("addHandler","keyboard",Zs),Kr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ls=yi.extend({addHooks:function(){yr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$r(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var p=Xl(a),E=this._map.options.wheelDebounceTime;this._delta+=p,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var V=Math.max(E-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),V),Hr(a)},_performZoom:function(){var a=this._map,p=a.getZoom(),E=this._map.options.zoomSnap||0;a._stop();var V=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ae=4*Math.log(2/(1+Math.exp(-Math.abs(V))))/Math.LN2,Se=E?Math.ceil(ae/E)*E:ae,st=a._limitZoom(p+(this._delta>0?Se:-Se))-p;this._delta=0,this._startTime=null,st&&(a.options.scrollWheelZoom==="center"?a.setZoom(p+st):a.setZoomAround(this._lastMousePos,p+st))}});Kr.addInitHook("addHandler","scrollWheelZoom",ls);var bc=600;Kr.mergeOptions({tapHold:mt.touchNative&&mt.safari&&mt.mobile,tapTolerance:15});var Do=yi.extend({addHooks:function(){yr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$r(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var p=a.touches[0];this._startPos=this._newPos=new ie(p.clientX,p.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(yr(document,"touchend",Er),yr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",p))},this),bc),yr(document,"touchend touchcancel contextmenu",this._cancel,this),yr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){$r(document,"touchend",Er),$r(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),$r(document,"touchend touchcancel contextmenu",this._cancel,this),$r(document,"touchmove",this._onMove,this)},_onMove:function(a){var p=a.touches[0];this._newPos=new ie(p.clientX,p.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,p){var E=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY});E._simulated=!0,p.target.dispatchEvent(E)}});Kr.addInitHook("addHandler","tapHold",Do),Kr.mergeOptions({touchZoom:mt.touch,bounceAtZoomLimits:!0});var Io=yi.extend({addHooks:function(){cr(this._map._container,"leaflet-touch-zoom"),yr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Gn(this._map._container,"leaflet-touch-zoom"),$r(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var p=this._map;if(!(!a.touches||a.touches.length!==2||p._animatingZoom||this._zooming)){var E=p.mouseEventToContainerPoint(a.touches[0]),V=p.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=p.getSize()._divideBy(2),this._startLatLng=p.containerPointToLatLng(this._centerPoint),p.options.touchZoom!=="center"&&(this._pinchStartLatLng=p.containerPointToLatLng(E.add(V)._divideBy(2))),this._startDist=E.distanceTo(V),this._startZoom=p.getZoom(),this._moved=!1,this._zooming=!0,p._stop(),yr(document,"touchmove",this._onTouchMove,this),yr(document,"touchend touchcancel",this._onTouchEnd,this),Er(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var p=this._map,E=p.mouseEventToContainerPoint(a.touches[0]),V=p.mouseEventToContainerPoint(a.touches[1]),ae=E.distanceTo(V)/this._startDist;if(this._zoom=p.getScaleZoom(ae,this._startZoom),!p.options.bounceAtZoomLimits&&(this._zoom<p.getMinZoom()&&ae<1||this._zoom>p.getMaxZoom()&&ae>1)&&(this._zoom=p._limitZoom(this._zoom)),p.options.touchZoom==="center"){if(this._center=this._startLatLng,ae===1)return}else{var Se=E._add(V)._divideBy(2)._subtract(this._centerPoint);if(ae===1&&Se.x===0&&Se.y===0)return;this._center=p.unproject(p.project(this._pinchStartLatLng,this._zoom).subtract(Se),this._zoom)}this._moved||(p._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var st=o(p._move,p,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=T(st,this,!0),Er(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,N(this._animRequest),$r(document,"touchmove",this._onTouchMove,this),$r(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Kr.addInitHook("addHandler","touchZoom",Io),Kr.BoxZoom=pr,Kr.DoubleClickZoom=Sa,Kr.Drag=Ea,Kr.Keyboard=Zs,Kr.ScrollWheelZoom=ls,Kr.TapHold=Do,Kr.TouchZoom=Io,t.Bounds=Te,t.Browser=mt,t.CRS=pe,t.Canvas=Is,t.Circle=zo,t.CircleMarker=ms,t.Class=z,t.Control=lr,t.DivIcon=la,t.DivOverlay=as,t.DomEvent=Nl,t.DomUtil=vr,t.Draggable=Hs,t.Evented=oe,t.FeatureGroup=is,t.GeoJSON=Uo,t.GridLayer=Yr,t.Handler=yi,t.Icon=ra,t.ImageOverlay=kn,t.LatLng=ue,t.LatLngBounds=H,t.Layer=Ur,t.LayerGroup=$o,t.LineUtil=zr,t.Map=Kr,t.Marker=wo,t.Mixin=Xu,t.Path=Ns,t.Point=ie,t.PolyUtil=ul,t.Polygon=Po,t.Polyline=ss,t.Popup=Ki,t.PosAnimation=Ql,t.Projection=bi,t.Rectangle=qo,t.Renderer=Ui,t.SVG=xo,t.SVGOverlay=wi,t.TileLayer=No,t.Tooltip=La,t.Transformation=Me,t.Util=O,t.VideoOverlay=Lr,t.bind=o,t.bounds=J,t.canvas=vs,t.circle=os,t.circleMarker=fl,t.control=fo,t.divIcon=ua,t.extend=i,t.featureGroup=tu,t.geoJSON=Zt,t.geoJson=Nt,t.gridLayer=Ws,t.icon=xu,t.imageOverlay=Jn,t.latLng=se,t.latLngBounds=Q,t.layerGroup=cl,t.map=co,t.marker=ia,t.point=Ce,t.polygon=ba,t.polyline=Qu,t.popup=sa,t.rectangle=ys,t.setOptions=k,t.stamp=f,t.svg=$i,t.svgOverlay=Rl,t.tileLayer=xi,t.tooltip=aa,t.transformation=Ge,t.version=r,t.videoOverlay=Zi;var Ks=window.L;t.noConflict=function(){return window.L=Ks,this},window.L=t})})(a1,a1.exports);var zt=a1.exports;const qn=fy(zt);var sb={exports:{}};(function(e,n){(function(t,r){r(n)})(ea,function(t){var r=typeof window<"u"?window:typeof ea<"u"?ea:typeof self<"u"?self:{};function i(d,m){return d(m={exports:{}},m.exports),m.exports}var s=i(function(d,m){(function(_){const b={escape:function(q){return q.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:y,mimeType:function(q){return q=y(q).toLowerCase(),function(){var G="application/font-woff",oe="image/jpeg";return{woff:G,woff2:G,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:oe,jpeg:oe,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[q]||""},dataAsUrl:function(q,G){return`data:${G};base64,`+q},isDataUrl:function(q){return q.search(/^(data:)/)!==-1},canvasToBlob:function(q){return q.toBlob?new Promise(function(oe){q.toBlob(oe)}):(G=q,new Promise(function(oe){const ie=ve(G.toDataURL().split(",")[1]);var _e=ie.length;const Ce=new Uint8Array(_e);for(let Te=0;Te<_e;Te++)Ce[Te]=ie.charCodeAt(Te);oe(new Blob([Ce],{type:"image/png"}))}));var G},resolveUrl:function(q,G){const oe=document.implementation.createHTMLDocument(),ie=oe.createElement("base"),_e=(oe.head.appendChild(ie),oe.createElement("a"));return oe.body.appendChild(_e),ie.href=G,_e.href=q,_e.href},getAndEncode:function(q){let G=he.impl.urlCache.find(function(oe){return oe.url===q});return G||(G={url:q,promise:null},he.impl.urlCache.push(G)),G.promise===null&&(he.impl.options.cacheBust&&(q+=(/\?/.test(q)?"&":"?")+new Date().getTime()),G.promise=new Promise(function(oe){const ie=he.impl.options.httpTimeout,_e=new XMLHttpRequest;let Ce;var Te;function J(H){console.error(H),oe("")}_e.onreadystatechange=function(){if(_e.readyState===4)if(_e.status!==200)Ce?oe(Ce):J(`cannot fetch resource: ${q}, status: `+_e.status);else{const H=new FileReader;H.onloadend=function(){var Q=H.result.split(/,/)[1];oe(Q)},H.readAsDataURL(_e.response)}},_e.ontimeout=function(){Ce?oe(Ce):J(`timeout of ${ie}ms occured while fetching resource: `+q)},_e.responseType="blob",_e.timeout=ie,he.impl.options.useCredentials&&(_e.withCredentials=!0),_e.open("GET",q,!0),_e.send(),he.impl.options.imagePlaceholder&&(Te=he.impl.options.imagePlaceholder.split(/,/))&&Te[1]&&(Ce=Te[1])})),G.promise},uid:function(){let q=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+q++}}(),delay:function(q){return function(G){return new Promise(function(oe){setTimeout(function(){oe(G)},q)})}},asArray:function(q){const G=[],oe=q.length;for(let ie=0;ie<oe;ie++)G.push(q[ie]);return G},escapeXhtml:function(q){return q.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(q){return q!=="data:,"?new Promise(function(G,oe){const ie=new Image;he.impl.options.useCredentials&&(ie.crossOrigin="use-credentials"),ie.onload=function(){G(ie)},ie.onerror=oe,ie.src=q}):Promise.resolve()},width:function(q){var G=M(q,"border-left-width"),oe=M(q,"border-right-width");return q.scrollWidth+G+oe},height:function(q){var G=M(q,"border-top-width"),oe=M(q,"border-bottom-width");return q.scrollHeight+G+oe}};function y(q){return(q=/\.([^\.\/]*?)(\?|$)/g.exec(q))?q[1]:""}function M(q,G){const oe=fe(q).getPropertyValue(G);return parseFloat(oe.replace("px",""))}const k=function(){const q=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(_e,Ce,Te){return G(_e)?Promise.resolve(_e).then(oe).then(function(J){let H=Promise.resolve(_e);return J.forEach(function(Q){H=H.then(function(ue){return ie(ue,Q,Ce,Te)})}),H}):Promise.resolve(_e)},shouldProcess:G,impl:{readUrls:oe,inline:ie}};function G(_e){return _e.search(q)!==-1}function oe(_e){const Ce=[];for(var Te;(Te=q.exec(_e))!==null;)Ce.push(Te[1]);return Ce.filter(function(J){return!b.isDataUrl(J)})}function ie(_e,Ce,Te,J){return Promise.resolve(Ce).then(function(H){return Te?b.resolveUrl(H,Te):H}).then(J||b.getAndEncode).then(function(H){return b.dataAsUrl(H,b.mimeType(Ce))}).then(function(H){return _e.replace((Q=Ce,new RegExp(`(url\\(['"]?)(${b.escape(Q)})(['"]?\\))`,"g")),`$1${H}$3`);var Q})}}(),F={resolveAll:function(){return I().then(function(q){return Promise.all(q.map(function(G){return G.resolve()}))}).then(function(q){return q.join(`
`)})},impl:{readAll:I}};function I(){return Promise.resolve(b.asArray(document.styleSheets)).then(function(G){const oe=[];return G.forEach(function(ie){if(Object.getPrototypeOf(ie).hasOwnProperty("cssRules"))try{b.asArray(ie.cssRules||[]).forEach(oe.push.bind(oe))}catch(_e){console.log("Error while reading CSS rules from "+ie.href,_e.toString())}}),oe}).then(function(G){return G.filter(function(oe){return oe.type===CSSRule.FONT_FACE_RULE}).filter(function(oe){return k.shouldProcess(oe.style.getPropertyValue("src"))})}).then(function(G){return G.map(q)});function q(G){return{resolve:function(){var oe=(G.parentStyleSheet||{}).href;return k.inlineAll(G.cssText,oe)},src:function(){return G.style.getPropertyValue("src")}}}}const R={inlineAll:function q(G){return G instanceof Element?function(oe){const ie=oe.style.getPropertyValue("background");return ie?k.inlineAll(ie).then(function(_e){oe.style.setProperty("background",_e,ie)}).then(function(){return oe}):Promise.resolve(oe)}(G).then(function(){return G instanceof HTMLImageElement?Y(G).inline():Promise.all(b.asArray(G.childNodes).map(function(oe){return q(oe)}))}):Promise.resolve(G)},impl:{newImage:Y}};function Y(q){return{inline:function(G){return b.isDataUrl(q.src)?Promise.resolve():Promise.resolve(q.src).then(G||b.getAndEncode).then(function(oe){return b.dataAsUrl(oe,b.mimeType(q.src))}).then(function(oe){return new Promise(function(ie){q.onload=ie,q.onerror=ie,q.src=oe})})}}}const ee={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},he={toSvg:$,toPng:function(q,G){return(G=G||{}).raster=!0,U(q,G).then(function(oe){return oe.toDataURL()})},toJpeg:function(q,G){return(G=G||{}).raster=!0,U(q,G).then(function(oe){return oe.toDataURL("image/jpeg",G.quality||1)})},toBlob:function(q,G){return(G=G||{}).raster=!0,U(q,G).then(b.canvasToBlob)},toPixelData:function(q,G){return(G=G||{}).raster=!0,U(q,G).then(function(oe){return oe.getContext("2d").getImageData(0,0,b.width(q),b.height(q)).data})},toCanvas:function(q,G){return(G=G||{}).raster=!0,U(q,G||{})},impl:{fontFaces:F,images:R,util:b,inliner:k,urlCache:[],options:{}}},fe=(d.exports=he,_.getComputedStyle||window.getComputedStyle),ve=_.atob||window.atob;function $(q,G){var oe=G=G||{};return oe.imagePlaceholder===void 0?he.impl.options.imagePlaceholder=ee.imagePlaceholder:he.impl.options.imagePlaceholder=oe.imagePlaceholder,oe.cacheBust===void 0?he.impl.options.cacheBust=ee.cacheBust:he.impl.options.cacheBust=oe.cacheBust,oe.useCredentials===void 0?he.impl.options.useCredentials=ee.useCredentials:he.impl.options.useCredentials=oe.useCredentials,Promise.resolve(q).then(function(ie){return function _e(Ce,Te,J,H,Q=null){return J||!Te||Te(Ce)?Promise.resolve(Ce).then(function(ue){return ue instanceof HTMLCanvasElement?b.makeImage(ue.toDataURL()):ue.nodeName==="IFRAME"?html2canvas(ue.contentDocument.body).then(se=>se.toDataURL()).then(b.makeImage):ue.cloneNode(!1)}).then(function(ue){return function(se,pe){const K=se.childNodes;return K.length===0?Promise.resolve(pe):function(D,ke){const Me=fe(se);let Ge=Promise.resolve();return ke.forEach(function(ce){Ge=Ge.then(function(){return _e(ce,Te,!1,H,Me)}).then(function(te){te&&D.appendChild(te)})}),Ge}(pe,b.asArray(K)).then(function(){return pe})}(Ce,ue)}).then(function(ue){return function(se,pe,K){return pe instanceof Element?Promise.resolve().then(function(){(function(D,ke){const Me=fe(D);Me.cssText?(ke.style.cssText=Me.cssText,function(Ge,ce){ce.font=Ge.font,ce.fontFamily=Ge.fontFamily,ce.fontFeatureSettings=Ge.fontFeatureSettings,ce.fontKerning=Ge.fontKerning,ce.fontSize=Ge.fontSize,ce.fontStretch=Ge.fontStretch,ce.fontStyle=Ge.fontStyle,ce.fontVariant=Ge.fontVariant,ce.fontVariantCaps=Ge.fontVariantCaps,ce.fontVariantEastAsian=Ge.fontVariantEastAsian,ce.fontVariantLigatures=Ge.fontVariantLigatures,ce.fontVariantNumeric=Ge.fontVariantNumeric,ce.fontVariationSettings=Ge.fontVariationSettings,ce.fontWeight=Ge.fontWeight}(Me,ke.style)):(K?function(Ge,ce,te,ye){const de=te.style,We=Ge.style;for(var He of ce){var tt=ce.getPropertyValue(He),Ze=We.getPropertyValue(He),et=(We.setProperty(He,ye?"initial":"unset"),ce.getPropertyValue(He));et!==tt?de.setProperty(He,tt):de.removeProperty(He),We.setProperty(He,Ze)}}(D,Me,ke,J):function(Ge,ce,te){const ye=function(We){if(z[We])return z[We];O||((O=document.createElement("iframe")).style.visibility="hidden",O.style.position="fixed",document.body.appendChild(O),O.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const He=document.createElement(We),tt=(O.contentWindow.document.body.appendChild(He),He.textContent=".",O.contentWindow.getComputedStyle(He)),Ze={};return b.asArray(tt).forEach(function(et){Ze[et]=et==="width"||et==="height"?"auto":tt.getPropertyValue(et)}),O.contentWindow.document.body.removeChild(He),z[We]=Ze}(te.tagName),de=te.style;b.asArray(Ge).forEach(function(We){var He=Ge.getPropertyValue(We);(He!==ye[We]||ce&&He!==ce.getPropertyValue(We))&&de.setProperty(We,He,Ge.getPropertyPriority(We))})}(Me,Q,ke),J&&(["inset-block","inset-block-start","inset-block-end"].forEach(Ge=>ke.style.removeProperty(Ge)),["left","right","top","bottom"].forEach(Ge=>{ke.style.getPropertyValue(Ge)&&ke.style.setProperty(Ge,"0px")})))})(se,pe)}).then(function(){[":before",":after"].forEach(function(D){(function(ke){const Me=fe(se,ke),Ge=Me.getPropertyValue("content");if(Ge!==""&&Ge!=="none"){const ce=b.uid(),te=pe.getAttribute("class"),ye=(te&&pe.setAttribute("class",te+" "+ce),document.createElement("style"));ye.appendChild(function(){const de=`.${ce}:`+ke,We=(Me.cssText?function(){return`${Me.cssText} content: ${Me.getPropertyValue("content")};`}:function(){return b.asArray(Me).map(function(He){return He+": "+Me.getPropertyValue(He)+(Me.getPropertyPriority(He)?" !important":"")}).join("; ")+";"})();return document.createTextNode(de+`{${We}}`)}()),pe.appendChild(ye)}})(D)})}).then(function(){se instanceof HTMLTextAreaElement&&(pe.innerHTML=se.value),se instanceof HTMLInputElement&&pe.setAttribute("value",se.value)}).then(function(){pe instanceof SVGElement&&(pe.setAttribute("xmlns","http://www.w3.org/2000/svg"),pe instanceof SVGRectElement&&["width","height"].forEach(function(D){const ke=pe.getAttribute(D);ke&&pe.style.setProperty(D,ke)}))}).then(function(){return pe}):pe}(Ce,ue,H)}):Promise.resolve()}(ie,G.filter,!0,!G.raster)}).then(Z).then(T).then(function(ie){G.bgcolor&&(ie.style.backgroundColor=G.bgcolor),G.width&&(ie.style.width=G.width+"px"),G.height&&(ie.style.height=G.height+"px"),G.style&&Object.keys(G.style).forEach(function(Ce){ie.style[Ce]=G.style[Ce]});let _e=null;return typeof G.onclone=="function"&&(_e=G.onclone(ie)),Promise.resolve(_e).then(function(){return ie})}).then(function(ie){return ie=ie,_e=G.width||b.width(q),Ce=G.height||b.height(q),Promise.resolve(ie).then(function(Te){return Te.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Te)}).then(b.escapeXhtml).then(function(Te){return`<foreignObject x="0" y="0" width="100%" height="100%">${Te}</foreignObject>`}).then(function(Te){return`<svg xmlns="http://www.w3.org/2000/svg" width="${_e}" height="${Ce}">${Te}</svg>`}).then(function(Te){return"data:image/svg+xml;charset=utf-8,"+Te});var _e,Ce}).then(function(ie){return he.impl.urlCache=[],ie})}function U(q,G){return $(q,G).then(b.makeImage).then(b.delay(0)).then(function(oe){var ie=typeof G.scale!="number"?1:G.scale;const _e=function(Te,J){const H=document.createElement("canvas");if(H.width=(G.width||b.width(Te))*J,H.height=(G.height||b.height(Te))*J,G.bgcolor){const Q=H.getContext("2d");Q.fillStyle=G.bgcolor,Q.fillRect(0,0,H.width,H.height)}return H}(q,ie),Ce=_e.getContext("2d");return Ce.mozImageSmoothingEnabled=!1,Ce.msImageSmoothingEnabled=!1,Ce.imageSmoothingEnabled=!1,oe&&(Ce.scale(ie,ie),Ce.drawImage(oe,0,0)),O&&(document.body.removeChild(O),O=null,N&&clearTimeout(N),N=setTimeout(()=>{N=null,z={}},2e4)),_e})}function Z(q){return F.resolveAll().then(function(G){const oe=document.createElement("style");return q.appendChild(oe),oe.appendChild(document.createTextNode(G)),q})}function T(q){return R.inlineAll(q).then(function(){return q})}let N=null,O=null,z={}})(r)}),o=i(function(d,m){(function(){function _(F,I,R){var Y=new XMLHttpRequest;Y.open("GET",F),Y.responseType="blob",Y.onload=function(){k(Y.response,I,R)},Y.onerror=function(){console.error("could not download file")},Y.send()}function b(F){var I=new XMLHttpRequest;I.open("HEAD",F,!1);try{I.send()}catch{}return 200<=I.status&&299>=I.status}function y(F){try{F.dispatchEvent(new MouseEvent("click"))}catch{var I=document.createEvent("MouseEvents");I.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),F.dispatchEvent(I)}}var M=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,k=M.saveAs||(typeof window!="object"||window!==M?function(){}:"download"in HTMLAnchorElement.prototype?function(F,I,R){var Y=M.URL||M.webkitURL,ee=document.createElement("a");I=I||F.name||"download",ee.download=I,ee.rel="noopener",typeof F=="string"?(ee.href=F,ee.origin===location.origin?y(ee):b(ee.href)?_(F,I,R):y(ee,ee.target="_blank")):(ee.href=Y.createObjectURL(F),setTimeout(function(){Y.revokeObjectURL(ee.href)},4e4),setTimeout(function(){y(ee)},0))}:"msSaveOrOpenBlob"in navigator?function(F,I,R){if(I=I||F.name||"download",typeof F!="string")navigator.msSaveOrOpenBlob(function(ee,he){return he===void 0?he={autoBom:!1}:typeof he!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),he={autoBom:!he}),he.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(ee.type)?new Blob(["\uFEFF",ee],{type:ee.type}):ee}(F,R),I);else if(b(F))_(F,I,R);else{var Y=document.createElement("a");Y.href=F,Y.target="_blank",setTimeout(function(){y(Y)})}}:function(F,I,R,Y){if((Y=Y||open("","_blank"))&&(Y.document.title=Y.document.body.innerText="downloading..."),typeof F=="string")return _(F,I,R);var ee=F.type==="application/octet-stream",he=/constructor/i.test(M.HTMLElement)||M.safari,fe=/CriOS\/[\d]+/.test(navigator.userAgent);if((fe||ee&&he)&&typeof FileReader=="object"){var ve=new FileReader;ve.onloadend=function(){var Z=ve.result;Z=fe?Z:Z.replace(/^data:[^;]*;/,"data:attachment/file;"),Y?Y.location.href=Z:location=Z,Y=null},ve.readAsDataURL(F)}else{var $=M.URL||M.webkitURL,U=$.createObjectURL(F);Y?Y.location=U:location.href=U,Y=null,setTimeout(function(){$.revokeObjectURL(U)},4e4)}});M.saveAs=k.saveAs=k,d.exports=k})()}),u=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(d){var m=d.node,_=d.error;return console.warn("Map node is very big "+m.scrollWidth+"x"+m.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(_)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var d=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b={};for(var y in this.options)_.hasOwnProperty(y)?b[y]=_[y]:b[y]=this.options[y];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return d._getPixelData(b)}).then(function(M){return d._setElementsVisible(!0),d._toCanvas(M,b)}).then(function(M){return m==="image"?d._canvasToImage(M,b):m==="canvas"?M:d._canvasToBlob(M,b)}).then(function(M){return d._screenState.status=1,d._map.fire("simpleMapScreenshoter.done"),M}).catch(function(M){return d._setElementsVisible(!0),d._screenState.status=1,d._map.fire("simpleMapScreenshoter.error",{e:M}),Promise.reject(M)}),this._screenState.promise)},_setElementsVisible:function(){var d=this,m=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(_){var b=d._map._container.querySelectorAll(_),y=!0,M=!1,k=void 0;try{for(var F,I=b[Symbol.iterator]();!(y=(F=I.next()).done);y=!0)F.value.style.opacity=m===!1?0:1}catch(R){M=!0,k=R}finally{try{!y&&I.return&&I.return()}finally{if(M)throw k}}})},_canvasToImage:function(d,m){var _=m.mimeType,b=d.toDataURL(_);return b.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(b)},_canvasToBlob:function(d,m){var _=m.mimeType;return new Promise(function(b,y){d.toBlob(function(M){b(M)},_)})},_toCanvas:function(d,m){var _=m.captionOffset,b=m.caption,y=m.captionFontSize,M=m.captionFont,k=m.captionColor,F=m.captionBgColor,I=this._node,R=I.screenHeight,Y=I.screenWidth,ee=document.createElement("canvas");ee.width=Y,ee.height=R;for(var he=ee.getContext("2d"),fe=he.createImageData(Y,R),ve=0;ve<d.length;++ve)fe.data[ve]=d[ve];he.putImageData(fe,0,0),fe=null;var $=document.createElement("canvas"),U=$.getContext("2d"),Z=0,T=0,N=R,O=Y;if(this.options.cropImageByInnerWH===!0){for(var z=[],q=0,G=0;G<R;++G){q=0;for(var oe=0;oe<Y;++oe)d[4*G*Y+4*oe+4]===0&&q++;q===Y&&z.push(G)}var ie=this._getMinAndMaxOnValuesBreak(z);Z=ie.min;for(var _e=Y,Ce=ie.max,Te=[],J=0,H=T;H<_e;++H){J=0;for(var Q=0;Q<R;++Q)d[4*Q*Y+4*H+4]===0&&J++;J===R&&Te.push(H)}var ue=this._getMinAndMaxOnValuesBreak(Te);T=ue.min,_e=ue.max,(T===0&&_e===0||_e===null)&&(_e=Y),(Z===0&&Ce===0||Ce===null)&&(Ce=R),this.options.debugMode===!0&&(console.log("emptyYLine",z),console.log("minMaxY",ie),console.log("emptyXLine",Te),console.log("minMaxX",ue),console.log("debugX",{}),console.log("debugY",{})),Z===0&&Ce===R&&T===0&&_e===Y||(Z+=this.options.onCropBorderSize,Ce-=this.options.onCropBorderSize,T+=this.options.onCropBorderSize,_e-=this.options.onCropBorderSize),N=Ce-Z,O=_e-T,$.width=O,$.height=N}else $.width=O,$.height=N;var se=null;return b&&(se=typeof b=="function"?b.call(this):b),se!==null&&($.height=$.height+(_+y+_),U.beginPath(),U.rect(0,0,$.width,$.height),U.fillStyle=F,U.fill(),U.save()),U.drawImage(ee,T,Z,O,N,0,0,O,N),se!==null&&(U.font=y+"px "+M,U.fillStyle=k,U.fillText(se,_,N+_+y)),Promise.resolve($)},_getMinAndMaxOnValuesBreak:function(d){for(var m=0,_=0,b=!1,y=1;y<d.length;y++){if(d[y]-1!==d[y-1]){_=d[y],b=!0;break}m=d[y]}return b===!1&&d[0]>1?(m=0,_=d[0]):b===!1&&(m=d[d.length-1]||0,_=null),{min:m,max:_}},_getPixelData:function(d){var m=this,_=d.domtoimageOptions,b=_===void 0?{}:_;return this._getPixelDataOfNormalMap(b).catch(function(y){return console.warn("May be map size very big on that zoom level, we have error:",y.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),m._getPixelDataOfBigMap(b)})},_getPixelDataOfNormalMap:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=this._map.getContainer();return this._node={node:m,screenHeight:m.scrollHeight,screenWidth:m.scrollWidth},s.toPixelData(m,d)},_getPixelDataOfBigMap:function(){var d=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=this._map.getContainer(),b=this._map.getPane("mapPane");b.style.width=2*_.clientWidth+"px",b.style.height=2*_.clientHeight+"px",b.style.overflow="hidden";var y=function(){b.style.width="initial",b.style.height="initial",b.style.overflow="initial"};return this._node={node:_,screenHeight:_.scrollHeight,screenWidth:_.scrollWidth},s.toPixelData(_,m).then(function(M){return y(),M}).catch(function(M){return y(),_.scrollHeight>=4e3||_.scrollWidth>=4e3?d.options.onPixelDataFail({plugin:d,node:_,mapPane:b,error:M,domtoimageOptions:m}):Promise.reject(M)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var d=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,m=document.head||document.getElementsByTagName("head")[0],_=document.createElement("style");_.appendChild(document.createTextNode(d)),m.appendChild(_)},_onScreenBtn:function(){var d=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(m){var _=typeof d.options.screenName=="function"?d.options.screenName.call(d):d.options.screenName;o.saveAs(m,_+".png")}).catch(function(m){d._map.fire("simpleMapScreenshoter.error",{e:m})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var d=this;return new Promise(function(m){var _=setInterval(function(){d._interaction||(m(),clearInterval(_))},100)})}}),f=(L.Control.SimpleMapScreenshoter=u,L.simpleMapScreenshoter=function(d){return new L.Control.SimpleMapScreenshoter(d)},u);t.default=f,t.SimpleMapScreenshoter=u,Object.defineProperty(t,"__esModule",{value:!0})})})(sb,sb.exports);var Xa=63710088e-1,tx={centimeters:Xa*100,centimetres:Xa*100,degrees:360/(2*Math.PI),feet:Xa*3.28084,inches:Xa*39.37,kilometers:Xa/1e3,kilometres:Xa/1e3,meters:Xa,metres:Xa,miles:Xa/1609.344,millimeters:Xa*1e3,millimetres:Xa*1e3,nauticalmiles:Xa/1852,radians:1,yards:Xa*1.0936};function cd(e,n,t={}){const r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=n||{},r.geometry=e,r}function dm(e,n,t={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ab(e[0])||!ab(e[1]))throw new Error("coordinates must contain numbers");return cd({type:"Point",coordinates:e},n,t)}function du(e,n,t={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return cd({type:"Polygon",coordinates:e},n,t)}function pu(e,n,t={}){if(e.length<2)throw new Error("coordinates must be an array of two or more positions");return cd({type:"LineString",coordinates:e},n,t)}function R7(e,n={}){const t={type:"FeatureCollection"};return n.id&&(t.id=n.id),n.bbox&&(t.bbox=n.bbox),t.features=e,t}function F7(e,n,t={}){return cd({type:"MultiPolygon",coordinates:e},n,t)}function j7(e,n="kilometers"){const t=tx[n];if(!t)throw new Error(n+" units is invalid");return e*t}function $7(e,n="kilometers"){const t=tx[n];if(!t)throw new Error(n+" units is invalid");return e/t}function l1(e){return e%(2*Math.PI)*180/Math.PI}function Uu(e){return e%360*Math.PI/180}function ab(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function lb(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function z7(e){return e.type==="Feature"?e.geometry:e}function nx(e,n,t={}){if(t.final===!0)return U7(e,n);const r=lb(e),i=lb(n),s=Uu(r[0]),o=Uu(i[0]),u=Uu(r[1]),f=Uu(i[1]),d=Math.sin(o-s)*Math.cos(f),m=Math.cos(u)*Math.sin(f)-Math.sin(u)*Math.cos(f)*Math.cos(o-s);return l1(Math.atan2(d,m))}function U7(e,n){let t=nx(n,e);return t=(t+180)%360,t}function V7(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function hy(e,n,t,r={}){const i=V7(e),s=Uu(i[0]),o=Uu(i[1]),u=Uu(t),f=$7(n,r.units),d=Math.asin(Math.sin(o)*Math.cos(f)+Math.cos(o)*Math.sin(f)*Math.cos(u)),m=s+Math.atan2(Math.sin(u)*Math.sin(f)*Math.cos(o),Math.cos(f)-Math.sin(o)*Math.sin(d)),_=l1(m),b=l1(d);return dm([_,b],r.properties)}var ub=hy;function cb(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return[...e.geometry.coordinates];if(e.type==="Point")return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function dy(e,n,t={}){var r=cb(e),i=cb(n),s=Uu(i[1]-r[1]),o=Uu(i[0]-r[0]),u=Uu(r[1]),f=Uu(i[1]),d=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(u)*Math.cos(f);return j7(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),t.units)}var nv=dy;function G7(e,n,t={}){const i=z7(e).coordinates;let s=0;for(let o=0;o<i.length&&!(n>=s&&o===i.length-1);o++)if(s>=n){const u=n-s;if(u){const f=nx(i[o],i[o-1])-180;return hy(i[o],u,f,t)}else return dm(i[o])}else s+=dy(i[o],i[o+1],t);return dm(i[i.length-1])}var u1=G7;function H7(e,n){var t,r,i,s,o,u,f,d,m,_,b=0,y=e.type==="FeatureCollection",M=e.type==="Feature",k=y?e.features.length:1;for(t=0;t<k;t++){for(u=y?e.features[t].geometry:M?e.geometry:e,d=y?e.features[t].properties:M?e.properties:{},m=y?e.features[t].bbox:M?e.bbox:void 0,_=y?e.features[t].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,b,d,m,_)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,b,d,m,_)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],b,d,m,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}b++}}function q7(e,n,t){var r=t;return H7(e,function(i,s,o,u,f){s===0&&t===void 0?r=i:r=n(r,i,s,o,u,f)}),r}function rx(e){return q7(e,(n,t)=>n+W7(t),0)}function W7(e){let n=0,t;switch(e.type){case"Polygon":return fb(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=fb(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function fb(e){let n=0;if(e&&e.length>0){n+=Math.abs(hb(e[0]));for(let t=1;t<e.length;t++)n-=Math.abs(hb(e[t]))}return n}var Z7=Xa*Xa/2,rv=Math.PI/180;function hb(e){const n=e.length-1;if(n<=2)return 0;let t=0,r=0;for(;r<n;){const i=e[r],s=e[r+1===n?0:r+1],o=e[r+2>=n?(r+2)%n:r+2],u=i[0]*rv,f=s[1]*rv,d=o[0]*rv;t+=(d-u)*Math.sin(f),r++}return t*Z7}var sc=rx;function ix(e,n,t){if(e!==null)for(var r,i,s,o,u,f,d,m=0,_=0,b,y=e.type,M=y==="FeatureCollection",k=y==="Feature",F=M?e.features.length:1,I=0;I<F;I++){d=M?e.features[I].geometry:k?e.geometry:e,b=d?d.type==="GeometryCollection":!1,u=b?d.geometries.length:1;for(var R=0;R<u;R++){var Y=0,ee=0;if(o=b?d.geometries[R]:d,o!==null){f=o.coordinates;var he=o.type;switch(m=he==="Polygon"||he==="MultiPolygon"?1:0,he){case null:break;case"Point":if(n(f,_,I,Y,ee)===!1)return!1;_++,Y++;break;case"LineString":case"MultiPoint":for(r=0;r<f.length;r++){if(n(f[r],_,I,Y,ee)===!1)return!1;_++,he==="MultiPoint"&&Y++}he==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(r=0;r<f.length;r++){for(i=0;i<f[r].length-m;i++){if(n(f[r][i],_,I,Y,ee)===!1)return!1;_++}he==="MultiLineString"&&Y++,he==="Polygon"&&ee++}he==="Polygon"&&Y++;break;case"MultiPolygon":for(r=0;r<f.length;r++){for(ee=0,i=0;i<f[r].length;i++){for(s=0;s<f[r][i].length-m;s++){if(n(f[r][i][s],_,I,Y,ee)===!1)return!1;_++}ee++}Y++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(ix(o.geometries[r],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function K7(e,n={}){let t=0,r=0,i=0;return ix(e,function(s){t+=s[0],r+=s[1],i++}),dm([t/i,r/i],n.properties)}var sp=K7;function Y7(e,n,t={}){const r=t.steps||64,i=t.properties?t.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},s=[];for(let o=0;o<r;o++)s.push(hy(e,n,o*-360/r,t).geometry.coordinates);return s.push(s[0]),du([s],i)}var J7=Y7,X7=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,iv=Math.ceil,fu=Math.floor,bl="[BigNumber Error] ",db=bl+"Number primitive has more than 15 significant digits: ",Nu=1e14,Qr=14,pb=9007199254740991,ov=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],rf=1e7,Ul=1e9;function ox(e){var n,t,r,i=R.prototype={constructor:R,toString:null,valueOf:null},s=new R(1),o=20,u=4,f=-7,d=21,m=-1e7,_=1e7,b=!1,y=1,M=0,k={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz",I=!0;function R($,U){var Z,T,N,O,z,q,G,oe,ie=this;if(!(ie instanceof R))return new R($,U);if(U==null){if($&&$._isBigNumber===!0){ie.s=$.s,!$.c||$.e>_?ie.c=ie.e=null:$.e<m?ie.c=[ie.e=0]:(ie.e=$.e,ie.c=$.c.slice());return}if((q=typeof $=="number")&&$*0==0){if(ie.s=1/$<0?($=-$,-1):1,$===~~$){for(O=0,z=$;z>=10;z/=10,O++);O>_?ie.c=ie.e=null:(ie.e=O,ie.c=[$]);return}oe=String($)}else{if(!X7.test(oe=String($)))return r(ie,oe,q);ie.s=oe.charCodeAt(0)==45?(oe=oe.slice(1),-1):1}(O=oe.indexOf("."))>-1&&(oe=oe.replace(".","")),(z=oe.search(/e/i))>0?(O<0&&(O=z),O+=+oe.slice(z+1),oe=oe.substring(0,z)):O<0&&(O=oe.length)}else{if(Yo(U,2,F.length,"Base"),U==10&&I)return ie=new R($),fe(ie,o+ie.e+1,u);if(oe=String($),q=typeof $=="number"){if($*0!=0)return r(ie,oe,q,U);if(ie.s=1/$<0?(oe=oe.slice(1),-1):1,R.DEBUG&&oe.replace(/^0\.0*|\./,"").length>15)throw Error(db+$)}else ie.s=oe.charCodeAt(0)===45?(oe=oe.slice(1),-1):1;for(Z=F.slice(0,U),O=z=0,G=oe.length;z<G;z++)if(Z.indexOf(T=oe.charAt(z))<0){if(T=="."){if(z>O){O=G;continue}}else if(!N&&(oe==oe.toUpperCase()&&(oe=oe.toLowerCase())||oe==oe.toLowerCase()&&(oe=oe.toUpperCase()))){N=!0,z=-1,O=0;continue}return r(ie,String($),q,U)}q=!1,oe=t(oe,U,10,ie.s),(O=oe.indexOf("."))>-1?oe=oe.replace(".",""):O=oe.length}for(z=0;oe.charCodeAt(z)===48;z++);for(G=oe.length;oe.charCodeAt(--G)===48;);if(oe=oe.slice(z,++G)){if(G-=z,q&&R.DEBUG&&G>15&&($>pb||$!==fu($)))throw Error(db+ie.s*$);if((O=O-z-1)>_)ie.c=ie.e=null;else if(O<m)ie.c=[ie.e=0];else{if(ie.e=O,ie.c=[],z=(O+1)%Qr,O<0&&(z+=Qr),z<G){for(z&&ie.c.push(+oe.slice(0,z)),G-=Qr;z<G;)ie.c.push(+oe.slice(z,z+=Qr));z=Qr-(oe=oe.slice(z)).length}else z-=G;for(;z--;oe+="0");ie.c.push(+oe)}}else ie.c=[ie.e=0]}R.clone=ox,R.ROUND_UP=0,R.ROUND_DOWN=1,R.ROUND_CEIL=2,R.ROUND_FLOOR=3,R.ROUND_HALF_UP=4,R.ROUND_HALF_DOWN=5,R.ROUND_HALF_EVEN=6,R.ROUND_HALF_CEIL=7,R.ROUND_HALF_FLOOR=8,R.EUCLID=9,R.config=R.set=function($){var U,Z;if($!=null)if(typeof $=="object"){if($.hasOwnProperty(U="DECIMAL_PLACES")&&(Z=$[U],Yo(Z,0,Ul,U),o=Z),$.hasOwnProperty(U="ROUNDING_MODE")&&(Z=$[U],Yo(Z,0,8,U),u=Z),$.hasOwnProperty(U="EXPONENTIAL_AT")&&(Z=$[U],Z&&Z.pop?(Yo(Z[0],-1e9,0,U),Yo(Z[1],0,Ul,U),f=Z[0],d=Z[1]):(Yo(Z,-1e9,Ul,U),f=-(d=Z<0?-Z:Z))),$.hasOwnProperty(U="RANGE"))if(Z=$[U],Z&&Z.pop)Yo(Z[0],-1e9,-1,U),Yo(Z[1],1,Ul,U),m=Z[0],_=Z[1];else if(Yo(Z,-1e9,Ul,U),Z)m=-(_=Z<0?-Z:Z);else throw Error(bl+U+" cannot be zero: "+Z);if($.hasOwnProperty(U="CRYPTO"))if(Z=$[U],Z===!!Z)if(Z)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))b=Z;else throw b=!Z,Error(bl+"crypto unavailable");else b=Z;else throw Error(bl+U+" not true or false: "+Z);if($.hasOwnProperty(U="MODULO_MODE")&&(Z=$[U],Yo(Z,0,9,U),y=Z),$.hasOwnProperty(U="POW_PRECISION")&&(Z=$[U],Yo(Z,0,Ul,U),M=Z),$.hasOwnProperty(U="FORMAT"))if(Z=$[U],typeof Z=="object")k=Z;else throw Error(bl+U+" not an object: "+Z);if($.hasOwnProperty(U="ALPHABET"))if(Z=$[U],typeof Z=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Z))I=Z.slice(0,10)=="0123456789",F=Z;else throw Error(bl+U+" invalid: "+Z)}else throw Error(bl+"Object expected: "+$);return{DECIMAL_PLACES:o,ROUNDING_MODE:u,EXPONENTIAL_AT:[f,d],RANGE:[m,_],CRYPTO:b,MODULO_MODE:y,POW_PRECISION:M,FORMAT:k,ALPHABET:F}},R.isBigNumber=function($){if(!$||$._isBigNumber!==!0)return!1;if(!R.DEBUG)return!0;var U,Z,T=$.c,N=$.e,O=$.s;e:if({}.toString.call(T)=="[object Array]"){if((O===1||O===-1)&&N>=-1e9&&N<=Ul&&N===fu(N)){if(T[0]===0){if(N===0&&T.length===1)return!0;break e}if(U=(N+1)%Qr,U<1&&(U+=Qr),String(T[0]).length==U){for(U=0;U<T.length;U++)if(Z=T[U],Z<0||Z>=Nu||Z!==fu(Z))break e;if(Z!==0)return!0}}}else if(T===null&&N===null&&(O===null||O===1||O===-1))return!0;throw Error(bl+"Invalid BigNumber: "+$)},R.maximum=R.max=function(){return ee(arguments,-1)},R.minimum=R.min=function(){return ee(arguments,1)},R.random=function(){var $=9007199254740992,U=Math.random()*$&2097151?function(){return fu(Math.random()*$)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Z){var T,N,O,z,q,G=0,oe=[],ie=new R(s);if(Z==null?Z=o:Yo(Z,0,Ul),z=iv(Z/Qr),b)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(z*=2));G<z;)q=T[G]*131072+(T[G+1]>>>11),q>=9e15?(N=crypto.getRandomValues(new Uint32Array(2)),T[G]=N[0],T[G+1]=N[1]):(oe.push(q%1e14),G+=2);G=z/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(z*=7);G<z;)q=(T[G]&31)*281474976710656+T[G+1]*1099511627776+T[G+2]*4294967296+T[G+3]*16777216+(T[G+4]<<16)+(T[G+5]<<8)+T[G+6],q>=9e15?crypto.randomBytes(7).copy(T,G):(oe.push(q%1e14),G+=7);G=z/7}else throw b=!1,Error(bl+"crypto unavailable");if(!b)for(;G<z;)q=U(),q<9e15&&(oe[G++]=q%1e14);for(z=oe[--G],Z%=Qr,z&&Z&&(q=ov[Qr-Z],oe[G]=fu(z/q)*q);oe[G]===0;oe.pop(),G--);if(G<0)oe=[O=0];else{for(O=-1;oe[0]===0;oe.splice(0,1),O-=Qr);for(G=1,q=oe[0];q>=10;q/=10,G++);G<Qr&&(O-=Qr-G)}return ie.e=O,ie.c=oe,ie}}(),R.sum=function(){for(var $=1,U=arguments,Z=new R(U[0]);$<U.length;)Z=Z.plus(U[$++]);return Z},t=function(){var $="0123456789";function U(Z,T,N,O){for(var z,q=[0],G,oe=0,ie=Z.length;oe<ie;){for(G=q.length;G--;q[G]*=T);for(q[0]+=O.indexOf(Z.charAt(oe++)),z=0;z<q.length;z++)q[z]>N-1&&(q[z+1]==null&&(q[z+1]=0),q[z+1]+=q[z]/N|0,q[z]%=N)}return q.reverse()}return function(Z,T,N,O,z){var q,G,oe,ie,_e,Ce,Te,J,H=Z.indexOf("."),Q=o,ue=u;for(H>=0&&(ie=M,M=0,Z=Z.replace(".",""),J=new R(T),Ce=J.pow(Z.length-H),M=ie,J.c=U(Ic(uu(Ce.c),Ce.e,"0"),10,N,$),J.e=J.c.length),Te=U(Z,T,N,z?(q=F,$):(q=$,F)),oe=ie=Te.length;Te[--ie]==0;Te.pop());if(!Te[0])return q.charAt(0);if(H<0?--oe:(Ce.c=Te,Ce.e=oe,Ce.s=O,Ce=n(Ce,J,Q,ue,N),Te=Ce.c,_e=Ce.r,oe=Ce.e),G=oe+Q+1,H=Te[G],ie=N/2,_e=_e||G<0||Te[G+1]!=null,_e=ue<4?(H!=null||_e)&&(ue==0||ue==(Ce.s<0?3:2)):H>ie||H==ie&&(ue==4||_e||ue==6&&Te[G-1]&1||ue==(Ce.s<0?8:7)),G<1||!Te[0])Z=_e?Ic(q.charAt(1),-Q,q.charAt(0)):q.charAt(0);else{if(Te.length=G,_e)for(--N;++Te[--G]>N;)Te[G]=0,G||(++oe,Te=[1].concat(Te));for(ie=Te.length;!Te[--ie];);for(H=0,Z="";H<=ie;Z+=q.charAt(Te[H++]));Z=Ic(Z,oe,q.charAt(0))}return Z}}(),n=function(){function $(T,N,O){var z,q,G,oe,ie=0,_e=T.length,Ce=N%rf,Te=N/rf|0;for(T=T.slice();_e--;)G=T[_e]%rf,oe=T[_e]/rf|0,z=Te*G+oe*Ce,q=Ce*G+z%rf*rf+ie,ie=(q/O|0)+(z/rf|0)+Te*oe,T[_e]=q%O;return ie&&(T=[ie].concat(T)),T}function U(T,N,O,z){var q,G;if(O!=z)G=O>z?1:-1;else for(q=G=0;q<O;q++)if(T[q]!=N[q]){G=T[q]>N[q]?1:-1;break}return G}function Z(T,N,O,z){for(var q=0;O--;)T[O]-=q,q=T[O]<N[O]?1:0,T[O]=q*z+T[O]-N[O];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,N,O,z,q){var G,oe,ie,_e,Ce,Te,J,H,Q,ue,se,pe,K,D,ke,Me,Ge,ce=T.s==N.s?1:-1,te=T.c,ye=N.c;if(!te||!te[0]||!ye||!ye[0])return new R(!T.s||!N.s||(te?ye&&te[0]==ye[0]:!ye)?NaN:te&&te[0]==0||!ye?ce*0:ce/0);for(H=new R(ce),Q=H.c=[],oe=T.e-N.e,ce=O+oe+1,q||(q=Nu,oe=hu(T.e/Qr)-hu(N.e/Qr),ce=ce/Qr|0),ie=0;ye[ie]==(te[ie]||0);ie++);if(ye[ie]>(te[ie]||0)&&oe--,ce<0)Q.push(1),_e=!0;else{for(D=te.length,Me=ye.length,ie=0,ce+=2,Ce=fu(q/(ye[0]+1)),Ce>1&&(ye=$(ye,Ce,q),te=$(te,Ce,q),Me=ye.length,D=te.length),K=Me,ue=te.slice(0,Me),se=ue.length;se<Me;ue[se++]=0);Ge=ye.slice(),Ge=[0].concat(Ge),ke=ye[0],ye[1]>=q/2&&ke++;do{if(Ce=0,G=U(ye,ue,Me,se),G<0){if(pe=ue[0],Me!=se&&(pe=pe*q+(ue[1]||0)),Ce=fu(pe/ke),Ce>1)for(Ce>=q&&(Ce=q-1),Te=$(ye,Ce,q),J=Te.length,se=ue.length;U(Te,ue,J,se)==1;)Ce--,Z(Te,Me<J?Ge:ye,J,q),J=Te.length,G=1;else Ce==0&&(G=Ce=1),Te=ye.slice(),J=Te.length;if(J<se&&(Te=[0].concat(Te)),Z(ue,Te,se,q),se=ue.length,G==-1)for(;U(ye,ue,Me,se)<1;)Ce++,Z(ue,Me<se?Ge:ye,se,q),se=ue.length}else G===0&&(Ce++,ue=[0]);Q[ie++]=Ce,ue[0]?ue[se++]=te[K]||0:(ue=[te[K]],se=1)}while((K++<D||ue[0]!=null)&&ce--);_e=ue[0]!=null,Q[0]||Q.splice(0,1)}if(q==Nu){for(ie=1,ce=Q[0];ce>=10;ce/=10,ie++);fe(H,O+(H.e=ie+oe*Qr-1)+1,z,_e)}else H.e=oe,H.r=+_e;return H}}();function Y($,U,Z,T){var N,O,z,q,G;if(Z==null?Z=u:Yo(Z,0,8),!$.c)return $.toString();if(N=$.c[0],z=$.e,U==null)G=uu($.c),G=T==1||T==2&&(z<=f||z>=d)?yg(G,z):Ic(G,z,"0");else if($=fe(new R($),U,Z),O=$.e,G=uu($.c),q=G.length,T==1||T==2&&(U<=O||O<=f)){for(;q<U;G+="0",q++);G=yg(G,O)}else if(U-=z,G=Ic(G,O,"0"),O+1>q){if(--U>0)for(G+=".";U--;G+="0");}else if(U+=O-q,U>0)for(O+1==q&&(G+=".");U--;G+="0");return $.s<0&&N?"-"+G:G}function ee($,U){for(var Z,T,N=1,O=new R($[0]);N<$.length;N++)T=new R($[N]),(!T.s||(Z=Vf(O,T))===U||Z===0&&O.s===U)&&(O=T);return O}function he($,U,Z){for(var T=1,N=U.length;!U[--N];U.pop());for(N=U[0];N>=10;N/=10,T++);return(Z=T+Z*Qr-1)>_?$.c=$.e=null:Z<m?$.c=[$.e=0]:($.e=Z,$.c=U),$}r=function(){var $=/^(-?)0([xbo])(?=\w[\w.]*$)/i,U=/^([^.]+)\.$/,Z=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(O,z,q,G){var oe,ie=q?z:z.replace(N,"");if(T.test(ie))O.s=isNaN(ie)?null:ie<0?-1:1;else{if(!q&&(ie=ie.replace($,function(_e,Ce,Te){return oe=(Te=Te.toLowerCase())=="x"?16:Te=="b"?2:8,!G||G==oe?Ce:_e}),G&&(oe=G,ie=ie.replace(U,"$1").replace(Z,"0.$1")),z!=ie))return new R(ie,oe);if(R.DEBUG)throw Error(bl+"Not a"+(G?" base "+G:"")+" number: "+z);O.s=null}O.c=O.e=null}}();function fe($,U,Z,T){var N,O,z,q,G,oe,ie,_e=$.c,Ce=ov;if(_e){e:{for(N=1,q=_e[0];q>=10;q/=10,N++);if(O=U-N,O<0)O+=Qr,z=U,G=_e[oe=0],ie=fu(G/Ce[N-z-1]%10);else if(oe=iv((O+1)/Qr),oe>=_e.length)if(T){for(;_e.length<=oe;_e.push(0));G=ie=0,N=1,O%=Qr,z=O-Qr+1}else break e;else{for(G=q=_e[oe],N=1;q>=10;q/=10,N++);O%=Qr,z=O-Qr+N,ie=z<0?0:fu(G/Ce[N-z-1]%10)}if(T=T||U<0||_e[oe+1]!=null||(z<0?G:G%Ce[N-z-1]),T=Z<4?(ie||T)&&(Z==0||Z==($.s<0?3:2)):ie>5||ie==5&&(Z==4||T||Z==6&&(O>0?z>0?G/Ce[N-z]:0:_e[oe-1])%10&1||Z==($.s<0?8:7)),U<1||!_e[0])return _e.length=0,T?(U-=$.e+1,_e[0]=Ce[(Qr-U%Qr)%Qr],$.e=-U||0):_e[0]=$.e=0,$;if(O==0?(_e.length=oe,q=1,oe--):(_e.length=oe+1,q=Ce[Qr-O],_e[oe]=z>0?fu(G/Ce[N-z]%Ce[z])*q:0),T)for(;;)if(oe==0){for(O=1,z=_e[0];z>=10;z/=10,O++);for(z=_e[0]+=q,q=1;z>=10;z/=10,q++);O!=q&&($.e++,_e[0]==Nu&&(_e[0]=1));break}else{if(_e[oe]+=q,_e[oe]!=Nu)break;_e[oe--]=0,q=1}for(O=_e.length;_e[--O]===0;_e.pop());}$.e>_?$.c=$.e=null:$.e<m&&($.c=[$.e=0])}return $}function ve($){var U,Z=$.e;return Z===null?$.toString():(U=uu($.c),U=Z<=f||Z>=d?yg(U,Z):Ic(U,Z,"0"),$.s<0?"-"+U:U)}return i.absoluteValue=i.abs=function(){var $=new R(this);return $.s<0&&($.s=1),$},i.comparedTo=function($,U){return Vf(this,new R($,U))},i.decimalPlaces=i.dp=function($,U){var Z,T,N,O=this;if($!=null)return Yo($,0,Ul),U==null?U=u:Yo(U,0,8),fe(new R(O),$+O.e+1,U);if(!(Z=O.c))return null;if(T=((N=Z.length-1)-hu(this.e/Qr))*Qr,N=Z[N])for(;N%10==0;N/=10,T--);return T<0&&(T=0),T},i.dividedBy=i.div=function($,U){return n(this,new R($,U),o,u)},i.dividedToIntegerBy=i.idiv=function($,U){return n(this,new R($,U),0,1)},i.exponentiatedBy=i.pow=function($,U){var Z,T,N,O,z,q,G,oe,ie,_e=this;if($=new R($),$.c&&!$.isInteger())throw Error(bl+"Exponent not an integer: "+ve($));if(U!=null&&(U=new R(U)),q=$.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!$.c||!$.c[0])return ie=new R(Math.pow(+ve(_e),q?$.s*(2-vg($)):+ve($))),U?ie.mod(U):ie;if(G=$.s<0,U){if(U.c?!U.c[0]:!U.s)return new R(NaN);T=!G&&_e.isInteger()&&U.isInteger(),T&&(_e=_e.mod(U))}else{if($.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||q&&_e.c[1]>=24e7:_e.c[0]<8e13||q&&_e.c[0]<=9999975e7)))return O=_e.s<0&&vg($)?-0:0,_e.e>-1&&(O=1/O),new R(G?1/O:O);M&&(O=iv(M/Qr+2))}for(q?(Z=new R(.5),G&&($.s=1),oe=vg($)):(N=Math.abs(+ve($)),oe=N%2),ie=new R(s);;){if(oe){if(ie=ie.times(_e),!ie.c)break;O?ie.c.length>O&&(ie.c.length=O):T&&(ie=ie.mod(U))}if(N){if(N=fu(N/2),N===0)break;oe=N%2}else if($=$.times(Z),fe($,$.e+1,1),$.e>14)oe=vg($);else{if(N=+ve($),N===0)break;oe=N%2}_e=_e.times(_e),O?_e.c&&_e.c.length>O&&(_e.c.length=O):T&&(_e=_e.mod(U))}return T?ie:(G&&(ie=s.div(ie)),U?ie.mod(U):O?fe(ie,M,u,z):ie)},i.integerValue=function($){var U=new R(this);return $==null?$=u:Yo($,0,8),fe(U,U.e+1,$)},i.isEqualTo=i.eq=function($,U){return Vf(this,new R($,U))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function($,U){return Vf(this,new R($,U))>0},i.isGreaterThanOrEqualTo=i.gte=function($,U){return(U=Vf(this,new R($,U)))===1||U===0},i.isInteger=function(){return!!this.c&&hu(this.e/Qr)>this.c.length-2},i.isLessThan=i.lt=function($,U){return Vf(this,new R($,U))<0},i.isLessThanOrEqualTo=i.lte=function($,U){return(U=Vf(this,new R($,U)))===-1||U===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function($,U){var Z,T,N,O,z=this,q=z.s;if($=new R($,U),U=$.s,!q||!U)return new R(NaN);if(q!=U)return $.s=-U,z.plus($);var G=z.e/Qr,oe=$.e/Qr,ie=z.c,_e=$.c;if(!G||!oe){if(!ie||!_e)return ie?($.s=-U,$):new R(_e?z:NaN);if(!ie[0]||!_e[0])return _e[0]?($.s=-U,$):new R(ie[0]?z:u==3?-0:0)}if(G=hu(G),oe=hu(oe),ie=ie.slice(),q=G-oe){for((O=q<0)?(q=-q,N=ie):(oe=G,N=_e),N.reverse(),U=q;U--;N.push(0));N.reverse()}else for(T=(O=(q=ie.length)<(U=_e.length))?q:U,q=U=0;U<T;U++)if(ie[U]!=_e[U]){O=ie[U]<_e[U];break}if(O&&(N=ie,ie=_e,_e=N,$.s=-$.s),U=(T=_e.length)-(Z=ie.length),U>0)for(;U--;ie[Z++]=0);for(U=Nu-1;T>q;){if(ie[--T]<_e[T]){for(Z=T;Z&&!ie[--Z];ie[Z]=U);--ie[Z],ie[T]+=Nu}ie[T]-=_e[T]}for(;ie[0]==0;ie.splice(0,1),--oe);return ie[0]?he($,ie,oe):($.s=u==3?-1:1,$.c=[$.e=0],$)},i.modulo=i.mod=function($,U){var Z,T,N=this;return $=new R($,U),!N.c||!$.s||$.c&&!$.c[0]?new R(NaN):!$.c||N.c&&!N.c[0]?new R(N):(y==9?(T=$.s,$.s=1,Z=n(N,$,0,3),$.s=T,Z.s*=T):Z=n(N,$,0,y),$=N.minus(Z.times($)),!$.c[0]&&y==1&&($.s=N.s),$)},i.multipliedBy=i.times=function($,U){var Z,T,N,O,z,q,G,oe,ie,_e,Ce,Te,J,H,Q,ue=this,se=ue.c,pe=($=new R($,U)).c;if(!se||!pe||!se[0]||!pe[0])return!ue.s||!$.s||se&&!se[0]&&!pe||pe&&!pe[0]&&!se?$.c=$.e=$.s=null:($.s*=ue.s,!se||!pe?$.c=$.e=null:($.c=[0],$.e=0)),$;for(T=hu(ue.e/Qr)+hu($.e/Qr),$.s*=ue.s,G=se.length,_e=pe.length,G<_e&&(J=se,se=pe,pe=J,N=G,G=_e,_e=N),N=G+_e,J=[];N--;J.push(0));for(H=Nu,Q=rf,N=_e;--N>=0;){for(Z=0,Ce=pe[N]%Q,Te=pe[N]/Q|0,z=G,O=N+z;O>N;)oe=se[--z]%Q,ie=se[z]/Q|0,q=Te*oe+ie*Ce,oe=Ce*oe+q%Q*Q+J[O]+Z,Z=(oe/H|0)+(q/Q|0)+Te*ie,J[O--]=oe%H;J[O]=Z}return Z?++T:J.splice(0,1),he($,J,T)},i.negated=function(){var $=new R(this);return $.s=-$.s||null,$},i.plus=function($,U){var Z,T=this,N=T.s;if($=new R($,U),U=$.s,!N||!U)return new R(NaN);if(N!=U)return $.s=-U,T.minus($);var O=T.e/Qr,z=$.e/Qr,q=T.c,G=$.c;if(!O||!z){if(!q||!G)return new R(N/0);if(!q[0]||!G[0])return G[0]?$:new R(q[0]?T:N*0)}if(O=hu(O),z=hu(z),q=q.slice(),N=O-z){for(N>0?(z=O,Z=G):(N=-N,Z=q),Z.reverse();N--;Z.push(0));Z.reverse()}for(N=q.length,U=G.length,N-U<0&&(Z=G,G=q,q=Z,U=N),N=0;U;)N=(q[--U]=q[U]+G[U]+N)/Nu|0,q[U]=Nu===q[U]?0:q[U]%Nu;return N&&(q=[N].concat(q),++z),he($,q,z)},i.precision=i.sd=function($,U){var Z,T,N,O=this;if($!=null&&$!==!!$)return Yo($,1,Ul),U==null?U=u:Yo(U,0,8),fe(new R(O),$,U);if(!(Z=O.c))return null;if(N=Z.length-1,T=N*Qr+1,N=Z[N]){for(;N%10==0;N/=10,T--);for(N=Z[0];N>=10;N/=10,T++);}return $&&O.e+1>T&&(T=O.e+1),T},i.shiftedBy=function($){return Yo($,-9007199254740991,pb),this.times("1e"+$)},i.squareRoot=i.sqrt=function(){var $,U,Z,T,N,O=this,z=O.c,q=O.s,G=O.e,oe=o+4,ie=new R("0.5");if(q!==1||!z||!z[0])return new R(!q||q<0&&(!z||z[0])?NaN:z?O:1/0);if(q=Math.sqrt(+ve(O)),q==0||q==1/0?(U=uu(z),(U.length+G)%2==0&&(U+="0"),q=Math.sqrt(+U),G=hu((G+1)/2)-(G<0||G%2),q==1/0?U="5e"+G:(U=q.toExponential(),U=U.slice(0,U.indexOf("e")+1)+G),Z=new R(U)):Z=new R(q+""),Z.c[0]){for(G=Z.e,q=G+oe,q<3&&(q=0);;)if(N=Z,Z=ie.times(N.plus(n(O,N,oe,1))),uu(N.c).slice(0,q)===(U=uu(Z.c)).slice(0,q))if(Z.e<G&&--q,U=U.slice(q-3,q+1),U=="9999"||!T&&U=="4999"){if(!T&&(fe(N,N.e+o+2,0),N.times(N).eq(O))){Z=N;break}oe+=4,q+=4,T=1}else{(!+U||!+U.slice(1)&&U.charAt(0)=="5")&&(fe(Z,Z.e+o+2,1),$=!Z.times(Z).eq(O));break}}return fe(Z,Z.e+o+1,u,$)},i.toExponential=function($,U){return $!=null&&(Yo($,0,Ul),$++),Y(this,$,U,1)},i.toFixed=function($,U){return $!=null&&(Yo($,0,Ul),$=$+this.e+1),Y(this,$,U)},i.toFormat=function($,U,Z){var T,N=this;if(Z==null)$!=null&&U&&typeof U=="object"?(Z=U,U=null):$&&typeof $=="object"?(Z=$,$=U=null):Z=k;else if(typeof Z!="object")throw Error(bl+"Argument not an object: "+Z);if(T=N.toFixed($,U),N.c){var O,z=T.split("."),q=+Z.groupSize,G=+Z.secondaryGroupSize,oe=Z.groupSeparator||"",ie=z[0],_e=z[1],Ce=N.s<0,Te=Ce?ie.slice(1):ie,J=Te.length;if(G&&(O=q,q=G,G=O,J-=O),q>0&&J>0){for(O=J%q||q,ie=Te.substr(0,O);O<J;O+=q)ie+=oe+Te.substr(O,q);G>0&&(ie+=oe+Te.slice(O)),Ce&&(ie="-"+ie)}T=_e?ie+(Z.decimalSeparator||"")+((G=+Z.fractionGroupSize)?_e.replace(new RegExp("\\d{"+G+"}\\B","g"),"$&"+(Z.fractionGroupSeparator||"")):_e):ie}return(Z.prefix||"")+T+(Z.suffix||"")},i.toFraction=function($){var U,Z,T,N,O,z,q,G,oe,ie,_e,Ce,Te=this,J=Te.c;if($!=null&&(q=new R($),!q.isInteger()&&(q.c||q.s!==1)||q.lt(s)))throw Error(bl+"Argument "+(q.isInteger()?"out of range: ":"not an integer: ")+ve(q));if(!J)return new R(Te);for(U=new R(s),oe=Z=new R(s),T=G=new R(s),Ce=uu(J),O=U.e=Ce.length-Te.e-1,U.c[0]=ov[(z=O%Qr)<0?Qr+z:z],$=!$||q.comparedTo(U)>0?O>0?U:oe:q,z=_,_=1/0,q=new R(Ce),G.c[0]=0;ie=n(q,U,0,1),N=Z.plus(ie.times(T)),N.comparedTo($)!=1;)Z=T,T=N,oe=G.plus(ie.times(N=oe)),G=N,U=q.minus(ie.times(N=U)),q=N;return N=n($.minus(Z),T,0,1),G=G.plus(N.times(oe)),Z=Z.plus(N.times(T)),G.s=oe.s=Te.s,O=O*2,_e=n(oe,T,O,u).minus(Te).abs().comparedTo(n(G,Z,O,u).minus(Te).abs())<1?[oe,T]:[G,Z],_=z,_e},i.toNumber=function(){return+ve(this)},i.toPrecision=function($,U){return $!=null&&Yo($,1,Ul),Y(this,$,U,2)},i.toString=function($){var U,Z=this,T=Z.s,N=Z.e;return N===null?T?(U="Infinity",T<0&&(U="-"+U)):U="NaN":($==null?U=N<=f||N>=d?yg(uu(Z.c),N):Ic(uu(Z.c),N,"0"):$===10&&I?(Z=fe(new R(Z),o+N+1,u),U=Ic(uu(Z.c),Z.e,"0")):(Yo($,2,F.length,"Base"),U=t(Ic(uu(Z.c),N,"0"),10,$,T,!0)),T<0&&Z.c[0]&&(U="-"+U)),U},i.valueOf=i.toJSON=function(){return ve(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&R.set(e),R}function hu(e){var n=e|0;return e>0||e===n?n:n-1}function uu(e){for(var n,t,r=1,i=e.length,s=e[0]+"";r<i;){for(n=e[r++]+"",t=Qr-n.length;t--;n="0"+n);s+=n}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Vf(e,n){var t,r,i=e.c,s=n.c,o=e.s,u=n.s,f=e.e,d=n.e;if(!o||!u)return null;if(t=i&&!i[0],r=s&&!s[0],t||r)return t?r?0:-u:o;if(o!=u)return o;if(t=o<0,r=f==d,!i||!s)return r?0:!i^t?1:-1;if(!r)return f>d^t?1:-1;for(u=(f=i.length)<(d=s.length)?f:d,o=0;o<u;o++)if(i[o]!=s[o])return i[o]>s[o]^t?1:-1;return f==d?0:f>d^t?1:-1}function Yo(e,n,t,r){if(e<n||e>t||e!==fu(e))throw Error(bl+(r||"Argument")+(typeof e=="number"?e<n||e>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function vg(e){var n=e.c.length-1;return hu(e.e/Qr)==n&&e.c[n]%2!=0}function yg(e,n){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(n<0?"e":"e+")+n}function Ic(e,n,t){var r,i;if(n<0){for(i=t+".";++n;i+=t);e=i+e}else if(r=e.length,++n>r){for(i=t,n-=r;--n;i+=t);e+=i}else n<r&&(e=e.slice(0,n)+"."+e.slice(n));return e}var hc=ox(),Q7=class{constructor(e){Wt(this,"key");Wt(this,"left",null);Wt(this,"right",null);this.key=e}},Nd=class extends Q7{constructor(e){super(e)}},eI=class{constructor(){Wt(this,"size",0);Wt(this,"modificationCount",0);Wt(this,"splayCount",0)}splay(e){const n=this.root;if(n==null)return this.compare(e,e),-1;let t=null,r=null,i=null,s=null,o=n;const u=this.compare;let f;for(;;)if(f=u(o.key,e),f>0){let d=o.left;if(d==null||(f=u(d.key,e),f>0&&(o.left=d.right,d.right=o,o=d,d=o.left,d==null)))break;t==null?r=o:t.left=o,t=o,o=d}else if(f<0){let d=o.right;if(d==null||(f=u(d.key,e),f<0&&(o.right=d.left,d.left=o,o=d,d=o.right,d==null)))break;i==null?s=o:i.right=o,i=o,o=d}else break;return i!=null&&(i.right=o.left,o.left=s),t!=null&&(t.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),f}splayMin(e){let n=e,t=n.left;for(;t!=null;){const r=t;n.left=r.right,r.right=n,n=r,t=n.left}return n}splayMax(e){let n=e,t=n.right;for(;t!=null;){const r=t;n.right=r.left,r.left=n,n=r,t=n.right}return n}_delete(e){if(this.root==null||this.splay(e)!=0)return null;let t=this.root;const r=t,i=t.left;if(this.size--,i==null)this.root=t.right;else{const s=t.right;t=this.splayMax(i),t.right=s,this.root=t}return this.modificationCount++,r}addNewRoot(e,n){this.size++,this.modificationCount++;const t=this.root;if(t==null){this.root=e;return}n<0?(e.left=t,e.right=t.right,t.right=null):(e.right=t,e.left=t.left,t.left=null),this.root=e}_first(){const e=this.root;return e==null?null:(this.root=this.splayMin(e),this.root)}_last(){const e=this.root;return e==null?null:(this.root=this.splayMax(e),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(e){return this.validKey(e)&&this.splay(e)==0}defaultCompare(){return(e,n)=>e<n?-1:e>n?1:0}wrap(){return{getRoot:()=>this.root,setRoot:e=>{this.root=e},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:e=>{this.splayCount=e},splay:e=>this.splay(e),has:e=>this.has(e)}}},tw,nw,pm=class Ud extends eI{constructor(t,r){super();Wt(this,"root",null);Wt(this,"compare");Wt(this,"validKey");Wt(this,tw,"[object Set]");this.compare=t??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(t){return this.validKey(t)?this._delete(t)!=null:!1}deleteAll(t){for(const r of t)this.delete(r)}forEach(t){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)t(i.value,i.value,this)}add(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new Nd(t),r),this}addAndReturn(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new Nd(t),r),this.root.key}addAll(t){for(const r of t)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(t){const r=new Ud(this.compare,this.validKey),i=this.modificationCount;for(const s of t){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(t){return!this.validKey(t)||this.splay(t)!=0?null:this.root.key}intersection(t){const r=new Ud(this.compare,this.validKey);for(const i of this)t.has(i)&&r.add(i);return r}difference(t){const r=new Ud(this.compare,this.validKey);for(const i of this)t.has(i)||r.add(i);return r}union(t){const r=this.clone();return r.addAll(t),r}clone(){const t=new Ud(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(t){if(t==null)return null;function r(s,o){let u,f;do{if(u=s.left,f=s.right,u!=null){const d=new Nd(u.key);o.left=d,r(u,d)}if(f!=null){const d=new Nd(f.key);o.right=d,s=f,o=d}}while(f!=null)}const i=new Nd(t.key);return r(t,i),i}toSet(){return this.clone()}entries(){return new nI(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(nw=Symbol.iterator,tw=Symbol.toStringTag,nw)](){return new tI(this.wrap())}},sx=class{constructor(e){Wt(this,"tree");Wt(this,"path",new Array);Wt(this,"modificationCount",null);Wt(this,"splayCount");this.tree=e,this.splayCount=e.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const e=this.path[this.path.length-1];return this.getValue(e)}rebuildPath(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(e){for(;e!=null;)this.path.push(e),e=e.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let t=this.tree.getRoot();for(;t!=null;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let e=this.path[this.path.length-1],n=e.right;if(n!=null){for(;n!=null;)this.path.push(n),n=n.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}},tI=class extends sx{getValue(e){return e.key}},nI=class extends sx{getValue(e){return[e.key,e.key]}},ax=e=>()=>e,c1=e=>{const n=e?(t,r)=>r.minus(t).abs().isLessThanOrEqualTo(e):ax(!1);return(t,r)=>n(t,r)?0:t.comparedTo(r)};function rI(e){const n=e?(t,r,i,s,o)=>t.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(e)):ax(!1);return(t,r,i)=>{const s=t.x,o=t.y,u=i.x,f=i.y,d=o.minus(f).times(r.x.minus(u)).minus(s.minus(u).times(r.y.minus(f)));return n(d,s,o,u,f)?0:d.comparedTo(0)}}var iI=e=>e,oI=e=>{if(e){const n=new pm(c1(e)),t=new pm(c1(e)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,n),y:r(s.y,t)});return i({x:new hc(0),y:new hc(0)}),i}return iI},f1=e=>({set:n=>{Hc=f1(n)},reset:()=>f1(e),compare:c1(e),snap:oI(e),orient:rI(e)}),Hc=f1(),Dd=(e,n)=>e.ll.x.isLessThanOrEqualTo(n.x)&&n.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(n.y)&&n.y.isLessThanOrEqualTo(e.ur.y),h1=(e,n)=>{if(n.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(n.ll.x)||n.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(n.ll.y))return null;const t=e.ll.x.isLessThan(n.ll.x)?n.ll.x:e.ll.x,r=e.ur.x.isLessThan(n.ur.x)?e.ur.x:n.ur.x,i=e.ll.y.isLessThan(n.ll.y)?n.ll.y:e.ll.y,s=e.ur.y.isLessThan(n.ur.y)?e.ur.y:n.ur.y;return{ll:{x:t,y:i},ur:{x:r,y:s}}},Rg=(e,n)=>e.x.times(n.y).minus(e.y.times(n.x)),lx=(e,n)=>e.x.times(n.x).plus(e.y.times(n.y)),gm=e=>lx(e,e).sqrt(),sI=(e,n,t)=>{const r={x:n.x.minus(e.x),y:n.y.minus(e.y)},i={x:t.x.minus(e.x),y:t.y.minus(e.y)};return Rg(i,r).div(gm(i)).div(gm(r))},aI=(e,n,t)=>{const r={x:n.x.minus(e.x),y:n.y.minus(e.y)},i={x:t.x.minus(e.x),y:t.y.minus(e.y)};return lx(i,r).div(gm(i)).div(gm(r))},gb=(e,n,t)=>n.y.isZero()?null:{x:e.x.plus(n.x.div(n.y).times(t.minus(e.y))),y:t},mb=(e,n,t)=>n.x.isZero()?null:{x:t,y:e.y.plus(n.y.div(n.x).times(t.minus(e.x)))},lI=(e,n,t,r)=>{if(n.x.isZero())return mb(t,r,e.x);if(r.x.isZero())return mb(e,n,t.x);if(n.y.isZero())return gb(t,r,e.y);if(r.y.isZero())return gb(e,n,t.y);const i=Rg(n,r);if(i.isZero())return null;const s={x:t.x.minus(e.x),y:t.y.minus(e.y)},o=Rg(s,n).div(i),u=Rg(s,r).div(i),f=e.x.plus(u.times(n.x)),d=t.x.plus(o.times(r.x)),m=e.y.plus(u.times(n.y)),_=t.y.plus(o.times(r.y)),b=f.plus(d).div(2),y=m.plus(_).div(2);return{x:b,y}},fc=class ux{constructor(n,t){Wt(this,"point");Wt(this,"isLeft");Wt(this,"segment");Wt(this,"otherSE");Wt(this,"consumedBy");n.events===void 0?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=t}static compare(n,t){const r=ux.comparePoints(n.point,t.point);return r!==0?r:(n.point!==t.point&&n.link(t),n.isLeft!==t.isLeft?n.isLeft?1:-1:mm.compare(n.segment,t.segment))}static comparePoints(n,t){return n.x.isLessThan(t.x)?-1:n.x.isGreaterThan(t.x)?1:n.y.isLessThan(t.y)?-1:n.y.isGreaterThan(t.y)?1:0}link(n){if(n.point===this.point)throw new Error("Tried to link already linked events");const t=n.point.events;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const n=this.point.events.length;for(let t=0;t<n;t++){const r=this.point.events[t];if(r.segment.consumedBy===void 0)for(let i=t+1;i<n;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const n=[];for(let t=0,r=this.point.events.length;t<r;t++){const i=this.point.events[t];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&n.push(i)}return n}getLeftmostComparator(n){const t=new Map,r=i=>{const s=i.otherSE;t.set(i,{sine:sI(this.point,n.point,s.point),cosine:aI(this.point,n.point,s.point)})};return(i,s)=>{t.has(i)||r(i),t.has(s)||r(s);const{sine:o,cosine:u}=t.get(i),{sine:f,cosine:d}=t.get(s);return o.isGreaterThanOrEqualTo(0)&&f.isGreaterThanOrEqualTo(0)?u.isLessThan(d)?1:u.isGreaterThan(d)?-1:0:o.isLessThan(0)&&f.isLessThan(0)?u.isLessThan(d)?-1:u.isGreaterThan(d)?1:0:f.isLessThan(o)?-1:f.isGreaterThan(o)?1:0}}},uI=class d1{constructor(n){Wt(this,"events");Wt(this,"poly");Wt(this,"_isExteriorRing");Wt(this,"_enclosingRing");this.events=n;for(let t=0,r=n.length;t<r;t++)n[t].segment.ringOut=this;this.poly=null}static factory(n){const t=[];for(let r=0,i=n.length;r<i;r++){const s=n[r];if(!s.isInResult()||s.ringOut)continue;let o=null,u=s.leftSE,f=s.rightSE;const d=[u],m=u.point,_=[];for(;o=u,u=f,d.push(u),u.point!==m;)for(;;){const b=u.getAvailableLinkedEvents();if(b.length===0){const k=d[0].point,F=d[d.length-1].point;throw new Error(`Unable to complete output ring starting at [${k.x}, ${k.y}]. Last matching segment found ends at [${F.x}, ${F.y}].`)}if(b.length===1){f=b[0].otherSE;break}let y=null;for(let k=0,F=_.length;k<F;k++)if(_[k].point===u.point){y=k;break}if(y!==null){const k=_.splice(y)[0],F=d.splice(k.index);F.unshift(F[0].otherSE),t.push(new d1(F.reverse()));continue}_.push({index:d.length,point:u.point});const M=u.getLeftmostComparator(o);f=b.sort(M)[0].otherSE;break}t.push(new d1(d))}return t}getGeom(){let n=this.events[0].point;const t=[n];for(let d=1,m=this.events.length-1;d<m;d++){const _=this.events[d].point,b=this.events[d+1].point;Hc.orient(_,n,b)!==0&&(t.push(_),n=_)}if(t.length===1)return null;const r=t[0],i=t[1];Hc.orient(r,n,i)===0&&t.shift(),t.push(t[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:t.length-1,u=this.isExteriorRing()?t.length:-1,f=[];for(let d=o;d!=u;d+=s)f.push([t[d].x.toNumber(),t[d].y.toNumber()]);return f}isExteriorRing(){if(this._isExteriorRing===void 0){const n=this.enclosingRing();this._isExteriorRing=n?!n.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let n=this.events[0];for(let o=1,u=this.events.length;o<u;o++){const f=this.events[o];fc.compare(n,f)>0&&(n=f)}let t=n.segment.prevInResult(),r=t?t.prevInResult():null;for(;;){if(!t)return null;if(!r)return t.ringOut;if(r.ringOut!==t.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==t.ringOut?t.ringOut:(s=t.ringOut)==null?void 0:s.enclosingRing();t=r.prevInResult(),r=t?t.prevInResult():null}}},vb=class{constructor(e){Wt(this,"exteriorRing");Wt(this,"interiorRings");this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=this.exteriorRing.getGeom();if(e===null)return null;const n=[e];for(let t=0,r=this.interiorRings.length;t<r;t++){const i=this.interiorRings[t].getGeom();i!==null&&n.push(i)}return n}},cI=class{constructor(e){Wt(this,"rings");Wt(this,"polys");this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let n=0,t=this.polys.length;n<t;n++){const r=this.polys[n].getGeom();r!==null&&e.push(r)}return e}_composePolys(e){var t;const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.poly)if(s.isExteriorRing())n.push(new vb(s));else{const o=s.enclosingRing();o!=null&&o.poly||n.push(new vb(o)),(t=o==null?void 0:o.poly)==null||t.addInterior(s)}}return n}},fI=class{constructor(e,n=mm.compare){Wt(this,"queue");Wt(this,"tree");Wt(this,"segments");this.queue=e,this.tree=new pm(n),this.segments=[]}process(e){const n=e.segment,t=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(n),t;e.isLeft&&this.tree.add(n);let r=n,i=n;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(e.isLeft){let s=null;if(r){const u=r.getIntersection(n);if(u!==null&&(n.isAnEndpoint(u)||(s=u),!r.isAnEndpoint(u))){const f=this._splitSafely(r,u);for(let d=0,m=f.length;d<m;d++)t.push(f[d])}}let o=null;if(i){const u=i.getIntersection(n);if(u!==null&&(n.isAnEndpoint(u)||(o=u),!i.isAnEndpoint(u))){const f=this._splitSafely(i,u);for(let d=0,m=f.length;d<m;d++)t.push(f[d])}}if(s!==null||o!==null){let u=null;s===null?u=o:o===null?u=s:u=fc.comparePoints(s,o)<=0?s:o,this.queue.delete(n.rightSE),t.push(n.rightSE);const f=n.split(u);for(let d=0,m=f.length;d<m;d++)t.push(f[d])}t.length>0?(this.tree.delete(n),t.push(e)):(this.segments.push(n),n.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let u=0,f=o.length;u<f;u++)t.push(o[u])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let u=0,f=o.length;u<f;u++)t.push(o[u])}}}this.tree.delete(n)}return t}_splitSafely(e,n){this.tree.delete(e);const t=e.rightSE;this.queue.delete(t);const r=e.split(n);return r.push(t),e.consumedBy===void 0&&this.tree.add(e),r}},hI=class{constructor(){Wt(this,"type");Wt(this,"numMultiPolys")}run(e,n,t){Vd.type=e;const r=[new _b(n,!0)];for(let d=0,m=t.length;d<m;d++)r.push(new _b(t[d],!1));if(Vd.numMultiPolys=r.length,Vd.type==="difference"){const d=r[0];let m=1;for(;m<r.length;)h1(r[m].bbox,d.bbox)!==null?m++:r.splice(m,1)}if(Vd.type==="intersection")for(let d=0,m=r.length;d<m;d++){const _=r[d];for(let b=d+1,y=r.length;b<y;b++)if(h1(_.bbox,r[b].bbox)===null)return[]}const i=new pm(fc.compare);for(let d=0,m=r.length;d<m;d++){const _=r[d].getSweepEvents();for(let b=0,y=_.length;b<y;b++)i.add(_[b])}const s=new fI(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const d=s.process(o);for(let m=0,_=d.length;m<_;m++){const b=d[m];b.consumedBy===void 0&&i.add(b)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Hc.reset();const u=uI.factory(s.segments);return new cI(u).getGeom()}},Vd=new hI,p1=Vd,dI=0,mm=class Fg{constructor(n,t,r,i){Wt(this,"id");Wt(this,"leftSE");Wt(this,"rightSE");Wt(this,"rings");Wt(this,"windings");Wt(this,"ringOut");Wt(this,"consumedBy");Wt(this,"prev");Wt(this,"_prevInResult");Wt(this,"_beforeState");Wt(this,"_afterState");Wt(this,"_isInResult");this.id=++dI,this.leftSE=n,n.segment=this,n.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=n,this.rings=r,this.windings=i}static compare(n,t){const r=n.leftSE.point.x,i=t.leftSE.point.x,s=n.rightSE.point.x,o=t.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const u=n.leftSE.point.y,f=t.leftSE.point.y,d=n.rightSE.point.y,m=t.rightSE.point.y;if(r.isLessThan(i)){if(f.isLessThan(u)&&f.isLessThan(d))return 1;if(f.isGreaterThan(u)&&f.isGreaterThan(d))return-1;const _=n.comparePoint(t.leftSE.point);if(_<0)return 1;if(_>0)return-1;const b=t.comparePoint(n.rightSE.point);return b!==0?b:-1}if(r.isGreaterThan(i)){if(u.isLessThan(f)&&u.isLessThan(m))return-1;if(u.isGreaterThan(f)&&u.isGreaterThan(m))return 1;const _=t.comparePoint(n.leftSE.point);if(_!==0)return _;const b=n.comparePoint(t.rightSE.point);return b<0?1:b>0?-1:1}if(u.isLessThan(f))return-1;if(u.isGreaterThan(f))return 1;if(s.isLessThan(o)){const _=t.comparePoint(n.rightSE.point);if(_!==0)return _}if(s.isGreaterThan(o)){const _=n.comparePoint(t.rightSE.point);if(_<0)return 1;if(_>0)return-1}if(!s.eq(o)){const _=d.minus(u),b=s.minus(r),y=m.minus(f),M=o.minus(i);if(_.isGreaterThan(b)&&y.isLessThan(M))return 1;if(_.isLessThan(b)&&y.isGreaterThan(M))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||d.isLessThan(m)?-1:d.isGreaterThan(m)?1:n.id<t.id?-1:n.id>t.id?1:0}static fromRing(n,t,r){let i,s,o;const u=fc.comparePoints(n,t);if(u<0)i=n,s=t,o=1;else if(u>0)i=t,s=n,o=-1;else throw new Error(`Tried to create degenerate segment at [${n.x}, ${n.y}]`);const f=new fc(i,!0),d=new fc(s,!1);return new Fg(f,d,[r],[o])}replaceRightSE(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const n=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n.isLessThan(t)?n:t},ur:{x:this.rightSE.point.x,y:n.isGreaterThan(t)?n:t}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(n){return n.x.eq(this.leftSE.point.x)&&n.y.eq(this.leftSE.point.y)||n.x.eq(this.rightSE.point.x)&&n.y.eq(this.rightSE.point.y)}comparePoint(n){return Hc.orient(this.leftSE.point,n,this.rightSE.point)}getIntersection(n){const t=this.bbox(),r=n.bbox(),i=h1(t,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,u=n.leftSE.point,f=n.rightSE.point,d=Dd(t,u)&&this.comparePoint(u)===0,m=Dd(r,s)&&n.comparePoint(s)===0,_=Dd(t,f)&&this.comparePoint(f)===0,b=Dd(r,o)&&n.comparePoint(o)===0;if(m&&d)return b&&!_?o:!b&&_?f:null;if(m)return _&&s.x.eq(f.x)&&s.y.eq(f.y)?null:s;if(d)return b&&o.x.eq(u.x)&&o.y.eq(u.y)?null:u;if(b&&_)return null;if(b)return o;if(_)return f;const y=lI(s,this.vector(),u,n.vector());return y===null||!Dd(i,y)?null:Hc.snap(y)}split(n){const t=[],r=n.events!==void 0,i=new fc(n,!0),s=new fc(n,!1),o=this.rightSE;this.replaceRightSE(s),t.push(s),t.push(i);const u=new Fg(i,o,this.rings.slice(),this.windings.slice());return fc.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),fc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),t}swapEvents(){const n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,r=this.windings.length;t<r;t++)this.windings[t]*=-1}consume(n){let t=this,r=n;for(;t.consumedBy;)t=t.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=Fg.compare(t,r);if(i!==0){if(i>0){const s=t;t=r,r=s}if(t.prev===r){const s=t;t=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const u=r.rings[s],f=r.windings[s],d=t.rings.indexOf(u);d===-1?(t.rings.push(u),t.windings.push(f)):t.windings[d]+=f}r.rings=null,r.windings=null,r.consumedBy=t,r.leftSE.consumedBy=t.leftSE,r.rightSE.consumedBy=t.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};const t=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let u=0,f=this.rings.length;u<f;u++){const d=this.rings[u],m=this.windings[u],_=t.indexOf(d);_===-1?(t.push(d),r.push(m)):r[_]+=m}const s=[],o=[];for(let u=0,f=t.length;u<f;u++){if(r[u]===0)continue;const d=t[u],m=d.poly;if(o.indexOf(m)===-1)if(d.isExterior)s.push(m);else{o.indexOf(m)===-1&&o.push(m);const _=s.indexOf(d.poly);_!==-1&&s.splice(_,1)}}for(let u=0,f=s.length;u<f;u++){const d=s[u].multiPoly;i.indexOf(d)===-1&&i.push(d)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const n=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(p1.type){case"union":{const r=n.length===0,i=t.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;n.length<t.length?(r=n.length,i=t.length):(r=t.length,i=n.length),this._isInResult=i===p1.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(n.length-t.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(n)!==r(t);break}}return this._isInResult}},yb=class{constructor(e,n,t){Wt(this,"poly");Wt(this,"isExterior");Wt(this,"segments");Wt(this,"bbox");if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=t,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Hc.snap({x:new hc(e[0][0]),y:new hc(e[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=e.length;s<o;s++){if(typeof e[s][0]!="number"||typeof e[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const u=Hc.snap({x:new hc(e[s][0]),y:new hc(e[s][1])});u.x.eq(i.x)&&u.y.eq(i.y)||(this.segments.push(mm.fromRing(i,u,this)),u.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=u.x),u.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=u.y),u.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=u.x),u.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=u.y),i=u)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(mm.fromRing(i,r,this))}getSweepEvents(){const e=[];for(let n=0,t=this.segments.length;n<t;n++){const r=this.segments[n];e.push(r.leftSE),e.push(r.rightSE)}return e}},pI=class{constructor(e,n){Wt(this,"multiPoly");Wt(this,"exteriorRing");Wt(this,"interiorRings");Wt(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new yb(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let t=1,r=e.length;t<r;t++){const i=new yb(e[t],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=n}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let n=0,t=this.interiorRings.length;n<t;n++){const r=this.interiorRings[n].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},_b=class{constructor(e,n){Wt(this,"isSubject");Wt(this,"polys");Wt(this,"bbox");if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new hc(Number.POSITIVE_INFINITY),y:new hc(Number.POSITIVE_INFINITY)},ur:{x:new hc(Number.NEGATIVE_INFINITY),y:new hc(Number.NEGATIVE_INFINITY)}};for(let t=0,r=e.length;t<r;t++){const i=new pI(e[t],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=n}getSweepEvents(){const e=[];for(let n=0,t=this.polys.length;n<t;n++){const r=this.polys[n].getSweepEvents();for(let i=0,s=r.length;i<s;i++)e.push(r[i])}return e}},gI=(e,...n)=>p1.run("intersection",e,n);Hc.set;function mI(e,n){var t,r,i,s,o,u,f,d,m,_,b=0,y=e.type==="FeatureCollection",M=e.type==="Feature",k=y?e.features.length:1;for(t=0;t<k;t++){for(u=y?e.features[t].geometry:M?e.geometry:e,d=y?e.features[t].properties:M?e.properties:{},m=y?e.features[t].bbox:M?e.bbox:void 0,_=y?e.features[t].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,b,d,m,_)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,b,d,m,_)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],b,d,m,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}b++}}function vI(e,n={}){const t=[];if(mI(e,i=>{t.push(i.coordinates)}),t.length<2)throw new Error("Must specify at least 2 geometries");const r=gI(t[0],...t.slice(1));return r.length===0?null:r.length===1?du(r[0],n.properties):F7(r,n.properties)}var yI=vI;function cx(e,n,t){if(e!==null)for(var r,i,s,o,u,f,d,m=0,_=0,b,y=e.type,M=y==="FeatureCollection",k=y==="Feature",F=M?e.features.length:1,I=0;I<F;I++){d=M?e.features[I].geometry:k?e.geometry:e,b=d?d.type==="GeometryCollection":!1,u=b?d.geometries.length:1;for(var R=0;R<u;R++){var Y=0,ee=0;if(o=b?d.geometries[R]:d,o!==null){f=o.coordinates;var he=o.type;switch(m=0,he){case null:break;case"Point":if(n(f,_,I,Y,ee)===!1)return!1;_++,Y++;break;case"LineString":case"MultiPoint":for(r=0;r<f.length;r++){if(n(f[r],_,I,Y,ee)===!1)return!1;_++,he==="MultiPoint"&&Y++}he==="LineString"&&Y++;break;case"Polygon":case"MultiLineString":for(r=0;r<f.length;r++){for(i=0;i<f[r].length-m;i++){if(n(f[r][i],_,I,Y,ee)===!1)return!1;_++}he==="MultiLineString"&&Y++,he==="Polygon"&&ee++}he==="Polygon"&&Y++;break;case"MultiPolygon":for(r=0;r<f.length;r++){for(ee=0,i=0;i<f[r].length;i++){for(s=0;s<f[r][i].length-m;s++){if(n(f[r][i][s],_,I,Y,ee)===!1)return!1;_++}ee++}Y++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(cx(o.geometries[r],n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function _I(e,n){var t,r,i,s,o,u,f,d,m,_,b=0,y=e.type==="FeatureCollection",M=e.type==="Feature",k=y?e.features.length:1;for(t=0;t<k;t++){for(u=y?e.features[t].geometry:M?e.geometry:e,d=y?e.features[t].properties:M?e.properties:{},m=y?e.features[t].bbox:M?e.bbox:void 0,_=y?e.features[t].id:M?e.id:void 0,f=u?u.type==="GeometryCollection":!1,o=f?u.geometries.length:1,i=0;i<o;i++){if(s=f?u.geometries[i]:u,s===null){if(n(null,b,d,m,_)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(n(s,b,d,m,_)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(n(s.geometries[r],b,d,m,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}b++}}function bI(e,n){_I(e,function(t,r,i,s,o){var u=t===null?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return n(cd(t,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var f;switch(u){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon";break}for(var d=0;d<t.coordinates.length;d++){var m=t.coordinates[d],_={type:f,coordinates:m};if(n(cd(_,i),r,d)===!1)return!1}})}function wI(e,n){bI(e,function(t,r,i){var s=0;if(t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var u,f=0,d=0,m=0;if(cx(t,function(_,b,y,M,k){if(u===void 0||r>f||M>d||k>m){u=_,f=r,d=M,m=k,s=0;return}var F=pu([u,_],t.properties);if(n(F,r,i,k,s)===!1)return!1;s++,u=_})===!1)return!1}}})}function xI(e,n,t){var r=t,i=!1;return wI(e,function(s,o,u,f,d){i===!1&&t===void 0?r=s:r=n(r,s,o,u,f,d),i=!0}),r}function vm(e,n={}){return xI(e,(t,r)=>{const i=r.geometry.coordinates;return t+dy(i[0],i[1],n)},0)}var Gf=vm;class vf extends qn.Polygon{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});Wt(this,"properties");this.properties=dn.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){dn.measure("Polygon.updateProperties",()=>{var t,r,i,s,o;try{const u=this.getLatLngs()[0];if(!u||u.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const f=u.map(I=>[I.lng,I.lat]);f.push(f[0]);const d=du([f]),m=rx(d),_=vm(pu([...f]),{units:"meters"}),b=sp(d),y=qn.latLng(b.geometry.coordinates[1],b.geometry.coordinates[0]),M=((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||"",k=((i=this.properties)==null?void 0:i.category)||"forages",F=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:u.map(I=>({lat:I.lat,lng:I.lng})),surface:m,perimeter:_,center:{lat:y.lat,lng:y.lng},vertices:u.length,category:k,accessLevel:F,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:M}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(u){console.error("Failed to calculate polygon properties",u)}})}setName(t){dn.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Polygon.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}setLatLngs(t){return dn.measure("Polygon.setLatLngs",()=>(super.setLatLngs(t),this.updateProperties(),this))}getMidPoints(){return dn.measure("Polygon.getMidPoints",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(qn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(t,r){dn.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i[t]=r,qn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(t,r){dn.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i.splice((t+1)%i.length,0,r),qn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(t){return dn.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>qn.latLng(s.lat+t.lat,s.lng+t.lng));return qn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return dn.measure("Polygon.getCenter",()=>{const t=this.getLatLngs()[0];if(!t||t.length===0)return new qn.LatLng(0,0);try{const r=t.filter(d=>d&&typeof d.lat=="number"&&typeof d.lng=="number"&&!isNaN(d.lat)&&!isNaN(d.lng)&&Math.abs(d.lat)<=90&&Math.abs(d.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new qn.LatLng(0,0);const i=r.map(d=>[d.lng,d.lat]);i.push(i[0]);const s=du([i]),o=sp(s),u=o.geometry.coordinates[1],f=o.geometry.coordinates[0];if(typeof u!="number"||typeof f!="number"||isNaN(u)||isNaN(f)||Math.abs(u)>90||Math.abs(f)>180)throw new Error("Centroid calcul invalide");return qn.latLng(u,f)}catch(r){console.warn("Erreur lors du calcul du centrode avec turf.js, utilisation de la mthode simple",r);let i=0,s=0,o=0;for(const u of t)u&&typeof u.lat=="number"&&typeof u.lng=="number"&&!isNaN(u.lat)&&!isNaN(u.lng)&&Math.abs(u.lat)<=90&&Math.abs(u.lng)<=180&&(i+=u.lat,s+=u.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new qn.LatLng(0,0)):new qn.LatLng(i/o,s/o)}})}getSegmentLengths(){return dn.measure("Polygon.getSegmentLengths",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(s.distanceTo(o))}return r})}}class Bs extends qn.Polyline{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});Wt(this,"properties");Wt(this,"cachedProperties",{});Wt(this,"needsUpdate",!0);this.properties=dn.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){dn.measure("Line.updateProperties",()=>{var i,s,o,u,f;const t=this.getLatLngs();if(!t||t.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=t.map(d=>[d.lng,d.lat]);try{const d=pu(r),m=vm(d,{units:"meters"});let _;if(t.length===2)_=qn.latLng((t[0].lat+t[1].lat)/2,(t[0].lng+t[1].lng)/2);else{const F=u1(d,m/2,{units:"meters"});_=qn.latLng(F.geometry.coordinates[1],F.geometry.coordinates[0])}const b=10,y=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",M=((o=this.properties)==null?void 0:o.category)||"forages",k=((u=this.properties)==null?void 0:u.accessLevel)||"visitor";this.properties={type:"Line",length:m,coordinates:t.map(F=>({lat:F.lat,lng:F.lng})),center:{lat:_.lat,lng:_.lng},vertices:t.length,surfaceInfluence:m*b,dimensions:{width:b},category:M,accessLevel:k,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((f=this.options)==null?void 0:f.dashArray)||"",name:y}},this.cachedProperties.length=m,this.cachedProperties.center=_,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(d){console.error("Failed to calculate line properties",d)}})}setName(t){dn.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Line.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}invalidateCache(){dn.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(t){return super.setLatLngs(t),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return dn.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];if(!s||!o){console.warn("Points invalides dtects pour le segment",i);continue}r.push(qn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(t){return dn.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return null;const i=r[t],s=r[t+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",t),null):qn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(t,r,i=!1){dn.measure("Line.moveVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length&&(s[t]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:t,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(t,r,i=!1){dn.measure("Line.addVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length-1&&(s.splice(t+1,0,r),qn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(t,r=!0){return dn.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>qn.latLng(o.lat+t.lat,o.lng+t.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:t,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return dn.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const t=this.getLatLngs();if(t.length<2)return t[0]||new qn.LatLng(0,0);try{const r=t.map(f=>[f.lng,f.lat]),i=pu(r),s=vm(i,{units:"meters"}),o=u1(i,s/2,{units:"meters"}),u=qn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=u,u}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=t.reduce((u,f)=>u+f.lat,0)/t.length,s=t.reduce((u,f)=>u+f.lng,0)/t.length,o=new qn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return dn.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(t){return dn.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return 0;const i=r[t],s=r[t+1];return i.distanceTo(s)})}getLengthToVertex(t){return dn.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(t<=0||r.length<2)return 0;for(let s=0;s<Math.min(t,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return dn.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const t=this.getLatLngs();let r=0;for(let i=0;i<t.length-1;i++)r+=t[i].distanceTo(t[i+1]);return this.cachedProperties.length=r,r})}}const Qa=class Qa extends Bs{constructor(t,r={}){super(t,{...r,color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});Wt(this,"elevationData",[]);Wt(this,"elevationProfile",null);Wt(this,"elevationMarker",null);Wt(this,"isZooming",!1);Wt(this,"simpleLine",null);Wt(this,"isDestroyed",!1);Wt(this,"zoomAnimationTimeout",null);this.properties=dn.measure("ElevationLine.constructor.initProperties",()=>({...this.properties,type:"ElevationLine",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...this.properties.style||{},name:r.name||""},elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending"})),this.setupEventListeners()}setupEventListeners(){dn.measure("ElevationLine.setupEventListeners",()=>{this.on("move",()=>this.updateElevationProfile()),this.on("add",()=>{this._map&&(this._map.on("zoomstart",this.handleZoomStart,this),this._map.on("zoomend",this.handleZoomEnd,this),this._map.on("zoomanim",this._animateZoom,this))}),this.on("remove",()=>{this.cleanupEventListeners()})})}cleanupEventListeners(){this._map&&(this._map.off("zoomstart",this.handleZoomStart,this),this._map.off("zoomend",this.handleZoomEnd,this),this._map.off("zoomanim",this._animateZoom,this)),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null)}_animateZoom(t){if(this.isDestroyed||!this._map||!this.getLatLngs().length){console.debug("[ElevationLine] Animation de zoom ignore - ligne dtruite ou carte non disponible");return}this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null);try{this.elevationMarker&&this.elevationMarker.remove();const r=this._path;r&&(r.style.display="none");const i=this.getLatLngs();if(i&&i.length>0&&this._map&&!this.isDestroyed){if(!this._map.getContainer()){console.debug("[ElevationLine] Carte non valide pendant l'animation de zoom");return}if(this.simpleLine?this.simpleLine.setLatLngs(i):(this.simpleLine=qn.polyline(i,{color:"#FF4500",weight:3,opacity:.6,smoothFactor:1,interactive:!1}),this._map&&this._map.getContainer()&&this.simpleLine.addTo(this._map)),this.simpleLine&&this.simpleLine._path){const s=this.simpleLine._path.style.transform;this.simpleLine._path.style.transform="",this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this.simpleLine&&this.simpleLine._path&&(this.simpleLine._path.style.transform=s,this.simpleLine._path.style.display=""),r&&!this.isDestroyed&&(r.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(o){console.warn("[ElevationLine] Erreur lors de la restauration aprs animation:",o),this.cleanup()}},300)}}}catch(r){console.debug("[ElevationLine] Animation de zoom ignore:",r),this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this._path&&(this._path.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(i){console.error("[ElevationLine] Erreur lors de la restauration aprs animation:",i),this.cleanup()}},300)}}handleZoomStart(){this.isDestroyed||dn.measure("ElevationLine.handleZoomStart",()=>{if(!(this.isZooming||!this._map)){this.isZooming=!0;try{this.elevationMarker&&this.elevationMarker.remove();const t=this._path;t&&(t.style.display="none"),this.isDestroyed||this.setStyle({opacity:.3})}catch(t){console.error("[ElevationLine] Error in handleZoomStart:",t),this.cleanup()}}})}handleZoomEnd(){this.isDestroyed||dn.measure("ElevationLine.handleZoomEnd",()=>{if(!this._map){this.isZooming=!1;return}try{this.simpleLine&&this._map&&(this.simpleLine.remove(),this.simpleLine=null);const t=this._path;t&&(t.style.display=""),this.isDestroyed||this.setStyle({opacity:.8}),this.zoomAnimationTimeout&&clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=setTimeout(()=>{if(!(this.isDestroyed||!this._map))try{this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(r){console.warn("[ElevationLine] Erreur lors du redraw aprs zoom:",r),this.cleanup()}},50)}catch(t){console.error("[ElevationLine] Error in handleZoomEnd:",t)}finally{this.isZooming=!1}})}cleanup(){dn.measure("ElevationLine.cleanup",()=>{if(this.isZooming=!1,this.hideElevationMarker(),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null),this.simpleLine&&this._map){try{this.simpleLine.remove()}catch(r){console.error("[ElevationLine] Error removing simpleLine:",r)}this.simpleLine=null}if(this.elevationProfile){try{this.elevationProfile.remove()}catch(r){console.error("[ElevationLine] Error removing elevationProfile:",r)}this.elevationProfile=null}const t=this._path;t&&(t.style.display=""),!this.isDestroyed&&this._map&&this._map.hasLayer(this)&&this.setStyle({opacity:.8})})}calculateOptimalSampleCount(){return dn.measure("ElevationLine.calculateOptimalSampleCount",()=>{const t=this.getLength(),r=Math.ceil(t/Qa.SAMPLE_DISTANCE);return Math.min(Math.max(r,Qa.MIN_SAMPLES),Qa.MAX_SAMPLES)})}async fetchElevationData(t=0){return dn.measure("ElevationLine.fetchElevationData",async()=>{if(this.getLatLngs().length===0)return;const i=this.getLength();let s="";const o=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${o} sample points for ${i.toFixed(0)}m line`);const u=[];for(let f=0;f<o;f++){const d=f/(o-1)*i,m=this.getPointAtDistance(d);m&&u.push(`${m.lat},${m.lng}`)}s=u.join("|");try{const f=await fetch(`${Qa.API_URL}?locations=${s}`);if(!f.ok)throw new Error(`HTTP error ${f.status}`);const d=await f.json();if(!d.results||!Array.isArray(d.results))throw new Error("Invalid API response format");this.elevationData=d.results.map((m,_)=>({distance:_/(o-1)*i,elevation:m.elevation})),this.properties.dataSource="api"}catch(f){if(console.warn(`[ElevationLine] API fetch attempt ${t+1}/${Qa.MAX_RETRIES} failed:`,f),t<Qa.MAX_RETRIES)return await new Promise(d=>setTimeout(d,Qa.RETRY_DELAY)),this.fetchElevationData(t+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()})}simulateElevationData(){dn.measure("ElevationLine.simulateElevationData",()=>{const t=this.getLength(),r=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:r},(i,s)=>{const o=s/(r-1)*t,u=100+Math.sin(o/t*Math.PI*2)*50;return{distance:o,elevation:u}})})}calculateElevationStatistics(){dn.measure("ElevationLine.calculateElevationStatistics",()=>{if(!this.elevationData.length)return;const t=this.elevationData.map(m=>m.elevation),r=t.length?Math.max(...t):0,i=t.length?Math.min(...t):0;let s=0,o=0,u=0,f=0,d=0;console.log("[ElevationLine][calculateElevationStatistics] Donnes brutes:",{elevationsCount:t.length,maxElevation:r,minElevation:i});for(let m=1;m<this.elevationData.length;m++){const _=this.elevationData[m-1],b=this.elevationData[m],y=b.elevation-_.elevation;y>0?s+=y:o+=Math.abs(y);const M=b.distance-_.distance;if(M>0){const k=y/M*100;u=Math.max(u,Math.abs(k)),f+=Math.abs(k),d++}}console.log("[ElevationLine][calculateElevationStatistics] Calculs intermdiaires:",{gain:s,loss:o,maxSlope:u,averageSlope:d>0?f/d:0}),this.properties={...this.properties,type:"ElevationLine",maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:u,averageSlope:d>0?f/d:0,elevationData:this.elevationData,dataSource:this.properties.dataSource,length:this.getLength()},console.log("[ElevationLine][calculateElevationStatistics] Proprits mises  jour:",this.properties)})}showElevationAt(t){dn.measure("ElevationLine.showElevationAt",()=>{if(!(!this.elevationData.length||!this._map))try{const r=this.elevationData.reduce((s,o)=>Math.abs(o.distance-t)<Math.abs(s.distance-t)?o:s),i=this.getPointAtDistance(t);if(!i)return;this.elevationMarker?(this.elevationMarker.setLatLng(i),this.elevationMarker.setTooltipContent(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`)):(this.elevationMarker=qn.circleMarker(i,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1,weight:2,className:"elevation-marker"}),this.elevationMarker.bindTooltip(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`,{permanent:!0,direction:"top",offset:[0,-10],className:"elevation-marker-tooltip"}),this._map&&this._map.hasLayer(this)&&this.elevationMarker.addTo(this._map)),this.fire("elevation:show",{distance:t,elevation:r.elevation,latLng:i})}catch(r){console.error("[ElevationLine] Erreur lors de l'affichage de l'lvation:",r),this.hideElevationMarker()}})}hideElevationMarker(){dn.measure("ElevationLine.hideElevationMarker",()=>{this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)})}getPointAtDistance(t){return dn.measure("ElevationLine.getPointAtDistance",()=>{try{const i=this.getLatLngs().map(u=>[u.lng,u.lat]),s=pu(i),o=u1(s,t,{units:"meters"});return qn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0])}catch(r){return console.error("Error calculating point at distance",r),null}})}moveVertex(t,r,i=!1){dn.measure("ElevationLine.moveVertex",()=>{super.moveVertex(t,r,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile()})}addVertex(t,r,i=!1){dn.measure("ElevationLine.addVertex",()=>{console.warn("[ElevationLine] Tentative d'ajout de vertex ignore - non autoris pour un profil altimtrique")})}setLatLngs(t){return dn.measure("ElevationLine.setLatLngs",()=>(super.setLatLngs(t),this.properties.type="ElevationLine",this.updateElevationProfile(),this))}move(t,r=!0){return dn.measure("ElevationLine.move",()=>(super.move(t,!1),this.properties.type="ElevationLine",r&&this.updateElevationProfile(),this))}setName(t){dn.measure("ElevationLine.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("ElevationLine.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}formatDistance(t){return dn.measure("ElevationLine.formatDistance",()=>t>=1e3?`${(t/1e3).toFixed(2)} km`:`${t.toFixed(0)} m`)}formatElevation(t){return dn.measure("ElevationLine.formatElevation",()=>`${t.toFixed(0)} m`)}onAdd(t){return dn.measure("ElevationLine.onAdd",()=>(super.onAdd(t),this))}onRemove(t){return this.isDestroyed=!0,this.cleanupEventListeners(),this.cleanup(),super.onRemove(t)}async updateElevationProfile(){return dn.measure("ElevationLine.updateElevationProfile",async()=>{try{if(this.properties.elevationData&&this.properties.dataSource==="restored"){this.elevationData=this.properties.elevationData,this.calculateElevationStatistics(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties});return}await this.fetchElevationData(),this.updateProperties(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}catch(t){console.error("[ElevationLine] Erreur lors de la mise  jour du profil d'lvation:",t),this.properties.dataSource="error"}})}updateProperties(){dn.measure("ElevationLine.updateProperties",()=>{var t,r;if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const i=this.elevationData.map(F=>F.elevation),s=Math.max(...i),o=Math.min(...i);let u=0,f=0,d=0,m=0,_=0;for(let F=1;F<this.elevationData.length;F++){const I=this.elevationData[F-1],R=this.elevationData[F],Y=R.elevation-I.elevation;Y>0?u+=Y:f+=Math.abs(Y);const ee=R.distance-I.distance;if(ee>0){const he=Y/ee*100;d=Math.max(d,Math.abs(he)),m+=Math.abs(he),_++}}const y=this.getLatLngs().map(F=>({lat:F.lat,lng:F.lng})),M=((t=this.properties)==null?void 0:t.category)||"forages",k=((r=this.properties)==null?void 0:r.accessLevel)||"visitor";this.properties={...this.properties,type:"ElevationLine",coordinates:y,elevationData:this.elevationData.map(F=>({distance:F.distance,elevation:F.elevation})),maxElevation:s,minElevation:o,elevationGain:u,elevationLoss:f,maxSlope:d,averageSlope:_>0?m/_:0,dataSource:this.properties.dataSource||"api",category:M,accessLevel:k},this.fire("properties:updated",{shape:this,properties:this.properties})}})}getElevationData(){return dn.measure("ElevationLine.getElevationData",()=>this.elevationData)}};Wt(Qa,"API_URL","https://api.open-elevation.com/api/v1/lookup"),Wt(Qa,"RETRY_DELAY",2e3),Wt(Qa,"MAX_RETRIES",3),Wt(Qa,"SAMPLE_DISTANCE",100),Wt(Qa,"MIN_SAMPLES",10),Wt(Qa,"MAX_SAMPLES",50);let Cf=Qa;var ym={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ym.exports;(function(e,n){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",u="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",d=500,m="__lodash_placeholder__",_=1,b=2,y=4,M=1,k=2,F=1,I=2,R=4,Y=8,ee=16,he=32,fe=64,ve=128,$=256,U=512,Z=30,T="...",N=800,O=16,z=1,q=2,G=3,oe=1/0,ie=9007199254740991,_e=17976931348623157e292,Ce=NaN,Te=4294967295,J=Te-1,H=Te>>>1,Q=[["ary",ve],["bind",F],["bindKey",I],["curry",Y],["curryRight",ee],["flip",U],["partial",he],["partialRight",fe],["rearg",$]],ue="[object Arguments]",se="[object Array]",pe="[object AsyncFunction]",K="[object Boolean]",D="[object Date]",ke="[object DOMException]",Me="[object Error]",Ge="[object Function]",ce="[object GeneratorFunction]",te="[object Map]",ye="[object Number]",de="[object Null]",We="[object Object]",He="[object Promise]",tt="[object Proxy]",Ze="[object RegExp]",et="[object Set]",ze="[object String]",wt="[object Symbol]",Pt="[object Undefined]",kt="[object WeakMap]",Jt="[object WeakSet]",on="[object ArrayBuffer]",cn="[object DataView]",Ke="[object Float32Array]",ot="[object Float64Array]",rt="[object Int8Array]",$t="[object Int16Array]",Qt="[object Int32Array]",Rn="[object Uint8Array]",Ln="[object Uint8ClampedArray]",Dn="[object Uint16Array]",ar="[object Uint32Array]",En=/\b__p \+= '';/g,jn=/\b(__p \+=) '' \+/g,An=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yn=/&(?:amp|lt|gt|quot|#39);/g,wr=/[&<>"']/g,Or=RegExp(Yn.source),gr=RegExp(wr.source),oi=/<%-([\s\S]+?)%>/g,ft=/<%([\s\S]+?)%>/g,Qe=/<%=([\s\S]+?)%>/g,Ut=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xn=/^\w*$/,vn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bn=/[\\^$.*+?()[\]{}|]/g,qt=RegExp(bn.source),Hn=/^\s+/,St=/\s/,mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,wn=/\{\n\/\* \[wrapped with (.+)\] \*/,ei=/,? & /,Tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fn=/[()=,{}\[\]\/\s]/,Qn=/\\(\\)?/g,Mi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Sr=/\w*$/,Pr=/^[-+]0x[0-9a-f]+$/i,dr=/^0b[01]+$/i,Ai=/^\[object .+?Constructor\]$/,xr=/^0o[0-7]+$/i,Gr=/^(?:0|[1-9]\d*)$/,Ir=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tn=/($^)/,zi=/['\n\r\u2028\u2029\\]/g,Bi="\\ud800-\\udfff",Qi="\\u0300-\\u036f",ti="\\ufe20-\\ufe2f",Br="\\u20d0-\\u20ff",ci=Qi+ti+Br,mr="\\u2700-\\u27bf",Si="a-z\\xdf-\\xf6\\xf8-\\xff",gs="\\xac\\xb1\\xd7\\xf7",va="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Rr="\\u2000-\\u206f",mn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Zn="A-Z\\xc0-\\xd6\\xd8-\\xde",Ei="\\ufe0e\\ufe0f",Ri=gs+va+Rr+mn,Fi="[']",jo="["+Bi+"]",cr="["+Ri+"]",Gn="["+ci+"]",Ms="\\d+",si="["+mr+"]",ki="["+Si+"]",fi="[^"+Bi+Ri+Ms+mr+Si+Zn+"]",Cn="\\ud83c[\\udffb-\\udfff]",fn="(?:"+Gn+"|"+Cn+")",fr="[^"+Bi+"]",eo="(?:\\ud83c[\\udde6-\\uddff]){2}",Ao="[\\ud800-\\udbff][\\udc00-\\udfff]",_o="["+Zn+"]",$a="\\u200d",es="(?:"+ki+"|"+fi+")",ol="(?:"+_o+"|"+fi+")",jr="(?:"+Fi+"(?:d|ll|m|re|s|t|ve))?",As="(?:"+Fi+"(?:D|LL|M|RE|S|T|VE))?",uo=fn+"?",ts="["+Ei+"]?",ji="(?:"+$a+"(?:"+[fr,eo,Ao].join("|")+")"+ts+uo+")*",Ml="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",za="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vr=ts+uo+ji,yr="(?:"+[si,eo,Ao].join("|")+")"+vr,ns="(?:"+[fr+Gn+"?",Gn,eo,Ao,jo].join("|")+")",$r=RegExp(Fi,"g"),Al=RegExp(Gn,"g"),hi=RegExp(Cn+"(?="+Cn+")|"+ns+vr,"g"),rs=RegExp([_o+"?"+ki+"+"+jr+"(?="+[cr,_o,"$"].join("|")+")",ol+"+"+As+"(?="+[cr,_o+es,"$"].join("|")+")",_o+"?"+es+"+"+jr,_o+"+"+As,za,Ml,Ms,yr].join("|"),"g"),to=RegExp("["+$a+Bi+ci+Ei+"]"),Ua=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],kl=-1,Er={};Er[Ke]=Er[ot]=Er[rt]=Er[$t]=Er[Qt]=Er[Rn]=Er[Ln]=Er[Dn]=Er[ar]=!0,Er[ue]=Er[se]=Er[on]=Er[K]=Er[cn]=Er[D]=Er[Me]=Er[Ge]=Er[te]=Er[ye]=Er[We]=Er[Ze]=Er[et]=Er[ze]=Er[kt]=!1;var Hr={};Hr[ue]=Hr[se]=Hr[on]=Hr[cn]=Hr[K]=Hr[D]=Hr[Ke]=Hr[ot]=Hr[rt]=Hr[$t]=Hr[Qt]=Hr[te]=Hr[ye]=Hr[We]=Hr[Ze]=Hr[et]=Hr[ze]=Hr[wt]=Hr[Rn]=Hr[Ln]=Hr[Dn]=Hr[ar]=!0,Hr[Me]=Hr[Ge]=Hr[kt]=!1;var Va={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ju={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},sl=parseFloat,Nl=parseInt,Ql=typeof ea=="object"&&ea&&ea.Object===Object&&ea,Kr=typeof self=="object"&&self&&self.Object===Object&&self,co=Ql||Kr||Function("return this")(),lr=n&&!n.nodeType&&n,fo=lr&&!0&&e&&!e.nodeType&&e,al=fo&&fo.exports===lr,ya=al&&Ql.process,Wi=function(){try{var _t=fo&&fo.require&&fo.require("util").types;return _t||ya&&ya.binding&&ya.binding("util")}catch{}}(),eu=Wi&&Wi.isArrayBuffer,na=Wi&&Wi.isDate,Dl=Wi&&Wi.isMap,Il=Wi&&Wi.isRegExp,Fs=Wi&&Wi.isSet,Ol=Wi&&Wi.isTypedArray;function yi(_t,Zt,Nt){switch(Nt.length){case 0:return _t.call(Zt);case 1:return _t.call(Zt,Nt[0]);case 2:return _t.call(Zt,Nt[0],Nt[1]);case 3:return _t.call(Zt,Nt[0],Nt[1],Nt[2])}return _t.apply(Zt,Nt)}function Xu(_t,Zt,Nt,kn){for(var Jn=-1,Lr=_t==null?0:_t.length;++Jn<Lr;){var Zi=_t[Jn];Zt(kn,Zi,Nt(Zi),_t)}return kn}function ko(_t,Zt){for(var Nt=-1,kn=_t==null?0:_t.length;++Nt<kn&&Zt(_t[Nt],Nt,_t)!==!1;);return _t}function Hs(_t,Zt){for(var Nt=_t==null?0:_t.length;Nt--&&Zt(_t[Nt],Nt,_t)!==!1;);return _t}function Bl(_t,Zt){for(var Nt=-1,kn=_t==null?0:_t.length;++Nt<kn;)if(!Zt(_t[Nt],Nt,_t))return!1;return!0}function qs(_t,Zt){for(var Nt=-1,kn=_t==null?0:_t.length,Jn=0,Lr=[];++Nt<kn;){var Zi=_t[Nt];Zt(Zi,Nt,_t)&&(Lr[Jn++]=Zi)}return Lr}function ll(_t,Zt){var Nt=_t==null?0:_t.length;return!!Nt&&hn(_t,Zt,0)>-1}function ul(_t,Zt,Nt){for(var kn=-1,Jn=_t==null?0:_t.length;++kn<Jn;)if(Nt(Zt,_t[kn]))return!0;return!1}function _i(_t,Zt){for(var Nt=-1,kn=_t==null?0:_t.length,Jn=Array(kn);++Nt<kn;)Jn[Nt]=Zt(_t[Nt],Nt,_t);return Jn}function ks(_t,Zt){for(var Nt=-1,kn=Zt.length,Jn=_t.length;++Nt<kn;)_t[Jn+Nt]=Zt[Nt];return _t}function _a(_t,Zt,Nt,kn){var Jn=-1,Lr=_t==null?0:_t.length;for(kn&&Lr&&(Nt=_t[++Jn]);++Jn<Lr;)Nt=Zt(Nt,_t[Jn],Jn,_t);return Nt}function ho(_t,Zt,Nt,kn){var Jn=_t==null?0:_t.length;for(kn&&Jn&&(Nt=_t[--Jn]);Jn--;)Nt=Zt(Nt,_t[Jn],Jn,_t);return Nt}function B(_t,Zt){for(var Nt=-1,kn=_t==null?0:_t.length;++Nt<kn;)if(Zt(_t[Nt],Nt,_t))return!0;return!1}var be=_r("length");function Ye(_t){return _t.split("")}function ut(_t){return _t.match(Tt)||[]}function Lt(_t,Zt,Nt){var kn;return Nt(_t,function(Jn,Lr,Zi){if(Zt(Jn,Lr,Zi))return kn=Lr,!1}),kn}function Vt(_t,Zt,Nt,kn){for(var Jn=_t.length,Lr=Nt+(kn?1:-1);kn?Lr--:++Lr<Jn;)if(Zt(_t[Lr],Lr,_t))return Lr;return-1}function hn(_t,Zt,Nt){return Zt===Zt?Po(_t,Zt,Nt):Vt(_t,$n,Nt)}function In(_t,Zt,Nt,kn){for(var Jn=Nt-1,Lr=_t.length;++Jn<Lr;)if(kn(_t[Jn],Zt))return Jn;return-1}function $n(_t){return _t!==_t}function or(_t,Zt){var Nt=_t==null?0:_t.length;return Nt?bi(_t,Zt)/Nt:Ce}function _r(_t){return function(Zt){return Zt==null?t:Zt[_t]}}function zr(_t){return function(Zt){return _t==null?t:_t[Zt]}}function Hi(_t,Zt,Nt,kn,Jn){return Jn(_t,function(Lr,Zi,wi){Nt=kn?(kn=!1,Lr):Zt(Nt,Lr,Zi,wi)}),Nt}function di(_t,Zt){var Nt=_t.length;for(_t.sort(Zt);Nt--;)_t[Nt]=_t[Nt].value;return _t}function bi(_t,Zt){for(var Nt,kn=-1,Jn=_t.length;++kn<Jn;){var Lr=Zt(_t[kn]);Lr!==t&&(Nt=Nt===t?Lr:Nt+Lr)}return Nt}function po(_t,Zt){for(var Nt=-1,kn=Array(_t);++Nt<_t;)kn[Nt]=Zt(Nt);return kn}function bo(_t,Zt){return _i(Zt,function(Nt){return[Nt,_t[Nt]]})}function Ts(_t){return _t&&_t.slice(0,wa(_t)+1).replace(Hn,"")}function Ur(_t){return function(Zt){return _t(Zt)}}function $o(_t,Zt){return _i(Zt,function(Nt){return _t[Nt]})}function cl(_t,Zt){return _t.has(Zt)}function is(_t,Zt){for(var Nt=-1,kn=_t.length;++Nt<kn&&hn(Zt,_t[Nt],0)>-1;);return Nt}function tu(_t,Zt){for(var Nt=_t.length;Nt--&&hn(Zt,_t[Nt],0)>-1;);return Nt}function ra(_t,Zt){for(var Nt=_t.length,kn=0;Nt--;)_t[Nt]===Zt&&++kn;return kn}var xu=zr(Va),Ga=zr(Ju);function Ha(_t){return"\\"+Xl[_t]}function wo(_t,Zt){return _t==null?t:_t[Zt]}function ia(_t){return to.test(_t)}function Ns(_t){return Ua.test(_t)}function ms(_t){for(var Zt,Nt=[];!(Zt=_t.next()).done;)Nt.push(Zt.value);return Nt}function fl(_t){var Zt=-1,Nt=Array(_t.size);return _t.forEach(function(kn,Jn){Nt[++Zt]=[Jn,kn]}),Nt}function zo(_t,Zt){return function(Nt){return _t(Zt(Nt))}}function os(_t,Zt){for(var Nt=-1,kn=_t.length,Jn=0,Lr=[];++Nt<kn;){var Zi=_t[Nt];(Zi===Zt||Zi===m)&&(_t[Nt]=m,Lr[Jn++]=Nt)}return Lr}function ss(_t){var Zt=-1,Nt=Array(_t.size);return _t.forEach(function(kn){Nt[++Zt]=kn}),Nt}function Qu(_t){var Zt=-1,Nt=Array(_t.size);return _t.forEach(function(kn){Nt[++Zt]=[kn,kn]}),Nt}function Po(_t,Zt,Nt){for(var kn=Nt-1,Jn=_t.length;++kn<Jn;)if(_t[kn]===Zt)return kn;return-1}function ba(_t,Zt,Nt){for(var kn=Nt+1;kn--;)if(_t[kn]===Zt)return kn;return kn}function Uo(_t){return ia(_t)?Go(_t):be(_t)}function Vo(_t){return ia(_t)?To(_t):Ye(_t)}function wa(_t){for(var Zt=_t.length;Zt--&&St.test(_t.charAt(Zt)););return Zt}var xa=zr(Tl);function Go(_t){for(var Zt=hi.lastIndex=0;hi.test(_t);)++Zt;return Zt}function To(_t){return _t.match(hi)||[]}function oa(_t){return _t.match(rs)||[]}var Ds=function _t(Zt){Zt=Zt==null?co:Ho.defaults(co.Object(),Zt,Ho.pick(co,wu));var Nt=Zt.Array,kn=Zt.Date,Jn=Zt.Error,Lr=Zt.Function,Zi=Zt.Math,wi=Zt.Object,Rl=Zt.RegExp,as=Zt.String,Ki=Zt.TypeError,sa=Nt.prototype,La=Lr.prototype,aa=wi.prototype,la=Zt["__core-js_shared__"],ua=La.toString,Yr=aa.hasOwnProperty,Ws=0,No=function(){var c=/[^.]+$/.exec(la&&la.keys&&la.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),xi=aa.toString,Ti=ua.call(wi),go=co._,Ui=Rl("^"+ua.call(Yr).replace(bn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Is=al?Zt.Buffer:t,vs=Zt.Symbol,js=Zt.Uint8Array,Lu=Is?Is.allocUnsafe:t,ca=zo(wi.getPrototypeOf,wi),xo=wi.create,$i=aa.propertyIsEnumerable,qo=sa.splice,ys=vs?vs.isConcatSpreadable:t,pr=vs?vs.iterator:t,Sa=vs?vs.toStringTag:t,Ea=function(){try{var c=Ff(wi,"defineProperty");return c({},"",{}),c}catch{}}(),Zs=Zt.clearTimeout!==co.clearTimeout&&Zt.clearTimeout,ls=kn&&kn.now!==co.Date.now&&kn.now,bc=Zt.setTimeout!==co.setTimeout&&Zt.setTimeout,Do=Zi.ceil,Io=Zi.floor,Ks=wi.getOwnPropertySymbols,a=Is?Is.isBuffer:t,p=Zt.isFinite,E=sa.join,V=zo(wi.keys,wi),ae=Zi.max,Se=Zi.min,st=kn.now,At=Zt.parseInt,Gt=Zi.random,an=sa.reverse,On=Ff(Zt,"DataView"),er=Ff(Zt,"Map"),Fr=Ff(Zt,"Promise"),Lo=Ff(Zt,"Set"),io=Ff(Zt,"WeakMap"),Oo=Ff(wi,"create"),Yi=io&&new io,_s={},wc=jf(On),fa=jf(er),Ys=jf(Fr),$s=jf(Lo),Tf=jf(io),nu=vs?vs.prototype:t,gi=nu?nu.valueOf:t,Wo=nu?nu.toString:t;function De(c){if(us(c)&&!Xr(c)&&!(c instanceof Vr)){if(c instanceof Bo)return c;if(Yr.call(c,"__wrapped__"))return Jy(c)}return new Bo(c)}var bs=function(){function c(){}return function(g){if(!Ko(g))return{};if(xo)return xo(g);c.prototype=g;var A=new c;return c.prototype=t,A}}();function Su(){}function Bo(c,g){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=t}De.templateSettings={escape:oi,evaluate:ft,interpolate:Qe,variable:"",imports:{_:De}},De.prototype=Su.prototype,De.prototype.constructor=De,Bo.prototype=bs(Su.prototype),Bo.prototype.constructor=Bo;function Vr(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Te,this.__views__=[]}function Zc(){var c=new Vr(this.__wrapped__);return c.__actions__=dl(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=dl(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=dl(this.__views__),c}function ph(){if(this.__filtered__){var c=new Vr(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function Kc(){var c=this.__wrapped__.value(),g=this.__dir__,A=Xr(c),ne=g<0,xe=A?c.length:0,Re=f3(0,xe,this.__views__),it=Re.start,gt=Re.end,Mt=gt-it,ln=ne?gt:it-1,un=this.__iteratees__,yn=un.length,Un=0,ur=Se(Mt,this.__takeCount__);if(!A||!ne&&xe==Mt&&ur==Mt)return ru(c,this.__actions__);var Mr=[];e:for(;Mt--&&Un<ur;){ln+=g;for(var ui=-1,Ar=c[ln];++ui<yn;){var Li=un[ui],Di=Li.iteratee,$l=Li.type,Ka=Di(Ar);if($l==q)Ar=Ka;else if(!Ka){if($l==z)continue e;break e}}Mr[Un++]=Ar}return Mr}Vr.prototype=bs(Su.prototype),Vr.prototype.constructor=Vr;function qa(c){var g=-1,A=c==null?0:c.length;for(this.clear();++g<A;){var ne=c[g];this.set(ne[0],ne[1])}}function xc(){this.__data__=Oo?Oo(null):{},this.size=0}function Nf(c){var g=this.has(c)&&delete this.__data__[c];return this.size-=g?1:0,g}function yd(c){var g=this.__data__;if(Oo){var A=g[c];return A===f?t:A}return Yr.call(g,c)?g[c]:t}function ec(c){var g=this.__data__;return Oo?g[c]!==t:Yr.call(g,c)}function Yc(c,g){var A=this.__data__;return this.size+=this.has(c)?0:1,A[c]=Oo&&g===t?f:g,this}qa.prototype.clear=xc,qa.prototype.delete=Nf,qa.prototype.get=yd,qa.prototype.has=ec,qa.prototype.set=Yc;function Fl(c){var g=-1,A=c==null?0:c.length;for(this.clear();++g<A;){var ne=c[g];this.set(ne[0],ne[1])}}function _d(){this.__data__=[],this.size=0}function Jc(c){var g=this.__data__,A=yt(g,c);if(A<0)return!1;var ne=g.length-1;return A==ne?g.pop():qo.call(g,A,1),--this.size,!0}function Xc(c){var g=this.__data__,A=yt(g,c);return A<0?t:g[A][1]}function gh(c){return yt(this.__data__,c)>-1}function mh(c,g){var A=this.__data__,ne=yt(A,c);return ne<0?(++this.size,A.push([c,g])):A[ne][1]=g,this}Fl.prototype.clear=_d,Fl.prototype.delete=Jc,Fl.prototype.get=Xc,Fl.prototype.has=gh,Fl.prototype.set=mh;function Ca(c){var g=-1,A=c==null?0:c.length;for(this.clear();++g<A;){var ne=c[g];this.set(ne[0],ne[1])}}function vh(){this.size=0,this.__data__={hash:new qa,map:new(er||Fl),string:new qa}}function yh(c){var g=Yp(this,c).delete(c);return this.size-=g?1:0,g}function _h(c){return Yp(this,c).get(c)}function w(c){return Yp(this,c).has(c)}function P(c,g){var A=Yp(this,c),ne=A.size;return A.set(c,g),this.size+=A.size==ne?0:1,this}Ca.prototype.clear=vh,Ca.prototype.delete=yh,Ca.prototype.get=_h,Ca.prototype.has=w,Ca.prototype.set=P;function W(c){var g=-1,A=c==null?0:c.length;for(this.__data__=new Ca;++g<A;)this.add(c[g])}function le(c){return this.__data__.set(c,f),this}function we(c){return this.__data__.has(c)}W.prototype.add=W.prototype.push=le,W.prototype.has=we;function Ee(c){var g=this.__data__=new Fl(c);this.size=g.size}function Ae(){this.__data__=new Fl,this.size=0}function Ne(c){var g=this.__data__,A=g.delete(c);return this.size=g.size,A}function Ie(c){return this.__data__.get(c)}function qe(c){return this.__data__.has(c)}function ht(c,g){var A=this.__data__;if(A instanceof Fl){var ne=A.__data__;if(!er||ne.length<i-1)return ne.push([c,g]),this.size=++A.size,this;A=this.__data__=new Ca(ne)}return A.set(c,g),this.size=A.size,this}Ee.prototype.clear=Ae,Ee.prototype.delete=Ne,Ee.prototype.get=Ie,Ee.prototype.has=qe,Ee.prototype.set=ht;function Bt(c,g){var A=Xr(c),ne=!A&&$f(c),xe=!A&&!ne&&ef(c),Re=!A&&!ne&&!xe&&Mh(c),it=A||ne||xe||Re,gt=it?po(c.length,as):[],Mt=gt.length;for(var ln in c)(g||Yr.call(c,ln))&&!(it&&(ln=="length"||xe&&(ln=="offset"||ln=="parent")||Re&&(ln=="buffer"||ln=="byteLength"||ln=="byteOffset")||Mc(ln,Mt)))&&gt.push(ln);return gt}function Rt(c){var g=c.length;return g?c[Of(0,g-1)]:t}function xt(c,g){return Jp(dl(c),tr(g,0,c.length))}function Kt(c){return Jp(dl(c))}function Ht(c,g,A){(A!==t&&!ku(c[g],A)||A===t&&!(g in c))&&Tn(c,g,A)}function dt(c,g,A){var ne=c[g];(!(Yr.call(c,g)&&ku(ne,A))||A===t&&!(g in c))&&Tn(c,g,A)}function yt(c,g){for(var A=c.length;A--;)if(ku(c[A][0],g))return A;return-1}function en(c,g,A,ne){return j(c,function(xe,Re,it){g(ne,xe,A(xe),it)}),ne}function pn(c,g){return c&&rc(g,Js(g),c)}function rn(c,g){return c&&rc(g,gl(g),c)}function Tn(c,g,A){g=="__proto__"&&Ea?Ea(c,g,{configurable:!0,enumerable:!0,value:A,writable:!0}):c[g]=A}function Pn(c,g){for(var A=-1,ne=g.length,xe=Nt(ne),Re=c==null;++A<ne;)xe[A]=Re?t:C0(c,g[A]);return xe}function tr(c,g,A){return c===c&&(A!==t&&(c=c<=A?c:A),g!==t&&(c=c>=g?c:g)),c}function l(c,g,A,ne,xe,Re){var it,gt=g&_,Mt=g&b,ln=g&y;if(A&&(it=xe?A(c,ne,xe,Re):A(c)),it!==t)return it;if(!Ko(c))return c;var un=Xr(c);if(un){if(it=d3(c),!gt)return dl(c,it)}else{var yn=Ma(c),Un=yn==Ge||yn==ce;if(ef(c))return Ly(c,gt);if(yn==We||yn==ue||Un&&!xe){if(it=Mt||Un?{}:Uy(c),!gt)return Mt?n3(c,rn(it,c)):t3(c,pn(it,c))}else{if(!Hr[yn])return xe?c:{};it=p3(c,yn,gt)}}Re||(Re=new Ee);var ur=Re.get(c);if(ur)return ur;Re.set(c,it),v2(c)?c.forEach(function(Ar){it.add(l(Ar,g,A,Ar,c,Re))}):g2(c)&&c.forEach(function(Ar,Li){it.set(Li,l(Ar,g,A,Li,c,Re))});var Mr=ln?Mt?h0:f0:Mt?gl:Js,ui=un?t:Mr(c);return ko(ui||c,function(Ar,Li){ui&&(Li=Ar,Ar=c[Li]),dt(it,Li,l(Ar,g,A,Li,c,Re))}),it}function h(c){var g=Js(c);return function(A){return v(A,c,g)}}function v(c,g,A){var ne=A.length;if(c==null)return!ne;for(c=wi(c);ne--;){var xe=A[ne],Re=g[xe],it=c[xe];if(it===t&&!(xe in c)||!Re(it))return!1}return!0}function x(c,g,A){if(typeof c!="function")throw new Ki(o);return Sd(function(){c.apply(t,A)},g)}function C(c,g,A,ne){var xe=-1,Re=ll,it=!0,gt=c.length,Mt=[],ln=g.length;if(!gt)return Mt;A&&(g=_i(g,Ur(A))),ne?(Re=ul,it=!1):g.length>=i&&(Re=cl,it=!1,g=new W(g));e:for(;++xe<gt;){var un=c[xe],yn=A==null?un:A(un);if(un=ne||un!==0?un:0,it&&yn===yn){for(var Un=ln;Un--;)if(g[Un]===yn)continue e;Mt.push(un)}else Re(g,yn,ne)||Mt.push(un)}return Mt}var j=My(Xt),X=My(_n,!0);function re(c,g){var A=!0;return j(c,function(ne,xe,Re){return A=!!g(ne,xe,Re),A}),A}function ge(c,g,A){for(var ne=-1,xe=c.length;++ne<xe;){var Re=c[ne],it=g(Re);if(it!=null&&(gt===t?it===it&&!jl(it):A(it,gt)))var gt=it,Mt=Re}return Mt}function Le(c,g,A,ne){var xe=c.length;for(A=li(A),A<0&&(A=-A>xe?0:xe+A),ne=ne===t||ne>xe?xe:li(ne),ne<0&&(ne+=xe),ne=A>ne?0:_2(ne);A<ne;)c[A++]=g;return c}function Xe(c,g){var A=[];return j(c,function(ne,xe,Re){g(ne,xe,Re)&&A.push(ne)}),A}function Ue(c,g,A,ne,xe){var Re=-1,it=c.length;for(A||(A=m3),xe||(xe=[]);++Re<it;){var gt=c[Re];g>0&&A(gt)?g>1?Ue(gt,g-1,A,ne,xe):ks(xe,gt):ne||(xe[xe.length]=gt)}return xe}var vt=Ay(),Dt=Ay(!0);function Xt(c,g){return c&&vt(c,g,Js)}function _n(c,g){return c&&Dt(c,g,Js)}function Sn(c,g){return qs(g,function(A){return Ac(c[A])})}function hr(c,g){g=Au(g,c);for(var A=0,ne=g.length;c!=null&&A<ne;)c=c[ic(g[A++])];return A&&A==ne?c:t}function Je(c,g,A){var ne=g(c);return Xr(c)?ne:ks(ne,A(c))}function nt(c){return c==null?c===t?Pt:de:Sa&&Sa in wi(c)?c3(c):L3(c)}function ct(c,g){return c>g}function jt(c,g){return c!=null&&Yr.call(c,g)}function bt(c,g){return c!=null&&g in wi(c)}function Ot(c,g,A){return c>=Se(g,A)&&c<ae(g,A)}function me(c,g,A){for(var ne=A?ul:ll,xe=c[0].length,Re=c.length,it=Re,gt=Nt(Re),Mt=1/0,ln=[];it--;){var un=c[it];it&&g&&(un=_i(un,Ur(g))),Mt=Se(un.length,Mt),gt[it]=!A&&(g||xe>=120&&un.length>=120)?new W(it&&un):t}un=c[0];var yn=-1,Un=gt[0];e:for(;++yn<xe&&ln.length<Mt;){var ur=un[yn],Mr=g?g(ur):ur;if(ur=A||ur!==0?ur:0,!(Un?cl(Un,Mr):ne(ln,Mr,A))){for(it=Re;--it;){var ui=gt[it];if(!(ui?cl(ui,Mr):ne(c[it],Mr,A)))continue e}Un&&Un.push(Mr),ln.push(ur)}}return ln}function Pe(c,g,A,ne){return Xt(c,function(xe,Re,it){g(ne,A(xe),Re,it)}),ne}function Be(c,g,A){g=Au(g,c),c=qy(c,g);var ne=c==null?c:c[ic(su(g))];return ne==null?t:yi(ne,c,A)}function Oe(c){return us(c)&&nt(c)==ue}function je(c){return us(c)&&nt(c)==on}function $e(c){return us(c)&&nt(c)==D}function at(c,g,A,ne,xe){return c===g?!0:c==null||g==null||!us(c)&&!us(g)?c!==c&&g!==g:lt(c,g,A,ne,at,xe)}function lt(c,g,A,ne,xe,Re){var it=Xr(c),gt=Xr(g),Mt=it?se:Ma(c),ln=gt?se:Ma(g);Mt=Mt==ue?We:Mt,ln=ln==ue?We:ln;var un=Mt==We,yn=ln==We,Un=Mt==ln;if(Un&&ef(c)){if(!ef(g))return!1;it=!0,un=!1}if(Un&&!un)return Re||(Re=new Ee),it||Mh(c)?jy(c,g,A,ne,xe,Re):l3(c,g,Mt,A,ne,xe,Re);if(!(A&M)){var ur=un&&Yr.call(c,"__wrapped__"),Mr=yn&&Yr.call(g,"__wrapped__");if(ur||Mr){var ui=ur?c.value():c,Ar=Mr?g.value():g;return Re||(Re=new Ee),xe(ui,Ar,A,ne,Re)}}return Un?(Re||(Re=new Ee),u3(c,g,A,ne,xe,Re)):!1}function pt(c){return us(c)&&Ma(c)==te}function Et(c,g,A,ne){var xe=A.length,Re=xe,it=!ne;if(c==null)return!Re;for(c=wi(c);xe--;){var gt=A[xe];if(it&&gt[2]?gt[1]!==c[gt[0]]:!(gt[0]in c))return!1}for(;++xe<Re;){gt=A[xe];var Mt=gt[0],ln=c[Mt],un=gt[1];if(it&&gt[2]){if(ln===t&&!(Mt in c))return!1}else{var yn=new Ee;if(ne)var Un=ne(ln,un,Mt,c,g,yn);if(!(Un===t?at(un,ln,M|k,ne,yn):Un))return!1}}return!0}function Ct(c){if(!Ko(c)||y3(c))return!1;var g=Ac(c)?Ui:Ai;return g.test(jf(c))}function sn(c){return us(c)&&nt(c)==Ze}function zn(c){return us(c)&&Ma(c)==et}function Wn(c){return us(c)&&rg(c.length)&&!!Er[nt(c)]}function nr(c){return typeof c=="function"?c:c==null?ml:typeof c=="object"?Xr(c)?Eu(c[0],c[1]):ws(c):k2(c)}function mi(c){if(!Ld(c))return V(c);var g=[];for(var A in wi(c))Yr.call(c,A)&&A!="constructor"&&g.push(A);return g}function Ni(c){if(!Ko(c))return x3(c);var g=Ld(c),A=[];for(var ne in c)ne=="constructor"&&(g||!Yr.call(c,ne))||A.push(ne);return A}function Jr(c,g){return c<g}function Vi(c,g){var A=-1,ne=pl(c)?Nt(c.length):[];return j(c,function(xe,Re,it){ne[++A]=g(xe,Re,it)}),ne}function ws(c){var g=p0(c);return g.length==1&&g[0][2]?Gy(g[0][0],g[0][1]):function(A){return A===c||Et(A,c,g)}}function Eu(c,g){return m0(c)&&Vy(g)?Gy(ic(c),g):function(A){var ne=C0(A,c);return ne===t&&ne===g?P0(A,c):at(g,ne,M|k)}}function ha(c,g,A,ne,xe){c!==g&&vt(g,function(Re,it){if(xe||(xe=new Ee),Ko(Re))Df(c,g,it,A,ha,ne,xe);else{var gt=ne?ne(y0(c,it),Re,it+"",c,g,xe):t;gt===t&&(gt=Re),Ht(c,it,gt)}},gl)}function Df(c,g,A,ne,xe,Re,it){var gt=y0(c,A),Mt=y0(g,A),ln=it.get(Mt);if(ln){Ht(c,A,ln);return}var un=Re?Re(gt,Mt,A+"",c,g,it):t,yn=un===t;if(yn){var Un=Xr(Mt),ur=!Un&&ef(Mt),Mr=!Un&&!ur&&Mh(Mt);un=Mt,Un||ur||Mr?Xr(gt)?un=gt:xs(gt)?un=dl(gt):ur?(yn=!1,un=Ly(Mt,!0)):Mr?(yn=!1,un=Sy(Mt,!0)):un=[]:Ed(Mt)||$f(Mt)?(un=gt,$f(gt)?un=b2(gt):(!Ko(gt)||Ac(gt))&&(un=Uy(Mt))):yn=!1}yn&&(it.set(Mt,un),xe(un,Mt,ne,Re,it),it.delete(Mt)),Ht(c,A,un)}function Wa(c,g){var A=c.length;if(A)return g+=g<0?A:0,Mc(g,A)?c[g]:t}function tc(c,g,A){g.length?g=_i(g,function(Re){return Xr(Re)?function(it){return hr(it,Re.length===1?Re[0]:Re)}:Re}):g=[ml];var ne=-1;g=_i(g,Ur(Cr()));var xe=Vi(c,function(Re,it,gt){var Mt=_i(g,function(ln){return ln(Re)});return{criteria:Mt,index:++ne,value:Re}});return di(xe,function(Re,it){return e3(Re,it,A)})}function da(c,g){return Zo(c,g,function(A,ne){return P0(c,ne)})}function Zo(c,g,A){for(var ne=-1,xe=g.length,Re={};++ne<xe;){var it=g[ne],gt=hr(c,it);A(gt,it)&&Lc(Re,Au(it,c),gt)}return Re}function mo(c){return function(g){return hr(g,c)}}function bh(c,g,A,ne){var xe=ne?In:hn,Re=-1,it=g.length,gt=c;for(c===g&&(g=dl(g)),A&&(gt=_i(c,Ur(A)));++Re<it;)for(var Mt=0,ln=g[Re],un=A?A(ln):ln;(Mt=xe(gt,un,Mt,ne))>-1;)gt!==c&&qo.call(gt,Mt,1),qo.call(c,Mt,1);return c}function If(c,g){for(var A=c?g.length:0,ne=A-1;A--;){var xe=g[A];if(A==ne||xe!==Re){var Re=xe;Mc(xe)?qo.call(c,xe,1):Sc(c,xe)}}return c}function Of(c,g){return c+Io(Gt()*(g-c+1))}function Bf(c,g,A,ne){for(var xe=-1,Re=ae(Do((g-c)/(A||1)),0),it=Nt(Re);Re--;)it[ne?Re:++xe]=c,c+=A;return it}function wh(c,g){var A="";if(!c||g<1||g>ie)return A;do g%2&&(A+=c),g=Io(g/2),g&&(c+=c);while(g);return A}function ai(c,g){return _0(Hy(c,g,ml),c+"")}function xh(c){return Rt(Ah(c))}function jp(c,g){var A=Ah(c);return Jp(A,tr(g,0,A.length))}function Lc(c,g,A,ne){if(!Ko(c))return c;g=Au(g,c);for(var xe=-1,Re=g.length,it=Re-1,gt=c;gt!=null&&++xe<Re;){var Mt=ic(g[xe]),ln=A;if(Mt==="__proto__"||Mt==="constructor"||Mt==="prototype")return c;if(xe!=it){var un=gt[Mt];ln=ne?ne(un,Mt,gt):t,ln===t&&(ln=Ko(un)?un:Mc(g[xe+1])?[]:{})}dt(gt,Mt,ln),gt=gt[Mt]}return c}var Cu=Yi?function(c,g){return Yi.set(c,g),c}:ml,$p=Ea?function(c,g){return Ea(c,"toString",{configurable:!0,enumerable:!1,value:A0(g),writable:!0})}:ml;function zp(c){return Jp(Ah(c))}function hl(c,g,A){var ne=-1,xe=c.length;g<0&&(g=-g>xe?0:xe+g),A=A>xe?xe:A,A<0&&(A+=xe),xe=g>A?0:A-g>>>0,g>>>=0;for(var Re=Nt(xe);++ne<xe;)Re[ne]=c[ne+g];return Re}function Up(c,g){var A;return j(c,function(ne,xe,Re){return A=g(ne,xe,Re),!A}),!!A}function Pu(c,g,A){var ne=0,xe=c==null?ne:c.length;if(typeof g=="number"&&g===g&&xe<=H){for(;ne<xe;){var Re=ne+xe>>>1,it=c[Re];it!==null&&!jl(it)&&(A?it<=g:it<g)?ne=Re+1:xe=Re}return xe}return bd(c,g,ml,A)}function bd(c,g,A,ne){var xe=0,Re=c==null?0:c.length;if(Re===0)return 0;g=A(g);for(var it=g!==g,gt=g===null,Mt=jl(g),ln=g===t;xe<Re;){var un=Io((xe+Re)/2),yn=A(c[un]),Un=yn!==t,ur=yn===null,Mr=yn===yn,ui=jl(yn);if(it)var Ar=ne||Mr;else ln?Ar=Mr&&(ne||Un):gt?Ar=Mr&&Un&&(ne||!ur):Mt?Ar=Mr&&Un&&!ur&&(ne||!ui):ur||ui?Ar=!1:Ar=ne?yn<=g:yn<g;Ar?xe=un+1:Re=un}return Se(Re,J)}function wd(c,g){for(var A=-1,ne=c.length,xe=0,Re=[];++A<ne;){var it=c[A],gt=g?g(it):it;if(!A||!ku(gt,Mt)){var Mt=gt;Re[xe++]=it===0?0:it}}return Re}function Vp(c){return typeof c=="number"?c:jl(c)?Ce:+c}function Pa(c){if(typeof c=="string")return c;if(Xr(c))return _i(c,Pa)+"";if(jl(c))return Wo?Wo.call(c):"";var g=c+"";return g=="0"&&1/c==-1/0?"-0":g}function nc(c,g,A){var ne=-1,xe=ll,Re=c.length,it=!0,gt=[],Mt=gt;if(A)it=!1,xe=ul;else if(Re>=i){var ln=g?null:s3(c);if(ln)return ss(ln);it=!1,xe=cl,Mt=new W}else Mt=g?[]:gt;e:for(;++ne<Re;){var un=c[ne],yn=g?g(un):un;if(un=A||un!==0?un:0,it&&yn===yn){for(var Un=Mt.length;Un--;)if(Mt[Un]===yn)continue e;g&&Mt.push(yn),gt.push(un)}else xe(Mt,yn,A)||(Mt!==gt&&Mt.push(yn),gt.push(un))}return gt}function Sc(c,g){return g=Au(g,c),c=qy(c,g),c==null||delete c[ic(su(g))]}function Lh(c,g,A,ne){return Lc(c,g,A(hr(c,g)),ne)}function Ec(c,g,A,ne){for(var xe=c.length,Re=ne?xe:-1;(ne?Re--:++Re<xe)&&g(c[Re],Re,c););return A?hl(c,ne?0:Re,ne?Re+1:xe):hl(c,ne?Re+1:0,ne?xe:Re)}function ru(c,g){var A=c;return A instanceof Vr&&(A=A.value()),_a(g,function(ne,xe){return xe.func.apply(xe.thisArg,ks([ne],xe.args))},A)}function iu(c,g,A){var ne=c.length;if(ne<2)return ne?nc(c[0]):[];for(var xe=-1,Re=Nt(ne);++xe<ne;)for(var it=c[xe],gt=-1;++gt<ne;)gt!=xe&&(Re[xe]=C(Re[xe]||it,c[gt],g,A));return nc(Ue(Re,1),g,A)}function Mu(c,g,A){for(var ne=-1,xe=c.length,Re=g.length,it={};++ne<xe;){var gt=ne<Re?g[ne]:t;A(it,c[ne],gt)}return it}function Qc(c){return xs(c)?c:[]}function Rf(c){return typeof c=="function"?c:ml}function Au(c,g){return Xr(c)?c:m0(c,g)?[c]:Yy(no(c))}var a0=ai;function ou(c,g,A){var ne=c.length;return A=A===t?ne:A,!g&&A>=ne?c:hl(c,g,A)}var Sh=Zs||function(c){return co.clearTimeout(c)};function Ly(c,g){if(g)return c.slice();var A=c.length,ne=Lu?Lu(A):new c.constructor(A);return c.copy(ne),ne}function l0(c){var g=new c.constructor(c.byteLength);return new js(g).set(new js(c)),g}function Jx(c,g){var A=g?l0(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.byteLength)}function Xx(c){var g=new c.constructor(c.source,Sr.exec(c));return g.lastIndex=c.lastIndex,g}function Qx(c){return gi?wi(gi.call(c)):{}}function Sy(c,g){var A=g?l0(c.buffer):c.buffer;return new c.constructor(A,c.byteOffset,c.length)}function Ey(c,g){if(c!==g){var A=c!==t,ne=c===null,xe=c===c,Re=jl(c),it=g!==t,gt=g===null,Mt=g===g,ln=jl(g);if(!gt&&!ln&&!Re&&c>g||Re&&it&&Mt&&!gt&&!ln||ne&&it&&Mt||!A&&Mt||!xe)return 1;if(!ne&&!Re&&!ln&&c<g||ln&&A&&xe&&!ne&&!Re||gt&&A&&xe||!it&&xe||!Mt)return-1}return 0}function e3(c,g,A){for(var ne=-1,xe=c.criteria,Re=g.criteria,it=xe.length,gt=A.length;++ne<it;){var Mt=Ey(xe[ne],Re[ne]);if(Mt){if(ne>=gt)return Mt;var ln=A[ne];return Mt*(ln=="desc"?-1:1)}}return c.index-g.index}function Cy(c,g,A,ne){for(var xe=-1,Re=c.length,it=A.length,gt=-1,Mt=g.length,ln=ae(Re-it,0),un=Nt(Mt+ln),yn=!ne;++gt<Mt;)un[gt]=g[gt];for(;++xe<it;)(yn||xe<Re)&&(un[A[xe]]=c[xe]);for(;ln--;)un[gt++]=c[xe++];return un}function Py(c,g,A,ne){for(var xe=-1,Re=c.length,it=-1,gt=A.length,Mt=-1,ln=g.length,un=ae(Re-gt,0),yn=Nt(un+ln),Un=!ne;++xe<un;)yn[xe]=c[xe];for(var ur=xe;++Mt<ln;)yn[ur+Mt]=g[Mt];for(;++it<gt;)(Un||xe<Re)&&(yn[ur+A[it]]=c[xe++]);return yn}function dl(c,g){var A=-1,ne=c.length;for(g||(g=Nt(ne));++A<ne;)g[A]=c[A];return g}function rc(c,g,A,ne){var xe=!A;A||(A={});for(var Re=-1,it=g.length;++Re<it;){var gt=g[Re],Mt=ne?ne(A[gt],c[gt],gt,A,c):t;Mt===t&&(Mt=c[gt]),xe?Tn(A,gt,Mt):dt(A,gt,Mt)}return A}function t3(c,g){return rc(c,g0(c),g)}function n3(c,g){return rc(c,$y(c),g)}function Gp(c,g){return function(A,ne){var xe=Xr(A)?Xu:en,Re=g?g():{};return xe(A,c,Cr(ne,2),Re)}}function Eh(c){return ai(function(g,A){var ne=-1,xe=A.length,Re=xe>1?A[xe-1]:t,it=xe>2?A[2]:t;for(Re=c.length>3&&typeof Re=="function"?(xe--,Re):t,it&&Za(A[0],A[1],it)&&(Re=xe<3?t:Re,xe=1),g=wi(g);++ne<xe;){var gt=A[ne];gt&&c(g,gt,ne,Re)}return g})}function My(c,g){return function(A,ne){if(A==null)return A;if(!pl(A))return c(A,ne);for(var xe=A.length,Re=g?xe:-1,it=wi(A);(g?Re--:++Re<xe)&&ne(it[Re],Re,it)!==!1;);return A}}function Ay(c){return function(g,A,ne){for(var xe=-1,Re=wi(g),it=ne(g),gt=it.length;gt--;){var Mt=it[c?gt:++xe];if(A(Re[Mt],Mt,Re)===!1)break}return g}}function r3(c,g,A){var ne=g&F,xe=xd(c);function Re(){var it=this&&this!==co&&this instanceof Re?xe:c;return it.apply(ne?A:this,arguments)}return Re}function ky(c){return function(g){g=no(g);var A=ia(g)?Vo(g):t,ne=A?A[0]:g.charAt(0),xe=A?ou(A,1).join(""):g.slice(1);return ne[c]()+xe}}function Ch(c){return function(g){return _a(M2(P2(g).replace($r,"")),c,"")}}function xd(c){return function(){var g=arguments;switch(g.length){case 0:return new c;case 1:return new c(g[0]);case 2:return new c(g[0],g[1]);case 3:return new c(g[0],g[1],g[2]);case 4:return new c(g[0],g[1],g[2],g[3]);case 5:return new c(g[0],g[1],g[2],g[3],g[4]);case 6:return new c(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new c(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var A=bs(c.prototype),ne=c.apply(A,g);return Ko(ne)?ne:A}}function i3(c,g,A){var ne=xd(c);function xe(){for(var Re=arguments.length,it=Nt(Re),gt=Re,Mt=Ph(xe);gt--;)it[gt]=arguments[gt];var ln=Re<3&&it[0]!==Mt&&it[Re-1]!==Mt?[]:os(it,Mt);if(Re-=ln.length,Re<A)return Oy(c,g,Hp,xe.placeholder,t,it,ln,t,t,A-Re);var un=this&&this!==co&&this instanceof xe?ne:c;return yi(un,this,it)}return xe}function Ty(c){return function(g,A,ne){var xe=wi(g);if(!pl(g)){var Re=Cr(A,3);g=Js(g),A=function(gt){return Re(xe[gt],gt,xe)}}var it=c(g,A,ne);return it>-1?xe[Re?g[it]:it]:t}}function Ny(c){return Pc(function(g){var A=g.length,ne=A,xe=Bo.prototype.thru;for(c&&g.reverse();ne--;){var Re=g[ne];if(typeof Re!="function")throw new Ki(o);if(xe&&!it&&Kp(Re)=="wrapper")var it=new Bo([],!0)}for(ne=it?ne:A;++ne<A;){Re=g[ne];var gt=Kp(Re),Mt=gt=="wrapper"?d0(Re):t;Mt&&v0(Mt[0])&&Mt[1]==(ve|Y|he|$)&&!Mt[4].length&&Mt[9]==1?it=it[Kp(Mt[0])].apply(it,Mt[3]):it=Re.length==1&&v0(Re)?it[gt]():it.thru(Re)}return function(){var ln=arguments,un=ln[0];if(it&&ln.length==1&&Xr(un))return it.plant(un).value();for(var yn=0,Un=A?g[yn].apply(this,ln):un;++yn<A;)Un=g[yn].call(this,Un);return Un}})}function Hp(c,g,A,ne,xe,Re,it,gt,Mt,ln){var un=g&ve,yn=g&F,Un=g&I,ur=g&(Y|ee),Mr=g&U,ui=Un?t:xd(c);function Ar(){for(var Li=arguments.length,Di=Nt(Li),$l=Li;$l--;)Di[$l]=arguments[$l];if(ur)var Ka=Ph(Ar),zl=ra(Di,Ka);if(ne&&(Di=Cy(Di,ne,xe,ur)),Re&&(Di=Py(Di,Re,it,ur)),Li-=zl,ur&&Li<ln){var Ls=os(Di,Ka);return Oy(c,g,Hp,Ar.placeholder,A,Di,Ls,gt,Mt,ln-Li)}var Tu=yn?A:this,Tc=Un?Tu[c]:c;return Li=Di.length,gt?Di=S3(Di,gt):Mr&&Li>1&&Di.reverse(),un&&Mt<Li&&(Di.length=Mt),this&&this!==co&&this instanceof Ar&&(Tc=ui||xd(Tc)),Tc.apply(Tu,Di)}return Ar}function Dy(c,g){return function(A,ne){return Pe(A,c,g(ne),{})}}function qp(c,g){return function(A,ne){var xe;if(A===t&&ne===t)return g;if(A!==t&&(xe=A),ne!==t){if(xe===t)return ne;typeof A=="string"||typeof ne=="string"?(A=Pa(A),ne=Pa(ne)):(A=Vp(A),ne=Vp(ne)),xe=c(A,ne)}return xe}}function u0(c){return Pc(function(g){return g=_i(g,Ur(Cr())),ai(function(A){var ne=this;return c(g,function(xe){return yi(xe,ne,A)})})})}function Wp(c,g){g=g===t?" ":Pa(g);var A=g.length;if(A<2)return A?wh(g,c):g;var ne=wh(g,Do(c/Uo(g)));return ia(g)?ou(Vo(ne),0,c).join(""):ne.slice(0,c)}function o3(c,g,A,ne){var xe=g&F,Re=xd(c);function it(){for(var gt=-1,Mt=arguments.length,ln=-1,un=ne.length,yn=Nt(un+Mt),Un=this&&this!==co&&this instanceof it?Re:c;++ln<un;)yn[ln]=ne[ln];for(;Mt--;)yn[ln++]=arguments[++gt];return yi(Un,xe?A:this,yn)}return it}function Iy(c){return function(g,A,ne){return ne&&typeof ne!="number"&&Za(g,A,ne)&&(A=ne=t),g=kc(g),A===t?(A=g,g=0):A=kc(A),ne=ne===t?g<A?1:-1:kc(ne),Bf(g,A,ne,c)}}function Zp(c){return function(g,A){return typeof g=="string"&&typeof A=="string"||(g=au(g),A=au(A)),c(g,A)}}function Oy(c,g,A,ne,xe,Re,it,gt,Mt,ln){var un=g&Y,yn=un?it:t,Un=un?t:it,ur=un?Re:t,Mr=un?t:Re;g|=un?he:fe,g&=~(un?fe:he),g&R||(g&=-4);var ui=[c,g,xe,ur,yn,Mr,Un,gt,Mt,ln],Ar=A.apply(t,ui);return v0(c)&&Wy(Ar,ui),Ar.placeholder=ne,Zy(Ar,c,g)}function c0(c){var g=Zi[c];return function(A,ne){if(A=au(A),ne=ne==null?0:Se(li(ne),292),ne&&p(A)){var xe=(no(A)+"e").split("e"),Re=g(xe[0]+"e"+(+xe[1]+ne));return xe=(no(Re)+"e").split("e"),+(xe[0]+"e"+(+xe[1]-ne))}return g(A)}}var s3=Lo&&1/ss(new Lo([,-0]))[1]==oe?function(c){return new Lo(c)}:N0;function By(c){return function(g){var A=Ma(g);return A==te?fl(g):A==et?Qu(g):bo(g,c(g))}}function Cc(c,g,A,ne,xe,Re,it,gt){var Mt=g&I;if(!Mt&&typeof c!="function")throw new Ki(o);var ln=ne?ne.length:0;if(ln||(g&=-97,ne=xe=t),it=it===t?it:ae(li(it),0),gt=gt===t?gt:li(gt),ln-=xe?xe.length:0,g&fe){var un=ne,yn=xe;ne=xe=t}var Un=Mt?t:d0(c),ur=[c,g,A,ne,xe,un,yn,Re,it,gt];if(Un&&w3(ur,Un),c=ur[0],g=ur[1],A=ur[2],ne=ur[3],xe=ur[4],gt=ur[9]=ur[9]===t?Mt?0:c.length:ae(ur[9]-ln,0),!gt&&g&(Y|ee)&&(g&=-25),!g||g==F)var Mr=r3(c,g,A);else g==Y||g==ee?Mr=i3(c,g,gt):(g==he||g==(F|he))&&!xe.length?Mr=o3(c,g,A,ne):Mr=Hp.apply(t,ur);var ui=Un?Cu:Wy;return Zy(ui(Mr,ur),c,g)}function Ry(c,g,A,ne){return c===t||ku(c,aa[A])&&!Yr.call(ne,A)?g:c}function Fy(c,g,A,ne,xe,Re){return Ko(c)&&Ko(g)&&(Re.set(g,c),ha(c,g,t,Fy,Re),Re.delete(g)),c}function a3(c){return Ed(c)?t:c}function jy(c,g,A,ne,xe,Re){var it=A&M,gt=c.length,Mt=g.length;if(gt!=Mt&&!(it&&Mt>gt))return!1;var ln=Re.get(c),un=Re.get(g);if(ln&&un)return ln==g&&un==c;var yn=-1,Un=!0,ur=A&k?new W:t;for(Re.set(c,g),Re.set(g,c);++yn<gt;){var Mr=c[yn],ui=g[yn];if(ne)var Ar=it?ne(ui,Mr,yn,g,c,Re):ne(Mr,ui,yn,c,g,Re);if(Ar!==t){if(Ar)continue;Un=!1;break}if(ur){if(!B(g,function(Li,Di){if(!cl(ur,Di)&&(Mr===Li||xe(Mr,Li,A,ne,Re)))return ur.push(Di)})){Un=!1;break}}else if(!(Mr===ui||xe(Mr,ui,A,ne,Re))){Un=!1;break}}return Re.delete(c),Re.delete(g),Un}function l3(c,g,A,ne,xe,Re,it){switch(A){case cn:if(c.byteLength!=g.byteLength||c.byteOffset!=g.byteOffset)return!1;c=c.buffer,g=g.buffer;case on:return!(c.byteLength!=g.byteLength||!Re(new js(c),new js(g)));case K:case D:case ye:return ku(+c,+g);case Me:return c.name==g.name&&c.message==g.message;case Ze:case ze:return c==g+"";case te:var gt=fl;case et:var Mt=ne&M;if(gt||(gt=ss),c.size!=g.size&&!Mt)return!1;var ln=it.get(c);if(ln)return ln==g;ne|=k,it.set(c,g);var un=jy(gt(c),gt(g),ne,xe,Re,it);return it.delete(c),un;case wt:if(gi)return gi.call(c)==gi.call(g)}return!1}function u3(c,g,A,ne,xe,Re){var it=A&M,gt=f0(c),Mt=gt.length,ln=f0(g),un=ln.length;if(Mt!=un&&!it)return!1;for(var yn=Mt;yn--;){var Un=gt[yn];if(!(it?Un in g:Yr.call(g,Un)))return!1}var ur=Re.get(c),Mr=Re.get(g);if(ur&&Mr)return ur==g&&Mr==c;var ui=!0;Re.set(c,g),Re.set(g,c);for(var Ar=it;++yn<Mt;){Un=gt[yn];var Li=c[Un],Di=g[Un];if(ne)var $l=it?ne(Di,Li,Un,g,c,Re):ne(Li,Di,Un,c,g,Re);if(!($l===t?Li===Di||xe(Li,Di,A,ne,Re):$l)){ui=!1;break}Ar||(Ar=Un=="constructor")}if(ui&&!Ar){var Ka=c.constructor,zl=g.constructor;Ka!=zl&&"constructor"in c&&"constructor"in g&&!(typeof Ka=="function"&&Ka instanceof Ka&&typeof zl=="function"&&zl instanceof zl)&&(ui=!1)}return Re.delete(c),Re.delete(g),ui}function Pc(c){return _0(Hy(c,t,e2),c+"")}function f0(c){return Je(c,Js,g0)}function h0(c){return Je(c,gl,$y)}var d0=Yi?function(c){return Yi.get(c)}:N0;function Kp(c){for(var g=c.name+"",A=_s[g],ne=Yr.call(_s,g)?A.length:0;ne--;){var xe=A[ne],Re=xe.func;if(Re==null||Re==c)return xe.name}return g}function Ph(c){var g=Yr.call(De,"placeholder")?De:c;return g.placeholder}function Cr(){var c=De.iteratee||k0;return c=c===k0?nr:c,arguments.length?c(arguments[0],arguments[1]):c}function Yp(c,g){var A=c.__data__;return v3(g)?A[typeof g=="string"?"string":"hash"]:A.map}function p0(c){for(var g=Js(c),A=g.length;A--;){var ne=g[A],xe=c[ne];g[A]=[ne,xe,Vy(xe)]}return g}function Ff(c,g){var A=wo(c,g);return Ct(A)?A:t}function c3(c){var g=Yr.call(c,Sa),A=c[Sa];try{c[Sa]=t;var ne=!0}catch{}var xe=xi.call(c);return ne&&(g?c[Sa]=A:delete c[Sa]),xe}var g0=Ks?function(c){return c==null?[]:(c=wi(c),qs(Ks(c),function(g){return $i.call(c,g)}))}:D0,$y=Ks?function(c){for(var g=[];c;)ks(g,g0(c)),c=ca(c);return g}:D0,Ma=nt;(On&&Ma(new On(new ArrayBuffer(1)))!=cn||er&&Ma(new er)!=te||Fr&&Ma(Fr.resolve())!=He||Lo&&Ma(new Lo)!=et||io&&Ma(new io)!=kt)&&(Ma=function(c){var g=nt(c),A=g==We?c.constructor:t,ne=A?jf(A):"";if(ne)switch(ne){case wc:return cn;case fa:return te;case Ys:return He;case $s:return et;case Tf:return kt}return g});function f3(c,g,A){for(var ne=-1,xe=A.length;++ne<xe;){var Re=A[ne],it=Re.size;switch(Re.type){case"drop":c+=it;break;case"dropRight":g-=it;break;case"take":g=Se(g,c+it);break;case"takeRight":c=ae(c,g-it);break}}return{start:c,end:g}}function h3(c){var g=c.match(wn);return g?g[1].split(ei):[]}function zy(c,g,A){g=Au(g,c);for(var ne=-1,xe=g.length,Re=!1;++ne<xe;){var it=ic(g[ne]);if(!(Re=c!=null&&A(c,it)))break;c=c[it]}return Re||++ne!=xe?Re:(xe=c==null?0:c.length,!!xe&&rg(xe)&&Mc(it,xe)&&(Xr(c)||$f(c)))}function d3(c){var g=c.length,A=new c.constructor(g);return g&&typeof c[0]=="string"&&Yr.call(c,"index")&&(A.index=c.index,A.input=c.input),A}function Uy(c){return typeof c.constructor=="function"&&!Ld(c)?bs(ca(c)):{}}function p3(c,g,A){var ne=c.constructor;switch(g){case on:return l0(c);case K:case D:return new ne(+c);case cn:return Jx(c,A);case Ke:case ot:case rt:case $t:case Qt:case Rn:case Ln:case Dn:case ar:return Sy(c,A);case te:return new ne;case ye:case ze:return new ne(c);case Ze:return Xx(c);case et:return new ne;case wt:return Qx(c)}}function g3(c,g){var A=g.length;if(!A)return c;var ne=A-1;return g[ne]=(A>1?"& ":"")+g[ne],g=g.join(A>2?", ":" "),c.replace(mt,`{
/* [wrapped with `+g+`] */
`)}function m3(c){return Xr(c)||$f(c)||!!(ys&&c&&c[ys])}function Mc(c,g){var A=typeof c;return g=g??ie,!!g&&(A=="number"||A!="symbol"&&Gr.test(c))&&c>-1&&c%1==0&&c<g}function Za(c,g,A){if(!Ko(A))return!1;var ne=typeof g;return(ne=="number"?pl(A)&&Mc(g,A.length):ne=="string"&&g in A)?ku(A[g],c):!1}function m0(c,g){if(Xr(c))return!1;var A=typeof c;return A=="number"||A=="symbol"||A=="boolean"||c==null||jl(c)?!0:xn.test(c)||!Ut.test(c)||g!=null&&c in wi(g)}function v3(c){var g=typeof c;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?c!=="__proto__":c===null}function v0(c){var g=Kp(c),A=De[g];if(typeof A!="function"||!(g in Vr.prototype))return!1;if(c===A)return!0;var ne=d0(A);return!!ne&&c===ne[0]}function y3(c){return!!No&&No in c}var _3=la?Ac:I0;function Ld(c){var g=c&&c.constructor,A=typeof g=="function"&&g.prototype||aa;return c===A}function Vy(c){return c===c&&!Ko(c)}function Gy(c,g){return function(A){return A==null?!1:A[c]===g&&(g!==t||c in wi(A))}}function b3(c){var g=tg(c,function(ne){return A.size===d&&A.clear(),ne}),A=g.cache;return g}function w3(c,g){var A=c[1],ne=g[1],xe=A|ne,Re=xe<(F|I|ve),it=ne==ve&&A==Y||ne==ve&&A==$&&c[7].length<=g[8]||ne==(ve|$)&&g[7].length<=g[8]&&A==Y;if(!(Re||it))return c;ne&F&&(c[2]=g[2],xe|=A&F?0:R);var gt=g[3];if(gt){var Mt=c[3];c[3]=Mt?Cy(Mt,gt,g[4]):gt,c[4]=Mt?os(c[3],m):g[4]}return gt=g[5],gt&&(Mt=c[5],c[5]=Mt?Py(Mt,gt,g[6]):gt,c[6]=Mt?os(c[5],m):g[6]),gt=g[7],gt&&(c[7]=gt),ne&ve&&(c[8]=c[8]==null?g[8]:Se(c[8],g[8])),c[9]==null&&(c[9]=g[9]),c[0]=g[0],c[1]=xe,c}function x3(c){var g=[];if(c!=null)for(var A in wi(c))g.push(A);return g}function L3(c){return xi.call(c)}function Hy(c,g,A){return g=ae(g===t?c.length-1:g,0),function(){for(var ne=arguments,xe=-1,Re=ae(ne.length-g,0),it=Nt(Re);++xe<Re;)it[xe]=ne[g+xe];xe=-1;for(var gt=Nt(g+1);++xe<g;)gt[xe]=ne[xe];return gt[g]=A(it),yi(c,this,gt)}}function qy(c,g){return g.length<2?c:hr(c,hl(g,0,-1))}function S3(c,g){for(var A=c.length,ne=Se(g.length,A),xe=dl(c);ne--;){var Re=g[ne];c[ne]=Mc(Re,A)?xe[Re]:t}return c}function y0(c,g){if(!(g==="constructor"&&typeof c[g]=="function")&&g!="__proto__")return c[g]}var Wy=Ky(Cu),Sd=bc||function(c,g){return co.setTimeout(c,g)},_0=Ky($p);function Zy(c,g,A){var ne=g+"";return _0(c,g3(ne,E3(h3(ne),A)))}function Ky(c){var g=0,A=0;return function(){var ne=st(),xe=O-(ne-A);if(A=ne,xe>0){if(++g>=N)return arguments[0]}else g=0;return c.apply(t,arguments)}}function Jp(c,g){var A=-1,ne=c.length,xe=ne-1;for(g=g===t?ne:g;++A<g;){var Re=Of(A,xe),it=c[Re];c[Re]=c[A],c[A]=it}return c.length=g,c}var Yy=b3(function(c){var g=[];return c.charCodeAt(0)===46&&g.push(""),c.replace(vn,function(A,ne,xe,Re){g.push(xe?Re.replace(Qn,"$1"):ne||A)}),g});function ic(c){if(typeof c=="string"||jl(c))return c;var g=c+"";return g=="0"&&1/c==-1/0?"-0":g}function jf(c){if(c!=null){try{return ua.call(c)}catch{}try{return c+""}catch{}}return""}function E3(c,g){return ko(Q,function(A){var ne="_."+A[0];g&A[1]&&!ll(c,ne)&&c.push(ne)}),c.sort()}function Jy(c){if(c instanceof Vr)return c.clone();var g=new Bo(c.__wrapped__,c.__chain__);return g.__actions__=dl(c.__actions__),g.__index__=c.__index__,g.__values__=c.__values__,g}function C3(c,g,A){(A?Za(c,g,A):g===t)?g=1:g=ae(li(g),0);var ne=c==null?0:c.length;if(!ne||g<1)return[];for(var xe=0,Re=0,it=Nt(Do(ne/g));xe<ne;)it[Re++]=hl(c,xe,xe+=g);return it}function P3(c){for(var g=-1,A=c==null?0:c.length,ne=0,xe=[];++g<A;){var Re=c[g];Re&&(xe[ne++]=Re)}return xe}function M3(){var c=arguments.length;if(!c)return[];for(var g=Nt(c-1),A=arguments[0],ne=c;ne--;)g[ne-1]=arguments[ne];return ks(Xr(A)?dl(A):[A],Ue(g,1))}var A3=ai(function(c,g){return xs(c)?C(c,Ue(g,1,xs,!0)):[]}),k3=ai(function(c,g){var A=su(g);return xs(A)&&(A=t),xs(c)?C(c,Ue(g,1,xs,!0),Cr(A,2)):[]}),T3=ai(function(c,g){var A=su(g);return xs(A)&&(A=t),xs(c)?C(c,Ue(g,1,xs,!0),t,A):[]});function N3(c,g,A){var ne=c==null?0:c.length;return ne?(g=A||g===t?1:li(g),hl(c,g<0?0:g,ne)):[]}function D3(c,g,A){var ne=c==null?0:c.length;return ne?(g=A||g===t?1:li(g),g=ne-g,hl(c,0,g<0?0:g)):[]}function I3(c,g){return c&&c.length?Ec(c,Cr(g,3),!0,!0):[]}function O3(c,g){return c&&c.length?Ec(c,Cr(g,3),!0):[]}function B3(c,g,A,ne){var xe=c==null?0:c.length;return xe?(A&&typeof A!="number"&&Za(c,g,A)&&(A=0,ne=xe),Le(c,g,A,ne)):[]}function Xy(c,g,A){var ne=c==null?0:c.length;if(!ne)return-1;var xe=A==null?0:li(A);return xe<0&&(xe=ae(ne+xe,0)),Vt(c,Cr(g,3),xe)}function Qy(c,g,A){var ne=c==null?0:c.length;if(!ne)return-1;var xe=ne-1;return A!==t&&(xe=li(A),xe=A<0?ae(ne+xe,0):Se(xe,ne-1)),Vt(c,Cr(g,3),xe,!0)}function e2(c){var g=c==null?0:c.length;return g?Ue(c,1):[]}function R3(c){var g=c==null?0:c.length;return g?Ue(c,oe):[]}function F3(c,g){var A=c==null?0:c.length;return A?(g=g===t?1:li(g),Ue(c,g)):[]}function j3(c){for(var g=-1,A=c==null?0:c.length,ne={};++g<A;){var xe=c[g];ne[xe[0]]=xe[1]}return ne}function t2(c){return c&&c.length?c[0]:t}function $3(c,g,A){var ne=c==null?0:c.length;if(!ne)return-1;var xe=A==null?0:li(A);return xe<0&&(xe=ae(ne+xe,0)),hn(c,g,xe)}function z3(c){var g=c==null?0:c.length;return g?hl(c,0,-1):[]}var U3=ai(function(c){var g=_i(c,Qc);return g.length&&g[0]===c[0]?me(g):[]}),V3=ai(function(c){var g=su(c),A=_i(c,Qc);return g===su(A)?g=t:A.pop(),A.length&&A[0]===c[0]?me(A,Cr(g,2)):[]}),G3=ai(function(c){var g=su(c),A=_i(c,Qc);return g=typeof g=="function"?g:t,g&&A.pop(),A.length&&A[0]===c[0]?me(A,t,g):[]});function H3(c,g){return c==null?"":E.call(c,g)}function su(c){var g=c==null?0:c.length;return g?c[g-1]:t}function q3(c,g,A){var ne=c==null?0:c.length;if(!ne)return-1;var xe=ne;return A!==t&&(xe=li(A),xe=xe<0?ae(ne+xe,0):Se(xe,ne-1)),g===g?ba(c,g,xe):Vt(c,$n,xe,!0)}function W3(c,g){return c&&c.length?Wa(c,li(g)):t}var Z3=ai(n2);function n2(c,g){return c&&c.length&&g&&g.length?bh(c,g):c}function K3(c,g,A){return c&&c.length&&g&&g.length?bh(c,g,Cr(A,2)):c}function Y3(c,g,A){return c&&c.length&&g&&g.length?bh(c,g,t,A):c}var J3=Pc(function(c,g){var A=c==null?0:c.length,ne=Pn(c,g);return If(c,_i(g,function(xe){return Mc(xe,A)?+xe:xe}).sort(Ey)),ne});function X3(c,g){var A=[];if(!(c&&c.length))return A;var ne=-1,xe=[],Re=c.length;for(g=Cr(g,3);++ne<Re;){var it=c[ne];g(it,ne,c)&&(A.push(it),xe.push(ne))}return If(c,xe),A}function b0(c){return c==null?c:an.call(c)}function Q3(c,g,A){var ne=c==null?0:c.length;return ne?(A&&typeof A!="number"&&Za(c,g,A)?(g=0,A=ne):(g=g==null?0:li(g),A=A===t?ne:li(A)),hl(c,g,A)):[]}function eL(c,g){return Pu(c,g)}function tL(c,g,A){return bd(c,g,Cr(A,2))}function nL(c,g){var A=c==null?0:c.length;if(A){var ne=Pu(c,g);if(ne<A&&ku(c[ne],g))return ne}return-1}function rL(c,g){return Pu(c,g,!0)}function iL(c,g,A){return bd(c,g,Cr(A,2),!0)}function oL(c,g){var A=c==null?0:c.length;if(A){var ne=Pu(c,g,!0)-1;if(ku(c[ne],g))return ne}return-1}function sL(c){return c&&c.length?wd(c):[]}function aL(c,g){return c&&c.length?wd(c,Cr(g,2)):[]}function lL(c){var g=c==null?0:c.length;return g?hl(c,1,g):[]}function uL(c,g,A){return c&&c.length?(g=A||g===t?1:li(g),hl(c,0,g<0?0:g)):[]}function cL(c,g,A){var ne=c==null?0:c.length;return ne?(g=A||g===t?1:li(g),g=ne-g,hl(c,g<0?0:g,ne)):[]}function fL(c,g){return c&&c.length?Ec(c,Cr(g,3),!1,!0):[]}function hL(c,g){return c&&c.length?Ec(c,Cr(g,3)):[]}var dL=ai(function(c){return nc(Ue(c,1,xs,!0))}),pL=ai(function(c){var g=su(c);return xs(g)&&(g=t),nc(Ue(c,1,xs,!0),Cr(g,2))}),gL=ai(function(c){var g=su(c);return g=typeof g=="function"?g:t,nc(Ue(c,1,xs,!0),t,g)});function mL(c){return c&&c.length?nc(c):[]}function vL(c,g){return c&&c.length?nc(c,Cr(g,2)):[]}function yL(c,g){return g=typeof g=="function"?g:t,c&&c.length?nc(c,t,g):[]}function w0(c){if(!(c&&c.length))return[];var g=0;return c=qs(c,function(A){if(xs(A))return g=ae(A.length,g),!0}),po(g,function(A){return _i(c,_r(A))})}function r2(c,g){if(!(c&&c.length))return[];var A=w0(c);return g==null?A:_i(A,function(ne){return yi(g,t,ne)})}var _L=ai(function(c,g){return xs(c)?C(c,g):[]}),bL=ai(function(c){return iu(qs(c,xs))}),wL=ai(function(c){var g=su(c);return xs(g)&&(g=t),iu(qs(c,xs),Cr(g,2))}),xL=ai(function(c){var g=su(c);return g=typeof g=="function"?g:t,iu(qs(c,xs),t,g)}),LL=ai(w0);function SL(c,g){return Mu(c||[],g||[],dt)}function EL(c,g){return Mu(c||[],g||[],Lc)}var CL=ai(function(c){var g=c.length,A=g>1?c[g-1]:t;return A=typeof A=="function"?(c.pop(),A):t,r2(c,A)});function i2(c){var g=De(c);return g.__chain__=!0,g}function PL(c,g){return g(c),c}function Xp(c,g){return g(c)}var ML=Pc(function(c){var g=c.length,A=g?c[0]:0,ne=this.__wrapped__,xe=function(Re){return Pn(Re,c)};return g>1||this.__actions__.length||!(ne instanceof Vr)||!Mc(A)?this.thru(xe):(ne=ne.slice(A,+A+(g?1:0)),ne.__actions__.push({func:Xp,args:[xe],thisArg:t}),new Bo(ne,this.__chain__).thru(function(Re){return g&&!Re.length&&Re.push(t),Re}))});function AL(){return i2(this)}function kL(){return new Bo(this.value(),this.__chain__)}function TL(){this.__values__===t&&(this.__values__=y2(this.value()));var c=this.__index__>=this.__values__.length,g=c?t:this.__values__[this.__index__++];return{done:c,value:g}}function NL(){return this}function DL(c){for(var g,A=this;A instanceof Su;){var ne=Jy(A);ne.__index__=0,ne.__values__=t,g?xe.__wrapped__=ne:g=ne;var xe=ne;A=A.__wrapped__}return xe.__wrapped__=c,g}function IL(){var c=this.__wrapped__;if(c instanceof Vr){var g=c;return this.__actions__.length&&(g=new Vr(this)),g=g.reverse(),g.__actions__.push({func:Xp,args:[b0],thisArg:t}),new Bo(g,this.__chain__)}return this.thru(b0)}function OL(){return ru(this.__wrapped__,this.__actions__)}var BL=Gp(function(c,g,A){Yr.call(c,A)?++c[A]:Tn(c,A,1)});function RL(c,g,A){var ne=Xr(c)?Bl:re;return A&&Za(c,g,A)&&(g=t),ne(c,Cr(g,3))}function FL(c,g){var A=Xr(c)?qs:Xe;return A(c,Cr(g,3))}var jL=Ty(Xy),$L=Ty(Qy);function zL(c,g){return Ue(Qp(c,g),1)}function UL(c,g){return Ue(Qp(c,g),oe)}function VL(c,g,A){return A=A===t?1:li(A),Ue(Qp(c,g),A)}function o2(c,g){var A=Xr(c)?ko:j;return A(c,Cr(g,3))}function s2(c,g){var A=Xr(c)?Hs:X;return A(c,Cr(g,3))}var GL=Gp(function(c,g,A){Yr.call(c,A)?c[A].push(g):Tn(c,A,[g])});function HL(c,g,A,ne){c=pl(c)?c:Ah(c),A=A&&!ne?li(A):0;var xe=c.length;return A<0&&(A=ae(xe+A,0)),ig(c)?A<=xe&&c.indexOf(g,A)>-1:!!xe&&hn(c,g,A)>-1}var qL=ai(function(c,g,A){var ne=-1,xe=typeof g=="function",Re=pl(c)?Nt(c.length):[];return j(c,function(it){Re[++ne]=xe?yi(g,it,A):Be(it,g,A)}),Re}),WL=Gp(function(c,g,A){Tn(c,A,g)});function Qp(c,g){var A=Xr(c)?_i:Vi;return A(c,Cr(g,3))}function ZL(c,g,A,ne){return c==null?[]:(Xr(g)||(g=g==null?[]:[g]),A=ne?t:A,Xr(A)||(A=A==null?[]:[A]),tc(c,g,A))}var KL=Gp(function(c,g,A){c[A?0:1].push(g)},function(){return[[],[]]});function YL(c,g,A){var ne=Xr(c)?_a:Hi,xe=arguments.length<3;return ne(c,Cr(g,4),A,xe,j)}function JL(c,g,A){var ne=Xr(c)?ho:Hi,xe=arguments.length<3;return ne(c,Cr(g,4),A,xe,X)}function XL(c,g){var A=Xr(c)?qs:Xe;return A(c,ng(Cr(g,3)))}function QL(c){var g=Xr(c)?Rt:xh;return g(c)}function eS(c,g,A){(A?Za(c,g,A):g===t)?g=1:g=li(g);var ne=Xr(c)?xt:jp;return ne(c,g)}function tS(c){var g=Xr(c)?Kt:zp;return g(c)}function nS(c){if(c==null)return 0;if(pl(c))return ig(c)?Uo(c):c.length;var g=Ma(c);return g==te||g==et?c.size:mi(c).length}function rS(c,g,A){var ne=Xr(c)?B:Up;return A&&Za(c,g,A)&&(g=t),ne(c,Cr(g,3))}var iS=ai(function(c,g){if(c==null)return[];var A=g.length;return A>1&&Za(c,g[0],g[1])?g=[]:A>2&&Za(g[0],g[1],g[2])&&(g=[g[0]]),tc(c,Ue(g,1),[])}),eg=ls||function(){return co.Date.now()};function oS(c,g){if(typeof g!="function")throw new Ki(o);return c=li(c),function(){if(--c<1)return g.apply(this,arguments)}}function a2(c,g,A){return g=A?t:g,g=c&&g==null?c.length:g,Cc(c,ve,t,t,t,t,g)}function l2(c,g){var A;if(typeof g!="function")throw new Ki(o);return c=li(c),function(){return--c>0&&(A=g.apply(this,arguments)),c<=1&&(g=t),A}}var x0=ai(function(c,g,A){var ne=F;if(A.length){var xe=os(A,Ph(x0));ne|=he}return Cc(c,ne,g,A,xe)}),u2=ai(function(c,g,A){var ne=F|I;if(A.length){var xe=os(A,Ph(u2));ne|=he}return Cc(g,ne,c,A,xe)});function c2(c,g,A){g=A?t:g;var ne=Cc(c,Y,t,t,t,t,t,g);return ne.placeholder=c2.placeholder,ne}function f2(c,g,A){g=A?t:g;var ne=Cc(c,ee,t,t,t,t,t,g);return ne.placeholder=f2.placeholder,ne}function h2(c,g,A){var ne,xe,Re,it,gt,Mt,ln=0,un=!1,yn=!1,Un=!0;if(typeof c!="function")throw new Ki(o);g=au(g)||0,Ko(A)&&(un=!!A.leading,yn="maxWait"in A,Re=yn?ae(au(A.maxWait)||0,g):Re,Un="trailing"in A?!!A.trailing:Un);function ur(Ls){var Tu=ne,Tc=xe;return ne=xe=t,ln=Ls,it=c.apply(Tc,Tu),it}function Mr(Ls){return ln=Ls,gt=Sd(Li,g),un?ur(Ls):it}function ui(Ls){var Tu=Ls-Mt,Tc=Ls-ln,T2=g-Tu;return yn?Se(T2,Re-Tc):T2}function Ar(Ls){var Tu=Ls-Mt,Tc=Ls-ln;return Mt===t||Tu>=g||Tu<0||yn&&Tc>=Re}function Li(){var Ls=eg();if(Ar(Ls))return Di(Ls);gt=Sd(Li,ui(Ls))}function Di(Ls){return gt=t,Un&&ne?ur(Ls):(ne=xe=t,it)}function $l(){gt!==t&&Sh(gt),ln=0,ne=Mt=xe=gt=t}function Ka(){return gt===t?it:Di(eg())}function zl(){var Ls=eg(),Tu=Ar(Ls);if(ne=arguments,xe=this,Mt=Ls,Tu){if(gt===t)return Mr(Mt);if(yn)return Sh(gt),gt=Sd(Li,g),ur(Mt)}return gt===t&&(gt=Sd(Li,g)),it}return zl.cancel=$l,zl.flush=Ka,zl}var sS=ai(function(c,g){return x(c,1,g)}),aS=ai(function(c,g,A){return x(c,au(g)||0,A)});function lS(c){return Cc(c,U)}function tg(c,g){if(typeof c!="function"||g!=null&&typeof g!="function")throw new Ki(o);var A=function(){var ne=arguments,xe=g?g.apply(this,ne):ne[0],Re=A.cache;if(Re.has(xe))return Re.get(xe);var it=c.apply(this,ne);return A.cache=Re.set(xe,it)||Re,it};return A.cache=new(tg.Cache||Ca),A}tg.Cache=Ca;function ng(c){if(typeof c!="function")throw new Ki(o);return function(){var g=arguments;switch(g.length){case 0:return!c.call(this);case 1:return!c.call(this,g[0]);case 2:return!c.call(this,g[0],g[1]);case 3:return!c.call(this,g[0],g[1],g[2])}return!c.apply(this,g)}}function uS(c){return l2(2,c)}var cS=a0(function(c,g){g=g.length==1&&Xr(g[0])?_i(g[0],Ur(Cr())):_i(Ue(g,1),Ur(Cr()));var A=g.length;return ai(function(ne){for(var xe=-1,Re=Se(ne.length,A);++xe<Re;)ne[xe]=g[xe].call(this,ne[xe]);return yi(c,this,ne)})}),L0=ai(function(c,g){var A=os(g,Ph(L0));return Cc(c,he,t,g,A)}),d2=ai(function(c,g){var A=os(g,Ph(d2));return Cc(c,fe,t,g,A)}),fS=Pc(function(c,g){return Cc(c,$,t,t,t,g)});function hS(c,g){if(typeof c!="function")throw new Ki(o);return g=g===t?g:li(g),ai(c,g)}function dS(c,g){if(typeof c!="function")throw new Ki(o);return g=g==null?0:ae(li(g),0),ai(function(A){var ne=A[g],xe=ou(A,0,g);return ne&&ks(xe,ne),yi(c,this,xe)})}function pS(c,g,A){var ne=!0,xe=!0;if(typeof c!="function")throw new Ki(o);return Ko(A)&&(ne="leading"in A?!!A.leading:ne,xe="trailing"in A?!!A.trailing:xe),h2(c,g,{leading:ne,maxWait:g,trailing:xe})}function gS(c){return a2(c,1)}function mS(c,g){return L0(Rf(g),c)}function vS(){if(!arguments.length)return[];var c=arguments[0];return Xr(c)?c:[c]}function yS(c){return l(c,y)}function _S(c,g){return g=typeof g=="function"?g:t,l(c,y,g)}function bS(c){return l(c,_|y)}function wS(c,g){return g=typeof g=="function"?g:t,l(c,_|y,g)}function xS(c,g){return g==null||v(c,g,Js(g))}function ku(c,g){return c===g||c!==c&&g!==g}var LS=Zp(ct),SS=Zp(function(c,g){return c>=g}),$f=Oe(function(){return arguments}())?Oe:function(c){return us(c)&&Yr.call(c,"callee")&&!$i.call(c,"callee")},Xr=Nt.isArray,ES=eu?Ur(eu):je;function pl(c){return c!=null&&rg(c.length)&&!Ac(c)}function xs(c){return us(c)&&pl(c)}function CS(c){return c===!0||c===!1||us(c)&&nt(c)==K}var ef=a||I0,PS=na?Ur(na):$e;function MS(c){return us(c)&&c.nodeType===1&&!Ed(c)}function AS(c){if(c==null)return!0;if(pl(c)&&(Xr(c)||typeof c=="string"||typeof c.splice=="function"||ef(c)||Mh(c)||$f(c)))return!c.length;var g=Ma(c);if(g==te||g==et)return!c.size;if(Ld(c))return!mi(c).length;for(var A in c)if(Yr.call(c,A))return!1;return!0}function kS(c,g){return at(c,g)}function TS(c,g,A){A=typeof A=="function"?A:t;var ne=A?A(c,g):t;return ne===t?at(c,g,t,A):!!ne}function S0(c){if(!us(c))return!1;var g=nt(c);return g==Me||g==ke||typeof c.message=="string"&&typeof c.name=="string"&&!Ed(c)}function NS(c){return typeof c=="number"&&p(c)}function Ac(c){if(!Ko(c))return!1;var g=nt(c);return g==Ge||g==ce||g==pe||g==tt}function p2(c){return typeof c=="number"&&c==li(c)}function rg(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=ie}function Ko(c){var g=typeof c;return c!=null&&(g=="object"||g=="function")}function us(c){return c!=null&&typeof c=="object"}var g2=Dl?Ur(Dl):pt;function DS(c,g){return c===g||Et(c,g,p0(g))}function IS(c,g,A){return A=typeof A=="function"?A:t,Et(c,g,p0(g),A)}function OS(c){return m2(c)&&c!=+c}function BS(c){if(_3(c))throw new Jn(s);return Ct(c)}function RS(c){return c===null}function FS(c){return c==null}function m2(c){return typeof c=="number"||us(c)&&nt(c)==ye}function Ed(c){if(!us(c)||nt(c)!=We)return!1;var g=ca(c);if(g===null)return!0;var A=Yr.call(g,"constructor")&&g.constructor;return typeof A=="function"&&A instanceof A&&ua.call(A)==Ti}var E0=Il?Ur(Il):sn;function jS(c){return p2(c)&&c>=-9007199254740991&&c<=ie}var v2=Fs?Ur(Fs):zn;function ig(c){return typeof c=="string"||!Xr(c)&&us(c)&&nt(c)==ze}function jl(c){return typeof c=="symbol"||us(c)&&nt(c)==wt}var Mh=Ol?Ur(Ol):Wn;function $S(c){return c===t}function zS(c){return us(c)&&Ma(c)==kt}function US(c){return us(c)&&nt(c)==Jt}var VS=Zp(Jr),GS=Zp(function(c,g){return c<=g});function y2(c){if(!c)return[];if(pl(c))return ig(c)?Vo(c):dl(c);if(pr&&c[pr])return ms(c[pr]());var g=Ma(c),A=g==te?fl:g==et?ss:Ah;return A(c)}function kc(c){if(!c)return c===0?c:0;if(c=au(c),c===oe||c===-1/0){var g=c<0?-1:1;return g*_e}return c===c?c:0}function li(c){var g=kc(c),A=g%1;return g===g?A?g-A:g:0}function _2(c){return c?tr(li(c),0,Te):0}function au(c){if(typeof c=="number")return c;if(jl(c))return Ce;if(Ko(c)){var g=typeof c.valueOf=="function"?c.valueOf():c;c=Ko(g)?g+"":g}if(typeof c!="string")return c===0?c:+c;c=Ts(c);var A=dr.test(c);return A||xr.test(c)?Nl(c.slice(2),A?2:8):Pr.test(c)?Ce:+c}function b2(c){return rc(c,gl(c))}function HS(c){return c?tr(li(c),-9007199254740991,ie):c===0?c:0}function no(c){return c==null?"":Pa(c)}var qS=Eh(function(c,g){if(Ld(g)||pl(g)){rc(g,Js(g),c);return}for(var A in g)Yr.call(g,A)&&dt(c,A,g[A])}),w2=Eh(function(c,g){rc(g,gl(g),c)}),og=Eh(function(c,g,A,ne){rc(g,gl(g),c,ne)}),WS=Eh(function(c,g,A,ne){rc(g,Js(g),c,ne)}),ZS=Pc(Pn);function KS(c,g){var A=bs(c);return g==null?A:pn(A,g)}var YS=ai(function(c,g){c=wi(c);var A=-1,ne=g.length,xe=ne>2?g[2]:t;for(xe&&Za(g[0],g[1],xe)&&(ne=1);++A<ne;)for(var Re=g[A],it=gl(Re),gt=-1,Mt=it.length;++gt<Mt;){var ln=it[gt],un=c[ln];(un===t||ku(un,aa[ln])&&!Yr.call(c,ln))&&(c[ln]=Re[ln])}return c}),JS=ai(function(c){return c.push(t,Fy),yi(x2,t,c)});function XS(c,g){return Lt(c,Cr(g,3),Xt)}function QS(c,g){return Lt(c,Cr(g,3),_n)}function eE(c,g){return c==null?c:vt(c,Cr(g,3),gl)}function tE(c,g){return c==null?c:Dt(c,Cr(g,3),gl)}function nE(c,g){return c&&Xt(c,Cr(g,3))}function rE(c,g){return c&&_n(c,Cr(g,3))}function iE(c){return c==null?[]:Sn(c,Js(c))}function oE(c){return c==null?[]:Sn(c,gl(c))}function C0(c,g,A){var ne=c==null?t:hr(c,g);return ne===t?A:ne}function sE(c,g){return c!=null&&zy(c,g,jt)}function P0(c,g){return c!=null&&zy(c,g,bt)}var aE=Dy(function(c,g,A){g!=null&&typeof g.toString!="function"&&(g=xi.call(g)),c[g]=A},A0(ml)),lE=Dy(function(c,g,A){g!=null&&typeof g.toString!="function"&&(g=xi.call(g)),Yr.call(c,g)?c[g].push(A):c[g]=[A]},Cr),uE=ai(Be);function Js(c){return pl(c)?Bt(c):mi(c)}function gl(c){return pl(c)?Bt(c,!0):Ni(c)}function cE(c,g){var A={};return g=Cr(g,3),Xt(c,function(ne,xe,Re){Tn(A,g(ne,xe,Re),ne)}),A}function fE(c,g){var A={};return g=Cr(g,3),Xt(c,function(ne,xe,Re){Tn(A,xe,g(ne,xe,Re))}),A}var hE=Eh(function(c,g,A){ha(c,g,A)}),x2=Eh(function(c,g,A,ne){ha(c,g,A,ne)}),dE=Pc(function(c,g){var A={};if(c==null)return A;var ne=!1;g=_i(g,function(Re){return Re=Au(Re,c),ne||(ne=Re.length>1),Re}),rc(c,h0(c),A),ne&&(A=l(A,_|b|y,a3));for(var xe=g.length;xe--;)Sc(A,g[xe]);return A});function pE(c,g){return L2(c,ng(Cr(g)))}var gE=Pc(function(c,g){return c==null?{}:da(c,g)});function L2(c,g){if(c==null)return{};var A=_i(h0(c),function(ne){return[ne]});return g=Cr(g),Zo(c,A,function(ne,xe){return g(ne,xe[0])})}function mE(c,g,A){g=Au(g,c);var ne=-1,xe=g.length;for(xe||(xe=1,c=t);++ne<xe;){var Re=c==null?t:c[ic(g[ne])];Re===t&&(ne=xe,Re=A),c=Ac(Re)?Re.call(c):Re}return c}function vE(c,g,A){return c==null?c:Lc(c,g,A)}function yE(c,g,A,ne){return ne=typeof ne=="function"?ne:t,c==null?c:Lc(c,g,A,ne)}var S2=By(Js),E2=By(gl);function _E(c,g,A){var ne=Xr(c),xe=ne||ef(c)||Mh(c);if(g=Cr(g,4),A==null){var Re=c&&c.constructor;xe?A=ne?new Re:[]:Ko(c)?A=Ac(Re)?bs(ca(c)):{}:A={}}return(xe?ko:Xt)(c,function(it,gt,Mt){return g(A,it,gt,Mt)}),A}function bE(c,g){return c==null?!0:Sc(c,g)}function wE(c,g,A){return c==null?c:Lh(c,g,Rf(A))}function xE(c,g,A,ne){return ne=typeof ne=="function"?ne:t,c==null?c:Lh(c,g,Rf(A),ne)}function Ah(c){return c==null?[]:$o(c,Js(c))}function LE(c){return c==null?[]:$o(c,gl(c))}function SE(c,g,A){return A===t&&(A=g,g=t),A!==t&&(A=au(A),A=A===A?A:0),g!==t&&(g=au(g),g=g===g?g:0),tr(au(c),g,A)}function EE(c,g,A){return g=kc(g),A===t?(A=g,g=0):A=kc(A),c=au(c),Ot(c,g,A)}function CE(c,g,A){if(A&&typeof A!="boolean"&&Za(c,g,A)&&(g=A=t),A===t&&(typeof g=="boolean"?(A=g,g=t):typeof c=="boolean"&&(A=c,c=t)),c===t&&g===t?(c=0,g=1):(c=kc(c),g===t?(g=c,c=0):g=kc(g)),c>g){var ne=c;c=g,g=ne}if(A||c%1||g%1){var xe=Gt();return Se(c+xe*(g-c+sl("1e-"+((xe+"").length-1))),g)}return Of(c,g)}var PE=Ch(function(c,g,A){return g=g.toLowerCase(),c+(A?C2(g):g)});function C2(c){return M0(no(c).toLowerCase())}function P2(c){return c=no(c),c&&c.replace(Ir,xu).replace(Al,"")}function ME(c,g,A){c=no(c),g=Pa(g);var ne=c.length;A=A===t?ne:tr(li(A),0,ne);var xe=A;return A-=g.length,A>=0&&c.slice(A,xe)==g}function AE(c){return c=no(c),c&&gr.test(c)?c.replace(wr,Ga):c}function kE(c){return c=no(c),c&&qt.test(c)?c.replace(bn,"\\$&"):c}var TE=Ch(function(c,g,A){return c+(A?"-":"")+g.toLowerCase()}),NE=Ch(function(c,g,A){return c+(A?" ":"")+g.toLowerCase()}),DE=ky("toLowerCase");function IE(c,g,A){c=no(c),g=li(g);var ne=g?Uo(c):0;if(!g||ne>=g)return c;var xe=(g-ne)/2;return Wp(Io(xe),A)+c+Wp(Do(xe),A)}function OE(c,g,A){c=no(c),g=li(g);var ne=g?Uo(c):0;return g&&ne<g?c+Wp(g-ne,A):c}function BE(c,g,A){c=no(c),g=li(g);var ne=g?Uo(c):0;return g&&ne<g?Wp(g-ne,A)+c:c}function RE(c,g,A){return A||g==null?g=0:g&&(g=+g),At(no(c).replace(Hn,""),g||0)}function FE(c,g,A){return(A?Za(c,g,A):g===t)?g=1:g=li(g),wh(no(c),g)}function jE(){var c=arguments,g=no(c[0]);return c.length<3?g:g.replace(c[1],c[2])}var $E=Ch(function(c,g,A){return c+(A?"_":"")+g.toLowerCase()});function zE(c,g,A){return A&&typeof A!="number"&&Za(c,g,A)&&(g=A=t),A=A===t?Te:A>>>0,A?(c=no(c),c&&(typeof g=="string"||g!=null&&!E0(g))&&(g=Pa(g),!g&&ia(c))?ou(Vo(c),0,A):c.split(g,A)):[]}var UE=Ch(function(c,g,A){return c+(A?" ":"")+M0(g)});function VE(c,g,A){return c=no(c),A=A==null?0:tr(li(A),0,c.length),g=Pa(g),c.slice(A,A+g.length)==g}function GE(c,g,A){var ne=De.templateSettings;A&&Za(c,g,A)&&(g=t),c=no(c),g=og({},g,ne,Ry);var xe=og({},g.imports,ne.imports,Ry),Re=Js(xe),it=$o(xe,Re),gt,Mt,ln=0,un=g.interpolate||tn,yn="__p += '",Un=Rl((g.escape||tn).source+"|"+un.source+"|"+(un===Qe?Mi:tn).source+"|"+(g.evaluate||tn).source+"|$","g"),ur="//# sourceURL="+(Yr.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++kl+"]")+`
`;c.replace(Un,function(Ar,Li,Di,$l,Ka,zl){return Di||(Di=$l),yn+=c.slice(ln,zl).replace(zi,Ha),Li&&(gt=!0,yn+=`' +
__e(`+Li+`) +
'`),Ka&&(Mt=!0,yn+=`';
`+Ka+`;
__p += '`),Di&&(yn+=`' +
((__t = (`+Di+`)) == null ? '' : __t) +
'`),ln=zl+Ar.length,Ar}),yn+=`';
`;var Mr=Yr.call(g,"variable")&&g.variable;if(!Mr)yn=`with (obj) {
`+yn+`
}
`;else if(Fn.test(Mr))throw new Jn(u);yn=(Mt?yn.replace(En,""):yn).replace(jn,"$1").replace(An,"$1;"),yn="function("+(Mr||"obj")+`) {
`+(Mr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(gt?", __e = _.escape":"")+(Mt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+yn+`return __p
}`;var ui=A2(function(){return Lr(Re,ur+"return "+yn).apply(t,it)});if(ui.source=yn,S0(ui))throw ui;return ui}function HE(c){return no(c).toLowerCase()}function qE(c){return no(c).toUpperCase()}function WE(c,g,A){if(c=no(c),c&&(A||g===t))return Ts(c);if(!c||!(g=Pa(g)))return c;var ne=Vo(c),xe=Vo(g),Re=is(ne,xe),it=tu(ne,xe)+1;return ou(ne,Re,it).join("")}function ZE(c,g,A){if(c=no(c),c&&(A||g===t))return c.slice(0,wa(c)+1);if(!c||!(g=Pa(g)))return c;var ne=Vo(c),xe=tu(ne,Vo(g))+1;return ou(ne,0,xe).join("")}function KE(c,g,A){if(c=no(c),c&&(A||g===t))return c.replace(Hn,"");if(!c||!(g=Pa(g)))return c;var ne=Vo(c),xe=is(ne,Vo(g));return ou(ne,xe).join("")}function YE(c,g){var A=Z,ne=T;if(Ko(g)){var xe="separator"in g?g.separator:xe;A="length"in g?li(g.length):A,ne="omission"in g?Pa(g.omission):ne}c=no(c);var Re=c.length;if(ia(c)){var it=Vo(c);Re=it.length}if(A>=Re)return c;var gt=A-Uo(ne);if(gt<1)return ne;var Mt=it?ou(it,0,gt).join(""):c.slice(0,gt);if(xe===t)return Mt+ne;if(it&&(gt+=Mt.length-gt),E0(xe)){if(c.slice(gt).search(xe)){var ln,un=Mt;for(xe.global||(xe=Rl(xe.source,no(Sr.exec(xe))+"g")),xe.lastIndex=0;ln=xe.exec(un);)var yn=ln.index;Mt=Mt.slice(0,yn===t?gt:yn)}}else if(c.indexOf(Pa(xe),gt)!=gt){var Un=Mt.lastIndexOf(xe);Un>-1&&(Mt=Mt.slice(0,Un))}return Mt+ne}function JE(c){return c=no(c),c&&Or.test(c)?c.replace(Yn,xa):c}var XE=Ch(function(c,g,A){return c+(A?" ":"")+g.toUpperCase()}),M0=ky("toUpperCase");function M2(c,g,A){return c=no(c),g=A?t:g,g===t?Ns(c)?oa(c):ut(c):c.match(g)||[]}var A2=ai(function(c,g){try{return yi(c,t,g)}catch(A){return S0(A)?A:new Jn(A)}}),QE=Pc(function(c,g){return ko(g,function(A){A=ic(A),Tn(c,A,x0(c[A],c))}),c});function eC(c){var g=c==null?0:c.length,A=Cr();return c=g?_i(c,function(ne){if(typeof ne[1]!="function")throw new Ki(o);return[A(ne[0]),ne[1]]}):[],ai(function(ne){for(var xe=-1;++xe<g;){var Re=c[xe];if(yi(Re[0],this,ne))return yi(Re[1],this,ne)}})}function tC(c){return h(l(c,_))}function A0(c){return function(){return c}}function nC(c,g){return c==null||c!==c?g:c}var rC=Ny(),iC=Ny(!0);function ml(c){return c}function k0(c){return nr(typeof c=="function"?c:l(c,_))}function oC(c){return ws(l(c,_))}function sC(c,g){return Eu(c,l(g,_))}var aC=ai(function(c,g){return function(A){return Be(A,c,g)}}),lC=ai(function(c,g){return function(A){return Be(c,A,g)}});function T0(c,g,A){var ne=Js(g),xe=Sn(g,ne);A==null&&!(Ko(g)&&(xe.length||!ne.length))&&(A=g,g=c,c=this,xe=Sn(g,Js(g)));var Re=!(Ko(A)&&"chain"in A)||!!A.chain,it=Ac(c);return ko(xe,function(gt){var Mt=g[gt];c[gt]=Mt,it&&(c.prototype[gt]=function(){var ln=this.__chain__;if(Re||ln){var un=c(this.__wrapped__),yn=un.__actions__=dl(this.__actions__);return yn.push({func:Mt,args:arguments,thisArg:c}),un.__chain__=ln,un}return Mt.apply(c,ks([this.value()],arguments))})}),c}function uC(){return co._===this&&(co._=go),this}function N0(){}function cC(c){return c=li(c),ai(function(g){return Wa(g,c)})}var fC=u0(_i),hC=u0(Bl),dC=u0(B);function k2(c){return m0(c)?_r(ic(c)):mo(c)}function pC(c){return function(g){return c==null?t:hr(c,g)}}var gC=Iy(),mC=Iy(!0);function D0(){return[]}function I0(){return!1}function vC(){return{}}function yC(){return""}function _C(){return!0}function bC(c,g){if(c=li(c),c<1||c>ie)return[];var A=Te,ne=Se(c,Te);g=Cr(g),c-=Te;for(var xe=po(ne,g);++A<c;)g(A);return xe}function wC(c){return Xr(c)?_i(c,ic):jl(c)?[c]:dl(Yy(no(c)))}function xC(c){var g=++Ws;return no(c)+g}var LC=qp(function(c,g){return c+g},0),SC=c0("ceil"),EC=qp(function(c,g){return c/g},1),CC=c0("floor");function PC(c){return c&&c.length?ge(c,ml,ct):t}function MC(c,g){return c&&c.length?ge(c,Cr(g,2),ct):t}function AC(c){return or(c,ml)}function kC(c,g){return or(c,Cr(g,2))}function TC(c){return c&&c.length?ge(c,ml,Jr):t}function NC(c,g){return c&&c.length?ge(c,Cr(g,2),Jr):t}var DC=qp(function(c,g){return c*g},1),IC=c0("round"),OC=qp(function(c,g){return c-g},0);function BC(c){return c&&c.length?bi(c,ml):0}function RC(c,g){return c&&c.length?bi(c,Cr(g,2)):0}return De.after=oS,De.ary=a2,De.assign=qS,De.assignIn=w2,De.assignInWith=og,De.assignWith=WS,De.at=ZS,De.before=l2,De.bind=x0,De.bindAll=QE,De.bindKey=u2,De.castArray=vS,De.chain=i2,De.chunk=C3,De.compact=P3,De.concat=M3,De.cond=eC,De.conforms=tC,De.constant=A0,De.countBy=BL,De.create=KS,De.curry=c2,De.curryRight=f2,De.debounce=h2,De.defaults=YS,De.defaultsDeep=JS,De.defer=sS,De.delay=aS,De.difference=A3,De.differenceBy=k3,De.differenceWith=T3,De.drop=N3,De.dropRight=D3,De.dropRightWhile=I3,De.dropWhile=O3,De.fill=B3,De.filter=FL,De.flatMap=zL,De.flatMapDeep=UL,De.flatMapDepth=VL,De.flatten=e2,De.flattenDeep=R3,De.flattenDepth=F3,De.flip=lS,De.flow=rC,De.flowRight=iC,De.fromPairs=j3,De.functions=iE,De.functionsIn=oE,De.groupBy=GL,De.initial=z3,De.intersection=U3,De.intersectionBy=V3,De.intersectionWith=G3,De.invert=aE,De.invertBy=lE,De.invokeMap=qL,De.iteratee=k0,De.keyBy=WL,De.keys=Js,De.keysIn=gl,De.map=Qp,De.mapKeys=cE,De.mapValues=fE,De.matches=oC,De.matchesProperty=sC,De.memoize=tg,De.merge=hE,De.mergeWith=x2,De.method=aC,De.methodOf=lC,De.mixin=T0,De.negate=ng,De.nthArg=cC,De.omit=dE,De.omitBy=pE,De.once=uS,De.orderBy=ZL,De.over=fC,De.overArgs=cS,De.overEvery=hC,De.overSome=dC,De.partial=L0,De.partialRight=d2,De.partition=KL,De.pick=gE,De.pickBy=L2,De.property=k2,De.propertyOf=pC,De.pull=Z3,De.pullAll=n2,De.pullAllBy=K3,De.pullAllWith=Y3,De.pullAt=J3,De.range=gC,De.rangeRight=mC,De.rearg=fS,De.reject=XL,De.remove=X3,De.rest=hS,De.reverse=b0,De.sampleSize=eS,De.set=vE,De.setWith=yE,De.shuffle=tS,De.slice=Q3,De.sortBy=iS,De.sortedUniq=sL,De.sortedUniqBy=aL,De.split=zE,De.spread=dS,De.tail=lL,De.take=uL,De.takeRight=cL,De.takeRightWhile=fL,De.takeWhile=hL,De.tap=PL,De.throttle=pS,De.thru=Xp,De.toArray=y2,De.toPairs=S2,De.toPairsIn=E2,De.toPath=wC,De.toPlainObject=b2,De.transform=_E,De.unary=gS,De.union=dL,De.unionBy=pL,De.unionWith=gL,De.uniq=mL,De.uniqBy=vL,De.uniqWith=yL,De.unset=bE,De.unzip=w0,De.unzipWith=r2,De.update=wE,De.updateWith=xE,De.values=Ah,De.valuesIn=LE,De.without=_L,De.words=M2,De.wrap=mS,De.xor=bL,De.xorBy=wL,De.xorWith=xL,De.zip=LL,De.zipObject=SL,De.zipObjectDeep=EL,De.zipWith=CL,De.entries=S2,De.entriesIn=E2,De.extend=w2,De.extendWith=og,T0(De,De),De.add=LC,De.attempt=A2,De.camelCase=PE,De.capitalize=C2,De.ceil=SC,De.clamp=SE,De.clone=yS,De.cloneDeep=bS,De.cloneDeepWith=wS,De.cloneWith=_S,De.conformsTo=xS,De.deburr=P2,De.defaultTo=nC,De.divide=EC,De.endsWith=ME,De.eq=ku,De.escape=AE,De.escapeRegExp=kE,De.every=RL,De.find=jL,De.findIndex=Xy,De.findKey=XS,De.findLast=$L,De.findLastIndex=Qy,De.findLastKey=QS,De.floor=CC,De.forEach=o2,De.forEachRight=s2,De.forIn=eE,De.forInRight=tE,De.forOwn=nE,De.forOwnRight=rE,De.get=C0,De.gt=LS,De.gte=SS,De.has=sE,De.hasIn=P0,De.head=t2,De.identity=ml,De.includes=HL,De.indexOf=$3,De.inRange=EE,De.invoke=uE,De.isArguments=$f,De.isArray=Xr,De.isArrayBuffer=ES,De.isArrayLike=pl,De.isArrayLikeObject=xs,De.isBoolean=CS,De.isBuffer=ef,De.isDate=PS,De.isElement=MS,De.isEmpty=AS,De.isEqual=kS,De.isEqualWith=TS,De.isError=S0,De.isFinite=NS,De.isFunction=Ac,De.isInteger=p2,De.isLength=rg,De.isMap=g2,De.isMatch=DS,De.isMatchWith=IS,De.isNaN=OS,De.isNative=BS,De.isNil=FS,De.isNull=RS,De.isNumber=m2,De.isObject=Ko,De.isObjectLike=us,De.isPlainObject=Ed,De.isRegExp=E0,De.isSafeInteger=jS,De.isSet=v2,De.isString=ig,De.isSymbol=jl,De.isTypedArray=Mh,De.isUndefined=$S,De.isWeakMap=zS,De.isWeakSet=US,De.join=H3,De.kebabCase=TE,De.last=su,De.lastIndexOf=q3,De.lowerCase=NE,De.lowerFirst=DE,De.lt=VS,De.lte=GS,De.max=PC,De.maxBy=MC,De.mean=AC,De.meanBy=kC,De.min=TC,De.minBy=NC,De.stubArray=D0,De.stubFalse=I0,De.stubObject=vC,De.stubString=yC,De.stubTrue=_C,De.multiply=DC,De.nth=W3,De.noConflict=uC,De.noop=N0,De.now=eg,De.pad=IE,De.padEnd=OE,De.padStart=BE,De.parseInt=RE,De.random=CE,De.reduce=YL,De.reduceRight=JL,De.repeat=FE,De.replace=jE,De.result=mE,De.round=IC,De.runInContext=_t,De.sample=QL,De.size=nS,De.snakeCase=$E,De.some=rS,De.sortedIndex=eL,De.sortedIndexBy=tL,De.sortedIndexOf=nL,De.sortedLastIndex=rL,De.sortedLastIndexBy=iL,De.sortedLastIndexOf=oL,De.startCase=UE,De.startsWith=VE,De.subtract=OC,De.sum=BC,De.sumBy=RC,De.template=GE,De.times=bC,De.toFinite=kc,De.toInteger=li,De.toLength=_2,De.toLower=HE,De.toNumber=au,De.toSafeInteger=HS,De.toString=no,De.toUpper=qE,De.trim=WE,De.trimEnd=ZE,De.trimStart=KE,De.truncate=YE,De.unescape=JE,De.uniqueId=xC,De.upperCase=XE,De.upperFirst=M0,De.each=o2,De.eachRight=s2,De.first=t2,T0(De,function(){var c={};return Xt(De,function(g,A){Yr.call(De.prototype,A)||(c[A]=g)}),c}(),{chain:!1}),De.VERSION=r,ko(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){De[c].placeholder=De}),ko(["drop","take"],function(c,g){Vr.prototype[c]=function(A){A=A===t?1:ae(li(A),0);var ne=this.__filtered__&&!g?new Vr(this):this.clone();return ne.__filtered__?ne.__takeCount__=Se(A,ne.__takeCount__):ne.__views__.push({size:Se(A,Te),type:c+(ne.__dir__<0?"Right":"")}),ne},Vr.prototype[c+"Right"]=function(A){return this.reverse()[c](A).reverse()}}),ko(["filter","map","takeWhile"],function(c,g){var A=g+1,ne=A==z||A==G;Vr.prototype[c]=function(xe){var Re=this.clone();return Re.__iteratees__.push({iteratee:Cr(xe,3),type:A}),Re.__filtered__=Re.__filtered__||ne,Re}}),ko(["head","last"],function(c,g){var A="take"+(g?"Right":"");Vr.prototype[c]=function(){return this[A](1).value()[0]}}),ko(["initial","tail"],function(c,g){var A="drop"+(g?"":"Right");Vr.prototype[c]=function(){return this.__filtered__?new Vr(this):this[A](1)}}),Vr.prototype.compact=function(){return this.filter(ml)},Vr.prototype.find=function(c){return this.filter(c).head()},Vr.prototype.findLast=function(c){return this.reverse().find(c)},Vr.prototype.invokeMap=ai(function(c,g){return typeof c=="function"?new Vr(this):this.map(function(A){return Be(A,c,g)})}),Vr.prototype.reject=function(c){return this.filter(ng(Cr(c)))},Vr.prototype.slice=function(c,g){c=li(c);var A=this;return A.__filtered__&&(c>0||g<0)?new Vr(A):(c<0?A=A.takeRight(-c):c&&(A=A.drop(c)),g!==t&&(g=li(g),A=g<0?A.dropRight(-g):A.take(g-c)),A)},Vr.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},Vr.prototype.toArray=function(){return this.take(Te)},Xt(Vr.prototype,function(c,g){var A=/^(?:filter|find|map|reject)|While$/.test(g),ne=/^(?:head|last)$/.test(g),xe=De[ne?"take"+(g=="last"?"Right":""):g],Re=ne||/^find/.test(g);xe&&(De.prototype[g]=function(){var it=this.__wrapped__,gt=ne?[1]:arguments,Mt=it instanceof Vr,ln=gt[0],un=Mt||Xr(it),yn=function(Li){var Di=xe.apply(De,ks([Li],gt));return ne&&Un?Di[0]:Di};un&&A&&typeof ln=="function"&&ln.length!=1&&(Mt=un=!1);var Un=this.__chain__,ur=!!this.__actions__.length,Mr=Re&&!Un,ui=Mt&&!ur;if(!Re&&un){it=ui?it:new Vr(this);var Ar=c.apply(it,gt);return Ar.__actions__.push({func:Xp,args:[yn],thisArg:t}),new Bo(Ar,Un)}return Mr&&ui?c.apply(this,gt):(Ar=this.thru(yn),Mr?ne?Ar.value()[0]:Ar.value():Ar)})}),ko(["pop","push","shift","sort","splice","unshift"],function(c){var g=sa[c],A=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",ne=/^(?:pop|shift)$/.test(c);De.prototype[c]=function(){var xe=arguments;if(ne&&!this.__chain__){var Re=this.value();return g.apply(Xr(Re)?Re:[],xe)}return this[A](function(it){return g.apply(Xr(it)?it:[],xe)})}}),Xt(Vr.prototype,function(c,g){var A=De[g];if(A){var ne=A.name+"";Yr.call(_s,ne)||(_s[ne]=[]),_s[ne].push({name:g,func:A})}}),_s[Hp(t,I).name]=[{name:"wrapper",func:t}],Vr.prototype.clone=Zc,Vr.prototype.reverse=ph,Vr.prototype.value=Kc,De.prototype.at=ML,De.prototype.chain=AL,De.prototype.commit=kL,De.prototype.next=TL,De.prototype.plant=DL,De.prototype.reverse=IL,De.prototype.toJSON=De.prototype.valueOf=De.prototype.value=OL,De.prototype.first=De.prototype.head,pr&&(De.prototype[pr]=NL),De},Ho=Ds();fo?((fo.exports=Ho)._=Ho,lr._=Ho):co._=Ho}).call(ea)})(ym,ym.exports);var fx=ym.exports;class ga extends qn.Polygon{constructor(t,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Wt(this,"_width");Wt(this,"_height");Wt(this,"_center");Wt(this,"_rotation");Wt(this,"_isMapReady",!1);Wt(this,"properties");Wt(this,"_helperPoints",{corners:[],midPoints:[]});Wt(this,"_throttledUpdateProperties");const i=t instanceof qn.LatLngBounds?t:qn.latLngBounds(t);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=dn.measure("Rectangle.constructor.calculateWidth",()=>{const u=nv([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(u,1)}),this._height=dn.measure("Rectangle.constructor.calculateHeight",()=>{const u=nv([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(u,1)}),console.log("[Rectangle][constructor] Dimensions calcules depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=dn.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=dn.measure("Rectangle.constructor.initThrottle",()=>fx.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){dn.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Dbut mise  jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const t=this._width/2,r=this._height/2,i=ub([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=ub([this._center.lng,this._center.lat],t,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,u=Math.abs(s[0]-this._center.lng)*2,f=[qn.latLng(this._center.lat+o/2,this._center.lng-u/2),qn.latLng(this._center.lat+o/2,this._center.lng+u/2),qn.latLng(this._center.lat-o/2,this._center.lng+u/2),qn.latLng(this._center.lat-o/2,this._center.lng-u/2)];if(this._rotation===0){this.setLatLngs(f);return}const d=this._map.latLngToContainerPoint(this._center),m=f.map(F=>this._map.latLngToContainerPoint(F)),_=-this._rotation*Math.PI/180,b=Math.cos(_),y=Math.sin(_),k=m.map(F=>{const I=F.x-d.x,R=F.y-d.y;return qn.point(d.x+(I*b-R*y),d.y+(I*y+R*b))}).map(F=>this._map.containerPointToLatLng(F));console.log("[Rectangle][_updatePolygonCoordinates] Rsultat final:",{corners:k,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(k),this.fire("coordinates:updated",{corners:k,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return dn.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const t=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(qn.latLng(this._center.lat,this._center.lng+t)).x-r.x,o=nv([this._center.lng,this._center.lat],[this._center.lng+t,this._center.lat],{units:"meters"}),u=Math.abs(s/o);return isNaN(u)||u<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par dfaut"),1):u})}getRotatedCorners(){return dn.measure("Rectangle.getRotatedCorners",()=>{try{const t=this.getLatLngs();if(!t||!Array.isArray(t)||t.length===0){const r=this._width/2,i=this._height/2;return[qn.latLng(this._center.lat+i,this._center.lng-r),qn.latLng(this._center.lat+i,this._center.lng+r),qn.latLng(this._center.lat-i,this._center.lng+r),qn.latLng(this._center.lat-i,this._center.lng-r)]}return t[0]}catch(t){console.warn("Error in getRotatedCorners:",t);const r=this._width/2,i=this._height/2;return[qn.latLng(this._center.lat+i,this._center.lng-r),qn.latLng(this._center.lat+i,this._center.lng+r),qn.latLng(this._center.lat-i,this._center.lng+r),qn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return dn.measure("Rectangle.getMidPoints",()=>{try{const t=this.getRotatedCorners();if(!t||t.length<4){const i=this._width/2,s=this._height/2;return[qn.latLng(this._center.lat+s,this._center.lng),qn.latLng(this._center.lat,this._center.lng+i),qn.latLng(this._center.lat-s,this._center.lng),qn.latLng(this._center.lat,this._center.lng-i)]}if(!t.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(t[3],t[0]),this._getMidPoint(t[0],t[1]),this._getMidPoint(t[1],t[2]),this._getMidPoint(t[2],t[3])]}catch(t){console.warn("Error in getMidPoints:",t);const r=this._width/2,i=this._height/2;return[qn.latLng(this._center.lat+i,this._center.lng),qn.latLng(this._center.lat,this._center.lng+r),qn.latLng(this._center.lat-i,this._center.lng),qn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(t,r){return dn.measure("Rectangle._getMidPoint",()=>{if(!t||!r||typeof t.lat!="number"||typeof t.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return qn.latLng((t.lat+r.lat)/2,(t.lng+r.lng)/2)})}getCenter(){return dn.measure("Rectangle.getCenter",()=>this._center)}setCenter(t){dn.measure("Rectangle.setCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return dn.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(t,r=!1){dn.measure("Rectangle.setRotation",()=>{this._rotation=(t%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){dn.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return dn.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(t,r){dn.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Dbut de la mise  jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:t,newHeight:r}),this._width=t,this._height=r,console.log("[Rectangle][setDimensions] Mise  jour des coordonnes du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise  jour des proprits"),this.updateProperties(),console.log("[Rectangle][setDimensions] mission de l'vnement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(t,r){dn.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,f=-this._rotation*Math.PI/180,d=Math.cos(f),m=Math.sin(f),_=o*d-u*m,b=o*m+u*d,y=this._getPixelsPerMeter(),M=t===0||t===3?-1:1,k=t===0||t===1?1:-1,F=Math.max(Math.abs(_*2)/y,1),I=Math.max(Math.abs(b*2)/y,1),R=F*y/2,Y=I*y/2,ee=M*R*d-k*Y*m,he=M*R*m+k*Y*d,fe=qn.point(s.x-ee,s.y-he),ve=this._map.containerPointToLatLng(fe),Z=[qn.point(fe.x-R,fe.y+Y),qn.point(fe.x+R,fe.y+Y),qn.point(fe.x+R,fe.y-Y),qn.point(fe.x-R,fe.y-Y)].map(T=>{const N=T.x-fe.x,O=T.y-fe.y;return qn.point(fe.x+(N*d-O*m),fe.y+(N*m+O*d))}).map(T=>this._map.containerPointToLatLng(T));this._width=F,this._height=I,this._center=ve,this.setLatLngs(Z),this.fire("coordinates:updated",{corners:Z,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(t,r){dn.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,u=s.y-i.y,f=-this._rotation*Math.PI/180,d=Math.cos(f),m=Math.sin(f),_=o*d-u*m,b=o*m+u*d,y=this._getPixelsPerMeter();t%2===0?this._height=Math.abs(b*2)/y:this._width=Math.abs(_*2)/y,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(t){dn.measure("Rectangle.moveFromCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){dn.measure("Rectangle.updateProperties",()=>{var i,s,o;const t=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:t,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:t,midPoints:this.getMidPoints()})})}setName(t){dn.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return dn.measure("Rectangle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}generateHelperPoints(t,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){dn.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(u=>qn.circleMarker(u,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(t)),this._helperPoints.midPoints=o.map(u=>qn.circleMarker(u,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(t))})}clearHelperPoints(){dn.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){dn.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const t=this.getRotatedCorners(),r=this.getMidPoints();t.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(t){return dn.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],u=t.distanceTo(o);for(let f=1;f<s.length;f++){const d=t.distanceTo(s[f]);d<u&&(u=d,o=s[f])}return o})}toggleHelperPoints(t,r,i,s){dn.measure("Rectangle.toggleHelperPoints",()=>{r&&t?this.generateHelperPoints(t,i,s):this.clearHelperPoints()})}containsPoint(t){return dn.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const u=r[s].lng,f=r[s].lat,d=r[o].lng,m=r[o].lat;f>t.lat!=m>t.lat&&t.lng<(d-u)*(t.lat-f)/(m-f)+u&&(i=!i)}return i})}}var qi=(e=>(e.PRIVATE="private",e.COMPANY="company",e.EMPLOYEE="employee",e.VISITOR="visitor",e))(qi||{});const lh=Dp("notes",()=>{const e=Ft([]),n=Ft([]),t=rr(()=>T=>e.value.find(N=>N.id===T)),r=rr(()=>T=>{const N=e.value.find(O=>O.id===T);return N?N.color:"#6B7280"}),i=rr(()=>T=>n.value.filter(N=>N.columnId===T).sort((N,O)=>N.order-O.order)),s=rr(()=>e.value.find(T=>T.isDefault)||e.value[0]),o=rr(()=>[...e.value].sort((T,N)=>T.order-N.order)),u=rr(()=>T=>{const N=ta();if(!N.user)return!1;if(N.isAdmin)return!0;switch(T.accessLevel){case"private":return!0;case"company":return N.isAdmin||N.isEntreprise;case"employee":return N.isAdmin||N.isEntreprise||N.isSalarie;case"visitor":return N.isAdmin||N.isEntreprise||N.isSalarie||N.isVisiteur;default:return!1}}),f=rr(()=>n.value.filter(T=>u.value(T))),d=rr(()=>T=>f.value.filter(N=>N.columnId===T).sort((N,O)=>N.order-O.order));async function m(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const T=[{id:"1",title:"Ides",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:" faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Termines",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];e.value=T,console.log("[NotesStore][loadColumns] Colonnes fixes initialises:",e.value)}catch(T){throw console.error("[NotesStore][loadColumns] Erreur:",T),T}}async function _(T){console.log(`
[NotesStore][addColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function b(T,N){console.log(`
[NotesStore][updateColumn] Mise  jour locale de la colonne:`,T,N);try{const O=e.value.findIndex(z=>z.id===T);O!==-1&&(e.value[O]={...e.value[O],...N},console.log("[NotesStore][updateColumn] tat des colonnes aprs mise  jour:",e.value))}catch(O){throw console.error("[NotesStore][updateColumn] Erreur:",O),O}}async function y(T){console.log(`
[NotesStore][removeColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function M(T){console.log(`
[NotesStore][reorderColumns] FONCTION DSACTIVE - Le dplacement des colonnes n'est plus possible`)}function k(T){if(!T)return"private";switch(T.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accs inconnu: ${T}, utilisation de PRIVATE par dfaut`),"private"}}function F(T){if(!T.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const N=new Date().toISOString(),O=n.value.filter(G=>G.columnId===T.columnId),z=O.length>0?Math.max(...O.map(G=>G.order))+1:0,q=k(T.access_level);return console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",T.id,"et niveau d'accs:",q),n.value.push({...T,id:T.id,order:z,accessLevel:q,createdAt:N,updatedAt:N,comments:[],photos:[]}),T.id}function I(T,N){console.log(`
[NotesStore][updateNote] Mise  jour de la note:`,T,N);try{const O=n.value.findIndex(z=>z.id===T);O!==-1&&(N.color&&(N.style={...n.value[O].style,color:N.color,fillColor:N.color}),N.access_level&&(N.accessLevel=k(N.access_level),delete N.access_level),n.value[O]={...n.value[O],...N},console.log("[NotesStore][updateNote] Note mise  jour:",n.value[O]))}catch(O){throw console.error("[NotesStore][updateNote] Erreur:",O),O}}function R(T){n.value.findIndex(O=>O.id===T)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",T),n.value=n.value.filter(O=>O.id!==T)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",T)}function Y(T,N){const O=n.value.findIndex(z=>z.id===T);if(O!==-1){const z=n.value[O];if(z.columnId!==N){const G=n.value.filter(_e=>_e.columnId===N),oe=G.length>0?Math.max(...G.map(_e=>_e.order))+1:0,ie={...z,columnId:N,order:oe,updatedAt:new Date().toISOString()};n.value[O]=ie}else n.value[O]={...n.value[O],updatedAt:new Date().toISOString()}}}function ee(T,N){N.forEach((O,z)=>{const q=n.value.findIndex(G=>G.id===O&&G.columnId===T);q!==-1&&(n.value[q]={...n.value[q],order:z,updatedAt:new Date().toISOString()})})}function he(T){switch(T){case"private":return"Priv";case"company":return"Entreprise";case"employee":return"Salaris";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function fe(T,N){try{const O=ta();if(!O.user)throw new Error("Vous devez tre connect pour ajouter un commentaire");if(!O.isEntreprise&&!O.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!n.value.some(Ce=>Ce.id===T))throw new Error(`La note avec l'ID ${T} n'existe pas`);const G=(await Qs.addComment(T,N)).data,oe=n.value.findIndex(Ce=>Ce.id===T);if(oe===-1)return;const ie=n.value[oe];ie.comments||(ie.comments=[]);const _e={id:G.id,text:G.text,createdAt:G.created_at,userId:G.user,userName:G.user_name,userRole:G.user_role};return ie.comments.push(_e),ie.updatedAt=new Date().toISOString(),n.value[oe]={...ie},_e.id}catch(O){throw console.error("Erreur lors de l'ajout du commentaire:",O),O}}async function ve(T,N){try{const O=n.value.findIndex(G=>G.id===T);if(O===-1)throw new Error(`La note avec l'ID ${T} n'existe pas`);const z=n.value[O];if(!z.comments||z.comments.length===0)throw new Error("Aucun commentaire trouv pour cette note");if(!z.comments.some(G=>G.id===N))throw new Error(`Le commentaire avec l'ID ${N} n'existe pas`);await Qs.deleteComment(T,N),z.comments=z.comments.filter(G=>G.id!==N),z.updatedAt=new Date().toISOString(),n.value[O]={...z}}catch(O){throw console.error("Erreur lors de la suppression du commentaire:",O),O}}async function $(T,N){try{if(N.id&&N.image){const O=n.value.findIndex(G=>G.id===T);if(O===-1)return;const z=n.value[O];z.photos||(z.photos=[]);const q={id:N.id,url:N.image,caption:N.caption,createdAt:N.created_at};return z.photos.push(q),z.updatedAt=new Date().toISOString(),n.value[O]={...z},q.id}else{const O=new FormData;O.append("image",N.url),N.caption&&O.append("caption",N.caption);const q=(await Qs.addPhoto(T,O)).data,G=n.value.findIndex(_e=>_e.id===T);if(G===-1)return;const oe=n.value[G];oe.photos||(oe.photos=[]);const ie={id:q.id,url:q.image,caption:q.caption,createdAt:q.created_at};return oe.photos.push(ie),oe.updatedAt=new Date().toISOString(),n.value[G]={...oe},ie.id}}catch(O){throw console.error("Erreur lors de l'ajout de la photo:",O),O}}async function U(T,N){try{await Qs.deletePhoto(T,N);const O=n.value.findIndex(G=>G.id===T);if(O===-1){console.error("[NotesStore] Note non trouve pour la suppression de la photo");return}n.value[O].photos||(n.value[O].photos=[]);const z=n.value[O],q=(z.photos||[]).filter(G=>G.id!==N);n.value[O]={...z,photos:q,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprime avec succs, photos restantes:",q.length)}catch(O){throw console.error("Erreur lors de la suppression de la photo:",O),O}}async function Z(T,N,O){try{await Qs.updatePhoto(T,N,{caption:O});const z=n.value.findIndex(oe=>oe.id===T);if(z===-1||!n.value[z].photos)return;const q=n.value[z],G=q.photos.findIndex(oe=>oe.id===N);if(G===-1)return;q.photos[G].caption=O,q.updatedAt=new Date().toISOString(),n.value[z]={...q}}catch(z){throw console.error("Erreur lors de la mise  jour de la lgende:",z),z}}return{columns:e,notes:n,getColumnById:t,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:u,getAccessibleNotes:f,getAccessibleNotesByColumn:d,getAccessLevelLabel:he,loadColumns:m,addColumn:_,updateColumn:b,removeColumn:y,reorderColumns:M,addNote:F,updateNote:I,removeNote:R,moveNote:Y,reorderNotes:ee,addComment:fe,removeComment:ve,addPhoto:$,removePhoto:U,updatePhoto:Z}});class $c extends zt.Marker{constructor(t,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${r.color||"#2b6451"}" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" />
          <circle cx="12" cy="10" r="3" fill="white" />
        </svg>
      </div>
    `,u={icon:zt.divIcon({html:s,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]}),draggable:!1,autoPan:!0};super(t,u);Wt(this,"properties");Wt(this,"_planSaved",!1);Wt(this,"_isMoving",!1);this.properties={type:"Note",name:r.name||"Note golocalise",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||qi.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},console.log("[GeoNote][constructor] Note cre avec columnId:",this.properties.columnId),this.bindPopup(this.createPopupContent()),this.on("dblclick",this.onDoubleClick),window.addEventListener("geonote:updateStyle",f=>{const d=f.detail.noteId,m=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] vnement reu pour noteId:",d,"Comparaison avec ID backend:",m),d===m&&(console.log("[GeoNote][updateStyle] Correspondance trouve, mise  jour du style:",f.detail.style),this.setNoteStyle(f.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...f.detail.style}),this.bindPopup(this.createPopupContent()))}),window.addEventListener("geonote:update",f=>{const d=f.detail.noteId,m=this._dbId||this.properties.id;console.log("[GeoNote][update] vnement reu pour noteId:",d,"Comparaison avec ID backend:",m),d===m&&(console.log("[GeoNote][update] Correspondance trouve, mise  jour des proprits:",f.detail.properties),this.properties={...this.properties,name:f.detail.properties.name,description:f.detail.properties.description,columnId:f.detail.properties.columnId,accessLevel:f.detail.properties.accessLevel,style:f.detail.properties.style},this.setNoteStyle(f.detail.properties.style),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][update] Proprits mises  jour:",this.properties))}),console.log("[GeoNote][constructor] Note cre:",{location:t,name:this.properties.name,type:this.properties.type,style:this.properties.style})}createPopupContent(){const t=document.createElement("div");t.className="geo-note-popup",t.style.display="flex",t.style.flexDirection="column";const r=document.createElement("div");r.className="geo-note-header",t.appendChild(r);const i=document.createElement("div");i.className="geo-note-title",i.textContent=this.properties.name,r.appendChild(i);const s=document.createElement("div");s.className="geo-note-badges",r.appendChild(s);const o=document.createElement("div");o.className="geo-note-badge",o.style.backgroundColor=this.getColumnColor(this.properties.columnId),o.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5z" />
        <path d="M11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
      </svg>
      ${this.getColumnLabel(this.properties.columnId)}
    `,s.appendChild(o);const u=document.createElement("div");if(u.className="geo-note-badge",u.style.backgroundColor=this.getAccessLevelColor(this.properties.accessLevel),u.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
      </svg>
      ${this.getAccessLevelLabel(this.properties.accessLevel)}
    `,s.appendChild(u),this.properties.description&&this.properties.description.trim()!==""){const _=document.createElement("div");_.className="geo-note-content",t.appendChild(_);const b=document.createElement("div");b.className="geo-note-description",b.textContent=this.properties.description,_.appendChild(b)}const f=document.createElement("div");f.className="geo-note-buttons",f.style.display="flex",f.style.width="100%",f.style.marginTop="auto",f.style.borderTop="1px solid #E5E7EB",t.appendChild(f);const d=document.createElement("button");d.className="geo-note-edit-button",d.style.flex="1",d.style.height="36px",d.style.border="none",d.style.borderRight="1px solid #E5E7EB",d.style.background="transparent",d.style.color="#4B5563",d.style.fontSize="11px",d.style.fontWeight="500",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.cursor="pointer",d.style.padding="0",d.style.margin="0",d.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
      </svg>
      diter
    `,d.onclick=_=>{_.stopPropagation(),this.editNote()},f.appendChild(d);const m=document.createElement("button");return m.className="geo-note-open-button",m.style.flex="1",m.style.height="36px",m.style.border="none",m.style.background="transparent",m.style.color="#3B82F6",m.style.fontSize="11px",m.style.fontWeight="500",m.style.display="flex",m.style.alignItems="center",m.style.justifyContent="center",m.style.cursor="pointer",m.style.padding="0",m.style.margin="0",m.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
      </svg>
      Itinraire
    `,m.onclick=_=>{_.stopPropagation(),this.openInGoogleMaps()},f.appendChild(m),t}getColumnColor(t){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[t]||"#6B7280"}getColumnLabel(t){return{1:"Ides",2:" faire",3:"En cours",4:"Termines",5:"Autres"}[t]||"Colonne "+t}getAccessLevelLabel(t){switch(t){case qi.PRIVATE:return"Priv";case qi.COMPANY:return"Entreprise";case qi.EMPLOYEE:return"Salaris";case qi.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(t){switch(t){case qi.PRIVATE:return"#9CA3AF";case qi.COMPANY:return"#EF4444";case qi.EMPLOYEE:return"#F59E0B";case qi.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(t){zt.DomEvent.stopPropagation(t),this.editNote()}editNote(){this.closePopup();const t=this._dbId||this.properties.id||this._leaflet_id;console.log(`[GeoNote][editNote] dition de note - ID backend: ${this._dbId}, ID properties: ${this.properties.id}, ID Leaflet: ${this._leaflet_id}, ID utilis: ${t}`);const r={id:t,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] dition de note avec columnId:",r.columnId),console.log("[GeoNote] mission de l'vnement note:edit avec",r);const i=new CustomEvent("geonote:edit",{detail:{note:r,source:this}});window.dispatchEvent(i),this.fire("note:edit",{note:r,source:this})}openInGoogleMaps(){this.closePopup();const t=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${t},${r}`;window.open(i,"_blank")}updateProperties(){var o,u;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=qi.PRIVATE);const t=(o=this.getElement())==null?void 0:o.querySelector(".geo-note-marker"),r=t?window.getComputedStyle(t).color:"#2b6451",i=((u=this.properties.style)==null?void 0:u.radius)||12,s=this.properties.style||{};this.properties.style={...s,color:r,weight:2,fillColor:r,fillOpacity:.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category}}setNoteStyle(t){console.log("[GeoNote][setNoteStyle] Mise  jour du style:",t);const r=t.color||t.fillColor||"#2b6451",i=t.fillColor||t.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${i}" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" />
          <circle cx="12" cy="10" r="3" fill="white" />
        </svg>
      </div>
    `,o=zt.divIcon({html:s,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o);const u=t._accessLevel||t.accessLevel||this.properties.accessLevel,f=t.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:t.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:t.fillOpacity!==void 0?t.fillOpacity:this.properties.style.fillOpacity||.8,radius:t.radius||this.properties.style.radius||12,_accessLevel:u,accessLevel:u,category:f}),u&&(this.properties.accessLevel=u),f&&(this.properties.category=f),this.refreshIconStyle()}refreshIconStyle(){const t=this.getElement();t&&(t.style.display="none",t.offsetHeight,t.style.display="")}toBackendFormat(t){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:t,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(t){var f,d,m;this.properties.type="Note";const r=t.style?{...t.style,radius:t.style.radius||12}:this.properties.style,i=((f=t.style)==null?void 0:f._accessLevel)||((d=t.style)==null?void 0:d.accessLevel)||t.accessLevel||this.properties.accessLevel||qi.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accs rcupr:",i);const s=((m=t.style)==null?void 0:m.category)||t.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catgorie rcupre:",s);const o=t.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise  jour de note avec columnId:",o);const u={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:t.name||this.properties.name,description:t.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:u,comments:t.comments||this.properties.comments||[],photos:t.photos||this.properties.photos||[],order:t.order||this.properties.order||0,createdAt:t.createdAt||this.properties.createdAt,updatedAt:t.updatedAt||new Date().toISOString()},this.setNoteStyle(u),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][updateFromBackendData] Note mise  jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(t){var f,d,m,_,b,y,M,k;let r;if(typeof t.location=="object"&&!Array.isArray(t.location)&&t.location.type==="Point"){const F=t.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnes GeoJSON reues:",F),r=[F[1],F[0]]}else if(Array.isArray(t.location)&&t.location.length===2)r=t.location;else throw new Error("Les donnes de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Cration d'une note  partir des donnes:",t),console.log("[GeoNote][fromBackendData] Position utilise:",r);const i=((f=t.style)==null?void 0:f._accessLevel)||((d=t.style)==null?void 0:d.accessLevel)||t.accessLevel||qi.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accs rcupr:",i,"Style:",t.style);const s=((m=t.style)==null?void 0:m.category)||t.category||"forages";console.log("[GeoNote][fromBackendData] Catgorie rcupre:",s),t.accessLevel=i,t.category=s;const o=t.columnId||"1";console.log("[GeoNote][fromBackendData] Cration de note avec columnId:",o);const u=new $c(r,{name:t.name,description:t.description,columnId:o,accessLevel:i,category:t.category||"forages",color:(_=t.style)==null?void 0:_.color,weight:(b=t.style)==null?void 0:b.weight,fillColor:(y=t.style)==null?void 0:y.fillColor,fillOpacity:(M=t.style)==null?void 0:M.fillOpacity,radius:(k=t.style)==null?void 0:k.radius});return u.properties.type="Note",u.properties.comments=t.comments||[],u.properties.photos=t.photos||[],u.properties.order=t.order||0,u.properties.createdAt=t.createdAt||new Date().toISOString(),u.properties.updatedAt=t.updatedAt||new Date().toISOString(),t.style&&u.setNoteStyle(t.style),u.bindPopup(u.createPopupContent()),console.log("[GeoNote][fromBackendData] Note cre:",{location:r,name:u.properties.name,type:u.properties.type,category:u.properties.category,accessLevel:u.properties.accessLevel,style:u.properties.style}),u}async saveNote(t){if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties();const r={...this.properties.style,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},i={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:r,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};t&&(i.plan=t),console.log("[GeoNote][saveNote] Donnes  envoyer:",i);let s;return this._dbId?(s=(await Qs.updateNote(this._dbId,i)).data,console.log("[GeoNote][saveNote] Note mise  jour avec succs:",s)):(s=(await Qs.createNote(i)).data,console.log("[GeoNote][saveNote] Note cre avec succs:",s),this._dbId=s.id,lh().addNote({...s,id:s.id,columnId:s.column,accessLevel:s.access_level})),this._planSaved=!0,s.id}catch(r){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",r),Yl().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const t=localStorage.getItem("lastPlanId");t?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${t}`),this.saveNote(parseInt(t))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(t){this.setLatLng(t),this.fire("note:moved",{latlng:t,note:this}),this.bindPopup(this.createPopupContent()),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.closePopup(),this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}}function LI(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function SI(e){if(!e||typeof e!="object")return console.log("[DrawingStore] ElevationData invalide: pas un objet",{data:e}),!1;const n=Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2,t=typeof e.style=="object"&&e.style!==null,r=!e.elevationData||Array.isArray(e.elevationData)&&e.elevationData.every(i=>typeof i=="object"&&"distance"in i&&"elevation"in i);return n&&t&&r}function EI(e){return e&&Array.isArray(e.points)&&e.points.length>0&&Array.isArray(e.points[0])&&e.points[0].length===2}function bb(e){var n,t,r,i,s,o,u,f,d,m,_,b,y,M,k,F,I,R,Y,ee,he,fe,ve,$,U,Z,T;if(console.log("[DrawingStore] Conversion de la forme en lment",{type:(n=e.properties)==null?void 0:n.type,name:(r=(t=e.properties)==null?void 0:t.style)==null?void 0:r.name,properties:e.properties}),((i=e.properties)==null?void 0:i.type)==="Note"){const N=e.getLatLng();return{type_forme:"Note",data:{points:[[N.lng,N.lat]],style:{color:((s=e.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=e.properties.style)==null?void 0:o.weight)||3,opacity:((u=e.properties.style)==null?void 0:u.opacity)||1,fillColor:((f=e.properties.style)==null?void 0:f.fillColor)||"#2b6451",fillOpacity:((d=e.properties.style)==null?void 0:d.fillOpacity)||.2,name:((m=e.properties.style)==null?void 0:m.name)||""}}}}if(e instanceof Cf||((_=e.properties)==null?void 0:_.type)==="ElevationLine")return{type_forme:"ElevationLine",data:{points:e.getLatLngs().map(z=>[z.lng,z.lat]),style:{color:((b=e.properties.style)==null?void 0:b.color)||"#2b6451",weight:((y=e.properties.style)==null?void 0:y.weight)||4,opacity:((M=e.properties.style)==null?void 0:M.opacity)||.8,name:((k=e.properties.style)==null?void 0:k.name)||""},category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor",elevationData:e.properties.elevationData,minElevation:e.properties.minElevation,maxElevation:e.properties.maxElevation,elevationGain:e.properties.elevationGain,elevationLoss:e.properties.elevationLoss,averageSlope:e.properties.averageSlope,maxSlope:e.properties.maxSlope}};if(e instanceof vf||((F=e.properties)==null?void 0:F.type)==="Polygon")return{type_forme:"Polygon",data:{points:e.getLatLngs()[0].map(z=>[z.lng,z.lat]),style:{color:((I=e.properties.style)==null?void 0:I.color)||"#2b6451",weight:((R=e.properties.style)==null?void 0:R.weight)||3,opacity:((Y=e.properties.style)==null?void 0:Y.opacity)||1,fillColor:((ee=e.properties.style)==null?void 0:ee.fillColor)||"#2b6451",fillOpacity:((he=e.properties.style)==null?void 0:he.fillOpacity)||.2,name:((fe=e.properties.style)==null?void 0:fe.name)||""},category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor"}};if(e instanceof Bs||((ve=e.properties)==null?void 0:ve.type)==="Line")return{type_forme:"Line",data:{points:e.getLatLngs().map(z=>[z.lng,z.lat]),category:e.properties.category||"forages",accessLevel:e.properties.accessLevel||"visitor",style:{color:(($=e.properties.style)==null?void 0:$.color)||"#2b6451",weight:((U=e.properties.style)==null?void 0:U.weight)||3,opacity:((Z=e.properties.style)==null?void 0:Z.opacity)||1,name:((T=e.properties.style)==null?void 0:T.name)||""}}};throw new Error("Type de forme non reconnu")}function CI(e){var n,t,r,i,s,o,u,f,d,m,_,b,y,M,k,F,I,R,Y,ee,he,fe,ve,$,U,Z,T,N,O,z,q,G,oe,ie,_e,Ce,Te,J,H,Q,ue,se,pe;switch(console.log("[DrawingStore] Conversion de l'lment stock en forme",{element:e}),e.type_forme){case"Polygon":{const K=e.data;if(!LI(K))return console.error("[DrawingStore] Donnes invalides pour Polygon"),null;const D=K.points.map(Ge=>qn.latLng(Ge[1],Ge[0])),ke=((n=K.style)==null?void 0:n._accessLevel)||((t=K.style)==null?void 0:t.accessLevel)||K.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accs rcupr:",ke,"Style:",K.style),K.accessLevel=ke;const Me=new vf([D],{color:((r=K.style)==null?void 0:r.color)||"#2b6451",weight:((i=K.style)==null?void 0:i.weight)||3,opacity:((s=K.style)==null?void 0:s.opacity)||1,fillColor:((o=K.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((u=K.style)==null?void 0:u.fillOpacity)||.2,dashArray:((f=K.style)==null?void 0:f.dashArray)||"",name:((d=K.style)==null?void 0:d.name)||"",category:K.category||"forages",accessLevel:ke});return Me.updateProperties(),Me}case"ElevationLine":{const K=e.data;if(!SI(K))return console.error("[DrawingStore] Donnes invalides pour ElevationLine"),null;const D=K.points.map(Ge=>qn.latLng(Ge[1],Ge[0])),ke=((m=K.style)==null?void 0:m._accessLevel)||((_=K.style)==null?void 0:_.accessLevel)||K.accessLevel||"visitor";console.log("[DrawingStore] ElevationLine - Niveau d'accs rcupr:",ke,"Style:",K.style),K.accessLevel=ke;const Me=new Cf(D,{color:((b=K.style)==null?void 0:b.color)||"#2b6451",weight:((y=K.style)==null?void 0:y.weight)||4,opacity:((M=K.style)==null?void 0:M.opacity)||.8,name:((k=K.style)==null?void 0:k.name)||"",category:K.category||"forages",accessLevel:ke});return Me.properties={type:"ElevationLine",category:K.category||"forages",accessLevel:ke,style:{...K.style||{},name:((F=K.style)==null?void 0:F.name)||""},elevationData:K.elevationData,minElevation:K.minElevation,maxElevation:K.maxElevation,elevationGain:K.elevationGain,elevationLoss:K.elevationLoss,averageSlope:K.averageSlope,maxSlope:K.maxSlope,dataSource:"restored"},K.elevationData&&Me.updateElevationProfile(),console.log("[DrawingStore] ElevationLine restored:",{points:D.length,hasElevationData:!!K.elevationData,name:(I=K.style)==null?void 0:I.name,properties:Me.properties}),Me}case"Line":{const K=e.data;if(!EI(K))return console.error("[DrawingStore] Donnes invalides pour Ligne"),null;const D=K.points.map(Ge=>qn.latLng(Ge[1],Ge[0])),ke=((R=K.style)==null?void 0:R._accessLevel)||((Y=K.style)==null?void 0:Y.accessLevel)||K.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accs rcupr:",ke,"Style:",K.style),K.accessLevel=ke;const Me=new Bs(D,{...K.style||{},name:((ee=K.style)==null?void 0:ee.name)||"",category:K.category||"forages",accessLevel:ke});return Me.updateProperties(),Me}case"Rectangle":{const K=e.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:K,bounds:K.bounds,width:K.width,height:K.height,rotation:K.rotation}),!K.bounds)return console.error("[DrawingStore] Donnes de bounds manquantes pour Rectangle"),null;const D=new qn.LatLngBounds(qn.latLng(K.bounds.southWest[1],K.bounds.southWest[0]),qn.latLng(K.bounds.northEast[1],K.bounds.northEast[0])),ke=new ga(D,{color:((he=K.style)==null?void 0:he.color)||"#2b6451",weight:((fe=K.style)==null?void 0:fe.weight)||3,opacity:((ve=K.style)==null?void 0:ve.opacity)||1,fillColor:(($=K.style)==null?void 0:$.fillColor)||"#2b6451",fillOpacity:((U=K.style)==null?void 0:U.fillOpacity)||.2,dashArray:((Z=K.style)==null?void 0:Z.dashArray)||"",name:((T=K.style)==null?void 0:T.name)||"",width:K.width,height:K.height});return K.rotation&&ke.setRotation(K.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restaur:",{bounds:ke.getBounds(),dimensions:ke.getDimensions(),properties:ke.properties}),ke}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle  partir de l'API",{id:e.id,data:e.data,hasName:((O=(N=e.data)==null?void 0:N.style)==null?void 0:O.name)!==void 0,name:(q=(z=e.data)==null?void 0:z.style)==null?void 0:q.name});const K=e.data;if(!K.center||!K.radius)return console.error("[DrawingStore] Donnes invalides pour Circle"),null;const D=qn.circle([K.center[1],K.center[0]],{color:((G=K.style)==null?void 0:G.color)||"#2b6451",weight:((oe=K.style)==null?void 0:oe.weight)||3,opacity:((ie=K.style)==null?void 0:ie.opacity)||1,fillColor:((_e=K.style)==null?void 0:_e.fillColor)||"#2b6451",fillOpacity:((Ce=K.style)==null?void 0:Ce.fillOpacity)||.2,dashArray:((Te=K.style)==null?void 0:Te.dashArray)||"",radius:K.radius});return D.properties={type:"Circle",radius:K.radius,diameter:K.radius*2,surface:Math.PI*K.radius*K.radius,perimeter:2*Math.PI*K.radius,style:{...K.style||{},name:((J=K.style)==null?void 0:J.name)||""}},console.log("[DrawingStore] Cercle cr:",{centerType:typeof K.center,center:K.center,radius:K.radius,style:D.properties.style,name:D.properties.style.name}),D}case"Note":{console.log("[DrawingStore] Traitement d'une Note  partir de l'API",{id:e.id,data:e.data});const K=e.data;if(!K.location)return console.error("[DrawingStore] Donnes invalides pour Note"),null;try{const D={location:K.location,name:K.name||"Note golocalise",description:K.description||"",columnId:K.columnId||"en-cours",accessLevel:K.accessLevel||"private",category:K.category||"forages",style:{color:((H=K.style)==null?void 0:H.color)||"#2b6451",weight:((Q=K.style)==null?void 0:Q.weight)||2,fillColor:((ue=K.style)==null?void 0:ue.fillColor)||"#2b6451",fillOpacity:((se=K.style)==null?void 0:se.fillOpacity)||.8,radius:((pe=K.style)==null?void 0:pe.radius)||12},comments:K.comments||[],photos:K.photos||[],order:K.order||0,createdAt:K.createdAt||new Date().toISOString(),updatedAt:K.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Donnes prpares pour la note:",D);const ke=$c.fromBackendData(D);return ke._dbId=e.id,console.log("[DrawingStore] Note cre:",{id:e.id,location:D.location,name:D.name,type:ke.properties.type}),ke}catch(D){return console.error("[DrawingStore] Erreur lors de la cration de la Note:",D),null}}default:return console.warn("[DrawingStore] Type non gr pour la restauration:",e.type_forme),null}}const fd=Dp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:vd()}),getters:{hasUnsavedChanges:e=>e.unsavedChanges,getCurrentElements:e=>e.elements,getSelectedElement:e=>e.selectedElement,getCurrentTool:e=>e.currentTool,getCurrentStyle:e=>e.currentStyle,getLastUsedType:e=>e.lastUsedType,getFilters:e=>e.filters,getFilteredElements:e=>{if(e.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun lment dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Dbut du filtrage avec",{totalElements:e.elements.length,filters:JSON.stringify({accessLevels:e.filters.accessLevels,categories:e.filters.categories,shapeTypes:e.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] lments dans le store:",e.elements.map(t=>({id:t.id,type_forme:t.type_forme,data:t.data?JSON.stringify(t.data):null})));const n=e.elements.filter(t=>{var f,d;if(console.log(`[DrawingStore][getFilteredElements] Vrification de l'lment ${t.id} (${t.type_forme})`),!(t.type_forme in e.filters.shapeTypes?e.filters.shapeTypes[t.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${t.id} filtr par type: ${t.type_forme} (non visible)`),!1;const i=((f=t.data)==null?void 0:f.category)||"default";if(!(i in e.filters.categories?e.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${t.id} filtr par catgorie: ${i} (non visible)`),!1;const o=((d=t.data)==null?void 0:d.accessLevel)||"visitor";let u=!0;return o==="company"?u=e.filters.accessLevels.company:o==="employee"?u=e.filters.accessLevels.employee:o==="visitor"&&(u=e.filters.accessLevels.visitor),u?(console.log(`[DrawingStore][getFilteredElements] lment ${t.id} visible: type=${t.type_forme}, catgorie=${i}, accs=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] lment ${t.id} filtr par niveau d'accs: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Rsultat du filtrage:",{total:e.elements.length,filtered:n.length,filteredIds:n.map(t=>t.id)}),n}},actions:{setCurrentPlan(e){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=e,e===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(e){var t;const n=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un lment",{element:e,isLeafletLayer:e instanceof qn.Layer,hasProperties:!!e.properties,properties:e.properties,type:(t=e.properties)==null?void 0:t.type}),e instanceof qn.Layer&&e.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>bb(e),"DrawingStore");console.log("[DrawingStore] lment converti avant ajout",{original:e,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!e.type_forme&&this.lastUsedType&&(e.type_forme=this.lastUsedType),this.elements.push(e);this.unsavedChanges=!0}finally{n()}},updateElement(e){const n=this.elements.findIndex(t=>t.id===e.id);if(n!==-1){const t=this.elements[n].type_forme;this.elements[n]={...e,type_forme:t},this.unsavedChanges=!0}},removeElement(e){const n=this.elements.findIndex(t=>t.id===e);n!==-1&&(this.elements.splice(n,1),this.unsavedChanges=!0)},selectElement(e){this.selectedElement=e},setCurrentTool(e){this.currentTool=e,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(e)&&(this.lastUsedType=e)},setCurrentStyle(e){if(!e||Object.keys(e).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...e}},updateFilters(e){if(console.log("[DrawingStore][updateFilters] Mise  jour des filtres:",JSON.stringify(e,null,2)),console.log("[DrawingStore][updateFilters] Filtres avant mise  jour:",JSON.stringify(this.filters,null,2)),e.accessLevels){const n={...this.filters.accessLevels};this.filters.accessLevels={...this.filters.accessLevels,...e.accessLevels},console.log("[DrawingStore][updateFilters] Niveaux d'accs mis  jour:",{avant:n,aprs:this.filters.accessLevels})}if(e.categories){const n={...this.filters.categories};this.filters.categories={...this.filters.categories,...e.categories},console.log("[DrawingStore][updateFilters] Catgories mises  jour:",{avant:n,aprs:this.filters.categories});const t=Object.keys(e.categories).filter(r=>n[r]!==this.filters.categories[r]);if(t.length>0){console.log(`[DrawingStore][updateFilters] Catgories modifies: ${t.join(", ")}`);const r=t.filter(i=>n[i]===!1&&this.filters.categories[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Catgories ractives: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}})))}}if(e.shapeTypes){const n={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...e.shapeTypes},console.log("[DrawingStore][updateFilters] Types de formes mis  jour:",{avant:n,aprs:this.filters.shapeTypes});const t=Object.keys(e.shapeTypes).filter(r=>n[r]!==this.filters.shapeTypes[r]);if(t.length>0){console.log(`[DrawingStore][updateFilters] Types de formes modifis: ${t.join(", ")}`);const r=t.filter(i=>n[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Types de formes ractivs: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}})))}}console.log("[DrawingStore][updateFilters] Filtres mis  jour:",JSON.stringify(this.filters,null,2)),console.log("[DrawingStore][updateFilters] mission de l'event filtersChanged"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(e){const n=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===e&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${e} dj charg avec ${this.elements.length} lments`),n(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Dbut du chargement du plan",{planId:e});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>Vn.get(`/plans/${e}/`),"DrawingStore")).data;return console.log("[DrawingStore] Donnes du plan reues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,u,f;console.log(`[DrawingStore] Analyse dtaille forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(u=i.data)!=null&&u.center?typeof i.data.center:"undefined",center:(f=i.data)==null?void 0:f.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stocke",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme dj au format lment",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=CI(i);if(o)return console.log("[DrawingStore] Forme convertie avec succs",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),bb(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${e} - Charg ${this.elements.length} lments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=e,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des prfrences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(t){throw console.error("[DrawingStore] Erreur lors du chargement des lments:",t),this.error="Erreur lors du chargement des lments du plan",t}finally{this.loading=!1,n()}},async saveToPlan(e,n){const t=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=e||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Dbut de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:n==null?void 0:n.elementsToDelete}),!r)throw new Error("Aucun plan slectionn pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(f=>({...f,type_forme:f.type_forme||this.lastUsedType})),"DrawingStore"),s=(n==null?void 0:n.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,u=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>Vn.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const f=new Set(s);return u.data.formes.filter(d=>!f.has(d.id)).map(d=>({...d,type_forme:d.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] lments aprs filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,u.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,t()}}}}),PI={class:"h-full flex flex-col bg-white"},MI={class:"border-b border-gray-200"},AI={class:"flex -mb-px"},kI={class:"flex-1 overflow-y-auto"},TI={key:0,class:"p-3"},NI={class:"grid grid-cols-4 gap-1.5 mb-4"},DI=["onClick","title"],II=["innerHTML"],OI={key:1,class:"my-4 border-t border-gray-200"},BI={key:2,class:"mt-4"},RI={key:0,class:"mb-4"},FI={class:"mb-4"},jI={class:"mb-4"},$I={class:"grid grid-cols-1 gap-4"},zI={key:0,class:"space-y-1"},UI={class:"flex justify-between items-center"},VI={class:"text-sm font-medium text-gray-500"},GI={class:"flex justify-between items-center"},HI={class:"text-sm font-medium text-gray-500"},qI={class:"text-sm font-medium text-gray-500"},WI={class:"flex flex-col space-y-2 w-full"},ZI={class:"flex justify-between items-center"},KI={class:"text-sm font-medium text-gray-500 ml-2"},YI={class:"flex justify-between items-center"},JI={class:"text-sm font-medium text-gray-500 ml-2"},XI={class:"flex justify-between items-center"},QI={class:"text-sm font-medium text-gray-500 ml-2"},eO={class:"flex justify-between items-center"},tO={class:"text-sm font-medium text-gray-500 ml-2"},nO={class:"flex justify-between items-center"},rO={class:"text-sm font-medium text-gray-500 ml-2"},iO={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},oO={ref:"elevationCanvas"},sO={key:1,class:"p-3"},aO={class:"grid grid-cols-6 gap-2 mb-4"},lO=["onClick","title"],uO={key:0,class:"space-y-4"},cO={class:"flex items-center gap-4"},fO={class:"flex items-center gap-2"},hO={class:"flex items-center gap-4"},dO=["value"],pO={key:0,class:"flex items-center gap-4"},gO={class:"flex items-center gap-2"},mO={key:1,class:"space-y-4"},vO={class:"flex items-center gap-4"},yO={class:"flex items-center gap-2"},_O={class:"flex items-center gap-4"},bO={class:"flex items-center gap-2"},wO={key:2,class:"p-3 space-y-4"},xO={class:"space-y-2"},LO={class:"space-y-2"},SO={class:"space-y-1"},EO={class:"flex items-center"},CO={class:"flex items-center"},PO={class:"flex items-center"},MO={class:"flex items-center"},AO={class:"flex items-center"},kO={class:"flex items-center"},TO={class:"space-y-2"},NO={class:"space-y-1"},DO={class:"flex items-center"},IO={class:"flex items-center"},OO={class:"flex items-center"},BO={class:"flex items-center"},RO={key:0,class:"p-3 border-t border-gray-200"},FO={class:"mt-3"},jO={class:"mb-4"},$O={class:"grid grid-cols-2 gap-2"},zO={class:"grid grid-cols-2 gap-2"},UO=Qo({__name:"DrawingTools",props:{currentTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]}},emits:["tool-change","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(e,{emit:n}){const t=e,r=fd(),i=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimtrique"},{type:"Note",label:"Note golocalise"}],s=K=>{switch(K){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"ElevationLine":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 20h18l-3-3l-4 4l-4-7l-4 4l-3-3"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},o=Ft("tools");oo(o,(K,D)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:K,oldTab:D}),K==="filters"&&D!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage  l'onglet filtres"),console.log("[DrawingTools][watch activeTab] tat actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] tat actuel des filtres locaux:",JSON.stringify({accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},null,2)),t.selectedShape&&(console.log("[DrawingTools][watch activeTab] Dslection de la forme actuelle lors du passage  l'onglet filtres"),se("tool-change","")),setTimeout(()=>{Ce()},0)),D==="filters"&&K!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] tat des filtres locaux avant application:",JSON.stringify({accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},null,2)),Ce())});const u=Ft({samplePoints:!0,circleSections:!0}),f=Ft("#2b6451"),d=Ft(2),m=Ft("solid"),_=Ft("#2b6451"),b=Ft(.2),y=Ft(!0),M=Ft(""),k=Ft("default"),F=Ft("visitor"),I=Ft({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),R=Ft({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),Y=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],ee=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointills"}],he=Ft("company"),fe=Jl({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),ve=K=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accs: ${K}`),he.value=K,K==="company"?(fe.accessLevels.company=!0,fe.accessLevels.employee=!1,fe.accessLevels.visitor=!1):K==="employee"?(fe.accessLevels.company=!1,fe.accessLevels.employee=!0,fe.accessLevels.visitor=!1):K==="visitor"&&(fe.accessLevels.company=!1,fe.accessLevels.employee=!1,fe.accessLevels.visitor=!0),Ce()},$=K=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accs: ${K}`),t.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Dslection de la forme actuelle"),se("tool-change","")),ve(K)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const U=rr(()=>t.selectedShape&&t.selectedShape.properties||null),Z=K=>{u.value[K]=!u.value[K]},T=K=>{f.value=K,_.value=K,N({strokeColor:K,fillColor:K})},N=K=>{t.selectedShape&&se("style-update",K)},O=()=>{t.selectedShape&&se("properties-update",{name:M.value})},z=()=>{t.selectedShape&&se("properties-update",{category:k.value})},q=()=>{t.selectedShape&&se("properties-update",{accessLevel:F.value})},G=()=>{var K;!t.selectedShape||((K=U.value)==null?void 0:K.type)!=="ElevationLine"||se("style-update",{samplePointStyle:I.value})},oe=()=>{var K;!t.selectedShape||((K=U.value)==null?void 0:K.type)!=="ElevationLine"||se("style-update",{minMaxPointStyle:R.value})},ie=()=>{console.log("[DrawingTools][resetFilters] Dbut de la rinitialisation des filtres"),console.log("[DrawingTools][resetFilters] tat actuel des filtres:",JSON.stringify({accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},null,2));const K={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres  appliquer:",JSON.stringify(K,null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres locaux"),fe.accessLevels.company=!0,fe.accessLevels.employee=!0,fe.accessLevels.visitor=!0,fe.categories.forages=!0,fe.categories.clients=!0,fe.categories.entrepots=!0,fe.categories.livraisons=!0,fe.categories.cultures=!0,fe.categories.parcelles=!0,fe.shapeTypes.Polygon=!0,fe.shapeTypes.Line=!0,fe.shapeTypes.ElevationLine=!0,fe.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux aprs mise  jour:",JSON.stringify({accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres dans le store"),r.updateFilters(K),console.log("[DrawingTools][resetFilters] mission de l'event filter-change"),se("filter-change",K),console.log("[DrawingTools][resetFilters] Mise  jour force de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres rinitialiss avec succs")},_e=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Dbut de la rinitialisation des filtres avec dslection"),Q(),ie(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres rinitialiss et forme dslectionne avec succs")},Ce=()=>{const K={...fe.accessLevels},D={...fe.categories},ke={...fe.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:K,categories:D,shapeTypes:ke},null,2));const Me={accessLevels:K,categories:D,shapeTypes:ke};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(Me,null,2)),r.updateFilters(Me),console.log("[DrawingTools][applyFilters] mission de l'event filter-change"),se("filter-change",Me),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise  jour force de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:Me}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqus avec succs")},Te=K=>`${Math.round(K)} m`,J=K=>K>=1e4?`${(K/1e4).toFixed(2)} ha`:`${Math.round(K)} m`,H=K=>`${K.toFixed(1)}%`,Q=()=>{t.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Dslection de la forme actuelle"),se("tool-change",""))},ue=()=>{Q(),o.value="filters"},se=n;wp(()=>{var K,D,ke,Me,Ge,ce,te;if(t.selectedShape){console.log("[DrawingTools][watchEffect] Mise  jour des proprits pour la forme slectionne:",{type:t.selectedShape.type,properties:t.selectedShape.properties,options:t.selectedShape.options,layer:(K=t.selectedShape.layer)==null?void 0:K._leaflet_id});const ye=t.selectedShape.options||{};f.value=ye.color||"#2b6451",d.value=ye.weight||3,m.value=ye.dashArray?"dashed":"solid",_.value=ye.fillColor||"#2b6451",b.value=ye.fillOpacity||.2;const de=t.selectedShape.type||((D=t.selectedShape.properties)==null?void 0:D.type)||"";y.value=de!=="Line",console.log("[DrawingTools][watchEffect] Type de forme dtect:",de),M.value=((ke=t.selectedShape.properties)==null?void 0:ke.name)||"",k.value=((Me=t.selectedShape.properties)==null?void 0:Me.category)||"forages",F.value=((Ge=t.selectedShape.properties)==null?void 0:Ge.accessLevel)||"visitor",de==="ElevationLine"&&((ce=t.selectedShape.properties)!=null&&ce.samplePointStyle&&(I.value={...t.selectedShape.properties.samplePointStyle}),(te=t.selectedShape.properties)!=null&&te.minMaxPointStyle&&(R.value={...t.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Proprits mises  jour avec succs")}}),ps(()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const K=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...K.accessLevels},categories:{...K.categories},shapeTypes:{...K.shapeTypes}},null,2)),fe.accessLevels.company=K.accessLevels.company,fe.accessLevels.employee=K.accessLevels.employee,fe.accessLevels.visitor=K.accessLevels.visitor,fe.categories.forages=K.categories.forages,fe.categories.clients=K.categories.clients,fe.categories.entrepots=K.categories.entrepots,fe.categories.livraisons=K.categories.livraisons,fe.categories.cultures=K.categories.cultures,fe.categories.parcelles=K.categories.parcelles,fe.shapeTypes.Polygon=K.shapeTypes.Polygon,fe.shapeTypes.Line=K.shapeTypes.Line,fe.shapeTypes.ElevationLine=K.shapeTypes.ElevationLine,fe.shapeTypes.Note=K.shapeTypes.Note,console.log("[DrawingTools][onMounted] Filtres locaux aprs initialisation:",JSON.stringify({accessLevels:{...fe.accessLevels},categories:{...fe.categories},shapeTypes:{...fe.shapeTypes}},null,2))}),oo(fe,(K,D)=>{console.log("[DrawingTools][watch filters] Changement dtect:",{activeTab:o.value,newFilters:JSON.stringify({accessLevels:K.accessLevels,categories:K.categories,shapeTypes:K.shapeTypes}),oldFilters:JSON.stringify({accessLevels:D.accessLevels,categories:D.categories,shapeTypes:D.shapeTypes})});const ke=Object.keys(K.accessLevels).filter(te=>D.accessLevels[te]!==K.accessLevels[te]),Me=Object.keys(K.categories).filter(te=>D.categories[te]!==K.categories[te]),Ge=Object.keys(K.shapeTypes).filter(te=>D.shapeTypes[te]!==K.shapeTypes[te]),ce=ke.length>0||Me.length>0||Ge.length>0;console.log("[DrawingTools][watch filters] Diffrences dtectes:",{accessLevelsDiff:ke,categoriesDiff:Me,shapeTypesDiff:Ge,hasChanges:ce}),o.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),Ce()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const pe=K=>{se("tool-change",t.currentTool===K?"":K),window.innerWidth<768&&se("close-drawer")};return(K,D)=>{var ke,Me,Ge,ce;return Fe(),Ve("div",PI,[D[94]||(D[94]=S("div",{class:"p-3 bg-gray-50 border-b border-gray-200 flex justify-between items-center md:flex hidden"},[S("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),S("div",MI,[S("nav",AI,[S("button",{onClick:D[0]||(D[0]=te=>o.value="tools"),class:Gi([o.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},D[44]||(D[44]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),S("span",null,"Outils",-1)]),2),e.selectedShape&&((ke=e.selectedShape.properties)==null?void 0:ke.type)!=="Note"?(Fe(),Ve("button",{key:0,onClick:D[1]||(D[1]=te=>o.value="style"),class:Gi([o.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},D[45]||(D[45]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),S("span",null,"Style",-1)]),2)):nn("",!0),S("button",{onClick:ue,class:Gi([o.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},D[46]||(D[46]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),S("span",null,"Filtres",-1)]),2)])]),S("div",kI,[o.value==="tools"?(Fe(),Ve("div",TI,[S("div",NI,[(Fe(!0),Ve(Mn,null,br(i.filter(te=>te.type!=="delete"),te=>(Fe(),Ve("button",{key:te.type,class:Gi(["flex items-center justify-center p-2 rounded-md border",{"bg-blue-50 border-blue-300 text-blue-700 shadow-sm":e.currentTool===te.type}]),onClick:ye=>pe(te.type),title:te.label},[S("span",{class:"icon",innerHTML:s(te.type)},null,8,II)],10,DI))),128))]),e.selectedShape?(Fe(),Ve("button",{key:0,class:Gi(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":e.currentTool==="delete"}]),onClick:D[2]||(D[2]=te=>K.$emit("delete-shape")),title:"Supprimer la forme"},D[47]||(D[47]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),S("span",{class:"text-sm"},"Supprimer",-1)]),2)):nn("",!0),e.selectedShape&&U.value?(Fe(),Ve("div",OI)):nn("",!0),e.selectedShape&&U.value?(Fe(),Ve("div",BI,[U.value.type!=="Note"?(Fe(),Ve("div",RI,[D[48]||(D[48]=S("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),Nn(S("input",{type:"text",id:"shapeName","onUpdate:modelValue":D[3]||(D[3]=te=>M.value=te),onChange:O,placeholder:"Donnez un nom  cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[Zr,M.value]])])):nn("",!0),S("div",FI,[D[50]||(D[50]=S("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catgorie",-1)),Nn(S("select",{id:"shapeCategory","onUpdate:modelValue":D[4]||(D[4]=te=>k.value=te),onChange:z,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},D[49]||(D[49]=[zu('<option value="forages" data-v-cb7f32f1>Forages</option><option value="clients" data-v-cb7f32f1>Clients</option><option value="entrepots" data-v-cb7f32f1>Entrepts</option><option value="livraisons" data-v-cb7f32f1>Lieux de livraison</option><option value="cultures" data-v-cb7f32f1>Cultures</option><option value="parcelles" data-v-cb7f32f1>Noms des parcelles</option><option value="default" data-v-cb7f32f1>Autre</option>',7)]),544),[[so,k.value]])]),S("div",jI,[D[52]||(D[52]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accs",-1)),D[53]||(D[53]=S("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Dfinit qui peut voir cet lment sur la carte. ",-1)),Nn(S("select",{id:"accessLevel","onUpdate:modelValue":D[5]||(D[5]=te=>F.value=te),onChange:q,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},D[51]||(D[51]=[S("option",{value:"company"},"Entreprise uniquement",-1),S("option",{value:"employee"},"Entreprise et salaris",-1),S("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[so,F.value]])]),S("div",$I,[U.value.type==="Polygon"?(Fe(),Ve("div",zI,[S("div",UI,[D[54]||(D[54]=S("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),S("span",VI,It(J(U.value.surface||0)),1)]),S("div",GI,[D[55]||(D[55]=S("span",{class:"text-sm font-semibold text-gray-700"},"Primtre :",-1)),S("span",HI,It(Te(U.value.perimeter||0)),1)])])):U.value.type==="Line"?(Fe(),Ve(Mn,{key:1},[D[56]||(D[56]=S("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),S("span",qI,It(Te(U.value.length||0)),1)],64)):U.value.type==="ElevationLine"?(Fe(),Ve(Mn,{key:2},[S("div",WI,[S("div",ZI,[D[57]||(D[57]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),S("span",KI,It(Te(U.value.length||0)),1)]),S("div",YI,[D[58]||(D[58]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel + :",-1)),S("span",JI,It(Te(U.value.elevationGain||0)),1)]),S("div",XI,[D[59]||(D[59]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel - :",-1)),S("span",QI,It(Te(U.value.elevationLoss||0)),1)]),S("div",eO,[D[60]||(D[60]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),S("span",tO,It(H(U.value.averageSlope||0)),1)]),S("div",nO,[D[61]||(D[61]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),S("span",rO,It(H(U.value.maxSlope||0)),1)])]),S("div",iO,[S("canvas",oO,null,512)],512)],64)):nn("",!0)])])):nn("",!0)])):nn("",!0),o.value==="style"&&e.selectedShape&&((Me=e.selectedShape.properties)==null?void 0:Me.type)!=="Note"?(Fe(),Ve("div",sO,[S("div",aO,[(Fe(),Ve(Mn,null,br(Y,te=>S("button",{key:te,class:"w-8 h-8 rounded-full",style:El({backgroundColor:te}),onClick:ye=>T(te),title:te},null,12,lO)),64))]),((Ge=U.value)==null?void 0:Ge.type)!=="TextRectangle"?(Fe(),Ve("div",uO,[S("div",cO,[D[62]||(D[62]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),S("div",fO,[Nn(S("input",{type:"color","onUpdate:modelValue":D[6]||(D[6]=te=>f.value=te),class:"w-16 h-8 rounded border",onChange:D[7]||(D[7]=te=>N({strokeColor:f.value})),title:"Couleur du contour"},null,544),[[Zr,f.value]]),Nn(S("input",{type:"range","onUpdate:modelValue":D[8]||(D[8]=te=>d.value=te),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:D[9]||(D[9]=te=>N({strokeWidth:d.value})),title:"paisseur du contour"},null,544),[[Zr,d.value]])])]),S("div",hO,[D[63]||(D[63]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),Nn(S("select",{"onUpdate:modelValue":D[10]||(D[10]=te=>m.value=te),class:"w-full rounded border",onChange:D[11]||(D[11]=te=>N({strokeStyle:m.value}))},[(Fe(),Ve(Mn,null,br(ee,te=>S("option",{key:te.value,value:te.value},It(te.label),9,dO)),64))],544),[[so,m.value]])]),y.value?(Fe(),Ve("div",pO,[D[64]||(D[64]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),S("div",gO,[Nn(S("input",{type:"color","onUpdate:modelValue":D[12]||(D[12]=te=>_.value=te),class:"w-16 h-8 rounded border",onChange:D[13]||(D[13]=te=>N({fillColor:_.value})),title:"Couleur de remplissage"},null,544),[[Zr,_.value]]),Nn(S("input",{type:"range","onUpdate:modelValue":D[14]||(D[14]=te=>b.value=te),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:D[15]||(D[15]=te=>N({fillOpacity:b.value})),title:"Opacit du remplissage"},null,544),[[Zr,b.value]])])])):nn("",!0)])):nn("",!0),((ce=U.value)==null?void 0:ce.type)==="TextRectangle"?(Fe(),Ve("div",mO,[S("div",vO,[D[65]||(D[65]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),S("div",yO,[Nn(S("input",{type:"color","onUpdate:modelValue":D[16]||(D[16]=te=>f.value=te),class:"w-16 h-8 rounded border",onChange:D[17]||(D[17]=te=>N({strokeColor:f.value})),title:"Couleur du contour"},null,544),[[Zr,f.value]]),Nn(S("input",{type:"range","onUpdate:modelValue":D[18]||(D[18]=te=>d.value=te),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:D[19]||(D[19]=te=>N({strokeWidth:d.value})),title:"paisseur du contour"},null,544),[[Zr,d.value]])])]),S("div",_O,[D[66]||(D[66]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),S("div",bO,[Nn(S("input",{type:"color","onUpdate:modelValue":D[20]||(D[20]=te=>_.value=te),class:"w-16 h-8 rounded border",onChange:D[21]||(D[21]=te=>N({fillColor:_.value})),title:"Couleur de remplissage"},null,544),[[Zr,_.value]]),Nn(S("input",{type:"range","onUpdate:modelValue":D[22]||(D[22]=te=>b.value=te),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:D[23]||(D[23]=te=>N({fillOpacity:b.value})),title:"Opacit du remplissage"},null,544),[[Zr,b.value]])])])])):nn("",!0)])):nn("",!0),o.value==="filters"?(Fe(),Ve("div",wO,[S("div",xO,[D[69]||(D[69]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accs",-1)),D[70]||(D[70]=S("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Slectionnez votre niveau d'accs pour filtrer les lments visibles sur la carte. ",-1)),S("div",null,[Nn(S("select",{"onUpdate:modelValue":D[24]||(D[24]=te=>he.value=te),onChange:D[25]||(D[25]=te=>$(he.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},D[67]||(D[67]=[S("option",{value:"company"},"Entreprise (accs  tout)",-1),S("option",{value:"employee"},"Salaris (accs niveau salaris et visiteurs)",-1),S("option",{value:"visitor"},"Visiteurs (accs niveau visiteurs uniquement)",-1)]),544),[[so,he.value]]),D[68]||(D[68]=S("div",{class:"mt-2 text-xs text-gray-500"},[S("p",null,[S("strong",null,"Entreprise"),ii(" : Vous verrez tous les lments (entreprise, salaris, visiteurs)")]),S("p",null,[S("strong",null,"Salaris"),ii(" : Vous verrez les lments pour salaris et visiteurs")]),S("p",null,[S("strong",null,"Visiteurs"),ii(" : Vous ne verrez que les lments pour visiteurs")])],-1))])]),S("div",LO,[D[77]||(D[77]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"lments",-1)),S("div",SO,[S("label",EO,[Nn(S("input",{type:"checkbox","onUpdate:modelValue":D[26]||(D[26]=te=>fe.categories.forages=te),onChange:Q,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,fe.categories.forages]]),D[71]||(D[71]=S("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),S("label",CO,[Nn(S("input",{type:"checkbox","onUpdate:modelValue":D[27]||(D[27]=te=>fe.categories.clients=te),onChange:Q,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,fe.categories.clients]]),D[72]||(D[72]=S("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),S("label",PO,[Nn(S("input",{type:"checkbox","onUpdate:modelValue":D[28]||(D[28]=te=>fe.categories.entrepots=te),onChange:Q,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,fe.categories.entrepots]]),D[73]||(D[73]=S("span",{class:"ml-2 text-sm text-gray-700"},"Entrepts",-1))]),S("label",MO,[Nn(S("input",{type:"checkbox","onUpdate:modelValue":D[29]||(D[29]=te=>fe.categories.livraisons=te),onChange:Q,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,fe.categories.livraisons]]),D[74]||(D[74]=S("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),S("label",AO,[Nn(S("input",{type:"checkbox","onUpdate:modelValue":D[30]||(D[30]=te=>fe.categories.cultures=te),onChange:Q,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,fe.categories.cultures]]),D[75]||(D[75]=S("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),S("label",kO,[Nn(S("input",{type:"checkbox","onUpdate:modelValue":D[31]||(D[31]=te=>fe.categories.parcelles=te),onChange:Q,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,fe.categories.parcelles]]),D[76]||(D[76]=S("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))])])]),S("div",TO,[D[82]||(D[82]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),S("div",NO,[S("label",DO,[Nn(S("input",{type:"checkbox","onUpdate:modelValue":D[32]||(D[32]=te=>fe.shapeTypes.Polygon=te),onChange:Q,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,fe.shapeTypes.Polygon]]),D[78]||(D[78]=S("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),S("label",IO,[Nn(S("input",{type:"checkbox","onUpdate:modelValue":D[33]||(D[33]=te=>fe.shapeTypes.Line=te),onChange:Q,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,fe.shapeTypes.Line]]),D[79]||(D[79]=S("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),S("label",OO,[Nn(S("input",{type:"checkbox","onUpdate:modelValue":D[34]||(D[34]=te=>fe.shapeTypes.ElevationLine=te),onChange:Q,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,fe.shapeTypes.ElevationLine]]),D[80]||(D[80]=S("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimtriques",-1))]),S("label",BO,[Nn(S("input",{type:"checkbox","onUpdate:modelValue":D[35]||(D[35]=te=>fe.shapeTypes.Note=te),onChange:Q,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[xl,fe.shapeTypes.Note]]),D[81]||(D[81]=S("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),S("div",{class:"pt-2"},[S("button",{onClick:_e,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Rinitialiser ")])])):nn("",!0)]),e.selectedShape&&U.value&&U.value.type==="ElevationLine"?(Fe(),Ve("div",RO,[S("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:D[36]||(D[36]=te=>Z("samplePoints"))},[D[84]||(D[84]=S("span",null,"Points d'chantillonnage",-1)),(Fe(),Ve("svg",{class:Gi(["w-4 h-4",{"rotate-180":!u.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},D[83]||(D[83]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Nn(S("div",FO,[S("div",jO,[D[89]||(D[89]=S("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),S("div",$O,[S("div",null,[D[85]||(D[85]=S("label",{class:"text-xs text-gray-600"},"Taille",-1)),Nn(S("input",{type:"number","onUpdate:modelValue":D[37]||(D[37]=te=>I.value.radius=te),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:G},null,544),[[Zr,I.value.radius]])]),S("div",null,[D[86]||(D[86]=S("label",{class:"text-xs text-gray-600"},"Couleur",-1)),Nn(S("input",{type:"color","onUpdate:modelValue":D[38]||(D[38]=te=>I.value.color=te),class:"w-full h-8 px-1 border rounded",onChange:G},null,544),[[Zr,I.value.color]])]),S("div",null,[D[87]||(D[87]=S("label",{class:"text-xs text-gray-600"},"Opacit",-1)),Nn(S("input",{type:"range","onUpdate:modelValue":D[39]||(D[39]=te=>I.value.fillOpacity=te),min:"0",max:"1",step:"0.1",class:"w-full",onChange:G},null,544),[[Zr,I.value.fillOpacity]])]),S("div",null,[D[88]||(D[88]=S("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Nn(S("input",{type:"number","onUpdate:modelValue":D[40]||(D[40]=te=>I.value.weight=te),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:G},null,544),[[Zr,I.value.weight]])])])]),S("div",null,[D[93]||(D[93]=S("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),S("div",zO,[S("div",null,[D[90]||(D[90]=S("label",{class:"text-xs text-gray-600"},"Taille",-1)),Nn(S("input",{type:"number","onUpdate:modelValue":D[41]||(D[41]=te=>R.value.radius=te),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:oe},null,544),[[Zr,R.value.radius]])]),S("div",null,[D[91]||(D[91]=S("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Nn(S("input",{type:"number","onUpdate:modelValue":D[42]||(D[42]=te=>R.value.weight=te),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:oe},null,544),[[Zr,R.value.weight]])]),S("div",null,[D[92]||(D[92]=S("label",{class:"text-xs text-gray-600"},"Opacit",-1)),Nn(S("input",{type:"range","onUpdate:modelValue":D[43]||(D[43]=te=>R.value.fillOpacity=te),min:"0",max:"1",step:"0.1",class:"w-full",onChange:oe},null,544),[[Zr,R.value.fillOpacity]])])])])],512),[[Hm,!u.value.samplePoints]])])):nn("",!0)])}}}),VO=hh(UO,[["__scopeId","data-v-cb7f32f1"]]),GO={class:"map-toolbar w-full"},HO={class:"hidden md:flex items-center space-x-2"},qO={class:"dropdown"},WO={class:"dropdown-menu"},ZO=["onClick"],KO={key:0,class:"border-l pl-2 flex-1"},YO={class:"flex items-center"},JO={class:"plan-info"},XO={class:"plan-name"},QO={key:0,class:"plan-description"},eB={class:"border-l pl-2 ml-auto"},tB={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},nB={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},rB={key:"saving"},iB={key:"success",class:"save-success-text"},oB={key:"default"},sB={class:"md:hidden"},aB={class:"flex justify-between items-center"},lB={key:0,class:"truncate mx-2 text-sm font-medium"},uB={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},cB={class:"flex justify-between items-center mb-3 border-b pb-2"},fB={class:"flex flex-col space-y-4"},hB={key:0,class:"flex flex-col pb-3 border-b"},dB={class:"text-sm font-semibold text-gray-800"},pB={key:0,class:"text-xs text-gray-600 mt-1"},gB={class:"flex flex-col"},mB={class:"grid grid-cols-3 gap-2"},vB=["onClick"],yB={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_B={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},bB={key:"saving"},wB={key:"success",class:"save-success-text"},xB={key:"default"},LB=Qo({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(e,{emit:n}){const t=n,r=e,i=Ft("Hybride"),s=Ft(!1),o=F=>{const I=F.currentTarget,R=I.nextElementSibling;if(R&&R.classList.contains("dropdown-menu")){const Y=I.getBoundingClientRect();R.style.top=`${Y.bottom}px`,R.style.left=`${Y.left}px`}},u={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},f=rr(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),d=F=>{i.value=F,t("change-map-type",F),k()},m=()=>{t("create-new-plan"),k()},_=()=>{t("load-plan"),k()},b=()=>{t("save-plan"),k()},y=()=>{t("adjust-view"),k()},M=()=>{t("generate-summary"),k()},k=()=>{s.value=!1};return(F,I)=>(Fe(),Ve("div",GO,[S("div",HO,[S("div",qO,[S("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[I[2]||(I[2]=S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),S("span",null,It(u[i.value]),1)],32),S("div",WO,[(Fe(),Ve(Mn,null,br(u,(R,Y)=>S("button",{key:Y,class:Gi(["dropdown-item",{active:Y===i.value}]),onClick:ee=>d(Y)},It(R),11,ZO)),64))])]),F.planName?(Fe(),Ve("div",KO,[S("div",YO,[S("div",JO,[S("h2",XO,It(F.planName),1),F.planDescription?(Fe(),Ve("p",QO,It(F.planDescription),1)):nn("",!0)])])])):nn("",!0),S("div",{class:"border-l pl-2"},[S("div",{class:"flex items-center space-x-1"},[S("button",{onClick:m,class:"btn-toolbar",title:"Nouveau plan"},I[3]||(I[3]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),S("button",{onClick:_,class:"btn-toolbar",title:"Charger un plan"},I[4]||(I[4]=[zu('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-bcd65717><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-bcd65717></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-bcd65717></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-bcd65717></path></svg><span class="hidden lg:inline ml-1" data-v-bcd65717>Charger</span>',2)])),S("button",{onClick:b,class:"btn-toolbar",title:"Enregistrer le plan"},I[5]||(I[5]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),S("div",{class:"border-l pl-2"},[S("div",{class:"flex items-center space-x-1"},[S("button",{onClick:y,class:"btn-toolbar",title:"Ajuster la vue"},I[6]||(I[6]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),S("button",{onClick:M,class:"btn-toolbar",title:"Gnrer une synthse"},I[7]||(I[7]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Synthse",-1)]))])]),S("div",eB,[S("div",{class:Gi(["text-xs hidden lg:flex items-center",{"text-gray-500":!F.saveStatus,"text-primary-600 font-medium":F.saveStatus==="success","text-blue-600 font-medium":F.saveStatus==="saving"}])},[F.saveStatus==="saving"?(Fe(),Ve("svg",tB,I[8]||(I[8]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),F.saveStatus==="success"?(Fe(),Ve("svg",nB,I[9]||(I[9]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):nn("",!0),pi(Gv,{name:"fade-slide",mode:"out-in"},{default:gu(()=>[F.saveStatus==="saving"?(Fe(),Ve("span",rB," Sauvegarde en cours... ")):F.saveStatus==="success"?(Fe(),Ve("span",iB," Sauvegarde russie ! ")):(Fe(),Ve("span",oB," Dernire modification : "+It(f.value),1))]),_:1})],2)])]),S("div",sB,[S("div",aB,[S("button",{onClick:I[0]||(I[0]=R=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},I[10]||(I[10]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),F.planName?(Fe(),Ve("div",lB,It(F.planName),1)):nn("",!0),S("div",{class:"flex space-x-2"},[S("button",{onClick:m,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},I[11]||(I[11]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),S("button",{onClick:b,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},I[12]||(I[12]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),S("button",{onClick:y,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},I[13]||(I[13]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?(Fe(),Ve("div",uB,[S("div",cB,[I[15]||(I[15]=S("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),S("button",{onClick:I[1]||(I[1]=R=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},I[14]||(I[14]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",fB,[F.planName?(Fe(),Ve("div",hB,[S("h3",dB,It(F.planName),1),F.planDescription?(Fe(),Ve("p",pB,It(F.planDescription),1)):nn("",!0)])):nn("",!0),S("div",gB,[I[16]||(I[16]=S("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),S("div",mB,[(Fe(),Ve(Mn,null,br(u,(R,Y)=>S("button",{key:Y,class:Gi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":Y===i.value}]),onClick:ee=>d(Y)},It(R),11,vB)),64))])]),S("div",{class:"flex flex-col"},[I[20]||(I[20]=S("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),S("div",{class:"grid grid-cols-3 gap-2"},[S("button",{onClick:m,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},I[17]||(I[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),ii(" Nouveau ")])),S("button",{onClick:_,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},I[18]||(I[18]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),S("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),S("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),ii(" Charger ")])),S("button",{onClick:M,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},I[19]||(I[19]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),ii(" Synthse ")]))])]),S("div",{class:Gi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!F.saveStatus,"text-primary-600 font-medium":F.saveStatus==="success","text-blue-600 font-medium":F.saveStatus==="saving"}])},[F.saveStatus==="saving"?(Fe(),Ve("svg",yB,I[21]||(I[21]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),F.saveStatus==="success"?(Fe(),Ve("svg",_B,I[22]||(I[22]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):nn("",!0),pi(Gv,{name:"fade-slide",mode:"out-in"},{default:gu(()=>[F.saveStatus==="saving"?(Fe(),Ve("span",bB," Sauvegarde en cours... ")):F.saveStatus==="success"?(Fe(),Ve("span",wB," Sauvegarde russie ! ")):(Fe(),Ve("span",xB," Dernire modification : "+It(f.value),1))]),_:1})],2)])])):nn("",!0)])]))}}),SB=hh(LB,[["__scopeId","data-v-bcd65717"]]),EB={class:"comment-thread"},CB={key:0,class:"space-y-3 mb-4"},PB={class:"flex justify-between items-start"},MB={class:"flex items-center"},AB={class:"font-medium text-sm text-gray-900"},kB={class:"flex items-center"},TB={class:"text-xs text-gray-500"},NB=["onClick"],DB={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},IB={key:1,class:"text-center text-sm text-gray-500 italic my-4"},OB={key:2,class:"mt-3"},BB={class:"flex justify-end mt-2"},RB=["disabled"],FB={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},jB=Qo({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(e,{emit:n}){const t=e;console.log("[CommentThread] Commentaires reus initialement:",t.comments),oo(()=>t.comments,k=>{console.log("[CommentThread] Commentaires mis  jour:",k)},{deep:!0});const r=n,i=ta(),s=lh(),o=Yl(),u=Ft(""),f=rr(()=>i.isEntreprise||i.isAdmin);function d(k){return i.user&&k.userId===i.user.id||i.isAdmin}async function m(){var k;if(u.value.trim())try{await s.addComment(t.noteId,u.value.trim()),u.value="",o.success("Commentaire ajout avec succs"),r("comment-added")}catch(F){if(console.error("Erreur lors de l'ajout du commentaire:",F),(k=F.response)!=null&&k.data){const I=F.response.data;I.note?o.error(`Erreur: ${I.note[0]}`):I.user?o.error(`Erreur: ${I.user[0]}`):I.text?o.error(`Erreur: ${I.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function _(k){var F;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(t.noteId,k),o.success("Commentaire supprim"),r("comment-deleted")}catch(I){if(console.error("Erreur lors de la suppression du commentaire:",I),(F=I.response)!=null&&F.data){const R=I.response.data;R.detail?o.error(`Erreur: ${R.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function b(k){try{if(!k)return"Date inconnue";const F=new Date(k);return isNaN(F.getTime())?(console.warn(`Date invalide: ${k}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(F)}catch(F){return console.error(`Erreur lors du formatage de la date: ${k}`,F),"Date invalide"}}function y(k){switch(k){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function M(k){switch(k){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salari";case"visiteur":return"Visiteur";default:return k}}return(k,F)=>(Fe(),Ve("div",EB,[k.comments&&k.comments.length>0?(Fe(),Ve("div",CB,[(Fe(!0),Ve(Mn,null,br(k.comments,I=>(Fe(),Ve("div",{key:I.id,class:"bg-gray-50 rounded-lg p-3"},[S("div",PB,[S("div",MB,[S("div",AB,It(I.userName),1),S("span",{class:Gi(["ml-2 text-xs px-2 py-0.5 rounded-full",y(I.userRole)])},It(M(I.userRole)),3)]),S("div",kB,[S("span",TB,It(b(I.createdAt)),1),d(I)?(Fe(),Ve("button",{key:0,onClick:Gc(R=>_(I.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},F[1]||(F[1]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,NB)):nn("",!0)])]),S("p",DB,It(I.text),1)]))),128))])):(Fe(),Ve("div",IB," Aucun commentaire pour le moment ")),f.value?(Fe(),Ve("div",OB,[Nn(S("textarea",{"onUpdate:modelValue":F[0]||(F[0]=I=>u.value=I),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[Zr,u.value]]),S("div",BB,[S("button",{type:"button",onClick:Gc(m,["prevent"]),disabled:!u.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,RB)])])):(Fe(),Ve("div",FB," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),$B={class:"photo-gallery"},zB={key:0,class:"grid grid-cols-2 gap-2 mb-4"},UB=["src","onClick"],VB={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},GB={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},HB=["onClick"],qB={key:1,class:"text-center text-sm text-gray-500 italic my-4"},WB={class:"flex space-x-2 mt-3"},ZB={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},KB={class:"relative bg-gray-900",style:{height:"300px"}},YB=["src"],JB={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},XB={key:1,class:"flex space-x-3"},QB={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},eR={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},tR=["src"],nR=Qo({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(e,{emit:n}){const t=e,r=n,i=lh(),s=Yl(),o=Ft(null),u=Ft(null),f=Ft(null);let d=null;const m=Ft(!1),_=Ft(!1),b=Ft(null),y=Ft(null);function M(ve){b.value=ve,m.value=!0}async function k(ve){var $;if(confirm("tes-vous sr de vouloir supprimer cette photo ?"))try{await i.removePhoto(t.noteId,ve),s.success("Photo supprime"),r("photo-deleted"),m.value&&(($=b.value)==null?void 0:$.id)===ve&&(m.value=!1,b.value=null)}catch(U){console.error("Erreur lors de la suppression de la photo:",U),s.error("Erreur lors de la suppression de la photo")}}function F(){f.value&&f.value.click()}async function I(ve){const $=ve.target;if(!$.files||$.files.length===0)return;const U=$.files[0];if(!U.type.startsWith("image/")){s.error("Le fichier doit tre une image");return}if(U.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const Z=await R(U);await i.addPhoto(t.noteId,{url:Z}),$.value="",s.success("Photo ajoute"),r("photo-added")}catch(Z){console.error("Erreur lors de l'ajout de la photo:",Z),s.error("Erreur lors de l'ajout de la photo")}}function R(ve){return new Promise(($,U)=>{const Z=new FileReader;Z.onload=()=>$(Z.result),Z.onerror=U,Z.readAsDataURL(ve)})}oo(_,async ve=>{if(ve){y.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de camra non supporte sur ce navigateur");const $={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};d=await navigator.mediaDevices.getUserMedia($),o.value&&(o.value.srcObject=d,await new Promise(U=>{o.value.onloadedmetadata=()=>{o.value.play().then(U)}}))}catch($){console.error("Erreur lors de l'accs  la camra:",$);let U="Impossible d'accder  la camra";$.name==="NotAllowedError"?U="L'accs  la camra a t refus. Veuillez vrifier vos permissions.":$.name==="NotFoundError"?U="Aucune camra n'a t trouve sur votre appareil.":$.name==="NotSupportedError"&&(U="Votre navigateur ne supporte pas l'accs  la camra."),s.error(U),_.value=!1}}else d&&(d.getTracks().forEach($=>$.stop()),d=null)});function Y(){if(!o.value||!u.value)return;const ve=o.value,$=u.value;$.width=ve.videoWidth,$.height=ve.videoHeight;const U=$.getContext("2d");U&&(U.drawImage(ve,0,0,$.width,$.height),y.value=$.toDataURL("image/jpeg"))}function ee(){y.value=null}async function he(){if(y.value)try{await i.addPhoto(t.noteId,{url:y.value}),_.value=!1,s.success("Photo ajoute"),r("photo-added")}catch(ve){console.error("Erreur lors de l'ajout de la photo:",ve),s.error("Erreur lors de l'ajout de la photo")}}function fe(){_.value=!1}return Hu(()=>{d&&(d.getTracks().forEach(ve=>ve.stop()),d=null)}),(ve,$)=>(Fe(),Ve("div",$B,[ve.photos&&ve.photos.length>0?(Fe(),Ve("div",zB,[(Fe(!0),Ve(Mn,null,br(ve.photos,U=>(Fe(),Ve("div",{key:U.id,class:"relative group"},[S("img",{src:U.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:Z=>M(U)},null,8,UB),S("div",VB,[S("div",GB,[S("button",{onClick:Gc(Z=>k(U.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},$[2]||($[2]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,HB)])])]))),128))])):(Fe(),Ve("div",qB," Aucune photo pour le moment ")),S("div",WB,[S("button",{type:"button",onClick:$[0]||($[0]=U=>_.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},$[3]||($[3]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),ii(" Prendre une photo ")])),S("button",{type:"button",onClick:F,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},$[4]||($[4]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),ii(" Tlverser ")])),S("input",{id:"photo-upload",ref_key:"fileInput",ref:f,type:"file",accept:"image/*",class:"hidden",onChange:I},null,544)]),_.value?(Fe(),Ve("div",ZB,[S("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[$[6]||($[6]=S("h3",{class:"text-sm font-medium text-gray-700"},"Mode camra",-1)),S("button",{type:"button",onClick:fe,class:"text-gray-400 hover:text-gray-500"},$[5]||($[5]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",KB,[y.value?(Fe(),Ve("img",{key:1,src:y.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,YB)):(Fe(),Ve("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),S("canvas",{ref_key:"canvasElement",ref:u,class:"hidden"},null,512)]),S("div",JB,[y.value?(Fe(),Ve("div",XB,[S("button",{type:"button",onClick:ee,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),S("button",{type:"button",onClick:he,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Fe(),Ve("button",{key:0,type:"button",onClick:Y,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},$[7]||($[7]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):nn("",!0),m.value?(Fe(),Ve("div",QB,[S("div",eR,[S("button",{type:"button",onClick:$[1]||($[1]=U=>m.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},$[8]||($[8]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),b.value?(Fe(),Ve("img",{key:0,src:b.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,tR)):nn("",!0)])])):nn("",!0)]))}}),rR=hh(nR,[["__scopeId","data-v-f87156b4"]]),iR={class:"fixed z-[9999] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},oR={class:"flex items-center justify-center min-h-screen w-full"},sR={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},aR={class:"p-4 md:p-6 flex-1 overflow-y-auto"},lR={class:"flex justify-between items-center mb-4 border-b pb-4"},uR={class:"text-xl font-semibold text-gray-900"},cR={class:"mb-4 border-b border-gray-200"},fR={class:"flex space-x-4","aria-label":"Tabs"},hR={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},dR={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},pR={key:0},gR={class:"mb-4"},mR={class:"mb-4"},vR={key:0,class:"mb-4 p-2 rounded bg-gray-50 flex items-center"},yR={class:"mb-4"},_R=["value"],bR={class:"mb-4"},wR=["value"],xR={class:"mb-4"},LR={class:"mt-1 flex space-x-2"},SR=["onClick"],ER={key:1,class:"mt-4"},CR={class:"hidden"},PR={key:2,class:"mt-4"},hx=Qo({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(e,{emit:n}){const t=e,r=n,i=lh(),s=Yl(),o=Ft("info"),u=window.console;oo(o,async Z=>{u.log("[NoteEditModal] Onglet actif chang:",Z),Z==="comments"&&t.note&&t.note.id&&(u.log("[NoteEditModal] Onglet Commentaires slectionn, commentaires actuels:",f.value.comments),await _(t.note.id)),Z==="photos"&&t.note&&t.note.id&&(u.log("[NoteEditModal] Onglet Photos slectionn, photos actuelles:",f.value.photos),await b(t.note.id))});const f=Ft({title:"",description:"",columnId:"",accessLevel:qi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});function d(Z){return Array.isArray(Z)?Z:typeof Z=="object"&&"type"in Z&&"coordinates"in Z?[Z.coordinates[1],Z.coordinates[0]]:(u.error("[NoteEditModal] Format de localisation non reconnu:",Z),[0,0])}function m(Z){if(!Z)return new Date().toISOString();try{const T=new Date(Z);return isNaN(T.getTime())?(u.warn("[NoteEditModal] Date invalide:",Z),new Date().toISOString()):T.toISOString()}catch(T){return u.error("[NoteEditModal] Erreur lors de la cration de la date:",T),new Date().toISOString()}}async function _(Z){try{u.log(`[NoteEditModal] Chargement des commentaires pour la note ${Z}`);const T=await Qs.getComments(Z);u.log("[NoteEditModal] Commentaires reus:",T.data);const N=T.data.map(O=>({id:O.id,text:O.text,createdAt:O.created_at,userId:O.user,userName:O.user_name,userRole:O.user_role}));return u.log("[NoteEditModal] Commentaires transforms:",N),t.note&&(i.updateNote(t.note.id,{comments:N}),f.value.comments=N,u.log("[NoteEditModal] Commentaires mis  jour dans le store et localement"),u.log("[NoteEditModal] editingNote.comments aprs mise  jour:",f.value.comments)),N}catch(T){return u.error("[NoteEditModal] Erreur lors du chargement des commentaires:",T),s.error("Erreur lors du chargement des commentaires"),[]}}async function b(Z){try{u.log(`[NoteEditModal] Chargement des photos pour la note ${Z}`);const T=await Qs.getPhotos(Z);u.log("[NoteEditModal] Photos reues:",T.data);const N=T.data.map(O=>({id:O.id,url:O.image,createdAt:O.created_at,caption:O.caption}));return t.note&&(i.updateNote(t.note.id,{photos:N}),f.value.photos=N,u.log("[NoteEditModal] Photos mises  jour dans le store et localement")),N}catch(T){return u.error("[NoteEditModal] Erreur lors du chargement des photos:",T),s.error("Erreur lors du chargement des photos"),[]}}ps(async()=>{var Z,T;if(u.log("[NoteEditModal] onMounted - props:",t),await i.loadColumns(),u.log("[NoteEditModal] Colonnes charges:",i.columns),t.note){u.log("[NoteEditModal] dition d'une note existante:",t.note);const N=JSON.parse(JSON.stringify(t.note));N.createdAt=m(N.createdAt),N.updatedAt=m(N.updatedAt),f.value=N,t.note.id&&(u.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([_(t.note.id),b(t.note.id)]),u.log("[NoteEditModal] Aprs chargement - Commentaires:",((Z=f.value.comments)==null?void 0:Z.length)||0),u.log("[NoteEditModal] Aprs chargement - Photos:",((T=f.value.photos)==null?void 0:T.length)||0),setTimeout(()=>{u.log("[NoteEditModal] Compteurs aprs timeout - Commentaires:",M.value),u.log("[NoteEditModal] Compteurs aprs timeout - Photos:",k.value)},0))}else if(t.isNewNote){if(u.log("[NoteEditModal] Cration d'une nouvelle note"),f.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:qi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},t.location){u.log("[NoteEditModal] Ajout de la localisation:",t.location);const N=d(t.location);f.value.location=N}u.log("[NoteEditModal] Niveau d'accs initial:",f.value.accessLevel)}else u.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");u.log("[NoteEditModal] editingNote.value aprs initialisation:",f.value)});const y=rr(()=>i.getSortedColumns),M=rr(()=>{var T;const Z=((T=f.value.comments)==null?void 0:T.length)||0;return u.log("[NoteEditModal] Computed commentsCount recalcul:",Z),Z}),k=rr(()=>{var T;const Z=((T=f.value.photos)==null?void 0:T.length)||0;return u.log("[NoteEditModal] Computed photosCount recalcul:",Z),Z}),F=[{id:qi.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:qi.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:qi.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et les salaris"},{id:qi.VISITOR,title:"Visiteurs",description:"Visible par tous"}],I=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],R=Z=>{f.value.style?(f.value.style.color=Z,f.value.style.fillColor=Z):f.value.style={color:Z,weight:2,opacity:1,fillColor:Z,fillOpacity:.6,radius:8},f.value.color=Z},Y=()=>{var Z,T,N,O,z,q,G,oe,ie,_e,Ce;f.value={title:((Z=t.note)==null?void 0:Z.title)||"",description:((T=t.note)==null?void 0:T.description)||"",columnId:((N=t.note)==null?void 0:N.columnId)||"",accessLevel:((O=t.note)==null?void 0:O.accessLevel)||"private",style:((z=t.note)==null?void 0:z.style)||{color:((q=t.note)==null?void 0:q.color)||"#3B82F6",weight:2,opacity:1,fillColor:((G=t.note)==null?void 0:G.color)||"#3B82F6",fillOpacity:.6,radius:8},color:((oe=t.note)==null?void 0:oe.color)||"#3B82F6",location:t.location||((ie=t.note)==null?void 0:ie.location)||null,comments:((_e=t.note)==null?void 0:_e.comments)||[],photos:((Ce=t.note)==null?void 0:Ce.photos)||[]}};ps(()=>{Y()}),oo(()=>t.note,()=>{Y()},{deep:!0});function ee(){r("close")}async function he(){u.log("[NoteEditModal] Commentaire ajout, le modal reste ouvert"),t.note&&t.note.id&&await _(t.note.id)}async function fe(){u.log("[NoteEditModal] Photo ajoute, le modal reste ouvert"),t.note&&t.note.id&&await b(t.note.id)}async function ve(){u.log("[NoteEditModal] Commentaire supprim, mise  jour de la liste"),t.note&&t.note.id&&await _(t.note.id)}async function $(){u.log("[NoteEditModal] Photo supprime, mise  jour de la liste"),t.note&&t.note.id&&await b(t.note.id)}async function U(){var Z;try{const T={title:f.value.title,description:f.value.description,columnId:f.value.columnId,style:f.value.style,access_level:f.value.accessLevel,comments:f.value.comments||[],photos:f.value.photos||[]};f.value.location&&(T.location=Array.isArray(f.value.location)?{type:"Point",coordinates:[f.value.location[1],f.value.location[0]]}:f.value.location),u.log("[NoteEditModal] Donnes de note  sauvegarder:",T);let N;if((Z=t.note)!=null&&Z.id){N=(await Qs.updateNote(t.note.id,T)).data,i.updateNote(t.note.id,{...f.value,...N,accessLevel:f.value.accessLevel,style:f.value.style,updatedAt:new Date().toISOString()});const z=t.note.id,q=new CustomEvent("geonote:update",{detail:{noteId:z,properties:{name:f.value.title,description:f.value.description,columnId:f.value.columnId,accessLevel:f.value.accessLevel,style:f.value.style}}});window.dispatchEvent(q),s.success("Note mise  jour avec succs")}else{if(N=(await Qs.createNote(T)).data,!N.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const z=i.getDefaultColumn,q={...T,id:N.id,columnId:T.columnId||z.id,accessLevel:f.value.accessLevel,style:T.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.2}};u.log("[NoteEditModal] Note  ajouter au store avec ID backend:",N.id),i.addNote(q),s.success("Note cre avec succs")}N&&(!N.comments&&f.value.comments&&(N.comments=f.value.comments),!N.photos&&f.value.photos&&(N.photos=f.value.photos)),r("save",N),r("close")}catch(T){u.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",T),s.error("Erreur lors de la sauvegarde de la note")}}return(Z,T)=>{var N;return Fe(),Ve("div",iR,[S("div",oR,[T[17]||(T[17]=S("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),S("div",sR,[S("form",{onSubmit:Gc(U,["prevent"]),class:"h-full md:h-auto flex flex-col"},[S("div",aR,[S("div",lR,[S("h3",uR,It((N=Z.note)!=null&&N.id?"Modifier la note":"Nouvelle note"),1),S("button",{type:"button",onClick:ee,class:"text-gray-400 hover:text-gray-500"},T[7]||(T[7]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",cR,[S("nav",fR,[S("button",{type:"button",onClick:T[0]||(T[0]=O=>o.value="info"),class:Gi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="info"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Informations ",2),S("button",{type:"button",onClick:T[1]||(T[1]=O=>o.value="comments"),class:Gi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="comments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[T[8]||(T[8]=ii(" Commentaires ")),M.value>0?(Fe(),Ve("span",hR,It(M.value),1)):nn("",!0)],2),S("button",{type:"button",onClick:T[2]||(T[2]=O=>o.value="photos"),class:Gi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="photos"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[T[9]||(T[9]=ii(" Photos ")),k.value>0?(Fe(),Ve("span",dR,It(k.value),1)):nn("",!0)],2)])]),o.value==="info"?(Fe(),Ve("div",pR,[S("div",gR,[T[10]||(T[10]=S("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),Nn(S("input",{type:"text",id:"title","onUpdate:modelValue":T[3]||(T[3]=O=>f.value.title=O),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Zr,f.value.title]])]),S("div",mR,[T[11]||(T[11]=S("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),Nn(S("textarea",{id:"description","onUpdate:modelValue":T[4]||(T[4]=O=>f.value.description=O),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Zr,f.value.description]])]),f.value.location?(Fe(),Ve("div",vR,T[12]||(T[12]=[S("div",{class:"text-primary-600 mr-2"},[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])],-1),S("div",{class:"text-sm text-gray-600"}," Note golocalise ",-1)]))):nn("",!0),S("div",yR,[T[13]||(T[13]=S("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"tat",-1)),Nn(S("select",{id:"column","onUpdate:modelValue":T[5]||(T[5]=O=>f.value.columnId=O),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Fe(!0),Ve(Mn,null,br(y.value,O=>(Fe(),Ve("option",{key:O.id,value:O.id},It(O.title),9,_R))),128))],512),[[so,f.value.columnId]])]),S("div",bR,[T[14]||(T[14]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),Nn(S("select",{id:"accessLevel","onUpdate:modelValue":T[6]||(T[6]=O=>f.value.accessLevel=O),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Fe(),Ve(Mn,null,br(F,O=>S("option",{key:O.id,value:O.id},It(O.title)+" - "+It(O.description),9,wR)),64))],512),[[so,f.value.accessLevel]])]),S("div",xR,[T[15]||(T[15]=S("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),S("div",LR,[(Fe(),Ve(Mn,null,br(I,O=>S("div",{key:O,class:Gi(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":f.value.style.color!==O,"border-black":f.value.style.color===O}]),style:El({backgroundColor:O}),onClick:z=>R(O)},null,14,SR)),64))])])])):o.value==="comments"?(Fe(),Ve("div",ER,[S("div",CR,It(u.log("[NoteEditModal] Commentaires passs au composant:",f.value.comments)),1),Z.note?(Fe(),il(jB,{key:0,noteId:Z.note.id,comments:f.value.comments||[],onCommentAdded:he,onCommentDeleted:ve},null,8,["noteId","comments"])):nn("",!0)])):o.value==="photos"?(Fe(),Ve("div",PR,[Z.note?(Fe(),il(rR,{key:0,noteId:Z.note.id,photos:f.value.photos||[],onPhotoAdded:fe,onPhotoDeleted:$},null,8,["noteId","photos"])):nn("",!0)])):nn("",!0)]),S("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[T[16]||(T[16]=S("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),S("button",{onClick:ee,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])}}});(()=>{var Pn,tr;var e=Object.create,n=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(l,h)=>()=>(h||l((h={exports:{}}).exports,h),h.exports),u=(l,h,v,x)=>{if(h&&typeof h=="object"||typeof h=="function")for(let C of r(h))!s.call(l,C)&&C!==v&&n(l,C,{get:()=>h[C],enumerable:!(x=t(h,C))||x.enumerable});return l},f=(l,h,v)=>(v=l!=null?e(i(l)):{},u(h||!l||!l.__esModule?n(v,"default",{value:l,enumerable:!0}):v,l)),d=o((l,h)=>{function v(){this.__data__=[],this.size=0}h.exports=v}),m=o((l,h)=>{function v(x,C){return x===C||x!==x&&C!==C}h.exports=v}),_=o((l,h)=>{var v=m();function x(C,j){for(var X=C.length;X--;)if(v(C[X][0],j))return X;return-1}h.exports=x}),b=o((l,h)=>{var v=_(),x=Array.prototype,C=x.splice;function j(X){var re=this.__data__,ge=v(re,X);if(ge<0)return!1;var Le=re.length-1;return ge==Le?re.pop():C.call(re,ge,1),--this.size,!0}h.exports=j}),y=o((l,h)=>{var v=_();function x(C){var j=this.__data__,X=v(j,C);return X<0?void 0:j[X][1]}h.exports=x}),M=o((l,h)=>{var v=_();function x(C){return v(this.__data__,C)>-1}h.exports=x}),k=o((l,h)=>{var v=_();function x(C,j){var X=this.__data__,re=v(X,C);return re<0?(++this.size,X.push([C,j])):X[re][1]=j,this}h.exports=x}),F=o((l,h)=>{var v=d(),x=b(),C=y(),j=M(),X=k();function re(ge){var Le=-1,Xe=ge==null?0:ge.length;for(this.clear();++Le<Xe;){var Ue=ge[Le];this.set(Ue[0],Ue[1])}}re.prototype.clear=v,re.prototype.delete=x,re.prototype.get=C,re.prototype.has=j,re.prototype.set=X,h.exports=re}),I=o((l,h)=>{var v=F();function x(){this.__data__=new v,this.size=0}h.exports=x}),R=o((l,h)=>{function v(x){var C=this.__data__,j=C.delete(x);return this.size=C.size,j}h.exports=v}),Y=o((l,h)=>{function v(x){return this.__data__.get(x)}h.exports=v}),ee=o((l,h)=>{function v(x){return this.__data__.has(x)}h.exports=v}),he=o((l,h)=>{var v=typeof ea=="object"&&ea&&ea.Object===Object&&ea;h.exports=v}),fe=o((l,h)=>{var v=he(),x=typeof self=="object"&&self&&self.Object===Object&&self,C=v||x||Function("return this")();h.exports=C}),ve=o((l,h)=>{var v=fe(),x=v.Symbol;h.exports=x}),$=o((l,h)=>{var v=ve(),x=Object.prototype,C=x.hasOwnProperty,j=x.toString,X=v?v.toStringTag:void 0;function re(ge){var Le=C.call(ge,X),Xe=ge[X];try{ge[X]=void 0;var Ue=!0}catch{}var vt=j.call(ge);return Ue&&(Le?ge[X]=Xe:delete ge[X]),vt}h.exports=re}),U=o((l,h)=>{var v=Object.prototype,x=v.toString;function C(j){return x.call(j)}h.exports=C}),Z=o((l,h)=>{var v=ve(),x=$(),C=U(),j="[object Null]",X="[object Undefined]",re=v?v.toStringTag:void 0;function ge(Le){return Le==null?Le===void 0?X:j:re&&re in Object(Le)?x(Le):C(Le)}h.exports=ge}),T=o((l,h)=>{function v(x){var C=typeof x;return x!=null&&(C=="object"||C=="function")}h.exports=v}),N=o((l,h)=>{var v=Z(),x=T(),C="[object AsyncFunction]",j="[object Function]",X="[object GeneratorFunction]",re="[object Proxy]";function ge(Le){if(!x(Le))return!1;var Xe=v(Le);return Xe==j||Xe==X||Xe==C||Xe==re}h.exports=ge}),O=o((l,h)=>{var v=fe(),x=v["__core-js_shared__"];h.exports=x}),z=o((l,h)=>{var v=O(),x=function(){var j=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||"");return j?"Symbol(src)_1."+j:""}();function C(j){return!!x&&x in j}h.exports=C}),q=o((l,h)=>{var v=Function.prototype,x=v.toString;function C(j){if(j!=null){try{return x.call(j)}catch{}try{return j+""}catch{}}return""}h.exports=C}),G=o((l,h)=>{var v=N(),x=z(),C=T(),j=q(),X=/[\\^$.*+?()[\]{}|]/g,re=/^\[object .+?Constructor\]$/,ge=Function.prototype,Le=Object.prototype,Xe=ge.toString,Ue=Le.hasOwnProperty,vt=RegExp("^"+Xe.call(Ue).replace(X,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Dt(Xt){if(!C(Xt)||x(Xt))return!1;var _n=v(Xt)?vt:re;return _n.test(j(Xt))}h.exports=Dt}),oe=o((l,h)=>{function v(x,C){return x==null?void 0:x[C]}h.exports=v}),ie=o((l,h)=>{var v=G(),x=oe();function C(j,X){var re=x(j,X);return v(re)?re:void 0}h.exports=C}),_e=o((l,h)=>{var v=ie(),x=fe(),C=v(x,"Map");h.exports=C}),Ce=o((l,h)=>{var v=ie(),x=v(Object,"create");h.exports=x}),Te=o((l,h)=>{var v=Ce();function x(){this.__data__=v?v(null):{},this.size=0}h.exports=x}),J=o((l,h)=>{function v(x){var C=this.has(x)&&delete this.__data__[x];return this.size-=C?1:0,C}h.exports=v}),H=o((l,h)=>{var v=Ce(),x="__lodash_hash_undefined__",C=Object.prototype,j=C.hasOwnProperty;function X(re){var ge=this.__data__;if(v){var Le=ge[re];return Le===x?void 0:Le}return j.call(ge,re)?ge[re]:void 0}h.exports=X}),Q=o((l,h)=>{var v=Ce(),x=Object.prototype,C=x.hasOwnProperty;function j(X){var re=this.__data__;return v?re[X]!==void 0:C.call(re,X)}h.exports=j}),ue=o((l,h)=>{var v=Ce(),x="__lodash_hash_undefined__";function C(j,X){var re=this.__data__;return this.size+=this.has(j)?0:1,re[j]=v&&X===void 0?x:X,this}h.exports=C}),se=o((l,h)=>{var v=Te(),x=J(),C=H(),j=Q(),X=ue();function re(ge){var Le=-1,Xe=ge==null?0:ge.length;for(this.clear();++Le<Xe;){var Ue=ge[Le];this.set(Ue[0],Ue[1])}}re.prototype.clear=v,re.prototype.delete=x,re.prototype.get=C,re.prototype.has=j,re.prototype.set=X,h.exports=re}),pe=o((l,h)=>{var v=se(),x=F(),C=_e();function j(){this.size=0,this.__data__={hash:new v,map:new(C||x),string:new v}}h.exports=j}),K=o((l,h)=>{function v(x){var C=typeof x;return C=="string"||C=="number"||C=="symbol"||C=="boolean"?x!=="__proto__":x===null}h.exports=v}),D=o((l,h)=>{var v=K();function x(C,j){var X=C.__data__;return v(j)?X[typeof j=="string"?"string":"hash"]:X.map}h.exports=x}),ke=o((l,h)=>{var v=D();function x(C){var j=v(this,C).delete(C);return this.size-=j?1:0,j}h.exports=x}),Me=o((l,h)=>{var v=D();function x(C){return v(this,C).get(C)}h.exports=x}),Ge=o((l,h)=>{var v=D();function x(C){return v(this,C).has(C)}h.exports=x}),ce=o((l,h)=>{var v=D();function x(C,j){var X=v(this,C),re=X.size;return X.set(C,j),this.size+=X.size==re?0:1,this}h.exports=x}),te=o((l,h)=>{var v=pe(),x=ke(),C=Me(),j=Ge(),X=ce();function re(ge){var Le=-1,Xe=ge==null?0:ge.length;for(this.clear();++Le<Xe;){var Ue=ge[Le];this.set(Ue[0],Ue[1])}}re.prototype.clear=v,re.prototype.delete=x,re.prototype.get=C,re.prototype.has=j,re.prototype.set=X,h.exports=re}),ye=o((l,h)=>{var v=F(),x=_e(),C=te(),j=200;function X(re,ge){var Le=this.__data__;if(Le instanceof v){var Xe=Le.__data__;if(!x||Xe.length<j-1)return Xe.push([re,ge]),this.size=++Le.size,this;Le=this.__data__=new C(Xe)}return Le.set(re,ge),this.size=Le.size,this}h.exports=X}),de=o((l,h)=>{var v=F(),x=I(),C=R(),j=Y(),X=ee(),re=ye();function ge(Le){var Xe=this.__data__=new v(Le);this.size=Xe.size}ge.prototype.clear=x,ge.prototype.delete=C,ge.prototype.get=j,ge.prototype.has=X,ge.prototype.set=re,h.exports=ge}),We=o((l,h)=>{var v=ie(),x=function(){try{var C=v(Object,"defineProperty");return C({},"",{}),C}catch{}}();h.exports=x}),He=o((l,h)=>{var v=We();function x(C,j,X){j=="__proto__"&&v?v(C,j,{configurable:!0,enumerable:!0,value:X,writable:!0}):C[j]=X}h.exports=x}),tt=o((l,h)=>{var v=He(),x=m();function C(j,X,re){(re!==void 0&&!x(j[X],re)||re===void 0&&!(X in j))&&v(j,X,re)}h.exports=C}),Ze=o((l,h)=>{function v(x){return function(C,j,X){for(var re=-1,ge=Object(C),Le=X(C),Xe=Le.length;Xe--;){var Ue=Le[x?Xe:++re];if(j(ge[Ue],Ue,ge)===!1)break}return C}}h.exports=v}),et=o((l,h)=>{var v=Ze(),x=v();h.exports=x}),ze=o((l,h)=>{var v=fe(),x=typeof l=="object"&&l&&!l.nodeType&&l,C=x&&typeof h=="object"&&h&&!h.nodeType&&h,j=C&&C.exports===x,X=j?v.Buffer:void 0,re=X?X.allocUnsafe:void 0;function ge(Le,Xe){if(Xe)return Le.slice();var Ue=Le.length,vt=re?re(Ue):new Le.constructor(Ue);return Le.copy(vt),vt}h.exports=ge}),wt=o((l,h)=>{var v=fe(),x=v.Uint8Array;h.exports=x}),Pt=o((l,h)=>{var v=wt();function x(C){var j=new C.constructor(C.byteLength);return new v(j).set(new v(C)),j}h.exports=x}),kt=o((l,h)=>{var v=Pt();function x(C,j){var X=j?v(C.buffer):C.buffer;return new C.constructor(X,C.byteOffset,C.length)}h.exports=x}),Jt=o((l,h)=>{function v(x,C){var j=-1,X=x.length;for(C||(C=Array(X));++j<X;)C[j]=x[j];return C}h.exports=v}),on=o((l,h)=>{var v=T(),x=Object.create,C=function(){function j(){}return function(X){if(!v(X))return{};if(x)return x(X);j.prototype=X;var re=new j;return j.prototype=void 0,re}}();h.exports=C}),cn=o((l,h)=>{function v(x,C){return function(j){return x(C(j))}}h.exports=v}),Ke=o((l,h)=>{var v=cn(),x=v(Object.getPrototypeOf,Object);h.exports=x}),ot=o((l,h)=>{var v=Object.prototype;function x(C){var j=C&&C.constructor,X=typeof j=="function"&&j.prototype||v;return C===X}h.exports=x}),rt=o((l,h)=>{var v=on(),x=Ke(),C=ot();function j(X){return typeof X.constructor=="function"&&!C(X)?v(x(X)):{}}h.exports=j}),$t=o((l,h)=>{function v(x){return x!=null&&typeof x=="object"}h.exports=v}),Qt=o((l,h)=>{var v=Z(),x=$t(),C="[object Arguments]";function j(X){return x(X)&&v(X)==C}h.exports=j}),Rn=o((l,h)=>{var v=Qt(),x=$t(),C=Object.prototype,j=C.hasOwnProperty,X=C.propertyIsEnumerable,re=v(function(){return arguments}())?v:function(ge){return x(ge)&&j.call(ge,"callee")&&!X.call(ge,"callee")};h.exports=re}),Ln=o((l,h)=>{var v=Array.isArray;h.exports=v}),Dn=o((l,h)=>{var v=9007199254740991;function x(C){return typeof C=="number"&&C>-1&&C%1==0&&C<=v}h.exports=x}),ar=o((l,h)=>{var v=N(),x=Dn();function C(j){return j!=null&&x(j.length)&&!v(j)}h.exports=C}),En=o((l,h)=>{var v=ar(),x=$t();function C(j){return x(j)&&v(j)}h.exports=C}),jn=o((l,h)=>{function v(){return!1}h.exports=v}),An=o((l,h)=>{var v=fe(),x=jn(),C=typeof l=="object"&&l&&!l.nodeType&&l,j=C&&typeof h=="object"&&h&&!h.nodeType&&h,X=j&&j.exports===C,re=X?v.Buffer:void 0,ge=re?re.isBuffer:void 0,Le=ge||x;h.exports=Le}),Yn=o((l,h)=>{var v=Z(),x=Ke(),C=$t(),j="[object Object]",X=Function.prototype,re=Object.prototype,ge=X.toString,Le=re.hasOwnProperty,Xe=ge.call(Object);function Ue(vt){if(!C(vt)||v(vt)!=j)return!1;var Dt=x(vt);if(Dt===null)return!0;var Xt=Le.call(Dt,"constructor")&&Dt.constructor;return typeof Xt=="function"&&Xt instanceof Xt&&ge.call(Xt)==Xe}h.exports=Ue}),wr=o((l,h)=>{var v=Z(),x=Dn(),C=$t(),j="[object Arguments]",X="[object Array]",re="[object Boolean]",ge="[object Date]",Le="[object Error]",Xe="[object Function]",Ue="[object Map]",vt="[object Number]",Dt="[object Object]",Xt="[object RegExp]",_n="[object Set]",Sn="[object String]",hr="[object WeakMap]",Je="[object ArrayBuffer]",nt="[object DataView]",ct="[object Float32Array]",jt="[object Float64Array]",bt="[object Int8Array]",Ot="[object Int16Array]",me="[object Int32Array]",Pe="[object Uint8Array]",Be="[object Uint8ClampedArray]",Oe="[object Uint16Array]",je="[object Uint32Array]",$e={};$e[ct]=$e[jt]=$e[bt]=$e[Ot]=$e[me]=$e[Pe]=$e[Be]=$e[Oe]=$e[je]=!0,$e[j]=$e[X]=$e[Je]=$e[re]=$e[nt]=$e[ge]=$e[Le]=$e[Xe]=$e[Ue]=$e[vt]=$e[Dt]=$e[Xt]=$e[_n]=$e[Sn]=$e[hr]=!1;function at(lt){return C(lt)&&x(lt.length)&&!!$e[v(lt)]}h.exports=at}),Or=o((l,h)=>{function v(x){return function(C){return x(C)}}h.exports=v}),gr=o((l,h)=>{var v=he(),x=typeof l=="object"&&l&&!l.nodeType&&l,C=x&&typeof h=="object"&&h&&!h.nodeType&&h,j=C&&C.exports===x,X=j&&v.process,re=function(){try{var ge=C&&C.require&&C.require("util").types;return ge||X&&X.binding&&X.binding("util")}catch{}}();h.exports=re}),oi=o((l,h)=>{var v=wr(),x=Or(),C=gr(),j=C&&C.isTypedArray,X=j?x(j):v;h.exports=X}),ft=o((l,h)=>{function v(x,C){if(!(C==="constructor"&&typeof x[C]=="function")&&C!="__proto__")return x[C]}h.exports=v}),Qe=o((l,h)=>{var v=He(),x=m(),C=Object.prototype,j=C.hasOwnProperty;function X(re,ge,Le){var Xe=re[ge];(!(j.call(re,ge)&&x(Xe,Le))||Le===void 0&&!(ge in re))&&v(re,ge,Le)}h.exports=X}),Ut=o((l,h)=>{var v=Qe(),x=He();function C(j,X,re,ge){var Le=!re;re||(re={});for(var Xe=-1,Ue=X.length;++Xe<Ue;){var vt=X[Xe],Dt=ge?ge(re[vt],j[vt],vt,re,j):void 0;Dt===void 0&&(Dt=j[vt]),Le?x(re,vt,Dt):v(re,vt,Dt)}return re}h.exports=C}),xn=o((l,h)=>{function v(x,C){for(var j=-1,X=Array(x);++j<x;)X[j]=C(j);return X}h.exports=v}),vn=o((l,h)=>{var v=9007199254740991,x=/^(?:0|[1-9]\d*)$/;function C(j,X){var re=typeof j;return X=X??v,!!X&&(re=="number"||re!="symbol"&&x.test(j))&&j>-1&&j%1==0&&j<X}h.exports=C}),bn=o((l,h)=>{var v=xn(),x=Rn(),C=Ln(),j=An(),X=vn(),re=oi(),ge=Object.prototype,Le=ge.hasOwnProperty;function Xe(Ue,vt){var Dt=C(Ue),Xt=!Dt&&x(Ue),_n=!Dt&&!Xt&&j(Ue),Sn=!Dt&&!Xt&&!_n&&re(Ue),hr=Dt||Xt||_n||Sn,Je=hr?v(Ue.length,String):[],nt=Je.length;for(var ct in Ue)(vt||Le.call(Ue,ct))&&!(hr&&(ct=="length"||_n&&(ct=="offset"||ct=="parent")||Sn&&(ct=="buffer"||ct=="byteLength"||ct=="byteOffset")||X(ct,nt)))&&Je.push(ct);return Je}h.exports=Xe}),qt=o((l,h)=>{function v(x){var C=[];if(x!=null)for(var j in Object(x))C.push(j);return C}h.exports=v}),Hn=o((l,h)=>{var v=T(),x=ot(),C=qt(),j=Object.prototype,X=j.hasOwnProperty;function re(ge){if(!v(ge))return C(ge);var Le=x(ge),Xe=[];for(var Ue in ge)Ue=="constructor"&&(Le||!X.call(ge,Ue))||Xe.push(Ue);return Xe}h.exports=re}),St=o((l,h)=>{var v=bn(),x=Hn(),C=ar();function j(X){return C(X)?v(X,!0):x(X)}h.exports=j}),mt=o((l,h)=>{var v=Ut(),x=St();function C(j){return v(j,x(j))}h.exports=C}),wn=o((l,h)=>{var v=tt(),x=ze(),C=kt(),j=Jt(),X=rt(),re=Rn(),ge=Ln(),Le=En(),Xe=An(),Ue=N(),vt=T(),Dt=Yn(),Xt=oi(),_n=ft(),Sn=mt();function hr(Je,nt,ct,jt,bt,Ot,me){var Pe=_n(Je,ct),Be=_n(nt,ct),Oe=me.get(Be);if(Oe){v(Je,ct,Oe);return}var je=Ot?Ot(Pe,Be,ct+"",Je,nt,me):void 0,$e=je===void 0;if($e){var at=ge(Be),lt=!at&&Xe(Be),pt=!at&&!lt&&Xt(Be);je=Be,at||lt||pt?ge(Pe)?je=Pe:Le(Pe)?je=j(Pe):lt?($e=!1,je=x(Be,!0)):pt?($e=!1,je=C(Be,!0)):je=[]:Dt(Be)||re(Be)?(je=Pe,re(Pe)?je=Sn(Pe):(!vt(Pe)||Ue(Pe))&&(je=X(Be))):$e=!1}$e&&(me.set(Be,je),bt(je,Be,jt,Ot,me),me.delete(Be)),v(Je,ct,je)}h.exports=hr}),ei=o((l,h)=>{var v=de(),x=tt(),C=et(),j=wn(),X=T(),re=St(),ge=ft();function Le(Xe,Ue,vt,Dt,Xt){Xe!==Ue&&C(Ue,function(_n,Sn){if(Xt||(Xt=new v),X(_n))j(Xe,Ue,Sn,vt,Le,Dt,Xt);else{var hr=Dt?Dt(ge(Xe,Sn),_n,Sn+"",Xe,Ue,Xt):void 0;hr===void 0&&(hr=_n),x(Xe,Sn,hr)}},re)}h.exports=Le}),Tt=o((l,h)=>{function v(x){return x}h.exports=v}),Fn=o((l,h)=>{function v(x,C,j){switch(j.length){case 0:return x.call(C);case 1:return x.call(C,j[0]);case 2:return x.call(C,j[0],j[1]);case 3:return x.call(C,j[0],j[1],j[2])}return x.apply(C,j)}h.exports=v}),Qn=o((l,h)=>{var v=Fn(),x=Math.max;function C(j,X,re){return X=x(X===void 0?j.length-1:X,0),function(){for(var ge=arguments,Le=-1,Xe=x(ge.length-X,0),Ue=Array(Xe);++Le<Xe;)Ue[Le]=ge[X+Le];Le=-1;for(var vt=Array(X+1);++Le<X;)vt[Le]=ge[Le];return vt[X]=re(Ue),v(j,this,vt)}}h.exports=C}),Mi=o((l,h)=>{function v(x){return function(){return x}}h.exports=v}),Sr=o((l,h)=>{var v=Mi(),x=We(),C=Tt(),j=x?function(X,re){return x(X,"toString",{configurable:!0,enumerable:!1,value:v(re),writable:!0})}:C;h.exports=j}),Pr=o((l,h)=>{var v=800,x=16,C=Date.now;function j(X){var re=0,ge=0;return function(){var Le=C(),Xe=x-(Le-ge);if(ge=Le,Xe>0){if(++re>=v)return arguments[0]}else re=0;return X.apply(void 0,arguments)}}h.exports=j}),dr=o((l,h)=>{var v=Sr(),x=Pr(),C=x(v);h.exports=C}),Ai=o((l,h)=>{var v=Tt(),x=Qn(),C=dr();function j(X,re){return C(x(X,re,v),X+"")}h.exports=j}),xr=o((l,h)=>{var v=m(),x=ar(),C=vn(),j=T();function X(re,ge,Le){if(!j(Le))return!1;var Xe=typeof ge;return(Xe=="number"?x(Le)&&C(ge,Le.length):Xe=="string"&&ge in Le)?v(Le[ge],re):!1}h.exports=X}),Gr=o((l,h)=>{var v=Ai(),x=xr();function C(j){return v(function(X,re){var ge=-1,Le=re.length,Xe=Le>1?re[Le-1]:void 0,Ue=Le>2?re[2]:void 0;for(Xe=j.length>3&&typeof Xe=="function"?(Le--,Xe):void 0,Ue&&x(re[0],re[1],Ue)&&(Xe=Le<3?void 0:Xe,Le=1),X=Object(X);++ge<Le;){var vt=re[ge];vt&&j(X,vt,ge,Xe)}return X})}h.exports=C}),Ir=o((l,h)=>{var v=ei(),x=Gr(),C=x(function(j,X,re){v(j,X,re)});h.exports=C}),tn=o((l,h)=>{var v=Z(),x=$t(),C="[object Symbol]";function j(X){return typeof X=="symbol"||x(X)&&v(X)==C}h.exports=j}),zi=o((l,h)=>{var v=Ln(),x=tn(),C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/;function X(re,ge){if(v(re))return!1;var Le=typeof re;return Le=="number"||Le=="symbol"||Le=="boolean"||re==null||x(re)?!0:j.test(re)||!C.test(re)||ge!=null&&re in Object(ge)}h.exports=X}),Bi=o((l,h)=>{var v=te(),x="Expected a function";function C(j,X){if(typeof j!="function"||X!=null&&typeof X!="function")throw new TypeError(x);var re=function(){var ge=arguments,Le=X?X.apply(this,ge):ge[0],Xe=re.cache;if(Xe.has(Le))return Xe.get(Le);var Ue=j.apply(this,ge);return re.cache=Xe.set(Le,Ue)||Xe,Ue};return re.cache=new(C.Cache||v),re}C.Cache=v,h.exports=C}),Qi=o((l,h)=>{var v=Bi(),x=500;function C(j){var X=v(j,function(ge){return re.size===x&&re.clear(),ge}),re=X.cache;return X}h.exports=C}),ti=o((l,h)=>{var v=Qi(),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,C=/\\(\\)?/g,j=v(function(X){var re=[];return X.charCodeAt(0)===46&&re.push(""),X.replace(x,function(ge,Le,Xe,Ue){re.push(Xe?Ue.replace(C,"$1"):Le||ge)}),re});h.exports=j}),Br=o((l,h)=>{function v(x,C){for(var j=-1,X=x==null?0:x.length,re=Array(X);++j<X;)re[j]=C(x[j],j,x);return re}h.exports=v}),ci=o((l,h)=>{var v=ve(),x=Br(),C=Ln(),j=tn(),X=v?v.prototype:void 0,re=X?X.toString:void 0;function ge(Le){if(typeof Le=="string")return Le;if(C(Le))return x(Le,ge)+"";if(j(Le))return re?re.call(Le):"";var Xe=Le+"";return Xe=="0"&&1/Le==-1/0?"-0":Xe}h.exports=ge}),mr=o((l,h)=>{var v=ci();function x(C){return C==null?"":v(C)}h.exports=x}),Si=o((l,h)=>{var v=Ln(),x=zi(),C=ti(),j=mr();function X(re,ge){return v(re)?re:x(re,ge)?[re]:C(j(re))}h.exports=X}),gs=o((l,h)=>{var v=tn();function x(C){if(typeof C=="string"||v(C))return C;var j=C+"";return j=="0"&&1/C==-1/0?"-0":j}h.exports=x}),va=o((l,h)=>{var v=Si(),x=gs();function C(j,X){X=v(X,j);for(var re=0,ge=X.length;j!=null&&re<ge;)j=j[x(X[re++])];return re&&re==ge?j:void 0}h.exports=C}),Rr=o((l,h)=>{var v=va();function x(C,j,X){var re=C==null?void 0:v(C,j);return re===void 0?X:re}h.exports=x}),mn=o((l,h)=>{(function(v,x){typeof l=="object"&&typeof h<"u"?h.exports=x():(v=v||self).RBush=x()})(l,function(){function v(Je,nt,ct,jt,bt){(function Ot(me,Pe,Be,Oe,je){for(;Oe>Be;){if(Oe-Be>600){var $e=Oe-Be+1,at=Pe-Be+1,lt=Math.log($e),pt=.5*Math.exp(2*lt/3),Et=.5*Math.sqrt(lt*pt*($e-pt)/$e)*(at-$e/2<0?-1:1),Ct=Math.max(Be,Math.floor(Pe-at*pt/$e+Et)),sn=Math.min(Oe,Math.floor(Pe+($e-at)*pt/$e+Et));Ot(me,Pe,Ct,sn,je)}var zn=me[Pe],Wn=Be,nr=Oe;for(x(me,Be,Pe),je(me[Oe],zn)>0&&x(me,Be,Oe);Wn<nr;){for(x(me,Wn,nr),Wn++,nr--;je(me[Wn],zn)<0;)Wn++;for(;je(me[nr],zn)>0;)nr--}je(me[Be],zn)===0?x(me,Be,nr):x(me,++nr,Oe),nr<=Pe&&(Be=nr+1),Pe<=nr&&(Oe=nr-1)}})(Je,nt,ct||0,jt||Je.length-1,bt||C)}function x(Je,nt,ct){var jt=Je[nt];Je[nt]=Je[ct],Je[ct]=jt}function C(Je,nt){return Je<nt?-1:Je>nt?1:0}var j=function(Je){Je===void 0&&(Je=9),this._maxEntries=Math.max(4,Je),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function X(Je,nt,ct){if(!ct)return nt.indexOf(Je);for(var jt=0;jt<nt.length;jt++)if(ct(Je,nt[jt]))return jt;return-1}function re(Je,nt){ge(Je,0,Je.children.length,nt,Je)}function ge(Je,nt,ct,jt,bt){bt||(bt=Sn(null)),bt.minX=1/0,bt.minY=1/0,bt.maxX=-1/0,bt.maxY=-1/0;for(var Ot=nt;Ot<ct;Ot++){var me=Je.children[Ot];Le(bt,Je.leaf?jt(me):me)}return bt}function Le(Je,nt){return Je.minX=Math.min(Je.minX,nt.minX),Je.minY=Math.min(Je.minY,nt.minY),Je.maxX=Math.max(Je.maxX,nt.maxX),Je.maxY=Math.max(Je.maxY,nt.maxY),Je}function Xe(Je,nt){return Je.minX-nt.minX}function Ue(Je,nt){return Je.minY-nt.minY}function vt(Je){return(Je.maxX-Je.minX)*(Je.maxY-Je.minY)}function Dt(Je){return Je.maxX-Je.minX+(Je.maxY-Je.minY)}function Xt(Je,nt){return Je.minX<=nt.minX&&Je.minY<=nt.minY&&nt.maxX<=Je.maxX&&nt.maxY<=Je.maxY}function _n(Je,nt){return nt.minX<=Je.maxX&&nt.minY<=Je.maxY&&nt.maxX>=Je.minX&&nt.maxY>=Je.minY}function Sn(Je){return{children:Je,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function hr(Je,nt,ct,jt,bt){for(var Ot=[nt,ct];Ot.length;)if(!((ct=Ot.pop())-(nt=Ot.pop())<=jt)){var me=nt+Math.ceil((ct-nt)/jt/2)*jt;v(Je,me,nt,ct,bt),Ot.push(nt,me,me,ct)}}return j.prototype.all=function(){return this._all(this.data,[])},j.prototype.search=function(Je){var nt=this.data,ct=[];if(!_n(Je,nt))return ct;for(var jt=this.toBBox,bt=[];nt;){for(var Ot=0;Ot<nt.children.length;Ot++){var me=nt.children[Ot],Pe=nt.leaf?jt(me):me;_n(Je,Pe)&&(nt.leaf?ct.push(me):Xt(Je,Pe)?this._all(me,ct):bt.push(me))}nt=bt.pop()}return ct},j.prototype.collides=function(Je){var nt=this.data;if(!_n(Je,nt))return!1;for(var ct=[];nt;){for(var jt=0;jt<nt.children.length;jt++){var bt=nt.children[jt],Ot=nt.leaf?this.toBBox(bt):bt;if(_n(Je,Ot)){if(nt.leaf||Xt(Je,Ot))return!0;ct.push(bt)}}nt=ct.pop()}return!1},j.prototype.load=function(Je){if(!Je||!Je.length)return this;if(Je.length<this._minEntries){for(var nt=0;nt<Je.length;nt++)this.insert(Je[nt]);return this}var ct=this._build(Je.slice(),0,Je.length-1,0);if(this.data.children.length)if(this.data.height===ct.height)this._splitRoot(this.data,ct);else{if(this.data.height<ct.height){var jt=this.data;this.data=ct,ct=jt}this._insert(ct,this.data.height-ct.height-1,!0)}else this.data=ct;return this},j.prototype.insert=function(Je){return Je&&this._insert(Je,this.data.height-1),this},j.prototype.clear=function(){return this.data=Sn([]),this},j.prototype.remove=function(Je,nt){if(!Je)return this;for(var ct,jt,bt,Ot=this.data,me=this.toBBox(Je),Pe=[],Be=[];Ot||Pe.length;){if(Ot||(Ot=Pe.pop(),jt=Pe[Pe.length-1],ct=Be.pop(),bt=!0),Ot.leaf){var Oe=X(Je,Ot.children,nt);if(Oe!==-1)return Ot.children.splice(Oe,1),Pe.push(Ot),this._condense(Pe),this}bt||Ot.leaf||!Xt(Ot,me)?jt?(ct++,Ot=jt.children[ct],bt=!1):Ot=null:(Pe.push(Ot),Be.push(ct),ct=0,jt=Ot,Ot=Ot.children[0])}return this},j.prototype.toBBox=function(Je){return Je},j.prototype.compareMinX=function(Je,nt){return Je.minX-nt.minX},j.prototype.compareMinY=function(Je,nt){return Je.minY-nt.minY},j.prototype.toJSON=function(){return this.data},j.prototype.fromJSON=function(Je){return this.data=Je,this},j.prototype._all=function(Je,nt){for(var ct=[];Je;)Je.leaf?nt.push.apply(nt,Je.children):ct.push.apply(ct,Je.children),Je=ct.pop();return nt},j.prototype._build=function(Je,nt,ct,jt){var bt,Ot=ct-nt+1,me=this._maxEntries;if(Ot<=me)return re(bt=Sn(Je.slice(nt,ct+1)),this.toBBox),bt;jt||(jt=Math.ceil(Math.log(Ot)/Math.log(me)),me=Math.ceil(Ot/Math.pow(me,jt-1))),(bt=Sn([])).leaf=!1,bt.height=jt;var Pe=Math.ceil(Ot/me),Be=Pe*Math.ceil(Math.sqrt(me));hr(Je,nt,ct,Be,this.compareMinX);for(var Oe=nt;Oe<=ct;Oe+=Be){var je=Math.min(Oe+Be-1,ct);hr(Je,Oe,je,Pe,this.compareMinY);for(var $e=Oe;$e<=je;$e+=Pe){var at=Math.min($e+Pe-1,je);bt.children.push(this._build(Je,$e,at,jt-1))}}return re(bt,this.toBBox),bt},j.prototype._chooseSubtree=function(Je,nt,ct,jt){for(;jt.push(nt),!nt.leaf&&jt.length-1!==ct;){for(var bt=1/0,Ot=1/0,me=void 0,Pe=0;Pe<nt.children.length;Pe++){var Be=nt.children[Pe],Oe=vt(Be),je=($e=Je,at=Be,(Math.max(at.maxX,$e.maxX)-Math.min(at.minX,$e.minX))*(Math.max(at.maxY,$e.maxY)-Math.min(at.minY,$e.minY))-Oe);je<Ot?(Ot=je,bt=Oe<bt?Oe:bt,me=Be):je===Ot&&Oe<bt&&(bt=Oe,me=Be)}nt=me||nt.children[0]}var $e,at;return nt},j.prototype._insert=function(Je,nt,ct){var jt=ct?Je:this.toBBox(Je),bt=[],Ot=this._chooseSubtree(jt,this.data,nt,bt);for(Ot.children.push(Je),Le(Ot,jt);nt>=0&&bt[nt].children.length>this._maxEntries;)this._split(bt,nt),nt--;this._adjustParentBBoxes(jt,bt,nt)},j.prototype._split=function(Je,nt){var ct=Je[nt],jt=ct.children.length,bt=this._minEntries;this._chooseSplitAxis(ct,bt,jt);var Ot=this._chooseSplitIndex(ct,bt,jt),me=Sn(ct.children.splice(Ot,ct.children.length-Ot));me.height=ct.height,me.leaf=ct.leaf,re(ct,this.toBBox),re(me,this.toBBox),nt?Je[nt-1].children.push(me):this._splitRoot(ct,me)},j.prototype._splitRoot=function(Je,nt){this.data=Sn([Je,nt]),this.data.height=Je.height+1,this.data.leaf=!1,re(this.data,this.toBBox)},j.prototype._chooseSplitIndex=function(Je,nt,ct){for(var jt,bt,Ot,me,Pe,Be,Oe,je=1/0,$e=1/0,at=nt;at<=ct-nt;at++){var lt=ge(Je,0,at,this.toBBox),pt=ge(Je,at,ct,this.toBBox),Et=(bt=lt,Ot=pt,me=void 0,Pe=void 0,Be=void 0,Oe=void 0,me=Math.max(bt.minX,Ot.minX),Pe=Math.max(bt.minY,Ot.minY),Be=Math.min(bt.maxX,Ot.maxX),Oe=Math.min(bt.maxY,Ot.maxY),Math.max(0,Be-me)*Math.max(0,Oe-Pe)),Ct=vt(lt)+vt(pt);Et<je?(je=Et,jt=at,$e=Ct<$e?Ct:$e):Et===je&&Ct<$e&&($e=Ct,jt=at)}return jt||ct-nt},j.prototype._chooseSplitAxis=function(Je,nt,ct){var jt=Je.leaf?this.compareMinX:Xe,bt=Je.leaf?this.compareMinY:Ue;this._allDistMargin(Je,nt,ct,jt)<this._allDistMargin(Je,nt,ct,bt)&&Je.children.sort(jt)},j.prototype._allDistMargin=function(Je,nt,ct,jt){Je.children.sort(jt);for(var bt=this.toBBox,Ot=ge(Je,0,nt,bt),me=ge(Je,ct-nt,ct,bt),Pe=Dt(Ot)+Dt(me),Be=nt;Be<ct-nt;Be++){var Oe=Je.children[Be];Le(Ot,Je.leaf?bt(Oe):Oe),Pe+=Dt(Ot)}for(var je=ct-nt-1;je>=nt;je--){var $e=Je.children[je];Le(me,Je.leaf?bt($e):$e),Pe+=Dt(me)}return Pe},j.prototype._adjustParentBBoxes=function(Je,nt,ct){for(var jt=ct;jt>=0;jt--)Le(nt[jt],Je)},j.prototype._condense=function(Je){for(var nt=Je.length-1,ct=void 0;nt>=0;nt--)Je[nt].children.length===0?nt>0?(ct=Je[nt-1].children).splice(ct.indexOf(Je[nt]),1):this.clear():re(Je[nt],this.toBBox)},j})}),Zn=o(l=>{Object.defineProperty(l,"__esModule",{value:!0}),l.earthRadius=63710088e-1,l.factors={centimeters:l.earthRadius*100,centimetres:l.earthRadius*100,degrees:l.earthRadius/111325,feet:l.earthRadius*3.28084,inches:l.earthRadius*39.37,kilometers:l.earthRadius/1e3,kilometres:l.earthRadius/1e3,meters:l.earthRadius,metres:l.earthRadius,miles:l.earthRadius/1609.344,millimeters:l.earthRadius*1e3,millimetres:l.earthRadius*1e3,nauticalmiles:l.earthRadius/1852,radians:1,yards:l.earthRadius*1.0936},l.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/l.earthRadius,yards:1.0936133},l.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function h(Oe,je,$e){$e===void 0&&($e={});var at={type:"Feature"};return($e.id===0||$e.id)&&(at.id=$e.id),$e.bbox&&(at.bbox=$e.bbox),at.properties=je||{},at.geometry=Oe,at}l.feature=h;function v(Oe,je,$e){switch(Oe){case"Point":return x(je).geometry;case"LineString":return re(je).geometry;case"Polygon":return j(je).geometry;case"MultiPoint":return Ue(je).geometry;case"MultiLineString":return Xe(je).geometry;case"MultiPolygon":return vt(je).geometry;default:throw new Error(Oe+" is invalid")}}l.geometry=v;function x(Oe,je,$e){if($e===void 0&&($e={}),!Oe)throw new Error("coordinates is required");if(!Array.isArray(Oe))throw new Error("coordinates must be an Array");if(Oe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ot(Oe[0])||!Ot(Oe[1]))throw new Error("coordinates must contain numbers");var at={type:"Point",coordinates:Oe};return h(at,je,$e)}l.point=x;function C(Oe,je,$e){return $e===void 0&&($e={}),Le(Oe.map(function(at){return x(at,je)}),$e)}l.points=C;function j(Oe,je,$e){$e===void 0&&($e={});for(var at=0,lt=Oe;at<lt.length;at++){var pt=lt[at];if(pt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Et=0;Et<pt[pt.length-1].length;Et++)if(pt[pt.length-1][Et]!==pt[0][Et])throw new Error("First and last Position are not equivalent.")}var Ct={type:"Polygon",coordinates:Oe};return h(Ct,je,$e)}l.polygon=j;function X(Oe,je,$e){return $e===void 0&&($e={}),Le(Oe.map(function(at){return j(at,je)}),$e)}l.polygons=X;function re(Oe,je,$e){if($e===void 0&&($e={}),Oe.length<2)throw new Error("coordinates must be an array of two or more positions");var at={type:"LineString",coordinates:Oe};return h(at,je,$e)}l.lineString=re;function ge(Oe,je,$e){return $e===void 0&&($e={}),Le(Oe.map(function(at){return re(at,je)}),$e)}l.lineStrings=ge;function Le(Oe,je){je===void 0&&(je={});var $e={type:"FeatureCollection"};return je.id&&($e.id=je.id),je.bbox&&($e.bbox=je.bbox),$e.features=Oe,$e}l.featureCollection=Le;function Xe(Oe,je,$e){$e===void 0&&($e={});var at={type:"MultiLineString",coordinates:Oe};return h(at,je,$e)}l.multiLineString=Xe;function Ue(Oe,je,$e){$e===void 0&&($e={});var at={type:"MultiPoint",coordinates:Oe};return h(at,je,$e)}l.multiPoint=Ue;function vt(Oe,je,$e){$e===void 0&&($e={});var at={type:"MultiPolygon",coordinates:Oe};return h(at,je,$e)}l.multiPolygon=vt;function Dt(Oe,je,$e){$e===void 0&&($e={});var at={type:"GeometryCollection",geometries:Oe};return h(at,je,$e)}l.geometryCollection=Dt;function Xt(Oe,je){if(je===void 0&&(je=0),je&&!(je>=0))throw new Error("precision must be a positive number");var $e=Math.pow(10,je||0);return Math.round(Oe*$e)/$e}l.round=Xt;function _n(Oe,je){je===void 0&&(je="kilometers");var $e=l.factors[je];if(!$e)throw new Error(je+" units is invalid");return Oe*$e}l.radiansToLength=_n;function Sn(Oe,je){je===void 0&&(je="kilometers");var $e=l.factors[je];if(!$e)throw new Error(je+" units is invalid");return Oe/$e}l.lengthToRadians=Sn;function hr(Oe,je){return nt(Sn(Oe,je))}l.lengthToDegrees=hr;function Je(Oe){var je=Oe%360;return je<0&&(je+=360),je}l.bearingToAzimuth=Je;function nt(Oe){var je=Oe%(2*Math.PI);return je*180/Math.PI}l.radiansToDegrees=nt;function ct(Oe){var je=Oe%360;return je*Math.PI/180}l.degreesToRadians=ct;function jt(Oe,je,$e){if(je===void 0&&(je="kilometers"),$e===void 0&&($e="kilometers"),!(Oe>=0))throw new Error("length must be a positive number");return _n(Sn(Oe,je),$e)}l.convertLength=jt;function bt(Oe,je,$e){if(je===void 0&&(je="meters"),$e===void 0&&($e="kilometers"),!(Oe>=0))throw new Error("area must be a positive number");var at=l.areaFactors[je];if(!at)throw new Error("invalid original units");var lt=l.areaFactors[$e];if(!lt)throw new Error("invalid final units");return Oe/at*lt}l.convertArea=bt;function Ot(Oe){return!isNaN(Oe)&&Oe!==null&&!Array.isArray(Oe)}l.isNumber=Ot;function me(Oe){return!!Oe&&Oe.constructor===Object}l.isObject=me;function Pe(Oe){if(!Oe)throw new Error("bbox is required");if(!Array.isArray(Oe))throw new Error("bbox must be an Array");if(Oe.length!==4&&Oe.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Oe.forEach(function(je){if(!Ot(je))throw new Error("bbox must only contain numbers")})}l.validateBBox=Pe;function Be(Oe){if(!Oe)throw new Error("id is required");if(["string","number"].indexOf(typeof Oe)===-1)throw new Error("id must be a number or a string")}l.validateId=Be}),Ei=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var h=Zn();function v(nt,ct,jt){if(nt!==null)for(var bt,Ot,me,Pe,Be,Oe,je,$e=0,at=0,lt,pt=nt.type,Et=pt==="FeatureCollection",Ct=pt==="Feature",sn=Et?nt.features.length:1,zn=0;zn<sn;zn++){je=Et?nt.features[zn].geometry:Ct?nt.geometry:nt,lt=je?je.type==="GeometryCollection":!1,Be=lt?je.geometries.length:1;for(var Wn=0;Wn<Be;Wn++){var nr=0,mi=0;if(Pe=lt?je.geometries[Wn]:je,Pe!==null){Oe=Pe.coordinates;var Ni=Pe.type;switch($e=jt&&(Ni==="Polygon"||Ni==="MultiPolygon")?1:0,Ni){case null:break;case"Point":if(ct(Oe,at,zn,nr,mi)===!1)return!1;at++,nr++;break;case"LineString":case"MultiPoint":for(bt=0;bt<Oe.length;bt++){if(ct(Oe[bt],at,zn,nr,mi)===!1)return!1;at++,Ni==="MultiPoint"&&nr++}Ni==="LineString"&&nr++;break;case"Polygon":case"MultiLineString":for(bt=0;bt<Oe.length;bt++){for(Ot=0;Ot<Oe[bt].length-$e;Ot++){if(ct(Oe[bt][Ot],at,zn,nr,mi)===!1)return!1;at++}Ni==="MultiLineString"&&nr++,Ni==="Polygon"&&mi++}Ni==="Polygon"&&nr++;break;case"MultiPolygon":for(bt=0;bt<Oe.length;bt++){for(mi=0,Ot=0;Ot<Oe[bt].length;Ot++){for(me=0;me<Oe[bt][Ot].length-$e;me++){if(ct(Oe[bt][Ot][me],at,zn,nr,mi)===!1)return!1;at++}mi++}nr++}break;case"GeometryCollection":for(bt=0;bt<Pe.geometries.length;bt++)if(v(Pe.geometries[bt],ct,jt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function x(nt,ct,jt,bt){var Ot=jt;return v(nt,function(me,Pe,Be,Oe,je){Pe===0&&jt===void 0?Ot=me:Ot=ct(Ot,me,Pe,Be,Oe,je)},bt),Ot}function C(nt,ct){var jt;switch(nt.type){case"FeatureCollection":for(jt=0;jt<nt.features.length&&ct(nt.features[jt].properties,jt)!==!1;jt++);break;case"Feature":ct(nt.properties,0);break}}function j(nt,ct,jt){var bt=jt;return C(nt,function(Ot,me){me===0&&jt===void 0?bt=Ot:bt=ct(bt,Ot,me)}),bt}function X(nt,ct){if(nt.type==="Feature")ct(nt,0);else if(nt.type==="FeatureCollection")for(var jt=0;jt<nt.features.length&&ct(nt.features[jt],jt)!==!1;jt++);}function re(nt,ct,jt){var bt=jt;return X(nt,function(Ot,me){me===0&&jt===void 0?bt=Ot:bt=ct(bt,Ot,me)}),bt}function ge(nt){var ct=[];return v(nt,function(jt){ct.push(jt)}),ct}function Le(nt,ct){var jt,bt,Ot,me,Pe,Be,Oe,je,$e,at,lt=0,pt=nt.type==="FeatureCollection",Et=nt.type==="Feature",Ct=pt?nt.features.length:1;for(jt=0;jt<Ct;jt++){for(Be=pt?nt.features[jt].geometry:Et?nt.geometry:nt,je=pt?nt.features[jt].properties:Et?nt.properties:{},$e=pt?nt.features[jt].bbox:Et?nt.bbox:void 0,at=pt?nt.features[jt].id:Et?nt.id:void 0,Oe=Be?Be.type==="GeometryCollection":!1,Pe=Oe?Be.geometries.length:1,Ot=0;Ot<Pe;Ot++){if(me=Oe?Be.geometries[Ot]:Be,me===null){if(ct(null,lt,je,$e,at)===!1)return!1;continue}switch(me.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ct(me,lt,je,$e,at)===!1)return!1;break}case"GeometryCollection":{for(bt=0;bt<me.geometries.length;bt++)if(ct(me.geometries[bt],lt,je,$e,at)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}lt++}}function Xe(nt,ct,jt){var bt=jt;return Le(nt,function(Ot,me,Pe,Be,Oe){me===0&&jt===void 0?bt=Ot:bt=ct(bt,Ot,me,Pe,Be,Oe)}),bt}function Ue(nt,ct){Le(nt,function(jt,bt,Ot,me,Pe){var Be=jt===null?null:jt.type;switch(Be){case null:case"Point":case"LineString":case"Polygon":return ct(h.feature(jt,Ot,{bbox:me,id:Pe}),bt,0)===!1?!1:void 0}var Oe;switch(Be){case"MultiPoint":Oe="Point";break;case"MultiLineString":Oe="LineString";break;case"MultiPolygon":Oe="Polygon";break}for(var je=0;je<jt.coordinates.length;je++){var $e=jt.coordinates[je],at={type:Oe,coordinates:$e};if(ct(h.feature(at,Ot),bt,je)===!1)return!1}})}function vt(nt,ct,jt){var bt=jt;return Ue(nt,function(Ot,me,Pe){me===0&&Pe===0&&jt===void 0?bt=Ot:bt=ct(bt,Ot,me,Pe)}),bt}function Dt(nt,ct){Ue(nt,function(jt,bt,Ot){var me=0;if(jt.geometry){var Pe=jt.geometry.type;if(!(Pe==="Point"||Pe==="MultiPoint")){var Be,Oe=0,je=0,$e=0;if(v(jt,function(at,lt,pt,Et,Ct){if(Be===void 0||bt>Oe||Et>je||Ct>$e){Be=at,Oe=bt,je=Et,$e=Ct,me=0;return}var sn=h.lineString([Be,at],jt.properties);if(ct(sn,bt,Ot,Ct,me)===!1)return!1;me++,Be=at})===!1)return!1}}})}function Xt(nt,ct,jt){var bt=jt,Ot=!1;return Dt(nt,function(me,Pe,Be,Oe,je){Ot===!1&&jt===void 0?bt=me:bt=ct(bt,me,Pe,Be,Oe,je),Ot=!0}),bt}function _n(nt,ct){if(!nt)throw new Error("geojson is required");Ue(nt,function(jt,bt,Ot){if(jt.geometry!==null){var me=jt.geometry.type,Pe=jt.geometry.coordinates;switch(me){case"LineString":if(ct(jt,bt,Ot,0,0)===!1)return!1;break;case"Polygon":for(var Be=0;Be<Pe.length;Be++)if(ct(h.lineString(Pe[Be],jt.properties),bt,Ot,Be)===!1)return!1;break}}})}function Sn(nt,ct,jt){var bt=jt;return _n(nt,function(Ot,me,Pe,Be){me===0&&jt===void 0?bt=Ot:bt=ct(bt,Ot,me,Pe,Be)}),bt}function hr(nt,ct){if(ct=ct||{},!h.isObject(ct))throw new Error("options is invalid");var jt=ct.featureIndex||0,bt=ct.multiFeatureIndex||0,Ot=ct.geometryIndex||0,me=ct.segmentIndex||0,Pe=ct.properties,Be;switch(nt.type){case"FeatureCollection":jt<0&&(jt=nt.features.length+jt),Pe=Pe||nt.features[jt].properties,Be=nt.features[jt].geometry;break;case"Feature":Pe=Pe||nt.properties,Be=nt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Be=nt;break;default:throw new Error("geojson is invalid")}if(Be===null)return null;var Oe=Be.coordinates;switch(Be.type){case"Point":case"MultiPoint":return null;case"LineString":return me<0&&(me=Oe.length+me-1),h.lineString([Oe[me],Oe[me+1]],Pe,ct);case"Polygon":return Ot<0&&(Ot=Oe.length+Ot),me<0&&(me=Oe[Ot].length+me-1),h.lineString([Oe[Ot][me],Oe[Ot][me+1]],Pe,ct);case"MultiLineString":return bt<0&&(bt=Oe.length+bt),me<0&&(me=Oe[bt].length+me-1),h.lineString([Oe[bt][me],Oe[bt][me+1]],Pe,ct);case"MultiPolygon":return bt<0&&(bt=Oe.length+bt),Ot<0&&(Ot=Oe[bt].length+Ot),me<0&&(me=Oe[bt][Ot].length-me-1),h.lineString([Oe[bt][Ot][me],Oe[bt][Ot][me+1]],Pe,ct)}throw new Error("geojson is invalid")}function Je(nt,ct){if(ct=ct||{},!h.isObject(ct))throw new Error("options is invalid");var jt=ct.featureIndex||0,bt=ct.multiFeatureIndex||0,Ot=ct.geometryIndex||0,me=ct.coordIndex||0,Pe=ct.properties,Be;switch(nt.type){case"FeatureCollection":jt<0&&(jt=nt.features.length+jt),Pe=Pe||nt.features[jt].properties,Be=nt.features[jt].geometry;break;case"Feature":Pe=Pe||nt.properties,Be=nt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Be=nt;break;default:throw new Error("geojson is invalid")}if(Be===null)return null;var Oe=Be.coordinates;switch(Be.type){case"Point":return h.point(Oe,Pe,ct);case"MultiPoint":return bt<0&&(bt=Oe.length+bt),h.point(Oe[bt],Pe,ct);case"LineString":return me<0&&(me=Oe.length+me),h.point(Oe[me],Pe,ct);case"Polygon":return Ot<0&&(Ot=Oe.length+Ot),me<0&&(me=Oe[Ot].length+me),h.point(Oe[Ot][me],Pe,ct);case"MultiLineString":return bt<0&&(bt=Oe.length+bt),me<0&&(me=Oe[bt].length+me),h.point(Oe[bt][me],Pe,ct);case"MultiPolygon":return bt<0&&(bt=Oe.length+bt),Ot<0&&(Ot=Oe[bt].length+Ot),me<0&&(me=Oe[bt][Ot].length-me),h.point(Oe[bt][Ot][me],Pe,ct)}throw new Error("geojson is invalid")}l.coordAll=ge,l.coordEach=v,l.coordReduce=x,l.featureEach=X,l.featureReduce=re,l.findPoint=Je,l.findSegment=hr,l.flattenEach=Ue,l.flattenReduce=vt,l.geomEach=Le,l.geomReduce=Xe,l.lineEach=_n,l.lineReduce=Sn,l.propEach=C,l.propReduce=j,l.segmentEach=Dt,l.segmentReduce=Xt}),Ri=o(l=>{Object.defineProperty(l,"__esModule",{value:!0});var h=Ei();function v(x){var C=[1/0,1/0,-1/0,-1/0];return h.coordEach(x,function(j){C[0]>j[0]&&(C[0]=j[0]),C[1]>j[1]&&(C[1]=j[1]),C[2]<j[0]&&(C[2]=j[0]),C[3]<j[1]&&(C[3]=j[1])}),C}v.default=v,l.default=v}),Fi=o((l,h)=>{var v=mn(),x=Zn(),C=Ei(),j=Ri().default,X=C.featureEach;C.coordEach,x.polygon;var re=x.featureCollection;function ge(Le){var Xe=new v(Le);return Xe.insert=function(Ue){if(Ue.type!=="Feature")throw new Error("invalid feature");return Ue.bbox=Ue.bbox?Ue.bbox:j(Ue),v.prototype.insert.call(this,Ue)},Xe.load=function(Ue){var vt=[];return Array.isArray(Ue)?Ue.forEach(function(Dt){if(Dt.type!=="Feature")throw new Error("invalid features");Dt.bbox=Dt.bbox?Dt.bbox:j(Dt),vt.push(Dt)}):X(Ue,function(Dt){if(Dt.type!=="Feature")throw new Error("invalid features");Dt.bbox=Dt.bbox?Dt.bbox:j(Dt),vt.push(Dt)}),v.prototype.load.call(this,vt)},Xe.remove=function(Ue,vt){if(Ue.type!=="Feature")throw new Error("invalid feature");return Ue.bbox=Ue.bbox?Ue.bbox:j(Ue),v.prototype.remove.call(this,Ue,vt)},Xe.clear=function(){return v.prototype.clear.call(this)},Xe.search=function(Ue){var vt=v.prototype.search.call(this,this.toBBox(Ue));return re(vt)},Xe.collides=function(Ue){return v.prototype.collides.call(this,this.toBBox(Ue))},Xe.all=function(){var Ue=v.prototype.all.call(this);return re(Ue)},Xe.toJSON=function(){return v.prototype.toJSON.call(this)},Xe.fromJSON=function(Ue){return v.prototype.fromJSON.call(this,Ue)},Xe.toBBox=function(Ue){var vt;if(Ue.bbox)vt=Ue.bbox;else if(Array.isArray(Ue)&&Ue.length===4)vt=Ue;else if(Array.isArray(Ue)&&Ue.length===6)vt=[Ue[0],Ue[1],Ue[3],Ue[4]];else if(Ue.type==="Feature")vt=j(Ue);else if(Ue.type==="FeatureCollection")vt=j(Ue);else throw new Error("invalid geojson");return{minX:vt[0],minY:vt[1],maxX:vt[2],maxY:vt[3]}},Xe}h.exports=ge,h.exports.default=ge});Array.prototype.findIndex=Array.prototype.findIndex||function(l){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),v=h.length>>>0,x=arguments[1],C=0;C<v;C++)if(l.call(x,h[C],C,h))return C;return-1},Array.prototype.find=Array.prototype.find||function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var h=Object(this),v=h.length>>>0,x=arguments[1],C=0;C<v;C++){var j=h[C];if(l.call(x,j,C,h))return j}},typeof Object.assign!="function"&&(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");l=Object(l);for(var h=1;h<arguments.length;h++){var v=arguments[h];if(v!=null)for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(l[x]=v[x])}return l}),function(l){l.forEach(function(h){h.hasOwnProperty("remove")||Object.defineProperty(h,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(l,h){if(this==null)throw new TypeError('"this" is null or not defined');var v=Object(this),x=v.length>>>0;if(x===0)return!1;var C=h|0,j=Math.max(C>=0?C:x-Math.abs(C),0);function X(re,ge){return re===ge||typeof re=="number"&&typeof ge=="number"&&isNaN(re)&&isNaN(ge)}for(;j<x;){if(X(v[j],l))return!0;j++}return!1}});var jo={version:"2.18.3"},cr=f(Ir()),Gn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Ms={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},si={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},ki={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},fi={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},Cn={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},fn={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},fr={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},eo={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},Ao={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},_o={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},$a={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},es={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},ol={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},jr={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},As={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},uo={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},ts={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},ji={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},Ml={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},za={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},vr={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},yr={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},ns={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},$r={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},Al={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},hi={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},rs=es,to={en:Gn,de:Ms,it:si,id:ki,ro:fi,ru:Cn,es:fn,nl:fr,fr:eo,pt:rs,pt_br:$a,pt_pt:es,zh:Ao,zh_tw:_o,pl:ol,sv:jr,el:As,hu:uo,da:ts,no:ji,fa:Ml,ua:za,tr:vr,cz:yr,ja:ns,fi:$r,ko:Al,ky:hi},Ua={_globalEditModeEnabled:!1,enableGlobalEditMode(l){let h={...l};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(v=>{this._isRelevantForEdit(v)&&v.pm.enable(h)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(l=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(l)},handleLayerAdditionInGlobalEditMode(){let l=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let h in l){let v=l[h];this._isRelevantForEdit(v)&&v.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:l}){this._addedLayersEdit[L.stamp(l)]=l},_isRelevantForEdit(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowEditing}},wu=Ua,kl={_globalDragModeEnabled:!1,enableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},l.forEach(h=>{this._isRelevantForDrag(h)&&h.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let l=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,l.forEach(h=>{h.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let l=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let h in l){let v=l[h];this._isRelevantForDrag(v)&&v.pm.enableLayerDrag()}},_layerAddedDrag({layer:l}){this._addedLayersDrag[L.stamp(l)]=l},_isRelevantForDrag(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.draggable}},Er=kl,Hr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(l=>{this._isRelevantForRemoval(l)&&(l.pm.enabled()&&l.pm.disable(),l.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(l=>{l.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(l){let h=l.target;this._isRelevantForRemoval(h)&&!h.pm.dragging()&&(h.removeFrom(this.map.pm._getContainingLayer()),h.remove(),h instanceof L.LayerGroup?(this._fireRemoveLayerGroup(h),this._fireRemoveLayerGroup(this.map,h)):(h.pm._fireRemove(h),h.pm._fireRemove(this.map,h)))},_isRelevantForRemoval(l){return l.pm&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let l=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let h in l){let v=l[h];this._isRelevantForRemoval(v)&&(v.pm.enabled()&&v.pm.disable(),v.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:l}){this._addedLayersRemoval[L.stamp(l)]=l}},Va=Hr,Ju={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{this._isRelevantForRotate(l)&&l.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(l=>l instanceof L.Polyline).forEach(l=>{l.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(l){return l.pm&&l instanceof L.Polyline&&!(l instanceof L.LayerGroup)&&(!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1)&&!l._pmTempLayer&&l.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let l=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let h in l){let v=l[h];this._isRelevantForRemoval(v)&&v.pm.enableRotate()}},_layerAddedRotate({layer:l}){this._addedLayersRotate[L.stamp(l)]=l}},Tl=Ju,Xl=f(Ir()),sl={_fireDrawStart(l="Draw",h={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},l,h)},_fireDrawEnd(l="Draw",h={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},l,h)},_fireCreate(l,h="Draw",v={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:l,layer:l},h,v)},_fireCenterPlaced(l="Draw",h={}){let v=l==="Draw"?this._layer:void 0,x=l!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:v,layer:x,latlng:this._layer.getLatLng()},l,h)},_fireCut(l,h,v,x="Draw",C={}){this.__fire(l,"pm:cut",{shape:this._shape,layer:h,originalLayer:v},x,C)},_fireEdit(l=this._layer,h="Edit",v={}){this.__fire(l,"pm:edit",{layer:this._layer,shape:this.getShape()},h,v)},_fireEnable(l="Edit",h={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},l,h)},_fireDisable(l="Edit",h={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},l,h)},_fireUpdate(l="Edit",h={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},l,h)},_fireMarkerDragStart(l,h=void 0,v="Edit",x={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h},v,x)},_fireMarkerDrag(l,h=void 0,v="Edit",x={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h},v,x)},_fireMarkerDragEnd(l,h=void 0,v=void 0,x="Edit",C={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:l,shape:this.getShape(),indexPath:h,intersectionReset:v},x,C)},_fireDragStart(l="Edit",h={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},l,h)},_fireDrag(l,h="Edit",v={}){this.__fire(this._layer,"pm:drag",{...l,shape:this.getShape()},h,v)},_fireDragEnd(l="Edit",h={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},l,h)},_fireDragEnable(l="Edit",h={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},l,h)},_fireDragDisable(l="Edit",h={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},l,h)},_fireRemove(l,h=l,v="Edit",x={}){this.__fire(l,"pm:remove",{layer:h,shape:this.getShape()},v,x)},_fireVertexAdded(l,h,v,x="Edit",C={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:l,indexPath:h,latlng:v,shape:this.getShape()},x,C)},_fireVertexRemoved(l,h,v="Edit",x={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:l,indexPath:h,shape:this.getShape()},v,x)},_fireVertexClick(l,h,v="Edit",x={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:l,indexPath:h,shape:this.getShape()},v,x)},_fireIntersect(l,h=this._layer,v="Edit",x={}){this.__fire(h,"pm:intersect",{layer:this._layer,intersection:l,shape:this.getShape()},v,x)},_fireLayerReset(l,h,v="Edit",x={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:l,indexPath:h,shape:this.getShape()},v,x)},_fireChange(l,h="Edit",v={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:l,shape:this.getShape()},h,v)},_fireTextChange(l,h="Edit",v={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:l,shape:this.getShape()},h,v)},_fireTextFocus(l="Edit",h={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},l,h)},_fireTextBlur(l="Edit",h={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},l,h)},_fireSnapDrag(l,h,v="Snapping",x={}){this.__fire(l,"pm:snapdrag",h,v,x)},_fireSnap(l,h,v="Snapping",x={}){this.__fire(l,"pm:snap",h,v,x)},_fireUnsnap(l,h,v="Snapping",x={}){this.__fire(l,"pm:unsnap",h,v,x)},_fireRotationEnable(l,h,v="Rotation",x={}){this.__fire(l,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},v,x)},_fireRotationDisable(l,h="Rotation",v={}){this.__fire(l,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},h,v)},_fireRotationStart(l,h,v="Rotation",x={}){this.__fire(l,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:h},v,x)},_fireRotation(l,h,v,x=this._rotationLayer,C="Rotation",j={}){this.__fire(l,"pm:rotate",{layer:x,helpLayer:this._layer,startAngle:this._startAngle,angle:x.pm.getAngle(),angleDiff:h,oldLatLngs:v,newLatLngs:x.getLatLngs()},C,j)},_fireRotationEnd(l,h,v,x="Rotation",C={}){this.__fire(l,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:h,angle:this._rotationLayer.pm.getAngle(),originLatLngs:v,newLatLngs:this._rotationLayer.getLatLngs()},x,C)},_fireActionClick(l,h,v,x="Toolbar",C={}){this.__fire(this._map,"pm:actionclick",{text:l.text,action:l,btnName:h,button:v},x,C)},_fireButtonClick(l,h,v="Toolbar",x={}){this.__fire(this._map,"pm:buttonclick",{btnName:l,button:h},v,x)},_fireLangChange(l,h,v,x,C="Global",j={}){this.__fire(this.map,"pm:langchange",{oldLang:l,activeLang:h,fallback:v,translations:x},C,j)},_fireGlobalDragModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalEditModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalRemovalModeToggled(l,h="Global",v={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:l,map:this.map},h,v)},_fireGlobalCutModeToggled(l="Global",h={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},l,h)},_fireGlobalDrawModeToggled(l="Global",h={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},l,h)},_fireGlobalRotateModeToggled(l="Global",h={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},l,h)},_fireRemoveLayerGroup(l,h=l,v="Edit",x={}){this.__fire(l,"pm:remove",{layer:h,shape:void 0},v,x)},_fireKeyeventEvent(l,h,v,x="Global",C={}){this.__fire(this.map,"pm:keyevent",{event:l,eventType:h,focusOn:v},x,C)},__fire(l,h,v,x,C={}){v=(0,Xl.default)(v,C,{source:x}),L.PM.Utils._fireEvent(l,h,v)}},Nl=sl,Ql=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(l){this.map=l,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),l.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(l){let h="document";this.map.getContainer().contains(l.target)&&(h="map");let v={event:l,eventType:l.type,focusOn:h};this._lastEvents[l.type]=v,this._lastEvents.current=v,this.map.pm._fireKeyeventEvent(l,l.type,h)},_onBlur(l){l.altKey=!1;let h={event:l,eventType:l.type,focusOn:"document"};this._lastEvents[l.type]=h,this._lastEvents.current=h},getLastKeyEvent(l="current"){return this._lastEvents[l]},isShiftKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.shiftKey},isAltKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.altKey},isCtrlKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.ctrlKey},isMetaKeyPressed(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.metaKey},getPressedKey(){var l;return(l=this._lastEvents.current)==null?void 0:l.event.key}}),Kr=Ql,co=f(Rr());function lr(l){let h=L.PM.activeLang;return(0,co.default)(to[h],l)||(0,co.default)(to.en,l)||l}function fo(l){for(let h=0;h<l.length;h+=1){let v=l[h];if(Array.isArray(v)){if(fo(v))return!0}else if(v!=null&&v!=="")return!0}return!1}function al(l){return l.reduce((h,v)=>{if(v.length!==0){let x=Array.isArray(v)?al(v):v;Array.isArray(x)?x.length!==0&&h.push(x):h.push(x)}return h},[])}function ya(l,h,v){let x={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:C,b:j,f:X}=x,re=l.lng,ge=l.lat,Le=v,Xe=Math.PI,Ue=h*Xe/180,vt=Math.sin(Ue),Dt=Math.cos(Ue),Xt=(1-X)*Math.tan(ge*Xe/180),_n=1/Math.sqrt(1+Xt*Xt),Sn=Xt*_n,hr=Math.atan2(Xt,Dt),Je=_n*vt,nt=1-Je*Je,ct=nt*(C*C-j*j)/(j*j),jt=1+ct/16384*(4096+ct*(-768+ct*(320-175*ct))),bt=ct/1024*(256+ct*(-128+ct*(74-47*ct))),Ot=Le/(j*jt),me=2*Math.PI,Pe,Be,Oe;for(;Math.abs(Ot-me)>1e-12;){Pe=Math.cos(2*hr+Ot),Be=Math.sin(Ot),Oe=Math.cos(Ot);let sn=bt*Be*(Pe+bt/4*(Oe*(-1+2*Pe*Pe)-bt/6*Pe*(-3+4*Be*Be)*(-3+4*Pe*Pe)));me=Ot,Ot=Le/(j*jt)+sn}let je=Sn*Be-_n*Oe*Dt,$e=Math.atan2(Sn*Oe+_n*Be*Dt,(1-X)*Math.sqrt(Je*Je+je*je)),at=Math.atan2(Be*vt,_n*Oe-Sn*Be*Dt),lt=X/16*nt*(4+X*(4-3*nt)),pt=at-(1-lt)*X*Je*(Ot+lt*Be*(Pe+lt*Oe*(-1+2*Pe*Pe))),Et=re+pt*180/Xe,Ct=$e*180/Xe;return L.latLng(Et,Ct)}function Wi(l,h,v,x,C=!0){let j,X,re,ge=[];for(let Le=0;Le<v;Le+=1){if(C)j=Le*360/v+x,X=ya(l,j,h),re=L.latLng(X.lng,X.lat);else{let Xe=l.lat+Math.cos(2*Le*Math.PI/v)*h,Ue=l.lng+Math.sin(2*Le*Math.PI/v)*h;re=L.latLng(Xe,Ue)}ge.push(re)}return ge}function eu(l,h,v){h=(h+360)%360;let x=Math.PI/180,C=180/Math.PI,{R:j}=L.CRS.Earth,X=l.lng*x,re=l.lat*x,ge=h*x,Le=Math.sin(re),Xe=Math.cos(re),Ue=Math.cos(v/j),vt=Math.sin(v/j),Dt=Math.asin(Le*Ue+Xe*vt*Math.cos(ge)),Xt=X+Math.atan2(Math.sin(ge)*vt*Xe,Ue-Le*Math.sin(Dt));Xt*=C;let _n=Xt-360,Sn=Xt<-180?Xt+360:Xt;return Xt=Xt>180?_n:Sn,L.latLng([Dt*C,Xt])}function na(l,h,v){let x=l.latLngToContainerPoint(h),C=l.latLngToContainerPoint(v),j=Math.atan2(C.y-x.y,C.x-x.x)*180/Math.PI+90;return j+=j<0?360:0,j}function Dl(l,h,v,x){let C=na(l,h,v);return eu(h,C,x)}function Il(l,h,v="asc"){if(!h||Object.keys(h).length===0)return(ge,Le)=>ge-Le;let x=Object.keys(h),C,j=x.length-1,X={};for(;j>=0;)C=x[j],X[C.toLowerCase()]=h[C],j-=1;function re(ge){if(ge instanceof L.Marker)return"Marker";if(ge instanceof L.Circle)return"Circle";if(ge instanceof L.CircleMarker)return"CircleMarker";if(ge instanceof L.Rectangle)return"Rectangle";if(ge instanceof L.Polygon)return"Polygon";if(ge instanceof L.Polyline)return"Line"}return(ge,Le)=>{let Xe,Ue;if(Xe=re(ge.layer).toLowerCase(),Ue=re(Le.layer).toLowerCase(),!Xe||!Ue)return 0;let vt=Xe in X?X[Xe]:Number.MAX_SAFE_INTEGER,Dt=Ue in X?X[Ue]:Number.MAX_SAFE_INTEGER,Xt=0;return vt<Dt?Xt=-1:vt>Dt&&(Xt=1),v==="desc"?Xt*-1:Xt}}function Fs(l,h=l.getLatLngs()){return l instanceof L.Polygon?L.polygon(h).getLatLngs():L.polyline(h).getLatLngs()}function Ol(l,h){var v,x,C,j;if((x=(v=h.options.crs)==null?void 0:v.projection)!=null&&x.MAX_LATITUDE){let X=(j=(C=h.options.crs)==null?void 0:C.projection)==null?void 0:j.MAX_LATITUDE;l.lat=Math.max(Math.min(X,l.lat),-X)}return l}function yi(l){return l.options.renderer||l._map&&(l._map._getPaneRenderer(l.options.pane)||l._map.options.renderer||l._map._renderer)||l._renderer}var Xu=L.Class.extend({includes:[wu,Er,Va,Tl,Nl],initialize(l){this.map=l,this.Draw=new L.PM.Draw(l),this.Toolbar=new L.PM.Toolbar(l),this.Keyboard=Kr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(l)},setLang(l="en",h,v="en"){if(l=l.trim().toLowerCase(),!/^[a-z]{2}$/.test(l)){let C=l.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(C){let j=[`${C[1]}_${C[2]}`,`${C[1]}`];for(let X of j)if(to[X]){l=X;break}}}let x=L.PM.activeLang;h&&(to[l]=(0,cr.default)(to[v],h)),L.PM.activeLang=l,this.map.pm.Toolbar.reinit(),this._fireLangChange(x,l,v,to[l])},addControls(l){this.Toolbar.addControls(l)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(l="Polygon",h){l==="Poly"&&(l="Polygon"),this.Draw.enable(l,h)},disableDraw(l="Polygon"){l==="Poly"&&(l="Polygon"),this.Draw.disable(l)},setPathOptions(l,h={}){let v=h.ignoreShapes||[],x=h.merge||!1;this.map.pm.Draw.shapes.forEach(C=>{v.indexOf(C)===-1&&this.map.pm.Draw[C].setPathOptions(l,x)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(l){let h=(0,cr.default)(this.globalOptions,l);h.editable&&(h.resizeableCircleMarker=h.editable,delete h.editable);let v=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!h.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),v=!0);let x=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!h.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),x=!0),this.map.pm.Draw.shapes.forEach(C=>{this.map.pm.Draw[C].setOptions(h)}),v&&this.map.pm.Draw.CircleMarker.enable(),x&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(C=>{C.pm.setOptions(h)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=h,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(l=>{l.pm.enabled()&&l.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(l){return this.Draw.Cut.enable(l)},toggleGlobalCutMode(l){return this.Draw.Cut.toggle(l)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(l=!1){let h=L.PM.Utils.findLayers(this.map);if(!l)return h;let v=L.featureGroup();return v._pmTempLayer=!0,h.forEach(x=>{v.addLayer(x)}),v},getGeomanDrawLayers(l=!1){let h=L.PM.Utils.findLayers(this.map).filter(x=>x._drawnByGeoman===!0);if(!l)return h;let v=L.featureGroup();return v._pmTempLayer=!0,h.forEach(x=>{v.addLayer(x)}),v},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(l){this._touchEventCounter===0&&(L.DomEvent.on(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(l){this._touchEventCounter===1&&(L.DomEvent.off(l,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(l,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(l){yi(this.map)._onMouseMove(this._createMouseEvent("mousemove",l))},_canvasTouchClick(l){let h="";l.type==="touchstart"||l.type==="pointerdown"?h="mousedown":(l.type==="touchend"||l.type==="pointerup"||l.type==="touchcancel"||l.type==="pointercancel")&&(h="mouseup"),h&&yi(this.map)._onClick(this._createMouseEvent(h,l))},_createMouseEvent(l,h){let v,x=h.touches[0]||h.changedTouches[0];try{v=new MouseEvent(l,{bubbles:h.bubbles,cancelable:h.cancelable,view:h.view,detail:x.detail,screenX:x.screenX,screenY:x.screenY,clientX:x.clientX,clientY:x.clientY,ctrlKey:h.ctrlKey,altKey:h.altKey,shiftKey:h.shiftKey,metaKey:h.metaKey,button:h.button,relatedTarget:h.relatedTarget})}catch{v=document.createEvent("MouseEvents"),v.initMouseEvent(l,h.bubbles,h.cancelable,h.view,x.detail,x.screenX,x.screenY,x.clientX,x.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget)}return v}}),ko=Xu,Hs=L.Control.extend({includes:[Nl],options:{position:"topleft",disableByOtherButtons:!0},initialize(l){this._button=L.Util.extend({},this.options,l)},onAdd(l){return this._map=l,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let l=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),l?l.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(l){return typeof l=="boolean"?this._button.toggleStatus=l:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(l){l&&l.preventDefault(),!this._button.disabled&&(this._button.onClick(l,{button:this,event:l}),this._clicked(l),this._button.afterClick(l,{button:this,event:l}))},_makeButton(l){let h=this.options.position.indexOf("right")>-1?"pos-right":"",v=L.DomUtil.create("div",`button-container  ${h}`,this._container);l.title&&v.setAttribute("title",l.title);let x=L.DomUtil.create("a","leaflet-buttons-control-button",v);x.setAttribute("role","button"),x.setAttribute("tabindex","0"),x.href="#";let C=L.DomUtil.create("div",`leaflet-pm-actions-container ${h}`,v),j=l.actions,X={cancel:{text:lr("actions.cancel"),title:lr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:lr("actions.finish"),title:lr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:lr("actions.removeLastVertex"),title:lr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[l.jsClass]._removeLastVertex()}},finish:{text:lr("actions.finish"),title:lr("actions.finish"),onClick(ge){this._map.pm.Draw[l.jsClass]._finishShape(ge)}}};l._preparedActions=j.map(ge=>{let Le=typeof ge=="string"?ge:ge.name,Xe;if(X[Le])Xe=X[Le];else if(ge.text)Xe=ge;else return Xe;let Ue=L.DomUtil.create("a",`leaflet-pm-action ${h} action-${Le}`,C);if(Ue.setAttribute("role","button"),Ue.setAttribute("tabindex","0"),Ue.href="#",Xe.title&&(Ue.title=Xe.title),Ue.innerHTML=Xe.text,L.DomEvent.disableClickPropagation(Ue),L.DomEvent.on(Ue,"click",L.DomEvent.stop),Xe._node=Ue,!l.disabled&&Xe.onClick){let vt=Dt=>{Dt.preventDefault();let Xt="",{buttons:_n}=this._map.pm.Toolbar;for(let Sn in _n)if(_n[Sn]._button===l){Xt=Sn;break}this._fireActionClick(Xe,Xt,l)};L.DomEvent.addListener(Ue,"click",vt,this),L.DomEvent.addListener(Ue,"click",Xe.onClick,this),L.DomEvent.addListener(Ue,"click",()=>this._updateActiveAction(l))}return Xe}),this._updateActiveAction(l),l.toggleStatus&&L.DomUtil.addClass(v,"active");let re=L.DomUtil.create("div","control-icon",x);return l.iconUrl&&re.setAttribute("src",l.iconUrl),l.className&&L.DomUtil.addClass(re,l.className),L.DomEvent.disableClickPropagation(x),L.DomEvent.on(x,"click",L.DomEvent.stop),l.disabled||(L.DomEvent.addListener(x,"click",this._onBtnClick,this),L.DomEvent.addListener(x,"click",this._triggerClick,this)),l.disabled&&(L.DomUtil.addClass(x,"pm-disabled"),x.setAttribute("aria-disabled","true")),v},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let l="",{buttons:h}=this._map.pm.Toolbar;for(let v in h)if(h[v]._button===this._button){l=v;break}this._fireButtonClick(l,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let l="pm-disabled",h=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(h,l),h.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(h,l),h.setAttribute("aria-disabled","false"))},_updateActiveAction(l){var h;(h=l._preparedActions)==null||h.forEach(v=>{v!=null&&v._node&&(v.isActive&&v.isActive.call(this)?L.DomUtil.addClass(v._node,"active-action"):L.DomUtil.removeClass(v._node,"active-action"))})}}),Bl=Hs;L.Control.PMButton=Bl;var qs=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(l){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(l)},reinit(){let l=this.isVisible;this.removeControls(),this._defineButtons(),l&&this.addControls()},init(l){this.map=l,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(l){let h=`${l}Container`;return this[h]||(this[h]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${l} leaflet-bar leaflet-control`)),this[h]},getButtons(){return this.buttons},addControls(l=this.options){typeof l.editPolygon<"u"&&(l.editMode=l.editPolygon),typeof l.deleteLayer<"u"&&(l.removalMode=l.deleteLayer),L.Util.setOptions(this,l),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let l=this.getButtons(),h={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let v in l){let x=l[v];L.Util.setOptions(x,{className:h.geomanIcons[v]})}},removeControls(){let l=this.getButtons();for(let h in l)l[h].remove();this.isVisible=!1},toggleControls(l=this.options){this.isVisible?this.removeControls():this.addControls(l)},_addButton(l,h){return this.buttons[l]=h,this.options[l]=!!this.options[l]||!1,this.buttons[l]},triggerClickOnToggledButtons(l){for(let h in this.buttons){let v=this.buttons[h];v._button.disableByOtherButtons&&v!==l&&v.toggled()&&v._triggerClick()}},toggleButton(l,h,v=!0){l==="editPolygon"&&(l="editMode"),l==="deleteLayer"&&(l="removalMode");let x=l;return v&&this.triggerClickOnToggledButtons(this.buttons[x]),this.buttons[x]?this.buttons[x].toggle(h):!1},_defineButtons(){let l={className:"control-icon leaflet-pm-icon-marker",title:lr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(vt,Dt)=>{this.map.pm.Draw[Dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},h={title:lr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(vt,Dt)=>{this.map.pm.Draw[Dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},v={className:"control-icon leaflet-pm-icon-polyline",title:lr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(vt,Dt)=>{this.map.pm.Draw[Dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},x={title:lr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(vt,Dt)=>{this.map.pm.Draw[Dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},C={title:lr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(vt,Dt)=>{this.map.pm.Draw[Dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},j={title:lr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(vt,Dt)=>{this.map.pm.Draw[Dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},X={title:lr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},re={title:lr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ge={title:lr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(vt,Dt)=>{this.map.pm.Draw[Dt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Le={title:lr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Xe={title:lr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ue={className:"control-icon leaflet-pm-icon-text",title:lr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(vt,Dt)=>{this.map.pm.Draw[Dt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(l)),this._addButton("drawPolyline",new L.Control.PMButton(v)),this._addButton("drawRectangle",new L.Control.PMButton(j)),this._addButton("drawPolygon",new L.Control.PMButton(h)),this._addButton("drawCircle",new L.Control.PMButton(x)),this._addButton("drawCircleMarker",new L.Control.PMButton(C)),this._addButton("drawText",new L.Control.PMButton(Ue)),this._addButton("editMode",new L.Control.PMButton(X)),this._addButton("dragMode",new L.Control.PMButton(re)),this._addButton("cutPolygon",new L.Control.PMButton(ge)),this._addButton("removalMode",new L.Control.PMButton(Le)),this._addButton("rotateMode",new L.Control.PMButton(Xe))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let l=this.getButtons(),h=[];this.options.drawControls===!1&&(h=h.concat(Object.keys(l).filter(v=>!l[v]._button.tool))),this.options.editControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="edit"))),this.options.optionsControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="options"))),this.options.customControls===!1&&(h=h.concat(Object.keys(l).filter(v=>l[v]._button.tool==="custom")));for(let v in l)if(this.options[v]&&h.indexOf(v)===-1){let x=l[v]._button.tool;x||(x="draw"),l[v].setPosition(this._getBtnPosition(x)),l[v].addTo(this.map)}},_getBtnPosition(l){return this.options.positions&&this.options.positions[l]?this.options.positions[l]:this.options.position},setBlockPosition(l,h){this.options.positions[l]=h,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(l,h){if(h)typeof h!="object"&&(h={name:h});else throw new TypeError("Button has no name");let v=this._btnNameMapping(l);if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");let x=this.map.pm.Draw.createNewDrawInstance(h.name,v);h={...this.buttons[v]._button,...h};let C=this.createCustomControl(h);return{drawInstance:x,control:C}},createCustomControl(l){if(!l.name)throw new TypeError("Button has no name");if(this.buttons[l.name])throw new TypeError("Button with this name already exists");l.onClick||(l.onClick=()=>{}),l.afterClick||(l.afterClick=()=>{}),l.toggle!==!1&&(l.toggle=!0),l.block&&(l.block=l.block.toLowerCase()),(!l.block||l.block==="draw")&&(l.block=""),l.className?l.className.indexOf("control-icon")===-1&&(l.className=`control-icon ${l.className}`):l.className="control-icon";let h={tool:l.block,className:l.className,title:l.title||"",jsClass:l.name,onClick:l.onClick,afterClick:l.afterClick,doToggle:l.toggle,toggleStatus:!1,disableOtherButtons:l.disableOtherButtons??!0,disableByOtherButtons:l.disableByOtherButtons??!0,cssToggle:l.toggle,position:this.options.position,actions:l.actions||[],disabled:!!l.disabled};this.options[l.name]!==!1&&(this.options[l.name]=!0);let v=this._addButton(l.name,new L.Control.PMButton(h));return this.changeControlOrder(),v},controlExists(l){return!!this.getButton(l)},getButton(l){return this.getButtons()[l]},getButtonsInBlock(l){let h={};if(l)for(let v in this.getButtons()){let x=this.getButtons()[v];(x._button.tool===l||l==="draw"&&!x._button.tool)&&(h[v]=x)}return h},changeControlOrder(l=[]){let h=this._shapeMapping(),v=[];l.forEach(j=>{h[j]?v.push(h[j]):v.push(j)});let x=this.getButtons(),C={};v.forEach(j=>{x[j]&&(C[j]=x[j])}),Object.keys(x).filter(j=>!x[j]._button.tool||x[j]._button.tool==="draw").forEach(j=>{v.indexOf(j)===-1&&(C[j]=x[j])}),Object.keys(x).filter(j=>x[j]._button.tool==="edit").forEach(j=>{v.indexOf(j)===-1&&(C[j]=x[j])}),Object.keys(x).filter(j=>x[j]._button.tool==="options").forEach(j=>{v.indexOf(j)===-1&&(C[j]=x[j])}),Object.keys(x).filter(j=>x[j]._button.tool==="custom").forEach(j=>{v.indexOf(j)===-1&&(C[j]=x[j])}),Object.keys(x).forEach(j=>{v.indexOf(j)===-1&&(C[j]=x[j])}),this.map.pm.Toolbar.buttons=C,this._showHideButtons()},getControlOrder(){let l=this.getButtons(),h=[];for(let v in l)h.push(v);return h},changeActionsOfControl(l,h){let v=this._btnNameMapping(l);if(!v)throw new TypeError("No name passed");if(!h)throw new TypeError("No actions passed");if(!this.buttons[v])throw new TypeError("Button with this name not exists");this.buttons[v]._button.actions=h,this.changeControlOrder()},setButtonDisabled(l,h){let v=this._btnNameMapping(l);h?this.buttons[v].disable():this.buttons[v].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(l){let h=this._shapeMapping();return h[l]?h[l]:l}}),ll=qs,ul=f(Ir()),_i={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(l){l.forEach(h=>{if(Array.isArray(h)){this._assignEvents(h);return}h.off("drag",this._handleSnapping,this),h.on("drag",this._handleSnapping,this),h.off("dragend",this._cleanupSnapping,this),h.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(l){if(l){let h=l.target;h._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(h=>{h.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(l){var re,ge,Le;let h=l.target;if(h._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((re=l==null?void 0:l.originalEvent)==null?void 0:re.altKey)||((Le=(ge=this._map)==null?void 0:ge.pm)==null?void 0:Le.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let v=this._calcClosestLayer(h.getLatLng(),this._snapList);if(Object.keys(v).length===0)return!1;let x=v.layer instanceof L.Marker||v.layer instanceof L.CircleMarker||!this.options.snapSegment,C;x?C=v.latlng:C=this._checkPrioritiySnapping(v);let j=this.options.snapDistance,X={marker:h,shape:this._shape,snapLatLng:C,segment:v.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:v.layer,distance:v.distance};if(this._fireSnapDrag(X.marker,X),this._fireSnapDrag(this._layer,X),v.distance<j){h._orgLatLng=h.getLatLng(),h.setLatLng(C),h._snapped=!0,h._snapInfo=X;let Xe=()=>{this._snapLatLng=C,this._fireSnap(h,X),this._fireSnap(this._layer,X)},Ue=this._snapLatLng||{},vt=C||{};(Ue.lat!==vt.lat||Ue.lng!==vt.lng)&&Xe()}else this._snapLatLng&&(this._unsnap(X),h._snapped=!1,h._snapInfo=void 0,this._fireUnsnap(X.marker,X),this._fireUnsnap(this._layer,X));return!0},_createSnapList(){let l=[],h=[],v=this._map;v.off("layerremove",this._handleSnapLayerRemoval,this),v.on("layerremove",this._handleSnapLayerRemoval,this),v.eachLayer(x=>{if((x instanceof L.Polyline||x instanceof L.Marker||x instanceof L.CircleMarker||x instanceof L.ImageOverlay)&&x.options.snapIgnore!==!0){if(x.options.snapIgnore===void 0&&(!L.PM.optIn&&x.options.pmIgnore===!0||L.PM.optIn&&x.options.pmIgnore!==!1))return;(x instanceof L.Circle||x instanceof L.CircleMarker)&&x.pm&&x.pm._hiddenPolyCircle?l.push(x.pm._hiddenPolyCircle):x instanceof L.ImageOverlay&&(x=L.rectangle(x.getBounds())),l.push(x);let C=L.polyline([],{color:"red",pmIgnore:!0});C._pmTempLayer=!0,h.push(C),(x instanceof L.Circle||x instanceof L.CircleMarker)&&h.push(C)}}),l=l.filter(x=>this._layer!==x),l=l.filter(x=>x._latlng||x._latlngs&&fo(x._latlngs)),l=l.filter(x=>!x._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let x=L.polyline([],{color:"red",pmIgnore:!0});x._pmTempLayer=!0,h.push(x)}),this._snapList=l.concat(this._otherSnapLayers)):this._snapList=l,this.debugIndicatorLines=h},_handleSnapLayerRemoval({layer:l}){if(!l._leaflet_id)return;let h=this._snapList.findIndex(v=>v._leaflet_id===l._leaflet_id);h>-1&&this._snapList.splice(h,1)},_calcClosestLayer(l,h){return this._calcClosestLayers(l,h,1)[0]},_calcClosestLayers(l,h,v=1){let x=[],C={};h.forEach((X,re)=>{var Le;if(X._parentCopy&&X._parentCopy===this._layer||((Le=X.getLatLngs)==null?void 0:Le.call(X).flat(5).length)<2)return;let ge=this._calcLayerDistances(l,X);if(ge.distance=Math.floor(ge.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[re]){let Xe=L.polyline([],{color:"red",pmIgnore:!0});Xe._pmTempLayer=!0,this.debugIndicatorLines[re]=Xe}this.debugIndicatorLines[re].setLatLngs([l,ge.latlng])}v===1&&(C.distance===void 0||ge.distance-5<=C.distance)?(ge.distance+5<C.distance&&(x=[]),C=ge,C.layer=X,x.push(C)):v!==1&&(C={},C=ge,C.layer=X,x.push(C))}),v!==1&&(x=x.sort((X,re)=>X.distance-re.distance)),v===-1&&(v=x.length);let j=this._getClosestLayerByPriority(x,v);return L.Util.isArray(j)?j:[j]},_calcLayerDistances(l,h){let v=this._map,x=h instanceof L.Marker||h instanceof L.CircleMarker,C=h instanceof L.Polygon,j=l;if(x){let X=h.getLatLng();return{latlng:{...X},distance:this._getDistance(v,X,j)}}return this._calcLatLngDistances(j,h.getLatLngs(),v,C)},_calcLatLngDistances(l,h,v,x=!1){let C,j,X,re=ge=>{ge.forEach((Le,Xe)=>{if(Array.isArray(Le)){re(Le);return}if(this.options.snapSegment){let Ue=Le,vt;x?vt=Xe+1===ge.length?0:Xe+1:vt=Xe+1===ge.length?void 0:Xe+1;let Dt=ge[vt];if(Dt){let Xt=this._getDistanceToSegment(v,l,Ue,Dt);(j===void 0||Xt<j)&&(j=Xt,X=[Ue,Dt])}}else{let Ue=this._getDistance(v,l,Le);(j===void 0||Ue<j)&&(j=Ue,C=Le)}})};return re(h),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(v,l,X[0],X[1])},segment:X,distance:j}:{latlng:C,distance:j}},_getClosestLayerByPriority(l,h=1){l=l.sort((X,re)=>X._leaflet_id-re._leaflet_id);let v=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],x=this._map.pm.globalOptions.snappingOrder||[],C=0,j={};return x.concat(v).forEach(X=>{j[X]||(C+=1,j[X]=C)}),l.sort(Il("instanceofShape",j)),h===1?l[0]||{}:l.slice(0,h)},_checkPrioritiySnapping(l){let h=this._map,v=l.segment[0],x=l.segment[1],C=l.latlng,j=C;if(this.options.snapVertex){let X=this._getDistance(h,v,C),re=this._getDistance(h,x,C),ge=X<re?v:x,Le=X<re?X:re;if(this.options.snapMiddle){let Ue=L.PM.Utils.calcMiddleLatLng(h,v,x),vt=this._getDistance(h,Ue,C);vt<X&&vt<re&&(ge=Ue,Le=vt)}let Xe=this.options.snapDistance;Le<Xe&&(j=ge)}return{...j}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(l,h,v,x){let C=l.getMaxZoom();C===1/0&&(C=l.getZoom());let j=l.project(h,C),X=l.project(v,C),re=l.project(x,C),ge=L.LineUtil.closestPointOnSegment(j,X,re);return l.unproject(ge,C)},_getDistanceToSegment(l,h,v,x){let C=l.latLngToContainerPoint(h),j=l.latLngToContainerPoint(v),X=l.latLngToContainerPoint(x);return L.LineUtil.pointToSegmentDistance(C,j,X)},_getDistance(l,h,v){return l.latLngToContainerPoint(h).distanceTo(l.latLngToContainerPoint(v))}},ks=_i,_a=L.Class.extend({includes:[ks,Nl],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(l){L.Util.setOptions(this,l),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(l){let h=new L.Icon.Default;h.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=h,this._map=l,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(v=>{this[v]=new L.PM.Draw[v](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(l,h=!1){h?this.options.pathOptions=(0,ul.default)(this.options.pathOptions,l):this.options.pathOptions=l},getShapes(){return this.shapes},getShape(){return this._shape},enable(l,h){if(!l)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[l].enable(h)},disable(){this.shapes.forEach(l=>{this[l].disable()})},addControls(){this.shapes.forEach(l=>{this[l].addButton()})},getActiveShape(){let l;return this.shapes.forEach(h=>{this[h]._enabled&&(l=h)}),l},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let l=[];this._map.eachLayer(h=>{(h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.Circle||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&(h._pmTempLayer||l.push(h))}),this._enabled?l.forEach(h=>{L.PM.Utils.disablePopup(h)}):l.forEach(h=>{L.PM.Utils.enablePopup(h)})},createNewDrawInstance(l,h){let v=this._getShapeFromBtnName(h);if(this[l])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[v])throw new TypeError(`There is no class L.PM.Draw.${v}`);return this[l]=new L.PM.Draw[v](this._map),this[l].toolbarButtonName=l,this[l]._shape=l,this.shapes.push(l),this[h]&&this[l].setOptions(this[h].options),this[l].setOptions(this[l].options),this[l]},_getShapeFromBtnName(l){let h={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return h[l]?h[l]:this[l]?this[l]._shape:l},_finishLayer(l){l.pm&&(l.pm.setOptions(this.options),l.pm._shape=this._shape,l.pm._map=this._map),this._addDrawnLayerProp(l)},_addDrawnLayerProp(l){l._drawnByGeoman=!0},_setPane(l,h){h==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":h==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":h==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),ho=_a;ho.Marker=ho.extend({initialize(l){this._map=l,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(lr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},isRelevantMarker(l){return l instanceof L.Marker&&l.pm&&!l._pmTempLayer&&!l.pm._initTextMarker},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let h=l;h.target=this._hintMarker,this._handleSnapping(h)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(l){if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=new L.Marker(h,this.options.markerStyle);this._setPane(v,"markerPane"),this._finishLayer(v),v.pm||(v.options.draggable=!1),v.addTo(this._map.pm._getContainingLayer()),v.pm&&this.options.markerEditable?v.pm.enable():v.dragging&&v.dragging.disable(),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var l,h;(l=this.options.markerStyle)!=null&&l.icon&&((h=this._hintMarker)==null||h.setIcon(this.options.markerStyle.icon))}});var B=63710088e-1,be={centimeters:B*100,centimetres:B*100,degrees:B/111325,feet:B*3.28084,inches:B*39.37,kilometers:B/1e3,kilometres:B/1e3,meters:B,metres:B,miles:B/1609.344,millimeters:B*1e3,millimetres:B*1e3,nauticalmiles:B/1852,radians:1,yards:B*1.0936};function Ye(l,h,v){v===void 0&&(v={});var x={type:"Feature"};return(v.id===0||v.id)&&(x.id=v.id),v.bbox&&(x.bbox=v.bbox),x.properties=h||{},x.geometry=l,x}function ut(l,h,v){if(v===void 0&&(v={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!_r(l[0])||!_r(l[1]))throw new Error("coordinates must contain numbers");var x={type:"Point",coordinates:l};return Ye(x,h,v)}function Lt(l,h,v){if(v===void 0&&(v={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");var x={type:"LineString",coordinates:l};return Ye(x,h,v)}function Vt(l,h){h===void 0&&(h={});var v={type:"FeatureCollection"};return h.id&&(v.id=h.id),h.bbox&&(v.bbox=h.bbox),v.features=l,v}function hn(l,h){h===void 0&&(h="kilometers");var v=be[h];if(!v)throw new Error(h+" units is invalid");return l*v}function In(l,h){h===void 0&&(h="kilometers");var v=be[h];if(!v)throw new Error(h+" units is invalid");return l/v}function $n(l){var h=l%(2*Math.PI);return h*180/Math.PI}function or(l){var h=l%360;return h*Math.PI/180}function _r(l){return!isNaN(l)&&l!==null&&!Array.isArray(l)}function zr(l){var h,v,x={type:"FeatureCollection",features:[]};if(l.type==="Feature"?v=l.geometry:v=l,v.type==="LineString")h=[v.coordinates];else if(v.type==="MultiLineString")h=v.coordinates;else if(v.type==="MultiPolygon")h=[].concat.apply([],v.coordinates);else if(v.type==="Polygon")h=v.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return h.forEach(function(C){h.forEach(function(j){for(var X=0;X<C.length-1;X++)for(var re=X;re<j.length-1;re++)if(!(C===j&&(Math.abs(X-re)===1||X===0&&re===C.length-2&&C[X][0]===C[C.length-1][0]&&C[X][1]===C[C.length-1][1]))){var ge=Hi(C[X][0],C[X][1],C[X+1][0],C[X+1][1],j[re][0],j[re][1],j[re+1][0],j[re+1][1]);ge&&x.features.push(ut([ge[0],ge[1]]))}})}),x}function Hi(l,h,v,x,C,j,X,re){var ge,Le,Xe,Ue,vt,Dt={x:null,y:null,onLine1:!1,onLine2:!1};return ge=(re-j)*(v-l)-(X-C)*(x-h),ge===0?Dt.x!==null&&Dt.y!==null?Dt:!1:(Le=h-j,Xe=l-C,Ue=(X-C)*Le-(re-j)*Xe,vt=(v-l)*Le-(x-h)*Xe,Le=Ue/ge,Xe=vt/ge,Dt.x=l+Le*(v-l),Dt.y=h+Le*(x-h),Le>=0&&Le<=1&&(Dt.onLine1=!0),Xe>=0&&Xe<=1&&(Dt.onLine2=!0),Dt.onLine1&&Dt.onLine2?[Dt.x,Dt.y]:!1)}ho.Line=ho.extend({initialize(l){this._map=l,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintLine(){let l=this._layer.getLatLngs();if(l.length>0){let h=l[l.length-1];this._hintline.setLatLngs([h,this._hintMarker.getLatLng()])}},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let h=this._layer._defaultShape().slice();h.push(this._hintMarker.getLatLng()),this._change(h)},hasSelfIntersection(){return zr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(l,h){let v=L.polyline(this._layer.getLatLngs());l&&(h||(h=this._hintMarker.getLatLng()),v.addLatLng(h));let x=zr(v.toGeoJSON(15));this._doesSelfIntersect=x.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(x,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(l){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,l.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=this._layer.getLatLngs(),x=v[v.length-1];if(h.equals(v[0])||v.length>0&&h.equals(x)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:h,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(h);let C=this._createMarker(h);this._setTooltipText(),this._setHintLineAfterNewVertex(h),this._fireVertexAdded(C,void 0,h,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(l)},_setHintLineAfterNewVertex(l){this._hintline.setLatLngs([l,l])},_removeLastVertex(){let l=this._markers;if(l.length<=1){this.disable();return}let h=this._layer.getLatLngs(),v=l[l.length-1],{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(l,v);l.pop(),this._layerGroup.removeLayer(v);let C=l[l.length-1],j=h.indexOf(C.getLatLng());h=h.slice(0,j+1),this._layer.setLatLngs(h),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(v,x,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=1)return;let h=L.polyline(l,this.options.pathOptions);this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h),this.options.snappable&&this._cleanupSnapping();let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},_createMarker(l){let h=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._markers.push(h),h.on("click",this._finishShape,this),h},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),h="";l<=1?h=lr("tooltips.continueLine"):h=lr("tooltips.finishLine"),this._hintMarker.setTooltipContent(h)},_change(l){this._fireChange(l,"Draw")},setStyle(){var l,h;(l=this._layer)==null||l.setStyle(this.options.templineStyle),(h=this._hintline)==null||h.setStyle(this.options.hintlineStyle)}}),ho.Polygon=ho.Line.extend({initialize(l){this._map=l,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(l){L.PM.Draw.Line.prototype.enable.call(this,l),this._layer.pm._shape="Polygon"},_createMarker(l){let h=new L.Marker(l,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this._layerGroup.addLayer(h),this._markers.push(h),this._layer.getLatLngs().flat().length===1?(h.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(h)-1,this.options.snappable&&this._cleanupSnapping()):h.on("click",()=>1),h},_setTooltipText(){let{length:l}=this._layer.getLatLngs().flat(),h="";l<=2?h=lr("tooltips.continueLine"):h=lr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(h)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let h=L.polygon(l,this.options.pathOptions);this._setPane(h,"layerPane"),this._finishLayer(h),h.addTo(this._map.pm._getContainingLayer()),this._fireCreate(h),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))}}),ho.Rectangle=ho.extend({initialize(l){this._map=l,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(l){if(L.Util.setOptions(this,l),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let h=0;h<2;h+=1){let v=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(v,"vertexPane"),v._pmTempLayer=!0,this._layerGroup.addLayer(v),this._styleMarkers.push(v)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeStartingMarkers(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(h),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(v=>{L.DomUtil.addClass(v._icon,"visible"),v.setLatLng(h)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(lr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let l=this._startMarker.getLatLng();l&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([l,l]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}let h=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(h,"Draw")},_syncRectangleSize(){let l=Ol(this._startMarker.getLatLng(),this._map),h=Ol(this._hintMarker.getLatLng(),this._map),v=L.PM.Utils._getRotatedRectangle(l,h,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(v),this.options.cursorMarker&&this._styleMarkers){let x=[];v.forEach(C=>{!C.equals(l,1e-8)&&!C.equals(h,1e-8)&&x.push(C)}),x.forEach((C,j)=>{try{this._styleMarkers[j].setLatLng(C)}catch{}})}},_findCorners(){let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.options.rectangleAngle||0,this._map)},_finishShape(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||v.equals(h))return;let x=L.rectangle([v,h],this.options.pathOptions);if(this.options.rectangleAngle){let j=L.PM.Utils._getRotatedRectangle(v,h,this.options.rectangleAngle||0,this._map);x.setLatLngs(j),x.pm&&x.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(x,"layerPane"),this._finishLayer(x),x.addTo(this._map.pm._getContainingLayer()),this._fireCreate(x);let C=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(C))},setStyle(){var l;(l=this._layer)==null||l.setStyle(this.options.pathOptions)}}),ho.CircleMarker=ho.extend({initialize(l){this._map=l,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(l){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let h={};L.extend(h,this.options.templineStyle),h.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),h),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(lr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(l=>{this.isRelevantMarker(l)&&l.pm.disable()})},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_placeCenterMarker(l){this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let h=this._hintMarker.getLatLng();this._centerMarker.setLatLng(h),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let l=this._centerMarker.getLatLng();l&&(this._layer.setLatLng(l),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(lr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let l=this._centerMarker.getLatLng(),h=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([l,h])},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),h=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let v=l;v.target=this._hintMarker,this._handleSnapping(v)}this._handleHintMarkerSnapping();let h=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(h,"Draw")},isRelevantMarker(l){return l instanceof L.CircleMarker&&!(l instanceof L.Circle)&&l.pm&&!l._pmTempLayer},_createMarker(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!l.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng(),v=new this._BaseCircleClass(h,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(v,"layerPane"),this._finishLayer(v),v.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(v),this._fireCreate(v),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(l){l.pm&&this.options.markerEditable&&l.pm.enable()},_finishShape(l){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._centerMarker.getLatLng(),v=this._defaultRadius;if(this.options[this._editableOption]){let X=this._hintMarker.getLatLng();v=this._distanceCalculation(h,X),this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?v=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(v=this.options[this._maxRadiusOption])}let x={...this.options.pathOptions,radius:v},C=new this._BaseCircleClass(h,x);this._setPane(C,"layerPane"),this._finishLayer(C),C.addTo(this._map.pm._getContainingLayer()),C.pm&&C.pm._updateHiddenPolyCircle(),this._fireCreate(C);let j=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(j))},_getNewDestinationOfHintMarker(){let l=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return l;let h=this._centerMarker.getLatLng(),v=this._distanceCalculation(h,l);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?l=Dl(this._map,h,l,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(l=Dl(this._map,h,l,this._getMaxDistanceInMeter()))}return l},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let l=this._centerMarker.getLatLng(),h=this._hintMarker.getLatLng(),v=this._distanceCalculation(l,h);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var h,v;let l={};L.extend(l,this.options.templineStyle),this.options[this._editableOption]&&(l.radius=0),(h=this._layer)==null||h.setStyle(l),(v=this._hintline)==null||v.setStyle(this.options.hintlineStyle)},_distanceCalculation(l,h){return this._map.project(l).distanceTo(this._map.project(h))}}),ho.Circle=ho.CircleMarker.extend({initialize(l){this._map=l,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(l,h){return this._map.distance(l,h)}});function di(l){if(!l)throw new Error("coord is required");if(!Array.isArray(l)){if(l.type==="Feature"&&l.geometry!==null&&l.geometry.type==="Point")return l.geometry.coordinates;if(l.type==="Point")return l.coordinates}if(Array.isArray(l)&&l.length>=2&&!Array.isArray(l[0])&&!Array.isArray(l[1]))return l;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function bi(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function po(l){return l.type==="Feature"?l.geometry:l}function bo(l,h){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}function Ts(l,h,v){if(l!==null)for(var x,C,j,X,re,ge,Le,Xe=0,Ue=0,vt,Dt=l.type,Xt=Dt==="FeatureCollection",_n=Dt==="Feature",Sn=Xt?l.features.length:1,hr=0;hr<Sn;hr++){Le=Xt?l.features[hr].geometry:_n?l.geometry:l,vt=Le?Le.type==="GeometryCollection":!1,re=vt?Le.geometries.length:1;for(var Je=0;Je<re;Je++){var nt=0,ct=0;if(X=vt?Le.geometries[Je]:Le,X!==null){ge=X.coordinates;var jt=X.type;switch(Xe=0,jt){case null:break;case"Point":if(h(ge,Ue,hr,nt,ct)===!1)return!1;Ue++,nt++;break;case"LineString":case"MultiPoint":for(x=0;x<ge.length;x++){if(h(ge[x],Ue,hr,nt,ct)===!1)return!1;Ue++,jt==="MultiPoint"&&nt++}jt==="LineString"&&nt++;break;case"Polygon":case"MultiLineString":for(x=0;x<ge.length;x++){for(C=0;C<ge[x].length-Xe;C++){if(h(ge[x][C],Ue,hr,nt,ct)===!1)return!1;Ue++}jt==="MultiLineString"&&nt++,jt==="Polygon"&&ct++}jt==="Polygon"&&nt++;break;case"MultiPolygon":for(x=0;x<ge.length;x++){for(ct=0,C=0;C<ge[x].length;C++){for(j=0;j<ge[x][C].length-Xe;j++){if(h(ge[x][C][j],Ue,hr,nt,ct)===!1)return!1;Ue++}ct++}nt++}break;case"GeometryCollection":for(x=0;x<X.geometries.length;x++)if(Ts(X.geometries[x],h)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ur(l,h){if(l.type==="Feature")h(l,0);else if(l.type==="FeatureCollection")for(var v=0;v<l.features.length&&h(l.features[v],v)!==!1;v++);}function $o(l,h,v){var x=v;return Ur(l,function(C,j){j===0&&v===void 0?x=C:x=h(x,C,j)}),x}function cl(l,h){var v,x,C,j,X,re,ge,Le,Xe,Ue,vt=0,Dt=l.type==="FeatureCollection",Xt=l.type==="Feature",_n=Dt?l.features.length:1;for(v=0;v<_n;v++){for(re=Dt?l.features[v].geometry:Xt?l.geometry:l,Le=Dt?l.features[v].properties:Xt?l.properties:{},Xe=Dt?l.features[v].bbox:Xt?l.bbox:void 0,Ue=Dt?l.features[v].id:Xt?l.id:void 0,ge=re?re.type==="GeometryCollection":!1,X=ge?re.geometries.length:1,C=0;C<X;C++){if(j=ge?re.geometries[C]:re,j===null){if(h(null,vt,Le,Xe,Ue)===!1)return!1;continue}switch(j.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(h(j,vt,Le,Xe,Ue)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<j.geometries.length;x++)if(h(j.geometries[x],vt,Le,Xe,Ue)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}vt++}}function is(l,h){cl(l,function(v,x,C,j,X){var re=v===null?null:v.type;switch(re){case null:case"Point":case"LineString":case"Polygon":return h(Ye(v,C,{bbox:j,id:X}),x,0)===!1?!1:void 0}var ge;switch(re){case"MultiPoint":ge="Point";break;case"MultiLineString":ge="LineString";break;case"MultiPolygon":ge="Polygon";break}for(var Le=0;Le<v.coordinates.length;Le++){var Xe=v.coordinates[Le],Ue={type:ge,coordinates:Xe};if(h(Ye(Ue,C),x,Le)===!1)return!1}})}function tu(l){if(!l)throw new Error("geojson is required");var h=[];return is(l,function(v){ra(v,h)}),Vt(h)}function ra(l,h){var v=[],x=l.geometry;if(x!==null){switch(x.type){case"Polygon":v=bi(x);break;case"LineString":v=[bi(x)]}v.forEach(function(C){var j=xu(C,l.properties);j.forEach(function(X){X.id=h.length,h.push(X)})})}}function xu(l,h){var v=[];return l.reduce(function(x,C){var j=Lt([x,C],h);return j.bbox=Ga(x,C),v.push(j),C}),v}function Ga(l,h){var v=l[0],x=l[1],C=h[0],j=h[1],X=v<C?v:C,re=x<j?x:j,ge=v>C?v:C,Le=x>j?x:j;return[X,re,ge,Le]}var Ha=tu,wo=f(Fi(),1);function ia(l,h){var v={},x=[];if(l.type==="LineString"&&(l=Ye(l)),h.type==="LineString"&&(h=Ye(h)),l.type==="Feature"&&h.type==="Feature"&&l.geometry!==null&&h.geometry!==null&&l.geometry.type==="LineString"&&h.geometry.type==="LineString"&&l.geometry.coordinates.length===2&&h.geometry.coordinates.length===2){var C=Ns(l,h);return C&&x.push(C),Vt(x)}var j=(0,wo.default)();return j.load(Ha(h)),Ur(Ha(l),function(X){Ur(j.search(X),function(re){var ge=Ns(X,re);if(ge){var Le=bi(ge).join(",");v[Le]||(v[Le]=!0,x.push(ge))}})}),Vt(x)}function Ns(l,h){var v=bi(l),x=bi(h);if(v.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(x.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var C=v[0][0],j=v[0][1],X=v[1][0],re=v[1][1],ge=x[0][0],Le=x[0][1],Xe=x[1][0],Ue=x[1][1],vt=(Ue-Le)*(X-C)-(Xe-ge)*(re-j),Dt=(Xe-ge)*(j-Le)-(Ue-Le)*(C-ge),Xt=(X-C)*(j-Le)-(re-j)*(C-ge);if(vt===0)return null;var _n=Dt/vt,Sn=Xt/vt;if(_n>=0&&_n<=1&&Sn>=0&&Sn<=1){var hr=C+_n*(X-C),Je=j+_n*(re-j);return ut([hr,Je])}return null}var ms=ia,fl=f(Fi(),1);function zo(l,h,v){v===void 0&&(v={});var x=di(l),C=di(h),j=or(C[1]-x[1]),X=or(C[0]-x[0]),re=or(x[1]),ge=or(C[1]),Le=Math.pow(Math.sin(j/2),2)+Math.pow(Math.sin(X/2),2)*Math.cos(re)*Math.cos(ge);return hn(2*Math.atan2(Math.sqrt(Le),Math.sqrt(1-Le)),v.units)}var os=zo;function ss(l){var h=l[0],v=l[1],x=l[2],C=l[3],j=os(l.slice(0,2),[x,v]),X=os(l.slice(0,2),[h,C]);if(j>=X){var re=(v+C)/2;return[h,re-(x-h)/2,x,re+(x-h)/2]}else{var ge=(h+x)/2;return[ge-(C-v)/2,v,ge+(C-v)/2,C]}}var Qu=ss;function Po(l){var h=[1/0,1/0,-1/0,-1/0];return Ts(l,function(v){h[0]>v[0]&&(h[0]=v[0]),h[1]>v[1]&&(h[1]=v[1]),h[2]<v[0]&&(h[2]=v[0]),h[3]<v[1]&&(h[3]=v[1])}),h}Po.default=Po;var ba=Po;function Uo(l,h){h===void 0&&(h={});var v=h.precision,x=h.coordinates,C=h.mutate;if(v=v==null||isNaN(v)?6:v,x=x==null||isNaN(x)?3:x,!l)throw new Error("<geojson> is required");if(typeof v!="number")throw new Error("<precision> must be a number");if(typeof x!="number")throw new Error("<coordinates> must be a number");(C===!1||C===void 0)&&(l=JSON.parse(JSON.stringify(l)));var j=Math.pow(10,v);return Ts(l,function(X){Vo(X,j,x)}),l}function Vo(l,h,v){l.length>v&&l.splice(v,l.length);for(var x=0;x<l.length;x++)l[x]=Math.round(l[x]*h)/h;return l}var wa=Uo;function xa(l,h,v){if(v===void 0&&(v={}),v.final===!0)return Go(l,h);var x=di(l),C=di(h),j=or(x[0]),X=or(C[0]),re=or(x[1]),ge=or(C[1]),Le=Math.sin(X-j)*Math.cos(ge),Xe=Math.cos(re)*Math.sin(ge)-Math.sin(re)*Math.cos(ge)*Math.cos(X-j);return $n(Math.atan2(Le,Xe))}function Go(l,h){var v=xa(h,l);return v=(v+180)%360,v}function To(l,h,v,x){x===void 0&&(x={});var C=di(l),j=or(C[0]),X=or(C[1]),re=or(v),ge=In(h,x.units),Le=Math.asin(Math.sin(X)*Math.cos(ge)+Math.cos(X)*Math.sin(ge)*Math.cos(re)),Xe=j+Math.atan2(Math.sin(re)*Math.sin(ge)*Math.cos(X),Math.cos(ge)-Math.sin(X)*Math.sin(Le)),Ue=$n(Xe),vt=$n(Le);return ut([Ue,vt],x.properties)}function oa(l,h,v){v===void 0&&(v={});var x=ut([1/0,1/0],{dist:1/0}),C=0;return is(l,function(j){for(var X=bi(j),re=0;re<X.length-1;re++){var ge=ut(X[re]);ge.properties.dist=os(h,ge,v);var Le=ut(X[re+1]);Le.properties.dist=os(h,Le,v);var Xe=os(ge,Le,v),Ue=Math.max(ge.properties.dist,Le.properties.dist),vt=xa(ge,Le),Dt=To(h,Ue,vt+90,v),Xt=To(h,Ue,vt-90,v),_n=ms(Lt([Dt.geometry.coordinates,Xt.geometry.coordinates]),Lt([ge.geometry.coordinates,Le.geometry.coordinates])),Sn=null;_n.features.length>0&&(Sn=_n.features[0],Sn.properties.dist=os(h,Sn,v),Sn.properties.location=C+os(ge,Sn,v)),ge.properties.dist<x.properties.dist&&(x=ge,x.properties.index=re,x.properties.location=C),Le.properties.dist<x.properties.dist&&(x=Le,x.properties.index=re+1,x.properties.location=C+Xe),Sn&&Sn.properties.dist<x.properties.dist&&(x=Sn,x.properties.index=re),C+=Xe}}),x}var Ds=oa;function Ho(l,h){if(!l)throw new Error("line is required");if(!h)throw new Error("splitter is required");var v=bo(l),x=bo(h);if(v!=="LineString")throw new Error("line must be LineString");if(x==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(x==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var C=wa(h,{precision:7});switch(x){case"Point":return Zt(l,C);case"MultiPoint":return _t(l,C);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _t(l,ms(l,C))}}function _t(l,h){var v=[],x=(0,fl.default)();return is(h,function(C){if(v.forEach(function(re,ge){re.id=ge}),!v.length)v=Zt(l,C).features,v.forEach(function(re){re.bbox||(re.bbox=Qu(ba(re)))}),x.load(Vt(v));else{var j=x.search(C);if(j.features.length){var X=Nt(C,j);v=v.filter(function(re){return re.id!==X.id}),x.remove(X),Ur(Zt(X,C),function(re){v.push(re),x.insert(re)})}}}),Vt(v)}function Zt(l,h){var v=[],x=bi(l)[0],C=bi(l)[l.geometry.coordinates.length-1];if(kn(x,di(h))||kn(C,di(h)))return Vt([l]);var j=(0,fl.default)(),X=Ha(l);j.load(X);var re=j.search(h);if(!re.features.length)return Vt([l]);var ge=Nt(h,re),Le=[x],Xe=$o(X,function(Ue,vt,Dt){var Xt=bi(vt)[1],_n=di(h);return Dt===ge.id?(Ue.push(_n),v.push(Lt(Ue)),kn(_n,Xt)?[_n]:[_n,Xt]):(Ue.push(Xt),Ue)},Le);return Xe.length>1&&v.push(Lt(Xe)),Vt(v)}function Nt(l,h){if(!h.features.length)throw new Error("lines must contain features");if(h.features.length===1)return h.features[0];var v,x=1/0;return Ur(h,function(C){var j=Ds(C,l),X=j.properties.dist;X<x&&(v=C,x=X)}),v}function kn(l,h){return l[0]===h[0]&&l[1]===h[1]}var Jn=Ho;function Lr(l,h,v){if(v===void 0&&(v={}),!l)throw new Error("point is required");if(!h)throw new Error("polygon is required");var x=di(l),C=po(h),j=C.type,X=h.bbox,re=C.coordinates;if(X&&wi(x,X)===!1)return!1;j==="Polygon"&&(re=[re]);for(var ge=!1,Le=0;Le<re.length&&!ge;Le++)if(Zi(x,re[Le][0],v.ignoreBoundary)){for(var Xe=!1,Ue=1;Ue<re[Le].length&&!Xe;)Zi(x,re[Le][Ue],!v.ignoreBoundary)&&(Xe=!0),Ue++;Xe||(ge=!0)}return ge}function Zi(l,h,v){var x=!1;h[0][0]===h[h.length-1][0]&&h[0][1]===h[h.length-1][1]&&(h=h.slice(0,h.length-1));for(var C=0,j=h.length-1;C<h.length;j=C++){var X=h[C][0],re=h[C][1],ge=h[j][0],Le=h[j][1],Xe=l[1]*(X-ge)+re*(ge-l[0])+Le*(l[0]-X)===0&&(X-l[0])*(ge-l[0])<=0&&(re-l[1])*(Le-l[1])<=0;if(Xe)return!v;var Ue=re>l[1]!=Le>l[1]&&l[0]<(ge-X)*(l[1]-re)/(Le-re)+X;Ue&&(x=!x)}return x}function wi(l,h){return h[0]<=l[0]&&h[1]<=l[1]&&h[2]>=l[0]&&h[3]>=l[1]}function Rl(l,h,v){v===void 0&&(v={});for(var x=di(l),C=bi(h),j=0;j<C.length-1;j++){var X=!1;if(v.ignoreEndVertices&&(j===0&&(X="start"),j===C.length-2&&(X="end"),j===0&&j+1===C.length-1&&(X="both")),as(C[j],C[j+1],x,X,typeof v.epsilon>"u"?null:v.epsilon))return!0}return!1}function as(l,h,v,x,C){var j=v[0],X=v[1],re=l[0],ge=l[1],Le=h[0],Xe=h[1],Ue=v[0]-re,vt=v[1]-ge,Dt=Le-re,Xt=Xe-ge,_n=Ue*Xt-vt*Dt;if(C!==null){if(Math.abs(_n)>C)return!1}else if(_n!==0)return!1;if(x){if(x==="start")return Math.abs(Dt)>=Math.abs(Xt)?Dt>0?re<j&&j<=Le:Le<=j&&j<re:Xt>0?ge<X&&X<=Xe:Xe<=X&&X<ge;if(x==="end")return Math.abs(Dt)>=Math.abs(Xt)?Dt>0?re<=j&&j<Le:Le<j&&j<=re:Xt>0?ge<=X&&X<Xe:Xe<X&&X<=ge;if(x==="both")return Math.abs(Dt)>=Math.abs(Xt)?Dt>0?re<j&&j<Le:Le<j&&j<re:Xt>0?ge<X&&X<Xe:Xe<X&&X<ge}else return Math.abs(Dt)>=Math.abs(Xt)?Dt>0?re<=j&&j<=Le:Le<=j&&j<=re:Xt>0?ge<=X&&X<=Xe:Xe<=X&&X<=ge;return!1}var Ki=Rl;function sa(l,h){var v=po(l),x=po(h),C=v.type,j=x.type,X=v.coordinates,re=x.coordinates;switch(C){case"Point":switch(j){case"Point":return Ti(X,re);default:throw new Error("feature2 "+j+" geometry not supported")}case"MultiPoint":switch(j){case"Point":return La(v,x);case"MultiPoint":return aa(v,x);default:throw new Error("feature2 "+j+" geometry not supported")}case"LineString":switch(j){case"Point":return Ki(x,v,{ignoreEndVertices:!0});case"LineString":return Yr(v,x);case"MultiPoint":return la(v,x);default:throw new Error("feature2 "+j+" geometry not supported")}case"Polygon":switch(j){case"Point":return Lr(x,v,{ignoreBoundary:!0});case"LineString":return Ws(v,x);case"Polygon":return No(v,x);case"MultiPoint":return ua(v,x);default:throw new Error("feature2 "+j+" geometry not supported")}default:throw new Error("feature1 "+C+" geometry not supported")}}function La(l,h){var v,x=!1;for(v=0;v<l.coordinates.length;v++)if(Ti(l.coordinates[v],h.coordinates)){x=!0;break}return x}function aa(l,h){for(var v=0,x=h.coordinates;v<x.length;v++){for(var C=x[v],j=!1,X=0,re=l.coordinates;X<re.length;X++){var ge=re[X];if(Ti(C,ge)){j=!0;break}}if(!j)return!1}return!0}function la(l,h){for(var v=!1,x=0,C=h.coordinates;x<C.length;x++){var j=C[x];if(Ki(j,l,{ignoreEndVertices:!0})&&(v=!0),!Ki(j,l))return!1}return!!v}function ua(l,h){for(var v=0,x=h.coordinates;v<x.length;v++){var C=x[v];if(!Lr(C,l,{ignoreBoundary:!0}))return!1}return!0}function Yr(l,h){for(var v=!1,x=0,C=h.coordinates;x<C.length;x++){var j=C[x];if(Ki({type:"Point",coordinates:j},l,{ignoreEndVertices:!0})&&(v=!0),!Ki({type:"Point",coordinates:j},l,{ignoreEndVertices:!1}))return!1}return v}function Ws(l,h){var v=!1,x=0,C=ba(l),j=ba(h);if(!xi(C,j))return!1;for(x;x<h.coordinates.length-1;x++){var X=go(h.coordinates[x],h.coordinates[x+1]);if(Lr({type:"Point",coordinates:X},l,{ignoreBoundary:!0})){v=!0;break}}return v}function No(l,h){if(l.type==="Feature"&&l.geometry===null||h.type==="Feature"&&h.geometry===null)return!1;var v=ba(l),x=ba(h);if(!xi(v,x))return!1;for(var C=po(h).coordinates,j=0,X=C;j<X.length;j++)for(var re=X[j],ge=0,Le=re;ge<Le.length;ge++){var Xe=Le[ge];if(!Lr(Xe,l))return!1}return!0}function xi(l,h){return!(l[0]>h[0]||l[2]<h[2]||l[1]>h[1]||l[3]<h[3])}function Ti(l,h){return l[0]===h[0]&&l[1]===h[1]}function go(l,h){return[(l[0]+h[0])/2,(l[1]+h[1])/2]}var Ui=f(Rr()),Is=l=>()=>l,vs=l=>{let h=l?(v,x)=>x.minus(v).abs().isLessThanOrEqualTo(l):Is(!1);return(v,x)=>h(v,x)?0:v.comparedTo(x)};function js(l){let h=l?(v,x,C,j,X)=>v.exponentiatedBy(2).isLessThanOrEqualTo(j.minus(x).exponentiatedBy(2).plus(X.minus(C).exponentiatedBy(2)).times(l)):Is(!1);return(v,x,C)=>{let j=v.x,X=v.y,re=C.x,ge=C.y,Le=X.minus(ge).times(x.x.minus(re)).minus(j.minus(re).times(x.y.minus(ge)));return h(Le,j,X,re,ge)?0:Le.comparedTo(0)}}var Lu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ca=Math.ceil,xo=Math.floor,$i="[BigNumber Error] ",qo=$i+"Number primitive has more than 15 significant digits: ",ys=1e14,pr=14,Sa=9007199254740991,Ea=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Zs=1e7,ls=1e9;function bc(l){var h,v,x,C=Je.prototype={constructor:Je,toString:null,valueOf:null},j=new Je(1),X=20,re=4,ge=-7,Le=21,Xe=-1e7,Ue=1e7,vt=!1,Dt=1,Xt=0,_n={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Sn="0123456789abcdefghijklmnopqrstuvwxyz",hr=!0;function Je(me,Pe){var Be,Oe,je,$e,at,lt,pt,Et,Ct=this;if(!(Ct instanceof Je))return new Je(me,Pe);if(Pe==null){if(me&&me._isBigNumber===!0){Ct.s=me.s,!me.c||me.e>Ue?Ct.c=Ct.e=null:me.e<Xe?Ct.c=[Ct.e=0]:(Ct.e=me.e,Ct.c=me.c.slice());return}if((lt=typeof me=="number")&&me*0==0){if(Ct.s=1/me<0?(me=-me,-1):1,me===~~me){for($e=0,at=me;at>=10;at/=10,$e++);$e>Ue?Ct.c=Ct.e=null:(Ct.e=$e,Ct.c=[me]);return}Et=String(me)}else{if(!Lu.test(Et=String(me)))return x(Ct,Et,lt);Ct.s=Et.charCodeAt(0)==45?(Et=Et.slice(1),-1):1}($e=Et.indexOf("."))>-1&&(Et=Et.replace(".","")),(at=Et.search(/e/i))>0?($e<0&&($e=at),$e+=+Et.slice(at+1),Et=Et.substring(0,at)):$e<0&&($e=Et.length)}else{if(a(Pe,2,Sn.length,"Base"),Pe==10&&hr)return Ct=new Je(me),bt(Ct,X+Ct.e+1,re);if(Et=String(me),lt=typeof me=="number"){if(me*0!=0)return x(Ct,Et,lt,Pe);if(Ct.s=1/me<0?(Et=Et.slice(1),-1):1,Je.DEBUG&&Et.replace(/^0\.0*|\./,"").length>15)throw Error(qo+me)}else Ct.s=Et.charCodeAt(0)===45?(Et=Et.slice(1),-1):1;for(Be=Sn.slice(0,Pe),$e=at=0,pt=Et.length;at<pt;at++)if(Be.indexOf(Oe=Et.charAt(at))<0){if(Oe=="."){if(at>$e){$e=pt;continue}}else if(!je&&(Et==Et.toUpperCase()&&(Et=Et.toLowerCase())||Et==Et.toLowerCase()&&(Et=Et.toUpperCase()))){je=!0,at=-1,$e=0;continue}return x(Ct,String(me),lt,Pe)}lt=!1,Et=v(Et,Pe,10,Ct.s),($e=Et.indexOf("."))>-1?Et=Et.replace(".",""):$e=Et.length}for(at=0;Et.charCodeAt(at)===48;at++);for(pt=Et.length;Et.charCodeAt(--pt)===48;);if(Et=Et.slice(at,++pt)){if(pt-=at,lt&&Je.DEBUG&&pt>15&&(me>Sa||me!==xo(me)))throw Error(qo+Ct.s*me);if(($e=$e-at-1)>Ue)Ct.c=Ct.e=null;else if($e<Xe)Ct.c=[Ct.e=0];else{if(Ct.e=$e,Ct.c=[],at=($e+1)%pr,$e<0&&(at+=pr),at<pt){for(at&&Ct.c.push(+Et.slice(0,at)),pt-=pr;at<pt;)Ct.c.push(+Et.slice(at,at+=pr));at=pr-(Et=Et.slice(at)).length}else at-=pt;for(;at--;Et+="0");Ct.c.push(+Et)}}else Ct.c=[Ct.e=0]}Je.clone=bc,Je.ROUND_UP=0,Je.ROUND_DOWN=1,Je.ROUND_CEIL=2,Je.ROUND_FLOOR=3,Je.ROUND_HALF_UP=4,Je.ROUND_HALF_DOWN=5,Je.ROUND_HALF_EVEN=6,Je.ROUND_HALF_CEIL=7,Je.ROUND_HALF_FLOOR=8,Je.EUCLID=9,Je.config=Je.set=function(me){var Pe,Be;if(me!=null)if(typeof me=="object"){if(me.hasOwnProperty(Pe="DECIMAL_PLACES")&&(Be=me[Pe],a(Be,0,ls,Pe),X=Be),me.hasOwnProperty(Pe="ROUNDING_MODE")&&(Be=me[Pe],a(Be,0,8,Pe),re=Be),me.hasOwnProperty(Pe="EXPONENTIAL_AT")&&(Be=me[Pe],Be&&Be.pop?(a(Be[0],-1e9,0,Pe),a(Be[1],0,ls,Pe),ge=Be[0],Le=Be[1]):(a(Be,-1e9,ls,Pe),ge=-(Le=Be<0?-Be:Be))),me.hasOwnProperty(Pe="RANGE"))if(Be=me[Pe],Be&&Be.pop)a(Be[0],-1e9,-1,Pe),a(Be[1],1,ls,Pe),Xe=Be[0],Ue=Be[1];else if(a(Be,-1e9,ls,Pe),Be)Xe=-(Ue=Be<0?-Be:Be);else throw Error($i+Pe+" cannot be zero: "+Be);if(me.hasOwnProperty(Pe="CRYPTO"))if(Be=me[Pe],Be===!!Be)if(Be)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))vt=Be;else throw vt=!Be,Error($i+"crypto unavailable");else vt=Be;else throw Error($i+Pe+" not true or false: "+Be);if(me.hasOwnProperty(Pe="MODULO_MODE")&&(Be=me[Pe],a(Be,0,9,Pe),Dt=Be),me.hasOwnProperty(Pe="POW_PRECISION")&&(Be=me[Pe],a(Be,0,ls,Pe),Xt=Be),me.hasOwnProperty(Pe="FORMAT"))if(Be=me[Pe],typeof Be=="object")_n=Be;else throw Error($i+Pe+" not an object: "+Be);if(me.hasOwnProperty(Pe="ALPHABET"))if(Be=me[Pe],typeof Be=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Be))hr=Be.slice(0,10)=="0123456789",Sn=Be;else throw Error($i+Pe+" invalid: "+Be)}else throw Error($i+"Object expected: "+me);return{DECIMAL_PLACES:X,ROUNDING_MODE:re,EXPONENTIAL_AT:[ge,Le],RANGE:[Xe,Ue],CRYPTO:vt,MODULO_MODE:Dt,POW_PRECISION:Xt,FORMAT:_n,ALPHABET:Sn}},Je.isBigNumber=function(me){if(!me||me._isBigNumber!==!0)return!1;if(!Je.DEBUG)return!0;var Pe,Be,Oe=me.c,je=me.e,$e=me.s;e:if({}.toString.call(Oe)=="[object Array]"){if(($e===1||$e===-1)&&je>=-1e9&&je<=ls&&je===xo(je)){if(Oe[0]===0){if(je===0&&Oe.length===1)return!0;break e}if(Pe=(je+1)%pr,Pe<1&&(Pe+=pr),String(Oe[0]).length==Pe){for(Pe=0;Pe<Oe.length;Pe++)if(Be=Oe[Pe],Be<0||Be>=ys||Be!==xo(Be))break e;if(Be!==0)return!0}}}else if(Oe===null&&je===null&&($e===null||$e===1||$e===-1))return!0;throw Error($i+"Invalid BigNumber: "+me)},Je.maximum=Je.max=function(){return ct(arguments,-1)},Je.minimum=Je.min=function(){return ct(arguments,1)},Je.random=function(){var me=9007199254740992,Pe=Math.random()*me&2097151?function(){return xo(Math.random()*me)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Be){var Oe,je,$e,at,lt,pt=0,Et=[],Ct=new Je(j);if(Be==null?Be=X:a(Be,0,ls),at=ca(Be/pr),vt)if(crypto.getRandomValues){for(Oe=crypto.getRandomValues(new Uint32Array(at*=2));pt<at;)lt=Oe[pt]*131072+(Oe[pt+1]>>>11),lt>=9e15?(je=crypto.getRandomValues(new Uint32Array(2)),Oe[pt]=je[0],Oe[pt+1]=je[1]):(Et.push(lt%1e14),pt+=2);pt=at/2}else if(crypto.randomBytes){for(Oe=crypto.randomBytes(at*=7);pt<at;)lt=(Oe[pt]&31)*281474976710656+Oe[pt+1]*1099511627776+Oe[pt+2]*4294967296+Oe[pt+3]*16777216+(Oe[pt+4]<<16)+(Oe[pt+5]<<8)+Oe[pt+6],lt>=9e15?crypto.randomBytes(7).copy(Oe,pt):(Et.push(lt%1e14),pt+=7);pt=at/7}else throw vt=!1,Error($i+"crypto unavailable");if(!vt)for(;pt<at;)lt=Pe(),lt<9e15&&(Et[pt++]=lt%1e14);for(at=Et[--pt],Be%=pr,at&&Be&&(lt=Ea[pr-Be],Et[pt]=xo(at/lt)*lt);Et[pt]===0;Et.pop(),pt--);if(pt<0)Et=[$e=0];else{for($e=-1;Et[0]===0;Et.splice(0,1),$e-=pr);for(pt=1,lt=Et[0];lt>=10;lt/=10,pt++);pt<pr&&($e-=pr-pt)}return Ct.e=$e,Ct.c=Et,Ct}}(),Je.sum=function(){for(var me=1,Pe=arguments,Be=new Je(Pe[0]);me<Pe.length;)Be=Be.plus(Pe[me++]);return Be},v=function(){var me="0123456789";function Pe(Be,Oe,je,$e){for(var at,lt=[0],pt,Et=0,Ct=Be.length;Et<Ct;){for(pt=lt.length;pt--;lt[pt]*=Oe);for(lt[0]+=$e.indexOf(Be.charAt(Et++)),at=0;at<lt.length;at++)lt[at]>je-1&&(lt[at+1]==null&&(lt[at+1]=0),lt[at+1]+=lt[at]/je|0,lt[at]%=je)}return lt.reverse()}return function(Be,Oe,je,$e,at){var lt,pt,Et,Ct,sn,zn,Wn,nr,mi=Be.indexOf("."),Ni=X,Jr=re;for(mi>=0&&(Ct=Xt,Xt=0,Be=Be.replace(".",""),nr=new Je(Oe),zn=nr.pow(Be.length-mi),Xt=Ct,nr.c=Pe(V(Io(zn.c),zn.e,"0"),10,je,me),nr.e=nr.c.length),Wn=Pe(Be,Oe,je,at?(lt=Sn,me):(lt=me,Sn)),Et=Ct=Wn.length;Wn[--Ct]==0;Wn.pop());if(!Wn[0])return lt.charAt(0);if(mi<0?--Et:(zn.c=Wn,zn.e=Et,zn.s=$e,zn=h(zn,nr,Ni,Jr,je),Wn=zn.c,sn=zn.r,Et=zn.e),pt=Et+Ni+1,mi=Wn[pt],Ct=je/2,sn=sn||pt<0||Wn[pt+1]!=null,sn=Jr<4?(mi!=null||sn)&&(Jr==0||Jr==(zn.s<0?3:2)):mi>Ct||mi==Ct&&(Jr==4||sn||Jr==6&&Wn[pt-1]&1||Jr==(zn.s<0?8:7)),pt<1||!Wn[0])Be=sn?V(lt.charAt(1),-Ni,lt.charAt(0)):lt.charAt(0);else{if(Wn.length=pt,sn)for(--je;++Wn[--pt]>je;)Wn[pt]=0,pt||(++Et,Wn=[1].concat(Wn));for(Ct=Wn.length;!Wn[--Ct];);for(mi=0,Be="";mi<=Ct;Be+=lt.charAt(Wn[mi++]));Be=V(Be,Et,lt.charAt(0))}return Be}}(),h=function(){function me(Oe,je,$e){var at,lt,pt,Et,Ct=0,sn=Oe.length,zn=je%Zs,Wn=je/Zs|0;for(Oe=Oe.slice();sn--;)pt=Oe[sn]%Zs,Et=Oe[sn]/Zs|0,at=Wn*pt+Et*zn,lt=zn*pt+at%Zs*Zs+Ct,Ct=(lt/$e|0)+(at/Zs|0)+Wn*Et,Oe[sn]=lt%$e;return Ct&&(Oe=[Ct].concat(Oe)),Oe}function Pe(Oe,je,$e,at){var lt,pt;if($e!=at)pt=$e>at?1:-1;else for(lt=pt=0;lt<$e;lt++)if(Oe[lt]!=je[lt]){pt=Oe[lt]>je[lt]?1:-1;break}return pt}function Be(Oe,je,$e,at){for(var lt=0;$e--;)Oe[$e]-=lt,lt=Oe[$e]<je[$e]?1:0,Oe[$e]=lt*at+Oe[$e]-je[$e];for(;!Oe[0]&&Oe.length>1;Oe.splice(0,1));}return function(Oe,je,$e,at,lt){var pt,Et,Ct,sn,zn,Wn,nr,mi,Ni,Jr,Vi,ws,Eu,ha,Df,Wa,tc,da=Oe.s==je.s?1:-1,Zo=Oe.c,mo=je.c;if(!Zo||!Zo[0]||!mo||!mo[0])return new Je(!Oe.s||!je.s||(Zo?mo&&Zo[0]==mo[0]:!mo)?NaN:Zo&&Zo[0]==0||!mo?da*0:da/0);for(mi=new Je(da),Ni=mi.c=[],Et=Oe.e-je.e,da=$e+Et+1,lt||(lt=ys,Et=Do(Oe.e/pr)-Do(je.e/pr),da=da/pr|0),Ct=0;mo[Ct]==(Zo[Ct]||0);Ct++);if(mo[Ct]>(Zo[Ct]||0)&&Et--,da<0)Ni.push(1),sn=!0;else{for(ha=Zo.length,Wa=mo.length,Ct=0,da+=2,zn=xo(lt/(mo[0]+1)),zn>1&&(mo=me(mo,zn,lt),Zo=me(Zo,zn,lt),Wa=mo.length,ha=Zo.length),Eu=Wa,Jr=Zo.slice(0,Wa),Vi=Jr.length;Vi<Wa;Jr[Vi++]=0);tc=mo.slice(),tc=[0].concat(tc),Df=mo[0],mo[1]>=lt/2&&Df++;do{if(zn=0,pt=Pe(mo,Jr,Wa,Vi),pt<0){if(ws=Jr[0],Wa!=Vi&&(ws=ws*lt+(Jr[1]||0)),zn=xo(ws/Df),zn>1)for(zn>=lt&&(zn=lt-1),Wn=me(mo,zn,lt),nr=Wn.length,Vi=Jr.length;Pe(Wn,Jr,nr,Vi)==1;)zn--,Be(Wn,Wa<nr?tc:mo,nr,lt),nr=Wn.length,pt=1;else zn==0&&(pt=zn=1),Wn=mo.slice(),nr=Wn.length;if(nr<Vi&&(Wn=[0].concat(Wn)),Be(Jr,Wn,Vi,lt),Vi=Jr.length,pt==-1)for(;Pe(mo,Jr,Wa,Vi)<1;)zn++,Be(Jr,Wa<Vi?tc:mo,Vi,lt),Vi=Jr.length}else pt===0&&(zn++,Jr=[0]);Ni[Ct++]=zn,Jr[0]?Jr[Vi++]=Zo[Eu]||0:(Jr=[Zo[Eu]],Vi=1)}while((Eu++<ha||Jr[0]!=null)&&da--);sn=Jr[0]!=null,Ni[0]||Ni.splice(0,1)}if(lt==ys){for(Ct=1,da=Ni[0];da>=10;da/=10,Ct++);bt(mi,$e+(mi.e=Ct+Et*pr-1)+1,at,sn)}else mi.e=Et,mi.r=+sn;return mi}}();function nt(me,Pe,Be,Oe){var je,$e,at,lt,pt;if(Be==null?Be=re:a(Be,0,8),!me.c)return me.toString();if(je=me.c[0],at=me.e,Pe==null)pt=Io(me.c),pt=Oe==1||Oe==2&&(at<=ge||at>=Le)?E(pt,at):V(pt,at,"0");else if(me=bt(new Je(me),Pe,Be),$e=me.e,pt=Io(me.c),lt=pt.length,Oe==1||Oe==2&&(Pe<=$e||$e<=ge)){for(;lt<Pe;pt+="0",lt++);pt=E(pt,$e)}else if(Pe-=at,pt=V(pt,$e,"0"),$e+1>lt){if(--Pe>0)for(pt+=".";Pe--;pt+="0");}else if(Pe+=$e-lt,Pe>0)for($e+1==lt&&(pt+=".");Pe--;pt+="0");return me.s<0&&je?"-"+pt:pt}function ct(me,Pe){for(var Be,Oe,je=1,$e=new Je(me[0]);je<me.length;je++)Oe=new Je(me[je]),(!Oe.s||(Be=Ks($e,Oe))===Pe||Be===0&&$e.s===Pe)&&($e=Oe);return $e}function jt(me,Pe,Be){for(var Oe=1,je=Pe.length;!Pe[--je];Pe.pop());for(je=Pe[0];je>=10;je/=10,Oe++);return(Be=Oe+Be*pr-1)>Ue?me.c=me.e=null:Be<Xe?me.c=[me.e=0]:(me.e=Be,me.c=Pe),me}x=function(){var me=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Pe=/^([^.]+)\.$/,Be=/^\.([^.]+)$/,Oe=/^-?(Infinity|NaN)$/,je=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function($e,at,lt,pt){var Et,Ct=lt?at:at.replace(je,"");if(Oe.test(Ct))$e.s=isNaN(Ct)?null:Ct<0?-1:1;else{if(!lt&&(Ct=Ct.replace(me,function(sn,zn,Wn){return Et=(Wn=Wn.toLowerCase())=="x"?16:Wn=="b"?2:8,!pt||pt==Et?zn:sn}),pt&&(Et=pt,Ct=Ct.replace(Pe,"$1").replace(Be,"0.$1")),at!=Ct))return new Je(Ct,Et);if(Je.DEBUG)throw Error($i+"Not a"+(pt?" base "+pt:"")+" number: "+at);$e.s=null}$e.c=$e.e=null}}();function bt(me,Pe,Be,Oe){var je,$e,at,lt,pt,Et,Ct,sn=me.c,zn=Ea;if(sn){e:{for(je=1,lt=sn[0];lt>=10;lt/=10,je++);if($e=Pe-je,$e<0)$e+=pr,at=Pe,pt=sn[Et=0],Ct=xo(pt/zn[je-at-1]%10);else if(Et=ca(($e+1)/pr),Et>=sn.length)if(Oe){for(;sn.length<=Et;sn.push(0));pt=Ct=0,je=1,$e%=pr,at=$e-pr+1}else break e;else{for(pt=lt=sn[Et],je=1;lt>=10;lt/=10,je++);$e%=pr,at=$e-pr+je,Ct=at<0?0:xo(pt/zn[je-at-1]%10)}if(Oe=Oe||Pe<0||sn[Et+1]!=null||(at<0?pt:pt%zn[je-at-1]),Oe=Be<4?(Ct||Oe)&&(Be==0||Be==(me.s<0?3:2)):Ct>5||Ct==5&&(Be==4||Oe||Be==6&&($e>0?at>0?pt/zn[je-at]:0:sn[Et-1])%10&1||Be==(me.s<0?8:7)),Pe<1||!sn[0])return sn.length=0,Oe?(Pe-=me.e+1,sn[0]=zn[(pr-Pe%pr)%pr],me.e=-Pe||0):sn[0]=me.e=0,me;if($e==0?(sn.length=Et,lt=1,Et--):(sn.length=Et+1,lt=zn[pr-$e],sn[Et]=at>0?xo(pt/zn[je-at]%zn[at])*lt:0),Oe)for(;;)if(Et==0){for($e=1,at=sn[0];at>=10;at/=10,$e++);for(at=sn[0]+=lt,lt=1;at>=10;at/=10,lt++);$e!=lt&&(me.e++,sn[0]==ys&&(sn[0]=1));break}else{if(sn[Et]+=lt,sn[Et]!=ys)break;sn[Et--]=0,lt=1}for($e=sn.length;sn[--$e]===0;sn.pop());}me.e>Ue?me.c=me.e=null:me.e<Xe&&(me.c=[me.e=0])}return me}function Ot(me){var Pe,Be=me.e;return Be===null?me.toString():(Pe=Io(me.c),Pe=Be<=ge||Be>=Le?E(Pe,Be):V(Pe,Be,"0"),me.s<0?"-"+Pe:Pe)}return C.absoluteValue=C.abs=function(){var me=new Je(this);return me.s<0&&(me.s=1),me},C.comparedTo=function(me,Pe){return Ks(this,new Je(me,Pe))},C.decimalPlaces=C.dp=function(me,Pe){var Be,Oe,je,$e=this;if(me!=null)return a(me,0,ls),Pe==null?Pe=re:a(Pe,0,8),bt(new Je($e),me+$e.e+1,Pe);if(!(Be=$e.c))return null;if(Oe=((je=Be.length-1)-Do(this.e/pr))*pr,je=Be[je])for(;je%10==0;je/=10,Oe--);return Oe<0&&(Oe=0),Oe},C.dividedBy=C.div=function(me,Pe){return h(this,new Je(me,Pe),X,re)},C.dividedToIntegerBy=C.idiv=function(me,Pe){return h(this,new Je(me,Pe),0,1)},C.exponentiatedBy=C.pow=function(me,Pe){var Be,Oe,je,$e,at,lt,pt,Et,Ct,sn=this;if(me=new Je(me),me.c&&!me.isInteger())throw Error($i+"Exponent not an integer: "+Ot(me));if(Pe!=null&&(Pe=new Je(Pe)),lt=me.e>14,!sn.c||!sn.c[0]||sn.c[0]==1&&!sn.e&&sn.c.length==1||!me.c||!me.c[0])return Ct=new Je(Math.pow(+Ot(sn),lt?me.s*(2-p(me)):+Ot(me))),Pe?Ct.mod(Pe):Ct;if(pt=me.s<0,Pe){if(Pe.c?!Pe.c[0]:!Pe.s)return new Je(NaN);Oe=!pt&&sn.isInteger()&&Pe.isInteger(),Oe&&(sn=sn.mod(Pe))}else{if(me.e>9&&(sn.e>0||sn.e<-1||(sn.e==0?sn.c[0]>1||lt&&sn.c[1]>=24e7:sn.c[0]<8e13||lt&&sn.c[0]<=9999975e7)))return $e=sn.s<0&&p(me)?-0:0,sn.e>-1&&($e=1/$e),new Je(pt?1/$e:$e);Xt&&($e=ca(Xt/pr+2))}for(lt?(Be=new Je(.5),pt&&(me.s=1),Et=p(me)):(je=Math.abs(+Ot(me)),Et=je%2),Ct=new Je(j);;){if(Et){if(Ct=Ct.times(sn),!Ct.c)break;$e?Ct.c.length>$e&&(Ct.c.length=$e):Oe&&(Ct=Ct.mod(Pe))}if(je){if(je=xo(je/2),je===0)break;Et=je%2}else if(me=me.times(Be),bt(me,me.e+1,1),me.e>14)Et=p(me);else{if(je=+Ot(me),je===0)break;Et=je%2}sn=sn.times(sn),$e?sn.c&&sn.c.length>$e&&(sn.c.length=$e):Oe&&(sn=sn.mod(Pe))}return Oe?Ct:(pt&&(Ct=j.div(Ct)),Pe?Ct.mod(Pe):$e?bt(Ct,Xt,re,at):Ct)},C.integerValue=function(me){var Pe=new Je(this);return me==null?me=re:a(me,0,8),bt(Pe,Pe.e+1,me)},C.isEqualTo=C.eq=function(me,Pe){return Ks(this,new Je(me,Pe))===0},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(me,Pe){return Ks(this,new Je(me,Pe))>0},C.isGreaterThanOrEqualTo=C.gte=function(me,Pe){return(Pe=Ks(this,new Je(me,Pe)))===1||Pe===0},C.isInteger=function(){return!!this.c&&Do(this.e/pr)>this.c.length-2},C.isLessThan=C.lt=function(me,Pe){return Ks(this,new Je(me,Pe))<0},C.isLessThanOrEqualTo=C.lte=function(me,Pe){return(Pe=Ks(this,new Je(me,Pe)))===-1||Pe===0},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&this.c[0]==0},C.minus=function(me,Pe){var Be,Oe,je,$e,at=this,lt=at.s;if(me=new Je(me,Pe),Pe=me.s,!lt||!Pe)return new Je(NaN);if(lt!=Pe)return me.s=-Pe,at.plus(me);var pt=at.e/pr,Et=me.e/pr,Ct=at.c,sn=me.c;if(!pt||!Et){if(!Ct||!sn)return Ct?(me.s=-Pe,me):new Je(sn?at:NaN);if(!Ct[0]||!sn[0])return sn[0]?(me.s=-Pe,me):new Je(Ct[0]?at:re==3?-0:0)}if(pt=Do(pt),Et=Do(Et),Ct=Ct.slice(),lt=pt-Et){for(($e=lt<0)?(lt=-lt,je=Ct):(Et=pt,je=sn),je.reverse(),Pe=lt;Pe--;je.push(0));je.reverse()}else for(Oe=($e=(lt=Ct.length)<(Pe=sn.length))?lt:Pe,lt=Pe=0;Pe<Oe;Pe++)if(Ct[Pe]!=sn[Pe]){$e=Ct[Pe]<sn[Pe];break}if($e&&(je=Ct,Ct=sn,sn=je,me.s=-me.s),Pe=(Oe=sn.length)-(Be=Ct.length),Pe>0)for(;Pe--;Ct[Be++]=0);for(Pe=ys-1;Oe>lt;){if(Ct[--Oe]<sn[Oe]){for(Be=Oe;Be&&!Ct[--Be];Ct[Be]=Pe);--Ct[Be],Ct[Oe]+=ys}Ct[Oe]-=sn[Oe]}for(;Ct[0]==0;Ct.splice(0,1),--Et);return Ct[0]?jt(me,Ct,Et):(me.s=re==3?-1:1,me.c=[me.e=0],me)},C.modulo=C.mod=function(me,Pe){var Be,Oe,je=this;return me=new Je(me,Pe),!je.c||!me.s||me.c&&!me.c[0]?new Je(NaN):!me.c||je.c&&!je.c[0]?new Je(je):(Dt==9?(Oe=me.s,me.s=1,Be=h(je,me,0,3),me.s=Oe,Be.s*=Oe):Be=h(je,me,0,Dt),me=je.minus(Be.times(me)),!me.c[0]&&Dt==1&&(me.s=je.s),me)},C.multipliedBy=C.times=function(me,Pe){var Be,Oe,je,$e,at,lt,pt,Et,Ct,sn,zn,Wn,nr,mi,Ni,Jr=this,Vi=Jr.c,ws=(me=new Je(me,Pe)).c;if(!Vi||!ws||!Vi[0]||!ws[0])return!Jr.s||!me.s||Vi&&!Vi[0]&&!ws||ws&&!ws[0]&&!Vi?me.c=me.e=me.s=null:(me.s*=Jr.s,!Vi||!ws?me.c=me.e=null:(me.c=[0],me.e=0)),me;for(Oe=Do(Jr.e/pr)+Do(me.e/pr),me.s*=Jr.s,pt=Vi.length,sn=ws.length,pt<sn&&(nr=Vi,Vi=ws,ws=nr,je=pt,pt=sn,sn=je),je=pt+sn,nr=[];je--;nr.push(0));for(mi=ys,Ni=Zs,je=sn;--je>=0;){for(Be=0,zn=ws[je]%Ni,Wn=ws[je]/Ni|0,at=pt,$e=je+at;$e>je;)Et=Vi[--at]%Ni,Ct=Vi[at]/Ni|0,lt=Wn*Et+Ct*zn,Et=zn*Et+lt%Ni*Ni+nr[$e]+Be,Be=(Et/mi|0)+(lt/Ni|0)+Wn*Ct,nr[$e--]=Et%mi;nr[$e]=Be}return Be?++Oe:nr.splice(0,1),jt(me,nr,Oe)},C.negated=function(){var me=new Je(this);return me.s=-me.s||null,me},C.plus=function(me,Pe){var Be,Oe=this,je=Oe.s;if(me=new Je(me,Pe),Pe=me.s,!je||!Pe)return new Je(NaN);if(je!=Pe)return me.s=-Pe,Oe.minus(me);var $e=Oe.e/pr,at=me.e/pr,lt=Oe.c,pt=me.c;if(!$e||!at){if(!lt||!pt)return new Je(je/0);if(!lt[0]||!pt[0])return pt[0]?me:new Je(lt[0]?Oe:je*0)}if($e=Do($e),at=Do(at),lt=lt.slice(),je=$e-at){for(je>0?(at=$e,Be=pt):(je=-je,Be=lt),Be.reverse();je--;Be.push(0));Be.reverse()}for(je=lt.length,Pe=pt.length,je-Pe<0&&(Be=pt,pt=lt,lt=Be,Pe=je),je=0;Pe;)je=(lt[--Pe]=lt[Pe]+pt[Pe]+je)/ys|0,lt[Pe]=ys===lt[Pe]?0:lt[Pe]%ys;return je&&(lt=[je].concat(lt),++at),jt(me,lt,at)},C.precision=C.sd=function(me,Pe){var Be,Oe,je,$e=this;if(me!=null&&me!==!!me)return a(me,1,ls),Pe==null?Pe=re:a(Pe,0,8),bt(new Je($e),me,Pe);if(!(Be=$e.c))return null;if(je=Be.length-1,Oe=je*pr+1,je=Be[je]){for(;je%10==0;je/=10,Oe--);for(je=Be[0];je>=10;je/=10,Oe++);}return me&&$e.e+1>Oe&&(Oe=$e.e+1),Oe},C.shiftedBy=function(me){return a(me,-9007199254740991,Sa),this.times("1e"+me)},C.squareRoot=C.sqrt=function(){var me,Pe,Be,Oe,je,$e=this,at=$e.c,lt=$e.s,pt=$e.e,Et=X+4,Ct=new Je("0.5");if(lt!==1||!at||!at[0])return new Je(!lt||lt<0&&(!at||at[0])?NaN:at?$e:1/0);if(lt=Math.sqrt(+Ot($e)),lt==0||lt==1/0?(Pe=Io(at),(Pe.length+pt)%2==0&&(Pe+="0"),lt=Math.sqrt(+Pe),pt=Do((pt+1)/2)-(pt<0||pt%2),lt==1/0?Pe="5e"+pt:(Pe=lt.toExponential(),Pe=Pe.slice(0,Pe.indexOf("e")+1)+pt),Be=new Je(Pe)):Be=new Je(lt+""),Be.c[0]){for(pt=Be.e,lt=pt+Et,lt<3&&(lt=0);;)if(je=Be,Be=Ct.times(je.plus(h($e,je,Et,1))),Io(je.c).slice(0,lt)===(Pe=Io(Be.c)).slice(0,lt))if(Be.e<pt&&--lt,Pe=Pe.slice(lt-3,lt+1),Pe=="9999"||!Oe&&Pe=="4999"){if(!Oe&&(bt(je,je.e+X+2,0),je.times(je).eq($e))){Be=je;break}Et+=4,lt+=4,Oe=1}else{(!+Pe||!+Pe.slice(1)&&Pe.charAt(0)=="5")&&(bt(Be,Be.e+X+2,1),me=!Be.times(Be).eq($e));break}}return bt(Be,Be.e+X+1,re,me)},C.toExponential=function(me,Pe){return me!=null&&(a(me,0,ls),me++),nt(this,me,Pe,1)},C.toFixed=function(me,Pe){return me!=null&&(a(me,0,ls),me=me+this.e+1),nt(this,me,Pe)},C.toFormat=function(me,Pe,Be){var Oe,je=this;if(Be==null)me!=null&&Pe&&typeof Pe=="object"?(Be=Pe,Pe=null):me&&typeof me=="object"?(Be=me,me=Pe=null):Be=_n;else if(typeof Be!="object")throw Error($i+"Argument not an object: "+Be);if(Oe=je.toFixed(me,Pe),je.c){var $e,at=Oe.split("."),lt=+Be.groupSize,pt=+Be.secondaryGroupSize,Et=Be.groupSeparator||"",Ct=at[0],sn=at[1],zn=je.s<0,Wn=zn?Ct.slice(1):Ct,nr=Wn.length;if(pt&&($e=lt,lt=pt,pt=$e,nr-=$e),lt>0&&nr>0){for($e=nr%lt||lt,Ct=Wn.substr(0,$e);$e<nr;$e+=lt)Ct+=Et+Wn.substr($e,lt);pt>0&&(Ct+=Et+Wn.slice($e)),zn&&(Ct="-"+Ct)}Oe=sn?Ct+(Be.decimalSeparator||"")+((pt=+Be.fractionGroupSize)?sn.replace(new RegExp("\\d{"+pt+"}\\B","g"),"$&"+(Be.fractionGroupSeparator||"")):sn):Ct}return(Be.prefix||"")+Oe+(Be.suffix||"")},C.toFraction=function(me){var Pe,Be,Oe,je,$e,at,lt,pt,Et,Ct,sn,zn,Wn=this,nr=Wn.c;if(me!=null&&(lt=new Je(me),!lt.isInteger()&&(lt.c||lt.s!==1)||lt.lt(j)))throw Error($i+"Argument "+(lt.isInteger()?"out of range: ":"not an integer: ")+Ot(lt));if(!nr)return new Je(Wn);for(Pe=new Je(j),Et=Be=new Je(j),Oe=pt=new Je(j),zn=Io(nr),$e=Pe.e=zn.length-Wn.e-1,Pe.c[0]=Ea[(at=$e%pr)<0?pr+at:at],me=!me||lt.comparedTo(Pe)>0?$e>0?Pe:Et:lt,at=Ue,Ue=1/0,lt=new Je(zn),pt.c[0]=0;Ct=h(lt,Pe,0,1),je=Be.plus(Ct.times(Oe)),je.comparedTo(me)!=1;)Be=Oe,Oe=je,Et=pt.plus(Ct.times(je=Et)),pt=je,Pe=lt.minus(Ct.times(je=Pe)),lt=je;return je=h(me.minus(Be),Oe,0,1),pt=pt.plus(je.times(Et)),Be=Be.plus(je.times(Oe)),pt.s=Et.s=Wn.s,$e=$e*2,sn=h(Et,Oe,$e,re).minus(Wn).abs().comparedTo(h(pt,Be,$e,re).minus(Wn).abs())<1?[Et,Oe]:[pt,Be],Ue=at,sn},C.toNumber=function(){return+Ot(this)},C.toPrecision=function(me,Pe){return me!=null&&a(me,1,ls),nt(this,me,Pe,2)},C.toString=function(me){var Pe,Be=this,Oe=Be.s,je=Be.e;return je===null?Oe?(Pe="Infinity",Oe<0&&(Pe="-"+Pe)):Pe="NaN":(me==null?Pe=je<=ge||je>=Le?E(Io(Be.c),je):V(Io(Be.c),je,"0"):me===10&&hr?(Be=bt(new Je(Be),X+je+1,re),Pe=V(Io(Be.c),Be.e,"0")):(a(me,2,Sn.length,"Base"),Pe=v(V(Io(Be.c),je,"0"),10,me,Oe,!0)),Oe<0&&Be.c[0]&&(Pe="-"+Pe)),Pe},C.valueOf=C.toJSON=function(){return Ot(this)},C._isBigNumber=!0,C[Symbol.toStringTag]="BigNumber",C[Symbol.for("nodejs.util.inspect.custom")]=C.valueOf,l!=null&&Je.set(l),Je}function Do(l){var h=l|0;return l>0||l===h?h:h-1}function Io(l){for(var h,v,x=1,C=l.length,j=l[0]+"";x<C;){for(h=l[x++]+"",v=pr-h.length;v--;h="0"+h);j+=h}for(C=j.length;j.charCodeAt(--C)===48;);return j.slice(0,C+1||1)}function Ks(l,h){var v,x,C=l.c,j=h.c,X=l.s,re=h.s,ge=l.e,Le=h.e;if(!X||!re)return null;if(v=C&&!C[0],x=j&&!j[0],v||x)return v?x?0:-re:X;if(X!=re)return X;if(v=X<0,x=ge==Le,!C||!j)return x?0:!C^v?1:-1;if(!x)return ge>Le^v?1:-1;for(re=(ge=C.length)<(Le=j.length)?ge:Le,X=0;X<re;X++)if(C[X]!=j[X])return C[X]>j[X]^v?1:-1;return ge==Le?0:ge>Le^v?1:-1}function a(l,h,v,x){if(l<h||l>v||l!==xo(l))throw Error($i+(x||"Argument")+(typeof l=="number"?l<h||l>v?" out of range: ":" not an integer: ":" not a primitive number: ")+String(l))}function p(l){var h=l.c.length-1;return Do(l.e/pr)==h&&l.c[h]%2!=0}function E(l,h){return(l.length>1?l.charAt(0)+"."+l.slice(1):l)+(h<0?"e":"e+")+h}function V(l,h,v){var x,C;if(h<0){for(C=v+".";++h;C+=v);l=C+l}else if(x=l.length,++h>x){for(C=v,h-=x;--h;C+=v);l+=C}else h<x&&(l=l.slice(0,h)+"."+l.slice(h));return l}var ae=bc(),Se=ae,st=class{constructor(l){Wt(this,"key");Wt(this,"left",null);Wt(this,"right",null);this.key=l}},At=class extends st{constructor(l){super(l)}},Gt=class{constructor(){Wt(this,"size",0);Wt(this,"modificationCount",0);Wt(this,"splayCount",0)}splay(l){let h=this.root;if(h==null)return this.compare(l,l),-1;let v=null,x=null,C=null,j=null,X=h,re=this.compare,ge;for(;;)if(ge=re(X.key,l),ge>0){let Le=X.left;if(Le==null||(ge=re(Le.key,l),ge>0&&(X.left=Le.right,Le.right=X,X=Le,Le=X.left,Le==null)))break;v==null?x=X:v.left=X,v=X,X=Le}else if(ge<0){let Le=X.right;if(Le==null||(ge=re(Le.key,l),ge<0&&(X.right=Le.left,Le.left=X,X=Le,Le=X.right,Le==null)))break;C==null?j=X:C.right=X,C=X,X=Le}else break;return C!=null&&(C.right=X.left,X.left=j),v!=null&&(v.left=X.right,X.right=x),this.root!==X&&(this.root=X,this.splayCount++),ge}splayMin(l){let h=l,v=h.left;for(;v!=null;){let x=v;h.left=x.right,x.right=h,h=x,v=h.left}return h}splayMax(l){let h=l,v=h.right;for(;v!=null;){let x=v;h.right=x.left,x.left=h,h=x,v=h.right}return h}_delete(l){if(this.root==null||this.splay(l)!=0)return null;let h=this.root,v=h,x=h.left;if(this.size--,x==null)this.root=h.right;else{let C=h.right;h=this.splayMax(x),h.right=C,this.root=h}return this.modificationCount++,v}addNewRoot(l,h){this.size++,this.modificationCount++;let v=this.root;if(v==null){this.root=l;return}h<0?(l.left=v,l.right=v.right,v.right=null):(l.right=v,l.left=v.left,v.left=null),this.root=l}_first(){let l=this.root;return l==null?null:(this.root=this.splayMin(l),this.root)}_last(){let l=this.root;return l==null?null:(this.root=this.splayMax(l),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(l){return this.validKey(l)&&this.splay(l)==0}defaultCompare(){return(l,h)=>l<h?-1:l>h?1:0}wrap(){return{getRoot:()=>this.root,setRoot:l=>{this.root=l},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:l=>{this.splayCount=l},splay:l=>this.splay(l),has:l=>this.has(l)}}},an=class Gd extends Gt{constructor(v,x){super();Wt(this,"root",null);Wt(this,"compare");Wt(this,"validKey");Wt(this,Pn,"[object Set]");this.compare=v??this.defaultCompare(),this.validKey=x??(C=>C!=null&&C!=null)}delete(v){return this.validKey(v)?this._delete(v)!=null:!1}deleteAll(v){for(let x of v)this.delete(x)}forEach(v){let x=this[Symbol.iterator](),C;for(;C=x.next(),!C.done;)v(C.value,C.value,this)}add(v){let x=this.splay(v);return x!=0&&this.addNewRoot(new At(v),x),this}addAndReturn(v){let x=this.splay(v);return x!=0&&this.addNewRoot(new At(v),x),this.root.key}addAll(v){for(let x of v)this.add(x)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)<0)return this.root.key;let x=this.root.left;if(x==null)return null;let C=x.right;for(;C!=null;)x=C,C=x.right;return x.key}firstAfter(v){if(v==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(v)>0)return this.root.key;let x=this.root.right;if(x==null)return null;let C=x.left;for(;C!=null;)x=C,C=x.left;return x.key}retainAll(v){let x=new Gd(this.compare,this.validKey),C=this.modificationCount;for(let j of v){if(C!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(j)&&this.splay(j)==0&&x.add(this.root.key)}x.size!=this.size&&(this.root=x.root,this.size=x.size,this.modificationCount++)}lookup(v){return!this.validKey(v)||this.splay(v)!=0?null:this.root.key}intersection(v){let x=new Gd(this.compare,this.validKey);for(let C of this)v.has(C)&&x.add(C);return x}difference(v){let x=new Gd(this.compare,this.validKey);for(let C of this)v.has(C)||x.add(C);return x}union(v){let x=this.clone();return x.addAll(v),x}clone(){let v=new Gd(this.compare,this.validKey);return v.size=this.size,v.root=this.copyNode(this.root),v}copyNode(v){if(v==null)return null;function x(j,X){let re,ge;do{if(re=j.left,ge=j.right,re!=null){let Le=new At(re.key);X.left=Le,x(re,Le)}if(ge!=null){let Le=new At(ge.key);X.right=Le,j=ge,X=Le}}while(ge!=null)}let C=new At(v.key);return x(v,C),C}toSet(){return this.clone()}entries(){return new Fr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(tr=Symbol.iterator,Pn=Symbol.toStringTag,tr)](){return new er(this.wrap())}},On=class{constructor(l){Wt(this,"tree");Wt(this,"path",new Array);Wt(this,"modificationCount",null);Wt(this,"splayCount");this.tree=l,this.splayCount=l.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let l=this.path[this.path.length-1];return this.getValue(l)}rebuildPath(l){this.path.splice(0,this.path.length),this.tree.splay(l),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(l){for(;l!=null;)this.path.push(l),l=l.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let v=this.tree.getRoot();for(;v!=null;)this.path.push(v),v=v.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let l=this.path[this.path.length-1],h=l.right;if(h!=null){for(;h!=null;)this.path.push(h),h=h.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===l;)l=this.path.pop();return this.path.length>0}},er=class extends On{getValue(l){return l.key}},Fr=class extends On{getValue(l){return[l.key,l.key]}},Lo=l=>l,io=l=>{if(l){let h=new an(vs(l)),v=new an(vs(l)),x=(j,X)=>X.addAndReturn(j),C=j=>({x:x(j.x,h),y:x(j.y,v)});return C({x:new Se(0),y:new Se(0)}),C}return Lo},Oo=l=>({set:h=>{Yi=Oo(h)},reset:()=>Oo(l),compare:vs(l),snap:io(l),orient:js(l)}),Yi=Oo(),_s=(l,h)=>l.ll.x.isLessThanOrEqualTo(h.x)&&h.x.isLessThanOrEqualTo(l.ur.x)&&l.ll.y.isLessThanOrEqualTo(h.y)&&h.y.isLessThanOrEqualTo(l.ur.y),wc=(l,h)=>{if(h.ur.x.isLessThan(l.ll.x)||l.ur.x.isLessThan(h.ll.x)||h.ur.y.isLessThan(l.ll.y)||l.ur.y.isLessThan(h.ll.y))return null;let v=l.ll.x.isLessThan(h.ll.x)?h.ll.x:l.ll.x,x=l.ur.x.isLessThan(h.ur.x)?l.ur.x:h.ur.x,C=l.ll.y.isLessThan(h.ll.y)?h.ll.y:l.ll.y,j=l.ur.y.isLessThan(h.ur.y)?l.ur.y:h.ur.y;return{ll:{x:v,y:C},ur:{x,y:j}}},fa=(l,h)=>l.x.times(h.y).minus(l.y.times(h.x)),Ys=(l,h)=>l.x.times(h.x).plus(l.y.times(h.y)),$s=l=>Ys(l,l).sqrt(),Tf=(l,h,v)=>{let x={x:h.x.minus(l.x),y:h.y.minus(l.y)},C={x:v.x.minus(l.x),y:v.y.minus(l.y)};return fa(C,x).div($s(C)).div($s(x))},nu=(l,h,v)=>{let x={x:h.x.minus(l.x),y:h.y.minus(l.y)},C={x:v.x.minus(l.x),y:v.y.minus(l.y)};return Ys(C,x).div($s(C)).div($s(x))},gi=(l,h,v)=>h.y.isZero()?null:{x:l.x.plus(h.x.div(h.y).times(v.minus(l.y))),y:v},Wo=(l,h,v)=>h.x.isZero()?null:{x:v,y:l.y.plus(h.y.div(h.x).times(v.minus(l.x)))},De=(l,h,v,x)=>{if(h.x.isZero())return Wo(v,x,l.x);if(x.x.isZero())return Wo(l,h,v.x);if(h.y.isZero())return gi(v,x,l.y);if(x.y.isZero())return gi(l,h,v.y);let C=fa(h,x);if(C.isZero())return null;let j={x:v.x.minus(l.x),y:v.y.minus(l.y)},X=fa(j,h).div(C),re=fa(j,x).div(C),ge=l.x.plus(re.times(h.x)),Le=v.x.plus(X.times(x.x)),Xe=l.y.plus(re.times(h.y)),Ue=v.y.plus(X.times(x.y)),vt=ge.plus(Le).div(2),Dt=Xe.plus(Ue).div(2);return{x:vt,y:Dt}},bs=class dx{constructor(h,v){Wt(this,"point");Wt(this,"isLeft");Wt(this,"segment");Wt(this,"otherSE");Wt(this,"consumedBy");h.events===void 0?h.events=[this]:h.events.push(this),this.point=h,this.isLeft=v}static compare(h,v){let x=dx.comparePoints(h.point,v.point);return x!==0?x:(h.point!==v.point&&h.link(v),h.isLeft!==v.isLeft?h.isLeft?1:-1:Bo.compare(h.segment,v.segment))}static comparePoints(h,v){return h.x.isLessThan(v.x)?-1:h.x.isGreaterThan(v.x)?1:h.y.isLessThan(v.y)?-1:h.y.isGreaterThan(v.y)?1:0}link(h){if(h.point===this.point)throw new Error("Tried to link already linked events");let v=h.point.events;for(let x=0,C=v.length;x<C;x++){let j=v[x];this.point.events.push(j),j.point=this.point}this.checkForConsuming()}checkForConsuming(){let h=this.point.events.length;for(let v=0;v<h;v++){let x=this.point.events[v];if(x.segment.consumedBy===void 0)for(let C=v+1;C<h;C++){let j=this.point.events[C];j.consumedBy===void 0&&x.otherSE.point.events===j.otherSE.point.events&&x.segment.consume(j.segment)}}}getAvailableLinkedEvents(){let h=[];for(let v=0,x=this.point.events.length;v<x;v++){let C=this.point.events[v];C!==this&&!C.segment.ringOut&&C.segment.isInResult()&&h.push(C)}return h}getLeftmostComparator(h){let v=new Map,x=C=>{let j=C.otherSE;v.set(C,{sine:Tf(this.point,h.point,j.point),cosine:nu(this.point,h.point,j.point)})};return(C,j)=>{v.has(C)||x(C),v.has(j)||x(j);let{sine:X,cosine:re}=v.get(C),{sine:ge,cosine:Le}=v.get(j);return X.isGreaterThanOrEqualTo(0)&&ge.isGreaterThanOrEqualTo(0)?re.isLessThan(Le)?1:re.isGreaterThan(Le)?-1:0:X.isLessThan(0)&&ge.isLessThan(0)?re.isLessThan(Le)?-1:re.isGreaterThan(Le)?1:0:ge.isLessThan(X)?-1:ge.isGreaterThan(X)?1:0}}},Su=0,Bo=class jg{constructor(h,v,x,C){Wt(this,"id");Wt(this,"leftSE");Wt(this,"rightSE");Wt(this,"rings");Wt(this,"windings");Wt(this,"ringOut");Wt(this,"consumedBy");Wt(this,"prev");Wt(this,"_prevInResult");Wt(this,"_beforeState");Wt(this,"_afterState");Wt(this,"_isInResult");this.id=++Su,this.leftSE=h,h.segment=this,h.otherSE=v,this.rightSE=v,v.segment=this,v.otherSE=h,this.rings=x,this.windings=C}static compare(h,v){let x=h.leftSE.point.x,C=v.leftSE.point.x,j=h.rightSE.point.x,X=v.rightSE.point.x;if(X.isLessThan(x))return 1;if(j.isLessThan(C))return-1;let re=h.leftSE.point.y,ge=v.leftSE.point.y,Le=h.rightSE.point.y,Xe=v.rightSE.point.y;if(x.isLessThan(C)){if(ge.isLessThan(re)&&ge.isLessThan(Le))return 1;if(ge.isGreaterThan(re)&&ge.isGreaterThan(Le))return-1;let Ue=h.comparePoint(v.leftSE.point);if(Ue<0)return 1;if(Ue>0)return-1;let vt=v.comparePoint(h.rightSE.point);return vt!==0?vt:-1}if(x.isGreaterThan(C)){if(re.isLessThan(ge)&&re.isLessThan(Xe))return-1;if(re.isGreaterThan(ge)&&re.isGreaterThan(Xe))return 1;let Ue=v.comparePoint(h.leftSE.point);if(Ue!==0)return Ue;let vt=h.comparePoint(v.rightSE.point);return vt<0?1:vt>0?-1:1}if(re.isLessThan(ge))return-1;if(re.isGreaterThan(ge))return 1;if(j.isLessThan(X)){let Ue=v.comparePoint(h.rightSE.point);if(Ue!==0)return Ue}if(j.isGreaterThan(X)){let Ue=h.comparePoint(v.rightSE.point);if(Ue<0)return 1;if(Ue>0)return-1}if(!j.eq(X)){let Ue=Le.minus(re),vt=j.minus(x),Dt=Xe.minus(ge),Xt=X.minus(C);if(Ue.isGreaterThan(vt)&&Dt.isLessThan(Xt))return 1;if(Ue.isLessThan(vt)&&Dt.isGreaterThan(Xt))return-1}return j.isGreaterThan(X)?1:j.isLessThan(X)||Le.isLessThan(Xe)?-1:Le.isGreaterThan(Xe)?1:h.id<v.id?-1:h.id>v.id?1:0}static fromRing(h,v,x){let C,j,X,re=bs.comparePoints(h,v);if(re<0)C=h,j=v,X=1;else if(re>0)C=v,j=h,X=-1;else throw new Error(`Tried to create degenerate segment at [${h.x}, ${h.y}]`);let ge=new bs(C,!0),Le=new bs(j,!1);return new jg(ge,Le,[x],[X])}replaceRightSE(h){this.rightSE=h,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let h=this.leftSE.point.y,v=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:h.isLessThan(v)?h:v},ur:{x:this.rightSE.point.x,y:h.isGreaterThan(v)?h:v}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(h){return h.x.eq(this.leftSE.point.x)&&h.y.eq(this.leftSE.point.y)||h.x.eq(this.rightSE.point.x)&&h.y.eq(this.rightSE.point.y)}comparePoint(h){return Yi.orient(this.leftSE.point,h,this.rightSE.point)}getIntersection(h){let v=this.bbox(),x=h.bbox(),C=wc(v,x);if(C===null)return null;let j=this.leftSE.point,X=this.rightSE.point,re=h.leftSE.point,ge=h.rightSE.point,Le=_s(v,re)&&this.comparePoint(re)===0,Xe=_s(x,j)&&h.comparePoint(j)===0,Ue=_s(v,ge)&&this.comparePoint(ge)===0,vt=_s(x,X)&&h.comparePoint(X)===0;if(Xe&&Le)return vt&&!Ue?X:!vt&&Ue?ge:null;if(Xe)return Ue&&j.x.eq(ge.x)&&j.y.eq(ge.y)?null:j;if(Le)return vt&&X.x.eq(re.x)&&X.y.eq(re.y)?null:re;if(vt&&Ue)return null;if(vt)return X;if(Ue)return ge;let Dt=De(j,this.vector(),re,h.vector());return Dt===null||!_s(C,Dt)?null:Yi.snap(Dt)}split(h){let v=[],x=h.events!==void 0,C=new bs(h,!0),j=new bs(h,!1),X=this.rightSE;this.replaceRightSE(j),v.push(j),v.push(C);let re=new jg(C,X,this.rings.slice(),this.windings.slice());return bs.comparePoints(re.leftSE.point,re.rightSE.point)>0&&re.swapEvents(),bs.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),x&&(C.checkForConsuming(),j.checkForConsuming()),v}swapEvents(){let h=this.rightSE;this.rightSE=this.leftSE,this.leftSE=h,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let v=0,x=this.windings.length;v<x;v++)this.windings[v]*=-1}consume(h){let v=this,x=h;for(;v.consumedBy;)v=v.consumedBy;for(;x.consumedBy;)x=x.consumedBy;let C=jg.compare(v,x);if(C!==0){if(C>0){let j=v;v=x,x=j}if(v.prev===x){let j=v;v=x,x=j}for(let j=0,X=x.rings.length;j<X;j++){let re=x.rings[j],ge=x.windings[j],Le=v.rings.indexOf(re);Le===-1?(v.rings.push(re),v.windings.push(ge)):v.windings[Le]+=ge}x.rings=null,x.windings=null,x.consumedBy=v,x.leftSE.consumedBy=v.leftSE,x.rightSE.consumedBy=v.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let h=this.prev.consumedBy||this.prev;this._beforeState=h.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let h=this.beforeState();this._afterState={rings:h.rings.slice(0),windings:h.windings.slice(0),multiPolys:[]};let v=this._afterState.rings,x=this._afterState.windings,C=this._afterState.multiPolys;for(let re=0,ge=this.rings.length;re<ge;re++){let Le=this.rings[re],Xe=this.windings[re],Ue=v.indexOf(Le);Ue===-1?(v.push(Le),x.push(Xe)):x[Ue]+=Xe}let j=[],X=[];for(let re=0,ge=v.length;re<ge;re++){if(x[re]===0)continue;let Le=v[re],Xe=Le.poly;if(X.indexOf(Xe)===-1)if(Le.isExterior)j.push(Xe);else{X.indexOf(Xe)===-1&&X.push(Xe);let Ue=j.indexOf(Le.poly);Ue!==-1&&j.splice(Ue,1)}}for(let re=0,ge=j.length;re<ge;re++){let Le=j[re].multiPoly;C.indexOf(Le)===-1&&C.push(Le)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let h=this.beforeState().multiPolys,v=this.afterState().multiPolys;switch(Yc.type){case"union":{let x=h.length===0,C=v.length===0;this._isInResult=x!==C;break}case"intersection":{let x,C;h.length<v.length?(x=h.length,C=v.length):(x=v.length,C=h.length),this._isInResult=C===Yc.numMultiPolys&&x<C;break}case"xor":{let x=Math.abs(h.length-v.length);this._isInResult=x%2===1;break}case"difference":{let x=C=>C.length===1&&C[0].isSubject;this._isInResult=x(h)!==x(v);break}}return this._isInResult}},Vr=class{constructor(l,h,v){Wt(this,"poly");Wt(this,"isExterior");Wt(this,"segments");Wt(this,"bbox");if(!Array.isArray(l)||l.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=h,this.isExterior=v,this.segments=[],typeof l[0][0]!="number"||typeof l[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let x=Yi.snap({x:new Se(l[0][0]),y:new Se(l[0][1])});this.bbox={ll:{x:x.x,y:x.y},ur:{x:x.x,y:x.y}};let C=x;for(let j=1,X=l.length;j<X;j++){if(typeof l[j][0]!="number"||typeof l[j][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let re=Yi.snap({x:new Se(l[j][0]),y:new Se(l[j][1])});re.x.eq(C.x)&&re.y.eq(C.y)||(this.segments.push(Bo.fromRing(C,re,this)),re.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=re.x),re.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=re.y),re.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=re.x),re.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=re.y),C=re)}(!x.x.eq(C.x)||!x.y.eq(C.y))&&this.segments.push(Bo.fromRing(C,x,this))}getSweepEvents(){let l=[];for(let h=0,v=this.segments.length;h<v;h++){let x=this.segments[h];l.push(x.leftSE),l.push(x.rightSE)}return l}},Zc=class{constructor(l,h){Wt(this,"multiPoly");Wt(this,"exteriorRing");Wt(this,"interiorRings");Wt(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Vr(l[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let v=1,x=l.length;v<x;v++){let C=new Vr(l[v],this,!1);C.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=C.bbox.ur.y),this.interiorRings.push(C)}this.multiPoly=h}getSweepEvents(){let l=this.exteriorRing.getSweepEvents();for(let h=0,v=this.interiorRings.length;h<v;h++){let x=this.interiorRings[h].getSweepEvents();for(let C=0,j=x.length;C<j;C++)l.push(x[C])}return l}},ph=class{constructor(l,h){Wt(this,"isSubject");Wt(this,"polys");Wt(this,"bbox");if(!Array.isArray(l))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof l[0][0][0]=="number"&&(l=[l])}catch{}this.polys=[],this.bbox={ll:{x:new Se(Number.POSITIVE_INFINITY),y:new Se(Number.POSITIVE_INFINITY)},ur:{x:new Se(Number.NEGATIVE_INFINITY),y:new Se(Number.NEGATIVE_INFINITY)}};for(let v=0,x=l.length;v<x;v++){let C=new Zc(l[v],this);C.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=C.bbox.ll.x),C.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=C.bbox.ll.y),C.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=C.bbox.ur.x),C.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=C.bbox.ur.y),this.polys.push(C)}this.isSubject=h}getSweepEvents(){let l=[];for(let h=0,v=this.polys.length;h<v;h++){let x=this.polys[h].getSweepEvents();for(let C=0,j=x.length;C<j;C++)l.push(x[C])}return l}},Kc=class g1{constructor(h){Wt(this,"events");Wt(this,"poly");Wt(this,"_isExteriorRing");Wt(this,"_enclosingRing");this.events=h;for(let v=0,x=h.length;v<x;v++)h[v].segment.ringOut=this;this.poly=null}static factory(h){let v=[];for(let x=0,C=h.length;x<C;x++){let j=h[x];if(!j.isInResult()||j.ringOut)continue;let X=null,re=j.leftSE,ge=j.rightSE,Le=[re],Xe=re.point,Ue=[];for(;X=re,re=ge,Le.push(re),re.point!==Xe;)for(;;){let vt=re.getAvailableLinkedEvents();if(vt.length===0){let _n=Le[0].point,Sn=Le[Le.length-1].point;throw new Error(`Unable to complete output ring starting at [${_n.x}, ${_n.y}]. Last matching segment found ends at [${Sn.x}, ${Sn.y}].`)}if(vt.length===1){ge=vt[0].otherSE;break}let Dt=null;for(let _n=0,Sn=Ue.length;_n<Sn;_n++)if(Ue[_n].point===re.point){Dt=_n;break}if(Dt!==null){let _n=Ue.splice(Dt)[0],Sn=Le.splice(_n.index);Sn.unshift(Sn[0].otherSE),v.push(new g1(Sn.reverse()));continue}Ue.push({index:Le.length,point:re.point});let Xt=re.getLeftmostComparator(X);ge=vt.sort(Xt)[0].otherSE;break}v.push(new g1(Le))}return v}getGeom(){let h=this.events[0].point,v=[h];for(let Le=1,Xe=this.events.length-1;Le<Xe;Le++){let Ue=this.events[Le].point,vt=this.events[Le+1].point;Yi.orient(Ue,h,vt)!==0&&(v.push(Ue),h=Ue)}if(v.length===1)return null;let x=v[0],C=v[1];Yi.orient(x,h,C)===0&&v.shift(),v.push(v[0]);let j=this.isExteriorRing()?1:-1,X=this.isExteriorRing()?0:v.length-1,re=this.isExteriorRing()?v.length:-1,ge=[];for(let Le=X;Le!=re;Le+=j)ge.push([v[Le].x.toNumber(),v[Le].y.toNumber()]);return ge}isExteriorRing(){if(this._isExteriorRing===void 0){let h=this.enclosingRing();this._isExteriorRing=h?!h.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var C,j;let h=this.events[0];for(let X=1,re=this.events.length;X<re;X++){let ge=this.events[X];bs.compare(h,ge)>0&&(h=ge)}let v=h.segment.prevInResult(),x=v?v.prevInResult():null;for(;;){if(!v)return null;if(!x)return v.ringOut;if(x.ringOut!==v.ringOut)return((C=x.ringOut)==null?void 0:C.enclosingRing())!==v.ringOut?v.ringOut:(j=v.ringOut)==null?void 0:j.enclosingRing();v=x.prevInResult(),x=v?v.prevInResult():null}}},qa=class{constructor(l){Wt(this,"exteriorRing");Wt(this,"interiorRings");this.exteriorRing=l,l.poly=this,this.interiorRings=[]}addInterior(l){this.interiorRings.push(l),l.poly=this}getGeom(){let l=this.exteriorRing.getGeom();if(l===null)return null;let h=[l];for(let v=0,x=this.interiorRings.length;v<x;v++){let C=this.interiorRings[v].getGeom();C!==null&&h.push(C)}return h}},xc=class{constructor(l){Wt(this,"rings");Wt(this,"polys");this.rings=l,this.polys=this._composePolys(l)}getGeom(){let l=[];for(let h=0,v=this.polys.length;h<v;h++){let x=this.polys[h].getGeom();x!==null&&l.push(x)}return l}_composePolys(l){var v;let h=[];for(let x=0,C=l.length;x<C;x++){let j=l[x];if(!j.poly)if(j.isExteriorRing())h.push(new qa(j));else{let X=j.enclosingRing();X!=null&&X.poly||h.push(new qa(X)),(v=X==null?void 0:X.poly)==null||v.addInterior(j)}}return h}},Nf=class{constructor(l,h=Bo.compare){Wt(this,"queue");Wt(this,"tree");Wt(this,"segments");this.queue=l,this.tree=new an(h),this.segments=[]}process(l){let h=l.segment,v=[];if(l.consumedBy)return l.isLeft?this.queue.delete(l.otherSE):this.tree.delete(h),v;l.isLeft&&this.tree.add(h);let x=h,C=h;do x=this.tree.lastBefore(x);while(x!=null&&x.consumedBy!=null);do C=this.tree.firstAfter(C);while(C!=null&&C.consumedBy!=null);if(l.isLeft){let j=null;if(x){let re=x.getIntersection(h);if(re!==null&&(h.isAnEndpoint(re)||(j=re),!x.isAnEndpoint(re))){let ge=this._splitSafely(x,re);for(let Le=0,Xe=ge.length;Le<Xe;Le++)v.push(ge[Le])}}let X=null;if(C){let re=C.getIntersection(h);if(re!==null&&(h.isAnEndpoint(re)||(X=re),!C.isAnEndpoint(re))){let ge=this._splitSafely(C,re);for(let Le=0,Xe=ge.length;Le<Xe;Le++)v.push(ge[Le])}}if(j!==null||X!==null){let re=null;j===null?re=X:X===null?re=j:re=bs.comparePoints(j,X)<=0?j:X,this.queue.delete(h.rightSE),v.push(h.rightSE);let ge=h.split(re);for(let Le=0,Xe=ge.length;Le<Xe;Le++)v.push(ge[Le])}v.length>0?(this.tree.delete(h),v.push(l)):(this.segments.push(h),h.prev=x)}else{if(x&&C){let j=x.getIntersection(C);if(j!==null){if(!x.isAnEndpoint(j)){let X=this._splitSafely(x,j);for(let re=0,ge=X.length;re<ge;re++)v.push(X[re])}if(!C.isAnEndpoint(j)){let X=this._splitSafely(C,j);for(let re=0,ge=X.length;re<ge;re++)v.push(X[re])}}}this.tree.delete(h)}return v}_splitSafely(l,h){this.tree.delete(l);let v=l.rightSE;this.queue.delete(v);let x=l.split(h);return x.push(v),l.consumedBy===void 0&&this.tree.add(l),x}},yd=class{constructor(){Wt(this,"type");Wt(this,"numMultiPolys")}run(l,h,v){ec.type=l;let x=[new ph(h,!0)];for(let ge=0,Le=v.length;ge<Le;ge++)x.push(new ph(v[ge],!1));if(ec.numMultiPolys=x.length,ec.type==="difference"){let ge=x[0],Le=1;for(;Le<x.length;)wc(x[Le].bbox,ge.bbox)!==null?Le++:x.splice(Le,1)}if(ec.type==="intersection")for(let ge=0,Le=x.length;ge<Le;ge++){let Xe=x[ge];for(let Ue=ge+1,vt=x.length;Ue<vt;Ue++)if(wc(Xe.bbox,x[Ue].bbox)===null)return[]}let C=new an(bs.compare);for(let ge=0,Le=x.length;ge<Le;ge++){let Xe=x[ge].getSweepEvents();for(let Ue=0,vt=Xe.length;Ue<vt;Ue++)C.add(Xe[Ue])}let j=new Nf(C),X=null;for(C.size!=0&&(X=C.first(),C.delete(X));X;){let ge=j.process(X);for(let Le=0,Xe=ge.length;Le<Xe;Le++){let Ue=ge[Le];Ue.consumedBy===void 0&&C.add(Ue)}C.size!=0?(X=C.first(),C.delete(X)):X=null}Yi.reset();let re=Kc.factory(j.segments);return new xc(re).getGeom()}},ec=new yd,Yc=ec,Fl=(l,...h)=>Yc.run("intersection",l,h),_d=(l,...h)=>Yc.run("difference",l,h);Yi.set;function Jc(l){let h={type:"Feature"};return h.geometry=l,h}function Xc(l){return l.type==="Feature"?l.geometry:l}function gh(l){return l&&l.geometry&&l.geometry.coordinates?l.geometry.coordinates:l}function mh(l){return Jc({type:"LineString",coordinates:l})}function Ca(l){return Jc({type:"MultiLineString",coordinates:l})}function vh(l){return Jc({type:"Polygon",coordinates:l})}function yh(l){return Jc({type:"MultiPolygon",coordinates:l})}function _h(l,h){let v=Xc(l),x=Xc(h),C=Fl(v.coordinates,x.coordinates);return C.length===0?null:C.length===1?vh(C[0]):yh(C)}function w(l,h){let v=Xc(l),x=Xc(h),C=_d(v.coordinates,x.coordinates);return C.length===0?null:C.length===1?vh(C[0]):yh(C)}function P(l){return Array.isArray(l)?1+P(l[0]):-1}function W(l){l instanceof L.Polyline&&(l=l.toGeoJSON(15));let h=gh(l),v=P(h),x=[];return v>1?h.forEach(C=>{x.push(mh(C))}):x.push(l),x}function le(l){let h=[];return l.eachLayer(v=>{h.push(gh(v.toGeoJSON(15)))}),Ca(h)}ho.Cut=ho.Polygon.extend({initialize(l){this._map=l,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let l=this._layer.getLatLngs();if(l.length<=2)return;let h=L.polygon(l,this.options.pathOptions);h._latlngInfos=this._layer._latlngInfo,this.cut(h),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:x,originalLayer:C})=>{this._fireCut(C,x,C),this._fireCut(this._map,x,C),C.pm._fireEdit()}),this._editedLayers=[];let v=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(v))},cut(l){let h=this._map._layers,v=l._latlngInfos||[];Object.keys(h).map(x=>h[x]).filter(x=>x.pm).filter(x=>!x._pmTempLayer).filter(x=>!L.PM.optIn&&!x.options.pmIgnore||L.PM.optIn&&x.options.pmIgnore===!1).filter(x=>x instanceof L.Polyline).filter(x=>x!==l).filter(x=>x.pm.options.allowCutting).filter(x=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(x)>-1:!0).filter(x=>!this._layerGroup.hasLayer(x)).filter(x=>{try{let C=!!ms(l.toGeoJSON(15),x.toGeoJSON(15)).features.length>0;return C||x instanceof L.Polyline&&!(x instanceof L.Polygon)?C:!!_h(l.toGeoJSON(15),x.toGeoJSON(15))}catch{return x instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(x=>{let C;if(x instanceof L.Polygon){C=L.polygon(x.getLatLngs());let ge=C.getLatLngs();v.forEach(Le=>{if(Le&&Le.snapInfo){let{latlng:Xe}=Le,Ue=this._calcClosestLayer(Xe,[C]);if(Ue&&Ue.segment&&Ue.distance<this.options.snapDistance){let{segment:vt}=Ue;if(vt&&vt.length===2){let{indexPath:Dt,parentPath:Xt,newIndex:_n}=L.PM.Utils._getIndexFromSegment(ge,vt);(Dt.length>1?(0,Ui.default)(ge,Xt):ge).splice(_n,0,Xe)}}}})}else C=x;let j=this._cutLayer(l,C),X=L.geoJSON(j,x.options);X.getLayers().length===1&&([X]=X.getLayers()),this._setPane(X,"layerPane");let re=X.addTo(this._map.pm._getContainingLayer());if(re.pm.enable(x.pm.options),re.pm.disable(),x._pmTempLayer=!0,l._pmTempLayer=!0,x.remove(),x.removeFrom(this._map.pm._getContainingLayer()),l.remove(),l.removeFrom(this._map.pm._getContainingLayer()),re.getLayers&&re.getLayers().length===0&&this._map.pm.removeLayer({target:re}),re instanceof L.LayerGroup?(re.eachLayer(ge=>{this._addDrawnLayerProp(ge)}),this._addDrawnLayerProp(re)):this._addDrawnLayerProp(re),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let ge=this.options.layersToCut.indexOf(x);ge>-1&&this.options.layersToCut.splice(ge,1)}this._editedLayers.push({layer:re,originalLayer:x})})},_cutLayer(l,h){let v=L.geoJSON(),x;if(h instanceof L.Polygon)x=w(h.toGeoJSON(15),l.toGeoJSON(15));else{let C=W(h);C.forEach(j=>{let X=Jn(j,l.toGeoJSON(15)),re;X&&X.features.length>0?re=L.geoJSON(X):re=L.geoJSON(j),re.getLayers().forEach(ge=>{sa(l.toGeoJSON(15),ge.toGeoJSON(15))||ge.addTo(v)})}),C.length>1?x=le(v):x=v.toGeoJSON(15)}return x},_change:L.Util.falseFn}),ho.Text=ho.extend({initialize(l){this._map=l,this._shape="Text",this.toolbarButtonName="drawText"},enable(l){L.Util.setOptions(this,l),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(lr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var l;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(l=this._hintMarker)==null||l.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(l){this.enabled()?this.disable():this.enable(l)},_syncHintMarker(l){if(this._hintMarker.setLatLng(l.latlng),this.options.snappable){let h=l;h.target=this._hintMarker,this._handleSnapping(h)}},_createMarker(l){var C,j,X,re;if(!l.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(l.latlng);let h=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(C=this.options.textOptions)==null?void 0:C.className){let ge=this.options.textOptions.className.split(" ");this.textArea.classList.add(...ge)}let v=this._createTextIcon(this.textArea),x=new L.Marker(h,{textMarker:!0,_textMarkerOverPM:!0,icon:v});if(this._setPane(x,"markerPane"),this._finishLayer(x),x.pm||(x.options.draggable=!1),x.addTo(this._map.pm._getContainingLayer()),x.pm){x.pm.textArea=this.textArea,L.setOptions(x.pm,{removeIfEmpty:((j=this.options.textOptions)==null?void 0:j.removeIfEmpty)??!0});let ge=((X=this.options.textOptions)==null?void 0:X.focusAfterDraw)??!0;x.pm._createTextMarker(ge),(re=this.options.textOptions)!=null&&re.text&&x.pm.setText(this.options.textOptions.text)}this._fireCreate(x),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(l){this.enable(),this._hintMarker.setLatLng(l.latlng)},_createTextArea(){let l=document.createElement("textarea");return l.readOnly=!0,l.classList.add("pm-textarea","pm-disabled"),l},_createTextIcon(l){return L.divIcon({className:"pm-text-marker",html:l})}});var we={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,yi(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let l=this._getDOMElem();l&&(yi(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(l)):L.DomEvent.on(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,yi(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let l=this._getDOMElem();l&&(yi(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(l)):L.DomEvent.off(l,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(l){let h=l.touches?l.touches[0]:l,v={originalEvent:h,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(h),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseDown(v),!1},_simulateMouseMoveEvent(l){let h=l.touches?l.touches[0]:l,v={originalEvent:h,target:this._layer};return v.containerPoint=this._map.mouseEventToContainerPoint(h),v.latlng=this._map.containerPointToLatLng(v.containerPoint),this._dragMixinOnMouseMove(v),!1},_simulateMouseUpEvent(l){let h={originalEvent:l.touches?l.touches[0]:l,target:this._layer};return l.type.indexOf("touch")===-1&&(h.containerPoint=this._map.mouseEventToContainerPoint(l),h.latlng=this._map.containerPointToLatLng(h.containerPoint)),this._dragMixinOnMouseUp(h),!1},_dragMixinOnMouseDown(l){if(l.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(l);let h=l._fromLayerSync,v=this._syncLayers("_dragMixinOnMouseDown",l);if(this._layer instanceof L.Marker&&(this.options.snappable&&!h&&!v?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let x="resizeableCircleMarker";this._layer instanceof L.Circle&&(x="resizeableCircle"),this.options.snappable&&!h&&!v?this._layer.pm.options[x]||this._initSnappableMarkersDrag():this._layer.pm.options[x]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=l.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(l){this._overwriteEventIfItComesFromMarker(l);let h=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",l),this._dragging||(this._dragging=!0,L.DomUtil.addClass(h,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=l.latlng),this._onLayerDrag(l),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(l){let h=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",l),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,h&&L.DomUtil.removeClass(h,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(l){let{latlng:h}=l,v={lat:h.lat-this._tempDragCoord.lat,lng:h.lng-this._tempDragCoord.lng},x=C=>C.map(j=>{if(Array.isArray(j))return x(j);let X={lat:j.lat+v.lat,lng:j.lng+v.lng};return(j.alt||j.alt===0)&&(X.alt=j.alt),X});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let C=x([this._layer.getLatLng()]);this._layer.setLatLng(C[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let C=this._layer.getLatLng();this._layer._snapped&&(C=this._layer._orgLatLng);let j=x([C]);this._layer.setLatLng(j[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let C=x([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(C),this._fireChange(this._layer.getBounds(),"Edit")}else{let C=x(this._layer.getLatLngs());this._layer.setLatLngs(C),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=h,l.layer=this._layer,this._fireDrag(l)},addDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.addClass(l,"leaflet-pm-draggable")},removeDraggingClass(){let l=this._getDOMElem();l&&L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_getDOMElem(){let l=null;return this._layer._path?l=this._layer._path:this._layer._renderer&&this._layer._renderer._container?l=this._layer._renderer._container:this._layer._image?l=this._layer._image:this._layer._icon&&(l=this._layer._icon),l},_overwriteEventIfItComesFromMarker(l){l.target.getLatLng&&(!l.target._radius||l.target._radius<=10)&&(l.containerPoint=this._map.mouseEventToContainerPoint(l.originalEvent),l.latlng=this._map.containerPointToLatLng(l.containerPoint))},_syncLayers(l,h){if(this.enabled())return!1;if(!h._fromLayerSync&&this._layer===h.target&&this.options.syncLayersOnDrag){h._fromLayerSync=!0;let v=[];if(L.Util.isArray(this.options.syncLayersOnDrag))v=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(x=>{x instanceof L.LayerGroup&&(v=v.concat(x.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let x in this._parentLayerGroup){let C=this._parentLayerGroup[x];C.pm&&(v=C.pm.getLayers(!0))}return L.Util.isArray(v)&&v.length>0&&(v=v.filter(x=>!!x.pm).filter(x=>!!x.pm.options.draggable),v.forEach(x=>{x!==this._layer&&x.pm[l]&&(x._snapped=!1,x.pm[l](h))})),v.length>0}return!1},_stopDOMImageDrag(l){return l.preventDefault(),!1}},Ee=we,Ae=f(Rr());function Ne(l,h,v,x){return v.unproject(h.transform(v.project(l,x)),x)}function Ie(l,h,v){let x=v.getMaxZoom();if(x===1/0&&(x=v.getZoom()),L.Util.isArray(l)){let C=[];return l.forEach(j=>{C.push(Ie(j,h,v))}),C}return l instanceof L.LatLng?Ne(l,h,v,x):null}function qe(l,h){h instanceof L.Layer&&(h=h.getLatLng());let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.project(h,v)}function ht(l,h){let v=l.getMaxZoom();return v===1/0&&(v=l.getZoom()),l.unproject(h,v)}var Bt={_onRotateStart(l){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=qe(this._map,this._rotationOriginLatLng),this._rotationStartPoint=qe(this._map,l.target.getLatLng()),this._initialRotateLatLng=Fs(this._layer),this._startAngle=this.getAngle();let h=Fs(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,h),this._fireRotationStart(this._map,h)},_onRotate(l){let h=qe(this._map,l.target.getLatLng()),v=this._rotationStartPoint,x=this._rotationOriginPoint,C=Math.atan2(h.y-x.y,h.x-x.x)-Math.atan2(v.y-x.y,v.x-x.x);this._layer.setLatLngs(this._rotateLayer(C,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let j=this;function X(Xe,Ue=[],vt=-1){if(vt>-1&&Ue.push(vt),L.Util.isArray(Xe[0]))Xe.forEach((Dt,Xt)=>X(Dt,Ue.slice(),Xt));else{let Dt=Ue.length>0?(0,Ae.default)(j._markers,Ue):j._markers[0];Xe.forEach((Xt,_n)=>{Dt[_n].setLatLng(Xt)})}}X(this._layer.getLatLngs());let re=Fs(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(C,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let ge=C*180/Math.PI;ge=ge<0?ge+360:ge;let Le=ge+this._startAngle;this._setAngle(Le),this._rotationLayer.pm._setAngle(Le),this._fireRotation(this._rotationLayer,ge,re),this._fireRotation(this._map,ge,re),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let l=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let h=Fs(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Fs(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,l,h),this._fireRotationEnd(this._map,l,h),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(l,h,v,x,C){let j=qe(C,v);return this._matrix=x.clone().rotate(l,j).flip(),Ie(h,this._matrix,C)},_setAngle(l){l=l<0?l+360:l,this._angle=l%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let l=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),h=l.getCenter();return l.removeFrom(this._layer._map),h},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(na(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),l),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Fs(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(l){let h=this.getAngle(),v=this._layer.getLatLngs(),x=l*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(x,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+l),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(x,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let C=this.getAngle()-h;C=C<0?C+360:C,this._startAngle=h,this._fireRotation(this._layer,C,v,this._layer),this._fireRotation(this._map||this._layer._map,C,v,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(l){let h=l-this.getAngle();this.rotateLayer(h)},getAngle(){return this._angle||0},setInitAngle(l){this._setAngle(l)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(l){this._rotationCenter=l,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(l)}},Rt=Bt,xt=L.Class.extend({includes:[Ee,ks,Rt,Nl],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(l){L.Util.setOptions(this,l)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(l,h){h==="layerPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":h==="vertexPane"?l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":h==="markerPane"&&(l.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(l,h){let v=h.target,x={layer:this._layer,marker:v,event:h},C="";return l==="move"?C="moveVertexValidation":l==="add"?C="addVertexValidation":l==="remove"&&(C="removeVertexValidation"),this.options[C]&&typeof this.options[C]=="function"&&!this.options[C](x)?(l==="move"&&(v._cancelDragEventChain=v.getLatLng()),!1):(v._cancelDragEventChain=null,!0)},_vertexValidationDrag(l){return l._cancelDragEventChain?(l._latlng=l._cancelDragEventChain,l.update(),!1):!0},_vertexValidationDragEnd(l){return l._cancelDragEventChain?(l._cancelDragEventChain=null,!1):!0}}),Kt=xt;Kt.LayerGroup=L.Class.extend({initialize(l){this._layerGroup=l,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(x=>this._initLayer(x));let h=x=>{if(x.layer._pmTempLayer)return;this._layers=this.getLayers();let C=this._layers.filter(j=>!j.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in j.pm._parentLayerGroup));C.forEach(j=>{this._initLayer(j)}),C.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(h,100,this),this),this._layerGroup.on("layerremove",x=>{this._removeLayerFromGroup(x.target)},this);let v=x=>{x.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(v,100,this),this)},enable(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.enable(l,h)):v.pm.enable(l)})},disable(l=[]){l.length===0&&(this._layers=this.getLayers()),this._layers.forEach(h=>{h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1&&(l.push(h._leaflet_id),h.pm.disable(l)):h.pm.disable()})},enabled(l=[]){return l.length===0&&(this._layers=this.getLayers()),!!this._layers.find(h=>h instanceof L.LayerGroup?l.indexOf(h._leaflet_id)===-1?(l.push(h._leaflet_id),h.pm.enabled(l)):!1:h.pm.enabled())},toggleEdit(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this._options=l,this._layers.forEach(v=>{v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.toggleEdit(l,h)):v.pm.toggleEdit(l)})},_initLayer(l){let h=L.Util.stamp(this._layerGroup);l.pm._parentLayerGroup||(l.pm._parentLayerGroup={}),l.pm._parentLayerGroup[h]=this._layerGroup},_removeLayerFromGroup(l){if(l.pm&&l.pm._layerGroup){let h=L.Util.stamp(this._layerGroup);delete l.pm._layerGroup[h]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(l=>l.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var l;return this._map||((l=this._layers.find(h=>!!h._map))==null?void 0:l._map)||null},getLayers(l=!1,h=!0,v=!0,x=[]){let C=[];return l?this._layerGroup.getLayers().forEach(j=>{C.push(j),j instanceof L.LayerGroup&&x.indexOf(j._leaflet_id)===-1&&(x.push(j._leaflet_id),C=C.concat(j.pm.getLayers(!0,!0,!0,x)))}):C=this._layerGroup.getLayers(),v&&(C=C.filter(j=>!(j instanceof L.LayerGroup))),h&&(C=C.filter(j=>!!j.pm),C=C.filter(j=>!j._pmTempLayer),C=C.filter(j=>!L.PM.optIn&&!j.options.pmIgnore||L.PM.optIn&&j.options.pmIgnore===!1)),C},setOptions(l,h=[]){h.length===0&&(this._layers=this.getLayers()),this.options=l,this._layers.forEach(v=>{v.pm&&(v instanceof L.LayerGroup?h.indexOf(v._leaflet_id)===-1&&(h.push(v._leaflet_id),v.pm.setOptions(l,h)):v.pm.setOptions(l))})}}),Kt.Marker=Kt.extend({_shape:"Marker",initialize(l){this._layer=l,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(l={draggable:!0}){if(L.Util.setOptions(this,l),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(l){let h=l.target;h.remove(),this._fireRemove(h),this._fireRemove(this._map,h)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)}});var Ht=f(Rr()),dt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let l=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=l.filter((h,v,x)=>x.indexOf(h)===v)},_removeFromCache(l){let h=this.markerCache.indexOf(l);h>-1&&this.markerCache.splice(h,1)},renderLimits(l){this.markerCache.forEach(h=>{l.includes(h)?this._markerGroup.addLayer(h):this._markerGroup.removeLayer(h)})},applyLimitFilters({latlng:l={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let h=[...this._filterClosestMarkers(l)];this.renderLimits(h)},_filterClosestMarkers(l){let h=[...this.markerCache],v=this.options.limitMarkersToCount;return v===-1?h:(h.sort((x,C)=>{let j=x._latlng.distanceTo(l),X=C._latlng.distanceTo(l);return j-X}),h.filter((x,C)=>v>-1?C<v:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(l){this._preventRenderMarkers=!!l}},yt=dt;Kt.Line=Kt.extend({includes:[yt],_shape:"Line",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(l){return this.enabled()?this.disable():this.enable(l),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let l=this._map,h=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(l),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let v=x=>{if(Array.isArray(x[0]))return x.map(v,this);let C=x.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&x.map((j,X)=>{let re=this.isPolygon()?(X+1)%x.length:X+1;return this._createMiddleMarker(C[X],C[re])}),C};this._markers=v(h),this.filterMarkerGroup(),l.addLayer(this._markerGroup)},_createMarker(l){let h=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._pmTempLayer=!0,this.options.rotate?(h.on("dragstart",this._onRotateStart,this),h.on("drag",this._onRotate,this),h.on("dragend",this._onRotateEnd,this)):(h.on("click",this._onVertexClick,this),h.on("dragstart",this._onMarkerDragStart,this),h.on("move",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(h),h},_createMiddleMarker(l,h){if(!l||!h)return!1;let v=L.PM.Utils.calcMiddleLatLng(this._map,l.getLatLng(),h.getLatLng()),x=this._createMarker(v),C=L.divIcon({className:"marker-icon marker-icon-middle"});return x.setIcon(C),x.leftM=l,x.rightM=h,l._middleMarkerNext=x,h._middleMarkerPrev=x,x.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),x.on("movestart",this._onMiddleMarkerMoveStart,this),x},_onMiddleMarkerClick(l){let h=l.target;if(!this._vertexValidation("add",l))return;let v=L.divIcon({className:"marker-icon"});h.setIcon(v),this._addMarker(h,h.leftM,h.rightM)},_onMiddleMarkerMoveStart(l){let h=l.target;if(h.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",l)){h.on("move",this._onMiddleMarkerMovePrevent,this);return}h._dragging=!0,this._addMarker(h,h.leftM,h.rightM)},_onMiddleMarkerMovePrevent(l){let h=l.target;this._vertexValidationDrag(h)},_onMiddleMarkerMoveEnd(l){let h=l.target;if(h.off("move",this._onMiddleMarkerMovePrevent,this),h.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(h))return;let v=L.divIcon({className:"marker-icon"});h.setIcon(v),setTimeout(()=>{delete h._dragging},100)},_addMarker(l,h,v){l.off("movestart",this._onMiddleMarkerMoveStart,this),l.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let x=l.getLatLng(),C=this._layer._latlngs;delete l.leftM,delete l.rightM;let{indexPath:j,index:X,parentPath:re}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),ge=j.length>1?(0,Ht.default)(C,re):C,Le=j.length>1?(0,Ht.default)(this._markers,re):this._markers;ge.splice(X+1,0,x),Le.splice(X+1,0,l),this._layer.setLatLngs(C),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(h,l),this._createMiddleMarker(l,v)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(l,L.PM.Utils.findDeepMarkerIndex(this._markers,l).indexPath,x),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return zr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(l){let h=this._layer,v,x;if(this.options.allowSelfIntersection?v=!1:(x=zr(this._layer.toGeoJSON(15)),v=x.features.length>0),v){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return v;l?this._flashLayer():(h.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(x)}else h.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return v},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(l,h){l.forEach(v=>{Array.isArray(v)?this._updateDisabledMarkerStyle(v,h):v._icon&&(h&&!this._checkMarkerAllowedToDrag(v)?L.DomUtil.addClass(v._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(v._icon,"vertexmarker-disabled"))})},_removeMarker(l){let h=l.target;if(!this._vertexValidation("remove",l))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Fs(this._layer,this._layer.getLatLngs()));let v=this._layer.getLatLngs(),{indexPath:x,index:C,parentPath:j}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);if(!x)return;let X=x.length>1?(0,Ht.default)(v,j):v,re=x.length>1?(0,Ht.default)(this._markers,j):this._markers,ge=j[j.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!ge&&(X.length<=2||this.isPolygon()&&X.length<=3)){this._flashLayer();return}X.splice(C,1),this._layer.setLatLngs(v),this.isPolygon()&&X.length<=2&&X.splice(0,X.length);let Le=!1;if(X.length<=1&&(X.splice(0,X.length),j.length>1&&x.length>1&&(v=al(v)),this._layer.setLatLngs(v),this._initMarkers(),Le=!0),fo(v)||this._layer.remove(),v=al(v),this._layer.setLatLngs(v),this._markers=al(this._markers),!Le&&(re=x.length>1?(0,Ht.default)(this._markers,j):this._markers,h._middleMarkerPrev&&(this._markerGroup.removeLayer(h._middleMarkerPrev),this._removeFromCache(h._middleMarkerPrev)),h._middleMarkerNext&&(this._markerGroup.removeLayer(h._middleMarkerNext),this._removeFromCache(h._middleMarkerNext)),this._markerGroup.removeLayer(h),this._removeFromCache(h),re)){let Xe,Ue;if(this.isPolygon()?(Xe=(C+1)%re.length,Ue=(C+(re.length-1))%re.length):(Ue=C-1<0?void 0:C-1,Xe=C+1>=re.length?void 0:C+1),Xe!==Ue){let vt=re[Ue],Dt=re[Xe];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(vt,Dt)}re.splice(C,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(h,x),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(l){let h=this._layer.getLatLngs(),v=l.getLatLng(),{indexPath:x,index:C,parentPath:j}=L.PM.Utils.findDeepMarkerIndex(this._markers,l);(x.length>1?(0,Ht.default)(h,j):h).splice(C,1,v),this._layer.setLatLngs(h)},_getNeighborMarkers(l){let{indexPath:h,index:v,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,l),C=h.length>1?(0,Ht.default)(this._markers,x):this._markers,j=(v+1)%C.length,X=(v+(C.length-1))%C.length,re=C[X],ge=C[j];return{prevMarker:re,nextMarker:ge}},_checkMarkerAllowedToDrag(l){let{prevMarker:h,nextMarker:v}=this._getNeighborMarkers(l),x=L.polyline([h.getLatLng(),l.getLatLng()]),C=L.polyline([l.getLatLng(),v.getLatLng()]),j=ms(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,X=ms(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length;return l.getLatLng()===this._markers[0][0].getLatLng()?X+=1:l.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(j+=1),!(j<=2&&X<=2)},_onMarkerDragStart(l){let h=l.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",l))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragStart(l,v),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Fs(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(h):this._markerAllowedToDrag=null},_onMarkerDrag(l){let h=l.target;if(!this._vertexValidationDrag(h))return;let{indexPath:v,index:x,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);if(!v)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(h);let j=v.length>1?(0,Ht.default)(this._markers,C):this._markers,X=(x+1)%j.length,re=(x+(j.length-1))%j.length,ge=h.getLatLng(),Le=j[re].getLatLng(),Xe=j[X].getLatLng();if(h._middleMarkerNext){let Ue=L.PM.Utils.calcMiddleLatLng(this._map,ge,Xe);h._middleMarkerNext.setLatLng(Ue)}if(h._middleMarkerPrev){let Ue=L.PM.Utils.calcMiddleLatLng(this._map,ge,Le);h._middleMarkerPrev.setLatLng(Ue)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let h=l.target;if(!this._vertexValidationDragEnd(h))return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),x=!this.options.allowSelfIntersection&&this.hasSelfIntersection();x&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(x=!1);let C=!this.options.allowSelfIntersection&&x;if(this._fireMarkerDragEnd(l,v,C),C){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(l,v);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(l){let h=l.target;if(h._dragging)return;let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireVertexClick(l,v)}}),Kt.Polygon=Kt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(l){let{prevMarker:h,nextMarker:v}=this._getNeighborMarkers(l),x=L.polyline([h.getLatLng(),l.getLatLng()]),C=L.polyline([l.getLatLng(),v.getLatLng()]),j=ms(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,X=ms(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length;return!(j<=2&&X<=2)}}),Kt.Rectangle=Kt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let l=this._map,h=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,l.addLayer(this._markerGroup),this._markers=[],this._markers[0]=h.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((v,x)=>{let C=this._cornerMarkers.find(j=>j._index===x);C&&C.setLatLng(v)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(l,h){let v=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(v,"vertexPane"),v._origLatLng=l,v._index=h,v._pmTempLayer=!0,v.on("click",this._onVertexClick,this),this._markerGroup.addLayer(v),v},_addMarkerEvents(){this._markers[0].forEach(l=>{l.on("dragstart",this._onMarkerDragStart,this),l.on("drag",this._onMarkerDrag,this),l.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||l.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(l){if(!this._vertexValidation("move",l))return;let h=l.target,v=this._cornerMarkers;h._oppositeCornerLatLng=v.find(C=>C._index===(h._index+2)%4).getLatLng(),h._snapped=!1;let{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragStart(l,x)},_onMarkerDrag(l){let h=l.target;if(!this._vertexValidationDrag(h)||h._index===void 0)return;this._adjustRectangleForMarkerMove(h);let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDrag(l,v),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(l){let h=l.target;if(!this._vertexValidationDragEnd(h))return;this._cornerMarkers.forEach(x=>{delete x._oppositeCornerLatLng});let{indexPath:v}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);this._fireMarkerDragEnd(l,v),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(l){L.extend(l._origLatLng,l._latlng);let h=L.PM.Utils._getRotatedRectangle(l.getLatLng(),l._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(h),this._adjustAllMarkers(l),this._layer.redraw()},_adjustAllMarkers(l){let h=this._layer.getLatLngs()[0];if(h&&h.length!==4&&h.length>0)h.forEach((v,x)=>{this._cornerMarkers[x].setLatLng(v)}),this._cornerMarkers.slice(h.length).forEach(v=>{v.setLatLng(h[0])});else if(!h||!h.length)console.error("The layer has no LatLngs");else{let v=h.findIndex(x=>l.getLatLng().equals(x));v>-1?(this._cornerMarkers[(l._index+1)%4].setLatLng(h[(v+1)%4]),this._cornerMarkers[(l._index+2)%4].setLatLng(h[(v+2)%4]),this._cornerMarkers[(l._index+3)%4].setLatLng(h[(v+3)%4])):this._cornerMarkers.forEach(x=>{x.setLatLng(h[x._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(na(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let l=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(l[0],l[2],this.getAngle(),this._map||this)}}),Kt.CircleMarker=Kt.extend({_shape:"CircleMarker",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let l=this._map;this._helperLayers&&(this._helperLayers.removeFrom(l),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(l);let h=this._layer.getLatLng(),v=this._layer._radius,x=this._getLatLngOnCircle(h,v);this._centerMarker=this._createCenterMarker(h),this._outerMarker=this._createOuterMarker(x),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(l,h){let v=this._map.project(l),x=L.point(v.x+h,v.y);return this._map.unproject(x)},_createHintLine(l,h){let v=l.getLatLng(),x=h.getLatLng();this._hintline=L.polyline([v,x],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(l){let h=this._createMarker(l);return this.options.draggable?(L.DomUtil.addClass(h._icon,"leaflet-pm-draggable"),h.on("move",this._moveCircle,this)):h.dragging.disable(),h},_createOuterMarker(l){let h=this._createMarker(l);return h.on("drag",this._resizeCircle,this),h},_createMarker(l){let h=new L.Marker(l,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(h,"vertexPane"),h._origLatLng=l,h._pmTempLayer=!0,h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),h.on("click",this._onVertexClick,this),this._helperLayers.addLayer(h),h},_moveCircle(l){if(l.target._cancelDragEventChain)return;let h=this._centerMarker.getLatLng();this._layer.setLatLng(h);let v=this._layer._radius,x=this._getLatLngOnCircle(h,v);this._outerMarker._latlng=x,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let l=this._layer.getLatLng(),h=this._layer._radius,v=this._getLatLngOnCircle(l,h);this._outerMarker.setLatLng(v),this._centerMarker.setLatLng(l),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(v),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng();this._hintline.setLatLngs([l,h])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(l){this._vertexValidation("move",l)&&this._fireMarkerDragStart(l)},_onMarkerDrag(l){let h=l.target;h instanceof L.Marker&&!this._vertexValidationDrag(h)||this._fireMarkerDrag(l)},_onMarkerDragEnd(l){this._extedingMarkerDragEnd();let h=l.target;this._vertexValidationDragEnd(h)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(l))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let l=this._layer._map||this._map;if(l){let h=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),l,this._layer.getLatLng()),v=L.circle(this._layer.getLatLng(),this._layer.options);v.setRadius(h);let x=l&&l.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(v,200,!x).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(v,200,!x),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);return this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?h=Dl(this._map,l,h,this._getMinDistanceInMeter(l)):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&(h=Dl(this._map,l,h,this._getMaxDistanceInMeter(l))),h},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let l=this._centerMarker.getLatLng(),h=this._outerMarker.getLatLng(),v=this._distanceCalculation(l,h);this.options[this._minRadiusOption]&&v<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&v>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(l,h){return this._map.project(l).distanceTo(this._map.project(h))},_getMinDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,l)},_getMaxDistanceInMeter(l){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,l)},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Kt.Circle=Kt.CircleMarker.extend({_shape:"Circle",initialize(l){this._layer=l,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(l){L.PM.Edit.CircleMarker.prototype.enable.call(this,l||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let l=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(l,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let l=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!l).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!l),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(l,h){return this._map.distance(l,h)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(l){l.target._dragging||this._fireVertexClick(l,void 0)}}),Kt.ImageOverlay=Kt.extend({_shape:"ImageOverlay",initialize(l){this._layer=l,this._enabled=!1},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},enabled(){return this._enabled},enable(l={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,l),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let l=this._layer.getBounds(),h=l.getNorthWest(),v=l.getNorthEast(),x=l.getSouthEast(),C=l.getSouthWest();return[h,v,x,C]}}),Kt.Text=Kt.extend({_shape:"Text",initialize(l){this._layer=l,this._enabled=!1},enable(l){if(L.Util.setOptions(this,l),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let l=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),l.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(l){this.enabled()?this.disable():this.enable(l)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let l=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,l.off("pm:drag",this._handleSnapping,this),l.on("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.on("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this),l.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let l=this._layer;l.off("pm:drag",this._handleSnapping,this),l.off("pm:dragend",this._cleanupSnapping,this),l.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let l=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,h=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${l}px`,this.textArea.style.width=`${h}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(l){l.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(l={}){let h=this._hasFocus;this._hasFocus=l.type==="focus",!h!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(l){l&&(this.textArea.value=l),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let h=this.options.className.split(" ");this.textArea.classList.add(...h)}let l=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(l),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(l=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),l===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(l){l.preventDefault()}});var en=function(l,h,v,x,C,j){this._matrix=[l,h,v,x,C,j]};en.init=()=>new L.PM.Matrix(1,0,0,1,0,0),en.prototype={transform(l){return this._transform(l.clone())},_transform(l){let h=this._matrix,{x:v,y:x}=l;return l.x=h[0]*v+h[1]*x+h[4],l.y=h[2]*v+h[3]*x+h[5],l},untransform(l){let h=this._matrix;return new L.Point((l.x/h[0]-h[4])/h[0],(l.y/h[2]-h[5])/h[2])},clone(){let l=this._matrix;return new L.PM.Matrix(l[0],l[1],l[2],l[3],l[4],l[5])},translate(l){if(l===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let h,v;return typeof l=="number"?(h=l,v=l):(h=l.x,v=l.y),this._add(1,0,0,1,h,v)},scale(l,h){if(l===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let v,x;return h=h||L.point(0,0),typeof l=="number"?(v=l,x=l):(v=l.x,x=l.y),this._add(v,0,0,x,h.x,h.y)._add(1,0,0,1,-h.x,-h.y)},rotate(l,h){let v=Math.cos(l),x=Math.sin(l);return h=h||new L.Point(0,0),this._add(v,x,-x,v,h.x,h.y)._add(1,0,0,1,-h.x,-h.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(l,h,v,x,C,j){let X=[[],[],[]],re=this._matrix,ge=[[re[0],re[2],re[4]],[re[1],re[3],re[5]],[0,0,1]],Le=[[l,v,C],[h,x,j],[0,0,1]],Xe;l&&l instanceof L.PM.Matrix&&(re=l._matrix,Le=[[re[0],re[2],re[4]],[re[1],re[3],re[5]],[0,0,1]]);for(let Ue=0;Ue<3;Ue+=1)for(let vt=0;vt<3;vt+=1){Xe=0;for(let Dt=0;Dt<3;Dt+=1)Xe+=ge[Ue][Dt]*Le[Dt][vt];X[Ue][vt]=Xe}return this._matrix=[X[0][0],X[1][0],X[0][1],X[1][1],X[0][2],X[1][2]],this}};var pn=en,rn={calcMiddleLatLng(l,h,v){let x=l.project(h),C=l.project(v);return l.unproject(x._add(C)._divideBy(2))},findLayers(l){let h=[];return l.eachLayer(v=>{(v instanceof L.Polyline||v instanceof L.Marker||v instanceof L.Circle||v instanceof L.CircleMarker||v instanceof L.ImageOverlay)&&h.push(v)}),h=h.filter(v=>!!v.pm),h=h.filter(v=>!v._pmTempLayer),h=h.filter(v=>!L.PM.optIn&&!v.options.pmIgnore||L.PM.optIn&&v.options.pmIgnore===!1),h},circleToPolygon(l,h=60,v=!0){let x=l.getLatLng(),C=l.getRadius(),j=Wi(x,C,h,0,v),X=[];for(let re=0;re<j.length;re+=1){let ge=[j[re].lat,j[re].lng];X.push(ge)}return L.polygon(X,l.options)},disablePopup(l){l.getPopup()&&(l._tempPopupCopy=l.getPopup(),l.unbindPopup())},enablePopup(l){l._tempPopupCopy&&(l.bindPopup(l._tempPopupCopy),delete l._tempPopupCopy)},_fireEvent(l,h,v,x=!1){l.fire(h,v,x);let{groups:C}=this.getAllParentGroups(l);C.forEach(j=>{j.fire(h,v,x)})},getAllParentGroups(l){let h=[],v=[],x=C=>{for(let j in C._eventParents)if(h.indexOf(j)===-1){h.push(j);let X=C._eventParents[j];v.push(X),x(X)}};return!l._pmLastGroupFetch||!l._pmLastGroupFetch.time||new Date().getTime()-l._pmLastGroupFetch.time>1e3?(x(l),l._pmLastGroupFetch={time:new Date().getTime(),groups:v,groupIds:h},{groupIds:h,groups:v}):{groups:l._pmLastGroupFetch.groups,groupIds:l._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Wi,getTranslation:lr,findDeepCoordIndex(l,h,v=!0){let x,C=X=>(re,ge)=>{let Le=X.concat(ge);if(v){if(re.lat&&re.lat===h.lat&&re.lng===h.lng)return x=Le,!0}else if(re.lat&&L.latLng(re).equals(h))return x=Le,!0;return Array.isArray(re)&&re.some(C(Le))};l.some(C([]));let j={};return x&&(j={indexPath:x,index:x[x.length-1],parentPath:x.slice(0,x.length-1)}),j},findDeepMarkerIndex(l,h){let v,x=j=>(X,re)=>{let ge=j.concat(re);return X._leaflet_id===h._leaflet_id?(v=ge,!0):Array.isArray(X)&&X.some(x(ge))};l.some(x([]));let C={};return v&&(C={indexPath:v,index:v[v.length-1],parentPath:v.slice(0,v.length-1)}),C},_getIndexFromSegment(l,h){if(h&&h.length===2){let v=this.findDeepCoordIndex(l,h[0]),x=this.findDeepCoordIndex(l,h[1]),C=Math.max(v.index,x.index);return(v.index===0||x.index===0)&&C!==1&&(C+=1),{indexA:v,indexB:x,newIndex:C,indexPath:v.indexPath,parentPath:v.parentPath}}return null},_getRotatedRectangle(l,h,v,x){let C=qe(x,l),j=qe(x,h),X=v*Math.PI/180,re=Math.cos(X),ge=Math.sin(X),Le=(j.x-C.x)*re+(j.y-C.y)*ge,Xe=(j.y-C.y)*re-(j.x-C.x)*ge,Ue=Le*re+C.x,vt=Le*ge+C.y,Dt=-Xe*ge+C.x,Xt=Xe*re+C.y,_n=ht(x,C),Sn=ht(x,{x:Ue,y:vt}),hr=ht(x,j),Je=ht(x,{x:Dt,y:Xt});return[_n,Sn,hr,Je]},pxRadiusToMeterRadius(l,h,v){let x=h.project(v),C=L.point(x.x+l,x.y);return h.distance(h.unproject(C),v)}},Tn=rn;L.PM=L.PM||{version:jo.version,Map:ko,Toolbar:ll,Draw:ho,Edit:Kt,Utils:Tn,Matrix:pn,activeLang:"en",optIn:!1,initialize(l){this.addInitHooks(l)},setOptIn(l){this.optIn=!!l},addInitHooks(){function l(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(l);function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(h);function v(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(v);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(x);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(C);function j(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(j);function X(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(X);function re(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(re);function ge(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(ge)},reInitLayer(l){l instanceof L.LayerGroup&&l.eachLayer(h=>{this.reInitLayer(h)}),l.pm||L.PM.optIn&&l.options.pmIgnore!==!1||l.options.pmIgnore||(l instanceof L.Map?l.pm=new L.PM.Map(l):l instanceof L.Marker?l.options.textMarker?(l.pm=new L.PM.Edit.Text(l),l.pm._initTextMarker(),l.pm._createTextMarker(!1)):l.pm=new L.PM.Edit.Marker(l):l instanceof L.Circle?l.pm=new L.PM.Edit.Circle(l):l instanceof L.CircleMarker?l.pm=new L.PM.Edit.CircleMarker(l):l instanceof L.Rectangle?l.pm=new L.PM.Edit.Rectangle(l):l instanceof L.Polygon?l.pm=new L.PM.Edit.Polygon(l):l instanceof L.Polyline?l.pm=new L.PM.Edit.Line(l):l instanceof L.LayerGroup?l.pm=new L.PM.Edit.LayerGroup(l):l instanceof L.ImageOverlay&&(l.pm=new L.PM.Edit.ImageOverlay(l)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(l){let h=this._map.mouseEventToLayerPoint(l),v,x;for(let C=this._drawFirst;C;C=C.next)v=C.layer,v.options.interactive&&v._containsPoint(h)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(v))&&(x=v);x&&(L.DomEvent.fakeStop(l),this._fireEvent([x],l))}}),L.PM.initialize()})();class zh extends qn.Circle{constructor(t,r){const i=r.radius||10;super(t,i,r);Wt(this,"properties");Wt(this,"angleCache",new Map);Wt(this,"lastCenter");Wt(this,"lastCenterCosLat");Wt(this,"_pendingNameUpdate",!1);Wt(this,"_nameUpdateTimeout",null);dn.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){dn.measure("Circle.updateProperties",()=>{var u,f,d,m;const t=this.getRadius(),r=this.getLatLng(),i=((f=(u=this.properties)==null?void 0:u.style)==null?void 0:f.name)||"",s=((d=this.properties)==null?void 0:d.style)||{},o={type:"Circle",radius:t,diameter:t*2,surface:Math.PI*Math.pow(t,2),perimeter:2*Math.PI*t,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((m=this.options)==null?void 0:m.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(t){dn.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==t&&(this.properties.style||(this.properties.style={}),this.properties.style.name=t,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return dn.measure("Circle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""},"Circle")}setRadius(t){return dn.measure("Circle.setRadius",()=>(super.setRadius(t),this.updateProperties(),this),"Circle")}setLatLng(t){return dn.measure("Circle.setLatLng",()=>(super.setLatLng(t),this.updateProperties(),this),"Circle")}calculatePointOnCircle(t){return dn.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(t);if(!s){const o=t*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(t,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),qn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return dn.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(t=>this.calculatePointOnCircle(t)),"Circle")}calculateAngleFromPoint(t){return dn.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=t.lng-r.lng,s=t.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(t){dn.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(t);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const _m=(e,n)=>{if(!e||typeof e!="string"||!e.startsWith("#"))return`rgba(0, 0, 0, ${n})`;const t=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16);return`rgba(${t}, ${r}, ${i}, ${n})`},wb=(e,n)=>{e.style.fontSize=n.fontSize,e.style.color=n.color,e.style.backgroundColor=_m(n.backgroundColor,n.backgroundOpacity),n.hasBorder?e.style.border=`${n.borderWidth} solid ${_m(n.borderColor,n.borderOpacity)}`:e.style.border="none",e.style.padding=n.padding,e.style.borderRadius=n.borderRadius},vl=e=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const t=zt.DomUtil.create("div","drawing-help-message");return t.innerHTML=e,t.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(t),t};function xb(e,n,t){const r=156543.03392*Math.cos(n*Math.PI/180)/Math.pow(2,t);return e/r}const Ji=(e,n="m",t="")=>{let r,i;return n==="m"?e>=1e4?(r=(e/1e4).toFixed(2),i="ha"):(r=e.toFixed(2),i="m"):n==="m"?e>=1e3?(r=(e/1e3).toFixed(2),i="km"):(r=e.toFixed(2),i="m"):(r=e.toFixed(2),i=n),t?`${t}: ${r} ${i}`:`${r} ${i}`},MR=e=>({...e,clientX:e.clientX,clientY:e.clientY,button:e.button||0,buttons:e.buttons||0,altKey:e.altKey||!1}),AR=(e,n)=>{let t;return function(...r){window.clearTimeout(t),t=window.setTimeout(()=>e.apply(this,r),n)}},Hf=(e,n)=>{let t=0;return function(...r){const i=Date.now();if(!(i-t<n))return t=i,e.apply(this,r)}};function kR(){const e=Ft(null),n=Ft(null),t=Ft(null),r=Ft(null),i=Ft(""),s=Ft(null),o=Ft(!1),u=Ft(null);window.addEventListener("clearControlPoints",()=>{s.value=null,t.value&&t.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(H=>H.remove()),document.querySelectorAll(".drawing-help-message").forEach(H=>H.remove())}),Hu(()=>{window.removeEventListener("clearControlPoints",()=>{}),e.value&&(e.value.remove(),e.value=null)});const f=(H,Q="Double-cliquez pour diter")=>{const ue={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},se=(We,He)=>{var ze;const tt=((ze=e.value)==null?void 0:ze.getZoom())||14,Ze=H.lat,et=xb(He.physicalSize,Ze,tt);return`<div class="text-container" style="width:${et}px;height:${et}px;transform:rotate(${He.rotation}deg)">
        <div class="text-annotation" style="font-size:${et*.2}px;color:${He.color};background-color:${_m(He.backgroundColor,He.backgroundOpacity)};border:${He.hasBorder?He.borderWidth+" solid "+_m(He.borderColor,He.borderOpacity):"none"};padding:${He.padding};border-radius:${He.borderRadius}">${We}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},pe=()=>{if(!e.value)return;const We=D.getIcon(),He={html:se(D.properties.text,D.properties.style),className:We.options.className};D.setIcon(zt.divIcon(He))},K=zt.divIcon({html:se(Q,ue),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),D=zt.marker(H,{icon:K,draggable:!1,pmIgnore:!0});D.properties={type:"text",text:Q,style:{...ue}},e.value&&(e.value.on("zoomend",pe),D.on("remove",()=>{var We;(We=e.value)==null||We.off("zoomend",pe)})),pe();let ke=!1,Me=!1,Ge=0,ce=0;const te=We=>{if(!e.value)return;const He=We.target;if(He.classList.contains("rotate")){ke=!0;const tt=D.getLatLng(),Ze=e.value.mouseEventToLatLng(We);Ge=Math.atan2(Ze.lat-tt.lat,Ze.lng-tt.lng)*180/Math.PI,ce=D.properties.style.rotation||0}else He.classList.contains("move")&&(Me=!0);document.addEventListener("mousemove",ye),document.addEventListener("mouseup",de)},ye=We=>{if(!(!Me||!e.value)){if(ke){const He=D.getLatLng(),tt=e.value.mouseEventToLatLng(We),Ze=Math.atan2(tt.lat-He.lat,tt.lng-He.lng)*180/Math.PI,et=(ce+(Ze-Ge))%360;D.properties.style.rotation=et;const ze=D.getIcon(),wt={html:se(D.properties.text,D.properties.style),className:ze.options.className};D.setIcon(zt.divIcon(wt))}else if(Me){const He=MR(We),tt=e.value.mouseEventToLatLng(He);D.setLatLng(tt)}}},de=()=>{ke=!1,Me=!1,document.removeEventListener("mousemove",ye),document.removeEventListener("mouseup",de)};return D.on("add",()=>{const We=D.getElement();We&&We.querySelectorAll(".control-button").forEach(tt=>{tt.addEventListener("mousedown",te)})}),D.on("remove",()=>{const We=D.getElement();We&&We.querySelectorAll(".control-button").forEach(tt=>{tt.removeEventListener("mousedown",te)})}),D.on("dblclick",We=>{var wt;zt.DomEvent.stopPropagation(We);const He=(wt=D.getElement())==null?void 0:wt.querySelector(".text-annotation");if(!He)return;He.contentEditable="true",He.focus(),He.classList.add("editing");const tt=window.getSelection(),Ze=document.createRange();Ze.selectNodeContents(He),tt==null||tt.removeAllRanges(),tt==null||tt.addRange(Ze);const et=()=>{He.contentEditable="false",He.classList.remove("editing");const Pt=He.innerText.trim();if(Pt){D.properties.text=Pt;const kt=D.getIcon(),Jt={html:se(Pt,D.properties.style),className:kt.options.className};D.setIcon(zt.divIcon(Jt))}He.removeEventListener("blur",et),He.removeEventListener("keydown",ze)},ze=Pt=>{Pt.key==="Enter"&&!Pt.shiftKey&&(Pt.preventDefault(),et())};He.addEventListener("blur",et),He.addEventListener("keydown",ze)}),D},d=(H,Q)=>{const ue=zt.DomUtil.create("div","measure-tooltip");if(ue.innerHTML=Q,ue.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(ue),e.value){const se=e.value.latLngToContainerPoint(H);ue.style.left=`${se.x+10}px`,ue.style.top=`${se.y-25}px`}return ue},m=Hf((H,Q,ue)=>{if(H&&(H.innerHTML=ue,e.value)){const se=e.value.latLngToContainerPoint(Q);H.style.left=`${se.x+10}px`,H.style.top=`${se.y-25}px`}},100),_=(H,Q,ue)=>{H.on("mouseover",()=>{const se=d(H.getLatLng(),ue());H.measureDiv=se}),H.on("mousemove",se=>{H.measureDiv&&e.value&&m(H.measureDiv,se.latlng,ue())}),H.on("mouseout",()=>{H.measureDiv&&(H.measureDiv.remove(),H.measureDiv=void 0)})};let b=[];const y=()=>{var H;b.cleanup&&b.cleanup(),t.value&&t.value.clearLayers(),b=[],(H=r.value)==null||H.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(Q=>Q.remove()),n.value&&n.value.getLayers().forEach(Q=>{Q instanceof ga&&Q.clearHelperPoints()})},M=(H,Q="#2563EB")=>{const ue=zt.circleMarker(H,{radius:6,color:Q,fillColor:Q,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return t.value&&t.value.addLayer(ue),ue},k=(H,Q)=>{var se,pe,K,D,ke,Me;console.log("Input layer:",{type:Q,instanceof:{Circle:H instanceof zt.Circle,Rectangle:H instanceof zt.Rectangle,Polygon:H instanceof zt.Polygon,Polyline:H instanceof zt.Polyline,ElevationLine:H instanceof Cf,Line:H instanceof Bs},options:H.options});const ue={type:Q,style:H.options||{}};try{if(H instanceof zt.Circle){const Ge=H.getRadius();ue.radius=Ge,ue.diameter=Ge*2,ue.surface=Math.PI*Math.pow(Ge,2),ue.perimeter=2*Math.PI*Ge,ue.center=H.getLatLng()}else if(H instanceof zt.Rectangle){const Ge=H.getBounds(),ce=Ge.getNorthEast(),te=Ge.getSouthWest(),ye=pu([[te.lng,te.lat],[ce.lng,te.lat]]),de=pu([[te.lng,te.lat],[te.lng,ce.lat]]),We=Gf(ye,{units:"meters"}),He=Gf(de,{units:"meters"});ue.width=We,ue.height=He,ue.surface=We*He,ue.perimeter=2*(We+He),ue.dimensions={width:We,height:He}}else if(H instanceof zt.Polygon)try{const ce=H.getLatLngs()[0].map(ye=>[ye.lng,ye.lat]);ce.push(ce[0]);const te=du([ce]);ue.surface=sc(te),ue.perimeter=Gf(pu(ce),{units:"meters"})}catch(Ge){console.error("Erreur lors du calcul des proprits du polygone",Ge)}else if(H instanceof zt.Polyline&&!(H instanceof zt.Polygon))try{const Ge=H.getLatLngs();let ce=0;for(let te=1;te<Ge.length;te++)ce+=Ge[te].distanceTo(Ge[te-1]);ue.length=ce}catch(Ge){console.error("Erreur lors du calcul de la longueur de la ligne",Ge)}ue.style={...ue.style,color:((se=H.options)==null?void 0:se.color)||"#3388ff",weight:((pe=H.options)==null?void 0:pe.weight)||3,opacity:((K=H.options)==null?void 0:K.opacity)||1,fillColor:((D=H.options)==null?void 0:D.fillColor)||"#3388ff",fillOpacity:((ke=H.options)==null?void 0:ke.fillOpacity)||.2,dashArray:((Me=H.options)==null?void 0:Me.dashArray)||""}}catch(Ge){console.error("Error calculating shape properties:",Ge)}return ue},F=(H,Q=2)=>{var D;if(!e.value){console.warn("Map is not available for text size update");return}const ue=e.value.getZoom(),se=H.getLatLng().lat,pe=xb(Q,se,ue),K=(D=H.getElement())==null?void 0:D.querySelector(".text-annotation");K&&(H.properties.style.fontSize=`${pe}px`,H.properties.physicalWidth=Q,H.properties.physicalHeight=Q,wb(K,H.properties.style))},I=(H,Q,ue)=>{const se=zt.map(H).setView(Q,ue);e.value=se,zt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(se);const pe=new zt.FeatureGroup;return pe.addTo(se),n.value=pe,t.value=zt.featureGroup().addTo(se),r.value=zt.featureGroup().addTo(se),se.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:pe,snapLayers:[pe,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),se.on("pm:drawstart",K=>{o.value=!0,K.shape==="Circle"&&i.value==="Semicircle"&&(se.getContainer().style.cursor="crosshair")}),se.on("pm:drawend",()=>{o.value=!1,se.getContainer().style.cursor="",s.value&&vl("Cliquez sur la forme pour afficher les points de contrle")}),se.on("pm:create",Te),pe.on("click",K=>{var ke,Me,Ge,ce,te,ye,de,We,He,tt,Ze,et,ze,wt,Pt;zt.DomEvent.stopPropagation(K);const D=K.layer;if(D.name&&!((ke=D.properties)!=null&&ke.name)?(D.properties||(D.properties={}),D.properties.name=D.name):(Me=D.properties)!=null&&Me.name&&!D.name&&(D.name=D.properties.name),console.log("[featureGroup click] tat du nom:",{directName:D.name,propertiesName:(Ge=D.properties)==null?void 0:Ge.name,fullProperties:D.properties}),(ce=r.value)==null||ce.clearLayers(),y(),s.value=D,D instanceof zh)U(D);else if(D instanceof zt.Circle){console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(D,"name"),directName:D.name,propertiesName:(te=D.properties)==null?void 0:te.name,styleNameBeforeTransfer:(de=(ye=D.properties)==null?void 0:ye.style)==null?void 0:de.name,nameIsEnumerable:Object.keys(D).includes("name"),allProperties:Object.keys(D.properties||{}),_dbId:D._dbId});const kt=D.name,Jt=(We=D.properties)==null?void 0:We.name,on=(tt=(He=D.properties)==null?void 0:He.style)==null?void 0:tt.name,cn=D._dbId,Ke=new zh(D.getLatLng(),{...D.options,radius:D.getRadius()});D.properties?Ke.properties={...D.properties||{}}:Ke.updateProperties();const ot=kt||Jt||on;ot&&(Ke.properties.name=ot,Ke.properties.style||(Ke.properties.style={}),Ke.properties.style.name=ot,Ke.name=ot),cn&&(Ke._dbId=cn),console.log("[useMapDrawing] Cercle aprs conversion:",{name:Ke.name,propertiesName:Ke.properties.name,stylePropertyName:(Ze=Ke.properties.style)==null?void 0:Ze.name,allProperties:Object.keys(Ke.properties||{})}),(et=n.value)==null||et.removeLayer(D),(ze=n.value)==null||ze.addLayer(Ke),s.value=Ke,U(Ke)}else if(D instanceof ga)Z(D);else if(D instanceof zt.Rectangle){const kt=new ga(D.getBounds(),{...D.options});kt.updateProperties(),(wt=n.value)==null||wt.removeLayer(D),(Pt=n.value)==null||Pt.addLayer(kt),s.value=kt,Z(kt)}else D instanceof zt.Polygon?N(D):D instanceof Bs||D instanceof zt.Polyline?T(D):D instanceof $c&&O(D)}),se.on("pm:edit",K=>{var ke,Me,Ge;console.log("[pm:edit] Dbut",{layer:K.layer,currentProperties:K.layer.properties});const D=K.layer;if(D){const ce=((ke=D.properties)==null?void 0:ke.type)||"unknown";if(ve(D,ce),console.log("[pm:edit] Aprs updateLayerProperties",{updatedProperties:D.properties,selectedShape:s.value}),D instanceof zh)U(D);else if(D instanceof ga)Z(D);else if(D instanceof zt.Rectangle){const te=new ga(D.getBounds(),{...D.options});te.updateProperties(),(Me=n.value)==null||Me.removeLayer(D),(Ge=n.value)==null||Ge.addLayer(te),s.value=te,Z(te)}else D instanceof zt.Polygon?N(D):D instanceof Bs?(D.updateProperties(),ve(D,"Line"),T(D)):D instanceof zt.Polyline?T(D):D instanceof $c&&(D.updateProperties(),O(D))}}),se.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(K=>K.remove()),vl("Dplacez la forme  l'endroit souhait")}),se.on("pm:dragend",K=>{var ke,Me,Ge;console.log("[pm:dragend] Dbut",{layer:K.layer,currentProperties:K.layer.properties});const D=K.layer;if(D){const ce=((ke=D.properties)==null?void 0:ke.type)||"unknown";if(D instanceof zt.Rectangle&&!(D instanceof ga)){const te=new ga(D.getBounds(),{...D.options});te.updateProperties(),(Me=n.value)==null||Me.removeLayer(D),(Ge=n.value)==null||Ge.addLayer(te),s.value=te,Z(te)}else D instanceof Bs?(D.updateProperties(),ve(D,"Line"),T(D)):ve(D,ce);console.log("[pm:dragend] Aprs updateLayerProperties",{updatedProperties:D.properties,selectedShape:s.value})}setTimeout(()=>{vl("Cliquez sur la forme pour afficher les points de contrle")},100)}),se.on("pm:remove",()=>{var K;(K=document.querySelector(".drawing-help-message"))==null||K.remove()}),se.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(K=>K.remove()),vl("Utilisez les points de contrle pour modifier la forme")}),se.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(K=>K.remove())}),se.on("zoomstart",()=>{s.value&&(y(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(K=>K.remove()))}),se},R=()=>{if(!(!e.value||!n.value||!n.value.getLayers().length))try{const H=n.value.getBounds();if(H.isValid()){const Q={zoomAnimation:e.value.options.zoomAnimation,fadeAnimation:e.value.options.fadeAnimation,markerZoomAnimation:e.value.options.markerZoomAnimation};e.value.options.zoomAnimation=!1,e.value.options.fadeAnimation=!1,e.value.options.markerZoomAnimation=!1,e.value.fitBounds(H,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),e.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{e.value.options.fadeAnimation=Q.fadeAnimation,setTimeout(()=>{try{e.value.options.zoomAnimation=Q.zoomAnimation,e.value.options.markerZoomAnimation=Q.markerZoomAnimation}catch(ue){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ue)}},500)}catch(ue){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ue)}},500)}}catch(H){if(console.warn("[useMapDrawing] Error adjusting view:",H),e.value)try{e.value.options.zoomAnimation=!0,e.value.options.fadeAnimation=!0,e.value.options.markerZoomAnimation=!0,e.value.invalidateSize({animate:!1,pan:!1})}catch(Q){console.error("[useMapDrawing] Erreur lors de la restauration aprs chec:",Q)}}},Y=H=>{var ue;if(!e.value)return;document.querySelectorAll(".drawing-help-message").forEach(se=>se.remove());try{const se=e.value.pm;se.globalEditModeEnabled()&&se.disableGlobalEditMode(),se.globalRemovalModeEnabled()&&se.disableGlobalRemovalMode(),se.disableDraw(),y(),(ue=r.value)==null||ue.clearLayers()}catch(se){console.error("Error disabling modes:",se)}if(i.value=H,!H){y();return}let Q=H;switch(H){case"Note":Q="GeoNote";break;case"Polygon":Q="Polygon";break;case"Line":Q="Line";break;case"ElevationLine":Q="ElevationLine";break;default:Q=H}H=Q,J(),setTimeout(()=>{var se,pe,K,D,ke,Me,Ge,ce,te,ye,de,We,He;try{switch(H){case"Polygon":vl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(se=e.value)==null||se.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(pe=e.value)==null||pe.off("pm:create"),(K=e.value)==null||K.on("pm:create",Ze=>{var et,ze,wt;if(Ze.shape==="Polygon"&&Ze.layer){const Pt=Ze.layer.getLatLngs()[0];(et=e.value)==null||et.removeLayer(Ze.layer),(ze=n.value)!=null&&ze.hasLayer(Ze.layer)&&n.value.removeLayer(Ze.layer);const kt=new vf(Pt,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});n.value&&(n.value.addLayer(kt),s.value=kt,kt.updateProperties()),(wt=e.value)==null||wt.pm.disableDraw(),J()}});break;case"Circle":n.value&&n.value.getLayers().filter(et=>et instanceof ga).forEach(et=>{et.toggleHelperPoints(e.value,!0,"#DC2626","#2563EB")}),e.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[n.value,r.value],snapMiddle:!0,snapIntersections:!0}),vl("Positionnez le centre du cercle. Points bleus : milieu des cts, Points rouges : sommets, Point vert : centre"),e.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":vl("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(D=e.value)==null||D.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":vl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ke=e.value)==null||ke.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":vl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Me=e.value)==null||Me.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Ge=e.value)==null||Ge.off("pm:create"),(ce=e.value)==null||ce.on("pm:create",Ze=>{var et,ze,wt;if(Ze.shape==="Line"&&Ze.layer){const Pt=Ze.layer.getLatLngs();(et=e.value)==null||et.removeLayer(Ze.layer),(ze=n.value)!=null&&ze.hasLayer(Ze.layer)&&n.value.removeLayer(Ze.layer);const kt=new Bs(Pt,{color:"#3B82F6",weight:3,opacity:.8});n.value&&(n.value.addLayer(kt),s.value=kt,kt.updateProperties()),(wt=e.value)==null||wt.pm.disableDraw(),J()}});break;case"Text":if(vl("Cliquez pour ajouter du texte, double-cliquez pour diter"),e.value){const Ze=et=>{if(!e.value||!n.value)return;const ze=f(et.latlng);n.value.addLayer(ze),s.value=ze,e.value.off("click",Ze),Y("")};e.value.on("click",Ze)}break;case"GeoNote":if(vl("Cliquez pour ajouter une note golocalise, double-cliquez pour diter"),e.value){const Ze=async et=>{if(!(!e.value||!n.value))try{const ze=fd(),wt=new $c(et.latlng,{color:"#3B82F6",name:"Note golocalise",description:"",columnId:"1"});n.value.addLayer(wt),s.value=wt,wt.updateProperties();try{const Pt=ze.currentMapId||void 0,kt=await wt.saveNote(Pt);console.log(`[useMapDrawing] Note sauvegarde avec succs, ID backend: ${kt}`);const Jt=wt._leaflet_id;console.log(`[useMapDrawing] ID Leaflet: ${Jt}, ID backend: ${kt}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:wt,leafletId:Jt,backendId:kt}})),wt.openPopup()}catch(Pt){console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",Pt),mf(async()=>{const{useNotificationStore:kt}=await Promise.resolve().then(()=>h8);return{useNotificationStore:kt}},void 0).then(({useNotificationStore:kt})=>{kt().error("Erreur lors de la cration de la note")})}e.value.off("click",Ze),Y("")}catch(ze){console.error("[useMapDrawing] Erreur lors de la cration de la note:",ze),e.value.off("click",Ze),Y("")}};e.value.on("click",Ze)}break;case"delete":vl("Cliquez sur une forme pour la supprimer"),(te=e.value)==null||te.pm.enableGlobalRemovalMode();break;case"ElevationLine":vl("Cliquez et maintenez pour tracer le profil altimtrique"),(ye=e.value)==null||ye.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(de=e.value)==null||de.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(We=e.value)==null||We.off("pm:create"),(He=e.value)==null||He.on("pm:create",async Ze=>{var et,ze,wt;if(Ze.shape==="Line"&&Ze.layer){const Pt=Ze.layer.getLatLngs();(et=e.value)==null||et.removeLayer(Ze.layer),(ze=n.value)!=null&&ze.hasLayer(Ze.layer)&&n.value.removeLayer(Ze.layer);const kt=new Cf(Pt,{color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});if(n.value){n.value.addLayer(kt),s.value=kt,await kt.updateElevationProfile();const Jt=k(kt,"ElevationLine");Object.assign(kt.properties,{...Jt,...kt.properties,type:"ElevationLine",elevationData:kt.getElevationData()}),s.value=null,Us(()=>{s.value=kt})}(wt=e.value)==null||wt.pm.disableDraw(),i.value="",J()}});break}}catch(tt){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",tt)}},100)},ee=H=>{var ue;if(!s.value)return;const Q=s.value;if(Q.properties=Q.properties||{},Q.properties.style=Q.properties.style||{},Q.properties.style={...Q.properties.style,...H},Q.properties.type==="text"){const se=Q.properties._textLayer,pe=(ue=se==null?void 0:se.getElement())==null?void 0:ue.querySelector(".text-annotation");pe&&wb(pe,Q.properties.style);const K={color:H.borderColor||Q.properties.style.borderColor,weight:parseInt(H.borderWidth||Q.properties.style.borderWidth),opacity:H.borderOpacity??Q.properties.style.borderOpacity};"setStyle"in Q&&Q.setStyle(K)}else if(Q.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprim selon les exigences");else{const se={};H.fillColor&&(se.fillColor=H.fillColor),H.fillOpacity!==void 0&&(se.fillOpacity=H.fillOpacity),H.strokeColor&&(se.color=H.strokeColor),H.strokeOpacity!==void 0&&(se.opacity=H.strokeOpacity),H.strokeWidth!==void 0&&(se.weight=H.strokeWidth),H.dashArray&&(se.dashArray=H.dashArray),"setStyle"in Q&&Q.setStyle(se)}},he=H=>{var D,ke,Me,Ge,ce;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:H,layerType:(D=s.value.properties)==null?void 0:D.type,beforeName:s.value.name,beforePropertiesName:(ke=s.value.properties)==null?void 0:ke.name,beforeCategory:(Me=s.value.properties)==null?void 0:Me.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const Q=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${Q}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const ue=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise  jour: ${ue}`);const se=s.value.properties.category;console.log(`[useMapDrawing] Catgorie existante: ${se}`);const pe="category"in H&&H.category!==se;if(Object.keys(H).forEach(te=>{te==="type"&&ue?console.log(`[useMapDrawing] Prservation du type original: ${ue}`):s.value.properties[te]=H[te],te==="name"&&(console.log(`[useMapDrawing] Setting name "${H[te]}" directly on layer`),s.value.name=H[te]),te==="category"&&console.log(`[useMapDrawing] Mise  jour de la catgorie: ${se} -> ${H[te]}`)}),ue&&(s.value.properties.type=ue),se&&!pe&&(console.log(`[useMapDrawing] Restauration de la catgorie originale: ${se}`),s.value.properties.category=se),s.value._dbId&&pe){const te=fd(),ye=te.elements.find(de=>de.id===s.value._dbId);if(ye){console.log(`[useMapDrawing] Mise  jour de la catgorie dans le store: ${s.value.properties.category} pour l'lment ${s.value._dbId}`);const de=ye;de.data||(de.data={}),de.data.category=s.value.properties.category,te.$patch({unsavedChanges:!0})}}const K=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:pe}});if(window.dispatchEvent(K),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(Ge=s.value.properties)==null?void 0:Ge.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((ce=s.value.properties)==null?void 0:ce.type)==="Circle"){const te=s.value,ye=te.getRadius();te.properties.radius=ye,te.properties.diameter=ye*2,te.properties.surface=Math.PI*ye*ye,te.properties.perimeter=2*Math.PI*ye,H.name&&(console.log(`[useMapDrawing] Ensuring circle name "${H.name}" is set in multiple places`),te.properties.name=H.name,te.properties.style.name=H.name,te.name=H.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:te.name,circlePropertiesName:te.properties.name,nameIsEnumerable:Object.keys(te).includes("name"),propertiesNameIsEnumerable:Object.keys(te.properties).includes("name")}))}},fe=H=>{console.log("[forceShapeUpdate] Dbut",{currentProperties:H.properties,selectedShapeRef:s.value}),s.value=null,Us(()=>{s.value=H,console.log("[forceShapeUpdate] Aprs mise  jour",{selectedShape:s.value,properties:s.value.properties})})},ve=(H,Q)=>{console.log("[updateLayerProperties] Dbut",{layer:H,shapeType:Q,currentProperties:H.properties}),AR((se,pe)=>{const K=k(se,pe);console.log("[updateLayerProperties] Nouvelles proprits calcules",{newProperties:K}),se.properties={...K},fe(se),se.fire("properties:updated",{shape:se,properties:se.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:se.properties,selectedShape:s.value})},100)(H,Q)},$=(H,Q)=>zt.latLng((H.lat+Q.lat)/2,(H.lng+Q.lng)/2),U=H=>{if(!e.value||!n.value)return;y();const Q=H.getLatLng(),ue=H.getRadius(),se=M(Q,"#059669");b.push(se),_(se,H,()=>[Ji(ue,"m","Rayon"),Ji(ue*2,"m","Diamtre"),Ji(Math.PI*Math.pow(ue,2),"m","Surface")].join("<br>"));const pe=[],K=[0,45,90,135,180,225,270,315];K.forEach(D=>{const ke=H.calculatePointOnCircle(D),Me=M(ke,"#2563EB");pe.push(Me),b.push(Me),_(Me,H,()=>Ji(ue,"m","Rayon")),Me.on("mousedown",Ge=>{if(!e.value)return;zt.DomEvent.stopPropagation(Ge),e.value.dragging.disable();let ce=!0;const te=de=>{ce&&(H.resizeFromControlPoint(de.latlng),pe.forEach((We,He)=>{const tt=H.calculatePointOnCircle(K[He]);We.setLatLng(tt)}),se.setLatLng(H.getLatLng()),Me.measureDiv&&(Me.measureDiv.innerHTML=Ji(H.getRadius(),"m","Rayon")))},ye=()=>{ce=!1,e.value&&(e.value.off("mousemove",te),document.removeEventListener("mouseup",ye),e.value.dragging.enable(),H.updateProperties(),s.value=null,Us(()=>{s.value=H}),ve(H,"Circle"))};e.value.on("mousemove",te),document.addEventListener("mouseup",ye)})}),se.on("mousedown",D=>{if(!e.value)return;zt.DomEvent.stopPropagation(D),e.value.dragging.disable();let ke=!0;const Me=H.getLatLng(),Ge=D.latlng,ce=ye=>{if(!ke)return;const de=ye.latlng.lng-Ge.lng,We=ye.latlng.lat-Ge.lat,He=zt.latLng(Me.lat+We,Me.lng+de);zt.Circle.prototype.setLatLng.call(H,He),se.setLatLng(He),pe.forEach((tt,Ze)=>{const et=H.calculatePointOnCircle(K[Ze]);tt.setLatLng(et)}),se.measureDiv&&(se.measureDiv.innerHTML=[Ji(H.getRadius(),"m","Rayon"),Ji(H.getRadius()*2,"m","Diamtre"),Ji(Math.PI*Math.pow(H.getRadius(),2),"m","Surface")].join("<br>"))},te=()=>{ke=!1,e.value&&(e.value.off("mousemove",ce),document.removeEventListener("mouseup",te),e.value.dragging.enable(),H.updateProperties(),s.value=null,Us(()=>{s.value=H}),ve(H,"Circle"))};e.value.on("mousemove",ce),document.addEventListener("mouseup",te)}),H.on("circle:resized",()=>{ve(H,"Circle")}),s.value=H},Z=H=>{var ce;if(!e.value||!n.value)return;if(!(H instanceof ga)){console.warn("La couche n'est pas une instance de Rectangle");return}const Q=H;y();const ue=Q.getCenter(),se=Q.getRotatedCorners(),pe=Q.getMidPoints(),K=M(ue,"#059669");b.push(K),_(K,Q,()=>{const{width:te,height:ye}=Q.getDimensions(),de=te*ye,We=Q.getRotation();return[Ji(te,"m","Largeur"),Ji(ye,"m","Hauteur"),Ji(de,"m","Surface"),`Rotation: ${We.toFixed(1)}`].join("<br>")});const D=M(zt.latLng(ue.lat+(se[0].lat-ue.lat)*1.2,ue.lng+(se[0].lng-ue.lng)*1.2),"#F97316");b.push(D);const ke=zt.polyline([ue,D.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(ce=t.value)==null||ce.addLayer(ke);const Me=se.map(te=>{const ye=M(te,"#DC2626");return b.push(ye),_(ye,Q,()=>{const{width:de,height:We}=Q.getDimensions();return[Ji(de,"m","Largeur"),Ji(We,"m","Hauteur")].join("<br>")}),ye}),Ge=pe.map((te,ye)=>{const de=M(te,"#2b6451");return b.push(de),_(de,Q,()=>{const{width:We,height:He}=Q.getDimensions(),tt=ye%2===0?We:He;return[Ji(tt,"m","Longueur du ct"),Ji(tt/2,"m","Distance au coin")].join("<br>")}),de});K.on("mousedown",te=>{if(!e.value)return;zt.DomEvent.stopPropagation(te),e.value.dragging.disable();let ye=!0;const de=He=>{if(!ye)return;Q.moveFromCenter(He.latlng);const tt=Q.getRotatedCorners(),Ze=Q.getMidPoints();Me.forEach((ze,wt)=>ze.setLatLng(tt[wt])),Ge.forEach((ze,wt)=>ze.setLatLng(Ze[wt])),K.setLatLng(He.latlng);const et=zt.latLng(He.latlng.lat+(tt[0].lat-He.latlng.lat)*1.2,He.latlng.lng+(tt[0].lng-He.latlng.lng)*1.2);D.setLatLng(et),ke.setLatLngs([He.latlng,et])},We=()=>{ye=!1,e.value&&(e.value.off("mousemove",de),document.removeEventListener("mouseup",We),e.value.dragging.enable(),Q.updateProperties(),s.value=null,Us(()=>{s.value=Q}))};e.value.on("mousemove",de),document.addEventListener("mouseup",We)}),D.on("mousedown",te=>{if(!e.value)return;zt.DomEvent.stopPropagation(te),e.value.dragging.disable();let ye=!1;const de=te.latlng,We=Q.getRotation(),He=Q.getCenter(),tt=de.lng-He.lng,Ze=de.lat-He.lat,et=Math.atan2(Ze,tt)*180/Math.PI;b.forEach(Pt=>{Pt!==D&&(Pt.setStyle({opacity:0,fillOpacity:0}),Pt.measureDiv&&(Pt.measureDiv.style.display="none"))});const ze=Hf(Pt=>{ye||(ye=!0);const kt=Pt.latlng.lng-He.lng,Jt=Pt.latlng.lat-He.lat;let cn=Math.atan2(Jt,kt)*180/Math.PI-et,Ke=(We+cn)%360;Ke<0&&(Ke+=360),Q.setRotation(Ke,!1),D.setLatLng(Pt.latlng),ke.setLatLngs([He,Pt.latlng])},16),wt=()=>{e.value&&(e.value.off("mousemove",ze),document.removeEventListener("mouseup",wt),e.value.dragging.enable(),ye&&Q.finalizeRotation(),s.value=null,Us(()=>{s.value=Q,y(),Z(Q)}))};e.value.on("mousemove",ze),document.addEventListener("mouseup",wt)}),Q.on("coordinates:updated",te=>{const{corners:ye,center:de}=te,We=Q.getMidPoints();Me.forEach((tt,Ze)=>tt.setLatLng(ye[Ze])),Ge.forEach((tt,Ze)=>tt.setLatLng(We[Ze])),K.setLatLng(de);const He=zt.latLng(de.lat+(ye[0].lat-de.lat)*1.2,de.lng+(ye[0].lng-de.lng)*1.2);D.setLatLng(He),ke.setLatLngs([de,He])})},T=H=>{if(!e.value||!n.value)return;y();const Q=H.getLatLngs();if(!Q||Q.length===0){console.warn("Pas de points pour la ligne");return}let ue=null;if(H instanceof Bs){const se=H.getCenter();ue=M(se,"#059669"),b.push(ue),_(ue,H,()=>{const pe=H.getLength()||0;return Ji(pe,"m","Longueur totale")}),ue.on("mousedown",pe=>{if(!e.value)return;zt.DomEvent.stopPropagation(pe),e.value.dragging.disable();let K=!0;const D=H.getLatLngs().map(te=>zt.latLng(te.lat,te.lng)),ke=pe.latlng;H instanceof Bs&&(H.off("move:end"),H.off("vertex:moved"),H.off("latlngs:updated"),H.off("properties:updated")),b.forEach((te,ye)=>{ye>0&&(te.setStyle({opacity:0,fillOpacity:0}),te.measureDiv&&(te.measureDiv.style.display="none"))});const Ge=Hf(te=>{if(!K)return;const ye=te.latlng.lng-ke.lng,de=te.latlng.lat-ke.lat,We=D.map(He=>zt.latLng(He.lat+de,He.lng+ye));zt.Polyline.prototype.setLatLngs.call(H,We),ue==null||ue.setLatLng(te.latlng)},16),ce=()=>{if(K=!1,!!e.value){if(e.value.off("mousemove",Ge),document.removeEventListener("mouseup",ce),e.value.dragging.enable(),H instanceof Bs){const te=()=>{y(),T(H)};H.on("move:end",te),H.on("vertex:moved",te),H.on("latlngs:updated",te),H.on("properties:updated",te),H.updateProperties(),ve(H,"Line")}y(),T(H)}};e.value.on("mousemove",Ge),document.addEventListener("mouseup",ce)})}if(Q.forEach((se,pe)=>{const K=M(se,"#DC2626");b.push(K),_(K,H,()=>{if(H instanceof Bs){const D=H.getLength()||0,ke=H.getLengthToVertex(pe);return[Ji(ke,"m","Distance depuis le dbut"),Ji(D,"m","Longueur totale")].join("<br>")}return""}),K.on("mousedown",D=>{if(!e.value)return;zt.DomEvent.stopPropagation(D),e.value.dragging.disable();let ke=!0;H instanceof Bs&&(H.off("move:end"),H.off("vertex:moved"),H.off("latlngs:updated"),H.off("properties:updated")),b.forEach((ce,te)=>{te!==pe+1&&(ce.setStyle({opacity:0,fillOpacity:0}),ce.measureDiv&&(ce.measureDiv.style.display="none"))});const Me=Hf(ce=>{if(!ke)return;const te=H.getLatLngs();te[pe]=ce.latlng,zt.Polyline.prototype.setLatLngs.call(H,te),K.setLatLng(ce.latlng)},16),Ge=()=>{if(ke=!1,!!e.value){if(e.value.off("mousemove",Me),document.removeEventListener("mouseup",Ge),e.value.dragging.enable(),H instanceof Bs){const ce=()=>{y(),T(H)};H.on("move:end",ce),H.on("vertex:moved",ce),H.on("latlngs:updated",ce),H.on("properties:updated",ce),H.updateProperties(),ve(H,"Line")}y(),T(H)}};e.value.on("mousemove",Me),document.addEventListener("mouseup",Ge)})}),Q.length>=2)for(let se=0;se<Q.length-1;se++){const pe=Q[se],K=Q[se+1],D=zt.latLng((pe.lat+K.lat)/2,(pe.lng+K.lng)/2),ke=M(D,"#2b6451");b.push(ke),_(ke,H,()=>{if(H instanceof Bs){const Me=H.getSegmentLengthAt(se),Ge=H.getLength()||0,ce=H.getLengthToVertex(se)+Me/2;return[Ji(Me,"m","Longueur du segment"),Ji(Me/2,"m","Demi-segment"),Ji(ce,"m","Distance depuis le dbut"),Ji(Ge,"m","Longueur totale")].join("<br>")}return""})}if(H instanceof Bs){const se=()=>{y(),T(H)};H.on("move:start",()=>{b.forEach((pe,K)=>{K>0&&(pe.setStyle({opacity:0,fillOpacity:0}),pe.measureDiv&&(pe.measureDiv.style.display="none"))})}),H.on("move:end",se),H.on("vertex:moved",se),H.on("latlngs:updated",se),H.on("properties:updated",se),b.cleanup=()=>{H.off("move:start",()=>{}),H.off("move:end",se),H.off("vertex:moved",se),H.off("latlngs:updated",se),H.off("properties:updated",se)}}},N=H=>{if(!e.value||!n.value)return;y();const Q=H.getLatLngs()[0],ue=Q.map(Ge=>[Ge.lng,Ge.lat]);ue.push(ue[0]);const se=du([ue]),pe=sc(se),K=Q.reduce((Ge,ce,te)=>{const ye=Q[(te+1)%Q.length];return Ge+ce.distanceTo(ye)},0);let D;if(typeof H.getCenter=="function")try{D=H.getCenter()}catch(Ge){console.warn("Erreur lors de la rcupration du centre du polygone via getCenter(), utilisation de la mthode alternative",Ge);const ce=sp(se);D=zt.latLng(ce.geometry.coordinates[1],ce.geometry.coordinates[0])}else{const Ge=sp(se);D=zt.latLng(Ge.geometry.coordinates[1],Ge.geometry.coordinates[0])}const ke=M(D,"#059669");b.push(ke),_(ke,H,()=>[Ji(K,"m","Primtre"),Ji(pe,"m","Surface")].join("<br>")),ke.on("mousedown",Ge=>{if(!e.value)return;zt.DomEvent.stopPropagation(Ge),e.value.dragging.disable();let ce=!0;const te=Ge.latlng,ye=[...Q];b.forEach((tt,Ze)=>{Ze>0&&tt.setStyle({opacity:0,fillOpacity:0})});const de=Hf(tt=>{if(!ce)return;const Ze=tt.latlng.lng-te.lng,et=tt.latlng.lat-te.lat,ze=ye.map(wt=>zt.latLng(wt.lat+et,wt.lng+Ze));zt.Polygon.prototype.setLatLngs.call(H,[ze]),ke.setLatLng(tt.latlng)},16),We=tt=>{ce&&de(tt)},He=()=>{if(ce=!1,!!e.value){if(e.value.off("mousemove",We),document.removeEventListener("mouseup",He),e.value.dragging.enable(),H.properties){const tt=H.getLatLngs()[0],Ze=tt.map(ze=>[ze.lng,ze.lat]);Ze.push(Ze[0]);const et=du([Ze]);H.properties.area=sc(et),H.properties.perimeter=tt.reduce((ze,wt,Pt)=>{const kt=tt[(Pt+1)%tt.length];return ze+wt.distanceTo(kt)},0),H.properties.surface=H.properties.area}y(),N(H),s.value=null,Us(()=>{s.value=H})}};e.value.on("mousemove",We),document.addEventListener("mouseup",He)}),Q.forEach((Ge,ce)=>{const te=M(Ge,"#DC2626");b.push(te),_(te,H,()=>{const ye=Q[(ce-1+Q.length)%Q.length],de=Q[(ce+1)%Q.length],We=Ge.distanceTo(ye),He=Ge.distanceTo(de);return[Ji(We,"m","Distance au point prcdent"),Ji(He,"m","Distance au point suivant"),Ji(K,"m","Primtre total"),Ji(pe,"m","Surface")].join("<br>")}),te.on("mousedown",ye=>{if(zt.DomEvent.stopPropagation(ye),!e.value)return;e.value.dragging.disable();let de=!0;ke&&(ke.setStyle({opacity:0,fillOpacity:0}),ke.measureDiv&&(ke.measureDiv.style.display="none"));const We=Hf(Ze=>{if(!de)return;Q[ce]=Ze.latlng,zt.Polygon.prototype.setLatLngs.call(H,[Q]),te.setLatLng(Ze.latlng);const et=b.slice(Q.length+1),ze=(ce-1+Q.length)%Q.length,wt=et[ze];if(wt){const kt=Q[ze],Jt=Q[ce],on=zt.latLng((kt.lat+Jt.lat)/2,(kt.lng+Jt.lng)/2);wt.setLatLng(on)}const Pt=et[ce];if(Pt){const kt=Q[ce],Jt=Q[(ce+1)%Q.length],on=zt.latLng((kt.lat+Jt.lat)/2,(kt.lng+Jt.lng)/2);Pt.setLatLng(on)}},16),He=Ze=>{de&&We(Ze)},tt=()=>{if(de=!1,!!e.value){if(e.value.off("mousemove",He),document.removeEventListener("mouseup",tt),e.value.dragging.enable(),H.properties){const Ze=H.getLatLngs()[0].map(ze=>[ze.lng,ze.lat]);Ze.push(Ze[0]);const et=du([Ze]);H.properties.area=sc(et),H.properties.perimeter=Q.reduce((ze,wt,Pt)=>{const kt=Q[(Pt+1)%Q.length];return ze+wt.distanceTo(kt)},0),H.properties.surface=H.properties.area}y(),N(H),s.value=null,Us(()=>{s.value=H})}};e.value.on("mousemove",He),document.addEventListener("mouseup",tt)})}),(()=>{const Ge=H.getLatLngs()[0];b.slice(Ge.length+1).forEach(te=>{t.value&&t.value.removeLayer(te)}),b=b.slice(0,Ge.length+1);const ce=new Array(Ge.length);for(let te=0;te<Ge.length;te++){const ye=Ge[te],de=Ge[(te+1)%Ge.length];ce[te]=$(ye,de)}ce.forEach((te,ye)=>{const de=M(te,"#2b6451");b.push(de),_(de,H,()=>{const We=Ge[ye],He=Ge[(ye+1)%Ge.length],tt=We.distanceTo(He);return[Ji(tt,"m","Longueur du segment"),Ji(K,"m","Primtre total"),Ji(pe,"m","Surface")].join("<br>")}),de.on("mousedown",We=>{if(!e.value)return;zt.DomEvent.stopPropagation(We),e.value.dragging.disable();let He=!0;const tt=ye;ke&&(ke.setStyle({opacity:0,fillOpacity:0}),ke.measureDiv&&(ke.measureDiv.style.display="none"));const Ze=[...H.getLatLngs()[0]];Ze.splice((tt+1)%Ze.length,0,te),H.setLatLngs([Ze]),y(),N(H);const et=tt+1,ze=1+et,wt=et<b.length-1?b[ze]:null;if(wt){const Pt=Jt=>{if(!He)return;const on=H.getLatLngs()[0];on[et]=Jt.latlng,H.setLatLngs([on]),wt.setLatLng(Jt.latlng);const cn=b.slice(1+on.length),Ke=(et-1+on.length)%on.length,ot=et;if(cn[Ke]){const rt=on[Ke],$t=on[et],Qt=zt.latLng((rt.lat+$t.lat)/2,(rt.lng+$t.lng)/2);cn[Ke].setLatLng(Qt)}if(cn[ot]){const rt=on[et],$t=on[(et+1)%on.length],Qt=zt.latLng((rt.lat+$t.lat)/2,(rt.lng+$t.lng)/2);cn[ot].setLatLng(Qt)}},kt=()=>{if(He=!1,!!e.value){if(e.value.off("mousemove",Pt),document.removeEventListener("mouseup",kt),e.value.dragging.enable(),H.properties){const Jt=H.getLatLngs()[0].map(cn=>[cn.lng,cn.lat]);Jt.push(Jt[0]);const on=du([Jt]);H.properties.area=sc(on),H.properties.perimeter=H.getLatLngs()[0].reduce((cn,Ke,ot,rt)=>{const $t=rt[(ot+1)%rt.length];return cn+Ke.distanceTo($t)},0)}y(),N(H),s.value=null,Us(()=>{s.value=H})}};e.value.on("mousemove",Pt),document.addEventListener("mouseup",kt)}else e.value.dragging.enable(),y(),N(H)})})})()},O=H=>{if(!e.value||!n.value)return;y();const Q=H.getLatLng(),ue=M(Q,"#059669");b.push(ue),_(ue,H,()=>`Position: ${Q.lat.toFixed(6)}, ${Q.lng.toFixed(6)}`),ue.on("mousedown",se=>{if(!e.value)return;zt.DomEvent.stopPropagation(se),e.value.dragging.disable(),H.startMoving();let pe=!0;const D=Hf(Me=>{pe&&(ue.setLatLng(Me.latlng),H.setLatLng(Me.latlng))},16),ke=()=>{e.value&&(e.value.off("mousemove",D),document.removeEventListener("mouseup",ke),e.value.dragging.enable(),pe=!1,H.finishMoving(),H.updateProperties(),s.value=null,Us(()=>{s.value=H,y(),O(H)}))};e.value.on("mousemove",D),document.addEventListener("mouseup",ke)}),s.value=H},z=H=>{if(!(!e.value||!r.value)){console.log("[generateTempControlPoints] Gnration des points temporaires pour",{layerType:H.constructor.name,properties:H.properties}),r.value.clearLayers();try{if(H instanceof ga)H.generateHelperPoints(e.value);else if(H instanceof zh){if("getLatLng"in H&&typeof H.getLatLng=="function"){const Q=H.getLatLng();if(Q){const ue=zt.circleMarker(Q,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ue)}}}else if(H instanceof $c){const Q=H.getLatLng();if(Q){const ue=zt.circleMarker(Q,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ue)}}else if(H instanceof vf||H instanceof zt.Polygon){let Q=[];if("getLatLngs"in H){const se=H.getLatLngs();if(Array.isArray(se)&&se.length>0){const pe=se[0];Array.isArray(pe)?Q=pe:pe instanceof zt.LatLng&&(Q=se)}}let ue=null;if(H instanceof vf&&typeof H.getCenter=="function")ue=H.getCenter();else if(Q.length>0){const se=Q.map(D=>[D.lng,D.lat]);se.push(se[0]);const pe=du([se]),K=sp(pe);ue=zt.latLng(K.geometry.coordinates[1],K.geometry.coordinates[0])}if(ue){const se=zt.circleMarker(ue,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(se)}Q.forEach(se=>{if(se){const pe=zt.circleMarker(se,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(pe)}});for(let se=0;se<Q.length;se++){const pe=Q[se],K=Q[(se+1)%Q.length];if(pe&&K){const D=zt.latLng((pe.lat+K.lat)/2,(pe.lng+K.lng)/2),ke=zt.circleMarker(D,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ke)}}}console.log("[generateTempControlPoints] Points temporaires gnrs",{count:r.value.getLayers().length})}catch(Q){console.error("[generateTempControlPoints] Erreur lors de la gnration des points temporaires:",Q)}}},q=H=>{console.log("Nombre total de couches:",H.length);const Q=H.filter(D=>{var Ge;if(!D)return!1;let ke=0,Me={width:0,height:0};if(D instanceof zt.Circle){ke=Math.PI*Math.pow(D.getRadius(),2);const ce=D.getRadius();console.log(`
Forme dtecte: Circle`),console.log(`- Surface propre: ${ke.toFixed(2)} m`),console.log(`- Rayon: ${ce.toFixed(2)} m`),console.log("- Angle: Cercle complet (360)")}else if(D instanceof ga||D instanceof zt.Rectangle){const ce=D.getBounds(),te=ce.getSouthWest(),ye=ce.getNorthEast(),de=pu([[te.lng,te.lat],[ye.lng,te.lat]]),We=pu([[te.lng,te.lat],[te.lng,ye.lat]]);Me.width=Gf(de,{units:"meters"}),Me.height=Gf(We,{units:"meters"}),ke=Me.width*Me.height,console.log(`
Forme dtecte: Rectangle`),console.log(`- Surface propre: ${ke.toFixed(2)} m`),console.log(`- Largeur: ${Me.width.toFixed(2)} m`),console.log(`- Hauteur: ${Me.height.toFixed(2)} m`)}else if(((Ge=D.properties)==null?void 0:Ge.type)==="Semicircle"){const ce=D.getStartAngle(),te=D.getStopAngle(),ye=(te-ce+360)%360,de=D.getRadius();ke=Math.PI*Math.pow(de,2)*ye/360,console.log(`
Forme dtecte: Semicircle`),console.log(`- Surface propre: ${ke.toFixed(2)} m`),console.log(`- Rayon: ${de.toFixed(2)} m`),console.log(`- Angle de dbut: ${ce.toFixed(2)}`),console.log(`- Angle de fin: ${te.toFixed(2)}`),console.log(`- Angle d'ouverture: ${ye.toFixed(2)}`)}return ke>0});if(Q.length===0)return 0;const ue=new Set,se=[];for(const D of Q)if(!ue.has(D)){const ke=ie(Q,D);ke.length>0&&(se.push(ke),ke.forEach(Me=>ue.add(Me)))}console.log(`
Nombre de groupes de formes connectes: ${se.length}`);const pe=se.map((D,ke)=>{console.log(`
Calcul pour le groupe ${ke+1} (${D.length} formes):`);const Me=D.map(de=>{var We,He,tt;try{let Ze;if(de instanceof zt.Circle){const et=de.getLatLng(),ze=de.getRadius();Ze=J7([et.lng,et.lat],ze/1e3,{units:"kilometers",steps:256});const wt=sc(Ze),Pt=((We=de.properties)==null?void 0:We.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${ze.toFixed(2)}m`),console.log(`- Surface proprit: ${Pt.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${wt.toFixed(2)}m`),Ze}else if(de instanceof ga||de instanceof zt.Rectangle){const et=de.getBounds(),ze=et.getSouthWest(),wt=et.getNorthEast(),Pt=zt.latLng(wt.lat,ze.lng),kt=zt.latLng(ze.lat,wt.lng),Jt=[[ze.lng,ze.lat],[kt.lng,kt.lat],[wt.lng,wt.lat],[Pt.lng,Pt.lat],[ze.lng,ze.lat]];Ze=du([Jt]);const on=sc(Ze),cn=pu([[ze.lng,ze.lat],[wt.lng,ze.lat]]),Ke=pu([[ze.lng,ze.lat],[ze.lng,wt.lat]]),ot=Gf(cn,{units:"meters"}),rt=Gf(Ke,{units:"meters"}),$t=ot*rt;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${ot.toFixed(2)}m`),console.log(`- Hauteur: ${rt.toFixed(2)}m`),console.log(`- Surface thorique: ${$t.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${on.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs($t-on).toFixed(2)}m (${(Math.abs($t-on)/$t*100).toFixed(2)}%)`),Ze}else if(((He=de.properties)==null?void 0:He.type)==="Semicircle"){const et=de.getCenter(),ze=de.getRadius(),wt=de.getStartAngle(),Pt=de.getStopAngle(),kt=[],Jt=64;kt.push([et.lng,et.lat]);for(let Ke=0;Ke<=Jt;Ke++){const rt=(wt+(Pt-wt+360)%360*Ke/Jt)*Math.PI/180,$t=ze*Math.cos(rt),Rn=ze*Math.sin(rt)/111319.9,Ln=$t/(111319.9*Math.cos(et.lat*Math.PI/180));kt.push([et.lng+Ln,et.lat+Rn])}kt.push([et.lng,et.lat]),Ze=du([kt]);const on=sc(Ze),cn=((tt=de.properties)==null?void 0:tt.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${ze.toFixed(2)}m`),console.log(`- Surface proprit: ${cn.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${on.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs(cn-on).toFixed(2)}m (${(Math.abs(cn-on)/cn*100).toFixed(2)}%)`),Ze}return null}catch(Ze){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",Ze),null}}).filter(de=>de!==null);if(Me.length===0)return 0;const Ge=Me.map(de=>{const We=sc(de);return console.log(`Surface individuelle: ${We.toFixed(2)}m`),We});let ce=0;for(let de=0;de<Me.length;de++)for(let We=de+1;We<Me.length;We++)try{const He=R7([Me[de],Me[We]]),tt=yI(He);if(tt){const Ze=sc(tt);ce+=Ze,console.log(`Intersection entre formes ${de+1} et ${We+1}: ${Ze.toFixed(2)}m`)}}catch(He){console.error(`Erreur lors du calcul d'intersection entre les formes ${de+1} et ${We+1}:`,He)}const te=Ge.reduce((de,We)=>de+We,0),ye=te-ce;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${ke+1}:`),console.log(`- Surface totale (somme): ${te.toFixed(2)}m`),console.log(`- Surface d'intersection: ${ce.toFixed(2)}m`),console.log(`- Surface d'irrigation finale: ${ye.toFixed(2)}m`),ye}),K=Math.max(...pe);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${K.toFixed(2)}m`),K},G=()=>{u.value&&(e.value.removeLayer(u.value),u.value=null)},oe=(H,Q)=>{if(!e.value)return;G();const ue=Q?ie(H,Q):H;if(u.value||(u.value=zt.layerGroup().addTo(e.value)),ue.forEach(se=>{var K;const pe=(K=se.properties)==null?void 0:K.type;if(pe==="Circle"||pe==="Semicircle"){const D=se.getLatLng(),ke=se.getRadius(),Me=zt.circle(D,{radius:ke,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:zt.canvas({padding:.5})}),Ge=zt.circle(D,{radius:ke,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:zt.canvas({padding:.5})});u.value&&(u.value.addLayer(Ge),u.value.addLayer(Me))}else if(pe==="Rectangle"||pe==="Polygon"){const D=se.getLatLngs(),ke=zt.polygon(D,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:zt.canvas({padding:.5})}),Me=zt.polygon(D,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:zt.canvas({padding:.5})});u.value&&(u.value.addLayer(Me),u.value.addLayer(ke))}}),Q&&ue.length>1&&e.value){const se=zt.latLngBounds([]);ue.forEach(D=>{D.getBounds?se.extend(D.getBounds()):D.getLatLng&&se.extend(D.getLatLng())});const pe=se.getCenter(),K=zt.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connect</div>").setLatLng(pe);u.value&&u.value.addLayer(zt.marker(pe,{opacity:0,interactive:!1}).bindTooltip(K).openTooltip())}},ie=(H,Q)=>{if(!Q)return[];const ue=new Set,se=[Q],pe=[Q];for(Q._leaflet_id!==void 0&&ue.add(Q._leaflet_id);se.length>0;){const K=se.shift();for(const D of H){if(D===K||ue.has(D._leaflet_id))continue;_e(K,D)&&(pe.push(D),se.push(D),ue.add(D._leaflet_id))}}return pe},_e=(H,Q)=>{let ue=null,se=null;if(H.getBounds&&typeof H.getBounds=="function")ue=H.getBounds();else if(H.getLatLng&&H.getRadius){const pe=H.getLatLng(),K=H.getRadius();ue=zt.latLngBounds([pe.lat-K/111e3,pe.lng-K/(111e3*Math.cos(pe.lat*Math.PI/180))],[pe.lat+K/111e3,pe.lng+K/(111e3*Math.cos(pe.lat*Math.PI/180))])}if(Q.getBounds&&typeof Q.getBounds=="function")se=Q.getBounds();else if(Q.getLatLng&&Q.getRadius){const pe=Q.getLatLng(),K=Q.getRadius();se=zt.latLngBounds([pe.lat-K/111e3,pe.lng-K/(111e3*Math.cos(pe.lat*Math.PI/180))],[pe.lat+K/111e3,pe.lng+K/(111e3*Math.cos(pe.lat*Math.PI/180))])}return!(!ue||!se||!ue.intersects(se))},Ce=(H,Q)=>{var se;const ue=ie(H,Q);return ue.length===1&&(se=Q.properties)!=null&&se.surface?Q.properties.surface:q(ue)},Te=H=>{var se,pe,K,D,ke,Me,Ge,ce,te;const Q=H.layer;(se=n.value)==null||se.addLayer(Q);let ue="unknown";if(Q instanceof zt.Circle?ue=i.value==="Semicircle"?"Semicircle":"Circle":Q instanceof zt.Rectangle?ue="Rectangle":Q instanceof zt.Polygon?ue="Polygon":Q instanceof zt.Polyline&&!(Q instanceof zt.Polygon)&&(ue="Line"),Q.properties=k(Q,ue),Q.properties||(Q.properties={}),Q.properties.category||(Q.properties.category="forages"),Q.properties.accessLevel||(Q.properties.accessLevel="visitor"),Q._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=Q,console.log("[useMapDrawing] Input layer:",{type:ue,instanceof:{Circle:Q instanceof zt.Circle,Rectangle:Q instanceof zt.Rectangle,Polygon:Q instanceof zt.Polygon,Polyline:Q instanceof zt.Polyline},options:Q.options,properties:Q.properties,_dbId:Q._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:Q,type:ue,properties:Q.properties}})),Q.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:ue,isSelected:s.value===Q}),(!s.value||s.value!==Q)&&z(Q)}),Q.on("mouseout",()=>{var ye;console.log("[mouseout] Sortie de la forme",{type:ue,isSelected:s.value===Q}),(!s.value||s.value!==Q)&&((ye=r.value)==null||ye.clearLayers())}),ue==="Semicircle")console.log("Conversion en demi-cercle dsactive selon les exigences");else if(ue==="Circle"){(pe=n.value)==null||pe.removeLayer(Q);const ye=new zh(Q.getLatLng(),{radius:Q.getRadius(),...Q.options});ye.properties={...k(ye,"Circle"),type:"Circle"},Object.defineProperty(ye,"name",{value:ye.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(ye,"name"),directName:ye.name,propertiesName:ye.properties.name,nameIsEnumerable:Object.keys(ye).includes("name"),allProperties:Object.keys(ye.properties),allKeys:Object.keys(ye)}),(K=n.value)==null||K.addLayer(ye),s.value=ye,U(ye)}else if(ue==="Rectangle"){(D=n.value)==null||D.removeLayer(Q);const ye=new ga(Q.getBounds(),{...Q.options});ye.updateProperties(),(ke=n.value)==null||ke.addLayer(ye),s.value=ye,Z(ye)}else if(Q instanceof zt.Polygon){const ye=Q.getLatLngs()[0],de=new vf([ye],{...Q.options});de.updateProperties(),(Me=n.value)==null||Me.removeLayer(Q),(Ge=n.value)==null||Ge.addLayer(de),s.value=de,N(de)}else if(Q instanceof Bs)T(Q);else if(Q instanceof zt.Polyline&&!(Q instanceof zt.Polygon)){const ye=Q.getLatLngs(),de=new Bs(ye,{...Q.options});de.updateProperties(),(ce=n.value)==null||ce.removeLayer(Q),(te=n.value)==null||te.addLayer(de),s.value=de,T(de)}vl("Cliquez sur la forme pour afficher les points de contrle")},J=()=>{e.value&&(e.value.off("pm:create"),e.value.on("pm:create",Te))};return{map:e,featureGroup:n,controlPointsGroup:t,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:I,setDrawingTool:Y,updateShapeStyle:ee,updateShapeProperties:he,updateTextFixedSize:F,adjustView:R,clearActiveControlPoints:y,calculateTotalCoverageArea:q,showCoverageOverlay:oe,hideCoverageOverlay:G,calculateConnectedCoverageArea:Ce,getConnectedShapes:ie}}function TR(){const{isEnabled:e,startMeasure:n}=vd(),t=Ft(null),r=Ft(""),i=Ft("Hybride"),s=Ft(null),o=n("createBaseMaps","useMapState"),u={Hybride:zt.layerGroup([zt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:zt.latLngBounds(zt.latLng(41.333,-5.566),zt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6}),zt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:20,tileSize:256,zoomOffset:0,bounds:zt.latLngBounds(zt.latLng(41.333,-5.566),zt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6})]),Cadastre:zt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte  IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:zt.latLngBounds(zt.latLng(41.333,-5.566),zt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0}),IGN:zt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Carte IGN  IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:zt.latLngBounds(zt.latLng(41.333,-5.566),zt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0})};o();const f=dn.createPerformanceTracker(b=>{dn.measure("initMap:setOptions",()=>{t.value=b,b.options.zoomSnap=.25,b.options.zoomDelta=.25,b.options.wheelPxPerZoomLevel=100,b.options.zoomAnimation=!0,b.options.fadeAnimation=!0,b.options.markerZoomAnimation=!0,b.options.minZoom=2,b.options.maxZoom=19,b.options.scrollWheelZoom=!0,b.options.doubleClickZoom=!0;const y=zt.latLngBounds(zt.latLng(-90,-180),zt.latLng(90,180));b.setMaxBounds(y),b.options.maxBoundsViscosity=1,b.options.trackResize=!0;let M=null;b.getZoom(),b.on("zoomstart",()=>{b.getZoom(),b.options.zoomAnimation=!1,b.options.markerZoomAnimation=!1}),b.on("zoomend",()=>{M&&clearTimeout(M),M=setTimeout(()=>{setTimeout(()=>{b.options.zoomAnimation=!0,b.options.markerZoomAnimation=!0,b.invalidateSize({animate:!1,pan:!1});const F=b.getBounds(),I=b.options.maxBounds;I&&!F.intersects(I)&&b.panInsideBounds(I,{animate:!1})},250)},250)});const k=b._zoomAnimation;k&&(b._zoomAnimation=function(F){try{this._animatingZoom||k.call(this,F)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}})},"useMapState"),dn.measure("initMap:addInitialLayer",()=>{b&&b.whenReady(()=>{const y=i.value;if(u[y]){if(console.log(`Initialisation de la couche de base: ${y}`),s.value&&b.hasLayer(s.value))try{b.removeLayer(s.value),console.log("Couche active prcdente supprime")}catch(M){console.warn("Erreur lors de la suppression de la couche active prcdente:",M)}s.value=u[y];try{s.value.addTo(b),console.log(`Couche ${y} ajoute  la carte`)}catch(M){console.error(`Erreur lors de l'ajout de la couche ${y}:`,M)}}else console.warn(`Couche de base non disponible: ${y}`)})},"useMapState"),b.on("baselayerchange",y=>{const M=n("baselayerchange","useMapState",{layer:y.name});i.value=y.name,s.value=y.layer,M()}),e.value&&(b.on("movestart",()=>{n("mapMove","useMapState",{startCenter:b.getCenter()})}),b.on("moveend",()=>{n("mapMoveEnd","useMapState",{endCenter:b.getCenter()})()}),b.on("tileloadstart",()=>{n("tileLoad","useMapState")}),b.on("tileload",()=>{n("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),d=dn.createAsyncPerformanceTracker(async b=>{if(!t.value||!u[b]){console.warn(`Impossible de changer la carte de base: ${t.value?"type de carte non disponible":"carte non initialise"}`);return}try{if(i.value===b)return;console.log(`Changement de carte: ${i.value} -> ${b}`);const y=t.value,M=y.getCenter(),k=y.getZoom();y.options.zoomAnimation=!1,y.options.fadeAnimation=!1,y.options.markerZoomAnimation=!1;const F=u[b];if(s.value&&y.hasLayer(s.value))try{y.removeLayer(s.value),console.log(`Couche prcdente ${i.value} supprime`)}catch(I){console.warn("Erreur lors de la suppression de la couche active:",I)}try{F instanceof zt.LayerGroup,F.addTo(y),console.log(`Nouvelle couche ${b} ajoute`)}catch(I){console.error("Erreur lors de l'ajout de la nouvelle couche:",I);try{y.hasLayer(F)&&y.removeLayer(F),F.addTo(y),console.log(`Rcupration: couche ${b} rajoute`)}catch(R){throw console.error("chec de la rcupration:",R),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=F,i.value=b;try{y.setView(M,k,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue rinitialise: centre=${M}, zoom=${k}`)}catch(I){console.warn("Erreur lors de la rinitialisation de la vue:",I)}try{y.invalidateSize({animate:!1,pan:!1})}catch(I){console.warn("Erreur lors du rafrachissement de la carte:",I)}setTimeout(()=>{y.options.zoomAnimation=!0,y.options.fadeAnimation=!0,y.options.markerZoomAnimation=!0,console.log("Animations restaures")},500)}catch(y){if(console.error("Erreur lors du changement de carte de base:",y),t.value)try{const M=t.value;M.eachLayer(F=>{(F instanceof zt.TileLayer||F instanceof zt.LayerGroup)&&M.removeLayer(F)});const k=u[b];k.addTo(M),s.value=k,i.value=b,M.options.zoomAnimation=!0,M.options.fadeAnimation=!0,M.options.markerZoomAnimation=!0,M.invalidateSize({animate:!1,pan:!1}),console.log("Rcupration effectue aprs erreur")}catch(M){console.error("Erreur lors de la rcupration aprs chec:",M)}}},"changeBaseMap","useMapState"),m=dn.createAsyncPerformanceTracker(async()=>{if(!(!t.value||!r.value))try{const b=await dn.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),y=await dn.measureAsync("searchLocation:parseResponse",async()=>await b.json(),"useMapState");y&&y.length>0&&dn.measure("searchLocation:updateView",()=>{const{lat:M,lon:k}=y[0];t.value.setView([M,k],13,{animate:i.value!=="Cadastre"})},"useMapState")}catch(b){console.error("Erreur lors de la recherche de localisation:",b)}},"searchLocation","useMapState");return{map:t,searchQuery:r,currentBaseMap:i,baseMaps:u,initMap:f,searchLocation:m,changeBaseMap:d,cleanup:()=>{const b=n("cleanup","useMapState");t.value&&(t.value.remove(),t.value=null),s.value&&(s.value=null),b()},isPerformanceEnabled:e}}const py=Dp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:vd()}),getters:{getPlanById:e=>n=>e.plans.find(t=>t.id===n),hasUnsavedChanges:e=>e.unsavedChanges,getCurrentPlanHistory:e=>e.planHistory},actions:{async fetchPlans(){var t,r;const e=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),n=ta();this.loading=!0;try{let i="/plans/";const s={};n.isSalarie?s.salarie=(t=n.user)==null?void 0:t.id:n.isVisiteur&&(s.visiteur=(r=n.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>Vn.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchPlansWithDetails(){var t,r;const e=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),n=ta();this.loading=!0;try{let i="/plans/";const s={include_details:!0};n.isSalarie?s.salarie=(t=n.user)==null?void 0:t.id:n.isVisiteur&&(s.visiteur=(r=n.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>Vn.get(i,{params:s}),"IrrigationStore"),u=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(f=>({...f,entreprise:typeof f.entreprise=="object"?f.entreprise:null,salarie:typeof f.salarie=="object"?f.salarie:null,visiteur:typeof f.visiteur=="object"?f.visiteur:null})),"IrrigationStore");return this.plans=u,{data:u}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,e()}},async fetchClientPlans(e){this.loading=!0;try{return(await mg.getVisiteurPlans(e)).data}catch(n){throw this.error="Erreur lors du chargement des plans du client",n}finally{this.loading=!1}},async createPlan(e){var r;const n=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const t=Yl();try{const i=ta();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(e={...e,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...e,entreprise:e.entreprise?typeof e.entreprise=="object"&&e.entreprise&&"id"in e.entreprise?e.entreprise.id:Number(e.entreprise):null,salarie:e.salarie?typeof e.salarie=="object"&&e.salarie&&"id"in e.salarie?e.salarie.id:Number(e.salarie):null,visiteur:e.visiteur?typeof e.visiteur=="object"&&e.visiteur&&"id"in e.visiteur?e.visiteur.id:Number(e.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>mg.createPlan(s),"IrrigationStore");return this.plans.push(o.data),t.success(`Le plan "${o.data.nom}" a t cr avec succs`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,t.error(`Erreur lors de la cration du plan : ${s}`),i}finally{this.loading=!1,n()}},async createPlanForClient(e,n){this.clearCurrentPlan(),this.loading=!0;try{const t={...e,visiteur:n},r=await mg.createPlanForVisiteur(t);return this.plans.push(r.data),r.data}catch(t){const r=t instanceof Error?t.message:String(t);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la cration du plan pour le client",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(e){const n=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement  sauvegarder"),n();return}this.loading=!0;try{const t=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return Vn.patch(`/plans/${e}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===e);r!==-1&&(this.plans[r]=t.data),((i=this.currentPlan)==null?void 0:i.id)===e&&(this.currentPlan=t.data)},"IrrigationStore"),this.unsavedChanges=!1,t.data}catch(t){throw console.error("[IrrigationStore][savePlan] ERREUR:",t),this.error="Erreur lors de la sauvegarde du plan",t}finally{this.loading=!1,n()}},async updatePlanDetails(e,n){const t=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=Yl();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:u,...f}=n,d={...f};return s!==void 0&&(d.visiteur_id=s),o!==void 0&&(d.salarie_id=o),u!==void 0&&(d.entreprise_id=u),Vn.patch(`/plans/${e}/`,d)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===e&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===e);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise  jour du plan:",i),r.error(`Erreur lors de la mise  jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{t()}},async fetchPlanHistory(e){this.loading=!0;try{const n=await Vn.get(`/plans/${e}/historique/`);return this.planHistory=n.data,n.data}catch(n){throw this.error="Erreur lors de la rcupration de l'historique",n}finally{this.loading=!1}},async restorePlanVersion(e,n){var t;this.loading=!0;try{const r=await Vn.post(`/plans/${e}/restaurer/`,{version_id:n});((t=this.currentPlan)==null?void 0:t.id)===e&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===e);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(e){this.currentPlan=e,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(e){var t;this.loading=!0;const n=Yl();try{const r=this.plans.find(i=>i.id===e);await mg.deletePlan(e),this.plans=this.plans.filter(i=>i.id!==e),((t=this.currentPlan)==null?void 0:t.id)===e&&this.clearCurrentPlan(),n.success(`Le plan "${(r==null?void 0:r.nom)||""}" a t supprim avec succs`)}catch(r){throw this.error="Erreur lors de la suppression du plan",n.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),NR={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},DR={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},IR={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},OR={key:0,class:"mb-4"},BR={key:0,class:"animate-pulse"},RR=["value"],FR={key:1,class:"mb-4"},jR={key:0,class:"animate-pulse"},$R=["disabled"],zR={value:null},UR=["value"],VR={key:2,class:"mb-4"},GR={key:0,class:"animate-pulse"},HR=["disabled"],qR={value:null},WR=["value"],ZR={class:"mb-4"},KR={class:"mb-6"},YR={class:"flex justify-end space-x-3"},JR=["disabled"],XR={key:0},QR={key:1},px=Qo({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(e,{expose:n,emit:t}){function r(O){return O?typeof O=="object"?O.id:O:null}function i(O){if(O===null)throw new Error("Invalid ID");return O}const s=e,o=t,u=ta(),f=py(),d=fd(),m=Ft(!1),_=Ft(null),b=Ft([]),y=Ft([]),M=Ft([]),k=Ft(null),F=Ft(null),I=Ft(!1),R=Ft(!1),Y=Ft(!1),ee=Ft({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),he=rr(()=>{var O,z,q;return((O=u.user)==null?void 0:O.user_type)==="admin"?ee.value.nom.trim()&&ee.value.entreprise&&ee.value.salarie:((z=u.user)==null?void 0:z.user_type)==="entreprise"?ee.value.nom.trim()&&ee.value.salarie:(((q=u.user)==null?void 0:q.user_type)==="salarie",ee.value.nom.trim())});oo(()=>ee.value.entreprise,async O=>{if(!s.modelValue)return;ee.value.salarie=null,ee.value.visiteur=null,y.value=[];const z=r(O);console.log("[NewPlanModal] Entreprise slectionne:",z),z?await fe(z):b.value=[]}),oo(()=>ee.value.salarie,async O=>{if(!s.modelValue)return;ee.value.visiteur=null;const z=r(O);z?await ve(z):y.value=[]}),oo(()=>s.modelValue,O=>{var z,q,G;O?((z=u.user)==null?void 0:z.user_type)==="admin"?T():((q=u.user)==null?void 0:q.user_type)==="entreprise"?fe(u.user.id):((G=u.user)==null?void 0:G.user_type)==="salarie"&&ve(u.user.id):(ee.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},k.value=null,F.value=null,y.value=[],b.value=[],M.value=[],_.value=null)});async function fe(O){I.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",O);const z=await el.getUsers({role:"SALARIE",entreprise:O});console.log("[NewPlanModal] Rponse salaries:",z.data),b.value=z.data}catch(z){console.error("[NewPlanModal] Error loading salaries:",z),b.value=[]}finally{I.value=!1}}async function ve(O){R.value=!0;try{const z=await el.getUsers({role:"VISITEUR",salarie:O});y.value=z.data}catch(z){console.error("[NewPlanModal] Error loading visiteurs:",z),y.value=[]}finally{R.value=!1}}async function $(O){s.modelValue&&(k.value=O,ee.value.salarie=O.id,await ve(O.id),o("salarieSelected",O))}function U(O){s.modelValue&&(F.value=O,ee.value.visiteur=O.id,o("visiteurSelected",O))}function Z(){o("update:modelValue",!1),ee.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},k.value=null,F.value=null,y.value=[],_.value=null}async function T(){Y.value=!0;try{const O=await u.fetchEnterprises();M.value=O}catch(O){console.error("[NewPlanModal] Error loading entreprises:",O),M.value=[]}finally{Y.value=!1}}async function N(){var O,z;_.value=null,m.value=!0;try{const q={nom:ee.value.nom.trim(),description:ee.value.description.trim()},G=u.user;if(!G)throw new Error("User not found");if(G.user_type==="admin"){if(!ee.value.entreprise||!ee.value.salarie)throw new Error("Missing required fields");q.entreprise=i(r(ee.value.entreprise)),q.salarie=i(r(ee.value.salarie)),ee.value.visiteur&&(q.visiteur=ee.value.visiteur)}else if(G.user_type==="entreprise"){if(!ee.value.salarie)throw new Error("Missing required fields");q.entreprise=G.id,q.salarie=i(r(ee.value.salarie)),ee.value.visiteur&&(q.visiteur=ee.value.visiteur)}else if(G.user_type==="salarie"){if(!G.entreprise)throw new Error("Missing required fields");q.entreprise=G.entreprise.id,q.salarie=G.id,ee.value.visiteur&&(q.visiteur=ee.value.visiteur)}else if(G.user_type==="visiteur"){if(!G.entreprise||!G.salarie)throw new Error("Missing required fields");q.entreprise=G.entreprise.id,q.salarie=G.salarie.id,q.visiteur=G.id}console.log("Donnes du plan  crer:",q),f.clearCurrentPlan(),d.setCurrentPlan(null);const oe=await f.createPlan(q);o("created",oe.id),Z()}catch(q){console.error("[NewPlanModal] Error creating plan:",q),console.error("Response data:",(O=q.response)==null?void 0:O.data);let G="Une erreur est survenue lors de la cration du plan";(z=q.response)!=null&&z.data&&(typeof q.response.data=="object"?G=Object.entries(q.response.data).map(([oe,ie])=>Array.isArray(ie)?`${oe}: ${ie.join(", ")}`:`${oe}: ${ie}`).join(`
`):typeof q.response.data=="string"&&(G=q.response.data)),_.value=G}finally{m.value=!1}}return n({salaries:b,visiteurs:y,selectedSalarie:k,selectedVisiteur:F,loadSalaries:fe,loadVisiteurs:ve,selectSalarie:$,selectVisiteur:U}),(O,z)=>{var q,G,oe,ie;return O.modelValue?(Fe(),Ve("div",NR,[S("div",DR,[S("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[z[6]||(z[6]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),S("button",{onClick:Z,class:"text-gray-400 hover:text-gray-500"},z[5]||(z[5]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",IR,[Kn(u).isAdmin?(Fe(),Ve("div",OR,[z[9]||(z[9]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),Y.value?(Fe(),Ve("div",BR,z[7]||(z[7]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Nn((Fe(),Ve("select",{key:1,"onUpdate:modelValue":z[0]||(z[0]=_e=>ee.value.entreprise=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[z[8]||(z[8]=S("option",{value:null},"Slectionnez une entreprise",-1)),(Fe(!0),Ve(Mn,null,br(M.value,_e=>(Fe(),Ve("option",{key:_e.id,value:_e.id},It(Kn(Hl)(_e)),9,RR))),128))],512)),[[so,ee.value.entreprise]])])):nn("",!0),((q=Kn(u).user)==null?void 0:q.user_type)==="admin"||((G=Kn(u).user)==null?void 0:G.user_type)==="entreprise"?(Fe(),Ve("div",FR,[z[11]||(z[11]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),I.value?(Fe(),Ve("div",jR,z[10]||(z[10]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Nn((Fe(),Ve("select",{key:1,id:"edit-salarie","onUpdate:modelValue":z[1]||(z[1]=_e=>ee.value.salarie=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:Kn(u).isAdmin&&!ee.value.entreprise},[S("option",zR,It(b.value.length?"Slectionnez un salarie":"Aucun salarie disponible"),1),(Fe(!0),Ve(Mn,null,br(b.value,_e=>(Fe(),Ve("option",{key:_e.id,value:_e.id},It(Kn(Hl)(_e)),9,UR))),128))],8,$R)),[[so,ee.value.salarie]])])):nn("",!0),((oe=Kn(u).user)==null?void 0:oe.user_type)!=="visiteur"?(Fe(),Ve("div",VR,[z[13]||(z[13]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),R.value?(Fe(),Ve("div",GR,z[12]||(z[12]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Nn((Fe(),Ve("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":z[2]||(z[2]=_e=>ee.value.visiteur=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!y.value.length||((ie=Kn(u).user)==null?void 0:ie.user_type)!=="salarie"&&!ee.value.salarie},[S("option",qR,It(y.value.length?"Slectionnez un visiteur":"Aucun visiteur disponible"),1),(Fe(!0),Ve(Mn,null,br(y.value,_e=>(Fe(),Ve("option",{key:_e.id,value:_e.id},It(Kn(Hl)(_e)),9,WR))),128))],8,HR)),[[so,ee.value.visiteur]])])):nn("",!0),S("div",ZR,[z[14]||(z[14]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Nn(S("input",{id:"edit-nom","onUpdate:modelValue":z[3]||(z[3]=_e=>ee.value.nom=_e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Zr,ee.value.nom]])]),S("div",KR,[z[15]||(z[15]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Nn(S("textarea",{id:"edit-description","onUpdate:modelValue":z[4]||(z[4]=_e=>ee.value.description=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Zr,ee.value.description]])]),S("div",YR,[S("button",{onClick:Z,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),S("button",{onClick:N,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!he.value||m.value},[m.value?(Fe(),Ve("span",XR,"Cration en cours...")):(Fe(),Ve("span",QR,"Crer"))],8,JR)])])])])):nn("",!0)}}});function ao(e){"@babel/helpers - typeof";return ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ao(e)}var Ra=Uint8Array,ql=Uint16Array,gy=Int32Array,r0=new Ra([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i0=new Ra([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),m1=new Ra([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gx=function(e,n){for(var t=new ql(31),r=0;r<31;++r)t[r]=n+=1<<e[r-1];for(var i=new gy(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},mx=gx(r0,2),vx=mx.b,v1=mx.r;vx[28]=258,v1[258]=28;var yx=gx(i0,0),eF=yx.b,Lb=yx.r,y1=new ql(32768);for(var Mo=0;Mo<32768;++Mo){var of=(Mo&43690)>>1|(Mo&21845)<<1;of=(of&52428)>>2|(of&13107)<<2,of=(of&61680)>>4|(of&3855)<<4,y1[Mo]=((of&65280)>>8|(of&255)<<8)>>1}var gc=function(e,n,t){for(var r=e.length,i=0,s=new ql(n);i<r;++i)e[i]&&++s[e[i]-1];var o=new ql(n);for(i=1;i<n;++i)o[i]=o[i-1]+s[i-1]<<1;var u;if(t){u=new ql(1<<n);var f=15-n;for(i=0;i<r;++i)if(e[i])for(var d=i<<4|e[i],m=n-e[i],_=o[e[i]-1]++<<m,b=_|(1<<m)-1;_<=b;++_)u[y1[_]>>f]=d}else for(u=new ql(r),i=0;i<r;++i)e[i]&&(u[i]=y1[o[e[i]-1]++]>>15-e[i]);return u},Pf=new Ra(288);for(var Mo=0;Mo<144;++Mo)Pf[Mo]=8;for(var Mo=144;Mo<256;++Mo)Pf[Mo]=9;for(var Mo=256;Mo<280;++Mo)Pf[Mo]=7;for(var Mo=280;Mo<288;++Mo)Pf[Mo]=8;var Pp=new Ra(32);for(var Mo=0;Mo<32;++Mo)Pp[Mo]=5;var tF=gc(Pf,9,0),nF=gc(Pf,9,1),rF=gc(Pp,5,0),iF=gc(Pp,5,1),sv=function(e){for(var n=e[0],t=1;t<e.length;++t)e[t]>n&&(n=e[t]);return n},Du=function(e,n,t){var r=n/8|0;return(e[r]|e[r+1]<<8)>>(n&7)&t},av=function(e,n){var t=n/8|0;return(e[t]|e[t+1]<<8|e[t+2]<<16)>>(n&7)},my=function(e){return(e+7)/8|0},_x=function(e,n,t){return(t==null||t>e.length)&&(t=e.length),new Ra(e.subarray(n,t))},oF=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Fu=function(e,n,t){var r=new Error(n||oF[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Fu),!t)throw r;return r},sF=function(e,n,t,r){var i=e.length,s=0;if(!i||n.f&&!n.l)return t||new Ra(0);var o=!t,u=o||n.i!=2,f=n.i;o&&(t=new Ra(i*3));var d=function(Me){var Ge=t.length;if(Me>Ge){var ce=new Ra(Math.max(Ge*2,Me));ce.set(t),t=ce}},m=n.f||0,_=n.p||0,b=n.b||0,y=n.l,M=n.d,k=n.m,F=n.n,I=i*8;do{if(!y){m=Du(e,_,1);var R=Du(e,_+1,3);if(_+=3,R)if(R==1)y=nF,M=iF,k=9,F=5;else if(R==2){var fe=Du(e,_,31)+257,ve=Du(e,_+10,15)+4,$=fe+Du(e,_+5,31)+1;_+=14;for(var U=new Ra($),Z=new Ra(19),T=0;T<ve;++T)Z[m1[T]]=Du(e,_+T*3,7);_+=ve*3;for(var N=sv(Z),O=(1<<N)-1,z=gc(Z,N,1),T=0;T<$;){var q=z[Du(e,_,O)];_+=q&15;var Y=q>>4;if(Y<16)U[T++]=Y;else{var G=0,oe=0;for(Y==16?(oe=3+Du(e,_,3),_+=2,G=U[T-1]):Y==17?(oe=3+Du(e,_,7),_+=3):Y==18&&(oe=11+Du(e,_,127),_+=7);oe--;)U[T++]=G}}var ie=U.subarray(0,fe),_e=U.subarray(fe);k=sv(ie),F=sv(_e),y=gc(ie,k,1),M=gc(_e,F,1)}else Fu(1);else{var Y=my(_)+4,ee=e[Y-4]|e[Y-3]<<8,he=Y+ee;if(he>i){f&&Fu(0);break}u&&d(b+ee),t.set(e.subarray(Y,he),b),n.b=b+=ee,n.p=_=he*8,n.f=m;continue}if(_>I){f&&Fu(0);break}}u&&d(b+131072);for(var Ce=(1<<k)-1,Te=(1<<F)-1,J=_;;J=_){var G=y[av(e,_)&Ce],H=G>>4;if(_+=G&15,_>I){f&&Fu(0);break}if(G||Fu(2),H<256)t[b++]=H;else if(H==256){J=_,y=null;break}else{var Q=H-254;if(H>264){var T=H-257,ue=r0[T];Q=Du(e,_,(1<<ue)-1)+vx[T],_+=ue}var se=M[av(e,_)&Te],pe=se>>4;se||Fu(3),_+=se&15;var _e=eF[pe];if(pe>3){var ue=i0[pe];_e+=av(e,_)&(1<<ue)-1,_+=ue}if(_>I){f&&Fu(0);break}u&&d(b+131072);var K=b+Q;if(b<_e){var D=s-_e,ke=Math.min(_e,K);for(D+b<0&&Fu(3);b<ke;++b)t[b]=r[D+b]}for(;b<K;++b)t[b]=t[b-_e]}}n.l=y,n.p=J,n.b=b,n.f=m,y&&(m=1,n.m=k,n.d=M,n.n=F)}while(!m);return b!=t.length&&o?_x(t,0,b):t.subarray(0,b)},Oc=function(e,n,t){t<<=n&7;var r=n/8|0;e[r]|=t,e[r+1]|=t>>8},Id=function(e,n,t){t<<=n&7;var r=n/8|0;e[r]|=t,e[r+1]|=t>>8,e[r+2]|=t>>16},lv=function(e,n){for(var t=[],r=0;r<e.length;++r)e[r]&&t.push({s:r,f:e[r]});var i=t.length,s=t.slice();if(!i)return{t:wx,l:0};if(i==1){var o=new Ra(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(he,fe){return he.f-fe.f}),t.push({s:-1,f:25001});var u=t[0],f=t[1],d=0,m=1,_=2;for(t[0]={s:-1,f:u.f+f.f,l:u,r:f};m!=i-1;)u=t[t[d].f<t[_].f?d++:_++],f=t[d!=m&&t[d].f<t[_].f?d++:_++],t[m++]={s:-1,f:u.f+f.f,l:u,r:f};for(var b=s[0].s,r=1;r<i;++r)s[r].s>b&&(b=s[r].s);var y=new ql(b+1),M=_1(t[m-1],y,0);if(M>n){var r=0,k=0,F=M-n,I=1<<F;for(s.sort(function(fe,ve){return y[ve.s]-y[fe.s]||fe.f-ve.f});r<i;++r){var R=s[r].s;if(y[R]>n)k+=I-(1<<M-y[R]),y[R]=n;else break}for(k>>=F;k>0;){var Y=s[r].s;y[Y]<n?k-=1<<n-y[Y]++-1:++r}for(;r>=0&&k;--r){var ee=s[r].s;y[ee]==n&&(--y[ee],++k)}M=n}return{t:new Ra(y),l:M}},_1=function(e,n,t){return e.s==-1?Math.max(_1(e.l,n,t+1),_1(e.r,n,t+1)):n[e.s]=t},Sb=function(e){for(var n=e.length;n&&!e[--n];);for(var t=new ql(++n),r=0,i=e[0],s=1,o=function(f){t[r++]=f},u=1;u<=n;++u)if(e[u]==i&&u!=n)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=e[u]}return{c:t.subarray(0,r),n}},Od=function(e,n){for(var t=0,r=0;r<n.length;++r)t+=e[r]*n[r];return t},bx=function(e,n,t){var r=t.length,i=my(n+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<r;++s)e[i+s+4]=t[s];return(i+4+r)*8},Eb=function(e,n,t,r,i,s,o,u,f,d,m){Oc(n,m++,t),++i[256];for(var _=lv(i,15),b=_.t,y=_.l,M=lv(s,15),k=M.t,F=M.l,I=Sb(b),R=I.c,Y=I.n,ee=Sb(k),he=ee.c,fe=ee.n,ve=new ql(19),$=0;$<R.length;++$)++ve[R[$]&31];for(var $=0;$<he.length;++$)++ve[he[$]&31];for(var U=lv(ve,7),Z=U.t,T=U.l,N=19;N>4&&!Z[m1[N-1]];--N);var O=d+5<<3,z=Od(i,Pf)+Od(s,Pp)+o,q=Od(i,b)+Od(s,k)+o+14+3*N+Od(ve,Z)+2*ve[16]+3*ve[17]+7*ve[18];if(f>=0&&O<=z&&O<=q)return bx(n,m,e.subarray(f,f+d));var G,oe,ie,_e;if(Oc(n,m,1+(q<z)),m+=2,q<z){G=gc(b,y,0),oe=b,ie=gc(k,F,0),_e=k;var Ce=gc(Z,T,0);Oc(n,m,Y-257),Oc(n,m+5,fe-1),Oc(n,m+10,N-4),m+=14;for(var $=0;$<N;++$)Oc(n,m+3*$,Z[m1[$]]);m+=3*N;for(var Te=[R,he],J=0;J<2;++J)for(var H=Te[J],$=0;$<H.length;++$){var Q=H[$]&31;Oc(n,m,Ce[Q]),m+=Z[Q],Q>15&&(Oc(n,m,H[$]>>5&127),m+=H[$]>>12)}}else G=tF,oe=Pf,ie=rF,_e=Pp;for(var $=0;$<u;++$){var ue=r[$];if(ue>255){var Q=ue>>18&31;Id(n,m,G[Q+257]),m+=oe[Q+257],Q>7&&(Oc(n,m,ue>>23&31),m+=r0[Q]);var se=ue&31;Id(n,m,ie[se]),m+=_e[se],se>3&&(Id(n,m,ue>>5&8191),m+=i0[se])}else Id(n,m,G[ue]),m+=oe[ue]}return Id(n,m,G[256]),m+oe[256]},aF=new gy([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wx=new Ra(0),lF=function(e,n,t,r,i,s){var o=s.z||e.length,u=new Ra(r+o+5*(1+Math.ceil(o/7e3))+i),f=u.subarray(r,u.length-i),d=s.l,m=(s.r||0)&7;if(n){m&&(f[0]=s.r>>3);for(var _=aF[n-1],b=_>>13,y=_&8191,M=(1<<t)-1,k=s.p||new ql(32768),F=s.h||new ql(M+1),I=Math.ceil(t/3),R=2*I,Y=function(te){return(e[te]^e[te+1]<<I^e[te+2]<<R)&M},ee=new gy(25e3),he=new ql(288),fe=new ql(32),ve=0,$=0,U=s.i||0,Z=0,T=s.w||0,N=0;U+2<o;++U){var O=Y(U),z=U&32767,q=F[O];if(k[z]=q,F[O]=z,T<=U){var G=o-U;if((ve>7e3||Z>24576)&&(G>423||!d)){m=Eb(e,f,0,ee,he,fe,$,Z,N,U-N,m),Z=ve=$=0,N=U;for(var oe=0;oe<286;++oe)he[oe]=0;for(var oe=0;oe<30;++oe)fe[oe]=0}var ie=2,_e=0,Ce=y,Te=z-q&32767;if(G>2&&O==Y(U-Te))for(var J=Math.min(b,G)-1,H=Math.min(32767,U),Q=Math.min(258,G);Te<=H&&--Ce&&z!=q;){if(e[U+ie]==e[U+ie-Te]){for(var ue=0;ue<Q&&e[U+ue]==e[U+ue-Te];++ue);if(ue>ie){if(ie=ue,_e=Te,ue>J)break;for(var se=Math.min(Te,ue-2),pe=0,oe=0;oe<se;++oe){var K=U-Te+oe&32767,D=k[K],ke=K-D&32767;ke>pe&&(pe=ke,q=K)}}}z=q,q=k[z],Te+=z-q&32767}if(_e){ee[Z++]=268435456|v1[ie]<<18|Lb[_e];var Me=v1[ie]&31,Ge=Lb[_e]&31;$+=r0[Me]+i0[Ge],++he[257+Me],++fe[Ge],T=U+ie,++ve}else ee[Z++]=e[U],++he[e[U]]}}for(U=Math.max(U,T);U<o;++U)ee[Z++]=e[U],++he[e[U]];m=Eb(e,f,d,ee,he,fe,$,Z,N,U-N,m),d||(s.r=m&7|f[m/8|0]<<3,m-=7,s.h=F,s.p=k,s.i=U,s.w=T)}else{for(var U=s.w||0;U<o+d;U+=65535){var ce=U+65535;ce>=o&&(f[m/8|0]=d,ce=o),m=bx(f,m+1,e.subarray(U,ce))}s.i=o}return _x(u,0,r+my(m)+i)},xx=function(){var e=1,n=0;return{p:function(t){for(var r=e,i=n,s=t.length|0,o=0;o!=s;){for(var u=Math.min(o+2655,s);o<u;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,n=i},d:function(){return e%=65521,n%=65521,(e&255)<<24|(e&65280)<<8|(n&255)<<8|n>>8}}},uF=function(e,n,t,r,i){if(!i&&(i={l:1},n.dictionary)){var s=n.dictionary.subarray(-32768),o=new Ra(s.length+e.length);o.set(s),o.set(e,s.length),e=o,i.w=s.length}return lF(e,n.level==null?6:n.level,n.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+n.mem,t,r,i)},Lx=function(e,n,t){for(;t;++n)e[n]=t,t>>>=8},cF=function(e,n){var t=n.level,r=t==0?0:t<6?1:t==9?3:2;if(e[0]=120,e[1]=r<<6|(n.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,n.dictionary){var i=xx();i.p(n.dictionary),Lx(e,2,i.d())}},fF=function(e,n){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Fu(6,"invalid zlib data"),(e[1]>>5&1)==1&&Fu(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function b1(e,n){n||(n={});var t=xx();t.p(e);var r=uF(e,n,n.dictionary?6:2,4);return cF(r,n),Lx(r,r.length-4,t.d()),r}function hF(e,n){return sF(e.subarray(fF(e),-4),{i:2},n,n)}var dF=typeof TextDecoder<"u"&&new TextDecoder,pF=0;try{dF.decode(wx,{stream:!0}),pF=1}catch{}var Dr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function uv(){Dr.console&&typeof Dr.console.log=="function"&&Dr.console.log.apply(Dr.console,arguments)}var vo={log:uv,warn:function(e){Dr.console&&(typeof Dr.console.warn=="function"?Dr.console.warn.apply(Dr.console,arguments):uv.call(null,arguments))},error:function(e){Dr.console&&(typeof Dr.console.error=="function"?Dr.console.error.apply(Dr.console,arguments):uv(e))}};function cv(e,n,t){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Zf(r.response,n,t)},r.onerror=function(){vo.error("could not download file")},r.send()}function Cb(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function _g(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var ap,w1,Zf=Dr.saveAs||((typeof window>"u"?"undefined":ao(window))!=="object"||window!==Dr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,n,t){var r=Dr.URL||Dr.webkitURL,i=document.createElement("a");n=n||e.name||"download",i.download=n,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?Cb(i.href)?cv(e,n,t):_g(i,i.target="_blank"):_g(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){_g(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,t){if(n=n||e.name||"download",typeof e=="string")if(Cb(e))cv(e,n,t);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){_g(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:ao(s)!=="object"&&(vo.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,t),n)}:function(e,n,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return cv(e,n,t);var i=e.type==="application/octet-stream",s=/constructor/i.test(Dr.HTMLElement)||Dr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":ao(FileReader))==="object"){var u=new FileReader;u.onloadend=function(){var m=u.result;m=o?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},u.readAsDataURL(e)}else{var f=Dr.URL||Dr.webkitURL,d=f.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Sx(e){var n;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(u){return[parseInt(u[1]),parseInt(u[2]),parseInt(u[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(u){return[parseInt(u[1],16),parseInt(u[2],16),parseInt(u[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(u){return[parseInt(u[1]+u[1],16),parseInt(u[2]+u[2],16),parseInt(u[3]+u[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(e);o&&(n=s(o),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var u=this.r.toString(16),f=this.g.toString(16),d=this.b.toString(16);return u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),d.length==1&&(d="0"+d),"#"+u+f+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function fv(e,n){var t=e[0],r=e[1],i=e[2],s=e[3];t=Aa(t,r,i,s,n[0],7,-680876936),s=Aa(s,t,r,i,n[1],12,-389564586),i=Aa(i,s,t,r,n[2],17,606105819),r=Aa(r,i,s,t,n[3],22,-1044525330),t=Aa(t,r,i,s,n[4],7,-176418897),s=Aa(s,t,r,i,n[5],12,1200080426),i=Aa(i,s,t,r,n[6],17,-1473231341),r=Aa(r,i,s,t,n[7],22,-45705983),t=Aa(t,r,i,s,n[8],7,1770035416),s=Aa(s,t,r,i,n[9],12,-1958414417),i=Aa(i,s,t,r,n[10],17,-42063),r=Aa(r,i,s,t,n[11],22,-1990404162),t=Aa(t,r,i,s,n[12],7,1804603682),s=Aa(s,t,r,i,n[13],12,-40341101),i=Aa(i,s,t,r,n[14],17,-1502002290),t=ka(t,r=Aa(r,i,s,t,n[15],22,1236535329),i,s,n[1],5,-165796510),s=ka(s,t,r,i,n[6],9,-1069501632),i=ka(i,s,t,r,n[11],14,643717713),r=ka(r,i,s,t,n[0],20,-373897302),t=ka(t,r,i,s,n[5],5,-701558691),s=ka(s,t,r,i,n[10],9,38016083),i=ka(i,s,t,r,n[15],14,-660478335),r=ka(r,i,s,t,n[4],20,-405537848),t=ka(t,r,i,s,n[9],5,568446438),s=ka(s,t,r,i,n[14],9,-1019803690),i=ka(i,s,t,r,n[3],14,-187363961),r=ka(r,i,s,t,n[8],20,1163531501),t=ka(t,r,i,s,n[13],5,-1444681467),s=ka(s,t,r,i,n[2],9,-51403784),i=ka(i,s,t,r,n[7],14,1735328473),t=Ta(t,r=ka(r,i,s,t,n[12],20,-1926607734),i,s,n[5],4,-378558),s=Ta(s,t,r,i,n[8],11,-2022574463),i=Ta(i,s,t,r,n[11],16,1839030562),r=Ta(r,i,s,t,n[14],23,-35309556),t=Ta(t,r,i,s,n[1],4,-1530992060),s=Ta(s,t,r,i,n[4],11,1272893353),i=Ta(i,s,t,r,n[7],16,-155497632),r=Ta(r,i,s,t,n[10],23,-1094730640),t=Ta(t,r,i,s,n[13],4,681279174),s=Ta(s,t,r,i,n[0],11,-358537222),i=Ta(i,s,t,r,n[3],16,-722521979),r=Ta(r,i,s,t,n[6],23,76029189),t=Ta(t,r,i,s,n[9],4,-640364487),s=Ta(s,t,r,i,n[12],11,-421815835),i=Ta(i,s,t,r,n[15],16,530742520),t=Na(t,r=Ta(r,i,s,t,n[2],23,-995338651),i,s,n[0],6,-198630844),s=Na(s,t,r,i,n[7],10,1126891415),i=Na(i,s,t,r,n[14],15,-1416354905),r=Na(r,i,s,t,n[5],21,-57434055),t=Na(t,r,i,s,n[12],6,1700485571),s=Na(s,t,r,i,n[3],10,-1894986606),i=Na(i,s,t,r,n[10],15,-1051523),r=Na(r,i,s,t,n[1],21,-2054922799),t=Na(t,r,i,s,n[8],6,1873313359),s=Na(s,t,r,i,n[15],10,-30611744),i=Na(i,s,t,r,n[6],15,-1560198380),r=Na(r,i,s,t,n[13],21,1309151649),t=Na(t,r,i,s,n[4],6,-145523070),s=Na(s,t,r,i,n[11],10,-1120210379),i=Na(i,s,t,r,n[2],15,718787259),r=Na(r,i,s,t,n[9],21,-343485551),e[0]=yf(t,e[0]),e[1]=yf(r,e[1]),e[2]=yf(i,e[2]),e[3]=yf(s,e[3])}function o0(e,n,t,r,i,s){return n=yf(yf(n,e),yf(r,s)),yf(n<<i|n>>>32-i,t)}function Aa(e,n,t,r,i,s,o){return o0(n&t|~n&r,e,n,i,s,o)}function ka(e,n,t,r,i,s,o){return o0(n&r|t&~r,e,n,i,s,o)}function Ta(e,n,t,r,i,s,o){return o0(n^t^r,e,n,i,s,o)}function Na(e,n,t,r,i,s,o){return o0(t^(n|~r),e,n,i,s,o)}function Ex(e){var n,t=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)fv(r,gF(e.substring(n-64,n)));e=e.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)i[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(fv(r,i),n=0;n<16;n++)i[n]=0;return i[14]=8*t,fv(r,i),r}function gF(e){var n,t=[];for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}ap=Dr.atob.bind(Dr),w1=Dr.btoa.bind(Dr);var Pb="0123456789abcdef".split("");function mF(e){for(var n="",t=0;t<4;t++)n+=Pb[e>>8*t+4&15]+Pb[e>>8*t&15];return n}function vF(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function x1(e){return Ex(e).map(vF).join("")}var yF=function(e){for(var n=0;n<e.length;n++)e[n]=mF(e[n]);return e.join("")}(Ex("hello"))!="5d41402abc4b2a76b9719d911017c592";function yf(e,n){if(yF){var t=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(t>>16)<<16|65535&t}return e+n&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function L1(e,n){var t,r,i,s;if(e!==t){for(var o=(i=e,s=1+(256/e.length>>0),new Array(s+1).join(i)),u=[],f=0;f<256;f++)u[f]=f;var d=0;for(f=0;f<256;f++){var m=u[f];d=(d+m+o.charCodeAt(f))%256,u[f]=u[d],u[d]=m}t=e,r=u}else u=r;var _=n.length,b=0,y=0,M="";for(f=0;f<_;f++)y=(y+(m=u[b=(b+1)%256]))%256,u[b]=u[y],u[y]=m,o=u[(u[b]+u[y])%256],M+=String.fromCharCode(n.charCodeAt(f)^o);return M}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Mb={print:4,modify:8,copy:16,"annot-forms":32};function Uh(e,n,t,r){this.v=1,this.r=2;var i=192;e.forEach(function(u){if(Mb.perm!==void 0)throw new Error("Invalid permission: "+u);i+=Mb[u]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(n+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=x1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=L1(this.encryptionKey,this.padding)}function Vh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var n="",t=e.length,r=0;r<t;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?n+="#"+("0"+i.toString(16)).slice(-2):n+=e[r]}return n}function Ab(e){if(ao(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(t)||(n[t]={});var s=Math.random().toString(35);return n[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in n)if(n[r][t])return delete n[r][t],Object.keys(n[r]).length===0&&delete n[r],!0;return!1},this.publish=function(t){if(n.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in n[t]){var o=n[t][s];try{o[0].apply(e,r)}catch(u){Dr.console&&vo.error("jsPDF PubSub Error",u.message,u)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function bm(e){if(!(this instanceof bm))return new bm(e);var n="opacity,stroke-opacity".split(",");for(var t in e)e.hasOwnProperty(t)&&n.indexOf(t)>=0&&(this[t]=e[t]);this.id="",this.objectNumber=-1}function Cx(e,n){this.gState=e,this.matrix=n,this.id="",this.objectNumber=-1}function Yf(e,n,t,r,i){if(!(this instanceof Yf))return new Yf(e,n,t,r,i);this.type=e==="axial"?2:3,this.coords=n,this.colors=t,Cx.call(this,r,i)}function qh(e,n,t,r,i){if(!(this instanceof qh))return new qh(e,n,t,r,i);this.boundingBox=e,this.xStep=n,this.yStep=t,this.stream="",this.cloneIndex=0,Cx.call(this,r,i)}function kr(e){var n,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],u=1,f=16,d="S",m=null;ao(e=e||{})==="object"&&(t=e.orientation,r=e.unit||r,i=e.format||i,s=e.compress||e.compressPdf||s,(m=e.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),u=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(n=e.precision),e.floatPrecision!==void 0&&(f=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var _=e.putOnlyUsedFonts||!1,b={},y={internal:{},__private__:{}};y.__private__.PubSub=Ab;var M="1.3",k=y.__private__.getPdfVersion=function(){return M};y.__private__.setPdfVersion=function(B){M=B};var F={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};y.__private__.getPageFormats=function(){return F};var I=y.__private__.getPageFormat=function(B){return F[B]};i=i||"a4";var R={COMPAT:"compat",ADVANCED:"advanced"},Y=R.COMPAT;function ee(){this.saveGraphicsState(),de(new vn(rt,0,0,-rt,0,_a()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),d="n",Y=R.ADVANCED}function he(){this.restoreGraphicsState(),d="S",Y=R.COMPAT}var fe=y.__private__.combineFontStyleAndFontWeight=function(B,be){if(B=="bold"&&be=="normal"||B=="bold"&&be==400||B=="normal"&&be=="italic"||B=="bold"&&be=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return be&&(B=be==400||be==="normal"?B==="italic"?"italic":"normal":be!=700&&be!=="bold"||B!=="normal"?(be==700?"bold":be)+""+B:"bold"),B};y.advancedAPI=function(B){var be=Y===R.COMPAT;return be&&ee.call(this),typeof B!="function"||(B(this),be&&he.call(this)),this},y.compatAPI=function(B){var be=Y===R.ADVANCED;return be&&he.call(this),typeof B!="function"||(B(this),be&&ee.call(this)),this},y.isAdvancedAPI=function(){return Y===R.ADVANCED};var ve,$=function(B){if(Y!==R.ADVANCED)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},U=y.roundToPrecision=y.__private__.roundToPrecision=function(B,be){var Ye=n||be;if(isNaN(B)||isNaN(Ye))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(Ye).replace(/0+$/,"")};ve=y.hpf=y.__private__.hpf=typeof f=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return U(B,f)}:f==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return U(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return U(B,16)};var Z=y.f2=y.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return U(B,2)},T=y.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return U(B,3)},N=y.scale=y.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return Y===R.COMPAT?B*rt:Y===R.ADVANCED?B:void 0},O=function(B){return Y===R.COMPAT?_a()-B:Y===R.ADVANCED?B:void 0},z=function(B){return N(O(B))};y.__private__.setPrecision=y.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(n=parseInt(B,10))};var q,G="00000000000000000000000000000000",oe=y.__private__.getFileId=function(){return G},ie=y.__private__.setFileId=function(B){return G=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():G.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(ji=new Uh(m.userPermissions,m.userPassword,m.ownerPassword,G)),G};y.setFileId=function(B){return ie(B),this},y.getFileId=function(){return oe()};var _e=y.__private__.convertDateToPDFDate=function(B){var be=B.getTimezoneOffset(),Ye=be<0?"+":"-",ut=Math.floor(Math.abs(be/60)),Lt=Math.abs(be%60),Vt=[Ye,Q(ut),"'",Q(Lt),"'"].join("");return["D:",B.getFullYear(),Q(B.getMonth()+1),Q(B.getDate()),Q(B.getHours()),Q(B.getMinutes()),Q(B.getSeconds()),Vt].join("")},Ce=y.__private__.convertPDFDateToDate=function(B){var be=parseInt(B.substr(2,4),10),Ye=parseInt(B.substr(6,2),10)-1,ut=parseInt(B.substr(8,2),10),Lt=parseInt(B.substr(10,2),10),Vt=parseInt(B.substr(12,2),10),hn=parseInt(B.substr(14,2),10);return new Date(be,Ye,ut,Lt,Vt,hn,0)},Te=y.__private__.setCreationDate=function(B){var be;if(B===void 0&&(B=new Date),B instanceof Date)be=_e(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");be=B}return q=be},J=y.__private__.getCreationDate=function(B){var be=q;return B==="jsDate"&&(be=Ce(q)),be};y.setCreationDate=function(B){return Te(B),this},y.getCreationDate=function(B){return J(B)};var H,Q=y.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},ue=y.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},se=0,pe=[],K=[],D=0,ke=[],Me=[],Ge=!1,ce=K,te=function(){se=0,D=0,K=[],pe=[],ke=[],Tt=mt(),Fn=mt()};y.__private__.setCustomOutputDestination=function(B){Ge=!0,ce=B};var ye=function(B){Ge||(ce=B)};y.__private__.resetCustomOutputDestination=function(){Ge=!1,ce=K};var de=y.__private__.out=function(B){return B=B.toString(),D+=B.length+1,ce.push(B),ce},We=y.__private__.write=function(B){return de(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},He=y.__private__.getArrayBuffer=function(B){for(var be=B.length,Ye=new ArrayBuffer(be),ut=new Uint8Array(Ye);be--;)ut[be]=B.charCodeAt(be);return Ye},tt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];y.__private__.getStandardFonts=function(){return tt};var Ze=e.fontSize||16;y.__private__.setFontSize=y.setFontSize=function(B){return Ze=Y===R.ADVANCED?B/rt:B,this};var et,ze=y.__private__.getFontSize=y.getFontSize=function(){return Y===R.COMPAT?Ze:Ze*rt},wt=e.R2L||!1;y.__private__.setR2L=y.setR2L=function(B){return wt=B,this},y.__private__.getR2L=y.getR2L=function(){return wt};var Pt,kt=y.__private__.setZoomMode=function(B){var be=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))et=B;else if(isNaN(B)){if(be.indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');et=B}else et=parseInt(B,10)};y.__private__.getZoomMode=function(){return et};var Jt,on=y.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');Pt=B};y.__private__.getPageMode=function(){return Pt};var cn=y.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');Jt=B};y.__private__.getLayoutMode=function(){return Jt},y.__private__.setDisplayMode=y.setDisplayMode=function(B,be,Ye){return kt(B),cn(be),on(Ye),this};var Ke={title:"",subject:"",author:"",keywords:"",creator:""};y.__private__.getDocumentProperty=function(B){if(Object.keys(Ke).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ke[B]},y.__private__.getDocumentProperties=function(){return Ke},y.__private__.setDocumentProperties=y.setProperties=y.setDocumentProperties=function(B){for(var be in Ke)Ke.hasOwnProperty(be)&&B[be]&&(Ke[be]=B[be]);return this},y.__private__.setDocumentProperty=function(B,be){if(Object.keys(Ke).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ke[B]=be};var ot,rt,$t,Qt,Rn,Ln={},Dn={},ar=[],En={},jn={},An={},Yn={},wr=null,Or=0,gr=[],oi=new Ab(y),ft=e.hotfixes||[],Qe={},Ut={},xn=[],vn=function B(be,Ye,ut,Lt,Vt,hn){if(!(this instanceof B))return new B(be,Ye,ut,Lt,Vt,hn);isNaN(be)&&(be=1),isNaN(Ye)&&(Ye=0),isNaN(ut)&&(ut=0),isNaN(Lt)&&(Lt=1),isNaN(Vt)&&(Vt=0),isNaN(hn)&&(hn=0),this._matrix=[be,Ye,ut,Lt,Vt,hn]};Object.defineProperty(vn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(vn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(vn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(vn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(vn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(vn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(vn.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(vn.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(vn.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(vn.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(vn.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(vn.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(vn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vn.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ve).join(B)},vn.prototype.multiply=function(B){var be=B.sx*this.sx+B.shy*this.shx,Ye=B.sx*this.shy+B.shy*this.sy,ut=B.shx*this.sx+B.sy*this.shx,Lt=B.shx*this.shy+B.sy*this.sy,Vt=B.tx*this.sx+B.ty*this.shx+this.tx,hn=B.tx*this.shy+B.ty*this.sy+this.ty;return new vn(be,Ye,ut,Lt,Vt,hn)},vn.prototype.decompose=function(){var B=this.sx,be=this.shy,Ye=this.shx,ut=this.sy,Lt=this.tx,Vt=this.ty,hn=Math.sqrt(B*B+be*be),In=(B/=hn)*Ye+(be/=hn)*ut;Ye-=B*In,ut-=be*In;var $n=Math.sqrt(Ye*Ye+ut*ut);return In/=$n,B*(ut/=$n)<be*(Ye/=$n)&&(B=-B,be=-be,In=-In,hn=-hn),{scale:new vn(hn,0,0,$n,0,0),translate:new vn(1,0,0,1,Lt,Vt),rotate:new vn(B,be,-be,B,0,0),skew:new vn(1,0,In,1,0,0)}},vn.prototype.toString=function(B){return this.join(" ")},vn.prototype.inversed=function(){var B=this.sx,be=this.shy,Ye=this.shx,ut=this.sy,Lt=this.tx,Vt=this.ty,hn=1/(B*ut-be*Ye),In=ut*hn,$n=-be*hn,or=-Ye*hn,_r=B*hn;return new vn(In,$n,or,_r,-In*Lt-or*Vt,-$n*Lt-_r*Vt)},vn.prototype.applyToPoint=function(B){var be=B.x*this.sx+B.y*this.shx+this.tx,Ye=B.x*this.shy+B.y*this.sy+this.ty;return new ko(be,Ye)},vn.prototype.applyToRectangle=function(B){var be=this.applyToPoint(B),Ye=this.applyToPoint(new ko(B.x+B.w,B.y+B.h));return new Hs(be.x,be.y,Ye.x-be.x,Ye.y-be.y)},vn.prototype.clone=function(){var B=this.sx,be=this.shy,Ye=this.shx,ut=this.sy,Lt=this.tx,Vt=this.ty;return new vn(B,be,Ye,ut,Lt,Vt)},y.Matrix=vn;var bn=y.matrixMult=function(B,be){return be.multiply(B)},qt=new vn(1,0,0,1,0,0);y.unitMatrix=y.identityMatrix=qt;var Hn=function(B,be){if(!jn[B]){var Ye=(be instanceof Yf?"Sh":"P")+(Object.keys(En).length+1).toString(10);be.id=Ye,jn[B]=Ye,En[Ye]=be,oi.publish("addPattern",be)}};y.ShadingPattern=Yf,y.TilingPattern=qh,y.addShadingPattern=function(B,be){return $("addShadingPattern()"),Hn(B,be),this},y.beginTilingPattern=function(B){$("beginTilingPattern()"),qs(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},y.endTilingPattern=function(B,be){$("endTilingPattern()"),be.stream=Me[H].join(`
`),Hn(B,be),oi.publish("endTilingPattern",be),xn.pop().restore()};var St=y.__private__.newObject=function(){var B=mt();return wn(B,!0),B},mt=y.__private__.newObjectDeferred=function(){return se++,pe[se]=function(){return D},se},wn=function(B,be){return be=typeof be=="boolean"&&be,pe[B]=D,be&&de(B+" 0 obj"),B},ei=y.__private__.newAdditionalObject=function(){var B={objId:mt(),content:""};return ke.push(B),B},Tt=mt(),Fn=mt(),Qn=y.__private__.decodeColorString=function(B){var be=B.split(" ");if(be.length!==2||be[1]!=="g"&&be[1]!=="G")be.length===5&&(be[4]==="k"||be[4]==="K")&&(be=[(1-be[0])*(1-be[3]),(1-be[1])*(1-be[3]),(1-be[2])*(1-be[3]),"r"]);else{var Ye=parseFloat(be[0]);be=[Ye,Ye,Ye,"r"]}for(var ut="#",Lt=0;Lt<3;Lt++)ut+=("0"+Math.floor(255*parseFloat(be[Lt])).toString(16)).slice(-2);return ut},Mi=y.__private__.encodeColorString=function(B){var be;typeof B=="string"&&(B={ch1:B});var Ye=B.ch1,ut=B.ch2,Lt=B.ch3,Vt=B.ch4,hn=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ye=="string"&&Ye.charAt(0)!=="#"){var In=new Sx(Ye);if(In.ok)Ye=In.toHex();else if(!/^\d*\.?\d*$/.test(Ye))throw new Error('Invalid color "'+Ye+'" passed to jsPDF.encodeColorString.')}if(typeof Ye=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ye)&&(Ye="#"+Ye[1]+Ye[1]+Ye[2]+Ye[2]+Ye[3]+Ye[3]),typeof Ye=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ye)){var $n=parseInt(Ye.substr(1),16);Ye=$n>>16&255,ut=$n>>8&255,Lt=255&$n}if(ut===void 0||Vt===void 0&&Ye===ut&&ut===Lt)if(typeof Ye=="string")be=Ye+" "+hn[0];else switch(B.precision){case 2:be=Z(Ye/255)+" "+hn[0];break;case 3:default:be=T(Ye/255)+" "+hn[0]}else if(Vt===void 0||ao(Vt)==="object"){if(Vt&&!isNaN(Vt.a)&&Vt.a===0)return be=["1.","1.","1.",hn[1]].join(" ");if(typeof Ye=="string")be=[Ye,ut,Lt,hn[1]].join(" ");else switch(B.precision){case 2:be=[Z(Ye/255),Z(ut/255),Z(Lt/255),hn[1]].join(" ");break;default:case 3:be=[T(Ye/255),T(ut/255),T(Lt/255),hn[1]].join(" ")}}else if(typeof Ye=="string")be=[Ye,ut,Lt,Vt,hn[2]].join(" ");else switch(B.precision){case 2:be=[Z(Ye),Z(ut),Z(Lt),Z(Vt),hn[2]].join(" ");break;case 3:default:be=[T(Ye),T(ut),T(Lt),T(Vt),hn[2]].join(" ")}return be},Sr=y.__private__.getFilters=function(){return o},Pr=y.__private__.putStream=function(B){var be=(B=B||{}).data||"",Ye=B.filters||Sr(),ut=B.alreadyAppliedFilters||[],Lt=B.addLength1||!1,Vt=be.length,hn=B.objectId,In=function(po){return po};if(m!==null&&hn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(In=ji.encryptor(hn,0));var $n={};Ye===!0&&(Ye=["FlateEncode"]);var or=B.additionalKeyValues||[],_r=($n=kr.API.processDataByFilters!==void 0?kr.API.processDataByFilters(be,Ye):{data:be,reverseChain:[]}).reverseChain+(Array.isArray(ut)?ut.join(" "):ut.toString());if($n.data.length!==0&&(or.push({key:"Length",value:$n.data.length}),Lt===!0&&or.push({key:"Length1",value:Vt})),_r.length!=0)if(_r.split("/").length-1==1)or.push({key:"Filter",value:_r});else{or.push({key:"Filter",value:"["+_r+"]"});for(var zr=0;zr<or.length;zr+=1)if(or[zr].key==="DecodeParms"){for(var Hi=[],di=0;di<$n.reverseChain.split("/").length-1;di+=1)Hi.push("null");Hi.push(or[zr].value),or[zr].value="["+Hi.join(" ")+"]"}}de("<<");for(var bi=0;bi<or.length;bi++)de("/"+or[bi].key+" "+or[bi].value);de(">>"),$n.data.length!==0&&(de("stream"),de(In($n.data)),de("endstream"))},dr=y.__private__.putPage=function(B){var be=B.number,Ye=B.data,ut=B.objId,Lt=B.contentsObjId;wn(ut,!0),de("<</Type /Page"),de("/Parent "+B.rootDictionaryObjId+" 0 R"),de("/Resources "+B.resourceDictionaryObjId+" 0 R"),de("/MediaBox ["+parseFloat(ve(B.mediaBox.bottomLeftX))+" "+parseFloat(ve(B.mediaBox.bottomLeftY))+" "+ve(B.mediaBox.topRightX)+" "+ve(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&de("/CropBox ["+ve(B.cropBox.bottomLeftX)+" "+ve(B.cropBox.bottomLeftY)+" "+ve(B.cropBox.topRightX)+" "+ve(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&de("/BleedBox ["+ve(B.bleedBox.bottomLeftX)+" "+ve(B.bleedBox.bottomLeftY)+" "+ve(B.bleedBox.topRightX)+" "+ve(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&de("/TrimBox ["+ve(B.trimBox.bottomLeftX)+" "+ve(B.trimBox.bottomLeftY)+" "+ve(B.trimBox.topRightX)+" "+ve(B.trimBox.topRightY)+"]"),B.artBox!==null&&de("/ArtBox ["+ve(B.artBox.bottomLeftX)+" "+ve(B.artBox.bottomLeftY)+" "+ve(B.artBox.topRightX)+" "+ve(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&de("/UserUnit "+B.userUnit),oi.publish("putPage",{objId:ut,pageContext:gr[be],pageNumber:be,page:Ye}),de("/Contents "+Lt+" 0 R"),de(">>"),de("endobj");var Vt=Ye.join(`
`);return Y===R.ADVANCED&&(Vt+=`
Q`),wn(Lt,!0),Pr({data:Vt,filters:Sr(),objectId:Lt}),de("endobj"),ut},Ai=y.__private__.putPages=function(){var B,be,Ye=[];for(B=1;B<=Or;B++)gr[B].objId=mt(),gr[B].contentsObjId=mt();for(B=1;B<=Or;B++)Ye.push(dr({number:B,data:Me[B],objId:gr[B].objId,contentsObjId:gr[B].contentsObjId,mediaBox:gr[B].mediaBox,cropBox:gr[B].cropBox,bleedBox:gr[B].bleedBox,trimBox:gr[B].trimBox,artBox:gr[B].artBox,userUnit:gr[B].userUnit,rootDictionaryObjId:Tt,resourceDictionaryObjId:Fn}));wn(Tt,!0),de("<</Type /Pages");var ut="/Kids [";for(be=0;be<Or;be++)ut+=Ye[be]+" 0 R ";de(ut+"]"),de("/Count "+Or),de(">>"),de("endobj"),oi.publish("postPutPages")},xr=function(B){oi.publish("putFont",{font:B,out:de,newObject:St,putStream:Pr}),B.isAlreadyPutted!==!0&&(B.objectNumber=St(),de("<<"),de("/Type /Font"),de("/BaseFont /"+Vh(B.postScriptName)),de("/Subtype /Type1"),typeof B.encoding=="string"&&de("/Encoding /"+B.encoding),de("/FirstChar 32"),de("/LastChar 255"),de(">>"),de("endobj"))},Gr=function(){for(var B in Ln)Ln.hasOwnProperty(B)&&(_===!1||_===!0&&b.hasOwnProperty(B))&&xr(Ln[B])},Ir=function(B){B.objectNumber=St();var be=[];be.push({key:"Type",value:"/XObject"}),be.push({key:"Subtype",value:"/Form"}),be.push({key:"BBox",value:"["+[ve(B.x),ve(B.y),ve(B.x+B.width),ve(B.y+B.height)].join(" ")+"]"}),be.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var Ye=B.pages[1].join(`
`);Pr({data:Ye,additionalKeyValues:be,objectId:B.objectNumber}),de("endobj")},tn=function(){for(var B in Qe)Qe.hasOwnProperty(B)&&Ir(Qe[B])},zi=function(B,be){var Ye,ut=[],Lt=1/(be-1);for(Ye=0;Ye<1;Ye+=Lt)ut.push(Ye);if(ut.push(1),B[0].offset!=0){var Vt={offset:0,color:B[0].color};B.unshift(Vt)}if(B[B.length-1].offset!=1){var hn={offset:1,color:B[B.length-1].color};B.push(hn)}for(var In="",$n=0,or=0;or<ut.length;or++){for(Ye=ut[or];Ye>B[$n+1].offset;)$n++;var _r=B[$n].offset,zr=(Ye-_r)/(B[$n+1].offset-_r),Hi=B[$n].color,di=B[$n+1].color;In+=ue(Math.round((1-zr)*Hi[0]+zr*di[0]).toString(16))+ue(Math.round((1-zr)*Hi[1]+zr*di[1]).toString(16))+ue(Math.round((1-zr)*Hi[2]+zr*di[2]).toString(16))}return In.trim()},Bi=function(B,be){be||(be=21);var Ye=St(),ut=zi(B.colors,be),Lt=[];Lt.push({key:"FunctionType",value:"0"}),Lt.push({key:"Domain",value:"[0.0 1.0]"}),Lt.push({key:"Size",value:"["+be+"]"}),Lt.push({key:"BitsPerSample",value:"8"}),Lt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Lt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pr({data:ut,additionalKeyValues:Lt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ye}),de("endobj"),B.objectNumber=St(),de("<< /ShadingType "+B.type),de("/ColorSpace /DeviceRGB");var Vt="/Coords ["+ve(parseFloat(B.coords[0]))+" "+ve(parseFloat(B.coords[1]))+" ";B.type===2?Vt+=ve(parseFloat(B.coords[2]))+" "+ve(parseFloat(B.coords[3])):Vt+=ve(parseFloat(B.coords[2]))+" "+ve(parseFloat(B.coords[3]))+" "+ve(parseFloat(B.coords[4]))+" "+ve(parseFloat(B.coords[5])),de(Vt+="]"),B.matrix&&de("/Matrix ["+B.matrix.toString()+"]"),de("/Function "+Ye+" 0 R"),de("/Extend [true true]"),de(">>"),de("endobj")},Qi=function(B,be){var Ye=mt(),ut=St();be.push({resourcesOid:Ye,objectOid:ut}),B.objectNumber=ut;var Lt=[];Lt.push({key:"Type",value:"/Pattern"}),Lt.push({key:"PatternType",value:"1"}),Lt.push({key:"PaintType",value:"1"}),Lt.push({key:"TilingType",value:"1"}),Lt.push({key:"BBox",value:"["+B.boundingBox.map(ve).join(" ")+"]"}),Lt.push({key:"XStep",value:ve(B.xStep)}),Lt.push({key:"YStep",value:ve(B.yStep)}),Lt.push({key:"Resources",value:Ye+" 0 R"}),B.matrix&&Lt.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),Pr({data:B.stream,additionalKeyValues:Lt,objectId:B.objectNumber}),de("endobj")},ti=function(B){var be;for(be in En)En.hasOwnProperty(be)&&(En[be]instanceof Yf?Bi(En[be]):En[be]instanceof qh&&Qi(En[be],B))},Br=function(B){for(var be in B.objectNumber=St(),de("<<"),B)switch(be){case"opacity":de("/ca "+Z(B[be]));break;case"stroke-opacity":de("/CA "+Z(B[be]))}de(">>"),de("endobj")},ci=function(){var B;for(B in An)An.hasOwnProperty(B)&&Br(An[B])},mr=function(){for(var B in de("/XObject <<"),Qe)Qe.hasOwnProperty(B)&&Qe[B].objectNumber>=0&&de("/"+B+" "+Qe[B].objectNumber+" 0 R");oi.publish("putXobjectDict"),de(">>")},Si=function(){ji.oid=St(),de("<<"),de("/Filter /Standard"),de("/V "+ji.v),de("/R "+ji.r),de("/U <"+ji.toHexString(ji.U)+">"),de("/O <"+ji.toHexString(ji.O)+">"),de("/P "+ji.P),de(">>"),de("endobj")},gs=function(){for(var B in de("/Font <<"),Ln)Ln.hasOwnProperty(B)&&(_===!1||_===!0&&b.hasOwnProperty(B))&&de("/"+B+" "+Ln[B].objectNumber+" 0 R");de(">>")},va=function(){if(Object.keys(En).length>0){for(var B in de("/Shading <<"),En)En.hasOwnProperty(B)&&En[B]instanceof Yf&&En[B].objectNumber>=0&&de("/"+B+" "+En[B].objectNumber+" 0 R");oi.publish("putShadingPatternDict"),de(">>")}},Rr=function(B){if(Object.keys(En).length>0){for(var be in de("/Pattern <<"),En)En.hasOwnProperty(be)&&En[be]instanceof y.TilingPattern&&En[be].objectNumber>=0&&En[be].objectNumber<B&&de("/"+be+" "+En[be].objectNumber+" 0 R");oi.publish("putTilingPatternDict"),de(">>")}},mn=function(){if(Object.keys(An).length>0){var B;for(B in de("/ExtGState <<"),An)An.hasOwnProperty(B)&&An[B].objectNumber>=0&&de("/"+B+" "+An[B].objectNumber+" 0 R");oi.publish("putGStateDict"),de(">>")}},Zn=function(B){wn(B.resourcesOid,!0),de("<<"),de("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),gs(),va(),Rr(B.objectOid),mn(),mr(),de(">>"),de("endobj")},Ei=function(){var B=[];Gr(),ci(),tn(),ti(B),oi.publish("putResources"),B.forEach(Zn),Zn({resourcesOid:Fn,objectOid:Number.MAX_SAFE_INTEGER}),oi.publish("postPutResources")},Ri=function(){oi.publish("putAdditionalObjects");for(var B=0;B<ke.length;B++){var be=ke[B];wn(be.objId,!0),de(be.content),de("endobj")}oi.publish("postPutAdditionalObjects")},Fi=function(B){Dn[B.fontName]=Dn[B.fontName]||{},Dn[B.fontName][B.fontStyle]=B.id},jo=function(B,be,Ye,ut,Lt){var Vt={id:"F"+(Object.keys(Ln).length+1).toString(10),postScriptName:B,fontName:be,fontStyle:Ye,encoding:ut,isStandardFont:Lt||!1,metadata:{}};return oi.publish("addFont",{font:Vt,instance:this}),Ln[Vt.id]=Vt,Fi(Vt),Vt.id},cr=function(B){for(var be=0,Ye=tt.length;be<Ye;be++){var ut=jo.call(this,B[be][0],B[be][1],B[be][2],tt[be][3],!0);_===!1&&(b[ut]=!0);var Lt=B[be][0].split("-");Fi({id:ut,fontName:Lt[0],fontStyle:Lt[1]||""})}oi.publish("addFonts",{fonts:Ln,dictionary:Dn})},Gn=function(B){return B.foo=function(){try{return B.apply(this,arguments)}catch(ut){var be=ut.stack||"";~be.indexOf(" at ")&&(be=be.split(" at ")[1]);var Ye="Error in function "+be.split(`
`)[0].split("<")[0]+": "+ut.message;if(!Dr.console)throw new Error(Ye);Dr.console.error(Ye,ut),Dr.alert&&alert(Ye)}},B.foo.bar=B,B.foo},Ms=function(B,be){var Ye,ut,Lt,Vt,hn,In,$n,or,_r;if(Lt=(be=be||{}).sourceEncoding||"Unicode",hn=be.outputEncoding,(be.autoencode||hn)&&Ln[ot].metadata&&Ln[ot].metadata[Lt]&&Ln[ot].metadata[Lt].encoding&&(Vt=Ln[ot].metadata[Lt].encoding,!hn&&Ln[ot].encoding&&(hn=Ln[ot].encoding),!hn&&Vt.codePages&&(hn=Vt.codePages[0]),typeof hn=="string"&&(hn=Vt[hn]),hn)){for($n=!1,In=[],Ye=0,ut=B.length;Ye<ut;Ye++)(or=hn[B.charCodeAt(Ye)])?In.push(String.fromCharCode(or)):In.push(B[Ye]),In[Ye].charCodeAt(0)>>8&&($n=!0);B=In.join("")}for(Ye=B.length;$n===void 0&&Ye!==0;)B.charCodeAt(Ye-1)>>8&&($n=!0),Ye--;if(!$n)return B;for(In=be.noBOM?[]:[254,255],Ye=0,ut=B.length;Ye<ut;Ye++){if((_r=(or=B.charCodeAt(Ye))>>8)>>8)throw new Error("Character at position "+Ye+" of string '"+B+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");In.push(_r),In.push(or-(_r<<8))}return String.fromCharCode.apply(void 0,In)},si=y.__private__.pdfEscape=y.pdfEscape=function(B,be){return Ms(B,be).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ki=y.__private__.beginPage=function(B){Me[++Or]=[],gr[Or]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},fn(Or),ye(Me[H])},fi=function(B,be){var Ye,ut,Lt;switch(t=be||t,typeof B=="string"&&(Ye=I(B.toLowerCase()),Array.isArray(Ye)&&(ut=Ye[0],Lt=Ye[1])),Array.isArray(B)&&(ut=B[0]*rt,Lt=B[1]*rt),isNaN(ut)&&(ut=i[0],Lt=i[1]),(ut>14400||Lt>14400)&&(vo.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ut=Math.min(14400,ut),Lt=Math.min(14400,Lt)),i=[ut,Lt],t.substr(0,1)){case"l":Lt>ut&&(i=[Lt,ut]);break;case"p":ut>Lt&&(i=[Lt,ut])}ki(i),Nl(Xl),de(Wi),Ol!==0&&de(Ol+" J"),yi!==0&&de(yi+" j"),oi.publish("addPage",{pageNumber:Or})},Cn=function(B){B>0&&B<=Or&&(Me.splice(B,1),gr.splice(B,1),Or--,H>Or&&(H=Or),this.setPage(H))},fn=function(B){B>0&&B<=Or&&(H=B)},fr=y.__private__.getNumberOfPages=y.getNumberOfPages=function(){return Me.length-1},eo=function(B,be,Ye){var ut,Lt=void 0;return Ye=Ye||{},B=B!==void 0?B:Ln[ot].fontName,be=be!==void 0?be:Ln[ot].fontStyle,ut=B.toLowerCase(),Dn[ut]!==void 0&&Dn[ut][be]!==void 0?Lt=Dn[ut][be]:Dn[B]!==void 0&&Dn[B][be]!==void 0?Lt=Dn[B][be]:Ye.disableWarning===!1&&vo.warn("Unable to look up font label for font '"+B+"', '"+be+"'. Refer to getFontList() for available fonts."),Lt||Ye.noFallback||(Lt=Dn.times[be])==null&&(Lt=Dn.times.normal),Lt},Ao=y.__private__.putInfo=function(){var B=St(),be=function(ut){return ut};for(var Ye in m!==null&&(be=ji.encryptor(B,0)),de("<<"),de("/Producer ("+si(be("jsPDF "+kr.version))+")"),Ke)Ke.hasOwnProperty(Ye)&&Ke[Ye]&&de("/"+Ye.substr(0,1).toUpperCase()+Ye.substr(1)+" ("+si(be(Ke[Ye]))+")");de("/CreationDate ("+si(be(q))+")"),de(">>"),de("endobj")},_o=y.__private__.putCatalog=function(B){var be=(B=B||{}).rootDictionaryObjId||Tt;switch(St(),de("<<"),de("/Type /Catalog"),de("/Pages "+be+" 0 R"),et||(et="fullwidth"),et){case"fullwidth":de("/OpenAction [3 0 R /FitH null]");break;case"fullheight":de("/OpenAction [3 0 R /FitV null]");break;case"fullpage":de("/OpenAction [3 0 R /Fit]");break;case"original":de("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ye=""+et;Ye.substr(Ye.length-1)==="%"&&(et=parseInt(et)/100),typeof et=="number"&&de("/OpenAction [3 0 R /XYZ null null "+Z(et)+"]")}switch(Jt||(Jt="continuous"),Jt){case"continuous":de("/PageLayout /OneColumn");break;case"single":de("/PageLayout /SinglePage");break;case"two":case"twoleft":de("/PageLayout /TwoColumnLeft");break;case"tworight":de("/PageLayout /TwoColumnRight")}Pt&&de("/PageMode /"+Pt),oi.publish("putCatalog"),de(">>"),de("endobj")},$a=y.__private__.putTrailer=function(){de("trailer"),de("<<"),de("/Size "+(se+1)),de("/Root "+se+" 0 R"),de("/Info "+(se-1)+" 0 R"),m!==null&&de("/Encrypt "+ji.oid+" 0 R"),de("/ID [ <"+G+"> <"+G+"> ]"),de(">>")},es=y.__private__.putHeader=function(){de("%PDF-"+M),de("%")},ol=y.__private__.putXRef=function(){var B="0000000000";de("xref"),de("0 "+(se+1)),de("0000000000 65535 f ");for(var be=1;be<=se;be++)typeof pe[be]=="function"?de((B+pe[be]()).slice(-10)+" 00000 n "):pe[be]!==void 0?de((B+pe[be]).slice(-10)+" 00000 n "):de("0000000000 00000 n ")},jr=y.__private__.buildDocument=function(){te(),ye(K),oi.publish("buildDocument"),es(),Ai(),Ri(),Ei(),m!==null&&Si(),Ao(),_o();var B=D;return ol(),$a(),de("startxref"),de(""+B),de("%%EOF"),ye(Me[H]),K.join(`
`)},As=y.__private__.getBlob=function(B){return new Blob([He(B)],{type:"application/pdf"})},uo=y.output=y.__private__.output=Gn(function(B,be){switch(typeof(be=be||{})=="string"?be={filename:be}:be.filename=be.filename||"generated.pdf",B){case void 0:return jr();case"save":y.save(be.filename);break;case"arraybuffer":return He(jr());case"blob":return As(jr());case"bloburi":case"bloburl":if(Dr.URL!==void 0&&typeof Dr.URL.createObjectURL=="function")return Dr.URL&&Dr.URL.createObjectURL(As(jr()))||void 0;vo.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ye="",ut=jr();try{Ye=w1(ut)}catch{Ye=w1(unescape(encodeURIComponent(ut)))}return"data:application/pdf;filename="+be.filename+";base64,"+Ye;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Dr)==="[object Window]"){var Lt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';be.pdfObjectUrl&&(Lt=be.pdfObjectUrl,Vt="");var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Lt+'"'+Vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(be)+");<\/script></body></html>",In=Dr.open();return In!==null&&In.document.write(hn),In}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Dr)==="[object Window]"){var $n='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(be.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+be.filename+'" width="500px" height="400px" /></body></html>',or=Dr.open();if(or!==null){or.document.write($n);var _r=this;or.document.documentElement.querySelector("#pdfViewer").onload=function(){or.document.title=be.filename,or.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(_r.output("bloburl"))}}return or}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Dr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var zr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",be)+'"></iframe></body></html>',Hi=Dr.open();if(Hi!==null&&(Hi.document.write(zr),Hi.document.title=be.filename),Hi||typeof safari>"u")return Hi;break;case"datauri":case"dataurl":return Dr.document.location.href=this.output("datauristring",be);default:return null}}),ts=function(B){return Array.isArray(ft)===!0&&ft.indexOf(B)>-1};switch(r){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=ts("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);rt=r}var ji=null;Te(),ie();var Ml=function(B){return m!==null?ji.encryptor(B,0):function(be){return be}},za=y.__private__.getPageInfo=y.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gr[B].objId,pageNumber:B,pageContext:gr[B]}},vr=y.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var be in gr)if(gr[be].objId===B)break;return za(be)},yr=y.__private__.getCurrentPageInfo=y.getCurrentPageInfo=function(){return{objId:gr[H].objId,pageNumber:H,pageContext:gr[H]}};y.addPage=function(){return fi.apply(this,arguments),this},y.setPage=function(){return fn.apply(this,arguments),ye.call(this,Me[H]),this},y.insertPage=function(B){return this.addPage(),this.movePage(H,B),this},y.movePage=function(B,be){var Ye,ut;if(B>be){Ye=Me[B],ut=gr[B];for(var Lt=B;Lt>be;Lt--)Me[Lt]=Me[Lt-1],gr[Lt]=gr[Lt-1];Me[be]=Ye,gr[be]=ut,this.setPage(be)}else if(B<be){Ye=Me[B],ut=gr[B];for(var Vt=B;Vt<be;Vt++)Me[Vt]=Me[Vt+1],gr[Vt]=gr[Vt+1];Me[be]=Ye,gr[be]=ut,this.setPage(be)}return this},y.deletePage=function(){return Cn.apply(this,arguments),this},y.__private__.text=y.text=function(B,be,Ye,ut,Lt){var Vt,hn,In,$n,or,_r,zr,Hi,di,bi=(ut=ut||{}).scope||this;if(typeof B=="number"&&typeof be=="number"&&(typeof Ye=="string"||Array.isArray(Ye))){var po=Ye;Ye=be,be=B,B=po}if(arguments[3]instanceof vn?($("The transform parameter of text() with a Matrix value"),di=Lt):(In=arguments[4],$n=arguments[5],ao(zr=arguments[3])==="object"&&zr!==null||(typeof In=="string"&&($n=In,In=null),typeof zr=="string"&&($n=zr,zr=null),typeof zr=="number"&&(In=zr,zr=null),ut={flags:zr,angle:In,align:$n})),isNaN(be)||isNaN(Ye)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return bi;var bo="",Ts=!1,Ur=typeof ut.lineHeightFactor=="number"?ut.lineHeightFactor:Tl,$o=bi.internal.scaleFactor;function cl(xi){return xi=xi.split("	").join(Array(ut.TabLen||9).join(" ")),si(xi,zr)}function is(xi){for(var Ti,go=xi.concat(),Ui=[],Is=go.length;Is--;)typeof(Ti=go.shift())=="string"?Ui.push(Ti):Array.isArray(xi)&&(Ti.length===1||Ti[1]===void 0&&Ti[2]===void 0)?Ui.push(Ti[0]):Ui.push([Ti[0],Ti[1],Ti[2]]);return Ui}function tu(xi,Ti){var go;if(typeof xi=="string")go=Ti(xi)[0];else if(Array.isArray(xi)){for(var Ui,Is,vs=xi.concat(),js=[],Lu=vs.length;Lu--;)typeof(Ui=vs.shift())=="string"?js.push(Ti(Ui)[0]):Array.isArray(Ui)&&typeof Ui[0]=="string"&&(Is=Ti(Ui[0],Ui[1],Ui[2]),js.push([Is[0],Is[1],Is[2]]));go=js}return go}var ra=!1,xu=!0;if(typeof B=="string")ra=!0;else if(Array.isArray(B)){var Ga=B.concat();hn=[];for(var Ha,wo=Ga.length;wo--;)(typeof(Ha=Ga.shift())!="string"||Array.isArray(Ha)&&typeof Ha[0]!="string")&&(xu=!1);ra=xu}if(ra===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var ia=Ze/bi.internal.scaleFactor,Ns=ia*(Ur-1);switch(ut.baseline){case"bottom":Ye-=Ns;break;case"top":Ye+=ia-Ns;break;case"hanging":Ye+=ia-2*Ns;break;case"middle":Ye+=ia/2-Ns}if((_r=ut.maxWidth||0)>0&&(typeof B=="string"?B=bi.splitTextToSize(B,_r):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(xi,Ti){return xi.concat(bi.splitTextToSize(Ti,_r))},[]))),Vt={text:B,x:be,y:Ye,options:ut,mutex:{pdfEscape:si,activeFontKey:ot,fonts:Ln,activeFontSize:Ze}},oi.publish("preProcessText",Vt),B=Vt.text,In=(ut=Vt.options).angle,!(di instanceof vn)&&In&&typeof In=="number"){In*=Math.PI/180,ut.rotationDirection===0&&(In=-In),Y===R.ADVANCED&&(In=-In);var ms=Math.cos(In),fl=Math.sin(In);di=new vn(ms,fl,-fl,ms,0,0)}else In&&In instanceof vn&&(di=In);Y!==R.ADVANCED||di||(di=qt),(or=ut.charSpace||Il)!==void 0&&(bo+=ve(N(or))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Hi=ut.horizontalScale)!==void 0&&(bo+=ve(100*Hi)+` Tz
`),ut.lang;var zo=-1,os=ut.renderingMode!==void 0?ut.renderingMode:ut.stroke,ss=bi.internal.getCurrentPageInfo().pageContext;switch(os){case 0:case!1:case"fill":zo=0;break;case 1:case!0:case"stroke":zo=1;break;case 2:case"fillThenStroke":zo=2;break;case 3:case"invisible":zo=3;break;case 4:case"fillAndAddForClipping":zo=4;break;case 5:case"strokeAndAddPathForClipping":zo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":zo=6;break;case 7:case"addToPathForClipping":zo=7}var Qu=ss.usedRenderingMode!==void 0?ss.usedRenderingMode:-1;zo!==-1?bo+=zo+` Tr
`:Qu!==-1&&(bo+=`0 Tr
`),zo!==-1&&(ss.usedRenderingMode=zo),$n=ut.align||"left";var Po,ba=Ze*Ur,Uo=bi.internal.pageSize.getWidth(),Vo=Ln[ot];or=ut.charSpace||Il,_r=ut.maxWidth||0,zr=Object.assign({autoencode:!0,noBOM:!0},ut.flags);var wa=[],xa=function(xi){return bi.getStringUnitWidth(xi,{font:Vo,charSpace:or,fontSize:Ze,doKerning:!1})*Ze/$o};if(Object.prototype.toString.call(B)==="[object Array]"){var Go;hn=is(B),$n!=="left"&&(Po=hn.map(xa));var To,oa=0;if($n==="right"){be-=Po[0],B=[],wo=hn.length;for(var Ds=0;Ds<wo;Ds++)Ds===0?(To=lr(be),Go=fo(Ye)):(To=N(oa-Po[Ds]),Go=-ba),B.push([hn[Ds],To,Go]),oa=Po[Ds]}else if($n==="center"){be-=Po[0]/2,B=[],wo=hn.length;for(var Ho=0;Ho<wo;Ho++)Ho===0?(To=lr(be),Go=fo(Ye)):(To=N((oa-Po[Ho])/2),Go=-ba),B.push([hn[Ho],To,Go]),oa=Po[Ho]}else if($n==="left"){B=[],wo=hn.length;for(var _t=0;_t<wo;_t++)B.push(hn[_t])}else if($n==="justify"&&Vo.encoding==="Identity-H"){B=[],wo=hn.length,_r=_r!==0?_r:Uo;for(var Zt=0,Nt=0;Nt<wo;Nt++)if(Go=Nt===0?fo(Ye):-ba,To=Nt===0?lr(be):Zt,Nt<wo-1){var kn=N((_r-Po[Nt])/(hn[Nt].split(" ").length-1)),Jn=hn[Nt].split(" ");B.push([Jn[0]+" ",To,Go]),Zt=0;for(var Lr=1;Lr<Jn.length;Lr++){var Zi=(xa(Jn[Lr-1]+" "+Jn[Lr])-xa(Jn[Lr]))*$o+kn;Lr==Jn.length-1?B.push([Jn[Lr],Zi,0]):B.push([Jn[Lr]+" ",Zi,0]),Zt-=Zi}}else B.push([hn[Nt],To,Go]);B.push(["",Zt,0])}else{if($n!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],wo=hn.length,_r=_r!==0?_r:Uo,Nt=0;Nt<wo;Nt++)Go=Nt===0?fo(Ye):-ba,To=Nt===0?lr(be):0,Nt<wo-1?wa.push(ve(N((_r-Po[Nt])/(hn[Nt].split(" ").length-1)))):wa.push(0),B.push([hn[Nt],To,Go])}}var wi=typeof ut.R2L=="boolean"?ut.R2L:wt;wi===!0&&(B=tu(B,function(xi,Ti,go){return[xi.split("").reverse().join(""),Ti,go]})),Vt={text:B,x:be,y:Ye,options:ut,mutex:{pdfEscape:si,activeFontKey:ot,fonts:Ln,activeFontSize:Ze}},oi.publish("postProcessText",Vt),B=Vt.text,Ts=Vt.mutex.isHex||!1;var Rl=Ln[ot].encoding;Rl!=="WinAnsiEncoding"&&Rl!=="StandardEncoding"||(B=tu(B,function(xi,Ti,go){return[cl(xi),Ti,go]})),hn=is(B),B=[];for(var as,Ki,sa,La=0,aa=1,la=Array.isArray(hn[0])?aa:La,ua="",Yr=function(xi,Ti,go){var Ui="";return go instanceof vn?(go=typeof ut.angle=="number"?bn(go,new vn(1,0,0,1,xi,Ti)):bn(new vn(1,0,0,1,xi,Ti),go),Y===R.ADVANCED&&(go=bn(new vn(1,0,0,-1,0,0),go)),Ui=go.join(" ")+` Tm
`):Ui=ve(xi)+" "+ve(Ti)+` Td
`,Ui},Ws=0;Ws<hn.length;Ws++){switch(ua="",la){case aa:sa=(Ts?"<":"(")+hn[Ws][0]+(Ts?">":")"),as=parseFloat(hn[Ws][1]),Ki=parseFloat(hn[Ws][2]);break;case La:sa=(Ts?"<":"(")+hn[Ws]+(Ts?">":")"),as=lr(be),Ki=fo(Ye)}wa!==void 0&&wa[Ws]!==void 0&&(ua=wa[Ws]+` Tw
`),Ws===0?B.push(ua+Yr(as,Ki,di)+sa):la===La?B.push(ua+sa):la===aa&&B.push(ua+Yr(as,Ki,di)+sa)}B=la===La?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var No=`BT
/`;return No+=ot+" "+Ze+` Tf
`,No+=ve(Ze*Ur)+` TL
`,No+=na+`
`,No+=bo,No+=B,de(No+="ET"),b[ot]=!0,bi};var ns=y.__private__.clip=y.clip=function(B){return de(B==="evenodd"?"W*":"W"),this};y.clipEvenOdd=function(){return ns("evenodd")},y.__private__.discardPath=y.discardPath=function(){return de("n"),this};var $r=y.__private__.isValidStyle=function(B){var be=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(be=!0),be};y.__private__.setDefaultPathOperation=y.setDefaultPathOperation=function(B){return $r(B)&&(d=B),this};var Al=y.__private__.getStyle=y.getStyle=function(B){var be=d;switch(B){case"D":case"S":be="S";break;case"F":be="f";break;case"FD":case"DF":be="B";break;case"f":case"f*":case"B":case"B*":be=B}return be},hi=y.close=function(){return de("h"),this};y.stroke=function(){return de("S"),this},y.fill=function(B){return rs("f",B),this},y.fillEvenOdd=function(B){return rs("f*",B),this},y.fillStroke=function(B){return rs("B",B),this},y.fillStrokeEvenOdd=function(B){return rs("B*",B),this};var rs=function(B,be){ao(be)==="object"?wu(be,B):de(B)},to=function(B){B===null||Y===R.ADVANCED&&B===void 0||(B=Al(B),de(B))};function Ua(B,be,Ye,ut,Lt){var Vt=new qh(be||this.boundingBox,Ye||this.xStep,ut||this.yStep,this.gState,Lt||this.matrix);Vt.stream=this.stream;var hn=B+"$$"+this.cloneIndex+++"$$";return Hn(hn,Vt),Vt}var wu=function(B,be){var Ye=jn[B.key],ut=En[Ye];if(ut instanceof Yf)de("q"),de(kl(be)),ut.gState&&y.setGState(ut.gState),de(B.matrix.toString()+" cm"),de("/"+Ye+" sh"),de("Q");else if(ut instanceof qh){var Lt=new vn(1,0,0,-1,0,_a());B.matrix&&(Lt=Lt.multiply(B.matrix||qt),Ye=Ua.call(ut,B.key,B.boundingBox,B.xStep,B.yStep,Lt).id),de("q"),de("/Pattern cs"),de("/"+Ye+" scn"),ut.gState&&y.setGState(ut.gState),de(be),de("Q")}},kl=function(B){switch(B){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Er=y.moveTo=function(B,be){return de(ve(N(B))+" "+ve(z(be))+" m"),this},Hr=y.lineTo=function(B,be){return de(ve(N(B))+" "+ve(z(be))+" l"),this},Va=y.curveTo=function(B,be,Ye,ut,Lt,Vt){return de([ve(N(B)),ve(z(be)),ve(N(Ye)),ve(z(ut)),ve(N(Lt)),ve(z(Vt)),"c"].join(" ")),this};y.__private__.line=y.line=function(B,be,Ye,ut,Lt){if(isNaN(B)||isNaN(be)||isNaN(Ye)||isNaN(ut)||!$r(Lt))throw new Error("Invalid arguments passed to jsPDF.line");return Y===R.COMPAT?this.lines([[Ye-B,ut-be]],B,be,[1,1],Lt||"S"):this.lines([[Ye-B,ut-be]],B,be,[1,1]).stroke()},y.__private__.lines=y.lines=function(B,be,Ye,ut,Lt,Vt){var hn,In,$n,or,_r,zr,Hi,di,bi,po,bo,Ts;if(typeof B=="number"&&(Ts=Ye,Ye=be,be=B,B=Ts),ut=ut||[1,1],Vt=Vt||!1,isNaN(be)||isNaN(Ye)||!Array.isArray(B)||!Array.isArray(ut)||!$r(Lt)||typeof Vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Er(be,Ye),hn=ut[0],In=ut[1],or=B.length,po=be,bo=Ye,$n=0;$n<or;$n++)(_r=B[$n]).length===2?(po=_r[0]*hn+po,bo=_r[1]*In+bo,Hr(po,bo)):(zr=_r[0]*hn+po,Hi=_r[1]*In+bo,di=_r[2]*hn+po,bi=_r[3]*In+bo,po=_r[4]*hn+po,bo=_r[5]*In+bo,Va(zr,Hi,di,bi,po,bo));return Vt&&hi(),to(Lt),this},y.path=function(B){for(var be=0;be<B.length;be++){var Ye=B[be],ut=Ye.c;switch(Ye.op){case"m":Er(ut[0],ut[1]);break;case"l":Hr(ut[0],ut[1]);break;case"c":Va.apply(this,ut);break;case"h":hi()}}return this},y.__private__.rect=y.rect=function(B,be,Ye,ut,Lt){if(isNaN(B)||isNaN(be)||isNaN(Ye)||isNaN(ut)||!$r(Lt))throw new Error("Invalid arguments passed to jsPDF.rect");return Y===R.COMPAT&&(ut=-ut),de([ve(N(B)),ve(z(be)),ve(N(Ye)),ve(N(ut)),"re"].join(" ")),to(Lt),this},y.__private__.triangle=y.triangle=function(B,be,Ye,ut,Lt,Vt,hn){if(isNaN(B)||isNaN(be)||isNaN(Ye)||isNaN(ut)||isNaN(Lt)||isNaN(Vt)||!$r(hn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ye-B,ut-be],[Lt-Ye,Vt-ut],[B-Lt,be-Vt]],B,be,[1,1],hn,!0),this},y.__private__.roundedRect=y.roundedRect=function(B,be,Ye,ut,Lt,Vt,hn){if(isNaN(B)||isNaN(be)||isNaN(Ye)||isNaN(ut)||isNaN(Lt)||isNaN(Vt)||!$r(hn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var In=4/3*(Math.SQRT2-1);return Lt=Math.min(Lt,.5*Ye),Vt=Math.min(Vt,.5*ut),this.lines([[Ye-2*Lt,0],[Lt*In,0,Lt,Vt-Vt*In,Lt,Vt],[0,ut-2*Vt],[0,Vt*In,-Lt*In,Vt,-Lt,Vt],[2*Lt-Ye,0],[-Lt*In,0,-Lt,-Vt*In,-Lt,-Vt],[0,2*Vt-ut],[0,-Vt*In,Lt*In,-Vt,Lt,-Vt]],B+Lt,be,[1,1],hn,!0),this},y.__private__.ellipse=y.ellipse=function(B,be,Ye,ut,Lt){if(isNaN(B)||isNaN(be)||isNaN(Ye)||isNaN(ut)||!$r(Lt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Vt=4/3*(Math.SQRT2-1)*Ye,hn=4/3*(Math.SQRT2-1)*ut;return Er(B+Ye,be),Va(B+Ye,be-hn,B+Vt,be-ut,B,be-ut),Va(B-Vt,be-ut,B-Ye,be-hn,B-Ye,be),Va(B-Ye,be+hn,B-Vt,be+ut,B,be+ut),Va(B+Vt,be+ut,B+Ye,be+hn,B+Ye,be),to(Lt),this},y.__private__.circle=y.circle=function(B,be,Ye,ut){if(isNaN(B)||isNaN(be)||isNaN(Ye)||!$r(ut))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,be,Ye,Ye,ut)},y.setFont=function(B,be,Ye){return Ye&&(be=fe(be,Ye)),ot=eo(B,be,{disableWarning:!1}),this};var Ju=y.__private__.getFont=y.getFont=function(){return Ln[eo.apply(y,arguments)]};y.__private__.getFontList=y.getFontList=function(){var B,be,Ye={};for(B in Dn)if(Dn.hasOwnProperty(B))for(be in Ye[B]=[],Dn[B])Dn[B].hasOwnProperty(be)&&Ye[B].push(be);return Ye},y.addFont=function(B,be,Ye,ut,Lt){var Vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Vt.indexOf(arguments[3])!==-1?Lt=arguments[3]:arguments[3]&&Vt.indexOf(arguments[3])==-1&&(Ye=fe(Ye,ut)),Lt=Lt||"Identity-H",jo.call(this,B,be,Ye,Lt)};var Tl,Xl=e.lineWidth||.200025,sl=y.__private__.getLineWidth=y.getLineWidth=function(){return Xl},Nl=y.__private__.setLineWidth=y.setLineWidth=function(B){return Xl=B,de(ve(N(B))+" w"),this};y.__private__.setLineDash=kr.API.setLineDash=kr.API.setLineDashPattern=function(B,be){if(B=B||[],be=be||0,isNaN(be)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(Ye){return ve(N(Ye))}).join(" "),be=ve(N(be)),de("["+B+"] "+be+" d"),this};var Ql=y.__private__.getLineHeight=y.getLineHeight=function(){return Ze*Tl};y.__private__.getLineHeight=y.getLineHeight=function(){return Ze*Tl};var Kr=y.__private__.setLineHeightFactor=y.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&(Tl=B),this},co=y.__private__.getLineHeightFactor=y.getLineHeightFactor=function(){return Tl};Kr(e.lineHeight);var lr=y.__private__.getHorizontalCoordinate=function(B){return N(B)},fo=y.__private__.getVerticalCoordinate=function(B){return Y===R.ADVANCED?B:gr[H].mediaBox.topRightY-gr[H].mediaBox.bottomLeftY-N(B)},al=y.__private__.getHorizontalCoordinateString=y.getHorizontalCoordinateString=function(B){return ve(lr(B))},ya=y.__private__.getVerticalCoordinateString=y.getVerticalCoordinateString=function(B){return ve(fo(B))},Wi=e.strokeColor||"0 G";y.__private__.getStrokeColor=y.getDrawColor=function(){return Qn(Wi)},y.__private__.setStrokeColor=y.setDrawColor=function(B,be,Ye,ut){return Wi=Mi({ch1:B,ch2:be,ch3:Ye,ch4:ut,pdfColorType:"draw",precision:2}),de(Wi),this};var eu=e.fillColor||"0 g";y.__private__.getFillColor=y.getFillColor=function(){return Qn(eu)},y.__private__.setFillColor=y.setFillColor=function(B,be,Ye,ut){return eu=Mi({ch1:B,ch2:be,ch3:Ye,ch4:ut,pdfColorType:"fill",precision:2}),de(eu),this};var na=e.textColor||"0 g",Dl=y.__private__.getTextColor=y.getTextColor=function(){return Qn(na)};y.__private__.setTextColor=y.setTextColor=function(B,be,Ye,ut){return na=Mi({ch1:B,ch2:be,ch3:Ye,ch4:ut,pdfColorType:"text",precision:3}),this};var Il=e.charSpace,Fs=y.__private__.getCharSpace=y.getCharSpace=function(){return parseFloat(Il||0)};y.__private__.setCharSpace=y.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Il=B,this};var Ol=0;y.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},y.__private__.setLineCap=y.setLineCap=function(B){var be=y.CapJoinStyles[B];if(be===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ol=be,de(be+" J"),this};var yi=0;y.__private__.setLineJoin=y.setLineJoin=function(B){var be=y.CapJoinStyles[B];if(be===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yi=be,de(be+" j"),this},y.__private__.setLineMiterLimit=y.__private__.setMiterLimit=y.setLineMiterLimit=y.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return de(ve(N(B))+" M"),this},y.GState=bm,y.setGState=function(B){(B=typeof B=="string"?An[Yn[B]]:Xu(null,B)).equals(wr)||(de("/"+B.id+" gs"),wr=B)};var Xu=function(B,be){if(!B||!Yn[B]){var Ye=!1;for(var ut in An)if(An.hasOwnProperty(ut)&&An[ut].equals(be)){Ye=!0;break}if(Ye)be=An[ut];else{var Lt="GS"+(Object.keys(An).length+1).toString(10);An[Lt]=be,be.id=Lt}return B&&(Yn[B]=be.id),oi.publish("addGState",be),be}};y.addGState=function(B,be){return Xu(B,be),this},y.saveGraphicsState=function(){return de("q"),ar.push({key:ot,size:Ze,color:na}),this},y.restoreGraphicsState=function(){de("Q");var B=ar.pop();return ot=B.key,Ze=B.size,na=B.color,wr=null,this},y.setCurrentTransformationMatrix=function(B){return de(B.toString()+" cm"),this},y.comment=function(B){return de("#"+B),this};var ko=function(B,be){var Ye=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ye},set:function(Vt){isNaN(Vt)||(Ye=parseFloat(Vt))}});var ut=be||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ut},set:function(Vt){isNaN(Vt)||(ut=parseFloat(Vt))}});var Lt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Lt},set:function(Vt){Lt=Vt.toString()}}),this},Hs=function(B,be,Ye,ut){ko.call(this,B,be),this.type="rect";var Lt=Ye||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Lt},set:function(hn){isNaN(hn)||(Lt=parseFloat(hn))}});var Vt=ut||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Vt},set:function(hn){isNaN(hn)||(Vt=parseFloat(hn))}}),this},Bl=function(){this.page=Or,this.currentPage=H,this.pages=Me.slice(0),this.pagesContext=gr.slice(0),this.x=$t,this.y=Qt,this.matrix=Rn,this.width=_i(H),this.height=_a(H),this.outputDestination=ce,this.id="",this.objectNumber=-1};Bl.prototype.restore=function(){Or=this.page,H=this.currentPage,gr=this.pagesContext,Me=this.pages,$t=this.x,Qt=this.y,Rn=this.matrix,ks(H,this.width),ho(H,this.height),ce=this.outputDestination};var qs=function(B,be,Ye,ut,Lt){xn.push(new Bl),Or=H=0,Me=[],$t=B,Qt=be,Rn=Lt,ki([Ye,ut])},ll=function(B){if(Ut[B])xn.pop().restore();else{var be=new Bl,Ye="Xo"+(Object.keys(Qe).length+1).toString(10);be.id=Ye,Ut[B]=Ye,Qe[Ye]=be,oi.publish("addFormObject",be),xn.pop().restore()}};for(var ul in y.beginFormObject=function(B,be,Ye,ut,Lt){return qs(B,be,Ye,ut,Lt),this},y.endFormObject=function(B){return ll(B),this},y.doFormObject=function(B,be){var Ye=Qe[Ut[B]];return de("q"),de(be.toString()+" cm"),de("/"+Ye.id+" Do"),de("Q"),this},y.getFormObject=function(B){var be=Qe[Ut[B]];return{x:be.x,y:be.y,width:be.width,height:be.height,matrix:be.matrix}},y.save=function(B,be){return B=B||"generated.pdf",(be=be||{}).returnPromise=be.returnPromise||!1,be.returnPromise===!1?(Zf(As(jr()),B),typeof Zf.unload=="function"&&Dr.setTimeout&&setTimeout(Zf.unload,911),this):new Promise(function(Ye,ut){try{var Lt=Zf(As(jr()),B);typeof Zf.unload=="function"&&Dr.setTimeout&&setTimeout(Zf.unload,911),Ye(Lt)}catch(Vt){ut(Vt.message)}})},kr.API)kr.API.hasOwnProperty(ul)&&(ul==="events"&&kr.API.events.length?function(B,be){var Ye,ut,Lt;for(Lt=be.length-1;Lt!==-1;Lt--)Ye=be[Lt][0],ut=be[Lt][1],B.subscribe.apply(B,[Ye].concat(typeof ut=="function"?[ut]:ut))}(oi,kr.API.events):y[ul]=kr.API[ul]);var _i=y.getPageWidth=function(B){return(gr[B=B||H].mediaBox.topRightX-gr[B].mediaBox.bottomLeftX)/rt},ks=y.setPageWidth=function(B,be){gr[B].mediaBox.topRightX=be*rt+gr[B].mediaBox.bottomLeftX},_a=y.getPageHeight=function(B){return(gr[B=B||H].mediaBox.topRightY-gr[B].mediaBox.bottomLeftY)/rt},ho=y.setPageHeight=function(B,be){gr[B].mediaBox.topRightY=be*rt+gr[B].mediaBox.bottomLeftY};return y.internal={pdfEscape:si,getStyle:Al,getFont:Ju,getFontSize:ze,getCharSpace:Fs,getTextColor:Dl,getLineHeight:Ql,getLineHeightFactor:co,getLineWidth:sl,write:We,getHorizontalCoordinate:lr,getVerticalCoordinate:fo,getCoordinateString:al,getVerticalCoordinateString:ya,collections:{},newObject:St,newAdditionalObject:ei,newObjectDeferred:mt,newObjectDeferredBegin:wn,getFilters:Sr,putStream:Pr,events:oi,scaleFactor:rt,pageSize:{getWidth:function(){return _i(H)},setWidth:function(B){ks(H,B)},getHeight:function(){return _a(H)},setHeight:function(B){ho(H,B)}},encryptionOptions:m,encryption:ji,getEncryptor:Ml,output:uo,getNumberOfPages:fr,pages:Me,out:de,f2:Z,f3:T,getPageInfo:za,getPageInfoByObjId:vr,getCurrentPageInfo:yr,getPDFVersion:k,Point:ko,Rectangle:Hs,Matrix:vn,hasHotfix:ts},Object.defineProperty(y.internal.pageSize,"width",{get:function(){return _i(H)},set:function(B){ks(H,B)},enumerable:!0,configurable:!0}),Object.defineProperty(y.internal.pageSize,"height",{get:function(){return _a(H)},set:function(B){ho(H,B)},enumerable:!0,configurable:!0}),cr.call(y,tt),ot="F1",fi(i,t),oi.publish("initialized"),y}Uh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Uh.prototype.toHexString=function(e){return e.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Uh.prototype.hexToBytes=function(e){for(var n=[],t=0;t<e.length;t+=2)n.push(String.fromCharCode(parseInt(e.substr(t,2),16)));return n.join("")},Uh.prototype.processOwnerPassword=function(e,n){return L1(x1(n).substr(0,5),e)},Uh.prototype.encryptor=function(e,n){var t=x1(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&n,n>>8&255)).substr(0,10);return function(r){return L1(t,r)}},bm.prototype.equals=function(e){var n,t="id,objectNumber,equals";if(!e||ao(e)!==ao(this))return!1;var r=0;for(n in this)if(!(t.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!e.hasOwnProperty(n)||this[n]!==e[n])return!1;r++}for(n in e)e.hasOwnProperty(n)&&t.indexOf(n)<0&&r--;return r===0},kr.API={events:[]},kr.version="2.5.2";var hs=kr.API,vy=1,dh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Dh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Wr=function(e){return e.toFixed(2)},sf=function(e){return e.toFixed(5)};hs.__acroform__={};var Pl=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e},kb=function(e){return e*vy},lc=function(e){var n=new Mx,t=Xn.internal.getHeight(e)||0,r=Xn.internal.getWidth(e)||0;return n.BBox=[0,0,Number(Wr(r)),Number(Wr(t))],n},_F=hs.__acroform__.setBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<n},bF=hs.__acroform__.clearBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<n)},wF=hs.__acroform__.getBit=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<n?1:0},Ss=hs.__acroform__.getBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return wF(e,n-1)},Es=hs.__acroform__.setBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return _F(e,n-1)},Cs=hs.__acroform__.clearBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return bF(e,n-1)},xF=hs.__acroform__.calculateCoordinates=function(e,n){var t=n.internal.getHorizontalCoordinate,r=n.internal.getVerticalCoordinate,i=e[0],s=e[1],o=e[2],u=e[3],f={};return f.lowerLeft_X=t(i)||0,f.lowerLeft_Y=r(s+u)||0,f.upperRight_X=t(i+o)||0,f.upperRight_Y=r(s)||0,[Number(Wr(f.lowerLeft_X)),Number(Wr(f.lowerLeft_Y)),Number(Wr(f.upperRight_X)),Number(Wr(f.upperRight_Y))]},LF=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var n=[],t=e._V||e.DV,r=S1(e,t),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(e.scope.__private__.encodeColorString(e.color)),n.push("/"+i+" "+Wr(r.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(r.text),n.push("ET"),n.push("Q"),n.push("EMC");var s=lc(e);return s.scope=e.scope,s.stream=n.join(`
`),s}},S1=function(e,n){var t=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");i=e.multiline?i.map(function(T){return T.split(`
`)}):i.map(function(T){return[T]});var s=t,o=Xn.internal.getHeight(e)||0;o=o<0?-o:o;var u=Xn.internal.getWidth(e)||0;u=u<0?-u:u;var f=function(T,N,O){if(T+1<i.length){var z=N+" "+i[T+1][0];return bg(z,e,O).width<=u-4}return!1};s++;e:for(;s>0;){n="",s--;var d,m,_=bg("3",e,s).height,b=e.multiline?o-s:(o-_)/2,y=b+=2,M=0,k=0,F=0;if(s<=0){n=`(...) Tj
`,n+="% Width of Text: "+bg(n,e,s=12).width+", FieldWidth:"+u+`
`;break}for(var I="",R=0,Y=0;Y<i.length;Y++)if(i.hasOwnProperty(Y)){var ee=!1;if(i[Y].length!==1&&F!==i[Y].length-1){if((_+2)*(R+2)+2>o)continue e;I+=i[Y][F],ee=!0,k=Y,Y--}else{I=(I+=i[Y][F]+" ").substr(I.length-1)==" "?I.substr(0,I.length-1):I;var he=parseInt(Y),fe=f(he,I,s),ve=Y>=i.length-1;if(fe&&!ve){I+=" ",F=0;continue}if(fe||ve){if(ve)k=he;else if(e.multiline&&(_+2)*(R+2)+2>o)continue e}else{if(!e.multiline||(_+2)*(R+2)+2>o)continue e;k=he}}for(var $="",U=M;U<=k;U++){var Z=i[U];if(e.multiline){if(U===k){$+=Z[F]+" ",F=(F+1)%Z.length;continue}if(U===M){$+=Z[Z.length-1]+" ";continue}}$+=Z[0]+" "}switch($=$.substr($.length-1)==" "?$.substr(0,$.length-1):$,m=bg($,e,s).width,e.textAlign){case"right":d=u-m-2;break;case"center":d=(u-m)/2;break;case"left":default:d=2}n+=Wr(d)+" "+Wr(y)+` Td
`,n+="("+dh($)+`) Tj
`,n+=-Wr(d)+` 0 Td
`,y=-(s+2),m=0,M=ee?k:k+1,R++,I=""}break}return r.text=n,r.fontSize=s,r},bg=function(e,n,t){var r=n.scope.internal.getFont(n.fontName,n.fontStyle),i=n.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:n.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},SF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},EF=function(e,n){var t={type:"reference",object:e};n.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&n.internal.getPageInfo(e.page).pageContext.annotations.push(t)},CF=function(e,n){for(var t in e)if(e.hasOwnProperty(t)){var r=t,i=e[t];n.internal.newObjectDeferredBegin(i.objId,!0),ao(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},PF=function(e,n){if(n.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Ku.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(SF)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");vy=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Ax,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&EF(s,t)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var u=r[o],f=[],d=u.Rect;if(u.Rect&&(u.Rect=xF(u.Rect,i)),i.internal.newObjectDeferredBegin(u.objId,!0),u.DA=Xn.createDefaultAppearanceStream(u),ao(u)==="object"&&typeof u.getKeyValueListForStream=="function"&&(f=u.getKeyValueListForStream()),u.Rect=d,u.hasAppearanceStream&&!u.appearanceStreamContent){var m=LF(u);f.push({key:"AP",value:"<</N "+m+">>"}),i.internal.acroformPlugin.xForms.push(m)}if(u.appearanceStreamContent){var _="";for(var b in u.appearanceStreamContent)if(u.appearanceStreamContent.hasOwnProperty(b)){var y=u.appearanceStreamContent[b];if(_+="/"+b+" ",_+="<<",Object.keys(y).length>=1||Array.isArray(y)){for(var o in y)if(y.hasOwnProperty(o)){var M=y[o];typeof M=="function"&&(M=M.call(i,u)),_+="/"+o+" "+M+" ",i.internal.acroformPlugin.xForms.indexOf(M)>=0||i.internal.acroformPlugin.xForms.push(M)}}else typeof(M=y)=="function"&&(M=M.call(i,u)),_+="/"+o+" "+M,i.internal.acroformPlugin.xForms.indexOf(M)>=0||i.internal.acroformPlugin.xForms.push(M);_+=">>"}f.push({key:"AP",value:`<<
`+_+">>"})}i.internal.putStream({additionalKeyValues:f,objectId:u.objId}),i.internal.out("endobj")}s&&CF(i.internal.acroformPlugin.xForms,i)})(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},Px=hs.__acroform__.arrayToPdfArray=function(e,n,t){var r=function(o){return o};if(Array.isArray(e)){for(var i="[",s=0;s<e.length;s++)switch(s!==0&&(i+=" "),ao(e[s])){case"boolean":case"number":case"object":i+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(n!==void 0&&t&&(r=t.internal.getEncryptor(n)),i+="("+dh(r(e[s].toString()))+")"):i+=e[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},hv=function(e,n,t){var r=function(i){return i};return n!==void 0&&t&&(r=t.internal.getEncryptor(n)),(e=e||"").toString(),e="("+dh(r(e))+")"},dc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};dc.prototype.toString=function(){return this.objId+" 0 R"},dc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},dc.prototype.getKeyValueListForStream=function(){var e=[],n=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in n)if(Object.getOwnPropertyDescriptor(this,n[t]).configurable===!1){var r=n[t],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:Px(i,this.objId,this.scope)}):i instanceof dc?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var Mx=function(){dc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Pl(Mx,dc);var Ax=function(){dc.call(this);var e,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+dh(t(e))+")"}},set:function(t){e=t}})};Pl(Ax,dc);var Ku=function e(){dc.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute F supplied.');n=I}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ss(n,3)},set:function(I){I?this.F=Es(n,3):this.F=Cs(n,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute Ff supplied.');t=I}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(I){r=I!==void 0?I:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(I){r[0]=I}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(I){r[1]=I}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(I){r[2]=I}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(I){r[3]=I}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(I){switch(I){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=I;break;default:throw new Error('Invalid value "'+I+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof wm)return;s="FieldObject"+e.FieldNum++}var I=function(R){return R};return this.scope&&(I=this.scope.internal.getEncryptor(this.objId)),"("+dh(I(s))+")"},set:function(I){s=I.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(I){s=I}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(I){o=I}});var u="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return u},set:function(I){u=I}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(I){f=I}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/vy:d},set:function(I){d=I}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(I){m=I}});var _="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_||this instanceof wm||this instanceof rh))return hv(_,this.objId,this.scope)},set:function(I){I=I.toString(),_=I}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Xs?b:hv(b,this.objId,this.scope)},set:function(I){I=I.toString(),b=this instanceof Xs?I:I.substr(0,1)==="("?Dh(I.substr(1,I.length-2)):Dh(I)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xs?Dh(b.substr(1,b.length-1)):b},set:function(I){I=I.toString(),b=this instanceof Xs?"/"+I:I}});var y=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(y)return y},set:function(I){this.V=I}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Xs?y:hv(y,this.objId,this.scope)},set:function(I){I=I.toString(),y=this instanceof Xs?I:I.substr(0,1)==="("?Dh(I.substr(1,I.length-2)):Dh(I)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xs?Dh(y.substr(1,y.length-1)):y},set:function(I){I=I.toString(),y=this instanceof Xs?"/"+I:I}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var M,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(I){I=!!I,k=I}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(M)return M},set:function(I){M=I}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,1)},set:function(I){I?this.Ff=Es(this.Ff,1):this.Ff=Cs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,2)},set:function(I){I?this.Ff=Es(this.Ff,2):this.Ff=Cs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,3)},set:function(I){I?this.Ff=Es(this.Ff,3):this.Ff=Cs(this.Ff,3)}});var F=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(F!==null)return F},set:function(I){if([0,1,2].indexOf(I)===-1)throw new Error('Invalid value "'+I+'" for attribute Q supplied.');F=I}}),Object.defineProperty(this,"textAlign",{get:function(){var I;switch(F){case 0:default:I="left";break;case 1:I="center";break;case 2:I="right"}return I},configurable:!0,enumerable:!0,set:function(I){switch(I){case"right":case 2:F=2;break;case"center":case 1:F=1;break;case"left":case 0:default:F=0}}})};Pl(Ku,dc);var ed=function(){Ku.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Px(n,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,u){u||(u=1);for(var f,d=[];f=o.exec(s);)d.push(f[u]);return d}(r,/\((.*?)\)/g)),n=i}}),this.getOptions=function(){return n},this.setOptions=function(t){n=t,this.sort&&n.sort()},this.addOption=function(t){t=(t=t||"").toString(),n.push(t),this.sort&&n.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();n.indexOf(t)!==-1&&(n.splice(n.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,18)},set:function(t){t?this.Ff=Es(this.Ff,18):this.Ff=Cs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Es(this.Ff,19):this.Ff=Cs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,20)},set:function(t){t?(this.Ff=Es(this.Ff,20),n.sort()):this.Ff=Cs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,22)},set:function(t){t?this.Ff=Es(this.Ff,22):this.Ff=Cs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,23)},set:function(t){t?this.Ff=Es(this.Ff,23):this.Ff=Cs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,27)},set:function(t){t?this.Ff=Es(this.Ff,27):this.Ff=Cs(this.Ff,27)}}),this.hasAppearanceStream=!1};Pl(ed,Ku);var td=function(){ed.call(this),this.fontName="helvetica",this.combo=!1};Pl(td,ed);var nd=function(){td.call(this),this.combo=!0};Pl(nd,td);var $g=function(){nd.call(this),this.edit=!0};Pl($g,nd);var Xs=function(){Ku.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,15)},set:function(t){t?this.Ff=Es(this.Ff,15):this.Ff=Cs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,16)},set:function(t){t?this.Ff=Es(this.Ff,16):this.Ff=Cs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,17)},set:function(t){t?this.Ff=Es(this.Ff,17):this.Ff=Cs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,26)},set:function(t){t?this.Ff=Es(this.Ff,26):this.Ff=Cs(this.Ff,26)}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var r,i=[];for(r in i.push("<<"),n)i.push("/"+r+" ("+dh(t(n[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){ao(t)==="object"&&(n=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(t){typeof t=="string"&&(n.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Pl(Xs,Ku);var zg=function(){Xs.call(this),this.pushButton=!0};Pl(zg,Xs);var rd=function(){Xs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n!==void 0?n:[]}})};Pl(rd,Xs);var wm=function(){var e,n;Ku.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(i){n=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(u){return u};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+dh(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){ao(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Xn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Pl(wm,Ku),rd.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var t=this.Kids[n];t.appearanceStreamContent=e.createAppearanceStream(t.optionName),t.caption=e.getCA()}},rd.prototype.createOption=function(e){var n=new wm;return n.Parent=this,n.optionName=e,this.Kids.push(n),MF.call(this.scope,n),n};var Ug=function(){Xs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Xn.CheckBox.createAppearanceStream()};Pl(Ug,Xs);var rh=function(){Ku.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,13)},set:function(n){n?this.Ff=Es(this.Ff,13):this.Ff=Cs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,21)},set:function(n){n?this.Ff=Es(this.Ff,21):this.Ff=Cs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,23)},set:function(n){n?this.Ff=Es(this.Ff,23):this.Ff=Cs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,24)},set:function(n){n?this.Ff=Es(this.Ff,24):this.Ff=Cs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,25)},set:function(n){n?this.Ff=Es(this.Ff,25):this.Ff=Cs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,26)},set:function(n){n?this.Ff=Es(this.Ff,26):this.Ff=Cs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){Number.isInteger(n)&&(e=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Pl(rh,Ku);var Vg=function(){rh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ss(this.Ff,14)},set:function(e){e?this.Ff=Es(this.Ff,14):this.Ff=Cs(this.Ff,14)}}),this.password=!0};Pl(Vg,rh);var Xn={CheckBox:{createAppearanceStream:function(){return{N:{On:Xn.CheckBox.YesNormal},D:{On:Xn.CheckBox.YesPushDown,Off:Xn.CheckBox.OffPushDown}}},YesPushDown:function(e){var n=lc(e);n.scope=e.scope;var t=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=S1(e,e.caption);return t.push("0.749023 g"),t.push("0 0 "+Wr(Xn.internal.getWidth(e))+" "+Wr(Xn.internal.getHeight(e))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Wr(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),n.stream=t.join(`
`),n},YesNormal:function(e){var n=lc(e);n.scope=e.scope;var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],s=Xn.internal.getHeight(e),o=Xn.internal.getWidth(e),u=S1(e,e.caption);return i.push("1 g"),i.push("0 0 "+Wr(o)+" "+Wr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Wr(o-1)+" "+Wr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Wr(u.fontSize)+" Tf "+r),i.push(u.text),i.push("ET"),i.push("Q"),n.stream=i.join(`
`),n},OffPushDown:function(e){var n=lc(e);n.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Wr(Xn.internal.getWidth(e))+" "+Wr(Xn.internal.getHeight(e))+" re"),t.push("f"),n.stream=t.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(e){var n={D:{Off:Xn.RadioButton.Circle.OffPushDown},N:{}};return n.N[e]=Xn.RadioButton.Circle.YesNormal,n.D[e]=Xn.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(e){var n=lc(e);n.scope=e.scope;var t=[],r=Xn.internal.getWidth(e)<=Xn.internal.getHeight(e)?Xn.internal.getWidth(e)/4:Xn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Xn.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+sf(Xn.internal.getWidth(e)/2)+" "+sf(Xn.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n},YesPushDown:function(e){var n=lc(e);n.scope=e.scope;var t=[],r=Xn.internal.getWidth(e)<=Xn.internal.getHeight(e)?Xn.internal.getWidth(e)/4:Xn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Xn.internal.Bezier_C).toFixed(5)),o=Number((r*Xn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+sf(Xn.internal.getWidth(e)/2)+" "+sf(Xn.internal.getHeight(e)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+sf(Xn.internal.getWidth(e)/2)+" "+sf(Xn.internal.getHeight(e)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n},OffPushDown:function(e){var n=lc(e);n.scope=e.scope;var t=[],r=Xn.internal.getWidth(e)<=Xn.internal.getHeight(e)?Xn.internal.getWidth(e)/4:Xn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Xn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+sf(Xn.internal.getWidth(e)/2)+" "+sf(Xn.internal.getHeight(e)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),n.stream=t.join(`
`),n}},Cross:{createAppearanceStream:function(e){var n={D:{Off:Xn.RadioButton.Cross.OffPushDown},N:{}};return n.N[e]=Xn.RadioButton.Cross.YesNormal,n.D[e]=Xn.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(e){var n=lc(e);n.scope=e.scope;var t=[],r=Xn.internal.calculateCross(e);return t.push("q"),t.push("1 1 "+Wr(Xn.internal.getWidth(e)-2)+" "+Wr(Xn.internal.getHeight(e)-2)+" re"),t.push("W"),t.push("n"),t.push(Wr(r.x1.x)+" "+Wr(r.x1.y)+" m"),t.push(Wr(r.x2.x)+" "+Wr(r.x2.y)+" l"),t.push(Wr(r.x4.x)+" "+Wr(r.x4.y)+" m"),t.push(Wr(r.x3.x)+" "+Wr(r.x3.y)+" l"),t.push("s"),t.push("Q"),n.stream=t.join(`
`),n},YesPushDown:function(e){var n=lc(e);n.scope=e.scope;var t=Xn.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Wr(Xn.internal.getWidth(e))+" "+Wr(Xn.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Wr(Xn.internal.getWidth(e)-2)+" "+Wr(Xn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Wr(t.x1.x)+" "+Wr(t.x1.y)+" m"),r.push(Wr(t.x2.x)+" "+Wr(t.x2.y)+" l"),r.push(Wr(t.x4.x)+" "+Wr(t.x4.y)+" m"),r.push(Wr(t.x3.x)+" "+Wr(t.x3.y)+" l"),r.push("s"),r.push("Q"),n.stream=r.join(`
`),n},OffPushDown:function(e){var n=lc(e);n.scope=e.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Wr(Xn.internal.getWidth(e))+" "+Wr(Xn.internal.getHeight(e))+" re"),t.push("f"),n.stream=t.join(`
`),n}}},createDefaultAppearanceStream:function(e){var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,t=e.scope.__private__.encodeColorString(e.color);return"/"+n+" "+e.fontSize+" Tf "+t}};Xn.internal={Bezier_C:.551915024494,calculateCross:function(e){var n=Xn.internal.getWidth(e),t=Xn.internal.getHeight(e),r=Math.min(n,t);return{x1:{x:(n-r)/2,y:(t-r)/2+r},x2:{x:(n-r)/2+r,y:(t-r)/2},x3:{x:(n-r)/2,y:(t-r)/2},x4:{x:(n-r)/2+r,y:(t-r)/2+r}}}},Xn.internal.getWidth=function(e){var n=0;return ao(e)==="object"&&(n=kb(e.Rect[2])),n},Xn.internal.getHeight=function(e){var n=0;return ao(e)==="object"&&(n=kb(e.Rect[3])),n};var MF=hs.addField=function(e){if(PF(this,e),!(e instanceof Ku))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=e).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};hs.AcroFormChoiceField=ed,hs.AcroFormListBox=td,hs.AcroFormComboBox=nd,hs.AcroFormEditBox=$g,hs.AcroFormButton=Xs,hs.AcroFormPushButton=zg,hs.AcroFormRadioButton=rd,hs.AcroFormCheckBox=Ug,hs.AcroFormTextField=rh,hs.AcroFormPasswordField=Vg,hs.AcroFormAppearance=Xn,hs.AcroForm={ChoiceField:ed,ListBox:td,ComboBox:nd,EditBox:$g,Button:Xs,PushButton:zg,RadioButton:rd,CheckBox:Ug,TextField:rh,PasswordField:Vg,Appearance:Xn},kr.AcroForm={ChoiceField:ed,ListBox:td,ComboBox:nd,EditBox:$g,Button:Xs,PushButton:zg,RadioButton:rd,CheckBox:Ug,TextField:rh,PasswordField:Vg,Appearance:Xn};kr.AcroForm;function kx(e){return e.reduce(function(n,t,r){return n[t]=r,n},{})}(function(e){e.__addimage__={};var n="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(T,N){var O,z,q,G,oe,ie=n;if((N=N||n)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(fe(T))for(oe in t)for(q=t[oe],O=0;O<q.length;O+=1){for(G=!0,z=0;z<q[O].length;z+=1)if(q[O][z]!==void 0&&q[O][z]!==T[z]){G=!1;break}if(G===!0){ie=oe;break}}else for(oe in t)for(q=t[oe],O=0;O<q.length;O+=1){for(G=!0,z=0;z<q[O].length;z+=1)if(q[O][z]!==void 0&&q[O][z]!==T.charCodeAt(z)){G=!1;break}if(G===!0){ie=oe;break}}return ie===n&&N!==n&&(ie=N),ie},i=function T(N){for(var O=this.internal.write,z=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var G=[];if(G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Image"}),G.push({key:"Width",value:N.width}),G.push({key:"Height",value:N.height}),N.colorSpace===F.INDEXED?G.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(G.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===F.DEVICE_CMYK&&G.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),G.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&G.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var oe="",ie=0,_e=N.transparency.length;ie<_e;ie++)oe+=N.transparency[ie]+" "+N.transparency[ie]+" ";G.push({key:"Mask",value:"["+oe+"]"})}N.sMask!==void 0&&G.push({key:"SMask",value:N.objectId+1+" 0 R"});var Ce=N.filter!==void 0?["/"+N.filter]:void 0;if(z({data:N.data,additionalKeyValues:G,alreadyAppliedFilters:Ce,objectId:N.objectId}),O("endobj"),"sMask"in N&&N.sMask!==void 0){var Te="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,J={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:Te,data:N.sMask};"filter"in N&&(J.filter=N.filter),T.call(this,J)}if(N.colorSpace===F.INDEXED){var H=this.internal.newObject();z({data:$(new Uint8Array(N.palette)),objectId:H}),O("endobj")}},s=function(){var T=this.internal.collections.addImage_images;for(var N in T)i.call(this,T[N])},o=function(){var T,N=this.internal.collections.addImage_images,O=this.internal.write;for(var z in N)O("/I"+(T=N[z]).index,T.objectId,"0","R")},u=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},f=function(){var T=this.internal.collections.addImage_images;return u.call(this),T},d=function(){return Object.keys(this.internal.collections.addImage_images).length},m=function(T){return typeof e["process"+T.toUpperCase()]=="function"},_=function(T){return ao(T)==="object"&&T.nodeType===1},b=function(T,N){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var O=""+T.getAttribute("src");if(O.indexOf("data:image/")===0)return ap(unescape(O).split("base64,").pop());var z=e.loadFile(O,!0);if(z!==void 0)return z}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var q;switch(N){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;case"JPEG":case"JPG":default:q="image/jpeg"}return ap(T.toDataURL(q,1).split("base64,").pop())}},y=function(T){var N=this.internal.collections.addImage_images;if(N){for(var O in N)if(T===N[O].alias)return N[O]}},M=function(T,N,O){return T||N||(T=-96,N=-96),T<0&&(T=-1*O.width*72/T/this.internal.scaleFactor),N<0&&(N=-1*O.height*72/N/this.internal.scaleFactor),T===0&&(T=N*O.width/O.height),N===0&&(N=T*O.height/O.width),[T,N]},k=function(T,N,O,z,q,G){var oe=M.call(this,O,z,q),ie=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,Ce=f.call(this);if(O=oe[0],z=oe[1],Ce[q.index]=q,G){G*=Math.PI/180;var Te=Math.cos(G),J=Math.sin(G),H=function(ue){return ue.toFixed(4)},Q=[H(Te),H(J),H(-1*J),H(Te),0,0,"cm"]}this.internal.write("q"),G?(this.internal.write([1,"0","0",1,ie(T),_e(N+z),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([ie(O),"0","0",ie(z),"0","0","cm"].join(" "))):this.internal.write([ie(O),"0","0",ie(z),ie(T),_e(N+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},F=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var I=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=e.__addimage__.sHashCode=function(T){var N,O,z=0;if(typeof T=="string")for(O=T.length,N=0;N<O;N++)z=(z<<5)-z+T.charCodeAt(N),z|=0;else if(fe(T))for(O=T.byteLength/2,N=0;N<O;N++)z=(z<<5)-z+T[N],z|=0;return z},Y=e.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var N=!0;return T.length===0&&(N=!1),T.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(N=!1),N},ee=e.__addimage__.extractImageFromDataUrl=function(T){var N=(T=T||"").split("base64,"),O=null;if(N.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(N[0]);Array.isArray(z)&&(O={mimeType:z[1],charset:z[2],data:N[1]})}return O},he=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(T){return he()&&T instanceof ArrayBuffer};var fe=e.__addimage__.isArrayBufferView=function(T){return he()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},ve=e.__addimage__.binaryStringToUint8Array=function(T){for(var N=T.length,O=new Uint8Array(N),z=0;z<N;z++)O[z]=T.charCodeAt(z);return O},$=e.__addimage__.arrayBufferToBinaryString=function(T){for(var N="",O=fe(T)?T:new Uint8Array(T),z=0;z<O.length;z+=8192)N+=String.fromCharCode.apply(null,O.subarray(z,z+8192));return N};e.addImage=function(){var T,N,O,z,q,G,oe,ie,_e;if(typeof arguments[1]=="number"?(N=n,O=arguments[1],z=arguments[2],q=arguments[3],G=arguments[4],oe=arguments[5],ie=arguments[6],_e=arguments[7]):(N=arguments[1],O=arguments[2],z=arguments[3],q=arguments[4],G=arguments[5],oe=arguments[6],ie=arguments[7],_e=arguments[8]),ao(T=arguments[0])==="object"&&!_(T)&&"imageData"in T){var Ce=T;T=Ce.imageData,N=Ce.format||N||n,O=Ce.x||O||0,z=Ce.y||z||0,q=Ce.w||Ce.width||q,G=Ce.h||Ce.height||G,oe=Ce.alias||oe,ie=Ce.compression||ie,_e=Ce.rotation||Ce.angle||_e}var Te=this.internal.getFilters();if(ie===void 0&&Te.indexOf("FlateEncode")!==-1&&(ie="SLOW"),isNaN(O)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var J=U.call(this,T,N,oe,ie);return k.call(this,O,z,q,G,J,_e),this};var U=function(T,N,O,z){var q,G,oe;if(typeof T=="string"&&r(T)===n){T=unescape(T);var ie=Z(T,!1);(ie!==""||(ie=e.loadFile(T,!0))!==void 0)&&(T=ie)}if(_(T)&&(T=b(T,N)),N=r(T,N),!m(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((oe=O)==null||oe.length===0)&&(O=function(_e){return typeof _e=="string"||fe(_e)?R(_e):fe(_e.data)?R(_e.data):null}(T)),(q=y.call(this,O))||(he()&&(T instanceof Uint8Array||N==="RGBA"||(G=T,T=ve(T))),q=this["process"+N.toUpperCase()](T,d.call(this),O,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in e.image_compression?_e:I.NONE}(z),G)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},Z=e.__addimage__.convertBase64ToBinaryString=function(T,N){var O;N=typeof N!="boolean"||N;var z,q="";if(typeof T=="string"){z=(O=ee(T))!==null?O.data:T;try{q=ap(z)}catch(G){if(N)throw Y(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+G.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return q};e.getImageProperties=function(T){var N,O,z="";if(_(T)&&(T=b(T)),typeof T=="string"&&r(T)===n&&((z=Z(T,!1))===""&&(z=e.loadFile(T)||""),T=z),O=r(T),!m(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!he()||T instanceof Uint8Array||(T=ve(T)),!(N=this["process"+O.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=O,N}})(kr.API),function(e){var n=function(t){if(t!==void 0&&t!="")return!0};kr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,m=!1,_=0;_<d.length&&!m;_++)switch((r=d[_]).type){case"link":(n(r.options.url)||n(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var b=0;b<d.length;b++){r=d[b];var y=this.internal.pdfEscape,M=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),F=this.internal.newAdditionalObject(),I=this.internal.getEncryptor(k.objId),R=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y)+"] ")+"/Contents ("+y(I(r.contents))+")",s+=" /Popup "+F.objId+" 0 R",s+=" /P "+f.objId+" 0 R",s+=" /T ("+y(I(R))+") >>",k.content=s;var Y=k.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+u(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+u(r.bounds.y)+"] ")+" /Parent "+Y,r.open&&(s+=" /Open true"),s+=" >>",F.content=s,this.internal.write(k.objId,"0 R",F.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+u(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+u(r.bounds.y+r.bounds.h)+"] ";var ee=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+y(M(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ee+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var he=this.annotations._nameMap[r.options.name];r.options.pageNumber=he.page,r.options.top=he.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+y(M(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var fe=u(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+fe+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},e.link=function(t,r,i,s,o){var u=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;u.pageContext.annotations.push({finalBounds:{x:f(t),y:d(r),w:f(t+i),h:d(r+s)},options:o,type:"link"})},e.textWithLink=function(t,r,i,s){var o,u,f=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){u=s.maxWidth;var m=this.splitTextToSize(t,u).length;o=Math.ceil(d*m)}else u=f,o=d;return this.text(t,r,i,s),i+=.2*d,s.align==="center"&&(r-=f/2),s.align==="right"&&(r-=f),this.link(r,i-d,u,o,s),f},e.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(kr.API),function(e){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(k){return n[k.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},u=e.__arabicParser__.isArabicEndLetter=function(k){return o(k)&&s(k)&&n[k.charCodeAt(0)].length<=2},f=e.__arabicParser__.isArabicAlfLetter=function(k){return o(k)&&i.indexOf(k.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return o(k)&&s(k)&&n[k.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(k){return o(k)&&s(k)&&n[k.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(k){return o(k)&&s(k)&&n[k.charCodeAt(0)].length>=3};var m=e.__arabicParser__.arabicLetterHasMedialForm=function(k){return o(k)&&s(k)&&n[k.charCodeAt(0)].length==4},_=e.__arabicParser__.resolveLigatures=function(k){var F=0,I=t,R="",Y=0;for(F=0;F<k.length;F+=1)I[k.charCodeAt(F)]!==void 0?(Y++,typeof(I=I[k.charCodeAt(F)])=="number"&&(R+=String.fromCharCode(I),I=t,Y=0),F===k.length-1&&(I=t,R+=k.charAt(F-(Y-1)),F-=Y-1,Y=0)):(I=t,R+=k.charAt(F-Y),F-=Y,Y=0);return R};e.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&r[k.charCodeAt(0)]!==void 0};var b=e.__arabicParser__.getCorrectForm=function(k,F,I){return o(k)?s(k)===!1?-1:!d(k)||!o(F)&&!o(I)||!o(I)&&u(F)||u(k)&&!o(F)||u(k)&&f(F)||u(k)&&u(F)?0:m(k)&&o(F)&&!u(F)&&o(I)&&d(I)?3:u(k)||!o(I)?1:2:-1},y=function(k){var F=0,I=0,R=0,Y="",ee="",he="",fe=(k=k||"").split("\\s+"),ve=[];for(F=0;F<fe.length;F+=1){for(ve.push(""),I=0;I<fe[F].length;I+=1)Y=fe[F][I],ee=fe[F][I-1],he=fe[F][I+1],o(Y)?(R=b(Y,ee,he),ve[F]+=R!==-1?String.fromCharCode(n[Y.charCodeAt(0)][R]):Y):ve[F]+=Y;ve[F]=_(ve[F])}return ve.join(" ")},M=e.__arabicParser__.processArabic=e.processArabic=function(){var k,F=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,I=[];if(Array.isArray(F)){var R=0;for(I=[],R=0;R<F.length;R+=1)Array.isArray(F[R])?I.push([y(F[R][0]),F[R][1],F[R][2]]):I.push([y(F[R])]);k=I}else k=y(F);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};e.events.push(["preProcessText",M])}(kr.API),kr.API.autoPrint=function(e){var n;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})}return this},function(e){var n=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(u){t=u}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(u){r=isNaN(u)||Number.isInteger(u)===!1||u<0?150:u,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(u){i=isNaN(u)||Number.isInteger(u)===!1||u<0?300:u,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(u){s=u}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(u){o=u}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])}(kr.API),function(e){var n={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(k){f=k}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(k){d=k}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(k){m=k}});var _=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _},set:function(k){_=k}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(k){b=k}});var y=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return y},set:function(k){y=k}});var M=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return M},set:function(k){M=k}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(f){return r.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},e.getTextDimensions=function(f,d){r.call(this);var m=(d=d||{}).fontSize||this.getFontSize(),_=d.font||this.getFont(),b=d.scaleFactor||this.internal.scaleFactor,y=0,M=0,k=0,F=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var I=d.maxWidth;I>0?typeof f=="string"?f=this.splitTextToSize(f,I):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(Y,ee){return Y.concat(F.splitTextToSize(ee,I))},[])):f=Array.isArray(f)?f:[f];for(var R=0;R<f.length;R++)y<(k=this.getStringUnitWidth(f[R],{font:_})*m)&&(y=k);return y!==0&&(M=f.length),{w:y/=b,h:Math.max((M*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/b,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var f=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new s(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var f;f=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,_=this.internal.__cell__.margins||n,b=this.internal.__cell__.tableHeaderRow,y=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===f.lineNumber?(f.x=(d.x||0)+(d.width||0),f.y=d.y||0):d.y+d.height+f.height+_.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=_.top,y&&b&&(this.printHeaderRow(f.lineNumber,!0),f.y+=b[0].height)):f.y=d.y+d.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-m,f.y+m,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+m,{align:"center",baseline:"top",maxWidth:f.width-m-m}):this.text(f.text,f.x+m,f.y+m,{align:"left",baseline:"top",maxWidth:f.width-m-m})),this.internal.__cell__.lastCell=f,this};e.table=function(f,d,m,_,b){if(r.call(this),!m)throw new Error("No data for PDF table.");var y,M,k,F,I=[],R=[],Y=[],ee={},he={},fe=[],ve=[],$=(b=b||{}).autoSize||!1,U=b.printHeaders!==!1,Z=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,T=b.margins||Object.assign({width:this.getPageWidth()},n),N=typeof b.padding=="number"?b.padding:3,O=b.headerBackgroundColor||"#c8c8c8",z=b.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=U,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=z,this.setFontSize(Z),_==null)R=I=Object.keys(m[0]),Y=I.map(function(){return"left"});else if(Array.isArray(_)&&ao(_[0])==="object")for(I=_.map(function(Ce){return Ce.name}),R=_.map(function(Ce){return Ce.prompt||Ce.name||""}),Y=_.map(function(Ce){return Ce.align||"left"}),y=0;y<_.length;y+=1)he[_[y].name]=_[y].width*(19.049976/25.4);else Array.isArray(_)&&typeof _[0]=="string"&&(R=I=_,Y=I.map(function(){return"left"}));if($||Array.isArray(_)&&typeof _[0]=="string")for(y=0;y<I.length;y+=1){for(ee[F=I[y]]=m.map(function(Ce){return Ce[F]}),this.setFont(void 0,"bold"),fe.push(this.getTextDimensions(R[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),M=ee[F],this.setFont(void 0,"normal"),k=0;k<M.length;k+=1)fe.push(this.getTextDimensions(M[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);he[F]=Math.max.apply(null,fe)+N+N,fe=[]}if(U){var q={};for(y=0;y<I.length;y+=1)q[I[y]]={},q[I[y]].text=R[y],q[I[y]].align=Y[y];var G=u.call(this,q,he);ve=I.map(function(Ce){return new s(f,d,he[Ce],G,q[Ce].text,void 0,q[Ce].align)}),this.setTableHeaderRow(ve),this.printHeaderRow(1,!1)}var oe=_.reduce(function(Ce,Te){return Ce[Te.name]=Te.align,Ce},{});for(y=0;y<m.length;y+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:y,data:m[y]},this);var ie=u.call(this,m[y],he);for(k=0;k<I.length;k+=1){var _e=m[y][I[k]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:y,col:k,data:_e},this),o.call(this,new s(f,d,he[I[k]],ie,_e,y+2,oe[I[k]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=d,this};var u=function(f,d){var m=this.internal.__cell__.padding,_=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(f).map(function(y){var M=f[y];return this.splitTextToSize(M.hasOwnProperty("text")?M.text:M,d[y]-m-m)},this).map(function(y){return this.getLineHeightFactor()*y.length*_/b+m+m},this).reduce(function(y,M){return Math.max(y,M)},0)};e.setTableHeaderRow=function(f){r.call(this),this.internal.__cell__.tableHeaderRow=f},e.printHeaderRow=function(f,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var _=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(_[0],_[1],_[2],_[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],y=0;y<this.internal.__cell__.tableHeaderRow.length;y+=1){m=this.internal.__cell__.tableHeaderRow[y].clone(),d&&(m.y=this.internal.__cell__.margins.top||0,b.push(m)),m.lineNumber=f;var M=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,m),this.setTextColor(M)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),t=!1}}(kr.API);var Tx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Nx=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],E1=kx(Nx),Dx=[100,200,300,400,500,600,700,800,900],AF=kx(Dx);function C1(e){var n=e.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return Tx[s=s||"normal"]?s:"normal"}(e.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(s){return typeof E1[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:n,style:t,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:n,style:[i,t,r].join(" ")}}}function Tb(e,n,t,r){var i;for(i=t;i>=0&&i<n.length;i+=r)if(e[n[i]])return e[n[i]];for(i=t;i>=0&&i<n.length;i-=r)if(e[n[i]])return e[n[i]]}var kF={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Nb={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Db(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function TF(e,n,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},kF,t.genericFontFamilies||{}),s=null,o=null,u=0;u<n.length;++u)if(i[(s=C1(n[u])).family]&&(s.family=i[s.family]),e.hasOwnProperty(s.family)){o=e[s.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+Db(s)+"' and default family '"+r+"'.");if(o=function(f,d){if(d[f])return d[f];var m=E1[f],_=m<=E1.normal?-1:1,b=Tb(d,Nx,m,_);if(!b)throw new Error("Could not find a matching font-stretch value for "+f);return b}(s.stretch,o),o=function(f,d){if(d[f])return d[f];for(var m=Tx[f],_=0;_<m.length;++_)if(d[m[_]])return d[m[_]];throw new Error("Could not find a matching font-style for "+f)}(s.style,o),!(o=function(f,d){if(d[f])return d[f];if(f===400&&d[500])return d[500];if(f===500&&d[400])return d[400];var m=AF[f],_=Tb(d,Dx,m,f<400?-1:1);if(!_)throw new Error("Could not find a matching font-weight for value "+f);return _}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Db(s)+"'.");return o}function Ib(e){return e.trimLeft()}function NF(e,n){for(var t=0;t<e.length;){if(e.charAt(t)===n)return[e.substring(0,t),e.substring(t+1)];t+=1}return null}function DF(e){var n=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],e.substring(n[0].length)]}var wg,Ob,Bb,dv=["times"];(function(e){var n,t,r,i,s,o,u,f,d,m=function(J){return J=J||{},this.isStrokeTransparent=J.isStrokeTransparent||!1,this.strokeOpacity=J.strokeOpacity||1,this.strokeStyle=J.strokeStyle||"#000000",this.fillStyle=J.fillStyle||"#000000",this.isFillTransparent=J.isFillTransparent||!1,this.fillOpacity=J.fillOpacity||1,this.font=J.font||"10px sans-serif",this.textBaseline=J.textBaseline||"alphabetic",this.textAlign=J.textAlign||"left",this.lineWidth=J.lineWidth||1,this.lineJoin=J.lineJoin||"miter",this.lineCap=J.lineCap||"butt",this.path=J.path||[],this.transform=J.transform!==void 0?J.transform.clone():new f,this.globalCompositeOperation=J.globalCompositeOperation||"normal",this.globalAlpha=J.globalAlpha||1,this.clip_path=J.clip_path||[],this.currentPoint=J.currentPoint||new o,this.miterLimit=J.miterLimit||10,this.lastPoint=J.lastPoint||new o,this.lineDashOffset=J.lineDashOffset||0,this.lineDash=J.lineDash||[],this.margin=J.margin||[0,0,0,0],this.prevPageLastElemOffset=J.prevPageLastElemOffset||0,this.ignoreClearRect=typeof J.ignoreClearRect!="boolean"||J.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new _(this),n=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,u=this.internal.Rectangle,f=this.internal.Matrix,d=new m}]);var _=function(J){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=J;Object.defineProperty(this,"pdf",{get:function(){return H}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(ye){Q=!!ye}});var ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ue},set:function(ye){ue=!!ye}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(ye){isNaN(ye)||(se=ye)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(ye){isNaN(ye)||(pe=ye)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ye){var de;typeof ye=="number"?de=[ye,ye,ye,ye]:((de=new Array(4))[0]=ye[0],de[1]=ye.length>=2?ye[1]:de[0],de[2]=ye.length>=3?ye[2]:de[0],de[3]=ye.length>=4?ye[3]:de[1]),d.margin=de}});var K=!1;Object.defineProperty(this,"autoPaging",{get:function(){return K},set:function(ye){K=ye}});var D=0;Object.defineProperty(this,"lastBreak",{get:function(){return D},set:function(ye){D=ye}});var ke=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ke},set:function(ye){ke=ye}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ye){ye instanceof m&&(d=ye)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ye){d.path=ye}});var Me=[];Object.defineProperty(this,"ctxStack",{get:function(){return Me},set:function(ye){Me=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var de;de=b(ye),this.ctx.fillStyle=de.style,this.ctx.isFillTransparent=de.a===0,this.ctx.fillOpacity=de.a,this.pdf.setFillColor(de.r,de.g,de.b,{a:de.a}),this.pdf.setTextColor(de.r,de.g,de.b,{a:de.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var de=b(ye);this.ctx.strokeStyle=de.style,this.ctx.isStrokeTransparent=de.a===0,this.ctx.strokeOpacity=de.a,de.a===0?this.pdf.setDrawColor(255,255,255):(de.a,this.pdf.setDrawColor(de.r,de.g,de.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var Ge=null;function ce(ye,de){if(Ge===null){var We=function(He){var tt=[];return Object.keys(He).forEach(function(Ze){He[Ze].forEach(function(et){var ze=null;switch(et){case"bold":ze={family:Ze,weight:"bold"};break;case"italic":ze={family:Ze,style:"italic"};break;case"bolditalic":ze={family:Ze,weight:"bold",style:"italic"};break;case"":case"normal":ze={family:Ze}}ze!==null&&(ze.ref={name:Ze,style:et},tt.push(ze))})}),tt}(ye.getFontList());Ge=function(He){for(var tt={},Ze=0;Ze<He.length;++Ze){var et=C1(He[Ze]),ze=et.family,wt=et.stretch,Pt=et.style,kt=et.weight;tt[ze]=tt[ze]||{},tt[ze][wt]=tt[ze][wt]||{},tt[ze][wt][Pt]=tt[ze][wt][Pt]||{},tt[ze][wt][Pt][kt]=et}return tt}(We.concat(de))}return Ge}var te=null;Object.defineProperty(this,"fontFaces",{get:function(){return te},set:function(ye){Ge=null,te=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var de;if(this.ctx.font=ye,(de=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ye))!==null){var We=de[1],He=(de[2],de[3]),tt=de[4],Ze=(de[5],de[6]),et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(tt)[2];tt=Math.floor(et==="px"?parseFloat(tt)*this.pdf.internal.scaleFactor:et==="em"?parseFloat(tt)*this.pdf.getFontSize():parseFloat(tt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(tt);var ze=function(Ke){var ot,rt,$t=[],Qt=Ke.trim();if(Qt==="")return dv;if(Qt in Nb)return[Nb[Qt]];for(;Qt!=="";){switch(rt=null,ot=(Qt=Ib(Qt)).charAt(0)){case'"':case"'":rt=NF(Qt.substring(1),ot);break;default:rt=DF(Qt)}if(rt===null||($t.push(rt[0]),(Qt=Ib(rt[1]))!==""&&Qt.charAt(0)!==","))return dv;Qt=Qt.replace(/^,/,"")}return $t}(Ze);if(this.fontFaces){var wt=TF(ce(this.pdf,this.fontFaces),ze.map(function(Ke){return{family:Ke,stretch:"normal",weight:He,style:We}}));this.pdf.setFont(wt.ref.name,wt.ref.style)}else{var Pt="";(He==="bold"||parseInt(He,10)>=700||We==="bold")&&(Pt="bold"),We==="italic"&&(Pt+="italic"),Pt.length===0&&(Pt="normal");for(var kt="",Jt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},on=0;on<ze.length;on++){if(this.pdf.internal.getFont(ze[on],Pt,{noFallback:!0,disableWarning:!0})!==void 0){kt=ze[on];break}if(Pt==="bolditalic"&&this.pdf.internal.getFont(ze[on],"bold",{noFallback:!0,disableWarning:!0})!==void 0)kt=ze[on],Pt="bold";else if(this.pdf.internal.getFont(ze[on],"normal",{noFallback:!0,disableWarning:!0})!==void 0){kt=ze[on],Pt="normal";break}}if(kt===""){for(var cn=0;cn<ze.length;cn++)if(Jt[ze[cn]]){kt=Jt[ze[cn]];break}}kt=kt===""?"Times":kt,this.pdf.setFont(kt,Pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,Te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,Te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};_.prototype.setLineDash=function(J){this.lineDash=J},_.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},_.prototype.fill=function(){ee.call(this,"fill",!1)},_.prototype.stroke=function(){ee.call(this,"stroke",!1)},_.prototype.beginPath=function(){this.path=[{type:"begin"}]},_.prototype.moveTo=function(J,H){if(isNaN(J)||isNaN(H))throw vo.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new o(J,H));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(J,H)},_.prototype.closePath=function(){var J=new o(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&ao(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){J=new o(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(J.x,J.y)},_.prototype.lineTo=function(J,H){if(isNaN(J)||isNaN(H))throw vo.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new o(J,H));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(Q.x,Q.y)},_.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ee.call(this,null,!0)},_.prototype.quadraticCurveTo=function(J,H,Q,ue){if(isNaN(Q)||isNaN(ue)||isNaN(J)||isNaN(H))throw vo.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(Q,ue)),pe=this.ctx.transform.applyToPoint(new o(J,H));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},_.prototype.bezierCurveTo=function(J,H,Q,ue,se,pe){if(isNaN(se)||isNaN(pe)||isNaN(J)||isNaN(H)||isNaN(Q)||isNaN(ue))throw vo.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var K=this.ctx.transform.applyToPoint(new o(se,pe)),D=this.ctx.transform.applyToPoint(new o(J,H)),ke=this.ctx.transform.applyToPoint(new o(Q,ue));this.path.push({type:"bct",x1:D.x,y1:D.y,x2:ke.x,y2:ke.y,x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},_.prototype.arc=function(J,H,Q,ue,se,pe){if(isNaN(J)||isNaN(H)||isNaN(Q)||isNaN(ue)||isNaN(se))throw vo.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var K=this.ctx.transform.applyToPoint(new o(J,H));J=K.x,H=K.y;var D=this.ctx.transform.applyToPoint(new o(0,Q)),ke=this.ctx.transform.applyToPoint(new o(0,0));Q=Math.sqrt(Math.pow(D.x-ke.x,2)+Math.pow(D.y-ke.y,2))}Math.abs(se-ue)>=2*Math.PI&&(ue=0,se=2*Math.PI),this.path.push({type:"arc",x:J,y:H,radius:Q,startAngle:ue,endAngle:se,counterclockwise:pe})},_.prototype.arcTo=function(J,H,Q,ue,se){throw new Error("arcTo not implemented.")},_.prototype.rect=function(J,H,Q,ue){if(isNaN(J)||isNaN(H)||isNaN(Q)||isNaN(ue))throw vo.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(J,H),this.lineTo(J+Q,H),this.lineTo(J+Q,H+ue),this.lineTo(J,H+ue),this.lineTo(J,H),this.lineTo(J+Q,H),this.lineTo(J,H)},_.prototype.fillRect=function(J,H,Q,ue){if(isNaN(J)||isNaN(H)||isNaN(Q)||isNaN(ue))throw vo.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!y.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(J,H,Q,ue),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},_.prototype.strokeRect=function(J,H,Q,ue){if(isNaN(J)||isNaN(H)||isNaN(Q)||isNaN(ue))throw vo.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");M.call(this)||(this.beginPath(),this.rect(J,H,Q,ue),this.stroke())},_.prototype.clearRect=function(J,H,Q,ue){if(isNaN(J)||isNaN(H)||isNaN(Q)||isNaN(ue))throw vo.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(J,H,Q,ue))},_.prototype.save=function(J){J=typeof J!="boolean"||J;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),J){this.ctx.fontSize=this.pdf.internal.getFontSize();var ue=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ue}},_.prototype.restore=function(J){J=typeof J!="boolean"||J;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(H),J&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},_.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(J){var H,Q,ue,se;if(J.isCanvasGradient===!0&&(J=J.getColor()),!J)return{r:0,g:0,b:0,a:0,style:J};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(J))H=0,Q=0,ue=0,se=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(J);if(pe!==null)H=parseInt(pe[1]),Q=parseInt(pe[2]),ue=parseInt(pe[3]),se=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(J))!==null)H=parseInt(pe[1]),Q=parseInt(pe[2]),ue=parseInt(pe[3]),se=parseFloat(pe[4]);else{if(se=1,typeof J=="string"&&J.charAt(0)!=="#"){var K=new Sx(J);J=K.ok?K.toHex():"#000000"}J.length===4?(H=J.substring(1,2),H+=H,Q=J.substring(2,3),Q+=Q,ue=J.substring(3,4),ue+=ue):(H=J.substring(1,3),Q=J.substring(3,5),ue=J.substring(5,7)),H=parseInt(H,16),Q=parseInt(Q,16),ue=parseInt(ue,16)}}return{r:H,g:Q,b:ue,a:se,style:J}},y=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},M=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};_.prototype.fillText=function(J,H,Q,ue){if(isNaN(H)||isNaN(Q)||typeof J!="string")throw vo.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ue=isNaN(ue)?void 0:ue,!y.call(this)){var se=ie(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;N.call(this,{text:J,x:H,y:Q,scale:pe,angle:se,align:this.textAlign,maxWidth:ue})}},_.prototype.strokeText=function(J,H,Q,ue){if(isNaN(H)||isNaN(Q)||typeof J!="string")throw vo.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!M.call(this)){ue=isNaN(ue)?void 0:ue;var se=ie(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;N.call(this,{text:J,x:H,y:Q,scale:pe,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:ue})}},_.prototype.measureText=function(J){if(typeof J!="string")throw vo.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,Q=this.pdf.internal.scaleFactor,ue=H.internal.getFontSize(),se=H.getStringUnitWidth(J)*ue/H.internal.scaleFactor,pe=function(K){var D=(K=K||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return D}}),this};return new pe({width:se*=Math.round(96*Q/72*1e4)/1e4})},_.prototype.scale=function(J,H){if(isNaN(J)||isNaN(H))throw vo.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new f(J,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},_.prototype.rotate=function(J){if(isNaN(J))throw vo.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new f(Math.cos(J),Math.sin(J),-Math.sin(J),Math.cos(J),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},_.prototype.translate=function(J,H){if(isNaN(J)||isNaN(H))throw vo.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new f(1,0,0,1,J,H);this.ctx.transform=this.ctx.transform.multiply(Q)},_.prototype.transform=function(J,H,Q,ue,se,pe){if(isNaN(J)||isNaN(H)||isNaN(Q)||isNaN(ue)||isNaN(se)||isNaN(pe))throw vo.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var K=new f(J,H,Q,ue,se,pe);this.ctx.transform=this.ctx.transform.multiply(K)},_.prototype.setTransform=function(J,H,Q,ue,se,pe){J=isNaN(J)?1:J,H=isNaN(H)?0:H,Q=isNaN(Q)?0:Q,ue=isNaN(ue)?1:ue,se=isNaN(se)?0:se,pe=isNaN(pe)?0:pe,this.ctx.transform=new f(J,H,Q,ue,se,pe)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};_.prototype.drawImage=function(J,H,Q,ue,se,pe,K,D,ke){var Me=this.pdf.getImageProperties(J),Ge=1,ce=1,te=1,ye=1;ue!==void 0&&D!==void 0&&(te=D/ue,ye=ke/se,Ge=Me.width/ue*D/ue,ce=Me.height/se*ke/se),pe===void 0&&(pe=H,K=Q,H=0,Q=0),ue!==void 0&&D===void 0&&(D=ue,ke=se),ue===void 0&&D===void 0&&(D=Me.width,ke=Me.height);for(var de,We=this.ctx.transform.decompose(),He=ie(We.rotate.shx),tt=new f,Ze=(tt=(tt=(tt=tt.multiply(We.translate)).multiply(We.skew)).multiply(We.scale)).applyToRectangle(new u(pe-H*te,K-Q*ye,ue*Ge,se*ce)),et=F.call(this,Ze),ze=[],wt=0;wt<et.length;wt+=1)ze.indexOf(et[wt])===-1&&ze.push(et[wt]);if(Y(ze),this.autoPaging)for(var Pt=ze[0],kt=ze[ze.length-1],Jt=Pt;Jt<kt+1;Jt++){this.pdf.setPage(Jt);var on=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],cn=Jt===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=Jt===1?0:Ke+(Jt-2)*ot;if(this.ctx.clip_path.length!==0){var $t=this.path;de=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(de,this.posX+this.margin[3],-rt+cn+this.ctx.prevPageLastElemOffset),he.call(this,"fill",!0),this.path=$t}var Qt=JSON.parse(JSON.stringify(Ze));Qt=R([Qt],this.posX+this.margin[3],-rt+cn+this.ctx.prevPageLastElemOffset)[0];var Rn=(Jt>Pt||Jt<kt)&&k.call(this);Rn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],on,ot,null).clip().discardPath()),this.pdf.addImage(J,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,He),Rn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(J,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,He)};var F=function(J,H,Q){var ue=[];H=H||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(J.type){default:case"mt":case"lt":ue.push(Math.floor((J.y+se)/Q)+1);break;case"arc":ue.push(Math.floor((J.y+se-J.radius)/Q)+1),ue.push(Math.floor((J.y+se+J.radius)/Q)+1);break;case"qct":var pe=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,J.x1,J.y1,J.x,J.y);ue.push(Math.floor((pe.y+se)/Q)+1),ue.push(Math.floor((pe.y+pe.h+se)/Q)+1);break;case"bct":var K=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,J.x1,J.y1,J.x2,J.y2,J.x,J.y);ue.push(Math.floor((K.y+se)/Q)+1),ue.push(Math.floor((K.y+K.h+se)/Q)+1);break;case"rect":ue.push(Math.floor((J.y+se)/Q)+1),ue.push(Math.floor((J.y+J.h+se)/Q)+1)}for(var D=0;D<ue.length;D+=1)for(;this.pdf.internal.getNumberOfPages()<ue[D];)I.call(this);return ue},I=function(){var J=this.fillStyle,H=this.strokeStyle,Q=this.font,ue=this.lineCap,se=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=J,this.strokeStyle=H,this.font=Q,this.lineCap=ue,this.lineWidth=se,this.lineJoin=pe},R=function(J,H,Q){for(var ue=0;ue<J.length;ue++)switch(J[ue].type){case"bct":J[ue].x2+=H,J[ue].y2+=Q;case"qct":J[ue].x1+=H,J[ue].y1+=Q;case"mt":case"lt":case"arc":default:J[ue].x+=H,J[ue].y+=Q}return J},Y=function(J){return J.sort(function(H,Q){return H-Q})},ee=function(J,H){for(var Q,ue,se=this.fillStyle,pe=this.strokeStyle,K=this.lineCap,D=this.lineWidth,ke=Math.abs(D*this.ctx.transform.scaleX),Me=this.lineJoin,Ge=JSON.parse(JSON.stringify(this.path)),ce=JSON.parse(JSON.stringify(this.path)),te=[],ye=0;ye<ce.length;ye++)if(ce[ye].x!==void 0)for(var de=F.call(this,ce[ye]),We=0;We<de.length;We+=1)te.indexOf(de[We])===-1&&te.push(de[We]);for(var He=0;He<te.length;He++)for(;this.pdf.internal.getNumberOfPages()<te[He];)I.call(this);if(Y(te),this.autoPaging)for(var tt=te[0],Ze=te[te.length-1],et=tt;et<Ze+1;et++){this.pdf.setPage(et),this.fillStyle=se,this.strokeStyle=pe,this.lineCap=K,this.lineWidth=ke,this.lineJoin=Me;var ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],wt=et===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Jt=et===1?0:Pt+(et-2)*kt;if(this.ctx.clip_path.length!==0){var on=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Q,this.posX+this.margin[3],-Jt+wt+this.ctx.prevPageLastElemOffset),he.call(this,J,!0),this.path=on}if(ue=JSON.parse(JSON.stringify(Ge)),this.path=R(ue,this.posX+this.margin[3],-Jt+wt+this.ctx.prevPageLastElemOffset),H===!1||et===0){var cn=(et>tt||et<Ze)&&k.call(this);cn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ze,kt,null).clip().discardPath()),he.call(this,J,H),cn&&this.pdf.restoreGraphicsState()}this.lineWidth=D}else this.lineWidth=ke,he.call(this,J,H),this.lineWidth=D;this.path=Ge},he=function(J,H){if((J!=="stroke"||H||!M.call(this))&&(J==="stroke"||H||!y.call(this))){for(var Q,ue,se=[],pe=this.path,K=0;K<pe.length;K++){var D=pe[K];switch(D.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:D,deltas:[],abs:[]});break;case"lt":var ke=se.length;if(pe[K-1]&&!isNaN(pe[K-1].x)&&(Q=[D.x-pe[K-1].x,D.y-pe[K-1].y],ke>0)){for(;ke>=0;ke--)if(se[ke-1].close!==!0&&se[ke-1].begin!==!0){se[ke-1].deltas.push(Q),se[ke-1].abs.push(D);break}}break;case"bct":Q=[D.x1-pe[K-1].x,D.y1-pe[K-1].y,D.x2-pe[K-1].x,D.y2-pe[K-1].y,D.x-pe[K-1].x,D.y-pe[K-1].y],se[se.length-1].deltas.push(Q);break;case"qct":var Me=pe[K-1].x+2/3*(D.x1-pe[K-1].x),Ge=pe[K-1].y+2/3*(D.y1-pe[K-1].y),ce=D.x+2/3*(D.x1-D.x),te=D.y+2/3*(D.y1-D.y),ye=D.x,de=D.y;Q=[Me-pe[K-1].x,Ge-pe[K-1].y,ce-pe[K-1].x,te-pe[K-1].y,ye-pe[K-1].x,de-pe[K-1].y],se[se.length-1].deltas.push(Q);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(D)}}ue=H?null:J==="stroke"?"stroke":"fill";for(var We=!1,He=0;He<se.length;He++)if(se[He].arc)for(var tt=se[He].abs,Ze=0;Ze<tt.length;Ze++){var et=tt[Ze];et.type==="arc"?$.call(this,et.x,et.y,et.radius,et.startAngle,et.endAngle,et.counterclockwise,void 0,H,!We):O.call(this,et.x,et.y),We=!0}else if(se[He].close===!0)this.pdf.internal.out("h"),We=!1;else if(se[He].begin!==!0){var ze=se[He].start.x,wt=se[He].start.y;z.call(this,se[He].deltas,ze,wt),We=!0}ue&&U.call(this,ue),H&&Z.call(this)}},fe=function(J){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return J-Q;case"top":return J+H-Q;case"hanging":return J+H-2*Q;case"middle":return J+H/2-Q;case"ideographic":return J;case"alphabetic":default:return J}},ve=function(J){return J+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};_.prototype.createLinearGradient=function(){var J=function(){};return J.colorStops=[],J.addColorStop=function(H,Q){this.colorStops.push([H,Q])},J.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},J.isCanvasGradient=!0,J},_.prototype.createPattern=function(){return this.createLinearGradient()},_.prototype.createRadialGradient=function(){return this.createLinearGradient()};var $=function(J,H,Q,ue,se,pe,K,D,ke){for(var Me=G.call(this,Q,ue,se,pe),Ge=0;Ge<Me.length;Ge++){var ce=Me[Ge];Ge===0&&(ke?T.call(this,ce.x1+J,ce.y1+H):O.call(this,ce.x1+J,ce.y1+H)),q.call(this,J,H,ce.x2,ce.y2,ce.x3,ce.y3,ce.x4,ce.y4)}D?Z.call(this):U.call(this,K)},U=function(J){switch(J){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(J,H){this.pdf.internal.out(t(J)+" "+r(H)+" m")},N=function(J){var H;switch(J.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var Q=this.pdf.getTextDimensions(J.text),ue=fe.call(this,J.y),se=ve.call(this,ue)-Q.h,pe=this.ctx.transform.applyToPoint(new o(J.x,ue)),K=this.ctx.transform.decompose(),D=new f;D=(D=(D=D.multiply(K.translate)).multiply(K.skew)).multiply(K.scale);for(var ke,Me,Ge,ce=this.ctx.transform.applyToRectangle(new u(J.x,ue,Q.w,Q.h)),te=D.applyToRectangle(new u(J.x,se,Q.w,Q.h)),ye=F.call(this,te),de=[],We=0;We<ye.length;We+=1)de.indexOf(ye[We])===-1&&de.push(ye[We]);if(Y(de),this.autoPaging)for(var He=de[0],tt=de[de.length-1],Ze=He;Ze<tt+1;Ze++){this.pdf.setPage(Ze);var et=Ze===1?this.posY+this.margin[0]:this.margin[0],ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[2],Pt=wt-this.margin[0],kt=this.pdf.internal.pageSize.width-this.margin[1],Jt=kt-this.margin[3],on=Ze===1?0:ze+(Ze-2)*Pt;if(this.ctx.clip_path.length!==0){var cn=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(ke,this.posX+this.margin[3],-1*on+et),he.call(this,"fill",!0),this.path=cn}var Ke=R([JSON.parse(JSON.stringify(te))],this.posX+this.margin[3],-on+et+this.ctx.prevPageLastElemOffset)[0];J.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*J.scale),Ge=this.lineWidth,this.lineWidth=Ge*J.scale);var ot=this.autoPaging!=="text";if(ot||Ke.y+Ke.h<=wt){if(ot||Ke.y>=et&&Ke.x<=kt){var rt=ot?J.text:this.pdf.splitTextToSize(J.text,J.maxWidth||kt-Ke.x)[0],$t=R([JSON.parse(JSON.stringify(ce))],this.posX+this.margin[3],-on+et+this.ctx.prevPageLastElemOffset)[0],Qt=ot&&(Ze>He||Ze<tt)&&k.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,Pt,null).clip().discardPath()),this.pdf.text(rt,$t.x,$t.y,{angle:J.angle,align:H,renderingMode:J.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else Ke.y<wt&&(this.ctx.prevPageLastElemOffset+=wt-Ke.y);J.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ge)}else J.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*J.scale),Ge=this.lineWidth,this.lineWidth=Ge*J.scale),this.pdf.text(J.text,pe.x+this.posX,pe.y+this.posY,{angle:J.angle,align:H,renderingMode:J.renderingMode,maxWidth:J.maxWidth}),J.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=Ge)},O=function(J,H,Q,ue){Q=Q||0,ue=ue||0,this.pdf.internal.out(t(J+Q)+" "+r(H+ue)+" l")},z=function(J,H,Q){return this.pdf.lines(J,H,Q,null,null)},q=function(J,H,Q,ue,se,pe,K,D){this.pdf.internal.out([n(i(Q+J)),n(s(ue+H)),n(i(se+J)),n(s(pe+H)),n(i(K+J)),n(s(D+H)),"c"].join(" "))},G=function(J,H,Q,ue){for(var se=2*Math.PI,pe=Math.PI/2;H>Q;)H-=se;var K=Math.abs(Q-H);K<se&&ue&&(K=se-K);for(var D=[],ke=ue?-1:1,Me=H;K>1e-5;){var Ge=Me+ke*Math.min(K,pe);D.push(oe.call(this,J,Me,Ge)),K-=Math.abs(Ge-Me),Me=Ge}return D},oe=function(J,H,Q){var ue=(Q-H)/2,se=J*Math.cos(ue),pe=J*Math.sin(ue),K=se,D=-pe,ke=K*K+D*D,Me=ke+K*se+D*pe,Ge=4/3*(Math.sqrt(2*ke*Me)-Me)/(K*pe-D*se),ce=K-Ge*D,te=D+Ge*K,ye=ce,de=-te,We=ue+H,He=Math.cos(We),tt=Math.sin(We);return{x1:J*Math.cos(H),y1:J*Math.sin(H),x2:ce*He-te*tt,y2:ce*tt+te*He,x3:ye*He-de*tt,y3:ye*tt+de*He,x4:J*Math.cos(Q),y4:J*Math.sin(Q)}},ie=function(J){return 180*J/Math.PI},_e=function(J,H,Q,ue,se,pe){var K=J+.5*(Q-J),D=H+.5*(ue-H),ke=se+.5*(Q-se),Me=pe+.5*(ue-pe),Ge=Math.min(J,se,K,ke),ce=Math.max(J,se,K,ke),te=Math.min(H,pe,D,Me),ye=Math.max(H,pe,D,Me);return new u(Ge,te,ce-Ge,ye-te)},Ce=function(J,H,Q,ue,se,pe,K,D){var ke,Me,Ge,ce,te,ye,de,We,He,tt,Ze,et,ze,wt,Pt=Q-J,kt=ue-H,Jt=se-Q,on=pe-ue,cn=K-se,Ke=D-pe;for(Me=0;Me<41;Me++)He=(de=(Ge=J+(ke=Me/40)*Pt)+ke*((te=Q+ke*Jt)-Ge))+ke*(te+ke*(se+ke*cn-te)-de),tt=(We=(ce=H+ke*kt)+ke*((ye=ue+ke*on)-ce))+ke*(ye+ke*(pe+ke*Ke-ye)-We),Me==0?(Ze=He,et=tt,ze=He,wt=tt):(Ze=Math.min(Ze,He),et=Math.min(et,tt),ze=Math.max(ze,He),wt=Math.max(wt,tt));return new u(Math.round(Ze),Math.round(et),Math.round(ze-Ze),Math.round(wt-et))},Te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var J,H,Q=(J=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:J,lineDashOffset:H}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(kr.API),function(e){var n=function(s){var o,u,f,d,m,_,b,y,M,k;for(u=[],f=0,d=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;d>f;f+=4)(m=(s.charCodeAt(f)<<24)+(s.charCodeAt(f+1)<<16)+(s.charCodeAt(f+2)<<8)+s.charCodeAt(f+3))!==0?(_=(m=((m=((m=((m=(m-(k=m%85))/85)-(M=m%85))/85)-(y=m%85))/85)-(b=m%85))/85)%85,u.push(_+33,b+33,y+33,M+33,k+33)):u.push(122);return function(F,I){for(var R=I;R>0;R--)F.pop()}(u,o.length),String.fromCharCode.apply(String,u)+"~>"},t=function(s){var o,u,f,d,m,_=String,b="length",y=255,M="charCodeAt",k="slice",F="replace";for(s[k](-2),s=s[k](0,-2)[F](/\s/g,"")[F]("z","!!!!!"),f=[],d=0,m=(s+=o="uuuuu"[k](s[b]%5||5))[b];m>d;d+=5)u=52200625*(s[M](d)-33)+614125*(s[M](d+1)-33)+7225*(s[M](d+2)-33)+85*(s[M](d+3)-33)+(s[M](d+4)-33),f.push(y&u>>24,y&u>>16,y&u>>8,y&u);return function(I,R){for(var Y=R;Y>0;Y--)I.pop()}(f,o[b]),_.fromCharCode.apply(_,f)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var u="",f=0;f<s.length;f+=2)u+=String.fromCharCode("0x"+(s[f]+s[f+1]));return u},i=function(s){for(var o=new Uint8Array(s.length),u=s.length;u--;)o[u]=s.charCodeAt(u);return s=(o=b1(o)).reduce(function(f,d){return f+String.fromCharCode(d)},"")};e.processDataByFilters=function(s,o){var u=0,f=s||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),u=0;u<o.length;u+=1)switch(o[u]){case"ASCII85Decode":case"/ASCII85Decode":f=t(f),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=n(f),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=r(f),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(m){return("0"+m.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=i(f),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[u]+'" is not implemented')}return{data:f,reverseChain:d.reverse().join(" ")}}}(kr.API),function(e){e.loadFile=function(n,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var u=void 0;try{u=function(f,d,m){var _=new XMLHttpRequest,b=0,y=function(M){var k=M.length,F=[],I=String.fromCharCode;for(b=0;b<k;b+=1)F.push(I(255&M.charCodeAt(b)));return F.join("")};if(_.open("GET",f,!d),_.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(_.onload=function(){_.status===200?m(y(this.responseText)):m(void 0)}),_.send(null),d&&_.status===200)return y(_.responseText)}(i,s,o)}catch{}return u}(n,t,r)},e.loadImageFile=e.loadFile}(kr.API),function(e){function n(){return(Dr.html2canvas?Promise.resolve(Dr.html2canvas):mf(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Dr.DOMPurify?Promise.resolve(Dr.DOMPurify):mf(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var u=ao(o);return u==="undefined"?"undefined":u==="string"||o instanceof String?"string":u==="number"||o instanceof Number?"number":u==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":u==="object"?"object":"unknown"},i=function(o,u){var f=document.createElement(o);for(var d in u.className&&(f.className=u.className),u.innerHTML&&u.dompurify&&(f.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)f.style[d]=u.style[d];return f},s=function o(u){var f=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),f);return d=(d=d.setProgress(1,o,1,[o])).set(u)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,u){return o.__proto__=u||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,u){return this.then(function(){switch(u=u||function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(f){return this.set({src:i("div",{innerHTML:o,dompurify:f})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=function f(d,m){for(var _=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),b=d.firstChild;b;b=b.nextSibling)m!==!0&&b.nodeType===1&&b.nodeName==="SCRIPT"||_.appendChild(f(b,m));return d.nodeType===1&&(d.nodeName==="CANVAS"?(_.width=d.width,_.height=d.height,_.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(_.value=d.value),_.addEventListener("load",function(){_.scrollTop=d.scrollTop,_.scrollLeft=d.scrollLeft},!0)),_}(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(u){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,u(this.prop.container,f)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(u){var f=this.opt.jsPDF,d=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=d,d)for(var b=0;b<d.length;++b){var y=d[b],M=y.src.find(function(k){return k.format==="truetype"});M&&f.addFont(M.url,y.ref.name,y.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,f.context2d.save(!0),u(this.prop.container,_)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,u,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(o,u):this.outputPdf(o,u)},s.prototype.outputPdf=function(o,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,u)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var u=Object.keys(o||{}).map(function(f){if(f in s.template.prop)return function(){this.prop[f]=o[f]};switch(f){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[f]=o[f]}}},this);return this.then(function(){return this.thenList(u)})},s.prototype.get=function(o,u){return this.then(function(){var f=o in s.template.prop?this.prop[o]:this.opt[o];return u?u(f):f})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function u(f,d){return Math.floor(f*d/72*96)}return this.then(function(){(o=o||kr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:u(o.inner.width,o.k),height:u(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,u,f,d){return o!=null&&(this.progress.val=o),u!=null&&(this.progress.state=u),f!=null&&(this.progress.n=f),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,u,f,d){return this.setProgress(o?this.progress.val+o:null,u||null,f?this.progress.n+f:null,d?this.progress.stack.concat(d):null)},s.prototype.then=function(o,u){var f=this;return this.thenCore(o,u,function(d,m){return f.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(_){return f.updateProgress(null,d),_}).then(d,m).then(function(_){return f.updateProgress(1),_})})},s.prototype.thenCore=function(o,u,f){f=f||Promise.prototype.then,o&&(o=o.bind(this)),u&&(u=u.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),m=f.call(d,o,u);return s.convert(m,this.__proto__)},s.prototype.thenExternal=function(o,u){return Promise.prototype.then.call(this,o,u)},s.prototype.thenList=function(o){var u=this;return o.forEach(function(f){u=u.thenCore(f)}),u},s.prototype.catch=function(o){o&&(o=o.bind(this));var u=Promise.prototype.catch.call(this,o);return s.convert(u,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,kr.getPageSize=function(o,u,f){if(ao(o)==="object"){var d=o;o=d.orientation,u=d.unit||u,f=d.format||f}u=u||"mm",f=f||"a4",o=(""+(o||"P")).toLowerCase();var m,_=(""+f).toLowerCase(),b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+u}var y,M=0,k=0;if(b.hasOwnProperty(_))M=b[_][1]/m,k=b[_][0]/m;else try{M=f[1],k=f[0]}catch{throw new Error("Invalid format: "+f)}if(o==="p"||o==="portrait")o="p",k>M&&(y=k,k=M,M=y);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",M>k&&(y=k,k=M,M=y)}return{width:k,height:M,unit:u,k:m,orientation:o}},e.html=function(o,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(C1):null;var f=new s(u);return u.worker?f:f.from(o).doCallback()}}(kr.API),kr.API.addJS=function(e){return Bb=e,this.internal.events.subscribe("postPutResources",function(){wg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(wg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ob=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Bb+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){wg!==void 0&&Ob!==void 0&&this.internal.out("/Names <</JavaScript "+wg+" 0 R>>")}),this},function(e){var n;e.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],u=r.exec(o);if(u!=null){var f=u[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,m=[];for(s=0;s<d;s++){var _=t.internal.newObject();m.push(_);var b=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var y=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<m.length;s++)t.internal.write("(page_"+(s+1)+")"+m[s]+" 0 R");t.internal.write(" ] >>","endobj"),n=t.internal.newObject(),t.internal.write("<< /Dests "+y+" 0 R"),t.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+n+" 0 R"))}]),e.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var u=this.count=this.count_r({count:0},o);if(u>0&&this.line("/Count "+u),o.options&&o.options.pageNumber){var f=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(kr.API),function(e){var n=[192,193,194,195,196,197,198,199];e.processJPEG=function(t,r,i,s,o,u){var f,d=this.decode.DCT_DECODE,m=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(f=function(_){for(var b,y=256*_.charCodeAt(4)+_.charCodeAt(5),M=_.length,k={width:0,height:0,numcomponents:1},F=4;F<M;F+=2){if(F+=y,n.indexOf(_.charCodeAt(F+1))!==-1){b=256*_.charCodeAt(F+5)+_.charCodeAt(F+6),k={width:256*_.charCodeAt(F+7)+_.charCodeAt(F+8),height:b,numcomponents:_.charCodeAt(F+9)};break}y=256*_.charCodeAt(F+2)+_.charCodeAt(F+3)}return k}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:u=this.color_spaces.DEVICE_GRAY;break;case 4:u=this.color_spaces.DEVICE_CMYK;break;case 3:u=this.color_spaces.DEVICE_RGB}m={data:t,width:f.width,height:f.height,colorSpace:u,bitsPerComponent:8,filter:d,index:r,alias:i}}return m}}(kr.API);var Ih,xg,Rb,Fb,jb,IF=function(){var e,n,t;function r(s){var o,u,f,d,m,_,b,y,M,k,F,I,R,Y;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},_=null;;){switch(o=this.readUInt32(),M=(function(){var ee,he;for(he=[],ee=0;ee<4;++ee)he.push(String.fromCharCode(this.data[this.pos++]));return he}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":_&&this.animation.frames.push(_),this.pos+=4,_={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},m=this.readUInt16(),d=this.readUInt16()||100,_.delay=1e3*m/d,_.disposeOp=this.data[this.pos++],_.blendOp=this.data[this.pos++],_.data=[];break;case"IDAT":case"fdAT":for(M==="fdAT"&&(this.pos+=4,o-=4),s=(_!=null?_.data:void 0)||this.imgData,I=0;0<=o?I<o:I>o;0<=o?++I:--I)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((k=f-this.transparency.indexed.length)>0)for(R=0;0<=k?R<k:R>k;0<=k?++R:--R)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":b=(F=this.read(o)).indexOf(0),y=String.fromCharCode.apply(String,F.slice(0,b)),this.text[y]=String.fromCharCode.apply(String,F.slice(b+1));break;case"IEND":return _&&this.animation.frames.push(_),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Y=this.colorType)===4||Y===6,u=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*u,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,u;for(u=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)u.push(this.data[this.pos++]);return u},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,u=new Uint8Array(this.width*this.height*o),f=0,d=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function m(_,b,y,M){var k,F,I,R,Y,ee,he,fe,ve,$,U,Z,T,N,O,z,q,G,oe,ie,_e,Ce=Math.ceil((d.width-_)/y),Te=Math.ceil((d.height-b)/M),J=d.width==Ce&&d.height==Te;for(N=o*Ce,Z=J?u:new Uint8Array(N*Te),ee=s.length,T=0,F=0;T<Te&&f<ee;){switch(s[f++]){case 0:for(R=q=0;q<N;R=q+=1)Z[F++]=s[f++];break;case 1:for(R=G=0;G<N;R=G+=1)k=s[f++],Y=R<o?0:Z[F-o],Z[F++]=(k+Y)%256;break;case 2:for(R=oe=0;oe<N;R=oe+=1)k=s[f++],I=(R-R%o)/o,O=T&&Z[(T-1)*N+I*o+R%o],Z[F++]=(O+k)%256;break;case 3:for(R=ie=0;ie<N;R=ie+=1)k=s[f++],I=(R-R%o)/o,Y=R<o?0:Z[F-o],O=T&&Z[(T-1)*N+I*o+R%o],Z[F++]=(k+Math.floor((Y+O)/2))%256;break;case 4:for(R=_e=0;_e<N;R=_e+=1)k=s[f++],I=(R-R%o)/o,Y=R<o?0:Z[F-o],T===0?O=z=0:(O=Z[(T-1)*N+I*o+R%o],z=I&&Z[(T-1)*N+(I-1)*o+R%o]),he=Y+O-z,fe=Math.abs(he-Y),$=Math.abs(he-O),U=Math.abs(he-z),ve=fe<=$&&fe<=U?Y:$<=U?O:z,Z[F++]=(k+ve)%256;break;default:throw new Error("Invalid filter algorithm: "+s[f-1])}if(!J){var H=((b+T*M)*d.width+_)*o,Q=T*N;for(R=0;R<Ce;R+=1){for(var ue=0;ue<o;ue+=1)u[H++]=Z[Q++];H+=(y-1)*o}}T++}}return s=hF(s),d.interlaceMethod==1?(m(0,0,8,8),m(4,0,8,8),m(0,4,4,8),m(2,0,4,4),m(0,2,2,4),m(1,0,2,2),m(0,1,1,2)):m(0,0,1,1),u},r.prototype.decodePalette=function(){var s,o,u,f,d,m,_,b,y;for(u=this.palette,m=this.transparency.indexed||[],d=new Uint8Array((m.length||0)+u.length),f=0,s=0,o=_=0,b=u.length;_<b;o=_+=3)d[f++]=u[o],d[f++]=u[o+1],d[f++]=u[o+2],d[f++]=(y=m[s++])!=null?y:255;return d},r.prototype.copyToImageData=function(s,o){var u,f,d,m,_,b,y,M,k,F,I;if(f=this.colors,k=null,u=this.hasAlphaChannel,this.palette.length&&(k=(I=this._decodedPalette)!=null?I:this._decodedPalette=this.decodePalette(),f=4,u=!0),M=(d=s.data||s).length,_=k||o,m=b=0,f===1)for(;m<M;)y=k?4*o[m/4]:b,F=_[y++],d[m++]=F,d[m++]=F,d[m++]=F,d[m++]=u?_[y++]:255,b=y;else for(;m<M;)y=k?4*o[m/4]:b,d[m++]=_[y++],d[m++]=_[y++],d[m++]=_[y++],d[m++]=u?_[y++]:255,b=y},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Dr)==="[object Window]"){try{n=Dr.document.createElement("canvas"),t=n.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=n.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,u,f,d,m,_,b,y;if(this.animation){for(y=[],u=m=0,_=(b=this.animation.frames).length;m<_;u=++m)o=b[u],f=s.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(f,d),o.imageData=f,y.push(o.image=e(f));return y}},r.prototype.renderFrame=function(s,o){var u,f,d;return u=(f=this.animation.frames)[o],d=f[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?s.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&s.putImageData(d.imageData,d.xOffset,d.yOffset),u.blendOp===0&&s.clearRect(u.xOffset,u.yOffset,u.width,u.height),s.drawImage(u.image,u.xOffset,u.yOffset)},r.prototype.animate=function(s){var o,u,f,d,m,_,b=this;return u=0,_=this.animation,d=_.numFrames,f=_.frames,m=_.numPlays,(o=function(){var y,M;if(y=u++%d,M=f[y],b.renderFrame(s,y),d>1&&u/d<m)return b.animation._timeout=setTimeout(o,M.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,u;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(u=o.createImageData(this.width,this.height),this.copyToImageData(u,this.decodePixels()),o.putImageData(u,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function OF(e){var n=0;if(e[n++]!==71||e[n++]!==73||e[n++]!==70||e[n++]!==56||(e[n++]+1&253)!=56||e[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=e[n++]|e[n++]<<8,r=e[n++]|e[n++]<<8,i=e[n++],s=i>>7,o=1<<(7&i)+1;e[n++],e[n++];var u=null,f=null;s&&(u=n,f=o,n+=3*o);var d=!0,m=[],_=0,b=null,y=0,M=null;for(this.width=t,this.height=r;d&&n<e.length;)switch(e[n++]){case 33:switch(e[n++]){case 255:if(e[n]!==11||e[n+1]==78&&e[n+2]==69&&e[n+3]==84&&e[n+4]==83&&e[n+5]==67&&e[n+6]==65&&e[n+7]==80&&e[n+8]==69&&e[n+9]==50&&e[n+10]==46&&e[n+11]==48&&e[n+12]==3&&e[n+13]==1&&e[n+16]==0)n+=14,M=e[n++]|e[n++]<<8,n++;else for(n+=12;;){if(!((T=e[n++])>=0))throw Error("Invalid block size");if(T===0)break;n+=T}break;case 249:if(e[n++]!==4||e[n+4]!==0)throw new Error("Invalid graphics extension block.");var k=e[n++];_=e[n++]|e[n++]<<8,b=e[n++],!(1&k)&&(b=null),y=k>>2&7,n++;break;case 254:for(;;){if(!((T=e[n++])>=0))throw Error("Invalid block size");if(T===0)break;n+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[n-1].toString(16))}break;case 44:var F=e[n++]|e[n++]<<8,I=e[n++]|e[n++]<<8,R=e[n++]|e[n++]<<8,Y=e[n++]|e[n++]<<8,ee=e[n++],he=ee>>6&1,fe=1<<(7&ee)+1,ve=u,$=f,U=!1;ee>>7&&(U=!0,ve=n,$=fe,n+=3*fe);var Z=n;for(n++;;){var T;if(!((T=e[n++])>=0))throw Error("Invalid block size");if(T===0)break;n+=T}m.push({x:F,y:I,width:R,height:Y,has_local_palette:U,palette_offset:ve,palette_size:$,data_offset:Z,data_length:n-Z,transparent_index:b,interlaced:!!he,delay:_,disposal:y});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[n-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return M},this.frameInfo=function(N){if(N<0||N>=m.length)throw new Error("Frame index out of range.");return m[N]},this.decodeAndBlitFrameBGRA=function(N,O){var z=this.frameInfo(N),q=z.width*z.height,G=new Uint8Array(q);$b(e,z.data_offset,G,q);var oe=z.palette_offset,ie=z.transparent_index;ie===null&&(ie=256);var _e=z.width,Ce=t-_e,Te=_e,J=4*(z.y*t+z.x),H=4*((z.y+z.height)*t+z.x),Q=J,ue=4*Ce;z.interlaced===!0&&(ue+=4*t*7);for(var se=8,pe=0,K=G.length;pe<K;++pe){var D=G[pe];if(Te===0&&(Te=_e,(Q+=ue)>=H&&(ue=4*Ce+4*t*(se-1),Q=J+(_e+Ce)*(se<<1),se>>=1)),D===ie)Q+=4;else{var ke=e[oe+3*D],Me=e[oe+3*D+1],Ge=e[oe+3*D+2];O[Q++]=Ge,O[Q++]=Me,O[Q++]=ke,O[Q++]=255}--Te}},this.decodeAndBlitFrameRGBA=function(N,O){var z=this.frameInfo(N),q=z.width*z.height,G=new Uint8Array(q);$b(e,z.data_offset,G,q);var oe=z.palette_offset,ie=z.transparent_index;ie===null&&(ie=256);var _e=z.width,Ce=t-_e,Te=_e,J=4*(z.y*t+z.x),H=4*((z.y+z.height)*t+z.x),Q=J,ue=4*Ce;z.interlaced===!0&&(ue+=4*t*7);for(var se=8,pe=0,K=G.length;pe<K;++pe){var D=G[pe];if(Te===0&&(Te=_e,(Q+=ue)>=H&&(ue=4*Ce+4*t*(se-1),Q=J+(_e+Ce)*(se<<1),se>>=1)),D===ie)Q+=4;else{var ke=e[oe+3*D],Me=e[oe+3*D+1],Ge=e[oe+3*D+2];O[Q++]=ke,O[Q++]=Me,O[Q++]=Ge,O[Q++]=255}--Te}}}function $b(e,n,t,r){for(var i=e[n++],s=1<<i,o=s+1,u=o+1,f=i+1,d=(1<<f)-1,m=0,_=0,b=0,y=e[n++],M=new Int32Array(4096),k=null;;){for(;m<16&&y!==0;)_|=e[n++]<<m,m+=8,y===1?y=e[n++]:--y;if(m<f)break;var F=_&d;if(_>>=f,m-=f,F!==s){if(F===o)break;for(var I=F<u?F:k,R=0,Y=I;Y>s;)Y=M[Y]>>8,++R;var ee=Y;if(b+R+(I!==F?1:0)>r)return void vo.log("Warning, gif stream longer than expected.");t[b++]=ee;var he=b+=R;for(I!==F&&(t[b++]=ee),Y=I;R--;)Y=M[Y],t[--he]=255&Y,Y>>=8;k!==null&&u<4096&&(M[u++]=k<<8|ee,u>=d+1&&f<12&&(++f,d=d<<1|1)),k=F}else u=o+1,d=(1<<(f=i+1))-1,k=null}return b!==r&&vo.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function pv(e){var n,t,r,i,s,o=Math.floor,u=new Array(64),f=new Array(64),d=new Array(64),m=new Array(64),_=new Array(65535),b=new Array(65535),y=new Array(64),M=new Array(64),k=[],F=0,I=7,R=new Array(64),Y=new Array(64),ee=new Array(64),he=new Array(256),fe=new Array(2048),ve=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],$=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function G(J,H){for(var Q=0,ue=0,se=new Array,pe=1;pe<=16;pe++){for(var K=1;K<=J[pe];K++)se[H[ue]]=[],se[H[ue]][0]=Q,se[H[ue]][1]=pe,ue++,Q++;Q*=2}return se}function oe(J){for(var H=J[0],Q=J[1]-1;Q>=0;)H&1<<Q&&(F|=1<<I),Q--,--I<0&&(F==255?(ie(255),ie(0)):ie(F),I=7,F=0)}function ie(J){k.push(J)}function _e(J){ie(J>>8&255),ie(255&J)}function Ce(J,H,Q,ue,se){for(var pe,K=se[0],D=se[240],ke=function(tt,Ze){var et,ze,wt,Pt,kt,Jt,on,cn,Ke,ot,rt=0;for(Ke=0;Ke<8;++Ke){et=tt[rt],ze=tt[rt+1],wt=tt[rt+2],Pt=tt[rt+3],kt=tt[rt+4],Jt=tt[rt+5],on=tt[rt+6];var $t=et+(cn=tt[rt+7]),Qt=et-cn,Rn=ze+on,Ln=ze-on,Dn=wt+Jt,ar=wt-Jt,En=Pt+kt,jn=Pt-kt,An=$t+En,Yn=$t-En,wr=Rn+Dn,Or=Rn-Dn;tt[rt]=An+wr,tt[rt+4]=An-wr;var gr=.707106781*(Or+Yn);tt[rt+2]=Yn+gr,tt[rt+6]=Yn-gr;var oi=.382683433*((An=jn+ar)-(Or=Ln+Qt)),ft=.5411961*An+oi,Qe=1.306562965*Or+oi,Ut=.707106781*(wr=ar+Ln),xn=Qt+Ut,vn=Qt-Ut;tt[rt+5]=vn+ft,tt[rt+3]=vn-ft,tt[rt+1]=xn+Qe,tt[rt+7]=xn-Qe,rt+=8}for(rt=0,Ke=0;Ke<8;++Ke){et=tt[rt],ze=tt[rt+8],wt=tt[rt+16],Pt=tt[rt+24],kt=tt[rt+32],Jt=tt[rt+40],on=tt[rt+48];var bn=et+(cn=tt[rt+56]),qt=et-cn,Hn=ze+on,St=ze-on,mt=wt+Jt,wn=wt-Jt,ei=Pt+kt,Tt=Pt-kt,Fn=bn+ei,Qn=bn-ei,Mi=Hn+mt,Sr=Hn-mt;tt[rt]=Fn+Mi,tt[rt+32]=Fn-Mi;var Pr=.707106781*(Sr+Qn);tt[rt+16]=Qn+Pr,tt[rt+48]=Qn-Pr;var dr=.382683433*((Fn=Tt+wn)-(Sr=St+qt)),Ai=.5411961*Fn+dr,xr=1.306562965*Sr+dr,Gr=.707106781*(Mi=wn+St),Ir=qt+Gr,tn=qt-Gr;tt[rt+40]=tn+Ai,tt[rt+24]=tn-Ai,tt[rt+8]=Ir+xr,tt[rt+56]=Ir-xr,rt++}for(Ke=0;Ke<64;++Ke)ot=tt[Ke]*Ze[Ke],y[Ke]=ot>0?ot+.5|0:ot-.5|0;return y}(J,H),Me=0;Me<64;++Me)M[ve[Me]]=ke[Me];var Ge=M[0]-Q;Q=M[0],Ge==0?oe(ue[0]):(oe(ue[b[pe=32767+Ge]]),oe(_[pe]));for(var ce=63;ce>0&&M[ce]==0;)ce--;if(ce==0)return oe(K),Q;for(var te,ye=1;ye<=ce;){for(var de=ye;M[ye]==0&&ye<=ce;)++ye;var We=ye-de;if(We>=16){te=We>>4;for(var He=1;He<=te;++He)oe(D);We&=15}pe=32767+M[ye],oe(se[(We<<4)+b[pe]]),oe(_[pe]),ye++}return ce!=63&&oe(K),Q}function Te(J){J=Math.min(Math.max(J,1),100),s!=J&&(function(H){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ue=0;ue<64;ue++){var se=o((Q[ue]*H+50)/100);se=Math.min(Math.max(se,1),255),u[ve[ue]]=se}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],K=0;K<64;K++){var D=o((pe[K]*H+50)/100);D=Math.min(Math.max(D,1),255),f[ve[K]]=D}for(var ke=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Me=0,Ge=0;Ge<8;Ge++)for(var ce=0;ce<8;ce++)d[Me]=1/(u[ve[Me]]*ke[Ge]*ke[ce]*8),m[Me]=1/(f[ve[Me]]*ke[Ge]*ke[ce]*8),Me++}(J<50?Math.floor(5e3/J):Math.floor(200-2*J)),s=J)}this.encode=function(J,H){H&&Te(H),k=new Array,F=0,I=7,_e(65496),_e(65504),_e(16),ie(74),ie(70),ie(73),ie(70),ie(0),ie(1),ie(1),ie(0),_e(1),_e(1),ie(0),ie(0),function(){_e(65499),_e(132),ie(0);for(var ze=0;ze<64;ze++)ie(u[ze]);ie(1);for(var wt=0;wt<64;wt++)ie(f[wt])}(),function(ze,wt){_e(65472),_e(17),ie(8),_e(wt),_e(ze),ie(3),ie(1),ie(17),ie(0),ie(2),ie(17),ie(1),ie(3),ie(17),ie(1)}(J.width,J.height),function(){_e(65476),_e(418),ie(0);for(var ze=0;ze<16;ze++)ie($[ze+1]);for(var wt=0;wt<=11;wt++)ie(U[wt]);ie(16);for(var Pt=0;Pt<16;Pt++)ie(Z[Pt+1]);for(var kt=0;kt<=161;kt++)ie(T[kt]);ie(1);for(var Jt=0;Jt<16;Jt++)ie(N[Jt+1]);for(var on=0;on<=11;on++)ie(O[on]);ie(17);for(var cn=0;cn<16;cn++)ie(z[cn+1]);for(var Ke=0;Ke<=161;Ke++)ie(q[Ke])}(),_e(65498),_e(12),ie(3),ie(1),ie(0),ie(2),ie(17),ie(3),ie(17),ie(0),ie(63),ie(0);var Q=0,ue=0,se=0;F=0,I=7,this.encode.displayName="_encode_";for(var pe,K,D,ke,Me,Ge,ce,te,ye,de=J.data,We=J.width,He=J.height,tt=4*We,Ze=0;Ze<He;){for(pe=0;pe<tt;){for(Me=tt*Ze+pe,ce=-1,te=0,ye=0;ye<64;ye++)Ge=Me+(te=ye>>3)*tt+(ce=4*(7&ye)),Ze+te>=He&&(Ge-=tt*(Ze+1+te-He)),pe+ce>=tt&&(Ge-=pe+ce-tt+4),K=de[Ge++],D=de[Ge++],ke=de[Ge++],R[ye]=(fe[K]+fe[D+256>>0]+fe[ke+512>>0]>>16)-128,Y[ye]=(fe[K+768>>0]+fe[D+1024>>0]+fe[ke+1280>>0]>>16)-128,ee[ye]=(fe[K+1280>>0]+fe[D+1536>>0]+fe[ke+1792>>0]>>16)-128;Q=Ce(R,d,Q,n,r),ue=Ce(Y,m,ue,t,i),se=Ce(ee,m,se,t,i),pe+=32}Ze+=8}if(I>=0){var et=[];et[1]=I+1,et[0]=(1<<I+1)-1,oe(et)}return _e(65497),new Uint8Array(k)},e=e||50,function(){for(var J=String.fromCharCode,H=0;H<256;H++)he[H]=J(H)}(),n=G($,U),t=G(N,O),r=G(Z,T),i=G(z,q),function(){for(var J=1,H=2,Q=1;Q<=15;Q++){for(var ue=J;ue<H;ue++)b[32767+ue]=Q,_[32767+ue]=[],_[32767+ue][1]=Q,_[32767+ue][0]=ue;for(var se=-(H-1);se<=-J;se++)b[32767+se]=Q,_[32767+se]=[],_[32767+se][1]=Q,_[32767+se][0]=H-1+se;J<<=1,H<<=1}}(),function(){for(var J=0;J<256;J++)fe[J]=19595*J,fe[J+256>>0]=38470*J,fe[J+512>>0]=7471*J+32768,fe[J+768>>0]=-11059*J,fe[J+1024>>0]=-21709*J,fe[J+1280>>0]=32768*J+8421375,fe[J+1536>>0]=-27439*J,fe[J+1792>>0]=-5329*J}(),Te(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Iu(e,n){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function zb(e){function n($){if(!$)throw Error("assert :P")}function t($,U,Z){for(var T=0;4>T;T++)if($[U+T]!=Z.charCodeAt(T))return!0;return!1}function r($,U,Z,T,N){for(var O=0;O<N;O++)$[U+O]=Z[T+O]}function i($,U,Z,T){for(var N=0;N<T;N++)$[U+N]=Z}function s($){return new Int32Array($)}function o($,U){for(var Z=[],T=0;T<$;T++)Z.push(new U);return Z}function u($,U){var Z=[];return function T(N,O,z){for(var q=z[O],G=0;G<q&&(N.push(z.length>O+1?[]:new U),!(z.length<O+1));G++)T(N[G],O+1,z)}(Z,0,$),Z}var f=function(){var $=this;function U(w,P){for(var W=1<<P-1>>>0;w&W;)W>>>=1;return W?(w&W-1)+W:w}function Z(w,P,W,le,we){n(!(le%W));do w[P+(le-=W)]=we;while(0<le)}function T(w,P,W,le,we){if(n(2328>=we),512>=we)var Ee=s(512);else if((Ee=s(we))==null)return 0;return function(Ae,Ne,Ie,qe,ht,Bt){var Rt,xt,Kt=Ne,Ht=1<<Ie,dt=s(16),yt=s(16);for(n(ht!=0),n(qe!=null),n(Ae!=null),n(0<Ie),xt=0;xt<ht;++xt){if(15<qe[xt])return 0;++dt[qe[xt]]}if(dt[0]==ht)return 0;for(yt[1]=0,Rt=1;15>Rt;++Rt){if(dt[Rt]>1<<Rt)return 0;yt[Rt+1]=yt[Rt]+dt[Rt]}for(xt=0;xt<ht;++xt)Rt=qe[xt],0<qe[xt]&&(Bt[yt[Rt]++]=xt);if(yt[15]==1)return(qe=new N).g=0,qe.value=Bt[0],Z(Ae,Kt,1,Ht,qe),Ht;var en,pn=-1,rn=Ht-1,Tn=0,Pn=1,tr=1,l=1<<Ie;for(xt=0,Rt=1,ht=2;Rt<=Ie;++Rt,ht<<=1){if(Pn+=tr<<=1,0>(tr-=dt[Rt]))return 0;for(;0<dt[Rt];--dt[Rt])(qe=new N).g=Rt,qe.value=Bt[xt++],Z(Ae,Kt+Tn,ht,l,qe),Tn=U(Tn,Rt)}for(Rt=Ie+1,ht=2;15>=Rt;++Rt,ht<<=1){if(Pn+=tr<<=1,0>(tr-=dt[Rt]))return 0;for(;0<dt[Rt];--dt[Rt]){if(qe=new N,(Tn&rn)!=pn){for(Kt+=l,en=1<<(pn=Rt)-Ie;15>pn&&!(0>=(en-=dt[pn]));)++pn,en<<=1;Ht+=l=1<<(en=pn-Ie),Ae[Ne+(pn=Tn&rn)].g=en+Ie,Ae[Ne+pn].value=Kt-Ne-pn}qe.g=Rt-Ie,qe.value=Bt[xt++],Z(Ae,Kt+(Tn>>Ie),ht,l,qe),Tn=U(Tn,Rt)}}return Pn!=2*yt[15]-1?0:Ht}(w,P,W,le,we,Ee)}function N(){this.value=this.g=0}function O(){this.value=this.g=0}function z(){this.G=o(5,N),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(wo,O)}function q(w,P,W,le){n(w!=null),n(P!=null),n(2147483648>le),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=P,w.pa=W,w.Jd=P,w.Yc=W+le,w.Zc=4<=le?W+le-4+1:W,pe(w)}function G(w,P){for(var W=0;0<P--;)W|=D(w,128)<<P;return W}function oe(w,P){var W=G(w,P);return K(w)?-W:W}function ie(w,P,W,le){var we,Ee=0;for(n(w!=null),n(P!=null),n(4294967288>le),w.Sb=le,w.Ra=0,w.u=0,w.h=0,4<le&&(le=4),we=0;we<le;++we)Ee+=P[W+we]<<8*we;w.Ra=Ee,w.bb=le,w.oa=P,w.pa=W}function _e(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<ms-8>>>0,++w.bb,w.u-=8;Q(w)&&(w.h=1,w.u=0)}function Ce(w,P){if(n(0<=P),!w.h&&P<=Ns){var W=H(w)&ia[P];return w.u+=P,_e(w),W}return w.h=1,w.u=0}function Te(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(w){return w.Ra>>>(w.u&ms-1)>>>0}function Q(w){return n(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>ms}function ue(w,P){w.u=P,w.h=Q(w)}function se(w){w.u>=fl&&(n(w.u>=fl),_e(w))}function pe(w){n(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(n(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function K(w){return G(w,1)}function D(w,P){var W=w.Ca;0>w.b&&pe(w);var le=w.b,we=W*P>>>8,Ee=(w.I>>>le>we)+0;for(Ee?(W-=we,w.I-=we+1<<le>>>0):W=we+1,le=W,we=0;256<=le;)we+=8,le>>=8;return le=7^we+zo[le],w.b-=le,w.Ca=(W<<le)-1,Ee}function ke(w,P,W){w[P+0]=W>>24&255,w[P+1]=W>>16&255,w[P+2]=W>>8&255,w[P+3]=W>>0&255}function Me(w,P){return w[P+0]<<0|w[P+1]<<8}function Ge(w,P){return Me(w,P)|w[P+2]<<16}function ce(w,P){return Me(w,P)|Me(w,P+2)<<16}function te(w,P){var W=1<<P;return n(w!=null),n(0<P),w.X=s(W),w.X==null?0:(w.Mb=32-P,w.Xa=P,1)}function ye(w,P){n(w!=null),n(P!=null),n(w.Xa==P.Xa),r(P.X,0,w.X,0,1<<P.Xa)}function de(){this.X=[],this.Xa=this.Mb=0}function We(w,P,W,le){n(W!=null),n(le!=null);var we=W[0],Ee=le[0];return we==0&&(we=(w*Ee+P/2)/P),Ee==0&&(Ee=(P*we+w/2)/w),0>=we||0>=Ee?0:(W[0]=we,le[0]=Ee,1)}function He(w,P){return w+(1<<P)-1>>>P}function tt(w,P){return((4278255360&w)+(4278255360&P)>>>0&4278255360)+((16711935&w)+(16711935&P)>>>0&16711935)>>>0}function Ze(w,P){$[P]=function(W,le,we,Ee,Ae,Ne,Ie){var qe;for(qe=0;qe<Ae;++qe){var ht=$[w](Ne[Ie+qe-1],we,Ee+qe);Ne[Ie+qe]=tt(W[le+qe],ht)}}}function et(){this.ud=this.hd=this.jd=0}function ze(w,P){return((4278124286&(w^P))>>>1)+(w&P)>>>0}function wt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Pt(w,P){return wt(w+(w-P+.5>>1))}function kt(w,P,W){return Math.abs(P-W)-Math.abs(w-W)}function Jt(w,P,W,le,we,Ee,Ae){for(le=Ee[Ae-1],W=0;W<we;++W)Ee[Ae+W]=le=tt(w[P+W],le)}function on(w,P,W,le,we){var Ee;for(Ee=0;Ee<W;++Ee){var Ae=w[P+Ee],Ne=Ae>>8&255,Ie=16711935&(Ie=(Ie=16711935&Ae)+((Ne<<16)+Ne));le[we+Ee]=(4278255360&Ae)+Ie>>>0}}function cn(w,P){P.jd=w>>0&255,P.hd=w>>8&255,P.ud=w>>16&255}function Ke(w,P,W,le,we,Ee){var Ae;for(Ae=0;Ae<le;++Ae){var Ne=P[W+Ae],Ie=Ne>>>8,qe=Ne,ht=255&(ht=(ht=Ne>>>16)+((w.jd<<24>>24)*(Ie<<24>>24)>>>5));qe=255&(qe=(qe=qe+((w.hd<<24>>24)*(Ie<<24>>24)>>>5))+((w.ud<<24>>24)*(ht<<24>>24)>>>5)),we[Ee+Ae]=(4278255360&Ne)+(ht<<16)+qe}}function ot(w,P,W,le,we){$[P]=function(Ee,Ae,Ne,Ie,qe,ht,Bt,Rt,xt){for(Ie=Bt;Ie<Rt;++Ie)for(Bt=0;Bt<xt;++Bt)qe[ht++]=we(Ne[le(Ee[Ae++])])},$[w]=function(Ee,Ae,Ne,Ie,qe,ht,Bt){var Rt=8>>Ee.b,xt=Ee.Ea,Kt=Ee.K[0],Ht=Ee.w;if(8>Rt)for(Ee=(1<<Ee.b)-1,Ht=(1<<Rt)-1;Ae<Ne;++Ae){var dt,yt=0;for(dt=0;dt<xt;++dt)dt&Ee||(yt=le(Ie[qe++])),ht[Bt++]=we(Kt[yt&Ht]),yt>>=Rt}else $["VP8LMapColor"+W](Ie,qe,Kt,Ht,ht,Bt,Ae,Ne,xt)}}function rt(w,P,W,le,we){for(W=P+W;P<W;){var Ee=w[P++];le[we++]=Ee>>16&255,le[we++]=Ee>>8&255,le[we++]=Ee>>0&255}}function $t(w,P,W,le,we){for(W=P+W;P<W;){var Ee=w[P++];le[we++]=Ee>>16&255,le[we++]=Ee>>8&255,le[we++]=Ee>>0&255,le[we++]=Ee>>24&255}}function Qt(w,P,W,le,we){for(W=P+W;P<W;){var Ee=(Ae=w[P++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;le[we++]=Ee,le[we++]=Ae}}function Rn(w,P,W,le,we){for(W=P+W;P<W;){var Ee=(Ae=w[P++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;le[we++]=Ee,le[we++]=Ae}}function Ln(w,P,W,le,we){for(W=P+W;P<W;){var Ee=w[P++];le[we++]=Ee>>0&255,le[we++]=Ee>>8&255,le[we++]=Ee>>16&255}}function Dn(w,P,W,le,we,Ee){if(Ee==0)for(W=P+W;P<W;)ke(le,((Ee=w[P++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),we+=32;else r(le,we,w,P,W)}function ar(w,P){$[P][0]=$[w+"0"],$[P][1]=$[w+"1"],$[P][2]=$[w+"2"],$[P][3]=$[w+"3"],$[P][4]=$[w+"4"],$[P][5]=$[w+"5"],$[P][6]=$[w+"6"],$[P][7]=$[w+"7"],$[P][8]=$[w+"8"],$[P][9]=$[w+"9"],$[P][10]=$[w+"10"],$[P][11]=$[w+"11"],$[P][12]=$[w+"12"],$[P][13]=$[w+"13"],$[P][14]=$[w+"0"],$[P][15]=$[w+"0"]}function En(w){return w==Do||w==Io||w==Ks||w==a}function jn(){this.eb=[],this.size=this.A=this.fb=0}function An(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Yn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new jn,this.f.kb=new An,this.sd=null}function wr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Or(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gr(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function oi(w,P){var W=w.T,le=P.ba.f.RGBA,we=le.eb,Ee=le.fb+w.ka*le.A,Ae=Wo[P.ba.S],Ne=w.y,Ie=w.O,qe=w.f,ht=w.N,Bt=w.ea,Rt=w.W,xt=P.cc,Kt=P.dc,Ht=P.Mc,dt=P.Nc,yt=w.ka,en=w.ka+w.T,pn=w.U,rn=pn+1>>1;for(yt==0?Ae(Ne,Ie,null,null,qe,ht,Bt,Rt,qe,ht,Bt,Rt,we,Ee,null,null,pn):(Ae(P.ec,P.fc,Ne,Ie,xt,Kt,Ht,dt,qe,ht,Bt,Rt,we,Ee-le.A,we,Ee,pn),++W);yt+2<en;yt+=2)xt=qe,Kt=ht,Ht=Bt,dt=Rt,ht+=w.Rc,Rt+=w.Rc,Ee+=2*le.A,Ae(Ne,(Ie+=2*w.fa)-w.fa,Ne,Ie,xt,Kt,Ht,dt,qe,ht,Bt,Rt,we,Ee-le.A,we,Ee,pn);return Ie+=w.fa,w.j+en<w.o?(r(P.ec,P.fc,Ne,Ie,pn),r(P.cc,P.dc,qe,ht,rn),r(P.Mc,P.Nc,Bt,Rt,rn),W--):1&en||Ae(Ne,Ie,null,null,qe,ht,Bt,Rt,qe,ht,Bt,Rt,we,Ee+le.A,null,null,pn),W}function ft(w,P,W){var le=w.F,we=[w.J];if(le!=null){var Ee=w.U,Ae=P.ba.S,Ne=Ae==Zs||Ae==Ks;P=P.ba.f.RGBA;var Ie=[0],qe=w.ka;Ie[0]=w.T,w.Kb&&(qe==0?--Ie[0]:(--qe,we[0]-=w.width),w.j+w.ka+w.T==w.o&&(Ie[0]=w.o-w.j-qe));var ht=P.eb;qe=P.fb+qe*P.A,w=Ti(le,we[0],w.width,Ee,Ie,ht,qe+(Ne?0:3),P.A),n(W==Ie),w&&En(Ae)&&No(ht,qe,Ne,Ee,Ie,P.A)}return 0}function Qe(w){var P=w.ma,W=P.ba.S,le=11>W,we=W==pr||W==Ea||W==Zs||W==ls||W==12||En(W);if(P.memory=null,P.Ib=null,P.Jb=null,P.Nd=null,!xu(P.Oa,w,we?11:12))return 0;if(we&&En(W)&&hn(),w.da)alert("todo:use_scaling");else{if(le){if(P.Ib=gr,w.Kb){if(W=w.U+1>>1,P.memory=s(w.U+2*W),P.memory==null)return 0;P.ec=P.memory,P.fc=0,P.cc=P.ec,P.dc=P.fc+w.U,P.Mc=P.cc,P.Nc=P.dc+W,P.Ib=oi,hn()}}else alert("todo:EmitYUV");we&&(P.Jb=ft,le&&Lt())}if(le&&!ec){for(w=0;256>w;++w)Yc[w]=89858*(w-128)+qa>>Kc,Jc[w]=-22014*(w-128)+qa,_d[w]=-45773*(w-128),Fl[w]=113618*(w-128)+qa>>Kc;for(w=xc;w<Nf;++w)P=76283*(w-16)+qa>>Kc,Xc[w-xc]=Ur(P,255),gh[w-xc]=Ur(P+8>>4,15);ec=1}return 1}function Ut(w){var P=w.ma,W=w.U,le=w.T;return n(!(1&w.ka)),0>=W||0>=le?0:(W=P.Ib(w,P),P.Jb!=null&&P.Jb(w,P,W),P.Dc+=W,1)}function xn(w){w.ma.memory=null}function vn(w,P,W,le){return Ce(w,8)!=47?0:(P[0]=Ce(w,14)+1,W[0]=Ce(w,14)+1,le[0]=Ce(w,1),Ce(w,3)!=0?0:!w.h)}function bn(w,P){if(4>w)return w+1;var W=w-2>>1;return(2+(1&w)<<W)+Ce(P,W)+1}function qt(w,P){return 120<P?P-120:1<=(W=((W=st[P-1])>>4)*w+(8-(15&W)))?W:1;var W}function Hn(w,P,W){var le=H(W),we=w[P+=255&le].g-8;return 0<we&&(ue(W,W.u+8),le=H(W),P+=w[P].value,P+=le&(1<<we)-1),ue(W,W.u+w[P].g),w[P].value}function St(w,P,W){return W.g+=w.g,W.value+=w.value<<P>>>0,n(8>=W.g),w.g}function mt(w,P,W){var le=w.xc;return n((P=le==0?0:w.vc[w.md*(W>>le)+(P>>le)])<w.Wb),w.Ya[P]}function wn(w,P,W,le){var we=w.ab,Ee=w.c*P,Ae=w.C;P=Ae+P;var Ne=W,Ie=le;for(le=w.Ta,W=w.Ua;0<we--;){var qe=w.gc[we],ht=Ae,Bt=P,Rt=Ne,xt=Ie,Kt=(Ie=le,Ne=W,qe.Ea);switch(n(ht<Bt),n(Bt<=qe.nc),qe.hc){case 2:Qu(Rt,xt,(Bt-ht)*Kt,Ie,Ne);break;case 0:var Ht=ht,dt=Bt,yt=Ie,en=Ne,pn=(l=qe).Ea;Ht==0&&(os(Rt,xt,null,null,1,yt,en),Jt(Rt,xt+1,0,0,pn-1,yt,en+1),xt+=pn,en+=pn,++Ht);for(var rn=1<<l.b,Tn=rn-1,Pn=He(pn,l.b),tr=l.K,l=l.w+(Ht>>l.b)*Pn;Ht<dt;){var h=tr,v=l,x=1;for(ss(Rt,xt,yt,en-pn,1,yt,en);x<pn;){var C=(x&~Tn)+rn;C>pn&&(C=pn),(0,wa[h[v++]>>8&15])(Rt,xt+ +x,yt,en+x-pn,C-x,yt,en+x),x=C}xt+=pn,en+=pn,++Ht&Tn||(l+=Pn)}Bt!=qe.nc&&r(Ie,Ne-Kt,Ie,Ne+(Bt-ht-1)*Kt,Kt);break;case 1:for(Kt=Rt,dt=xt,pn=(Rt=qe.Ea)-(en=Rt&~(yt=(xt=1<<qe.b)-1)),Ht=He(Rt,qe.b),rn=qe.K,qe=qe.w+(ht>>qe.b)*Ht;ht<Bt;){for(Tn=rn,Pn=qe,tr=new et,l=dt+en,h=dt+Rt;dt<l;)cn(Tn[Pn++],tr),xa(tr,Kt,dt,xt,Ie,Ne),dt+=xt,Ne+=xt;dt<h&&(cn(Tn[Pn++],tr),xa(tr,Kt,dt,pn,Ie,Ne),dt+=pn,Ne+=pn),++ht&yt||(qe+=Ht)}break;case 3:if(Rt==Ie&&xt==Ne&&0<qe.b){for(dt=Ie,Rt=Kt=Ne+(Bt-ht)*Kt-(en=(Bt-ht)*He(qe.Ea,qe.b)),xt=Ie,yt=Ne,Ht=[],en=(pn=en)-1;0<=en;--en)Ht[en]=xt[yt+en];for(en=pn-1;0<=en;--en)dt[Rt+en]=Ht[en];Po(qe,ht,Bt,Ie,Kt,Ie,Ne)}else Po(qe,ht,Bt,Rt,xt,Ie,Ne)}Ne=le,Ie=W}Ie!=W&&r(le,W,Ne,Ie,Ee)}function ei(w,P){var W=w.V,le=w.Ba+w.c*w.C,we=P-w.C;if(n(P<=w.l.o),n(16>=we),0<we){var Ee=w.l,Ae=w.Ta,Ne=w.Ua,Ie=Ee.width;if(wn(w,we,W,le),we=Ne=[Ne],n((W=w.C)<(le=P)),n(Ee.v<Ee.va),le>Ee.o&&(le=Ee.o),W<Ee.j){var qe=Ee.j-W;W=Ee.j,we[0]+=qe*Ie}if(W>=le?W=0:(we[0]+=4*Ee.v,Ee.ka=W-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=le-W,W=1),W){if(Ne=Ne[0],11>(W=w.ca).S){var ht=W.f.RGBA,Bt=(le=W.S,we=Ee.U,Ee=Ee.T,qe=ht.eb,ht.A),Rt=Ee;for(ht=ht.fb+w.Ma*ht.A;0<Rt--;){var xt=Ae,Kt=Ne,Ht=we,dt=qe,yt=ht;switch(le){case ys:Go(xt,Kt,Ht,dt,yt);break;case pr:To(xt,Kt,Ht,dt,yt);break;case Do:To(xt,Kt,Ht,dt,yt),No(dt,yt,0,Ht,1,0);break;case Sa:Ho(xt,Kt,Ht,dt,yt);break;case Ea:Dn(xt,Kt,Ht,dt,yt,1);break;case Io:Dn(xt,Kt,Ht,dt,yt,1),No(dt,yt,0,Ht,1,0);break;case Zs:Dn(xt,Kt,Ht,dt,yt,0);break;case Ks:Dn(xt,Kt,Ht,dt,yt,0),No(dt,yt,1,Ht,1,0);break;case ls:oa(xt,Kt,Ht,dt,yt);break;case a:oa(xt,Kt,Ht,dt,yt),xi(dt,yt,Ht,1,0);break;case bc:Ds(xt,Kt,Ht,dt,yt);break;default:n(0)}Ne+=Ie,ht+=Bt}w.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");n(w.Ma<=W.height)}}w.C=P,n(w.C<=w.i)}function Tt(w){var P;if(0<w.ua)return 0;for(P=0;P<w.Wb;++P){var W=w.Ya[P].G,le=w.Ya[P].H;if(0<W[1][le[1]+0].g||0<W[2][le[2]+0].g||0<W[3][le[3]+0].g)return 0}return 1}function Fn(w,P,W,le,we,Ee){if(w.Z!=0){var Ae=w.qd,Ne=w.rd;for(n(gi[w.Z]!=null);P<W;++P)gi[w.Z](Ae,Ne,le,we,le,we,Ee),Ae=le,Ne=we,we+=Ee;w.qd=Ae,w.rd=Ne}}function Qn(w,P){var W=w.l.ma,le=W.Z==0||W.Z==1?w.l.j:w.C;if(le=w.C<le?le:w.C,n(P<=w.l.o),P>le){var we=w.l.width,Ee=W.ca,Ae=W.tb+we*le,Ne=w.V,Ie=w.Ba+w.c*le,qe=w.gc;n(w.ab==1),n(qe[0].hc==3),Uo(qe[0],le,P,Ne,Ie,Ee,Ae),Fn(W,le,P,Ee,Ae,we)}w.C=w.Ma=P}function Mi(w,P,W,le,we,Ee,Ae){var Ne=w.$/le,Ie=w.$%le,qe=w.m,ht=w.s,Bt=W+w.$,Rt=Bt;we=W+le*we;var xt=W+le*Ee,Kt=280+ht.ua,Ht=w.Pb?Ne:16777216,dt=0<ht.ua?ht.Wa:null,yt=ht.wc,en=Bt<xt?mt(ht,Ie,Ne):null;n(w.C<Ee),n(xt<=we);var pn=!1;e:for(;;){for(;pn||Bt<xt;){var rn=0;if(Ne>=Ht){var Tn=Bt-W;n((Ht=w).Pb),Ht.wd=Ht.m,Ht.xd=Tn,0<Ht.s.ua&&ye(Ht.s.Wa,Ht.s.vb),Ht=Ne+Gt}if(Ie&yt||(en=mt(ht,Ie,Ne)),n(en!=null),en.Qb&&(P[Bt]=en.qb,pn=!0),!pn)if(se(qe),en.jc){rn=qe,Tn=P;var Pn=Bt,tr=en.pd[H(rn)&wo-1];n(en.jc),256>tr.g?(ue(rn,rn.u+tr.g),Tn[Pn]=tr.value,rn=0):(ue(rn,rn.u+tr.g-256),n(256<=tr.value),rn=tr.value),rn==0&&(pn=!0)}else rn=Hn(en.G[0],en.H[0],qe);if(qe.h)break;if(pn||256>rn){if(!pn)if(en.nd)P[Bt]=(en.qb|rn<<8)>>>0;else{if(se(qe),pn=Hn(en.G[1],en.H[1],qe),se(qe),Tn=Hn(en.G[2],en.H[2],qe),Pn=Hn(en.G[3],en.H[3],qe),qe.h)break;P[Bt]=(Pn<<24|pn<<16|rn<<8|Tn)>>>0}if(pn=!1,++Bt,++Ie>=le&&(Ie=0,++Ne,Ae!=null&&Ne<=Ee&&!(Ne%16)&&Ae(w,Ne),dt!=null))for(;Rt<Bt;)rn=P[Rt++],dt.X[(506832829*rn&4294967295)>>>dt.Mb]=rn}else if(280>rn){if(rn=bn(rn-256,qe),Tn=Hn(en.G[4],en.H[4],qe),se(qe),Tn=qt(le,Tn=bn(Tn,qe)),qe.h)break;if(Bt-W<Tn||we-Bt<rn)break e;for(Pn=0;Pn<rn;++Pn)P[Bt+Pn]=P[Bt+Pn-Tn];for(Bt+=rn,Ie+=rn;Ie>=le;)Ie-=le,++Ne,Ae!=null&&Ne<=Ee&&!(Ne%16)&&Ae(w,Ne);if(n(Bt<=we),Ie&yt&&(en=mt(ht,Ie,Ne)),dt!=null)for(;Rt<Bt;)rn=P[Rt++],dt.X[(506832829*rn&4294967295)>>>dt.Mb]=rn}else{if(!(rn<Kt))break e;for(pn=rn-280,n(dt!=null);Rt<Bt;)rn=P[Rt++],dt.X[(506832829*rn&4294967295)>>>dt.Mb]=rn;rn=Bt,n(!(pn>>>(Tn=dt).Xa)),P[rn]=Tn.X[pn],pn=!0}pn||n(qe.h==Q(qe))}if(w.Pb&&qe.h&&Bt<we)n(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&ye(w.s.vb,w.s.Wa);else{if(qe.h)break e;Ae!=null&&Ae(w,Ne>Ee?Ee:Ne),w.a=0,w.$=Bt-W}return 1}return w.a=3,0}function Sr(w){n(w!=null),w.vc=null,w.yc=null,w.Ya=null;var P=w.Wa;P!=null&&(P.X=null),w.vb=null,n(w!=null)}function Pr(){var w=new ll;return w==null?null:(w.a=0,w.xb=nu,ar("Predictor","VP8LPredictors"),ar("Predictor","VP8LPredictors_C"),ar("PredictorAdd","VP8LPredictorsAdd"),ar("PredictorAdd","VP8LPredictorsAdd_C"),Qu=on,xa=Ke,Go=rt,To=$t,oa=Qt,Ds=Rn,Ho=Ln,$.VP8LMapColor32b=ba,$.VP8LMapColor8b=Vo,w)}function dr(w,P,W,le,we){var Ee=1,Ae=[w],Ne=[P],Ie=le.m,qe=le.s,ht=null,Bt=0;e:for(;;){if(W)for(;Ee&&Ce(Ie,1);){var Rt=Ae,xt=Ne,Kt=le,Ht=1,dt=Kt.m,yt=Kt.gc[Kt.ab],en=Ce(dt,2);if(Kt.Oc&1<<en)Ee=0;else{switch(Kt.Oc|=1<<en,yt.hc=en,yt.Ea=Rt[0],yt.nc=xt[0],yt.K=[null],++Kt.ab,n(4>=Kt.ab),en){case 0:case 1:yt.b=Ce(dt,3)+2,Ht=dr(He(yt.Ea,yt.b),He(yt.nc,yt.b),0,Kt,yt.K),yt.K=yt.K[0];break;case 3:var pn,rn=Ce(dt,8)+1,Tn=16<rn?0:4<rn?1:2<rn?2:3;if(Rt[0]=He(yt.Ea,Tn),yt.b=Tn,pn=Ht=dr(rn,1,0,Kt,yt.K)){var Pn,tr=rn,l=yt,h=1<<(8>>l.b),v=s(h);if(v==null)pn=0;else{var x=l.K[0],C=l.w;for(v[0]=l.K[0][0],Pn=1;Pn<1*tr;++Pn)v[Pn]=tt(x[C+Pn],v[Pn-1]);for(;Pn<4*h;++Pn)v[Pn]=0;l.K[0]=null,l.K[0]=v,pn=1}}Ht=pn;break;case 2:break;default:n(0)}Ee=Ht}}if(Ae=Ae[0],Ne=Ne[0],Ee&&Ce(Ie,1)&&!(Ee=1<=(Bt=Ce(Ie,4))&&11>=Bt)){le.a=3;break e}var j;if(j=Ee)t:{var X,re,ge,Le=le,Xe=Ae,Ue=Ne,vt=Bt,Dt=W,Xt=Le.m,_n=Le.s,Sn=[null],hr=1,Je=0,nt=At[vt];n:for(;;){if(Dt&&Ce(Xt,1)){var ct=Ce(Xt,3)+2,jt=He(Xe,ct),bt=He(Ue,ct),Ot=jt*bt;if(!dr(jt,bt,0,Le,Sn))break n;for(Sn=Sn[0],_n.xc=ct,X=0;X<Ot;++X){var me=Sn[X]>>8&65535;Sn[X]=me,me>=hr&&(hr=me+1)}}if(Xt.h)break n;for(re=0;5>re;++re){var Pe=V[re];!re&&0<vt&&(Pe+=1<<vt),Je<Pe&&(Je=Pe)}var Be=o(hr*nt,N),Oe=hr,je=o(Oe,z);if(je==null)var $e=null;else n(65536>=Oe),$e=je;var at=s(Je);if($e==null||at==null||Be==null){Le.a=1;break n}var lt=Be;for(X=ge=0;X<hr;++X){var pt=$e[X],Et=pt.G,Ct=pt.H,sn=0,zn=1,Wn=0;for(re=0;5>re;++re){Pe=V[re],Et[re]=lt,Ct[re]=ge,!re&&0<vt&&(Pe+=1<<vt);i:{var nr,mi=Pe,Ni=Le,Jr=at,Vi=lt,ws=ge,Eu=0,ha=Ni.m,Df=Ce(ha,1);if(i(Jr,0,0,mi),Df){var Wa=Ce(ha,1)+1,tc=Ce(ha,1),da=Ce(ha,tc==0?1:8);Jr[da]=1,Wa==2&&(Jr[da=Ce(ha,8)]=1);var Zo=1}else{var mo=s(19),bh=Ce(ha,4)+4;if(19<bh){Ni.a=3;var If=0;break i}for(nr=0;nr<bh;++nr)mo[Se[nr]]=Ce(ha,3);var Of=void 0,Bf=void 0,wh=Ni,ai=mo,xh=mi,jp=Jr,Lc=0,Cu=wh.m,$p=8,zp=o(128,N);r:for(;T(zp,0,7,ai,19);){if(Ce(Cu,1)){var hl=2+2*Ce(Cu,3);if((Of=2+Ce(Cu,hl))>xh)break r}else Of=xh;for(Bf=0;Bf<xh&&Of--;){se(Cu);var Up=zp[0+(127&H(Cu))];ue(Cu,Cu.u+Up.g);var Pu=Up.value;if(16>Pu)jp[Bf++]=Pu,Pu!=0&&($p=Pu);else{var bd=Pu==16,wd=Pu-16,Vp=E[wd],Pa=Ce(Cu,p[wd])+Vp;if(Bf+Pa>xh)break r;for(var nc=bd?$p:0;0<Pa--;)jp[Bf++]=nc}}Lc=1;break r}Lc||(wh.a=3),Zo=Lc}(Zo=Zo&&!ha.h)&&(Eu=T(Vi,ws,8,Jr,mi)),Zo&&Eu!=0?If=Eu:(Ni.a=3,If=0)}if(If==0)break n;if(zn&&ae[re]==1&&(zn=lt[ge].g==0),sn+=lt[ge].g,ge+=If,3>=re){var Sc,Lh=at[0];for(Sc=1;Sc<Pe;++Sc)at[Sc]>Lh&&(Lh=at[Sc]);Wn+=Lh}}if(pt.nd=zn,pt.Qb=0,zn&&(pt.qb=(Et[3][Ct[3]+0].value<<24|Et[1][Ct[1]+0].value<<16|Et[2][Ct[2]+0].value)>>>0,sn==0&&256>Et[0][Ct[0]+0].value&&(pt.Qb=1,pt.qb+=Et[0][Ct[0]+0].value<<8)),pt.jc=!pt.Qb&&6>Wn,pt.jc){var Ec,ru=pt;for(Ec=0;Ec<wo;++Ec){var iu=Ec,Mu=ru.pd[iu],Qc=ru.G[0][ru.H[0]+iu];256<=Qc.value?(Mu.g=Qc.g+256,Mu.value=Qc.value):(Mu.g=0,Mu.value=0,iu>>=St(Qc,8,Mu),iu>>=St(ru.G[1][ru.H[1]+iu],16,Mu),iu>>=St(ru.G[2][ru.H[2]+iu],0,Mu),St(ru.G[3][ru.H[3]+iu],24,Mu))}}}_n.vc=Sn,_n.Wb=hr,_n.Ya=$e,_n.yc=Be,j=1;break t}j=0}if(!(Ee=j)){le.a=3;break e}if(0<Bt){if(qe.ua=1<<Bt,!te(qe.Wa,Bt)){le.a=1,Ee=0;break e}}else qe.ua=0;var Rf=le,Au=Ae,a0=Ne,ou=Rf.s,Sh=ou.xc;if(Rf.c=Au,Rf.i=a0,ou.md=He(Au,Sh),ou.wc=Sh==0?-1:(1<<Sh)-1,W){le.xb=Tf;break e}if((ht=s(Ae*Ne))==null){le.a=1,Ee=0;break e}Ee=(Ee=Mi(le,ht,0,Ae,Ne,Ne,null))&&!Ie.h;break e}return Ee?(we!=null?we[0]=ht:(n(ht==null),n(W)),le.$=0,W||Sr(qe)):Sr(qe),Ee}function Ai(w,P){var W=w.c*w.i,le=W+P+16*P;return n(w.c<=P),w.V=s(le),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+W+P,1)}function xr(w,P){var W=w.C,le=P-W,we=w.V,Ee=w.Ba+w.c*W;for(n(P<=w.l.o);0<le;){var Ae=16<le?16:le,Ne=w.l.ma,Ie=w.l.width,qe=Ie*Ae,ht=Ne.ca,Bt=Ne.tb+Ie*W,Rt=w.Ta,xt=w.Ua;wn(w,Ae,we,Ee),go(Rt,xt,ht,Bt,qe),Fn(Ne,W,W+Ae,ht,Bt,Ie),le-=Ae,we+=Ae*w.c,W+=Ae}n(W==P),w.C=w.Ma=P}function Gr(){this.ub=this.yd=this.td=this.Rb=0}function Ir(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function tn(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function zi(){this.Yb=function(){var w=[];return function P(W,le,we){for(var Ee=we[le],Ae=0;Ae<Ee&&(W.push(we.length>le+1?[]:0),!(we.length<le+1));Ae++)P(W[Ae],le+1,we)}(w,0,[3,11]),w}()}function Bi(){this.jb=s(3),this.Wc=u([4,8],zi),this.Xc=u([4,17],zi)}function Qi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ti(){this.ld=this.La=this.dd=this.tc=0}function Br(){this.Na=this.la=0}function ci(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function mr(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Si(){this.uc=this.M=this.Nb=0,this.wa=Array(new ti),this.Y=0,this.ya=Array(new mr),this.aa=0,this.l=new Rr}function gs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function va(){this.cb=this.a=0,this.sc="",this.m=new Te,this.Od=new Gr,this.Kc=new Ir,this.ed=new Qi,this.Qa=new tn,this.Ic=this.$c=this.Aa=0,this.D=new Si,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Te),this.ia=0,this.pb=o(4,ci),this.Pa=new Bi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new gs),this.Hd=0,this.rb=Array(new Br),this.sb=0,this.wa=Array(new ti),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new mr),this.L=this.aa=0,this.gd=u([4,2],ti),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Rr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function mn(){var w=new va;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,er||(er=Fi)),w}function Zn(w,P,W){return w.a==0&&(w.a=P,w.sc=W,w.cb=0),0}function Ei(w,P,W){return 3<=W&&w[P+0]==157&&w[P+1]==1&&w[P+2]==42}function Ri(w,P){if(w==null)return 0;if(w.a=0,w.sc="OK",P==null)return Zn(w,2,"null VP8Io passed to VP8GetHeaders()");var W=P.data,le=P.w,we=P.ha;if(4>we)return Zn(w,7,"Truncated header.");var Ee=W[le+0]|W[le+1]<<8|W[le+2]<<16,Ae=w.Od;if(Ae.Rb=!(1&Ee),Ae.td=Ee>>1&7,Ae.yd=Ee>>4&1,Ae.ub=Ee>>5,3<Ae.td)return Zn(w,3,"Incorrect keyframe parameters.");if(!Ae.yd)return Zn(w,4,"Frame not displayable.");le+=3,we-=3;var Ne=w.Kc;if(Ae.Rb){if(7>we)return Zn(w,7,"cannot parse picture header");if(!Ei(W,le,we))return Zn(w,3,"Bad code word");Ne.c=16383&(W[le+4]<<8|W[le+3]),Ne.Td=W[le+4]>>6,Ne.i=16383&(W[le+6]<<8|W[le+5]),Ne.Ud=W[le+6]>>6,le+=7,we-=7,w.za=Ne.c+15>>4,w.Ub=Ne.i+15>>4,P.width=Ne.c,P.height=Ne.i,P.Da=0,P.j=0,P.v=0,P.va=P.width,P.o=P.height,P.da=0,P.ib=P.width,P.hb=P.height,P.U=P.width,P.T=P.height,i((Ee=w.Pa).jb,0,255,Ee.jb.length),n((Ee=w.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,i(Ee.Zb,0,0,Ee.Zb.length),i(Ee.Lb,0,0,Ee.Lb)}if(Ae.ub>we)return Zn(w,7,"bad partition length");q(Ee=w.m,W,le,Ae.ub),le+=Ae.ub,we-=Ae.ub,Ae.Rb&&(Ne.Ld=K(Ee),Ne.Kd=K(Ee)),Ne=w.Qa;var Ie,qe=w.Pa;if(n(Ee!=null),n(Ne!=null),Ne.Cb=K(Ee),Ne.Cb){if(Ne.Bb=K(Ee),K(Ee)){for(Ne.Fb=K(Ee),Ie=0;4>Ie;++Ie)Ne.Zb[Ie]=K(Ee)?oe(Ee,7):0;for(Ie=0;4>Ie;++Ie)Ne.Lb[Ie]=K(Ee)?oe(Ee,6):0}if(Ne.Bb)for(Ie=0;3>Ie;++Ie)qe.jb[Ie]=K(Ee)?G(Ee,8):255}else Ne.Bb=0;if(Ee.Ka)return Zn(w,3,"cannot parse segment header");if((Ne=w.ed).zd=K(Ee),Ne.Tb=G(Ee,6),Ne.wb=G(Ee,3),Ne.Pc=K(Ee),Ne.Pc&&K(Ee)){for(qe=0;4>qe;++qe)K(Ee)&&(Ne.vd[qe]=oe(Ee,6));for(qe=0;4>qe;++qe)K(Ee)&&(Ne.od[qe]=oe(Ee,6))}if(w.L=Ne.Tb==0?0:Ne.zd?1:2,Ee.Ka)return Zn(w,3,"cannot parse filter header");var ht=we;if(we=Ie=le,le=Ie+ht,Ne=ht,w.Xb=(1<<G(w.m,2))-1,ht<3*(qe=w.Xb))W=7;else{for(Ie+=3*qe,Ne-=3*qe,ht=0;ht<qe;++ht){var Bt=W[we+0]|W[we+1]<<8|W[we+2]<<16;Bt>Ne&&(Bt=Ne),q(w.Jc[+ht],W,Ie,Bt),Ie+=Bt,Ne-=Bt,we+=3}q(w.Jc[+qe],W,Ie,Ne),W=Ie<le?0:5}if(W!=0)return Zn(w,W,"cannot parse partitions");for(W=G(Ie=w.m,7),we=K(Ie)?oe(Ie,4):0,le=K(Ie)?oe(Ie,4):0,Ne=K(Ie)?oe(Ie,4):0,qe=K(Ie)?oe(Ie,4):0,Ie=K(Ie)?oe(Ie,4):0,ht=w.Qa,Bt=0;4>Bt;++Bt){if(ht.Cb){var Rt=ht.Zb[Bt];ht.Fb||(Rt+=W)}else{if(0<Bt){w.pb[Bt]=w.pb[0];continue}Rt=W}var xt=w.pb[Bt];xt.Sc[0]=an[Ur(Rt+we,127)],xt.Sc[1]=On[Ur(Rt+0,127)],xt.Eb[0]=2*an[Ur(Rt+le,127)],xt.Eb[1]=101581*On[Ur(Rt+Ne,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=an[Ur(Rt+qe,117)],xt.Qc[1]=On[Ur(Rt+Ie,127)],xt.lc=Rt+Ie}if(!Ae.Rb)return Zn(w,4,"Not a key frame.");for(K(Ee),Ae=w.Pa,W=0;4>W;++W){for(we=0;8>we;++we)for(le=0;3>le;++le)for(Ne=0;11>Ne;++Ne)qe=D(Ee,_s[W][we][le][Ne])?G(Ee,8):Oo[W][we][le][Ne],Ae.Wc[W][we].Yb[le][Ne]=qe;for(we=0;17>we;++we)Ae.Xc[W][we]=Ae.Wc[W][wc[we]]}return w.kc=K(Ee),w.kc&&(w.Bd=G(Ee,8)),w.cb=1}function Fi(w,P,W,le,we,Ee,Ae){var Ne=P[we].Yb[W];for(W=0;16>we;++we){if(!D(w,Ne[W+0]))return we;for(;!D(w,Ne[W+1]);)if(Ne=P[++we].Yb[0],W=0,we==16)return 16;var Ie=P[we+1].Yb;if(D(w,Ne[W+2])){var qe=w,ht=0;if(D(qe,(Rt=Ne)[(Bt=W)+3]))if(D(qe,Rt[Bt+6])){for(Ne=0,Bt=2*(ht=D(qe,Rt[Bt+8]))+(Rt=D(qe,Rt[Bt+9+ht])),ht=0,Rt=Fr[Bt];Rt[Ne];++Ne)ht+=ht+D(qe,Rt[Ne]);ht+=3+(8<<Bt)}else D(qe,Rt[Bt+7])?(ht=7+2*D(qe,165),ht+=D(qe,145)):ht=5+D(qe,159);else ht=D(qe,Rt[Bt+4])?3+D(qe,Rt[Bt+5]):2;Ne=Ie[2]}else ht=1,Ne=Ie[1];Ie=Ae+Lo[we],0>(qe=w).b&&pe(qe);var Bt,Rt=qe.b,xt=(Bt=qe.Ca>>1)-(qe.I>>Rt)>>31;--qe.b,qe.Ca+=xt,qe.Ca|=1,qe.I-=(Bt+1&xt)<<Rt,Ee[Ie]=((ht^xt)-xt)*le[(0<we)+0]}return 16}function jo(w){var P=w.rb[w.sb-1];P.la=0,P.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function cr(w,P){if(w==null)return 0;if(P==null)return Zn(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!Ri(w,P))return 0;if(n(w.cb),P.ac==null||P.ac(P)){P.ob&&(w.L=0);var W=Ca[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=P.v-W>>4,w.zb=P.j-W>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=P.o+15+W>>4,w.Hb=P.va+15+W>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var le=w.ed;for(W=0;4>W;++W){var we;if(w.Qa.Cb){var Ee=w.Qa.Lb[W];w.Qa.Fb||(Ee+=le.Tb)}else Ee=le.Tb;for(we=0;1>=we;++we){var Ae=w.gd[W][we],Ne=Ee;if(le.Pc&&(Ne+=le.vd[0],we&&(Ne+=le.od[0])),0<(Ne=0>Ne?0:63<Ne?63:Ne)){var Ie=Ne;0<le.wb&&(Ie=4<le.wb?Ie>>2:Ie>>1)>9-le.wb&&(Ie=9-le.wb),1>Ie&&(Ie=1),Ae.dd=Ie,Ae.tc=2*Ne+Ie,Ae.ld=40<=Ne?2:15<=Ne?1:0}else Ae.tc=0;Ae.La=we}}}W=0}else Zn(w,6,"Frame setup failed"),W=w.a;if(W=W==0){if(W){w.$c=0,0<w.Aa||(w.Ic=yh);e:{W=w.Ic,le=4*(Ie=w.za);var qe=32*Ie,ht=Ie+1,Bt=0<w.L?Ie*(0<w.Aa?2:1):0,Rt=(w.Aa==2?2:1)*Ie;if((Ae=le+832+(we=3*(16*W+Ca[w.L])/2*qe)+(Ee=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Ae)W=0;else{if(Ae>w.Vb){if(w.Vb=0,w.Ec=s(Ae),w.Fc=0,w.Ec==null){W=Zn(w,1,"no memory during frame initialization.");break e}w.Vb=Ae}Ae=w.Ec,Ne=w.Fc,w.Ac=Ae,w.Bc=Ne,Ne+=le,w.Gd=o(qe,gs),w.Hd=0,w.rb=o(ht+1,Br),w.sb=1,w.wa=Bt?o(Bt,ti):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Ie),n(!0),w.oc=Ae,w.pc=Ne,Ne+=832,w.ya=o(Rt,mr),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Ie),w.R=16*Ie,w.B=8*Ie,Ie=(qe=Ca[w.L])*w.R,qe=qe/2*w.B,w.sa=Ae,w.ta=Ne+Ie,w.qa=w.sa,w.ra=w.ta+16*W*w.R+qe,w.Ha=w.qa,w.Ia=w.ra+8*W*w.B+qe,w.$c=0,Ne+=we,w.mb=Ee?Ae:null,w.nb=Ee?Ne:null,n(Ne+Ee<=w.Fc+w.Vb),jo(w),i(w.Ac,w.Bc,0,le),W=1}}if(W){if(P.ka=0,P.y=w.sa,P.O=w.ta,P.f=w.qa,P.N=w.ra,P.ea=w.Ha,P.Vd=w.Ia,P.fa=w.R,P.Rc=w.B,P.F=null,P.J=0,!Lu){for(W=-255;255>=W;++W)Ui[255+W]=0>W?-W:W;for(W=-1020;1020>=W;++W)Is[1020+W]=-128>W?-128:127<W?127:W;for(W=-112;112>=W;++W)vs[112+W]=-16>W?-16:15<W?15:W;for(W=-255;510>=W;++W)js[255+W]=0>W?0:255<W?255:W;Lu=1}_t=Ao,Zt=Cn,kn=fn,Jn=fr,Lr=eo,Nt=fi,Zi=eu,wi=na,Rl=Fs,as=Ol,Ki=Dl,sa=Il,La=yi,aa=Xu,la=co,ua=lr,Yr=fo,Ws=al,Ys[0]=$r,Ys[1]=$a,Ys[2]=yr,Ys[3]=ns,Ys[4]=Al,Ys[5]=rs,Ys[6]=hi,Ys[7]=to,Ys[8]=wu,Ys[9]=Ua,fa[0]=ts,fa[1]=ol,fa[2]=jr,fa[3]=As,fa[4]=ji,fa[5]=Ml,fa[6]=za,$s[0]=Va,$s[1]=es,$s[2]=kl,$s[3]=Er,$s[4]=Tl,$s[5]=Ju,$s[6]=Xl,W=1}else W=0}W&&(W=function(xt,Kt){for(xt.M=0;xt.M<xt.Va;++xt.M){var Ht,dt=xt.Jc[xt.M&xt.Xb],yt=xt.m,en=xt;for(Ht=0;Ht<en.za;++Ht){var pn=yt,rn=en,Tn=rn.Ac,Pn=rn.Bc+4*Ht,tr=rn.zc,l=rn.ya[rn.aa+Ht];if(rn.Qa.Bb?l.$b=D(pn,rn.Pa.jb[0])?2+D(pn,rn.Pa.jb[2]):D(pn,rn.Pa.jb[1]):l.$b=0,rn.kc&&(l.Ad=D(pn,rn.Bd)),l.Za=!D(pn,145)+0,l.Za){var h=l.Ob,v=0;for(rn=0;4>rn;++rn){var x,C=tr[0+rn];for(x=0;4>x;++x){C=Yi[Tn[Pn+x]][C];for(var j=io[D(pn,C[0])];0<j;)j=io[2*j+D(pn,C[j])];C=-j,Tn[Pn+x]=C}r(h,v,Tn,Pn,4),v+=4,tr[0+rn]=C}}else C=D(pn,156)?D(pn,128)?1:3:D(pn,163)?2:0,l.Ob[0]=C,i(Tn,Pn,C,4),i(tr,0,C,4);l.Dd=D(pn,142)?D(pn,114)?D(pn,183)?1:3:2:0}if(en.m.Ka)return Zn(xt,7,"Premature end-of-partition0 encountered.");for(;xt.ja<xt.za;++xt.ja){if(en=dt,pn=(yt=xt).rb[yt.sb-1],Tn=yt.rb[yt.sb+yt.ja],Ht=yt.ya[yt.aa+yt.ja],Pn=yt.kc?Ht.Ad:0)pn.la=Tn.la=0,Ht.Za||(pn.Na=Tn.Na=0),Ht.Hc=0,Ht.Gc=0,Ht.ia=0;else{var X,re;if(pn=Tn,Tn=en,Pn=yt.Pa.Xc,tr=yt.ya[yt.aa+yt.ja],l=yt.pb[tr.$b],rn=tr.ad,h=0,v=yt.rb[yt.sb-1],C=x=0,i(rn,h,0,384),tr.Za)var ge=0,Le=Pn[3];else{j=s(16);var Xe=pn.Na+v.Na;if(Xe=er(Tn,Pn[1],Xe,l.Eb,0,j,0),pn.Na=v.Na=(0<Xe)+0,1<Xe)_t(j,0,rn,h);else{var Ue=j[0]+3>>3;for(j=0;256>j;j+=16)rn[h+j]=Ue}ge=1,Le=Pn[0]}var vt=15&pn.la,Dt=15&v.la;for(j=0;4>j;++j){var Xt=1&Dt;for(Ue=re=0;4>Ue;++Ue)vt=vt>>1|(Xt=(Xe=er(Tn,Le,Xe=Xt+(1&vt),l.Sc,ge,rn,h))>ge)<<7,re=re<<2|(3<Xe?3:1<Xe?2:rn[h+0]!=0),h+=16;vt>>=4,Dt=Dt>>1|Xt<<7,x=(x<<8|re)>>>0}for(Le=vt,ge=Dt>>4,X=0;4>X;X+=2){for(re=0,vt=pn.la>>4+X,Dt=v.la>>4+X,j=0;2>j;++j){for(Xt=1&Dt,Ue=0;2>Ue;++Ue)Xe=Xt+(1&vt),vt=vt>>1|(Xt=0<(Xe=er(Tn,Pn[2],Xe,l.Qc,0,rn,h)))<<3,re=re<<2|(3<Xe?3:1<Xe?2:rn[h+0]!=0),h+=16;vt>>=2,Dt=Dt>>1|Xt<<5}C|=re<<4*X,Le|=vt<<4<<X,ge|=(240&Dt)<<X}pn.la=Le,v.la=ge,tr.Hc=x,tr.Gc=C,tr.ia=43690&C?0:l.ia,Pn=!(x|C)}if(0<yt.L&&(yt.wa[yt.Y+yt.ja]=yt.gd[Ht.$b][Ht.Za],yt.wa[yt.Y+yt.ja].La|=!Pn),en.Ka)return Zn(xt,7,"Premature end-of-file encountered.")}if(jo(xt),yt=Kt,en=1,Ht=(dt=xt).D,pn=0<dt.L&&dt.M>=dt.zb&&dt.M<=dt.Va,dt.Aa==0)e:{if(Ht.M=dt.M,Ht.uc=pn,tu(dt,Ht),en=1,Ht=(re=dt.D).Nb,pn=(C=Ca[dt.L])*dt.R,Tn=C/2*dt.B,j=16*Ht*dt.R,Ue=8*Ht*dt.B,Pn=dt.sa,tr=dt.ta-pn+j,l=dt.qa,rn=dt.ra-Tn+Ue,h=dt.Ha,v=dt.Ia-Tn+Ue,Dt=(vt=re.M)==0,x=vt>=dt.Va-1,dt.Aa==2&&tu(dt,re),re.uc)for(Xt=(Xe=dt).D.M,n(Xe.D.uc),re=Xe.yb;re<Xe.Hb;++re){ge=re,Le=Xt;var _n=(Sn=(Pe=Xe).D).Nb;X=Pe.R;var Sn=Sn.wa[Sn.Y+ge],hr=Pe.sa,Je=Pe.ta+16*_n*X+16*ge,nt=Sn.dd,ct=Sn.tc;if(ct!=0)if(n(3<=ct),Pe.L==1)0<ge&&ua(hr,Je,X,ct+4),Sn.La&&Ws(hr,Je,X,ct),0<Le&&la(hr,Je,X,ct+4),Sn.La&&Yr(hr,Je,X,ct);else{var jt=Pe.B,bt=Pe.qa,Ot=Pe.ra+8*_n*jt+8*ge,me=Pe.Ha,Pe=Pe.Ia+8*_n*jt+8*ge;_n=Sn.ld,0<ge&&(wi(hr,Je,X,ct+4,nt,_n),as(bt,Ot,me,Pe,jt,ct+4,nt,_n)),Sn.La&&(sa(hr,Je,X,ct,nt,_n),aa(bt,Ot,me,Pe,jt,ct,nt,_n)),0<Le&&(Zi(hr,Je,X,ct+4,nt,_n),Rl(bt,Ot,me,Pe,jt,ct+4,nt,_n)),Sn.La&&(Ki(hr,Je,X,ct,nt,_n),La(bt,Ot,me,Pe,jt,ct,nt,_n))}}if(dt.ia&&alert("todo:DitherRow"),yt.put!=null){if(re=16*vt,vt=16*(vt+1),Dt?(yt.y=dt.sa,yt.O=dt.ta+j,yt.f=dt.qa,yt.N=dt.ra+Ue,yt.ea=dt.Ha,yt.W=dt.Ia+Ue):(re-=C,yt.y=Pn,yt.O=tr,yt.f=l,yt.N=rn,yt.ea=h,yt.W=v),x||(vt-=C),vt>yt.o&&(vt=yt.o),yt.F=null,yt.J=null,dt.Fa!=null&&0<dt.Fa.length&&re<vt&&(yt.J=ho(dt,yt,re,vt-re),yt.F=dt.mb,yt.F==null&&yt.F.length==0)){en=Zn(dt,3,"Could not decode alpha data.");break e}re<yt.j&&(C=yt.j-re,re=yt.j,n(!(1&C)),yt.O+=dt.R*C,yt.N+=dt.B*(C>>1),yt.W+=dt.B*(C>>1),yt.F!=null&&(yt.J+=yt.width*C)),re<vt&&(yt.O+=yt.v,yt.N+=yt.v>>1,yt.W+=yt.v>>1,yt.F!=null&&(yt.J+=yt.v),yt.ka=re-yt.j,yt.U=yt.va-yt.v,yt.T=vt-re,en=yt.put(yt))}Ht+1!=dt.Ic||x||(r(dt.sa,dt.ta-pn,Pn,tr+16*dt.R,pn),r(dt.qa,dt.ra-Tn,l,rn+8*dt.B,Tn),r(dt.Ha,dt.Ia-Tn,h,v+8*dt.B,Tn))}if(!en)return Zn(xt,6,"Output aborted.")}return 1}(w,P)),P.bc!=null&&P.bc(P),W&=1}return W?(w.cb=0,W):0}function Gn(w,P,W,le,we){we=w[P+W+32*le]+(we>>3),w[P+W+32*le]=-256&we?0>we?0:255:we}function Ms(w,P,W,le,we,Ee){Gn(w,P,0,W,le+we),Gn(w,P,1,W,le+Ee),Gn(w,P,2,W,le-Ee),Gn(w,P,3,W,le-we)}function si(w){return(20091*w>>16)+w}function ki(w,P,W,le){var we,Ee=0,Ae=s(16);for(we=0;4>we;++we){var Ne=w[P+0]+w[P+8],Ie=w[P+0]-w[P+8],qe=(35468*w[P+4]>>16)-si(w[P+12]),ht=si(w[P+4])+(35468*w[P+12]>>16);Ae[Ee+0]=Ne+ht,Ae[Ee+1]=Ie+qe,Ae[Ee+2]=Ie-qe,Ae[Ee+3]=Ne-ht,Ee+=4,P++}for(we=Ee=0;4>we;++we)Ne=(w=Ae[Ee+0]+4)+Ae[Ee+8],Ie=w-Ae[Ee+8],qe=(35468*Ae[Ee+4]>>16)-si(Ae[Ee+12]),Gn(W,le,0,0,Ne+(ht=si(Ae[Ee+4])+(35468*Ae[Ee+12]>>16))),Gn(W,le,1,0,Ie+qe),Gn(W,le,2,0,Ie-qe),Gn(W,le,3,0,Ne-ht),Ee++,le+=32}function fi(w,P,W,le){var we=w[P+0]+4,Ee=35468*w[P+4]>>16,Ae=si(w[P+4]),Ne=35468*w[P+1]>>16;Ms(W,le,0,we+Ae,w=si(w[P+1]),Ne),Ms(W,le,1,we+Ee,w,Ne),Ms(W,le,2,we-Ee,w,Ne),Ms(W,le,3,we-Ae,w,Ne)}function Cn(w,P,W,le,we){ki(w,P,W,le),we&&ki(w,P+16,W,le+4)}function fn(w,P,W,le){Zt(w,P+0,W,le,1),Zt(w,P+32,W,le+128,1)}function fr(w,P,W,le){var we;for(w=w[P+0]+4,we=0;4>we;++we)for(P=0;4>P;++P)Gn(W,le,P,we,w)}function eo(w,P,W,le){w[P+0]&&Jn(w,P+0,W,le),w[P+16]&&Jn(w,P+16,W,le+4),w[P+32]&&Jn(w,P+32,W,le+128),w[P+48]&&Jn(w,P+48,W,le+128+4)}function Ao(w,P,W,le){var we,Ee=s(16);for(we=0;4>we;++we){var Ae=w[P+0+we]+w[P+12+we],Ne=w[P+4+we]+w[P+8+we],Ie=w[P+4+we]-w[P+8+we],qe=w[P+0+we]-w[P+12+we];Ee[0+we]=Ae+Ne,Ee[8+we]=Ae-Ne,Ee[4+we]=qe+Ie,Ee[12+we]=qe-Ie}for(we=0;4>we;++we)Ae=(w=Ee[0+4*we]+3)+Ee[3+4*we],Ne=Ee[1+4*we]+Ee[2+4*we],Ie=Ee[1+4*we]-Ee[2+4*we],qe=w-Ee[3+4*we],W[le+0]=Ae+Ne>>3,W[le+16]=qe+Ie>>3,W[le+32]=Ae-Ne>>3,W[le+48]=qe-Ie>>3,le+=64}function _o(w,P,W){var le,we=P-32,Ee=$i,Ae=255-w[we-1];for(le=0;le<W;++le){var Ne,Ie=Ee,qe=Ae+w[P-1];for(Ne=0;Ne<W;++Ne)w[P+Ne]=Ie[qe+w[we+Ne]];P+=32}}function $a(w,P){_o(w,P,4)}function es(w,P){_o(w,P,8)}function ol(w,P){_o(w,P,16)}function jr(w,P){var W;for(W=0;16>W;++W)r(w,P+32*W,w,P-32,16)}function As(w,P){var W;for(W=16;0<W;--W)i(w,P,w[P-1],16),P+=32}function uo(w,P,W){var le;for(le=0;16>le;++le)i(P,W+32*le,w,16)}function ts(w,P){var W,le=16;for(W=0;16>W;++W)le+=w[P-1+32*W]+w[P+W-32];uo(le>>5,w,P)}function ji(w,P){var W,le=8;for(W=0;16>W;++W)le+=w[P-1+32*W];uo(le>>4,w,P)}function Ml(w,P){var W,le=8;for(W=0;16>W;++W)le+=w[P+W-32];uo(le>>4,w,P)}function za(w,P){uo(128,w,P)}function vr(w,P,W){return w+2*P+W+2>>2}function yr(w,P){var W,le=P-32;for(le=new Uint8Array([vr(w[le-1],w[le+0],w[le+1]),vr(w[le+0],w[le+1],w[le+2]),vr(w[le+1],w[le+2],w[le+3]),vr(w[le+2],w[le+3],w[le+4])]),W=0;4>W;++W)r(w,P+32*W,le,0,le.length)}function ns(w,P){var W=w[P-1],le=w[P-1+32],we=w[P-1+64],Ee=w[P-1+96];ke(w,P+0,16843009*vr(w[P-1-32],W,le)),ke(w,P+32,16843009*vr(W,le,we)),ke(w,P+64,16843009*vr(le,we,Ee)),ke(w,P+96,16843009*vr(we,Ee,Ee))}function $r(w,P){var W,le=4;for(W=0;4>W;++W)le+=w[P+W-32]+w[P-1+32*W];for(le>>=3,W=0;4>W;++W)i(w,P+32*W,le,4)}function Al(w,P){var W=w[P-1+0],le=w[P-1+32],we=w[P-1+64],Ee=w[P-1-32],Ae=w[P+0-32],Ne=w[P+1-32],Ie=w[P+2-32],qe=w[P+3-32];w[P+0+96]=vr(le,we,w[P-1+96]),w[P+1+96]=w[P+0+64]=vr(W,le,we),w[P+2+96]=w[P+1+64]=w[P+0+32]=vr(Ee,W,le),w[P+3+96]=w[P+2+64]=w[P+1+32]=w[P+0+0]=vr(Ae,Ee,W),w[P+3+64]=w[P+2+32]=w[P+1+0]=vr(Ne,Ae,Ee),w[P+3+32]=w[P+2+0]=vr(Ie,Ne,Ae),w[P+3+0]=vr(qe,Ie,Ne)}function hi(w,P){var W=w[P+1-32],le=w[P+2-32],we=w[P+3-32],Ee=w[P+4-32],Ae=w[P+5-32],Ne=w[P+6-32],Ie=w[P+7-32];w[P+0+0]=vr(w[P+0-32],W,le),w[P+1+0]=w[P+0+32]=vr(W,le,we),w[P+2+0]=w[P+1+32]=w[P+0+64]=vr(le,we,Ee),w[P+3+0]=w[P+2+32]=w[P+1+64]=w[P+0+96]=vr(we,Ee,Ae),w[P+3+32]=w[P+2+64]=w[P+1+96]=vr(Ee,Ae,Ne),w[P+3+64]=w[P+2+96]=vr(Ae,Ne,Ie),w[P+3+96]=vr(Ne,Ie,Ie)}function rs(w,P){var W=w[P-1+0],le=w[P-1+32],we=w[P-1+64],Ee=w[P-1-32],Ae=w[P+0-32],Ne=w[P+1-32],Ie=w[P+2-32],qe=w[P+3-32];w[P+0+0]=w[P+1+64]=Ee+Ae+1>>1,w[P+1+0]=w[P+2+64]=Ae+Ne+1>>1,w[P+2+0]=w[P+3+64]=Ne+Ie+1>>1,w[P+3+0]=Ie+qe+1>>1,w[P+0+96]=vr(we,le,W),w[P+0+64]=vr(le,W,Ee),w[P+0+32]=w[P+1+96]=vr(W,Ee,Ae),w[P+1+32]=w[P+2+96]=vr(Ee,Ae,Ne),w[P+2+32]=w[P+3+96]=vr(Ae,Ne,Ie),w[P+3+32]=vr(Ne,Ie,qe)}function to(w,P){var W=w[P+0-32],le=w[P+1-32],we=w[P+2-32],Ee=w[P+3-32],Ae=w[P+4-32],Ne=w[P+5-32],Ie=w[P+6-32],qe=w[P+7-32];w[P+0+0]=W+le+1>>1,w[P+1+0]=w[P+0+64]=le+we+1>>1,w[P+2+0]=w[P+1+64]=we+Ee+1>>1,w[P+3+0]=w[P+2+64]=Ee+Ae+1>>1,w[P+0+32]=vr(W,le,we),w[P+1+32]=w[P+0+96]=vr(le,we,Ee),w[P+2+32]=w[P+1+96]=vr(we,Ee,Ae),w[P+3+32]=w[P+2+96]=vr(Ee,Ae,Ne),w[P+3+64]=vr(Ae,Ne,Ie),w[P+3+96]=vr(Ne,Ie,qe)}function Ua(w,P){var W=w[P-1+0],le=w[P-1+32],we=w[P-1+64],Ee=w[P-1+96];w[P+0+0]=W+le+1>>1,w[P+2+0]=w[P+0+32]=le+we+1>>1,w[P+2+32]=w[P+0+64]=we+Ee+1>>1,w[P+1+0]=vr(W,le,we),w[P+3+0]=w[P+1+32]=vr(le,we,Ee),w[P+3+32]=w[P+1+64]=vr(we,Ee,Ee),w[P+3+64]=w[P+2+64]=w[P+0+96]=w[P+1+96]=w[P+2+96]=w[P+3+96]=Ee}function wu(w,P){var W=w[P-1+0],le=w[P-1+32],we=w[P-1+64],Ee=w[P-1+96],Ae=w[P-1-32],Ne=w[P+0-32],Ie=w[P+1-32],qe=w[P+2-32];w[P+0+0]=w[P+2+32]=W+Ae+1>>1,w[P+0+32]=w[P+2+64]=le+W+1>>1,w[P+0+64]=w[P+2+96]=we+le+1>>1,w[P+0+96]=Ee+we+1>>1,w[P+3+0]=vr(Ne,Ie,qe),w[P+2+0]=vr(Ae,Ne,Ie),w[P+1+0]=w[P+3+32]=vr(W,Ae,Ne),w[P+1+32]=w[P+3+64]=vr(le,W,Ae),w[P+1+64]=w[P+3+96]=vr(we,le,W),w[P+1+96]=vr(Ee,we,le)}function kl(w,P){var W;for(W=0;8>W;++W)r(w,P+32*W,w,P-32,8)}function Er(w,P){var W;for(W=0;8>W;++W)i(w,P,w[P-1],8),P+=32}function Hr(w,P,W){var le;for(le=0;8>le;++le)i(P,W+32*le,w,8)}function Va(w,P){var W,le=8;for(W=0;8>W;++W)le+=w[P+W-32]+w[P-1+32*W];Hr(le>>4,w,P)}function Ju(w,P){var W,le=4;for(W=0;8>W;++W)le+=w[P+W-32];Hr(le>>3,w,P)}function Tl(w,P){var W,le=4;for(W=0;8>W;++W)le+=w[P-1+32*W];Hr(le>>3,w,P)}function Xl(w,P){Hr(128,w,P)}function sl(w,P,W){var le=w[P-W],we=w[P+0],Ee=3*(we-le)+ca[1020+w[P-2*W]-w[P+W]],Ae=xo[112+(Ee+4>>3)];w[P-W]=$i[255+le+xo[112+(Ee+3>>3)]],w[P+0]=$i[255+we-Ae]}function Nl(w,P,W,le){var we=w[P+0],Ee=w[P+W];return qo[255+w[P-2*W]-w[P-W]]>le||qo[255+Ee-we]>le}function Ql(w,P,W,le){return 4*qo[255+w[P-W]-w[P+0]]+qo[255+w[P-2*W]-w[P+W]]<=le}function Kr(w,P,W,le,we){var Ee=w[P-3*W],Ae=w[P-2*W],Ne=w[P-W],Ie=w[P+0],qe=w[P+W],ht=w[P+2*W],Bt=w[P+3*W];return 4*qo[255+Ne-Ie]+qo[255+Ae-qe]>le?0:qo[255+w[P-4*W]-Ee]<=we&&qo[255+Ee-Ae]<=we&&qo[255+Ae-Ne]<=we&&qo[255+Bt-ht]<=we&&qo[255+ht-qe]<=we&&qo[255+qe-Ie]<=we}function co(w,P,W,le){var we=2*le+1;for(le=0;16>le;++le)Ql(w,P+le,W,we)&&sl(w,P+le,W)}function lr(w,P,W,le){var we=2*le+1;for(le=0;16>le;++le)Ql(w,P+le*W,1,we)&&sl(w,P+le*W,1)}function fo(w,P,W,le){var we;for(we=3;0<we;--we)co(w,P+=4*W,W,le)}function al(w,P,W,le){var we;for(we=3;0<we;--we)lr(w,P+=4,W,le)}function ya(w,P,W,le,we,Ee,Ae,Ne){for(Ee=2*Ee+1;0<we--;){if(Kr(w,P,W,Ee,Ae))if(Nl(w,P,W,Ne))sl(w,P,W);else{var Ie=w,qe=P,ht=W,Bt=Ie[qe-2*ht],Rt=Ie[qe-ht],xt=Ie[qe+0],Kt=Ie[qe+ht],Ht=Ie[qe+2*ht],dt=27*(en=ca[1020+3*(xt-Rt)+ca[1020+Bt-Kt]])+63>>7,yt=18*en+63>>7,en=9*en+63>>7;Ie[qe-3*ht]=$i[255+Ie[qe-3*ht]+en],Ie[qe-2*ht]=$i[255+Bt+yt],Ie[qe-ht]=$i[255+Rt+dt],Ie[qe+0]=$i[255+xt-dt],Ie[qe+ht]=$i[255+Kt-yt],Ie[qe+2*ht]=$i[255+Ht-en]}P+=le}}function Wi(w,P,W,le,we,Ee,Ae,Ne){for(Ee=2*Ee+1;0<we--;){if(Kr(w,P,W,Ee,Ae))if(Nl(w,P,W,Ne))sl(w,P,W);else{var Ie=w,qe=P,ht=W,Bt=Ie[qe-ht],Rt=Ie[qe+0],xt=Ie[qe+ht],Kt=xo[112+((Ht=3*(Rt-Bt))+4>>3)],Ht=xo[112+(Ht+3>>3)],dt=Kt+1>>1;Ie[qe-2*ht]=$i[255+Ie[qe-2*ht]+dt],Ie[qe-ht]=$i[255+Bt+Ht],Ie[qe+0]=$i[255+Rt-Kt],Ie[qe+ht]=$i[255+xt-dt]}P+=le}}function eu(w,P,W,le,we,Ee){ya(w,P,W,1,16,le,we,Ee)}function na(w,P,W,le,we,Ee){ya(w,P,1,W,16,le,we,Ee)}function Dl(w,P,W,le,we,Ee){var Ae;for(Ae=3;0<Ae;--Ae)Wi(w,P+=4*W,W,1,16,le,we,Ee)}function Il(w,P,W,le,we,Ee){var Ae;for(Ae=3;0<Ae;--Ae)Wi(w,P+=4,1,W,16,le,we,Ee)}function Fs(w,P,W,le,we,Ee,Ae,Ne){ya(w,P,we,1,8,Ee,Ae,Ne),ya(W,le,we,1,8,Ee,Ae,Ne)}function Ol(w,P,W,le,we,Ee,Ae,Ne){ya(w,P,1,we,8,Ee,Ae,Ne),ya(W,le,1,we,8,Ee,Ae,Ne)}function yi(w,P,W,le,we,Ee,Ae,Ne){Wi(w,P+4*we,we,1,8,Ee,Ae,Ne),Wi(W,le+4*we,we,1,8,Ee,Ae,Ne)}function Xu(w,P,W,le,we,Ee,Ae,Ne){Wi(w,P+4,1,we,8,Ee,Ae,Ne),Wi(W,le+4,1,we,8,Ee,Ae,Ne)}function ko(){this.ba=new Yn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Or,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Hs(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Bl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function qs(){this.ua=0,this.Wa=new de,this.vb=new de,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new N}function ll(){this.xb=this.a=0,this.l=new Rr,this.ca=new Yn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new qs,this.ab=0,this.gc=o(4,Bl),this.Oc=0}function ul(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Rr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function _i(w,P,W,le,we,Ee,Ae){for(w=w==null?0:w[P+0],P=0;P<Ae;++P)we[Ee+P]=w+W[le+P]&255,w=we[Ee+P]}function ks(w,P,W,le,we,Ee,Ae){var Ne;if(w==null)_i(null,null,W,le,we,Ee,Ae);else for(Ne=0;Ne<Ae;++Ne)we[Ee+Ne]=w[P+Ne]+W[le+Ne]&255}function _a(w,P,W,le,we,Ee,Ae){if(w==null)_i(null,null,W,le,we,Ee,Ae);else{var Ne,Ie=w[P+0],qe=Ie,ht=Ie;for(Ne=0;Ne<Ae;++Ne)qe=ht+(Ie=w[P+Ne])-qe,ht=W[le+Ne]+(-256&qe?0>qe?0:255:qe)&255,qe=Ie,we[Ee+Ne]=ht}}function ho(w,P,W,le){var we=P.width,Ee=P.o;if(n(w!=null&&P!=null),0>W||0>=le||W+le>Ee)return null;if(!w.Cc){if(w.ga==null){var Ae;if(w.ga=new ul,(Ae=w.ga==null)||(Ae=P.width*P.o,n(w.Gb.length==0),w.Gb=s(Ae),w.Uc=0,w.Gb==null?Ae=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=w.ga;var Ne=w.Fa,Ie=w.P,qe=w.qc,ht=w.mb,Bt=w.nb,Rt=Ie+1,xt=qe-1,Kt=Ae.l;if(n(Ne!=null&&ht!=null&&P!=null),gi[0]=null,gi[1]=_i,gi[2]=ks,gi[3]=_a,Ae.ca=ht,Ae.tb=Bt,Ae.c=P.width,Ae.i=P.height,n(0<Ae.c&&0<Ae.i),1>=qe)P=0;else if(Ae.$a=Ne[Ie+0]>>0&3,Ae.Z=Ne[Ie+0]>>2&3,Ae.Lc=Ne[Ie+0]>>4&3,Ie=Ne[Ie+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Ie)P=0;else if(Kt.put=Ut,Kt.ac=Qe,Kt.bc=xn,Kt.ma=Ae,Kt.width=P.width,Kt.height=P.height,Kt.Da=P.Da,Kt.v=P.v,Kt.va=P.va,Kt.j=P.j,Kt.o=P.o,Ae.$a)e:{n(Ae.$a==1),P=Pr();t:for(;;){if(P==null){P=0;break e}if(n(Ae!=null),Ae.mc=P,P.c=Ae.c,P.i=Ae.i,P.l=Ae.l,P.l.ma=Ae,P.l.width=Ae.c,P.l.height=Ae.i,P.a=0,ie(P.m,Ne,Rt,xt),!dr(Ae.c,Ae.i,1,P,null)||(P.ab==1&&P.gc[0].hc==3&&Tt(P.s)?(Ae.ic=1,Ne=P.c*P.i,P.Ta=null,P.Ua=0,P.V=s(Ne),P.Ba=0,P.V==null?(P.a=1,P=0):P=1):(Ae.ic=0,P=Ai(P,Ae.c)),!P))break t;P=1;break e}Ae.mc=null,P=0}else P=xt>=Ae.c*Ae.i;Ae=!P}if(Ae)return null;w.ga.Lc!=1?w.Ga=0:le=Ee-W}n(w.ga!=null),n(W+le<=Ee);e:{if(P=(Ne=w.ga).c,Ee=Ne.l.o,Ne.$a==0){if(Rt=w.rc,xt=w.Vc,Kt=w.Fa,Ie=w.P+1+W*P,qe=w.mb,ht=w.nb+W*P,n(Ie<=w.P+w.qc),Ne.Z!=0)for(n(gi[Ne.Z]!=null),Ae=0;Ae<le;++Ae)gi[Ne.Z](Rt,xt,Kt,Ie,qe,ht,P),Rt=qe,xt=ht,ht+=P,Ie+=P;else for(Ae=0;Ae<le;++Ae)r(qe,ht,Kt,Ie,P),Rt=qe,xt=ht,ht+=P,Ie+=P;w.rc=Rt,w.Vc=xt}else{if(n(Ne.mc!=null),P=W+le,n((Ae=Ne.mc)!=null),n(P<=Ae.i),Ae.C>=P)P=1;else if(Ne.ic||Lt(),Ne.ic){Ne=Ae.V,Rt=Ae.Ba,xt=Ae.c;var Ht=Ae.i,dt=(Kt=1,Ie=Ae.$/xt,qe=Ae.$%xt,ht=Ae.m,Bt=Ae.s,Ae.$),yt=xt*Ht,en=xt*P,pn=Bt.wc,rn=dt<en?mt(Bt,qe,Ie):null;n(dt<=yt),n(P<=Ht),n(Tt(Bt));t:for(;;){for(;!ht.h&&dt<en;){if(qe&pn||(rn=mt(Bt,qe,Ie)),n(rn!=null),se(ht),256>(Ht=Hn(rn.G[0],rn.H[0],ht)))Ne[Rt+dt]=Ht,++dt,++qe>=xt&&(qe=0,++Ie<=P&&!(Ie%16)&&Qn(Ae,Ie));else{if(!(280>Ht)){Kt=0;break t}Ht=bn(Ht-256,ht);var Tn,Pn=Hn(rn.G[4],rn.H[4],ht);if(se(ht),!(dt>=(Pn=qt(xt,Pn=bn(Pn,ht)))&&yt-dt>=Ht)){Kt=0;break t}for(Tn=0;Tn<Ht;++Tn)Ne[Rt+dt+Tn]=Ne[Rt+dt+Tn-Pn];for(dt+=Ht,qe+=Ht;qe>=xt;)qe-=xt,++Ie<=P&&!(Ie%16)&&Qn(Ae,Ie);dt<en&&qe&pn&&(rn=mt(Bt,qe,Ie))}n(ht.h==Q(ht))}Qn(Ae,Ie>P?P:Ie);break t}!Kt||ht.h&&dt<yt?(Kt=0,Ae.a=ht.h?5:3):Ae.$=dt,P=Kt}else P=Mi(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,P,xr);if(!P){le=0;break e}}W+le>=Ee&&(w.Cc=1),le=1}if(!le)return null;if(w.Cc&&((le=w.ga)!=null&&(le.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+W*we}function B(w,P,W,le,we,Ee){for(;0<we--;){var Ae,Ne=w,Ie=P+(W?1:0),qe=w,ht=P+(W?0:3);for(Ae=0;Ae<le;++Ae){var Bt=qe[ht+4*Ae];Bt!=255&&(Bt*=32897,Ne[Ie+4*Ae+0]=Ne[Ie+4*Ae+0]*Bt>>23,Ne[Ie+4*Ae+1]=Ne[Ie+4*Ae+1]*Bt>>23,Ne[Ie+4*Ae+2]=Ne[Ie+4*Ae+2]*Bt>>23)}P+=Ee}}function be(w,P,W,le,we){for(;0<le--;){var Ee;for(Ee=0;Ee<W;++Ee){var Ae=w[P+2*Ee+0],Ne=15&(qe=w[P+2*Ee+1]),Ie=4369*Ne,qe=(240&qe|qe>>4)*Ie>>16;w[P+2*Ee+0]=(240&Ae|Ae>>4)*Ie>>16&240|(15&Ae|Ae<<4)*Ie>>16>>4&15,w[P+2*Ee+1]=240&qe|Ne}P+=we}}function Ye(w,P,W,le,we,Ee,Ae,Ne){var Ie,qe,ht=255;for(qe=0;qe<we;++qe){for(Ie=0;Ie<le;++Ie){var Bt=w[P+Ie];Ee[Ae+4*Ie]=Bt,ht&=Bt}P+=W,Ae+=Ne}return ht!=255}function ut(w,P,W,le,we){var Ee;for(Ee=0;Ee<we;++Ee)W[le+Ee]=w[P+Ee]>>8}function Lt(){No=B,xi=be,Ti=Ye,go=ut}function Vt(w,P,W){$[w]=function(le,we,Ee,Ae,Ne,Ie,qe,ht,Bt,Rt,xt,Kt,Ht,dt,yt,en,pn){var rn,Tn=pn-1>>1,Pn=Ne[Ie+0]|qe[ht+0]<<16,tr=Bt[Rt+0]|xt[Kt+0]<<16;n(le!=null);var l=3*Pn+tr+131074>>2;for(P(le[we+0],255&l,l>>16,Ht,dt),Ee!=null&&(l=3*tr+Pn+131074>>2,P(Ee[Ae+0],255&l,l>>16,yt,en)),rn=1;rn<=Tn;++rn){var h=Ne[Ie+rn]|qe[ht+rn]<<16,v=Bt[Rt+rn]|xt[Kt+rn]<<16,x=Pn+h+tr+v+524296,C=x+2*(h+tr)>>3;l=C+Pn>>1,Pn=(x=x+2*(Pn+v)>>3)+h>>1,P(le[we+2*rn-1],255&l,l>>16,Ht,dt+(2*rn-1)*W),P(le[we+2*rn-0],255&Pn,Pn>>16,Ht,dt+(2*rn-0)*W),Ee!=null&&(l=x+tr>>1,Pn=C+v>>1,P(Ee[Ae+2*rn-1],255&l,l>>16,yt,en+(2*rn-1)*W),P(Ee[Ae+2*rn+0],255&Pn,Pn>>16,yt,en+(2*rn+0)*W)),Pn=h,tr=v}1&pn||(l=3*Pn+tr+131074>>2,P(le[we+pn-1],255&l,l>>16,Ht,dt+(pn-1)*W),Ee!=null&&(l=3*tr+Pn+131074>>2,P(Ee[Ae+pn-1],255&l,l>>16,yt,en+(pn-1)*W)))}}function hn(){Wo[ys]=De,Wo[pr]=Su,Wo[Sa]=bs,Wo[Ea]=Bo,Wo[Zs]=Vr,Wo[ls]=Zc,Wo[bc]=ph,Wo[Do]=Su,Wo[Io]=Bo,Wo[Ks]=Vr,Wo[a]=Zc}function In(w){return w&-16384?0>w?0:255:w>>yd}function $n(w,P){return In((19077*w>>8)+(26149*P>>8)-14234)}function or(w,P,W){return In((19077*w>>8)-(6419*P>>8)-(13320*W>>8)+8708)}function _r(w,P){return In((19077*w>>8)+(33050*P>>8)-17685)}function zr(w,P,W,le,we){le[we+0]=$n(w,W),le[we+1]=or(w,P,W),le[we+2]=_r(w,P)}function Hi(w,P,W,le,we){le[we+0]=_r(w,P),le[we+1]=or(w,P,W),le[we+2]=$n(w,W)}function di(w,P,W,le,we){var Ee=or(w,P,W);P=Ee<<3&224|_r(w,P)>>3,le[we+0]=248&$n(w,W)|Ee>>5,le[we+1]=P}function bi(w,P,W,le,we){var Ee=240&_r(w,P)|15;le[we+0]=240&$n(w,W)|or(w,P,W)>>4,le[we+1]=Ee}function po(w,P,W,le,we){le[we+0]=255,zr(w,P,W,le,we+1)}function bo(w,P,W,le,we){Hi(w,P,W,le,we),le[we+3]=255}function Ts(w,P,W,le,we){zr(w,P,W,le,we),le[we+3]=255}function Ur(w,P){return 0>w?0:w>P?P:w}function $o(w,P,W){$[w]=function(le,we,Ee,Ae,Ne,Ie,qe,ht,Bt){for(var Rt=ht+(-2&Bt)*W;ht!=Rt;)P(le[we+0],Ee[Ae+0],Ne[Ie+0],qe,ht),P(le[we+1],Ee[Ae+0],Ne[Ie+0],qe,ht+W),we+=2,++Ae,++Ie,ht+=2*W;1&Bt&&P(le[we+0],Ee[Ae+0],Ne[Ie+0],qe,ht)}}function cl(w,P,W){return W==0?w==0?P==0?6:5:P==0?4:0:W}function is(w,P,W,le,we){switch(w>>>30){case 3:Zt(P,W,le,we,0);break;case 2:Nt(P,W,le,we);break;case 1:Jn(P,W,le,we)}}function tu(w,P){var W,le,we=P.M,Ee=P.Nb,Ae=w.oc,Ne=w.pc+40,Ie=w.oc,qe=w.pc+584,ht=w.oc,Bt=w.pc+600;for(W=0;16>W;++W)Ae[Ne+32*W-1]=129;for(W=0;8>W;++W)Ie[qe+32*W-1]=129,ht[Bt+32*W-1]=129;for(0<we?Ae[Ne-1-32]=Ie[qe-1-32]=ht[Bt-1-32]=129:(i(Ae,Ne-32-1,127,21),i(Ie,qe-32-1,127,9),i(ht,Bt-32-1,127,9)),le=0;le<w.za;++le){var Rt=P.ya[P.aa+le];if(0<le){for(W=-1;16>W;++W)r(Ae,Ne+32*W-4,Ae,Ne+32*W+12,4);for(W=-1;8>W;++W)r(Ie,qe+32*W-4,Ie,qe+32*W+4,4),r(ht,Bt+32*W-4,ht,Bt+32*W+4,4)}var xt=w.Gd,Kt=w.Hd+le,Ht=Rt.ad,dt=Rt.Hc;if(0<we&&(r(Ae,Ne-32,xt[Kt].y,0,16),r(Ie,qe-32,xt[Kt].f,0,8),r(ht,Bt-32,xt[Kt].ea,0,8)),Rt.Za){var yt=Ae,en=Ne-32+16;for(0<we&&(le>=w.za-1?i(yt,en,xt[Kt].y[15],4):r(yt,en,xt[Kt+1].y,0,4)),W=0;4>W;W++)yt[en+128+W]=yt[en+256+W]=yt[en+384+W]=yt[en+0+W];for(W=0;16>W;++W,dt<<=2)yt=Ae,en=Ne+mh[W],Ys[Rt.Ob[W]](yt,en),is(dt,Ht,16*+W,yt,en)}else if(yt=cl(le,we,Rt.Ob[0]),fa[yt](Ae,Ne),dt!=0)for(W=0;16>W;++W,dt<<=2)is(dt,Ht,16*+W,Ae,Ne+mh[W]);for(W=Rt.Gc,yt=cl(le,we,Rt.Dd),$s[yt](Ie,qe),$s[yt](ht,Bt),dt=Ht,yt=Ie,en=qe,255&(Rt=W>>0)&&(170&Rt?kn(dt,256,yt,en):Lr(dt,256,yt,en)),Rt=ht,dt=Bt,255&(W>>=8)&&(170&W?kn(Ht,320,Rt,dt):Lr(Ht,320,Rt,dt)),we<w.Ub-1&&(r(xt[Kt].y,0,Ae,Ne+480,16),r(xt[Kt].f,0,Ie,qe+224,8),r(xt[Kt].ea,0,ht,Bt+224,8)),W=8*Ee*w.B,xt=w.sa,Kt=w.ta+16*le+16*Ee*w.R,Ht=w.qa,Rt=w.ra+8*le+W,dt=w.Ha,yt=w.Ia+8*le+W,W=0;16>W;++W)r(xt,Kt+W*w.R,Ae,Ne+32*W,16);for(W=0;8>W;++W)r(Ht,Rt+W*w.B,Ie,qe+32*W,8),r(dt,yt+W*w.B,ht,Bt+32*W,8)}}function ra(w,P,W,le,we,Ee,Ae,Ne,Ie){var qe=[0],ht=[0],Bt=0,Rt=Ie!=null?Ie.kd:0,xt=Ie??new Hs;if(w==null||12>W)return 7;xt.data=w,xt.w=P,xt.ha=W,P=[P],W=[W],xt.gb=[xt.gb];e:{var Kt=P,Ht=W,dt=xt.gb;if(n(w!=null),n(Ht!=null),n(dt!=null),dt[0]=0,12<=Ht[0]&&!t(w,Kt[0],"RIFF")){if(t(w,Kt[0]+8,"WEBP")){dt=3;break e}var yt=ce(w,Kt[0]+4);if(12>yt||4294967286<yt){dt=3;break e}if(Rt&&yt>Ht[0]-8){dt=7;break e}dt[0]=yt,Kt[0]+=12,Ht[0]-=12}dt=0}if(dt!=0)return dt;for(yt=0<xt.gb[0],W=W[0];;){e:{var en=w;Ht=P,dt=W;var pn=qe,rn=ht,Tn=Kt=[0];if((l=Bt=[Bt])[0]=0,8>dt[0])dt=7;else{if(!t(en,Ht[0],"VP8X")){if(ce(en,Ht[0]+4)!=10){dt=3;break e}if(18>dt[0]){dt=7;break e}var Pn=ce(en,Ht[0]+8),tr=1+Ge(en,Ht[0]+12);if(2147483648<=tr*(en=1+Ge(en,Ht[0]+15))){dt=3;break e}Tn!=null&&(Tn[0]=Pn),pn!=null&&(pn[0]=tr),rn!=null&&(rn[0]=en),Ht[0]+=18,dt[0]-=18,l[0]=1}dt=0}}if(Bt=Bt[0],Kt=Kt[0],dt!=0)return dt;if(Ht=!!(2&Kt),!yt&&Bt)return 3;if(Ee!=null&&(Ee[0]=!!(16&Kt)),Ae!=null&&(Ae[0]=Ht),Ne!=null&&(Ne[0]=0),Ae=qe[0],Kt=ht[0],Bt&&Ht&&Ie==null){dt=0;break}if(4>W){dt=7;break}if(yt&&Bt||!yt&&!Bt&&!t(w,P[0],"ALPH")){W=[W],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];e:{Pn=w,dt=P,yt=W;var l=xt.gb;pn=xt.na,rn=xt.P,Tn=xt.Sa,tr=22,n(Pn!=null),n(yt!=null),en=dt[0];var h=yt[0];for(n(pn!=null),n(Tn!=null),pn[0]=null,rn[0]=null,Tn[0]=0;;){if(dt[0]=en,yt[0]=h,8>h){dt=7;break e}var v=ce(Pn,en+4);if(4294967286<v){dt=3;break e}var x=8+v+1&-2;if(tr+=x,0<l&&tr>l){dt=3;break e}if(!t(Pn,en,"VP8 ")||!t(Pn,en,"VP8L")){dt=0;break e}if(h[0]<x){dt=7;break e}t(Pn,en,"ALPH")||(pn[0]=Pn,rn[0]=en+8,Tn[0]=v),en+=x,h-=x}}if(W=W[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],dt!=0)break}W=[W],xt.Ja=[xt.Ja],xt.xa=[xt.xa];e:if(l=w,dt=P,yt=W,pn=xt.gb[0],rn=xt.Ja,Tn=xt.xa,Pn=dt[0],en=!t(l,Pn,"VP8 "),tr=!t(l,Pn,"VP8L"),n(l!=null),n(yt!=null),n(rn!=null),n(Tn!=null),8>yt[0])dt=7;else{if(en||tr){if(l=ce(l,Pn+4),12<=pn&&l>pn-12){dt=3;break e}if(Rt&&l>yt[0]-8){dt=7;break e}rn[0]=l,dt[0]+=8,yt[0]-=8,Tn[0]=tr}else Tn[0]=5<=yt[0]&&l[Pn+0]==47&&!(l[Pn+4]>>5),rn[0]=yt[0];dt=0}if(W=W[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],P=P[0],dt!=0)break;if(4294967286<xt.Ja)return 3;if(Ne==null||Ht||(Ne[0]=xt.xa?2:1),Ae=[Ae],Kt=[Kt],xt.xa){if(5>W){dt=7;break}Ne=Ae,Rt=Kt,Ht=Ee,w==null||5>W?w=0:5<=W&&w[P+0]==47&&!(w[P+4]>>5)?(yt=[0],l=[0],pn=[0],ie(rn=new J,w,P,W),vn(rn,yt,l,pn)?(Ne!=null&&(Ne[0]=yt[0]),Rt!=null&&(Rt[0]=l[0]),Ht!=null&&(Ht[0]=pn[0]),w=1):w=0):w=0}else{if(10>W){dt=7;break}Ne=Kt,w==null||10>W||!Ei(w,P+3,W-3)?w=0:(Rt=w[P+0]|w[P+1]<<8|w[P+2]<<16,Ht=16383&(w[P+7]<<8|w[P+6]),w=16383&(w[P+9]<<8|w[P+8]),1&Rt||3<(Rt>>1&7)||!(Rt>>4&1)||Rt>>5>=xt.Ja||!Ht||!w?w=0:(Ae&&(Ae[0]=Ht),Ne&&(Ne[0]=w),w=1))}if(!w||(Ae=Ae[0],Kt=Kt[0],Bt&&(qe[0]!=Ae||ht[0]!=Kt)))return 3;Ie!=null&&(Ie[0]=xt,Ie.offset=P-Ie.w,n(4294967286>P-Ie.w),n(Ie.offset==Ie.ha-W));break}return dt==0||dt==7&&Bt&&Ie==null?(Ee!=null&&(Ee[0]|=xt.na!=null&&0<xt.na.length),le!=null&&(le[0]=Ae),we!=null&&(we[0]=Kt),0):dt}function xu(w,P,W){var le=P.width,we=P.height,Ee=0,Ae=0,Ne=le,Ie=we;if(P.Da=w!=null&&0<w.Da,P.Da&&(Ne=w.cd,Ie=w.bd,Ee=w.v,Ae=w.j,11>W||(Ee&=-2,Ae&=-2),0>Ee||0>Ae||0>=Ne||0>=Ie||Ee+Ne>le||Ae+Ie>we))return 0;if(P.v=Ee,P.j=Ae,P.va=Ee+Ne,P.o=Ae+Ie,P.U=Ne,P.T=Ie,P.da=w!=null&&0<w.da,P.da){if(!We(Ne,Ie,W=[w.ib],Ee=[w.hb]))return 0;P.ib=W[0],P.hb=Ee[0]}return P.ob=w!=null&&w.ob,P.Kb=w==null||!w.Sd,P.da&&(P.ob=P.ib<3*le/4&&P.hb<3*we/4,P.Kb=0),1}function Ga(w){if(w==null)return 2;if(11>w.S){var P=w.f.RGBA;P.fb+=(w.height-1)*P.A,P.A=-P.A}else P=w.f.kb,w=w.height,P.O+=(w-1)*P.fa,P.fa=-P.fa,P.N+=(w-1>>1)*P.Ab,P.Ab=-P.Ab,P.W+=(w-1>>1)*P.Db,P.Db=-P.Db,P.F!=null&&(P.J+=(w-1)*P.lb,P.lb=-P.lb);return 0}function Ha(w,P,W,le){if(le==null||0>=w||0>=P)return 2;if(W!=null){if(W.Da){var we=W.cd,Ee=W.bd,Ae=-2&W.v,Ne=-2&W.j;if(0>Ae||0>Ne||0>=we||0>=Ee||Ae+we>w||Ne+Ee>P)return 2;w=we,P=Ee}if(W.da){if(!We(w,P,we=[W.ib],Ee=[W.hb]))return 2;w=we[0],P=Ee[0]}}le.width=w,le.height=P;e:{var Ie=le.width,qe=le.height;if(w=le.S,0>=Ie||0>=qe||!(w>=ys&&13>w))w=2;else{if(0>=le.Rd&&le.sd==null){Ae=Ee=we=P=0;var ht=(Ne=Ie*_h[w])*qe;if(11>w||(Ee=(qe+1)/2*(P=(Ie+1)/2),w==12&&(Ae=(we=Ie)*qe)),(qe=s(ht+2*Ee+Ae))==null){w=1;break e}le.sd=qe,11>w?((Ie=le.f.RGBA).eb=qe,Ie.fb=0,Ie.A=Ne,Ie.size=ht):((Ie=le.f.kb).y=qe,Ie.O=0,Ie.fa=Ne,Ie.Fd=ht,Ie.f=qe,Ie.N=0+ht,Ie.Ab=P,Ie.Cd=Ee,Ie.ea=qe,Ie.W=0+ht+Ee,Ie.Db=P,Ie.Ed=Ee,w==12&&(Ie.F=qe,Ie.J=0+ht+2*Ee),Ie.Tc=Ae,Ie.lb=we)}if(P=1,we=le.S,Ee=le.width,Ae=le.height,we>=ys&&13>we)if(11>we)w=le.f.RGBA,P&=(Ne=Math.abs(w.A))*(Ae-1)+Ee<=w.size,P&=Ne>=Ee*_h[we],P&=w.eb!=null;else{w=le.f.kb,Ne=(Ee+1)/2,ht=(Ae+1)/2,Ie=Math.abs(w.fa),qe=Math.abs(w.Ab);var Bt=Math.abs(w.Db),Rt=Math.abs(w.lb),xt=Rt*(Ae-1)+Ee;P&=Ie*(Ae-1)+Ee<=w.Fd,P&=qe*(ht-1)+Ne<=w.Cd,P=(P&=Bt*(ht-1)+Ne<=w.Ed)&Ie>=Ee&qe>=Ne&Bt>=Ne,P&=w.y!=null,P&=w.f!=null,P&=w.ea!=null,we==12&&(P&=Rt>=Ee,P&=xt<=w.Tc,P&=w.F!=null)}else P=0;w=P?0:2}}return w!=0||W!=null&&W.fd&&(w=Ga(le)),w}var wo=64,ia=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ns=24,ms=32,fl=8,zo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ze("Predictor0","PredictorAdd0"),$.Predictor0=function(){return 4278190080},$.Predictor1=function(w){return w},$.Predictor2=function(w,P,W){return P[W+0]},$.Predictor3=function(w,P,W){return P[W+1]},$.Predictor4=function(w,P,W){return P[W-1]},$.Predictor5=function(w,P,W){return ze(ze(w,P[W+1]),P[W+0])},$.Predictor6=function(w,P,W){return ze(w,P[W-1])},$.Predictor7=function(w,P,W){return ze(w,P[W+0])},$.Predictor8=function(w,P,W){return ze(P[W-1],P[W+0])},$.Predictor9=function(w,P,W){return ze(P[W+0],P[W+1])},$.Predictor10=function(w,P,W){return ze(ze(w,P[W-1]),ze(P[W+0],P[W+1]))},$.Predictor11=function(w,P,W){var le=P[W+0];return 0>=kt(le>>24&255,w>>24&255,(P=P[W-1])>>24&255)+kt(le>>16&255,w>>16&255,P>>16&255)+kt(le>>8&255,w>>8&255,P>>8&255)+kt(255&le,255&w,255&P)?le:w},$.Predictor12=function(w,P,W){var le=P[W+0];return(wt((w>>24&255)+(le>>24&255)-((P=P[W-1])>>24&255))<<24|wt((w>>16&255)+(le>>16&255)-(P>>16&255))<<16|wt((w>>8&255)+(le>>8&255)-(P>>8&255))<<8|wt((255&w)+(255&le)-(255&P)))>>>0},$.Predictor13=function(w,P,W){var le=P[W-1];return(Pt((w=ze(w,P[W+0]))>>24&255,le>>24&255)<<24|Pt(w>>16&255,le>>16&255)<<16|Pt(w>>8&255,le>>8&255)<<8|Pt(w>>0&255,le>>0&255))>>>0};var os=$.PredictorAdd0;$.PredictorAdd1=Jt,Ze("Predictor2","PredictorAdd2"),Ze("Predictor3","PredictorAdd3"),Ze("Predictor4","PredictorAdd4"),Ze("Predictor5","PredictorAdd5"),Ze("Predictor6","PredictorAdd6"),Ze("Predictor7","PredictorAdd7"),Ze("Predictor8","PredictorAdd8"),Ze("Predictor9","PredictorAdd9"),Ze("Predictor10","PredictorAdd10"),Ze("Predictor11","PredictorAdd11"),Ze("Predictor12","PredictorAdd12"),Ze("Predictor13","PredictorAdd13");var ss=$.PredictorAdd2;ot("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Qu,Po=$.ColorIndexInverseTransform,ba=$.MapARGB,Uo=$.VP8LColorIndexInverseTransformAlpha,Vo=$.MapAlpha,wa=$.VP8LPredictorsAdd=[];wa.length=16,($.VP8LPredictors=[]).length=16,($.VP8LPredictorsAdd_C=[]).length=16,($.VP8LPredictors_C=[]).length=16;var xa,Go,To,oa,Ds,Ho,_t,Zt,Nt,kn,Jn,Lr,Zi,wi,Rl,as,Ki,sa,La,aa,la,ua,Yr,Ws,No,xi,Ti,go,Ui=s(511),Is=s(2041),vs=s(225),js=s(767),Lu=0,ca=Is,xo=vs,$i=js,qo=Ui,ys=0,pr=1,Sa=2,Ea=3,Zs=4,ls=5,bc=6,Do=7,Io=8,Ks=9,a=10,p=[2,3,7],E=[3,3,11],V=[280,256,256,256,40],ae=[0,1,1,1,0],Se=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],st=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],At=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Gt=8,an=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],On=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],er=null,Fr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Lo=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],io=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Oo=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Yi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],_s=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],fa=[],Ys=[],$s=[],Tf=1,nu=2,gi=[],Wo=[];Vt("UpsampleRgbLinePair",zr,3),Vt("UpsampleBgrLinePair",Hi,3),Vt("UpsampleRgbaLinePair",Ts,4),Vt("UpsampleBgraLinePair",bo,4),Vt("UpsampleArgbLinePair",po,4),Vt("UpsampleRgba4444LinePair",bi,2),Vt("UpsampleRgb565LinePair",di,2);var De=$.UpsampleRgbLinePair,bs=$.UpsampleBgrLinePair,Su=$.UpsampleRgbaLinePair,Bo=$.UpsampleBgraLinePair,Vr=$.UpsampleArgbLinePair,Zc=$.UpsampleRgba4444LinePair,ph=$.UpsampleRgb565LinePair,Kc=16,qa=1<<Kc-1,xc=-227,Nf=482,yd=6,ec=0,Yc=s(256),Fl=s(256),_d=s(256),Jc=s(256),Xc=s(Nf-xc),gh=s(Nf-xc);$o("YuvToRgbRow",zr,3),$o("YuvToBgrRow",Hi,3),$o("YuvToRgbaRow",Ts,4),$o("YuvToBgraRow",bo,4),$o("YuvToArgbRow",po,4),$o("YuvToRgba4444Row",bi,2),$o("YuvToRgb565Row",di,2);var mh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ca=[0,2,8],vh=[8,7,6,4,4,2,2,2,1,1,1,1],yh=1;this.WebPDecodeRGBA=function(w,P,W,le,we){var Ee=pr,Ae=new ko,Ne=new Yn;Ae.ba=Ne,Ne.S=Ee,Ne.width=[Ne.width],Ne.height=[Ne.height];var Ie=Ne.width,qe=Ne.height,ht=new wr;if(ht==null||w==null)var Bt=2;else n(ht!=null),Bt=ra(w,P,W,ht.width,ht.height,ht.Pd,ht.Qd,ht.format,null);if(Bt!=0?Ie=0:(Ie!=null&&(Ie[0]=ht.width[0]),qe!=null&&(qe[0]=ht.height[0]),Ie=1),Ie){Ne.width=Ne.width[0],Ne.height=Ne.height[0],le!=null&&(le[0]=Ne.width),we!=null&&(we[0]=Ne.height);e:{if(le=new Rr,(we=new Hs).data=w,we.w=P,we.ha=W,we.kd=1,P=[0],n(we!=null),((w=ra(we.data,we.w,we.ha,null,null,null,P,null,we))==0||w==7)&&P[0]&&(w=4),(P=w)==0){if(n(Ae!=null),le.data=we.data,le.w=we.w+we.offset,le.ha=we.ha-we.offset,le.put=Ut,le.ac=Qe,le.bc=xn,le.ma=Ae,we.xa){if((w=Pr())==null){Ae=1;break e}if(function(Rt,xt){var Kt=[0],Ht=[0],dt=[0];t:for(;;){if(Rt==null)return 0;if(xt==null)return Rt.a=2,0;if(Rt.l=xt,Rt.a=0,ie(Rt.m,xt.data,xt.w,xt.ha),!vn(Rt.m,Kt,Ht,dt)){Rt.a=3;break t}if(Rt.xb=nu,xt.width=Kt[0],xt.height=Ht[0],!dr(Kt[0],Ht[0],1,Rt,null))break t;return 1}return n(Rt.a!=0),0}(w,le)){if(le=(P=Ha(le.width,le.height,Ae.Oa,Ae.ba))==0){t:{le=w;n:for(;;){if(le==null){le=0;break t}if(n(le.s.yc!=null),n(le.s.Ya!=null),n(0<le.s.Wb),n((W=le.l)!=null),n((we=W.ma)!=null),le.xb!=0){if(le.ca=we.ba,le.tb=we.tb,n(le.ca!=null),!xu(we.Oa,W,Ea)){le.a=2;break n}if(!Ai(le,W.width)||W.da)break n;if((W.da||En(le.ca.S))&&Lt(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&Lt()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!te(le.s.vb,le.s.Wa.Xa)){le.a=1;break n}le.xb=0}if(!Mi(le,le.V,le.Ba,le.c,le.i,W.o,ei))break n;we.Dc=le.Ma,le=1;break t}n(le.a!=0),le=0}le=!le}le&&(P=w.a)}else P=w.a}else{if((w=new mn)==null){Ae=1;break e}if(w.Fa=we.na,w.P=we.P,w.qc=we.Sa,Ri(w,le)){if((P=Ha(le.width,le.height,Ae.Oa,Ae.ba))==0){if(w.Aa=0,W=Ae.Oa,n((we=w)!=null),W!=null){if(0<(Ie=0>(Ie=W.Md)?0:100<Ie?255:255*Ie/100)){for(qe=ht=0;4>qe;++qe)12>(Bt=we.pb[qe]).lc&&(Bt.ia=Ie*vh[0>Bt.lc?0:Bt.lc]>>3),ht|=Bt.ia;ht&&(alert("todo:VP8InitRandom"),we.ia=1)}we.Ga=W.Id,100<we.Ga?we.Ga=100:0>we.Ga&&(we.Ga=0)}cr(w,le)||(P=w.a)}}else P=w.a}P==0&&Ae.Oa!=null&&Ae.Oa.fd&&(P=Ga(Ae.ba))}Ae=P}Ee=Ae!=0?null:11>Ee?Ne.f.RGBA.eb:Ne.f.kb.y}else Ee=null;return Ee};var _h=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d($,U){for(var Z="",T=0;T<4;T++)Z+=String.fromCharCode($[U++]);return Z}function m($,U){return($[U+0]<<0|$[U+1]<<8|$[U+2]<<16)>>>0}function _($,U){return($[U+0]<<0|$[U+1]<<8|$[U+2]<<16|$[U+3]<<24)>>>0}new f;var b=[0],y=[0],M=[],k=new f,F=e,I=function($,U){var Z={},T=0,N=!1,O=0,z=0;if(Z.frames=[],!function(H,Q,ue,se){for(var pe=0;pe<se;pe++)if(H[Q+pe]!=ue.charCodeAt(pe))return!0;return!1}($,U,"RIFF",4)){var q,G;for(_($,U+=4),U+=8;U<$.length;){var oe=d($,U),ie=_($,U+=4);U+=4;var _e=ie+(1&ie);switch(oe){case"VP8 ":case"VP8L":Z.frames[T]===void 0&&(Z.frames[T]={}),(J=Z.frames[T]).src_off=N?z:U-8,J.src_size=O+ie+8,T++,N&&(N=!1,O=0,z=0);break;case"VP8X":(J=Z.header={}).feature_flags=$[U];var Ce=U+4;J.canvas_width=1+m($,Ce),Ce+=3,J.canvas_height=1+m($,Ce),Ce+=3;break;case"ALPH":N=!0,O=_e+8,z=U-8;break;case"ANIM":(J=Z.header).bgcolor=_($,U),Ce=U+4,J.loop_count=(q=$)[(G=Ce)+0]<<0|q[G+1]<<8,Ce+=2;break;case"ANMF":var Te,J;(J=Z.frames[T]={}).offset_x=2*m($,U),U+=3,J.offset_y=2*m($,U),U+=3,J.width=1+m($,U),U+=3,J.height=1+m($,U),U+=3,J.duration=m($,U),U+=3,Te=$[U++],J.dispose=1&Te,J.blend=Te>>1&1}oe!="ANMF"&&(U+=_e)}return Z}}(F,0);I.response=F,I.rgbaoutput=!0,I.dataurl=!1;var R=I.header?I.header:null,Y=I.frames?I.frames:null;if(R){R.loop_counter=R.loop_count,b=[R.canvas_height],y=[R.canvas_width];for(var ee=0;ee<Y.length&&Y[ee].blend!=0;ee++);}var he=Y[0],fe=k.WebPDecodeRGBA(F,he.src_off,he.src_size,y,b);he.rgba=fe,he.imgwidth=y[0],he.imgheight=b[0];for(var ve=0;ve<y[0]*b[0]*4;ve++)M[ve]=fe[ve];return this.width=y,this.height=b,this.data=M,this}(function(e){var n=function(){return typeof b1=="function"},t=function(b,y,M,k){var F=4,I=o;switch(k){case e.image_compression.FAST:F=1,I=s;break;case e.image_compression.MEDIUM:F=6,I=u;break;case e.image_compression.SLOW:F=9,I=f}b=r(b,y,M,I);var R=b1(b,{level:F});return e.__addimage__.arrayBufferToBinaryString(R)},r=function(b,y,M,k){for(var F,I,R,Y=b.length/y,ee=new Uint8Array(b.length+Y),he=m(),fe=0;fe<Y;fe+=1){if(R=fe*y,F=b.subarray(R,R+y),k)ee.set(k(F,M,I),R+fe);else{for(var ve,$=he.length,U=[];ve<$;ve+=1)U[ve]=he[ve](F,M,I);var Z=_(U.concat());ee.set(U[Z],R+fe)}I=F}return ee},i=function(b){var y=Array.apply([],b);return y.unshift(0),y},s=function(b,y){var M,k=[],F=b.length;k[0]=1;for(var I=0;I<F;I+=1)M=b[I-y]||0,k[I+1]=b[I]-M+256&255;return k},o=function(b,y,M){var k,F=[],I=b.length;F[0]=2;for(var R=0;R<I;R+=1)k=M&&M[R]||0,F[R+1]=b[R]-k+256&255;return F},u=function(b,y,M){var k,F,I=[],R=b.length;I[0]=3;for(var Y=0;Y<R;Y+=1)k=b[Y-y]||0,F=M&&M[Y]||0,I[Y+1]=b[Y]+256-(k+F>>>1)&255;return I},f=function(b,y,M){var k,F,I,R,Y=[],ee=b.length;Y[0]=4;for(var he=0;he<ee;he+=1)k=b[he-y]||0,F=M&&M[he]||0,I=M&&M[he-y]||0,R=d(k,F,I),Y[he+1]=b[he]-R+256&255;return Y},d=function(b,y,M){if(b===y&&y===M)return b;var k=Math.abs(y-M),F=Math.abs(b-M),I=Math.abs(b+y-M-M);return k<=F&&k<=I?b:F<=I?y:M},m=function(){return[i,s,o,u,f]},_=function(b){var y=b.map(function(M){return M.reduce(function(k,F){return k+Math.abs(F)},0)});return y.indexOf(Math.min.apply(null,y))};e.processPNG=function(b,y,M,k){var F,I,R,Y,ee,he,fe,ve,$,U,Z,T,N,O,z,q=this.decode.FLATE_DECODE,G="";if(this.__addimage__.isArrayBuffer(b)&&(b=new Uint8Array(b)),this.__addimage__.isArrayBufferView(b)){if(b=(R=new IF(b)).imgData,I=R.bits,F=R.colorSpace,ee=R.colors,[4,6].indexOf(R.colorType)!==-1){if(R.bits===8){$=(ve=R.pixelBitlength==32?new Uint32Array(R.decodePixels().buffer):R.pixelBitlength==16?new Uint16Array(R.decodePixels().buffer):new Uint8Array(R.decodePixels().buffer)).length,Z=new Uint8Array($*R.colors),U=new Uint8Array($);var oe,ie=R.pixelBitlength-R.bits;for(O=0,z=0;O<$;O++){for(N=ve[O],oe=0;oe<ie;)Z[z++]=N>>>oe&255,oe+=R.bits;U[O]=N>>>oe&255}}if(R.bits===16){$=(ve=new Uint32Array(R.decodePixels().buffer)).length,Z=new Uint8Array($*(32/R.pixelBitlength)*R.colors),U=new Uint8Array($*(32/R.pixelBitlength)),T=R.colors>1,O=0,z=0;for(var _e=0;O<$;)N=ve[O++],Z[z++]=N>>>0&255,T&&(Z[z++]=N>>>16&255,N=ve[O++],Z[z++]=N>>>0&255),U[_e++]=N>>>16&255;I=8}k!==e.image_compression.NONE&&n()?(b=t(Z,R.width*R.colors,R.colors,k),fe=t(U,R.width,1,k)):(b=Z,fe=U,q=void 0)}if(R.colorType===3&&(F=this.color_spaces.INDEXED,he=R.palette,R.transparency.indexed)){var Ce=R.transparency.indexed,Te=0;for(O=0,$=Ce.length;O<$;++O)Te+=Ce[O];if((Te/=255)===$-1&&Ce.indexOf(0)!==-1)Y=[Ce.indexOf(0)];else if(Te!==$){for(ve=R.decodePixels(),U=new Uint8Array(ve.length),O=0,$=ve.length;O<$;O++)U[O]=Ce[ve[O]];fe=t(U,R.width,1)}}var J=function(H){var Q;switch(H){case e.image_compression.FAST:Q=11;break;case e.image_compression.MEDIUM:Q=13;break;case e.image_compression.SLOW:Q=14;break;default:Q=12}return Q}(k);return q===this.decode.FLATE_DECODE&&(G="/Predictor "+J+" "),G+="/Colors "+ee+" /BitsPerComponent "+I+" /Columns "+R.width,(this.__addimage__.isArrayBuffer(b)||this.__addimage__.isArrayBufferView(b))&&(b=this.__addimage__.arrayBufferToBinaryString(b)),(fe&&this.__addimage__.isArrayBuffer(fe)||this.__addimage__.isArrayBufferView(fe))&&(fe=this.__addimage__.arrayBufferToBinaryString(fe)),{alias:M,data:b,index:y,filter:q,decodeParameters:G,transparency:Y,palette:he,sMask:fe,predictor:J,width:R.width,height:R.height,bitsPerComponent:I,colorSpace:F}}}})(kr.API),function(e){e.processGIF89A=function(n,t,r,i){var s=new OF(n),o=s.width,u=s.height,f=[];s.decodeAndBlitFrameRGBA(0,f);var d={data:f,width:o,height:u},m=new pv(100).encode(d,100);return e.processJPEG.call(this,m,t,r,i)},e.processGIF87A=e.processGIF89A}(kr.API),Iu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var n=0;n<e;n++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Iu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[e]()}catch(t){vo.log("bit decode error:"+t)}},Iu.prototype.bit1=function(){var e,n=Math.ceil(this.width/8),t=n%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<n;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,u=0;u<8&&8*i+u<this.width;u++){var f=this.palette[s>>7-u&1];this.data[o+4*u]=f.blue,this.data[o+4*u+1]=f.green,this.data[o+4*u+2]=f.red,this.data[o+4*u+3]=255}t!==0&&(this.pos+=4-t)}},Iu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),n=e%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,u=s>>4,f=15&s,d=this.palette[u];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[f],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}n!==0&&(this.pos+=4-n)}},Iu.prototype.bit8=function(){for(var e=this.width%4,n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Iu.prototype.bit15=function(){for(var e=this.width%3,n=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&n)/n*255|0,u=(s>>5&n)/n*255|0,f=(s>>10&n)/n*255|0,d=s>>15?255:0,m=r*this.width*4+4*i;this.data[m]=f,this.data[m+1]=u,this.data[m+2]=o,this.data[m+3]=d}this.pos+=e}},Iu.prototype.bit16=function(){for(var e=this.width%3,n=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&n)/n*255|0,f=(o>>5&t)/t*255|0,d=(o>>11)/n*255|0,m=i*this.width*4+4*s;this.data[m]=d,this.data[m+1]=f,this.data[m+2]=u,this.data[m+3]=255}this.pos+=e}},Iu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Iu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var n=this.bottom_up?e:this.height-1-e,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=n*this.width*4+4*t;this.data[u]=s,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=o}},Iu.prototype.getData=function(){return this.data},function(e){e.processBMP=function(n,t,r,i){var s=new Iu(n,!1),o=s.width,u=s.height,f={data:s.getData(),width:o,height:u},d=new pv(100).encode(f,100);return e.processJPEG.call(this,d,t,r,i)}}(kr.API),zb.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(n,t,r,i){var s=new zb(n),o=s.width,u=s.height,f={data:s.getData(),width:o,height:u},d=new pv(100).encode(f,100);return e.processJPEG.call(this,d,t,r,i)}}(kr.API),kr.API.processRGBA=function(e,n,t){for(var r=e.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),u=0,f=0,d=0;d<i;d+=4){var m=r[d],_=r[d+1],b=r[d+2],y=r[d+3];s[u++]=m,s[u++]=_,s[u++]=b,o[f++]=y}var M=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:M,index:n,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},kr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ih=kr.API,xg=Ih.getCharWidthsArray=function(e,n){var t,r,i=(n=n||{}).font||this.internal.getFont(),s=n.fontSize||this.internal.getFontSize(),o=n.charSpace||this.internal.getCharSpace(),u=n.widths?n.widths:i.metadata.Unicode.widths,f=u.fof?u.fof:1,d=n.kerning?n.kerning:i.metadata.Unicode.kerning,m=d.fof?d.fof:1,_=n.doKerning!==!1,b=0,y=e.length,M=0,k=u[0]||f,F=[];for(t=0;t<y;t++)r=e.charCodeAt(t),typeof i.metadata.widthOfString=="function"?F.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(b=_&&ao(d[r])==="object"&&!isNaN(parseInt(d[r][M],10))?d[r][M]/m:0,F.push((u[r]||k)/f+b)),M=r;return F},Rb=Ih.getStringUnitWidth=function(e,n){var t=(n=n||{}).fontSize||this.internal.getFontSize(),r=n.font||this.internal.getFont(),i=n.charSpace||this.internal.getCharSpace();return Ih.processArabic&&(e=Ih.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,t,i)/t:xg.apply(this,arguments).reduce(function(s,o){return s+o},0)},Fb=function(e,n,t,r){for(var i=[],s=0,o=e.length,u=0;s!==o&&u+n[s]<t;)u+=n[s],s++;i.push(e.slice(0,s));var f=s;for(u=0;s!==o;)u+n[s]>r&&(i.push(e.slice(f,s)),u=0,f=s),u+=n[s],s++;return f!==s&&i.push(e.slice(f,s)),i},jb=function(e,n,t){t||(t={});var r,i,s,o,u,f,d,m=[],_=[m],b=t.textIndent||0,y=0,M=0,k=e.split(" "),F=xg.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?k[0].length+2:t.lineIndent||0){var I=Array(f).join(" "),R=[];k.map(function(ee){(ee=ee.split(/\s*\n/)).length>1?R=R.concat(ee.map(function(he,fe){return(fe&&he.length?`
`:"")+he})):R.push(ee[0])}),k=R,f=Rb.apply(this,[I,t])}for(s=0,o=k.length;s<o;s++){var Y=0;if(r=k[s],f&&r[0]==`
`&&(r=r.substr(1),Y=1),b+y+(M=(i=xg.apply(this,[r,t])).reduce(function(ee,he){return ee+he},0))>n||Y){if(M>n){for(u=Fb.apply(this,[r,i,n-(b+y),n]),m.push(u.shift()),m=[u.pop()];u.length;)_.push([u.shift()]);M=i.slice(r.length-(m[0]?m[0].length:0)).reduce(function(ee,he){return ee+he},0)}else m=[r];_.push(m),b=M+f,y=F}else m.push(r),b+=y+M,y=F}return d=f?function(ee,he){return(he?I:"")+ee.join(" ")}:function(ee){return ee.join(" ")},_.map(d)},Ih.splitTextToSize=function(e,n,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var _=this.internal.getFont(m.fontName,m.fontStyle);return _.metadata.Unicode?{widths:_.metadata.Unicode.widths||{0:1},kerning:_.metadata.Unicode.kerning||{}}:{font:_.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*n/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var u,f,d=[];for(u=0,f=r.length;u<f;u++)d=d.concat(jb.apply(this,[r[u],o,s]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var n="klmnopqrstuvwxyz",t={},r={},i=0;i<n.length;i++)t[n[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=n[i];var s=function(_){return"0x"+parseInt(_,10).toString(16)},o=e.__fontmetrics__.compress=function(_){var b,y,M,k,F=["{"];for(var I in _){if(b=_[I],isNaN(parseInt(I,10))?y="'"+I+"'":(I=parseInt(I,10),y=(y=s(I).slice(2)).slice(0,-1)+r[y.slice(-1)]),typeof b=="number")b<0?(M=s(b).slice(3),k="-"):(M=s(b).slice(2),k=""),M=k+M.slice(0,-1)+r[M.slice(-1)];else{if(ao(b)!=="object")throw new Error("Don't know what to do with value type "+ao(b)+".");M=o(b)}F.push(y+M)}return F.push("}"),F.join("")},u=e.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var b,y,M,k,F={},I=1,R=F,Y=[],ee="",he="",fe=_.length-1,ve=1;ve<fe;ve+=1)(k=_[ve])=="'"?b?(M=b.join(""),b=void 0):b=[]:b?b.push(k):k=="{"?(Y.push([R,M]),R={},M=void 0):k=="}"?((y=Y.pop())[0][y[1]]=R,M=void 0,R=y[0]):k=="-"?I=-1:M===void 0?t.hasOwnProperty(k)?(ee+=t[k],M=parseInt(ee,16)*I,I=1,ee=""):ee+=k:t.hasOwnProperty(k)?(he+=t[k],R[M]=parseInt(he,16)*I,I=1,M=void 0,he=""):he+=k;return F},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},m={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(_){var b=_.font,y=m.Unicode[b.postScriptName];y&&(b.metadata.Unicode={},b.metadata.Unicode.widths=y.widths,b.metadata.Unicode.kerning=y.kerning);var M=d.Unicode[b.postScriptName];M&&(b.metadata.Unicode.encoding=M,b.encoding=M.codePages[0])}])}(kr.API),function(e){var n=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};e.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,u){u=/^\x00\x01\x00\x00/.test(u)?n(u):n(ap(u)),o.metadata=e.API.TTFFont.open(u),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(kr),function(e){function n(){return(Dr.canvg?Promise.resolve(Dr.canvg):mf(()=>import("./index.es.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}kr.API.addSvgAsImage=function(t,r,i,s,o,u,f,d){if(isNaN(r)||isNaN(i))throw vo.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw vo.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var m=document.createElement("canvas");m.width=s,m.height=o;var _=m.getContext("2d");_.fillStyle="#fff",_.fillRect(0,0,m.width,m.height);var b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},y=this;return n().then(function(M){return M.fromString(_,t,b)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(M){return M.render(b)}).then(function(){y.addImage(m.toDataURL("image/jpeg",1),r,i,s,o,f,d)})}}(),kr.API.putTotalPages=function(e){var n,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(e,"g"),t=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(n,t);return this},kr.API.viewerPreferences=function(e,n){var t;e=e||{},n=n||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},u=Object.keys(o),f=[],d=0,m=0,_=0;function b(M,k){var F,I=!1;for(F=0;F<M.length;F+=1)M[F]===k&&(I=!0);return I}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,e==="reset"||n===!0){var y=u.length;for(_=0;_<y;_+=1)t[u[_]].value=t[u[_]].defaultValue,t[u[_]].explicitSet=!1}if(ao(e)==="object"){for(i in e)if(s=e[i],b(u,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&b(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(d=0;d<s.length;d+=1)if(r=!0,s[d].length===1&&typeof s[d][0]=="number")f.push(String(s[d]-1));else if(s[d].length>1){for(m=0;m<s[d].length;m+=1)typeof s[d][m]!="number"&&(r=!1);r===!0&&f.push([s[d][0]-1,s[d][1]-1].join(" "))}t[i].value="["+f.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var M,k=[];for(M in t)t[M].explicitSet===!0&&(t[M].type==="name"?k.push("/"+M+" /"+t[M].value):k.push("/"+M+" "+t[M].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(e){var n=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),u=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+o.length+u.length+i.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+u+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",n)),this}}(kr.API),function(e){var n=e.API,t=n.pdfEscape16=function(s,o){for(var u,f=o.metadata.Unicode.widths,d=["","0","00","000","0000"],m=[""],_=0,b=s.length;_<b;++_){if(u=o.metadata.characterToGlyph(s.charCodeAt(_)),o.metadata.glyIdsUsed.push(u),o.metadata.toUnicode[u]=s.charCodeAt(_),f.indexOf(u)==-1&&(f.push(u),f.push([parseInt(o.metadata.widthOfGlyph(u),10)])),u=="0")return m.join("");u=u.toString(16),m.push(d[4-u.length],u)}return m.join("")},r=function(s){var o,u,f,d,m,_,b;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],_=0,b=(u=Object.keys(s).sort(function(y,M){return y-M})).length;_<b;_++)o=u[_],f.length>=100&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(d=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),f.push("<"+o+"><"+d+">"));return f.length&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),m+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(s){(function(o){var u=o.font,f=o.out,d=o.newObject,m=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="Identity-H"){for(var _=u.metadata.Unicode.widths,b=u.metadata.subset.encode(u.metadata.glyIdsUsed,1),y="",M=0;M<b.length;M++)y+=String.fromCharCode(b[M]);var k=d();m({data:y,addLength1:!0,objectId:k}),f("endobj");var F=d();m({data:r(u.metadata.toUnicode),addLength1:!0,objectId:F}),f("endobj");var I=d();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Vh(u.fontName)),f("/FontFile2 "+k+" 0 R"),f("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),f("/Flags "+u.metadata.flags),f("/StemV "+u.metadata.stemV),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f(">>"),f("endobj");var R=d();f("<<"),f("/Type /Font"),f("/BaseFont /"+Vh(u.fontName)),f("/FontDescriptor "+I+" 0 R"),f("/W "+e.API.PDFObject.convert(_)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+u.encoding+")"),f(">>"),f(">>"),f("endobj"),u.objectNumber=d(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+F+" 0 R"),f("/BaseFont /"+Vh(u.fontName)),f("/Encoding /"+u.encoding),f("/DescendantFonts ["+R+" 0 R]"),f(">>"),f("endobj"),u.isAlreadyPutted=!0}})(s)}]),n.events.push(["putFont",function(s){(function(o){var u=o.font,f=o.out,d=o.newObject,m=o.putStream;if(u.metadata instanceof e.API.TTFFont&&u.encoding==="WinAnsiEncoding"){for(var _=u.metadata.rawData,b="",y=0;y<_.length;y++)b+=String.fromCharCode(_[y]);var M=d();m({data:b,addLength1:!0,objectId:M}),f("endobj");var k=d();m({data:r(u.metadata.toUnicode),addLength1:!0,objectId:k}),f("endobj");var F=d();f("<<"),f("/Descent "+u.metadata.decender),f("/CapHeight "+u.metadata.capHeight),f("/StemV "+u.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+M+" 0 R"),f("/Flags 96"),f("/FontBBox "+e.API.PDFObject.convert(u.metadata.bbox)),f("/FontName /"+Vh(u.fontName)),f("/ItalicAngle "+u.metadata.italicAngle),f("/Ascent "+u.metadata.ascender),f(">>"),f("endobj"),u.objectNumber=d();for(var I=0;I<u.metadata.hmtx.widths.length;I++)u.metadata.hmtx.widths[I]=parseInt(u.metadata.hmtx.widths[I]*(1e3/u.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+Vh(u.fontName)+"/FontDescriptor "+F+" 0 R/Encoding/"+u.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(u.metadata.hmtx.widths)+">>"),f("endobj"),u.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,u=s.text||"",f=s.x,d=s.y,m=s.options||{},_=s.mutex||{},b=_.pdfEscape,y=_.activeFontKey,M=_.fonts,k=y,F="",I=0,R="",Y=M[k].encoding;if(M[k].encoding!=="Identity-H")return{text:u,x:f,y:d,options:m,mutex:_};for(R=u,k=y,Array.isArray(u)&&(R=u[0]),I=0;I<R.length;I+=1)M[k].metadata.hasOwnProperty("cmap")&&(o=M[k].metadata.cmap.unicode.codeMap[R[I].charCodeAt(0)]),o||R[I].charCodeAt(0)<256&&M[k].metadata.hasOwnProperty("Unicode")?F+=R[I]:F+="";var ee="";return parseInt(k.slice(1))<14||Y==="WinAnsiEncoding"?ee=b(F,k).split("").map(function(he){return he.charCodeAt(0).toString(16)}).join(""):Y==="Identity-H"&&(ee=t(F,M[k])),_.isHex=!0,{text:ee,x:f,y:d,options:m,mutex:_}};n.events.push(["postProcessText",function(s){var o=s.text||"",u=[],f={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?u.push([i(Object.assign({},f,{text:o[d][0]})).text,o[d][1],o[d][2]]):u.push(i(Object.assign({},f,{text:o[d]})).text);s.text=u}else s.text=i(Object.assign({},f,{text:o})).text}])}(kr),function(e){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(t){return n.call(this),this.internal.vFS[t]!==void 0},e.addFileToVFS=function(t,r){return n.call(this),this.internal.vFS[t]=r,this},e.getFileFromVFS=function(t){return n.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(kr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,s,o,u,f,d,m,_=n,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],y=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],M={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},F=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],I=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,Y=0;this.__bidiEngine__={};var ee=function(T){var N=T.charCodeAt(),O=N>>8,z=k[O];return z!==void 0?_[256*z+(255&N)]:O===252||O===253?"AL":I.test(O)?"L":O===8?"R":"N"},he=function(T){for(var N,O=0;O<T.length;O++){if((N=ee(T.charAt(O)))==="L")return!1;if(N==="R")return!0}return!1},fe=function(T,N,O,z){var q,G,oe,ie,_e=N[z];switch(_e){case"L":case"R":R=!1;break;case"N":case"AN":break;case"EN":R&&(_e="AN");break;case"AL":R=!0,_e="R";break;case"WS":_e="N";break;case"CS":z<1||z+1>=N.length||(q=O[z-1])!=="EN"&&q!=="AN"||(G=N[z+1])!=="EN"&&G!=="AN"?_e="N":R&&(G="AN"),_e=G===q?G:"N";break;case"ES":_e=(q=z>0?O[z-1]:"B")==="EN"&&z+1<N.length&&N[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&O[z-1]==="EN"){_e="EN";break}if(R){_e="N";break}for(oe=z+1,ie=N.length;oe<ie&&N[oe]==="ET";)oe++;_e=oe<ie&&N[oe]==="EN"?"EN":"N";break;case"NSM":if(o&&!u){for(ie=N.length,oe=z+1;oe<ie&&N[oe]==="NSM";)oe++;if(oe<ie){var Ce=T[z],Te=Ce>=1425&&Ce<=2303||Ce===64286;if(q=N[oe],Te&&(q==="R"||q==="AL")){_e="R";break}}}_e=z<1||(q=N[z-1])==="B"?"N":O[z-1];break;case"B":R=!1,i=!0,_e=Y;break;case"S":s=!0,_e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"BN":_e="N"}return _e},ve=function(T,N,O){var z=T.split("");return O&&$(z,O,{hiLevel:Y}),z.reverse(),N&&N.reverse(),z.join("")},$=function(T,N,O){var z,q,G,oe,ie,_e=-1,Ce=T.length,Te=0,J=[],H=Y?y:b,Q=[];for(R=!1,i=!1,s=!1,q=0;q<Ce;q++)Q[q]=ee(T[q]);for(G=0;G<Ce;G++){if(ie=Te,J[G]=fe(T,Q,J,G),z=240&(Te=H[ie][M[J[G]]]),Te&=15,N[G]=oe=H[Te][5],z>0)if(z===16){for(q=_e;q<G;q++)N[q]=1;_e=-1}else _e=-1;if(H[Te][6])_e===-1&&(_e=G);else if(_e>-1){for(q=_e;q<G;q++)N[q]=oe;_e=-1}Q[G]==="B"&&(N[G]=0),O.hiLevel|=oe}s&&function(ue,se,pe){for(var K=0;K<pe;K++)if(ue[K]==="S"){se[K]=Y;for(var D=K-1;D>=0&&ue[D]==="WS";D--)se[D]=Y}}(Q,N,Ce)},U=function(T,N,O,z,q){if(!(q.hiLevel<T)){if(T===1&&Y===1&&!i)return N.reverse(),void(O&&O.reverse());for(var G,oe,ie,_e,Ce=N.length,Te=0;Te<Ce;){if(z[Te]>=T){for(ie=Te+1;ie<Ce&&z[ie]>=T;)ie++;for(_e=Te,oe=ie-1;_e<oe;_e++,oe--)G=N[_e],N[_e]=N[oe],N[oe]=G,O&&(G=O[_e],O[_e]=O[oe],O[oe]=G);Te=ie}Te++}}},Z=function(T,N,O){var z=T.split(""),q={hiLevel:Y};return O||(O=[]),$(z,O,q),function(G,oe,ie){if(ie.hiLevel!==0&&m)for(var _e,Ce=0;Ce<G.length;Ce++)oe[Ce]===1&&(_e=F.indexOf(G[Ce]))>=0&&(G[Ce]=F[_e+1])}(z,O,q),U(2,z,N,O,q),U(1,z,N,O,q),z.join("")};return this.__bidiEngine__.doBidiReorder=function(T,N,O){if(function(q,G){if(G)for(var oe=0;oe<q.length;oe++)G[oe]=oe;u===void 0&&(u=he(q)),d===void 0&&(d=he(q))}(T,N),o||!f||d)if(o&&f&&u^d)Y=u?1:0,T=ve(T,N,O);else if(!o&&f&&d)Y=u?1:0,T=Z(T,N,O),T=ve(T,N);else if(!o||u||f||d){if(o&&!f&&u^d)T=ve(T,N),u?(Y=0,T=Z(T,N,O)):(Y=1,T=Z(T,N,O),T=ve(T,N));else if(o&&u&&!f&&d)Y=1,T=Z(T,N,O),T=ve(T,N);else if(!o&&!f&&u^d){var z=m;u?(Y=1,T=Z(T,N,O),Y=0,m=!1,T=Z(T,N,O),m=z):(Y=0,T=Z(T,N,O),T=ve(T,N),Y=1,m=!1,T=Z(T,N,O),m=z,T=ve(T,N))}}else Y=0,T=Z(T,N,O);else Y=u?1:0,T=Z(T,N,O);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,f=T.isOutputVisual,u=T.isInputRtl,d=T.isOutputRtl,m=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var u=0;for(o=[],u=0;u<i.length;u+=1)Object.prototype.toString.call(i[u])==="[object Array]"?o.push([t.doBidiReorder(i[u][0]),i[u][1],i[u][2]]):o.push([t.doBidiReorder(i[u])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(kr),kr.API.TTFFont=function(){function e(n){var t;if(this.rawData=n,t=this.contents=new Mf(n),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new YF(this),this.registerTTF()}return e.open=function(n){return new e(n)},e.prototype.parse=function(){return this.directory=new BF(this.contents),this.head=new FF(this),this.name=new VF(this),this.cmap=new Ix(this),this.toUnicode={},this.hhea=new jF(this),this.maxp=new GF(this),this.hmtx=new HF(this),this.post=new zF(this),this.os2=new $F(this),this.loca=new KF(this),this.glyf=new qF(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var n,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,u,f,d;for(d=[],o=0,u=(f=this.bbox).length;o<u;o++)n=f[o],d.push(Math.round(n*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(n){var t;return((t=this.cmap.unicode)!=null?t.codeMap[n]:void 0)||0},e.prototype.widthOfGlyph=function(n){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*t},e.prototype.widthOfString=function(n,t,r){var i,s,o,u;for(o=0,s=0,u=(n=""+n).length;0<=u?s<u:s>u;s=0<=u?++s:--s)i=n.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},e.prototype.lineHeight=function(n,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*n},e}();var Yu,Mf=function(){function e(n){this.data=n??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(n){return this.data[this.pos++]=n},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},e.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},e.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},e.prototype.readString=function(n){var t,r;for(r=[],t=0;0<=n?t<n:t>n;t=0<=n?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(n){var t,r,i;for(i=[],t=0,r=n.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(n.charCodeAt(t)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(n){return this.writeInt16(n)},e.prototype.readLongLong=function(){var n,t,r,i,s,o,u,f;return n=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),u=this.readByte(),f=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^u)+(255^f)+1):72057594037927940*n+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*u+f},e.prototype.writeLongLong=function(n){var t,r;return t=Math.floor(n/4294967296),r=4294967295&n,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(n){return this.writeInt32(n)},e.prototype.read=function(n){var t,r;for(t=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)t.push(this.readByte());return t},e.prototype.write=function(n){var t,r,i,s;for(s=[],r=0,i=n.length;r<i;r++)t=n[r],s.push(this.writeByte(t));return s},e}(),BF=function(){var e;function n(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return n.prototype.encode=function(t){var r,i,s,o,u,f,d,m,_,b,y,M,k;for(k in y=Object.keys(t).length,f=Math.log(2),_=16*Math.floor(Math.log(y)/f),o=Math.floor(_/f),m=16*y-_,(i=new Mf).writeInt(this.scalarType),i.writeShort(y),i.writeShort(_),i.writeShort(o),i.writeShort(m),s=16*y,d=i.pos+s,u=null,M=[],t)for(b=t[k],i.writeString(k),i.writeInt(e(b)),i.writeInt(d),i.writeInt(b.length),M=M.concat(b),k==="head"&&(u=d),d+=b.length;d%4;)M.push(0),d++;return i.write(M),r=2981146554-e(i.data),i.pos=u+8,i.writeUInt32(r),i.data},e=function(t){var r,i,s,o;for(t=Ox.call(t);t.length%4;)t.push(0);for(s=new Mf(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},n}(),RF={}.hasOwnProperty,_c=function(e,n){for(var t in n)RF.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};Yu=function(){function e(n){var t;this.file=n,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var FF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Yu),n.prototype.tag="head",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},n.prototype.encode=function(t){var r;return(r=new Mf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},n}(),Ub=function(){function e(n,t){var r,i,s,o,u,f,d,m,_,b,y,M,k,F,I,R,Y;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=t+n.readInt(),_=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=n.readByte();break;case 4:for(y=n.readUInt16(),b=y/2,n.pos+=6,s=function(){var ee,he;for(he=[],f=ee=0;0<=b?ee<b:ee>b;f=0<=b?++ee:--ee)he.push(n.readUInt16());return he}(),n.pos+=2,k=function(){var ee,he;for(he=[],f=ee=0;0<=b?ee<b:ee>b;f=0<=b?++ee:--ee)he.push(n.readUInt16());return he}(),d=function(){var ee,he;for(he=[],f=ee=0;0<=b?ee<b:ee>b;f=0<=b?++ee:--ee)he.push(n.readUInt16());return he}(),m=function(){var ee,he;for(he=[],f=ee=0;0<=b?ee<b:ee>b;f=0<=b?++ee:--ee)he.push(n.readUInt16());return he}(),i=(this.length-n.pos+this.offset)/2,u=function(){var ee,he;for(he=[],f=ee=0;0<=i?ee<i:ee>i;f=0<=i?++ee:--ee)he.push(n.readUInt16());return he}(),f=I=0,Y=s.length;I<Y;f=++I)for(F=s[f],r=R=M=k[f];M<=F?R<=F:R>=F;r=M<=F?++R:--R)m[f]===0?o=r+d[f]:(o=u[m[f]/2+(r-M)-(b-f)]||0)!==0&&(o+=d[f]),this.codeMap[r]=65535&o}n.pos=_}return e.encode=function(n,t){var r,i,s,o,u,f,d,m,_,b,y,M,k,F,I,R,Y,ee,he,fe,ve,$,U,Z,T,N,O,z,q,G,oe,ie,_e,Ce,Te,J,H,Q,ue,se,pe,K,D,ke,Me,Ge;switch(z=new Mf,o=Object.keys(n).sort(function(ce,te){return ce-te}),t){case"macroman":for(k=0,F=function(){var ce=[];for(M=0;M<256;++M)ce.push(0);return ce}(),R={0:0},s={},q=0,_e=o.length;q<_e;q++)R[D=n[i=o[q]]]==null&&(R[D]=++k),s[i]={old:n[i],new:R[n[i]]},F[i]=R[n[i]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(F),{charMap:s,subtable:z.data,maxGlyphID:k+1};case"unicode":for(N=[],_=[],Y=0,R={},r={},I=d=null,G=0,Ce=o.length;G<Ce;G++)R[he=n[i=o[G]]]==null&&(R[he]=++Y),r[i]={old:he,new:R[he]},u=R[he]-i,I!=null&&u===d||(I&&_.push(I),N.push(i),d=u),I=i;for(I&&_.push(I),_.push(65535),N.push(65535),Z=2*(U=N.length),$=2*Math.pow(Math.log(U)/Math.LN2,2),b=Math.log($/2)/Math.LN2,ve=2*U-$,f=[],fe=[],y=[],M=oe=0,Te=N.length;oe<Te;M=++oe){if(T=N[M],m=_[M],T===65535){f.push(0),fe.push(0);break}if(T-(O=r[T].new)>=32768)for(f.push(0),fe.push(2*(y.length+U-M)),i=ie=T;T<=m?ie<=m:ie>=m;i=T<=m?++ie:--ie)y.push(r[i].new);else f.push(O-T),fe.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*U+2*y.length),z.writeUInt16(0),z.writeUInt16(Z),z.writeUInt16($),z.writeUInt16(b),z.writeUInt16(ve),pe=0,J=_.length;pe<J;pe++)i=_[pe],z.writeUInt16(i);for(z.writeUInt16(0),K=0,H=N.length;K<H;K++)i=N[K],z.writeUInt16(i);for(ke=0,Q=f.length;ke<Q;ke++)u=f[ke],z.writeUInt16(u);for(Me=0,ue=fe.length;Me<ue;Me++)ee=fe[Me],z.writeUInt16(ee);for(Ge=0,se=y.length;Ge<se;Ge++)k=y[Ge],z.writeUInt16(k);return{charMap:r,subtable:z.data,maxGlyphID:Y+1}}},e}(),Ix=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Yu),n.prototype.tag="cmap",n.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new Ub(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},n.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=Ub.encode(t,r),(s=new Mf).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},n}(),jF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Yu),n.prototype.tag="hhea",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},n}(),$F=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Yu),n.prototype.tag="OS/2",n.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},n}(),zF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Yu),n.prototype.tag="post",n.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var u,f,d;for(d=[],o=u=0,f=this.file.maxp.numGlyphs;0<=f?u<f:u>f;o=0<=f?++u:--u)d.push(t.readUInt32());return d}).call(this)}},n}(),UF=function(e,n){this.raw=e,this.length=e.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},VF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Yu),n.prototype.tag="name",n.prototype.parse=function(t){var r,i,s,o,u,f,d,m,_,b,y;for(t.pos=this.offset,t.readShort(),r=t.readShort(),f=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+f+t.readShort()});for(d={},o=_=0,b=i.length;_<b;o=++_)s=i[o],t.pos=s.offset,m=t.readString(s.length),u=new UF(m,s),d[y=s.nameID]==null&&(d[y]=[]),d[s.nameID].push(u);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},n}(),GF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Yu),n.prototype.tag="maxp",n.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},n}(),HF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Yu),n.prototype.tag="hmtx",n.prototype.parse=function(t){var r,i,s,o,u,f,d;for(t.pos=this.offset,this.metrics=[],r=0,f=this.file.hhea.numberOfMetrics;0<=f?r<f:r>f;r=0<=f?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var m,_;for(_=[],r=m=0;0<=s?m<s:m>s;r=0<=s?++m:--m)_.push(t.readInt16());return _}(),this.widths=(function(){var m,_,b,y;for(y=[],m=0,_=(b=this.metrics).length;m<_;m++)o=b[m],y.push(o.advance);return y}).call(this),i=this.widths[this.widths.length-1],d=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)d.push(this.widths.push(i));return d},n.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},n}(),Ox=[].slice,qF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Yu),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(t){var r,i,s,o,u,f,d,m,_,b;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,u=(f=new Mf(r.read(s))).readShort(),m=f.readShort(),b=f.readShort(),d=f.readShort(),_=f.readShort(),this.cache[t]=u===-1?new ZF(f,m,b,d,_):new WF(f,u,m,b,d,_),this.cache[t]))},n.prototype.encode=function(t,r,i){var s,o,u,f,d;for(u=[],o=[],f=0,d=r.length;f<d;f++)s=t[r[f]],o.push(u.length),s&&(u=u.concat(s.encode(i)));return o.push(u.length),{table:u,offsets:o}},n}(),WF=function(){function e(n,t,r,i,s,o){this.raw=n,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),ZF=function(){function e(n,t,r,i,s){var o,u;for(this.raw=n,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;u=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&u;)o.pos+=1&u?4:2,128&u?o.pos+=8:64&u?o.pos+=4:8&u&&(o.pos+=2)}return e.prototype.encode=function(){var n,t,r;for(t=new Mf(Ox.call(this.raw.data)),n=0,r=this.glyphIDs.length;n<r;++n)t.pos=this.glyphOffsets[n];return t.data},e}(),KF=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return _c(n,Yu),n.prototype.tag="loca",n.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}).call(this)},n.prototype.indexOf=function(t){return this.offsets[t]},n.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},n.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,u=0;u<i.length;++u)if(i[u]=s,o<r.length&&r[o]==u){++o,i[u]=s;var f=this.offsets[u],d=this.offsets[u+1]-f;d>0&&(s+=d)}for(var m=new Array(4*i.length),_=0;_<i.length;++_)m[4*_+3]=255&i[_],m[4*_+2]=(65280&i[_])>>8,m[4*_+1]=(16711680&i[_])>>16,m[4*_]=(4278190080&i[_])>>24;return m},n}(),YF=function(){function e(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var n,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,n={},s=this.subset)r=s[t],n[t]=i[r];return n},e.prototype.glyphsFor=function(n){var t,r,i,s,o,u,f;for(i={},o=0,u=n.length;o<u;o++)i[s=n[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in f=this.glyphsFor(t))r=f[s],i[s]=r;return i},e.prototype.encode=function(n,t){var r,i,s,o,u,f,d,m,_,b,y,M,k,F,I;for(i in r=Ix.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(n),y={0:0},I=r.charMap)y[(f=I[i]).old]=f.new;for(M in b=r.maxGlyphID,o)M in y||(y[M]=b++);return m=function(R){var Y,ee;for(Y in ee={},R)ee[R[Y]]=Y;return ee}(y),_=Object.keys(m).sort(function(R,Y){return R-Y}),k=function(){var R,Y,ee;for(ee=[],R=0,Y=_.length;R<Y;R++)u=_[R],ee.push(m[u]);return ee}(),s=this.font.glyf.encode(o,k,y),d=this.font.loca.encode(s.offsets,k),F={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(F["OS/2"]=this.font.os2.raw()),this.font.directory.encode(F)},e}();kr.API.PDFObject=function(){var e;function n(){}return e=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},n.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var u,f,d;for(d=[],u=0,f=t.length;u<f;u++)r=t[u],d.push(n.convert(r));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+e(t.getUTCFullYear(),4)+e(t.getUTCMonth(),2)+e(t.getUTCDate(),2)+e(t.getUTCHours(),2)+e(t.getUTCMinutes(),2)+e(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+n.convert(o));return s.push(">>"),s.join(`
`)}return""+t},n}();const JF={class:"h-full flex"},XF={class:"flex-1 relative"},QF={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},e9={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},t9={class:"text-center max-w-lg mx-auto p-8"},n9={class:"space-y-4"},r9={class:"map-parent"},i9={key:0,class:"fixed left-0 right-0 z-[1500]",style:{top:"var(--header-height)"}},o9={class:"map-content flex flex-col md:flex-row relative"},s9={class:"flex-1 relative"},a9={key:1,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},l9={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},u9={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},c9={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},f9={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},h9={key:0,class:"space-y-4"},d9={key:0,class:"space-y-2"},p9={class:"grid grid-cols-1 gap-2"},g9=["onClick"],m9={class:"font-medium text-gray-900"},v9={key:1,class:"space-y-2"},y9={class:"flex items-center mb-4"},_9={class:"text-sm text-gray-600"},b9={class:"grid grid-cols-1 gap-2"},w9=["onClick"],x9={class:"font-medium text-gray-900"},L9={key:2,class:"space-y-2"},S9={class:"flex items-center mb-4"},E9={class:"text-sm text-gray-600"},C9={class:"grid grid-cols-1 gap-2"},P9={key:0,class:"text-center py-4"},M9=["onClick"],A9={class:"font-medium text-gray-900"},k9={key:3,class:"space-y-2"},T9={class:"flex items-center mb-4"},N9={class:"text-sm text-gray-600"},D9={class:"grid grid-cols-1 gap-2"},I9=["onClick"],O9={class:"font-medium text-gray-900"},B9={class:"text-sm text-gray-500"},R9={class:"text-xs text-gray-400 mt-1"},F9={key:1,class:"space-y-4"},j9={key:0,class:"space-y-2"},$9={class:"grid grid-cols-1 gap-2"},z9={key:0,class:"text-center py-8"},U9=["onClick"],V9={class:"font-medium text-gray-900"},G9={key:1,class:"space-y-2"},H9={class:"flex items-center mb-4"},q9={class:"text-sm text-gray-600"},W9={class:"grid grid-cols-1 gap-2"},Z9=["onClick"],K9={class:"font-medium text-gray-900"},Y9={class:"text-sm text-gray-500"},J9={class:"text-xs text-gray-400 mt-1"},X9={key:2,class:"space-y-4"},Q9={key:3,class:"space-y-4"},ej={key:0,class:"text-center py-8"},tj={key:1,class:"space-y-2"},nj=["onClick"],rj={class:"font-medium text-gray-900"},ij={class:"text-sm text-gray-500"},oj={class:"text-xs text-gray-400 mt-1"},Vb=Qo({__name:"MapView",emits:["shape-selected"],setup(e,{emit:n}){const t=f8(),r=Ft(null),i=Ft(!1),s=py(),o=fd(),u=lh(),f=Yl(),d=Ft([]),m=Ft({planId:t.query.planId?parseInt(t.query.planId):null,noteId:t.query.noteId?parseInt(t.query.noteId):null,lat:t.query.lat?parseFloat(t.query.lat):null,lng:t.query.lng?parseFloat(t.query.lng):null,tool:t.query.tool||null}),{currentTool:_,selectedShape:b,map:y,initMap:M,setDrawingTool:k,updateShapeStyle:F,updateShapeProperties:I,featureGroup:R,adjustView:Y,clearActiveControlPoints:ee,calculateConnectedCoverageArea:he}=kR(),{initMap:fe,changeBaseMap:ve}=TR(),$=Ft(!1),U=Ft(!1),Z=Ft(!1),T=Ft(null),N=Ft(null),O=Ft(!1),z=Ft(null),q=ta(),G=Ft([]),oe=Ft([]),ie=Ft([]),_e=Ft(null),Ce=Ft(null),Te=Ft(null),J=Ft(!1),H=Ft(!1),Q=Ft(!1),ue=Ft(null),se=rr(()=>{var ft,Qe;return console.log("[MapView][filteredClients] Computing with:",{userType:(ft=q.user)==null?void 0:ft.user_type,selectedSalarie:_e.value,salarieVisiteurs:oe.value,visiteurCount:((Qe=oe.value)==null?void 0:Qe.length)||0}),q.isSalarie||_e.value?oe.value:[]}),pe=rr(()=>{var bn,qt,Hn;if(!b.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:b.value,hasName:"name"in b.value,name:b.value.name,hasProperties:"properties"in b.value,propertiesName:(bn=b.value.properties)==null?void 0:bn.name,allLayerKeys:Object.keys(b.value),allPropertiesKeys:b.value.properties?Object.keys(b.value.properties):[],_leaflet_id:b.value._leaflet_id,_dbId:b.value._dbId,descriptor:Object.getOwnPropertyDescriptor(b.value,"name")});const ft=b.value.properties||{};let Qe="unknown";ft.type?Qe=ft.type:b.value instanceof zt.Circle?Qe="Circle":b.value instanceof ga||b.value instanceof zt.Rectangle?Qe="Rectangle":b.value instanceof vf||b.value instanceof zt.Polygon?Qe="Polygon":b.value instanceof Cf?Qe="ElevationLine":(b.value instanceof Bs||b.value instanceof zt.Polyline&&!(b.value instanceof zt.Polygon))&&(Qe="Line"),console.log(`[MapView][selectedShape] Type de forme dtect: ${Qe}`),ft.type||(b.value.properties||(b.value.properties={}),b.value.properties.type=Qe);let Ut;if(ft.style&&ft.style.name)Ut=ft.style.name,console.log("[MapView][selectedShape] Using name from style:",Ut);else if(ft.name)Ut=ft.name,console.log("[MapView][selectedShape] Using name from properties:",Ut);else if(b.value.name)Ut=b.value.name,console.log("[MapView][selectedShape] Using name from layer:",Ut);else{const St=Object.getOwnPropertyDescriptor(b.value,"name");St&&St.value&&(Ut=St.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",Ut));const mt=["_name","displayName","title"];for(const wn of mt)if(b.value[wn]){Ut=b.value[wn],console.log(`[MapView][selectedShape] Found name in ${wn}:`,Ut);break}}Ut&&(console.log(`[MapView][selectedShape] Ensuring name "${Ut}" is set everywhere`),b.value.properties||(b.value.properties={}),b.value.properties.name=Ut,b.value.properties.style||(b.value.properties.style={}),b.value.properties.style.name=Ut,b.value.name=Ut,typeof b.value.setName=="function"&&(b.value.setName(Ut),console.log(`[MapView][selectedShape] Used setName method to set name "${Ut}"`))),b.value.properties.category||(b.value.properties.category="forages"),b.value.properties.accessLevel||(b.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:Qe,name:ft.name,foundName:Ut,hasNameProperty:"name"in ft,allPropertiesKeys:Object.keys(ft),layerId:b.value._leaflet_id,rawProperties:ft,layerName:b.value.name,layerPropertiesName:(qt=b.value.properties)==null?void 0:qt.name});const xn={...ft,type:Qe,name:Ut||b.value.name||ft.name||void 0,category:b.value.properties.category||"forages",accessLevel:b.value.properties.accessLevel||"visitor"},vn={type:Qe,properties:xn,layer:b.value,options:b.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:vn.type,hasName:"name"in vn.properties,name:vn.properties.name,layerName:vn.layer.name,layerPropertiesName:(Hn=vn.layer.properties)==null?void 0:Hn.name}),vn});function K(ft){const Qe=ft.getCenter(),Ut=ft.getZoom(),xn={lat:Qe.lat,lng:Qe.lng,zoom:Ut};document.cookie=`mapState=${JSON.stringify(xn)};max-age=2592000;path=/`}function D(){const Qe=document.cookie.split(";").find(Ut=>Ut.trim().startsWith("mapState="));if(Qe)try{return JSON.parse(Qe.split("=")[1])}catch(Ut){return console.error("Erreur lors de la lecture du cookie de position:",Ut),null}return null}ps(async()=>{var ft,Qe;console.log("[MapView][onMounted] Initialisation du composant MapView"),console.log("[MapView][onMounted] tat initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),(q.isAdmin||q.isEntreprise)&&await Qt(),q.isEntreprise){J.value=!0;try{const St=await Vn.get("/users/",{params:{role:"SALARIE",entreprise:(ft=q.user)==null?void 0:ft.id}});G.value=St.data}catch(St){console.error("Error loading salaries:",St),G.value=[]}finally{J.value=!1}}if(q.isSalarie){H.value=!0;try{const St=await q.fetchSalarieVisiteurs(((Qe=q.user)==null?void 0:Qe.id)||0);oe.value=Array.isArray(St)?St:[St]}catch(St){console.error("Error loading clients:",St)}finally{H.value=!1}}const Ut=D(),xn=Ut?[Ut.lat,Ut.lng]:[46.603354,1.888334],vn=(Ut==null?void 0:Ut.zoom)??6;if(r.value&&!y.value){const St=M(r.value,xn,vn);St.pm.setLang("fr"),St.pm.addControls({rotateMode:!1}),fe(St),St.on("moveend",()=>{K(St)}),window.addEventListener("map-set-location",mt=>{if(St&&mt.detail){const{lat:wn,lng:ei,zoom:Tt}=mt.detail;St.flyTo([wn,ei],Tt,{duration:1.5,easeLinearity:.25})}}),R.value&&(R.value.on("layeradd",mt=>{const wn=mt.layer;wn&&wn._leaflet_id&&d.value.findIndex(Tt=>Tt.layer&&Tt.layer._leaflet_id===wn._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${wn._leaflet_id}  shapes.value`),d.value.push({layer:wn,id:wn._dbId||wn._leaflet_id}))}),R.value.on("layerremove",mt=>{const wn=mt.layer;wn&&wn._leaflet_id&&console.log(`[MapView][featureGroup.layerremove] Couche ${wn._leaflet_id} supprime du featureGroup mais conserve dans shapes.value`)}))}if(m.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramtres d'URL:",m.value.planId),await te(m.value.planId);const St=document.querySelector(".map-parent");St instanceof HTMLElement&&(St.style.display="block"),m.value.lat&&m.value.lng&&y.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnes:",m.value.lat,m.value.lng),y.value.flyTo([m.value.lat,m.value.lng],16)),m.value.noteId&&R.value&&(console.log("[MapView][onMounted] Recherche de la note:",m.value.noteId),setTimeout(()=>{var wn;const mt=((wn=R.value)==null?void 0:wn.getLayers())||[];for(const ei of mt)if(ei._dbId===m.value.noteId||ei.id===m.value.noteId){console.log("[MapView][onMounted] Note trouve:",ei),typeof ei.fire=="function"&&ei.fire("click");break}},1e3)),m.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",m.value.tool),k(m.value.tool))}catch(St){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",St),bn()}else bn();async function bn(){const St=localStorage.getItem("lastPlanId");if(St)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",St),await te(parseInt(St));const mt=document.querySelector(".map-parent");mt instanceof HTMLElement&&(mt.style.display="block")}catch(mt){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",mt),T.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Ge(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan  charger"),T.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Ge()}window.addEventListener("shape:created",St=>{const{shape:mt,type:wn,properties:ei}=St.detail;console.log("[MapView] Nouvelle forme cre",{shape:mt,type:wn,properties:ei}),o.addElement(mt),k("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[MapView] vnement geonote:savePlan reu - Sauvegarde automatique du plan"),ye()}),window.addEventListener("categoriesReactivated",St=>{console.log("[MapView][categoriesReactivated] vnement reu:",St.detail),Yn()}),window.addEventListener("shapeTypesReactivated",St=>{console.log("[MapView][shapeTypesReactivated] vnement reu:",St.detail),Yn()});const qt=St=>{if(console.log("[MapView] dition de note via Leaflet",St),console.log("[MapView] Type de e:",typeof St,"Contenu de e:",JSON.stringify(St)),!St||!St.note){console.error("[MapView] Erreur: e.note est undefined ou null",St);return}const mt=St.note;console.log("[MapView] Note  diter:",mt),N.value={id:mt.id,title:mt.title||mt.name,description:mt.description,location:mt.location,columnId:mt.columnId||u.getDefaultColumn.id,accessLevel:mt.accessLevel,style:mt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:mt.createdAt||new Date().toISOString(),updatedAt:mt.updatedAt||new Date().toISOString(),comments:mt.comments||[],photos:mt.photos||[]},console.log("[MapView] editingMapNote.value aprs conversion:",N.value),Z.value=!0,console.log("[MapView] showNoteEditModal.value:",Z.value)},Hn=St=>{if(console.log("[MapView] dition de note via vnement global",St),!St.detail||!St.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",St);return}const mt=St.detail.note;console.log("[MapView] Note  diter (global):",mt);const wn=d.value.find(Tt=>Tt.layer===St.detail.source),ei=wn?wn.id:mt.id;console.log("[MapView] ID de la note pour l'API:",ei,"Source:",St.detail.source?"Couche Leaflet":"Autre"),N.value={id:ei,title:mt.title||mt.name,description:mt.description,location:mt.location,columnId:mt.columnId||u.getDefaultColumn.id,accessLevel:mt.accessLevel,style:mt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:mt.createdAt||new Date().toISOString(),updatedAt:mt.updatedAt||new Date().toISOString(),comments:mt.comments||[],photos:mt.photos||[]},Z.value=!0};window.addEventListener("geonote:edit",Hn),R.value&&(R.value.off("note:edit"),R.value.on("note:edit",qt))}catch(Ut){console.error("Error during component mount:",Ut),T.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Ge(),localStorage.removeItem("lastPlanId")}}),oo(()=>o.hasUnsavedChanges,ft=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",ft),ft&&T.value&&s.markUnsavedChanges()}),oo(()=>o.filters,(ft,Qe)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres dtect:",JSON.stringify(ft,null,2)),Qe){const Ut=JSON.stringify(Qe.accessLevels)!==JSON.stringify(ft.accessLevels),xn=JSON.stringify(Qe.categories)!==JSON.stringify(ft.categories),vn=JSON.stringify(Qe.shapeTypes)!==JSON.stringify(ft.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements dtects:",{accessLevelsChanged:Ut,categoriesChanged:xn,shapeTypesChanged:vn}),Ut||xn||vn?(console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),Yn()):console.log("[MapView][watch drawingStore.filters] Aucun changement rel, pas de mise  jour")}else console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),Yn()},{deep:!0});const ke=ft=>{console.log("[MapView][filtersChanged] vnement reu:",ft.detail),Yn()};ps(()=>{window.addEventListener("filtersChanged",ke)}),Hu(()=>{window.removeEventListener("filtersChanged",ke),console.log("[MapView][filtersChanged] vnement dsactiv")}),oo(()=>o.getFilteredElements,(ft,Qe)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage, lments filtrs:",{nouveaux:ft.length,anciens:Qe?Qe.length:"aucun",ids:ft.map(Ut=>Ut.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage suite au changement d'elements filtrs"),Yn()},{deep:!0}),oo(y,async ft=>{var Qe;console.log(`
[MapView][watch map] Nouvelle carte:`,!!ft),ft&&s.currentPlan&&!((Qe=R.value)!=null&&Qe.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des lments du plan:",s.currentPlan.id),Ge(),await o.loadPlanElements(s.currentPlan.id))}),oo(()=>s.currentPlan,async(ft,Qe)=>{var Ut,xn,vn;if((ft==null?void 0:ft.id)===(Qe==null?void 0:Qe.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement ncessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",ft==null?void 0:ft.id);try{if(ft){console.log("[MapView][watch currentPlan] Mise  jour du plan courant..."),T.value=ft;const bn=document.querySelector(".map-parent");bn instanceof HTMLElement&&(bn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis  jour avec succs")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),T.value=null,Ge();const bn=document.querySelector(".map-parent");bn instanceof HTMLElement&&(bn.style.display="none")}}catch(bn){console.error("[MapView][watch currentPlan] ERREUR:",bn),T.value=null,Ge()}console.log("[MapView][watch currentPlan] tat final:",{currentPlanId:(Ut=T.value)==null?void 0:Ut.id,storePlanId:(xn=s.currentPlan)==null?void 0:xn.id,mapVisible:y.value!==null,mapParentDisplay:(vn=document.querySelector(".map-parent"))==null?void 0:vn.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),fh(()=>{y.value&&y.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function Me(){i.value=!i.value}function Ge(){R.value&&(R.value.eachLayer(ft=>{var Qe;((Qe=ft.properties)==null?void 0:Qe.type)==="Note"&&typeof ft.resetPlanSaveState=="function"&&ft.resetPlanSaveState()}),R.value.clearLayers()),d.value=[],ee(),b.value=null,_.value=""}async function ce(ft){return await dn.measureAsync("refreshMapWithPlan",async()=>{try{dn.measure("refreshMapWithPlan:clearMap",()=>{Ge()},"MapView"),await dn.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await o.loadPlanElements(ft)},"MapView");const Qe=dn.measure("refreshMapWithPlan:getPlanById",()=>s.getPlanById(ft),"MapView");Qe?(dn.measure("refreshMapWithPlan:updateCurrentPlan",()=>{T.value=Qe,s.setCurrentPlan(Qe),o.setCurrentPlan(Qe.id),localStorage.setItem("lastPlanId",Qe.id.toString())},"MapView"),await dn.measureAsync("refreshMapWithPlan:loadPlanNotes",async()=>{try{console.log("[MapView][refreshMapWithPlan] Chargement des notes golocalises associes au plan:",ft);const xn=(await Qs.getNotesByPlan(ft)).data;console.log(`[MapView][refreshMapWithPlan] ${xn.length} notes golocalises rcupres`);const vn=lh();y.value&&R.value&&xn.forEach(bn=>{try{if(vn.addNote({...bn,id:bn.id,columnId:bn.column,accessLevel:bn.access_level}),bn.location&&bn.location.type==="Point"&&Array.isArray(bn.location.coordinates)&&bn.location.coordinates.length===2){const qt=$c.fromBackendData({name:bn.title,description:bn.description,location:bn.location,columnId:bn.column,accessLevel:bn.access_level,style:bn.style||{color:bn.color||"#3B82F6",weight:2,opacity:1,fillColor:bn.color||"#3B82F6",fillOpacity:.6,radius:8},category:bn.category||"forages",comments:bn.comments||[],photos:bn.photos||[]});qt._dbId=bn.id,R.value.addLayer(qt),d.value.push({id:bn.id,type:"Note",layer:qt,properties:qt.properties}),console.log("[MapView][refreshMapWithPlan] Note golocalise ajoute  la carte:",{id:bn.id,title:bn.title,location:bn.location})}}catch(qt){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note golocalise:",qt)}})}catch(Ut){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes golocalises:",Ut)}},"MapView"),y.value&&R.value&&await dn.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] lments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(bn=>{var qt;return{id:bn.id,type:bn.type_forme,hasName:bn.data&&"name"in bn.data,name:(qt=bn.data)==null?void 0:qt.name}})});const Ut=o.getCurrentElements.reduce((bn,qt)=>(bn[qt.type_forme]||(bn[qt.type_forme]=[]),bn[qt.type_forme].push(qt),bn),{}),xn=10,vn=Object.entries(Ut).map(async([bn,qt])=>{for(let Hn=0;Hn<qt.length;Hn+=xn){const St=qt.slice(Hn,Hn+xn);await Promise.all(St.map(async mt=>{await dn.measureAsync(`refreshMapWithPlan:createElement:${mt.type_forme}`,async()=>{var ei;if(!R.value||!mt.data)return;let wn=null;switch(mt.type_forme){case"Circle":{const Tt=mt.data;Tt.center&&Tt.radius&&(wn=new zh(zt.latLng(Tt.center[1],Tt.center[0]),{...Tt.style,radius:Tt.radius}),Tt.name&&(wn.properties={type:"Circle",name:Tt.name,style:Tt.style,radius:Tt.radius,diameter:Tt.radius*2,surface:Math.PI*Tt.radius*Tt.radius,perimeter:2*Math.PI*Tt.radius},wn.name=Tt.name));break}case"Rectangle":{const Tt=mt.data;if(Tt.bounds){const Fn=zt.latLngBounds(zt.latLng(Tt.bounds.southWest[1],Tt.bounds.southWest[0]),zt.latLng(Tt.bounds.northEast[1],Tt.bounds.northEast[0]));wn=new ga(Fn,Tt.style),Tt.name&&(wn.properties={name:Tt.name},wn.name=Tt.name)}break}case"Polygon":{const Tt=mt.data;if(Tt.points&&Tt.points.length>0){const Fn=Tt.points.map(Qn=>zt.latLng(Qn[1],Qn[0]));wn=new vf(Fn,Tt.style),Tt.name&&(wn.properties={name:Tt.name},wn.name=Tt.name)}break}case"Line":{const Tt=mt.data;if(Tt.points&&Tt.points.length>0){const Fn=Tt.points.map(Qn=>zt.latLng(Qn[1],Qn[0]));wn=new Bs(Fn,Tt.style),Tt.name&&(wn.properties={name:Tt.name},wn.name=Tt.name)}break}case"ElevationLine":{const Tt=mt.data;if(Tt.points&&Tt.points.length>0){const Fn=Tt.points.map(Qn=>zt.latLng(Qn[1],Qn[0]));wn=new Cf(Fn,Tt.style),Tt.name&&(wn.properties={name:Tt.name,type:"ElevationLine",elevationData:Tt.elevationData,minElevation:Tt.minElevation,maxElevation:Tt.maxElevation,elevationGain:Tt.elevationGain,elevationLoss:Tt.elevationLoss,averageSlope:Tt.averageSlope,maxSlope:Tt.maxSlope},wn.name=Tt.name),Tt.elevationData&&(wn.elevationData=Tt.elevationData)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Cration d'une note:",mt.data);const Tt=mt.data;if(Tt.location&&Array.isArray(Tt.location)&&Tt.location.length===2||Tt.location&&typeof Tt.location=="object"&&Tt.location.type==="Point"&&Array.isArray(Tt.location.coordinates)&&Tt.location.coordinates.length===2)try{Tt.category||(Tt.category="forages",console.log("[MapView][refreshMapWithPlan] Catgorie par dfaut ajoute:",Tt.category)),Tt.accessLevel||(Tt.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accs par dfaut ajout:",Tt.accessLevel));const Qn=$c.fromBackendData(Tt);Qn._dbId=mt.id,wn=Qn,console.log("[MapView][refreshMapWithPlan] Note cre:",{id:mt.id,location:Tt.location,name:Tt.name,category:Tt.category,accessLevel:Tt.accessLevel,type:Qn.properties.type})}catch(Qn){console.error("[MapView][refreshMapWithPlan] Erreur lors de la cration de la Note:",Qn)}else console.error("[MapView][refreshMapWithPlan] Donnes invalides pour Note:",Tt),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}wn&&(wn._dbId=mt.id,(ei=R.value)==null||ei.addLayer(wn),d.value.push({id:mt.id,type:mt.type_forme,layer:wn,properties:wn.properties}))},"MapView")})),await new Promise(mt=>setTimeout(mt,0))}});await Promise.all(vn),dn.measure("refreshMapWithPlan:adjustView",()=>{Y()},"MapView")},"MapView"),console.log(`Plan ${ft} charg avec succs avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${ft} introuvable aprs chargement`),U.value=!1}catch(Qe){throw console.error("Erreur lors du rafrachissement de la carte:",Qe),Qe}},"MapView")}async function te(ft){return await dn.measureAsync("loadPlan",async()=>{var Qe;console.log(`
[MapView][loadPlan] ====== DBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",ft);try{const Ut=await dn.measureAsync("loadPlan:getPlanFromStore",async()=>s.getPlanById(ft),"MapView");if(console.log("[MapView][loadPlan] Plan trouv dans le store:",!!Ut),!Ut){console.log("[MapView][loadPlan] Plan non trouv dans le store, vrification API...");try{await dn.measureAsync("loadPlan:apiCheck",async()=>{await Vn.get(`/plans/${ft}/`)},"MapView")}catch(xn){throw((Qe=xn.response)==null?void 0:Qe.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouv - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),T.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Ge()),xn}}console.log("[MapView][loadPlan] Rafrachissement de la carte..."),await dn.measureAsync("loadPlan:refreshMap",async()=>{await ce(ft)},"MapView"),U.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),on(),console.log("[MapView][loadPlan] Plan charg avec succs:",{planId:ft,elementsCount:o.getCurrentElements.length})}catch(Ut){throw console.error("Erreur lors du chargement du plan:",Ut),dn.measure("loadPlan:errorRecovery",()=>{T.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Ge(),localStorage.removeItem("lastPlanId")},"MapView"),Ut}},"MapView")}async function ye(){var ft;if(!T.value||!R.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}O.value=!0,z.value="saving";try{const Qe=[],Ut=new Set(o.getCurrentElements.filter(qt=>qt.id!==void 0).map(qt=>qt.id)),xn=new Set;console.log("[savePlan] Dbut de la sauvegarde",{featureGroupLayers:R.value.getLayers().length,existingIds:Array.from(Ut),currentElements:o.getCurrentElements}),R.value.eachLayer(qt=>{var wn,ei,Tt,Fn,Qn,Mi,Sr,Pr,dr,Ai,xr,Gr,Ir,tn,zi,Bi,Qi,ti,Br;console.log("[savePlan] Traitement de la couche",{type:(wn=qt.properties)==null?void 0:wn.type,name:(ei=qt.properties)==null?void 0:ei.name,isPolygon:qt instanceof zt.Polygon,properties:qt.properties});let Hn,St;const mt={color:qt.options.color||"#2b6451",weight:qt.options.weight||3,opacity:qt.options.opacity||1,fillColor:qt.options.fillColor||"#2b6451",fillOpacity:qt.options.fillOpacity||.2,dashArray:qt.options.dashArray||""};if(qt instanceof ga){Hn="Rectangle";const ci=qt.getBounds();St={bounds:{southWest:[ci.getSouthWest().lng,ci.getSouthWest().lat],northEast:[ci.getNorthEast().lng,ci.getNorthEast().lat]},style:mt,name:((Tt=qt.properties)==null?void 0:Tt.name)||"",rotation:qt.getRotation(),width:qt.getDimensions().width,height:qt.getDimensions().height,center:[qt.getCenter().lng,qt.getCenter().lat]}}else if(qt instanceof zt.Circle)Hn="Circle",St={center:[qt.getLatLng().lng,qt.getLatLng().lat],radius:qt.getRadius(),name:((Fn=qt.properties)==null?void 0:Fn.name)||"",style:mt};else if(qt instanceof zt.Rectangle){Hn="Rectangle";const ci=qt.getBounds();St={bounds:{southWest:[ci.getSouthWest().lng,ci.getSouthWest().lat],northEast:[ci.getNorthEast().lng,ci.getNorthEast().lat]},name:((Qn=qt.properties)==null?void 0:Qn.name)||"",style:mt}}else if(qt instanceof zt.Polyline&&!(qt instanceof zt.Polygon))if(((Mi=qt.properties)==null?void 0:Mi.type)==="ElevationLine"){Hn="ElevationLine";const ci=qt.getLatLngs(),mr=((Sr=qt.properties)==null?void 0:Sr.category)||"forages",Si=((Pr=qt.properties)==null?void 0:Pr.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catgorie:",mr,"Niveau d'accs:",Si),St={points:ci.map(gs=>[gs.lng,gs.lat]),style:{...mt,color:((dr=qt.properties.style)==null?void 0:dr.color)||"#FF4500",weight:((Ai=qt.properties.style)==null?void 0:Ai.weight)||4,opacity:((xr=qt.properties.style)==null?void 0:xr.opacity)||.8,_accessLevel:Si,accessLevel:Si},name:((Gr=qt.properties)==null?void 0:Gr.name)||"",category:mr,accessLevel:Si,elevationData:qt.properties.elevationData,samplePointStyle:qt.properties.samplePointStyle,minMaxPointStyle:qt.properties.minMaxPointStyle,minElevation:qt.properties.minElevation,maxElevation:qt.properties.maxElevation,elevationGain:qt.properties.elevationGain,elevationLoss:qt.properties.elevationLoss,averageSlope:qt.properties.averageSlope,maxSlope:qt.properties.maxSlope}}else{Hn="Line";const ci=qt.getLatLngs(),mr=((Ir=qt.properties)==null?void 0:Ir.category)||"forages",Si=((tn=qt.properties)==null?void 0:tn.accessLevel)||"visitor";console.log("[savePlan] Line - Catgorie:",mr,"Niveau d'accs:",Si),St={points:ci.map(gs=>[gs.lng,gs.lat]),name:((zi=qt.properties)==null?void 0:zi.name)||"",category:mr,accessLevel:Si,style:{...mt,_accessLevel:Si,accessLevel:Si}}}else if(qt instanceof zt.Polygon&&!(qt instanceof zt.Rectangle)){Hn="Polygon";const ci=qt.getLatLngs()[0],mr=((Bi=qt.properties)==null?void 0:Bi.category)||"forages",Si=((Qi=qt.properties)==null?void 0:Qi.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catgorie:",mr,"Niveau d'accs:",Si),St={points:ci.map(gs=>[gs.lng,gs.lat]),name:((ti=qt.properties)==null?void 0:ti.name)||"",category:mr,accessLevel:Si,style:{...mt,_accessLevel:Si,accessLevel:Si}}}else if(((Br=qt.properties)==null?void 0:Br.type)==="Note"){console.log("[savePlan] Note golocalise dtecte - ignore pour la sauvegarde du plan");const ci=qt;ci._dbId&&typeof ci._dbId=="number"&&xn.add(ci._dbId),Hn=void 0,St=void 0}if(Hn&&St){let ci=qt._elementId;qt._dbId&&(ci=qt._dbId,typeof ci=="number"&&xn.add(ci)),Qe.push({id:ci,type_forme:Hn,data:St})}}),console.log("[savePlan] lments  sauvegarder",{totalElements:Qe.length,elements:Qe.map(qt=>({type:qt.type_forme,hasPoints:"points"in qt.data,hasStyle:"style"in qt.data}))});const vn=Array.from(Ut).filter(qt=>!xn.has(qt));console.log("[savePlan] lments supprims:",{existingIds:Array.from(Ut),currentLayerIds:Array.from(xn),elementsToDelete:vn}),o.elements=Qe.filter(qt=>!qt.id||!vn.includes(qt.id));const bn=await o.saveToPlan(T.value.id,{elementsToDelete:vn});if(bn&&((ft=T.value)!=null&&ft.id)){const qt=T.value.id;T.value={...T.value,...bn},s.updatePlanDetails(qt,bn)}z.value="success",R.value&&R.value.eachLayer(qt=>{var Hn;((Hn=qt.properties)==null?void 0:Hn.type)==="Note"&&typeof qt.resetPlanSaveState=="function"&&qt.resetPlanSaveState()}),setTimeout(()=>{z.value=null},3e3)}catch(Qe){console.error("Erreur lors de la sauvegarde du plan:",Qe),z.value=null}finally{O.value=!1}}Hu(()=>{q.user||et(),s.clearCurrentPlan(),o.clearCurrentPlan(),R.value&&R.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function de(ft){if(console.log("[MapView][updateShapeProperties] Mise  jour des proprits:",ft),I(ft),ft.category&&b.value&&b.value._dbId){const Qe=b.value._dbId,Ut=o.elements.find(xn=>xn.id===Qe);if(Ut){console.log(`[MapView][updateShapeProperties] Mise  jour de la catgorie dans le store: ${ft.category} pour l'lment ${Qe}`);const xn=Ut;xn.data||(xn.data={}),xn.data.category=ft.category,o.$patch({unsavedChanges:!0})}}}function We(ft){try{const Qe=new Date(ft);return isNaN(Qe.getTime())?(console.error("Date invalide reue:",ft),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Qe)}catch(Qe){return console.error("Erreur lors du formatage de la date:",Qe),"Date invalide"}}const He=()=>{R.value&&Y()},tt=async()=>{var ft;if(b.value&&R.value){const Qe=b.value._leaflet_id,Ut=b.value._dbId;if(((ft=b.value.properties)==null?void 0:ft.type)==="Note"&&Ut)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${Ut} du backend...`),await Qs.deleteNote(Ut),u.removeNote(Ut),console.log(`[MapView][deleteSelectedShape] Note ${Ut} supprime avec succs du backend et du store`),f.success("Note supprime avec succs")}catch(vn){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${Ut} du backend:`,vn),f.error("Erreur lors de la suppression de la note")}k(""),R.value.removeLayer(b.value),d.value=d.value.filter(vn=>vn.layer&&vn.layer._leaflet_id!==Qe),console.log(`[MapView][deleteSelectedShape] Forme ${Qe} (dbId: ${Ut}) supprime du featureGroup et de shapes.value`),b.value=null}};async function Ze(ft){console.log(`onPlanCreated - Tentative de chargement du plan ${ft}`),await s.fetchPlans();const Qe=s.getPlanById(ft);Qe?(console.log(`Plan ${ft} trouv, chargement en cours...`),localStorage.setItem("lastPlanId",ft.toString()),T.value=Qe,s.setCurrentPlan(Qe),o.setCurrentPlan(Qe.id),$.value=!1,on(),console.log(`Plan ${ft} charg avec succs`)):console.error(`Plan ${ft} introuvable aprs cration! Vrifiez les permissions.`)}oo(_e,async ft=>{var Qe;if(ft&&((Qe=q.user)==null?void 0:Qe.user_type)==="admin"){H.value=!0;try{const Ut=await q.fetchSalarieVisiteurs(ft.id);oe.value=Array.isArray(Ut)?Ut:[Ut]}catch(Ut){console.error("[MapView][watch selectedSalarie] Error:",Ut),oe.value=[]}finally{H.value=!1}}});function et(){localStorage.removeItem("lastPlanId")}function ze(ft,Qe="m"){return Qe==="m"?`${(ft/1e4).toFixed(2)} ha`:Qe==="m"?ft>=1e3?`${(ft/1e3).toFixed(2)} km`:`${ft.toFixed(2)} m`:`${ft.toFixed(2)} ${Qe}`}const wt=Ft(!1);function Pt(ft){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimtrique"}[ft]||ft}async function kt(){var Qe,Ut,xn,vn,bn,qt,Hn,St,mt,wn;if(!T.value||!y.value||!R.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const ft=T.value;try{console.log("[generateSynthesis] Dbut de la gnration"),console.log("[generateSynthesis] Plan courant complet:",ft),await ye();let Ai=ft;if(!ft.salarie_details&&!ft.entreprise_details&&!ft.client_details){console.log("[generateSynthesis] Dtails manquants, tentative de rcupration...");try{const mr=await Vn.get(`/plans/${ft.id}/`);mr.status===200&&(console.log("[generateSynthesis] Plan mis  jour:",mr.data),T.value={...ft,...mr.data},Ai=mr.data,s.updatePlanDetails(ft.id,mr.data))}catch(mr){console.error("[generateSynthesis] Erreur lors de la rcupration des dtails:",mr)}}await new Promise(mr=>setTimeout(mr,1e3)),wt.value=!0;const xr=Ai.salarie_details,Gr=Ai.client_details,Ir=(xr==null?void 0:xr.entreprise_details)||Ai.entreprise_details;console.log("[generateSynthesis] Dtails du plan utilis:",Ai),console.log("[generateSynthesis] Dtails des utilisateurs:",{salarie:xr?{id:xr.id,nom:`${xr.first_name} ${xr.last_name}`,company:xr.company_name,logo:xr.logo}:null,entreprise:Ir?{id:Ir.id,nom:`${Ir.first_name} ${Ir.last_name}`,company:Ir.company_name,logo:Ir.logo}:null,client:Gr?{id:Gr.id,nom:`${Gr.first_name} ${Gr.last_name}`,company:Gr.company_name}:null}),b.value&&(ee(),b.value=null);const tn=new kr("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const zi=new Image;zi.src=ob,await new Promise(mr=>{zi.onload=()=>{console.log("[generateSynthesis] Logo application charg"),mr()},zi.onerror=Si=>{console.error("[generateSynthesis] Erreur chargement logo application:",Si),mr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",Ir==null?void 0:Ir.logo);let Bi=null;Ir!=null&&Ir.logo&&(Bi=new Image,Bi.src=Ir.logo,await new Promise(mr=>{Bi?(Bi.onload=()=>{console.log("[generateSynthesis] Logo entreprise charg avec succs"),mr()},Bi.onerror=Si=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",Si),mr()}):mr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",xr==null?void 0:xr.logo);let Qi=null;xr!=null&&xr.logo&&(Qi=new Image,Qi.src=xr.logo,await new Promise(mr=>{Qi?(Qi.onload=()=>{console.log("[generateSynthesis] Logo salarie charg avec succs"),mr()},Qi.onerror=Si=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",Si),mr()}):mr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:Bi!==null,logoSalarie:Qi!==null}),Bi!==null&&tn.addImage(Bi,"JPEG",148.5-40-30,20,40,40),tn.addImage(zi,"JPEG",148.5-40/2,20,40,40),Qi!==null&&tn.addImage(Qi,"JPEG",148.5+30,20,40,40),tn.setFontSize(24),tn.setTextColor(0),tn.text(ft.nom||"Sans titre",297/2,100,{align:"center"});let ti=120;if(Ir&&(tn.setFontSize(14),tn.setFont("helvetica","bold"),tn.text("Entreprise:",20,ti),tn.setFont("helvetica","normal"),tn.text(`${Ir.first_name} ${Ir.last_name}${Ir.company_name?` (${Ir.company_name})`:""}`,20,ti+6),ti+=15),xr&&(tn.setFontSize(14),tn.setFont("helvetica","bold"),tn.text("Salarie:",20,ti),tn.setFont("helvetica","normal"),tn.text(`${xr.first_name} ${xr.last_name}${xr.company_name?` (${xr.company_name})`:""}`,20,ti+6),ti+=15),Gr&&(tn.setFontSize(14),tn.setFont("helvetica","bold"),tn.text("Client:",20,ti),tn.setFont("helvetica","normal"),tn.text(`${Gr.first_name} ${Gr.last_name}${Gr.company_name?` (${Gr.company_name})`:""}`,20,ti+6),ti+=15),ft.description){tn.setFont("helvetica","bold"),tn.text("Description:",20,ti),tn.setFont("helvetica","normal");const mr=tn.splitTextToSize(ft.description,150);tn.text(mr,20,ti+6),ti+=8*mr.length+10}ti=Math.min(ti,180),tn.setFontSize(10),tn.setTextColor(100),tn.text(`Date de cration: ${We(ft.date_creation)}`,20,190),tn.text(`Dernire modification: ${We(ft.date_modification)}`,277,190,{align:"right"});const Br=[];R.value.eachLayer(mr=>Br.push(mr));const ci=zt.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(y.value);await new Promise(mr=>setTimeout(mr,3e3));for(let mr=0;mr<Br.length;mr++){tn.addPage(),tn.setFillColor(248,250,252),tn.setDrawColor(226,232,240),tn.rect(0,0,297,25,"F"),tn.setFontSize(10),tn.setTextColor(50,50,50),tn.setFont("helvetica","bold"),tn.text(ft.nom||"Sans titre",20,12);let va=297-20-(15*(1+(Bi!==null?1:0)+(Qi!==null?1:0))+5*(1+(Bi!==null?1:0)));Bi!==null&&(tn.addImage(Bi,"JPEG",va,5,15,15),va+=20),tn.addImage(zi,"JPEG",va,5,15,15),va+=20,Qi!==null&&tn.addImage(Qi,"JPEG",va,5,15,15),tn.setDrawColor(200,200,200),tn.setLineWidth(.5),tn.line(0,25,297,25);const Rr=Br[mr],mn=Rr.properties;if(mn){tn.setTextColor(0),tn.setFontSize(14),tn.setFont("helvetica","bold");const Zn=mn.name||Pt(mn.type);let Ei="";if(mn.type!=="TextRectangle"){const Fi=he(Br,Rr);Ei=Fi>0?` (surface totale d'irrigation : ${ze(Fi,"m")})`:""}const Ri=`${Zn}${Ei}`;tn.text(Ri,20,35)}if(mn&&mn.type==="ElevationLine")try{const Zn=((Qe=Rr.getBounds)==null?void 0:Qe.call(Rr))||((Ut=Rr.getLatLng)==null?void 0:Ut.call(Rr));Zn&&y.value.fitBounds(Zn instanceof zt.LatLng?zt.latLngBounds([Zn]):Zn,{padding:[50,50]});try{const Cn=((xn=Rr.getBounds)==null?void 0:xn.call(Rr))||((vn=Rr.getLatLng)==null?void 0:vn.call(Rr));if(!Cn||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const fn=Cn instanceof zt.LatLng?zt.latLngBounds([Cn]):Cn;fn&&fn.isValid&&fn.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(fn,{padding:[50,50],animate:!1})}}catch(Cn){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",Cn)}await new Promise(Cn=>setTimeout(Cn,2e3)),y.value.invalidateSize();try{y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())?y.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(Cn){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",Cn)}await new Promise(Cn=>{const fn=()=>{var _o;const fr=(_o=y.value)==null?void 0:_o.getContainer();if(!fr){Cn();return}const eo=fr.querySelectorAll(".leaflet-tile-loaded");fr.querySelectorAll(".leaflet-tile-loading").length===0&&eo.length>0?Cn():setTimeout(fn,100)};fn()});const Ei=await ci.takeScreen("image"),Ri=await new Promise((Cn,fn)=>{const fr=new Image;fr.onload=()=>Cn(fr),fr.onerror=eo=>fn(eo),fr.src=Ei}),Fi=40,jo=237/2,cr=Math.min(70,Ri.height*jo/Ri.width);if(tn.addImage(Ri,"PNG",20,Fi,jo,cr),mn.elevationData&&mn.elevationData.length>0){const Cn=document.createElement("canvas");Cn.width=800,Cn.height=400;const fn=Cn.getContext("2d");if(fn){const fr=mn.elevationData,eo=mn.minElevation,Ao=mn.maxElevation,$a=(Ao-eo)*.05,es=eo-$a,ol=Ao+$a,jr=40,As=Cn.width-2*jr,uo=Cn.height-2*jr,ts=hi=>jr+hi/fr[fr.length-1].distance*As,ji=hi=>jr+uo-(hi-es)/(ol-es)*uo;fn.fillStyle="#f8fafc",fn.fillRect(0,0,Cn.width,Cn.height),fn.fillStyle="#334155",fn.font="bold 20px Arial",fn.textAlign="center",fn.fillText("Profil altimtrique",Cn.width/2,25),fn.strokeStyle="#e2e8f0",fn.lineWidth=1,fn.beginPath(),fn.moveTo(jr,jr),fn.lineTo(jr,uo+jr),fn.lineTo(As+jr,uo+jr),fn.strokeStyle="#94a3b8",fn.stroke();const Ml=5;for(let hi=0;hi<=Ml;hi++){const rs=es+hi/Ml*(ol-es),to=ji(rs);fn.beginPath(),fn.strokeStyle="#e2e8f0",fn.moveTo(jr,to),fn.lineTo(As+jr,to),fn.stroke(),fn.beginPath(),fn.strokeStyle="#94a3b8",fn.moveTo(jr-5,to),fn.lineTo(jr,to),fn.stroke(),fn.fillStyle="#64748b",fn.font="12px Arial",fn.textAlign="right",fn.fillText(`${Math.round(rs)}m`,jr-8,to+4)}const za=5,vr=fr[fr.length-1].distance;for(let hi=0;hi<=za;hi++){const rs=hi/za*vr,to=ts(rs);fn.beginPath(),fn.strokeStyle="#e2e8f0",fn.moveTo(to,jr),fn.lineTo(to,uo+jr),fn.stroke(),fn.beginPath(),fn.strokeStyle="#94a3b8",fn.moveTo(to,uo+jr),fn.lineTo(to,uo+jr+5),fn.stroke(),fn.fillStyle="#64748b",fn.font="12px Arial",fn.textAlign="center",fn.fillText(`${Math.round(rs)}m`,to,uo+jr+16)}const yr=fn.createLinearGradient(0,jr,0,uo+jr);yr.addColorStop(0,"rgba(255, 69, 0, 0.8)"),yr.addColorStop(1,"rgba(255, 69, 0, 0.2)"),fn.beginPath(),fn.moveTo(ts(fr[0].distance),ji(fr[0].elevation)),fr.forEach((hi,rs)=>{rs>0&&fn.lineTo(ts(hi.distance),ji(hi.elevation))}),fn.strokeStyle="#FF4500",fn.lineWidth=2,fn.stroke(),fn.lineTo(ts(fr[fr.length-1].distance),ji(es)),fn.lineTo(ts(fr[0].distance),ji(es)),fn.closePath(),fn.fillStyle=yr,fn.fill(),fr.forEach(hi=>{fn.beginPath(),fn.arc(ts(hi.distance),ji(hi.elevation),3,0,Math.PI*2),fn.fillStyle="#FF4500",fn.fill(),fn.strokeStyle="white",fn.lineWidth=1,fn.stroke()});let ns=0,$r=0;for(let hi=0;hi<fr.length;hi++)fr[hi].elevation===eo&&(ns=hi),fr[hi].elevation===Ao&&($r=hi);fn.beginPath(),fn.arc(ts(fr[$r].distance),ji(fr[$r].elevation),6,0,Math.PI*2),fn.fillStyle="#059669",fn.fill(),fn.strokeStyle="white",fn.lineWidth=2,fn.stroke(),fn.beginPath(),fn.arc(ts(fr[ns].distance),ji(fr[ns].elevation),6,0,Math.PI*2),fn.fillStyle="#DC2626",fn.fill(),fn.strokeStyle="white",fn.lineWidth=2,fn.stroke(),fn.font="12px Arial",fn.fillStyle="#059669",fn.textAlign="left",fn.fillText(`Point haut: ${ze(Ao,"m")}`,jr,uo+jr+35),fn.fillStyle="#DC2626",fn.fillText(`Point bas: ${ze(eo,"m")}`,jr+200,uo+jr+35);const Al=Cn.toDataURL("image/png");tn.addImage(Al,"PNG",20+jo+20,Fi,jo,cr)}}const Gn=Fi+cr+15;tn.setFillColor(248,250,252),tn.setDrawColor(226,232,240),tn.roundedRect(20,Gn,257,50,3,3,"FD"),tn.setFont("helvetica","bold"),tn.setFontSize(12),tn.setTextColor(51,65,85),tn.text("Caractristiques",30,Gn+10);const Ms=[{label:"Distance totale",value:ze(mn.length||0)},{label:"Dnivel positif",value:ze(mn.elevationGain||0,"m")},{label:"Dnivel ngatif",value:ze(mn.elevationLoss||0,"m")}],si=[{label:"Pente moyenne",value:`${(mn.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(mn.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${ze(mn.minElevation||0,"m")} / ${ze(mn.maxElevation||0,"m")}`}];let ki=Gn+20;tn.setFont("helvetica","normal"),tn.setFontSize(10),Ms.forEach(Cn=>{tn.setTextColor(100,116,139),tn.text(Cn.label,30,ki),tn.setTextColor(15,23,42),tn.setFont("helvetica","bold"),tn.text(Cn.value,110,ki),tn.setFont("helvetica","normal"),ki+=9}),ki=Gn+20;const fi=297/2;si.forEach(Cn=>{tn.setTextColor(100,116,139),tn.text(Cn.label,fi,ki),tn.setTextColor(15,23,42),tn.setFont("helvetica","bold"),tn.text(Cn.value,fi+80,ki),tn.setFont("helvetica","normal"),ki+=9})}catch(Zn){console.error("[generateSynthesis] Erreur traitement profil altimtrique:",Zn)}else{const Zn=((bn=Rr.getBounds)==null?void 0:bn.call(Rr))||((qt=Rr.getLatLng)==null?void 0:qt.call(Rr));Zn&&y.value.fitBounds(Zn instanceof zt.LatLng?zt.latLngBounds([Zn]):Zn,{padding:[50,50]});try{const Ei=((Hn=Rr.getBounds)==null?void 0:Hn.call(Rr))||((St=Rr.getLatLng)==null?void 0:St.call(Rr));if(!Ei||!y.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const Ri=Ei instanceof zt.LatLng?zt.latLngBounds([Ei]):Ei;Ri&&Ri.isValid&&Ri.isValid()&&y.value.getContainer()&&document.body.contains(y.value.getContainer())&&y.value.fitBounds(Ri,{padding:[50,50],animate:!1})}}catch(Ei){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",Ei)}await new Promise(Ei=>setTimeout(Ei,2e3)),y.value.invalidateSize(),await new Promise(Ei=>{const Ri=()=>{var Gn;const Fi=(Gn=y.value)==null?void 0:Gn.getContainer();if(!Fi){Ei();return}const jo=Fi.querySelectorAll(".leaflet-tile-loaded");Fi.querySelectorAll(".leaflet-tile-loading").length===0&&jo.length>0?Ei():setTimeout(Ri,100)};Ri()});try{const Ei=await ci.takeScreen("image"),Ri=await new Promise((Gn,Ms)=>{const si=new Image;si.onload=()=>Gn(si),si.onerror=ki=>Ms(ki),si.src=Ei}),Fi=45,jo=297*.6-30;let cr=Ri.height*jo/Ri.width;if(cr>210*.9&&(cr=210*.9),tn.addImage(Ri,"PNG",20,Fi,jo,cr),mn){let Gn=function(fn,fr,eo,Ao,_o){tn.setTextColor(100,116,139),tn.setFont("helvetica","normal"),tn.text(fn,eo+10,Ao),tn.setTextColor(15,23,42),tn.setFont("helvetica","bold"),tn.text(fr,eo+_o-10,Ao,{align:"right"})},si=0;if(mn.type==="Circle")si=4;else if(mn.type==="Rectangle")si=4;else if(mn.type==="Line")si=1,(mt=mn.dimensions)!=null&&mt.width&&si++,mn.surfaceInfluence&&si++;else if(mn.type==="Semicircle")si=6;else if(mn.type==="Polygon")si=2;else if(mn.type==="CircleWithSections"&&(si=3,mn.sections&&mn.sections.length>0)){const fn=Math.ceil(mn.sections.length/3);si+=fn*3}const ki=Math.max(15+si*12+30,60),fi=297-188.2-20;tn.setFillColor(248,250,252),tn.setDrawColor(226,232,240),tn.roundedRect(188.2,Fi,fi,ki,3,3,"FD"),tn.setFont("helvetica","bold"),tn.setFontSize(12),tn.setTextColor(51,65,85),tn.text("Caractristiques",188.2+10,Fi+15);let Cn=Fi+30;tn.setFontSize(10),mn.type==="Circle"?(Gn("Rayon",ze(mn.radius),188.2,Cn,fi),Cn+=12,Gn("Diamtre",ze(mn.radius*2),188.2,Cn,fi),Cn+=12,Gn("Surface",ze(mn.surface,"m"),188.2,Cn,fi),Cn+=12,Gn("Primtre",ze(mn.perimeter),188.2,Cn,fi)):mn.type==="Rectangle"?(Gn("Largeur",ze(mn.width),188.2,Cn,fi),Cn+=12,Gn("Hauteur",ze(mn.height),188.2,Cn,fi),Cn+=12,Gn("Surface",ze(mn.surface,"m"),188.2,Cn,fi),Cn+=12,Gn("Primtre",ze(mn.perimeter),188.2,Cn,fi)):mn.type==="Line"?(Gn("Longueur",ze(mn.length),188.2,Cn,fi),Cn+=12,(wn=mn.dimensions)!=null&&wn.width&&(Gn("Largeur d'influence",ze(mn.dimensions.width),188.2,Cn,fi),Cn+=12),mn.surfaceInfluence&&Gn("Surface d'influence",ze(mn.surfaceInfluence,"m"),188.2,Cn,fi)):mn.type==="Semicircle"?(Gn("Rayon",ze(mn.radius),188.2,Cn,fi),Cn+=12,Gn("Diamtre",ze(mn.radius*2),188.2,Cn,fi),Cn+=12,Gn("Surface",ze(mn.surface,"m"),188.2,Cn,fi),Cn+=12,Gn("Primtre",ze(mn.perimeter),188.2,Cn,fi),Cn+=12,Gn("Longueur d'arc",ze(mn.arcLength),188.2,Cn,fi),Cn+=12,Gn("Angle d'ouverture",`${mn.openingAngle.toFixed(1)}`,188.2,Cn,fi)):mn.type==="Polygon"?(Gn("Surface",ze(mn.surface,"m"),188.2,Cn,fi),Cn+=12,Gn("Primtre",ze(mn.perimeter),188.2,Cn,fi)):mn.type==="CircleWithSections"&&(Gn("Rayon",ze(mn.radius),188.2,Cn,fi),Cn+=12,Gn("Surface totale",ze(mn.surface,"m"),188.2,Cn,fi),Cn+=12,Gn("Primtre",ze(mn.perimeter),188.2,Cn,fi),Cn+=20,mn.sections&&mn.sections.length>0&&(Cn=oi(mn.sections,tn,188.2,Cn,fi)))}}catch(Ei){console.error(`[generateSynthesis] Erreur capture forme ${mr+1}:`,Ei)}}}y.value.removeControl(ci),tn.save(`synthese_${ft.nom}.pdf`)}catch(ei){console.error("[generateSynthesis] Erreur:",ei),alert("Une erreur est survenue lors de la gnration de la synthse. Veuillez ressayer.")}finally{wt.value=!1}}const Jt=fx.debounce(()=>{const ft=dn.startMeasure("invalidateMapSize","MapView");if(!y.value){ft();return}Us(()=>{dn.measure("invalidateMapSize:nextTick",()=>{var Qe;try{if(y.value&&y.value.getContainer()&&document.body.contains(y.value.getContainer())){if(y.value.invalidateSize({animate:!1}),(Qe=R.value)!=null&&Qe.getLayers().length)try{Y()}catch(Ut){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Ut)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Ut){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Ut)}ft()},"MapView")})},250);function on(){Jt()}oo(T,(ft,Qe)=>{ft&&ft.id!==(Qe==null?void 0:Qe.id)&&Us(()=>{on()})});const cn=Ft(null),Ke=Ft(!1),ot=Ft([]),rt=rr(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:cn.value,salaries:G.value,salariesLength:G.value.length}),!cn.value)return[];const ft=G.value.filter(Qe=>{var vn,bn,qt;const Ut=Qe.entreprise,xn=typeof Ut=="object"&&Ut!==null?Ut.id:Ut;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:Qe,salarieEntreprise:Ut,salarieEntrepriseId:xn,selectedEntrepriseId:(vn=cn.value)==null?void 0:vn.id,matches:xn===((bn=cn.value)==null?void 0:bn.id)}),xn===((qt=cn.value)==null?void 0:qt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",ft),ft});function $t(ft){if(!ft)return"";const Qe=ft.first_name||"",Ut=ft.last_name?ft.last_name.toUpperCase():"",xn=ft.company_name||ft.role||"";return`${Qe} ${Ut} (${xn})`}async function Qt(){Ke.value=!0;try{const ft=await Vn.get("/users/",{params:{role:"ENTREPRISE"}});ot.value=ft.data}catch(ft){console.error("[MapView] Error loading entreprises:",ft),ot.value=[]}finally{Ke.value=!1}}async function Rn(ft){console.log("[MapView][selectEntreprise] Slection de l'entreprise:",ft),cn.value=ft,J.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requte avec params:",{role:"SALARIE",entreprise:ft.id});const Qe=await Vn.get("/users/",{params:{role:"SALARIE",entreprise:ft.id}});console.log("[MapView][selectEntreprise] Rponse reue:",Qe.data),G.value=Qe.data,console.log("[MapView][selectEntreprise] Salaries mis  jour:",G.value)}catch(Qe){console.error("[MapView] Error loading salaries for entreprise:",Qe),G.value=[]}finally{J.value=!1}}function Ln(){cn.value=null,_e.value=null,Te.value=null,G.value=[],oe.value=[],ie.value=[]}function Dn(){_e.value=null,Te.value=null,oe.value=[],ie.value=[]}function ar(){Te.value=null,ie.value=[]}async function En(ft){var Qe,Ut,xn,vn,bn,qt;console.log(`
[MapView][selectSalarie] ====== DBUT SLECTION SALARIE ======`),console.log("Informations du salarie:",{id:ft.id,username:ft.username,company:ft.company_name,role:ft.role}),console.log("Contexte utilisateur:",{userType:(Qe=q.user)==null?void 0:Qe.user_type,userId:(Ut=q.user)==null?void 0:Ut.id,userRole:(xn=q.user)==null?void 0:xn.role,selectedEntrepriseId:(vn=cn.value)==null?void 0:vn.id}),_e.value=ft,H.value=!0;try{const Hn={role:"VISITEUR",salarie:ft.id};q.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connecte:",(bn=q.user)==null?void 0:bn.id),Hn.entreprise=(qt=q.user)==null?void 0:qt.id):cn.value&&(console.log("Ajout de l'ID de l'entreprise slectionne:",cn.value.id),Hn.entreprise=cn.value.id),console.log("Paramtres de la requte:",Hn);const St=await Vn.get("/users/",{params:Hn});console.log("Rponse reue du serveur:",{status:St.status,dataLength:Array.isArray(St.data)?St.data.length:"non-array",data:St.data}),Array.isArray(St.data)?(oe.value=St.data,console.log(`${St.data.length} visiteurs chargs`),St.data.forEach((mt,wn)=>{console.log(`Visiteur ${wn+1}:`,{id:mt.id,username:mt.username,company:mt.company_name,salarie:mt.salarie})})):(console.warn("Format de rponse inattendu:",St.data),oe.value=[]),oe.value.length===0&&console.warn("Aucun visiteur trouv pour ce salarie")}catch(Hn){if(console.error("ERREUR lors du chargement des visiteurs:",Hn),Hn&&typeof Hn=="object"&&"response"in Hn){const St=Hn;console.error("Dtails de l'erreur:",{status:St.response.status,data:St.response.data})}oe.value=[]}finally{H.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SLECTION SALARIE ======
`)}}function jn(){Z.value=!1,N.value=null}function An(ft){console.log("[MapView][handleFilterChange] Nouveaux filtres reus:",JSON.stringify(ft,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise  jour des filtres dans le store"),o.updateFilters(ft),console.log("[MapView][handleFilterChange] lments dans le store:",{count:o.elements.length,ids:o.elements.map(Qe=>Qe.id)}),console.log("[MapView][handleFilterChange] Mise  jour de l'affichage de la carte"),Yn(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise  jour force de l'affichage"),Yn()},100),console.log("[MapView][handleFilterChange] Traitement des filtres termin")}function Yn(){if(!R.value)return;const ft={accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise  jour de l'affichage avec filtres:",JSON.stringify(ft,null,2));const Qe={count:o.elements.length,elements:o.elements.map(Tt=>({id:Tt.id,type_forme:Tt.type_forme}))};console.log("[MapView][updateMapDisplay] lments dans le store:",JSON.stringify(Qe,null,2));const Ut=o.getFilteredElements;console.log("[MapView][updateMapDisplay] lments filtrs:",{total:o.elements.length,filtered:Ut.length,filteredIds:Ut.map(Tt=>Tt.id)});const xn=R.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",xn.length);const vn=xn.map(Tt=>({_leaflet_id:Tt._leaflet_id,_dbId:Tt._dbId,hasProperties:!!Tt.properties,propertyType:Tt.properties?Tt.properties.type:null,category:Tt.properties?Tt.properties.category:null}));console.log("[MapView][updateMapDisplay] Dtails des couches:",JSON.stringify(vn,null,2)),console.log("[MapView][updateMapDisplay] tat des filtres pour les catgories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const bn=new Map;d.value.forEach(Tt=>{Tt.layer&&Tt.id&&bn.set(Tt.id,Tt.layer)});const qt=new Map;xn.forEach(Tt=>{Tt._dbId&&qt.set(Tt,Tt._dbId)});const Hn=new Set(Ut.map(Tt=>Tt.id));console.log("[MapView][updateMapDisplay] Dbut du traitement des couches");const St=Array.from(Hn);console.log("[MapView][updateMapDisplay] IDs des lments filtrs:",JSON.stringify(St));let mt=0,wn=0,ei=0;xn.forEach(Tt=>{var Bi,Qi;const Fn=Tt._dbId,Qn=Tt._leaflet_id;if(!Fn){if(!Tt.properties){ei++,console.log(`[MapView][updateMapDisplay] Couche ${Qn} sans dbId et sans proprits, ignore`);return}Tt._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${Qn} sans dbId, ID temporaire assign: ${Tt._dbId}`)}const Mi=Tt.properties||{},Sr=Mi.type||Tt.type_forme||"";let Pr=Mi.category;if(Tt._dbId){const ti=o.elements.find(Br=>Br.id===Tt._dbId);if(ti){const Br=ti.data;Br&&Br.category&&(Pr!==Br.category&&(console.log(`[MapView][updateMapDisplay] Catgorie diffrente dtecte - Proprits: ${Pr}, Store: ${Br.category} pour la couche ${Tt._dbId}`),Pr=Br.category),Tt.properties||(Tt.properties={}),Tt.properties.category=Pr)}}Pr||(Pr="default");const dr=Mi.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${Qn} (dbId: ${Tt._dbId}): type=${Sr}, category=${Pr}, accessLevel=${dr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(o.filters));let Ai=!1;Sr?Ai=Sr in o.filters.shapeTypes&&o.filters.shapeTypes[Sr]===!0:Ai=o.filters.shapeTypes.Polygon===!0;let xr=!1;Pr?Pr in o.filters.categories?(xr=o.filters.categories[Pr]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${Pr}: ${xr}`)):(xr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${Pr} non trouve dans les filtres, utilisation de 'forages': ${xr}`)):(xr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie non spcifie, utilisation de 'forages': ${xr}`));let Gr=!1;const Ir={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let tn="visitor";Ir.company?tn="company":Ir.employee?tn="employee":Ir.visitor&&(tn="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur: ${tn}`),tn==="company"?Gr=!0:tn==="employee"?Gr=dr==="employee"||dr==="visitor":tn==="visitor"&&(Gr=dr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche: ${dr}, visible: ${Gr}`);const zi=Ai&&xr&&Gr;console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${Qn}: typeVisible=${Ai}, categoryVisible=${xr}, accessLevelVisible=${Gr}, isVisible=${zi}`),console.log(`[MapView][updateMapDisplay] Dtails de la couche ${Qn}: type=${Sr}, category=${Pr}, accessLevel=${dr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:o.filters.accessLevels,categories:o.filters.categories,shapeTypes:o.filters.shapeTypes},null,2)),zi?R.value.hasLayer(Tt)?(mt++,console.log(`[MapView][updateMapDisplay] Couche ${Tt._dbId} (${Sr}) dj visible avec catgorie ${((Qi=Tt.properties)==null?void 0:Qi.category)||"non dfinie"}`)):(Pr&&Pr!=="default"&&(!Tt.properties||!Tt.properties.category)&&(Tt.properties||(Tt.properties={}),Tt.properties.category=Pr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant ajout: ${Pr} pour la couche ${Tt._dbId}`)),R.value.addLayer(Tt),mt++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${Tt._dbId} (${Sr}) avec catgorie ${((Bi=Tt.properties)==null?void 0:Bi.category)||"non dfinie"}`)):R.value.hasLayer(Tt)?(R.value.removeLayer(Tt),wn++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${Tt._dbId} (${Sr}) - Filtres non respects`)):(wn++,console.log(`[MapView][updateMapDisplay] Couche ${Tt._dbId} (${Sr}) dj masque`))}),console.log("[MapView][updateMapDisplay] Dbut de la restauration des couches filtres"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",d.value.length),d.value.forEach(Tt=>{var Qi;if(!Tt.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignore");return}const Fn=Tt.layer,Qn=Fn._leaflet_id,Mi=Fn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${Qn} (dbId: ${Mi})`),R.value.hasLayer(Fn)){console.log(`[MapView][updateMapDisplay] La couche ${Qn} est dj dans le featureGroup, ignore`);return}const Sr=Fn.properties||{},Pr=Sr.type||Fn.type_forme||"";let dr=null;if(Fn._dbId){const ti=o.elements.find(Br=>Br.id===Fn._dbId);if(ti){const Br=ti.data;Br&&Br.category&&(dr=Br.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis le store: ${dr} pour la couche ${Fn._dbId}`))}}!dr&&Sr.category&&(dr=Sr.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis les proprits: ${dr} pour la couche ${Qn}`)),dr||(dr="default");const Ai=Sr.accessLevel||"visitor";if(Fn.properties||(Fn.properties={}),dr&&dr!=="default"&&(Fn.properties.category=dr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie/restaure: ${dr} pour la couche ${Fn._dbId}`),Fn._dbId)){const ti=o.elements.find(Br=>Br.id===Fn._dbId);if(ti){const Br=ti;Br.data||(Br.data={}),Br.data.category!==dr&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store: ${dr} pour l'lment ${Fn._dbId}`),Br.data.category=dr,o.$patch({unsavedChanges:!0}))}}Fn.properties.accessLevel||(Fn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Proprits de la couche ${Qn}: type=${Pr}, category=${dr}, accessLevel=${Ai}`);let xr=!1;Pr?xr=Pr in o.filters.shapeTypes&&o.filters.shapeTypes[Pr]===!0:xr=o.filters.shapeTypes.Polygon===!0;let Gr=!1;dr?dr in o.filters.categories?(Gr=o.filters.categories[dr]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${dr}: ${Gr}`)):(Gr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${dr} non trouve, utilisation de 'forages': ${Gr}`)):(Gr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catgorie, utilisation de 'forages': ${Gr}`));let Ir=!1;const tn={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let zi="visitor";tn.company?zi="company":tn.employee?zi="employee":tn.visitor&&(zi="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur (2me tape): ${zi}`),zi==="company"?Ir=!0:zi==="employee"?Ir=Ai==="employee"||Ai==="visitor":zi==="visitor"&&(Ir=Ai==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche (2me tape): ${Ai}, visible: ${Ir}`);const Bi=xr&&Gr&&Ir;if(console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${Qn}: typeVisible=${xr}, categoryVisible=${Gr}, accessLevelVisible=${Ir}, isVisible=${Bi}`),Bi){if(dr&&dr!=="default"&&(Fn.properties||(Fn.properties={}),Fn.properties.category=dr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant restauration: ${dr} pour la couche ${Qn}`),Fn._dbId)){const ti=o.elements.find(Br=>Br.id===Fn._dbId);if(ti){const Br=ti;Br.data||(Br.data={}),Br.data.category!==dr&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store avant restauration: ${dr} pour l'lment ${Fn._dbId}`),Br.data.category=dr,o.$patch({unsavedChanges:!0}))}}R.value.addLayer(Fn),mt++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${Qn} (${Pr}) avec catgorie ${((Qi=Fn.properties)==null?void 0:Qi.category)||"non dfinie"} - Filtres respects`)}else console.log(`[MapView][updateMapDisplay] La couche ${Qn} (${Pr}) reste masque - Filtres non respects`)}),console.log(`[MapView][updateMapDisplay] Restauration termine: ${mt} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${mt} couches visibles, ${wn} couches masques, ${ei} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise  jour termine")}function wr(ft){if(R.value){const Ut=R.value.getLayers().find(xn=>xn._leaflet_id===ft.id);Ut&&(Ut.properties.name=ft.title,Ut.properties.description=ft.description,Ut.properties.columnId=ft.columnId,Ut.properties.accessLevel=ft.accessLevel,Ut.properties.category||(Ut.properties.category="forages"),Ut.setNoteStyle({color:ft.style.color,fillColor:ft.style.fillColor,weight:ft.style.weight,fillOpacity:ft.style.fillOpacity,radius:ft.style.radius}),Ut.closePopup(),Ut.unbindPopup(),Ut.bindPopup(Ut.createPopupContent()),console.log("[handleNoteSave] Note mise  jour:",{name:Ut.properties.name,category:Ut.properties.category,accessLevel:Ut.properties.accessLevel,columnId:Ut.properties.columnId}),u.notes.find(vn=>vn.id===ft.id)?(u.updateNote(ft.id,{title:ft.title,description:ft.description,columnId:ft.columnId,accessLevel:ft.accessLevel,style:ft.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise  jour dans le store avec columnId:",ft.columnId)):(u.addNote({title:ft.title,description:ft.description,location:[ft.location[0],ft.location[1]],columnId:ft.columnId||"1",style:ft.style,accessLevel:ft.accessLevel}),console.log("[handleNoteSave] Note ajoute au store avec columnId:",ft.columnId||"1")))}f.success("Note enregistre avec succs")}async function Or(ft){var Qe;Te.value=ft,Q.value=!0;try{const Ut={visiteur:ft.id};q.isEntreprise?Ut.entreprise=(Qe=q.user)==null?void 0:Qe.id:cn.value&&(Ut.entreprise=cn.value.id),_e.value&&(Ut.salarie=_e.value.id);const xn=await Vn.get("/plans/",{params:Ut});ie.value=xn.data}catch(Ut){console.error("[MapView] Error loading client plans:",Ut),ie.value=[]}finally{Q.value=!1}}async function gr(){var Qe;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const ft={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};Te.value=ft,Q.value=!0;try{const Ut={visiteur_null:!0};q.isEntreprise?Ut.entreprise=(Qe=q.user)==null?void 0:Qe.id:cn.value&&(Ut.entreprise=cn.value.id),_e.value&&(Ut.salarie=_e.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramtres de requte:",Ut);const xn=await Vn.get("/plans/",{params:Ut});console.log("[MapView][loadPlansWithoutVisiteur] Plans reus:",xn.data),ie.value=xn.data}catch(Ut){console.error("[MapView] Error loading plans without visiteur:",Ut),ie.value=[]}finally{Q.value=!1}}function oi(ft,Qe,Ut,xn,vn){if(!ft||ft.length===0)return xn;const bn=[...ft].sort((Fn,Qn)=>(Qn.surface||0)-(Fn.surface||0)),qt=vn,Hn=7,St=6,mt=2,wn=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],ei=Hn+St*bn.length;Qe.setFillColor(248,250,252),Qe.setDrawColor(226,232,240),Qe.roundedRect(Ut,xn,qt,ei+mt*2,2,2,"FD"),Qe.setFillColor(241,245,249),Qe.rect(Ut+mt,xn+mt,qt-mt*2,Hn,"F"),Qe.setFont("helvetica","bold"),Qe.setFontSize(7),Qe.setTextColor(51,65,85);let Tt=Ut+mt;return wn.forEach(Fn=>{const Qn=Fn.width*(qt-mt*2);Fn.align==="right"?Qe.text(Fn.header,Tt+Qn-mt,xn+mt+5,{align:"right"}):Fn.align==="center"?Qe.text(Fn.header,Tt+Qn/2,xn+mt+5,{align:"center"}):Qe.text(Fn.header,Tt+mt/2,xn+mt+5),Tt+=Qn}),Qe.setFont("helvetica","normal"),Qe.setFontSize(6.5),Qe.setTextColor(71,85,105),bn.forEach((Fn,Qn)=>{const Mi=xn+Hn+mt+Qn*St;Qn%2===0&&(Qe.setFillColor(250,252,254),Qe.rect(Ut+mt,Mi,qt-mt*2,St,"F"));let Sr=Ut+mt;const Pr=Fn.name||`Section ${Qn+1}`;Qe.text(Pr,Sr+mt/2,Mi+4),Sr+=wn[0].width*(qt-mt*2);const dr=ze(Fn.surface||0,"m");Qe.text(dr,Sr+wn[1].width*(qt-mt*2)-mt,Mi+4,{align:"right"}),Sr+=wn[1].width*(qt-mt*2);const Ai=Fn.startAngle===0&&Fn.endAngle===360?"Complet":`${Fn.startAngle}-${Fn.endAngle}`;Qe.text(Ai,Sr+wn[2].width*(qt-mt*2)-mt,Mi+4,{align:"right"}),Sr+=wn[2].width*(qt-mt*2);const xr=ze(Fn.radius||0);Qe.text(xr,Sr+wn[3].width*(qt-mt*2)-mt,Mi+4,{align:"right"}),Sr+=wn[3].width*(qt-mt*2);const Gr=Fn.startAngle===0&&Fn.endAngle===360?"C":"P";Qe.text(Gr,Sr+wn[4].width*(qt-mt*2)/2,Mi+4,{align:"center"})}),Qe.setDrawColor(226,232,240),Qe.setLineWidth(.05),Qe.line(Ut+mt,xn+Hn+mt,Ut+qt-mt,xn+Hn+mt),xn+ei+mt*2}return(ft,Qe)=>{var Ut,xn,vn,bn,qt,Hn;return Fe(),Ve(Mn,null,[S("div",JF,[S("div",XF,[wt.value?(Fe(),Ve("div",QF,Qe[9]||(Qe[9]=[zu('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Gnration de la synthse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualit de vos captures pour un rendu parfait </p></div></div></div>',1)]))):nn("",!0),T.value?nn("",!0):(Fe(),Ve("div",e9,[S("div",t9,[Qe[12]||(Qe[12]=zu('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+ob+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),S("div",n9,[S("button",{onClick:Qe[0]||(Qe[0]=St=>$.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Qe[10]||(Qe[10]=[S("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ii(" Crer un nouveau plan ")])),S("button",{onClick:Qe[1]||(Qe[1]=St=>U.value=!0),class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Qe[11]||(Qe[11]=[S("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),ii(" Charger un plan existant ")]))])])])),Nn(S("div",r9,[T.value&&!wt.value?(Fe(),Ve("div",i9,[pi(SB,{"last-save":(Ut=T.value)!=null&&Ut.date_modification?new Date(T.value.date_modification):void 0,"plan-name":(xn=T.value)==null?void 0:xn.nom,"plan-description":(vn=T.value)==null?void 0:vn.description,"save-status":z.value,onChangeMapType:Kn(ve),onCreateNewPlan:Qe[2]||(Qe[2]=St=>$.value=!0),onLoadPlan:Qe[3]||(Qe[3]=St=>U.value=!0),onSavePlan:ye,onAdjustView:He,onGenerateSummary:kt},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):nn("",!0),S("div",o9,[i.value&&T.value&&!wt.value?(Fe(),Ve("div",{key:0,onClick:Me,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):nn("",!0),T.value&&!wt.value?(Fe(),Ve("div",{key:1,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:Me},Qe[13]||(Qe[13]=[zu('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils de dessin</span></div></div>',1)]))):nn("",!0),S("div",s9,[S("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),T.value&&!wt.value?(Fe(),Ve("div",{key:2,class:Gi([i.value?"translate-y-0":"translate-y-full md:translate-y-0","w-full md:w-64 bg-white border-t md:border-t-0 border-gray-200 flex-shrink-0 z-[2000] transition-transform duration-300 ease-out","fixed md:relative bottom-0 md:bottom-auto right-0 md:top-0 h-[80%] md:h-auto rounded-t-xl md:rounded-none shadow-lg md:shadow-none"]),style:{bottom:"var(--mobile-bottom-toolbar-height)"}},[S("div",{class:"md:hidden w-full flex justify-between items-center px-4 py-2 border-b border-gray-200 cursor-pointer",onClick:Me},Qe[14]||(Qe[14]=[zu('<div class="flex items-center"><div class="w-10 h-1.5 bg-gray-300 rounded-full mr-3"></div></div><button class="p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>',2)])),pi(VO,{"current-tool":Kn(_),"selected-shape":pe.value,"all-layers":((bn=Kn(R))==null?void 0:bn.getLayers())||[],onToolChange:Kn(k),onStyleUpdate:Kn(F),onPropertiesUpdate:de,onDeleteShape:tt,onFilterChange:An,onCloseDrawer:Qe[4]||(Qe[4]=St=>i.value=!1)},null,8,["current-tool","selected-shape","all-layers","onToolChange","onStyleUpdate"])],2)):nn("",!0)]),wt.value?(Fe(),Ve("div",a9,Qe[15]||(Qe[15]=[zu('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Gnration de la synthse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):nn("",!0)],512),[[Hm,T.value]]),(Fe(),il(kv,{to:"body"},[pi(px,{ref_key:"newPlanModalRef",ref:ue,modelValue:$.value,"onUpdate:modelValue":Qe[5]||(Qe[5]=St=>$.value=St),onCreated:Ze,onSalarieSelected:Qe[6]||(Qe[6]=St=>_e.value=St),onVisiteurSelected:Qe[7]||(Qe[7]=St=>Ce.value=St)},null,8,["modelValue"])])),(Fe(),il(kv,{to:"body"},[U.value?(Fe(),Ve("div",l9,[S("div",u9,[S("div",c9,[Qe[17]||(Qe[17]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),S("button",{onClick:Qe[8]||(Qe[8]=St=>U.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Qe[16]||(Qe[16]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",f9,[Kn(q).isAdmin?(Fe(),Ve("div",h9,[cn.value?_e.value?Te.value?(Fe(),Ve("div",k9,[S("div",T9,[S("button",{onClick:ar,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Qe[33]||(Qe[33]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ii(" Retour  la liste des clients ")])),Qe[34]||(Qe[34]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",N9,It($t(Te.value)),1)]),Qe[36]||(Qe[36]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",D9,[Q.value?(Fe(),Ve(Mn,{key:0},br(3,St=>S("div",{key:St,class:"animate-pulse"},Qe[35]||(Qe[35]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Fe(!0),Ve(Mn,{key:1},br(ie.value,St=>(Fe(),Ve("button",{key:St.id,onClick:mt=>te(St.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",O9,It(St.nom),1),S("div",B9,It(St.description),1),S("div",R9," Modifi le "+It(We(St.date_modification)),1)],8,I9))),128))])])):(Fe(),Ve("div",L9,[S("div",S9,[S("button",{onClick:Dn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Qe[26]||(Qe[26]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ii(" Retour  la liste des salaries ")])),Qe[27]||(Qe[27]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",E9,It($t(_e.value)),1)]),Qe[32]||(Qe[32]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),S("div",C9,[S("button",{onClick:gr,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Qe[28]||(Qe[28]=[S("div",null,[S("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),S("div",{class:"text-xs text-primary-600"},"Afficher les plans crs sans visiteur associ")],-1),S("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),H.value?(Fe(),Ve(Mn,{key:0},br(3,St=>S("div",{key:St,class:"animate-pulse"},Qe[29]||(Qe[29]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Fe(),Ve(Mn,{key:1},[se.value.length===0?(Fe(),Ve("div",P9,Qe[30]||(Qe[30]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),S("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Fe(!0),Ve(Mn,{key:1},br(se.value,St=>(Fe(),Ve("button",{key:St.id,onClick:mt=>Or(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",A9,It($t(St)),1)]),Qe[31]||(Qe[31]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,M9))),128))],64))])])):(Fe(),Ve("div",v9,[S("div",y9,[S("button",{onClick:Ln,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Qe[21]||(Qe[21]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ii(" Retour  la liste des entreprises ")])),Qe[22]||(Qe[22]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",_9,It($t(cn.value)),1)]),Qe[25]||(Qe[25]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un salarie",-1)),S("div",b9,[J.value?(Fe(),Ve(Mn,{key:0},br(3,St=>S("div",{key:St,class:"animate-pulse"},Qe[23]||(Qe[23]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Fe(!0),Ve(Mn,{key:1},br(rt.value,St=>(Fe(),Ve("button",{key:St.id,onClick:mt=>En(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",x9,It($t(St)),1)]),Qe[24]||(Qe[24]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,w9))),128))])])):(Fe(),Ve("div",d9,[Qe[20]||(Qe[20]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez une entreprise",-1)),S("div",p9,[Ke.value?(Fe(),Ve(Mn,{key:0},br(3,St=>S("div",{key:St,class:"animate-pulse"},Qe[18]||(Qe[18]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Fe(!0),Ve(Mn,{key:1},br(ot.value,St=>(Fe(),Ve("button",{key:St.id,onClick:mt=>Rn(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",m9,It($t(St)),1)]),Qe[19]||(Qe[19]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,g9))),128))])]))])):Kn(q).isSalarie?(Fe(),Ve("div",F9,[Te.value?(Fe(),Ve("div",G9,[S("div",H9,[S("button",{onClick:ar,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Qe[41]||(Qe[41]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ii(" Retour  la liste des clients ")])),Qe[42]||(Qe[42]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",q9,It($t(Te.value)),1)]),Qe[44]||(Qe[44]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",W9,[Q.value?(Fe(),Ve(Mn,{key:0},br(3,St=>S("div",{key:St,class:"animate-pulse"},Qe[43]||(Qe[43]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Fe(!0),Ve(Mn,{key:1},br(ie.value,St=>(Fe(),Ve("button",{key:St.id,onClick:mt=>te(St.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",K9,It(St.nom),1),S("div",Y9,It(St.description),1),S("div",J9," Modifi le "+It(We(St.date_modification)),1)],8,Z9))),128))])])):(Fe(),Ve("div",j9,[Qe[40]||(Qe[40]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),S("div",$9,[H.value?(Fe(),Ve(Mn,{key:0},br(3,St=>S("div",{key:St,class:"animate-pulse"},Qe[37]||(Qe[37]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Fe(),Ve(Mn,{key:1},[se.value.length===0?(Fe(),Ve("div",z9,Qe[38]||(Qe[38]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),S("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):(Fe(!0),Ve(Mn,{key:1},br(se.value,St=>(Fe(),Ve("button",{key:St.id,onClick:mt=>Or(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",V9,It($t(St)),1)]),Qe[39]||(Qe[39]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,U9))),128))],64))])]))])):Kn(q).isEntreprise?(Fe(),Ve("div",X9,It(Kn(q).isEntreprise?"...":""),1)):(Fe(),Ve("div",Q9,[Kn(s).plans.length===0?(Fe(),Ve("div",ej,Qe[45]||(Qe[45]=[S("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Fe(),Ve("div",tj,[(Fe(!0),Ve(Mn,null,br(Kn(s).plans,St=>(Fe(),Ve("button",{key:St.id,onClick:mt=>te(St.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",rj,It(St.nom),1),S("div",ij,It(St.description),1),S("div",oj," Modifi le "+It(We(St.date_modification)),1)],8,nj))),128))]))]))])])])):nn("",!0)]))])]),Z.value?(Fe(),il(hx,{key:0,note:N.value,"is-new-note":!((qt=N.value)!=null&&qt.id),location:(Hn=N.value)==null?void 0:Hn.location,onClose:jn,onSave:wr},null,8,["note","is-new-note","location"])):nn("",!0)],64)}}}),sj={class:"fixed inset-0 z-[3001] overflow-y-auto"},aj={class:"flex items-center justify-center min-h-screen w-full p-0"},lj={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},uj={class:"p-4 md:p-6"},cj={class:"flex justify-between items-center mb-4 border-b pb-4"},fj={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},hj={class:"mt-4"},dj={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},pj={class:"flex"},gj={class:"ml-3"},mj={class:"text-sm font-medium text-red-800"},vj={key:0},yj={key:1},_j=["value"],bj={key:2},wj={key:3},xj=["value"],Lj={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},Sj={key:0,class:"mt-2 text-sm text-red-600"},Ej={key:0,class:"mt-2 text-sm text-red-600"},Cj={key:4},Pj={class:"flex items-center"},Mj={key:5,class:"border-t pt-4 mt-4"},Aj={class:"mb-4"},kj={class:"mb-4"},Tj={key:6},Nj={key:7},Dj={key:0,class:"mt-2 text-sm text-red-600"},Ij={class:"flex justify-end space-x-3"},Oj=["disabled"],Bj={key:0,class:"mr-2"},Rj=Qo({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(e,{emit:n}){const t=e,r=n,i=Ft(!1),s=Ft(""),o=Ft(""),u=Ft(""),f=Ft(""),d=Ft(""),m=Jl({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:t.isEntreprise?"SALARIE":t.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});ps(()=>{var b;(b=t.user)!=null&&b.id?(m.id=t.user.id,m.first_name=t.user.first_name||"",m.last_name=t.user.last_name||"",m.username=t.user.username||"",m.email=t.user.email||"",m.company_name=t.user.company_name||"",m.role=t.user.role||"VISITEUR",m.is_active=t.user.is_active??!0,m.ecowitt_api_key=t.user.ecowitt_api_key||"",m.ecowitt_application_key=t.user.ecowitt_application_key||"",m.storage_quota=t.user.storage_quota||50,m.storage_used=t.user.storage_used||0,t.user.salarie?typeof t.user.salarie=="object"?m.salarie=t.user.salarie.id:m.salarie=t.user.salarie:t.user.salarie_id?m.salarie=t.user.salarie_id:t.currentSalarie&&(m.salarie=parseInt(t.currentSalarie)),t.user.entreprise?typeof t.user.entreprise=="object"?m.entreprise=t.user.entreprise.id:m.entreprise=t.user.entreprise:t.user.entreprise_id?m.entreprise=t.user.entreprise_id:t.currentEntreprise&&(m.entreprise=parseInt(t.currentEntreprise))):(t.currentSalarie&&(m.salarie=parseInt(t.currentSalarie)),t.currentEntreprise&&(m.entreprise=parseInt(t.currentEntreprise)),t.isEntreprise?m.role="SALARIE":t.isAdmin||(m.role="VISITEUR"))}),wp(()=>{m.role==="ADMIN"||m.role==="ENTREPRISE"?(m.salarie=null,m.entreprise=null):m.role==="SALARIE"&&(m.salarie=null,t.isEntreprise&&t.currentEntreprise&&(m.entreprise=parseInt(t.currentEntreprise)))}),wp(()=>{s.value="",o.value="",u.value="",f.value="",t.apiErrors&&t.apiErrors.length>0&&t.apiErrors.forEach(b=>{switch(b.field){case"email":s.value=b.message;break;case"username":o.value=b.message;break;case"password":u.value=b.message;break;case"non_field_error":default:f.value=b.message;break}})});async function _(){s.value="",o.value="",u.value="",f.value="";let b=!0;if(m.id||(m.password!==d.value?(u.value="Les mots de passe ne correspondent pas",b=!1):m.password.length<8&&(u.value="Le mot de passe doit contenir au moins 8 caractres",b=!1)),!!b){i.value=!0;try{const y={...m};m.id&&delete y.password,t.isEntreprise&&["SALARIE","VISITEUR"].includes(m.role)&&(y.entreprise_id=t.currentEntreprise?parseInt(t.currentEntreprise):void 0),y.salarie&&(y.salarie_id=y.salarie,delete y.salarie),t.currentSalarie&&m.role==="VISITEUR"&&(y.salarie_id=parseInt(t.currentSalarie)),await r("save",y),r("refresh")}catch(y){console.error("Erreur locale:",y)}finally{i.value=!1}}}return(b,y)=>(Fe(),Ve("div",sj,[S("div",aj,[y[42]||(y[42]=S("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[S("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),S("div",lj,[S("div",null,[S("div",uj,[S("div",cj,[S("h3",fj,It(e.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),S("button",{type:"button",onClick:y[0]||(y[0]=M=>b.$emit("close")),class:"text-gray-400 hover:text-gray-500"},y[16]||(y[16]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",hj,[f.value?(Fe(),Ve("div",dj,[S("div",pj,[y[17]||(y[17]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",gj,[S("h3",mj,It(f.value),1)])])])):nn("",!0),S("form",{onSubmit:Gc(_,["prevent"]),class:"space-y-6"},[e.isAdmin?(Fe(),Ve("div",vj,[y[19]||(y[19]=S("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Nn(S("select",{id:"role","onUpdate:modelValue":y[1]||(y[1]=M=>m.role=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},y[18]||(y[18]=[S("option",{value:"ADMIN"},"Administrateur",-1),S("option",{value:"ENTREPRISE"},"Entreprise",-1),S("option",{value:"SALARIE"},"Salarie",-1),S("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[so,m.role]])])):nn("",!0),e.isAdmin&&m.role==="SALARIE"?(Fe(),Ve("div",yj,[y[21]||(y[21]=S("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Nn(S("select",{id:"entreprise","onUpdate:modelValue":y[2]||(y[2]=M=>m.entreprise=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[y[20]||(y[20]=S("option",{value:null},"-- Slectionner une entreprise --",-1)),(Fe(!0),Ve(Mn,null,br(e.entreprises,M=>(Fe(),Ve("option",{key:M.id,value:M.id},It(M.first_name)+" "+It(M.last_name)+" ("+It(M.company_name||"Entreprise")+") ",9,_j))),128))],512),[[so,m.entreprise]])])):nn("",!0),e.isEntreprise&&!m.id?(Fe(),Ve("div",bj,[y[23]||(y[23]=S("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Nn(S("select",{id:"role","onUpdate:modelValue":y[3]||(y[3]=M=>m.role=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},y[22]||(y[22]=[S("option",{value:"SALARIE"},"Salarie",-1),S("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[so,m.role]])])):nn("",!0),(e.isAdmin||e.isEntreprise)&&m.role==="VISITEUR"&&!e.currentSalarie?(Fe(),Ve("div",wj,[y[25]||(y[25]=S("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Nn(S("select",{id:"salarie","onUpdate:modelValue":y[4]||(y[4]=M=>m.salarie=M),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[y[24]||(y[24]=S("option",{value:null},"-- Slectionner un salarie --",-1)),(Fe(!0),Ve(Mn,null,br(e.salaries,M=>(Fe(),Ve("option",{key:M.id,value:M.id},It(M.first_name)+" "+It(M.last_name)+" ("+It(M.company_name||"Salarie")+") ",9,xj))),128))],512),[[so,m.salarie]])])):nn("",!0),S("div",Lj,[S("div",null,[y[26]||(y[26]=S("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),Nn(S("input",{type:"text",id:"first_name","onUpdate:modelValue":y[5]||(y[5]=M=>m.first_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,m.first_name]])]),S("div",null,[y[27]||(y[27]=S("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Nn(S("input",{type:"text",id:"last_name","onUpdate:modelValue":y[6]||(y[6]=M=>m.last_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,m.last_name]])])]),S("div",null,[y[28]||(y[28]=S("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Nn(S("input",{type:"email",id:"email","onUpdate:modelValue":y[7]||(y[7]=M=>m.email=M),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,m.email]]),s.value?(Fe(),Ve("div",Sj,It(s.value),1)):nn("",!0)]),S("div",null,[y[29]||(y[29]=S("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Nn(S("input",{type:"text",id:"username","onUpdate:modelValue":y[8]||(y[8]=M=>m.username=M),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,m.username]]),o.value?(Fe(),Ve("div",Ej,It(o.value),1)):nn("",!0)]),S("div",null,[y[30]||(y[30]=S("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Nn(S("input",{type:"text",id:"company_name","onUpdate:modelValue":y[9]||(y[9]=M=>m.company_name=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,m.company_name]])]),m.role==="ENTREPRISE"||m.role==="SALARIE"?(Fe(),Ve("div",Cj,[y[32]||(y[32]=S("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),S("div",Pj,[Nn(S("input",{type:"number",id:"storage_quota","onUpdate:modelValue":y[10]||(y[10]=M=>m.storage_quota=M),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,m.storage_quota]]),y[31]||(y[31]=S("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),y[33]||(y[33]=S("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):nn("",!0),m.role==="ENTREPRISE"?(Fe(),Ve("div",Mj,[y[38]||(y[38]=S("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),S("div",Aj,[y[34]||(y[34]=S("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Cl API Ecowitt",-1)),Nn(S("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":y[11]||(y[11]=M=>m.ecowitt_api_key=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl API Ecowitt"},null,512),[[Zr,m.ecowitt_api_key]]),y[35]||(y[35]=S("p",{class:"mt-1 text-sm text-gray-500"},"Cl API pour accder aux services mto Ecowitt",-1))]),S("div",kj,[y[36]||(y[36]=S("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Cl d'application Ecowitt",-1)),Nn(S("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":y[12]||(y[12]=M=>m.ecowitt_application_key=M),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl d'application Ecowitt"},null,512),[[Zr,m.ecowitt_application_key]]),y[37]||(y[37]=S("p",{class:"mt-1 text-sm text-gray-500"},"Cl d'application pour accder aux services mto Ecowitt",-1))])])):nn("",!0),m.id?nn("",!0):(Fe(),Ve("div",Tj,[y[39]||(y[39]=S("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Nn(S("input",{type:"password",id:"password","onUpdate:modelValue":y[13]||(y[13]=M=>m.password=M),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,m.password]])])),m.id?nn("",!0):(Fe(),Ve("div",Nj,[y[40]||(y[40]=S("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Nn(S("input",{type:"password",id:"password_confirm","onUpdate:modelValue":y[14]||(y[14]=M=>d.value=M),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Zr,d.value]]),u.value?(Fe(),Ve("div",Dj,It(u.value),1)):nn("",!0)])),S("div",Ij,[S("button",{type:"button",onClick:y[15]||(y[15]=M=>b.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),S("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Fe(),Ve("span",Bj,y[41]||(y[41]=[S("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):nn("",!0),ii(" "+It(m.id?"Enregistrer":"Crer"),1)],8,Oj)])],32)])])])])])]))}}),Fj={class:"fixed inset-0 z-[3001] overflow-y-auto"},jj={class:"flex items-center justify-center min-h-screen w-full"},$j={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},zj={class:"p-4 md:p-6"},Uj={class:"flex items-start"},Vj={class:"ml-4 flex-1"},Gj={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Hj={class:"mt-2"},qj={class:"text-sm text-gray-500"},Wj={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},Bx=Qo({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(e){return(n,t)=>(Fe(),Ve("div",Fj,[S("div",jj,[t[3]||(t[3]=S("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[S("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),S("div",$j,[S("div",zj,[S("div",Uj,[t[2]||(t[2]=S("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[S("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),S("div",Vj,[S("h3",Gj,It(e.title),1),S("div",Hj,[S("p",qj,It(e.message),1)])])]),S("div",Wj,[S("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:t[0]||(t[0]=r=>n.$emit("confirm"))}," Confirmer "),S("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:t[1]||(t[1]=r=>n.$emit("cancel"))}," Annuler ")])])])])]))}}),Zj={class:"h-full bg-gray-50"},Kj={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Yj={class:"flex justify-between items-center mb-8"},Jj={class:"text-3xl font-extrabold text-gray-900"},Xj={key:0},Qj={key:1},e$={key:2},t$={key:0},n$={key:1},r$={key:2},i$={class:"bg-white shadow rounded-lg mb-6 p-4"},o$={class:"space-y-4"},s$={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},a$={key:0},l$={key:0,value:"ADMIN"},u$={key:1,value:"ENTREPRISE"},c$={key:1},f$=["value"],h$={key:2},d$=["value"],p$={class:"w-full"},g$={class:"bg-white shadow rounded-lg"},m$={class:"overflow-x-auto"},v$={class:"min-w-full divide-y divide-gray-200"},y$={class:"bg-gray-50"},_$={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},b$={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},w$={class:"bg-white divide-y divide-gray-200"},x$={key:0,class:"animate-pulse"},L$={key:1},S$={class:"px-6 py-4 whitespace-nowrap"},E$={class:"flex items-center"},C$={class:"flex-shrink-0 h-10 w-10"},P$={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},M$={class:"text-primary-600 font-medium"},A$={class:"ml-4"},k$={class:"text-sm font-medium text-gray-900"},T$={class:"text-sm text-gray-500"},N$={class:"px-6 py-4 whitespace-nowrap"},D$={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},I$={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},O$={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},B$={class:"px-6 py-4 whitespace-nowrap"},R$={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},F$=["onClick"],j$=["onClick"],$$={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},z$=Qo({__name:"UserListView",setup(e){const n=ta(),t=Yl(),r=Ft([]),i=Ft([]),s=Ft([]),o=Ft(!1),u=Ft(!1),f=Ft(null),d=Ft(null),m=Ft(!0),_=Ft([]),b=Jl({role:"",search:"",salarie:"",entreprise:""}),y=rr(()=>n.isAdmin),M=rr(()=>n.isEntreprise),k=rr(()=>n.isSalarie),F=rr(()=>y.value?r.value.filter(z=>z.role==="SALARIE"):M.value?r.value.filter(z=>{var q,G;return z.role==="SALARIE"&&((q=z.entreprise)==null?void 0:q.id)===((G=n.user)==null?void 0:G.id)}):[]),I=rr(()=>{let z=r.value;if(M.value&&(z=z.filter(q=>{var G,oe,ie,_e,Ce;return q.role==="SALARIE"?((G=q.entreprise)==null?void 0:G.id)===((oe=n.user)==null?void 0:oe.id):q.role==="VISITEUR"?((_e=(ie=q.salarie)==null?void 0:ie.entreprise)==null?void 0:_e.id)===((Ce=n.user)==null?void 0:Ce.id):!1})),k.value&&(z=z.filter(q=>{var G,oe;return q.role==="VISITEUR"&&(q.salarie_id===((G=n.user)==null?void 0:G.id)||q.salarie&&q.salarie.id===((oe=n.user)==null?void 0:oe.id))})),(y.value||M.value)&&(b.role&&(z=z.filter(q=>q.role===b.role)),b.salarie&&(z=z.filter(q=>{var oe;const G=((oe=q.salarie)==null?void 0:oe.id)||q.salarie_id;return(G==null?void 0:G.toString())===b.salarie.toString()})),b.entreprise&&y.value&&(z=z.filter(q=>{var G,oe,ie,_e,Ce;return q.role==="SALARIE"?((oe=(G=q.entreprise)==null?void 0:G.id)==null?void 0:oe.toString())===b.entreprise.toString():q.role==="VISITEUR"?((Ce=(_e=(ie=q.salarie)==null?void 0:ie.entreprise)==null?void 0:_e.id)==null?void 0:Ce.toString())===b.entreprise.toString():!1}))),b.search){const q=b.search.toLowerCase();z=z.filter(G=>{var oe,ie,_e,Ce;return((oe=G.username)==null?void 0:oe.toLowerCase().includes(q))||((ie=G.email)==null?void 0:ie.toLowerCase().includes(q))||((_e=G.first_name)==null?void 0:_e.toLowerCase().includes(q))||((Ce=G.last_name)==null?void 0:Ce.toLowerCase().includes(q))||G.company_name&&G.company_name.toLowerCase().includes(q)})}return z});ps(async()=>{await R(),await Y()});async function R(){var z,q,G;m.value=!0;try{if(y.value)r.value=await n.fetchUsers();else if(M.value){const[oe,ie]=await Promise.all([Bg({role:"SALARIE",entrepriseId:(z=n.user)==null?void 0:z.id}),Bg({role:"VISITEUR",entrepriseId:(q=n.user)==null?void 0:q.id})]);r.value=[...oe,...ie]}else k.value&&(r.value=await Bg({role:"VISITEUR",salarieId:(G=n.user)==null?void 0:G.id,includeDetails:!0}),console.log("Visiteurs rcuprs:",r.value))}catch(oe){console.error("Erreur lors de la rcupration des utilisateurs:",oe),t.error("Erreur lors de la rcupration des utilisateurs")}finally{m.value=!1}}async function Y(){try{y.value?await Promise.all([ee(),fe()]):M.value&&await he()}catch(z){console.error("Erreur lors de la rcupration des dpendances:",z)}}async function ee(){var z;try{y.value?i.value=await n.fetchUsersByRole({role:"SALARIE"}):M.value&&(i.value=await n.fetchEntrepriseSalaries((z=n.user)==null?void 0:z.id))}catch(q){console.error("Erreur lors de la rcupration des salaries:",q)}}async function he(){var z,q;if(!(!M.value||!((z=n.user)!=null&&z.id)))try{i.value=await n.fetchEntrepriseSalaries((q=n.user)==null?void 0:q.id)}catch(G){console.error("Erreur lors de la rcupration des salaries de l'entreprise:",G)}}async function fe(){try{s.value=await n.fetchEnterprises()}catch(z){console.error("Erreur lors de la rcupration des entreprises:",z)}}function ve(){f.value=null,o.value=!0}function $(z){f.value={...z},o.value=!0}function U(){o.value=!1,f.value=null,_.value=[]}async function Z(z){var G,oe,ie,_e,Ce,Te;_.value=[];const q=!!z.id;try{const J={...z};y.value?(J.entreprise&&typeof J.entreprise=="object"?J.entreprise_id=J.entreprise.id:typeof J.entreprise=="number"&&(J.entreprise_id=J.entreprise),J.salarie&&typeof J.salarie=="object"?J.salarie_id=J.salarie.id:typeof J.salarie=="number"&&(J.salarie_id=J.salarie)):M.value?(J.entreprise_id=(G=n.user)==null?void 0:G.id,J.role==="VISITEUR"&&(J.salarie&&typeof J.salarie=="object"?J.salarie_id=J.salarie.id:typeof J.salarie=="number"&&(J.salarie_id=J.salarie))):k.value&&(J.role="VISITEUR",J.salarie_id=(oe=n.user)==null?void 0:oe.id),J.role==="SALARIE"?((ie=J.entreprise)!=null&&ie.id?(J.entreprise_id=J.entreprise.id,delete J.entreprise):typeof J.entreprise=="number"&&(J.entreprise_id=J.entreprise,delete J.entreprise),delete J.salarie):J.role==="VISITEUR"&&((_e=J.salarie)!=null&&_e.id?(J.salarie_id=J.salarie.id,delete J.salarie):typeof J.salarie=="number"&&(J.salarie_id=J.salarie,delete J.salarie),delete J.entreprise,delete J.entreprise_id),q?(await n.updateUser(z.id,J),t.success("Utilisateur modifi avec succs")):(await n.createUser(J),t.success("Utilisateur cr avec succs")),await Promise.all([R(),Y()]),U()}catch(J){console.error("Error saving user:",((Ce=J.response)==null?void 0:Ce.data)||J),_.value=nT(J),t.error("Erreur lors de la sauvegarde de l'utilisateur");const H=((Te=J.response)==null?void 0:Te.data)||{};let Q="";throw typeof H=="object"&&(Q=Object.entries(H).map(([ue,se])=>Array.isArray(se)?`${ue}: ${se[0]}`:`${ue}: ${se}`).filter(ue=>ue).join(`
`)),Q||(Q="Une erreur est survenue lors de la sauvegarde"),new Error(Q)}}function T(z){d.value=z,u.value=!0}async function N(){if(d.value)try{await n.deleteUser(d.value.id),t.success("Utilisateur supprim avec succs"),await Promise.all([R(),Y()]),u.value=!1,d.value=null}catch(z){throw console.error("Erreur lors de la suppression de l'utilisateur:",z),t.error("Erreur lors de la suppression de l'utilisateur"),z}}function O(z){var q,G,oe,ie,_e,Ce,Te,J;return y.value?!0:M.value?z.role==="SALARIE"?((q=z.entreprise)==null?void 0:q.id)===((G=n.user)==null?void 0:G.id):z.role==="VISITEUR"?((ie=(oe=z.salarie)==null?void 0:oe.entreprise)==null?void 0:ie.id)===((_e=n.user)==null?void 0:_e.id):!1:k.value?z.role==="VISITEUR"&&(z.salarie_id===((Ce=n.user)==null?void 0:Ce.id)||((Te=z.salarie)==null?void 0:Te.id)===((J=n.user)==null?void 0:J.id)):!1}return(z,q)=>{var G,oe,ie,_e;return Fe(),Ve("div",Zj,[S("div",Kj,[S("div",Yj,[S("h1",Jj,[y.value?(Fe(),Ve("span",Xj,"Gestion des utilisateurs")):M.value?(Fe(),Ve("span",Qj,"Gestion des salaries et visiteurs")):k.value?(Fe(),Ve("span",e$,"Gestion des visiteurs")):nn("",!0)]),S("button",{onClick:ve,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[q[5]||(q[5]=S("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),y.value?(Fe(),Ve("span",t$,"Nouvel utilisateur")):M.value?(Fe(),Ve("span",n$,"Nouveau salarie/visiteur")):k.value?(Fe(),Ve("span",r$,"Nouvel visiteur")):nn("",!0)])]),S("div",i$,[S("div",o$,[S("div",s$,[y.value||M.value?(Fe(),Ve("div",a$,[q[9]||(q[9]=S("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),Nn(S("select",{id:"role-filter","onUpdate:modelValue":q[0]||(q[0]=Ce=>b.role=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[q[6]||(q[6]=S("option",{value:""},"Tous les rles",-1)),y.value?(Fe(),Ve("option",l$,"Administrateur")):nn("",!0),y.value?(Fe(),Ve("option",u$,"Entreprise")):nn("",!0),q[7]||(q[7]=S("option",{value:"SALARIE"},"Salarie",-1)),q[8]||(q[8]=S("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[so,b.role]])])):nn("",!0),y.value?(Fe(),Ve("div",c$,[q[11]||(q[11]=S("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Nn(S("select",{id:"entreprise-filter","onUpdate:modelValue":q[1]||(q[1]=Ce=>b.entreprise=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[q[10]||(q[10]=S("option",{value:""},"Toutes les entreprises",-1)),(Fe(!0),Ve(Mn,null,br(s.value,Ce=>(Fe(),Ve("option",{key:Ce.id,value:Ce.id},It(Kn(Hl)(Ce)),9,f$))),128))],512),[[so,b.entreprise]])])):nn("",!0),y.value||M.value?(Fe(),Ve("div",h$,[q[13]||(q[13]=S("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Nn(S("select",{id:"salarie-filter","onUpdate:modelValue":q[2]||(q[2]=Ce=>b.salarie=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[q[12]||(q[12]=S("option",{value:""},"Tous les salaries",-1)),(Fe(!0),Ve(Mn,null,br(F.value,Ce=>(Fe(),Ve("option",{key:Ce.id,value:Ce.id},It(Kn(Hl)(Ce)),9,d$))),128))],512),[[so,b.salarie]])])):nn("",!0)]),S("div",p$,[q[14]||(q[14]=S("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Nn(S("input",{type:"text",id:"search","onUpdate:modelValue":q[3]||(q[3]=Ce=>b.search=Ce),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Zr,b.search]])])])]),S("div",g$,[S("div",m$,[S("table",v$,[S("thead",y$,[S("tr",null,[q[15]||(q[15]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),q[16]||(q[16]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rle ",-1)),q[17]||(q[17]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),y.value||M.value?(Fe(),Ve("th",_$," Entreprise ")):nn("",!0),y.value||M.value?(Fe(),Ve("th",b$," Salarie ")):nn("",!0),q[18]||(q[18]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),q[19]||(q[19]=S("th",{scope:"col",class:"relative px-6 py-3"},[S("span",{class:"sr-only"},"Actions")],-1))])]),S("tbody",w$,[m.value?(Fe(),Ve("tr",x$,q[20]||(q[20]=[S("td",{colspan:"7",class:"py-4 px-6"},[S("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):I.value.length===0?(Fe(),Ve("tr",L$,q[21]||(q[21]=[S("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouv ",-1)]))):nn("",!0),(Fe(!0),Ve(Mn,null,br(I.value,Ce=>{var Te;return Fe(),Ve("tr",{key:Ce.id},[S("td",S$,[S("div",E$,[S("div",C$,[S("div",P$,[S("span",M$,It(Kn(iT)(Ce.first_name,Ce.last_name)),1)])]),S("div",A$,[S("div",k$,It(Kn(Hl)(Ce)),1),S("div",T$,It(Ce.username),1)])])]),S("td",N$,[S("span",{class:Gi(Kn(aT)())},It(Kn(sT)(Ce.role)),3)]),S("td",D$,It(Ce.email),1),y.value||M.value?(Fe(),Ve("td",I$,[Ce.role==="ENTREPRISE"?(Fe(),Ve(Mn,{key:0},[ii(" - ")],64)):Ce.role==="SALARIE"?(Fe(),Ve(Mn,{key:1},[ii(It(Ce.entreprise?Kn(Hl)(Ce.entreprise):"Non assign"),1)],64)):Ce.role==="VISITEUR"?(Fe(),Ve(Mn,{key:2},[ii(It((Te=Ce.salarie)!=null&&Te.entreprise?Kn(Hl)(Ce.salarie.entreprise):"Non assign"),1)],64)):(Fe(),Ve(Mn,{key:3},[ii(" - ")],64))])):nn("",!0),y.value||M.value?(Fe(),Ve("td",O$,[Ce.role==="ENTREPRISE"||Ce.role==="ADMIN"?(Fe(),Ve(Mn,{key:0},[ii(" - ")],64)):Ce.role==="SALARIE"?(Fe(),Ve(Mn,{key:1},[ii(" - ")],64)):(Fe(),Ve(Mn,{key:2},[ii(It(Ce.salarie?Kn(Hl)(Ce.salarie):"Non assign"),1)],64))])):nn("",!0),S("td",B$,[S("span",{class:Gi(Kn(lT)(Ce.is_active))},It(Ce.is_active?"Actif":"Inactif"),3)]),S("td",R$,[S("button",{onClick:J=>$(Ce),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,F$),O(Ce)?(Fe(),Ve("button",{key:0,onClick:J=>T(Ce),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,j$)):nn("",!0)])])}),128))])])])])]),o.value?(Fe(),Ve("div",$$,[pi(Rj,{user:f.value,salaries:i.value,entreprises:s.value,"is-admin":y.value,"is-entreprise":M.value,"current-salarie":k.value?(oe=(G=Kn(n).user)==null?void 0:G.id)==null?void 0:oe.toString():void 0,"current-entreprise":M.value?(_e=(ie=Kn(n).user)==null?void 0:ie.id)==null?void 0:_e.toString():void 0,"api-errors":_.value,onClose:U,onSave:Z},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):nn("",!0),u.value?(Fe(),il(Bx,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:N,onCancel:q[4]||(q[4]=Ce=>u.value=!1)})):nn("",!0)])}}}),U$={class:"h-full bg-gray-50"},V$={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},G$={class:"sm:flex sm:items-center"},H$={class:"sm:flex-auto"},q$={class:"text-2xl font-semibold text-gray-900"},W$={class:"mt-2 text-sm text-gray-700"},Z$={key:0,class:"mt-8"},K$={class:"mb-6"},Y$=["value"],J$={class:"mb-6"},X$={value:null},Q$=["value"],ez={key:0,class:"mb-6"},tz={value:null},nz=["value"],rz={key:1,class:"mt-8"},iz={class:"mb-6"},oz=["value"],sz={class:"mt-8"},az={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},lz={class:"overflow-x-auto"},uz={class:"min-w-full divide-y divide-gray-300"},cz={class:"bg-gray-50"},fz={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},hz={class:"ml-2 flex-none rounded"},dz={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},pz={class:"ml-2 flex-none rounded"},gz={class:"divide-y divide-gray-200 bg-white"},mz={key:0},vz={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},yz={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},_z={class:"px-3 py-4 text-sm text-gray-900"},bz={key:0,class:"flex items-center"},wz={class:"h-8 w-8 flex-shrink-0"},xz={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Lz={class:"text-primary-700 font-medium text-sm"},Sz={class:"ml-3"},Ez={class:"font-medium"},Cz={key:1,class:"text-gray-500"},Pz={class:"px-3 py-4 text-sm text-gray-900"},Mz={key:0,class:"flex items-center"},Az={class:"h-8 w-8 flex-shrink-0"},kz={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Tz={class:"text-primary-700 font-medium text-sm"},Nz={class:"ml-3"},Dz={class:"font-medium"},Iz={key:1,class:"text-gray-500"},Oz={class:"px-3 py-4 text-sm text-gray-900"},Bz={key:0,class:"flex items-center"},Rz={class:"h-8 w-8 flex-shrink-0"},Fz={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},jz={class:"text-primary-700 font-medium text-sm"},$z={class:"ml-3"},zz={class:"font-medium"},Uz={key:1,class:"text-gray-500"},Vz={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Gz={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},Hz=["onClick"],qz=["onClick"],Wz=["onClick"],Zz={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},Kz={class:"bg-white rounded-lg p-6 max-w-md w-full"},Yz={class:"flex justify-between items-center mb-4"},Jz=["disabled"],Xz=["disabled"],Qz={key:0,class:"space-y-4"},eU={key:0},tU=["disabled"],nU=["value"],rU=["disabled"],iU=["value"],oU={key:0,class:"mt-1 text-sm text-gray-500"},sU=["disabled"],aU=["value"],lU={key:0,class:"mt-1 text-sm text-gray-500"},uU={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},cU={class:"flex"},fU={class:"ml-3"},hU={class:"text-sm font-medium text-red-800"},dU={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},pU=["disabled"],gU={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},mU=Qo({__name:"PlansView",setup(e){const n=Bp(),t=py(),r=ta(),i=Ft([]),s=Ft([]),o=Ft([]),u=Ft([]),f=Ft(!1),d=Ft(!1),m=Ft(!1),_=Ft(null),b=Ft({nom:"",description:"",client:null}),y=Ft({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),M=Ft(!1),k=Ft(null),F=Ft(null),I=Ft(null),R=Ft("date_modification"),Y=Ft("desc"),ee=Ft(null),he=rr(()=>F.value?u.value.filter(K=>typeof K.salarie=="object"&&K.salarie?K.salarie.id===F.value:K.salarie===F.value||K.salarie_id===F.value):u.value),fe=rr(()=>{let K=i.value;console.log(`
[PlansView] Filtering plans:`,K.map(ke=>({id:ke.id,entreprise:ke.entreprise,salarie:ke.salarie,visiteur:ke.visiteur}))),r.isAdmin?(ee.value&&(K=K.filter(ke=>{var Me;return typeof ke.entreprise=="object"?((Me=ke.entreprise)==null?void 0:Me.id)===ee.value:ke.entreprise===ee.value})),F.value&&(K=K.filter(ke=>{var Me;return typeof ke.salarie=="object"?((Me=ke.salarie)==null?void 0:Me.id)===F.value:ke.salarie===F.value}),I.value&&(K=K.filter(ke=>{var Me;return typeof ke.visiteur=="object"?((Me=ke.visiteur)==null?void 0:Me.id)===I.value:ke.visiteur===I.value})))):r.isSalarie&&(K=K.filter(ke=>{var Me,Ge,ce;return typeof ke.salarie=="object"?((Me=ke.salarie)==null?void 0:Me.id)===((Ge=r.user)==null?void 0:Ge.id):ke.salarie===((ce=r.user)==null?void 0:ce.id)}),I.value&&(K=K.filter(ke=>{var Me;return typeof ke.visiteur=="object"?((Me=ke.visiteur)==null?void 0:Me.id)===I.value:ke.visiteur===I.value})));const D=[...K].sort((ke,Me)=>{if(R.value==="nom")return Y.value==="asc"?ke.nom.localeCompare(Me.nom):Me.nom.localeCompare(ke.nom);{const Ge=new Date(ke[R.value]).getTime(),ce=new Date(Me[R.value]).getTime();return Y.value==="asc"?Ge-ce:ce-Ge}});return console.log("[PlansView] Final filtered and sorted plans:",D.map(ke=>({id:ke.id,entreprise:ke.entreprise,salarie:ke.salarie,visiteur:ke.visiteur}))),D}),ve=rr(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans o vous tes assign comme salarie",plans:i.value.filter(K=>{var D,ke,Me;return typeof K.salarie=="object"?((D=K.salarie)==null?void 0:D.id)===((ke=r.user)==null?void 0:ke.id):K.salarie===((Me=r.user)==null?void 0:Me.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:i.value.filter(K=>{var Me,Ge,ce,te;const D=K.createur.id===((Me=r.user)==null?void 0:Me.id);let ke=!1;return typeof K.visiteur=="object"?ke=((Ge=K.visiteur)==null?void 0:Ge.id)===((ce=r.user)==null?void 0:ce.id):ke=K.visiteur===((te=r.user)==null?void 0:te.id),ke||D})}),$=rr(()=>ee.value?s.value.filter(K=>{var D;return typeof K.entreprise=="object"?((D=K.entreprise)==null?void 0:D.id)===ee.value:K.entreprise_id===ee.value}):s.value),U=rr(()=>y.value.entreprise?s.value.filter(K=>{var D;return typeof K.entreprise=="object"?((D=K.entreprise)==null?void 0:D.id)===y.value.entreprise:K.entreprise_id===y.value.entreprise}):[]),Z=rr(()=>!y.value.entreprise||!y.value.salarie?[]:u.value.filter(K=>typeof K.salarie=="object"&&K.salarie?K.salarie.id===y.value.salarie:K.salarie===y.value.salarie||K.salarie_id===y.value.salarie));ps(async()=>{var K;await T(),r.isAdmin?await N():r.isSalarie&&await z(((K=r.user)==null?void 0:K.id)||0)});async function T(){try{const K=await t.fetchPlansWithDetails();i.value=K.data}catch(K){console.error("Erreur lors du chargement des plans:",K)}}async function N(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises charges:",o.value)}catch(K){console.error("Erreur lors du chargement des entreprises:",K)}}async function O(K){try{if(console.log("Chargement des salaries pour l'entreprise:",K),K===void 0){const D=await r.fetchUsersByRole({role:"SALARIE"});s.value=D}else s.value=await r.fetchEntrepriseSalaries(K);console.log("Salaries chargs:",s.value)}catch(D){console.error("Erreur lors du chargement des salaries:",D)}}async function z(K){try{console.log("Chargement des visiteurs pour le salarie:",K);const D=await Bg({role:"VISITEUR",salarieId:K});u.value=D.map(ke=>({...ke,salarie_id:K})),console.log("Visiteurs chargs:",u.value)}catch(D){console.error("Erreur lors du chargement des visiteurs:",D)}}function q(){f.value=!0,b.value={nom:"",description:"",client:null}}async function G(K){console.log(`
[PlansView][editPlan] ====== DBUT DITION PLAN ======`),console.log("[PlansView][editPlan] Plan reu:",{id:K.id,nom:K.nom,entreprise:K.entreprise,salarie:K.salarie,visiteur:K.visiteur});try{console.log("[PlansView][editPlan] Dfinition du plan courant dans le store..."),t.setCurrentPlan(K),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",K.id),localStorage.setItem("lastPlanId",K.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await n.push("/"),console.log(`[PlansView][editPlan] ====== FIN DITION PLAN ======
`)}catch(D){console.error("[PlansView][editPlan] ERREUR:",D),D instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",D.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function oe(K){K!=null&&K.id&&(_.value=K,m.value=!0)}async function ie(){var K,D;if((K=_.value)!=null&&K.id)try{await t.deletePlan(_.value.id),await T(),((D=t.currentPlan)==null?void 0:D.id)===_.value.id&&t.clearCurrentPlan()}catch(ke){console.error("Erreur lors de la suppression du plan:",ke),alert("Une erreur est survenue lors de la suppression du plan")}finally{m.value=!1,_.value=null}}function _e(){m.value=!1,_.value=null}function Ce(K){return new Date(K).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Te(K){if(!K)return"";const D=K.first_name||"",ke=K.last_name||"";return(D.charAt(0)+ke.charAt(0)).toUpperCase()}async function J(K){M.value=!0,k.value=null;try{r.isAdmin&&!o.value.length&&await N();const D=typeof K.entreprise=="object"&&K.entreprise?K.entreprise.id:K.entreprise,ke=typeof K.salarie=="object"&&K.salarie?K.salarie.id:K.salarie,Me=typeof K.visiteur=="object"&&K.visiteur?K.visiteur.id:K.visiteur;y.value={id:K.id,nom:K.nom,description:K.description,entreprise:D||null,salarie:ke||null,visiteur:Me||null},D&&await O(D),ke&&await z(ke),d.value=!0}catch(D){console.error("Erreur lors de l'ouverture du modal:",D),k.value="Erreur lors du chargement des donnes"}finally{M.value=!1}}async function H(){var K,D,ke,Me,Ge;k.value=null,M.value=!0;try{if(!y.value.nom.trim())throw new Error("Le nom du plan est requis");if(y.value.visiteur&&!y.value.salarie)throw new Error("Un salarie doit tre slectionn pour assigner un visiteur");if(y.value.salarie&&!y.value.entreprise)throw new Error("Une entreprise doit tre slectionne pour assigner un salarie");console.log("Donnes envoyes pour la mise  jour:",{id:y.value.id,nom:y.value.nom.trim(),description:y.value.description.trim(),entreprise_id:y.value.entreprise,salarie_id:y.value.salarie,visiteur_id:y.value.visiteur});const ce=await t.updatePlanDetails(y.value.id,{nom:y.value.nom.trim(),description:y.value.description.trim(),entreprise_id:y.value.entreprise,salarie_id:y.value.salarie,visiteur_id:y.value.visiteur});console.log("Rponse de la mise  jour:",ce),ce&&(d.value=!1,await T())}catch(ce){if(console.error("Erreur lors de la mise  jour du plan:",ce),(D=(K=ce.response)==null?void 0:K.data)!=null&&D.detail)k.value=ce.response.data.detail;else if((Me=(ke=ce.response)==null?void 0:ke.data)!=null&&Me.non_field_errors)k.value=ce.response.data.non_field_errors[0];else if((Ge=ce.response)!=null&&Ge.data){const te=Object.entries(ce.response.data).map(([ye,de])=>`${ye}: ${Array.isArray(de)?de[0]:de}`);k.value=te.join(`
`)}else k.value=ce.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{M.value=!1}}oo(()=>ee.value,async K=>{F.value=null,I.value=null,K?await O(K):await O()}),oo(()=>F.value,async K=>{I.value=null,K&&await z(K)}),oo(()=>y.value.entreprise,async K=>{K===null?(y.value.salarie=null,y.value.visiteur=null):await O(K)}),oo(()=>y.value.salarie,async K=>{y.value.visiteur=null,K&&await z(K)});function Q(K){var Ge,ce,te;const D=r.user;if(!D)return!1;if(D.user_type==="admin")return!0;if(D.user_type==="entreprise")return typeof K.entreprise=="object"?((Ge=K.entreprise)==null?void 0:Ge.id)===D.id:K.entreprise===D.id;if(D.user_type==="salarie")return typeof K.salarie=="object"?((ce=K.salarie)==null?void 0:ce.id)===D.id:K.salarie===D.id;const ke=K.createur.id===D.id;let Me=!1;return typeof K.visiteur=="object"?Me=((te=K.visiteur)==null?void 0:te.id)===D.id:Me=K.visiteur===D.id,Me||ke}async function ue(K){await T(),localStorage.setItem("lastPlanId",K.toString()),console.log(`Plan ${K} cr et dfini comme plan actif`),n.push("/")}function se(K){R.value===K?Y.value=Y.value==="asc"?"desc":"asc":(R.value=K,Y.value="desc")}function pe(K){return K?Hl(K):""}return(K,D)=>{var ke;return Fe(),Ve("div",U$,[S("div",V$,[S("div",G$,[S("div",H$,[S("h1",q$,It(ve.value.title),1),S("p",W$,It(ve.value.description),1)]),S("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[S("button",{onClick:q,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Kn(r).isAdmin?(Fe(),Ve("div",Z$,[S("div",K$,[D[15]||(D[15]=S("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),Nn(S("select",{id:"entreprise-filter","onUpdate:modelValue":D[0]||(D[0]=Me=>ee.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[D[14]||(D[14]=S("option",{value:null},"Toutes les entreprises",-1)),(Fe(!0),Ve(Mn,null,br(o.value,Me=>(Fe(),Ve("option",{key:Me.id,value:Me.id},It(pe(Me)),9,Y$))),128))],512),[[so,ee.value]])]),S("div",J$,[D[16]||(D[16]=S("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),Nn(S("select",{id:"salarie-filter","onUpdate:modelValue":D[1]||(D[1]=Me=>F.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[S("option",X$,It($.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Fe(!0),Ve(Mn,null,br($.value,Me=>(Fe(),Ve("option",{key:Me.id,value:Me.id},It(pe(Me)),9,Q$))),128))],512),[[so,F.value]])]),F.value?(Fe(),Ve("div",ez,[D[17]||(D[17]=S("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Nn(S("select",{id:"visiteur-filter","onUpdate:modelValue":D[2]||(D[2]=Me=>I.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[S("option",tz,It(he.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Fe(!0),Ve(Mn,null,br(he.value,Me=>(Fe(),Ve("option",{key:Me.id,value:Me.id},It(pe(Me)),9,nz))),128))],512),[[so,I.value]])])):nn("",!0)])):Kn(r).isSalarie?(Fe(),Ve("div",rz,[S("div",iz,[D[19]||(D[19]=S("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Nn(S("select",{id:"visiteur-filter","onUpdate:modelValue":D[3]||(D[3]=Me=>I.value=Me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[D[18]||(D[18]=S("option",{value:null},"Tous les visiteurs",-1)),(Fe(!0),Ve(Mn,null,br(u.value,Me=>(Fe(),Ve("option",{key:Me.id,value:Me.id},It(pe(Me)),9,oz))),128))],512),[[so,I.value]])])])):nn("",!0),S("div",sz,[S("div",az,[S("div",lz,[S("table",uz,[S("thead",cz,[S("tr",null,[S("th",fz,[S("button",{onClick:D[4]||(D[4]=Me=>se("nom")),class:"group inline-flex items-center"},[D[21]||(D[21]=ii(" Nom ")),S("span",hz,[(Fe(),Ve("svg",{class:Gi(["h-5 w-5",{"text-gray-900":R.value==="nom","text-gray-400":R.value!=="nom","rotate-180":R.value==="nom"&&Y.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},D[20]||(D[20]=[S("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),D[24]||(D[24]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),D[25]||(D[25]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),D[26]||(D[26]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),D[27]||(D[27]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),S("th",dz,[S("button",{onClick:D[5]||(D[5]=Me=>se("date_modification")),class:"group inline-flex items-center"},[D[23]||(D[23]=ii(" Dernire modification ")),S("span",pz,[(Fe(),Ve("svg",{class:Gi(["h-5 w-5",{"text-gray-900":R.value==="date_modification","text-gray-400":R.value!=="date_modification","rotate-180":R.value==="date_modification"&&Y.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},D[22]||(D[22]=[S("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),D[28]||(D[28]=S("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[S("span",{class:"sr-only"},"Actions")],-1))])]),S("tbody",gz,[fe.value.length===0?(Fe(),Ve("tr",mz,D[29]||(D[29]=[S("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):nn("",!0),(Fe(!0),Ve(Mn,null,br(fe.value,Me=>(Fe(),Ve("tr",{key:Me.id,class:"hover:bg-gray-50"},[S("td",vz,It(Me.nom),1),S("td",yz,It(Me.description||"-"),1),S("td",_z,[Me.entreprise&&typeof Me.entreprise=="object"?(Fe(),Ve("div",bz,[S("div",wz,[S("div",xz,[S("span",Lz,It(Te(Me.entreprise)),1)])]),S("div",Sz,[S("div",Ez,It(Kn(Hl)(Me.entreprise)),1)])])):(Fe(),Ve("div",Cz," Non assign "))]),S("td",Pz,[Me.salarie&&typeof Me.salarie=="object"?(Fe(),Ve("div",Mz,[S("div",Az,[S("div",kz,[S("span",Tz,It(Te(Me.salarie)),1)])]),S("div",Nz,[S("div",Dz,It(Kn(Hl)(Me.salarie)),1)])])):(Fe(),Ve("div",Iz," Non assign "))]),S("td",Oz,[Me.visiteur&&typeof Me.visiteur=="object"?(Fe(),Ve("div",Bz,[S("div",Rz,[S("div",Fz,[S("span",jz,It(Te(Me.visiteur)),1)])]),S("div",$z,[S("div",zz,It(Kn(Hl)(Me.visiteur)),1)])])):(Fe(),Ve("div",Uz," Non assign "))]),S("td",Vz,It(Ce(Me.date_modification)),1),S("td",Gz,[S("button",{onClick:Ge=>G(Me),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,Hz),S("button",{onClick:Ge=>J(Me),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,qz),Q(Me)?(Fe(),Ve("button",{key:0,onClick:Ge=>oe(Me),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,Wz)):nn("",!0)])]))),128))])])])])]),pi(px,{modelValue:f.value,"onUpdate:modelValue":D[6]||(D[6]=Me=>f.value=Me),salaries:s.value,clients:u.value,onCreated:ue},null,8,["modelValue","salaries","clients"]),d.value?(Fe(),Ve("div",Zz,[S("div",Kz,[S("div",Yz,[D[31]||(D[31]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),S("button",{onClick:D[7]||(D[7]=Me=>d.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},D[30]||(D[30]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("form",{onSubmit:Gc(H,["prevent"]),class:"space-y-4"},[S("div",null,[D[32]||(D[32]=S("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Nn(S("input",{type:"text",id:"edit-nom","onUpdate:modelValue":D[8]||(D[8]=Me=>y.value.nom=Me),disabled:M.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,Jz),[[Zr,y.value.nom]])]),S("div",null,[D[33]||(D[33]=S("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Nn(S("textarea",{id:"edit-description","onUpdate:modelValue":D[9]||(D[9]=Me=>y.value.description=Me),disabled:M.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,Xz),[[Zr,y.value.description]])]),Kn(r).isAdmin||((ke=Kn(r).user)==null?void 0:ke.user_type)==="entreprise"?(Fe(),Ve("div",Qz,[Kn(r).isAdmin?(Fe(),Ve("div",eU,[D[35]||(D[35]=S("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),Nn(S("select",{id:"edit-entreprise","onUpdate:modelValue":D[10]||(D[10]=Me=>y.value.entreprise=Me),disabled:M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[D[34]||(D[34]=S("option",{value:null},"Slectionner une entreprise",-1)),(Fe(!0),Ve(Mn,null,br(o.value,Me=>(Fe(),Ve("option",{key:Me.id,value:Me.id},It(pe(Me)),9,nU))),128))],8,tU),[[so,y.value.entreprise]])])):nn("",!0),S("div",null,[D[37]||(D[37]=S("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),Nn(S("select",{id:"edit-salarie","onUpdate:modelValue":D[11]||(D[11]=Me=>y.value.salarie=Me),disabled:Kn(r).isAdmin&&!y.value.entreprise||M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[D[36]||(D[36]=S("option",{value:null},"Slectionner un salarie",-1)),(Fe(!0),Ve(Mn,null,br(U.value,Me=>(Fe(),Ve("option",{key:Me.id,value:Me.id},It(pe(Me)),9,iU))),128))],8,rU),[[so,y.value.salarie]]),Kn(r).isAdmin&&!y.value.entreprise?(Fe(),Ve("p",oU," Veuillez d'abord slectionner une entreprise ")):nn("",!0)]),S("div",null,[D[39]||(D[39]=S("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),Nn(S("select",{id:"edit-visiteur","onUpdate:modelValue":D[12]||(D[12]=Me=>y.value.visiteur=Me),disabled:!y.value.salarie||M.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[D[38]||(D[38]=S("option",{value:null},"Slectionner un visiteur",-1)),(Fe(!0),Ve(Mn,null,br(Z.value,Me=>(Fe(),Ve("option",{key:Me.id,value:Me.id},It(pe(Me)),9,aU))),128))],8,sU),[[so,y.value.visiteur]]),y.value.salarie?nn("",!0):(Fe(),Ve("p",lU," Veuillez d'abord slectionner un salarie "))])])):nn("",!0),k.value?(Fe(),Ve("div",uU,[S("div",cU,[D[40]||(D[40]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",fU,[S("p",hU,It(k.value),1)])])])):nn("",!0),S("div",dU,[S("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:D[13]||(D[13]=Me=>d.value=!1)}," Annuler "),S("button",{type:"submit",disabled:M.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[M.value?(Fe(),Ve("svg",gU,D[41]||(D[41]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),ii(" "+It(M.value?"Enregistrement...":"Enregistrer"),1)],8,pU)])],32)])])):nn("",!0),m.value?(Fe(),il(Bx,{key:3,title:"Supprimer le plan",message:"tes-vous sr de vouloir supprimer ce plan ? Cette action est irrversible.",onConfirm:ie,onCancel:_e})):nn("",!0)])])}}});var Rx={exports:{}};const vU=Y5(m6);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Gb(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),t.push.apply(t,r)}return t}function yc(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Gb(Object(t),!0).forEach(function(r){yU(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Gb(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Gg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gg=function(n){return typeof n}:Gg=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gg(e)}function yU(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _u(){return _u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_u.apply(this,arguments)}function _U(e,n){if(e==null)return{};var t={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(n.indexOf(i)>=0)&&(t[i]=e[i]);return t}function bU(e,n){if(e==null)return{};var t=_U(e,n),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}function wU(e){return xU(e)||LU(e)||SU(e)||EU()}function xU(e){if(Array.isArray(e))return P1(e)}function LU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SU(e,n){if(e){if(typeof e=="string")return P1(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return P1(e,n)}}function P1(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function EU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var CU="1.14.0";function zc(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Wc=zc(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Rp=zc(/Edge/i),Hb=zc(/firefox/i),lp=zc(/safari/i)&&!zc(/chrome/i)&&!zc(/android/i),Fx=zc(/iP(ad|od|hone)/i),PU=zc(/chrome/i)&&zc(/android/i),jx={capture:!1,passive:!1};function Ci(e,n,t){e.addEventListener(n,t,!Wc&&jx)}function vi(e,n,t){e.removeEventListener(n,t,!Wc&&jx)}function xm(e,n){if(n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function MU(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ju(e,n,t,r){if(e){t=t||document;do{if(n!=null&&(n[0]===">"?e.parentNode===t&&xm(e,n):xm(e,n))||r&&e===t)return e;if(e===t)break}while(e=MU(e))}return null}var qb=/\s+/g;function Jo(e,n,t){if(e&&n)if(e.classList)e.classList[t?"add":"remove"](n);else{var r=(" "+e.className+" ").replace(qb," ").replace(" "+n+" "," ");e.className=(r+(t?" "+n:"")).replace(qb," ")}}function sr(e,n,t){var r=e&&e.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),n===void 0?t:t[n];!(n in r)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),r[n]=t+(typeof t=="string"?"":"px")}}function ih(e,n){var t="";if(typeof e=="string")t=e;else do{var r=sr(e,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!n&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function $x(e,n,t){if(e){var r=e.getElementsByTagName(n),i=0,s=r.length;if(t)for(;i<s;i++)t(r[i],i);return r}return[]}function mc(){var e=document.scrollingElement;return e||document.documentElement}function Fo(e,n,t,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var s,o,u,f,d,m,_;if(e!==window&&e.parentNode&&e!==mc()?(s=e.getBoundingClientRect(),o=s.top,u=s.left,f=s.bottom,d=s.right,m=s.height,_=s.width):(o=0,u=0,f=window.innerHeight,d=window.innerWidth,m=window.innerHeight,_=window.innerWidth),(n||t)&&e!==window&&(i=i||e.parentNode,!Wc))do if(i&&i.getBoundingClientRect&&(sr(i,"transform")!=="none"||t&&sr(i,"position")!=="static")){var b=i.getBoundingClientRect();o-=b.top+parseInt(sr(i,"border-top-width")),u-=b.left+parseInt(sr(i,"border-left-width")),f=o+s.height,d=u+s.width;break}while(i=i.parentNode);if(r&&e!==window){var y=ih(i||e),M=y&&y.a,k=y&&y.d;y&&(o/=k,u/=M,_/=M,m/=k,f=o+m,d=u+_)}return{top:o,left:u,bottom:f,right:d,width:_,height:m}}}function Wb(e,n,t){for(var r=_f(e,!0),i=Fo(e)[n];r;){var s=Fo(r)[t],o=void 0;if(o=i>=s,!o)return r;if(r===mc())break;r=_f(r,!1)}return!1}function hd(e,n,t,r){for(var i=0,s=0,o=e.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Nr.ghost&&(r||o[s]!==Nr.dragged)&&ju(o[s],t.draggable,e,!1)){if(i===n)return o[s];i++}s++}return null}function yy(e,n){for(var t=e.lastElementChild;t&&(t===Nr.ghost||sr(t,"display")==="none"||n&&!xm(t,n));)t=t.previousElementSibling;return t||null}function ds(e,n){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Nr.clone&&(!n||xm(e,n))&&t++;return t}function Zb(e){var n=0,t=0,r=mc();if(e)do{var i=ih(e),s=i.a,o=i.d;n+=e.scrollLeft*s,t+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[n,t]}function AU(e,n){for(var t in e)if(e.hasOwnProperty(t)){for(var r in n)if(n.hasOwnProperty(r)&&n[r]===e[t][r])return Number(t)}return-1}function _f(e,n){if(!e||!e.getBoundingClientRect)return mc();var t=e,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=sr(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return mc();if(r||n)return t;r=!0}}while(t=t.parentNode);return mc()}function kU(e,n){if(e&&n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function gv(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var up;function zx(e,n){return function(){if(!up){var t=arguments,r=this;t.length===1?e.call(r,t[0]):e.apply(r,t),up=setTimeout(function(){up=void 0},n)}}}function TU(){clearTimeout(up),up=void 0}function Ux(e,n,t){e.scrollLeft+=n,e.scrollTop+=t}function _y(e){var n=window.Polymer,t=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function Kb(e,n){sr(e,"position","absolute"),sr(e,"top",n.top),sr(e,"left",n.left),sr(e,"width",n.width),sr(e,"height",n.height)}function mv(e){sr(e,"position",""),sr(e,"top",""),sr(e,"left",""),sr(e,"width",""),sr(e,"height","")}var Fa="Sortable"+new Date().getTime();function NU(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(sr(i,"display")==="none"||i===Nr.ghost)){e.push({target:i,rect:Fo(i)});var s=yc({},e[e.length-1].rect);if(i.thisAnimationDuration){var o=ih(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){e.push(r)},removeAnimationState:function(r){e.splice(AU(e,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(n),typeof r=="function"&&r();return}var s=!1,o=0;e.forEach(function(u){var f=0,d=u.target,m=d.fromRect,_=Fo(d),b=d.prevFromRect,y=d.prevToRect,M=u.rect,k=ih(d,!0);k&&(_.top-=k.f,_.left-=k.e),d.toRect=_,d.thisAnimationDuration&&gv(b,_)&&!gv(m,_)&&(M.top-_.top)/(M.left-_.left)===(m.top-_.top)/(m.left-_.left)&&(f=IU(M,b,y,i.options)),gv(_,m)||(d.prevFromRect=m,d.prevToRect=_,f||(f=i.options.animation),i.animate(d,M,_,f)),f&&(s=!0,o=Math.max(o,f),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},f),d.thisAnimationDuration=f)}),clearTimeout(n),s?n=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),e=[]},animate:function(r,i,s,o){if(o){sr(r,"transition",""),sr(r,"transform","");var u=ih(this.el),f=u&&u.a,d=u&&u.d,m=(i.left-s.left)/(f||1),_=(i.top-s.top)/(d||1);r.animatingX=!!m,r.animatingY=!!_,sr(r,"transform","translate3d("+m+"px,"+_+"px,0)"),this.forRepaintDummy=DU(r),sr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),sr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){sr(r,"transition",""),sr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function DU(e){return e.offsetWidth}function IU(e,n,t,r){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))*r.animation}var Oh=[],vv={initializeByDefault:!0},Fp={mount:function(n){for(var t in vv)vv.hasOwnProperty(t)&&!(t in n)&&(n[t]=vv[t]);Oh.forEach(function(r){if(r.pluginName===n.pluginName)throw"Sortable: Cannot mount plugin ".concat(n.pluginName," more than once")}),Oh.push(n)},pluginEvent:function(n,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=n+"Global";Oh.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](yc({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][n]&&t[o.pluginName][n](yc({sortable:t},r)))})},initializePlugins:function(n,t,r,i){Oh.forEach(function(u){var f=u.pluginName;if(!(!n.options[f]&&!u.initializeByDefault)){var d=new u(n,t,n.options);d.sortable=n,d.options=n.options,n[f]=d,_u(r,d.defaults)}});for(var s in n.options)if(n.options.hasOwnProperty(s)){var o=this.modifyOption(n,s,n.options[s]);typeof o<"u"&&(n.options[s]=o)}},getEventProperties:function(n,t){var r={};return Oh.forEach(function(i){typeof i.eventProperties=="function"&&_u(r,i.eventProperties.call(t[i.pluginName],n))}),r},modifyOption:function(n,t,r){var i;return Oh.forEach(function(s){n[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(n[s.pluginName],r))}),i}};function Hd(e){var n=e.sortable,t=e.rootEl,r=e.name,i=e.targetEl,s=e.cloneEl,o=e.toEl,u=e.fromEl,f=e.oldIndex,d=e.newIndex,m=e.oldDraggableIndex,_=e.newDraggableIndex,b=e.originalEvent,y=e.putSortable,M=e.extraEventProperties;if(n=n||t&&t[Fa],!!n){var k,F=n.options,I="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Wc&&!Rp?k=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(k=document.createEvent("Event"),k.initEvent(r,!0,!0)),k.to=o||t,k.from=u||t,k.item=i||t,k.clone=s,k.oldIndex=f,k.newIndex=d,k.oldDraggableIndex=m,k.newDraggableIndex=_,k.originalEvent=b,k.pullMode=y?y.lastPutMode:void 0;var R=yc(yc({},M),Fp.getEventProperties(r,n));for(var Y in R)k[Y]=R[Y];t&&t.dispatchEvent(k),F[I]&&F[I].call(n,k)}}var OU=["evt"],yl=function(n,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=bU(r,OU);Fp.pluginEvent.bind(Nr)(n,t,yc({dragEl:Bn,parentEl:cs,ghostEl:ni,rootEl:Ro,nextEl:Kf,lastDownEl:Hg,cloneEl:fs,cloneHidden:gf,dragStarted:qd,putSortable:pa,activeSortable:Nr.active,originalEvent:i,oldIndex:Wh,oldDraggableIndex:cp,newIndex:Gl,newDraggableIndex:pf,hideGhostForTarget:qx,unhideGhostForTarget:Wx,cloneNowHidden:function(){gf=!0},cloneNowShown:function(){gf=!1},dispatchSortableEvent:function(u){Ja({sortable:t,name:u,originalEvent:i})}},s))};function Ja(e){Hd(yc({putSortable:pa,cloneEl:fs,targetEl:Bn,rootEl:Ro,oldIndex:Wh,oldDraggableIndex:cp,newIndex:Gl,newDraggableIndex:pf},e))}var Bn,cs,ni,Ro,Kf,Hg,fs,gf,Wh,Gl,cp,pf,Lg,pa,Gh=!1,Lm=!1,Sm=[],qf,Ou,yv,_v,Yb,Jb,qd,Bh,fp,hp=!1,Sg=!1,qg,Da,bv=[],M1=!1,Em=[],s0=typeof document<"u",Eg=Fx,Xb=Rp||Wc?"cssFloat":"float",BU=s0&&!PU&&!Fx&&"draggable"in document.createElement("div"),Vx=function(){if(s0){if(Wc)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),Gx=function(n,t){var r=sr(n),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=hd(n,0,t),o=hd(n,1,t),u=s&&sr(s),f=o&&sr(o),d=u&&parseInt(u.marginLeft)+parseInt(u.marginRight)+Fo(s).width,m=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+Fo(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&u.float&&u.float!=="none"){var _=u.float==="left"?"left":"right";return o&&(f.clear==="both"||f.clear===_)?"vertical":"horizontal"}return s&&(u.display==="block"||u.display==="flex"||u.display==="table"||u.display==="grid"||d>=i&&r[Xb]==="none"||o&&r[Xb]==="none"&&d+m>i)?"vertical":"horizontal"},RU=function(n,t,r){var i=r?n.left:n.top,s=r?n.right:n.bottom,o=r?n.width:n.height,u=r?t.left:t.top,f=r?t.right:t.bottom,d=r?t.width:t.height;return i===u||s===f||i+o/2===u+d/2},FU=function(n,t){var r;return Sm.some(function(i){var s=i[Fa].options.emptyInsertThreshold;if(!(!s||yy(i))){var o=Fo(i),u=n>=o.left-s&&n<=o.right+s,f=t>=o.top-s&&t<=o.bottom+s;if(u&&f)return r=i}}),r},Hx=function(n){function t(s,o){return function(u,f,d,m){var _=u.options.group.name&&f.options.group.name&&u.options.group.name===f.options.group.name;if(s==null&&(o||_))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(u,f,d,m),o)(u,f,d,m);var b=(o?u:f).options.group.name;return s===!0||typeof s=="string"&&s===b||s.join&&s.indexOf(b)>-1}}var r={},i=n.group;(!i||Gg(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,n.group=r},qx=function(){!Vx&&ni&&sr(ni,"display","none")},Wx=function(){!Vx&&ni&&sr(ni,"display","")};s0&&document.addEventListener("click",function(e){if(Lm)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Lm=!1,!1},!0);var Wf=function(n){if(Bn){n=n.touches?n.touches[0]:n;var t=FU(n.clientX,n.clientY);if(t){var r={};for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[Fa]._onDragOver(r)}}},jU=function(n){Bn&&Bn.parentNode[Fa]._isOutsideThisEl(n.target)};function Nr(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=_u({},n),e[Fa]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Gx(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,u){o.setData("Text",u.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Nr.supportPointer!==!1&&"PointerEvent"in window&&!lp,emptyInsertThreshold:5};Fp.initializePlugins(this,e,t);for(var r in t)!(r in n)&&(n[r]=t[r]);Hx(n);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=n.forceFallback?!1:BU,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?Ci(e,"pointerdown",this._onTapStart):(Ci(e,"mousedown",this._onTapStart),Ci(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ci(e,"dragover",this),Ci(e,"dragenter",this)),Sm.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),_u(this,NU())}Nr.prototype={constructor:Nr,_isOutsideThisEl:function(n){!this.el.contains(n)&&n!==this.el&&(Bh=null)},_getDirection:function(n,t){return typeof this.options.direction=="function"?this.options.direction.call(this,n,t,Bn):this.options.direction},_onTapStart:function(n){if(n.cancelable){var t=this,r=this.el,i=this.options,s=i.preventOnFilter,o=n.type,u=n.touches&&n.touches[0]||n.pointerType&&n.pointerType==="touch"&&n,f=(u||n).target,d=n.target.shadowRoot&&(n.path&&n.path[0]||n.composedPath&&n.composedPath()[0])||f,m=i.filter;if(WU(r),!Bn&&!(/mousedown|pointerdown/.test(o)&&n.button!==0||i.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&lp&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=ju(f,i.draggable,r,!1),!(f&&f.animated)&&Hg!==f)){if(Wh=ds(f),cp=ds(f,i.draggable),typeof m=="function"){if(m.call(this,n,f,this)){Ja({sortable:t,rootEl:d,name:"filter",targetEl:f,toEl:r,fromEl:r}),yl("filter",t,{evt:n}),s&&n.cancelable&&n.preventDefault();return}}else if(m&&(m=m.split(",").some(function(_){if(_=ju(d,_.trim(),r,!1),_)return Ja({sortable:t,rootEl:_,name:"filter",targetEl:f,fromEl:r,toEl:r}),yl("filter",t,{evt:n}),!0}),m)){s&&n.cancelable&&n.preventDefault();return}i.handle&&!ju(d,i.handle,r,!1)||this._prepareDragStart(n,u,f)}}},_prepareDragStart:function(n,t,r){var i=this,s=i.el,o=i.options,u=s.ownerDocument,f;if(r&&!Bn&&r.parentNode===s){var d=Fo(r);if(Ro=s,Bn=r,cs=Bn.parentNode,Kf=Bn.nextSibling,Hg=r,Lg=o.group,Nr.dragged=Bn,qf={target:Bn,clientX:(t||n).clientX,clientY:(t||n).clientY},Yb=qf.clientX-d.left,Jb=qf.clientY-d.top,this._lastX=(t||n).clientX,this._lastY=(t||n).clientY,Bn.style["will-change"]="all",f=function(){if(yl("delayEnded",i,{evt:n}),Nr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Hb&&i.nativeDraggable&&(Bn.draggable=!0),i._triggerDragStart(n,t),Ja({sortable:i,name:"choose",originalEvent:n}),Jo(Bn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(m){$x(Bn,m.trim(),wv)}),Ci(u,"dragover",Wf),Ci(u,"mousemove",Wf),Ci(u,"touchmove",Wf),Ci(u,"mouseup",i._onDrop),Ci(u,"touchend",i._onDrop),Ci(u,"touchcancel",i._onDrop),Hb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Bn.draggable=!0),yl("delayStart",this,{evt:n}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Rp||Wc))){if(Nr.eventCanceled){this._onDrop();return}Ci(u,"mouseup",i._disableDelayedDrag),Ci(u,"touchend",i._disableDelayedDrag),Ci(u,"touchcancel",i._disableDelayedDrag),Ci(u,"mousemove",i._delayedDragTouchMoveHandler),Ci(u,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Ci(u,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(f,o.delay)}else f()}},_delayedDragTouchMoveHandler:function(n){var t=n.touches?n.touches[0]:n;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Bn&&wv(Bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var n=this.el.ownerDocument;vi(n,"mouseup",this._disableDelayedDrag),vi(n,"touchend",this._disableDelayedDrag),vi(n,"touchcancel",this._disableDelayedDrag),vi(n,"mousemove",this._delayedDragTouchMoveHandler),vi(n,"touchmove",this._delayedDragTouchMoveHandler),vi(n,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(n,t){t=t||n.pointerType=="touch"&&n,!this.nativeDraggable||t?this.options.supportPointer?Ci(document,"pointermove",this._onTouchMove):t?Ci(document,"touchmove",this._onTouchMove):Ci(document,"mousemove",this._onTouchMove):(Ci(Bn,"dragend",this),Ci(Ro,"dragstart",this._onDragStart));try{document.selection?Wg(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(n,t){if(Gh=!1,Ro&&Bn){yl("dragStarted",this,{evt:t}),this.nativeDraggable&&Ci(document,"dragover",jU);var r=this.options;!n&&Jo(Bn,r.dragClass,!1),Jo(Bn,r.ghostClass,!0),Nr.active=this,n&&this._appendGhost(),Ja({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Ou){this._lastX=Ou.clientX,this._lastY=Ou.clientY,qx();for(var n=document.elementFromPoint(Ou.clientX,Ou.clientY),t=n;n&&n.shadowRoot&&(n=n.shadowRoot.elementFromPoint(Ou.clientX,Ou.clientY),n!==t);)t=n;if(Bn.parentNode[Fa]._isOutsideThisEl(n),t)do{if(t[Fa]){var r=void 0;if(r=t[Fa]._onDragOver({clientX:Ou.clientX,clientY:Ou.clientY,target:n,rootEl:t}),r&&!this.options.dragoverBubble)break}n=t}while(t=t.parentNode);Wx()}},_onTouchMove:function(n){if(qf){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,s=n.touches?n.touches[0]:n,o=ni&&ih(ni,!0),u=ni&&o&&o.a,f=ni&&o&&o.d,d=Eg&&Da&&Zb(Da),m=(s.clientX-qf.clientX+i.x)/(u||1)+(d?d[0]-bv[0]:0)/(u||1),_=(s.clientY-qf.clientY+i.y)/(f||1)+(d?d[1]-bv[1]:0)/(f||1);if(!Nr.active&&!Gh){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(n,!0)}if(ni){o?(o.e+=m-(yv||0),o.f+=_-(_v||0)):o={a:1,b:0,c:0,d:1,e:m,f:_};var b="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");sr(ni,"webkitTransform",b),sr(ni,"mozTransform",b),sr(ni,"msTransform",b),sr(ni,"transform",b),yv=m,_v=_,Ou=s}n.cancelable&&n.preventDefault()}},_appendGhost:function(){if(!ni){var n=this.options.fallbackOnBody?document.body:Ro,t=Fo(Bn,!0,Eg,!0,n),r=this.options;if(Eg){for(Da=n;sr(Da,"position")==="static"&&sr(Da,"transform")==="none"&&Da!==document;)Da=Da.parentNode;Da!==document.body&&Da!==document.documentElement?(Da===document&&(Da=mc()),t.top+=Da.scrollTop,t.left+=Da.scrollLeft):Da=mc(),bv=Zb(Da)}ni=Bn.cloneNode(!0),Jo(ni,r.ghostClass,!1),Jo(ni,r.fallbackClass,!0),Jo(ni,r.dragClass,!0),sr(ni,"transition",""),sr(ni,"transform",""),sr(ni,"box-sizing","border-box"),sr(ni,"margin",0),sr(ni,"top",t.top),sr(ni,"left",t.left),sr(ni,"width",t.width),sr(ni,"height",t.height),sr(ni,"opacity","0.8"),sr(ni,"position",Eg?"absolute":"fixed"),sr(ni,"zIndex","100000"),sr(ni,"pointerEvents","none"),Nr.ghost=ni,n.appendChild(ni),sr(ni,"transform-origin",Yb/parseInt(ni.style.width)*100+"% "+Jb/parseInt(ni.style.height)*100+"%")}},_onDragStart:function(n,t){var r=this,i=n.dataTransfer,s=r.options;if(yl("dragStart",this,{evt:n}),Nr.eventCanceled){this._onDrop();return}yl("setupClone",this),Nr.eventCanceled||(fs=_y(Bn),fs.draggable=!1,fs.style["will-change"]="",this._hideClone(),Jo(fs,this.options.chosenClass,!1),Nr.clone=fs),r.cloneId=Wg(function(){yl("clone",r),!Nr.eventCanceled&&(r.options.removeCloneOnHide||Ro.insertBefore(fs,Bn),r._hideClone(),Ja({sortable:r,name:"clone"}))}),!t&&Jo(Bn,s.dragClass,!0),t?(Lm=!0,r._loopId=setInterval(r._emulateDragOver,50)):(vi(document,"mouseup",r._onDrop),vi(document,"touchend",r._onDrop),vi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Bn)),Ci(document,"drop",r),sr(Bn,"transform","translateZ(0)")),Gh=!0,r._dragStartId=Wg(r._dragStarted.bind(r,t,n)),Ci(document,"selectstart",r),qd=!0,lp&&sr(document.body,"user-select","none")},_onDragOver:function(n){var t=this.el,r=n.target,i,s,o,u=this.options,f=u.group,d=Nr.active,m=Lg===f,_=u.sort,b=pa||d,y,M=this,k=!1;if(M1)return;function F(ie,_e){yl(ie,M,yc({evt:n,isOwner:m,axis:y?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:_,fromSortable:b,target:r,completed:R,onMove:function(Te,J){return Cg(Ro,t,Bn,i,Te,Fo(Te),n,J)},changed:Y},_e))}function I(){F("dragOverAnimationCapture"),M.captureAnimationState(),M!==b&&b.captureAnimationState()}function R(ie){return F("dragOverCompleted",{insertion:ie}),ie&&(m?d._hideClone():d._showClone(M),M!==b&&(Jo(Bn,pa?pa.options.ghostClass:d.options.ghostClass,!1),Jo(Bn,u.ghostClass,!0)),pa!==M&&M!==Nr.active?pa=M:M===Nr.active&&pa&&(pa=null),b===M&&(M._ignoreWhileAnimating=r),M.animateAll(function(){F("dragOverAnimationComplete"),M._ignoreWhileAnimating=null}),M!==b&&(b.animateAll(),b._ignoreWhileAnimating=null)),(r===Bn&&!Bn.animated||r===t&&!r.animated)&&(Bh=null),!u.dragoverBubble&&!n.rootEl&&r!==document&&(Bn.parentNode[Fa]._isOutsideThisEl(n.target),!ie&&Wf(n)),!u.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),k=!0}function Y(){Gl=ds(Bn),pf=ds(Bn,u.draggable),Ja({sortable:M,name:"change",toEl:t,newIndex:Gl,newDraggableIndex:pf,originalEvent:n})}if(n.preventDefault!==void 0&&n.cancelable&&n.preventDefault(),r=ju(r,u.draggable,t,!0),F("dragOver"),Nr.eventCanceled)return k;if(Bn.contains(n.target)||r.animated&&r.animatingX&&r.animatingY||M._ignoreWhileAnimating===r)return R(!1);if(Lm=!1,d&&!u.disabled&&(m?_||(o=cs!==Ro):pa===this||(this.lastPutMode=Lg.checkPull(this,d,Bn,n))&&f.checkPut(this,d,Bn,n))){if(y=this._getDirection(n,r)==="vertical",i=Fo(Bn),F("dragOverValid"),Nr.eventCanceled)return k;if(o)return cs=Ro,I(),this._hideClone(),F("revert"),Nr.eventCanceled||(Kf?Ro.insertBefore(Bn,Kf):Ro.appendChild(Bn)),R(!0);var ee=yy(t,u.draggable);if(!ee||VU(n,y,this)&&!ee.animated){if(ee===Bn)return R(!1);if(ee&&t===n.target&&(r=ee),r&&(s=Fo(r)),Cg(Ro,t,Bn,i,r,s,n,!!r)!==!1)return I(),t.appendChild(Bn),cs=t,Y(),R(!0)}else if(ee&&UU(n,y,this)){var he=hd(t,0,u,!0);if(he===Bn)return R(!1);if(r=he,s=Fo(r),Cg(Ro,t,Bn,i,r,s,n,!1)!==!1)return I(),t.insertBefore(Bn,he),cs=t,Y(),R(!0)}else if(r.parentNode===t){s=Fo(r);var fe=0,ve,$=Bn.parentNode!==t,U=!RU(Bn.animated&&Bn.toRect||i,r.animated&&r.toRect||s,y),Z=y?"top":"left",T=Wb(r,"top","top")||Wb(Bn,"top","top"),N=T?T.scrollTop:void 0;Bh!==r&&(ve=s[Z],hp=!1,Sg=!U&&u.invertSwap||$),fe=GU(n,r,s,y,U?1:u.swapThreshold,u.invertedSwapThreshold==null?u.swapThreshold:u.invertedSwapThreshold,Sg,Bh===r);var O;if(fe!==0){var z=ds(Bn);do z-=fe,O=cs.children[z];while(O&&(sr(O,"display")==="none"||O===ni))}if(fe===0||O===r)return R(!1);Bh=r,fp=fe;var q=r.nextElementSibling,G=!1;G=fe===1;var oe=Cg(Ro,t,Bn,i,r,s,n,G);if(oe!==!1)return(oe===1||oe===-1)&&(G=oe===1),M1=!0,setTimeout(zU,30),I(),G&&!q?t.appendChild(Bn):r.parentNode.insertBefore(Bn,G?q:r),T&&Ux(T,0,N-T.scrollTop),cs=Bn.parentNode,ve!==void 0&&!Sg&&(qg=Math.abs(ve-Fo(r)[Z])),Y(),R(!0)}if(t.contains(Bn))return R(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){vi(document,"mousemove",this._onTouchMove),vi(document,"touchmove",this._onTouchMove),vi(document,"pointermove",this._onTouchMove),vi(document,"dragover",Wf),vi(document,"mousemove",Wf),vi(document,"touchmove",Wf)},_offUpEvents:function(){var n=this.el.ownerDocument;vi(n,"mouseup",this._onDrop),vi(n,"touchend",this._onDrop),vi(n,"pointerup",this._onDrop),vi(n,"touchcancel",this._onDrop),vi(document,"selectstart",this)},_onDrop:function(n){var t=this.el,r=this.options;if(Gl=ds(Bn),pf=ds(Bn,r.draggable),yl("drop",this,{evt:n}),cs=Bn&&Bn.parentNode,Gl=ds(Bn),pf=ds(Bn,r.draggable),Nr.eventCanceled){this._nulling();return}Gh=!1,Sg=!1,hp=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),A1(this.cloneId),A1(this._dragStartId),this.nativeDraggable&&(vi(document,"drop",this),vi(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),lp&&sr(document.body,"user-select",""),sr(Bn,"transform",""),n&&(qd&&(n.cancelable&&n.preventDefault(),!r.dropBubble&&n.stopPropagation()),ni&&ni.parentNode&&ni.parentNode.removeChild(ni),(Ro===cs||pa&&pa.lastPutMode!=="clone")&&fs&&fs.parentNode&&fs.parentNode.removeChild(fs),Bn&&(this.nativeDraggable&&vi(Bn,"dragend",this),wv(Bn),Bn.style["will-change"]="",qd&&!Gh&&Jo(Bn,pa?pa.options.ghostClass:this.options.ghostClass,!1),Jo(Bn,this.options.chosenClass,!1),Ja({sortable:this,name:"unchoose",toEl:cs,newIndex:null,newDraggableIndex:null,originalEvent:n}),Ro!==cs?(Gl>=0&&(Ja({rootEl:cs,name:"add",toEl:cs,fromEl:Ro,originalEvent:n}),Ja({sortable:this,name:"remove",toEl:cs,originalEvent:n}),Ja({rootEl:cs,name:"sort",toEl:cs,fromEl:Ro,originalEvent:n}),Ja({sortable:this,name:"sort",toEl:cs,originalEvent:n})),pa&&pa.save()):Gl!==Wh&&Gl>=0&&(Ja({sortable:this,name:"update",toEl:cs,originalEvent:n}),Ja({sortable:this,name:"sort",toEl:cs,originalEvent:n})),Nr.active&&((Gl==null||Gl===-1)&&(Gl=Wh,pf=cp),Ja({sortable:this,name:"end",toEl:cs,originalEvent:n}),this.save()))),this._nulling()},_nulling:function(){yl("nulling",this),Ro=Bn=cs=ni=Kf=fs=Hg=gf=qf=Ou=qd=Gl=pf=Wh=cp=Bh=fp=pa=Lg=Nr.dragged=Nr.ghost=Nr.clone=Nr.active=null,Em.forEach(function(n){n.checked=!0}),Em.length=yv=_v=0},handleEvent:function(n){switch(n.type){case"drop":case"dragend":this._onDrop(n);break;case"dragenter":case"dragover":Bn&&(this._onDragOver(n),$U(n));break;case"selectstart":n.preventDefault();break}},toArray:function(){for(var n=[],t,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)t=r[i],ju(t,o.draggable,this.el,!1)&&n.push(t.getAttribute(o.dataIdAttr)||qU(t));return n},sort:function(n,t){var r={},i=this.el;this.toArray().forEach(function(s,o){var u=i.children[o];ju(u,this.options.draggable,i,!1)&&(r[s]=u)},this),t&&this.captureAnimationState(),n.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var n=this.options.store;n&&n.set&&n.set(this)},closest:function(n,t){return ju(n,t||this.options.draggable,this.el,!1)},option:function(n,t){var r=this.options;if(t===void 0)return r[n];var i=Fp.modifyOption(this,n,t);typeof i<"u"?r[n]=i:r[n]=t,n==="group"&&Hx(r)},destroy:function(){yl("destroy",this);var n=this.el;n[Fa]=null,vi(n,"mousedown",this._onTapStart),vi(n,"touchstart",this._onTapStart),vi(n,"pointerdown",this._onTapStart),this.nativeDraggable&&(vi(n,"dragover",this),vi(n,"dragenter",this)),Array.prototype.forEach.call(n.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Sm.splice(Sm.indexOf(this.el),1),this.el=n=null},_hideClone:function(){if(!gf){if(yl("hideClone",this),Nr.eventCanceled)return;sr(fs,"display","none"),this.options.removeCloneOnHide&&fs.parentNode&&fs.parentNode.removeChild(fs),gf=!0}},_showClone:function(n){if(n.lastPutMode!=="clone"){this._hideClone();return}if(gf){if(yl("showClone",this),Nr.eventCanceled)return;Bn.parentNode==Ro&&!this.options.group.revertClone?Ro.insertBefore(fs,Bn):Kf?Ro.insertBefore(fs,Kf):Ro.appendChild(fs),this.options.group.revertClone&&this.animate(Bn,fs),sr(fs,"display",""),gf=!1}}};function $U(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Cg(e,n,t,r,i,s,o,u){var f,d=e[Fa],m=d.options.onMove,_;return window.CustomEvent&&!Wc&&!Rp?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=n,f.from=e,f.dragged=t,f.draggedRect=r,f.related=i||n,f.relatedRect=s||Fo(n),f.willInsertAfter=u,f.originalEvent=o,e.dispatchEvent(f),m&&(_=m.call(d,f,o)),_}function wv(e){e.draggable=!1}function zU(){M1=!1}function UU(e,n,t){var r=Fo(hd(t.el,0,t.options,!0)),i=10;return n?e.clientX<r.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<r.top-i||e.clientY<r.bottom&&e.clientX<r.left}function VU(e,n,t){var r=Fo(yy(t.el,t.options.draggable)),i=10;return n?e.clientX>r.right+i||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+i}function GU(e,n,t,r,i,s,o,u){var f=r?e.clientY:e.clientX,d=r?t.height:t.width,m=r?t.top:t.left,_=r?t.bottom:t.right,b=!1;if(!o){if(u&&qg<d*i){if(!hp&&(fp===1?f>m+d*s/2:f<_-d*s/2)&&(hp=!0),hp)b=!0;else if(fp===1?f<m+qg:f>_-qg)return-fp}else if(f>m+d*(1-i)/2&&f<_-d*(1-i)/2)return HU(n)}return b=b||o,b&&(f<m+d*s/2||f>_-d*s/2)?f>m+d/2?1:-1:0}function HU(e){return ds(Bn)<ds(e)?1:-1}function qU(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,t=n.length,r=0;t--;)r+=n.charCodeAt(t);return r.toString(36)}function WU(e){Em.length=0;for(var n=e.getElementsByTagName("input"),t=n.length;t--;){var r=n[t];r.checked&&Em.push(r)}}function Wg(e){return setTimeout(e,0)}function A1(e){return clearTimeout(e)}s0&&Ci(document,"touchmove",function(e){(Nr.active||Gh)&&e.cancelable&&e.preventDefault()});Nr.utils={on:Ci,off:vi,css:sr,find:$x,is:function(n,t){return!!ju(n,t,n,!1)},extend:kU,throttle:zx,closest:ju,toggleClass:Jo,clone:_y,index:ds,nextTick:Wg,cancelNextTick:A1,detectDirection:Gx,getChild:hd};Nr.get=function(e){return e[Fa]};Nr.mount=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];n[0].constructor===Array&&(n=n[0]),n.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Nr.utils=yc(yc({},Nr.utils),r.utils)),Fp.mount(r)})};Nr.create=function(e,n){return new Nr(e,n)};Nr.version=CU;var Os=[],Wd,k1,T1=!1,xv,Lv,Cm,Zd;function ZU(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?Ci(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ci(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ci(document,"touchmove",this._handleFallbackAutoScroll):Ci(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?vi(document,"dragover",this._handleAutoScroll):(vi(document,"pointermove",this._handleFallbackAutoScroll),vi(document,"touchmove",this._handleFallbackAutoScroll),vi(document,"mousemove",this._handleFallbackAutoScroll)),Qb(),Zg(),TU()},nulling:function(){Cm=k1=Wd=T1=Zd=xv=Lv=null,Os.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,u=document.elementFromPoint(s,o);if(Cm=t,r||this.options.forceAutoScrollFallback||Rp||Wc||lp){Sv(t,this.options,u,r);var f=_f(u,!0);T1&&(!Zd||s!==xv||o!==Lv)&&(Zd&&Qb(),Zd=setInterval(function(){var d=_f(document.elementFromPoint(s,o),!0);d!==f&&(f=d,Zg()),Sv(t,i.options,d,r)},10),xv=s,Lv=o)}else{if(!this.options.bubbleScroll||_f(u,!0)===mc()){Zg();return}Sv(t,this.options,_f(u,!1),!1)}}},_u(e,{pluginName:"scroll",initializeByDefault:!0})}function Zg(){Os.forEach(function(e){clearInterval(e.pid)}),Os=[]}function Qb(){clearInterval(Zd)}var Sv=zx(function(e,n,t,r){if(n.scroll){var i=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,o=n.scrollSensitivity,u=n.scrollSpeed,f=mc(),d=!1,m;k1!==t&&(k1=t,Zg(),Wd=n.scroll,m=n.scrollFn,Wd===!0&&(Wd=_f(t,!0)));var _=0,b=Wd;do{var y=b,M=Fo(y),k=M.top,F=M.bottom,I=M.left,R=M.right,Y=M.width,ee=M.height,he=void 0,fe=void 0,ve=y.scrollWidth,$=y.scrollHeight,U=sr(y),Z=y.scrollLeft,T=y.scrollTop;y===f?(he=Y<ve&&(U.overflowX==="auto"||U.overflowX==="scroll"||U.overflowX==="visible"),fe=ee<$&&(U.overflowY==="auto"||U.overflowY==="scroll"||U.overflowY==="visible")):(he=Y<ve&&(U.overflowX==="auto"||U.overflowX==="scroll"),fe=ee<$&&(U.overflowY==="auto"||U.overflowY==="scroll"));var N=he&&(Math.abs(R-i)<=o&&Z+Y<ve)-(Math.abs(I-i)<=o&&!!Z),O=fe&&(Math.abs(F-s)<=o&&T+ee<$)-(Math.abs(k-s)<=o&&!!T);if(!Os[_])for(var z=0;z<=_;z++)Os[z]||(Os[z]={});(Os[_].vx!=N||Os[_].vy!=O||Os[_].el!==y)&&(Os[_].el=y,Os[_].vx=N,Os[_].vy=O,clearInterval(Os[_].pid),(N!=0||O!=0)&&(d=!0,Os[_].pid=setInterval((function(){r&&this.layer===0&&Nr.active._onTouchMove(Cm);var q=Os[this.layer].vy?Os[this.layer].vy*u:0,G=Os[this.layer].vx?Os[this.layer].vx*u:0;typeof m=="function"&&m.call(Nr.dragged.parentNode[Fa],G,q,e,Cm,Os[this.layer].el)!=="continue"||Ux(Os[this.layer].el,G,q)}).bind({layer:_}),24))),_++}while(n.bubbleScroll&&b!==f&&(b=_f(b,!1)));T1=d}},30),Zx=function(n){var t=n.originalEvent,r=n.putSortable,i=n.dragEl,s=n.activeSortable,o=n.dispatchSortableEvent,u=n.hideGhostForTarget,f=n.unhideGhostForTarget;if(t){var d=r||s;u();var m=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,_=document.elementFromPoint(m.clientX,m.clientY);f(),d&&!d.el.contains(_)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function by(){}by.prototype={startIndex:null,dragStart:function(n){var t=n.oldDraggableIndex;this.startIndex=t},onSpill:function(n){var t=n.dragEl,r=n.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=hd(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:Zx};_u(by,{pluginName:"revertOnSpill"});function wy(){}wy.prototype={onSpill:function(n){var t=n.dragEl,r=n.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:Zx};_u(wy,{pluginName:"removeOnSpill"});var cu;function KU(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(t){var r=t.dragEl;cu=r},dragOverValid:function(t){var r=t.completed,i=t.target,s=t.onMove,o=t.activeSortable,u=t.changed,f=t.cancel;if(o.options.swap){var d=this.sortable.el,m=this.options;if(i&&i!==d){var _=cu;s(i)!==!1?(Jo(i,m.swapClass,!0),cu=i):cu=null,_&&_!==cu&&Jo(_,m.swapClass,!1)}u(),r(!0),f()}},drop:function(t){var r=t.activeSortable,i=t.putSortable,s=t.dragEl,o=i||this.sortable,u=this.options;cu&&Jo(cu,u.swapClass,!1),cu&&(u.swap||i&&i.options.swap)&&s!==cu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),YU(s,cu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){cu=null}},_u(e,{pluginName:"swap",eventProperties:function(){return{swapItem:cu}}})}function YU(e,n){var t=e.parentNode,r=n.parentNode,i,s;!t||!r||t.isEqualNode(n)||r.isEqualNode(e)||(i=ds(e),s=ds(n),t.isEqualNode(r)&&i<s&&s++,t.insertBefore(n,t.children[i]),r.insertBefore(e,r.children[s]))}var qr=[],Vl=[],Bd,Bu,Rd=!1,_l=!1,Rh=!1,So,Fd,Pg;function JU(){function e(n){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));n.options.supportPointer?Ci(document,"pointerup",this._deselectMultiDrag):(Ci(document,"mouseup",this._deselectMultiDrag),Ci(document,"touchend",this._deselectMultiDrag)),Ci(document,"keydown",this._checkKeyDown),Ci(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";qr.length&&Bu===n?qr.forEach(function(u,f){o+=(f?", ":"")+u.textContent}):o=s.textContent,i.setData("Text",o)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;So=r},delayEnded:function(){this.isMultiDrag=~qr.indexOf(So)},setupClone:function(t){var r=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var s=0;s<qr.length;s++)Vl.push(_y(qr[s])),Vl[s].sortableIndex=qr[s].sortableIndex,Vl[s].draggable=!1,Vl[s].style["will-change"]="",Jo(Vl[s],this.options.selectedClass,!1),qr[s]===So&&Jo(Vl[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(t){var r=t.sortable,i=t.rootEl,s=t.dispatchSortableEvent,o=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||qr.length&&Bu===r&&(ew(!0,i),s("clone"),o()))},showClone:function(t){var r=t.cloneNowShown,i=t.rootEl,s=t.cancel;this.isMultiDrag&&(ew(!1,i),Vl.forEach(function(o){sr(o,"display","")}),r(),Pg=!1,s())},hideClone:function(t){var r=this;t.sortable;var i=t.cloneNowHidden,s=t.cancel;this.isMultiDrag&&(Vl.forEach(function(o){sr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),Pg=!0,s())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&Bu&&Bu.multiDrag._deselectMultiDrag(),qr.forEach(function(r){r.sortableIndex=ds(r)}),qr=qr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Rh=!0},dragStarted:function(t){var r=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){qr.forEach(function(o){o!==So&&sr(o,"position","absolute")});var s=Fo(So,!1,!0,!0);qr.forEach(function(o){o!==So&&Kb(o,s)}),_l=!0,Rd=!0}i.animateAll(function(){_l=!1,Rd=!1,r.options.animation&&qr.forEach(function(o){mv(o)}),r.options.sort&&Mg()})}},dragOver:function(t){var r=t.target,i=t.completed,s=t.cancel;_l&&~qr.indexOf(r)&&(i(!1),s())},revert:function(t){var r=t.fromSortable,i=t.rootEl,s=t.sortable,o=t.dragRect;qr.length>1&&(qr.forEach(function(u){s.addAnimationState({target:u,rect:_l?Fo(u):o}),mv(u),u.fromRect=o,r.removeAnimationState(u)}),_l=!1,XU(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var r=t.sortable,i=t.isOwner,s=t.insertion,o=t.activeSortable,u=t.parentEl,f=t.putSortable,d=this.options;if(s){if(i&&o._hideClone(),Rd=!1,d.animation&&qr.length>1&&(_l||!i&&!o.options.sort&&!f)){var m=Fo(So,!1,!0,!0);qr.forEach(function(b){b!==So&&(Kb(b,m),u.appendChild(b))}),_l=!0}if(!i)if(_l||Mg(),qr.length>1){var _=Pg;o._showClone(r),o.options.animation&&!Pg&&_&&Vl.forEach(function(b){o.addAnimationState({target:b,rect:Fd}),b.fromRect=Fd,b.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,i=t.isOwner,s=t.activeSortable;if(qr.forEach(function(u){u.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Fd=_u({},r);var o=ih(So,!0);Fd.top-=o.f,Fd.left-=o.e}},dragOverAnimationComplete:function(){_l&&(_l=!1,Mg())},drop:function(t){var r=t.originalEvent,i=t.rootEl,s=t.parentEl,o=t.sortable,u=t.dispatchSortableEvent,f=t.oldIndex,d=t.putSortable,m=d||this.sortable;if(r){var _=this.options,b=s.children;if(!Rh)if(_.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Jo(So,_.selectedClass,!~qr.indexOf(So)),~qr.indexOf(So))qr.splice(qr.indexOf(So),1),Bd=null,Hd({sortable:o,rootEl:i,name:"deselect",targetEl:So});else{if(qr.push(So),Hd({sortable:o,rootEl:i,name:"select",targetEl:So}),r.shiftKey&&Bd&&o.el.contains(Bd)){var y=ds(Bd),M=ds(So);if(~y&&~M&&y!==M){var k,F;for(M>y?(F=y,k=M):(F=M,k=y+1);F<k;F++)~qr.indexOf(b[F])||(Jo(b[F],_.selectedClass,!0),qr.push(b[F]),Hd({sortable:o,rootEl:i,name:"select",targetEl:b[F]}))}}else Bd=So;Bu=m}if(Rh&&this.isMultiDrag){if(_l=!1,(s[Fa].options.sort||s!==i)&&qr.length>1){var I=Fo(So),R=ds(So,":not(."+this.options.selectedClass+")");if(!Rd&&_.animation&&(So.thisAnimationDuration=null),m.captureAnimationState(),!Rd&&(_.animation&&(So.fromRect=I,qr.forEach(function(ee){if(ee.thisAnimationDuration=null,ee!==So){var he=_l?Fo(ee):I;ee.fromRect=he,m.addAnimationState({target:ee,rect:he})}})),Mg(),qr.forEach(function(ee){b[R]?s.insertBefore(ee,b[R]):s.appendChild(ee),R++}),f===ds(So))){var Y=!1;qr.forEach(function(ee){if(ee.sortableIndex!==ds(ee)){Y=!0;return}}),Y&&u("update")}qr.forEach(function(ee){mv(ee)}),m.animateAll()}Bu=m}(i===s||d&&d.lastPutMode!=="clone")&&Vl.forEach(function(ee){ee.parentNode&&ee.parentNode.removeChild(ee)})}},nullingGlobal:function(){this.isMultiDrag=Rh=!1,Vl.length=0},destroyGlobal:function(){this._deselectMultiDrag(),vi(document,"pointerup",this._deselectMultiDrag),vi(document,"mouseup",this._deselectMultiDrag),vi(document,"touchend",this._deselectMultiDrag),vi(document,"keydown",this._checkKeyDown),vi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof Rh<"u"&&Rh)&&Bu===this.sortable&&!(t&&ju(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;qr.length;){var r=qr[0];Jo(r,this.options.selectedClass,!1),qr.shift(),Hd({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_u(e,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[Fa];!r||!r.options.multiDrag||~qr.indexOf(t)||(Bu&&Bu!==r&&(Bu.multiDrag._deselectMultiDrag(),Bu=r),Jo(t,r.options.selectedClass,!0),qr.push(t))},deselect:function(t){var r=t.parentNode[Fa],i=qr.indexOf(t);!r||!r.options.multiDrag||!~i||(Jo(t,r.options.selectedClass,!1),qr.splice(i,1))}},eventProperties:function(){var t=this,r=[],i=[];return qr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;_l&&s!==So?o=-1:_l?o=ds(s,":not(."+t.options.selectedClass+")"):o=ds(s),i.push({multiDragElement:s,index:o})}),{items:wU(qr),clones:[].concat(Vl),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function XU(e,n){qr.forEach(function(t,r){var i=n.children[t.sortableIndex+(e?Number(r):0)];i?n.insertBefore(t,i):n.appendChild(t)})}function ew(e,n){Vl.forEach(function(t,r){var i=n.children[t.sortableIndex+(e?Number(r):0)];i?n.insertBefore(t,i):n.appendChild(t)})}function Mg(){qr.forEach(function(e){e!==So&&e.parentNode&&e.parentNode.removeChild(e)})}Nr.mount(new ZU);Nr.mount(wy,by);const QU=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:JU,Sortable:Nr,Swap:KU,default:Nr},Symbol.toStringTag,{value:"Module"})),eV=Y5(QU);(function(e,n){(function(r,i){e.exports=i(vU,eV)})(typeof self<"u"?self:ea,function(t,r){return function(i){var s={};function o(u){if(s[u])return s[u].exports;var f=s[u]={i:u,l:!1,exports:{}};return i[u].call(f.exports,f,f.exports,o),f.l=!0,f.exports}return o.m=i,o.c=s,o.d=function(u,f,d){o.o(u,f)||Object.defineProperty(u,f,{enumerable:!0,get:d})},o.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},o.t=function(u,f){if(f&1&&(u=o(u)),f&8||f&4&&typeof u=="object"&&u&&u.__esModule)return u;var d=Object.create(null);if(o.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:u}),f&2&&typeof u!="string")for(var m in u)o.d(d,m,(function(_){return u[_]}).bind(null,m));return d},o.n=function(u){var f=u&&u.__esModule?function(){return u.default}:function(){return u};return o.d(f,"a",f),f},o.o=function(u,f){return Object.prototype.hasOwnProperty.call(u,f)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var u=o("b622"),f=u("toStringTag"),d={};d[f]="z",i.exports=String(d)==="[object z]"},"0366":function(i,s,o){var u=o("1c0b");i.exports=function(f,d,m){if(u(f),d===void 0)return f;switch(m){case 0:return function(){return f.call(d)};case 1:return function(_){return f.call(d,_)};case 2:return function(_,b){return f.call(d,_,b)};case 3:return function(_,b,y){return f.call(d,_,b,y)}}return function(){return f.apply(d,arguments)}}},"057f":function(i,s,o){var u=o("fc6a"),f=o("241c").f,d={}.toString,m=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],_=function(b){try{return f(b)}catch{return m.slice()}};i.exports.f=function(y){return m&&d.call(y)=="[object Window]"?_(y):f(u(y))}},"06cf":function(i,s,o){var u=o("83ab"),f=o("d1e7"),d=o("5c6c"),m=o("fc6a"),_=o("c04e"),b=o("5135"),y=o("0cfb"),M=Object.getOwnPropertyDescriptor;s.f=u?M:function(F,I){if(F=m(F),I=_(I,!0),y)try{return M(F,I)}catch{}if(b(F,I))return d(!f.f.call(F,I),F[I])}},"0cfb":function(i,s,o){var u=o("83ab"),f=o("d039"),d=o("cc12");i.exports=!u&&!f(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var u=o("23e7"),f=o("d58f").left,d=o("a640"),m=o("ae40"),_=d("reduce"),b=m("reduce",{1:0});u({target:"Array",proto:!0,forced:!_||!b},{reduce:function(M){return f(this,M,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var u=o("c6b6"),f=o("9263");i.exports=function(d,m){var _=d.exec;if(typeof _=="function"){var b=_.call(d,m);if(typeof b!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return b}if(u(d)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return f.call(d,m)}},"159b":function(i,s,o){var u=o("da84"),f=o("fdbc"),d=o("17c2"),m=o("9112");for(var _ in f){var b=u[_],y=b&&b.prototype;if(y&&y.forEach!==d)try{m(y,"forEach",d)}catch{y.forEach=d}}},"17c2":function(i,s,o){var u=o("b727").forEach,f=o("a640"),d=o("ae40"),m=f("forEach"),_=d("forEach");i.exports=!m||!_?function(y){return u(this,y,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var u=o("d066");i.exports=u("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var u=o("b622"),f=u("iterator"),d=!1;try{var m=0,_={next:function(){return{done:!!m++}},return:function(){d=!0}};_[f]=function(){return this},Array.from(_,function(){throw 2})}catch{}i.exports=function(b,y){if(!y&&!d)return!1;var M=!1;try{var k={};k[f]=function(){return{next:function(){return{done:M=!0}}}},b(k)}catch{}return M}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var u=o("d039"),f=o("b622"),d=o("2d00"),m=f("species");i.exports=function(_){return d>=51||!u(function(){var b=[],y=b.constructor={};return y[m]=function(){return{foo:1}},b[_](Boolean).foo!==1})}},"23cb":function(i,s,o){var u=o("a691"),f=Math.max,d=Math.min;i.exports=function(m,_){var b=u(m);return b<0?f(b+_,0):d(b,_)}},"23e7":function(i,s,o){var u=o("da84"),f=o("06cf").f,d=o("9112"),m=o("6eeb"),_=o("ce4e"),b=o("e893"),y=o("94ca");i.exports=function(M,k){var F=M.target,I=M.global,R=M.stat,Y,ee,he,fe,ve,$;if(I?ee=u:R?ee=u[F]||_(F,{}):ee=(u[F]||{}).prototype,ee)for(he in k){if(ve=k[he],M.noTargetGet?($=f(ee,he),fe=$&&$.value):fe=ee[he],Y=y(I?he:F+(R?".":"#")+he,M.forced),!Y&&fe!==void 0){if(typeof ve==typeof fe)continue;b(ve,fe)}(M.sham||fe&&fe.sham)&&d(ve,"sham",!0),m(ee,he,ve,M)}}},"241c":function(i,s,o){var u=o("ca84"),f=o("7839"),d=f.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(_){return u(_,d)}},"25f0":function(i,s,o){var u=o("6eeb"),f=o("825a"),d=o("d039"),m=o("ad6d"),_="toString",b=RegExp.prototype,y=b[_],M=d(function(){return y.call({source:"a",flags:"b"})!="/a/b"}),k=y.name!=_;(M||k)&&u(RegExp.prototype,_,function(){var I=f(this),R=String(I.source),Y=I.flags,ee=String(Y===void 0&&I instanceof RegExp&&!("flags"in b)?m.call(I):Y);return"/"+R+"/"+ee},{unsafe:!0})},"2ca0":function(i,s,o){var u=o("23e7"),f=o("06cf").f,d=o("50c4"),m=o("5a34"),_=o("1d80"),b=o("ab13"),y=o("c430"),M="".startsWith,k=Math.min,F=b("startsWith"),I=!y&&!F&&!!function(){var R=f(String.prototype,"startsWith");return R&&!R.writable}();u({target:"String",proto:!0,forced:!I&&!F},{startsWith:function(Y){var ee=String(_(this));m(Y);var he=d(k(arguments.length>1?arguments[1]:void 0,ee.length)),fe=String(Y);return M?M.call(ee,fe,he):ee.slice(he,he+fe.length)===fe}})},"2d00":function(i,s,o){var u=o("da84"),f=o("342f"),d=u.process,m=d&&d.versions,_=m&&m.v8,b,y;_?(b=_.split("."),y=b[0]+b[1]):f&&(b=f.match(/Edge\/(\d+)/),(!b||b[1]>=74)&&(b=f.match(/Chrome\/(\d+)/),b&&(y=b[1]))),i.exports=y&&+y},"342f":function(i,s,o){var u=o("d066");i.exports=u("navigator","userAgent")||""},"35a1":function(i,s,o){var u=o("f5df"),f=o("3f8c"),d=o("b622"),m=d("iterator");i.exports=function(_){if(_!=null)return _[m]||_["@@iterator"]||f[u(_)]}},"37e8":function(i,s,o){var u=o("83ab"),f=o("9bf2"),d=o("825a"),m=o("df75");i.exports=u?Object.defineProperties:function(b,y){d(b);for(var M=m(y),k=M.length,F=0,I;k>F;)f.f(b,I=M[F++],y[I]);return b}},"3bbe":function(i,s,o){var u=o("861d");i.exports=function(f){if(!u(f)&&f!==null)throw TypeError("Can't set "+String(f)+" as a prototype");return f}},"3ca3":function(i,s,o){var u=o("6547").charAt,f=o("69f3"),d=o("7dd0"),m="String Iterator",_=f.set,b=f.getterFor(m);d(String,"String",function(y){_(this,{type:m,string:String(y),index:0})},function(){var M=b(this),k=M.string,F=M.index,I;return F>=k.length?{value:void 0,done:!0}:(I=u(k,F),M.index+=I.length,{value:I,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var u=o("23e7"),f=o("17c2");u({target:"Array",proto:!0,forced:[].forEach!=f},{forEach:f})},"428f":function(i,s,o){var u=o("da84");i.exports=u},"44ad":function(i,s,o){var u=o("d039"),f=o("c6b6"),d="".split;i.exports=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(m){return f(m)=="String"?d.call(m,""):Object(m)}:Object},"44d2":function(i,s,o){var u=o("b622"),f=o("7c73"),d=o("9bf2"),m=u("unscopables"),_=Array.prototype;_[m]==null&&d.f(_,m,{configurable:!0,value:f(null)}),i.exports=function(b){_[m][b]=!0}},"44e7":function(i,s,o){var u=o("861d"),f=o("c6b6"),d=o("b622"),m=d("match");i.exports=function(_){var b;return u(_)&&((b=_[m])!==void 0?!!b:f(_)=="RegExp")}},4930:function(i,s,o){var u=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!u(function(){return!String(Symbol())})},"4d64":function(i,s,o){var u=o("fc6a"),f=o("50c4"),d=o("23cb"),m=function(_){return function(b,y,M){var k=u(b),F=f(k.length),I=d(M,F),R;if(_&&y!=y){for(;F>I;)if(R=k[I++],R!=R)return!0}else for(;F>I;I++)if((_||I in k)&&k[I]===y)return _||I||0;return!_&&-1}};i.exports={includes:m(!0),indexOf:m(!1)}},"4de4":function(i,s,o){var u=o("23e7"),f=o("b727").filter,d=o("1dde"),m=o("ae40"),_=d("filter"),b=m("filter");u({target:"Array",proto:!0,forced:!_||!b},{filter:function(M){return f(this,M,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var u=o("0366"),f=o("7b0b"),d=o("9bdd"),m=o("e95a"),_=o("50c4"),b=o("8418"),y=o("35a1");i.exports=function(k){var F=f(k),I=typeof this=="function"?this:Array,R=arguments.length,Y=R>1?arguments[1]:void 0,ee=Y!==void 0,he=y(F),fe=0,ve,$,U,Z,T,N;if(ee&&(Y=u(Y,R>2?arguments[2]:void 0,2)),he!=null&&!(I==Array&&m(he)))for(Z=he.call(F),T=Z.next,$=new I;!(U=T.call(Z)).done;fe++)N=ee?d(Z,Y,[U.value,fe],!0):U.value,b($,fe,N);else for(ve=_(F.length),$=new I(ve);ve>fe;fe++)N=ee?Y(F[fe],fe):F[fe],b($,fe,N);return $.length=fe,$}},"4fad":function(i,s,o){var u=o("23e7"),f=o("6f53").entries;u({target:"Object",stat:!0},{entries:function(m){return f(m)}})},"50c4":function(i,s,o){var u=o("a691"),f=Math.min;i.exports=function(d){return d>0?f(u(d),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(u,f){return o.call(u,f)}},5319:function(i,s,o){var u=o("d784"),f=o("825a"),d=o("7b0b"),m=o("50c4"),_=o("a691"),b=o("1d80"),y=o("8aa5"),M=o("14c3"),k=Math.max,F=Math.min,I=Math.floor,R=/\$([$&'`]|\d\d?|<[^>]*>)/g,Y=/\$([$&'`]|\d\d?)/g,ee=function(he){return he===void 0?he:String(he)};u("replace",2,function(he,fe,ve,$){var U=$.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Z=$.REPLACE_KEEPS_$0,T=U?"$":"$0";return[function(z,q){var G=b(this),oe=z==null?void 0:z[he];return oe!==void 0?oe.call(z,G,q):fe.call(String(G),z,q)},function(O,z){if(!U&&Z||typeof z=="string"&&z.indexOf(T)===-1){var q=ve(fe,O,this,z);if(q.done)return q.value}var G=f(O),oe=String(this),ie=typeof z=="function";ie||(z=String(z));var _e=G.global;if(_e){var Ce=G.unicode;G.lastIndex=0}for(var Te=[];;){var J=M(G,oe);if(J===null||(Te.push(J),!_e))break;var H=String(J[0]);H===""&&(G.lastIndex=y(oe,m(G.lastIndex),Ce))}for(var Q="",ue=0,se=0;se<Te.length;se++){J=Te[se];for(var pe=String(J[0]),K=k(F(_(J.index),oe.length),0),D=[],ke=1;ke<J.length;ke++)D.push(ee(J[ke]));var Me=J.groups;if(ie){var Ge=[pe].concat(D,K,oe);Me!==void 0&&Ge.push(Me);var ce=String(z.apply(void 0,Ge))}else ce=N(pe,oe,K,D,Me,z);K>=ue&&(Q+=oe.slice(ue,K)+ce,ue=K+pe.length)}return Q+oe.slice(ue)}];function N(O,z,q,G,oe,ie){var _e=q+O.length,Ce=G.length,Te=Y;return oe!==void 0&&(oe=d(oe),Te=R),fe.call(ie,Te,function(J,H){var Q;switch(H.charAt(0)){case"$":return"$";case"&":return O;case"`":return z.slice(0,q);case"'":return z.slice(_e);case"<":Q=oe[H.slice(1,-1)];break;default:var ue=+H;if(ue===0)return J;if(ue>Ce){var se=I(ue/10);return se===0?J:se<=Ce?G[se-1]===void 0?H.charAt(1):G[se-1]+H.charAt(1):J}Q=G[ue-1]}return Q===void 0?"":Q})}})},5692:function(i,s,o){var u=o("c430"),f=o("c6cd");(i.exports=function(d,m){return f[d]||(f[d]=m!==void 0?m:{})})("versions",[]).push({version:"3.6.5",mode:u?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var u=o("d066"),f=o("241c"),d=o("7418"),m=o("825a");i.exports=u("Reflect","ownKeys")||function(b){var y=f.f(m(b)),M=d.f;return M?y.concat(M(b)):y}},"5a34":function(i,s,o){var u=o("44e7");i.exports=function(f){if(u(f))throw TypeError("The method doesn't accept regular expressions");return f}},"5c6c":function(i,s){i.exports=function(o,u){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:u}}},"5db7":function(i,s,o){var u=o("23e7"),f=o("a2bf"),d=o("7b0b"),m=o("50c4"),_=o("1c0b"),b=o("65f0");u({target:"Array",proto:!0},{flatMap:function(M){var k=d(this),F=m(k.length),I;return _(M),I=b(k,0),I.length=f(I,k,k,F,0,1,M,arguments.length>1?arguments[1]:void 0),I}})},6547:function(i,s,o){var u=o("a691"),f=o("1d80"),d=function(m){return function(_,b){var y=String(f(_)),M=u(b),k=y.length,F,I;return M<0||M>=k?m?"":void 0:(F=y.charCodeAt(M),F<55296||F>56319||M+1===k||(I=y.charCodeAt(M+1))<56320||I>57343?m?y.charAt(M):F:m?y.slice(M,M+2):(F-55296<<10)+(I-56320)+65536)}};i.exports={codeAt:d(!1),charAt:d(!0)}},"65f0":function(i,s,o){var u=o("861d"),f=o("e8b5"),d=o("b622"),m=d("species");i.exports=function(_,b){var y;return f(_)&&(y=_.constructor,typeof y=="function"&&(y===Array||f(y.prototype))?y=void 0:u(y)&&(y=y[m],y===null&&(y=void 0))),new(y===void 0?Array:y)(b===0?0:b)}},"69f3":function(i,s,o){var u=o("7f9a"),f=o("da84"),d=o("861d"),m=o("9112"),_=o("5135"),b=o("f772"),y=o("d012"),M=f.WeakMap,k,F,I,R=function(U){return I(U)?F(U):k(U,{})},Y=function(U){return function(Z){var T;if(!d(Z)||(T=F(Z)).type!==U)throw TypeError("Incompatible receiver, "+U+" required");return T}};if(u){var ee=new M,he=ee.get,fe=ee.has,ve=ee.set;k=function(U,Z){return ve.call(ee,U,Z),Z},F=function(U){return he.call(ee,U)||{}},I=function(U){return fe.call(ee,U)}}else{var $=b("state");y[$]=!0,k=function(U,Z){return m(U,$,Z),Z},F=function(U){return _(U,$)?U[$]:{}},I=function(U){return _(U,$)}}i.exports={set:k,get:F,has:I,enforce:R,getterFor:Y}},"6eeb":function(i,s,o){var u=o("da84"),f=o("9112"),d=o("5135"),m=o("ce4e"),_=o("8925"),b=o("69f3"),y=b.get,M=b.enforce,k=String(String).split("String");(i.exports=function(F,I,R,Y){var ee=Y?!!Y.unsafe:!1,he=Y?!!Y.enumerable:!1,fe=Y?!!Y.noTargetGet:!1;if(typeof R=="function"&&(typeof I=="string"&&!d(R,"name")&&f(R,"name",I),M(R).source=k.join(typeof I=="string"?I:"")),F===u){he?F[I]=R:m(I,R);return}else ee?!fe&&F[I]&&(he=!0):delete F[I];he?F[I]=R:f(F,I,R)})(Function.prototype,"toString",function(){return typeof this=="function"&&y(this).source||_(this)})},"6f53":function(i,s,o){var u=o("83ab"),f=o("df75"),d=o("fc6a"),m=o("d1e7").f,_=function(b){return function(y){for(var M=d(y),k=f(M),F=k.length,I=0,R=[],Y;F>I;)Y=k[I++],(!u||m.call(M,Y))&&R.push(b?[Y,M[Y]]:M[Y]);return R}};i.exports={entries:_(!0),values:_(!1)}},"73d9":function(i,s,o){var u=o("44d2");u("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var u=o("428f"),f=o("5135"),d=o("e538"),m=o("9bf2").f;i.exports=function(_){var b=u.Symbol||(u.Symbol={});f(b,_)||m(b,_,{value:d.f(_)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var u=o("1d80");i.exports=function(f){return Object(u(f))}},"7c73":function(i,s,o){var u=o("825a"),f=o("37e8"),d=o("7839"),m=o("d012"),_=o("1be4"),b=o("cc12"),y=o("f772"),M=">",k="<",F="prototype",I="script",R=y("IE_PROTO"),Y=function(){},ee=function(U){return k+I+M+U+k+"/"+I+M},he=function(U){U.write(ee("")),U.close();var Z=U.parentWindow.Object;return U=null,Z},fe=function(){var U=b("iframe"),Z="java"+I+":",T;return U.style.display="none",_.appendChild(U),U.src=String(Z),T=U.contentWindow.document,T.open(),T.write(ee("document.F=Object")),T.close(),T.F},ve,$=function(){try{ve=document.domain&&new ActiveXObject("htmlfile")}catch{}$=ve?he(ve):fe();for(var U=d.length;U--;)delete $[F][d[U]];return $()};m[R]=!0,i.exports=Object.create||function(Z,T){var N;return Z!==null?(Y[F]=u(Z),N=new Y,Y[F]=null,N[R]=Z):N=$(),T===void 0?N:f(N,T)}},"7dd0":function(i,s,o){var u=o("23e7"),f=o("9ed3"),d=o("e163"),m=o("d2bb"),_=o("d44e"),b=o("9112"),y=o("6eeb"),M=o("b622"),k=o("c430"),F=o("3f8c"),I=o("ae93"),R=I.IteratorPrototype,Y=I.BUGGY_SAFARI_ITERATORS,ee=M("iterator"),he="keys",fe="values",ve="entries",$=function(){return this};i.exports=function(U,Z,T,N,O,z,q){f(T,Z,N);var G=function(se){if(se===O&&Te)return Te;if(!Y&&se in _e)return _e[se];switch(se){case he:return function(){return new T(this,se)};case fe:return function(){return new T(this,se)};case ve:return function(){return new T(this,se)}}return function(){return new T(this)}},oe=Z+" Iterator",ie=!1,_e=U.prototype,Ce=_e[ee]||_e["@@iterator"]||O&&_e[O],Te=!Y&&Ce||G(O),J=Z=="Array"&&_e.entries||Ce,H,Q,ue;if(J&&(H=d(J.call(new U)),R!==Object.prototype&&H.next&&(!k&&d(H)!==R&&(m?m(H,R):typeof H[ee]!="function"&&b(H,ee,$)),_(H,oe,!0,!0),k&&(F[oe]=$))),O==fe&&Ce&&Ce.name!==fe&&(ie=!0,Te=function(){return Ce.call(this)}),(!k||q)&&_e[ee]!==Te&&b(_e,ee,Te),F[Z]=Te,O)if(Q={values:G(fe),keys:z?Te:G(he),entries:G(ve)},q)for(ue in Q)(Y||ie||!(ue in _e))&&y(_e,ue,Q[ue]);else u({target:Z,proto:!0,forced:Y||ie},Q);return Q}},"7f9a":function(i,s,o){var u=o("da84"),f=o("8925"),d=u.WeakMap;i.exports=typeof d=="function"&&/native code/.test(f(d))},"825a":function(i,s,o){var u=o("861d");i.exports=function(f){if(!u(f))throw TypeError(String(f)+" is not an object");return f}},"83ab":function(i,s,o){var u=o("d039");i.exports=!u(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var u=o("c04e"),f=o("9bf2"),d=o("5c6c");i.exports=function(m,_,b){var y=u(_);y in m?f.f(m,y,d(0,b)):m[y]=b}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var u,f,d;(function(m,_){f=[],u=_,d=typeof u=="function"?u.apply(s,f):u,d!==void 0&&(i.exports=d)})(typeof self<"u"?self:this,function(){function m(){var _=Object.getOwnPropertyDescriptor(document,"currentScript");if(!_&&"currentScript"in document&&document.currentScript||_&&_.get!==m&&document.currentScript)return document.currentScript;try{throw new Error}catch(ve){var b=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,y=/@([^@]*):(\d+):(\d+)\s*$/ig,M=b.exec(ve.stack)||y.exec(ve.stack),k=M&&M[1]||!1,F=M&&M[2]||!1,I=document.location.href.replace(document.location.hash,""),R,Y,ee,he=document.getElementsByTagName("script");k===I&&(R=document.documentElement.outerHTML,Y=new RegExp("(?:[^\\n]+?\\n){0,"+(F-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),ee=R.replace(Y,"$1").trim());for(var fe=0;fe<he.length;fe++)if(he[fe].readyState==="interactive"||he[fe].src===k||k===I&&he[fe].innerHTML&&he[fe].innerHTML.trim()===ee)return he[fe];return null}}return m})},8925:function(i,s,o){var u=o("c6cd"),f=Function.toString;typeof u.inspectSource!="function"&&(u.inspectSource=function(d){return f.call(d)}),i.exports=u.inspectSource},"8aa5":function(i,s,o){var u=o("6547").charAt;i.exports=function(f,d,m){return d+(m?u(f,d).length:1)}},"8bbf":function(i,s){i.exports=t},"90e3":function(i,s){var o=0,u=Math.random();i.exports=function(f){return"Symbol("+String(f===void 0?"":f)+")_"+(++o+u).toString(36)}},9112:function(i,s,o){var u=o("83ab"),f=o("9bf2"),d=o("5c6c");i.exports=u?function(m,_,b){return f.f(m,_,d(1,b))}:function(m,_,b){return m[_]=b,m}},9263:function(i,s,o){var u=o("ad6d"),f=o("9f7f"),d=RegExp.prototype.exec,m=String.prototype.replace,_=d,b=function(){var F=/a/,I=/b*/g;return d.call(F,"a"),d.call(I,"a"),F.lastIndex!==0||I.lastIndex!==0}(),y=f.UNSUPPORTED_Y||f.BROKEN_CARET,M=/()??/.exec("")[1]!==void 0,k=b||M||y;k&&(_=function(I){var R=this,Y,ee,he,fe,ve=y&&R.sticky,$=u.call(R),U=R.source,Z=0,T=I;return ve&&($=$.replace("y",""),$.indexOf("g")===-1&&($+="g"),T=String(I).slice(R.lastIndex),R.lastIndex>0&&(!R.multiline||R.multiline&&I[R.lastIndex-1]!==`
`)&&(U="(?: "+U+")",T=" "+T,Z++),ee=new RegExp("^(?:"+U+")",$)),M&&(ee=new RegExp("^"+U+"$(?!\\s)",$)),b&&(Y=R.lastIndex),he=d.call(ve?ee:R,T),ve?he?(he.input=he.input.slice(Z),he[0]=he[0].slice(Z),he.index=R.lastIndex,R.lastIndex+=he[0].length):R.lastIndex=0:b&&he&&(R.lastIndex=R.global?he.index+he[0].length:Y),M&&he&&he.length>1&&m.call(he[0],ee,function(){for(fe=1;fe<arguments.length-2;fe++)arguments[fe]===void 0&&(he[fe]=void 0)}),he}),i.exports=_},"94ca":function(i,s,o){var u=o("d039"),f=/#|\.prototype\./,d=function(M,k){var F=_[m(M)];return F==y?!0:F==b?!1:typeof k=="function"?u(k):!!k},m=d.normalize=function(M){return String(M).replace(f,".").toLowerCase()},_=d.data={},b=d.NATIVE="N",y=d.POLYFILL="P";i.exports=d},"99af":function(i,s,o){var u=o("23e7"),f=o("d039"),d=o("e8b5"),m=o("861d"),_=o("7b0b"),b=o("50c4"),y=o("8418"),M=o("65f0"),k=o("1dde"),F=o("b622"),I=o("2d00"),R=F("isConcatSpreadable"),Y=9007199254740991,ee="Maximum allowed index exceeded",he=I>=51||!f(function(){var U=[];return U[R]=!1,U.concat()[0]!==U}),fe=k("concat"),ve=function(U){if(!m(U))return!1;var Z=U[R];return Z!==void 0?!!Z:d(U)},$=!he||!fe;u({target:"Array",proto:!0,forced:$},{concat:function(Z){var T=_(this),N=M(T,0),O=0,z,q,G,oe,ie;for(z=-1,G=arguments.length;z<G;z++)if(ie=z===-1?T:arguments[z],ve(ie)){if(oe=b(ie.length),O+oe>Y)throw TypeError(ee);for(q=0;q<oe;q++,O++)q in ie&&y(N,O,ie[q])}else{if(O>=Y)throw TypeError(ee);y(N,O++,ie)}return N.length=O,N}})},"9bdd":function(i,s,o){var u=o("825a");i.exports=function(f,d,m,_){try{return _?d(u(m)[0],m[1]):d(m)}catch(y){var b=f.return;throw b!==void 0&&u(b.call(f)),y}}},"9bf2":function(i,s,o){var u=o("83ab"),f=o("0cfb"),d=o("825a"),m=o("c04e"),_=Object.defineProperty;s.f=u?_:function(y,M,k){if(d(y),M=m(M,!0),d(k),f)try{return _(y,M,k)}catch{}if("get"in k||"set"in k)throw TypeError("Accessors not supported");return"value"in k&&(y[M]=k.value),y}},"9ed3":function(i,s,o){var u=o("ae93").IteratorPrototype,f=o("7c73"),d=o("5c6c"),m=o("d44e"),_=o("3f8c"),b=function(){return this};i.exports=function(y,M,k){var F=M+" Iterator";return y.prototype=f(u,{next:d(1,k)}),m(y,F,!1,!0),_[F]=b,y}},"9f7f":function(i,s,o){var u=o("d039");function f(d,m){return RegExp(d,m)}s.UNSUPPORTED_Y=u(function(){var d=f("a","y");return d.lastIndex=2,d.exec("abcd")!=null}),s.BROKEN_CARET=u(function(){var d=f("^r","gy");return d.lastIndex=2,d.exec("str")!=null})},a2bf:function(i,s,o){var u=o("e8b5"),f=o("50c4"),d=o("0366"),m=function(_,b,y,M,k,F,I,R){for(var Y=k,ee=0,he=I?d(I,R,3):!1,fe;ee<M;){if(ee in y){if(fe=he?he(y[ee],ee,b):y[ee],F>0&&u(fe))Y=m(_,b,fe,f(fe.length),Y,F-1)-1;else{if(Y>=9007199254740991)throw TypeError("Exceed the acceptable array length");_[Y]=fe}Y++}ee++}return Y};i.exports=m},a352:function(i,s){i.exports=r},a434:function(i,s,o){var u=o("23e7"),f=o("23cb"),d=o("a691"),m=o("50c4"),_=o("7b0b"),b=o("65f0"),y=o("8418"),M=o("1dde"),k=o("ae40"),F=M("splice"),I=k("splice",{ACCESSORS:!0,0:0,1:2}),R=Math.max,Y=Math.min,ee=9007199254740991,he="Maximum allowed length exceeded";u({target:"Array",proto:!0,forced:!F||!I},{splice:function(ve,$){var U=_(this),Z=m(U.length),T=f(ve,Z),N=arguments.length,O,z,q,G,oe,ie;if(N===0?O=z=0:N===1?(O=0,z=Z-T):(O=N-2,z=Y(R(d($),0),Z-T)),Z+O-z>ee)throw TypeError(he);for(q=b(U,z),G=0;G<z;G++)oe=T+G,oe in U&&y(q,G,U[oe]);if(q.length=z,O<z){for(G=T;G<Z-z;G++)oe=G+z,ie=G+O,oe in U?U[ie]=U[oe]:delete U[ie];for(G=Z;G>Z-z+O;G--)delete U[G-1]}else if(O>z)for(G=Z-z;G>T;G--)oe=G+z-1,ie=G+O-1,oe in U?U[ie]=U[oe]:delete U[ie];for(G=0;G<O;G++)U[G+T]=arguments[G+2];return U.length=Z-z+O,q}})},a4d3:function(i,s,o){var u=o("23e7"),f=o("da84"),d=o("d066"),m=o("c430"),_=o("83ab"),b=o("4930"),y=o("fdbf"),M=o("d039"),k=o("5135"),F=o("e8b5"),I=o("861d"),R=o("825a"),Y=o("7b0b"),ee=o("fc6a"),he=o("c04e"),fe=o("5c6c"),ve=o("7c73"),$=o("df75"),U=o("241c"),Z=o("057f"),T=o("7418"),N=o("06cf"),O=o("9bf2"),z=o("d1e7"),q=o("9112"),G=o("6eeb"),oe=o("5692"),ie=o("f772"),_e=o("d012"),Ce=o("90e3"),Te=o("b622"),J=o("e538"),H=o("746f"),Q=o("d44e"),ue=o("69f3"),se=o("b727").forEach,pe=ie("hidden"),K="Symbol",D="prototype",ke=Te("toPrimitive"),Me=ue.set,Ge=ue.getterFor(K),ce=Object[D],te=f.Symbol,ye=d("JSON","stringify"),de=N.f,We=O.f,He=Z.f,tt=z.f,Ze=oe("symbols"),et=oe("op-symbols"),ze=oe("string-to-symbol-registry"),wt=oe("symbol-to-string-registry"),Pt=oe("wks"),kt=f.QObject,Jt=!kt||!kt[D]||!kt[D].findChild,on=_&&M(function(){return ve(We({},"a",{get:function(){return We(this,"a",{value:7}).a}})).a!=7})?function(En,jn,An){var Yn=de(ce,jn);Yn&&delete ce[jn],We(En,jn,An),Yn&&En!==ce&&We(ce,jn,Yn)}:We,cn=function(En,jn){var An=Ze[En]=ve(te[D]);return Me(An,{type:K,tag:En,description:jn}),_||(An.description=jn),An},Ke=y?function(En){return typeof En=="symbol"}:function(En){return Object(En)instanceof te},ot=function(jn,An,Yn){jn===ce&&ot(et,An,Yn),R(jn);var wr=he(An,!0);return R(Yn),k(Ze,wr)?(Yn.enumerable?(k(jn,pe)&&jn[pe][wr]&&(jn[pe][wr]=!1),Yn=ve(Yn,{enumerable:fe(0,!1)})):(k(jn,pe)||We(jn,pe,fe(1,{})),jn[pe][wr]=!0),on(jn,wr,Yn)):We(jn,wr,Yn)},rt=function(jn,An){R(jn);var Yn=ee(An),wr=$(Yn).concat(Dn(Yn));return se(wr,function(Or){(!_||Qt.call(Yn,Or))&&ot(jn,Or,Yn[Or])}),jn},$t=function(jn,An){return An===void 0?ve(jn):rt(ve(jn),An)},Qt=function(jn){var An=he(jn,!0),Yn=tt.call(this,An);return this===ce&&k(Ze,An)&&!k(et,An)?!1:Yn||!k(this,An)||!k(Ze,An)||k(this,pe)&&this[pe][An]?Yn:!0},Rn=function(jn,An){var Yn=ee(jn),wr=he(An,!0);if(!(Yn===ce&&k(Ze,wr)&&!k(et,wr))){var Or=de(Yn,wr);return Or&&k(Ze,wr)&&!(k(Yn,pe)&&Yn[pe][wr])&&(Or.enumerable=!0),Or}},Ln=function(jn){var An=He(ee(jn)),Yn=[];return se(An,function(wr){!k(Ze,wr)&&!k(_e,wr)&&Yn.push(wr)}),Yn},Dn=function(jn){var An=jn===ce,Yn=He(An?et:ee(jn)),wr=[];return se(Yn,function(Or){k(Ze,Or)&&(!An||k(ce,Or))&&wr.push(Ze[Or])}),wr};if(b||(te=function(){if(this instanceof te)throw TypeError("Symbol is not a constructor");var jn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),An=Ce(jn),Yn=function(wr){this===ce&&Yn.call(et,wr),k(this,pe)&&k(this[pe],An)&&(this[pe][An]=!1),on(this,An,fe(1,wr))};return _&&Jt&&on(ce,An,{configurable:!0,set:Yn}),cn(An,jn)},G(te[D],"toString",function(){return Ge(this).tag}),G(te,"withoutSetter",function(En){return cn(Ce(En),En)}),z.f=Qt,O.f=ot,N.f=Rn,U.f=Z.f=Ln,T.f=Dn,J.f=function(En){return cn(Te(En),En)},_&&(We(te[D],"description",{configurable:!0,get:function(){return Ge(this).description}}),m||G(ce,"propertyIsEnumerable",Qt,{unsafe:!0}))),u({global:!0,wrap:!0,forced:!b,sham:!b},{Symbol:te}),se($(Pt),function(En){H(En)}),u({target:K,stat:!0,forced:!b},{for:function(En){var jn=String(En);if(k(ze,jn))return ze[jn];var An=te(jn);return ze[jn]=An,wt[An]=jn,An},keyFor:function(jn){if(!Ke(jn))throw TypeError(jn+" is not a symbol");if(k(wt,jn))return wt[jn]},useSetter:function(){Jt=!0},useSimple:function(){Jt=!1}}),u({target:"Object",stat:!0,forced:!b,sham:!_},{create:$t,defineProperty:ot,defineProperties:rt,getOwnPropertyDescriptor:Rn}),u({target:"Object",stat:!0,forced:!b},{getOwnPropertyNames:Ln,getOwnPropertySymbols:Dn}),u({target:"Object",stat:!0,forced:M(function(){T.f(1)})},{getOwnPropertySymbols:function(jn){return T.f(Y(jn))}}),ye){var ar=!b||M(function(){var En=te();return ye([En])!="[null]"||ye({a:En})!="{}"||ye(Object(En))!="{}"});u({target:"JSON",stat:!0,forced:ar},{stringify:function(jn,An,Yn){for(var wr=[jn],Or=1,gr;arguments.length>Or;)wr.push(arguments[Or++]);if(gr=An,!(!I(An)&&jn===void 0||Ke(jn)))return F(An)||(An=function(oi,ft){if(typeof gr=="function"&&(ft=gr.call(this,oi,ft)),!Ke(ft))return ft}),wr[1]=An,ye.apply(null,wr)}})}te[D][ke]||q(te[D],ke,te[D].valueOf),Q(te,K),_e[pe]=!0},a630:function(i,s,o){var u=o("23e7"),f=o("4df4"),d=o("1c7e"),m=!d(function(_){Array.from(_)});u({target:"Array",stat:!0,forced:m},{from:f})},a640:function(i,s,o){var u=o("d039");i.exports=function(f,d){var m=[][f];return!!m&&u(function(){m.call(null,d||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,u=Math.floor;i.exports=function(f){return isNaN(f=+f)?0:(f>0?u:o)(f)}},ab13:function(i,s,o){var u=o("b622"),f=u("match");i.exports=function(d){var m=/./;try{"/./"[d](m)}catch{try{return m[f]=!1,"/./"[d](m)}catch{}}return!1}},ac1f:function(i,s,o){var u=o("23e7"),f=o("9263");u({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},ad6d:function(i,s,o){var u=o("825a");i.exports=function(){var f=u(this),d="";return f.global&&(d+="g"),f.ignoreCase&&(d+="i"),f.multiline&&(d+="m"),f.dotAll&&(d+="s"),f.unicode&&(d+="u"),f.sticky&&(d+="y"),d}},ae40:function(i,s,o){var u=o("83ab"),f=o("d039"),d=o("5135"),m=Object.defineProperty,_={},b=function(y){throw y};i.exports=function(y,M){if(d(_,y))return _[y];M||(M={});var k=[][y],F=d(M,"ACCESSORS")?M.ACCESSORS:!1,I=d(M,0)?M[0]:b,R=d(M,1)?M[1]:void 0;return _[y]=!!k&&!f(function(){if(F&&!u)return!0;var Y={length:-1};F?m(Y,1,{enumerable:!0,get:b}):Y[1]=1,k.call(Y,I,R)})}},ae93:function(i,s,o){var u=o("e163"),f=o("9112"),d=o("5135"),m=o("b622"),_=o("c430"),b=m("iterator"),y=!1,M=function(){return this},k,F,I;[].keys&&(I=[].keys(),"next"in I?(F=u(u(I)),F!==Object.prototype&&(k=F)):y=!0),k==null&&(k={}),!_&&!d(k,b)&&f(k,b,M),i.exports={IteratorPrototype:k,BUGGY_SAFARI_ITERATORS:y}},b041:function(i,s,o){var u=o("00ee"),f=o("f5df");i.exports=u?{}.toString:function(){return"[object "+f(this)+"]"}},b0c0:function(i,s,o){var u=o("83ab"),f=o("9bf2").f,d=Function.prototype,m=d.toString,_=/^\s*function ([^ (]*)/,b="name";u&&!(b in d)&&f(d,b,{configurable:!0,get:function(){try{return m.call(this).match(_)[1]}catch{return""}}})},b622:function(i,s,o){var u=o("da84"),f=o("5692"),d=o("5135"),m=o("90e3"),_=o("4930"),b=o("fdbf"),y=f("wks"),M=u.Symbol,k=b?M:M&&M.withoutSetter||m;i.exports=function(F){return d(y,F)||(_&&d(M,F)?y[F]=M[F]:y[F]=k("Symbol."+F)),y[F]}},b64b:function(i,s,o){var u=o("23e7"),f=o("7b0b"),d=o("df75"),m=o("d039"),_=m(function(){d(1)});u({target:"Object",stat:!0,forced:_},{keys:function(y){return d(f(y))}})},b727:function(i,s,o){var u=o("0366"),f=o("44ad"),d=o("7b0b"),m=o("50c4"),_=o("65f0"),b=[].push,y=function(M){var k=M==1,F=M==2,I=M==3,R=M==4,Y=M==6,ee=M==5||Y;return function(he,fe,ve,$){for(var U=d(he),Z=f(U),T=u(fe,ve,3),N=m(Z.length),O=0,z=$||_,q=k?z(he,N):F?z(he,0):void 0,G,oe;N>O;O++)if((ee||O in Z)&&(G=Z[O],oe=T(G,O,U),M)){if(k)q[O]=oe;else if(oe)switch(M){case 3:return!0;case 5:return G;case 6:return O;case 2:b.call(q,G)}else if(R)return!1}return Y?-1:I||R?R:q}};i.exports={forEach:y(0),map:y(1),filter:y(2),some:y(3),every:y(4),find:y(5),findIndex:y(6)}},c04e:function(i,s,o){var u=o("861d");i.exports=function(f,d){if(!u(f))return f;var m,_;if(d&&typeof(m=f.toString)=="function"&&!u(_=m.call(f))||typeof(m=f.valueOf)=="function"&&!u(_=m.call(f))||!d&&typeof(m=f.toString)=="function"&&!u(_=m.call(f)))return _;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(u){return o.call(u).slice(8,-1)}},c6cd:function(i,s,o){var u=o("da84"),f=o("ce4e"),d="__core-js_shared__",m=u[d]||f(d,{});i.exports=m},c740:function(i,s,o){var u=o("23e7"),f=o("b727").findIndex,d=o("44d2"),m=o("ae40"),_="findIndex",b=!0,y=m(_);_ in[]&&Array(1)[_](function(){b=!1}),u({target:"Array",proto:!0,forced:b||!y},{findIndex:function(k){return f(this,k,arguments.length>1?arguments[1]:void 0)}}),d(_)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var u=o("23e7"),f=o("4d64").indexOf,d=o("a640"),m=o("ae40"),_=[].indexOf,b=!!_&&1/[1].indexOf(1,-0)<0,y=d("indexOf"),M=m("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:b||!y||!M},{indexOf:function(F){return b?_.apply(this,arguments)||0:f(this,F,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var u=o("5135"),f=o("fc6a"),d=o("4d64").indexOf,m=o("d012");i.exports=function(_,b){var y=f(_),M=0,k=[],F;for(F in y)!u(m,F)&&u(y,F)&&k.push(F);for(;b.length>M;)u(y,F=b[M++])&&(~d(k,F)||k.push(F));return k}},caad:function(i,s,o){var u=o("23e7"),f=o("4d64").includes,d=o("44d2"),m=o("ae40"),_=m("indexOf",{ACCESSORS:!0,1:0});u({target:"Array",proto:!0,forced:!_},{includes:function(y){return f(this,y,arguments.length>1?arguments[1]:void 0)}}),d("includes")},cc12:function(i,s,o){var u=o("da84"),f=o("861d"),d=u.document,m=f(d)&&f(d.createElement);i.exports=function(_){return m?d.createElement(_):{}}},ce4e:function(i,s,o){var u=o("da84"),f=o("9112");i.exports=function(d,m){try{f(u,d,m)}catch{u[d]=m}return m}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var u=o("428f"),f=o("da84"),d=function(m){return typeof m=="function"?m:void 0};i.exports=function(m,_){return arguments.length<2?d(u[m])||d(f[m]):u[m]&&u[m][_]||f[m]&&f[m][_]}},d1e7:function(i,s,o){var u={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,d=f&&!u.call({1:2},1);s.f=d?function(_){var b=f(this,_);return!!b&&b.enumerable}:u},d28b:function(i,s,o){var u=o("746f");u("iterator")},d2bb:function(i,s,o){var u=o("825a"),f=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var d=!1,m={},_;try{_=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,_.call(m,[]),d=m instanceof Array}catch{}return function(y,M){return u(y),f(M),d?_.call(y,M):y.__proto__=M,y}}():void 0)},d3b7:function(i,s,o){var u=o("00ee"),f=o("6eeb"),d=o("b041");u||f(Object.prototype,"toString",d,{unsafe:!0})},d44e:function(i,s,o){var u=o("9bf2").f,f=o("5135"),d=o("b622"),m=d("toStringTag");i.exports=function(_,b,y){_&&!f(_=y?_:_.prototype,m)&&u(_,m,{configurable:!0,value:b})}},d58f:function(i,s,o){var u=o("1c0b"),f=o("7b0b"),d=o("44ad"),m=o("50c4"),_=function(b){return function(y,M,k,F){u(M);var I=f(y),R=d(I),Y=m(I.length),ee=b?Y-1:0,he=b?-1:1;if(k<2)for(;;){if(ee in R){F=R[ee],ee+=he;break}if(ee+=he,b?ee<0:Y<=ee)throw TypeError("Reduce of empty array with no initial value")}for(;b?ee>=0:Y>ee;ee+=he)ee in R&&(F=M(F,R[ee],ee,I));return F}};i.exports={left:_(!1),right:_(!0)}},d784:function(i,s,o){o("ac1f");var u=o("6eeb"),f=o("d039"),d=o("b622"),m=o("9263"),_=o("9112"),b=d("species"),y=!f(function(){var R=/./;return R.exec=function(){var Y=[];return Y.groups={a:"7"},Y},"".replace(R,"$<a>")!=="7"}),M=function(){return"a".replace(/./,"$0")==="$0"}(),k=d("replace"),F=function(){return/./[k]?/./[k]("a","$0")==="":!1}(),I=!f(function(){var R=/(?:)/,Y=R.exec;R.exec=function(){return Y.apply(this,arguments)};var ee="ab".split(R);return ee.length!==2||ee[0]!=="a"||ee[1]!=="b"});i.exports=function(R,Y,ee,he){var fe=d(R),ve=!f(function(){var O={};return O[fe]=function(){return 7},""[R](O)!=7}),$=ve&&!f(function(){var O=!1,z=/a/;return R==="split"&&(z={},z.constructor={},z.constructor[b]=function(){return z},z.flags="",z[fe]=/./[fe]),z.exec=function(){return O=!0,null},z[fe](""),!O});if(!ve||!$||R==="replace"&&!(y&&M&&!F)||R==="split"&&!I){var U=/./[fe],Z=ee(fe,""[R],function(O,z,q,G,oe){return z.exec===m?ve&&!oe?{done:!0,value:U.call(z,q,G)}:{done:!0,value:O.call(q,z,G)}:{done:!1}},{REPLACE_KEEPS_$0:M,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:F}),T=Z[0],N=Z[1];u(String.prototype,R,T),u(RegExp.prototype,fe,Y==2?function(O,z){return N.call(O,this,z)}:function(O){return N.call(O,this)})}he&&_(RegExp.prototype[fe],"sham",!0)}},d81d:function(i,s,o){var u=o("23e7"),f=o("b727").map,d=o("1dde"),m=o("ae40"),_=d("map"),b=m("map");u({target:"Array",proto:!0,forced:!_||!b},{map:function(M){return f(this,M,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(u){var f=function(d){return d&&d.Math==Math&&d};i.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof u=="object"&&u)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var u=o("23e7"),f=o("83ab"),d=o("56ef"),m=o("fc6a"),_=o("06cf"),b=o("8418");u({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(M){for(var k=m(M),F=_.f,I=d(k),R={},Y=0,ee,he;I.length>Y;)he=F(k,ee=I[Y++]),he!==void 0&&b(R,ee,he);return R}})},dbf1:function(i,s,o){(function(u){o.d(s,"a",function(){return d});function f(){return typeof window<"u"?window.console:u.console}var d=f()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var u=o("da84"),f=o("fdbc"),d=o("e260"),m=o("9112"),_=o("b622"),b=_("iterator"),y=_("toStringTag"),M=d.values;for(var k in f){var F=u[k],I=F&&F.prototype;if(I){if(I[b]!==M)try{m(I,b,M)}catch{I[b]=M}if(I[y]||m(I,y,k),f[k]){for(var R in d)if(I[R]!==d[R])try{m(I,R,d[R])}catch{I[R]=d[R]}}}}},df75:function(i,s,o){var u=o("ca84"),f=o("7839");i.exports=Object.keys||function(m){return u(m,f)}},e01a:function(i,s,o){var u=o("23e7"),f=o("83ab"),d=o("da84"),m=o("5135"),_=o("861d"),b=o("9bf2").f,y=o("e893"),M=d.Symbol;if(f&&typeof M=="function"&&(!("description"in M.prototype)||M().description!==void 0)){var k={},F=function(){var fe=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),ve=this instanceof F?new M(fe):fe===void 0?M():M(fe);return fe===""&&(k[ve]=!0),ve};y(F,M);var I=F.prototype=M.prototype;I.constructor=F;var R=I.toString,Y=String(M("test"))=="Symbol(test)",ee=/^Symbol\((.*)\)[^)]+$/;b(I,"description",{configurable:!0,get:function(){var fe=_(this)?this.valueOf():this,ve=R.call(fe);if(m(k,fe))return"";var $=Y?ve.slice(7,-1):ve.replace(ee,"$1");return $===""?void 0:$}}),u({global:!0,forced:!0},{Symbol:F})}},e163:function(i,s,o){var u=o("5135"),f=o("7b0b"),d=o("f772"),m=o("e177"),_=d("IE_PROTO"),b=Object.prototype;i.exports=m?Object.getPrototypeOf:function(y){return y=f(y),u(y,_)?y[_]:typeof y.constructor=="function"&&y instanceof y.constructor?y.constructor.prototype:y instanceof Object?b:null}},e177:function(i,s,o){var u=o("d039");i.exports=!u(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},e260:function(i,s,o){var u=o("fc6a"),f=o("44d2"),d=o("3f8c"),m=o("69f3"),_=o("7dd0"),b="Array Iterator",y=m.set,M=m.getterFor(b);i.exports=_(Array,"Array",function(k,F){y(this,{type:b,target:u(k),index:0,kind:F})},function(){var k=M(this),F=k.target,I=k.kind,R=k.index++;return!F||R>=F.length?(k.target=void 0,{value:void 0,done:!0}):I=="keys"?{value:R,done:!1}:I=="values"?{value:F[R],done:!1}:{value:[R,F[R]],done:!1}},"values"),d.Arguments=d.Array,f("keys"),f("values"),f("entries")},e439:function(i,s,o){var u=o("23e7"),f=o("d039"),d=o("fc6a"),m=o("06cf").f,_=o("83ab"),b=f(function(){m(1)}),y=!_||b;u({target:"Object",stat:!0,forced:y,sham:!_},{getOwnPropertyDescriptor:function(k,F){return m(d(k),F)}})},e538:function(i,s,o){var u=o("b622");s.f=u},e893:function(i,s,o){var u=o("5135"),f=o("56ef"),d=o("06cf"),m=o("9bf2");i.exports=function(_,b){for(var y=f(b),M=m.f,k=d.f,F=0;F<y.length;F++){var I=y[F];u(_,I)||M(_,I,k(b,I))}}},e8b5:function(i,s,o){var u=o("c6b6");i.exports=Array.isArray||function(d){return u(d)=="Array"}},e95a:function(i,s,o){var u=o("b622"),f=o("3f8c"),d=u("iterator"),m=Array.prototype;i.exports=function(_){return _!==void 0&&(f.Array===_||m[d]===_)}},f5df:function(i,s,o){var u=o("00ee"),f=o("c6b6"),d=o("b622"),m=d("toStringTag"),_=f(function(){return arguments}())=="Arguments",b=function(y,M){try{return y[M]}catch{}};i.exports=u?f:function(y){var M,k,F;return y===void 0?"Undefined":y===null?"Null":typeof(k=b(M=Object(y),m))=="string"?k:_?f(M):(F=f(M))=="Object"&&typeof M.callee=="function"?"Arguments":F}},f772:function(i,s,o){var u=o("5692"),f=o("90e3"),d=u("keys");i.exports=function(m){return d[m]||(d[m]=f(m))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var u=window.document.currentScript;{var f=o("8875");u=f(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:f})}var d=u&&u.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);d&&(o.p=d[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function m(Ke,ot,rt){return ot in Ke?Object.defineProperty(Ke,ot,{value:rt,enumerable:!0,configurable:!0,writable:!0}):Ke[ot]=rt,Ke}function _(Ke,ot){var rt=Object.keys(Ke);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(Ke);ot&&($t=$t.filter(function(Qt){return Object.getOwnPropertyDescriptor(Ke,Qt).enumerable})),rt.push.apply(rt,$t)}return rt}function b(Ke){for(var ot=1;ot<arguments.length;ot++){var rt=arguments[ot]!=null?arguments[ot]:{};ot%2?_(Object(rt),!0).forEach(function($t){m(Ke,$t,rt[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ke,Object.getOwnPropertyDescriptors(rt)):_(Object(rt)).forEach(function($t){Object.defineProperty(Ke,$t,Object.getOwnPropertyDescriptor(rt,$t))})}return Ke}function y(Ke){if(Array.isArray(Ke))return Ke}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function M(Ke,ot){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ke)))){var rt=[],$t=!0,Qt=!1,Rn=void 0;try{for(var Ln=Ke[Symbol.iterator](),Dn;!($t=(Dn=Ln.next()).done)&&(rt.push(Dn.value),!(ot&&rt.length===ot));$t=!0);}catch(ar){Qt=!0,Rn=ar}finally{try{!$t&&Ln.return!=null&&Ln.return()}finally{if(Qt)throw Rn}}return rt}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function k(Ke,ot){(ot==null||ot>Ke.length)&&(ot=Ke.length);for(var rt=0,$t=new Array(ot);rt<ot;rt++)$t[rt]=Ke[rt];return $t}function F(Ke,ot){if(Ke){if(typeof Ke=="string")return k(Ke,ot);var rt=Object.prototype.toString.call(Ke).slice(8,-1);if(rt==="Object"&&Ke.constructor&&(rt=Ke.constructor.name),rt==="Map"||rt==="Set")return Array.from(Ke);if(rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return k(Ke,ot)}}function I(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R(Ke,ot){return y(Ke)||M(Ke,ot)||F(Ke,ot)||I()}function Y(Ke){if(Array.isArray(Ke))return k(Ke)}function ee(Ke){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ke))return Array.from(Ke)}function he(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fe(Ke){return Y(Ke)||ee(Ke)||F(Ke)||he()}var ve=o("a352"),$=o.n(ve);function U(Ke){Ke.parentElement!==null&&Ke.parentElement.removeChild(Ke)}function Z(Ke,ot,rt){var $t=rt===0?Ke.children[0]:Ke.children[rt-1].nextSibling;Ke.insertBefore(ot,$t)}var T=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function N(Ke){var ot=Object.create(null);return function($t){var Qt=ot[$t];return Qt||(ot[$t]=Ke($t))}}var O=/-(\w)/g,z=N(function(Ke){return Ke.replace(O,function(ot,rt){return rt.toUpperCase()})});o("5db7"),o("73d9");var q=["Start","Add","Remove","Update","End"],G=["Choose","Unchoose","Sort","Filter","Clone"],oe=["Move"],ie=[oe,q,G].flatMap(function(Ke){return Ke}).map(function(Ke){return"on".concat(Ke)}),_e={manage:oe,manageAndEmit:q,emit:G};function Ce(Ke){return ie.indexOf(Ke)!==-1}o("caad"),o("2ca0");var Te=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function J(Ke){return Te.includes(Ke)}function H(Ke){return["transition-group","TransitionGroup"].includes(Ke)}function Q(Ke){return["id","class","role","style"].includes(Ke)||Ke.startsWith("data-")||Ke.startsWith("aria-")||Ke.startsWith("on")}function ue(Ke){return Ke.reduce(function(ot,rt){var $t=R(rt,2),Qt=$t[0],Rn=$t[1];return ot[Qt]=Rn,ot},{})}function se(Ke){var ot=Ke.$attrs,rt=Ke.componentData,$t=rt===void 0?{}:rt,Qt=ue(Object.entries(ot).filter(function(Rn){var Ln=R(Rn,2),Dn=Ln[0];return Ln[1],Q(Dn)}));return b(b({},Qt),$t)}function pe(Ke){var ot=Ke.$attrs,rt=Ke.callBackBuilder,$t=ue(K(ot));Object.entries(rt).forEach(function(Rn){var Ln=R(Rn,2),Dn=Ln[0],ar=Ln[1];_e[Dn].forEach(function(En){$t["on".concat(En)]=ar(En)})});var Qt="[data-draggable]".concat($t.draggable||"");return b(b({},$t),{},{draggable:Qt})}function K(Ke){return Object.entries(Ke).filter(function(ot){var rt=R(ot,2),$t=rt[0];return rt[1],!Q($t)}).map(function(ot){var rt=R(ot,2),$t=rt[0],Qt=rt[1];return[z($t),Qt]}).filter(function(ot){var rt=R(ot,2),$t=rt[0];return rt[1],!Ce($t)})}o("c740");function D(Ke,ot){if(!(Ke instanceof ot))throw new TypeError("Cannot call a class as a function")}function ke(Ke,ot){for(var rt=0;rt<ot.length;rt++){var $t=ot[rt];$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Ke,$t.key,$t)}}function Me(Ke,ot,rt){return ot&&ke(Ke.prototype,ot),Ke}var Ge=function(ot){var rt=ot.el;return rt},ce=function(ot,rt){return ot.__draggable_context=rt},te=function(ot){return ot.__draggable_context},ye=function(){function Ke(ot){var rt=ot.nodes,$t=rt.header,Qt=rt.default,Rn=rt.footer,Ln=ot.root,Dn=ot.realList;D(this,Ke),this.defaultNodes=Qt,this.children=[].concat(fe($t),fe(Qt),fe(Rn)),this.externalComponent=Ln.externalComponent,this.rootTransition=Ln.transition,this.tag=Ln.tag,this.realList=Dn}return Me(Ke,[{key:"render",value:function(rt,$t){var Qt=this.tag,Rn=this.children,Ln=this._isRootComponent,Dn=Ln?{default:function(){return Rn}}:Rn;return rt(Qt,$t,Dn)}},{key:"updated",value:function(){var rt=this.defaultNodes,$t=this.realList;rt.forEach(function(Qt,Rn){ce(Ge(Qt),{element:$t[Rn],index:Rn})})}},{key:"getUnderlyingVm",value:function(rt){return te(rt)}},{key:"getVmIndexFromDomIndex",value:function(rt,$t){var Qt=this.defaultNodes,Rn=Qt.length,Ln=$t.children,Dn=Ln.item(rt);if(Dn===null)return Rn;var ar=te(Dn);if(ar)return ar.index;if(Rn===0)return 0;var En=Ge(Qt[0]),jn=fe(Ln).findIndex(function(An){return An===En});return rt<jn?0:Rn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ke}(),de=o("8bbf");function We(Ke,ot){var rt=Ke[ot];return rt?rt():[]}function He(Ke){var ot=Ke.$slots,rt=Ke.realList,$t=Ke.getKey,Qt=rt||[],Rn=["header","footer"].map(function(An){return We(ot,An)}),Ln=R(Rn,2),Dn=Ln[0],ar=Ln[1],En=ot.item;if(!En)throw new Error("draggable element must have an item slot");var jn=Qt.flatMap(function(An,Yn){return En({element:An,index:Yn}).map(function(wr){return wr.key=$t(An),wr.props=b(b({},wr.props||{}),{},{"data-draggable":!0}),wr})});if(jn.length!==Qt.length)throw new Error("Item slot must have only one child");return{header:Dn,footer:ar,default:jn}}function tt(Ke){var ot=H(Ke),rt=!J(Ke)&&!ot;return{transition:ot,externalComponent:rt,tag:rt?Object(de.resolveComponent)(Ke):ot?de.TransitionGroup:Ke}}function Ze(Ke){var ot=Ke.$slots,rt=Ke.tag,$t=Ke.realList,Qt=Ke.getKey,Rn=He({$slots:ot,realList:$t,getKey:Qt}),Ln=tt(rt);return new ye({nodes:Rn,root:Ln,realList:$t})}function et(Ke,ot){var rt=this;Object(de.nextTick)(function(){return rt.$emit(Ke.toLowerCase(),ot)})}function ze(Ke){var ot=this;return function(rt,$t){if(ot.realList!==null)return ot["onDrag".concat(Ke)](rt,$t)}}function wt(Ke){var ot=this,rt=ze.call(this,Ke);return function($t,Qt){rt.call(ot,$t,Qt),et.call(ot,Ke,$t)}}var Pt=null,kt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ot){return ot}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Jt=["update:modelValue","change"].concat(fe([].concat(fe(_e.manageAndEmit),fe(_e.emit)).map(function(Ke){return Ke.toLowerCase()}))),on=Object(de.defineComponent)({name:"draggable",inheritAttrs:!1,props:kt,emits:Jt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ot=this.$slots,rt=this.$attrs,$t=this.tag,Qt=this.componentData,Rn=this.realList,Ln=this.getKey,Dn=Ze({$slots:ot,tag:$t,realList:Rn,getKey:Ln});this.componentStructure=Dn;var ar=se({$attrs:rt,componentData:Qt});return Dn.render(de.h,ar)}catch(En){return this.error=!0,Object(de.h)("pre",{style:{color:"red"}},En.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&T.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ot=this;if(!this.error){var rt=this.$attrs,$t=this.$el,Qt=this.componentStructure;Qt.updated();var Rn=pe({$attrs:rt,callBackBuilder:{manageAndEmit:function(ar){return wt.call(ot,ar)},emit:function(ar){return et.bind(ot,ar)},manage:function(ar){return ze.call(ot,ar)}}}),Ln=$t.nodeType===1?$t:$t.parentElement;this._sortable=new $.a(Ln,Rn),this.targetDomElement=Ln,Ln.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ot=this.list;return ot||this.modelValue},getKey:function(){var ot=this.itemKey;return typeof ot=="function"?ot:function(rt){return rt[ot]}}},watch:{$attrs:{handler:function(ot){var rt=this._sortable;rt&&K(ot).forEach(function($t){var Qt=R($t,2),Rn=Qt[0],Ln=Qt[1];rt.option(Rn,Ln)})},deep:!0}},methods:{getUnderlyingVm:function(ot){return this.componentStructure.getUnderlyingVm(ot)||null},getUnderlyingPotencialDraggableComponent:function(ot){return ot.__draggable_component__},emitChanges:function(ot){var rt=this;Object(de.nextTick)(function(){return rt.$emit("change",ot)})},alterList:function(ot){if(this.list){ot(this.list);return}var rt=fe(this.modelValue);ot(rt),this.$emit("update:modelValue",rt)},spliceList:function(){var ot=arguments,rt=function(Qt){return Qt.splice.apply(Qt,fe(ot))};this.alterList(rt)},updatePosition:function(ot,rt){var $t=function(Rn){return Rn.splice(rt,0,Rn.splice(ot,1)[0])};this.alterList($t)},getRelatedContextFromMoveEvent:function(ot){var rt=ot.to,$t=ot.related,Qt=this.getUnderlyingPotencialDraggableComponent(rt);if(!Qt)return{component:Qt};var Rn=Qt.realList,Ln={list:Rn,component:Qt};if(rt!==$t&&Rn){var Dn=Qt.getUnderlyingVm($t)||{};return b(b({},Dn),Ln)}return Ln},getVmIndexFromDomIndex:function(ot){return this.componentStructure.getVmIndexFromDomIndex(ot,this.targetDomElement)},onDragStart:function(ot){this.context=this.getUnderlyingVm(ot.item),ot.item._underlying_vm_=this.clone(this.context.element),Pt=ot.item},onDragAdd:function(ot){var rt=ot.item._underlying_vm_;if(rt!==void 0){U(ot.item);var $t=this.getVmIndexFromDomIndex(ot.newIndex);this.spliceList($t,0,rt);var Qt={element:rt,newIndex:$t};this.emitChanges({added:Qt})}},onDragRemove:function(ot){if(Z(this.$el,ot.item,ot.oldIndex),ot.pullMode==="clone"){U(ot.clone);return}var rt=this.context,$t=rt.index,Qt=rt.element;this.spliceList($t,1);var Rn={element:Qt,oldIndex:$t};this.emitChanges({removed:Rn})},onDragUpdate:function(ot){U(ot.item),Z(ot.from,ot.item,ot.oldIndex);var rt=this.context.index,$t=this.getVmIndexFromDomIndex(ot.newIndex);this.updatePosition(rt,$t);var Qt={element:this.context.element,oldIndex:rt,newIndex:$t};this.emitChanges({moved:Qt})},computeFutureIndex:function(ot,rt){if(!ot.element)return 0;var $t=fe(rt.to.children).filter(function(Dn){return Dn.style.display!=="none"}),Qt=$t.indexOf(rt.related),Rn=ot.component.getVmIndexFromDomIndex(Qt),Ln=$t.indexOf(Pt)!==-1;return Ln||!rt.willInsertAfter?Rn:Rn+1},onDragMove:function(ot,rt){var $t=this.move,Qt=this.realList;if(!$t||!Qt)return!0;var Rn=this.getRelatedContextFromMoveEvent(ot),Ln=this.computeFutureIndex(Rn,ot),Dn=b(b({},this.context),{},{futureIndex:Ln}),ar=b(b({},ot),{},{relatedContext:Rn,draggedContext:Dn});return $t(ar,rt)},onDragEnd:function(){Pt=null}}}),cn=on;s.default=cn},fb6a:function(i,s,o){var u=o("23e7"),f=o("861d"),d=o("e8b5"),m=o("23cb"),_=o("50c4"),b=o("fc6a"),y=o("8418"),M=o("b622"),k=o("1dde"),F=o("ae40"),I=k("slice"),R=F("slice",{ACCESSORS:!0,0:0,1:2}),Y=M("species"),ee=[].slice,he=Math.max;u({target:"Array",proto:!0,forced:!I||!R},{slice:function(ve,$){var U=b(this),Z=_(U.length),T=m(ve,Z),N=m($===void 0?Z:$,Z),O,z,q;if(d(U)&&(O=U.constructor,typeof O=="function"&&(O===Array||d(O.prototype))?O=void 0:f(O)&&(O=O[Y],O===null&&(O=void 0)),O===Array||O===void 0))return ee.call(U,T,N);for(z=new(O===void 0?Array:O)(he(N-T,0)),q=0;T<N;T++,q++)T in U&&y(z,q,U[T]);return z.length=q,z}})},fc6a:function(i,s,o){var u=o("44ad"),f=o("1d80");i.exports=function(d){return u(f(d))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var u=o("4930");i.exports=u&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(Rx);var tV=Rx.exports;const nV=fy(tV),rV={class:"h-full bg-gray-50"},iV={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},oV={class:"sm:flex sm:items-center"},sV={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},aV={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},lV={class:"mt-6 bg-white shadow rounded-lg p-4"},uV={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},cV=["value"],fV={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},hV={key:1,class:"mt-6 overflow-x-auto pb-4"},dV={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},pV={class:"flex space-x-4 min-w-max"},gV={class:"bg-white rounded-lg shadow overflow-hidden"},mV={class:"flex items-center"},vV={class:"flex items-center"},yV={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},_V={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},bV={class:"min-h-[100px] draggable-container"},wV={class:"note-container"},xV={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},LV={class:"p-3 flex items-center justify-between note-drag-handle cursor-move no-select"},SV={class:"flex items-center"},EV={class:"text-sm font-medium text-gray-900 truncate"},CV={class:"px-3 py-2"},PV={class:"text-sm text-gray-500 line-clamp-2"},MV={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},AV={class:"text-xs text-gray-500"},kV={class:"flex space-x-1"},TV={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note golocalise"},NV={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},DV=["onClick"],IV=["onClick"],OV=["onClick"],BV=["onClick"],RV={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},FV={class:"flex items-center justify-center min-h-screen w-full"},jV={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},$V={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},zV=Qo({__name:"NotesView",setup(e){const n=Bp(),t=Yl(),r=lh(),i=fd(),s=Ft(!0),o=Ft(!1),u=Ft(!1),f=Ft(null),d=Ft(null),m=Ft("info"),_=Ft(null),b=rr(()=>{const Te=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes tries:",Te),Te}),y=[{id:qi.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:qi.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:qi.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et ses salaris"},{id:qi.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salaris et visiteurs)"}],M=Jl({search:"",date:"",accessLevel:""});function k(Te){if(!Te)return"Date non dfinie";try{const J=new Date(Te);return isNaN(J.getTime())?(console.warn("[safeFormatDate] Date invalide:",Te),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(J)}catch(J){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",J),"Date invalide"}}function F(Te){if(!Te)return null;try{const J=new Date(Te);return isNaN(J.getTime())?(console.warn("[safeDate] Date invalide:",Te),null):J}catch(J){return console.error("[safeDate] Erreur lors de la cration de la date:",J),null}}function I(Te){return k(Te)}const R=rr(()=>{let Te=r.getAccessibleNotes;if(M.search){const J=M.search.toLowerCase();Te=Te.filter(H=>H.title.toLowerCase().includes(J)||H.description.toLowerCase().includes(J))}if(M.accessLevel&&(Te=Te.filter(J=>J.accessLevel===M.accessLevel)),M.date){const J=new Date;J.setHours(0,0,0,0);const H=new Date(J);H.setDate(J.getDate()-J.getDay());const Q=new Date(J.getFullYear(),J.getMonth(),1);Te=Te.filter(ue=>{const se=F(ue.createdAt);return se?M.date==="today"?se>=J:M.date==="week"?se>=H:M.date==="month"?se>=Q:!0:!1})}return Te}),Y=rr(()=>Te=>r.getNotesByColumn(Te));function ee(Te){if(Te==null)return"Non dfini";switch(Te){case qi.PRIVATE:return"Priv";case qi.COMPANY:return"Entreprise";case qi.EMPLOYEE:return"Salaris";case qi.VISITOR:return"Visiteurs";default:return"Non dfini"}}function he(Te){if(Te==null)return"#9CA3AF";switch(Te){case qi.PRIVATE:return"#9CA3AF";case qi.COMPANY:return"#EF4444";case qi.EMPLOYEE:return"#F59E0B";case qi.VISITOR:return"#10B981";default:return"#6B7280"}}ps(()=>{console.log("[NotesView] Composant mont"),fe().then(()=>{console.log("[NotesView] Donnes charges avec succs")}).catch(Te=>{console.error("[NotesView] Erreur lors du chargement des donnes:",Te),t.error("Erreur lors du chargement des donnes")})});async function fe(){console.log(`
[NotesView][loadInitialData] Dbut du chargement des donnes`);try{s.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes charges:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const Te=await Qs.getNotes();console.log("[NotesView][loadInitialData] Notes reues:",Te.data),Te.data.length>0?(console.log("[NotesView][loadInitialData] Dtails des notes:"),Te.data.forEach((ue,se)=>{console.log(`Note ${se+1}:`,{id:ue.id,title:ue.title,columnId:ue.column||ue.column_id,access_level:ue.access_level,column:ue.column})})):console.warn("[NotesView][loadInitialData] Aucune note reue du backend!");const J=r.columns.map(ue=>ue.id),H=Te.data.filter(ue=>{const se=(ue.column||ue.column_id||"").toString();return se===""||!J.includes(se)});if(H.length>0){console.warn(`[NotesView][loadInitialData] ${H.length} notes avec des colonnes invalides:`,H),console.log("[NotesView][loadInitialData] Assignation des notes  la colonne  faire (2)");for(const ue of H)try{await Qs.updateNote(ue.id,{column:"2"})}catch(se){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${ue.id}  la colonne  faire:`,se)}}const Q=Te.data.map(ue=>({id:ue.id,title:ue.title,description:ue.description,location:ue.location,columnId:(ue.column||ue.column_id||"2").toString(),access_level:ue.access_level,style:ue.style||{},comments:ue.comments||[],photos:ue.photos||[],order:ue.order||0,createdAt:ue.created_at,updatedAt:ue.updated_at}));r.notes.length=0,Q.forEach(ue=>{r.addNote(ue)}),console.log("[NotesView][loadInitialData] Notes charges dans le store");for(const ue of r.columns){const se=r.getNotesByColumn(ue.id);console.log(`[NotesView][loadInitialData] Colonne ${ue.title} (${ue.id}): ${se.length} notes`),se.length>0&&se.forEach(pe=>{console.log(`  - Note ID=${pe.id}, Titre="${pe.title}", Niveau d'accs=${pe.accessLevel}, Colonne=${pe.columnId}`)})}}catch(Te){console.error("[NotesView][loadInitialData] Erreur:",Te),t.error("Erreur lors du chargement des donnes")}finally{s.value=!1,console.log("[NotesView][loadInitialData] Chargement termin")}}function ve(){n.push({path:"/",query:{tool:"Note"}})}async function $(Te){if(!Te.location){t.warning("Cette note n'est pas golocalise");return}try{const H=(await Qs.getNote(Te.id)).data,Q=H.plan;console.log("[NotesView][viewOnMap] Dtails de la note rcuprs:",H),n.push({path:"/",query:{lat:Array.isArray(Te.location)?Te.location[0].toString():Te.location.coordinates[1].toString(),lng:Array.isArray(Te.location)?Te.location[1].toString():Te.location.coordinates[0].toString(),noteId:Te.id.toString(),planId:Q?Q.toString():void 0}})}catch(J){console.error("[NotesView][viewOnMap] Erreur lors de la rcupration des dtails de la note:",J),t.error("Erreur lors de l'ouverture de la note sur la carte")}}function U(Te){if(!Te.location){t.warning("Cette note n'est pas golocalise");return}let J,H;Array.isArray(Te.location)?(J=Te.location[0],H=Te.location[1]):(J=Te.location.coordinates[1],H=Te.location.coordinates[0]);const Q=`https://www.google.com/maps/dir/?api=1&destination=${J},${H}`;window.open(Q,"_blank")}function Z(Te){d.value=JSON.parse(JSON.stringify(Te)),m.value="info",u.value=!0}async function T(Te){if(console.log("[NotesView][handleNoteSave] Note sauvegarde:",Te),Te&&Te.id){const J=r.notes.find(H=>H.id===Te.id);J&&(!Te.comments&&J.comments&&(Te.comments=J.comments),!Te.photos&&J.photos&&(Te.photos=J.photos))}if(u.value=!1,_.value&&d.value)try{const J={location:d.value.location,name:d.value.title,description:d.value.description,columnId:d.value.columnId,accessLevel:d.value.accessLevel,style:d.value.style,comments:d.value.comments||[],photos:d.value.photos||[],order:d.value.order,createdAt:d.value.createdAt,updatedAt:new Date().toISOString()},H=i.elements.findIndex(Q=>{var ue;return Q.type_forme==="Note"&&Q.id===((ue=d.value)==null?void 0:ue.id)});H!==-1?i.elements[H].data=J:i.elements.push({id:d.value.id,type_forme:"Note",data:J}),await i.saveToPlan(_.value),t.success("Note sauvegarde et plan mis  jour avec succs")}catch(J){console.error("Erreur lors de la sauvegarde de la note:",J),t.error("Erreur lors de la sauvegarde de la note")}}function N(Te){f.value=Te,o.value=!0}async function O(){if(f.value)try{try{await Qs.deleteNote(f.value.id)}catch(Te){if(Te.response&&Te.response.status===404)console.log("[NotesView][deleteNote] Note non trouve dans le backend (404), suppression locale uniquement");else throw Te}r.removeNote(f.value.id),t.success("Note supprime avec succs")}catch(Te){console.error("Erreur lors de la suppression de la note:",Te),t.error("Erreur lors de la suppression de la note")}finally{o.value=!1,f.value=null}}async function z(Te,J){console.log("[NotesView][onDragChange] vnement:",Te),console.log("[NotesView][onDragChange] Colonne cible:",J);try{if(Te.added){const{element:H}=Te.added;console.log("[NotesView][onDragChange] Note  dplacer:",H);const Q=typeof H=="object"&&H.id?H.id:null;if(!Q)throw console.error("[NotesView][onDragChange] ID de note invalide:",H),new Error("ID de note invalide");r.moveNote(Q,J);const se=Y.value(J).map(K=>K.id);r.reorderNotes(J,se);const pe=r.getColumnById(J);t.success(`Note dplace vers ${(pe==null?void 0:pe.title)||"une autre colonne"}`),await q(Q,{columnId:J})}if(Te.moved){const H=Y.value(J),Q=H.map(ue=>ue.id);r.reorderNotes(J,Q),t.success("Ordre des notes mis  jour");for(const[ue,se]of H.entries())await q(se.id,{order:ue})}}catch(H){console.error("[NotesView][onDragChange] Erreur:",H),t.error("Une erreur est survenue lors du dplacement de la note")}}async function q(Te,J){console.log("[NotesView][updateNoteInBackend] Mise  jour de la note:",Te,J);try{const H=r.notes.find(se=>se.id===Te);if(!H){console.error("[NotesView][updateNoteInBackend] Note non trouve:",Te);return}const Q={...J};if(J.columnId){const se=r.getColumnById(J.columnId);se?(console.log(`[NotesView][updateNoteInBackend] Mise  jour de la colonne: ${se.id} (${se.title})`),Q.column=se.id,delete Q.columnId,delete Q.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouve: ${J.columnId}`)}const ue={...H,...Q,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Donnes envoyes au backend:",ue),await Qs.updateNote(Te,ue),console.log("[NotesView][updateNoteInBackend] Note mise  jour avec succs")}catch(H){throw console.error("[NotesView][updateNoteInBackend] Erreur:",H),H}}function G(){d.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:r.getDefaultColumn.id,accessLevel:qi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]},u.value=!0,m.value="info"}const oe=Ft(null),ie=Ft(!1);function _e(){ie.value=!ie.value}function Ce(Te){oe.value&&!oe.value.contains(Te.target)&&(ie.value=!1)}return ps(()=>{document.addEventListener("click",Ce)}),fh(()=>{document.removeEventListener("click",Ce)}),(Te,J)=>{var H,Q;return Fe(),Ve("div",rV,[S("div",iV,[S("div",oV,[J[6]||(J[6]=S("div",{class:"sm:flex-auto"},[S("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),S("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),S("div",sV,[S("div",{class:"relative",ref_key:"dropdownRef",ref:oe},[S("button",{onClick:_e,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},J[5]||(J[5]=[ii(" Crer "),S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),ie.value?(Fe(),Ve("div",aV,[S("div",{class:"py-1"},[S("button",{onClick:G,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),S("button",{onClick:ve,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note golocalise ")])])):nn("",!0)],512)])]),S("div",lV,[S("div",uV,[S("div",null,[J[7]||(J[7]=S("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Nn(S("input",{type:"text",id:"search","onUpdate:modelValue":J[0]||(J[0]=ue=>M.search=ue),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Zr,M.search]])]),S("div",null,[J[9]||(J[9]=S("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),Nn(S("select",{id:"date","onUpdate:modelValue":J[1]||(J[1]=ue=>M.date=ue),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},J[8]||(J[8]=[S("option",{value:""},"Toutes les dates",-1),S("option",{value:"today"},"Aujourd'hui",-1),S("option",{value:"week"},"Cette semaine",-1),S("option",{value:"month"},"Ce mois",-1)]),512),[[so,M.date]])]),S("div",null,[J[11]||(J[11]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),Nn(S("select",{id:"accessLevel","onUpdate:modelValue":J[2]||(J[2]=ue=>M.accessLevel=ue),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[J[10]||(J[10]=S("option",{value:""},"Tous les niveaux",-1)),(Fe(),Ve(Mn,null,br(y,ue=>S("option",{key:ue.id,value:ue.id},It(ue.title),9,cV)),64))],512),[[so,M.accessLevel]])])])]),s.value?(Fe(),Ve("div",fV,J[12]||(J[12]=[S("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),S("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Fe(),Ve("div",hV,[R.value.length===0&&b.value.length===0?(Fe(),Ve("div",dV,J[13]||(J[13]=[S("p",{class:"text-sm text-gray-500"},"Aucune note ni colonne trouve",-1)]))):nn("",!0),S("div",pV,[(Fe(!0),Ve(Mn,null,br(b.value,ue=>(Fe(),Ve("div",{key:ue.id,class:"column-wrapper w-80 flex-shrink-0"},[S("div",gV,[S("div",{class:"p-3 flex items-center justify-between no-select",style:El({backgroundColor:ue.color+"20",borderBottom:"2px solid "+ue.color})},[S("div",mV,[S("h3",{class:"text-sm font-semibold",style:El({color:ue.color})},It(ue.title),5)]),S("div",vV,[S("span",yV,It(Y.value(ue.id).length),1)])],4),S("div",_V,[S("div",bV,[pi(Kn(nV),{list:Y.value(ue.id),class:"space-y-2",group:"notes","item-key":"id",handle:".note-drag-handle",onChange:se=>z(se,ue.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging"},{item:gu(({element:se})=>[S("div",wV,[S("div",xV,[S("div",LV,[S("div",SV,[J[14]||(J[14]=S("svg",{class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),S("h4",EV,It(se.title),1)]),S("div",null,[S("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:El({backgroundColor:he(se.accessLevel)+"20",color:he(se.accessLevel)})},It(ee(se.accessLevel)||"Non dfini"),5)])]),S("div",CV,[S("p",PV,It(se.description||"Aucune description"),1)]),S("div",MV,[S("span",AV,It(se.updatedAt?I(se.updatedAt):se.createdAt?I(se.createdAt):"Date non dfinie"),1),S("div",kV,[se.location?(Fe(),Ve("span",TV,J[15]||(J[15]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Fe(),Ve("span",NV,J[16]||(J[16]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),se.location?(Fe(),Ve(Mn,{key:2},[S("button",{onClick:pe=>U(se),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},J[17]||(J[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,DV),S("button",{onClick:pe=>$(se),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},J[18]||(J[18]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,IV)],64)):nn("",!0),S("button",{onClick:pe=>Z(se),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"diter la note"},J[19]||(J[19]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,OV),S("button",{onClick:pe=>N(se),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},J[20]||(J[20]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,BV)])])])])]),"empty-content":gu(()=>J[21]||(J[21]=[S("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","onChange"])])])])]))),128))])]))]),o.value?(Fe(),Ve("div",RV,[S("div",FV,[J[23]||(J[23]=S("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),S("div",jV,[J[22]||(J[22]=zu('<div class="p-4 md:p-6" data-v-3f5bbe8c><div class="flex items-start" data-v-3f5bbe8c><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-3f5bbe8c><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-3f5bbe8c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-3f5bbe8c></path></svg></div><div class="ml-4 flex-1" data-v-3f5bbe8c><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-3f5bbe8c> Supprimer la note </h3><div class="mt-2" data-v-3f5bbe8c><p class="text-sm text-gray-500" data-v-3f5bbe8c> tes-vous sr de vouloir supprimer cette note ? Cette action est irrversible. </p></div></div></div></div>',1)),S("div",$V,[S("button",{onClick:O,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),S("button",{onClick:J[3]||(J[3]=ue=>o.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):nn("",!0),u.value?(Fe(),il(hx,{key:1,note:d.value,"is-new-note":!((H=d.value)!=null&&H.id),location:(Q=d.value)==null?void 0:Q.location,onClose:J[4]||(J[4]=ue=>u.value=!1),onSave:T},null,8,["note","is-new-note","location"])):nn("",!0)])}}}),UV=hh(zV,[["__scopeId","data-v-3f5bbe8c"]]),VV={class:"container mx-auto px-4 py-8"},GV={class:"mb-8"},HV={key:0,class:"mb-6"},qV={class:"flex gap-4"},WV=["disabled"],ZV={key:0,value:""},KV=["value"],YV={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},JV={class:"flex"},XV={class:"ml-3"},QV={class:"text-sm font-medium text-red-800"},eG={class:"mb-6"},tG={class:"flex gap-4"},nG=["disabled"],rG={key:0,value:""},iG={key:1,value:""},oG=["value"],sG=["disabled"],aG={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},lG={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},uG={class:"font-medium"},cG={class:"font-medium"},fG={class:"font-medium"},hG={class:"font-medium"},dG={class:"font-medium"},pG={class:"font-medium"},gG={class:"md:col-span-2 lg:col-span-3 flex items-center"},mG=["href"],vG={class:"text-sm text-gray-600 mb-4"},yG={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},_G={class:"bg-white rounded-lg shadow-md p-6"},bG={class:"text-4xl font-bold text-primary-600 mb-2"},wG={class:"text-sm text-gray-600"},xG={class:"bg-white rounded-lg shadow-md p-6"},LG={class:"text-4xl font-bold text-primary-600 mb-2"},SG={class:"mt-4"},EG={class:"w-full bg-gray-200 rounded-full h-2.5"},CG={class:"bg-white rounded-lg shadow-md p-6"},PG={class:"text-4xl font-bold text-primary-600 mb-2"},MG={class:"text-sm text-gray-600"},AG={class:"bg-white rounded-lg shadow-md p-6"},kG={class:"text-4xl font-bold text-primary-600 mb-2"},TG={class:"text-sm text-gray-600"},NG={class:"bg-white rounded-lg shadow-md p-6"},DG={class:"text-4xl font-bold text-primary-600 mb-2"},IG={class:"text-sm text-gray-600"},OG={class:"bg-white rounded-lg shadow-md p-6"},BG={class:"text-4xl font-bold text-primary-600 mb-2"},RG={class:"text-sm text-gray-600"},FG=Qo({__name:"MeteoView",setup(e){const n=Yl(),t=ta(),r=Ft({}),i=Ft(new Date),s=Ft([]),o=Ft(""),u=Ft([]),f=Ft(null),d=Ft(""),m=rr(()=>t.isAdmin);let _=null;const b=rr(()=>!o.value||!s.value.length?null:s.value.find(Z=>Z.mac===o.value));function y(Z){return Z?Z.latitude&&Z.longitude&&Z.latitude!==0&&Z.longitude!==0:!1}function M(Z){return y(Z)?`${Z.latitude.toFixed(6)}, ${Z.longitude.toFixed(6)}`:""}function k(Z){if(!y(Z))return"#";const T=Z.latitude,N=Z.longitude,O=encodeURIComponent(Z.name||"Station mto");return`https://www.google.com/maps/search/?api=1&query=${T},${N}&query_place_id=${O}`}async function F(){try{d.value="";const Z={};m.value&&f.value&&(Z.entreprise=f.value);const T=await D_.getDevices(Z);s.value=T.data,s.value.length>0&&(o.value=s.value[0].mac,await I())}catch(Z){console.error("Erreur lors de la rcupration des appareils:",Z),Z.response&&Z.response.data&&Z.response.data.error?d.value=Z.response.data.error:(d.value="Erreur lors de la rcupration des stations mto",n.error("Erreur lors de la rcupration des stations mto")),s.value=[],o.value="",r.value={}}}async function I(){if(o.value)try{d.value="";const Z={mac:o.value};m.value&&f.value&&(Z.entreprise=f.value);const T=await D_.getRealTimeData(Z);r.value=T.data,i.value=new Date}catch(Z){console.error("Erreur:",Z),Z.response&&Z.response.data&&Z.response.data.error?d.value=Z.response.data.error:(d.value="Erreur lors de la rcupration des donnes mto",n.error("Erreur lors de la rcupration des donnes mto")),r.value={}}}function R(Z){return Z?((Z-32)*5/9).toFixed(1):"0"}function Y(Z){return Z?(Z*1.60934).toFixed(1):"0"}function ee(Z){return Z?(Z*25.4).toFixed(1):"0"}function he(Z){return Z?Z.toFixed(1):"0"}function fe(Z){if(!Z)return"N/A";const T=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],N=Math.round(Z/22.5)%16;return T[N]}function ve(Z){return Z?Z>0?"En hausse":"En baisse":"Stable"}async function $(){if(m.value)try{const Z=await el.getUsers({role:"ENTREPRISE"});u.value=Z.data,u.value.length>0&&!f.value&&(f.value=u.value[0].id)}catch(Z){console.error("Erreur lors de la rcupration des entreprises:",Z),n.error("Erreur lors de la rcupration des entreprises")}}async function U(){s.value=[],o.value="",r.value={},d.value="",await F()}return ps(async()=>{m.value&&await $(),await F(),_=window.setInterval(I,5*60*1e3)}),Hu(()=>{_&&clearInterval(_)}),(Z,T)=>{var N,O,z,q,G,oe,ie,_e,Ce,Te,J,H,Q,ue,se,pe,K,D,ke,Me,Ge,ce,te,ye,de,We,He,tt,Ze,et;return Fe(),Ve("div",VV,[S("div",GV,[T[22]||(T[22]=S("h1",{class:"text-3xl font-bold mb-4"},"Mto",-1)),m.value?(Fe(),Ve("div",HV,[T[2]||(T[2]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une entreprise ",-1)),S("div",qV,[Nn(S("select",{"onUpdate:modelValue":T[0]||(T[0]=ze=>f.value=ze),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!u.value.length,onChange:U},[u.value.length?nn("",!0):(Fe(),Ve("option",ZV,"Chargement des entreprises...")),(Fe(!0),Ve(Mn,null,br(u.value,ze=>(Fe(),Ve("option",{key:ze.id,value:ze.id},It(ze.company_name||`${ze.first_name} ${ze.last_name}`),9,KV))),128))],40,WV),[[so,f.value]])])])):nn("",!0),d.value?(Fe(),Ve("div",YV,[S("div",JV,[T[3]||(T[3]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",XV,[S("h3",QV,It(d.value),1)])])])):nn("",!0),S("div",eG,[T[13]||(T[13]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une station ",-1)),S("div",tG,[Nn(S("select",{"onUpdate:modelValue":T[1]||(T[1]=ze=>o.value=ze),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!s.value.length||d.value)},[!s.value.length&&!d.value?(Fe(),Ve("option",rG,"Chargement des stations...")):nn("",!0),d.value?(Fe(),Ve("option",iG,"Aucune station disponible")):nn("",!0),(Fe(!0),Ve(Mn,null,br(s.value,ze=>(Fe(),Ve("option",{key:ze.mac,value:ze.mac},It(ze.name)+" ("+It(ze.model)+" - v"+It(ze.firmware_version)+") ",9,oG))),128))],8,nG),[[so,o.value]]),S("button",{onClick:I,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!o.value||d.value)}," Actualiser ",8,sG)]),b.value?(Fe(),Ve("div",aG,[T[12]||(T[12]=S("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),S("div",lG,[S("div",null,[T[4]||(T[4]=S("span",{class:"text-gray-500"},"Modle:",-1)),S("p",uG,It(b.value.model),1)]),S("div",null,[T[5]||(T[5]=S("span",{class:"text-gray-500"},"Version:",-1)),S("p",cG,It(b.value.firmware_version),1)]),S("div",null,[T[6]||(T[6]=S("span",{class:"text-gray-500"},"ID:",-1)),S("p",fG,It(b.value.id),1)]),S("div",null,[T[7]||(T[7]=S("span",{class:"text-gray-500"},"MAC:",-1)),S("p",hG,It(b.value.mac),1)]),S("div",null,[T[8]||(T[8]=S("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),S("p",dG,It(b.value.timezone),1)]),S("div",null,[T[9]||(T[9]=S("span",{class:"text-gray-500"},"Installation:",-1)),S("p",pG,It(new Date(b.value.created_at).toLocaleDateString()),1)]),S("div",gG,[T[11]||(T[11]=S("span",{class:"text-gray-500 mr-2"},"Position:",-1)),y(b.value)?(Fe(),Ve("a",{key:0,href:k(b.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[T[10]||(T[10]=S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),ii(" "+It(M(b.value)),1)],8,mG)):nn("",!0)])])])):nn("",!0)]),S("p",vG," Dernire mise  jour : "+It(i.value?new Date(i.value).toLocaleString():"Jamais"),1),S("div",yG,[S("div",_G,[T[14]||(T[14]=S("h2",{class:"text-xl font-semibold mb-4"},"Temprature Extrieure",-1)),S("div",bG,It(R((O=(N=r.value.outdoor)==null?void 0:N.temperature)==null?void 0:O.value))+"C ",1),S("div",wG," Min: "+It(R((q=(z=r.value.outdoor)==null?void 0:z.temperature)==null?void 0:q.min))+"C Max: "+It(R((oe=(G=r.value.outdoor)==null?void 0:G.temperature)==null?void 0:oe.max))+"C ",1)]),S("div",xG,[T[15]||(T[15]=S("h2",{class:"text-xl font-semibold mb-4"},"Humidit",-1)),S("div",LG,It((_e=(ie=r.value.outdoor)==null?void 0:ie.humidity)==null?void 0:_e.value)+"% ",1),S("div",SG,[S("div",EG,[S("div",{class:"bg-primary-600 h-2.5 rounded-full",style:El({width:`${(Te=(Ce=r.value.outdoor)==null?void 0:Ce.humidity)==null?void 0:Te.value}%`})},null,4)])])]),S("div",CG,[T[16]||(T[16]=S("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphrique",-1)),S("div",PG,It(he((H=(J=r.value.pressure)==null?void 0:J.absolute)==null?void 0:H.value))+" hPa ",1),S("div",MG," Tendance: "+It(ve((ue=(Q=r.value.pressure)==null?void 0:Q.absolute)==null?void 0:ue.trend)),1)]),S("div",AG,[T[18]||(T[18]=S("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),S("div",kG,It(Y((pe=(se=r.value.wind)==null?void 0:se.speed)==null?void 0:pe.value))+" km/h ",1),S("div",TG,[ii(" Direction: "+It(fe((D=(K=r.value.wind)==null?void 0:K.direction)==null?void 0:D.value))+" ",1),T[17]||(T[17]=S("br",null,null,-1)),ii(" Rafales: "+It(Y((Me=(ke=r.value.wind)==null?void 0:ke.gust)==null?void 0:Me.value))+" km/h ",1)])]),S("div",NG,[T[20]||(T[20]=S("h2",{class:"text-xl font-semibold mb-4"},"Prcipitations",-1)),S("div",DG,It(ee((ce=(Ge=r.value.rainfall)==null?void 0:Ge.daily)==null?void 0:ce.value))+" mm ",1),S("div",IG,[ii(" Taux: "+It(ee((ye=(te=r.value.rainfall)==null?void 0:te.rate)==null?void 0:ye.value))+" mm/h ",1),T[19]||(T[19]=S("br",null,null,-1)),ii(" Mensuel: "+It(ee((We=(de=r.value.rainfall)==null?void 0:de.monthly)==null?void 0:We.value))+" mm ",1)])]),S("div",OG,[T[21]||(T[21]=S("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),S("div",BG,It((tt=(He=r.value.solar_and_uvi)==null?void 0:He.solar)==null?void 0:tt.value)+" W/m ",1),S("div",RG," UV: "+It((et=(Ze=r.value.solar_and_uvi)==null?void 0:Ze.uvi)==null?void 0:et.value),1)])])])])}}}),jG=hh(FG,[["__scopeId","data-v-5096ab88"]]),Kx=u8({history:$T("/"),routes:[{path:"/",name:"home",component:Vb,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/meteo",name:"meteo",component:jG,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:mU,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:z$,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>mf(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:B7,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>mf(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>mf(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:i7,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:UV,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:Vb,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>mf(()=>import("./NotFoundView.js"),[])}]});Kx.beforeEach(async(e,n,t)=>{var u,f;const r=ta();if(console.log("Route:",e.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(d){console.error("Error initializing auth store:",d)}const i=r.isAuthenticated,s=(u=r.user)==null?void 0:u.must_change_password,o=(f=r.user)==null?void 0:f.user_type;if(e.meta.requiresAuth&&!i){t("/login");return}if(i&&s&&e.name!=="changePassword"){t({name:"changePassword"});return}if(e.name==="changePassword"&&!s){t({name:"home"});return}if(e.meta.allowedRoles&&o&&!e.meta.allowedRoles.includes(o)){t({name:"home"});return}if(e.meta.requiresGuest&&i){t({name:"home"});return}t()});const xy=um(BD),Yx=v6();xy.use(Yx);xy.use(Kx);const $G=ta(Yx);window.INITIAL_STATE&&$G.initialize(window.INITIAL_STATE);xy.mount("#app");export{ao as _,Jl as a,S as b,Ve as c,Qo as d,nn as e,Kn as f,ii as g,Nn as h,Fe as i,zu as j,pi as k,gu as l,Yw as m,Gi as n,ps as o,f8 as p,Bp as q,Ft as r,ea as s,It as t,ta as u,Zr as v,Gc as w,fy as x};

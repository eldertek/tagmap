var gT=Object.defineProperty;var mT=(t,e,n)=>e in t?gT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var nt=(t,e,n)=>mT(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Mv(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const di={},Hd=[],Pu=()=>{},vT=()=>!1,tm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),hb=t=>t.startsWith("onUpdate:"),Gi=Object.assign,fb=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},yT=Object.prototype.hasOwnProperty,Ci=(t,e)=>yT.call(t,e),Gn=Array.isArray,Wd=t=>fp(t)==="[object Map]",ed=t=>fp(t)==="[object Set]",Fw=t=>fp(t)==="[object Date]",bT=t=>fp(t)==="[object RegExp]",br=t=>typeof t=="function",ts=t=>typeof t=="string",oc=t=>typeof t=="symbol",Bi=t=>t!==null&&typeof t=="object",db=t=>(Bi(t)||br(t))&&br(t.then)&&br(t.catch),A3=Object.prototype.toString,fp=t=>A3.call(t),_T=t=>fp(t).slice(8,-1),Av=t=>fp(t)==="[object Object]",pb=t=>ts(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Gd=Mv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Tv=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},wT=/-(\w)/g,fa=Tv(t=>t.replace(wT,(e,n)=>n?n.toUpperCase():"")),xT=/\B([A-Z])/g,Il=Tv(t=>t.replace(xT,"-$1").toLowerCase()),nm=Tv(t=>t.charAt(0).toUpperCase()+t.slice(1)),sg=Tv(t=>t?`on${nm(t)}`:""),ol=(t,e)=>!Object.is(t,e),qd=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},T3=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},G0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},q0=t=>{const e=ts(t)?Number(t):NaN;return isNaN(e)?t:e};let jw;const Ov=()=>jw||(jw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),LT="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",CT=Mv(LT);function Fl(t){if(Gn(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=ts(r)?kT(r):Fl(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(ts(t)||Bi(t))return t}const ST=/;(?![^(]*\))/g,ET=/:([^]+)/,PT=/\/\*[^]*?\*\//g;function kT(t){const e={};return t.replace(PT,"").split(ST).forEach(n=>{if(n){const r=n.split(ET);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Si(t){let e="";if(ts(t))e=t;else if(Gn(t))for(let n=0;n<t.length;n++){const r=Si(t[n]);r&&(e+=r+" ")}else if(Bi(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function MT(t){if(!t)return null;let{class:e,style:n}=t;return e&&!ts(e)&&(t.class=Si(e)),n&&(t.style=Fl(n)),t}const AT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",TT=Mv(AT);function O3(t){return!!t||t===""}function OT(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=nf(t[r],e[r]);return n}function nf(t,e){if(t===e)return!0;let n=Fw(t),r=Fw(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=oc(t),r=oc(e),n||r)return t===e;if(n=Gn(t),r=Gn(e),n||r)return n&&r?OT(t,e):!1;if(n=Bi(t),r=Bi(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!nf(t[o],e[o]))return!1}}return String(t)===String(e)}function Dv(t,e){return t.findIndex(n=>nf(n,e))}const D3=t=>!!(t&&t.__v_isRef===!0),zt=t=>ts(t)?t:t==null?"":Gn(t)||Bi(t)&&(t.toString===A3||!br(t.toString))?D3(t)?zt(t.value):JSON.stringify(t,I3,2):String(t),I3=(t,e)=>D3(e)?I3(t,e.value):Wd(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Vy(r,s)+" =>"]=i,n),{})}:ed(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Vy(n))}:oc(e)?Vy(e):Bi(e)&&!Gn(e)&&!Av(e)?String(e):e,Vy=(t,e="")=>{var n;return oc(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sl;class gb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=sl,!e&&sl&&(this.index=(sl.scopes||(sl.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=sl;try{return sl=this,e()}finally{sl=n}}}on(){sl=this}off(){sl=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function mb(t){return new gb(t)}function vb(){return sl}function N3(t,e=!1){sl&&sl.cleanups.push(t)}let Ji;const Hy=new WeakSet;class Mg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,sl&&sl.active&&sl.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Hy.has(this)&&(Hy.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||R3(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,zw(this),F3(this);const e=Ji,n=ic;Ji=this,ic=!0;try{return this.fn()}finally{j3(this),Ji=e,ic=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)_b(e);this.deps=this.depsTail=void 0,zw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Hy.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Y1(this)&&this.run()}get dirty(){return Y1(this)}}let B3=0,og,ag;function R3(t,e=!1){if(t.flags|=8,e){t.next=ag,ag=t;return}t.next=og,og=t}function yb(){B3++}function bb(){if(--B3>0)return;if(ag){let e=ag;for(ag=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;og;){let e=og;for(og=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function F3(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function j3(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),_b(r),DT(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Y1(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(z3(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function z3(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ag))return;t.globalVersion=Ag;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Y1(t)){t.flags&=-3;return}const n=Ji,r=ic;Ji=t,ic=!0;try{F3(t);const i=t.fn(t._value);(e.version===0||ol(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ji=n,ic=r,j3(t),t.flags&=-3}}function _b(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)_b(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function DT(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function IT(t,e){t.effect instanceof Mg&&(t=t.effect.fn);const n=new Mg(t);e&&Gi(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function NT(t){t.effect.stop()}let ic=!0;const U3=[];function cf(){U3.push(ic),ic=!1}function hf(){const t=U3.pop();ic=t===void 0?!0:t}function zw(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ji;Ji=void 0;try{e()}finally{Ji=n}}}let Ag=0;class BT{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Iv{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ji||!ic||Ji===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ji)n=this.activeLink=new BT(Ji,this),Ji.deps?(n.prevDep=Ji.depsTail,Ji.depsTail.nextDep=n,Ji.depsTail=n):Ji.deps=Ji.depsTail=n,$3(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ji.depsTail,n.nextDep=void 0,Ji.depsTail.nextDep=n,Ji.depsTail=n,Ji.deps===n&&(Ji.deps=r)}return n}trigger(e){this.version++,Ag++,this.notify(e)}notify(e){yb();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{bb()}}}function $3(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)$3(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Y0=new WeakMap,Uf=Symbol(""),Z1=Symbol(""),Tg=Symbol("");function Ia(t,e,n){if(ic&&Ji){let r=Y0.get(t);r||Y0.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new Iv),i.map=r,i.key=n),i.track()}}function hh(t,e,n,r,i,s){const o=Y0.get(t);if(!o){Ag++;return}const a=l=>{l&&l.trigger()};if(yb(),e==="clear")o.forEach(a);else{const l=Gn(t),c=l&&pb(n);if(l&&n==="length"){const f=Number(r);o.forEach((p,y)=>{(y==="length"||y===Tg||!oc(y)&&y>=f)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Tg)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Uf)),Wd(t)&&a(o.get(Z1)));break;case"delete":l||(a(o.get(Uf)),Wd(t)&&a(o.get(Z1)));break;case"set":Wd(t)&&a(o.get(Uf));break}}bb()}function RT(t,e){const n=Y0.get(t);return n&&n.get(e)}function xd(t){const e=hi(t);return e===t?e:(Ia(e,"iterate",Tg),ou(t)?e:e.map(Na))}function Nv(t){return Ia(t=hi(t),"iterate",Tg),t}const FT={__proto__:null,[Symbol.iterator](){return Wy(this,Symbol.iterator,Na)},concat(...t){return xd(this).concat(...t.map(e=>Gn(e)?xd(e):e))},entries(){return Wy(this,"entries",t=>(t[1]=Na(t[1]),t))},every(t,e){return rh(this,"every",t,e,void 0,arguments)},filter(t,e){return rh(this,"filter",t,e,n=>n.map(Na),arguments)},find(t,e){return rh(this,"find",t,e,Na,arguments)},findIndex(t,e){return rh(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return rh(this,"findLast",t,e,Na,arguments)},findLastIndex(t,e){return rh(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return rh(this,"forEach",t,e,void 0,arguments)},includes(...t){return Gy(this,"includes",t)},indexOf(...t){return Gy(this,"indexOf",t)},join(t){return xd(this).join(t)},lastIndexOf(...t){return Gy(this,"lastIndexOf",t)},map(t,e){return rh(this,"map",t,e,void 0,arguments)},pop(){return Sp(this,"pop")},push(...t){return Sp(this,"push",t)},reduce(t,...e){return Uw(this,"reduce",t,e)},reduceRight(t,...e){return Uw(this,"reduceRight",t,e)},shift(){return Sp(this,"shift")},some(t,e){return rh(this,"some",t,e,void 0,arguments)},splice(...t){return Sp(this,"splice",t)},toReversed(){return xd(this).toReversed()},toSorted(t){return xd(this).toSorted(t)},toSpliced(...t){return xd(this).toSpliced(...t)},unshift(...t){return Sp(this,"unshift",t)},values(){return Wy(this,"values",Na)}};function Wy(t,e,n){const r=Nv(t),i=r[e]();return r!==t&&!ou(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const jT=Array.prototype;function rh(t,e,n,r,i,s){const o=Nv(t),a=o!==t&&!ou(t),l=o[e];if(l!==jT[e]){const p=l.apply(t,s);return a?Na(p):p}let c=n;o!==t&&(a?c=function(p,y){return n.call(this,Na(p),y,t)}:n.length>2&&(c=function(p,y){return n.call(this,p,y,t)}));const f=l.call(o,c,r);return a&&i?i(f):f}function Uw(t,e,n,r){const i=Nv(t);let s=n;return i!==t&&(ou(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,Na(a),l,t)}),i[e](s,...r)}function Gy(t,e,n){const r=hi(t);Ia(r,"iterate",Tg);const i=r[e](...n);return(i===-1||i===!1)&&Fv(n[0])?(n[0]=hi(n[0]),r[e](...n)):i}function Sp(t,e,n=[]){cf(),yb();const r=hi(t)[e].apply(t,n);return bb(),hf(),r}const zT=Mv("__proto__,__v_isRef,__isVue"),V3=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(oc));function UT(t){oc(t)||(t=String(t));const e=hi(this);return Ia(e,"has",t),e.hasOwnProperty(t)}class H3{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?K3:Z3:s?Y3:q3).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Gn(e);if(!i){let l;if(o&&(l=FT[n]))return l;if(n==="hasOwnProperty")return UT}const a=Reflect.get(e,n,Bs(e)?e:r);return(oc(n)?V3.has(n):zT(n))||(i||Ia(e,"get",n),s)?a:Bs(a)?o&&pb(n)?a:a.value:Bi(a)?i?xb(a):cu(a):a}}class W3 extends H3{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=rf(s);if(!ou(r)&&!rf(r)&&(s=hi(s),r=hi(r)),!Gn(e)&&Bs(s)&&!Bs(r))return l?!1:(s.value=r,!0)}const o=Gn(e)&&pb(n)?Number(n)<e.length:Ci(e,n),a=Reflect.set(e,n,r,Bs(e)?e:i);return e===hi(i)&&(o?ol(r,s)&&hh(e,"set",n,r):hh(e,"add",n,r)),a}deleteProperty(e,n){const r=Ci(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&hh(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!oc(n)||!V3.has(n))&&Ia(e,"has",n),r}ownKeys(e){return Ia(e,"iterate",Gn(e)?"length":Uf),Reflect.ownKeys(e)}}class G3 extends H3{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const $T=new W3,VT=new G3,HT=new W3(!0),WT=new G3(!0),K1=t=>t,Bm=t=>Reflect.getPrototypeOf(t);function GT(t,e,n){return function(...r){const i=this.__v_raw,s=hi(i),o=Wd(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),f=n?K1:e?X1:Na;return!e&&Ia(s,"iterate",l?Z1:Uf),{next(){const{value:p,done:y}=c.next();return y?{value:p,done:y}:{value:a?[f(p[0]),f(p[1])]:f(p),done:y}},[Symbol.iterator](){return this}}}}function Rm(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function qT(t,e){const n={get(i){const s=this.__v_raw,o=hi(s),a=hi(i);t||(ol(i,a)&&Ia(o,"get",i),Ia(o,"get",a));const{has:l}=Bm(o),c=e?K1:t?X1:Na;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Ia(hi(i),"iterate",Uf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=hi(s),a=hi(i);return t||(ol(i,a)&&Ia(o,"has",i),Ia(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=hi(a),c=e?K1:t?X1:Na;return!t&&Ia(l,"iterate",Uf),a.forEach((f,p)=>i.call(s,c(f),c(p),o))}};return Gi(n,t?{add:Rm("add"),set:Rm("set"),delete:Rm("delete"),clear:Rm("clear")}:{add(i){!e&&!ou(i)&&!rf(i)&&(i=hi(i));const s=hi(this);return Bm(s).has.call(s,i)||(s.add(i),hh(s,"add",i,i)),this},set(i,s){!e&&!ou(s)&&!rf(s)&&(s=hi(s));const o=hi(this),{has:a,get:l}=Bm(o);let c=a.call(o,i);c||(i=hi(i),c=a.call(o,i));const f=l.call(o,i);return o.set(i,s),c?ol(s,f)&&hh(o,"set",i,s):hh(o,"add",i,s),this},delete(i){const s=hi(this),{has:o,get:a}=Bm(s);let l=o.call(s,i);l||(i=hi(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&hh(s,"delete",i,void 0),c},clear(){const i=hi(this),s=i.size!==0,o=i.clear();return s&&hh(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=GT(i,t,e)}),n}function Bv(t,e){const n=qT(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Ci(n,i)&&i in r?n:r,i,s)}const YT={get:Bv(!1,!1)},ZT={get:Bv(!1,!0)},KT={get:Bv(!0,!1)},XT={get:Bv(!0,!0)},q3=new WeakMap,Y3=new WeakMap,Z3=new WeakMap,K3=new WeakMap;function JT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function QT(t){return t.__v_skip||!Object.isExtensible(t)?0:JT(_T(t))}function cu(t){return rf(t)?t:Rv(t,!1,$T,YT,q3)}function wb(t){return Rv(t,!1,HT,ZT,Y3)}function xb(t){return Rv(t,!0,VT,KT,Z3)}function e8(t){return Rv(t,!0,WT,XT,K3)}function Rv(t,e,n,r,i){if(!Bi(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=QT(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Nc(t){return rf(t)?Nc(t.__v_raw):!!(t&&t.__v_isReactive)}function rf(t){return!!(t&&t.__v_isReadonly)}function ou(t){return!!(t&&t.__v_isShallow)}function Fv(t){return t?!!t.__v_raw:!1}function hi(t){const e=t&&t.__v_raw;return e?hi(e):t}function jv(t){return!Ci(t,"__v_skip")&&Object.isExtensible(t)&&T3(t,"__v_skip",!0),t}const Na=t=>Bi(t)?cu(t):t,X1=t=>Bi(t)?xb(t):t;function Bs(t){return t?t.__v_isRef===!0:!1}function kt(t){return X3(t,!1)}function Lb(t){return X3(t,!0)}function X3(t,e){return Bs(t)?t:new t8(t,e)}class t8{constructor(e,n){this.dep=new Iv,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:hi(e),this._value=n?e:Na(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ou(e)||rf(e);e=r?e:hi(e),ol(e,n)&&(this._rawValue=e,this._value=r?e:Na(e),this.dep.trigger())}}function n8(t){t.dep&&t.dep.trigger()}function _n(t){return Bs(t)?t.value:t}function r8(t){return br(t)?t():_n(t)}const i8={get:(t,e,n)=>e==="__v_raw"?t:_n(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Bs(i)&&!Bs(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Cb(t){return Nc(t)?t:new Proxy(t,i8)}class s8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Iv,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function J3(t){return new s8(t)}function Sb(t){const e=Gn(t)?new Array(t.length):{};for(const n in t)e[n]=Q3(t,n);return e}class o8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return RT(hi(this._object),this._key)}}class a8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function l8(t,e,n){return Bs(t)?t:br(t)?new a8(t):Bi(t)&&arguments.length>1?Q3(t,e,n):kt(t)}function Q3(t,e,n){const r=t[e];return Bs(r)?r:new o8(t,e,n)}class u8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Iv(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ag-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ji!==this)return R3(this,!0),!0}get value(){const e=this.dep.track();return z3(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function c8(t,e,n=!1){let r,i;return br(t)?r=t:(r=t.get,i=t.set),new u8(r,i,n)}const h8={GET:"get",HAS:"has",ITERATE:"iterate"},f8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},Fm={},Z0=new WeakMap;let jh;function d8(){return jh}function eL(t,e=!1,n=jh){if(n){let r=Z0.get(n);r||Z0.set(n,r=[]),r.push(t)}}function p8(t,e,n=di){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=U=>i?U:ou(U)||i===!1||i===0?fh(U,1):fh(U);let f,p,y,m,C=!1,S=!1;if(Bs(t)?(p=()=>t.value,C=ou(t)):Nc(t)?(p=()=>c(t),C=!0):Gn(t)?(S=!0,C=t.some(U=>Nc(U)||ou(U)),p=()=>t.map(U=>{if(Bs(U))return U.value;if(Nc(U))return c(U);if(br(U))return l?l(U,2):U()})):br(t)?e?p=l?()=>l(t,2):t:p=()=>{if(y){cf();try{y()}finally{hf()}}const U=jh;jh=f;try{return l?l(t,3,[m]):t(m)}finally{jh=U}}:p=Pu,e&&i){const U=p,W=i===!0?1/0:i;p=()=>fh(U(),W)}const T=vb(),O=()=>{f.stop(),T&&T.active&&fb(T.effects,f)};if(s&&e){const U=e;e=(...W)=>{U(...W),O()}}let D=S?new Array(t.length).fill(Fm):Fm;const N=U=>{if(!(!(f.flags&1)||!f.dirty&&!U))if(e){const W=f.run();if(i||C||(S?W.some((ee,te)=>ol(ee,D[te])):ol(W,D))){y&&y();const ee=jh;jh=f;try{const te=[W,D===Fm?void 0:S&&D[0]===Fm?[]:D,m];l?l(e,3,te):e(...te),D=W}finally{jh=ee}}}else f.run()};return a&&a(N),f=new Mg(p),f.scheduler=o?()=>o(N,!1):N,m=U=>eL(U,!1,f),y=f.onStop=()=>{const U=Z0.get(f);if(U){if(l)l(U,4);else for(const W of U)W();Z0.delete(f)}},e?r?N(!0):D=f.run():o?o(N.bind(null,!0),!0):f.run(),O.pause=f.pause.bind(f),O.resume=f.resume.bind(f),O.stop=O,O}function fh(t,e=1/0,n){if(e<=0||!Bi(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Bs(t))fh(t.value,e,n);else if(Gn(t))for(let r=0;r<t.length;r++)fh(t[r],e,n);else if(ed(t)||Wd(t))t.forEach(r=>{fh(r,e,n)});else if(Av(t)){for(const r in t)fh(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&fh(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const tL=[];function g8(t){tL.push(t)}function m8(){tL.pop()}function v8(t,e){}const y8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},b8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function dp(t,e,n,r){try{return r?t(...r):t()}catch(i){td(i,e,n)}}function Au(t,e,n,r){if(br(t)){const i=dp(t,e,n,r);return i&&db(i)&&i.catch(s=>{td(s,e,n)}),i}if(Gn(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Au(t[s],e,n,r));return i}}function td(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||di;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const f=a.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,c)===!1)return}a=a.parent}if(s){cf(),dp(s,null,10,[t,l,c]),hf();return}}_8(t,n,i,r,o)}function _8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const al=[];let kc=-1;const Yd=[];let zh=null,Id=0;const nL=Promise.resolve();let K0=null;function ll(t){const e=K0||nL;return t?e.then(this?t.bind(this):t):e}function w8(t){let e=kc+1,n=al.length;for(;e<n;){const r=e+n>>>1,i=al[r],s=Dg(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function Eb(t){if(!(t.flags&1)){const e=Dg(t),n=al[al.length-1];!n||!(t.flags&2)&&e>=Dg(n)?al.push(t):al.splice(w8(e),0,t),t.flags|=1,rL()}}function rL(){K0||(K0=nL.then(iL))}function Og(t){Gn(t)?Yd.push(...t):zh&&t.id===-1?zh.splice(Id+1,0,t):t.flags&1||(Yd.push(t),t.flags|=1),rL()}function $w(t,e,n=kc+1){for(;n<al.length;n++){const r=al[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;al.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function X0(t){if(Yd.length){const e=[...new Set(Yd)].sort((n,r)=>Dg(n)-Dg(r));if(Yd.length=0,zh){zh.push(...e);return}for(zh=e,Id=0;Id<zh.length;Id++){const n=zh[Id];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}zh=null,Id=0}}const Dg=t=>t.id==null?t.flags&2?-1:1/0:t.id;function iL(t){try{for(kc=0;kc<al.length;kc++){const e=al[kc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),dp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;kc<al.length;kc++){const e=al[kc];e&&(e.flags&=-2)}kc=-1,al.length=0,X0(),K0=null,(al.length||Yd.length)&&iL()}}let Nd,jm=[];function sL(t,e){var n,r;Nd=t,Nd?(Nd.enabled=!0,jm.forEach(({event:i,args:s})=>Nd.emit(i,...s)),jm=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{sL(s,e)}),setTimeout(()=>{Nd||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,jm=[])},3e3)):jm=[]}let To=null,zv=null;function Ig(t){const e=To;return To=t,zv=t&&t.type.__scopeId||null,e}function x8(t){zv=t}function L8(){zv=null}const C8=t=>Nl;function Nl(t,e=To,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&s2(-1);const s=Ig(e);let o;try{o=t(...i)}finally{Ig(s),r._d&&s2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Fn(t,e){if(To===null)return t;const n=sm(To),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=di]=e[i];s&&(br(s)&&(s={mounted:s,updated:s}),s.deep&&fh(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Ac(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(cf(),Au(l,n,8,[t.el,a,t,e]),hf())}}const oL=Symbol("_vte"),aL=t=>t.__isTeleport,lg=t=>t&&(t.disabled||t.disabled===""),Vw=t=>t&&(t.defer||t.defer===""),Hw=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Ww=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,J1=(t,e)=>{const n=t&&t.to;return ts(n)?e?e(n):null:n},lL={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:f,pc:p,pbc:y,o:{insert:m,querySelector:C,createText:S,createComment:T}}=c,O=lg(e.props);let{shapeFlag:D,children:N,dynamicChildren:U}=e;if(t==null){const W=e.el=S(""),ee=e.anchor=S("");m(W,n,r),m(ee,n,r);const te=(Y,de)=>{D&16&&(i&&i.isCE&&(i.ce._teleportTarget=Y),f(N,Y,de,i,s,o,a,l))},V=()=>{const Y=e.target=J1(e.props,C),de=uL(Y,e,S,m);Y&&(o!=="svg"&&Hw(Y)?o="svg":o!=="mathml"&&Ww(Y)&&(o="mathml"),O||(te(Y,de),_0(e,!1)))};O&&(te(n,ee),_0(e,!0)),Vw(e.props)?Mo(()=>{V(),e.el.__isMounted=!0},s):V()}else{if(Vw(e.props)&&!t.el.__isMounted){Mo(()=>{lL.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const W=e.anchor=t.anchor,ee=e.target=t.target,te=e.targetAnchor=t.targetAnchor,V=lg(t.props),Y=V?n:ee,de=V?W:te;if(o==="svg"||Hw(ee)?o="svg":(o==="mathml"||Ww(ee))&&(o="mathml"),U?(y(t.dynamicChildren,U,Y,i,s,o,a),Rb(t,e,!0)):l||p(t,e,Y,de,i,s,o,a,!1),O)V?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):zm(e,n,W,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const $=e.target=J1(e.props,C);$&&zm(e,$,null,c,0)}else V&&zm(e,ee,te,c,1);_0(e,O)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:f,target:p,props:y}=t;if(p&&(i(c),i(f)),s&&i(l),o&16){const m=s||!lg(y);for(let C=0;C<a.length;C++){const S=a[C];r(S,e,n,m,!!S.dynamicChildren)}}},move:zm,hydrate:S8};function zm(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:f}=t,p=s===2;if(p&&r(o,e,n),(!p||lg(f))&&l&16)for(let y=0;y<c.length;y++)i(c[y],e,n,2);p&&r(a,e,n)}function S8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:f}},p){const y=e.target=J1(e.props,l);if(y){const m=lg(e.props),C=y._lpa||y.firstChild;if(e.shapeFlag&16)if(m)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=C,e.targetAnchor=C&&o(C);else{e.anchor=o(t);let S=C;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")e.targetStart=S;else if(S.data==="teleport anchor"){e.targetAnchor=S,y._lpa=e.targetAnchor&&o(e.targetAnchor);break}}S=o(S)}e.targetAnchor||uL(y,e,f,c),p(C&&o(C),e,y,n,r,i,s)}_0(e,m)}return e.anchor&&o(e.anchor)}const Bd=lL;function _0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function uL(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[oL]=s,t&&(r(i,t),r(s,t)),s}const Uh=Symbol("_leaveCb"),Um=Symbol("_enterCb");function Pb(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ks(()=>{t.isMounted=!0}),ff(()=>{t.isUnmounting=!0}),t}const Cu=[Function,Array],kb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Cu,onEnter:Cu,onAfterEnter:Cu,onEnterCancelled:Cu,onBeforeLeave:Cu,onLeave:Cu,onAfterLeave:Cu,onLeaveCancelled:Cu,onBeforeAppear:Cu,onAppear:Cu,onAfterAppear:Cu,onAppearCancelled:Cu},cL=t=>{const e=t.subTree;return e.component?cL(e.component):e},E8={name:"BaseTransition",props:kb,setup(t,{slots:e}){const n=Ou(),r=Pb();return()=>{const i=e.default&&Uv(e.default(),!0);if(!i||!i.length)return;const s=hL(i),o=hi(t),{mode:a}=o;if(r.isLeaving)return qy(s);const l=Gw(s);if(!l)return qy(s);let c=tp(l,o,r,n,p=>c=p);l.type!==Co&&_h(l,c);let f=n.subTree&&Gw(n.subTree);if(f&&f.type!==Co&&!tc(l,f)&&cL(n).type!==Co){let p=tp(f,o,r,n);if(_h(f,p),a==="out-in"&&l.type!==Co)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,f=void 0},qy(s);a==="in-out"&&l.type!==Co?p.delayLeave=(y,m,C)=>{const S=dL(r,f);S[String(f.key)]=f,y[Uh]=()=>{m(),y[Uh]=void 0,delete c.delayedLeave,f=void 0},c.delayedLeave=()=>{C(),delete c.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return s}}};function hL(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Co){e=n;break}}return e}const fL=E8;function dL(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function tp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:y,onLeave:m,onAfterLeave:C,onLeaveCancelled:S,onBeforeAppear:T,onAppear:O,onAfterAppear:D,onAppearCancelled:N}=e,U=String(t.key),W=dL(n,t),ee=(Y,de)=>{Y&&Au(Y,r,9,de)},te=(Y,de)=>{const $=de[1];ee(Y,de),Gn(Y)?Y.every(H=>H.length<=1)&&$():Y.length<=1&&$()},V={mode:o,persisted:a,beforeEnter(Y){let de=l;if(!n.isMounted)if(s)de=T||l;else return;Y[Uh]&&Y[Uh](!0);const $=W[U];$&&tc(t,$)&&$.el[Uh]&&$.el[Uh](),ee(de,[Y])},enter(Y){let de=c,$=f,H=p;if(!n.isMounted)if(s)de=O||c,$=D||f,H=N||p;else return;let le=!1;const ae=Y[Um]=z=>{le||(le=!0,z?ee(H,[Y]):ee($,[Y]),V.delayedLeave&&V.delayedLeave(),Y[Um]=void 0)};de?te(de,[Y,ae]):ae()},leave(Y,de){const $=String(t.key);if(Y[Um]&&Y[Um](!0),n.isUnmounting)return de();ee(y,[Y]);let H=!1;const le=Y[Uh]=ae=>{H||(H=!0,de(),ae?ee(S,[Y]):ee(C,[Y]),Y[Uh]=void 0,W[$]===t&&delete W[$])};W[$]=t,m?te(m,[Y,le]):le()},clone(Y){const de=tp(Y,e,n,r,i);return i&&i(de),de}};return V}function qy(t){if(rm(t))return t=jc(t),t.children=null,t}function Gw(t){if(!rm(t))return aL(t.type)&&t.children?hL(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&br(n.default))return n.default()}}function _h(t,e){t.shapeFlag&6&&t.component?(t.transition=e,_h(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Uv(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===bn?(o.patchFlag&128&&i++,r=r.concat(Uv(o.children,e,a))):(e||o.type!==Co)&&r.push(a!=null?jc(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ws(t,e){return br(t)?Gi({name:t.name},e,{setup:t}):t}function P8(){const t=Ou();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Mb(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function k8(t){const e=Ou(),n=Lb(null);if(e){const i=e.refs===di?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function Ng(t,e,n,r,i=!1){if(Gn(t)){t.forEach((C,S)=>Ng(C,e&&(Gn(e)?e[S]:e),n,r,i));return}if(Qh(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Ng(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?sm(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,f=a.refs===di?a.refs={}:a.refs,p=a.setupState,y=hi(p),m=p===di?()=>!1:C=>Ci(y,C);if(c!=null&&c!==l&&(ts(c)?(f[c]=null,m(c)&&(p[c]=null)):Bs(c)&&(c.value=null)),br(l))dp(l,a,12,[o,f]);else{const C=ts(l),S=Bs(l);if(C||S){const T=()=>{if(t.f){const O=C?m(l)?p[l]:f[l]:l.value;i?Gn(O)&&fb(O,s):Gn(O)?O.includes(s)||O.push(s):C?(f[l]=[s],m(l)&&(p[l]=f[l])):(l.value=[s],t.k&&(f[t.k]=l.value))}else C?(f[l]=o,m(l)&&(p[l]=o)):S&&(l.value=o,t.k&&(f[t.k]=o))};o?(T.id=-1,Mo(T,n)):T()}}}let qw=!1;const Ld=()=>{qw||(console.error("Hydration completed but contains mismatches."),qw=!0)},M8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",A8=t=>t.namespaceURI.includes("MathML"),$m=t=>{if(t.nodeType===1){if(M8(t))return"svg";if(A8(t))return"mathml"}},Ud=t=>t.nodeType===8;function T8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,f=(N,U)=>{if(!U.hasChildNodes()){n(null,N,U),X0(),U._vnode=N;return}p(U.firstChild,N,null,null,null),X0(),U._vnode=N},p=(N,U,W,ee,te,V=!1)=>{V=V||!!U.dynamicChildren;const Y=Ud(N)&&N.data==="[",de=()=>S(N,U,W,ee,te,Y),{type:$,ref:H,shapeFlag:le,patchFlag:ae}=U;let z=N.nodeType;U.el=N,ae===-2&&(V=!1,U.dynamicChildren=null);let B=null;switch($){case ef:z!==3?U.children===""?(l(U.el=i(""),o(N),N),B=N):B=de():(N.data!==U.children&&(Ld(),N.data=U.children),B=s(N));break;case Co:D(N)?(B=s(N),O(U.el=N.content.firstChild,N,W)):z!==8||Y?B=de():B=s(N);break;case Vf:if(Y&&(N=s(N),z=N.nodeType),z===1||z===3){B=N;const X=!U.children.length;for(let K=0;K<U.staticCount;K++)X&&(U.children+=B.nodeType===1?B.outerHTML:B.data),K===U.staticCount-1&&(U.anchor=B),B=s(B);return Y?s(B):B}else de();break;case bn:Y?B=C(N,U,W,ee,te,V):B=de();break;default:if(le&1)(z!==1||U.type.toLowerCase()!==N.tagName.toLowerCase())&&!D(N)?B=de():B=y(N,U,W,ee,te,V);else if(le&6){U.slotScopeIds=te;const X=o(N);if(Y?B=T(N):Ud(N)&&N.data==="teleport start"?B=T(N,N.data,"teleport end"):B=s(N),e(U,X,null,W,ee,$m(X),V),Qh(U)&&!U.type.__asyncResolved){let K;Y?(K=Kr(bn),K.anchor=B?B.previousSibling:X.lastChild):K=N.nodeType===3?jr(""):Kr("div"),K.el=N,U.component.subTree=K}}else le&64?z!==8?B=de():B=U.type.hydrate(N,U,W,ee,te,V,t,m):le&128&&(B=U.type.hydrate(N,U,W,ee,$m(o(N)),te,V,t,p))}return H!=null&&Ng(H,null,ee,U),B},y=(N,U,W,ee,te,V)=>{V=V||!!U.dynamicChildren;const{type:Y,props:de,patchFlag:$,shapeFlag:H,dirs:le,transition:ae}=U,z=Y==="input"||Y==="option";if(z||$!==-1){le&&Ac(U,null,W,"created");let B=!1;if(D(N)){B=zL(null,ae)&&W&&W.vnode.props&&W.vnode.props.appear;const K=N.content.firstChild;B&&ae.beforeEnter(K),O(K,N,W),U.el=N=K}if(H&16&&!(de&&(de.innerHTML||de.textContent))){let K=m(N.firstChild,U,N,W,ee,te,V);for(;K;){Vm(N,1)||Ld();const ye=K;K=K.nextSibling,a(ye)}}else if(H&8){let K=U.children;K[0]===`
`&&(N.tagName==="PRE"||N.tagName==="TEXTAREA")&&(K=K.slice(1)),N.textContent!==K&&(Vm(N,0)||Ld(),N.textContent=U.children)}if(de){if(z||!V||$&48){const K=N.tagName.includes("-");for(const ye in de)(z&&(ye.endsWith("value")||ye==="indeterminate")||tm(ye)&&!Gd(ye)||ye[0]==="."||K)&&r(N,ye,null,de[ye],void 0,W)}else if(de.onClick)r(N,"onClick",null,de.onClick,void 0,W);else if($&4&&Nc(de.style))for(const K in de.style)de.style[K]}let X;(X=de&&de.onVnodeBeforeMount)&&Al(X,W,U),le&&Ac(U,null,W,"beforeMount"),((X=de&&de.onVnodeMounted)||le||B)&&ZL(()=>{X&&Al(X,W,U),B&&ae.enter(N),le&&Ac(U,null,W,"mounted")},ee)}return N.nextSibling},m=(N,U,W,ee,te,V,Y)=>{Y=Y||!!U.dynamicChildren;const de=U.children,$=de.length;for(let H=0;H<$;H++){const le=Y?de[H]:de[H]=Dl(de[H]),ae=le.type===ef;N?(ae&&!Y&&H+1<$&&Dl(de[H+1]).type===ef&&(l(i(N.data.slice(le.children.length)),W,s(N)),N.data=le.children),N=p(N,le,ee,te,V,Y)):ae&&!le.children?l(le.el=i(""),W):(Vm(W,1)||Ld(),n(null,le,W,null,ee,te,$m(W),V))}return N},C=(N,U,W,ee,te,V)=>{const{slotScopeIds:Y}=U;Y&&(te=te?te.concat(Y):Y);const de=o(N),$=m(s(N),U,de,W,ee,te,V);return $&&Ud($)&&$.data==="]"?s(U.anchor=$):(Ld(),l(U.anchor=c("]"),de,$),$)},S=(N,U,W,ee,te,V)=>{if(Vm(N.parentElement,1)||Ld(),U.el=null,V){const $=T(N);for(;;){const H=s(N);if(H&&H!==$)a(H);else break}}const Y=s(N),de=o(N);return a(N),n(null,U,de,Y,W,ee,$m(de),te),W&&(W.vnode.el=U.el,Wv(W,U.el)),Y},T=(N,U="[",W="]")=>{let ee=0;for(;N;)if(N=s(N),N&&Ud(N)&&(N.data===U&&ee++,N.data===W)){if(ee===0)return s(N);ee--}return N},O=(N,U,W)=>{const ee=U.parentNode;ee&&ee.replaceChild(N,U);let te=W;for(;te;)te.vnode.el===U&&(te.vnode.el=te.subTree.el=N),te=te.parent},D=N=>N.nodeType===1&&N.tagName==="TEMPLATE";return[f,p]}const Yw="data-allow-mismatch",O8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Vm(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Yw);)t=t.parentElement;const n=t&&t.getAttribute(Yw);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes(O8[e])}}const D8=Ov().requestIdleCallback||(t=>setTimeout(t,1)),I8=Ov().cancelIdleCallback||(t=>clearTimeout(t)),N8=(t=1e4)=>e=>{const n=D8(e,{timeout:t});return()=>I8(n)};function B8(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const R8=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(B8(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},F8=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},j8=(t=[])=>(e,n)=>{ts(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function z8(t,e){if(Ud(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(Ud(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const Qh=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function U8(t){br(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,f,p=0;const y=()=>(p++,c=null,m()),m=()=>{let C;return c||(C=c=e().catch(S=>{if(S=S instanceof Error?S:new Error(String(S)),l)return new Promise((T,O)=>{l(S,()=>T(y()),()=>O(S),p+1)});throw S}).then(S=>C!==c&&c?c:(S&&(S.__esModule||S[Symbol.toStringTag]==="Module")&&(S=S.default),f=S,S)))};return ws({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(C,S,T){const O=s?()=>{const D=s(T,N=>z8(C,N));D&&(S.bum||(S.bum=[])).push(D)}:T;f?O():m().then(()=>!S.isUnmounted&&O())},get __asyncResolved(){return f},setup(){const C=Ao;if(Mb(C),f)return()=>Yy(f,C);const S=N=>{c=null,td(N,C,13,!r)};if(a&&C.suspense||np)return m().then(N=>()=>Yy(N,C)).catch(N=>(S(N),()=>r?Kr(r,{error:N}):null));const T=kt(!1),O=kt(),D=kt(!!i);return i&&setTimeout(()=>{D.value=!1},i),o!=null&&setTimeout(()=>{if(!T.value&&!O.value){const N=new Error(`Async component timed out after ${o}ms.`);S(N),O.value=N}},o),m().then(()=>{T.value=!0,C.parent&&rm(C.parent.vnode)&&C.parent.update()}).catch(N=>{S(N),O.value=N}),()=>{if(T.value&&f)return Yy(f,C);if(O.value&&r)return Kr(r,{error:O.value});if(n&&!D.value)return Kr(n)}}})}function Yy(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=Kr(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const rm=t=>t.type.__isKeepAlive,$8={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Ou(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:f,o:{createElement:p}}}=r,y=p("div");r.activate=(D,N,U,W,ee)=>{const te=D.component;c(D,N,U,0,a),l(te.vnode,D,N,U,te,a,W,D.slotScopeIds,ee),Mo(()=>{te.isDeactivated=!1,te.a&&qd(te.a);const V=D.props&&D.props.onVnodeMounted;V&&Al(V,te.parent,D)},a)},r.deactivate=D=>{const N=D.component;Q0(N.m),Q0(N.a),c(D,y,null,1,a),Mo(()=>{N.da&&qd(N.da);const U=D.props&&D.props.onVnodeUnmounted;U&&Al(U,N.parent,D),N.isDeactivated=!0},a)};function m(D){Zy(D),f(D,n,a,!0)}function C(D){i.forEach((N,U)=>{const W=c2(N.type);W&&!D(W)&&S(U)})}function S(D){const N=i.get(D);N&&(!o||!tc(N,o))?m(N):o&&Zy(o),i.delete(D),s.delete(D)}vi(()=>[t.include,t.exclude],([D,N])=>{D&&C(U=>Wp(D,U)),N&&C(U=>!Wp(N,U))},{flush:"post",deep:!0});let T=null;const O=()=>{T!=null&&(ev(n.subTree.type)?Mo(()=>{i.set(T,Hm(n.subTree))},n.subTree.suspense):i.set(T,Hm(n.subTree)))};return Ks(O),Vv(O),ff(()=>{i.forEach(D=>{const{subTree:N,suspense:U}=n,W=Hm(N);if(D.type===W.type&&D.key===W.key){Zy(W);const ee=W.component.da;ee&&Mo(ee,U);return}m(D)})}),()=>{if(T=null,!e.default)return o=null;const D=e.default(),N=D[0];if(D.length>1)return o=null,D;if(!wh(N)||!(N.shapeFlag&4)&&!(N.shapeFlag&128))return o=null,N;let U=Hm(N);if(U.type===Co)return o=null,U;const W=U.type,ee=c2(Qh(U)?U.type.__asyncResolved||{}:W),{include:te,exclude:V,max:Y}=t;if(te&&(!ee||!Wp(te,ee))||V&&ee&&Wp(V,ee))return U.shapeFlag&=-257,o=U,N;const de=U.key==null?W:U.key,$=i.get(de);return U.el&&(U=jc(U),N.shapeFlag&128&&(N.ssContent=U)),T=de,$?(U.el=$.el,U.component=$.component,U.transition&&_h(U,U.transition),U.shapeFlag|=512,s.delete(de),s.add(de)):(s.add(de),Y&&s.size>parseInt(Y,10)&&S(s.values().next().value)),U.shapeFlag|=256,o=U,ev(N.type)?N:U}}},V8=$8;function Wp(t,e){return Gn(t)?t.some(n=>Wp(n,e)):ts(t)?t.split(",").includes(e):bT(t)?(t.lastIndex=0,t.test(e)):!1}function pL(t,e){mL(t,"a",e)}function gL(t,e){mL(t,"da",e)}function mL(t,e,n=Ao){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if($v(e,r,n),n){let i=n.parent;for(;i&&i.parent;)rm(i.parent.vnode)&&H8(r,e,n,i),i=i.parent}}function H8(t,e,n,r){const i=$v(e,t,r,!0);ku(()=>{fb(r[e],i)},n)}function Zy(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Hm(t){return t.shapeFlag&128?t.ssContent:t}function $v(t,e,n=Ao,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{cf();const a=Kf(n),l=Au(e,n,t,o);return a(),hf(),l});return r?i.unshift(s):i.push(s),s}}const xh=t=>(e,n=Ao)=>{(!np||t==="sp")&&$v(t,(...r)=>e(...r),n)},vL=xh("bm"),Ks=xh("m"),Ab=xh("bu"),Vv=xh("u"),ff=xh("bum"),ku=xh("um"),yL=xh("sp"),bL=xh("rtg"),_L=xh("rtc");function wL(t,e=Ao){$v("ec",t,e)}const Tb="components",W8="directives";function Ob(t,e){return Db(Tb,t,!0,e)||t}const xL=Symbol.for("v-ndc");function LL(t){return ts(t)?Db(Tb,t,!1)||t:t||xL}function G8(t){return Db(W8,t)}function Db(t,e,n=!0,r=!1){const i=To||Ao;if(i){const s=i.type;if(t===Tb){const a=c2(s,!1);if(a&&(a===e||a===fa(e)||a===nm(fa(e))))return s}const o=Zw(i[t]||s[t],e)||Zw(i.appContext[t],e);return!o&&r?s:o}}function Zw(t,e){return t&&(t[e]||t[fa(e)]||t[nm(fa(e))])}function ar(t,e,n,r){let i;const s=n&&n[r],o=Gn(t);if(o||ts(t)){const a=o&&Nc(t);let l=!1;a&&(l=!ou(t),t=Nv(t)),i=new Array(t.length);for(let c=0,f=t.length;c<f;c++)i[c]=e(l?Na(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(Bi(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const f=a[l];i[l]=e(t[f],f,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function q8(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Gn(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function Y8(t,e,n={},r,i){if(To.ce||To.parent&&Qh(To.parent)&&To.parent.ce)return e!=="default"&&(n.name=e),Ne(),Lo(bn,null,[Kr("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Ne();const o=s&&Ib(s(n)),a=n.key||o&&o.key,l=Lo(bn,{key:(a&&!oc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function Ib(t){return t.some(e=>wh(e)?!(e.type===Co||e.type===bn&&!Ib(e.children)):!0)?t:null}function Z8(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:sg(r)]=t[r];return n}const Q1=t=>t?nC(t)?sm(t):Q1(t.parent):null,ug=Gi(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Q1(t.parent),$root:t=>Q1(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Nb(t),$forceUpdate:t=>t.f||(t.f=()=>{Eb(t.update)}),$nextTick:t=>t.n||(t.n=ll.bind(t.proxy)),$watch:t=>SO.bind(t)}),Ky=(t,e)=>t!==di&&!t.__isScriptSetup&&Ci(t,e),e2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Ky(r,e))return o[e]=1,r[e];if(i!==di&&Ci(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Ci(c,e))return o[e]=3,s[e];if(n!==di&&Ci(n,e))return o[e]=4,n[e];t2&&(o[e]=0)}}const f=ug[e];let p,y;if(f)return e==="$attrs"&&Ia(t.attrs,"get",""),f(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==di&&Ci(n,e))return o[e]=4,n[e];if(y=l.config.globalProperties,Ci(y,e))return y[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Ky(i,e)?(i[e]=n,!0):r!==di&&Ci(r,e)?(r[e]=n,!0):Ci(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==di&&Ci(t,o)||Ky(e,o)||(a=s[0])&&Ci(a,o)||Ci(r,o)||Ci(ug,o)||Ci(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ci(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},K8=Gi({},e2,{get(t,e){if(e!==Symbol.unscopables)return e2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!CT(e)}});function X8(){return null}function J8(){return null}function Q8(t){}function eO(t){}function tO(){return null}function nO(){}function rO(t,e){return null}function iO(){return CL().slots}function sO(){return CL().attrs}function CL(){const t=Ou();return t.setupContext||(t.setupContext=sC(t))}function Bg(t){return Gn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function oO(t,e){const n=Bg(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?Gn(i)||br(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function aO(t,e){return!t||!e?t||e:Gn(t)&&Gn(e)?t.concat(e):Gi({},Bg(t),Bg(e))}function lO(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function uO(t){const e=Ou();let n=t();return a2(),db(n)&&(n=n.catch(r=>{throw Kf(e),r})),[n,()=>Kf(e)]}let t2=!0;function cO(t){const e=Nb(t),n=t.proxy,r=t.ctx;t2=!1,e.beforeCreate&&Kw(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:f,beforeMount:p,mounted:y,beforeUpdate:m,updated:C,activated:S,deactivated:T,beforeDestroy:O,beforeUnmount:D,destroyed:N,unmounted:U,render:W,renderTracked:ee,renderTriggered:te,errorCaptured:V,serverPrefetch:Y,expose:de,inheritAttrs:$,components:H,directives:le,filters:ae}=e;if(c&&hO(c,r,null),o)for(const X in o){const K=o[X];br(K)&&(r[X]=K.bind(n))}if(i){const X=i.call(n,n);Bi(X)&&(t.data=cu(X))}if(t2=!0,s)for(const X in s){const K=s[X],ye=br(K)?K.bind(n,n):br(K.get)?K.get.bind(n,n):Pu,Te=!br(K)&&br(K.set)?K.set.bind(n):Pu,Ue=ir({get:ye,set:Te});Object.defineProperty(r,X,{enumerable:!0,configurable:!0,get:()=>Ue.value,set:J=>Ue.value=J})}if(a)for(const X in a)SL(a[X],r,n,X);if(l){const X=br(l)?l.call(n):l;Reflect.ownKeys(X).forEach(K=>{cg(K,X[K])})}f&&Kw(f,t,"c");function B(X,K){Gn(K)?K.forEach(ye=>X(ye.bind(n))):K&&X(K.bind(n))}if(B(vL,p),B(Ks,y),B(Ab,m),B(Vv,C),B(pL,S),B(gL,T),B(wL,V),B(_L,ee),B(bL,te),B(ff,D),B(ku,U),B(yL,Y),Gn(de))if(de.length){const X=t.exposed||(t.exposed={});de.forEach(K=>{Object.defineProperty(X,K,{get:()=>n[K],set:ye=>n[K]=ye})})}else t.exposed||(t.exposed={});W&&t.render===Pu&&(t.render=W),$!=null&&(t.inheritAttrs=$),H&&(t.components=H),le&&(t.directives=le),Y&&Mb(t)}function hO(t,e,n=Pu){Gn(t)&&(t=n2(t));for(const r in t){const i=t[r];let s;Bi(i)?"default"in i?s=au(i.from||r,i.default,!0):s=au(i.from||r):s=au(i),Bs(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Kw(t,e,n){Au(Gn(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function SL(t,e,n,r){let i=r.includes(".")?WL(n,r):()=>n[r];if(ts(t)){const s=e[t];br(s)&&vi(i,s)}else if(br(t))vi(i,t.bind(n));else if(Bi(t))if(Gn(t))t.forEach(s=>SL(s,e,n,r));else{const s=br(t.handler)?t.handler.bind(n):e[t.handler];br(s)&&vi(i,s,t)}}function Nb(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>J0(l,c,o,!0)),J0(l,e,o)),Bi(e)&&s.set(e,l),l}function J0(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&J0(t,s,n,!0),i&&i.forEach(o=>J0(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=fO[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const fO={data:Xw,props:Jw,emits:Jw,methods:Gp,computed:Gp,beforeCreate:tl,created:tl,beforeMount:tl,mounted:tl,beforeUpdate:tl,updated:tl,beforeDestroy:tl,beforeUnmount:tl,destroyed:tl,unmounted:tl,activated:tl,deactivated:tl,errorCaptured:tl,serverPrefetch:tl,components:Gp,directives:Gp,watch:pO,provide:Xw,inject:dO};function Xw(t,e){return e?t?function(){return Gi(br(t)?t.call(this,this):t,br(e)?e.call(this,this):e)}:e:t}function dO(t,e){return Gp(n2(t),n2(e))}function n2(t){if(Gn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function tl(t,e){return t?[...new Set([].concat(t,e))]:e}function Gp(t,e){return t?Gi(Object.create(null),t,e):e}function Jw(t,e){return t?Gn(t)&&Gn(e)?[...new Set([...t,...e])]:Gi(Object.create(null),Bg(t),Bg(e??{})):e}function pO(t,e){if(!t)return e;if(!e)return t;const n=Gi(Object.create(null),t);for(const r in e)n[r]=tl(t[r],e[r]);return n}function EL(){return{app:null,config:{isNativeTag:vT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gO=0;function mO(t,e){return function(r,i=null){br(r)||(r=Gi({},r)),i!=null&&!Bi(i)&&(i=null);const s=EL(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:gO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:aC,get config(){return s.config},set config(f){},use(f,...p){return o.has(f)||(f&&br(f.install)?(o.add(f),f.install(c,...p)):br(f)&&(o.add(f),f(c,...p))),c},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),c},component(f,p){return p?(s.components[f]=p,c):s.components[f]},directive(f,p){return p?(s.directives[f]=p,c):s.directives[f]},mount(f,p,y){if(!l){const m=c._ceVNode||Kr(r,i);return m.appContext=s,y===!0?y="svg":y===!1&&(y=void 0),p&&e?e(m,f):t(m,f,y),l=!0,c._container=f,f.__vue_app__=c,sm(m.component)}},onUnmount(f){a.push(f)},unmount(){l&&(Au(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(f,p){return s.provides[f]=p,c},runWithContext(f){const p=$f;$f=c;try{return f()}finally{$f=p}}};return c}}let $f=null;function cg(t,e){if(Ao){let n=Ao.provides;const r=Ao.parent&&Ao.parent.provides;r===n&&(n=Ao.provides=Object.create(r)),n[t]=e}}function au(t,e,n=!1){const r=Ao||To;if(r||$f){const i=$f?$f._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&br(e)?e.call(r&&r.proxy):e}}function PL(){return!!(Ao||To||$f)}const kL={},ML=()=>Object.create(kL),AL=t=>Object.getPrototypeOf(t)===kL;function vO(t,e,n,r=!1){const i={},s=ML();t.propsDefaults=Object.create(null),TL(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:wb(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function yO(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=hi(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let y=f[p];if(Hv(t.emitsOptions,y))continue;const m=e[y];if(l)if(Ci(s,y))m!==s[y]&&(s[y]=m,c=!0);else{const C=fa(y);i[C]=r2(l,a,C,m,t,!1)}else m!==s[y]&&(s[y]=m,c=!0)}}}else{TL(t,e,i,s)&&(c=!0);let f;for(const p in a)(!e||!Ci(e,p)&&((f=Il(p))===p||!Ci(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(i[p]=r2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!Ci(e,p))&&(delete s[p],c=!0)}c&&hh(t.attrs,"set","")}function TL(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Gd(l))continue;const c=e[l];let f;i&&Ci(i,f=fa(l))?!s||!s.includes(f)?n[f]=c:(a||(a={}))[f]=c:Hv(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=hi(n),c=a||di;for(let f=0;f<s.length;f++){const p=s[f];n[p]=r2(i,l,p,c[p],t,!Ci(c,p))}}return o}function r2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Ci(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&br(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const f=Kf(i);r=c[n]=l.call(null,e),f()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Il(n))&&(r=!0))}return r}const bO=new WeakMap;function OL(t,e,n=!1){const r=n?bO:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!br(t)){const f=p=>{l=!0;const[y,m]=OL(p,e,!0);Gi(o,y),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!s&&!l)return Bi(t)&&r.set(t,Hd),Hd;if(Gn(s))for(let f=0;f<s.length;f++){const p=fa(s[f]);Qw(p)&&(o[p]=di)}else if(s)for(const f in s){const p=fa(f);if(Qw(p)){const y=s[f],m=o[p]=Gn(y)||br(y)?{type:y}:Gi({},y),C=m.type;let S=!1,T=!0;if(Gn(C))for(let O=0;O<C.length;++O){const D=C[O],N=br(D)&&D.name;if(N==="Boolean"){S=!0;break}else N==="String"&&(T=!1)}else S=br(C)&&C.name==="Boolean";m[0]=S,m[1]=T,(S||Ci(m,"default"))&&a.push(p)}}const c=[o,a];return Bi(t)&&r.set(t,c),c}function Qw(t){return t[0]!=="$"&&!Gd(t)}const DL=t=>t[0]==="_"||t==="$stable",Bb=t=>Gn(t)?t.map(Dl):[Dl(t)],_O=(t,e,n)=>{if(e._n)return e;const r=Nl((...i)=>Bb(e(...i)),n);return r._c=!1,r},IL=(t,e,n)=>{const r=t._ctx;for(const i in t){if(DL(i))continue;const s=t[i];if(br(s))e[i]=_O(i,s,r);else if(s!=null){const o=Bb(s);e[i]=()=>o}}},NL=(t,e)=>{const n=Bb(e);t.slots.default=()=>n},BL=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},wO=(t,e,n)=>{const r=t.slots=ML();if(t.vnode.shapeFlag&32){const i=e._;i?(BL(r,e,n),n&&T3(r,"_",i,!0)):IL(e,r)}else e&&NL(t,e)},xO=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=di;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:BL(i,e,n):(s=!e.$stable,IL(e,i)),o=e}else e&&(NL(t,e),o={default:1});if(s)for(const a in i)!DL(a)&&o[a]==null&&delete i[a]},Mo=ZL;function RL(t){return jL(t)}function FL(t){return jL(t,T8)}function jL(t,e){const n=Ov();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:f,parentNode:p,nextSibling:y,setScopeId:m=Pu,insertStaticContent:C}=t,S=(ue,oe,ce,Q=null,Pe=null,Ve=null,Qe=void 0,ot=null,at=!!oe.dynamicChildren)=>{if(ue===oe)return;ue&&!tc(ue,oe)&&(Q=be(ue),J(ue,Pe,Ve,!0),ue=null),oe.patchFlag===-2&&(at=!1,oe.dynamicChildren=null);const{type:pt,ref:Ft,shapeFlag:Bt}=oe;switch(pt){case ef:T(ue,oe,ce,Q);break;case Co:O(ue,oe,ce,Q);break;case Vf:ue==null&&D(oe,ce,Q,Qe);break;case bn:H(ue,oe,ce,Q,Pe,Ve,Qe,ot,at);break;default:Bt&1?W(ue,oe,ce,Q,Pe,Ve,Qe,ot,at):Bt&6?le(ue,oe,ce,Q,Pe,Ve,Qe,ot,at):(Bt&64||Bt&128)&&pt.process(ue,oe,ce,Q,Pe,Ve,Qe,ot,at,Je)}Ft!=null&&Pe&&Ng(Ft,ue&&ue.ref,Ve,oe||ue,!oe)},T=(ue,oe,ce,Q)=>{if(ue==null)r(oe.el=a(oe.children),ce,Q);else{const Pe=oe.el=ue.el;oe.children!==ue.children&&c(Pe,oe.children)}},O=(ue,oe,ce,Q)=>{ue==null?r(oe.el=l(oe.children||""),ce,Q):oe.el=ue.el},D=(ue,oe,ce,Q)=>{[ue.el,ue.anchor]=C(ue.children,oe,ce,Q,ue.el,ue.anchor)},N=({el:ue,anchor:oe},ce,Q)=>{let Pe;for(;ue&&ue!==oe;)Pe=y(ue),r(ue,ce,Q),ue=Pe;r(oe,ce,Q)},U=({el:ue,anchor:oe})=>{let ce;for(;ue&&ue!==oe;)ce=y(ue),i(ue),ue=ce;i(oe)},W=(ue,oe,ce,Q,Pe,Ve,Qe,ot,at)=>{oe.type==="svg"?Qe="svg":oe.type==="math"&&(Qe="mathml"),ue==null?ee(oe,ce,Q,Pe,Ve,Qe,ot,at):Y(ue,oe,Pe,Ve,Qe,ot,at)},ee=(ue,oe,ce,Q,Pe,Ve,Qe,ot)=>{let at,pt;const{props:Ft,shapeFlag:Bt,transition:Zt,dirs:ln}=ue;if(at=ue.el=o(ue.type,Ve,Ft&&Ft.is,Ft),Bt&8?f(at,ue.children):Bt&16&&V(ue.children,at,null,Q,Pe,Xy(ue,Ve),Qe,ot),ln&&Ac(ue,null,Q,"created"),te(at,ue,ue.scopeId,Qe,Q),Ft){for(const Sn in Ft)Sn!=="value"&&!Gd(Sn)&&s(at,Sn,null,Ft[Sn],Ve,Q);"value"in Ft&&s(at,"value",null,Ft.value,Ve),(pt=Ft.onVnodeBeforeMount)&&Al(pt,Q,ue)}ln&&Ac(ue,null,Q,"beforeMount");const un=zL(Pe,Zt);un&&Zt.beforeEnter(at),r(at,oe,ce),((pt=Ft&&Ft.onVnodeMounted)||un||ln)&&Mo(()=>{pt&&Al(pt,Q,ue),un&&Zt.enter(at),ln&&Ac(ue,null,Q,"mounted")},Pe)},te=(ue,oe,ce,Q,Pe)=>{if(ce&&m(ue,ce),Q)for(let Ve=0;Ve<Q.length;Ve++)m(ue,Q[Ve]);if(Pe){let Ve=Pe.subTree;if(oe===Ve||ev(Ve.type)&&(Ve.ssContent===oe||Ve.ssFallback===oe)){const Qe=Pe.vnode;te(ue,Qe,Qe.scopeId,Qe.slotScopeIds,Pe.parent)}}},V=(ue,oe,ce,Q,Pe,Ve,Qe,ot,at=0)=>{for(let pt=at;pt<ue.length;pt++){const Ft=ue[pt]=ot?$h(ue[pt]):Dl(ue[pt]);S(null,Ft,oe,ce,Q,Pe,Ve,Qe,ot)}},Y=(ue,oe,ce,Q,Pe,Ve,Qe)=>{const ot=oe.el=ue.el;let{patchFlag:at,dynamicChildren:pt,dirs:Ft}=oe;at|=ue.patchFlag&16;const Bt=ue.props||di,Zt=oe.props||di;let ln;if(ce&&Cf(ce,!1),(ln=Zt.onVnodeBeforeUpdate)&&Al(ln,ce,oe,ue),Ft&&Ac(oe,ue,ce,"beforeUpdate"),ce&&Cf(ce,!0),(Bt.innerHTML&&Zt.innerHTML==null||Bt.textContent&&Zt.textContent==null)&&f(ot,""),pt?de(ue.dynamicChildren,pt,ot,ce,Q,Xy(oe,Pe),Ve):Qe||K(ue,oe,ot,null,ce,Q,Xy(oe,Pe),Ve,!1),at>0){if(at&16)$(ot,Bt,Zt,ce,Pe);else if(at&2&&Bt.class!==Zt.class&&s(ot,"class",null,Zt.class,Pe),at&4&&s(ot,"style",Bt.style,Zt.style,Pe),at&8){const un=oe.dynamicProps;for(let Sn=0;Sn<un.length;Sn++){const qe=un[Sn],it=Bt[qe],Ze=Zt[qe];(Ze!==it||qe==="value")&&s(ot,qe,it,Ze,Pe,ce)}}at&1&&ue.children!==oe.children&&f(ot,oe.children)}else!Qe&&pt==null&&$(ot,Bt,Zt,ce,Pe);((ln=Zt.onVnodeUpdated)||Ft)&&Mo(()=>{ln&&Al(ln,ce,oe,ue),Ft&&Ac(oe,ue,ce,"updated")},Q)},de=(ue,oe,ce,Q,Pe,Ve,Qe)=>{for(let ot=0;ot<oe.length;ot++){const at=ue[ot],pt=oe[ot],Ft=at.el&&(at.type===bn||!tc(at,pt)||at.shapeFlag&70)?p(at.el):ce;S(at,pt,Ft,null,Q,Pe,Ve,Qe,!0)}},$=(ue,oe,ce,Q,Pe)=>{if(oe!==ce){if(oe!==di)for(const Ve in oe)!Gd(Ve)&&!(Ve in ce)&&s(ue,Ve,oe[Ve],null,Pe,Q);for(const Ve in ce){if(Gd(Ve))continue;const Qe=ce[Ve],ot=oe[Ve];Qe!==ot&&Ve!=="value"&&s(ue,Ve,ot,Qe,Pe,Q)}"value"in ce&&s(ue,"value",oe.value,ce.value,Pe)}},H=(ue,oe,ce,Q,Pe,Ve,Qe,ot,at)=>{const pt=oe.el=ue?ue.el:a(""),Ft=oe.anchor=ue?ue.anchor:a("");let{patchFlag:Bt,dynamicChildren:Zt,slotScopeIds:ln}=oe;ln&&(ot=ot?ot.concat(ln):ln),ue==null?(r(pt,ce,Q),r(Ft,ce,Q),V(oe.children||[],ce,Ft,Pe,Ve,Qe,ot,at)):Bt>0&&Bt&64&&Zt&&ue.dynamicChildren?(de(ue.dynamicChildren,Zt,ce,Pe,Ve,Qe,ot),(oe.key!=null||Pe&&oe===Pe.subTree)&&Rb(ue,oe,!0)):K(ue,oe,ce,Ft,Pe,Ve,Qe,ot,at)},le=(ue,oe,ce,Q,Pe,Ve,Qe,ot,at)=>{oe.slotScopeIds=ot,ue==null?oe.shapeFlag&512?Pe.ctx.activate(oe,ce,Q,Qe,at):ae(oe,ce,Q,Pe,Ve,Qe,at):z(ue,oe,at)},ae=(ue,oe,ce,Q,Pe,Ve,Qe)=>{const ot=ue.component=tC(ue,Q,Pe);if(rm(ue)&&(ot.ctx.renderer=Je),rC(ot,!1,Qe),ot.asyncDep){if(Pe&&Pe.registerDep(ot,B,Qe),!ue.el){const at=ot.subTree=Kr(Co);O(null,at,oe,ce)}}else B(ot,ue,oe,ce,Pe,Ve,Qe)},z=(ue,oe,ce)=>{const Q=oe.component=ue.component;if(TO(ue,oe,ce))if(Q.asyncDep&&!Q.asyncResolved){X(Q,oe,ce);return}else Q.next=oe,Q.update();else oe.el=ue.el,Q.vnode=oe},B=(ue,oe,ce,Q,Pe,Ve,Qe)=>{const ot=()=>{if(ue.isMounted){let{next:Bt,bu:Zt,u:ln,parent:un,vnode:Sn}=ue;{const Yt=UL(ue);if(Yt){Bt&&(Bt.el=Sn.el,X(ue,Bt,Qe)),Yt.asyncDep.then(()=>{ue.isUnmounted||ot()});return}}let qe=Bt,it;Cf(ue,!1),Bt?(Bt.el=Sn.el,X(ue,Bt,Qe)):Bt=Sn,Zt&&qd(Zt),(it=Bt.props&&Bt.props.onVnodeBeforeUpdate)&&Al(it,un,Bt,Sn),Cf(ue,!0);const Ze=w0(ue),Ut=ue.subTree;ue.subTree=Ze,S(Ut,Ze,p(Ut.el),be(Ut),ue,Pe,Ve),Bt.el=Ze.el,qe===null&&Wv(ue,Ze.el),ln&&Mo(ln,Pe),(it=Bt.props&&Bt.props.onVnodeUpdated)&&Mo(()=>Al(it,un,Bt,Sn),Pe)}else{let Bt;const{el:Zt,props:ln}=oe,{bm:un,m:Sn,parent:qe,root:it,type:Ze}=ue,Ut=Qh(oe);if(Cf(ue,!1),un&&qd(un),!Ut&&(Bt=ln&&ln.onVnodeBeforeMount)&&Al(Bt,qe,oe),Cf(ue,!0),Zt&&_t){const Yt=()=>{ue.subTree=w0(ue),_t(Zt,ue.subTree,ue,Pe,null)};Ut&&Ze.__asyncHydrate?Ze.__asyncHydrate(Zt,ue,Yt):Yt()}else{it.ce&&it.ce._injectChildStyle(Ze);const Yt=ue.subTree=w0(ue);S(null,Yt,ce,Q,ue,Pe,Ve),oe.el=Yt.el}if(Sn&&Mo(Sn,Pe),!Ut&&(Bt=ln&&ln.onVnodeMounted)){const Yt=oe;Mo(()=>Al(Bt,qe,Yt),Pe)}(oe.shapeFlag&256||qe&&Qh(qe.vnode)&&qe.vnode.shapeFlag&256)&&ue.a&&Mo(ue.a,Pe),ue.isMounted=!0,oe=ce=Q=null}};ue.scope.on();const at=ue.effect=new Mg(ot);ue.scope.off();const pt=ue.update=at.run.bind(at),Ft=ue.job=at.runIfDirty.bind(at);Ft.i=ue,Ft.id=ue.uid,at.scheduler=()=>Eb(Ft),Cf(ue,!0),pt()},X=(ue,oe,ce)=>{oe.component=ue;const Q=ue.vnode.props;ue.vnode=oe,ue.next=null,yO(ue,oe.props,Q,ce),xO(ue,oe.children,ce),cf(),$w(ue),hf()},K=(ue,oe,ce,Q,Pe,Ve,Qe,ot,at=!1)=>{const pt=ue&&ue.children,Ft=ue?ue.shapeFlag:0,Bt=oe.children,{patchFlag:Zt,shapeFlag:ln}=oe;if(Zt>0){if(Zt&128){Te(pt,Bt,ce,Q,Pe,Ve,Qe,ot,at);return}else if(Zt&256){ye(pt,Bt,ce,Q,Pe,Ve,Qe,ot,at);return}}ln&8?(Ft&16&&we(pt,Pe,Ve),Bt!==pt&&f(ce,Bt)):Ft&16?ln&16?Te(pt,Bt,ce,Q,Pe,Ve,Qe,ot,at):we(pt,Pe,Ve,!0):(Ft&8&&f(ce,""),ln&16&&V(Bt,ce,Q,Pe,Ve,Qe,ot,at))},ye=(ue,oe,ce,Q,Pe,Ve,Qe,ot,at)=>{ue=ue||Hd,oe=oe||Hd;const pt=ue.length,Ft=oe.length,Bt=Math.min(pt,Ft);let Zt;for(Zt=0;Zt<Bt;Zt++){const ln=oe[Zt]=at?$h(oe[Zt]):Dl(oe[Zt]);S(ue[Zt],ln,ce,null,Pe,Ve,Qe,ot,at)}pt>Ft?we(ue,Pe,Ve,!0,!1,Bt):V(oe,ce,Q,Pe,Ve,Qe,ot,at,Bt)},Te=(ue,oe,ce,Q,Pe,Ve,Qe,ot,at)=>{let pt=0;const Ft=oe.length;let Bt=ue.length-1,Zt=Ft-1;for(;pt<=Bt&&pt<=Zt;){const ln=ue[pt],un=oe[pt]=at?$h(oe[pt]):Dl(oe[pt]);if(tc(ln,un))S(ln,un,ce,null,Pe,Ve,Qe,ot,at);else break;pt++}for(;pt<=Bt&&pt<=Zt;){const ln=ue[Bt],un=oe[Zt]=at?$h(oe[Zt]):Dl(oe[Zt]);if(tc(ln,un))S(ln,un,ce,null,Pe,Ve,Qe,ot,at);else break;Bt--,Zt--}if(pt>Bt){if(pt<=Zt){const ln=Zt+1,un=ln<Ft?oe[ln].el:Q;for(;pt<=Zt;)S(null,oe[pt]=at?$h(oe[pt]):Dl(oe[pt]),ce,un,Pe,Ve,Qe,ot,at),pt++}}else if(pt>Zt)for(;pt<=Bt;)J(ue[pt],Pe,Ve,!0),pt++;else{const ln=pt,un=pt,Sn=new Map;for(pt=un;pt<=Zt;pt++){const vn=oe[pt]=at?$h(oe[pt]):Dl(oe[pt]);vn.key!=null&&Sn.set(vn.key,pt)}let qe,it=0;const Ze=Zt-un+1;let Ut=!1,Yt=0;const Ln=new Array(Ze);for(pt=0;pt<Ze;pt++)Ln[pt]=0;for(pt=ln;pt<=Bt;pt++){const vn=ue[pt];if(it>=Ze){J(vn,Pe,Ve,!0);continue}let jn;if(vn.key!=null)jn=Sn.get(vn.key);else for(qe=un;qe<=Zt;qe++)if(Ln[qe-un]===0&&tc(vn,oe[qe])){jn=qe;break}jn===void 0?J(vn,Pe,Ve,!0):(Ln[jn-un]=pt+1,jn>=Yt?Yt=jn:Ut=!0,S(vn,oe[jn],ce,null,Pe,Ve,Qe,ot,at),it++)}const gn=Ut?LO(Ln):Hd;for(qe=gn.length-1,pt=Ze-1;pt>=0;pt--){const vn=un+pt,jn=oe[vn],mn=vn+1<Ft?oe[vn+1].el:Q;Ln[pt]===0?S(null,jn,ce,mn,Pe,Ve,Qe,ot,at):Ut&&(qe<0||pt!==gn[qe]?Ue(jn,ce,mn,2):qe--)}}},Ue=(ue,oe,ce,Q,Pe=null)=>{const{el:Ve,type:Qe,transition:ot,children:at,shapeFlag:pt}=ue;if(pt&6){Ue(ue.component.subTree,oe,ce,Q);return}if(pt&128){ue.suspense.move(oe,ce,Q);return}if(pt&64){Qe.move(ue,oe,ce,Je);return}if(Qe===bn){r(Ve,oe,ce);for(let Bt=0;Bt<at.length;Bt++)Ue(at[Bt],oe,ce,Q);r(ue.anchor,oe,ce);return}if(Qe===Vf){N(ue,oe,ce);return}if(Q!==2&&pt&1&&ot)if(Q===0)ot.beforeEnter(Ve),r(Ve,oe,ce),Mo(()=>ot.enter(Ve),Pe);else{const{leave:Bt,delayLeave:Zt,afterLeave:ln}=ot,un=()=>r(Ve,oe,ce),Sn=()=>{Bt(Ve,()=>{un(),ln&&ln()})};Zt?Zt(Ve,un,Sn):Sn()}else r(Ve,oe,ce)},J=(ue,oe,ce,Q=!1,Pe=!1)=>{const{type:Ve,props:Qe,ref:ot,children:at,dynamicChildren:pt,shapeFlag:Ft,patchFlag:Bt,dirs:Zt,cacheIndex:ln}=ue;if(Bt===-2&&(Pe=!1),ot!=null&&Ng(ot,null,ce,ue,!0),ln!=null&&(oe.renderCache[ln]=void 0),Ft&256){oe.ctx.deactivate(ue);return}const un=Ft&1&&Zt,Sn=!Qh(ue);let qe;if(Sn&&(qe=Qe&&Qe.onVnodeBeforeUnmount)&&Al(qe,oe,ue),Ft&6)pe(ue.component,ce,Q);else{if(Ft&128){ue.suspense.unmount(ce,Q);return}un&&Ac(ue,null,oe,"beforeUnmount"),Ft&64?ue.type.remove(ue,oe,ce,Je,Q):pt&&!pt.hasOnce&&(Ve!==bn||Bt>0&&Bt&64)?we(pt,oe,ce,!1,!0):(Ve===bn&&Bt&384||!Pe&&Ft&16)&&we(at,oe,ce),Q&&ie(ue)}(Sn&&(qe=Qe&&Qe.onVnodeUnmounted)||un)&&Mo(()=>{qe&&Al(qe,oe,ue),un&&Ac(ue,null,oe,"unmounted")},ce)},ie=ue=>{const{type:oe,el:ce,anchor:Q,transition:Pe}=ue;if(oe===bn){se(ce,Q);return}if(oe===Vf){U(ue);return}const Ve=()=>{i(ce),Pe&&!Pe.persisted&&Pe.afterLeave&&Pe.afterLeave()};if(ue.shapeFlag&1&&Pe&&!Pe.persisted){const{leave:Qe,delayLeave:ot}=Pe,at=()=>Qe(ce,Ve);ot?ot(ue.el,Ve,at):at()}else Ve()},se=(ue,oe)=>{let ce;for(;ue!==oe;)ce=y(ue),i(ue),ue=ce;i(oe)},pe=(ue,oe,ce)=>{const{bum:Q,scope:Pe,job:Ve,subTree:Qe,um:ot,m:at,a:pt}=ue;Q0(at),Q0(pt),Q&&qd(Q),Pe.stop(),Ve&&(Ve.flags|=8,J(Qe,ue,oe,ce)),ot&&Mo(ot,oe),Mo(()=>{ue.isUnmounted=!0},oe),oe&&oe.pendingBranch&&!oe.isUnmounted&&ue.asyncDep&&!ue.asyncResolved&&ue.suspenseId===oe.pendingId&&(oe.deps--,oe.deps===0&&oe.resolve())},we=(ue,oe,ce,Q=!1,Pe=!1,Ve=0)=>{for(let Qe=Ve;Qe<ue.length;Qe++)J(ue[Qe],oe,ce,Q,Pe)},be=ue=>{if(ue.shapeFlag&6)return be(ue.component.subTree);if(ue.shapeFlag&128)return ue.suspense.next();const oe=y(ue.anchor||ue.el),ce=oe&&oe[oL];return ce?y(ce):oe};let Ae=!1;const Ee=(ue,oe,ce)=>{ue==null?oe._vnode&&J(oe._vnode,null,null,!0):S(oe._vnode||null,ue,oe,null,null,null,ce),oe._vnode=ue,Ae||(Ae=!0,$w(),X0(),Ae=!1)},Je={p:S,um:J,m:Ue,r:ie,mt:ae,mc:V,pc:K,pbc:de,n:be,o:t};let gt,_t;return e&&([gt,_t]=e(Je)),{render:Ee,hydrate:gt,createApp:mO(Ee,gt)}}function Xy({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Cf({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function zL(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Rb(t,e,n=!1){const r=t.children,i=e.children;if(Gn(r)&&Gn(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=$h(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&Rb(o,a)),a.type===ef&&(a.el=o.el)}}function LO(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function UL(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:UL(e)}function Q0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const $L=Symbol.for("v-scx"),VL=()=>au($L);function Rg(t,e){return im(t,null,e)}function CO(t,e){return im(t,null,{flush:"post"})}function HL(t,e){return im(t,null,{flush:"sync"})}function vi(t,e,n){return im(t,e,n)}function im(t,e,n=di){const{immediate:r,deep:i,flush:s,once:o}=n,a=Gi({},n),l=e&&r||!e&&s!=="post";let c;if(np){if(s==="sync"){const m=VL();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Pu,m.resume=Pu,m.pause=Pu,m}}const f=Ao;a.call=(m,C,S)=>Au(m,f,C,S);let p=!1;s==="post"?a.scheduler=m=>{Mo(m,f&&f.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(m,C)=>{C?m():Eb(m)}),a.augmentJob=m=>{e&&(m.flags|=4),p&&(m.flags|=2,f&&(m.id=f.uid,m.i=f))};const y=p8(t,e,a);return np&&(c?c.push(y):l&&y()),y}function SO(t,e,n){const r=this.proxy,i=ts(t)?t.includes(".")?WL(r,t):()=>r[t]:t.bind(r,r);let s;br(e)?s=e:(s=e.handler,n=e);const o=Kf(this),a=im(i,s.bind(r),n);return o(),a}function WL(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function EO(t,e,n=di){const r=Ou(),i=fa(e),s=Il(e),o=GL(t,i),a=J3((l,c)=>{let f,p=di,y;return HL(()=>{const m=t[i];ol(f,m)&&(f=m,c())}),{get(){return l(),n.get?n.get(f):f},set(m){const C=n.set?n.set(m):m;if(!ol(C,f)&&!(p!==di&&ol(m,p)))return;const S=r.vnode.props;S&&(e in S||i in S||s in S)&&(`onUpdate:${e}`in S||`onUpdate:${i}`in S||`onUpdate:${s}`in S)||(f=m,c()),r.emit(`update:${e}`,C),ol(m,C)&&ol(m,p)&&!ol(C,y)&&c(),p=m,y=C}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||di:a,done:!1}:{done:!0}}}},a}const GL=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${fa(e)}Modifiers`]||t[`${Il(e)}Modifiers`];function PO(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||di;let i=n;const s=e.startsWith("update:"),o=s&&GL(r,e.slice(7));o&&(o.trim&&(i=n.map(f=>ts(f)?f.trim():f)),o.number&&(i=n.map(G0)));let a,l=r[a=sg(e)]||r[a=sg(fa(e))];!l&&s&&(l=r[a=sg(Il(e))]),l&&Au(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Au(c,t,6,i)}}function qL(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!br(t)){const l=c=>{const f=qL(c,e,!0);f&&(a=!0,Gi(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Bi(t)&&r.set(t,null),null):(Gn(s)?s.forEach(l=>o[l]=null):Gi(o,s),Bi(t)&&r.set(t,o),o)}function Hv(t,e){return!t||!tm(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ci(t,e[0].toLowerCase()+e.slice(1))||Ci(t,Il(e))||Ci(t,e))}function w0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:f,props:p,data:y,setupState:m,ctx:C,inheritAttrs:S}=t,T=Ig(t);let O,D;try{if(n.shapeFlag&4){const U=i||r,W=U;O=Dl(c.call(W,U,f,p,m,y,C)),D=a}else{const U=e;O=Dl(U.length>1?U(p,{attrs:a,slots:o,emit:l}):U(p,null)),D=e.props?a:MO(a)}}catch(U){hg.length=0,td(U,t,1),O=Kr(Co)}let N=O;if(D&&S!==!1){const U=Object.keys(D),{shapeFlag:W}=N;U.length&&W&7&&(s&&U.some(hb)&&(D=AO(D,s)),N=jc(N,D,!1,!0))}return n.dirs&&(N=jc(N,null,!1,!0),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&_h(N,n.transition),O=N,Ig(T),O}function kO(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(wh(i)){if(i.type!==Co||i.children==="v-if"){if(n)return;n=i}}else return}return n}const MO=t=>{let e;for(const n in t)(n==="class"||n==="style"||tm(n))&&((e||(e={}))[n]=t[n]);return e},AO=(t,e)=>{const n={};for(const r in t)(!hb(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function TO(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?ex(r,o,c):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const y=f[p];if(o[y]!==r[y]&&!Hv(c,y))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ex(r,o,c):!0:!!o;return!1}function ex(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Hv(n,s))return!0}return!1}function Wv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const ev=t=>t.__isSuspense;let i2=0;const OO={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)IO(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}NO(t,e,n,r,i,o,a,l,c)}},hydrate:BO,normalize:RO},DO=OO;function Fg(t,e){const n=t.props&&t.props[e];br(n)&&n()}function IO(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:f}}=l,p=f("div"),y=t.suspense=YL(t,i,r,e,p,n,s,o,a,l);c(null,y.pendingBranch=t.ssContent,p,null,r,y,s,o),y.deps>0?(Fg(t,"onPending"),Fg(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),Zd(y,t.ssFallback)):y.resolve(!1,!0)}function NO(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:f}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const y=e.ssContent,m=e.ssFallback,{activeBranch:C,pendingBranch:S,isInFallback:T,isHydrating:O}=p;if(S)p.pendingBranch=y,tc(y,S)?(l(S,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():T&&(O||(l(C,m,n,r,i,null,s,o,a),Zd(p,m)))):(p.pendingId=i2++,O?(p.isHydrating=!1,p.activeBranch=S):c(S,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=f("div"),T?(l(null,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(C,m,n,r,i,null,s,o,a),Zd(p,m))):C&&tc(y,C)?(l(C,y,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(C&&tc(y,C))l(C,y,n,r,i,p,s,o,a),Zd(p,y);else if(Fg(e,"onPending"),p.pendingBranch=y,y.shapeFlag&512?p.pendingId=y.component.suspenseId:p.pendingId=i2++,l(null,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:D,pendingId:N}=p;D>0?setTimeout(()=>{p.pendingId===N&&p.fallback(m)},D):D===0&&p.fallback(m)}}function YL(t,e,n,r,i,s,o,a,l,c,f=!1){const{p,m:y,um:m,n:C,o:{parentNode:S,remove:T}}=c;let O;const D=FO(t);D&&e&&e.pendingBranch&&(O=e.pendingId,e.deps++);const N=t.props?q0(t.props.timeout):void 0,U=s,W={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:i2++,timeout:typeof N=="number"?N:-1,activeBranch:null,pendingBranch:null,isInFallback:!f,isHydrating:f,isUnmounted:!1,effects:[],resolve(ee=!1,te=!1){const{vnode:V,activeBranch:Y,pendingBranch:de,pendingId:$,effects:H,parentComponent:le,container:ae}=W;let z=!1;W.isHydrating?W.isHydrating=!1:ee||(z=Y&&de.transition&&de.transition.mode==="out-in",z&&(Y.transition.afterLeave=()=>{$===W.pendingId&&(y(de,ae,s===U?C(Y):s,0),Og(H))}),Y&&(S(Y.el)===ae&&(s=C(Y)),m(Y,le,W,!0)),z||y(de,ae,s,0)),Zd(W,de),W.pendingBranch=null,W.isInFallback=!1;let B=W.parent,X=!1;for(;B;){if(B.pendingBranch){B.effects.push(...H),X=!0;break}B=B.parent}!X&&!z&&Og(H),W.effects=[],D&&e&&e.pendingBranch&&O===e.pendingId&&(e.deps--,e.deps===0&&!te&&e.resolve()),Fg(V,"onResolve")},fallback(ee){if(!W.pendingBranch)return;const{vnode:te,activeBranch:V,parentComponent:Y,container:de,namespace:$}=W;Fg(te,"onFallback");const H=C(V),le=()=>{W.isInFallback&&(p(null,ee,de,H,Y,null,$,a,l),Zd(W,ee))},ae=ee.transition&&ee.transition.mode==="out-in";ae&&(V.transition.afterLeave=le),W.isInFallback=!0,m(V,Y,null,!0),ae||le()},move(ee,te,V){W.activeBranch&&y(W.activeBranch,ee,te,V),W.container=ee},next(){return W.activeBranch&&C(W.activeBranch)},registerDep(ee,te,V){const Y=!!W.pendingBranch;Y&&W.deps++;const de=ee.vnode.el;ee.asyncDep.catch($=>{td($,ee,0)}).then($=>{if(ee.isUnmounted||W.isUnmounted||W.pendingId!==ee.suspenseId)return;ee.asyncResolved=!0;const{vnode:H}=ee;l2(ee,$,!1),de&&(H.el=de);const le=!de&&ee.subTree.el;te(ee,H,S(de||ee.subTree.el),de?null:C(ee.subTree),W,o,V),le&&T(le),Wv(ee,H.el),Y&&--W.deps===0&&W.resolve()})},unmount(ee,te){W.isUnmounted=!0,W.activeBranch&&m(W.activeBranch,n,ee,te),W.pendingBranch&&m(W.pendingBranch,n,ee,te)}};return W}function BO(t,e,n,r,i,s,o,a,l){const c=e.suspense=YL(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),f=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),f}function RO(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=tx(r?n.default:n),t.ssFallback=r?tx(n.fallback):Kr(Co)}function tx(t){let e;if(br(t)){const n=Zf&&t._c;n&&(t._d=!1,Ne()),t=t(),n&&(t._d=!0,e=ja,KL())}return Gn(t)&&(t=kO(t)),t=Dl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function ZL(t,e){e&&e.pendingBranch?Gn(t)?e.effects.push(...t):e.effects.push(t):Og(t)}function Zd(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Wv(r,i))}function FO(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const bn=Symbol.for("v-fgt"),ef=Symbol.for("v-txt"),Co=Symbol.for("v-cmt"),Vf=Symbol.for("v-stc"),hg=[];let ja=null;function Ne(t=!1){hg.push(ja=t?null:[])}function KL(){hg.pop(),ja=hg[hg.length-1]||null}let Zf=1;function s2(t,e=!1){Zf+=t,t<0&&ja&&e&&(ja.hasOnce=!0)}function XL(t){return t.dynamicChildren=Zf>0?ja||Hd:null,KL(),Zf>0&&ja&&ja.push(t),t}function je(t,e,n,r,i,s){return XL(P(t,e,n,r,i,s,!0))}function Lo(t,e,n,r,i){return XL(Kr(t,e,n,r,i,!0))}function wh(t){return t?t.__v_isVNode===!0:!1}function tc(t,e){return t.type===e.type&&t.key===e.key}function jO(t){}const JL=({key:t})=>t??null,x0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ts(t)||Bs(t)||br(t)?{i:To,r:t,k:e,f:!!n}:t:null);function P(t,e=null,n=null,r=0,i=null,s=t===bn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&JL(e),ref:e&&x0(e),scopeId:zv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:To};return a?(Fb(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=ts(n)?8:16),Zf>0&&!o&&ja&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ja.push(l),l}const Kr=zO;function zO(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===xL)&&(t=Co),wh(t)){const a=jc(t,e,!0);return n&&Fb(a,n),Zf>0&&!s&&ja&&(a.shapeFlag&6?ja[ja.indexOf(t)]=a:ja.push(a)),a.patchFlag=-2,a}if(qO(t)&&(t=t.__vccOpts),e){e=QL(e);let{class:a,style:l}=e;a&&!ts(a)&&(e.class=Si(a)),Bi(l)&&(Fv(l)&&!Gn(l)&&(l=Gi({},l)),e.style=Fl(l))}const o=ts(t)?1:ev(t)?128:aL(t)?64:Bi(t)?4:br(t)?2:0;return P(t,e,n,r,i,o,s,!0)}function QL(t){return t?Fv(t)||AL(t)?Gi({},t):t:null}function jc(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?eC(i||{},e):i,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&JL(c),ref:e&&e.ref?n&&s?Gn(s)?s.concat(x0(e)):[s,x0(e)]:x0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==bn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&jc(t.ssContent),ssFallback:t.ssFallback&&jc(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&_h(f,l.clone(f)),f}function jr(t=" ",e=0){return Kr(ef,null,t,e)}function lu(t,e){const n=Kr(Vf,null,t);return n.staticCount=e,n}function Kt(t="",e=!1){return e?(Ne(),Lo(Co,null,t)):Kr(Co,null,t)}function Dl(t){return t==null||typeof t=="boolean"?Kr(Co):Gn(t)?Kr(bn,null,t.slice()):wh(t)?$h(t):Kr(ef,null,String(t))}function $h(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:jc(t)}function Fb(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Gn(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Fb(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!AL(e)?e._ctx=To:i===3&&To&&(To.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else br(e)?(e={default:e,_ctx:To},n=32):(e=String(e),r&64?(n=16,e=[jr(e)]):n=8);t.children=e,t.shapeFlag|=n}function eC(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Si([e.class,r.class]));else if(i==="style")e.style=Fl([e.style,r.style]);else if(tm(i)){const s=e[i],o=r[i];o&&s!==o&&!(Gn(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Al(t,e,n,r=null){Au(t,e,7,[n,r])}const UO=EL();let $O=0;function tC(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||UO,s={uid:$O++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new gb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:OL(r,i),emitsOptions:qL(r,i),emit:null,emitted:null,propsDefaults:di,inheritAttrs:r.inheritAttrs,ctx:di,data:di,props:di,attrs:di,slots:di,refs:di,setupState:di,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=PO.bind(null,s),t.ce&&t.ce(s),s}let Ao=null;const Ou=()=>Ao||To;let tv,o2;{const t=Ov(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};tv=e("__VUE_INSTANCE_SETTERS__",n=>Ao=n),o2=e("__VUE_SSR_SETTERS__",n=>np=n)}const Kf=t=>{const e=Ao;return tv(t),t.scope.on(),()=>{t.scope.off(),tv(e)}},a2=()=>{Ao&&Ao.scope.off(),tv(null)};function nC(t){return t.vnode.shapeFlag&4}let np=!1;function rC(t,e=!1,n=!1){e&&o2(e);const{props:r,children:i}=t.vnode,s=nC(t);vO(t,r,s,e),wO(t,i,n);const o=s?VO(t,e):void 0;return e&&o2(!1),o}function VO(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,e2);const{setup:r}=n;if(r){cf();const i=t.setupContext=r.length>1?sC(t):null,s=Kf(t),o=dp(r,t,0,[t.props,i]),a=db(o);if(hf(),s(),(a||t.sp)&&!Qh(t)&&Mb(t),a){if(o.then(a2,a2),e)return o.then(l=>{l2(t,l,e)}).catch(l=>{td(l,t,0)});t.asyncDep=o}else l2(t,o,e)}else iC(t,e)}function l2(t,e,n){br(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Bi(e)&&(t.setupState=Cb(e)),iC(t,n)}let nv,u2;function HO(t){nv=t,u2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,K8))}}const WO=()=>!nv;function iC(t,e,n){const r=t.type;if(!t.render){if(!e&&nv&&!r.render){const i=r.template||Nb(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Gi(Gi({isCustomElement:s,delimiters:a},o),l);r.render=nv(i,c)}}t.render=r.render||Pu,u2&&u2(t)}{const i=Kf(t);cf();try{cO(t)}finally{hf(),i()}}}const GO={get(t,e){return Ia(t,"get",""),t[e]}};function sC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,GO),slots:t.slots,emit:t.emit,expose:e}}function sm(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Cb(jv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ug)return ug[n](t)},has(e,n){return n in e||n in ug}})):t.proxy}function c2(t,e=!0){return br(t)?t.displayName||t.name:t.name||e&&t.__name}function qO(t){return br(t)&&"__vccOpts"in t}const ir=(t,e)=>c8(t,e,np);function Gv(t,e,n){const r=arguments.length;return r===2?Bi(e)&&!Gn(e)?wh(e)?Kr(t,null,[e]):Kr(t,e):Kr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&wh(n)&&(n=[n]),Kr(t,e,n))}function YO(){}function ZO(t,e,n,r){const i=n[r];if(i&&oC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function oC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(ol(n[r],e[r]))return!1;return Zf>0&&ja&&ja.push(t),!0}const aC="3.5.13",KO=Pu,XO=b8,JO=Nd,QO=sL,eD={createComponentInstance:tC,setupComponent:rC,renderComponentRoot:w0,setCurrentRenderingInstance:Ig,isVNode:wh,normalizeVNode:Dl,getComponentPublicInstance:sm,ensureValidVNode:Ib,pushWarningContext:g8,popWarningContext:m8},tD=eD,nD=null,rD=null,iD=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let h2;const nx=typeof window<"u"&&window.trustedTypes;if(nx)try{h2=nx.createPolicy("vue",{createHTML:t=>t})}catch{}const lC=h2?t=>h2.createHTML(t):t=>t,sD="http://www.w3.org/2000/svg",oD="http://www.w3.org/1998/Math/MathML",uh=typeof document<"u"?document:null,rx=uh&&uh.createElement("template"),aD={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?uh.createElementNS(sD,t):e==="mathml"?uh.createElementNS(oD,t):n?uh.createElement(t,{is:n}):uh.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>uh.createTextNode(t),createComment:t=>uh.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>uh.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{rx.innerHTML=lC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=rx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Oh="transition",Ep="animation",rp=Symbol("_vtc"),uC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},cC=Gi({},kb,uC),lD=t=>(t.displayName="Transition",t.props=cC,t),f2=lD((t,{slots:e})=>Gv(fL,hC(t),e)),Sf=(t,e=[])=>{Gn(t)?t.forEach(n=>n(...e)):t&&t(...e)},ix=t=>t?Gn(t)?t.some(e=>e.length>1):t.length>1:!1;function hC(t){const e={};for(const H in t)H in uC||(e[H]=t[H]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:f=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:y=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,C=uD(i),S=C&&C[0],T=C&&C[1],{onBeforeEnter:O,onEnter:D,onEnterCancelled:N,onLeave:U,onLeaveCancelled:W,onBeforeAppear:ee=O,onAppear:te=D,onAppearCancelled:V=N}=e,Y=(H,le,ae,z)=>{H._enterCancelled=z,Rh(H,le?f:a),Rh(H,le?c:o),ae&&ae()},de=(H,le)=>{H._isLeaving=!1,Rh(H,p),Rh(H,m),Rh(H,y),le&&le()},$=H=>(le,ae)=>{const z=H?te:D,B=()=>Y(le,H,ae);Sf(z,[le,B]),sx(()=>{Rh(le,H?l:s),Sc(le,H?f:a),ix(z)||ox(le,r,S,B)})};return Gi(e,{onBeforeEnter(H){Sf(O,[H]),Sc(H,s),Sc(H,o)},onBeforeAppear(H){Sf(ee,[H]),Sc(H,l),Sc(H,c)},onEnter:$(!1),onAppear:$(!0),onLeave(H,le){H._isLeaving=!0;const ae=()=>de(H,le);Sc(H,p),H._enterCancelled?(Sc(H,y),d2()):(d2(),Sc(H,y)),sx(()=>{H._isLeaving&&(Rh(H,p),Sc(H,m),ix(U)||ox(H,r,T,ae))}),Sf(U,[H,ae])},onEnterCancelled(H){Y(H,!1,void 0,!0),Sf(N,[H])},onAppearCancelled(H){Y(H,!0,void 0,!0),Sf(V,[H])},onLeaveCancelled(H){de(H),Sf(W,[H])}})}function uD(t){if(t==null)return null;if(Bi(t))return[Jy(t.enter),Jy(t.leave)];{const e=Jy(t);return[e,e]}}function Jy(t){return q0(t)}function Sc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[rp]||(t[rp]=new Set)).add(e)}function Rh(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[rp];n&&(n.delete(e),n.size||(t[rp]=void 0))}function sx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let cD=0;function ox(t,e,n,r){const i=t._endId=++cD,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=fC(t,e);if(!o)return r();const c=o+"end";let f=0;const p=()=>{t.removeEventListener(c,y),s()},y=m=>{m.target===t&&++f>=l&&p()};setTimeout(()=>{f<l&&p()},a+1),t.addEventListener(c,y)}function fC(t,e){const n=window.getComputedStyle(t),r=C=>(n[C]||"").split(", "),i=r(`${Oh}Delay`),s=r(`${Oh}Duration`),o=ax(i,s),a=r(`${Ep}Delay`),l=r(`${Ep}Duration`),c=ax(a,l);let f=null,p=0,y=0;e===Oh?o>0&&(f=Oh,p=o,y=s.length):e===Ep?c>0&&(f=Ep,p=c,y=l.length):(p=Math.max(o,c),f=p>0?o>c?Oh:Ep:null,y=f?f===Oh?s.length:l.length:0);const m=f===Oh&&/\b(transform|all)(,|$)/.test(r(`${Oh}Property`).toString());return{type:f,timeout:p,propCount:y,hasTransform:m}}function ax(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>lx(n)+lx(t[r])))}function lx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function d2(){return document.body.offsetHeight}function hD(t,e,n){const r=t[rp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const rv=Symbol("_vod"),dC=Symbol("_vsh"),jb={beforeMount(t,{value:e},{transition:n}){t[rv]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Pp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Pp(t,!0),r.enter(t)):r.leave(t,()=>{Pp(t,!1)}):Pp(t,e))},beforeUnmount(t,{value:e}){Pp(t,e)}};function Pp(t,e){t.style.display=e?t[rv]:"none",t[dC]=!e}function fD(){jb.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const pC=Symbol("");function dD(t){const e=Ou();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>iv(s,i))},r=()=>{const i=t(e.proxy);e.ce?iv(e.ce,i):p2(e.subTree,i),n(i)};Ab(()=>{Og(r)}),Ks(()=>{vi(r,Pu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),ku(()=>i.disconnect())})}function p2(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{p2(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)iv(t.el,e);else if(t.type===bn)t.children.forEach(n=>p2(n,e));else if(t.type===Vf){let{el:n,anchor:r}=t;for(;n&&(iv(n,e),n!==r);)n=n.nextSibling}}function iv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[pC]=r}}const pD=/(^|;)\s*display\s*:/;function gD(t,e,n){const r=t.style,i=ts(n);let s=!1;if(n&&!i){if(e)if(ts(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&L0(r,a,"")}else for(const o in e)n[o]==null&&L0(r,o,"");for(const o in n)o==="display"&&(s=!0),L0(r,o,n[o])}else if(i){if(e!==n){const o=r[pC];o&&(n+=";"+o),r.cssText=n,s=pD.test(n)}}else e&&t.removeAttribute("style");rv in t&&(t[rv]=s?r.display:"",t[dC]&&(r.display="none"))}const ux=/\s*!important$/;function L0(t,e,n){if(Gn(n))n.forEach(r=>L0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=mD(t,e);ux.test(n)?t.setProperty(Il(r),n.replace(ux,""),"important"):t[r]=n}}const cx=["Webkit","Moz","ms"],Qy={};function mD(t,e){const n=Qy[e];if(n)return n;let r=fa(e);if(r!=="filter"&&r in t)return Qy[e]=r;r=nm(r);for(let i=0;i<cx.length;i++){const s=cx[i]+r;if(s in t)return Qy[e]=s}return e}const hx="http://www.w3.org/1999/xlink";function fx(t,e,n,r,i,s=TT(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(hx,e.slice(6,e.length)):t.setAttributeNS(hx,e,n):n==null||s&&!O3(n)?t.removeAttribute(e):t.setAttribute(e,s?"":oc(n)?String(n):n)}function dx(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?lC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=O3(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function dh(t,e,n,r){t.addEventListener(e,n,r)}function vD(t,e,n,r){t.removeEventListener(e,n,r)}const px=Symbol("_vei");function yD(t,e,n,r,i=null){const s=t[px]||(t[px]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=bD(e);if(r){const c=s[e]=xD(r,i);dh(t,a,c,l)}else o&&(vD(t,a,o,l),s[e]=void 0)}}const gx=/(?:Once|Passive|Capture)$/;function bD(t){let e;if(gx.test(t)){e={};let r;for(;r=t.match(gx);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Il(t.slice(2)),e]}let e1=0;const _D=Promise.resolve(),wD=()=>e1||(_D.then(()=>e1=0),e1=Date.now());function xD(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Au(LD(r,n.value),e,5,[r])};return n.value=t,n.attached=wD(),n}function LD(t,e){if(Gn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const mx=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,CD=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?hD(t,r,o):e==="style"?gD(t,n,r):tm(e)?hb(e)||yD(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):SD(t,e,r,o))?(dx(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&fx(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ts(r))?dx(t,fa(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),fx(t,e,r,o))};function SD(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&mx(e)&&br(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return mx(e)&&ts(n)?!1:e in t}const vx={};/*! #__NO_SIDE_EFFECTS__ */function gC(t,e,n){const r=ws(t,e);Av(r)&&Gi(r,e);class i extends qv{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const ED=(t,e)=>gC(t,e,SC),PD=typeof HTMLElement<"u"?HTMLElement:class{};class qv extends PD{constructor(e,n={},r=ov){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==ov?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof qv){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,ll(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!Gn(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=q0(this._props[l])),(a||(a=Object.create(null)))[fa(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Ci(this,r)||Object.defineProperty(this,r,{get:()=>_n(n[r])})}_resolveProps(e){const{props:n}=e,r=Gn(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(fa))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):vx;const i=fa(e);n&&this._numberProps&&this._numberProps[i]&&(r=q0(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===vx?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Il(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Il(e),n+""):n||this.removeAttribute(Il(e)),s&&s.observe(this,{attributes:!0})}}_update(){CC(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=Kr(this._def,Gi(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,Av(o[0])?Gi({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Il(s)!==s&&i(Il(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",f=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=f.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function mC(t){const e=Ou(),n=e&&e.ce;return n||null}function kD(){const t=mC();return t&&t.shadowRoot}function MD(t="$style"){{const e=Ou();if(!e)return di;const n=e.type.__cssModules;if(!n)return di;const r=n[t];return r||di}}const vC=new WeakMap,yC=new WeakMap,sv=Symbol("_moveCb"),yx=Symbol("_enterCb"),AD=t=>(delete t.props.mode,t),TD=AD({name:"TransitionGroup",props:Gi({},cC,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Ou(),r=Pb();let i,s;return Vv(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!BD(i[0].el,n.vnode.el,o))return;i.forEach(DD),i.forEach(ID);const a=i.filter(ND);d2(),a.forEach(l=>{const c=l.el,f=c.style;Sc(c,o),f.transform=f.webkitTransform=f.transitionDuration="";const p=c[sv]=y=>{y&&y.target!==c||(!y||/transform$/.test(y.propertyName))&&(c.removeEventListener("transitionend",p),c[sv]=null,Rh(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=hi(t),a=hC(o);let l=o.tag||bn;if(i=[],s)for(let c=0;c<s.length;c++){const f=s[c];f.el&&f.el instanceof Element&&(i.push(f),_h(f,tp(f,a,r,n)),vC.set(f,f.el.getBoundingClientRect()))}s=e.default?Uv(e.default()):[];for(let c=0;c<s.length;c++){const f=s[c];f.key!=null&&_h(f,tp(f,a,r,n))}return Kr(l,null,s)}}}),OD=TD;function DD(t){const e=t.el;e[sv]&&e[sv](),e[yx]&&e[yx]()}function ID(t){yC.set(t,t.el.getBoundingClientRect())}function ND(t){const e=vC.get(t),n=yC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function BD(t,e,n){const r=t.cloneNode(),i=t[rp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=fC(r);return s.removeChild(r),o}const sf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Gn(e)?n=>qd(e,n):e};function RD(t){t.target.composing=!0}function bx(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Mu=Symbol("_assign"),fi={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Mu]=sf(i);const s=r||i.props&&i.props.type==="number";dh(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=G0(a)),t[Mu](a)}),n&&dh(t,"change",()=>{t.value=t.value.trim()}),e||(dh(t,"compositionstart",RD),dh(t,"compositionend",bx),dh(t,"change",bx))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Mu]=sf(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?G0(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Tl={deep:!0,created(t,e,n){t[Mu]=sf(n),dh(t,"change",()=>{const r=t._modelValue,i=ip(t),s=t.checked,o=t[Mu];if(Gn(r)){const a=Dv(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(ed(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(bC(t,s))})},mounted:_x,beforeUpdate(t,e,n){t[Mu]=sf(n),_x(t,e,n)}};function _x(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(Gn(e))i=Dv(e,r.props.value)>-1;else if(ed(e))i=e.has(r.props.value);else{if(e===n)return;i=nf(e,bC(t,!0))}t.checked!==i&&(t.checked=i)}const zb={created(t,{value:e},n){t.checked=nf(e,n.props.value),t[Mu]=sf(n),dh(t,"change",()=>{t[Mu](ip(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Mu]=sf(r),e!==n&&(t.checked=nf(e,r.props.value))}},ss={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=ed(e);dh(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?G0(ip(o)):ip(o));t[Mu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,ll(()=>{t._assigning=!1})}),t[Mu]=sf(r)},mounted(t,{value:e}){wx(t,e)},beforeUpdate(t,e,n){t[Mu]=sf(n)},updated(t,{value:e}){t._assigning||wx(t,e)}};function wx(t,e){const n=t.multiple,r=Gn(e);if(!(n&&!r&&!ed(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=ip(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Dv(e,a)>-1}else o.selected=e.has(a);else if(nf(ip(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ip(t){return"_value"in t?t._value:t.value}function bC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Ub={created(t,e,n){Wm(t,e,n,null,"created")},mounted(t,e,n){Wm(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Wm(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Wm(t,e,n,r,"updated")}};function _C(t,e){switch(t){case"SELECT":return ss;case"TEXTAREA":return fi;default:switch(e){case"checkbox":return Tl;case"radio":return zb;default:return fi}}}function Wm(t,e,n,r,i){const o=_C(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function FD(){fi.getSSRProps=({value:t})=>({value:t}),zb.getSSRProps=({value:t},e)=>{if(e.props&&nf(e.props.value,t))return{checked:!0}},Tl.getSSRProps=({value:t},e)=>{if(Gn(t)){if(e.props&&Dv(t,e.props.value)>-1)return{checked:!0}}else if(ed(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},Ub.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=_C(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const jD=["ctrl","shift","alt","meta"],zD={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>jD.some(n=>t[`${n}Key`]&&!e.includes(n))},Rl=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=zD[e[o]];if(a&&a(i,e))return}return t(i,...s)})},UD={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},$D=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Il(i.key);if(e.some(o=>o===s||UD[o]===s))return t(i)})},wC=Gi({patchProp:CD},aD);let fg,xx=!1;function xC(){return fg||(fg=RL(wC))}function LC(){return fg=xx?fg:FL(wC),xx=!0,fg}const CC=(...t)=>{xC().render(...t)},VD=(...t)=>{LC().hydrate(...t)},ov=(...t)=>{const e=xC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=PC(r);if(!i)return;const s=e._component;!br(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,EC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},SC=(...t)=>{const e=LC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=PC(r);if(i)return n(i,!0,EC(i))},e};function EC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function PC(t){return ts(t)?document.querySelector(t):t}let Lx=!1;const HD=()=>{Lx||(Lx=!0,FD(),fD())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const WD=()=>{},GD=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:fL,BaseTransitionPropsValidators:kb,Comment:Co,DeprecationTypes:iD,EffectScope:gb,ErrorCodes:y8,ErrorTypeStrings:XO,Fragment:bn,KeepAlive:V8,ReactiveEffect:Mg,Static:Vf,Suspense:DO,Teleport:Bd,Text:ef,TrackOpTypes:h8,Transition:f2,TransitionGroup:OD,TriggerOpTypes:f8,VueElement:qv,assertNumber:v8,callWithAsyncErrorHandling:Au,callWithErrorHandling:dp,camelize:fa,capitalize:nm,cloneVNode:jc,compatUtils:rD,compile:WD,computed:ir,createApp:ov,createBlock:Lo,createCommentVNode:Kt,createElementBlock:je,createElementVNode:P,createHydrationRenderer:FL,createPropsRestProxy:lO,createRenderer:RL,createSSRApp:SC,createSlots:q8,createStaticVNode:lu,createTextVNode:jr,createVNode:Kr,customRef:J3,defineAsyncComponent:U8,defineComponent:ws,defineCustomElement:gC,defineEmits:J8,defineExpose:Q8,defineModel:nO,defineOptions:eO,defineProps:X8,defineSSRCustomElement:ED,defineSlots:tO,devtools:JO,effect:IT,effectScope:mb,getCurrentInstance:Ou,getCurrentScope:vb,getCurrentWatcher:d8,getTransitionRawChildren:Uv,guardReactiveProps:QL,h:Gv,handleError:td,hasInjectionContext:PL,hydrate:VD,hydrateOnIdle:N8,hydrateOnInteraction:j8,hydrateOnMediaQuery:F8,hydrateOnVisible:R8,initCustomFormatter:YO,initDirectivesForSSR:HD,inject:au,isMemoSame:oC,isProxy:Fv,isReactive:Nc,isReadonly:rf,isRef:Bs,isRuntimeOnly:WO,isShallow:ou,isVNode:wh,markRaw:jv,mergeDefaults:oO,mergeModels:aO,mergeProps:eC,nextTick:ll,normalizeClass:Si,normalizeProps:MT,normalizeStyle:Fl,onActivated:pL,onBeforeMount:vL,onBeforeUnmount:ff,onBeforeUpdate:Ab,onDeactivated:gL,onErrorCaptured:wL,onMounted:Ks,onRenderTracked:_L,onRenderTriggered:bL,onScopeDispose:N3,onServerPrefetch:yL,onUnmounted:ku,onUpdated:Vv,onWatcherCleanup:eL,openBlock:Ne,popScopeId:L8,provide:cg,proxyRefs:Cb,pushScopeId:x8,queuePostFlushCb:Og,reactive:cu,readonly:xb,ref:kt,registerRuntimeCompiler:HO,render:CC,renderList:ar,renderSlot:Y8,resolveComponent:Ob,resolveDirective:G8,resolveDynamicComponent:LL,resolveFilter:nD,resolveTransitionHooks:tp,setBlockTracking:s2,setDevtoolsHook:QO,setTransitionHooks:_h,shallowReactive:wb,shallowReadonly:e8,shallowRef:Lb,ssrContextKey:$L,ssrUtils:tD,stop:NT,toDisplayString:zt,toHandlerKey:sg,toHandlers:Z8,toRaw:hi,toRef:l8,toRefs:Sb,toValue:r8,transformVNodeArgs:jO,triggerRef:n8,unref:_n,useAttrs:sO,useCssModule:MD,useCssVars:dD,useHost:mC,useId:P8,useModel:EO,useSSRContext:VL,useShadowRoot:kD,useSlots:iO,useTemplateRef:k8,useTransitionState:Pb,vModelCheckbox:Tl,vModelDynamic:Ub,vModelRadio:zb,vModelSelect:ss,vModelText:fi,vShow:jb,version:aC,warn:KO,watch:vi,watchEffect:Rg,watchPostEffect:CO,watchSyncEffect:HL,withAsyncContext:uO,withCtx:Nl,withDefaults:rO,withDirectives:Fn,withKeys:$D,withMemo:ZO,withModifiers:Rl,withScopeId:C8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let kC;const Yv=t=>kC=t,MC=Symbol();function g2(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var dg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(dg||(dg={}));function qD(){const t=mb(!0),e=t.run(()=>kt({}));let n=[],r=[];const i=jv({install(s){Yv(i),i._a=s,s.provide(MC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const AC=()=>{};function Cx(t,e,n,r=AC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&vb()&&N3(i),i}function Cd(t,...e){t.slice().forEach(n=>{n(...e)})}const YD=t=>t(),Sx=Symbol(),t1=Symbol();function m2(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];g2(i)&&g2(r)&&t.hasOwnProperty(n)&&!Bs(r)&&!Nc(r)?t[n]=m2(i,r):t[n]=r}return t}const ZD=Symbol();function KD(t){return!g2(t)||!t.hasOwnProperty(ZD)}const{assign:Fh}=Object;function XD(t){return!!(Bs(t)&&t.effect)}function JD(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const f=Sb(n.state.value[t]);return Fh(f,s,Object.keys(o||{}).reduce((p,y)=>(p[y]=jv(ir(()=>{Yv(n);const m=n._s.get(t);return o[y].call(m,m)})),p),{}))}return l=TC(t,c,e,n,r,!0),l}function TC(t,e,n={},r,i,s){let o;const a=Fh({actions:{}},n),l={deep:!0};let c,f,p=[],y=[],m;const C=r.state.value[t];!s&&!C&&(r.state.value[t]={}),kt({});let S;function T(V){let Y;c=f=!1,typeof V=="function"?(V(r.state.value[t]),Y={type:dg.patchFunction,storeId:t,events:m}):(m2(r.state.value[t],V),Y={type:dg.patchObject,payload:V,storeId:t,events:m});const de=S=Symbol();ll().then(()=>{S===de&&(c=!0)}),f=!0,Cd(p,Y,r.state.value[t])}const O=s?function(){const{state:Y}=n,de=Y?Y():{};this.$patch($=>{Fh($,de)})}:AC;function D(){o.stop(),p=[],y=[],r._s.delete(t)}const N=(V,Y="")=>{if(Sx in V)return V[t1]=Y,V;const de=function(){Yv(r);const $=Array.from(arguments),H=[],le=[];function ae(X){H.push(X)}function z(X){le.push(X)}Cd(y,{args:$,name:de[t1],store:W,after:ae,onError:z});let B;try{B=V.apply(this&&this.$id===t?this:W,$)}catch(X){throw Cd(le,X),X}return B instanceof Promise?B.then(X=>(Cd(H,X),X)).catch(X=>(Cd(le,X),Promise.reject(X))):(Cd(H,B),B)};return de[Sx]=!0,de[t1]=Y,de},U={_p:r,$id:t,$onAction:Cx.bind(null,y),$patch:T,$reset:O,$subscribe(V,Y={}){const de=Cx(p,V,Y.detached,()=>$()),$=o.run(()=>vi(()=>r.state.value[t],H=>{(Y.flush==="sync"?f:c)&&V({storeId:t,type:dg.direct,events:m},H)},Fh({},l,Y)));return de},$dispose:D},W=cu(U);r._s.set(t,W);const te=(r._a&&r._a.runWithContext||YD)(()=>r._e.run(()=>(o=mb()).run(()=>e({action:N}))));for(const V in te){const Y=te[V];if(Bs(Y)&&!XD(Y)||Nc(Y))s||(C&&KD(Y)&&(Bs(Y)?Y.value=C[V]:m2(Y,C[V])),r.state.value[t][V]=Y);else if(typeof Y=="function"){const de=N(Y,V);te[V]=de,a.actions[V]=Y}}return Fh(W,te),Fh(hi(W),te),Object.defineProperty(W,"$state",{get:()=>r.state.value[t],set:V=>{T(Y=>{Fh(Y,V)})}}),r._p.forEach(V=>{Fh(W,o.run(()=>V({store:W,app:r._a,pinia:r,options:a})))}),C&&s&&n.hydrate&&n.hydrate(W.$state,C),c=!0,f=!0,W}/*! #__NO_SIDE_EFFECTS__ */function pp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=PL();return a=a||(c?au(MC,null):null),a&&Yv(a),a=kC,a._s.has(r)||(s?TC(r,e,i,a):JD(r,i,a)),a._s.get(r)}return o.$id=r,o}function OC(t,e){return function(){return t.apply(e,arguments)}}const{toString:QD}=Object.prototype,{getPrototypeOf:$b}=Object,Zv=(t=>e=>{const n=QD.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),lc=t=>(t=t.toLowerCase(),e=>Zv(e)===t),Kv=t=>e=>typeof e===t,{isArray:gp}=Array,jg=Kv("undefined");function eI(t){return t!==null&&!jg(t)&&t.constructor!==null&&!jg(t.constructor)&&uu(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const DC=lc("ArrayBuffer");function tI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&DC(t.buffer),e}const nI=Kv("string"),uu=Kv("function"),IC=Kv("number"),Xv=t=>t!==null&&typeof t=="object",rI=t=>t===!0||t===!1,C0=t=>{if(Zv(t)!=="object")return!1;const e=$b(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},iI=lc("Date"),sI=lc("File"),oI=lc("Blob"),aI=lc("FileList"),lI=t=>Xv(t)&&uu(t.pipe),uI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||uu(t.append)&&((e=Zv(t))==="formdata"||e==="object"&&uu(t.toString)&&t.toString()==="[object FormData]"))},cI=lc("URLSearchParams"),[hI,fI,dI,pI]=["ReadableStream","Request","Response","Headers"].map(lc),gI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function om(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),gp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function NC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const jf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,BC=t=>!jg(t)&&t!==jf;function v2(){const{caseless:t}=BC(this)&&this||{},e={},n=(r,i)=>{const s=t&&NC(e,i)||i;C0(e[s])&&C0(r)?e[s]=v2(e[s],r):C0(r)?e[s]=v2({},r):gp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&om(arguments[r],n);return e}const mI=(t,e,n,{allOwnKeys:r}={})=>(om(e,(i,s)=>{n&&uu(i)?t[s]=OC(i,n):t[s]=i},{allOwnKeys:r}),t),vI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),yI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},bI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&$b(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},_I=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},wI=t=>{if(!t)return null;if(gp(t))return t;let e=t.length;if(!IC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},xI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&$b(Uint8Array)),LI=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},CI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},SI=lc("HTMLFormElement"),EI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Ex=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),PI=lc("RegExp"),RC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};om(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},kI=t=>{RC(t,(e,n)=>{if(uu(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(uu(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},MI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return gp(t)?r(t):r(String(t).split(e)),n},AI=()=>{},TI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function OI(t){return!!(t&&uu(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const DI=t=>{const e=new Array(10),n=(r,i)=>{if(Xv(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=gp(r)?[]:{};return om(r,(o,a)=>{const l=n(o,i+1);!jg(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},II=lc("AsyncFunction"),NI=t=>t&&(Xv(t)||uu(t))&&uu(t.then)&&uu(t.catch),FC=((t,e)=>t?setImmediate:e?((n,r)=>(jf.addEventListener("message",({source:i,data:s})=>{i===jf&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),jf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",uu(jf.postMessage)),BI=typeof queueMicrotask<"u"?queueMicrotask.bind(jf):typeof process<"u"&&process.nextTick||FC,Wt={isArray:gp,isArrayBuffer:DC,isBuffer:eI,isFormData:uI,isArrayBufferView:tI,isString:nI,isNumber:IC,isBoolean:rI,isObject:Xv,isPlainObject:C0,isReadableStream:hI,isRequest:fI,isResponse:dI,isHeaders:pI,isUndefined:jg,isDate:iI,isFile:sI,isBlob:oI,isRegExp:PI,isFunction:uu,isStream:lI,isURLSearchParams:cI,isTypedArray:xI,isFileList:aI,forEach:om,merge:v2,extend:mI,trim:gI,stripBOM:vI,inherits:yI,toFlatObject:bI,kindOf:Zv,kindOfTest:lc,endsWith:_I,toArray:wI,forEachEntry:LI,matchAll:CI,isHTMLForm:SI,hasOwnProperty:Ex,hasOwnProp:Ex,reduceDescriptors:RC,freezeMethods:kI,toObjectSet:MI,toCamelCase:EI,noop:AI,toFiniteNumber:TI,findKey:NC,global:jf,isContextDefined:BC,isSpecCompliantForm:OI,toJSONObject:DI,isAsyncFn:II,isThenable:NI,setImmediate:FC,asap:BI};function Fr(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Wt.inherits(Fr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wt.toJSONObject(this.config),code:this.code,status:this.status}}});const jC=Fr.prototype,zC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{zC[t]={value:t}});Object.defineProperties(Fr,zC);Object.defineProperty(jC,"isAxiosError",{value:!0});Fr.from=(t,e,n,r,i,s)=>{const o=Object.create(jC);return Wt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Fr.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const RI=null;function y2(t){return Wt.isPlainObject(t)||Wt.isArray(t)}function UC(t){return Wt.endsWith(t,"[]")?t.slice(0,-2):t}function Px(t,e,n){return t?t.concat(e).map(function(i,s){return i=UC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function FI(t){return Wt.isArray(t)&&!t.some(y2)}const jI=Wt.toFlatObject(Wt,{},null,function(e){return/^is[A-Z]/.test(e)});function Jv(t,e,n){if(!Wt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Wt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,T){return!Wt.isUndefined(T[S])});const r=n.metaTokens,i=n.visitor||f,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Wt.isSpecCompliantForm(e);if(!Wt.isFunction(i))throw new TypeError("visitor must be a function");function c(C){if(C===null)return"";if(Wt.isDate(C))return C.toISOString();if(!l&&Wt.isBlob(C))throw new Fr("Blob is not supported. Use a Buffer instead.");return Wt.isArrayBuffer(C)||Wt.isTypedArray(C)?l&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function f(C,S,T){let O=C;if(C&&!T&&typeof C=="object"){if(Wt.endsWith(S,"{}"))S=r?S:S.slice(0,-2),C=JSON.stringify(C);else if(Wt.isArray(C)&&FI(C)||(Wt.isFileList(C)||Wt.endsWith(S,"[]"))&&(O=Wt.toArray(C)))return S=UC(S),O.forEach(function(N,U){!(Wt.isUndefined(N)||N===null)&&e.append(o===!0?Px([S],U,s):o===null?S:S+"[]",c(N))}),!1}return y2(C)?!0:(e.append(Px(T,S,s),c(C)),!1)}const p=[],y=Object.assign(jI,{defaultVisitor:f,convertValue:c,isVisitable:y2});function m(C,S){if(!Wt.isUndefined(C)){if(p.indexOf(C)!==-1)throw Error("Circular reference detected in "+S.join("."));p.push(C),Wt.forEach(C,function(O,D){(!(Wt.isUndefined(O)||O===null)&&i.call(e,O,Wt.isString(D)?D.trim():D,S,y))===!0&&m(O,S?S.concat(D):[D])}),p.pop()}}if(!Wt.isObject(t))throw new TypeError("data must be an object");return m(t),e}function kx(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Vb(t,e){this._pairs=[],t&&Jv(t,this,e)}const $C=Vb.prototype;$C.append=function(e,n){this._pairs.push([e,n])};$C.toString=function(e){const n=e?function(r){return e.call(this,r,kx)}:kx;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function zI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function VC(t,e,n){if(!e)return t;const r=n&&n.encode||zI;Wt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Wt.isURLSearchParams(e)?e.toString():new Vb(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Mx{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Wt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const HC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},UI=typeof URLSearchParams<"u"?URLSearchParams:Vb,$I=typeof FormData<"u"?FormData:null,VI=typeof Blob<"u"?Blob:null,HI={isBrowser:!0,classes:{URLSearchParams:UI,FormData:$I,Blob:VI},protocols:["http","https","file","blob","url","data"]},Hb=typeof window<"u"&&typeof document<"u",b2=typeof navigator=="object"&&navigator||void 0,WI=Hb&&(!b2||["ReactNative","NativeScript","NS"].indexOf(b2.product)<0),GI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",qI=Hb&&window.location.href||"http://localhost",YI=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hb,hasStandardBrowserEnv:WI,hasStandardBrowserWebWorkerEnv:GI,navigator:b2,origin:qI},Symbol.toStringTag,{value:"Module"})),Ba={...YI,...HI};function ZI(t,e){return Jv(t,new Ba.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ba.isNode&&Wt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function KI(t){return Wt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function XI(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function WC(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Wt.isArray(i)?i.length:o,l?(Wt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Wt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Wt.isArray(i[o])&&(i[o]=XI(i[o])),!a)}if(Wt.isFormData(t)&&Wt.isFunction(t.entries)){const n={};return Wt.forEachEntry(t,(r,i)=>{e(KI(r),i,n,0)}),n}return null}function JI(t,e,n){if(Wt.isString(t))try{return(e||JSON.parse)(t),Wt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const am={transitional:HC,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Wt.isObject(e);if(s&&Wt.isHTMLForm(e)&&(e=new FormData(e)),Wt.isFormData(e))return i?JSON.stringify(WC(e)):e;if(Wt.isArrayBuffer(e)||Wt.isBuffer(e)||Wt.isStream(e)||Wt.isFile(e)||Wt.isBlob(e)||Wt.isReadableStream(e))return e;if(Wt.isArrayBufferView(e))return e.buffer;if(Wt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ZI(e,this.formSerializer).toString();if((a=Wt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Jv(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),JI(e)):e}],transformResponse:[function(e){const n=this.transitional||am.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Wt.isResponse(e)||Wt.isReadableStream(e))return e;if(e&&Wt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Fr.from(a,Fr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ba.classes.FormData,Blob:Ba.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Wt.forEach(["delete","get","head","post","put","patch"],t=>{am.headers[t]={}});const QI=Wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),e7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&QI[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Ax=Symbol("internals");function kp(t){return t&&String(t).trim().toLowerCase()}function S0(t){return t===!1||t==null?t:Wt.isArray(t)?t.map(S0):String(t)}function t7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const n7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function n1(t,e,n,r,i){if(Wt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Wt.isString(e)){if(Wt.isString(r))return e.indexOf(r)!==-1;if(Wt.isRegExp(r))return r.test(e)}}function r7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function i7(t,e){const n=Wt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let jl=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const f=kp(l);if(!f)throw new Error("header name must be a non-empty string");const p=Wt.findKey(i,f);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=S0(a))}const o=(a,l)=>Wt.forEach(a,(c,f)=>s(c,f,l));if(Wt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Wt.isString(e)&&(e=e.trim())&&!n7(e))o(e7(e),n);else if(Wt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=kp(e),e){const r=Wt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return t7(i);if(Wt.isFunction(n))return n.call(this,i,r);if(Wt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=kp(e),e){const r=Wt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||n1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=kp(o),o){const a=Wt.findKey(r,o);a&&(!n||n1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Wt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||n1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Wt.forEach(this,(i,s)=>{const o=Wt.findKey(r,s);if(o){n[o]=S0(i),delete n[s];return}const a=e?r7(s):String(s).trim();a!==s&&delete n[s],n[a]=S0(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Wt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Wt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Ax]=this[Ax]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=kp(o);r[a]||(i7(i,o),r[a]=!0)}return Wt.isArray(e)?e.forEach(s):s(e),this}};jl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Wt.reduceDescriptors(jl.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Wt.freezeMethods(jl);function r1(t,e){const n=this||am,r=e||n,i=jl.from(r.headers);let s=r.data;return Wt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function GC(t){return!!(t&&t.__CANCEL__)}function mp(t,e,n){Fr.call(this,t??"canceled",Fr.ERR_CANCELED,e,n),this.name="CanceledError"}Wt.inherits(mp,Fr,{__CANCEL__:!0});function qC(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Fr("Request failed with status code "+n.status,[Fr.ERR_BAD_REQUEST,Fr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function s7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function o7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),f=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,y=0;for(;p!==i;)y+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=f&&c-f;return m?Math.round(y*1e3/m):void 0}}function a7(t,e){let n=0,r=1e3/e,i,s;const o=(c,f=Date.now())=>{n=f,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const f=Date.now(),p=f-n;p>=r?o(c,f):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const av=(t,e,n=3)=>{let r=0;const i=o7(50,250);return a7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),f=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&f?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},Tx=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Ox=t=>(...e)=>Wt.asap(()=>t(...e)),l7=Ba.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ba.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ba.origin),Ba.navigator&&/(msie|trident)/i.test(Ba.navigator.userAgent)):()=>!0,u7=Ba.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Wt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Wt.isString(r)&&o.push("path="+r),Wt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function c7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function h7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function YC(t,e,n){let r=!c7(e);return t&&(r||n==!1)?h7(t,e):e}const Dx=t=>t instanceof jl?{...t}:t;function Xf(t,e){e=e||{};const n={};function r(c,f,p,y){return Wt.isPlainObject(c)&&Wt.isPlainObject(f)?Wt.merge.call({caseless:y},c,f):Wt.isPlainObject(f)?Wt.merge({},f):Wt.isArray(f)?f.slice():f}function i(c,f,p,y){if(Wt.isUndefined(f)){if(!Wt.isUndefined(c))return r(void 0,c,p,y)}else return r(c,f,p,y)}function s(c,f){if(!Wt.isUndefined(f))return r(void 0,f)}function o(c,f){if(Wt.isUndefined(f)){if(!Wt.isUndefined(c))return r(void 0,c)}else return r(void 0,f)}function a(c,f,p){if(p in e)return r(c,f);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,f,p)=>i(Dx(c),Dx(f),p,!0)};return Wt.forEach(Object.keys(Object.assign({},t,e)),function(f){const p=l[f]||i,y=p(t[f],e[f],f);Wt.isUndefined(y)&&p!==a||(n[f]=y)}),n}const ZC=t=>{const e=Xf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=jl.from(o),e.url=VC(YC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Wt.isFormData(n)){if(Ba.hasStandardBrowserEnv||Ba.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...f]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...f].join("; "))}}if(Ba.hasStandardBrowserEnv&&(r&&Wt.isFunction(r)&&(r=r(e)),r||r!==!1&&l7(e.url))){const c=i&&s&&u7.read(s);c&&o.set(i,c)}return e},f7=typeof XMLHttpRequest<"u",d7=f7&&function(t){return new Promise(function(n,r){const i=ZC(t);let s=i.data;const o=jl.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,f,p,y,m,C;function S(){m&&m(),C&&C(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function O(){if(!T)return;const N=jl.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),W={data:!a||a==="text"||a==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:N,config:t,request:T};qC(function(te){n(te),S()},function(te){r(te),S()},W),T=null}"onloadend"in T?T.onloadend=O:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(O)},T.onabort=function(){T&&(r(new Fr("Request aborted",Fr.ECONNABORTED,t,T)),T=null)},T.onerror=function(){r(new Fr("Network Error",Fr.ERR_NETWORK,t,T)),T=null},T.ontimeout=function(){let U=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const W=i.transitional||HC;i.timeoutErrorMessage&&(U=i.timeoutErrorMessage),r(new Fr(U,W.clarifyTimeoutError?Fr.ETIMEDOUT:Fr.ECONNABORTED,t,T)),T=null},s===void 0&&o.setContentType(null),"setRequestHeader"in T&&Wt.forEach(o.toJSON(),function(U,W){T.setRequestHeader(W,U)}),Wt.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),a&&a!=="json"&&(T.responseType=i.responseType),c&&([y,C]=av(c,!0),T.addEventListener("progress",y)),l&&T.upload&&([p,m]=av(l),T.upload.addEventListener("progress",p),T.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(f=N=>{T&&(r(!N||N.type?new mp(null,t,T):N),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const D=s7(i.url);if(D&&Ba.protocols.indexOf(D)===-1){r(new Fr("Unsupported protocol "+D+":",Fr.ERR_BAD_REQUEST,t));return}T.send(s||null)})},p7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const f=c instanceof Error?c:this.reason;r.abort(f instanceof Fr?f:new mp(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,s(new Fr(`timeout ${e} of ms exceeded`,Fr.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Wt.asap(a),l}},g7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},m7=async function*(t,e){for await(const n of v7(t))yield*g7(n,e)},v7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Ix=(t,e,n,r)=>{const i=m7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:f}=await i.next();if(c){a(),l.close();return}let p=f.byteLength;if(n){let y=s+=p;n(y)}l.enqueue(new Uint8Array(f))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Qv=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",KC=Qv&&typeof ReadableStream=="function",y7=Qv&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),XC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},b7=KC&&XC(()=>{let t=!1;const e=new Request(Ba.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Nx=64*1024,_2=KC&&XC(()=>Wt.isReadableStream(new Response("").body)),lv={stream:_2&&(t=>t.body)};Qv&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!lv[e]&&(lv[e]=Wt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Fr(`Response type '${e}' is not supported`,Fr.ERR_NOT_SUPPORT,r)})})})(new Response);const _7=async t=>{if(t==null)return 0;if(Wt.isBlob(t))return t.size;if(Wt.isSpecCompliantForm(t))return(await new Request(Ba.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Wt.isArrayBufferView(t)||Wt.isArrayBuffer(t))return t.byteLength;if(Wt.isURLSearchParams(t)&&(t=t+""),Wt.isString(t))return(await y7(t)).byteLength},w7=async(t,e)=>{const n=Wt.toFiniteNumber(t.getContentLength());return n??_7(e)},x7=Qv&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:f,withCredentials:p="same-origin",fetchOptions:y}=ZC(t);c=c?(c+"").toLowerCase():"text";let m=p7([i,s&&s.toAbortSignal()],o),C;const S=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let T;try{if(l&&b7&&n!=="get"&&n!=="head"&&(T=await w7(f,r))!==0){let W=new Request(e,{method:"POST",body:r,duplex:"half"}),ee;if(Wt.isFormData(r)&&(ee=W.headers.get("content-type"))&&f.setContentType(ee),W.body){const[te,V]=Tx(T,av(Ox(l)));r=Ix(W.body,Nx,te,V)}}Wt.isString(p)||(p=p?"include":"omit");const O="credentials"in Request.prototype;C=new Request(e,{...y,signal:m,method:n.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:O?p:void 0});let D=await fetch(C);const N=_2&&(c==="stream"||c==="response");if(_2&&(a||N&&S)){const W={};["status","statusText","headers"].forEach(Y=>{W[Y]=D[Y]});const ee=Wt.toFiniteNumber(D.headers.get("content-length")),[te,V]=a&&Tx(ee,av(Ox(a),!0))||[];D=new Response(Ix(D.body,Nx,te,()=>{V&&V(),S&&S()}),W)}c=c||"text";let U=await lv[Wt.findKey(lv,c)||"text"](D,t);return!N&&S&&S(),await new Promise((W,ee)=>{qC(W,ee,{data:U,headers:jl.from(D.headers),status:D.status,statusText:D.statusText,config:t,request:C})})}catch(O){throw S&&S(),O&&O.name==="TypeError"&&/fetch/i.test(O.message)?Object.assign(new Fr("Network Error",Fr.ERR_NETWORK,t,C),{cause:O.cause||O}):Fr.from(O,O&&O.code,t,C)}}),w2={http:RI,xhr:d7,fetch:x7};Wt.forEach(w2,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Bx=t=>`- ${t}`,L7=t=>Wt.isFunction(t)||t===null||t===!1,JC={getAdapter:t=>{t=Wt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!L7(n)&&(r=w2[(o=String(n)).toLowerCase()],r===void 0))throw new Fr(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Bx).join(`
`):" "+Bx(s[0]):"as no adapter specified";throw new Fr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:w2};function i1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new mp(null,t)}function Rx(t){return i1(t),t.headers=jl.from(t.headers),t.data=r1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),JC.getAdapter(t.adapter||am.adapter)(t).then(function(r){return i1(t),r.data=r1.call(t,t.transformResponse,r),r.headers=jl.from(r.headers),r},function(r){return GC(r)||(i1(t),r&&r.response&&(r.response.data=r1.call(t,t.transformResponse,r.response),r.response.headers=jl.from(r.response.headers))),Promise.reject(r)})}const QC="1.8.4",ey={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ey[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Fx={};ey.transitional=function(e,n,r){function i(s,o){return"[Axios v"+QC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Fr(i(o," has been removed"+(n?" in "+n:"")),Fr.ERR_DEPRECATED);return n&&!Fx[o]&&(Fx[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};ey.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function C7(t,e,n){if(typeof t!="object")throw new Fr("options must be an object",Fr.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Fr("option "+s+" must be "+l,Fr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Fr("Unknown option "+s,Fr.ERR_BAD_OPTION)}}const E0={assertOptions:C7,validators:ey},Lc=E0.validators;let Hf=class{constructor(e){this.defaults=e,this.interceptors={request:new Mx,response:new Mx}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Xf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&E0.assertOptions(r,{silentJSONParsing:Lc.transitional(Lc.boolean),forcedJSONParsing:Lc.transitional(Lc.boolean),clarifyTimeoutError:Lc.transitional(Lc.boolean)},!1),i!=null&&(Wt.isFunction(i)?n.paramsSerializer={serialize:i}:E0.assertOptions(i,{encode:Lc.function,serialize:Lc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),E0.assertOptions(n,{baseUrl:Lc.spelling("baseURL"),withXsrfToken:Lc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Wt.merge(s.common,s[n.method]);s&&Wt.forEach(["delete","get","head","post","put","patch","common"],C=>{delete s[C]}),n.headers=jl.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(l=l&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const c=[];this.interceptors.response.forEach(function(S){c.push(S.fulfilled,S.rejected)});let f,p=0,y;if(!l){const C=[Rx.bind(this),void 0];for(C.unshift.apply(C,a),C.push.apply(C,c),y=C.length,f=Promise.resolve(n);p<y;)f=f.then(C[p++],C[p++]);return f}y=a.length;let m=n;for(p=0;p<y;){const C=a[p++],S=a[p++];try{m=C(m)}catch(T){S.call(this,T);break}}try{f=Rx.call(this,m)}catch(C){return Promise.reject(C)}for(p=0,y=c.length;p<y;)f=f.then(c[p++],c[p++]);return f}getUri(e){e=Xf(this.defaults,e);const n=YC(e.baseURL,e.url,e.allowAbsoluteUrls);return VC(n,e.params,e.paramsSerializer)}};Wt.forEach(["delete","get","head","options"],function(e){Hf.prototype[e]=function(n,r){return this.request(Xf(r||{},{method:e,url:n,data:(r||{}).data}))}});Wt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Xf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Hf.prototype[e]=n(),Hf.prototype[e+"Form"]=n(!0)});let S7=class eS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new mp(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new eS(function(i){e=i}),cancel:e}}};function E7(t){return function(n){return t.apply(null,n)}}function P7(t){return Wt.isObject(t)&&t.isAxiosError===!0}const x2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(x2).forEach(([t,e])=>{x2[e]=t});function tS(t){const e=new Hf(t),n=OC(Hf.prototype.request,e);return Wt.extend(n,Hf.prototype,e,{allOwnKeys:!0}),Wt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return tS(Xf(t,i))},n}const go=tS(am);go.Axios=Hf;go.CanceledError=mp;go.CancelToken=S7;go.isCancel=GC;go.VERSION=QC;go.toFormData=Jv;go.AxiosError=Fr;go.Cancel=go.CanceledError;go.all=function(e){return Promise.all(e)};go.spread=E7;go.isAxiosError=P7;go.mergeConfig=Xf;go.AxiosHeaders=jl;go.formToJSON=t=>WC(Wt.isHTMLForm(t)?new FormData(t):t);go.getAdapter=JC.getAdapter;go.HttpStatusCode=x2;go.default=go;const{Axios:ere,AxiosError:tre,CanceledError:nre,isCancel:rre,CancelToken:ire,VERSION:sre,all:ore,Cancel:are,isAxiosError:lre,spread:ure,toFormData:cre,AxiosHeaders:hre,HttpStatusCode:fre,formToJSON:dre,getAdapter:pre,mergeConfig:gre}=go,Cn=go.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function nS(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Cn.interceptors.request.use(async t=>{try{const e=nS("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t}catch{return t}},t=>Promise.reject(t));Cn.interceptors.response.use(t=>t,async t=>{var n,r;const e=t.config;try{if(((n=t.response)==null?void 0:n.status)===401&&!e._retry&&!((r=e.url)!=null&&r.includes("/token/refresh/"))){e._retry=!0;const i=po();try{await i.refreshToken();const s=nS("access_token");if(s)return e.headers.Authorization=`Bearer ${s}`,Cn(e)}catch(s){return await i.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(s)}}return Promise.reject(t)}catch(i){return Promise.reject(i)}});function k7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function s1(t){const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search);try{return(await ha.getUsers(e)).data}catch(n){throw n}}const ha={async getUsers(t={}){try{return await Cn.get("/users/",{params:t})}catch(e){throw e}},async getUser(t){return await Cn.get(`/users/${t}/`)},async createUser(t){return await Cn.post("/users/",t)},async updateUser(t,e){return await Cn.patch(`/users/${t}/`,e)},async deleteUser(t){return await Cn.delete(`/users/${t}/`)},async getEntreprises(){return await Cn.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await Cn.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await Cn.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await Cn.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e={role:t.role};return t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),await Cn.get("/users/",{params:e})},async getEntrepriseSalaries(t){return await Cn.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await Cn.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await Cn.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await Cn.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},async uploadLogo(t){try{const e=new FormData,n=this.formatLogoFileName(t),r=new File([t],n,{type:t.type});return e.append("logo",r),await Cn.post("/users/upload_logo/",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw e}}};async function o1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;await new Promise(l=>setTimeout(l,o+a))}}const Gm={async getPlans(){try{return await Cn.get("/plans/")}catch(t){throw t}},async createPlan(t){try{const e={...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null};return await Cn.post("/plans/",e)}catch(e){throw e}},async updatePlan(t,e){try{return await Cn.put(`/plans/${t}/`,e)}catch(n){throw n}},async deletePlan(t){try{return await Cn.delete(`/plans/${t}/`)}catch(e){throw e}},async getVisiteurPlans(t){return await Cn.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await Cn.post("/plans/",t)},async getEntreprisePlans(t){return await Cn.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await Cn.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await Cn.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await Cn.post("/plans/",n)}},Yo={async getNotes(t={}){try{return await Cn.get("/notes/",{params:t})}catch(e){throw console.error("Error getting notes:",e),e}},async getNotesByPlan(t){try{return await Cn.get("/notes/",{params:{plan:t}})}catch(e){throw console.error("Error getting notes for plan:",e),e}},async getNote(t){try{return await Cn.get(`/notes/${t}/`)}catch(e){throw console.error("Error getting note:",e),e}},async createNote(t){try{const e={...t};return e.location&&Object.keys(e.location).length===0&&delete e.location,await Cn.post("/notes/",e)}catch(e){throw console.error("Error creating note:",e),e}},async updateNote(t,e){try{const n=e.backendId||t,r={...e};r.location&&Object.keys(r.location).length===0&&delete r.location,e.column!==void 0?r.column=e.column:e.columnId!==void 0&&(r.column=e.columnId),delete r.columnId,delete r.column_id,delete r.column_details,delete r.backendId,delete r.leafletId;const i=r.enterprise_id;delete r.enterprise_name;const s=await Cn.patch(`/notes/${n}/`,r);return i!==void 0&&(s.data.enterprise_id=i),s}catch(n){throw console.error("[noteService][updateNote] Erreur lors de la mise à jour:",n),n}},async deleteNote(t){try{return await Cn.delete(`/notes/${t}/`)}catch(e){throw console.error("Error deleting note:",e),e}},async getComments(t){return await Cn.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return await Cn.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await Cn.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await Cn.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await Cn.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await Cn.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await Cn.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await Cn.delete(`/notes/${t}/photos/${e}/`)}},a1={async getDevices(t={}){try{return await o1(()=>Cn.get("/weather/devices/",{params:t}),3,1e3,1e4)}catch(e){throw console.error("Error getting weather devices:",e),e}},async getRealTimeData(t){try{const e=typeof t=="string"?{mac:t}:t;return await o1(()=>Cn.get("/weather/",{params:e}),3,1e3,1e4)}catch(e){throw console.error("Error getting real-time weather data:",e),e}},async getHistoryData(t){try{return await o1(()=>Cn.get("/weather/history/",{params:t}),3,1e3,1e4)}catch(e){throw console.error("Error getting weather history data:",e),e}}},qm={async getFilters(){try{return await Cn.get("/map-filters/")}catch(t){throw console.error("Error getting map filters:",t),t}},async getFilter(t){try{return await Cn.get(`/map-filters/${t}/`)}catch(e){throw console.error("Error getting map filter:",e),e}},async createFilter(t){try{return await Cn.post("/map-filters/",t)}catch(e){throw console.error("Error creating map filter:",e),e}},async updateFilter(t,e){try{return await Cn.patch(`/map-filters/${t}/`,e)}catch(n){throw console.error("Error updating map filter:",n),n}},async deleteFilter(t){try{return await Cn.delete(`/map-filters/${t}/`)}catch(e){throw console.error("Error deleting map filter:",e),e}}},L2={async getGoogleMapsApiKey(){try{return await Cn.get("/settings/get_google_maps_api_key/")}catch(t){throw console.error("Error getting Google Maps API key:",t),t}},async setGoogleMapsApiKey(t){try{return await Cn.post("/settings/set_google_maps_api_key/",{key:t})}catch(e){throw console.error("Error setting Google Maps API key:",e),e}}};Cn.defaults.baseURL="/api";Cn.defaults.headers.common["Content-Type"]="application/json";Cn.defaults.withCredentials=!0;function zg(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Cn.interceptors.request.use(t=>{const e=zg("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Cn.interceptors.response.use(t=>t,async t=>{var r,i;const e=po(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!zg("access_token"))throw new Error("No token available");await e.refreshToken();const o=zg("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Cn(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function M7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function ec(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function A7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const T7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function O7(t){return T7[t]||t}function D7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function I7(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function N7({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await ha.getUsers(i)).data}const po=pp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!zg("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await Cn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await Cn.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Cn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await Cn.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!zg("refresh_token"))throw new Error("No refresh token available");const r=await Cn.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return M7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await ha.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la récupération des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await ha.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await ha.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await ha.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await ha.createUser(t)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await ha.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise à jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await ha.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await Cn.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await Cn.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise à jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await Cn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await Cn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await ha.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du téléversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await N7(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await ha.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await ha.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Rd=typeof document<"u";function rS(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function B7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&rS(t.default)}const Mi=Object.assign;function l1(t,e){const n={};for(const r in e){const i=e[r];n[r]=ac(i)?i.map(t):t(i)}return n}const pg=()=>{},ac=Array.isArray,iS=/#/g,R7=/&/g,F7=/\//g,j7=/=/g,z7=/\?/g,sS=/\+/g,U7=/%5B/g,$7=/%5D/g,oS=/%5E/g,V7=/%60/g,aS=/%7B/g,H7=/%7C/g,lS=/%7D/g,W7=/%20/g;function Wb(t){return encodeURI(""+t).replace(H7,"|").replace(U7,"[").replace($7,"]")}function G7(t){return Wb(t).replace(aS,"{").replace(lS,"}").replace(oS,"^")}function C2(t){return Wb(t).replace(sS,"%2B").replace(W7,"+").replace(iS,"%23").replace(R7,"%26").replace(V7,"`").replace(aS,"{").replace(lS,"}").replace(oS,"^")}function q7(t){return C2(t).replace(j7,"%3D")}function Y7(t){return Wb(t).replace(iS,"%23").replace(z7,"%3F")}function Z7(t){return t==null?"":Y7(t).replace(F7,"%2F")}function Ug(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const K7=/\/$/,X7=t=>t.replace(K7,"");function u1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=tN(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:Ug(o)}}function J7(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function jx(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Q7(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&sp(e.matched[r],n.matched[i])&&uS(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function sp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function uS(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!eN(t[n],e[n]))return!1;return!0}function eN(t,e){return ac(t)?zx(t,e):ac(e)?zx(e,t):t===e}function zx(t,e){return ac(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function tN(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Dh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var $g;(function(t){t.pop="pop",t.push="push"})($g||($g={}));var gg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(gg||(gg={}));function nN(t){if(!t)if(Rd){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),X7(t)}const rN=/^[^#]+#/;function iN(t,e){return t.replace(rN,"#")+e}function sN(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ty=()=>({left:window.scrollX,top:window.scrollY});function oN(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=sN(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Ux(t,e){return(history.state?history.state.position-e:-1)+t}const S2=new Map;function aN(t,e){S2.set(t,e)}function lN(t){const e=S2.get(t);return S2.delete(t),e}let uN=()=>location.protocol+"//"+location.host;function cS(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),jx(l,"")}return jx(n,t)+r+i}function cN(t,e,n,r){let i=[],s=[],o=null;const a=({state:y})=>{const m=cS(t,location),C=n.value,S=e.value;let T=0;if(y){if(n.value=m,e.value=y,o&&o===C){o=null;return}T=S?y.position-S.position:0}else r(m);i.forEach(O=>{O(n.value,C,{delta:T,type:$g.pop,direction:T?T>0?gg.forward:gg.back:gg.unknown})})};function l(){o=n.value}function c(y){i.push(y);const m=()=>{const C=i.indexOf(y);C>-1&&i.splice(C,1)};return s.push(m),m}function f(){const{history:y}=window;y.state&&y.replaceState(Mi({},y.state,{scroll:ty()}),"")}function p(){for(const y of s)y();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function $x(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?ty():null}}function hN(t){const{history:e,location:n}=window,r={value:cS(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,f){const p=t.indexOf("#"),y=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:uN()+t+l;try{e[f?"replaceState":"pushState"](c,"",y),i.value=c}catch(m){console.error(m),n[f?"replace":"assign"](y)}}function o(l,c){const f=Mi({},e.state,$x(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,f,!0),r.value=l}function a(l,c){const f=Mi({},i.value,e.state,{forward:l,scroll:ty()});s(f.current,f,!0);const p=Mi({},$x(r.value,l,null),{position:f.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function fN(t){t=nN(t);const e=hN(t),n=cN(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Mi({location:"",base:t,go:r,createHref:iN.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function dN(t){return typeof t=="string"||t&&typeof t=="object"}function hS(t){return typeof t=="string"||typeof t=="symbol"}const fS=Symbol("");var Vx;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Vx||(Vx={}));function op(t,e){return Mi(new Error,{type:t,[fS]:!0},e)}function ih(t,e){return t instanceof Error&&fS in t&&(e==null||!!(t.type&e))}const Hx="[^/]+?",pN={sensitive:!1,strict:!1,start:!0,end:!0},gN=/[.+*?^${}()[\]/\\]/g;function mN(t,e){const n=Mi({},pN,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const f=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const y=c[p];let m=40+(n.sensitive?.25:0);if(y.type===0)p||(i+="/"),i+=y.value.replace(gN,"\\$&"),m+=40;else if(y.type===1){const{value:C,repeatable:S,optional:T,regexp:O}=y;s.push({name:C,repeatable:S,optional:T});const D=O||Hx;if(D!==Hx){m+=10;try{new RegExp(`(${D})`)}catch(U){throw new Error(`Invalid custom RegExp for param "${C}" (${D}): `+U.message)}}let N=S?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;p||(N=T&&c.length<2?`(?:/${N})`:"/"+N),T&&(N+="?"),i+=N,m+=20,T&&(m+=-8),S&&(m+=-20),D===".*"&&(m+=-50)}f.push(m)}r.push(f)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const f=c.match(o),p={};if(!f)return null;for(let y=1;y<f.length;y++){const m=f[y]||"",C=s[y-1];p[C.name]=m&&C.repeatable?m.split("/"):m}return p}function l(c){let f="",p=!1;for(const y of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const m of y)if(m.type===0)f+=m.value;else if(m.type===1){const{value:C,repeatable:S,optional:T}=m,O=C in c?c[C]:"";if(ac(O)&&!S)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const D=ac(O)?O.join("/"):O;if(!D)if(T)y.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${C}"`);f+=D}}return f||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function vN(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function dS(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=vN(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(Wx(r))return 1;if(Wx(i))return-1}return i.length-r.length}function Wx(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const yN={type:0,value:""},bN=/[a-zA-Z0-9_]/;function _N(t){if(!t)return[[]];if(t==="/")return[[yN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",f="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function y(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):y();break;case 4:y(),n=r;break;case 1:l==="("?n=2:bN.test(l)?y():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=3:f+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,f="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function wN(t,e,n){const r=mN(_N(t.path),n),i=Mi(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function xN(t,e){const n=[],r=new Map;e=Zx({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,y,m){const C=!m,S=qx(p);S.aliasOf=m&&m.record;const T=Zx(e,p),O=[S];if("alias"in p){const U=typeof p.alias=="string"?[p.alias]:p.alias;for(const W of U)O.push(qx(Mi({},S,{components:m?m.record.components:S.components,path:W,aliasOf:m?m.record:S})))}let D,N;for(const U of O){const{path:W}=U;if(y&&W[0]!=="/"){const ee=y.record.path,te=ee[ee.length-1]==="/"?"":"/";U.path=y.record.path+(W&&te+W)}if(D=wN(U,y,T),m?m.alias.push(D):(N=N||D,N!==D&&N.alias.push(D),C&&p.name&&!Yx(D)&&o(p.name)),pS(D)&&l(D),S.children){const ee=S.children;for(let te=0;te<ee.length;te++)s(ee[te],D,m&&m.children[te])}m=m||D}return N?()=>{o(N)}:pg}function o(p){if(hS(p)){const y=r.get(p);y&&(r.delete(p),n.splice(n.indexOf(y),1),y.children.forEach(o),y.alias.forEach(o))}else{const y=n.indexOf(p);y>-1&&(n.splice(y,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const y=SN(p,n);n.splice(y,0,p),p.record.name&&!Yx(p)&&r.set(p.record.name,p)}function c(p,y){let m,C={},S,T;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw op(1,{location:p});T=m.record.name,C=Mi(Gx(y.params,m.keys.filter(N=>!N.optional).concat(m.parent?m.parent.keys.filter(N=>N.optional):[]).map(N=>N.name)),p.params&&Gx(p.params,m.keys.map(N=>N.name))),S=m.stringify(C)}else if(p.path!=null)S=p.path,m=n.find(N=>N.re.test(S)),m&&(C=m.parse(S),T=m.record.name);else{if(m=y.name?r.get(y.name):n.find(N=>N.re.test(y.path)),!m)throw op(1,{location:p,currentLocation:y});T=m.record.name,C=Mi({},y.params,p.params),S=m.stringify(C)}const O=[];let D=m;for(;D;)O.unshift(D.record),D=D.parent;return{name:T,path:S,params:C,matched:O,meta:CN(O)}}t.forEach(p=>s(p));function f(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:f,getRoutes:a,getRecordMatcher:i}}function Gx(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function qx(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:LN(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function LN(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Yx(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function CN(t){return t.reduce((e,n)=>Mi(e,n.meta),{})}function Zx(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function SN(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;dS(t,e[s])<0?r=s:n=s+1}const i=EN(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function EN(t){let e=t;for(;e=e.parent;)if(pS(e)&&dS(t,e)===0)return e}function pS({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function PN(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(sS," "),o=s.indexOf("="),a=Ug(o<0?s:s.slice(0,o)),l=o<0?null:Ug(s.slice(o+1));if(a in e){let c=e[a];ac(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Kx(t){let e="";for(let n in t){const r=t[n];if(n=q7(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(ac(r)?r.map(s=>s&&C2(s)):[r&&C2(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function kN(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=ac(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const MN=Symbol(""),Xx=Symbol(""),ny=Symbol(""),Gb=Symbol(""),E2=Symbol("");function Mp(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Vh(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=y=>{y===!1?l(op(4,{from:n,to:e})):y instanceof Error?l(y):dN(y)?l(op(2,{from:e,to:y})):(o&&r.enterCallbacks[i]===o&&typeof y=="function"&&o.push(y),a())},f=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(f);t.length<3&&(p=p.then(c)),p.catch(y=>l(y))})}function c1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(rS(l)){const f=(l.__vccOpts||l)[e];f&&s.push(Vh(f,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=B7(f)?f.default:f;o.mods[a]=f,o.components[a]=p;const m=(p.__vccOpts||p)[e];return m&&Vh(m,n,r,o,a,i)()}))}}return s}function Jx(t){const e=au(ny),n=au(Gb),r=ir(()=>{const l=_n(t.to);return e.resolve(l)}),i=ir(()=>{const{matched:l}=r.value,{length:c}=l,f=l[c-1],p=n.matched;if(!f||!p.length)return-1;const y=p.findIndex(sp.bind(null,f));if(y>-1)return y;const m=Qx(l[c-2]);return c>1&&Qx(f)===m&&p[p.length-1].path!==m?p.findIndex(sp.bind(null,l[c-2])):y}),s=ir(()=>i.value>-1&&DN(n.params,r.value.params)),o=ir(()=>i.value>-1&&i.value===n.matched.length-1&&uS(n.params,r.value.params));function a(l={}){if(ON(l)){const c=e[_n(t.replace)?"replace":"push"](_n(t.to)).catch(pg);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:ir(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function AN(t){return t.length===1?t[0]:t}const TN=ws({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Jx,setup(t,{slots:e}){const n=cu(Jx(t)),{options:r}=au(ny),i=ir(()=>({[e4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[e4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&AN(e.default(n));return t.custom?s:Gv("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),qp=TN;function ON(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function DN(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!ac(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Qx(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const e4=(t,e,n)=>t??e??n,IN=ws({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=au(E2),i=ir(()=>t.route||r.value),s=au(Xx,0),o=ir(()=>{let c=_n(s);const{matched:f}=i.value;let p;for(;(p=f[c])&&!p.components;)c++;return c}),a=ir(()=>i.value.matched[o.value]);cg(Xx,ir(()=>o.value+1)),cg(MN,a),cg(E2,i);const l=kt();return vi(()=>[l.value,a.value,t.name],([c,f,p],[y,m,C])=>{f&&(f.instances[p]=c,m&&m!==f&&c&&c===y&&(f.leaveGuards.size||(f.leaveGuards=m.leaveGuards),f.updateGuards.size||(f.updateGuards=m.updateGuards))),c&&f&&(!m||!sp(f,m)||!y)&&(f.enterCallbacks[p]||[]).forEach(S=>S(c))},{flush:"post"}),()=>{const c=i.value,f=t.name,p=a.value,y=p&&p.components[f];if(!y)return t4(n.default,{Component:y,route:c});const m=p.props[f],C=m?m===!0?c.params:typeof m=="function"?m(c):m:null,T=Gv(y,Mi({},C,e,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return t4(n.default,{Component:T,route:c})||T}}});function t4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const gS=IN;function NN(t){const e=xN(t.routes,t),n=t.parseQuery||PN,r=t.stringifyQuery||Kx,i=t.history,s=Mp(),o=Mp(),a=Mp(),l=Lb(Dh);let c=Dh;Rd&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=l1.bind(null,be=>""+be),p=l1.bind(null,Z7),y=l1.bind(null,Ug);function m(be,Ae){let Ee,Je;return hS(be)?(Ee=e.getRecordMatcher(be),Je=Ae):Je=be,e.addRoute(Je,Ee)}function C(be){const Ae=e.getRecordMatcher(be);Ae&&e.removeRoute(Ae)}function S(){return e.getRoutes().map(be=>be.record)}function T(be){return!!e.getRecordMatcher(be)}function O(be,Ae){if(Ae=Mi({},Ae||l.value),typeof be=="string"){const oe=u1(n,be,Ae.path),ce=e.resolve({path:oe.path},Ae),Q=i.createHref(oe.fullPath);return Mi(oe,ce,{params:y(ce.params),hash:Ug(oe.hash),redirectedFrom:void 0,href:Q})}let Ee;if(be.path!=null)Ee=Mi({},be,{path:u1(n,be.path,Ae.path).path});else{const oe=Mi({},be.params);for(const ce in oe)oe[ce]==null&&delete oe[ce];Ee=Mi({},be,{params:p(oe)}),Ae.params=p(Ae.params)}const Je=e.resolve(Ee,Ae),gt=be.hash||"";Je.params=f(y(Je.params));const _t=J7(r,Mi({},be,{hash:G7(gt),path:Je.path})),ue=i.createHref(_t);return Mi({fullPath:_t,hash:gt,query:r===Kx?kN(be.query):be.query||{}},Je,{redirectedFrom:void 0,href:ue})}function D(be){return typeof be=="string"?u1(n,be,l.value.path):Mi({},be)}function N(be,Ae){if(c!==be)return op(8,{from:Ae,to:be})}function U(be){return te(be)}function W(be){return U(Mi(D(be),{replace:!0}))}function ee(be){const Ae=be.matched[be.matched.length-1];if(Ae&&Ae.redirect){const{redirect:Ee}=Ae;let Je=typeof Ee=="function"?Ee(be):Ee;return typeof Je=="string"&&(Je=Je.includes("?")||Je.includes("#")?Je=D(Je):{path:Je},Je.params={}),Mi({query:be.query,hash:be.hash,params:Je.path!=null?{}:be.params},Je)}}function te(be,Ae){const Ee=c=O(be),Je=l.value,gt=be.state,_t=be.force,ue=be.replace===!0,oe=ee(Ee);if(oe)return te(Mi(D(oe),{state:typeof oe=="object"?Mi({},gt,oe.state):gt,force:_t,replace:ue}),Ae||Ee);const ce=Ee;ce.redirectedFrom=Ae;let Q;return!_t&&Q7(r,Je,Ee)&&(Q=op(16,{to:ce,from:Je}),Ue(Je,Je,!0,!1)),(Q?Promise.resolve(Q):de(ce,Je)).catch(Pe=>ih(Pe)?ih(Pe,2)?Pe:Te(Pe):K(Pe,ce,Je)).then(Pe=>{if(Pe){if(ih(Pe,2))return te(Mi({replace:ue},D(Pe.to),{state:typeof Pe.to=="object"?Mi({},gt,Pe.to.state):gt,force:_t}),Ae||ce)}else Pe=H(ce,Je,!0,ue,gt);return $(ce,Je,Pe),Pe})}function V(be,Ae){const Ee=N(be,Ae);return Ee?Promise.reject(Ee):Promise.resolve()}function Y(be){const Ae=se.values().next().value;return Ae&&typeof Ae.runWithContext=="function"?Ae.runWithContext(be):be()}function de(be,Ae){let Ee;const[Je,gt,_t]=BN(be,Ae);Ee=c1(Je.reverse(),"beforeRouteLeave",be,Ae);for(const oe of Je)oe.leaveGuards.forEach(ce=>{Ee.push(Vh(ce,be,Ae))});const ue=V.bind(null,be,Ae);return Ee.push(ue),we(Ee).then(()=>{Ee=[];for(const oe of s.list())Ee.push(Vh(oe,be,Ae));return Ee.push(ue),we(Ee)}).then(()=>{Ee=c1(gt,"beforeRouteUpdate",be,Ae);for(const oe of gt)oe.updateGuards.forEach(ce=>{Ee.push(Vh(ce,be,Ae))});return Ee.push(ue),we(Ee)}).then(()=>{Ee=[];for(const oe of _t)if(oe.beforeEnter)if(ac(oe.beforeEnter))for(const ce of oe.beforeEnter)Ee.push(Vh(ce,be,Ae));else Ee.push(Vh(oe.beforeEnter,be,Ae));return Ee.push(ue),we(Ee)}).then(()=>(be.matched.forEach(oe=>oe.enterCallbacks={}),Ee=c1(_t,"beforeRouteEnter",be,Ae,Y),Ee.push(ue),we(Ee))).then(()=>{Ee=[];for(const oe of o.list())Ee.push(Vh(oe,be,Ae));return Ee.push(ue),we(Ee)}).catch(oe=>ih(oe,8)?oe:Promise.reject(oe))}function $(be,Ae,Ee){a.list().forEach(Je=>Y(()=>Je(be,Ae,Ee)))}function H(be,Ae,Ee,Je,gt){const _t=N(be,Ae);if(_t)return _t;const ue=Ae===Dh,oe=Rd?history.state:{};Ee&&(Je||ue?i.replace(be.fullPath,Mi({scroll:ue&&oe&&oe.scroll},gt)):i.push(be.fullPath,gt)),l.value=be,Ue(be,Ae,Ee,ue),Te()}let le;function ae(){le||(le=i.listen((be,Ae,Ee)=>{if(!pe.listening)return;const Je=O(be),gt=ee(Je);if(gt){te(Mi(gt,{replace:!0,force:!0}),Je).catch(pg);return}c=Je;const _t=l.value;Rd&&aN(Ux(_t.fullPath,Ee.delta),ty()),de(Je,_t).catch(ue=>ih(ue,12)?ue:ih(ue,2)?(te(Mi(D(ue.to),{force:!0}),Je).then(oe=>{ih(oe,20)&&!Ee.delta&&Ee.type===$g.pop&&i.go(-1,!1)}).catch(pg),Promise.reject()):(Ee.delta&&i.go(-Ee.delta,!1),K(ue,Je,_t))).then(ue=>{ue=ue||H(Je,_t,!1),ue&&(Ee.delta&&!ih(ue,8)?i.go(-Ee.delta,!1):Ee.type===$g.pop&&ih(ue,20)&&i.go(-1,!1)),$(Je,_t,ue)}).catch(pg)}))}let z=Mp(),B=Mp(),X;function K(be,Ae,Ee){Te(be);const Je=B.list();return Je.length?Je.forEach(gt=>gt(be,Ae,Ee)):console.error(be),Promise.reject(be)}function ye(){return X&&l.value!==Dh?Promise.resolve():new Promise((be,Ae)=>{z.add([be,Ae])})}function Te(be){return X||(X=!be,ae(),z.list().forEach(([Ae,Ee])=>be?Ee(be):Ae()),z.reset()),be}function Ue(be,Ae,Ee,Je){const{scrollBehavior:gt}=t;if(!Rd||!gt)return Promise.resolve();const _t=!Ee&&lN(Ux(be.fullPath,0))||(Je||!Ee)&&history.state&&history.state.scroll||null;return ll().then(()=>gt(be,Ae,_t)).then(ue=>ue&&oN(ue)).catch(ue=>K(ue,be,Ae))}const J=be=>i.go(be);let ie;const se=new Set,pe={currentRoute:l,listening:!0,addRoute:m,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:T,getRoutes:S,resolve:O,options:t,push:U,replace:W,go:J,back:()=>J(-1),forward:()=>J(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:B.add,isReady:ye,install(be){const Ae=this;be.component("RouterLink",qp),be.component("RouterView",gS),be.config.globalProperties.$router=Ae,Object.defineProperty(be.config.globalProperties,"$route",{enumerable:!0,get:()=>_n(l)}),Rd&&!ie&&l.value===Dh&&(ie=!0,U(i.location).catch(gt=>{}));const Ee={};for(const gt in Dh)Object.defineProperty(Ee,gt,{get:()=>l.value[gt],enumerable:!0});be.provide(ny,Ae),be.provide(Gb,wb(Ee)),be.provide(E2,l);const Je=be.unmount;se.add(be),be.unmount=function(){se.delete(be),se.size<1&&(c=Dh,le&&le(),le=null,l.value=Dh,ie=!1,X=!1),Je()}}};function we(be){return be.reduce((Ae,Ee)=>Ae.then(()=>Y(Ee)),Promise.resolve())}return pe}function BN(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>sp(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>sp(c,l))||i.push(l))}return[n,r,i]}function ry(){return au(ny)}function RN(t){return au(Gb)}const ul=pp("notification",()=>{const t=kt([]),e=kt(0),n=kt(null),r=ir(()=>[...t.value].sort((p,y)=>y.timestamp-p.timestamp));function i({type:p,message:y,duration:m=5e3}){const C=++e.value,S=Date.now(),T={id:C,type:p,message:y,duration:m,timestamp:S};return t.value.push(T),n.value=C,m>0&&setTimeout(()=>{c(C)},m),C}const s=(p,y=5e3)=>i({type:"success",message:p,duration:y}),o=(p,y=5e3)=>i({type:"error",message:p,duration:y}),a=(p,y=5e3)=>i({type:"info",message:p,duration:y}),l=(p,y=5e3)=>i({type:"warning",message:p,duration:y});function c(p){const y=t.value.findIndex(m=>m.id===p);y!==-1&&t.value.splice(y,1),n.value===p&&(n.value=null)}function f(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:f,success:s,error:o,info:a,warning:l}}),FN=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:ul},Symbol.toStringTag,{value:"Module"}));var Zo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function jN(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var vS=jN,zN=typeof Zo=="object"&&Zo&&Zo.Object===Object&&Zo,UN=zN,$N=UN,VN=typeof self=="object"&&self&&self.Object===Object&&self,HN=$N||VN||Function("return this")(),yS=HN,WN=yS,GN=function(){return WN.Date.now()},qN=GN,YN=/\s/;function ZN(t){for(var e=t.length;e--&&YN.test(t.charAt(e)););return e}var KN=ZN,XN=KN,JN=/^\s+/;function QN(t){return t&&t.slice(0,XN(t)+1).replace(JN,"")}var eB=QN,tB=yS,nB=tB.Symbol,bS=nB,n4=bS,_S=Object.prototype,rB=_S.hasOwnProperty,iB=_S.toString,Ap=n4?n4.toStringTag:void 0;function sB(t){var e=rB.call(t,Ap),n=t[Ap];try{t[Ap]=void 0;var r=!0}catch{}var i=iB.call(t);return r&&(e?t[Ap]=n:delete t[Ap]),i}var oB=sB,aB=Object.prototype,lB=aB.toString;function uB(t){return lB.call(t)}var cB=uB,r4=bS,hB=oB,fB=cB,dB="[object Null]",pB="[object Undefined]",i4=r4?r4.toStringTag:void 0;function gB(t){return t==null?t===void 0?pB:dB:i4&&i4 in Object(t)?hB(t):fB(t)}var mB=gB;function vB(t){return t!=null&&typeof t=="object"}var yB=vB,bB=mB,_B=yB,wB="[object Symbol]";function xB(t){return typeof t=="symbol"||_B(t)&&bB(t)==wB}var LB=xB,CB=eB,s4=vS,SB=LB,o4=NaN,EB=/^[-+]0x[0-9a-f]+$/i,PB=/^0b[01]+$/i,kB=/^0o[0-7]+$/i,MB=parseInt;function AB(t){if(typeof t=="number")return t;if(SB(t))return o4;if(s4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=s4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=CB(t);var n=PB.test(t);return n||kB.test(t)?MB(t.slice(2),n?2:8):EB.test(t)?o4:+t}var TB=AB,OB=vS,h1=qN,a4=TB,DB="Expected a function",IB=Math.max,NB=Math.min;function BB(t,e,n){var r,i,s,o,a,l,c=0,f=!1,p=!1,y=!0;if(typeof t!="function")throw new TypeError(DB);e=a4(e)||0,OB(n)&&(f=!!n.leading,p="maxWait"in n,s=p?IB(a4(n.maxWait)||0,e):s,y="trailing"in n?!!n.trailing:y);function m(ee){var te=r,V=i;return r=i=void 0,c=ee,o=t.apply(V,te),o}function C(ee){return c=ee,a=setTimeout(O,e),f?m(ee):o}function S(ee){var te=ee-l,V=ee-c,Y=e-te;return p?NB(Y,s-V):Y}function T(ee){var te=ee-l,V=ee-c;return l===void 0||te>=e||te<0||p&&V>=s}function O(){var ee=h1();if(T(ee))return D(ee);a=setTimeout(O,S(ee))}function D(ee){return a=void 0,y&&r?m(ee):(r=i=void 0,o)}function N(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function U(){return a===void 0?o:D(h1())}function W(){var ee=h1(),te=T(ee);if(r=arguments,i=this,l=ee,te){if(a===void 0)return C(l);if(p)return clearTimeout(a),a=setTimeout(O,e),m(l)}return a===void 0&&(a=setTimeout(O,e)),o}return W.cancel=N,W.flush=U,W}var RB=BB;const FB=qb(RB),jB={class:"relative w-full"},zB={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},UB=["onClick"],l4=ws({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=kt(""),r=kt([]),i=e,s=FB(async l=>{if(l.length<3){r.value=[];return}try{const f=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=f}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Ne(),je("div",jB,[Fn(P("input",{"onUpdate:modelValue":c[0]||(c[0]=f=>n.value=f),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[fi,n.value]]),r.value.length>0?(Ne(),je("div",zB,[(Ne(!0),je(bn,null,ar(r.value,f=>(Ne(),je("div",{key:f.place_id,onClick:p=>a(f),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},zt(f.display_name),9,UB))),128))])):Kt("",!0)]))}}),$B={key:0,class:"pwa-update-notification"},VB=ws({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=kt(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(Ne(),je("div",$B,[P("div",{class:"pwa-update-content"},[o[0]||(o[0]=P("p",null,"Une nouvelle version est disponible",-1)),P("div",{class:"pwa-update-actions"},[P("button",{onClick:r,class:"pwa-update-button"},"Mettre à jour"),P("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):Kt("",!0)}}),$c=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},HB=$c(VB,[["__scopeId","data-v-aa687693"]]),WB="/static/frontend/img/icons/android-chrome-192x192.png",GB={class:"prompt-content"},qB={class:"prompt-body"},YB={key:0,class:"install-instructions ios"},ZB={key:1,class:"install-instructions android"},KB={key:2,class:"install-instructions desktop"},XB={key:3,class:"install-instructions desktop"},JB=ws({__name:"PWAInstallPrompt",setup(t){const e=kt(!1),n=kt(!1),r=kt(null);kt(null);const i=kt(!1),s=kt(!1),o=kt(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const m=localStorage.getItem("pwaPromptLastClosed");if(!m)return!1;const C=3*24*60*60*1e3;return Date.now()-parseInt(m)<C},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),r.value=m,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",m=>{e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},f=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};Ks(()=>{c()}),ff(()=>{f()});const p=async()=>{if(r.value)try{r.value.prompt();const m=await r.value.userChoice;r.value=null,m.outcome==="accepted"&&(e.value=!1)}catch(m){console.error("Erreur lors de l'installation:",m)}},y=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(m,C)=>e.value?(Ne(),je("div",{key:0,class:Si(["pwa-install-prompt",{fullscreen:n.value}])},[P("div",GB,[P("div",{class:"prompt-header"},[C[1]||(C[1]=P("div",{class:"app-info"},[P("img",{src:WB,alt:"TagMap Logo",class:"app-logo"}),P("div",{class:"app-details"},[P("h2",null,"Installer TagMap"),P("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),P("button",{onClick:y,class:"close-button","aria-label":"Fermer"},C[0]||(C[0]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[P("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),P("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),P("div",qB,[i.value?(Ne(),je("div",YB,C[2]||(C[2]=[lu('<h3 data-v-3779ba3f>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>1</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Appuyez sur <strong data-v-3779ba3f>Partager</strong> <span class="ios-share-icon" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-3779ba3f></path><polyline points="16 6 12 2 8 6" data-v-3779ba3f></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-3779ba3f></line></svg></span></p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>2</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Faites défiler et appuyez sur <strong data-v-3779ba3f>Sur l&#39;écran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>3</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Appuyez sur <strong data-v-3779ba3f>Ajouter</strong> en haut à droite</p></div></div>',4)]))):s.value?(Ne(),je("div",ZB,[C[3]||(C[3]=P("h3",null,"Pour installer l'application sur votre appareil :",-1)),C[4]||(C[4]=P("div",{class:"instruction-step"},[P("div",{class:"step-number"},"1"),P("div",{class:"step-content"},[P("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),P("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Ne(),je("div",KB,[C[5]||(C[5]=P("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),C[6]||(C[6]=P("div",{class:"instruction-step"},[P("div",{class:"step-number"},"1"),P("div",{class:"step-content"},[P("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),P("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Ne(),je("div",XB,C[7]||(C[7]=[lu('<h3 data-v-3779ba3f>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>1</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Cliquez sur l&#39;icône d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>2</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),P("div",{class:"prompt-footer"},[C[8]||(C[8]=lu('<div class="benefits" data-v-3779ba3f><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-3779ba3f></path></svg><span data-v-3779ba3f>Sécurisé</span></div><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><circle cx="12" cy="12" r="10" data-v-3779ba3f></circle><polyline points="12 6 12 12 16 14" data-v-3779ba3f></polyline></svg><span data-v-3779ba3f>Rapide</span></div><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-3779ba3f></path></svg><span data-v-3779ba3f>Hors ligne</span></div></div>',1)),P("button",{onClick:y,class:"remind-later"},"Me le rappeler plus tard")])])],2)):Kt("",!0)}}),QB=$c(JB,[["__scopeId","data-v-3779ba3f"]]),eR={class:"app-container"},tR={key:0,class:"app-header bg-white shadow-sm z-[2500] flex-shrink-0"},nR={class:"mx-auto px-4 sm:px-6 lg:px-8"},rR={class:"flex h-16 items-center justify-between"},iR={class:"flex items-center"},sR={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},oR={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},aR={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},lR={class:"hidden md:flex md:ml-6 space-x-8"},uR={key:0,class:"flex-1 mx-2"},cR={class:"hidden md:block"},hR={class:"md:hidden"},fR={key:1,class:"flex-1"},dR={class:"flex items-center space-x-2 md:space-x-4"},pR={class:"relative"},gR={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},mR={class:"flex items-center justify-between w-full"},vR={class:"flex items-center space-x-3"},yR={class:"max-h-72 overflow-y-auto"},bR={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},_R={class:"flex items-start"},wR={class:"flex-shrink-0 mr-3"},xR={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},LR={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},CR={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},SR={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},ER={class:"flex-1"},PR={class:"text-sm md:text-sm text-gray-800"},kR=["onClick"],MR={class:"relative"},AR={class:"hidden md:flex flex-col items-end"},TR={class:"text-sm font-medium text-gray-700"},OR={key:0,class:"text-xs text-gray-500"},DR=["src","alt"],IR={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},NR={class:"text-sm font-semibold text-gray-700"},BR={class:"text-xs text-gray-500"},RR={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},FR={class:"space-y-1 px-2 pb-3 pt-2"},jR={class:"app-main"},zR=ws({__name:"App",setup(t){const e=ry(),n=po(),r=ul(),i=kt(!1),s=kt(!1),o=kt(!1),a=kt(!1),l=kt(null),c=kt(!1),f=kt(!1),p=kt(null),y=kt("13px"),m=kt("65px"),C=kt(null),S=kt(null),T=kt(!1);function O(){f.value=window.innerWidth<768}Ks(()=>{O(),window.addEventListener("resize",O),window.addEventListener("resize",D),window.addEventListener("pwa-update-available",()=>{T.value=!0})}),ff(()=>{window.removeEventListener("resize",O),window.removeEventListener("resize",D),window.removeEventListener("pwa-update-available",()=>{})});function D(){if(!p.value)return;const z=p.value.getBoundingClientRect();y.value=`${z.top+window.scrollY+5}px`;const B=z.left+z.width/2;m.value=`${window.innerWidth-B-22}px`}const N=ir(()=>{const z=n.user;if(!z)return"";const B=`${z.first_name} ${z.last_name.toUpperCase()}`;return z.company_name?`${B} (${z.company_name})`:B}),U=ir(()=>{var B;switch((B=n.user)==null?void 0:B.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),W=ir(()=>{var z;return((z=n.user)==null?void 0:z.user_type)==="admin"}),ee=ir(()=>n.isAuthenticated),te=[{name:"Carte",to:"/"},{name:"Météo",to:"/meteo"},{name:"Notes",to:"/notes"}],V=ir(()=>{var B,X;if(!ee.value)return[];const z=[...te];return(W.value||((B=n.user)==null?void 0:B.user_type)==="entreprise"||((X=n.user)==null?void 0:X.user_type)==="salarie")&&z.push({name:"Utilisateurs",to:"/users"}),W.value&&z.push({name:"Paramètres",to:"/parametres"}),z}),Y=ir(()=>ee.value?[{name:"Mon profil",to:"/profile"}]:[]);async function de(){try{await n.logout(),e.push("/login")}catch(z){console.error("Erreur lors de la déconnexion:",z)}}function $(z){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:z.lat,lng:z.lng,zoom:16}}))}Ks(async()=>{try{if(localStorage.getItem("token")){await n.checkAuth(),await n.fetchUserProfile();const B=localStorage.getItem("lastPlanId");B&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:B}}))}}catch(z){console.error("Auth check error:",z),e.push("/login")}});const H=ir(()=>{const z="TagMap";if(!ee.value)return`${z} - Connexion`;const B=e.currentRoute.value,K={home:"Carte",meteo:"Météo",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[B.name]||"";return K?`${z} - ${K}`:z});vi(H,z=>{document.title=z},{immediate:!0});const le=ir(()=>r.notifications.length);function ae(){r.clearAll(),o.value=!1}return Rg(()=>{if(r.lastAddedId!==null){const z=r.notifications.find(B=>B.id===r.lastAddedId);z&&ll(()=>{D(),a.value=!0,l.value={id:z.id,message:z.message,type:z.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var B;((B=l.value)==null?void 0:B.id)===z.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(z,B)=>{var X;return Ne(),je("div",eR,[ee.value?(Ne(),je("header",tR,[P("nav",nR,[P("div",rR,[P("div",iR,[P("button",{onClick:B[0]||(B[0]=K=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[B[7]||(B[7]=P("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Ne(),je("svg",sR,[s.value?(Ne(),je("path",aR)):(Ne(),je("path",oR))]))]),Kr(_n(qp),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Nl(()=>B[8]||(B[8]=[P("span",{class:"md:inline hidden"},"TagMap",-1),P("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),P("div",lR,[(Ne(!0),je(bn,null,ar(V.value,K=>(Ne(),Lo(_n(qp),{key:K.name,to:K.to,class:Si(["text-sm font-medium transition-colors duration-200",[z.$route.path===K.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Nl(()=>[jr(zt(K.name),1)]),_:2},1032,["to","class"]))),128))])]),z.$route.path==="/"?(Ne(),je("div",uR,[P("div",cR,[Kr(l4,{onSelectLocation:$})]),P("div",hR,[Kr(l4,{onSelectLocation:$,class:"max-w-full"})])])):(Ne(),je("div",fR)),P("div",dR,[P("div",pR,[P("button",{ref_key:"bellButtonRef",ref:p,onClick:B[1]||(B[1]=K=>o.value=!o.value),class:Si(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},B[9]||(B[9]=[P("span",{class:"sr-only"},"Voir les notifications",-1),P("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Ne(),je("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Fl(f.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[P("div",gR,[P("div",mR,[B[11]||(B[11]=P("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),P("div",vR,[le.value>0?(Ne(),je("button",{key:0,onClick:ae,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):Kt("",!0),P("button",{onClick:B[2]||(B[2]=K=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},B[10]||(B[10]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),P("div",yR,[le.value===0?(Ne(),je("div",bR," Aucune notification ")):Kt("",!0),(Ne(!0),je(bn,null,ar(_n(r).notifications,K=>(Ne(),je("div",{key:K.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[P("div",_R,[P("div",wR,[K.type==="success"?(Ne(),je("svg",xR,B[12]||(B[12]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):K.type==="error"?(Ne(),je("svg",LR,B[13]||(B[13]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):K.type==="warning"?(Ne(),je("svg",CR,B[14]||(B[14]=[P("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Ne(),je("svg",SR,B[15]||(B[15]=[P("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),P("div",ER,[P("p",PR,zt(K.message),1),P("button",{onClick:ye=>_n(r).removeNotification(K.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,kR)])])]))),128))])],4)):Kt("",!0)]),P("div",MR,[P("button",{onClick:B[3]||(B[3]=K=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[P("div",AR,[P("span",TR,zt(N.value),1),U.value?(Ne(),je("span",OR,zt(U.value),1)):Kt("",!0)]),P("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((X=_n(n).user)==null?void 0:X.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(N.value),alt:N.value},null,8,DR)]),i.value?(Ne(),je("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Fl(f.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[P("div",IR,[P("div",null,[P("div",NR,zt(N.value),1),P("div",BR,zt(U.value),1)]),P("button",{onClick:B[4]||(B[4]=K=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},B[16]||(B[16]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Ne(!0),je(bn,null,ar(Y.value,K=>(Ne(),Lo(_n(qp),{key:K.name,to:K.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:B[5]||(B[5]=ye=>i.value=!1)},{default:Nl(()=>[jr(zt(K.name),1)]),_:2},1032,["to"]))),128)),P("button",{onClick:de,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):Kt("",!0)])])]),s.value?(Ne(),je("div",RR,[P("div",FR,[(Ne(!0),je(bn,null,ar(V.value,K=>(Ne(),Lo(_n(qp),{key:K.name,to:K.to,class:Si(["block px-3 py-2 rounded-md text-base font-medium",[z.$route.path===K.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:B[6]||(B[6]=ye=>s.value=!1)},{default:Nl(()=>[jr(zt(K.name),1)]),_:2},1032,["to","class"]))),128))])])):Kt("",!0)])])):Kt("",!0),P("main",jR,[Kr(_n(gS),null,{default:Nl(({Component:K,route:ye})=>[P("div",{class:Si({"router-view-map":ye.meta.isMapRoute})},[(Ne(),Lo(LL(K)))],2)]),_:1})]),Kr(HB,{ref_key:"pwaUpdateNotification",ref:C},null,512),Kr(QB,{ref_key:"pwaInstallPrompt",ref:S},null,512)])}}}),UR="modulepreload",$R=function(t){return"/static/frontend/"+t},u4={},ph=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=$R(l),l in u4)return;u4[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":UR,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((y,m)=>{p.addEventListener("load",y),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},VR={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},HR={class:"max-w-md w-full space-y-8"},WR={class:"space-y-4"},GR={class:"mt-1"},qR={class:"mt-1"},YR={class:"mt-1"},ZR={key:0,class:"rounded-md bg-red-50 p-4"},KR={class:"flex"},XR={class:"ml-3"},JR={class:"text-sm font-medium text-red-800"},QR={key:1,class:"rounded-md bg-yellow-50 p-4"},eF={class:"flex"},tF={class:"ml-3"},nF={class:"mt-2 text-sm text-yellow-700"},rF={class:"list-disc pl-5 space-y-1"},iF=["disabled"],sF={class:"absolute left-0 inset-y-0 flex items-center pl-3"},oF={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},aF={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},lF=ws({__name:"ChangePasswordForm",setup(t){const e=ry(),n=po(),r=cu({oldPassword:"",newPassword:"",confirmPassword:""}),i=kt(!1),s=kt(""),o=ir(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=ir(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,f,p,y,m,C,S,T;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{await n.changePassword(r.oldPassword,r.newPassword),e.push("/")}catch(O){console.error("Password change failed:",O),(p=(f=O.response)==null?void 0:f.data)!=null&&p.detail?s.value=O.response.data.detail:(m=(y=O.response)==null?void 0:y.data)!=null&&m.old_password?s.value=O.response.data.old_password[0]:(S=(C=O.response)==null?void 0:C.data)!=null&&S.password?s.value=O.response.data.password[0]:((T=O.response)==null?void 0:T.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,f)=>(Ne(),je("div",VR,[P("div",HR,[f[12]||(f[12]=P("div",null,[P("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),P("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),P("form",{class:"mt-8 space-y-6",onSubmit:Rl(l,["prevent"])},[P("div",WR,[P("div",null,[f[3]||(f[3]=P("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),P("div",GR,[Fn(P("input",{id:"old-password","onUpdate:modelValue":f[0]||(f[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[fi,r.oldPassword]])])]),P("div",null,[f[4]||(f[4]=P("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),P("div",qR,[Fn(P("input",{id:"new-password","onUpdate:modelValue":f[1]||(f[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[fi,r.newPassword]])]),f[5]||(f[5]=P("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),P("div",null,[f[6]||(f[6]=P("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),P("div",YR,[Fn(P("input",{id:"confirm-password","onUpdate:modelValue":f[2]||(f[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[fi,r.confirmPassword]])])])]),s.value?(Ne(),je("div",ZR,[P("div",KR,[f[7]||(f[7]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",XR,[P("h3",JR,zt(s.value),1)])])])):Kt("",!0),o.value.length>0?(Ne(),je("div",QR,[P("div",eF,[f[9]||(f[9]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),P("div",tF,[f[8]||(f[8]=P("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),P("div",nF,[P("ul",rF,[(Ne(!0),je(bn,null,ar(o.value,(p,y)=>(Ne(),je("li",{key:y},zt(p),1))),128))])])])])])):Kt("",!0),P("div",null,[P("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[P("span",sF,[i.value?(Ne(),je("svg",aF,f[11]||(f[11]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ne(),je("svg",oF,f[10]||(f[10]=[P("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),jr(" "+zt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,iF)])],32)])]))}}),uF="/static/frontend/assets/background.svg",cF={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},hF={class:"container mx-auto relative z-10"},fF={class:"sm:mx-auto sm:w-full sm:max-w-md"},dF={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},pF={key:0,class:"rounded-md bg-red-50 p-4"},gF={class:"flex"},mF={class:"ml-3"},vF={class:"text-sm font-medium text-red-800"},yF={class:"mt-1"},bF={class:"mt-1 relative"},_F=["type"],wF={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},xF={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},LF={class:"flex items-center justify-between"},CF={class:"flex items-center"},SF={class:"text-sm"},EF=["disabled"],PF={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},kF={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},MF={class:"mt-12"},AF={class:"flex flex-wrap justify-center gap-2 mb-8"},TF=["onClick"],OF={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},DF={class:"flex items-center mb-4"},IF={class:"text-2xl mr-2"},NF={class:"text-xl font-semibold text-gray-900"},BF={class:"text-gray-600 text-sm"},RF={key:0,class:"flex justify-center mt-8 gap-2"},FF=["onClick"],f1=6,jF=ws({__name:"LoginView",setup(t){const e=ry(),n=po(),r=kt(!1),i=kt(null),s=kt(!1),o=kt("Tous"),a=kt(1),l=cu({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"🌾",text:"En tant qu'entreprise, j'ai mis en place un sous-compte « agriculteur » permettant la géolocalisation des parcelles. Cela offre à nos salariés et prestataires une visibilité complète sur l'ensemble des parcelles et facilite leur accès. De plus, ils peuvent y ajouter des notes et des photos si nécessaire. Grâce aux trackers, nous renforçons également la sécurité de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"🏭",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrôler l'accès de nos salariés aux différentes tâches."},{type:"Agence de voyage",sector:"Tourisme",icon:"✈️",text:"L'outil nous permet de créer gratuitement et sans limite des sous-comptes clients, d'établir des itinéraires personnalisés avec des points d'intérêt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"🌱",text:"Nous disposons d'un compte entreprise avec des sous-comptes dédiés à chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grâce aux stations météo connectées, nous optimisons la gestion des tours d'irrigation par secteur géographique en fonction des précipitations."},{type:"Conseil municipal",sector:"Collectivité",icon:"🏛️",text:"Cette solution nous permet de gagner en efficacité dans la gestion des tâches à réaliser, en les géolocalisant et en offrant à nos employés communaux la possibilité d'ajouter des commentaires et des photos sur chaque tâche géoréférencée."},{type:"Location de matériel",sector:"Services",icon:"🚜",text:"Cette solution nous permet de géolocaliser notre flotte grâce à des trackers sans abonnement, avec uniquement un abonnement à la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"👨‍🌾",text:"J'ai équipé tous mes canons d'enrouleurs de trackers et de caméras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"🌱",text:"Nous assurons la géolocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"💧",text:"Nous avons géolocalisé tous les forages de nos clients et ajouté en commentaire la procédure d'entrée, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"🌳",text:"Nous géolocalisons tous nos chantiers et ajoutons une photo du chantier terminé en commentaire, servant de preuve en cas de litige."}],f=ir(()=>["Tous",...new Set(c.map(S=>S.sector))]),p=ir(()=>{let C=o.value==="Tous"?c:c.filter(O=>O.sector===o.value);const S=(a.value-1)*f1,T=S+f1;return C.slice(S,T)}),y=ir(()=>{const C=o.value==="Tous"?c:c.filter(S=>S.sector===o.value);return Math.ceil(C.length/f1)});Ks(async()=>{var C;try{if((C=window.INITIAL_STATE)!=null&&C.isAuthenticated){e.push("/");return}await n.restoreSession()&&e.push("/")}catch(S){console.error("Error during initialization:",S),i.value=null}});async function m(){var C,S,T,O,D,N,U,W,ee;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(C=n.user)!=null&&C.must_change_password?e.push("/change-password"):e.push("/")}catch(te){console.error("Login error:",te),((S=te==null?void 0:te.response)==null?void 0:S.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((T=te==null?void 0:te.response)==null?void 0:T.status)===401||((O=te==null?void 0:te.response)==null?void 0:O.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(N=(D=te==null?void 0:te.response)==null?void 0:D.data)!=null&&N.detail?i.value=te.response.data.detail:(ee=(W=(U=te==null?void 0:te.response)==null?void 0:U.data)==null?void 0:W.non_field_errors)!=null&&ee[0]?i.value=te.response.data.non_field_errors[0]:(te==null?void 0:te.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(C,S)=>{const T=Ob("router-link");return Ne(),je("div",cF,[P("div",{class:"fixed inset-0 z-0",style:Fl({backgroundImage:`url(${_n(uF)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),S[16]||(S[16]=P("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),P("div",hF,[P("div",fF,[P("div",dF,[S[12]||(S[12]=P("div",{class:"text-center mb-8"},[P("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),P("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),P("form",{class:"space-y-6",onSubmit:Rl(m,["prevent"])},[i.value?(Ne(),je("div",pF,[P("div",gF,[S[4]||(S[4]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",mF,[P("h3",vF,zt(i.value),1)])])])):Kt("",!0),P("div",null,[S[5]||(S[5]=P("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),P("div",yF,[Fn(P("input",{id:"username","onUpdate:modelValue":S[0]||(S[0]=O=>l.username=O),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[fi,l.username]])])]),P("div",null,[S[8]||(S[8]=P("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),P("div",bF,[Fn(P("input",{id:"password","onUpdate:modelValue":S[1]||(S[1]=O=>l.password=O),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,_F),[[Ub,l.password]]),P("button",{type:"button",onClick:S[2]||(S[2]=O=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Ne(),je("svg",wF,S[6]||(S[6]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Ne(),je("svg",xF,S[7]||(S[7]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),P("div",LF,[P("div",CF,[Fn(P("input",{id:"remember-me","onUpdate:modelValue":S[3]||(S[3]=O=>l.rememberMe=O),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Tl,l.rememberMe]]),S[9]||(S[9]=P("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),P("div",SF,[Kr(T,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Nl(()=>S[10]||(S[10]=[jr(" Mot de passe oublié ? ")])),_:1})])]),P("div",null,[P("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Ne(),je("svg",PF,S[11]||(S[11]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Kt("",!0),jr(" "+zt(r.value?"Connexion en cours...":"Se connecter"),1)],8,EF)])],32)])]),P("div",kF,[S[14]||(S[14]=lu('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-6" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253>💡</span><h3 class="text-xl font-bold text-gray-900" data-v-cb538253>Équipements Connectés sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-cb538253><div class="flex items-center space-x-4" data-v-cb538253><div class="flex-shrink-0 text-2xl" data-v-cb538253>📍</div><div data-v-cb538253><h4 class="font-semibold" data-v-cb538253>Tracker GPS solaire</h4><p class="text-gray-600" data-v-cb538253>Géolocalisez et sécurisez votre matériel</p></div></div><div class="flex items-center space-x-4" data-v-cb538253><div class="flex-shrink-0 text-2xl" data-v-cb538253>🌤️</div><div data-v-cb538253><h4 class="font-semibold" data-v-cb538253>Station météo</h4><p class="text-gray-600" data-v-cb538253>Optimisez vos décisions avec des données en temps réel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-cb538253><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253>👀📌</span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Carte Interactive</h3></div><p class="text-gray-600" data-v-cb538253>Imaginez... Une carte interactive où tout est sous contrôle ! Tout est centralisé, organisé et accessible en un clin d&#39;œil !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253>👥💻🔄</span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Collaboration en Temps Réel</h3></div><p class="text-gray-600" data-v-cb538253>Travail d&#39;équipe simplifié : Collaborez en temps réel sur une interface ultra-intuitive. Vos équipes restent synchronisées et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253>🚜📸</span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-cb538253>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253>🔐🔑</span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Accès Sécurisé</h3></div><p class="text-gray-600" data-v-cb538253>Accès sécurisé et intelligent : Gérez les droits d&#39;accès de vos salariés et prestataires en un clic.</p></div></div>',2)),P("div",MF,[S[13]||(S[13]=P("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),P("div",AF,[(Ne(!0),je(bn,null,ar(f.value,O=>(Ne(),je("button",{key:O,onClick:D=>o.value=O,class:Si(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===O?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},zt(O),11,TF))),128))]),P("div",OF,[(Ne(!0),je(bn,null,ar(p.value,O=>(Ne(),je("div",{key:O.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[P("div",DF,[P("span",IF,zt(O.icon),1),P("span",NF,zt(O.type),1)]),P("p",BF,zt(O.text),1)]))),128))]),y.value>1?(Ne(),je("div",RF,[(Ne(!0),je(bn,null,ar(y.value,O=>(Ne(),je("button",{key:O,onClick:D=>a.value=O,class:Si(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===O?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},zt(O),11,FF))),128))])):Kt("",!0)])]),S[15]||(S[15]=P("div",{class:"h-16"},null,-1))])])}}}),zF=$c(jF,[["__scopeId","data-v-cb538253"]]),UF="/static/frontend/assets/logo.svg";var P2={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Zo,function(n){var r="1.9.4";function i(u){var v,E,F,ne;for(E=1,F=arguments.length;E<F;E++){ne=arguments[E];for(v in ne)u[v]=ne[v]}return u}var s=Object.create||function(){function u(){}return function(v){return u.prototype=v,new u}}();function o(u,v){var E=Array.prototype.slice;if(u.bind)return u.bind.apply(u,E.call(arguments,1));var F=E.call(arguments,2);return function(){return u.apply(v,F.length?F.concat(E.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,v,E){var F,ne,xe,et;return et=function(){F=!1,ne&&(xe.apply(E,ne),ne=!1)},xe=function(){F?ne=arguments:(u.apply(E,arguments),setTimeout(et,v),F=!0)},xe}function f(u,v,E){var F=v[1],ne=v[0],xe=F-ne;return u===F&&E?u:((u-ne)%xe+xe)%xe+ne}function p(){return!1}function y(u,v){if(v===!1)return u;var E=Math.pow(10,v===void 0?6:v);return Math.round(u*E)/E}function m(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function C(u){return m(u).split(/\s+/)}function S(u,v){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var E in v)u.options[E]=v[E];return u.options}function T(u,v,E){var F=[];for(var ne in u)F.push(encodeURIComponent(E?ne.toUpperCase():ne)+"="+encodeURIComponent(u[ne]));return(!v||v.indexOf("?")===-1?"?":"&")+F.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function D(u,v){return u.replace(O,function(E,F){var ne=v[F];if(ne===void 0)throw new Error("No value provided for variable "+E);return typeof ne=="function"&&(ne=ne(v)),ne})}var N=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function U(u,v){for(var E=0;E<u.length;E++)if(u[E]===v)return E;return-1}var W="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ee(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var te=0;function V(u){var v=+new Date,E=Math.max(0,16-(v-te));return te=v+E,window.setTimeout(u,E)}var Y=window.requestAnimationFrame||ee("RequestAnimationFrame")||V,de=window.cancelAnimationFrame||ee("CancelAnimationFrame")||ee("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function $(u,v,E){if(E&&Y===V)u.call(v);else return Y.call(window,o(u,v))}function H(u){u&&de.call(window,u)}var le={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:f,falseFn:p,formatNum:y,trim:m,splitWords:C,setOptions:S,getParamString:T,template:D,isArray:N,indexOf:U,emptyImageUrl:W,requestFn:Y,cancelFn:de,requestAnimFrame:$,cancelAnimFrame:H};function ae(){}ae.extend=function(u){var v=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},E=v.__super__=this.prototype,F=s(E);F.constructor=v,v.prototype=F;for(var ne in this)Object.prototype.hasOwnProperty.call(this,ne)&&ne!=="prototype"&&ne!=="__super__"&&(v[ne]=this[ne]);return u.statics&&i(v,u.statics),u.includes&&(z(u.includes),i.apply(null,[F].concat(u.includes))),i(F,u),delete F.statics,delete F.includes,F.options&&(F.options=E.options?s(E.options):{},i(F.options,u.options)),F._initHooks=[],F.callInitHooks=function(){if(!this._initHooksCalled){E.callInitHooks&&E.callInitHooks.call(this),this._initHooksCalled=!0;for(var xe=0,et=F._initHooks.length;xe<et;xe++)F._initHooks[xe].call(this)}},v},ae.include=function(u){var v=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=v,this.mergeOptions(u.options)),this},ae.mergeOptions=function(u){return i(this.prototype.options,u),this},ae.addInitHook=function(u){var v=Array.prototype.slice.call(arguments,1),E=typeof u=="function"?u:function(){this[u].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(E),this};function z(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=N(u)?u:[u];for(var v=0;v<u.length;v++)u[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var B={on:function(u,v,E){if(typeof u=="object")for(var F in u)this._on(F,u[F],v);else{u=C(u);for(var ne=0,xe=u.length;ne<xe;ne++)this._on(u[ne],v,E)}return this},off:function(u,v,E){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var F in u)this._off(F,u[F],v);else{u=C(u);for(var ne=arguments.length===1,xe=0,et=u.length;xe<et;xe++)ne?this._off(u[xe]):this._off(u[xe],v,E)}return this},_on:function(u,v,E,F){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(u,v,E)===!1){E===this&&(E=void 0);var ne={fn:v,ctx:E};F&&(ne.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(ne)}},_off:function(u,v,E){var F,ne,xe;if(this._events&&(F=this._events[u],!!F)){if(arguments.length===1){if(this._firingCount)for(ne=0,xe=F.length;ne<xe;ne++)F[ne].fn=p;delete this._events[u];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var et=this._listens(u,v,E);if(et!==!1){var Pt=F[et];this._firingCount&&(Pt.fn=p,this._events[u]=F=F.slice()),F.splice(et,1)}}},fire:function(u,v,E){if(!this.listens(u,E))return this;var F=i({},v,{type:u,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var ne=this._events[u];if(ne){this._firingCount=this._firingCount+1||1;for(var xe=0,et=ne.length;xe<et;xe++){var Pt=ne[xe],Rt=Pt.fn;Pt.once&&this.off(u,Rt,Pt.ctx),Rt.call(Pt.ctx||this,F)}this._firingCount--}}return E&&this._propagateEvent(F),this},listens:function(u,v,E,F){typeof u!="string"&&console.warn('"string" type argument expected');var ne=v;typeof v!="function"&&(F=!!v,ne=void 0,E=void 0);var xe=this._events&&this._events[u];if(xe&&xe.length&&this._listens(u,ne,E)!==!1)return!0;if(F){for(var et in this._eventParents)if(this._eventParents[et].listens(u,v,E,F))return!0}return!1},_listens:function(u,v,E){if(!this._events)return!1;var F=this._events[u]||[];if(!v)return!!F.length;E===this&&(E=void 0);for(var ne=0,xe=F.length;ne<xe;ne++)if(F[ne].fn===v&&F[ne].ctx===E)return ne;return!1},once:function(u,v,E){if(typeof u=="object")for(var F in u)this._on(F,u[F],v,!0);else{u=C(u);for(var ne=0,xe=u.length;ne<xe;ne++)this._on(u[ne],v,E,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var v in this._eventParents)this._eventParents[v].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};B.addEventListener=B.on,B.removeEventListener=B.clearAllEventListeners=B.off,B.addOneTimeEventListener=B.once,B.fireEvent=B.fire,B.hasEventListeners=B.listens;var X=ae.extend(B);function K(u,v,E){this.x=E?Math.round(u):u,this.y=E?Math.round(v):v}var ye=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(u){return this.clone()._add(Te(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(Te(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new K(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new K(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ye(this.x),this.y=ye(this.y),this},distanceTo:function(u){u=Te(u);var v=u.x-this.x,E=u.y-this.y;return Math.sqrt(v*v+E*E)},equals:function(u){return u=Te(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=Te(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function Te(u,v,E){return u instanceof K?u:N(u)?new K(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new K(u.x,u.y):new K(u,v,E)}function Ue(u,v){if(u)for(var E=v?[u,v]:u,F=0,ne=E.length;F<ne;F++)this.extend(E[F])}Ue.prototype={extend:function(u){var v,E;if(!u)return this;if(u instanceof K||typeof u[0]=="number"||"x"in u)v=E=Te(u);else if(u=J(u),v=u.min,E=u.max,!v||!E)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=E.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(E.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(E.y,this.max.y)),this},getCenter:function(u){return Te((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return Te(this.min.x,this.max.y)},getTopRight:function(){return Te(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var v,E;return typeof u[0]=="number"||u instanceof K?u=Te(u):u=J(u),u instanceof Ue?(v=u.min,E=u.max):v=E=u,v.x>=this.min.x&&E.x<=this.max.x&&v.y>=this.min.y&&E.y<=this.max.y},intersects:function(u){u=J(u);var v=this.min,E=this.max,F=u.min,ne=u.max,xe=ne.x>=v.x&&F.x<=E.x,et=ne.y>=v.y&&F.y<=E.y;return xe&&et},overlaps:function(u){u=J(u);var v=this.min,E=this.max,F=u.min,ne=u.max,xe=ne.x>v.x&&F.x<E.x,et=ne.y>v.y&&F.y<E.y;return xe&&et},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var v=this.min,E=this.max,F=Math.abs(v.x-E.x)*u,ne=Math.abs(v.y-E.y)*u;return J(Te(v.x-F,v.y-ne),Te(E.x+F,E.y+ne))},equals:function(u){return u?(u=J(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function J(u,v){return!u||u instanceof Ue?u:new Ue(u,v)}function ie(u,v){if(u)for(var E=v?[u,v]:u,F=0,ne=E.length;F<ne;F++)this.extend(E[F])}ie.prototype={extend:function(u){var v=this._southWest,E=this._northEast,F,ne;if(u instanceof pe)F=u,ne=u;else if(u instanceof ie){if(F=u._southWest,ne=u._northEast,!F||!ne)return this}else return u?this.extend(we(u)||se(u)):this;return!v&&!E?(this._southWest=new pe(F.lat,F.lng),this._northEast=new pe(ne.lat,ne.lng)):(v.lat=Math.min(F.lat,v.lat),v.lng=Math.min(F.lng,v.lng),E.lat=Math.max(ne.lat,E.lat),E.lng=Math.max(ne.lng,E.lng)),this},pad:function(u){var v=this._southWest,E=this._northEast,F=Math.abs(v.lat-E.lat)*u,ne=Math.abs(v.lng-E.lng)*u;return new ie(new pe(v.lat-F,v.lng-ne),new pe(E.lat+F,E.lng+ne))},getCenter:function(){return new pe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new pe(this.getNorth(),this.getWest())},getSouthEast:function(){return new pe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof pe||"lat"in u?u=we(u):u=se(u);var v=this._southWest,E=this._northEast,F,ne;return u instanceof ie?(F=u.getSouthWest(),ne=u.getNorthEast()):F=ne=u,F.lat>=v.lat&&ne.lat<=E.lat&&F.lng>=v.lng&&ne.lng<=E.lng},intersects:function(u){u=se(u);var v=this._southWest,E=this._northEast,F=u.getSouthWest(),ne=u.getNorthEast(),xe=ne.lat>=v.lat&&F.lat<=E.lat,et=ne.lng>=v.lng&&F.lng<=E.lng;return xe&&et},overlaps:function(u){u=se(u);var v=this._southWest,E=this._northEast,F=u.getSouthWest(),ne=u.getNorthEast(),xe=ne.lat>v.lat&&F.lat<E.lat,et=ne.lng>v.lng&&F.lng<E.lng;return xe&&et},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,v){return u?(u=se(u),this._southWest.equals(u.getSouthWest(),v)&&this._northEast.equals(u.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(u,v){return u instanceof ie?u:new ie(u,v)}function pe(u,v,E){if(isNaN(u)||isNaN(v))throw new Error("Invalid LatLng object: ("+u+", "+v+")");this.lat=+u,this.lng=+v,E!==void 0&&(this.alt=+E)}pe.prototype={equals:function(u,v){if(!u)return!1;u=we(u);var E=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return E<=(v===void 0?1e-9:v)},toString:function(u){return"LatLng("+y(this.lat,u)+", "+y(this.lng,u)+")"},distanceTo:function(u){return Ae.distance(this,we(u))},wrap:function(){return Ae.wrapLatLng(this)},toBounds:function(u){var v=180*u/40075017,E=v/Math.cos(Math.PI/180*this.lat);return se([this.lat-v,this.lng-E],[this.lat+v,this.lng+E])},clone:function(){return new pe(this.lat,this.lng,this.alt)}};function we(u,v,E){return u instanceof pe?u:N(u)&&typeof u[0]!="object"?u.length===3?new pe(u[0],u[1],u[2]):u.length===2?new pe(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new pe(u.lat,"lng"in u?u.lng:u.lon,u.alt):v===void 0?null:new pe(u,v,E)}var be={latLngToPoint:function(u,v){var E=this.projection.project(u),F=this.scale(v);return this.transformation._transform(E,F)},pointToLatLng:function(u,v){var E=this.scale(v),F=this.transformation.untransform(u,E);return this.projection.unproject(F)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var v=this.projection.bounds,E=this.scale(u),F=this.transformation.transform(v.min,E),ne=this.transformation.transform(v.max,E);return new Ue(F,ne)},infinite:!1,wrapLatLng:function(u){var v=this.wrapLng?f(u.lng,this.wrapLng,!0):u.lng,E=this.wrapLat?f(u.lat,this.wrapLat,!0):u.lat,F=u.alt;return new pe(E,v,F)},wrapLatLngBounds:function(u){var v=u.getCenter(),E=this.wrapLatLng(v),F=v.lat-E.lat,ne=v.lng-E.lng;if(F===0&&ne===0)return u;var xe=u.getSouthWest(),et=u.getNorthEast(),Pt=new pe(xe.lat-F,xe.lng-ne),Rt=new pe(et.lat-F,et.lng-ne);return new ie(Pt,Rt)}},Ae=i({},be,{wrapLng:[-180,180],R:6371e3,distance:function(u,v){var E=Math.PI/180,F=u.lat*E,ne=v.lat*E,xe=Math.sin((v.lat-u.lat)*E/2),et=Math.sin((v.lng-u.lng)*E/2),Pt=xe*xe+Math.cos(F)*Math.cos(ne)*et*et,Rt=2*Math.atan2(Math.sqrt(Pt),Math.sqrt(1-Pt));return this.R*Rt}}),Ee=6378137,Je={R:Ee,MAX_LATITUDE:85.0511287798,project:function(u){var v=Math.PI/180,E=this.MAX_LATITUDE,F=Math.max(Math.min(E,u.lat),-E),ne=Math.sin(F*v);return new K(this.R*u.lng*v,this.R*Math.log((1+ne)/(1-ne))/2)},unproject:function(u){var v=180/Math.PI;return new pe((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*v,u.x*v/this.R)},bounds:function(){var u=Ee*Math.PI;return new Ue([-u,-u],[u,u])}()};function gt(u,v,E,F){if(N(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=v,this._c=E,this._d=F}gt.prototype={transform:function(u,v){return this._transform(u.clone(),v)},_transform:function(u,v){return v=v||1,u.x=v*(this._a*u.x+this._b),u.y=v*(this._c*u.y+this._d),u},untransform:function(u,v){return v=v||1,new K((u.x/v-this._b)/this._a,(u.y/v-this._d)/this._c)}};function _t(u,v,E,F){return new gt(u,v,E,F)}var ue=i({},Ae,{code:"EPSG:3857",projection:Je,transformation:function(){var u=.5/(Math.PI*Je.R);return _t(u,.5,-u,.5)}()}),oe=i({},ue,{code:"EPSG:900913"});function ce(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function Q(u,v){var E="",F,ne,xe,et,Pt,Rt;for(F=0,xe=u.length;F<xe;F++){for(Pt=u[F],ne=0,et=Pt.length;ne<et;ne++)Rt=Pt[ne],E+=(ne?"L":"M")+Rt.x+" "+Rt.y;E+=v?Gt.svg?"z":"x":""}return E||"M0 0"}var Pe=document.documentElement.style,Ve="ActiveXObject"in window,Qe=Ve&&!document.addEventListener,ot="msLaunchUri"in navigator&&!("documentMode"in document),at=Dn("webkit"),pt=Dn("android"),Ft=Dn("android 2")||Dn("android 3"),Bt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Zt=pt&&Dn("Google")&&Bt<537&&!("AudioNode"in window),ln=!!window.opera,un=!ot&&Dn("chrome"),Sn=Dn("gecko")&&!at&&!ln&&!Ve,qe=!un&&Dn("safari"),it=Dn("phantom"),Ze="OTransition"in Pe,Ut=navigator.platform.indexOf("Win")===0,Yt=Ve&&"transition"in Pe,Ln="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ft,gn="MozPerspective"in Pe,vn=!window.L_DISABLE_3D&&(Yt||Ln||gn)&&!Ze&&!it,jn=typeof orientation<"u"||Dn("mobile"),mn=jn&&at,Jt=jn&&Ln,cn=!window.PointerEvent&&window.MSPointerEvent,qn=!!(window.PointerEvent||cn),Kn="ontouchstart"in window||!!window.TouchEvent,rr=!window.L_NO_TOUCH&&(Kn||qn),zn=jn&&ln,_r=jn&&Sn,Ri=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pi=function(){var u=!1;try{var v=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,v),window.removeEventListener("testPassiveEventSupport",p,v)}catch{}return u}(),Rs=function(){return!!document.createElement("canvas").getContext}(),ls=!!(document.createElementNS&&ce("svg").createSVGRect),mt=!!ls&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ke=!ls&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var v=u.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}}(),$t=navigator.platform.indexOf("Mac")===0,On=navigator.platform.indexOf("Linux")===0;function Dn(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var Gt={ie:Ve,ielt9:Qe,edge:ot,webkit:at,android:pt,android23:Ft,androidStock:Zt,opera:ln,chrome:un,gecko:Sn,safari:qe,phantom:it,opera12:Ze,win:Ut,ie3d:Yt,webkit3d:Ln,gecko3d:gn,any3d:vn,mobile:jn,mobileWebkit:mn,mobileWebkit3d:Jt,msPointer:cn,pointer:qn,touch:rr,touchNative:Kn,mobileOpera:zn,mobileGecko:_r,retina:Ri,passiveEvents:Pi,canvas:Rs,svg:ls,vml:Ke,inlineSvg:mt,mac:$t,linux:On},on=Gt.msPointer?"MSPointerDown":"pointerdown",dt=Gt.msPointer?"MSPointerMove":"pointermove",fn=Gt.msPointer?"MSPointerUp":"pointerup",wn=Gt.msPointer?"MSPointerCancel":"pointercancel",Tn={touchstart:on,touchmove:dt,touchend:fn,touchcancel:wn},er={touchstart:Do,touchmove:us,touchend:us,touchcancel:us},tr={},Ur=!1;function Xn(u,v,E){return v==="touchstart"&&lr(),er[v]?(E=er[v].bind(this,E),u.addEventListener(Tn[v],E,!1),E):(console.warn("wrong event specified:",v),p)}function Ai(u,v,E){if(!Tn[v]){console.warn("wrong event specified:",v);return}u.removeEventListener(Tn[v],E,!1)}function Wr(u){tr[u.pointerId]=u}function Xo(u){tr[u.pointerId]&&(tr[u.pointerId]=u)}function or(u){delete tr[u.pointerId]}function lr(){Ur||(document.addEventListener(on,Wr,!0),document.addEventListener(dt,Xo,!0),document.addEventListener(fn,or,!0),document.addEventListener(wn,or,!0),Ur=!0)}function us(u,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var E in tr)v.touches.push(tr[E]);v.changedTouches=[v],u(v)}}function Do(u,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&dr(v),us(u,v)}function Hc(u){var v={},E,F;for(F in u)E=u[F],v[F]=E&&E.bind?E.bind(u):E;return u=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var hu=200;function hc(u,v){u.addEventListener("dblclick",v);var E=0,F;function ne(xe){if(xe.detail!==1){F=xe.detail;return}if(!(xe.pointerType==="mouse"||xe.sourceCapabilities&&!xe.sourceCapabilities.firesTouchEvents)){var et=Ya(xe);if(!(et.some(function(Rt){return Rt instanceof HTMLLabelElement&&Rt.attributes.for})&&!et.some(function(Rt){return Rt instanceof HTMLInputElement||Rt instanceof HTMLSelectElement}))){var Pt=Date.now();Pt-E<=hu?(F++,F===2&&v(Hc(xe))):F=1,E=Pt}}}return u.addEventListener("click",ne),{dblclick:v,simDblclick:ne}}function fc(u,v){u.removeEventListener("dblclick",v.dblclick),u.removeEventListener("click",v.simDblclick)}var cl=fl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),hl=fl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Du=hl==="webkitTransition"||hl==="OTransition"?hl+"End":"transitionend";function dc(u){return typeof u=="string"?document.getElementById(u):u}function So(u,v){var E=u.style[v]||u.currentStyle&&u.currentStyle[v];if((!E||E==="auto")&&document.defaultView){var F=document.defaultView.getComputedStyle(u,null);E=F?F[v]:null}return E==="auto"?null:E}function Gr(u,v,E){var F=document.createElement(u);return F.className=v||"",E&&E.appendChild(F),F}function fr(u){var v=u.parentNode;v&&v.removeChild(u)}function $a(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function da(u){var v=u.parentNode;v&&v.lastChild!==u&&v.appendChild(u)}function Io(u){var v=u.parentNode;v&&v.firstChild!==u&&v.insertBefore(u,v.firstChild)}function Ul(u,v){if(u.classList!==void 0)return u.classList.contains(v);var E=xs(u);return E.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(E)}function gr(u,v){if(u.classList!==void 0)for(var E=C(v),F=0,ne=E.length;F<ne;F++)u.classList.add(E[F]);else if(!Ul(u,v)){var xe=xs(u);Va(u,(xe?xe+" ":"")+v)}}function qr(u,v){u.classList!==void 0?u.classList.remove(v):Va(u,m((" "+xs(u)+" ").replace(" "+v+" "," ")))}function Va(u,v){u.className.baseVal===void 0?u.className=v:u.className.baseVal=v}function xs(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function Ls(u,v){"opacity"in u.style?u.style.opacity=v:"filter"in u.style&&Iu(u,v)}function Iu(u,v){var E=!1,F="DXImageTransform.Microsoft.Alpha";try{E=u.filters.item(F)}catch{if(v===1)return}v=Math.round(v*100),E?(E.Enabled=v!==100,E.Opacity=v):u.style.filter+=" progid:"+F+"(opacity="+v+")"}function fl(u){for(var v=document.documentElement.style,E=0;E<u.length;E++)if(u[E]in v)return u[E];return!1}function pa(u,v,E){var F=v||new K(0,0);u.style[cl]=(Gt.ie3d?"translate("+F.x+"px,"+F.y+"px)":"translate3d("+F.x+"px,"+F.y+"px,0)")+(E?" scale("+E+")":"")}function Ti(u,v){u._leaflet_pos=v,Gt.any3d?pa(u,v):(u.style.left=v.x+"px",u.style.top=v.y+"px")}function No(u){return u._leaflet_pos||new K(0,0)}var Ha,mo,fu;if("onselectstart"in document)Ha=function(){mr(window,"selectstart",dr)},mo=function(){$r(window,"selectstart",dr)};else{var Wa=fl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ha=function(){if(Wa){var u=document.documentElement.style;fu=u[Wa],u[Wa]="none"}},mo=function(){Wa&&(document.documentElement.style[Wa]=fu,fu=void 0)}}function Nu(){mr(window,"dragstart",dr)}function Bo(){$r(window,"dragstart",dr)}var ga,Ga;function $l(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(ns(),ga=u,Ga=u.style.outlineStyle,u.style.outlineStyle="none",mr(window,"keydown",ns))}function ns(){ga&&(ga.style.outlineStyle=Ga,ga=void 0,Ga=void 0,$r(window,"keydown",ns))}function pc(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function du(u){var v=u.getBoundingClientRect();return{x:v.width/u.offsetWidth||1,y:v.height/u.offsetHeight||1,boundingClientRect:v}}var cr={__proto__:null,TRANSFORM:cl,TRANSITION:hl,TRANSITION_END:Du,get:dc,getStyle:So,create:Gr,remove:fr,empty:$a,toFront:da,toBack:Io,hasClass:Ul,addClass:gr,removeClass:qr,setClass:Va,getClass:xs,setOpacity:Ls,testProp:fl,setTransform:pa,setPosition:Ti,getPosition:No,get disableTextSelection(){return Ha},get enableTextSelection(){return mo},disableImageDrag:Nu,enableImageDrag:Bo,preventOutline:$l,restoreOutline:ns,getSizedParentNode:pc,getScale:du};function mr(u,v,E,F){if(v&&typeof v=="object")for(var ne in v)pl(u,ne,v[ne],E);else{v=C(v);for(var xe=0,et=v.length;xe<et;xe++)pl(u,v[xe],E,F)}return this}var Ro="_leaflet_events";function $r(u,v,E,F){if(arguments.length===1)Bu(u),delete u[Ro];else if(v&&typeof v=="object")for(var ne in v)Fo(u,ne,v[ne],E);else if(v=C(v),arguments.length===2)Bu(u,function(Pt){return U(v,Pt)!==-1});else for(var xe=0,et=v.length;xe<et;xe++)Fo(u,v[xe],E,F);return this}function Bu(u,v){for(var E in u[Ro]){var F=E.split(/\d/)[0];(!v||v(F))&&Fo(u,F,null,null,E)}}var dl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function pl(u,v,E,F){var ne=v+l(E)+(F?"_"+l(F):"");if(u[Ro]&&u[Ro][ne])return this;var xe=function(Pt){return E.call(F||u,Pt||window.event)},et=xe;!Gt.touchNative&&Gt.pointer&&v.indexOf("touch")===0?xe=Xn(u,v,xe):Gt.touch&&v==="dblclick"?xe=hc(u,xe):"addEventListener"in u?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?u.addEventListener(dl[v]||v,xe,Gt.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(xe=function(Pt){Pt=Pt||window.event,gl(u,Pt)&&et(Pt)},u.addEventListener(dl[v],xe,!1)):u.addEventListener(v,et,!1):u.attachEvent("on"+v,xe),u[Ro]=u[Ro]||{},u[Ro][ne]=xe}function Fo(u,v,E,F,ne){ne=ne||v+l(E)+(F?"_"+l(F):"");var xe=u[Ro]&&u[Ro][ne];if(!xe)return this;!Gt.touchNative&&Gt.pointer&&v.indexOf("touch")===0?Ai(u,v,xe):Gt.touch&&v==="dblclick"?fc(u,xe):"removeEventListener"in u?u.removeEventListener(dl[v]||v,xe,!1):u.detachEvent("on"+v,xe),u[Ro][ne]=null}function qa(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function Ru(u){return pl(u,"wheel",qa),this}function Vl(u){return mr(u,"mousedown touchstart dblclick contextmenu",qa),u._leaflet_disable_click=!0,this}function dr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function kr(u){return dr(u),qa(u),this}function Ya(u){if(u.composedPath)return u.composedPath();for(var v=[],E=u.target;E;)v.push(E),E=E.parentNode;return v}function gc(u,v){if(!v)return new K(u.clientX,u.clientY);var E=du(v),F=E.boundingClientRect;return new K((u.clientX-F.left)/E.x-v.clientLeft,(u.clientY-F.top)/E.y-v.clientTop)}var Hl=Gt.linux&&Gt.chrome?window.devicePixelRatio:Gt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function pu(u){return Gt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/Hl:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function gl(u,v){var E=v.relatedTarget;if(!E)return!0;try{for(;E&&E!==u;)E=E.parentNode}catch{return!1}return E!==u}var Wl={__proto__:null,on:mr,off:$r,stopPropagation:qa,disableScrollPropagation:Ru,disableClickPropagation:Vl,preventDefault:dr,stop:kr,getPropagationPath:Ya,getMousePosition:gc,getWheelDelta:pu,isExternalTarget:gl,addListener:mr,removeListener:$r},gu=X.extend({run:function(u,v,E,F){this.stop(),this._el=u,this._inProgress=!0,this._duration=E||.25,this._easeOutPower=1/Math.max(F||.5,.2),this._startPos=No(u),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(u){var v=+new Date-this._startTime,E=this._duration*1e3;v<E?this._runFrame(this._easeOut(v/E),u):(this._runFrame(1),this._complete())},_runFrame:function(u,v){var E=this._startPos.add(this._offset.multiplyBy(u));v&&E._round(),Ti(this._el,E),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Or=X.extend({options:{crs:ue,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,v){v=S(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(we(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=hl&&Gt.any3d&&!Gt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),mr(this._proxy,Du,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,v,E){if(v=v===void 0?this._zoom:this._limitZoom(v),u=this._limitCenter(we(u),v,this.options.maxBounds),E=E||{},this._stop(),this._loaded&&!E.reset&&E!==!0){E.animate!==void 0&&(E.zoom=i({animate:E.animate},E.zoom),E.pan=i({animate:E.animate,duration:E.duration},E.pan));var F=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,v,E.zoom):this._tryAnimatedPan(u,E.pan);if(F)return clearTimeout(this._sizeTimer),this}return this._resetView(u,v,E.pan&&E.pan.noMoveStart),this},setZoom:function(u,v){return this._loaded?this.setView(this.getCenter(),u,{zoom:v}):(this._zoom=u,this)},zoomIn:function(u,v){return u=u||(Gt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,v)},zoomOut:function(u,v){return u=u||(Gt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,v)},setZoomAround:function(u,v,E){var F=this.getZoomScale(v),ne=this.getSize().divideBy(2),xe=u instanceof K?u:this.latLngToContainerPoint(u),et=xe.subtract(ne).multiplyBy(1-1/F),Pt=this.containerPointToLatLng(ne.add(et));return this.setView(Pt,v,{zoom:E})},_getBoundsCenterZoom:function(u,v){v=v||{},u=u.getBounds?u.getBounds():se(u);var E=Te(v.paddingTopLeft||v.padding||[0,0]),F=Te(v.paddingBottomRight||v.padding||[0,0]),ne=this.getBoundsZoom(u,!1,E.add(F));if(ne=typeof v.maxZoom=="number"?Math.min(v.maxZoom,ne):ne,ne===1/0)return{center:u.getCenter(),zoom:ne};var xe=F.subtract(E).divideBy(2),et=this.project(u.getSouthWest(),ne),Pt=this.project(u.getNorthEast(),ne),Rt=this.unproject(et.add(Pt).divideBy(2).add(xe),ne);return{center:Rt,zoom:ne}},fitBounds:function(u,v){if(u=se(u),!u.isValid())throw new Error("Bounds are not valid.");var E=this._getBoundsCenterZoom(u,v);return this.setView(E.center,E.zoom,v)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,v){return this.setView(u,this._zoom,{pan:v})},panBy:function(u,v){if(u=Te(u).round(),v=v||{},!u.x&&!u.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new gu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){gr(this._mapPane,"leaflet-pan-anim");var E=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,E,v.duration||.25,v.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,v,E){if(E=E||{},E.animate===!1||!Gt.any3d)return this.setView(u,v,E);this._stop();var F=this.project(this.getCenter()),ne=this.project(u),xe=this.getSize(),et=this._zoom;u=we(u),v=v===void 0?et:v;var Pt=Math.max(xe.x,xe.y),Rt=Pt*this.getZoomScale(et,v),tn=ne.distanceTo(F)||1,Mn=1.42,Vn=Mn*Mn;function Cr(Xr){var Ts=Xr?-1:1,Me=Xr?Rt:Pt,ro=Rt*Rt-Pt*Pt+Ts*Vn*Vn*tn*tn,zu=2*Me*Vn*tn,ms=ro/zu,Pr=Math.sqrt(ms*ms+1)-ms,Sh=Pr<1e-9?-18:Math.log(Pr);return Sh}function Ki(Xr){return(Math.exp(Xr)-Math.exp(-Xr))/2}function Oi(Xr){return(Math.exp(Xr)+Math.exp(-Xr))/2}function gs(Xr){return Ki(Xr)/Oi(Xr)}var Li=Cr(0);function no(Xr){return Pt*(Oi(Li)/Oi(Li+Mn*Xr))}function Gc(Xr){return Pt*(Oi(Li)*gs(Li+Mn*Xr)-Ki(Li))/Vn}function aa(Xr){return 1-Math.pow(1-Xr,1.5)}var Ho=Date.now(),ko=(Cr(1)-Li)/Mn,pf=E.duration?1e3*E.duration:1e3*ko*.8;function yu(){var Xr=(Date.now()-Ho)/pf,Ts=aa(Xr)*ko;Xr<=1?(this._flyToFrame=$(yu,this),this._move(this.unproject(F.add(ne.subtract(F).multiplyBy(Gc(Ts)/tn)),et),this.getScaleZoom(Pt/no(Ts),et),{flyTo:!0})):this._move(u,v)._moveEnd(!0)}return this._moveStart(!0,E.noMoveStart),yu.call(this),this},flyToBounds:function(u,v){var E=this._getBoundsCenterZoom(u,v);return this.flyTo(E.center,E.zoom,v)},setMaxBounds:function(u){return u=se(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var v=this.options.minZoom;return this.options.minZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var v=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,v){this._enforcingBounds=!0;var E=this.getCenter(),F=this._limitCenter(E,this._zoom,se(u));return E.equals(F)||this.panTo(F,v),this._enforcingBounds=!1,this},panInside:function(u,v){v=v||{};var E=Te(v.paddingTopLeft||v.padding||[0,0]),F=Te(v.paddingBottomRight||v.padding||[0,0]),ne=this.project(this.getCenter()),xe=this.project(u),et=this.getPixelBounds(),Pt=J([et.min.add(E),et.max.subtract(F)]),Rt=Pt.getSize();if(!Pt.contains(xe)){this._enforcingBounds=!0;var tn=xe.subtract(Pt.getCenter()),Mn=Pt.extend(xe).getSize().subtract(Rt);ne.x+=tn.x<0?-Mn.x:Mn.x,ne.y+=tn.y<0?-Mn.y:Mn.y,this.panTo(this.unproject(ne),v),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var E=this.getSize(),F=v.divideBy(2).round(),ne=E.divideBy(2).round(),xe=F.subtract(ne);return!xe.x&&!xe.y?this:(u.animate&&u.pan?this.panBy(xe):(u.pan&&this._rawPanBy(xe),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:E}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=o(this._handleGeolocationResponse,this),E=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,E,u):navigator.geolocation.getCurrentPosition(v,E,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var v=u.code,E=u.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+E+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var v=u.coords.latitude,E=u.coords.longitude,F=new pe(v,E),ne=F.toBounds(u.coords.accuracy*2),xe=this._locateOptions;if(xe.setView){var et=this.getBoundsZoom(ne);this.setView(F,xe.maxZoom?Math.min(et,xe.maxZoom):et)}var Pt={latlng:F,bounds:ne,timestamp:u.timestamp};for(var Rt in u.coords)typeof u.coords[Rt]=="number"&&(Pt[Rt]=u.coords[Rt]);this.fire("locationfound",Pt)}},addHandler:function(u,v){if(!v)return this;var E=this[u]=new v(this);return this._handlers.push(E),this.options[u]&&E.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),fr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)fr(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,v){var E="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),F=Gr("div",E,v||this._mapPane);return u&&(this._panes[u]=F),F},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),v=this.unproject(u.getBottomLeft()),E=this.unproject(u.getTopRight());return new ie(v,E)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,v,E){u=se(u),E=Te(E||[0,0]);var F=this.getZoom()||0,ne=this.getMinZoom(),xe=this.getMaxZoom(),et=u.getNorthWest(),Pt=u.getSouthEast(),Rt=this.getSize().subtract(E),tn=J(this.project(Pt,F),this.project(et,F)).getSize(),Mn=Gt.any3d?this.options.zoomSnap:1,Vn=Rt.x/tn.x,Cr=Rt.y/tn.y,Ki=v?Math.max(Vn,Cr):Math.min(Vn,Cr);return F=this.getScaleZoom(Ki,F),Mn&&(F=Math.round(F/(Mn/100))*(Mn/100),F=v?Math.ceil(F/Mn)*Mn:Math.floor(F/Mn)*Mn),Math.max(ne,Math.min(xe,F))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,v){var E=this._getTopLeftPoint(u,v);return new Ue(E,E.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,v){var E=this.options.crs;return v=v===void 0?this._zoom:v,E.scale(u)/E.scale(v)},getScaleZoom:function(u,v){var E=this.options.crs;v=v===void 0?this._zoom:v;var F=E.zoom(u*E.scale(v));return isNaN(F)?1/0:F},project:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(we(u),v)},unproject:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(Te(u),v)},layerPointToLatLng:function(u){var v=Te(u).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(u){var v=this.project(we(u))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(we(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(se(u))},distance:function(u,v){return this.options.crs.distance(we(u),we(v))},containerPointToLayerPoint:function(u){return Te(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return Te(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var v=this.containerPointToLayerPoint(Te(u));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(we(u)))},mouseEventToContainerPoint:function(u){return gc(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var v=this._container=dc(u);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");mr(v,"scroll",this._onScroll,this),this._containerId=l(v)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&Gt.any3d,gr(u,"leaflet-container"+(Gt.touch?" leaflet-touch":"")+(Gt.retina?" leaflet-retina":"")+(Gt.ielt9?" leaflet-oldie":"")+(Gt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=So(u,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ti(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(gr(u.markerPane,"leaflet-zoom-hide"),gr(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,v,E){Ti(this._mapPane,new K(0,0));var F=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var ne=this._zoom!==v;this._moveStart(ne,E)._move(u,v)._moveEnd(ne),this.fire("viewreset"),F&&this.fire("load")},_moveStart:function(u,v){return u&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(u,v,E,F){v===void 0&&(v=this._zoom);var ne=this._zoom!==v;return this._zoom=v,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),F?E&&E.pinch&&this.fire("zoom",E):((ne||E&&E.pinch)&&this.fire("zoom",E),this.fire("move",E)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){Ti(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var v=u?$r:mr;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),Gt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,v){for(var E=[],F,ne=v==="mouseout"||v==="mouseover",xe=u.target||u.srcElement,et=!1;xe;){if(F=this._targets[l(xe)],F&&(v==="click"||v==="preclick")&&this._draggableMoved(F)){et=!0;break}if(F&&F.listens(v,!0)&&(ne&&!gl(xe,u)||(E.push(F),ne))||xe===this._container)break;xe=xe.parentNode}return!E.length&&!et&&!ne&&this.listens(v,!0)&&(E=[this]),E},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var v=u.target||u.srcElement;if(!(!this._loaded||v._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(v))){var E=u.type;E==="mousedown"&&$l(v),this._fireDOMEvent(u,E)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,v,E){if(u.type==="click"){var F=i({},u);F.type="preclick",this._fireDOMEvent(F,F.type,E)}var ne=this._findEventTargets(u,v);if(E){for(var xe=[],et=0;et<E.length;et++)E[et].listens(v,!0)&&xe.push(E[et]);ne=xe.concat(ne)}if(ne.length){v==="contextmenu"&&dr(u);var Pt=ne[0],Rt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var tn=Pt.getLatLng&&(!Pt._radius||Pt._radius<=10);Rt.containerPoint=tn?this.latLngToContainerPoint(Pt.getLatLng()):this.mouseEventToContainerPoint(u),Rt.layerPoint=this.containerPointToLayerPoint(Rt.containerPoint),Rt.latlng=tn?Pt.getLatLng():this.layerPointToLatLng(Rt.layerPoint)}for(et=0;et<ne.length;et++)if(ne[et].fire(v,Rt,!0),Rt.originalEvent._stopped||ne[et].options.bubblingMouseEvents===!1&&U(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,v=this._handlers.length;u<v;u++)this._handlers[u].disable()},whenReady:function(u,v){return this._loaded?u.call(v||this,{target:this}):this.on("load",u,v),this},_getMapPanePos:function(){return No(this._mapPane)||new K(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,v){var E=u&&v!==void 0?this._getNewPixelOrigin(u,v):this.getPixelOrigin();return E.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,v){var E=this.getSize()._divideBy(2);return this.project(u,v)._subtract(E)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,v,E){var F=this._getNewPixelOrigin(E,v);return this.project(u,v)._subtract(F)},_latLngBoundsToNewLayerBounds:function(u,v,E){var F=this._getNewPixelOrigin(E,v);return J([this.project(u.getSouthWest(),v)._subtract(F),this.project(u.getNorthWest(),v)._subtract(F),this.project(u.getSouthEast(),v)._subtract(F),this.project(u.getNorthEast(),v)._subtract(F)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,v,E){if(!E)return u;var F=this.project(u,v),ne=this.getSize().divideBy(2),xe=new Ue(F.subtract(ne),F.add(ne)),et=this._getBoundsOffset(xe,E,v);return Math.abs(et.x)<=1&&Math.abs(et.y)<=1?u:this.unproject(F.add(et),v)},_limitOffset:function(u,v){if(!v)return u;var E=this.getPixelBounds(),F=new Ue(E.min.add(u),E.max.add(u));return u.add(this._getBoundsOffset(F,v))},_getBoundsOffset:function(u,v,E){var F=J(this.project(v.getNorthEast(),E),this.project(v.getSouthWest(),E)),ne=F.min.subtract(u.min),xe=F.max.subtract(u.max),et=this._rebound(ne.x,-xe.x),Pt=this._rebound(ne.y,-xe.y);return new K(et,Pt)},_rebound:function(u,v){return u+v>0?Math.round(u-v)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(v))},_limitZoom:function(u){var v=this.getMinZoom(),E=this.getMaxZoom(),F=Gt.any3d?this.options.zoomSnap:1;return F&&(u=Math.round(u/F)*F),Math.max(v,Math.min(E,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){qr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,v){var E=this._getCenterOffset(u)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(E)?!1:(this.panBy(E,v),!0)},_createAnimProxy:function(){var u=this._proxy=Gr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(v){var E=cl,F=this._proxy.style[E];pa(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),F===this._proxy.style[E]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){fr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),v=this.getZoom();pa(this._proxy,this.project(u,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,v,E){if(this._animatingZoom)return!0;if(E=E||{},!this._zoomAnimated||E.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var F=this.getZoomScale(v),ne=this._getCenterOffset(u)._divideBy(1-1/F);return E.animate!==!0&&!this.getSize().contains(ne)?!1:($(function(){this._moveStart(!0,E.noMoveStart||!1)._animateZoom(u,v,!0)},this),!0)},_animateZoom:function(u,v,E,F){this._mapPane&&(E&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=v,gr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:v,noUpdate:F}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&qr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Fi(u,v){return new Or(u,v)}var Jn=ae.extend({options:{position:"topright"},initialize:function(u){S(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var v=this._map;return v&&v.removeControl(this),this.options.position=u,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var v=this._container=this.onAdd(u),E=this.getPosition(),F=u._controlCorners[E];return gr(v,"leaflet-control"),E.indexOf("bottom")!==-1?F.insertBefore(v,F.firstChild):F.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(fr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),ji=function(u){return new Jn(u)};Or.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},v="leaflet-",E=this._controlContainer=Gr("div",v+"control-container",this._container);function F(ne,xe){var et=v+ne+" "+v+xe;u[ne+xe]=Gr("div",et,E)}F("top","left"),F("top","right"),F("bottom","left"),F("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)fr(this._controlCorners[u]);fr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ml=Jn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,v,E,F){return E<F?-1:F<E?1:0}},initialize:function(u,v,E){S(this,E),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var F in u)this._addLayer(u[F],F);for(F in v)this._addLayer(v[F],F,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return Jn.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,v){return this._addLayer(u,v),this._map?this._update():this},addOverlay:function(u,v){return this._addLayer(u,v,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var v=this._getLayer(l(u));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){gr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(gr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):qr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return qr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",v=this._container=Gr("div",u),E=this.options.collapsed;v.setAttribute("aria-haspopup",!0),Vl(v),Ru(v);var F=this._section=Gr("section",u+"-list");E&&(this._map.on("click",this.collapse,this),mr(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ne=this._layersLink=Gr("a",u+"-toggle",v);ne.href="#",ne.title="Layers",ne.setAttribute("role","button"),mr(ne,{keydown:function(xe){xe.keyCode===13&&this._expandSafely()},click:function(xe){dr(xe),this._expandSafely()}},this),E||this.expand(),this._baseLayersList=Gr("div",u+"-base",F),this._separator=Gr("div",u+"-separator",F),this._overlaysList=Gr("div",u+"-overlays",F),v.appendChild(F)},_getLayer:function(u){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&l(this._layers[v].layer)===u)return this._layers[v]},_addLayer:function(u,v,E){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:v,overlay:E}),this.options.sortLayers&&this._layers.sort(o(function(F,ne){return this.options.sortFunction(F.layer,ne.layer,F.name,ne.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;$a(this._baseLayersList),$a(this._overlaysList),this._layerControlInputs=[];var u,v,E,F,ne=0;for(E=0;E<this._layers.length;E++)F=this._layers[E],this._addItem(F),v=v||F.overlay,u=u||!F.overlay,ne+=F.overlay?0:1;return this.options.hideSingleBase&&(u=u&&ne>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=v&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var v=this._getLayer(l(u.target)),E=v.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;E&&this._map.fire(E,v)},_createRadioElement:function(u,v){var E='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(v?' checked="checked"':"")+"/>",F=document.createElement("div");return F.innerHTML=E,F.firstChild},_addItem:function(u){var v=document.createElement("label"),E=this._map.hasLayer(u.layer),F;u.overlay?(F=document.createElement("input"),F.type="checkbox",F.className="leaflet-control-layers-selector",F.defaultChecked=E):F=this._createRadioElement("leaflet-base-layers_"+l(this),E),this._layerControlInputs.push(F),F.layerId=l(u.layer),mr(F,"click",this._onInputClick,this);var ne=document.createElement("span");ne.innerHTML=" "+u.name;var xe=document.createElement("span");v.appendChild(xe),xe.appendChild(F),xe.appendChild(ne);var et=u.overlay?this._overlaysList:this._baseLayersList;return et.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,v,E,F=[],ne=[];this._handlingClick=!0;for(var xe=u.length-1;xe>=0;xe--)v=u[xe],E=this._getLayer(v.layerId).layer,v.checked?F.push(E):v.checked||ne.push(E);for(xe=0;xe<ne.length;xe++)this._map.hasLayer(ne[xe])&&this._map.removeLayer(ne[xe]);for(xe=0;xe<F.length;xe++)this._map.hasLayer(F[xe])||this._map.addLayer(F[xe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,v,E,F=this._map.getZoom(),ne=u.length-1;ne>=0;ne--)v=u[ne],E=this._getLayer(v.layerId).layer,v.disabled=E.options.minZoom!==void 0&&F<E.options.minZoom||E.options.maxZoom!==void 0&&F>E.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,mr(u,"click",dr),this.expand();var v=this;setTimeout(function(){$r(u,"click",dr),v._preventClick=!1})}}),ma=function(u,v,E){return new ml(u,v,E)},_i=Jn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var v="leaflet-control-zoom",E=Gr("div",v+" leaflet-bar"),F=this.options;return this._zoomInButton=this._createButton(F.zoomInText,F.zoomInTitle,v+"-in",E,this._zoomIn),this._zoomOutButton=this._createButton(F.zoomOutText,F.zoomOutTitle,v+"-out",E,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),E},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,v,E,F,ne){var xe=Gr("a",E,F);return xe.innerHTML=u,xe.href="#",xe.title=v,xe.setAttribute("role","button"),xe.setAttribute("aria-label",v),Vl(xe),mr(xe,"click",kr),mr(xe,"click",ne,this),mr(xe,"click",this._refocusOnMap,this),xe},_updateDisabled:function(){var u=this._map,v="leaflet-disabled";qr(this._zoomInButton,v),qr(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(gr(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(gr(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});Or.mergeOptions({zoomControl:!0}),Or.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new _i,this.addControl(this.zoomControl))});var mu=function(u){return new _i(u)},Jo=Jn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var v="leaflet-control-scale",E=Gr("div",v),F=this.options;return this._addScales(F,v+"-line",E),u.on(F.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),E},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,v,E){u.metric&&(this._mScale=Gr("div",v,E)),u.imperial&&(this._iScale=Gr("div",v,E))},_update:function(){var u=this._map,v=u.getSize().y/2,E=u.distance(u.containerPointToLatLng([0,v]),u.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(E)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var v=this._getRoundNum(u),E=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,E,v/u)},_updateImperial:function(u){var v=u*3.2808399,E,F,ne;v>5280?(E=v/5280,F=this._getRoundNum(E),this._updateScale(this._iScale,F+" mi",F/E)):(ne=this._getRoundNum(v),this._updateScale(this._iScale,ne+" ft",ne/v))},_updateScale:function(u,v,E){u.style.width=Math.round(this.options.maxWidth*E)+"px",u.innerHTML=v},_getRoundNum:function(u){var v=Math.pow(10,(Math.floor(u)+"").length-1),E=u/v;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:1,v*E}}),Gl=function(u){return new Jo(u)},ql='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Eo=Jn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Gt.inlineSvg?ql+" ":"")+"Leaflet</a>"},initialize:function(u){S(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=Gr("div","leaflet-control-attribution"),Vl(this._container);for(var v in u._layers)u._layers[v].getAttribution&&this.addAttribution(u._layers[v].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var v in this._attributions)this._attributions[v]&&u.push(v);var E=[];this.options.prefix&&E.push(this.options.prefix),u.length&&E.push(u.join(", ")),this._container.innerHTML=E.join(' <span aria-hidden="true">|</span> ')}}});Or.mergeOptions({attributionControl:!0}),Or.addInitHook(function(){this.options.attributionControl&&new Eo().addTo(this)});var Yl=function(u){return new Eo(u)};Jn.Layers=ml,Jn.Zoom=_i,Jn.Scale=Jo,Jn.Attribution=Eo,ji.layers=ma,ji.zoom=mu,ji.scale=Gl,ji.attribution=Yl;var ei=ae.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ei.addTo=function(u,v){return u.addHandler(v,this),this};var mc={Events:B},cs=Gt.touch?"touchstart mousedown":"mousedown",jo=X.extend({options:{clickTolerance:3},initialize:function(u,v,E,F){S(this,F),this._element=u,this._dragStartTarget=v||u,this._preventOutline=E},enable:function(){this._enabled||(mr(this._dragStartTarget,cs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(jo._dragging===this&&this.finishDrag(!0),$r(this._dragStartTarget,cs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Ul(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){jo._dragging===this&&this.finishDrag();return}if(!(jo._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(jo._dragging=this,this._preventOutline&&$l(this._element),Nu(),Ha(),!this._moving)){this.fire("down");var v=u.touches?u.touches[0]:u,E=pc(this._element);this._startPoint=new K(v.clientX,v.clientY),this._startPos=No(this._element),this._parentScale=du(E);var F=u.type==="mousedown";mr(document,F?"mousemove":"touchmove",this._onMove,this),mr(document,F?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var v=u.touches&&u.touches.length===1?u.touches[0]:u,E=new K(v.clientX,v.clientY)._subtract(this._startPoint);!E.x&&!E.y||Math.abs(E.x)+Math.abs(E.y)<this.options.clickTolerance||(E.x/=this._parentScale.x,E.y/=this._parentScale.y,dr(u),this._moved||(this.fire("dragstart"),this._moved=!0,gr(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),gr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(E),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),Ti(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){qr(document.body,"leaflet-dragging"),this._lastTarget&&(qr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$r(document,"mousemove touchmove",this._onMove,this),$r(document,"mouseup touchend touchcancel",this._onUp,this),Bo(),mo();var v=this._moved&&this._moving;this._moving=!1,jo._dragging=!1,v&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function Zl(u,v,E){var F,ne=[1,4,2,8],xe,et,Pt,Rt,tn,Mn,Vn,Cr;for(xe=0,Mn=u.length;xe<Mn;xe++)u[xe]._code=Nt(u[xe],v);for(Pt=0;Pt<4;Pt++){for(Vn=ne[Pt],F=[],xe=0,Mn=u.length,et=Mn-1;xe<Mn;et=xe++)Rt=u[xe],tn=u[et],Rt._code&Vn?tn._code&Vn||(Cr=Lt(tn,Rt,Vn,v,E),Cr._code=Nt(Cr,v),F.push(Cr)):(tn._code&Vn&&(Cr=Lt(tn,Rt,Vn,v,E),Cr._code=Nt(Cr,v),F.push(Cr)),F.push(Rt));u=F}return u}function zo(u,v){var E,F,ne,xe,et,Pt,Rt,tn,Mn;if(!u||u.length===0)throw new Error("latlngs not passed");In(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Vn=we([0,0]),Cr=se(u),Ki=Cr.getNorthWest().distanceTo(Cr.getSouthWest())*Cr.getNorthEast().distanceTo(Cr.getNorthWest());Ki<1700&&(Vn=vl(u));var Oi=u.length,gs=[];for(E=0;E<Oi;E++){var Li=we(u[E]);gs.push(v.project(we([Li.lat-Vn.lat,Li.lng-Vn.lng])))}for(Pt=Rt=tn=0,E=0,F=Oi-1;E<Oi;F=E++)ne=gs[E],xe=gs[F],et=ne.y*xe.x-xe.y*ne.x,Rt+=(ne.x+xe.x)*et,tn+=(ne.y+xe.y)*et,Pt+=et*3;Pt===0?Mn=gs[0]:Mn=[Rt/Pt,tn/Pt];var no=v.unproject(Te(Mn));return we([no.lat+Vn.lat,no.lng+Vn.lng])}function vl(u){for(var v=0,E=0,F=0,ne=0;ne<u.length;ne++){var xe=we(u[ne]);v+=xe.lat,E+=xe.lng,F++}return we([v/F,E/F])}var yl={__proto__:null,clipPolygon:Zl,polygonCenter:zo,centroid:vl};function ti(u,v){if(!v||!u.length)return u.slice();var E=v*v;return u=ge(u,E),u=zi(u,E),u}function vo(u,v,E){return Math.sqrt(kn(u,v,E,!0))}function va(u,v,E){return kn(u,v,E)}function zi(u,v){var E=u.length,F=typeof Uint8Array<"u"?Uint8Array:Array,ne=new F(E);ne[0]=ne[E-1]=1,I(u,ne,v,0,E-1);var xe,et=[];for(xe=0;xe<E;xe++)ne[xe]&&et.push(u[xe]);return et}function I(u,v,E,F,ne){var xe=0,et,Pt,Rt;for(Pt=F+1;Pt<=ne-1;Pt++)Rt=kn(u[Pt],u[F],u[ne],!0),Rt>xe&&(et=Pt,xe=Rt);xe>E&&(v[et]=1,I(u,v,E,F,et),I(u,v,E,et,ne))}function ge(u,v){for(var E=[u[0]],F=1,ne=0,xe=u.length;F<xe;F++)sn(u[F],u[ne])>v&&(E.push(u[F]),ne=F);return ne<xe-1&&E.push(u[xe-1]),E}var He;function st(u,v,E,F,ne){var xe=F?He:Nt(u,E),et=Nt(v,E),Pt,Rt,tn;for(He=et;;){if(!(xe|et))return[u,v];if(xe&et)return!1;Pt=xe||et,Rt=Lt(u,v,Pt,E,ne),tn=Nt(Rt,E),Pt===xe?(u=Rt,xe=tn):(v=Rt,et=tn)}}function Lt(u,v,E,F,ne){var xe=v.x-u.x,et=v.y-u.y,Pt=F.min,Rt=F.max,tn,Mn;return E&8?(tn=u.x+xe*(Rt.y-u.y)/et,Mn=Rt.y):E&4?(tn=u.x+xe*(Pt.y-u.y)/et,Mn=Pt.y):E&2?(tn=Rt.x,Mn=u.y+et*(Rt.x-u.x)/xe):E&1&&(tn=Pt.x,Mn=u.y+et*(Pt.x-u.x)/xe),new K(tn,Mn,ne)}function Nt(u,v){var E=0;return u.x<v.min.x?E|=1:u.x>v.max.x&&(E|=2),u.y<v.min.y?E|=4:u.y>v.max.y&&(E|=8),E}function sn(u,v){var E=v.x-u.x,F=v.y-u.y;return E*E+F*F}function kn(u,v,E,F){var ne=v.x,xe=v.y,et=E.x-ne,Pt=E.y-xe,Rt=et*et+Pt*Pt,tn;return Rt>0&&(tn=((u.x-ne)*et+(u.y-xe)*Pt)/Rt,tn>1?(ne=E.x,xe=E.y):tn>0&&(ne+=et*tn,xe+=Pt*tn)),et=u.x-ne,Pt=u.y-xe,F?et*et+Pt*Pt:new K(ne,xe)}function In(u){return!N(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function Yn(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),In(u)}function ur(u,v){var E,F,ne,xe,et,Pt,Rt,tn;if(!u||u.length===0)throw new Error("latlngs not passed");In(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Mn=we([0,0]),Vn=se(u),Cr=Vn.getNorthWest().distanceTo(Vn.getSouthWest())*Vn.getNorthEast().distanceTo(Vn.getNorthWest());Cr<1700&&(Mn=vl(u));var Ki=u.length,Oi=[];for(E=0;E<Ki;E++){var gs=we(u[E]);Oi.push(v.project(we([gs.lat-Mn.lat,gs.lng-Mn.lng])))}for(E=0,F=0;E<Ki-1;E++)F+=Oi[E].distanceTo(Oi[E+1])/2;if(F===0)tn=Oi[0];else for(E=0,xe=0;E<Ki-1;E++)if(et=Oi[E],Pt=Oi[E+1],ne=et.distanceTo(Pt),xe+=ne,xe>F){Rt=(xe-F)/ne,tn=[Pt.x-Rt*(Pt.x-et.x),Pt.y-Rt*(Pt.y-et.y)];break}var Li=v.unproject(Te(tn));return we([Li.lat+Mn.lat,Li.lng+Mn.lng])}var Sr={__proto__:null,simplify:ti,pointToSegmentDistance:vo,closestPointOnSegment:va,clipSegment:st,_getEdgeIntersection:Lt,_getBitCode:Nt,_sqClosestPointOnSegment:kn,isFlat:In,_flat:Yn,polylineCenter:ur},bi={project:function(u){return new K(u.lng,u.lat)},unproject:function(u){return new pe(u.y,u.x)},bounds:new Ue([-180,-90],[180,90])},Zr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ue([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var v=Math.PI/180,E=this.R,F=u.lat*v,ne=this.R_MINOR/E,xe=Math.sqrt(1-ne*ne),et=xe*Math.sin(F),Pt=Math.tan(Math.PI/4-F/2)/Math.pow((1-et)/(1+et),xe/2);return F=-E*Math.log(Math.max(Pt,1e-10)),new K(u.lng*v*E,F)},unproject:function(u){for(var v=180/Math.PI,E=this.R,F=this.R_MINOR/E,ne=Math.sqrt(1-F*F),xe=Math.exp(-u.y/E),et=Math.PI/2-2*Math.atan(xe),Pt=0,Rt=.1,tn;Pt<15&&Math.abs(Rt)>1e-7;Pt++)tn=ne*Math.sin(et),tn=Math.pow((1-tn)/(1+tn),ne/2),Rt=Math.PI/2-2*Math.atan(xe*tn)-et,et+=Rt;return new pe(et*v,u.x*v/E)}},ni={__proto__:null,LonLat:bi,Mercator:Zr,SphericalMercator:Je},Ui=i({},Ae,{code:"EPSG:3395",projection:Zr,transformation:function(){var u=.5/(Math.PI*Zr.R);return _t(u,.5,-u,.5)}()}),qi=i({},Ae,{code:"EPSG:4326",projection:bi,transformation:_t(1/180,1,-1/180,.5)}),yo=i({},be,{projection:bi,transformation:_t(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,v){var E=v.lng-u.lng,F=v.lat-u.lat;return Math.sqrt(E*E+F*F)},infinite:!0});be.Earth=Ae,be.EPSG3395=Ui,be.EPSG3857=ue,be.EPSG900913=oe,be.EPSG4326=qi,be.Simple=yo;var Er=X.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var v=u.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var E=this.getEvents();v.on(E,this),this.once("remove",function(){v.off(E,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});Or.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var v=l(u);return this._layers[v]?this:(this._layers[v]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var v=l(u);return this._layers[v]?(this._loaded&&u.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,v){for(var E in this._layers)u.call(v,this._layers[E]);return this},_addLayers:function(u){u=u?N(u)?u:[u]:[];for(var v=0,E=u.length;v<E;v++)this.addLayer(u[v])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var v=l(u);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,v=-1/0,E=this._getZoomSpan();for(var F in this._zoomBoundLayers){var ne=this._zoomBoundLayers[F].options;u=ne.minZoom===void 0?u:Math.min(u,ne.minZoom),v=ne.maxZoom===void 0?v:Math.max(v,ne.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=u===1/0?void 0:u,E!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Cs=Er.extend({initialize:function(u,v){S(this,v),this._layers={};var E,F;if(u)for(E=0,F=u.length;E<F;E++)this.addLayer(u[E])},addLayer:function(u){var v=this.getLayerId(u);return this._layers[v]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var v=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(u){var v=typeof u=="number"?u:this.getLayerId(u);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var v=Array.prototype.slice.call(arguments,1),E,F;for(E in this._layers)F=this._layers[E],F[u]&&F[u].apply(F,v);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,v){for(var E in this._layers)u.call(v,this._layers[E]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),bl=function(u,v){return new Cs(u,v)},Fs=Cs.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),Cs.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),Cs.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new ie;for(var v in this._layers){var E=this._layers[v];u.extend(E.getBounds?E.getBounds():E.getLatLng())}return u}}),vu=function(u,v){return new Fs(u,v)},Qo=ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){S(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,v){var E=this._getIconUrl(u);if(!E){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var F=this._createImg(E,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(F,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(F.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),F},_setIconStyles:function(u,v){var E=this.options,F=E[v+"Size"];typeof F=="number"&&(F=[F,F]);var ne=Te(F),xe=Te(v==="shadow"&&E.shadowAnchor||E.iconAnchor||ne&&ne.divideBy(2,!0));u.className="leaflet-marker-"+v+" "+(E.className||""),xe&&(u.style.marginLeft=-xe.x+"px",u.style.marginTop=-xe.y+"px"),ne&&(u.style.width=ne.x+"px",u.style.height=ne.y+"px")},_createImg:function(u,v){return v=v||document.createElement("img"),v.src=u,v},_getIconUrl:function(u){return Gt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function Fu(u){return new Qo(u)}var Za=Qo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof Za.imagePath!="string"&&(Za.imagePath=this._detectIconPath()),(this.options.imagePath||Za.imagePath)+Qo.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var v=function(E,F,ne){var xe=F.exec(E);return xe&&xe[ne]};return u=v(u,/^url\((['"])?(.+)\1\)$/,2),u&&v(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=Gr("div","leaflet-default-icon-path",document.body),v=So(u,"background-image")||So(u,"backgroundImage");if(document.body.removeChild(u),v=this._stripUrl(v),v)return v;var E=document.querySelector('link[href$="leaflet.css"]');return E?E.href.substring(0,E.href.length-11-1):""}}),Ka=ei.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new jo(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),gr(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&qr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var v=this._marker,E=v._map,F=this._marker.options.autoPanSpeed,ne=this._marker.options.autoPanPadding,xe=No(v._icon),et=E.getPixelBounds(),Pt=E.getPixelOrigin(),Rt=J(et.min._subtract(Pt).add(ne),et.max._subtract(Pt).subtract(ne));if(!Rt.contains(xe)){var tn=Te((Math.max(Rt.max.x,xe.x)-Rt.max.x)/(et.max.x-Rt.max.x)-(Math.min(Rt.min.x,xe.x)-Rt.min.x)/(et.min.x-Rt.min.x),(Math.max(Rt.max.y,xe.y)-Rt.max.y)/(et.max.y-Rt.max.y)-(Math.min(Rt.min.y,xe.y)-Rt.min.y)/(et.min.y-Rt.min.y)).multiplyBy(F);E.panBy(tn,{animate:!1}),this._draggable._newPos._add(tn),this._draggable._startPos._add(tn),Ti(v._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=$(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,u)))},_onDrag:function(u){var v=this._marker,E=v._shadow,F=No(v._icon),ne=v._map.layerPointToLatLng(F);E&&Ti(E,F),v._latlng=ne,u.latlng=ne,u.oldLatLng=this._oldLatLng,v.fire("move",u).fire("drag",u)},_onDragEnd:function(u){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Yi=Er.extend({options:{icon:new Za,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,v){S(this,v),this._latlng=we(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var v=this._latlng;return this._latlng=we(u),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),E=u.icon.createIcon(this._icon),F=!1;E!==this._icon&&(this._icon&&this._removeIcon(),F=!0,u.title&&(E.title=u.title),E.tagName==="IMG"&&(E.alt=u.alt||"")),gr(E,v),u.keyboard&&(E.tabIndex="0",E.setAttribute("role","button")),this._icon=E,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mr(E,"focus",this._panOnFocus,this);var ne=u.icon.createShadow(this._shadow),xe=!1;ne!==this._shadow&&(this._removeShadow(),xe=!0),ne&&(gr(ne,v),ne.alt=""),this._shadow=ne,u.opacity<1&&this._updateOpacity(),F&&this.getPane().appendChild(this._icon),this._initInteraction(),ne&&xe&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$r(this._icon,"focus",this._panOnFocus,this),fr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&fr(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&Ti(this._icon,u),this._shadow&&Ti(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(gr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ka)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ka(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&Ls(this._icon,u),this._shadow&&Ls(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var v=this.options.icon.options,E=v.iconSize?Te(v.iconSize):Te(0,0),F=v.iconAnchor?Te(v.iconAnchor):Te(0,0);u.panInside(this._latlng,{paddingTopLeft:F,paddingBottomRight:E.subtract(F)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ea(u,v){return new Yi(u,v)}var bo=Er.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return S(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Qs=bo.extend({options:{fill:!0,radius:10},initialize:function(u,v){S(this,v),this._latlng=we(u),this._radius=this.options.radius},setLatLng:function(u){var v=this._latlng;return this._latlng=we(u),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var v=u&&u.radius||this._radius;return bo.prototype.setStyle.call(this,u),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,v=this._radiusY||u,E=this._clickTolerance(),F=[u+E,v+E];this._pxBounds=new Ue(this._point.subtract(F),this._point.add(F))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function _l(u,v){return new Qs(u,v)}var Ss=Qs.extend({initialize:function(u,v,E){if(typeof v=="number"&&(v=i({},E,{radius:v})),S(this,v),this._latlng=we(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new ie(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:bo.prototype.setStyle,_project:function(){var u=this._latlng.lng,v=this._latlng.lat,E=this._map,F=E.options.crs;if(F.distance===Ae.distance){var ne=Math.PI/180,xe=this._mRadius/Ae.R/ne,et=E.project([v+xe,u]),Pt=E.project([v-xe,u]),Rt=et.add(Pt).divideBy(2),tn=E.unproject(Rt).lat,Mn=Math.acos((Math.cos(xe*ne)-Math.sin(v*ne)*Math.sin(tn*ne))/(Math.cos(v*ne)*Math.cos(tn*ne)))/ne;(isNaN(Mn)||Mn===0)&&(Mn=xe/Math.cos(Math.PI/180*v)),this._point=Rt.subtract(E.getPixelOrigin()),this._radius=isNaN(Mn)?0:Rt.x-E.project([tn,u-Mn]).x,this._radiusY=Rt.y-et.y}else{var Vn=F.unproject(F.project(this._latlng).subtract([this._mRadius,0]));this._point=E.latLngToLayerPoint(this._latlng),this._radius=this._point.x-E.latLngToLayerPoint(Vn).x}this._updateBounds()}});function js(u,v,E){return new Ss(u,v,E)}var zs=bo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,v){S(this,v),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var v=1/0,E=null,F=kn,ne,xe,et=0,Pt=this._parts.length;et<Pt;et++)for(var Rt=this._parts[et],tn=1,Mn=Rt.length;tn<Mn;tn++){ne=Rt[tn-1],xe=Rt[tn];var Vn=F(u,ne,xe,!0);Vn<v&&(v=Vn,E=F(u,ne,xe))}return E&&(E.distance=Math.sqrt(v)),E},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ur(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,v){return v=v||this._defaultShape(),u=we(u),v.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new ie,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return In(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var v=[],E=In(u),F=0,ne=u.length;F<ne;F++)E?(v[F]=we(u[F]),this._bounds.extend(v[F])):v[F]=this._convertLatLngs(u[F]);return v},_project:function(){var u=new Ue;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),v=new K(u,u);this._rawPxBounds&&(this._pxBounds=new Ue([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(u,v,E){var F=u[0]instanceof pe,ne=u.length,xe,et;if(F){for(et=[],xe=0;xe<ne;xe++)et[xe]=this._map.latLngToLayerPoint(u[xe]),E.extend(et[xe]);v.push(et)}else for(xe=0;xe<ne;xe++)this._projectLatlngs(u[xe],v,E)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,E,F,ne,xe,et,Pt,Rt;for(E=0,ne=0,xe=this._rings.length;E<xe;E++)for(Rt=this._rings[E],F=0,et=Rt.length;F<et-1;F++)Pt=st(Rt[F],Rt[F+1],u,F,!0),Pt&&(v[ne]=v[ne]||[],v[ne].push(Pt[0]),(Pt[1]!==Rt[F+1]||F===et-2)&&(v[ne].push(Pt[1]),ne++))}},_simplifyPoints:function(){for(var u=this._parts,v=this.options.smoothFactor,E=0,F=u.length;E<F;E++)u[E]=ti(u[E],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,v){var E,F,ne,xe,et,Pt,Rt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(E=0,xe=this._parts.length;E<xe;E++)for(Pt=this._parts[E],F=0,et=Pt.length,ne=et-1;F<et;ne=F++)if(!(!v&&F===0)&&vo(u,Pt[ne],Pt[F])<=Rt)return!0;return!1}});function vc(u,v){return new zs(u,v)}zs._flat=Yn;var rs=zs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var v=zs.prototype._convertLatLngs.call(this,u),E=v.length;return E>=2&&v[0]instanceof pe&&v[0].equals(v[E-1])&&v.pop(),v},_setLatLngs:function(u){zs.prototype._setLatLngs.call(this,u),In(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return In(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,v=this.options.weight,E=new K(v,v);if(u=new Ue(u.min.subtract(E),u.max.add(E)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var F=0,ne=this._rings.length,xe;F<ne;F++)xe=Zl(this._rings[F],u,!0),xe.length&&this._parts.push(xe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var v=!1,E,F,ne,xe,et,Pt,Rt,tn;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(xe=0,Rt=this._parts.length;xe<Rt;xe++)for(E=this._parts[xe],et=0,tn=E.length,Pt=tn-1;et<tn;Pt=et++)F=E[et],ne=E[Pt],F.y>u.y!=ne.y>u.y&&u.x<(ne.x-F.x)*(u.y-F.y)/(ne.y-F.y)+F.x&&(v=!v);return v||zs.prototype._containsPoint.call(this,u,!0)}});function ya(u,v){return new rs(u,v)}var Es=Fs.extend({initialize:function(u,v){S(this,v),this._layers={},u&&this.addData(u)},addData:function(u){var v=N(u)?u:u.features,E,F,ne;if(v){for(E=0,F=v.length;E<F;E++)ne=v[E],(ne.geometries||ne.geometry||ne.features||ne.coordinates)&&this.addData(ne);return this}var xe=this.options;if(xe.filter&&!xe.filter(u))return this;var et=Ps(u,xe);return et?(et.feature=Ms(u),et.defaultOptions=et.options,this.resetStyle(et),xe.onEachFeature&&xe.onEachFeature(u,et),this.addLayer(et)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(v){this._setLayerStyle(v,u)},this)},_setLayerStyle:function(u,v){u.setStyle&&(typeof v=="function"&&(v=v(u.feature)),u.setStyle(v))}});function Ps(u,v){var E=u.type==="Feature"?u.geometry:u,F=E?E.coordinates:null,ne=[],xe=v&&v.pointToLayer,et=v&&v.coordsToLatLng||_a,Pt,Rt,tn,Mn;if(!F&&!E)return null;switch(E.type){case"Point":return Pt=et(F),ba(xe,u,Pt,v);case"MultiPoint":for(tn=0,Mn=F.length;tn<Mn;tn++)Pt=et(F[tn]),ne.push(ba(xe,u,Pt,v));return new Fs(ne);case"LineString":case"MultiLineString":return Rt=ks(F,E.type==="LineString"?0:1,et),new zs(Rt,v);case"Polygon":case"MultiPolygon":return Rt=ks(F,E.type==="Polygon"?1:2,et),new rs(Rt,v);case"GeometryCollection":for(tn=0,Mn=E.geometries.length;tn<Mn;tn++){var Vn=Ps({geometry:E.geometries[tn],type:"Feature",properties:u.properties},v);Vn&&ne.push(Vn)}return new Fs(ne);case"FeatureCollection":for(tn=0,Mn=E.features.length;tn<Mn;tn++){var Cr=Ps(E.features[tn],v);Cr&&ne.push(Cr)}return new Fs(ne);default:throw new Error("Invalid GeoJSON object.")}}function ba(u,v,E,F){return u?u(v,E):new Yi(E,F&&F.markersInheritOptions&&F)}function _a(u){return new pe(u[1],u[0],u[2])}function ks(u,v,E){for(var F=[],ne=0,xe=u.length,et;ne<xe;ne++)et=v?ks(u[ne],v-1,E):(E||_a)(u[ne]),F.push(et);return F}function hs(u,v){return u=we(u),u.alt!==void 0?[y(u.lng,v),y(u.lat,v),y(u.alt,v)]:[y(u.lng,v),y(u.lat,v)]}function ta(u,v,E,F){for(var ne=[],xe=0,et=u.length;xe<et;xe++)ne.push(v?ta(u[xe],In(u[xe])?0:v-1,E,F):hs(u[xe],F));return!v&&E&&ne.length>0&&ne.push(ne[0].slice()),ne}function _o(u,v){return u.feature?i({},u.feature,{geometry:v}):Ms(v)}function Ms(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var bt={toGeoJSON:function(u){return _o(this,{type:"Point",coordinates:hs(this.getLatLng(),u)})}};Yi.include(bt),Ss.include(bt),Qs.include(bt),zs.include({toGeoJSON:function(u){var v=!In(this._latlngs),E=ta(this._latlngs,v?1:0,!1,u);return _o(this,{type:(v?"Multi":"")+"LineString",coordinates:E})}}),rs.include({toGeoJSON:function(u){var v=!In(this._latlngs),E=v&&!In(this._latlngs[0]),F=ta(this._latlngs,E?2:v?1:0,!0,u);return v||(F=[F]),_o(this,{type:(E?"Multi":"")+"Polygon",coordinates:F})}}),Cs.include({toMultiPoint:function(u){var v=[];return this.eachLayer(function(E){v.push(E.toGeoJSON(u).geometry.coordinates)}),_o(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(u){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(u);var E=v==="GeometryCollection",F=[];return this.eachLayer(function(ne){if(ne.toGeoJSON){var xe=ne.toGeoJSON(u);if(E)F.push(xe.geometry);else{var et=Ms(xe);et.type==="FeatureCollection"?F.push.apply(F,et.features):F.push(et)}}}),E?_o(this,{geometries:F,type:"GeometryCollection"}):{type:"FeatureCollection",features:F}}});function Vt(u,v){return new Es(u,v)}var Mt=Vt,En=Er.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,v,E){this._url=u,this._bounds=se(v),S(this,E)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(gr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){fr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&da(this._image),this},bringToBack:function(){return this._map&&Io(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=se(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",v=this._image=u?this._url:Gr("img");if(gr(v,"leaflet-image-layer"),this._zoomAnimated&&gr(v,"leaflet-zoom-animated"),this.options.className&&gr(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onload=o(this.fire,this,"load"),v.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(u){var v=this._map.getZoomScale(u.zoom),E=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;pa(this._image,E,v)},_reset:function(){var u=this._image,v=new Ue(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),E=v.getSize();Ti(u,v.min),u.style.width=E.x+"px",u.style.height=E.y+"px"},_updateOpacity:function(){Ls(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),Un=function(u,v,E){return new En(u,v,E)},hr=En.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",v=this._image=u?this._url:Gr("video");if(gr(v,"leaflet-image-layer"),this._zoomAnimated&&gr(v,"leaflet-zoom-animated"),this.options.className&&gr(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onloadeddata=o(this.fire,this,"load"),u){for(var E=v.getElementsByTagName("source"),F=[],ne=0;ne<E.length;ne++)F.push(E[ne].src);this._url=E.length>0?F:[v.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var xe=0;xe<this._url.length;xe++){var et=Gr("source");et.src=this._url[xe],v.appendChild(et)}}});function wi(u,v,E){return new hr(u,v,E)}var ri=En.extend({_initImage:function(){var u=this._image=this._url;gr(u,"leaflet-image-layer"),this._zoomAnimated&&gr(u,"leaflet-zoom-animated"),this.options.className&&gr(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function Kl(u,v,E){return new ri(u,v,E)}var Us=Er.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,v){u&&(u instanceof pe||N(u))?(this._latlng=we(u),S(this,v)):(S(this,u),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&Ls(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&Ls(this._container,1),this.bringToFront(),this.options.interactive&&(gr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(Ls(this._container,0),this._removeTimeout=setTimeout(o(fr,void 0,this._container),200)):fr(this._container),this.options.interactive&&(qr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=we(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&da(this._container),this},bringToBack:function(){return this._map&&Io(this._container),this},_prepareOpen:function(u){var v=this._source;if(!v._map)return!1;if(v instanceof Fs){v=null;var E=this._source._layers;for(var F in E)if(E[F]._map){v=E[F];break}if(!v)return!1;this._source=v}if(!u)if(v.getCenter)u=v.getCenter();else if(v.getLatLng)u=v.getLatLng();else if(v.getBounds)u=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")u.innerHTML=v;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),v=Te(this.options.offset),E=this._getAnchor();this._zoomAnimated?Ti(this._container,u.add(E)):v=v.add(u).add(E);var F=this._containerBottom=-v.y,ne=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=F+"px",this._container.style.left=ne+"px"}},_getAnchor:function(){return[0,0]}});Or.include({_initOverlay:function(u,v,E,F){var ne=v;return ne instanceof u||(ne=new u(F).setContent(v)),E&&ne.setLatLng(E),ne}}),Er.include({_initOverlay:function(u,v,E,F){var ne=E;return ne instanceof u?(S(ne,F),ne._source=this):(ne=v&&!F?v:new u(F,this),ne.setContent(E)),ne}});var xi=Us.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,Us.prototype.openOn.call(this,u)},onAdd:function(u){Us.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bo||this._source.on("preclick",qa))},onRemove:function(u){Us.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bo||this._source.off("preclick",qa))},getEvents:function(){var u=Us.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",v=this._container=Gr("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),E=this._wrapper=Gr("div",u+"-content-wrapper",v);if(this._contentNode=Gr("div",u+"-content",E),Vl(v),Ru(this._contentNode),mr(v,"contextmenu",qa),this._tipContainer=Gr("div",u+"-tip-container",v),this._tip=Gr("div",u+"-tip",this._tipContainer),this.options.closeButton){var F=this._closeButton=Gr("a",u+"-close-button",v);F.setAttribute("role","button"),F.setAttribute("aria-label","Close popup"),F.href="#close",F.innerHTML='<span aria-hidden="true">&#215;</span>',mr(F,"click",function(ne){dr(ne),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,v=u.style;v.width="",v.whiteSpace="nowrap";var E=u.offsetWidth;E=Math.min(E,this.options.maxWidth),E=Math.max(E,this.options.minWidth),v.width=E+1+"px",v.whiteSpace="",v.height="";var F=u.offsetHeight,ne=this.options.maxHeight,xe="leaflet-popup-scrolled";ne&&F>ne?(v.height=ne+"px",gr(u,xe)):qr(u,xe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),E=this._getAnchor();Ti(this._container,v.add(E))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,v=parseInt(So(this._container,"marginBottom"),10)||0,E=this._container.offsetHeight+v,F=this._containerWidth,ne=new K(this._containerLeft,-E-this._containerBottom);ne._add(No(this._container));var xe=u.layerPointToContainerPoint(ne),et=Te(this.options.autoPanPadding),Pt=Te(this.options.autoPanPaddingTopLeft||et),Rt=Te(this.options.autoPanPaddingBottomRight||et),tn=u.getSize(),Mn=0,Vn=0;xe.x+F+Rt.x>tn.x&&(Mn=xe.x+F-tn.x+Rt.x),xe.x-Mn-Pt.x<0&&(Mn=xe.x-Pt.x),xe.y+E+Rt.y>tn.y&&(Vn=xe.y+E-tn.y+Rt.y),xe.y-Vn-Pt.y<0&&(Vn=xe.y-Pt.y),(Mn||Vn)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Mn,Vn]))}},_getAnchor:function(){return Te(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),na=function(u,v){return new xi(u,v)};Or.mergeOptions({closePopupOnClick:!0}),Or.include({openPopup:function(u,v,E){return this._initOverlay(xi,u,v,E).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Er.include({bindPopup:function(u,v){return this._popup=this._initOverlay(xi,this._popup,u,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof Fs||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){kr(u);var v=u.layer||u.target;if(this._popup._source===v&&!(v instanceof bo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=v,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var wa=Us.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){Us.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){Us.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=Us.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",v=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Gr("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var v,E,F=this._map,ne=this._container,xe=F.latLngToContainerPoint(F.getCenter()),et=F.layerPointToContainerPoint(u),Pt=this.options.direction,Rt=ne.offsetWidth,tn=ne.offsetHeight,Mn=Te(this.options.offset),Vn=this._getAnchor();Pt==="top"?(v=Rt/2,E=tn):Pt==="bottom"?(v=Rt/2,E=0):Pt==="center"?(v=Rt/2,E=tn/2):Pt==="right"?(v=0,E=tn/2):Pt==="left"?(v=Rt,E=tn/2):et.x<xe.x?(Pt="right",v=0,E=tn/2):(Pt="left",v=Rt+(Mn.x+Vn.x)*2,E=tn/2),u=u.subtract(Te(v,E,!0)).add(Mn).add(Vn),qr(ne,"leaflet-tooltip-right"),qr(ne,"leaflet-tooltip-left"),qr(ne,"leaflet-tooltip-top"),qr(ne,"leaflet-tooltip-bottom"),gr(ne,"leaflet-tooltip-"+Pt),Ti(ne,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&Ls(this._container,u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(v)},_getAnchor:function(){return Te(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ra=function(u,v){return new wa(u,v)};Or.include({openTooltip:function(u,v,E){return this._initOverlay(wa,u,v,E).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Er.include({bindTooltip:function(u,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wa,this._tooltip,u,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var v=u?"off":"on",E={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?E.add=this._openTooltip:(E.mouseover=this._openTooltip,E.mouseout=this.closeTooltip,E.click=this._openTooltip,this._map?this._addFocusListeners():E.add=this._addFocusListeners),this._tooltip.options.sticky&&(E.mousemove=this._moveTooltip),this[v](E),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof Fs||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&(mr(v,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),mr(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var v=u.latlng,E,F;this._tooltip.options.sticky&&u.originalEvent&&(E=this._map.mouseEventToContainerPoint(u.originalEvent),F=this._map.containerPointToLayerPoint(E),v=this._map.layerPointToLatLng(F)),this._tooltip.setLatLng(v)}});var ia=Qo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var v=u&&u.tagName==="DIV"?u:document.createElement("div"),E=this.options;if(E.html instanceof Element?($a(v),v.appendChild(E.html)):v.innerHTML=E.html!==!1?E.html:"",E.bgPos){var F=Te(E.bgPos);v.style.backgroundPosition=-F.x+"px "+-F.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function sa(u){return new ia(u)}Qo.Default=Za;var Dr=Er.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Gt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){S(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),fr(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(da(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Io(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof K?u:new K(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var v=this.getPane().children,E=-u(-1/0,1/0),F=0,ne=v.length,xe;F<ne;F++)xe=v[F].style.zIndex,v[F]!==this._container&&xe&&(E=u(E,+xe));isFinite(E)&&(this.options.zIndex=E+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Gt.ielt9){Ls(this._container,this.options.opacity);var u=+new Date,v=!1,E=!1;for(var F in this._tiles){var ne=this._tiles[F];if(!(!ne.current||!ne.loaded)){var xe=Math.min(1,(u-ne.loaded)/200);Ls(ne.el,xe),xe<1?v=!0:(ne.active?E=!0:this._onOpaqueTile(ne),ne.active=!0)}}E&&!this._noPrune&&this._pruneTiles(),v&&(H(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Gr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,v=this.options.maxZoom;if(u!==void 0){for(var E in this._levels)E=Number(E),this._levels[E].el.children.length||E===u?(this._levels[E].el.style.zIndex=v-Math.abs(u-E),this._onUpdateLevel(E)):(fr(this._levels[E].el),this._removeTilesAtZoom(E),this._onRemoveLevel(E),delete this._levels[E]);var F=this._levels[u],ne=this._map;return F||(F=this._levels[u]={},F.el=Gr("div","leaflet-tile-container leaflet-zoom-animated",this._container),F.el.style.zIndex=v,F.origin=ne.project(ne.unproject(ne.getPixelOrigin()),u).round(),F.zoom=u,this._setZoomTransform(F,ne.getCenter(),ne.getZoom()),p(F.el.offsetWidth),this._onCreateLevel(F)),this._level=F,F}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,v,E=this._map.getZoom();if(E>this.options.maxZoom||E<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)v=this._tiles[u],v.retain=v.current;for(u in this._tiles)if(v=this._tiles[u],v.current&&!v.active){var F=v.coords;this._retainParent(F.x,F.y,F.z,F.z-5)||this._retainChildren(F.x,F.y,F.z,F.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var v in this._tiles)this._tiles[v].coords.z===u&&this._removeTile(v)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)fr(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,v,E,F){var ne=Math.floor(u/2),xe=Math.floor(v/2),et=E-1,Pt=new K(+ne,+xe);Pt.z=+et;var Rt=this._tileCoordsToKey(Pt),tn=this._tiles[Rt];return tn&&tn.active?(tn.retain=!0,!0):(tn&&tn.loaded&&(tn.retain=!0),et>F?this._retainParent(ne,xe,et,F):!1)},_retainChildren:function(u,v,E,F){for(var ne=2*u;ne<2*u+2;ne++)for(var xe=2*v;xe<2*v+2;xe++){var et=new K(ne,xe);et.z=E+1;var Pt=this._tileCoordsToKey(et),Rt=this._tiles[Pt];if(Rt&&Rt.active){Rt.retain=!0;continue}else Rt&&Rt.loaded&&(Rt.retain=!0);E+1<F&&this._retainChildren(ne,xe,E+1,F)}},_resetView:function(u){var v=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var v=this.options;return v.minNativeZoom!==void 0&&u<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<u?v.maxNativeZoom:u},_setView:function(u,v,E,F){var ne=Math.round(v);this.options.maxZoom!==void 0&&ne>this.options.maxZoom||this.options.minZoom!==void 0&&ne<this.options.minZoom?ne=void 0:ne=this._clampZoom(ne);var xe=this.options.updateWhenZooming&&ne!==this._tileZoom;(!F||xe)&&(this._tileZoom=ne,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ne!==void 0&&this._update(u),E||this._pruneTiles(),this._noPrune=!!E),this._setZoomTransforms(u,v)},_setZoomTransforms:function(u,v){for(var E in this._levels)this._setZoomTransform(this._levels[E],u,v)},_setZoomTransform:function(u,v,E){var F=this._map.getZoomScale(E,u.zoom),ne=u.origin.multiplyBy(F).subtract(this._map._getNewPixelOrigin(v,E)).round();Gt.any3d?pa(u.el,ne,F):Ti(u.el,ne)},_resetGrid:function(){var u=this._map,v=u.options.crs,E=this._tileSize=this.getTileSize(),F=this._tileZoom,ne=this._map.getPixelWorldBounds(this._tileZoom);ne&&(this._globalTileRange=this._pxBoundsToTileRange(ne)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,v.wrapLng[0]],F).x/E.x),Math.ceil(u.project([0,v.wrapLng[1]],F).x/E.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([v.wrapLat[0],0],F).y/E.x),Math.ceil(u.project([v.wrapLat[1],0],F).y/E.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var v=this._map,E=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),F=v.getZoomScale(E,this._tileZoom),ne=v.project(u,this._tileZoom).floor(),xe=v.getSize().divideBy(F*2);return new Ue(ne.subtract(xe),ne.add(xe))},_update:function(u){var v=this._map;if(v){var E=this._clampZoom(v.getZoom());if(u===void 0&&(u=v.getCenter()),this._tileZoom!==void 0){var F=this._getTiledPixelBounds(u),ne=this._pxBoundsToTileRange(F),xe=ne.getCenter(),et=[],Pt=this.options.keepBuffer,Rt=new Ue(ne.getBottomLeft().subtract([Pt,-Pt]),ne.getTopRight().add([Pt,-Pt]));if(!(isFinite(ne.min.x)&&isFinite(ne.min.y)&&isFinite(ne.max.x)&&isFinite(ne.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var tn in this._tiles){var Mn=this._tiles[tn].coords;(Mn.z!==this._tileZoom||!Rt.contains(new K(Mn.x,Mn.y)))&&(this._tiles[tn].current=!1)}if(Math.abs(E-this._tileZoom)>1){this._setView(u,E);return}for(var Vn=ne.min.y;Vn<=ne.max.y;Vn++)for(var Cr=ne.min.x;Cr<=ne.max.x;Cr++){var Ki=new K(Cr,Vn);if(Ki.z=this._tileZoom,!!this._isValidTile(Ki)){var Oi=this._tiles[this._tileCoordsToKey(Ki)];Oi?Oi.current=!0:et.push(Ki)}}if(et.sort(function(Li,no){return Li.distanceTo(xe)-no.distanceTo(xe)}),et.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gs=document.createDocumentFragment();for(Cr=0;Cr<et.length;Cr++)this._addTile(et[Cr],gs);this._level.el.appendChild(gs)}}}},_isValidTile:function(u){var v=this._map.options.crs;if(!v.infinite){var E=this._globalTileRange;if(!v.wrapLng&&(u.x<E.min.x||u.x>E.max.x)||!v.wrapLat&&(u.y<E.min.y||u.y>E.max.y))return!1}if(!this.options.bounds)return!0;var F=this._tileCoordsToBounds(u);return se(this.options.bounds).overlaps(F)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var v=this._map,E=this.getTileSize(),F=u.scaleBy(E),ne=F.add(E),xe=v.unproject(F,u.z),et=v.unproject(ne,u.z);return[xe,et]},_tileCoordsToBounds:function(u){var v=this._tileCoordsToNwSe(u),E=new ie(v[0],v[1]);return this.options.noWrap||(E=this._map.wrapLatLngBounds(E)),E},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var v=u.split(":"),E=new K(+v[0],+v[1]);return E.z=+v[2],E},_removeTile:function(u){var v=this._tiles[u];v&&(fr(v.el),delete this._tiles[u],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){gr(u,"leaflet-tile");var v=this.getTileSize();u.style.width=v.x+"px",u.style.height=v.y+"px",u.onselectstart=p,u.onmousemove=p,Gt.ielt9&&this.options.opacity<1&&Ls(u,this.options.opacity)},_addTile:function(u,v){var E=this._getTilePos(u),F=this._tileCoordsToKey(u),ne=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(ne),this.createTile.length<2&&$(o(this._tileReady,this,u,null,ne)),Ti(ne,E),this._tiles[F]={el:ne,coords:u,current:!0},v.appendChild(ne),this.fire("tileloadstart",{tile:ne,coords:u})},_tileReady:function(u,v,E){v&&this.fire("tileerror",{error:v,tile:E,coords:u});var F=this._tileCoordsToKey(u);E=this._tiles[F],E&&(E.loaded=+new Date,this._map._fadeAnimated?(Ls(E.el,0),H(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(E.active=!0,this._pruneTiles()),v||(gr(E.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:E.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Gt.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var v=new K(this._wrapX?f(u.x,this._wrapX):u.x,this._wrapY?f(u.y,this._wrapY):u.y);return v.z=u.z,v},_pxBoundsToTileRange:function(u){var v=this.getTileSize();return new Ue(u.min.unscaleBy(v).floor(),u.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function Uo(u){return new Dr(u)}var fs=Dr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,v){this._url=u,v=S(this,v),v.detectRetina&&Gt.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,v){return this._url===u&&v===void 0&&(v=!0),this._url=u,v||this.redraw(),this},createTile:function(u,v){var E=document.createElement("img");return mr(E,"load",o(this._tileOnLoad,this,v,E)),mr(E,"error",o(this._tileOnError,this,v,E)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(E.referrerPolicy=this.options.referrerPolicy),E.alt="",E.src=this.getTileUrl(u),E},getTileUrl:function(u){var v={r:Gt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var E=this._globalTileRange.max.y-u.y;this.options.tms&&(v.y=E),v["-y"]=E}return D(this._url,i(v,this.options))},_tileOnLoad:function(u,v){Gt.ielt9?setTimeout(o(u,this,null,v),0):u(null,v)},_tileOnError:function(u,v,E){var F=this.options.errorTileUrl;F&&v.getAttribute("src")!==F&&(v.src=F),u(E,v)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,v=this.options.maxZoom,E=this.options.zoomReverse,F=this.options.zoomOffset;return E&&(u=v-u),u+F},_getSubdomain:function(u){var v=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var u,v;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(v=this._tiles[u].el,v.onload=p,v.onerror=p,!v.complete)){v.src=W;var E=this._tiles[u].coords;fr(v),delete this._tiles[u],this.fire("tileabort",{tile:v,coords:E})}},_removeTile:function(u){var v=this._tiles[u];if(v)return v.el.setAttribute("src",W),Dr.prototype._removeTile.call(this,u)},_tileReady:function(u,v,E){if(!(!this._map||E&&E.getAttribute("src")===W))return Dr.prototype._tileReady.call(this,u,v,E)}});function ii(u,v){return new fs(u,v)}var li=fs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,v){this._url=u;var E=i({},this.defaultWmsParams);for(var F in v)F in this.options||(E[F]=v[F]);v=S(this,v);var ne=v.detectRetina&&Gt.retina?2:1,xe=this.getTileSize();E.width=xe.x*ne,E.height=xe.y*ne,this.wmsParams=E},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,fs.prototype.onAdd.call(this,u)},getTileUrl:function(u){var v=this._tileCoordsToNwSe(u),E=this._crs,F=J(E.project(v[0]),E.project(v[1])),ne=F.min,xe=F.max,et=(this._wmsVersion>=1.3&&this._crs===qi?[ne.y,ne.x,xe.y,xe.x]:[ne.x,ne.y,xe.x,xe.y]).join(","),Pt=fs.prototype.getTileUrl.call(this,u);return Pt+T(this.wmsParams,Pt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+et},setParams:function(u,v){return i(this.wmsParams,u),v||this.redraw(),this}});function $i(u,v){return new li(u,v)}fs.WMS=li,ii.wms=$i;var gi=Er.extend({options:{padding:.1},initialize:function(u){S(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),gr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,v){var E=this._map.getZoomScale(v,this._zoom),F=this._map.getSize().multiplyBy(.5+this.options.padding),ne=this._map.project(this._center,v),xe=F.multiplyBy(-E).add(ne).subtract(this._map._getNewPixelOrigin(u,v));Gt.any3d?pa(this._container,xe,E):Ti(this._container,xe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,v=this._map.getSize(),E=this._map.containerPointToLayerPoint(v.multiplyBy(-u)).round();this._bounds=new Ue(E,E.add(v.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),wo=gi.extend({options:{tolerance:0},getEvents:function(){var u=gi.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");mr(u,"mousemove",this._onMouseMove,this),mr(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),mr(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,fr(this._container),$r(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var v in this._layers)u=this._layers[v],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gi.prototype._update.call(this);var u=this._bounds,v=this._container,E=u.getSize(),F=Gt.retina?2:1;Ti(v,u.min),v.width=F*E.x,v.height=F*E.y,v.style.width=E.x+"px",v.style.height=E.y+"px",Gt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){gi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var v=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var v=u._order,E=v.next,F=v.prev;E?E.prev=F:this._drawLast=F,F?F.next=E:this._drawFirst=E,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var v=u.options.dashArray.split(/[, ]+/),E=[],F,ne;for(ne=0;ne<v.length;ne++){if(F=Number(v[ne]),isNaN(F))return;E.push(F)}u.options._dashArray=E}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var v=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ue,this._redrawBounds.extend(u._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(u._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var v=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,v=this._redrawBounds;if(this._ctx.save(),v){var E=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,E.x,E.y),this._ctx.clip()}this._drawing=!0;for(var F=this._drawFirst;F;F=F.next)u=F.layer,(!v||u._pxBounds&&u._pxBounds.intersects(v))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,v){if(this._drawing){var E,F,ne,xe,et=u._parts,Pt=et.length,Rt=this._ctx;if(Pt){for(Rt.beginPath(),E=0;E<Pt;E++){for(F=0,ne=et[E].length;F<ne;F++)xe=et[E][F],Rt[F?"lineTo":"moveTo"](xe.x,xe.y);v&&Rt.closePath()}this._fillStroke(Rt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var v=u._point,E=this._ctx,F=Math.max(Math.round(u._radius),1),ne=(Math.max(Math.round(u._radiusY),1)||F)/F;ne!==1&&(E.save(),E.scale(1,ne)),E.beginPath(),E.arc(v.x,v.y/ne,F,0,Math.PI*2,!1),ne!==1&&E.restore(),this._fillStroke(E,u)}},_fillStroke:function(u,v){var E=v.options;E.fill&&(u.globalAlpha=E.fillOpacity,u.fillStyle=E.fillColor||E.color,u.fill(E.fillRule||"evenodd")),E.stroke&&E.weight!==0&&(u.setLineDash&&u.setLineDash(v.options&&v.options._dashArray||[]),u.globalAlpha=E.opacity,u.lineWidth=E.weight,u.strokeStyle=E.color,u.lineCap=E.lineCap,u.lineJoin=E.lineJoin,u.stroke())},_onClick:function(u){for(var v=this._map.mouseEventToLayerPoint(u),E,F,ne=this._drawFirst;ne;ne=ne.next)E=ne.layer,E.options.interactive&&E._containsPoint(v)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(E))&&(F=E);this._fireEvent(F?[F]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,v)}},_handleMouseOut:function(u){var v=this._hoveredLayer;v&&(qr(this._container,"leaflet-interactive"),this._fireEvent([v],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,v){if(!this._mouseHoverThrottled){for(var E,F,ne=this._drawFirst;ne;ne=ne.next)E=ne.layer,E.options.interactive&&E._containsPoint(v)&&(F=E);F!==this._hoveredLayer&&(this._handleMouseOut(u),F&&(gr(this._container,"leaflet-interactive"),this._fireEvent([F],u,"mouseover"),this._hoveredLayer=F)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,v,E){this._map._fireDOMEvent(v,E||v.type,u)},_bringToFront:function(u){var v=u._order;if(v){var E=v.next,F=v.prev;if(E)E.prev=F;else return;F?F.next=E:E&&(this._drawFirst=E),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(u)}},_bringToBack:function(u){var v=u._order;if(v){var E=v.next,F=v.prev;if(F)F.next=E;else return;E?E.prev=F:F&&(this._drawLast=F),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(u)}}});function eo(u){return Gt.canvas?new wo(u):null}var Po=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ju={_initContainer:function(){this._container=Gr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gi.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var v=u._container=Po("shape");gr(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",u._path=Po("path"),v.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var v=u._container;this._container.appendChild(v),u.options.interactive&&u.addInteractiveTarget(v)},_removePath:function(u){var v=u._container;fr(v),u.removeInteractiveTarget(v),delete this._layers[l(u)]},_updateStyle:function(u){var v=u._stroke,E=u._fill,F=u.options,ne=u._container;ne.stroked=!!F.stroke,ne.filled=!!F.fill,F.stroke?(v||(v=u._stroke=Po("stroke")),ne.appendChild(v),v.weight=F.weight+"px",v.color=F.color,v.opacity=F.opacity,F.dashArray?v.dashStyle=N(F.dashArray)?F.dashArray.join(" "):F.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=F.lineCap.replace("butt","flat"),v.joinstyle=F.lineJoin):v&&(ne.removeChild(v),u._stroke=null),F.fill?(E||(E=u._fill=Po("fill")),ne.appendChild(E),E.color=F.fillColor||F.color,E.opacity=F.fillOpacity):E&&(ne.removeChild(E),u._fill=null)},_updateCircle:function(u){var v=u._point.round(),E=Math.round(u._radius),F=Math.round(u._radiusY||E);this._setPath(u,u._empty()?"M0 0":"AL "+v.x+","+v.y+" "+E+","+F+" 0,"+65535*360)},_setPath:function(u,v){u._path.v=v},_bringToFront:function(u){da(u._container)},_bringToBack:function(u){Io(u._container)}},oa=Gt.vml?Po:ce,Zi=gi.extend({_initContainer:function(){this._container=oa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=oa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){fr(this._container),$r(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gi.prototype._update.call(this);var u=this._bounds,v=u.getSize(),E=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,E.setAttribute("width",v.x),E.setAttribute("height",v.y)),Ti(E,u.min),E.setAttribute("viewBox",[u.min.x,u.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(u){var v=u._path=oa("path");u.options.className&&gr(v,u.options.className),u.options.interactive&&gr(v,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){fr(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var v=u._path,E=u.options;v&&(E.stroke?(v.setAttribute("stroke",E.color),v.setAttribute("stroke-opacity",E.opacity),v.setAttribute("stroke-width",E.weight),v.setAttribute("stroke-linecap",E.lineCap),v.setAttribute("stroke-linejoin",E.lineJoin),E.dashArray?v.setAttribute("stroke-dasharray",E.dashArray):v.removeAttribute("stroke-dasharray"),E.dashOffset?v.setAttribute("stroke-dashoffset",E.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),E.fill?(v.setAttribute("fill",E.fillColor||E.color),v.setAttribute("fill-opacity",E.fillOpacity),v.setAttribute("fill-rule",E.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(u,v){this._setPath(u,Q(u._parts,v))},_updateCircle:function(u){var v=u._point,E=Math.max(Math.round(u._radius),1),F=Math.max(Math.round(u._radiusY),1)||E,ne="a"+E+","+F+" 0 1,0 ",xe=u._empty()?"M0 0":"M"+(v.x-E)+","+v.y+ne+E*2+",0 "+ne+-E*2+",0 ";this._setPath(u,xe)},_setPath:function(u,v){u._path.setAttribute("d",v)},_bringToFront:function(u){da(u._path)},_bringToBack:function(u){Io(u._path)}});Gt.vml&&Zi.include(ju);function pi(u){return Gt.svg||Gt.vml?new Zi(u):null}Or.include({getRenderer:function(u){var v=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var v=this._paneRenderers[u];return v===void 0&&(v=this._createRenderer({pane:u}),this._paneRenderers[u]=v),v},_createRenderer:function(u){return this.options.preferCanvas&&eo(u)||pi(u)}});var As=rs.extend({initialize:function(u,v){rs.prototype.initialize.call(this,this._boundsToLatLngs(u),v)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=se(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function to(u,v){return new As(u,v)}Zi.create=oa,Zi.pointsToPath=Q,Es.geometryToLayer=Ps,Es.coordsToLatLng=_a,Es.coordsToLatLngs=ks,Es.latLngToCoords=hs,Es.latLngsToCoords=ta,Es.getFeature=_o,Es.asFeature=Ms,Or.mergeOptions({boxZoom:!0});var sr=ei.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){mr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$r(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){fr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ha(),Nu(),this._startPoint=this._map.mouseEventToContainerPoint(u),mr(document,{contextmenu:kr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=Gr("div","leaflet-zoom-box",this._container),gr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var v=new Ue(this._point,this._startPoint),E=v.getSize();Ti(this._box,v.min),this._box.style.width=E.x+"px",this._box.style.height=E.y+"px"},_finish:function(){this._moved&&(fr(this._box),qr(this._container,"leaflet-crosshair")),mo(),Bo(),$r(document,{contextmenu:kr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var v=new ie(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Or.addInitHook("addHandler","boxZoom",sr),Or.mergeOptions({doubleClickZoom:!0});var xa=ei.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var v=this._map,E=v.getZoom(),F=v.options.zoomDelta,ne=u.originalEvent.shiftKey?E-F:E+F;v.options.doubleClickZoom==="center"?v.setZoom(ne):v.setZoomAround(u.containerPoint,ne)}});Or.addInitHook("addHandler","doubleClickZoom",xa),Or.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var La=ei.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new jo(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}gr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){qr(this._map._container,"leaflet-grab"),qr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=se(this._map.options.maxBounds);this._offsetLimit=J(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var v=this._lastTime=+new Date,E=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(E),this._times.push(v),this._prunePositions(v)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,v){return u-(u-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;u.x<v.min.x&&(u.x=this._viscousLimit(u.x,v.min.x)),u.y<v.min.y&&(u.y=this._viscousLimit(u.y,v.min.y)),u.x>v.max.x&&(u.x=this._viscousLimit(u.x,v.max.x)),u.y>v.max.y&&(u.y=this._viscousLimit(u.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,v=Math.round(u/2),E=this._initialWorldOffset,F=this._draggable._newPos.x,ne=(F-v+E)%u+v-E,xe=(F+v+E)%u-v-E,et=Math.abs(ne+E)<Math.abs(xe+E)?ne:xe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=et},_onDragEnd:function(u){var v=this._map,E=v.options,F=!E.inertia||u.noInertia||this._times.length<2;if(v.fire("dragend",u),F)v.fire("moveend");else{this._prunePositions(+new Date);var ne=this._lastPos.subtract(this._positions[0]),xe=(this._lastTime-this._times[0])/1e3,et=E.easeLinearity,Pt=ne.multiplyBy(et/xe),Rt=Pt.distanceTo([0,0]),tn=Math.min(E.inertiaMaxSpeed,Rt),Mn=Pt.multiplyBy(tn/Rt),Vn=tn/(E.inertiaDeceleration*et),Cr=Mn.multiplyBy(-Vn/2).round();!Cr.x&&!Cr.y?v.fire("moveend"):(Cr=v._limitOffset(Cr,v.options.maxBounds),$(function(){v.panBy(Cr,{duration:Vn,easeLinearity:et,noMoveStart:!0,animate:!0})}))}}});Or.addInitHook("addHandler","dragging",La),Or.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $o=ei.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),mr(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$r(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,v=document.documentElement,E=u.scrollTop||v.scrollTop,F=u.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(F,E)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var v=this._panKeys={},E=this.keyCodes,F,ne;for(F=0,ne=E.left.length;F<ne;F++)v[E.left[F]]=[-1*u,0];for(F=0,ne=E.right.length;F<ne;F++)v[E.right[F]]=[u,0];for(F=0,ne=E.down.length;F<ne;F++)v[E.down[F]]=[0,u];for(F=0,ne=E.up.length;F<ne;F++)v[E.up[F]]=[0,-1*u]},_setZoomDelta:function(u){var v=this._zoomKeys={},E=this.keyCodes,F,ne;for(F=0,ne=E.zoomIn.length;F<ne;F++)v[E.zoomIn[F]]=u;for(F=0,ne=E.zoomOut.length;F<ne;F++)v[E.zoomOut[F]]=-u},_addHooks:function(){mr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$r(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var v=u.keyCode,E=this._map,F;if(v in this._panKeys){if(!E._panAnim||!E._panAnim._inProgress)if(F=this._panKeys[v],u.shiftKey&&(F=Te(F).multiplyBy(3)),E.options.maxBounds&&(F=E._limitOffset(Te(F),E.options.maxBounds)),E.options.worldCopyJump){var ne=E.wrapLatLng(E.unproject(E.project(E.getCenter()).add(F)));E.panTo(ne)}else E.panBy(F)}else if(v in this._zoomKeys)E.setZoom(E.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&E._popup&&E._popup.options.closeOnEscapeKey)E.closePopup();else return;kr(u)}}});Or.addInitHook("addHandler","keyboard",$o),Or.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $s=ei.extend({addHooks:function(){mr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$r(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var v=pu(u),E=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var F=Math.max(E-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),F),kr(u)},_performZoom:function(){var u=this._map,v=u.getZoom(),E=this._map.options.zoomSnap||0;u._stop();var F=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ne=4*Math.log(2/(1+Math.exp(-Math.abs(F))))/Math.LN2,xe=E?Math.ceil(ne/E)*E:ne,et=u._limitZoom(v+(this._delta>0?xe:-xe))-v;this._delta=0,this._startTime=null,et&&(u.options.scrollWheelZoom==="center"?u.setZoom(v+et):u.setZoomAround(this._lastMousePos,v+et))}});Or.addInitHook("addHandler","scrollWheelZoom",$s);var Wc=600;Or.mergeOptions({tapHold:Gt.touchNative&&Gt.safari&&Gt.mobile,tapTolerance:15});var ds=ei.extend({addHooks:function(){mr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$r(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var v=u.touches[0];this._startPos=this._newPos=new K(v.clientX,v.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(mr(document,"touchend",dr),mr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),Wc),mr(document,"touchend touchcancel contextmenu",this._cancel,this),mr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){$r(document,"touchend",dr),$r(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),$r(document,"touchend touchcancel contextmenu",this._cancel,this),$r(document,"touchmove",this._onMove,this)},_onMove:function(u){var v=u.touches[0];this._newPos=new K(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,v){var E=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});E._simulated=!0,v.target.dispatchEvent(E)}});Or.addInitHook("addHandler","tapHold",ds),Or.mergeOptions({touchZoom:Gt.touch,bounceAtZoomLimits:!0});var ps=ei.extend({addHooks:function(){gr(this._map._container,"leaflet-touch-zoom"),mr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){qr(this._map._container,"leaflet-touch-zoom"),$r(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var v=this._map;if(!(!u.touches||u.touches.length!==2||v._animatingZoom||this._zooming)){var E=v.mouseEventToContainerPoint(u.touches[0]),F=v.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(E.add(F)._divideBy(2))),this._startDist=E.distanceTo(F),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),mr(document,"touchmove",this._onTouchMove,this),mr(document,"touchend touchcancel",this._onTouchEnd,this),dr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var v=this._map,E=v.mouseEventToContainerPoint(u.touches[0]),F=v.mouseEventToContainerPoint(u.touches[1]),ne=E.distanceTo(F)/this._startDist;if(this._zoom=v.getScaleZoom(ne,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&ne<1||this._zoom>v.getMaxZoom()&&ne>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,ne===1)return}else{var xe=E._add(F)._divideBy(2)._subtract(this._centerPoint);if(ne===1&&xe.x===0&&xe.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(xe),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var et=o(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(et,this,!0),dr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),$r(document,"touchmove",this._onTouchMove,this),$r(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Or.addInitHook("addHandler","touchZoom",ps),Or.BoxZoom=sr,Or.DoubleClickZoom=xa,Or.Drag=La,Or.Keyboard=$o,Or.ScrollWheelZoom=$s,Or.TapHold=ds,Or.TouchZoom=ps,n.Bounds=Ue,n.Browser=Gt,n.CRS=be,n.Canvas=wo,n.Circle=Ss,n.CircleMarker=Qs,n.Class=ae,n.Control=Jn,n.DivIcon=ia,n.DivOverlay=Us,n.DomEvent=Wl,n.DomUtil=cr,n.Draggable=jo,n.Evented=X,n.FeatureGroup=Fs,n.GeoJSON=Es,n.GridLayer=Dr,n.Handler=ei,n.Icon=Qo,n.ImageOverlay=En,n.LatLng=pe,n.LatLngBounds=ie,n.Layer=Er,n.LayerGroup=Cs,n.LineUtil=Sr,n.Map=Or,n.Marker=Yi,n.Mixin=mc,n.Path=bo,n.Point=K,n.PolyUtil=yl,n.Polygon=rs,n.Polyline=zs,n.Popup=xi,n.PosAnimation=gu,n.Projection=ni,n.Rectangle=As,n.Renderer=gi,n.SVG=Zi,n.SVGOverlay=ri,n.TileLayer=fs,n.Tooltip=wa,n.Transformation=gt,n.Util=le,n.VideoOverlay=hr,n.bind=o,n.bounds=J,n.canvas=eo,n.circle=js,n.circleMarker=_l,n.control=ji,n.divIcon=sa,n.extend=i,n.featureGroup=vu,n.geoJSON=Vt,n.geoJson=Mt,n.gridLayer=Uo,n.icon=Fu,n.imageOverlay=Un,n.latLng=we,n.latLngBounds=se,n.layerGroup=bl,n.map=Fi,n.marker=ea,n.point=Te,n.polygon=ya,n.polyline=vc,n.popup=na,n.rectangle=to,n.setOptions=S,n.stamp=l,n.svg=pi,n.svgOverlay=Kl,n.tileLayer=ii,n.tooltip=ra,n.transformation=_t,n.version=r,n.videoOverlay=wi;var Vo=window.L;n.noConflict=function(){return window.L=Vo,this},window.L=n})})(P2,P2.exports);var pn=P2.exports;const Qi=qb(pn);var c4={exports:{}};(function(t,e){(function(n,r){r(e)})(Zo,function(n){var r=typeof window<"u"?window:typeof Zo<"u"?Zo:typeof self<"u"?self:{};function i(c,f){return c(f={exports:{}},f.exports),f.exports}var s=i(function(c,f){(function(p){const y={escape:function(z){return z.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:m,mimeType:function(z){return z=m(z).toLowerCase(),function(){var B="application/font-woff",X="image/jpeg";return{woff:B,woff2:B,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:X,jpeg:X,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[z]||""},dataAsUrl:function(z,B){return`data:${B};base64,`+z},isDataUrl:function(z){return z.search(/^(data:)/)!==-1},canvasToBlob:function(z){return z.toBlob?new Promise(function(X){z.toBlob(X)}):(B=z,new Promise(function(X){const K=te(B.toDataURL().split(",")[1]);var ye=K.length;const Te=new Uint8Array(ye);for(let Ue=0;Ue<ye;Ue++)Te[Ue]=K.charCodeAt(Ue);X(new Blob([Te],{type:"image/png"}))}));var B},resolveUrl:function(z,B){const X=document.implementation.createHTMLDocument(),K=X.createElement("base"),ye=(X.head.appendChild(K),X.createElement("a"));return X.body.appendChild(ye),K.href=B,ye.href=z,ye.href},getAndEncode:function(z){let B=W.impl.urlCache.find(function(X){return X.url===z});return B||(B={url:z,promise:null},W.impl.urlCache.push(B)),B.promise===null&&(W.impl.options.cacheBust&&(z+=(/\?/.test(z)?"&":"?")+new Date().getTime()),B.promise=new Promise(function(X){const K=W.impl.options.httpTimeout,ye=new XMLHttpRequest;let Te;var Ue;function J(ie){console.error(ie),X("")}ye.onreadystatechange=function(){if(ye.readyState===4)if(ye.status!==200)Te?X(Te):J(`cannot fetch resource: ${z}, status: `+ye.status);else{const ie=new FileReader;ie.onloadend=function(){var se=ie.result.split(/,/)[1];X(se)},ie.readAsDataURL(ye.response)}},ye.ontimeout=function(){Te?X(Te):J(`timeout of ${K}ms occured while fetching resource: `+z)},ye.responseType="blob",ye.timeout=K,W.impl.options.useCredentials&&(ye.withCredentials=!0),ye.open("GET",z,!0),ye.send(),W.impl.options.imagePlaceholder&&(Ue=W.impl.options.imagePlaceholder.split(/,/))&&Ue[1]&&(Te=Ue[1])})),B.promise},uid:function(){let z=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+z++}}(),delay:function(z){return function(B){return new Promise(function(X){setTimeout(function(){X(B)},z)})}},asArray:function(z){const B=[],X=z.length;for(let K=0;K<X;K++)B.push(z[K]);return B},escapeXhtml:function(z){return z.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(z){return z!=="data:,"?new Promise(function(B,X){const K=new Image;W.impl.options.useCredentials&&(K.crossOrigin="use-credentials"),K.onload=function(){B(K)},K.onerror=X,K.src=z}):Promise.resolve()},width:function(z){var B=C(z,"border-left-width"),X=C(z,"border-right-width");return z.scrollWidth+B+X},height:function(z){var B=C(z,"border-top-width"),X=C(z,"border-bottom-width");return z.scrollHeight+B+X}};function m(z){return(z=/\.([^\.\/]*?)(\?|$)/g.exec(z))?z[1]:""}function C(z,B){const X=ee(z).getPropertyValue(B);return parseFloat(X.replace("px",""))}const S=function(){const z=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(ye,Te,Ue){return B(ye)?Promise.resolve(ye).then(X).then(function(J){let ie=Promise.resolve(ye);return J.forEach(function(se){ie=ie.then(function(pe){return K(pe,se,Te,Ue)})}),ie}):Promise.resolve(ye)},shouldProcess:B,impl:{readUrls:X,inline:K}};function B(ye){return ye.search(z)!==-1}function X(ye){const Te=[];for(var Ue;(Ue=z.exec(ye))!==null;)Te.push(Ue[1]);return Te.filter(function(J){return!y.isDataUrl(J)})}function K(ye,Te,Ue,J){return Promise.resolve(Te).then(function(ie){return Ue?y.resolveUrl(ie,Ue):ie}).then(J||y.getAndEncode).then(function(ie){return y.dataAsUrl(ie,y.mimeType(Te))}).then(function(ie){return ye.replace((se=Te,new RegExp(`(url\\(['"]?)(${y.escape(se)})(['"]?\\))`,"g")),`$1${ie}$3`);var se})}}(),T={resolveAll:function(){return O().then(function(z){return Promise.all(z.map(function(B){return B.resolve()}))}).then(function(z){return z.join(`
`)})},impl:{readAll:O}};function O(){return Promise.resolve(y.asArray(document.styleSheets)).then(function(B){const X=[];return B.forEach(function(K){if(Object.getPrototypeOf(K).hasOwnProperty("cssRules"))try{y.asArray(K.cssRules||[]).forEach(X.push.bind(X))}catch(ye){console.log("Error while reading CSS rules from "+K.href,ye.toString())}}),X}).then(function(B){return B.filter(function(X){return X.type===CSSRule.FONT_FACE_RULE}).filter(function(X){return S.shouldProcess(X.style.getPropertyValue("src"))})}).then(function(B){return B.map(z)});function z(B){return{resolve:function(){var X=(B.parentStyleSheet||{}).href;return S.inlineAll(B.cssText,X)},src:function(){return B.style.getPropertyValue("src")}}}}const D={inlineAll:function z(B){return B instanceof Element?function(X){const K=X.style.getPropertyValue("background");return K?S.inlineAll(K).then(function(ye){X.style.setProperty("background",ye,K)}).then(function(){return X}):Promise.resolve(X)}(B).then(function(){return B instanceof HTMLImageElement?N(B).inline():Promise.all(y.asArray(B.childNodes).map(function(X){return z(X)}))}):Promise.resolve(B)},impl:{newImage:N}};function N(z){return{inline:function(B){return y.isDataUrl(z.src)?Promise.resolve():Promise.resolve(z.src).then(B||y.getAndEncode).then(function(X){return y.dataAsUrl(X,y.mimeType(z.src))}).then(function(X){return new Promise(function(K){z.onload=K,z.onerror=K,z.src=X})})}}}const U={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},W={toSvg:V,toPng:function(z,B){return(B=B||{}).raster=!0,Y(z,B).then(function(X){return X.toDataURL()})},toJpeg:function(z,B){return(B=B||{}).raster=!0,Y(z,B).then(function(X){return X.toDataURL("image/jpeg",B.quality||1)})},toBlob:function(z,B){return(B=B||{}).raster=!0,Y(z,B).then(y.canvasToBlob)},toPixelData:function(z,B){return(B=B||{}).raster=!0,Y(z,B).then(function(X){return X.getContext("2d").getImageData(0,0,y.width(z),y.height(z)).data})},toCanvas:function(z,B){return(B=B||{}).raster=!0,Y(z,B||{})},impl:{fontFaces:T,images:D,util:y,inliner:S,urlCache:[],options:{}}},ee=(c.exports=W,p.getComputedStyle||window.getComputedStyle),te=p.atob||window.atob;function V(z,B){var X=B=B||{};return X.imagePlaceholder===void 0?W.impl.options.imagePlaceholder=U.imagePlaceholder:W.impl.options.imagePlaceholder=X.imagePlaceholder,X.cacheBust===void 0?W.impl.options.cacheBust=U.cacheBust:W.impl.options.cacheBust=X.cacheBust,X.useCredentials===void 0?W.impl.options.useCredentials=U.useCredentials:W.impl.options.useCredentials=X.useCredentials,Promise.resolve(z).then(function(K){return function ye(Te,Ue,J,ie,se=null){return J||!Ue||Ue(Te)?Promise.resolve(Te).then(function(pe){return pe instanceof HTMLCanvasElement?y.makeImage(pe.toDataURL()):pe.nodeName==="IFRAME"?html2canvas(pe.contentDocument.body).then(we=>we.toDataURL()).then(y.makeImage):pe.cloneNode(!1)}).then(function(pe){return function(we,be){const Ae=we.childNodes;return Ae.length===0?Promise.resolve(be):function(Ee,Je){const gt=ee(we);let _t=Promise.resolve();return Je.forEach(function(ue){_t=_t.then(function(){return ye(ue,Ue,!1,ie,gt)}).then(function(oe){oe&&Ee.appendChild(oe)})}),_t}(be,y.asArray(Ae)).then(function(){return be})}(Te,pe)}).then(function(pe){return function(we,be,Ae){return be instanceof Element?Promise.resolve().then(function(){(function(Ee,Je){const gt=ee(Ee);gt.cssText?(Je.style.cssText=gt.cssText,function(_t,ue){ue.font=_t.font,ue.fontFamily=_t.fontFamily,ue.fontFeatureSettings=_t.fontFeatureSettings,ue.fontKerning=_t.fontKerning,ue.fontSize=_t.fontSize,ue.fontStretch=_t.fontStretch,ue.fontStyle=_t.fontStyle,ue.fontVariant=_t.fontVariant,ue.fontVariantCaps=_t.fontVariantCaps,ue.fontVariantEastAsian=_t.fontVariantEastAsian,ue.fontVariantLigatures=_t.fontVariantLigatures,ue.fontVariantNumeric=_t.fontVariantNumeric,ue.fontVariationSettings=_t.fontVariationSettings,ue.fontWeight=_t.fontWeight}(gt,Je.style)):(Ae?function(_t,ue,oe,ce){const Q=oe.style,Pe=_t.style;for(var Ve of ue){var Qe=ue.getPropertyValue(Ve),ot=Pe.getPropertyValue(Ve),at=(Pe.setProperty(Ve,ce?"initial":"unset"),ue.getPropertyValue(Ve));at!==Qe?Q.setProperty(Ve,Qe):Q.removeProperty(Ve),Pe.setProperty(Ve,ot)}}(Ee,gt,Je,J):function(_t,ue,oe){const ce=function(Pe){if(ae[Pe])return ae[Pe];le||((le=document.createElement("iframe")).style.visibility="hidden",le.style.position="fixed",document.body.appendChild(le),le.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Ve=document.createElement(Pe),Qe=(le.contentWindow.document.body.appendChild(Ve),Ve.textContent=".",le.contentWindow.getComputedStyle(Ve)),ot={};return y.asArray(Qe).forEach(function(at){ot[at]=at==="width"||at==="height"?"auto":Qe.getPropertyValue(at)}),le.contentWindow.document.body.removeChild(Ve),ae[Pe]=ot}(oe.tagName),Q=oe.style;y.asArray(_t).forEach(function(Pe){var Ve=_t.getPropertyValue(Pe);(Ve!==ce[Pe]||ue&&Ve!==ue.getPropertyValue(Pe))&&Q.setProperty(Pe,Ve,_t.getPropertyPriority(Pe))})}(gt,se,Je),J&&(["inset-block","inset-block-start","inset-block-end"].forEach(_t=>Je.style.removeProperty(_t)),["left","right","top","bottom"].forEach(_t=>{Je.style.getPropertyValue(_t)&&Je.style.setProperty(_t,"0px")})))})(we,be)}).then(function(){[":before",":after"].forEach(function(Ee){(function(Je){const gt=ee(we,Je),_t=gt.getPropertyValue("content");if(_t!==""&&_t!=="none"){const ue=y.uid(),oe=be.getAttribute("class"),ce=(oe&&be.setAttribute("class",oe+" "+ue),document.createElement("style"));ce.appendChild(function(){const Q=`.${ue}:`+Je,Pe=(gt.cssText?function(){return`${gt.cssText} content: ${gt.getPropertyValue("content")};`}:function(){return y.asArray(gt).map(function(Ve){return Ve+": "+gt.getPropertyValue(Ve)+(gt.getPropertyPriority(Ve)?" !important":"")}).join("; ")+";"})();return document.createTextNode(Q+`{${Pe}}`)}()),be.appendChild(ce)}})(Ee)})}).then(function(){we instanceof HTMLTextAreaElement&&(be.innerHTML=we.value),we instanceof HTMLInputElement&&be.setAttribute("value",we.value)}).then(function(){be instanceof SVGElement&&(be.setAttribute("xmlns","http://www.w3.org/2000/svg"),be instanceof SVGRectElement&&["width","height"].forEach(function(Ee){const Je=be.getAttribute(Ee);Je&&be.style.setProperty(Ee,Je)}))}).then(function(){return be}):be}(Te,pe,ie)}):Promise.resolve()}(K,B.filter,!0,!B.raster)}).then(de).then($).then(function(K){B.bgcolor&&(K.style.backgroundColor=B.bgcolor),B.width&&(K.style.width=B.width+"px"),B.height&&(K.style.height=B.height+"px"),B.style&&Object.keys(B.style).forEach(function(Te){K.style[Te]=B.style[Te]});let ye=null;return typeof B.onclone=="function"&&(ye=B.onclone(K)),Promise.resolve(ye).then(function(){return K})}).then(function(K){return K=K,ye=B.width||y.width(z),Te=B.height||y.height(z),Promise.resolve(K).then(function(Ue){return Ue.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Ue)}).then(y.escapeXhtml).then(function(Ue){return`<foreignObject x="0" y="0" width="100%" height="100%">${Ue}</foreignObject>`}).then(function(Ue){return`<svg xmlns="http://www.w3.org/2000/svg" width="${ye}" height="${Te}">${Ue}</svg>`}).then(function(Ue){return"data:image/svg+xml;charset=utf-8,"+Ue});var ye,Te}).then(function(K){return W.impl.urlCache=[],K})}function Y(z,B){return V(z,B).then(y.makeImage).then(y.delay(0)).then(function(X){var K=typeof B.scale!="number"?1:B.scale;const ye=function(Ue,J){const ie=document.createElement("canvas");if(ie.width=(B.width||y.width(Ue))*J,ie.height=(B.height||y.height(Ue))*J,B.bgcolor){const se=ie.getContext("2d");se.fillStyle=B.bgcolor,se.fillRect(0,0,ie.width,ie.height)}return ie}(z,K),Te=ye.getContext("2d");return Te.mozImageSmoothingEnabled=!1,Te.msImageSmoothingEnabled=!1,Te.imageSmoothingEnabled=!1,X&&(Te.scale(K,K),Te.drawImage(X,0,0)),le&&(document.body.removeChild(le),le=null,H&&clearTimeout(H),H=setTimeout(()=>{H=null,ae={}},2e4)),ye})}function de(z){return T.resolveAll().then(function(B){const X=document.createElement("style");return z.appendChild(X),X.appendChild(document.createTextNode(B)),z})}function $(z){return D.inlineAll(z).then(function(){return z})}let H=null,le=null,ae={}})(r)}),o=i(function(c,f){(function(){function p(T,O,D){var N=new XMLHttpRequest;N.open("GET",T),N.responseType="blob",N.onload=function(){S(N.response,O,D)},N.onerror=function(){console.error("could not download file")},N.send()}function y(T){var O=new XMLHttpRequest;O.open("HEAD",T,!1);try{O.send()}catch{}return 200<=O.status&&299>=O.status}function m(T){try{T.dispatchEvent(new MouseEvent("click"))}catch{var O=document.createEvent("MouseEvents");O.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),T.dispatchEvent(O)}}var C=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,S=C.saveAs||(typeof window!="object"||window!==C?function(){}:"download"in HTMLAnchorElement.prototype?function(T,O,D){var N=C.URL||C.webkitURL,U=document.createElement("a");O=O||T.name||"download",U.download=O,U.rel="noopener",typeof T=="string"?(U.href=T,U.origin===location.origin?m(U):y(U.href)?p(T,O,D):m(U,U.target="_blank")):(U.href=N.createObjectURL(T),setTimeout(function(){N.revokeObjectURL(U.href)},4e4),setTimeout(function(){m(U)},0))}:"msSaveOrOpenBlob"in navigator?function(T,O,D){if(O=O||T.name||"download",typeof T!="string")navigator.msSaveOrOpenBlob(function(U,W){return W===void 0?W={autoBom:!1}:typeof W!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),W={autoBom:!W}),W.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(U.type)?new Blob(["\uFEFF",U],{type:U.type}):U}(T,D),O);else if(y(T))p(T,O,D);else{var N=document.createElement("a");N.href=T,N.target="_blank",setTimeout(function(){m(N)})}}:function(T,O,D,N){if((N=N||open("","_blank"))&&(N.document.title=N.document.body.innerText="downloading..."),typeof T=="string")return p(T,O,D);var U=T.type==="application/octet-stream",W=/constructor/i.test(C.HTMLElement)||C.safari,ee=/CriOS\/[\d]+/.test(navigator.userAgent);if((ee||U&&W)&&typeof FileReader=="object"){var te=new FileReader;te.onloadend=function(){var de=te.result;de=ee?de:de.replace(/^data:[^;]*;/,"data:attachment/file;"),N?N.location.href=de:location=de,N=null},te.readAsDataURL(T)}else{var V=C.URL||C.webkitURL,Y=V.createObjectURL(T);N?N.location=Y:location.href=Y,N=null,setTimeout(function(){V.revokeObjectURL(Y)},4e4)}});C.saveAs=S.saveAs=S,c.exports=S})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var f=c.node,p=c.error;return console.warn("Map node is very big "+f.scrollWidth+"x"+f.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y={};for(var m in this.options)p.hasOwnProperty(m)?y[m]=p[m]:y[m]=this.options[m];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(y)}).then(function(C){return c._setElementsVisible(!0),c._toCanvas(C,y)}).then(function(C){return f==="image"?c._canvasToImage(C,y):f==="canvas"?C:c._canvasToBlob(C,y)}).then(function(C){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),C}).catch(function(C){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:C}),Promise.reject(C)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var y=c._map._container.querySelectorAll(p),m=!0,C=!1,S=void 0;try{for(var T,O=y[Symbol.iterator]();!(m=(T=O.next()).done);m=!0)T.value.style.opacity=f===!1?0:1}catch(D){C=!0,S=D}finally{try{!m&&O.return&&O.return()}finally{if(C)throw S}}})},_canvasToImage:function(c,f){var p=f.mimeType,y=c.toDataURL(p);return y.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(y)},_canvasToBlob:function(c,f){var p=f.mimeType;return new Promise(function(y,m){c.toBlob(function(C){y(C)},p)})},_toCanvas:function(c,f){var p=f.captionOffset,y=f.caption,m=f.captionFontSize,C=f.captionFont,S=f.captionColor,T=f.captionBgColor,O=this._node,D=O.screenHeight,N=O.screenWidth,U=document.createElement("canvas");U.width=N,U.height=D;for(var W=U.getContext("2d"),ee=W.createImageData(N,D),te=0;te<c.length;++te)ee.data[te]=c[te];W.putImageData(ee,0,0),ee=null;var V=document.createElement("canvas"),Y=V.getContext("2d"),de=0,$=0,H=D,le=N;if(this.options.cropImageByInnerWH===!0){for(var ae=[],z=0,B=0;B<D;++B){z=0;for(var X=0;X<N;++X)c[4*B*N+4*X+4]===0&&z++;z===N&&ae.push(B)}var K=this._getMinAndMaxOnValuesBreak(ae);de=K.min;for(var ye=N,Te=K.max,Ue=[],J=0,ie=$;ie<ye;++ie){J=0;for(var se=0;se<D;++se)c[4*se*N+4*ie+4]===0&&J++;J===D&&Ue.push(ie)}var pe=this._getMinAndMaxOnValuesBreak(Ue);$=pe.min,ye=pe.max,($===0&&ye===0||ye===null)&&(ye=N),(de===0&&Te===0||Te===null)&&(Te=D),this.options.debugMode===!0&&(console.log("emptyYLine",ae),console.log("minMaxY",K),console.log("emptyXLine",Ue),console.log("minMaxX",pe),console.log("debugX",{}),console.log("debugY",{})),de===0&&Te===D&&$===0&&ye===N||(de+=this.options.onCropBorderSize,Te-=this.options.onCropBorderSize,$+=this.options.onCropBorderSize,ye-=this.options.onCropBorderSize),H=Te-de,le=ye-$,V.width=le,V.height=H}else V.width=le,V.height=H;var we=null;return y&&(we=typeof y=="function"?y.call(this):y),we!==null&&(V.height=V.height+(p+m+p),Y.beginPath(),Y.rect(0,0,V.width,V.height),Y.fillStyle=T,Y.fill(),Y.save()),Y.drawImage(U,$,de,le,H,0,0,le,H),we!==null&&(Y.font=m+"px "+C,Y.fillStyle=S,Y.fillText(we,p,H+p+m)),Promise.resolve(V)},_getMinAndMaxOnValuesBreak:function(c){for(var f=0,p=0,y=!1,m=1;m<c.length;m++){if(c[m]-1!==c[m-1]){p=c[m],y=!0;break}f=c[m]}return y===!1&&c[0]>1?(f=0,p=c[0]):y===!1&&(f=c[c.length-1]||0,p=null),{min:f,max:p}},_getPixelData:function(c){var f=this,p=c.domtoimageOptions,y=p===void 0?{}:p;return this._getPixelDataOfNormalMap(y).catch(function(m){return console.warn("May be map size very big on that zoom level, we have error:",m.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),f._getPixelDataOfBigMap(y)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=this._map.getContainer();return this._node={node:f,screenHeight:f.scrollHeight,screenWidth:f.scrollWidth},s.toPixelData(f,c)},_getPixelDataOfBigMap:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),y=this._map.getPane("mapPane");y.style.width=2*p.clientWidth+"px",y.style.height=2*p.clientHeight+"px",y.style.overflow="hidden";var m=function(){y.style.width="initial",y.style.height="initial",y.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,f).then(function(C){return m(),C}).catch(function(C){return m(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:y,error:C,domtoimageOptions:f}):Promise.reject(C)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,f=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),f.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(f){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(f,p+".png")}).catch(function(f){c._map.fire("simpleMapScreenshoter.error",{e:f})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(f){var p=setInterval(function(){c._interaction||(f(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(c4,c4.exports);var rl=63710088e-1,wS={centimeters:rl*100,centimetres:rl*100,degrees:360/(2*Math.PI),feet:rl*3.28084,inches:rl*39.37,kilometers:rl/1e3,kilometres:rl/1e3,meters:rl,metres:rl,miles:rl/1609.344,millimeters:rl*1e3,millimetres:rl*1e3,nauticalmiles:rl/1852,radians:1,yards:rl*1.0936};function Vg(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function uv(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!h4(t[0])||!h4(t[1]))throw new Error("coordinates must contain numbers");return Vg({type:"Point",coordinates:t},e,n)}function Hh(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Vg({type:"Polygon",coordinates:t},e,n)}function Hg(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return Vg({type:"LineString",coordinates:t},e,n)}function $F(t,e="kilometers"){const n=wS[e];if(!n)throw new Error(e+" units is invalid");return t*n}function VF(t,e="kilometers"){const n=wS[e];if(!n)throw new Error(e+" units is invalid");return t/n}function k2(t){return t%(2*Math.PI)*180/Math.PI}function nc(t){return t%360*Math.PI/180}function h4(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function f4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function HF(t){return t.type==="Feature"?t.geometry:t}function xS(t,e,n={}){if(n.final===!0)return WF(t,e);const r=f4(t),i=f4(e),s=nc(r[0]),o=nc(i[0]),a=nc(r[1]),l=nc(i[1]),c=Math.sin(o-s)*Math.cos(l),f=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return k2(Math.atan2(c,f))}function WF(t,e){let n=xS(e,t);return n=(n+180)%360,n}function GF(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function qF(t,e,n,r={}){const i=GF(t),s=nc(i[0]),o=nc(i[1]),a=nc(n),l=VF(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),f=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=k2(f),y=k2(c);return uv([p,y],r.properties)}function d4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function LS(t,e,n={}){var r=d4(t),i=d4(e),s=nc(i[1]-r[1]),o=nc(i[0]-r[0]),a=nc(r[1]),l=nc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return $F(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}function YF(t,e,n={}){const i=HF(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=xS(i[o],i[o-1])-180;return qF(i[o],a,l,n)}else return uv(i[o])}else s+=LS(i[o],i[o+1],n);return uv(i[i.length-1])}var p4=YF;function ZF(t,e){var n,r,i,s,o,a,l,c,f,p,y=0,m=t.type==="FeatureCollection",C=t.type==="Feature",S=m?t.features.length:1;for(n=0;n<S;n++){for(a=m?t.features[n].geometry:C?t.geometry:t,c=m?t.features[n].properties:C?t.properties:{},f=m?t.features[n].bbox:C?t.bbox:void 0,p=m?t.features[n].id:C?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,y,c,f,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,y,c,f,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],y,c,f,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function KF(t,e,n){var r=n;return ZF(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function CS(t){return KF(t,(e,n)=>e+XF(n),0)}function XF(t){let e=0,n;switch(t.type){case"Polygon":return g4(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=g4(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function g4(t){let e=0;if(t&&t.length>0){e+=Math.abs(m4(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(m4(t[n]))}return e}var JF=rl*rl/2,d1=Math.PI/180;function m4(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*d1,l=s[1]*d1,c=o[0]*d1;n+=(c-a)*Math.sin(l),r++}return n*JF}var Tp=CS;function SS(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,f=0,p=0,y,m=t.type,C=m==="FeatureCollection",S=m==="Feature",T=C?t.features.length:1,O=0;O<T;O++){c=C?t.features[O].geometry:S?t.geometry:t,y=c?c.type==="GeometryCollection":!1,a=y?c.geometries.length:1;for(var D=0;D<a;D++){var N=0,U=0;if(o=y?c.geometries[D]:c,o!==null){l=o.coordinates;var W=o.type;switch(f=W==="Polygon"||W==="MultiPolygon"?1:0,W){case null:break;case"Point":if(e(l,p,O,N,U)===!1)return!1;p++,N++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,O,N,U)===!1)return!1;p++,W==="MultiPoint"&&N++}W==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(e(l[r][i],p,O,N,U)===!1)return!1;p++}W==="MultiLineString"&&N++,W==="Polygon"&&U++}W==="Polygon"&&N++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(U=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-f;s++){if(e(l[r][i][s],p,O,N,U)===!1)return!1;p++}U++}N++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(SS(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function QF(t,e={}){let n=0,r=0,i=0;return SS(t,function(s){n+=s[0],r+=s[1],i++}),uv([n/i,r/i],e.properties)}var mg=QF;function ES(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,f=0,p=0,y,m=t.type,C=m==="FeatureCollection",S=m==="Feature",T=C?t.features.length:1,O=0;O<T;O++){c=C?t.features[O].geometry:S?t.geometry:t,y=c?c.type==="GeometryCollection":!1,a=y?c.geometries.length:1;for(var D=0;D<a;D++){var N=0,U=0;if(o=y?c.geometries[D]:c,o!==null){l=o.coordinates;var W=o.type;switch(f=0,W){case null:break;case"Point":if(e(l,p,O,N,U)===!1)return!1;p++,N++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,O,N,U)===!1)return!1;p++,W==="MultiPoint"&&N++}W==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(e(l[r][i],p,O,N,U)===!1)return!1;p++}W==="MultiLineString"&&N++,W==="Polygon"&&U++}W==="Polygon"&&N++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(U=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-f;s++){if(e(l[r][i][s],p,O,N,U)===!1)return!1;p++}U++}N++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(ES(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function e9(t,e){var n,r,i,s,o,a,l,c,f,p,y=0,m=t.type==="FeatureCollection",C=t.type==="Feature",S=m?t.features.length:1;for(n=0;n<S;n++){for(a=m?t.features[n].geometry:C?t.geometry:t,c=m?t.features[n].properties:C?t.properties:{},f=m?t.features[n].bbox:C?t.bbox:void 0,p=m?t.features[n].id:C?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,y,c,f,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,y,c,f,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],y,c,f,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function t9(t,e){e9(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Vg(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var f=n.coordinates[c],p={type:l,coordinates:f};if(e(Vg(p,i),r,c)===!1)return!1}})}function n9(t,e){t9(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,f=0;if(ES(n,function(p,y,m,C,S){if(a===void 0||r>l||C>c||S>f){a=p,l=r,c=C,f=S,s=0;return}var T=Hg([a,p],n.properties);if(e(T,r,i,S,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function r9(t,e,n){var r=n,i=!1;return n9(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function cv(t,e={}){return r9(t,(n,r)=>{const i=r.geometry.coordinates;return n+LS(i[0],i[1],e)},0)}var i9=cv;class Ol extends Qi.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});nt(this,"properties");nt(this,"_originalStyle");nt(this,"_path");this.properties={type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}},this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(O=>[O.lng,O.lat]);l.push(l[0]);const c=Hh([l]),f=CS(c),p=cv(Hg([...l]),{units:"meters"}),y=mg(c),m=Qi.latLng(y.geometry.coordinates[1],y.geometry.coordinates[0]),C=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",S=((i=this.properties)==null?void 0:i.category)||"forages",T=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(O=>({lat:O.lat,lng:O.lng})),surface:f,perimeter:p,center:{lat:m.lat,lng:m.lng},vertices:a.length,category:S,accessLevel:T,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:C}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}}setName(n){this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})}getName(){var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""}setLatLngs(n){return super.setLatLngs(n),this.updateProperties(),this}getMidPoints(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Qi.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r}moveVertex(n,r){const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Qi.Polygon.prototype.setLatLngs.call(this,[i]))}addVertex(n,r){const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Qi.Polygon.prototype.setLatLngs.call(this,[i]))}move(n){const i=this.getLatLngs()[0].map(s=>Qi.latLng(s.lat+n.lat,s.lng+n.lng));return Qi.Polygon.prototype.setLatLngs.call(this,[i]),this}getCenter(){const n=this.getLatLngs()[0];if(!n||n.length===0)return new Qi.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Qi.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=Hh([i]),o=mg(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calculé invalide");return Qi.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Qi.LatLng(0,0)):new Qi.LatLng(i/o,s/o)}}getSegmentLengths(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r}highlight(){if(!this._originalStyle){this._originalStyle={...this.options};const n=(this._originalStyle.weight||3)*1.5;this.setStyle({weight:n,opacity:1,fillOpacity:Math.min((this._originalStyle.fillOpacity||.2)+.1,.4),className:"polygon-hover-effect"});try{this._path&&(this._path.style.filter="drop-shadow(0 0 3px rgba(43, 100, 81, 0.7))",this._path.style.transition="all 0.2s ease-in-out")}catch(r){console.warn("Impossible d'appliquer l'effet de lueur au polygone",r)}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch(n){console.warn("Impossible de restaurer le style du polygone",n)}}}}class ys extends Qi.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});nt(this,"properties");nt(this,"cachedProperties",{});nt(this,"needsUpdate",!0);nt(this,"_originalStyle");nt(this,"_path");nt(this,"updateProperties",()=>{var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=Hg(r),f=cv(c,{units:"meters"});let p;if(n.length===2)p=Qi.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const S=p4(c,f/2,{units:"meters"});p=Qi.latLng(S.geometry.coordinates[1],S.geometry.coordinates[0])}const y=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",m=((o=this.properties)==null?void 0:o.category)||"forages",C=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:f,coordinates:n.map(S=>({lat:S.lat,lng:S.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,category:m,accessLevel:C,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:y}},this.cachedProperties.length=f,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}});nt(this,"setName",n=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})});nt(this,"getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""});nt(this,"getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push(Qi.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r});nt(this,"getMidPointAt",n=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Qi.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)});nt(this,"moveVertex",(n,r,i=!1)=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())});nt(this,"getSegmentLengths",()=>{const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return r});nt(this,"getSegmentLengthAt",n=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)});nt(this,"getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r});nt(this,"getLengthToVertex",n=>{const r=this.getLatLngs();if(n<0||n>=r.length||r.length<2)return 0;let i=0;for(let s=0;s<n;s++)i+=r[s].distanceTo(r[s+1]);return i});this.properties={type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}},this.updateProperties(),this.on("add",()=>{this.updateProperties()}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}highlight(){var n,r;if(!this._originalStyle){this._originalStyle={...this.options};const i=(((n=this._originalStyle)==null?void 0:n.weight)||3)*1.75,s=((r=this._originalStyle)==null?void 0:r.color)||"#2b6451";this.setStyle({weight:i,opacity:1,className:"line-hover-effect"});try{this._path&&(this._path.style.filter=`drop-shadow(0 0 4px ${s})`,this._path.style.transition="all 0.2s ease-in-out")}catch{console.warn("Impossible d'appliquer l'effet de lueur à la ligne")}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch{console.warn("Impossible de retirer l'effet de lueur de la ligne")}}}isPointNearLine(n,r=10){if(!this._map)return!1;const i=this.getLatLngs();if(i.length<2)return!1;for(let s=0;s<i.length-1;s++){const o=this._map.latLngToLayerPoint(i[s]),a=this._map.latLngToLayerPoint(i[s+1]),l=this._map.latLngToLayerPoint(n);if(Qi.LineUtil.pointToSegmentDistance(l,o,a)<=r)return!0}return!1}invalidateCache(){this.needsUpdate=!0,this.cachedProperties={}}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}addVertex(n,r,i=!1){const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Qi.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties={},i&&this.updateProperties())}move(n,r=!0){this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Qi.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this}getCenter(){if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Qi.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=Hg(r),s=cv(i,{units:"meters"}),o=p4(i,s/2,{units:"meters"}),a=Qi.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new Qi.LatLng(i,s);return this.cachedProperties.center=o,o}}}var Rr=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(Rr||{});function v4(t){if(!t)return Rr.PRIVATE;switch(t.toLowerCase()){case"private":return Rr.PRIVATE;case"company":return Rr.COMPANY;case"employee":return Rr.EMPLOYEE;case"visitor":return Rr.VISITOR;default:return console.warn(`Niveau d'accès inconnu: ${t}, utilisation de PRIVATE par défaut`),Rr.PRIVATE}}function s9(t){switch(t){case Rr.PRIVATE:return"Privé";case Rr.COMPANY:return"Entreprise";case Rr.EMPLOYEE:return"Salariés";case Rr.VISITOR:return"Visiteurs";default:return"Inconnu"}}function o9(t){var n,r,i;const e=po();return t!==void 0?t:e.isAdmin?null:e.isEntreprise&&e.user?e.user.id:e.isSalarie&&((n=e.user)!=null&&n.enterprise_id)||e.isVisiteur&&((r=e.user)!=null&&r.enterprise_id)||!e.isAdmin&&((i=e.user)!=null&&i.enterprise_id)?e.user.enterprise_id:null}function y4(t,e){const n=t.filter(r=>r.columnId===e);return n.length>0?Math.max(...n.map(r=>r.order))+1:0}function a9(t){return{id:t.id,text:t.text,createdAt:t.created_at,userId:t.user,userName:t.user_name,userRole:t.user_role}}function b4(t){return{id:t.id,url:t.image,caption:t.caption,createdAt:t.created_at}}function Cc(){return new Date().toISOString()}const yh=pp("notes",()=>{const t=kt([]),e=kt([]),n=ir(()=>ee=>t.value.find(te=>te.id===ee)),r=ir(()=>ee=>{const te=t.value.find(V=>V.id===ee);return te?te.color:"#6B7280"}),i=ir(()=>t.value.find(ee=>ee.isDefault)||t.value[0]),s=ir(()=>[...t.value].sort((ee,te)=>ee.order-te.order)),o=ir(()=>ee=>e.value.filter(te=>te.columnId===ee).sort((te,V)=>te.order-V.order)),a=ir(()=>e.value),l=ir(()=>ee=>a.value.filter(te=>te.columnId===ee).sort((te,V)=>te.order-V.order));async function c(){try{const ee=[{id:"1",title:"Idées",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:"À faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Terminées",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=ee}catch(ee){throw console.error("[NotesStore][loadColumns] Erreur:",ee),ee}}async function f(ee){}async function p(ee,te){try{const V=t.value.findIndex(Y=>Y.id===ee);V!==-1&&(t.value[V]={...t.value[V],...te})}catch(V){throw console.error("[NotesStore][updateColumn] Erreur:",V),V}}function y(ee){if(!ee.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const te=Cc(),V=y4(e.value,ee.columnId||""),Y=v4(ee.access_level),de=o9(ee.enterprise_id),$={...ee,id:ee.id,order:V,accessLevel:Y,createdAt:ee.created_at||te,updatedAt:ee.updated_at||te,comments:[],photos:[],enterprise_id:de};return e.value.push($),ee.id}function m(ee,te){try{const V=e.value.findIndex(Y=>Y.id===ee);V!==-1&&(te.color&&(te.style={...e.value[V].style,color:te.color,fillColor:te.color}),te.access_level&&(te.accessLevel=v4(te.access_level),delete te.access_level),e.value[V]={...e.value[V],...te})}catch(V){throw console.error("[NotesStore][updateNote] Erreur:",V),V}}function C(ee){e.value.findIndex(V=>V.id===ee)!==-1?e.value=e.value.filter(V=>V.id!==ee):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",ee)}function S(ee,te){const V=e.value.findIndex(Y=>Y.id===ee);if(V!==-1){const Y=e.value[V];if(Y.columnId!==te){const $=y4(e.value,te),H={...Y,columnId:te,order:$,updatedAt:Cc()};e.value[V]=H}else e.value[V]={...e.value[V],updatedAt:Cc()}}}function T(ee,te){te.forEach((V,Y)=>{const de=e.value.findIndex($=>$.id===V&&$.columnId===ee);de!==-1&&(e.value[de]={...e.value[de],order:Y,updatedAt:Cc()})})}async function O(ee,te){try{const V=po();if(!V.user)throw new Error("Vous devez être connecté pour ajouter un commentaire");if(!V.isEntreprise&&!V.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(z=>z.id===ee))throw new Error(`La note avec l'ID ${ee} n'existe pas`);const $=(await Yo.addComment(ee,te)).data,H=e.value.findIndex(z=>z.id===ee);if(H===-1)return;const le=e.value[H];le.comments||(le.comments=[]);const ae=a9($);return le.comments.push(ae),le.updatedAt=Cc(),e.value[H]={...le},ae.id}catch(V){throw console.error("Erreur lors de l'ajout du commentaire:",V),V}}async function D(ee,te){try{const V=e.value.findIndex($=>$.id===ee);if(V===-1)throw new Error(`La note avec l'ID ${ee} n'existe pas`);const Y=e.value[V];if(!Y.comments||Y.comments.length===0)throw new Error("Aucun commentaire trouvé pour cette note");if(!Y.comments.some($=>$.id===te))throw new Error(`Le commentaire avec l'ID ${te} n'existe pas`);await Yo.deleteComment(ee,te),Y.comments=Y.comments.filter($=>$.id!==te),Y.updatedAt=Cc(),e.value[V]={...Y}}catch(V){throw console.error("Erreur lors de la suppression du commentaire:",V),V}}async function N(ee,te){try{if(te.id&&te.image){const V=e.value.findIndex($=>$.id===ee);if(V===-1)return;const Y=e.value[V];Y.photos||(Y.photos=[]);const de=b4(te);return Y.photos.push(de),Y.updatedAt=Cc(),e.value[V]={...Y},de.id}else{const V=new FormData;V.append("image",te.url),te.caption&&V.append("caption",te.caption);const de=(await Yo.addPhoto(ee,V)).data,$=e.value.findIndex(ae=>ae.id===ee);if($===-1)return;const H=e.value[$];H.photos||(H.photos=[]);const le=b4(de);return H.photos.push(le),H.updatedAt=Cc(),e.value[$]={...H},le.id}}catch(V){throw console.error("Erreur lors de l'ajout de la photo:",V),V}}async function U(ee,te){try{await Yo.deletePhoto(ee,te);const V=e.value.findIndex($=>$.id===ee);if(V===-1){console.error("[NotesStore] Note non trouvée pour la suppression de la photo");return}e.value[V].photos||(e.value[V].photos=[]);const Y=e.value[V],de=(Y.photos||[]).filter($=>$.id!==te);e.value[V]={...Y,photos:de,updatedAt:Cc()}}catch(V){throw console.error("Erreur lors de la suppression de la photo:",V),V}}async function W(ee,te,V){try{await Yo.updatePhoto(ee,te,{caption:V});const Y=e.value.findIndex(H=>H.id===ee);if(Y===-1||!e.value[Y].photos)return;const de=e.value[Y],$=de.photos.findIndex(H=>H.id===te);if($===-1)return;de.photos[$].caption=V,de.updatedAt=Cc(),e.value[Y]={...de}}catch(Y){throw console.error("Erreur lors de la mise à jour de la légende:",Y),Y}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getDefaultColumn:i,getSortedColumns:s,getNotesByColumn:o,getAccessibleNotes:a,getAccessibleNotesByColumn:l,getAccessLevelLabel:s9,loadColumns:c,addColumn:f,updateColumn:p,addNote:y,updateNote:m,removeNote:C,moveNote:S,reorderNotes:T,addComment:O,removeComment:D,addPhoto:N,removePhoto:U,updatePhoto:W}});class il extends pn.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=pn.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          position: relative;
          transition: filter 0.2s ease-in-out;
        }
        .geo-note-marker.hover {
          filter: brightness(1.2) drop-shadow(0 0 4px rgba(59, 130, 246, 0.7));
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});nt(this,"properties");nt(this,"_planSaved",!1);nt(this,"_isMoving",!1);nt(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Rr.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:r.enterprise_id||null},this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;this._protectFromZoomAnimationErrors(c),c.on("zoomend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),c.on("moveend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),setTimeout(()=>this.forceVisible(),100)}}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,f=this._dbId||this.properties.id;c===f&&(this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,f=this._dbId||this.properties.id;if(c===f){if(this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style,updatedAt:new Date().toISOString()},this.setNoteStyle(l.detail.properties.style),f)try{const y=yh().notes.find(m=>m.id===parseInt(String(f)));y&&(this.properties.comments=y.comments||[],this.properties.photos=y.photos||[],this.properties.createdAt=y.createdAt,this.properties.updatedAt=y.updatedAt)}catch(p){console.error("[GeoNote] Erreur lors de la récupération de la note depuis le store:",p)}this.getPopup()&&this.setPopupContent(this.createPopupContent())}}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}forceVisible(){try{const n=this.getElement();if(!n){console.warn("[GeoNote][forceVisible] Élément DOM introuvable, recréation de l'icône"),this.recreateIcon();return}n.style.display="block",n.style.visibility="visible",n.style.opacity="1";const r=n.querySelector(".geo-note-marker");r&&(r.style.display="flex",r.style.visibility="visible",r.style.opacity="1");const i=n.querySelector("svg");i&&(i.style.display="block",i.style.visibility="visible",i.style.opacity="1"),n.offsetHeight}catch(n){console.error("[GeoNote][forceVisible] Erreur:",n),this.recreateIcon()}}recreateIcon(){var n,r;try{const i=this.getLatLng(),o=`
        <div class="geo-note-marker" style="display: flex; visibility: visible; opacity: 1;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="display: block; visibility: visible; opacity: 1;">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${((n=this.properties.style)==null?void 0:n.fillColor)||((r=this.properties.style)==null?void 0:r.color)||"#2b6451"}" />
          </svg>
        </div>
      `,a=pn.divIcon({html:o,className:"geo-note-icon forced-visible",iconSize:[24,36],iconAnchor:[12,36]});if(this.setIcon(a),this._map){const l=this._map.latLngToLayerPoint(i),c=this.getElement();c&&pn.DomUtil.setPosition(c,l)}if(!document.getElementById("geo-note-forced-style")){const l=document.createElement("style");l.id="geo-note-forced-style",l.textContent=`
          .forced-visible {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            pointer-events: auto !important;
          }
          .forced-visible * {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
          .geo-note-marker {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
        `,document.head.appendChild(l)}}catch(i){console.error("[GeoNote][recreateIcon] Erreur lors de la recréation de l'icône:",i)}}highlight(){const n=this.getElement();if(n){this.forceVisible(),n.style.visibility="visible",n.style.display="",n.style.opacity="1",n.style.zIndex="1000";const r=n.querySelector(".geo-note-marker");r&&r.classList.add("hover")}}unhighlight(){const n=this.getElement();if(n){this.forceVisible();const r=n.querySelector(".geo-note-marker");r&&r.classList.remove("hover"),n.style.zIndex="",n.style.visibility="visible",n.style.display="",n.style.opacity="1"}}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Idées",2:"À faire",3:"En cours",4:"Terminées",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case Rr.PRIVATE:return"Privé";case Rr.COMPANY:return"Entreprise";case Rr.EMPLOYEE:return"Salariés";case Rr.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Rr.PRIVATE:return"#9CA3AF";case Rr.COMPANY:return"#EF4444";case Rr.EMPLOYEE:return"#F59E0B";case Rr.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){pn.DomEvent.stopPropagation(n),this.editNote()}editNote(){const n=this._dbId,r=this._leaflet_id;if(n)try{const a=yh().notes.find(l=>l.id===parseInt(String(n)));a&&(this.properties.name=a.title,this.properties.description=a.description,this.properties.columnId=a.columnId,this.properties.accessLevel=a.accessLevel,this.properties.style={...a.style},this.properties.comments=a.comments||[],this.properties.photos=a.photos||[],this.properties.createdAt=a.createdAt,this.properties.updatedAt=a.updatedAt)}catch(o){console.error("[GeoNote] Erreur lors de la récupération de la note depuis le store:",o)}const i={id:r,backendId:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:this.properties.comments||[],photos:this.properties.photos||[],createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:this.properties.updatedAt||new Date().toISOString()},s=new CustomEvent("geonote:edit",{detail:{note:i,source:this,backendId:n}});window.dispatchEvent(s),this.fire("note:edit",{note:i,source:this,backendId:n})}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Rr.PRIVATE);const n=this.properties.style||{};let r=n.color||n.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a)}}r||(r="#2b6451");const i=n.radius||12;this.properties.style={...n,color:r,weight:n.weight||2,fillColor:r,fillOpacity:n.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category}}setNoteStyle(n){const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451",s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?l.setAttribute("fill",i):this._updateIconWithNewColor(i)}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise à jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=n._accessLevel||n.accessLevel||this.properties.accessLevel,a=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o),a&&this.properties.category!==a&&(this.properties.category=a),this.refreshIconStyle()}refreshIconStyle(){const n=this.getElement();if(n&&(n.style.display="none",n.offsetHeight,n.style.display="",pn.DomUtil.setTransform(n,new pn.Point(0,0),1),this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());pn.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s"}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise à jour de la position:",r)}}_protectFromZoomAnimationErrors(n){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignorée: propriétés manquantes");return}typeof this.updatePositionDuringZoom=="function"?this.updatePositionDuringZoom(i):r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());pn.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la récupération:",o)}}},n.on("zoomanim",i=>{this.updatePositionDuringZoom(i)})}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(n){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${n}" />
          </svg>
        </div>
      `,o=pn.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100)}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise à jour de l'icône:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,f;this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style,i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||this.properties.accessLevel||Rr.PRIVATE,s=((f=n.style)==null?void 0:f.category)||n.category||this.properties.category||"forages",o=n.columnId||this.properties.columnId||"1",a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a)}static fromBackendData(n){var l,c,f,p,y,m,C,S;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const T=n.location.coordinates;r=[T[1],T[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les données de la note ne contiennent pas de position valide");const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||Rr.PRIVATE,s=((f=n.style)==null?void 0:f.category)||n.category||"forages";n.accessLevel=i,n.category=s;const o=n.columnId||"1",a=new il(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(y=n.style)==null?void 0:y.weight,fillColor:(m=n.style)==null?void 0:m.fillColor,fillOpacity:(C=n.style)==null?void 0:C.fillOpacity,radius:(S=n.style)==null?void 0:S.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),a}async saveNote(n){var r,i,s;if(this._planSaved)return this._dbId||0;try{this.updateProperties();let o=((r=this.properties.style)==null?void 0:r.color)||"#2b6451";if(o.startsWith("rgb")){const f=(i=this.getElement())==null?void 0:i.querySelector(".geo-note-marker svg path");if(f){const p=f.getAttribute("fill");p&&(o=p)}}const a={...this.properties.style,color:o,fillColor:o,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},l={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:a,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};if(this.properties.enterprise_id)l.enterprise_id=this.properties.enterprise_id;else{const f=po();!f.isAdmin&&((s=f.user)!=null&&s.enterprise_id)&&(l.enterprise_id=f.user.enterprise_id)}n&&(l.plan=n);let c;return this._dbId?c=(await Yo.updateNote(this._dbId,l)).data:(c=(await Yo.createNote(l)).data,this._dbId=c.id,yh().addNote({...c,id:c.id,columnId:c.column,accessLevel:c.access_level})),this._planSaved=!0,c.id}catch(o){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",o),ul().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?this.saveNote(parseInt(n)):this.saveNote();const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}updatePositionDuringZoom(n){try{if(!this._map||!n.center||n.zoom===void 0)return;const r=this.getElement();if(!r)return;r.style.opacity="0",r.style.transition="opacity 0.01s"}catch(r){console.warn("[GeoNote][updatePositionDuringZoom] Erreur lors de la gestion de l'animation de zoom:",r)}}updatePosition(){try{if(!this._map)return;const n=this.getElement();if(!n){console.warn("[GeoNote][updatePosition] Élément DOM introuvable, recréation de l'icône"),this.recreateIcon();return}const r=this._map.latLngToLayerPoint(this.getLatLng());pn.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s",n.style.visibility="visible",n.style.display="block";const i=n.getBoundingClientRect();i.width===0||i.height===0?(console.warn("[GeoNote][updatePosition] L'élément a une taille nulle, recréation de l'icône"),this.recreateIcon()):setTimeout(()=>this.forceVisible(),50)}catch(n){console.warn("[GeoNote][updatePosition] Erreur lors de la mise à jour de la position:",n),this.recreateIcon()}}openInGoogleMaps(){const n=ul(),r=this.getLatLng();if(!r||isNaN(r.lat)||isNaN(r.lng)){n.warning("La position de la note est invalide ou manquante");return}const i=`https://www.google.com/maps/dir/?api=1&destination=${r.lat},${r.lng}`;window.open(i,"_blank")}}function l9(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function u9(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function _4(t){var e,n,r,i,s,o,a,l,c,f,p,y,m,C,S,T,O,D,N;if(((e=t.properties)==null?void 0:e.type)==="Note"){const U=t.getLatLng();return{type_forme:"Note",data:{points:[[U.lng,U.lat]],style:{color:((n=t.properties.style)==null?void 0:n.color)||"#2b6451",weight:((r=t.properties.style)==null?void 0:r.weight)||3,opacity:((i=t.properties.style)==null?void 0:i.opacity)||1,fillColor:((s=t.properties.style)==null?void 0:s.fillColor)||"#2b6451",fillOpacity:((o=t.properties.style)==null?void 0:o.fillOpacity)||.2,name:((a=t.properties.style)==null?void 0:a.name)||""}}}}if(t instanceof Ol||((l=t.properties)==null?void 0:l.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(ee=>[ee.lng,ee.lat]),style:{color:((c=t.properties.style)==null?void 0:c.color)||"#2b6451",weight:((f=t.properties.style)==null?void 0:f.weight)||3,opacity:((p=t.properties.style)==null?void 0:p.opacity)||1,fillColor:((y=t.properties.style)==null?void 0:y.fillColor)||"#2b6451",fillOpacity:((m=t.properties.style)==null?void 0:m.fillOpacity)||.2,name:((C=t.properties.style)==null?void 0:C.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof ys||((S=t.properties)==null?void 0:S.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(ee=>[ee.lng,ee.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((T=t.properties.style)==null?void 0:T.color)||"#2b6451",weight:((O=t.properties.style)==null?void 0:O.weight)||3,opacity:((D=t.properties.style)==null?void 0:D.opacity)||1,name:((N=t.properties.style)==null?void 0:N.name)||""}}};throw new Error("Type de forme non reconnu")}function c9(t){var e,n,r,i,s,o,a,l,c,f,p,y,m,C,S,T,O;switch(t.type_forme){case"Polygon":{const D=t.data;if(!l9(D))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const N=D.points.map(ee=>Qi.latLng(ee[1],ee[0])),U=((e=D.style)==null?void 0:e._accessLevel)||((n=D.style)==null?void 0:n.accessLevel)||D.accessLevel||"visitor";D.accessLevel=U;const W=new Ol([N],{color:((r=D.style)==null?void 0:r.color)||"#2b6451",weight:((i=D.style)==null?void 0:i.weight)||3,opacity:((s=D.style)==null?void 0:s.opacity)||1,fillColor:((o=D.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=D.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=D.style)==null?void 0:l.dashArray)||"",name:((c=D.style)==null?void 0:c.name)||"",category:D.category||"forages",accessLevel:U});return W.updateProperties(),W}case"Line":{const D=t.data;if(!u9(D))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const N=D.points.map(ee=>Qi.latLng(ee[1],ee[0])),U=((f=D.style)==null?void 0:f._accessLevel)||((p=D.style)==null?void 0:p.accessLevel)||D.accessLevel||"visitor";D.accessLevel=U;const W=new ys(N,{...D.style||{},name:((y=D.style)==null?void 0:y.name)||"",category:D.category||"forages",accessLevel:U});return W.updateProperties(),W}case"Note":{const D=t.data;if(!D.location)return console.error("[DrawingStore] Données invalides pour Note"),null;try{const N={location:D.location,name:D.name||"Note géolocalisée",description:D.description||"",columnId:D.columnId||"en-cours",accessLevel:D.accessLevel||"private",category:D.category||"forages",style:{color:((m=D.style)==null?void 0:m.color)||"#2b6451",weight:((C=D.style)==null?void 0:C.weight)||2,fillColor:((S=D.style)==null?void 0:S.fillColor)||"#2b6451",fillOpacity:((T=D.style)==null?void 0:T.fillOpacity)||.8,radius:((O=D.style)==null?void 0:O.radius)||12},comments:D.comments||[],photos:D.photos||[],order:D.order||0,createdAt:D.createdAt||new Date().toISOString(),updatedAt:D.updatedAt||new Date().toISOString()},U=il.fromBackendData(N);return U._dbId=t.id,U}catch(N){return console.error("[DrawingStore] Erreur lors de la création de la Note:",N),null}}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",t.type_forme),null}}const Wg=pp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>t.elements.length===0?[]:t.elements.filter(n=>{var l,c;if(!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),!!a})},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){if(t instanceof Qi.Layer&&t.properties){const e=_4(t);this.elements.push(e)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(t.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels}),t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories};const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes};const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){if(this.currentMapId===t&&this.elements.length>0)return this.elements;this.loading=!0;try{const n=(await Cn.get(`/plans/${t}/`)).data;return this.elements=n.formes.map(r=>{if(r.type_forme)return{id:r.id,type_forme:r.type_forme,data:r.data||{}};try{const i=c9(r);if(i)return _4(i)}catch(i){console.error("Erreur lors de la conversion de la forme",{error:i,id:r.id,type:r.type_forme})}return r}),this.currentMapId=t,this.unsavedChanges=!1,n.preferences&&(n.preferences.currentTool&&this.setCurrentTool(n.preferences.currentTool),n.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...n.preferences.currentStyle}),n.preferences.lastUsedType&&(this.lastUsedType=n.preferences.lastUsedType)),this.elements}catch(e){throw console.error("Erreur lors du chargement des éléments:",e),this.error="Erreur lors du chargement des éléments du plan",e}finally{this.loading=!1}},async saveToPlan(t,e){this.loading=!0;try{const n=t||this.currentMapId;if(!n)throw new Error("Aucun plan sélectionné pour la sauvegarde");const r=this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),i=(e==null?void 0:e.elementsToDelete)||[],s=`/plans/${n}/save_with_elements/`,o=await Cn.post(s,{formes:r,connexions:[],annotations:[],elementsToDelete:i,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),a=new Set(i);return this.elements=o.data.formes.filter(l=>!a.has(l.id)).map(l=>({...l,type_forme:l.type_forme})),this.unsavedChanges=!1,o.data}catch(n){throw console.error("Erreur lors de la sauvegarde du plan:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),PS=pp("mapFilters",{state:()=>({filters:[],loading:!1,error:null}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=ul();this.loading=!0,this.error=null;try{const e=await qm.getFilters();return this.filters=e.data,this.filters}catch(e){throw this.error="Erreur lors du chargement des filtres",t.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",e),e}finally{this.loading=!1}},async createFilter(t){this.loading=!0,this.error=null;try{const e=await qm.createFilter(t);return this.filters.push(e.data),e.data}catch(e){throw this.error="Erreur lors de la création du filtre",console.error("[MapFilterStore] Erreur lors de la création du filtre:",e),e}finally{this.loading=!1}},async updateFilter(t,e){this.loading=!0,this.error=null;try{const n=await qm.updateFilter(t,e),r=this.filters.findIndex(i=>i.id===t);return r!==-1&&(this.filters[r]=n.data),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise à jour du filtre:",n),n}finally{this.loading=!1}},async deleteFilter(t){this.loading=!0,this.error=null;try{return await qm.deleteFilter(t),this.filters=this.filters.filter(e=>e.id!==t),!0}catch(e){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",e),e}finally{this.loading=!1}}}}),Yb=pp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var e,n;const t=po();this.loading=!0;try{let r="/plans/";const i={};t.isSalarie?i.salarie=(e=t.user)==null?void 0:e.id:t.isVisiteur&&(i.visiteur=(n=t.user)==null?void 0:n.id);const s=await Cn.get(r,{params:i});this.plans=s.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchPlansWithDetails(){var e,n;const t=po();this.loading=!0;try{let r="/plans/";const i={include_details:!0};t.isSalarie?i.salarie=(e=t.user)==null?void 0:e.id:t.isVisiteur&&(i.visiteur=(n=t.user)==null?void 0:n.id);const o=(await Cn.get(r,{params:i})).data.map(a=>({...a,entreprise:typeof a.entreprise=="object"?a.entreprise:null,salarie:typeof a.salarie=="object"?a.salarie:null,visiteur:typeof a.visiteur=="object"?a.visiteur:null}));return this.plans=o,{data:o}}catch(r){throw console.error("[IrrigationStore] Error fetching plans:",r),this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchClientPlans(t){this.loading=!0;try{return(await Gm.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var n;this.clearCurrentPlan(),this.loading=!0;const e=ul();try{const r=po();((n=r.user)==null?void 0:n.user_type)==="visiteur"&&(t={...t,visiteur:r.user.id,salarie_id:r.user.enterprise_id,entreprise_id:r.user.enterprise_id});const i={...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null},s=await Gm.createPlan(i);return this.plans.push(s.data),e.success(`Le plan "${s.data.nom}" a été créé avec succès`),s.data}catch(r){const i=r instanceof Error?r.message:String(r);throw console.error("Error creating plan:",i),this.error=i,e.error(`Erreur lors de la création du plan : ${i}`),r}finally{this.loading=!1}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await Gm.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var e,n;if(this.unsavedChanges){this.loading=!0;try{const r=await Cn.patch(`/plans/${t}/`,{...this.currentPlan,version:((e=this.currentPlan)==null?void 0:e.version)||1}),i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw console.error("[IrrigationStore][savePlan] ERREUR:",r),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async updatePlanDetails(t,e){const n=ul();try{const{visiteur_id:r,salarie_id:i,entreprise_id:s,...o}=e,a={...o};r!==void 0&&(a.visiteur_id=r),i!==void 0&&(a.salarie_id=i),s!==void 0&&(a.entreprise_id=s);const l=await Cn.patch(`/plans/${t}/`,a);this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...l.data});const c=this.plans.findIndex(f=>f.id===t);return c!==-1&&(this.plans[c]={...this.plans[c],...l.data}),l.data}catch(r){throw console.error("Erreur lors de la mise à jour du plan:",r),n.error(`Erreur lors de la mise à jour du plan : ${r instanceof Error?r.message:String(r)}`),r}},async fetchPlanHistory(t){this.loading=!0;try{const e=await Cn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await Cn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=ul();try{const r=this.plans.find(i=>i.id===t);await Gm.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),h9={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},f9={class:"flex-1 flex flex-col overflow-hidden"},d9={class:"border-b border-gray-200"},p9={class:"flex -mb-px"},g9={class:"flex-1 overflow-hidden flex flex-col"},m9={key:0,class:"tab-content"},v9={class:"grid grid-cols-3 gap-1.5 mb-4"},y9=["onClick","title"],b9=["innerHTML"],_9={key:0,class:"grid grid-cols-2 gap-2 mt-2 mb-2"},w9={key:2,class:"my-4 border-t border-gray-200"},x9={key:3,class:"mt-4"},L9={key:0,class:"mb-4"},C9={class:"mb-4"},S9=["value"],E9={class:"mb-4"},P9={class:"grid grid-cols-1 gap-4"},k9={key:0,class:"space-y-1"},M9={class:"flex justify-between items-center"},A9={class:"text-sm font-medium text-gray-500"},T9={class:"flex justify-between items-center"},O9={class:"text-sm font-medium text-gray-500"},D9={class:"text-sm font-medium text-gray-500"},I9={key:1,class:"tab-content"},N9={class:"grid grid-cols-6 gap-2 mb-4"},B9=["onClick","title"],R9={class:"space-y-4"},F9={class:"flex items-center gap-4"},j9={class:"flex items-center gap-2"},z9={class:"flex items-center gap-4"},U9=["value"],$9={key:0,class:"flex items-center gap-4"},V9={class:"flex items-center gap-2"},H9={key:2,class:"tab-content filters-tab"},W9={class:"filters-content"},G9={class:"space-y-2"},q9={class:"space-y-2 mt-4"},Y9={class:"space-y-1"},Z9={class:"flex items-center"},K9={class:"flex items-center"},X9={class:"flex items-center"},J9={class:"flex items-center"},Q9={class:"flex items-center"},ej={class:"flex items-center"},tj={key:0,class:"flex items-center"},nj=["onUpdate:modelValue"],rj={class:"ml-2 text-sm text-gray-700"},ij={key:0,class:"mt-2 pt-2 border-t border-gray-200"},sj={class:"flex space-x-2"},oj=["disabled"],aj={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},lj={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},uj={class:"space-y-2 mt-4"},cj={class:"space-y-1"},hj={class:"flex items-center"},fj={class:"flex items-center"},dj={class:"flex items-center"},pj=ws({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=Wg(),i=po(),s=ir(()=>i.isAdmin),o=ir(()=>i.isEntreprise),a=PS(),l=Yb(),c=cu({name:""}),f=kt(!1),p=kt(["forages","clients","entrepots","livraisons","cultures","parcelles"]),y=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Note",label:"Note géolocalisée"}],m=ue=>{switch(ue){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c1.38 0 2.5-1.12 2.5-2.5S13.38 6 12 6s-2.5 1.12-2.5 2.5S10.62 11 12 11z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><ellipse cx="12" cy="22" rx="4" ry="1.5" stroke-width="2.5" fill="currentColor" fill-opacity="0.2"/></svg>';default:return""}},C=kt("tools");vi(C,(ue,oe)=>{ue==="filters"&&oe!=="filters"&&(n.selectedShape&&Ee("tool-selected",""),setTimeout(()=>{J()},0)),oe==="filters"&&ue!=="filters"&&J()});const S=kt("#2b6451"),T=kt(2),O=kt("solid"),D=kt("#2b6451"),N=kt(.2),U=kt(!0),W=kt(""),ee=kt("default"),te=kt("visitor"),V=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],Y=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],de=kt("company"),$=cu({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}}),H=ue=>{de.value=ue,ue==="company"?($.accessLevels.company=!0,$.accessLevels.employee=!1,$.accessLevels.visitor=!1):ue==="employee"?($.accessLevels.company=!1,$.accessLevels.employee=!0,$.accessLevels.visitor=!1):ue==="visitor"&&($.accessLevels.company=!1,$.accessLevels.employee=!1,$.accessLevels.visitor=!0),J()},le=ue=>{n.selectedShape&&Ee("tool-selected",""),H(ue)},ae=ir(()=>n.selectedShape&&n.selectedShape.properties||null),z=ue=>{S.value=ue,D.value=ue,B({strokeColor:ue,fillColor:ue})},B=ue=>{n.selectedShape&&Ee("style-update",ue)},X=()=>{n.selectedShape&&Ee("properties-update",{name:W.value})},K=()=>{n.selectedShape&&Ee("properties-update",{category:ee.value})},ye=()=>{n.selectedShape&&Ee("properties-update",{accessLevel:te.value})},Te=()=>{const ue={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}};$.accessLevels.company=!0,$.accessLevels.employee=!0,$.accessLevels.visitor=!0,$.categories.forages=!0,$.categories.clients=!0,$.categories.entrepots=!0,$.categories.livraisons=!0,$.categories.cultures=!0,$.categories.parcelles=!0,$.shapeTypes.Polygon=!0,$.shapeTypes.Line=!0,$.shapeTypes.Note=!0,r.updateFilters(ue),Ee("filter-change",ue)},Ue=()=>{we(),Te()},J=()=>{const ue={...$.accessLevels},oe={...$.categories},ce={...$.shapeTypes},Q={accessLevels:ue,categories:oe,shapeTypes:ce};r.updateFilters(Q),Ee("filter-change",Q),setTimeout(()=>{window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:Q}}))},0)},ie=ue=>`${Math.round(ue)} m`,se=ue=>ue>=1e4?`${(ue/1e4).toFixed(2)} ha`:`${Math.round(ue)} m²`,pe=ue=>p.value.includes(ue)?ue:ue.split("_").map(oe=>oe.charAt(0).toUpperCase()+oe.slice(1)).join(" "),we=()=>{n.selectedShape&&Ee("tool-selected","")};async function be(){var ue,oe;if(!(!c.name||f.value)){f.value=!0;try{const ce=c.name.toLowerCase().replace(/\s+/g,"_"),Q=l.currentPlan;let Pe=null;if(Q!=null&&Q.entreprise_id?Pe=Q.entreprise_id:Q!=null&&Q.entreprise&&typeof Q.entreprise=="object"&&"id"in Q.entreprise?Pe=Q.entreprise.id:(ue=i.user)!=null&&ue.enterprise_id?Pe=i.user.enterprise_id:i.isEntreprise&&((oe=i.user)!=null&&oe.id)&&(Pe=i.user.id),!Pe)return;const Ve=await a.createFilter({name:c.name,category:ce,entreprise:Pe});$.categories[ce]||($.categories[ce]=!0);const Qe={...r.filters.categories};Qe[ce]=!0,r.updateFilters({categories:Qe}),Ee("filter-change",$),c.name=""}catch{}finally{f.value=!1}}}const Ae=()=>{we(),C.value="filters"},Ee=e;Rg(()=>{var ue,oe,ce,Q;if(n.selectedShape){const Pe=n.selectedShape.options||{};S.value=Pe.color||"#2b6451",T.value=Pe.weight||3,O.value=Pe.dashArray?"dashed":"solid",D.value=Pe.fillColor||"#2b6451",N.value=Pe.fillOpacity||.2;const Ve=n.selectedShape.type||((ue=n.selectedShape.properties)==null?void 0:ue.type)||"";U.value=Ve!=="Line",W.value=((oe=n.selectedShape.properties)==null?void 0:oe.name)||"",ee.value=((ce=n.selectedShape.properties)==null?void 0:ce.category)||"forages",te.value=((Q=n.selectedShape.properties)==null?void 0:Q.accessLevel)||"visitor"}}),Ks(async()=>{const ue=r.filters;$.accessLevels.company=ue.accessLevels.company,$.accessLevels.employee=ue.accessLevels.employee,$.accessLevels.visitor=ue.accessLevels.visitor,$.categories.forages=ue.categories.forages,$.categories.clients=ue.categories.clients,$.categories.entrepots=ue.categories.entrepots,$.categories.livraisons=ue.categories.livraisons,$.categories.cultures=ue.categories.cultures,$.categories.parcelles=ue.categories.parcelles,$.shapeTypes.Polygon=ue.shapeTypes.Polygon,$.shapeTypes.Line=ue.shapeTypes.Line,$.shapeTypes.Note=ue.shapeTypes.Note;try{await a.fetchFilters();const oe=a.getUniqueCategories,ce=[];oe.forEach(Q=>{!p.value.includes(Q)&&!$.categories[Q]&&($.categories[Q]=!0,ce.push(Q))}),ce.length>0&&(r.updateFilters({categories:$.categories}),Ee("filter-change",$))}catch{}}),vi($,(ue,oe)=>{const ce=Object.keys(ue.accessLevels).filter(Ve=>oe.accessLevels[Ve]!==ue.accessLevels[Ve]),Q=Object.keys(ue.categories).filter(Ve=>oe.categories[Ve]!==ue.categories[Ve]),Pe=Object.keys(ue.shapeTypes).filter(Ve=>oe.shapeTypes[Ve]!==ue.shapeTypes[Ve]);ce.length>0||Q.length>0||Pe.length>0,C.value==="filters"&&J()},{deep:!0});const Je=ue=>{Ee("tool-selected",n.selectedTool===ue?"":ue),window.innerWidth<768&&Ee("update:show",!1)},gt=()=>{var ue;if(Ee("update:show",!1),n.selectedShape&&((ue=n.selectedShape.properties)==null?void 0:ue.type)==="Note"){const oe=n.selectedShape.layer;oe&&typeof oe.editNote=="function"&&oe.editNote()}},_t=()=>{var ue;if(Ee("update:show",!1),n.selectedShape&&((ue=n.selectedShape.properties)==null?void 0:ue.type)==="Note"){const oe=n.selectedShape.layer;oe&&typeof oe.openInGoogleMaps=="function"&&oe.openInGoogleMaps()}};return(ue,oe)=>{var ce,Q;return Ne(),je("div",{class:Si(["drawing-tools-panel",{open:t.show}])},[P("div",h9,[oe[30]||(oe[30]=P("div",{class:"flex items-center"},[P("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),P("h3",{class:"text-sm font-semibold text-gray-700"},"Outils")],-1)),P("button",{onClick:oe[0]||(oe[0]=Pe=>ue.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},oe[29]||(oe[29]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",f9,[P("div",d9,[P("nav",p9,[P("button",{onClick:oe[1]||(oe[1]=Pe=>C.value="tools"),class:Si([C.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},oe[31]||(oe[31]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),P("span",null,"Outils",-1)]),2),t.selectedShape&&((ce=t.selectedShape.properties)==null?void 0:ce.type)!=="Note"?(Ne(),je("button",{key:0,onClick:oe[2]||(oe[2]=Pe=>C.value="style"),class:Si([C.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},oe[32]||(oe[32]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),P("span",null,"Style",-1)]),2)):Kt("",!0),P("button",{onClick:Ae,class:Si([C.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},oe[33]||(oe[33]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),P("span",null,"Filtres",-1)]),2)])]),P("div",g9,[C.value==="tools"?(Ne(),je("div",m9,[P("div",v9,[(Ne(!0),je(bn,null,ar(y.filter(Pe=>Pe.type!=="delete"),Pe=>(Ne(),je("button",{key:Pe.type,class:Si(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":n.selectedTool===Pe.type,"hover:bg-gray-50 border-gray-300 text-gray-700":n.selectedTool!==Pe.type}]),onClick:Ve=>Je(Pe.type),title:Pe.label},[P("span",{class:"icon",innerHTML:m(Pe.type)},null,8,b9)],10,y9))),128))]),t.selectedShape&&ae.value&&ae.value.type==="Note"?(Ne(),je("div",_9,[P("button",{class:"p-2 rounded-md border border-primary-200 bg-primary-50 text-primary-600 hover:bg-primary-100 flex items-center justify-center",onClick:gt,title:"Éditer la note"},oe[34]||(oe[34]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),P("span",{class:"text-sm"},"Éditer",-1)])),P("button",{class:"p-2 rounded-md border border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 flex items-center justify-center",onClick:_t,title:"Obtenir l'itinéraire"},oe[35]||(oe[35]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),P("span",{class:"text-sm"},"Itinéraire",-1)]))])):Kt("",!0),t.selectedShape?(Ne(),je("button",{key:1,class:Si(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":n.selectedTool==="delete"}]),onClick:oe[3]||(oe[3]=Pe=>ue.$emit("delete-shape")),title:"Supprimer la forme"},oe[36]||(oe[36]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),P("span",{class:"text-sm"},"Supprimer",-1)]),2)):Kt("",!0),t.selectedShape&&ae.value?(Ne(),je("div",w9)):Kt("",!0),t.selectedShape&&ae.value?(Ne(),je("div",x9,[ae.value.type!=="Note"?(Ne(),je("div",L9,[oe[37]||(oe[37]=P("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),Fn(P("input",{type:"text",id:"shapeName","onUpdate:modelValue":oe[4]||(oe[4]=Pe=>W.value=Pe),onChange:X,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[fi,W.value]])])):Kt("",!0),P("div",C9,[oe[40]||(oe[40]=P("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),Fn(P("select",{id:"shapeCategory","onUpdate:modelValue":oe[5]||(oe[5]=Pe=>ee.value=Pe),onChange:K,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[oe[38]||(oe[38]=lu('<option value="forages" data-v-4fd4fe60>Forages</option><option value="clients" data-v-4fd4fe60>Clients</option><option value="entrepots" data-v-4fd4fe60>Entrepôts</option><option value="livraisons" data-v-4fd4fe60>Lieux de livraison</option><option value="cultures" data-v-4fd4fe60>Cultures</option><option value="parcelles" data-v-4fd4fe60>Noms des parcelles</option>',6)),(Ne(!0),je(bn,null,ar($.categories,(Pe,Ve)=>(Ne(),je(bn,{key:Ve},[p.value.includes(String(Ve))?Kt("",!0):(Ne(),je("option",{key:0,value:String(Ve)},zt(pe(String(Ve))),9,S9))],64))),128)),oe[39]||(oe[39]=P("option",{value:"default"},"Autre",-1))],544),[[ss,ee.value]])]),P("div",E9,[oe[42]||(oe[42]=P("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accès",-1)),oe[43]||(oe[43]=P("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Définit qui peut voir cet élément sur la carte. ",-1)),Fn(P("select",{id:"accessLevel","onUpdate:modelValue":oe[6]||(oe[6]=Pe=>te.value=Pe),onChange:ye,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},oe[41]||(oe[41]=[P("option",{value:"private"},"Privé - visible uniquement par vous",-1),P("option",{value:"company"},"Entreprise - visible par l'entreprise",-1),P("option",{value:"employee"},"Salariés - visible par l'entreprise et ses salariés",-1),P("option",{value:"visitor"},"Visiteurs - visible par l'entreprise, ses salariés et ses visiteurs",-1)]),544),[[ss,te.value]])]),P("div",P9,[ae.value.type==="Polygon"?(Ne(),je("div",k9,[P("div",M9,[oe[44]||(oe[44]=P("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),P("span",A9,zt(se(ae.value.surface||0)),1)]),P("div",T9,[oe[45]||(oe[45]=P("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),P("span",O9,zt(ie(ae.value.perimeter||0)),1)])])):ae.value.type==="Line"?(Ne(),je(bn,{key:1},[oe[46]||(oe[46]=P("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),P("span",D9,zt(ie(ae.value.length||0)),1)],64)):Kt("",!0)])])):Kt("",!0)])):Kt("",!0),C.value==="style"&&t.selectedShape&&((Q=t.selectedShape.properties)==null?void 0:Q.type)!=="Note"?(Ne(),je("div",I9,[P("div",N9,[(Ne(),je(bn,null,ar(V,Pe=>P("button",{key:Pe,class:"w-8 h-8 rounded-full",style:Fl({backgroundColor:Pe}),onClick:Ve=>z(Pe),title:Pe},null,12,B9)),64))]),P("div",R9,[P("div",F9,[oe[47]||(oe[47]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),P("div",j9,[Fn(P("input",{type:"color","onUpdate:modelValue":oe[7]||(oe[7]=Pe=>S.value=Pe),class:"w-16 h-8 rounded border",onChange:oe[8]||(oe[8]=Pe=>B({strokeColor:S.value})),title:"Couleur du contour"},null,544),[[fi,S.value]]),Fn(P("input",{type:"range","onUpdate:modelValue":oe[9]||(oe[9]=Pe=>T.value=Pe),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:oe[10]||(oe[10]=Pe=>B({strokeWidth:T.value})),title:"Épaisseur du contour"},null,544),[[fi,T.value]])])]),P("div",z9,[oe[48]||(oe[48]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),Fn(P("select",{"onUpdate:modelValue":oe[11]||(oe[11]=Pe=>O.value=Pe),class:"w-full rounded border",onChange:oe[12]||(oe[12]=Pe=>B({strokeStyle:O.value}))},[(Ne(),je(bn,null,ar(Y,Pe=>P("option",{key:Pe.value,value:Pe.value},zt(Pe.label),9,U9)),64))],544),[[ss,O.value]])]),U.value?(Ne(),je("div",$9,[oe[49]||(oe[49]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),P("div",V9,[Fn(P("input",{type:"color","onUpdate:modelValue":oe[13]||(oe[13]=Pe=>D.value=Pe),class:"w-16 h-8 rounded border",onChange:oe[14]||(oe[14]=Pe=>B({fillColor:D.value})),title:"Couleur de remplissage"},null,544),[[fi,D.value]]),Fn(P("input",{type:"range","onUpdate:modelValue":oe[15]||(oe[15]=Pe=>N.value=Pe),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:oe[16]||(oe[16]=Pe=>B({fillOpacity:N.value})),title:"Opacité du remplissage"},null,544),[[fi,N.value]])])])):Kt("",!0)])])):Kt("",!0),C.value==="filters"?(Ne(),je("div",H9,[P("div",W9,[P("div",G9,[oe[52]||(oe[52]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accès",-1)),oe[53]||(oe[53]=P("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Sélectionnez votre niveau d'accès pour filtrer les éléments visibles sur la carte. ",-1)),P("div",null,[Fn(P("select",{"onUpdate:modelValue":oe[17]||(oe[17]=Pe=>de.value=Pe),onChange:oe[18]||(oe[18]=Pe=>le(de.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},oe[50]||(oe[50]=[P("option",{value:"company"},"Entreprise (accès à tout)",-1),P("option",{value:"employee"},"Salariés (accès niveau salariés et visiteurs)",-1),P("option",{value:"visitor"},"Visiteurs (accès niveau visiteurs uniquement)",-1)]),544),[[ss,de.value]]),oe[51]||(oe[51]=P("div",{class:"mt-2 text-xs text-gray-500"},[P("p",null,[P("strong",null,"Entreprise"),jr(" : Vous verrez tous les éléments (entreprise, salariés, visiteurs)")]),P("p",null,[P("strong",null,"Salariés"),jr(" : Vous verrez les éléments pour salariés et visiteurs")]),P("p",null,[P("strong",null,"Visiteurs"),jr(" : Vous ne verrez que les éléments pour visiteurs")])],-1))])]),P("div",q9,[oe[62]||(oe[62]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catégories",-1)),P("div",Y9,[P("label",Z9,[Fn(P("input",{type:"checkbox","onUpdate:modelValue":oe[19]||(oe[19]=Pe=>$.categories.forages=Pe),onChange:we,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.forages]]),oe[54]||(oe[54]=P("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),P("label",K9,[Fn(P("input",{type:"checkbox","onUpdate:modelValue":oe[20]||(oe[20]=Pe=>$.categories.clients=Pe),onChange:we,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.clients]]),oe[55]||(oe[55]=P("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),P("label",X9,[Fn(P("input",{type:"checkbox","onUpdate:modelValue":oe[21]||(oe[21]=Pe=>$.categories.entrepots=Pe),onChange:we,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.entrepots]]),oe[56]||(oe[56]=P("span",{class:"ml-2 text-sm text-gray-700"},"Entrepôts",-1))]),P("label",J9,[Fn(P("input",{type:"checkbox","onUpdate:modelValue":oe[22]||(oe[22]=Pe=>$.categories.livraisons=Pe),onChange:we,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.livraisons]]),oe[57]||(oe[57]=P("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),P("label",Q9,[Fn(P("input",{type:"checkbox","onUpdate:modelValue":oe[23]||(oe[23]=Pe=>$.categories.cultures=Pe),onChange:we,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.cultures]]),oe[58]||(oe[58]=P("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),P("label",ej,[Fn(P("input",{type:"checkbox","onUpdate:modelValue":oe[24]||(oe[24]=Pe=>$.categories.parcelles=Pe),onChange:we,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.parcelles]]),oe[59]||(oe[59]=P("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Ne(!0),je(bn,null,ar($.categories,(Pe,Ve)=>(Ne(),je(bn,{key:Ve},[p.value.includes(String(Ve))?Kt("",!0):(Ne(),je("label",tj,[Fn(P("input",{type:"checkbox","onUpdate:modelValue":Qe=>$.categories[Ve]=Qe,onChange:we,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,nj),[[Tl,$.categories[Ve]]]),P("span",rj,zt(Ve),1)]))],64))),128)),s.value||o.value?(Ne(),je("div",ij,[P("div",sj,[Fn(P("input",{type:"text","onUpdate:modelValue":oe[25]||(oe[25]=Pe=>c.name=Pe),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[fi,c.name]]),P("button",{onClick:be,disabled:!c.name||f.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(Ne(),je("svg",lj,oe[61]||(oe[61]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ne(),je("svg",aj,oe[60]||(oe[60]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,oj)])])):Kt("",!0)])]),P("div",uj,[oe[66]||(oe[66]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),P("div",cj,[P("label",hj,[Fn(P("input",{type:"checkbox","onUpdate:modelValue":oe[26]||(oe[26]=Pe=>$.shapeTypes.Polygon=Pe),onChange:we,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.shapeTypes.Polygon]]),oe[63]||(oe[63]=P("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),P("label",fj,[Fn(P("input",{type:"checkbox","onUpdate:modelValue":oe[27]||(oe[27]=Pe=>$.shapeTypes.Line=Pe),onChange:we,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.shapeTypes.Line]]),oe[64]||(oe[64]=P("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),P("label",dj,[Fn(P("input",{type:"checkbox","onUpdate:modelValue":oe[28]||(oe[28]=Pe=>$.shapeTypes.Note=Pe),onChange:we,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.shapeTypes.Note]]),oe[65]||(oe[65]=P("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),P("div",{class:"pt-4 mb-4"},[P("button",{onClick:Ue,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Réinitialiser ")])])])):Kt("",!0)])])],2)}}}),w4=$c(pj,[["__scopeId","data-v-4fd4fe60"]]),gj={class:"map-toolbar w-full"},mj={class:"hidden md:flex items-center space-x-2"},vj={class:"dropdown"},yj={class:"dropdown-menu"},bj=["onClick"],_j={key:0,class:"border-l pl-2 flex-1"},wj={class:"flex items-center"},xj={class:"plan-info"},Lj={class:"plan-name"},Cj={key:0,class:"plan-description"},Sj={class:"border-l pl-2 ml-auto"},Ej={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Pj={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},kj={key:"saving"},Mj={key:"success",class:"save-success-text"},Aj={key:"default"},Tj={class:"md:hidden"},Oj={class:"flex justify-between items-center"},Dj={key:0,class:"truncate mx-2 text-sm font-medium"},Ij={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},Nj={class:"flex justify-between items-center mb-3 border-b pb-2"},Bj={class:"flex flex-col space-y-4"},Rj={key:0,class:"flex flex-col pb-3 border-b"},Fj={class:"text-sm font-semibold text-gray-800"},jj={key:0,class:"text-xs text-gray-600 mt-1"},zj={class:"flex flex-col"},Uj={class:"grid grid-cols-3 gap-2"},$j=["onClick"],Vj={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Hj={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Wj={key:"saving"},Gj={key:"success",class:"save-success-text"},qj={key:"default"},Yj=ws({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view"],setup(t,{emit:e}){const n=t,r=e,{lastSave:i,planName:s,planDescription:o,saveStatus:a}=Sb(n),l=kt("Hybride"),c=kt(!1),f=D=>{const N=D.currentTarget,U=N.nextElementSibling;if(U&&U.classList.contains("dropdown-menu")){const W=N.getBoundingClientRect();U.style.top=`${W.bottom}px`,U.style.left=`${W.left}px`}},p={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},y=ir(()=>i.value?new Date(i.value).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),m=D=>{l.value=D,r("change-map-type",D),c.value=!1},C=()=>{r("create-new-plan"),c.value=!1},S=()=>{r("load-plan"),c.value=!1},T=()=>{r("save-plan"),c.value=!1},O=()=>{r("adjust-view"),c.value=!1};return Ks(()=>{const D=setInterval(()=>{window.dispatchEvent(new CustomEvent("geonote:savePlan"))},6e4);ku(()=>{clearInterval(D)})}),vi(a,D=>{D==="saving"&&window.dispatchEvent(new CustomEvent("geonote:savePlan"))}),(D,N)=>(Ne(),je("div",gj,[P("div",mj,[P("div",vj,[P("button",{class:"btn-toolbar dropdown-toggle",onMouseover:f},[N[2]||(N[2]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),P("span",null,zt(p[l.value]),1)],32),P("div",yj,[(Ne(),je(bn,null,ar(p,(U,W)=>P("button",{key:W,class:Si(["dropdown-item",{active:W===l.value}]),onClick:ee=>m(W)},zt(U),11,bj)),64))])]),_n(s)?(Ne(),je("div",_j,[P("div",wj,[P("div",xj,[P("h2",Lj,zt(_n(s)),1),_n(o)?(Ne(),je("p",Cj,zt(_n(o)),1)):Kt("",!0)])])])):Kt("",!0),P("div",{class:"border-l pl-2"},[P("div",{class:"flex items-center space-x-1"},[P("button",{onClick:C,class:"btn-toolbar",title:"Nouveau plan"},N[3]||(N[3]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),P("button",{onClick:S,class:"btn-toolbar",title:"Charger un plan"},N[4]||(N[4]=[lu('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-f1cdc164><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-f1cdc164></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-f1cdc164></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-f1cdc164></path></svg><span class="hidden lg:inline ml-1" data-v-f1cdc164>Charger</span>',2)])),P("button",{onClick:T,class:"btn-toolbar",title:"Enregistrer le plan"},N[5]||(N[5]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),P("div",{class:"border-l pl-2"},[P("div",{class:"flex items-center space-x-1"},[P("button",{onClick:O,class:"btn-toolbar",title:"Ajuster la vue"},N[6]||(N[6]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)]))])]),P("div",Sj,[P("div",{class:Si(["text-xs hidden lg:flex items-center",{"text-gray-500":!_n(a),"text-primary-600 font-medium":_n(a)==="success","text-blue-600 font-medium":_n(a)==="saving"}])},[_n(a)==="saving"?(Ne(),je("svg",Ej,N[7]||(N[7]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Kt("",!0),_n(a)==="success"?(Ne(),je("svg",Pj,N[8]||(N[8]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Kt("",!0),Kr(f2,{name:"fade-slide",mode:"out-in"},{default:Nl(()=>[_n(a)==="saving"?(Ne(),je("span",kj," Sauvegarde en cours... ")):_n(a)==="success"?(Ne(),je("span",Mj," Sauvegarde réussie ! ")):(Ne(),je("span",Aj," Dernière modification : "+zt(y.value),1))]),_:1})],2)])]),P("div",Tj,[P("div",Oj,[P("button",{onClick:N[0]||(N[0]=U=>c.value=!c.value),class:"p-2 rounded-md border bg-white shadow-sm"},N[9]||(N[9]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),_n(s)?(Ne(),je("div",Dj,zt(_n(s)),1)):Kt("",!0),P("div",{class:"flex space-x-2"},[P("button",{onClick:C,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[10]||(N[10]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),P("button",{onClick:T,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[11]||(N[11]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),P("button",{onClick:O,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[12]||(N[12]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),c.value?(Ne(),je("div",Ij,[P("div",Nj,[N[14]||(N[14]=P("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),P("button",{onClick:N[1]||(N[1]=U=>c.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},N[13]||(N[13]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",Bj,[_n(s)?(Ne(),je("div",Rj,[P("h3",Fj,zt(_n(s)),1),_n(o)?(Ne(),je("p",jj,zt(_n(o)),1)):Kt("",!0)])):Kt("",!0),P("div",zj,[N[15]||(N[15]=P("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),P("div",Uj,[(Ne(),je(bn,null,ar(p,(U,W)=>P("button",{key:W,class:Si(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":W===l.value}]),onClick:ee=>m(W)},zt(U),11,$j)),64))])]),P("div",{class:"flex flex-col"},[N[18]||(N[18]=P("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),P("div",{class:"grid grid-cols-2 gap-2"},[P("button",{onClick:C,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},N[16]||(N[16]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),jr(" Nouveau ")])),P("button",{onClick:S,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},N[17]||(N[17]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),P("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),P("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),jr(" Charger ")]))])]),P("div",{class:Si(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!_n(a),"text-primary-600 font-medium":_n(a)==="success","text-blue-600 font-medium":_n(a)==="saving"}])},[_n(a)==="saving"?(Ne(),je("svg",Vj,N[19]||(N[19]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Kt("",!0),_n(a)==="success"?(Ne(),je("svg",Hj,N[20]||(N[20]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Kt("",!0),Kr(f2,{name:"fade-slide",mode:"out-in"},{default:Nl(()=>[_n(a)==="saving"?(Ne(),je("span",Wj," Sauvegarde en cours... ")):_n(a)==="success"?(Ne(),je("span",Gj," Sauvegarde réussie ! ")):(Ne(),je("span",qj," Dernière modification : "+zt(y.value),1))]),_:1})],2)])])):Kt("",!0)])]))}}),Zj=$c(Yj,[["__scopeId","data-v-f1cdc164"]]),Kj={class:"comment-thread"},Xj={key:0,class:"space-y-3 mb-4"},Jj={class:"flex justify-between items-start"},Qj={class:"flex items-center"},ez={class:"font-medium text-sm text-gray-900"},tz={class:"flex items-center"},nz={class:"text-xs text-gray-500"},rz=["onClick"],iz={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},sz={key:1,class:"text-center text-sm text-gray-500 italic my-4"},oz={key:2,class:"mt-3"},az={class:"flex justify-end mt-2"},lz=["disabled"],uz={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},cz=ws({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;vi(()=>n.comments,S=>{},{deep:!0});const r=e,i=po(),s=yh(),o=ul(),a=kt(""),l=ir(()=>i.isEntreprise||i.isAdmin);function c(S){return i.user&&S.userId===i.user.id||i.isAdmin}async function f(){var S;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajouté avec succès"),r("comment-added")}catch(T){if(console.error("Erreur lors de l'ajout du commentaire:",T),(S=T.response)!=null&&S.data){const O=T.response.data;O.note?o.error(`Erreur: ${O.note[0]}`):O.user?o.error(`Erreur: ${O.user[0]}`):O.text?o.error(`Erreur: ${O.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(S){var T;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,S),o.success("Commentaire supprimé"),r("comment-deleted")}catch(O){if(console.error("Erreur lors de la suppression du commentaire:",O),(T=O.response)!=null&&T.data){const D=O.response.data;D.detail?o.error(`Erreur: ${D.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function y(S){try{if(!S)return"Date inconnue";const T=new Date(S);return isNaN(T.getTime())?(console.warn(`Date invalide: ${S}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(T)}catch(T){return console.error(`Erreur lors du formatage de la date: ${S}`,T),"Date invalide"}}function m(S){switch(S){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function C(S){switch(S){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return S}}return(S,T)=>(Ne(),je("div",Kj,[S.comments&&S.comments.length>0?(Ne(),je("div",Xj,[(Ne(!0),je(bn,null,ar(S.comments,O=>(Ne(),je("div",{key:O.id,class:"bg-gray-50 rounded-lg p-3"},[P("div",Jj,[P("div",Qj,[P("div",ez,zt(O.userName),1),P("span",{class:Si(["ml-2 text-xs px-2 py-0.5 rounded-full",m(O.userRole)])},zt(C(O.userRole)),3)]),P("div",tz,[P("span",nz,zt(y(O.createdAt)),1),c(O)?(Ne(),je("button",{key:0,onClick:Rl(D=>p(O.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},T[1]||(T[1]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,rz)):Kt("",!0)])]),P("p",iz,zt(O.text),1)]))),128))])):(Ne(),je("div",sz," Aucun commentaire pour le moment ")),l.value?(Ne(),je("div",oz,[Fn(P("textarea",{"onUpdate:modelValue":T[0]||(T[0]=O=>a.value=O),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[fi,a.value]]),P("div",az,[P("button",{type:"button",onClick:Rl(f,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,lz)])])):(Ne(),je("div",uz," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),hz={class:"photo-gallery"},fz={key:0,class:"grid grid-cols-2 gap-2 mb-4"},dz=["src","onClick"],pz={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},gz={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},mz=["onClick"],vz={key:1,class:"text-center text-sm text-gray-500 italic my-4"},yz={class:"flex space-x-2 mt-3"},bz={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},_z={class:"relative bg-gray-900",style:{height:"300px"}},wz=["src"],xz={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},Lz={key:1,class:"flex space-x-3"},Cz={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},Sz={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},Ez=["src"],Pz=ws({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=yh(),s=ul(),o=kt(null),a=kt(null),l=kt(null);let c=null;const f=kt(!1),p=kt(!1),y=kt(null),m=kt(null);function C(te){y.value=te,f.value=!0}async function S(te){var V;if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,te),s.success("Photo supprimée"),r("photo-deleted"),f.value&&((V=y.value)==null?void 0:V.id)===te&&(f.value=!1,y.value=null)}catch(Y){console.error("Erreur lors de la suppression de la photo:",Y),s.error("Erreur lors de la suppression de la photo")}}function T(){l.value&&l.value.click()}async function O(te){const V=te.target;if(!V.files||V.files.length===0)return;const Y=V.files[0];if(!Y.type.startsWith("image/")){s.error("Le fichier doit être une image");return}if(Y.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const de=await D(Y);await i.addPhoto(n.noteId,{url:de}),V.value="",s.success("Photo ajoutée"),r("photo-added")}catch(de){console.error("Erreur lors de l'ajout de la photo:",de),s.error("Erreur lors de l'ajout de la photo")}}function D(te){return new Promise((V,Y)=>{const de=new FileReader;de.onload=()=>V(de.result),de.onerror=Y,de.readAsDataURL(te)})}vi(p,async te=>{if(te){m.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de caméra non supportée sur ce navigateur");const V={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(V),o.value&&(o.value.srcObject=c,await new Promise(Y=>{o.value.onloadedmetadata=()=>{o.value.play().then(Y)}}))}catch(V){console.error("Erreur lors de l'accès à la caméra:",V);let Y="Impossible d'accéder à la caméra";V.name==="NotAllowedError"?Y="L'accès à la caméra a été refusé. Veuillez vérifier vos permissions.":V.name==="NotFoundError"?Y="Aucune caméra n'a été trouvée sur votre appareil.":V.name==="NotSupportedError"&&(Y="Votre navigateur ne supporte pas l'accès à la caméra."),s.error(Y),p.value=!1}}else c&&(c.getTracks().forEach(V=>V.stop()),c=null)});function N(){if(!o.value||!a.value)return;const te=o.value,V=a.value;V.width=te.videoWidth,V.height=te.videoHeight;const Y=V.getContext("2d");Y&&(Y.drawImage(te,0,0,V.width,V.height),m.value=V.toDataURL("image/jpeg"))}function U(){m.value=null}async function W(){if(m.value)try{await i.addPhoto(n.noteId,{url:m.value}),p.value=!1,s.success("Photo ajoutée"),r("photo-added")}catch(te){console.error("Erreur lors de l'ajout de la photo:",te),s.error("Erreur lors de l'ajout de la photo")}}function ee(){p.value=!1}return ku(()=>{c&&(c.getTracks().forEach(te=>te.stop()),c=null)}),(te,V)=>(Ne(),je("div",hz,[te.photos&&te.photos.length>0?(Ne(),je("div",fz,[(Ne(!0),je(bn,null,ar(te.photos,Y=>(Ne(),je("div",{key:Y.id,class:"relative group"},[P("img",{src:Y.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:de=>C(Y)},null,8,dz),P("div",pz,[P("div",gz,[P("button",{onClick:Rl(de=>S(Y.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},V[2]||(V[2]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,mz)])])]))),128))])):(Ne(),je("div",vz," Aucune photo pour le moment ")),P("div",yz,[P("button",{type:"button",onClick:V[0]||(V[0]=Y=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},V[3]||(V[3]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),jr(" Prendre une photo ")])),P("button",{type:"button",onClick:T,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},V[4]||(V[4]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),jr(" Téléverser ")])),P("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:O},null,544)]),p.value?(Ne(),je("div",bz,[P("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[V[6]||(V[6]=P("h3",{class:"text-sm font-medium text-gray-700"},"Mode caméra",-1)),P("button",{type:"button",onClick:ee,class:"text-gray-400 hover:text-gray-500"},V[5]||(V[5]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",_z,[m.value?(Ne(),je("img",{key:1,src:m.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,wz)):(Ne(),je("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),P("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),P("div",xz,[m.value?(Ne(),je("div",Lz,[P("button",{type:"button",onClick:U,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),P("button",{type:"button",onClick:W,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Ne(),je("button",{key:0,type:"button",onClick:N,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},V[7]||(V[7]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):Kt("",!0),f.value?(Ne(),je("div",Cz,[P("div",Sz,[P("button",{type:"button",onClick:V[1]||(V[1]=Y=>f.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},V[8]||(V[8]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),y.value?(Ne(),je("img",{key:0,src:y.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,Ez)):Kt("",!0)])])):Kt("",!0)]))}}),kz=$c(Pz,[["__scopeId","data-v-f87156b4"]]),Mz={class:"modal-header"},Az={class:"modal-title"},Tz={class:"modal-tabs"},Oz={key:0,class:"badge"},Dz={key:0,class:"badge"},Iz={class:"modal-content"},Nz={key:0,class:"tab-content"},Bz={class:"form-group"},Rz={class:"form-group"},Fz={key:0,class:"location-indicator"},jz={class:"form-group"},zz=["value"],Uz={key:1,class:"form-group"},$z=["value"],Vz={class:"form-group"},Hz=["value"],Wz={class:"form-group"},Gz={class:"color-picker"},qz=["onClick"],Yz={key:1,class:"tab-content"},Zz={key:2,class:"tab-content"},Kz=ws({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=yh(),s=ul(),o=po(),a=kt("info"),l=kt([]),c=kt(null),f=window.console;vi(a,async z=>{z==="comments"&&n.note&&n.note.id&&await C(n.note.id),z==="photos"&&n.note&&n.note.id&&await S(n.note.id)});const p=kt({title:"",description:"",columnId:"",accessLevel:Rr.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],enterprise_id:null});function y(z){return Array.isArray(z)?z:typeof z=="object"&&"type"in z&&"coordinates"in z?[z.coordinates[1],z.coordinates[0]]:(f.error("[NoteEditModal] Format de localisation non reconnu:",z),[0,0])}function m(z){if(!z)return new Date().toISOString();try{const B=new Date(z);return isNaN(B.getTime())?(f.warn("[NoteEditModal] Date invalide:",z),new Date().toISOString()):B.toISOString()}catch(B){return f.error("[NoteEditModal] Erreur lors de la création de la date:",B),new Date().toISOString()}}async function C(z){try{const X=(await Yo.getComments(z)).data.map(K=>({id:K.id,text:K.text,createdAt:K.created_at,userId:K.user,userName:K.user_name,userRole:K.user_role}));return n.note&&(i.updateNote(n.note.id,{comments:X}),p.value.comments=X),X}catch(B){return f.error("[NoteEditModal] Erreur lors du chargement des commentaires:",B),s.error("Erreur lors du chargement des commentaires"),[]}}async function S(z){try{const X=(await Yo.getPhotos(z)).data.map(K=>({id:K.id,url:K.image,createdAt:K.created_at,caption:K.caption}));return n.note&&(i.updateNote(n.note.id,{photos:X}),p.value.photos=X),X}catch(B){return f.error("[NoteEditModal] Erreur lors du chargement des photos:",B),s.error("Erreur lors du chargement des photos"),[]}}async function T(){if(o.isAdmin)try{const z=await ha.getEntreprises();l.value=z.data}catch(z){f.error("[NoteEditModal] Erreur lors du chargement des entreprises:",z),s.error("Erreur lors du chargement des entreprises")}}Ks(async()=>{var z;if(await i.loadColumns(),await T(),n.note){const B=JSON.parse(JSON.stringify(n.note));B.createdAt=m(B.createdAt),B.updatedAt=m(B.updatedAt),p.value=B,o.isAdmin&&B.enterprise_id&&(c.value=B.enterprise_id),n.note.id&&await Promise.all([C(n.note.id),S(n.note.id)])}else if(n.isNewNote){if(p.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Rr.PRIVATE,style:{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:null},!o.isAdmin&&((z=o.user)!=null&&z.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id),n.location){const B=y(n.location);p.value.location=B}}else f.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note")});const O=ir(()=>i.getSortedColumns),D=ir(()=>{var B;return((B=p.value.comments)==null?void 0:B.length)||0}),N=ir(()=>{var B;return((B=p.value.photos)==null?void 0:B.length)||0}),U=[{id:Rr.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Rr.COMPANY,title:"Entreprise",description:"Visible par l'entreprise"},{id:Rr.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:Rr.VISITOR,title:"Visiteurs",description:"Visible par l'entreprise, ses salariés et ses visiteurs"}],W=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],ee=z=>{var B;if(p.value.style?(p.value.style.color=z,p.value.style.fillColor=z):p.value.style={color:z,weight:2,opacity:1,fillColor:z,fillOpacity:.6,radius:8},p.value.color=z,(B=n.note)!=null&&B.id){const X=new CustomEvent("geonote:updateStyle",{detail:{noteId:n.note.id,style:{color:z,fillColor:z}}});window.dispatchEvent(X);const K=new CustomEvent("geonote:update",{detail:{noteId:n.note.id,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style}}});window.dispatchEvent(K)}},te=()=>{var z,B,X,K,ye,Te,Ue,J,ie,se,pe;p.value={title:((z=n.note)==null?void 0:z.title)||"",description:((B=n.note)==null?void 0:B.description)||"",columnId:((X=n.note)==null?void 0:X.columnId)||"",accessLevel:((K=n.note)==null?void 0:K.accessLevel)||"private",style:((ye=n.note)==null?void 0:ye.style)||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},location:n.location||((Te=n.note)==null?void 0:Te.location)||null,comments:((Ue=n.note)==null?void 0:Ue.comments)||[],photos:((J=n.note)==null?void 0:J.photos)||[],enterprise_id:((ie=n.note)==null?void 0:ie.enterprise_id)||null},o.isAdmin&&((se=n.note)!=null&&se.enterprise_id)&&(c.value=n.note.enterprise_id),!o.isAdmin&&!p.value.enterprise_id&&((pe=o.user)!=null&&pe.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id)};Ks(()=>{te()}),vi(()=>n.note,()=>{te()},{deep:!0});function V(){r("close")}async function Y(){n.note&&n.note.id&&await C(n.note.id)}async function de(){n.note&&n.note.id&&await S(n.note.id)}async function $(){n.note&&n.note.id&&await C(n.note.id)}async function H(){n.note&&n.note.id&&await S(n.note.id)}async function le(){var z,B;try{const X=p.value.style.color;p.value.style={...p.value.style,color:X,fillColor:X,weight:2,opacity:1,fillOpacity:.6,radius:8};const K={title:p.value.title,description:p.value.description,columnId:p.value.columnId,style:p.value.style,access_level:p.value.accessLevel,comments:p.value.comments||[],photos:p.value.photos||[],color:X,enterprise_id:o.isAdmin?c.value:p.value.enterprise_id};!o.isAdmin&&((z=o.user)!=null&&z.enterprise_id)&&(K.enterprise_id=o.user.enterprise_id),p.value.location&&(K.location=Array.isArray(p.value.location)?{type:"Point",coordinates:[p.value.location[1],p.value.location[0]]}:p.value.location);let ye;if((B=n.note)!=null&&B.id){const Te=n.note.backendId||n.note.id;K.backendId=n.note.backendId,ye=(await Yo.updateNote(Te,K)).data,i.updateNote(Te,{...p.value,...ye,accessLevel:p.value.accessLevel,style:p.value.style,color:X,updatedAt:new Date().toISOString(),enterprise_id:K.enterprise_id,enterprise_name:p.value.enterprise_name});const J=n.note.leafletId||n.note.id,ie=new CustomEvent("geonote:update",{detail:{noteId:J,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style,color:X}}});window.dispatchEvent(ie),s.success("Note mise à jour avec succès")}else{if(ye=(await Yo.createNote(K)).data,!ye.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const Ue=i.getDefaultColumn,J={...K,id:ye.id,columnId:K.columnId||Ue.id,accessLevel:p.value.accessLevel,style:K.style,color:X};i.addNote(J),s.success("Note créée avec succès")}ye&&(!ye.comments&&p.value.comments&&(ye.comments=p.value.comments),!ye.photos&&p.value.photos&&(ye.photos=p.value.photos),ye.color=X,ye.style={...ye.style,color:X,fillColor:X}),r("save",ye),r("close")}catch(X){f.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",X),s.error("Erreur lors de la sauvegarde de la note")}}function ae(z){z.stopPropagation()}return(z,B)=>{var X;return Ne(),je("div",{class:"modal-overlay",onClick:ae},[P("div",{class:"modal-container",onClick:B[8]||(B[8]=Rl(()=>{},["stop"]))},[P("form",{onSubmit:Rl(le,["prevent"]),class:"modal-form"},[P("div",Mz,[P("h3",Az,zt((X=z.note)!=null&&X.id?"Modifier la note":"Nouvelle note"),1),P("button",{type:"button",onClick:V,class:"close-button"},B[9]||(B[9]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",Tz,[P("button",{type:"button",onClick:B[0]||(B[0]=K=>a.value="info"),class:Si(["tab-button",{active:a.value==="info"}])}," Informations ",2),P("button",{type:"button",onClick:B[1]||(B[1]=K=>a.value="comments"),class:Si(["tab-button",{active:a.value==="comments"}])},[B[10]||(B[10]=jr(" Commentaires ")),D.value>0?(Ne(),je("span",Oz,zt(D.value),1)):Kt("",!0)],2),P("button",{type:"button",onClick:B[2]||(B[2]=K=>a.value="photos"),class:Si(["tab-button",{active:a.value==="photos"}])},[B[11]||(B[11]=jr(" Photos ")),N.value>0?(Ne(),je("span",Dz,zt(N.value),1)):Kt("",!0)],2)]),P("div",Iz,[a.value==="info"?(Ne(),je("div",Nz,[P("div",Bz,[B[12]||(B[12]=P("label",{for:"title"},"Titre",-1)),Fn(P("input",{type:"text",id:"title","onUpdate:modelValue":B[3]||(B[3]=K=>p.value.title=K),required:""},null,512),[[fi,p.value.title]])]),P("div",Rz,[B[13]||(B[13]=P("label",{for:"description"},"Description",-1)),Fn(P("textarea",{id:"description","onUpdate:modelValue":B[4]||(B[4]=K=>p.value.description=K),rows:"3"},null,512),[[fi,p.value.description]])]),p.value.location?(Ne(),je("div",Fz,B[14]||(B[14]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1),P("span",null,"Note géolocalisée",-1)]))):Kt("",!0),P("div",jz,[B[15]||(B[15]=P("label",{for:"column"},"État",-1)),Fn(P("select",{id:"column","onUpdate:modelValue":B[5]||(B[5]=K=>p.value.columnId=K)},[(Ne(!0),je(bn,null,ar(O.value,K=>(Ne(),je("option",{key:K.id,value:K.id},zt(K.title),9,zz))),128))],512),[[ss,p.value.columnId]])]),_n(o).isAdmin?(Ne(),je("div",Uz,[B[17]||(B[17]=P("label",{for:"enterprise"},"Entreprise",-1)),Fn(P("select",{id:"enterprise","onUpdate:modelValue":B[6]||(B[6]=K=>c.value=K)},[B[16]||(B[16]=P("option",{value:null},"Sélectionner une entreprise",-1)),(Ne(!0),je(bn,null,ar(l.value,K=>(Ne(),je("option",{key:K.id,value:K.id},zt(K.company_name||`${K.first_name} ${K.last_name}`),9,$z))),128))],512),[[ss,c.value]])])):Kt("",!0),P("div",Vz,[B[18]||(B[18]=P("label",{for:"accessLevel"},"Niveau d'accès",-1)),Fn(P("select",{id:"accessLevel","onUpdate:modelValue":B[7]||(B[7]=K=>p.value.accessLevel=K)},[(Ne(),je(bn,null,ar(U,K=>P("option",{key:K.id,value:K.id},zt(K.title)+" - "+zt(K.description),9,Hz)),64))],512),[[ss,p.value.accessLevel]])]),P("div",Wz,[B[19]||(B[19]=P("label",null,"Couleur",-1)),P("div",Gz,[(Ne(),je(bn,null,ar(W,K=>P("div",{key:K,class:Si(["color-option",{selected:p.value.style.color===K}]),style:Fl({backgroundColor:K}),onClick:ye=>ee(K)},null,14,qz)),64))])])])):a.value==="comments"?(Ne(),je("div",Yz,[z.note?(Ne(),Lo(cz,{key:0,noteId:z.note.id,comments:p.value.comments||[],onCommentAdded:Y,onCommentDeleted:$},null,8,["noteId","comments"])):Kt("",!0)])):a.value==="photos"?(Ne(),je("div",Zz,[z.note?(Ne(),Lo(kz,{key:0,noteId:z.note.id,photos:p.value.photos||[],onPhotoAdded:de,onPhotoDeleted:H},null,8,["noteId","photos"])):Kt("",!0)])):Kt("",!0)]),P("div",{class:"modal-footer"},[B[20]||(B[20]=P("button",{type:"submit",class:"primary-button"},"Enregistrer",-1)),P("button",{type:"button",onClick:V,class:"secondary-button"},"Annuler")])],32)])])}}}),kS=$c(Kz,[["__scopeId","data-v-0050ae69"]]);(()=>{var xn,Hn;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(h,g)=>()=>(g||h((g={exports:{}}).exports,g),g.exports),a=(h,g,_,x)=>{if(g&&typeof g=="object"||typeof g=="function")for(let k of r(g))!s.call(h,k)&&k!==_&&e(h,k,{get:()=>g[k],enumerable:!(x=n(g,k))||x.enumerable});return h},l=(h,g,_)=>(_=h!=null?t(i(h)):{},a(g||!h||!h.__esModule?e(_,"default",{value:h,enumerable:!0}):_,h)),c=o((h,g)=>{function _(){this.__data__=[],this.size=0}g.exports=_}),f=o((h,g)=>{function _(x,k){return x===k||x!==x&&k!==k}g.exports=_}),p=o((h,g)=>{var _=f();function x(k,R){for(var G=k.length;G--;)if(_(k[G][0],R))return G;return-1}g.exports=x}),y=o((h,g)=>{var _=p(),x=Array.prototype,k=x.splice;function R(G){var Z=this.__data__,he=_(Z,G);if(he<0)return!1;var _e=Z.length-1;return he==_e?Z.pop():k.call(Z,he,1),--this.size,!0}g.exports=R}),m=o((h,g)=>{var _=p();function x(k){var R=this.__data__,G=_(R,k);return G<0?void 0:R[G][1]}g.exports=x}),C=o((h,g)=>{var _=p();function x(k){return _(this.__data__,k)>-1}g.exports=x}),S=o((h,g)=>{var _=p();function x(k,R){var G=this.__data__,Z=_(G,k);return Z<0?(++this.size,G.push([k,R])):G[Z][1]=R,this}g.exports=x}),T=o((h,g)=>{var _=c(),x=y(),k=m(),R=C(),G=S();function Z(he){var _e=-1,Ge=he==null?0:he.length;for(this.clear();++_e<Ge;){var ze=he[_e];this.set(ze[0],ze[1])}}Z.prototype.clear=_,Z.prototype.delete=x,Z.prototype.get=k,Z.prototype.has=R,Z.prototype.set=G,g.exports=Z}),O=o((h,g)=>{var _=T();function x(){this.__data__=new _,this.size=0}g.exports=x}),D=o((h,g)=>{function _(x){var k=this.__data__,R=k.delete(x);return this.size=k.size,R}g.exports=_}),N=o((h,g)=>{function _(x){return this.__data__.get(x)}g.exports=_}),U=o((h,g)=>{function _(x){return this.__data__.has(x)}g.exports=_}),W=o((h,g)=>{var _=typeof Zo=="object"&&Zo&&Zo.Object===Object&&Zo;g.exports=_}),ee=o((h,g)=>{var _=W(),x=typeof self=="object"&&self&&self.Object===Object&&self,k=_||x||Function("return this")();g.exports=k}),te=o((h,g)=>{var _=ee(),x=_.Symbol;g.exports=x}),V=o((h,g)=>{var _=te(),x=Object.prototype,k=x.hasOwnProperty,R=x.toString,G=_?_.toStringTag:void 0;function Z(he){var _e=k.call(he,G),Ge=he[G];try{he[G]=void 0;var ze=!0}catch{}var vt=R.call(he);return ze&&(_e?he[G]=Ge:delete he[G]),vt}g.exports=Z}),Y=o((h,g)=>{var _=Object.prototype,x=_.toString;function k(R){return x.call(R)}g.exports=k}),de=o((h,g)=>{var _=te(),x=V(),k=Y(),R="[object Null]",G="[object Undefined]",Z=_?_.toStringTag:void 0;function he(_e){return _e==null?_e===void 0?G:R:Z&&Z in Object(_e)?x(_e):k(_e)}g.exports=he}),$=o((h,g)=>{function _(x){var k=typeof x;return x!=null&&(k=="object"||k=="function")}g.exports=_}),H=o((h,g)=>{var _=de(),x=$(),k="[object AsyncFunction]",R="[object Function]",G="[object GeneratorFunction]",Z="[object Proxy]";function he(_e){if(!x(_e))return!1;var Ge=_(_e);return Ge==R||Ge==G||Ge==k||Ge==Z}g.exports=he}),le=o((h,g)=>{var _=ee(),x=_["__core-js_shared__"];g.exports=x}),ae=o((h,g)=>{var _=le(),x=function(){var R=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""}();function k(R){return!!x&&x in R}g.exports=k}),z=o((h,g)=>{var _=Function.prototype,x=_.toString;function k(R){if(R!=null){try{return x.call(R)}catch{}try{return R+""}catch{}}return""}g.exports=k}),B=o((h,g)=>{var _=H(),x=ae(),k=$(),R=z(),G=/[\\^$.*+?()[\]{}|]/g,Z=/^\[object .+?Constructor\]$/,he=Function.prototype,_e=Object.prototype,Ge=he.toString,ze=_e.hasOwnProperty,vt=RegExp("^"+Ge.call(ze).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function At(qt){if(!k(qt)||x(qt))return!1;var dn=_(qt)?vt:Z;return dn.test(R(qt))}g.exports=At}),X=o((h,g)=>{function _(x,k){return x==null?void 0:x[k]}g.exports=_}),K=o((h,g)=>{var _=B(),x=X();function k(R,G){var Z=x(R,G);return _(Z)?Z:void 0}g.exports=k}),ye=o((h,g)=>{var _=K(),x=ee(),k=_(x,"Map");g.exports=k}),Te=o((h,g)=>{var _=K(),x=_(Object,"create");g.exports=x}),Ue=o((h,g)=>{var _=Te();function x(){this.__data__=_?_(null):{},this.size=0}g.exports=x}),J=o((h,g)=>{function _(x){var k=this.has(x)&&delete this.__data__[x];return this.size-=k?1:0,k}g.exports=_}),ie=o((h,g)=>{var _=Te(),x="__lodash_hash_undefined__",k=Object.prototype,R=k.hasOwnProperty;function G(Z){var he=this.__data__;if(_){var _e=he[Z];return _e===x?void 0:_e}return R.call(he,Z)?he[Z]:void 0}g.exports=G}),se=o((h,g)=>{var _=Te(),x=Object.prototype,k=x.hasOwnProperty;function R(G){var Z=this.__data__;return _?Z[G]!==void 0:k.call(Z,G)}g.exports=R}),pe=o((h,g)=>{var _=Te(),x="__lodash_hash_undefined__";function k(R,G){var Z=this.__data__;return this.size+=this.has(R)?0:1,Z[R]=_&&G===void 0?x:G,this}g.exports=k}),we=o((h,g)=>{var _=Ue(),x=J(),k=ie(),R=se(),G=pe();function Z(he){var _e=-1,Ge=he==null?0:he.length;for(this.clear();++_e<Ge;){var ze=he[_e];this.set(ze[0],ze[1])}}Z.prototype.clear=_,Z.prototype.delete=x,Z.prototype.get=k,Z.prototype.has=R,Z.prototype.set=G,g.exports=Z}),be=o((h,g)=>{var _=we(),x=T(),k=ye();function R(){this.size=0,this.__data__={hash:new _,map:new(k||x),string:new _}}g.exports=R}),Ae=o((h,g)=>{function _(x){var k=typeof x;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?x!=="__proto__":x===null}g.exports=_}),Ee=o((h,g)=>{var _=Ae();function x(k,R){var G=k.__data__;return _(R)?G[typeof R=="string"?"string":"hash"]:G.map}g.exports=x}),Je=o((h,g)=>{var _=Ee();function x(k){var R=_(this,k).delete(k);return this.size-=R?1:0,R}g.exports=x}),gt=o((h,g)=>{var _=Ee();function x(k){return _(this,k).get(k)}g.exports=x}),_t=o((h,g)=>{var _=Ee();function x(k){return _(this,k).has(k)}g.exports=x}),ue=o((h,g)=>{var _=Ee();function x(k,R){var G=_(this,k),Z=G.size;return G.set(k,R),this.size+=G.size==Z?0:1,this}g.exports=x}),oe=o((h,g)=>{var _=be(),x=Je(),k=gt(),R=_t(),G=ue();function Z(he){var _e=-1,Ge=he==null?0:he.length;for(this.clear();++_e<Ge;){var ze=he[_e];this.set(ze[0],ze[1])}}Z.prototype.clear=_,Z.prototype.delete=x,Z.prototype.get=k,Z.prototype.has=R,Z.prototype.set=G,g.exports=Z}),ce=o((h,g)=>{var _=T(),x=ye(),k=oe(),R=200;function G(Z,he){var _e=this.__data__;if(_e instanceof _){var Ge=_e.__data__;if(!x||Ge.length<R-1)return Ge.push([Z,he]),this.size=++_e.size,this;_e=this.__data__=new k(Ge)}return _e.set(Z,he),this.size=_e.size,this}g.exports=G}),Q=o((h,g)=>{var _=T(),x=O(),k=D(),R=N(),G=U(),Z=ce();function he(_e){var Ge=this.__data__=new _(_e);this.size=Ge.size}he.prototype.clear=x,he.prototype.delete=k,he.prototype.get=R,he.prototype.has=G,he.prototype.set=Z,g.exports=he}),Pe=o((h,g)=>{var _=K(),x=function(){try{var k=_(Object,"defineProperty");return k({},"",{}),k}catch{}}();g.exports=x}),Ve=o((h,g)=>{var _=Pe();function x(k,R,G){R=="__proto__"&&_?_(k,R,{configurable:!0,enumerable:!0,value:G,writable:!0}):k[R]=G}g.exports=x}),Qe=o((h,g)=>{var _=Ve(),x=f();function k(R,G,Z){(Z!==void 0&&!x(R[G],Z)||Z===void 0&&!(G in R))&&_(R,G,Z)}g.exports=k}),ot=o((h,g)=>{function _(x){return function(k,R,G){for(var Z=-1,he=Object(k),_e=G(k),Ge=_e.length;Ge--;){var ze=_e[x?Ge:++Z];if(R(he[ze],ze,he)===!1)break}return k}}g.exports=_}),at=o((h,g)=>{var _=ot(),x=_();g.exports=x}),pt=o((h,g)=>{var _=ee(),x=typeof h=="object"&&h&&!h.nodeType&&h,k=x&&typeof g=="object"&&g&&!g.nodeType&&g,R=k&&k.exports===x,G=R?_.Buffer:void 0,Z=G?G.allocUnsafe:void 0;function he(_e,Ge){if(Ge)return _e.slice();var ze=_e.length,vt=Z?Z(ze):new _e.constructor(ze);return _e.copy(vt),vt}g.exports=he}),Ft=o((h,g)=>{var _=ee(),x=_.Uint8Array;g.exports=x}),Bt=o((h,g)=>{var _=Ft();function x(k){var R=new k.constructor(k.byteLength);return new _(R).set(new _(k)),R}g.exports=x}),Zt=o((h,g)=>{var _=Bt();function x(k,R){var G=R?_(k.buffer):k.buffer;return new k.constructor(G,k.byteOffset,k.length)}g.exports=x}),ln=o((h,g)=>{function _(x,k){var R=-1,G=x.length;for(k||(k=Array(G));++R<G;)k[R]=x[R];return k}g.exports=_}),un=o((h,g)=>{var _=$(),x=Object.create,k=function(){function R(){}return function(G){if(!_(G))return{};if(x)return x(G);R.prototype=G;var Z=new R;return R.prototype=void 0,Z}}();g.exports=k}),Sn=o((h,g)=>{function _(x,k){return function(R){return x(k(R))}}g.exports=_}),qe=o((h,g)=>{var _=Sn(),x=_(Object.getPrototypeOf,Object);g.exports=x}),it=o((h,g)=>{var _=Object.prototype;function x(k){var R=k&&k.constructor,G=typeof R=="function"&&R.prototype||_;return k===G}g.exports=x}),Ze=o((h,g)=>{var _=un(),x=qe(),k=it();function R(G){return typeof G.constructor=="function"&&!k(G)?_(x(G)):{}}g.exports=R}),Ut=o((h,g)=>{function _(x){return x!=null&&typeof x=="object"}g.exports=_}),Yt=o((h,g)=>{var _=de(),x=Ut(),k="[object Arguments]";function R(G){return x(G)&&_(G)==k}g.exports=R}),Ln=o((h,g)=>{var _=Yt(),x=Ut(),k=Object.prototype,R=k.hasOwnProperty,G=k.propertyIsEnumerable,Z=_(function(){return arguments}())?_:function(he){return x(he)&&R.call(he,"callee")&&!G.call(he,"callee")};g.exports=Z}),gn=o((h,g)=>{var _=Array.isArray;g.exports=_}),vn=o((h,g)=>{var _=9007199254740991;function x(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=_}g.exports=x}),jn=o((h,g)=>{var _=H(),x=vn();function k(R){return R!=null&&x(R.length)&&!_(R)}g.exports=k}),mn=o((h,g)=>{var _=jn(),x=Ut();function k(R){return x(R)&&_(R)}g.exports=k}),Jt=o((h,g)=>{function _(){return!1}g.exports=_}),cn=o((h,g)=>{var _=ee(),x=Jt(),k=typeof h=="object"&&h&&!h.nodeType&&h,R=k&&typeof g=="object"&&g&&!g.nodeType&&g,G=R&&R.exports===k,Z=G?_.Buffer:void 0,he=Z?Z.isBuffer:void 0,_e=he||x;g.exports=_e}),qn=o((h,g)=>{var _=de(),x=qe(),k=Ut(),R="[object Object]",G=Function.prototype,Z=Object.prototype,he=G.toString,_e=Z.hasOwnProperty,Ge=he.call(Object);function ze(vt){if(!k(vt)||_(vt)!=R)return!1;var At=x(vt);if(At===null)return!0;var qt=_e.call(At,"constructor")&&At.constructor;return typeof qt=="function"&&qt instanceof qt&&he.call(qt)==Ge}g.exports=ze}),Kn=o((h,g)=>{var _=de(),x=vn(),k=Ut(),R="[object Arguments]",G="[object Array]",Z="[object Boolean]",he="[object Date]",_e="[object Error]",Ge="[object Function]",ze="[object Map]",vt="[object Number]",At="[object Object]",qt="[object RegExp]",dn="[object Set]",yn="[object String]",nr="[object WeakMap]",We="[object ArrayBuffer]",Ye="[object DataView]",lt="[object Float32Array]",It="[object Float64Array]",wt="[object Int8Array]",Tt="[object Int16Array]",fe="[object Int32Array]",Ce="[object Uint8Array]",Ie="[object Uint8ClampedArray]",De="[object Uint16Array]",Re="[object Uint32Array]",Fe={};Fe[lt]=Fe[It]=Fe[wt]=Fe[Tt]=Fe[fe]=Fe[Ce]=Fe[Ie]=Fe[De]=Fe[Re]=!0,Fe[R]=Fe[G]=Fe[We]=Fe[Z]=Fe[Ye]=Fe[he]=Fe[_e]=Fe[Ge]=Fe[ze]=Fe[vt]=Fe[At]=Fe[qt]=Fe[dn]=Fe[yn]=Fe[nr]=!1;function tt(rt){return k(rt)&&x(rt.length)&&!!Fe[_(rt)]}g.exports=tt}),rr=o((h,g)=>{function _(x){return function(k){return x(k)}}g.exports=_}),zn=o((h,g)=>{var _=W(),x=typeof h=="object"&&h&&!h.nodeType&&h,k=x&&typeof g=="object"&&g&&!g.nodeType&&g,R=k&&k.exports===x,G=R&&_.process,Z=function(){try{var he=k&&k.require&&k.require("util").types;return he||G&&G.binding&&G.binding("util")}catch{}}();g.exports=Z}),_r=o((h,g)=>{var _=Kn(),x=rr(),k=zn(),R=k&&k.isTypedArray,G=R?x(R):_;g.exports=G}),Ri=o((h,g)=>{function _(x,k){if(!(k==="constructor"&&typeof x[k]=="function")&&k!="__proto__")return x[k]}g.exports=_}),Pi=o((h,g)=>{var _=Ve(),x=f(),k=Object.prototype,R=k.hasOwnProperty;function G(Z,he,_e){var Ge=Z[he];(!(R.call(Z,he)&&x(Ge,_e))||_e===void 0&&!(he in Z))&&_(Z,he,_e)}g.exports=G}),Rs=o((h,g)=>{var _=Pi(),x=Ve();function k(R,G,Z,he){var _e=!Z;Z||(Z={});for(var Ge=-1,ze=G.length;++Ge<ze;){var vt=G[Ge],At=he?he(Z[vt],R[vt],vt,Z,R):void 0;At===void 0&&(At=R[vt]),_e?x(Z,vt,At):_(Z,vt,At)}return Z}g.exports=k}),ls=o((h,g)=>{function _(x,k){for(var R=-1,G=Array(x);++R<x;)G[R]=k(R);return G}g.exports=_}),mt=o((h,g)=>{var _=9007199254740991,x=/^(?:0|[1-9]\d*)$/;function k(R,G){var Z=typeof R;return G=G??_,!!G&&(Z=="number"||Z!="symbol"&&x.test(R))&&R>-1&&R%1==0&&R<G}g.exports=k}),Ke=o((h,g)=>{var _=ls(),x=Ln(),k=gn(),R=cn(),G=mt(),Z=_r(),he=Object.prototype,_e=he.hasOwnProperty;function Ge(ze,vt){var At=k(ze),qt=!At&&x(ze),dn=!At&&!qt&&R(ze),yn=!At&&!qt&&!dn&&Z(ze),nr=At||qt||dn||yn,We=nr?_(ze.length,String):[],Ye=We.length;for(var lt in ze)(vt||_e.call(ze,lt))&&!(nr&&(lt=="length"||dn&&(lt=="offset"||lt=="parent")||yn&&(lt=="buffer"||lt=="byteLength"||lt=="byteOffset")||G(lt,Ye)))&&We.push(lt);return We}g.exports=Ge}),$t=o((h,g)=>{function _(x){var k=[];if(x!=null)for(var R in Object(x))k.push(R);return k}g.exports=_}),On=o((h,g)=>{var _=$(),x=it(),k=$t(),R=Object.prototype,G=R.hasOwnProperty;function Z(he){if(!_(he))return k(he);var _e=x(he),Ge=[];for(var ze in he)ze=="constructor"&&(_e||!G.call(he,ze))||Ge.push(ze);return Ge}g.exports=Z}),Dn=o((h,g)=>{var _=Ke(),x=On(),k=jn();function R(G){return k(G)?_(G,!0):x(G)}g.exports=R}),Gt=o((h,g)=>{var _=Rs(),x=Dn();function k(R){return _(R,x(R))}g.exports=k}),on=o((h,g)=>{var _=Qe(),x=pt(),k=Zt(),R=ln(),G=Ze(),Z=Ln(),he=gn(),_e=mn(),Ge=cn(),ze=H(),vt=$(),At=qn(),qt=_r(),dn=Ri(),yn=Gt();function nr(We,Ye,lt,It,wt,Tt,fe){var Ce=dn(We,lt),Ie=dn(Ye,lt),De=fe.get(Ie);if(De){_(We,lt,De);return}var Re=Tt?Tt(Ce,Ie,lt+"",We,Ye,fe):void 0,Fe=Re===void 0;if(Fe){var tt=he(Ie),rt=!tt&&Ge(Ie),ht=!tt&&!rt&&qt(Ie);Re=Ie,tt||rt||ht?he(Ce)?Re=Ce:_e(Ce)?Re=R(Ce):rt?(Fe=!1,Re=x(Ie,!0)):ht?(Fe=!1,Re=k(Ie,!0)):Re=[]:At(Ie)||Z(Ie)?(Re=Ce,Z(Ce)?Re=yn(Ce):(!vt(Ce)||ze(Ce))&&(Re=G(Ie))):Fe=!1}Fe&&(fe.set(Ie,Re),wt(Re,Ie,It,Tt,fe),fe.delete(Ie)),_(We,lt,Re)}g.exports=nr}),dt=o((h,g)=>{var _=Q(),x=Qe(),k=at(),R=on(),G=$(),Z=Dn(),he=Ri();function _e(Ge,ze,vt,At,qt){Ge!==ze&&k(ze,function(dn,yn){if(qt||(qt=new _),G(dn))R(Ge,ze,yn,vt,_e,At,qt);else{var nr=At?At(he(Ge,yn),dn,yn+"",Ge,ze,qt):void 0;nr===void 0&&(nr=dn),x(Ge,yn,nr)}},Z)}g.exports=_e}),fn=o((h,g)=>{function _(x){return x}g.exports=_}),wn=o((h,g)=>{function _(x,k,R){switch(R.length){case 0:return x.call(k);case 1:return x.call(k,R[0]);case 2:return x.call(k,R[0],R[1]);case 3:return x.call(k,R[0],R[1],R[2])}return x.apply(k,R)}g.exports=_}),Tn=o((h,g)=>{var _=wn(),x=Math.max;function k(R,G,Z){return G=x(G===void 0?R.length-1:G,0),function(){for(var he=arguments,_e=-1,Ge=x(he.length-G,0),ze=Array(Ge);++_e<Ge;)ze[_e]=he[G+_e];_e=-1;for(var vt=Array(G+1);++_e<G;)vt[_e]=he[_e];return vt[G]=Z(ze),_(R,this,vt)}}g.exports=k}),er=o((h,g)=>{function _(x){return function(){return x}}g.exports=_}),tr=o((h,g)=>{var _=er(),x=Pe(),k=fn(),R=x?function(G,Z){return x(G,"toString",{configurable:!0,enumerable:!1,value:_(Z),writable:!0})}:k;g.exports=R}),Ur=o((h,g)=>{var _=800,x=16,k=Date.now;function R(G){var Z=0,he=0;return function(){var _e=k(),Ge=x-(_e-he);if(he=_e,Ge>0){if(++Z>=_)return arguments[0]}else Z=0;return G.apply(void 0,arguments)}}g.exports=R}),Xn=o((h,g)=>{var _=tr(),x=Ur(),k=x(_);g.exports=k}),Ai=o((h,g)=>{var _=fn(),x=Tn(),k=Xn();function R(G,Z){return k(x(G,Z,_),G+"")}g.exports=R}),Wr=o((h,g)=>{var _=f(),x=jn(),k=mt(),R=$();function G(Z,he,_e){if(!R(_e))return!1;var Ge=typeof he;return(Ge=="number"?x(_e)&&k(he,_e.length):Ge=="string"&&he in _e)?_(_e[he],Z):!1}g.exports=G}),Xo=o((h,g)=>{var _=Ai(),x=Wr();function k(R){return _(function(G,Z){var he=-1,_e=Z.length,Ge=_e>1?Z[_e-1]:void 0,ze=_e>2?Z[2]:void 0;for(Ge=R.length>3&&typeof Ge=="function"?(_e--,Ge):void 0,ze&&x(Z[0],Z[1],ze)&&(Ge=_e<3?void 0:Ge,_e=1),G=Object(G);++he<_e;){var vt=Z[he];vt&&R(G,vt,he,Ge)}return G})}g.exports=k}),or=o((h,g)=>{var _=dt(),x=Xo(),k=x(function(R,G,Z){_(R,G,Z)});g.exports=k}),lr=o((h,g)=>{var _=de(),x=Ut(),k="[object Symbol]";function R(G){return typeof G=="symbol"||x(G)&&_(G)==k}g.exports=R}),us=o((h,g)=>{var _=gn(),x=lr(),k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/;function G(Z,he){if(_(Z))return!1;var _e=typeof Z;return _e=="number"||_e=="symbol"||_e=="boolean"||Z==null||x(Z)?!0:R.test(Z)||!k.test(Z)||he!=null&&Z in Object(he)}g.exports=G}),Do=o((h,g)=>{var _=oe(),x="Expected a function";function k(R,G){if(typeof R!="function"||G!=null&&typeof G!="function")throw new TypeError(x);var Z=function(){var he=arguments,_e=G?G.apply(this,he):he[0],Ge=Z.cache;if(Ge.has(_e))return Ge.get(_e);var ze=R.apply(this,he);return Z.cache=Ge.set(_e,ze)||Ge,ze};return Z.cache=new(k.Cache||_),Z}k.Cache=_,g.exports=k}),Hc=o((h,g)=>{var _=Do(),x=500;function k(R){var G=_(R,function(he){return Z.size===x&&Z.clear(),he}),Z=G.cache;return G}g.exports=k}),hu=o((h,g)=>{var _=Hc(),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,R=_(function(G){var Z=[];return G.charCodeAt(0)===46&&Z.push(""),G.replace(x,function(he,_e,Ge,ze){Z.push(Ge?ze.replace(k,"$1"):_e||he)}),Z});g.exports=R}),hc=o((h,g)=>{function _(x,k){for(var R=-1,G=x==null?0:x.length,Z=Array(G);++R<G;)Z[R]=k(x[R],R,x);return Z}g.exports=_}),fc=o((h,g)=>{var _=te(),x=hc(),k=gn(),R=lr(),G=_?_.prototype:void 0,Z=G?G.toString:void 0;function he(_e){if(typeof _e=="string")return _e;if(k(_e))return x(_e,he)+"";if(R(_e))return Z?Z.call(_e):"";var Ge=_e+"";return Ge=="0"&&1/_e==-1/0?"-0":Ge}g.exports=he}),cl=o((h,g)=>{var _=fc();function x(k){return k==null?"":_(k)}g.exports=x}),hl=o((h,g)=>{var _=gn(),x=us(),k=hu(),R=cl();function G(Z,he){return _(Z)?Z:x(Z,he)?[Z]:k(R(Z))}g.exports=G}),Du=o((h,g)=>{var _=lr();function x(k){if(typeof k=="string"||_(k))return k;var R=k+"";return R=="0"&&1/k==-1/0?"-0":R}g.exports=x}),dc=o((h,g)=>{var _=hl(),x=Du();function k(R,G){G=_(G,R);for(var Z=0,he=G.length;R!=null&&Z<he;)R=R[x(G[Z++])];return Z&&Z==he?R:void 0}g.exports=k}),So=o((h,g)=>{var _=dc();function x(k,R,G){var Z=k==null?void 0:_(k,R);return Z===void 0?G:Z}g.exports=x}),Gr=o((h,g)=>{(function(_,x){typeof h=="object"&&typeof g<"u"?g.exports=x():(_=_||self).RBush=x()})(h,function(){function _(We,Ye,lt,It,wt){(function Tt(fe,Ce,Ie,De,Re){for(;De>Ie;){if(De-Ie>600){var Fe=De-Ie+1,tt=Ce-Ie+1,rt=Math.log(Fe),ht=.5*Math.exp(2*rt/3),Ct=.5*Math.sqrt(rt*ht*(Fe-ht)/Fe)*(tt-Fe/2<0?-1:1),St=Math.max(Ie,Math.floor(Ce-tt*ht/Fe+Ct)),en=Math.min(De,Math.floor(Ce+(Fe-tt)*ht/Fe+Ct));Tt(fe,Ce,St,en,Re)}var Nn=fe[Ce],Rn=Ie,Wn=De;for(x(fe,Ie,Ce),Re(fe[De],Nn)>0&&x(fe,Ie,De);Rn<Wn;){for(x(fe,Rn,Wn),Rn++,Wn--;Re(fe[Rn],Nn)<0;)Rn++;for(;Re(fe[Wn],Nn)>0;)Wn--}Re(fe[Ie],Nn)===0?x(fe,Ie,Wn):x(fe,++Wn,De),Wn<=Ce&&(Ie=Wn+1),Ce<=Wn&&(De=Wn-1)}})(We,Ye,lt||0,It||We.length-1,wt||k)}function x(We,Ye,lt){var It=We[Ye];We[Ye]=We[lt],We[lt]=It}function k(We,Ye){return We<Ye?-1:We>Ye?1:0}var R=function(We){We===void 0&&(We=9),this._maxEntries=Math.max(4,We),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function G(We,Ye,lt){if(!lt)return Ye.indexOf(We);for(var It=0;It<Ye.length;It++)if(lt(We,Ye[It]))return It;return-1}function Z(We,Ye){he(We,0,We.children.length,Ye,We)}function he(We,Ye,lt,It,wt){wt||(wt=yn(null)),wt.minX=1/0,wt.minY=1/0,wt.maxX=-1/0,wt.maxY=-1/0;for(var Tt=Ye;Tt<lt;Tt++){var fe=We.children[Tt];_e(wt,We.leaf?It(fe):fe)}return wt}function _e(We,Ye){return We.minX=Math.min(We.minX,Ye.minX),We.minY=Math.min(We.minY,Ye.minY),We.maxX=Math.max(We.maxX,Ye.maxX),We.maxY=Math.max(We.maxY,Ye.maxY),We}function Ge(We,Ye){return We.minX-Ye.minX}function ze(We,Ye){return We.minY-Ye.minY}function vt(We){return(We.maxX-We.minX)*(We.maxY-We.minY)}function At(We){return We.maxX-We.minX+(We.maxY-We.minY)}function qt(We,Ye){return We.minX<=Ye.minX&&We.minY<=Ye.minY&&Ye.maxX<=We.maxX&&Ye.maxY<=We.maxY}function dn(We,Ye){return Ye.minX<=We.maxX&&Ye.minY<=We.maxY&&Ye.maxX>=We.minX&&Ye.maxY>=We.minY}function yn(We){return{children:We,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function nr(We,Ye,lt,It,wt){for(var Tt=[Ye,lt];Tt.length;)if(!((lt=Tt.pop())-(Ye=Tt.pop())<=It)){var fe=Ye+Math.ceil((lt-Ye)/It/2)*It;_(We,fe,Ye,lt,wt),Tt.push(Ye,fe,fe,lt)}}return R.prototype.all=function(){return this._all(this.data,[])},R.prototype.search=function(We){var Ye=this.data,lt=[];if(!dn(We,Ye))return lt;for(var It=this.toBBox,wt=[];Ye;){for(var Tt=0;Tt<Ye.children.length;Tt++){var fe=Ye.children[Tt],Ce=Ye.leaf?It(fe):fe;dn(We,Ce)&&(Ye.leaf?lt.push(fe):qt(We,Ce)?this._all(fe,lt):wt.push(fe))}Ye=wt.pop()}return lt},R.prototype.collides=function(We){var Ye=this.data;if(!dn(We,Ye))return!1;for(var lt=[];Ye;){for(var It=0;It<Ye.children.length;It++){var wt=Ye.children[It],Tt=Ye.leaf?this.toBBox(wt):wt;if(dn(We,Tt)){if(Ye.leaf||qt(We,Tt))return!0;lt.push(wt)}}Ye=lt.pop()}return!1},R.prototype.load=function(We){if(!We||!We.length)return this;if(We.length<this._minEntries){for(var Ye=0;Ye<We.length;Ye++)this.insert(We[Ye]);return this}var lt=this._build(We.slice(),0,We.length-1,0);if(this.data.children.length)if(this.data.height===lt.height)this._splitRoot(this.data,lt);else{if(this.data.height<lt.height){var It=this.data;this.data=lt,lt=It}this._insert(lt,this.data.height-lt.height-1,!0)}else this.data=lt;return this},R.prototype.insert=function(We){return We&&this._insert(We,this.data.height-1),this},R.prototype.clear=function(){return this.data=yn([]),this},R.prototype.remove=function(We,Ye){if(!We)return this;for(var lt,It,wt,Tt=this.data,fe=this.toBBox(We),Ce=[],Ie=[];Tt||Ce.length;){if(Tt||(Tt=Ce.pop(),It=Ce[Ce.length-1],lt=Ie.pop(),wt=!0),Tt.leaf){var De=G(We,Tt.children,Ye);if(De!==-1)return Tt.children.splice(De,1),Ce.push(Tt),this._condense(Ce),this}wt||Tt.leaf||!qt(Tt,fe)?It?(lt++,Tt=It.children[lt],wt=!1):Tt=null:(Ce.push(Tt),Ie.push(lt),lt=0,It=Tt,Tt=Tt.children[0])}return this},R.prototype.toBBox=function(We){return We},R.prototype.compareMinX=function(We,Ye){return We.minX-Ye.minX},R.prototype.compareMinY=function(We,Ye){return We.minY-Ye.minY},R.prototype.toJSON=function(){return this.data},R.prototype.fromJSON=function(We){return this.data=We,this},R.prototype._all=function(We,Ye){for(var lt=[];We;)We.leaf?Ye.push.apply(Ye,We.children):lt.push.apply(lt,We.children),We=lt.pop();return Ye},R.prototype._build=function(We,Ye,lt,It){var wt,Tt=lt-Ye+1,fe=this._maxEntries;if(Tt<=fe)return Z(wt=yn(We.slice(Ye,lt+1)),this.toBBox),wt;It||(It=Math.ceil(Math.log(Tt)/Math.log(fe)),fe=Math.ceil(Tt/Math.pow(fe,It-1))),(wt=yn([])).leaf=!1,wt.height=It;var Ce=Math.ceil(Tt/fe),Ie=Ce*Math.ceil(Math.sqrt(fe));nr(We,Ye,lt,Ie,this.compareMinX);for(var De=Ye;De<=lt;De+=Ie){var Re=Math.min(De+Ie-1,lt);nr(We,De,Re,Ce,this.compareMinY);for(var Fe=De;Fe<=Re;Fe+=Ce){var tt=Math.min(Fe+Ce-1,Re);wt.children.push(this._build(We,Fe,tt,It-1))}}return Z(wt,this.toBBox),wt},R.prototype._chooseSubtree=function(We,Ye,lt,It){for(;It.push(Ye),!Ye.leaf&&It.length-1!==lt;){for(var wt=1/0,Tt=1/0,fe=void 0,Ce=0;Ce<Ye.children.length;Ce++){var Ie=Ye.children[Ce],De=vt(Ie),Re=(Fe=We,tt=Ie,(Math.max(tt.maxX,Fe.maxX)-Math.min(tt.minX,Fe.minX))*(Math.max(tt.maxY,Fe.maxY)-Math.min(tt.minY,Fe.minY))-De);Re<Tt?(Tt=Re,wt=De<wt?De:wt,fe=Ie):Re===Tt&&De<wt&&(wt=De,fe=Ie)}Ye=fe||Ye.children[0]}var Fe,tt;return Ye},R.prototype._insert=function(We,Ye,lt){var It=lt?We:this.toBBox(We),wt=[],Tt=this._chooseSubtree(It,this.data,Ye,wt);for(Tt.children.push(We),_e(Tt,It);Ye>=0&&wt[Ye].children.length>this._maxEntries;)this._split(wt,Ye),Ye--;this._adjustParentBBoxes(It,wt,Ye)},R.prototype._split=function(We,Ye){var lt=We[Ye],It=lt.children.length,wt=this._minEntries;this._chooseSplitAxis(lt,wt,It);var Tt=this._chooseSplitIndex(lt,wt,It),fe=yn(lt.children.splice(Tt,lt.children.length-Tt));fe.height=lt.height,fe.leaf=lt.leaf,Z(lt,this.toBBox),Z(fe,this.toBBox),Ye?We[Ye-1].children.push(fe):this._splitRoot(lt,fe)},R.prototype._splitRoot=function(We,Ye){this.data=yn([We,Ye]),this.data.height=We.height+1,this.data.leaf=!1,Z(this.data,this.toBBox)},R.prototype._chooseSplitIndex=function(We,Ye,lt){for(var It,wt,Tt,fe,Ce,Ie,De,Re=1/0,Fe=1/0,tt=Ye;tt<=lt-Ye;tt++){var rt=he(We,0,tt,this.toBBox),ht=he(We,tt,lt,this.toBBox),Ct=(wt=rt,Tt=ht,fe=void 0,Ce=void 0,Ie=void 0,De=void 0,fe=Math.max(wt.minX,Tt.minX),Ce=Math.max(wt.minY,Tt.minY),Ie=Math.min(wt.maxX,Tt.maxX),De=Math.min(wt.maxY,Tt.maxY),Math.max(0,Ie-fe)*Math.max(0,De-Ce)),St=vt(rt)+vt(ht);Ct<Re?(Re=Ct,It=tt,Fe=St<Fe?St:Fe):Ct===Re&&St<Fe&&(Fe=St,It=tt)}return It||lt-Ye},R.prototype._chooseSplitAxis=function(We,Ye,lt){var It=We.leaf?this.compareMinX:Ge,wt=We.leaf?this.compareMinY:ze;this._allDistMargin(We,Ye,lt,It)<this._allDistMargin(We,Ye,lt,wt)&&We.children.sort(It)},R.prototype._allDistMargin=function(We,Ye,lt,It){We.children.sort(It);for(var wt=this.toBBox,Tt=he(We,0,Ye,wt),fe=he(We,lt-Ye,lt,wt),Ce=At(Tt)+At(fe),Ie=Ye;Ie<lt-Ye;Ie++){var De=We.children[Ie];_e(Tt,We.leaf?wt(De):De),Ce+=At(Tt)}for(var Re=lt-Ye-1;Re>=Ye;Re--){var Fe=We.children[Re];_e(fe,We.leaf?wt(Fe):Fe),Ce+=At(fe)}return Ce},R.prototype._adjustParentBBoxes=function(We,Ye,lt){for(var It=lt;It>=0;It--)_e(Ye[It],We)},R.prototype._condense=function(We){for(var Ye=We.length-1,lt=void 0;Ye>=0;Ye--)We[Ye].children.length===0?Ye>0?(lt=We[Ye-1].children).splice(lt.indexOf(We[Ye]),1):this.clear():Z(We[Ye],this.toBBox)},R})}),fr=o(h=>{Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:h.earthRadius*100,centimetres:h.earthRadius*100,degrees:h.earthRadius/111325,feet:h.earthRadius*3.28084,inches:h.earthRadius*39.37,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:h.earthRadius*1e3,millimetres:h.earthRadius*1e3,nauticalmiles:h.earthRadius/1852,radians:1,yards:h.earthRadius*1.0936},h.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g(De,Re,Fe){Fe===void 0&&(Fe={});var tt={type:"Feature"};return(Fe.id===0||Fe.id)&&(tt.id=Fe.id),Fe.bbox&&(tt.bbox=Fe.bbox),tt.properties=Re||{},tt.geometry=De,tt}h.feature=g;function _(De,Re,Fe){switch(De){case"Point":return x(Re).geometry;case"LineString":return Z(Re).geometry;case"Polygon":return R(Re).geometry;case"MultiPoint":return ze(Re).geometry;case"MultiLineString":return Ge(Re).geometry;case"MultiPolygon":return vt(Re).geometry;default:throw new Error(De+" is invalid")}}h.geometry=_;function x(De,Re,Fe){if(Fe===void 0&&(Fe={}),!De)throw new Error("coordinates is required");if(!Array.isArray(De))throw new Error("coordinates must be an Array");if(De.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Tt(De[0])||!Tt(De[1]))throw new Error("coordinates must contain numbers");var tt={type:"Point",coordinates:De};return g(tt,Re,Fe)}h.point=x;function k(De,Re,Fe){return Fe===void 0&&(Fe={}),_e(De.map(function(tt){return x(tt,Re)}),Fe)}h.points=k;function R(De,Re,Fe){Fe===void 0&&(Fe={});for(var tt=0,rt=De;tt<rt.length;tt++){var ht=rt[tt];if(ht.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ct=0;Ct<ht[ht.length-1].length;Ct++)if(ht[ht.length-1][Ct]!==ht[0][Ct])throw new Error("First and last Position are not equivalent.")}var St={type:"Polygon",coordinates:De};return g(St,Re,Fe)}h.polygon=R;function G(De,Re,Fe){return Fe===void 0&&(Fe={}),_e(De.map(function(tt){return R(tt,Re)}),Fe)}h.polygons=G;function Z(De,Re,Fe){if(Fe===void 0&&(Fe={}),De.length<2)throw new Error("coordinates must be an array of two or more positions");var tt={type:"LineString",coordinates:De};return g(tt,Re,Fe)}h.lineString=Z;function he(De,Re,Fe){return Fe===void 0&&(Fe={}),_e(De.map(function(tt){return Z(tt,Re)}),Fe)}h.lineStrings=he;function _e(De,Re){Re===void 0&&(Re={});var Fe={type:"FeatureCollection"};return Re.id&&(Fe.id=Re.id),Re.bbox&&(Fe.bbox=Re.bbox),Fe.features=De,Fe}h.featureCollection=_e;function Ge(De,Re,Fe){Fe===void 0&&(Fe={});var tt={type:"MultiLineString",coordinates:De};return g(tt,Re,Fe)}h.multiLineString=Ge;function ze(De,Re,Fe){Fe===void 0&&(Fe={});var tt={type:"MultiPoint",coordinates:De};return g(tt,Re,Fe)}h.multiPoint=ze;function vt(De,Re,Fe){Fe===void 0&&(Fe={});var tt={type:"MultiPolygon",coordinates:De};return g(tt,Re,Fe)}h.multiPolygon=vt;function At(De,Re,Fe){Fe===void 0&&(Fe={});var tt={type:"GeometryCollection",geometries:De};return g(tt,Re,Fe)}h.geometryCollection=At;function qt(De,Re){if(Re===void 0&&(Re=0),Re&&!(Re>=0))throw new Error("precision must be a positive number");var Fe=Math.pow(10,Re||0);return Math.round(De*Fe)/Fe}h.round=qt;function dn(De,Re){Re===void 0&&(Re="kilometers");var Fe=h.factors[Re];if(!Fe)throw new Error(Re+" units is invalid");return De*Fe}h.radiansToLength=dn;function yn(De,Re){Re===void 0&&(Re="kilometers");var Fe=h.factors[Re];if(!Fe)throw new Error(Re+" units is invalid");return De/Fe}h.lengthToRadians=yn;function nr(De,Re){return Ye(yn(De,Re))}h.lengthToDegrees=nr;function We(De){var Re=De%360;return Re<0&&(Re+=360),Re}h.bearingToAzimuth=We;function Ye(De){var Re=De%(2*Math.PI);return Re*180/Math.PI}h.radiansToDegrees=Ye;function lt(De){var Re=De%360;return Re*Math.PI/180}h.degreesToRadians=lt;function It(De,Re,Fe){if(Re===void 0&&(Re="kilometers"),Fe===void 0&&(Fe="kilometers"),!(De>=0))throw new Error("length must be a positive number");return dn(yn(De,Re),Fe)}h.convertLength=It;function wt(De,Re,Fe){if(Re===void 0&&(Re="meters"),Fe===void 0&&(Fe="kilometers"),!(De>=0))throw new Error("area must be a positive number");var tt=h.areaFactors[Re];if(!tt)throw new Error("invalid original units");var rt=h.areaFactors[Fe];if(!rt)throw new Error("invalid final units");return De/tt*rt}h.convertArea=wt;function Tt(De){return!isNaN(De)&&De!==null&&!Array.isArray(De)}h.isNumber=Tt;function fe(De){return!!De&&De.constructor===Object}h.isObject=fe;function Ce(De){if(!De)throw new Error("bbox is required");if(!Array.isArray(De))throw new Error("bbox must be an Array");if(De.length!==4&&De.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");De.forEach(function(Re){if(!Tt(Re))throw new Error("bbox must only contain numbers")})}h.validateBBox=Ce;function Ie(De){if(!De)throw new Error("id is required");if(["string","number"].indexOf(typeof De)===-1)throw new Error("id must be a number or a string")}h.validateId=Ie}),$a=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=fr();function _(Ye,lt,It){if(Ye!==null)for(var wt,Tt,fe,Ce,Ie,De,Re,Fe=0,tt=0,rt,ht=Ye.type,Ct=ht==="FeatureCollection",St=ht==="Feature",en=Ct?Ye.features.length:1,Nn=0;Nn<en;Nn++){Re=Ct?Ye.features[Nn].geometry:St?Ye.geometry:Ye,rt=Re?Re.type==="GeometryCollection":!1,Ie=rt?Re.geometries.length:1;for(var Rn=0;Rn<Ie;Rn++){var Wn=0,Jr=0;if(Ce=rt?Re.geometries[Rn]:Re,Ce!==null){De=Ce.coordinates;var ui=Ce.type;switch(Fe=It&&(ui==="Polygon"||ui==="MultiPolygon")?1:0,ui){case null:break;case"Point":if(lt(De,tt,Nn,Wn,Jr)===!1)return!1;tt++,Wn++;break;case"LineString":case"MultiPoint":for(wt=0;wt<De.length;wt++){if(lt(De[wt],tt,Nn,Wn,Jr)===!1)return!1;tt++,ui==="MultiPoint"&&Wn++}ui==="LineString"&&Wn++;break;case"Polygon":case"MultiLineString":for(wt=0;wt<De.length;wt++){for(Tt=0;Tt<De[wt].length-Fe;Tt++){if(lt(De[wt][Tt],tt,Nn,Wn,Jr)===!1)return!1;tt++}ui==="MultiLineString"&&Wn++,ui==="Polygon"&&Jr++}ui==="Polygon"&&Wn++;break;case"MultiPolygon":for(wt=0;wt<De.length;wt++){for(Jr=0,Tt=0;Tt<De[wt].length;Tt++){for(fe=0;fe<De[wt][Tt].length-Fe;fe++){if(lt(De[wt][Tt][fe],tt,Nn,Wn,Jr)===!1)return!1;tt++}Jr++}Wn++}break;case"GeometryCollection":for(wt=0;wt<Ce.geometries.length;wt++)if(_(Ce.geometries[wt],lt,It)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function x(Ye,lt,It,wt){var Tt=It;return _(Ye,function(fe,Ce,Ie,De,Re){Ce===0&&It===void 0?Tt=fe:Tt=lt(Tt,fe,Ce,Ie,De,Re)},wt),Tt}function k(Ye,lt){var It;switch(Ye.type){case"FeatureCollection":for(It=0;It<Ye.features.length&&lt(Ye.features[It].properties,It)!==!1;It++);break;case"Feature":lt(Ye.properties,0);break}}function R(Ye,lt,It){var wt=It;return k(Ye,function(Tt,fe){fe===0&&It===void 0?wt=Tt:wt=lt(wt,Tt,fe)}),wt}function G(Ye,lt){if(Ye.type==="Feature")lt(Ye,0);else if(Ye.type==="FeatureCollection")for(var It=0;It<Ye.features.length&&lt(Ye.features[It],It)!==!1;It++);}function Z(Ye,lt,It){var wt=It;return G(Ye,function(Tt,fe){fe===0&&It===void 0?wt=Tt:wt=lt(wt,Tt,fe)}),wt}function he(Ye){var lt=[];return _(Ye,function(It){lt.push(It)}),lt}function _e(Ye,lt){var It,wt,Tt,fe,Ce,Ie,De,Re,Fe,tt,rt=0,ht=Ye.type==="FeatureCollection",Ct=Ye.type==="Feature",St=ht?Ye.features.length:1;for(It=0;It<St;It++){for(Ie=ht?Ye.features[It].geometry:Ct?Ye.geometry:Ye,Re=ht?Ye.features[It].properties:Ct?Ye.properties:{},Fe=ht?Ye.features[It].bbox:Ct?Ye.bbox:void 0,tt=ht?Ye.features[It].id:Ct?Ye.id:void 0,De=Ie?Ie.type==="GeometryCollection":!1,Ce=De?Ie.geometries.length:1,Tt=0;Tt<Ce;Tt++){if(fe=De?Ie.geometries[Tt]:Ie,fe===null){if(lt(null,rt,Re,Fe,tt)===!1)return!1;continue}switch(fe.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(lt(fe,rt,Re,Fe,tt)===!1)return!1;break}case"GeometryCollection":{for(wt=0;wt<fe.geometries.length;wt++)if(lt(fe.geometries[wt],rt,Re,Fe,tt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}rt++}}function Ge(Ye,lt,It){var wt=It;return _e(Ye,function(Tt,fe,Ce,Ie,De){fe===0&&It===void 0?wt=Tt:wt=lt(wt,Tt,fe,Ce,Ie,De)}),wt}function ze(Ye,lt){_e(Ye,function(It,wt,Tt,fe,Ce){var Ie=It===null?null:It.type;switch(Ie){case null:case"Point":case"LineString":case"Polygon":return lt(g.feature(It,Tt,{bbox:fe,id:Ce}),wt,0)===!1?!1:void 0}var De;switch(Ie){case"MultiPoint":De="Point";break;case"MultiLineString":De="LineString";break;case"MultiPolygon":De="Polygon";break}for(var Re=0;Re<It.coordinates.length;Re++){var Fe=It.coordinates[Re],tt={type:De,coordinates:Fe};if(lt(g.feature(tt,Tt),wt,Re)===!1)return!1}})}function vt(Ye,lt,It){var wt=It;return ze(Ye,function(Tt,fe,Ce){fe===0&&Ce===0&&It===void 0?wt=Tt:wt=lt(wt,Tt,fe,Ce)}),wt}function At(Ye,lt){ze(Ye,function(It,wt,Tt){var fe=0;if(It.geometry){var Ce=It.geometry.type;if(!(Ce==="Point"||Ce==="MultiPoint")){var Ie,De=0,Re=0,Fe=0;if(_(It,function(tt,rt,ht,Ct,St){if(Ie===void 0||wt>De||Ct>Re||St>Fe){Ie=tt,De=wt,Re=Ct,Fe=St,fe=0;return}var en=g.lineString([Ie,tt],It.properties);if(lt(en,wt,Tt,St,fe)===!1)return!1;fe++,Ie=tt})===!1)return!1}}})}function qt(Ye,lt,It){var wt=It,Tt=!1;return At(Ye,function(fe,Ce,Ie,De,Re){Tt===!1&&It===void 0?wt=fe:wt=lt(wt,fe,Ce,Ie,De,Re),Tt=!0}),wt}function dn(Ye,lt){if(!Ye)throw new Error("geojson is required");ze(Ye,function(It,wt,Tt){if(It.geometry!==null){var fe=It.geometry.type,Ce=It.geometry.coordinates;switch(fe){case"LineString":if(lt(It,wt,Tt,0,0)===!1)return!1;break;case"Polygon":for(var Ie=0;Ie<Ce.length;Ie++)if(lt(g.lineString(Ce[Ie],It.properties),wt,Tt,Ie)===!1)return!1;break}}})}function yn(Ye,lt,It){var wt=It;return dn(Ye,function(Tt,fe,Ce,Ie){fe===0&&It===void 0?wt=Tt:wt=lt(wt,Tt,fe,Ce,Ie)}),wt}function nr(Ye,lt){if(lt=lt||{},!g.isObject(lt))throw new Error("options is invalid");var It=lt.featureIndex||0,wt=lt.multiFeatureIndex||0,Tt=lt.geometryIndex||0,fe=lt.segmentIndex||0,Ce=lt.properties,Ie;switch(Ye.type){case"FeatureCollection":It<0&&(It=Ye.features.length+It),Ce=Ce||Ye.features[It].properties,Ie=Ye.features[It].geometry;break;case"Feature":Ce=Ce||Ye.properties,Ie=Ye.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ie=Ye;break;default:throw new Error("geojson is invalid")}if(Ie===null)return null;var De=Ie.coordinates;switch(Ie.type){case"Point":case"MultiPoint":return null;case"LineString":return fe<0&&(fe=De.length+fe-1),g.lineString([De[fe],De[fe+1]],Ce,lt);case"Polygon":return Tt<0&&(Tt=De.length+Tt),fe<0&&(fe=De[Tt].length+fe-1),g.lineString([De[Tt][fe],De[Tt][fe+1]],Ce,lt);case"MultiLineString":return wt<0&&(wt=De.length+wt),fe<0&&(fe=De[wt].length+fe-1),g.lineString([De[wt][fe],De[wt][fe+1]],Ce,lt);case"MultiPolygon":return wt<0&&(wt=De.length+wt),Tt<0&&(Tt=De[wt].length+Tt),fe<0&&(fe=De[wt][Tt].length-fe-1),g.lineString([De[wt][Tt][fe],De[wt][Tt][fe+1]],Ce,lt)}throw new Error("geojson is invalid")}function We(Ye,lt){if(lt=lt||{},!g.isObject(lt))throw new Error("options is invalid");var It=lt.featureIndex||0,wt=lt.multiFeatureIndex||0,Tt=lt.geometryIndex||0,fe=lt.coordIndex||0,Ce=lt.properties,Ie;switch(Ye.type){case"FeatureCollection":It<0&&(It=Ye.features.length+It),Ce=Ce||Ye.features[It].properties,Ie=Ye.features[It].geometry;break;case"Feature":Ce=Ce||Ye.properties,Ie=Ye.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ie=Ye;break;default:throw new Error("geojson is invalid")}if(Ie===null)return null;var De=Ie.coordinates;switch(Ie.type){case"Point":return g.point(De,Ce,lt);case"MultiPoint":return wt<0&&(wt=De.length+wt),g.point(De[wt],Ce,lt);case"LineString":return fe<0&&(fe=De.length+fe),g.point(De[fe],Ce,lt);case"Polygon":return Tt<0&&(Tt=De.length+Tt),fe<0&&(fe=De[Tt].length+fe),g.point(De[Tt][fe],Ce,lt);case"MultiLineString":return wt<0&&(wt=De.length+wt),fe<0&&(fe=De[wt].length+fe),g.point(De[wt][fe],Ce,lt);case"MultiPolygon":return wt<0&&(wt=De.length+wt),Tt<0&&(Tt=De[wt].length+Tt),fe<0&&(fe=De[wt][Tt].length-fe),g.point(De[wt][Tt][fe],Ce,lt)}throw new Error("geojson is invalid")}h.coordAll=he,h.coordEach=_,h.coordReduce=x,h.featureEach=G,h.featureReduce=Z,h.findPoint=We,h.findSegment=nr,h.flattenEach=ze,h.flattenReduce=vt,h.geomEach=_e,h.geomReduce=Ge,h.lineEach=dn,h.lineReduce=yn,h.propEach=k,h.propReduce=R,h.segmentEach=At,h.segmentReduce=qt}),da=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=$a();function _(x){var k=[1/0,1/0,-1/0,-1/0];return g.coordEach(x,function(R){k[0]>R[0]&&(k[0]=R[0]),k[1]>R[1]&&(k[1]=R[1]),k[2]<R[0]&&(k[2]=R[0]),k[3]<R[1]&&(k[3]=R[1])}),k}_.default=_,h.default=_}),Io=o((h,g)=>{var _=Gr(),x=fr(),k=$a(),R=da().default,G=k.featureEach;k.coordEach,x.polygon;var Z=x.featureCollection;function he(_e){var Ge=new _(_e);return Ge.insert=function(ze){if(ze.type!=="Feature")throw new Error("invalid feature");return ze.bbox=ze.bbox?ze.bbox:R(ze),_.prototype.insert.call(this,ze)},Ge.load=function(ze){var vt=[];return Array.isArray(ze)?ze.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:R(At),vt.push(At)}):G(ze,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:R(At),vt.push(At)}),_.prototype.load.call(this,vt)},Ge.remove=function(ze,vt){if(ze.type!=="Feature")throw new Error("invalid feature");return ze.bbox=ze.bbox?ze.bbox:R(ze),_.prototype.remove.call(this,ze,vt)},Ge.clear=function(){return _.prototype.clear.call(this)},Ge.search=function(ze){var vt=_.prototype.search.call(this,this.toBBox(ze));return Z(vt)},Ge.collides=function(ze){return _.prototype.collides.call(this,this.toBBox(ze))},Ge.all=function(){var ze=_.prototype.all.call(this);return Z(ze)},Ge.toJSON=function(){return _.prototype.toJSON.call(this)},Ge.fromJSON=function(ze){return _.prototype.fromJSON.call(this,ze)},Ge.toBBox=function(ze){var vt;if(ze.bbox)vt=ze.bbox;else if(Array.isArray(ze)&&ze.length===4)vt=ze;else if(Array.isArray(ze)&&ze.length===6)vt=[ze[0],ze[1],ze[3],ze[4]];else if(ze.type==="Feature")vt=R(ze);else if(ze.type==="FeatureCollection")vt=R(ze);else throw new Error("invalid geojson");return{minX:vt[0],minY:vt[1],maxX:vt[2],maxY:vt[3]}},Ge}g.exports=he,g.exports.default=he});Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,x=arguments[1],k=0;k<_;k++)if(h.call(x,g[k],k,g))return k;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,x=arguments[1],k=0;k<_;k++){var R=g[k];if(h.call(x,R,k,g))return R}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var g=1;g<arguments.length;g++){var _=arguments[g];if(_!=null)for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(h[x]=_[x])}return h}),function(h){h.forEach(function(g){g.hasOwnProperty("remove")||Object.defineProperty(g,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,g){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),x=_.length>>>0;if(x===0)return!1;var k=g|0,R=Math.max(k>=0?k:x-Math.abs(k),0);function G(Z,he){return Z===he||typeof Z=="number"&&typeof he=="number"&&isNaN(Z)&&isNaN(he)}for(;R<x;){if(G(_[R],h))return!0;R++}return!1}});var Ul={version:"2.18.3"},gr=l(or()),qr={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Va={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},xs={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Ls={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Iu={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},fl={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},pa={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Ti={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},No={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Ha={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},mo={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},fu={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Wa={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Nu={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Bo={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},ga={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Ga={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},$l={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},ns={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},pc={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},du={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},cr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},mr={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Ro={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},$r={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Bu={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},dl={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},pl=Wa,Fo={en:qr,de:Va,it:xs,id:Ls,ro:Iu,ru:fl,es:pa,nl:Ti,fr:No,pt:pl,pt_br:fu,pt_pt:Wa,zh:Ha,zh_tw:mo,pl:Nu,sv:Bo,el:ga,hu:Ga,da:$l,no:ns,fa:pc,ua:du,tr:cr,cz:mr,ja:Ro,fi:$r,ko:Bu,ky:dl},qa={_globalEditModeEnabled:!1,enableGlobalEditMode(h){let g={...h};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(h=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(h)},handleLayerAdditionInGlobalEditMode(){let h=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let g in h){let _=h[g];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:h}){this._addedLayersEdit[L.stamp(h)]=h},_isRelevantForEdit(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowEditing}},Ru=qa,Vl={_globalDragModeEnabled:!1,enableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},h.forEach(g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,h.forEach(g=>{g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let h=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let g in h){let _=h[g];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:h}){this._addedLayersDrag[L.stamp(h)]=h},_isRelevantForDrag(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.draggable}},dr=Vl,kr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(h=>{this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(h=>{h.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(h){let g=h.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let h=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:h}){this._addedLayersRemoval[L.stamp(h)]=h}},Ya=kr,gc={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{this._isRelevantForRotate(h)&&h.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{h.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(h){return h.pm&&h instanceof L.Polyline&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let h=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:h}){this._addedLayersRotate[L.stamp(h)]=h}},Hl=gc,pu=l(or()),gl={_fireDrawStart(h="Draw",g={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},h,g)},_fireDrawEnd(h="Draw",g={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},h,g)},_fireCreate(h,g="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:h,layer:h},g,_)},_fireCenterPlaced(h="Draw",g={}){let _=h==="Draw"?this._layer:void 0,x=h!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:x,latlng:this._layer.getLatLng()},h,g)},_fireCut(h,g,_,x="Draw",k={}){this.__fire(h,"pm:cut",{shape:this._shape,layer:g,originalLayer:_},x,k)},_fireEdit(h=this._layer,g="Edit",_={}){this.__fire(h,"pm:edit",{layer:this._layer,shape:this.getShape()},g,_)},_fireEnable(h="Edit",g={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDisable(h="Edit",g={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},h,g)},_fireUpdate(h="Edit",g={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},h,g)},_fireMarkerDragStart(h,g=void 0,_="Edit",x={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,x)},_fireMarkerDrag(h,g=void 0,_="Edit",x={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,x)},_fireMarkerDragEnd(h,g=void 0,_=void 0,x="Edit",k={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g,intersectionReset:_},x,k)},_fireDragStart(h="Edit",g={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},h,g)},_fireDrag(h,g="Edit",_={}){this.__fire(this._layer,"pm:drag",{...h,shape:this.getShape()},g,_)},_fireDragEnd(h="Edit",g={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragEnable(h="Edit",g={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragDisable(h="Edit",g={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},h,g)},_fireRemove(h,g=h,_="Edit",x={}){this.__fire(h,"pm:remove",{layer:g,shape:this.getShape()},_,x)},_fireVertexAdded(h,g,_,x="Edit",k={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:h,indexPath:g,latlng:_,shape:this.getShape()},x,k)},_fireVertexRemoved(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:h,indexPath:g,shape:this.getShape()},_,x)},_fireVertexClick(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,x)},_fireIntersect(h,g=this._layer,_="Edit",x={}){this.__fire(g,"pm:intersect",{layer:this._layer,intersection:h,shape:this.getShape()},_,x)},_fireLayerReset(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,x)},_fireChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:h,shape:this.getShape()},g,_)},_fireTextChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:h,shape:this.getShape()},g,_)},_fireTextFocus(h="Edit",g={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},h,g)},_fireTextBlur(h="Edit",g={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},h,g)},_fireSnapDrag(h,g,_="Snapping",x={}){this.__fire(h,"pm:snapdrag",g,_,x)},_fireSnap(h,g,_="Snapping",x={}){this.__fire(h,"pm:snap",g,_,x)},_fireUnsnap(h,g,_="Snapping",x={}){this.__fire(h,"pm:unsnap",g,_,x)},_fireRotationEnable(h,g,_="Rotation",x={}){this.__fire(h,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,x)},_fireRotationDisable(h,g="Rotation",_={}){this.__fire(h,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,_)},_fireRotationStart(h,g,_="Rotation",x={}){this.__fire(h,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},_,x)},_fireRotation(h,g,_,x=this._rotationLayer,k="Rotation",R={}){this.__fire(h,"pm:rotate",{layer:x,helpLayer:this._layer,startAngle:this._startAngle,angle:x.pm.getAngle(),angleDiff:g,oldLatLngs:_,newLatLngs:x.getLatLngs()},k,R)},_fireRotationEnd(h,g,_,x="Rotation",k={}){this.__fire(h,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},x,k)},_fireActionClick(h,g,_,x="Toolbar",k={}){this.__fire(this._map,"pm:actionclick",{text:h.text,action:h,btnName:g,button:_},x,k)},_fireButtonClick(h,g,_="Toolbar",x={}){this.__fire(this._map,"pm:buttonclick",{btnName:h,button:g},_,x)},_fireLangChange(h,g,_,x,k="Global",R={}){this.__fire(this.map,"pm:langchange",{oldLang:h,activeLang:g,fallback:_,translations:x},k,R)},_fireGlobalDragModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalEditModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalRemovalModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalCutModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},h,g)},_fireGlobalDrawModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},h,g)},_fireGlobalRotateModeToggled(h="Global",g={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},h,g)},_fireRemoveLayerGroup(h,g=h,_="Edit",x={}){this.__fire(h,"pm:remove",{layer:g,shape:void 0},_,x)},_fireKeyeventEvent(h,g,_,x="Global",k={}){this.__fire(this.map,"pm:keyevent",{event:h,eventType:g,focusOn:_},x,k)},__fire(h,g,_,x,k={}){_=(0,pu.default)(_,k,{source:x}),L.PM.Utils._fireEvent(h,g,_)}},Wl=gl,gu=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(h){this.map=h,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),h.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(h){let g="document";this.map.getContainer().contains(h.target)&&(g="map");let _={event:h,eventType:h.type,focusOn:g};this._lastEvents[h.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(h,h.type,g)},_onBlur(h){h.altKey=!1;let g={event:h,eventType:h.type,focusOn:"document"};this._lastEvents[h.type]=g,this._lastEvents.current=g},getLastKeyEvent(h="current"){return this._lastEvents[h]},isShiftKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.shiftKey},isAltKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.altKey},isCtrlKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.ctrlKey},isMetaKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.metaKey},getPressedKey(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.key}}),Or=gu,Fi=l(So());function Jn(h){let g=L.PM.activeLang;return(0,Fi.default)(Fo[g],h)||(0,Fi.default)(Fo.en,h)||h}function ji(h){for(let g=0;g<h.length;g+=1){let _=h[g];if(Array.isArray(_)){if(ji(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function ml(h){return h.reduce((g,_)=>{if(_.length!==0){let x=Array.isArray(_)?ml(_):_;Array.isArray(x)?x.length!==0&&g.push(x):g.push(x)}return g},[])}function ma(h,g,_){let x={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:k,b:R,f:G}=x,Z=h.lng,he=h.lat,_e=_,Ge=Math.PI,ze=g*Ge/180,vt=Math.sin(ze),At=Math.cos(ze),qt=(1-G)*Math.tan(he*Ge/180),dn=1/Math.sqrt(1+qt*qt),yn=qt*dn,nr=Math.atan2(qt,At),We=dn*vt,Ye=1-We*We,lt=Ye*(k*k-R*R)/(R*R),It=1+lt/16384*(4096+lt*(-768+lt*(320-175*lt))),wt=lt/1024*(256+lt*(-128+lt*(74-47*lt))),Tt=_e/(R*It),fe=2*Math.PI,Ce,Ie,De;for(;Math.abs(Tt-fe)>1e-12;){Ce=Math.cos(2*nr+Tt),Ie=Math.sin(Tt),De=Math.cos(Tt);let en=wt*Ie*(Ce+wt/4*(De*(-1+2*Ce*Ce)-wt/6*Ce*(-3+4*Ie*Ie)*(-3+4*Ce*Ce)));fe=Tt,Tt=_e/(R*It)+en}let Re=yn*Ie-dn*De*At,Fe=Math.atan2(yn*De+dn*Ie*At,(1-G)*Math.sqrt(We*We+Re*Re)),tt=Math.atan2(Ie*vt,dn*De-yn*Ie*At),rt=G/16*Ye*(4+G*(4-3*Ye)),ht=tt-(1-rt)*G*We*(Tt+rt*Ie*(Ce+rt*De*(-1+2*Ce*Ce))),Ct=Z+ht*180/Ge,St=Fe*180/Ge;return L.latLng(Ct,St)}function _i(h,g,_,x,k=!0){let R,G,Z,he=[];for(let _e=0;_e<_;_e+=1){if(k)R=_e*360/_+x,G=ma(h,R,g),Z=L.latLng(G.lng,G.lat);else{let Ge=h.lat+Math.cos(2*_e*Math.PI/_)*g,ze=h.lng+Math.sin(2*_e*Math.PI/_)*g;Z=L.latLng(Ge,ze)}he.push(Z)}return he}function mu(h,g,_){g=(g+360)%360;let x=Math.PI/180,k=180/Math.PI,{R}=L.CRS.Earth,G=h.lng*x,Z=h.lat*x,he=g*x,_e=Math.sin(Z),Ge=Math.cos(Z),ze=Math.cos(_/R),vt=Math.sin(_/R),At=Math.asin(_e*ze+Ge*vt*Math.cos(he)),qt=G+Math.atan2(Math.sin(he)*vt*Ge,ze-_e*Math.sin(At));qt*=k;let dn=qt-360,yn=qt<-180?qt+360:qt;return qt=qt>180?dn:yn,L.latLng([At*k,qt])}function Jo(h,g,_){let x=h.latLngToContainerPoint(g),k=h.latLngToContainerPoint(_),R=Math.atan2(k.y-x.y,k.x-x.x)*180/Math.PI+90;return R+=R<0?360:0,R}function Gl(h,g,_,x){let k=Jo(h,g,_);return mu(g,k,x)}function ql(h,g,_="asc"){if(!g||Object.keys(g).length===0)return(he,_e)=>he-_e;let x=Object.keys(g),k,R=x.length-1,G={};for(;R>=0;)k=x[R],G[k.toLowerCase()]=g[k],R-=1;function Z(he){if(he instanceof L.Marker)return"Marker";if(he instanceof L.Circle)return"Circle";if(he instanceof L.CircleMarker)return"CircleMarker";if(he instanceof L.Rectangle)return"Rectangle";if(he instanceof L.Polygon)return"Polygon";if(he instanceof L.Polyline)return"Line"}return(he,_e)=>{let Ge,ze;if(Ge=Z(he.layer).toLowerCase(),ze=Z(_e.layer).toLowerCase(),!Ge||!ze)return 0;let vt=Ge in G?G[Ge]:Number.MAX_SAFE_INTEGER,At=ze in G?G[ze]:Number.MAX_SAFE_INTEGER,qt=0;return vt<At?qt=-1:vt>At&&(qt=1),_==="desc"?qt*-1:qt}}function Eo(h,g=h.getLatLngs()){return h instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function Yl(h,g){var _,x,k,R;if((x=(_=g.options.crs)==null?void 0:_.projection)!=null&&x.MAX_LATITUDE){let G=(R=(k=g.options.crs)==null?void 0:k.projection)==null?void 0:R.MAX_LATITUDE;h.lat=Math.max(Math.min(G,h.lat),-G)}return h}function ei(h){return h.options.renderer||h._map&&(h._map._getPaneRenderer(h.options.pane)||h._map.options.renderer||h._map._renderer)||h._renderer}var mc=L.Class.extend({includes:[Ru,dr,Ya,Hl,Wl],initialize(h){this.map=h,this.Draw=new L.PM.Draw(h),this.Toolbar=new L.PM.Toolbar(h),this.Keyboard=Or(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(h)},setLang(h="en",g,_="en"){if(h=h.trim().toLowerCase(),!/^[a-z]{2}$/.test(h)){let k=h.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(k){let R=[`${k[1]}_${k[2]}`,`${k[1]}`];for(let G of R)if(Fo[G]){h=G;break}}}let x=L.PM.activeLang;g&&(Fo[h]=(0,gr.default)(Fo[_],g)),L.PM.activeLang=h,this.map.pm.Toolbar.reinit(),this._fireLangChange(x,h,_,Fo[h])},addControls(h){this.Toolbar.addControls(h)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(h="Polygon",g){h==="Poly"&&(h="Polygon"),this.Draw.enable(h,g)},disableDraw(h="Polygon"){h==="Poly"&&(h="Polygon"),this.Draw.disable(h)},setPathOptions(h,g={}){let _=g.ignoreShapes||[],x=g.merge||!1;this.map.pm.Draw.shapes.forEach(k=>{_.indexOf(k)===-1&&this.map.pm.Draw[k].setPathOptions(h,x)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(h){let g=(0,gr.default)(this.globalOptions,h);g.editable&&(g.resizeableCircleMarker=g.editable,delete g.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!g.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let x=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!g.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),x=!0),this.map.pm.Draw.shapes.forEach(k=>{this.map.pm.Draw[k].setOptions(g)}),_&&this.map.pm.Draw.CircleMarker.enable(),x&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(k=>{k.pm.setOptions(g)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=g,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.enabled()&&h.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(h){return this.Draw.Cut.enable(h)},toggleGlobalCutMode(h){return this.Draw.Cut.toggle(h)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(h=!1){let g=L.PM.Utils.findLayers(this.map);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(x=>{_.addLayer(x)}),_},getGeomanDrawLayers(h=!1){let g=L.PM.Utils.findLayers(this.map).filter(x=>x._drawnByGeoman===!0);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(x=>{_.addLayer(x)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(h){this._touchEventCounter===0&&(L.DomEvent.on(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(h){this._touchEventCounter===1&&(L.DomEvent.off(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(h){ei(this.map)._onMouseMove(this._createMouseEvent("mousemove",h))},_canvasTouchClick(h){let g="";h.type==="touchstart"||h.type==="pointerdown"?g="mousedown":(h.type==="touchend"||h.type==="pointerup"||h.type==="touchcancel"||h.type==="pointercancel")&&(g="mouseup"),g&&ei(this.map)._onClick(this._createMouseEvent(g,h))},_createMouseEvent(h,g){let _,x=g.touches[0]||g.changedTouches[0];try{_=new MouseEvent(h,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:x.detail,screenX:x.screenX,screenY:x.screenY,clientX:x.clientX,clientY:x.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(h,g.bubbles,g.cancelable,g.view,x.detail,x.screenX,x.screenY,x.clientX,x.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return _}}),cs=mc,jo=L.Control.extend({includes:[Wl],options:{position:"topleft",disableByOtherButtons:!0},initialize(h){this._button=L.Util.extend({},this.options,h)},onAdd(h){return this._map=h,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let h=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),h?h.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(h){return typeof h=="boolean"?this._button.toggleStatus=h:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(h){h&&h.preventDefault(),!this._button.disabled&&(this._button.onClick(h,{button:this,event:h}),this._clicked(h),this._button.afterClick(h,{button:this,event:h}))},_makeButton(h){let g=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${g}`,this._container);h.title&&_.setAttribute("title",h.title);let x=L.DomUtil.create("a","leaflet-buttons-control-button",_);x.setAttribute("role","button"),x.setAttribute("tabindex","0"),x.href="#";let k=L.DomUtil.create("div",`leaflet-pm-actions-container ${g}`,_),R=h.actions,G={cancel:{text:Jn("actions.cancel"),title:Jn("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:Jn("actions.finish"),title:Jn("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:Jn("actions.removeLastVertex"),title:Jn("actions.removeLastVertex"),onClick(){this._map.pm.Draw[h.jsClass]._removeLastVertex()}},finish:{text:Jn("actions.finish"),title:Jn("actions.finish"),onClick(he){this._map.pm.Draw[h.jsClass]._finishShape(he)}}};h._preparedActions=R.map(he=>{let _e=typeof he=="string"?he:he.name,Ge;if(G[_e])Ge=G[_e];else if(he.text)Ge=he;else return Ge;let ze=L.DomUtil.create("a",`leaflet-pm-action ${g} action-${_e}`,k);if(ze.setAttribute("role","button"),ze.setAttribute("tabindex","0"),ze.href="#",Ge.title&&(ze.title=Ge.title),ze.innerHTML=Ge.text,L.DomEvent.disableClickPropagation(ze),L.DomEvent.on(ze,"click",L.DomEvent.stop),Ge._node=ze,!h.disabled&&Ge.onClick){let vt=At=>{At.preventDefault();let qt="",{buttons:dn}=this._map.pm.Toolbar;for(let yn in dn)if(dn[yn]._button===h){qt=yn;break}this._fireActionClick(Ge,qt,h)};L.DomEvent.addListener(ze,"click",vt,this),L.DomEvent.addListener(ze,"click",Ge.onClick,this),L.DomEvent.addListener(ze,"click",()=>this._updateActiveAction(h))}return Ge}),this._updateActiveAction(h),h.toggleStatus&&L.DomUtil.addClass(_,"active");let Z=L.DomUtil.create("div","control-icon",x);return h.iconUrl&&Z.setAttribute("src",h.iconUrl),h.className&&L.DomUtil.addClass(Z,h.className),L.DomEvent.disableClickPropagation(x),L.DomEvent.on(x,"click",L.DomEvent.stop),h.disabled||(L.DomEvent.addListener(x,"click",this._onBtnClick,this),L.DomEvent.addListener(x,"click",this._triggerClick,this)),h.disabled&&(L.DomUtil.addClass(x,"pm-disabled"),x.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let h="",{buttons:g}=this._map.pm.Toolbar;for(let _ in g)if(g[_]._button===this._button){h=_;break}this._fireButtonClick(h,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let h="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,h),g.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(g,h),g.setAttribute("aria-disabled","false"))},_updateActiveAction(h){var g;(g=h._preparedActions)==null||g.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),Zl=jo;L.Control.PMButton=Zl;var zo=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(h){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(h)},reinit(){let h=this.isVisible;this.removeControls(),this._defineButtons(),h&&this.addControls()},init(h){this.map=h,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(h){let g=`${h}Container`;return this[g]||(this[g]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${h} leaflet-bar leaflet-control`)),this[g]},getButtons(){return this.buttons},addControls(h=this.options){typeof h.editPolygon<"u"&&(h.editMode=h.editPolygon),typeof h.deleteLayer<"u"&&(h.removalMode=h.deleteLayer),L.Util.setOptions(this,h),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let h=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in h){let x=h[_];L.Util.setOptions(x,{className:g.geomanIcons[_]})}},removeControls(){let h=this.getButtons();for(let g in h)h[g].remove();this.isVisible=!1},toggleControls(h=this.options){this.isVisible?this.removeControls():this.addControls(h)},_addButton(h,g){return this.buttons[h]=g,this.options[h]=!!this.options[h]||!1,this.buttons[h]},triggerClickOnToggledButtons(h){for(let g in this.buttons){let _=this.buttons[g];_._button.disableByOtherButtons&&_!==h&&_.toggled()&&_._triggerClick()}},toggleButton(h,g,_=!0){h==="editPolygon"&&(h="editMode"),h==="deleteLayer"&&(h="removalMode");let x=h;return _&&this.triggerClickOnToggledButtons(this.buttons[x]),this.buttons[x]?this.buttons[x].toggle(g):!1},_defineButtons(){let h={className:"control-icon leaflet-pm-icon-marker",title:Jn("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:Jn("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:Jn("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},x={title:Jn("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:Jn("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},R={title:Jn("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},G={title:Jn("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Z={title:Jn("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},he={title:Jn("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},_e={title:Jn("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ge={title:Jn("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ze={className:"control-icon leaflet-pm-icon-text",title:Jn("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(h)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(R)),this._addButton("drawPolygon",new L.Control.PMButton(g)),this._addButton("drawCircle",new L.Control.PMButton(x)),this._addButton("drawCircleMarker",new L.Control.PMButton(k)),this._addButton("drawText",new L.Control.PMButton(ze)),this._addButton("editMode",new L.Control.PMButton(G)),this._addButton("dragMode",new L.Control.PMButton(Z)),this._addButton("cutPolygon",new L.Control.PMButton(he)),this._addButton("removalMode",new L.Control.PMButton(_e)),this._addButton("rotateMode",new L.Control.PMButton(Ge))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let h=this.getButtons(),g=[];this.options.drawControls===!1&&(g=g.concat(Object.keys(h).filter(_=>!h[_]._button.tool))),this.options.editControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="options"))),this.options.customControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="custom")));for(let _ in h)if(this.options[_]&&g.indexOf(_)===-1){let x=h[_]._button.tool;x||(x="draw"),h[_].setPosition(this._getBtnPosition(x)),h[_].addTo(this.map)}},_getBtnPosition(h){return this.options.positions&&this.options.positions[h]?this.options.positions[h]:this.options.position},setBlockPosition(h,g){this.options.positions[h]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(h,g){if(g)typeof g!="object"&&(g={name:g});else throw new TypeError("Button has no name");let _=this._btnNameMapping(h);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");let x=this.map.pm.Draw.createNewDrawInstance(g.name,_);g={...this.buttons[_]._button,...g};let k=this.createCustomControl(g);return{drawInstance:x,control:k}},createCustomControl(h){if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");h.onClick||(h.onClick=()=>{}),h.afterClick||(h.afterClick=()=>{}),h.toggle!==!1&&(h.toggle=!0),h.block&&(h.block=h.block.toLowerCase()),(!h.block||h.block==="draw")&&(h.block=""),h.className?h.className.indexOf("control-icon")===-1&&(h.className=`control-icon ${h.className}`):h.className="control-icon";let g={tool:h.block,className:h.className,title:h.title||"",jsClass:h.name,onClick:h.onClick,afterClick:h.afterClick,doToggle:h.toggle,toggleStatus:!1,disableOtherButtons:h.disableOtherButtons??!0,disableByOtherButtons:h.disableByOtherButtons??!0,cssToggle:h.toggle,position:this.options.position,actions:h.actions||[],disabled:!!h.disabled};this.options[h.name]!==!1&&(this.options[h.name]=!0);let _=this._addButton(h.name,new L.Control.PMButton(g));return this.changeControlOrder(),_},controlExists(h){return!!this.getButton(h)},getButton(h){return this.getButtons()[h]},getButtonsInBlock(h){let g={};if(h)for(let _ in this.getButtons()){let x=this.getButtons()[_];(x._button.tool===h||h==="draw"&&!x._button.tool)&&(g[_]=x)}return g},changeControlOrder(h=[]){let g=this._shapeMapping(),_=[];h.forEach(R=>{g[R]?_.push(g[R]):_.push(R)});let x=this.getButtons(),k={};_.forEach(R=>{x[R]&&(k[R]=x[R])}),Object.keys(x).filter(R=>!x[R]._button.tool||x[R]._button.tool==="draw").forEach(R=>{_.indexOf(R)===-1&&(k[R]=x[R])}),Object.keys(x).filter(R=>x[R]._button.tool==="edit").forEach(R=>{_.indexOf(R)===-1&&(k[R]=x[R])}),Object.keys(x).filter(R=>x[R]._button.tool==="options").forEach(R=>{_.indexOf(R)===-1&&(k[R]=x[R])}),Object.keys(x).filter(R=>x[R]._button.tool==="custom").forEach(R=>{_.indexOf(R)===-1&&(k[R]=x[R])}),Object.keys(x).forEach(R=>{_.indexOf(R)===-1&&(k[R]=x[R])}),this.map.pm.Toolbar.buttons=k,this._showHideButtons()},getControlOrder(){let h=this.getButtons(),g=[];for(let _ in h)g.push(_);return g},changeActionsOfControl(h,g){let _=this._btnNameMapping(h);if(!_)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=g,this.changeControlOrder()},setButtonDisabled(h,g){let _=this._btnNameMapping(h);g?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(h){let g=this._shapeMapping();return g[h]?g[h]:h}}),vl=zo,yl=l(or()),ti={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(h){h.forEach(g=>{if(Array.isArray(g)){this._assignEvents(g);return}g.off("drag",this._handleSnapping,this),g.on("drag",this._handleSnapping,this),g.off("dragend",this._cleanupSnapping,this),g.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(h){if(h){let g=h.target;g._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(g=>{g.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(h){var Z,he,_e;let g=h.target;if(g._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((Z=h==null?void 0:h.originalEvent)==null?void 0:Z.altKey)||((_e=(he=this._map)==null?void 0:he.pm)==null?void 0:_e.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(g.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let x=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,k;x?k=_.latlng:k=this._checkPrioritiySnapping(_);let R=this.options.snapDistance,G={marker:g,shape:this._shape,snapLatLng:k,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(G.marker,G),this._fireSnapDrag(this._layer,G),_.distance<R){g._orgLatLng=g.getLatLng(),g.setLatLng(k),g._snapped=!0,g._snapInfo=G;let Ge=()=>{this._snapLatLng=k,this._fireSnap(g,G),this._fireSnap(this._layer,G)},ze=this._snapLatLng||{},vt=k||{};(ze.lat!==vt.lat||ze.lng!==vt.lng)&&Ge()}else this._snapLatLng&&(this._unsnap(G),g._snapped=!1,g._snapInfo=void 0,this._fireUnsnap(G.marker,G),this._fireUnsnap(this._layer,G));return!0},_createSnapList(){let h=[],g=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(x=>{if((x instanceof L.Polyline||x instanceof L.Marker||x instanceof L.CircleMarker||x instanceof L.ImageOverlay)&&x.options.snapIgnore!==!0){if(x.options.snapIgnore===void 0&&(!L.PM.optIn&&x.options.pmIgnore===!0||L.PM.optIn&&x.options.pmIgnore!==!1))return;(x instanceof L.Circle||x instanceof L.CircleMarker)&&x.pm&&x.pm._hiddenPolyCircle?h.push(x.pm._hiddenPolyCircle):x instanceof L.ImageOverlay&&(x=L.rectangle(x.getBounds())),h.push(x);let k=L.polyline([],{color:"red",pmIgnore:!0});k._pmTempLayer=!0,g.push(k),(x instanceof L.Circle||x instanceof L.CircleMarker)&&g.push(k)}}),h=h.filter(x=>this._layer!==x),h=h.filter(x=>x._latlng||x._latlngs&&ji(x._latlngs)),h=h.filter(x=>!x._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let x=L.polyline([],{color:"red",pmIgnore:!0});x._pmTempLayer=!0,g.push(x)}),this._snapList=h.concat(this._otherSnapLayers)):this._snapList=h,this.debugIndicatorLines=g},_handleSnapLayerRemoval({layer:h}){if(!h._leaflet_id)return;let g=this._snapList.findIndex(_=>_._leaflet_id===h._leaflet_id);g>-1&&this._snapList.splice(g,1)},_calcClosestLayer(h,g){return this._calcClosestLayers(h,g,1)[0]},_calcClosestLayers(h,g,_=1){let x=[],k={};g.forEach((G,Z)=>{var _e;if(G._parentCopy&&G._parentCopy===this._layer||((_e=G.getLatLngs)==null?void 0:_e.call(G).flat(5).length)<2)return;let he=this._calcLayerDistances(h,G);if(he.distance=Math.floor(he.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[Z]){let Ge=L.polyline([],{color:"red",pmIgnore:!0});Ge._pmTempLayer=!0,this.debugIndicatorLines[Z]=Ge}this.debugIndicatorLines[Z].setLatLngs([h,he.latlng])}_===1&&(k.distance===void 0||he.distance-5<=k.distance)?(he.distance+5<k.distance&&(x=[]),k=he,k.layer=G,x.push(k)):_!==1&&(k={},k=he,k.layer=G,x.push(k))}),_!==1&&(x=x.sort((G,Z)=>G.distance-Z.distance)),_===-1&&(_=x.length);let R=this._getClosestLayerByPriority(x,_);return L.Util.isArray(R)?R:[R]},_calcLayerDistances(h,g){let _=this._map,x=g instanceof L.Marker||g instanceof L.CircleMarker,k=g instanceof L.Polygon,R=h;if(x){let G=g.getLatLng();return{latlng:{...G},distance:this._getDistance(_,G,R)}}return this._calcLatLngDistances(R,g.getLatLngs(),_,k)},_calcLatLngDistances(h,g,_,x=!1){let k,R,G,Z=he=>{he.forEach((_e,Ge)=>{if(Array.isArray(_e)){Z(_e);return}if(this.options.snapSegment){let ze=_e,vt;x?vt=Ge+1===he.length?0:Ge+1:vt=Ge+1===he.length?void 0:Ge+1;let At=he[vt];if(At){let qt=this._getDistanceToSegment(_,h,ze,At);(R===void 0||qt<R)&&(R=qt,G=[ze,At])}}else{let ze=this._getDistance(_,h,_e);(R===void 0||ze<R)&&(R=ze,k=_e)}})};return Z(g),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,h,G[0],G[1])},segment:G,distance:R}:{latlng:k,distance:R}},_getClosestLayerByPriority(h,g=1){h=h.sort((G,Z)=>G._leaflet_id-Z._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],x=this._map.pm.globalOptions.snappingOrder||[],k=0,R={};return x.concat(_).forEach(G=>{R[G]||(k+=1,R[G]=k)}),h.sort(ql("instanceofShape",R)),g===1?h[0]||{}:h.slice(0,g)},_checkPrioritiySnapping(h){let g=this._map,_=h.segment[0],x=h.segment[1],k=h.latlng,R=k;if(this.options.snapVertex){let G=this._getDistance(g,_,k),Z=this._getDistance(g,x,k),he=G<Z?_:x,_e=G<Z?G:Z;if(this.options.snapMiddle){let ze=L.PM.Utils.calcMiddleLatLng(g,_,x),vt=this._getDistance(g,ze,k);vt<G&&vt<Z&&(he=ze,_e=vt)}let Ge=this.options.snapDistance;_e<Ge&&(R=he)}return{...R}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(h,g,_,x){let k=h.getMaxZoom();k===1/0&&(k=h.getZoom());let R=h.project(g,k),G=h.project(_,k),Z=h.project(x,k),he=L.LineUtil.closestPointOnSegment(R,G,Z);return h.unproject(he,k)},_getDistanceToSegment(h,g,_,x){let k=h.latLngToContainerPoint(g),R=h.latLngToContainerPoint(_),G=h.latLngToContainerPoint(x);return L.LineUtil.pointToSegmentDistance(k,R,G)},_getDistance(h,g,_){return h.latLngToContainerPoint(g).distanceTo(h.latLngToContainerPoint(_))}},vo=ti,va=L.Class.extend({includes:[vo,Wl],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(h){L.Util.setOptions(this,h),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(h){let g=new L.Icon.Default;g.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=g,this._map=h,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(h,g=!1){g?this.options.pathOptions=(0,yl.default)(this.options.pathOptions,h):this.options.pathOptions=h},getShapes(){return this.shapes},getShape(){return this._shape},enable(h,g){if(!h)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[h].enable(g)},disable(){this.shapes.forEach(h=>{this[h].disable()})},addControls(){this.shapes.forEach(h=>{this[h].addButton()})},getActiveShape(){let h;return this.shapes.forEach(g=>{this[g]._enabled&&(h=g)}),h},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let h=[];this._map.eachLayer(g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||h.push(g))}),this._enabled?h.forEach(g=>{L.PM.Utils.disablePopup(g)}):h.forEach(g=>{L.PM.Utils.enablePopup(g)})},createNewDrawInstance(h,g){let _=this._getShapeFromBtnName(g);if(this[h])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[h]=new L.PM.Draw[_](this._map),this[h].toolbarButtonName=h,this[h]._shape=h,this.shapes.push(h),this[g]&&this[h].setOptions(this[g].options),this[h].setOptions(this[h].options),this[h]},_getShapeFromBtnName(h){let g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[h]?g[h]:this[h]?this[h]._shape:h},_finishLayer(h){h.pm&&(h.pm.setOptions(this.options),h.pm._shape=this._shape,h.pm._map=this._map),this._addDrawnLayerProp(h)},_addDrawnLayerProp(h){h._drawnByGeoman=!0},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),zi=va;zi.Marker=zi.extend({initialize(h){this._map=h,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(g=>{this.isRelevantMarker(g)&&g.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},isRelevantMarker(h){return h instanceof L.Marker&&h.pm&&!h._pmTempLayer&&!h.pm._initTextMarker},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(h){if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new L.Marker(g,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var h,g;(h=this.options.markerStyle)!=null&&h.icon&&((g=this._hintMarker)==null||g.setIcon(this.options.markerStyle.icon))}});var I=63710088e-1,ge={centimeters:I*100,centimetres:I*100,degrees:I/111325,feet:I*3.28084,inches:I*39.37,kilometers:I/1e3,kilometres:I/1e3,meters:I,metres:I,miles:I/1609.344,millimeters:I*1e3,millimetres:I*1e3,nauticalmiles:I/1852,radians:1,yards:I*1.0936};function He(h,g,_){_===void 0&&(_={});var x={type:"Feature"};return(_.id===0||_.id)&&(x.id=_.id),_.bbox&&(x.bbox=_.bbox),x.properties=g||{},x.geometry=h,x}function st(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ur(h[0])||!ur(h[1]))throw new Error("coordinates must contain numbers");var x={type:"Point",coordinates:h};return He(x,g,_)}function Lt(h,g,_){if(_===void 0&&(_={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");var x={type:"LineString",coordinates:h};return He(x,g,_)}function Nt(h,g){g===void 0&&(g={});var _={type:"FeatureCollection"};return g.id&&(_.id=g.id),g.bbox&&(_.bbox=g.bbox),_.features=h,_}function sn(h,g){g===void 0&&(g="kilometers");var _=ge[g];if(!_)throw new Error(g+" units is invalid");return h*_}function kn(h,g){g===void 0&&(g="kilometers");var _=ge[g];if(!_)throw new Error(g+" units is invalid");return h/_}function In(h){var g=h%(2*Math.PI);return g*180/Math.PI}function Yn(h){var g=h%360;return g*Math.PI/180}function ur(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function Sr(h){var g,_,x={type:"FeatureCollection",features:[]};if(h.type==="Feature"?_=h.geometry:_=h,_.type==="LineString")g=[_.coordinates];else if(_.type==="MultiLineString")g=_.coordinates;else if(_.type==="MultiPolygon")g=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")g=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return g.forEach(function(k){g.forEach(function(R){for(var G=0;G<k.length-1;G++)for(var Z=G;Z<R.length-1;Z++)if(!(k===R&&(Math.abs(G-Z)===1||G===0&&Z===k.length-2&&k[G][0]===k[k.length-1][0]&&k[G][1]===k[k.length-1][1]))){var he=bi(k[G][0],k[G][1],k[G+1][0],k[G+1][1],R[Z][0],R[Z][1],R[Z+1][0],R[Z+1][1]);he&&x.features.push(st([he[0],he[1]]))}})}),x}function bi(h,g,_,x,k,R,G,Z){var he,_e,Ge,ze,vt,At={x:null,y:null,onLine1:!1,onLine2:!1};return he=(Z-R)*(_-h)-(G-k)*(x-g),he===0?At.x!==null&&At.y!==null?At:!1:(_e=g-R,Ge=h-k,ze=(G-k)*_e-(Z-R)*Ge,vt=(_-h)*_e-(x-g)*Ge,_e=ze/he,Ge=vt/he,At.x=h+_e*(_-h),At.y=g+_e*(x-g),_e>=0&&_e<=1&&(At.onLine1=!0),Ge>=0&&Ge<=1&&(At.onLine2=!0),At.onLine1&&At.onLine2?[At.x,At.y]:!1)}zi.Line=zi.extend({initialize(h){this._map=h,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine(){let h=this._layer.getLatLngs();if(h.length>0){let g=h[h.length-1];this._hintline.setLatLngs([g,this._hintMarker.getLatLng()])}},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let g=this._layer._defaultShape().slice();g.push(this._hintMarker.getLatLng()),this._change(g)},hasSelfIntersection(){return Sr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(h,g){let _=L.polyline(this._layer.getLatLngs());h&&(g||(g=this._hintMarker.getLatLng()),_.addLatLng(g));let x=Sr(_.toGeoJSON(15));this._doesSelfIntersect=x.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(x,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(h){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,h.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),x=_[_.length-1];if(g.equals(_[0])||_.length>0&&g.equals(x)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);let k=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(k,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(h)},_setHintLineAfterNewVertex(h){this._hintline.setLatLngs([h,h])},_removeLastVertex(){let h=this._markers;if(h.length<=1){this.disable();return}let g=this._layer.getLatLngs(),_=h[h.length-1],{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(h,_);h.pop(),this._layerGroup.removeLayer(_);let k=h[h.length-1],R=g.indexOf(k.getLatLng());g=g.slice(0,R+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,x,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=1)return;let g=L.polyline(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=1?g=Jn("tooltips.continueLine"):g=Jn("tooltips.finishLine"),this._hintMarker.setTooltipContent(g)},_change(h){this._fireChange(h,"Draw")},setStyle(){var h,g;(h=this._layer)==null||h.setStyle(this.options.templineStyle),(g=this._hintline)==null||g.setStyle(this.options.hintlineStyle)}}),zi.Polygon=zi.Line.extend({initialize(h){this._map=h,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(h){L.PM.Draw.Line.prototype.enable.call(this,h),this._layer.pm._shape="Polygon"},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),this._layer.getLatLngs().flat().length===1?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",()=>1),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=2?g=Jn("tooltips.continueLine"):g=Jn("tooltips.finishPoly"),this._hintMarker.setTooltipContent(g)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),zi.Rectangle=zi.extend({initialize(h){this._map=h,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(h){if(L.Util.setOptions(this,h),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let g=0;g<2;g+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeStartingMarkers(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(Jn("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let h=this._startMarker.getLatLng();h&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([h,h]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}let g=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(g,"Draw")},_syncRectangleSize(){let h=Yl(this._startMarker.getLatLng(),this._map),g=Yl(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(h,g,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let x=[];_.forEach(k=>{!k.equals(h,1e-8)&&!k.equals(g,1e-8)&&x.push(k)}),x.forEach((k,R)=>{try{this._styleMarkers[R].setLatLng(k)}catch{}})}},_findCorners(){let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.options.rectangleAngle||0,this._map)},_finishShape(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(g))return;let x=L.rectangle([_,g],this.options.pathOptions);if(this.options.rectangleAngle){let R=L.PM.Utils._getRotatedRectangle(_,g,this.options.rectangleAngle||0,this._map);x.setLatLngs(R),x.pm&&x.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(x,"layerPane"),this._finishLayer(x),x.addTo(this._map.pm._getContainingLayer()),this._fireCreate(x);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},setStyle(){var h;(h=this._layer)==null||h.setStyle(this.options.pathOptions)}}),zi.CircleMarker=zi.extend({initialize(h){this._map=h,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(h){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let g={};L.extend(g,this.options.templineStyle),g.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),g),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()})},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeCenterMarker(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let g=this._hintMarker.getLatLng();this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Jn("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,g])},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let g=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(g,"Draw")},isRelevantMarker(h){return h instanceof L.CircleMarker&&!(h instanceof L.Circle)&&h.pm&&!h._pmTempLayer},_createMarker(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!h.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(g,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(h){h.pm&&this.options.markerEditable&&h.pm.enable()},_finishShape(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let G=this._hintMarker.getLatLng();_=this._distanceCalculation(g,G),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let x={...this.options.pathOptions,radius:_},k=new this._BaseCircleClass(g,x);this._setPane(k,"layerPane"),this._finishLayer(k),k.addTo(this._map.pm._getContainingLayer()),k.pm&&k.pm._updateHiddenPolyCircle(),this._fireCreate(k);let R=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(R))},_getNewDestinationOfHintMarker(){let h=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return h;let g=this._centerMarker.getLatLng(),_=this._distanceCalculation(g,h);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?h=Gl(this._map,g,h,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(h=Gl(this._map,g,h,this._getMaxDistanceInMeter()))}return h},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var g,_;let h={};L.extend(h,this.options.templineStyle),this.options[this._editableOption]&&(h.radius=0),(g=this._layer)==null||g.setStyle(h),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))}}),zi.Circle=zi.CircleMarker.extend({initialize(h){this._map=h,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(h,g){return this._map.distance(h,g)}});function Zr(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ni(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ui(h){return h.type==="Feature"?h.geometry:h}function qi(h,g){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}function yo(h,g,_){if(h!==null)for(var x,k,R,G,Z,he,_e,Ge=0,ze=0,vt,At=h.type,qt=At==="FeatureCollection",dn=At==="Feature",yn=qt?h.features.length:1,nr=0;nr<yn;nr++){_e=qt?h.features[nr].geometry:dn?h.geometry:h,vt=_e?_e.type==="GeometryCollection":!1,Z=vt?_e.geometries.length:1;for(var We=0;We<Z;We++){var Ye=0,lt=0;if(G=vt?_e.geometries[We]:_e,G!==null){he=G.coordinates;var It=G.type;switch(Ge=0,It){case null:break;case"Point":if(g(he,ze,nr,Ye,lt)===!1)return!1;ze++,Ye++;break;case"LineString":case"MultiPoint":for(x=0;x<he.length;x++){if(g(he[x],ze,nr,Ye,lt)===!1)return!1;ze++,It==="MultiPoint"&&Ye++}It==="LineString"&&Ye++;break;case"Polygon":case"MultiLineString":for(x=0;x<he.length;x++){for(k=0;k<he[x].length-Ge;k++){if(g(he[x][k],ze,nr,Ye,lt)===!1)return!1;ze++}It==="MultiLineString"&&Ye++,It==="Polygon"&&lt++}It==="Polygon"&&Ye++;break;case"MultiPolygon":for(x=0;x<he.length;x++){for(lt=0,k=0;k<he[x].length;k++){for(R=0;R<he[x][k].length-Ge;R++){if(g(he[x][k][R],ze,nr,Ye,lt)===!1)return!1;ze++}lt++}Ye++}break;case"GeometryCollection":for(x=0;x<G.geometries.length;x++)if(yo(G.geometries[x],g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Er(h,g){if(h.type==="Feature")g(h,0);else if(h.type==="FeatureCollection")for(var _=0;_<h.features.length&&g(h.features[_],_)!==!1;_++);}function Cs(h,g,_){var x=_;return Er(h,function(k,R){R===0&&_===void 0?x=k:x=g(x,k,R)}),x}function bl(h,g){var _,x,k,R,G,Z,he,_e,Ge,ze,vt=0,At=h.type==="FeatureCollection",qt=h.type==="Feature",dn=At?h.features.length:1;for(_=0;_<dn;_++){for(Z=At?h.features[_].geometry:qt?h.geometry:h,_e=At?h.features[_].properties:qt?h.properties:{},Ge=At?h.features[_].bbox:qt?h.bbox:void 0,ze=At?h.features[_].id:qt?h.id:void 0,he=Z?Z.type==="GeometryCollection":!1,G=he?Z.geometries.length:1,k=0;k<G;k++){if(R=he?Z.geometries[k]:Z,R===null){if(g(null,vt,_e,Ge,ze)===!1)return!1;continue}switch(R.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(R,vt,_e,Ge,ze)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<R.geometries.length;x++)if(g(R.geometries[x],vt,_e,Ge,ze)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}vt++}}function Fs(h,g){bl(h,function(_,x,k,R,G){var Z=_===null?null:_.type;switch(Z){case null:case"Point":case"LineString":case"Polygon":return g(He(_,k,{bbox:R,id:G}),x,0)===!1?!1:void 0}var he;switch(Z){case"MultiPoint":he="Point";break;case"MultiLineString":he="LineString";break;case"MultiPolygon":he="Polygon";break}for(var _e=0;_e<_.coordinates.length;_e++){var Ge=_.coordinates[_e],ze={type:he,coordinates:Ge};if(g(He(ze,k),x,_e)===!1)return!1}})}function vu(h){if(!h)throw new Error("geojson is required");var g=[];return Fs(h,function(_){Qo(_,g)}),Nt(g)}function Qo(h,g){var _=[],x=h.geometry;if(x!==null){switch(x.type){case"Polygon":_=ni(x);break;case"LineString":_=[ni(x)]}_.forEach(function(k){var R=Fu(k,h.properties);R.forEach(function(G){G.id=g.length,g.push(G)})})}}function Fu(h,g){var _=[];return h.reduce(function(x,k){var R=Lt([x,k],g);return R.bbox=Za(x,k),_.push(R),k}),_}function Za(h,g){var _=h[0],x=h[1],k=g[0],R=g[1],G=_<k?_:k,Z=x<R?x:R,he=_>k?_:k,_e=x>R?x:R;return[G,Z,he,_e]}var Ka=vu,Yi=l(Io(),1);function ea(h,g){var _={},x=[];if(h.type==="LineString"&&(h=He(h)),g.type==="LineString"&&(g=He(g)),h.type==="Feature"&&g.type==="Feature"&&h.geometry!==null&&g.geometry!==null&&h.geometry.type==="LineString"&&g.geometry.type==="LineString"&&h.geometry.coordinates.length===2&&g.geometry.coordinates.length===2){var k=bo(h,g);return k&&x.push(k),Nt(x)}var R=(0,Yi.default)();return R.load(Ka(g)),Er(Ka(h),function(G){Er(R.search(G),function(Z){var he=bo(G,Z);if(he){var _e=ni(he).join(",");_[_e]||(_[_e]=!0,x.push(he))}})}),Nt(x)}function bo(h,g){var _=ni(h),x=ni(g);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(x.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var k=_[0][0],R=_[0][1],G=_[1][0],Z=_[1][1],he=x[0][0],_e=x[0][1],Ge=x[1][0],ze=x[1][1],vt=(ze-_e)*(G-k)-(Ge-he)*(Z-R),At=(Ge-he)*(R-_e)-(ze-_e)*(k-he),qt=(G-k)*(R-_e)-(Z-R)*(k-he);if(vt===0)return null;var dn=At/vt,yn=qt/vt;if(dn>=0&&dn<=1&&yn>=0&&yn<=1){var nr=k+dn*(G-k),We=R+dn*(Z-R);return st([nr,We])}return null}var Qs=ea,_l=l(Io(),1);function Ss(h,g,_){_===void 0&&(_={});var x=Zr(h),k=Zr(g),R=Yn(k[1]-x[1]),G=Yn(k[0]-x[0]),Z=Yn(x[1]),he=Yn(k[1]),_e=Math.pow(Math.sin(R/2),2)+Math.pow(Math.sin(G/2),2)*Math.cos(Z)*Math.cos(he);return sn(2*Math.atan2(Math.sqrt(_e),Math.sqrt(1-_e)),_.units)}var js=Ss;function zs(h){var g=h[0],_=h[1],x=h[2],k=h[3],R=js(h.slice(0,2),[x,_]),G=js(h.slice(0,2),[g,k]);if(R>=G){var Z=(_+k)/2;return[g,Z-(x-g)/2,x,Z+(x-g)/2]}else{var he=(g+x)/2;return[he-(k-_)/2,_,he+(k-_)/2,k]}}var vc=zs;function rs(h){var g=[1/0,1/0,-1/0,-1/0];return yo(h,function(_){g[0]>_[0]&&(g[0]=_[0]),g[1]>_[1]&&(g[1]=_[1]),g[2]<_[0]&&(g[2]=_[0]),g[3]<_[1]&&(g[3]=_[1])}),g}rs.default=rs;var ya=rs;function Es(h,g){g===void 0&&(g={});var _=g.precision,x=g.coordinates,k=g.mutate;if(_=_==null||isNaN(_)?6:_,x=x==null||isNaN(x)?3:x,!h)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof x!="number")throw new Error("<coordinates> must be a number");(k===!1||k===void 0)&&(h=JSON.parse(JSON.stringify(h)));var R=Math.pow(10,_);return yo(h,function(G){Ps(G,R,x)}),h}function Ps(h,g,_){h.length>_&&h.splice(_,h.length);for(var x=0;x<h.length;x++)h[x]=Math.round(h[x]*g)/g;return h}var ba=Es;function _a(h,g,_){if(_===void 0&&(_={}),_.final===!0)return ks(h,g);var x=Zr(h),k=Zr(g),R=Yn(x[0]),G=Yn(k[0]),Z=Yn(x[1]),he=Yn(k[1]),_e=Math.sin(G-R)*Math.cos(he),Ge=Math.cos(Z)*Math.sin(he)-Math.sin(Z)*Math.cos(he)*Math.cos(G-R);return In(Math.atan2(_e,Ge))}function ks(h,g){var _=_a(g,h);return _=(_+180)%360,_}function hs(h,g,_,x){x===void 0&&(x={});var k=Zr(h),R=Yn(k[0]),G=Yn(k[1]),Z=Yn(_),he=kn(g,x.units),_e=Math.asin(Math.sin(G)*Math.cos(he)+Math.cos(G)*Math.sin(he)*Math.cos(Z)),Ge=R+Math.atan2(Math.sin(Z)*Math.sin(he)*Math.cos(G),Math.cos(he)-Math.sin(G)*Math.sin(_e)),ze=In(Ge),vt=In(_e);return st([ze,vt],x.properties)}function ta(h,g,_){_===void 0&&(_={});var x=st([1/0,1/0],{dist:1/0}),k=0;return Fs(h,function(R){for(var G=ni(R),Z=0;Z<G.length-1;Z++){var he=st(G[Z]);he.properties.dist=js(g,he,_);var _e=st(G[Z+1]);_e.properties.dist=js(g,_e,_);var Ge=js(he,_e,_),ze=Math.max(he.properties.dist,_e.properties.dist),vt=_a(he,_e),At=hs(g,ze,vt+90,_),qt=hs(g,ze,vt-90,_),dn=Qs(Lt([At.geometry.coordinates,qt.geometry.coordinates]),Lt([he.geometry.coordinates,_e.geometry.coordinates])),yn=null;dn.features.length>0&&(yn=dn.features[0],yn.properties.dist=js(g,yn,_),yn.properties.location=k+js(he,yn,_)),he.properties.dist<x.properties.dist&&(x=he,x.properties.index=Z,x.properties.location=k),_e.properties.dist<x.properties.dist&&(x=_e,x.properties.index=Z+1,x.properties.location=k+Ge),yn&&yn.properties.dist<x.properties.dist&&(x=yn,x.properties.index=Z),k+=Ge}}),x}var _o=ta;function Ms(h,g){if(!h)throw new Error("line is required");if(!g)throw new Error("splitter is required");var _=qi(h),x=qi(g);if(_!=="LineString")throw new Error("line must be LineString");if(x==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(x==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var k=ba(g,{precision:7});switch(x){case"Point":return Vt(h,k);case"MultiPoint":return bt(h,k);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return bt(h,Qs(h,k))}}function bt(h,g){var _=[],x=(0,_l.default)();return Fs(g,function(k){if(_.forEach(function(Z,he){Z.id=he}),!_.length)_=Vt(h,k).features,_.forEach(function(Z){Z.bbox||(Z.bbox=vc(ya(Z)))}),x.load(Nt(_));else{var R=x.search(k);if(R.features.length){var G=Mt(k,R);_=_.filter(function(Z){return Z.id!==G.id}),x.remove(G),Er(Vt(G,k),function(Z){_.push(Z),x.insert(Z)})}}}),Nt(_)}function Vt(h,g){var _=[],x=ni(h)[0],k=ni(h)[h.geometry.coordinates.length-1];if(En(x,Zr(g))||En(k,Zr(g)))return Nt([h]);var R=(0,_l.default)(),G=Ka(h);R.load(G);var Z=R.search(g);if(!Z.features.length)return Nt([h]);var he=Mt(g,Z),_e=[x],Ge=Cs(G,function(ze,vt,At){var qt=ni(vt)[1],dn=Zr(g);return At===he.id?(ze.push(dn),_.push(Lt(ze)),En(dn,qt)?[dn]:[dn,qt]):(ze.push(qt),ze)},_e);return Ge.length>1&&_.push(Lt(Ge)),Nt(_)}function Mt(h,g){if(!g.features.length)throw new Error("lines must contain features");if(g.features.length===1)return g.features[0];var _,x=1/0;return Er(g,function(k){var R=_o(k,h),G=R.properties.dist;G<x&&(_=k,x=G)}),_}function En(h,g){return h[0]===g[0]&&h[1]===g[1]}var Un=Ms;function hr(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("point is required");if(!g)throw new Error("polygon is required");var x=Zr(h),k=Ui(g),R=k.type,G=g.bbox,Z=k.coordinates;if(G&&ri(x,G)===!1)return!1;R==="Polygon"&&(Z=[Z]);for(var he=!1,_e=0;_e<Z.length&&!he;_e++)if(wi(x,Z[_e][0],_.ignoreBoundary)){for(var Ge=!1,ze=1;ze<Z[_e].length&&!Ge;)wi(x,Z[_e][ze],!_.ignoreBoundary)&&(Ge=!0),ze++;Ge||(he=!0)}return he}function wi(h,g,_){var x=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var k=0,R=g.length-1;k<g.length;R=k++){var G=g[k][0],Z=g[k][1],he=g[R][0],_e=g[R][1],Ge=h[1]*(G-he)+Z*(he-h[0])+_e*(h[0]-G)===0&&(G-h[0])*(he-h[0])<=0&&(Z-h[1])*(_e-h[1])<=0;if(Ge)return!_;var ze=Z>h[1]!=_e>h[1]&&h[0]<(he-G)*(h[1]-Z)/(_e-Z)+G;ze&&(x=!x)}return x}function ri(h,g){return g[0]<=h[0]&&g[1]<=h[1]&&g[2]>=h[0]&&g[3]>=h[1]}function Kl(h,g,_){_===void 0&&(_={});for(var x=Zr(h),k=ni(g),R=0;R<k.length-1;R++){var G=!1;if(_.ignoreEndVertices&&(R===0&&(G="start"),R===k.length-2&&(G="end"),R===0&&R+1===k.length-1&&(G="both")),Us(k[R],k[R+1],x,G,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function Us(h,g,_,x,k){var R=_[0],G=_[1],Z=h[0],he=h[1],_e=g[0],Ge=g[1],ze=_[0]-Z,vt=_[1]-he,At=_e-Z,qt=Ge-he,dn=ze*qt-vt*At;if(k!==null){if(Math.abs(dn)>k)return!1}else if(dn!==0)return!1;if(x){if(x==="start")return Math.abs(At)>=Math.abs(qt)?At>0?Z<R&&R<=_e:_e<=R&&R<Z:qt>0?he<G&&G<=Ge:Ge<=G&&G<he;if(x==="end")return Math.abs(At)>=Math.abs(qt)?At>0?Z<=R&&R<_e:_e<R&&R<=Z:qt>0?he<=G&&G<Ge:Ge<G&&G<=he;if(x==="both")return Math.abs(At)>=Math.abs(qt)?At>0?Z<R&&R<_e:_e<R&&R<Z:qt>0?he<G&&G<Ge:Ge<G&&G<he}else return Math.abs(At)>=Math.abs(qt)?At>0?Z<=R&&R<=_e:_e<=R&&R<=Z:qt>0?he<=G&&G<=Ge:Ge<=G&&G<=he;return!1}var xi=Kl;function na(h,g){var _=Ui(h),x=Ui(g),k=_.type,R=x.type,G=_.coordinates,Z=x.coordinates;switch(k){case"Point":switch(R){case"Point":return li(G,Z);default:throw new Error("feature2 "+R+" geometry not supported")}case"MultiPoint":switch(R){case"Point":return wa(_,x);case"MultiPoint":return ra(_,x);default:throw new Error("feature2 "+R+" geometry not supported")}case"LineString":switch(R){case"Point":return xi(x,_,{ignoreEndVertices:!0});case"LineString":return Dr(_,x);case"MultiPoint":return ia(_,x);default:throw new Error("feature2 "+R+" geometry not supported")}case"Polygon":switch(R){case"Point":return hr(x,_,{ignoreBoundary:!0});case"LineString":return Uo(_,x);case"Polygon":return fs(_,x);case"MultiPoint":return sa(_,x);default:throw new Error("feature2 "+R+" geometry not supported")}default:throw new Error("feature1 "+k+" geometry not supported")}}function wa(h,g){var _,x=!1;for(_=0;_<h.coordinates.length;_++)if(li(h.coordinates[_],g.coordinates)){x=!0;break}return x}function ra(h,g){for(var _=0,x=g.coordinates;_<x.length;_++){for(var k=x[_],R=!1,G=0,Z=h.coordinates;G<Z.length;G++){var he=Z[G];if(li(k,he)){R=!0;break}}if(!R)return!1}return!0}function ia(h,g){for(var _=!1,x=0,k=g.coordinates;x<k.length;x++){var R=k[x];if(xi(R,h,{ignoreEndVertices:!0})&&(_=!0),!xi(R,h))return!1}return!!_}function sa(h,g){for(var _=0,x=g.coordinates;_<x.length;_++){var k=x[_];if(!hr(k,h,{ignoreBoundary:!0}))return!1}return!0}function Dr(h,g){for(var _=!1,x=0,k=g.coordinates;x<k.length;x++){var R=k[x];if(xi({type:"Point",coordinates:R},h,{ignoreEndVertices:!0})&&(_=!0),!xi({type:"Point",coordinates:R},h,{ignoreEndVertices:!1}))return!1}return _}function Uo(h,g){var _=!1,x=0,k=ya(h),R=ya(g);if(!ii(k,R))return!1;for(x;x<g.coordinates.length-1;x++){var G=$i(g.coordinates[x],g.coordinates[x+1]);if(hr({type:"Point",coordinates:G},h,{ignoreBoundary:!0})){_=!0;break}}return _}function fs(h,g){if(h.type==="Feature"&&h.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;var _=ya(h),x=ya(g);if(!ii(_,x))return!1;for(var k=Ui(g).coordinates,R=0,G=k;R<G.length;R++)for(var Z=G[R],he=0,_e=Z;he<_e.length;he++){var Ge=_e[he];if(!hr(Ge,h))return!1}return!0}function ii(h,g){return!(h[0]>g[0]||h[2]<g[2]||h[1]>g[1]||h[3]<g[3])}function li(h,g){return h[0]===g[0]&&h[1]===g[1]}function $i(h,g){return[(h[0]+g[0])/2,(h[1]+g[1])/2]}var gi=l(So()),wo=h=>()=>h,eo=h=>{let g=h?(_,x)=>x.minus(_).abs().isLessThanOrEqualTo(h):wo(!1);return(_,x)=>g(_,x)?0:_.comparedTo(x)};function Po(h){let g=h?(_,x,k,R,G)=>_.exponentiatedBy(2).isLessThanOrEqualTo(R.minus(x).exponentiatedBy(2).plus(G.minus(k).exponentiatedBy(2)).times(h)):wo(!1);return(_,x,k)=>{let R=_.x,G=_.y,Z=k.x,he=k.y,_e=G.minus(he).times(x.x.minus(Z)).minus(R.minus(Z).times(x.y.minus(he)));return g(_e,R,G,Z,he)?0:_e.comparedTo(0)}}var ju=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,oa=Math.ceil,Zi=Math.floor,pi="[BigNumber Error] ",As=pi+"Number primitive has more than 15 significant digits: ",to=1e14,sr=14,xa=9007199254740991,La=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],$o=1e7,$s=1e9;function Wc(h){var g,_,x,k=We.prototype={constructor:We,toString:null,valueOf:null},R=new We(1),G=20,Z=4,he=-7,_e=21,Ge=-1e7,ze=1e7,vt=!1,At=1,qt=0,dn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},yn="0123456789abcdefghijklmnopqrstuvwxyz",nr=!0;function We(fe,Ce){var Ie,De,Re,Fe,tt,rt,ht,Ct,St=this;if(!(St instanceof We))return new We(fe,Ce);if(Ce==null){if(fe&&fe._isBigNumber===!0){St.s=fe.s,!fe.c||fe.e>ze?St.c=St.e=null:fe.e<Ge?St.c=[St.e=0]:(St.e=fe.e,St.c=fe.c.slice());return}if((rt=typeof fe=="number")&&fe*0==0){if(St.s=1/fe<0?(fe=-fe,-1):1,fe===~~fe){for(Fe=0,tt=fe;tt>=10;tt/=10,Fe++);Fe>ze?St.c=St.e=null:(St.e=Fe,St.c=[fe]);return}Ct=String(fe)}else{if(!ju.test(Ct=String(fe)))return x(St,Ct,rt);St.s=Ct.charCodeAt(0)==45?(Ct=Ct.slice(1),-1):1}(Fe=Ct.indexOf("."))>-1&&(Ct=Ct.replace(".","")),(tt=Ct.search(/e/i))>0?(Fe<0&&(Fe=tt),Fe+=+Ct.slice(tt+1),Ct=Ct.substring(0,tt)):Fe<0&&(Fe=Ct.length)}else{if(u(Ce,2,yn.length,"Base"),Ce==10&&nr)return St=new We(fe),wt(St,G+St.e+1,Z);if(Ct=String(fe),rt=typeof fe=="number"){if(fe*0!=0)return x(St,Ct,rt,Ce);if(St.s=1/fe<0?(Ct=Ct.slice(1),-1):1,We.DEBUG&&Ct.replace(/^0\.0*|\./,"").length>15)throw Error(As+fe)}else St.s=Ct.charCodeAt(0)===45?(Ct=Ct.slice(1),-1):1;for(Ie=yn.slice(0,Ce),Fe=tt=0,ht=Ct.length;tt<ht;tt++)if(Ie.indexOf(De=Ct.charAt(tt))<0){if(De=="."){if(tt>Fe){Fe=ht;continue}}else if(!Re&&(Ct==Ct.toUpperCase()&&(Ct=Ct.toLowerCase())||Ct==Ct.toLowerCase()&&(Ct=Ct.toUpperCase()))){Re=!0,tt=-1,Fe=0;continue}return x(St,String(fe),rt,Ce)}rt=!1,Ct=_(Ct,Ce,10,St.s),(Fe=Ct.indexOf("."))>-1?Ct=Ct.replace(".",""):Fe=Ct.length}for(tt=0;Ct.charCodeAt(tt)===48;tt++);for(ht=Ct.length;Ct.charCodeAt(--ht)===48;);if(Ct=Ct.slice(tt,++ht)){if(ht-=tt,rt&&We.DEBUG&&ht>15&&(fe>xa||fe!==Zi(fe)))throw Error(As+St.s*fe);if((Fe=Fe-tt-1)>ze)St.c=St.e=null;else if(Fe<Ge)St.c=[St.e=0];else{if(St.e=Fe,St.c=[],tt=(Fe+1)%sr,Fe<0&&(tt+=sr),tt<ht){for(tt&&St.c.push(+Ct.slice(0,tt)),ht-=sr;tt<ht;)St.c.push(+Ct.slice(tt,tt+=sr));tt=sr-(Ct=Ct.slice(tt)).length}else tt-=ht;for(;tt--;Ct+="0");St.c.push(+Ct)}}else St.c=[St.e=0]}We.clone=Wc,We.ROUND_UP=0,We.ROUND_DOWN=1,We.ROUND_CEIL=2,We.ROUND_FLOOR=3,We.ROUND_HALF_UP=4,We.ROUND_HALF_DOWN=5,We.ROUND_HALF_EVEN=6,We.ROUND_HALF_CEIL=7,We.ROUND_HALF_FLOOR=8,We.EUCLID=9,We.config=We.set=function(fe){var Ce,Ie;if(fe!=null)if(typeof fe=="object"){if(fe.hasOwnProperty(Ce="DECIMAL_PLACES")&&(Ie=fe[Ce],u(Ie,0,$s,Ce),G=Ie),fe.hasOwnProperty(Ce="ROUNDING_MODE")&&(Ie=fe[Ce],u(Ie,0,8,Ce),Z=Ie),fe.hasOwnProperty(Ce="EXPONENTIAL_AT")&&(Ie=fe[Ce],Ie&&Ie.pop?(u(Ie[0],-1e9,0,Ce),u(Ie[1],0,$s,Ce),he=Ie[0],_e=Ie[1]):(u(Ie,-1e9,$s,Ce),he=-(_e=Ie<0?-Ie:Ie))),fe.hasOwnProperty(Ce="RANGE"))if(Ie=fe[Ce],Ie&&Ie.pop)u(Ie[0],-1e9,-1,Ce),u(Ie[1],1,$s,Ce),Ge=Ie[0],ze=Ie[1];else if(u(Ie,-1e9,$s,Ce),Ie)Ge=-(ze=Ie<0?-Ie:Ie);else throw Error(pi+Ce+" cannot be zero: "+Ie);if(fe.hasOwnProperty(Ce="CRYPTO"))if(Ie=fe[Ce],Ie===!!Ie)if(Ie)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))vt=Ie;else throw vt=!Ie,Error(pi+"crypto unavailable");else vt=Ie;else throw Error(pi+Ce+" not true or false: "+Ie);if(fe.hasOwnProperty(Ce="MODULO_MODE")&&(Ie=fe[Ce],u(Ie,0,9,Ce),At=Ie),fe.hasOwnProperty(Ce="POW_PRECISION")&&(Ie=fe[Ce],u(Ie,0,$s,Ce),qt=Ie),fe.hasOwnProperty(Ce="FORMAT"))if(Ie=fe[Ce],typeof Ie=="object")dn=Ie;else throw Error(pi+Ce+" not an object: "+Ie);if(fe.hasOwnProperty(Ce="ALPHABET"))if(Ie=fe[Ce],typeof Ie=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Ie))nr=Ie.slice(0,10)=="0123456789",yn=Ie;else throw Error(pi+Ce+" invalid: "+Ie)}else throw Error(pi+"Object expected: "+fe);return{DECIMAL_PLACES:G,ROUNDING_MODE:Z,EXPONENTIAL_AT:[he,_e],RANGE:[Ge,ze],CRYPTO:vt,MODULO_MODE:At,POW_PRECISION:qt,FORMAT:dn,ALPHABET:yn}},We.isBigNumber=function(fe){if(!fe||fe._isBigNumber!==!0)return!1;if(!We.DEBUG)return!0;var Ce,Ie,De=fe.c,Re=fe.e,Fe=fe.s;e:if({}.toString.call(De)=="[object Array]"){if((Fe===1||Fe===-1)&&Re>=-1e9&&Re<=$s&&Re===Zi(Re)){if(De[0]===0){if(Re===0&&De.length===1)return!0;break e}if(Ce=(Re+1)%sr,Ce<1&&(Ce+=sr),String(De[0]).length==Ce){for(Ce=0;Ce<De.length;Ce++)if(Ie=De[Ce],Ie<0||Ie>=to||Ie!==Zi(Ie))break e;if(Ie!==0)return!0}}}else if(De===null&&Re===null&&(Fe===null||Fe===1||Fe===-1))return!0;throw Error(pi+"Invalid BigNumber: "+fe)},We.maximum=We.max=function(){return lt(arguments,-1)},We.minimum=We.min=function(){return lt(arguments,1)},We.random=function(){var fe=9007199254740992,Ce=Math.random()*fe&2097151?function(){return Zi(Math.random()*fe)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Ie){var De,Re,Fe,tt,rt,ht=0,Ct=[],St=new We(R);if(Ie==null?Ie=G:u(Ie,0,$s),tt=oa(Ie/sr),vt)if(crypto.getRandomValues){for(De=crypto.getRandomValues(new Uint32Array(tt*=2));ht<tt;)rt=De[ht]*131072+(De[ht+1]>>>11),rt>=9e15?(Re=crypto.getRandomValues(new Uint32Array(2)),De[ht]=Re[0],De[ht+1]=Re[1]):(Ct.push(rt%1e14),ht+=2);ht=tt/2}else if(crypto.randomBytes){for(De=crypto.randomBytes(tt*=7);ht<tt;)rt=(De[ht]&31)*281474976710656+De[ht+1]*1099511627776+De[ht+2]*4294967296+De[ht+3]*16777216+(De[ht+4]<<16)+(De[ht+5]<<8)+De[ht+6],rt>=9e15?crypto.randomBytes(7).copy(De,ht):(Ct.push(rt%1e14),ht+=7);ht=tt/7}else throw vt=!1,Error(pi+"crypto unavailable");if(!vt)for(;ht<tt;)rt=Ce(),rt<9e15&&(Ct[ht++]=rt%1e14);for(tt=Ct[--ht],Ie%=sr,tt&&Ie&&(rt=La[sr-Ie],Ct[ht]=Zi(tt/rt)*rt);Ct[ht]===0;Ct.pop(),ht--);if(ht<0)Ct=[Fe=0];else{for(Fe=-1;Ct[0]===0;Ct.splice(0,1),Fe-=sr);for(ht=1,rt=Ct[0];rt>=10;rt/=10,ht++);ht<sr&&(Fe-=sr-ht)}return St.e=Fe,St.c=Ct,St}}(),We.sum=function(){for(var fe=1,Ce=arguments,Ie=new We(Ce[0]);fe<Ce.length;)Ie=Ie.plus(Ce[fe++]);return Ie},_=function(){var fe="0123456789";function Ce(Ie,De,Re,Fe){for(var tt,rt=[0],ht,Ct=0,St=Ie.length;Ct<St;){for(ht=rt.length;ht--;rt[ht]*=De);for(rt[0]+=Fe.indexOf(Ie.charAt(Ct++)),tt=0;tt<rt.length;tt++)rt[tt]>Re-1&&(rt[tt+1]==null&&(rt[tt+1]=0),rt[tt+1]+=rt[tt]/Re|0,rt[tt]%=Re)}return rt.reverse()}return function(Ie,De,Re,Fe,tt){var rt,ht,Ct,St,en,Nn,Rn,Wn,Jr=Ie.indexOf("."),ui=G,Ir=Z;for(Jr>=0&&(St=qt,qt=0,Ie=Ie.replace(".",""),Wn=new We(De),Nn=Wn.pow(Ie.length-Jr),qt=St,Wn.c=Ce(F(ps(Nn.c),Nn.e,"0"),10,Re,fe),Wn.e=Wn.c.length),Rn=Ce(Ie,De,Re,tt?(rt=yn,fe):(rt=fe,yn)),Ct=St=Rn.length;Rn[--St]==0;Rn.pop());if(!Rn[0])return rt.charAt(0);if(Jr<0?--Ct:(Nn.c=Rn,Nn.e=Ct,Nn.s=Fe,Nn=g(Nn,Wn,ui,Ir,Re),Rn=Nn.c,en=Nn.r,Ct=Nn.e),ht=Ct+ui+1,Jr=Rn[ht],St=Re/2,en=en||ht<0||Rn[ht+1]!=null,en=Ir<4?(Jr!=null||en)&&(Ir==0||Ir==(Nn.s<0?3:2)):Jr>St||Jr==St&&(Ir==4||en||Ir==6&&Rn[ht-1]&1||Ir==(Nn.s<0?8:7)),ht<1||!Rn[0])Ie=en?F(rt.charAt(1),-ui,rt.charAt(0)):rt.charAt(0);else{if(Rn.length=ht,en)for(--Re;++Rn[--ht]>Re;)Rn[ht]=0,ht||(++Ct,Rn=[1].concat(Rn));for(St=Rn.length;!Rn[--St];);for(Jr=0,Ie="";Jr<=St;Ie+=rt.charAt(Rn[Jr++]));Ie=F(Ie,Ct,rt.charAt(0))}return Ie}}(),g=function(){function fe(De,Re,Fe){var tt,rt,ht,Ct,St=0,en=De.length,Nn=Re%$o,Rn=Re/$o|0;for(De=De.slice();en--;)ht=De[en]%$o,Ct=De[en]/$o|0,tt=Rn*ht+Ct*Nn,rt=Nn*ht+tt%$o*$o+St,St=(rt/Fe|0)+(tt/$o|0)+Rn*Ct,De[en]=rt%Fe;return St&&(De=[St].concat(De)),De}function Ce(De,Re,Fe,tt){var rt,ht;if(Fe!=tt)ht=Fe>tt?1:-1;else for(rt=ht=0;rt<Fe;rt++)if(De[rt]!=Re[rt]){ht=De[rt]>Re[rt]?1:-1;break}return ht}function Ie(De,Re,Fe,tt){for(var rt=0;Fe--;)De[Fe]-=rt,rt=De[Fe]<Re[Fe]?1:0,De[Fe]=rt*tt+De[Fe]-Re[Fe];for(;!De[0]&&De.length>1;De.splice(0,1));}return function(De,Re,Fe,tt,rt){var ht,Ct,St,en,Nn,Rn,Wn,Jr,ui,Ir,mi,io,Uu,la,mf,Ja,bc,ua=De.s==Re.s?1:-1,Os=De.c,Vi=Re.c;if(!Os||!Os[0]||!Vi||!Vi[0])return new We(!De.s||!Re.s||(Os?Vi&&Os[0]==Vi[0]:!Vi)?NaN:Os&&Os[0]==0||!Vi?ua*0:ua/0);for(Jr=new We(ua),ui=Jr.c=[],Ct=De.e-Re.e,ua=Fe+Ct+1,rt||(rt=to,Ct=ds(De.e/sr)-ds(Re.e/sr),ua=ua/sr|0),St=0;Vi[St]==(Os[St]||0);St++);if(Vi[St]>(Os[St]||0)&&Ct--,ua<0)ui.push(1),en=!0;else{for(la=Os.length,Ja=Vi.length,St=0,ua+=2,Nn=Zi(rt/(Vi[0]+1)),Nn>1&&(Vi=fe(Vi,Nn,rt),Os=fe(Os,Nn,rt),Ja=Vi.length,la=Os.length),Uu=Ja,Ir=Os.slice(0,Ja),mi=Ir.length;mi<Ja;Ir[mi++]=0);bc=Vi.slice(),bc=[0].concat(bc),mf=Vi[0],Vi[1]>=rt/2&&mf++;do{if(Nn=0,ht=Ce(Vi,Ir,Ja,mi),ht<0){if(io=Ir[0],Ja!=mi&&(io=io*rt+(Ir[1]||0)),Nn=Zi(io/mf),Nn>1)for(Nn>=rt&&(Nn=rt-1),Rn=fe(Vi,Nn,rt),Wn=Rn.length,mi=Ir.length;Ce(Rn,Ir,Wn,mi)==1;)Nn--,Ie(Rn,Ja<Wn?bc:Vi,Wn,rt),Wn=Rn.length,ht=1;else Nn==0&&(ht=Nn=1),Rn=Vi.slice(),Wn=Rn.length;if(Wn<mi&&(Rn=[0].concat(Rn)),Ie(Ir,Rn,mi,rt),mi=Ir.length,ht==-1)for(;Ce(Vi,Ir,Ja,mi)<1;)Nn++,Ie(Ir,Ja<mi?bc:Vi,mi,rt),mi=Ir.length}else ht===0&&(Nn++,Ir=[0]);ui[St++]=Nn,Ir[0]?Ir[mi++]=Os[Uu]||0:(Ir=[Os[Uu]],mi=1)}while((Uu++<la||Ir[0]!=null)&&ua--);en=Ir[0]!=null,ui[0]||ui.splice(0,1)}if(rt==to){for(St=1,ua=ui[0];ua>=10;ua/=10,St++);wt(Jr,Fe+(Jr.e=St+Ct*sr-1)+1,tt,en)}else Jr.e=Ct,Jr.r=+en;return Jr}}();function Ye(fe,Ce,Ie,De){var Re,Fe,tt,rt,ht;if(Ie==null?Ie=Z:u(Ie,0,8),!fe.c)return fe.toString();if(Re=fe.c[0],tt=fe.e,Ce==null)ht=ps(fe.c),ht=De==1||De==2&&(tt<=he||tt>=_e)?E(ht,tt):F(ht,tt,"0");else if(fe=wt(new We(fe),Ce,Ie),Fe=fe.e,ht=ps(fe.c),rt=ht.length,De==1||De==2&&(Ce<=Fe||Fe<=he)){for(;rt<Ce;ht+="0",rt++);ht=E(ht,Fe)}else if(Ce-=tt,ht=F(ht,Fe,"0"),Fe+1>rt){if(--Ce>0)for(ht+=".";Ce--;ht+="0");}else if(Ce+=Fe-rt,Ce>0)for(Fe+1==rt&&(ht+=".");Ce--;ht+="0");return fe.s<0&&Re?"-"+ht:ht}function lt(fe,Ce){for(var Ie,De,Re=1,Fe=new We(fe[0]);Re<fe.length;Re++)De=new We(fe[Re]),(!De.s||(Ie=Vo(Fe,De))===Ce||Ie===0&&Fe.s===Ce)&&(Fe=De);return Fe}function It(fe,Ce,Ie){for(var De=1,Re=Ce.length;!Ce[--Re];Ce.pop());for(Re=Ce[0];Re>=10;Re/=10,De++);return(Ie=De+Ie*sr-1)>ze?fe.c=fe.e=null:Ie<Ge?fe.c=[fe.e=0]:(fe.e=Ie,fe.c=Ce),fe}x=function(){var fe=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Ce=/^([^.]+)\.$/,Ie=/^\.([^.]+)$/,De=/^-?(Infinity|NaN)$/,Re=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Fe,tt,rt,ht){var Ct,St=rt?tt:tt.replace(Re,"");if(De.test(St))Fe.s=isNaN(St)?null:St<0?-1:1;else{if(!rt&&(St=St.replace(fe,function(en,Nn,Rn){return Ct=(Rn=Rn.toLowerCase())=="x"?16:Rn=="b"?2:8,!ht||ht==Ct?Nn:en}),ht&&(Ct=ht,St=St.replace(Ce,"$1").replace(Ie,"0.$1")),tt!=St))return new We(St,Ct);if(We.DEBUG)throw Error(pi+"Not a"+(ht?" base "+ht:"")+" number: "+tt);Fe.s=null}Fe.c=Fe.e=null}}();function wt(fe,Ce,Ie,De){var Re,Fe,tt,rt,ht,Ct,St,en=fe.c,Nn=La;if(en){e:{for(Re=1,rt=en[0];rt>=10;rt/=10,Re++);if(Fe=Ce-Re,Fe<0)Fe+=sr,tt=Ce,ht=en[Ct=0],St=Zi(ht/Nn[Re-tt-1]%10);else if(Ct=oa((Fe+1)/sr),Ct>=en.length)if(De){for(;en.length<=Ct;en.push(0));ht=St=0,Re=1,Fe%=sr,tt=Fe-sr+1}else break e;else{for(ht=rt=en[Ct],Re=1;rt>=10;rt/=10,Re++);Fe%=sr,tt=Fe-sr+Re,St=tt<0?0:Zi(ht/Nn[Re-tt-1]%10)}if(De=De||Ce<0||en[Ct+1]!=null||(tt<0?ht:ht%Nn[Re-tt-1]),De=Ie<4?(St||De)&&(Ie==0||Ie==(fe.s<0?3:2)):St>5||St==5&&(Ie==4||De||Ie==6&&(Fe>0?tt>0?ht/Nn[Re-tt]:0:en[Ct-1])%10&1||Ie==(fe.s<0?8:7)),Ce<1||!en[0])return en.length=0,De?(Ce-=fe.e+1,en[0]=Nn[(sr-Ce%sr)%sr],fe.e=-Ce||0):en[0]=fe.e=0,fe;if(Fe==0?(en.length=Ct,rt=1,Ct--):(en.length=Ct+1,rt=Nn[sr-Fe],en[Ct]=tt>0?Zi(ht/Nn[Re-tt]%Nn[tt])*rt:0),De)for(;;)if(Ct==0){for(Fe=1,tt=en[0];tt>=10;tt/=10,Fe++);for(tt=en[0]+=rt,rt=1;tt>=10;tt/=10,rt++);Fe!=rt&&(fe.e++,en[0]==to&&(en[0]=1));break}else{if(en[Ct]+=rt,en[Ct]!=to)break;en[Ct--]=0,rt=1}for(Fe=en.length;en[--Fe]===0;en.pop());}fe.e>ze?fe.c=fe.e=null:fe.e<Ge&&(fe.c=[fe.e=0])}return fe}function Tt(fe){var Ce,Ie=fe.e;return Ie===null?fe.toString():(Ce=ps(fe.c),Ce=Ie<=he||Ie>=_e?E(Ce,Ie):F(Ce,Ie,"0"),fe.s<0?"-"+Ce:Ce)}return k.absoluteValue=k.abs=function(){var fe=new We(this);return fe.s<0&&(fe.s=1),fe},k.comparedTo=function(fe,Ce){return Vo(this,new We(fe,Ce))},k.decimalPlaces=k.dp=function(fe,Ce){var Ie,De,Re,Fe=this;if(fe!=null)return u(fe,0,$s),Ce==null?Ce=Z:u(Ce,0,8),wt(new We(Fe),fe+Fe.e+1,Ce);if(!(Ie=Fe.c))return null;if(De=((Re=Ie.length-1)-ds(this.e/sr))*sr,Re=Ie[Re])for(;Re%10==0;Re/=10,De--);return De<0&&(De=0),De},k.dividedBy=k.div=function(fe,Ce){return g(this,new We(fe,Ce),G,Z)},k.dividedToIntegerBy=k.idiv=function(fe,Ce){return g(this,new We(fe,Ce),0,1)},k.exponentiatedBy=k.pow=function(fe,Ce){var Ie,De,Re,Fe,tt,rt,ht,Ct,St,en=this;if(fe=new We(fe),fe.c&&!fe.isInteger())throw Error(pi+"Exponent not an integer: "+Tt(fe));if(Ce!=null&&(Ce=new We(Ce)),rt=fe.e>14,!en.c||!en.c[0]||en.c[0]==1&&!en.e&&en.c.length==1||!fe.c||!fe.c[0])return St=new We(Math.pow(+Tt(en),rt?fe.s*(2-v(fe)):+Tt(fe))),Ce?St.mod(Ce):St;if(ht=fe.s<0,Ce){if(Ce.c?!Ce.c[0]:!Ce.s)return new We(NaN);De=!ht&&en.isInteger()&&Ce.isInteger(),De&&(en=en.mod(Ce))}else{if(fe.e>9&&(en.e>0||en.e<-1||(en.e==0?en.c[0]>1||rt&&en.c[1]>=24e7:en.c[0]<8e13||rt&&en.c[0]<=9999975e7)))return Fe=en.s<0&&v(fe)?-0:0,en.e>-1&&(Fe=1/Fe),new We(ht?1/Fe:Fe);qt&&(Fe=oa(qt/sr+2))}for(rt?(Ie=new We(.5),ht&&(fe.s=1),Ct=v(fe)):(Re=Math.abs(+Tt(fe)),Ct=Re%2),St=new We(R);;){if(Ct){if(St=St.times(en),!St.c)break;Fe?St.c.length>Fe&&(St.c.length=Fe):De&&(St=St.mod(Ce))}if(Re){if(Re=Zi(Re/2),Re===0)break;Ct=Re%2}else if(fe=fe.times(Ie),wt(fe,fe.e+1,1),fe.e>14)Ct=v(fe);else{if(Re=+Tt(fe),Re===0)break;Ct=Re%2}en=en.times(en),Fe?en.c&&en.c.length>Fe&&(en.c.length=Fe):De&&(en=en.mod(Ce))}return De?St:(ht&&(St=R.div(St)),Ce?St.mod(Ce):Fe?wt(St,qt,Z,tt):St)},k.integerValue=function(fe){var Ce=new We(this);return fe==null?fe=Z:u(fe,0,8),wt(Ce,Ce.e+1,fe)},k.isEqualTo=k.eq=function(fe,Ce){return Vo(this,new We(fe,Ce))===0},k.isFinite=function(){return!!this.c},k.isGreaterThan=k.gt=function(fe,Ce){return Vo(this,new We(fe,Ce))>0},k.isGreaterThanOrEqualTo=k.gte=function(fe,Ce){return(Ce=Vo(this,new We(fe,Ce)))===1||Ce===0},k.isInteger=function(){return!!this.c&&ds(this.e/sr)>this.c.length-2},k.isLessThan=k.lt=function(fe,Ce){return Vo(this,new We(fe,Ce))<0},k.isLessThanOrEqualTo=k.lte=function(fe,Ce){return(Ce=Vo(this,new We(fe,Ce)))===-1||Ce===0},k.isNaN=function(){return!this.s},k.isNegative=function(){return this.s<0},k.isPositive=function(){return this.s>0},k.isZero=function(){return!!this.c&&this.c[0]==0},k.minus=function(fe,Ce){var Ie,De,Re,Fe,tt=this,rt=tt.s;if(fe=new We(fe,Ce),Ce=fe.s,!rt||!Ce)return new We(NaN);if(rt!=Ce)return fe.s=-Ce,tt.plus(fe);var ht=tt.e/sr,Ct=fe.e/sr,St=tt.c,en=fe.c;if(!ht||!Ct){if(!St||!en)return St?(fe.s=-Ce,fe):new We(en?tt:NaN);if(!St[0]||!en[0])return en[0]?(fe.s=-Ce,fe):new We(St[0]?tt:Z==3?-0:0)}if(ht=ds(ht),Ct=ds(Ct),St=St.slice(),rt=ht-Ct){for((Fe=rt<0)?(rt=-rt,Re=St):(Ct=ht,Re=en),Re.reverse(),Ce=rt;Ce--;Re.push(0));Re.reverse()}else for(De=(Fe=(rt=St.length)<(Ce=en.length))?rt:Ce,rt=Ce=0;Ce<De;Ce++)if(St[Ce]!=en[Ce]){Fe=St[Ce]<en[Ce];break}if(Fe&&(Re=St,St=en,en=Re,fe.s=-fe.s),Ce=(De=en.length)-(Ie=St.length),Ce>0)for(;Ce--;St[Ie++]=0);for(Ce=to-1;De>rt;){if(St[--De]<en[De]){for(Ie=De;Ie&&!St[--Ie];St[Ie]=Ce);--St[Ie],St[De]+=to}St[De]-=en[De]}for(;St[0]==0;St.splice(0,1),--Ct);return St[0]?It(fe,St,Ct):(fe.s=Z==3?-1:1,fe.c=[fe.e=0],fe)},k.modulo=k.mod=function(fe,Ce){var Ie,De,Re=this;return fe=new We(fe,Ce),!Re.c||!fe.s||fe.c&&!fe.c[0]?new We(NaN):!fe.c||Re.c&&!Re.c[0]?new We(Re):(At==9?(De=fe.s,fe.s=1,Ie=g(Re,fe,0,3),fe.s=De,Ie.s*=De):Ie=g(Re,fe,0,At),fe=Re.minus(Ie.times(fe)),!fe.c[0]&&At==1&&(fe.s=Re.s),fe)},k.multipliedBy=k.times=function(fe,Ce){var Ie,De,Re,Fe,tt,rt,ht,Ct,St,en,Nn,Rn,Wn,Jr,ui,Ir=this,mi=Ir.c,io=(fe=new We(fe,Ce)).c;if(!mi||!io||!mi[0]||!io[0])return!Ir.s||!fe.s||mi&&!mi[0]&&!io||io&&!io[0]&&!mi?fe.c=fe.e=fe.s=null:(fe.s*=Ir.s,!mi||!io?fe.c=fe.e=null:(fe.c=[0],fe.e=0)),fe;for(De=ds(Ir.e/sr)+ds(fe.e/sr),fe.s*=Ir.s,ht=mi.length,en=io.length,ht<en&&(Wn=mi,mi=io,io=Wn,Re=ht,ht=en,en=Re),Re=ht+en,Wn=[];Re--;Wn.push(0));for(Jr=to,ui=$o,Re=en;--Re>=0;){for(Ie=0,Nn=io[Re]%ui,Rn=io[Re]/ui|0,tt=ht,Fe=Re+tt;Fe>Re;)Ct=mi[--tt]%ui,St=mi[tt]/ui|0,rt=Rn*Ct+St*Nn,Ct=Nn*Ct+rt%ui*ui+Wn[Fe]+Ie,Ie=(Ct/Jr|0)+(rt/ui|0)+Rn*St,Wn[Fe--]=Ct%Jr;Wn[Fe]=Ie}return Ie?++De:Wn.splice(0,1),It(fe,Wn,De)},k.negated=function(){var fe=new We(this);return fe.s=-fe.s||null,fe},k.plus=function(fe,Ce){var Ie,De=this,Re=De.s;if(fe=new We(fe,Ce),Ce=fe.s,!Re||!Ce)return new We(NaN);if(Re!=Ce)return fe.s=-Ce,De.minus(fe);var Fe=De.e/sr,tt=fe.e/sr,rt=De.c,ht=fe.c;if(!Fe||!tt){if(!rt||!ht)return new We(Re/0);if(!rt[0]||!ht[0])return ht[0]?fe:new We(rt[0]?De:Re*0)}if(Fe=ds(Fe),tt=ds(tt),rt=rt.slice(),Re=Fe-tt){for(Re>0?(tt=Fe,Ie=ht):(Re=-Re,Ie=rt),Ie.reverse();Re--;Ie.push(0));Ie.reverse()}for(Re=rt.length,Ce=ht.length,Re-Ce<0&&(Ie=ht,ht=rt,rt=Ie,Ce=Re),Re=0;Ce;)Re=(rt[--Ce]=rt[Ce]+ht[Ce]+Re)/to|0,rt[Ce]=to===rt[Ce]?0:rt[Ce]%to;return Re&&(rt=[Re].concat(rt),++tt),It(fe,rt,tt)},k.precision=k.sd=function(fe,Ce){var Ie,De,Re,Fe=this;if(fe!=null&&fe!==!!fe)return u(fe,1,$s),Ce==null?Ce=Z:u(Ce,0,8),wt(new We(Fe),fe,Ce);if(!(Ie=Fe.c))return null;if(Re=Ie.length-1,De=Re*sr+1,Re=Ie[Re]){for(;Re%10==0;Re/=10,De--);for(Re=Ie[0];Re>=10;Re/=10,De++);}return fe&&Fe.e+1>De&&(De=Fe.e+1),De},k.shiftedBy=function(fe){return u(fe,-9007199254740991,xa),this.times("1e"+fe)},k.squareRoot=k.sqrt=function(){var fe,Ce,Ie,De,Re,Fe=this,tt=Fe.c,rt=Fe.s,ht=Fe.e,Ct=G+4,St=new We("0.5");if(rt!==1||!tt||!tt[0])return new We(!rt||rt<0&&(!tt||tt[0])?NaN:tt?Fe:1/0);if(rt=Math.sqrt(+Tt(Fe)),rt==0||rt==1/0?(Ce=ps(tt),(Ce.length+ht)%2==0&&(Ce+="0"),rt=Math.sqrt(+Ce),ht=ds((ht+1)/2)-(ht<0||ht%2),rt==1/0?Ce="5e"+ht:(Ce=rt.toExponential(),Ce=Ce.slice(0,Ce.indexOf("e")+1)+ht),Ie=new We(Ce)):Ie=new We(rt+""),Ie.c[0]){for(ht=Ie.e,rt=ht+Ct,rt<3&&(rt=0);;)if(Re=Ie,Ie=St.times(Re.plus(g(Fe,Re,Ct,1))),ps(Re.c).slice(0,rt)===(Ce=ps(Ie.c)).slice(0,rt))if(Ie.e<ht&&--rt,Ce=Ce.slice(rt-3,rt+1),Ce=="9999"||!De&&Ce=="4999"){if(!De&&(wt(Re,Re.e+G+2,0),Re.times(Re).eq(Fe))){Ie=Re;break}Ct+=4,rt+=4,De=1}else{(!+Ce||!+Ce.slice(1)&&Ce.charAt(0)=="5")&&(wt(Ie,Ie.e+G+2,1),fe=!Ie.times(Ie).eq(Fe));break}}return wt(Ie,Ie.e+G+1,Z,fe)},k.toExponential=function(fe,Ce){return fe!=null&&(u(fe,0,$s),fe++),Ye(this,fe,Ce,1)},k.toFixed=function(fe,Ce){return fe!=null&&(u(fe,0,$s),fe=fe+this.e+1),Ye(this,fe,Ce)},k.toFormat=function(fe,Ce,Ie){var De,Re=this;if(Ie==null)fe!=null&&Ce&&typeof Ce=="object"?(Ie=Ce,Ce=null):fe&&typeof fe=="object"?(Ie=fe,fe=Ce=null):Ie=dn;else if(typeof Ie!="object")throw Error(pi+"Argument not an object: "+Ie);if(De=Re.toFixed(fe,Ce),Re.c){var Fe,tt=De.split("."),rt=+Ie.groupSize,ht=+Ie.secondaryGroupSize,Ct=Ie.groupSeparator||"",St=tt[0],en=tt[1],Nn=Re.s<0,Rn=Nn?St.slice(1):St,Wn=Rn.length;if(ht&&(Fe=rt,rt=ht,ht=Fe,Wn-=Fe),rt>0&&Wn>0){for(Fe=Wn%rt||rt,St=Rn.substr(0,Fe);Fe<Wn;Fe+=rt)St+=Ct+Rn.substr(Fe,rt);ht>0&&(St+=Ct+Rn.slice(Fe)),Nn&&(St="-"+St)}De=en?St+(Ie.decimalSeparator||"")+((ht=+Ie.fractionGroupSize)?en.replace(new RegExp("\\d{"+ht+"}\\B","g"),"$&"+(Ie.fractionGroupSeparator||"")):en):St}return(Ie.prefix||"")+De+(Ie.suffix||"")},k.toFraction=function(fe){var Ce,Ie,De,Re,Fe,tt,rt,ht,Ct,St,en,Nn,Rn=this,Wn=Rn.c;if(fe!=null&&(rt=new We(fe),!rt.isInteger()&&(rt.c||rt.s!==1)||rt.lt(R)))throw Error(pi+"Argument "+(rt.isInteger()?"out of range: ":"not an integer: ")+Tt(rt));if(!Wn)return new We(Rn);for(Ce=new We(R),Ct=Ie=new We(R),De=ht=new We(R),Nn=ps(Wn),Fe=Ce.e=Nn.length-Rn.e-1,Ce.c[0]=La[(tt=Fe%sr)<0?sr+tt:tt],fe=!fe||rt.comparedTo(Ce)>0?Fe>0?Ce:Ct:rt,tt=ze,ze=1/0,rt=new We(Nn),ht.c[0]=0;St=g(rt,Ce,0,1),Re=Ie.plus(St.times(De)),Re.comparedTo(fe)!=1;)Ie=De,De=Re,Ct=ht.plus(St.times(Re=Ct)),ht=Re,Ce=rt.minus(St.times(Re=Ce)),rt=Re;return Re=g(fe.minus(Ie),De,0,1),ht=ht.plus(Re.times(Ct)),Ie=Ie.plus(Re.times(De)),ht.s=Ct.s=Rn.s,Fe=Fe*2,en=g(Ct,De,Fe,Z).minus(Rn).abs().comparedTo(g(ht,Ie,Fe,Z).minus(Rn).abs())<1?[Ct,De]:[ht,Ie],ze=tt,en},k.toNumber=function(){return+Tt(this)},k.toPrecision=function(fe,Ce){return fe!=null&&u(fe,1,$s),Ye(this,fe,Ce,2)},k.toString=function(fe){var Ce,Ie=this,De=Ie.s,Re=Ie.e;return Re===null?De?(Ce="Infinity",De<0&&(Ce="-"+Ce)):Ce="NaN":(fe==null?Ce=Re<=he||Re>=_e?E(ps(Ie.c),Re):F(ps(Ie.c),Re,"0"):fe===10&&nr?(Ie=wt(new We(Ie),G+Re+1,Z),Ce=F(ps(Ie.c),Ie.e,"0")):(u(fe,2,yn.length,"Base"),Ce=_(F(ps(Ie.c),Re,"0"),10,fe,De,!0)),De<0&&Ie.c[0]&&(Ce="-"+Ce)),Ce},k.valueOf=k.toJSON=function(){return Tt(this)},k._isBigNumber=!0,k[Symbol.toStringTag]="BigNumber",k[Symbol.for("nodejs.util.inspect.custom")]=k.valueOf,h!=null&&We.set(h),We}function ds(h){var g=h|0;return h>0||h===g?g:g-1}function ps(h){for(var g,_,x=1,k=h.length,R=h[0]+"";x<k;){for(g=h[x++]+"",_=sr-g.length;_--;g="0"+g);R+=g}for(k=R.length;R.charCodeAt(--k)===48;);return R.slice(0,k+1||1)}function Vo(h,g){var _,x,k=h.c,R=g.c,G=h.s,Z=g.s,he=h.e,_e=g.e;if(!G||!Z)return null;if(_=k&&!k[0],x=R&&!R[0],_||x)return _?x?0:-Z:G;if(G!=Z)return G;if(_=G<0,x=he==_e,!k||!R)return x?0:!k^_?1:-1;if(!x)return he>_e^_?1:-1;for(Z=(he=k.length)<(_e=R.length)?he:_e,G=0;G<Z;G++)if(k[G]!=R[G])return k[G]>R[G]^_?1:-1;return he==_e?0:he>_e^_?1:-1}function u(h,g,_,x){if(h<g||h>_||h!==Zi(h))throw Error(pi+(x||"Argument")+(typeof h=="number"?h<g||h>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(h))}function v(h){var g=h.c.length-1;return ds(h.e/sr)==g&&h.c[g]%2!=0}function E(h,g){return(h.length>1?h.charAt(0)+"."+h.slice(1):h)+(g<0?"e":"e+")+g}function F(h,g,_){var x,k;if(g<0){for(k=_+".";++g;k+=_);h=k+h}else if(x=h.length,++g>x){for(k=_,g-=x;--g;k+=_);h+=k}else g<x&&(h=h.slice(0,g)+"."+h.slice(g));return h}var ne=Wc(),xe=ne,et=class{constructor(h){nt(this,"key");nt(this,"left",null);nt(this,"right",null);this.key=h}},Pt=class extends et{constructor(h){super(h)}},Rt=class{constructor(){nt(this,"size",0);nt(this,"modificationCount",0);nt(this,"splayCount",0)}splay(h){let g=this.root;if(g==null)return this.compare(h,h),-1;let _=null,x=null,k=null,R=null,G=g,Z=this.compare,he;for(;;)if(he=Z(G.key,h),he>0){let _e=G.left;if(_e==null||(he=Z(_e.key,h),he>0&&(G.left=_e.right,_e.right=G,G=_e,_e=G.left,_e==null)))break;_==null?x=G:_.left=G,_=G,G=_e}else if(he<0){let _e=G.right;if(_e==null||(he=Z(_e.key,h),he<0&&(G.right=_e.left,_e.left=G,G=_e,_e=G.right,_e==null)))break;k==null?R=G:k.right=G,k=G,G=_e}else break;return k!=null&&(k.right=G.left,G.left=R),_!=null&&(_.left=G.right,G.right=x),this.root!==G&&(this.root=G,this.splayCount++),he}splayMin(h){let g=h,_=g.left;for(;_!=null;){let x=_;g.left=x.right,x.right=g,g=x,_=g.left}return g}splayMax(h){let g=h,_=g.right;for(;_!=null;){let x=_;g.right=x.left,x.left=g,g=x,_=g.right}return g}_delete(h){if(this.root==null||this.splay(h)!=0)return null;let g=this.root,_=g,x=g.left;if(this.size--,x==null)this.root=g.right;else{let k=g.right;g=this.splayMax(x),g.right=k,this.root=g}return this.modificationCount++,_}addNewRoot(h,g){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=h;return}g<0?(h.left=_,h.right=_.right,_.right=null):(h.right=_,h.left=_.left,_.left=null),this.root=h}_first(){let h=this.root;return h==null?null:(this.root=this.splayMin(h),this.root)}_last(){let h=this.root;return h==null?null:(this.root=this.splayMax(h),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(h){return this.validKey(h)&&this.splay(h)==0}defaultCompare(){return(h,g)=>h<g?-1:h>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:h=>{this.root=h},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:h=>{this.splayCount=h},splay:h=>this.splay(h),has:h=>this.has(h)}}},tn=class Yp extends Rt{constructor(_,x){super();nt(this,"root",null);nt(this,"compare");nt(this,"validKey");nt(this,xn,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=x??(k=>k!=null&&k!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let x of _)this.delete(x)}forEach(_){let x=this[Symbol.iterator](),k;for(;k=x.next(),!k.done;)_(k.value,k.value,this)}add(_){let x=this.splay(_);return x!=0&&this.addNewRoot(new Pt(_),x),this}addAndReturn(_){let x=this.splay(_);return x!=0&&this.addNewRoot(new Pt(_),x),this.root.key}addAll(_){for(let x of _)this.add(x)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let x=this.root.left;if(x==null)return null;let k=x.right;for(;k!=null;)x=k,k=x.right;return x.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let x=this.root.right;if(x==null)return null;let k=x.left;for(;k!=null;)x=k,k=x.left;return x.key}retainAll(_){let x=new Yp(this.compare,this.validKey),k=this.modificationCount;for(let R of _){if(k!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(R)&&this.splay(R)==0&&x.add(this.root.key)}x.size!=this.size&&(this.root=x.root,this.size=x.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let x=new Yp(this.compare,this.validKey);for(let k of this)_.has(k)&&x.add(k);return x}difference(_){let x=new Yp(this.compare,this.validKey);for(let k of this)_.has(k)||x.add(k);return x}union(_){let x=this.clone();return x.addAll(_),x}clone(){let _=new Yp(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function x(R,G){let Z,he;do{if(Z=R.left,he=R.right,Z!=null){let _e=new Pt(Z.key);G.left=_e,x(Z,_e)}if(he!=null){let _e=new Pt(he.key);G.right=_e,R=he,G=_e}}while(he!=null)}let k=new Pt(_.key);return x(_,k),k}toSet(){return this.clone()}entries(){return new Cr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Hn=Symbol.iterator,xn=Symbol.toStringTag,Hn)](){return new Vn(this.wrap())}},Mn=class{constructor(h){nt(this,"tree");nt(this,"path",new Array);nt(this,"modificationCount",null);nt(this,"splayCount");this.tree=h,this.splayCount=h.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let h=this.path[this.path.length-1];return this.getValue(h)}rebuildPath(h){this.path.splice(0,this.path.length),this.tree.splay(h),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(h){for(;h!=null;)this.path.push(h),h=h.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let h=this.path[this.path.length-1],g=h.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===h;)h=this.path.pop();return this.path.length>0}},Vn=class extends Mn{getValue(h){return h.key}},Cr=class extends Mn{getValue(h){return[h.key,h.key]}},Ki=h=>h,Oi=h=>{if(h){let g=new tn(eo(h)),_=new tn(eo(h)),x=(R,G)=>G.addAndReturn(R),k=R=>({x:x(R.x,g),y:x(R.y,_)});return k({x:new xe(0),y:new xe(0)}),k}return Ki},gs=h=>({set:g=>{Li=gs(g)},reset:()=>gs(h),compare:eo(h),snap:Oi(h),orient:Po(h)}),Li=gs(),no=(h,g)=>h.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(h.ur.x)&&h.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(h.ur.y),Gc=(h,g)=>{if(g.ur.x.isLessThan(h.ll.x)||h.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(h.ll.y)||h.ur.y.isLessThan(g.ll.y))return null;let _=h.ll.x.isLessThan(g.ll.x)?g.ll.x:h.ll.x,x=h.ur.x.isLessThan(g.ur.x)?h.ur.x:g.ur.x,k=h.ll.y.isLessThan(g.ll.y)?g.ll.y:h.ll.y,R=h.ur.y.isLessThan(g.ur.y)?h.ur.y:g.ur.y;return{ll:{x:_,y:k},ur:{x,y:R}}},aa=(h,g)=>h.x.times(g.y).minus(h.y.times(g.x)),Ho=(h,g)=>h.x.times(g.x).plus(h.y.times(g.y)),ko=h=>Ho(h,h).sqrt(),pf=(h,g,_)=>{let x={x:g.x.minus(h.x),y:g.y.minus(h.y)},k={x:_.x.minus(h.x),y:_.y.minus(h.y)};return aa(k,x).div(ko(k)).div(ko(x))},yu=(h,g,_)=>{let x={x:g.x.minus(h.x),y:g.y.minus(h.y)},k={x:_.x.minus(h.x),y:_.y.minus(h.y)};return Ho(k,x).div(ko(k)).div(ko(x))},Xr=(h,g,_)=>g.y.isZero()?null:{x:h.x.plus(g.x.div(g.y).times(_.minus(h.y))),y:_},Ts=(h,g,_)=>g.x.isZero()?null:{x:_,y:h.y.plus(g.y.div(g.x).times(_.minus(h.x)))},Me=(h,g,_,x)=>{if(g.x.isZero())return Ts(_,x,h.x);if(x.x.isZero())return Ts(h,g,_.x);if(g.y.isZero())return Xr(_,x,h.y);if(x.y.isZero())return Xr(h,g,_.y);let k=aa(g,x);if(k.isZero())return null;let R={x:_.x.minus(h.x),y:_.y.minus(h.y)},G=aa(R,g).div(k),Z=aa(R,x).div(k),he=h.x.plus(Z.times(g.x)),_e=_.x.plus(G.times(x.x)),Ge=h.y.plus(Z.times(g.y)),ze=_.y.plus(G.times(x.y)),vt=he.plus(_e).div(2),At=Ge.plus(ze).div(2);return{x:vt,y:At}},ro=class MS{constructor(g,_){nt(this,"point");nt(this,"isLeft");nt(this,"segment");nt(this,"otherSE");nt(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=_}static compare(g,_){let x=MS.comparePoints(g.point,_.point);return x!==0?x:(g.point!==_.point&&g.link(_),g.isLeft!==_.isLeft?g.isLeft?1:-1:ms.compare(g.segment,_.segment))}static comparePoints(g,_){return g.x.isLessThan(_.x)?-1:g.x.isGreaterThan(_.x)?1:g.y.isLessThan(_.y)?-1:g.y.isGreaterThan(_.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let _=g.point.events;for(let x=0,k=_.length;x<k;x++){let R=_[x];this.point.events.push(R),R.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let _=0;_<g;_++){let x=this.point.events[_];if(x.segment.consumedBy===void 0)for(let k=_+1;k<g;k++){let R=this.point.events[k];R.consumedBy===void 0&&x.otherSE.point.events===R.otherSE.point.events&&x.segment.consume(R.segment)}}}getAvailableLinkedEvents(){let g=[];for(let _=0,x=this.point.events.length;_<x;_++){let k=this.point.events[_];k!==this&&!k.segment.ringOut&&k.segment.isInResult()&&g.push(k)}return g}getLeftmostComparator(g){let _=new Map,x=k=>{let R=k.otherSE;_.set(k,{sine:pf(this.point,g.point,R.point),cosine:yu(this.point,g.point,R.point)})};return(k,R)=>{_.has(k)||x(k),_.has(R)||x(R);let{sine:G,cosine:Z}=_.get(k),{sine:he,cosine:_e}=_.get(R);return G.isGreaterThanOrEqualTo(0)&&he.isGreaterThanOrEqualTo(0)?Z.isLessThan(_e)?1:Z.isGreaterThan(_e)?-1:0:G.isLessThan(0)&&he.isLessThan(0)?Z.isLessThan(_e)?-1:Z.isGreaterThan(_e)?1:0:he.isLessThan(G)?-1:he.isGreaterThan(G)?1:0}}},zu=0,ms=class P0{constructor(g,_,x,k){nt(this,"id");nt(this,"leftSE");nt(this,"rightSE");nt(this,"rings");nt(this,"windings");nt(this,"ringOut");nt(this,"consumedBy");nt(this,"prev");nt(this,"_prevInResult");nt(this,"_beforeState");nt(this,"_afterState");nt(this,"_isInResult");this.id=++zu,this.leftSE=g,g.segment=this,g.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=g,this.rings=x,this.windings=k}static compare(g,_){let x=g.leftSE.point.x,k=_.leftSE.point.x,R=g.rightSE.point.x,G=_.rightSE.point.x;if(G.isLessThan(x))return 1;if(R.isLessThan(k))return-1;let Z=g.leftSE.point.y,he=_.leftSE.point.y,_e=g.rightSE.point.y,Ge=_.rightSE.point.y;if(x.isLessThan(k)){if(he.isLessThan(Z)&&he.isLessThan(_e))return 1;if(he.isGreaterThan(Z)&&he.isGreaterThan(_e))return-1;let ze=g.comparePoint(_.leftSE.point);if(ze<0)return 1;if(ze>0)return-1;let vt=_.comparePoint(g.rightSE.point);return vt!==0?vt:-1}if(x.isGreaterThan(k)){if(Z.isLessThan(he)&&Z.isLessThan(Ge))return-1;if(Z.isGreaterThan(he)&&Z.isGreaterThan(Ge))return 1;let ze=_.comparePoint(g.leftSE.point);if(ze!==0)return ze;let vt=g.comparePoint(_.rightSE.point);return vt<0?1:vt>0?-1:1}if(Z.isLessThan(he))return-1;if(Z.isGreaterThan(he))return 1;if(R.isLessThan(G)){let ze=_.comparePoint(g.rightSE.point);if(ze!==0)return ze}if(R.isGreaterThan(G)){let ze=g.comparePoint(_.rightSE.point);if(ze<0)return 1;if(ze>0)return-1}if(!R.eq(G)){let ze=_e.minus(Z),vt=R.minus(x),At=Ge.minus(he),qt=G.minus(k);if(ze.isGreaterThan(vt)&&At.isLessThan(qt))return 1;if(ze.isLessThan(vt)&&At.isGreaterThan(qt))return-1}return R.isGreaterThan(G)?1:R.isLessThan(G)||_e.isLessThan(Ge)?-1:_e.isGreaterThan(Ge)?1:g.id<_.id?-1:g.id>_.id?1:0}static fromRing(g,_,x){let k,R,G,Z=ro.comparePoints(g,_);if(Z<0)k=g,R=_,G=1;else if(Z>0)k=_,R=g,G=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);let he=new ro(k,!0),_e=new ro(R,!1);return new P0(he,_e,[x],[G])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(_)?g:_},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(_)?g:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return Li.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let _=this.bbox(),x=g.bbox(),k=Gc(_,x);if(k===null)return null;let R=this.leftSE.point,G=this.rightSE.point,Z=g.leftSE.point,he=g.rightSE.point,_e=no(_,Z)&&this.comparePoint(Z)===0,Ge=no(x,R)&&g.comparePoint(R)===0,ze=no(_,he)&&this.comparePoint(he)===0,vt=no(x,G)&&g.comparePoint(G)===0;if(Ge&&_e)return vt&&!ze?G:!vt&&ze?he:null;if(Ge)return ze&&R.x.eq(he.x)&&R.y.eq(he.y)?null:R;if(_e)return vt&&G.x.eq(Z.x)&&G.y.eq(Z.y)?null:Z;if(vt&&ze)return null;if(vt)return G;if(ze)return he;let At=Me(R,this.vector(),Z,g.vector());return At===null||!no(k,At)?null:Li.snap(At)}split(g){let _=[],x=g.events!==void 0,k=new ro(g,!0),R=new ro(g,!1),G=this.rightSE;this.replaceRightSE(R),_.push(R),_.push(k);let Z=new P0(k,G,this.rings.slice(),this.windings.slice());return ro.comparePoints(Z.leftSE.point,Z.rightSE.point)>0&&Z.swapEvents(),ro.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),x&&(k.checkForConsuming(),R.checkForConsuming()),_}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,x=this.windings.length;_<x;_++)this.windings[_]*=-1}consume(g){let _=this,x=g;for(;_.consumedBy;)_=_.consumedBy;for(;x.consumedBy;)x=x.consumedBy;let k=P0.compare(_,x);if(k!==0){if(k>0){let R=_;_=x,x=R}if(_.prev===x){let R=_;_=x,x=R}for(let R=0,G=x.rings.length;R<G;R++){let Z=x.rings[R],he=x.windings[R],_e=_.rings.indexOf(Z);_e===-1?(_.rings.push(Z),_.windings.push(he)):_.windings[_e]+=he}x.rings=null,x.windings=null,x.consumedBy=_,x.leftSE.consumedBy=_.leftSE,x.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,x=this._afterState.windings,k=this._afterState.multiPolys;for(let Z=0,he=this.rings.length;Z<he;Z++){let _e=this.rings[Z],Ge=this.windings[Z],ze=_.indexOf(_e);ze===-1?(_.push(_e),x.push(Ge)):x[ze]+=Ge}let R=[],G=[];for(let Z=0,he=_.length;Z<he;Z++){if(x[Z]===0)continue;let _e=_[Z],Ge=_e.poly;if(G.indexOf(Ge)===-1)if(_e.isExterior)R.push(Ge);else{G.indexOf(Ge)===-1&&G.push(Ge);let ze=R.indexOf(_e.poly);ze!==-1&&R.splice(ze,1)}}for(let Z=0,he=R.length;Z<he;Z++){let _e=R[Z].multiPoly;k.indexOf(_e)===-1&&k.push(_e)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Ph.type){case"union":{let x=g.length===0,k=_.length===0;this._isInResult=x!==k;break}case"intersection":{let x,k;g.length<_.length?(x=g.length,k=_.length):(x=_.length,k=g.length),this._isInResult=k===Ph.numMultiPolys&&x<k;break}case"xor":{let x=Math.abs(g.length-_.length);this._isInResult=x%2===1;break}case"difference":{let x=k=>k.length===1&&k[0].isSubject;this._isInResult=x(g)!==x(_);break}}return this._isInResult}},Pr=class{constructor(h,g,_){nt(this,"poly");nt(this,"isExterior");nt(this,"segments");nt(this,"bbox");if(!Array.isArray(h)||h.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=_,this.segments=[],typeof h[0][0]!="number"||typeof h[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let x=Li.snap({x:new xe(h[0][0]),y:new xe(h[0][1])});this.bbox={ll:{x:x.x,y:x.y},ur:{x:x.x,y:x.y}};let k=x;for(let R=1,G=h.length;R<G;R++){if(typeof h[R][0]!="number"||typeof h[R][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let Z=Li.snap({x:new xe(h[R][0]),y:new xe(h[R][1])});Z.x.eq(k.x)&&Z.y.eq(k.y)||(this.segments.push(ms.fromRing(k,Z,this)),Z.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=Z.x),Z.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=Z.y),Z.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=Z.x),Z.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=Z.y),k=Z)}(!x.x.eq(k.x)||!x.y.eq(k.y))&&this.segments.push(ms.fromRing(k,x,this))}getSweepEvents(){let h=[];for(let g=0,_=this.segments.length;g<_;g++){let x=this.segments[g];h.push(x.leftSE),h.push(x.rightSE)}return h}},Sh=class{constructor(h,g){nt(this,"multiPoly");nt(this,"exteriorRing");nt(this,"interiorRings");nt(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Pr(h[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,x=h.length;_<x;_++){let k=new Pr(h[_],this,!1);k.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.bbox.ll.x),k.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.bbox.ll.y),k.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.bbox.ur.x),k.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.bbox.ur.y),this.interiorRings.push(k)}this.multiPoly=g}getSweepEvents(){let h=this.exteriorRing.getSweepEvents();for(let g=0,_=this.interiorRings.length;g<_;g++){let x=this.interiorRings[g].getSweepEvents();for(let k=0,R=x.length;k<R;k++)h.push(x[k])}return h}},od=class{constructor(h,g){nt(this,"isSubject");nt(this,"polys");nt(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof h[0][0][0]=="number"&&(h=[h])}catch{}this.polys=[],this.bbox={ll:{x:new xe(Number.POSITIVE_INFINITY),y:new xe(Number.POSITIVE_INFINITY)},ur:{x:new xe(Number.NEGATIVE_INFINITY),y:new xe(Number.NEGATIVE_INFINITY)}};for(let _=0,x=h.length;_<x;_++){let k=new Sh(h[_],this);k.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.bbox.ll.x),k.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.bbox.ll.y),k.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.bbox.ur.x),k.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.bbox.ur.y),this.polys.push(k)}this.isSubject=g}getSweepEvents(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let x=this.polys[g].getSweepEvents();for(let k=0,R=x.length;k<R;k++)h.push(x[k])}return h}},Eh=class M2{constructor(g){nt(this,"events");nt(this,"poly");nt(this,"_isExteriorRing");nt(this,"_enclosingRing");this.events=g;for(let _=0,x=g.length;_<x;_++)g[_].segment.ringOut=this;this.poly=null}static factory(g){let _=[];for(let x=0,k=g.length;x<k;x++){let R=g[x];if(!R.isInResult()||R.ringOut)continue;let G=null,Z=R.leftSE,he=R.rightSE,_e=[Z],Ge=Z.point,ze=[];for(;G=Z,Z=he,_e.push(Z),Z.point!==Ge;)for(;;){let vt=Z.getAvailableLinkedEvents();if(vt.length===0){let dn=_e[0].point,yn=_e[_e.length-1].point;throw new Error(`Unable to complete output ring starting at [${dn.x}, ${dn.y}]. Last matching segment found ends at [${yn.x}, ${yn.y}].`)}if(vt.length===1){he=vt[0].otherSE;break}let At=null;for(let dn=0,yn=ze.length;dn<yn;dn++)if(ze[dn].point===Z.point){At=dn;break}if(At!==null){let dn=ze.splice(At)[0],yn=_e.splice(dn.index);yn.unshift(yn[0].otherSE),_.push(new M2(yn.reverse()));continue}ze.push({index:_e.length,point:Z.point});let qt=Z.getLeftmostComparator(G);he=vt.sort(qt)[0].otherSE;break}_.push(new M2(_e))}return _}getGeom(){let g=this.events[0].point,_=[g];for(let _e=1,Ge=this.events.length-1;_e<Ge;_e++){let ze=this.events[_e].point,vt=this.events[_e+1].point;Li.orient(ze,g,vt)!==0&&(_.push(ze),g=ze)}if(_.length===1)return null;let x=_[0],k=_[1];Li.orient(x,g,k)===0&&_.shift(),_.push(_[0]);let R=this.isExteriorRing()?1:-1,G=this.isExteriorRing()?0:_.length-1,Z=this.isExteriorRing()?_.length:-1,he=[];for(let _e=G;_e!=Z;_e+=R)he.push([_[_e].x.toNumber(),_[_e].y.toNumber()]);return he}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var k,R;let g=this.events[0];for(let G=1,Z=this.events.length;G<Z;G++){let he=this.events[G];ro.compare(g,he)>0&&(g=he)}let _=g.segment.prevInResult(),x=_?_.prevInResult():null;for(;;){if(!_)return null;if(!x)return _.ringOut;if(x.ringOut!==_.ringOut)return((k=x.ringOut)==null?void 0:k.enclosingRing())!==_.ringOut?_.ringOut:(R=_.ringOut)==null?void 0:R.enclosingRing();_=x.prevInResult(),x=_?_.prevInResult():null}}},Xa=class{constructor(h){nt(this,"exteriorRing");nt(this,"interiorRings");this.exteriorRing=h,h.poly=this,this.interiorRings=[]}addInterior(h){this.interiorRings.push(h),h.poly=this}getGeom(){let h=this.exteriorRing.getGeom();if(h===null)return null;let g=[h];for(let _=0,x=this.interiorRings.length;_<x;_++){let k=this.interiorRings[_].getGeom();k!==null&&g.push(k)}return g}},qc=class{constructor(h){nt(this,"rings");nt(this,"polys");this.rings=h,this.polys=this._composePolys(h)}getGeom(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let x=this.polys[g].getGeom();x!==null&&h.push(x)}return h}_composePolys(h){var _;let g=[];for(let x=0,k=h.length;x<k;x++){let R=h[x];if(!R.poly)if(R.isExteriorRing())g.push(new Xa(R));else{let G=R.enclosingRing();G!=null&&G.poly||g.push(new Xa(G)),(_=G==null?void 0:G.poly)==null||_.addInterior(R)}}return g}},gf=class{constructor(h,g=ms.compare){nt(this,"queue");nt(this,"tree");nt(this,"segments");this.queue=h,this.tree=new tn(g),this.segments=[]}process(h){let g=h.segment,_=[];if(h.consumedBy)return h.isLeft?this.queue.delete(h.otherSE):this.tree.delete(g),_;h.isLeft&&this.tree.add(g);let x=g,k=g;do x=this.tree.lastBefore(x);while(x!=null&&x.consumedBy!=null);do k=this.tree.firstAfter(k);while(k!=null&&k.consumedBy!=null);if(h.isLeft){let R=null;if(x){let Z=x.getIntersection(g);if(Z!==null&&(g.isAnEndpoint(Z)||(R=Z),!x.isAnEndpoint(Z))){let he=this._splitSafely(x,Z);for(let _e=0,Ge=he.length;_e<Ge;_e++)_.push(he[_e])}}let G=null;if(k){let Z=k.getIntersection(g);if(Z!==null&&(g.isAnEndpoint(Z)||(G=Z),!k.isAnEndpoint(Z))){let he=this._splitSafely(k,Z);for(let _e=0,Ge=he.length;_e<Ge;_e++)_.push(he[_e])}}if(R!==null||G!==null){let Z=null;R===null?Z=G:G===null?Z=R:Z=ro.comparePoints(R,G)<=0?R:G,this.queue.delete(g.rightSE),_.push(g.rightSE);let he=g.split(Z);for(let _e=0,Ge=he.length;_e<Ge;_e++)_.push(he[_e])}_.length>0?(this.tree.delete(g),_.push(h)):(this.segments.push(g),g.prev=x)}else{if(x&&k){let R=x.getIntersection(k);if(R!==null){if(!x.isAnEndpoint(R)){let G=this._splitSafely(x,R);for(let Z=0,he=G.length;Z<he;Z++)_.push(G[Z])}if(!k.isAnEndpoint(R)){let G=this._splitSafely(k,R);for(let Z=0,he=G.length;Z<he;Z++)_.push(G[Z])}}}this.tree.delete(g)}return _}_splitSafely(h,g){this.tree.delete(h);let _=h.rightSE;this.queue.delete(_);let x=h.split(g);return x.push(_),h.consumedBy===void 0&&this.tree.add(h),x}},vp=class{constructor(){nt(this,"type");nt(this,"numMultiPolys")}run(h,g,_){yc.type=h;let x=[new od(g,!0)];for(let he=0,_e=_.length;he<_e;he++)x.push(new od(_[he],!1));if(yc.numMultiPolys=x.length,yc.type==="difference"){let he=x[0],_e=1;for(;_e<x.length;)Gc(x[_e].bbox,he.bbox)!==null?_e++:x.splice(_e,1)}if(yc.type==="intersection")for(let he=0,_e=x.length;he<_e;he++){let Ge=x[he];for(let ze=he+1,vt=x.length;ze<vt;ze++)if(Gc(Ge.bbox,x[ze].bbox)===null)return[]}let k=new tn(ro.compare);for(let he=0,_e=x.length;he<_e;he++){let Ge=x[he].getSweepEvents();for(let ze=0,vt=Ge.length;ze<vt;ze++)k.add(Ge[ze])}let R=new gf(k),G=null;for(k.size!=0&&(G=k.first(),k.delete(G));G;){let he=R.process(G);for(let _e=0,Ge=he.length;_e<Ge;_e++){let ze=he[_e];ze.consumedBy===void 0&&k.add(ze)}k.size!=0?(G=k.first(),k.delete(G)):G=null}Li.reset();let Z=Eh.factory(R.segments);return new qc(Z).getGeom()}},yc=new vp,Ph=yc,Xl=(h,...g)=>Ph.run("intersection",h,g),yp=(h,...g)=>Ph.run("difference",h,g);Li.set;function kh(h){let g={type:"Feature"};return g.geometry=h,g}function Mh(h){return h.type==="Feature"?h.geometry:h}function ad(h){return h&&h.geometry&&h.geometry.coordinates?h.geometry.coordinates:h}function ld(h){return kh({type:"LineString",coordinates:h})}function Ca(h){return kh({type:"MultiLineString",coordinates:h})}function ud(h){return kh({type:"Polygon",coordinates:h})}function cd(h){return kh({type:"MultiPolygon",coordinates:h})}function hd(h,g){let _=Mh(h),x=Mh(g),k=Xl(_.coordinates,x.coordinates);return k.length===0?null:k.length===1?ud(k[0]):cd(k)}function w(h,g){let _=Mh(h),x=Mh(g),k=yp(_.coordinates,x.coordinates);return k.length===0?null:k.length===1?ud(k[0]):cd(k)}function M(h){return Array.isArray(h)?1+M(h[0]):-1}function j(h){h instanceof L.Polyline&&(h=h.toGeoJSON(15));let g=ad(h),_=M(g),x=[];return _>1?g.forEach(k=>{x.push(ld(k))}):x.push(h),x}function re(h){let g=[];return h.eachLayer(_=>{g.push(ad(_.toGeoJSON(15)))}),Ca(g)}zi.Cut=zi.Polygon.extend({initialize(h){this._map=h,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);g._latlngInfos=this._layer._latlngInfo,this.cut(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:x,originalLayer:k})=>{this._fireCut(k,x,k),this._fireCut(this._map,x,k),k.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(h){let g=this._map._layers,_=h._latlngInfos||[];Object.keys(g).map(x=>g[x]).filter(x=>x.pm).filter(x=>!x._pmTempLayer).filter(x=>!L.PM.optIn&&!x.options.pmIgnore||L.PM.optIn&&x.options.pmIgnore===!1).filter(x=>x instanceof L.Polyline).filter(x=>x!==h).filter(x=>x.pm.options.allowCutting).filter(x=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(x)>-1:!0).filter(x=>!this._layerGroup.hasLayer(x)).filter(x=>{try{let k=!!Qs(h.toGeoJSON(15),x.toGeoJSON(15)).features.length>0;return k||x instanceof L.Polyline&&!(x instanceof L.Polygon)?k:!!hd(h.toGeoJSON(15),x.toGeoJSON(15))}catch{return x instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(x=>{let k;if(x instanceof L.Polygon){k=L.polygon(x.getLatLngs());let he=k.getLatLngs();_.forEach(_e=>{if(_e&&_e.snapInfo){let{latlng:Ge}=_e,ze=this._calcClosestLayer(Ge,[k]);if(ze&&ze.segment&&ze.distance<this.options.snapDistance){let{segment:vt}=ze;if(vt&&vt.length===2){let{indexPath:At,parentPath:qt,newIndex:dn}=L.PM.Utils._getIndexFromSegment(he,vt);(At.length>1?(0,gi.default)(he,qt):he).splice(dn,0,Ge)}}}})}else k=x;let R=this._cutLayer(h,k),G=L.geoJSON(R,x.options);G.getLayers().length===1&&([G]=G.getLayers()),this._setPane(G,"layerPane");let Z=G.addTo(this._map.pm._getContainingLayer());if(Z.pm.enable(x.pm.options),Z.pm.disable(),x._pmTempLayer=!0,h._pmTempLayer=!0,x.remove(),x.removeFrom(this._map.pm._getContainingLayer()),h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),Z.getLayers&&Z.getLayers().length===0&&this._map.pm.removeLayer({target:Z}),Z instanceof L.LayerGroup?(Z.eachLayer(he=>{this._addDrawnLayerProp(he)}),this._addDrawnLayerProp(Z)):this._addDrawnLayerProp(Z),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let he=this.options.layersToCut.indexOf(x);he>-1&&this.options.layersToCut.splice(he,1)}this._editedLayers.push({layer:Z,originalLayer:x})})},_cutLayer(h,g){let _=L.geoJSON(),x;if(g instanceof L.Polygon)x=w(g.toGeoJSON(15),h.toGeoJSON(15));else{let k=j(g);k.forEach(R=>{let G=Un(R,h.toGeoJSON(15)),Z;G&&G.features.length>0?Z=L.geoJSON(G):Z=L.geoJSON(R),Z.getLayers().forEach(he=>{na(h.toGeoJSON(15),he.toGeoJSON(15))||he.addTo(_)})}),k.length>1?x=re(_):x=_.toGeoJSON(15)}return x},_change:L.Util.falseFn}),zi.Text=zi.extend({initialize(h){this._map=h,this._shape="Text",this.toolbarButtonName="drawText"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Jn("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var h;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(h=this._hintMarker)==null||h.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker(h){var k,R,G,Z;if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(k=this.options.textOptions)==null?void 0:k.className){let he=this.options.textOptions.className.split(" ");this.textArea.classList.add(...he)}let _=this._createTextIcon(this.textArea),x=new L.Marker(g,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(x,"markerPane"),this._finishLayer(x),x.pm||(x.options.draggable=!1),x.addTo(this._map.pm._getContainingLayer()),x.pm){x.pm.textArea=this.textArea,L.setOptions(x.pm,{removeIfEmpty:((R=this.options.textOptions)==null?void 0:R.removeIfEmpty)??!0});let he=((G=this.options.textOptions)==null?void 0:G.focusAfterDraw)??!0;x.pm._createTextMarker(he),(Z=this.options.textOptions)!=null&&Z.text&&x.pm.setText(this.options.textOptions.text)}this._fireCreate(x),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(h){this.enable(),this._hintMarker.setLatLng(h.latlng)},_createTextArea(){let h=document.createElement("textarea");return h.readOnly=!0,h.classList.add("pm-textarea","pm-disabled"),h},_createTextIcon(h){return L.divIcon({className:"pm-text-marker",html:h})}});var me={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ei(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let h=this._getDOMElem();h&&(ei(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(h)):L.DomEvent.on(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,ei(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let h=this._getDOMElem();h&&(ei(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(h)):L.DomEvent.off(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(h){let g={originalEvent:h.touches?h.touches[0]:h,target:this._layer};return h.type.indexOf("touch")===-1&&(g.containerPoint=this._map.mouseEventToContainerPoint(h),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown(h){if(h.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(h);let g=h._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",h);if(this._layer instanceof L.Marker&&(this.options.snappable&&!g&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let x="resizeableCircleMarker";this._layer instanceof L.Circle&&(x="resizeableCircle"),this.options.snappable&&!g&&!_?this._layer.pm.options[x]||this._initSnappableMarkersDrag():this._layer.pm.options[x]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=h.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(h){this._overwriteEventIfItComesFromMarker(h);let g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",h),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=h.latlng),this._onLayerDrag(h),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(h){let g=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",h),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,g&&L.DomUtil.removeClass(g,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(h){let{latlng:g}=h,_={lat:g.lat-this._tempDragCoord.lat,lng:g.lng-this._tempDragCoord.lng},x=k=>k.map(R=>{if(Array.isArray(R))return x(R);let G={lat:R.lat+_.lat,lng:R.lng+_.lng};return(R.alt||R.alt===0)&&(G.alt=R.alt),G});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let k=x([this._layer.getLatLng()]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let k=this._layer.getLatLng();this._layer._snapped&&(k=this._layer._orgLatLng);let R=x([k]);this._layer.setLatLng(R[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let k=x([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(k),this._fireChange(this._layer.getBounds(),"Edit")}else{let k=x(this._layer.getLatLngs());this._layer.setLatLngs(k),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,h.layer=this._layer,this._fireDrag(h)},addDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.addClass(h,"leaflet-pm-draggable")},removeDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_getDOMElem(){let h=null;return this._layer._path?h=this._layer._path:this._layer._renderer&&this._layer._renderer._container?h=this._layer._renderer._container:this._layer._image?h=this._layer._image:this._layer._icon&&(h=this._layer._icon),h},_overwriteEventIfItComesFromMarker(h){h.target.getLatLng&&(!h.target._radius||h.target._radius<=10)&&(h.containerPoint=this._map.mouseEventToContainerPoint(h.originalEvent),h.latlng=this._map.containerPointToLatLng(h.containerPoint))},_syncLayers(h,g){if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(x=>{x instanceof L.LayerGroup&&(_=_.concat(x.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let x in this._parentLayerGroup){let k=this._parentLayerGroup[x];k.pm&&(_=k.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(x=>!!x.pm).filter(x=>!!x.pm.options.draggable),_.forEach(x=>{x!==this._layer&&x.pm[h]&&(x._snapped=!1,x.pm[h](g))})),_.length>0}return!1},_stopDOMImageDrag(h){return h.preventDefault(),!1}},Le=me,Se=l(So());function ke(h,g,_,x){return _.unproject(g.transform(_.project(h,x)),x)}function Oe(h,g,_){let x=_.getMaxZoom();if(x===1/0&&(x=_.getZoom()),L.Util.isArray(h)){let k=[];return h.forEach(R=>{k.push(Oe(R,g,_))}),k}return h instanceof L.LatLng?ke(h,g,_,x):null}function $e(h,g){g instanceof L.Layer&&(g=g.getLatLng());let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.project(g,_)}function ut(h,g){let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.unproject(g,_)}var Ot={_onRotateStart(h){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=$e(this._map,this._rotationOriginLatLng),this._rotationStartPoint=$e(this._map,h.target.getLatLng()),this._initialRotateLatLng=Eo(this._layer),this._startAngle=this.getAngle();let g=Eo(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate(h){let g=$e(this._map,h.target.getLatLng()),_=this._rotationStartPoint,x=this._rotationOriginPoint,k=Math.atan2(g.y-x.y,g.x-x.x)-Math.atan2(_.y-x.y,_.x-x.x);this._layer.setLatLngs(this._rotateLayer(k,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let R=this;function G(Ge,ze=[],vt=-1){if(vt>-1&&ze.push(vt),L.Util.isArray(Ge[0]))Ge.forEach((At,qt)=>G(At,ze.slice(),qt));else{let At=ze.length>0?(0,Se.default)(R._markers,ze):R._markers[0];Ge.forEach((qt,dn)=>{At[dn].setLatLng(qt)})}}G(this._layer.getLatLngs());let Z=Eo(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(k,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let he=k*180/Math.PI;he=he<0?he+360:he;let _e=he+this._startAngle;this._setAngle(_e),this._rotationLayer.pm._setAngle(_e),this._fireRotation(this._rotationLayer,he,Z),this._fireRotation(this._map,he,Z),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let h=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let g=Eo(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Eo(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,h,g),this._fireRotationEnd(this._map,h,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(h,g,_,x,k){let R=$e(k,_);return this._matrix=x.clone().rotate(h,R).flip(),Oe(g,this._matrix,k)},_setAngle(h){h=h<0?h+360:h,this._angle=h%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let h=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=h.getCenter();return h.removeFrom(this._layer._map),g},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Jo(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),h),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Eo(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(h){let g=this.getAngle(),_=this._layer.getLatLngs(),x=h*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(x,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+h),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(x,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let k=this.getAngle()-g;k=k<0?k+360:k,this._startAngle=g,this._fireRotation(this._layer,k,_,this._layer),this._fireRotation(this._map||this._layer._map,k,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(h){let g=h-this.getAngle();this.rotateLayer(g)},getAngle(){return this._angle||0},setInitAngle(h){this._setAngle(h)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(h){this._rotationCenter=h,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(h)}},Dt=Ot,xt=L.Class.extend({includes:[Le,vo,Dt,Wl],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(h){L.Util.setOptions(this,h)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(h,g){let _=g.target,x={layer:this._layer,marker:_,event:g},k="";return h==="move"?k="moveVertexValidation":h==="add"?k="addVertexValidation":h==="remove"&&(k="removeVertexValidation"),this.options[k]&&typeof this.options[k]=="function"&&!this.options[k](x)?(h==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(h){return h._cancelDragEventChain?(h._latlng=h._cancelDragEventChain,h.update(),!1):!0},_vertexValidationDragEnd(h){return h._cancelDragEventChain?(h._cancelDragEventChain=null,!1):!0}}),Ht=xt;Ht.LayerGroup=L.Class.extend({initialize(h){this._layerGroup=h,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(x=>this._initLayer(x));let g=x=>{if(x.layer._pmTempLayer)return;this._layers=this.getLayers();let k=this._layers.filter(R=>!R.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in R.pm._parentLayerGroup));k.forEach(R=>{this._initLayer(R)}),k.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(g,100,this),this),this._layerGroup.on("layerremove",x=>{this._removeLayerFromGroup(x.target)},this);let _=x=>{x.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.enable(h,g)):_.pm.enable(h)})},disable(h=[]){h.length===0&&(this._layers=this.getLayers()),this._layers.forEach(g=>{g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1&&(h.push(g._leaflet_id),g.pm.disable(h)):g.pm.disable()})},enabled(h=[]){return h.length===0&&(this._layers=this.getLayers()),!!this._layers.find(g=>g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1?(h.push(g._leaflet_id),g.pm.enabled(h)):!1:g.pm.enabled())},toggleEdit(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.toggleEdit(h,g)):_.pm.toggleEdit(h)})},_initLayer(h){let g=L.Util.stamp(this._layerGroup);h.pm._parentLayerGroup||(h.pm._parentLayerGroup={}),h.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup(h){if(h.pm&&h.pm._layerGroup){let g=L.Util.stamp(this._layerGroup);delete h.pm._layerGroup[g]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(h=>h.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var h;return this._map||((h=this._layers.find(g=>!!g._map))==null?void 0:h._map)||null},getLayers(h=!1,g=!0,_=!0,x=[]){let k=[];return h?this._layerGroup.getLayers().forEach(R=>{k.push(R),R instanceof L.LayerGroup&&x.indexOf(R._leaflet_id)===-1&&(x.push(R._leaflet_id),k=k.concat(R.pm.getLayers(!0,!0,!0,x)))}):k=this._layerGroup.getLayers(),_&&(k=k.filter(R=>!(R instanceof L.LayerGroup))),g&&(k=k.filter(R=>!!R.pm),k=k.filter(R=>!R._pmTempLayer),k=k.filter(R=>!L.PM.optIn&&!R.options.pmIgnore||L.PM.optIn&&R.options.pmIgnore===!1)),k},setOptions(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this.options=h,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.setOptions(h,g)):_.pm.setOptions(h))})}}),Ht.Marker=Ht.extend({_shape:"Marker",initialize(h){this._layer=h,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(h={draggable:!0}){if(L.Util.setOptions(this,h),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(h){let g=h.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)}});var jt=l(So()),ct={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let h=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=h.filter((g,_,x)=>x.indexOf(g)===_)},_removeFromCache(h){let g=this.markerCache.indexOf(h);g>-1&&this.markerCache.splice(g,1)},renderLimits(h){this.markerCache.forEach(g=>{h.includes(g)?this._markerGroup.addLayer(g):this._markerGroup.removeLayer(g)})},applyLimitFilters({latlng:h={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let g=[...this._filterClosestMarkers(h)];this.renderLimits(g)},_filterClosestMarkers(h){let g=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?g:(g.sort((x,k)=>{let R=x._latlng.distanceTo(h),G=k._latlng.distanceTo(h);return R-G}),g.filter((x,k)=>_>-1?k<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(h){this._preventRenderMarkers=!!h}},yt=ct;Ht.Line=Ht.extend({includes:[yt],_shape:"Line",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(h){return this.enabled()?this.disable():this.enable(h),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let h=this._map,g=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(h),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=x=>{if(Array.isArray(x[0]))return x.map(_,this);let k=x.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&x.map((R,G)=>{let Z=this.isPolygon()?(G+1)%x.length:G+1;return this._createMiddleMarker(k[G],k[Z])}),k};this._markers=_(g),this.filterMarkerGroup(),h.addLayer(this._markerGroup)},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker(h,g){if(!h||!g)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,h.getLatLng(),g.getLatLng()),x=this._createMarker(_),k=L.divIcon({className:"marker-icon marker-icon-middle"});return x.setIcon(k),x.leftM=h,x.rightM=g,h._middleMarkerNext=x,g._middleMarkerPrev=x,x.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),x.on("movestart",this._onMiddleMarkerMoveStart,this),x},_onMiddleMarkerClick(h){let g=h.target;if(!this._vertexValidation("add",h))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMoveStart(h){let g=h.target;if(g.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",h)){g.on("move",this._onMiddleMarkerMovePrevent,this);return}g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMovePrevent(h){let g=h.target;this._vertexValidationDrag(g)},_onMiddleMarkerMoveEnd(h){let g=h.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(g))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),setTimeout(()=>{delete g._dragging},100)},_addMarker(h,g,_){h.off("movestart",this._onMiddleMarkerMoveStart,this),h.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let x=h.getLatLng(),k=this._layer._latlngs;delete h.leftM,delete h.rightM;let{indexPath:R,index:G,parentPath:Z}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),he=R.length>1?(0,jt.default)(k,Z):k,_e=R.length>1?(0,jt.default)(this._markers,Z):this._markers;he.splice(G+1,0,x),_e.splice(G+1,0,h),this._layer.setLatLngs(k),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(g,h),this._createMiddleMarker(h,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(h,L.PM.Utils.findDeepMarkerIndex(this._markers,h).indexPath,x),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Sr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(h){let g=this._layer,_,x;if(this.options.allowSelfIntersection?_=!1:(x=Sr(this._layer.toGeoJSON(15)),_=x.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;h?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(x)}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(h,g){h.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,g):_._icon&&(g&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(h){let g=h.target;if(!this._vertexValidation("remove",h))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Eo(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:x,index:k,parentPath:R}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!x)return;let G=x.length>1?(0,jt.default)(_,R):_,Z=x.length>1?(0,jt.default)(this._markers,R):this._markers,he=R[R.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!he&&(G.length<=2||this.isPolygon()&&G.length<=3)){this._flashLayer();return}G.splice(k,1),this._layer.setLatLngs(_),this.isPolygon()&&G.length<=2&&G.splice(0,G.length);let _e=!1;if(G.length<=1&&(G.splice(0,G.length),R.length>1&&x.length>1&&(_=ml(_)),this._layer.setLatLngs(_),this._initMarkers(),_e=!0),ji(_)||this._layer.remove(),_=ml(_),this._layer.setLatLngs(_),this._markers=ml(this._markers),!_e&&(Z=x.length>1?(0,jt.default)(this._markers,R):this._markers,g._middleMarkerPrev&&(this._markerGroup.removeLayer(g._middleMarkerPrev),this._removeFromCache(g._middleMarkerPrev)),g._middleMarkerNext&&(this._markerGroup.removeLayer(g._middleMarkerNext),this._removeFromCache(g._middleMarkerNext)),this._markerGroup.removeLayer(g),this._removeFromCache(g),Z)){let Ge,ze;if(this.isPolygon()?(Ge=(k+1)%Z.length,ze=(k+(Z.length-1))%Z.length):(ze=k-1<0?void 0:k-1,Ge=k+1>=Z.length?void 0:k+1),Ge!==ze){let vt=Z[ze],At=Z[Ge];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(vt,At)}Z.splice(k,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,x),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(h){let g=this._layer.getLatLngs(),_=h.getLatLng(),{indexPath:x,index:k,parentPath:R}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);(x.length>1?(0,jt.default)(g,R):g).splice(k,1,_),this._layer.setLatLngs(g)},_getNeighborMarkers(h){let{indexPath:g,index:_,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),k=g.length>1?(0,jt.default)(this._markers,x):this._markers,R=(_+1)%k.length,G=(_+(k.length-1))%k.length,Z=k[G],he=k[R];return{prevMarker:Z,nextMarker:he}},_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),x=L.polyline([g.getLatLng(),h.getLatLng()]),k=L.polyline([h.getLatLng(),_.getLatLng()]),R=Qs(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,G=Qs(this._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return h.getLatLng()===this._markers[0][0].getLatLng()?G+=1:h.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(R+=1),!(R<=2&&G<=2)},_onMarkerDragStart(h){let g=h.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",h))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Eo(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(g):this._markerAllowedToDrag=null},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g))return;let{indexPath:_,index:x,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(g);let R=_.length>1?(0,jt.default)(this._markers,k):this._markers,G=(x+1)%R.length,Z=(x+(R.length-1))%R.length,he=g.getLatLng(),_e=R[Z].getLatLng(),Ge=R[G].getLatLng();if(g._middleMarkerNext){let ze=L.PM.Utils.calcMiddleLatLng(this._map,he,Ge);g._middleMarkerNext.setLatLng(ze)}if(g._middleMarkerPrev){let ze=L.PM.Utils.calcMiddleLatLng(this._map,he,_e);g._middleMarkerPrev.setLatLng(ze)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),x=!this.options.allowSelfIntersection&&this.hasSelfIntersection();x&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(x=!1);let k=!this.options.allowSelfIntersection&&x;if(this._fireMarkerDragEnd(h,_,k),k){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(h,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(h){let g=h.target;if(g._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireVertexClick(h,_)}}),Ht.Polygon=Ht.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),x=L.polyline([g.getLatLng(),h.getLatLng()]),k=L.polyline([h.getLatLng(),_.getLatLng()]),R=Qs(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,G=Qs(this._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return!(R<=2&&G<=2)}}),Ht.Rectangle=Ht.Polygon.extend({_shape:"Rectangle",_initMarkers(){let h=this._map,g=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,h.addLayer(this._markerGroup),this._markers=[],this._markers[0]=g.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,x)=>{let k=this._cornerMarkers.find(R=>R._index===x);k&&k.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(h,g){let _=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=h,_._index=g,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(h=>{h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(h){if(!this._vertexValidation("move",h))return;let g=h.target,_=this._cornerMarkers;g._oppositeCornerLatLng=_.find(k=>k._index===(g._index+2)%4).getLatLng(),g._snapped=!1;let{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,x)},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g)||g._index===void 0)return;this._adjustRectangleForMarkerMove(g);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;this._cornerMarkers.forEach(x=>{delete x._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragEnd(h,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(h){L.extend(h._origLatLng,h._latlng);let g=L.PM.Utils._getRotatedRectangle(h.getLatLng(),h._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(h),this._layer.redraw()},_adjustAllMarkers(h){let g=this._layer.getLatLngs()[0];if(g&&g.length!==4&&g.length>0)g.forEach((_,x)=>{this._cornerMarkers[x].setLatLng(_)}),this._cornerMarkers.slice(g.length).forEach(_=>{_.setLatLng(g[0])});else if(!g||!g.length)console.error("The layer has no LatLngs");else{let _=g.findIndex(x=>h.getLatLng().equals(x));_>-1?(this._cornerMarkers[(h._index+1)%4].setLatLng(g[(_+1)%4]),this._cornerMarkers[(h._index+2)%4].setLatLng(g[(_+2)%4]),this._cornerMarkers[(h._index+3)%4].setLatLng(g[(_+3)%4])):this._cornerMarkers.forEach(x=>{x.setLatLng(g[x._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Jo(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.getAngle(),this._map||this)}}),Ht.CircleMarker=Ht.extend({_shape:"CircleMarker",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let h=this._map;this._helperLayers&&(this._helperLayers.removeFrom(h),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);let g=this._layer.getLatLng(),_=this._layer._radius,x=this._getLatLngOnCircle(g,_);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(x),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(h,g){let _=this._map.project(h),x=L.point(_.x+g,_.y);return this._map.unproject(x)},_createHintLine(h,g){let _=h.getLatLng(),x=g.getLatLng();this._hintline=L.polyline([_,x],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(h){let g=this._createMarker(h);return this.options.draggable?(L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("move",this._moveCircle,this)):g.dragging.disable(),g},_createOuterMarker(h){let g=this._createMarker(h);return g.on("drag",this._resizeCircle,this),g},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=h,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),g.on("click",this._onVertexClick,this),this._helperLayers.addLayer(g),g},_moveCircle(h){if(h.target._cancelDragEventChain)return;let g=this._centerMarker.getLatLng();this._layer.setLatLng(g);let _=this._layer._radius,x=this._getLatLngOnCircle(g,_);this._outerMarker._latlng=x,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let h=this._layer.getLatLng(),g=this._layer._radius,_=this._getLatLngOnCircle(h,g);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(h),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,g])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag(h){let g=h.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(h)},_onMarkerDragEnd(h){this._extedingMarkerDragEnd();let g=h.target;this._vertexValidationDragEnd(g)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(h))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let h=this._layer._map||this._map;if(h){let g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),h,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(g);let x=h&&h.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!x).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!x),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?g=Gl(this._map,h,g,this._getMinDistanceInMeter(h)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(g=Gl(this._map,h,g,this._getMaxDistanceInMeter(h))),g},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))},_getMinDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,h)},_getMaxDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,h)},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Ht.Circle=Ht.CircleMarker.extend({_shape:"Circle",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(h){L.PM.Edit.CircleMarker.prototype.enable.call(this,h||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let h=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(h,g){return this._map.distance(h,g)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Ht.ImageOverlay=Ht.extend({_shape:"ImageOverlay",initialize(h){this._layer=h,this._enabled=!1},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},enabled(){return this._enabled},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let h=this._layer.getBounds(),g=h.getNorthWest(),_=h.getNorthEast(),x=h.getSouthEast(),k=h.getSouthWest();return[g,_,x,k]}}),Ht.Text=Ht.extend({_shape:"Text",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let h=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),h.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let h=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${h}px`,this.textArea.style.width=`${g}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(h){h.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(h={}){let g=this._hasFocus;this._hasFocus=h.type==="focus",!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(h){h&&(this.textArea.value=h),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let g=this.options.className.split(" ");this.textArea.classList.add(...g)}let h=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(h),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(h=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),h===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(h){h.preventDefault()}});var Xt=function(h,g,_,x,k,R){this._matrix=[h,g,_,x,k,R]};Xt.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Xt.prototype={transform(h){return this._transform(h.clone())},_transform(h){let g=this._matrix,{x:_,y:x}=h;return h.x=g[0]*_+g[1]*x+g[4],h.y=g[2]*_+g[3]*x+g[5],h},untransform(h){let g=this._matrix;return new L.Point((h.x/g[0]-g[4])/g[0],(h.y/g[2]-g[5])/g[2])},clone(){let h=this._matrix;return new L.PM.Matrix(h[0],h[1],h[2],h[3],h[4],h[5])},translate(h){if(h===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let g,_;return typeof h=="number"?(g=h,_=h):(g=h.x,_=h.y),this._add(1,0,0,1,g,_)},scale(h,g){if(h===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,x;return g=g||L.point(0,0),typeof h=="number"?(_=h,x=h):(_=h.x,x=h.y),this._add(_,0,0,x,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},rotate(h,g){let _=Math.cos(h),x=Math.sin(h);return g=g||new L.Point(0,0),this._add(_,x,-x,_,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(h,g,_,x,k,R){let G=[[],[],[]],Z=this._matrix,he=[[Z[0],Z[2],Z[4]],[Z[1],Z[3],Z[5]],[0,0,1]],_e=[[h,_,k],[g,x,R],[0,0,1]],Ge;h&&h instanceof L.PM.Matrix&&(Z=h._matrix,_e=[[Z[0],Z[2],Z[4]],[Z[1],Z[3],Z[5]],[0,0,1]]);for(let ze=0;ze<3;ze+=1)for(let vt=0;vt<3;vt+=1){Ge=0;for(let At=0;At<3;At+=1)Ge+=he[ze][At]*_e[At][vt];G[ze][vt]=Ge}return this._matrix=[G[0][0],G[1][0],G[0][1],G[1][1],G[0][2],G[1][2]],this}};var an=Xt,Qt={calcMiddleLatLng(h,g,_){let x=h.project(g),k=h.project(_);return h.unproject(x._add(k)._divideBy(2))},findLayers(h){let g=[];return h.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&g.push(_)}),g=g.filter(_=>!!_.pm),g=g.filter(_=>!_._pmTempLayer),g=g.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),g},circleToPolygon(h,g=60,_=!0){let x=h.getLatLng(),k=h.getRadius(),R=_i(x,k,g,0,_),G=[];for(let Z=0;Z<R.length;Z+=1){let he=[R[Z].lat,R[Z].lng];G.push(he)}return L.polygon(G,h.options)},disablePopup(h){h.getPopup()&&(h._tempPopupCopy=h.getPopup(),h.unbindPopup())},enablePopup(h){h._tempPopupCopy&&(h.bindPopup(h._tempPopupCopy),delete h._tempPopupCopy)},_fireEvent(h,g,_,x=!1){h.fire(g,_,x);let{groups:k}=this.getAllParentGroups(h);k.forEach(R=>{R.fire(g,_,x)})},getAllParentGroups(h){let g=[],_=[],x=k=>{for(let R in k._eventParents)if(g.indexOf(R)===-1){g.push(R);let G=k._eventParents[R];_.push(G),x(G)}};return!h._pmLastGroupFetch||!h._pmLastGroupFetch.time||new Date().getTime()-h._pmLastGroupFetch.time>1e3?(x(h),h._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:g},{groupIds:g,groups:_}):{groups:h._pmLastGroupFetch.groups,groupIds:h._pmLastGroupFetch.groupIds}},createGeodesicPolygon:_i,getTranslation:Jn,findDeepCoordIndex(h,g,_=!0){let x,k=G=>(Z,he)=>{let _e=G.concat(he);if(_){if(Z.lat&&Z.lat===g.lat&&Z.lng===g.lng)return x=_e,!0}else if(Z.lat&&L.latLng(Z).equals(g))return x=_e,!0;return Array.isArray(Z)&&Z.some(k(_e))};h.some(k([]));let R={};return x&&(R={indexPath:x,index:x[x.length-1],parentPath:x.slice(0,x.length-1)}),R},findDeepMarkerIndex(h,g){let _,x=R=>(G,Z)=>{let he=R.concat(Z);return G._leaflet_id===g._leaflet_id?(_=he,!0):Array.isArray(G)&&G.some(x(he))};h.some(x([]));let k={};return _&&(k={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),k},_getIndexFromSegment(h,g){if(g&&g.length===2){let _=this.findDeepCoordIndex(h,g[0]),x=this.findDeepCoordIndex(h,g[1]),k=Math.max(_.index,x.index);return(_.index===0||x.index===0)&&k!==1&&(k+=1),{indexA:_,indexB:x,newIndex:k,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(h,g,_,x){let k=$e(x,h),R=$e(x,g),G=_*Math.PI/180,Z=Math.cos(G),he=Math.sin(G),_e=(R.x-k.x)*Z+(R.y-k.y)*he,Ge=(R.y-k.y)*Z-(R.x-k.x)*he,ze=_e*Z+k.x,vt=_e*he+k.y,At=-Ge*he+k.x,qt=Ge*Z+k.y,dn=ut(x,k),yn=ut(x,{x:ze,y:vt}),nr=ut(x,R),We=ut(x,{x:At,y:qt});return[dn,yn,nr,We]},pxRadiusToMeterRadius(h,g,_){let x=g.project(_),k=L.point(x.x+h,x.y);return g.distance(g.unproject(k),_)}},Pn=Qt;L.PM=L.PM||{version:Ul.version,Map:cs,Toolbar:vl,Draw:zi,Edit:Ht,Utils:Pn,Matrix:an,activeLang:"en",optIn:!1,initialize(h){this.addInitHooks(h)},setOptIn(h){this.optIn=!!h},addInitHooks(){function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(x);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(k);function R(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(R);function G(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(G);function Z(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(Z);function he(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(he)},reInitLayer(h){h instanceof L.LayerGroup&&h.eachLayer(g=>{this.reInitLayer(g)}),h.pm||L.PM.optIn&&h.options.pmIgnore!==!1||h.options.pmIgnore||(h instanceof L.Map?h.pm=new L.PM.Map(h):h instanceof L.Marker?h.options.textMarker?(h.pm=new L.PM.Edit.Text(h),h.pm._initTextMarker(),h.pm._createTextMarker(!1)):h.pm=new L.PM.Edit.Marker(h):h instanceof L.Circle?h.pm=new L.PM.Edit.Circle(h):h instanceof L.CircleMarker?h.pm=new L.PM.Edit.CircleMarker(h):h instanceof L.Rectangle?h.pm=new L.PM.Edit.Rectangle(h):h instanceof L.Polygon?h.pm=new L.PM.Edit.Polygon(h):h instanceof L.Polyline?h.pm=new L.PM.Edit.Line(h):h instanceof L.LayerGroup?h.pm=new L.PM.Edit.LayerGroup(h):h instanceof L.ImageOverlay&&(h.pm=new L.PM.Edit.ImageOverlay(h)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(h){let g=this._map.mouseEventToLayerPoint(h),_,x;for(let k=this._drawFirst;k;k=k.next)_=k.layer,_.options.interactive&&_._containsPoint(g)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(_))&&(x=_);x&&(L.DomEvent.fakeStop(h),this._fireEvent([x],h))}}),L.PM.initialize()})();var Xz={exports:{}};(function(t){(function(e){var n;n=pn,t.exports=e(n)})(function(e){return e.Polyline._flat=e.LineUtil.isFlat||e.Polyline._flat||function(n){return!e.Util.isArray(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"},e.GeometryUtil=e.extend(e.GeometryUtil||{},{distance:function(n,r,i){return n.latLngToLayerPoint(r).distanceTo(n.latLngToLayerPoint(i))},distanceSegment:function(n,r,i,s){var o=n.latLngToLayerPoint(r),a=n.latLngToLayerPoint(i),l=n.latLngToLayerPoint(s);return e.LineUtil.pointToSegmentDistance(o,a,l)},readableDistance:function(n,r){var i=r!=="imperial",s;return i?n>1e3?s=(n/1e3).toFixed(2)+" km":s=n.toFixed(1)+" m":(n*=1.09361,n>1760?s=(n/1760).toFixed(2)+" miles":s=n.toFixed(1)+" yd"),s},belongsSegment:function(n,r,i,s){s=s===void 0?.2:s;var o=r.distanceTo(i),a=r.distanceTo(n)+n.distanceTo(i)-o;return a/o<s},length:function(n){var r=e.GeometryUtil.accumulatedLengths(n);return r.length>0?r[r.length-1]:0},accumulatedLengths:function(n){if(typeof n.getLatLngs=="function"&&(n=n.getLatLngs()),n.length===0)return[];for(var r=0,i=[0],s=0,o=n.length-1;s<o;s++)r+=n[s].distanceTo(n[s+1]),i.push(r);return i},closestOnSegment:function(n,r,i,s){var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());var a=n.project(r,o),l=n.project(i,o),c=n.project(s,o),f=e.LineUtil.closestPointOnSegment(a,l,c);return n.unproject(f,o)},closestOnCircle:function(n,r){const i=n.getLatLng(),s=n.getRadius(),o=typeof s=="number"?s:s.radius,a=r.lng,l=r.lat,c=i.lng,f=i.lat,p=a-c,y=l-f,m=Math.sqrt(p*p+y*y),C=c+p/m*o,S=f+y/m*o;return new e.LatLng(S,C)},closest:function(n,r,i,s){var o,a=1/0,l=null,c,f,p,y;if(r instanceof Array)if(r[0]instanceof Array&&typeof r[0][0]!="number"){for(c=0;c<r.length;c++)y=e.GeometryUtil.closest(n,r[c],i,s),y&&y.distance<a&&(a=y.distance,l=y);return l}else if(r[0]instanceof e.LatLng||typeof r[0][0]=="number"||typeof r[0].lat=="number")r=e.polyline(r);else return l;if(!(r instanceof e.Polyline))return l;if(o=JSON.parse(JSON.stringify(r.getLatLngs().slice(0))),r instanceof e.Polygon){var m=function(O){if(e.Polyline._flat(O))O.push(O[0]);else for(var D=0;D<O.length;D++)m(O[D])};m(o)}if(e.Polyline._flat(o)){if(s){for(c=0,f=o.length;c<f;c++){var C=o[c];p=e.GeometryUtil.distance(n,i,C),p<a&&(a=p,l=C,l.distance=p)}return l}for(c=0,f=o.length;c<f-1;c++){var S=o[c],T=o[c+1];p=e.GeometryUtil.distanceSegment(n,i,S,T),p<=a&&(a=p,l=e.GeometryUtil.closestOnSegment(n,i,S,T),l.distance=p)}return l}else{for(c=0;c<o.length;c++)y=e.GeometryUtil.closest(n,o[c],i,s),y.distance<a&&(a=y.distance,l=y);return l}},closestLayer:function(n,r,i){for(var s=1/0,o=null,a=null,l=1/0,c=0,f=r.length;c<f;c++){var p=r[c];if(p instanceof e.LayerGroup){var y=e.GeometryUtil.closestLayer(n,p.getLayers(),i);y.distance<s&&(s=y.distance,o=y)}else p instanceof e.Circle?(a=this.closestOnCircle(p,i),l=e.GeometryUtil.distance(n,i,a)):typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(n,i,a)):(a=e.GeometryUtil.closest(n,p,i),a&&(l=a.distance)),l<s&&(s=l,o={layer:p,latlng:a,distance:l})}return o},nClosestLayers:function(n,r,i,s){if(s=typeof s=="number"?s:r.length,s<1||r.length<1)return null;for(var o=[],a,l,c=0,f=r.length;c<f;c++){var p=r[c];if(p instanceof e.LayerGroup){var y=e.GeometryUtil.closestLayer(n,p.getLayers(),i);o.push(y)}else p instanceof e.Circle?(l=this.closestOnCircle(p,i),a=e.GeometryUtil.distance(n,i,l)):typeof p.getLatLng=="function"?(l=p.getLatLng(),a=e.GeometryUtil.distance(n,i,l)):(l=e.GeometryUtil.closest(n,p,i),l&&(a=l.distance)),o.push({layer:p,latlng:l,distance:a})}return o.sort(function(m,C){return m.distance-C.distance}),o.length>s?o.slice(0,s):o},layersWithin:function(n,r,i,s){s=typeof s=="number"?s:1/0;for(var o=[],a=null,l=0,c=0,f=r.length;c<f;c++){var p=r[c];typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(n,i,a)):(a=e.GeometryUtil.closest(n,p,i),a&&(l=a.distance)),a&&l<s&&o.push({layer:p,latlng:a,distance:l})}var y=o.sort(function(m,C){return m.distance-C.distance});return y},closestLayerSnap:function(n,r,i,s,o){s=typeof s=="number"?s:1/0,o=typeof o=="boolean"?o:!0;var a=e.GeometryUtil.closestLayer(n,r,i);if(!a||a.distance>s)return null;if(o&&typeof a.layer.getLatLngs=="function"){var l=e.GeometryUtil.closest(n,a.layer,a.latlng,!0);l.distance<s&&(a.latlng=l,a.distance=e.GeometryUtil.distance(n,l,i))}return a},interpolateOnPointSegment:function(n,r,i){return e.point(n.x*(1-i)+i*r.x,n.y*(1-i)+i*r.y)},interpolateOnLine:function(n,r,i){r=r instanceof e.Polyline?r.getLatLngs():r;var s=r.length;if(s<2)return null;if(i=Math.max(Math.min(i,1),0),i===0)return{latLng:r[0]instanceof e.LatLng?r[0]:e.latLng(r[0]),predecessor:-1};if(i==1)return{latLng:r[r.length-1]instanceof e.LatLng?r[r.length-1]:e.latLng(r[r.length-1]),predecessor:r.length-2};var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());for(var a=[],l=0,c=0;c<s;c++)a[c]=n.project(r[c],o),c>0&&(l+=a[c-1].distanceTo(a[c]));for(var f=l*i,p=0,y=0,c=0;y<f;c++){var m=a[c],C=a[c+1];p=y,y+=m.distanceTo(C)}if(m==null&&C==null)var m=a[0],C=a[1],c=1;var S=y-p!==0?(f-p)/(y-p):0,T=e.GeometryUtil.interpolateOnPointSegment(m,C,S);return{latLng:n.unproject(T,o),predecessor:c-1}},locateOnLine:function(n,r,i){var s=r.getLatLngs();if(i.equals(s[0]))return 0;if(i.equals(s[s.length-1]))return 1;for(var o=e.GeometryUtil.closest(n,r,i,!1),a=e.GeometryUtil.accumulatedLengths(s),l=a[a.length-1],c=0,f=!1,p=0,y=s.length-1;p<y;p++){var m=s[p],C=s[p+1];if(c=a[p],e.GeometryUtil.belongsSegment(o,m,C,.001)){c+=m.distanceTo(o),f=!0;break}}if(!f)throw"Could not interpolate "+i.toString()+" within "+r.toString();return c/l},reverse:function(n){return e.polyline(n.getLatLngs().slice(0).reverse())},extract:function(n,r,i,s){if(i>s)return e.GeometryUtil.extract(n,e.GeometryUtil.reverse(r),1-i,1-s);i=Math.max(Math.min(i,1),0),s=Math.max(Math.min(s,1),0);var o=r.getLatLngs(),a=e.GeometryUtil.interpolateOnLine(n,r,i),l=e.GeometryUtil.interpolateOnLine(n,r,s);if(i==s){var c=e.GeometryUtil.interpolateOnLine(n,r,s);return[c.latLng]}a.predecessor==-1&&(a.predecessor=0),l.predecessor==-1&&(l.predecessor=0);var f=o.slice(a.predecessor+1,l.predecessor+1);return f.unshift(a.latLng),f.push(l.latLng),f},isBefore:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs();return i[i.length-1].equals(s[0])},isAfter:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs();return i[0].equals(s[s.length-1])},startsAtExtremity:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs(),o=i[0];return o.equals(s[0])||o.equals(s[s.length-1])},computeAngle:function(n,r){return Math.atan2(r.y-n.y,r.x-n.x)*180/Math.PI},computeSlope:function(n,r){var i=(r.y-n.y)/(r.x-n.x),s=n.y-i*n.x;return{a:i,b:s}},rotatePoint:function(n,r,i,s){var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());var a=i*Math.PI/180,l=n.project(r,o),c=n.project(s,o),f=Math.cos(a)*(l.x-c.x)-Math.sin(a)*(l.y-c.y)+c.x,p=Math.sin(a)*(l.x-c.x)+Math.cos(a)*(l.y-c.y)+c.y;return n.unproject(new e.Point(f,p),o)},bearing:function(n,r){var i=Math.PI/180,s=n.lat*i,o=r.lat*i,a=n.lng*i,l=r.lng*i,c=Math.sin(l-a)*Math.cos(o),f=Math.cos(s)*Math.sin(o)-Math.sin(s)*Math.cos(o)*Math.cos(l-a),p=(Math.atan2(c,f)*180/Math.PI+360)%360;return p>=180?p-360:p},destination:function(n,r,i){r=(r+360)%360;var s=Math.PI/180,o=180/Math.PI,a=e.CRS.Earth.R,l=n.lng*s,c=n.lat*s,f=r*s,p=Math.sin(c),y=Math.cos(c),m=Math.cos(i/a),C=Math.sin(i/a),S=Math.asin(p*m+y*C*Math.cos(f)),T=l+Math.atan2(Math.sin(f)*C*y,m-p*Math.sin(S));return T=T*o,T=T>180?T-360:T<-180?T+360:T,e.latLng([S*o,T])},angle:function(n,r,i){var s=n.latLngToContainerPoint(r),o=n.latLngToContainerPoint(i),a=Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI+90;return a+=a<0?360:0,a},destinationOnSegment:function(n,r,i,s){var o=e.GeometryUtil.angle(n,r,i),a=e.GeometryUtil.destination(r,o,s);return e.GeometryUtil.closestOnSegment(n,a,r,i)}}),e.GeometryUtil})})(Xz);L.Map.mergeOptions({almostOver:!0,almostDistance:25,almostSamplingPeriod:50,almostOnMouseMove:!0});L.Handler.AlmostOver=L.Handler.extend({includes:L.Evented||L.Mixin.Events,initialize:function(t){this._map=t,this._layers=[],this._previous=null,this._marker=null,this._buffer=0,this.__mouseMoveSampling=function(){var e=new Date;return function(n){var r=new Date,i=r-e<this._map.options.almostSamplingPeriod;i||this._layers.length===0||(e=r,this._map.fire("mousemovesample",{latlng:n.latlng}))}}()},addHooks:function(){this._map.options.almostOnMouseMove&&(this._map.on("mousemove",this.__mouseMoveSampling,this),this._map.on("mousemovesample",this._onMouseMove,this)),this._map.on("click dblclick",this._onMouseClick,this),this._map;function t(){this._buffer=this._map.layerPointToLatLng([0,0]).lat-this._map.layerPointToLatLng([this._map.options.almostDistance,this._map.options.almostDistance]).lat}this._map.on("viewreset zoomend",t,this),this._map.whenReady(t,this)},removeHooks:function(){this._map.off("mousemovesample"),this._map.off("mousemove",this.__mouseMoveSampling,this),this._map.off("click dblclick",this._onMouseClick,this)},addLayer:function(t){typeof t.eachLayer=="function"?t.eachLayer(function(e){this.addLayer(e)},this):(typeof this.indexLayer=="function"&&this.indexLayer(t),this._layers.push(t))},removeLayer:function(t){if(typeof t.eachLayer=="function")t.eachLayer(function(n){this.removeLayer(n)},this);else{typeof this.unindexLayer=="function"&&this.unindexLayer(t);var e=this._layers.indexOf(t);0<=e&&this._layers.splice(e,1)}this._previous=null},getClosest:function(t){var e=L.GeometryUtil.closestLayerSnap,n=this._map.options.almostDistance,r=[];return typeof this.searchBuffer=="function"?r=this.searchBuffer(t,this._buffer):r=this._layers,e(this._map,r,t,n,!1)},_onMouseMove:function(t){var e=this.getClosest(t.latlng);e?(this._previous?L.stamp(this._previous.layer)!=L.stamp(e.layer)&&(this._map.fire("almost:out",{layer:this._previous.layer}),this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng})):this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng}),this._map.fire("almost:move",{layer:e.layer,latlng:e.latlng})):this._previous&&this._map.fire("almost:out",{layer:this._previous.layer}),this._previous=e},_onMouseClick:function(t){var e=this.getClosest(t.latlng);e&&this._map.fire("almost:"+t.type,{layer:e.layer,latlng:e.latlng})}});L.LayerIndexMixin!==void 0&&L.Handler.AlmostOver.include(L.LayerIndexMixin);L.Map.addInitHook("addHandler","almostOver",L.Handler.AlmostOver);const El=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=pn.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n},Pa=(t,e="m",n="")=>{let r,i;return e==="m²"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m²"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`},Jz=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},Sd=(t,e)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<e))return n=i,t.apply(this,r)}};function Qz(){const t=kt(null),e=kt(null),n=kt(null),r=kt(null),i=kt(""),s=kt(null),o=kt(!1);kt(null);const a=()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(z=>z.remove()),document.querySelectorAll(".drawing-help-message").forEach(z=>z.remove())};window.addEventListener("clearControlPoints",a),ku(()=>{window.removeEventListener("clearControlPoints",a),t.value&&(t.value.remove(),t.value=null)});const l=(z,B)=>{const X=pn.DomUtil.create("div","measure-tooltip");if(X.innerHTML=B,X.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(X),t.value){const K=t.value.latLngToContainerPoint(z);X.style.left=`${K.x+10}px`,X.style.top=`${K.y-25}px`}return X},c=Sd((z,B,X)=>{if(z&&(z.innerHTML=X,t.value)){const K=t.value.latLngToContainerPoint(B);z.style.left=`${K.x+10}px`,z.style.top=`${K.y-25}px`}},100),f=(z,B,X)=>{z.on("mouseover",()=>{const K=l(z.getLatLng(),X());z.measureDiv=K}),z.on("mousemove",K=>{z.measureDiv&&t.value&&c(z.measureDiv,K.latlng,X())}),z.on("mouseout",()=>{z.measureDiv&&(z.measureDiv.remove(),z.measureDiv=void 0)})};let p=[];const y=()=>{var z;p.cleanup&&p.cleanup(),n.value&&n.value.clearLayers(),p=[],(z=r.value)==null||z.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(B=>B.remove())},m=(z,B="#2563EB")=>{const X=typeof window<"u"&&window.innerWidth<768,K=pn.circleMarker(z,{radius:X?14:6,color:B,fillColor:B,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(K),K},C=(z,B)=>{var K,ye,Te,Ue,J,ie;const X={type:B,style:z.options||{}};try{if(z instanceof pn.Polygon)try{const pe=z.getLatLngs()[0].map(be=>[be.lng,be.lat]);pe.push(pe[0]);const we=Hh([pe]);X.surface=Tp(we),X.perimeter=i9(Hg(pe),{units:"meters"})}catch(se){console.warn("Erreur lors du calcul des propriétés du polygone:",se),X.surface=0,X.perimeter=0}else if(z instanceof pn.Polyline&&!(z instanceof pn.Polygon))try{const se=z.getLatLngs();let pe=0;for(let we=1;we<se.length;we++)pe+=se[we].distanceTo(se[we-1]);X.length=pe}catch(se){console.warn("Erreur lors du calcul de la longueur de la ligne:",se),X.length=0}X.style={...X.style,color:((K=z.options)==null?void 0:K.color)||"#3388ff",weight:((ye=z.options)==null?void 0:ye.weight)||3,opacity:((Te=z.options)==null?void 0:Te.opacity)||1,fillColor:((Ue=z.options)==null?void 0:Ue.fillColor)||"#3388ff",fillOpacity:((J=z.options)==null?void 0:J.fillOpacity)||.2,dashArray:((ie=z.options)==null?void 0:ie.dashArray)||""}}catch(se){console.error("Erreur lors du calcul des propriétés de la forme:",se),X.style=X.style||{color:"#3388ff",weight:3,opacity:1,fillColor:"#3388ff",fillOpacity:.2,dashArray:""}}return X},S=()=>{if(!t.value||!t.value.almostOver||!e.value)return;e.value.getLayers().filter(B=>B instanceof ys||B instanceof pn.Polyline&&!(B instanceof pn.Polygon)||B instanceof Ol||B instanceof il).forEach(B=>{var X;(X=t.value)==null||X.almostOver.addLayer(B)})},T=(z,B,X)=>{const K={almostOnMouseMove:!0,zoomAnimation:!0,fadeAnimation:!0,markerZoomAnimation:!0},ye=pn.map(z,K).setView(B,X);t.value=ye,pn.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(ye);const Te=new pn.FeatureGroup;return Te.addTo(ye),e.value=Te,ye.almostOver?ye.almostOver.options.tolerance=25:console.warn("Leaflet.AlmostOver plugin not loaded properly"),n.value=pn.featureGroup().addTo(ye),r.value=pn.featureGroup().addTo(ye),ye.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:Te,snapLayers:[Te,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),ye.whenReady(()=>{t.value&&t.value.almostOver&&e.value&&setTimeout(S,100)}),ye.on("pm:drawstart",Ue=>{o.value=!0,Ue.shape==="Circle"&&i.value==="Semicircle"&&(ye.getContainer().style.cursor="crosshair")}),ye.on("pm:drawend",()=>{o.value=!1,ye.getContainer().style.cursor="",s.value&&El("Cliquez sur la forme pour afficher les points de contrôle")}),ye.on("pm:create",H),Te.on("click",Ue=>{var ie,se,pe;pn.DomEvent.stopPropagation(Ue);const J=Ue.layer;J.name&&!((ie=J.properties)!=null&&ie.name)?(J.properties||(J.properties={}),J.properties.name=J.name):(se=J.properties)!=null&&se.name&&!J.name&&(J.name=J.properties.name),(pe=r.value)==null||pe.clearLayers(),y(),s.value=J,J instanceof pn.Polygon?Y(J):J instanceof ys||J instanceof pn.Polyline?V(J):J instanceof il&&de(J)}),ye.on("pm:edit",Ue=>{var ie;const J=Ue.layer;if(J){const se=((ie=J.properties)==null?void 0:ie.type)||"unknown";ee(J,se),J instanceof pn.Polygon?Y(J):J instanceof ys?(J.updateProperties(),ee(J,"Line"),V(J)):J instanceof pn.Polyline?V(J):J instanceof il&&(J.updateProperties(),de(J))}}),ye.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(Ue=>Ue.remove()),El("Déplacez la forme à l'endroit souhaité")}),ye.on("pm:dragend",Ue=>{var ie;const J=Ue.layer;if(J){const se=((ie=J.properties)==null?void 0:ie.type)||"unknown";J instanceof ys?(J.updateProperties(),ee(J,"Line"),V(J)):ee(J,se)}setTimeout(()=>{El("Cliquez sur la forme pour afficher les points de contrôle")},100)}),ye.on("pm:remove",()=>{var Ue;(Ue=document.querySelector(".drawing-help-message"))==null||Ue.remove()}),ye.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(Ue=>Ue.remove()),El("Utilisez les points de contrôle pour modifier la forme")}),ye.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(Ue=>Ue.remove())}),ye.on("zoomstart",()=>{s.value&&(y(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(Ue=>Ue.remove()))}),ye.on("almost:over",function(Ue){const ie=Ue.layer;if(ie){if(s.value===ie)return;if(ie instanceof ys){const se={...ie.options};ie._originalStyle=se;const pe=se;ie.setStyle({weight:(pe.weight||3)+2,opacity:Math.min((pe.opacity||1)+.2,1)}),document.querySelectorAll(".drawing-help-message").forEach(we=>we.remove()),El("Cliquez pour sélectionner cette ligne"),ye.getContainer()&&(ye.getContainer().style.cursor="pointer")}else if(ie instanceof Ol){const se={...ie.options};ie._originalStyle=se,ie.setStyle({weight:(se.weight||3)+2,opacity:Math.min((se.opacity||1)+.2,1),fillOpacity:Math.min((se.fillOpacity||.2)+.1,.4)}),document.querySelectorAll(".drawing-help-message").forEach(pe=>pe.remove()),El("Cliquez pour sélectionner ce polygone"),ye.getContainer()&&(ye.getContainer().style.cursor="pointer")}else if(ie instanceof il){const se=ie.getElement();se&&(se.classList.add("geo-note-pulse"),se.style.zIndex="1000",se.style.visibility="visible",se.style.display="flex",se.style.opacity="1",se.style.filter="drop-shadow(0 0 5px rgba(59, 130, 246, 0.7))"),document.querySelectorAll(".drawing-help-message").forEach(pe=>pe.remove()),El("Cliquez pour sélectionner cette note"),ye.getContainer()&&(ye.getContainer().style.cursor="pointer")}}}),ye.on("almost:out",function(Ue){const ie=Ue.layer;if(ie){if(s.value===ie)return;if(ie instanceof ys&&ie._originalStyle)ie.setStyle(ie._originalStyle),ie._originalStyle=void 0;else if(ie instanceof Ol)ie._originalStyle&&(ie.setStyle(ie._originalStyle),ie._originalStyle=void 0);else if(ie instanceof il){const se=ie.getElement();se?(se.classList.remove("geo-note-pulse"),se.style.zIndex="",se.style.filter="none",se.style.opacity="1",se.style.display="block",se.style.visibility="visible",Array.from(se.querySelectorAll("*")).forEach(pe=>{pe.style.visibility="visible",pe.style.display="block",pe.style.opacity="1"}),setTimeout(()=>{try{const pe=se.getBoundingClientRect();(pe.width===0||pe.height===0)&&(console.warn("[almost:out] L'élément a une taille nulle après sortie, recréation de l'icône"),ie.recreateIcon())}catch(pe){console.error("[almost:out] Erreur lors de la vérification de la taille:",pe),ie.recreateIcon()}},100)):(console.warn("[almost:out] Élément DOM introuvable, recréation de l'icône"),ie.recreateIcon())}(!s.value||s.value&&s.value!==ie)&&document.querySelectorAll(".drawing-help-message").forEach(se=>se.remove()),ye.getContainer()&&!document.querySelectorAll(".geo-note-pulse").length&&!document.querySelectorAll(".line-hover-effect").length&&(ye.getContainer().style.cursor="")}}),ye.on("almost:click",function(Ue){var se,pe;const ie=Ue.layer;ie&&s.value===ie||(s.value&&y(),ie&&ie instanceof ys?(s.value=ie,(se=r.value)==null||se.clearLayers(),y(),V(ie),El("Utilisez les points de contrôle pour modifier la ligne")):ie&&ie instanceof Ol?(s.value=ie,(pe=r.value)==null||pe.clearLayers(),y(),Y(ie),El("Utilisez les points de contrôle pour modifier le polygone")):ie&&ie instanceof il&&(s.value=ie,ie.editNote()))}),Te.on("layeradd",function(Ue){ye.almostOver&&(Ue.layer instanceof ys||Ue.layer instanceof pn.Polyline&&!(Ue.layer instanceof pn.Polygon)||Ue.layer instanceof Ol||Ue.layer instanceof il)&&ye.almostOver.addLayer(Ue.layer)}),Te.on("layerremove",function(Ue){ye.almostOver&&(Ue.layer instanceof ys||Ue.layer instanceof pn.Polyline&&!(Ue.layer instanceof pn.Polygon)||Ue.layer instanceof Ol||Ue.layer instanceof il)&&ye.almostOver.removeLayer(Ue.layer)}),ye},O=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const z=e.value.getBounds();if(z.isValid()){const B={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(z,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value&&(t.value.options.fadeAnimation=B.fadeAnimation),setTimeout(()=>{try{t.value&&(t.value.options.zoomAnimation=B.zoomAnimation,t.value.options.markerZoomAnimation=B.markerZoomAnimation)}catch(X){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",X)}},500)}catch(X){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",X)}},500)}}catch(z){if(console.warn("[useMapDrawing] Error adjusting view:",z),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(B){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",B)}}},D=z=>{var X;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(K=>K.remove());try{const K=t.value.pm;K.globalEditModeEnabled()&&K.disableGlobalEditMode(),K.globalRemovalModeEnabled()&&K.disableGlobalRemovalMode(),K.disableDraw(),y(),(X=r.value)==null||X.clearLayers()}catch(K){console.error("Error disabling modes:",K)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:z}})),i.value=z,!z){y(),S();return}let B=z;switch(z){case"Note":B="GeoNote";break;case"Polygon":B="Polygon";break;case"Line":B="Line";break;default:B=z}z=B,le(),setTimeout(()=>{var K,ye,Te,Ue,J,ie,se;try{switch(z){case"Polygon":El("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(K=t.value)==null||K.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(ye=t.value)==null||ye.off("pm:create"),(Te=t.value)==null||Te.on("pm:create",pe=>{var we,be,Ae;if(pe.shape==="Polygon"&&pe.layer){const Ee=pe.layer.getLatLngs()[0];(we=t.value)==null||we.removeLayer(pe.layer),(be=e.value)!=null&&be.hasLayer(pe.layer)&&e.value.removeLayer(pe.layer);const Je=new Ol(Ee,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(Je),s.value=Je,Je.updateProperties()),(Ae=t.value)==null||Ae.pm.disableDraw(),le()}});break;case"Line":El("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Ue=t.value)==null||Ue.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(J=t.value)==null||J.off("pm:create"),(ie=t.value)==null||ie.on("pm:create",pe=>{var we,be,Ae;if(pe.shape==="Line"&&pe.layer){const Ee=pe.layer.getLatLngs();(we=t.value)==null||we.removeLayer(pe.layer),(be=e.value)!=null&&be.hasLayer(pe.layer)&&e.value.removeLayer(pe.layer);const Je=new ys(Ee,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(Je),s.value=Je,Je.updateProperties()),(Ae=t.value)==null||Ae.pm.disableDraw(),le()}});break;case"GeoNote":if(El("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),t.value){const pe=async be=>{if(!t.value||!e.value)return null;try{const Ae=Wg(),Ee=new il(be,{color:"#3B82F6",name:"Note géolocalisée",description:"",columnId:"1"});e.value.addLayer(Ee),s.value=Ee,Ee.updateProperties();try{const Je=Ae.currentMapId||void 0,gt=await Ee.saveNote(Je),_t=Ee._leaflet_id;return window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:Ee,leafletId:_t,backendId:gt}})),Ee.openPopup(),Ee}catch(Je){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",Je),ph(async()=>{const{useNotificationStore:gt}=await Promise.resolve().then(()=>FN);return{useNotificationStore:gt}},void 0).then(({useNotificationStore:gt})=>{gt().error("Erreur lors de la création de la note")}),null}}catch(Ae){return console.error("[useMapDrawing] Erreur lors de la création de la note:",Ae),null}},we=async be=>{pn.DomEvent.stopPropagation(be),pn.DomEvent.preventDefault(be);const Ae=await pe(be.latlng);Ae&&t.value&&(t.value.off("click",we),e.value&&e.value.getLayers().forEach(Ee=>{if(Ee.off&&typeof Ee.off=="function")try{Ee.off("click")}catch(Je){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",Je)}}),D(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:Ae,leafletId:Ae._leaflet_id}})))};if(t.value.on("click",we),e.value){const be=async Ee=>{pn.DomEvent.stopPropagation(Ee),pn.DomEvent.preventDefault(Ee);const Je=await pe(Ee.latlng);return Je&&t.value&&(t.value.off("click",we),e.value&&e.value.getLayers().forEach(gt=>{if(gt.off&&typeof gt.off=="function")try{gt.off("click")}catch(_t){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",_t)}}),D(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:Je,leafletId:Je._leaflet_id}}))),!1};e.value.getLayers().forEach(Ee=>{Ee.on("click",be)});const Ae=()=>{e.value&&e.value.getLayers().forEach(Ee=>{if(Ee.off&&typeof Ee.off=="function")try{Ee.off("click")}catch(Je){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",Je)}}),window.removeEventListener("tool:changed",Ae)};window.addEventListener("tool:changed",Ae)}}break;case"delete":El("Cliquez sur une forme pour la supprimer"),(se=t.value)==null||se.pm.enableGlobalRemovalMode();break}}catch(pe){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",pe)}},100)},N=z=>{if(!s.value)return;const B=s.value;B.properties=B.properties||{},B.properties.style=B.properties.style||{},B.properties.style={...B.properties.style,...z};{const X={};z.fillColor&&(X.fillColor=z.fillColor),z.fillOpacity!==void 0&&(X.fillOpacity=z.fillOpacity),z.strokeColor&&(X.color=z.strokeColor),z.strokeOpacity!==void 0&&(X.opacity=z.strokeOpacity),z.strokeWidth!==void 0&&(X.weight=z.strokeWidth),z.dashArray&&(X.dashArray=z.dashArray),"setStyle"in B&&B.setStyle(X)}},U=z=>{if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}s.value.properties||(s.value.properties={}),s.value.properties.type,s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3));const B=s.value.properties.type,X=s.value.properties.category,K="category"in z&&z.category!==X;if(Object.keys(z).forEach(Te=>{Te==="type"&&B||s.value&&(s.value.properties[Te]=z[Te]),Te==="name"&&(s.value.name=z[Te])}),B&&(s.value.properties.type=B),X&&!K&&(s.value.properties.category=X),s.value&&s.value._dbId&&K){const Te=Wg(),Ue=Te.elements.find(J=>{var ie;return J.id===((ie=s.value)==null?void 0:ie._dbId)});if(Ue){const J=Ue;J.data||(J.data={}),J.data.category=s.value.properties.category,Te.$patch({unsavedChanges:!0})}}const ye=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:K}});window.dispatchEvent(ye)},W=z=>{s.value=null,ll(()=>{s.value=z})},ee=(z,B)=>{Jz((K,ye)=>{const Te=C(K,ye);K.properties={...Te},W(K),K.fire("properties:updated",{shape:K,properties:K.properties})},100)(z,B)},te=(z,B)=>pn.latLng((z.lat+B.lat)/2,(z.lng+B.lng)/2),V=z=>{if(!t.value||!e.value)return;y();const B=z.getLatLngs();if(!B||B.length===0){console.warn("Pas de points pour la ligne");return}let X=null;if(z instanceof ys){const K=z.getCenter();X=m(K,"#059669"),p.push(X),f(X,z,()=>{const ye=z.getLength()||0;return Pa(ye,"m","Longueur totale")}),X.on("mousedown",ye=>{if(!t.value)return;pn.DomEvent.stopPropagation(ye),t.value.dragging.disable();let Te=!0;const Ue=z.getLatLngs().map(we=>pn.latLng(we.lat,we.lng)),J=ye.latlng;z instanceof ys&&(z.off("move:end"),z.off("vertex:moved"),z.off("latlngs:updated"),z.off("properties:updated")),p.forEach((we,be)=>{be>0&&(we.setStyle({opacity:0,fillOpacity:0}),we.measureDiv&&(we.measureDiv.style.display="none"))});const se=Sd(we=>{if(!Te)return;const be=we.latlng.lng-J.lng,Ae=we.latlng.lat-J.lat,Ee=Ue.map(Je=>pn.latLng(Je.lat+Ae,Je.lng+be));pn.Polyline.prototype.setLatLngs.call(z,Ee),X==null||X.setLatLng(we.latlng)},16),pe=()=>{if(Te=!1,!!t.value){if(t.value.off("mousemove",se),document.removeEventListener("mouseup",pe),t.value.dragging.enable(),z instanceof ys){const we=()=>{y(),V(z)};z.on("move:end",we),z.on("vertex:moved",we),z.on("latlngs:updated",we),z.on("properties:updated",we),z.updateProperties(),ee(z,"Line")}y(),V(z)}};t.value.on("mousemove",se),document.addEventListener("mouseup",pe)})}if(B.forEach((K,ye)=>{const Te=m(K,"#DC2626");p.push(Te),f(Te,z,()=>{if(z instanceof ys){const Ue=z.getLength()||0,J=z.getLengthToVertex?z.getLengthToVertex(ye):0;return[Pa(J,"m","Distance depuis le début"),Pa(Ue,"m","Longueur totale")].join("<br>")}return""}),Te.on("mousedown",Ue=>{if(!t.value)return;pn.DomEvent.stopPropagation(Ue),t.value.dragging.disable();let J=!0;z instanceof ys&&(z.off("move:end"),z.off("vertex:moved"),z.off("latlngs:updated"),z.off("properties:updated")),p.forEach((pe,we)=>{we!==ye+1&&(pe.setStyle({opacity:0,fillOpacity:0}),pe.measureDiv&&(pe.measureDiv.style.display="none"))});const ie=Sd(pe=>{if(!J)return;const we=z.getLatLngs();we[ye]=pe.latlng,pn.Polyline.prototype.setLatLngs.call(z,we),Te.setLatLng(pe.latlng)},16),se=()=>{if(J=!1,!!t.value){if(t.value.off("mousemove",ie),document.removeEventListener("mouseup",se),t.value.dragging.enable(),z instanceof ys){const pe=()=>{y(),V(z)};z.on("move:end",pe),z.on("vertex:moved",pe),z.on("latlngs:updated",pe),z.on("properties:updated",pe),z.updateProperties(),ee(z,"Line")}y(),V(z)}};t.value.on("mousemove",ie),document.addEventListener("mouseup",se)})}),B.length>=2)for(let K=0;K<B.length-1;K++){const ye=B[K],Te=B[K+1],Ue=pn.latLng((ye.lat+Te.lat)/2,(ye.lng+Te.lng)/2),J=m(Ue,"#2b6451");p.push(J),f(J,z,()=>{if(z instanceof ys){const ie=z.getSegmentLengthAt(K),se=z.getLength()||0,pe=(z.getLengthToVertex?z.getLengthToVertex(K):0)+ie/2;return[Pa(ie,"m","Longueur du segment"),Pa(ie/2,"m","Demi-segment"),Pa(pe,"m","Distance depuis le début"),Pa(se,"m","Longueur totale")].join("<br>")}return""})}if(z instanceof ys){const K=()=>{y(),V(z)},ye=()=>{p.forEach((Te,Ue)=>{Ue>0&&(Te.setStyle({opacity:0,fillOpacity:0}),Te.measureDiv&&(Te.measureDiv.style.display="none"))})};z.on("move:start",ye),z.on("move:end",K),z.on("vertex:moved",K),z.on("latlngs:updated",K),z.on("properties:updated",K),p.cleanup=()=>{z.off("move:start",ye),z.off("move:end",K),z.off("vertex:moved",K),z.off("latlngs:updated",K),z.off("properties:updated",K)}}},Y=z=>{if(!t.value||!e.value)return;y();const B=z.getLatLngs()[0],X=B.map(se=>[se.lng,se.lat]);X.push(X[0]);const K=Hh([X]),ye=Tp(K),Te=B.reduce((se,pe,we)=>{const be=B[(we+1)%B.length];return se+pe.distanceTo(be)},0);let Ue;if(typeof z.getCenter=="function")try{Ue=z.getCenter()}catch(se){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",se);const pe=mg(K);Ue=pn.latLng(pe.geometry.coordinates[1],pe.geometry.coordinates[0])}else{const se=mg(K);Ue=pn.latLng(se.geometry.coordinates[1],se.geometry.coordinates[0])}const J=m(Ue,"#059669");p.push(J),f(J,z,()=>[Pa(Te,"m","Périmètre"),Pa(ye,"m²","Surface")].join("<br>")),J.on("mousedown",se=>{if(!t.value)return;pn.DomEvent.stopPropagation(se),t.value.dragging.disable();let pe=!0;const we=se.latlng,be=[...B];p.forEach((gt,_t)=>{_t>0&&gt.setStyle({opacity:0,fillOpacity:0})});const Ae=Sd(gt=>{if(!pe)return;const _t=gt.latlng.lng-we.lng,ue=gt.latlng.lat-we.lat,oe=be.map(ce=>pn.latLng(ce.lat+ue,ce.lng+_t));pn.Polygon.prototype.setLatLngs.call(z,[oe]),J.setLatLng(gt.latlng)},16),Ee=gt=>{pe&&Ae(gt)},Je=()=>{if(pe=!1,!!t.value){if(t.value.off("mousemove",Ee),document.removeEventListener("mouseup",Je),t.value.dragging.enable(),z.properties){const gt=z.getLatLngs()[0],_t=gt.map(oe=>[oe.lng,oe.lat]);_t.push(_t[0]);const ue=Hh([_t]);z.properties.area=Tp(ue),z.properties.perimeter=gt.reduce((oe,ce,Q)=>{const Pe=gt[(Q+1)%gt.length];return oe+ce.distanceTo(Pe)},0),z.properties.surface=z.properties.area}y(),Y(z),s.value=null,ll(()=>{s.value=z})}};t.value.on("mousemove",Ee),document.addEventListener("mouseup",Je)}),B.forEach((se,pe)=>{const we=m(se,"#DC2626");p.push(we),f(we,z,()=>{const be=B[(pe-1+B.length)%B.length],Ae=B[(pe+1)%B.length],Ee=se.distanceTo(be),Je=se.distanceTo(Ae);return[Pa(Ee,"m","Distance au point précédent"),Pa(Je,"m","Distance au point suivant"),Pa(Te,"m","Périmètre total"),Pa(ye,"m²","Surface")].join("<br>")}),we.on("mousedown",be=>{if(pn.DomEvent.stopPropagation(be),!t.value)return;t.value.dragging.disable();let Ae=!0;J&&(J.setStyle({opacity:0,fillOpacity:0}),J.measureDiv&&(J.measureDiv.style.display="none"));const Ee=Sd(_t=>{if(!Ae)return;B[pe]=_t.latlng,pn.Polygon.prototype.setLatLngs.call(z,[B]),we.setLatLng(_t.latlng);const ue=p.slice(B.length+1),oe=(pe-1+B.length)%B.length,ce=ue[oe];if(ce){const Pe=B[oe],Ve=B[pe],Qe=pn.latLng((Pe.lat+Ve.lat)/2,(Pe.lng+Ve.lng)/2);ce.setLatLng(Qe)}const Q=ue[pe];if(Q){const Pe=B[pe],Ve=B[(pe+1)%B.length],Qe=pn.latLng((Pe.lat+Ve.lat)/2,(Pe.lng+Ve.lng)/2);Q.setLatLng(Qe)}},16),Je=_t=>{Ae&&Ee(_t)},gt=()=>{if(Ae=!1,!!t.value){if(t.value.off("mousemove",Je),document.removeEventListener("mouseup",gt),t.value.dragging.enable(),z.properties){const _t=z.getLatLngs()[0].map(oe=>[oe.lng,oe.lat]);_t.push(_t[0]);const ue=Hh([_t]);z.properties.area=Tp(ue),z.properties.perimeter=B.reduce((oe,ce,Q)=>{const Pe=B[(Q+1)%B.length];return oe+ce.distanceTo(Pe)},0),z.properties.surface=z.properties.area}y(),Y(z),s.value=null,ll(()=>{s.value=z})}};t.value.on("mousemove",Je),document.addEventListener("mouseup",gt)})}),(()=>{const se=z.getLatLngs()[0];p.slice(se.length+1).forEach(we=>{n.value&&n.value.removeLayer(we)}),p=p.slice(0,se.length+1);const pe=new Array(se.length);for(let we=0;we<se.length;we++){const be=se[we],Ae=se[(we+1)%se.length];pe[we]=te(be,Ae)}pe.forEach((we,be)=>{const Ae=m(we,"#2b6451");p.push(Ae),f(Ae,z,()=>{const Ee=se[be],Je=se[(be+1)%se.length],gt=Ee.distanceTo(Je);return[Pa(gt,"m","Longueur du segment"),Pa(Te,"m","Périmètre total"),Pa(ye,"m²","Surface")].join("<br>")}),Ae.on("mousedown",Ee=>{if(!t.value)return;pn.DomEvent.stopPropagation(Ee),t.value.dragging.disable();let Je=!0;const gt=be;J&&(J.setStyle({opacity:0,fillOpacity:0}),J.measureDiv&&(J.measureDiv.style.display="none"));const _t=[...z.getLatLngs()[0]];_t.splice((gt+1)%_t.length,0,we),z.setLatLngs([_t]),y(),Y(z);const ue=gt+1,oe=1+ue,ce=ue<p.length-1?p[oe]:null;if(ce){const Q=Ve=>{if(!Je)return;const Qe=z.getLatLngs()[0];Qe[ue]=Ve.latlng,z.setLatLngs([Qe]),ce.setLatLng(Ve.latlng);const ot=p.slice(1+Qe.length),at=(ue-1+Qe.length)%Qe.length,pt=ue;if(ot[at]){const Ft=Qe[at],Bt=Qe[ue],Zt=pn.latLng((Ft.lat+Bt.lat)/2,(Ft.lng+Bt.lng)/2);ot[at].setLatLng(Zt)}if(ot[pt]){const Ft=Qe[ue],Bt=Qe[(ue+1)%Qe.length],Zt=pn.latLng((Ft.lat+Bt.lat)/2,(Ft.lng+Bt.lng)/2);ot[pt].setLatLng(Zt)}},Pe=()=>{if(Je=!1,!!t.value){if(t.value.off("mousemove",Q),document.removeEventListener("mouseup",Pe),t.value.dragging.enable(),z.properties){const Ve=z.getLatLngs()[0].map(ot=>[ot.lng,ot.lat]);Ve.push(Ve[0]);const Qe=Hh([Ve]);z.properties.area=Tp(Qe),z.properties.perimeter=z.getLatLngs()[0].reduce((ot,at,pt,Ft)=>{const Bt=Ft[(pt+1)%Ft.length];return ot+at.distanceTo(Bt)},0)}y(),Y(z),s.value=null,ll(()=>{s.value=z})}};t.value.on("mousemove",Q),document.addEventListener("mouseup",Pe)}else t.value.dragging.enable(),y(),Y(z)})})})()},de=z=>{if(!t.value||!e.value)return;y();const B=z.getLatLng(),X=m(B,"#059669");p.push(X),f(X,z,()=>`Position: ${B.lat.toFixed(6)}, ${B.lng.toFixed(6)}`),X.on("mousedown",K=>{if(!t.value)return;pn.DomEvent.stopPropagation(K),t.value.dragging.disable(),z.startMoving();let ye=!0;const Ue=Sd(ie=>{ye&&(X.setLatLng(ie.latlng),z.setLatLng(ie.latlng))},16),J=()=>{t.value&&(t.value.off("mousemove",Ue),document.removeEventListener("mouseup",J),t.value.dragging.enable(),ye=!1,z.finishMoving(),z.updateProperties(),s.value=null,ll(()=>{s.value=z,y(),de(z)}))};t.value.on("mousemove",Ue),document.addEventListener("mouseup",J)}),s.value=z},$=z=>{if(!(!t.value||!r.value)){r.value.clearLayers();try{if(z instanceof il){const B=z.getLatLng();if(B){const X=pn.circleMarker(B,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(X)}}else if(z instanceof Ol||z instanceof pn.Polygon){let B=[];if("getLatLngs"in z){const K=z.getLatLngs();if(Array.isArray(K)&&K.length>0){const ye=K[0];Array.isArray(ye)?B=ye:ye instanceof pn.LatLng&&(B=K)}}let X=null;if(z instanceof Ol&&typeof z.getCenter=="function")X=z.getCenter();else if(B.length>0){const K=B.map(Ue=>[Ue.lng,Ue.lat]);K.push(K[0]);const ye=Hh([K]),Te=mg(ye);X=pn.latLng(Te.geometry.coordinates[1],Te.geometry.coordinates[0])}if(X){const K=pn.circleMarker(X,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value&&r.value.addLayer(K)}B.forEach(K=>{if(K){const ye=pn.circleMarker(K,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value&&r.value.addLayer(ye)}});for(let K=0;K<B.length;K++){const ye=B[K],Te=B[(K+1)%B.length];if(ye&&Te){const Ue=pn.latLng((ye.lat+Te.lat)/2,(ye.lng+Te.lng)/2),J=pn.circleMarker(Ue,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(J)}}}}catch(B){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",B)}}},H=z=>{var K,ye,Te,Ue,J;const B=z.layer;(K=e.value)==null||K.addLayer(B);let X="unknown";if(B instanceof pn.Polygon?X="Polygon":B instanceof pn.Polyline&&!(B instanceof pn.Polygon)&&(X="Line"),B.properties=C(B,X),B.properties||(B.properties={}),B.properties.category||(B.properties.category="forages"),B.properties.accessLevel||(B.properties.accessLevel="visitor"),B._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=B,window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:B,type:X,properties:B.properties}})),B.on("mouseover",()=>{(!s.value||s.value!==B)&&$(B)}),B.on("mouseout",()=>{var ie;(!s.value||s.value!==B)&&((ie=r.value)==null||ie.clearLayers())}),B instanceof pn.Polygon){const ie=B.getLatLngs()[0],se=new Ol([ie],{...B.options});se.updateProperties(),(ye=e.value)==null||ye.removeLayer(B),(Te=e.value)==null||Te.addLayer(se),s.value=se,Y(se)}else if(B instanceof ys)V(B),t.value&&t.value.almostOver&&t.value.almostOver.addLayer(B);else if(B instanceof pn.Polyline&&!(B instanceof pn.Polygon)){const ie=B.getLatLngs(),se=new ys(ie,{...B.options});se.updateProperties(),(Ue=e.value)==null||Ue.removeLayer(B),(J=e.value)==null||J.addLayer(se),s.value=se,V(se),t.value&&t.value.almostOver&&t.value.almostOver.addLayer(se)}El("Cliquez sur la forme pour afficher les points de contrôle")},le=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",H))},ae=()=>{if(t.value&&t.value.almostOver){const z=t.value.almostOver.options.tolerance;return t.value.almostOver.options.tolerance=0,()=>{t.value&&t.value.almostOver&&(t.value.almostOver.options.tolerance=z)}}return()=>{}};return window.addEventListener("edit:start",()=>{const z=ae(),B=()=>{z(),window.removeEventListener("edit:end",B)};window.addEventListener("edit:end",B)}),{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:T,setDrawingTool:D,updateShapeStyle:N,updateShapeProperties:U,adjustView:O,clearActiveControlPoints:y,addLinesToAlmostOver:S}}const Hi=Symbol("newer"),Go=Symbol("older");class eU{constructor(e,n){typeof e!="number"&&(n=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,n&&(this.assign(n),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[Hi]&&(e===this.oldest&&(this.oldest=e[Hi]),e[Hi][Go]=e[Go]),e[Go]&&(e[Go][Hi]=e[Hi]),e[Hi]=void 0,e[Go]=this.newest,this.newest&&(this.newest[Hi]=e),this.newest=e)}assign(e){let n,r=this.limit||Number.MAX_VALUE;this._keymap.clear();let i=e[Symbol.iterator]();for(let s=i.next();!s.done;s=i.next()){let o=new x4(s.value[0],s.value[1]);if(this._keymap.set(o.key,o),n?(n[Hi]=o,o[Go]=n):this.oldest=o,n=o,r--==0)throw new Error("overflow")}this.newest=n,this.size=this._keymap.size}get(e){var n=this._keymap.get(e);if(n)return this._markEntryAsUsed(n),n.value}set(e,n){var r=this._keymap.get(e);return r?(r.value=n,this._markEntryAsUsed(r),this):(this._keymap.set(e,r=new x4(e,n)),this.newest?(this.newest[Hi]=r,r[Go]=this.newest):this.oldest=r,this.newest=r,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[Hi]?(this.oldest=this.oldest[Hi],this.oldest[Go]=void 0):(this.oldest=void 0,this.newest=void 0),e[Hi]=e[Go]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let n=this._keymap.get(e);return n?n.value:void 0}has(e){return this._keymap.has(e)}delete(e){var n=this._keymap.get(e);if(n)return this._keymap.delete(n.key),n[Hi]&&n[Go]?(n[Go][Hi]=n[Hi],n[Hi][Go]=n[Go]):n[Hi]?(n[Hi][Go]=void 0,this.oldest=n[Hi]):n[Go]?(n[Go][Hi]=void 0,this.newest=n[Go]):this.oldest=this.newest=void 0,this.size--,n.value}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new Kb(this.oldest)}values(){return new Xb(this.oldest)}entries(){return this}[Symbol.iterator](){return new Zb(this.oldest)}forEach(e,n){typeof n!="object"&&(n=this);let r=this.oldest;for(;r;)e.call(n,r.value,r.key,this),r=r[Hi]}toJSON(){for(var e=new Array(this.size),n=0,r=this.oldest;r;)e[n++]={key:r.key,value:r.value},r=r[Hi];return e}toString(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,n=n[Hi],n&&(e+=" < ");return e}}function x4(t,e){this.key=t,this.value=e,this[Hi]=void 0,this[Go]=void 0}function Zb(t){this.entry=t}Zb.prototype[Symbol.iterator]=function(){return this};Zb.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Hi],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}};function Kb(t){this.entry=t}Kb.prototype[Symbol.iterator]=function(){return this};Kb.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Hi],{done:!1,value:t.key}):{done:!0,value:void 0}};function Xb(t){this.entry=t}Xb.prototype[Symbol.iterator]=function(){return this};Xb.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Hi],{done:!1,value:t.value}):{done:!0,value:void 0}};function tU(t,e){let n=0,r=null;r=setInterval(function(){if(n>=20)throw clearInterval(r),new Error("window.google not found after 10 seconds");window.google&&window.google.maps&&window.google.maps.Map&&(clearInterval(r),t.call(e)),++n},500)}L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{maxZoom:21,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._tileCallbacks={},this._lru=new eU(100),this._imagesPerTile=1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(t){L.GridLayer.prototype.onAdd.call(this,t),this._initMutantContainer(),this._logoContainer&&t._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&t._controlCorners.bottomright.appendChild(this._attributionContainer),tU(()=>{this._map&&(this._initMutant(),google.maps.event.addListenerOnce(this._mutant,"idle",()=>{this._map&&(this._checkZoomLevels(),this._mutantIsReady=!0)}))})},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle")},addGoogleLayer:function(t,e){return this._subLayers||(this._subLayers={}),this.whenReady(()=>{var n=google.maps[t],r=new n(e);r.setMap(this._mutant),this._subLayers[t]=r}),this},removeGoogleLayer:function(t){return this.whenReady(()=>{var e=this._subLayers&&this._subLayers[t];e&&(e.setMap(null),delete this._subLayers[t])}),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.pointerEvents="none",this._mutantContainer.style.visibility="hidden",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);const t=this._mutantContainer.style;this._map.options.zoomSnap<1?(t.width="180%",t.height="180%"):(t.width="100%",t.height="100%"),t.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){if(!this._mutant){var t={center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,styles:this.options.styles||[],backgroundColor:"transparent"};this.options.mapId!=null&&(t.mapId=this.options.mapId);var e=new google.maps.Map(this._mutantContainer,t);this._mutant=e,this._update(),this.fire("spawned",{mapObject:e}),this._waitControls(),this.once("controls_ready",this._setupAttribution)}},_attachObserver:function(e){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(e,{childList:!0,subtree:!0}),Array.prototype.forEach.call(e.querySelectorAll("img"),this._boundOnMutatedImage)},_waitControls:function(){const t=setInterval(()=>{const e=this._mutant.__gm.layoutManager;if(!e)return;clearInterval(t);let n;Object.keys(e).forEach(function(r){const i=e[r];i.get&&i.get(1)instanceof Node&&(n=i)}),this.fire("controls_ready",{positions:n})},50)},_setupAttribution:function(t){if(!this._map)return;const e=google.maps.ControlPosition,n=this._attributionContainer=t.positions.get(e.BOTTOM_RIGHT);L.DomUtil.addClass(n,"leaflet-control leaflet-control-attribution"),L.DomEvent.disableClickPropagation(n),n.style.height="14px",this._map._controlCorners.bottomright.appendChild(n),this._logoContainer=t.positions.get(e.BOTTOM_LEFT),this._logoContainer.style.pointerEvents="auto",this._map._controlCorners.bottomleft.appendChild(this._logoContainer)},_onMutations:function(e){for(var n=0;n<e.length;++n)for(var r=e[n],i=0;i<r.addedNodes.length;++i){var s=r.addedNodes[i];s instanceof HTMLImageElement?this._onMutatedImage(s):s instanceof HTMLElement&&Array.prototype.forEach.call(s.querySelectorAll("img"),this._boundOnMutatedImage)}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+|VinaFnapurmBegrtn)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+|VinaFnapurmBegrtn)/,_onMutatedImage:function(e){let n,r=e.src.match(this._roadRegexp),i=0;if(r?(n={z:r[1],x:r[2],y:r[3]},this._imagesPerTile>1&&(e.style.zIndex=1,i=1)):(r=e.src.match(this._satRegexp),r&&(n={x:r[1],y:r[2],z:r[3]}),i=0),n){var s=this._tileCoordsToKey(n);e.style.position="absolute";var o=s+"/"+i;this._lru.set(o,e),o in this._tileCallbacks&&this._tileCallbacks[o]&&(this._tileCallbacks[o].forEach(a=>a(e)),delete this._tileCallbacks[o])}},createTile:function(t,e){const n=this._tileCoordsToKey(t),r=L.DomUtil.create("div");r.style.textAlign="left",r.dataset.pending=this._imagesPerTile,e=e.bind(this,null,r);for(var i=0;i<this._imagesPerTile;++i){const s=n+"/"+i,o=this._lru.get(s);o?(r.appendChild(this._clone(o)),--r.dataset.pending):(this._tileCallbacks[s]=this._tileCallbacks[s]||[],this._tileCallbacks[s].push((function(a){return(function(l){a.appendChild(this._clone(l)),--a.dataset.pending,parseInt(a.dataset.pending)||e()}).bind(this)}).bind(this)(r)))}return parseInt(r.dataset.pending)||L.Util.requestAnimFrame(e),r},_clone:function(t){const e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){const t=this._map.getZoom(),e=this._mutant.getZoom();!t||!e||(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_update:function(t){if(this._mutant){t=t||this._map.getCenter();const e=new google.maps.LatLng(t.lat,t.lng),n=Math.round(this._map.getZoom()),r=this._mutant.getZoom();this._mutant.setCenter(e),n!==r&&(this._mutant.setZoom(n),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this,t)},whenReady:function(t,e){return this._mutant?t.call(e||this,{target:this}):this.on("spawned",t,e),this}});L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)};let p1=!1,Ef=null;function nU(){return p1?Promise.resolve():Ef||(Ef=new Promise(async(t,e)=>{var n;try{if(window.google&&window.google.maps){p1=!0,t();return}try{const r=await L2.getGoogleMapsApiKey(),i=((n=r==null?void 0:r.data)==null?void 0:n.url)||"https://maps.googleapis.com/maps/api/js?libraries=places",s=document.createElement("script");s.type="text/javascript";const o=new URL(i);o.searchParams.has("loading")||o.searchParams.append("loading","async"),s.src=o.toString(),s.async=!0,s.defer=!0,s.onload=()=>{p1=!0,t()},s.onerror=()=>{Ef=null,e(new Error("Failed to load Google Maps API"))},document.head.appendChild(s)}catch(r){console.warn("Error loading Google Maps API:",r),Ef=null,e(r)}}catch(r){Ef=null,e(r)}}),Ef)}function rU(){const t=kt(null),e=kt("Hybride"),n=kt(null),r=kt(!1),i={maxZoom:19,updateWhenZooming:!0,updateWhenIdle:!0,noWrap:!0,keepBuffer:2,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:pn.latLngBounds(pn.latLng(41.333,-5.566),pn.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,useCache:!0,priorityLevels:3},s={Hybride:pn.layerGroup([pn.gridLayer.googleMutant({type:"hybrid",maxZoom:i.maxZoom})]),Cadastre:pn.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...i,attribution:"Cadastre - Carte © IGN/Geoportail",maxNativeZoom:18}),IGN:pn.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...i,attribution:"Carte IGN © IGN/Geoportail",maxNativeZoom:18})},o=async()=>{try{await nU(),r.value=!0}catch(f){console.error("Failed to load Google Maps API:",f),r.value=!1,e.value==="Hybride"&&(e.value="IGN")}};return{map:t,currentBaseMap:e,baseMaps:s,initMap:async f=>{r.value||await o(),t.value=f,f.options.zoomSnap=.5,f.options.zoomDelta=.5,f.options.wheelPxPerZoomLevel=120,f.options.zoomAnimation=!0,f.options.fadeAnimation=!0,f.options.markerZoomAnimation=!0,f.options.preferCanvas=!0,f.options.renderer=pn.canvas(),f.options.minZoom=2,f.options.maxZoom=19,f.options.scrollWheelZoom=!0,f.options.doubleClickZoom=!0;const p=pn.latLngBounds(pn.latLng(-90,-180),pn.latLng(90,180));f.setMaxBounds(p),f.options.maxBoundsViscosity=1,f.options.trackResize=!0;let y=null;f.getZoom(),f.on("zoomstart",()=>{f.getZoom(),f.options.zoomAnimation=!1,f.options.markerZoomAnimation=!1}),f.on("zoomend",()=>{y&&clearTimeout(y),y=setTimeout(()=>{setTimeout(()=>{f.options.zoomAnimation=!0,f.options.markerZoomAnimation=!0,f.invalidateSize({animate:!1,pan:!1});const C=f.getBounds(),S=f.options.maxBounds;S&&!C.intersects(S)&&f.panInsideBounds(S,{animate:!1}),f.eachLayer(T=>{T.properties&&T.properties.type==="Note"&&typeof T.updatePosition=="function"&&T.updatePosition()})},250)},250)});const m=f._zoomAnimation;m&&(f._zoomAnimation=function(C){try{this._animatingZoom||m.call(this,C)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),f.on("zoomanim",C=>{f.eachLayer(S=>{S.properties&&S.properties.type==="Note"&&typeof S.updatePositionDuringZoom=="function"&&S.updatePositionDuringZoom(C)})}),f&&(f.whenReady(()=>{const C=e.value;if(s[C]){if(n.value&&f.hasLayer(n.value))try{f.removeLayer(n.value)}catch(S){console.warn("Erreur lors de la suppression de la couche active précédente:",S)}n.value=s[C];try{n.value.addTo(f)}catch(S){console.error(`Erreur lors de l'ajout de la couche ${C}:`,S)}}else console.warn(`Couche de base non disponible: ${C}`)}),f.on("baselayerchange",C=>{e.value=C.name,n.value=C.layer}))},changeBaseMap:async f=>{if(f==="Hybride"&&!r.value&&(await o(),!r.value)){console.warn("Cannot switch to Hybride: Google Maps API not loaded");return}if(!t.value||!s[f]){console.warn(`Impossible de changer la carte de base: ${t.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(e.value===f)return;const p=t.value,y=p.getCenter(),m=p.getZoom();p.options.zoomAnimation=!1,p.options.fadeAnimation=!1,p.options.markerZoomAnimation=!1;const C=s[f];if(n.value&&p.hasLayer(n.value))try{p.removeLayer(n.value)}catch(S){console.warn("Erreur lors de la suppression de la couche active:",S)}try{C instanceof pn.LayerGroup,C.addTo(p)}catch(S){console.error("Erreur lors de l'ajout de la nouvelle couche:",S);try{p.hasLayer(C)&&p.removeLayer(C),C.addTo(p)}catch(T){throw console.error("Échec de la récupération:",T),new Error("Impossible d'ajouter la nouvelle couche")}}n.value=C,e.value=f;try{p.setView(y,m,{animate:!1,duration:0,noMoveStart:!0})}catch(S){console.warn("Erreur lors de la réinitialisation de la vue:",S)}try{p.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{p.eachLayer(S=>{S.properties&&S.properties.type==="Note"&&typeof S.updatePosition=="function"&&S.updatePosition()})},100)}catch(S){console.warn("Erreur lors du rafraîchissement de la carte:",S)}setTimeout(()=>{p.options.zoomAnimation=!0,p.options.fadeAnimation=!0,p.options.markerZoomAnimation=!0},500)}catch(p){if(console.error("Erreur lors du changement de carte de base:",p),t.value)try{const y=t.value;y.eachLayer(C=>{(C instanceof pn.TileLayer||C instanceof pn.LayerGroup)&&y.removeLayer(C)});const m=s[f];m.addTo(y),n.value=m,e.value=f,y.options.zoomAnimation=!0,y.options.fadeAnimation=!0,y.options.markerZoomAnimation=!0,y.invalidateSize({animate:!1,pan:!1})}catch(y){console.error("Erreur lors de la récupération après échec:",y)}}},cleanup:()=>{t.value&&(t.value.remove(),t.value=null),n.value&&(n.value=null)},isGoogleMapsLoaded:r}}const iU={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},sU={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},oU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},aU={key:0,class:"mb-4"},lU={key:0,class:"animate-pulse"},uU=["value"],cU={key:1,class:"mb-4"},hU={key:0,class:"animate-pulse"},fU=["disabled"],dU={value:null},pU=["value"],gU={key:2,class:"mb-4"},mU={key:0,class:"animate-pulse"},vU=["disabled"],yU={value:null},bU=["value"],_U={class:"mb-4"},wU={class:"mb-6"},xU={class:"flex justify-end space-x-3"},LU=["disabled"],CU={key:0},SU={key:1},EU=ws({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(le){return le?typeof le=="object"?le.id:le:null}function i(le){if(le===null)throw new Error("Invalid ID");return le}const s=t,o=n,a=po(),l=Yb(),c=Wg(),f=kt(!1),p=kt(null),y=kt([]),m=kt([]),C=kt([]),S=kt(null),T=kt(null),O=kt(!1),D=kt(!1),N=kt(!1),U=kt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),W=ir(()=>{var le,ae,z;return((le=a.user)==null?void 0:le.user_type)==="admin"?U.value.nom.trim()&&U.value.entreprise&&U.value.salarie:((ae=a.user)==null?void 0:ae.user_type)==="entreprise"?U.value.nom.trim()&&U.value.salarie:(((z=a.user)==null?void 0:z.user_type)==="salarie",U.value.nom.trim())});vi(()=>U.value.entreprise,async le=>{if(!s.modelValue)return;U.value.salarie=null,U.value.visiteur=null,m.value=[];const ae=r(le);ae?await ee(ae):y.value=[]}),vi(()=>U.value.salarie,async le=>{if(!s.modelValue)return;U.value.visiteur=null;const ae=r(le);ae?await te(ae):m.value=[]}),vi(()=>s.modelValue,le=>{var ae,z,B;le?((ae=a.user)==null?void 0:ae.user_type)==="admin"?$():((z=a.user)==null?void 0:z.user_type)==="entreprise"?ee(a.user.id):((B=a.user)==null?void 0:B.user_type)==="salarie"&&te(a.user.id):(U.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},S.value=null,T.value=null,m.value=[],y.value=[],C.value=[],p.value=null)});async function ee(le){O.value=!0;try{const ae=await ha.getUsers({role:"SALARIE",entreprise:le});y.value=ae.data}catch(ae){console.error("[NewPlanModal] Error loading salaries:",ae),y.value=[]}finally{O.value=!1}}async function te(le){D.value=!0;try{const ae=await ha.getUsers({role:"VISITEUR",salarie:le});m.value=ae.data}catch(ae){console.error("[NewPlanModal] Error loading visiteurs:",ae),m.value=[]}finally{D.value=!1}}async function V(le){s.modelValue&&(S.value=le,U.value.salarie=le.id,await te(le.id),o("salarieSelected",le))}function Y(le){s.modelValue&&(T.value=le,U.value.visiteur=le.id,o("visiteurSelected",le))}function de(){o("update:modelValue",!1),U.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},S.value=null,T.value=null,m.value=[],p.value=null}async function $(){N.value=!0;try{const le=await a.fetchEnterprises();C.value=le}catch(le){console.error("[NewPlanModal] Error loading entreprises:",le),C.value=[]}finally{N.value=!1}}async function H(){var le,ae;p.value=null,f.value=!0;try{const z={nom:U.value.nom.trim(),description:U.value.description.trim()},B=a.user;if(!B)throw new Error("User not found");if(B.user_type==="admin"){if(!U.value.entreprise||!U.value.salarie)throw new Error("Missing required fields");z.entreprise=i(r(U.value.entreprise)),z.salarie=i(r(U.value.salarie)),U.value.visiteur&&(z.visiteur=U.value.visiteur)}else if(B.user_type==="entreprise"){if(!U.value.salarie)throw new Error("Missing required fields");z.entreprise=B.id,z.salarie=i(r(U.value.salarie)),U.value.visiteur&&(z.visiteur=U.value.visiteur)}else if(B.user_type==="salarie"){if(!B.entreprise)throw new Error("Missing required fields");z.entreprise=B.entreprise.id,z.salarie=B.id,U.value.visiteur&&(z.visiteur=U.value.visiteur)}else if(B.user_type==="visiteur"){if(!B.entreprise||!B.salarie)throw new Error("Missing required fields");z.entreprise=B.entreprise.id,z.salarie=B.salarie.id,z.visiteur=B.id}l.clearCurrentPlan(),c.setCurrentPlan(null);const X=await l.createPlan(z);o("created",X.id),de()}catch(z){console.error("[NewPlanModal] Error creating plan:",z),console.error("Response data:",(le=z.response)==null?void 0:le.data);let B="Une erreur est survenue lors de la création du plan";(ae=z.response)!=null&&ae.data&&(typeof z.response.data=="object"?B=Object.entries(z.response.data).map(([X,K])=>Array.isArray(K)?`${X}: ${K.join(", ")}`:`${X}: ${K}`).join(`
`):typeof z.response.data=="string"&&(B=z.response.data)),p.value=B}finally{f.value=!1}}return e({salaries:y,visiteurs:m,selectedSalarie:S,selectedVisiteur:T,loadSalaries:ee,loadVisiteurs:te,selectSalarie:V,selectVisiteur:Y}),(le,ae)=>{var z,B,X,K;return le.modelValue?(Ne(),je("div",iU,[P("div",sU,[P("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[ae[6]||(ae[6]=P("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),P("button",{onClick:de,class:"text-gray-400 hover:text-gray-500"},ae[5]||(ae[5]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",oU,[_n(a).isAdmin?(Ne(),je("div",aU,[ae[9]||(ae[9]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),N.value?(Ne(),je("div",lU,ae[7]||(ae[7]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Fn((Ne(),je("select",{key:1,"onUpdate:modelValue":ae[0]||(ae[0]=ye=>U.value.entreprise=ye),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[ae[8]||(ae[8]=P("option",{value:null},"Sélectionnez une entreprise",-1)),(Ne(!0),je(bn,null,ar(C.value,ye=>(Ne(),je("option",{key:ye.id,value:ye.id},zt(_n(ec)(ye)),9,uU))),128))],512)),[[ss,U.value.entreprise]])])):Kt("",!0),((z=_n(a).user)==null?void 0:z.user_type)==="admin"||((B=_n(a).user)==null?void 0:B.user_type)==="entreprise"?(Ne(),je("div",cU,[ae[11]||(ae[11]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),O.value?(Ne(),je("div",hU,ae[10]||(ae[10]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Fn((Ne(),je("select",{key:1,id:"edit-salarie","onUpdate:modelValue":ae[1]||(ae[1]=ye=>U.value.salarie=ye),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:_n(a).isAdmin&&!U.value.entreprise},[P("option",dU,zt(y.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),(Ne(!0),je(bn,null,ar(y.value,ye=>(Ne(),je("option",{key:ye.id,value:ye.id},zt(_n(ec)(ye)),9,pU))),128))],8,fU)),[[ss,U.value.salarie]])])):Kt("",!0),((X=_n(a).user)==null?void 0:X.user_type)!=="visiteur"?(Ne(),je("div",gU,[ae[13]||(ae[13]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),D.value?(Ne(),je("div",mU,ae[12]||(ae[12]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Fn((Ne(),je("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":ae[2]||(ae[2]=ye=>U.value.visiteur=ye),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!m.value.length||((K=_n(a).user)==null?void 0:K.user_type)!=="salarie"&&!U.value.salarie},[P("option",yU,zt(m.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),(Ne(!0),je(bn,null,ar(m.value,ye=>(Ne(),je("option",{key:ye.id,value:ye.id},zt(_n(ec)(ye)),9,bU))),128))],8,vU)),[[ss,U.value.visiteur]])])):Kt("",!0),P("div",_U,[ae[14]||(ae[14]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Fn(P("input",{id:"edit-nom","onUpdate:modelValue":ae[3]||(ae[3]=ye=>U.value.nom=ye),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[fi,U.value.nom]])]),P("div",wU,[ae[15]||(ae[15]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Fn(P("textarea",{id:"edit-description","onUpdate:modelValue":ae[4]||(ae[4]=ye=>U.value.description=ye),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[fi,U.value.description]])]),P("div",xU,[P("button",{onClick:de,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),P("button",{onClick:H,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!W.value||f.value},[f.value?(Ne(),je("span",CU,"Création en cours...")):(Ne(),je("span",SU,"Créer"))],8,LU)])])])])):Kt("",!0)}}});function Ni(t){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(t)}var Ra=Uint8Array,su=Uint16Array,Jb=Int32Array,iy=new Ra([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sy=new Ra([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),A2=new Ra([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),AS=function(t,e){for(var n=new su(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new Jb(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},TS=AS(iy,2),OS=TS.b,T2=TS.r;OS[28]=258,T2[258]=28;var DS=AS(sy,0),PU=DS.b,L4=DS.r,O2=new su(32768);for(var is=0;is<32768;++is){var Ih=(is&43690)>>1|(is&21845)<<1;Ih=(Ih&52428)>>2|(Ih&13107)<<2,Ih=(Ih&61680)>>4|(Ih&3855)<<4,O2[is]=((Ih&65280)>>8|(Ih&255)<<8)>>1}var Bc=function(t,e,n){for(var r=t.length,i=0,s=new su(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new su(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new su(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],f=e-t[i],p=o[t[i]-1]++<<f,y=p|(1<<f)-1;p<=y;++p)a[O2[p]>>l]=c}else for(a=new su(r),i=0;i<r;++i)t[i]&&(a[i]=O2[o[t[i]-1]++]>>15-t[i]);return a},of=new Ra(288);for(var is=0;is<144;++is)of[is]=8;for(var is=144;is<256;++is)of[is]=9;for(var is=256;is<280;++is)of[is]=7;for(var is=280;is<288;++is)of[is]=8;var Gg=new Ra(32);for(var is=0;is<32;++is)Gg[is]=5;var kU=Bc(of,9,0),MU=Bc(of,9,1),AU=Bc(Gg,5,0),TU=Bc(Gg,5,1),g1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Yu=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},m1=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Qb=function(t){return(t+7)/8|0},IS=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Ra(t.subarray(e,n))},OU=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ju=function(t,e,n){var r=new Error(e||OU[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Ju),!n)throw r;return r},DU=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Ra(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Ra(i*3));var c=function(gt){var _t=n.length;if(gt>_t){var ue=new Ra(Math.max(_t*2,gt));ue.set(n),n=ue}},f=e.f||0,p=e.p||0,y=e.b||0,m=e.l,C=e.d,S=e.m,T=e.n,O=i*8;do{if(!m){f=Yu(t,p,1);var D=Yu(t,p+1,3);if(p+=3,D)if(D==1)m=MU,C=TU,S=9,T=5;else if(D==2){var ee=Yu(t,p,31)+257,te=Yu(t,p+10,15)+4,V=ee+Yu(t,p+5,31)+1;p+=14;for(var Y=new Ra(V),de=new Ra(19),$=0;$<te;++$)de[A2[$]]=Yu(t,p+$*3,7);p+=te*3;for(var H=g1(de),le=(1<<H)-1,ae=Bc(de,H,1),$=0;$<V;){var z=ae[Yu(t,p,le)];p+=z&15;var N=z>>4;if(N<16)Y[$++]=N;else{var B=0,X=0;for(N==16?(X=3+Yu(t,p,3),p+=2,B=Y[$-1]):N==17?(X=3+Yu(t,p,7),p+=3):N==18&&(X=11+Yu(t,p,127),p+=7);X--;)Y[$++]=B}}var K=Y.subarray(0,ee),ye=Y.subarray(ee);S=g1(K),T=g1(ye),m=Bc(K,S,1),C=Bc(ye,T,1)}else Ju(1);else{var N=Qb(p)+4,U=t[N-4]|t[N-3]<<8,W=N+U;if(W>i){l&&Ju(0);break}a&&c(y+U),n.set(t.subarray(N,W),y),e.b=y+=U,e.p=p=W*8,e.f=f;continue}if(p>O){l&&Ju(0);break}}a&&c(y+131072);for(var Te=(1<<S)-1,Ue=(1<<T)-1,J=p;;J=p){var B=m[m1(t,p)&Te],ie=B>>4;if(p+=B&15,p>O){l&&Ju(0);break}if(B||Ju(2),ie<256)n[y++]=ie;else if(ie==256){J=p,m=null;break}else{var se=ie-254;if(ie>264){var $=ie-257,pe=iy[$];se=Yu(t,p,(1<<pe)-1)+OS[$],p+=pe}var we=C[m1(t,p)&Ue],be=we>>4;we||Ju(3),p+=we&15;var ye=PU[be];if(be>3){var pe=sy[be];ye+=m1(t,p)&(1<<pe)-1,p+=pe}if(p>O){l&&Ju(0);break}a&&c(y+131072);var Ae=y+se;if(y<ye){var Ee=s-ye,Je=Math.min(ye,Ae);for(Ee+y<0&&Ju(3);y<Je;++y)n[y]=r[Ee+y]}for(;y<Ae;++y)n[y]=n[y-ye]}}e.l=m,e.p=J,e.b=y,e.f=f,m&&(f=1,e.m=S,e.d=C,e.n=T)}while(!f);return y!=n.length&&o?IS(n,0,y):n.subarray(0,y)},sh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Op=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},v1=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:BS,l:0};if(i==1){var o=new Ra(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(W,ee){return W.f-ee.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,f=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};f!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=f&&n[c].f<n[p].f?c++:p++],n[f++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var m=new su(y+1),C=D2(n[f-1],m,0);if(C>e){var r=0,S=0,T=C-e,O=1<<T;for(s.sort(function(ee,te){return m[te.s]-m[ee.s]||ee.f-te.f});r<i;++r){var D=s[r].s;if(m[D]>e)S+=O-(1<<C-m[D]),m[D]=e;else break}for(S>>=T;S>0;){var N=s[r].s;m[N]<e?S-=1<<e-m[N]++-1:++r}for(;r>=0&&S;--r){var U=s[r].s;m[U]==e&&(--m[U],++S)}C=e}return{t:new Ra(m),l:C}},D2=function(t,e,n){return t.s==-1?Math.max(D2(t.l,e,n+1),D2(t.r,e,n+1)):e[t.s]=n},C4=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new su(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Dp=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},NS=function(t,e,n){var r=n.length,i=Qb(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},S4=function(t,e,n,r,i,s,o,a,l,c,f){sh(e,f++,n),++i[256];for(var p=v1(i,15),y=p.t,m=p.l,C=v1(s,15),S=C.t,T=C.l,O=C4(y),D=O.c,N=O.n,U=C4(S),W=U.c,ee=U.n,te=new su(19),V=0;V<D.length;++V)++te[D[V]&31];for(var V=0;V<W.length;++V)++te[W[V]&31];for(var Y=v1(te,7),de=Y.t,$=Y.l,H=19;H>4&&!de[A2[H-1]];--H);var le=c+5<<3,ae=Dp(i,of)+Dp(s,Gg)+o,z=Dp(i,y)+Dp(s,S)+o+14+3*H+Dp(te,de)+2*te[16]+3*te[17]+7*te[18];if(l>=0&&le<=ae&&le<=z)return NS(e,f,t.subarray(l,l+c));var B,X,K,ye;if(sh(e,f,1+(z<ae)),f+=2,z<ae){B=Bc(y,m,0),X=y,K=Bc(S,T,0),ye=S;var Te=Bc(de,$,0);sh(e,f,N-257),sh(e,f+5,ee-1),sh(e,f+10,H-4),f+=14;for(var V=0;V<H;++V)sh(e,f+3*V,de[A2[V]]);f+=3*H;for(var Ue=[D,W],J=0;J<2;++J)for(var ie=Ue[J],V=0;V<ie.length;++V){var se=ie[V]&31;sh(e,f,Te[se]),f+=de[se],se>15&&(sh(e,f,ie[V]>>5&127),f+=ie[V]>>12)}}else B=kU,X=of,K=AU,ye=Gg;for(var V=0;V<a;++V){var pe=r[V];if(pe>255){var se=pe>>18&31;Op(e,f,B[se+257]),f+=X[se+257],se>7&&(sh(e,f,pe>>23&31),f+=iy[se]);var we=pe&31;Op(e,f,K[we]),f+=ye[we],we>3&&(Op(e,f,pe>>5&8191),f+=sy[we])}else Op(e,f,B[pe]),f+=X[pe]}return Op(e,f,B[256]),f+X[256]},IU=new Jb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),BS=new Ra(0),NU=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Ra(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,f=(s.r||0)&7;if(e){f&&(l[0]=s.r>>3);for(var p=IU[e-1],y=p>>13,m=p&8191,C=(1<<n)-1,S=s.p||new su(32768),T=s.h||new su(C+1),O=Math.ceil(n/3),D=2*O,N=function(oe){return(t[oe]^t[oe+1]<<O^t[oe+2]<<D)&C},U=new Jb(25e3),W=new su(288),ee=new su(32),te=0,V=0,Y=s.i||0,de=0,$=s.w||0,H=0;Y+2<o;++Y){var le=N(Y),ae=Y&32767,z=T[le];if(S[ae]=z,T[le]=ae,$<=Y){var B=o-Y;if((te>7e3||de>24576)&&(B>423||!c)){f=S4(t,l,0,U,W,ee,V,de,H,Y-H,f),de=te=V=0,H=Y;for(var X=0;X<286;++X)W[X]=0;for(var X=0;X<30;++X)ee[X]=0}var K=2,ye=0,Te=m,Ue=ae-z&32767;if(B>2&&le==N(Y-Ue))for(var J=Math.min(y,B)-1,ie=Math.min(32767,Y),se=Math.min(258,B);Ue<=ie&&--Te&&ae!=z;){if(t[Y+K]==t[Y+K-Ue]){for(var pe=0;pe<se&&t[Y+pe]==t[Y+pe-Ue];++pe);if(pe>K){if(K=pe,ye=Ue,pe>J)break;for(var we=Math.min(Ue,pe-2),be=0,X=0;X<we;++X){var Ae=Y-Ue+X&32767,Ee=S[Ae],Je=Ae-Ee&32767;Je>be&&(be=Je,z=Ae)}}}ae=z,z=S[ae],Ue+=ae-z&32767}if(ye){U[de++]=268435456|T2[K]<<18|L4[ye];var gt=T2[K]&31,_t=L4[ye]&31;V+=iy[gt]+sy[_t],++W[257+gt],++ee[_t],$=Y+K,++te}else U[de++]=t[Y],++W[t[Y]]}}for(Y=Math.max(Y,$);Y<o;++Y)U[de++]=t[Y],++W[t[Y]];f=S4(t,l,c,U,W,ee,V,de,H,Y-H,f),c||(s.r=f&7|l[f/8|0]<<3,f-=7,s.h=T,s.p=S,s.i=Y,s.w=$)}else{for(var Y=s.w||0;Y<o+c;Y+=65535){var ue=Y+65535;ue>=o&&(l[f/8|0]=c,ue=o),f=NS(l,f+1,t.subarray(Y,ue))}s.i=o}return IS(a,0,r+Qb(f)+i)},RS=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},BU=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Ra(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return NU(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},FS=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},RU=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=RS();i.p(e.dictionary),FS(t,2,i.d())}},FU=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ju(6,"invalid zlib data"),(t[1]>>5&1)==1&&Ju(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function I2(t,e){e||(e={});var n=RS();n.p(t);var r=BU(t,e,e.dictionary?6:2,4);return RU(r,e),FS(r,r.length-4,n.d()),r}function jU(t,e){return DU(t.subarray(FU(t),-4),{i:2},e,e)}var zU=typeof TextDecoder<"u"&&new TextDecoder,UU=0;try{zU.decode(BS,{stream:!0}),UU=1}catch{}var Lr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function y1(){Lr.console&&typeof Lr.console.log=="function"&&Lr.console.log.apply(Lr.console,arguments)}var Wi={log:y1,warn:function(t){Lr.console&&(typeof Lr.console.warn=="function"?Lr.console.warn.apply(Lr.console,arguments):y1.call(null,arguments))},error:function(t){Lr.console&&(typeof Lr.console.error=="function"?Lr.console.error.apply(Lr.console,arguments):y1(t))}};function b1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Df(r.response,e,n)},r.onerror=function(){Wi.error("could not download file")},r.send()}function E4(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Ym(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var vg,N2,Df=Lr.saveAs||((typeof window>"u"?"undefined":Ni(window))!=="object"||window!==Lr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Lr.URL||Lr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?E4(i.href)?b1(t,e,n):Ym(i,i.target="_blank"):Ym(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Ym(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(E4(t))b1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Ym(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Ni(s)!=="object"&&(Wi.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return b1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Lr.HTMLElement)||Lr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Ni(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var f=a.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},a.readAsDataURL(t)}else{var l=Lr.URL||Lr.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function jS(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=ka(n,r,i,s,e[0],7,-680876936),s=ka(s,n,r,i,e[1],12,-389564586),i=ka(i,s,n,r,e[2],17,606105819),r=ka(r,i,s,n,e[3],22,-1044525330),n=ka(n,r,i,s,e[4],7,-176418897),s=ka(s,n,r,i,e[5],12,1200080426),i=ka(i,s,n,r,e[6],17,-1473231341),r=ka(r,i,s,n,e[7],22,-45705983),n=ka(n,r,i,s,e[8],7,1770035416),s=ka(s,n,r,i,e[9],12,-1958414417),i=ka(i,s,n,r,e[10],17,-42063),r=ka(r,i,s,n,e[11],22,-1990404162),n=ka(n,r,i,s,e[12],7,1804603682),s=ka(s,n,r,i,e[13],12,-40341101),i=ka(i,s,n,r,e[14],17,-1502002290),n=Ma(n,r=ka(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ma(s,n,r,i,e[6],9,-1069501632),i=Ma(i,s,n,r,e[11],14,643717713),r=Ma(r,i,s,n,e[0],20,-373897302),n=Ma(n,r,i,s,e[5],5,-701558691),s=Ma(s,n,r,i,e[10],9,38016083),i=Ma(i,s,n,r,e[15],14,-660478335),r=Ma(r,i,s,n,e[4],20,-405537848),n=Ma(n,r,i,s,e[9],5,568446438),s=Ma(s,n,r,i,e[14],9,-1019803690),i=Ma(i,s,n,r,e[3],14,-187363961),r=Ma(r,i,s,n,e[8],20,1163531501),n=Ma(n,r,i,s,e[13],5,-1444681467),s=Ma(s,n,r,i,e[2],9,-51403784),i=Ma(i,s,n,r,e[7],14,1735328473),n=Aa(n,r=Ma(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Aa(s,n,r,i,e[8],11,-2022574463),i=Aa(i,s,n,r,e[11],16,1839030562),r=Aa(r,i,s,n,e[14],23,-35309556),n=Aa(n,r,i,s,e[1],4,-1530992060),s=Aa(s,n,r,i,e[4],11,1272893353),i=Aa(i,s,n,r,e[7],16,-155497632),r=Aa(r,i,s,n,e[10],23,-1094730640),n=Aa(n,r,i,s,e[13],4,681279174),s=Aa(s,n,r,i,e[0],11,-358537222),i=Aa(i,s,n,r,e[3],16,-722521979),r=Aa(r,i,s,n,e[6],23,76029189),n=Aa(n,r,i,s,e[9],4,-640364487),s=Aa(s,n,r,i,e[12],11,-421815835),i=Aa(i,s,n,r,e[15],16,530742520),n=Ta(n,r=Aa(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ta(s,n,r,i,e[7],10,1126891415),i=Ta(i,s,n,r,e[14],15,-1416354905),r=Ta(r,i,s,n,e[5],21,-57434055),n=Ta(n,r,i,s,e[12],6,1700485571),s=Ta(s,n,r,i,e[3],10,-1894986606),i=Ta(i,s,n,r,e[10],15,-1051523),r=Ta(r,i,s,n,e[1],21,-2054922799),n=Ta(n,r,i,s,e[8],6,1873313359),s=Ta(s,n,r,i,e[15],10,-30611744),i=Ta(i,s,n,r,e[6],15,-1560198380),r=Ta(r,i,s,n,e[13],21,1309151649),n=Ta(n,r,i,s,e[4],6,-145523070),s=Ta(s,n,r,i,e[11],10,-1120210379),i=Ta(i,s,n,r,e[2],15,718787259),r=Ta(r,i,s,n,e[9],21,-343485551),t[0]=qh(n,t[0]),t[1]=qh(r,t[1]),t[2]=qh(i,t[2]),t[3]=qh(s,t[3])}function oy(t,e,n,r,i,s){return e=qh(qh(e,t),qh(r,s)),qh(e<<i|e>>>32-i,n)}function ka(t,e,n,r,i,s,o){return oy(e&n|~e&r,t,e,i,s,o)}function Ma(t,e,n,r,i,s,o){return oy(e&r|n&~r,t,e,i,s,o)}function Aa(t,e,n,r,i,s,o){return oy(e^n^r,t,e,i,s,o)}function Ta(t,e,n,r,i,s,o){return oy(n^(e|~r),t,e,i,s,o)}function zS(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)_1(r,$U(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(_1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,_1(r,i),r}function $U(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}vg=Lr.atob.bind(Lr),N2=Lr.btoa.bind(Lr);var P4="0123456789abcdef".split("");function VU(t){for(var e="",n=0;n<4;n++)e+=P4[t>>8*n+4&15]+P4[t>>8*n&15];return e}function HU(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function B2(t){return zS(t).map(HU).join("")}var WU=function(t){for(var e=0;e<t.length;e++)t[e]=VU(t[e]);return t.join("")}(zS("hello"))!="5d41402abc4b2a76b9719d911017c592";function qh(t,e){if(WU){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function R2(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var f=a[l];c=(c+f+o.charCodeAt(l))%256,a[l]=a[c],a[c]=f}n=t,r=a}else a=r;var p=e.length,y=0,m=0,C="";for(l=0;l<p;l++)m=(m+(f=a[y=(y+1)%256]))%256,a[y]=a[m],a[m]=f,o=a[(a[y]+a[m])%256],C+=String.fromCharCode(e.charCodeAt(l)^o);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k4={print:4,modify:8,copy:16,"annot-forms":32};function Fd(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(k4.perm!==void 0)throw new Error("Invalid permission: "+a);i+=k4[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=B2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=R2(this.encryptionKey,this.padding)}function jd(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function M4(t){if(Ni(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Lr.console&&Wi.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function hv(t){if(!(this instanceof hv))return new hv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function US(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ff(t,e,n,r,i){if(!(this instanceof Ff))return new Ff(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,US.call(this,r,i)}function $d(t,e,n,r,i){if(!(this instanceof $d))return new $d(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,US.call(this,r,i)}function xr(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",f=null;Ni(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,y={},m={internal:{},__private__:{}};m.__private__.PubSub=M4;var C="1.3",S=m.__private__.getPdfVersion=function(){return C};m.__private__.setPdfVersion=function(I){C=I};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return T};var O=m.__private__.getPageFormat=function(I){return T[I]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},N=D.COMPAT;function U(){this.saveGraphicsState(),Q(new mt(Ze,0,0,-Ze,0,va()*Ze).toString()+" cm"),this.setFontSize(this.getFontSize()/Ze),c="n",N=D.ADVANCED}function W(){this.restoreGraphicsState(),c="S",N=D.COMPAT}var ee=m.__private__.combineFontStyleAndFontWeight=function(I,ge){if(I=="bold"&&ge=="normal"||I=="bold"&&ge==400||I=="normal"&&ge=="italic"||I=="bold"&&ge=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ge&&(I=ge==400||ge==="normal"?I==="italic"?"italic":"normal":ge!=700&&ge!=="bold"||I!=="normal"?(ge==700?"bold":ge)+""+I:"bold"),I};m.advancedAPI=function(I){var ge=N===D.COMPAT;return ge&&U.call(this),typeof I!="function"||(I(this),ge&&W.call(this)),this},m.compatAPI=function(I){var ge=N===D.ADVANCED;return ge&&W.call(this),typeof I!="function"||(I(this),ge&&U.call(this)),this},m.isAdvancedAPI=function(){return N===D.ADVANCED};var te,V=function(I){if(N!==D.ADVANCED)throw new Error(I+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Y=m.roundToPrecision=m.__private__.roundToPrecision=function(I,ge){var He=e||ge;if(isNaN(I)||isNaN(He))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return I.toFixed(He).replace(/0+$/,"")};te=m.hpf=m.__private__.hpf=typeof l=="number"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(I,l)}:l==="smart"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(I,I>-1&&I<1?16:5)}:function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return Y(I,16)};var de=m.f2=m.__private__.f2=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f2");return Y(I,2)},$=m.__private__.f3=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f3");return Y(I,3)},H=m.scale=m.__private__.scale=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.scale");return N===D.COMPAT?I*Ze:N===D.ADVANCED?I:void 0},le=function(I){return N===D.COMPAT?va()-I:N===D.ADVANCED?I:void 0},ae=function(I){return H(le(I))};m.__private__.setPrecision=m.setPrecision=function(I){typeof parseInt(I,10)=="number"&&(e=parseInt(I,10))};var z,B="00000000000000000000000000000000",X=m.__private__.getFileId=function(){return B},K=m.__private__.setFileId=function(I){return B=I!==void 0&&/^[a-fA-F0-9]{32}$/.test(I)?I.toUpperCase():B.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(ns=new Fd(f.userPermissions,f.userPassword,f.ownerPassword,B)),B};m.setFileId=function(I){return K(I),this},m.getFileId=function(){return X()};var ye=m.__private__.convertDateToPDFDate=function(I){var ge=I.getTimezoneOffset(),He=ge<0?"+":"-",st=Math.floor(Math.abs(ge/60)),Lt=Math.abs(ge%60),Nt=[He,se(st),"'",se(Lt),"'"].join("");return["D:",I.getFullYear(),se(I.getMonth()+1),se(I.getDate()),se(I.getHours()),se(I.getMinutes()),se(I.getSeconds()),Nt].join("")},Te=m.__private__.convertPDFDateToDate=function(I){var ge=parseInt(I.substr(2,4),10),He=parseInt(I.substr(6,2),10)-1,st=parseInt(I.substr(8,2),10),Lt=parseInt(I.substr(10,2),10),Nt=parseInt(I.substr(12,2),10),sn=parseInt(I.substr(14,2),10);return new Date(ge,He,st,Lt,Nt,sn,0)},Ue=m.__private__.setCreationDate=function(I){var ge;if(I===void 0&&(I=new Date),I instanceof Date)ge=ye(I);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(I))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ge=I}return z=ge},J=m.__private__.getCreationDate=function(I){var ge=z;return I==="jsDate"&&(ge=Te(z)),ge};m.setCreationDate=function(I){return Ue(I),this},m.getCreationDate=function(I){return J(I)};var ie,se=m.__private__.padd2=function(I){return("0"+parseInt(I)).slice(-2)},pe=m.__private__.padd2Hex=function(I){return("00"+(I=I.toString())).substr(I.length)},we=0,be=[],Ae=[],Ee=0,Je=[],gt=[],_t=!1,ue=Ae,oe=function(){we=0,Ee=0,Ae=[],be=[],Je=[],fn=Gt(),wn=Gt()};m.__private__.setCustomOutputDestination=function(I){_t=!0,ue=I};var ce=function(I){_t||(ue=I)};m.__private__.resetCustomOutputDestination=function(){_t=!1,ue=Ae};var Q=m.__private__.out=function(I){return I=I.toString(),Ee+=I.length+1,ue.push(I),ue},Pe=m.__private__.write=function(I){return Q(arguments.length===1?I.toString():Array.prototype.join.call(arguments," "))},Ve=m.__private__.getArrayBuffer=function(I){for(var ge=I.length,He=new ArrayBuffer(ge),st=new Uint8Array(He);ge--;)st[ge]=I.charCodeAt(ge);return He},Qe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Qe};var ot=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(I){return ot=N===D.ADVANCED?I/Ze:I,this};var at,pt=m.__private__.getFontSize=m.getFontSize=function(){return N===D.COMPAT?ot:ot*Ze},Ft=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(I){return Ft=I,this},m.__private__.getR2L=m.getR2L=function(){return Ft};var Bt,Zt=m.__private__.setZoomMode=function(I){var ge=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(I))at=I;else if(isNaN(I)){if(ge.indexOf(I)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+I+'" is not recognized.');at=I}else at=parseInt(I,10)};m.__private__.getZoomMode=function(){return at};var ln,un=m.__private__.setPageMode=function(I){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(I)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+I+'" is not recognized.');Bt=I};m.__private__.getPageMode=function(){return Bt};var Sn=m.__private__.setLayoutMode=function(I){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(I)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+I+'" is not recognized.');ln=I};m.__private__.getLayoutMode=function(){return ln},m.__private__.setDisplayMode=m.setDisplayMode=function(I,ge,He){return Zt(I),Sn(ge),un(He),this};var qe={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(I){if(Object.keys(qe).indexOf(I)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return qe[I]},m.__private__.getDocumentProperties=function(){return qe},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(I){for(var ge in qe)qe.hasOwnProperty(ge)&&I[ge]&&(qe[ge]=I[ge]);return this},m.__private__.setDocumentProperty=function(I,ge){if(Object.keys(qe).indexOf(I)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return qe[I]=ge};var it,Ze,Ut,Yt,Ln,gn={},vn={},jn=[],mn={},Jt={},cn={},qn={},Kn=null,rr=0,zn=[],_r=new M4(m),Ri=t.hotfixes||[],Pi={},Rs={},ls=[],mt=function I(ge,He,st,Lt,Nt,sn){if(!(this instanceof I))return new I(ge,He,st,Lt,Nt,sn);isNaN(ge)&&(ge=1),isNaN(He)&&(He=0),isNaN(st)&&(st=0),isNaN(Lt)&&(Lt=1),isNaN(Nt)&&(Nt=0),isNaN(sn)&&(sn=0),this._matrix=[ge,He,st,Lt,Nt,sn]};Object.defineProperty(mt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(mt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(mt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(mt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(mt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(mt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(mt.prototype,"a",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(mt.prototype,"b",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(mt.prototype,"c",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(mt.prototype,"d",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(mt.prototype,"e",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(mt.prototype,"f",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(mt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(mt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(mt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(mt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),mt.prototype.join=function(I){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(te).join(I)},mt.prototype.multiply=function(I){var ge=I.sx*this.sx+I.shy*this.shx,He=I.sx*this.shy+I.shy*this.sy,st=I.shx*this.sx+I.sy*this.shx,Lt=I.shx*this.shy+I.sy*this.sy,Nt=I.tx*this.sx+I.ty*this.shx+this.tx,sn=I.tx*this.shy+I.ty*this.sy+this.ty;return new mt(ge,He,st,Lt,Nt,sn)},mt.prototype.decompose=function(){var I=this.sx,ge=this.shy,He=this.shx,st=this.sy,Lt=this.tx,Nt=this.ty,sn=Math.sqrt(I*I+ge*ge),kn=(I/=sn)*He+(ge/=sn)*st;He-=I*kn,st-=ge*kn;var In=Math.sqrt(He*He+st*st);return kn/=In,I*(st/=In)<ge*(He/=In)&&(I=-I,ge=-ge,kn=-kn,sn=-sn),{scale:new mt(sn,0,0,In,0,0),translate:new mt(1,0,0,1,Lt,Nt),rotate:new mt(I,ge,-ge,I,0,0),skew:new mt(1,0,kn,1,0,0)}},mt.prototype.toString=function(I){return this.join(" ")},mt.prototype.inversed=function(){var I=this.sx,ge=this.shy,He=this.shx,st=this.sy,Lt=this.tx,Nt=this.ty,sn=1/(I*st-ge*He),kn=st*sn,In=-ge*sn,Yn=-He*sn,ur=I*sn;return new mt(kn,In,Yn,ur,-kn*Lt-Yn*Nt,-In*Lt-ur*Nt)},mt.prototype.applyToPoint=function(I){var ge=I.x*this.sx+I.y*this.shx+this.tx,He=I.x*this.shy+I.y*this.sy+this.ty;return new cs(ge,He)},mt.prototype.applyToRectangle=function(I){var ge=this.applyToPoint(I),He=this.applyToPoint(new cs(I.x+I.w,I.y+I.h));return new jo(ge.x,ge.y,He.x-ge.x,He.y-ge.y)},mt.prototype.clone=function(){var I=this.sx,ge=this.shy,He=this.shx,st=this.sy,Lt=this.tx,Nt=this.ty;return new mt(I,ge,He,st,Lt,Nt)},m.Matrix=mt;var Ke=m.matrixMult=function(I,ge){return ge.multiply(I)},$t=new mt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=$t;var On=function(I,ge){if(!Jt[I]){var He=(ge instanceof Ff?"Sh":"P")+(Object.keys(mn).length+1).toString(10);ge.id=He,Jt[I]=He,mn[He]=ge,_r.publish("addPattern",ge)}};m.ShadingPattern=Ff,m.TilingPattern=$d,m.addShadingPattern=function(I,ge){return V("addShadingPattern()"),On(I,ge),this},m.beginTilingPattern=function(I){V("beginTilingPattern()"),zo(I.boundingBox[0],I.boundingBox[1],I.boundingBox[2]-I.boundingBox[0],I.boundingBox[3]-I.boundingBox[1],I.matrix)},m.endTilingPattern=function(I,ge){V("endTilingPattern()"),ge.stream=gt[ie].join(`
`),On(I,ge),_r.publish("endTilingPattern",ge),ls.pop().restore()};var Dn=m.__private__.newObject=function(){var I=Gt();return on(I,!0),I},Gt=m.__private__.newObjectDeferred=function(){return we++,be[we]=function(){return Ee},we},on=function(I,ge){return ge=typeof ge=="boolean"&&ge,be[I]=Ee,ge&&Q(I+" 0 obj"),I},dt=m.__private__.newAdditionalObject=function(){var I={objId:Gt(),content:""};return Je.push(I),I},fn=Gt(),wn=Gt(),Tn=m.__private__.decodeColorString=function(I){var ge=I.split(" ");if(ge.length!==2||ge[1]!=="g"&&ge[1]!=="G")ge.length===5&&(ge[4]==="k"||ge[4]==="K")&&(ge=[(1-ge[0])*(1-ge[3]),(1-ge[1])*(1-ge[3]),(1-ge[2])*(1-ge[3]),"r"]);else{var He=parseFloat(ge[0]);ge=[He,He,He,"r"]}for(var st="#",Lt=0;Lt<3;Lt++)st+=("0"+Math.floor(255*parseFloat(ge[Lt])).toString(16)).slice(-2);return st},er=m.__private__.encodeColorString=function(I){var ge;typeof I=="string"&&(I={ch1:I});var He=I.ch1,st=I.ch2,Lt=I.ch3,Nt=I.ch4,sn=I.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof He=="string"&&He.charAt(0)!=="#"){var kn=new jS(He);if(kn.ok)He=kn.toHex();else if(!/^\d*\.?\d*$/.test(He))throw new Error('Invalid color "'+He+'" passed to jsPDF.encodeColorString.')}if(typeof He=="string"&&/^#[0-9A-Fa-f]{3}$/.test(He)&&(He="#"+He[1]+He[1]+He[2]+He[2]+He[3]+He[3]),typeof He=="string"&&/^#[0-9A-Fa-f]{6}$/.test(He)){var In=parseInt(He.substr(1),16);He=In>>16&255,st=In>>8&255,Lt=255&In}if(st===void 0||Nt===void 0&&He===st&&st===Lt)if(typeof He=="string")ge=He+" "+sn[0];else switch(I.precision){case 2:ge=de(He/255)+" "+sn[0];break;case 3:default:ge=$(He/255)+" "+sn[0]}else if(Nt===void 0||Ni(Nt)==="object"){if(Nt&&!isNaN(Nt.a)&&Nt.a===0)return ge=["1.","1.","1.",sn[1]].join(" ");if(typeof He=="string")ge=[He,st,Lt,sn[1]].join(" ");else switch(I.precision){case 2:ge=[de(He/255),de(st/255),de(Lt/255),sn[1]].join(" ");break;default:case 3:ge=[$(He/255),$(st/255),$(Lt/255),sn[1]].join(" ")}}else if(typeof He=="string")ge=[He,st,Lt,Nt,sn[2]].join(" ");else switch(I.precision){case 2:ge=[de(He),de(st),de(Lt),de(Nt),sn[2]].join(" ");break;case 3:default:ge=[$(He),$(st),$(Lt),$(Nt),sn[2]].join(" ")}return ge},tr=m.__private__.getFilters=function(){return o},Ur=m.__private__.putStream=function(I){var ge=(I=I||{}).data||"",He=I.filters||tr(),st=I.alreadyAppliedFilters||[],Lt=I.addLength1||!1,Nt=ge.length,sn=I.objectId,kn=function(Ui){return Ui};if(f!==null&&sn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(kn=ns.encryptor(sn,0));var In={};He===!0&&(He=["FlateEncode"]);var Yn=I.additionalKeyValues||[],ur=(In=xr.API.processDataByFilters!==void 0?xr.API.processDataByFilters(ge,He):{data:ge,reverseChain:[]}).reverseChain+(Array.isArray(st)?st.join(" "):st.toString());if(In.data.length!==0&&(Yn.push({key:"Length",value:In.data.length}),Lt===!0&&Yn.push({key:"Length1",value:Nt})),ur.length!=0)if(ur.split("/").length-1==1)Yn.push({key:"Filter",value:ur});else{Yn.push({key:"Filter",value:"["+ur+"]"});for(var Sr=0;Sr<Yn.length;Sr+=1)if(Yn[Sr].key==="DecodeParms"){for(var bi=[],Zr=0;Zr<In.reverseChain.split("/").length-1;Zr+=1)bi.push("null");bi.push(Yn[Sr].value),Yn[Sr].value="["+bi.join(" ")+"]"}}Q("<<");for(var ni=0;ni<Yn.length;ni++)Q("/"+Yn[ni].key+" "+Yn[ni].value);Q(">>"),In.data.length!==0&&(Q("stream"),Q(kn(In.data)),Q("endstream"))},Xn=m.__private__.putPage=function(I){var ge=I.number,He=I.data,st=I.objId,Lt=I.contentsObjId;on(st,!0),Q("<</Type /Page"),Q("/Parent "+I.rootDictionaryObjId+" 0 R"),Q("/Resources "+I.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(te(I.mediaBox.bottomLeftX))+" "+parseFloat(te(I.mediaBox.bottomLeftY))+" "+te(I.mediaBox.topRightX)+" "+te(I.mediaBox.topRightY)+"]"),I.cropBox!==null&&Q("/CropBox ["+te(I.cropBox.bottomLeftX)+" "+te(I.cropBox.bottomLeftY)+" "+te(I.cropBox.topRightX)+" "+te(I.cropBox.topRightY)+"]"),I.bleedBox!==null&&Q("/BleedBox ["+te(I.bleedBox.bottomLeftX)+" "+te(I.bleedBox.bottomLeftY)+" "+te(I.bleedBox.topRightX)+" "+te(I.bleedBox.topRightY)+"]"),I.trimBox!==null&&Q("/TrimBox ["+te(I.trimBox.bottomLeftX)+" "+te(I.trimBox.bottomLeftY)+" "+te(I.trimBox.topRightX)+" "+te(I.trimBox.topRightY)+"]"),I.artBox!==null&&Q("/ArtBox ["+te(I.artBox.bottomLeftX)+" "+te(I.artBox.bottomLeftY)+" "+te(I.artBox.topRightX)+" "+te(I.artBox.topRightY)+"]"),typeof I.userUnit=="number"&&I.userUnit!==1&&Q("/UserUnit "+I.userUnit),_r.publish("putPage",{objId:st,pageContext:zn[ge],pageNumber:ge,page:He}),Q("/Contents "+Lt+" 0 R"),Q(">>"),Q("endobj");var Nt=He.join(`
`);return N===D.ADVANCED&&(Nt+=`
Q`),on(Lt,!0),Ur({data:Nt,filters:tr(),objectId:Lt}),Q("endobj"),st},Ai=m.__private__.putPages=function(){var I,ge,He=[];for(I=1;I<=rr;I++)zn[I].objId=Gt(),zn[I].contentsObjId=Gt();for(I=1;I<=rr;I++)He.push(Xn({number:I,data:gt[I],objId:zn[I].objId,contentsObjId:zn[I].contentsObjId,mediaBox:zn[I].mediaBox,cropBox:zn[I].cropBox,bleedBox:zn[I].bleedBox,trimBox:zn[I].trimBox,artBox:zn[I].artBox,userUnit:zn[I].userUnit,rootDictionaryObjId:fn,resourceDictionaryObjId:wn}));on(fn,!0),Q("<</Type /Pages");var st="/Kids [";for(ge=0;ge<rr;ge++)st+=He[ge]+" 0 R ";Q(st+"]"),Q("/Count "+rr),Q(">>"),Q("endobj"),_r.publish("postPutPages")},Wr=function(I){_r.publish("putFont",{font:I,out:Q,newObject:Dn,putStream:Ur}),I.isAlreadyPutted!==!0&&(I.objectNumber=Dn(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+jd(I.postScriptName)),Q("/Subtype /Type1"),typeof I.encoding=="string"&&Q("/Encoding /"+I.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},Xo=function(){for(var I in gn)gn.hasOwnProperty(I)&&(p===!1||p===!0&&y.hasOwnProperty(I))&&Wr(gn[I])},or=function(I){I.objectNumber=Dn();var ge=[];ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Form"}),ge.push({key:"BBox",value:"["+[te(I.x),te(I.y),te(I.x+I.width),te(I.y+I.height)].join(" ")+"]"}),ge.push({key:"Matrix",value:"["+I.matrix.toString()+"]"});var He=I.pages[1].join(`
`);Ur({data:He,additionalKeyValues:ge,objectId:I.objectNumber}),Q("endobj")},lr=function(){for(var I in Pi)Pi.hasOwnProperty(I)&&or(Pi[I])},us=function(I,ge){var He,st=[],Lt=1/(ge-1);for(He=0;He<1;He+=Lt)st.push(He);if(st.push(1),I[0].offset!=0){var Nt={offset:0,color:I[0].color};I.unshift(Nt)}if(I[I.length-1].offset!=1){var sn={offset:1,color:I[I.length-1].color};I.push(sn)}for(var kn="",In=0,Yn=0;Yn<st.length;Yn++){for(He=st[Yn];He>I[In+1].offset;)In++;var ur=I[In].offset,Sr=(He-ur)/(I[In+1].offset-ur),bi=I[In].color,Zr=I[In+1].color;kn+=pe(Math.round((1-Sr)*bi[0]+Sr*Zr[0]).toString(16))+pe(Math.round((1-Sr)*bi[1]+Sr*Zr[1]).toString(16))+pe(Math.round((1-Sr)*bi[2]+Sr*Zr[2]).toString(16))}return kn.trim()},Do=function(I,ge){ge||(ge=21);var He=Dn(),st=us(I.colors,ge),Lt=[];Lt.push({key:"FunctionType",value:"0"}),Lt.push({key:"Domain",value:"[0.0 1.0]"}),Lt.push({key:"Size",value:"["+ge+"]"}),Lt.push({key:"BitsPerSample",value:"8"}),Lt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Lt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ur({data:st,additionalKeyValues:Lt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:He}),Q("endobj"),I.objectNumber=Dn(),Q("<< /ShadingType "+I.type),Q("/ColorSpace /DeviceRGB");var Nt="/Coords ["+te(parseFloat(I.coords[0]))+" "+te(parseFloat(I.coords[1]))+" ";I.type===2?Nt+=te(parseFloat(I.coords[2]))+" "+te(parseFloat(I.coords[3])):Nt+=te(parseFloat(I.coords[2]))+" "+te(parseFloat(I.coords[3]))+" "+te(parseFloat(I.coords[4]))+" "+te(parseFloat(I.coords[5])),Q(Nt+="]"),I.matrix&&Q("/Matrix ["+I.matrix.toString()+"]"),Q("/Function "+He+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},Hc=function(I,ge){var He=Gt(),st=Dn();ge.push({resourcesOid:He,objectOid:st}),I.objectNumber=st;var Lt=[];Lt.push({key:"Type",value:"/Pattern"}),Lt.push({key:"PatternType",value:"1"}),Lt.push({key:"PaintType",value:"1"}),Lt.push({key:"TilingType",value:"1"}),Lt.push({key:"BBox",value:"["+I.boundingBox.map(te).join(" ")+"]"}),Lt.push({key:"XStep",value:te(I.xStep)}),Lt.push({key:"YStep",value:te(I.yStep)}),Lt.push({key:"Resources",value:He+" 0 R"}),I.matrix&&Lt.push({key:"Matrix",value:"["+I.matrix.toString()+"]"}),Ur({data:I.stream,additionalKeyValues:Lt,objectId:I.objectNumber}),Q("endobj")},hu=function(I){var ge;for(ge in mn)mn.hasOwnProperty(ge)&&(mn[ge]instanceof Ff?Do(mn[ge]):mn[ge]instanceof $d&&Hc(mn[ge],I))},hc=function(I){for(var ge in I.objectNumber=Dn(),Q("<<"),I)switch(ge){case"opacity":Q("/ca "+de(I[ge]));break;case"stroke-opacity":Q("/CA "+de(I[ge]))}Q(">>"),Q("endobj")},fc=function(){var I;for(I in cn)cn.hasOwnProperty(I)&&hc(cn[I])},cl=function(){for(var I in Q("/XObject <<"),Pi)Pi.hasOwnProperty(I)&&Pi[I].objectNumber>=0&&Q("/"+I+" "+Pi[I].objectNumber+" 0 R");_r.publish("putXobjectDict"),Q(">>")},hl=function(){ns.oid=Dn(),Q("<<"),Q("/Filter /Standard"),Q("/V "+ns.v),Q("/R "+ns.r),Q("/U <"+ns.toHexString(ns.U)+">"),Q("/O <"+ns.toHexString(ns.O)+">"),Q("/P "+ns.P),Q(">>"),Q("endobj")},Du=function(){for(var I in Q("/Font <<"),gn)gn.hasOwnProperty(I)&&(p===!1||p===!0&&y.hasOwnProperty(I))&&Q("/"+I+" "+gn[I].objectNumber+" 0 R");Q(">>")},dc=function(){if(Object.keys(mn).length>0){for(var I in Q("/Shading <<"),mn)mn.hasOwnProperty(I)&&mn[I]instanceof Ff&&mn[I].objectNumber>=0&&Q("/"+I+" "+mn[I].objectNumber+" 0 R");_r.publish("putShadingPatternDict"),Q(">>")}},So=function(I){if(Object.keys(mn).length>0){for(var ge in Q("/Pattern <<"),mn)mn.hasOwnProperty(ge)&&mn[ge]instanceof m.TilingPattern&&mn[ge].objectNumber>=0&&mn[ge].objectNumber<I&&Q("/"+ge+" "+mn[ge].objectNumber+" 0 R");_r.publish("putTilingPatternDict"),Q(">>")}},Gr=function(){if(Object.keys(cn).length>0){var I;for(I in Q("/ExtGState <<"),cn)cn.hasOwnProperty(I)&&cn[I].objectNumber>=0&&Q("/"+I+" "+cn[I].objectNumber+" 0 R");_r.publish("putGStateDict"),Q(">>")}},fr=function(I){on(I.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Du(),dc(),So(I.objectOid),Gr(),cl(),Q(">>"),Q("endobj")},$a=function(){var I=[];Xo(),fc(),lr(),hu(I),_r.publish("putResources"),I.forEach(fr),fr({resourcesOid:wn,objectOid:Number.MAX_SAFE_INTEGER}),_r.publish("postPutResources")},da=function(){_r.publish("putAdditionalObjects");for(var I=0;I<Je.length;I++){var ge=Je[I];on(ge.objId,!0),Q(ge.content),Q("endobj")}_r.publish("postPutAdditionalObjects")},Io=function(I){vn[I.fontName]=vn[I.fontName]||{},vn[I.fontName][I.fontStyle]=I.id},Ul=function(I,ge,He,st,Lt){var Nt={id:"F"+(Object.keys(gn).length+1).toString(10),postScriptName:I,fontName:ge,fontStyle:He,encoding:st,isStandardFont:Lt||!1,metadata:{}};return _r.publish("addFont",{font:Nt,instance:this}),gn[Nt.id]=Nt,Io(Nt),Nt.id},gr=function(I){for(var ge=0,He=Qe.length;ge<He;ge++){var st=Ul.call(this,I[ge][0],I[ge][1],I[ge][2],Qe[ge][3],!0);p===!1&&(y[st]=!0);var Lt=I[ge][0].split("-");Io({id:st,fontName:Lt[0],fontStyle:Lt[1]||""})}_r.publish("addFonts",{fonts:gn,dictionary:vn})},qr=function(I){return I.foo=function(){try{return I.apply(this,arguments)}catch(st){var ge=st.stack||"";~ge.indexOf(" at ")&&(ge=ge.split(" at ")[1]);var He="Error in function "+ge.split(`
`)[0].split("<")[0]+": "+st.message;if(!Lr.console)throw new Error(He);Lr.console.error(He,st),Lr.alert&&alert(He)}},I.foo.bar=I,I.foo},Va=function(I,ge){var He,st,Lt,Nt,sn,kn,In,Yn,ur;if(Lt=(ge=ge||{}).sourceEncoding||"Unicode",sn=ge.outputEncoding,(ge.autoencode||sn)&&gn[it].metadata&&gn[it].metadata[Lt]&&gn[it].metadata[Lt].encoding&&(Nt=gn[it].metadata[Lt].encoding,!sn&&gn[it].encoding&&(sn=gn[it].encoding),!sn&&Nt.codePages&&(sn=Nt.codePages[0]),typeof sn=="string"&&(sn=Nt[sn]),sn)){for(In=!1,kn=[],He=0,st=I.length;He<st;He++)(Yn=sn[I.charCodeAt(He)])?kn.push(String.fromCharCode(Yn)):kn.push(I[He]),kn[He].charCodeAt(0)>>8&&(In=!0);I=kn.join("")}for(He=I.length;In===void 0&&He!==0;)I.charCodeAt(He-1)>>8&&(In=!0),He--;if(!In)return I;for(kn=ge.noBOM?[]:[254,255],He=0,st=I.length;He<st;He++){if((ur=(Yn=I.charCodeAt(He))>>8)>>8)throw new Error("Character at position "+He+" of string '"+I+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");kn.push(ur),kn.push(Yn-(ur<<8))}return String.fromCharCode.apply(void 0,kn)},xs=m.__private__.pdfEscape=m.pdfEscape=function(I,ge){return Va(I,ge).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ls=m.__private__.beginPage=function(I){gt[++rr]=[],zn[rr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(I[0]),topRightY:Number(I[1])}},pa(rr),ce(gt[ie])},Iu=function(I,ge){var He,st,Lt;switch(n=ge||n,typeof I=="string"&&(He=O(I.toLowerCase()),Array.isArray(He)&&(st=He[0],Lt=He[1])),Array.isArray(I)&&(st=I[0]*Ze,Lt=I[1]*Ze),isNaN(st)&&(st=i[0],Lt=i[1]),(st>14400||Lt>14400)&&(Wi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),st=Math.min(14400,st),Lt=Math.min(14400,Lt)),i=[st,Lt],n.substr(0,1)){case"l":Lt>st&&(i=[Lt,st]);break;case"p":st>Lt&&(i=[Lt,st])}Ls(i),Wl(pu),Q(_i),Yl!==0&&Q(Yl+" J"),ei!==0&&Q(ei+" j"),_r.publish("addPage",{pageNumber:rr})},fl=function(I){I>0&&I<=rr&&(gt.splice(I,1),zn.splice(I,1),rr--,ie>rr&&(ie=rr),this.setPage(ie))},pa=function(I){I>0&&I<=rr&&(ie=I)},Ti=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return gt.length-1},No=function(I,ge,He){var st,Lt=void 0;return He=He||{},I=I!==void 0?I:gn[it].fontName,ge=ge!==void 0?ge:gn[it].fontStyle,st=I.toLowerCase(),vn[st]!==void 0&&vn[st][ge]!==void 0?Lt=vn[st][ge]:vn[I]!==void 0&&vn[I][ge]!==void 0?Lt=vn[I][ge]:He.disableWarning===!1&&Wi.warn("Unable to look up font label for font '"+I+"', '"+ge+"'. Refer to getFontList() for available fonts."),Lt||He.noFallback||(Lt=vn.times[ge])==null&&(Lt=vn.times.normal),Lt},Ha=m.__private__.putInfo=function(){var I=Dn(),ge=function(st){return st};for(var He in f!==null&&(ge=ns.encryptor(I,0)),Q("<<"),Q("/Producer ("+xs(ge("jsPDF "+xr.version))+")"),qe)qe.hasOwnProperty(He)&&qe[He]&&Q("/"+He.substr(0,1).toUpperCase()+He.substr(1)+" ("+xs(ge(qe[He]))+")");Q("/CreationDate ("+xs(ge(z))+")"),Q(">>"),Q("endobj")},mo=m.__private__.putCatalog=function(I){var ge=(I=I||{}).rootDictionaryObjId||fn;switch(Dn(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+ge+" 0 R"),at||(at="fullwidth"),at){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var He=""+at;He.substr(He.length-1)==="%"&&(at=parseInt(at)/100),typeof at=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+de(at)+"]")}switch(ln||(ln="continuous"),ln){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}Bt&&Q("/PageMode /"+Bt),_r.publish("putCatalog"),Q(">>"),Q("endobj")},fu=m.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(we+1)),Q("/Root "+we+" 0 R"),Q("/Info "+(we-1)+" 0 R"),f!==null&&Q("/Encrypt "+ns.oid+" 0 R"),Q("/ID [ <"+B+"> <"+B+"> ]"),Q(">>")},Wa=m.__private__.putHeader=function(){Q("%PDF-"+C),Q("%ºß¬à")},Nu=m.__private__.putXRef=function(){var I="0000000000";Q("xref"),Q("0 "+(we+1)),Q("0000000000 65535 f ");for(var ge=1;ge<=we;ge++)typeof be[ge]=="function"?Q((I+be[ge]()).slice(-10)+" 00000 n "):be[ge]!==void 0?Q((I+be[ge]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Bo=m.__private__.buildDocument=function(){oe(),ce(Ae),_r.publish("buildDocument"),Wa(),Ai(),da(),$a(),f!==null&&hl(),Ha(),mo();var I=Ee;return Nu(),fu(),Q("startxref"),Q(""+I),Q("%%EOF"),ce(gt[ie]),Ae.join(`
`)},ga=m.__private__.getBlob=function(I){return new Blob([Ve(I)],{type:"application/pdf"})},Ga=m.output=m.__private__.output=qr(function(I,ge){switch(typeof(ge=ge||{})=="string"?ge={filename:ge}:ge.filename=ge.filename||"generated.pdf",I){case void 0:return Bo();case"save":m.save(ge.filename);break;case"arraybuffer":return Ve(Bo());case"blob":return ga(Bo());case"bloburi":case"bloburl":if(Lr.URL!==void 0&&typeof Lr.URL.createObjectURL=="function")return Lr.URL&&Lr.URL.createObjectURL(ga(Bo()))||void 0;Wi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var He="",st=Bo();try{He=N2(st)}catch{He=N2(unescape(encodeURIComponent(st)))}return"data:application/pdf;filename="+ge.filename+";base64,"+He;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Lr)==="[object Window]"){var Lt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Nt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ge.pdfObjectUrl&&(Lt=ge.pdfObjectUrl,Nt="");var sn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Lt+'"'+Nt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ge)+");<\/script></body></html>",kn=Lr.open();return kn!==null&&kn.document.write(sn),kn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Lr)==="[object Window]"){var In='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ge.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ge.filename+'" width="500px" height="400px" /></body></html>',Yn=Lr.open();if(Yn!==null){Yn.document.write(In);var ur=this;Yn.document.documentElement.querySelector("#pdfViewer").onload=function(){Yn.document.title=ge.filename,Yn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ur.output("bloburl"))}}return Yn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Lr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Sr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ge)+'"></iframe></body></html>',bi=Lr.open();if(bi!==null&&(bi.document.write(Sr),bi.document.title=ge.filename),bi||typeof safari>"u")return bi;break;case"datauri":case"dataurl":return Lr.document.location.href=this.output("datauristring",ge);default:return null}}),$l=function(I){return Array.isArray(Ri)===!0&&Ri.indexOf(I)>-1};switch(r){case"pt":Ze=1;break;case"mm":Ze=72/25.4;break;case"cm":Ze=72/2.54;break;case"in":Ze=72;break;case"px":Ze=$l("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ze=12;break;case"ex":Ze=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ze=r}var ns=null;Ue(),K();var pc=function(I){return f!==null?ns.encryptor(I,0):function(ge){return ge}},du=m.__private__.getPageInfo=m.getPageInfo=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:zn[I].objId,pageNumber:I,pageContext:zn[I]}},cr=m.__private__.getPageInfoByObjId=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ge in zn)if(zn[ge].objId===I)break;return du(ge)},mr=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:zn[ie].objId,pageNumber:ie,pageContext:zn[ie]}};m.addPage=function(){return Iu.apply(this,arguments),this},m.setPage=function(){return pa.apply(this,arguments),ce.call(this,gt[ie]),this},m.insertPage=function(I){return this.addPage(),this.movePage(ie,I),this},m.movePage=function(I,ge){var He,st;if(I>ge){He=gt[I],st=zn[I];for(var Lt=I;Lt>ge;Lt--)gt[Lt]=gt[Lt-1],zn[Lt]=zn[Lt-1];gt[ge]=He,zn[ge]=st,this.setPage(ge)}else if(I<ge){He=gt[I],st=zn[I];for(var Nt=I;Nt<ge;Nt++)gt[Nt]=gt[Nt+1],zn[Nt]=zn[Nt+1];gt[ge]=He,zn[ge]=st,this.setPage(ge)}return this},m.deletePage=function(){return fl.apply(this,arguments),this},m.__private__.text=m.text=function(I,ge,He,st,Lt){var Nt,sn,kn,In,Yn,ur,Sr,bi,Zr,ni=(st=st||{}).scope||this;if(typeof I=="number"&&typeof ge=="number"&&(typeof He=="string"||Array.isArray(He))){var Ui=He;He=ge,ge=I,I=Ui}if(arguments[3]instanceof mt?(V("The transform parameter of text() with a Matrix value"),Zr=Lt):(kn=arguments[4],In=arguments[5],Ni(Sr=arguments[3])==="object"&&Sr!==null||(typeof kn=="string"&&(In=kn,kn=null),typeof Sr=="string"&&(In=Sr,Sr=null),typeof Sr=="number"&&(kn=Sr,Sr=null),st={flags:Sr,angle:kn,align:In})),isNaN(ge)||isNaN(He)||I==null)throw new Error("Invalid arguments passed to jsPDF.text");if(I.length===0)return ni;var qi="",yo=!1,Er=typeof st.lineHeightFactor=="number"?st.lineHeightFactor:Hl,Cs=ni.internal.scaleFactor;function bl(ii){return ii=ii.split("	").join(Array(st.TabLen||9).join(" ")),xs(ii,Sr)}function Fs(ii){for(var li,$i=ii.concat(),gi=[],wo=$i.length;wo--;)typeof(li=$i.shift())=="string"?gi.push(li):Array.isArray(ii)&&(li.length===1||li[1]===void 0&&li[2]===void 0)?gi.push(li[0]):gi.push([li[0],li[1],li[2]]);return gi}function vu(ii,li){var $i;if(typeof ii=="string")$i=li(ii)[0];else if(Array.isArray(ii)){for(var gi,wo,eo=ii.concat(),Po=[],ju=eo.length;ju--;)typeof(gi=eo.shift())=="string"?Po.push(li(gi)[0]):Array.isArray(gi)&&typeof gi[0]=="string"&&(wo=li(gi[0],gi[1],gi[2]),Po.push([wo[0],wo[1],wo[2]]));$i=Po}return $i}var Qo=!1,Fu=!0;if(typeof I=="string")Qo=!0;else if(Array.isArray(I)){var Za=I.concat();sn=[];for(var Ka,Yi=Za.length;Yi--;)(typeof(Ka=Za.shift())!="string"||Array.isArray(Ka)&&typeof Ka[0]!="string")&&(Fu=!1);Qo=Fu}if(Qo===!1)throw new Error('Type of text must be string or Array. "'+I+'" is not recognized.');typeof I=="string"&&(I=I.match(/[\r?\n]/)?I.split(/\r\n|\r|\n/g):[I]);var ea=ot/ni.internal.scaleFactor,bo=ea*(Er-1);switch(st.baseline){case"bottom":He-=bo;break;case"top":He+=ea-bo;break;case"hanging":He+=ea-2*bo;break;case"middle":He+=ea/2-bo}if((ur=st.maxWidth||0)>0&&(typeof I=="string"?I=ni.splitTextToSize(I,ur):Object.prototype.toString.call(I)==="[object Array]"&&(I=I.reduce(function(ii,li){return ii.concat(ni.splitTextToSize(li,ur))},[]))),Nt={text:I,x:ge,y:He,options:st,mutex:{pdfEscape:xs,activeFontKey:it,fonts:gn,activeFontSize:ot}},_r.publish("preProcessText",Nt),I=Nt.text,kn=(st=Nt.options).angle,!(Zr instanceof mt)&&kn&&typeof kn=="number"){kn*=Math.PI/180,st.rotationDirection===0&&(kn=-kn),N===D.ADVANCED&&(kn=-kn);var Qs=Math.cos(kn),_l=Math.sin(kn);Zr=new mt(Qs,_l,-_l,Qs,0,0)}else kn&&kn instanceof mt&&(Zr=kn);N!==D.ADVANCED||Zr||(Zr=$t),(Yn=st.charSpace||ql)!==void 0&&(qi+=te(H(Yn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(bi=st.horizontalScale)!==void 0&&(qi+=te(100*bi)+` Tz
`),st.lang;var Ss=-1,js=st.renderingMode!==void 0?st.renderingMode:st.stroke,zs=ni.internal.getCurrentPageInfo().pageContext;switch(js){case 0:case!1:case"fill":Ss=0;break;case 1:case!0:case"stroke":Ss=1;break;case 2:case"fillThenStroke":Ss=2;break;case 3:case"invisible":Ss=3;break;case 4:case"fillAndAddForClipping":Ss=4;break;case 5:case"strokeAndAddPathForClipping":Ss=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ss=6;break;case 7:case"addToPathForClipping":Ss=7}var vc=zs.usedRenderingMode!==void 0?zs.usedRenderingMode:-1;Ss!==-1?qi+=Ss+` Tr
`:vc!==-1&&(qi+=`0 Tr
`),Ss!==-1&&(zs.usedRenderingMode=Ss),In=st.align||"left";var rs,ya=ot*Er,Es=ni.internal.pageSize.getWidth(),Ps=gn[it];Yn=st.charSpace||ql,ur=st.maxWidth||0,Sr=Object.assign({autoencode:!0,noBOM:!0},st.flags);var ba=[],_a=function(ii){return ni.getStringUnitWidth(ii,{font:Ps,charSpace:Yn,fontSize:ot,doKerning:!1})*ot/Cs};if(Object.prototype.toString.call(I)==="[object Array]"){var ks;sn=Fs(I),In!=="left"&&(rs=sn.map(_a));var hs,ta=0;if(In==="right"){ge-=rs[0],I=[],Yi=sn.length;for(var _o=0;_o<Yi;_o++)_o===0?(hs=Jn(ge),ks=ji(He)):(hs=H(ta-rs[_o]),ks=-ya),I.push([sn[_o],hs,ks]),ta=rs[_o]}else if(In==="center"){ge-=rs[0]/2,I=[],Yi=sn.length;for(var Ms=0;Ms<Yi;Ms++)Ms===0?(hs=Jn(ge),ks=ji(He)):(hs=H((ta-rs[Ms])/2),ks=-ya),I.push([sn[Ms],hs,ks]),ta=rs[Ms]}else if(In==="left"){I=[],Yi=sn.length;for(var bt=0;bt<Yi;bt++)I.push(sn[bt])}else if(In==="justify"&&Ps.encoding==="Identity-H"){I=[],Yi=sn.length,ur=ur!==0?ur:Es;for(var Vt=0,Mt=0;Mt<Yi;Mt++)if(ks=Mt===0?ji(He):-ya,hs=Mt===0?Jn(ge):Vt,Mt<Yi-1){var En=H((ur-rs[Mt])/(sn[Mt].split(" ").length-1)),Un=sn[Mt].split(" ");I.push([Un[0]+" ",hs,ks]),Vt=0;for(var hr=1;hr<Un.length;hr++){var wi=(_a(Un[hr-1]+" "+Un[hr])-_a(Un[hr]))*Cs+En;hr==Un.length-1?I.push([Un[hr],wi,0]):I.push([Un[hr]+" ",wi,0]),Vt-=wi}}else I.push([sn[Mt],hs,ks]);I.push(["",Vt,0])}else{if(In!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(I=[],Yi=sn.length,ur=ur!==0?ur:Es,Mt=0;Mt<Yi;Mt++)ks=Mt===0?ji(He):-ya,hs=Mt===0?Jn(ge):0,Mt<Yi-1?ba.push(te(H((ur-rs[Mt])/(sn[Mt].split(" ").length-1)))):ba.push(0),I.push([sn[Mt],hs,ks])}}var ri=typeof st.R2L=="boolean"?st.R2L:Ft;ri===!0&&(I=vu(I,function(ii,li,$i){return[ii.split("").reverse().join(""),li,$i]})),Nt={text:I,x:ge,y:He,options:st,mutex:{pdfEscape:xs,activeFontKey:it,fonts:gn,activeFontSize:ot}},_r.publish("postProcessText",Nt),I=Nt.text,yo=Nt.mutex.isHex||!1;var Kl=gn[it].encoding;Kl!=="WinAnsiEncoding"&&Kl!=="StandardEncoding"||(I=vu(I,function(ii,li,$i){return[bl(ii),li,$i]})),sn=Fs(I),I=[];for(var Us,xi,na,wa=0,ra=1,ia=Array.isArray(sn[0])?ra:wa,sa="",Dr=function(ii,li,$i){var gi="";return $i instanceof mt?($i=typeof st.angle=="number"?Ke($i,new mt(1,0,0,1,ii,li)):Ke(new mt(1,0,0,1,ii,li),$i),N===D.ADVANCED&&($i=Ke(new mt(1,0,0,-1,0,0),$i)),gi=$i.join(" ")+` Tm
`):gi=te(ii)+" "+te(li)+` Td
`,gi},Uo=0;Uo<sn.length;Uo++){switch(sa="",ia){case ra:na=(yo?"<":"(")+sn[Uo][0]+(yo?">":")"),Us=parseFloat(sn[Uo][1]),xi=parseFloat(sn[Uo][2]);break;case wa:na=(yo?"<":"(")+sn[Uo]+(yo?">":")"),Us=Jn(ge),xi=ji(He)}ba!==void 0&&ba[Uo]!==void 0&&(sa=ba[Uo]+` Tw
`),Uo===0?I.push(sa+Dr(Us,xi,Zr)+na):ia===wa?I.push(sa+na):ia===ra&&I.push(sa+Dr(Us,xi,Zr)+na)}I=ia===wa?I.join(` Tj
T* `):I.join(` Tj
`),I+=` Tj
`;var fs=`BT
/`;return fs+=it+" "+ot+` Tf
`,fs+=te(ot*Er)+` TL
`,fs+=Jo+`
`,fs+=qi,fs+=I,Q(fs+="ET"),y[it]=!0,ni};var Ro=m.__private__.clip=m.clip=function(I){return Q(I==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ro("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Q("n"),this};var $r=m.__private__.isValidStyle=function(I){var ge=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(I)!==-1&&(ge=!0),ge};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(I){return $r(I)&&(c=I),this};var Bu=m.__private__.getStyle=m.getStyle=function(I){var ge=c;switch(I){case"D":case"S":ge="S";break;case"F":ge="f";break;case"FD":case"DF":ge="B";break;case"f":case"f*":case"B":case"B*":ge=I}return ge},dl=m.close=function(){return Q("h"),this};m.stroke=function(){return Q("S"),this},m.fill=function(I){return pl("f",I),this},m.fillEvenOdd=function(I){return pl("f*",I),this},m.fillStroke=function(I){return pl("B",I),this},m.fillStrokeEvenOdd=function(I){return pl("B*",I),this};var pl=function(I,ge){Ni(ge)==="object"?Ru(ge,I):Q(I)},Fo=function(I){I===null||N===D.ADVANCED&&I===void 0||(I=Bu(I),Q(I))};function qa(I,ge,He,st,Lt){var Nt=new $d(ge||this.boundingBox,He||this.xStep,st||this.yStep,this.gState,Lt||this.matrix);Nt.stream=this.stream;var sn=I+"$$"+this.cloneIndex+++"$$";return On(sn,Nt),Nt}var Ru=function(I,ge){var He=Jt[I.key],st=mn[He];if(st instanceof Ff)Q("q"),Q(Vl(ge)),st.gState&&m.setGState(st.gState),Q(I.matrix.toString()+" cm"),Q("/"+He+" sh"),Q("Q");else if(st instanceof $d){var Lt=new mt(1,0,0,-1,0,va());I.matrix&&(Lt=Lt.multiply(I.matrix||$t),He=qa.call(st,I.key,I.boundingBox,I.xStep,I.yStep,Lt).id),Q("q"),Q("/Pattern cs"),Q("/"+He+" scn"),st.gState&&m.setGState(st.gState),Q(ge),Q("Q")}},Vl=function(I){switch(I){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},dr=m.moveTo=function(I,ge){return Q(te(H(I))+" "+te(ae(ge))+" m"),this},kr=m.lineTo=function(I,ge){return Q(te(H(I))+" "+te(ae(ge))+" l"),this},Ya=m.curveTo=function(I,ge,He,st,Lt,Nt){return Q([te(H(I)),te(ae(ge)),te(H(He)),te(ae(st)),te(H(Lt)),te(ae(Nt)),"c"].join(" ")),this};m.__private__.line=m.line=function(I,ge,He,st,Lt){if(isNaN(I)||isNaN(ge)||isNaN(He)||isNaN(st)||!$r(Lt))throw new Error("Invalid arguments passed to jsPDF.line");return N===D.COMPAT?this.lines([[He-I,st-ge]],I,ge,[1,1],Lt||"S"):this.lines([[He-I,st-ge]],I,ge,[1,1]).stroke()},m.__private__.lines=m.lines=function(I,ge,He,st,Lt,Nt){var sn,kn,In,Yn,ur,Sr,bi,Zr,ni,Ui,qi,yo;if(typeof I=="number"&&(yo=He,He=ge,ge=I,I=yo),st=st||[1,1],Nt=Nt||!1,isNaN(ge)||isNaN(He)||!Array.isArray(I)||!Array.isArray(st)||!$r(Lt)||typeof Nt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(dr(ge,He),sn=st[0],kn=st[1],Yn=I.length,Ui=ge,qi=He,In=0;In<Yn;In++)(ur=I[In]).length===2?(Ui=ur[0]*sn+Ui,qi=ur[1]*kn+qi,kr(Ui,qi)):(Sr=ur[0]*sn+Ui,bi=ur[1]*kn+qi,Zr=ur[2]*sn+Ui,ni=ur[3]*kn+qi,Ui=ur[4]*sn+Ui,qi=ur[5]*kn+qi,Ya(Sr,bi,Zr,ni,Ui,qi));return Nt&&dl(),Fo(Lt),this},m.path=function(I){for(var ge=0;ge<I.length;ge++){var He=I[ge],st=He.c;switch(He.op){case"m":dr(st[0],st[1]);break;case"l":kr(st[0],st[1]);break;case"c":Ya.apply(this,st);break;case"h":dl()}}return this},m.__private__.rect=m.rect=function(I,ge,He,st,Lt){if(isNaN(I)||isNaN(ge)||isNaN(He)||isNaN(st)||!$r(Lt))throw new Error("Invalid arguments passed to jsPDF.rect");return N===D.COMPAT&&(st=-st),Q([te(H(I)),te(ae(ge)),te(H(He)),te(H(st)),"re"].join(" ")),Fo(Lt),this},m.__private__.triangle=m.triangle=function(I,ge,He,st,Lt,Nt,sn){if(isNaN(I)||isNaN(ge)||isNaN(He)||isNaN(st)||isNaN(Lt)||isNaN(Nt)||!$r(sn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[He-I,st-ge],[Lt-He,Nt-st],[I-Lt,ge-Nt]],I,ge,[1,1],sn,!0),this},m.__private__.roundedRect=m.roundedRect=function(I,ge,He,st,Lt,Nt,sn){if(isNaN(I)||isNaN(ge)||isNaN(He)||isNaN(st)||isNaN(Lt)||isNaN(Nt)||!$r(sn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var kn=4/3*(Math.SQRT2-1);return Lt=Math.min(Lt,.5*He),Nt=Math.min(Nt,.5*st),this.lines([[He-2*Lt,0],[Lt*kn,0,Lt,Nt-Nt*kn,Lt,Nt],[0,st-2*Nt],[0,Nt*kn,-Lt*kn,Nt,-Lt,Nt],[2*Lt-He,0],[-Lt*kn,0,-Lt,-Nt*kn,-Lt,-Nt],[0,2*Nt-st],[0,-Nt*kn,Lt*kn,-Nt,Lt,-Nt]],I+Lt,ge,[1,1],sn,!0),this},m.__private__.ellipse=m.ellipse=function(I,ge,He,st,Lt){if(isNaN(I)||isNaN(ge)||isNaN(He)||isNaN(st)||!$r(Lt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Nt=4/3*(Math.SQRT2-1)*He,sn=4/3*(Math.SQRT2-1)*st;return dr(I+He,ge),Ya(I+He,ge-sn,I+Nt,ge-st,I,ge-st),Ya(I-Nt,ge-st,I-He,ge-sn,I-He,ge),Ya(I-He,ge+sn,I-Nt,ge+st,I,ge+st),Ya(I+Nt,ge+st,I+He,ge+sn,I+He,ge),Fo(Lt),this},m.__private__.circle=m.circle=function(I,ge,He,st){if(isNaN(I)||isNaN(ge)||isNaN(He)||!$r(st))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(I,ge,He,He,st)},m.setFont=function(I,ge,He){return He&&(ge=ee(ge,He)),it=No(I,ge,{disableWarning:!1}),this};var gc=m.__private__.getFont=m.getFont=function(){return gn[No.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var I,ge,He={};for(I in vn)if(vn.hasOwnProperty(I))for(ge in He[I]=[],vn[I])vn[I].hasOwnProperty(ge)&&He[I].push(ge);return He},m.addFont=function(I,ge,He,st,Lt){var Nt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Nt.indexOf(arguments[3])!==-1?Lt=arguments[3]:arguments[3]&&Nt.indexOf(arguments[3])==-1&&(He=ee(He,st)),Lt=Lt||"Identity-H",Ul.call(this,I,ge,He,Lt)};var Hl,pu=t.lineWidth||.200025,gl=m.__private__.getLineWidth=m.getLineWidth=function(){return pu},Wl=m.__private__.setLineWidth=m.setLineWidth=function(I){return pu=I,Q(te(H(I))+" w"),this};m.__private__.setLineDash=xr.API.setLineDash=xr.API.setLineDashPattern=function(I,ge){if(I=I||[],ge=ge||0,isNaN(ge)||!Array.isArray(I))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return I=I.map(function(He){return te(H(He))}).join(" "),ge=te(H(ge)),Q("["+I+"] "+ge+" d"),this};var gu=m.__private__.getLineHeight=m.getLineHeight=function(){return ot*Hl};m.__private__.getLineHeight=m.getLineHeight=function(){return ot*Hl};var Or=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(I){return typeof(I=I||1.15)=="number"&&(Hl=I),this},Fi=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Hl};Or(t.lineHeight);var Jn=m.__private__.getHorizontalCoordinate=function(I){return H(I)},ji=m.__private__.getVerticalCoordinate=function(I){return N===D.ADVANCED?I:zn[ie].mediaBox.topRightY-zn[ie].mediaBox.bottomLeftY-H(I)},ml=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(I){return te(Jn(I))},ma=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(I){return te(ji(I))},_i=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Tn(_i)},m.__private__.setStrokeColor=m.setDrawColor=function(I,ge,He,st){return _i=er({ch1:I,ch2:ge,ch3:He,ch4:st,pdfColorType:"draw",precision:2}),Q(_i),this};var mu=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Tn(mu)},m.__private__.setFillColor=m.setFillColor=function(I,ge,He,st){return mu=er({ch1:I,ch2:ge,ch3:He,ch4:st,pdfColorType:"fill",precision:2}),Q(mu),this};var Jo=t.textColor||"0 g",Gl=m.__private__.getTextColor=m.getTextColor=function(){return Tn(Jo)};m.__private__.setTextColor=m.setTextColor=function(I,ge,He,st){return Jo=er({ch1:I,ch2:ge,ch3:He,ch4:st,pdfColorType:"text",precision:3}),this};var ql=t.charSpace,Eo=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(ql||0)};m.__private__.setCharSpace=m.setCharSpace=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ql=I,this};var Yl=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(I){var ge=m.CapJoinStyles[I];if(ge===void 0)throw new Error("Line cap style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yl=ge,Q(ge+" J"),this};var ei=0;m.__private__.setLineJoin=m.setLineJoin=function(I){var ge=m.CapJoinStyles[I];if(ge===void 0)throw new Error("Line join style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ei=ge,Q(ge+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(I){if(I=I||0,isNaN(I))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(te(H(I))+" M"),this},m.GState=hv,m.setGState=function(I){(I=typeof I=="string"?cn[qn[I]]:mc(null,I)).equals(Kn)||(Q("/"+I.id+" gs"),Kn=I)};var mc=function(I,ge){if(!I||!qn[I]){var He=!1;for(var st in cn)if(cn.hasOwnProperty(st)&&cn[st].equals(ge)){He=!0;break}if(He)ge=cn[st];else{var Lt="GS"+(Object.keys(cn).length+1).toString(10);cn[Lt]=ge,ge.id=Lt}return I&&(qn[I]=ge.id),_r.publish("addGState",ge),ge}};m.addGState=function(I,ge){return mc(I,ge),this},m.saveGraphicsState=function(){return Q("q"),jn.push({key:it,size:ot,color:Jo}),this},m.restoreGraphicsState=function(){Q("Q");var I=jn.pop();return it=I.key,ot=I.size,Jo=I.color,Kn=null,this},m.setCurrentTransformationMatrix=function(I){return Q(I.toString()+" cm"),this},m.comment=function(I){return Q("#"+I),this};var cs=function(I,ge){var He=I||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return He},set:function(Nt){isNaN(Nt)||(He=parseFloat(Nt))}});var st=ge||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return st},set:function(Nt){isNaN(Nt)||(st=parseFloat(Nt))}});var Lt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Lt},set:function(Nt){Lt=Nt.toString()}}),this},jo=function(I,ge,He,st){cs.call(this,I,ge),this.type="rect";var Lt=He||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Lt},set:function(sn){isNaN(sn)||(Lt=parseFloat(sn))}});var Nt=st||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Nt},set:function(sn){isNaN(sn)||(Nt=parseFloat(sn))}}),this},Zl=function(){this.page=rr,this.currentPage=ie,this.pages=gt.slice(0),this.pagesContext=zn.slice(0),this.x=Ut,this.y=Yt,this.matrix=Ln,this.width=ti(ie),this.height=va(ie),this.outputDestination=ue,this.id="",this.objectNumber=-1};Zl.prototype.restore=function(){rr=this.page,ie=this.currentPage,zn=this.pagesContext,gt=this.pages,Ut=this.x,Yt=this.y,Ln=this.matrix,vo(ie,this.width),zi(ie,this.height),ue=this.outputDestination};var zo=function(I,ge,He,st,Lt){ls.push(new Zl),rr=ie=0,gt=[],Ut=I,Yt=ge,Ln=Lt,Ls([He,st])},vl=function(I){if(Rs[I])ls.pop().restore();else{var ge=new Zl,He="Xo"+(Object.keys(Pi).length+1).toString(10);ge.id=He,Rs[I]=He,Pi[He]=ge,_r.publish("addFormObject",ge),ls.pop().restore()}};for(var yl in m.beginFormObject=function(I,ge,He,st,Lt){return zo(I,ge,He,st,Lt),this},m.endFormObject=function(I){return vl(I),this},m.doFormObject=function(I,ge){var He=Pi[Rs[I]];return Q("q"),Q(ge.toString()+" cm"),Q("/"+He.id+" Do"),Q("Q"),this},m.getFormObject=function(I){var ge=Pi[Rs[I]];return{x:ge.x,y:ge.y,width:ge.width,height:ge.height,matrix:ge.matrix}},m.save=function(I,ge){return I=I||"generated.pdf",(ge=ge||{}).returnPromise=ge.returnPromise||!1,ge.returnPromise===!1?(Df(ga(Bo()),I),typeof Df.unload=="function"&&Lr.setTimeout&&setTimeout(Df.unload,911),this):new Promise(function(He,st){try{var Lt=Df(ga(Bo()),I);typeof Df.unload=="function"&&Lr.setTimeout&&setTimeout(Df.unload,911),He(Lt)}catch(Nt){st(Nt.message)}})},xr.API)xr.API.hasOwnProperty(yl)&&(yl==="events"&&xr.API.events.length?function(I,ge){var He,st,Lt;for(Lt=ge.length-1;Lt!==-1;Lt--)He=ge[Lt][0],st=ge[Lt][1],I.subscribe.apply(I,[He].concat(typeof st=="function"?[st]:st))}(_r,xr.API.events):m[yl]=xr.API[yl]);var ti=m.getPageWidth=function(I){return(zn[I=I||ie].mediaBox.topRightX-zn[I].mediaBox.bottomLeftX)/Ze},vo=m.setPageWidth=function(I,ge){zn[I].mediaBox.topRightX=ge*Ze+zn[I].mediaBox.bottomLeftX},va=m.getPageHeight=function(I){return(zn[I=I||ie].mediaBox.topRightY-zn[I].mediaBox.bottomLeftY)/Ze},zi=m.setPageHeight=function(I,ge){zn[I].mediaBox.topRightY=ge*Ze+zn[I].mediaBox.bottomLeftY};return m.internal={pdfEscape:xs,getStyle:Bu,getFont:gc,getFontSize:pt,getCharSpace:Eo,getTextColor:Gl,getLineHeight:gu,getLineHeightFactor:Fi,getLineWidth:gl,write:Pe,getHorizontalCoordinate:Jn,getVerticalCoordinate:ji,getCoordinateString:ml,getVerticalCoordinateString:ma,collections:{},newObject:Dn,newAdditionalObject:dt,newObjectDeferred:Gt,newObjectDeferredBegin:on,getFilters:tr,putStream:Ur,events:_r,scaleFactor:Ze,pageSize:{getWidth:function(){return ti(ie)},setWidth:function(I){vo(ie,I)},getHeight:function(){return va(ie)},setHeight:function(I){zi(ie,I)}},encryptionOptions:f,encryption:ns,getEncryptor:pc,output:Ga,getNumberOfPages:Ti,pages:gt,out:Q,f2:de,f3:$,getPageInfo:du,getPageInfoByObjId:cr,getCurrentPageInfo:mr,getPDFVersion:S,Point:cs,Rectangle:jo,Matrix:mt,hasHotfix:$l},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ti(ie)},set:function(I){vo(ie,I)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return va(ie)},set:function(I){zi(ie,I)},enumerable:!0,configurable:!0}),gr.call(m,Qe),it="F1",Iu(i,n),_r.publish("initialized"),m}Fd.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Fd.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Fd.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Fd.prototype.processOwnerPassword=function(t,e){return R2(B2(e).substr(0,5),t)},Fd.prototype.encryptor=function(t,e){var n=B2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return R2(n,r)}},hv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Ni(t)!==Ni(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},xr.API={events:[]},xr.version="2.5.2";var Gs=xr.API,e_=1,nd=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ed=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ar=function(t){return t.toFixed(2)},Nh=function(t){return t.toFixed(5)};Gs.__acroform__={};var zl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},A4=function(t){return t*e_},Ec=function(t){var e=new VS,n=$n.internal.getHeight(t)||0,r=$n.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Ar(r)),Number(Ar(n))],e},GU=Gs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},qU=Gs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},YU=Gs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},ao=Gs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return YU(t,e-1)},lo=Gs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return GU(t,e-1)},uo=Gs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qU(t,e-1)},ZU=Gs.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Ar(l.lowerLeft_X)),Number(Ar(l.lowerLeft_Y)),Number(Ar(l.upperRight_X)),Number(Ar(l.upperRight_Y))]},KU=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=F2(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Ar(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Ec(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},F2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function($){return $.split(`
`)}):i.map(function($){return[$]});var s=n,o=$n.internal.getHeight(t)||0;o=o<0?-o:o;var a=$n.internal.getWidth(t)||0;a=a<0?-a:a;var l=function($,H,le){if($+1<i.length){var ae=H+" "+i[$+1][0];return Zm(ae,t,le).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,f,p=Zm("3",t,s).height,y=t.multiline?o-s:(o-p)/2,m=y+=2,C=0,S=0,T=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Zm(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var O="",D=0,N=0;N<i.length;N++)if(i.hasOwnProperty(N)){var U=!1;if(i[N].length!==1&&T!==i[N].length-1){if((p+2)*(D+2)+2>o)continue e;O+=i[N][T],U=!0,S=N,N--}else{O=(O+=i[N][T]+" ").substr(O.length-1)==" "?O.substr(0,O.length-1):O;var W=parseInt(N),ee=l(W,O,s),te=N>=i.length-1;if(ee&&!te){O+=" ",T=0;continue}if(ee||te){if(te)S=W;else if(t.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(D+2)+2>o)continue e;S=W}}for(var V="",Y=C;Y<=S;Y++){var de=i[Y];if(t.multiline){if(Y===S){V+=de[T]+" ",T=(T+1)%de.length;continue}if(Y===C){V+=de[de.length-1]+" ";continue}}V+=de[0]+" "}switch(V=V.substr(V.length-1)==" "?V.substr(0,V.length-1):V,f=Zm(V,t,s).width,t.textAlign){case"right":c=a-f-2;break;case"center":c=(a-f)/2;break;case"left":default:c=2}e+=Ar(c)+" "+Ar(m)+` Td
`,e+="("+nd(V)+`) Tj
`,e+=-Ar(c)+` 0 Td
`,m=-(s+2),f=0,C=U?S:S+1,D++,O=""}break}return r.text=e,r.fontSize=s,r},Zm=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},XU={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},JU=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},QU=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Ni(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},e$=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(uc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(XU)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");e_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new HS,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&JU(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=ZU(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=$n.createDefaultAppearanceStream(a),Ni(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var f=KU(a);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(a.appearanceStreamContent){var p="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var m=a.appearanceStreamContent[y];if(p+="/"+y+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var C=m[o];typeof C=="function"&&(C=C.call(i,a)),p+="/"+o+" "+C+" ",i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C)}}else typeof(C=m)=="function"&&(C=C.call(i,a)),p+="/"+o+" "+C,i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&QU(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},$S=Gs.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Ni(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+nd(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},w1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+nd(r(t))+")"},Ic=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ic.prototype.toString=function(){return this.objId+" 0 R"},Ic.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Ic.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:$S(i,this.objId,this.scope)}):i instanceof Ic?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var VS=function(){Ic.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};zl(VS,Ic);var HS=function(){Ic.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+nd(n(t))+")"}},set:function(n){t=n}})};zl(HS,Ic);var uc=function t(){Ic.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute F supplied.');e=O}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ao(e,3)},set:function(O){O?this.F=lo(e,3):this.F=uo(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute Ff supplied.');n=O}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(O){r=O!==void 0?O:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(O){r[0]=O}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(O){r[1]=O}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(O){r[2]=O}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(O){r[3]=O}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(O){switch(O){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=O;break;default:throw new Error('Invalid value "'+O+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof fv)return;s="FieldObject"+t.FieldNum++}var O=function(D){return D};return this.scope&&(O=this.scope.internal.getEncryptor(this.objId)),"("+nd(O(s))+")"},set:function(O){s=O.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(O){s=O}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(O){o=O}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(O){a=O}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(O){l=O}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/e_:c},set:function(O){c=O}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(O){f=O}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof fv||this instanceof Wf))return w1(p,this.objId,this.scope)},set:function(O){O=O.toString(),p=O}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof qo?y:w1(y,this.objId,this.scope)},set:function(O){O=O.toString(),y=this instanceof qo?O:O.substr(0,1)==="("?Ed(O.substr(1,O.length-2)):Ed(O)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof qo?Ed(y.substr(1,y.length-1)):y},set:function(O){O=O.toString(),y=this instanceof qo?"/"+O:O}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(O){this.V=O}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof qo?m:w1(m,this.objId,this.scope)},set:function(O){O=O.toString(),m=this instanceof qo?O:O.substr(0,1)==="("?Ed(O.substr(1,O.length-2)):Ed(O)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof qo?Ed(m.substr(1,m.length-1)):m},set:function(O){O=O.toString(),m=this instanceof qo?"/"+O:O}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(O){O=!!O,S=O}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(O){C=O}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,1)},set:function(O){O?this.Ff=lo(this.Ff,1):this.Ff=uo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,2)},set:function(O){O?this.Ff=lo(this.Ff,2):this.Ff=uo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,3)},set:function(O){O?this.Ff=lo(this.Ff,3):this.Ff=uo(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(O){if([0,1,2].indexOf(O)===-1)throw new Error('Invalid value "'+O+'" for attribute Q supplied.');T=O}}),Object.defineProperty(this,"textAlign",{get:function(){var O;switch(T){case 0:default:O="left";break;case 1:O="center";break;case 2:O="right"}return O},configurable:!0,enumerable:!0,set:function(O){switch(O){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};zl(uc,Ic);var Kd=function(){uc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $S(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,18)},set:function(n){n?this.Ff=lo(this.Ff,18):this.Ff=uo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=lo(this.Ff,19):this.Ff=uo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,20)},set:function(n){n?(this.Ff=lo(this.Ff,20),e.sort()):this.Ff=uo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,22)},set:function(n){n?this.Ff=lo(this.Ff,22):this.Ff=uo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,23)},set:function(n){n?this.Ff=lo(this.Ff,23):this.Ff=uo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,27)},set:function(n){n?this.Ff=lo(this.Ff,27):this.Ff=uo(this.Ff,27)}}),this.hasAppearanceStream=!1};zl(Kd,uc);var Xd=function(){Kd.call(this),this.fontName="helvetica",this.combo=!1};zl(Xd,Kd);var Jd=function(){Xd.call(this),this.combo=!0};zl(Jd,Xd);var k0=function(){Jd.call(this),this.edit=!0};zl(k0,Jd);var qo=function(){uc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,15)},set:function(n){n?this.Ff=lo(this.Ff,15):this.Ff=uo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,16)},set:function(n){n?this.Ff=lo(this.Ff,16):this.Ff=uo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,17)},set:function(n){n?this.Ff=lo(this.Ff,17):this.Ff=uo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,26)},set:function(n){n?this.Ff=lo(this.Ff,26):this.Ff=uo(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+nd(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ni(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};zl(qo,uc);var M0=function(){qo.call(this),this.pushButton=!0};zl(M0,qo);var Qd=function(){qo.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};zl(Qd,qo);var fv=function(){var t,e;uc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+nd(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ni(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=$n.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zl(fv,uc),Qd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Qd.prototype.createOption=function(t){var e=new fv;return e.Parent=this,e.optionName=t,this.Kids.push(e),t$.call(this.scope,e),e};var A0=function(){qo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=$n.CheckBox.createAppearanceStream()};zl(A0,qo);var Wf=function(){uc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,13)},set:function(e){e?this.Ff=lo(this.Ff,13):this.Ff=uo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,21)},set:function(e){e?this.Ff=lo(this.Ff,21):this.Ff=uo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,23)},set:function(e){e?this.Ff=lo(this.Ff,23):this.Ff=uo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,24)},set:function(e){e?this.Ff=lo(this.Ff,24):this.Ff=uo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,25)},set:function(e){e?this.Ff=lo(this.Ff,25):this.Ff=uo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,26)},set:function(e){e?this.Ff=lo(this.Ff,26):this.Ff=uo(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zl(Wf,uc);var T0=function(){Wf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,14)},set:function(t){t?this.Ff=lo(this.Ff,14):this.Ff=uo(this.Ff,14)}}),this.password=!0};zl(T0,Wf);var $n={CheckBox:{createAppearanceStream:function(){return{N:{On:$n.CheckBox.YesNormal},D:{On:$n.CheckBox.YesPushDown,Off:$n.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=F2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Ar($n.internal.getWidth(t))+" "+Ar($n.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Ar(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Ec(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=$n.internal.getHeight(t),o=$n.internal.getWidth(t),a=F2(t,t.caption);return i.push("1 g"),i.push("0 0 "+Ar(o)+" "+Ar(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ar(o-1)+" "+Ar(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Ar(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ar($n.internal.getWidth(t))+" "+Ar($n.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:$n.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=$n.RadioButton.Circle.YesNormal,e.D[t]=$n.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ec(t);e.scope=t.scope;var n=[],r=$n.internal.getWidth(t)<=$n.internal.getHeight(t)?$n.internal.getWidth(t)/4:$n.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=$n.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Nh($n.internal.getWidth(t)/2)+" "+Nh($n.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=[],r=$n.internal.getWidth(t)<=$n.internal.getHeight(t)?$n.internal.getWidth(t)/4:$n.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*$n.internal.Bezier_C).toFixed(5)),o=Number((r*$n.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Nh($n.internal.getWidth(t)/2)+" "+Nh($n.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Nh($n.internal.getWidth(t)/2)+" "+Nh($n.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=[],r=$n.internal.getWidth(t)<=$n.internal.getHeight(t)?$n.internal.getWidth(t)/4:$n.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*$n.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Nh($n.internal.getWidth(t)/2)+" "+Nh($n.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:$n.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=$n.RadioButton.Cross.YesNormal,e.D[t]=$n.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ec(t);e.scope=t.scope;var n=[],r=$n.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Ar($n.internal.getWidth(t)-2)+" "+Ar($n.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Ar(r.x1.x)+" "+Ar(r.x1.y)+" m"),n.push(Ar(r.x2.x)+" "+Ar(r.x2.y)+" l"),n.push(Ar(r.x4.x)+" "+Ar(r.x4.y)+" m"),n.push(Ar(r.x3.x)+" "+Ar(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=$n.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ar($n.internal.getWidth(t))+" "+Ar($n.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ar($n.internal.getWidth(t)-2)+" "+Ar($n.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Ar(n.x1.x)+" "+Ar(n.x1.y)+" m"),r.push(Ar(n.x2.x)+" "+Ar(n.x2.y)+" l"),r.push(Ar(n.x4.x)+" "+Ar(n.x4.y)+" m"),r.push(Ar(n.x3.x)+" "+Ar(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ec(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ar($n.internal.getWidth(t))+" "+Ar($n.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};$n.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=$n.internal.getWidth(t),n=$n.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},$n.internal.getWidth=function(t){var e=0;return Ni(t)==="object"&&(e=A4(t.Rect[2])),e},$n.internal.getHeight=function(t){var e=0;return Ni(t)==="object"&&(e=A4(t.Rect[3])),e};var t$=Gs.addField=function(t){if(e$(this,t),!(t instanceof uc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Gs.AcroFormChoiceField=Kd,Gs.AcroFormListBox=Xd,Gs.AcroFormComboBox=Jd,Gs.AcroFormEditBox=k0,Gs.AcroFormButton=qo,Gs.AcroFormPushButton=M0,Gs.AcroFormRadioButton=Qd,Gs.AcroFormCheckBox=A0,Gs.AcroFormTextField=Wf,Gs.AcroFormPasswordField=T0,Gs.AcroFormAppearance=$n,Gs.AcroForm={ChoiceField:Kd,ListBox:Xd,ComboBox:Jd,EditBox:k0,Button:qo,PushButton:M0,RadioButton:Qd,CheckBox:A0,TextField:Wf,PasswordField:T0,Appearance:$n},xr.AcroForm={ChoiceField:Kd,ListBox:Xd,ComboBox:Jd,EditBox:k0,Button:qo,PushButton:M0,RadioButton:Qd,CheckBox:A0,TextField:Wf,PasswordField:T0,Appearance:$n};xr.AcroForm;function WS(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function($,H){var le,ae,z,B,X,K=e;if((H=H||e)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(ee($))for(X in n)for(z=n[X],le=0;le<z.length;le+=1){for(B=!0,ae=0;ae<z[le].length;ae+=1)if(z[le][ae]!==void 0&&z[le][ae]!==$[ae]){B=!1;break}if(B===!0){K=X;break}}else for(X in n)for(z=n[X],le=0;le<z.length;le+=1){for(B=!0,ae=0;ae<z[le].length;ae+=1)if(z[le][ae]!==void 0&&z[le][ae]!==$.charCodeAt(ae)){B=!1;break}if(B===!0){K=X;break}}return K===e&&H!==e&&(K=H),K},i=function $(H){for(var le=this.internal.write,ae=this.internal.putStream,z=(0,this.internal.getFilters)();z.indexOf("FlateEncode")!==-1;)z.splice(z.indexOf("FlateEncode"),1);H.objectId=this.internal.newObject();var B=[];if(B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Image"}),B.push({key:"Width",value:H.width}),B.push({key:"Height",value:H.height}),H.colorSpace===T.INDEXED?B.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(H.palette.length/3-1)+" "+("sMask"in H&&H.sMask!==void 0?H.objectId+2:H.objectId+1)+" 0 R]"}):(B.push({key:"ColorSpace",value:"/"+H.colorSpace}),H.colorSpace===T.DEVICE_CMYK&&B.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),B.push({key:"BitsPerComponent",value:H.bitsPerComponent}),"decodeParameters"in H&&H.decodeParameters!==void 0&&B.push({key:"DecodeParms",value:"<<"+H.decodeParameters+">>"}),"transparency"in H&&Array.isArray(H.transparency)){for(var X="",K=0,ye=H.transparency.length;K<ye;K++)X+=H.transparency[K]+" "+H.transparency[K]+" ";B.push({key:"Mask",value:"["+X+"]"})}H.sMask!==void 0&&B.push({key:"SMask",value:H.objectId+1+" 0 R"});var Te=H.filter!==void 0?["/"+H.filter]:void 0;if(ae({data:H.data,additionalKeyValues:B,alreadyAppliedFilters:Te,objectId:H.objectId}),le("endobj"),"sMask"in H&&H.sMask!==void 0){var Ue="/Predictor "+H.predictor+" /Colors 1 /BitsPerComponent "+H.bitsPerComponent+" /Columns "+H.width,J={width:H.width,height:H.height,colorSpace:"DeviceGray",bitsPerComponent:H.bitsPerComponent,decodeParameters:Ue,data:H.sMask};"filter"in H&&(J.filter=H.filter),$.call(this,J)}if(H.colorSpace===T.INDEXED){var ie=this.internal.newObject();ae({data:V(new Uint8Array(H.palette)),objectId:ie}),le("endobj")}},s=function(){var $=this.internal.collections.addImage_images;for(var H in $)i.call(this,$[H])},o=function(){var $,H=this.internal.collections.addImage_images,le=this.internal.write;for(var ae in H)le("/I"+($=H[ae]).index,$.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var $=this.internal.collections.addImage_images;return a.call(this),$},c=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function($){return typeof t["process"+$.toUpperCase()]=="function"},p=function($){return Ni($)==="object"&&$.nodeType===1},y=function($,H){if($.nodeName==="IMG"&&$.hasAttribute("src")){var le=""+$.getAttribute("src");if(le.indexOf("data:image/")===0)return vg(unescape(le).split("base64,").pop());var ae=t.loadFile(le,!0);if(ae!==void 0)return ae}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var z;switch(H){case"PNG":z="image/png";break;case"WEBP":z="image/webp";break;case"JPEG":case"JPG":default:z="image/jpeg"}return vg($.toDataURL(z,1).split("base64,").pop())}},m=function($){var H=this.internal.collections.addImage_images;if(H){for(var le in H)if($===H[le].alias)return H[le]}},C=function($,H,le){return $||H||($=-96,H=-96),$<0&&($=-1*le.width*72/$/this.internal.scaleFactor),H<0&&(H=-1*le.height*72/H/this.internal.scaleFactor),$===0&&($=H*le.width/le.height),H===0&&(H=$*le.height/le.width),[$,H]},S=function($,H,le,ae,z,B){var X=C.call(this,le,ae,z),K=this.internal.getCoordinateString,ye=this.internal.getVerticalCoordinateString,Te=l.call(this);if(le=X[0],ae=X[1],Te[z.index]=z,B){B*=Math.PI/180;var Ue=Math.cos(B),J=Math.sin(B),ie=function(pe){return pe.toFixed(4)},se=[ie(Ue),ie(J),ie(-1*J),ie(Ue),0,0,"cm"]}this.internal.write("q"),B?(this.internal.write([1,"0","0",1,K($),ye(H+ae),"cm"].join(" ")),this.internal.write(se.join(" ")),this.internal.write([K(le),"0","0",K(ae),"0","0","cm"].join(" "))):this.internal.write([K(le),"0","0",K(ae),K($),ye(H+ae),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+z.index+" Do"),this.internal.write("Q")},T=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=t.__addimage__.sHashCode=function($){var H,le,ae=0;if(typeof $=="string")for(le=$.length,H=0;H<le;H++)ae=(ae<<5)-ae+$.charCodeAt(H),ae|=0;else if(ee($))for(le=$.byteLength/2,H=0;H<le;H++)ae=(ae<<5)-ae+$[H],ae|=0;return ae},N=t.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var H=!0;return $.length===0&&(H=!1),$.length%4!=0&&(H=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(H=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(H=!1),H},U=t.__addimage__.extractImageFromDataUrl=function($){var H=($=$||"").split("base64,"),le=null;if(H.length===2){var ae=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(H[0]);Array.isArray(ae)&&(le={mimeType:ae[1],charset:ae[2],data:H[1]})}return le},W=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function($){return W()&&$ instanceof ArrayBuffer};var ee=t.__addimage__.isArrayBufferView=function($){return W()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},te=t.__addimage__.binaryStringToUint8Array=function($){for(var H=$.length,le=new Uint8Array(H),ae=0;ae<H;ae++)le[ae]=$.charCodeAt(ae);return le},V=t.__addimage__.arrayBufferToBinaryString=function($){for(var H="",le=ee($)?$:new Uint8Array($),ae=0;ae<le.length;ae+=8192)H+=String.fromCharCode.apply(null,le.subarray(ae,ae+8192));return H};t.addImage=function(){var $,H,le,ae,z,B,X,K,ye;if(typeof arguments[1]=="number"?(H=e,le=arguments[1],ae=arguments[2],z=arguments[3],B=arguments[4],X=arguments[5],K=arguments[6],ye=arguments[7]):(H=arguments[1],le=arguments[2],ae=arguments[3],z=arguments[4],B=arguments[5],X=arguments[6],K=arguments[7],ye=arguments[8]),Ni($=arguments[0])==="object"&&!p($)&&"imageData"in $){var Te=$;$=Te.imageData,H=Te.format||H||e,le=Te.x||le||0,ae=Te.y||ae||0,z=Te.w||Te.width||z,B=Te.h||Te.height||B,X=Te.alias||X,K=Te.compression||K,ye=Te.rotation||Te.angle||ye}var Ue=this.internal.getFilters();if(K===void 0&&Ue.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(le)||isNaN(ae))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var J=Y.call(this,$,H,X,K);return S.call(this,le,ae,z,B,J,ye),this};var Y=function($,H,le,ae){var z,B,X;if(typeof $=="string"&&r($)===e){$=unescape($);var K=de($,!1);(K!==""||(K=t.loadFile($,!0))!==void 0)&&($=K)}if(p($)&&($=y($,H)),H=r($,H),!f(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(((X=le)==null||X.length===0)&&(le=function(ye){return typeof ye=="string"||ee(ye)?D(ye):ee(ye.data)?D(ye.data):null}($)),(z=m.call(this,le))||(W()&&($ instanceof Uint8Array||H==="RGBA"||(B=$,$=te($))),z=this["process"+H.toUpperCase()]($,c.call(this),le,function(ye){return ye&&typeof ye=="string"&&(ye=ye.toUpperCase()),ye in t.image_compression?ye:O.NONE}(ae),B)),!z)throw new Error("An unknown error occurred whilst processing the image.");return z},de=t.__addimage__.convertBase64ToBinaryString=function($,H){var le;H=typeof H!="boolean"||H;var ae,z="";if(typeof $=="string"){ae=(le=U($))!==null?le.data:$;try{z=vg(ae)}catch(B){if(H)throw N(ae)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+B.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};t.getImageProperties=function($){var H,le,ae="";if(p($)&&($=y($)),typeof $=="string"&&r($)===e&&((ae=de($,!1))===""&&(ae=t.loadFile($)||""),$=ae),le=r($),!f(le))throw new Error("addImage does not support files of type '"+le+"', please ensure that a plugin for '"+le+"' support is added.");if(!W()||$ instanceof Uint8Array||($=te($)),!(H=this["process"+le.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return H.fileType=le,H}})(xr.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};xr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,f=!1,p=0;p<c.length&&!f;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var m=this.internal.pdfEscape,C=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),O=this.internal.getEncryptor(S.objId),D=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(O(r.contents))+")",s+=" /Popup "+T.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(O(D))+") >>",S.content=s;var N=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+N,r.open&&(s+=" /Open true"),s+=" >>",T.content=s,this.internal.write(S.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var U=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(C(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var W=this.annotations._nameMap[r.options.name];r.options.pageNumber=W.page,r.options.top=W.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ee=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ee+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var f=this.splitTextToSize(n,a).length;o=Math.ceil(c*f)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(xr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},a=t.__arabicParser__.isArabicEndLetter=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(S){return o(S)&&i.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(S){var T=0,O=n,D="",N=0;for(T=0;T<S.length;T+=1)O[S.charCodeAt(T)]!==void 0?(N++,typeof(O=O[S.charCodeAt(T)])=="number"&&(D+=String.fromCharCode(O),O=n,N=0),T===S.length-1&&(O=n,D+=S.charAt(T-(N-1)),T-=N-1,N=0)):(O=n,D+=S.charAt(T-N),T-=N,N=0);return D};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(S,T,O){return o(S)?s(S)===!1?-1:!c(S)||!o(T)&&!o(O)||!o(O)&&a(T)||a(S)&&!o(T)||a(S)&&l(T)||a(S)&&a(T)?0:f(S)&&o(T)&&!a(T)&&o(O)&&c(O)?3:a(S)||!o(O)?1:2:-1},m=function(S){var T=0,O=0,D=0,N="",U="",W="",ee=(S=S||"").split("\\s+"),te=[];for(T=0;T<ee.length;T+=1){for(te.push(""),O=0;O<ee[T].length;O+=1)N=ee[T][O],U=ee[T][O-1],W=ee[T][O+1],o(N)?(D=y(N,U,W),te[T]+=D!==-1?String.fromCharCode(e[N.charCodeAt(0)][D]):N):te[T]+=N;te[T]=p(te[T])}return te.join(" ")},C=t.__arabicParser__.processArabic=t.processArabic=function(){var S,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,O=[];if(Array.isArray(T)){var D=0;for(O=[],D=0;D<T.length;D+=1)Array.isArray(T[D])?O.push([m(T[D][0]),T[D][1],T[D][2]]):O.push([m(T[D])]);S=O}else S=m(T);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",C])}(xr.API),xr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(xr.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(S){C=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var f=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,m=0,C=0,S=0,T=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var O=c.maxWidth;O>0?typeof l=="string"?l=this.splitTextToSize(l,O):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,U){return N.concat(T.splitTextToSize(U,O))},[])):l=Array.isArray(l)?l:[l];for(var D=0;D<l.length;D++)m<(S=this.getStringUnitWidth(l[D],{font:p})*f)&&(m=S);return m!==0&&(C=l.length),{w:m/=y,h:Math.max((C*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,f,p,y){if(r.call(this),!f)throw new Error("No data for PDF table.");var m,C,S,T,O=[],D=[],N=[],U={},W={},ee=[],te=[],V=(y=y||{}).autoSize||!1,Y=y.printHeaders!==!1,de=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,$=y.margins||Object.assign({width:this.getPageWidth()},e),H=typeof y.padding=="number"?y.padding:3,le=y.headerBackgroundColor||"#c8c8c8",ae=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=Y,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=de,this.internal.__cell__.padding=H,this.internal.__cell__.headerBackgroundColor=le,this.internal.__cell__.headerTextColor=ae,this.setFontSize(de),p==null)D=O=Object.keys(f[0]),N=O.map(function(){return"left"});else if(Array.isArray(p)&&Ni(p[0])==="object")for(O=p.map(function(Te){return Te.name}),D=p.map(function(Te){return Te.prompt||Te.name||""}),N=p.map(function(Te){return Te.align||"left"}),m=0;m<p.length;m+=1)W[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=O=p,N=O.map(function(){return"left"}));if(V||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<O.length;m+=1){for(U[T=O[m]]=f.map(function(Te){return Te[T]}),this.setFont(void 0,"bold"),ee.push(this.getTextDimensions(D[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=U[T],this.setFont(void 0,"normal"),S=0;S<C.length;S+=1)ee.push(this.getTextDimensions(C[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);W[T]=Math.max.apply(null,ee)+H+H,ee=[]}if(Y){var z={};for(m=0;m<O.length;m+=1)z[O[m]]={},z[O[m]].text=D[m],z[O[m]].align=N[m];var B=a.call(this,z,W);te=O.map(function(Te){return new s(l,c,W[Te],B,z[Te].text,void 0,z[Te].align)}),this.setTableHeaderRow(te),this.printHeaderRow(1,!1)}var X=p.reduce(function(Te,Ue){return Te[Ue.name]=Ue.align,Te},{});for(m=0;m<f.length;m+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:m,data:f[m]},this);var K=a.call(this,f[m],W);for(S=0;S<O.length;S+=1){var ye=f[m][O[S]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:m,col:S,data:ye},this),o.call(this,new s(l,c,W[O[S]],K,ye,m+2,X[O[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(m){var C=l[m];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,c[m]-f-f)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/y+f+f},this).reduce(function(m,C){return Math.max(m,C)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){f=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=l;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(C)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}}(xr.API);var GS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},qS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],j2=WS(qS),YS=[100,200,300,400,500,600,700,800,900],n$=WS(YS);function z2(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return GS[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof j2[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function T4(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var r$={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},O4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function D4(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function i$(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},r$,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=z2(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+D4(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var f=j2[l],p=f<=j2.normal?-1:1,y=T4(c,qS,f,p);if(!y)throw new Error("Could not find a matching font-stretch value for "+l);return y}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var f=GS[l],p=0;p<f.length;++p)if(c[f[p]])return c[f[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var f=n$[l],p=T4(c,YS,f,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+D4(s)+"'.");return o}function I4(t){return t.trimLeft()}function s$(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function o$(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Km,N4,B4,x1=["times"];(function(t){var e,n,r,i,s,o,a,l,c,f=function(J){return J=J||{},this.isStrokeTransparent=J.isStrokeTransparent||!1,this.strokeOpacity=J.strokeOpacity||1,this.strokeStyle=J.strokeStyle||"#000000",this.fillStyle=J.fillStyle||"#000000",this.isFillTransparent=J.isFillTransparent||!1,this.fillOpacity=J.fillOpacity||1,this.font=J.font||"10px sans-serif",this.textBaseline=J.textBaseline||"alphabetic",this.textAlign=J.textAlign||"left",this.lineWidth=J.lineWidth||1,this.lineJoin=J.lineJoin||"miter",this.lineCap=J.lineCap||"butt",this.path=J.path||[],this.transform=J.transform!==void 0?J.transform.clone():new l,this.globalCompositeOperation=J.globalCompositeOperation||"normal",this.globalAlpha=J.globalAlpha||1,this.clip_path=J.clip_path||[],this.currentPoint=J.currentPoint||new o,this.miterLimit=J.miterLimit||10,this.lastPoint=J.lastPoint||new o,this.lineDashOffset=J.lineDashOffset||0,this.lineDash=J.lineDash||[],this.margin=J.margin||[0,0,0,0],this.prevPageLastElemOffset=J.prevPageLastElemOffset||0,this.ignoreClearRect=typeof J.ignoreClearRect!="boolean"||J.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new f}]);var p=function(J){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ie=J;Object.defineProperty(this,"pdf",{get:function(){return ie}});var se=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return se},set:function(ce){se=!!ce}});var pe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return pe},set:function(ce){pe=!!ce}});var we=0;Object.defineProperty(this,"posX",{get:function(){return we},set:function(ce){isNaN(ce)||(we=ce)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(ce){isNaN(ce)||(be=ce)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ce){var Q;typeof ce=="number"?Q=[ce,ce,ce,ce]:((Q=new Array(4))[0]=ce[0],Q[1]=ce.length>=2?ce[1]:Q[0],Q[2]=ce.length>=3?ce[2]:Q[0],Q[3]=ce.length>=4?ce[3]:Q[1]),c.margin=Q}});var Ae=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ae},set:function(ce){Ae=ce}});var Ee=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ee},set:function(ce){Ee=ce}});var Je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Je},set:function(ce){Je=ce}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ce){ce instanceof f&&(c=ce)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ce){c.path=ce}});var gt=[];Object.defineProperty(this,"ctxStack",{get:function(){return gt},set:function(ce){gt=ce}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ce){var Q;Q=y(ce),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ce){var Q=y(ce);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ce){["butt","round","square"].indexOf(ce)!==-1&&(this.ctx.lineCap=ce,this.pdf.setLineCap(ce))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ce){isNaN(ce)||(this.ctx.lineWidth=ce,this.pdf.setLineWidth(ce))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ce){["bevel","round","miter"].indexOf(ce)!==-1&&(this.ctx.lineJoin=ce,this.pdf.setLineJoin(ce))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ce){isNaN(ce)||(this.ctx.miterLimit=ce,this.pdf.setMiterLimit(ce))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ce){this.ctx.textBaseline=ce}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ce){["right","end","center","left","start"].indexOf(ce)!==-1&&(this.ctx.textAlign=ce)}});var _t=null;function ue(ce,Q){if(_t===null){var Pe=function(Ve){var Qe=[];return Object.keys(Ve).forEach(function(ot){Ve[ot].forEach(function(at){var pt=null;switch(at){case"bold":pt={family:ot,weight:"bold"};break;case"italic":pt={family:ot,style:"italic"};break;case"bolditalic":pt={family:ot,weight:"bold",style:"italic"};break;case"":case"normal":pt={family:ot}}pt!==null&&(pt.ref={name:ot,style:at},Qe.push(pt))})}),Qe}(ce.getFontList());_t=function(Ve){for(var Qe={},ot=0;ot<Ve.length;++ot){var at=z2(Ve[ot]),pt=at.family,Ft=at.stretch,Bt=at.style,Zt=at.weight;Qe[pt]=Qe[pt]||{},Qe[pt][Ft]=Qe[pt][Ft]||{},Qe[pt][Ft][Bt]=Qe[pt][Ft][Bt]||{},Qe[pt][Ft][Bt][Zt]=at}return Qe}(Pe.concat(Q))}return _t}var oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return oe},set:function(ce){_t=null,oe=ce}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ce){var Q;if(this.ctx.font=ce,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ce))!==null){var Pe=Q[1],Ve=(Q[2],Q[3]),Qe=Q[4],ot=(Q[5],Q[6]),at=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Qe)[2];Qe=Math.floor(at==="px"?parseFloat(Qe)*this.pdf.internal.scaleFactor:at==="em"?parseFloat(Qe)*this.pdf.getFontSize():parseFloat(Qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Qe);var pt=function(qe){var it,Ze,Ut=[],Yt=qe.trim();if(Yt==="")return x1;if(Yt in O4)return[O4[Yt]];for(;Yt!=="";){switch(Ze=null,it=(Yt=I4(Yt)).charAt(0)){case'"':case"'":Ze=s$(Yt.substring(1),it);break;default:Ze=o$(Yt)}if(Ze===null||(Ut.push(Ze[0]),(Yt=I4(Ze[1]))!==""&&Yt.charAt(0)!==","))return x1;Yt=Yt.replace(/^,/,"")}return Ut}(ot);if(this.fontFaces){var Ft=i$(ue(this.pdf,this.fontFaces),pt.map(function(qe){return{family:qe,stretch:"normal",weight:Ve,style:Pe}}));this.pdf.setFont(Ft.ref.name,Ft.ref.style)}else{var Bt="";(Ve==="bold"||parseInt(Ve,10)>=700||Pe==="bold")&&(Bt="bold"),Pe==="italic"&&(Bt+="italic"),Bt.length===0&&(Bt="normal");for(var Zt="",ln={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},un=0;un<pt.length;un++){if(this.pdf.internal.getFont(pt[un],Bt,{noFallback:!0,disableWarning:!0})!==void 0){Zt=pt[un];break}if(Bt==="bolditalic"&&this.pdf.internal.getFont(pt[un],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Zt=pt[un],Bt="bold";else if(this.pdf.internal.getFont(pt[un],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Zt=pt[un],Bt="normal";break}}if(Zt===""){for(var Sn=0;Sn<pt.length;Sn++)if(ln[pt[Sn]]){Zt=ln[pt[Sn]];break}}Zt=Zt===""?"Times":Zt,this.pdf.setFont(Zt,Bt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ce){this.ctx.globalCompositeOperation=ce}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ce){this.ctx.globalAlpha=ce}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ce){this.ctx.lineDashOffset=ce,Ue.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ce){this.ctx.lineDash=ce,Ue.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ce){this.ctx.ignoreClearRect=!!ce}})};p.prototype.setLineDash=function(J){this.lineDash=J},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){U.call(this,"fill",!1)},p.prototype.stroke=function(){U.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(J,ie){if(isNaN(J)||isNaN(ie))throw Wi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var se=this.ctx.transform.applyToPoint(new o(J,ie));this.path.push({type:"mt",x:se.x,y:se.y}),this.ctx.lastPoint=new o(J,ie)},p.prototype.closePath=function(){var J=new o(0,0),ie=0;for(ie=this.path.length-1;ie!==-1;ie--)if(this.path[ie].type==="begin"&&Ni(this.path[ie+1])==="object"&&typeof this.path[ie+1].x=="number"){J=new o(this.path[ie+1].x,this.path[ie+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(J.x,J.y)},p.prototype.lineTo=function(J,ie){if(isNaN(J)||isNaN(ie))throw Wi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var se=this.ctx.transform.applyToPoint(new o(J,ie));this.path.push({type:"lt",x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},p.prototype.quadraticCurveTo=function(J,ie,se,pe){if(isNaN(se)||isNaN(pe)||isNaN(J)||isNaN(ie))throw Wi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var we=this.ctx.transform.applyToPoint(new o(se,pe)),be=this.ctx.transform.applyToPoint(new o(J,ie));this.path.push({type:"qct",x1:be.x,y1:be.y,x:we.x,y:we.y}),this.ctx.lastPoint=new o(we.x,we.y)},p.prototype.bezierCurveTo=function(J,ie,se,pe,we,be){if(isNaN(we)||isNaN(be)||isNaN(J)||isNaN(ie)||isNaN(se)||isNaN(pe))throw Wi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ae=this.ctx.transform.applyToPoint(new o(we,be)),Ee=this.ctx.transform.applyToPoint(new o(J,ie)),Je=this.ctx.transform.applyToPoint(new o(se,pe));this.path.push({type:"bct",x1:Ee.x,y1:Ee.y,x2:Je.x,y2:Je.y,x:Ae.x,y:Ae.y}),this.ctx.lastPoint=new o(Ae.x,Ae.y)},p.prototype.arc=function(J,ie,se,pe,we,be){if(isNaN(J)||isNaN(ie)||isNaN(se)||isNaN(pe)||isNaN(we))throw Wi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var Ae=this.ctx.transform.applyToPoint(new o(J,ie));J=Ae.x,ie=Ae.y;var Ee=this.ctx.transform.applyToPoint(new o(0,se)),Je=this.ctx.transform.applyToPoint(new o(0,0));se=Math.sqrt(Math.pow(Ee.x-Je.x,2)+Math.pow(Ee.y-Je.y,2))}Math.abs(we-pe)>=2*Math.PI&&(pe=0,we=2*Math.PI),this.path.push({type:"arc",x:J,y:ie,radius:se,startAngle:pe,endAngle:we,counterclockwise:be})},p.prototype.arcTo=function(J,ie,se,pe,we){throw new Error("arcTo not implemented.")},p.prototype.rect=function(J,ie,se,pe){if(isNaN(J)||isNaN(ie)||isNaN(se)||isNaN(pe))throw Wi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(J,ie),this.lineTo(J+se,ie),this.lineTo(J+se,ie+pe),this.lineTo(J,ie+pe),this.lineTo(J,ie),this.lineTo(J+se,ie),this.lineTo(J,ie)},p.prototype.fillRect=function(J,ie,se,pe){if(isNaN(J)||isNaN(ie)||isNaN(se)||isNaN(pe))throw Wi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var we={};this.lineCap!=="butt"&&(we.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(we.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(J,ie,se,pe),this.fill(),we.hasOwnProperty("lineCap")&&(this.lineCap=we.lineCap),we.hasOwnProperty("lineJoin")&&(this.lineJoin=we.lineJoin)}},p.prototype.strokeRect=function(J,ie,se,pe){if(isNaN(J)||isNaN(ie)||isNaN(se)||isNaN(pe))throw Wi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(J,ie,se,pe),this.stroke())},p.prototype.clearRect=function(J,ie,se,pe){if(isNaN(J)||isNaN(ie)||isNaN(se)||isNaN(pe))throw Wi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(J,ie,se,pe))},p.prototype.save=function(J){J=typeof J!="boolean"||J;for(var ie=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("q");if(this.pdf.setPage(ie),J){this.ctx.fontSize=this.pdf.internal.getFontSize();var pe=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=pe}},p.prototype.restore=function(J){J=typeof J!="boolean"||J;for(var ie=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("Q");this.pdf.setPage(ie),J&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(J){var ie,se,pe,we;if(J.isCanvasGradient===!0&&(J=J.getColor()),!J)return{r:0,g:0,b:0,a:0,style:J};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(J))ie=0,se=0,pe=0,we=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(J);if(be!==null)ie=parseInt(be[1]),se=parseInt(be[2]),pe=parseInt(be[3]),we=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(J))!==null)ie=parseInt(be[1]),se=parseInt(be[2]),pe=parseInt(be[3]),we=parseFloat(be[4]);else{if(we=1,typeof J=="string"&&J.charAt(0)!=="#"){var Ae=new jS(J);J=Ae.ok?Ae.toHex():"#000000"}J.length===4?(ie=J.substring(1,2),ie+=ie,se=J.substring(2,3),se+=se,pe=J.substring(3,4),pe+=pe):(ie=J.substring(1,3),se=J.substring(3,5),pe=J.substring(5,7)),ie=parseInt(ie,16),se=parseInt(se,16),pe=parseInt(pe,16)}}return{r:ie,g:se,b:pe,a:we,style:J}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(J,ie,se,pe){if(isNaN(ie)||isNaN(se)||typeof J!="string")throw Wi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(pe=isNaN(pe)?void 0:pe,!m.call(this)){var we=K(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;H.call(this,{text:J,x:ie,y:se,scale:be,angle:we,align:this.textAlign,maxWidth:pe})}},p.prototype.strokeText=function(J,ie,se,pe){if(isNaN(ie)||isNaN(se)||typeof J!="string")throw Wi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){pe=isNaN(pe)?void 0:pe;var we=K(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;H.call(this,{text:J,x:ie,y:se,scale:be,renderingMode:"stroke",angle:we,align:this.textAlign,maxWidth:pe})}},p.prototype.measureText=function(J){if(typeof J!="string")throw Wi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ie=this.pdf,se=this.pdf.internal.scaleFactor,pe=ie.internal.getFontSize(),we=ie.getStringUnitWidth(J)*pe/ie.internal.scaleFactor,be=function(Ae){var Ee=(Ae=Ae||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ee}}),this};return new be({width:we*=Math.round(96*se/72*1e4)/1e4})},p.prototype.scale=function(J,ie){if(isNaN(J)||isNaN(ie))throw Wi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var se=new l(J,0,0,ie,0,0);this.ctx.transform=this.ctx.transform.multiply(se)},p.prototype.rotate=function(J){if(isNaN(J))throw Wi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ie=new l(Math.cos(J),Math.sin(J),-Math.sin(J),Math.cos(J),0,0);this.ctx.transform=this.ctx.transform.multiply(ie)},p.prototype.translate=function(J,ie){if(isNaN(J)||isNaN(ie))throw Wi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var se=new l(1,0,0,1,J,ie);this.ctx.transform=this.ctx.transform.multiply(se)},p.prototype.transform=function(J,ie,se,pe,we,be){if(isNaN(J)||isNaN(ie)||isNaN(se)||isNaN(pe)||isNaN(we)||isNaN(be))throw Wi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ae=new l(J,ie,se,pe,we,be);this.ctx.transform=this.ctx.transform.multiply(Ae)},p.prototype.setTransform=function(J,ie,se,pe,we,be){J=isNaN(J)?1:J,ie=isNaN(ie)?0:ie,se=isNaN(se)?0:se,pe=isNaN(pe)?1:pe,we=isNaN(we)?0:we,be=isNaN(be)?0:be,this.ctx.transform=new l(J,ie,se,pe,we,be)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(J,ie,se,pe,we,be,Ae,Ee,Je){var gt=this.pdf.getImageProperties(J),_t=1,ue=1,oe=1,ce=1;pe!==void 0&&Ee!==void 0&&(oe=Ee/pe,ce=Je/we,_t=gt.width/pe*Ee/pe,ue=gt.height/we*Je/we),be===void 0&&(be=ie,Ae=se,ie=0,se=0),pe!==void 0&&Ee===void 0&&(Ee=pe,Je=we),pe===void 0&&Ee===void 0&&(Ee=gt.width,Je=gt.height);for(var Q,Pe=this.ctx.transform.decompose(),Ve=K(Pe.rotate.shx),Qe=new l,ot=(Qe=(Qe=(Qe=Qe.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale)).applyToRectangle(new a(be-ie*oe,Ae-se*ce,pe*_t,we*ue)),at=T.call(this,ot),pt=[],Ft=0;Ft<at.length;Ft+=1)pt.indexOf(at[Ft])===-1&&pt.push(at[Ft]);if(N(pt),this.autoPaging)for(var Bt=pt[0],Zt=pt[pt.length-1],ln=Bt;ln<Zt+1;ln++){this.pdf.setPage(ln);var un=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Sn=ln===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=ln===1?0:qe+(ln-2)*it;if(this.ctx.clip_path.length!==0){var Ut=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Q,this.posX+this.margin[3],-Ze+Sn+this.ctx.prevPageLastElemOffset),W.call(this,"fill",!0),this.path=Ut}var Yt=JSON.parse(JSON.stringify(ot));Yt=D([Yt],this.posX+this.margin[3],-Ze+Sn+this.ctx.prevPageLastElemOffset)[0];var Ln=(ln>Bt||ln<Zt)&&S.call(this);Ln&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],un,it,null).clip().discardPath()),this.pdf.addImage(J,"JPEG",Yt.x,Yt.y,Yt.w,Yt.h,null,null,Ve),Ln&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(J,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,Ve)};var T=function(J,ie,se){var pe=[];ie=ie||this.pdf.internal.pageSize.width,se=se||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var we=this.posY+this.ctx.prevPageLastElemOffset;switch(J.type){default:case"mt":case"lt":pe.push(Math.floor((J.y+we)/se)+1);break;case"arc":pe.push(Math.floor((J.y+we-J.radius)/se)+1),pe.push(Math.floor((J.y+we+J.radius)/se)+1);break;case"qct":var be=ye(this.ctx.lastPoint.x,this.ctx.lastPoint.y,J.x1,J.y1,J.x,J.y);pe.push(Math.floor((be.y+we)/se)+1),pe.push(Math.floor((be.y+be.h+we)/se)+1);break;case"bct":var Ae=Te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,J.x1,J.y1,J.x2,J.y2,J.x,J.y);pe.push(Math.floor((Ae.y+we)/se)+1),pe.push(Math.floor((Ae.y+Ae.h+we)/se)+1);break;case"rect":pe.push(Math.floor((J.y+we)/se)+1),pe.push(Math.floor((J.y+J.h+we)/se)+1)}for(var Ee=0;Ee<pe.length;Ee+=1)for(;this.pdf.internal.getNumberOfPages()<pe[Ee];)O.call(this);return pe},O=function(){var J=this.fillStyle,ie=this.strokeStyle,se=this.font,pe=this.lineCap,we=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=J,this.strokeStyle=ie,this.font=se,this.lineCap=pe,this.lineWidth=we,this.lineJoin=be},D=function(J,ie,se){for(var pe=0;pe<J.length;pe++)switch(J[pe].type){case"bct":J[pe].x2+=ie,J[pe].y2+=se;case"qct":J[pe].x1+=ie,J[pe].y1+=se;case"mt":case"lt":case"arc":default:J[pe].x+=ie,J[pe].y+=se}return J},N=function(J){return J.sort(function(ie,se){return ie-se})},U=function(J,ie){for(var se,pe,we=this.fillStyle,be=this.strokeStyle,Ae=this.lineCap,Ee=this.lineWidth,Je=Math.abs(Ee*this.ctx.transform.scaleX),gt=this.lineJoin,_t=JSON.parse(JSON.stringify(this.path)),ue=JSON.parse(JSON.stringify(this.path)),oe=[],ce=0;ce<ue.length;ce++)if(ue[ce].x!==void 0)for(var Q=T.call(this,ue[ce]),Pe=0;Pe<Q.length;Pe+=1)oe.indexOf(Q[Pe])===-1&&oe.push(Q[Pe]);for(var Ve=0;Ve<oe.length;Ve++)for(;this.pdf.internal.getNumberOfPages()<oe[Ve];)O.call(this);if(N(oe),this.autoPaging)for(var Qe=oe[0],ot=oe[oe.length-1],at=Qe;at<ot+1;at++){this.pdf.setPage(at),this.fillStyle=we,this.strokeStyle=be,this.lineCap=Ae,this.lineWidth=Je,this.lineJoin=gt;var pt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=at===1?this.posY+this.margin[0]:this.margin[0],Bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ln=at===1?0:Bt+(at-2)*Zt;if(this.ctx.clip_path.length!==0){var un=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(se,this.posX+this.margin[3],-ln+Ft+this.ctx.prevPageLastElemOffset),W.call(this,J,!0),this.path=un}if(pe=JSON.parse(JSON.stringify(_t)),this.path=D(pe,this.posX+this.margin[3],-ln+Ft+this.ctx.prevPageLastElemOffset),ie===!1||at===0){var Sn=(at>Qe||at<ot)&&S.call(this);Sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,Zt,null).clip().discardPath()),W.call(this,J,ie),Sn&&this.pdf.restoreGraphicsState()}this.lineWidth=Ee}else this.lineWidth=Je,W.call(this,J,ie),this.lineWidth=Ee;this.path=_t},W=function(J,ie){if((J!=="stroke"||ie||!C.call(this))&&(J==="stroke"||ie||!m.call(this))){for(var se,pe,we=[],be=this.path,Ae=0;Ae<be.length;Ae++){var Ee=be[Ae];switch(Ee.type){case"begin":we.push({begin:!0});break;case"close":we.push({close:!0});break;case"mt":we.push({start:Ee,deltas:[],abs:[]});break;case"lt":var Je=we.length;if(be[Ae-1]&&!isNaN(be[Ae-1].x)&&(se=[Ee.x-be[Ae-1].x,Ee.y-be[Ae-1].y],Je>0)){for(;Je>=0;Je--)if(we[Je-1].close!==!0&&we[Je-1].begin!==!0){we[Je-1].deltas.push(se),we[Je-1].abs.push(Ee);break}}break;case"bct":se=[Ee.x1-be[Ae-1].x,Ee.y1-be[Ae-1].y,Ee.x2-be[Ae-1].x,Ee.y2-be[Ae-1].y,Ee.x-be[Ae-1].x,Ee.y-be[Ae-1].y],we[we.length-1].deltas.push(se);break;case"qct":var gt=be[Ae-1].x+2/3*(Ee.x1-be[Ae-1].x),_t=be[Ae-1].y+2/3*(Ee.y1-be[Ae-1].y),ue=Ee.x+2/3*(Ee.x1-Ee.x),oe=Ee.y+2/3*(Ee.y1-Ee.y),ce=Ee.x,Q=Ee.y;se=[gt-be[Ae-1].x,_t-be[Ae-1].y,ue-be[Ae-1].x,oe-be[Ae-1].y,ce-be[Ae-1].x,Q-be[Ae-1].y],we[we.length-1].deltas.push(se);break;case"arc":we.push({deltas:[],abs:[],arc:!0}),Array.isArray(we[we.length-1].abs)&&we[we.length-1].abs.push(Ee)}}pe=ie?null:J==="stroke"?"stroke":"fill";for(var Pe=!1,Ve=0;Ve<we.length;Ve++)if(we[Ve].arc)for(var Qe=we[Ve].abs,ot=0;ot<Qe.length;ot++){var at=Qe[ot];at.type==="arc"?V.call(this,at.x,at.y,at.radius,at.startAngle,at.endAngle,at.counterclockwise,void 0,ie,!Pe):le.call(this,at.x,at.y),Pe=!0}else if(we[Ve].close===!0)this.pdf.internal.out("h"),Pe=!1;else if(we[Ve].begin!==!0){var pt=we[Ve].start.x,Ft=we[Ve].start.y;ae.call(this,we[Ve].deltas,pt,Ft),Pe=!0}pe&&Y.call(this,pe),ie&&de.call(this)}},ee=function(J){var ie=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,se=ie*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return J-se;case"top":return J+ie-se;case"hanging":return J+ie-2*se;case"middle":return J+ie/2-se;case"ideographic":return J;case"alphabetic":default:return J}},te=function(J){return J+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var J=function(){};return J.colorStops=[],J.addColorStop=function(ie,se){this.colorStops.push([ie,se])},J.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},J.isCanvasGradient=!0,J},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var V=function(J,ie,se,pe,we,be,Ae,Ee,Je){for(var gt=B.call(this,se,pe,we,be),_t=0;_t<gt.length;_t++){var ue=gt[_t];_t===0&&(Je?$.call(this,ue.x1+J,ue.y1+ie):le.call(this,ue.x1+J,ue.y1+ie)),z.call(this,J,ie,ue.x2,ue.y2,ue.x3,ue.y3,ue.x4,ue.y4)}Ee?de.call(this):Y.call(this,Ae)},Y=function(J){switch(J){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},de=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(J,ie){this.pdf.internal.out(n(J)+" "+r(ie)+" m")},H=function(J){var ie;switch(J.align){case"right":case"end":ie="right";break;case"center":ie="center";break;case"left":case"start":default:ie="left"}var se=this.pdf.getTextDimensions(J.text),pe=ee.call(this,J.y),we=te.call(this,pe)-se.h,be=this.ctx.transform.applyToPoint(new o(J.x,pe)),Ae=this.ctx.transform.decompose(),Ee=new l;Ee=(Ee=(Ee=Ee.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale);for(var Je,gt,_t,ue=this.ctx.transform.applyToRectangle(new a(J.x,pe,se.w,se.h)),oe=Ee.applyToRectangle(new a(J.x,we,se.w,se.h)),ce=T.call(this,oe),Q=[],Pe=0;Pe<ce.length;Pe+=1)Q.indexOf(ce[Pe])===-1&&Q.push(ce[Pe]);if(N(Q),this.autoPaging)for(var Ve=Q[0],Qe=Q[Q.length-1],ot=Ve;ot<Qe+1;ot++){this.pdf.setPage(ot);var at=ot===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[2],Bt=Ft-this.margin[0],Zt=this.pdf.internal.pageSize.width-this.margin[1],ln=Zt-this.margin[3],un=ot===1?0:pt+(ot-2)*Bt;if(this.ctx.clip_path.length!==0){var Sn=this.path;Je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Je,this.posX+this.margin[3],-1*un+at),W.call(this,"fill",!0),this.path=Sn}var qe=D([JSON.parse(JSON.stringify(oe))],this.posX+this.margin[3],-un+at+this.ctx.prevPageLastElemOffset)[0];J.scale>=.01&&(gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(gt*J.scale),_t=this.lineWidth,this.lineWidth=_t*J.scale);var it=this.autoPaging!=="text";if(it||qe.y+qe.h<=Ft){if(it||qe.y>=at&&qe.x<=Zt){var Ze=it?J.text:this.pdf.splitTextToSize(J.text,J.maxWidth||Zt-qe.x)[0],Ut=D([JSON.parse(JSON.stringify(ue))],this.posX+this.margin[3],-un+at+this.ctx.prevPageLastElemOffset)[0],Yt=it&&(ot>Ve||ot<Qe)&&S.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ln,Bt,null).clip().discardPath()),this.pdf.text(Ze,Ut.x,Ut.y,{angle:J.angle,align:ie,renderingMode:J.renderingMode}),Yt&&this.pdf.restoreGraphicsState()}}else qe.y<Ft&&(this.ctx.prevPageLastElemOffset+=Ft-qe.y);J.scale>=.01&&(this.pdf.setFontSize(gt),this.lineWidth=_t)}else J.scale>=.01&&(gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(gt*J.scale),_t=this.lineWidth,this.lineWidth=_t*J.scale),this.pdf.text(J.text,be.x+this.posX,be.y+this.posY,{angle:J.angle,align:ie,renderingMode:J.renderingMode,maxWidth:J.maxWidth}),J.scale>=.01&&(this.pdf.setFontSize(gt),this.lineWidth=_t)},le=function(J,ie,se,pe){se=se||0,pe=pe||0,this.pdf.internal.out(n(J+se)+" "+r(ie+pe)+" l")},ae=function(J,ie,se){return this.pdf.lines(J,ie,se,null,null)},z=function(J,ie,se,pe,we,be,Ae,Ee){this.pdf.internal.out([e(i(se+J)),e(s(pe+ie)),e(i(we+J)),e(s(be+ie)),e(i(Ae+J)),e(s(Ee+ie)),"c"].join(" "))},B=function(J,ie,se,pe){for(var we=2*Math.PI,be=Math.PI/2;ie>se;)ie-=we;var Ae=Math.abs(se-ie);Ae<we&&pe&&(Ae=we-Ae);for(var Ee=[],Je=pe?-1:1,gt=ie;Ae>1e-5;){var _t=gt+Je*Math.min(Ae,be);Ee.push(X.call(this,J,gt,_t)),Ae-=Math.abs(_t-gt),gt=_t}return Ee},X=function(J,ie,se){var pe=(se-ie)/2,we=J*Math.cos(pe),be=J*Math.sin(pe),Ae=we,Ee=-be,Je=Ae*Ae+Ee*Ee,gt=Je+Ae*we+Ee*be,_t=4/3*(Math.sqrt(2*Je*gt)-gt)/(Ae*be-Ee*we),ue=Ae-_t*Ee,oe=Ee+_t*Ae,ce=ue,Q=-oe,Pe=pe+ie,Ve=Math.cos(Pe),Qe=Math.sin(Pe);return{x1:J*Math.cos(ie),y1:J*Math.sin(ie),x2:ue*Ve-oe*Qe,y2:ue*Qe+oe*Ve,x3:ce*Ve-Q*Qe,y3:ce*Qe+Q*Ve,x4:J*Math.cos(se),y4:J*Math.sin(se)}},K=function(J){return 180*J/Math.PI},ye=function(J,ie,se,pe,we,be){var Ae=J+.5*(se-J),Ee=ie+.5*(pe-ie),Je=we+.5*(se-we),gt=be+.5*(pe-be),_t=Math.min(J,we,Ae,Je),ue=Math.max(J,we,Ae,Je),oe=Math.min(ie,be,Ee,gt),ce=Math.max(ie,be,Ee,gt);return new a(_t,oe,ue-_t,ce-oe)},Te=function(J,ie,se,pe,we,be,Ae,Ee){var Je,gt,_t,ue,oe,ce,Q,Pe,Ve,Qe,ot,at,pt,Ft,Bt=se-J,Zt=pe-ie,ln=we-se,un=be-pe,Sn=Ae-we,qe=Ee-be;for(gt=0;gt<41;gt++)Ve=(Q=(_t=J+(Je=gt/40)*Bt)+Je*((oe=se+Je*ln)-_t))+Je*(oe+Je*(we+Je*Sn-oe)-Q),Qe=(Pe=(ue=ie+Je*Zt)+Je*((ce=pe+Je*un)-ue))+Je*(ce+Je*(be+Je*qe-ce)-Pe),gt==0?(ot=Ve,at=Qe,pt=Ve,Ft=Qe):(ot=Math.min(ot,Ve),at=Math.min(at,Qe),pt=Math.max(pt,Ve),Ft=Math.max(Ft,Qe));return new a(Math.round(ot),Math.round(at),Math.round(pt-ot),Math.round(Ft-at))},Ue=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var J,ie,se=(J=this.ctx.lineDash,ie=this.ctx.lineDashOffset,JSON.stringify({lineDash:J,lineDashOffset:ie}));this.prevLineDash!==se&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=se)}}})(xr.API),function(t){var e=function(s){var o,a,l,c,f,p,y,m,C,S;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(f=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(f=((f=((f=((f=(f-(S=f%85))/85)-(C=f%85))/85)-(m=f%85))/85)-(y=f%85))/85)%85,a.push(p+33,y+33,m+33,C+33,S+33)):a.push(122);return function(T,O){for(var D=O;D>0;D--)T.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,f,p=String,y="length",m=255,C="charCodeAt",S="slice",T="replace";for(s[S](-2),s=s[S](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),l=[],c=0,f=(s+=o="uuuuu"[S](s[y]%5||5))[y];f>c;c+=5)a=52200625*(s[C](c)-33)+614125*(s[C](c+1)-33)+7225*(s[C](c+2)-33)+85*(s[C](c+3)-33)+(s[C](c+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(O,D){for(var N=D;N>0;N--)O.pop()}(l,o[y]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=I2(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(xr.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,f){var p=new XMLHttpRequest,y=0,m=function(C){var S=C.length,T=[],O=String.fromCharCode;for(y=0;y<S;y+=1)T.push(O(255&C.charCodeAt(y)));return T.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?f(m(this.responseText)):f(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(xr.API),function(t){function e(){return(Lr.html2canvas?Promise.resolve(Lr.html2canvas):ph(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Lr.DOMPurify?Promise.resolve(Lr.DOMPurify):ph(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Ni(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,f){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),y=c.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(l(y,f));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var y=0;y<c.length;++y){var m=c[y],C=m.src.find(function(S){return S.format==="truetype"});C&&l.addFont(C.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||xr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,f){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,f).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=l.call(c,o,a);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,xr.getPageSize=function(o,a,l){if(Ni(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+l).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+a}var m,C=0,S=0;if(y.hasOwnProperty(p))C=y[p][1]/f,S=y[p][0]/f;else try{C=l[1],S=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",S>C&&(m=S,S=C,C=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",C>S&&(m=S,S=C,C=m)}return{width:S,height:C,unit:a,k:f,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(z2):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(xr.API),xr.API.addJS=function(t){return B4=t,this.internal.events.subscribe("postPutResources",function(){Km=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Km+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),N4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+B4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Km!==void 0&&N4!==void 0&&this.internal.out("/Names <</JavaScript "+Km+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,f=[];for(s=0;s<c;s++){var p=n.internal.newObject();f.push(p);var y=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<f.length;s++)n.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(xr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var y,m=256*p.charCodeAt(4)+p.charCodeAt(5),C=p.length,S={width:0,height:0,numcomponents:1},T=4;T<C;T+=2){if(T+=m,e.indexOf(p.charCodeAt(T+1))!==-1){y=256*p.charCodeAt(T+5)+p.charCodeAt(T+6),S={width:256*p.charCodeAt(T+7)+p.charCodeAt(T+8),height:y,numcomponents:p.charCodeAt(T+9)};break}m=256*p.charCodeAt(T+2)+p.charCodeAt(T+3)}return S}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}f={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return f}}(xr.API);var Pd,Xm,R4,F4,j4,a$=function(){var t,e,n;function r(s){var o,a,l,c,f,p,y,m,C,S,T,O,D,N;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),C=(function(){var U,W;for(W=[],U=0;U<4;++U)W.push(String.fromCharCode(this.data[this.pos++]));return W}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*f/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,O=0;0<=o?O<o:O>o;0<=o?++O:--O)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((S=l-this.transparency.indexed.length)>0)for(D=0;0<=S?D<S:D>S;0<=S?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":y=(T=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,T.slice(0,y)),this.text[m]=String.fromCharCode.apply(String,T.slice(y+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(p,y,m,C){var S,T,O,D,N,U,W,ee,te,V,Y,de,$,H,le,ae,z,B,X,K,ye,Te=Math.ceil((c.width-p)/m),Ue=Math.ceil((c.height-y)/C),J=c.width==Te&&c.height==Ue;for(H=o*Te,de=J?a:new Uint8Array(H*Ue),U=s.length,$=0,T=0;$<Ue&&l<U;){switch(s[l++]){case 0:for(D=z=0;z<H;D=z+=1)de[T++]=s[l++];break;case 1:for(D=B=0;B<H;D=B+=1)S=s[l++],N=D<o?0:de[T-o],de[T++]=(S+N)%256;break;case 2:for(D=X=0;X<H;D=X+=1)S=s[l++],O=(D-D%o)/o,le=$&&de[($-1)*H+O*o+D%o],de[T++]=(le+S)%256;break;case 3:for(D=K=0;K<H;D=K+=1)S=s[l++],O=(D-D%o)/o,N=D<o?0:de[T-o],le=$&&de[($-1)*H+O*o+D%o],de[T++]=(S+Math.floor((N+le)/2))%256;break;case 4:for(D=ye=0;ye<H;D=ye+=1)S=s[l++],O=(D-D%o)/o,N=D<o?0:de[T-o],$===0?le=ae=0:(le=de[($-1)*H+O*o+D%o],ae=O&&de[($-1)*H+(O-1)*o+D%o]),W=N+le-ae,ee=Math.abs(W-N),V=Math.abs(W-le),Y=Math.abs(W-ae),te=ee<=V&&ee<=Y?N:V<=Y?le:ae,de[T++]=(S+te)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!J){var ie=((y+$*C)*c.width+p)*o,se=$*H;for(D=0;D<Te;D+=1){for(var pe=0;pe<o;pe+=1)a[ie++]=de[se++];ie+=(m-1)*o}}$++}}return s=jU(s),c.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,f,p,y,m;for(a=this.palette,f=this.transparency.indexed||[],c=new Uint8Array((f.length||0)+a.length),l=0,s=0,o=p=0,y=a.length;p<y;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(m=f[s++])!=null?m:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,f,p,y,m,C,S,T,O;if(l=this.colors,S=null,a=this.hasAlphaChannel,this.palette.length&&(S=(O=this._decodedPalette)!=null?O:this._decodedPalette=this.decodePalette(),l=4,a=!0),C=(c=s.data||s).length,p=S||o,f=y=0,l===1)for(;f<C;)m=S?4*o[f/4]:y,T=p[m++],c[f++]=T,c[f++]=T,c[f++]=T,c[f++]=a?p[m++]:255,y=m;else for(;f<C;)m=S?4*o[f/4]:y,c[f++]=p[m++],c[f++]=p[m++],c[f++]=p[m++],c[f++]=a?p[m++]:255,y=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Lr)==="[object Window]"){try{e=Lr.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,f,p,y,m;if(this.animation){for(m=[],a=f=0,p=(y=this.animation.frames).length;f<p;a=++f)o=y[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,m.push(o.image=t(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,f,p,y=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,f=p.numPlays,(o=function(){var m,C;if(m=a++%c,C=l[m],y.renderFrame(s,m),c>1&&a/c<f)return y.animation._timeout=setTimeout(o,C.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function l$(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,f=[],p=0,y=null,m=0,C=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,C=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];p=t[e++]|t[e++]<<8,y=t[e++],!(1&S)&&(y=null),m=S>>2&7,e++;break;case 254:for(;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var T=t[e++]|t[e++]<<8,O=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,U=t[e++],W=U>>6&1,ee=1<<(7&U)+1,te=a,V=l,Y=!1;U>>7&&(Y=!0,te=e,V=ee,e+=3*ee);var de=e;for(e++;;){var $;if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}f.push({x:T,y:O,width:D,height:N,has_local_palette:Y,palette_offset:te,palette_size:V,data_offset:de,data_length:e-de,transparent_index:y,interlaced:!!W,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return C},this.frameInfo=function(H){if(H<0||H>=f.length)throw new Error("Frame index out of range.");return f[H]},this.decodeAndBlitFrameBGRA=function(H,le){var ae=this.frameInfo(H),z=ae.width*ae.height,B=new Uint8Array(z);z4(t,ae.data_offset,B,z);var X=ae.palette_offset,K=ae.transparent_index;K===null&&(K=256);var ye=ae.width,Te=n-ye,Ue=ye,J=4*(ae.y*n+ae.x),ie=4*((ae.y+ae.height)*n+ae.x),se=J,pe=4*Te;ae.interlaced===!0&&(pe+=4*n*7);for(var we=8,be=0,Ae=B.length;be<Ae;++be){var Ee=B[be];if(Ue===0&&(Ue=ye,(se+=pe)>=ie&&(pe=4*Te+4*n*(we-1),se=J+(ye+Te)*(we<<1),we>>=1)),Ee===K)se+=4;else{var Je=t[X+3*Ee],gt=t[X+3*Ee+1],_t=t[X+3*Ee+2];le[se++]=_t,le[se++]=gt,le[se++]=Je,le[se++]=255}--Ue}},this.decodeAndBlitFrameRGBA=function(H,le){var ae=this.frameInfo(H),z=ae.width*ae.height,B=new Uint8Array(z);z4(t,ae.data_offset,B,z);var X=ae.palette_offset,K=ae.transparent_index;K===null&&(K=256);var ye=ae.width,Te=n-ye,Ue=ye,J=4*(ae.y*n+ae.x),ie=4*((ae.y+ae.height)*n+ae.x),se=J,pe=4*Te;ae.interlaced===!0&&(pe+=4*n*7);for(var we=8,be=0,Ae=B.length;be<Ae;++be){var Ee=B[be];if(Ue===0&&(Ue=ye,(se+=pe)>=ie&&(pe=4*Te+4*n*(we-1),se=J+(ye+Te)*(we<<1),we>>=1)),Ee===K)se+=4;else{var Je=t[X+3*Ee],gt=t[X+3*Ee+1],_t=t[X+3*Ee+2];le[se++]=Je,le[se++]=gt,le[se++]=_t,le[se++]=255}--Ue}}}function z4(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,f=0,p=0,y=0,m=t[e++],C=new Int32Array(4096),S=null;;){for(;f<16&&m!==0;)p|=t[e++]<<f,f+=8,m===1?m=t[e++]:--m;if(f<l)break;var T=p&c;if(p>>=l,f-=l,T!==s){if(T===o)break;for(var O=T<a?T:S,D=0,N=O;N>s;)N=C[N]>>8,++D;var U=N;if(y+D+(O!==T?1:0)>r)return void Wi.log("Warning, gif stream longer than expected.");n[y++]=U;var W=y+=D;for(O!==T&&(n[y++]=U),N=O;D--;)N=C[N],n[--W]=255&N,N>>=8;S!==null&&a<4096&&(C[a++]=S<<8|U,a>=c+1&&l<12&&(++l,c=c<<1|1)),S=T}else a=o+1,c=(1<<(l=i+1))-1,S=null}return y!==r&&Wi.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function L1(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),f=new Array(64),p=new Array(65535),y=new Array(65535),m=new Array(64),C=new Array(64),S=[],T=0,O=7,D=new Array(64),N=new Array(64),U=new Array(64),W=new Array(256),ee=new Array(2048),te=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Y=[0,1,2,3,4,5,6,7,8,9,10,11],de=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],le=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function B(J,ie){for(var se=0,pe=0,we=new Array,be=1;be<=16;be++){for(var Ae=1;Ae<=J[be];Ae++)we[ie[pe]]=[],we[ie[pe]][0]=se,we[ie[pe]][1]=be,pe++,se++;se*=2}return we}function X(J){for(var ie=J[0],se=J[1]-1;se>=0;)ie&1<<se&&(T|=1<<O),se--,--O<0&&(T==255?(K(255),K(0)):K(T),O=7,T=0)}function K(J){S.push(J)}function ye(J){K(J>>8&255),K(255&J)}function Te(J,ie,se,pe,we){for(var be,Ae=we[0],Ee=we[240],Je=function(Qe,ot){var at,pt,Ft,Bt,Zt,ln,un,Sn,qe,it,Ze=0;for(qe=0;qe<8;++qe){at=Qe[Ze],pt=Qe[Ze+1],Ft=Qe[Ze+2],Bt=Qe[Ze+3],Zt=Qe[Ze+4],ln=Qe[Ze+5],un=Qe[Ze+6];var Ut=at+(Sn=Qe[Ze+7]),Yt=at-Sn,Ln=pt+un,gn=pt-un,vn=Ft+ln,jn=Ft-ln,mn=Bt+Zt,Jt=Bt-Zt,cn=Ut+mn,qn=Ut-mn,Kn=Ln+vn,rr=Ln-vn;Qe[Ze]=cn+Kn,Qe[Ze+4]=cn-Kn;var zn=.707106781*(rr+qn);Qe[Ze+2]=qn+zn,Qe[Ze+6]=qn-zn;var _r=.382683433*((cn=Jt+jn)-(rr=gn+Yt)),Ri=.5411961*cn+_r,Pi=1.306562965*rr+_r,Rs=.707106781*(Kn=jn+gn),ls=Yt+Rs,mt=Yt-Rs;Qe[Ze+5]=mt+Ri,Qe[Ze+3]=mt-Ri,Qe[Ze+1]=ls+Pi,Qe[Ze+7]=ls-Pi,Ze+=8}for(Ze=0,qe=0;qe<8;++qe){at=Qe[Ze],pt=Qe[Ze+8],Ft=Qe[Ze+16],Bt=Qe[Ze+24],Zt=Qe[Ze+32],ln=Qe[Ze+40],un=Qe[Ze+48];var Ke=at+(Sn=Qe[Ze+56]),$t=at-Sn,On=pt+un,Dn=pt-un,Gt=Ft+ln,on=Ft-ln,dt=Bt+Zt,fn=Bt-Zt,wn=Ke+dt,Tn=Ke-dt,er=On+Gt,tr=On-Gt;Qe[Ze]=wn+er,Qe[Ze+32]=wn-er;var Ur=.707106781*(tr+Tn);Qe[Ze+16]=Tn+Ur,Qe[Ze+48]=Tn-Ur;var Xn=.382683433*((wn=fn+on)-(tr=Dn+$t)),Ai=.5411961*wn+Xn,Wr=1.306562965*tr+Xn,Xo=.707106781*(er=on+Dn),or=$t+Xo,lr=$t-Xo;Qe[Ze+40]=lr+Ai,Qe[Ze+24]=lr-Ai,Qe[Ze+8]=or+Wr,Qe[Ze+56]=or-Wr,Ze++}for(qe=0;qe<64;++qe)it=Qe[qe]*ot[qe],m[qe]=it>0?it+.5|0:it-.5|0;return m}(J,ie),gt=0;gt<64;++gt)C[te[gt]]=Je[gt];var _t=C[0]-se;se=C[0],_t==0?X(pe[0]):(X(pe[y[be=32767+_t]]),X(p[be]));for(var ue=63;ue>0&&C[ue]==0;)ue--;if(ue==0)return X(Ae),se;for(var oe,ce=1;ce<=ue;){for(var Q=ce;C[ce]==0&&ce<=ue;)++ce;var Pe=ce-Q;if(Pe>=16){oe=Pe>>4;for(var Ve=1;Ve<=oe;++Ve)X(Ee);Pe&=15}be=32767+C[ce],X(we[(Pe<<4)+y[be]]),X(p[be]),ce++}return ue!=63&&X(Ae),se}function Ue(J){J=Math.min(Math.max(J,1),100),s!=J&&(function(ie){for(var se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],pe=0;pe<64;pe++){var we=o((se[pe]*ie+50)/100);we=Math.min(Math.max(we,1),255),a[te[pe]]=we}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ae=0;Ae<64;Ae++){var Ee=o((be[Ae]*ie+50)/100);Ee=Math.min(Math.max(Ee,1),255),l[te[Ae]]=Ee}for(var Je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],gt=0,_t=0;_t<8;_t++)for(var ue=0;ue<8;ue++)c[gt]=1/(a[te[gt]]*Je[_t]*Je[ue]*8),f[gt]=1/(l[te[gt]]*Je[_t]*Je[ue]*8),gt++}(J<50?Math.floor(5e3/J):Math.floor(200-2*J)),s=J)}this.encode=function(J,ie){ie&&Ue(ie),S=new Array,T=0,O=7,ye(65496),ye(65504),ye(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),ye(1),ye(1),K(0),K(0),function(){ye(65499),ye(132),K(0);for(var pt=0;pt<64;pt++)K(a[pt]);K(1);for(var Ft=0;Ft<64;Ft++)K(l[Ft])}(),function(pt,Ft){ye(65472),ye(17),K(8),ye(Ft),ye(pt),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(J.width,J.height),function(){ye(65476),ye(418),K(0);for(var pt=0;pt<16;pt++)K(V[pt+1]);for(var Ft=0;Ft<=11;Ft++)K(Y[Ft]);K(16);for(var Bt=0;Bt<16;Bt++)K(de[Bt+1]);for(var Zt=0;Zt<=161;Zt++)K($[Zt]);K(1);for(var ln=0;ln<16;ln++)K(H[ln+1]);for(var un=0;un<=11;un++)K(le[un]);K(17);for(var Sn=0;Sn<16;Sn++)K(ae[Sn+1]);for(var qe=0;qe<=161;qe++)K(z[qe])}(),ye(65498),ye(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var se=0,pe=0,we=0;T=0,O=7,this.encode.displayName="_encode_";for(var be,Ae,Ee,Je,gt,_t,ue,oe,ce,Q=J.data,Pe=J.width,Ve=J.height,Qe=4*Pe,ot=0;ot<Ve;){for(be=0;be<Qe;){for(gt=Qe*ot+be,ue=-1,oe=0,ce=0;ce<64;ce++)_t=gt+(oe=ce>>3)*Qe+(ue=4*(7&ce)),ot+oe>=Ve&&(_t-=Qe*(ot+1+oe-Ve)),be+ue>=Qe&&(_t-=be+ue-Qe+4),Ae=Q[_t++],Ee=Q[_t++],Je=Q[_t++],D[ce]=(ee[Ae]+ee[Ee+256>>0]+ee[Je+512>>0]>>16)-128,N[ce]=(ee[Ae+768>>0]+ee[Ee+1024>>0]+ee[Je+1280>>0]>>16)-128,U[ce]=(ee[Ae+1280>>0]+ee[Ee+1536>>0]+ee[Je+1792>>0]>>16)-128;se=Te(D,c,se,e,r),pe=Te(N,f,pe,n,i),we=Te(U,f,we,n,i),be+=32}ot+=8}if(O>=0){var at=[];at[1]=O+1,at[0]=(1<<O+1)-1,X(at)}return ye(65497),new Uint8Array(S)},t=t||50,function(){for(var J=String.fromCharCode,ie=0;ie<256;ie++)W[ie]=J(ie)}(),e=B(V,Y),n=B(H,le),r=B(de,$),i=B(ae,z),function(){for(var J=1,ie=2,se=1;se<=15;se++){for(var pe=J;pe<ie;pe++)y[32767+pe]=se,p[32767+pe]=[],p[32767+pe][1]=se,p[32767+pe][0]=pe;for(var we=-(ie-1);we<=-J;we++)y[32767+we]=se,p[32767+we]=[],p[32767+we][1]=se,p[32767+we][0]=ie-1+we;J<<=1,ie<<=1}}(),function(){for(var J=0;J<256;J++)ee[J]=19595*J,ee[J+256>>0]=38470*J,ee[J+512>>0]=7471*J+32768,ee[J+768>>0]=-11059*J,ee[J+1024>>0]=-21709*J,ee[J+1280>>0]=32768*J+8421375,ee[J+1536>>0]=-27439*J,ee[J+1792>>0]=-5329*J}(),Ue(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Zu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function U4(t){function e(V){if(!V)throw Error("assert :P")}function n(V,Y,de){for(var $=0;4>$;$++)if(V[Y+$]!=de.charCodeAt($))return!0;return!1}function r(V,Y,de,$,H){for(var le=0;le<H;le++)V[Y+le]=de[$+le]}function i(V,Y,de,$){for(var H=0;H<$;H++)V[Y+H]=de}function s(V){return new Int32Array(V)}function o(V,Y){for(var de=[],$=0;$<V;$++)de.push(new Y);return de}function a(V,Y){var de=[];return function $(H,le,ae){for(var z=ae[le],B=0;B<z&&(H.push(ae.length>le+1?[]:new Y),!(ae.length<le+1));B++)$(H[B],le+1,ae)}(de,0,V),de}var l=function(){var V=this;function Y(w,M){for(var j=1<<M-1>>>0;w&j;)j>>>=1;return j?(w&j-1)+j:w}function de(w,M,j,re,me){e(!(re%j));do w[M+(re-=j)]=me;while(0<re)}function $(w,M,j,re,me){if(e(2328>=me),512>=me)var Le=s(512);else if((Le=s(me))==null)return 0;return function(Se,ke,Oe,$e,ut,Ot){var Dt,xt,Ht=ke,jt=1<<Oe,ct=s(16),yt=s(16);for(e(ut!=0),e($e!=null),e(Se!=null),e(0<Oe),xt=0;xt<ut;++xt){if(15<$e[xt])return 0;++ct[$e[xt]]}if(ct[0]==ut)return 0;for(yt[1]=0,Dt=1;15>Dt;++Dt){if(ct[Dt]>1<<Dt)return 0;yt[Dt+1]=yt[Dt]+ct[Dt]}for(xt=0;xt<ut;++xt)Dt=$e[xt],0<$e[xt]&&(Ot[yt[Dt]++]=xt);if(yt[15]==1)return($e=new H).g=0,$e.value=Ot[0],de(Se,Ht,1,jt,$e),jt;var Xt,an=-1,Qt=jt-1,Pn=0,xn=1,Hn=1,h=1<<Oe;for(xt=0,Dt=1,ut=2;Dt<=Oe;++Dt,ut<<=1){if(xn+=Hn<<=1,0>(Hn-=ct[Dt]))return 0;for(;0<ct[Dt];--ct[Dt])($e=new H).g=Dt,$e.value=Ot[xt++],de(Se,Ht+Pn,ut,h,$e),Pn=Y(Pn,Dt)}for(Dt=Oe+1,ut=2;15>=Dt;++Dt,ut<<=1){if(xn+=Hn<<=1,0>(Hn-=ct[Dt]))return 0;for(;0<ct[Dt];--ct[Dt]){if($e=new H,(Pn&Qt)!=an){for(Ht+=h,Xt=1<<(an=Dt)-Oe;15>an&&!(0>=(Xt-=ct[an]));)++an,Xt<<=1;jt+=h=1<<(Xt=an-Oe),Se[ke+(an=Pn&Qt)].g=Xt+Oe,Se[ke+an].value=Ht-ke-an}$e.g=Dt-Oe,$e.value=Ot[xt++],de(Se,Ht+(Pn>>Oe),ut,h,$e),Pn=Y(Pn,Dt)}}return xn!=2*yt[15]-1?0:jt}(w,M,j,re,me,Le)}function H(){this.value=this.g=0}function le(){this.value=this.g=0}function ae(){this.G=o(5,H),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Yi,le)}function z(w,M,j,re){e(w!=null),e(M!=null),e(2147483648>re),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=M,w.pa=j,w.Jd=M,w.Yc=j+re,w.Zc=4<=re?j+re-4+1:j,be(w)}function B(w,M){for(var j=0;0<M--;)j|=Ee(w,128)<<M;return j}function X(w,M){var j=B(w,M);return Ae(w)?-j:j}function K(w,M,j,re){var me,Le=0;for(e(w!=null),e(M!=null),e(4294967288>re),w.Sb=re,w.Ra=0,w.u=0,w.h=0,4<re&&(re=4),me=0;me<re;++me)Le+=M[j+me]<<8*me;w.Ra=Le,w.bb=re,w.oa=M,w.pa=j}function ye(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Qs-8>>>0,++w.bb,w.u-=8;se(w)&&(w.h=1,w.u=0)}function Te(w,M){if(e(0<=M),!w.h&&M<=bo){var j=ie(w)&ea[M];return w.u+=M,ye(w),j}return w.h=1,w.u=0}function Ue(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function J(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ie(w){return w.Ra>>>(w.u&Qs-1)>>>0}function se(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Qs}function pe(w,M){w.u=M,w.h=se(w)}function we(w){w.u>=_l&&(e(w.u>=_l),ye(w))}function be(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function Ae(w){return B(w,1)}function Ee(w,M){var j=w.Ca;0>w.b&&be(w);var re=w.b,me=j*M>>>8,Le=(w.I>>>re>me)+0;for(Le?(j-=me,w.I-=me+1<<re>>>0):j=me+1,re=j,me=0;256<=re;)me+=8,re>>=8;return re=7^me+Ss[re],w.b-=re,w.Ca=(j<<re)-1,Le}function Je(w,M,j){w[M+0]=j>>24&255,w[M+1]=j>>16&255,w[M+2]=j>>8&255,w[M+3]=j>>0&255}function gt(w,M){return w[M+0]<<0|w[M+1]<<8}function _t(w,M){return gt(w,M)|w[M+2]<<16}function ue(w,M){return gt(w,M)|gt(w,M+2)<<16}function oe(w,M){var j=1<<M;return e(w!=null),e(0<M),w.X=s(j),w.X==null?0:(w.Mb=32-M,w.Xa=M,1)}function ce(w,M){e(w!=null),e(M!=null),e(w.Xa==M.Xa),r(M.X,0,w.X,0,1<<M.Xa)}function Q(){this.X=[],this.Xa=this.Mb=0}function Pe(w,M,j,re){e(j!=null),e(re!=null);var me=j[0],Le=re[0];return me==0&&(me=(w*Le+M/2)/M),Le==0&&(Le=(M*me+w/2)/w),0>=me||0>=Le?0:(j[0]=me,re[0]=Le,1)}function Ve(w,M){return w+(1<<M)-1>>>M}function Qe(w,M){return((4278255360&w)+(4278255360&M)>>>0&4278255360)+((16711935&w)+(16711935&M)>>>0&16711935)>>>0}function ot(w,M){V[M]=function(j,re,me,Le,Se,ke,Oe){var $e;for($e=0;$e<Se;++$e){var ut=V[w](ke[Oe+$e-1],me,Le+$e);ke[Oe+$e]=Qe(j[re+$e],ut)}}}function at(){this.ud=this.hd=this.jd=0}function pt(w,M){return((4278124286&(w^M))>>>1)+(w&M)>>>0}function Ft(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Bt(w,M){return Ft(w+(w-M+.5>>1))}function Zt(w,M,j){return Math.abs(M-j)-Math.abs(w-j)}function ln(w,M,j,re,me,Le,Se){for(re=Le[Se-1],j=0;j<me;++j)Le[Se+j]=re=Qe(w[M+j],re)}function un(w,M,j,re,me){var Le;for(Le=0;Le<j;++Le){var Se=w[M+Le],ke=Se>>8&255,Oe=16711935&(Oe=(Oe=16711935&Se)+((ke<<16)+ke));re[me+Le]=(4278255360&Se)+Oe>>>0}}function Sn(w,M){M.jd=w>>0&255,M.hd=w>>8&255,M.ud=w>>16&255}function qe(w,M,j,re,me,Le){var Se;for(Se=0;Se<re;++Se){var ke=M[j+Se],Oe=ke>>>8,$e=ke,ut=255&(ut=(ut=ke>>>16)+((w.jd<<24>>24)*(Oe<<24>>24)>>>5));$e=255&($e=($e=$e+((w.hd<<24>>24)*(Oe<<24>>24)>>>5))+((w.ud<<24>>24)*(ut<<24>>24)>>>5)),me[Le+Se]=(4278255360&ke)+(ut<<16)+$e}}function it(w,M,j,re,me){V[M]=function(Le,Se,ke,Oe,$e,ut,Ot,Dt,xt){for(Oe=Ot;Oe<Dt;++Oe)for(Ot=0;Ot<xt;++Ot)$e[ut++]=me(ke[re(Le[Se++])])},V[w]=function(Le,Se,ke,Oe,$e,ut,Ot){var Dt=8>>Le.b,xt=Le.Ea,Ht=Le.K[0],jt=Le.w;if(8>Dt)for(Le=(1<<Le.b)-1,jt=(1<<Dt)-1;Se<ke;++Se){var ct,yt=0;for(ct=0;ct<xt;++ct)ct&Le||(yt=re(Oe[$e++])),ut[Ot++]=me(Ht[yt&jt]),yt>>=Dt}else V["VP8LMapColor"+j](Oe,$e,Ht,jt,ut,Ot,Se,ke,xt)}}function Ze(w,M,j,re,me){for(j=M+j;M<j;){var Le=w[M++];re[me++]=Le>>16&255,re[me++]=Le>>8&255,re[me++]=Le>>0&255}}function Ut(w,M,j,re,me){for(j=M+j;M<j;){var Le=w[M++];re[me++]=Le>>16&255,re[me++]=Le>>8&255,re[me++]=Le>>0&255,re[me++]=Le>>24&255}}function Yt(w,M,j,re,me){for(j=M+j;M<j;){var Le=(Se=w[M++])>>16&240|Se>>12&15,Se=Se>>0&240|Se>>28&15;re[me++]=Le,re[me++]=Se}}function Ln(w,M,j,re,me){for(j=M+j;M<j;){var Le=(Se=w[M++])>>16&248|Se>>13&7,Se=Se>>5&224|Se>>3&31;re[me++]=Le,re[me++]=Se}}function gn(w,M,j,re,me){for(j=M+j;M<j;){var Le=w[M++];re[me++]=Le>>0&255,re[me++]=Le>>8&255,re[me++]=Le>>16&255}}function vn(w,M,j,re,me,Le){if(Le==0)for(j=M+j;M<j;)Je(re,((Le=w[M++])[0]>>24|Le[1]>>8&65280|Le[2]<<8&16711680|Le[3]<<24)>>>0),me+=32;else r(re,me,w,M,j)}function jn(w,M){V[M][0]=V[w+"0"],V[M][1]=V[w+"1"],V[M][2]=V[w+"2"],V[M][3]=V[w+"3"],V[M][4]=V[w+"4"],V[M][5]=V[w+"5"],V[M][6]=V[w+"6"],V[M][7]=V[w+"7"],V[M][8]=V[w+"8"],V[M][9]=V[w+"9"],V[M][10]=V[w+"10"],V[M][11]=V[w+"11"],V[M][12]=V[w+"12"],V[M][13]=V[w+"13"],V[M][14]=V[w+"0"],V[M][15]=V[w+"0"]}function mn(w){return w==ds||w==ps||w==Vo||w==u}function Jt(){this.eb=[],this.size=this.A=this.fb=0}function cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Jt,this.f.kb=new cn,this.sd=null}function Kn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function rr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function zn(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function _r(w,M){var j=w.T,re=M.ba.f.RGBA,me=re.eb,Le=re.fb+w.ka*re.A,Se=Ts[M.ba.S],ke=w.y,Oe=w.O,$e=w.f,ut=w.N,Ot=w.ea,Dt=w.W,xt=M.cc,Ht=M.dc,jt=M.Mc,ct=M.Nc,yt=w.ka,Xt=w.ka+w.T,an=w.U,Qt=an+1>>1;for(yt==0?Se(ke,Oe,null,null,$e,ut,Ot,Dt,$e,ut,Ot,Dt,me,Le,null,null,an):(Se(M.ec,M.fc,ke,Oe,xt,Ht,jt,ct,$e,ut,Ot,Dt,me,Le-re.A,me,Le,an),++j);yt+2<Xt;yt+=2)xt=$e,Ht=ut,jt=Ot,ct=Dt,ut+=w.Rc,Dt+=w.Rc,Le+=2*re.A,Se(ke,(Oe+=2*w.fa)-w.fa,ke,Oe,xt,Ht,jt,ct,$e,ut,Ot,Dt,me,Le-re.A,me,Le,an);return Oe+=w.fa,w.j+Xt<w.o?(r(M.ec,M.fc,ke,Oe,an),r(M.cc,M.dc,$e,ut,Qt),r(M.Mc,M.Nc,Ot,Dt,Qt),j--):1&Xt||Se(ke,Oe,null,null,$e,ut,Ot,Dt,$e,ut,Ot,Dt,me,Le+re.A,null,null,an),j}function Ri(w,M,j){var re=w.F,me=[w.J];if(re!=null){var Le=w.U,Se=M.ba.S,ke=Se==$o||Se==Vo;M=M.ba.f.RGBA;var Oe=[0],$e=w.ka;Oe[0]=w.T,w.Kb&&($e==0?--Oe[0]:(--$e,me[0]-=w.width),w.j+w.ka+w.T==w.o&&(Oe[0]=w.o-w.j-$e));var ut=M.eb;$e=M.fb+$e*M.A,w=li(re,me[0],w.width,Le,Oe,ut,$e+(ke?0:3),M.A),e(j==Oe),w&&mn(Se)&&fs(ut,$e,ke,Le,Oe,M.A)}return 0}function Pi(w){var M=w.ma,j=M.ba.S,re=11>j,me=j==sr||j==La||j==$o||j==$s||j==12||mn(j);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!Fu(M.Oa,w,me?11:12))return 0;if(me&&mn(j)&&sn(),w.da)alert("todo:use_scaling");else{if(re){if(M.Ib=zn,w.Kb){if(j=w.U+1>>1,M.memory=s(w.U+2*j),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+w.U,M.Mc=M.cc,M.Nc=M.dc+j,M.Ib=_r,sn()}}else alert("todo:EmitYUV");me&&(M.Jb=Ri,re&&Lt())}if(re&&!yc){for(w=0;256>w;++w)Ph[w]=89858*(w-128)+Xa>>Eh,kh[w]=-22014*(w-128)+Xa,yp[w]=-45773*(w-128),Xl[w]=113618*(w-128)+Xa>>Eh;for(w=qc;w<gf;++w)M=76283*(w-16)+Xa>>Eh,Mh[w-qc]=Er(M,255),ad[w-qc]=Er(M+8>>4,15);yc=1}return 1}function Rs(w){var M=w.ma,j=w.U,re=w.T;return e(!(1&w.ka)),0>=j||0>=re?0:(j=M.Ib(w,M),M.Jb!=null&&M.Jb(w,M,j),M.Dc+=j,1)}function ls(w){w.ma.memory=null}function mt(w,M,j,re){return Te(w,8)!=47?0:(M[0]=Te(w,14)+1,j[0]=Te(w,14)+1,re[0]=Te(w,1),Te(w,3)!=0?0:!w.h)}function Ke(w,M){if(4>w)return w+1;var j=w-2>>1;return(2+(1&w)<<j)+Te(M,j)+1}function $t(w,M){return 120<M?M-120:1<=(j=((j=et[M-1])>>4)*w+(8-(15&j)))?j:1;var j}function On(w,M,j){var re=ie(j),me=w[M+=255&re].g-8;return 0<me&&(pe(j,j.u+8),re=ie(j),M+=w[M].value,M+=re&(1<<me)-1),pe(j,j.u+w[M].g),w[M].value}function Dn(w,M,j){return j.g+=w.g,j.value+=w.value<<M>>>0,e(8>=j.g),w.g}function Gt(w,M,j){var re=w.xc;return e((M=re==0?0:w.vc[w.md*(j>>re)+(M>>re)])<w.Wb),w.Ya[M]}function on(w,M,j,re){var me=w.ab,Le=w.c*M,Se=w.C;M=Se+M;var ke=j,Oe=re;for(re=w.Ta,j=w.Ua;0<me--;){var $e=w.gc[me],ut=Se,Ot=M,Dt=ke,xt=Oe,Ht=(Oe=re,ke=j,$e.Ea);switch(e(ut<Ot),e(Ot<=$e.nc),$e.hc){case 2:vc(Dt,xt,(Ot-ut)*Ht,Oe,ke);break;case 0:var jt=ut,ct=Ot,yt=Oe,Xt=ke,an=(h=$e).Ea;jt==0&&(js(Dt,xt,null,null,1,yt,Xt),ln(Dt,xt+1,0,0,an-1,yt,Xt+1),xt+=an,Xt+=an,++jt);for(var Qt=1<<h.b,Pn=Qt-1,xn=Ve(an,h.b),Hn=h.K,h=h.w+(jt>>h.b)*xn;jt<ct;){var g=Hn,_=h,x=1;for(zs(Dt,xt,yt,Xt-an,1,yt,Xt);x<an;){var k=(x&~Pn)+Qt;k>an&&(k=an),(0,ba[g[_++]>>8&15])(Dt,xt+ +x,yt,Xt+x-an,k-x,yt,Xt+x),x=k}xt+=an,Xt+=an,++jt&Pn||(h+=xn)}Ot!=$e.nc&&r(Oe,ke-Ht,Oe,ke+(Ot-ut-1)*Ht,Ht);break;case 1:for(Ht=Dt,ct=xt,an=(Dt=$e.Ea)-(Xt=Dt&~(yt=(xt=1<<$e.b)-1)),jt=Ve(Dt,$e.b),Qt=$e.K,$e=$e.w+(ut>>$e.b)*jt;ut<Ot;){for(Pn=Qt,xn=$e,Hn=new at,h=ct+Xt,g=ct+Dt;ct<h;)Sn(Pn[xn++],Hn),_a(Hn,Ht,ct,xt,Oe,ke),ct+=xt,ke+=xt;ct<g&&(Sn(Pn[xn++],Hn),_a(Hn,Ht,ct,an,Oe,ke),ct+=an,ke+=an),++ut&yt||($e+=jt)}break;case 3:if(Dt==Oe&&xt==ke&&0<$e.b){for(ct=Oe,Dt=Ht=ke+(Ot-ut)*Ht-(Xt=(Ot-ut)*Ve($e.Ea,$e.b)),xt=Oe,yt=ke,jt=[],Xt=(an=Xt)-1;0<=Xt;--Xt)jt[Xt]=xt[yt+Xt];for(Xt=an-1;0<=Xt;--Xt)ct[Dt+Xt]=jt[Xt];rs($e,ut,Ot,Oe,Ht,Oe,ke)}else rs($e,ut,Ot,Dt,xt,Oe,ke)}ke=re,Oe=j}Oe!=j&&r(re,j,ke,Oe,Le)}function dt(w,M){var j=w.V,re=w.Ba+w.c*w.C,me=M-w.C;if(e(M<=w.l.o),e(16>=me),0<me){var Le=w.l,Se=w.Ta,ke=w.Ua,Oe=Le.width;if(on(w,me,j,re),me=ke=[ke],e((j=w.C)<(re=M)),e(Le.v<Le.va),re>Le.o&&(re=Le.o),j<Le.j){var $e=Le.j-j;j=Le.j,me[0]+=$e*Oe}if(j>=re?j=0:(me[0]+=4*Le.v,Le.ka=j-Le.j,Le.U=Le.va-Le.v,Le.T=re-j,j=1),j){if(ke=ke[0],11>(j=w.ca).S){var ut=j.f.RGBA,Ot=(re=j.S,me=Le.U,Le=Le.T,$e=ut.eb,ut.A),Dt=Le;for(ut=ut.fb+w.Ma*ut.A;0<Dt--;){var xt=Se,Ht=ke,jt=me,ct=$e,yt=ut;switch(re){case to:ks(xt,Ht,jt,ct,yt);break;case sr:hs(xt,Ht,jt,ct,yt);break;case ds:hs(xt,Ht,jt,ct,yt),fs(ct,yt,0,jt,1,0);break;case xa:Ms(xt,Ht,jt,ct,yt);break;case La:vn(xt,Ht,jt,ct,yt,1);break;case ps:vn(xt,Ht,jt,ct,yt,1),fs(ct,yt,0,jt,1,0);break;case $o:vn(xt,Ht,jt,ct,yt,0);break;case Vo:vn(xt,Ht,jt,ct,yt,0),fs(ct,yt,1,jt,1,0);break;case $s:ta(xt,Ht,jt,ct,yt);break;case u:ta(xt,Ht,jt,ct,yt),ii(ct,yt,jt,1,0);break;case Wc:_o(xt,Ht,jt,ct,yt);break;default:e(0)}ke+=Oe,ut+=Ot}w.Ma+=Le}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=j.height)}}w.C=M,e(w.C<=w.i)}function fn(w){var M;if(0<w.ua)return 0;for(M=0;M<w.Wb;++M){var j=w.Ya[M].G,re=w.Ya[M].H;if(0<j[1][re[1]+0].g||0<j[2][re[2]+0].g||0<j[3][re[3]+0].g)return 0}return 1}function wn(w,M,j,re,me,Le){if(w.Z!=0){var Se=w.qd,ke=w.rd;for(e(Xr[w.Z]!=null);M<j;++M)Xr[w.Z](Se,ke,re,me,re,me,Le),Se=re,ke=me,me+=Le;w.qd=Se,w.rd=ke}}function Tn(w,M){var j=w.l.ma,re=j.Z==0||j.Z==1?w.l.j:w.C;if(re=w.C<re?re:w.C,e(M<=w.l.o),M>re){var me=w.l.width,Le=j.ca,Se=j.tb+me*re,ke=w.V,Oe=w.Ba+w.c*re,$e=w.gc;e(w.ab==1),e($e[0].hc==3),Es($e[0],re,M,ke,Oe,Le,Se),wn(j,re,M,Le,Se,me)}w.C=w.Ma=M}function er(w,M,j,re,me,Le,Se){var ke=w.$/re,Oe=w.$%re,$e=w.m,ut=w.s,Ot=j+w.$,Dt=Ot;me=j+re*me;var xt=j+re*Le,Ht=280+ut.ua,jt=w.Pb?ke:16777216,ct=0<ut.ua?ut.Wa:null,yt=ut.wc,Xt=Ot<xt?Gt(ut,Oe,ke):null;e(w.C<Le),e(xt<=me);var an=!1;e:for(;;){for(;an||Ot<xt;){var Qt=0;if(ke>=jt){var Pn=Ot-j;e((jt=w).Pb),jt.wd=jt.m,jt.xd=Pn,0<jt.s.ua&&ce(jt.s.Wa,jt.s.vb),jt=ke+Rt}if(Oe&yt||(Xt=Gt(ut,Oe,ke)),e(Xt!=null),Xt.Qb&&(M[Ot]=Xt.qb,an=!0),!an)if(we($e),Xt.jc){Qt=$e,Pn=M;var xn=Ot,Hn=Xt.pd[ie(Qt)&Yi-1];e(Xt.jc),256>Hn.g?(pe(Qt,Qt.u+Hn.g),Pn[xn]=Hn.value,Qt=0):(pe(Qt,Qt.u+Hn.g-256),e(256<=Hn.value),Qt=Hn.value),Qt==0&&(an=!0)}else Qt=On(Xt.G[0],Xt.H[0],$e);if($e.h)break;if(an||256>Qt){if(!an)if(Xt.nd)M[Ot]=(Xt.qb|Qt<<8)>>>0;else{if(we($e),an=On(Xt.G[1],Xt.H[1],$e),we($e),Pn=On(Xt.G[2],Xt.H[2],$e),xn=On(Xt.G[3],Xt.H[3],$e),$e.h)break;M[Ot]=(xn<<24|an<<16|Qt<<8|Pn)>>>0}if(an=!1,++Ot,++Oe>=re&&(Oe=0,++ke,Se!=null&&ke<=Le&&!(ke%16)&&Se(w,ke),ct!=null))for(;Dt<Ot;)Qt=M[Dt++],ct.X[(506832829*Qt&4294967295)>>>ct.Mb]=Qt}else if(280>Qt){if(Qt=Ke(Qt-256,$e),Pn=On(Xt.G[4],Xt.H[4],$e),we($e),Pn=$t(re,Pn=Ke(Pn,$e)),$e.h)break;if(Ot-j<Pn||me-Ot<Qt)break e;for(xn=0;xn<Qt;++xn)M[Ot+xn]=M[Ot+xn-Pn];for(Ot+=Qt,Oe+=Qt;Oe>=re;)Oe-=re,++ke,Se!=null&&ke<=Le&&!(ke%16)&&Se(w,ke);if(e(Ot<=me),Oe&yt&&(Xt=Gt(ut,Oe,ke)),ct!=null)for(;Dt<Ot;)Qt=M[Dt++],ct.X[(506832829*Qt&4294967295)>>>ct.Mb]=Qt}else{if(!(Qt<Ht))break e;for(an=Qt-280,e(ct!=null);Dt<Ot;)Qt=M[Dt++],ct.X[(506832829*Qt&4294967295)>>>ct.Mb]=Qt;Qt=Ot,e(!(an>>>(Pn=ct).Xa)),M[Qt]=Pn.X[an],an=!0}an||e($e.h==se($e))}if(w.Pb&&$e.h&&Ot<me)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&ce(w.s.vb,w.s.Wa);else{if($e.h)break e;Se!=null&&Se(w,ke>Le?Le:ke),w.a=0,w.$=Ot-j}return 1}return w.a=3,0}function tr(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var M=w.Wa;M!=null&&(M.X=null),w.vb=null,e(w!=null)}function Ur(){var w=new vl;return w==null?null:(w.a=0,w.xb=yu,jn("Predictor","VP8LPredictors"),jn("Predictor","VP8LPredictors_C"),jn("PredictorAdd","VP8LPredictorsAdd"),jn("PredictorAdd","VP8LPredictorsAdd_C"),vc=un,_a=qe,ks=Ze,hs=Ut,ta=Yt,_o=Ln,Ms=gn,V.VP8LMapColor32b=ya,V.VP8LMapColor8b=Ps,w)}function Xn(w,M,j,re,me){var Le=1,Se=[w],ke=[M],Oe=re.m,$e=re.s,ut=null,Ot=0;e:for(;;){if(j)for(;Le&&Te(Oe,1);){var Dt=Se,xt=ke,Ht=re,jt=1,ct=Ht.m,yt=Ht.gc[Ht.ab],Xt=Te(ct,2);if(Ht.Oc&1<<Xt)Le=0;else{switch(Ht.Oc|=1<<Xt,yt.hc=Xt,yt.Ea=Dt[0],yt.nc=xt[0],yt.K=[null],++Ht.ab,e(4>=Ht.ab),Xt){case 0:case 1:yt.b=Te(ct,3)+2,jt=Xn(Ve(yt.Ea,yt.b),Ve(yt.nc,yt.b),0,Ht,yt.K),yt.K=yt.K[0];break;case 3:var an,Qt=Te(ct,8)+1,Pn=16<Qt?0:4<Qt?1:2<Qt?2:3;if(Dt[0]=Ve(yt.Ea,Pn),yt.b=Pn,an=jt=Xn(Qt,1,0,Ht,yt.K)){var xn,Hn=Qt,h=yt,g=1<<(8>>h.b),_=s(g);if(_==null)an=0;else{var x=h.K[0],k=h.w;for(_[0]=h.K[0][0],xn=1;xn<1*Hn;++xn)_[xn]=Qe(x[k+xn],_[xn-1]);for(;xn<4*g;++xn)_[xn]=0;h.K[0]=null,h.K[0]=_,an=1}}jt=an;break;case 2:break;default:e(0)}Le=jt}}if(Se=Se[0],ke=ke[0],Le&&Te(Oe,1)&&!(Le=1<=(Ot=Te(Oe,4))&&11>=Ot)){re.a=3;break e}var R;if(R=Le)t:{var G,Z,he,_e=re,Ge=Se,ze=ke,vt=Ot,At=j,qt=_e.m,dn=_e.s,yn=[null],nr=1,We=0,Ye=Pt[vt];n:for(;;){if(At&&Te(qt,1)){var lt=Te(qt,3)+2,It=Ve(Ge,lt),wt=Ve(ze,lt),Tt=It*wt;if(!Xn(It,wt,0,_e,yn))break n;for(yn=yn[0],dn.xc=lt,G=0;G<Tt;++G){var fe=yn[G]>>8&65535;yn[G]=fe,fe>=nr&&(nr=fe+1)}}if(qt.h)break n;for(Z=0;5>Z;++Z){var Ce=F[Z];!Z&&0<vt&&(Ce+=1<<vt),We<Ce&&(We=Ce)}var Ie=o(nr*Ye,H),De=nr,Re=o(De,ae);if(Re==null)var Fe=null;else e(65536>=De),Fe=Re;var tt=s(We);if(Fe==null||tt==null||Ie==null){_e.a=1;break n}var rt=Ie;for(G=he=0;G<nr;++G){var ht=Fe[G],Ct=ht.G,St=ht.H,en=0,Nn=1,Rn=0;for(Z=0;5>Z;++Z){Ce=F[Z],Ct[Z]=rt,St[Z]=he,!Z&&0<vt&&(Ce+=1<<vt);i:{var Wn,Jr=Ce,ui=_e,Ir=tt,mi=rt,io=he,Uu=0,la=ui.m,mf=Te(la,1);if(i(Ir,0,0,Jr),mf){var Ja=Te(la,1)+1,bc=Te(la,1),ua=Te(la,bc==0?1:8);Ir[ua]=1,Ja==2&&(Ir[ua=Te(la,8)]=1);var Os=1}else{var Vi=s(19),fd=Te(la,4)+4;if(19<fd){ui.a=3;var vf=0;break i}for(Wn=0;Wn<fd;++Wn)Vi[xe[Wn]]=Te(la,3);var yf=void 0,bf=void 0,dd=ui,Vr=Vi,pd=Jr,gm=Ir,Yc=0,$u=dd.m,mm=8,vm=o(128,H);r:for(;$(vm,0,7,Vr,19);){if(Te($u,1)){var wl=2+2*Te($u,3);if((yf=2+Te($u,wl))>pd)break r}else yf=pd;for(bf=0;bf<pd&&yf--;){we($u);var ym=vm[0+(127&ie($u))];pe($u,$u.u+ym.g);var Vu=ym.value;if(16>Vu)gm[bf++]=Vu,Vu!=0&&(mm=Vu);else{var bp=Vu==16,_p=Vu-16,bm=E[_p],Sa=Te($u,v[_p])+bm;if(bf+Sa>pd)break r;for(var _c=bp?mm:0;0<Sa--;)gm[bf++]=_c}}Yc=1;break r}Yc||(dd.a=3),Os=Yc}(Os=Os&&!la.h)&&(Uu=$(mi,io,8,Ir,Jr)),Os&&Uu!=0?vf=Uu:(ui.a=3,vf=0)}if(vf==0)break n;if(Nn&&ne[Z]==1&&(Nn=rt[he].g==0),en+=rt[he].g,he+=vf,3>=Z){var Zc,gd=tt[0];for(Zc=1;Zc<Ce;++Zc)tt[Zc]>gd&&(gd=tt[Zc]);Rn+=gd}}if(ht.nd=Nn,ht.Qb=0,Nn&&(ht.qb=(Ct[3][St[3]+0].value<<24|Ct[1][St[1]+0].value<<16|Ct[2][St[2]+0].value)>>>0,en==0&&256>Ct[0][St[0]+0].value&&(ht.Qb=1,ht.qb+=Ct[0][St[0]+0].value<<8)),ht.jc=!ht.Qb&&6>Rn,ht.jc){var Kc,bu=ht;for(Kc=0;Kc<Yi;++Kc){var _u=Kc,Hu=bu.pd[_u],Ah=bu.G[0][bu.H[0]+_u];256<=Ah.value?(Hu.g=Ah.g+256,Hu.value=Ah.value):(Hu.g=0,Hu.value=0,_u>>=Dn(Ah,8,Hu),_u>>=Dn(bu.G[1][bu.H[1]+_u],16,Hu),_u>>=Dn(bu.G[2][bu.H[2]+_u],0,Hu),Dn(bu.G[3][bu.H[3]+_u],24,Hu))}}}dn.vc=yn,dn.Wb=nr,dn.Ya=Fe,dn.yc=Ie,R=1;break t}R=0}if(!(Le=R)){re.a=3;break e}if(0<Ot){if($e.ua=1<<Ot,!oe($e.Wa,Ot)){re.a=1,Le=0;break e}}else $e.ua=0;var _f=re,Wu=Se,gy=ke,wu=_f.s,md=wu.xc;if(_f.c=Wu,_f.i=gy,wu.md=Ve(Wu,md),wu.wc=md==0?-1:(1<<md)-1,j){re.xb=pf;break e}if((ut=s(Se*ke))==null){re.a=1,Le=0;break e}Le=(Le=er(re,ut,0,Se,ke,ke,null))&&!Oe.h;break e}return Le?(me!=null?me[0]=ut:(e(ut==null),e(j)),re.$=0,j||tr($e)):tr($e),Le}function Ai(w,M){var j=w.c*w.i,re=j+M+16*M;return e(w.c<=M),w.V=s(re),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+j+M,1)}function Wr(w,M){var j=w.C,re=M-j,me=w.V,Le=w.Ba+w.c*j;for(e(M<=w.l.o);0<re;){var Se=16<re?16:re,ke=w.l.ma,Oe=w.l.width,$e=Oe*Se,ut=ke.ca,Ot=ke.tb+Oe*j,Dt=w.Ta,xt=w.Ua;on(w,Se,me,Le),$i(Dt,xt,ut,Ot,$e),wn(ke,j,j+Se,ut,Ot,Oe),re-=Se,me+=Se*w.c,j+=Se}e(j==M),w.C=w.Ma=M}function Xo(){this.ub=this.yd=this.td=this.Rb=0}function or(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function lr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function us(){this.Yb=function(){var w=[];return function M(j,re,me){for(var Le=me[re],Se=0;Se<Le&&(j.push(me.length>re+1?[]:0),!(me.length<re+1));Se++)M(j[Se],re+1,me)}(w,0,[3,11]),w}()}function Do(){this.jb=s(3),this.Wc=a([4,8],us),this.Xc=a([4,17],us)}function Hc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function hu(){this.ld=this.La=this.dd=this.tc=0}function hc(){this.Na=this.la=0}function fc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function cl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function hl(){this.uc=this.M=this.Nb=0,this.wa=Array(new hu),this.Y=0,this.ya=Array(new cl),this.aa=0,this.l=new So}function Du(){this.y=s(16),this.f=s(8),this.ea=s(8)}function dc(){this.cb=this.a=0,this.sc="",this.m=new Ue,this.Od=new Xo,this.Kc=new or,this.ed=new Hc,this.Qa=new lr,this.Ic=this.$c=this.Aa=0,this.D=new hl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ue),this.ia=0,this.pb=o(4,fc),this.Pa=new Do,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Du),this.Hd=0,this.rb=Array(new hc),this.sb=0,this.wa=Array(new hu),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new cl),this.L=this.aa=0,this.gd=a([4,2],hu),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function So(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Gr(){var w=new dc;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Vn||(Vn=Io)),w}function fr(w,M,j){return w.a==0&&(w.a=M,w.sc=j,w.cb=0),0}function $a(w,M,j){return 3<=j&&w[M+0]==157&&w[M+1]==1&&w[M+2]==42}function da(w,M){if(w==null)return 0;if(w.a=0,w.sc="OK",M==null)return fr(w,2,"null VP8Io passed to VP8GetHeaders()");var j=M.data,re=M.w,me=M.ha;if(4>me)return fr(w,7,"Truncated header.");var Le=j[re+0]|j[re+1]<<8|j[re+2]<<16,Se=w.Od;if(Se.Rb=!(1&Le),Se.td=Le>>1&7,Se.yd=Le>>4&1,Se.ub=Le>>5,3<Se.td)return fr(w,3,"Incorrect keyframe parameters.");if(!Se.yd)return fr(w,4,"Frame not displayable.");re+=3,me-=3;var ke=w.Kc;if(Se.Rb){if(7>me)return fr(w,7,"cannot parse picture header");if(!$a(j,re,me))return fr(w,3,"Bad code word");ke.c=16383&(j[re+4]<<8|j[re+3]),ke.Td=j[re+4]>>6,ke.i=16383&(j[re+6]<<8|j[re+5]),ke.Ud=j[re+6]>>6,re+=7,me-=7,w.za=ke.c+15>>4,w.Ub=ke.i+15>>4,M.width=ke.c,M.height=ke.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((Le=w.Pa).jb,0,255,Le.jb.length),e((Le=w.Qa)!=null),Le.Cb=0,Le.Bb=0,Le.Fb=1,i(Le.Zb,0,0,Le.Zb.length),i(Le.Lb,0,0,Le.Lb)}if(Se.ub>me)return fr(w,7,"bad partition length");z(Le=w.m,j,re,Se.ub),re+=Se.ub,me-=Se.ub,Se.Rb&&(ke.Ld=Ae(Le),ke.Kd=Ae(Le)),ke=w.Qa;var Oe,$e=w.Pa;if(e(Le!=null),e(ke!=null),ke.Cb=Ae(Le),ke.Cb){if(ke.Bb=Ae(Le),Ae(Le)){for(ke.Fb=Ae(Le),Oe=0;4>Oe;++Oe)ke.Zb[Oe]=Ae(Le)?X(Le,7):0;for(Oe=0;4>Oe;++Oe)ke.Lb[Oe]=Ae(Le)?X(Le,6):0}if(ke.Bb)for(Oe=0;3>Oe;++Oe)$e.jb[Oe]=Ae(Le)?B(Le,8):255}else ke.Bb=0;if(Le.Ka)return fr(w,3,"cannot parse segment header");if((ke=w.ed).zd=Ae(Le),ke.Tb=B(Le,6),ke.wb=B(Le,3),ke.Pc=Ae(Le),ke.Pc&&Ae(Le)){for($e=0;4>$e;++$e)Ae(Le)&&(ke.vd[$e]=X(Le,6));for($e=0;4>$e;++$e)Ae(Le)&&(ke.od[$e]=X(Le,6))}if(w.L=ke.Tb==0?0:ke.zd?1:2,Le.Ka)return fr(w,3,"cannot parse filter header");var ut=me;if(me=Oe=re,re=Oe+ut,ke=ut,w.Xb=(1<<B(w.m,2))-1,ut<3*($e=w.Xb))j=7;else{for(Oe+=3*$e,ke-=3*$e,ut=0;ut<$e;++ut){var Ot=j[me+0]|j[me+1]<<8|j[me+2]<<16;Ot>ke&&(Ot=ke),z(w.Jc[+ut],j,Oe,Ot),Oe+=Ot,ke-=Ot,me+=3}z(w.Jc[+$e],j,Oe,ke),j=Oe<re?0:5}if(j!=0)return fr(w,j,"cannot parse partitions");for(j=B(Oe=w.m,7),me=Ae(Oe)?X(Oe,4):0,re=Ae(Oe)?X(Oe,4):0,ke=Ae(Oe)?X(Oe,4):0,$e=Ae(Oe)?X(Oe,4):0,Oe=Ae(Oe)?X(Oe,4):0,ut=w.Qa,Ot=0;4>Ot;++Ot){if(ut.Cb){var Dt=ut.Zb[Ot];ut.Fb||(Dt+=j)}else{if(0<Ot){w.pb[Ot]=w.pb[0];continue}Dt=j}var xt=w.pb[Ot];xt.Sc[0]=tn[Er(Dt+me,127)],xt.Sc[1]=Mn[Er(Dt+0,127)],xt.Eb[0]=2*tn[Er(Dt+re,127)],xt.Eb[1]=101581*Mn[Er(Dt+ke,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=tn[Er(Dt+$e,117)],xt.Qc[1]=Mn[Er(Dt+Oe,127)],xt.lc=Dt+Oe}if(!Se.Rb)return fr(w,4,"Not a key frame.");for(Ae(Le),Se=w.Pa,j=0;4>j;++j){for(me=0;8>me;++me)for(re=0;3>re;++re)for(ke=0;11>ke;++ke)$e=Ee(Le,no[j][me][re][ke])?B(Le,8):gs[j][me][re][ke],Se.Wc[j][me].Yb[re][ke]=$e;for(me=0;17>me;++me)Se.Xc[j][me]=Se.Wc[j][Gc[me]]}return w.kc=Ae(Le),w.kc&&(w.Bd=B(Le,8)),w.cb=1}function Io(w,M,j,re,me,Le,Se){var ke=M[me].Yb[j];for(j=0;16>me;++me){if(!Ee(w,ke[j+0]))return me;for(;!Ee(w,ke[j+1]);)if(ke=M[++me].Yb[0],j=0,me==16)return 16;var Oe=M[me+1].Yb;if(Ee(w,ke[j+2])){var $e=w,ut=0;if(Ee($e,(Dt=ke)[(Ot=j)+3]))if(Ee($e,Dt[Ot+6])){for(ke=0,Ot=2*(ut=Ee($e,Dt[Ot+8]))+(Dt=Ee($e,Dt[Ot+9+ut])),ut=0,Dt=Cr[Ot];Dt[ke];++ke)ut+=ut+Ee($e,Dt[ke]);ut+=3+(8<<Ot)}else Ee($e,Dt[Ot+7])?(ut=7+2*Ee($e,165),ut+=Ee($e,145)):ut=5+Ee($e,159);else ut=Ee($e,Dt[Ot+4])?3+Ee($e,Dt[Ot+5]):2;ke=Oe[2]}else ut=1,ke=Oe[1];Oe=Se+Ki[me],0>($e=w).b&&be($e);var Ot,Dt=$e.b,xt=(Ot=$e.Ca>>1)-($e.I>>Dt)>>31;--$e.b,$e.Ca+=xt,$e.Ca|=1,$e.I-=(Ot+1&xt)<<Dt,Le[Oe]=((ut^xt)-xt)*re[(0<me)+0]}return 16}function Ul(w){var M=w.rb[w.sb-1];M.la=0,M.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function gr(w,M){if(w==null)return 0;if(M==null)return fr(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!da(w,M))return 0;if(e(w.cb),M.ac==null||M.ac(M)){M.ob&&(w.L=0);var j=Ca[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=M.v-j>>4,w.zb=M.j-j>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=M.o+15+j>>4,w.Hb=M.va+15+j>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var re=w.ed;for(j=0;4>j;++j){var me;if(w.Qa.Cb){var Le=w.Qa.Lb[j];w.Qa.Fb||(Le+=re.Tb)}else Le=re.Tb;for(me=0;1>=me;++me){var Se=w.gd[j][me],ke=Le;if(re.Pc&&(ke+=re.vd[0],me&&(ke+=re.od[0])),0<(ke=0>ke?0:63<ke?63:ke)){var Oe=ke;0<re.wb&&(Oe=4<re.wb?Oe>>2:Oe>>1)>9-re.wb&&(Oe=9-re.wb),1>Oe&&(Oe=1),Se.dd=Oe,Se.tc=2*ke+Oe,Se.ld=40<=ke?2:15<=ke?1:0}else Se.tc=0;Se.La=me}}}j=0}else fr(w,6,"Frame setup failed"),j=w.a;if(j=j==0){if(j){w.$c=0,0<w.Aa||(w.Ic=cd);e:{j=w.Ic,re=4*(Oe=w.za);var $e=32*Oe,ut=Oe+1,Ot=0<w.L?Oe*(0<w.Aa?2:1):0,Dt=(w.Aa==2?2:1)*Oe;if((Se=re+832+(me=3*(16*j+Ca[w.L])/2*$e)+(Le=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Se)j=0;else{if(Se>w.Vb){if(w.Vb=0,w.Ec=s(Se),w.Fc=0,w.Ec==null){j=fr(w,1,"no memory during frame initialization.");break e}w.Vb=Se}Se=w.Ec,ke=w.Fc,w.Ac=Se,w.Bc=ke,ke+=re,w.Gd=o($e,Du),w.Hd=0,w.rb=o(ut+1,hc),w.sb=1,w.wa=Ot?o(Ot,hu):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Oe),e(!0),w.oc=Se,w.pc=ke,ke+=832,w.ya=o(Dt,cl),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Oe),w.R=16*Oe,w.B=8*Oe,Oe=($e=Ca[w.L])*w.R,$e=$e/2*w.B,w.sa=Se,w.ta=ke+Oe,w.qa=w.sa,w.ra=w.ta+16*j*w.R+$e,w.Ha=w.qa,w.Ia=w.ra+8*j*w.B+$e,w.$c=0,ke+=me,w.mb=Le?Se:null,w.nb=Le?ke:null,e(ke+Le<=w.Fc+w.Vb),Ul(w),i(w.Ac,w.Bc,0,re),j=1}}if(j){if(M.ka=0,M.y=w.sa,M.O=w.ta,M.f=w.qa,M.N=w.ra,M.ea=w.Ha,M.Vd=w.Ia,M.fa=w.R,M.Rc=w.B,M.F=null,M.J=0,!ju){for(j=-255;255>=j;++j)gi[255+j]=0>j?-j:j;for(j=-1020;1020>=j;++j)wo[1020+j]=-128>j?-128:127<j?127:j;for(j=-112;112>=j;++j)eo[112+j]=-16>j?-16:15<j?15:j;for(j=-255;510>=j;++j)Po[255+j]=0>j?0:255<j?255:j;ju=1}bt=Ha,Vt=fl,En=pa,Un=Ti,hr=No,Mt=Iu,wi=mu,ri=Jo,Kl=Eo,Us=Yl,xi=Gl,na=ql,wa=ei,ra=mc,ia=Fi,sa=Jn,Dr=ji,Uo=ml,Ho[0]=$r,Ho[1]=fu,Ho[2]=mr,Ho[3]=Ro,Ho[4]=Bu,Ho[5]=pl,Ho[6]=dl,Ho[7]=Fo,Ho[8]=Ru,Ho[9]=qa,aa[0]=$l,aa[1]=Nu,aa[2]=Bo,aa[3]=ga,aa[4]=ns,aa[5]=pc,aa[6]=du,ko[0]=Ya,ko[1]=Wa,ko[2]=Vl,ko[3]=dr,ko[4]=Hl,ko[5]=gc,ko[6]=pu,j=1}else j=0}j&&(j=function(xt,Ht){for(xt.M=0;xt.M<xt.Va;++xt.M){var jt,ct=xt.Jc[xt.M&xt.Xb],yt=xt.m,Xt=xt;for(jt=0;jt<Xt.za;++jt){var an=yt,Qt=Xt,Pn=Qt.Ac,xn=Qt.Bc+4*jt,Hn=Qt.zc,h=Qt.ya[Qt.aa+jt];if(Qt.Qa.Bb?h.$b=Ee(an,Qt.Pa.jb[0])?2+Ee(an,Qt.Pa.jb[2]):Ee(an,Qt.Pa.jb[1]):h.$b=0,Qt.kc&&(h.Ad=Ee(an,Qt.Bd)),h.Za=!Ee(an,145)+0,h.Za){var g=h.Ob,_=0;for(Qt=0;4>Qt;++Qt){var x,k=Hn[0+Qt];for(x=0;4>x;++x){k=Li[Pn[xn+x]][k];for(var R=Oi[Ee(an,k[0])];0<R;)R=Oi[2*R+Ee(an,k[R])];k=-R,Pn[xn+x]=k}r(g,_,Pn,xn,4),_+=4,Hn[0+Qt]=k}}else k=Ee(an,156)?Ee(an,128)?1:3:Ee(an,163)?2:0,h.Ob[0]=k,i(Pn,xn,k,4),i(Hn,0,k,4);h.Dd=Ee(an,142)?Ee(an,114)?Ee(an,183)?1:3:2:0}if(Xt.m.Ka)return fr(xt,7,"Premature end-of-partition0 encountered.");for(;xt.ja<xt.za;++xt.ja){if(Xt=ct,an=(yt=xt).rb[yt.sb-1],Pn=yt.rb[yt.sb+yt.ja],jt=yt.ya[yt.aa+yt.ja],xn=yt.kc?jt.Ad:0)an.la=Pn.la=0,jt.Za||(an.Na=Pn.Na=0),jt.Hc=0,jt.Gc=0,jt.ia=0;else{var G,Z;if(an=Pn,Pn=Xt,xn=yt.Pa.Xc,Hn=yt.ya[yt.aa+yt.ja],h=yt.pb[Hn.$b],Qt=Hn.ad,g=0,_=yt.rb[yt.sb-1],k=x=0,i(Qt,g,0,384),Hn.Za)var he=0,_e=xn[3];else{R=s(16);var Ge=an.Na+_.Na;if(Ge=Vn(Pn,xn[1],Ge,h.Eb,0,R,0),an.Na=_.Na=(0<Ge)+0,1<Ge)bt(R,0,Qt,g);else{var ze=R[0]+3>>3;for(R=0;256>R;R+=16)Qt[g+R]=ze}he=1,_e=xn[0]}var vt=15&an.la,At=15&_.la;for(R=0;4>R;++R){var qt=1&At;for(ze=Z=0;4>ze;++ze)vt=vt>>1|(qt=(Ge=Vn(Pn,_e,Ge=qt+(1&vt),h.Sc,he,Qt,g))>he)<<7,Z=Z<<2|(3<Ge?3:1<Ge?2:Qt[g+0]!=0),g+=16;vt>>=4,At=At>>1|qt<<7,x=(x<<8|Z)>>>0}for(_e=vt,he=At>>4,G=0;4>G;G+=2){for(Z=0,vt=an.la>>4+G,At=_.la>>4+G,R=0;2>R;++R){for(qt=1&At,ze=0;2>ze;++ze)Ge=qt+(1&vt),vt=vt>>1|(qt=0<(Ge=Vn(Pn,xn[2],Ge,h.Qc,0,Qt,g)))<<3,Z=Z<<2|(3<Ge?3:1<Ge?2:Qt[g+0]!=0),g+=16;vt>>=2,At=At>>1|qt<<5}k|=Z<<4*G,_e|=vt<<4<<G,he|=(240&At)<<G}an.la=_e,_.la=he,Hn.Hc=x,Hn.Gc=k,Hn.ia=43690&k?0:h.ia,xn=!(x|k)}if(0<yt.L&&(yt.wa[yt.Y+yt.ja]=yt.gd[jt.$b][jt.Za],yt.wa[yt.Y+yt.ja].La|=!xn),Xt.Ka)return fr(xt,7,"Premature end-of-file encountered.")}if(Ul(xt),yt=Ht,Xt=1,jt=(ct=xt).D,an=0<ct.L&&ct.M>=ct.zb&&ct.M<=ct.Va,ct.Aa==0)e:{if(jt.M=ct.M,jt.uc=an,vu(ct,jt),Xt=1,jt=(Z=ct.D).Nb,an=(k=Ca[ct.L])*ct.R,Pn=k/2*ct.B,R=16*jt*ct.R,ze=8*jt*ct.B,xn=ct.sa,Hn=ct.ta-an+R,h=ct.qa,Qt=ct.ra-Pn+ze,g=ct.Ha,_=ct.Ia-Pn+ze,At=(vt=Z.M)==0,x=vt>=ct.Va-1,ct.Aa==2&&vu(ct,Z),Z.uc)for(qt=(Ge=ct).D.M,e(Ge.D.uc),Z=Ge.yb;Z<Ge.Hb;++Z){he=Z,_e=qt;var dn=(yn=(Ce=Ge).D).Nb;G=Ce.R;var yn=yn.wa[yn.Y+he],nr=Ce.sa,We=Ce.ta+16*dn*G+16*he,Ye=yn.dd,lt=yn.tc;if(lt!=0)if(e(3<=lt),Ce.L==1)0<he&&sa(nr,We,G,lt+4),yn.La&&Uo(nr,We,G,lt),0<_e&&ia(nr,We,G,lt+4),yn.La&&Dr(nr,We,G,lt);else{var It=Ce.B,wt=Ce.qa,Tt=Ce.ra+8*dn*It+8*he,fe=Ce.Ha,Ce=Ce.Ia+8*dn*It+8*he;dn=yn.ld,0<he&&(ri(nr,We,G,lt+4,Ye,dn),Us(wt,Tt,fe,Ce,It,lt+4,Ye,dn)),yn.La&&(na(nr,We,G,lt,Ye,dn),ra(wt,Tt,fe,Ce,It,lt,Ye,dn)),0<_e&&(wi(nr,We,G,lt+4,Ye,dn),Kl(wt,Tt,fe,Ce,It,lt+4,Ye,dn)),yn.La&&(xi(nr,We,G,lt,Ye,dn),wa(wt,Tt,fe,Ce,It,lt,Ye,dn))}}if(ct.ia&&alert("todo:DitherRow"),yt.put!=null){if(Z=16*vt,vt=16*(vt+1),At?(yt.y=ct.sa,yt.O=ct.ta+R,yt.f=ct.qa,yt.N=ct.ra+ze,yt.ea=ct.Ha,yt.W=ct.Ia+ze):(Z-=k,yt.y=xn,yt.O=Hn,yt.f=h,yt.N=Qt,yt.ea=g,yt.W=_),x||(vt-=k),vt>yt.o&&(vt=yt.o),yt.F=null,yt.J=null,ct.Fa!=null&&0<ct.Fa.length&&Z<vt&&(yt.J=zi(ct,yt,Z,vt-Z),yt.F=ct.mb,yt.F==null&&yt.F.length==0)){Xt=fr(ct,3,"Could not decode alpha data.");break e}Z<yt.j&&(k=yt.j-Z,Z=yt.j,e(!(1&k)),yt.O+=ct.R*k,yt.N+=ct.B*(k>>1),yt.W+=ct.B*(k>>1),yt.F!=null&&(yt.J+=yt.width*k)),Z<vt&&(yt.O+=yt.v,yt.N+=yt.v>>1,yt.W+=yt.v>>1,yt.F!=null&&(yt.J+=yt.v),yt.ka=Z-yt.j,yt.U=yt.va-yt.v,yt.T=vt-Z,Xt=yt.put(yt))}jt+1!=ct.Ic||x||(r(ct.sa,ct.ta-an,xn,Hn+16*ct.R,an),r(ct.qa,ct.ra-Pn,h,Qt+8*ct.B,Pn),r(ct.Ha,ct.Ia-Pn,g,_+8*ct.B,Pn))}if(!Xt)return fr(xt,6,"Output aborted.")}return 1}(w,M)),M.bc!=null&&M.bc(M),j&=1}return j?(w.cb=0,j):0}function qr(w,M,j,re,me){me=w[M+j+32*re]+(me>>3),w[M+j+32*re]=-256&me?0>me?0:255:me}function Va(w,M,j,re,me,Le){qr(w,M,0,j,re+me),qr(w,M,1,j,re+Le),qr(w,M,2,j,re-Le),qr(w,M,3,j,re-me)}function xs(w){return(20091*w>>16)+w}function Ls(w,M,j,re){var me,Le=0,Se=s(16);for(me=0;4>me;++me){var ke=w[M+0]+w[M+8],Oe=w[M+0]-w[M+8],$e=(35468*w[M+4]>>16)-xs(w[M+12]),ut=xs(w[M+4])+(35468*w[M+12]>>16);Se[Le+0]=ke+ut,Se[Le+1]=Oe+$e,Se[Le+2]=Oe-$e,Se[Le+3]=ke-ut,Le+=4,M++}for(me=Le=0;4>me;++me)ke=(w=Se[Le+0]+4)+Se[Le+8],Oe=w-Se[Le+8],$e=(35468*Se[Le+4]>>16)-xs(Se[Le+12]),qr(j,re,0,0,ke+(ut=xs(Se[Le+4])+(35468*Se[Le+12]>>16))),qr(j,re,1,0,Oe+$e),qr(j,re,2,0,Oe-$e),qr(j,re,3,0,ke-ut),Le++,re+=32}function Iu(w,M,j,re){var me=w[M+0]+4,Le=35468*w[M+4]>>16,Se=xs(w[M+4]),ke=35468*w[M+1]>>16;Va(j,re,0,me+Se,w=xs(w[M+1]),ke),Va(j,re,1,me+Le,w,ke),Va(j,re,2,me-Le,w,ke),Va(j,re,3,me-Se,w,ke)}function fl(w,M,j,re,me){Ls(w,M,j,re),me&&Ls(w,M+16,j,re+4)}function pa(w,M,j,re){Vt(w,M+0,j,re,1),Vt(w,M+32,j,re+128,1)}function Ti(w,M,j,re){var me;for(w=w[M+0]+4,me=0;4>me;++me)for(M=0;4>M;++M)qr(j,re,M,me,w)}function No(w,M,j,re){w[M+0]&&Un(w,M+0,j,re),w[M+16]&&Un(w,M+16,j,re+4),w[M+32]&&Un(w,M+32,j,re+128),w[M+48]&&Un(w,M+48,j,re+128+4)}function Ha(w,M,j,re){var me,Le=s(16);for(me=0;4>me;++me){var Se=w[M+0+me]+w[M+12+me],ke=w[M+4+me]+w[M+8+me],Oe=w[M+4+me]-w[M+8+me],$e=w[M+0+me]-w[M+12+me];Le[0+me]=Se+ke,Le[8+me]=Se-ke,Le[4+me]=$e+Oe,Le[12+me]=$e-Oe}for(me=0;4>me;++me)Se=(w=Le[0+4*me]+3)+Le[3+4*me],ke=Le[1+4*me]+Le[2+4*me],Oe=Le[1+4*me]-Le[2+4*me],$e=w-Le[3+4*me],j[re+0]=Se+ke>>3,j[re+16]=$e+Oe>>3,j[re+32]=Se-ke>>3,j[re+48]=$e-Oe>>3,re+=64}function mo(w,M,j){var re,me=M-32,Le=pi,Se=255-w[me-1];for(re=0;re<j;++re){var ke,Oe=Le,$e=Se+w[M-1];for(ke=0;ke<j;++ke)w[M+ke]=Oe[$e+w[me+ke]];M+=32}}function fu(w,M){mo(w,M,4)}function Wa(w,M){mo(w,M,8)}function Nu(w,M){mo(w,M,16)}function Bo(w,M){var j;for(j=0;16>j;++j)r(w,M+32*j,w,M-32,16)}function ga(w,M){var j;for(j=16;0<j;--j)i(w,M,w[M-1],16),M+=32}function Ga(w,M,j){var re;for(re=0;16>re;++re)i(M,j+32*re,w,16)}function $l(w,M){var j,re=16;for(j=0;16>j;++j)re+=w[M-1+32*j]+w[M+j-32];Ga(re>>5,w,M)}function ns(w,M){var j,re=8;for(j=0;16>j;++j)re+=w[M-1+32*j];Ga(re>>4,w,M)}function pc(w,M){var j,re=8;for(j=0;16>j;++j)re+=w[M+j-32];Ga(re>>4,w,M)}function du(w,M){Ga(128,w,M)}function cr(w,M,j){return w+2*M+j+2>>2}function mr(w,M){var j,re=M-32;for(re=new Uint8Array([cr(w[re-1],w[re+0],w[re+1]),cr(w[re+0],w[re+1],w[re+2]),cr(w[re+1],w[re+2],w[re+3]),cr(w[re+2],w[re+3],w[re+4])]),j=0;4>j;++j)r(w,M+32*j,re,0,re.length)}function Ro(w,M){var j=w[M-1],re=w[M-1+32],me=w[M-1+64],Le=w[M-1+96];Je(w,M+0,16843009*cr(w[M-1-32],j,re)),Je(w,M+32,16843009*cr(j,re,me)),Je(w,M+64,16843009*cr(re,me,Le)),Je(w,M+96,16843009*cr(me,Le,Le))}function $r(w,M){var j,re=4;for(j=0;4>j;++j)re+=w[M+j-32]+w[M-1+32*j];for(re>>=3,j=0;4>j;++j)i(w,M+32*j,re,4)}function Bu(w,M){var j=w[M-1+0],re=w[M-1+32],me=w[M-1+64],Le=w[M-1-32],Se=w[M+0-32],ke=w[M+1-32],Oe=w[M+2-32],$e=w[M+3-32];w[M+0+96]=cr(re,me,w[M-1+96]),w[M+1+96]=w[M+0+64]=cr(j,re,me),w[M+2+96]=w[M+1+64]=w[M+0+32]=cr(Le,j,re),w[M+3+96]=w[M+2+64]=w[M+1+32]=w[M+0+0]=cr(Se,Le,j),w[M+3+64]=w[M+2+32]=w[M+1+0]=cr(ke,Se,Le),w[M+3+32]=w[M+2+0]=cr(Oe,ke,Se),w[M+3+0]=cr($e,Oe,ke)}function dl(w,M){var j=w[M+1-32],re=w[M+2-32],me=w[M+3-32],Le=w[M+4-32],Se=w[M+5-32],ke=w[M+6-32],Oe=w[M+7-32];w[M+0+0]=cr(w[M+0-32],j,re),w[M+1+0]=w[M+0+32]=cr(j,re,me),w[M+2+0]=w[M+1+32]=w[M+0+64]=cr(re,me,Le),w[M+3+0]=w[M+2+32]=w[M+1+64]=w[M+0+96]=cr(me,Le,Se),w[M+3+32]=w[M+2+64]=w[M+1+96]=cr(Le,Se,ke),w[M+3+64]=w[M+2+96]=cr(Se,ke,Oe),w[M+3+96]=cr(ke,Oe,Oe)}function pl(w,M){var j=w[M-1+0],re=w[M-1+32],me=w[M-1+64],Le=w[M-1-32],Se=w[M+0-32],ke=w[M+1-32],Oe=w[M+2-32],$e=w[M+3-32];w[M+0+0]=w[M+1+64]=Le+Se+1>>1,w[M+1+0]=w[M+2+64]=Se+ke+1>>1,w[M+2+0]=w[M+3+64]=ke+Oe+1>>1,w[M+3+0]=Oe+$e+1>>1,w[M+0+96]=cr(me,re,j),w[M+0+64]=cr(re,j,Le),w[M+0+32]=w[M+1+96]=cr(j,Le,Se),w[M+1+32]=w[M+2+96]=cr(Le,Se,ke),w[M+2+32]=w[M+3+96]=cr(Se,ke,Oe),w[M+3+32]=cr(ke,Oe,$e)}function Fo(w,M){var j=w[M+0-32],re=w[M+1-32],me=w[M+2-32],Le=w[M+3-32],Se=w[M+4-32],ke=w[M+5-32],Oe=w[M+6-32],$e=w[M+7-32];w[M+0+0]=j+re+1>>1,w[M+1+0]=w[M+0+64]=re+me+1>>1,w[M+2+0]=w[M+1+64]=me+Le+1>>1,w[M+3+0]=w[M+2+64]=Le+Se+1>>1,w[M+0+32]=cr(j,re,me),w[M+1+32]=w[M+0+96]=cr(re,me,Le),w[M+2+32]=w[M+1+96]=cr(me,Le,Se),w[M+3+32]=w[M+2+96]=cr(Le,Se,ke),w[M+3+64]=cr(Se,ke,Oe),w[M+3+96]=cr(ke,Oe,$e)}function qa(w,M){var j=w[M-1+0],re=w[M-1+32],me=w[M-1+64],Le=w[M-1+96];w[M+0+0]=j+re+1>>1,w[M+2+0]=w[M+0+32]=re+me+1>>1,w[M+2+32]=w[M+0+64]=me+Le+1>>1,w[M+1+0]=cr(j,re,me),w[M+3+0]=w[M+1+32]=cr(re,me,Le),w[M+3+32]=w[M+1+64]=cr(me,Le,Le),w[M+3+64]=w[M+2+64]=w[M+0+96]=w[M+1+96]=w[M+2+96]=w[M+3+96]=Le}function Ru(w,M){var j=w[M-1+0],re=w[M-1+32],me=w[M-1+64],Le=w[M-1+96],Se=w[M-1-32],ke=w[M+0-32],Oe=w[M+1-32],$e=w[M+2-32];w[M+0+0]=w[M+2+32]=j+Se+1>>1,w[M+0+32]=w[M+2+64]=re+j+1>>1,w[M+0+64]=w[M+2+96]=me+re+1>>1,w[M+0+96]=Le+me+1>>1,w[M+3+0]=cr(ke,Oe,$e),w[M+2+0]=cr(Se,ke,Oe),w[M+1+0]=w[M+3+32]=cr(j,Se,ke),w[M+1+32]=w[M+3+64]=cr(re,j,Se),w[M+1+64]=w[M+3+96]=cr(me,re,j),w[M+1+96]=cr(Le,me,re)}function Vl(w,M){var j;for(j=0;8>j;++j)r(w,M+32*j,w,M-32,8)}function dr(w,M){var j;for(j=0;8>j;++j)i(w,M,w[M-1],8),M+=32}function kr(w,M,j){var re;for(re=0;8>re;++re)i(M,j+32*re,w,8)}function Ya(w,M){var j,re=8;for(j=0;8>j;++j)re+=w[M+j-32]+w[M-1+32*j];kr(re>>4,w,M)}function gc(w,M){var j,re=4;for(j=0;8>j;++j)re+=w[M+j-32];kr(re>>3,w,M)}function Hl(w,M){var j,re=4;for(j=0;8>j;++j)re+=w[M-1+32*j];kr(re>>3,w,M)}function pu(w,M){kr(128,w,M)}function gl(w,M,j){var re=w[M-j],me=w[M+0],Le=3*(me-re)+oa[1020+w[M-2*j]-w[M+j]],Se=Zi[112+(Le+4>>3)];w[M-j]=pi[255+re+Zi[112+(Le+3>>3)]],w[M+0]=pi[255+me-Se]}function Wl(w,M,j,re){var me=w[M+0],Le=w[M+j];return As[255+w[M-2*j]-w[M-j]]>re||As[255+Le-me]>re}function gu(w,M,j,re){return 4*As[255+w[M-j]-w[M+0]]+As[255+w[M-2*j]-w[M+j]]<=re}function Or(w,M,j,re,me){var Le=w[M-3*j],Se=w[M-2*j],ke=w[M-j],Oe=w[M+0],$e=w[M+j],ut=w[M+2*j],Ot=w[M+3*j];return 4*As[255+ke-Oe]+As[255+Se-$e]>re?0:As[255+w[M-4*j]-Le]<=me&&As[255+Le-Se]<=me&&As[255+Se-ke]<=me&&As[255+Ot-ut]<=me&&As[255+ut-$e]<=me&&As[255+$e-Oe]<=me}function Fi(w,M,j,re){var me=2*re+1;for(re=0;16>re;++re)gu(w,M+re,j,me)&&gl(w,M+re,j)}function Jn(w,M,j,re){var me=2*re+1;for(re=0;16>re;++re)gu(w,M+re*j,1,me)&&gl(w,M+re*j,1)}function ji(w,M,j,re){var me;for(me=3;0<me;--me)Fi(w,M+=4*j,j,re)}function ml(w,M,j,re){var me;for(me=3;0<me;--me)Jn(w,M+=4,j,re)}function ma(w,M,j,re,me,Le,Se,ke){for(Le=2*Le+1;0<me--;){if(Or(w,M,j,Le,Se))if(Wl(w,M,j,ke))gl(w,M,j);else{var Oe=w,$e=M,ut=j,Ot=Oe[$e-2*ut],Dt=Oe[$e-ut],xt=Oe[$e+0],Ht=Oe[$e+ut],jt=Oe[$e+2*ut],ct=27*(Xt=oa[1020+3*(xt-Dt)+oa[1020+Ot-Ht]])+63>>7,yt=18*Xt+63>>7,Xt=9*Xt+63>>7;Oe[$e-3*ut]=pi[255+Oe[$e-3*ut]+Xt],Oe[$e-2*ut]=pi[255+Ot+yt],Oe[$e-ut]=pi[255+Dt+ct],Oe[$e+0]=pi[255+xt-ct],Oe[$e+ut]=pi[255+Ht-yt],Oe[$e+2*ut]=pi[255+jt-Xt]}M+=re}}function _i(w,M,j,re,me,Le,Se,ke){for(Le=2*Le+1;0<me--;){if(Or(w,M,j,Le,Se))if(Wl(w,M,j,ke))gl(w,M,j);else{var Oe=w,$e=M,ut=j,Ot=Oe[$e-ut],Dt=Oe[$e+0],xt=Oe[$e+ut],Ht=Zi[112+((jt=3*(Dt-Ot))+4>>3)],jt=Zi[112+(jt+3>>3)],ct=Ht+1>>1;Oe[$e-2*ut]=pi[255+Oe[$e-2*ut]+ct],Oe[$e-ut]=pi[255+Ot+jt],Oe[$e+0]=pi[255+Dt-Ht],Oe[$e+ut]=pi[255+xt-ct]}M+=re}}function mu(w,M,j,re,me,Le){ma(w,M,j,1,16,re,me,Le)}function Jo(w,M,j,re,me,Le){ma(w,M,1,j,16,re,me,Le)}function Gl(w,M,j,re,me,Le){var Se;for(Se=3;0<Se;--Se)_i(w,M+=4*j,j,1,16,re,me,Le)}function ql(w,M,j,re,me,Le){var Se;for(Se=3;0<Se;--Se)_i(w,M+=4,1,j,16,re,me,Le)}function Eo(w,M,j,re,me,Le,Se,ke){ma(w,M,me,1,8,Le,Se,ke),ma(j,re,me,1,8,Le,Se,ke)}function Yl(w,M,j,re,me,Le,Se,ke){ma(w,M,1,me,8,Le,Se,ke),ma(j,re,1,me,8,Le,Se,ke)}function ei(w,M,j,re,me,Le,Se,ke){_i(w,M+4*me,me,1,8,Le,Se,ke),_i(j,re+4*me,me,1,8,Le,Se,ke)}function mc(w,M,j,re,me,Le,Se,ke){_i(w,M+4,1,me,8,Le,Se,ke),_i(j,re+4,1,me,8,Le,Se,ke)}function cs(){this.ba=new qn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new rr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function jo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Zl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zo(){this.ua=0,this.Wa=new Q,this.vb=new Q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ae,this.yc=new H}function vl(){this.xb=this.a=0,this.l=new So,this.ca=new qn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new J,this.Pb=0,this.wd=new J,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zo,this.ab=0,this.gc=o(4,Zl),this.Oc=0}function yl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new So,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ti(w,M,j,re,me,Le,Se){for(w=w==null?0:w[M+0],M=0;M<Se;++M)me[Le+M]=w+j[re+M]&255,w=me[Le+M]}function vo(w,M,j,re,me,Le,Se){var ke;if(w==null)ti(null,null,j,re,me,Le,Se);else for(ke=0;ke<Se;++ke)me[Le+ke]=w[M+ke]+j[re+ke]&255}function va(w,M,j,re,me,Le,Se){if(w==null)ti(null,null,j,re,me,Le,Se);else{var ke,Oe=w[M+0],$e=Oe,ut=Oe;for(ke=0;ke<Se;++ke)$e=ut+(Oe=w[M+ke])-$e,ut=j[re+ke]+(-256&$e?0>$e?0:255:$e)&255,$e=Oe,me[Le+ke]=ut}}function zi(w,M,j,re){var me=M.width,Le=M.o;if(e(w!=null&&M!=null),0>j||0>=re||j+re>Le)return null;if(!w.Cc){if(w.ga==null){var Se;if(w.ga=new yl,(Se=w.ga==null)||(Se=M.width*M.o,e(w.Gb.length==0),w.Gb=s(Se),w.Uc=0,w.Gb==null?Se=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Se=1),Se=!Se),!Se){Se=w.ga;var ke=w.Fa,Oe=w.P,$e=w.qc,ut=w.mb,Ot=w.nb,Dt=Oe+1,xt=$e-1,Ht=Se.l;if(e(ke!=null&&ut!=null&&M!=null),Xr[0]=null,Xr[1]=ti,Xr[2]=vo,Xr[3]=va,Se.ca=ut,Se.tb=Ot,Se.c=M.width,Se.i=M.height,e(0<Se.c&&0<Se.i),1>=$e)M=0;else if(Se.$a=ke[Oe+0]>>0&3,Se.Z=ke[Oe+0]>>2&3,Se.Lc=ke[Oe+0]>>4&3,Oe=ke[Oe+0]>>6&3,0>Se.$a||1<Se.$a||4<=Se.Z||1<Se.Lc||Oe)M=0;else if(Ht.put=Rs,Ht.ac=Pi,Ht.bc=ls,Ht.ma=Se,Ht.width=M.width,Ht.height=M.height,Ht.Da=M.Da,Ht.v=M.v,Ht.va=M.va,Ht.j=M.j,Ht.o=M.o,Se.$a)e:{e(Se.$a==1),M=Ur();t:for(;;){if(M==null){M=0;break e}if(e(Se!=null),Se.mc=M,M.c=Se.c,M.i=Se.i,M.l=Se.l,M.l.ma=Se,M.l.width=Se.c,M.l.height=Se.i,M.a=0,K(M.m,ke,Dt,xt),!Xn(Se.c,Se.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&fn(M.s)?(Se.ic=1,ke=M.c*M.i,M.Ta=null,M.Ua=0,M.V=s(ke),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(Se.ic=0,M=Ai(M,Se.c)),!M))break t;M=1;break e}Se.mc=null,M=0}else M=xt>=Se.c*Se.i;Se=!M}if(Se)return null;w.ga.Lc!=1?w.Ga=0:re=Le-j}e(w.ga!=null),e(j+re<=Le);e:{if(M=(ke=w.ga).c,Le=ke.l.o,ke.$a==0){if(Dt=w.rc,xt=w.Vc,Ht=w.Fa,Oe=w.P+1+j*M,$e=w.mb,ut=w.nb+j*M,e(Oe<=w.P+w.qc),ke.Z!=0)for(e(Xr[ke.Z]!=null),Se=0;Se<re;++Se)Xr[ke.Z](Dt,xt,Ht,Oe,$e,ut,M),Dt=$e,xt=ut,ut+=M,Oe+=M;else for(Se=0;Se<re;++Se)r($e,ut,Ht,Oe,M),Dt=$e,xt=ut,ut+=M,Oe+=M;w.rc=Dt,w.Vc=xt}else{if(e(ke.mc!=null),M=j+re,e((Se=ke.mc)!=null),e(M<=Se.i),Se.C>=M)M=1;else if(ke.ic||Lt(),ke.ic){ke=Se.V,Dt=Se.Ba,xt=Se.c;var jt=Se.i,ct=(Ht=1,Oe=Se.$/xt,$e=Se.$%xt,ut=Se.m,Ot=Se.s,Se.$),yt=xt*jt,Xt=xt*M,an=Ot.wc,Qt=ct<Xt?Gt(Ot,$e,Oe):null;e(ct<=yt),e(M<=jt),e(fn(Ot));t:for(;;){for(;!ut.h&&ct<Xt;){if($e&an||(Qt=Gt(Ot,$e,Oe)),e(Qt!=null),we(ut),256>(jt=On(Qt.G[0],Qt.H[0],ut)))ke[Dt+ct]=jt,++ct,++$e>=xt&&($e=0,++Oe<=M&&!(Oe%16)&&Tn(Se,Oe));else{if(!(280>jt)){Ht=0;break t}jt=Ke(jt-256,ut);var Pn,xn=On(Qt.G[4],Qt.H[4],ut);if(we(ut),!(ct>=(xn=$t(xt,xn=Ke(xn,ut)))&&yt-ct>=jt)){Ht=0;break t}for(Pn=0;Pn<jt;++Pn)ke[Dt+ct+Pn]=ke[Dt+ct+Pn-xn];for(ct+=jt,$e+=jt;$e>=xt;)$e-=xt,++Oe<=M&&!(Oe%16)&&Tn(Se,Oe);ct<Xt&&$e&an&&(Qt=Gt(Ot,$e,Oe))}e(ut.h==se(ut))}Tn(Se,Oe>M?M:Oe);break t}!Ht||ut.h&&ct<yt?(Ht=0,Se.a=ut.h?5:3):Se.$=ct,M=Ht}else M=er(Se,Se.V,Se.Ba,Se.c,Se.i,M,Wr);if(!M){re=0;break e}}j+re>=Le&&(w.Cc=1),re=1}if(!re)return null;if(w.Cc&&((re=w.ga)!=null&&(re.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+j*me}function I(w,M,j,re,me,Le){for(;0<me--;){var Se,ke=w,Oe=M+(j?1:0),$e=w,ut=M+(j?0:3);for(Se=0;Se<re;++Se){var Ot=$e[ut+4*Se];Ot!=255&&(Ot*=32897,ke[Oe+4*Se+0]=ke[Oe+4*Se+0]*Ot>>23,ke[Oe+4*Se+1]=ke[Oe+4*Se+1]*Ot>>23,ke[Oe+4*Se+2]=ke[Oe+4*Se+2]*Ot>>23)}M+=Le}}function ge(w,M,j,re,me){for(;0<re--;){var Le;for(Le=0;Le<j;++Le){var Se=w[M+2*Le+0],ke=15&($e=w[M+2*Le+1]),Oe=4369*ke,$e=(240&$e|$e>>4)*Oe>>16;w[M+2*Le+0]=(240&Se|Se>>4)*Oe>>16&240|(15&Se|Se<<4)*Oe>>16>>4&15,w[M+2*Le+1]=240&$e|ke}M+=me}}function He(w,M,j,re,me,Le,Se,ke){var Oe,$e,ut=255;for($e=0;$e<me;++$e){for(Oe=0;Oe<re;++Oe){var Ot=w[M+Oe];Le[Se+4*Oe]=Ot,ut&=Ot}M+=j,Se+=ke}return ut!=255}function st(w,M,j,re,me){var Le;for(Le=0;Le<me;++Le)j[re+Le]=w[M+Le]>>8}function Lt(){fs=I,ii=ge,li=He,$i=st}function Nt(w,M,j){V[w]=function(re,me,Le,Se,ke,Oe,$e,ut,Ot,Dt,xt,Ht,jt,ct,yt,Xt,an){var Qt,Pn=an-1>>1,xn=ke[Oe+0]|$e[ut+0]<<16,Hn=Ot[Dt+0]|xt[Ht+0]<<16;e(re!=null);var h=3*xn+Hn+131074>>2;for(M(re[me+0],255&h,h>>16,jt,ct),Le!=null&&(h=3*Hn+xn+131074>>2,M(Le[Se+0],255&h,h>>16,yt,Xt)),Qt=1;Qt<=Pn;++Qt){var g=ke[Oe+Qt]|$e[ut+Qt]<<16,_=Ot[Dt+Qt]|xt[Ht+Qt]<<16,x=xn+g+Hn+_+524296,k=x+2*(g+Hn)>>3;h=k+xn>>1,xn=(x=x+2*(xn+_)>>3)+g>>1,M(re[me+2*Qt-1],255&h,h>>16,jt,ct+(2*Qt-1)*j),M(re[me+2*Qt-0],255&xn,xn>>16,jt,ct+(2*Qt-0)*j),Le!=null&&(h=x+Hn>>1,xn=k+_>>1,M(Le[Se+2*Qt-1],255&h,h>>16,yt,Xt+(2*Qt-1)*j),M(Le[Se+2*Qt+0],255&xn,xn>>16,yt,Xt+(2*Qt+0)*j)),xn=g,Hn=_}1&an||(h=3*xn+Hn+131074>>2,M(re[me+an-1],255&h,h>>16,jt,ct+(an-1)*j),Le!=null&&(h=3*Hn+xn+131074>>2,M(Le[Se+an-1],255&h,h>>16,yt,Xt+(an-1)*j)))}}function sn(){Ts[to]=Me,Ts[sr]=zu,Ts[xa]=ro,Ts[La]=ms,Ts[$o]=Pr,Ts[$s]=Sh,Ts[Wc]=od,Ts[ds]=zu,Ts[ps]=ms,Ts[Vo]=Pr,Ts[u]=Sh}function kn(w){return w&-16384?0>w?0:255:w>>vp}function In(w,M){return kn((19077*w>>8)+(26149*M>>8)-14234)}function Yn(w,M,j){return kn((19077*w>>8)-(6419*M>>8)-(13320*j>>8)+8708)}function ur(w,M){return kn((19077*w>>8)+(33050*M>>8)-17685)}function Sr(w,M,j,re,me){re[me+0]=In(w,j),re[me+1]=Yn(w,M,j),re[me+2]=ur(w,M)}function bi(w,M,j,re,me){re[me+0]=ur(w,M),re[me+1]=Yn(w,M,j),re[me+2]=In(w,j)}function Zr(w,M,j,re,me){var Le=Yn(w,M,j);M=Le<<3&224|ur(w,M)>>3,re[me+0]=248&In(w,j)|Le>>5,re[me+1]=M}function ni(w,M,j,re,me){var Le=240&ur(w,M)|15;re[me+0]=240&In(w,j)|Yn(w,M,j)>>4,re[me+1]=Le}function Ui(w,M,j,re,me){re[me+0]=255,Sr(w,M,j,re,me+1)}function qi(w,M,j,re,me){bi(w,M,j,re,me),re[me+3]=255}function yo(w,M,j,re,me){Sr(w,M,j,re,me),re[me+3]=255}function Er(w,M){return 0>w?0:w>M?M:w}function Cs(w,M,j){V[w]=function(re,me,Le,Se,ke,Oe,$e,ut,Ot){for(var Dt=ut+(-2&Ot)*j;ut!=Dt;)M(re[me+0],Le[Se+0],ke[Oe+0],$e,ut),M(re[me+1],Le[Se+0],ke[Oe+0],$e,ut+j),me+=2,++Se,++Oe,ut+=2*j;1&Ot&&M(re[me+0],Le[Se+0],ke[Oe+0],$e,ut)}}function bl(w,M,j){return j==0?w==0?M==0?6:5:M==0?4:0:j}function Fs(w,M,j,re,me){switch(w>>>30){case 3:Vt(M,j,re,me,0);break;case 2:Mt(M,j,re,me);break;case 1:Un(M,j,re,me)}}function vu(w,M){var j,re,me=M.M,Le=M.Nb,Se=w.oc,ke=w.pc+40,Oe=w.oc,$e=w.pc+584,ut=w.oc,Ot=w.pc+600;for(j=0;16>j;++j)Se[ke+32*j-1]=129;for(j=0;8>j;++j)Oe[$e+32*j-1]=129,ut[Ot+32*j-1]=129;for(0<me?Se[ke-1-32]=Oe[$e-1-32]=ut[Ot-1-32]=129:(i(Se,ke-32-1,127,21),i(Oe,$e-32-1,127,9),i(ut,Ot-32-1,127,9)),re=0;re<w.za;++re){var Dt=M.ya[M.aa+re];if(0<re){for(j=-1;16>j;++j)r(Se,ke+32*j-4,Se,ke+32*j+12,4);for(j=-1;8>j;++j)r(Oe,$e+32*j-4,Oe,$e+32*j+4,4),r(ut,Ot+32*j-4,ut,Ot+32*j+4,4)}var xt=w.Gd,Ht=w.Hd+re,jt=Dt.ad,ct=Dt.Hc;if(0<me&&(r(Se,ke-32,xt[Ht].y,0,16),r(Oe,$e-32,xt[Ht].f,0,8),r(ut,Ot-32,xt[Ht].ea,0,8)),Dt.Za){var yt=Se,Xt=ke-32+16;for(0<me&&(re>=w.za-1?i(yt,Xt,xt[Ht].y[15],4):r(yt,Xt,xt[Ht+1].y,0,4)),j=0;4>j;j++)yt[Xt+128+j]=yt[Xt+256+j]=yt[Xt+384+j]=yt[Xt+0+j];for(j=0;16>j;++j,ct<<=2)yt=Se,Xt=ke+ld[j],Ho[Dt.Ob[j]](yt,Xt),Fs(ct,jt,16*+j,yt,Xt)}else if(yt=bl(re,me,Dt.Ob[0]),aa[yt](Se,ke),ct!=0)for(j=0;16>j;++j,ct<<=2)Fs(ct,jt,16*+j,Se,ke+ld[j]);for(j=Dt.Gc,yt=bl(re,me,Dt.Dd),ko[yt](Oe,$e),ko[yt](ut,Ot),ct=jt,yt=Oe,Xt=$e,255&(Dt=j>>0)&&(170&Dt?En(ct,256,yt,Xt):hr(ct,256,yt,Xt)),Dt=ut,ct=Ot,255&(j>>=8)&&(170&j?En(jt,320,Dt,ct):hr(jt,320,Dt,ct)),me<w.Ub-1&&(r(xt[Ht].y,0,Se,ke+480,16),r(xt[Ht].f,0,Oe,$e+224,8),r(xt[Ht].ea,0,ut,Ot+224,8)),j=8*Le*w.B,xt=w.sa,Ht=w.ta+16*re+16*Le*w.R,jt=w.qa,Dt=w.ra+8*re+j,ct=w.Ha,yt=w.Ia+8*re+j,j=0;16>j;++j)r(xt,Ht+j*w.R,Se,ke+32*j,16);for(j=0;8>j;++j)r(jt,Dt+j*w.B,Oe,$e+32*j,8),r(ct,yt+j*w.B,ut,Ot+32*j,8)}}function Qo(w,M,j,re,me,Le,Se,ke,Oe){var $e=[0],ut=[0],Ot=0,Dt=Oe!=null?Oe.kd:0,xt=Oe??new jo;if(w==null||12>j)return 7;xt.data=w,xt.w=M,xt.ha=j,M=[M],j=[j],xt.gb=[xt.gb];e:{var Ht=M,jt=j,ct=xt.gb;if(e(w!=null),e(jt!=null),e(ct!=null),ct[0]=0,12<=jt[0]&&!n(w,Ht[0],"RIFF")){if(n(w,Ht[0]+8,"WEBP")){ct=3;break e}var yt=ue(w,Ht[0]+4);if(12>yt||4294967286<yt){ct=3;break e}if(Dt&&yt>jt[0]-8){ct=7;break e}ct[0]=yt,Ht[0]+=12,jt[0]-=12}ct=0}if(ct!=0)return ct;for(yt=0<xt.gb[0],j=j[0];;){e:{var Xt=w;jt=M,ct=j;var an=$e,Qt=ut,Pn=Ht=[0];if((h=Ot=[Ot])[0]=0,8>ct[0])ct=7;else{if(!n(Xt,jt[0],"VP8X")){if(ue(Xt,jt[0]+4)!=10){ct=3;break e}if(18>ct[0]){ct=7;break e}var xn=ue(Xt,jt[0]+8),Hn=1+_t(Xt,jt[0]+12);if(2147483648<=Hn*(Xt=1+_t(Xt,jt[0]+15))){ct=3;break e}Pn!=null&&(Pn[0]=xn),an!=null&&(an[0]=Hn),Qt!=null&&(Qt[0]=Xt),jt[0]+=18,ct[0]-=18,h[0]=1}ct=0}}if(Ot=Ot[0],Ht=Ht[0],ct!=0)return ct;if(jt=!!(2&Ht),!yt&&Ot)return 3;if(Le!=null&&(Le[0]=!!(16&Ht)),Se!=null&&(Se[0]=jt),ke!=null&&(ke[0]=0),Se=$e[0],Ht=ut[0],Ot&&jt&&Oe==null){ct=0;break}if(4>j){ct=7;break}if(yt&&Ot||!yt&&!Ot&&!n(w,M[0],"ALPH")){j=[j],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];e:{xn=w,ct=M,yt=j;var h=xt.gb;an=xt.na,Qt=xt.P,Pn=xt.Sa,Hn=22,e(xn!=null),e(yt!=null),Xt=ct[0];var g=yt[0];for(e(an!=null),e(Pn!=null),an[0]=null,Qt[0]=null,Pn[0]=0;;){if(ct[0]=Xt,yt[0]=g,8>g){ct=7;break e}var _=ue(xn,Xt+4);if(4294967286<_){ct=3;break e}var x=8+_+1&-2;if(Hn+=x,0<h&&Hn>h){ct=3;break e}if(!n(xn,Xt,"VP8 ")||!n(xn,Xt,"VP8L")){ct=0;break e}if(g[0]<x){ct=7;break e}n(xn,Xt,"ALPH")||(an[0]=xn,Qt[0]=Xt+8,Pn[0]=_),Xt+=x,g-=x}}if(j=j[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],ct!=0)break}j=[j],xt.Ja=[xt.Ja],xt.xa=[xt.xa];e:if(h=w,ct=M,yt=j,an=xt.gb[0],Qt=xt.Ja,Pn=xt.xa,xn=ct[0],Xt=!n(h,xn,"VP8 "),Hn=!n(h,xn,"VP8L"),e(h!=null),e(yt!=null),e(Qt!=null),e(Pn!=null),8>yt[0])ct=7;else{if(Xt||Hn){if(h=ue(h,xn+4),12<=an&&h>an-12){ct=3;break e}if(Dt&&h>yt[0]-8){ct=7;break e}Qt[0]=h,ct[0]+=8,yt[0]-=8,Pn[0]=Hn}else Pn[0]=5<=yt[0]&&h[xn+0]==47&&!(h[xn+4]>>5),Qt[0]=yt[0];ct=0}if(j=j[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],M=M[0],ct!=0)break;if(4294967286<xt.Ja)return 3;if(ke==null||jt||(ke[0]=xt.xa?2:1),Se=[Se],Ht=[Ht],xt.xa){if(5>j){ct=7;break}ke=Se,Dt=Ht,jt=Le,w==null||5>j?w=0:5<=j&&w[M+0]==47&&!(w[M+4]>>5)?(yt=[0],h=[0],an=[0],K(Qt=new J,w,M,j),mt(Qt,yt,h,an)?(ke!=null&&(ke[0]=yt[0]),Dt!=null&&(Dt[0]=h[0]),jt!=null&&(jt[0]=an[0]),w=1):w=0):w=0}else{if(10>j){ct=7;break}ke=Ht,w==null||10>j||!$a(w,M+3,j-3)?w=0:(Dt=w[M+0]|w[M+1]<<8|w[M+2]<<16,jt=16383&(w[M+7]<<8|w[M+6]),w=16383&(w[M+9]<<8|w[M+8]),1&Dt||3<(Dt>>1&7)||!(Dt>>4&1)||Dt>>5>=xt.Ja||!jt||!w?w=0:(Se&&(Se[0]=jt),ke&&(ke[0]=w),w=1))}if(!w||(Se=Se[0],Ht=Ht[0],Ot&&($e[0]!=Se||ut[0]!=Ht)))return 3;Oe!=null&&(Oe[0]=xt,Oe.offset=M-Oe.w,e(4294967286>M-Oe.w),e(Oe.offset==Oe.ha-j));break}return ct==0||ct==7&&Ot&&Oe==null?(Le!=null&&(Le[0]|=xt.na!=null&&0<xt.na.length),re!=null&&(re[0]=Se),me!=null&&(me[0]=Ht),0):ct}function Fu(w,M,j){var re=M.width,me=M.height,Le=0,Se=0,ke=re,Oe=me;if(M.Da=w!=null&&0<w.Da,M.Da&&(ke=w.cd,Oe=w.bd,Le=w.v,Se=w.j,11>j||(Le&=-2,Se&=-2),0>Le||0>Se||0>=ke||0>=Oe||Le+ke>re||Se+Oe>me))return 0;if(M.v=Le,M.j=Se,M.va=Le+ke,M.o=Se+Oe,M.U=ke,M.T=Oe,M.da=w!=null&&0<w.da,M.da){if(!Pe(ke,Oe,j=[w.ib],Le=[w.hb]))return 0;M.ib=j[0],M.hb=Le[0]}return M.ob=w!=null&&w.ob,M.Kb=w==null||!w.Sd,M.da&&(M.ob=M.ib<3*re/4&&M.hb<3*me/4,M.Kb=0),1}function Za(w){if(w==null)return 2;if(11>w.S){var M=w.f.RGBA;M.fb+=(w.height-1)*M.A,M.A=-M.A}else M=w.f.kb,w=w.height,M.O+=(w-1)*M.fa,M.fa=-M.fa,M.N+=(w-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(w-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(w-1)*M.lb,M.lb=-M.lb);return 0}function Ka(w,M,j,re){if(re==null||0>=w||0>=M)return 2;if(j!=null){if(j.Da){var me=j.cd,Le=j.bd,Se=-2&j.v,ke=-2&j.j;if(0>Se||0>ke||0>=me||0>=Le||Se+me>w||ke+Le>M)return 2;w=me,M=Le}if(j.da){if(!Pe(w,M,me=[j.ib],Le=[j.hb]))return 2;w=me[0],M=Le[0]}}re.width=w,re.height=M;e:{var Oe=re.width,$e=re.height;if(w=re.S,0>=Oe||0>=$e||!(w>=to&&13>w))w=2;else{if(0>=re.Rd&&re.sd==null){Se=Le=me=M=0;var ut=(ke=Oe*hd[w])*$e;if(11>w||(Le=($e+1)/2*(M=(Oe+1)/2),w==12&&(Se=(me=Oe)*$e)),($e=s(ut+2*Le+Se))==null){w=1;break e}re.sd=$e,11>w?((Oe=re.f.RGBA).eb=$e,Oe.fb=0,Oe.A=ke,Oe.size=ut):((Oe=re.f.kb).y=$e,Oe.O=0,Oe.fa=ke,Oe.Fd=ut,Oe.f=$e,Oe.N=0+ut,Oe.Ab=M,Oe.Cd=Le,Oe.ea=$e,Oe.W=0+ut+Le,Oe.Db=M,Oe.Ed=Le,w==12&&(Oe.F=$e,Oe.J=0+ut+2*Le),Oe.Tc=Se,Oe.lb=me)}if(M=1,me=re.S,Le=re.width,Se=re.height,me>=to&&13>me)if(11>me)w=re.f.RGBA,M&=(ke=Math.abs(w.A))*(Se-1)+Le<=w.size,M&=ke>=Le*hd[me],M&=w.eb!=null;else{w=re.f.kb,ke=(Le+1)/2,ut=(Se+1)/2,Oe=Math.abs(w.fa),$e=Math.abs(w.Ab);var Ot=Math.abs(w.Db),Dt=Math.abs(w.lb),xt=Dt*(Se-1)+Le;M&=Oe*(Se-1)+Le<=w.Fd,M&=$e*(ut-1)+ke<=w.Cd,M=(M&=Ot*(ut-1)+ke<=w.Ed)&Oe>=Le&$e>=ke&Ot>=ke,M&=w.y!=null,M&=w.f!=null,M&=w.ea!=null,me==12&&(M&=Dt>=Le,M&=xt<=w.Tc,M&=w.F!=null)}else M=0;w=M?0:2}}return w!=0||j!=null&&j.fd&&(w=Za(re)),w}var Yi=64,ea=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],bo=24,Qs=32,_l=8,Ss=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ot("Predictor0","PredictorAdd0"),V.Predictor0=function(){return 4278190080},V.Predictor1=function(w){return w},V.Predictor2=function(w,M,j){return M[j+0]},V.Predictor3=function(w,M,j){return M[j+1]},V.Predictor4=function(w,M,j){return M[j-1]},V.Predictor5=function(w,M,j){return pt(pt(w,M[j+1]),M[j+0])},V.Predictor6=function(w,M,j){return pt(w,M[j-1])},V.Predictor7=function(w,M,j){return pt(w,M[j+0])},V.Predictor8=function(w,M,j){return pt(M[j-1],M[j+0])},V.Predictor9=function(w,M,j){return pt(M[j+0],M[j+1])},V.Predictor10=function(w,M,j){return pt(pt(w,M[j-1]),pt(M[j+0],M[j+1]))},V.Predictor11=function(w,M,j){var re=M[j+0];return 0>=Zt(re>>24&255,w>>24&255,(M=M[j-1])>>24&255)+Zt(re>>16&255,w>>16&255,M>>16&255)+Zt(re>>8&255,w>>8&255,M>>8&255)+Zt(255&re,255&w,255&M)?re:w},V.Predictor12=function(w,M,j){var re=M[j+0];return(Ft((w>>24&255)+(re>>24&255)-((M=M[j-1])>>24&255))<<24|Ft((w>>16&255)+(re>>16&255)-(M>>16&255))<<16|Ft((w>>8&255)+(re>>8&255)-(M>>8&255))<<8|Ft((255&w)+(255&re)-(255&M)))>>>0},V.Predictor13=function(w,M,j){var re=M[j-1];return(Bt((w=pt(w,M[j+0]))>>24&255,re>>24&255)<<24|Bt(w>>16&255,re>>16&255)<<16|Bt(w>>8&255,re>>8&255)<<8|Bt(w>>0&255,re>>0&255))>>>0};var js=V.PredictorAdd0;V.PredictorAdd1=ln,ot("Predictor2","PredictorAdd2"),ot("Predictor3","PredictorAdd3"),ot("Predictor4","PredictorAdd4"),ot("Predictor5","PredictorAdd5"),ot("Predictor6","PredictorAdd6"),ot("Predictor7","PredictorAdd7"),ot("Predictor8","PredictorAdd8"),ot("Predictor9","PredictorAdd9"),ot("Predictor10","PredictorAdd10"),ot("Predictor11","PredictorAdd11"),ot("Predictor12","PredictorAdd12"),ot("Predictor13","PredictorAdd13");var zs=V.PredictorAdd2;it("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),it("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var vc,rs=V.ColorIndexInverseTransform,ya=V.MapARGB,Es=V.VP8LColorIndexInverseTransformAlpha,Ps=V.MapAlpha,ba=V.VP8LPredictorsAdd=[];ba.length=16,(V.VP8LPredictors=[]).length=16,(V.VP8LPredictorsAdd_C=[]).length=16,(V.VP8LPredictors_C=[]).length=16;var _a,ks,hs,ta,_o,Ms,bt,Vt,Mt,En,Un,hr,wi,ri,Kl,Us,xi,na,wa,ra,ia,sa,Dr,Uo,fs,ii,li,$i,gi=s(511),wo=s(2041),eo=s(225),Po=s(767),ju=0,oa=wo,Zi=eo,pi=Po,As=gi,to=0,sr=1,xa=2,La=3,$o=4,$s=5,Wc=6,ds=7,ps=8,Vo=9,u=10,v=[2,3,7],E=[3,3,11],F=[280,256,256,256,40],ne=[0,1,1,1,0],xe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],et=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Rt=8,tn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Mn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Vn=null,Cr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ki=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Oi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gs=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],no=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Gc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],aa=[],Ho=[],ko=[],pf=1,yu=2,Xr=[],Ts=[];Nt("UpsampleRgbLinePair",Sr,3),Nt("UpsampleBgrLinePair",bi,3),Nt("UpsampleRgbaLinePair",yo,4),Nt("UpsampleBgraLinePair",qi,4),Nt("UpsampleArgbLinePair",Ui,4),Nt("UpsampleRgba4444LinePair",ni,2),Nt("UpsampleRgb565LinePair",Zr,2);var Me=V.UpsampleRgbLinePair,ro=V.UpsampleBgrLinePair,zu=V.UpsampleRgbaLinePair,ms=V.UpsampleBgraLinePair,Pr=V.UpsampleArgbLinePair,Sh=V.UpsampleRgba4444LinePair,od=V.UpsampleRgb565LinePair,Eh=16,Xa=1<<Eh-1,qc=-227,gf=482,vp=6,yc=0,Ph=s(256),Xl=s(256),yp=s(256),kh=s(256),Mh=s(gf-qc),ad=s(gf-qc);Cs("YuvToRgbRow",Sr,3),Cs("YuvToBgrRow",bi,3),Cs("YuvToRgbaRow",yo,4),Cs("YuvToBgraRow",qi,4),Cs("YuvToArgbRow",Ui,4),Cs("YuvToRgba4444Row",ni,2),Cs("YuvToRgb565Row",Zr,2);var ld=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ca=[0,2,8],ud=[8,7,6,4,4,2,2,2,1,1,1,1],cd=1;this.WebPDecodeRGBA=function(w,M,j,re,me){var Le=sr,Se=new cs,ke=new qn;Se.ba=ke,ke.S=Le,ke.width=[ke.width],ke.height=[ke.height];var Oe=ke.width,$e=ke.height,ut=new Kn;if(ut==null||w==null)var Ot=2;else e(ut!=null),Ot=Qo(w,M,j,ut.width,ut.height,ut.Pd,ut.Qd,ut.format,null);if(Ot!=0?Oe=0:(Oe!=null&&(Oe[0]=ut.width[0]),$e!=null&&($e[0]=ut.height[0]),Oe=1),Oe){ke.width=ke.width[0],ke.height=ke.height[0],re!=null&&(re[0]=ke.width),me!=null&&(me[0]=ke.height);e:{if(re=new So,(me=new jo).data=w,me.w=M,me.ha=j,me.kd=1,M=[0],e(me!=null),((w=Qo(me.data,me.w,me.ha,null,null,null,M,null,me))==0||w==7)&&M[0]&&(w=4),(M=w)==0){if(e(Se!=null),re.data=me.data,re.w=me.w+me.offset,re.ha=me.ha-me.offset,re.put=Rs,re.ac=Pi,re.bc=ls,re.ma=Se,me.xa){if((w=Ur())==null){Se=1;break e}if(function(Dt,xt){var Ht=[0],jt=[0],ct=[0];t:for(;;){if(Dt==null)return 0;if(xt==null)return Dt.a=2,0;if(Dt.l=xt,Dt.a=0,K(Dt.m,xt.data,xt.w,xt.ha),!mt(Dt.m,Ht,jt,ct)){Dt.a=3;break t}if(Dt.xb=yu,xt.width=Ht[0],xt.height=jt[0],!Xn(Ht[0],jt[0],1,Dt,null))break t;return 1}return e(Dt.a!=0),0}(w,re)){if(re=(M=Ka(re.width,re.height,Se.Oa,Se.ba))==0){t:{re=w;n:for(;;){if(re==null){re=0;break t}if(e(re.s.yc!=null),e(re.s.Ya!=null),e(0<re.s.Wb),e((j=re.l)!=null),e((me=j.ma)!=null),re.xb!=0){if(re.ca=me.ba,re.tb=me.tb,e(re.ca!=null),!Fu(me.Oa,j,La)){re.a=2;break n}if(!Ai(re,j.width)||j.da)break n;if((j.da||mn(re.ca.S))&&Lt(),11>re.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),re.ca.f.kb.F!=null&&Lt()),re.Pb&&0<re.s.ua&&re.s.vb.X==null&&!oe(re.s.vb,re.s.Wa.Xa)){re.a=1;break n}re.xb=0}if(!er(re,re.V,re.Ba,re.c,re.i,j.o,dt))break n;me.Dc=re.Ma,re=1;break t}e(re.a!=0),re=0}re=!re}re&&(M=w.a)}else M=w.a}else{if((w=new Gr)==null){Se=1;break e}if(w.Fa=me.na,w.P=me.P,w.qc=me.Sa,da(w,re)){if((M=Ka(re.width,re.height,Se.Oa,Se.ba))==0){if(w.Aa=0,j=Se.Oa,e((me=w)!=null),j!=null){if(0<(Oe=0>(Oe=j.Md)?0:100<Oe?255:255*Oe/100)){for($e=ut=0;4>$e;++$e)12>(Ot=me.pb[$e]).lc&&(Ot.ia=Oe*ud[0>Ot.lc?0:Ot.lc]>>3),ut|=Ot.ia;ut&&(alert("todo:VP8InitRandom"),me.ia=1)}me.Ga=j.Id,100<me.Ga?me.Ga=100:0>me.Ga&&(me.Ga=0)}gr(w,re)||(M=w.a)}}else M=w.a}M==0&&Se.Oa!=null&&Se.Oa.fd&&(M=Za(Se.ba))}Se=M}Le=Se!=0?null:11>Le?ke.f.RGBA.eb:ke.f.kb.y}else Le=null;return Le};var hd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(V,Y){for(var de="",$=0;$<4;$++)de+=String.fromCharCode(V[Y++]);return de}function f(V,Y){return(V[Y+0]<<0|V[Y+1]<<8|V[Y+2]<<16)>>>0}function p(V,Y){return(V[Y+0]<<0|V[Y+1]<<8|V[Y+2]<<16|V[Y+3]<<24)>>>0}new l;var y=[0],m=[0],C=[],S=new l,T=t,O=function(V,Y){var de={},$=0,H=!1,le=0,ae=0;if(de.frames=[],!function(ie,se,pe,we){for(var be=0;be<we;be++)if(ie[se+be]!=pe.charCodeAt(be))return!0;return!1}(V,Y,"RIFF",4)){var z,B;for(p(V,Y+=4),Y+=8;Y<V.length;){var X=c(V,Y),K=p(V,Y+=4);Y+=4;var ye=K+(1&K);switch(X){case"VP8 ":case"VP8L":de.frames[$]===void 0&&(de.frames[$]={}),(J=de.frames[$]).src_off=H?ae:Y-8,J.src_size=le+K+8,$++,H&&(H=!1,le=0,ae=0);break;case"VP8X":(J=de.header={}).feature_flags=V[Y];var Te=Y+4;J.canvas_width=1+f(V,Te),Te+=3,J.canvas_height=1+f(V,Te),Te+=3;break;case"ALPH":H=!0,le=ye+8,ae=Y-8;break;case"ANIM":(J=de.header).bgcolor=p(V,Y),Te=Y+4,J.loop_count=(z=V)[(B=Te)+0]<<0|z[B+1]<<8,Te+=2;break;case"ANMF":var Ue,J;(J=de.frames[$]={}).offset_x=2*f(V,Y),Y+=3,J.offset_y=2*f(V,Y),Y+=3,J.width=1+f(V,Y),Y+=3,J.height=1+f(V,Y),Y+=3,J.duration=f(V,Y),Y+=3,Ue=V[Y++],J.dispose=1&Ue,J.blend=Ue>>1&1}X!="ANMF"&&(Y+=ye)}return de}}(T,0);O.response=T,O.rgbaoutput=!0,O.dataurl=!1;var D=O.header?O.header:null,N=O.frames?O.frames:null;if(D){D.loop_counter=D.loop_count,y=[D.canvas_height],m=[D.canvas_width];for(var U=0;U<N.length&&N[U].blend!=0;U++);}var W=N[0],ee=S.WebPDecodeRGBA(T,W.src_off,W.src_size,m,y);W.rgba=ee,W.imgwidth=m[0],W.imgheight=y[0];for(var te=0;te<m[0]*y[0]*4;te++)C[te]=ee[te];return this.width=m,this.height=y,this.data=C,this}(function(t){var e=function(){return typeof I2=="function"},n=function(y,m,C,S){var T=4,O=o;switch(S){case t.image_compression.FAST:T=1,O=s;break;case t.image_compression.MEDIUM:T=6,O=a;break;case t.image_compression.SLOW:T=9,O=l}y=r(y,m,C,O);var D=I2(y,{level:T});return t.__addimage__.arrayBufferToBinaryString(D)},r=function(y,m,C,S){for(var T,O,D,N=y.length/m,U=new Uint8Array(y.length+N),W=f(),ee=0;ee<N;ee+=1){if(D=ee*m,T=y.subarray(D,D+m),S)U.set(S(T,C,O),D+ee);else{for(var te,V=W.length,Y=[];te<V;te+=1)Y[te]=W[te](T,C,O);var de=p(Y.concat());U.set(Y[de],D+ee)}O=T}return U},i=function(y){var m=Array.apply([],y);return m.unshift(0),m},s=function(y,m){var C,S=[],T=y.length;S[0]=1;for(var O=0;O<T;O+=1)C=y[O-m]||0,S[O+1]=y[O]-C+256&255;return S},o=function(y,m,C){var S,T=[],O=y.length;T[0]=2;for(var D=0;D<O;D+=1)S=C&&C[D]||0,T[D+1]=y[D]-S+256&255;return T},a=function(y,m,C){var S,T,O=[],D=y.length;O[0]=3;for(var N=0;N<D;N+=1)S=y[N-m]||0,T=C&&C[N]||0,O[N+1]=y[N]+256-(S+T>>>1)&255;return O},l=function(y,m,C){var S,T,O,D,N=[],U=y.length;N[0]=4;for(var W=0;W<U;W+=1)S=y[W-m]||0,T=C&&C[W]||0,O=C&&C[W-m]||0,D=c(S,T,O),N[W+1]=y[W]-D+256&255;return N},c=function(y,m,C){if(y===m&&m===C)return y;var S=Math.abs(m-C),T=Math.abs(y-C),O=Math.abs(y+m-C-C);return S<=T&&S<=O?y:T<=O?m:C},f=function(){return[i,s,o,a,l]},p=function(y){var m=y.map(function(C){return C.reduce(function(S,T){return S+Math.abs(T)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(y,m,C,S){var T,O,D,N,U,W,ee,te,V,Y,de,$,H,le,ae,z=this.decode.FLATE_DECODE,B="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(D=new a$(y)).imgData,O=D.bits,T=D.colorSpace,U=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){V=(te=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,de=new Uint8Array(V*D.colors),Y=new Uint8Array(V);var X,K=D.pixelBitlength-D.bits;for(le=0,ae=0;le<V;le++){for(H=te[le],X=0;X<K;)de[ae++]=H>>>X&255,X+=D.bits;Y[le]=H>>>X&255}}if(D.bits===16){V=(te=new Uint32Array(D.decodePixels().buffer)).length,de=new Uint8Array(V*(32/D.pixelBitlength)*D.colors),Y=new Uint8Array(V*(32/D.pixelBitlength)),$=D.colors>1,le=0,ae=0;for(var ye=0;le<V;)H=te[le++],de[ae++]=H>>>0&255,$&&(de[ae++]=H>>>16&255,H=te[le++],de[ae++]=H>>>0&255),Y[ye++]=H>>>16&255;O=8}S!==t.image_compression.NONE&&e()?(y=n(de,D.width*D.colors,D.colors,S),ee=n(Y,D.width,1,S)):(y=de,ee=Y,z=void 0)}if(D.colorType===3&&(T=this.color_spaces.INDEXED,W=D.palette,D.transparency.indexed)){var Te=D.transparency.indexed,Ue=0;for(le=0,V=Te.length;le<V;++le)Ue+=Te[le];if((Ue/=255)===V-1&&Te.indexOf(0)!==-1)N=[Te.indexOf(0)];else if(Ue!==V){for(te=D.decodePixels(),Y=new Uint8Array(te.length),le=0,V=te.length;le<V;le++)Y[le]=Te[te[le]];ee=n(Y,D.width,1)}}var J=function(ie){var se;switch(ie){case t.image_compression.FAST:se=11;break;case t.image_compression.MEDIUM:se=13;break;case t.image_compression.SLOW:se=14;break;default:se=12}return se}(S);return z===this.decode.FLATE_DECODE&&(B="/Predictor "+J+" "),B+="/Colors "+U+" /BitsPerComponent "+O+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(ee&&this.__addimage__.isArrayBuffer(ee)||this.__addimage__.isArrayBufferView(ee))&&(ee=this.__addimage__.arrayBufferToBinaryString(ee)),{alias:C,data:y,index:m,filter:z,decodeParameters:B,transparency:N,palette:W,sMask:ee,predictor:J,width:D.width,height:D.height,bitsPerComponent:O,colorSpace:T}}}})(xr.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new l$(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},f=new L1(100).encode(c,100);return t.processJPEG.call(this,f,n,r,i)},t.processGIF87A=t.processGIF89A}(xr.API),Zu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Wi.log("bit decode error:"+n)}},Zu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Zu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Zu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Zu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,f=r*this.width*4+4*i;this.data[f]=l,this.data[f+1]=a,this.data[f+2]=o,this.data[f+3]=c}this.pos+=t}},Zu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,f=i*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=a,this.data[f+3]=255}this.pos+=t}},Zu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Zu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Zu.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Zu(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new L1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(xr.API),U4.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new U4(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new L1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(xr.API),xr.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var f=r[c],p=r[c+1],y=r[c+2],m=r[c+3];s[a++]=f,s[a++]=p,s[a++]=y,o[l++]=m}var C=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:C,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},xr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Pd=xr.API,Xm=Pd.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=c.fof?c.fof:1,p=e.doKerning!==!1,y=0,m=t.length,C=0,S=a[0]||l,T=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(y=p&&Ni(c[r])==="object"&&!isNaN(parseInt(c[r][C],10))?c[r][C]/f:0,T.push((a[r]||S)/l+y)),C=r;return T},R4=Pd.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Pd.processArabic&&(t=Pd.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:Xm.apply(this,arguments).reduce(function(s,o){return s+o},0)},F4=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},j4=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,f=[],p=[f],y=n.textIndent||0,m=0,C=0,S=t.split(" "),T=Xm.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var O=Array(l).join(" "),D=[];S.map(function(U){(U=U.split(/\s*\n/)).length>1?D=D.concat(U.map(function(W,ee){return(ee&&W.length?`
`:"")+W})):D.push(U[0])}),S=D,l=R4.apply(this,[O,n])}for(s=0,o=S.length;s<o;s++){var N=0;if(r=S[s],l&&r[0]==`
`&&(r=r.substr(1),N=1),y+m+(C=(i=Xm.apply(this,[r,n])).reduce(function(U,W){return U+W},0))>e||N){if(C>e){for(a=F4.apply(this,[r,i,e-(y+m),e]),f.push(a.shift()),f=[a.pop()];a.length;)p.push([a.shift()]);C=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(U,W){return U+W},0)}else f=[r];p.push(f),y=C+l,m=T}else f.push(r),y+=m+C,m=T}return c=l?function(U,W){return(W?O:"")+U.join(" ")}:function(U){return U.join(" ")},p.map(c)},Pd.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(j4.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var y,m,C,S,T=["{"];for(var O in p){if(y=p[O],isNaN(parseInt(O,10))?m="'"+O+"'":(O=parseInt(O,10),m=(m=s(O).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof y=="number")y<0?(C=s(y).slice(3),S="-"):(C=s(y).slice(2),S=""),C=S+C.slice(0,-1)+r[C.slice(-1)];else{if(Ni(y)!=="object")throw new Error("Don't know what to do with value type "+Ni(y)+".");C=o(y)}T.push(m+C)}return T.push("}"),T.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,m,C,S,T={},O=1,D=T,N=[],U="",W="",ee=p.length-1,te=1;te<ee;te+=1)(S=p[te])=="'"?y?(C=y.join(""),y=void 0):y=[]:y?y.push(S):S=="{"?(N.push([D,C]),D={},C=void 0):S=="}"?((m=N.pop())[0][m[1]]=D,C=void 0,D=m[0]):S=="-"?O=-1:C===void 0?n.hasOwnProperty(S)?(U+=n[S],C=parseInt(U,16)*O,O=1,U=""):U+=S:n.hasOwnProperty(S)?(W+=n[S],D[C]=parseInt(W,16)*O,O=1,C=void 0,W=""):W+=S;return T},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},f={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var y=p.font,m=f.Unicode[y.postScriptName];m&&(y.metadata.Unicode={},y.metadata.Unicode.widths=m.widths,y.metadata.Unicode.kerning=m.kerning);var C=c.Unicode[y.postScriptName];C&&(y.metadata.Unicode.encoding=C,y.encoding=C.codePages[0])}])}(xr.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(vg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(xr),function(t){function e(){return(Lr.canvg?Promise.resolve(Lr.canvg):ph(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}xr.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw Wi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Wi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=o;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(C){return C.fromString(p,n,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(y)}).then(function(){m.addImage(f.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),xr.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},xr.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,f=0,p=0;function y(C,S){var T,O=!1;for(T=0;T<C.length;T+=1)C[T]===S&&(O=!0);return O}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(p=0;p<m;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(Ni(t)==="object"){for(i in t)if(s=t[i],y(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&y(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(f=0;f<s[c].length;f+=1)typeof s[c][f]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,S=[];for(C in n)n[C].explicitSet===!0&&(n[C].type==="name"?S.push("/"+C+" /"+n[C].value):S.push("/"+C+" "+n[C].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(xr.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],f=[""],p=0,y=s.length;p<y;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return f.join("");a=a.toString(16),f.push(c[4-a.length],a)}return f.join("")},r=function(s){var o,a,l,c,f,p,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,y=(a=Object.keys(s).sort(function(m,C){return m-C})).length;p<y;p++)o=a[p],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",C=0;C<y.length;C++)m+=String.fromCharCode(y[C]);var S=c();f({data:m,addLength1:!0,objectId:S}),l("endobj");var T=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:T}),l("endobj");var O=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+jd(a.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var D=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+jd(a.fontName)),l("/FontDescriptor "+O+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+T+" 0 R"),l("/BaseFont /"+jd(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+D+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,y="",m=0;m<p.length;m++)y+=String.fromCharCode(p[m]);var C=c();f({data:y,addLength1:!0,objectId:C}),l("endobj");var S=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var T=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+C+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+jd(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var O=0;O<a.metadata.hmtx.widths.length;O++)a.metadata.hmtx.widths[O]=parseInt(a.metadata.hmtx.widths[O]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+jd(a.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,f=s.options||{},p=s.mutex||{},y=p.pdfEscape,m=p.activeFontKey,C=p.fonts,S=m,T="",O=0,D="",N=C[S].encoding;if(C[S].encoding!=="Identity-H")return{text:a,x:l,y:c,options:f,mutex:p};for(D=a,S=m,Array.isArray(a)&&(D=a[0]),O=0;O<D.length;O+=1)C[S].metadata.hasOwnProperty("cmap")&&(o=C[S].metadata.cmap.unicode.codeMap[D[O].charCodeAt(0)]),o||D[O].charCodeAt(0)<256&&C[S].metadata.hasOwnProperty("Unicode")?T+=D[O]:T+="";var U="";return parseInt(S.slice(1))<14||N==="WinAnsiEncoding"?U=y(T,S).split("").map(function(W){return W.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(U=n(T,C[S])),p.isHex=!0,{text:U,x:l,y:c,options:f,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(xr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(xr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,f,p=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],O=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,N=0;this.__bidiEngine__={};var U=function($){var H=$.charCodeAt(),le=H>>8,ae=S[le];return ae!==void 0?p[256*ae+(255&H)]:le===252||le===253?"AL":O.test(le)?"L":le===8?"R":"N"},W=function($){for(var H,le=0;le<$.length;le++){if((H=U($.charAt(le)))==="L")return!1;if(H==="R")return!0}return!1},ee=function($,H,le,ae){var z,B,X,K,ye=H[ae];switch(ye){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(ye="AN");break;case"AL":D=!0,ye="R";break;case"WS":ye="N";break;case"CS":ae<1||ae+1>=H.length||(z=le[ae-1])!=="EN"&&z!=="AN"||(B=H[ae+1])!=="EN"&&B!=="AN"?ye="N":D&&(B="AN"),ye=B===z?B:"N";break;case"ES":ye=(z=ae>0?le[ae-1]:"B")==="EN"&&ae+1<H.length&&H[ae+1]==="EN"?"EN":"N";break;case"ET":if(ae>0&&le[ae-1]==="EN"){ye="EN";break}if(D){ye="N";break}for(X=ae+1,K=H.length;X<K&&H[X]==="ET";)X++;ye=X<K&&H[X]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(K=H.length,X=ae+1;X<K&&H[X]==="NSM";)X++;if(X<K){var Te=$[ae],Ue=Te>=1425&&Te<=2303||Te===64286;if(z=H[X],Ue&&(z==="R"||z==="AL")){ye="R";break}}}ye=ae<1||(z=H[ae-1])==="B"?"N":le[ae-1];break;case"B":D=!1,i=!0,ye=N;break;case"S":s=!0,ye="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":ye="N"}return ye},te=function($,H,le){var ae=$.split("");return le&&V(ae,le,{hiLevel:N}),ae.reverse(),H&&H.reverse(),ae.join("")},V=function($,H,le){var ae,z,B,X,K,ye=-1,Te=$.length,Ue=0,J=[],ie=N?m:y,se=[];for(D=!1,i=!1,s=!1,z=0;z<Te;z++)se[z]=U($[z]);for(B=0;B<Te;B++){if(K=Ue,J[B]=ee($,se,J,B),ae=240&(Ue=ie[K][C[J[B]]]),Ue&=15,H[B]=X=ie[Ue][5],ae>0)if(ae===16){for(z=ye;z<B;z++)H[z]=1;ye=-1}else ye=-1;if(ie[Ue][6])ye===-1&&(ye=B);else if(ye>-1){for(z=ye;z<B;z++)H[z]=X;ye=-1}se[B]==="B"&&(H[B]=0),le.hiLevel|=X}s&&function(pe,we,be){for(var Ae=0;Ae<be;Ae++)if(pe[Ae]==="S"){we[Ae]=N;for(var Ee=Ae-1;Ee>=0&&pe[Ee]==="WS";Ee--)we[Ee]=N}}(se,H,Te)},Y=function($,H,le,ae,z){if(!(z.hiLevel<$)){if($===1&&N===1&&!i)return H.reverse(),void(le&&le.reverse());for(var B,X,K,ye,Te=H.length,Ue=0;Ue<Te;){if(ae[Ue]>=$){for(K=Ue+1;K<Te&&ae[K]>=$;)K++;for(ye=Ue,X=K-1;ye<X;ye++,X--)B=H[ye],H[ye]=H[X],H[X]=B,le&&(B=le[ye],le[ye]=le[X],le[X]=B);Ue=K}Ue++}}},de=function($,H,le){var ae=$.split(""),z={hiLevel:N};return le||(le=[]),V(ae,le,z),function(B,X,K){if(K.hiLevel!==0&&f)for(var ye,Te=0;Te<B.length;Te++)X[Te]===1&&(ye=T.indexOf(B[Te]))>=0&&(B[Te]=T[ye+1])}(ae,le,z),Y(2,ae,H,le,z),Y(1,ae,H,le,z),ae.join("")};return this.__bidiEngine__.doBidiReorder=function($,H,le){if(function(z,B){if(B)for(var X=0;X<z.length;X++)B[X]=X;a===void 0&&(a=W(z)),c===void 0&&(c=W(z))}($,H),o||!l||c)if(o&&l&&a^c)N=a?1:0,$=te($,H,le);else if(!o&&l&&c)N=a?1:0,$=de($,H,le),$=te($,H);else if(!o||a||l||c){if(o&&!l&&a^c)$=te($,H),a?(N=0,$=de($,H,le)):(N=1,$=de($,H,le),$=te($,H));else if(o&&a&&!l&&c)N=1,$=de($,H,le),$=te($,H);else if(!o&&!l&&a^c){var ae=f;a?(N=1,$=de($,H,le),N=0,f=!1,$=de($,H,le),f=ae):(N=0,$=de($,H,le),$=te($,H),N=1,f=!1,$=de($,H,le),f=ae,$=te($,H))}}else N=0,$=de($,H,le);else N=a?1:0,$=de($,H,le);return $},this.__bidiEngine__.setOptions=function($){$&&(o=$.isInputVisual,l=$.isOutputVisual,a=$.isInputRtl,c=$.isOutputRtl,f=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(xr),xr.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new af(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new L$(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new u$(this.contents),this.head=new h$(this),this.name=new m$(this),this.cmap=new ZS(this),this.toUnicode={},this.hhea=new f$(this),this.maxp=new v$(this),this.hmtx=new y$(this),this.post=new p$(this),this.os2=new d$(this),this.loca=new x$(this),this.glyf=new b$(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var cc,af=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),u$=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,f,p,y,m,C,S;for(S in m=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),o=Math.floor(p/l),f=16*m-p,(i=new af).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(f),s=16*m,c=i.pos+s,a=null,C=[],n)for(y=n[S],i.writeString(S),i.writeInt(t(y)),i.writeInt(c),i.writeInt(y.length),C=C.concat(y),S==="head"&&(a=c),c+=y.length;c%4;)C.push(0),c++;return i.write(C),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=KS.call(n);n.length%4;)n.push(0);for(s=new af(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),c$={}.hasOwnProperty,Vc=function(t,e){for(var n in e)c$.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};cc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var h$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vc(e,cc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new af).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),$4=function(){function t(e,n){var r,i,s,o,a,l,c,f,p,y,m,C,S,T,O,D,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),y=m/2,e.pos+=6,s=function(){var U,W;for(W=[],l=U=0;0<=y?U<y:U>y;l=0<=y?++U:--U)W.push(e.readUInt16());return W}(),e.pos+=2,S=function(){var U,W;for(W=[],l=U=0;0<=y?U<y:U>y;l=0<=y?++U:--U)W.push(e.readUInt16());return W}(),c=function(){var U,W;for(W=[],l=U=0;0<=y?U<y:U>y;l=0<=y?++U:--U)W.push(e.readUInt16());return W}(),f=function(){var U,W;for(W=[],l=U=0;0<=y?U<y:U>y;l=0<=y?++U:--U)W.push(e.readUInt16());return W}(),i=(this.length-e.pos+this.offset)/2,a=function(){var U,W;for(W=[],l=U=0;0<=i?U<i:U>i;l=0<=i?++U:--U)W.push(e.readUInt16());return W}(),l=O=0,N=s.length;O<N;l=++O)for(T=s[l],r=D=C=S[l];C<=T?D<=T:D>=T;r=C<=T?++D:--D)f[l]===0?o=r+c[l]:(o=a[f[l]/2+(r-C)-(y-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,f,p,y,m,C,S,T,O,D,N,U,W,ee,te,V,Y,de,$,H,le,ae,z,B,X,K,ye,Te,Ue,J,ie,se,pe,we,be,Ae,Ee,Je,gt,_t;switch(ae=new af,o=Object.keys(e).sort(function(ue,oe){return ue-oe}),n){case"macroman":for(S=0,T=function(){var ue=[];for(C=0;C<256;++C)ue.push(0);return ue}(),D={0:0},s={},z=0,ye=o.length;z<ye;z++)D[Ee=e[i=o[z]]]==null&&(D[Ee]=++S),s[i]={old:e[i],new:D[e[i]]},T[i]=D[e[i]];return ae.writeUInt16(1),ae.writeUInt16(0),ae.writeUInt32(12),ae.writeUInt16(0),ae.writeUInt16(262),ae.writeUInt16(0),ae.write(T),{charMap:s,subtable:ae.data,maxGlyphID:S+1};case"unicode":for(H=[],p=[],N=0,D={},r={},O=c=null,B=0,Te=o.length;B<Te;B++)D[W=e[i=o[B]]]==null&&(D[W]=++N),r[i]={old:W,new:D[W]},a=D[W]-i,O!=null&&a===c||(O&&p.push(O),H.push(i),c=a),O=i;for(O&&p.push(O),p.push(65535),H.push(65535),de=2*(Y=H.length),V=2*Math.pow(Math.log(Y)/Math.LN2,2),y=Math.log(V/2)/Math.LN2,te=2*Y-V,l=[],ee=[],m=[],C=X=0,Ue=H.length;X<Ue;C=++X){if($=H[C],f=p[C],$===65535){l.push(0),ee.push(0);break}if($-(le=r[$].new)>=32768)for(l.push(0),ee.push(2*(m.length+Y-C)),i=K=$;$<=f?K<=f:K>=f;i=$<=f?++K:--K)m.push(r[i].new);else l.push(le-$),ee.push(0)}for(ae.writeUInt16(3),ae.writeUInt16(1),ae.writeUInt32(12),ae.writeUInt16(4),ae.writeUInt16(16+8*Y+2*m.length),ae.writeUInt16(0),ae.writeUInt16(de),ae.writeUInt16(V),ae.writeUInt16(y),ae.writeUInt16(te),be=0,J=p.length;be<J;be++)i=p[be],ae.writeUInt16(i);for(ae.writeUInt16(0),Ae=0,ie=H.length;Ae<ie;Ae++)i=H[Ae],ae.writeUInt16(i);for(Je=0,se=l.length;Je<se;Je++)a=l[Je],ae.writeUInt16(a);for(gt=0,pe=ee.length;gt<pe;gt++)U=ee[gt],ae.writeUInt16(U);for(_t=0,we=m.length;_t<we;_t++)S=m[_t],ae.writeUInt16(S);return{charMap:r,subtable:ae.data,maxGlyphID:N+1}}},t}(),ZS=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vc(e,cc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new $4(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=$4.encode(n,r),(s=new af).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),f$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vc(e,cc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),d$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vc(e,cc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),p$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vc(e,cc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),g$=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},m$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vc(e,cc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,f,p,y,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,y=i.length;p<y;o=++p)s=i[o],n.pos=s.offset,f=n.readString(s.length),a=new g$(f,s),c[m=s.nameID]==null&&(c[m]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),v$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vc(e,cc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),y$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vc(e,cc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,p;for(p=[],r=f=0;0<=s?f<s:f>s;r=0<=s?++f:--f)p.push(n.readInt16());return p}(),this.widths=(function(){var f,p,y,m;for(m=[],f=0,p=(y=this.metrics).length;f<p;f++)o=y[f],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),KS=[].slice,b$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vc(e,cc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,f,p,y;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new af(r.read(s))).readShort(),f=l.readShort(),y=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new w$(l,f,y,c,p):new _$(l,a,f,y,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),_$=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),w$=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new af(KS.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),x$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Vc(e,cc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var f=new Array(4*i.length),p=0;p<i.length;++p)f[4*p+3]=255&i[p],f[4*p+2]=(65280&i[p])>>8,f[4*p+1]=(16711680&i[p])>>16,f[4*p]=(4278190080&i[p])>>24;return f},e}(),L$=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,f,p,y,m,C,S,T,O;for(i in r=ZS.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},O=r.charMap)m[(l=O[i]).old]=l.new;for(C in y=r.maxGlyphID,o)C in m||(m[C]=y++);return f=function(D){var N,U;for(N in U={},D)U[D[N]]=N;return U}(m),p=Object.keys(f).sort(function(D,N){return D-N}),S=function(){var D,N,U;for(U=[],D=0,N=p.length;D<N;D++)a=p[D],U.push(f[a]);return U}(),s=this.font.glyf.encode(o,S,m),c=this.font.loca.encode(s.offsets,S),T={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},t}();xr.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();var dv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */dv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",p=1,y=2,m=4,C=1,S=2,T=1,O=2,D=4,N=8,U=16,W=32,ee=64,te=128,V=256,Y=512,de=30,$="...",H=800,le=16,ae=1,z=2,B=3,X=1/0,K=9007199254740991,ye=17976931348623157e292,Te=NaN,Ue=4294967295,J=Ue-1,ie=Ue>>>1,se=[["ary",te],["bind",T],["bindKey",O],["curry",N],["curryRight",U],["flip",Y],["partial",W],["partialRight",ee],["rearg",V]],pe="[object Arguments]",we="[object Array]",be="[object AsyncFunction]",Ae="[object Boolean]",Ee="[object Date]",Je="[object DOMException]",gt="[object Error]",_t="[object Function]",ue="[object GeneratorFunction]",oe="[object Map]",ce="[object Number]",Q="[object Null]",Pe="[object Object]",Ve="[object Promise]",Qe="[object Proxy]",ot="[object RegExp]",at="[object Set]",pt="[object String]",Ft="[object Symbol]",Bt="[object Undefined]",Zt="[object WeakMap]",ln="[object WeakSet]",un="[object ArrayBuffer]",Sn="[object DataView]",qe="[object Float32Array]",it="[object Float64Array]",Ze="[object Int8Array]",Ut="[object Int16Array]",Yt="[object Int32Array]",Ln="[object Uint8Array]",gn="[object Uint8ClampedArray]",vn="[object Uint16Array]",jn="[object Uint32Array]",mn=/\b__p \+= '';/g,Jt=/\b(__p \+=) '' \+/g,cn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qn=/&(?:amp|lt|gt|quot|#39);/g,Kn=/[&<>"']/g,rr=RegExp(qn.source),zn=RegExp(Kn.source),_r=/<%-([\s\S]+?)%>/g,Ri=/<%([\s\S]+?)%>/g,Pi=/<%=([\s\S]+?)%>/g,Rs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ls=/^\w*$/,mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ke=/[\\^$.*+?()[\]{}|]/g,$t=RegExp(Ke.source),On=/^\s+/,Dn=/\s/,Gt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,on=/\{\n\/\* \[wrapped with (.+)\] \*/,dt=/,? & /,fn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,wn=/[()=,{}\[\]\/\s]/,Tn=/\\(\\)?/g,er=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,tr=/\w*$/,Ur=/^[-+]0x[0-9a-f]+$/i,Xn=/^0b[01]+$/i,Ai=/^\[object .+?Constructor\]$/,Wr=/^0o[0-7]+$/i,Xo=/^(?:0|[1-9]\d*)$/,or=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lr=/($^)/,us=/['\n\r\u2028\u2029\\]/g,Do="\\ud800-\\udfff",Hc="\\u0300-\\u036f",hu="\\ufe20-\\ufe2f",hc="\\u20d0-\\u20ff",fc=Hc+hu+hc,cl="\\u2700-\\u27bf",hl="a-z\\xdf-\\xf6\\xf8-\\xff",Du="\\xac\\xb1\\xd7\\xf7",dc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",So="\\u2000-\\u206f",Gr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fr="A-Z\\xc0-\\xd6\\xd8-\\xde",$a="\\ufe0e\\ufe0f",da=Du+dc+So+Gr,Io="['’]",Ul="["+Do+"]",gr="["+da+"]",qr="["+fc+"]",Va="\\d+",xs="["+cl+"]",Ls="["+hl+"]",Iu="[^"+Do+da+Va+cl+hl+fr+"]",fl="\\ud83c[\\udffb-\\udfff]",pa="(?:"+qr+"|"+fl+")",Ti="[^"+Do+"]",No="(?:\\ud83c[\\udde6-\\uddff]){2}",Ha="[\\ud800-\\udbff][\\udc00-\\udfff]",mo="["+fr+"]",fu="\\u200d",Wa="(?:"+Ls+"|"+Iu+")",Nu="(?:"+mo+"|"+Iu+")",Bo="(?:"+Io+"(?:d|ll|m|re|s|t|ve))?",ga="(?:"+Io+"(?:D|LL|M|RE|S|T|VE))?",Ga=pa+"?",$l="["+$a+"]?",ns="(?:"+fu+"(?:"+[Ti,No,Ha].join("|")+")"+$l+Ga+")*",pc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",du="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cr=$l+Ga+ns,mr="(?:"+[xs,No,Ha].join("|")+")"+cr,Ro="(?:"+[Ti+qr+"?",qr,No,Ha,Ul].join("|")+")",$r=RegExp(Io,"g"),Bu=RegExp(qr,"g"),dl=RegExp(fl+"(?="+fl+")|"+Ro+cr,"g"),pl=RegExp([mo+"?"+Ls+"+"+Bo+"(?="+[gr,mo,"$"].join("|")+")",Nu+"+"+ga+"(?="+[gr,mo+Wa,"$"].join("|")+")",mo+"?"+Wa+"+"+Bo,mo+"+"+ga,du,pc,Va,mr].join("|"),"g"),Fo=RegExp("["+fu+Do+fc+$a+"]"),qa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ru=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vl=-1,dr={};dr[qe]=dr[it]=dr[Ze]=dr[Ut]=dr[Yt]=dr[Ln]=dr[gn]=dr[vn]=dr[jn]=!0,dr[pe]=dr[we]=dr[un]=dr[Ae]=dr[Sn]=dr[Ee]=dr[gt]=dr[_t]=dr[oe]=dr[ce]=dr[Pe]=dr[ot]=dr[at]=dr[pt]=dr[Zt]=!1;var kr={};kr[pe]=kr[we]=kr[un]=kr[Sn]=kr[Ae]=kr[Ee]=kr[qe]=kr[it]=kr[Ze]=kr[Ut]=kr[Yt]=kr[oe]=kr[ce]=kr[Pe]=kr[ot]=kr[at]=kr[pt]=kr[Ft]=kr[Ln]=kr[gn]=kr[vn]=kr[jn]=!0,kr[gt]=kr[_t]=kr[Zt]=!1;var Ya={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},gc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},gl=parseFloat,Wl=parseInt,gu=typeof Zo=="object"&&Zo&&Zo.Object===Object&&Zo,Or=typeof self=="object"&&self&&self.Object===Object&&self,Fi=gu||Or||Function("return this")(),Jn=e&&!e.nodeType&&e,ji=Jn&&!0&&t&&!t.nodeType&&t,ml=ji&&ji.exports===Jn,ma=ml&&gu.process,_i=function(){try{var bt=ji&&ji.require&&ji.require("util").types;return bt||ma&&ma.binding&&ma.binding("util")}catch{}}(),mu=_i&&_i.isArrayBuffer,Jo=_i&&_i.isDate,Gl=_i&&_i.isMap,ql=_i&&_i.isRegExp,Eo=_i&&_i.isSet,Yl=_i&&_i.isTypedArray;function ei(bt,Vt,Mt){switch(Mt.length){case 0:return bt.call(Vt);case 1:return bt.call(Vt,Mt[0]);case 2:return bt.call(Vt,Mt[0],Mt[1]);case 3:return bt.call(Vt,Mt[0],Mt[1],Mt[2])}return bt.apply(Vt,Mt)}function mc(bt,Vt,Mt,En){for(var Un=-1,hr=bt==null?0:bt.length;++Un<hr;){var wi=bt[Un];Vt(En,wi,Mt(wi),bt)}return En}function cs(bt,Vt){for(var Mt=-1,En=bt==null?0:bt.length;++Mt<En&&Vt(bt[Mt],Mt,bt)!==!1;);return bt}function jo(bt,Vt){for(var Mt=bt==null?0:bt.length;Mt--&&Vt(bt[Mt],Mt,bt)!==!1;);return bt}function Zl(bt,Vt){for(var Mt=-1,En=bt==null?0:bt.length;++Mt<En;)if(!Vt(bt[Mt],Mt,bt))return!1;return!0}function zo(bt,Vt){for(var Mt=-1,En=bt==null?0:bt.length,Un=0,hr=[];++Mt<En;){var wi=bt[Mt];Vt(wi,Mt,bt)&&(hr[Un++]=wi)}return hr}function vl(bt,Vt){var Mt=bt==null?0:bt.length;return!!Mt&&sn(bt,Vt,0)>-1}function yl(bt,Vt,Mt){for(var En=-1,Un=bt==null?0:bt.length;++En<Un;)if(Mt(Vt,bt[En]))return!0;return!1}function ti(bt,Vt){for(var Mt=-1,En=bt==null?0:bt.length,Un=Array(En);++Mt<En;)Un[Mt]=Vt(bt[Mt],Mt,bt);return Un}function vo(bt,Vt){for(var Mt=-1,En=Vt.length,Un=bt.length;++Mt<En;)bt[Un+Mt]=Vt[Mt];return bt}function va(bt,Vt,Mt,En){var Un=-1,hr=bt==null?0:bt.length;for(En&&hr&&(Mt=bt[++Un]);++Un<hr;)Mt=Vt(Mt,bt[Un],Un,bt);return Mt}function zi(bt,Vt,Mt,En){var Un=bt==null?0:bt.length;for(En&&Un&&(Mt=bt[--Un]);Un--;)Mt=Vt(Mt,bt[Un],Un,bt);return Mt}function I(bt,Vt){for(var Mt=-1,En=bt==null?0:bt.length;++Mt<En;)if(Vt(bt[Mt],Mt,bt))return!0;return!1}var ge=ur("length");function He(bt){return bt.split("")}function st(bt){return bt.match(fn)||[]}function Lt(bt,Vt,Mt){var En;return Mt(bt,function(Un,hr,wi){if(Vt(Un,hr,wi))return En=hr,!1}),En}function Nt(bt,Vt,Mt,En){for(var Un=bt.length,hr=Mt+(En?1:-1);En?hr--:++hr<Un;)if(Vt(bt[hr],hr,bt))return hr;return-1}function sn(bt,Vt,Mt){return Vt===Vt?rs(bt,Vt,Mt):Nt(bt,In,Mt)}function kn(bt,Vt,Mt,En){for(var Un=Mt-1,hr=bt.length;++Un<hr;)if(En(bt[Un],Vt))return Un;return-1}function In(bt){return bt!==bt}function Yn(bt,Vt){var Mt=bt==null?0:bt.length;return Mt?ni(bt,Vt)/Mt:Te}function ur(bt){return function(Vt){return Vt==null?n:Vt[bt]}}function Sr(bt){return function(Vt){return bt==null?n:bt[Vt]}}function bi(bt,Vt,Mt,En,Un){return Un(bt,function(hr,wi,ri){Mt=En?(En=!1,hr):Vt(Mt,hr,wi,ri)}),Mt}function Zr(bt,Vt){var Mt=bt.length;for(bt.sort(Vt);Mt--;)bt[Mt]=bt[Mt].value;return bt}function ni(bt,Vt){for(var Mt,En=-1,Un=bt.length;++En<Un;){var hr=Vt(bt[En]);hr!==n&&(Mt=Mt===n?hr:Mt+hr)}return Mt}function Ui(bt,Vt){for(var Mt=-1,En=Array(bt);++Mt<bt;)En[Mt]=Vt(Mt);return En}function qi(bt,Vt){return ti(Vt,function(Mt){return[Mt,bt[Mt]]})}function yo(bt){return bt&&bt.slice(0,ba(bt)+1).replace(On,"")}function Er(bt){return function(Vt){return bt(Vt)}}function Cs(bt,Vt){return ti(Vt,function(Mt){return bt[Mt]})}function bl(bt,Vt){return bt.has(Vt)}function Fs(bt,Vt){for(var Mt=-1,En=bt.length;++Mt<En&&sn(Vt,bt[Mt],0)>-1;);return Mt}function vu(bt,Vt){for(var Mt=bt.length;Mt--&&sn(Vt,bt[Mt],0)>-1;);return Mt}function Qo(bt,Vt){for(var Mt=bt.length,En=0;Mt--;)bt[Mt]===Vt&&++En;return En}var Fu=Sr(Ya),Za=Sr(gc);function Ka(bt){return"\\"+pu[bt]}function Yi(bt,Vt){return bt==null?n:bt[Vt]}function ea(bt){return Fo.test(bt)}function bo(bt){return qa.test(bt)}function Qs(bt){for(var Vt,Mt=[];!(Vt=bt.next()).done;)Mt.push(Vt.value);return Mt}function _l(bt){var Vt=-1,Mt=Array(bt.size);return bt.forEach(function(En,Un){Mt[++Vt]=[Un,En]}),Mt}function Ss(bt,Vt){return function(Mt){return bt(Vt(Mt))}}function js(bt,Vt){for(var Mt=-1,En=bt.length,Un=0,hr=[];++Mt<En;){var wi=bt[Mt];(wi===Vt||wi===f)&&(bt[Mt]=f,hr[Un++]=Mt)}return hr}function zs(bt){var Vt=-1,Mt=Array(bt.size);return bt.forEach(function(En){Mt[++Vt]=En}),Mt}function vc(bt){var Vt=-1,Mt=Array(bt.size);return bt.forEach(function(En){Mt[++Vt]=[En,En]}),Mt}function rs(bt,Vt,Mt){for(var En=Mt-1,Un=bt.length;++En<Un;)if(bt[En]===Vt)return En;return-1}function ya(bt,Vt,Mt){for(var En=Mt+1;En--;)if(bt[En]===Vt)return En;return En}function Es(bt){return ea(bt)?ks(bt):ge(bt)}function Ps(bt){return ea(bt)?hs(bt):He(bt)}function ba(bt){for(var Vt=bt.length;Vt--&&Dn.test(bt.charAt(Vt)););return Vt}var _a=Sr(Hl);function ks(bt){for(var Vt=dl.lastIndex=0;dl.test(bt);)++Vt;return Vt}function hs(bt){return bt.match(dl)||[]}function ta(bt){return bt.match(pl)||[]}var _o=function bt(Vt){Vt=Vt==null?Fi:Ms.defaults(Fi.Object(),Vt,Ms.pick(Fi,Ru));var Mt=Vt.Array,En=Vt.Date,Un=Vt.Error,hr=Vt.Function,wi=Vt.Math,ri=Vt.Object,Kl=Vt.RegExp,Us=Vt.String,xi=Vt.TypeError,na=Mt.prototype,wa=hr.prototype,ra=ri.prototype,ia=Vt["__core-js_shared__"],sa=wa.toString,Dr=ra.hasOwnProperty,Uo=0,fs=function(){var d=/[^.]+$/.exec(ia&&ia.keys&&ia.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),ii=ra.toString,li=sa.call(ri),$i=Fi._,gi=Kl("^"+sa.call(Dr).replace(Ke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wo=ml?Vt.Buffer:n,eo=Vt.Symbol,Po=Vt.Uint8Array,ju=wo?wo.allocUnsafe:n,oa=Ss(ri.getPrototypeOf,ri),Zi=ri.create,pi=ra.propertyIsEnumerable,As=na.splice,to=eo?eo.isConcatSpreadable:n,sr=eo?eo.iterator:n,xa=eo?eo.toStringTag:n,La=function(){try{var d=wf(ri,"defineProperty");return d({},"",{}),d}catch{}}(),$o=Vt.clearTimeout!==Fi.clearTimeout&&Vt.clearTimeout,$s=En&&En.now!==Fi.Date.now&&En.now,Wc=Vt.setTimeout!==Fi.setTimeout&&Vt.setTimeout,ds=wi.ceil,ps=wi.floor,Vo=ri.getOwnPropertySymbols,u=wo?wo.isBuffer:n,v=Vt.isFinite,E=na.join,F=Ss(ri.keys,ri),ne=wi.max,xe=wi.min,et=En.now,Pt=Vt.parseInt,Rt=wi.random,tn=na.reverse,Mn=wf(Vt,"DataView"),Vn=wf(Vt,"Map"),Cr=wf(Vt,"Promise"),Ki=wf(Vt,"Set"),Oi=wf(Vt,"WeakMap"),gs=wf(ri,"create"),Li=Oi&&new Oi,no={},Gc=xf(Mn),aa=xf(Vn),Ho=xf(Cr),ko=xf(Ki),pf=xf(Oi),yu=eo?eo.prototype:n,Xr=yu?yu.valueOf:n,Ts=yu?yu.toString:n;function Me(d){if(Vs(d)&&!Nr(d)&&!(d instanceof Pr)){if(d instanceof ms)return d;if(Dr.call(d,"__wrapped__"))return rw(d)}return new ms(d)}var ro=function(){function d(){}return function(b){if(!Ds(b))return{};if(Zi)return Zi(b);d.prototype=b;var A=new d;return d.prototype=n,A}}();function zu(){}function ms(d,b){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Me.templateSettings={escape:_r,evaluate:Ri,interpolate:Pi,variable:"",imports:{_:Me}},Me.prototype=zu.prototype,Me.prototype.constructor=Me,ms.prototype=ro(zu.prototype),ms.prototype.constructor=ms;function Pr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ue,this.__views__=[]}function Sh(){var d=new Pr(this.__wrapped__);return d.__actions__=xl(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=xl(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=xl(this.__views__),d}function od(){if(this.__filtered__){var d=new Pr(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function Eh(){var d=this.__wrapped__.value(),b=this.__dir__,A=Nr(d),q=b<0,ve=A?d.length:0,Be=$P(0,ve,this.__views__),Xe=Be.start,ft=Be.end,Et=ft-Xe,nn=q?ft:Xe-1,rn=this.__iteratees__,hn=rn.length,Bn=0,Qn=xe(Et,this.__takeCount__);if(!A||!q&&ve==Et&&Qn==Et)return bu(d,this.__actions__);var vr=[];e:for(;Et--&&Bn<Qn;){nn+=b;for(var Yr=-1,yr=d[nn];++Yr<hn;){var si=rn[Yr],ci=si.iteratee,Ql=si.type,el=ci(yr);if(Ql==z)yr=el;else if(!el){if(Ql==ae)continue e;break e}}vr[Bn++]=yr}return vr}Pr.prototype=ro(zu.prototype),Pr.prototype.constructor=Pr;function Xa(d){var b=-1,A=d==null?0:d.length;for(this.clear();++b<A;){var q=d[b];this.set(q[0],q[1])}}function qc(){this.__data__=gs?gs(null):{},this.size=0}function gf(d){var b=this.has(d)&&delete this.__data__[d];return this.size-=b?1:0,b}function vp(d){var b=this.__data__;if(gs){var A=b[d];return A===l?n:A}return Dr.call(b,d)?b[d]:n}function yc(d){var b=this.__data__;return gs?b[d]!==n:Dr.call(b,d)}function Ph(d,b){var A=this.__data__;return this.size+=this.has(d)?0:1,A[d]=gs&&b===n?l:b,this}Xa.prototype.clear=qc,Xa.prototype.delete=gf,Xa.prototype.get=vp,Xa.prototype.has=yc,Xa.prototype.set=Ph;function Xl(d){var b=-1,A=d==null?0:d.length;for(this.clear();++b<A;){var q=d[b];this.set(q[0],q[1])}}function yp(){this.__data__=[],this.size=0}function kh(d){var b=this.__data__,A=yt(b,d);if(A<0)return!1;var q=b.length-1;return A==q?b.pop():As.call(b,A,1),--this.size,!0}function Mh(d){var b=this.__data__,A=yt(b,d);return A<0?n:b[A][1]}function ad(d){return yt(this.__data__,d)>-1}function ld(d,b){var A=this.__data__,q=yt(A,d);return q<0?(++this.size,A.push([d,b])):A[q][1]=b,this}Xl.prototype.clear=yp,Xl.prototype.delete=kh,Xl.prototype.get=Mh,Xl.prototype.has=ad,Xl.prototype.set=ld;function Ca(d){var b=-1,A=d==null?0:d.length;for(this.clear();++b<A;){var q=d[b];this.set(q[0],q[1])}}function ud(){this.size=0,this.__data__={hash:new Xa,map:new(Vn||Xl),string:new Xa}}function cd(d){var b=Em(this,d).delete(d);return this.size-=b?1:0,b}function hd(d){return Em(this,d).get(d)}function w(d){return Em(this,d).has(d)}function M(d,b){var A=Em(this,d),q=A.size;return A.set(d,b),this.size+=A.size==q?0:1,this}Ca.prototype.clear=ud,Ca.prototype.delete=cd,Ca.prototype.get=hd,Ca.prototype.has=w,Ca.prototype.set=M;function j(d){var b=-1,A=d==null?0:d.length;for(this.__data__=new Ca;++b<A;)this.add(d[b])}function re(d){return this.__data__.set(d,l),this}function me(d){return this.__data__.has(d)}j.prototype.add=j.prototype.push=re,j.prototype.has=me;function Le(d){var b=this.__data__=new Xl(d);this.size=b.size}function Se(){this.__data__=new Xl,this.size=0}function ke(d){var b=this.__data__,A=b.delete(d);return this.size=b.size,A}function Oe(d){return this.__data__.get(d)}function $e(d){return this.__data__.has(d)}function ut(d,b){var A=this.__data__;if(A instanceof Xl){var q=A.__data__;if(!Vn||q.length<i-1)return q.push([d,b]),this.size=++A.size,this;A=this.__data__=new Ca(q)}return A.set(d,b),this.size=A.size,this}Le.prototype.clear=Se,Le.prototype.delete=ke,Le.prototype.get=Oe,Le.prototype.has=$e,Le.prototype.set=ut;function Ot(d,b){var A=Nr(d),q=!A&&Lf(d),ve=!A&&!q&&Th(d),Be=!A&&!q&&!ve&&_d(d),Xe=A||q||ve||Be,ft=Xe?Ui(d.length,Us):[],Et=ft.length;for(var nn in d)(b||Dr.call(d,nn))&&!(Xe&&(nn=="length"||ve&&(nn=="offset"||nn=="parent")||Be&&(nn=="buffer"||nn=="byteLength"||nn=="byteOffset")||Qc(nn,Et)))&&ft.push(nn);return ft}function Dt(d){var b=d.length;return b?d[yf(0,b-1)]:n}function xt(d,b){return Pm(xl(d),Hn(b,0,d.length))}function Ht(d){return Pm(xl(d))}function jt(d,b,A){(A!==n&&!Gu(d[b],A)||A===n&&!(b in d))&&Pn(d,b,A)}function ct(d,b,A){var q=d[b];(!(Dr.call(d,b)&&Gu(q,A))||A===n&&!(b in d))&&Pn(d,b,A)}function yt(d,b){for(var A=d.length;A--;)if(Gu(d[A][0],b))return A;return-1}function Xt(d,b,A,q){return R(d,function(ve,Be,Xe){b(q,ve,A(ve),Xe)}),q}function an(d,b){return d&&wc(b,Wo(b),d)}function Qt(d,b){return d&&wc(b,Cl(b),d)}function Pn(d,b,A){b=="__proto__"&&La?La(d,b,{configurable:!0,enumerable:!0,value:A,writable:!0}):d[b]=A}function xn(d,b){for(var A=-1,q=b.length,ve=Mt(q),Be=d==null;++A<q;)ve[A]=Be?n:Iy(d,b[A]);return ve}function Hn(d,b,A){return d===d&&(A!==n&&(d=d<=A?d:A),b!==n&&(d=d>=b?d:b)),d}function h(d,b,A,q,ve,Be){var Xe,ft=b&p,Et=b&y,nn=b&m;if(A&&(Xe=ve?A(d,q,ve,Be):A(d)),Xe!==n)return Xe;if(!Ds(d))return d;var rn=Nr(d);if(rn){if(Xe=HP(d),!ft)return xl(d,Xe)}else{var hn=Ea(d),Bn=hn==_t||hn==ue;if(Th(d))return M_(d,ft);if(hn==Pe||hn==pe||Bn&&!ve){if(Xe=Et||Bn?{}:Y_(d),!ft)return Et?DP(d,Qt(Xe,d)):OP(d,an(Xe,d))}else{if(!kr[hn])return ve?d:{};Xe=WP(d,hn,ft)}}Be||(Be=new Le);var Qn=Be.get(d);if(Qn)return Qn;Be.set(d,Xe),Lw(d)?d.forEach(function(yr){Xe.add(h(yr,b,A,yr,d,Be))}):ww(d)&&d.forEach(function(yr,si){Xe.set(si,h(yr,b,A,si,d,Be))});var vr=nn?Et?_y:by:Et?Cl:Wo,Yr=rn?n:vr(d);return cs(Yr||d,function(yr,si){Yr&&(si=yr,yr=d[si]),ct(Xe,si,h(yr,b,A,si,d,Be))}),Xe}function g(d){var b=Wo(d);return function(A){return _(A,d,b)}}function _(d,b,A){var q=A.length;if(d==null)return!q;for(d=ri(d);q--;){var ve=A[q],Be=b[ve],Xe=d[ve];if(Xe===n&&!(ve in d)||!Be(Xe))return!1}return!0}function x(d,b,A){if(typeof d!="function")throw new xi(o);return Lp(function(){d.apply(n,A)},b)}function k(d,b,A,q){var ve=-1,Be=vl,Xe=!0,ft=d.length,Et=[],nn=b.length;if(!ft)return Et;A&&(b=ti(b,Er(A))),q?(Be=yl,Xe=!1):b.length>=i&&(Be=bl,Xe=!1,b=new j(b));e:for(;++ve<ft;){var rn=d[ve],hn=A==null?rn:A(rn);if(rn=q||rn!==0?rn:0,Xe&&hn===hn){for(var Bn=nn;Bn--;)if(b[Bn]===hn)continue e;Et.push(rn)}else Be(b,hn,q)||Et.push(rn)}return Et}var R=I_(qt),G=I_(dn,!0);function Z(d,b){var A=!0;return R(d,function(q,ve,Be){return A=!!b(q,ve,Be),A}),A}function he(d,b,A){for(var q=-1,ve=d.length;++q<ve;){var Be=d[q],Xe=b(Be);if(Xe!=null&&(ft===n?Xe===Xe&&!Jl(Xe):A(Xe,ft)))var ft=Xe,Et=Be}return Et}function _e(d,b,A,q){var ve=d.length;for(A=Hr(A),A<0&&(A=-A>ve?0:ve+A),q=q===n||q>ve?ve:Hr(q),q<0&&(q+=ve),q=A>q?0:Sw(q);A<q;)d[A++]=b;return d}function Ge(d,b){var A=[];return R(d,function(q,ve,Be){b(q,ve,Be)&&A.push(q)}),A}function ze(d,b,A,q,ve){var Be=-1,Xe=d.length;for(A||(A=qP),ve||(ve=[]);++Be<Xe;){var ft=d[Be];b>0&&A(ft)?b>1?ze(ft,b-1,A,q,ve):vo(ve,ft):q||(ve[ve.length]=ft)}return ve}var vt=N_(),At=N_(!0);function qt(d,b){return d&&vt(d,b,Wo)}function dn(d,b){return d&&At(d,b,Wo)}function yn(d,b){return zo(b,function(A){return eh(d[A])})}function nr(d,b){b=Wu(b,d);for(var A=0,q=b.length;d!=null&&A<q;)d=d[xc(b[A++])];return A&&A==q?d:n}function We(d,b,A){var q=b(d);return Nr(d)?q:vo(q,A(d))}function Ye(d){return d==null?d===n?Bt:Q:xa&&xa in ri(d)?UP(d):ek(d)}function lt(d,b){return d>b}function It(d,b){return d!=null&&Dr.call(d,b)}function wt(d,b){return d!=null&&b in ri(d)}function Tt(d,b,A){return d>=xe(b,A)&&d<ne(b,A)}function fe(d,b,A){for(var q=A?yl:vl,ve=d[0].length,Be=d.length,Xe=Be,ft=Mt(Be),Et=1/0,nn=[];Xe--;){var rn=d[Xe];Xe&&b&&(rn=ti(rn,Er(b))),Et=xe(rn.length,Et),ft[Xe]=!A&&(b||ve>=120&&rn.length>=120)?new j(Xe&&rn):n}rn=d[0];var hn=-1,Bn=ft[0];e:for(;++hn<ve&&nn.length<Et;){var Qn=rn[hn],vr=b?b(Qn):Qn;if(Qn=A||Qn!==0?Qn:0,!(Bn?bl(Bn,vr):q(nn,vr,A))){for(Xe=Be;--Xe;){var Yr=ft[Xe];if(!(Yr?bl(Yr,vr):q(d[Xe],vr,A)))continue e}Bn&&Bn.push(vr),nn.push(Qn)}}return nn}function Ce(d,b,A,q){return qt(d,function(ve,Be,Xe){b(q,A(ve),Be,Xe)}),q}function Ie(d,b,A){b=Wu(b,d),d=J_(d,b);var q=d==null?d:d[xc(xu(b))];return q==null?n:ei(q,d,A)}function De(d){return Vs(d)&&Ye(d)==pe}function Re(d){return Vs(d)&&Ye(d)==un}function Fe(d){return Vs(d)&&Ye(d)==Ee}function tt(d,b,A,q,ve){return d===b?!0:d==null||b==null||!Vs(d)&&!Vs(b)?d!==d&&b!==b:rt(d,b,A,q,tt,ve)}function rt(d,b,A,q,ve,Be){var Xe=Nr(d),ft=Nr(b),Et=Xe?we:Ea(d),nn=ft?we:Ea(b);Et=Et==pe?Pe:Et,nn=nn==pe?Pe:nn;var rn=Et==Pe,hn=nn==Pe,Bn=Et==nn;if(Bn&&Th(d)){if(!Th(b))return!1;Xe=!0,rn=!1}if(Bn&&!rn)return Be||(Be=new Le),Xe||_d(d)?W_(d,b,A,q,ve,Be):jP(d,b,Et,A,q,ve,Be);if(!(A&C)){var Qn=rn&&Dr.call(d,"__wrapped__"),vr=hn&&Dr.call(b,"__wrapped__");if(Qn||vr){var Yr=Qn?d.value():d,yr=vr?b.value():b;return Be||(Be=new Le),ve(Yr,yr,A,q,Be)}}return Bn?(Be||(Be=new Le),zP(d,b,A,q,ve,Be)):!1}function ht(d){return Vs(d)&&Ea(d)==oe}function Ct(d,b,A,q){var ve=A.length,Be=ve,Xe=!q;if(d==null)return!Be;for(d=ri(d);ve--;){var ft=A[ve];if(Xe&&ft[2]?ft[1]!==d[ft[0]]:!(ft[0]in d))return!1}for(;++ve<Be;){ft=A[ve];var Et=ft[0],nn=d[Et],rn=ft[1];if(Xe&&ft[2]){if(nn===n&&!(Et in d))return!1}else{var hn=new Le;if(q)var Bn=q(nn,rn,Et,d,b,hn);if(!(Bn===n?tt(rn,nn,C|S,q,hn):Bn))return!1}}return!0}function St(d){if(!Ds(d)||ZP(d))return!1;var b=eh(d)?gi:Ai;return b.test(xf(d))}function en(d){return Vs(d)&&Ye(d)==ot}function Nn(d){return Vs(d)&&Ea(d)==at}function Rn(d){return Vs(d)&&Dm(d.length)&&!!dr[Ye(d)]}function Wn(d){return typeof d=="function"?d:d==null?Sl:typeof d=="object"?Nr(d)?Uu(d[0],d[1]):io(d):Bw(d)}function Jr(d){if(!xp(d))return F(d);var b=[];for(var A in ri(d))Dr.call(d,A)&&A!="constructor"&&b.push(A);return b}function ui(d){if(!Ds(d))return QP(d);var b=xp(d),A=[];for(var q in d)q=="constructor"&&(b||!Dr.call(d,q))||A.push(q);return A}function Ir(d,b){return d<b}function mi(d,b){var A=-1,q=Ll(d)?Mt(d.length):[];return R(d,function(ve,Be,Xe){q[++A]=b(ve,Be,Xe)}),q}function io(d){var b=xy(d);return b.length==1&&b[0][2]?K_(b[0][0],b[0][1]):function(A){return A===d||Ct(A,d,b)}}function Uu(d,b){return Cy(d)&&Z_(b)?K_(xc(d),b):function(A){var q=Iy(A,d);return q===n&&q===b?Ny(A,d):tt(b,q,C|S)}}function la(d,b,A,q,ve){d!==b&&vt(b,function(Be,Xe){if(ve||(ve=new Le),Ds(Be))mf(d,b,Xe,A,la,q,ve);else{var ft=q?q(Ey(d,Xe),Be,Xe+"",d,b,ve):n;ft===n&&(ft=Be),jt(d,Xe,ft)}},Cl)}function mf(d,b,A,q,ve,Be,Xe){var ft=Ey(d,A),Et=Ey(b,A),nn=Xe.get(Et);if(nn){jt(d,A,nn);return}var rn=Be?Be(ft,Et,A+"",d,b,Xe):n,hn=rn===n;if(hn){var Bn=Nr(Et),Qn=!Bn&&Th(Et),vr=!Bn&&!Qn&&_d(Et);rn=Et,Bn||Qn||vr?Nr(ft)?rn=ft:so(ft)?rn=xl(ft):Qn?(hn=!1,rn=M_(Et,!0)):vr?(hn=!1,rn=A_(Et,!0)):rn=[]:Cp(Et)||Lf(Et)?(rn=ft,Lf(ft)?rn=Ew(ft):(!Ds(ft)||eh(ft))&&(rn=Y_(Et))):hn=!1}hn&&(Xe.set(Et,rn),ve(rn,Et,q,Be,Xe),Xe.delete(Et)),jt(d,A,rn)}function Ja(d,b){var A=d.length;if(A)return b+=b<0?A:0,Qc(b,A)?d[b]:n}function bc(d,b,A){b.length?b=ti(b,function(Be){return Nr(Be)?function(Xe){return nr(Xe,Be.length===1?Be[0]:Be)}:Be}):b=[Sl];var q=-1;b=ti(b,Er(pr()));var ve=mi(d,function(Be,Xe,ft){var Et=ti(b,function(nn){return nn(Be)});return{criteria:Et,index:++q,value:Be}});return Zr(ve,function(Be,Xe){return TP(Be,Xe,A)})}function ua(d,b){return Os(d,b,function(A,q){return Ny(d,q)})}function Os(d,b,A){for(var q=-1,ve=b.length,Be={};++q<ve;){var Xe=b[q],ft=nr(d,Xe);A(ft,Xe)&&Yc(Be,Wu(Xe,d),ft)}return Be}function Vi(d){return function(b){return nr(b,d)}}function fd(d,b,A,q){var ve=q?kn:sn,Be=-1,Xe=b.length,ft=d;for(d===b&&(b=xl(b)),A&&(ft=ti(d,Er(A)));++Be<Xe;)for(var Et=0,nn=b[Be],rn=A?A(nn):nn;(Et=ve(ft,rn,Et,q))>-1;)ft!==d&&As.call(ft,Et,1),As.call(d,Et,1);return d}function vf(d,b){for(var A=d?b.length:0,q=A-1;A--;){var ve=b[A];if(A==q||ve!==Be){var Be=ve;Qc(ve)?As.call(d,ve,1):Zc(d,ve)}}return d}function yf(d,b){return d+ps(Rt()*(b-d+1))}function bf(d,b,A,q){for(var ve=-1,Be=ne(ds((b-d)/(A||1)),0),Xe=Mt(Be);Be--;)Xe[q?Be:++ve]=d,d+=A;return Xe}function dd(d,b){var A="";if(!d||b<1||b>K)return A;do b%2&&(A+=d),b=ps(b/2),b&&(d+=d);while(b);return A}function Vr(d,b){return Py(X_(d,b,Sl),d+"")}function pd(d){return Dt(wd(d))}function gm(d,b){var A=wd(d);return Pm(A,Hn(b,0,A.length))}function Yc(d,b,A,q){if(!Ds(d))return d;b=Wu(b,d);for(var ve=-1,Be=b.length,Xe=Be-1,ft=d;ft!=null&&++ve<Be;){var Et=xc(b[ve]),nn=A;if(Et==="__proto__"||Et==="constructor"||Et==="prototype")return d;if(ve!=Xe){var rn=ft[Et];nn=q?q(rn,Et,ft):n,nn===n&&(nn=Ds(rn)?rn:Qc(b[ve+1])?[]:{})}ct(ft,Et,nn),ft=ft[Et]}return d}var $u=Li?function(d,b){return Li.set(d,b),d}:Sl,mm=La?function(d,b){return La(d,"toString",{configurable:!0,enumerable:!1,value:Ry(b),writable:!0})}:Sl;function vm(d){return Pm(wd(d))}function wl(d,b,A){var q=-1,ve=d.length;b<0&&(b=-b>ve?0:ve+b),A=A>ve?ve:A,A<0&&(A+=ve),ve=b>A?0:A-b>>>0,b>>>=0;for(var Be=Mt(ve);++q<ve;)Be[q]=d[q+b];return Be}function ym(d,b){var A;return R(d,function(q,ve,Be){return A=b(q,ve,Be),!A}),!!A}function Vu(d,b,A){var q=0,ve=d==null?q:d.length;if(typeof b=="number"&&b===b&&ve<=ie){for(;q<ve;){var Be=q+ve>>>1,Xe=d[Be];Xe!==null&&!Jl(Xe)&&(A?Xe<=b:Xe<b)?q=Be+1:ve=Be}return ve}return bp(d,b,Sl,A)}function bp(d,b,A,q){var ve=0,Be=d==null?0:d.length;if(Be===0)return 0;b=A(b);for(var Xe=b!==b,ft=b===null,Et=Jl(b),nn=b===n;ve<Be;){var rn=ps((ve+Be)/2),hn=A(d[rn]),Bn=hn!==n,Qn=hn===null,vr=hn===hn,Yr=Jl(hn);if(Xe)var yr=q||vr;else nn?yr=vr&&(q||Bn):ft?yr=vr&&Bn&&(q||!Qn):Et?yr=vr&&Bn&&!Qn&&(q||!Yr):Qn||Yr?yr=!1:yr=q?hn<=b:hn<b;yr?ve=rn+1:Be=rn}return xe(Be,J)}function _p(d,b){for(var A=-1,q=d.length,ve=0,Be=[];++A<q;){var Xe=d[A],ft=b?b(Xe):Xe;if(!A||!Gu(ft,Et)){var Et=ft;Be[ve++]=Xe===0?0:Xe}}return Be}function bm(d){return typeof d=="number"?d:Jl(d)?Te:+d}function Sa(d){if(typeof d=="string")return d;if(Nr(d))return ti(d,Sa)+"";if(Jl(d))return Ts?Ts.call(d):"";var b=d+"";return b=="0"&&1/d==-1/0?"-0":b}function _c(d,b,A){var q=-1,ve=vl,Be=d.length,Xe=!0,ft=[],Et=ft;if(A)Xe=!1,ve=yl;else if(Be>=i){var nn=b?null:RP(d);if(nn)return zs(nn);Xe=!1,ve=bl,Et=new j}else Et=b?[]:ft;e:for(;++q<Be;){var rn=d[q],hn=b?b(rn):rn;if(rn=A||rn!==0?rn:0,Xe&&hn===hn){for(var Bn=Et.length;Bn--;)if(Et[Bn]===hn)continue e;b&&Et.push(hn),ft.push(rn)}else ve(Et,hn,A)||(Et!==ft&&Et.push(hn),ft.push(rn))}return ft}function Zc(d,b){return b=Wu(b,d),d=J_(d,b),d==null||delete d[xc(xu(b))]}function gd(d,b,A,q){return Yc(d,b,A(nr(d,b)),q)}function Kc(d,b,A,q){for(var ve=d.length,Be=q?ve:-1;(q?Be--:++Be<ve)&&b(d[Be],Be,d););return A?wl(d,q?0:Be,q?Be+1:ve):wl(d,q?Be+1:0,q?ve:Be)}function bu(d,b){var A=d;return A instanceof Pr&&(A=A.value()),va(b,function(q,ve){return ve.func.apply(ve.thisArg,vo([q],ve.args))},A)}function _u(d,b,A){var q=d.length;if(q<2)return q?_c(d[0]):[];for(var ve=-1,Be=Mt(q);++ve<q;)for(var Xe=d[ve],ft=-1;++ft<q;)ft!=ve&&(Be[ve]=k(Be[ve]||Xe,d[ft],b,A));return _c(ze(Be,1),b,A)}function Hu(d,b,A){for(var q=-1,ve=d.length,Be=b.length,Xe={};++q<ve;){var ft=q<Be?b[q]:n;A(Xe,d[q],ft)}return Xe}function Ah(d){return so(d)?d:[]}function _f(d){return typeof d=="function"?d:Sl}function Wu(d,b){return Nr(d)?d:Cy(d,b)?[d]:nw(ki(d))}var gy=Vr;function wu(d,b,A){var q=d.length;return A=A===n?q:A,!b&&A>=q?d:wl(d,b,A)}var md=$o||function(d){return Fi.clearTimeout(d)};function M_(d,b){if(b)return d.slice();var A=d.length,q=ju?ju(A):new d.constructor(A);return d.copy(q),q}function my(d){var b=new d.constructor(d.byteLength);return new Po(b).set(new Po(d)),b}function kP(d,b){var A=b?my(d.buffer):d.buffer;return new d.constructor(A,d.byteOffset,d.byteLength)}function MP(d){var b=new d.constructor(d.source,tr.exec(d));return b.lastIndex=d.lastIndex,b}function AP(d){return Xr?ri(Xr.call(d)):{}}function A_(d,b){var A=b?my(d.buffer):d.buffer;return new d.constructor(A,d.byteOffset,d.length)}function T_(d,b){if(d!==b){var A=d!==n,q=d===null,ve=d===d,Be=Jl(d),Xe=b!==n,ft=b===null,Et=b===b,nn=Jl(b);if(!ft&&!nn&&!Be&&d>b||Be&&Xe&&Et&&!ft&&!nn||q&&Xe&&Et||!A&&Et||!ve)return 1;if(!q&&!Be&&!nn&&d<b||nn&&A&&ve&&!q&&!Be||ft&&A&&ve||!Xe&&ve||!Et)return-1}return 0}function TP(d,b,A){for(var q=-1,ve=d.criteria,Be=b.criteria,Xe=ve.length,ft=A.length;++q<Xe;){var Et=T_(ve[q],Be[q]);if(Et){if(q>=ft)return Et;var nn=A[q];return Et*(nn=="desc"?-1:1)}}return d.index-b.index}function O_(d,b,A,q){for(var ve=-1,Be=d.length,Xe=A.length,ft=-1,Et=b.length,nn=ne(Be-Xe,0),rn=Mt(Et+nn),hn=!q;++ft<Et;)rn[ft]=b[ft];for(;++ve<Xe;)(hn||ve<Be)&&(rn[A[ve]]=d[ve]);for(;nn--;)rn[ft++]=d[ve++];return rn}function D_(d,b,A,q){for(var ve=-1,Be=d.length,Xe=-1,ft=A.length,Et=-1,nn=b.length,rn=ne(Be-ft,0),hn=Mt(rn+nn),Bn=!q;++ve<rn;)hn[ve]=d[ve];for(var Qn=ve;++Et<nn;)hn[Qn+Et]=b[Et];for(;++Xe<ft;)(Bn||ve<Be)&&(hn[Qn+A[Xe]]=d[ve++]);return hn}function xl(d,b){var A=-1,q=d.length;for(b||(b=Mt(q));++A<q;)b[A]=d[A];return b}function wc(d,b,A,q){var ve=!A;A||(A={});for(var Be=-1,Xe=b.length;++Be<Xe;){var ft=b[Be],Et=q?q(A[ft],d[ft],ft,A,d):n;Et===n&&(Et=d[ft]),ve?Pn(A,ft,Et):ct(A,ft,Et)}return A}function OP(d,b){return wc(d,Ly(d),b)}function DP(d,b){return wc(d,G_(d),b)}function _m(d,b){return function(A,q){var ve=Nr(A)?mc:Xt,Be=b?b():{};return ve(A,d,pr(q,2),Be)}}function vd(d){return Vr(function(b,A){var q=-1,ve=A.length,Be=ve>1?A[ve-1]:n,Xe=ve>2?A[2]:n;for(Be=d.length>3&&typeof Be=="function"?(ve--,Be):n,Xe&&Qa(A[0],A[1],Xe)&&(Be=ve<3?n:Be,ve=1),b=ri(b);++q<ve;){var ft=A[q];ft&&d(b,ft,q,Be)}return b})}function I_(d,b){return function(A,q){if(A==null)return A;if(!Ll(A))return d(A,q);for(var ve=A.length,Be=b?ve:-1,Xe=ri(A);(b?Be--:++Be<ve)&&q(Xe[Be],Be,Xe)!==!1;);return A}}function N_(d){return function(b,A,q){for(var ve=-1,Be=ri(b),Xe=q(b),ft=Xe.length;ft--;){var Et=Xe[d?ft:++ve];if(A(Be[Et],Et,Be)===!1)break}return b}}function IP(d,b,A){var q=b&T,ve=wp(d);function Be(){var Xe=this&&this!==Fi&&this instanceof Be?ve:d;return Xe.apply(q?A:this,arguments)}return Be}function B_(d){return function(b){b=ki(b);var A=ea(b)?Ps(b):n,q=A?A[0]:b.charAt(0),ve=A?wu(A,1).join(""):b.slice(1);return q[d]()+ve}}function yd(d){return function(b){return va(Iw(Dw(b).replace($r,"")),d,"")}}function wp(d){return function(){var b=arguments;switch(b.length){case 0:return new d;case 1:return new d(b[0]);case 2:return new d(b[0],b[1]);case 3:return new d(b[0],b[1],b[2]);case 4:return new d(b[0],b[1],b[2],b[3]);case 5:return new d(b[0],b[1],b[2],b[3],b[4]);case 6:return new d(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new d(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var A=ro(d.prototype),q=d.apply(A,b);return Ds(q)?q:A}}function NP(d,b,A){var q=wp(d);function ve(){for(var Be=arguments.length,Xe=Mt(Be),ft=Be,Et=bd(ve);ft--;)Xe[ft]=arguments[ft];var nn=Be<3&&Xe[0]!==Et&&Xe[Be-1]!==Et?[]:js(Xe,Et);if(Be-=nn.length,Be<A)return U_(d,b,wm,ve.placeholder,n,Xe,nn,n,n,A-Be);var rn=this&&this!==Fi&&this instanceof ve?q:d;return ei(rn,this,Xe)}return ve}function R_(d){return function(b,A,q){var ve=ri(b);if(!Ll(b)){var Be=pr(A,3);b=Wo(b),A=function(ft){return Be(ve[ft],ft,ve)}}var Xe=d(b,A,q);return Xe>-1?ve[Be?b[Xe]:Xe]:n}}function F_(d){return Jc(function(b){var A=b.length,q=A,ve=ms.prototype.thru;for(d&&b.reverse();q--;){var Be=b[q];if(typeof Be!="function")throw new xi(o);if(ve&&!Xe&&Sm(Be)=="wrapper")var Xe=new ms([],!0)}for(q=Xe?q:A;++q<A;){Be=b[q];var ft=Sm(Be),Et=ft=="wrapper"?wy(Be):n;Et&&Sy(Et[0])&&Et[1]==(te|N|W|V)&&!Et[4].length&&Et[9]==1?Xe=Xe[Sm(Et[0])].apply(Xe,Et[3]):Xe=Be.length==1&&Sy(Be)?Xe[ft]():Xe.thru(Be)}return function(){var nn=arguments,rn=nn[0];if(Xe&&nn.length==1&&Nr(rn))return Xe.plant(rn).value();for(var hn=0,Bn=A?b[hn].apply(this,nn):rn;++hn<A;)Bn=b[hn].call(this,Bn);return Bn}})}function wm(d,b,A,q,ve,Be,Xe,ft,Et,nn){var rn=b&te,hn=b&T,Bn=b&O,Qn=b&(N|U),vr=b&Y,Yr=Bn?n:wp(d);function yr(){for(var si=arguments.length,ci=Mt(si),Ql=si;Ql--;)ci[Ql]=arguments[Ql];if(Qn)var el=bd(yr),eu=Qo(ci,el);if(q&&(ci=O_(ci,q,ve,Qn)),Be&&(ci=D_(ci,Be,Xe,Qn)),si-=eu,Qn&&si<nn){var oo=js(ci,el);return U_(d,b,wm,yr.placeholder,A,ci,oo,ft,Et,nn-si)}var qu=hn?A:this,nh=Bn?qu[d]:d;return si=ci.length,ft?ci=tk(ci,ft):vr&&si>1&&ci.reverse(),rn&&Et<si&&(ci.length=Et),this&&this!==Fi&&this instanceof yr&&(nh=Yr||wp(nh)),nh.apply(qu,ci)}return yr}function j_(d,b){return function(A,q){return Ce(A,d,b(q),{})}}function xm(d,b){return function(A,q){var ve;if(A===n&&q===n)return b;if(A!==n&&(ve=A),q!==n){if(ve===n)return q;typeof A=="string"||typeof q=="string"?(A=Sa(A),q=Sa(q)):(A=bm(A),q=bm(q)),ve=d(A,q)}return ve}}function vy(d){return Jc(function(b){return b=ti(b,Er(pr())),Vr(function(A){var q=this;return d(b,function(ve){return ei(ve,q,A)})})})}function Lm(d,b){b=b===n?" ":Sa(b);var A=b.length;if(A<2)return A?dd(b,d):b;var q=dd(b,ds(d/Es(b)));return ea(b)?wu(Ps(q),0,d).join(""):q.slice(0,d)}function BP(d,b,A,q){var ve=b&T,Be=wp(d);function Xe(){for(var ft=-1,Et=arguments.length,nn=-1,rn=q.length,hn=Mt(rn+Et),Bn=this&&this!==Fi&&this instanceof Xe?Be:d;++nn<rn;)hn[nn]=q[nn];for(;Et--;)hn[nn++]=arguments[++ft];return ei(Bn,ve?A:this,hn)}return Xe}function z_(d){return function(b,A,q){return q&&typeof q!="number"&&Qa(b,A,q)&&(A=q=n),b=th(b),A===n?(A=b,b=0):A=th(A),q=q===n?b<A?1:-1:th(q),bf(b,A,q,d)}}function Cm(d){return function(b,A){return typeof b=="string"&&typeof A=="string"||(b=Lu(b),A=Lu(A)),d(b,A)}}function U_(d,b,A,q,ve,Be,Xe,ft,Et,nn){var rn=b&N,hn=rn?Xe:n,Bn=rn?n:Xe,Qn=rn?Be:n,vr=rn?n:Be;b|=rn?W:ee,b&=~(rn?ee:W),b&D||(b&=-4);var Yr=[d,b,ve,Qn,hn,vr,Bn,ft,Et,nn],yr=A.apply(n,Yr);return Sy(d)&&Q_(yr,Yr),yr.placeholder=q,ew(yr,d,b)}function yy(d){var b=wi[d];return function(A,q){if(A=Lu(A),q=q==null?0:xe(Hr(q),292),q&&v(A)){var ve=(ki(A)+"e").split("e"),Be=b(ve[0]+"e"+(+ve[1]+q));return ve=(ki(Be)+"e").split("e"),+(ve[0]+"e"+(+ve[1]-q))}return b(A)}}var RP=Ki&&1/zs(new Ki([,-0]))[1]==X?function(d){return new Ki(d)}:zy;function $_(d){return function(b){var A=Ea(b);return A==oe?_l(b):A==at?vc(b):qi(b,d(b))}}function Xc(d,b,A,q,ve,Be,Xe,ft){var Et=b&O;if(!Et&&typeof d!="function")throw new xi(o);var nn=q?q.length:0;if(nn||(b&=-97,q=ve=n),Xe=Xe===n?Xe:ne(Hr(Xe),0),ft=ft===n?ft:Hr(ft),nn-=ve?ve.length:0,b&ee){var rn=q,hn=ve;q=ve=n}var Bn=Et?n:wy(d),Qn=[d,b,A,q,ve,rn,hn,Be,Xe,ft];if(Bn&&JP(Qn,Bn),d=Qn[0],b=Qn[1],A=Qn[2],q=Qn[3],ve=Qn[4],ft=Qn[9]=Qn[9]===n?Et?0:d.length:ne(Qn[9]-nn,0),!ft&&b&(N|U)&&(b&=-25),!b||b==T)var vr=IP(d,b,A);else b==N||b==U?vr=NP(d,b,ft):(b==W||b==(T|W))&&!ve.length?vr=BP(d,b,A,q):vr=wm.apply(n,Qn);var Yr=Bn?$u:Q_;return ew(Yr(vr,Qn),d,b)}function V_(d,b,A,q){return d===n||Gu(d,ra[A])&&!Dr.call(q,A)?b:d}function H_(d,b,A,q,ve,Be){return Ds(d)&&Ds(b)&&(Be.set(b,d),la(d,b,n,H_,Be),Be.delete(b)),d}function FP(d){return Cp(d)?n:d}function W_(d,b,A,q,ve,Be){var Xe=A&C,ft=d.length,Et=b.length;if(ft!=Et&&!(Xe&&Et>ft))return!1;var nn=Be.get(d),rn=Be.get(b);if(nn&&rn)return nn==b&&rn==d;var hn=-1,Bn=!0,Qn=A&S?new j:n;for(Be.set(d,b),Be.set(b,d);++hn<ft;){var vr=d[hn],Yr=b[hn];if(q)var yr=Xe?q(Yr,vr,hn,b,d,Be):q(vr,Yr,hn,d,b,Be);if(yr!==n){if(yr)continue;Bn=!1;break}if(Qn){if(!I(b,function(si,ci){if(!bl(Qn,ci)&&(vr===si||ve(vr,si,A,q,Be)))return Qn.push(ci)})){Bn=!1;break}}else if(!(vr===Yr||ve(vr,Yr,A,q,Be))){Bn=!1;break}}return Be.delete(d),Be.delete(b),Bn}function jP(d,b,A,q,ve,Be,Xe){switch(A){case Sn:if(d.byteLength!=b.byteLength||d.byteOffset!=b.byteOffset)return!1;d=d.buffer,b=b.buffer;case un:return!(d.byteLength!=b.byteLength||!Be(new Po(d),new Po(b)));case Ae:case Ee:case ce:return Gu(+d,+b);case gt:return d.name==b.name&&d.message==b.message;case ot:case pt:return d==b+"";case oe:var ft=_l;case at:var Et=q&C;if(ft||(ft=zs),d.size!=b.size&&!Et)return!1;var nn=Xe.get(d);if(nn)return nn==b;q|=S,Xe.set(d,b);var rn=W_(ft(d),ft(b),q,ve,Be,Xe);return Xe.delete(d),rn;case Ft:if(Xr)return Xr.call(d)==Xr.call(b)}return!1}function zP(d,b,A,q,ve,Be){var Xe=A&C,ft=by(d),Et=ft.length,nn=by(b),rn=nn.length;if(Et!=rn&&!Xe)return!1;for(var hn=Et;hn--;){var Bn=ft[hn];if(!(Xe?Bn in b:Dr.call(b,Bn)))return!1}var Qn=Be.get(d),vr=Be.get(b);if(Qn&&vr)return Qn==b&&vr==d;var Yr=!0;Be.set(d,b),Be.set(b,d);for(var yr=Xe;++hn<Et;){Bn=ft[hn];var si=d[Bn],ci=b[Bn];if(q)var Ql=Xe?q(ci,si,Bn,b,d,Be):q(si,ci,Bn,d,b,Be);if(!(Ql===n?si===ci||ve(si,ci,A,q,Be):Ql)){Yr=!1;break}yr||(yr=Bn=="constructor")}if(Yr&&!yr){var el=d.constructor,eu=b.constructor;el!=eu&&"constructor"in d&&"constructor"in b&&!(typeof el=="function"&&el instanceof el&&typeof eu=="function"&&eu instanceof eu)&&(Yr=!1)}return Be.delete(d),Be.delete(b),Yr}function Jc(d){return Py(X_(d,n,ow),d+"")}function by(d){return We(d,Wo,Ly)}function _y(d){return We(d,Cl,G_)}var wy=Li?function(d){return Li.get(d)}:zy;function Sm(d){for(var b=d.name+"",A=no[b],q=Dr.call(no,b)?A.length:0;q--;){var ve=A[q],Be=ve.func;if(Be==null||Be==d)return ve.name}return b}function bd(d){var b=Dr.call(Me,"placeholder")?Me:d;return b.placeholder}function pr(){var d=Me.iteratee||Fy;return d=d===Fy?Wn:d,arguments.length?d(arguments[0],arguments[1]):d}function Em(d,b){var A=d.__data__;return YP(b)?A[typeof b=="string"?"string":"hash"]:A.map}function xy(d){for(var b=Wo(d),A=b.length;A--;){var q=b[A],ve=d[q];b[A]=[q,ve,Z_(ve)]}return b}function wf(d,b){var A=Yi(d,b);return St(A)?A:n}function UP(d){var b=Dr.call(d,xa),A=d[xa];try{d[xa]=n;var q=!0}catch{}var ve=ii.call(d);return q&&(b?d[xa]=A:delete d[xa]),ve}var Ly=Vo?function(d){return d==null?[]:(d=ri(d),zo(Vo(d),function(b){return pi.call(d,b)}))}:Uy,G_=Vo?function(d){for(var b=[];d;)vo(b,Ly(d)),d=oa(d);return b}:Uy,Ea=Ye;(Mn&&Ea(new Mn(new ArrayBuffer(1)))!=Sn||Vn&&Ea(new Vn)!=oe||Cr&&Ea(Cr.resolve())!=Ve||Ki&&Ea(new Ki)!=at||Oi&&Ea(new Oi)!=Zt)&&(Ea=function(d){var b=Ye(d),A=b==Pe?d.constructor:n,q=A?xf(A):"";if(q)switch(q){case Gc:return Sn;case aa:return oe;case Ho:return Ve;case ko:return at;case pf:return Zt}return b});function $P(d,b,A){for(var q=-1,ve=A.length;++q<ve;){var Be=A[q],Xe=Be.size;switch(Be.type){case"drop":d+=Xe;break;case"dropRight":b-=Xe;break;case"take":b=xe(b,d+Xe);break;case"takeRight":d=ne(d,b-Xe);break}}return{start:d,end:b}}function VP(d){var b=d.match(on);return b?b[1].split(dt):[]}function q_(d,b,A){b=Wu(b,d);for(var q=-1,ve=b.length,Be=!1;++q<ve;){var Xe=xc(b[q]);if(!(Be=d!=null&&A(d,Xe)))break;d=d[Xe]}return Be||++q!=ve?Be:(ve=d==null?0:d.length,!!ve&&Dm(ve)&&Qc(Xe,ve)&&(Nr(d)||Lf(d)))}function HP(d){var b=d.length,A=new d.constructor(b);return b&&typeof d[0]=="string"&&Dr.call(d,"index")&&(A.index=d.index,A.input=d.input),A}function Y_(d){return typeof d.constructor=="function"&&!xp(d)?ro(oa(d)):{}}function WP(d,b,A){var q=d.constructor;switch(b){case un:return my(d);case Ae:case Ee:return new q(+d);case Sn:return kP(d,A);case qe:case it:case Ze:case Ut:case Yt:case Ln:case gn:case vn:case jn:return A_(d,A);case oe:return new q;case ce:case pt:return new q(d);case ot:return MP(d);case at:return new q;case Ft:return AP(d)}}function GP(d,b){var A=b.length;if(!A)return d;var q=A-1;return b[q]=(A>1?"& ":"")+b[q],b=b.join(A>2?", ":" "),d.replace(Gt,`{
/* [wrapped with `+b+`] */
`)}function qP(d){return Nr(d)||Lf(d)||!!(to&&d&&d[to])}function Qc(d,b){var A=typeof d;return b=b??K,!!b&&(A=="number"||A!="symbol"&&Xo.test(d))&&d>-1&&d%1==0&&d<b}function Qa(d,b,A){if(!Ds(A))return!1;var q=typeof b;return(q=="number"?Ll(A)&&Qc(b,A.length):q=="string"&&b in A)?Gu(A[b],d):!1}function Cy(d,b){if(Nr(d))return!1;var A=typeof d;return A=="number"||A=="symbol"||A=="boolean"||d==null||Jl(d)?!0:ls.test(d)||!Rs.test(d)||b!=null&&d in ri(b)}function YP(d){var b=typeof d;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?d!=="__proto__":d===null}function Sy(d){var b=Sm(d),A=Me[b];if(typeof A!="function"||!(b in Pr.prototype))return!1;if(d===A)return!0;var q=wy(A);return!!q&&d===q[0]}function ZP(d){return!!fs&&fs in d}var KP=ia?eh:$y;function xp(d){var b=d&&d.constructor,A=typeof b=="function"&&b.prototype||ra;return d===A}function Z_(d){return d===d&&!Ds(d)}function K_(d,b){return function(A){return A==null?!1:A[d]===b&&(b!==n||d in ri(A))}}function XP(d){var b=Tm(d,function(q){return A.size===c&&A.clear(),q}),A=b.cache;return b}function JP(d,b){var A=d[1],q=b[1],ve=A|q,Be=ve<(T|O|te),Xe=q==te&&A==N||q==te&&A==V&&d[7].length<=b[8]||q==(te|V)&&b[7].length<=b[8]&&A==N;if(!(Be||Xe))return d;q&T&&(d[2]=b[2],ve|=A&T?0:D);var ft=b[3];if(ft){var Et=d[3];d[3]=Et?O_(Et,ft,b[4]):ft,d[4]=Et?js(d[3],f):b[4]}return ft=b[5],ft&&(Et=d[5],d[5]=Et?D_(Et,ft,b[6]):ft,d[6]=Et?js(d[5],f):b[6]),ft=b[7],ft&&(d[7]=ft),q&te&&(d[8]=d[8]==null?b[8]:xe(d[8],b[8])),d[9]==null&&(d[9]=b[9]),d[0]=b[0],d[1]=ve,d}function QP(d){var b=[];if(d!=null)for(var A in ri(d))b.push(A);return b}function ek(d){return ii.call(d)}function X_(d,b,A){return b=ne(b===n?d.length-1:b,0),function(){for(var q=arguments,ve=-1,Be=ne(q.length-b,0),Xe=Mt(Be);++ve<Be;)Xe[ve]=q[b+ve];ve=-1;for(var ft=Mt(b+1);++ve<b;)ft[ve]=q[ve];return ft[b]=A(Xe),ei(d,this,ft)}}function J_(d,b){return b.length<2?d:nr(d,wl(b,0,-1))}function tk(d,b){for(var A=d.length,q=xe(b.length,A),ve=xl(d);q--;){var Be=b[q];d[q]=Qc(Be,A)?ve[Be]:n}return d}function Ey(d,b){if(!(b==="constructor"&&typeof d[b]=="function")&&b!="__proto__")return d[b]}var Q_=tw($u),Lp=Wc||function(d,b){return Fi.setTimeout(d,b)},Py=tw(mm);function ew(d,b,A){var q=b+"";return Py(d,GP(q,nk(VP(q),A)))}function tw(d){var b=0,A=0;return function(){var q=et(),ve=le-(q-A);if(A=q,ve>0){if(++b>=H)return arguments[0]}else b=0;return d.apply(n,arguments)}}function Pm(d,b){var A=-1,q=d.length,ve=q-1;for(b=b===n?q:b;++A<b;){var Be=yf(A,ve),Xe=d[Be];d[Be]=d[A],d[A]=Xe}return d.length=b,d}var nw=XP(function(d){var b=[];return d.charCodeAt(0)===46&&b.push(""),d.replace(mt,function(A,q,ve,Be){b.push(ve?Be.replace(Tn,"$1"):q||A)}),b});function xc(d){if(typeof d=="string"||Jl(d))return d;var b=d+"";return b=="0"&&1/d==-1/0?"-0":b}function xf(d){if(d!=null){try{return sa.call(d)}catch{}try{return d+""}catch{}}return""}function nk(d,b){return cs(se,function(A){var q="_."+A[0];b&A[1]&&!vl(d,q)&&d.push(q)}),d.sort()}function rw(d){if(d instanceof Pr)return d.clone();var b=new ms(d.__wrapped__,d.__chain__);return b.__actions__=xl(d.__actions__),b.__index__=d.__index__,b.__values__=d.__values__,b}function rk(d,b,A){(A?Qa(d,b,A):b===n)?b=1:b=ne(Hr(b),0);var q=d==null?0:d.length;if(!q||b<1)return[];for(var ve=0,Be=0,Xe=Mt(ds(q/b));ve<q;)Xe[Be++]=wl(d,ve,ve+=b);return Xe}function ik(d){for(var b=-1,A=d==null?0:d.length,q=0,ve=[];++b<A;){var Be=d[b];Be&&(ve[q++]=Be)}return ve}function sk(){var d=arguments.length;if(!d)return[];for(var b=Mt(d-1),A=arguments[0],q=d;q--;)b[q-1]=arguments[q];return vo(Nr(A)?xl(A):[A],ze(b,1))}var ok=Vr(function(d,b){return so(d)?k(d,ze(b,1,so,!0)):[]}),ak=Vr(function(d,b){var A=xu(b);return so(A)&&(A=n),so(d)?k(d,ze(b,1,so,!0),pr(A,2)):[]}),lk=Vr(function(d,b){var A=xu(b);return so(A)&&(A=n),so(d)?k(d,ze(b,1,so,!0),n,A):[]});function uk(d,b,A){var q=d==null?0:d.length;return q?(b=A||b===n?1:Hr(b),wl(d,b<0?0:b,q)):[]}function ck(d,b,A){var q=d==null?0:d.length;return q?(b=A||b===n?1:Hr(b),b=q-b,wl(d,0,b<0?0:b)):[]}function hk(d,b){return d&&d.length?Kc(d,pr(b,3),!0,!0):[]}function fk(d,b){return d&&d.length?Kc(d,pr(b,3),!0):[]}function dk(d,b,A,q){var ve=d==null?0:d.length;return ve?(A&&typeof A!="number"&&Qa(d,b,A)&&(A=0,q=ve),_e(d,b,A,q)):[]}function iw(d,b,A){var q=d==null?0:d.length;if(!q)return-1;var ve=A==null?0:Hr(A);return ve<0&&(ve=ne(q+ve,0)),Nt(d,pr(b,3),ve)}function sw(d,b,A){var q=d==null?0:d.length;if(!q)return-1;var ve=q-1;return A!==n&&(ve=Hr(A),ve=A<0?ne(q+ve,0):xe(ve,q-1)),Nt(d,pr(b,3),ve,!0)}function ow(d){var b=d==null?0:d.length;return b?ze(d,1):[]}function pk(d){var b=d==null?0:d.length;return b?ze(d,X):[]}function gk(d,b){var A=d==null?0:d.length;return A?(b=b===n?1:Hr(b),ze(d,b)):[]}function mk(d){for(var b=-1,A=d==null?0:d.length,q={};++b<A;){var ve=d[b];q[ve[0]]=ve[1]}return q}function aw(d){return d&&d.length?d[0]:n}function vk(d,b,A){var q=d==null?0:d.length;if(!q)return-1;var ve=A==null?0:Hr(A);return ve<0&&(ve=ne(q+ve,0)),sn(d,b,ve)}function yk(d){var b=d==null?0:d.length;return b?wl(d,0,-1):[]}var bk=Vr(function(d){var b=ti(d,Ah);return b.length&&b[0]===d[0]?fe(b):[]}),_k=Vr(function(d){var b=xu(d),A=ti(d,Ah);return b===xu(A)?b=n:A.pop(),A.length&&A[0]===d[0]?fe(A,pr(b,2)):[]}),wk=Vr(function(d){var b=xu(d),A=ti(d,Ah);return b=typeof b=="function"?b:n,b&&A.pop(),A.length&&A[0]===d[0]?fe(A,n,b):[]});function xk(d,b){return d==null?"":E.call(d,b)}function xu(d){var b=d==null?0:d.length;return b?d[b-1]:n}function Lk(d,b,A){var q=d==null?0:d.length;if(!q)return-1;var ve=q;return A!==n&&(ve=Hr(A),ve=ve<0?ne(q+ve,0):xe(ve,q-1)),b===b?ya(d,b,ve):Nt(d,In,ve,!0)}function Ck(d,b){return d&&d.length?Ja(d,Hr(b)):n}var Sk=Vr(lw);function lw(d,b){return d&&d.length&&b&&b.length?fd(d,b):d}function Ek(d,b,A){return d&&d.length&&b&&b.length?fd(d,b,pr(A,2)):d}function Pk(d,b,A){return d&&d.length&&b&&b.length?fd(d,b,n,A):d}var kk=Jc(function(d,b){var A=d==null?0:d.length,q=xn(d,b);return vf(d,ti(b,function(ve){return Qc(ve,A)?+ve:ve}).sort(T_)),q});function Mk(d,b){var A=[];if(!(d&&d.length))return A;var q=-1,ve=[],Be=d.length;for(b=pr(b,3);++q<Be;){var Xe=d[q];b(Xe,q,d)&&(A.push(Xe),ve.push(q))}return vf(d,ve),A}function ky(d){return d==null?d:tn.call(d)}function Ak(d,b,A){var q=d==null?0:d.length;return q?(A&&typeof A!="number"&&Qa(d,b,A)?(b=0,A=q):(b=b==null?0:Hr(b),A=A===n?q:Hr(A)),wl(d,b,A)):[]}function Tk(d,b){return Vu(d,b)}function Ok(d,b,A){return bp(d,b,pr(A,2))}function Dk(d,b){var A=d==null?0:d.length;if(A){var q=Vu(d,b);if(q<A&&Gu(d[q],b))return q}return-1}function Ik(d,b){return Vu(d,b,!0)}function Nk(d,b,A){return bp(d,b,pr(A,2),!0)}function Bk(d,b){var A=d==null?0:d.length;if(A){var q=Vu(d,b,!0)-1;if(Gu(d[q],b))return q}return-1}function Rk(d){return d&&d.length?_p(d):[]}function Fk(d,b){return d&&d.length?_p(d,pr(b,2)):[]}function jk(d){var b=d==null?0:d.length;return b?wl(d,1,b):[]}function zk(d,b,A){return d&&d.length?(b=A||b===n?1:Hr(b),wl(d,0,b<0?0:b)):[]}function Uk(d,b,A){var q=d==null?0:d.length;return q?(b=A||b===n?1:Hr(b),b=q-b,wl(d,b<0?0:b,q)):[]}function $k(d,b){return d&&d.length?Kc(d,pr(b,3),!1,!0):[]}function Vk(d,b){return d&&d.length?Kc(d,pr(b,3)):[]}var Hk=Vr(function(d){return _c(ze(d,1,so,!0))}),Wk=Vr(function(d){var b=xu(d);return so(b)&&(b=n),_c(ze(d,1,so,!0),pr(b,2))}),Gk=Vr(function(d){var b=xu(d);return b=typeof b=="function"?b:n,_c(ze(d,1,so,!0),n,b)});function qk(d){return d&&d.length?_c(d):[]}function Yk(d,b){return d&&d.length?_c(d,pr(b,2)):[]}function Zk(d,b){return b=typeof b=="function"?b:n,d&&d.length?_c(d,n,b):[]}function My(d){if(!(d&&d.length))return[];var b=0;return d=zo(d,function(A){if(so(A))return b=ne(A.length,b),!0}),Ui(b,function(A){return ti(d,ur(A))})}function uw(d,b){if(!(d&&d.length))return[];var A=My(d);return b==null?A:ti(A,function(q){return ei(b,n,q)})}var Kk=Vr(function(d,b){return so(d)?k(d,b):[]}),Xk=Vr(function(d){return _u(zo(d,so))}),Jk=Vr(function(d){var b=xu(d);return so(b)&&(b=n),_u(zo(d,so),pr(b,2))}),Qk=Vr(function(d){var b=xu(d);return b=typeof b=="function"?b:n,_u(zo(d,so),n,b)}),eM=Vr(My);function tM(d,b){return Hu(d||[],b||[],ct)}function nM(d,b){return Hu(d||[],b||[],Yc)}var rM=Vr(function(d){var b=d.length,A=b>1?d[b-1]:n;return A=typeof A=="function"?(d.pop(),A):n,uw(d,A)});function cw(d){var b=Me(d);return b.__chain__=!0,b}function iM(d,b){return b(d),d}function km(d,b){return b(d)}var sM=Jc(function(d){var b=d.length,A=b?d[0]:0,q=this.__wrapped__,ve=function(Be){return xn(Be,d)};return b>1||this.__actions__.length||!(q instanceof Pr)||!Qc(A)?this.thru(ve):(q=q.slice(A,+A+(b?1:0)),q.__actions__.push({func:km,args:[ve],thisArg:n}),new ms(q,this.__chain__).thru(function(Be){return b&&!Be.length&&Be.push(n),Be}))});function oM(){return cw(this)}function aM(){return new ms(this.value(),this.__chain__)}function lM(){this.__values__===n&&(this.__values__=Cw(this.value()));var d=this.__index__>=this.__values__.length,b=d?n:this.__values__[this.__index__++];return{done:d,value:b}}function uM(){return this}function cM(d){for(var b,A=this;A instanceof zu;){var q=rw(A);q.__index__=0,q.__values__=n,b?ve.__wrapped__=q:b=q;var ve=q;A=A.__wrapped__}return ve.__wrapped__=d,b}function hM(){var d=this.__wrapped__;if(d instanceof Pr){var b=d;return this.__actions__.length&&(b=new Pr(this)),b=b.reverse(),b.__actions__.push({func:km,args:[ky],thisArg:n}),new ms(b,this.__chain__)}return this.thru(ky)}function fM(){return bu(this.__wrapped__,this.__actions__)}var dM=_m(function(d,b,A){Dr.call(d,A)?++d[A]:Pn(d,A,1)});function pM(d,b,A){var q=Nr(d)?Zl:Z;return A&&Qa(d,b,A)&&(b=n),q(d,pr(b,3))}function gM(d,b){var A=Nr(d)?zo:Ge;return A(d,pr(b,3))}var mM=R_(iw),vM=R_(sw);function yM(d,b){return ze(Mm(d,b),1)}function bM(d,b){return ze(Mm(d,b),X)}function _M(d,b,A){return A=A===n?1:Hr(A),ze(Mm(d,b),A)}function hw(d,b){var A=Nr(d)?cs:R;return A(d,pr(b,3))}function fw(d,b){var A=Nr(d)?jo:G;return A(d,pr(b,3))}var wM=_m(function(d,b,A){Dr.call(d,A)?d[A].push(b):Pn(d,A,[b])});function xM(d,b,A,q){d=Ll(d)?d:wd(d),A=A&&!q?Hr(A):0;var ve=d.length;return A<0&&(A=ne(ve+A,0)),Im(d)?A<=ve&&d.indexOf(b,A)>-1:!!ve&&sn(d,b,A)>-1}var LM=Vr(function(d,b,A){var q=-1,ve=typeof b=="function",Be=Ll(d)?Mt(d.length):[];return R(d,function(Xe){Be[++q]=ve?ei(b,Xe,A):Ie(Xe,b,A)}),Be}),CM=_m(function(d,b,A){Pn(d,A,b)});function Mm(d,b){var A=Nr(d)?ti:mi;return A(d,pr(b,3))}function SM(d,b,A,q){return d==null?[]:(Nr(b)||(b=b==null?[]:[b]),A=q?n:A,Nr(A)||(A=A==null?[]:[A]),bc(d,b,A))}var EM=_m(function(d,b,A){d[A?0:1].push(b)},function(){return[[],[]]});function PM(d,b,A){var q=Nr(d)?va:bi,ve=arguments.length<3;return q(d,pr(b,4),A,ve,R)}function kM(d,b,A){var q=Nr(d)?zi:bi,ve=arguments.length<3;return q(d,pr(b,4),A,ve,G)}function MM(d,b){var A=Nr(d)?zo:Ge;return A(d,Om(pr(b,3)))}function AM(d){var b=Nr(d)?Dt:pd;return b(d)}function TM(d,b,A){(A?Qa(d,b,A):b===n)?b=1:b=Hr(b);var q=Nr(d)?xt:gm;return q(d,b)}function OM(d){var b=Nr(d)?Ht:vm;return b(d)}function DM(d){if(d==null)return 0;if(Ll(d))return Im(d)?Es(d):d.length;var b=Ea(d);return b==oe||b==at?d.size:Jr(d).length}function IM(d,b,A){var q=Nr(d)?I:ym;return A&&Qa(d,b,A)&&(b=n),q(d,pr(b,3))}var NM=Vr(function(d,b){if(d==null)return[];var A=b.length;return A>1&&Qa(d,b[0],b[1])?b=[]:A>2&&Qa(b[0],b[1],b[2])&&(b=[b[0]]),bc(d,ze(b,1),[])}),Am=$s||function(){return Fi.Date.now()};function BM(d,b){if(typeof b!="function")throw new xi(o);return d=Hr(d),function(){if(--d<1)return b.apply(this,arguments)}}function dw(d,b,A){return b=A?n:b,b=d&&b==null?d.length:b,Xc(d,te,n,n,n,n,b)}function pw(d,b){var A;if(typeof b!="function")throw new xi(o);return d=Hr(d),function(){return--d>0&&(A=b.apply(this,arguments)),d<=1&&(b=n),A}}var Ay=Vr(function(d,b,A){var q=T;if(A.length){var ve=js(A,bd(Ay));q|=W}return Xc(d,q,b,A,ve)}),gw=Vr(function(d,b,A){var q=T|O;if(A.length){var ve=js(A,bd(gw));q|=W}return Xc(b,q,d,A,ve)});function mw(d,b,A){b=A?n:b;var q=Xc(d,N,n,n,n,n,n,b);return q.placeholder=mw.placeholder,q}function vw(d,b,A){b=A?n:b;var q=Xc(d,U,n,n,n,n,n,b);return q.placeholder=vw.placeholder,q}function yw(d,b,A){var q,ve,Be,Xe,ft,Et,nn=0,rn=!1,hn=!1,Bn=!0;if(typeof d!="function")throw new xi(o);b=Lu(b)||0,Ds(A)&&(rn=!!A.leading,hn="maxWait"in A,Be=hn?ne(Lu(A.maxWait)||0,b):Be,Bn="trailing"in A?!!A.trailing:Bn);function Qn(oo){var qu=q,nh=ve;return q=ve=n,nn=oo,Xe=d.apply(nh,qu),Xe}function vr(oo){return nn=oo,ft=Lp(si,b),rn?Qn(oo):Xe}function Yr(oo){var qu=oo-Et,nh=oo-nn,Rw=b-qu;return hn?xe(Rw,Be-nh):Rw}function yr(oo){var qu=oo-Et,nh=oo-nn;return Et===n||qu>=b||qu<0||hn&&nh>=Be}function si(){var oo=Am();if(yr(oo))return ci(oo);ft=Lp(si,Yr(oo))}function ci(oo){return ft=n,Bn&&q?Qn(oo):(q=ve=n,Xe)}function Ql(){ft!==n&&md(ft),nn=0,q=Et=ve=ft=n}function el(){return ft===n?Xe:ci(Am())}function eu(){var oo=Am(),qu=yr(oo);if(q=arguments,ve=this,Et=oo,qu){if(ft===n)return vr(Et);if(hn)return md(ft),ft=Lp(si,b),Qn(Et)}return ft===n&&(ft=Lp(si,b)),Xe}return eu.cancel=Ql,eu.flush=el,eu}var RM=Vr(function(d,b){return x(d,1,b)}),FM=Vr(function(d,b,A){return x(d,Lu(b)||0,A)});function jM(d){return Xc(d,Y)}function Tm(d,b){if(typeof d!="function"||b!=null&&typeof b!="function")throw new xi(o);var A=function(){var q=arguments,ve=b?b.apply(this,q):q[0],Be=A.cache;if(Be.has(ve))return Be.get(ve);var Xe=d.apply(this,q);return A.cache=Be.set(ve,Xe)||Be,Xe};return A.cache=new(Tm.Cache||Ca),A}Tm.Cache=Ca;function Om(d){if(typeof d!="function")throw new xi(o);return function(){var b=arguments;switch(b.length){case 0:return!d.call(this);case 1:return!d.call(this,b[0]);case 2:return!d.call(this,b[0],b[1]);case 3:return!d.call(this,b[0],b[1],b[2])}return!d.apply(this,b)}}function zM(d){return pw(2,d)}var UM=gy(function(d,b){b=b.length==1&&Nr(b[0])?ti(b[0],Er(pr())):ti(ze(b,1),Er(pr()));var A=b.length;return Vr(function(q){for(var ve=-1,Be=xe(q.length,A);++ve<Be;)q[ve]=b[ve].call(this,q[ve]);return ei(d,this,q)})}),Ty=Vr(function(d,b){var A=js(b,bd(Ty));return Xc(d,W,n,b,A)}),bw=Vr(function(d,b){var A=js(b,bd(bw));return Xc(d,ee,n,b,A)}),$M=Jc(function(d,b){return Xc(d,V,n,n,n,b)});function VM(d,b){if(typeof d!="function")throw new xi(o);return b=b===n?b:Hr(b),Vr(d,b)}function HM(d,b){if(typeof d!="function")throw new xi(o);return b=b==null?0:ne(Hr(b),0),Vr(function(A){var q=A[b],ve=wu(A,0,b);return q&&vo(ve,q),ei(d,this,ve)})}function WM(d,b,A){var q=!0,ve=!0;if(typeof d!="function")throw new xi(o);return Ds(A)&&(q="leading"in A?!!A.leading:q,ve="trailing"in A?!!A.trailing:ve),yw(d,b,{leading:q,maxWait:b,trailing:ve})}function GM(d){return dw(d,1)}function qM(d,b){return Ty(_f(b),d)}function YM(){if(!arguments.length)return[];var d=arguments[0];return Nr(d)?d:[d]}function ZM(d){return h(d,m)}function KM(d,b){return b=typeof b=="function"?b:n,h(d,m,b)}function XM(d){return h(d,p|m)}function JM(d,b){return b=typeof b=="function"?b:n,h(d,p|m,b)}function QM(d,b){return b==null||_(d,b,Wo(b))}function Gu(d,b){return d===b||d!==d&&b!==b}var eA=Cm(lt),tA=Cm(function(d,b){return d>=b}),Lf=De(function(){return arguments}())?De:function(d){return Vs(d)&&Dr.call(d,"callee")&&!pi.call(d,"callee")},Nr=Mt.isArray,nA=mu?Er(mu):Re;function Ll(d){return d!=null&&Dm(d.length)&&!eh(d)}function so(d){return Vs(d)&&Ll(d)}function rA(d){return d===!0||d===!1||Vs(d)&&Ye(d)==Ae}var Th=u||$y,iA=Jo?Er(Jo):Fe;function sA(d){return Vs(d)&&d.nodeType===1&&!Cp(d)}function oA(d){if(d==null)return!0;if(Ll(d)&&(Nr(d)||typeof d=="string"||typeof d.splice=="function"||Th(d)||_d(d)||Lf(d)))return!d.length;var b=Ea(d);if(b==oe||b==at)return!d.size;if(xp(d))return!Jr(d).length;for(var A in d)if(Dr.call(d,A))return!1;return!0}function aA(d,b){return tt(d,b)}function lA(d,b,A){A=typeof A=="function"?A:n;var q=A?A(d,b):n;return q===n?tt(d,b,n,A):!!q}function Oy(d){if(!Vs(d))return!1;var b=Ye(d);return b==gt||b==Je||typeof d.message=="string"&&typeof d.name=="string"&&!Cp(d)}function uA(d){return typeof d=="number"&&v(d)}function eh(d){if(!Ds(d))return!1;var b=Ye(d);return b==_t||b==ue||b==be||b==Qe}function _w(d){return typeof d=="number"&&d==Hr(d)}function Dm(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=K}function Ds(d){var b=typeof d;return d!=null&&(b=="object"||b=="function")}function Vs(d){return d!=null&&typeof d=="object"}var ww=Gl?Er(Gl):ht;function cA(d,b){return d===b||Ct(d,b,xy(b))}function hA(d,b,A){return A=typeof A=="function"?A:n,Ct(d,b,xy(b),A)}function fA(d){return xw(d)&&d!=+d}function dA(d){if(KP(d))throw new Un(s);return St(d)}function pA(d){return d===null}function gA(d){return d==null}function xw(d){return typeof d=="number"||Vs(d)&&Ye(d)==ce}function Cp(d){if(!Vs(d)||Ye(d)!=Pe)return!1;var b=oa(d);if(b===null)return!0;var A=Dr.call(b,"constructor")&&b.constructor;return typeof A=="function"&&A instanceof A&&sa.call(A)==li}var Dy=ql?Er(ql):en;function mA(d){return _w(d)&&d>=-9007199254740991&&d<=K}var Lw=Eo?Er(Eo):Nn;function Im(d){return typeof d=="string"||!Nr(d)&&Vs(d)&&Ye(d)==pt}function Jl(d){return typeof d=="symbol"||Vs(d)&&Ye(d)==Ft}var _d=Yl?Er(Yl):Rn;function vA(d){return d===n}function yA(d){return Vs(d)&&Ea(d)==Zt}function bA(d){return Vs(d)&&Ye(d)==ln}var _A=Cm(Ir),wA=Cm(function(d,b){return d<=b});function Cw(d){if(!d)return[];if(Ll(d))return Im(d)?Ps(d):xl(d);if(sr&&d[sr])return Qs(d[sr]());var b=Ea(d),A=b==oe?_l:b==at?zs:wd;return A(d)}function th(d){if(!d)return d===0?d:0;if(d=Lu(d),d===X||d===-1/0){var b=d<0?-1:1;return b*ye}return d===d?d:0}function Hr(d){var b=th(d),A=b%1;return b===b?A?b-A:b:0}function Sw(d){return d?Hn(Hr(d),0,Ue):0}function Lu(d){if(typeof d=="number")return d;if(Jl(d))return Te;if(Ds(d)){var b=typeof d.valueOf=="function"?d.valueOf():d;d=Ds(b)?b+"":b}if(typeof d!="string")return d===0?d:+d;d=yo(d);var A=Xn.test(d);return A||Wr.test(d)?Wl(d.slice(2),A?2:8):Ur.test(d)?Te:+d}function Ew(d){return wc(d,Cl(d))}function xA(d){return d?Hn(Hr(d),-9007199254740991,K):d===0?d:0}function ki(d){return d==null?"":Sa(d)}var LA=vd(function(d,b){if(xp(b)||Ll(b)){wc(b,Wo(b),d);return}for(var A in b)Dr.call(b,A)&&ct(d,A,b[A])}),Pw=vd(function(d,b){wc(b,Cl(b),d)}),Nm=vd(function(d,b,A,q){wc(b,Cl(b),d,q)}),CA=vd(function(d,b,A,q){wc(b,Wo(b),d,q)}),SA=Jc(xn);function EA(d,b){var A=ro(d);return b==null?A:an(A,b)}var PA=Vr(function(d,b){d=ri(d);var A=-1,q=b.length,ve=q>2?b[2]:n;for(ve&&Qa(b[0],b[1],ve)&&(q=1);++A<q;)for(var Be=b[A],Xe=Cl(Be),ft=-1,Et=Xe.length;++ft<Et;){var nn=Xe[ft],rn=d[nn];(rn===n||Gu(rn,ra[nn])&&!Dr.call(d,nn))&&(d[nn]=Be[nn])}return d}),kA=Vr(function(d){return d.push(n,H_),ei(kw,n,d)});function MA(d,b){return Lt(d,pr(b,3),qt)}function AA(d,b){return Lt(d,pr(b,3),dn)}function TA(d,b){return d==null?d:vt(d,pr(b,3),Cl)}function OA(d,b){return d==null?d:At(d,pr(b,3),Cl)}function DA(d,b){return d&&qt(d,pr(b,3))}function IA(d,b){return d&&dn(d,pr(b,3))}function NA(d){return d==null?[]:yn(d,Wo(d))}function BA(d){return d==null?[]:yn(d,Cl(d))}function Iy(d,b,A){var q=d==null?n:nr(d,b);return q===n?A:q}function RA(d,b){return d!=null&&q_(d,b,It)}function Ny(d,b){return d!=null&&q_(d,b,wt)}var FA=j_(function(d,b,A){b!=null&&typeof b.toString!="function"&&(b=ii.call(b)),d[b]=A},Ry(Sl)),jA=j_(function(d,b,A){b!=null&&typeof b.toString!="function"&&(b=ii.call(b)),Dr.call(d,b)?d[b].push(A):d[b]=[A]},pr),zA=Vr(Ie);function Wo(d){return Ll(d)?Ot(d):Jr(d)}function Cl(d){return Ll(d)?Ot(d,!0):ui(d)}function UA(d,b){var A={};return b=pr(b,3),qt(d,function(q,ve,Be){Pn(A,b(q,ve,Be),q)}),A}function $A(d,b){var A={};return b=pr(b,3),qt(d,function(q,ve,Be){Pn(A,ve,b(q,ve,Be))}),A}var VA=vd(function(d,b,A){la(d,b,A)}),kw=vd(function(d,b,A,q){la(d,b,A,q)}),HA=Jc(function(d,b){var A={};if(d==null)return A;var q=!1;b=ti(b,function(Be){return Be=Wu(Be,d),q||(q=Be.length>1),Be}),wc(d,_y(d),A),q&&(A=h(A,p|y|m,FP));for(var ve=b.length;ve--;)Zc(A,b[ve]);return A});function WA(d,b){return Mw(d,Om(pr(b)))}var GA=Jc(function(d,b){return d==null?{}:ua(d,b)});function Mw(d,b){if(d==null)return{};var A=ti(_y(d),function(q){return[q]});return b=pr(b),Os(d,A,function(q,ve){return b(q,ve[0])})}function qA(d,b,A){b=Wu(b,d);var q=-1,ve=b.length;for(ve||(ve=1,d=n);++q<ve;){var Be=d==null?n:d[xc(b[q])];Be===n&&(q=ve,Be=A),d=eh(Be)?Be.call(d):Be}return d}function YA(d,b,A){return d==null?d:Yc(d,b,A)}function ZA(d,b,A,q){return q=typeof q=="function"?q:n,d==null?d:Yc(d,b,A,q)}var Aw=$_(Wo),Tw=$_(Cl);function KA(d,b,A){var q=Nr(d),ve=q||Th(d)||_d(d);if(b=pr(b,4),A==null){var Be=d&&d.constructor;ve?A=q?new Be:[]:Ds(d)?A=eh(Be)?ro(oa(d)):{}:A={}}return(ve?cs:qt)(d,function(Xe,ft,Et){return b(A,Xe,ft,Et)}),A}function XA(d,b){return d==null?!0:Zc(d,b)}function JA(d,b,A){return d==null?d:gd(d,b,_f(A))}function QA(d,b,A,q){return q=typeof q=="function"?q:n,d==null?d:gd(d,b,_f(A),q)}function wd(d){return d==null?[]:Cs(d,Wo(d))}function e6(d){return d==null?[]:Cs(d,Cl(d))}function t6(d,b,A){return A===n&&(A=b,b=n),A!==n&&(A=Lu(A),A=A===A?A:0),b!==n&&(b=Lu(b),b=b===b?b:0),Hn(Lu(d),b,A)}function n6(d,b,A){return b=th(b),A===n?(A=b,b=0):A=th(A),d=Lu(d),Tt(d,b,A)}function r6(d,b,A){if(A&&typeof A!="boolean"&&Qa(d,b,A)&&(b=A=n),A===n&&(typeof b=="boolean"?(A=b,b=n):typeof d=="boolean"&&(A=d,d=n)),d===n&&b===n?(d=0,b=1):(d=th(d),b===n?(b=d,d=0):b=th(b)),d>b){var q=d;d=b,b=q}if(A||d%1||b%1){var ve=Rt();return xe(d+ve*(b-d+gl("1e-"+((ve+"").length-1))),b)}return yf(d,b)}var i6=yd(function(d,b,A){return b=b.toLowerCase(),d+(A?Ow(b):b)});function Ow(d){return By(ki(d).toLowerCase())}function Dw(d){return d=ki(d),d&&d.replace(or,Fu).replace(Bu,"")}function s6(d,b,A){d=ki(d),b=Sa(b);var q=d.length;A=A===n?q:Hn(Hr(A),0,q);var ve=A;return A-=b.length,A>=0&&d.slice(A,ve)==b}function o6(d){return d=ki(d),d&&zn.test(d)?d.replace(Kn,Za):d}function a6(d){return d=ki(d),d&&$t.test(d)?d.replace(Ke,"\\$&"):d}var l6=yd(function(d,b,A){return d+(A?"-":"")+b.toLowerCase()}),u6=yd(function(d,b,A){return d+(A?" ":"")+b.toLowerCase()}),c6=B_("toLowerCase");function h6(d,b,A){d=ki(d),b=Hr(b);var q=b?Es(d):0;if(!b||q>=b)return d;var ve=(b-q)/2;return Lm(ps(ve),A)+d+Lm(ds(ve),A)}function f6(d,b,A){d=ki(d),b=Hr(b);var q=b?Es(d):0;return b&&q<b?d+Lm(b-q,A):d}function d6(d,b,A){d=ki(d),b=Hr(b);var q=b?Es(d):0;return b&&q<b?Lm(b-q,A)+d:d}function p6(d,b,A){return A||b==null?b=0:b&&(b=+b),Pt(ki(d).replace(On,""),b||0)}function g6(d,b,A){return(A?Qa(d,b,A):b===n)?b=1:b=Hr(b),dd(ki(d),b)}function m6(){var d=arguments,b=ki(d[0]);return d.length<3?b:b.replace(d[1],d[2])}var v6=yd(function(d,b,A){return d+(A?"_":"")+b.toLowerCase()});function y6(d,b,A){return A&&typeof A!="number"&&Qa(d,b,A)&&(b=A=n),A=A===n?Ue:A>>>0,A?(d=ki(d),d&&(typeof b=="string"||b!=null&&!Dy(b))&&(b=Sa(b),!b&&ea(d))?wu(Ps(d),0,A):d.split(b,A)):[]}var b6=yd(function(d,b,A){return d+(A?" ":"")+By(b)});function _6(d,b,A){return d=ki(d),A=A==null?0:Hn(Hr(A),0,d.length),b=Sa(b),d.slice(A,A+b.length)==b}function w6(d,b,A){var q=Me.templateSettings;A&&Qa(d,b,A)&&(b=n),d=ki(d),b=Nm({},b,q,V_);var ve=Nm({},b.imports,q.imports,V_),Be=Wo(ve),Xe=Cs(ve,Be),ft,Et,nn=0,rn=b.interpolate||lr,hn="__p += '",Bn=Kl((b.escape||lr).source+"|"+rn.source+"|"+(rn===Pi?er:lr).source+"|"+(b.evaluate||lr).source+"|$","g"),Qn="//# sourceURL="+(Dr.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vl+"]")+`
`;d.replace(Bn,function(yr,si,ci,Ql,el,eu){return ci||(ci=Ql),hn+=d.slice(nn,eu).replace(us,Ka),si&&(ft=!0,hn+=`' +
__e(`+si+`) +
'`),el&&(Et=!0,hn+=`';
`+el+`;
__p += '`),ci&&(hn+=`' +
((__t = (`+ci+`)) == null ? '' : __t) +
'`),nn=eu+yr.length,yr}),hn+=`';
`;var vr=Dr.call(b,"variable")&&b.variable;if(!vr)hn=`with (obj) {
`+hn+`
}
`;else if(wn.test(vr))throw new Un(a);hn=(Et?hn.replace(mn,""):hn).replace(Jt,"$1").replace(cn,"$1;"),hn="function("+(vr||"obj")+`) {
`+(vr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ft?", __e = _.escape":"")+(Et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+hn+`return __p
}`;var Yr=Nw(function(){return hr(Be,Qn+"return "+hn).apply(n,Xe)});if(Yr.source=hn,Oy(Yr))throw Yr;return Yr}function x6(d){return ki(d).toLowerCase()}function L6(d){return ki(d).toUpperCase()}function C6(d,b,A){if(d=ki(d),d&&(A||b===n))return yo(d);if(!d||!(b=Sa(b)))return d;var q=Ps(d),ve=Ps(b),Be=Fs(q,ve),Xe=vu(q,ve)+1;return wu(q,Be,Xe).join("")}function S6(d,b,A){if(d=ki(d),d&&(A||b===n))return d.slice(0,ba(d)+1);if(!d||!(b=Sa(b)))return d;var q=Ps(d),ve=vu(q,Ps(b))+1;return wu(q,0,ve).join("")}function E6(d,b,A){if(d=ki(d),d&&(A||b===n))return d.replace(On,"");if(!d||!(b=Sa(b)))return d;var q=Ps(d),ve=Fs(q,Ps(b));return wu(q,ve).join("")}function P6(d,b){var A=de,q=$;if(Ds(b)){var ve="separator"in b?b.separator:ve;A="length"in b?Hr(b.length):A,q="omission"in b?Sa(b.omission):q}d=ki(d);var Be=d.length;if(ea(d)){var Xe=Ps(d);Be=Xe.length}if(A>=Be)return d;var ft=A-Es(q);if(ft<1)return q;var Et=Xe?wu(Xe,0,ft).join(""):d.slice(0,ft);if(ve===n)return Et+q;if(Xe&&(ft+=Et.length-ft),Dy(ve)){if(d.slice(ft).search(ve)){var nn,rn=Et;for(ve.global||(ve=Kl(ve.source,ki(tr.exec(ve))+"g")),ve.lastIndex=0;nn=ve.exec(rn);)var hn=nn.index;Et=Et.slice(0,hn===n?ft:hn)}}else if(d.indexOf(Sa(ve),ft)!=ft){var Bn=Et.lastIndexOf(ve);Bn>-1&&(Et=Et.slice(0,Bn))}return Et+q}function k6(d){return d=ki(d),d&&rr.test(d)?d.replace(qn,_a):d}var M6=yd(function(d,b,A){return d+(A?" ":"")+b.toUpperCase()}),By=B_("toUpperCase");function Iw(d,b,A){return d=ki(d),b=A?n:b,b===n?bo(d)?ta(d):st(d):d.match(b)||[]}var Nw=Vr(function(d,b){try{return ei(d,n,b)}catch(A){return Oy(A)?A:new Un(A)}}),A6=Jc(function(d,b){return cs(b,function(A){A=xc(A),Pn(d,A,Ay(d[A],d))}),d});function T6(d){var b=d==null?0:d.length,A=pr();return d=b?ti(d,function(q){if(typeof q[1]!="function")throw new xi(o);return[A(q[0]),q[1]]}):[],Vr(function(q){for(var ve=-1;++ve<b;){var Be=d[ve];if(ei(Be[0],this,q))return ei(Be[1],this,q)}})}function O6(d){return g(h(d,p))}function Ry(d){return function(){return d}}function D6(d,b){return d==null||d!==d?b:d}var I6=F_(),N6=F_(!0);function Sl(d){return d}function Fy(d){return Wn(typeof d=="function"?d:h(d,p))}function B6(d){return io(h(d,p))}function R6(d,b){return Uu(d,h(b,p))}var F6=Vr(function(d,b){return function(A){return Ie(A,d,b)}}),j6=Vr(function(d,b){return function(A){return Ie(d,A,b)}});function jy(d,b,A){var q=Wo(b),ve=yn(b,q);A==null&&!(Ds(b)&&(ve.length||!q.length))&&(A=b,b=d,d=this,ve=yn(b,Wo(b)));var Be=!(Ds(A)&&"chain"in A)||!!A.chain,Xe=eh(d);return cs(ve,function(ft){var Et=b[ft];d[ft]=Et,Xe&&(d.prototype[ft]=function(){var nn=this.__chain__;if(Be||nn){var rn=d(this.__wrapped__),hn=rn.__actions__=xl(this.__actions__);return hn.push({func:Et,args:arguments,thisArg:d}),rn.__chain__=nn,rn}return Et.apply(d,vo([this.value()],arguments))})}),d}function z6(){return Fi._===this&&(Fi._=$i),this}function zy(){}function U6(d){return d=Hr(d),Vr(function(b){return Ja(b,d)})}var $6=vy(ti),V6=vy(Zl),H6=vy(I);function Bw(d){return Cy(d)?ur(xc(d)):Vi(d)}function W6(d){return function(b){return d==null?n:nr(d,b)}}var G6=z_(),q6=z_(!0);function Uy(){return[]}function $y(){return!1}function Y6(){return{}}function Z6(){return""}function K6(){return!0}function X6(d,b){if(d=Hr(d),d<1||d>K)return[];var A=Ue,q=xe(d,Ue);b=pr(b),d-=Ue;for(var ve=Ui(q,b);++A<d;)b(A);return ve}function J6(d){return Nr(d)?ti(d,xc):Jl(d)?[d]:xl(nw(ki(d)))}function Q6(d){var b=++Uo;return ki(d)+b}var eT=xm(function(d,b){return d+b},0),tT=yy("ceil"),nT=xm(function(d,b){return d/b},1),rT=yy("floor");function iT(d){return d&&d.length?he(d,Sl,lt):n}function sT(d,b){return d&&d.length?he(d,pr(b,2),lt):n}function oT(d){return Yn(d,Sl)}function aT(d,b){return Yn(d,pr(b,2))}function lT(d){return d&&d.length?he(d,Sl,Ir):n}function uT(d,b){return d&&d.length?he(d,pr(b,2),Ir):n}var cT=xm(function(d,b){return d*b},1),hT=yy("round"),fT=xm(function(d,b){return d-b},0);function dT(d){return d&&d.length?ni(d,Sl):0}function pT(d,b){return d&&d.length?ni(d,pr(b,2)):0}return Me.after=BM,Me.ary=dw,Me.assign=LA,Me.assignIn=Pw,Me.assignInWith=Nm,Me.assignWith=CA,Me.at=SA,Me.before=pw,Me.bind=Ay,Me.bindAll=A6,Me.bindKey=gw,Me.castArray=YM,Me.chain=cw,Me.chunk=rk,Me.compact=ik,Me.concat=sk,Me.cond=T6,Me.conforms=O6,Me.constant=Ry,Me.countBy=dM,Me.create=EA,Me.curry=mw,Me.curryRight=vw,Me.debounce=yw,Me.defaults=PA,Me.defaultsDeep=kA,Me.defer=RM,Me.delay=FM,Me.difference=ok,Me.differenceBy=ak,Me.differenceWith=lk,Me.drop=uk,Me.dropRight=ck,Me.dropRightWhile=hk,Me.dropWhile=fk,Me.fill=dk,Me.filter=gM,Me.flatMap=yM,Me.flatMapDeep=bM,Me.flatMapDepth=_M,Me.flatten=ow,Me.flattenDeep=pk,Me.flattenDepth=gk,Me.flip=jM,Me.flow=I6,Me.flowRight=N6,Me.fromPairs=mk,Me.functions=NA,Me.functionsIn=BA,Me.groupBy=wM,Me.initial=yk,Me.intersection=bk,Me.intersectionBy=_k,Me.intersectionWith=wk,Me.invert=FA,Me.invertBy=jA,Me.invokeMap=LM,Me.iteratee=Fy,Me.keyBy=CM,Me.keys=Wo,Me.keysIn=Cl,Me.map=Mm,Me.mapKeys=UA,Me.mapValues=$A,Me.matches=B6,Me.matchesProperty=R6,Me.memoize=Tm,Me.merge=VA,Me.mergeWith=kw,Me.method=F6,Me.methodOf=j6,Me.mixin=jy,Me.negate=Om,Me.nthArg=U6,Me.omit=HA,Me.omitBy=WA,Me.once=zM,Me.orderBy=SM,Me.over=$6,Me.overArgs=UM,Me.overEvery=V6,Me.overSome=H6,Me.partial=Ty,Me.partialRight=bw,Me.partition=EM,Me.pick=GA,Me.pickBy=Mw,Me.property=Bw,Me.propertyOf=W6,Me.pull=Sk,Me.pullAll=lw,Me.pullAllBy=Ek,Me.pullAllWith=Pk,Me.pullAt=kk,Me.range=G6,Me.rangeRight=q6,Me.rearg=$M,Me.reject=MM,Me.remove=Mk,Me.rest=VM,Me.reverse=ky,Me.sampleSize=TM,Me.set=YA,Me.setWith=ZA,Me.shuffle=OM,Me.slice=Ak,Me.sortBy=NM,Me.sortedUniq=Rk,Me.sortedUniqBy=Fk,Me.split=y6,Me.spread=HM,Me.tail=jk,Me.take=zk,Me.takeRight=Uk,Me.takeRightWhile=$k,Me.takeWhile=Vk,Me.tap=iM,Me.throttle=WM,Me.thru=km,Me.toArray=Cw,Me.toPairs=Aw,Me.toPairsIn=Tw,Me.toPath=J6,Me.toPlainObject=Ew,Me.transform=KA,Me.unary=GM,Me.union=Hk,Me.unionBy=Wk,Me.unionWith=Gk,Me.uniq=qk,Me.uniqBy=Yk,Me.uniqWith=Zk,Me.unset=XA,Me.unzip=My,Me.unzipWith=uw,Me.update=JA,Me.updateWith=QA,Me.values=wd,Me.valuesIn=e6,Me.without=Kk,Me.words=Iw,Me.wrap=qM,Me.xor=Xk,Me.xorBy=Jk,Me.xorWith=Qk,Me.zip=eM,Me.zipObject=tM,Me.zipObjectDeep=nM,Me.zipWith=rM,Me.entries=Aw,Me.entriesIn=Tw,Me.extend=Pw,Me.extendWith=Nm,jy(Me,Me),Me.add=eT,Me.attempt=Nw,Me.camelCase=i6,Me.capitalize=Ow,Me.ceil=tT,Me.clamp=t6,Me.clone=ZM,Me.cloneDeep=XM,Me.cloneDeepWith=JM,Me.cloneWith=KM,Me.conformsTo=QM,Me.deburr=Dw,Me.defaultTo=D6,Me.divide=nT,Me.endsWith=s6,Me.eq=Gu,Me.escape=o6,Me.escapeRegExp=a6,Me.every=pM,Me.find=mM,Me.findIndex=iw,Me.findKey=MA,Me.findLast=vM,Me.findLastIndex=sw,Me.findLastKey=AA,Me.floor=rT,Me.forEach=hw,Me.forEachRight=fw,Me.forIn=TA,Me.forInRight=OA,Me.forOwn=DA,Me.forOwnRight=IA,Me.get=Iy,Me.gt=eA,Me.gte=tA,Me.has=RA,Me.hasIn=Ny,Me.head=aw,Me.identity=Sl,Me.includes=xM,Me.indexOf=vk,Me.inRange=n6,Me.invoke=zA,Me.isArguments=Lf,Me.isArray=Nr,Me.isArrayBuffer=nA,Me.isArrayLike=Ll,Me.isArrayLikeObject=so,Me.isBoolean=rA,Me.isBuffer=Th,Me.isDate=iA,Me.isElement=sA,Me.isEmpty=oA,Me.isEqual=aA,Me.isEqualWith=lA,Me.isError=Oy,Me.isFinite=uA,Me.isFunction=eh,Me.isInteger=_w,Me.isLength=Dm,Me.isMap=ww,Me.isMatch=cA,Me.isMatchWith=hA,Me.isNaN=fA,Me.isNative=dA,Me.isNil=gA,Me.isNull=pA,Me.isNumber=xw,Me.isObject=Ds,Me.isObjectLike=Vs,Me.isPlainObject=Cp,Me.isRegExp=Dy,Me.isSafeInteger=mA,Me.isSet=Lw,Me.isString=Im,Me.isSymbol=Jl,Me.isTypedArray=_d,Me.isUndefined=vA,Me.isWeakMap=yA,Me.isWeakSet=bA,Me.join=xk,Me.kebabCase=l6,Me.last=xu,Me.lastIndexOf=Lk,Me.lowerCase=u6,Me.lowerFirst=c6,Me.lt=_A,Me.lte=wA,Me.max=iT,Me.maxBy=sT,Me.mean=oT,Me.meanBy=aT,Me.min=lT,Me.minBy=uT,Me.stubArray=Uy,Me.stubFalse=$y,Me.stubObject=Y6,Me.stubString=Z6,Me.stubTrue=K6,Me.multiply=cT,Me.nth=Ck,Me.noConflict=z6,Me.noop=zy,Me.now=Am,Me.pad=h6,Me.padEnd=f6,Me.padStart=d6,Me.parseInt=p6,Me.random=r6,Me.reduce=PM,Me.reduceRight=kM,Me.repeat=g6,Me.replace=m6,Me.result=qA,Me.round=hT,Me.runInContext=bt,Me.sample=AM,Me.size=DM,Me.snakeCase=v6,Me.some=IM,Me.sortedIndex=Tk,Me.sortedIndexBy=Ok,Me.sortedIndexOf=Dk,Me.sortedLastIndex=Ik,Me.sortedLastIndexBy=Nk,Me.sortedLastIndexOf=Bk,Me.startCase=b6,Me.startsWith=_6,Me.subtract=fT,Me.sum=dT,Me.sumBy=pT,Me.template=w6,Me.times=X6,Me.toFinite=th,Me.toInteger=Hr,Me.toLength=Sw,Me.toLower=x6,Me.toNumber=Lu,Me.toSafeInteger=xA,Me.toString=ki,Me.toUpper=L6,Me.trim=C6,Me.trimEnd=S6,Me.trimStart=E6,Me.truncate=P6,Me.unescape=k6,Me.uniqueId=Q6,Me.upperCase=M6,Me.upperFirst=By,Me.each=hw,Me.eachRight=fw,Me.first=aw,jy(Me,function(){var d={};return qt(Me,function(b,A){Dr.call(Me.prototype,A)||(d[A]=b)}),d}(),{chain:!1}),Me.VERSION=r,cs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Me[d].placeholder=Me}),cs(["drop","take"],function(d,b){Pr.prototype[d]=function(A){A=A===n?1:ne(Hr(A),0);var q=this.__filtered__&&!b?new Pr(this):this.clone();return q.__filtered__?q.__takeCount__=xe(A,q.__takeCount__):q.__views__.push({size:xe(A,Ue),type:d+(q.__dir__<0?"Right":"")}),q},Pr.prototype[d+"Right"]=function(A){return this.reverse()[d](A).reverse()}}),cs(["filter","map","takeWhile"],function(d,b){var A=b+1,q=A==ae||A==B;Pr.prototype[d]=function(ve){var Be=this.clone();return Be.__iteratees__.push({iteratee:pr(ve,3),type:A}),Be.__filtered__=Be.__filtered__||q,Be}}),cs(["head","last"],function(d,b){var A="take"+(b?"Right":"");Pr.prototype[d]=function(){return this[A](1).value()[0]}}),cs(["initial","tail"],function(d,b){var A="drop"+(b?"":"Right");Pr.prototype[d]=function(){return this.__filtered__?new Pr(this):this[A](1)}}),Pr.prototype.compact=function(){return this.filter(Sl)},Pr.prototype.find=function(d){return this.filter(d).head()},Pr.prototype.findLast=function(d){return this.reverse().find(d)},Pr.prototype.invokeMap=Vr(function(d,b){return typeof d=="function"?new Pr(this):this.map(function(A){return Ie(A,d,b)})}),Pr.prototype.reject=function(d){return this.filter(Om(pr(d)))},Pr.prototype.slice=function(d,b){d=Hr(d);var A=this;return A.__filtered__&&(d>0||b<0)?new Pr(A):(d<0?A=A.takeRight(-d):d&&(A=A.drop(d)),b!==n&&(b=Hr(b),A=b<0?A.dropRight(-b):A.take(b-d)),A)},Pr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Pr.prototype.toArray=function(){return this.take(Ue)},qt(Pr.prototype,function(d,b){var A=/^(?:filter|find|map|reject)|While$/.test(b),q=/^(?:head|last)$/.test(b),ve=Me[q?"take"+(b=="last"?"Right":""):b],Be=q||/^find/.test(b);ve&&(Me.prototype[b]=function(){var Xe=this.__wrapped__,ft=q?[1]:arguments,Et=Xe instanceof Pr,nn=ft[0],rn=Et||Nr(Xe),hn=function(si){var ci=ve.apply(Me,vo([si],ft));return q&&Bn?ci[0]:ci};rn&&A&&typeof nn=="function"&&nn.length!=1&&(Et=rn=!1);var Bn=this.__chain__,Qn=!!this.__actions__.length,vr=Be&&!Bn,Yr=Et&&!Qn;if(!Be&&rn){Xe=Yr?Xe:new Pr(this);var yr=d.apply(Xe,ft);return yr.__actions__.push({func:km,args:[hn],thisArg:n}),new ms(yr,Bn)}return vr&&Yr?d.apply(this,ft):(yr=this.thru(hn),vr?q?yr.value()[0]:yr.value():yr)})}),cs(["pop","push","shift","sort","splice","unshift"],function(d){var b=na[d],A=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",q=/^(?:pop|shift)$/.test(d);Me.prototype[d]=function(){var ve=arguments;if(q&&!this.__chain__){var Be=this.value();return b.apply(Nr(Be)?Be:[],ve)}return this[A](function(Xe){return b.apply(Nr(Xe)?Xe:[],ve)})}}),qt(Pr.prototype,function(d,b){var A=Me[b];if(A){var q=A.name+"";Dr.call(no,q)||(no[q]=[]),no[q].push({name:b,func:A})}}),no[wm(n,O).name]=[{name:"wrapper",func:n}],Pr.prototype.clone=Sh,Pr.prototype.reverse=od,Pr.prototype.value=Eh,Me.prototype.at=sM,Me.prototype.chain=oM,Me.prototype.commit=aM,Me.prototype.next=lM,Me.prototype.plant=cM,Me.prototype.reverse=hM,Me.prototype.toJSON=Me.prototype.valueOf=Me.prototype.value=fM,Me.prototype.first=Me.prototype.head,sr&&(Me.prototype[sr]=uM),Me},Ms=_o();ji?((ji.exports=Ms)._=Ms,Jn._=Ms):Fi._=Ms}).call(Zo)})(dv,dv.exports);var C$=dv.exports;const S$={class:"h-full flex"},E$={class:"flex-1 relative"},P$={key:0,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},k$={class:"text-center max-w-lg mx-auto p-8"},M$={class:"space-y-4"},A$={class:"map-parent"},T$={class:"map-content flex flex-col h-full"},O$={class:"flex-1 flex flex-col md:flex-row relative"},D$={class:"flex-1 relative"},I$={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},N$={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},B$={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},R$={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},F$={key:0,class:"space-y-4"},j$={key:0,class:"space-y-2"},z$={class:"grid grid-cols-1 gap-2"},U$=["onClick"],$$={class:"font-medium text-gray-900"},V$={key:1,class:"space-y-2"},H$={class:"flex items-center mb-4"},W$={class:"text-sm text-gray-600"},G$={class:"grid grid-cols-1 gap-2"},q$=["onClick"],Y$={class:"font-medium text-gray-900"},Z$={key:2,class:"space-y-2"},K$={class:"flex items-center mb-4"},X$={class:"text-sm text-gray-600"},J$={class:"grid grid-cols-1 gap-2"},Q$={key:0,class:"text-center py-4"},eV=["onClick"],tV={class:"font-medium text-gray-900"},nV={key:3,class:"space-y-2"},rV={class:"flex items-center mb-4"},iV={class:"text-sm text-gray-600"},sV={class:"grid grid-cols-1 gap-2"},oV=["onClick"],aV={class:"font-medium text-gray-900"},lV={class:"text-sm text-gray-500"},uV={class:"text-xs text-gray-400 mt-1"},cV=["onClick"],hV={key:1,class:"space-y-4"},fV={key:0,class:"space-y-2"},dV={class:"grid grid-cols-1 gap-2"},pV={key:0,class:"text-center py-8"},gV=["onClick"],mV={class:"font-medium text-gray-900"},vV={key:1,class:"space-y-2"},yV={class:"flex items-center mb-4"},bV={class:"text-sm text-gray-600"},_V={class:"grid grid-cols-1 gap-2"},wV=["onClick"],xV={class:"font-medium text-gray-900"},LV={class:"text-sm text-gray-500"},CV={class:"text-xs text-gray-400 mt-1"},SV=["onClick"],EV={key:2,class:"space-y-4"},PV={key:0,class:"space-y-2"},kV={class:"grid grid-cols-1 gap-2"},MV=["onClick"],AV={class:"font-medium text-gray-900"},TV={key:1,class:"space-y-2"},OV={class:"flex items-center mb-4"},DV={class:"text-sm text-gray-600"},IV={class:"grid grid-cols-1 gap-2"},NV={key:0,class:"text-center py-4"},BV=["onClick"],RV={class:"font-medium text-gray-900"},FV={key:2,class:"space-y-2"},jV={class:"flex items-center mb-4"},zV={class:"text-sm text-gray-600"},UV={class:"grid grid-cols-1 gap-2"},$V=["onClick"],VV={class:"font-medium text-gray-900"},HV={class:"text-sm text-gray-500"},WV={class:"text-xs text-gray-400 mt-1"},GV=["onClick"],qV={key:3,class:"space-y-4"},YV={key:0,class:"text-center py-8"},ZV={key:1,class:"space-y-2"},KV=["onClick"],XV={class:"font-medium text-gray-900"},JV={class:"text-sm text-gray-500"},QV={class:"text-xs text-gray-400 mt-1"},eH=["onClick"],tH={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},nH={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},rH={class:"text-center mb-4"},iH={class:"mt-2 text-gray-600"},V4=ws({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=RN(),r=kt(null),i=kt(!1),s=Yb(),o=Wg(),a=yh(),l=ul(),c=kt([]),f=kt({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:y,map:m,initMap:C,setDrawingTool:S,updateShapeStyle:T,updateShapeProperties:O,featureGroup:D,adjustView:N,clearActiveControlPoints:U,isDrawing:W}=Qz(),{initMap:ee,changeBaseMap:te}=rU(),V=kt(!1),Y=kt(!1),de=kt(!1),$=kt(!1),H=kt(null),le=kt(null),ae=kt(null),z=kt(!1),B=kt(null),X=po(),K=kt([]),ye=kt([]),Te=kt([]),Ue=kt(null),J=kt(null),ie=kt(null),se=kt(!1),pe=kt(!1),we=kt(!1),be=kt(null),Ae=ir(()=>X.isSalarie||Ue.value?ye.value:[]),Ee=ir(()=>{if(!y.value)return null;const mt=y.value.properties||{};let Ke="unknown";mt.type?Ke=mt.type:y.value instanceof Ol||y.value instanceof pn.Polygon?Ke="Polygon":(y.value instanceof ys||y.value instanceof pn.Polyline&&!(y.value instanceof pn.Polygon))&&(Ke="Line"),mt.type||(y.value.properties||(y.value.properties={}),y.value.properties.type=Ke);let $t;if(mt.style&&mt.style.name)$t=mt.style.name;else if(mt.name)$t=mt.name;else if(y.value.name)$t=y.value.name;else{const Gt=Object.getOwnPropertyDescriptor(y.value,"name");Gt&&Gt.value&&($t=Gt.value);const on=["_name","displayName","title"];for(const dt of on)if(y.value[dt]){$t=y.value[dt];break}}$t&&(y.value.properties||(y.value.properties={}),y.value.properties.name=$t,y.value.properties.style||(y.value.properties.style={}),y.value.properties.style.name=$t,y.value.name=$t,typeof y.value.setName=="function"&&y.value.setName($t)),y.value.properties.category||(y.value.properties.category="forages"),y.value.properties.accessLevel||(y.value.properties.accessLevel="visitor");const On={...mt,type:Ke,name:$t||y.value.name||mt.name||void 0,category:y.value.properties.category||"forages",accessLevel:y.value.properties.accessLevel||"visitor"};return{type:Ke,properties:On,layer:y.value,options:y.value.options||{}}});function Je(mt){const Ke=mt.getCenter(),$t=mt.getZoom(),On={lat:Ke.lat,lng:Ke.lng,zoom:$t};document.cookie=`mapState=${JSON.stringify(On)};max-age=2592000;path=/`}function gt(){const Ke=document.cookie.split(";").find($t=>$t.trim().startsWith("mapState="));if(Ke)try{return JSON.parse(Ke.split("=")[1])}catch($t){return console.error("Erreur lors de la lecture du cookie de position:",$t),null}return null}Ks(async()=>{var mt,Ke;window.addEventListener("resize",ls);try{if(await s.fetchPlans(),(X.isAdmin||X.isEntreprise)&&await Ut(),X.isEntreprise){se.value=!0;try{const fn=await Cn.get("/users/",{params:{role:"SALARIE",entreprise:(mt=X.user)==null?void 0:mt.id}});K.value=fn.data}catch(fn){console.error("Error loading salaries:",fn),K.value=[]}finally{se.value=!1}}if(X.isSalarie){pe.value=!0;try{const fn=await X.fetchSalarieVisiteurs(((Ke=X.user)==null?void 0:Ke.id)||0);ye.value=Array.isArray(fn)?fn:[fn]}catch(fn){console.error("Error loading clients:",fn)}finally{pe.value=!1}}const $t=gt(),On=$t?[$t.lat,$t.lng]:[46.603354,1.888334],Dn=($t==null?void 0:$t.zoom)??6;if(r.value&&!m.value){const fn=C(r.value,On,Dn);fn.pm.setLang("fr"),fn.pm.addControls({rotateMode:!1}),ee(fn),fn.on("moveend",()=>{Je(fn)}),window.addEventListener("map-set-location",wn=>{if(fn&&wn.detail){const{lat:Tn,lng:er,zoom:tr}=wn.detail;fn.flyTo([Tn,er],tr,{duration:1.5,easeLinearity:.25})}}),D.value&&(D.value.on("layeradd",wn=>{const Tn=wn.layer;Tn&&Tn._leaflet_id&&c.value.findIndex(tr=>tr.layer&&tr.layer._leaflet_id===Tn._leaflet_id)===-1&&c.value.push({layer:Tn,id:Tn._dbId||Tn._leaflet_id})}),D.value.on("layerremove",wn=>{const Tn=wn.layer;if(Tn&&Tn._leaflet_id&&!Tn._dbId&&(!Tn.properties||Tn.properties&&!Tn.properties.type)){const tr=c.value.findIndex(Ur=>Ur.layer&&Ur.layer._leaflet_id===Tn._leaflet_id);tr!==-1&&c.value.splice(tr,1)}}))}if(f.value.planId)try{await Pe(f.value.planId);const fn=document.querySelector(".map-parent");fn instanceof HTMLElement&&(fn.style.display="block"),f.value.lat&&f.value.lng&&m.value&&m.value.flyTo([f.value.lat,f.value.lng],30),f.value.noteId&&D.value&&setTimeout(()=>{var Tn;const wn=((Tn=D.value)==null?void 0:Tn.getLayers())||[];for(const er of wn)if(er._dbId===f.value.noteId||er.id===f.value.noteId){if(typeof er.fire=="function"&&er.fire("click"),typeof er.bringToFront=="function"&&er.bringToFront(),m.value){const tr=typeof er.getLatLng=="function"?er.getLatLng():[f.value.lat,f.value.lng];m.value.flyTo(tr,18)}break}},1e3),f.value.tool&&S(f.value.tool)}catch(fn){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",fn),await Gt()}else await Gt();async function Gt(){const fn=localStorage.getItem("lastPlanId");if(fn)try{await Pe(parseInt(fn));const wn=document.querySelector(".map-parent");wn instanceof HTMLElement&&(wn.style.display="block")}catch(wn){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",wn),H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ce(),localStorage.removeItem("lastPlanId")}else H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ce()}window.addEventListener("shape:created",fn=>{const{shape:wn,type:Tn,properties:er}=fn.detail;o.addElement(wn),S("")}),window.addEventListener("geonote:savePlan",()=>{Ve()}),window.addEventListener("geonote:select",fn=>{if(fn.detail&&fn.detail.geoNote){const wn=fn.detail.geoNote;y.value=wn,ll(()=>{})}}),window.addEventListener("categoriesReactivated",fn=>{rr()}),window.addEventListener("shapeTypesReactivated",fn=>{rr()});const on=fn=>{if(!fn||!fn.note){console.error("[MapView] Erreur: e.note est undefined ou null",fn);return}const wn=fn.note;le.value={id:wn.id,title:wn.title||wn.name,description:wn.description,location:wn.location,columnId:wn.columnId||a.getDefaultColumn.id,accessLevel:wn.accessLevel,style:wn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:wn.createdAt||new Date().toISOString(),updatedAt:wn.updatedAt||new Date().toISOString(),comments:wn.comments||[],photos:wn.photos||[]},de.value=!0},dt=fn=>{if(!fn.detail||!fn.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",fn);return}const wn=fn.detail.note;let er=fn.detail.backendId||wn.backendId;if(!er){const tr=c.value.find(Ur=>Ur.layer===fn.detail.source);er=tr?tr.id:wn.id}le.value={id:er,leafletId:wn.id,title:wn.title||wn.name,description:wn.description,location:wn.location,columnId:wn.columnId||a.getDefaultColumn.id,accessLevel:wn.accessLevel,style:wn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:wn.createdAt||new Date().toISOString(),updatedAt:wn.updatedAt||new Date().toISOString(),comments:wn.comments||[],photos:wn.photos||[]},de.value=!0};window.addEventListener("geonote:edit",dt),D.value&&(D.value.off("note:edit"),D.value.on("note:edit",on))}catch($t){console.error("Error during component mount:",$t),H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ce(),localStorage.removeItem("lastPlanId")}}),vi(()=>o.hasUnsavedChanges,mt=>{mt&&H.value&&(s.markUnsavedChanges(),Ve())});let _t;Ks(()=>{_t=setInterval(()=>{o.hasUnsavedChanges&&H.value&&Ve()},6e4)}),ku(()=>{clearInterval(_t)}),vi(()=>s.plans,mt=>{Y.value&&ie.value},{deep:!0}),vi(()=>o.filters,(mt,Ke)=>{if(Ke){const $t=JSON.stringify(Ke.accessLevels)!==JSON.stringify(mt.accessLevels),On=JSON.stringify(Ke.categories)!==JSON.stringify(mt.categories),Dn=JSON.stringify(Ke.shapeTypes)!==JSON.stringify(mt.shapeTypes);($t||On||Dn)&&rr()}else rr()},{deep:!0});const ue=mt=>{rr()};Ks(()=>{window.addEventListener("filtersChanged",ue)}),ku(()=>{window.removeEventListener("filtersChanged",ue)}),vi(()=>o.getFilteredElements,(mt,Ke)=>{rr()},{deep:!0}),vi(m,async mt=>{var Ke;mt&&s.currentPlan&&!((Ke=D.value)!=null&&Ke.getLayers().length)&&(ce(),await o.loadPlanElements(s.currentPlan.id))}),vi(()=>s.currentPlan,async(mt,Ke)=>{if((mt==null?void 0:mt.id)!==(Ke==null?void 0:Ke.id))try{if(mt){H.value=mt;const $t=document.querySelector(".map-parent");$t instanceof HTMLElement&&($t.style.display="block")}else{H.value=null,ce();const $t=document.querySelector(".map-parent");$t instanceof HTMLElement&&($t.style.display="none")}}catch($t){console.error("[MapView][watch currentPlan] ERREUR:",$t),H.value=null,ce()}},{immediate:!0}),ff(()=>{m.value&&m.value.off("moveend"),window.removeEventListener("resize",ls),window.removeEventListener("shape:created",()=>{})});function oe(){i.value=!i.value}function ce(){D.value&&(D.value.eachLayer(mt=>{var Ke;((Ke=mt.properties)==null?void 0:Ke.type)==="Note"&&typeof mt.resetPlanSaveState=="function"&&mt.resetPlanSaveState()}),D.value.clearLayers()),c.value=[],U(),y.value=null,p.value=""}async function Q(mt){try{ce(),await o.loadPlanElements(mt);const Ke=s.getPlanById(mt);if(Ke){H.value=Ke,s.setCurrentPlan(Ke),o.setCurrentPlan(Ke.id),localStorage.setItem("lastPlanId",Ke.id.toString());try{const On=(await Yo.getNotesByPlan(mt)).data,Dn=yh();m.value&&D.value&&On.forEach(Gt=>{try{if(Dn.addNote({...Gt,id:Gt.id,columnId:Gt.column,accessLevel:Gt.access_level}),Gt.location&&Gt.location.type==="Point"&&Array.isArray(Gt.location.coordinates)&&Gt.location.coordinates.length===2){const on=il.fromBackendData({name:Gt.title,description:Gt.description,location:Gt.location,columnId:Gt.column,accessLevel:Gt.access_level,style:Gt.style||{color:Gt.color||"#3B82F6",weight:2,opacity:1,fillColor:Gt.color||"#3B82F6",fillOpacity:.6,radius:8},category:Gt.category||"forages",comments:Gt.comments||[],photos:Gt.photos||[]});on._dbId=Gt.id,D.value.addLayer(on),c.value.push({id:Gt.id,type:"Note",layer:on,properties:on.properties})}}catch(on){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note géolocalisée:",on)}})}catch($t){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes géolocalisées:",$t)}if(m.value&&D.value){const $t=o.getCurrentElements.reduce((on,dt)=>(on[dt.type_forme]||(on[dt.type_forme]=[]),on[dt.type_forme].push(dt),on),{}),On=["Note","Polygon","Line"],Dn=Object.keys($t).sort((on,dt)=>{const fn=On.indexOf(on),wn=On.indexOf(dt);return(fn===-1?999:fn)-(wn===-1?999:wn)}),Gt=on=>{switch(on){case"Note":return 20;case"Line":return 10;case"Polygon":return 5;default:return 10}};for(const on of Dn){const dt=$t[on],fn=Gt(on);for(let wn=0;wn<dt.length;wn+=fn){const Tn=dt.slice(wn,wn+fn);await Promise.all(Tn.map(async er=>{var Ur;if(!D.value||!er.data)return;let tr=null;switch(er.type_forme){case"Polygon":{const Xn=er.data;if(Xn.points&&Xn.points.length>0){const Ai=Xn.points.map(Wr=>pn.latLng(Wr[1],Wr[0]));tr=new Ol(Ai,Xn.style),Xn.name&&(tr.properties={name:Xn.name},tr.name=Xn.name)}break}case"Line":{const Xn=er.data;if(Xn.points&&Xn.points.length>0){const Ai=Xn.points.map(Wr=>pn.latLng(Wr[1],Wr[0]));tr=new ys(Ai,Xn.style),Xn.name&&(tr.properties={name:Xn.name},tr.name=Xn.name)}break}case"Note":{const Xn=er.data;if(Xn.location&&Array.isArray(Xn.location)&&Xn.location.length===2||Xn.location&&typeof Xn.location=="object"&&Xn.location.type==="Point"&&Array.isArray(Xn.location.coordinates)&&Xn.location.coordinates.length===2)try{Xn.category||(Xn.category="forages"),Xn.accessLevel||(Xn.accessLevel="private");const Wr=il.fromBackendData(Xn);Wr._dbId=er.id,tr=Wr}catch(Wr){console.error("[MapView][refreshMapWithPlan] Erreur lors de la création de la Note:",Wr)}else console.error("[MapView][refreshMapWithPlan] Données invalides pour Note:",Xn);break}}tr&&(tr._dbId=er.id,(Ur=D.value)==null||Ur.addLayer(tr),c.value.push({id:er.id,type:er.type_forme,layer:tr,properties:tr.properties}))})),await new Promise(er=>requestAnimationFrame(()=>setTimeout(er,0)))}}setTimeout(()=>{N(),m.value&&m.value.invalidateSize({animate:!1,pan:!1})},100)}}else console.error(`Plan ${mt} introuvable après chargement`);Y.value=!1}catch(Ke){throw console.error("Erreur lors du rafraîchissement de la carte:",Ke),Ke}}async function Pe(mt){var Ke;try{if(!s.getPlanById(mt))try{await Cn.get(`/plans/${mt}/`)}catch(On){throw((Ke=On.response)==null?void 0:Ke.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - conservation de lastPlanId pour fallback"),H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ce()),On}await Q(mt),Y.value=!1,ln()}catch($t){throw console.error("Erreur lors du chargement du plan:",$t),H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ce(),$t}}async function Ve(){var mt;if(!z.value){if(!H.value||!D.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}z.value=!0,B.value="saving";try{const Ke=[],$t=new Set(o.getCurrentElements.filter(dt=>dt.id!==void 0).map(dt=>dt.id)),On=new Set;D.value.eachLayer(dt=>{var er,tr,Ur,Xn,Ai,Wr,Xo;let fn,wn;const Tn={color:dt.options.color||"#2b6451",weight:dt.options.weight||3,opacity:dt.options.opacity||1,fillColor:dt.options.fillColor||"#2b6451",fillOpacity:dt.options.fillOpacity||.2,dashArray:dt.options.dashArray||""};if(dt instanceof pn.Polyline&&!(dt instanceof pn.Polygon)){fn="Line";const or=dt.getLatLngs(),lr=((er=dt.properties)==null?void 0:er.category)||"forages",us=((tr=dt.properties)==null?void 0:tr.accessLevel)||"visitor";wn={points:or.map(Do=>[Do.lng,Do.lat]),name:((Ur=dt.properties)==null?void 0:Ur.name)||"",category:lr,accessLevel:us,style:{...Tn,_accessLevel:us,accessLevel:us}}}else if(dt instanceof pn.Polygon){fn="Polygon";const or=dt.getLatLngs()[0],lr=((Xn=dt.properties)==null?void 0:Xn.category)||"forages",us=((Ai=dt.properties)==null?void 0:Ai.accessLevel)||"visitor";wn={points:or.map(Do=>[Do.lng,Do.lat]),name:((Wr=dt.properties)==null?void 0:Wr.name)||"",category:lr,accessLevel:us,style:{...Tn,_accessLevel:us,accessLevel:us}}}else if(((Xo=dt.properties)==null?void 0:Xo.type)==="Note"){const or=dt;if(or._dbId&&typeof or._dbId=="number"&&On.add(or._dbId),typeof or.saveNote=="function")try{if(or.properties&&(or.properties.style||(or.properties.style={}),or.properties.accessLevel&&(or.properties.style._accessLevel=or.properties.accessLevel,or.properties.style.accessLevel=or.properties.accessLevel),or.properties.style.color)){const lr=or.properties.style.color;or.properties.style.color=lr,or.properties.style.fillColor=lr}H.value&&H.value.id?or.saveNote(H.value.id):or.saveNote()}catch(lr){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",lr)}else console.warn("[savePlan] La note ne possède pas de méthode saveNote");fn=void 0,wn=void 0}if(fn&&wn){let or=dt._elementId;dt._dbId&&(or=dt._dbId,typeof or=="number"&&On.add(or)),Ke.push({id:or,type_forme:fn,data:wn})}});const Dn=Array.from($t).filter(dt=>!On.has(dt)),Gt=Ke.filter(dt=>!dt.id||!Dn.includes(dt.id));o.elements=Gt;const on=await o.saveToPlan(H.value.id,{elementsToDelete:Dn});if(on&&((mt=H.value)!=null&&mt.id)){const dt=H.value.id;H.value={...H.value,...on},s.updatePlanDetails(dt,on)}B.value="success",D.value&&D.value.eachLayer(dt=>{var fn;((fn=dt.properties)==null?void 0:fn.type)==="Note"&&typeof dt.resetPlanSaveState=="function"&&dt.resetPlanSaveState()}),setTimeout(()=>{B.value=null},3e3)}catch(Ke){console.error("Erreur lors de la sauvegarde du plan:",Ke),B.value=null}finally{z.value=!1}}}ku(()=>{X.user||Bt(),s.clearCurrentPlan(),o.clearCurrentPlan(),D.value&&D.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function Qe(mt){var Ke;if(O(mt),y.value&&((Ke=y.value.properties)==null?void 0:Ke.type)==="Note")if(typeof y.value.saveNote=="function")try{if(mt.category&&(y.value.properties.category=mt.category),mt.accessLevel&&(y.value.properties.accessLevel=mt.accessLevel,y.value.properties.style||(y.value.properties.style={}),y.value.properties.style._accessLevel=mt.accessLevel,y.value.properties.style.accessLevel=mt.accessLevel),y.value.properties.style&&y.value.properties.style.color){const $t=y.value.properties.style.color;y.value.properties.style.color=$t,y.value.properties.style.fillColor=$t}H.value&&H.value.id?y.value.saveNote(H.value.id):y.value.saveNote(),y.value.bindPopup&&y.value.createPopupContent&&y.value.bindPopup(y.value.createPopupContent())}catch($t){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",$t)}else console.warn("[MapView][updateShapeProperties] La note ne possède pas de méthode saveNote");else if(mt.category&&y.value&&y.value._dbId){const $t=y.value._dbId,On=o.elements.find(Dn=>Dn.id===$t);if(On){const Dn=On;Dn.data||(Dn.data={}),Dn.data.category=mt.category,o.$patch({unsavedChanges:!0})}}}function ot(mt){try{const Ke=new Date(mt);return isNaN(Ke.getTime())?(console.error("Date invalide reçue:",mt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Ke)}catch(Ke){return console.error("Erreur lors du formatage de la date:",Ke),"Date invalide"}}const at=()=>{D.value&&N()},pt=async()=>{var mt;if(y.value&&D.value){const Ke=y.value._leaflet_id,$t=y.value._dbId;if(((mt=y.value.properties)==null?void 0:mt.type)==="Note"&&$t)try{await Yo.deleteNote($t),a.removeNote($t),l.success("Note supprimée avec succès")}catch(Dn){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${$t} du backend:`,Dn),l.error("Erreur lors de la suppression de la note")}S(""),D.value.removeLayer(y.value),c.value=c.value.filter(Dn=>Dn.layer&&Dn.layer._leaflet_id!==Ke),y.value=null}};async function Ft(mt){await s.fetchPlans();const Ke=s.getPlanById(mt);Ke?(localStorage.setItem("lastPlanId",mt.toString()),H.value=Ke,s.setCurrentPlan(Ke),o.setCurrentPlan(Ke.id),V.value=!1,ln()):console.error(`Plan ${mt} introuvable après création! Vérifiez les permissions.`)}vi(Ue,async mt=>{var Ke;if(mt&&((Ke=X.user)==null?void 0:Ke.user_type)==="admin"){pe.value=!0;try{const $t=await X.fetchSalarieVisiteurs(mt.id);ye.value=Array.isArray($t)?$t:[$t]}catch($t){console.error("[MapView][watch selectedSalarie] Error:",$t),ye.value=[]}finally{pe.value=!1}}});function Bt(){localStorage.removeItem("lastPlanId")}const Zt=C$.debounce(()=>{m.value&&ll(()=>{var mt;try{if(m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())){if(m.value.invalidateSize({animate:!1}),(mt=D.value)!=null&&mt.getLayers().length)try{N()}catch(Ke){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Ke)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Ke){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Ke)}})},250);function ln(){Zt()}vi(H,(mt,Ke)=>{mt&&mt.id!==(Ke==null?void 0:Ke.id)&&ll(()=>{ln()})});const un=kt(null),Sn=kt(!1),qe=kt([]),it=ir(()=>un.value?K.value.filter(Ke=>{var Dn;const $t=Ke.entreprise;return(typeof $t=="object"&&$t!==null?$t.id:$t)===((Dn=un.value)==null?void 0:Dn.id)}):[]);function Ze(mt){if(!mt)return"";const Ke=mt.first_name||"",$t=mt.last_name?mt.last_name.toUpperCase():"",On=mt.company_name||mt.role||"";return`${Ke} ${$t} (${On})`}async function Ut(){Sn.value=!0;try{const mt=await Cn.get("/users/",{params:{role:"ENTREPRISE"}});qe.value=mt.data}catch(mt){console.error("[MapView] Error loading entreprises:",mt),qe.value=[]}finally{Sn.value=!1}}async function Yt(mt){un.value=mt,se.value=!0;try{const Ke=await Cn.get("/users/",{params:{role:"SALARIE",entreprise:mt.id}});K.value=Ke.data}catch(Ke){console.error("[MapView] Error loading salaries for entreprise:",Ke),K.value=[]}finally{se.value=!1}}function Ln(){un.value=null,Ue.value=null,ie.value=null,K.value=[],ye.value=[],Te.value=[]}function gn(){Ue.value=null,ie.value=null,ye.value=[],Te.value=[]}function vn(){ie.value=null,Te.value=[]}async function jn(mt){var Ke;Ue.value=mt,pe.value=!0;try{const $t={role:"VISITEUR",salarie:mt.id};X.isEntreprise?$t.entreprise=(Ke=X.user)==null?void 0:Ke.id:un.value&&($t.entreprise=un.value.id);const On=await Cn.get("/users/",{params:$t});Array.isArray(On.data)?(ye.value=On.data,On.data.forEach((Dn,Gt)=>{})):(console.warn("Format de réponse inattendu:",On.data),ye.value=[]),ye.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch($t){if(console.error("ERREUR lors du chargement des visiteurs:",$t),$t&&typeof $t=="object"&&"response"in $t){const On=$t;console.error("Détails de l'erreur:",{status:On.response.status,data:On.response.data})}ye.value=[]}finally{pe.value=!1}}function mn(){de.value=!1,le.value=null}function Jt(mt){ae.value=mt,$.value=!0}async function cn(){var mt,Ke,$t;if((mt=ae.value)!=null&&mt.id)try{const On=ae.value.id,Dn={selectedClient:ie.value,selectedSalarie:Ue.value,isNoVisiteurView:ie.value&&ie.value.id===-1};if(await s.deletePlan(On),$.value=!1,ae.value=null,await new Promise(Gt=>setTimeout(Gt,50)),Dn.isNoVisiteurView)await Ri();else if(Dn.selectedClient){const Gt={visiteur:Dn.selectedClient.id};Dn.selectedSalarie&&(Gt.salarie=Dn.selectedSalarie.id),X.isEntreprise?Gt.entreprise=(Ke=X.user)==null?void 0:Ke.id:un.value&&(Gt.entreprise=un.value.id);const on=await Cn.get("/plans/",{params:Gt});Te.value=on.data}else await s.fetchPlans();(($t=H.value)==null?void 0:$t.id)===On&&(H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ce(),localStorage.removeItem("lastPlanId"))}catch(On){console.error("Erreur lors de la suppression du plan:",On),alert("Une erreur est survenue lors de la suppression du plan"),$.value=!1,ae.value=null}}function qn(){$.value=!1,ae.value=null}function Kn(mt){o.updateFilters(mt),rr(),setTimeout(()=>{rr()},100)}function rr(){if(!D.value)return;const mt=[];c.value.forEach((on,dt)=>{on.layer&&!on.id&&(!on.layer.properties||on.layer.properties&&!on.layer.properties.type)&&mt.push(dt)});for(let on=mt.length-1;on>=0;on--)c.value.splice(mt[on],1);({...o.filters.accessLevels},{...o.filters.categories}),{...o.filters.shapeTypes},o.elements.length,o.elements.map(on=>({id:on.id,type_forme:on.type_forme}));const Ke=o.getFilteredElements,$t=D.value.getLayers();$t.map(on=>({_leaflet_id:on._leaflet_id,_dbId:on._dbId,hasProperties:!!on.properties,propertyType:on.properties?on.properties.type:null,category:on.properties?on.properties.category:null}));const On=new Map;c.value.forEach(on=>{on.layer&&on.id&&On.set(on.id,on.layer)});const Dn=new Map;$t.forEach(on=>{on._dbId&&Dn.set(on,on._dbId)});const Gt=new Set(Ke.map(on=>on.id));Array.from(Gt),$t.forEach(on=>{const dt=on._dbId;if(on._leaflet_id,!dt){if(!on.properties)return;on._dbId=Date.now()+Math.floor(Math.random()*1e3)}const fn=on.properties||{},wn=fn.type||on.type_forme||"";let Tn=fn.category;if(on._dbId){const or=o.elements.find(lr=>lr.id===on._dbId);if(or){const lr=or.data;lr&&lr.category&&(Tn!==lr.category&&(Tn=lr.category),on.properties||(on.properties={}),on.properties.category=Tn)}}Tn||(Tn="default");const er=fn.accessLevel||"visitor";let tr=!1;wn?tr=wn in o.filters.shapeTypes&&o.filters.shapeTypes[wn]===!0:tr=o.filters.shapeTypes.Polygon===!0;let Ur=!1;Tn&&Tn in o.filters.categories?Ur=o.filters.categories[Tn]===!0:Ur=o.filters.categories.forages===!0;let Xn=!1;const Ai={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Wr="visitor";Ai.company?Wr="company":Ai.employee?Wr="employee":Ai.visitor&&(Wr="visitor"),Wr==="company"?Xn=!0:Wr==="employee"?Xn=er==="employee"||er==="visitor":Wr==="visitor"&&(Xn=er==="visitor"),tr&&Ur&&Xn?D.value.hasLayer(on)||(Tn&&Tn!=="default"&&(!on.properties||!on.properties.category)&&(on.properties||(on.properties={}),on.properties.category=Tn),D.value.addLayer(on)):D.value.hasLayer(on)&&D.value.removeLayer(on)}),c.value.forEach(on=>{if(!on.layer)return;const dt=on.layer;if(dt._leaflet_id,dt._dbId,D.value.hasLayer(dt))return;const fn=dt.properties||{},wn=fn.type||dt.type_forme||"";let Tn=null;if(dt._dbId){const or=o.elements.find(lr=>lr.id===dt._dbId);if(or){const lr=or.data;lr&&lr.category&&(Tn=lr.category)}}!Tn&&fn.category&&(Tn=fn.category),Tn||(Tn="default");const er=fn.accessLevel||"visitor";if(dt.properties||(dt.properties={}),Tn&&Tn!=="default"&&(dt.properties.category=Tn,dt._dbId)){const or=o.elements.find(lr=>lr.id===dt._dbId);if(or){const lr=or;lr.data||(lr.data={}),lr.data.category!==Tn&&(lr.data.category=Tn,o.$patch({unsavedChanges:!0}))}}dt.properties.accessLevel||(dt.properties.accessLevel="visitor");let tr=!1;wn?tr=wn in o.filters.shapeTypes&&o.filters.shapeTypes[wn]===!0:tr=o.filters.shapeTypes.Polygon===!0;let Ur=!1;if(Tn)if(Tn in o.filters.categories)Ur=o.filters.categories[Tn]===!0;else if(PS().getUniqueCategories.includes(Tn)){const us={...o.filters.categories};us[Tn]=!0,o.updateFilters({categories:us}),Ur=!0}else Ur=o.filters.categories.forages===!0;else Ur=o.filters.categories.forages===!0;let Xn=!1;const Ai={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Wr="visitor";if(Ai.company?Wr="company":Ai.employee?Wr="employee":Ai.visitor&&(Wr="visitor"),Wr==="company"?Xn=!0:Wr==="employee"?Xn=er==="employee"||er==="visitor":Wr==="visitor"&&(Xn=er==="visitor"),tr&&Ur&&Xn){if(Tn&&Tn!=="default"&&(dt.properties||(dt.properties={}),dt.properties.category=Tn,dt._dbId)){const or=o.elements.find(lr=>lr.id===dt._dbId);if(or){const lr=or;lr.data||(lr.data={}),lr.data.category!==Tn&&(lr.data.category=Tn,o.$patch({unsavedChanges:!0}))}}D.value.addLayer(dt)}})}function zn(mt){if(D.value){const $t=D.value.getLayers().find(On=>On._leaflet_id===mt.id||On._leaflet_id===mt.leafletId);$t&&($t.properties.name=mt.title,$t.properties.description=mt.description,$t.properties.columnId=mt.columnId,$t.properties.accessLevel=mt.accessLevel,$t.properties.comments=mt.comments||[],$t.properties.photos=mt.photos||[],$t.properties.updatedAt=new Date().toISOString(),$t.properties.category||($t.properties.category="forages"),$t.setNoteStyle({color:mt.style.color,fillColor:mt.style.fillColor,weight:mt.style.weight,fillOpacity:mt.style.fillOpacity,radius:mt.style.radius}),$t.closePopup(),$t.unbindPopup(),$t.bindPopup($t.createPopupContent()),window.dispatchEvent(new CustomEvent("geonote:update",{detail:{noteId:mt.id,properties:{name:mt.title,description:mt.description,columnId:mt.columnId,accessLevel:mt.accessLevel,style:mt.style,comments:mt.comments,photos:mt.photos,updatedAt:new Date().toISOString()}}})))}}async function _r(mt){var Ke;ie.value=mt,we.value=!0;try{const $t={visiteur:mt.id};X.isEntreprise?$t.entreprise=(Ke=X.user)==null?void 0:Ke.id:un.value&&($t.entreprise=un.value.id),Ue.value&&($t.salarie=Ue.value.id);const On=await Cn.get("/plans/",{params:$t});Te.value=On.data}catch($t){console.error("[MapView] Error loading client plans:",$t),Te.value=[]}finally{we.value=!1}}async function Ri(){var Ke;const mt={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};ie.value=mt,we.value=!0;try{const $t={visiteur_null:!0};X.isEntreprise?$t.entreprise=(Ke=X.user)==null?void 0:Ke.id:un.value&&($t.entreprise=un.value.id),Ue.value&&($t.salarie=Ue.value.id);const On=await Cn.get("/plans/",{params:$t});Te.value=On.data}catch($t){console.error("[MapView] Error loading plans without visiteur:",$t),Te.value=[]}finally{we.value=!1}}async function Pi(){var mt;if(Ue.value=null,ie.value=null,Te.value=[],X.isEntreprise){se.value=!0;try{const Ke=await Cn.get("/users/",{params:{role:"SALARIE",entreprise:(mt=X.user)==null?void 0:mt.id}});K.value=Ke.data}catch(Ke){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salariés:",Ke),K.value=[]}finally{se.value=!1}}Y.value=!0}const Rs=kt(window.innerWidth<768);function ls(){Rs.value=window.innerWidth<768}return(mt,Ke)=>{var $t,On,Dn,Gt,on;return Ne(),je(bn,null,[P("div",S$,[P("div",E$,[H.value?Kt("",!0):(Ne(),je("div",P$,[P("div",k$,[Ke[10]||(Ke[10]=lu('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+UF+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),P("div",M$,[P("button",{onClick:Ke[0]||(Ke[0]=dt=>V.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ke[8]||(Ke[8]=[P("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),jr(" Créer un nouveau plan ")])),P("button",{onClick:Pi,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ke[9]||(Ke[9]=[P("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),jr(" Charger un plan existant ")]))])])])),Fn(P("div",A$,[P("div",T$,[H.value?(Ne(),Lo(Zj,{key:0,"last-save":($t=H.value)!=null&&$t.date_modification?new Date(H.value.date_modification):void 0,"plan-name":(On=H.value)==null?void 0:On.nom,"plan-description":(Dn=H.value)==null?void 0:Dn.description,"save-status":B.value,onChangeMapType:_n(te),onCreateNewPlan:Ke[1]||(Ke[1]=dt=>V.value=!0),onLoadPlan:Pi,onSavePlan:Ve,onAdjustView:at,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):Kt("",!0),P("div",O$,[i.value&&H.value?(Ne(),je("div",{key:0,onClick:oe,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):Kt("",!0),P("div",D$,[P("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),H.value?(Ne(),je(bn,{key:1},[Rs.value?(Ne(),Lo(Bd,{key:0,to:"body"},[Kr(w4,{show:i.value,"onUpdate:show":Ke[2]||(Ke[2]=dt=>i.value=dt),"selected-tool":_n(p),"selected-shape":Ee.value,"is-drawing":_n(W),onToolSelected:_n(S),onFilterChange:Kn,onDeleteShape:pt,onPropertiesUpdate:Qe,onStyleUpdate:_n(T),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])])):(Ne(),Lo(w4,{key:1,show:i.value,"onUpdate:show":Ke[3]||(Ke[3]=dt=>i.value=dt),"selected-tool":_n(p),"selected-shape":Ee.value,"is-drawing":_n(W),onToolSelected:_n(S),onFilterChange:Kn,onDeleteShape:pt,onPropertiesUpdate:Qe,onStyleUpdate:_n(T),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"]))],64)):Kt("",!0),H.value?(Ne(),je("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:oe},Ke[11]||(Ke[11]=[lu('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils</span></div></div>',1)]))):Kt("",!0)])])],512),[[jb,H.value]]),(Ne(),Lo(Bd,{to:"body"},[Kr(EU,{ref_key:"newPlanModalRef",ref:be,modelValue:V.value,"onUpdate:modelValue":Ke[4]||(Ke[4]=dt=>V.value=dt),onCreated:Ft,onSalarieSelected:Ke[5]||(Ke[5]=dt=>Ue.value=dt),onVisiteurSelected:Ke[6]||(Ke[6]=dt=>J.value=dt)},null,8,["modelValue"])])),(Ne(),Lo(Bd,{to:"body"},[Y.value?(Ne(),je("div",I$,[P("div",N$,[P("div",B$,[Ke[13]||(Ke[13]=P("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),P("button",{onClick:Ke[7]||(Ke[7]=dt=>Y.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Ke[12]||(Ke[12]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",R$,[_n(X).isAdmin?(Ne(),je("div",F$,[un.value?Ue.value?ie.value?(Ne(),je("div",nV,[P("div",rV,[P("button",{onClick:vn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ke[29]||(Ke[29]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),jr(" Retour à la liste des clients ")])),Ke[30]||(Ke[30]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",iV,zt(Ze(ie.value)),1)]),Ke[32]||(Ke[32]=P("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),P("div",sV,[we.value?(Ne(),je(bn,{key:0},ar(3,dt=>P("div",{key:dt,class:"animate-pulse"},Ke[31]||(Ke[31]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),P("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),je(bn,{key:1},ar(Te.value,dt=>(Ne(),je("div",{key:dt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:fn=>Pe(dt.id),class:"w-full text-left"},[P("div",aV,zt(dt.nom),1),P("div",lV,zt(dt.description),1),P("div",uV," Modifié le "+zt(ot(dt.date_modification)),1)],8,oV),_n(X).isAdmin||_n(X).isEntreprise?(Ne(),je("button",{key:0,onClick:Rl(fn=>Jt(dt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,cV)):Kt("",!0)]))),128))])])):(Ne(),je("div",Z$,[P("div",K$,[P("button",{onClick:gn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ke[22]||(Ke[22]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),jr(" Retour à la liste des salaries ")])),Ke[23]||(Ke[23]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",X$,zt(Ze(Ue.value)),1)]),Ke[28]||(Ke[28]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),P("div",J$,[P("button",{onClick:Ri,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Ke[24]||(Ke[24]=[P("div",null,[P("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),P("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),P("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),pe.value?(Ne(),je(bn,{key:0},ar(3,dt=>P("div",{key:dt,class:"animate-pulse"},Ke[25]||(Ke[25]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),je(bn,{key:1},[Ae.value.length===0?(Ne(),je("div",Q$,Ke[26]||(Ke[26]=[P("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),P("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ne(!0),je(bn,{key:1},ar(Ae.value,dt=>(Ne(),je("button",{key:dt.id,onClick:fn=>_r(dt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",tV,zt(Ze(dt)),1)]),Ke[27]||(Ke[27]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,eV))),128))],64))])])):(Ne(),je("div",V$,[P("div",H$,[P("button",{onClick:Ln,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ke[17]||(Ke[17]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),jr(" Retour à la liste des entreprises ")])),Ke[18]||(Ke[18]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",W$,zt(Ze(un.value)),1)]),Ke[21]||(Ke[21]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),P("div",G$,[se.value?(Ne(),je(bn,{key:0},ar(3,dt=>P("div",{key:dt,class:"animate-pulse"},Ke[19]||(Ke[19]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),je(bn,{key:1},ar(it.value,dt=>(Ne(),je("button",{key:dt.id,onClick:fn=>jn(dt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",Y$,zt(Ze(dt)),1)]),Ke[20]||(Ke[20]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,q$))),128))])])):(Ne(),je("div",j$,[Ke[16]||(Ke[16]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),P("div",z$,[Sn.value?(Ne(),je(bn,{key:0},ar(3,dt=>P("div",{key:dt,class:"animate-pulse"},Ke[14]||(Ke[14]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),je(bn,{key:1},ar(qe.value,dt=>(Ne(),je("button",{key:dt.id,onClick:fn=>Yt(dt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",$$,zt(Ze(dt)),1)]),Ke[15]||(Ke[15]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,U$))),128))])]))])):_n(X).isSalarie?(Ne(),je("div",hV,[ie.value?(Ne(),je("div",vV,[P("div",yV,[P("button",{onClick:vn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ke[38]||(Ke[38]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),jr(" Retour à la liste des clients ")])),Ke[39]||(Ke[39]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",bV,zt(Ze(ie.value)),1)]),Ke[41]||(Ke[41]=P("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),P("div",_V,[we.value?(Ne(),je(bn,{key:0},ar(3,dt=>P("div",{key:dt,class:"animate-pulse"},Ke[40]||(Ke[40]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),P("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),je(bn,{key:1},ar(Te.value,dt=>(Ne(),je("div",{key:dt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:fn=>Pe(dt.id),class:"w-full text-left"},[P("div",xV,zt(dt.nom),1),P("div",LV,zt(dt.description),1),P("div",CV," Modifié le "+zt(ot(dt.date_modification)),1)],8,wV),_n(X).isAdmin||_n(X).isEntreprise?(Ne(),je("button",{key:0,onClick:Rl(fn=>Jt(dt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,SV)):Kt("",!0)]))),128))])])):(Ne(),je("div",fV,[Ke[37]||(Ke[37]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),P("div",dV,[P("button",{onClick:Ri,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Ke[33]||(Ke[33]=[P("div",null,[P("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),P("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),P("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),pe.value?(Ne(),je(bn,{key:0},ar(3,dt=>P("div",{key:dt,class:"animate-pulse"},Ke[34]||(Ke[34]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),je(bn,{key:1},[Ae.value.length===0?(Ne(),je("div",pV,Ke[35]||(Ke[35]=[P("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),P("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(Ne(!0),je(bn,{key:1},ar(Ae.value,dt=>(Ne(),je("button",{key:dt.id,onClick:fn=>_r(dt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",mV,zt(Ze(dt)),1)]),Ke[36]||(Ke[36]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,gV))),128))],64))])]))])):_n(X).isEntreprise?(Ne(),je("div",EV,[Ue.value?ie.value?(Ne(),je("div",FV,[P("div",jV,[P("button",{onClick:vn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ke[52]||(Ke[52]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),jr(" Retour à la liste des visiteurs ")])),Ke[53]||(Ke[53]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",zV,zt(Ze(ie.value)),1)]),Ke[55]||(Ke[55]=P("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),P("div",UV,[we.value?(Ne(),je(bn,{key:0},ar(3,dt=>P("div",{key:dt,class:"animate-pulse"},Ke[54]||(Ke[54]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),P("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),je(bn,{key:1},ar(Te.value,dt=>(Ne(),je("div",{key:dt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:fn=>Pe(dt.id),class:"w-full text-left"},[P("div",VV,zt(dt.nom),1),P("div",HV,zt(dt.description),1),P("div",WV," Modifié le "+zt(ot(dt.date_modification)),1)],8,$V),_n(X).isAdmin||_n(X).isEntreprise?(Ne(),je("button",{key:0,onClick:Rl(fn=>Jt(dt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,GV)):Kt("",!0)]))),128))])])):(Ne(),je("div",TV,[P("div",OV,[P("button",{onClick:gn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ke[45]||(Ke[45]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),jr(" Retour à la liste des salariés ")])),Ke[46]||(Ke[46]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",DV,zt(Ze(Ue.value)),1)]),Ke[51]||(Ke[51]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),P("div",IV,[P("button",{onClick:Ri,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Ke[47]||(Ke[47]=[P("div",null,[P("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),P("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),P("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),pe.value?(Ne(),je(bn,{key:0},ar(3,dt=>P("div",{key:dt,class:"animate-pulse"},Ke[48]||(Ke[48]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),je(bn,{key:1},[Ae.value.length===0?(Ne(),je("div",NV,Ke[49]||(Ke[49]=[P("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarié",-1),P("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ne(!0),je(bn,{key:1},ar(Ae.value,dt=>(Ne(),je("button",{key:dt.id,onClick:fn=>_r(dt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",RV,zt(Ze(dt)),1)]),Ke[50]||(Ke[50]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,BV))),128))],64))])])):(Ne(),je("div",PV,[Ke[44]||(Ke[44]=P("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarié",-1)),P("div",kV,[se.value?(Ne(),je(bn,{key:0},ar(3,dt=>P("div",{key:dt,class:"animate-pulse"},Ke[42]||(Ke[42]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),je(bn,{key:1},ar(K.value,dt=>(Ne(),je("button",{key:dt.id,onClick:fn=>jn(dt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",AV,zt(Ze(dt)),1)]),Ke[43]||(Ke[43]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,MV))),128))])]))])):(Ne(),je("div",qV,[_n(s).plans.length===0?(Ne(),je("div",YV,Ke[56]||(Ke[56]=[P("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Ne(),je("div",ZV,[(Ne(!0),je(bn,null,ar(_n(s).plans,dt=>(Ne(),je("div",{key:dt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:fn=>Pe(dt.id),class:"w-full text-left"},[P("div",XV,zt(dt.nom),1),P("div",JV,zt(dt.description),1),P("div",QV," Modifié le "+zt(ot(dt.date_modification)),1)],8,KV),_n(X).isAdmin||_n(X).isEntreprise?(Ne(),je("button",{key:0,onClick:Rl(fn=>Jt(dt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,eH)):Kt("",!0)]))),128))]))]))])])])):Kt("",!0)])),(Ne(),Lo(Bd,{to:"body"},[$.value?(Ne(),je("div",tH,[P("div",nH,[P("div",rH,[Ke[57]||(Ke[57]=P("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),Ke[58]||(Ke[58]=P("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),P("p",iH,' Êtes-vous sûr de vouloir supprimer le plan "'+zt(ae.value?ae.value.nom:"")+'" ? Cette action est irréversible. ',1)]),P("div",{class:"flex justify-center space-x-4"},[P("button",{onClick:qn,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),P("button",{onClick:cn,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):Kt("",!0)]))])]),(Ne(),Lo(Bd,{to:"body"},[de.value?(Ne(),Lo(kS,{key:0,note:le.value,"is-new-note":!((Gt=le.value)!=null&&Gt.id),location:(on=le.value)==null?void 0:on.location,onClose:mn,onSave:zn},null,8,["note","is-new-note","location"])):Kt("",!0)]))],64)}}}),sH={class:"fixed inset-0 z-[3001] overflow-y-auto"},oH={class:"flex items-center justify-center min-h-screen w-full p-0"},aH={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},lH={class:"p-4 md:p-6"},uH={class:"flex justify-between items-center mb-4 border-b pb-4"},cH={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},hH={class:"mt-4"},fH={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},dH={class:"flex"},pH={class:"ml-3"},gH={class:"text-sm font-medium text-red-800"},mH={key:0},vH={key:1},yH=["value"],bH={key:2},_H={key:3},wH=["value"],xH={key:4,class:"bg-blue-50 p-3 rounded-md mb-4"},LH={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},CH={key:0,class:"mt-2 text-sm text-red-600"},SH={key:0,class:"mt-2 text-sm text-red-600"},EH={key:5},PH={class:"flex items-center"},kH={key:6,class:"border-t pt-4 mt-4"},MH={class:"mb-4"},AH={class:"mb-4"},TH={key:7},OH={key:8},DH={key:0,class:"mt-2 text-sm text-red-600"},IH={class:"flex justify-end space-x-3"},NH=["disabled"],BH={key:0,class:"mr-2"},RH=ws({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=kt(!1),s=kt(""),o=kt(""),a=kt(""),l=kt(""),c=kt(""),f=cu({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});Ks(()=>{var y;(y=n.user)!=null&&y.id?(f.id=n.user.id,f.first_name=n.user.first_name||"",f.last_name=n.user.last_name||"",f.username=n.user.username||"",f.email=n.user.email||"",f.company_name=n.user.company_name||"",f.role=n.user.role||"VISITEUR",f.is_active=n.user.is_active??!0,f.ecowitt_api_key=n.user.ecowitt_api_key||"",f.ecowitt_application_key=n.user.ecowitt_application_key||"",f.storage_quota=n.user.storage_quota||50,f.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?f.salarie=n.user.salarie.id:f.salarie=n.user.salarie:n.user.salarie_id?f.salarie=n.user.salarie_id:n.currentSalarie&&(f.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?f.entreprise=n.user.entreprise.id:f.entreprise=n.user.entreprise:n.user.entreprise_id?f.entreprise=n.user.entreprise_id:n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(f.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?f.role="SALARIE":n.isAdmin||(f.role="VISITEUR"))}),Rg(()=>{f.role==="ADMIN"||f.role==="ENTREPRISE"?(f.salarie=null,f.entreprise=null):f.role==="SALARIE"&&(f.salarie=null,n.isEntreprise&&n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise)))}),Rg(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(y=>{switch(y.field){case"email":s.value=y.message;break;case"username":o.value=y.message;break;case"password":a.value=y.message;break;case"non_field_error":default:l.value=y.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let y=!0;if(f.id||(f.password!==c.value?(a.value="Les mots de passe ne correspondent pas",y=!1):f.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractères",y=!1)),!!y){i.value=!0;try{const m={...f};f.id&&delete m.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(f.role)&&(m.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),m.salarie&&(m.salarie_id=m.salarie,delete m.salarie),n.currentSalarie&&f.role==="VISITEUR"&&(m.salarie_id=parseInt(n.currentSalarie)),await r("save",m),r("refresh")}catch(m){console.error("Erreur locale:",m)}finally{i.value=!1}}}return(y,m)=>(Ne(),je("div",sH,[P("div",oH,[m[43]||(m[43]=P("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[P("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),P("div",aH,[P("div",null,[P("div",lH,[P("div",uH,[P("h3",cH,zt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),P("button",{type:"button",onClick:m[0]||(m[0]=C=>y.$emit("close")),class:"text-gray-400 hover:text-gray-500"},m[16]||(m[16]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",hH,[l.value?(Ne(),je("div",fH,[P("div",dH,[m[17]||(m[17]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",pH,[P("h3",gH,zt(l.value),1)])])])):Kt("",!0),P("form",{onSubmit:Rl(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Ne(),je("div",mH,[m[19]||(m[19]=P("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Fn(P("select",{id:"role","onUpdate:modelValue":m[1]||(m[1]=C=>f.role=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[18]||(m[18]=[P("option",{value:"ADMIN"},"Administrateur",-1),P("option",{value:"ENTREPRISE"},"Entreprise",-1),P("option",{value:"SALARIE"},"Salarie",-1),P("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[ss,f.role]])])):Kt("",!0),t.isAdmin&&f.role==="SALARIE"?(Ne(),je("div",vH,[m[21]||(m[21]=P("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Fn(P("select",{id:"entreprise","onUpdate:modelValue":m[2]||(m[2]=C=>f.entreprise=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[m[20]||(m[20]=P("option",{value:null},"-- Sélectionner une entreprise --",-1)),(Ne(!0),je(bn,null,ar(t.entreprises,C=>(Ne(),je("option",{key:C.id,value:C.id},zt(C.first_name)+" "+zt(C.last_name)+" ("+zt(C.company_name||"Entreprise")+") ",9,yH))),128))],512),[[ss,f.entreprise]])])):Kt("",!0),t.isEntreprise&&!f.id?(Ne(),je("div",bH,[m[23]||(m[23]=P("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Fn(P("select",{id:"role","onUpdate:modelValue":m[3]||(m[3]=C=>f.role=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[22]||(m[22]=[P("option",{value:"SALARIE"},"Salarie",-1),P("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[ss,f.role]])])):Kt("",!0),(t.isAdmin||t.isEntreprise)&&f.role==="VISITEUR"&&!t.currentSalarie?(Ne(),je("div",_H,[m[25]||(m[25]=P("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Fn(P("select",{id:"salarie","onUpdate:modelValue":m[4]||(m[4]=C=>f.salarie=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[m[24]||(m[24]=P("option",{value:null},"-- Sélectionner un salarie --",-1)),(Ne(!0),je(bn,null,ar(t.salaries,C=>(Ne(),je("option",{key:C.id,value:C.id},zt(C.first_name)+" "+zt(C.last_name)+" ("+zt(C.company_name||"Salarie")+") ",9,wH))),128))],512),[[ss,f.salarie]])])):Kt("",!0),t.currentSalarie&&!t.isAdmin&&!t.isEntreprise?(Ne(),je("div",xH,m[26]||(m[26]=[lu('<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><p class="text-sm text-blue-700"> Vous êtes en train de créer un visiteur qui sera automatiquement associé à votre compte. </p></div></div>',1)]))):Kt("",!0),P("div",LH,[P("div",null,[m[27]||(m[27]=P("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),Fn(P("input",{type:"text",id:"first_name","onUpdate:modelValue":m[5]||(m[5]=C=>f.first_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.first_name]])]),P("div",null,[m[28]||(m[28]=P("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Fn(P("input",{type:"text",id:"last_name","onUpdate:modelValue":m[6]||(m[6]=C=>f.last_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.last_name]])])]),P("div",null,[m[29]||(m[29]=P("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Fn(P("input",{type:"email",id:"email","onUpdate:modelValue":m[7]||(m[7]=C=>f.email=C),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.email]]),s.value?(Ne(),je("div",CH,zt(s.value),1)):Kt("",!0)]),P("div",null,[m[30]||(m[30]=P("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Fn(P("input",{type:"text",id:"username","onUpdate:modelValue":m[8]||(m[8]=C=>f.username=C),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.username]]),o.value?(Ne(),je("div",SH,zt(o.value),1)):Kt("",!0)]),P("div",null,[m[31]||(m[31]=P("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Fn(P("input",{type:"text",id:"company_name","onUpdate:modelValue":m[9]||(m[9]=C=>f.company_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.company_name]])]),f.role==="ENTREPRISE"||f.role==="SALARIE"?(Ne(),je("div",EH,[m[33]||(m[33]=P("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),P("div",PH,[Fn(P("input",{type:"number",id:"storage_quota","onUpdate:modelValue":m[10]||(m[10]=C=>f.storage_quota=C),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.storage_quota]]),m[32]||(m[32]=P("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),m[34]||(m[34]=P("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):Kt("",!0),f.role==="ENTREPRISE"?(Ne(),je("div",kH,[m[39]||(m[39]=P("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),P("div",MH,[m[35]||(m[35]=P("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Clé API Ecowitt",-1)),Fn(P("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":m[11]||(m[11]=C=>f.ecowitt_api_key=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé API Ecowitt"},null,512),[[fi,f.ecowitt_api_key]]),m[36]||(m[36]=P("p",{class:"mt-1 text-sm text-gray-500"},"Clé API pour accéder aux services météo Ecowitt",-1))]),P("div",AH,[m[37]||(m[37]=P("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Clé d'application Ecowitt",-1)),Fn(P("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":m[12]||(m[12]=C=>f.ecowitt_application_key=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé d'application Ecowitt"},null,512),[[fi,f.ecowitt_application_key]]),m[38]||(m[38]=P("p",{class:"mt-1 text-sm text-gray-500"},"Clé d'application pour accéder aux services météo Ecowitt",-1))])])):Kt("",!0),f.id?Kt("",!0):(Ne(),je("div",TH,[m[40]||(m[40]=P("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Fn(P("input",{type:"password",id:"password","onUpdate:modelValue":m[13]||(m[13]=C=>f.password=C),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,f.password]])])),f.id?Kt("",!0):(Ne(),je("div",OH,[m[41]||(m[41]=P("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Fn(P("input",{type:"password",id:"password_confirm","onUpdate:modelValue":m[14]||(m[14]=C=>c.value=C),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[fi,c.value]]),a.value?(Ne(),je("div",DH,zt(a.value),1)):Kt("",!0)])),P("div",IH,[P("button",{type:"button",onClick:m[15]||(m[15]=C=>y.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),P("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Ne(),je("span",BH,m[42]||(m[42]=[P("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):Kt("",!0),jr(" "+zt(f.id?"Enregistrer":"Créer"),1)],8,NH)])],32)])])])])])]))}}),FH={class:"fixed inset-0 z-[3001] overflow-y-auto"},jH={class:"flex items-center justify-center min-h-screen w-full"},zH={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},UH={class:"p-4 md:p-6"},$H={class:"flex items-start"},VH={class:"ml-4 flex-1"},HH={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},WH={class:"mt-2"},GH={class:"text-sm text-gray-500"},qH={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},YH=ws({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Ne(),je("div",FH,[P("div",jH,[n[3]||(n[3]=P("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[P("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),P("div",zH,[P("div",UH,[P("div",$H,[n[2]||(n[2]=P("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[P("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),P("div",VH,[P("h3",HH,zt(t.title),1),P("div",WH,[P("p",GH,zt(t.message),1)])])]),P("div",qH,[P("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),P("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),ZH={class:"min-h-full bg-gray-50"},KH={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},XH={class:"flex justify-between items-center mb-8"},JH={class:"text-3xl font-extrabold text-gray-900"},QH={key:0},eW={key:1},tW={key:2},nW={key:0},rW={key:1},iW={key:2},sW={class:"bg-white shadow rounded-lg mb-6 p-4"},oW={class:"space-y-4"},aW={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},lW={key:0},uW={key:0,value:"ADMIN"},cW={key:1,value:"ENTREPRISE"},hW={key:1},fW=["value"],dW={key:2},pW=["value"],gW={class:"w-full"},mW={class:"bg-white shadow rounded-lg"},vW={class:"overflow-x-auto"},yW={class:"min-w-full divide-y divide-gray-200"},bW={class:"bg-gray-50"},_W={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},wW={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},xW={class:"bg-white divide-y divide-gray-200"},LW={key:0,class:"animate-pulse"},CW={key:1},SW={class:"px-6 py-4 whitespace-nowrap"},EW={class:"flex items-center"},PW={class:"flex-shrink-0 h-10 w-10"},kW={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},MW={class:"text-primary-600 font-medium"},AW={class:"ml-4"},TW={class:"text-sm font-medium text-gray-900"},OW={class:"text-sm text-gray-500"},DW={class:"px-6 py-4 whitespace-nowrap"},IW={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},NW={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},BW={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},RW={class:"px-6 py-4 whitespace-nowrap"},FW={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},jW=["onClick"],zW=["onClick"],UW={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},$W=ws({__name:"UserListView",setup(t){const e=po(),n=ul(),r=kt([]),i=kt([]),s=kt([]),o=kt(!1),a=kt(!1),l=kt(null),c=kt(null),f=kt(!0),p=kt([]),y=cu({role:"",search:"",salarie:"",entreprise:""}),m=ir(()=>e.isAdmin),C=ir(()=>e.isEntreprise),S=ir(()=>e.isSalarie),T=ir(()=>m.value?r.value.filter($=>$.role==="SALARIE"):C.value?r.value.filter($=>{var H,le;return $.role==="SALARIE"&&((H=$.entreprise)==null?void 0:H.id)===((le=e.user)==null?void 0:le.id)}):[]),O=ir(()=>{let $=r.value;if(C.value&&($=$.filter(H=>{var le,ae,z,B,X;return H.role==="SALARIE"?((le=H.entreprise)==null?void 0:le.id)===((ae=e.user)==null?void 0:ae.id):H.role==="VISITEUR"?((B=(z=H.salarie)==null?void 0:z.entreprise)==null?void 0:B.id)===((X=e.user)==null?void 0:X.id):!1})),S.value&&($=$.filter(H=>{var le,ae;return H.role==="VISITEUR"&&(H.salarie_id===((le=e.user)==null?void 0:le.id)||H.salarie&&H.salarie.id===((ae=e.user)==null?void 0:ae.id))})),(m.value||C.value)&&(y.role&&($=$.filter(H=>H.role===y.role)),y.salarie&&($=$.filter(H=>{var ae;const le=((ae=H.salarie)==null?void 0:ae.id)||H.salarie_id;return(le==null?void 0:le.toString())===y.salarie.toString()})),y.entreprise&&m.value&&($=$.filter(H=>{var le,ae,z,B,X;return H.role==="SALARIE"?((ae=(le=H.entreprise)==null?void 0:le.id)==null?void 0:ae.toString())===y.entreprise.toString():H.role==="VISITEUR"?((X=(B=(z=H.salarie)==null?void 0:z.entreprise)==null?void 0:B.id)==null?void 0:X.toString())===y.entreprise.toString():!1}))),y.search){const H=y.search.toLowerCase();$=$.filter(le=>{var ae,z,B,X;return((ae=le.username)==null?void 0:ae.toLowerCase().includes(H))||((z=le.email)==null?void 0:z.toLowerCase().includes(H))||((B=le.first_name)==null?void 0:B.toLowerCase().includes(H))||((X=le.last_name)==null?void 0:X.toLowerCase().includes(H))||le.company_name&&le.company_name.toLowerCase().includes(H)})}return $});Ks(async()=>{await D(),await N()});async function D(){var $,H,le;f.value=!0;try{if(m.value)r.value=await e.fetchUsers();else if(C.value){const[ae,z]=await Promise.all([s1({role:"SALARIE",entrepriseId:($=e.user)==null?void 0:$.id}),s1({role:"VISITEUR",entrepriseId:(H=e.user)==null?void 0:H.id})]);r.value=[...ae,...z]}else S.value&&(r.value=await s1({role:"VISITEUR",salarieId:(le=e.user)==null?void 0:le.id,includeDetails:!0}))}catch(ae){console.error("Error fetching users:",ae),n.error("Erreur lors du chargement des utilisateurs")}finally{f.value=!1}}async function N(){var $,H;m.value?(s.value=await e.fetchEnterprises(),i.value=await e.fetchEntrepriseSalaries((($=e.user)==null?void 0:$.id)||0)):C.value&&(i.value=await e.fetchEntrepriseSalaries(((H=e.user)==null?void 0:H.id)||0))}function U(){l.value=null,p.value=[],o.value=!0}function W(){o.value=!1,l.value=null,p.value=[]}function ee($){l.value=$,p.value=[],o.value=!0}function te($){c.value=$,a.value=!0}function V($){return!!(m.value||C.value&&($.role==="SALARIE"||$.role==="VISITEUR")||S.value&&$.role==="VISITEUR")}async function Y($){var H;try{p.value=[],l.value?(await e.updateUser(l.value.id,$),n.success("Utilisateur mis à jour avec succès")):(await e.createUser($),n.success("Utilisateur créé avec succès")),o.value=!1,await D()}catch(le){(H=le.response)!=null&&H.data?p.value=k7(le.response.data):n.error("Une erreur est survenue")}}async function de(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprimé avec succès"),a.value=!1,await D()}catch{n.error("Erreur lors de la suppression de l'utilisateur")}}return($,H)=>{var le,ae,z,B;return Ne(),je("div",ZH,[P("div",KH,[P("div",XH,[P("h1",JH,[m.value?(Ne(),je("span",QH,"Gestion des utilisateurs")):C.value?(Ne(),je("span",eW,"Gestion des salaries et visiteurs")):S.value?(Ne(),je("span",tW,"Gestion des visiteurs")):Kt("",!0)]),P("button",{onClick:U,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[H[5]||(H[5]=P("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(Ne(),je("span",nW,"Nouvel utilisateur")):C.value?(Ne(),je("span",rW,"Nouveau salarie/visiteur")):S.value?(Ne(),je("span",iW,"Nouvel visiteur")):Kt("",!0)])]),P("div",sW,[P("div",oW,[P("div",aW,[m.value||C.value?(Ne(),je("div",lW,[H[9]||(H[9]=P("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Fn(P("select",{id:"role-filter","onUpdate:modelValue":H[0]||(H[0]=X=>y.role=X),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[H[6]||(H[6]=P("option",{value:""},"Tous les rôles",-1)),m.value?(Ne(),je("option",uW,"Administrateur")):Kt("",!0),m.value?(Ne(),je("option",cW,"Entreprise")):Kt("",!0),H[7]||(H[7]=P("option",{value:"SALARIE"},"Salarie",-1)),H[8]||(H[8]=P("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[ss,y.role]])])):Kt("",!0),m.value?(Ne(),je("div",hW,[H[11]||(H[11]=P("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Fn(P("select",{id:"entreprise-filter","onUpdate:modelValue":H[1]||(H[1]=X=>y.entreprise=X),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[H[10]||(H[10]=P("option",{value:""},"Toutes les entreprises",-1)),(Ne(!0),je(bn,null,ar(s.value,X=>(Ne(),je("option",{key:X.id,value:X.id},zt(_n(ec)(X)),9,fW))),128))],512),[[ss,y.entreprise]])])):Kt("",!0),m.value||C.value?(Ne(),je("div",dW,[H[13]||(H[13]=P("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Fn(P("select",{id:"salarie-filter","onUpdate:modelValue":H[2]||(H[2]=X=>y.salarie=X),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[H[12]||(H[12]=P("option",{value:""},"Tous les salaries",-1)),(Ne(!0),je(bn,null,ar(T.value,X=>(Ne(),je("option",{key:X.id,value:X.id},zt(_n(ec)(X)),9,pW))),128))],512),[[ss,y.salarie]])])):Kt("",!0)]),P("div",gW,[H[14]||(H[14]=P("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Fn(P("input",{type:"text",id:"search","onUpdate:modelValue":H[3]||(H[3]=X=>y.search=X),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[fi,y.search]])])])]),P("div",mW,[P("div",vW,[P("table",yW,[P("thead",bW,[P("tr",null,[H[15]||(H[15]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),H[16]||(H[16]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),H[17]||(H[17]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),m.value||C.value?(Ne(),je("th",_W," Entreprise ")):Kt("",!0),m.value||C.value?(Ne(),je("th",wW," Salarie ")):Kt("",!0),H[18]||(H[18]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),H[19]||(H[19]=P("th",{scope:"col",class:"relative px-6 py-3"},[P("span",{class:"sr-only"},"Actions")],-1))])]),P("tbody",xW,[f.value?(Ne(),je("tr",LW,H[20]||(H[20]=[P("td",{colspan:"7",class:"py-4 px-6"},[P("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):O.value.length===0?(Ne(),je("tr",CW,H[21]||(H[21]=[P("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):Kt("",!0),(Ne(!0),je(bn,null,ar(O.value,X=>{var K;return Ne(),je("tr",{key:X.id},[P("td",SW,[P("div",EW,[P("div",PW,[P("div",kW,[P("span",MW,zt(_n(A7)(X.first_name,X.last_name)),1)])]),P("div",AW,[P("div",TW,zt(_n(ec)(X)),1),P("div",OW,zt(X.username),1)])])]),P("td",DW,[P("span",{class:Si(_n(D7)())},zt(_n(O7)(X.role)),3)]),P("td",IW,zt(X.email),1),m.value||C.value?(Ne(),je("td",NW,[X.role==="ENTREPRISE"?(Ne(),je(bn,{key:0},[jr(" - ")],64)):X.role==="SALARIE"?(Ne(),je(bn,{key:1},[jr(zt(X.entreprise?_n(ec)(X.entreprise):"Non assigné"),1)],64)):X.role==="VISITEUR"?(Ne(),je(bn,{key:2},[jr(zt((K=X.salarie)!=null&&K.entreprise?_n(ec)(X.salarie.entreprise):"Non assigné"),1)],64)):(Ne(),je(bn,{key:3},[jr(" - ")],64))])):Kt("",!0),m.value||C.value?(Ne(),je("td",BW,[X.role==="ENTREPRISE"||X.role==="ADMIN"?(Ne(),je(bn,{key:0},[jr(" - ")],64)):X.role==="SALARIE"?(Ne(),je(bn,{key:1},[jr(" - ")],64)):(Ne(),je(bn,{key:2},[jr(zt(X.salarie?_n(ec)(X.salarie):"Non assigné"),1)],64))])):Kt("",!0),P("td",RW,[P("span",{class:Si(_n(I7)(X.is_active))},zt(X.is_active?"Actif":"Inactif"),3)]),P("td",FW,[P("button",{onClick:ye=>ee(X),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,jW),V(X)?(Ne(),je("button",{key:0,onClick:ye=>te(X),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,zW)):Kt("",!0)])])}),128))])])])])]),o.value?(Ne(),je("div",UW,[Kr(RH,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":m.value,"is-entreprise":C.value,"current-salarie":S.value?(ae=(le=_n(e).user)==null?void 0:le.id)==null?void 0:ae.toString():void 0,"current-entreprise":C.value?(B=(z=_n(e).user)==null?void 0:z.id)==null?void 0:B.toString():void 0,"api-errors":p.value,onClose:W,onSave:Y},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):Kt("",!0),a.value?(Ne(),Lo(YH,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:de,onCancel:H[4]||(H[4]=X=>a.value=!1)})):Kt("",!0)])}}});var XS={exports:{}};const VW=mS(GD);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function H4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H4(Object(n),!0).forEach(function(r){HW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O0=function(e){return typeof e}:O0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O0(t)}function HW(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tu(){return Tu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tu.apply(this,arguments)}function WW(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function GW(t,e){if(t==null)return{};var n=WW(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qW(t){return YW(t)||ZW(t)||KW(t)||XW()}function YW(t){if(Array.isArray(t))return U2(t)}function ZW(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function KW(t,e){if(t){if(typeof t=="string")return U2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U2(t,e)}}function U2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function XW(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var JW="1.14.0";function bh(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Lh=bh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),lm=bh(/Edge/i),W4=bh(/firefox/i),yg=bh(/safari/i)&&!bh(/chrome/i)&&!bh(/android/i),JS=bh(/iP(ad|od|hone)/i),QW=bh(/chrome/i)&&bh(/android/i),QS={capture:!1,passive:!1};function oi(t,e,n){t.addEventListener(e,n,!Lh&&QS)}function Qr(t,e,n){t.removeEventListener(e,n,!Lh&&QS)}function pv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function eG(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Qu(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&pv(t,e):pv(t,e))||r&&t===n)return t;if(t===n)break}while(t=eG(t))}return null}var G4=/\s+/g;function Is(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(G4," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(G4," ")}}function Zn(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Gf(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Zn(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function eE(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Rc(){var t=document.scrollingElement;return t||document.documentElement}function bs(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,f,p;if(t!==window&&t.parentNode&&t!==Rc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,f=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,f=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Lh))do if(i&&i.getBoundingClientRect&&(Zn(i,"transform")!=="none"||n&&Zn(i,"position")!=="static")){var y=i.getBoundingClientRect();o-=y.top+parseInt(Zn(i,"border-top-width")),a-=y.left+parseInt(Zn(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var m=Gf(i||t),C=m&&m.a,S=m&&m.d;m&&(o/=S,a/=C,p/=C,f/=S,l=o+f,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:f}}}function q4(t,e,n){for(var r=Yh(t,!0),i=bs(t)[e];r;){var s=bs(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Rc())break;r=Yh(r,!1)}return!1}function ap(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==wr.ghost&&(r||o[s]!==wr.dragged)&&Qu(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function t_(t,e){for(var n=t.lastElementChild;n&&(n===wr.ghost||Zn(n,"display")==="none"||e&&!pv(n,e));)n=n.previousElementSibling;return n||null}function qs(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==wr.clone&&(!e||pv(t,e))&&n++;return n}function Y4(t){var e=0,n=0,r=Rc();if(t)do{var i=Gf(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function tG(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Yh(t,e){if(!t||!t.getBoundingClientRect)return Rc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Zn(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Rc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Rc()}function nG(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function C1(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var bg;function tE(t,e){return function(){if(!bg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),bg=setTimeout(function(){bg=void 0},e)}}}function rG(){clearTimeout(bg),bg=void 0}function nE(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function n_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function Z4(t,e){Zn(t,"position","absolute"),Zn(t,"top",e.top),Zn(t,"left",e.left),Zn(t,"width",e.width),Zn(t,"height",e.height)}function S1(t){Zn(t,"position",""),Zn(t,"top",""),Zn(t,"left",""),Zn(t,"width",""),Zn(t,"height","")}var Fa="Sortable"+new Date().getTime();function iG(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Zn(i,"display")==="none"||i===wr.ghost)){t.push({target:i,rect:bs(i)});var s=zc({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=Gf(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(tG(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,f=c.fromRect,p=bs(c),y=c.prevFromRect,m=c.prevToRect,C=a.rect,S=Gf(c,!0);S&&(p.top-=S.f,p.left-=S.e),c.toRect=p,c.thisAnimationDuration&&C1(y,p)&&!C1(f,p)&&(C.top-p.top)/(C.left-p.left)===(f.top-p.top)/(f.left-p.left)&&(l=oG(C,y,m,i.options)),C1(p,f)||(c.prevFromRect=f,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,C,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){Zn(r,"transition",""),Zn(r,"transform","");var a=Gf(this.el),l=a&&a.a,c=a&&a.d,f=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!f,r.animatingY=!!p,Zn(r,"transform","translate3d("+f+"px,"+p+"px,0)"),this.forRepaintDummy=sG(r),Zn(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Zn(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Zn(r,"transition",""),Zn(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function sG(t){return t.offsetWidth}function oG(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var kd=[],E1={initializeByDefault:!0},um={mount:function(e){for(var n in E1)E1.hasOwnProperty(n)&&!(n in e)&&(e[n]=E1[n]);kd.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),kd.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";kd.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](zc({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](zc({sortable:n},r)))})},initializePlugins:function(e,n,r,i){kd.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Tu(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return kd.forEach(function(i){typeof i.eventProperties=="function"&&Tu(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return kd.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function Zp(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,f=t.oldDraggableIndex,p=t.newDraggableIndex,y=t.originalEvent,m=t.putSortable,C=t.extraEventProperties;if(e=e||n&&n[Fa],!!e){var S,T=e.options,O="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Lh&&!lm?S=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(r,!0,!0)),S.to=o||n,S.from=a||n,S.item=i||n,S.clone=s,S.oldIndex=l,S.newIndex=c,S.oldDraggableIndex=f,S.newDraggableIndex=p,S.originalEvent=y,S.pullMode=m?m.lastPutMode:void 0;var D=zc(zc({},C),um.getEventProperties(r,e));for(var N in D)S[N]=D[N];n&&n.dispatchEvent(S),T[O]&&T[O].call(e,S)}}var aG=["evt"],Pl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=GW(r,aG);um.pluginEvent.bind(wr)(e,n,zc({dragEl:An,parentEl:Hs,ghostEl:Br,rootEl:vs,nextEl:If,lastDownEl:D0,cloneEl:Ws,cloneHidden:Gh,dragStarted:Kp,putSortable:ca,activeSortable:wr.active,originalEvent:i,oldIndex:Vd,oldDraggableIndex:_g,newIndex:nu,newDraggableIndex:Wh,hideGhostForTarget:oE,unhideGhostForTarget:aE,cloneNowHidden:function(){Gh=!0},cloneNowShown:function(){Gh=!1},dispatchSortableEvent:function(a){nl({sortable:n,name:a,originalEvent:i})}},s))};function nl(t){Zp(zc({putSortable:ca,cloneEl:Ws,targetEl:An,rootEl:vs,oldIndex:Vd,oldDraggableIndex:_g,newIndex:nu,newDraggableIndex:Wh},t))}var An,Hs,Br,vs,If,D0,Ws,Gh,Vd,nu,_g,Wh,Jm,ca,zd=!1,gv=!1,mv=[],Pf,Ku,P1,k1,K4,X4,Kp,Md,wg,xg=!1,Qm=!1,I0,Oa,M1=[],$2=!1,vv=[],ay=typeof document<"u",e0=JS,J4=lm||Lh?"cssFloat":"float",lG=ay&&!QW&&!JS&&"draggable"in document.createElement("div"),rE=function(){if(ay){if(Lh)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),iE=function(e,n){var r=Zn(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=ap(e,0,n),o=ap(e,1,n),a=s&&Zn(s),l=o&&Zn(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+bs(s).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+bs(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[J4]==="none"||o&&r[J4]==="none"&&c+f>i)?"vertical":"horizontal"},uG=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},cG=function(e,n){var r;return mv.some(function(i){var s=i[Fa].options.emptyInsertThreshold;if(!(!s||t_(i))){var o=bs(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},sE=function(e){function n(s,o){return function(a,l,c,f){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,f),o)(a,l,c,f);var y=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===y||s.join&&s.indexOf(y)>-1}}var r={},i=e.group;(!i||O0(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},oE=function(){!rE&&Br&&Zn(Br,"display","none")},aE=function(){!rE&&Br&&Zn(Br,"display","")};ay&&document.addEventListener("click",function(t){if(gv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),gv=!1,!1},!0);var kf=function(e){if(An){e=e.touches?e.touches[0]:e;var n=cG(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Fa]._onDragOver(r)}}},hG=function(e){An&&An.parentNode[Fa]._isOutsideThisEl(e.target)};function wr(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Tu({},e),t[Fa]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return iE(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:wr.supportPointer!==!1&&"PointerEvent"in window&&!yg,emptyInsertThreshold:5};um.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);sE(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:lG,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?oi(t,"pointerdown",this._onTapStart):(oi(t,"mousedown",this._onTapStart),oi(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(oi(t,"dragover",this),oi(t,"dragenter",this)),mv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Tu(this,iG())}wr.prototype={constructor:wr,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Md=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,An):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,f=i.filter;if(bG(r),!An&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&yg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Qu(l,i.draggable,r,!1),!(l&&l.animated)&&D0!==l)){if(Vd=qs(l),_g=qs(l,i.draggable),typeof f=="function"){if(f.call(this,e,l,this)){nl({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Pl("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(p){if(p=Qu(c,p.trim(),r,!1),p)return nl({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),Pl("filter",n,{evt:e}),!0}),f)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!Qu(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!An&&r.parentNode===s){var c=bs(r);if(vs=s,An=r,Hs=An.parentNode,If=An.nextSibling,D0=r,Jm=o.group,wr.dragged=An,Pf={target:An,clientX:(n||e).clientX,clientY:(n||e).clientY},K4=Pf.clientX-c.left,X4=Pf.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,An.style["will-change"]="all",l=function(){if(Pl("delayEnded",i,{evt:e}),wr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!W4&&i.nativeDraggable&&(An.draggable=!0),i._triggerDragStart(e,n),nl({sortable:i,name:"choose",originalEvent:e}),Is(An,o.chosenClass,!0)},o.ignore.split(",").forEach(function(f){eE(An,f.trim(),A1)}),oi(a,"dragover",kf),oi(a,"mousemove",kf),oi(a,"touchmove",kf),oi(a,"mouseup",i._onDrop),oi(a,"touchend",i._onDrop),oi(a,"touchcancel",i._onDrop),W4&&this.nativeDraggable&&(this.options.touchStartThreshold=4,An.draggable=!0),Pl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(lm||Lh))){if(wr.eventCanceled){this._onDrop();return}oi(a,"mouseup",i._disableDelayedDrag),oi(a,"touchend",i._disableDelayedDrag),oi(a,"touchcancel",i._disableDelayedDrag),oi(a,"mousemove",i._delayedDragTouchMoveHandler),oi(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&oi(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){An&&A1(An),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Qr(e,"mouseup",this._disableDelayedDrag),Qr(e,"touchend",this._disableDelayedDrag),Qr(e,"touchcancel",this._disableDelayedDrag),Qr(e,"mousemove",this._delayedDragTouchMoveHandler),Qr(e,"touchmove",this._delayedDragTouchMoveHandler),Qr(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?oi(document,"pointermove",this._onTouchMove):n?oi(document,"touchmove",this._onTouchMove):oi(document,"mousemove",this._onTouchMove):(oi(An,"dragend",this),oi(vs,"dragstart",this._onDragStart));try{document.selection?N0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(zd=!1,vs&&An){Pl("dragStarted",this,{evt:n}),this.nativeDraggable&&oi(document,"dragover",hG);var r=this.options;!e&&Is(An,r.dragClass,!1),Is(An,r.ghostClass,!0),wr.active=this,e&&this._appendGhost(),nl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ku){this._lastX=Ku.clientX,this._lastY=Ku.clientY,oE();for(var e=document.elementFromPoint(Ku.clientX,Ku.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ku.clientX,Ku.clientY),e!==n);)n=e;if(An.parentNode[Fa]._isOutsideThisEl(e),n)do{if(n[Fa]){var r=void 0;if(r=n[Fa]._onDragOver({clientX:Ku.clientX,clientY:Ku.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);aE()}},_onTouchMove:function(e){if(Pf){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=Br&&Gf(Br,!0),a=Br&&o&&o.a,l=Br&&o&&o.d,c=e0&&Oa&&Y4(Oa),f=(s.clientX-Pf.clientX+i.x)/(a||1)+(c?c[0]-M1[0]:0)/(a||1),p=(s.clientY-Pf.clientY+i.y)/(l||1)+(c?c[1]-M1[1]:0)/(l||1);if(!wr.active&&!zd){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Br){o?(o.e+=f-(P1||0),o.f+=p-(k1||0)):o={a:1,b:0,c:0,d:1,e:f,f:p};var y="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Zn(Br,"webkitTransform",y),Zn(Br,"mozTransform",y),Zn(Br,"msTransform",y),Zn(Br,"transform",y),P1=f,k1=p,Ku=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Br){var e=this.options.fallbackOnBody?document.body:vs,n=bs(An,!0,e0,!0,e),r=this.options;if(e0){for(Oa=e;Zn(Oa,"position")==="static"&&Zn(Oa,"transform")==="none"&&Oa!==document;)Oa=Oa.parentNode;Oa!==document.body&&Oa!==document.documentElement?(Oa===document&&(Oa=Rc()),n.top+=Oa.scrollTop,n.left+=Oa.scrollLeft):Oa=Rc(),M1=Y4(Oa)}Br=An.cloneNode(!0),Is(Br,r.ghostClass,!1),Is(Br,r.fallbackClass,!0),Is(Br,r.dragClass,!0),Zn(Br,"transition",""),Zn(Br,"transform",""),Zn(Br,"box-sizing","border-box"),Zn(Br,"margin",0),Zn(Br,"top",n.top),Zn(Br,"left",n.left),Zn(Br,"width",n.width),Zn(Br,"height",n.height),Zn(Br,"opacity","0.8"),Zn(Br,"position",e0?"absolute":"fixed"),Zn(Br,"zIndex","100000"),Zn(Br,"pointerEvents","none"),wr.ghost=Br,e.appendChild(Br),Zn(Br,"transform-origin",K4/parseInt(Br.style.width)*100+"% "+X4/parseInt(Br.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Pl("dragStart",this,{evt:e}),wr.eventCanceled){this._onDrop();return}Pl("setupClone",this),wr.eventCanceled||(Ws=n_(An),Ws.draggable=!1,Ws.style["will-change"]="",this._hideClone(),Is(Ws,this.options.chosenClass,!1),wr.clone=Ws),r.cloneId=N0(function(){Pl("clone",r),!wr.eventCanceled&&(r.options.removeCloneOnHide||vs.insertBefore(Ws,An),r._hideClone(),nl({sortable:r,name:"clone"}))}),!n&&Is(An,s.dragClass,!0),n?(gv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Qr(document,"mouseup",r._onDrop),Qr(document,"touchend",r._onDrop),Qr(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,An)),oi(document,"drop",r),Zn(An,"transform","translateZ(0)")),zd=!0,r._dragStartId=N0(r._dragStarted.bind(r,n,e)),oi(document,"selectstart",r),Kp=!0,yg&&Zn(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=wr.active,f=Jm===l,p=a.sort,y=ca||c,m,C=this,S=!1;if($2)return;function T(K,ye){Pl(K,C,zc({evt:e,isOwner:f,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:y,target:r,completed:D,onMove:function(Ue,J){return t0(vs,n,An,i,Ue,bs(Ue),e,J)},changed:N},ye))}function O(){T("dragOverAnimationCapture"),C.captureAnimationState(),C!==y&&y.captureAnimationState()}function D(K){return T("dragOverCompleted",{insertion:K}),K&&(f?c._hideClone():c._showClone(C),C!==y&&(Is(An,ca?ca.options.ghostClass:c.options.ghostClass,!1),Is(An,a.ghostClass,!0)),ca!==C&&C!==wr.active?ca=C:C===wr.active&&ca&&(ca=null),y===C&&(C._ignoreWhileAnimating=r),C.animateAll(function(){T("dragOverAnimationComplete"),C._ignoreWhileAnimating=null}),C!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(r===An&&!An.animated||r===n&&!r.animated)&&(Md=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(An.parentNode[Fa]._isOutsideThisEl(e.target),!K&&kf(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),S=!0}function N(){nu=qs(An),Wh=qs(An,a.draggable),nl({sortable:C,name:"change",toEl:n,newIndex:nu,newDraggableIndex:Wh,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=Qu(r,a.draggable,n,!0),T("dragOver"),wr.eventCanceled)return S;if(An.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||C._ignoreWhileAnimating===r)return D(!1);if(gv=!1,c&&!a.disabled&&(f?p||(o=Hs!==vs):ca===this||(this.lastPutMode=Jm.checkPull(this,c,An,e))&&l.checkPut(this,c,An,e))){if(m=this._getDirection(e,r)==="vertical",i=bs(An),T("dragOverValid"),wr.eventCanceled)return S;if(o)return Hs=vs,O(),this._hideClone(),T("revert"),wr.eventCanceled||(If?vs.insertBefore(An,If):vs.appendChild(An)),D(!0);var U=t_(n,a.draggable);if(!U||gG(e,m,this)&&!U.animated){if(U===An)return D(!1);if(U&&n===e.target&&(r=U),r&&(s=bs(r)),t0(vs,n,An,i,r,s,e,!!r)!==!1)return O(),n.appendChild(An),Hs=n,N(),D(!0)}else if(U&&pG(e,m,this)){var W=ap(n,0,a,!0);if(W===An)return D(!1);if(r=W,s=bs(r),t0(vs,n,An,i,r,s,e,!1)!==!1)return O(),n.insertBefore(An,W),Hs=n,N(),D(!0)}else if(r.parentNode===n){s=bs(r);var ee=0,te,V=An.parentNode!==n,Y=!uG(An.animated&&An.toRect||i,r.animated&&r.toRect||s,m),de=m?"top":"left",$=q4(r,"top","top")||q4(An,"top","top"),H=$?$.scrollTop:void 0;Md!==r&&(te=s[de],xg=!1,Qm=!Y&&a.invertSwap||V),ee=mG(e,r,s,m,Y?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Qm,Md===r);var le;if(ee!==0){var ae=qs(An);do ae-=ee,le=Hs.children[ae];while(le&&(Zn(le,"display")==="none"||le===Br))}if(ee===0||le===r)return D(!1);Md=r,wg=ee;var z=r.nextElementSibling,B=!1;B=ee===1;var X=t0(vs,n,An,i,r,s,e,B);if(X!==!1)return(X===1||X===-1)&&(B=X===1),$2=!0,setTimeout(dG,30),O(),B&&!z?n.appendChild(An):r.parentNode.insertBefore(An,B?z:r),$&&nE($,0,H-$.scrollTop),Hs=An.parentNode,te!==void 0&&!Qm&&(I0=Math.abs(te-bs(r)[de])),N(),D(!0)}if(n.contains(An))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Qr(document,"mousemove",this._onTouchMove),Qr(document,"touchmove",this._onTouchMove),Qr(document,"pointermove",this._onTouchMove),Qr(document,"dragover",kf),Qr(document,"mousemove",kf),Qr(document,"touchmove",kf)},_offUpEvents:function(){var e=this.el.ownerDocument;Qr(e,"mouseup",this._onDrop),Qr(e,"touchend",this._onDrop),Qr(e,"pointerup",this._onDrop),Qr(e,"touchcancel",this._onDrop),Qr(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(nu=qs(An),Wh=qs(An,r.draggable),Pl("drop",this,{evt:e}),Hs=An&&An.parentNode,nu=qs(An),Wh=qs(An,r.draggable),wr.eventCanceled){this._nulling();return}zd=!1,Qm=!1,xg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),V2(this.cloneId),V2(this._dragStartId),this.nativeDraggable&&(Qr(document,"drop",this),Qr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),yg&&Zn(document.body,"user-select",""),Zn(An,"transform",""),e&&(Kp&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Br&&Br.parentNode&&Br.parentNode.removeChild(Br),(vs===Hs||ca&&ca.lastPutMode!=="clone")&&Ws&&Ws.parentNode&&Ws.parentNode.removeChild(Ws),An&&(this.nativeDraggable&&Qr(An,"dragend",this),A1(An),An.style["will-change"]="",Kp&&!zd&&Is(An,ca?ca.options.ghostClass:this.options.ghostClass,!1),Is(An,this.options.chosenClass,!1),nl({sortable:this,name:"unchoose",toEl:Hs,newIndex:null,newDraggableIndex:null,originalEvent:e}),vs!==Hs?(nu>=0&&(nl({rootEl:Hs,name:"add",toEl:Hs,fromEl:vs,originalEvent:e}),nl({sortable:this,name:"remove",toEl:Hs,originalEvent:e}),nl({rootEl:Hs,name:"sort",toEl:Hs,fromEl:vs,originalEvent:e}),nl({sortable:this,name:"sort",toEl:Hs,originalEvent:e})),ca&&ca.save()):nu!==Vd&&nu>=0&&(nl({sortable:this,name:"update",toEl:Hs,originalEvent:e}),nl({sortable:this,name:"sort",toEl:Hs,originalEvent:e})),wr.active&&((nu==null||nu===-1)&&(nu=Vd,Wh=_g),nl({sortable:this,name:"end",toEl:Hs,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Pl("nulling",this),vs=An=Hs=Br=If=Ws=D0=Gh=Pf=Ku=Kp=nu=Wh=Vd=_g=Md=wg=ca=Jm=wr.dragged=wr.ghost=wr.clone=wr.active=null,vv.forEach(function(e){e.checked=!0}),vv.length=P1=k1=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":An&&(this._onDragOver(e),fG(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],Qu(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||yG(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];Qu(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Qu(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=um.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&sE(r)},destroy:function(){Pl("destroy",this);var e=this.el;e[Fa]=null,Qr(e,"mousedown",this._onTapStart),Qr(e,"touchstart",this._onTapStart),Qr(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Qr(e,"dragover",this),Qr(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),mv.splice(mv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Gh){if(Pl("hideClone",this),wr.eventCanceled)return;Zn(Ws,"display","none"),this.options.removeCloneOnHide&&Ws.parentNode&&Ws.parentNode.removeChild(Ws),Gh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Gh){if(Pl("showClone",this),wr.eventCanceled)return;An.parentNode==vs&&!this.options.group.revertClone?vs.insertBefore(Ws,An):If?vs.insertBefore(Ws,If):vs.appendChild(Ws),this.options.group.revertClone&&this.animate(An,Ws),Zn(Ws,"display",""),Gh=!1}}};function fG(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function t0(t,e,n,r,i,s,o,a){var l,c=t[Fa],f=c.options.onMove,p;return window.CustomEvent&&!Lh&&!lm?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||bs(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),f&&(p=f.call(c,l,o)),p}function A1(t){t.draggable=!1}function dG(){$2=!1}function pG(t,e,n){var r=bs(ap(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function gG(t,e,n){var r=bs(t_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function mG(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,f=r?n.top:n.left,p=r?n.bottom:n.right,y=!1;if(!o){if(a&&I0<c*i){if(!xg&&(wg===1?l>f+c*s/2:l<p-c*s/2)&&(xg=!0),xg)y=!0;else if(wg===1?l<f+I0:l>p-I0)return-wg}else if(l>f+c*(1-i)/2&&l<p-c*(1-i)/2)return vG(e)}return y=y||o,y&&(l<f+c*s/2||l>p-c*s/2)?l>f+c/2?1:-1:0}function vG(t){return qs(An)<qs(t)?1:-1}function yG(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function bG(t){vv.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&vv.push(r)}}function N0(t){return setTimeout(t,0)}function V2(t){return clearTimeout(t)}ay&&oi(document,"touchmove",function(t){(wr.active||zd)&&t.cancelable&&t.preventDefault()});wr.utils={on:oi,off:Qr,css:Zn,find:eE,is:function(e,n){return!!Qu(e,n,e,!1)},extend:nG,throttle:tE,closest:Qu,toggleClass:Is,clone:n_,index:qs,nextTick:N0,cancelNextTick:V2,detectDirection:iE,getChild:ap};wr.get=function(t){return t[Fa]};wr.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(wr.utils=zc(zc({},wr.utils),r.utils)),um.mount(r)})};wr.create=function(t,e){return new wr(t,e)};wr.version=JW;var xo=[],Xp,H2,W2=!1,T1,O1,yv,Jp;function _G(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?oi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?oi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?oi(document,"touchmove",this._handleFallbackAutoScroll):oi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Qr(document,"dragover",this._handleAutoScroll):(Qr(document,"pointermove",this._handleFallbackAutoScroll),Qr(document,"touchmove",this._handleFallbackAutoScroll),Qr(document,"mousemove",this._handleFallbackAutoScroll)),Q4(),B0(),rG()},nulling:function(){yv=H2=Xp=W2=Jp=T1=O1=null,xo.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(yv=n,r||this.options.forceAutoScrollFallback||lm||Lh||yg){D1(n,this.options,a,r);var l=Yh(a,!0);W2&&(!Jp||s!==T1||o!==O1)&&(Jp&&Q4(),Jp=setInterval(function(){var c=Yh(document.elementFromPoint(s,o),!0);c!==l&&(l=c,B0()),D1(n,i.options,c,r)},10),T1=s,O1=o)}else{if(!this.options.bubbleScroll||Yh(a,!0)===Rc()){B0();return}D1(n,this.options,Yh(a,!1),!1)}}},Tu(t,{pluginName:"scroll",initializeByDefault:!0})}function B0(){xo.forEach(function(t){clearInterval(t.pid)}),xo=[]}function Q4(){clearInterval(Jp)}var D1=tE(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Rc(),c=!1,f;H2!==n&&(H2=n,B0(),Xp=e.scroll,f=e.scrollFn,Xp===!0&&(Xp=Yh(n,!0)));var p=0,y=Xp;do{var m=y,C=bs(m),S=C.top,T=C.bottom,O=C.left,D=C.right,N=C.width,U=C.height,W=void 0,ee=void 0,te=m.scrollWidth,V=m.scrollHeight,Y=Zn(m),de=m.scrollLeft,$=m.scrollTop;m===l?(W=N<te&&(Y.overflowX==="auto"||Y.overflowX==="scroll"||Y.overflowX==="visible"),ee=U<V&&(Y.overflowY==="auto"||Y.overflowY==="scroll"||Y.overflowY==="visible")):(W=N<te&&(Y.overflowX==="auto"||Y.overflowX==="scroll"),ee=U<V&&(Y.overflowY==="auto"||Y.overflowY==="scroll"));var H=W&&(Math.abs(D-i)<=o&&de+N<te)-(Math.abs(O-i)<=o&&!!de),le=ee&&(Math.abs(T-s)<=o&&$+U<V)-(Math.abs(S-s)<=o&&!!$);if(!xo[p])for(var ae=0;ae<=p;ae++)xo[ae]||(xo[ae]={});(xo[p].vx!=H||xo[p].vy!=le||xo[p].el!==m)&&(xo[p].el=m,xo[p].vx=H,xo[p].vy=le,clearInterval(xo[p].pid),(H!=0||le!=0)&&(c=!0,xo[p].pid=setInterval((function(){r&&this.layer===0&&wr.active._onTouchMove(yv);var z=xo[this.layer].vy?xo[this.layer].vy*a:0,B=xo[this.layer].vx?xo[this.layer].vx*a:0;typeof f=="function"&&f.call(wr.dragged.parentNode[Fa],B,z,t,yv,xo[this.layer].el)!=="continue"||nE(xo[this.layer].el,B,z)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&y!==l&&(y=Yh(y,!1)));W2=c}},30),lE=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(f.clientX,f.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function r_(){}r_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=ap(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:lE};Tu(r_,{pluginName:"revertOnSpill"});function i_(){}i_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:lE};Tu(i_,{pluginName:"removeOnSpill"});var Su;function wG(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;Su=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,f=this.options;if(i&&i!==c){var p=Su;s(i)!==!1?(Is(i,f.swapClass,!0),Su=i):Su=null,p&&p!==Su&&Is(p,f.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;Su&&Is(Su,a.swapClass,!1),Su&&(a.swap||i&&i.options.swap)&&s!==Su&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),xG(s,Su),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){Su=null}},Tu(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Su}}})}function xG(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=qs(t),s=qs(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Mr=[],tu=[],Ip,Xu,Np=!1,kl=!1,Ad=!1,Xi,Bp,n0;function LG(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?oi(document,"pointerup",this._deselectMultiDrag):(oi(document,"mouseup",this._deselectMultiDrag),oi(document,"touchend",this._deselectMultiDrag)),oi(document,"keydown",this._checkKeyDown),oi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Mr.length&&Xu===e?Mr.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;Xi=r},delayEnded:function(){this.isMultiDrag=~Mr.indexOf(Xi)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Mr.length;s++)tu.push(n_(Mr[s])),tu[s].sortableIndex=Mr[s].sortableIndex,tu[s].draggable=!1,tu[s].style["will-change"]="",Is(tu[s],this.options.selectedClass,!1),Mr[s]===Xi&&Is(tu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Mr.length&&Xu===r&&(e5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(e5(!1,i),tu.forEach(function(o){Zn(o,"display","")}),r(),n0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(tu.forEach(function(o){Zn(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),n0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Xu&&Xu.multiDrag._deselectMultiDrag(),Mr.forEach(function(r){r.sortableIndex=qs(r)}),Mr=Mr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Ad=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Mr.forEach(function(o){o!==Xi&&Zn(o,"position","absolute")});var s=bs(Xi,!1,!0,!0);Mr.forEach(function(o){o!==Xi&&Z4(o,s)}),kl=!0,Np=!0}i.animateAll(function(){kl=!1,Np=!1,r.options.animation&&Mr.forEach(function(o){S1(o)}),r.options.sort&&r0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;kl&&~Mr.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Mr.length>1&&(Mr.forEach(function(a){s.addAnimationState({target:a,rect:kl?bs(a):o}),S1(a),a.fromRect=o,r.removeAnimationState(a)}),kl=!1,CG(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),Np=!1,c.animation&&Mr.length>1&&(kl||!i&&!o.options.sort&&!l)){var f=bs(Xi,!1,!0,!0);Mr.forEach(function(y){y!==Xi&&(Z4(y,f),a.appendChild(y))}),kl=!0}if(!i)if(kl||r0(),Mr.length>1){var p=n0;o._showClone(r),o.options.animation&&!n0&&p&&tu.forEach(function(y){o.addAnimationState({target:y,rect:Bp}),y.fromRect=Bp,y.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Mr.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Bp=Tu({},r);var o=Gf(Xi,!0);Bp.top-=o.f,Bp.left-=o.e}},dragOverAnimationComplete:function(){kl&&(kl=!1,r0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,f=c||this.sortable;if(r){var p=this.options,y=s.children;if(!Ad)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Is(Xi,p.selectedClass,!~Mr.indexOf(Xi)),~Mr.indexOf(Xi))Mr.splice(Mr.indexOf(Xi),1),Ip=null,Zp({sortable:o,rootEl:i,name:"deselect",targetEl:Xi});else{if(Mr.push(Xi),Zp({sortable:o,rootEl:i,name:"select",targetEl:Xi}),r.shiftKey&&Ip&&o.el.contains(Ip)){var m=qs(Ip),C=qs(Xi);if(~m&&~C&&m!==C){var S,T;for(C>m?(T=m,S=C):(T=C,S=m+1);T<S;T++)~Mr.indexOf(y[T])||(Is(y[T],p.selectedClass,!0),Mr.push(y[T]),Zp({sortable:o,rootEl:i,name:"select",targetEl:y[T]}))}}else Ip=Xi;Xu=f}if(Ad&&this.isMultiDrag){if(kl=!1,(s[Fa].options.sort||s!==i)&&Mr.length>1){var O=bs(Xi),D=qs(Xi,":not(."+this.options.selectedClass+")");if(!Np&&p.animation&&(Xi.thisAnimationDuration=null),f.captureAnimationState(),!Np&&(p.animation&&(Xi.fromRect=O,Mr.forEach(function(U){if(U.thisAnimationDuration=null,U!==Xi){var W=kl?bs(U):O;U.fromRect=W,f.addAnimationState({target:U,rect:W})}})),r0(),Mr.forEach(function(U){y[D]?s.insertBefore(U,y[D]):s.appendChild(U),D++}),l===qs(Xi))){var N=!1;Mr.forEach(function(U){if(U.sortableIndex!==qs(U)){N=!0;return}}),N&&a("update")}Mr.forEach(function(U){S1(U)}),f.animateAll()}Xu=f}(i===s||c&&c.lastPutMode!=="clone")&&tu.forEach(function(U){U.parentNode&&U.parentNode.removeChild(U)})}},nullingGlobal:function(){this.isMultiDrag=Ad=!1,tu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Qr(document,"pointerup",this._deselectMultiDrag),Qr(document,"mouseup",this._deselectMultiDrag),Qr(document,"touchend",this._deselectMultiDrag),Qr(document,"keydown",this._checkKeyDown),Qr(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Ad<"u"&&Ad)&&Xu===this.sortable&&!(n&&Qu(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Mr.length;){var r=Mr[0];Is(r,this.options.selectedClass,!1),Mr.shift(),Zp({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Tu(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[Fa];!r||!r.options.multiDrag||~Mr.indexOf(n)||(Xu&&Xu!==r&&(Xu.multiDrag._deselectMultiDrag(),Xu=r),Is(n,r.options.selectedClass,!0),Mr.push(n))},deselect:function(n){var r=n.parentNode[Fa],i=Mr.indexOf(n);!r||!r.options.multiDrag||!~i||(Is(n,r.options.selectedClass,!1),Mr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Mr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;kl&&s!==Xi?o=-1:kl?o=qs(s,":not(."+n.options.selectedClass+")"):o=qs(s),i.push({multiDragElement:s,index:o})}),{items:qW(Mr),clones:[].concat(tu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function CG(t,e){Mr.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function e5(t,e){tu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function r0(){Mr.forEach(function(t){t!==Xi&&t.parentNode&&t.parentNode.removeChild(t)})}wr.mount(new _G);wr.mount(i_,r_);const SG=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:LG,Sortable:wr,Swap:wG,default:wr},Symbol.toStringTag,{value:"Module"})),EG=mS(SG);(function(t,e){(function(r,i){t.exports=i(VW,EG)})(typeof self<"u"?self:Zo,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var f in a)o.d(c,f,(function(p){return a[p]}).bind(null,f));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,f){if(a(l),c===void 0)return l;switch(f){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,y){return l.call(c,p,y)};case 3:return function(p,y,m){return l.call(c,p,y,m)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(y){try{return l(y)}catch{return f.slice()}};i.exports.f=function(m){return f&&c.call(m)=="[object Window]"?p(m):l(a(m))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),f=o("fc6a"),p=o("c04e"),y=o("5135"),m=o("0cfb"),C=Object.getOwnPropertyDescriptor;s.f=a?C:function(T,O){if(T=f(T),O=p(O,!0),m)try{return C(T,O)}catch{}if(y(T,O))return c(!l.f.call(T,O),T[O])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),f=o("ae40"),p=c("reduce"),y=f("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!y},{reduce:function(C){return l(this,C,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,f){var p=c.exec;if(typeof p=="function"){var y=p.call(c,f);if(typeof y!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return y}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,f)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),f=o("9112");for(var p in l){var y=a[p],m=y&&y.prototype;if(m&&m.forEach!==c)try{f(m,"forEach",c)}catch{m.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),f=l("forEach"),p=c("forEach");i.exports=!f||!p?function(m){return a(this,m,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var f=0,p={next:function(){return{done:!!f++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(y,m){if(!m&&!c)return!1;var C=!1;try{var S={};S[l]=function(){return{next:function(){return{done:C=!0}}}},y(S)}catch{}return C}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),f=l("species");i.exports=function(p){return c>=51||!a(function(){var y=[],m=y.constructor={};return m[f]=function(){return{foo:1}},y[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(f,p){var y=a(f);return y<0?l(y+p,0):c(y,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),f=o("6eeb"),p=o("ce4e"),y=o("e893"),m=o("94ca");i.exports=function(C,S){var T=C.target,O=C.global,D=C.stat,N,U,W,ee,te,V;if(O?U=a:D?U=a[T]||p(T,{}):U=(a[T]||{}).prototype,U)for(W in S){if(te=S[W],C.noTargetGet?(V=l(U,W),ee=V&&V.value):ee=U[W],N=m(O?W:T+(D?".":"#")+W,C.forced),!N&&ee!==void 0){if(typeof te==typeof ee)continue;y(te,ee)}(C.sham||ee&&ee.sham)&&c(te,"sham",!0),f(U,W,te,C)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),f=o("ad6d"),p="toString",y=RegExp.prototype,m=y[p],C=c(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),S=m.name!=p;(C||S)&&a(RegExp.prototype,p,function(){var O=l(this),D=String(O.source),N=O.flags,U=String(N===void 0&&O instanceof RegExp&&!("flags"in y)?f.call(O):N);return"/"+D+"/"+U},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),f=o("5a34"),p=o("1d80"),y=o("ab13"),m=o("c430"),C="".startsWith,S=Math.min,T=y("startsWith"),O=!m&&!T&&!!function(){var D=l(String.prototype,"startsWith");return D&&!D.writable}();a({target:"String",proto:!0,forced:!O&&!T},{startsWith:function(N){var U=String(p(this));f(N);var W=c(S(arguments.length>1?arguments[1]:void 0,U.length)),ee=String(N);return C?C.call(U,ee,W):U.slice(W,W+ee.length)===ee}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,f=c&&c.versions,p=f&&f.v8,y,m;p?(y=p.split("."),m=y[0]+y[1]):l&&(y=l.match(/Edge\/(\d+)/),(!y||y[1]>=74)&&(y=l.match(/Chrome\/(\d+)/),y&&(m=y[1]))),i.exports=m&&+m},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),f=c("iterator");i.exports=function(p){if(p!=null)return p[f]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),f=o("df75");i.exports=a?Object.defineProperties:function(y,m){c(y);for(var C=f(m),S=C.length,T=0,O;S>T;)l.f(y,O=C[T++],m[O]);return y}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),f="String Iterator",p=l.set,y=l.getterFor(f);c(String,"String",function(m){p(this,{type:f,string:String(m),index:0})},function(){var C=y(this),S=C.string,T=C.index,O;return T>=S.length?{value:void 0,done:!0}:(O=a(S,T),C.index+=O.length,{value:O,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(f){return l(f)=="String"?c.call(f,""):Object(f)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),f=a("unscopables"),p=Array.prototype;p[f]==null&&c.f(p,f,{configurable:!0,value:l(null)}),i.exports=function(y){p[f][y]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),f=c("match");i.exports=function(p){var y;return a(p)&&((y=p[f])!==void 0?!!y:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),f=function(p){return function(y,m,C){var S=a(y),T=l(S.length),O=c(C,T),D;if(p&&m!=m){for(;T>O;)if(D=S[O++],D!=D)return!0}else for(;T>O;O++)if((p||O in S)&&S[O]===m)return p||O||0;return!p&&-1}};i.exports={includes:f(!0),indexOf:f(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),f=o("ae40"),p=c("filter"),y=f("filter");a({target:"Array",proto:!0,forced:!p||!y},{filter:function(C){return l(this,C,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),f=o("e95a"),p=o("50c4"),y=o("8418"),m=o("35a1");i.exports=function(S){var T=l(S),O=typeof this=="function"?this:Array,D=arguments.length,N=D>1?arguments[1]:void 0,U=N!==void 0,W=m(T),ee=0,te,V,Y,de,$,H;if(U&&(N=a(N,D>2?arguments[2]:void 0,2)),W!=null&&!(O==Array&&f(W)))for(de=W.call(T),$=de.next,V=new O;!(Y=$.call(de)).done;ee++)H=U?c(de,N,[Y.value,ee],!0):Y.value,y(V,ee,H);else for(te=p(T.length),V=new O(te);te>ee;ee++)H=U?N(T[ee],ee):T[ee],y(V,ee,H);return V.length=ee,V}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(f){return l(f)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),f=o("50c4"),p=o("a691"),y=o("1d80"),m=o("8aa5"),C=o("14c3"),S=Math.max,T=Math.min,O=Math.floor,D=/\$([$&'`]|\d\d?|<[^>]*>)/g,N=/\$([$&'`]|\d\d?)/g,U=function(W){return W===void 0?W:String(W)};a("replace",2,function(W,ee,te,V){var Y=V.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,de=V.REPLACE_KEEPS_$0,$=Y?"$":"$0";return[function(ae,z){var B=y(this),X=ae==null?void 0:ae[W];return X!==void 0?X.call(ae,B,z):ee.call(String(B),ae,z)},function(le,ae){if(!Y&&de||typeof ae=="string"&&ae.indexOf($)===-1){var z=te(ee,le,this,ae);if(z.done)return z.value}var B=l(le),X=String(this),K=typeof ae=="function";K||(ae=String(ae));var ye=B.global;if(ye){var Te=B.unicode;B.lastIndex=0}for(var Ue=[];;){var J=C(B,X);if(J===null||(Ue.push(J),!ye))break;var ie=String(J[0]);ie===""&&(B.lastIndex=m(X,f(B.lastIndex),Te))}for(var se="",pe=0,we=0;we<Ue.length;we++){J=Ue[we];for(var be=String(J[0]),Ae=S(T(p(J.index),X.length),0),Ee=[],Je=1;Je<J.length;Je++)Ee.push(U(J[Je]));var gt=J.groups;if(K){var _t=[be].concat(Ee,Ae,X);gt!==void 0&&_t.push(gt);var ue=String(ae.apply(void 0,_t))}else ue=H(be,X,Ae,Ee,gt,ae);Ae>=pe&&(se+=X.slice(pe,Ae)+ue,pe=Ae+be.length)}return se+X.slice(pe)}];function H(le,ae,z,B,X,K){var ye=z+le.length,Te=B.length,Ue=N;return X!==void 0&&(X=c(X),Ue=D),ee.call(K,Ue,function(J,ie){var se;switch(ie.charAt(0)){case"$":return"$";case"&":return le;case"`":return ae.slice(0,z);case"'":return ae.slice(ye);case"<":se=X[ie.slice(1,-1)];break;default:var pe=+ie;if(pe===0)return J;if(pe>Te){var we=O(pe/10);return we===0?J:we<=Te?B[we-1]===void 0?ie.charAt(1):B[we-1]+ie.charAt(1):J}se=B[pe-1]}return se===void 0?"":se})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,f){return l[c]||(l[c]=f!==void 0?f:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),f=o("825a");i.exports=a("Reflect","ownKeys")||function(y){var m=l.f(f(y)),C=c.f;return C?m.concat(C(y)):m}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),f=o("50c4"),p=o("1c0b"),y=o("65f0");a({target:"Array",proto:!0},{flatMap:function(C){var S=c(this),T=f(S.length),O;return p(C),O=y(S,0),O.length=l(O,S,S,T,0,1,C,arguments.length>1?arguments[1]:void 0),O}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(f){return function(p,y){var m=String(l(p)),C=a(y),S=m.length,T,O;return C<0||C>=S?f?"":void 0:(T=m.charCodeAt(C),T<55296||T>56319||C+1===S||(O=m.charCodeAt(C+1))<56320||O>57343?f?m.charAt(C):T:f?m.slice(C,C+2):(T-55296<<10)+(O-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),f=c("species");i.exports=function(p,y){var m;return l(p)&&(m=p.constructor,typeof m=="function"&&(m===Array||l(m.prototype))?m=void 0:a(m)&&(m=m[f],m===null&&(m=void 0))),new(m===void 0?Array:m)(y===0?0:y)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),f=o("9112"),p=o("5135"),y=o("f772"),m=o("d012"),C=l.WeakMap,S,T,O,D=function(Y){return O(Y)?T(Y):S(Y,{})},N=function(Y){return function(de){var $;if(!c(de)||($=T(de)).type!==Y)throw TypeError("Incompatible receiver, "+Y+" required");return $}};if(a){var U=new C,W=U.get,ee=U.has,te=U.set;S=function(Y,de){return te.call(U,Y,de),de},T=function(Y){return W.call(U,Y)||{}},O=function(Y){return ee.call(U,Y)}}else{var V=y("state");m[V]=!0,S=function(Y,de){return f(Y,V,de),de},T=function(Y){return p(Y,V)?Y[V]:{}},O=function(Y){return p(Y,V)}}i.exports={set:S,get:T,has:O,enforce:D,getterFor:N}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),f=o("ce4e"),p=o("8925"),y=o("69f3"),m=y.get,C=y.enforce,S=String(String).split("String");(i.exports=function(T,O,D,N){var U=N?!!N.unsafe:!1,W=N?!!N.enumerable:!1,ee=N?!!N.noTargetGet:!1;if(typeof D=="function"&&(typeof O=="string"&&!c(D,"name")&&l(D,"name",O),C(D).source=S.join(typeof O=="string"?O:"")),T===a){W?T[O]=D:f(O,D);return}else U?!ee&&T[O]&&(W=!0):delete T[O];W?T[O]=D:l(T,O,D)})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),f=o("d1e7").f,p=function(y){return function(m){for(var C=c(m),S=l(C),T=S.length,O=0,D=[],N;T>O;)N=S[O++],(!a||f.call(C,N))&&D.push(y?[N,C[N]]:C[N]);return D}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),f=o("9bf2").f;i.exports=function(p){var y=a.Symbol||(a.Symbol={});l(y,p)||f(y,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),f=o("d012"),p=o("1be4"),y=o("cc12"),m=o("f772"),C=">",S="<",T="prototype",O="script",D=m("IE_PROTO"),N=function(){},U=function(Y){return S+O+C+Y+S+"/"+O+C},W=function(Y){Y.write(U("")),Y.close();var de=Y.parentWindow.Object;return Y=null,de},ee=function(){var Y=y("iframe"),de="java"+O+":",$;return Y.style.display="none",p.appendChild(Y),Y.src=String(de),$=Y.contentWindow.document,$.open(),$.write(U("document.F=Object")),$.close(),$.F},te,V=function(){try{te=document.domain&&new ActiveXObject("htmlfile")}catch{}V=te?W(te):ee();for(var Y=c.length;Y--;)delete V[T][c[Y]];return V()};f[D]=!0,i.exports=Object.create||function(de,$){var H;return de!==null?(N[T]=a(de),H=new N,N[T]=null,H[D]=de):H=V(),$===void 0?H:l(H,$)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),f=o("d2bb"),p=o("d44e"),y=o("9112"),m=o("6eeb"),C=o("b622"),S=o("c430"),T=o("3f8c"),O=o("ae93"),D=O.IteratorPrototype,N=O.BUGGY_SAFARI_ITERATORS,U=C("iterator"),W="keys",ee="values",te="entries",V=function(){return this};i.exports=function(Y,de,$,H,le,ae,z){l($,de,H);var B=function(we){if(we===le&&Ue)return Ue;if(!N&&we in ye)return ye[we];switch(we){case W:return function(){return new $(this,we)};case ee:return function(){return new $(this,we)};case te:return function(){return new $(this,we)}}return function(){return new $(this)}},X=de+" Iterator",K=!1,ye=Y.prototype,Te=ye[U]||ye["@@iterator"]||le&&ye[le],Ue=!N&&Te||B(le),J=de=="Array"&&ye.entries||Te,ie,se,pe;if(J&&(ie=c(J.call(new Y)),D!==Object.prototype&&ie.next&&(!S&&c(ie)!==D&&(f?f(ie,D):typeof ie[U]!="function"&&y(ie,U,V)),p(ie,X,!0,!0),S&&(T[X]=V))),le==ee&&Te&&Te.name!==ee&&(K=!0,Ue=function(){return Te.call(this)}),(!S||z)&&ye[U]!==Ue&&y(ye,U,Ue),T[de]=Ue,le)if(se={values:B(ee),keys:ae?Ue:B(W),entries:B(te)},z)for(pe in se)(N||K||!(pe in ye))&&m(ye,pe,se[pe]);else a({target:de,proto:!0,forced:N||K},se);return se}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(f,p,y){var m=a(p);m in f?l.f(f,m,c(0,y)):f[m]=y}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(f,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function f(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==f&&document.currentScript)return document.currentScript;try{throw new Error}catch(te){var y=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,m=/@([^@]*):(\d+):(\d+)\s*$/ig,C=y.exec(te.stack)||m.exec(te.stack),S=C&&C[1]||!1,T=C&&C[2]||!1,O=document.location.href.replace(document.location.hash,""),D,N,U,W=document.getElementsByTagName("script");S===O&&(D=document.documentElement.outerHTML,N=new RegExp("(?:[^\\n]+?\\n){0,"+(T-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),U=D.replace(N,"$1").trim());for(var ee=0;ee<W.length;ee++)if(W[ee].readyState==="interactive"||W[ee].src===S||S===O&&W[ee].innerHTML&&W[ee].innerHTML.trim()===U)return W[ee];return null}}return f})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,f){return c+(f?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(f,p,y){return l.f(f,p,c(1,y))}:function(f,p,y){return f[p]=y,f}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,f=String.prototype.replace,p=c,y=function(){var T=/a/,O=/b*/g;return c.call(T,"a"),c.call(O,"a"),T.lastIndex!==0||O.lastIndex!==0}(),m=l.UNSUPPORTED_Y||l.BROKEN_CARET,C=/()??/.exec("")[1]!==void 0,S=y||C||m;S&&(p=function(O){var D=this,N,U,W,ee,te=m&&D.sticky,V=a.call(D),Y=D.source,de=0,$=O;return te&&(V=V.replace("y",""),V.indexOf("g")===-1&&(V+="g"),$=String(O).slice(D.lastIndex),D.lastIndex>0&&(!D.multiline||D.multiline&&O[D.lastIndex-1]!==`
`)&&(Y="(?: "+Y+")",$=" "+$,de++),U=new RegExp("^(?:"+Y+")",V)),C&&(U=new RegExp("^"+Y+"$(?!\\s)",V)),y&&(N=D.lastIndex),W=c.call(te?U:D,$),te?W?(W.input=W.input.slice(de),W[0]=W[0].slice(de),W.index=D.lastIndex,D.lastIndex+=W[0].length):D.lastIndex=0:y&&W&&(D.lastIndex=D.global?W.index+W[0].length:N),C&&W&&W.length>1&&f.call(W[0],U,function(){for(ee=1;ee<arguments.length-2;ee++)arguments[ee]===void 0&&(W[ee]=void 0)}),W}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(C,S){var T=p[f(C)];return T==m?!0:T==y?!1:typeof S=="function"?a(S):!!S},f=c.normalize=function(C){return String(C).replace(l,".").toLowerCase()},p=c.data={},y=c.NATIVE="N",m=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),f=o("861d"),p=o("7b0b"),y=o("50c4"),m=o("8418"),C=o("65f0"),S=o("1dde"),T=o("b622"),O=o("2d00"),D=T("isConcatSpreadable"),N=9007199254740991,U="Maximum allowed index exceeded",W=O>=51||!l(function(){var Y=[];return Y[D]=!1,Y.concat()[0]!==Y}),ee=S("concat"),te=function(Y){if(!f(Y))return!1;var de=Y[D];return de!==void 0?!!de:c(Y)},V=!W||!ee;a({target:"Array",proto:!0,forced:V},{concat:function(de){var $=p(this),H=C($,0),le=0,ae,z,B,X,K;for(ae=-1,B=arguments.length;ae<B;ae++)if(K=ae===-1?$:arguments[ae],te(K)){if(X=y(K.length),le+X>N)throw TypeError(U);for(z=0;z<X;z++,le++)z in K&&m(H,le,K[z])}else{if(le>=N)throw TypeError(U);m(H,le++,K)}return H.length=le,H}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,f,p){try{return p?c(a(f)[0],f[1]):c(f)}catch(m){var y=l.return;throw y!==void 0&&a(y.call(l)),m}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),f=o("c04e"),p=Object.defineProperty;s.f=a?p:function(m,C,S){if(c(m),C=f(C,!0),c(S),l)try{return p(m,C,S)}catch{}if("get"in S||"set"in S)throw TypeError("Accessors not supported");return"value"in S&&(m[C]=S.value),m}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),f=o("d44e"),p=o("3f8c"),y=function(){return this};i.exports=function(m,C,S){var T=C+" Iterator";return m.prototype=l(a,{next:c(1,S)}),f(m,T,!1,!0),p[T]=y,m}},"9f7f":function(i,s,o){var a=o("d039");function l(c,f){return RegExp(c,f)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),f=function(p,y,m,C,S,T,O,D){for(var N=S,U=0,W=O?c(O,D,3):!1,ee;U<C;){if(U in m){if(ee=W?W(m[U],U,y):m[U],T>0&&a(ee))N=f(p,y,ee,l(ee.length),N,T-1)-1;else{if(N>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[N]=ee}N++}U++}return N};i.exports=f},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),f=o("50c4"),p=o("7b0b"),y=o("65f0"),m=o("8418"),C=o("1dde"),S=o("ae40"),T=C("splice"),O=S("splice",{ACCESSORS:!0,0:0,1:2}),D=Math.max,N=Math.min,U=9007199254740991,W="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!T||!O},{splice:function(te,V){var Y=p(this),de=f(Y.length),$=l(te,de),H=arguments.length,le,ae,z,B,X,K;if(H===0?le=ae=0:H===1?(le=0,ae=de-$):(le=H-2,ae=N(D(c(V),0),de-$)),de+le-ae>U)throw TypeError(W);for(z=y(Y,ae),B=0;B<ae;B++)X=$+B,X in Y&&m(z,B,Y[X]);if(z.length=ae,le<ae){for(B=$;B<de-ae;B++)X=B+ae,K=B+le,X in Y?Y[K]=Y[X]:delete Y[K];for(B=de;B>de-ae+le;B--)delete Y[B-1]}else if(le>ae)for(B=de-ae;B>$;B--)X=B+ae-1,K=B+le-1,X in Y?Y[K]=Y[X]:delete Y[K];for(B=0;B<le;B++)Y[B+$]=arguments[B+2];return Y.length=de-ae+le,z}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),f=o("c430"),p=o("83ab"),y=o("4930"),m=o("fdbf"),C=o("d039"),S=o("5135"),T=o("e8b5"),O=o("861d"),D=o("825a"),N=o("7b0b"),U=o("fc6a"),W=o("c04e"),ee=o("5c6c"),te=o("7c73"),V=o("df75"),Y=o("241c"),de=o("057f"),$=o("7418"),H=o("06cf"),le=o("9bf2"),ae=o("d1e7"),z=o("9112"),B=o("6eeb"),X=o("5692"),K=o("f772"),ye=o("d012"),Te=o("90e3"),Ue=o("b622"),J=o("e538"),ie=o("746f"),se=o("d44e"),pe=o("69f3"),we=o("b727").forEach,be=K("hidden"),Ae="Symbol",Ee="prototype",Je=Ue("toPrimitive"),gt=pe.set,_t=pe.getterFor(Ae),ue=Object[Ee],oe=l.Symbol,ce=c("JSON","stringify"),Q=H.f,Pe=le.f,Ve=de.f,Qe=ae.f,ot=X("symbols"),at=X("op-symbols"),pt=X("string-to-symbol-registry"),Ft=X("symbol-to-string-registry"),Bt=X("wks"),Zt=l.QObject,ln=!Zt||!Zt[Ee]||!Zt[Ee].findChild,un=p&&C(function(){return te(Pe({},"a",{get:function(){return Pe(this,"a",{value:7}).a}})).a!=7})?function(mn,Jt,cn){var qn=Q(ue,Jt);qn&&delete ue[Jt],Pe(mn,Jt,cn),qn&&mn!==ue&&Pe(ue,Jt,qn)}:Pe,Sn=function(mn,Jt){var cn=ot[mn]=te(oe[Ee]);return gt(cn,{type:Ae,tag:mn,description:Jt}),p||(cn.description=Jt),cn},qe=m?function(mn){return typeof mn=="symbol"}:function(mn){return Object(mn)instanceof oe},it=function(Jt,cn,qn){Jt===ue&&it(at,cn,qn),D(Jt);var Kn=W(cn,!0);return D(qn),S(ot,Kn)?(qn.enumerable?(S(Jt,be)&&Jt[be][Kn]&&(Jt[be][Kn]=!1),qn=te(qn,{enumerable:ee(0,!1)})):(S(Jt,be)||Pe(Jt,be,ee(1,{})),Jt[be][Kn]=!0),un(Jt,Kn,qn)):Pe(Jt,Kn,qn)},Ze=function(Jt,cn){D(Jt);var qn=U(cn),Kn=V(qn).concat(vn(qn));return we(Kn,function(rr){(!p||Yt.call(qn,rr))&&it(Jt,rr,qn[rr])}),Jt},Ut=function(Jt,cn){return cn===void 0?te(Jt):Ze(te(Jt),cn)},Yt=function(Jt){var cn=W(Jt,!0),qn=Qe.call(this,cn);return this===ue&&S(ot,cn)&&!S(at,cn)?!1:qn||!S(this,cn)||!S(ot,cn)||S(this,be)&&this[be][cn]?qn:!0},Ln=function(Jt,cn){var qn=U(Jt),Kn=W(cn,!0);if(!(qn===ue&&S(ot,Kn)&&!S(at,Kn))){var rr=Q(qn,Kn);return rr&&S(ot,Kn)&&!(S(qn,be)&&qn[be][Kn])&&(rr.enumerable=!0),rr}},gn=function(Jt){var cn=Ve(U(Jt)),qn=[];return we(cn,function(Kn){!S(ot,Kn)&&!S(ye,Kn)&&qn.push(Kn)}),qn},vn=function(Jt){var cn=Jt===ue,qn=Ve(cn?at:U(Jt)),Kn=[];return we(qn,function(rr){S(ot,rr)&&(!cn||S(ue,rr))&&Kn.push(ot[rr])}),Kn};if(y||(oe=function(){if(this instanceof oe)throw TypeError("Symbol is not a constructor");var Jt=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),cn=Te(Jt),qn=function(Kn){this===ue&&qn.call(at,Kn),S(this,be)&&S(this[be],cn)&&(this[be][cn]=!1),un(this,cn,ee(1,Kn))};return p&&ln&&un(ue,cn,{configurable:!0,set:qn}),Sn(cn,Jt)},B(oe[Ee],"toString",function(){return _t(this).tag}),B(oe,"withoutSetter",function(mn){return Sn(Te(mn),mn)}),ae.f=Yt,le.f=it,H.f=Ln,Y.f=de.f=gn,$.f=vn,J.f=function(mn){return Sn(Ue(mn),mn)},p&&(Pe(oe[Ee],"description",{configurable:!0,get:function(){return _t(this).description}}),f||B(ue,"propertyIsEnumerable",Yt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:oe}),we(V(Bt),function(mn){ie(mn)}),a({target:Ae,stat:!0,forced:!y},{for:function(mn){var Jt=String(mn);if(S(pt,Jt))return pt[Jt];var cn=oe(Jt);return pt[Jt]=cn,Ft[cn]=Jt,cn},keyFor:function(Jt){if(!qe(Jt))throw TypeError(Jt+" is not a symbol");if(S(Ft,Jt))return Ft[Jt]},useSetter:function(){ln=!0},useSimple:function(){ln=!1}}),a({target:"Object",stat:!0,forced:!y,sham:!p},{create:Ut,defineProperty:it,defineProperties:Ze,getOwnPropertyDescriptor:Ln}),a({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:gn,getOwnPropertySymbols:vn}),a({target:"Object",stat:!0,forced:C(function(){$.f(1)})},{getOwnPropertySymbols:function(Jt){return $.f(N(Jt))}}),ce){var jn=!y||C(function(){var mn=oe();return ce([mn])!="[null]"||ce({a:mn})!="{}"||ce(Object(mn))!="{}"});a({target:"JSON",stat:!0,forced:jn},{stringify:function(Jt,cn,qn){for(var Kn=[Jt],rr=1,zn;arguments.length>rr;)Kn.push(arguments[rr++]);if(zn=cn,!(!O(cn)&&Jt===void 0||qe(Jt)))return T(cn)||(cn=function(_r,Ri){if(typeof zn=="function"&&(Ri=zn.call(this,_r,Ri)),!qe(Ri))return Ri}),Kn[1]=cn,ce.apply(null,Kn)}})}oe[Ee][Je]||z(oe[Ee],Je,oe[Ee].valueOf),se(oe,Ae),ye[be]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),f=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:f},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var f=[][l];return!!f&&a(function(){f.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var f=/./;try{"/./"[c](f)}catch{try{return f[l]=!1,"/./"[c](f)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),f=Object.defineProperty,p={},y=function(m){throw m};i.exports=function(m,C){if(c(p,m))return p[m];C||(C={});var S=[][m],T=c(C,"ACCESSORS")?C.ACCESSORS:!1,O=c(C,0)?C[0]:y,D=c(C,1)?C[1]:void 0;return p[m]=!!S&&!l(function(){if(T&&!a)return!0;var N={length:-1};T?f(N,1,{enumerable:!0,get:y}):N[1]=1,S.call(N,O,D)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),f=o("b622"),p=o("c430"),y=f("iterator"),m=!1,C=function(){return this},S,T,O;[].keys&&(O=[].keys(),"next"in O?(T=a(a(O)),T!==Object.prototype&&(S=T)):m=!0),S==null&&(S={}),!p&&!c(S,y)&&l(S,y,C),i.exports={IteratorPrototype:S,BUGGY_SAFARI_ITERATORS:m}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,f=c.toString,p=/^\s*function ([^ (]*)/,y="name";a&&!(y in c)&&l(c,y,{configurable:!0,get:function(){try{return f.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),f=o("90e3"),p=o("4930"),y=o("fdbf"),m=l("wks"),C=a.Symbol,S=y?C:C&&C.withoutSetter||f;i.exports=function(T){return c(m,T)||(p&&c(C,T)?m[T]=C[T]:m[T]=S("Symbol."+T)),m[T]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),f=o("d039"),p=f(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(m){return c(l(m))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),f=o("50c4"),p=o("65f0"),y=[].push,m=function(C){var S=C==1,T=C==2,O=C==3,D=C==4,N=C==6,U=C==5||N;return function(W,ee,te,V){for(var Y=c(W),de=l(Y),$=a(ee,te,3),H=f(de.length),le=0,ae=V||p,z=S?ae(W,H):T?ae(W,0):void 0,B,X;H>le;le++)if((U||le in de)&&(B=de[le],X=$(B,le,Y),C)){if(S)z[le]=X;else if(X)switch(C){case 3:return!0;case 5:return B;case 6:return le;case 2:y.call(z,B)}else if(D)return!1}return N?-1:O||D?D:z}};i.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var f,p;if(c&&typeof(f=l.toString)=="function"&&!a(p=f.call(l))||typeof(f=l.valueOf)=="function"&&!a(p=f.call(l))||!c&&typeof(f=l.toString)=="function"&&!a(p=f.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",f=a[c]||l(c,{});i.exports=f},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),f=o("ae40"),p="findIndex",y=!0,m=f(p);p in[]&&Array(1)[p](function(){y=!1}),a({target:"Array",proto:!0,forced:y||!m},{findIndex:function(S){return l(this,S,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),f=o("ae40"),p=[].indexOf,y=!!p&&1/[1].indexOf(1,-0)<0,m=c("indexOf"),C=f("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:y||!m||!C},{indexOf:function(T){return y?p.apply(this,arguments)||0:l(this,T,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,f=o("d012");i.exports=function(p,y){var m=l(p),C=0,S=[],T;for(T in m)!a(f,T)&&a(m,T)&&S.push(T);for(;y.length>C;)a(m,T=y[C++])&&(~c(S,T)||S.push(T));return S}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),f=o("ae40"),p=f("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,f=l(c)&&l(c.createElement);i.exports=function(p){return f?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,f){try{l(a,c,f)}catch{a[c]=f}return f}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(f){return typeof f=="function"?f:void 0};i.exports=function(f,p){return arguments.length<2?c(a[f])||c(l[f]):a[f]&&a[f][p]||l[f]&&l[f][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var y=l(this,p);return!!y&&y.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,f={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(f,[]),c=f instanceof Array}catch{}return function(m,C){return a(m),l(C),c?p.call(m,C):m.__proto__=C,m}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),f=c("toStringTag");i.exports=function(p,y,m){p&&!l(p=m?p:p.prototype,f)&&a(p,f,{configurable:!0,value:y})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),f=o("50c4"),p=function(y){return function(m,C,S,T){a(C);var O=l(m),D=c(O),N=f(O.length),U=y?N-1:0,W=y?-1:1;if(S<2)for(;;){if(U in D){T=D[U],U+=W;break}if(U+=W,y?U<0:N<=U)throw TypeError("Reduce of empty array with no initial value")}for(;y?U>=0:N>U;U+=W)U in D&&(T=C(T,D[U],U,O));return T}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),f=o("9263"),p=o("9112"),y=c("species"),m=!l(function(){var D=/./;return D.exec=function(){var N=[];return N.groups={a:"7"},N},"".replace(D,"$<a>")!=="7"}),C=function(){return"a".replace(/./,"$0")==="$0"}(),S=c("replace"),T=function(){return/./[S]?/./[S]("a","$0")==="":!1}(),O=!l(function(){var D=/(?:)/,N=D.exec;D.exec=function(){return N.apply(this,arguments)};var U="ab".split(D);return U.length!==2||U[0]!=="a"||U[1]!=="b"});i.exports=function(D,N,U,W){var ee=c(D),te=!l(function(){var le={};return le[ee]=function(){return 7},""[D](le)!=7}),V=te&&!l(function(){var le=!1,ae=/a/;return D==="split"&&(ae={},ae.constructor={},ae.constructor[y]=function(){return ae},ae.flags="",ae[ee]=/./[ee]),ae.exec=function(){return le=!0,null},ae[ee](""),!le});if(!te||!V||D==="replace"&&!(m&&C&&!T)||D==="split"&&!O){var Y=/./[ee],de=U(ee,""[D],function(le,ae,z,B,X){return ae.exec===f?te&&!X?{done:!0,value:Y.call(ae,z,B)}:{done:!0,value:le.call(z,ae,B)}:{done:!1}},{REPLACE_KEEPS_$0:C,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:T}),$=de[0],H=de[1];a(String.prototype,D,$),a(RegExp.prototype,ee,N==2?function(le,ae){return H.call(le,this,ae)}:function(le){return H.call(le,this)})}W&&p(RegExp.prototype[ee],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),f=o("ae40"),p=c("map"),y=f("map");a({target:"Array",proto:!0,forced:!p||!y},{map:function(C){return l(this,C,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),f=o("fc6a"),p=o("06cf"),y=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(C){for(var S=f(C),T=p.f,O=c(S),D={},N=0,U,W;O.length>N;)W=T(S,U=O[N++]),W!==void 0&&y(D,U,W);return D}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),f=o("9112"),p=o("b622"),y=p("iterator"),m=p("toStringTag"),C=c.values;for(var S in l){var T=a[S],O=T&&T.prototype;if(O){if(O[y]!==C)try{f(O,y,C)}catch{O[y]=C}if(O[m]||f(O,m,S),l[S]){for(var D in c)if(O[D]!==c[D])try{f(O,D,c[D])}catch{O[D]=c[D]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(f){return a(f,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),f=o("5135"),p=o("861d"),y=o("9bf2").f,m=o("e893"),C=c.Symbol;if(l&&typeof C=="function"&&(!("description"in C.prototype)||C().description!==void 0)){var S={},T=function(){var ee=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),te=this instanceof T?new C(ee):ee===void 0?C():C(ee);return ee===""&&(S[te]=!0),te};m(T,C);var O=T.prototype=C.prototype;O.constructor=T;var D=O.toString,N=String(C("test"))=="Symbol(test)",U=/^Symbol\((.*)\)[^)]+$/;y(O,"description",{configurable:!0,get:function(){var ee=p(this)?this.valueOf():this,te=D.call(ee);if(f(S,ee))return"";var V=N?te.slice(7,-1):te.replace(U,"$1");return V===""?void 0:V}}),a({global:!0,forced:!0},{Symbol:T})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),f=o("e177"),p=c("IE_PROTO"),y=Object.prototype;i.exports=f?Object.getPrototypeOf:function(m){return m=l(m),a(m,p)?m[p]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?y:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),f=o("69f3"),p=o("7dd0"),y="Array Iterator",m=f.set,C=f.getterFor(y);i.exports=p(Array,"Array",function(S,T){m(this,{type:y,target:a(S),index:0,kind:T})},function(){var S=C(this),T=S.target,O=S.kind,D=S.index++;return!T||D>=T.length?(S.target=void 0,{value:void 0,done:!0}):O=="keys"?{value:D,done:!1}:O=="values"?{value:T[D],done:!1}:{value:[D,T[D]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),f=o("06cf").f,p=o("83ab"),y=l(function(){f(1)}),m=!p||y;a({target:"Object",stat:!0,forced:m,sham:!p},{getOwnPropertyDescriptor:function(S,T){return f(c(S),T)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),f=o("9bf2");i.exports=function(p,y){for(var m=l(y),C=f.f,S=c.f,T=0;T<m.length;T++){var O=m[T];a(p,O)||C(p,O,S(y,O))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),f=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||f[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),f=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",y=function(m,C){try{return m[C]}catch{}};i.exports=a?l:function(m){var C,S,T;return m===void 0?"Undefined":m===null?"Null":typeof(S=y(C=Object(m),f))=="string"?S:p?l(C):(T=l(C))=="Object"&&typeof C.callee=="function"?"Arguments":T}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(f){return c[f]||(c[f]=l(f))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function f(qe,it,Ze){return it in qe?Object.defineProperty(qe,it,{value:Ze,enumerable:!0,configurable:!0,writable:!0}):qe[it]=Ze,qe}function p(qe,it){var Ze=Object.keys(qe);if(Object.getOwnPropertySymbols){var Ut=Object.getOwnPropertySymbols(qe);it&&(Ut=Ut.filter(function(Yt){return Object.getOwnPropertyDescriptor(qe,Yt).enumerable})),Ze.push.apply(Ze,Ut)}return Ze}function y(qe){for(var it=1;it<arguments.length;it++){var Ze=arguments[it]!=null?arguments[it]:{};it%2?p(Object(Ze),!0).forEach(function(Ut){f(qe,Ut,Ze[Ut])}):Object.getOwnPropertyDescriptors?Object.defineProperties(qe,Object.getOwnPropertyDescriptors(Ze)):p(Object(Ze)).forEach(function(Ut){Object.defineProperty(qe,Ut,Object.getOwnPropertyDescriptor(Ze,Ut))})}return qe}function m(qe){if(Array.isArray(qe))return qe}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function C(qe,it){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(qe)))){var Ze=[],Ut=!0,Yt=!1,Ln=void 0;try{for(var gn=qe[Symbol.iterator](),vn;!(Ut=(vn=gn.next()).done)&&(Ze.push(vn.value),!(it&&Ze.length===it));Ut=!0);}catch(jn){Yt=!0,Ln=jn}finally{try{!Ut&&gn.return!=null&&gn.return()}finally{if(Yt)throw Ln}}return Ze}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function S(qe,it){(it==null||it>qe.length)&&(it=qe.length);for(var Ze=0,Ut=new Array(it);Ze<it;Ze++)Ut[Ze]=qe[Ze];return Ut}function T(qe,it){if(qe){if(typeof qe=="string")return S(qe,it);var Ze=Object.prototype.toString.call(qe).slice(8,-1);if(Ze==="Object"&&qe.constructor&&(Ze=qe.constructor.name),Ze==="Map"||Ze==="Set")return Array.from(qe);if(Ze==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ze))return S(qe,it)}}function O(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(qe,it){return m(qe)||C(qe,it)||T(qe,it)||O()}function N(qe){if(Array.isArray(qe))return S(qe)}function U(qe){if(typeof Symbol<"u"&&Symbol.iterator in Object(qe))return Array.from(qe)}function W(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ee(qe){return N(qe)||U(qe)||T(qe)||W()}var te=o("a352"),V=o.n(te);function Y(qe){qe.parentElement!==null&&qe.parentElement.removeChild(qe)}function de(qe,it,Ze){var Ut=Ze===0?qe.children[0]:qe.children[Ze-1].nextSibling;qe.insertBefore(it,Ut)}var $=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function H(qe){var it=Object.create(null);return function(Ut){var Yt=it[Ut];return Yt||(it[Ut]=qe(Ut))}}var le=/-(\w)/g,ae=H(function(qe){return qe.replace(le,function(it,Ze){return Ze.toUpperCase()})});o("5db7"),o("73d9");var z=["Start","Add","Remove","Update","End"],B=["Choose","Unchoose","Sort","Filter","Clone"],X=["Move"],K=[X,z,B].flatMap(function(qe){return qe}).map(function(qe){return"on".concat(qe)}),ye={manage:X,manageAndEmit:z,emit:B};function Te(qe){return K.indexOf(qe)!==-1}o("caad"),o("2ca0");var Ue=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function J(qe){return Ue.includes(qe)}function ie(qe){return["transition-group","TransitionGroup"].includes(qe)}function se(qe){return["id","class","role","style"].includes(qe)||qe.startsWith("data-")||qe.startsWith("aria-")||qe.startsWith("on")}function pe(qe){return qe.reduce(function(it,Ze){var Ut=D(Ze,2),Yt=Ut[0],Ln=Ut[1];return it[Yt]=Ln,it},{})}function we(qe){var it=qe.$attrs,Ze=qe.componentData,Ut=Ze===void 0?{}:Ze,Yt=pe(Object.entries(it).filter(function(Ln){var gn=D(Ln,2),vn=gn[0];return gn[1],se(vn)}));return y(y({},Yt),Ut)}function be(qe){var it=qe.$attrs,Ze=qe.callBackBuilder,Ut=pe(Ae(it));Object.entries(Ze).forEach(function(Ln){var gn=D(Ln,2),vn=gn[0],jn=gn[1];ye[vn].forEach(function(mn){Ut["on".concat(mn)]=jn(mn)})});var Yt="[data-draggable]".concat(Ut.draggable||"");return y(y({},Ut),{},{draggable:Yt})}function Ae(qe){return Object.entries(qe).filter(function(it){var Ze=D(it,2),Ut=Ze[0];return Ze[1],!se(Ut)}).map(function(it){var Ze=D(it,2),Ut=Ze[0],Yt=Ze[1];return[ae(Ut),Yt]}).filter(function(it){var Ze=D(it,2),Ut=Ze[0];return Ze[1],!Te(Ut)})}o("c740");function Ee(qe,it){if(!(qe instanceof it))throw new TypeError("Cannot call a class as a function")}function Je(qe,it){for(var Ze=0;Ze<it.length;Ze++){var Ut=it[Ze];Ut.enumerable=Ut.enumerable||!1,Ut.configurable=!0,"value"in Ut&&(Ut.writable=!0),Object.defineProperty(qe,Ut.key,Ut)}}function gt(qe,it,Ze){return it&&Je(qe.prototype,it),qe}var _t=function(it){var Ze=it.el;return Ze},ue=function(it,Ze){return it.__draggable_context=Ze},oe=function(it){return it.__draggable_context},ce=function(){function qe(it){var Ze=it.nodes,Ut=Ze.header,Yt=Ze.default,Ln=Ze.footer,gn=it.root,vn=it.realList;Ee(this,qe),this.defaultNodes=Yt,this.children=[].concat(ee(Ut),ee(Yt),ee(Ln)),this.externalComponent=gn.externalComponent,this.rootTransition=gn.transition,this.tag=gn.tag,this.realList=vn}return gt(qe,[{key:"render",value:function(Ze,Ut){var Yt=this.tag,Ln=this.children,gn=this._isRootComponent,vn=gn?{default:function(){return Ln}}:Ln;return Ze(Yt,Ut,vn)}},{key:"updated",value:function(){var Ze=this.defaultNodes,Ut=this.realList;Ze.forEach(function(Yt,Ln){ue(_t(Yt),{element:Ut[Ln],index:Ln})})}},{key:"getUnderlyingVm",value:function(Ze){return oe(Ze)}},{key:"getVmIndexFromDomIndex",value:function(Ze,Ut){var Yt=this.defaultNodes,Ln=Yt.length,gn=Ut.children,vn=gn.item(Ze);if(vn===null)return Ln;var jn=oe(vn);if(jn)return jn.index;if(Ln===0)return 0;var mn=_t(Yt[0]),Jt=ee(gn).findIndex(function(cn){return cn===mn});return Ze<Jt?0:Ln}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),qe}(),Q=o("8bbf");function Pe(qe,it){var Ze=qe[it];return Ze?Ze():[]}function Ve(qe){var it=qe.$slots,Ze=qe.realList,Ut=qe.getKey,Yt=Ze||[],Ln=["header","footer"].map(function(cn){return Pe(it,cn)}),gn=D(Ln,2),vn=gn[0],jn=gn[1],mn=it.item;if(!mn)throw new Error("draggable element must have an item slot");var Jt=Yt.flatMap(function(cn,qn){return mn({element:cn,index:qn}).map(function(Kn){return Kn.key=Ut(cn),Kn.props=y(y({},Kn.props||{}),{},{"data-draggable":!0}),Kn})});if(Jt.length!==Yt.length)throw new Error("Item slot must have only one child");return{header:vn,footer:jn,default:Jt}}function Qe(qe){var it=ie(qe),Ze=!J(qe)&&!it;return{transition:it,externalComponent:Ze,tag:Ze?Object(Q.resolveComponent)(qe):it?Q.TransitionGroup:qe}}function ot(qe){var it=qe.$slots,Ze=qe.tag,Ut=qe.realList,Yt=qe.getKey,Ln=Ve({$slots:it,realList:Ut,getKey:Yt}),gn=Qe(Ze);return new ce({nodes:Ln,root:gn,realList:Ut})}function at(qe,it){var Ze=this;Object(Q.nextTick)(function(){return Ze.$emit(qe.toLowerCase(),it)})}function pt(qe){var it=this;return function(Ze,Ut){if(it.realList!==null)return it["onDrag".concat(qe)](Ze,Ut)}}function Ft(qe){var it=this,Ze=pt.call(this,qe);return function(Ut,Yt){Ze.call(it,Ut,Yt),at.call(it,qe,Ut)}}var Bt=null,Zt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(it){return it}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},ln=["update:modelValue","change"].concat(ee([].concat(ee(ye.manageAndEmit),ee(ye.emit)).map(function(qe){return qe.toLowerCase()}))),un=Object(Q.defineComponent)({name:"draggable",inheritAttrs:!1,props:Zt,emits:ln,data:function(){return{error:!1}},render:function(){try{this.error=!1;var it=this.$slots,Ze=this.$attrs,Ut=this.tag,Yt=this.componentData,Ln=this.realList,gn=this.getKey,vn=ot({$slots:it,tag:Ut,realList:Ln,getKey:gn});this.componentStructure=vn;var jn=we({$attrs:Ze,componentData:Yt});return vn.render(Q.h,jn)}catch(mn){return this.error=!0,Object(Q.h)("pre",{style:{color:"red"}},mn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&$.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var it=this;if(!this.error){var Ze=this.$attrs,Ut=this.$el,Yt=this.componentStructure;Yt.updated();var Ln=be({$attrs:Ze,callBackBuilder:{manageAndEmit:function(jn){return Ft.call(it,jn)},emit:function(jn){return at.bind(it,jn)},manage:function(jn){return pt.call(it,jn)}}}),gn=Ut.nodeType===1?Ut:Ut.parentElement;this._sortable=new V.a(gn,Ln),this.targetDomElement=gn,gn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var it=this.list;return it||this.modelValue},getKey:function(){var it=this.itemKey;return typeof it=="function"?it:function(Ze){return Ze[it]}}},watch:{$attrs:{handler:function(it){var Ze=this._sortable;Ze&&Ae(it).forEach(function(Ut){var Yt=D(Ut,2),Ln=Yt[0],gn=Yt[1];Ze.option(Ln,gn)})},deep:!0}},methods:{getUnderlyingVm:function(it){return this.componentStructure.getUnderlyingVm(it)||null},getUnderlyingPotencialDraggableComponent:function(it){return it.__draggable_component__},emitChanges:function(it){var Ze=this;Object(Q.nextTick)(function(){return Ze.$emit("change",it)})},alterList:function(it){if(this.list){it(this.list);return}var Ze=ee(this.modelValue);it(Ze),this.$emit("update:modelValue",Ze)},spliceList:function(){var it=arguments,Ze=function(Yt){return Yt.splice.apply(Yt,ee(it))};this.alterList(Ze)},updatePosition:function(it,Ze){var Ut=function(Ln){return Ln.splice(Ze,0,Ln.splice(it,1)[0])};this.alterList(Ut)},getRelatedContextFromMoveEvent:function(it){var Ze=it.to,Ut=it.related,Yt=this.getUnderlyingPotencialDraggableComponent(Ze);if(!Yt)return{component:Yt};var Ln=Yt.realList,gn={list:Ln,component:Yt};if(Ze!==Ut&&Ln){var vn=Yt.getUnderlyingVm(Ut)||{};return y(y({},vn),gn)}return gn},getVmIndexFromDomIndex:function(it){return this.componentStructure.getVmIndexFromDomIndex(it,this.targetDomElement)},onDragStart:function(it){this.context=this.getUnderlyingVm(it.item),it.item._underlying_vm_=this.clone(this.context.element),Bt=it.item},onDragAdd:function(it){var Ze=it.item._underlying_vm_;if(Ze!==void 0){Y(it.item);var Ut=this.getVmIndexFromDomIndex(it.newIndex);this.spliceList(Ut,0,Ze);var Yt={element:Ze,newIndex:Ut};this.emitChanges({added:Yt})}},onDragRemove:function(it){if(de(this.$el,it.item,it.oldIndex),it.pullMode==="clone"){Y(it.clone);return}var Ze=this.context,Ut=Ze.index,Yt=Ze.element;this.spliceList(Ut,1);var Ln={element:Yt,oldIndex:Ut};this.emitChanges({removed:Ln})},onDragUpdate:function(it){Y(it.item),de(it.from,it.item,it.oldIndex);var Ze=this.context.index,Ut=this.getVmIndexFromDomIndex(it.newIndex);this.updatePosition(Ze,Ut);var Yt={element:this.context.element,oldIndex:Ze,newIndex:Ut};this.emitChanges({moved:Yt})},computeFutureIndex:function(it,Ze){if(!it.element)return 0;var Ut=ee(Ze.to.children).filter(function(vn){return vn.style.display!=="none"}),Yt=Ut.indexOf(Ze.related),Ln=it.component.getVmIndexFromDomIndex(Yt),gn=Ut.indexOf(Bt)!==-1;return gn||!Ze.willInsertAfter?Ln:Ln+1},onDragMove:function(it,Ze){var Ut=this.move,Yt=this.realList;if(!Ut||!Yt)return!0;var Ln=this.getRelatedContextFromMoveEvent(it),gn=this.computeFutureIndex(Ln,it),vn=y(y({},this.context),{},{futureIndex:gn}),jn=y(y({},it),{},{relatedContext:Ln,draggedContext:vn});return Ut(jn,Ze)},onDragEnd:function(){Bt=null}}}),Sn=un;s.default=Sn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),f=o("23cb"),p=o("50c4"),y=o("fc6a"),m=o("8418"),C=o("b622"),S=o("1dde"),T=o("ae40"),O=S("slice"),D=T("slice",{ACCESSORS:!0,0:0,1:2}),N=C("species"),U=[].slice,W=Math.max;a({target:"Array",proto:!0,forced:!O||!D},{slice:function(te,V){var Y=y(this),de=p(Y.length),$=f(te,de),H=f(V===void 0?de:V,de),le,ae,z;if(c(Y)&&(le=Y.constructor,typeof le=="function"&&(le===Array||c(le.prototype))?le=void 0:l(le)&&(le=le[N],le===null&&(le=void 0)),le===Array||le===void 0))return U.call(Y,$,H);for(ae=new(le===void 0?Array:le)(W(H-$,0)),z=0;$<H;$++,z++)$ in Y&&m(ae,z,Y[$]);return ae.length=z,ae}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(XS);var PG=XS.exports;const kG=qb(PG),MG={class:"min-h-full bg-gray-50"},AG={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},TG={class:"sm:flex sm:items-center"},OG={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},DG={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},IG={class:"mt-6 bg-white shadow rounded-lg p-4"},NG={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},BG=["value"],RG={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},FG={key:1,class:"mt-6 pb-4"},jG={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},zG={key:1,class:"md:flex md:space-x-4 md:overflow-x-auto gap-4 grid grid-cols-1"},UG={class:"bg-white rounded-lg shadow overflow-hidden"},$G={class:"flex items-center"},VG={class:"flex items-center"},HG={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},WG={class:"p-2"},GG={class:"min-h-[100px] draggable-container"},qG={class:"note-container"},YG={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},ZG={class:"flex items-center"},KG={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},XG={class:"text-sm font-medium text-gray-900 truncate"},JG={class:"px-3 py-2"},QG={class:"text-sm text-gray-500 line-clamp-2"},eq={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex items-center space-x-2"},tq={class:"text-xs text-gray-500"},nq={key:0,class:"text-xs text-gray-700"},rq={class:"flex space-x-1 ml-auto"},iq={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note géolocalisée"},sq={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},oq=["onClick"],aq=["onClick"],lq=["onClick"],uq=["onClick"],cq={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},hq={class:"flex items-center justify-center min-h-screen w-full"},fq={class:"relative bg-white w-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden mx-auto my-auto"},dq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},pq=ws({__name:"NotesView",setup(t){const e=kt([]),n=ry(),r=ul(),i=yh(),s=po(),o=kt(!0),a=kt(!1),l=kt(!1),c=kt(null),f=kt(null),p=kt("info"),y=kt(window.innerWidth<768),m=()=>{y.value=window.innerWidth<768},C=ir(()=>i.getSortedColumns),S=[{id:Rr.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Rr.COMPANY,title:"Entreprise",description:"Visible par l'entreprise"},{id:Rr.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:Rr.VISITOR,title:"Visiteurs",description:"Visible par l'entreprise, ses salariés et ses visiteurs"}],T=cu({search:"",date:"",accessLevel:""});function O(ie){if(!ie)return"Date non définie";try{const se=new Date(ie);return isNaN(se.getTime())?(console.warn("[safeFormatDate] Date invalide:",ie),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(se)}catch(se){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",se),"Date invalide"}}function D(ie){if(!ie)return null;try{const se=new Date(ie);return isNaN(se.getTime())?(console.warn("[safeDate] Date invalide:",ie),null):se}catch(se){return console.error("[safeDate] Erreur lors de la création de la date:",se),null}}function N(ie){return O(ie)}const U=ir(()=>{let ie=i.getAccessibleNotes;if(T.search){const se=T.search.toLowerCase();ie=ie.filter(pe=>pe.title.toLowerCase().includes(se)||pe.description.toLowerCase().includes(se))}if(T.accessLevel&&(ie=ie.filter(se=>se.accessLevel===T.accessLevel)),T.date){const se=new Date;se.setHours(0,0,0,0);const pe=new Date(se);pe.setDate(se.getDate()-se.getDay());const we=new Date(se.getFullYear(),se.getMonth(),1);ie=ie.filter(be=>{const Ae=D(be.createdAt);return Ae?T.date==="today"?Ae>=se:T.date==="week"?Ae>=pe:T.date==="month"?Ae>=we:!0:!1})}return ie}),W=ir(()=>ie=>U.value.filter(se=>se.columnId===ie));function ee(ie){if(ie==null)return"Non défini";switch(ie){case Rr.PRIVATE:return"Privé";case Rr.COMPANY:return"Entreprise";case Rr.EMPLOYEE:return"Salariés";case Rr.VISITOR:return"Visiteurs";default:return"Non défini"}}function te(ie){if(ie==null)return"#9CA3AF";switch(ie){case Rr.PRIVATE:return"#9CA3AF";case Rr.COMPANY:return"#EF4444";case Rr.EMPLOYEE:return"#F59E0B";case Rr.VISITOR:return"#10B981";default:return"#6B7280"}}Ks(()=>{V().catch(ie=>{console.error("[NotesView] Erreur lors du chargement des données:",ie),r.error("Erreur lors du chargement des données")}),document.addEventListener("click",J),window.addEventListener("resize",m)});async function V(){var ie;try{if(o.value=!0,await i.loadColumns(),s.isAdmin)try{const Ee=await ha.getEntreprises();e.value=Ee.data}catch(Ee){console.error("[NotesView][loadInitialData] Erreur chargement entreprises:",Ee)}const se={};!s.isAdmin&&((ie=s.user)!=null&&ie.enterprise_id)&&(se.enterprise_id=s.user.enterprise_id);const pe=await Yo.getNotes(se);pe.data.length>0?pe.data.forEach((Ee,Je)=>{}):console.warn("[NotesView][loadInitialData] Aucune note reçue du backend!");const we=i.columns.map(Ee=>Ee.id),be=pe.data.filter(Ee=>{const Je=(Ee.column||Ee.column_id||"").toString();return Je===""||!we.includes(Je)});if(be.length>0){console.warn(`[NotesView][loadInitialData] ${be.length} notes avec des colonnes invalides:`,be);for(const Ee of be)try{await Yo.updateNote(Ee.id,{column:"2"})}catch(Je){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${Ee.id} à la colonne À faire:`,Je)}}const Ae=pe.data.map(Ee=>{let Je;if(s.isAdmin&&Ee.enterprise_id!=null)if(Ee.enterprise_name)Je=Ee.enterprise_name;else{const gt=e.value.find(_t=>_t.id===Ee.enterprise_id);Je=gt?ec(gt):void 0}return{id:Ee.id,title:Ee.title,description:Ee.description,location:Ee.location,columnId:(Ee.column||Ee.column_id||"2").toString(),access_level:Ee.access_level,style:Ee.style||{},comments:Ee.comments||[],photos:Ee.photos||[],order:Ee.order||0,createdAt:Ee.created_at,updatedAt:Ee.updated_at,enterprise_id:Ee.enterprise_id,enterprise_name:Je}});i.notes.length=0,Ae.forEach(Ee=>{i.addNote(Ee)});for(const Ee of i.columns){const Je=i.getNotesByColumn(Ee.id);Je.length>0&&Je.forEach(gt=>{})}}catch(se){console.error("[NotesView][loadInitialData] Erreur:",se),r.error("Erreur lors du chargement des données")}finally{o.value=!1}}function Y(){n.push({path:"/",query:{tool:"Note"}})}async function de(ie){if(!ie.location){r.warning("Cette note n'est pas géolocalisée");return}try{const we=(await Yo.getNote(ie.id)).data.plan;n.push({path:"/",query:{lat:Array.isArray(ie.location)?ie.location[0].toString():ie.location.coordinates[1].toString(),lng:Array.isArray(ie.location)?ie.location[1].toString():ie.location.coordinates[0].toString(),noteId:ie.id.toString(),planId:we?we.toString():void 0}})}catch(se){console.error("[NotesView][viewOnMap] Erreur lors de la récupération des détails de la note:",se),r.error("Erreur lors de l'ouverture de la note sur la carte")}}function $(ie){if(!ie.location){r.warning("Cette note n'est pas géolocalisée");return}let se,pe;Array.isArray(ie.location)?(se=ie.location[0],pe=ie.location[1]):(se=ie.location.coordinates[1],pe=ie.location.coordinates[0]);const we=`https://www.google.com/maps/dir/?api=1&destination=${se},${pe}`;window.open(we,"_blank")}function H(ie){f.value=JSON.parse(JSON.stringify(ie)),p.value="info",l.value=!0}async function le(ie){var pe,we;let se=ie.enterprise_id;if(se==null&&(s.isAdmin?se=null:s.isEntreprise&&s.user?se=s.user.id:s.isSalarie&&((pe=s.user)!=null&&pe.enterprise_id)?se=s.user.enterprise_id:s.isVisiteur&&s.user?se=s.user.enterprise_id??null:!s.isAdmin&&((we=s.user)!=null&&we.enterprise_id)&&(se=s.user.enterprise_id),se!==null&&ie.id&&i.updateNote(ie.id,{enterprise_id:se})),se!==null&&ie.id){const be=i.notes.findIndex(Ae=>Ae.id===ie.id);if(be!==-1&&!ie.enterprise_name){const Ae=e.value.find(Ee=>Ee.id===se);Ae&&(i.notes[be].enterprise_name=ec(Ae))}}}function ae(ie){c.value=ie,a.value=!0}async function z(){if(c.value)try{try{await Yo.deleteNote(c.value.id)}catch(ie){if(!(ie.response&&ie.response.status===404))throw ie}i.removeNote(c.value.id),r.success("Note supprimée avec succès")}catch(ie){console.error("Erreur lors de la suppression de la note:",ie),r.error("Erreur lors de la suppression de la note")}finally{a.value=!1,c.value=null}}async function B(ie,se){try{if(ie.added){const{element:pe}=ie.added,we=typeof pe=="object"&&pe.id?pe.id:null;if(!we)throw console.error("[NotesView][onDragChange] ID de note invalide:",pe),new Error("ID de note invalide");i.moveNote(we,se);const Ae=W.value(se).map(Je=>Je.id);i.reorderNotes(se,Ae);const Ee=i.getColumnById(se);r.success(`Note déplacée vers ${(Ee==null?void 0:Ee.title)||"une autre colonne"}`),await X(we,{columnId:se})}if(ie.moved){const pe=W.value(se),we=pe.map(be=>be.id);i.reorderNotes(se,we),r.success("Ordre des notes mis à jour");for(const[be,Ae]of pe.entries())await X(Ae.id,{order:be})}}catch(pe){console.error("[NotesView][onDragChange] Erreur:",pe),r.error("Une erreur est survenue lors du déplacement de la note")}}async function X(ie,se){try{const pe=i.notes.find(Ae=>Ae.id===ie);if(!pe){console.error("[NotesView][updateNoteInBackend] Note non trouvée:",ie);return}const we={...se};if(se.columnId){const Ae=i.getColumnById(se.columnId);Ae?(we.column=Ae.id,delete we.columnId,delete we.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouvée: ${se.columnId}`)}const be={...pe,...we,updatedAt:new Date().toISOString()};await Yo.updateNote(ie,be)}catch(pe){throw console.error("[NotesView][updateNoteInBackend] Erreur:",pe),pe}}function K(){var se;let ie=null;s.isAdmin?ie=null:s.isEntreprise&&s.user?ie=s.user.id:s.isSalarie&&((se=s.user)!=null&&se.enterprise_id)?ie=s.user.enterprise_id:s.isVisiteur&&s.user&&(ie=s.user.enterprise_id??null),f.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:i.getDefaultColumn.id,accessLevel:Rr.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[],enterprise_id:ie},l.value=!0,p.value="info"}const ye=kt(null),Te=kt(!1);function Ue(){Te.value=!Te.value}function J(ie){ye.value&&!ye.value.contains(ie.target)&&(Te.value=!1)}return Ks(()=>{document.addEventListener("click",J),window.addEventListener("resize",m)}),ff(()=>{document.removeEventListener("click",J),window.removeEventListener("resize",m)}),(ie,se)=>{var pe,we;return Ne(),je("div",MG,[P("div",AG,[P("div",TG,[se[6]||(se[6]=P("div",{class:"sm:flex-auto"},[P("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),P("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),P("div",OG,[P("div",{class:"relative",ref_key:"dropdownRef",ref:ye},[P("button",{onClick:Ue,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},se[5]||(se[5]=[jr(" Créer "),P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),Te.value?(Ne(),je("div",DG,[P("div",{class:"py-1"},[P("button",{onClick:K,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),P("button",{onClick:Y,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note géolocalisée ")])])):Kt("",!0)],512)])]),P("div",IG,[P("div",NG,[P("div",null,[se[7]||(se[7]=P("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Fn(P("input",{type:"text",id:"search","onUpdate:modelValue":se[0]||(se[0]=be=>T.search=be),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[fi,T.search]])]),P("div",null,[se[9]||(se[9]=P("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),Fn(P("select",{id:"date","onUpdate:modelValue":se[1]||(se[1]=be=>T.date=be),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},se[8]||(se[8]=[P("option",{value:""},"Toutes les dates",-1),P("option",{value:"today"},"Aujourd'hui",-1),P("option",{value:"week"},"Cette semaine",-1),P("option",{value:"month"},"Ce mois",-1)]),512),[[ss,T.date]])]),P("div",null,[se[11]||(se[11]=P("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),Fn(P("select",{id:"accessLevel","onUpdate:modelValue":se[2]||(se[2]=be=>T.accessLevel=be),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[se[10]||(se[10]=P("option",{value:""},"Tous les niveaux",-1)),(Ne(),je(bn,null,ar(S,be=>P("option",{key:be.id,value:be.id},zt(be.title),9,BG)),64))],512),[[ss,T.accessLevel]])])])]),o.value?(Ne(),je("div",RG,se[12]||(se[12]=[P("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),P("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Ne(),je("div",FG,[U.value.length===0?(Ne(),je("div",jG,se[13]||(se[13]=[P("p",{class:"text-sm text-gray-500"},"Aucune note trouvée",-1)]))):Kt("",!0),U.value.length>0?(Ne(),je("div",zG,[(Ne(!0),je(bn,null,ar(C.value,be=>(Ne(),je("div",{key:be.id,class:"column-wrapper md:w-80 md:flex-shrink-0 mb-4 md:mb-0"},[P("div",UG,[P("div",{class:"p-3 flex items-center justify-between no-select",style:Fl({backgroundColor:be.color+"20",borderBottom:"2px solid "+be.color})},[P("div",$G,[P("h3",{class:"text-sm font-semibold",style:Fl({color:be.color})},zt(be.title),5)]),P("div",VG,[P("span",HG,zt(W.value(be.id).length),1)])],4),P("div",WG,[P("div",GG,[Kr(_n(kG),{list:W.value(be.id),class:"space-y-2 empty-column-drop-zone",group:"notes","item-key":"id",handle:y.value?null:".note-drag-handle",onChange:Ae=>B(Ae,be.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:y.value},{item:Nl(({element:Ae})=>[P("div",qG,[P("div",YG,[P("div",{class:Si(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!y.value,"no-select":!0}])},[P("div",ZG,[y.value?Kt("",!0):(Ne(),je("svg",KG,se[14]||(se[14]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),P("h4",XG,zt(Ae.title),1)]),P("div",null,[P("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:Fl({backgroundColor:te(Ae.accessLevel)+"20",color:te(Ae.accessLevel)})},zt(ee(Ae.accessLevel)||"Non défini"),5)])],2),P("div",JG,[P("p",QG,zt(Ae.description||"Aucune description"),1)]),P("div",eq,[P("span",tq,zt(Ae.updatedAt?N(Ae.updatedAt):Ae.createdAt?N(Ae.createdAt):"Date non définie"),1),_n(s).isAdmin?(Ne(),je("span",nq,zt(Ae.enterprise_name||"Non assignée"),1)):Kt("",!0),P("div",rq,[Ae.location?(Ne(),je("span",iq,se[15]||(se[15]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Ne(),je("span",sq,se[16]||(se[16]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),Ae.location?(Ne(),je(bn,{key:2},[P("button",{onClick:Ee=>$(Ae),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},se[17]||(se[17]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,oq),P("button",{onClick:Ee=>de(Ae),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},se[18]||(se[18]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,aq)],64)):Kt("",!0),P("button",{onClick:Ee=>H(Ae),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Éditer la note"},se[19]||(se[19]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,lq),P("button",{onClick:Ee=>ae(Ae),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},se[20]||(se[20]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,uq)])])])])]),"empty-content":Nl(()=>se[21]||(se[21]=[P("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])):Kt("",!0)]))]),a.value?(Ne(),je("div",cq,[P("div",hq,[se[23]||(se[23]=P("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),P("div",fq,[se[22]||(se[22]=lu('<div class="p-4 md:p-6" data-v-d02d94ce><div class="flex items-start" data-v-d02d94ce><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-d02d94ce><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-d02d94ce><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-d02d94ce></path></svg></div><div class="ml-4 flex-1" data-v-d02d94ce><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-d02d94ce> Supprimer la note </h3><div class="mt-2" data-v-d02d94ce><p class="text-sm text-gray-500" data-v-d02d94ce> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),P("div",dq,[P("button",{onClick:z,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),P("button",{onClick:se[3]||(se[3]=be=>a.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):Kt("",!0),l.value?(Ne(),Lo(kS,{key:1,note:f.value,"is-new-note":!((pe=f.value)!=null&&pe.id),location:(we=f.value)==null?void 0:we.location,onClose:se[4]||(se[4]=be=>l.value=!1),onSave:le},null,8,["note","is-new-note","location"])):Kt("",!0)])}}}),gq=$c(pq,[["__scopeId","data-v-d02d94ce"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function cm(t){return t+.5|0}const Zh=(t,e,n)=>Math.max(Math.min(t,n),e);function Qp(t){return Zh(cm(t*2.55),0,255)}function tf(t){return Zh(cm(t*255),0,255)}function ch(t){return Zh(cm(t/2.55)/100,0,1)}function t5(t){return Zh(cm(t*100),0,100)}const Eu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},G2=[..."0123456789ABCDEF"],mq=t=>G2[t&15],vq=t=>G2[(t&240)>>4]+G2[t&15],i0=t=>(t&240)>>4===(t&15),yq=t=>i0(t.r)&&i0(t.g)&&i0(t.b)&&i0(t.a);function bq(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Eu[t[1]]*17,g:255&Eu[t[2]]*17,b:255&Eu[t[3]]*17,a:e===5?Eu[t[4]]*17:255}:(e===7||e===9)&&(n={r:Eu[t[1]]<<4|Eu[t[2]],g:Eu[t[3]]<<4|Eu[t[4]],b:Eu[t[5]]<<4|Eu[t[6]],a:e===9?Eu[t[7]]<<4|Eu[t[8]]:255})),n}const _q=(t,e)=>t<255?e(t):"";function wq(t){var e=yq(t)?mq:vq;return t?"#"+e(t.r)+e(t.g)+e(t.b)+_q(t.a,e):void 0}const xq=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function uE(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Lq(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Cq(t,e,n){const r=uE(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function Sq(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function s_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,f;return s!==o&&(f=s-o,c=a>.5?f/(2-s-o):f/(s+o),l=Sq(n,r,i,f,s),l=l*60+.5),[l|0,c||0,a]}function o_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(tf)}function a_(t,e,n){return o_(uE,t,e,n)}function Eq(t,e,n){return o_(Cq,t,e,n)}function Pq(t,e,n){return o_(Lq,t,e,n)}function cE(t){return(t%360+360)%360}function kq(t){const e=xq.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Qp(+e[5]):tf(+e[5]));const i=cE(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Eq(i,s,o):e[1]==="hsv"?r=Pq(i,s,o):r=a_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function Mq(t,e){var n=s_(t);n[0]=cE(n[0]+e),n=a_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Aq(t){if(!t)return;const e=s_(t),n=e[0],r=t5(e[1]),i=t5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${ch(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const n5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},r5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Tq(){const t={},e=Object.keys(r5),n=Object.keys(n5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,n5[s]);s=parseInt(r5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let s0;function Oq(t){s0||(s0=Tq(),s0.transparent=[0,0,0,0]);const e=s0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Dq=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Iq(t){const e=Dq.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Qp(o):Zh(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Qp(r):Zh(r,0,255)),i=255&(e[4]?Qp(i):Zh(i,0,255)),s=255&(e[6]?Qp(s):Zh(s,0,255)),{r,g:i,b:s,a:n}}}function Nq(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ch(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const I1=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Td=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Bq(t,e,n){const r=Td(ch(t.r)),i=Td(ch(t.g)),s=Td(ch(t.b));return{r:tf(I1(r+n*(Td(ch(e.r))-r))),g:tf(I1(i+n*(Td(ch(e.g))-i))),b:tf(I1(s+n*(Td(ch(e.b))-s))),a:t.a+n*(e.a-t.a)}}function o0(t,e,n){if(t){let r=s_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=a_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function hE(t,e){return t&&Object.assign(e||{},t)}function i5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=tf(t[3]))):(e=hE(t,{r:0,g:0,b:0,a:1}),e.a=tf(e.a)),e}function Rq(t){return t.charAt(0)==="r"?Iq(t):kq(t)}class qg{constructor(e){if(e instanceof qg)return e;const n=typeof e;let r;n==="object"?r=i5(e):n==="string"&&(r=bq(e)||Oq(e)||Rq(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=hE(this._rgb);return e&&(e.a=ch(e.a)),e}set rgb(e){this._rgb=i5(e)}rgbString(){return this._valid?Nq(this._rgb):void 0}hexString(){return this._valid?wq(this._rgb):void 0}hslString(){return this._valid?Aq(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Bq(this._rgb,e._rgb,n)),this}clone(){return new qg(this.rgb)}alpha(e){return this._rgb.a=tf(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=cm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return o0(this._rgb,2,e),this}darken(e){return o0(this._rgb,2,-e),this}saturate(e){return o0(this._rgb,1,e),this}desaturate(e){return o0(this._rgb,1,-e),this}rotate(e){return Mq(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function oh(){}const Fq=(()=>{let t=0;return()=>t++})();function yi(t){return t===null||typeof t>"u"}function _s(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ai(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ys(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ru(t,e){return Ys(t)?t:e}function zr(t,e){return typeof t>"u"?e:t}const jq=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,fE=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function es(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ii(t,e,n,r){let i,s,o;if(_s(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(ai(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function bv(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function _v(t){if(_s(t))return t.map(_v);if(ai(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=_v(t[n[i]]);return e}return t}function dE(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function zq(t,e,n,r){if(!dE(t))return;const i=e[t],s=n[t];ai(i)&&ai(s)?Yg(i,s,r):e[t]=_v(s)}function Yg(t,e,n){const r=_s(e)?e:[e],i=r.length;if(!ai(t))return t;n=n||{};const s=n.merger||zq;let o;for(let a=0;a<i;++a){if(o=r[a],!ai(o))continue;const l=Object.keys(o);for(let c=0,f=l.length;c<f;++c)s(l[c],t,o,n)}return t}function Lg(t,e){return Yg(t,e,{merger:Uq})}function Uq(t,e,n){if(!dE(t))return;const r=e[t],i=n[t];ai(r)&&ai(i)?Lg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=_v(i))}const s5={"":t=>t,x:t=>t.x,y:t=>t.y};function $q(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Vq(t){const e=$q(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function lf(t,e){return(s5[e]||(s5[e]=Vq(e)))(t)}function l_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Zg=t=>typeof t<"u",uf=t=>typeof t=="function",o5=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Hq(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const as=Math.PI,os=2*as,Wq=os+as,wv=Number.POSITIVE_INFINITY,Gq=as/180,co=as/2,Mf=as/4,a5=as*2/3,Kh=Math.log10,Fc=Math.sign;function Cg(t,e,n){return Math.abs(t-e)<n}function l5(t){const e=Math.round(t);t=Cg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Kh(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function qq(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function lp(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Yq(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function pE(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function rc(t){return t*(as/180)}function u_(t){return t*(180/as)}function u5(t){if(!Ys(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function gE(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*as&&(s+=os),{angle:s,distance:i}}function q2(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Zq(t,e){return(t-e+Wq)%os-as}function iu(t){return(t%os+os)%os}function Kg(t,e,n,r){const i=iu(t),s=iu(e),o=iu(n),a=iu(s-i),l=iu(o-i),c=iu(i-s),f=iu(i-o);return i===s||i===o||r&&s===o||a>l&&c<f}function Ko(t,e,n){return Math.max(e,Math.min(n,t))}function Kq(t){return Ko(t,-32768,32767)}function gh(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function c_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const mh=(t,e,n,r)=>c_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),Xq=(t,e,n)=>c_(t,n,r=>t[r][e]>=n);function Jq(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const mE=["push","pop","shift","splice","unshift"];function Qq(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),mE.forEach(n=>{const r="_onData"+l_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function c5(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(mE.forEach(s=>{delete t[s]}),delete t._chartjs)}function vE(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const yE=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function bE(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,yE.call(window,()=>{r=!1,t.apply(e,n)}))}}function eY(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const h_=t=>t==="start"?"left":t==="end"?"right":"center",Da=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,tY=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function _E(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:f,minDefined:p,maxDefined:y}=o.getUserBounds();p&&(i=Ko(Math.min(mh(a,l,c).lo,n?r:mh(e,l,o.getPixelForValue(c)).lo),0,r-1)),y?s=Ko(Math.max(mh(a,o.axis,f,!0).hi+1,n?0:mh(e,l,o.getPixelForValue(f),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function wE(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const a0=t=>t===0||t===1,h5=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*os/n)),f5=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*os/n)+1,Sg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*co)+1,easeOutSine:t=>Math.sin(t*co),easeInOutSine:t=>-.5*(Math.cos(as*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>a0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>a0(t)?t:h5(t,.075,.3),easeOutElastic:t=>a0(t)?t:f5(t,.075,.3),easeInOutElastic(t){return a0(t)?t:t<.5?.5*h5(t*2,.1125,.45):.5+.5*f5(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Sg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Sg.easeInBounce(t*2)*.5:Sg.easeOutBounce(t*2-1)*.5+.5};function f_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function d5(t){return f_(t)?t:new qg(t)}function N1(t){return f_(t)?t:new qg(t).saturate(.5).darken(.1).hexString()}const nY=["x","y","borderWidth","radius","tension"],rY=["color","borderColor","backgroundColor"];function iY(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:rY},numbers:{type:"number",properties:nY}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function sY(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const p5=new Map;function oY(t,e){e=e||{};const n=t+JSON.stringify(e);let r=p5.get(n);return r||(r=new Intl.NumberFormat(t,e),p5.set(n,r)),r}function hm(t,e,n){return oY(e,n).format(t)}const xE={values(t){return _s(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=aY(t,n)}const o=Kh(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),hm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Kh(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?xE.numeric.call(this,t,e,n):""}};function aY(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ly={formatters:xE};function lY(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ly.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Jf=Object.create(null),Y2=Object.create(null);function Eg(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function B1(t,e,n){return typeof e=="string"?Yg(Eg(t,e),n):Yg(Eg(t,""),e)}class uY{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>N1(i.backgroundColor),this.hoverBorderColor=(r,i)=>N1(i.borderColor),this.hoverColor=(r,i)=>N1(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return B1(this,e,n)}get(e){return Eg(this,e)}describe(e,n){return B1(Y2,e,n)}override(e,n){return B1(Jf,e,n)}route(e,n,r,i){const s=Eg(this,e),o=Eg(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return ai(l)?Object.assign({},c,l):zr(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Zs=new uY({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[iY,sY,lY]);function cY(t){return!t||yi(t.size)||yi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function xv(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function hY(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,f,p,y;for(l=0;l<a;l++)if(p=n[l],p!=null&&!_s(p))o=xv(t,i,s,o,p);else if(_s(p))for(c=0,f=p.length;c<f;c++)y=p[c],y!=null&&!_s(y)&&(o=xv(t,i,s,o,y));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function Af(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function g5(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Z2(t,e,n,r){LE(t,e,n,r,null)}function LE(t,e,n,r,i){let s,o,a,l,c,f,p,y;const m=e.pointStyle,C=e.rotation,S=e.radius;let T=(C||0)*Gq;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(S)||S<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,S,0,0,os):t.arc(n,r,S,0,os),t.closePath();break;case"triangle":f=i?i/2:S,t.moveTo(n+Math.sin(T)*f,r-Math.cos(T)*S),T+=a5,t.lineTo(n+Math.sin(T)*f,r-Math.cos(T)*S),T+=a5,t.lineTo(n+Math.sin(T)*f,r-Math.cos(T)*S),t.closePath();break;case"rectRounded":c=S*.516,l=S-c,o=Math.cos(T+Mf)*l,p=Math.cos(T+Mf)*(i?i/2-c:l),a=Math.sin(T+Mf)*l,y=Math.sin(T+Mf)*(i?i/2-c:l),t.arc(n-p,r-a,c,T-as,T-co),t.arc(n+y,r-o,c,T-co,T),t.arc(n+p,r+a,c,T,T+co),t.arc(n-y,r+o,c,T+co,T+as),t.closePath();break;case"rect":if(!C){l=Math.SQRT1_2*S,f=i?i/2:l,t.rect(n-f,r-l,2*f,2*l);break}T+=Mf;case"rectRot":p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+y,r-o),t.lineTo(n+p,r+a),t.lineTo(n-y,r+o),t.closePath();break;case"crossRot":T+=Mf;case"cross":p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+y,r-o),t.lineTo(n-y,r+o);break;case"star":p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+y,r-o),t.lineTo(n-y,r+o),T+=Mf,p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+y,r-o),t.lineTo(n-y,r+o);break;case"line":o=i?i/2:Math.cos(T)*S,a=Math.sin(T)*S,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(i?i/2:S),r+Math.sin(T)*S);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function vh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function uy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function cy(t){t.restore()}function fY(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function dY(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function pY(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),yi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function gY(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,f=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,f),t.lineTo(a,f),t.stroke()}}function mY(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Qf(t,e,n,r,i,s={}){const o=_s(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,pY(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&mY(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),yi(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),gY(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Xg(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*as,as,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,as,co,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,co,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-co,!0),t.lineTo(n+o.topLeft,r)}const vY=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,yY=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bY(t,e){const n=(""+t).match(vY);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const _Y=t=>+t||0;function d_(t,e){const n={},r=ai(e),i=r?Object.keys(e):e,s=ai(t)?r?o=>zr(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=_Y(s(o));return n}function CE(t){return d_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function qf(t){return d_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ua(t){const e=CE(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Oo(t,e){t=t||{},e=e||Zs.font;let n=zr(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=zr(t.style,e.style);r&&!(""+r).match(yY)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:zr(t.family,e.family),lineHeight:bY(zr(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:zr(t.weight,e.weight),string:""};return i.string=cY(i),i}function eg(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function wY(t,e,n){const{min:r,max:i}=t,s=fE(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function df(t,e){return Object.assign(Object.create(t),e)}function p_(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=kE("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>p_([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return EE(a,l,()=>MY(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return v5(a).includes(l)},ownKeys(a){return v5(a)},set(a,l,c){const f=a._storage||(a._storage=i());return a[l]=f[l]=c,delete a._keys,!0}})}function up(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:SE(t,r),setContext:s=>up(t,s,n,r),override:s=>up(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return EE(s,o,()=>LY(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function SE(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:uf(n)?n:()=>n,isIndexable:uf(r)?r:()=>r}}const xY=(t,e)=>t?t+l_(e):e,g_=(t,e)=>ai(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function EE(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function LY(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return uf(a)&&o.isScriptable(e)&&(a=CY(e,a,t,n)),_s(a)&&a.length&&(a=SY(e,a,t,o.isIndexable)),g_(e,a)&&(a=up(a,i,s&&s[e],o)),a}function CY(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),g_(t,l)&&(l=m_(i._scopes,i,t,l)),l}function SY(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(ai(e[0])){const l=e,c=i._scopes.filter(f=>f!==l);e=[];for(const f of l){const p=m_(c,i,t,f);e.push(up(p,s,o&&o[t],a))}}return e}function PE(t,e,n){return uf(t)?t(e,n):t}const EY=(t,e)=>t===!0?e:typeof t=="string"?lf(e,t):void 0;function PY(t,e,n,r,i){for(const s of e){const o=EY(n,s);if(o){t.add(o);const a=PE(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function m_(t,e,n,r){const i=e._rootScopes,s=PE(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=m5(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=m5(a,o,s,l,r),l===null)?!1:p_(Array.from(a),[""],i,s,()=>kY(e,n,r))}function m5(t,e,n,r,i){for(;n;)n=PY(t,e,n,r,i);return n}function kY(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return _s(i)&&ai(n)?n:i||{}}function MY(t,e,n,r){let i;for(const s of e)if(i=kE(xY(s,t),n),typeof i<"u")return g_(t,i)?m_(n,r,t,i):i}function kE(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function v5(t){let e=t._keys;return e||(e=t._keys=AY(t._scopes)),e}function AY(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function ME(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,f;for(a=0,l=r;a<l;++a)c=a+n,f=e[c],o[a]={r:i.parse(lf(f,s),c)};return o}const TY=Number.EPSILON||1e-14,cp=(t,e)=>e<t.length&&!t[e].skip&&t[e],AE=t=>t==="x"?"y":"x";function OY(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=q2(s,i),l=q2(o,s);let c=a/(a+l),f=l/(a+l);c=isNaN(c)?0:c,f=isNaN(f)?0:f;const p=r*c,y=r*f;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+y*(o.x-i.x),y:s.y+y*(o.y-i.y)}}}function DY(t,e,n){const r=t.length;let i,s,o,a,l,c=cp(t,0);for(let f=0;f<r-1;++f)if(l=c,c=cp(t,f+1),!(!l||!c)){if(Cg(e[f],0,TY)){n[f]=n[f+1]=0;continue}i=n[f]/e[f],s=n[f+1]/e[f],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[f]=i*o*e[f],n[f+1]=s*o*e[f])}}function IY(t,e,n="x"){const r=AE(n),i=t.length;let s,o,a,l=cp(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=cp(t,c+1),!a)continue;const f=a[n],p=a[r];o&&(s=(f-o[n])/3,a[`cp1${n}`]=f-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-f)/3,a[`cp2${n}`]=f+s,a[`cp2${r}`]=p+s*e[c])}}function NY(t,e="x"){const n=AE(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=cp(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=cp(t,o+1),!!l){if(c){const f=c[e]-l[e];i[o]=f!==0?(c[n]-l[n])/f:0}s[o]=a?c?Fc(i[o-1])!==Fc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}DY(t,i,s),IY(t,s,e)}function l0(t,e,n){return Math.max(Math.min(t,n),e)}function BY(t,e){let n,r,i,s,o,a=vh(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&vh(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=l0(i.cp1x,e.left,e.right),i.cp1y=l0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=l0(i.cp2x,e.left,e.right),i.cp2y=l0(i.cp2y,e.top,e.bottom)))}function RY(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")NY(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=OY(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&BY(t,n)}function v_(){return typeof window<"u"&&typeof document<"u"}function y_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Lv(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const hy=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function FY(t,e){return hy(t).getPropertyValue(e)}const jY=["top","right","bottom","left"];function Yf(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=jY[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const zY=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function UY(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(zY(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Nf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=hy(n),s=i.boxSizing==="border-box",o=Yf(i,"padding"),a=Yf(i,"border","width"),{x:l,y:c,box:f}=UY(t,n),p=o.left+(f&&a.left),y=o.top+(f&&a.top);let{width:m,height:C}=e;return s&&(m-=o.width+a.width,C-=o.height+a.height),{x:Math.round((l-p)/m*n.width/r),y:Math.round((c-y)/C*n.height/r)}}function $Y(t,e,n){let r,i;if(e===void 0||n===void 0){const s=y_(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=hy(s),l=Yf(a,"border","width"),c=Yf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Lv(a.maxWidth,s,"clientWidth"),i=Lv(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||wv,maxHeight:i||wv}}const u0=t=>Math.round(t*10)/10;function VY(t,e,n,r){const i=hy(t),s=Yf(i,"margin"),o=Lv(i.maxWidth,t,"clientWidth")||wv,a=Lv(i.maxHeight,t,"clientHeight")||wv,l=$Y(t,e,n);let{width:c,height:f}=l;if(i.boxSizing==="content-box"){const y=Yf(i,"border","width"),m=Yf(i,"padding");c-=m.width+y.width,f-=m.height+y.height}return c=Math.max(0,c-s.width),f=Math.max(0,r?c/r:f-s.height),c=u0(Math.min(c,o,l.maxWidth)),f=u0(Math.min(f,a,l.maxHeight)),c&&!f&&(f=u0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&f>l.height&&(f=l.height,c=u0(Math.floor(f*r))),{width:c,height:f}}function y5(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const HY=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};v_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function b5(t,e){const n=FY(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Bf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function WY(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function GY(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Bf(t,i,n),a=Bf(i,s,n),l=Bf(s,e,n),c=Bf(o,a,n),f=Bf(a,l,n);return Bf(c,f,n)}const qY=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},YY=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ep(t,e,n){return t?qY(e,n):YY()}function TE(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function OE(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function DE(t){return t==="angle"?{between:Kg,compare:Zq,normalize:iu}:{between:gh,compare:(e,n)=>e-n,normalize:e=>e}}function _5({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function ZY(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=DE(r),l=e.length;let{start:c,end:f,loop:p}=t,y,m;if(p){for(c+=l,f+=l,y=0,m=l;y<m&&o(a(e[c%l][r]),i,s);++y)c--,f--;c%=l,f%=l}return f<c&&(f+=l),{start:c,end:f,loop:p,style:t.style}}function IE(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=DE(r),{start:f,end:p,loop:y,style:m}=ZY(t,e,n),C=[];let S=!1,T=null,O,D,N;const U=()=>l(i,N,O)&&a(i,N)!==0,W=()=>a(s,O)===0||l(s,N,O),ee=()=>S||U(),te=()=>!S||W();for(let V=f,Y=f;V<=p;++V)D=e[V%o],!D.skip&&(O=c(D[r]),O!==N&&(S=l(O,i,s),T===null&&ee()&&(T=a(O,i)===0?V:Y),T!==null&&te()&&(C.push(_5({start:T,end:V,loop:y,count:o,style:m})),T=null),Y=V,N=O));return T!==null&&C.push(_5({start:T,end:p,loop:y,count:o,style:m})),C}function NE(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=IE(r[i],t.points,e);s.length&&n.push(...s)}return n}function KY(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function XY(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function JY(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=KY(n,i,s,r);if(r===!0)return w5(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return w5(t,XY(n,o,l,c),n,e)}function w5(t,e,n,r){return!r||!r.setContext||!n?e:QY(t,e,n,r)}function QY(t,e,n,r){const i=t._chart.getContext(),s=x5(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let f=s,p=e[0].start,y=p;function m(C,S,T,O){const D=a?-1:1;if(C!==S){for(C+=l;n[C%l].skip;)C-=D;for(;n[S%l].skip;)S+=D;C%l!==S%l&&(c.push({start:C%l,end:S%l,loop:T,style:O}),f=O,p=S%l)}}for(const C of e){p=a?p:C.start;let S=n[p%l],T;for(y=p+1;y<=C.end;y++){const O=n[y%l];T=x5(r.setContext(df(i,{type:"segment",p0:S,p1:O,p0DataIndex:(y-1)%l,p1DataIndex:y%l,datasetIndex:o}))),eZ(T,f)&&m(p,y-1,C.loop,f),S=O,f=T}p<y-1&&m(p,y-1,C.loop,f)}return c}function x5(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function eZ(t,e){if(!e)return!1;const n=[],r=function(i,s){return f_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class tZ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=yE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ah=new tZ;const L5="transparent",nZ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=d5(t||L5),i=r.valid&&d5(e||L5);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class rZ{constructor(e,n,r,i){const s=n[r];i=eg([e.to,i,s,e.from]);const o=eg([e.from,s,i]);this._active=!0,this._fn=e.fn||nZ[e.type||typeof o],this._easing=Sg[e.easing]||Sg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=eg([e.to,n,i,e.from]),this._from=eg([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class BE{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ai(e))return;const n=Object.keys(Zs.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!ai(s))return;const o={};for(const a of n)o[a]=s[a];(_s(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=sZ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&iZ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const f=n[c];let p=s[c];const y=r.get(c);if(p)if(y&&p.active()){p.update(y,f,a);continue}else p.cancel();if(!y||!y.duration){e[c]=f;continue}s[c]=p=new rZ(y,e,c,f),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return ah.add(this._chart,r),!0}}function iZ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function sZ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function C5(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function oZ(t,e,n){if(n===!1)return!1;const r=C5(t,n),i=C5(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function aZ(t){let e,n,r,i;return ai(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function RE(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function S5(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],Ys(c)&&(s||e===0||Fc(e)===Fc(c))&&(e+=c)}return e}}function lZ(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function E5(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function uZ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function cZ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function hZ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function P5(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function k5(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,f=uZ(s,o,r),p=e.length;let y;for(let m=0;m<p;++m){const C=e[m],{[l]:S,[c]:T}=C,O=C._stacks||(C._stacks={});y=O[c]=hZ(i,f,S),y[a]=T,y._top=P5(y,o,!0,r.type),y._bottom=P5(y,o,!1,r.type);const D=y._visualValues||(y._visualValues={});D[a]=T}}function R1(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function fZ(t,e){return df(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function dZ(t,e,n){return df(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Rp(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const F1=t=>t==="reset"||t==="none",M5=(t,e)=>e?t:Object.assign({},t),pZ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:RE(n,!0),values:null};class sc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=E5(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Rp(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,y,m,C)=>p==="x"?y:p==="r"?C:m,s=n.xAxisID=zr(r.xAxisID,R1(e,"x")),o=n.yAxisID=zr(r.yAxisID,R1(e,"y")),a=n.rAxisID=zr(r.rAxisID,R1(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),f=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&c5(this._data,this),e._stacked&&Rp(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ai(n))this._data=lZ(n);else if(r!==n){if(r){c5(r,this);const i=this._cachedMeta;Rp(i),i._parsed=[]}n&&Object.isExtensible(n)&&Qq(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=E5(n.vScale,n),n.stack!==r.stack&&(i=!0,Rp(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&k5(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],f,p,y;if(this._parsing===!1)r._parsed=i,r._sorted=!0,y=i;else{_s(i[e])?y=this.parseArrayData(r,i,e,n):ai(i[e])?y=this.parseObjectData(r,i,e,n):y=this.parsePrimitiveData(r,i,e,n);const m=()=>p[a]===null||c&&p[a]<c[a];for(f=0;f<n;++f)r._parsed[f+e]=p=y[f],l&&(m()&&(l=!1),c=p);r._sorted=l}o&&k5(this,y)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),f=s===o,p=new Array(i);let y,m,C;for(y=0,m=i;y<m;++y)C=y+r,p[y]={[a]:f||s.parse(c[C],C),[l]:o.parse(n[C],C)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,f,p;for(l=0,c=i;l<c;++l)f=l+r,p=n[f],a[l]={x:s.parse(p[0],f),y:o.parse(p[1],f)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let f,p,y,m;for(f=0,p=i;f<p;++f)y=f+r,m=n[y],c[f]={x:s.parse(lf(m,a),y),y:o.parse(lf(m,l),y)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:RE(i,!0),values:n._stacks[e.axis]._visualValues};return S5(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=S5(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=pZ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=cZ(a);let y,m;function C(){m=i[y];const S=m[a.axis];return!Ys(m[e.axis])||f>S||p<S}for(y=0;y<o&&!(!C()&&(this.updateRangeFromParsed(c,e,m,l),s));++y);if(s){for(y=o-1;y>=0;--y)if(!C()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Ys(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=aZ(zr(this.options.clip,oZ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,s,a,l),f=a;f<a+l;++f){const p=i[f];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(f=0;f<o.length;++f)o[f].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=dZ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=fZ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Zg(r);if(a)return M5(a,l);const c=this.chart.config,f=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],y=c.getOptionScopes(this.getDataset(),f),m=Object.keys(Zs.elements[e]),C=()=>this.getContext(r,i,n),S=c.resolveNamedOptions(y,m,C,p);return S.$shared&&(S.$shared=l,s[o]=Object.freeze(M5(S,l))),S}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,n),y=f.getOptionScopes(this.getDataset(),p);l=f.createResolver(y,this.getContext(e,r,n))}const c=new BE(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||F1(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){F1(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!F1(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Rp(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}nt(sc,"defaults",{}),nt(sc,"datasetElementType",null),nt(sc,"dataElementType",null);function gZ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=vE(r.sort((i,s)=>i-s))}return t._cache.$bar}function mZ(t){const e=t.iScale,n=gZ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Zg(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function vZ(t,e,n,r){const i=n.barThickness;let s,o;return yi(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function yZ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function bZ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function FE(t,e,n,r){return _s(t)?bZ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function A5(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,f,p,y;for(c=n,f=n+r;c<f;++c)y=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(FE(y,p,s,c));return l}function j1(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function _Z(t,e,n){return t!==0?Fc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function wZ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function xZ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:f}=wZ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=f:(s[T5(f,o,a,l)]=!0,i=c)),s[T5(i,o,a,l)]=!0,t.borderSkipped=s}function T5(t,e,n,r){return r?(t=LZ(t,e,n),t=O5(t,n,e)):t=O5(t,e,n),t}function LZ(t,e,n){return t===e?n:t===n?e:t}function O5(t,e,n){return t==="start"?e:t==="end"?n:t}function CZ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class R0 extends sc{parsePrimitiveData(e,n,r,i){return A5(e,n,r,i)}parseArrayData(e,n,r,i){return A5(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,f=o.axis==="x"?a:l,p=[];let y,m,C,S;for(y=r,m=r+i;y<m;++y)S=n[y],C={},C[s.axis]=s.parse(lf(S,c),y),p.push(FE(lf(S,f),C,o,y));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=j1(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),f=this._getRuler(),{sharedOptions:p,includeOptions:y}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const C=this.getParsed(m),S=s||yi(C[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),T=this._calculateBarIndexPixels(m,f),O=(C._stacks||{})[a.axis],D={horizontal:c,base:S.base,enableBorderRadius:!O||j1(C._custom)||o===O._top||o===O._bottom,x:c?S.head:T.center,y:c?T.center:S.head,height:c?T.size:Math.abs(S.size),width:c?Math.abs(S.size):T.size};y&&(D.options=p||this.resolveDataElementOptions(m,e[m].active?"active":i));const N=D.options||e[m].options;xZ(D,N,O,o),CZ(D,N,f.ratio),this.updateElement(e[m],m,D,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),f=c&&c[l.vScale.axis];if(yi(f)||isNaN(f))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||mZ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,f=j1(c);let p=l[n.axis],y=0,m=r?this.applyStack(n,l,r):p,C,S;m!==p&&(y=m-p,m=p),f&&(p=c.barStart,m=c.barEnd-c.barStart,p!==0&&Fc(p)!==Fc(c.barEnd)&&(y=0),y+=p);const T=!yi(s)&&!f?s:y;let O=n.getPixelForValue(T);if(this.chart.getDataVisibility(e)?C=n.getPixelForValue(y+m):C=O,S=C-O,Math.abs(S)<o){S=_Z(S,n,a)*o,p===a&&(O-=S/2);const D=n.getPixelForDecimal(0),N=n.getPixelForDecimal(1),U=Math.min(D,N),W=Math.max(D,N);O=Math.max(Math.min(O,W),U),C=O+S,r&&!f&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(C)-n.getValueForPixel(O))}if(O===n.getPixelForValue(a)){const D=Fc(S)*n.getLineWidthForValue(a)/2;O+=D,S-=D}return{size:S,base:O,head:C,center:C+S/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=zr(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,f=i.barThickness==="flex"?yZ(e,n,i,c):vZ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=f.start+f.chunk*p+f.chunk/2,l=Math.min(o,f.chunk*f.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}nt(R0,"id","bar"),nt(R0,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),nt(R0,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class F0 extends sc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=zr(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=zr(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),f=o.axis,p=a.axis;for(let y=n;y<n+r;y++){const m=e[y],C=!s&&this.getParsed(y),S={},T=S[f]=s?o.getPixelForDecimal(.5):o.getPixelForValue(C[f]),O=S[p]=s?a.getBasePixel():a.getPixelForValue(C[p]);S.skip=isNaN(T)||isNaN(O),c&&(S.options=l||this.resolveDataElementOptions(y,m.active?"active":i),s&&(S.options.radius=0)),this.updateElement(m,y,S,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=zr(r&&r._custom,s),i}}nt(F0,"id","bubble"),nt(F0,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),nt(F0,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function SZ(t,e,n){let r=1,i=1,s=0,o=0;if(e<os){const a=t,l=a+e,c=Math.cos(a),f=Math.sin(a),p=Math.cos(l),y=Math.sin(l),m=(N,U,W)=>Kg(N,a,l,!0)?1:Math.max(U,U*n,W,W*n),C=(N,U,W)=>Kg(N,a,l,!0)?-1:Math.min(U,U*n,W,W*n),S=m(0,c,p),T=m(co,f,y),O=C(as,c,p),D=C(as+co,f,y);r=(S-O)/2,i=(T-D)/2,s=-(S+O)/2,o=-(T+D)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class zf extends sc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(ai(r[e])){const{key:l="value"}=this._parsing;s=c=>+lf(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return rc(this.options.rotation-90)}_getCircumference(){return rc(this.options.circumference)}_getRotationExtents(){let e=os,n=-os;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(jq(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:f,rotation:p}=this._getRotationExtents(),{ratioX:y,ratioY:m,offsetX:C,offsetY:S}=SZ(p,f,l),T=(r.width-o)/y,O=(r.height-o)/m,D=Math.max(Math.min(T,O)/2,0),N=fE(this.options.radius,D),U=Math.max(N*l,0),W=(N-U)/this._getVisibleDatasetWeightTotal();this.offsetX=C*N,this.offsetY=S*N,i.total=this.calculateTotal(),this.outerRadius=N-W*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-W*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/os)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,f=(a.left+a.right)/2,p=(a.top+a.bottom)/2,y=s&&c.animateScale,m=y?0:this.innerRadius,C=y?0:this.outerRadius,{sharedOptions:S,includeOptions:T}=this._getSharedOptions(n,i);let O=this._getRotation(),D;for(D=0;D<n;++D)O+=this._circumference(D,s);for(D=n;D<n+r;++D){const N=this._circumference(D,s),U=e[D],W={x:f+this.offsetX,y:p+this.offsetY,startAngle:O,endAngle:O+N,circumference:N,outerRadius:C,innerRadius:m};T&&(W.options=S||this.resolveDataElementOptions(D,U.active?"active":i)),O+=N,this.updateElement(U,D,W,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?os*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=hm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(zr(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}nt(zf,"id","doughnut"),nt(zf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),nt(zf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),nt(zf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class j0 extends sc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=_E(n,i,o);this._drawStart=a,this._drawCount=l,wE(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,i),y=o.axis,m=a.axis,{spanGaps:C,segment:S}=this.options,T=lp(C)?C:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||s||i==="none",D=n+r,N=e.length;let U=n>0&&this.getParsed(n-1);for(let W=0;W<N;++W){const ee=e[W],te=O?ee:{};if(W<n||W>=D){te.skip=!0;continue}const V=this.getParsed(W),Y=yi(V[m]),de=te[y]=o.getPixelForValue(V[y],W),$=te[m]=s||Y?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,V,l):V[m],W);te.skip=isNaN(de)||isNaN($)||Y,te.stop=W>0&&Math.abs(V[y]-U[y])>T,S&&(te.parsed=V,te.raw=c.data[W]),p&&(te.options=f||this.resolveDataElementOptions(W,ee.active?"active":i)),O||this.updateElement(ee,W,te,i),U=V}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}nt(j0,"id","line"),nt(j0,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),nt(j0,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Pg extends sc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=hm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return ME.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,f=c.xCenter,p=c.yCenter,y=c.getIndexAngle(0)-.5*as;let m=y,C;const S=360/this.countVisibleElements();for(C=0;C<n;++C)m+=this._computeAngle(C,i,S);for(C=n;C<n+r;C++){const T=e[C];let O=m,D=m+this._computeAngle(C,i,S),N=o.getDataVisibility(C)?c.getDistanceFromCenterForValue(this.getParsed(C).r):0;m=D,s&&(l.animateScale&&(N=0),l.animateRotate&&(O=D=y));const U={x:f,y:p,innerRadius:0,outerRadius:N,startAngle:O,endAngle:D,options:this.resolveDataElementOptions(C,T.active?"active":i)};this.updateElement(T,C,U,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?rc(this.resolveDataElementOptions(e,n).angle||r):0}}nt(Pg,"id","polarArea"),nt(Pg,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),nt(Pg,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class K2 extends zf{}nt(K2,"id","pie"),nt(K2,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class z0 extends sc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return ME.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),f=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:f.x,y=o?s.yCenter:f.y,m={x:p,y,angle:f.angle,skip:isNaN(p)||isNaN(y),options:c};this.updateElement(l,a,m,i)}}}nt(z0,"id","radar"),nt(z0,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),nt(z0,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class U0 extends sc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=_E(n,r,i);if(this._drawStart=s,this._drawCount=o,wE(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,f=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(f),y=this.includeOptions(i,p),m=o.axis,C=a.axis,{spanGaps:S,segment:T}=this.options,O=lp(S)?S:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||s||i==="none";let N=n>0&&this.getParsed(n-1);for(let U=n;U<n+r;++U){const W=e[U],ee=this.getParsed(U),te=D?W:{},V=yi(ee[C]),Y=te[m]=o.getPixelForValue(ee[m],U),de=te[C]=s||V?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,ee,l):ee[C],U);te.skip=isNaN(Y)||isNaN(de)||V,te.stop=U>0&&Math.abs(ee[m]-N[m])>O,T&&(te.parsed=ee,te.raw=c.data[U]),y&&(te.options=p||this.resolveDataElementOptions(U,W.active?"active":i)),D||this.updateElement(W,U,te,i),N=ee}this.updateSharedOptions(p,i,f)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}nt(U0,"id","scatter"),nt(U0,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),nt(U0,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var EZ=Object.freeze({__proto__:null,BarController:R0,BubbleController:F0,DoughnutController:zf,LineController:j0,PieController:K2,PolarAreaController:Pg,RadarController:z0,ScatterController:U0});function Tf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class b_{constructor(e){nt(this,"options");this.options=e||{}}static override(e){Object.assign(b_.prototype,e)}init(){}formats(){return Tf()}parse(){return Tf()}format(){return Tf()}add(){return Tf()}diff(){return Tf()}startOf(){return Tf()}endOf(){return Tf()}}var jE={_date:b_};function PZ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?Xq:mh;if(r){if(i._sharedOptions){const c=s[0],f=typeof c.getRange=="function"&&c.getRange(e);if(f){const p=l(s,e,n-f),y=l(s,e,n+f);return{lo:p.lo,hi:y.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function fy(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:f}=s[a],{lo:p,hi:y}=PZ(s[a],e,o,i);for(let m=p;m<=y;++m){const C=f[m];C.skip||r(C,c,m)}}}function kZ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function z1(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||fy(t,n,e,function(a,l,c){!i&&!vh(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function MZ(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:f}=o.getProps(["startAngle","endAngle"],r),{angle:p}=gE(o,{x:e.x,y:e.y});Kg(p,c,f)&&i.push({element:o,datasetIndex:a,index:l})}return fy(t,n,e,s),i}function AZ(t,e,n,r,i,s){let o=[];const a=kZ(n);let l=Number.POSITIVE_INFINITY;function c(f,p,y){const m=f.inRange(e.x,e.y,i);if(r&&!m)return;const C=f.getCenterPoint(i);if(!(!!s||t.isPointInArea(C))&&!m)return;const T=a(e,C);T<l?(o=[{element:f,datasetIndex:p,index:y}],l=T):T===l&&o.push({element:f,datasetIndex:p,index:y})}return fy(t,n,e,c),o}function U1(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?MZ(t,e,n,i):AZ(t,e,n,r,i,s)}function D5(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return fy(t,n,e,(l,c,f)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:f}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var TZ={modes:{index(t,e,n,r){const i=Nf(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?z1(t,i,s,r,o):U1(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const f=a[0].index,p=c.data[f];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:f})}),l):[]},dataset(t,e,n,r){const i=Nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?z1(t,i,s,r,o):U1(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let f=0;f<c.length;++f)a.push({element:c[f],datasetIndex:l,index:f})}return a},point(t,e,n,r){const i=Nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return z1(t,i,s,r,o)},nearest(t,e,n,r){const i=Nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return U1(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Nf(e,t);return D5(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Nf(e,t);return D5(t,i,"y",n.intersect,r)}}};const zE=["left","top","right","bottom"];function Fp(t,e){return t.filter(n=>n.pos===e)}function I5(t,e){return t.filter(n=>zE.indexOf(n.pos)===-1&&n.box.axis===e)}function jp(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function OZ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function DZ(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!zE.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function IZ(t,e){const n=DZ(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],f=c&&a.stackWeight/c.weight;a.horizontal?(a.width=f?f*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=f?f*i:l&&e.availableHeight)}return n}function NZ(t){const e=OZ(t),n=jp(e.filter(c=>c.box.fullSize),!0),r=jp(Fp(e,"left"),!0),i=jp(Fp(e,"right")),s=jp(Fp(e,"top"),!0),o=jp(Fp(e,"bottom")),a=I5(e,"x"),l=I5(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Fp(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function N5(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function UE(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function BZ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!ai(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&UE(o,s.getPadding());const a=Math.max(0,e.outerWidth-N5(o,t,"left","right")),l=Math.max(0,e.outerHeight-N5(o,t,"top","bottom")),c=a!==t.w,f=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:f}:{same:f,other:c}}function RZ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function FZ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function tg(t,e,n,r){const i=[];let s,o,a,l,c,f;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,FZ(a.horizontal,e));const{same:p,other:y}=BZ(e,n,a,r);c|=p&&i.length,f=f||y,l.fullSize||i.push(a)}return c&&tg(i,e,n,r)||f}function c0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function B5(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},f=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*f,y=c.size||l.height;Zg(c.start)&&(o=c.start),l.fullSize?c0(l,i.left,o,n.outerWidth-i.right-i.left,y):c0(l,e.left+c.placed,o,p,y),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*f,y=c.size||l.width;Zg(c.start)&&(s=c.start),l.fullSize?c0(l,s,i.top,y,n.outerHeight-i.bottom-i.top):c0(l,s,e.top+c.placed,y,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var za={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Ua(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=NZ(t.boxes),l=a.vertical,c=a.horizontal;Ii(t.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const f=l.reduce((S,T)=>T.box.options&&T.box.options.display===!1?S:S+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/f,hBoxMaxHeight:o/2}),y=Object.assign({},i);UE(y,Ua(r));const m=Object.assign({maxPadding:y,w:s,h:o,x:i.left,y:i.top},i),C=IZ(l.concat(c),p);tg(a.fullSize,m,p,C),tg(l,m,p,C),tg(c,m,p,C)&&tg(l,m,p,C),RZ(m),B5(a.leftAndTop,m,p,C),m.x+=m.w,m.y+=m.h,B5(a.rightAndBottom,m,p,C),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ii(a.chartArea,S=>{const T=S.box;Object.assign(T,t.chartArea),T.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class $E{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class jZ extends $E{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const $0="$chartjs",zZ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},R5=t=>t===null||t==="";function UZ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[$0]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",R5(i)){const s=b5(t,"width");s!==void 0&&(t.width=s)}if(R5(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=b5(t,"height");s!==void 0&&(t.height=s)}return t}const VE=HY?{passive:!0}:!1;function $Z(t,e,n){t.addEventListener(e,n,VE)}function VZ(t,e,n){t.canvas.removeEventListener(e,n,VE)}function HZ(t,e){const n=zZ[t.type]||t.type,{x:r,y:i}=Nf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Cv(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function WZ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Cv(a.addedNodes,r),o=o&&!Cv(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function GZ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Cv(a.removedNodes,r),o=o&&!Cv(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Jg=new Map;let F5=0;function HE(){const t=window.devicePixelRatio;t!==F5&&(F5=t,Jg.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function qZ(t,e){Jg.size||window.addEventListener("resize",HE),Jg.set(t,e)}function YZ(t){Jg.delete(t),Jg.size||window.removeEventListener("resize",HE)}function ZZ(t,e,n){const r=t.canvas,i=r&&y_(r);if(!i)return;const s=bE((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,f=l.contentRect.height;c===0&&f===0||s(c,f)});return o.observe(i),qZ(t,s),o}function $1(t,e,n){n&&n.disconnect(),e==="resize"&&YZ(t)}function KZ(t,e,n){const r=t.canvas,i=bE(s=>{t.ctx!==null&&n(HZ(s,t))},t);return $Z(r,e,i),i}class XZ extends $E{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(UZ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[$0])return!1;const r=n[$0].initial;["height","width"].forEach(s=>{const o=r[s];yi(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[$0],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:WZ,detach:GZ,resize:ZZ}[n]||KZ;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:$1,detach:$1,resize:$1}[n]||VZ)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return VY(e,n,r,i)}isAttached(e){const n=y_(e);return!!(n&&n.isConnected)}}function JZ(t){return!v_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?jZ:XZ}var b0;let Ch=(b0=class{constructor(){nt(this,"x");nt(this,"y");nt(this,"active",!1);nt(this,"options");nt(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return lp(this.x)&&lp(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},nt(b0,"defaults",{}),nt(b0,"defaultRoutes"),b0);function QZ(t,e){const n=t.options.ticks,r=eK(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?nK(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return rK(e,c,s,o/i),c;const f=tK(s,e,i);if(o>0){let p,y;const m=o>1?Math.round((l-a)/(o-1)):null;for(h0(e,c,f,yi(m)?0:a-m,a),p=0,y=o-1;p<y;p++)h0(e,c,f,s[p],s[p+1]);return h0(e,c,f,l,yi(m)?e.length:l+m),c}return h0(e,c,f),c}function eK(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function tK(t,e,n){const r=iK(t),i=e.length/n;if(!r)return Math.max(i,1);const s=qq(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function nK(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function rK(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function h0(t,e,n,r,i){const s=zr(r,0),o=Math.min(zr(i,t.length),t.length);let a=0,l,c,f;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),f=s;f<0;)a++,f=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===f&&(e.push(t[c]),a++,f=Math.round(s+a*n))}function iK(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const sK=t=>t==="left"?"right":t==="right"?"left":t,j5=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,z5=(t,e)=>Math.min(e||t,t);function U5(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function oK(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function aK(t,e){Ii(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function zp(t){return t.drawTicks?t.tickLength:0}function $5(t,e){if(!t.display)return 0;const n=Oo(t.font,e),r=Ua(t.padding);return(_s(t.text)?t.text.length:1)*n.lineHeight+r.height}function lK(t,e){return df(t,{scale:e,type:"scale"})}function uK(t,e,n){return df(t,{tick:n,index:e,type:"tick"})}function cK(t,e,n){let r=h_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=sK(r)),r}function hK(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:f}=l;let p=0,y,m,C;const S=o-i,T=a-s;if(t.isHorizontal()){if(m=Da(r,s,a),ai(n)){const O=Object.keys(n)[0],D=n[O];C=f[O].getPixelForValue(D)+S-e}else n==="center"?C=(c.bottom+c.top)/2+S-e:C=j5(t,n,e);y=a-s}else{if(ai(n)){const O=Object.keys(n)[0],D=n[O];m=f[O].getPixelForValue(D)-T+e}else n==="center"?m=(c.left+c.right)/2-T+e:m=j5(t,n,e);C=Da(r,o,i),p=n==="left"?-co:co}return{titleX:m,titleY:C,maxWidth:y,rotation:p}}class rd extends Ch{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=ru(e,Number.POSITIVE_INFINITY),n=ru(n,Number.NEGATIVE_INFINITY),r=ru(r,Number.POSITIVE_INFINITY),i=ru(i,Number.NEGATIVE_INFINITY),{min:ru(e,r),max:ru(n,i),minDefined:Ys(e),maxDefined:Ys(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:ru(n,ru(r,n)),max:ru(r,ru(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){es(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=wY(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?U5(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=QZ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){es(this.options.afterUpdate,[this])}beforeSetDimensions(){es(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){es(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),es(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){es(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=es(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){es(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){es(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=z5(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const f=this._getLabelSizes(),p=f.widest.width,y=f.highest.height,m=Ko(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),p+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-zp(e.grid)-n.padding-$5(e.title,this.chart.options.font),c=Math.sqrt(p*p+y*y),o=u_(Math.min(Math.asin(Ko((f.highest.height+6)/a,-1,1)),Math.asin(Ko(l/c,-1,1))-Math.asin(Ko(y/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){es(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){es(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=$5(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=zp(s)+l):(e.height=this.maxHeight,e.width=zp(s)+l),r.display&&this.ticks.length){const{first:c,last:f,widest:p,highest:y}=this._getLabelSizes(),m=r.padding*2,C=rc(this.labelRotation),S=Math.cos(C),T=Math.sin(C);if(a){const O=r.mirror?0:T*p.width+S*y.height;e.height=Math.min(this.maxHeight,e.height+O+m)}else{const O=r.mirror?0:S*p.width+T*y.height;e.width=Math.min(this.maxWidth,e.width+O+m)}this._calculatePadding(c,f,T,S)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,m=0;l?c?(y=i*e.width,m=r*n.height):(y=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?y=e.width:s!=="inner"&&(y=e.width/2,m=n.width/2),this.paddingLeft=Math.max((y-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((m-p+o)*this.width/(this.width-p),0)}else{let f=n.height/2,p=e.height/2;s==="start"?(f=0,p=e.height):s==="end"&&(f=n.height,p=0),this.paddingTop=f+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){es(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)yi(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=U5(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/z5(n,r));let c=0,f=0,p,y,m,C,S,T,O,D,N,U,W;for(p=0;p<n;p+=l){if(C=e[p].label,S=this._resolveTickFontOptions(p),i.font=T=S.string,O=s[T]=s[T]||{data:{},gc:[]},D=S.lineHeight,N=U=0,!yi(C)&&!_s(C))N=xv(i,O.data,O.gc,N,C),U=D;else if(_s(C))for(y=0,m=C.length;y<m;++y)W=C[y],!yi(W)&&!_s(W)&&(N=xv(i,O.data,O.gc,N,W),U+=D);o.push(N),a.push(U),c=Math.max(N,c),f=Math.max(U,f)}aK(s,n);const ee=o.indexOf(c),te=a.indexOf(f),V=Y=>({width:o[Y]||0,height:a[Y]||0});return{first:V(0),last:V(n-1),widest:V(ee),highest:V(te),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Kq(this._alignToPixels?Af(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=uK(this.getContext(),e,r))}return this.$context||(this.$context=lK(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=rc(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),y=zp(s),m=[],C=a.setContext(this.getContext()),S=C.display?C.width:0,T=S/2,O=function(B){return Af(r,B,S)};let D,N,U,W,ee,te,V,Y,de,$,H,le;if(o==="top")D=O(this.bottom),te=this.bottom-y,Y=D-T,$=O(e.top)+T,le=e.bottom;else if(o==="bottom")D=O(this.top),$=e.top,le=O(e.bottom)-T,te=D+T,Y=this.top+y;else if(o==="left")D=O(this.right),ee=this.right-y,V=D-T,de=O(e.left)+T,H=e.right;else if(o==="right")D=O(this.left),de=e.left,H=O(e.right)-T,ee=D+T,V=this.left+y;else if(n==="x"){if(o==="center")D=O((e.top+e.bottom)/2+.5);else if(ai(o)){const B=Object.keys(o)[0],X=o[B];D=O(this.chart.scales[B].getPixelForValue(X))}$=e.top,le=e.bottom,te=D+T,Y=te+y}else if(n==="y"){if(o==="center")D=O((e.left+e.right)/2);else if(ai(o)){const B=Object.keys(o)[0],X=o[B];D=O(this.chart.scales[B].getPixelForValue(X))}ee=D-T,V=ee-y,de=e.left,H=e.right}const ae=zr(i.ticks.maxTicksLimit,p),z=Math.max(1,Math.ceil(p/ae));for(N=0;N<p;N+=z){const B=this.getContext(N),X=s.setContext(B),K=a.setContext(B),ye=X.lineWidth,Te=X.color,Ue=K.dash||[],J=K.dashOffset,ie=X.tickWidth,se=X.tickColor,pe=X.tickBorderDash||[],we=X.tickBorderDashOffset;U=oK(this,N,l),U!==void 0&&(W=Af(r,U,ye),c?ee=V=de=H=W:te=Y=$=le=W,m.push({tx1:ee,ty1:te,tx2:V,ty2:Y,x1:de,y1:$,x2:H,y2:le,width:ye,color:Te,borderDash:Ue,borderDashOffset:J,tickWidth:ie,tickColor:se,tickBorderDash:pe,tickBorderDashOffset:we}))}return this._ticksLength=p,this._borderValue=D,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:f,mirror:p}=s,y=zp(r.grid),m=y+f,C=p?-f:m,S=-rc(this.labelRotation),T=[];let O,D,N,U,W,ee,te,V,Y,de,$,H,le="middle";if(i==="top")ee=this.bottom-C,te=this._getXAxisLabelAlignment();else if(i==="bottom")ee=this.top+C,te=this._getXAxisLabelAlignment();else if(i==="left"){const z=this._getYAxisLabelAlignment(y);te=z.textAlign,W=z.x}else if(i==="right"){const z=this._getYAxisLabelAlignment(y);te=z.textAlign,W=z.x}else if(n==="x"){if(i==="center")ee=(e.top+e.bottom)/2+m;else if(ai(i)){const z=Object.keys(i)[0],B=i[z];ee=this.chart.scales[z].getPixelForValue(B)+m}te=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")W=(e.left+e.right)/2-m;else if(ai(i)){const z=Object.keys(i)[0],B=i[z];W=this.chart.scales[z].getPixelForValue(B)}te=this._getYAxisLabelAlignment(y).textAlign}n==="y"&&(l==="start"?le="top":l==="end"&&(le="bottom"));const ae=this._getLabelSizes();for(O=0,D=a.length;O<D;++O){N=a[O],U=N.label;const z=s.setContext(this.getContext(O));V=this.getPixelForTick(O)+s.labelOffset,Y=this._resolveTickFontOptions(O),de=Y.lineHeight,$=_s(U)?U.length:1;const B=$/2,X=z.color,K=z.textStrokeColor,ye=z.textStrokeWidth;let Te=te;o?(W=V,te==="inner"&&(O===D-1?Te=this.options.reverse?"left":"right":O===0?Te=this.options.reverse?"right":"left":Te="center"),i==="top"?c==="near"||S!==0?H=-$*de+de/2:c==="center"?H=-ae.highest.height/2-B*de+de:H=-ae.highest.height+de/2:c==="near"||S!==0?H=de/2:c==="center"?H=ae.highest.height/2-B*de:H=ae.highest.height-$*de,p&&(H*=-1),S!==0&&!z.showLabelBackdrop&&(W+=de/2*Math.sin(S))):(ee=V,H=(1-$)*de/2);let Ue;if(z.showLabelBackdrop){const J=Ua(z.backdropPadding),ie=ae.heights[O],se=ae.widths[O];let pe=H-J.top,we=0-J.left;switch(le){case"middle":pe-=ie/2;break;case"bottom":pe-=ie;break}switch(te){case"center":we-=se/2;break;case"right":we-=se;break;case"inner":O===D-1?we-=se:O>0&&(we-=se/2);break}Ue={left:we,top:pe,width:se+J.width,height:ie+J.height,color:z.backdropColor}}T.push({label:U,font:Y,textOffset:H,options:{rotation:S,color:X,strokeColor:K,strokeWidth:ye,textAlign:Te,textBaseline:le,translation:[W,ee],backdrop:Ue}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-rc(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,f;return n==="left"?i?(f=this.right+s,r==="near"?c="left":r==="center"?(c="center",f+=l/2):(c="right",f+=l)):(f=this.right-a,r==="near"?c="right":r==="center"?(c="center",f-=l/2):(c="left",f=this.left)):n==="right"?i?(f=this.left+s,r==="near"?c="right":r==="center"?(c="center",f-=l/2):(c="left",f-=l)):(f=this.left+a,r==="near"?c="left":r==="center"?(c="center",f+=l/2):(c="right",f=this.right)):c="right",{textAlign:c,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,f)=>{!f.width||!f.color||(r.save(),r.lineWidth=f.width,r.strokeStyle=f.color,r.setLineDash(f.borderDash||[]),r.lineDashOffset=f.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,f,p,y;this.isHorizontal()?(c=Af(e,this.left,o)-o/2,f=Af(e,this.right,a)+a/2,p=y=l):(p=Af(e,this.top,o)-o/2,y=Af(e,this.bottom,a)+a/2,c=f=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(f,y),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&uy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,f=o.textOffset;Qf(r,c,0,f,l,a)}i&&cy(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Oo(r.font),o=Ua(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ai(n)?(l+=o.bottom,_s(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:f,maxWidth:p,rotation:y}=hK(this,l,n,a);Qf(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:y,textAlign:cK(a,n,i),textBaseline:"middle",translation:[c,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=zr(e.grid&&e.grid.z,-1),i=zr(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==rd.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Oo(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class f0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;pK(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,fK(e,o,r),this.override&&Zs.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Zs[i]&&(delete Zs[i][r],this.override&&delete Jf[r])}}function fK(t,e,n){const r=Yg(Object.create(null),[n?Zs.get(n):{},Zs.get(e),t.defaults]);Zs.set(e,r),t.defaultRoutes&&dK(e,t.defaultRoutes),t.descriptors&&Zs.describe(e,t.descriptors)}function dK(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Zs.route(s,i,l,a)})}function pK(t){return"id"in t&&"defaults"in t}class gK{constructor(){this.controllers=new f0(sc,"datasets",!0),this.elements=new f0(Ch,"elements"),this.plugins=new f0(Object,"plugins"),this.scales=new f0(rd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Ii(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=l_(e);es(r["before"+i],[],r),n[e](r),es(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Mc=new gK;class mK{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(es(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){yi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=zr(r.options&&r.options.plugins,{}),s=vK(r);return i===!1&&!n?[]:bK(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function vK(t){const e={},n=[],r=Object.keys(Mc.plugins.items);for(let s=0;s<r.length;s++)n.push(Mc.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function yK(t,e){return!e&&t===!1?null:t===!0?{}:t}function bK(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=yK(r[l],i);c!==null&&s.push({plugin:a,options:_K(t.config,{plugin:a,local:n[l]},c,o)})}return s}function _K(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function X2(t,e){const n=Zs.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function wK(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function xK(t,e){return t===e?"_index_":"_value_"}function V5(t){if(t==="x"||t==="y"||t==="r")return t}function LK(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function J2(t,...e){if(V5(t))return t;for(const n of e){const r=n.axis||LK(n.position)||t.length>1&&V5(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function H5(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function CK(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return H5(t,"x",n[0])||H5(t,"y",n[0])}return{}}function SK(t,e){const n=Jf[t.type]||{scales:{}},r=e.scales||{},i=X2(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ai(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=J2(o,a,CK(o,t),Zs.scales[a.type]),c=xK(l,i),f=n.scales||{};s[o]=Lg(Object.create(null),[{axis:l},a,f[l],f[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||X2(a,e),f=(Jf[a]||{}).scales||{};Object.keys(f).forEach(p=>{const y=wK(p,l),m=o[y+"AxisID"]||y;s[m]=s[m]||Object.create(null),Lg(s[m],[{axis:y},r[m],f[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Lg(a,[Zs.scales[a.type],Zs.scale])}),s}function WE(t){const e=t.options||(t.options={});e.plugins=zr(e.plugins,{}),e.scales=SK(t,e)}function GE(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function EK(t){return t=t||{},t.data=GE(t.data),WE(t),t}const W5=new Map,qE=new Set;function d0(t,e){let n=W5.get(t);return n||(n=e(),W5.set(t,n),qE.add(n)),n}const Up=(t,e,n)=>{const r=lf(e,n);r!==void 0&&t.add(r)};class PK{constructor(e){this._config=EK(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=GE(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),WE(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return d0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return d0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return d0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return d0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(f=>{e&&(l.add(e),f.forEach(p=>Up(l,e,p))),f.forEach(p=>Up(l,i,p)),f.forEach(p=>Up(l,Jf[s]||{},p)),f.forEach(p=>Up(l,Zs,p)),f.forEach(p=>Up(l,Y2,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),qE.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Jf[n]||{},Zs.datasets[n]||{},{type:n},Zs,Y2]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=G5(this._resolverCache,e,i);let l=o;if(MK(o,n)){s.$shared=!1,r=uf(r)?r():r;const c=this.createResolver(e,r,a);l=up(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=G5(this._resolverCache,e,r);return ai(n)?up(s,n,void 0,i):s}}function G5(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:p_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const kK=t=>ai(t)&&Object.getOwnPropertyNames(t).some(e=>uf(t[e]));function MK(t,e){const{isScriptable:n,isIndexable:r}=SE(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(uf(a)||kK(a))||o&&_s(a))return!0}return!1}var AK="4.4.1";const TK=["top","bottom","left","right","chartArea"];function q5(t,e){return t==="top"||t==="bottom"||TK.indexOf(t)===-1&&e==="x"}function Y5(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Z5(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),es(n&&n.onComplete,[t],e)}function OK(t){const e=t.chart,n=e.options.animation;es(n&&n.onProgress,[t],e)}function YE(t){return v_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const V0={},K5=t=>{const e=YE(t);return Object.values(V0).filter(n=>n.canvas===e).pop()};function DK(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function IK(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function p0(t,e,n){return t.options.clip?t[n]:e[n]}function NK(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:p0(n,e,"left"),right:p0(n,e,"right"),top:p0(r,e,"top"),bottom:p0(r,e,"bottom")}:e}class Tc{static register(...e){Mc.add(...e),X5()}static unregister(...e){Mc.remove(...e),X5()}constructor(e,n){const r=this.config=new PK(n),i=YE(e),s=K5(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||JZ(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,f=l&&l.width;if(this.id=Fq(),this.ctx=a,this.canvas=l,this.width=f,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new mK,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=eY(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],V0[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ah.listen(this,"complete",Z5),ah.listen(this,"progress",OK),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return yi(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Mc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():y5(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return g5(this.canvas,this.ctx),this}stop(){return ah.stop(this),this}resize(e,n){ah.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,y5(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),es(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ii(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=J2(o,a),c=l==="r",f=l==="x";return{options:a,dposition:c?"chartArea":f?"bottom":"left",dtype:c?"radialLinear":f?"category":"linear"}}))),Ii(s,o=>{const a=o.options,l=a.id,c=J2(l,a),f=zr(a.type,o.dtype);(a.position===void 0||q5(a.position,c)!==q5(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===f)p=r[l];else{const y=Mc.getScale(f);p=new y({id:l,type:f,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),Ii(i,(o,a)=>{o||delete r[a]}),Ii(r,o=>{za.configure(this,o,o.options),za.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Y5("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||X2(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Mc.getController(a),{datasetElementType:c,dataElementType:f}=Zs.datasets[a];Object.assign(l,{dataElementType:Mc.getElement(f),datasetElementType:c&&Mc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ii(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,f=this.data.datasets.length;c<f;c++){const{controller:p}=this.getDatasetMeta(c),y=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(y),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Ii(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Y5("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ii(this.scales,e=>{za.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!o5(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;DK(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!o5(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;za.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ii(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,uf(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ah.has(this)?this.attached&&!ah.running(this)&&ah.start(this):(this.draw(),Z5({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=NK(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&uy(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&cy(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return vh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=TZ.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=df(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Zg(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ah.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),g5(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete V0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ii(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ii(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ii(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!bv(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(f=>!c.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=Hq(e),c=IK(e,this._lastEvent,r,l);r&&(this._lastEvent=null,es(s.onHover,[e,a,this],this),l&&es(s.onClick,[e,a,this],this));const f=!bv(a,i);return(f||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,f}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}nt(Tc,"defaults",Zs),nt(Tc,"instances",V0),nt(Tc,"overrides",Jf),nt(Tc,"registry",Mc),nt(Tc,"version",AK),nt(Tc,"getChart",K5);function X5(){return Ii(Tc.instances,t=>t._plugins.invalidate())}function BK(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+co,r-co),t.closePath(),t.clip()}function RK(t){return d_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function FK(t,e,n,r){const i=RK(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Ko(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ko(i.innerStart,0,o),innerEnd:Ko(i.innerEnd,0,o)}}function Od(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Sv(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:f}=e,p=Math.max(e.outerRadius+r+n-c,0),y=f>0?f+r+n+c:0;let m=0;const C=i-l;if(r){const z=f>0?f-r:0,B=p>0?p-r:0,X=(z+B)/2,K=X!==0?C*X/(X+r):C;m=(C-K)/2}const S=Math.max(.001,C*p-n/as)/p,T=(C-S)/2,O=l+T+m,D=i-T-m,{outerStart:N,outerEnd:U,innerStart:W,innerEnd:ee}=FK(e,y,p,D-O),te=p-N,V=p-U,Y=O+N/te,de=D-U/V,$=y+W,H=y+ee,le=O+W/$,ae=D-ee/H;if(t.beginPath(),s){const z=(Y+de)/2;if(t.arc(o,a,p,Y,z),t.arc(o,a,p,z,de),U>0){const ye=Od(V,de,o,a);t.arc(ye.x,ye.y,U,de,D+co)}const B=Od(H,D,o,a);if(t.lineTo(B.x,B.y),ee>0){const ye=Od(H,ae,o,a);t.arc(ye.x,ye.y,ee,D+co,ae+Math.PI)}const X=(D-ee/y+(O+W/y))/2;if(t.arc(o,a,y,D-ee/y,X,!0),t.arc(o,a,y,X,O+W/y,!0),W>0){const ye=Od($,le,o,a);t.arc(ye.x,ye.y,W,le+Math.PI,O-co)}const K=Od(te,O,o,a);if(t.lineTo(K.x,K.y),N>0){const ye=Od(te,Y,o,a);t.arc(ye.x,ye.y,N,O-co,Y)}}else{t.moveTo(o,a);const z=Math.cos(Y)*p+o,B=Math.sin(Y)*p+a;t.lineTo(z,B);const X=Math.cos(de)*p+o,K=Math.sin(de)*p+a;t.lineTo(X,K)}t.closePath()}function jK(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Sv(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%os||os))}return Sv(t,e,n,r,l,i),t.fill(),l}function zK(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:f,borderDash:p,borderDashOffset:y}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=y,m?(t.lineWidth=c*2,t.lineJoin=f||"round"):(t.lineWidth=c,t.lineJoin=f||"bevel");let C=e.endAngle;if(s){Sv(t,e,n,r,C,i);for(let S=0;S<s;++S)t.stroke();isNaN(a)||(C=o+(a%os||os))}m&&BK(t,e,C),s||(Sv(t,e,n,r,C,i),t.stroke())}class ng extends Ch{constructor(n){super();nt(this,"circumference");nt(this,"endAngle");nt(this,"fullCircles");nt(this,"innerRadius");nt(this,"outerRadius");nt(this,"pixelMargin");nt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=gE(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:f,outerRadius:p,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,S=zr(y,c-l)>=os||Kg(o,l,c),T=gh(a,f+m,p+m);return S&&T}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:f}=this.options,p=(s+o)/2,y=(a+l+f+c)/2;return{x:r+Math.cos(p)*y,y:i+Math.sin(p)*y}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>os?Math.floor(i/os):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(as,i||0)),f=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,jK(n,this,f,o,a),zK(n,this,f,o,a),n.restore()}}nt(ng,"id","arc"),nt(ng,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),nt(ng,"defaultRoutes",{backgroundColor:"backgroundColor"}),nt(ng,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function ZE(t,e,n=e){t.lineCap=zr(n.borderCapStyle,e.borderCapStyle),t.setLineDash(zr(n.borderDash,e.borderDash)),t.lineDashOffset=zr(n.borderDashOffset,e.borderDashOffset),t.lineJoin=zr(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=zr(n.borderWidth,e.borderWidth),t.strokeStyle=zr(n.borderColor,e.borderColor)}function UK(t,e,n){t.lineTo(n.x,n.y)}function $K(t){return t.stepped?fY:t.tension||t.cubicInterpolationMode==="monotone"?dY:UK}function KE(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),f=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!f?r+c-l:c-l}}function VK(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=KE(i,n,r),f=$K(s);let{move:p=!0,reverse:y}=r||{},m,C,S;for(m=0;m<=c;++m)C=i[(a+(y?c-m:m))%o],!C.skip&&(p?(t.moveTo(C.x,C.y),p=!1):f(t,S,C,y,s.stepped),S=C);return l&&(C=i[(a+(y?c:0))%o],f(t,S,C,y,s.stepped)),!!l}function HK(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=KE(i,n,r),{move:l=!0,reverse:c}=r||{};let f=0,p=0,y,m,C,S,T,O;const D=U=>(o+(c?a-U:U))%s,N=()=>{S!==T&&(t.lineTo(f,T),t.lineTo(f,S),t.lineTo(f,O))};for(l&&(m=i[D(0)],t.moveTo(m.x,m.y)),y=0;y<=a;++y){if(m=i[D(y)],m.skip)continue;const U=m.x,W=m.y,ee=U|0;ee===C?(W<S?S=W:W>T&&(T=W),f=(p*f+U)/++p):(N(),t.lineTo(U,W),C=ee,p=0,S=T=W),O=W}N()}function Q2(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?HK:VK}function WK(t){return t.stepped?WY:t.tension||t.cubicInterpolationMode==="monotone"?GY:Bf}function GK(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),ZE(t,e.options),t.stroke(i)}function qK(t,e,n,r){const{segments:i,options:s}=e,o=Q2(e);for(const a of i)ZE(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const YK=typeof Path2D=="function";function ZK(t,e,n,r){YK&&!e.options.segment?GK(t,e,n,r):qK(t,e,n,r)}class Xh extends Ch{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;RY(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=JY(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=NE(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=WK(r);let c,f;for(c=0,f=o.length;c<f;++c){const{start:p,end:y}=o[c],m=s[p],C=s[y];if(m===C){a.push(m);continue}const S=Math.abs((i-m[n])/(C[n]-m[n])),T=l(m,C,S,r.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Q2(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Q2(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),ZK(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}nt(Xh,"id","line"),nt(Xh,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),nt(Xh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),nt(Xh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function J5(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class H0 extends Ch{constructor(n){super();nt(this,"parsed");nt(this,"skip");nt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return J5(this,n,"x",r)}inYRange(n,r){return J5(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!vh(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Z2(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}nt(H0,"id","point"),nt(H0,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),nt(H0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function XE(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,f,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,f=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),f=Math.max(r,i)),{left:a,top:c,right:l,bottom:f}}function Jh(t,e,n,r){return t?0:Ko(e,n,r)}function KK(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=CE(r);return{t:Jh(i.top,s.top,0,n),r:Jh(i.right,s.right,0,e),b:Jh(i.bottom,s.bottom,0,n),l:Jh(i.left,s.left,0,e)}}function XK(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=qf(i),o=Math.min(e,n),a=t.borderSkipped,l=r||ai(i);return{topLeft:Jh(!l||a.top||a.left,s.topLeft,0,o),topRight:Jh(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Jh(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Jh(!l||a.bottom||a.right,s.bottomRight,0,o)}}function JK(t){const e=XE(t),n=e.right-e.left,r=e.bottom-e.top,i=KK(t,n/2,r/2),s=XK(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function V1(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&XE(t,r);return a&&(i||gh(e,a.left,a.right))&&(s||gh(n,a.top,a.bottom))}function QK(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function eX(t,e){t.rect(e.x,e.y,e.w,e.h)}function H1(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class W0 extends Ch{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=JK(this),a=QK(o.radius)?Xg:eX;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,H1(o,n,s)),e.clip(),a(e,H1(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,H1(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return V1(this,e,n,r)}inXRange(e,n){return V1(this,e,null,n)}inYRange(e,n){return V1(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}nt(W0,"id","bar"),nt(W0,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),nt(W0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var tX=Object.freeze({__proto__:null,ArcElement:ng,BarElement:W0,LineElement:Xh,PointElement:H0});const eb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Q5=eb.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function JE(t){return eb[t%eb.length]}function QE(t){return Q5[t%Q5.length]}function nX(t,e){return t.borderColor=JE(e),t.backgroundColor=QE(e),++e}function rX(t,e){return t.backgroundColor=t.data.map(()=>JE(e++)),e}function iX(t,e){return t.backgroundColor=t.data.map(()=>QE(e++)),e}function sX(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof zf?e=rX(n,e):i instanceof Pg?e=iX(n,e):i&&(e=nX(n,e))}}function e3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function oX(t){return t&&(t.borderColor||t.backgroundColor)}var aX={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(e3(r)||oX(i)||s&&e3(s)))return;const o=sX(t);r.forEach(o)}};function lX(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let f=e,p,y,m,C,S;for(o[l++]=t[f],p=0;p<s-2;p++){let T=0,O=0,D;const N=Math.floor((p+1)*a)+1+e,U=Math.min(Math.floor((p+2)*a)+1,n)+e,W=U-N;for(D=N;D<U;D++)T+=t[D].x,O+=t[D].y;T/=W,O/=W;const ee=Math.floor(p*a)+1+e,te=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:V,y:Y}=t[f];for(m=C=-1,D=ee;D<te;D++)C=.5*Math.abs((V-T)*(t[D].y-Y)-(V-t[D].x)*(O-Y)),C>m&&(m=C,y=t[D],S=D);o[l++]=y,f=S}return o[l++]=t[c],o}function uX(t,e,n,r){let i=0,s=0,o,a,l,c,f,p,y,m,C,S;const T=[],O=e+n-1,D=t[e].x,U=t[O].x-D;for(o=e;o<e+n;++o){a=t[o],l=(a.x-D)/U*r,c=a.y;const W=l|0;if(W===f)c<C?(C=c,p=o):c>S&&(S=c,y=o),i=(s*i+a.x)/++s;else{const ee=o-1;if(!yi(p)&&!yi(y)){const te=Math.min(p,y),V=Math.max(p,y);te!==m&&te!==ee&&T.push({...t[te],x:i}),V!==m&&V!==ee&&T.push({...t[V],x:i})}o>0&&ee!==m&&T.push(t[ee]),T.push(a),f=W,s=0,C=S=c,p=y=m=o}}return T}function eP(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function t3(t){t.data.datasets.forEach(e=>{eP(e)})}function cX(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Ko(mh(e,s.axis,o).lo,0,n-1)),c?i=Ko(mh(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var hX={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){t3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(eg([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const f=t.scales[l.xAxisID];if(f.type!=="linear"&&f.type!=="time"||t.options.parsing)return;let{start:p,count:y}=cX(l,c);const m=n.threshold||4*r;if(y<=m){eP(i);return}yi(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(S){this._data=S}}));let C;switch(n.algorithm){case"lttb":C=lX(c,p,y,r,n);break;case"min-max":C=uX(c,p,y,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=C})},destroy(t){t3(t)}};function fX(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=__(l,c,i);const f=tb(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:f,start:i[l],end:i[c]});continue}const p=NE(e,f);for(const y of p){const m=tb(n,s[y.start],s[y.end],y.loop),C=IE(a,i,m);for(const S of C)o.push({source:S,target:y,start:{[n]:n3(f,m,"start",Math.max)},end:{[n]:n3(f,m,"end",Math.min)}})}}return o}function tb(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=iu(i),s=iu(s)),{property:t,start:i,end:s}}function dX(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=__(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function __(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function n3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function tP(t,e){let n=[],r=!1;return _s(t)?(r=!0,n=t):n=dX(t,e),n.length?new Xh({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function r3(t){return t&&t.fill!==!1}function pX(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Ys(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function gX(t,e,n){const r=bX(t);if(ai(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Ys(i)&&Math.floor(i)===i?mX(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function mX(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function vX(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ai(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function yX(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:ai(t)?r=t.value:r=e.getBaseValue(),r}function bX(t){const e=t.options,n=e.fill;let r=zr(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function _X(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=wX(e,n);a.push(tP({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let f=c.start;f<=c.end;f++)xX(i,o[f],a)}return new Xh({points:i,options:{}})}function wX(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function xX(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=LX(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function LX(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const f=s[c],p=o[f.start][n],y=o[f.end][n];if(gh(i,p,y)){a=i===p,l=i===y;break}}return{first:a,last:l,point:r}}class nP{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:os},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function CX(t){const{chart:e,fill:n,line:r}=t;if(Ys(n))return SX(e,n);if(n==="stack")return _X(t);if(n==="shape")return!0;const i=EX(t);return i instanceof nP?i:tP(i,r)}function SX(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function EX(t){return(t.scale||{}).getPointPositionForValue?kX(t):PX(t)}function PX(t){const{scale:e={},fill:n}=t,r=vX(n,e);if(Ys(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function kX(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=yX(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new nP({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function W1(t,e,n){const r=CX(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:f=c,below:p=c}=l||{};r&&i.points.length&&(uy(t,n),MX(t,{line:i,target:r,above:f,below:p,area:n,scale:s,axis:o}),cy(t))}function MX(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(i3(t,r,o.top),s3(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),i3(t,r,o.bottom)),s3(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function i3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,f=i[l],p=i[__(l,c,i)];s?(t.moveTo(f.x,f.y),s=!1):(t.lineTo(f.x,n),t.lineTo(f.x,f.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function s3(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=fX(n,r,i);for(const{source:l,target:c,start:f,end:p}of a){const{style:{backgroundColor:y=s}={}}=l,m=r!==!0;t.save(),t.fillStyle=y,AX(t,o,m&&tb(i,f,p)),t.beginPath();const C=!!n.pathSegment(t,l);let S;if(m){C?t.closePath():o3(t,r,p,i);const T=!!r.pathSegment(t,c,{move:C,reverse:!0});S=C&&T,S||o3(t,r,f,i)}t.closePath(),t.fill(S?"evenodd":"nonzero"),t.restore()}}function AX(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function o3(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var TX={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Xh&&(l={visible:t.isDatasetVisible(o),index:o,fill:gX(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=pX(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&W1(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;r3(s)&&W1(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!r3(r)||n.drawTime!=="beforeDatasetDraw"||W1(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const a3=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},OX=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class l3 extends Ch{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=es(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Oo(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=a3(r,s);let c,f;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,f=this._fitRows(o,s,a,l)+10):(f=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],f=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let y=-1,m=-f;return this.legendItems.forEach((C,S)=>{const T=r+n/2+s.measureText(C.text).width;(S===0||c[c.length-1]+T+2*a>o)&&(p+=f,c[c.length-(S>0?0:1)]=0,m+=f,y++),l[S]={left:0,top:m,row:y,width:T,height:i},c[c.length-1]+=T+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],f=o-e;let p=a,y=0,m=0,C=0,S=0;return this.legendItems.forEach((T,O)=>{const{itemWidth:D,itemHeight:N}=DX(r,n,s,T,i);O>0&&m+N+2*a>f&&(p+=y+a,c.push({width:y,height:m}),C+=y+a,S++,y=m=0),l[O]={left:C,top:m,col:S,width:D,height:N},y=Math.max(y,D),m+=N+a}),p+=y,c.push({width:y,height:m}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=ep(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Da(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Da(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Da(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Da(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;uy(e,this),this._draw(),cy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Zs.color,l=ep(e.rtl,this.left,this.width),c=Oo(o.font),{padding:f}=o,p=c.size,y=p/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:C,boxHeight:S,itemHeight:T}=a3(o,p),O=function(ee,te,V){if(isNaN(C)||C<=0||isNaN(S)||S<0)return;i.save();const Y=zr(V.lineWidth,1);if(i.fillStyle=zr(V.fillStyle,a),i.lineCap=zr(V.lineCap,"butt"),i.lineDashOffset=zr(V.lineDashOffset,0),i.lineJoin=zr(V.lineJoin,"miter"),i.lineWidth=Y,i.strokeStyle=zr(V.strokeStyle,a),i.setLineDash(zr(V.lineDash,[])),o.usePointStyle){const de={radius:S*Math.SQRT2/2,pointStyle:V.pointStyle,rotation:V.rotation,borderWidth:Y},$=l.xPlus(ee,C/2),H=te+y;LE(i,de,$,H,o.pointStyleWidth&&C)}else{const de=te+Math.max((p-S)/2,0),$=l.leftForLtr(ee,C),H=qf(V.borderRadius);i.beginPath(),Object.values(H).some(le=>le!==0)?Xg(i,{x:$,y:de,w:C,h:S,radius:H}):i.rect($,de,C,S),i.fill(),Y!==0&&i.stroke()}i.restore()},D=function(ee,te,V){Qf(i,V.text,ee,te+T/2,c,{strikethrough:V.hidden,textAlign:l.textAlign(V.textAlign)})},N=this.isHorizontal(),U=this._computeTitleHeight();N?m={x:Da(s,this.left+f,this.right-r[0]),y:this.top+f+U,line:0}:m={x:this.left+f,y:Da(s,this.top+U+f,this.bottom-n[0].height),line:0},TE(this.ctx,e.textDirection);const W=T+f;this.legendItems.forEach((ee,te)=>{i.strokeStyle=ee.fontColor,i.fillStyle=ee.fontColor;const V=i.measureText(ee.text).width,Y=l.textAlign(ee.textAlign||(ee.textAlign=o.textAlign)),de=C+y+V;let $=m.x,H=m.y;l.setWidth(this.width),N?te>0&&$+de+f>this.right&&(H=m.y+=W,m.line++,$=m.x=Da(s,this.left+f,this.right-r[m.line])):te>0&&H+W>this.bottom&&($=m.x=$+n[m.line].width+f,m.line++,H=m.y=Da(s,this.top+U+f,this.bottom-n[m.line].height));const le=l.x($);if(O(le,H,ee),$=tY(Y,$+C+y,N?$+de:this.right,e.rtl),D(l.x($),H,ee),N)m.x+=de+f;else if(typeof ee.text!="string"){const ae=c.lineHeight;m.y+=rP(ee,ae)+f}else m.y+=W}),OE(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Oo(n.font),i=Ua(n.padding);if(!n.display)return;const s=ep(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let f,p=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),f=this.top+c,p=Da(e.align,p,this.right-y);else{const C=this.columnSizes.reduce((S,T)=>Math.max(S,T.height),0);f=c+Da(e.align,this.top,this.bottom-C-e.labels.padding-this._computeTitleHeight())}const m=Da(a,p,p+y);o.textAlign=s.textAlign(h_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Qf(o,n.text,m,f,r)}_computeTitleHeight(){const e=this.options.title,n=Oo(e.font),r=Ua(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(gh(e,this.left,this.right)&&gh(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],gh(e,i.left,i.left+i.width)&&gh(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!BX(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=OX(i,r);i&&!s&&es(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&es(n.onHover,[e,r,this],this)}else r&&es(n.onClick,[e,r,this],this)}}function DX(t,e,n,r,i){const s=IX(r,t,e,n),o=NX(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function IX(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function NX(t,e,n){let r=t;return typeof e.text!="string"&&(r=rP(e,n)),r}function rP(t,e){const n=t.text?t.text.length:0;return e*n}function BX(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var RX={id:"legend",_element:l3,start(t,e,n){const r=t.legend=new l3({ctx:t.ctx,options:n,chart:t});za.configure(t,r,n),za.addBox(t,r)},stop(t){za.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;za.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),f=Ua(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class w_ extends Ch{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=_s(r.text)?r.text.length:1;this._padding=Ua(r.padding);const s=i*Oo(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,f,p;return this.isHorizontal()?(f=Da(a,r,s),p=n+e,c=s-r):(o.position==="left"?(f=r+e,p=Da(a,i,n),l=as*-.5):(f=s-e,p=Da(a,n,i),l=as*.5),c=i-n),{titleX:f,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Oo(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Qf(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:h_(n.align),textBaseline:"middle",translation:[o,a]})}}function FX(t,e){const n=new w_({ctx:t.ctx,options:e,chart:t});za.configure(t,n,e),za.addBox(t,n),t.titleBlock=n}var jX={id:"title",_element:w_,start(t,e,n){FX(t,n)},stop(t){const e=t.titleBlock;za.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;za.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const g0=new WeakMap;var zX={id:"subtitle",start(t,e,n){const r=new w_({ctx:t.ctx,options:n,chart:t});za.configure(t,r,n),za.addBox(t,r),g0.set(t,r)},stop(t){za.removeBox(t,g0.get(t)),g0.delete(t)},beforeUpdate(t,e,n){const r=g0.get(t);za.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const rg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),f=q2(e,c);f<i&&(i=f,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Pc(t,e){return e&&(_s(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function lh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function UX(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function u3(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Oo(e.bodyFont),c=Oo(e.titleFont),f=Oo(e.footerFont),p=s.length,y=i.length,m=r.length,C=Ua(e.padding);let S=C.height,T=0,O=r.reduce((U,W)=>U+W.before.length+W.lines.length+W.after.length,0);if(O+=t.beforeBody.length+t.afterBody.length,p&&(S+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),O){const U=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;S+=m*U+(O-m)*l.lineHeight+(O-1)*e.bodySpacing}y&&(S+=e.footerMarginTop+y*f.lineHeight+(y-1)*e.footerSpacing);let D=0;const N=function(U){T=Math.max(T,n.measureText(U).width+D)};return n.save(),n.font=c.string,Ii(t.title,N),n.font=l.string,Ii(t.beforeBody.concat(t.afterBody),N),D=e.displayColors?o+2+e.boxPadding:0,Ii(r,U=>{Ii(U.before,N),Ii(U.lines,N),Ii(U.after,N)}),D=0,n.font=f.string,Ii(t.footer,N),n.restore(),T+=C.width,{width:T,height:S}}function $X(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function VX(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function HX(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),VX(c,t,e,n)&&(c="center"),c}function c3(t,e,n){const r=n.yAlign||e.yAlign||$X(t,n);return{xAlign:n.xAlign||e.xAlign||HX(t,e,n,r),yAlign:r}}function WX(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function GX(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function h3(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:f,topRight:p,bottomLeft:y,bottomRight:m}=qf(o);let C=WX(e,a);const S=GX(e,l,c);return l==="center"?a==="left"?C+=c:a==="right"&&(C-=c):a==="left"?C-=Math.max(f,y)+i:a==="right"&&(C+=Math.max(p,m)+i),{x:Ko(C,0,r.width-e.width),y:Ko(S,0,r.height-e.height)}}function m0(t,e,n){const r=Ua(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function f3(t){return Pc([],lh(t))}function qX(t,e,n){return df(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function d3(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const iP={beforeTitle:oh,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:oh,beforeBody:oh,beforeLabel:oh,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return yi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:oh,afterBody:oh,beforeFooter:oh,footer:oh,afterFooter:oh};function Ml(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?iP[e].call(n,r):i}class nb extends Ch{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new BE(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=qX(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Ml(r,"beforeTitle",this,e),s=Ml(r,"title",this,e),o=Ml(r,"afterTitle",this,e);let a=[];return a=Pc(a,lh(i)),a=Pc(a,lh(s)),a=Pc(a,lh(o)),a}getBeforeBody(e,n){return f3(Ml(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Ii(e,s=>{const o={before:[],lines:[],after:[]},a=d3(r,s);Pc(o.before,lh(Ml(a,"beforeLabel",this,s))),Pc(o.lines,Ml(a,"label",this,s)),Pc(o.after,lh(Ml(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return f3(Ml(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Ml(r,"beforeFooter",this,e),s=Ml(r,"footer",this,e),o=Ml(r,"afterFooter",this,e);let a=[];return a=Pc(a,lh(i)),a=Pc(a,lh(s)),a=Pc(a,lh(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(UX(this.chart,n[l]));return e.filter&&(a=a.filter((f,p,y)=>e.filter(f,p,y,r))),e.itemSort&&(a=a.sort((f,p)=>e.itemSort(f,p,r))),Ii(a,f=>{const p=d3(e.callbacks,f);i.push(Ml(p,"labelColor",this,f)),s.push(Ml(p,"labelPointStyle",this,f)),o.push(Ml(p,"labelTextColor",this,f))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=rg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=u3(this,r),c=Object.assign({},a,l),f=c3(this.chart,r,c),p=h3(r,c,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:f,bottomRight:p}=qf(a),{x:y,y:m}=e,{width:C,height:S}=n;let T,O,D,N,U,W;return s==="center"?(U=m+S/2,i==="left"?(T=y,O=T-o,N=U+o,W=U-o):(T=y+C,O=T+o,N=U-o,W=U+o),D=T):(i==="left"?O=y+Math.max(l,f)+o:i==="right"?O=y+C-Math.max(c,p)-o:O=this.caretX,s==="top"?(N=m,U=N-o,T=O-o,D=O+o):(N=m+S,U=N+o,T=O+o,D=O-o),W=N),{x1:T,x2:O,x3:D,y1:N,y2:U,y3:W}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=ep(r.rtl,this.x,this.width);for(e.x=m0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Oo(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,f=Oo(s.bodyFont),p=m0(this,"left",s),y=i.x(p),m=l<f.lineHeight?(f.lineHeight-l)/2:0,C=n.y+m;if(s.usePointStyle){const S={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=i.leftForLtr(y,c)+c/2,O=C+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Z2(e,S,T,O),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Z2(e,S,T,O)}else{e.lineWidth=ai(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const S=i.leftForLtr(y,c),T=i.leftForLtr(i.xPlus(y,1),c-2),O=qf(o.borderRadius);Object.values(O).some(D=>D!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Xg(e,{x:S,y:C,w:c,h:l,radius:O}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Xg(e,{x:T,y:C+1,w:c-2,h:l-2,radius:O}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(S,C,c,l),e.strokeRect(S,C,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,C+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:f}=r,p=Oo(r.bodyFont);let y=p.lineHeight,m=0;const C=ep(r.rtl,this.x,this.width),S=function(V){n.fillText(V,C.x(e.x+m),e.y+y/2),e.y+=y+s},T=C.textAlign(o);let O,D,N,U,W,ee,te;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=m0(this,T,r),n.fillStyle=r.bodyColor,Ii(this.beforeBody,S),m=a&&T!=="right"?o==="center"?c/2+f:c+2+f:0,U=0,ee=i.length;U<ee;++U){for(O=i[U],D=this.labelTextColors[U],n.fillStyle=D,Ii(O.before,S),N=O.lines,a&&N.length&&(this._drawColorBox(n,e,U,C,r),y=Math.max(p.lineHeight,l)),W=0,te=N.length;W<te;++W)S(N[W]),y=p.lineHeight;Ii(O.after,S)}m=0,y=p.lineHeight,Ii(this.afterBody,S),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=ep(r.rtl,this.x,this.width);for(e.x=m0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Oo(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:f}=r,{topLeft:p,topRight:y,bottomLeft:m,bottomRight:C}=qf(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-y,l),n.quadraticCurveTo(a+c,l,a+c,l+y),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+f-C),n.quadraticCurveTo(a+c,l+f,a+c-C,l+f),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+f),n.quadraticCurveTo(a,l+f,a,l+f-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=rg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=u3(this,e),l=Object.assign({},o,this._size),c=c3(n,e,l),f=h3(e,l,c,n);(i._to!==f.x||s._to!==f.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ua(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),TE(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),OE(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!bv(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!bv(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=rg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}nt(nb,"positioners",rg);var YX={id:"tooltip",_element:nb,positioners:rg,afterInit(t,e,n){n&&(t.tooltip=new nb({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:iP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},ZX=Object.freeze({__proto__:null,Colors:aX,Decimation:hX,Filler:TX,Legend:RX,SubTitle:zX,Title:jX,Tooltip:YX});const KX=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function XX(t,e,n,r){const i=t.indexOf(e);if(i===-1)return KX(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const JX=(t,e)=>t===null?null:Ko(Math.round(t),0,e);function p3(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class rb extends rd{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(yi(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:XX(r,e,zr(n,e),this._addedLabels),JX(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return p3.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}nt(rb,"id","category"),nt(rb,"defaults",{ticks:{callback:p3}});function QX(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:f,maxDigits:p,includeBounds:y}=t,m=s||1,C=f-1,{min:S,max:T}=e,O=!yi(o),D=!yi(a),N=!yi(c),U=(T-S)/(p+1);let W=l5((T-S)/C/m)*m,ee,te,V,Y;if(W<1e-14&&!O&&!D)return[{value:S},{value:T}];Y=Math.ceil(T/W)-Math.floor(S/W),Y>C&&(W=l5(Y*W/C/m)*m),yi(l)||(ee=Math.pow(10,l),W=Math.ceil(W*ee)/ee),i==="ticks"?(te=Math.floor(S/W)*W,V=Math.ceil(T/W)*W):(te=S,V=T),O&&D&&s&&Yq((a-o)/s,W/1e3)?(Y=Math.round(Math.min((a-o)/W,f)),W=(a-o)/Y,te=o,V=a):N?(te=O?o:te,V=D?a:V,Y=c-1,W=(V-te)/Y):(Y=(V-te)/W,Cg(Y,Math.round(Y),W/1e3)?Y=Math.round(Y):Y=Math.ceil(Y));const de=Math.max(u5(W),u5(te));ee=Math.pow(10,yi(l)?de:l),te=Math.round(te*ee)/ee,V=Math.round(V*ee)/ee;let $=0;for(O&&(y&&te!==o?(n.push({value:o}),te<o&&$++,Cg(Math.round((te+$*W)*ee)/ee,o,g3(o,U,t))&&$++):te<o&&$++);$<Y;++$){const H=Math.round((te+$*W)*ee)/ee;if(D&&H>a)break;n.push({value:H})}return D&&y&&V!==a?n.length&&Cg(n[n.length-1].value,a,g3(a,U,t))?n[n.length-1].value=a:n.push({value:a}):(!D||V===a)&&n.push({value:V}),n}function g3(t,e,{horizontal:n,minRotation:r}){const i=rc(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Ev extends rd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return yi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Fc(i),c=Fc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=QX(i,s);return e.bounds==="ticks"&&pE(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return hm(e,this.chart.options.locale,this.options.ticks.format)}}class ib extends Ev{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ys(e)?e:0,this.max=Ys(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=rc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}nt(ib,"id","linear"),nt(ib,"defaults",{ticks:{callback:ly.formatters.numeric}});const Qg=t=>Math.floor(Kh(t)),Of=(t,e)=>Math.pow(10,Qg(t)+e);function m3(t){return t/Math.pow(10,Qg(t))===1}function v3(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function eJ(t,e){const n=e-t;let r=Qg(n);for(;v3(t,e,r)>10;)r++;for(;v3(t,e,r)<10;)r--;return Math.min(r,Qg(t))}function tJ(t,{min:e,max:n}){e=ru(t.min,e);const r=[],i=Qg(e);let s=eJ(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,f=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-f)/Math.pow(10,s)),y=ru(t.min,Math.round((l+f+p*Math.pow(10,s))*o)/o);for(;y<n;)r.push({value:y,major:m3(y),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),y=Math.round((l+f+p*Math.pow(10,s))*o)/o;const m=ru(t.max,y);return r.push({value:m,major:m3(m),significand:p}),r}class sb extends rd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=Ev.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Ys(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ys(e)?Math.max(0,e):null,this.max=Ys(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ys(this._userMin)&&(this.min=e===Of(this.min,0)?Of(this.min,-1):Of(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Of(r,-1)),o(Of(i,1)))),r<=0&&s(Of(i,-1)),i<=0&&o(Of(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=tJ(n,this);return e.bounds==="ticks"&&pE(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":hm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Kh(e),this._valueRange=Kh(this.max)-Kh(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Kh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}nt(sb,"id","logarithmic"),nt(sb,"defaults",{ticks:{callback:ly.formatters.logarithmic,major:{enabled:!0}}});function ob(t){const e=t.ticks;if(e.display&&t.display){const n=Ua(e.backdropPadding);return zr(e.font&&e.font.size,Zs.font.size)+n.height}return 0}function nJ(t,e,n){return n=_s(n)?n:[n],{w:hY(t,e.string,n),h:n.length*e.lineHeight}}function y3(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function rJ(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?as/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const f=t.getPointPosition(l,t.drawingArea+i[l],a),p=Oo(c.font),y=nJ(t.ctx,p,t._pointLabels[l]);r[l]=y;const m=iu(t.getIndexAngle(l)+a),C=Math.round(u_(m)),S=y3(C,f.x,y.w,0,180),T=y3(C,f.y,y.h,90,270);iJ(n,e,m,S,T)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=aJ(t,r,i)}function iJ(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function sJ(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(u_(iu(l.angle+co))),f=cJ(l.y,a.h,c),p=lJ(c),y=uJ(l.x,a.w,p);return{visible:!0,x:l.x,y:f,textAlign:p,left:y,top:f,right:y+a.w,bottom:f+a.h}}function oJ(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(vh({x:n,y:r},e)||vh({x:n,y:s},e)||vh({x:i,y:r},e)||vh({x:i,y:s},e))}function aJ(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:ob(s)/2,additionalAngle:o?as/i:0};let c;for(let f=0;f<i;f++){l.padding=n[f],l.size=e[f];const p=sJ(t,f,l);r.push(p),a==="auto"&&(p.visible=oJ(p,c),p.visible&&(c=p))}return r}function lJ(t){return t===0||t===180?"center":t<180?"left":"right"}function uJ(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function cJ(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function hJ(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!yi(a)){const l=qf(e.borderRadius),c=Ua(e.backdropPadding);t.fillStyle=a;const f=r-c.left,p=i-c.top,y=s-r+c.width,m=o-i+c.height;Object.values(l).some(C=>C!==0)?(t.beginPath(),Xg(t,{x:f,y:p,w:y,h:m,radius:l}),t.fill()):t.fillRect(f,p,y,m)}}function fJ(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));hJ(n,o,s);const a=Oo(o.font),{x:l,y:c,textAlign:f}=s;Qf(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:f,textBaseline:"middle"})}}function sP(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,os);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function dJ(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),sP(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function pJ(t,e,n){return df(t,{label:n,index:e,type:"pointLabel"})}class ig extends Ev{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ua(ob(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Ys(e)&&!isNaN(e)?e:0,this.max=Ys(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ob(this.options))}generateTickLabels(e){Ev.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=es(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?rJ(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=os/(this._pointLabels.length||1),r=this.options.startAngle||0;return iu(e*n+rc(r))}getDistanceFromCenterForValue(e){if(yi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(yi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return pJ(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-co+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),sP(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&fJ(this,o),i.display&&this.ticks.forEach((f,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(f.value);const y=this.getContext(p),m=i.setContext(y),C=s.setContext(y);dJ(this,m,l,o,C)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const f=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:y}=f;!y||!p||(e.lineWidth=y,e.strokeStyle=p,e.setLineDash(f.borderDash),e.lineDashOffset=f.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),f=Oo(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=f.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=Ua(c.backdropPadding);e.fillRect(-o/2-p.left,-s-f.size/2-p.top,o+p.width,f.size+p.height)}Qf(e,a.label,0,-s,f,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}nt(ig,"id","radialLinear"),nt(ig,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ly.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),nt(ig,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),nt(ig,"descriptors",{angleLines:{_fallback:"grid"}});const dy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Bl=Object.keys(dy);function b3(t,e){return t-e}function _3(t,e){if(yi(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Ys(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(lp(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function w3(t,e,n,r){const i=Bl.length;for(let s=Bl.indexOf(t);s<i-1;++s){const o=dy[Bl[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Bl[s]}return Bl[i-1]}function gJ(t,e,n,r,i){for(let s=Bl.length-1;s>=Bl.indexOf(n);s--){const o=Bl[s];if(dy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Bl[n?Bl.indexOf(n):0]}function mJ(t){for(let e=Bl.indexOf(t)+1,n=Bl.length;e<n;++e)if(dy[Bl[e]].common)return Bl[e]}function x3(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=c_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function vJ(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function L3(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:vJ(t,r,i,n)}class em extends rd{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new jE._date(e.adapters.date);i.init(n),Lg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:_3(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Ys(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Ys(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=Jq(i,s,o);return this._unit=n.unit||(r.autoSkip?w3(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):gJ(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:mJ(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),L3(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ko(n,0,o),r=Ko(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||w3(s.minUnit,n,r,this._getLabelCapacity(n)),a=zr(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=lp(l)||l===!0,f={};let p=n,y,m;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const C=i.ticks.source==="data"&&this.getDataTimestamps();for(y=p,m=0;y<r;y=+e.add(y,a,o),m++)x3(f,y,C);return(y===r||i.bounds==="ticks"||m===1)&&x3(f,y,C),Object.keys(f).sort(b3).map(S=>+S)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return es(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,f=l&&a[l],p=c&&a[c],y=r[n],m=c&&p&&y&&y.major;return this._adapter.format(e,i||(m?p:f))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=rc(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,L3(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(_3(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return vE(e.sort(b3))}}nt(em,"id","time"),nt(em,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function v0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=mh(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=mh(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class ab extends em{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=v0(n,this.min),this._tableRange=v0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,f;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)f=i[o+1],l=i[o-1],c=i[o],Math.round((f+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(v0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return v0(this._table,r*this._tableRange+this._minPos,!0)}}nt(ab,"id","timeseries"),nt(ab,"defaults",em.defaults);var yJ=Object.freeze({__proto__:null,CategoryScale:rb,LinearScale:ib,LogarithmicScale:sb,RadialLinearScale:ig,TimeScale:em,TimeSeriesScale:ab});const bJ=[EZ,tX,ZX,yJ];Tc.register(...bJ);const oP=6048e5,_J=864e5,fm=6e4,dm=36e5,wJ=1e3,C3=Symbol.for("constructDateFrom");function Xs(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&C3 in t?t[C3](e):t instanceof Date?new t.constructor(e):new Date(e)}function Tr(t,e){return Xs(e||t,t)}function py(t,e,n){const r=Tr(t,n==null?void 0:n.in);return isNaN(e)?Xs((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function x_(t,e,n){const r=Tr(t,n==null?void 0:n.in);if(isNaN(e))return Xs(t,NaN);if(!e)return r;const i=r.getDate(),s=Xs(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function L_(t,e,n){return Xs(t,+Tr(t)+e)}function xJ(t,e,n){return L_(t,e*dm)}let LJ={};function id(){return LJ}function Uc(t,e){var a,l,c,f;const n=id(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,i=Tr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function hp(t,e){return Uc(t,{...e,weekStartsOn:1})}function aP(t,e){const n=Tr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Xs(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=hp(i),o=Xs(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=hp(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Pv(t){const e=Tr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function sd(t,...e){const n=Xs.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function lb(t,e){const n=Tr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function lP(t,e,n){const[r,i]=sd(n==null?void 0:n.in,t,e),s=lb(r),o=lb(i),a=+s-Pv(s),l=+o-Pv(o);return Math.round((a-l)/_J)}function CJ(t,e){const n=aP(t,e),r=Xs(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),hp(r)}function SJ(t,e,n){const r=Tr(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*fm),r}function EJ(t,e,n){return x_(t,e*3,n)}function PJ(t,e,n){return L_(t,e*1e3)}function kJ(t,e,n){return py(t,e*7,n)}function MJ(t,e,n){return x_(t,e*12,n)}function kg(t,e){const n=+Tr(t)-+Tr(e);return n<0?-1:n>0?1:n}function AJ(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function uP(t){return!(!AJ(t)&&typeof t!="number"||isNaN(+Tr(t)))}function TJ(t,e,n){const[r,i]=sd(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function OJ(t,e,n){const[r,i]=sd(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function cP(t,e,n){const[r,i]=sd(n==null?void 0:n.in,t,e),s=S3(r,i),o=Math.abs(lP(r,i));r.setDate(r.getDate()-s*o);const a=+(S3(r,i)===-s),l=s*(o-a);return l===0?0:l}function S3(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function pm(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function DJ(t,e,n){const[r,i]=sd(n==null?void 0:n.in,t,e),s=(+r-+i)/dm;return pm(n==null?void 0:n.roundingMethod)(s)}function C_(t,e){return+Tr(t)-+Tr(e)}function IJ(t,e,n){const r=C_(t,e)/fm;return pm(n==null?void 0:n.roundingMethod)(r)}function hP(t,e){const n=Tr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function fP(t,e){const n=Tr(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function NJ(t,e){const n=Tr(t,e==null?void 0:e.in);return+hP(n,e)==+fP(n,e)}function dP(t,e,n){const[r,i,s]=sd(n==null?void 0:n.in,t,t,e),o=kg(i,s),a=Math.abs(TJ(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=kg(i,s)===-o;NJ(r)&&a===1&&kg(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function BJ(t,e,n){const r=dP(t,e,n)/3;return pm(n==null?void 0:n.roundingMethod)(r)}function RJ(t,e,n){const r=C_(t,e)/1e3;return pm(n==null?void 0:n.roundingMethod)(r)}function FJ(t,e,n){const r=cP(t,e,n)/7;return pm(n==null?void 0:n.roundingMethod)(r)}function jJ(t,e,n){const[r,i]=sd(n==null?void 0:n.in,t,e),s=kg(r,i),o=Math.abs(OJ(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=kg(r,i)===-s,l=s*(o-+a);return l===0?0:l}function zJ(t,e){const n=Tr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function UJ(t,e){const n=Tr(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function $J(t,e){const n=Tr(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function pP(t,e){const n=Tr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function VJ(t,e){const n=Tr(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function HJ(t,e){var a,l;const n=id(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Tr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function WJ(t,e){const n=Tr(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function GJ(t,e){const n=Tr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function qJ(t,e){const n=Tr(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const YJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ZJ=(t,e,n)=>{let r;const i=YJ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function G1(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const KJ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},XJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},JJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QJ={date:G1({formats:KJ,defaultWidth:"full"}),time:G1({formats:XJ,defaultWidth:"full"}),dateTime:G1({formats:JJ,defaultWidth:"full"})},eQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tQ=(t,e,n,r)=>eQ[t];function $p(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const nQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},rQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},iQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},sQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},lQ=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},uQ={ordinalNumber:lQ,era:$p({values:nQ,defaultWidth:"wide"}),quarter:$p({values:rQ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:$p({values:iQ,defaultWidth:"wide"}),day:$p({values:sQ,defaultWidth:"wide"}),dayPeriod:$p({values:oQ,defaultWidth:"wide",formattingValues:aQ,defaultFormattingWidth:"wide"})};function Vp(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?hQ(a,p=>p.test(o)):cQ(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const f=e.slice(o.length);return{value:c,rest:f}}}function cQ(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function hQ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function fQ(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const dQ=/^(\d+)(th|st|nd|rd)?/i,pQ=/\d+/i,gQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mQ={any:[/^b/i,/^(a|c)/i]},vQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yQ={any:[/1/i,/2/i,/3/i,/4/i]},bQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_Q={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},wQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},LQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},SQ={ordinalNumber:fQ({matchPattern:dQ,parsePattern:pQ,valueCallback:t=>parseInt(t,10)}),era:Vp({matchPatterns:gQ,defaultMatchWidth:"wide",parsePatterns:mQ,defaultParseWidth:"any"}),quarter:Vp({matchPatterns:vQ,defaultMatchWidth:"wide",parsePatterns:yQ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Vp({matchPatterns:bQ,defaultMatchWidth:"wide",parsePatterns:_Q,defaultParseWidth:"any"}),day:Vp({matchPatterns:wQ,defaultMatchWidth:"wide",parsePatterns:xQ,defaultParseWidth:"any"}),dayPeriod:Vp({matchPatterns:LQ,defaultMatchWidth:"any",parsePatterns:CQ,defaultParseWidth:"any"})},gP={code:"en-US",formatDistance:ZJ,formatLong:QJ,formatRelative:tQ,localize:uQ,match:SQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function EQ(t,e){const n=Tr(t,e==null?void 0:e.in);return lP(n,pP(n))+1}function mP(t,e){const n=Tr(t,e==null?void 0:e.in),r=+hp(n)-+CJ(n);return Math.round(r/oP)+1}function S_(t,e){var f,p,y,m;const n=Tr(t,e==null?void 0:e.in),r=n.getFullYear(),i=id(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(y=i.locale)==null?void 0:y.options)==null?void 0:m.firstWeekContainsDate)??1,o=Xs((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Uc(o,e),l=Xs((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Uc(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function PQ(t,e){var a,l,c,f;const n=id(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,i=S_(t,e),s=Xs((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Uc(s,e)}function vP(t,e){const n=Tr(t,e==null?void 0:e.in),r=+Uc(n,e)-+PQ(n,e);return Math.round(r/oP)+1}function Di(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Bh={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Di(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Di(n+1,2)},d(t,e){return Di(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Di(t.getHours()%12||12,e.length)},H(t,e){return Di(t.getHours(),e.length)},m(t,e){return Di(t.getMinutes(),e.length)},s(t,e){return Di(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Di(i,e.length)}},Dd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},E3={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Bh.y(t,e)},Y:function(t,e,n,r){const i=S_(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Di(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Di(s,e.length)},R:function(t,e){const n=aP(t);return Di(n,e.length)},u:function(t,e){const n=t.getFullYear();return Di(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Di(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Di(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Bh.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Di(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=vP(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Di(i,e.length)},I:function(t,e,n){const r=mP(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Di(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Bh.d(t,e)},D:function(t,e,n){const r=EQ(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Di(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Di(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Di(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Di(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Dd.noon:r===0?i=Dd.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Dd.evening:r>=12?i=Dd.afternoon:r>=4?i=Dd.morning:i=Dd.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Bh.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Bh.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Di(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Di(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Bh.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Bh.s(t,e)},S:function(t,e){return Bh.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return k3(r);case"XXXX":case"XX":return Rf(r);case"XXXXX":case"XXX":default:return Rf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return k3(r);case"xxxx":case"xx":return Rf(r);case"xxxxx":case"xxx":default:return Rf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+P3(r,":");case"OOOO":default:return"GMT"+Rf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+P3(r,":");case"zzzz":default:return"GMT"+Rf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Di(r,e.length)},T:function(t,e,n){return Di(+t,e.length)}};function P3(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Di(s,2)}function k3(t,e){return t%60===0?(t>0?"-":"+")+Di(Math.abs(t)/60,2):Rf(t,e)}function Rf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Di(Math.trunc(r/60),2),s=Di(r%60,2);return n+i+e+s}const M3=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},yP=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},kQ=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return M3(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",M3(r,e)).replace("{{time}}",yP(i,e))},ub={p:yP,P:kQ},MQ=/^D+$/,AQ=/^Y+$/,TQ=["D","DD","YY","YYYY"];function bP(t){return MQ.test(t)}function _P(t){return AQ.test(t)}function cb(t,e,n){const r=OQ(t,e,n);if(console.warn(r),TQ.includes(t))throw new RangeError(r)}function OQ(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const DQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,IQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NQ=/^'([^]*?)'?$/,BQ=/''/g,RQ=/[a-zA-Z]/;function FQ(t,e,n){var f,p,y,m,C,S,T,O;const r=id(),i=(n==null?void 0:n.locale)??r.locale??gP,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(y=r.locale)==null?void 0:y.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((S=(C=n==null?void 0:n.locale)==null?void 0:C.options)==null?void 0:S.weekStartsOn)??r.weekStartsOn??((O=(T=r.locale)==null?void 0:T.options)==null?void 0:O.weekStartsOn)??0,a=Tr(t,n==null?void 0:n.in);if(!uP(a))throw new RangeError("Invalid time value");let l=e.match(IQ).map(D=>{const N=D[0];if(N==="p"||N==="P"){const U=ub[N];return U(D,i.formatLong)}return D}).join("").match(DQ).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const N=D[0];if(N==="'")return{isToken:!1,value:jQ(D)};if(E3[N])return{isToken:!0,value:D};if(N.match(RQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:D}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(D=>{if(!D.isToken)return D.value;const N=D.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&_P(N)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&bP(N))&&cb(N,e,String(t));const U=E3[N[0]];return U(a,N,i.localize,c)}).join("")}function jQ(t){const e=t.match(NQ);return e?e[1].replace(BQ,"'"):t}function zQ(){return Object.assign({},id())}function UQ(t,e){const n=Tr(t,e==null?void 0:e.in).getDay();return n===0?7:n}function $Q(t,e){const n=VQ(e)?new e(0):Xs(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function VQ(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const HQ=10;class wP{constructor(){nt(this,"subPriority",0)}validate(e,n){return!0}}class WQ extends wP{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class GQ extends wP{constructor(n,r){super();nt(this,"priority",HQ);nt(this,"subPriority",-1);this.context=n||(i=>Xs(r,i))}set(n,r){return r.timestampIsSet?n:Xs(n,$Q(n,this.context))}}class Ei{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new WQ(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class qQ extends Ei{constructor(){super(...arguments);nt(this,"priority",140);nt(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const ho={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Oc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function fo(t,e){return t&&{value:e(t.value),rest:t.rest}}function Ns(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Dc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*dm+s*fm+o*wJ),rest:e.slice(n[0].length)}}function xP(t){return Ns(ho.anyDigitsSigned,t)}function Js(t,e){switch(t){case 1:return Ns(ho.singleDigit,e);case 2:return Ns(ho.twoDigits,e);case 3:return Ns(ho.threeDigits,e);case 4:return Ns(ho.fourDigits,e);default:return Ns(new RegExp("^\\d{1,"+t+"}"),e)}}function kv(t,e){switch(t){case 1:return Ns(ho.singleDigitSigned,e);case 2:return Ns(ho.twoDigitsSigned,e);case 3:return Ns(ho.threeDigitsSigned,e);case 4:return Ns(ho.fourDigitsSigned,e);default:return Ns(new RegExp("^-?\\d{1,"+t+"}"),e)}}function E_(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function LP(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function CP(t){return t%400===0||t%4===0&&t%100!==0}class YQ extends Ei{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return fo(Js(4,n),s);case"yo":return fo(i.ordinalNumber(n,{unit:"year"}),s);default:return fo(Js(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=LP(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class ZQ extends Ei{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return fo(Js(4,n),s);case"Yo":return fo(i.ordinalNumber(n,{unit:"year"}),s);default:return fo(Js(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=S_(n,s);if(i.isTwoDigitYear){const l=LP(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),Uc(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),Uc(n,s)}}class KQ extends Ei{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return kv(r==="R"?4:r.length,n)}set(n,r,i){const s=Xs(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),hp(s)}}class XQ extends Ei{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return kv(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class JQ extends Ei{constructor(){super(...arguments);nt(this,"priority",120);nt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Js(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class QQ extends Ei{constructor(){super(...arguments);nt(this,"priority",120);nt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Js(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class eee extends Ei{constructor(){super(...arguments);nt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);nt(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return fo(Ns(ho.month,n),s);case"MM":return fo(Js(2,n),s);case"Mo":return fo(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class tee extends Ei{constructor(){super(...arguments);nt(this,"priority",110);nt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return fo(Ns(ho.month,n),s);case"LL":return fo(Js(2,n),s);case"Lo":return fo(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function nee(t,e,n){const r=Tr(t,n==null?void 0:n.in),i=vP(r,n)-e;return r.setDate(r.getDate()-i*7),Tr(r,n==null?void 0:n.in)}class ree extends Ei{constructor(){super(...arguments);nt(this,"priority",100);nt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return Ns(ho.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Js(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return Uc(nee(n,i,s),s)}}function iee(t,e,n){const r=Tr(t,n==null?void 0:n.in),i=mP(r,n)-e;return r.setDate(r.getDate()-i*7),r}class see extends Ei{constructor(){super(...arguments);nt(this,"priority",100);nt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return Ns(ho.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Js(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return hp(iee(n,i))}}const oee=[31,28,31,30,31,30,31,31,30,31,30,31],aee=[31,29,31,30,31,30,31,31,30,31,30,31];class lee extends Ei{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"subPriority",1);nt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return Ns(ho.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Js(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=CP(i),o=n.getMonth();return s?r>=1&&r<=aee[o]:r>=1&&r<=oee[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class uee extends Ei{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"subpriority",1);nt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return Ns(ho.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Js(r.length,n)}}validate(n,r){const i=n.getFullYear();return CP(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function P_(t,e,n){var p,y,m,C;const r=id(),i=(n==null?void 0:n.weekStartsOn)??((y=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((C=(m=r.locale)==null?void 0:m.options)==null?void 0:C.weekStartsOn)??0,s=Tr(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,f=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return py(s,f,n)}class cee extends Ei{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=P_(n,i,s),n.setHours(0,0,0,0),n}}class hee extends Ei{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return fo(Js(r.length,n),o);case"eo":return fo(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=P_(n,i,s),n.setHours(0,0,0,0),n}}class fee extends Ei{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return fo(Js(r.length,n),o);case"co":return fo(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=P_(n,i,s),n.setHours(0,0,0,0),n}}function dee(t,e,n){const r=Tr(t,n==null?void 0:n.in),i=UQ(r,n),s=e-i;return py(r,s,n)}class pee extends Ei{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Js(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return fo(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return fo(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return fo(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return fo(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=dee(n,i),n.setHours(0,0,0,0),n}}class gee extends Ei{constructor(){super(...arguments);nt(this,"priority",80);nt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(E_(i),0,0,0),n}}class mee extends Ei{constructor(){super(...arguments);nt(this,"priority",80);nt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(E_(i),0,0,0),n}}class vee extends Ei{constructor(){super(...arguments);nt(this,"priority",80);nt(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(E_(i),0,0,0),n}}class yee extends Ei{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return Ns(ho.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Js(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class bee extends Ei{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return Ns(ho.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Js(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class _ee extends Ei{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return Ns(ho.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Js(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class wee extends Ei{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return Ns(ho.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Js(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class xee extends Ei{constructor(){super(...arguments);nt(this,"priority",60);nt(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return Ns(ho.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Js(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class Lee extends Ei{constructor(){super(...arguments);nt(this,"priority",50);nt(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return Ns(ho.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Js(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class Cee extends Ei{constructor(){super(...arguments);nt(this,"priority",30);nt(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return fo(Js(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class See extends Ei{constructor(){super(...arguments);nt(this,"priority",10);nt(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Dc(Oc.basicOptionalMinutes,n);case"XX":return Dc(Oc.basic,n);case"XXXX":return Dc(Oc.basicOptionalSeconds,n);case"XXXXX":return Dc(Oc.extendedOptionalSeconds,n);case"XXX":default:return Dc(Oc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Xs(n,n.getTime()-Pv(n)-i)}}class Eee extends Ei{constructor(){super(...arguments);nt(this,"priority",10);nt(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Dc(Oc.basicOptionalMinutes,n);case"xx":return Dc(Oc.basic,n);case"xxxx":return Dc(Oc.basicOptionalSeconds,n);case"xxxxx":return Dc(Oc.extendedOptionalSeconds,n);case"xxx":default:return Dc(Oc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Xs(n,n.getTime()-Pv(n)-i)}}class Pee extends Ei{constructor(){super(...arguments);nt(this,"priority",40);nt(this,"incompatibleTokens","*")}parse(n){return xP(n)}set(n,r,i){return[Xs(n,i*1e3),{timestampIsSet:!0}]}}class kee extends Ei{constructor(){super(...arguments);nt(this,"priority",20);nt(this,"incompatibleTokens","*")}parse(n){return xP(n)}set(n,r,i){return[Xs(n,i),{timestampIsSet:!0}]}}const Mee={G:new qQ,y:new YQ,Y:new ZQ,R:new KQ,u:new XQ,Q:new JQ,q:new QQ,M:new eee,L:new tee,w:new ree,I:new see,d:new lee,D:new uee,E:new cee,e:new hee,c:new fee,i:new pee,a:new gee,b:new mee,B:new vee,h:new yee,H:new bee,K:new _ee,k:new wee,m:new xee,s:new Lee,S:new Cee,X:new See,x:new Eee,t:new Pee,T:new kee},Aee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Tee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Oee=/^'([^]*?)'?$/,Dee=/''/g,Iee=/\S/,Nee=/[a-zA-Z]/;function Bee(t,e,n,r){var T,O,D,N,U,W,ee,te;const i=()=>Xs((r==null?void 0:r.in)||n,NaN),s=zQ(),o=(r==null?void 0:r.locale)??s.locale??gP,a=(r==null?void 0:r.firstWeekContainsDate)??((O=(T=r==null?void 0:r.locale)==null?void 0:T.options)==null?void 0:O.firstWeekContainsDate)??s.firstWeekContainsDate??((N=(D=s.locale)==null?void 0:D.options)==null?void 0:N.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((W=(U=r==null?void 0:r.locale)==null?void 0:U.options)==null?void 0:W.weekStartsOn)??s.weekStartsOn??((te=(ee=s.locale)==null?void 0:ee.options)==null?void 0:te.weekStartsOn)??0;if(!e)return t?i():Tr(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},f=[new GQ(r==null?void 0:r.in,n)],p=e.match(Tee).map(V=>{const Y=V[0];if(Y in ub){const de=ub[Y];return de(V,o.formatLong)}return V}).join("").match(Aee),y=[];for(let V of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&_P(V)&&cb(V,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&bP(V)&&cb(V,e,t);const Y=V[0],de=Mee[Y];if(de){const{incompatibleTokens:$}=de;if(Array.isArray($)){const le=y.find(ae=>$.includes(ae.token)||ae.token===Y);if(le)throw new RangeError(`The format string mustn't contain \`${le.fullToken}\` and \`${V}\` at the same time`)}else if(de.incompatibleTokens==="*"&&y.length>0)throw new RangeError(`The format string mustn't contain \`${V}\` and any other token at the same time`);y.push({token:Y,fullToken:V});const H=de.run(t,V,o.match,c);if(!H)return i();f.push(H.setter),t=H.rest}else{if(Y.match(Nee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Y+"`");if(V==="''"?V="'":Y==="'"&&(V=Ree(V)),t.indexOf(V)===0)t=t.slice(V.length);else return i()}}if(t.length>0&&Iee.test(t))return i();const m=f.map(V=>V.priority).sort((V,Y)=>Y-V).filter((V,Y,de)=>de.indexOf(V)===Y).map(V=>f.filter(Y=>Y.priority===V).sort((Y,de)=>de.subPriority-Y.subPriority)).map(V=>V[0]);let C=Tr(n,r==null?void 0:r.in);if(isNaN(+C))return i();const S={};for(const V of m){if(!V.validate(C,c))return i();const Y=V.set(C,S,c);Array.isArray(Y)?(C=Y[0],Object.assign(S,Y[1])):C=Y}return C}function Ree(t){return t.match(Oee)[1].replace(Dee,"'")}function Fee(t,e){const n=Tr(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function jee(t,e){const n=Tr(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function zee(t,e){const n=Tr(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function Uee(t,e){const n=()=>Xs(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=Wee(t);let s;if(i.date){const c=Gee(i.date,r);s=qee(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=Yee(i.time),isNaN(a)))return n();if(i.timezone){if(l=Zee(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),f=Tr(0,e==null?void 0:e.in);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return Tr(o+a+l,e==null?void 0:e.in)}const y0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},$ee=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Vee=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Hee=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Wee(t){const e={},n=t.split(y0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],y0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(y0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=y0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Gee(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function qee(t,e){if(e===null)return new Date(NaN);const n=t.match($ee);if(!n)return new Date(NaN);const r=!!n[4],i=Hp(n[1]),s=Hp(n[2])-1,o=Hp(n[3]),a=Hp(n[4]),l=Hp(n[5])-1;if(r)return ete(e,a,l)?Kee(e,a,l):new Date(NaN);{const c=new Date(0);return!Jee(e,s,o)||!Qee(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Hp(t){return t?parseInt(t):1}function Yee(t){const e=t.match(Vee);if(!e)return NaN;const n=q1(e[1]),r=q1(e[2]),i=q1(e[3]);return tte(n,r,i)?n*dm+r*fm+i*1e3:NaN}function q1(t){return t&&parseFloat(t.replace(",","."))||0}function Zee(t){if(t==="Z")return 0;const e=t.match(Hee);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return nte(r,i)?n*(r*dm+i*fm):NaN}function Kee(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Xee=[31,null,31,30,31,30,31,31,30,31,30,31];function SP(t){return t%400===0||t%4===0&&t%100!==0}function Jee(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Xee[e]||(SP(t)?29:28))}function Qee(t,e){return e>=1&&e<=(SP(t)?366:365)}function ete(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function tte(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function nte(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const rte={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};jE._date.override({_id:"date-fns",formats:function(){return rte},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Tr(t):n==="string"&&(typeof e=="string"?t=Bee(t,e,new Date,this.options):t=Uee(t,this.options)),uP(t)?t.getTime():null},format:function(t,e){return FQ(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return L_(t,e);case"second":return PJ(t,e);case"minute":return SJ(t,e);case"hour":return xJ(t,e);case"day":return py(t,e);case"week":return kJ(t,e);case"month":return x_(t,e);case"quarter":return EJ(t,e);case"year":return MJ(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return C_(t,e);case"second":return RJ(t,e);case"minute":return IJ(t,e);case"hour":return DJ(t,e);case"day":return cP(t,e);case"week":return FJ(t,e);case"month":return dP(t,e);case"quarter":return BJ(t,e);case"year":return jJ(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return zee(t);case"minute":return jee(t);case"hour":return Fee(t);case"day":return lb(t);case"week":return Uc(t);case"isoWeek":return Uc(t,{weekStartsOn:+n});case"month":return UJ(t);case"quarter":return zJ(t);case"year":return pP(t);default:return t}},endOf:function(t,e){switch(e){case"second":return qJ(t);case"minute":return WJ(t);case"hour":return VJ(t);case"day":return hP(t);case"week":return HJ(t);case"month":return fP(t);case"quarter":return GJ(t);case"year":return $J(t);default:return t}}});const ite={class:"container mx-auto px-4 py-8 min-h-full"},ste={class:"mb-8"},ote={key:0,class:"mb-6"},ate={class:"flex gap-4"},lte=["disabled"],ute={key:0,value:""},cte=["value"],hte={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},fte={class:"flex"},dte={class:"ml-3"},pte={class:"text-sm font-medium text-red-800"},gte={key:2,class:"mb-6 p-6 bg-gray-100 border border-gray-300 rounded-md text-center"},mte={class:"flex flex-col items-center"},vte={class:"text-gray-600 mb-4"},yte={key:0,class:"mt-2"},bte={key:3,class:"mb-6"},_te={class:"flex gap-4"},wte=["disabled"],xte={key:0,value:""},Lte={key:1,value:""},Cte=["value"],Ste=["disabled"],Ete={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},Pte={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},kte={class:"font-medium"},Mte={class:"font-medium"},Ate={class:"font-medium"},Tte={class:"text-gray-500"},Ote={class:"font-medium"},Dte={class:"font-medium"},Ite={class:"font-medium"},Nte={class:"md:col-span-2 lg:col-span-3 flex items-center"},Bte=["href"],Rte={key:4,class:"mb-6"},Fte={class:"border-b border-gray-200"},jte={class:"-mb-px flex space-x-8","aria-label":"Tabs"},zte=["onClick"],Ute={key:5,class:"mb-8"},$te={class:"flex justify-between items-center mb-4"},Vte={class:"text-sm text-gray-600"},Hte={key:0,class:"flex items-center"},Wte={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Gte={class:"bg-white rounded-lg shadow-md p-6"},qte={class:"text-4xl font-bold text-primary-600 mb-2"},Yte={class:"text-sm text-gray-600"},Zte={class:"bg-white rounded-lg shadow-md p-6"},Kte={class:"text-4xl font-bold text-primary-600 mb-2"},Xte={class:"mt-4"},Jte={class:"w-full bg-gray-200 rounded-full h-2.5"},Qte={class:"bg-white rounded-lg shadow-md p-6"},ene={class:"text-4xl font-bold text-primary-600 mb-2"},tne={class:"text-sm text-gray-600"},nne={class:"bg-white rounded-lg shadow-md p-6"},rne={class:"text-4xl font-bold text-primary-600 mb-2"},ine={class:"text-sm text-gray-600"},sne={class:"bg-white rounded-lg shadow-md p-6"},one={class:"text-4xl font-bold text-primary-600 mb-2"},ane={class:"text-sm text-gray-600"},lne={class:"bg-white rounded-lg shadow-md p-6"},une={class:"text-4xl font-bold text-primary-600 mb-2"},cne={class:"text-sm text-gray-600"},hne={key:6,class:"mb-8"},fne={class:"flex justify-between items-center mb-4"},dne={class:"text-sm text-gray-600"},pne={class:"flex items-center"},gne={key:0,class:"flex items-center mr-3"},mne=["disabled"],vne={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},yne={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},bne=["value"],_ne={key:0,class:"mt-1 text-sm text-red-600"},wne={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},xne={class:"bg-white rounded-lg shadow-md p-6"},Lne={class:"chart-container"},Cne={class:"bg-white rounded-lg shadow-md p-6"},Sne={class:"chart-container"},Ene={class:"bg-white rounded-lg shadow-md p-6"},Pne={class:"chart-container"},kne={class:"bg-white rounded-lg shadow-md p-6"},Mne={class:"chart-container"},Ane={class:"bg-white rounded-lg shadow-md p-6"},Tne={class:"chart-container"},One={class:"bg-white rounded-lg shadow-md p-6"},Dne={class:"chart-container"},Ine=ws({__name:"MeteoView",setup(t){const e=ul(),n=po(),r=kt({}),i=kt(new Date),s=kt(""),o=kt([]),a=kt(""),l=kt([]),c=kt(null),f=kt(""),p=kt(""),y=kt(!1);ir(()=>{var ce;return((ce=n.user)==null?void 0:ce.user_type)||""});const m=ir(()=>n.isAdmin);let C=null;const S=ir(()=>!a.value||!o.value.length?null:o.value.find(ce=>ce.mac===a.value));function T(ce){return ce?ce.latitude&&ce.longitude&&ce.latitude!==0&&ce.longitude!==0:!1}function O(ce){return T(ce)?`${ce.latitude.toFixed(6)}, ${ce.longitude.toFixed(6)}`:""}function D(ce){if(!T(ce))return"#";const Q=ce.latitude,Pe=ce.longitude,Ve=encodeURIComponent(ce.name||"Station météo");return`https://www.google.com/maps/search/?api=1&query=${Q},${Pe}&query_place_id=${Ve}`}async function N(){try{f.value="";const ce={};m.value&&c.value&&(ce.entreprise=c.value);const Q=await a1.getDevices(ce);let Pe=[];if(Q.data&&Q.data.devices&&Array.isArray(Q.data.devices)&&Q.data.devices.length>0&&typeof Q.data.devices[1]=="string"){let Ve=Q.data.devices[1];f.value=Ve,console.warn("[fetchDevices] Message d'erreur API reçu:",f.value);return}if(Q.data&&Q.data.devices&&Array.isArray(Q.data.devices))Pe=Q.data.devices;else if(Array.isArray(Q.data))Pe=Q.data;else if(typeof Q.data=="object"&&Q.data!==null){for(const Ve in Q.data)if(Array.isArray(Q.data[Ve])){Pe=Q.data[Ve];break}}o.value=Pe.filter(Ve=>Ve!==null&&typeof Ve=="object").map(Ve=>{var ot,at;const Qe=Ve.mac||Ve.imei;return{id:Ve.id,name:Ve.name||`Station ${Qe}`,mac:Qe,model:((ot=Ve.stationtype)==null?void 0:ot.split("_")[0])||"Inconnu",firmware_version:(at=Ve.stationtype)!=null&&at.includes("_V")?Ve.stationtype.split("_V")[1]:"1.0",timezone:Ve.date_zone_id||"UTC",created_at:Ve.createtime?new Date(Ve.createtime*1e3).toISOString():new Date().toISOString(),latitude:Ve.latitude||0,longitude:Ve.longitude||0}}),o.value.length>0?a.value=o.value[0].mac:(console.warn("[fetchDevices] Aucun appareil disponible"),r.value={})}catch(ce){console.error("[fetchDevices] Erreur lors de la récupération des appareils:",ce),ce.response&&ce.response.data&&ce.response.data.error?f.value=ce.response.data.error:(f.value="Erreur lors de la récupération des stations météo",e.error("Erreur lors de la récupération des stations météo")),o.value=[],a.value="",r.value={}}}async function U(){try{if(!a.value){console.warn("[fetchWeatherData] Aucun appareil sélectionné");return}f.value="",y.value=!0;const ce={mac:a.value};m.value&&c.value&&(ce.entreprise=c.value);const Q=await a1.getRealTimeData(ce);let Pe;Q.data&&"data"in Q.data?Pe=Q.data.data:Q.data&&("outdoor"in Q.data||"indoor"in Q.data)?Pe=Q.data:(Pe={},console.warn("[fetchWeatherData] Format de réponse non reconnu")),r.value=Pe,i.value=new Date,s.value=new Date().toLocaleString(),f.value=""}catch(ce){console.error("[fetchWeatherData] Erreur lors de la récupération des données météo:",ce),ce.response&&ce.response.data&&ce.response.data.error?f.value=ce.response.data.error:(f.value="Erreur lors de la récupération des données météo",e.error("Erreur lors de la récupération des données météo")),r.value={}}finally{y.value=!1}}function W(ce){if(ce==null)return"0";const Q=typeof ce=="string"?parseFloat(ce):ce;return isNaN(Q)?"0":((Q-32)*5/9).toFixed(1)}function ee(ce){if(ce==null)return"0";const Q=typeof ce=="string"?parseFloat(ce):ce;return isNaN(Q)?"0":(Q*1.60934).toFixed(1)}function te(ce){if(ce==null)return"0";const Q=typeof ce=="string"?parseFloat(ce):ce;return isNaN(Q)?"0":(Q*25.4).toFixed(1)}function V(ce){if(ce==null)return"0";const Q=typeof ce=="string"?parseFloat(ce):ce;return isNaN(Q)?"0":(Q*33.8639).toFixed(1)}function Y(ce){if(!ce)return"N/A";const Q=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],Pe=Math.round(ce/22.5)%16;return Q[Pe]}function de(ce){return ce?ce>0?"En hausse":"En baisse":"Stable"}async function $(){if(m.value)try{const ce=await ha.getUsers({role:"ENTREPRISE"});l.value=ce.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(ce){console.error("Erreur lors de la récupération des entreprises:",ce),e.error("Erreur lors de la récupération des entreprises")}}async function H(){try{o.value=[],a.value="",r.value={},f.value="",Object.values(Ae).forEach(ce=>{try{ce.destroy()}catch(Q){console.error("Erreur lors de la destruction d'un graphique:",Q)}}),Ae={},await N()}catch(ce){console.error("Erreur lors de la récupération des appareils avec l'entreprise:",ce),e.error("Erreur lors du changement d'entreprise")}}const le=[{id:"realtime",name:"Temps réel"},{id:"history",name:"Historique"}],ae=kt("realtime"),z=kt("today"),B=kt("5min"),X=kt(""),K=kt(""),ye=()=>{const ce=new Date,Q=new Date(ce);Q.setDate(ce.getDate()-1),X.value=Q.toISOString().split("T")[0],K.value=Q.toISOString().split("T")[0]},Te=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],Ue=ir(()=>{const ce=Ee(),Q=new Date(ce.start),Pe=new Date(ce.end);Pe.setHours(23,59,59,999);const Ve=Math.abs(Pe.getTime()-Q.getTime()),Qe=Math.ceil(Ve/(1e3*60*60*24)),at=Math.abs(new Date().getTime()-Q.getTime()),pt=Math.ceil(at/(1e3*60*60*24));return Te.filter(Ft=>Qe<=Ft.maxDays&&pt<=Ft.maxPastDays)});vi(z,ce=>{ce==="custom"&&ye(),!Ue.value.some(Pe=>Pe.value===B.value)&&Ue.value.length>0&&(B.value=Ue.value[0].value)}),vi([X,K],()=>{z.value==="custom"&&!Ue.value.some(Q=>Q.value===B.value)&&Ue.value.length>0&&(B.value=Ue.value[0].value)});const J=kt(null),ie=kt(null),se=kt(null),pe=kt(null),we=kt(null),be=kt(null);let Ae={};const Ee=()=>{let ce=new Date,Q=new Date;switch(z.value){case"today":ce.setHours(0,0,0,0);break;case"yesterday":ce.setDate(ce.getDate()-1),ce.setHours(0,0,0,0),Q.setDate(Q.getDate()-1),Q.setHours(23,59,59,999);break;case"week":ce.setDate(ce.getDate()-7);break;case"month":ce.setDate(ce.getDate()-30);break;case"custom":ce=new Date(X.value),Q=new Date(K.value);break}return{start:ce.toISOString().split("T")[0],end:Q.toISOString().split("T")[0]}},Je=async()=>{try{if(gt.value)return;if(gt.value=!0,Ue.value.length===0){e.warning("Aucun intervalle disponible pour cette période"),gt.value=!1;return}Ue.value.some(Ve=>Ve.value===B.value)||(B.value=Ue.value[0].value);const Q=Ee(),Pe={mac:a.value,start_date:Q.start,end_date:Q.end,cycle_type:B.value};m.value&&c.value&&(Pe.entreprise=c.value);try{const Qe=(await a1.getHistoryData(Pe)).data,ot=[{type:"temp",ref:J},{type:"humidity",ref:ie},{type:"pressure",ref:se},{type:"wind",ref:pe},{type:"rain",ref:we},{type:"solar",ref:be}];for(const at of ot)if(at.ref.value){const pt=oe(Qe,at.type);_t(at.type,at.ref.value,pt)}s.value=new Date().toLocaleString()}catch(Ve){console.error("[updateAllCharts] Erreur lors de la récupération des données:",Ve),e.error("Erreur lors de la récupération des données historiques")}finally{gt.value=!1}}catch(ce){console.error("[updateAllCharts] Erreur lors de la mise à jour des graphiques:",ce),e.error("Erreur lors de la mise à jour des graphiques"),gt.value=!1}},gt=kt(!1),_t=(ce,Q,Pe)=>{try{if(Ae[ce]&&(Ae[ce].destroy(),delete Ae[ce]),!Pe.datasets||!Pe.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${ce}`),Ae[ce]=new Tc(Q,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donnée disponible"}}}});return}let Ve="hour";B.value==="5min"||B.value==="30min"?Ve="hour":(B.value==="4hour"||B.value==="1day")&&(Ve="day");const Qe=Ee(),ot=new Date(Qe.start),at=new Date(Qe.end);at.setHours(23,59,59,999);const pt={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(Ft){return Ft.length>0?new Date(Ft[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:Ve,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:ot.getTime(),max:at.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:ue(ce)},ticks:{callback:function(Ft){const Bt=typeof Ft=="string"?parseFloat(Ft):Ft;switch(ce){case"temp":return Bt.toFixed(1)+"°C";case"humidity":return Bt.toFixed(0)+"%";case"pressure":return Bt.toFixed(0)+" hPa";case"wind":case"rain":return Bt.toFixed(1)+(ce==="wind"?" km/h":" mm");case"solar":return Bt.toFixed(0)+" W/m²";default:return Bt}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};Ae[ce]=new Tc(Q,{type:"line",data:{datasets:Pe.datasets||[]},options:pt})}catch(Ve){console.error(`[updateChart] Erreur lors de la mise à jour du graphique ${ce}:`,Ve)}},ue=ce=>{switch(ce){case"temp":return"Température (°C)";case"humidity":return"Humidité (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Précipitations (mm)";case"solar":return"Rayonnement (W/m²)";default:return""}},oe=(ce,Q)=>{var ot,at,pt,Ft,Bt,Zt,ln,un,Sn,qe,it,Ze,Ut,Yt,Ln,gn,vn,jn,mn;if(!ce)return console.warn(`[formatHistoryDataForChart] Pas de données pour ${Q}`),null;let Pe;if("data"in ce)Pe=ce.data;else if(Q in ce)Pe=ce;else return console.warn(`[formatHistoryDataForChart] Structure de données non reconnue pour ${Q}`),null;const Ve=[],Qe=(Jt,cn,qn,Kn)=>{if(!Array.isArray(Jt)){console.warn(`[formatHistoryDataForChart] Les données pour ${cn} ne sont pas un tableau`);return}const rr=Jt.map(zn=>{const _r=parseFloat(String(zn.value));return{x:zn.time,y:Kn?Kn(_r):_r}}).filter(zn=>!isNaN(zn.y));rr.length>0&&Ve.push({label:cn,data:rr,borderColor:qn,fill:!1,tension:.4})};switch(Q){case"temp":(at=(ot=Pe.outdoor)==null?void 0:ot.temperature)!=null&&at.list?Qe(Object.entries(Pe.outdoor.temperature.list).map(([Jt,cn])=>({time:parseInt(Jt)*1e3,value:cn})),"Température","#FF6384",Jt=>(Jt-32)*5/9):(pt=Pe.outdoor)!=null&&pt.temperature&&Qe(Pe.outdoor.temperature,"Température","#FF6384",Jt=>(Jt-32)*5/9);break;case"humidity":(Bt=(Ft=Pe.outdoor)==null?void 0:Ft.humidity)!=null&&Bt.list?Qe(Object.entries(Pe.outdoor.humidity.list).map(([Jt,cn])=>({time:parseInt(Jt)*1e3,value:cn})),"Humidité","#36A2EB"):(Zt=Pe.outdoor)!=null&&Zt.humidity&&Qe(Pe.outdoor.humidity,"Humidité","#36A2EB");break;case"pressure":(un=(ln=Pe.pressure)==null?void 0:ln.absolute)!=null&&un.list?Qe(Object.entries(Pe.pressure.absolute.list).map(([Jt,cn])=>({time:parseInt(Jt)*1e3,value:cn})),"Pression","#4BC0C0",Jt=>Jt*33.8639):(Sn=Pe.pressure)!=null&&Sn.absolute&&Qe(Pe.pressure.absolute,"Pression","#4BC0C0",Jt=>Jt*33.8639);break;case"wind":(it=(qe=Pe.wind)==null?void 0:qe.wind_speed)!=null&&it.list?(Qe(Object.entries(Pe.wind.wind_speed.list).map(([Jt,cn])=>({time:parseInt(Jt)*1e3,value:cn})),"Vitesse du vent","#FFCE56",Jt=>Jt*1.60934),(Ze=Pe.wind.wind_gust)!=null&&Ze.list&&Qe(Object.entries(Pe.wind.wind_gust.list).map(([Jt,cn])=>({time:parseInt(Jt)*1e3,value:cn})),"Rafales","#FF9F40",Jt=>Jt*1.60934)):(Ut=Pe.wind)!=null&&Ut.wind_speed&&(Qe(Pe.wind.wind_speed,"Vitesse du vent","#FFCE56",Jt=>Jt*1.60934),Pe.wind.wind_gust&&Qe(Pe.wind.wind_gust,"Rafales","#FF9F40",Jt=>Jt*1.60934));break;case"rain":(Ln=(Yt=Pe.rainfall)==null?void 0:Yt.daily)!=null&&Ln.list?Qe(Object.entries(Pe.rainfall.daily.list).map(([Jt,cn])=>({time:parseInt(Jt)*1e3,value:cn})),"Précipitations journalières","#9966FF",Jt=>Jt*25.4):(gn=Pe.rainfall)!=null&&gn.daily&&Qe(Pe.rainfall.daily,"Précipitations journalières","#9966FF",Jt=>Jt*25.4);break;case"solar":(jn=(vn=Pe.solar_and_uvi)==null?void 0:vn.solar)!=null&&jn.list?Qe(Object.entries(Pe.solar_and_uvi.solar.list).map(([Jt,cn])=>({time:parseInt(Jt)*1e3,value:cn})),"Rayonnement solaire","#FF9F40"):(mn=Pe.solar_and_uvi)!=null&&mn.solar&&Qe(Pe.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return{datasets:Ve}};return ku(()=>{Object.values(Ae).forEach(ce=>ce.destroy())}),vi([z,B,X,K],()=>{ae.value==="history"&&a.value&&Je()}),Ks(async()=>{const ce=[];m.value&&ce.push($()),await Promise.all(ce),await N(),C=window.setInterval(U,5*60*1e3)}),vi(c,async ce=>{m.value&&await N()}),vi(a,ce=>{ce?(U(),ae.value==="history"&&Je()):r.value={}}),vi(ae,ce=>{ce==="history"&&a.value&&Je()}),ku(()=>{C&&clearInterval(C)}),(ce,Q)=>{var Ve,Qe,ot,at,pt,Ft,Bt,Zt,ln,un,Sn,qe,it,Ze,Ut,Yt,Ln,gn,vn,jn,mn,Jt,cn,qn,Kn,rr,zn,_r,Ri,Pi,Rs,ls,mt,Ke,$t,On,Dn,Gt,on;const Pe=Ob("router-link");return Ne(),je("div",ite,[P("div",ste,[Q[41]||(Q[41]=P("h1",{class:"text-3xl font-bold mb-4"},"Météo",-1)),m.value?(Ne(),je("div",ote,[Q[6]||(Q[6]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une entreprise ",-1)),P("div",ate,[Fn(P("select",{"onUpdate:modelValue":Q[0]||(Q[0]=dt=>c.value=dt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:H},[l.value.length?Kt("",!0):(Ne(),je("option",ute,"Chargement des entreprises...")),(Ne(!0),je(bn,null,ar(l.value,dt=>(Ne(),je("option",{key:dt.id,value:dt.id},zt(dt.company_name||`${dt.first_name} ${dt.last_name}`),9,cte))),128))],40,lte),[[ss,c.value]])])])):Kt("",!0),f.value?(Ne(),je("div",hte,[P("div",fte,[Q[7]||(Q[7]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",dte,[P("h3",pte,zt(f.value),1)])])])):Kt("",!0),f.value&&(f.value.includes("clés API")||f.value.includes("Ecowitt"))?(Ne(),je("div",gte,[P("div",mte,[Q[9]||(Q[9]=P("svg",{class:"h-12 w-12 text-gray-400 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)),Q[10]||(Q[10]=P("h2",{class:"text-xl font-bold text-gray-700 mb-2"},"Configuration requise",-1)),P("p",vte,zt(f.value),1),f.value.includes("ajouter dans la gestion")?(Ne(),je("div",yte,[Kr(Pe,{to:"/users",class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:Nl(()=>Q[8]||(Q[8]=[jr(" Configurer les clés API ")])),_:1})])):Kt("",!0)])])):Kt("",!0),!f.value||!(f.value.includes("clés API")||f.value.includes("Ecowitt"))?(Ne(),je("div",bte,[Q[19]||(Q[19]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une station ",-1)),P("div",_te,[Fn(P("select",{"onUpdate:modelValue":Q[1]||(Q[1]=dt=>a.value=dt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||f.value)},[!o.value.length&&!f.value?(Ne(),je("option",xte,"Chargement des stations...")):Kt("",!0),f.value?(Ne(),je("option",Lte,"Aucune station disponible")):Kt("",!0),(Ne(!0),je(bn,null,ar(o.value,dt=>(Ne(),je("option",{key:dt.mac,value:dt.mac},zt(dt.name)+" ("+zt(dt.model)+" - v"+zt(dt.firmware_version)+") ",9,Cte))),128))],8,wte),[[ss,a.value]]),P("button",{onClick:U,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||f.value)}," Actualiser ",8,Ste)]),S.value?(Ne(),je("div",Ete,[Q[18]||(Q[18]=P("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),P("div",Pte,[P("div",null,[Q[11]||(Q[11]=P("span",{class:"text-gray-500"},"Modèle:",-1)),P("p",kte,zt(S.value.model),1)]),P("div",null,[Q[12]||(Q[12]=P("span",{class:"text-gray-500"},"Version:",-1)),P("p",Mte,zt(S.value.firmware_version),1)]),P("div",null,[Q[13]||(Q[13]=P("span",{class:"text-gray-500"},"ID:",-1)),P("p",Ate,zt(S.value.id),1)]),P("div",null,[P("span",Tte,zt((Ve=S.value.mac)!=null&&Ve.includes(":")?"MAC:":"IMEI:"),1),P("p",Ote,zt(S.value.mac),1)]),P("div",null,[Q[14]||(Q[14]=P("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),P("p",Dte,zt(S.value.timezone),1)]),P("div",null,[Q[15]||(Q[15]=P("span",{class:"text-gray-500"},"Installation:",-1)),P("p",Ite,zt(new Date(S.value.created_at).toLocaleDateString()),1)]),P("div",Nte,[Q[17]||(Q[17]=P("span",{class:"text-gray-500 mr-2"},"Position:",-1)),T(S.value)?(Ne(),je("a",{key:0,href:D(S.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[Q[16]||(Q[16]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),jr(" "+zt(O(S.value)),1)],8,Bte)):Kt("",!0)])])])):Kt("",!0)])):Kt("",!0),!f.value||!(f.value.includes("clés API")||f.value.includes("Ecowitt"))?(Ne(),je("div",Rte,[P("div",Fte,[P("nav",jte,[(Ne(),je(bn,null,ar(le,dt=>P("button",{key:dt.id,onClick:fn=>ae.value=dt.id,class:Si([ae.value===dt.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},zt(dt.name),11,zte)),64))])])])):Kt("",!0),(!f.value||!(f.value.includes("clés API")||f.value.includes("Ecowitt")))&&ae.value==="realtime"?(Ne(),je("div",Ute,[P("div",$te,[P("p",Vte," Dernière mise à jour : "+zt(i.value?new Date(i.value).toLocaleString():"Jamais"),1),y.value?(Ne(),je("div",Hte,Q[20]||(Q[20]=[P("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),P("span",{class:"text-primary-600"},"Chargement des données...",-1)]))):Kt("",!0)]),P("div",Wte,[P("div",Gte,[Q[21]||(Q[21]=P("h2",{class:"text-xl font-semibold mb-4"},"Température Extérieure",-1)),P("div",qte,zt(W((ot=(Qe=r.value.outdoor)==null?void 0:Qe.temperature)==null?void 0:ot.value))+"°C ",1),P("div",Yte," Min: "+zt(W(((pt=(at=r.value.outdoor)==null?void 0:at.temperature)==null?void 0:pt.min)||"0"))+"°C Max: "+zt(W(((Bt=(Ft=r.value.outdoor)==null?void 0:Ft.temperature)==null?void 0:Bt.max)||"0"))+"°C ",1)]),P("div",Zte,[Q[22]||(Q[22]=P("h2",{class:"text-xl font-semibold mb-4"},"Humidité",-1)),P("div",Kte,zt(((ln=(Zt=r.value.outdoor)==null?void 0:Zt.humidity)==null?void 0:ln.value)||"0")+"% ",1),P("div",Xte,[P("div",Jte,[P("div",{class:"bg-primary-600 h-2.5 rounded-full",style:Fl({width:`${((Sn=(un=r.value.outdoor)==null?void 0:un.humidity)==null?void 0:Sn.value)||0}%`})},null,4)])])]),P("div",Qte,[Q[23]||(Q[23]=P("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphérique",-1)),P("div",ene,zt(V((it=(qe=r.value.pressure)==null?void 0:qe.absolute)==null?void 0:it.value))+" hPa ",1),P("div",tne," Tendance: "+zt(de((Ut=(Ze=r.value.pressure)==null?void 0:Ze.absolute)==null?void 0:Ut.trend)),1)]),P("div",nne,[Q[25]||(Q[25]=P("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),P("div",rne,zt(ee(((Ln=(Yt=r.value.wind)==null?void 0:Yt.speed)==null?void 0:Ln.value)||((vn=(gn=r.value.wind)==null?void 0:gn.wind_speed)==null?void 0:vn.value)))+" km/h ",1),P("div",ine,[jr(" Direction: "+zt(Y(((mn=(jn=r.value.wind)==null?void 0:jn.direction)==null?void 0:mn.value)||((cn=(Jt=r.value.wind)==null?void 0:Jt.wind_direction)==null?void 0:cn.value)))+" ",1),Q[24]||(Q[24]=P("br",null,null,-1)),jr(" Rafales: "+zt(ee(((Kn=(qn=r.value.wind)==null?void 0:qn.gust)==null?void 0:Kn.value)||((zn=(rr=r.value.wind)==null?void 0:rr.wind_gust)==null?void 0:zn.value)))+" km/h ",1)])]),P("div",sne,[Q[27]||(Q[27]=P("h2",{class:"text-xl font-semibold mb-4"},"Précipitations",-1)),P("div",one,zt(te((Ri=(_r=r.value.rainfall)==null?void 0:_r.daily)==null?void 0:Ri.value))+" mm ",1),P("div",ane,[jr(" Taux: "+zt(te(((Rs=(Pi=r.value.rainfall)==null?void 0:Pi.rate)==null?void 0:Rs.value)||((mt=(ls=r.value.rainfall)==null?void 0:ls.rain_rate)==null?void 0:mt.value)))+" mm/h ",1),Q[26]||(Q[26]=P("br",null,null,-1)),jr(" Mensuel: "+zt(te(($t=(Ke=r.value.rainfall)==null?void 0:Ke.monthly)==null?void 0:$t.value))+" mm ",1)])]),P("div",lne,[Q[28]||(Q[28]=P("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),P("div",une,zt(((Dn=(On=r.value.solar_and_uvi)==null?void 0:On.solar)==null?void 0:Dn.value)||"0")+" W/m² ",1),P("div",cne," UV: "+zt(((on=(Gt=r.value.solar_and_uvi)==null?void 0:Gt.uvi)==null?void 0:on.value)||"0"),1)])])])):(!f.value||!(f.value.includes("clés API")||f.value.includes("Ecowitt")))&&ae.value==="history"?(Ne(),je("div",hne,[P("div",fne,[P("p",dne," Dernière mise à jour : "+zt(s.value?s.value:"Jamais"),1),P("div",pne,[gt.value?(Ne(),je("div",gne,Q[29]||(Q[29]=[P("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),P("span",{class:"text-sm text-primary-600"},"Chargement des données...",-1)]))):Kt("",!0),P("button",{onClick:Je,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value||gt.value}," Actualiser ",8,mne)])]),P("div",vne,[P("div",null,[Q[31]||(Q[31]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Période ",-1)),Fn(P("select",{"onUpdate:modelValue":Q[2]||(Q[2]=dt=>z.value=dt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},Q[30]||(Q[30]=[lu('<option value="today" data-v-b026e497>Aujourd&#39;hui</option><option value="yesterday" data-v-b026e497>Hier</option><option value="week" data-v-b026e497>7 derniers jours</option><option value="month" data-v-b026e497>30 derniers jours</option><option value="custom" data-v-b026e497>Période personnalisée</option>',5)]),512),[[ss,z.value]])]),z.value==="custom"?(Ne(),je("div",yne,[P("div",null,[Q[32]||(Q[32]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de début ",-1)),Fn(P("input",{type:"date","onUpdate:modelValue":Q[3]||(Q[3]=dt=>X.value=dt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[fi,X.value]])]),P("div",null,[Q[33]||(Q[33]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),Fn(P("input",{type:"date","onUpdate:modelValue":Q[4]||(Q[4]=dt=>K.value=dt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[fi,K.value]])])])):Kt("",!0),P("div",null,[Q[34]||(Q[34]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),Fn(P("select",{"onUpdate:modelValue":Q[5]||(Q[5]=dt=>B.value=dt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Ne(!0),je(bn,null,ar(Ue.value,dt=>(Ne(),je("option",{key:dt.value,value:dt.value},zt(dt.label),9,bne))),128))],512),[[ss,B.value]]),p.value?(Ne(),je("div",_ne,zt(p.value),1)):Kt("",!0)])]),P("div",wne,[P("div",xne,[Q[35]||(Q[35]=P("h3",{class:"text-lg font-semibold mb-4"},"Température",-1)),P("div",Lne,[P("canvas",{ref_key:"tempChart",ref:J},null,512)])]),P("div",Cne,[Q[36]||(Q[36]=P("h3",{class:"text-lg font-semibold mb-4"},"Humidité",-1)),P("div",Sne,[P("canvas",{ref_key:"humidityChart",ref:ie},null,512)])]),P("div",Ene,[Q[37]||(Q[37]=P("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),P("div",Pne,[P("canvas",{ref_key:"pressureChart",ref:se},null,512)])]),P("div",kne,[Q[38]||(Q[38]=P("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),P("div",Mne,[P("canvas",{ref_key:"windChart",ref:pe},null,512)])]),P("div",Ane,[Q[39]||(Q[39]=P("h3",{class:"text-lg font-semibold mb-4"},"Précipitations",-1)),P("div",Tne,[P("canvas",{ref_key:"rainChart",ref:we},null,512)])]),P("div",One,[Q[40]||(Q[40]=P("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),P("div",Dne,[P("canvas",{ref_key:"solarChart",ref:be},null,512)])])])])):Kt("",!0)])])}}}),Nne=$c(Ine,[["__scopeId","data-v-b026e497"]]),Bne={class:"settings-page max-w-xl mx-auto py-10 px-4 min-h-full"},Rne={key:0,class:"mb-6"},Fne={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 mb-6"},jne={class:"flex"},zne={class:"ml-3"},Une={class:"text-sm text-red-700"},$ne={class:"bg-white shadow rounded-lg p-6"},Vne=["disabled"],Hne=["disabled"],Wne={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Gne={key:0,class:"text-green-600 mt-2"},qne=ws({__name:"ParametresView",setup(t){const e=kt(""),n=kt(""),r=kt(!1),i=kt("");Ks(async()=>{await s()});async function s(){r.value=!0,i.value="";try{const a=await L2.getGoogleMapsApiKey();a.data&&a.data.key_status==="configured"?e.value="••••••••••••••••••••••••••":e.value=""}catch(a){console.error("Erreur lors de la récupération de la clé API:",a),i.value="Impossible de récupérer la clé API. Veuillez réessayer plus tard."}finally{r.value=!1}}async function o(){if(!e.value){i.value="La clé API est requise.";return}r.value=!0,i.value="",n.value="";try{await L2.setGoogleMapsApiKey(e.value),n.value="Clé API sauvegardée avec succès.",setTimeout(()=>{n.value=""},3e3)}catch(a){console.error("Erreur lors de la sauvegarde de la clé API:",a),i.value="Impossible de sauvegarder la clé API. Veuillez réessayer plus tard."}finally{r.value=!1}}return(a,l)=>(Ne(),je("div",Bne,[l[6]||(l[6]=P("h1",{class:"text-2xl font-bold mb-6"},"Paramètres de l'application",-1)),r.value?(Ne(),je("div",Rne,l[1]||(l[1]=[lu('<div class="animate-pulse flex space-x-4" data-v-097ea248><div class="flex-1 space-y-4 py-1" data-v-097ea248><div class="h-4 bg-gray-200 rounded w-3/4" data-v-097ea248></div><div class="space-y-2" data-v-097ea248><div class="h-4 bg-gray-200 rounded" data-v-097ea248></div><div class="h-4 bg-gray-200 rounded w-5/6" data-v-097ea248></div></div></div></div>',1)]))):Kt("",!0),i.value?(Ne(),je("div",Fne,[P("div",jne,[l[2]||(l[2]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",zne,[P("p",Une,zt(i.value),1)])])])):Kt("",!0),P("div",$ne,[P("form",{onSubmit:Rl(o,["prevent"]),class:"space-y-4"},[P("div",null,[l[3]||(l[3]=P("label",{for:"google-maps-api-key",class:"block text-sm font-medium text-gray-700"},"Clé API Google Maps",-1)),Fn(P("input",{id:"google-maps-api-key","onUpdate:modelValue":l[0]||(l[0]=c=>e.value=c),type:"password",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre clé API Google Maps",autocomplete:"off",disabled:r.value},null,8,Vne),[[fi,e.value]])]),P("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r.value},[r.value?(Ne(),je("svg",Wne,l[4]||(l[4]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Kt("",!0),l[5]||(l[5]=jr(" Sauvegarder "))],8,Hne),n.value?(Ne(),je("p",Gne,zt(n.value),1)):Kt("",!0)],32)])]))}}),Yne=$c(qne,[["__scopeId","data-v-097ea248"]]),EP=NN({history:fN("/"),routes:[{path:"/",name:"home",component:V4,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"],isMapRoute:!0}},{path:"/meteo",name:"meteo",component:Nne,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:$W,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>ph(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:zF,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>ph(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>ph(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:lF,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:gq,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:V4,meta:{requiresAuth:!0,isMapRoute:!0}},{path:"/parametres",name:"parametres",component:Yne,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>ph(()=>import("./NotFoundView.js"),[])}]});EP.beforeEach(async(t,e,n)=>{var a,l;const r=po();if(!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function Zne(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function f(){if("serviceWorker"in navigator){if(a=await ph(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=f(),c}const k_=ov(zR),PP=qD();k_.use(PP);k_.use(EP);const Kne=po(PP);window.INITIAL_STATE&&Kne.initialize(window.INITIAL_STATE);k_.mount("#app");Zne({immediate:!0,onRegistered(t){},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){}});export{Ni as _,cu as a,P as b,je as c,ws as d,Kt as e,_n as f,jr as g,Fn as h,Ne as i,lu as j,Kr as k,Nl as l,Ob as m,Si as n,Ks as o,RN as p,ry as q,kt as r,Zo as s,zt as t,po as u,fi as v,Rl as w,qb as x};

var BD=Object.defineProperty;var FD=(n,e,t)=>e in n?BD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var tt=(n,e,t)=>FD(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function py(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Ri={},gp=[],Yu=()=>{},jD=()=>!1,km=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),u2=n=>n.startsWith("onUpdate:"),Ps=Object.assign,c2=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},zD=Object.prototype.hasOwnProperty,ns=(n,e)=>zD.call(n,e),dr=Array.isArray,mp=n=>jp(n)==="[object Map]",Cf=n=>jp(n)==="[object Set]",Nx=n=>jp(n)==="[object Date]",$D=n=>jp(n)==="[object RegExp]",Nr=n=>typeof n=="function",Ns=n=>typeof n=="string",Cc=n=>typeof n=="symbol",vs=n=>n!==null&&typeof n=="object",d2=n=>(vs(n)||Nr(n))&&Nr(n.then)&&Nr(n.catch),BL=Object.prototype.toString,jp=n=>BL.call(n),UD=n=>jp(n).slice(8,-1),gy=n=>jp(n)==="[object Object]",h2=n=>Ns(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,vp=py(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),my=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},VD=/-(\w)/g,Va=my(n=>n.replace(VD,(e,t)=>t?t.toUpperCase():"")),HD=/\B([A-Z])/g,tu=my(n=>n.replace(HD,"-$1").toLowerCase()),Am=my(n=>n.charAt(0).toUpperCase()+n.slice(1)),Rg=my(n=>n?`on${Am(n)}`:""),Al=(n,e)=>!Object.is(n,e),yp=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},FL=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},Ev=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Pv=n=>{const e=Ns(n)?Number(n):NaN;return isNaN(e)?n:e};let Rx;const vy=()=>Rx||(Rx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),GD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",WD=py(GD);function iu(n){if(dr(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Ns(r)?ZD(r):iu(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Ns(n)||vs(n))return n}const qD=/;(?![^(]*\))/g,YD=/:([^]+)/,KD=/\/\*[^]*?\*\//g;function ZD(n){const e={};return n.replace(KD,"").split(qD).forEach(t=>{if(t){const r=t.split(YD);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Mi(n){let e="";if(Ns(n))e=n;else if(dr(n))for(let t=0;t<n.length;t++){const r=Mi(n[t]);r&&(e+=r+" ")}else if(vs(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function XD(n){if(!n)return null;let{class:e,style:t}=n;return e&&!Ns(e)&&(n.class=Mi(e)),t&&(n.style=iu(t)),n}const JD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",QD=py(JD);function jL(n){return!!n||n===""}function eI(n,e){if(n.length!==e.length)return!1;let t=!0;for(let r=0;t&&r<n.length;r++)t=Lh(n[r],e[r]);return t}function Lh(n,e){if(n===e)return!0;let t=Nx(n),r=Nx(e);if(t||r)return t&&r?n.getTime()===e.getTime():!1;if(t=Cc(n),r=Cc(e),t||r)return n===e;if(t=dr(n),r=dr(e),t||r)return t&&r?eI(n,e):!1;if(t=vs(n),r=vs(e),t||r){if(!t||!r)return!1;const i=Object.keys(n).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Lh(n[o],e[o]))return!1}}return String(n)===String(e)}function yy(n,e){return n.findIndex(t=>Lh(t,e))}const zL=n=>!!(n&&n.__v_isRef===!0),Dt=n=>Ns(n)?n:n==null?"":dr(n)||vs(n)&&(n.toString===BL||!Nr(n.toString))?zL(n)?Dt(n.value):JSON.stringify(n,$L,2):String(n),$L=(n,e)=>zL(e)?$L(n,e.value):mp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[T1(r,s)+" =>"]=i,t),{})}:Cf(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>T1(t))}:Cc(e)?T1(e):vs(e)&&!dr(e)&&!gy(e)?String(e):e,T1=(n,e="")=>{var t;return Cc(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kl;class f2{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=kl,!e&&kl&&(this.index=(kl.scopes||(kl.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=kl;try{return kl=this,e()}finally{kl=t}}}on(){kl=this}off(){kl=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function p2(n){return new f2(n)}function g2(){return kl}function UL(n,e=!1){kl&&kl.cleanups.push(n)}let Is;const D1=new WeakSet;class om{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,kl&&kl.active&&kl.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,D1.has(this)&&(D1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||HL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Bx(this),GL(this);const e=Is,t=Lc;Is=this,Lc=!0;try{return this.fn()}finally{WL(this),Is=e,Lc=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)y2(e);this.deps=this.depsTail=void 0,Bx(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?D1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){F_(this)&&this.run()}get dirty(){return F_(this)}}let VL=0,Bg,Fg;function HL(n,e=!1){if(n.flags|=8,e){n.next=Fg,Fg=n;return}n.next=Bg,Bg=n}function m2(){VL++}function v2(){if(--VL>0)return;if(Fg){let e=Fg;for(Fg=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Bg;){let e=Bg;for(Bg=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function GL(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function WL(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),y2(r),tI(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function F_(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(qL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function qL(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===am))return;n.globalVersion=am;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!F_(n)){n.flags&=-3;return}const t=Is,r=Lc;Is=n,Lc=!0;try{GL(n);const i=n.fn(n._value);(e.version===0||Al(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{Is=t,Lc=r,WL(n),n.flags&=-3}}function y2(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)y2(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function tI(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}function nI(n,e){n.effect instanceof om&&(n=n.effect.fn);const t=new om(n);e&&Ps(t,e);try{t.run()}catch(i){throw t.stop(),i}const r=t.run.bind(t);return r.effect=t,r}function rI(n){n.effect.stop()}let Lc=!0;const YL=[];function Ah(){YL.push(Lc),Lc=!1}function Th(){const n=YL.pop();Lc=n===void 0?!0:n}function Bx(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=Is;Is=void 0;try{e()}finally{Is=t}}}let am=0;class iI{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class _y{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Is||!Lc||Is===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Is)t=this.activeLink=new iI(Is,this),Is.deps?(t.prevDep=Is.depsTail,Is.depsTail.nextDep=t,Is.depsTail=t):Is.deps=Is.depsTail=t,KL(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=Is.depsTail,t.nextDep=void 0,Is.depsTail.nextDep=t,Is.depsTail=t,Is.deps===t&&(Is.deps=r)}return t}trigger(e){this.version++,am++,this.notify(e)}notify(e){m2();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{v2()}}}function KL(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)KL(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Mv=new WeakMap,df=Symbol(""),j_=Symbol(""),lm=Symbol("");function al(n,e,t){if(Lc&&Is){let r=Mv.get(n);r||Mv.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new _y),i.map=r,i.key=t),i.track()}}function Ad(n,e,t,r,i,s){const o=Mv.get(n);if(!o){am++;return}const a=l=>{l&&l.trigger()};if(m2(),e==="clear")o.forEach(a);else{const l=dr(n),u=l&&h2(t);if(l&&t==="length"){const h=Number(r);o.forEach((p,v)=>{(v==="length"||v===lm||!Cc(v)&&v>=h)&&a(p)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),u&&a(o.get(lm)),e){case"add":l?u&&a(o.get("length")):(a(o.get(df)),mp(n)&&a(o.get(j_)));break;case"delete":l||(a(o.get(df)),mp(n)&&a(o.get(j_)));break;case"set":mp(n)&&a(o.get(df));break}}v2()}function sI(n,e){const t=Mv.get(n);return t&&t.get(e)}function qf(n){const e=Ni(n);return e===n?e:(al(e,"iterate",lm),Pu(n)?e:e.map(ll))}function by(n){return al(n=Ni(n),"iterate",lm),n}const oI={__proto__:null,[Symbol.iterator](){return I1(this,Symbol.iterator,ll)},concat(...n){return qf(this).concat(...n.map(e=>dr(e)?qf(e):e))},entries(){return I1(this,"entries",n=>(n[1]=ll(n[1]),n))},every(n,e){return wd(this,"every",n,e,void 0,arguments)},filter(n,e){return wd(this,"filter",n,e,t=>t.map(ll),arguments)},find(n,e){return wd(this,"find",n,e,ll,arguments)},findIndex(n,e){return wd(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return wd(this,"findLast",n,e,ll,arguments)},findLastIndex(n,e){return wd(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return wd(this,"forEach",n,e,void 0,arguments)},includes(...n){return O1(this,"includes",n)},indexOf(...n){return O1(this,"indexOf",n)},join(n){return qf(this).join(n)},lastIndexOf(...n){return O1(this,"lastIndexOf",n)},map(n,e){return wd(this,"map",n,e,void 0,arguments)},pop(){return Qp(this,"pop")},push(...n){return Qp(this,"push",n)},reduce(n,...e){return Fx(this,"reduce",n,e)},reduceRight(n,...e){return Fx(this,"reduceRight",n,e)},shift(){return Qp(this,"shift")},some(n,e){return wd(this,"some",n,e,void 0,arguments)},splice(...n){return Qp(this,"splice",n)},toReversed(){return qf(this).toReversed()},toSorted(n){return qf(this).toSorted(n)},toSpliced(...n){return qf(this).toSpliced(...n)},unshift(...n){return Qp(this,"unshift",n)},values(){return I1(this,"values",ll)}};function I1(n,e,t){const r=by(n),i=r[e]();return r!==n&&!Pu(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const aI=Array.prototype;function wd(n,e,t,r,i,s){const o=by(n),a=o!==n&&!Pu(n),l=o[e];if(l!==aI[e]){const p=l.apply(n,s);return a?ll(p):p}let u=t;o!==n&&(a?u=function(p,v){return t.call(this,ll(p),v,n)}:t.length>2&&(u=function(p,v){return t.call(this,p,v,n)}));const h=l.call(o,u,r);return a&&i?i(h):h}function Fx(n,e,t,r){const i=by(n);let s=t;return i!==n&&(Pu(n)?t.length>3&&(s=function(o,a,l){return t.call(this,o,a,l,n)}):s=function(o,a,l){return t.call(this,o,ll(a),l,n)}),i[e](s,...r)}function O1(n,e,t){const r=Ni(n);al(r,"iterate",lm);const i=r[e](...t);return(i===-1||i===!1)&&Ly(t[0])?(t[0]=Ni(t[0]),r[e](...t)):i}function Qp(n,e,t=[]){Ah(),m2();const r=Ni(n)[e].apply(n,t);return v2(),Th(),r}const lI=py("__proto__,__v_isRef,__isVue"),ZL=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Cc));function uI(n){Cc(n)||(n=String(n));const e=Ni(this);return al(e,"has",n),e.hasOwnProperty(n)}class XL{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?rS:nS:s?tS:eS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=dr(e);if(!i){let l;if(o&&(l=oI[t]))return l;if(t==="hasOwnProperty")return uI}const a=Reflect.get(e,t,vo(e)?e:r);return(Cc(t)?ZL.has(t):lI(t))||(i||al(e,"get",t),s)?a:vo(a)?o&&h2(t)?a:a.value:vs(a)?i?mc(a):au(a):a}}class JL extends XL{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const l=Sh(s);if(!Pu(r)&&!Sh(r)&&(s=Ni(s),r=Ni(r)),!dr(e)&&vo(s)&&!vo(r))return l?!1:(s.value=r,!0)}const o=dr(e)&&h2(t)?Number(t)<e.length:ns(e,t),a=Reflect.set(e,t,r,vo(e)?e:i);return e===Ni(i)&&(o?Al(r,s)&&Ad(e,"set",t,r):Ad(e,"add",t,r)),a}deleteProperty(e,t){const r=ns(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Ad(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!Cc(t)||!ZL.has(t))&&al(e,"has",t),r}ownKeys(e){return al(e,"iterate",dr(e)?"length":df),Reflect.ownKeys(e)}}class QL extends XL{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const cI=new JL,dI=new QL,hI=new JL(!0),fI=new QL(!0),z_=n=>n,d0=n=>Reflect.getPrototypeOf(n);function pI(n,e,t){return function(...r){const i=this.__v_raw,s=Ni(i),o=mp(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,u=i[n](...r),h=t?z_:e?$_:ll;return!e&&al(s,"iterate",l?j_:df),{next(){const{value:p,done:v}=u.next();return v?{value:p,done:v}:{value:a?[h(p[0]),h(p[1])]:h(p),done:v}},[Symbol.iterator](){return this}}}}function h0(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function gI(n,e){const t={get(i){const s=this.__v_raw,o=Ni(s),a=Ni(i);n||(Al(i,a)&&al(o,"get",i),al(o,"get",a));const{has:l}=d0(o),u=e?z_:n?$_:ll;if(l.call(o,i))return u(s.get(i));if(l.call(o,a))return u(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!n&&al(Ni(i),"iterate",df),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Ni(s),a=Ni(i);return n||(Al(i,a)&&al(o,"has",i),al(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Ni(a),u=e?z_:n?$_:ll;return!n&&al(l,"iterate",df),a.forEach((h,p)=>i.call(s,u(h),u(p),o))}};return Ps(t,n?{add:h0("add"),set:h0("set"),delete:h0("delete"),clear:h0("clear")}:{add(i){!e&&!Pu(i)&&!Sh(i)&&(i=Ni(i));const s=Ni(this);return d0(s).has.call(s,i)||(s.add(i),Ad(s,"add",i,i)),this},set(i,s){!e&&!Pu(s)&&!Sh(s)&&(s=Ni(s));const o=Ni(this),{has:a,get:l}=d0(o);let u=a.call(o,i);u||(i=Ni(i),u=a.call(o,i));const h=l.call(o,i);return o.set(i,s),u?Al(s,h)&&Ad(o,"set",i,s):Ad(o,"add",i,s),this},delete(i){const s=Ni(this),{has:o,get:a}=d0(s);let l=o.call(s,i);l||(i=Ni(i),l=o.call(s,i)),a&&a.call(s,i);const u=s.delete(i);return l&&Ad(s,"delete",i,void 0),u},clear(){const i=Ni(this),s=i.size!==0,o=i.clear();return s&&Ad(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=pI(i,n,e)}),t}function wy(n,e){const t=gI(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(ns(t,i)&&i in r?t:r,i,s)}const mI={get:wy(!1,!1)},vI={get:wy(!1,!0)},yI={get:wy(!0,!1)},_I={get:wy(!0,!0)},eS=new WeakMap,tS=new WeakMap,nS=new WeakMap,rS=new WeakMap;function bI(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wI(n){return n.__v_skip||!Object.isExtensible(n)?0:bI(UD(n))}function au(n){return Sh(n)?n:xy(n,!1,cI,mI,eS)}function _2(n){return xy(n,!1,hI,vI,tS)}function mc(n){return xy(n,!0,dI,yI,nS)}function xI(n){return xy(n,!0,fI,_I,rS)}function xy(n,e,t,r,i){if(!vs(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=wI(n);if(o===0)return n;const a=new Proxy(n,o===2?r:t);return i.set(n,a),a}function td(n){return Sh(n)?td(n.__v_raw):!!(n&&n.__v_isReactive)}function Sh(n){return!!(n&&n.__v_isReadonly)}function Pu(n){return!!(n&&n.__v_isShallow)}function Ly(n){return n?!!n.__v_raw:!1}function Ni(n){const e=n&&n.__v_raw;return e?Ni(e):n}function Sy(n){return!ns(n,"__v_skip")&&Object.isExtensible(n)&&FL(n,"__v_skip",!0),n}const ll=n=>vs(n)?au(n):n,$_=n=>vs(n)?mc(n):n;function vo(n){return n?n.__v_isRef===!0:!1}function yt(n){return iS(n,!1)}function b2(n){return iS(n,!0)}function iS(n,e){return vo(n)?n:new LI(n,e)}class LI{constructor(e,t){this.dep=new _y,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Ni(e),this._value=t?e:ll(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Pu(e)||Sh(e);e=r?e:Ni(e),Al(e,t)&&(this._rawValue=e,this._value=r?e:ll(e),this.dep.trigger())}}function SI(n){n.dep&&n.dep.trigger()}function Ln(n){return vo(n)?n.value:n}function CI(n){return Nr(n)?n():Ln(n)}const EI={get:(n,e,t)=>e==="__v_raw"?n:Ln(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return vo(i)&&!vo(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function w2(n){return td(n)?n:new Proxy(n,EI)}class PI{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new _y,{get:r,set:i}=e(t.track.bind(t),t.trigger.bind(t));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function sS(n){return new PI(n)}function x2(n){const e=dr(n)?new Array(n.length):{};for(const t in n)e[t]=oS(n,t);return e}class MI{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return sI(Ni(this._object),this._key)}}class kI{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function AI(n,e,t){return vo(n)?n:Nr(n)?new kI(n):vs(n)&&arguments.length>1?oS(n,e,t):yt(n)}function oS(n,e,t){const r=n[e];return vo(r)?r:new MI(n,e,t)}class TI{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new _y(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=am-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Is!==this)return HL(this,!0),!0}get value(){const e=this.dep.track();return qL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function DI(n,e,t=!1){let r,i;return Nr(n)?r=n:(r=n.get,i=n.set),new TI(r,i,t)}const II={GET:"get",HAS:"has",ITERATE:"iterate"},OI={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},f0={},kv=new WeakMap;let oh;function NI(){return oh}function aS(n,e=!1,t=oh){if(t){let r=kv.get(t);r||kv.set(t,r=[]),r.push(n)}}function RI(n,e,t=Ri){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=t,u=G=>i?G:Pu(G)||i===!1||i===0?Td(G,1):Td(G);let h,p,v,m,S=!1,E=!1;if(vo(n)?(p=()=>n.value,S=Pu(n)):td(n)?(p=()=>u(n),S=!0):dr(n)?(E=!0,S=n.some(G=>td(G)||Pu(G)),p=()=>n.map(G=>{if(vo(G))return G.value;if(td(G))return u(G);if(Nr(G))return l?l(G,2):G()})):Nr(n)?e?p=l?()=>l(n,2):n:p=()=>{if(v){Ah();try{v()}finally{Th()}}const G=oh;oh=h;try{return l?l(n,3,[m]):n(m)}finally{oh=G}}:p=Yu,e&&i){const G=p,ee=i===!0?1/0:i;p=()=>Td(G(),ee)}const k=g2(),T=()=>{h.stop(),k&&k.active&&c2(k.effects,h)};if(s&&e){const G=e;e=(...ee)=>{G(...ee),T()}}let A=E?new Array(n.length).fill(f0):f0;const R=G=>{if(!(!(h.flags&1)||!h.dirty&&!G))if(e){const ee=h.run();if(i||S||(E?ee.some((pe,ge)=>Al(pe,A[ge])):Al(ee,A))){v&&v();const pe=oh;oh=h;try{const ge=[ee,A===f0?void 0:E&&A[0]===f0?[]:A,m];l?l(e,3,ge):e(...ge),A=ee}finally{oh=pe}}}else h.run()};return a&&a(R),h=new om(p),h.scheduler=o?()=>o(R,!1):R,m=G=>aS(G,!1,h),v=h.onStop=()=>{const G=kv.get(h);if(G){if(l)l(G,4);else for(const ee of G)ee();kv.delete(h)}},e?r?R(!0):A=h.run():o?o(R.bind(null,!0),!0):h.run(),T.pause=h.pause.bind(h),T.resume=h.resume.bind(h),T.stop=T,T}function Td(n,e=1/0,t){if(e<=0||!vs(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,vo(n))Td(n.value,e,t);else if(dr(n))for(let r=0;r<n.length;r++)Td(n[r],e,t);else if(Cf(n)||mp(n))n.forEach(r=>{Td(r,e,t)});else if(gy(n)){for(const r in n)Td(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Td(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const lS=[];function BI(n){lS.push(n)}function FI(){lS.pop()}function jI(n,e){}const zI={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},$I={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function zp(n,e,t,r){try{return r?n(...r):n()}catch(i){Ef(i,e,t)}}function Zu(n,e,t,r){if(Nr(n)){const i=zp(n,e,t,r);return i&&d2(i)&&i.catch(s=>{Ef(s,e,t)}),i}if(dr(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Zu(n[s],e,t,r));return i}}function Ef(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ri;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const h=a.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](n,l,u)===!1)return}a=a.parent}if(s){Ah(),zp(s,null,10,[n,l,u]),Th();return}}UI(n,t,i,r,o)}function UI(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const Tl=[];let Wc=-1;const _p=[];let ah=null,ip=0;const uS=Promise.resolve();let Av=null;function la(n){const e=Av||uS;return n?e.then(this?n.bind(this):n):e}function VI(n){let e=Wc+1,t=Tl.length;for(;e<t;){const r=e+t>>>1,i=Tl[r],s=cm(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function L2(n){if(!(n.flags&1)){const e=cm(n),t=Tl[Tl.length-1];!t||!(n.flags&2)&&e>=cm(t)?Tl.push(n):Tl.splice(VI(e),0,n),n.flags|=1,cS()}}function cS(){Av||(Av=uS.then(dS))}function um(n){dr(n)?_p.push(...n):ah&&n.id===-1?ah.splice(ip+1,0,n):n.flags&1||(_p.push(n),n.flags|=1),cS()}function jx(n,e,t=Wc+1){for(;t<Tl.length;t++){const r=Tl[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Tl.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Tv(n){if(_p.length){const e=[...new Set(_p)].sort((t,r)=>cm(t)-cm(r));if(_p.length=0,ah){ah.push(...e);return}for(ah=e,ip=0;ip<ah.length;ip++){const t=ah[ip];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}ah=null,ip=0}}const cm=n=>n.id==null?n.flags&2?-1:1/0:n.id;function dS(n){try{for(Wc=0;Wc<Tl.length;Wc++){const e=Tl[Wc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),zp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Wc<Tl.length;Wc++){const e=Tl[Wc];e&&(e.flags&=-2)}Wc=-1,Tl.length=0,Tv(),Av=null,(Tl.length||_p.length)&&dS()}}let sp,p0=[];function hS(n,e){var t,r;sp=n,sp?(sp.enabled=!0,p0.forEach(({event:i,args:s})=>sp.emit(i,...s)),p0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(t=window.navigator)==null?void 0:t.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{hS(s,e)}),setTimeout(()=>{sp||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,p0=[])},3e3)):p0=[]}let ca=null,Cy=null;function dm(n){const e=ca;return ca=n,Cy=n&&n.type.__scopeId||null,e}function HI(n){Cy=n}function GI(){Cy=null}const WI=n=>nu;function nu(n,e=ca,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&K_(-1);const s=dm(e);let o;try{o=n(...i)}finally{dm(s),r._d&&K_(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Tn(n,e){if(ca===null)return n;const t=Im(ca),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=Ri]=e[i];s&&(Nr(s)&&(s={mounted:s,updated:s}),s.deep&&Td(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function Yc(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Ah(),Zu(l,t,8,[n.el,a,n,e]),Th())}}const fS=Symbol("_vte"),pS=n=>n.__isTeleport,jg=n=>n&&(n.disabled||n.disabled===""),zx=n=>n&&(n.defer||n.defer===""),$x=n=>typeof SVGElement<"u"&&n instanceof SVGElement,Ux=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,U_=(n,e)=>{const t=n&&n.to;return Ns(t)?e?e(t):null:t},gS={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,s,o,a,l,u){const{mc:h,pc:p,pbc:v,o:{insert:m,querySelector:S,createText:E,createComment:k}}=u,T=jg(e.props);let{shapeFlag:A,children:R,dynamicChildren:G}=e;if(n==null){const ee=e.el=E(""),pe=e.anchor=E("");m(ee,t,r),m(pe,t,r);const ge=(j,Y)=>{A&16&&(i&&i.isCE&&(i.ce._teleportTarget=j),h(R,j,Y,i,s,o,a,l))},O=()=>{const j=e.target=U_(e.props,S),Y=mS(j,e,E,m);j&&(o!=="svg"&&$x(j)?o="svg":o!=="mathml"&&Ux(j)&&(o="mathml"),T||(ge(j,Y),X0(e,!1)))};T&&(ge(t,pe),X0(e,!0)),zx(e.props)?aa(()=>{O(),e.el.__isMounted=!0},s):O()}else{if(zx(e.props)&&!n.el.__isMounted){aa(()=>{gS.process(n,e,t,r,i,s,o,a,l,u),delete n.el.__isMounted},s);return}e.el=n.el,e.targetStart=n.targetStart;const ee=e.anchor=n.anchor,pe=e.target=n.target,ge=e.targetAnchor=n.targetAnchor,O=jg(n.props),j=O?t:pe,Y=O?ee:ge;if(o==="svg"||$x(pe)?o="svg":(o==="mathml"||Ux(pe))&&(o="mathml"),G?(v(n.dynamicChildren,G,j,i,s,o,a),O2(n,e,!0)):l||p(n,e,j,Y,i,s,o,a,!1),T)O?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):g0(e,t,ee,u,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const V=e.target=U_(e.props,S);V&&g0(e,V,null,u,0)}else O&&g0(e,pe,ge,u,1);X0(e,T)}},remove(n,e,t,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:p,props:v}=n;if(p&&(i(u),i(h)),s&&i(l),o&16){const m=s||!jg(v);for(let S=0;S<a.length;S++){const E=a[S];r(E,e,t,m,!!E.dynamicChildren)}}},move:g0,hydrate:qI};function g0(n,e,t,{o:{insert:r},m:i},s=2){s===0&&r(n.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=n,p=s===2;if(p&&r(o,e,t),(!p||jg(h))&&l&16)for(let v=0;v<u.length;v++)i(u[v],e,t,2);p&&r(a,e,t)}function qI(n,e,t,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},p){const v=e.target=U_(e.props,l);if(v){const m=jg(e.props),S=v._lpa||v.firstChild;if(e.shapeFlag&16)if(m)e.anchor=p(o(n),e,a(n),t,r,i,s),e.targetStart=S,e.targetAnchor=S&&o(S);else{e.anchor=o(n);let E=S;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||mS(v,e,h,u),p(S&&o(S),e,v,t,r,i,s)}X0(e,m)}return e.anchor&&o(e.anchor)}const op=gS;function X0(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function mS(n,e,t,r){const i=e.targetStart=t(""),s=e.targetAnchor=t("");return i[fS]=s,n&&(r(i,n),r(s,n)),s}const lh=Symbol("_leaveCb"),m0=Symbol("_enterCb");function S2(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Es(()=>{n.isMounted=!0}),jd(()=>{n.isUnmounting=!0}),n}const $u=[Function,Array],C2={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:$u,onEnter:$u,onAfterEnter:$u,onEnterCancelled:$u,onBeforeLeave:$u,onLeave:$u,onAfterLeave:$u,onLeaveCancelled:$u,onBeforeAppear:$u,onAppear:$u,onAfterAppear:$u,onAppearCancelled:$u},vS=n=>{const e=n.subTree;return e.component?vS(e.component):e},YI={name:"BaseTransition",props:C2,setup(n,{slots:e}){const t=Ju(),r=S2();return()=>{const i=e.default&&Ey(e.default(),!0);if(!i||!i.length)return;const s=yS(i),o=Ni(n),{mode:a}=o;if(r.isLeaving)return N1(s);const l=Vx(s);if(!l)return N1(s);let u=Ep(l,o,r,t,p=>u=p);l.type!==na&&Fd(l,u);let h=t.subTree&&Vx(t.subTree);if(h&&h.type!==na&&!bc(l,h)&&vS(t).type!==na){let p=Ep(h,o,r,t);if(Fd(h,p),a==="out-in"&&l.type!==na)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete p.afterLeave,h=void 0},N1(s);a==="in-out"&&l.type!==na?p.delayLeave=(v,m,S)=>{const E=bS(r,h);E[String(h.key)]=h,v[lh]=()=>{m(),v[lh]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{S(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return s}}};function yS(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==na){e=t;break}}return e}const _S=YI;function bS(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Ep(n,e,t,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:v,onLeave:m,onAfterLeave:S,onLeaveCancelled:E,onBeforeAppear:k,onAppear:T,onAfterAppear:A,onAppearCancelled:R}=e,G=String(n.key),ee=bS(t,n),pe=(j,Y)=>{j&&Zu(j,r,9,Y)},ge=(j,Y)=>{const V=Y[1];pe(j,Y),dr(j)?j.every(N=>N.length<=1)&&V():j.length<=1&&V()},O={mode:o,persisted:a,beforeEnter(j){let Y=l;if(!t.isMounted)if(s)Y=k||l;else return;j[lh]&&j[lh](!0);const V=ee[G];V&&bc(n,V)&&V.el[lh]&&V.el[lh](),pe(Y,[j])},enter(j){let Y=u,V=h,N=p;if(!t.isMounted)if(s)Y=T||u,V=A||h,N=R||p;else return;let q=!1;const $=j[m0]=F=>{q||(q=!0,F?pe(N,[j]):pe(V,[j]),O.delayedLeave&&O.delayedLeave(),j[m0]=void 0)};Y?ge(Y,[j,$]):$()},leave(j,Y){const V=String(n.key);if(j[m0]&&j[m0](!0),t.isUnmounting)return Y();pe(v,[j]);let N=!1;const q=j[lh]=$=>{N||(N=!0,Y(),$?pe(E,[j]):pe(S,[j]),j[lh]=void 0,ee[V]===n&&delete ee[V])};ee[V]=n,m?ge(m,[j,q]):q()},clone(j){const Y=Ep(j,e,t,r,i);return i&&i(Y),Y}};return O}function N1(n){if(Tm(n))return n=sd(n),n.children=null,n}function Vx(n){if(!Tm(n))return pS(n.type)&&n.children?yS(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Nr(t.default))return t.default()}}function Fd(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Fd(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Ey(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let o=n[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===kn?(o.patchFlag&128&&i++,r=r.concat(Ey(o.children,e,a))):(e||o.type!==na)&&r.push(a!=null?sd(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Rs(n,e){return Nr(n)?Ps({name:n.name},e,{setup:n}):n}function KI(){const n=Ju();return n?(n.appContext.config.idPrefix||"v")+"-"+n.ids[0]+n.ids[1]++:""}function E2(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function ZI(n){const e=Ju(),t=b2(null);if(e){const i=e.refs===Ri?e.refs={}:e.refs;Object.defineProperty(i,n,{enumerable:!0,get:()=>t.value,set:s=>t.value=s})}return t}function hm(n,e,t,r,i=!1){if(dr(n)){n.forEach((S,E)=>hm(S,e&&(dr(e)?e[E]:e),t,r,i));return}if(_h(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&hm(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?Im(r.component):r.el,o=i?null:s,{i:a,r:l}=n,u=e&&e.r,h=a.refs===Ri?a.refs={}:a.refs,p=a.setupState,v=Ni(p),m=p===Ri?()=>!1:S=>ns(v,S);if(u!=null&&u!==l&&(Ns(u)?(h[u]=null,m(u)&&(p[u]=null)):vo(u)&&(u.value=null)),Nr(l))zp(l,a,12,[o,h]);else{const S=Ns(l),E=vo(l);if(S||E){const k=()=>{if(n.f){const T=S?m(l)?p[l]:h[l]:l.value;i?dr(T)&&c2(T,s):dr(T)?T.includes(s)||T.push(s):S?(h[l]=[s],m(l)&&(p[l]=h[l])):(l.value=[s],n.k&&(h[n.k]=l.value))}else S?(h[l]=o,m(l)&&(p[l]=o)):E&&(l.value=o,n.k&&(h[n.k]=o))};o?(k.id=-1,aa(k,t)):k()}}}let Hx=!1;const Yf=()=>{Hx||(console.error("Hydration completed but contains mismatches."),Hx=!0)},XI=n=>n.namespaceURI.includes("svg")&&n.tagName!=="foreignObject",JI=n=>n.namespaceURI.includes("MathML"),v0=n=>{if(n.nodeType===1){if(XI(n))return"svg";if(JI(n))return"mathml"}},hp=n=>n.nodeType===8;function QI(n){const{mt:e,p:t,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:u}}=n,h=(R,G)=>{if(!G.hasChildNodes()){t(null,R,G),Tv(),G._vnode=R;return}p(G.firstChild,R,null,null,null),Tv(),G._vnode=R},p=(R,G,ee,pe,ge,O=!1)=>{O=O||!!G.dynamicChildren;const j=hp(R)&&R.data==="[",Y=()=>E(R,G,ee,pe,ge,j),{type:V,ref:N,shapeFlag:q,patchFlag:$}=G;let F=R.nodeType;G.el=R,$===-2&&(O=!1,G.dynamicChildren=null);let B=null;switch(V){case bh:F!==3?G.children===""?(l(G.el=i(""),o(R),R),B=R):B=Y():(R.data!==G.children&&(Yf(),R.data=G.children),B=s(R));break;case na:A(R)?(B=s(R),T(G.el=R.content.firstChild,R,ee)):F!==8||j?B=Y():B=s(R);break;case ff:if(j&&(R=s(R),F=R.nodeType),F===1||F===3){B=R;const Q=!G.children.length;for(let X=0;X<G.staticCount;X++)Q&&(G.children+=B.nodeType===1?B.outerHTML:B.data),X===G.staticCount-1&&(G.anchor=B),B=s(B);return j?s(B):B}else Y();break;case kn:j?B=S(R,G,ee,pe,ge,O):B=Y();break;default:if(q&1)(F!==1||G.type.toLowerCase()!==R.tagName.toLowerCase())&&!A(R)?B=Y():B=v(R,G,ee,pe,ge,O);else if(q&6){G.slotScopeIds=ge;const Q=o(R);if(j?B=k(R):hp(R)&&R.data==="teleport start"?B=k(R,R.data,"teleport end"):B=s(R),e(G,Q,null,ee,pe,v0(Q),O),_h(G)&&!G.type.__asyncResolved){let X;j?(X=ci(kn),X.anchor=B?B.previousSibling:Q.lastChild):X=R.nodeType===3?qr(""):ci("div"),X.el=R,G.component.subTree=X}}else q&64?F!==8?B=Y():B=G.type.hydrate(R,G,ee,pe,ge,O,n,m):q&128&&(B=G.type.hydrate(R,G,ee,pe,v0(o(R)),ge,O,n,p))}return N!=null&&hm(N,null,pe,G),B},v=(R,G,ee,pe,ge,O)=>{O=O||!!G.dynamicChildren;const{type:j,props:Y,patchFlag:V,shapeFlag:N,dirs:q,transition:$}=G,F=j==="input"||j==="option";if(F||V!==-1){q&&Yc(G,null,ee,"created");let B=!1;if(A(R)){B=qS(null,$)&&ee&&ee.vnode.props&&ee.vnode.props.appear;const X=R.content.firstChild;B&&$.beforeEnter(X),T(X,R,ee),G.el=R=X}if(N&16&&!(Y&&(Y.innerHTML||Y.textContent))){let X=m(R.firstChild,G,R,ee,pe,ge,O);for(;X;){y0(R,1)||Yf();const _e=X;X=X.nextSibling,a(_e)}}else if(N&8){let X=G.children;X[0]===`
`&&(R.tagName==="PRE"||R.tagName==="TEXTAREA")&&(X=X.slice(1)),R.textContent!==X&&(y0(R,0)||Yf(),R.textContent=G.children)}if(Y){if(F||!O||V&48){const X=R.tagName.includes("-");for(const _e in Y)(F&&(_e.endsWith("value")||_e==="indeterminate")||km(_e)&&!vp(_e)||_e[0]==="."||X)&&r(R,_e,null,Y[_e],void 0,ee)}else if(Y.onClick)r(R,"onClick",null,Y.onClick,void 0,ee);else if(V&4&&td(Y.style))for(const X in Y.style)Y.style[X]}let Q;(Q=Y&&Y.onVnodeBeforeMount)&&Jl(Q,ee,G),q&&Yc(G,null,ee,"beforeMount"),((Q=Y&&Y.onVnodeMounted)||q||B)&&nC(()=>{Q&&Jl(Q,ee,G),B&&$.enter(R),q&&Yc(G,null,ee,"mounted")},pe)}return R.nextSibling},m=(R,G,ee,pe,ge,O,j)=>{j=j||!!G.dynamicChildren;const Y=G.children,V=Y.length;for(let N=0;N<V;N++){const q=j?Y[N]:Y[N]=eu(Y[N]),$=q.type===bh;R?($&&!j&&N+1<V&&eu(Y[N+1]).type===bh&&(l(i(R.data.slice(q.children.length)),ee,s(R)),R.data=q.children),R=p(R,q,pe,ge,O,j)):$&&!q.children?l(q.el=i(""),ee):(y0(ee,1)||Yf(),t(null,q,ee,null,pe,ge,v0(ee),O))}return R},S=(R,G,ee,pe,ge,O)=>{const{slotScopeIds:j}=G;j&&(ge=ge?ge.concat(j):j);const Y=o(R),V=m(s(R),G,Y,ee,pe,ge,O);return V&&hp(V)&&V.data==="]"?s(G.anchor=V):(Yf(),l(G.anchor=u("]"),Y,V),V)},E=(R,G,ee,pe,ge,O)=>{if(y0(R.parentElement,1)||Yf(),G.el=null,O){const V=k(R);for(;;){const N=s(R);if(N&&N!==V)a(N);else break}}const j=s(R),Y=o(R);return a(R),t(null,G,Y,j,ee,pe,v0(Y),ge),ee&&(ee.vnode.el=G.el,Ay(ee,G.el)),j},k=(R,G="[",ee="]")=>{let pe=0;for(;R;)if(R=s(R),R&&hp(R)&&(R.data===G&&pe++,R.data===ee)){if(pe===0)return s(R);pe--}return R},T=(R,G,ee)=>{const pe=G.parentNode;pe&&pe.replaceChild(R,G);let ge=ee;for(;ge;)ge.vnode.el===G&&(ge.vnode.el=ge.subTree.el=R),ge=ge.parent},A=R=>R.nodeType===1&&R.tagName==="TEMPLATE";return[h,p]}const Gx="data-allow-mismatch",eO={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function y0(n,e){if(e===0||e===1)for(;n&&!n.hasAttribute(Gx);)n=n.parentElement;const t=n&&n.getAttribute(Gx);if(t==null)return!1;if(t==="")return!0;{const r=t.split(",");return e===0&&r.includes("children")?!0:t.split(",").includes(eO[e])}}const tO=vy().requestIdleCallback||(n=>setTimeout(n,1)),nO=vy().cancelIdleCallback||(n=>clearTimeout(n)),rO=(n=1e4)=>e=>{const t=tO(e,{timeout:n});return()=>nO(t)};function iO(n){const{top:e,left:t,bottom:r,right:i}=n.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(t>0&&t<o||i>0&&i<o)}const sO=n=>(e,t)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},n);return t(i=>{if(i instanceof Element){if(iO(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},oO=n=>e=>{if(n){const t=matchMedia(n);if(t.matches)e();else return t.addEventListener("change",e,{once:!0}),()=>t.removeEventListener("change",e)}},aO=(n=[])=>(e,t)=>{Ns(n)&&(n=[n]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{t(o=>{for(const a of n)o.removeEventListener(a,i)})};return t(o=>{for(const a of n)o.addEventListener(a,i,{once:!0})}),s};function lO(n,e){if(hp(n)&&n.data==="["){let t=1,r=n.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(hp(r))if(r.data==="]"){if(--t===0)break}else r.data==="["&&t++;r=r.nextSibling}}else e(n)}const _h=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function uO(n){Nr(n)&&(n={loader:n});const{loader:e,loadingComponent:t,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=n;let u=null,h,p=0;const v=()=>(p++,u=null,m()),m=()=>{let S;return u||(S=u=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),l)return new Promise((k,T)=>{l(E,()=>k(v()),()=>T(E),p+1)});throw E}).then(E=>S!==u&&u?u:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),h=E,E)))};return Rs({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(S,E,k){const T=s?()=>{const A=s(k,R=>lO(S,R));A&&(E.bum||(E.bum=[])).push(A)}:k;h?T():m().then(()=>!E.isUnmounted&&T())},get __asyncResolved(){return h},setup(){const S=ua;if(E2(S),h)return()=>R1(h,S);const E=R=>{u=null,Ef(R,S,13,!r)};if(a&&S.suspense||Pp)return m().then(R=>()=>R1(R,S)).catch(R=>(E(R),()=>r?ci(r,{error:R}):null));const k=yt(!1),T=yt(),A=yt(!!i);return i&&setTimeout(()=>{A.value=!1},i),o!=null&&setTimeout(()=>{if(!k.value&&!T.value){const R=new Error(`Async component timed out after ${o}ms.`);E(R),T.value=R}},o),m().then(()=>{k.value=!0,S.parent&&Tm(S.parent.vnode)&&S.parent.update()}).catch(R=>{E(R),T.value=R}),()=>{if(k.value&&h)return R1(h,S);if(T.value&&r)return ci(r,{error:T.value});if(t&&!A.value)return ci(t)}}})}function R1(n,e){const{ref:t,props:r,children:i,ce:s}=e.vnode,o=ci(n,r,i);return o.ref=t,o.ce=s,delete e.vnode.ce,o}const Tm=n=>n.type.__isKeepAlive,cO={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=Ju(),r=t.ctx;if(!r.renderer)return()=>{const A=e.default&&e.default();return A&&A.length===1?A[0]:A};const i=new Map,s=new Set;let o=null;const a=t.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:p}}}=r,v=p("div");r.activate=(A,R,G,ee,pe)=>{const ge=A.component;u(A,R,G,0,a),l(ge.vnode,A,R,G,ge,a,ee,A.slotScopeIds,pe),aa(()=>{ge.isDeactivated=!1,ge.a&&yp(ge.a);const O=A.props&&A.props.onVnodeMounted;O&&Jl(O,ge.parent,A)},a)},r.deactivate=A=>{const R=A.component;Iv(R.m),Iv(R.a),u(A,v,null,1,a),aa(()=>{R.da&&yp(R.da);const G=A.props&&A.props.onVnodeUnmounted;G&&Jl(G,R.parent,A),R.isDeactivated=!0},a)};function m(A){B1(A),h(A,t,a,!0)}function S(A){i.forEach((R,G)=>{const ee=eb(R.type);ee&&!A(ee)&&E(G)})}function E(A){const R=i.get(A);R&&(!o||!bc(R,o))?m(R):o&&B1(o),i.delete(A),s.delete(A)}_i(()=>[n.include,n.exclude],([A,R])=>{A&&S(G=>bg(A,G)),R&&S(G=>!bg(R,G))},{flush:"post",deep:!0});let k=null;const T=()=>{k!=null&&(Ov(t.subTree.type)?aa(()=>{i.set(k,_0(t.subTree))},t.subTree.suspense):i.set(k,_0(t.subTree)))};return Es(T),My(T),jd(()=>{i.forEach(A=>{const{subTree:R,suspense:G}=t,ee=_0(R);if(A.type===ee.type&&A.key===ee.key){B1(ee);const pe=ee.component.da;pe&&aa(pe,G);return}m(A)})}),()=>{if(k=null,!e.default)return o=null;const A=e.default(),R=A[0];if(A.length>1)return o=null,A;if(!zd(R)||!(R.shapeFlag&4)&&!(R.shapeFlag&128))return o=null,R;let G=_0(R);if(G.type===na)return o=null,G;const ee=G.type,pe=eb(_h(G)?G.type.__asyncResolved||{}:ee),{include:ge,exclude:O,max:j}=n;if(ge&&(!pe||!bg(ge,pe))||O&&pe&&bg(O,pe))return G.shapeFlag&=-257,o=G,R;const Y=G.key==null?ee:G.key,V=i.get(Y);return G.el&&(G=sd(G),R.shapeFlag&128&&(R.ssContent=G)),k=Y,V?(G.el=V.el,G.component=V.component,G.transition&&Fd(G,G.transition),G.shapeFlag|=512,s.delete(Y),s.add(Y)):(s.add(Y),j&&s.size>parseInt(j,10)&&E(s.values().next().value)),G.shapeFlag|=256,o=G,Ov(R.type)?R:G}}},dO=cO;function bg(n,e){return dr(n)?n.some(t=>bg(t,e)):Ns(n)?n.split(",").includes(e):$D(n)?(n.lastIndex=0,n.test(e)):!1}function wS(n,e){LS(n,"a",e)}function xS(n,e){LS(n,"da",e)}function LS(n,e,t=ua){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Py(e,r,t),t){let i=t.parent;for(;i&&i.parent;)Tm(i.parent.vnode)&&hO(r,e,t,i),i=i.parent}}function hO(n,e,t,r){const i=Py(e,n,r,!0);Ol(()=>{c2(r[e],i)},t)}function B1(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function _0(n){return n.shapeFlag&128?n.ssContent:n}function Py(n,e,t=ua,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{Ah();const a=bf(t),l=Zu(e,t,n,o);return a(),Th(),l});return r?i.unshift(s):i.push(s),s}}const Ud=n=>(e,t=ua)=>{(!Pp||n==="sp")&&Py(n,(...r)=>e(...r),t)},SS=Ud("bm"),Es=Ud("m"),P2=Ud("bu"),My=Ud("u"),jd=Ud("bum"),Ol=Ud("um"),CS=Ud("sp"),ES=Ud("rtg"),PS=Ud("rtc");function MS(n,e=ua){Py("ec",n,e)}const M2="components",fO="directives";function k2(n,e){return A2(M2,n,!0,e)||n}const kS=Symbol.for("v-ndc");function AS(n){return Ns(n)?A2(M2,n,!1)||n:n||kS}function pO(n){return A2(fO,n)}function A2(n,e,t=!0,r=!1){const i=ca||ua;if(i){const s=i.type;if(n===M2){const a=eb(s,!1);if(a&&(a===e||a===Va(e)||a===Am(Va(e))))return s}const o=Wx(i[n]||s[n],e)||Wx(i.appContext[n],e);return!o&&r?s:o}}function Wx(n,e){return n&&(n[e]||n[Va(e)]||n[Am(Va(e))])}function sr(n,e,t,r){let i;const s=t&&t[r],o=dr(n);if(o||Ns(n)){const a=o&&td(n);let l=!1;a&&(l=!Pu(n),n=by(n)),i=new Array(n.length);for(let u=0,h=n.length;u<h;u++)i[u]=e(l?ll(n[u]):n[u],u,void 0,s&&s[u])}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(vs(n))if(n[Symbol.iterator])i=Array.from(n,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(n);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];i[l]=e(n[h],h,l,s&&s[l])}}else i=[];return t&&(t[r]=i),i}function gO(n,e){for(let t=0;t<e.length;t++){const r=e[t];if(dr(r))for(let i=0;i<r.length;i++)n[r[i].name]=r[i].fn;else r&&(n[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return n}function mO(n,e,t={},r,i){if(ca.ce||ca.parent&&_h(ca.parent)&&ca.parent.ce)return e!=="default"&&(t.name=e),De(),$o(kn,null,[ci("slot",t,r&&r())],64);let s=n[e];s&&s._c&&(s._d=!1),De();const o=s&&T2(s(t)),a=t.key||o&&o.key,l=$o(kn,{key:(a&&!Cc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&n._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function T2(n){return n.some(e=>zd(e)?!(e.type===na||e.type===kn&&!T2(e.children)):!0)?n:null}function vO(n,e){const t={};for(const r in n)t[e&&/[A-Z]/.test(r)?`on:${r}`:Rg(r)]=n[r];return t}const V_=n=>n?uC(n)?Im(n):V_(n.parent):null,zg=Ps(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>V_(n.parent),$root:n=>V_(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>D2(n),$forceUpdate:n=>n.f||(n.f=()=>{L2(n.update)}),$nextTick:n=>n.n||(n.n=la.bind(n.proxy)),$watch:n=>qO.bind(n)}),F1=(n,e)=>n!==Ri&&!n.__isScriptSetup&&ns(n,e),H_={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=n;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(F1(r,e))return o[e]=1,r[e];if(i!==Ri&&ns(i,e))return o[e]=2,i[e];if((u=n.propsOptions[0])&&ns(u,e))return o[e]=3,s[e];if(t!==Ri&&ns(t,e))return o[e]=4,t[e];G_&&(o[e]=0)}}const h=zg[e];let p,v;if(h)return e==="$attrs"&&al(n.attrs,"get",""),h(n);if((p=a.__cssModules)&&(p=p[e]))return p;if(t!==Ri&&ns(t,e))return o[e]=4,t[e];if(v=l.config.globalProperties,ns(v,e))return v[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return F1(i,e)?(i[e]=t,!0):r!==Ri&&ns(r,e)?(r[e]=t,!0):ns(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!t[o]||n!==Ri&&ns(n,o)||F1(e,o)||(a=s[0])&&ns(a,o)||ns(r,o)||ns(zg,o)||ns(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:ns(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}},yO=Ps({},H_,{get(n,e){if(e!==Symbol.unscopables)return H_.get(n,e,n)},has(n,e){return e[0]!=="_"&&!WD(e)}});function _O(){return null}function bO(){return null}function wO(n){}function xO(n){}function LO(){return null}function SO(){}function CO(n,e){return null}function EO(){return TS().slots}function PO(){return TS().attrs}function TS(){const n=Ju();return n.setupContext||(n.setupContext=hC(n))}function fm(n){return dr(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}function MO(n,e){const t=fm(n);for(const r in e){if(r.startsWith("__skip"))continue;let i=t[r];i?dr(i)||Nr(i)?i=t[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=t[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return t}function kO(n,e){return!n||!e?n||e:dr(n)&&dr(e)?n.concat(e):Ps({},fm(n),fm(e))}function AO(n,e){const t={};for(const r in n)e.includes(r)||Object.defineProperty(t,r,{enumerable:!0,get:()=>n[r]});return t}function TO(n){const e=Ju();let t=n();return X_(),d2(t)&&(t=t.catch(r=>{throw bf(e),r})),[t,()=>bf(e)]}let G_=!0;function DO(n){const e=D2(n),t=n.proxy,r=n.ctx;G_=!1,e.beforeCreate&&qx(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:p,mounted:v,beforeUpdate:m,updated:S,activated:E,deactivated:k,beforeDestroy:T,beforeUnmount:A,destroyed:R,unmounted:G,render:ee,renderTracked:pe,renderTriggered:ge,errorCaptured:O,serverPrefetch:j,expose:Y,inheritAttrs:V,components:N,directives:q,filters:$}=e;if(u&&IO(u,r,null),o)for(const Q in o){const X=o[Q];Nr(X)&&(r[Q]=X.bind(t))}if(i){const Q=i.call(t,t);vs(Q)&&(n.data=au(Q))}if(G_=!0,s)for(const Q in s){const X=s[Q],_e=Nr(X)?X.bind(t,t):Nr(X.get)?X.get.bind(t,t):Yu,me=!Nr(X)&&Nr(X.set)?X.set.bind(t):Yu,We=rr({get:_e,set:me});Object.defineProperty(r,Q,{enumerable:!0,configurable:!0,get:()=>We.value,set:ae=>We.value=ae})}if(a)for(const Q in a)DS(a[Q],r,t,Q);if(l){const Q=Nr(l)?l.call(t):l;Reflect.ownKeys(Q).forEach(X=>{$g(X,Q[X])})}h&&qx(h,n,"c");function B(Q,X){dr(X)?X.forEach(_e=>Q(_e.bind(t))):X&&Q(X.bind(t))}if(B(SS,p),B(Es,v),B(P2,m),B(My,S),B(wS,E),B(xS,k),B(MS,O),B(PS,pe),B(ES,ge),B(jd,A),B(Ol,G),B(CS,j),dr(Y))if(Y.length){const Q=n.exposed||(n.exposed={});Y.forEach(X=>{Object.defineProperty(Q,X,{get:()=>t[X],set:_e=>t[X]=_e})})}else n.exposed||(n.exposed={});ee&&n.render===Yu&&(n.render=ee),V!=null&&(n.inheritAttrs=V),N&&(n.components=N),q&&(n.directives=q),j&&E2(n)}function IO(n,e,t=Yu){dr(n)&&(n=W_(n));for(const r in n){const i=n[r];let s;vs(i)?"default"in i?s=Mu(i.from||r,i.default,!0):s=Mu(i.from||r):s=Mu(i),vo(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function qx(n,e,t){Zu(dr(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function DS(n,e,t,r){let i=r.includes(".")?JS(t,r):()=>t[r];if(Ns(n)){const s=e[n];Nr(s)&&_i(i,s)}else if(Nr(n))_i(i,n.bind(t));else if(vs(n))if(dr(n))n.forEach(s=>DS(s,e,t,r));else{const s=Nr(n.handler)?n.handler.bind(t):e[n.handler];Nr(s)&&_i(i,s,n)}}function D2(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!t&&!r?l=e:(l={},i.length&&i.forEach(u=>Dv(l,u,o,!0)),Dv(l,e,o)),vs(e)&&s.set(e,l),l}function Dv(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&Dv(n,s,t,!0),i&&i.forEach(o=>Dv(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=OO[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const OO={data:Yx,props:Kx,emits:Kx,methods:wg,computed:wg,beforeCreate:Sl,created:Sl,beforeMount:Sl,mounted:Sl,beforeUpdate:Sl,updated:Sl,beforeDestroy:Sl,beforeUnmount:Sl,destroyed:Sl,unmounted:Sl,activated:Sl,deactivated:Sl,errorCaptured:Sl,serverPrefetch:Sl,components:wg,directives:wg,watch:RO,provide:Yx,inject:NO};function Yx(n,e){return e?n?function(){return Ps(Nr(n)?n.call(this,this):n,Nr(e)?e.call(this,this):e)}:e:n}function NO(n,e){return wg(W_(n),W_(e))}function W_(n){if(dr(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Sl(n,e){return n?[...new Set([].concat(n,e))]:e}function wg(n,e){return n?Ps(Object.create(null),n,e):e}function Kx(n,e){return n?dr(n)&&dr(e)?[...new Set([...n,...e])]:Ps(Object.create(null),fm(n),fm(e??{})):e}function RO(n,e){if(!n)return e;if(!e)return n;const t=Ps(Object.create(null),n);for(const r in e)t[r]=Sl(n[r],e[r]);return t}function IS(){return{app:null,config:{isNativeTag:jD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let BO=0;function FO(n,e){return function(r,i=null){Nr(r)||(r=Ps({},r)),i!=null&&!vs(i)&&(i=null);const s=IS(),o=new WeakSet,a=[];let l=!1;const u=s.app={_uid:BO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:pC,get config(){return s.config},set config(h){},use(h,...p){return o.has(h)||(h&&Nr(h.install)?(o.add(h),h.install(u,...p)):Nr(h)&&(o.add(h),h(u,...p))),u},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),u},component(h,p){return p?(s.components[h]=p,u):s.components[h]},directive(h,p){return p?(s.directives[h]=p,u):s.directives[h]},mount(h,p,v){if(!l){const m=u._ceVNode||ci(r,i);return m.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(m,h):n(m,h,v),l=!0,u._container=h,h.__vue_app__=u,Im(m.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Zu(a,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(h,p){return s.provides[h]=p,u},runWithContext(h){const p=hf;hf=u;try{return h()}finally{hf=p}}};return u}}let hf=null;function $g(n,e){if(ua){let t=ua.provides;const r=ua.parent&&ua.parent.provides;r===t&&(t=ua.provides=Object.create(r)),t[n]=e}}function Mu(n,e,t=!1){const r=ua||ca;if(r||hf){const i=hf?hf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Nr(e)?e.call(r&&r.proxy):e}}function OS(){return!!(ua||ca||hf)}const NS={},RS=()=>Object.create(NS),BS=n=>Object.getPrototypeOf(n)===NS;function jO(n,e,t,r=!1){const i={},s=RS();n.propsDefaults=Object.create(null),FS(n,e,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=r?i:_2(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function zO(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,a=Ni(i),[l]=n.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let p=0;p<h.length;p++){let v=h[p];if(ky(n.emitsOptions,v))continue;const m=e[v];if(l)if(ns(s,v))m!==s[v]&&(s[v]=m,u=!0);else{const S=Va(v);i[S]=q_(l,a,S,m,n,!1)}else m!==s[v]&&(s[v]=m,u=!0)}}}else{FS(n,e,i,s)&&(u=!0);let h;for(const p in a)(!e||!ns(e,p)&&((h=tu(p))===p||!ns(e,h)))&&(l?t&&(t[p]!==void 0||t[h]!==void 0)&&(i[p]=q_(l,a,p,void 0,n,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!ns(e,p))&&(delete s[p],u=!0)}u&&Ad(n.attrs,"set","")}function FS(n,e,t,r){const[i,s]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(vp(l))continue;const u=e[l];let h;i&&ns(i,h=Va(l))?!s||!s.includes(h)?t[h]=u:(a||(a={}))[h]=u:ky(n.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=Ni(t),u=a||Ri;for(let h=0;h<s.length;h++){const p=s[h];t[p]=q_(i,l,p,u[p],n,!ns(u,p))}}return o}function q_(n,e,t,r,i,s){const o=n[t];if(o!=null){const a=ns(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Nr(l)){const{propsDefaults:u}=i;if(t in u)r=u[t];else{const h=bf(i);r=u[t]=l.call(null,e),h()}}else r=l;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===tu(t))&&(r=!0))}return r}const $O=new WeakMap;function jS(n,e,t=!1){const r=t?$O:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},a=[];let l=!1;if(!Nr(n)){const h=p=>{l=!0;const[v,m]=jS(p,e,!0);Ps(o,v),m&&a.push(...m)};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!s&&!l)return vs(n)&&r.set(n,gp),gp;if(dr(s))for(let h=0;h<s.length;h++){const p=Va(s[h]);Zx(p)&&(o[p]=Ri)}else if(s)for(const h in s){const p=Va(h);if(Zx(p)){const v=s[h],m=o[p]=dr(v)||Nr(v)?{type:v}:Ps({},v),S=m.type;let E=!1,k=!0;if(dr(S))for(let T=0;T<S.length;++T){const A=S[T],R=Nr(A)&&A.name;if(R==="Boolean"){E=!0;break}else R==="String"&&(k=!1)}else E=Nr(S)&&S.name==="Boolean";m[0]=E,m[1]=k,(E||ns(m,"default"))&&a.push(p)}}const u=[o,a];return vs(n)&&r.set(n,u),u}function Zx(n){return n[0]!=="$"&&!vp(n)}const zS=n=>n[0]==="_"||n==="$stable",I2=n=>dr(n)?n.map(eu):[eu(n)],UO=(n,e,t)=>{if(e._n)return e;const r=nu((...i)=>I2(e(...i)),t);return r._c=!1,r},$S=(n,e,t)=>{const r=n._ctx;for(const i in n){if(zS(i))continue;const s=n[i];if(Nr(s))e[i]=UO(i,s,r);else if(s!=null){const o=I2(s);e[i]=()=>o}}},US=(n,e)=>{const t=I2(e);n.slots.default=()=>t},VS=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},VO=(n,e,t)=>{const r=n.slots=RS();if(n.vnode.shapeFlag&32){const i=e._;i?(VS(r,e,t),t&&FL(r,"_",i,!0)):$S(e,r)}else e&&US(n,e)},HO=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,o=Ri;if(r.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:VS(i,e,t):(s=!e.$stable,$S(e,i)),o=e}else e&&(US(n,e),o={default:1});if(s)for(const a in i)!zS(a)&&o[a]==null&&delete i[a]},aa=nC;function HS(n){return WS(n)}function GS(n){return WS(n,QI)}function WS(n,e){const t=vy();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:p,nextSibling:v,setScopeId:m=Yu,insertStaticContent:S}=n,E=(ue,re,Z,U=null,xe=null,Ne=null,Ge=void 0,Se=null,ce=!!re.dynamicChildren)=>{if(ue===re)return;ue&&!bc(ue,re)&&(U=fe(ue),ae(ue,xe,Ne,!0),ue=null),re.patchFlag===-2&&(ce=!1,re.dynamicChildren=null);const{type:je,ref:st,shapeFlag:lt}=re;switch(je){case bh:k(ue,re,Z,U);break;case na:T(ue,re,Z,U);break;case ff:ue==null&&A(re,Z,U,Ge);break;case kn:N(ue,re,Z,U,xe,Ne,Ge,Se,ce);break;default:lt&1?ee(ue,re,Z,U,xe,Ne,Ge,Se,ce):lt&6?q(ue,re,Z,U,xe,Ne,Ge,Se,ce):(lt&64||lt&128)&&je.process(ue,re,Z,U,xe,Ne,Ge,Se,ce,Oe)}st!=null&&xe&&hm(st,ue&&ue.ref,Ne,re||ue,!re)},k=(ue,re,Z,U)=>{if(ue==null)r(re.el=a(re.children),Z,U);else{const xe=re.el=ue.el;re.children!==ue.children&&u(xe,re.children)}},T=(ue,re,Z,U)=>{ue==null?r(re.el=l(re.children||""),Z,U):re.el=ue.el},A=(ue,re,Z,U)=>{[ue.el,ue.anchor]=S(ue.children,re,Z,U,ue.el,ue.anchor)},R=({el:ue,anchor:re},Z,U)=>{let xe;for(;ue&&ue!==re;)xe=v(ue),r(ue,Z,U),ue=xe;r(re,Z,U)},G=({el:ue,anchor:re})=>{let Z;for(;ue&&ue!==re;)Z=v(ue),i(ue),ue=Z;i(re)},ee=(ue,re,Z,U,xe,Ne,Ge,Se,ce)=>{re.type==="svg"?Ge="svg":re.type==="math"&&(Ge="mathml"),ue==null?pe(re,Z,U,xe,Ne,Ge,Se,ce):j(ue,re,xe,Ne,Ge,Se,ce)},pe=(ue,re,Z,U,xe,Ne,Ge,Se)=>{let ce,je;const{props:st,shapeFlag:lt,transition:_t,dirs:Je}=ue;if(ce=ue.el=o(ue.type,Ne,st&&st.is,st),lt&8?h(ce,ue.children):lt&16&&O(ue.children,ce,null,U,xe,j1(ue,Ne),Ge,Se),Je&&Yc(ue,null,U,"created"),ge(ce,ue,ue.scopeId,Ge,U),st){for(const Xt in st)Xt!=="value"&&!vp(Xt)&&s(ce,Xt,null,st[Xt],Ne,U);"value"in st&&s(ce,"value",null,st.value,Ne),(je=st.onVnodeBeforeMount)&&Jl(je,U,ue)}Je&&Yc(ue,null,U,"beforeMount");const zt=qS(xe,_t);zt&&_t.beforeEnter(ce),r(ce,re,Z),((je=st&&st.onVnodeMounted)||zt||Je)&&aa(()=>{je&&Jl(je,U,ue),zt&&_t.enter(ce),Je&&Yc(ue,null,U,"mounted")},xe)},ge=(ue,re,Z,U,xe)=>{if(Z&&m(ue,Z),U)for(let Ne=0;Ne<U.length;Ne++)m(ue,U[Ne]);if(xe){let Ne=xe.subTree;if(re===Ne||Ov(Ne.type)&&(Ne.ssContent===re||Ne.ssFallback===re)){const Ge=xe.vnode;ge(ue,Ge,Ge.scopeId,Ge.slotScopeIds,xe.parent)}}},O=(ue,re,Z,U,xe,Ne,Ge,Se,ce=0)=>{for(let je=ce;je<ue.length;je++){const st=ue[je]=Se?uh(ue[je]):eu(ue[je]);E(null,st,re,Z,U,xe,Ne,Ge,Se)}},j=(ue,re,Z,U,xe,Ne,Ge)=>{const Se=re.el=ue.el;let{patchFlag:ce,dynamicChildren:je,dirs:st}=re;ce|=ue.patchFlag&16;const lt=ue.props||Ri,_t=re.props||Ri;let Je;if(Z&&Vh(Z,!1),(Je=_t.onVnodeBeforeUpdate)&&Jl(Je,Z,re,ue),st&&Yc(re,ue,Z,"beforeUpdate"),Z&&Vh(Z,!0),(lt.innerHTML&&_t.innerHTML==null||lt.textContent&&_t.textContent==null)&&h(Se,""),je?Y(ue.dynamicChildren,je,Se,Z,U,j1(re,xe),Ne):Ge||X(ue,re,Se,null,Z,U,j1(re,xe),Ne,!1),ce>0){if(ce&16)V(Se,lt,_t,Z,xe);else if(ce&2&&lt.class!==_t.class&&s(Se,"class",null,_t.class,xe),ce&4&&s(Se,"style",lt.style,_t.style,xe),ce&8){const zt=re.dynamicProps;for(let Xt=0;Xt<zt.length;Xt++){const et=zt[Xt],ut=lt[et],ot=_t[et];(ot!==ut||et==="value")&&s(Se,et,ut,ot,xe,Z)}}ce&1&&ue.children!==re.children&&h(Se,re.children)}else!Ge&&je==null&&V(Se,lt,_t,Z,xe);((Je=_t.onVnodeUpdated)||st)&&aa(()=>{Je&&Jl(Je,Z,re,ue),st&&Yc(re,ue,Z,"updated")},U)},Y=(ue,re,Z,U,xe,Ne,Ge)=>{for(let Se=0;Se<re.length;Se++){const ce=ue[Se],je=re[Se],st=ce.el&&(ce.type===kn||!bc(ce,je)||ce.shapeFlag&70)?p(ce.el):Z;E(ce,je,st,null,U,xe,Ne,Ge,!0)}},V=(ue,re,Z,U,xe)=>{if(re!==Z){if(re!==Ri)for(const Ne in re)!vp(Ne)&&!(Ne in Z)&&s(ue,Ne,re[Ne],null,xe,U);for(const Ne in Z){if(vp(Ne))continue;const Ge=Z[Ne],Se=re[Ne];Ge!==Se&&Ne!=="value"&&s(ue,Ne,Se,Ge,xe,U)}"value"in Z&&s(ue,"value",re.value,Z.value,xe)}},N=(ue,re,Z,U,xe,Ne,Ge,Se,ce)=>{const je=re.el=ue?ue.el:a(""),st=re.anchor=ue?ue.anchor:a("");let{patchFlag:lt,dynamicChildren:_t,slotScopeIds:Je}=re;Je&&(Se=Se?Se.concat(Je):Je),ue==null?(r(je,Z,U),r(st,Z,U),O(re.children||[],Z,st,xe,Ne,Ge,Se,ce)):lt>0&&lt&64&&_t&&ue.dynamicChildren?(Y(ue.dynamicChildren,_t,Z,xe,Ne,Ge,Se),(re.key!=null||xe&&re===xe.subTree)&&O2(ue,re,!0)):X(ue,re,Z,st,xe,Ne,Ge,Se,ce)},q=(ue,re,Z,U,xe,Ne,Ge,Se,ce)=>{re.slotScopeIds=Se,ue==null?re.shapeFlag&512?xe.ctx.activate(re,Z,U,Ge,ce):$(re,Z,U,xe,Ne,Ge,ce):F(ue,re,ce)},$=(ue,re,Z,U,xe,Ne,Ge)=>{const Se=ue.component=lC(ue,U,xe);if(Tm(ue)&&(Se.ctx.renderer=Oe),cC(Se,!1,Ge),Se.asyncDep){if(xe&&xe.registerDep(Se,B,Ge),!ue.el){const ce=Se.subTree=ci(na);T(null,ce,re,Z)}}else B(Se,ue,re,Z,xe,Ne,Ge)},F=(ue,re,Z)=>{const U=re.component=ue.component;if(QO(ue,re,Z))if(U.asyncDep&&!U.asyncResolved){Q(U,re,Z);return}else U.next=re,U.update();else re.el=ue.el,U.vnode=re},B=(ue,re,Z,U,xe,Ne,Ge)=>{const Se=()=>{if(ue.isMounted){let{next:lt,bu:_t,u:Je,parent:zt,vnode:Xt}=ue;{const Jt=YS(ue);if(Jt){lt&&(lt.el=Xt.el,Q(ue,lt,Ge)),Jt.asyncDep.then(()=>{ue.isUnmounted||Se()});return}}let et=lt,ut;Vh(ue,!1),lt?(lt.el=Xt.el,Q(ue,lt,Ge)):lt=Xt,_t&&yp(_t),(ut=lt.props&&lt.props.onVnodeBeforeUpdate)&&Jl(ut,zt,lt,Xt),Vh(ue,!0);const ot=J0(ue),It=ue.subTree;ue.subTree=ot,E(It,ot,p(It.el),fe(It),ue,xe,Ne),lt.el=ot.el,et===null&&Ay(ue,ot.el),Je&&aa(Je,xe),(ut=lt.props&&lt.props.onVnodeUpdated)&&aa(()=>Jl(ut,zt,lt,Xt),xe)}else{let lt;const{el:_t,props:Je}=re,{bm:zt,m:Xt,parent:et,root:ut,type:ot}=ue,It=_h(re);if(Vh(ue,!1),zt&&yp(zt),!It&&(lt=Je&&Je.onVnodeBeforeMount)&&Jl(lt,et,re),Vh(ue,!0),_t&&Be){const Jt=()=>{ue.subTree=J0(ue),Be(_t,ue.subTree,ue,xe,null)};It&&ot.__asyncHydrate?ot.__asyncHydrate(_t,ue,Jt):Jt()}else{ut.ce&&ut.ce._injectChildStyle(ot);const Jt=ue.subTree=J0(ue);E(null,Jt,Z,U,ue,xe,Ne),re.el=Jt.el}if(Xt&&aa(Xt,xe),!It&&(lt=Je&&Je.onVnodeMounted)){const Jt=re;aa(()=>Jl(lt,et,Jt),xe)}(re.shapeFlag&256||et&&_h(et.vnode)&&et.vnode.shapeFlag&256)&&ue.a&&aa(ue.a,xe),ue.isMounted=!0,re=Z=U=null}};ue.scope.on();const ce=ue.effect=new om(Se);ue.scope.off();const je=ue.update=ce.run.bind(ce),st=ue.job=ce.runIfDirty.bind(ce);st.i=ue,st.id=ue.uid,ce.scheduler=()=>L2(st),Vh(ue,!0),je()},Q=(ue,re,Z)=>{re.component=ue;const U=ue.vnode.props;ue.vnode=re,ue.next=null,zO(ue,re.props,U,Z),HO(ue,re.children,Z),Ah(),jx(ue),Th()},X=(ue,re,Z,U,xe,Ne,Ge,Se,ce=!1)=>{const je=ue&&ue.children,st=ue?ue.shapeFlag:0,lt=re.children,{patchFlag:_t,shapeFlag:Je}=re;if(_t>0){if(_t&128){me(je,lt,Z,U,xe,Ne,Ge,Se,ce);return}else if(_t&256){_e(je,lt,Z,U,xe,Ne,Ge,Se,ce);return}}Je&8?(st&16&&se(je,xe,Ne),lt!==je&&h(Z,lt)):st&16?Je&16?me(je,lt,Z,U,xe,Ne,Ge,Se,ce):se(je,xe,Ne,!0):(st&8&&h(Z,""),Je&16&&O(lt,Z,U,xe,Ne,Ge,Se,ce))},_e=(ue,re,Z,U,xe,Ne,Ge,Se,ce)=>{ue=ue||gp,re=re||gp;const je=ue.length,st=re.length,lt=Math.min(je,st);let _t;for(_t=0;_t<lt;_t++){const Je=re[_t]=ce?uh(re[_t]):eu(re[_t]);E(ue[_t],Je,Z,null,xe,Ne,Ge,Se,ce)}je>st?se(ue,xe,Ne,!0,!1,lt):O(re,Z,U,xe,Ne,Ge,Se,ce,lt)},me=(ue,re,Z,U,xe,Ne,Ge,Se,ce)=>{let je=0;const st=re.length;let lt=ue.length-1,_t=st-1;for(;je<=lt&&je<=_t;){const Je=ue[je],zt=re[je]=ce?uh(re[je]):eu(re[je]);if(bc(Je,zt))E(Je,zt,Z,null,xe,Ne,Ge,Se,ce);else break;je++}for(;je<=lt&&je<=_t;){const Je=ue[lt],zt=re[_t]=ce?uh(re[_t]):eu(re[_t]);if(bc(Je,zt))E(Je,zt,Z,null,xe,Ne,Ge,Se,ce);else break;lt--,_t--}if(je>lt){if(je<=_t){const Je=_t+1,zt=Je<st?re[Je].el:U;for(;je<=_t;)E(null,re[je]=ce?uh(re[je]):eu(re[je]),Z,zt,xe,Ne,Ge,Se,ce),je++}}else if(je>_t)for(;je<=lt;)ae(ue[je],xe,Ne,!0),je++;else{const Je=je,zt=je,Xt=new Map;for(je=zt;je<=_t;je++){const An=re[je]=ce?uh(re[je]):eu(re[je]);An.key!=null&&Xt.set(An.key,je)}let et,ut=0;const ot=_t-zt+1;let It=!1,Jt=0;const xn=new Array(ot);for(je=0;je<ot;je++)xn[je]=0;for(je=Je;je<=lt;je++){const An=ue[je];if(ut>=ot){ae(An,xe,Ne,!0);continue}let Zn;if(An.key!=null)Zn=Xt.get(An.key);else for(et=zt;et<=_t;et++)if(xn[et-zt]===0&&bc(An,re[et])){Zn=et;break}Zn===void 0?ae(An,xe,Ne,!0):(xn[Zn-zt]=je+1,Zn>=Jt?Jt=Zn:It=!0,E(An,re[Zn],Z,null,xe,Ne,Ge,Se,ce),ut++)}const Sn=It?GO(xn):gp;for(et=Sn.length-1,je=ot-1;je>=0;je--){const An=zt+je,Zn=re[An],Cn=An+1<st?re[An+1].el:U;xn[je]===0?E(null,Zn,Z,Cn,xe,Ne,Ge,Se,ce):It&&(et<0||je!==Sn[et]?We(Zn,Z,Cn,2):et--)}}},We=(ue,re,Z,U,xe=null)=>{const{el:Ne,type:Ge,transition:Se,children:ce,shapeFlag:je}=ue;if(je&6){We(ue.component.subTree,re,Z,U);return}if(je&128){ue.suspense.move(re,Z,U);return}if(je&64){Ge.move(ue,re,Z,Oe);return}if(Ge===kn){r(Ne,re,Z);for(let lt=0;lt<ce.length;lt++)We(ce[lt],re,Z,U);r(ue.anchor,re,Z);return}if(Ge===ff){R(ue,re,Z);return}if(U!==2&&je&1&&Se)if(U===0)Se.beforeEnter(Ne),r(Ne,re,Z),aa(()=>Se.enter(Ne),xe);else{const{leave:lt,delayLeave:_t,afterLeave:Je}=Se,zt=()=>r(Ne,re,Z),Xt=()=>{lt(Ne,()=>{zt(),Je&&Je()})};_t?_t(Ne,zt,Xt):Xt()}else r(Ne,re,Z)},ae=(ue,re,Z,U=!1,xe=!1)=>{const{type:Ne,props:Ge,ref:Se,children:ce,dynamicChildren:je,shapeFlag:st,patchFlag:lt,dirs:_t,cacheIndex:Je}=ue;if(lt===-2&&(xe=!1),Se!=null&&hm(Se,null,Z,ue,!0),Je!=null&&(re.renderCache[Je]=void 0),st&256){re.ctx.deactivate(ue);return}const zt=st&1&&_t,Xt=!_h(ue);let et;if(Xt&&(et=Ge&&Ge.onVnodeBeforeUnmount)&&Jl(et,re,ue),st&6)J(ue.component,Z,U);else{if(st&128){ue.suspense.unmount(Z,U);return}zt&&Yc(ue,null,re,"beforeUnmount"),st&64?ue.type.remove(ue,re,Z,Oe,U):je&&!je.hasOnce&&(Ne!==kn||lt>0&&lt&64)?se(je,re,Z,!1,!0):(Ne===kn&&lt&384||!xe&&st&16)&&se(ce,re,Z),U&&ve(ue)}(Xt&&(et=Ge&&Ge.onVnodeUnmounted)||zt)&&aa(()=>{et&&Jl(et,re,ue),zt&&Yc(ue,null,re,"unmounted")},Z)},ve=ue=>{const{type:re,el:Z,anchor:U,transition:xe}=ue;if(re===kn){ye(Z,U);return}if(re===ff){G(ue);return}const Ne=()=>{i(Z),xe&&!xe.persisted&&xe.afterLeave&&xe.afterLeave()};if(ue.shapeFlag&1&&xe&&!xe.persisted){const{leave:Ge,delayLeave:Se}=xe,ce=()=>Ge(Z,Ne);Se?Se(ue.el,Ne,ce):ce()}else Ne()},ye=(ue,re)=>{let Z;for(;ue!==re;)Z=v(ue),i(ue),ue=Z;i(re)},J=(ue,re,Z)=>{const{bum:U,scope:xe,job:Ne,subTree:Ge,um:Se,m:ce,a:je}=ue;Iv(ce),Iv(je),U&&yp(U),xe.stop(),Ne&&(Ne.flags|=8,ae(Ge,ue,re,Z)),Se&&aa(Se,re),aa(()=>{ue.isUnmounted=!0},re),re&&re.pendingBranch&&!re.isUnmounted&&ue.asyncDep&&!ue.asyncResolved&&ue.suspenseId===re.pendingId&&(re.deps--,re.deps===0&&re.resolve())},se=(ue,re,Z,U=!1,xe=!1,Ne=0)=>{for(let Ge=Ne;Ge<ue.length;Ge++)ae(ue[Ge],re,Z,U,xe)},fe=ue=>{if(ue.shapeFlag&6)return fe(ue.component.subTree);if(ue.shapeFlag&128)return ue.suspense.next();const re=v(ue.anchor||ue.el),Z=re&&re[fS];return Z?v(Z):re};let ie=!1;const te=(ue,re,Z)=>{ue==null?re._vnode&&ae(re._vnode,null,null,!0):E(re._vnode||null,ue,re,null,null,null,Z),re._vnode=ue,ie||(ie=!0,jx(),Tv(),ie=!1)},Oe={p:E,um:ae,m:We,r:ve,mt:$,mc:O,pc:X,pbc:Y,n:fe,o:n};let we,Be;return e&&([we,Be]=e(Oe)),{render:te,hydrate:we,createApp:FO(te,we)}}function j1({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Vh({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function qS(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function O2(n,e,t=!1){const r=n.children,i=e.children;if(dr(r)&&dr(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=uh(i[s]),a.el=o.el),!t&&a.patchFlag!==-2&&O2(o,a)),a.type===bh&&(a.el=o.el)}}function GO(n){const e=n.slice(),t=[0];let r,i,s,o,a;const l=n.length;for(r=0;r<l;r++){const u=n[r];if(u!==0){if(i=t[t.length-1],n[i]<u){e[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<u?s=a+1:o=a;u<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function YS(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:YS(e)}function Iv(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const KS=Symbol.for("v-scx"),ZS=()=>Mu(KS);function pm(n,e){return Dm(n,null,e)}function WO(n,e){return Dm(n,null,{flush:"post"})}function XS(n,e){return Dm(n,null,{flush:"sync"})}function _i(n,e,t){return Dm(n,e,t)}function Dm(n,e,t=Ri){const{immediate:r,deep:i,flush:s,once:o}=t,a=Ps({},t),l=e&&r||!e&&s!=="post";let u;if(Pp){if(s==="sync"){const m=ZS();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Yu,m.resume=Yu,m.pause=Yu,m}}const h=ua;a.call=(m,S,E)=>Zu(m,h,S,E);let p=!1;s==="post"?a.scheduler=m=>{aa(m,h&&h.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(m,S)=>{S?m():L2(m)}),a.augmentJob=m=>{e&&(m.flags|=4),p&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const v=RI(n,e,a);return Pp&&(u?u.push(v):l&&v()),v}function qO(n,e,t){const r=this.proxy,i=Ns(n)?n.includes(".")?JS(r,n):()=>r[n]:n.bind(r,r);let s;Nr(e)?s=e:(s=e.handler,t=e);const o=bf(this),a=Dm(i,s.bind(r),t);return o(),a}function JS(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}function YO(n,e,t=Ri){const r=Ju(),i=Va(e),s=tu(e),o=QS(n,i),a=sS((l,u)=>{let h,p=Ri,v;return XS(()=>{const m=n[i];Al(h,m)&&(h=m,u())}),{get(){return l(),t.get?t.get(h):h},set(m){const S=t.set?t.set(m):m;if(!Al(S,h)&&!(p!==Ri&&Al(m,p)))return;const E=r.vnode.props;E&&(e in E||i in E||s in E)&&(`onUpdate:${e}`in E||`onUpdate:${i}`in E||`onUpdate:${s}`in E)||(h=m,u()),r.emit(`update:${e}`,S),Al(m,S)&&Al(m,p)&&!Al(S,v)&&u(),p=m,v=S}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||Ri:a,done:!1}:{done:!0}}}},a}const QS=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Va(e)}Modifiers`]||n[`${tu(e)}Modifiers`];function KO(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||Ri;let i=t;const s=e.startsWith("update:"),o=s&&QS(r,e.slice(7));o&&(o.trim&&(i=t.map(h=>Ns(h)?h.trim():h)),o.number&&(i=t.map(Ev)));let a,l=r[a=Rg(e)]||r[a=Rg(Va(e))];!l&&s&&(l=r[a=Rg(tu(e))]),l&&Zu(l,n,6,i);const u=r[a+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Zu(u,n,6,i)}}function eC(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},a=!1;if(!Nr(n)){const l=u=>{const h=eC(u,e,!0);h&&(a=!0,Ps(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(vs(n)&&r.set(n,null),null):(dr(s)?s.forEach(l=>o[l]=null):Ps(o,s),vs(n)&&r.set(n,o),o)}function ky(n,e){return!n||!km(e)?!1:(e=e.slice(2).replace(/Once$/,""),ns(n,e[0].toLowerCase()+e.slice(1))||ns(n,tu(e))||ns(n,e))}function J0(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:p,data:v,setupState:m,ctx:S,inheritAttrs:E}=n,k=dm(n);let T,A;try{if(t.shapeFlag&4){const G=i||r,ee=G;T=eu(u.call(ee,G,h,p,m,v,S)),A=a}else{const G=e;T=eu(G.length>1?G(p,{attrs:a,slots:o,emit:l}):G(p,null)),A=e.props?a:XO(a)}}catch(G){Ug.length=0,Ef(G,n,1),T=ci(na)}let R=T;if(A&&E!==!1){const G=Object.keys(A),{shapeFlag:ee}=R;G.length&&ee&7&&(s&&G.some(u2)&&(A=JO(A,s)),R=sd(R,A,!1,!0))}return t.dirs&&(R=sd(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(t.dirs):t.dirs),t.transition&&Fd(R,t.transition),T=R,dm(k),T}function ZO(n,e=!0){let t;for(let r=0;r<n.length;r++){const i=n[r];if(zd(i)){if(i.type!==na||i.children==="v-if"){if(t)return;t=i}}else return}return t}const XO=n=>{let e;for(const t in n)(t==="class"||t==="style"||km(t))&&((e||(e={}))[t]=n[t]);return e},JO=(n,e)=>{const t={};for(const r in n)(!u2(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function QO(n,e,t){const{props:r,children:i,component:s}=n,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?Xx(r,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let p=0;p<h.length;p++){const v=h[p];if(o[v]!==r[v]&&!ky(u,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Xx(r,o,u):!0:!!o;return!1}function Xx(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!ky(t,s))return!0}return!1}function Ay({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const Ov=n=>n.__isSuspense;let Y_=0;const e8={name:"Suspense",__isSuspense:!0,process(n,e,t,r,i,s,o,a,l,u){if(n==null)n8(e,t,r,i,s,o,a,l,u);else{if(s&&s.deps>0&&!n.suspense.isInFallback){e.suspense=n.suspense,e.suspense.vnode=e,e.el=n.el;return}r8(n,e,t,r,i,o,a,l,u)}},hydrate:i8,normalize:s8},t8=e8;function gm(n,e){const t=n.props&&n.props[e];Nr(t)&&t()}function n8(n,e,t,r,i,s,o,a,l){const{p:u,o:{createElement:h}}=l,p=h("div"),v=n.suspense=tC(n,i,r,e,p,t,s,o,a,l);u(null,v.pendingBranch=n.ssContent,p,null,r,v,s,o),v.deps>0?(gm(n,"onPending"),gm(n,"onFallback"),u(null,n.ssFallback,e,t,r,null,s,o),bp(v,n.ssFallback)):v.resolve(!1,!0)}function r8(n,e,t,r,i,s,o,a,{p:l,um:u,o:{createElement:h}}){const p=e.suspense=n.suspense;p.vnode=e,e.el=n.el;const v=e.ssContent,m=e.ssFallback,{activeBranch:S,pendingBranch:E,isInFallback:k,isHydrating:T}=p;if(E)p.pendingBranch=v,bc(v,E)?(l(E,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():k&&(T||(l(S,m,t,r,i,null,s,o,a),bp(p,m)))):(p.pendingId=Y_++,T?(p.isHydrating=!1,p.activeBranch=E):u(E,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=h("div"),k?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(S,m,t,r,i,null,s,o,a),bp(p,m))):S&&bc(v,S)?(l(S,v,t,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(S&&bc(v,S))l(S,v,t,r,i,p,s,o,a),bp(p,v);else if(gm(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=Y_++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:A,pendingId:R}=p;A>0?setTimeout(()=>{p.pendingId===R&&p.fallback(m)},A):A===0&&p.fallback(m)}}function tC(n,e,t,r,i,s,o,a,l,u,h=!1){const{p,m:v,um:m,n:S,o:{parentNode:E,remove:k}}=u;let T;const A=o8(n);A&&e&&e.pendingBranch&&(T=e.pendingId,e.deps++);const R=n.props?Pv(n.props.timeout):void 0,G=s,ee={vnode:n,parent:e,parentComponent:t,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:Y_++,timeout:typeof R=="number"?R:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(pe=!1,ge=!1){const{vnode:O,activeBranch:j,pendingBranch:Y,pendingId:V,effects:N,parentComponent:q,container:$}=ee;let F=!1;ee.isHydrating?ee.isHydrating=!1:pe||(F=j&&Y.transition&&Y.transition.mode==="out-in",F&&(j.transition.afterLeave=()=>{V===ee.pendingId&&(v(Y,$,s===G?S(j):s,0),um(N))}),j&&(E(j.el)===$&&(s=S(j)),m(j,q,ee,!0)),F||v(Y,$,s,0)),bp(ee,Y),ee.pendingBranch=null,ee.isInFallback=!1;let B=ee.parent,Q=!1;for(;B;){if(B.pendingBranch){B.effects.push(...N),Q=!0;break}B=B.parent}!Q&&!F&&um(N),ee.effects=[],A&&e&&e.pendingBranch&&T===e.pendingId&&(e.deps--,e.deps===0&&!ge&&e.resolve()),gm(O,"onResolve")},fallback(pe){if(!ee.pendingBranch)return;const{vnode:ge,activeBranch:O,parentComponent:j,container:Y,namespace:V}=ee;gm(ge,"onFallback");const N=S(O),q=()=>{ee.isInFallback&&(p(null,pe,Y,N,j,null,V,a,l),bp(ee,pe))},$=pe.transition&&pe.transition.mode==="out-in";$&&(O.transition.afterLeave=q),ee.isInFallback=!0,m(O,j,null,!0),$||q()},move(pe,ge,O){ee.activeBranch&&v(ee.activeBranch,pe,ge,O),ee.container=pe},next(){return ee.activeBranch&&S(ee.activeBranch)},registerDep(pe,ge,O){const j=!!ee.pendingBranch;j&&ee.deps++;const Y=pe.vnode.el;pe.asyncDep.catch(V=>{Ef(V,pe,0)}).then(V=>{if(pe.isUnmounted||ee.isUnmounted||ee.pendingId!==pe.suspenseId)return;pe.asyncResolved=!0;const{vnode:N}=pe;J_(pe,V,!1),Y&&(N.el=Y);const q=!Y&&pe.subTree.el;ge(pe,N,E(Y||pe.subTree.el),Y?null:S(pe.subTree),ee,o,O),q&&k(q),Ay(pe,N.el),j&&--ee.deps===0&&ee.resolve()})},unmount(pe,ge){ee.isUnmounted=!0,ee.activeBranch&&m(ee.activeBranch,t,pe,ge),ee.pendingBranch&&m(ee.pendingBranch,t,pe,ge)}};return ee}function i8(n,e,t,r,i,s,o,a,l){const u=e.suspense=tC(e,r,t,n.parentNode,document.createElement("div"),null,i,s,o,a,!0),h=l(n,u.pendingBranch=e.ssContent,t,u,s,o);return u.deps===0&&u.resolve(!1,!0),h}function s8(n){const{shapeFlag:e,children:t}=n,r=e&32;n.ssContent=Jx(r?t.default:t),n.ssFallback=r?Jx(t.fallback):ci(na)}function Jx(n){let e;if(Nr(n)){const t=_f&&n._c;t&&(n._d=!1,De()),n=n(),t&&(n._d=!0,e=hl,rC())}return dr(n)&&(n=ZO(n)),n=eu(n),e&&!n.dynamicChildren&&(n.dynamicChildren=e.filter(t=>t!==n)),n}function nC(n,e){e&&e.pendingBranch?dr(n)?e.effects.push(...n):e.effects.push(n):um(n)}function bp(n,e){n.activeBranch=e;const{vnode:t,parentComponent:r}=n;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;t.el=i,r&&r.subTree===t&&(r.vnode.el=i,Ay(r,i))}function o8(n){const e=n.props&&n.props.suspensible;return e!=null&&e!==!1}const kn=Symbol.for("v-fgt"),bh=Symbol.for("v-txt"),na=Symbol.for("v-cmt"),ff=Symbol.for("v-stc"),Ug=[];let hl=null;function De(n=!1){Ug.push(hl=n?null:[])}function rC(){Ug.pop(),hl=Ug[Ug.length-1]||null}let _f=1;function K_(n,e=!1){_f+=n,n<0&&hl&&e&&(hl.hasOnce=!0)}function iC(n){return n.dynamicChildren=_f>0?hl||gp:null,rC(),_f>0&&hl&&hl.push(n),n}function Fe(n,e,t,r,i,s){return iC(x(n,e,t,r,i,s,!0))}function $o(n,e,t,r,i){return iC(ci(n,e,t,r,i,!0))}function zd(n){return n?n.__v_isVNode===!0:!1}function bc(n,e){return n.type===e.type&&n.key===e.key}function a8(n){}const sC=({key:n})=>n??null,Q0=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Ns(n)||vo(n)||Nr(n)?{i:ca,r:n,k:e,f:!!t}:n:null);function x(n,e=null,t=null,r=0,i=null,s=n===kn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&sC(e),ref:e&&Q0(e),scopeId:Cy,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ca};return a?(N2(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=Ns(t)?8:16),_f>0&&!o&&hl&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&hl.push(l),l}const ci=l8;function l8(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===kS)&&(n=na),zd(n)){const a=sd(n,e,!0);return t&&N2(a,t),_f>0&&!s&&hl&&(a.shapeFlag&6?hl[hl.indexOf(n)]=a:hl.push(a)),a.patchFlag=-2,a}if(g8(n)&&(n=n.__vccOpts),e){e=oC(e);let{class:a,style:l}=e;a&&!Ns(a)&&(e.class=Mi(a)),vs(l)&&(Ly(l)&&!dr(l)&&(l=Ps({},l)),e.style=iu(l))}const o=Ns(n)?1:Ov(n)?128:pS(n)?64:vs(n)?4:Nr(n)?2:0;return x(n,e,t,r,i,o,s,!0)}function oC(n){return n?Ly(n)||BS(n)?Ps({},n):n:null}function sd(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=n,u=e?aC(i||{},e):i,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&sC(u),ref:e&&e.ref?t&&s?dr(s)?s.concat(Q0(e)):[s,Q0(e)]:Q0(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==kn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&sd(n.ssContent),ssFallback:n.ssFallback&&sd(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&Fd(h,l.clone(h)),h}function qr(n=" ",e=0){return ci(bh,null,n,e)}function fl(n,e){const t=ci(ff,null,n);return t.staticCount=e,t}function tn(n="",e=!1){return e?(De(),$o(na,null,n)):ci(na,null,n)}function eu(n){return n==null||typeof n=="boolean"?ci(na):dr(n)?ci(kn,null,n.slice()):zd(n)?uh(n):ci(bh,null,String(n))}function uh(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:sd(n)}function N2(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(dr(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),N2(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!BS(e)?e._ctx=ca:i===3&&ca&&(ca.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Nr(e)?(e={default:e,_ctx:ca},t=32):(e=String(e),r&64?(t=16,e=[qr(e)]):t=8);n.children=e,n.shapeFlag|=t}function aC(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Mi([e.class,r.class]));else if(i==="style")e.style=iu([e.style,r.style]);else if(km(i)){const s=e[i],o=r[i];o&&s!==o&&!(dr(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Jl(n,e,t,r=null){Zu(n,e,7,[t,r])}const u8=IS();let c8=0;function lC(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||u8,s={uid:c8++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new f2(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jS(r,i),emitsOptions:eC(r,i),emit:null,emitted:null,propsDefaults:Ri,inheritAttrs:r.inheritAttrs,ctx:Ri,data:Ri,props:Ri,attrs:Ri,slots:Ri,refs:Ri,setupState:Ri,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=KO.bind(null,s),n.ce&&n.ce(s),s}let ua=null;const Ju=()=>ua||ca;let Nv,Z_;{const n=vy(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Nv=e("__VUE_INSTANCE_SETTERS__",t=>ua=t),Z_=e("__VUE_SSR_SETTERS__",t=>Pp=t)}const bf=n=>{const e=ua;return Nv(n),n.scope.on(),()=>{n.scope.off(),Nv(e)}},X_=()=>{ua&&ua.scope.off(),Nv(null)};function uC(n){return n.vnode.shapeFlag&4}let Pp=!1;function cC(n,e=!1,t=!1){e&&Z_(e);const{props:r,children:i}=n.vnode,s=uC(n);jO(n,r,s,e),VO(n,i,t);const o=s?d8(n,e):void 0;return e&&Z_(!1),o}function d8(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,H_);const{setup:r}=t;if(r){Ah();const i=n.setupContext=r.length>1?hC(n):null,s=bf(n),o=zp(r,n,0,[n.props,i]),a=d2(o);if(Th(),s(),(a||n.sp)&&!_h(n)&&E2(n),a){if(o.then(X_,X_),e)return o.then(l=>{J_(n,l,e)}).catch(l=>{Ef(l,n,0)});n.asyncDep=o}else J_(n,o,e)}else dC(n,e)}function J_(n,e,t){Nr(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:vs(e)&&(n.setupState=w2(e)),dC(n,t)}let Rv,Q_;function h8(n){Rv=n,Q_=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,yO))}}const f8=()=>!Rv;function dC(n,e,t){const r=n.type;if(!n.render){if(!e&&Rv&&!r.render){const i=r.template||D2(n).template;if(i){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Ps(Ps({isCustomElement:s,delimiters:a},o),l);r.render=Rv(i,u)}}n.render=r.render||Yu,Q_&&Q_(n)}{const i=bf(n);Ah();try{DO(n)}finally{Th(),i()}}}const p8={get(n,e){return al(n,"get",""),n[e]}};function hC(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,p8),slots:n.slots,emit:n.emit,expose:e}}function Im(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(w2(Sy(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in zg)return zg[t](n)},has(e,t){return t in e||t in zg}})):n.proxy}function eb(n,e=!0){return Nr(n)?n.displayName||n.name:n.name||e&&n.__name}function g8(n){return Nr(n)&&"__vccOpts"in n}const rr=(n,e)=>DI(n,e,Pp);function Ty(n,e,t){const r=arguments.length;return r===2?vs(e)&&!dr(e)?zd(e)?ci(n,null,[e]):ci(n,e):ci(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&zd(t)&&(t=[t]),ci(n,e,t))}function m8(){}function v8(n,e,t,r){const i=t[r];if(i&&fC(i,n))return i;const s=e();return s.memo=n.slice(),s.cacheIndex=r,t[r]=s}function fC(n,e){const t=n.memo;if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(Al(t[r],e[r]))return!1;return _f>0&&hl&&hl.push(n),!0}const pC="3.5.13",y8=Yu,_8=$I,b8=sp,w8=hS,x8={createComponentInstance:lC,setupComponent:cC,renderComponentRoot:J0,setCurrentRenderingInstance:dm,isVNode:zd,normalizeVNode:eu,getComponentPublicInstance:Im,ensureValidVNode:T2,pushWarningContext:BI,popWarningContext:FI},L8=x8,S8=null,C8=null,E8=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tb;const Qx=typeof window<"u"&&window.trustedTypes;if(Qx)try{tb=Qx.createPolicy("vue",{createHTML:n=>n})}catch{}const gC=tb?n=>tb.createHTML(n):n=>n,P8="http://www.w3.org/2000/svg",M8="http://www.w3.org/1998/Math/MathML",Md=typeof document<"u"?document:null,e4=Md&&Md.createElement("template"),k8={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?Md.createElementNS(P8,n):e==="mathml"?Md.createElementNS(M8,n):t?Md.createElement(n,{is:t}):Md.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Md.createTextNode(n),createComment:n=>Md.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Md.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const o=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{e4.innerHTML=gC(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=e4.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Jd="transition",eg="animation",Mp=Symbol("_vtc"),mC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},vC=Ps({},C2,mC),A8=n=>(n.displayName="Transition",n.props=vC,n),nb=A8((n,{slots:e})=>Ty(_S,yC(n),e)),Hh=(n,e=[])=>{dr(n)?n.forEach(t=>t(...e)):n&&n(...e)},t4=n=>n?dr(n)?n.some(e=>e.length>1):n.length>1:!1;function yC(n){const e={};for(const N in n)N in mC||(e[N]=n[N]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:p=`${t}-leave-from`,leaveActiveClass:v=`${t}-leave-active`,leaveToClass:m=`${t}-leave-to`}=n,S=T8(i),E=S&&S[0],k=S&&S[1],{onBeforeEnter:T,onEnter:A,onEnterCancelled:R,onLeave:G,onLeaveCancelled:ee,onBeforeAppear:pe=T,onAppear:ge=A,onAppearCancelled:O=R}=e,j=(N,q,$,F)=>{N._enterCancelled=F,ih(N,q?h:a),ih(N,q?u:o),$&&$()},Y=(N,q)=>{N._isLeaving=!1,ih(N,p),ih(N,m),ih(N,v),q&&q()},V=N=>(q,$)=>{const F=N?ge:A,B=()=>j(q,N,$);Hh(F,[q,B]),n4(()=>{ih(q,N?l:s),Vc(q,N?h:a),t4(F)||r4(q,r,E,B)})};return Ps(e,{onBeforeEnter(N){Hh(T,[N]),Vc(N,s),Vc(N,o)},onBeforeAppear(N){Hh(pe,[N]),Vc(N,l),Vc(N,u)},onEnter:V(!1),onAppear:V(!0),onLeave(N,q){N._isLeaving=!0;const $=()=>Y(N,q);Vc(N,p),N._enterCancelled?(Vc(N,v),rb()):(rb(),Vc(N,v)),n4(()=>{N._isLeaving&&(ih(N,p),Vc(N,m),t4(G)||r4(N,r,k,$))}),Hh(G,[N,$])},onEnterCancelled(N){j(N,!1,void 0,!0),Hh(R,[N])},onAppearCancelled(N){j(N,!0,void 0,!0),Hh(O,[N])},onLeaveCancelled(N){Y(N),Hh(ee,[N])}})}function T8(n){if(n==null)return null;if(vs(n))return[z1(n.enter),z1(n.leave)];{const e=z1(n);return[e,e]}}function z1(n){return Pv(n)}function Vc(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Mp]||(n[Mp]=new Set)).add(e)}function ih(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Mp];t&&(t.delete(e),t.size||(n[Mp]=void 0))}function n4(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let D8=0;function r4(n,e,t,r){const i=n._endId=++D8,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:o,timeout:a,propCount:l}=_C(n,e);if(!o)return r();const u=o+"end";let h=0;const p=()=>{n.removeEventListener(u,v),s()},v=m=>{m.target===n&&++h>=l&&p()};setTimeout(()=>{h<l&&p()},a+1),n.addEventListener(u,v)}function _C(n,e){const t=window.getComputedStyle(n),r=S=>(t[S]||"").split(", "),i=r(`${Jd}Delay`),s=r(`${Jd}Duration`),o=i4(i,s),a=r(`${eg}Delay`),l=r(`${eg}Duration`),u=i4(a,l);let h=null,p=0,v=0;e===Jd?o>0&&(h=Jd,p=o,v=s.length):e===eg?u>0&&(h=eg,p=u,v=l.length):(p=Math.max(o,u),h=p>0?o>u?Jd:eg:null,v=h?h===Jd?s.length:l.length:0);const m=h===Jd&&/\b(transform|all)(,|$)/.test(r(`${Jd}Property`).toString());return{type:h,timeout:p,propCount:v,hasTransform:m}}function i4(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>s4(t)+s4(n[r])))}function s4(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function rb(){return document.body.offsetHeight}function I8(n,e,t){const r=n[Mp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Bv=Symbol("_vod"),bC=Symbol("_vsh"),Dy={beforeMount(n,{value:e},{transition:t}){n[Bv]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):tg(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),tg(n,!0),r.enter(n)):r.leave(n,()=>{tg(n,!1)}):tg(n,e))},beforeUnmount(n,{value:e}){tg(n,e)}};function tg(n,e){n.style.display=e?n[Bv]:"none",n[bC]=!e}function O8(){Dy.getSSRProps=({value:n})=>{if(!n)return{style:{display:"none"}}}}const wC=Symbol("");function N8(n){const e=Ju();if(!e)return;const t=e.ut=(i=n(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Fv(s,i))},r=()=>{const i=n(e.proxy);e.ce?Fv(e.ce,i):ib(e.subTree,i),t(i)};P2(()=>{um(r)}),Es(()=>{_i(r,Yu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Ol(()=>i.disconnect())})}function ib(n,e){if(n.shapeFlag&128){const t=n.suspense;n=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{ib(t.activeBranch,e)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)Fv(n.el,e);else if(n.type===kn)n.children.forEach(t=>ib(t,e));else if(n.type===ff){let{el:t,anchor:r}=n;for(;t&&(Fv(t,e),t!==r);)t=t.nextSibling}}function Fv(n,e){if(n.nodeType===1){const t=n.style;let r="";for(const i in e)t.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;t[wC]=r}}const R8=/(^|;)\s*display\s*:/;function B8(n,e,t){const r=n.style,i=Ns(t);let s=!1;if(t&&!i){if(e)if(Ns(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&ev(r,a,"")}else for(const o in e)t[o]==null&&ev(r,o,"");for(const o in t)o==="display"&&(s=!0),ev(r,o,t[o])}else if(i){if(e!==t){const o=r[wC];o&&(t+=";"+o),r.cssText=t,s=R8.test(t)}}else e&&n.removeAttribute("style");Bv in n&&(n[Bv]=s?r.display:"",n[bC]&&(r.display="none"))}const o4=/\s*!important$/;function ev(n,e,t){if(dr(t))t.forEach(r=>ev(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=F8(n,e);o4.test(t)?n.setProperty(tu(r),t.replace(o4,""),"important"):n[r]=t}}const a4=["Webkit","Moz","ms"],$1={};function F8(n,e){const t=$1[e];if(t)return t;let r=Va(e);if(r!=="filter"&&r in n)return $1[e]=r;r=Am(r);for(let i=0;i<a4.length;i++){const s=a4[i]+r;if(s in n)return $1[e]=s}return e}const l4="http://www.w3.org/1999/xlink";function u4(n,e,t,r,i,s=QD(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(l4,e.slice(6,e.length)):n.setAttributeNS(l4,e,t):t==null||s&&!jL(t)?n.removeAttribute(e):n.setAttribute(e,s?"":Cc(t)?String(t):t)}function c4(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?gC(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=jL(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function Dd(n,e,t,r){n.addEventListener(e,t,r)}function j8(n,e,t,r){n.removeEventListener(e,t,r)}const d4=Symbol("_vei");function z8(n,e,t,r,i=null){const s=n[d4]||(n[d4]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=$8(e);if(r){const u=s[e]=H8(r,i);Dd(n,a,u,l)}else o&&(j8(n,a,o,l),s[e]=void 0)}}const h4=/(?:Once|Passive|Capture)$/;function $8(n){let e;if(h4.test(n)){e={};let r;for(;r=n.match(h4);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):tu(n.slice(2)),e]}let U1=0;const U8=Promise.resolve(),V8=()=>U1||(U8.then(()=>U1=0),U1=Date.now());function H8(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Zu(G8(r,t.value),e,5,[r])};return t.value=n,t.attached=V8(),t}function G8(n,e){if(dr(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const f4=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,W8=(n,e,t,r,i,s)=>{const o=i==="svg";e==="class"?I8(n,r,o):e==="style"?B8(n,t,r):km(e)?u2(e)||z8(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):q8(n,e,r,o))?(c4(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&u4(n,e,r,o,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Ns(r))?c4(n,Va(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),u4(n,e,r,o))};function q8(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&f4(e)&&Nr(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return f4(e)&&Ns(t)?!1:e in n}const p4={};/*! #__NO_SIDE_EFFECTS__ */function xC(n,e,t){const r=Rs(n,e);gy(r)&&Ps(r,e);class i extends Iy{constructor(o){super(r,o,t)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const Y8=(n,e)=>xC(n,e,DC),K8=typeof HTMLElement<"u"?HTMLElement:class{};class Iy extends K8{constructor(e,t={},r=zv){super(),this._def=e,this._props=t,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==zv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Iy){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,la(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!dr(s))for(const l in s){const u=s[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=Pv(this._props[l])),(a||(a=Object.create(null)))[Va(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const r in t)ns(this,r)||Object.defineProperty(this,r,{get:()=>Ln(t[r])})}_resolveProps(e){const{props:t}=e,r=dr(t)?t:Object.keys(t||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(Va))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const t=this.hasAttribute(e);let r=t?this.getAttribute(e):p4;const i=Va(e);t&&this._numberProps&&this._numberProps[i]&&(r=Pv(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,t,r=!0,i=!1){if(t!==this._props[e]&&(t===p4?delete this._props[e]:(this._props[e]=t,e==="key"&&this._app&&(this._app._ceVNode.key=t)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),t===!0?this.setAttribute(tu(e),""):typeof t=="string"||typeof t=="number"?this.setAttribute(tu(e),t+""):t||this.removeAttribute(tu(e)),s&&s.observe(this,{attributes:!0})}}_update(){TC(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const t=ci(this._def,Ps(e,this._props));return this._instance||(t.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,gy(o[0])?Ps({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),tu(s)!==s&&i(tu(s),o)},this._setParent()}),t}_applyStyles(e,t){if(!e)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let t;for(;t=this.firstChild;){const r=t.nodeType===1&&t.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(t),this.removeChild(t)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(t&&l.nodeType===1){const u=t+"-s",h=document.createTreeWalker(l,1);l.setAttribute(u,"");let p;for(;p=h.nextNode();)p.setAttribute(u,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function LC(n){const e=Ju(),t=e&&e.ce;return t||null}function Z8(){const n=LC();return n&&n.shadowRoot}function X8(n="$style"){{const e=Ju();if(!e)return Ri;const t=e.type.__cssModules;if(!t)return Ri;const r=t[n];return r||Ri}}const SC=new WeakMap,CC=new WeakMap,jv=Symbol("_moveCb"),g4=Symbol("_enterCb"),J8=n=>(delete n.props.mode,n),Q8=J8({name:"TransitionGroup",props:Ps({},vC,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Ju(),r=S2();let i,s;return My(()=>{if(!i.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!iN(i[0].el,t.vnode.el,o))return;i.forEach(tN),i.forEach(nN);const a=i.filter(rN);rb(),a.forEach(l=>{const u=l.el,h=u.style;Vc(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const p=u[jv]=v=>{v&&v.target!==u||(!v||/transform$/.test(v.propertyName))&&(u.removeEventListener("transitionend",p),u[jv]=null,ih(u,o))};u.addEventListener("transitionend",p)})}),()=>{const o=Ni(n),a=yC(o);let l=o.tag||kn;if(i=[],s)for(let u=0;u<s.length;u++){const h=s[u];h.el&&h.el instanceof Element&&(i.push(h),Fd(h,Ep(h,a,r,t)),SC.set(h,h.el.getBoundingClientRect()))}s=e.default?Ey(e.default()):[];for(let u=0;u<s.length;u++){const h=s[u];h.key!=null&&Fd(h,Ep(h,a,r,t))}return ci(l,null,s)}}}),eN=Q8;function tN(n){const e=n.el;e[jv]&&e[jv](),e[g4]&&e[g4]()}function nN(n){CC.set(n,n.el.getBoundingClientRect())}function rN(n){const e=SC.get(n),t=CC.get(n),r=e.left-t.left,i=e.top-t.top;if(r||i){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",n}}function iN(n,e,t){const r=n.cloneNode(),i=n[Mp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),t.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=_C(r);return s.removeChild(r),o}const Ch=n=>{const e=n.props["onUpdate:modelValue"]||!1;return dr(e)?t=>yp(e,t):e};function sN(n){n.target.composing=!0}function m4(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ku=Symbol("_assign"),Ur={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[Ku]=Ch(i);const s=r||i.props&&i.props.type==="number";Dd(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),s&&(a=Ev(a)),n[Ku](a)}),t&&Dd(n,"change",()=>{n.value=n.value.trim()}),e||(Dd(n,"compositionstart",sN),Dd(n,"compositionend",m4),Dd(n,"change",m4))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},o){if(n[Ku]=Ch(o),n.composing)return;const a=(s||n.type==="number")&&!/^0\d/.test(n.value)?Ev(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||i&&n.value.trim()===l)||(n.value=l))}},Pl={deep:!0,created(n,e,t){n[Ku]=Ch(t),Dd(n,"change",()=>{const r=n._modelValue,i=kp(n),s=n.checked,o=n[Ku];if(dr(r)){const a=yy(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const u=[...r];u.splice(a,1),o(u)}}else if(Cf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(EC(n,s))})},mounted:v4,beforeUpdate(n,e,t){n[Ku]=Ch(t),v4(n,e,t)}};function v4(n,{value:e,oldValue:t},r){n._modelValue=e;let i;if(dr(e))i=yy(e,r.props.value)>-1;else if(Cf(e))i=e.has(r.props.value);else{if(e===t)return;i=Lh(e,EC(n,!0))}n.checked!==i&&(n.checked=i)}const R2={created(n,{value:e},t){n.checked=Lh(e,t.props.value),n[Ku]=Ch(t),Dd(n,"change",()=>{n[Ku](kp(n))})},beforeUpdate(n,{value:e,oldValue:t},r){n[Ku]=Ch(r),e!==t&&(n.checked=Lh(e,r.props.value))}},Yi={deep:!0,created(n,{value:e,modifiers:{number:t}},r){const i=Cf(e);Dd(n,"change",()=>{const s=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?Ev(kp(o)):kp(o));n[Ku](n.multiple?i?new Set(s):s:s[0]),n._assigning=!0,la(()=>{n._assigning=!1})}),n[Ku]=Ch(r)},mounted(n,{value:e}){y4(n,e)},beforeUpdate(n,e,t){n[Ku]=Ch(t)},updated(n,{value:e}){n._assigning||y4(n,e)}};function y4(n,e){const t=n.multiple,r=dr(e);if(!(t&&!r&&!Cf(e))){for(let i=0,s=n.options.length;i<s;i++){const o=n.options[i],a=kp(o);if(t)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=yy(e,a)>-1}else o.selected=e.has(a);else if(Lh(kp(o),e)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function kp(n){return"_value"in n?n._value:n.value}function EC(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const B2={created(n,e,t){b0(n,e,t,null,"created")},mounted(n,e,t){b0(n,e,t,null,"mounted")},beforeUpdate(n,e,t,r){b0(n,e,t,r,"beforeUpdate")},updated(n,e,t,r){b0(n,e,t,r,"updated")}};function PC(n,e){switch(n){case"SELECT":return Yi;case"TEXTAREA":return Ur;default:switch(e){case"checkbox":return Pl;case"radio":return R2;default:return Ur}}}function b0(n,e,t,r,i){const o=PC(n.tagName,t.props&&t.props.type)[i];o&&o(n,e,t,r)}function oN(){Ur.getSSRProps=({value:n})=>({value:n}),R2.getSSRProps=({value:n},e)=>{if(e.props&&Lh(e.props.value,n))return{checked:!0}},Pl.getSSRProps=({value:n},e)=>{if(dr(n)){if(e.props&&yy(n,e.props.value)>-1)return{checked:!0}}else if(Cf(n)){if(e.props&&n.has(e.props.value))return{checked:!0}}else if(n)return{checked:!0}},B2.getSSRProps=(n,e)=>{if(typeof e.type!="string")return;const t=PC(e.type.toUpperCase(),e.props&&e.props.type);if(t.getSSRProps)return t.getSSRProps(n,e)}}const aN=["ctrl","shift","alt","meta"],lN={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>aN.some(t=>n[`${t}Key`]&&!e.includes(t))},Il=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=lN[e[o]];if(a&&a(i,e))return}return n(i,...s)})},uN={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},cN=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=i=>{if(!("key"in i))return;const s=tu(i.key);if(e.some(o=>o===s||uN[o]===s))return n(i)})},MC=Ps({patchProp:W8},k8);let Vg,_4=!1;function kC(){return Vg||(Vg=HS(MC))}function AC(){return Vg=_4?Vg:GS(MC),_4=!0,Vg}const TC=(...n)=>{kC().render(...n)},dN=(...n)=>{AC().hydrate(...n)},zv=(...n)=>{const e=kC().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=OC(r);if(!i)return;const s=e._component;!Nr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,IC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},DC=(...n)=>{const e=AC().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=OC(r);if(i)return t(i,!0,IC(i))},e};function IC(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function OC(n){return Ns(n)?document.querySelector(n):n}let b4=!1;const hN=()=>{b4||(b4=!0,oN(),O8())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const fN=()=>{},pN=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:_S,BaseTransitionPropsValidators:C2,Comment:na,DeprecationTypes:E8,EffectScope:f2,ErrorCodes:zI,ErrorTypeStrings:_8,Fragment:kn,KeepAlive:dO,ReactiveEffect:om,Static:ff,Suspense:t8,Teleport:op,Text:bh,TrackOpTypes:II,Transition:nb,TransitionGroup:eN,TriggerOpTypes:OI,VueElement:Iy,assertNumber:jI,callWithAsyncErrorHandling:Zu,callWithErrorHandling:zp,camelize:Va,capitalize:Am,cloneVNode:sd,compatUtils:C8,compile:fN,computed:rr,createApp:zv,createBlock:$o,createCommentVNode:tn,createElementBlock:Fe,createElementVNode:x,createHydrationRenderer:GS,createPropsRestProxy:AO,createRenderer:HS,createSSRApp:DC,createSlots:gO,createStaticVNode:fl,createTextVNode:qr,createVNode:ci,customRef:sS,defineAsyncComponent:uO,defineComponent:Rs,defineCustomElement:xC,defineEmits:bO,defineExpose:wO,defineModel:SO,defineOptions:xO,defineProps:_O,defineSSRCustomElement:Y8,defineSlots:LO,devtools:b8,effect:nI,effectScope:p2,getCurrentInstance:Ju,getCurrentScope:g2,getCurrentWatcher:NI,getTransitionRawChildren:Ey,guardReactiveProps:oC,h:Ty,handleError:Ef,hasInjectionContext:OS,hydrate:dN,hydrateOnIdle:rO,hydrateOnInteraction:aO,hydrateOnMediaQuery:oO,hydrateOnVisible:sO,initCustomFormatter:m8,initDirectivesForSSR:hN,inject:Mu,isMemoSame:fC,isProxy:Ly,isReactive:td,isReadonly:Sh,isRef:vo,isRuntimeOnly:f8,isShallow:Pu,isVNode:zd,markRaw:Sy,mergeDefaults:MO,mergeModels:kO,mergeProps:aC,nextTick:la,normalizeClass:Mi,normalizeProps:XD,normalizeStyle:iu,onActivated:wS,onBeforeMount:SS,onBeforeUnmount:jd,onBeforeUpdate:P2,onDeactivated:xS,onErrorCaptured:MS,onMounted:Es,onRenderTracked:PS,onRenderTriggered:ES,onScopeDispose:UL,onServerPrefetch:CS,onUnmounted:Ol,onUpdated:My,onWatcherCleanup:aS,openBlock:De,popScopeId:GI,provide:$g,proxyRefs:w2,pushScopeId:HI,queuePostFlushCb:um,reactive:au,readonly:mc,ref:yt,registerRuntimeCompiler:h8,render:TC,renderList:sr,renderSlot:mO,resolveComponent:k2,resolveDirective:pO,resolveDynamicComponent:AS,resolveFilter:S8,resolveTransitionHooks:Ep,setBlockTracking:K_,setDevtoolsHook:w8,setTransitionHooks:Fd,shallowReactive:_2,shallowReadonly:xI,shallowRef:b2,ssrContextKey:KS,ssrUtils:L8,stop:rI,toDisplayString:Dt,toHandlerKey:Rg,toHandlers:vO,toRaw:Ni,toRef:AI,toRefs:x2,toValue:CI,transformVNodeArgs:a8,triggerRef:SI,unref:Ln,useAttrs:PO,useCssModule:X8,useCssVars:N8,useHost:LC,useId:KI,useModel:YO,useSSRContext:ZS,useShadowRoot:Z8,useSlots:EO,useTemplateRef:ZI,useTransitionState:S2,vModelCheckbox:Pl,vModelDynamic:B2,vModelRadio:R2,vModelSelect:Yi,vModelText:Ur,vShow:Dy,version:pC,warn:y8,watch:_i,watchEffect:pm,watchPostEffect:WO,watchSyncEffect:XS,withAsyncContext:TO,withCtx:nu,withDefaults:CO,withDirectives:Tn,withKeys:cN,withMemo:v8,withModifiers:Il,withScopeId:WI},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let NC;const Oy=n=>NC=n,RC=Symbol();function sb(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Hg;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Hg||(Hg={}));function gN(){const n=p2(!0),e=n.run(()=>yt({}));let t=[],r=[];const i=Sy({install(s){Oy(i),i._a=s,s.provide(RC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>t.push(o)),r=[]},use(s){return this._a?t.push(s):r.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const BC=()=>{};function w4(n,e,t,r=BC){n.push(e);const i=()=>{const s=n.indexOf(e);s>-1&&(n.splice(s,1),r())};return!t&&g2()&&UL(i),i}function Kf(n,...e){n.slice().forEach(t=>{t(...e)})}const mN=n=>n(),x4=Symbol(),V1=Symbol();function ob(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];sb(i)&&sb(r)&&n.hasOwnProperty(t)&&!vo(r)&&!td(r)?n[t]=ob(i,r):n[t]=r}return n}const vN=Symbol();function yN(n){return!sb(n)||!n.hasOwnProperty(vN)}const{assign:sh}=Object;function _N(n){return!!(vo(n)&&n.effect)}function bN(n,e,t,r){const{state:i,actions:s,getters:o}=e,a=t.state.value[n];let l;function u(){a||(t.state.value[n]=i?i():{});const h=x2(t.state.value[n]);return sh(h,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=Sy(rr(()=>{Oy(t);const m=t._s.get(n);return o[v].call(m,m)})),p),{}))}return l=FC(n,u,e,t,r,!0),l}function FC(n,e,t={},r,i,s){let o;const a=sh({actions:{}},t),l={deep:!0};let u,h,p=[],v=[],m;const S=r.state.value[n];!s&&!S&&(r.state.value[n]={}),yt({});let E;function k(O){let j;u=h=!1,typeof O=="function"?(O(r.state.value[n]),j={type:Hg.patchFunction,storeId:n,events:m}):(ob(r.state.value[n],O),j={type:Hg.patchObject,payload:O,storeId:n,events:m});const Y=E=Symbol();la().then(()=>{E===Y&&(u=!0)}),h=!0,Kf(p,j,r.state.value[n])}const T=s?function(){const{state:j}=t,Y=j?j():{};this.$patch(V=>{sh(V,Y)})}:BC;function A(){o.stop(),p=[],v=[],r._s.delete(n)}const R=(O,j="")=>{if(x4 in O)return O[V1]=j,O;const Y=function(){Oy(r);const V=Array.from(arguments),N=[],q=[];function $(Q){N.push(Q)}function F(Q){q.push(Q)}Kf(v,{args:V,name:Y[V1],store:ee,after:$,onError:F});let B;try{B=O.apply(this&&this.$id===n?this:ee,V)}catch(Q){throw Kf(q,Q),Q}return B instanceof Promise?B.then(Q=>(Kf(N,Q),Q)).catch(Q=>(Kf(q,Q),Promise.reject(Q))):(Kf(N,B),B)};return Y[x4]=!0,Y[V1]=j,Y},G={_p:r,$id:n,$onAction:w4.bind(null,v),$patch:k,$reset:T,$subscribe(O,j={}){const Y=w4(p,O,j.detached,()=>V()),V=o.run(()=>_i(()=>r.state.value[n],N=>{(j.flush==="sync"?h:u)&&O({storeId:n,type:Hg.direct,events:m},N)},sh({},l,j)));return Y},$dispose:A},ee=au(G);r._s.set(n,ee);const ge=(r._a&&r._a.runWithContext||mN)(()=>r._e.run(()=>(o=p2()).run(()=>e({action:R}))));for(const O in ge){const j=ge[O];if(vo(j)&&!_N(j)||td(j))s||(S&&yN(j)&&(vo(j)?j.value=S[O]:ob(j,S[O])),r.state.value[n][O]=j);else if(typeof j=="function"){const Y=R(j,O);ge[O]=Y,a.actions[O]=j}}return sh(ee,ge),sh(Ni(ee),ge),Object.defineProperty(ee,"$state",{get:()=>r.state.value[n],set:O=>{k(j=>{sh(j,O)})}}),r._p.forEach(O=>{sh(ee,o.run(()=>O({store:ee,app:r._a,pinia:r,options:a})))}),S&&s&&t.hydrate&&t.hydrate(ee.$state,S),u=!0,h=!0,ee}/*! #__NO_SIDE_EFFECTS__ */function $p(n,e,t){let r,i;const s=typeof e=="function";typeof n=="string"?(r=n,i=s?t:e):(i=n,r=n.id);function o(a,l){const u=OS();return a=a||(u?Mu(RC,null):null),a&&Oy(a),a=NC,a._s.has(r)||(s?FC(r,e,i,a):bN(r,i,a)),a._s.get(r)}return o.$id=r,o}function jC(n,e){return function(){return n.apply(e,arguments)}}const{toString:wN}=Object.prototype,{getPrototypeOf:F2}=Object,Ny=(n=>e=>{const t=wN.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Mc=n=>(n=n.toLowerCase(),e=>Ny(e)===n),Ry=n=>e=>typeof e===n,{isArray:Up}=Array,mm=Ry("undefined");function xN(n){return n!==null&&!mm(n)&&n.constructor!==null&&!mm(n.constructor)&&ku(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const zC=Mc("ArrayBuffer");function LN(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&zC(n.buffer),e}const SN=Ry("string"),ku=Ry("function"),$C=Ry("number"),By=n=>n!==null&&typeof n=="object",CN=n=>n===!0||n===!1,tv=n=>{if(Ny(n)!=="object")return!1;const e=F2(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},EN=Mc("Date"),PN=Mc("File"),MN=Mc("Blob"),kN=Mc("FileList"),AN=n=>By(n)&&ku(n.pipe),TN=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ku(n.append)&&((e=Ny(n))==="formdata"||e==="object"&&ku(n.toString)&&n.toString()==="[object FormData]"))},DN=Mc("URLSearchParams"),[IN,ON,NN,RN]=["ReadableStream","Request","Response","Headers"].map(Mc),BN=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Om(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Up(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function UC(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const lf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,VC=n=>!mm(n)&&n!==lf;function ab(){const{caseless:n}=VC(this)&&this||{},e={},t=(r,i)=>{const s=n&&UC(e,i)||i;tv(e[s])&&tv(r)?e[s]=ab(e[s],r):tv(r)?e[s]=ab({},r):Up(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Om(arguments[r],t);return e}const FN=(n,e,t,{allOwnKeys:r}={})=>(Om(e,(i,s)=>{t&&ku(i)?n[s]=jC(i,t):n[s]=i},{allOwnKeys:r}),n),jN=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),zN=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},$N=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&F2(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},UN=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},VN=n=>{if(!n)return null;if(Up(n))return n;let e=n.length;if(!$C(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},HN=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&F2(Uint8Array)),GN=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},WN=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},qN=Mc("HTMLFormElement"),YN=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),L4=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),KN=Mc("RegExp"),HC=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Om(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},ZN=n=>{HC(n,(e,t)=>{if(ku(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(ku(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},XN=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return Up(n)?r(n):r(String(n).split(e)),t},JN=()=>{},QN=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function e7(n){return!!(n&&ku(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const t7=n=>{const e=new Array(10),t=(r,i)=>{if(By(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Up(r)?[]:{};return Om(r,(o,a)=>{const l=t(o,i+1);!mm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},n7=Mc("AsyncFunction"),r7=n=>n&&(By(n)||ku(n))&&ku(n.then)&&ku(n.catch),GC=((n,e)=>n?setImmediate:e?((t,r)=>(lf.addEventListener("message",({source:i,data:s})=>{i===lf&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),lf.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ku(lf.postMessage)),i7=typeof queueMicrotask<"u"?queueMicrotask.bind(lf):typeof process<"u"&&process.nextTick||GC,sn={isArray:Up,isArrayBuffer:zC,isBuffer:xN,isFormData:TN,isArrayBufferView:LN,isString:SN,isNumber:$C,isBoolean:CN,isObject:By,isPlainObject:tv,isReadableStream:IN,isRequest:ON,isResponse:NN,isHeaders:RN,isUndefined:mm,isDate:EN,isFile:PN,isBlob:MN,isRegExp:KN,isFunction:ku,isStream:AN,isURLSearchParams:DN,isTypedArray:HN,isFileList:kN,forEach:Om,merge:ab,extend:FN,trim:BN,stripBOM:jN,inherits:zN,toFlatObject:$N,kindOf:Ny,kindOfTest:Mc,endsWith:UN,toArray:VN,forEachEntry:GN,matchAll:WN,isHTMLForm:qN,hasOwnProperty:L4,hasOwnProp:L4,reduceDescriptors:HC,freezeMethods:ZN,toObjectSet:XN,toCamelCase:YN,noop:JN,toFiniteNumber:QN,findKey:UC,global:lf,isContextDefined:VC,isSpecCompliantForm:e7,toJSONObject:t7,isAsyncFn:n7,isThenable:r7,setImmediate:GC,asap:i7};function ii(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}sn.inherits(ii,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:sn.toJSONObject(this.config),code:this.code,status:this.status}}});const WC=ii.prototype,qC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{qC[n]={value:n}});Object.defineProperties(ii,qC);Object.defineProperty(WC,"isAxiosError",{value:!0});ii.from=(n,e,t,r,i,s)=>{const o=Object.create(WC);return sn.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ii.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const s7=null;function lb(n){return sn.isPlainObject(n)||sn.isArray(n)}function YC(n){return sn.endsWith(n,"[]")?n.slice(0,-2):n}function S4(n,e,t){return n?n.concat(e).map(function(i,s){return i=YC(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function o7(n){return sn.isArray(n)&&!n.some(lb)}const a7=sn.toFlatObject(sn,{},null,function(e){return/^is[A-Z]/.test(e)});function Fy(n,e,t){if(!sn.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=sn.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,k){return!sn.isUndefined(k[E])});const r=t.metaTokens,i=t.visitor||h,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&sn.isSpecCompliantForm(e);if(!sn.isFunction(i))throw new TypeError("visitor must be a function");function u(S){if(S===null)return"";if(sn.isDate(S))return S.toISOString();if(!l&&sn.isBlob(S))throw new ii("Blob is not supported. Use a Buffer instead.");return sn.isArrayBuffer(S)||sn.isTypedArray(S)?l&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function h(S,E,k){let T=S;if(S&&!k&&typeof S=="object"){if(sn.endsWith(E,"{}"))E=r?E:E.slice(0,-2),S=JSON.stringify(S);else if(sn.isArray(S)&&o7(S)||(sn.isFileList(S)||sn.endsWith(E,"[]"))&&(T=sn.toArray(S)))return E=YC(E),T.forEach(function(R,G){!(sn.isUndefined(R)||R===null)&&e.append(o===!0?S4([E],G,s):o===null?E:E+"[]",u(R))}),!1}return lb(S)?!0:(e.append(S4(k,E,s),u(S)),!1)}const p=[],v=Object.assign(a7,{defaultVisitor:h,convertValue:u,isVisitable:lb});function m(S,E){if(!sn.isUndefined(S)){if(p.indexOf(S)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(S),sn.forEach(S,function(T,A){(!(sn.isUndefined(T)||T===null)&&i.call(e,T,sn.isString(A)?A.trim():A,E,v))===!0&&m(T,E?E.concat(A):[A])}),p.pop()}}if(!sn.isObject(n))throw new TypeError("data must be an object");return m(n),e}function C4(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function j2(n,e){this._pairs=[],n&&Fy(n,this,e)}const KC=j2.prototype;KC.append=function(e,t){this._pairs.push([e,t])};KC.toString=function(e){const t=e?function(r){return e.call(this,r,C4)}:C4;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function l7(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ZC(n,e,t){if(!e)return n;const r=t&&t.encode||l7;sn.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=sn.isURLSearchParams(e)?e.toString():new j2(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class E4{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){sn.forEach(this.handlers,function(r){r!==null&&e(r)})}}const XC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},u7=typeof URLSearchParams<"u"?URLSearchParams:j2,c7=typeof FormData<"u"?FormData:null,d7=typeof Blob<"u"?Blob:null,h7={isBrowser:!0,classes:{URLSearchParams:u7,FormData:c7,Blob:d7},protocols:["http","https","file","blob","url","data"]},z2=typeof window<"u"&&typeof document<"u",ub=typeof navigator=="object"&&navigator||void 0,f7=z2&&(!ub||["ReactNative","NativeScript","NS"].indexOf(ub.product)<0),p7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",g7=z2&&window.location.href||"http://localhost",m7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:z2,hasStandardBrowserEnv:f7,hasStandardBrowserWebWorkerEnv:p7,navigator:ub,origin:g7},Symbol.toStringTag,{value:"Module"})),ul={...m7,...h7};function v7(n,e){return Fy(n,new ul.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return ul.isNode&&sn.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function y7(n){return sn.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _7(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function JC(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&sn.isArray(i)?i.length:o,l?(sn.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!sn.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&sn.isArray(i[o])&&(i[o]=_7(i[o])),!a)}if(sn.isFormData(n)&&sn.isFunction(n.entries)){const t={};return sn.forEachEntry(n,(r,i)=>{e(y7(r),i,t,0)}),t}return null}function b7(n,e,t){if(sn.isString(n))try{return(e||JSON.parse)(n),sn.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Nm={transitional:XC,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=sn.isObject(e);if(s&&sn.isHTMLForm(e)&&(e=new FormData(e)),sn.isFormData(e))return i?JSON.stringify(JC(e)):e;if(sn.isArrayBuffer(e)||sn.isBuffer(e)||sn.isStream(e)||sn.isFile(e)||sn.isBlob(e)||sn.isReadableStream(e))return e;if(sn.isArrayBufferView(e))return e.buffer;if(sn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return v7(e,this.formSerializer).toString();if((a=sn.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Fy(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),b7(e)):e}],transformResponse:[function(e){const t=this.transitional||Nm.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(sn.isResponse(e)||sn.isReadableStream(e))return e;if(e&&sn.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ii.from(a,ii.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ul.classes.FormData,Blob:ul.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};sn.forEach(["delete","get","head","post","put","patch"],n=>{Nm.headers[n]={}});const w7=sn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),x7=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&w7[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},P4=Symbol("internals");function ng(n){return n&&String(n).trim().toLowerCase()}function nv(n){return n===!1||n==null?n:sn.isArray(n)?n.map(nv):String(n)}function L7(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const S7=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function H1(n,e,t,r,i){if(sn.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!sn.isString(e)){if(sn.isString(r))return e.indexOf(r)!==-1;if(sn.isRegExp(r))return r.test(e)}}function C7(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function E7(n,e){const t=sn.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let su=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,u){const h=ng(l);if(!h)throw new Error("header name must be a non-empty string");const p=sn.findKey(i,h);(!p||i[p]===void 0||u===!0||u===void 0&&i[p]!==!1)&&(i[p||l]=nv(a))}const o=(a,l)=>sn.forEach(a,(u,h)=>s(u,h,l));if(sn.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(sn.isString(e)&&(e=e.trim())&&!S7(e))o(x7(e),t);else if(sn.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=ng(e),e){const r=sn.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return L7(i);if(sn.isFunction(t))return t.call(this,i,r);if(sn.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ng(e),e){const r=sn.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||H1(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=ng(o),o){const a=sn.findKey(r,o);a&&(!t||H1(r,r[a],a,t))&&(delete r[a],i=!0)}}return sn.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||H1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return sn.forEach(this,(i,s)=>{const o=sn.findKey(r,s);if(o){t[o]=nv(i),delete t[s];return}const a=e?C7(s):String(s).trim();a!==s&&delete t[s],t[a]=nv(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return sn.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&sn.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[P4]=this[P4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=ng(o);r[a]||(E7(i,o),r[a]=!0)}return sn.isArray(e)?e.forEach(s):s(e),this}};su.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);sn.reduceDescriptors(su.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});sn.freezeMethods(su);function G1(n,e){const t=this||Nm,r=e||t,i=su.from(r.headers);let s=r.data;return sn.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function QC(n){return!!(n&&n.__CANCEL__)}function Vp(n,e,t){ii.call(this,n??"canceled",ii.ERR_CANCELED,e,t),this.name="CanceledError"}sn.inherits(Vp,ii,{__CANCEL__:!0});function eE(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new ii("Request failed with status code "+t.status,[ii.ERR_BAD_REQUEST,ii.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function P7(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function M7(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),h=r[s];o||(o=u),t[i]=l,r[i]=u;let p=s,v=0;for(;p!==i;)v+=t[p++],p=p%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),u-o<e)return;const m=h&&u-h;return m?Math.round(v*1e3/m):void 0}}function k7(n,e){let t=0,r=1e3/e,i,s;const o=(u,h=Date.now())=>{t=h,i=null,s&&(clearTimeout(s),s=null),n.apply(null,u)};return[(...u)=>{const h=Date.now(),p=h-t;p>=r?o(u,h):(i=u,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const $v=(n,e,t=3)=>{let r=0;const i=M7(50,250);return k7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,u=i(l),h=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&h?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(p)},t)},M4=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},k4=n=>(...e)=>sn.asap(()=>n(...e)),A7=ul.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,ul.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(ul.origin),ul.navigator&&/(msie|trident)/i.test(ul.navigator.userAgent)):()=>!0,T7=ul.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];sn.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),sn.isString(r)&&o.push("path="+r),sn.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function D7(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function I7(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function tE(n,e,t){let r=!D7(e);return n&&(r||t==!1)?I7(n,e):e}const A4=n=>n instanceof su?{...n}:n;function wf(n,e){e=e||{};const t={};function r(u,h,p,v){return sn.isPlainObject(u)&&sn.isPlainObject(h)?sn.merge.call({caseless:v},u,h):sn.isPlainObject(h)?sn.merge({},h):sn.isArray(h)?h.slice():h}function i(u,h,p,v){if(sn.isUndefined(h)){if(!sn.isUndefined(u))return r(void 0,u,p,v)}else return r(u,h,p,v)}function s(u,h){if(!sn.isUndefined(h))return r(void 0,h)}function o(u,h){if(sn.isUndefined(h)){if(!sn.isUndefined(u))return r(void 0,u)}else return r(void 0,h)}function a(u,h,p){if(p in e)return r(u,h);if(p in n)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,h,p)=>i(A4(u),A4(h),p,!0)};return sn.forEach(Object.keys(Object.assign({},n,e)),function(h){const p=l[h]||i,v=p(n[h],e[h],h);sn.isUndefined(v)&&p!==a||(t[h]=v)}),t}const nE=n=>{const e=wf({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=su.from(o),e.url=ZC(tE(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(sn.isFormData(t)){if(ul.hasStandardBrowserEnv||ul.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...h]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(ul.hasStandardBrowserEnv&&(r&&sn.isFunction(r)&&(r=r(e)),r||r!==!1&&A7(e.url))){const u=i&&s&&T7.read(s);u&&o.set(i,u)}return e},O7=typeof XMLHttpRequest<"u",N7=O7&&function(n){return new Promise(function(t,r){const i=nE(n);let s=i.data;const o=su.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,h,p,v,m,S;function E(){m&&m(),S&&S(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function T(){if(!k)return;const R=su.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),ee={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:R,config:n,request:k};eE(function(ge){t(ge),E()},function(ge){r(ge),E()},ee),k=null}"onloadend"in k?k.onloadend=T:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(T)},k.onabort=function(){k&&(r(new ii("Request aborted",ii.ECONNABORTED,n,k)),k=null)},k.onerror=function(){r(new ii("Network Error",ii.ERR_NETWORK,n,k)),k=null},k.ontimeout=function(){let G=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const ee=i.transitional||XC;i.timeoutErrorMessage&&(G=i.timeoutErrorMessage),r(new ii(G,ee.clarifyTimeoutError?ii.ETIMEDOUT:ii.ECONNABORTED,n,k)),k=null},s===void 0&&o.setContentType(null),"setRequestHeader"in k&&sn.forEach(o.toJSON(),function(G,ee){k.setRequestHeader(ee,G)}),sn.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),u&&([v,S]=$v(u,!0),k.addEventListener("progress",v)),l&&k.upload&&([p,m]=$v(l),k.upload.addEventListener("progress",p),k.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(h=R=>{k&&(r(!R||R.type?new Vp(null,n,k):R),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const A=P7(i.url);if(A&&ul.protocols.indexOf(A)===-1){r(new ii("Unsupported protocol "+A+":",ii.ERR_BAD_REQUEST,n));return}k.send(s||null)})},R7=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(u){if(!i){i=!0,a();const h=u instanceof Error?u:this.reason;r.abort(h instanceof ii?h:new Vp(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new ii(`timeout ${e} of ms exceeded`,ii.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),n=null)};n.forEach(u=>u.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>sn.asap(a),l}},B7=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},F7=async function*(n,e){for await(const t of j7(n))yield*B7(t,e)},j7=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},T4=(n,e,t,r)=>{const i=F7(n,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:h}=await i.next();if(u){a(),l.close();return}let p=h.byteLength;if(t){let v=s+=p;t(v)}l.enqueue(new Uint8Array(h))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},jy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",rE=jy&&typeof ReadableStream=="function",z7=jy&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),iE=(n,...e)=>{try{return!!n(...e)}catch{return!1}},$7=rE&&iE(()=>{let n=!1;const e=new Request(ul.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),D4=64*1024,cb=rE&&iE(()=>sn.isReadableStream(new Response("").body)),Uv={stream:cb&&(n=>n.body)};jy&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Uv[e]&&(Uv[e]=sn.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new ii(`Response type '${e}' is not supported`,ii.ERR_NOT_SUPPORT,r)})})})(new Response);const U7=async n=>{if(n==null)return 0;if(sn.isBlob(n))return n.size;if(sn.isSpecCompliantForm(n))return(await new Request(ul.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(sn.isArrayBufferView(n)||sn.isArrayBuffer(n))return n.byteLength;if(sn.isURLSearchParams(n)&&(n=n+""),sn.isString(n))return(await z7(n)).byteLength},V7=async(n,e)=>{const t=sn.toFiniteNumber(n.getContentLength());return t??U7(e)},H7=jy&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:h,withCredentials:p="same-origin",fetchOptions:v}=nE(n);u=u?(u+"").toLowerCase():"text";let m=R7([i,s&&s.toAbortSignal()],o),S;const E=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let k;try{if(l&&$7&&t!=="get"&&t!=="head"&&(k=await V7(h,r))!==0){let ee=new Request(e,{method:"POST",body:r,duplex:"half"}),pe;if(sn.isFormData(r)&&(pe=ee.headers.get("content-type"))&&h.setContentType(pe),ee.body){const[ge,O]=M4(k,$v(k4(l)));r=T4(ee.body,D4,ge,O)}}sn.isString(p)||(p=p?"include":"omit");const T="credentials"in Request.prototype;S=new Request(e,{...v,signal:m,method:t.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:T?p:void 0});let A=await fetch(S);const R=cb&&(u==="stream"||u==="response");if(cb&&(a||R&&E)){const ee={};["status","statusText","headers"].forEach(j=>{ee[j]=A[j]});const pe=sn.toFiniteNumber(A.headers.get("content-length")),[ge,O]=a&&M4(pe,$v(k4(a),!0))||[];A=new Response(T4(A.body,D4,ge,()=>{O&&O(),E&&E()}),ee)}u=u||"text";let G=await Uv[sn.findKey(Uv,u)||"text"](A,n);return!R&&E&&E(),await new Promise((ee,pe)=>{eE(ee,pe,{data:G,headers:su.from(A.headers),status:A.status,statusText:A.statusText,config:n,request:S})})}catch(T){throw E&&E(),T&&T.name==="TypeError"&&/fetch/i.test(T.message)?Object.assign(new ii("Network Error",ii.ERR_NETWORK,n,S),{cause:T.cause||T}):ii.from(T,T&&T.code,n,S)}}),db={http:s7,xhr:N7,fetch:H7};sn.forEach(db,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const I4=n=>`- ${n}`,G7=n=>sn.isFunction(n)||n===null||n===!1,sE={getAdapter:n=>{n=sn.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!G7(t)&&(r=db[(o=String(t)).toLowerCase()],r===void 0))throw new ii(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(I4).join(`
`):" "+I4(s[0]):"as no adapter specified";throw new ii("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:db};function W1(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Vp(null,n)}function O4(n){return W1(n),n.headers=su.from(n.headers),n.data=G1.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),sE.getAdapter(n.adapter||Nm.adapter)(n).then(function(r){return W1(n),r.data=G1.call(n,n.transformResponse,r),r.headers=su.from(r.headers),r},function(r){return QC(r)||(W1(n),r&&r.response&&(r.response.data=G1.call(n,n.transformResponse,r.response),r.response.headers=su.from(r.response.headers))),Promise.reject(r)})}const oE="1.8.4",zy={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{zy[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const N4={};zy.transitional=function(e,t,r){function i(s,o){return"[Axios v"+oE+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new ii(i(o," has been removed"+(t?" in "+t:"")),ii.ERR_DEPRECATED);return t&&!N4[o]&&(N4[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};zy.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function W7(n,e,t){if(typeof n!="object")throw new ii("options must be an object",ii.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new ii("option "+s+" must be "+l,ii.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ii("Unknown option "+s,ii.ERR_BAD_OPTION)}}const rv={assertOptions:W7,validators:zy},$c=rv.validators;let pf=class{constructor(e){this.defaults=e,this.interceptors={request:new E4,response:new E4}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=wf(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&rv.assertOptions(r,{silentJSONParsing:$c.transitional($c.boolean),forcedJSONParsing:$c.transitional($c.boolean),clarifyTimeoutError:$c.transitional($c.boolean)},!1),i!=null&&(sn.isFunction(i)?t.paramsSerializer={serialize:i}:rv.assertOptions(i,{encode:$c.function,serialize:$c.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),rv.assertOptions(t,{baseUrl:$c.spelling("baseURL"),withXsrfToken:$c.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&sn.merge(s.common,s[t.method]);s&&sn.forEach(["delete","get","head","post","put","patch","common"],S=>{delete s[S]}),t.headers=su.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const u=[];this.interceptors.response.forEach(function(E){u.push(E.fulfilled,E.rejected)});let h,p=0,v;if(!l){const S=[O4.bind(this),void 0];for(S.unshift.apply(S,a),S.push.apply(S,u),v=S.length,h=Promise.resolve(t);p<v;)h=h.then(S[p++],S[p++]);return h}v=a.length;let m=t;for(p=0;p<v;){const S=a[p++],E=a[p++];try{m=S(m)}catch(k){E.call(this,k);break}}try{h=O4.call(this,m)}catch(S){return Promise.reject(S)}for(p=0,v=u.length;p<v;)h=h.then(u[p++],u[p++]);return h}getUri(e){e=wf(this.defaults,e);const t=tE(e.baseURL,e.url,e.allowAbsoluteUrls);return ZC(t,e.params,e.paramsSerializer)}};sn.forEach(["delete","get","head","options"],function(e){pf.prototype[e]=function(t,r){return this.request(wf(r||{},{method:e,url:t,data:(r||{}).data}))}});sn.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(wf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}pf.prototype[e]=t(),pf.prototype[e+"Form"]=t(!0)});let q7=class aE{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Vp(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new aE(function(i){e=i}),cancel:e}}};function Y7(n){return function(t){return n.apply(null,t)}}function K7(n){return sn.isObject(n)&&n.isAxiosError===!0}const hb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hb).forEach(([n,e])=>{hb[e]=n});function lE(n){const e=new pf(n),t=jC(pf.prototype.request,e);return sn.extend(t,pf.prototype,e,{allOwnKeys:!0}),sn.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return lE(wf(n,i))},t}const Yo=lE(Nm);Yo.Axios=pf;Yo.CanceledError=Vp;Yo.CancelToken=q7;Yo.isCancel=QC;Yo.VERSION=oE;Yo.toFormData=Fy;Yo.AxiosError=ii;Yo.Cancel=Yo.CanceledError;Yo.all=function(e){return Promise.all(e)};Yo.spread=Y7;Yo.isAxiosError=K7;Yo.mergeConfig=wf;Yo.AxiosHeaders=su;Yo.formToJSON=n=>JC(sn.isHTMLForm(n)?new FormData(n):n);Yo.getAdapter=sE.getAdapter;Yo.HttpStatusCode=hb;Yo.default=Yo;const{Axios:Eae,AxiosError:Pae,CanceledError:Mae,isCancel:kae,CancelToken:Aae,VERSION:Tae,all:Dae,Cancel:Iae,isAxiosError:Oae,spread:Nae,toFormData:Rae,AxiosHeaders:Bae,HttpStatusCode:Fae,formToJSON:jae,getAdapter:zae,mergeConfig:$ae}=Yo,_n=au({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let wh=null,uf=null;const Z7=1e3;function $y(){if(_n.isEnabled){_n.isRecording=!0,_n.startTime=performance.now(),_n.frameCount=0,_n.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(wh=new PerformanceObserver(n=>{n.getEntries().forEach(t=>{_n.longTasks.push({duration:t.duration,startTime:t.startTime,name:t.name,component:Ec()})})}),wh.observe({entryTypes:["longtask"]}))}catch(n){console.warn("PerformanceObserver pour longues tâches non supporté",n)}X7(),$2()}}function Vv(){_n.isRecording=!1,wh&&(wh.disconnect(),wh=null),hE()}function fb(){wh&&(wh.disconnect(),wh=null),hE(),_n.measures=[],_n.longTasks=[],_n.memorySnapshots=[],_n.operationHistory=[],_n.frameCount=0,_n.framesPerSecond=0,_n.lastFpsUpdate=0,_n.isEnabled&&$y()}function uE(n,e,t){if(!_n.isEnabled||!_n.isRecording)return()=>{};const r=performance.now(),i=_n.currentOperation;return _n.currentOperation=n,_n.operationStack.push(n),()=>{const s=performance.now()-r;_n.operationStack.pop(),_n.currentOperation=_n.operationStack[_n.operationStack.length-1]||null,_n.measures.push({name:n,startTime:r,duration:s,component:e||Ec(),info:t,parentOperation:i||void 0}),s>10&&_n.operationHistory.push({operation:n,component:e||Ec()||"unknown",durationMs:s,timestamp:Date.now()})}}async function cE(n,e,t,r){if(!_n.isEnabled||!_n.isRecording)return e();const i=performance.now(),s=_n.currentOperation;_n.currentOperation=n,_n.operationStack.push(n);try{return await e()}finally{const o=performance.now()-i;_n.operationStack.pop(),_n.currentOperation=_n.operationStack[_n.operationStack.length-1]||null,_n.measures.push({name:n,startTime:i,duration:o,component:t||Ec(),info:r,parentOperation:s||void 0}),o>10&&_n.operationHistory.push({operation:n,component:t||Ec()||"unknown",durationMs:o,timestamp:Date.now()})}}function dE(n,e,t,r){if(!_n.isEnabled||!_n.isRecording)return e();const i=performance.now(),s=_n.currentOperation;_n.currentOperation=n,_n.operationStack.push(n);try{return e()}finally{const o=performance.now()-i;_n.operationStack.pop(),_n.currentOperation=_n.operationStack[_n.operationStack.length-1]||null,_n.measures.push({name:n,startTime:i,duration:o,component:t||Ec(),info:r,parentOperation:s||void 0}),o>10&&_n.operationHistory.push({operation:n,component:t||Ec()||"unknown",durationMs:o,timestamp:Date.now()})}}function $2(){!_n.isEnabled||!_n.isRecording||(performance.memory?_n.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):_n.memorySnapshots.push({timestamp:performance.now()}))}function X7(){uf!==null&&cancelAnimationFrame(uf),_n.frameCount=0,_n.lastFpsUpdate=performance.now();function n(){_n.frameCount++;const e=performance.now();e-_n.lastFpsUpdate>=Z7&&(_n.framesPerSecond=Math.round(_n.frameCount*1e3/(e-_n.lastFpsUpdate)),_n.frameCount=0,_n.lastFpsUpdate=e),_n.isRecording&&(uf=requestAnimationFrame(n))}uf=requestAnimationFrame(n)}function hE(){uf!==null&&(cancelAnimationFrame(uf),uf=null)}function Ec(){return""}function pb(n){_n.isEnabled=n,n&&!_n.isRecording?$y():!n&&_n.isRecording&&Vv()}function fE(n,e,t){return(...r)=>{if(!_n.isEnabled||!_n.isRecording)return n(...r);const i=performance.now();try{return n(...r)}finally{const s=performance.now()-i;_n.measures.push({name:e,startTime:i,duration:s,component:t||Ec(),info:{args:r}}),s>10&&_n.operationHistory.push({operation:e,component:t||Ec()||"unknown",durationMs:s,timestamp:Date.now()})}}}function pE(n,e,t){return async(...r)=>{if(!_n.isEnabled||!_n.isRecording)return await n(...r);const i=performance.now();try{return await n(...r)}finally{const s=performance.now()-i;_n.measures.push({name:e,startTime:i,duration:s,component:t||Ec(),info:{args:r}}),s>10&&_n.operationHistory.push({operation:e,component:t||Ec()||"unknown",durationMs:s,timestamp:Date.now()})}}}function J7(n,e){const t=_n.measures.filter(o=>o.startTime>=n&&o.startTime+o.duration<=e),r=new Map,i=[];t.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const a=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:a.sort((l,u)=>u.duration-l.duration).map(l=>s(l))}}return i.sort((o,a)=>a.duration-o.duration).map(o=>s(o))}function gb(n,e){const t=n||_n.startTime,r=e||performance.now(),i=J7(t,r),s=r-t,o=new Map;function a(u){const h=o.get(u.operation)||{duration:0,component:u.component};h.duration+=u.duration,o.set(u.operation,h),u.children.forEach(p=>a(p))}i.forEach(u=>a(u));const l=Array.from(o.entries()).map(([u,{duration:h,component:p}])=>({operation:u,duration:h,component:p,impact:h/s*100})).sort((u,h)=>h.impact-u.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:l}}function Hp(){const n=yt(!1);Es(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";n.value=r,pb(r),fb()}catch(t){console.warn("Erreur lors de la vérification du paramètre perf:",t),n.value=!1,pb(!1)}}),Ol(()=>{_n.isRecording&&Vv()});const e=(t,r)=>{if(!_n.isEnabled||!_n.isRecording)return null;const i=_n.measures.find(u=>u.name===t&&u.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=_n.measures.filter(u=>u.startTime>=i.startTime&&u.startTime<=s&&u!==i),a=_n.longTasks.filter(u=>u.startTime>=i.startTime&&u.startTime<=s),l=_n.memorySnapshots.filter(u=>u.timestamp>=i.startTime&&u.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(u=>({name:u.name,component:u.component,startTime:u.startTime-i.startTime,duration:u.duration,info:u.info})),longTasks:a.map(u=>({duration:u.duration,startTime:u.startTime-i.startTime,name:u.name,component:u.component})),memorySnapshots:l.map(u=>({...u,timestamp:u.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:a.length,maxLongTaskDuration:Math.max(...a.map(u=>u.duration),0),memoryDelta:l.length>1?(l[l.length-1].usedJSHeapSize||0)-(l[0].usedJSHeapSize||0):0}}};return{isEnabled:mc(yt(_n.isEnabled)),isQueryParamEnabled:mc(n),isRecording:mc(yt(_n.isRecording)),measures:mc(yt(_n.measures)),longTasks:mc(yt(_n.longTasks)),memorySnapshots:mc(yt(_n.memorySnapshots)),framesPerSecond:mc(yt(_n.framesPerSecond)),operationHistory:mc(yt(_n.operationHistory)),startRecording:$y,stopRecording:Vv,clearRecording:fb,startMeasure:uE,measure:dE,measureAsync:cE,captureMemorySnapshot:$2,createPerformanceTracker:fE,createAsyncPerformanceTracker:pE,getOperationDetails:e,getSlowOperations:()=>!_n.isEnabled||!_n.isRecording?[]:[..._n.measures].sort((t,r)=>r.duration-t.duration).slice(0,10),getLongTasks:()=>!_n.isEnabled||!_n.isRecording?[]:[..._n.longTasks].sort((t,r)=>r.duration-t.duration),getPerformanceReport:()=>{if(!_n.isEnabled||!_n.isRecording)return null;const t=gb();return{totalMeasures:_n.measures.length,totalLongTasks:_n.longTasks.length,slowestOperations:[..._n.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:_n.framesPerSecond,memoryUsage:_n.memorySnapshots.length>0?_n.memorySnapshots[_n.memorySnapshots.length-1]:null,operationsByComponent:Q7(_n.measures),criticalPaths:t.criticalPaths,bottlenecks:t.bottlenecks,recordingDuration:_n.isRecording?performance.now()-_n.startTime:null}},analyzeCriticalPaths:gb}}function Q7(n){if(!_n.isEnabled||!_n.isRecording)return{};const e={};return n.forEach(t=>{const r=t.component||"unknown";e[r]||(e[r]={totalTime:0,callCount:0,operations:{}}),e[r].totalTime+=t.duration,e[r].callCount++,e[r].operations[t.name]||(e[r].operations[t.name]={totalTime:0,callCount:0}),e[r].operations[t.name].totalTime+=t.duration,e[r].operations[t.name].callCount++}),e}const On={startRecording:$y,stopRecording:Vv,clearRecording:fb,startMeasure:uE,measure:dE,measureAsync:cE,captureMemorySnapshot:$2,createPerformanceTracker:fE,createAsyncPerformanceTracker:pE,setEnabled:pb,analyzeCriticalPaths:gb},Bn=Yo.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),zr=Hp();function gE(n){var r;const t=`; ${document.cookie}`.split(`; ${n}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}Bn.interceptors.request.use(async n=>{const e=zr.startMeasure("api_request_interceptor","ApiService");try{const t=gE("access_token");return t&&(n.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:n.url,method:n.method,headers:n.headers,withCredentials:n.withCredentials}),n}finally{e()}},n=>(console.error("Request interceptor error:",n),Promise.reject(n)));Bn.interceptors.response.use(n=>n,async n=>{var r,i;const e=zr.startMeasure("api_response_interceptor","ApiService"),t=n.config;try{if(((r=n.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;const s=Ao();try{await zr.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=gE("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Bn(t)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(n)}finally{e()}});function eR(n){var t;const e=[];if((t=n.response)!=null&&t.data){const r=n.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else n.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${n.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function iv(n){console.log("[fetchUsersByHierarchy] Récupération des utilisateurs:",n);const e={role:n.role};n.entrepriseId&&(e.entreprise=n.entrepriseId),n.salarieId&&(e.salarie=n.salarieId),n.includeDetails&&(e.include_plans=!0),n.search&&(e.search=n.search),console.log("[fetchUsersByHierarchy] Filtres appliqués:",e);try{const t=await Ua.getUsers(e);return console.log(`[fetchUsersByHierarchy] Résultat (${t.data.length} utilisateurs):`,t.data),t.data}catch(t){throw console.error("[fetchUsersByHierarchy] Erreur lors de la récupération des utilisateurs:",t),t}}const Ua={async getUsers(n={}){const e=zr.startMeasure("get_users","UserService");try{return await zr.measureAsync("get_users_request",()=>Bn.get("/users/",{params:n}),"UserService")}finally{e()}},async getUser(n){return await Bn.get(`/users/${n}/`)},async createUser(n){return await Bn.post("/users/",n)},async updateUser(n,e){return await Bn.patch(`/users/${n}/`,e)},async deleteUser(n){return await Bn.delete(`/users/${n}/`)},async getEntreprises(){return await Bn.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(n){const e={role:"SALARIE"};return n&&(e.entreprise=n),await Bn.get("/users/",{params:e})},async getSalarieVisiteurs(n){return await Bn.get("/users/",{params:{role:"VISITEUR",salarie:n}})},async getEntrepriseVisiteurs(n){return await Bn.get("/users/",{params:{role:"VISITEUR",entreprise:n}})},async getUsersByHierarchy(n){const e=zr.startMeasure("get_users_hierarchy","UserService");try{const t=zr.measure("prepare_hierarchy_filters",()=>{const r={role:n.role};return n.entrepriseId&&(r.entreprise=n.entrepriseId),n.salarieId&&(r.salarie=n.salarieId),n.includeDetails&&(r.include_plans=!0),n.search&&(r.search=n.search),r},"UserService");return await zr.measureAsync("get_users_hierarchy_request",()=>Bn.get("/users/",{params:t}),"UserService")}finally{e()}},async getEntrepriseSalaries(n){return await Bn.get("/users/",{params:{role:"SALARIE",entreprise:n}})},async getVisiteurs(n,e){const t={role:"VISITEUR"};return n&&(t.salarie=n),e&&(t.entreprise=e),await Bn.get("/users/",{params:t})},async assignEntrepriseToSalarie(n,e){return await Bn.patch(`/users/${n}/`,{entreprise:e})},async assignSalarieToVisiteur(n,e){return await Bn.patch(`/users/${n}/`,{salarie:e})},formatLogoFileName(n){return zr.measure("format_logo_filename",()=>{var i;const e=new Date().getTime(),t=((i=n.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${n.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${t}`},"UserService")},async uploadLogo(n){const e=zr.startMeasure("upload_logo","UserService");try{const t=new FormData,r=this.formatLogoFileName(n),i=new File([n],r,{type:n.type});return t.append("logo",i),await zr.measureAsync("upload_logo_request",()=>Bn.post("/users/upload_logo/",t,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{e()}}};async function q1(n,e=3,t=1e3,r=1e4){let i=0;for(;;)try{return await n()}catch(s){if(i++,i>=e)throw s;const o=Math.min(t*Math.pow(2,i-1),r),a=Math.random()*200;console.log(`Tentative ${i}/${e} échouée, nouvelle tentative dans ${o+a}ms`),await new Promise(l=>setTimeout(l,o+a))}}const w0={async getPlans(){const n=zr.startMeasure("get_plans","IrrigationService");try{return await zr.measureAsync("get_plans_request",()=>Bn.get("/plans/"),"IrrigationService")}finally{n()}},async createPlan(n){const e=zr.startMeasure("create_plan","IrrigationService");try{const t=zr.measure("format_plan_data",()=>({...n,entreprise:n.entreprise?typeof n.entreprise=="object"&&"id"in n.entreprise?n.entreprise.id:Number(n.entreprise):null,salarie:n.salarie?typeof n.salarie=="object"&&"id"in n.salarie?n.salarie.id:Number(n.salarie):null,visiteur:n.visiteur?typeof n.visiteur=="object"&&"id"in n.visiteur?n.visiteur.id:Number(n.visiteur):null}),"IrrigationService");return await zr.measureAsync("create_plan_request",()=>Bn.post("/plans/",t),"IrrigationService")}finally{e()}},async updatePlan(n,e){const t=zr.startMeasure("update_plan","IrrigationService");try{return await zr.measureAsync("update_plan_request",()=>Bn.put(`/plans/${n}/`,e),"IrrigationService")}finally{t()}},async deletePlan(n){const e=zr.startMeasure("delete_plan","IrrigationService");try{return await zr.measureAsync("delete_plan_request",()=>Bn.delete(`/plans/${n}/`),"IrrigationService")}finally{e()}},async getVisiteurPlans(n){return await Bn.get("/plans/",{params:{visiteur:n}})},async createPlanForVisiteur(n){return await Bn.post("/plans/",n)},async getEntreprisePlans(n){return await Bn.get("/plans/",{params:{entreprise:n}})},async getSalariePlans(n){return await Bn.get("/plans/",{params:{salarie:n}})},async createPlanForSalarie(n,e){const t={...n,salarie:e};return await Bn.post("/plans/",t)},async createPlanForEntreprise(n,e){const t={...n,entreprise:e};return await Bn.post("/plans/",t)}},Sa={async getNotes(n={}){const e=zr.startMeasure("get_notes","NoteService");try{return await zr.measureAsync("get_notes_request",()=>Bn.get("/notes/",{params:n}),"NoteService")}finally{e()}},async getNotesByPlan(n){const e=zr.startMeasure("get_notes_by_plan","NoteService");try{return await zr.measureAsync("get_notes_by_plan_request",()=>Bn.get("/notes/",{params:{plan:n}}),"NoteService")}finally{e()}},async getNote(n){const e=zr.startMeasure("get_note","NoteService");try{return await zr.measureAsync("get_note_request",()=>Bn.get(`/notes/${n}/`),"NoteService")}finally{e()}},async createNote(n){const e=zr.startMeasure("create_note","NoteService");try{const t={...n};return t.location&&Object.keys(t.location).length===0&&delete t.location,await zr.measureAsync("create_note_request",()=>Bn.post("/notes/",t),"NoteService")}finally{e()}},async updateNote(n,e){console.log("[noteService][updateNote] Mise à jour de la note:",{noteId:n,noteData:e});const t=zr.startMeasure("update_note","NoteService");try{const r=e.backendId||n,i={...e};i.location&&Object.keys(i.location).length===0&&delete i.location,e.column!==void 0?i.column=e.column:e.columnId!==void 0&&(i.column=e.columnId),delete i.columnId,delete i.column_id,delete i.column_details,delete i.backendId,delete i.leafletId;const s=i.enterprise_id;delete i.enterprise_name,console.log("[noteService][updateNote] Données formatées:",i),console.log(`[noteService][updateNote] Utilisation de l'ID backend ${r} pour la mise à jour`);const o=await zr.measureAsync("update_note_request",()=>Bn.patch(`/notes/${r}/`,i),"NoteService");return console.log("[noteService][updateNote] Réponse du serveur:",o.data),s!==void 0&&(o.data.enterprise_id=s),o}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise à jour:",r),r}finally{t()}},async deleteNote(n){const e=zr.startMeasure("delete_note","NoteService");try{return await zr.measureAsync("delete_note_request",()=>Bn.delete(`/notes/${n}/`),"NoteService")}finally{e()}},async getComments(n){return await Bn.get(`/notes/${n}/comments/`)},async addComment(n,e){const t=typeof e=="string"?{text:e}:e;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${n}:`,t),await Bn.post(`/notes/${n}/comments/`,t)},async updateComment(n,e,t){return await Bn.patch(`/notes/${n}/comments/${e}/`,t)},async deleteComment(n,e){return await Bn.delete(`/notes/${n}/comments/${e}/`)},async getPhotos(n){return await Bn.get(`/notes/${n}/photos/`)},async addPhoto(n,e){return await Bn.post(`/notes/${n}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(n,e,t){return await Bn.patch(`/notes/${n}/photos/${e}/`,t)},async deletePhoto(n,e){return await Bn.delete(`/notes/${n}/photos/${e}/`)}},Y1={async getDevices(n={}){const e=zr.startMeasure("get_weather_devices","WeatherService");try{return await q1(()=>Bn.get("/weather/devices/",{params:n}),3,1e3,1e4)}finally{e()}},async getRealTimeData(n){const e=zr.startMeasure("get_weather_data","WeatherService");try{const t=typeof n=="string"?{mac:n}:n;return await q1(()=>Bn.get("/weather/",{params:t}),3,1e3,1e4)}finally{e()}},async getHistoryData(n){const e=zr.startMeasure("get_history_data","WeatherService");try{return await q1(()=>Bn.get("/weather/history/",{params:n}),3,1e3,1e4)}finally{e()}}},x0={async getFilters(){const n=zr.startMeasure("get_map_filters","MapFilterService");try{return await zr.measureAsync("get_map_filters_request",()=>Bn.get("/map-filters/"),"MapFilterService")}finally{n()}},async getFilter(n){const e=zr.startMeasure("get_map_filter","MapFilterService");try{return await zr.measureAsync("get_map_filter_request",()=>Bn.get(`/map-filters/${n}/`),"MapFilterService")}finally{e()}},async createFilter(n){const e=zr.startMeasure("create_map_filter","MapFilterService");try{return await zr.measureAsync("create_map_filter_request",()=>Bn.post("/map-filters/",n),"MapFilterService")}finally{e()}},async updateFilter(n,e){const t=zr.startMeasure("update_map_filter","MapFilterService");try{return await zr.measureAsync("update_map_filter_request",()=>Bn.patch(`/map-filters/${n}/`,e),"MapFilterService")}finally{t()}},async deleteFilter(n){const e=zr.startMeasure("delete_map_filter","MapFilterService");try{return await zr.measureAsync("delete_map_filter_request",()=>Bn.delete(`/map-filters/${n}/`),"MapFilterService")}finally{e()}}},mb={async getGoogleMapsApiKey(){const n=zr.startMeasure("get_google_maps_api_key","SettingsService");try{return await zr.measureAsync("get_google_maps_api_key_request",()=>Bn.get("/settings/get_google_maps_api_key/"),"SettingsService")}finally{n()}},async setGoogleMapsApiKey(n){const e=zr.startMeasure("set_google_maps_api_key","SettingsService");try{return await zr.measureAsync("set_google_maps_api_key_request",()=>Bn.post("/settings/set_google_maps_api_key/",{key:n}),"SettingsService")}finally{e()}}};Bn.defaults.baseURL="/api";Bn.defaults.headers.common["Content-Type"]="application/json";Bn.defaults.withCredentials=!0;function vm(n){var r;const t=`; ${document.cookie}`.split(`; ${n}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}Bn.interceptors.request.use(n=>{const e=vm("access_token");return e&&(n.headers.Authorization=`Bearer ${e}`),n},n=>(console.error("Request interceptor error:",n),Promise.reject(n)));Bn.interceptors.response.use(n=>n,async n=>{var r,i;const e=Ao(),t=n.config;if(((r=n.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;try{if(!vm("access_token"))throw new Error("No token available");await e.refreshToken();const o=vm("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,Bn(t)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(n)});function tR(n,e,t=1){const r=new Date;r.setTime(r.getTime()+t*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${n}=${e};${i};path=/;secure;samesite=Strict`}function Dl(n){if(!n)return"-";const e=n.first_name||"",t=n.last_name?n.last_name.toUpperCase():"",r=`${e} ${t}`.trim(),i=n.company_name||n.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function nR(n="",e=""){return`${(n==null?void 0:n.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const rR={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function iR(n){return rR[n]||n}function sR(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function oR(n){return n?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function aR({role:n,entrepriseId:e,salarieId:t,includeDetails:r=!1}){const i={role:n};return e&&(i.entreprise=e),t&&(i.salarie=t),r&&(i.include_plans=!0),(await Ua.getUsers(i)).data}const Ao=$p("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:n=>{var e;return((e=n.user)==null?void 0:e.user_type)==="admin"},isEntreprise:n=>{var e;return((e=n.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:n=>{var e;return((e=n.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:n=>{var e;return((e=n.user)==null?void 0:e.user_type)==="visiteur"},currentUser:n=>n.user,hasEnterprise:n=>{var e;return!!((e=n.user)!=null&&e.enterprise_id)},hasEmployee:n=>{var e;return!!((e=n.user)!=null&&e.employee_id)}},actions:{async initialize(n){if(!n){const t=await this.restoreSession();return this.initialized=!0,t}if(n.isAuthenticated&&n.user)return this.user=n.user,this.isAuthenticated=!0,this.mustChangePassword=n.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!vm("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await Bn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(n){return console.error("Failed to restore session:",n),this.isAuthenticated=!1,this.user=null,!1}},async login(n,e){var t,r,i;try{const s=await Bn.post("/token/",{username:n,password:e});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((t=s.response)==null?void 0:t.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const n=await Bn.get("/users/me/");return this.user=n.data,this.isAuthenticated=!0,this.mustChangePassword=n.data.must_change_password||!1,n.data}catch(n){throw this.isAuthenticated=!1,this.user=null,n}},async changePassword(n,e){try{const t=await Bn.post("/users/change_password/",{old_password:n,password:e});return this.user={...this.user,must_change_password:!1},t.data}catch(t){throw console.error("Password change error:",t),t}},async refreshToken(){var n,e;try{if(!vm("refresh_token"))throw new Error("No refresh token available");const r=await Bn.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return tR("access_token",i,1),this.isAuthenticated=!0,i}catch(t){throw console.error("Error refreshing token:",{status:(n=t.response)==null?void 0:n.status,data:(e=t.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",t}},async fetchUsers(n={}){this.loading=!0;try{return(await Ua.getUsers(n)).data}catch(e){throw this.error="Erreur lors de la récupération des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const n=await Ua.getUsers({role:"ENTREPRISE"});return this.enterprises=n.data,this.enterprises}catch(n){throw this.error="Erreur lors de la récupération des entreprises",n}finally{this.loading=!1}},async fetchEnterpriseEmployees(n){this.loading=!0;try{const e=await Ua.getUsers({role:"SALARIE",entreprise:n});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(n){this.loading=!0;try{const e=await Ua.getUsers({role:"VISITEUR",entreprise:n});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}},async createUser(n){this.loading=!0;try{return(await Ua.createUser(n)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUser(n,e){this.loading=!0;try{return(await Ua.updateUser(n,e)).data}catch(t){throw this.error="Erreur lors de la mise à jour de l'utilisateur",t}finally{this.loading=!1}},async deleteUser(n){this.loading=!0;try{return await Ua.deleteUser(n),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const n=await Bn.get("/users/",{params:{role:"entreprise"}});this.enterprises=n.data}catch(n){throw this.error="Erreur lors de la récupération des entreprises",n}finally{this.loading=!1}},async setEnterprise(n,e){this.loading=!0;try{await Bn.patch(`/users/${n}/`,{enterprise:e}),this.user&&this.user.id===n&&(this.user.enterprise_id=e)}catch(t){throw this.error="Erreur lors de la mise à jour de l'entreprise",t}finally{this.loading=!1}},async updateUserRole(n,e){this.loading=!0;try{const t=await Bn.patch(`/users/${n}/`,{role:e});return this.user&&this.user.id===n&&(this.user.user_type=e),t.data}catch(t){throw this.error="Erreur lors de la mise à jour du rôle",t}finally{this.loading=!1}},async updateUserEmail(n){var e;this.loading=!0;try{const t=await Bn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:n});return this.user&&(this.user.email=n),t.data}catch(t){throw this.error="Erreur lors de la mise à jour de l'email",t}finally{this.loading=!1}},async uploadLogo(n){this.loading=!0;try{const e=await Ua.uploadLogo(n);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du téléversement du logo",e}finally{this.loading=!1}},checkAccess(n){return this.user?n.includes(this.user.user_type):!1},async fetchUsersByRole(n){this.loading=!0;try{return await aR(n)}catch(e){throw console.error(`Error fetching ${n.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(n){this.loading=!0;try{return(await Ua.getUsers({role:"SALARIE",entreprise:n})).data}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(n){this.loading=!0;try{return(await Ua.getUsers({role:"VISITEUR",salarie:n})).data}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ap=typeof document<"u";function mE(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function lR(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&mE(n.default)}const ls=Object.assign;function K1(n,e){const t={};for(const r in e){const i=e[r];t[r]=Pc(i)?i.map(n):n(i)}return t}const Gg=()=>{},Pc=Array.isArray,vE=/#/g,uR=/&/g,cR=/\//g,dR=/=/g,hR=/\?/g,yE=/\+/g,fR=/%5B/g,pR=/%5D/g,_E=/%5E/g,gR=/%60/g,bE=/%7B/g,mR=/%7C/g,wE=/%7D/g,vR=/%20/g;function U2(n){return encodeURI(""+n).replace(mR,"|").replace(fR,"[").replace(pR,"]")}function yR(n){return U2(n).replace(bE,"{").replace(wE,"}").replace(_E,"^")}function vb(n){return U2(n).replace(yE,"%2B").replace(vR,"+").replace(vE,"%23").replace(uR,"%26").replace(gR,"`").replace(bE,"{").replace(wE,"}").replace(_E,"^")}function _R(n){return vb(n).replace(dR,"%3D")}function bR(n){return U2(n).replace(vE,"%23").replace(hR,"%3F")}function wR(n){return n==null?"":bR(n).replace(cR,"%2F")}function ym(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const xR=/\/$/,LR=n=>n.replace(xR,"");function Z1(n,e,t="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=n(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=PR(r??e,t),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:ym(o)}}function SR(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function R4(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function CR(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&Ap(e.matched[r],t.matched[i])&&xE(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Ap(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function xE(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!ER(n[t],e[t]))return!1;return!0}function ER(n,e){return Pc(n)?B4(n,e):Pc(e)?B4(e,n):n===e}function B4(n,e){return Pc(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function PR(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Qd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var _m;(function(n){n.pop="pop",n.push="push"})(_m||(_m={}));var Wg;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Wg||(Wg={}));function MR(n){if(!n)if(ap){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),LR(n)}const kR=/^[^#]+#/;function AR(n,e){return n.replace(kR,"#")+e}function TR(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const Uy=()=>({left:window.scrollX,top:window.scrollY});function DR(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=TR(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function F4(n,e){return(history.state?history.state.position-e:-1)+n}const yb=new Map;function IR(n,e){yb.set(n,e)}function OR(n){const e=yb.get(n);return yb.delete(n),e}let NR=()=>location.protocol+"//"+location.host;function LE(n,e){const{pathname:t,search:r,hash:i}=e,s=n.indexOf("#");if(s>-1){let a=i.includes(n.slice(s))?n.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),R4(l,"")}return R4(t,n)+r+i}function RR(n,e,t,r){let i=[],s=[],o=null;const a=({state:v})=>{const m=LE(n,location),S=t.value,E=e.value;let k=0;if(v){if(t.value=m,e.value=v,o&&o===S){o=null;return}k=E?v.position-E.position:0}else r(m);i.forEach(T=>{T(t.value,S,{delta:k,type:_m.pop,direction:k?k>0?Wg.forward:Wg.back:Wg.unknown})})};function l(){o=t.value}function u(v){i.push(v);const m=()=>{const S=i.indexOf(v);S>-1&&i.splice(S,1)};return s.push(m),m}function h(){const{history:v}=window;v.state&&v.replaceState(ls({},v.state,{scroll:Uy()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:p}}function j4(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?Uy():null}}function BR(n){const{history:e,location:t}=window,r={value:LE(n,t)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,u,h){const p=n.indexOf("#"),v=p>-1?(t.host&&document.querySelector("base")?n:n.slice(p))+l:NR()+n+l;try{e[h?"replaceState":"pushState"](u,"",v),i.value=u}catch(m){console.error(m),t[h?"replace":"assign"](v)}}function o(l,u){const h=ls({},e.state,j4(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});s(l,h,!0),r.value=l}function a(l,u){const h=ls({},i.value,e.state,{forward:l,scroll:Uy()});s(h.current,h,!0);const p=ls({},j4(r.value,l,null),{position:h.position+1},u);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function FR(n){n=MR(n);const e=BR(n),t=RR(n,e.state,e.location,e.replace);function r(s,o=!0){o||t.pauseListeners(),history.go(s)}const i=ls({location:"",base:n,go:r,createHref:AR.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function jR(n){return typeof n=="string"||n&&typeof n=="object"}function SE(n){return typeof n=="string"||typeof n=="symbol"}const CE=Symbol("");var z4;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(z4||(z4={}));function Tp(n,e){return ls(new Error,{type:n,[CE]:!0},e)}function xd(n,e){return n instanceof Error&&CE in n&&(e==null||!!(n.type&e))}const $4="[^/]+?",zR={sensitive:!1,strict:!1,start:!0,end:!0},$R=/[.+*?^${}()[\]/\\]/g;function UR(n,e){const t=ls({},zR,e),r=[];let i=t.start?"^":"";const s=[];for(const u of n){const h=u.length?[]:[90];t.strict&&!u.length&&(i+="/");for(let p=0;p<u.length;p++){const v=u[p];let m=40+(t.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace($R,"\\$&"),m+=40;else if(v.type===1){const{value:S,repeatable:E,optional:k,regexp:T}=v;s.push({name:S,repeatable:E,optional:k});const A=T||$4;if(A!==$4){m+=10;try{new RegExp(`(${A})`)}catch(G){throw new Error(`Invalid custom RegExp for param "${S}" (${A}): `+G.message)}}let R=E?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;p||(R=k&&u.length<2?`(?:/${R})`:"/"+R),k&&(R+="?"),i+=R,m+=20,k&&(m+=-8),E&&(m+=-20),A===".*"&&(m+=-50)}h.push(m)}r.push(h)}if(t.strict&&t.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function a(u){const h=u.match(o),p={};if(!h)return null;for(let v=1;v<h.length;v++){const m=h[v]||"",S=s[v-1];p[S.name]=m&&S.repeatable?m.split("/"):m}return p}function l(u){let h="",p=!1;for(const v of n){(!p||!h.endsWith("/"))&&(h+="/"),p=!1;for(const m of v)if(m.type===0)h+=m.value;else if(m.type===1){const{value:S,repeatable:E,optional:k}=m,T=S in u?u[S]:"";if(Pc(T)&&!E)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const A=Pc(T)?T.join("/"):T;if(!A)if(k)v.length<2&&(h.endsWith("/")?h=h.slice(0,-1):p=!0);else throw new Error(`Missing required param "${S}"`);h+=A}}return h||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function VR(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function EE(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const s=VR(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if(U4(r))return 1;if(U4(i))return-1}return i.length-r.length}function U4(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const HR={type:0,value:""},GR=/[a-zA-Z0-9_]/;function WR(n){if(!n)return[[]];if(n==="/")return[[HR]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(m){throw new Error(`ERR (${t})/"${u}": ${m}`)}let t=0,r=t;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,u="",h="";function p(){u&&(t===0?s.push({type:0,value:u}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function v(){u+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:l==="/"?(u&&p(),o()):l===":"?(p(),t=1):v();break;case 4:v(),t=r;break;case 1:l==="("?t=2:GR.test(l)?v():(p(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:t=3:h+=l;break;case 3:p(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),i}function qR(n,e,t){const r=UR(WR(n.path),t),i=ls(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function YR(n,e){const t=[],r=new Map;e=W4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,m){const S=!m,E=H4(p);E.aliasOf=m&&m.record;const k=W4(e,p),T=[E];if("alias"in p){const G=typeof p.alias=="string"?[p.alias]:p.alias;for(const ee of G)T.push(H4(ls({},E,{components:m?m.record.components:E.components,path:ee,aliasOf:m?m.record:E})))}let A,R;for(const G of T){const{path:ee}=G;if(v&&ee[0]!=="/"){const pe=v.record.path,ge=pe[pe.length-1]==="/"?"":"/";G.path=v.record.path+(ee&&ge+ee)}if(A=qR(G,v,k),m?m.alias.push(A):(R=R||A,R!==A&&R.alias.push(A),S&&p.name&&!G4(A)&&o(p.name)),PE(A)&&l(A),E.children){const pe=E.children;for(let ge=0;ge<pe.length;ge++)s(pe[ge],A,m&&m.children[ge])}m=m||A}return R?()=>{o(R)}:Gg}function o(p){if(SE(p)){const v=r.get(p);v&&(r.delete(p),t.splice(t.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=t.indexOf(p);v>-1&&(t.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return t}function l(p){const v=XR(p,t);t.splice(v,0,p),p.record.name&&!G4(p)&&r.set(p.record.name,p)}function u(p,v){let m,S={},E,k;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw Tp(1,{location:p});k=m.record.name,S=ls(V4(v.params,m.keys.filter(R=>!R.optional).concat(m.parent?m.parent.keys.filter(R=>R.optional):[]).map(R=>R.name)),p.params&&V4(p.params,m.keys.map(R=>R.name))),E=m.stringify(S)}else if(p.path!=null)E=p.path,m=t.find(R=>R.re.test(E)),m&&(S=m.parse(E),k=m.record.name);else{if(m=v.name?r.get(v.name):t.find(R=>R.re.test(v.path)),!m)throw Tp(1,{location:p,currentLocation:v});k=m.record.name,S=ls({},v.params,p.params),E=m.stringify(S)}const T=[];let A=m;for(;A;)T.unshift(A.record),A=A.parent;return{name:k,path:E,params:S,matched:T,meta:ZR(T)}}n.forEach(p=>s(p));function h(){t.length=0,r.clear()}return{addRoute:s,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:i}}function V4(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function H4(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:KR(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function KR(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function G4(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function ZR(n){return n.reduce((e,t)=>ls(e,t.meta),{})}function W4(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function XR(n,e){let t=0,r=e.length;for(;t!==r;){const s=t+r>>1;EE(n,e[s])<0?r=s:t=s+1}const i=JR(n);return i&&(r=e.lastIndexOf(i,r-1)),r}function JR(n){let e=n;for(;e=e.parent;)if(PE(e)&&EE(n,e)===0)return e}function PE({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function QR(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(yE," "),o=s.indexOf("="),a=ym(o<0?s:s.slice(0,o)),l=o<0?null:ym(s.slice(o+1));if(a in e){let u=e[a];Pc(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function q4(n){let e="";for(let t in n){const r=n[t];if(t=_R(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(Pc(r)?r.map(s=>s&&vb(s)):[r&&vb(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function eB(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=Pc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const tB=Symbol(""),Y4=Symbol(""),Vy=Symbol(""),V2=Symbol(""),_b=Symbol("");function rg(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function ch(n,e,t,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const u=v=>{v===!1?l(Tp(4,{from:t,to:e})):v instanceof Error?l(v):jR(v)?l(Tp(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},h=s(()=>n.call(r&&r.instances[i],e,t,u));let p=Promise.resolve(h);n.length<3&&(p=p.then(u)),p.catch(v=>l(v))})}function X1(n,e,t,r,i=s=>s()){const s=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(mE(l)){const h=(l.__vccOpts||l)[e];h&&s.push(ch(h,t,r,o,a,i))}else{let u=l();s.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=lR(h)?h.default:h;o.mods[a]=h,o.components[a]=p;const m=(p.__vccOpts||p)[e];return m&&ch(m,t,r,o,a,i)()}))}}return s}function K4(n){const e=Mu(Vy),t=Mu(V2),r=rr(()=>{const l=Ln(n.to);return e.resolve(l)}),i=rr(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],p=t.matched;if(!h||!p.length)return-1;const v=p.findIndex(Ap.bind(null,h));if(v>-1)return v;const m=Z4(l[u-2]);return u>1&&Z4(h)===m&&p[p.length-1].path!==m?p.findIndex(Ap.bind(null,l[u-2])):v}),s=rr(()=>i.value>-1&&sB(t.params,r.value.params)),o=rr(()=>i.value>-1&&i.value===t.matched.length-1&&xE(t.params,r.value.params));function a(l={}){if(iB(l)){const u=e[Ln(n.replace)?"replace":"push"](Ln(n.to)).catch(Gg);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:rr(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function nB(n){return n.length===1?n[0]:n}const rB=Rs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:K4,setup(n,{slots:e}){const t=au(K4(n)),{options:r}=Mu(Vy),i=rr(()=>({[X4(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[X4(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&nB(e.default(t));return n.custom?s:Ty("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),xg=rB;function iB(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function sB(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!Pc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Z4(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const X4=(n,e,t)=>n??e??t,oB=Rs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=Mu(_b),i=rr(()=>n.route||r.value),s=Mu(Y4,0),o=rr(()=>{let u=Ln(s);const{matched:h}=i.value;let p;for(;(p=h[u])&&!p.components;)u++;return u}),a=rr(()=>i.value.matched[o.value]);$g(Y4,rr(()=>o.value+1)),$g(tB,a),$g(_b,i);const l=yt();return _i(()=>[l.value,a.value,n.name],([u,h,p],[v,m,S])=>{h&&(h.instances[p]=u,m&&m!==h&&u&&u===v&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!Ap(h,m)||!v)&&(h.enterCallbacks[p]||[]).forEach(E=>E(u))},{flush:"post"}),()=>{const u=i.value,h=n.name,p=a.value,v=p&&p.components[h];if(!v)return J4(t.default,{Component:v,route:u});const m=p.props[h],S=m?m===!0?u.params:typeof m=="function"?m(u):m:null,k=Ty(v,ls({},S,e,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(p.instances[h]=null)},ref:l}));return J4(t.default,{Component:k,route:u})||k}}});function J4(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const ME=oB;function aB(n){const e=YR(n.routes,n),t=n.parseQuery||QR,r=n.stringifyQuery||q4,i=n.history,s=rg(),o=rg(),a=rg(),l=b2(Qd);let u=Qd;ap&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=K1.bind(null,fe=>""+fe),p=K1.bind(null,wR),v=K1.bind(null,ym);function m(fe,ie){let te,Oe;return SE(fe)?(te=e.getRecordMatcher(fe),Oe=ie):Oe=fe,e.addRoute(Oe,te)}function S(fe){const ie=e.getRecordMatcher(fe);ie&&e.removeRoute(ie)}function E(){return e.getRoutes().map(fe=>fe.record)}function k(fe){return!!e.getRecordMatcher(fe)}function T(fe,ie){if(ie=ls({},ie||l.value),typeof fe=="string"){const re=Z1(t,fe,ie.path),Z=e.resolve({path:re.path},ie),U=i.createHref(re.fullPath);return ls(re,Z,{params:v(Z.params),hash:ym(re.hash),redirectedFrom:void 0,href:U})}let te;if(fe.path!=null)te=ls({},fe,{path:Z1(t,fe.path,ie.path).path});else{const re=ls({},fe.params);for(const Z in re)re[Z]==null&&delete re[Z];te=ls({},fe,{params:p(re)}),ie.params=p(ie.params)}const Oe=e.resolve(te,ie),we=fe.hash||"";Oe.params=h(v(Oe.params));const Be=SR(r,ls({},fe,{hash:yR(we),path:Oe.path})),ue=i.createHref(Be);return ls({fullPath:Be,hash:we,query:r===q4?eB(fe.query):fe.query||{}},Oe,{redirectedFrom:void 0,href:ue})}function A(fe){return typeof fe=="string"?Z1(t,fe,l.value.path):ls({},fe)}function R(fe,ie){if(u!==fe)return Tp(8,{from:ie,to:fe})}function G(fe){return ge(fe)}function ee(fe){return G(ls(A(fe),{replace:!0}))}function pe(fe){const ie=fe.matched[fe.matched.length-1];if(ie&&ie.redirect){const{redirect:te}=ie;let Oe=typeof te=="function"?te(fe):te;return typeof Oe=="string"&&(Oe=Oe.includes("?")||Oe.includes("#")?Oe=A(Oe):{path:Oe},Oe.params={}),ls({query:fe.query,hash:fe.hash,params:Oe.path!=null?{}:fe.params},Oe)}}function ge(fe,ie){const te=u=T(fe),Oe=l.value,we=fe.state,Be=fe.force,ue=fe.replace===!0,re=pe(te);if(re)return ge(ls(A(re),{state:typeof re=="object"?ls({},we,re.state):we,force:Be,replace:ue}),ie||te);const Z=te;Z.redirectedFrom=ie;let U;return!Be&&CR(r,Oe,te)&&(U=Tp(16,{to:Z,from:Oe}),We(Oe,Oe,!0,!1)),(U?Promise.resolve(U):Y(Z,Oe)).catch(xe=>xd(xe)?xd(xe,2)?xe:me(xe):X(xe,Z,Oe)).then(xe=>{if(xe){if(xd(xe,2))return ge(ls({replace:ue},A(xe.to),{state:typeof xe.to=="object"?ls({},we,xe.to.state):we,force:Be}),ie||Z)}else xe=N(Z,Oe,!0,ue,we);return V(Z,Oe,xe),xe})}function O(fe,ie){const te=R(fe,ie);return te?Promise.reject(te):Promise.resolve()}function j(fe){const ie=ye.values().next().value;return ie&&typeof ie.runWithContext=="function"?ie.runWithContext(fe):fe()}function Y(fe,ie){let te;const[Oe,we,Be]=lB(fe,ie);te=X1(Oe.reverse(),"beforeRouteLeave",fe,ie);for(const re of Oe)re.leaveGuards.forEach(Z=>{te.push(ch(Z,fe,ie))});const ue=O.bind(null,fe,ie);return te.push(ue),se(te).then(()=>{te=[];for(const re of s.list())te.push(ch(re,fe,ie));return te.push(ue),se(te)}).then(()=>{te=X1(we,"beforeRouteUpdate",fe,ie);for(const re of we)re.updateGuards.forEach(Z=>{te.push(ch(Z,fe,ie))});return te.push(ue),se(te)}).then(()=>{te=[];for(const re of Be)if(re.beforeEnter)if(Pc(re.beforeEnter))for(const Z of re.beforeEnter)te.push(ch(Z,fe,ie));else te.push(ch(re.beforeEnter,fe,ie));return te.push(ue),se(te)}).then(()=>(fe.matched.forEach(re=>re.enterCallbacks={}),te=X1(Be,"beforeRouteEnter",fe,ie,j),te.push(ue),se(te))).then(()=>{te=[];for(const re of o.list())te.push(ch(re,fe,ie));return te.push(ue),se(te)}).catch(re=>xd(re,8)?re:Promise.reject(re))}function V(fe,ie,te){a.list().forEach(Oe=>j(()=>Oe(fe,ie,te)))}function N(fe,ie,te,Oe,we){const Be=R(fe,ie);if(Be)return Be;const ue=ie===Qd,re=ap?history.state:{};te&&(Oe||ue?i.replace(fe.fullPath,ls({scroll:ue&&re&&re.scroll},we)):i.push(fe.fullPath,we)),l.value=fe,We(fe,ie,te,ue),me()}let q;function $(){q||(q=i.listen((fe,ie,te)=>{if(!J.listening)return;const Oe=T(fe),we=pe(Oe);if(we){ge(ls(we,{replace:!0,force:!0}),Oe).catch(Gg);return}u=Oe;const Be=l.value;ap&&IR(F4(Be.fullPath,te.delta),Uy()),Y(Oe,Be).catch(ue=>xd(ue,12)?ue:xd(ue,2)?(ge(ls(A(ue.to),{force:!0}),Oe).then(re=>{xd(re,20)&&!te.delta&&te.type===_m.pop&&i.go(-1,!1)}).catch(Gg),Promise.reject()):(te.delta&&i.go(-te.delta,!1),X(ue,Oe,Be))).then(ue=>{ue=ue||N(Oe,Be,!1),ue&&(te.delta&&!xd(ue,8)?i.go(-te.delta,!1):te.type===_m.pop&&xd(ue,20)&&i.go(-1,!1)),V(Oe,Be,ue)}).catch(Gg)}))}let F=rg(),B=rg(),Q;function X(fe,ie,te){me(fe);const Oe=B.list();return Oe.length?Oe.forEach(we=>we(fe,ie,te)):console.error(fe),Promise.reject(fe)}function _e(){return Q&&l.value!==Qd?Promise.resolve():new Promise((fe,ie)=>{F.add([fe,ie])})}function me(fe){return Q||(Q=!fe,$(),F.list().forEach(([ie,te])=>fe?te(fe):ie()),F.reset()),fe}function We(fe,ie,te,Oe){const{scrollBehavior:we}=n;if(!ap||!we)return Promise.resolve();const Be=!te&&OR(F4(fe.fullPath,0))||(Oe||!te)&&history.state&&history.state.scroll||null;return la().then(()=>we(fe,ie,Be)).then(ue=>ue&&DR(ue)).catch(ue=>X(ue,fe,ie))}const ae=fe=>i.go(fe);let ve;const ye=new Set,J={currentRoute:l,listening:!0,addRoute:m,removeRoute:S,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:E,resolve:T,options:n,push:G,replace:ee,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:B.add,isReady:_e,install(fe){const ie=this;fe.component("RouterLink",xg),fe.component("RouterView",ME),fe.config.globalProperties.$router=ie,Object.defineProperty(fe.config.globalProperties,"$route",{enumerable:!0,get:()=>Ln(l)}),ap&&!ve&&l.value===Qd&&(ve=!0,G(i.location).catch(we=>{}));const te={};for(const we in Qd)Object.defineProperty(te,we,{get:()=>l.value[we],enumerable:!0});fe.provide(Vy,ie),fe.provide(V2,_2(te)),fe.provide(_b,l);const Oe=fe.unmount;ye.add(fe),fe.unmount=function(){ye.delete(fe),ye.size<1&&(u=Qd,q&&q(),q=null,l.value=Qd,ve=!1,Q=!1),Oe()}}};function se(fe){return fe.reduce((ie,te)=>ie.then(()=>j(te)),Promise.resolve())}return J}function lB(n,e){const t=[],r=[],i=[],s=Math.max(e.matched.length,n.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(n.matched.find(u=>Ap(u,a))?r.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(u=>Ap(u,l))||i.push(l))}return[t,r,i]}function Rm(){return Mu(Vy)}function uB(n){return Mu(V2)}const ou=$p("notification",()=>{const n=yt([]),e=yt(0),t=yt(null),r=rr(()=>[...n.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:m=5e3}){const S=++e.value,E=Date.now(),k={id:S,type:p,message:v,duration:m,timestamp:E};return n.value.push(k),t.value=S,m>0&&setTimeout(()=>{u(S)},m),S}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function u(p){const v=n.value.findIndex(m=>m.id===p);v!==-1&&n.value.splice(v,1),t.value===p&&(t.value=null)}function h(){n.value=[],t.value=null}return{notifications:r,lastAddedId:t,addNotification:i,removeNotification:u,clearAll:h,success:s,error:o,info:a,warning:l}}),cB=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:ou},Symbol.toStringTag,{value:"Module"}));var Ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function kE(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}function dB(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var AE=dB,hB=typeof Ca=="object"&&Ca&&Ca.Object===Object&&Ca,fB=hB,pB=fB,gB=typeof self=="object"&&self&&self.Object===Object&&self,mB=pB||gB||Function("return this")(),TE=mB,vB=TE,yB=function(){return vB.Date.now()},_B=yB,bB=/\s/;function wB(n){for(var e=n.length;e--&&bB.test(n.charAt(e)););return e}var xB=wB,LB=xB,SB=/^\s+/;function CB(n){return n&&n.slice(0,LB(n)+1).replace(SB,"")}var EB=CB,PB=TE,MB=PB.Symbol,DE=MB,Q4=DE,IE=Object.prototype,kB=IE.hasOwnProperty,AB=IE.toString,ig=Q4?Q4.toStringTag:void 0;function TB(n){var e=kB.call(n,ig),t=n[ig];try{n[ig]=void 0;var r=!0}catch{}var i=AB.call(n);return r&&(e?n[ig]=t:delete n[ig]),i}var DB=TB,IB=Object.prototype,OB=IB.toString;function NB(n){return OB.call(n)}var RB=NB,e5=DE,BB=DB,FB=RB,jB="[object Null]",zB="[object Undefined]",t5=e5?e5.toStringTag:void 0;function $B(n){return n==null?n===void 0?zB:jB:t5&&t5 in Object(n)?BB(n):FB(n)}var UB=$B;function VB(n){return n!=null&&typeof n=="object"}var HB=VB,GB=UB,WB=HB,qB="[object Symbol]";function YB(n){return typeof n=="symbol"||WB(n)&&GB(n)==qB}var KB=YB,ZB=EB,n5=AE,XB=KB,r5=NaN,JB=/^[-+]0x[0-9a-f]+$/i,QB=/^0b[01]+$/i,eF=/^0o[0-7]+$/i,tF=parseInt;function nF(n){if(typeof n=="number")return n;if(XB(n))return r5;if(n5(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=n5(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=ZB(n);var t=QB.test(n);return t||eF.test(n)?tF(n.slice(2),t?2:8):JB.test(n)?r5:+n}var rF=nF,iF=AE,J1=_B,i5=rF,sF="Expected a function",oF=Math.max,aF=Math.min;function lF(n,e,t){var r,i,s,o,a,l,u=0,h=!1,p=!1,v=!0;if(typeof n!="function")throw new TypeError(sF);e=i5(e)||0,iF(t)&&(h=!!t.leading,p="maxWait"in t,s=p?oF(i5(t.maxWait)||0,e):s,v="trailing"in t?!!t.trailing:v);function m(pe){var ge=r,O=i;return r=i=void 0,u=pe,o=n.apply(O,ge),o}function S(pe){return u=pe,a=setTimeout(T,e),h?m(pe):o}function E(pe){var ge=pe-l,O=pe-u,j=e-ge;return p?aF(j,s-O):j}function k(pe){var ge=pe-l,O=pe-u;return l===void 0||ge>=e||ge<0||p&&O>=s}function T(){var pe=J1();if(k(pe))return A(pe);a=setTimeout(T,E(pe))}function A(pe){return a=void 0,v&&r?m(pe):(r=i=void 0,o)}function R(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function G(){return a===void 0?o:A(J1())}function ee(){var pe=J1(),ge=k(pe);if(r=arguments,i=this,l=pe,ge){if(a===void 0)return S(l);if(p)return clearTimeout(a),a=setTimeout(T,e),m(l)}return a===void 0&&(a=setTimeout(T,e)),o}return ee.cancel=R,ee.flush=G,ee}var uF=lF;const cF=Hy(uF),dF={class:"relative w-full"},hF={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},fF=["onClick"],s5=Rs({__name:"SearchBar",emits:["select-location"],setup(n,{emit:e}){const t=yt(""),r=yt([]),i=e,s=cF(async l=>{if(l.length<3){r.value=[];return}try{const h=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=h}catch(u){console.error("Erreur lors de la recherche d'adresse:",u),r.value=[]}},300);function o(){s(t.value)}function a(l){t.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,u)=>(De(),Fe("div",dF,[Tn(x("input",{"onUpdate:modelValue":u[0]||(u[0]=h=>t.value=h),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Ur,t.value]]),r.value.length>0?(De(),Fe("div",hF,[(De(!0),Fe(kn,null,sr(r.value,h=>(De(),Fe("div",{key:h.place_id,onClick:p=>a(h),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Dt(h.display_name),9,fF))),128))])):tn("",!0)]))}}),pF={class:"perf-title"},gF={class:"perf-basic-stats"},mF={class:"perf-stat"},vF={class:"perf-stat"},yF={class:"perf-expand-btn"},_F={key:0,class:"perf-content"},bF={class:"perf-section"},wF={class:"perf-metrics"},xF={class:"perf-metric"},LF={class:"perf-metric-value"},SF={class:"perf-metric"},CF={class:"perf-metric-value"},EF={class:"perf-metric"},PF={class:"perf-metric-value"},MF={class:"perf-metric"},kF={class:"perf-metric-value"},AF={class:"perf-section"},TF={class:"perf-metrics"},DF={key:0,class:"perf-metric"},IF={class:"perf-metric-value"},OF={key:1,class:"perf-metric"},NF={class:"perf-metric-value"},RF={key:2,class:"perf-metric"},BF={class:"perf-metric-value"},FF={class:"perf-section"},jF={class:"perf-table"},zF={class:"perf-table-cell"},$F={class:"perf-table-cell"},UF={class:"perf-table-cell"},VF={class:"perf-table-cell"},HF=["onClick"],GF={key:0,class:"perf-empty"},WF=Rs({__name:"PerformancePanel",props:{position:{}},setup(n){const t=n.position||"bottom-left",r=yt(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:a,memorySnapshots:l,framesPerSecond:u,operationHistory:h,startRecording:p,stopRecording:v,clearRecording:m,captureMemorySnapshot:S,getSlowOperations:E,getPerformanceReport:k,getOperationDetails:T}=Hp(),A=rr(()=>{const N=k()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:N.totalMeasures,totalLongTasks:N.totalLongTasks,averageDuration:N.slowestOperations.length>0?N.slowestOperations.reduce((q,$)=>q+$.duration,0)/N.slowestOperations.length:0,fps:N.averageFps,slowestOperations:N.slowestOperations,memoryUsage:N.memoryUsage}}),R=rr(()=>(k()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(q=>({operation:q.name,component:q.component||"unknown",durationMs:q.duration,timestamp:q.startTime}))),G=yt(null);Es(()=>{i.value&&(G.value=window.setInterval(()=>{S()},1e3))}),Ol(()=>{G.value!==null&&clearInterval(G.value)});function ee(N){return N===void 0?"N/A":N<1024?N+" B":N<1024*1024?(N/1024).toFixed(2)+" KB":N<1024*1024*1024?(N/(1024*1024)).toFixed(2)+" MB":(N/(1024*1024*1024)).toFixed(2)+" GB"}function pe(N){return N.toFixed(2)}const ge=()=>{S()};function O(){const N=k(),q="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(N,null,2)),$=document.createElement("a");$.setAttribute("href",q),$.setAttribute("download","performance_report.json"),document.body.appendChild($),$.click(),$.remove()}function j(){m(),ge()}function Y(){const N=k();navigator.clipboard.writeText(JSON.stringify(N,null,2)).then(()=>{alert("Données de performance copiées dans le presse-papiers")}).catch(q=>{console.error("Erreur lors de la copie des données",q),alert("Erreur lors de la copie des données")})}async function V(N){const q=T(N.operation,N.timestamp);if(!q){alert("Impossible de trouver les détails de cette opération");return}const $={operation:{...q.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(q.operation.startTime).toISOString()},context:{...q.context,relatedOperations:q.context.relatedOperations.map(F=>({...F,startTime:`+${F.startTime.toFixed(2)}ms`})),longTasks:q.context.longTasks.map(F=>({...F,startTime:`+${F.startTime.toFixed(2)}ms`})),memorySnapshots:q.context.memorySnapshots.map(F=>({...F,timestamp:`+${F.timestamp.toFixed(2)}ms`,usedJSHeapSize:F.usedJSHeapSize?ee(F.usedJSHeapSize):"N/A",totalJSHeapSize:F.totalJSHeapSize?ee(F.totalJSHeapSize):"N/A"}))},summary:{...q.summary,memoryDelta:ee(q.summary.memoryDelta),maxLongTaskDuration:`${q.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify($,null,2)),alert("Détails de l'opération copiés dans le presse-papiers")}catch(F){console.error("Erreur lors de la copie des détails",F),alert("Erreur lors de la copie des détails")}}return(N,q)=>{var $,F,B,Q,X,_e;return Ln(i)?(De(),Fe("div",{key:0,class:Mi(["performance-panel",`position-${Ln(t)}`,{expanded:r.value}])},[x("div",{class:"perf-header",onClick:q[0]||(q[0]=me=>r.value=!r.value)},[x("div",pF,[x("div",{class:Mi(["perf-indicator",{active:Ln(s)}])},null,2),q[1]||(q[1]=x("span",null,"Performance",-1))]),x("div",gF,[x("span",mF,Dt(A.value.fps)+" FPS",1),x("span",vF,Dt(pe(A.value.averageDuration))+"ms",1)]),x("button",yF,Dt(r.value?"▼":"▲"),1)]),r.value?(De(),Fe("div",_F,[x("div",bF,[q[6]||(q[6]=x("h3",null,"Métriques générales",-1)),x("div",wF,[x("div",xF,[q[2]||(q[2]=x("span",{class:"perf-metric-label"},"Mesures",-1)),x("span",LF,Dt(A.value.totalMeasures),1)]),x("div",SF,[q[3]||(q[3]=x("span",{class:"perf-metric-label"},"Tâches longues",-1)),x("span",CF,Dt(A.value.totalLongTasks),1)]),x("div",EF,[q[4]||(q[4]=x("span",{class:"perf-metric-label"},"Durée moyenne",-1)),x("span",PF,Dt(pe(A.value.averageDuration))+"ms",1)]),x("div",MF,[q[5]||(q[5]=x("span",{class:"perf-metric-label"},"FPS",-1)),x("span",kF,Dt(A.value.fps),1)])])]),x("div",AF,[q[10]||(q[10]=x("h3",null,"Mémoire",-1)),x("div",TF,[(($=A.value.memoryUsage)==null?void 0:$.usedJSHeapSize)!==void 0?(De(),Fe("div",DF,[q[7]||(q[7]=x("span",{class:"perf-metric-label"},"Utilisée",-1)),x("span",IF,Dt(ee((F=A.value.memoryUsage)==null?void 0:F.usedJSHeapSize)),1)])):tn("",!0),((B=A.value.memoryUsage)==null?void 0:B.totalJSHeapSize)!==void 0?(De(),Fe("div",OF,[q[8]||(q[8]=x("span",{class:"perf-metric-label"},"Totale",-1)),x("span",NF,Dt(ee((Q=A.value.memoryUsage)==null?void 0:Q.totalJSHeapSize)),1)])):tn("",!0),((X=A.value.memoryUsage)==null?void 0:X.jsHeapSizeLimit)!==void 0?(De(),Fe("div",RF,[q[9]||(q[9]=x("span",{class:"perf-metric-label"},"Limite",-1)),x("span",BF,Dt(ee((_e=A.value.memoryUsage)==null?void 0:_e.jsHeapSizeLimit)),1)])):tn("",!0)])]),x("div",FF,[q[13]||(q[13]=x("h3",null,"Opérations les plus lentes",-1)),x("div",jF,[q[12]||(q[12]=fl('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opération</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Durée</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(De(!0),Fe(kn,null,sr(R.value,me=>(De(),Fe("div",{class:"perf-table-row",key:me.timestamp},[x("div",zF,Dt(me.operation),1),x("div",$F,Dt(me.component),1),x("div",UF,Dt(pe(me.durationMs))+"ms",1),x("div",VF,[x("button",{onClick:We=>V(me),class:"perf-action-button",title:"Copier les détails"},q[11]||(q[11]=[x("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,HF)])]))),128)),R.value.length===0?(De(),Fe("div",GF," Aucune opération enregistrée ")):tn("",!0)])]),x("div",{class:"perf-actions"},[x("button",{onClick:j,class:"perf-button"}," Réinitialiser "),x("button",{onClick:O,class:"perf-button"}," Télécharger "),x("button",{onClick:Y,class:"perf-button"}," Copier ")])])):tn("",!0)],2)):tn("",!0)}}}),kc=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},qF=kc(WF,[["__scopeId","data-v-fefe39b0"]]),YF={key:0,class:"pwa-update-notification"},KF=Rs({__name:"PWAUpdateNotification",setup(n,{expose:e}){const t=yt(!1),r=async()=>{window.location.reload(),t.value=!1},i=()=>{t.value=!1};return e({showUpdateNotification:t,refreshApp:r,closeNotification:i}),(s,o)=>t.value?(De(),Fe("div",YF,[x("div",{class:"pwa-update-content"},[o[0]||(o[0]=x("p",null,"Une nouvelle version est disponible",-1)),x("div",{class:"pwa-update-actions"},[x("button",{onClick:r,class:"pwa-update-button"},"Mettre à jour"),x("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):tn("",!0)}}),ZF=kc(KF,[["__scopeId","data-v-aa687693"]]),XF="/static/frontend/img/icons/android-chrome-192x192.png",JF={class:"prompt-content"},QF={class:"prompt-body"},e9={key:0,class:"install-instructions ios"},t9={key:1,class:"install-instructions android"},n9={key:2,class:"install-instructions desktop"},r9={key:3,class:"install-instructions desktop"},i9=Rs({__name:"PWAInstallPrompt",setup(n){const e=yt(!1),t=yt(!1),r=yt(null);yt(null);const i=yt(!1),s=yt(!1),o=yt(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const m=localStorage.getItem("pwaPromptLastClosed");if(!m)return!1;const S=3*24*60*60*1e3;return Date.now()-parseInt(m)<S},u=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),r.value=m,e.value=!0,t.value=!0}),window.addEventListener("appinstalled",m=>{console.log("Application installée avec succès",m),e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,t.value=!0},3e3))},h=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};Es(()=>{u()}),jd(()=>{h()});const p=async()=>{if(!r.value){console.log("Installation non disponible");return}try{r.value.prompt();const m=await r.value.userChoice;r.value=null,m.outcome==="accepted"?(console.log("Installation acceptée"),e.value=!1):console.log("Installation refusée")}catch(m){console.error("Erreur lors de l'installation:",m)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(m,S)=>e.value?(De(),Fe("div",{key:0,class:Mi(["pwa-install-prompt",{fullscreen:t.value}])},[x("div",JF,[x("div",{class:"prompt-header"},[S[1]||(S[1]=x("div",{class:"app-info"},[x("img",{src:XF,alt:"TagMap Logo",class:"app-logo"}),x("div",{class:"app-details"},[x("h2",null,"Installer TagMap"),x("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),x("button",{onClick:v,class:"close-button","aria-label":"Fermer"},S[0]||(S[0]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[x("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),x("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),x("div",QF,[i.value?(De(),Fe("div",e9,S[2]||(S[2]=[fl('<h3 data-v-48772823>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Partager</strong> <span class="ios-share-icon" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-48772823></path><polyline points="16 6 12 2 8 6" data-v-48772823></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-48772823></line></svg></span></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Faites défiler et appuyez sur <strong data-v-48772823>Sur l&#39;écran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>3</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Ajouter</strong> en haut à droite</p></div></div>',4)]))):s.value?(De(),Fe("div",t9,[S[3]||(S[3]=x("h3",null,"Pour installer l'application sur votre appareil :",-1)),S[4]||(S[4]=x("div",{class:"instruction-step"},[x("div",{class:"step-number"},"1"),x("div",{class:"step-content"},[x("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),x("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(De(),Fe("div",n9,[S[5]||(S[5]=x("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),S[6]||(S[6]=x("div",{class:"instruction-step"},[x("div",{class:"step-number"},"1"),x("div",{class:"step-content"},[x("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),x("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(De(),Fe("div",r9,S[7]||(S[7]=[fl('<h3 data-v-48772823>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur l&#39;icône d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),x("div",{class:"prompt-footer"},[S[8]||(S[8]=fl('<div class="benefits" data-v-48772823><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-48772823></path></svg><span data-v-48772823>Sécurisé</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><circle cx="12" cy="12" r="10" data-v-48772823></circle><polyline points="12 6 12 12 16 14" data-v-48772823></polyline></svg><span data-v-48772823>Rapide</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-48772823></path></svg><span data-v-48772823>Hors ligne</span></div></div>',1)),x("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):tn("",!0)}}),s9=kc(i9,[["__scopeId","data-v-48772823"]]),o9={class:"app-container"},a9={key:0,class:"app-header bg-white shadow-sm z-[2500] flex-shrink-0"},l9={class:"mx-auto px-4 sm:px-6 lg:px-8"},u9={class:"flex h-16 items-center justify-between"},c9={class:"flex items-center"},d9={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},h9={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},f9={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},p9={class:"hidden md:flex md:ml-6 space-x-8"},g9={key:0,class:"flex-1 mx-2"},m9={class:"hidden md:block"},v9={class:"md:hidden"},y9={key:1,class:"flex-1"},_9={class:"flex items-center space-x-2 md:space-x-4"},b9={class:"relative"},w9={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},x9={class:"flex items-center justify-between w-full"},L9={class:"flex items-center space-x-3"},S9={class:"max-h-72 overflow-y-auto"},C9={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},E9={class:"flex items-start"},P9={class:"flex-shrink-0 mr-3"},M9={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},k9={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},A9={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},T9={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},D9={class:"flex-1"},I9={class:"text-sm md:text-sm text-gray-800"},O9=["onClick"],N9={class:"relative"},R9={class:"hidden md:flex flex-col items-end"},B9={class:"text-sm font-medium text-gray-700"},F9={key:0,class:"text-xs text-gray-500"},j9=["src","alt"],z9={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},$9={class:"text-sm font-semibold text-gray-700"},U9={class:"text-xs text-gray-500"},V9={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},H9={class:"space-y-1 px-2 pb-3 pt-2"},G9={class:"app-main"},W9=Rs({__name:"App",setup(n){const e=Rm(),t=Ao(),r=ou(),i=yt(!1),s=yt(!1),o=yt(!1),a=yt(!1),l=yt(null),u=yt(!1),h=yt(!1),p=yt(null),v=yt("13px"),m=yt("65px"),S=yt(null),E=yt(null),k=yt(!1);function T(){h.value=window.innerWidth<768}Es(()=>{T(),window.addEventListener("resize",T),window.addEventListener("resize",A),window.addEventListener("pwa-update-available",()=>{k.value=!0})}),jd(()=>{window.removeEventListener("resize",T),window.removeEventListener("resize",A),window.removeEventListener("pwa-update-available",()=>{})});function A(){if(!p.value)return;const F=p.value.getBoundingClientRect();v.value=`${F.top+window.scrollY+5}px`;const B=F.left+F.width/2;m.value=`${window.innerWidth-B-22}px`}const R=rr(()=>{const F=t.user;if(!F)return"";const B=`${F.first_name} ${F.last_name.toUpperCase()}`;return F.company_name?`${B} (${F.company_name})`:B}),G=rr(()=>{var B;switch((B=t.user)==null?void 0:B.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),ee=rr(()=>{var F;return((F=t.user)==null?void 0:F.user_type)==="admin"}),pe=rr(()=>t.isAuthenticated),ge=[{name:"Carte",to:"/"},{name:"Météo",to:"/meteo"},{name:"Notes",to:"/notes"}],O=rr(()=>{var B,Q;if(!pe.value)return[];const F=[...ge];return(ee.value||((B=t.user)==null?void 0:B.user_type)==="entreprise"||((Q=t.user)==null?void 0:Q.user_type)==="salarie")&&F.push({name:"Utilisateurs",to:"/users"}),ee.value&&F.push({name:"Paramètres",to:"/parametres"}),F}),j=rr(()=>pe.value?[{name:"Mon profil",to:"/profile"}]:[]);async function Y(){try{await t.logout(),e.push("/login")}catch(F){console.error("Erreur lors de la déconnexion:",F)}}function V(F){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:F.lat,lng:F.lng,zoom:16}}))}Es(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await t.checkAuth(),await t.fetchUserProfile();const B=localStorage.getItem("lastPlanId");B&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:B}}))}else console.log("No token found")}catch(F){console.error("Auth check error:",F),e.push("/login")}});const N=rr(()=>{const F="TagMap";if(!pe.value)return`${F} - Connexion`;const B=e.currentRoute.value,X={home:"Carte",meteo:"Météo",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[B.name]||"";return X?`${F} - ${X}`:F});_i(N,F=>{document.title=F},{immediate:!0});const q=rr(()=>r.notifications.length);function $(){r.clearAll(),o.value=!1}return pm(()=>{if(r.lastAddedId!==null){const F=r.notifications.find(B=>B.id===r.lastAddedId);F&&la(()=>{A(),a.value=!0,l.value={id:F.id,message:F.message,type:F.type},requestAnimationFrame(()=>{setTimeout(()=>{u.value=!0,setTimeout(()=>{u.value=!1,setTimeout(()=>{var B;((B=l.value)==null?void 0:B.id)===F.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(F,B)=>{var Q;return De(),Fe("div",o9,[pe.value?(De(),Fe("header",a9,[x("nav",l9,[x("div",u9,[x("div",c9,[x("button",{onClick:B[0]||(B[0]=X=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[B[7]||(B[7]=x("span",{class:"sr-only"},"Ouvrir le menu",-1)),(De(),Fe("svg",d9,[s.value?(De(),Fe("path",f9)):(De(),Fe("path",h9))]))]),ci(Ln(xg),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:nu(()=>B[8]||(B[8]=[x("span",{class:"md:inline hidden"},"TagMap",-1),x("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),x("div",p9,[(De(!0),Fe(kn,null,sr(O.value,X=>(De(),$o(Ln(xg),{key:X.name,to:X.to,class:Mi(["text-sm font-medium transition-colors duration-200",[F.$route.path===X.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:nu(()=>[qr(Dt(X.name),1)]),_:2},1032,["to","class"]))),128))])]),F.$route.path==="/"?(De(),Fe("div",g9,[x("div",m9,[ci(s5,{onSelectLocation:V})]),x("div",v9,[ci(s5,{onSelectLocation:V,class:"max-w-full"})])])):(De(),Fe("div",y9)),x("div",_9,[x("div",b9,[x("button",{ref_key:"bellButtonRef",ref:p,onClick:B[1]||(B[1]=X=>o.value=!o.value),class:Mi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},B[9]||(B[9]=[x("span",{class:"sr-only"},"Voir les notifications",-1),x("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(De(),Fe("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:iu(h.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[x("div",w9,[x("div",x9,[B[11]||(B[11]=x("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),x("div",L9,[q.value>0?(De(),Fe("button",{key:0,onClick:$,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):tn("",!0),x("button",{onClick:B[2]||(B[2]=X=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},B[10]||(B[10]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),x("div",S9,[q.value===0?(De(),Fe("div",C9," Aucune notification ")):tn("",!0),(De(!0),Fe(kn,null,sr(Ln(r).notifications,X=>(De(),Fe("div",{key:X.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[x("div",E9,[x("div",P9,[X.type==="success"?(De(),Fe("svg",M9,B[12]||(B[12]=[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):X.type==="error"?(De(),Fe("svg",k9,B[13]||(B[13]=[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):X.type==="warning"?(De(),Fe("svg",A9,B[14]||(B[14]=[x("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(De(),Fe("svg",T9,B[15]||(B[15]=[x("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),x("div",D9,[x("p",I9,Dt(X.message),1),x("button",{onClick:_e=>Ln(r).removeNotification(X.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,O9)])])]))),128))])],4)):tn("",!0)]),x("div",N9,[x("button",{onClick:B[3]||(B[3]=X=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[x("div",R9,[x("span",B9,Dt(R.value),1),G.value?(De(),Fe("span",F9,Dt(G.value),1)):tn("",!0)]),x("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((Q=Ln(t).user)==null?void 0:Q.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(R.value),alt:R.value},null,8,j9)]),i.value?(De(),Fe("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:iu(h.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[x("div",z9,[x("div",null,[x("div",$9,Dt(R.value),1),x("div",U9,Dt(G.value),1)]),x("button",{onClick:B[4]||(B[4]=X=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},B[16]||(B[16]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(De(!0),Fe(kn,null,sr(j.value,X=>(De(),$o(Ln(xg),{key:X.name,to:X.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:B[5]||(B[5]=_e=>i.value=!1)},{default:nu(()=>[qr(Dt(X.name),1)]),_:2},1032,["to"]))),128)),x("button",{onClick:Y,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):tn("",!0)])])]),s.value?(De(),Fe("div",V9,[x("div",H9,[(De(!0),Fe(kn,null,sr(O.value,X=>(De(),$o(Ln(xg),{key:X.name,to:X.to,class:Mi(["block px-3 py-2 rounded-md text-base font-medium",[F.$route.path===X.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:B[6]||(B[6]=_e=>s.value=!1)},{default:nu(()=>[qr(Dt(X.name),1)]),_:2},1032,["to","class"]))),128))])])):tn("",!0)])])):tn("",!0),x("main",G9,[ci(Ln(ME),null,{default:nu(({Component:X,route:_e})=>[(De(),$o(AS(X),{class:Mi({"router-view-map":_e.meta.isMapRoute})},null,8,["class"]))]),_:1})]),ci(qF,{position:"bottom-left"}),ci(ZF,{ref_key:"pwaUpdateNotification",ref:S},null,512),ci(s9,{ref_key:"pwaInstallPrompt",ref:E},null,512)])}}}),q9="modulepreload",Y9=function(n){return"/static/frontend/"+n},o5={},Id=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=Y9(l),l in o5)return;o5[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":q9,u||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((v,m)=>{p.addEventListener("load",v),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},K9={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},Z9={class:"max-w-md w-full space-y-8"},X9={class:"space-y-4"},J9={class:"mt-1"},Q9={class:"mt-1"},ej={class:"mt-1"},tj={key:0,class:"rounded-md bg-red-50 p-4"},nj={class:"flex"},rj={class:"ml-3"},ij={class:"text-sm font-medium text-red-800"},sj={key:1,class:"rounded-md bg-yellow-50 p-4"},oj={class:"flex"},aj={class:"ml-3"},lj={class:"mt-2 text-sm text-yellow-700"},uj={class:"list-disc pl-5 space-y-1"},cj=["disabled"],dj={class:"absolute left-0 inset-y-0 flex items-center pl-3"},hj={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},fj={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},pj=Rs({__name:"ChangePasswordForm",setup(n){const e=Rm(),t=Ao(),r=au({oldPassword:"",newPassword:"",confirmPassword:""}),i=yt(!1),s=yt("");Es(()=>{var u,h;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:t.isAuthenticated,userId:(u=t.user)==null?void 0:u.id,mustChangePassword:(h=t.user)==null?void 0:h.must_change_password})});const o=rr(()=>{const u=[];return r.newPassword&&r.newPassword.length<8&&u.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&u.push("Les mots de passe ne correspondent pas"),u}),a=rr(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var u,h,p,v,m,S,E,k;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((u=t.user)!=null&&u.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await t.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(T){console.error("Password change failed:",T),(p=(h=T.response)==null?void 0:h.data)!=null&&p.detail?s.value=T.response.data.detail:(m=(v=T.response)==null?void 0:v.data)!=null&&m.old_password?s.value=T.response.data.old_password[0]:(E=(S=T.response)==null?void 0:S.data)!=null&&E.password?s.value=T.response.data.password[0]:((k=T.response)==null?void 0:k.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await t.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(u,h)=>(De(),Fe("div",K9,[x("div",Z9,[h[12]||(h[12]=x("div",null,[x("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),x("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),x("form",{class:"mt-8 space-y-6",onSubmit:Il(l,["prevent"])},[x("div",X9,[x("div",null,[h[3]||(h[3]=x("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),x("div",J9,[Tn(x("input",{id:"old-password","onUpdate:modelValue":h[0]||(h[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Ur,r.oldPassword]])])]),x("div",null,[h[4]||(h[4]=x("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),x("div",Q9,[Tn(x("input",{id:"new-password","onUpdate:modelValue":h[1]||(h[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Ur,r.newPassword]])]),h[5]||(h[5]=x("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),x("div",null,[h[6]||(h[6]=x("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),x("div",ej,[Tn(x("input",{id:"confirm-password","onUpdate:modelValue":h[2]||(h[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Ur,r.confirmPassword]])])])]),s.value?(De(),Fe("div",tj,[x("div",nj,[h[7]||(h[7]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),x("div",rj,[x("h3",ij,Dt(s.value),1)])])])):tn("",!0),o.value.length>0?(De(),Fe("div",sj,[x("div",oj,[h[9]||(h[9]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),x("div",aj,[h[8]||(h[8]=x("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),x("div",lj,[x("ul",uj,[(De(!0),Fe(kn,null,sr(o.value,(p,v)=>(De(),Fe("li",{key:v},Dt(p),1))),128))])])])])])):tn("",!0),x("div",null,[x("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[x("span",dj,[i.value?(De(),Fe("svg",fj,h[11]||(h[11]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(De(),Fe("svg",hj,h[10]||(h[10]=[x("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),qr(" "+Dt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,cj)])],32)])]))}}),gj="/static/frontend/assets/background.svg",mj={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},vj={class:"container mx-auto relative z-10"},yj={class:"sm:mx-auto sm:w-full sm:max-w-md"},_j={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},bj={key:0,class:"rounded-md bg-red-50 p-4"},wj={class:"flex"},xj={class:"ml-3"},Lj={class:"text-sm font-medium text-red-800"},Sj={class:"mt-1"},Cj={class:"mt-1 relative"},Ej=["type"],Pj={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Mj={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},kj={class:"flex items-center justify-between"},Aj={class:"flex items-center"},Tj={class:"text-sm"},Dj=["disabled"],Ij={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Oj={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Nj={class:"mt-12"},Rj={class:"flex flex-wrap justify-center gap-2 mb-8"},Bj=["onClick"],Fj={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},jj={class:"flex items-center mb-4"},zj={class:"text-2xl mr-2"},$j={class:"text-xl font-semibold text-gray-900"},Uj={class:"text-gray-600 text-sm"},Vj={key:0,class:"flex justify-center mt-8 gap-2"},Hj=["onClick"],Q1=6,Gj=Rs({__name:"LoginView",setup(n){const e=Rm(),t=Ao(),r=yt(!1),i=yt(null),s=yt(!1),o=yt("Tous"),a=yt(1),l=au({username:"",password:"",rememberMe:!1}),u=[{type:"Liniculteur",sector:"Agriculture",icon:"🌾",text:"En tant qu'entreprise, j'ai mis en place un sous-compte « agriculteur » permettant la géolocalisation des parcelles. Cela offre à nos salariés et prestataires une visibilité complète sur l'ensemble des parcelles et facilite leur accès. De plus, ils peuvent y ajouter des notes et des photos si nécessaire. Grâce aux trackers, nous renforçons également la sécurité de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"🏭",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrôler l'accès de nos salariés aux différentes tâches."},{type:"Agence de voyage",sector:"Tourisme",icon:"✈️",text:"L'outil nous permet de créer gratuitement et sans limite des sous-comptes clients, d'établir des itinéraires personnalisés avec des points d'intérêt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"🌱",text:"Nous disposons d'un compte entreprise avec des sous-comptes dédiés à chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grâce aux stations météo connectées, nous optimisons la gestion des tours d'irrigation par secteur géographique en fonction des précipitations."},{type:"Conseil municipal",sector:"Collectivité",icon:"🏛️",text:"Cette solution nous permet de gagner en efficacité dans la gestion des tâches à réaliser, en les géolocalisant et en offrant à nos employés communaux la possibilité d'ajouter des commentaires et des photos sur chaque tâche géoréférencée."},{type:"Location de matériel",sector:"Services",icon:"🚜",text:"Cette solution nous permet de géolocaliser notre flotte grâce à des trackers sans abonnement, avec uniquement un abonnement à la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"👨‍🌾",text:"J'ai équipé tous mes canons d'enrouleurs de trackers et de caméras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"🌱",text:"Nous assurons la géolocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"💧",text:"Nous avons géolocalisé tous les forages de nos clients et ajouté en commentaire la procédure d'entrée, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"🌳",text:"Nous géolocalisons tous nos chantiers et ajoutons une photo du chantier terminé en commentaire, servant de preuve en cas de litige."}],h=rr(()=>["Tous",...new Set(u.map(E=>E.sector))]),p=rr(()=>{let S=o.value==="Tous"?u:u.filter(T=>T.sector===o.value);const E=(a.value-1)*Q1,k=E+Q1;return S.slice(E,k)}),v=rr(()=>{const S=o.value==="Tous"?u:u.filter(E=>E.sector===o.value);return Math.ceil(S.length/Q1)});Es(async()=>{var S;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((S=window.INITIAL_STATE)!=null&&S.isAuthenticated){console.log("User is authenticated, redirecting to home"),e.push("/");return}await t.restoreSession()&&(console.log("Session restored, redirecting to home"),e.push("/"))}catch(E){console.error("Error during initialization:",E),i.value=null}});async function m(){var S,E,k,T,A,R,G,ee,pe;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await t.login(l.username,l.password),(S=t.user)!=null&&S.must_change_password?e.push("/change-password"):e.push("/")}catch(ge){console.error("Login error:",ge),((E=ge==null?void 0:ge.response)==null?void 0:E.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((k=ge==null?void 0:ge.response)==null?void 0:k.status)===401||((T=ge==null?void 0:ge.response)==null?void 0:T.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(R=(A=ge==null?void 0:ge.response)==null?void 0:A.data)!=null&&R.detail?i.value=ge.response.data.detail:(pe=(ee=(G=ge==null?void 0:ge.response)==null?void 0:G.data)==null?void 0:ee.non_field_errors)!=null&&pe[0]?i.value=ge.response.data.non_field_errors[0]:(ge==null?void 0:ge.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(S,E)=>{const k=k2("router-link");return De(),Fe("div",mj,[x("div",{class:"fixed inset-0 z-0",style:iu({backgroundImage:`url(${Ln(gj)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),E[16]||(E[16]=x("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),x("div",vj,[x("div",yj,[x("div",_j,[E[12]||(E[12]=x("div",{class:"text-center mb-8"},[x("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),x("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),x("form",{class:"space-y-6",onSubmit:Il(m,["prevent"])},[i.value?(De(),Fe("div",bj,[x("div",wj,[E[4]||(E[4]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),x("div",xj,[x("h3",Lj,Dt(i.value),1)])])])):tn("",!0),x("div",null,[E[5]||(E[5]=x("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),x("div",Sj,[Tn(x("input",{id:"username","onUpdate:modelValue":E[0]||(E[0]=T=>l.username=T),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Ur,l.username]])])]),x("div",null,[E[8]||(E[8]=x("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),x("div",Cj,[Tn(x("input",{id:"password","onUpdate:modelValue":E[1]||(E[1]=T=>l.password=T),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,Ej),[[B2,l.password]]),x("button",{type:"button",onClick:E[2]||(E[2]=T=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(De(),Fe("svg",Pj,E[6]||(E[6]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(De(),Fe("svg",Mj,E[7]||(E[7]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),x("div",kj,[x("div",Aj,[Tn(x("input",{id:"remember-me","onUpdate:modelValue":E[3]||(E[3]=T=>l.rememberMe=T),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Pl,l.rememberMe]]),E[9]||(E[9]=x("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),x("div",Tj,[ci(k,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:nu(()=>E[10]||(E[10]=[qr(" Mot de passe oublié ? ")])),_:1})])]),x("div",null,[x("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(De(),Fe("svg",Ij,E[11]||(E[11]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),qr(" "+Dt(r.value?"Connexion en cours...":"Se connecter"),1)],8,Dj)])],32)])]),x("div",Oj,[E[14]||(E[14]=fl('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>💡</span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>Équipements Connectés sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>📍</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Géolocalisez et sécurisez votre matériel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>🌤️</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station météo</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos décisions avec des données en temps réel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👀📌</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive où tout est sous contrôle ! Tout est centralisé, organisé et accessible en un clin d&#39;œil !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👥💻🔄</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Réel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;équipe simplifié : Collaborez en temps réel sur une interface ultra-intuitive. Vos équipes restent synchronisées et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🚜📸</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🔐🔑</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accès Sécurisé</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accès sécurisé et intelligent : Gérez les droits d&#39;accès de vos salariés et prestataires en un clic.</p></div></div>',2)),x("div",Nj,[E[13]||(E[13]=x("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),x("div",Rj,[(De(!0),Fe(kn,null,sr(h.value,T=>(De(),Fe("button",{key:T,onClick:A=>o.value=T,class:Mi(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===T?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Dt(T),11,Bj))),128))]),x("div",Fj,[(De(!0),Fe(kn,null,sr(p.value,T=>(De(),Fe("div",{key:T.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[x("div",jj,[x("span",zj,Dt(T.icon),1),x("span",$j,Dt(T.type),1)]),x("p",Uj,Dt(T.text),1)]))),128))]),v.value>1?(De(),Fe("div",Vj,[(De(!0),Fe(kn,null,sr(v.value,T=>(De(),Fe("button",{key:T,onClick:A=>a.value=T,class:Mi(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===T?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Dt(T),11,Hj))),128))])):tn("",!0)])]),E[15]||(E[15]=x("div",{class:"h-16"},null,-1))])])}}}),Wj=kc(Gj,[["__scopeId","data-v-9ff7ee32"]]),qj="/static/frontend/assets/logo.svg";var bb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(t,r){r(e)})(Ca,function(t){var r="1.9.4";function i(c){var y,P,W,de;for(P=1,W=arguments.length;P<W;P++){de=arguments[P];for(y in de)c[y]=de[y]}return c}var s=Object.create||function(){function c(){}return function(y){return c.prototype=y,new c}}();function o(c,y){var P=Array.prototype.slice;if(c.bind)return c.bind.apply(c,P.call(arguments,1));var W=P.call(arguments,2);return function(){return c.apply(y,W.length?W.concat(P.call(arguments)):arguments)}}var a=0;function l(c){return"_leaflet_id"in c||(c._leaflet_id=++a),c._leaflet_id}function u(c,y,P){var W,de,ke,ft;return ft=function(){W=!1,de&&(ke.apply(P,de),de=!1)},ke=function(){W?de=arguments:(c.apply(P,arguments),setTimeout(ft,y),W=!0)},ke}function h(c,y,P){var W=y[1],de=y[0],ke=W-de;return c===W&&P?c:((c-de)%ke+ke)%ke+de}function p(){return!1}function v(c,y){if(y===!1)return c;var P=Math.pow(10,y===void 0?6:y);return Math.round(c*P)/P}function m(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function S(c){return m(c).split(/\s+/)}function E(c,y){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?s(c.options):{});for(var P in y)c.options[P]=y[P];return c.options}function k(c,y,P){var W=[];for(var de in c)W.push(encodeURIComponent(P?de.toUpperCase():de)+"="+encodeURIComponent(c[de]));return(!y||y.indexOf("?")===-1?"?":"&")+W.join("&")}var T=/\{ *([\w_ -]+) *\}/g;function A(c,y){return c.replace(T,function(P,W){var de=y[W];if(de===void 0)throw new Error("No value provided for variable "+P);return typeof de=="function"&&(de=de(y)),de})}var R=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function G(c,y){for(var P=0;P<c.length;P++)if(c[P]===y)return P;return-1}var ee="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function pe(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var ge=0;function O(c){var y=+new Date,P=Math.max(0,16-(y-ge));return ge=y+P,window.setTimeout(c,P)}var j=window.requestAnimationFrame||pe("RequestAnimationFrame")||O,Y=window.cancelAnimationFrame||pe("CancelAnimationFrame")||pe("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function V(c,y,P){if(P&&j===O)c.call(y);else return j.call(window,o(c,y))}function N(c){c&&Y.call(window,c)}var q={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:u,wrapNum:h,falseFn:p,formatNum:v,trim:m,splitWords:S,setOptions:E,getParamString:k,template:A,isArray:R,indexOf:G,emptyImageUrl:ee,requestFn:j,cancelFn:Y,requestAnimFrame:V,cancelAnimFrame:N};function $(){}$.extend=function(c){var y=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=y.__super__=this.prototype,W=s(P);W.constructor=y,y.prototype=W;for(var de in this)Object.prototype.hasOwnProperty.call(this,de)&&de!=="prototype"&&de!=="__super__"&&(y[de]=this[de]);return c.statics&&i(y,c.statics),c.includes&&(F(c.includes),i.apply(null,[W].concat(c.includes))),i(W,c),delete W.statics,delete W.includes,W.options&&(W.options=P.options?s(P.options):{},i(W.options,c.options)),W._initHooks=[],W.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var ke=0,ft=W._initHooks.length;ke<ft;ke++)W._initHooks[ke].call(this)}},y},$.include=function(c){var y=this.prototype.options;return i(this.prototype,c),c.options&&(this.prototype.options=y,this.mergeOptions(c.options)),this},$.mergeOptions=function(c){return i(this.prototype.options,c),this},$.addInitHook=function(c){var y=Array.prototype.slice.call(arguments,1),P=typeof c=="function"?c:function(){this[c].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function F(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=R(c)?c:[c];for(var y=0;y<c.length;y++)c[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var B={on:function(c,y,P){if(typeof c=="object")for(var W in c)this._on(W,c[W],y);else{c=S(c);for(var de=0,ke=c.length;de<ke;de++)this._on(c[de],y,P)}return this},off:function(c,y,P){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var W in c)this._off(W,c[W],y);else{c=S(c);for(var de=arguments.length===1,ke=0,ft=c.length;ke<ft;ke++)de?this._off(c[ke]):this._off(c[ke],y,P)}return this},_on:function(c,y,P,W){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(c,y,P)===!1){P===this&&(P=void 0);var de={fn:y,ctx:P};W&&(de.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(de)}},_off:function(c,y,P){var W,de,ke;if(this._events&&(W=this._events[c],!!W)){if(arguments.length===1){if(this._firingCount)for(de=0,ke=W.length;de<ke;de++)W[de].fn=p;delete this._events[c];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var ft=this._listens(c,y,P);if(ft!==!1){var jt=W[ft];this._firingCount&&(jt.fn=p,this._events[c]=W=W.slice()),W.splice(ft,1)}}},fire:function(c,y,P){if(!this.listens(c,P))return this;var W=i({},y,{type:c,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var de=this._events[c];if(de){this._firingCount=this._firingCount+1||1;for(var ke=0,ft=de.length;ke<ft;ke++){var jt=de[ke],Zt=jt.fn;jt.once&&this.off(c,Zt,jt.ctx),Zt.call(jt.ctx||this,W)}this._firingCount--}}return P&&this._propagateEvent(W),this},listens:function(c,y,P,W){typeof c!="string"&&console.warn('"string" type argument expected');var de=y;typeof y!="function"&&(W=!!y,de=void 0,P=void 0);var ke=this._events&&this._events[c];if(ke&&ke.length&&this._listens(c,de,P)!==!1)return!0;if(W){for(var ft in this._eventParents)if(this._eventParents[ft].listens(c,y,P,W))return!0}return!1},_listens:function(c,y,P){if(!this._events)return!1;var W=this._events[c]||[];if(!y)return!!W.length;P===this&&(P=void 0);for(var de=0,ke=W.length;de<ke;de++)if(W[de].fn===y&&W[de].ctx===P)return de;return!1},once:function(c,y,P){if(typeof c=="object")for(var W in c)this._on(W,c[W],y,!0);else{c=S(c);for(var de=0,ke=c.length;de<ke;de++)this._on(c[de],y,P,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[l(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[l(c)],this},_propagateEvent:function(c){for(var y in this._eventParents)this._eventParents[y].fire(c.type,i({layer:c.target,propagatedFrom:c.target},c),!0)}};B.addEventListener=B.on,B.removeEventListener=B.clearAllEventListeners=B.off,B.addOneTimeEventListener=B.once,B.fireEvent=B.fire,B.hasEventListeners=B.listens;var Q=$.extend(B);function X(c,y,P){this.x=P?Math.round(c):c,this.y=P?Math.round(y):y}var _e=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(c){return this.clone()._add(me(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(me(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new X(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new X(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(c){c=me(c);var y=c.x-this.x,P=c.y-this.y;return Math.sqrt(y*y+P*P)},equals:function(c){return c=me(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=me(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function me(c,y,P){return c instanceof X?c:R(c)?new X(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new X(c.x,c.y):new X(c,y,P)}function We(c,y){if(c)for(var P=y?[c,y]:c,W=0,de=P.length;W<de;W++)this.extend(P[W])}We.prototype={extend:function(c){var y,P;if(!c)return this;if(c instanceof X||typeof c[0]=="number"||"x"in c)y=P=me(c);else if(c=ae(c),y=c.min,P=c.max,!y||!P)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=P.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(c){return me((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return me(this.min.x,this.max.y)},getTopRight:function(){return me(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var y,P;return typeof c[0]=="number"||c instanceof X?c=me(c):c=ae(c),c instanceof We?(y=c.min,P=c.max):y=P=c,y.x>=this.min.x&&P.x<=this.max.x&&y.y>=this.min.y&&P.y<=this.max.y},intersects:function(c){c=ae(c);var y=this.min,P=this.max,W=c.min,de=c.max,ke=de.x>=y.x&&W.x<=P.x,ft=de.y>=y.y&&W.y<=P.y;return ke&&ft},overlaps:function(c){c=ae(c);var y=this.min,P=this.max,W=c.min,de=c.max,ke=de.x>y.x&&W.x<P.x,ft=de.y>y.y&&W.y<P.y;return ke&&ft},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var y=this.min,P=this.max,W=Math.abs(y.x-P.x)*c,de=Math.abs(y.y-P.y)*c;return ae(me(y.x-W,y.y-de),me(P.x+W,P.y+de))},equals:function(c){return c?(c=ae(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function ae(c,y){return!c||c instanceof We?c:new We(c,y)}function ve(c,y){if(c)for(var P=y?[c,y]:c,W=0,de=P.length;W<de;W++)this.extend(P[W])}ve.prototype={extend:function(c){var y=this._southWest,P=this._northEast,W,de;if(c instanceof J)W=c,de=c;else if(c instanceof ve){if(W=c._southWest,de=c._northEast,!W||!de)return this}else return c?this.extend(se(c)||ye(c)):this;return!y&&!P?(this._southWest=new J(W.lat,W.lng),this._northEast=new J(de.lat,de.lng)):(y.lat=Math.min(W.lat,y.lat),y.lng=Math.min(W.lng,y.lng),P.lat=Math.max(de.lat,P.lat),P.lng=Math.max(de.lng,P.lng)),this},pad:function(c){var y=this._southWest,P=this._northEast,W=Math.abs(y.lat-P.lat)*c,de=Math.abs(y.lng-P.lng)*c;return new ve(new J(y.lat-W,y.lng-de),new J(P.lat+W,P.lng+de))},getCenter:function(){return new J((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new J(this.getNorth(),this.getWest())},getSouthEast:function(){return new J(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof J||"lat"in c?c=se(c):c=ye(c);var y=this._southWest,P=this._northEast,W,de;return c instanceof ve?(W=c.getSouthWest(),de=c.getNorthEast()):W=de=c,W.lat>=y.lat&&de.lat<=P.lat&&W.lng>=y.lng&&de.lng<=P.lng},intersects:function(c){c=ye(c);var y=this._southWest,P=this._northEast,W=c.getSouthWest(),de=c.getNorthEast(),ke=de.lat>=y.lat&&W.lat<=P.lat,ft=de.lng>=y.lng&&W.lng<=P.lng;return ke&&ft},overlaps:function(c){c=ye(c);var y=this._southWest,P=this._northEast,W=c.getSouthWest(),de=c.getNorthEast(),ke=de.lat>y.lat&&W.lat<P.lat,ft=de.lng>y.lng&&W.lng<P.lng;return ke&&ft},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,y){return c?(c=ye(c),this._southWest.equals(c.getSouthWest(),y)&&this._northEast.equals(c.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(c,y){return c instanceof ve?c:new ve(c,y)}function J(c,y,P){if(isNaN(c)||isNaN(y))throw new Error("Invalid LatLng object: ("+c+", "+y+")");this.lat=+c,this.lng=+y,P!==void 0&&(this.alt=+P)}J.prototype={equals:function(c,y){if(!c)return!1;c=se(c);var P=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return P<=(y===void 0?1e-9:y)},toString:function(c){return"LatLng("+v(this.lat,c)+", "+v(this.lng,c)+")"},distanceTo:function(c){return ie.distance(this,se(c))},wrap:function(){return ie.wrapLatLng(this)},toBounds:function(c){var y=180*c/40075017,P=y/Math.cos(Math.PI/180*this.lat);return ye([this.lat-y,this.lng-P],[this.lat+y,this.lng+P])},clone:function(){return new J(this.lat,this.lng,this.alt)}};function se(c,y,P){return c instanceof J?c:R(c)&&typeof c[0]!="object"?c.length===3?new J(c[0],c[1],c[2]):c.length===2?new J(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new J(c.lat,"lng"in c?c.lng:c.lon,c.alt):y===void 0?null:new J(c,y,P)}var fe={latLngToPoint:function(c,y){var P=this.projection.project(c),W=this.scale(y);return this.transformation._transform(P,W)},pointToLatLng:function(c,y){var P=this.scale(y),W=this.transformation.untransform(c,P);return this.projection.unproject(W)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var y=this.projection.bounds,P=this.scale(c),W=this.transformation.transform(y.min,P),de=this.transformation.transform(y.max,P);return new We(W,de)},infinite:!1,wrapLatLng:function(c){var y=this.wrapLng?h(c.lng,this.wrapLng,!0):c.lng,P=this.wrapLat?h(c.lat,this.wrapLat,!0):c.lat,W=c.alt;return new J(P,y,W)},wrapLatLngBounds:function(c){var y=c.getCenter(),P=this.wrapLatLng(y),W=y.lat-P.lat,de=y.lng-P.lng;if(W===0&&de===0)return c;var ke=c.getSouthWest(),ft=c.getNorthEast(),jt=new J(ke.lat-W,ke.lng-de),Zt=new J(ft.lat-W,ft.lng-de);return new ve(jt,Zt)}},ie=i({},fe,{wrapLng:[-180,180],R:6371e3,distance:function(c,y){var P=Math.PI/180,W=c.lat*P,de=y.lat*P,ke=Math.sin((y.lat-c.lat)*P/2),ft=Math.sin((y.lng-c.lng)*P/2),jt=ke*ke+Math.cos(W)*Math.cos(de)*ft*ft,Zt=2*Math.atan2(Math.sqrt(jt),Math.sqrt(1-jt));return this.R*Zt}}),te=6378137,Oe={R:te,MAX_LATITUDE:85.0511287798,project:function(c){var y=Math.PI/180,P=this.MAX_LATITUDE,W=Math.max(Math.min(P,c.lat),-P),de=Math.sin(W*y);return new X(this.R*c.lng*y,this.R*Math.log((1+de)/(1-de))/2)},unproject:function(c){var y=180/Math.PI;return new J((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*y,c.x*y/this.R)},bounds:function(){var c=te*Math.PI;return new We([-c,-c],[c,c])}()};function we(c,y,P,W){if(R(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=y,this._c=P,this._d=W}we.prototype={transform:function(c,y){return this._transform(c.clone(),y)},_transform:function(c,y){return y=y||1,c.x=y*(this._a*c.x+this._b),c.y=y*(this._c*c.y+this._d),c},untransform:function(c,y){return y=y||1,new X((c.x/y-this._b)/this._a,(c.y/y-this._d)/this._c)}};function Be(c,y,P,W){return new we(c,y,P,W)}var ue=i({},ie,{code:"EPSG:3857",projection:Oe,transformation:function(){var c=.5/(Math.PI*Oe.R);return Be(c,.5,-c,.5)}()}),re=i({},ue,{code:"EPSG:900913"});function Z(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function U(c,y){var P="",W,de,ke,ft,jt,Zt;for(W=0,ke=c.length;W<ke;W++){for(jt=c[W],de=0,ft=jt.length;de<ft;de++)Zt=jt[de],P+=(de?"L":"M")+Zt.x+" "+Zt.y;P+=y?Yt.svg?"z":"x":""}return P||"M0 0"}var xe=document.documentElement.style,Ne="ActiveXObject"in window,Ge=Ne&&!document.addEventListener,Se="msLaunchUri"in navigator&&!("documentMode"in document),ce=Bt("webkit"),je=Bt("android"),st=Bt("android 2")||Bt("android 3"),lt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_t=je&&Bt("Google")&&lt<537&&!("AudioNode"in window),Je=!!window.opera,zt=!Se&&Bt("chrome"),Xt=Bt("gecko")&&!ce&&!Je&&!Ne,et=!zt&&Bt("safari"),ut=Bt("phantom"),ot="OTransition"in xe,It=navigator.platform.indexOf("Win")===0,Jt=Ne&&"transition"in xe,xn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!st,Sn="MozPerspective"in xe,An=!window.L_DISABLE_3D&&(Jt||xn||Sn)&&!ot&&!ut,Zn=typeof orientation<"u"||Bt("mobile"),Cn=Zn&&ce,cn=Zn&&xn,bn=!window.PointerEvent&&window.MSPointerEvent,ir=!!(window.PointerEvent||bn),hr="ontouchstart"in window||!!window.TouchEvent,wr=!window.L_NO_TOUCH&&(hr||ir),Kn=Zn&&Je,Rr=Zn&&Xt,ms=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Bi=function(){var c=!1;try{var y=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return c}(),Vs=function(){return!!document.createElement("canvas").getContext}(),is=!!(document.createElementNS&&Z("svg").createSVGRect),Xn=!!is&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ss=!is&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var y=c.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),Et=navigator.platform.indexOf("Mac")===0,at=navigator.platform.indexOf("Linux")===0;function Bt(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var Yt={ie:Ne,ielt9:Ge,edge:Se,webkit:ce,android:je,android23:st,androidStock:_t,opera:Je,chrome:zt,gecko:Xt,safari:et,phantom:ut,opera12:ot,win:It,ie3d:Jt,webkit3d:xn,gecko3d:Sn,any3d:An,mobile:Zn,mobileWebkit:Cn,mobileWebkit3d:cn,msPointer:bn,pointer:ir,touch:wr,touchNative:hr,mobileOpera:Kn,mobileGecko:Rr,retina:ms,passiveEvents:Bi,canvas:Vs,svg:is,vml:ss,inlineSvg:Xn,mac:Et,linux:at},In=Yt.msPointer?"MSPointerDown":"pointerdown",Pn=Yt.msPointer?"MSPointerMove":"pointermove",Er=Yt.msPointer?"MSPointerUp":"pointerup",Yn=Yt.msPointer?"MSPointerCancel":"pointercancel",Ct={touchstart:In,touchmove:Pn,touchend:Er,touchcancel:Yn},mn={touchstart:Ki,touchmove:Jn,touchend:Jn,touchcancel:Jn},Hn={},en=!1;function ln(c,y,P){return y==="touchstart"&&Lr(),mn[y]?(P=mn[y].bind(this,P),c.addEventListener(Ct[y],P,!1),P):(console.warn("wrong event specified:",y),p)}function Rn(c,y,P){if(!Ct[y]){console.warn("wrong event specified:",y);return}c.removeEventListener(Ct[y],P,!1)}function vr(c){Hn[c.pointerId]=c}function us(c){Hn[c.pointerId]&&(Hn[c.pointerId]=c)}function En(c){delete Hn[c.pointerId]}function Lr(){en||(document.addEventListener(In,vr,!0),document.addEventListener(Pn,us,!0),document.addEventListener(Er,En,!0),document.addEventListener(Yn,En,!0),en=!0)}function Jn(c,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var P in Hn)y.touches.push(Hn[P]);y.changedTouches=[y],c(y)}}function Ki(c,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&Ar(y),Jn(c,y)}function fi(c){var y={},P,W;for(W in c)P=c[W],y[W]=P&&P.bind?P.bind(c):P;return c=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var pi=200;function $i(c,y){c.addEventListener("dblclick",y);var P=0,W;function de(ke){if(ke.detail!==1){W=ke.detail;return}if(!(ke.pointerType==="mouse"||ke.sourceCapabilities&&!ke.sourceCapabilities.firesTouchEvents)){var ft=vl(ke);if(!(ft.some(function(Zt){return Zt instanceof HTMLLabelElement&&Zt.attributes.for})&&!ft.some(function(Zt){return Zt instanceof HTMLInputElement||Zt instanceof HTMLSelectElement}))){var jt=Date.now();jt-P<=pi?(W++,W===2&&y(fi(ke))):W=1,P=jt}}}return c.addEventListener("click",de),{dblclick:y,simDblclick:de}}function Ai(c,y){c.removeEventListener("dblclick",y.dblclick),c.removeEventListener("click",y.simDblclick)}var Fi=Pa(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ji=Pa(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),os=ji==="webkitTransition"||ji==="OTransition"?ji+"End":"transitionend";function cs(c){return typeof c=="string"?document.getElementById(c):c}function Sr(c,y){var P=c.style[y]||c.currentStyle&&c.currentStyle[y];if((!P||P==="auto")&&document.defaultView){var W=document.defaultView.getComputedStyle(c,null);P=W?W[y]:null}return P==="auto"?null:P}function kr(c,y,P){var W=document.createElement(c);return W.className=y||"",P&&P.appendChild(W),W}function nr(c){var y=c.parentNode;y&&y.removeChild(c)}function to(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function no(c){var y=c.parentNode;y&&y.lastChild!==c&&y.appendChild(c)}function Bs(c){var y=c.parentNode;y&&y.firstChild!==c&&y.insertBefore(c,y.firstChild)}function Ko(c,y){if(c.classList!==void 0)return c.classList.contains(y);var P=di(c);return P.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(P)}function _r(c,y){if(c.classList!==void 0)for(var P=S(y),W=0,de=P.length;W<de;W++)c.classList.add(P[W]);else if(!Ko(c,y)){var ke=di(c);er(c,(ke?ke+" ":"")+y)}}function $r(c,y){c.classList!==void 0?c.classList.remove(y):er(c,m((" "+di(c)+" ").replace(" "+y+" "," ")))}function er(c,y){c.className.baseVal===void 0?c.className=y:c.className.baseVal=y}function di(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function oi(c,y){"opacity"in c.style?c.style.opacity=y:"filter"in c.style&&Hs(c,y)}function Hs(c,y){var P=!1,W="DXImageTransform.Microsoft.Alpha";try{P=c.filters.item(W)}catch{if(y===1)return}y=Math.round(y*100),P?(P.Enabled=y!==100,P.Opacity=y):c.style.filter+=" progid:"+W+"(opacity="+y+")"}function Pa(c){for(var y=document.documentElement.style,P=0;P<c.length;P++)if(c[P]in y)return c[P];return!1}function ha(c,y,P){var W=y||new X(0,0);c.style[Fi]=(Yt.ie3d?"translate("+W.x+"px,"+W.y+"px)":"translate3d("+W.x+"px,"+W.y+"px,0)")+(P?" scale("+P+")":"")}function Zi(c,y){c._leaflet_pos=y,Yt.any3d?ha(c,y):(c.style.left=y.x+"px",c.style.top=y.y+"px")}function Re(c){return c._leaflet_pos||new X(0,0)}var qe,dt,qt;if("onselectstart"in document)qe=function(){Dr(window,"selectstart",Ar)},dt=function(){ai(window,"selectstart",Ar)};else{var pn=Pa(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qe=function(){if(pn){var c=document.documentElement.style;qt=c[pn],c[pn]="none"}},dt=function(){pn&&(document.documentElement.style[pn]=qt,qt=void 0)}}function Vn(){Dr(window,"dragstart",Ar)}function xr(){ai(window,"dragstart",Ar)}var Ti,Ui;function ds(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(Ei(),Ti=c,Ui=c.style.outlineStyle,c.style.outlineStyle="none",Dr(window,"keydown",Ei))}function Ei(){Ti&&(Ti.style.outlineStyle=Ui,Ti=void 0,Ui=void 0,ai(window,"keydown",Ei))}function Dc(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Au(c){var y=c.getBoundingClientRect();return{x:y.width/c.offsetWidth||1,y:y.height/c.offsetHeight||1,boundingClientRect:y}}var Pr={__proto__:null,TRANSFORM:Fi,TRANSITION:ji,TRANSITION_END:os,get:cs,getStyle:Sr,create:kr,remove:nr,empty:to,toFront:no,toBack:Bs,hasClass:Ko,addClass:_r,removeClass:$r,setClass:er,getClass:di,setOpacity:oi,testProp:Pa,setTransform:ha,setPosition:Zi,getPosition:Re,get disableTextSelection(){return qe},get enableTextSelection(){return dt},disableImageDrag:Vn,enableImageDrag:xr,preventOutline:ds,restoreOutline:Ei,getSizedParentNode:Dc,getScale:Au};function Dr(c,y,P,W){if(y&&typeof y=="object")for(var de in y)Rl(c,de,y[de],P);else{y=S(y);for(var ke=0,ft=y.length;ke<ft;ke++)Rl(c,y[ke],P,W)}return this}var fa="_leaflet_events";function ai(c,y,P,W){if(arguments.length===1)Qu(c),delete c[fa];else if(y&&typeof y=="object")for(var de in y)pa(c,de,y[de],P);else if(y=S(y),arguments.length===2)Qu(c,function(jt){return G(y,jt)!==-1});else for(var ke=0,ft=y.length;ke<ft;ke++)pa(c,y[ke],P,W);return this}function Qu(c,y){for(var P in c[fa]){var W=P.split(/\d/)[0];(!y||y(W))&&pa(c,W,null,null,P)}}var Nl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Rl(c,y,P,W){var de=y+l(P)+(W?"_"+l(W):"");if(c[fa]&&c[fa][de])return this;var ke=function(jt){return P.call(W||c,jt||window.event)},ft=ke;!Yt.touchNative&&Yt.pointer&&y.indexOf("touch")===0?ke=ln(c,y,ke):Yt.touch&&y==="dblclick"?ke=$i(c,ke):"addEventListener"in c?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?c.addEventListener(Nl[y]||y,ke,Yt.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(ke=function(jt){jt=jt||window.event,Bl(c,jt)&&ft(jt)},c.addEventListener(Nl[y],ke,!1)):c.addEventListener(y,ft,!1):c.attachEvent("on"+y,ke),c[fa]=c[fa]||{},c[fa][de]=ke}function pa(c,y,P,W,de){de=de||y+l(P)+(W?"_"+l(W):"");var ke=c[fa]&&c[fa][de];if(!ke)return this;!Yt.touchNative&&Yt.pointer&&y.indexOf("touch")===0?Rn(c,y,ke):Yt.touch&&y==="dblclick"?Ai(c,ke):"removeEventListener"in c?c.removeEventListener(Nl[y]||y,ke,!1):c.detachEvent("on"+y,ke),c[fa][de]=null}function ml(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function ec(c){return Rl(c,"wheel",ml),this}function uu(c){return Dr(c,"mousedown touchstart dblclick contextmenu",ml),c._leaflet_disable_click=!0,this}function Ar(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function Yr(c){return Ar(c),ml(c),this}function vl(c){if(c.composedPath)return c.composedPath();for(var y=[],P=c.target;P;)y.push(P),P=P.parentNode;return y}function Ic(c,y){if(!y)return new X(c.clientX,c.clientY);var P=Au(y),W=P.boundingClientRect;return new X((c.clientX-W.left)/P.x-y.clientLeft,(c.clientY-W.top)/P.y-y.clientTop)}var cu=Yt.linux&&Yt.chrome?window.devicePixelRatio:Yt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Tu(c){return Yt.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/cu:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Bl(c,y){var P=y.relatedTarget;if(!P)return!0;try{for(;P&&P!==c;)P=P.parentNode}catch{return!1}return P!==c}var du={__proto__:null,on:Dr,off:ai,stopPropagation:ml,disableScrollPropagation:ec,disableClickPropagation:uu,preventDefault:Ar,stop:Yr,getPropagationPath:vl,getMousePosition:Ic,getWheelDelta:Tu,isExternalTarget:Bl,addListener:Dr,removeListener:ai},Du=Q.extend({run:function(c,y,P,W){this.stop(),this._el=c,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(W||.5,.2),this._startPos=Re(c),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(c){var y=+new Date-this._startTime,P=this._duration*1e3;y<P?this._runFrame(this._easeOut(y/P),c):(this._runFrame(1),this._complete())},_runFrame:function(c,y){var P=this._startPos.add(this._offset.multiplyBy(c));y&&P._round(),Zi(this._el,P),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Jr=Q.extend({options:{crs:ue,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,y){y=E(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(se(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ji&&Yt.any3d&&!Yt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Dr(this._proxy,os,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,y,P){if(y=y===void 0?this._zoom:this._limitZoom(y),c=this._limitCenter(se(c),y,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=i({animate:P.animate},P.zoom),P.pan=i({animate:P.animate,duration:P.duration},P.pan));var W=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,y,P.zoom):this._tryAnimatedPan(c,P.pan);if(W)return clearTimeout(this._sizeTimer),this}return this._resetView(c,y,P.pan&&P.pan.noMoveStart),this},setZoom:function(c,y){return this._loaded?this.setView(this.getCenter(),c,{zoom:y}):(this._zoom=c,this)},zoomIn:function(c,y){return c=c||(Yt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,y)},zoomOut:function(c,y){return c=c||(Yt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,y)},setZoomAround:function(c,y,P){var W=this.getZoomScale(y),de=this.getSize().divideBy(2),ke=c instanceof X?c:this.latLngToContainerPoint(c),ft=ke.subtract(de).multiplyBy(1-1/W),jt=this.containerPointToLatLng(de.add(ft));return this.setView(jt,y,{zoom:P})},_getBoundsCenterZoom:function(c,y){y=y||{},c=c.getBounds?c.getBounds():ye(c);var P=me(y.paddingTopLeft||y.padding||[0,0]),W=me(y.paddingBottomRight||y.padding||[0,0]),de=this.getBoundsZoom(c,!1,P.add(W));if(de=typeof y.maxZoom=="number"?Math.min(y.maxZoom,de):de,de===1/0)return{center:c.getCenter(),zoom:de};var ke=W.subtract(P).divideBy(2),ft=this.project(c.getSouthWest(),de),jt=this.project(c.getNorthEast(),de),Zt=this.unproject(ft.add(jt).divideBy(2).add(ke),de);return{center:Zt,zoom:de}},fitBounds:function(c,y){if(c=ye(c),!c.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(c,y);return this.setView(P.center,P.zoom,y)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,y){return this.setView(c,this._zoom,{pan:y})},panBy:function(c,y){if(c=me(c).round(),y=y||{},!c.x&&!c.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Du,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){_r(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,P,y.duration||.25,y.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,y,P){if(P=P||{},P.animate===!1||!Yt.any3d)return this.setView(c,y,P);this._stop();var W=this.project(this.getCenter()),de=this.project(c),ke=this.getSize(),ft=this._zoom;c=se(c),y=y===void 0?ft:y;var jt=Math.max(ke.x,ke.y),Zt=jt*this.getZoomScale(ft,y),hn=de.distanceTo(W)||1,$n=1.42,lr=$n*$n;function Vr(mi){var co=mi?-1:1,$e=mi?Zt:jt,Bo=Zt*Zt-jt*jt+co*lr*lr*hn*hn,rc=2*$e*lr*hn,Xs=Bo/rc,Wr=Math.sqrt(Xs*Xs+1)-Xs,Gd=Wr<1e-9?-18:Math.log(Wr);return Gd}function Ts(mi){return(Math.exp(mi)-Math.exp(-mi))/2}function hs(mi){return(Math.exp(mi)+Math.exp(-mi))/2}function Zs(mi){return Ts(mi)/hs(mi)}var es=Vr(0);function Ro(mi){return jt*(hs(es)/hs(es+$n*mi))}function cd(mi){return jt*(hs(es)*Zs(es+$n*mi)-Ts(es))/lr}function Ba(mi){return 1-Math.pow(1-mi,1.5)}var ba=Date.now(),sa=(Vr(1)-es)/$n,Ih=P.duration?1e3*P.duration:1e3*sa*.8;function Nu(){var mi=(Date.now()-ba)/Ih,co=Ba(mi)*sa;mi<=1?(this._flyToFrame=V(Nu,this),this._move(this.unproject(W.add(de.subtract(W).multiplyBy(cd(co)/hn)),ft),this.getScaleZoom(jt/Ro(co),ft),{flyTo:!0})):this._move(c,y)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Nu.call(this),this},flyToBounds:function(c,y){var P=this._getBoundsCenterZoom(c,y);return this.flyTo(P.center,P.zoom,y)},setMaxBounds:function(c){return c=ye(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var y=this.options.minZoom;return this.options.minZoom=c,this._loaded&&y!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var y=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&y!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,y){this._enforcingBounds=!0;var P=this.getCenter(),W=this._limitCenter(P,this._zoom,ye(c));return P.equals(W)||this.panTo(W,y),this._enforcingBounds=!1,this},panInside:function(c,y){y=y||{};var P=me(y.paddingTopLeft||y.padding||[0,0]),W=me(y.paddingBottomRight||y.padding||[0,0]),de=this.project(this.getCenter()),ke=this.project(c),ft=this.getPixelBounds(),jt=ae([ft.min.add(P),ft.max.subtract(W)]),Zt=jt.getSize();if(!jt.contains(ke)){this._enforcingBounds=!0;var hn=ke.subtract(jt.getCenter()),$n=jt.extend(ke).getSize().subtract(Zt);de.x+=hn.x<0?-$n.x:$n.x,de.y+=hn.y<0?-$n.y:$n.y,this.panTo(this.unproject(de),y),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=i({animate:!1,pan:!0},c===!0?{animate:!0}:c);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),W=y.divideBy(2).round(),de=P.divideBy(2).round(),ke=W.subtract(de);return!ke.x&&!ke.y?this:(c.animate&&c.pan?this.panBy(ke):(c.pan&&this._rawPanBy(ke),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=i({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),P=o(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,P,c):navigator.geolocation.getCurrentPosition(y,P,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var y=c.code,P=c.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var y=c.coords.latitude,P=c.coords.longitude,W=new J(y,P),de=W.toBounds(c.coords.accuracy*2),ke=this._locateOptions;if(ke.setView){var ft=this.getBoundsZoom(de);this.setView(W,ke.maxZoom?Math.min(ft,ke.maxZoom):ft)}var jt={latlng:W,bounds:de,timestamp:c.timestamp};for(var Zt in c.coords)typeof c.coords[Zt]=="number"&&(jt[Zt]=c.coords[Zt]);this.fire("locationfound",jt)}},addHandler:function(c,y){if(!y)return this;var P=this[c]=new y(this);return this._handlers.push(P),this.options[c]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),nr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)nr(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,y){var P="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),W=kr("div",P,y||this._mapPane);return c&&(this._panes[c]=W),W},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),y=this.unproject(c.getBottomLeft()),P=this.unproject(c.getTopRight());return new ve(y,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,y,P){c=ye(c),P=me(P||[0,0]);var W=this.getZoom()||0,de=this.getMinZoom(),ke=this.getMaxZoom(),ft=c.getNorthWest(),jt=c.getSouthEast(),Zt=this.getSize().subtract(P),hn=ae(this.project(jt,W),this.project(ft,W)).getSize(),$n=Yt.any3d?this.options.zoomSnap:1,lr=Zt.x/hn.x,Vr=Zt.y/hn.y,Ts=y?Math.max(lr,Vr):Math.min(lr,Vr);return W=this.getScaleZoom(Ts,W),$n&&(W=Math.round(W/($n/100))*($n/100),W=y?Math.ceil(W/$n)*$n:Math.floor(W/$n)*$n),Math.max(de,Math.min(ke,W))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,y){var P=this._getTopLeftPoint(c,y);return new We(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,y){var P=this.options.crs;return y=y===void 0?this._zoom:y,P.scale(c)/P.scale(y)},getScaleZoom:function(c,y){var P=this.options.crs;y=y===void 0?this._zoom:y;var W=P.zoom(c*P.scale(y));return isNaN(W)?1/0:W},project:function(c,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(se(c),y)},unproject:function(c,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(me(c),y)},layerPointToLatLng:function(c){var y=me(c).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(c){var y=this.project(se(c))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(se(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(ye(c))},distance:function(c,y){return this.options.crs.distance(se(c),se(y))},containerPointToLayerPoint:function(c){return me(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return me(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var y=this.containerPointToLayerPoint(me(c));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(se(c)))},mouseEventToContainerPoint:function(c){return Ic(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var y=this._container=cs(c);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Dr(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&Yt.any3d,_r(c,"leaflet-container"+(Yt.touch?" leaflet-touch":"")+(Yt.retina?" leaflet-retina":"")+(Yt.ielt9?" leaflet-oldie":"")+(Yt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=Sr(c,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Zi(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_r(c.markerPane,"leaflet-zoom-hide"),_r(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,y,P){Zi(this._mapPane,new X(0,0));var W=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var de=this._zoom!==y;this._moveStart(de,P)._move(c,y)._moveEnd(de),this.fire("viewreset"),W&&this.fire("load")},_moveStart:function(c,y){return c&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(c,y,P,W){y===void 0&&(y=this._zoom);var de=this._zoom!==y;return this._zoom=y,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),W?P&&P.pinch&&this.fire("zoom",P):((de||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Zi(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[l(this._container)]=this;var y=c?ai:Dr;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),Yt.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,y){for(var P=[],W,de=y==="mouseout"||y==="mouseover",ke=c.target||c.srcElement,ft=!1;ke;){if(W=this._targets[l(ke)],W&&(y==="click"||y==="preclick")&&this._draggableMoved(W)){ft=!0;break}if(W&&W.listens(y,!0)&&(de&&!Bl(ke,c)||(P.push(W),de))||ke===this._container)break;ke=ke.parentNode}return!P.length&&!ft&&!de&&this.listens(y,!0)&&(P=[this]),P},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var y=c.target||c.srcElement;if(!(!this._loaded||y._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(y))){var P=c.type;P==="mousedown"&&ds(y),this._fireDOMEvent(c,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,y,P){if(c.type==="click"){var W=i({},c);W.type="preclick",this._fireDOMEvent(W,W.type,P)}var de=this._findEventTargets(c,y);if(P){for(var ke=[],ft=0;ft<P.length;ft++)P[ft].listens(y,!0)&&ke.push(P[ft]);de=ke.concat(de)}if(de.length){y==="contextmenu"&&Ar(c);var jt=de[0],Zt={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var hn=jt.getLatLng&&(!jt._radius||jt._radius<=10);Zt.containerPoint=hn?this.latLngToContainerPoint(jt.getLatLng()):this.mouseEventToContainerPoint(c),Zt.layerPoint=this.containerPointToLayerPoint(Zt.containerPoint),Zt.latlng=hn?jt.getLatLng():this.layerPointToLatLng(Zt.layerPoint)}for(ft=0;ft<de.length;ft++)if(de[ft].fire(y,Zt,!0),Zt.originalEvent._stopped||de[ft].options.bubblingMouseEvents===!1&&G(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,y=this._handlers.length;c<y;c++)this._handlers[c].disable()},whenReady:function(c,y){return this._loaded?c.call(y||this,{target:this}):this.on("load",c,y),this},_getMapPanePos:function(){return Re(this._mapPane)||new X(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,y){var P=c&&y!==void 0?this._getNewPixelOrigin(c,y):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,y){var P=this.getSize()._divideBy(2);return this.project(c,y)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,y,P){var W=this._getNewPixelOrigin(P,y);return this.project(c,y)._subtract(W)},_latLngBoundsToNewLayerBounds:function(c,y,P){var W=this._getNewPixelOrigin(P,y);return ae([this.project(c.getSouthWest(),y)._subtract(W),this.project(c.getNorthWest(),y)._subtract(W),this.project(c.getSouthEast(),y)._subtract(W),this.project(c.getNorthEast(),y)._subtract(W)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,y,P){if(!P)return c;var W=this.project(c,y),de=this.getSize().divideBy(2),ke=new We(W.subtract(de),W.add(de)),ft=this._getBoundsOffset(ke,P,y);return Math.abs(ft.x)<=1&&Math.abs(ft.y)<=1?c:this.unproject(W.add(ft),y)},_limitOffset:function(c,y){if(!y)return c;var P=this.getPixelBounds(),W=new We(P.min.add(c),P.max.add(c));return c.add(this._getBoundsOffset(W,y))},_getBoundsOffset:function(c,y,P){var W=ae(this.project(y.getNorthEast(),P),this.project(y.getSouthWest(),P)),de=W.min.subtract(c.min),ke=W.max.subtract(c.max),ft=this._rebound(de.x,-ke.x),jt=this._rebound(de.y,-ke.y);return new X(ft,jt)},_rebound:function(c,y){return c+y>0?Math.round(c-y)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(y))},_limitZoom:function(c){var y=this.getMinZoom(),P=this.getMaxZoom(),W=Yt.any3d?this.options.zoomSnap:1;return W&&(c=Math.round(c/W)*W),Math.max(y,Math.min(P,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$r(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,y){var P=this._getCenterOffset(c)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,y),!0)},_createAnimProxy:function(){var c=this._proxy=kr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(y){var P=Fi,W=this._proxy.style[P];ha(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),W===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){nr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),y=this.getZoom();ha(this._proxy,this.project(c,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,y,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var W=this.getZoomScale(y),de=this._getCenterOffset(c)._divideBy(1-1/W);return P.animate!==!0&&!this.getSize().contains(de)?!1:(V(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(c,y,!0)},this),!0)},_animateZoom:function(c,y,P,W){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=y,_r(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:y,noUpdate:W}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$r(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ys(c,y){return new Jr(c,y)}var gr=$.extend({options:{position:"topright"},initialize:function(c){E(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var y=this._map;return y&&y.removeControl(this),this.options.position=c,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var y=this._container=this.onAdd(c),P=this.getPosition(),W=c._controlCorners[P];return _r(y,"leaflet-control"),P.indexOf("bottom")!==-1?W.insertBefore(y,W.firstChild):W.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(nr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),_s=function(c){return new gr(c)};Jr.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},y="leaflet-",P=this._controlContainer=kr("div",y+"control-container",this._container);function W(de,ke){var ft=y+de+" "+y+ke;c[de+ke]=kr("div",ft,P)}W("top","left"),W("top","right"),W("bottom","left"),W("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)nr(this._controlCorners[c]);nr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Fl=gr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,y,P,W){return P<W?-1:W<P?1:0}},initialize:function(c,y,P){E(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var W in c)this._addLayer(c[W],W);for(W in y)this._addLayer(y[W],W,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return gr.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,y){return this._addLayer(c,y),this._map?this._update():this},addOverlay:function(c,y){return this._addLayer(c,y,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(c));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){_r(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(_r(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):$r(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $r(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",y=this._container=kr("div",c),P=this.options.collapsed;y.setAttribute("aria-haspopup",!0),uu(y),ec(y);var W=this._section=kr("section",c+"-list");P&&(this._map.on("click",this.collapse,this),Dr(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var de=this._layersLink=kr("a",c+"-toggle",y);de.href="#",de.title="Layers",de.setAttribute("role","button"),Dr(de,{keydown:function(ke){ke.keyCode===13&&this._expandSafely()},click:function(ke){Ar(ke),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=kr("div",c+"-base",W),this._separator=kr("div",c+"-separator",W),this._overlaysList=kr("div",c+"-overlays",W),y.appendChild(W)},_getLayer:function(c){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===c)return this._layers[y]},_addLayer:function(c,y,P){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:y,overlay:P}),this.options.sortLayers&&this._layers.sort(o(function(W,de){return this.options.sortFunction(W.layer,de.layer,W.name,de.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;to(this._baseLayersList),to(this._overlaysList),this._layerControlInputs=[];var c,y,P,W,de=0;for(P=0;P<this._layers.length;P++)W=this._layers[P],this._addItem(W),y=y||W.overlay,c=c||!W.overlay,de+=W.overlay?0:1;return this.options.hideSingleBase&&(c=c&&de>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=y&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var y=this._getLayer(l(c.target)),P=y.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;P&&this._map.fire(P,y)},_createRadioElement:function(c,y){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(y?' checked="checked"':"")+"/>",W=document.createElement("div");return W.innerHTML=P,W.firstChild},_addItem:function(c){var y=document.createElement("label"),P=this._map.hasLayer(c.layer),W;c.overlay?(W=document.createElement("input"),W.type="checkbox",W.className="leaflet-control-layers-selector",W.defaultChecked=P):W=this._createRadioElement("leaflet-base-layers_"+l(this),P),this._layerControlInputs.push(W),W.layerId=l(c.layer),Dr(W,"click",this._onInputClick,this);var de=document.createElement("span");de.innerHTML=" "+c.name;var ke=document.createElement("span");y.appendChild(ke),ke.appendChild(W),ke.appendChild(de);var ft=c.overlay?this._overlaysList:this._baseLayersList;return ft.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,y,P,W=[],de=[];this._handlingClick=!0;for(var ke=c.length-1;ke>=0;ke--)y=c[ke],P=this._getLayer(y.layerId).layer,y.checked?W.push(P):y.checked||de.push(P);for(ke=0;ke<de.length;ke++)this._map.hasLayer(de[ke])&&this._map.removeLayer(de[ke]);for(ke=0;ke<W.length;ke++)this._map.hasLayer(W[ke])||this._map.addLayer(W[ke]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,y,P,W=this._map.getZoom(),de=c.length-1;de>=0;de--)y=c[de],P=this._getLayer(y.layerId).layer,y.disabled=P.options.minZoom!==void 0&&W<P.options.minZoom||P.options.maxZoom!==void 0&&W>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,Dr(c,"click",Ar),this.expand();var y=this;setTimeout(function(){ai(c,"click",Ar),y._preventClick=!1})}}),Ha=function(c,y,P){return new Fl(c,y,P)},Xi=gr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var y="leaflet-control-zoom",P=kr("div",y+" leaflet-bar"),W=this.options;return this._zoomInButton=this._createButton(W.zoomInText,W.zoomInTitle,y+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(W.zoomOutText,W.zoomOutTitle,y+"-out",P,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,y,P,W,de){var ke=kr("a",P,W);return ke.innerHTML=c,ke.href="#",ke.title=y,ke.setAttribute("role","button"),ke.setAttribute("aria-label",y),uu(ke),Dr(ke,"click",Yr),Dr(ke,"click",de,this),Dr(ke,"click",this._refocusOnMap,this),ke},_updateDisabled:function(){var c=this._map,y="leaflet-disabled";$r(this._zoomInButton,y),$r(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(_r(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(_r(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});Jr.mergeOptions({zoomControl:!0}),Jr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Xi,this.addControl(this.zoomControl))});var Iu=function(c){return new Xi(c)},Ma=gr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var y="leaflet-control-scale",P=kr("div",y),W=this.options;return this._addScales(W,y+"-line",P),c.on(W.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),P},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,y,P){c.metric&&(this._mScale=kr("div",y,P)),c.imperial&&(this._iScale=kr("div",y,P))},_update:function(){var c=this._map,y=c.getSize().y/2,P=c.distance(c.containerPointToLatLng([0,y]),c.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(P)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var y=this._getRoundNum(c),P=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,P,y/c)},_updateImperial:function(c){var y=c*3.2808399,P,W,de;y>5280?(P=y/5280,W=this._getRoundNum(P),this._updateScale(this._iScale,W+" mi",W/P)):(de=this._getRoundNum(y),this._updateScale(this._iScale,de+" ft",de/y))},_updateScale:function(c,y,P){c.style.width=Math.round(this.options.maxWidth*P)+"px",c.innerHTML=y},_getRoundNum:function(c){var y=Math.pow(10,(Math.floor(c)+"").length-1),P=c/y;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,y*P}}),hu=function(c){return new Ma(c)},fu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ra=gr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Yt.inlineSvg?fu+" ":"")+"Leaflet</a>"},initialize:function(c){E(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=kr("div","leaflet-control-attribution"),uu(this._container);for(var y in c._layers)c._layers[y].getAttribution&&this.addAttribution(c._layers[y].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var y in this._attributions)this._attributions[y]&&c.push(y);var P=[];this.options.prefix&&P.push(this.options.prefix),c.length&&P.push(c.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});Jr.mergeOptions({attributionControl:!0}),Jr.addInitHook(function(){this.options.attributionControl&&new ra().addTo(this)});var pu=function(c){return new ra(c)};gr.Layers=Fl,gr.Zoom=Xi,gr.Scale=Ma,gr.Attribution=ra,_s.layers=Ha,_s.zoom=Iu,_s.scale=hu,_s.attribution=pu;var bi=$.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bi.addTo=function(c,y){return c.addHandler(y,this),this};var Oc={Events:B},Gs=Yt.touch?"touchstart mousedown":"mousedown",ga=Q.extend({options:{clickTolerance:3},initialize:function(c,y,P,W){E(this,W),this._element=c,this._dragStartTarget=y||c,this._preventOutline=P},enable:function(){this._enabled||(Dr(this._dragStartTarget,Gs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ga._dragging===this&&this.finishDrag(!0),ai(this._dragStartTarget,Gs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!Ko(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){ga._dragging===this&&this.finishDrag();return}if(!(ga._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(ga._dragging=this,this._preventOutline&&ds(this._element),Vn(),qe(),!this._moving)){this.fire("down");var y=c.touches?c.touches[0]:c,P=Dc(this._element);this._startPoint=new X(y.clientX,y.clientY),this._startPos=Re(this._element),this._parentScale=Au(P);var W=c.type==="mousedown";Dr(document,W?"mousemove":"touchmove",this._onMove,this),Dr(document,W?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var y=c.touches&&c.touches.length===1?c.touches[0]:c,P=new X(y.clientX,y.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,Ar(c),this._moved||(this.fire("dragstart"),this._moved=!0,_r(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_r(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Zi(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){$r(document.body,"leaflet-dragging"),this._lastTarget&&($r(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ai(document,"mousemove touchmove",this._onMove,this),ai(document,"mouseup touchend touchcancel",this._onUp,this),xr(),dt();var y=this._moved&&this._moving;this._moving=!1,ga._dragging=!1,y&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function gu(c,y,P){var W,de=[1,4,2,8],ke,ft,jt,Zt,hn,$n,lr,Vr;for(ke=0,$n=c.length;ke<$n;ke++)c[ke]._code=Kt(c[ke],y);for(jt=0;jt<4;jt++){for(lr=de[jt],W=[],ke=0,$n=c.length,ft=$n-1;ke<$n;ft=ke++)Zt=c[ke],hn=c[ft],Zt._code&lr?hn._code&lr||(Vr=Ot(hn,Zt,lr,y,P),Vr._code=Kt(Vr,y),W.push(Vr)):(hn._code&lr&&(Vr=Ot(hn,Zt,lr,y,P),Vr._code=Kt(Vr,y),W.push(Vr)),W.push(Zt));c=W}return c}function ma(c,y){var P,W,de,ke,ft,jt,Zt,hn,$n;if(!c||c.length===0)throw new Error("latlngs not passed");Gn(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var lr=se([0,0]),Vr=ye(c),Ts=Vr.getNorthWest().distanceTo(Vr.getSouthWest())*Vr.getNorthEast().distanceTo(Vr.getNorthWest());Ts<1700&&(lr=jl(c));var hs=c.length,Zs=[];for(P=0;P<hs;P++){var es=se(c[P]);Zs.push(y.project(se([es.lat-lr.lat,es.lng-lr.lng])))}for(jt=Zt=hn=0,P=0,W=hs-1;P<hs;W=P++)de=Zs[P],ke=Zs[W],ft=de.y*ke.x-ke.y*de.x,Zt+=(de.x+ke.x)*ft,hn+=(de.y+ke.y)*ft,jt+=ft*3;jt===0?$n=Zs[0]:$n=[Zt/jt,hn/jt];var Ro=y.unproject(me($n));return se([Ro.lat+lr.lat,Ro.lng+lr.lng])}function jl(c){for(var y=0,P=0,W=0,de=0;de<c.length;de++){var ke=se(c[de]);y+=ke.lat,P+=ke.lng,W++}return se([y/W,P/W])}var zl={__proto__:null,clipPolygon:gu,polygonCenter:ma,centroid:jl};function wi(c,y){if(!y||!c.length)return c.slice();var P=y*y;return c=Ce(c,P),c=bs(c,P),c}function Zo(c,y,P){return Math.sqrt(zn(c,y,P,!0))}function Ga(c,y,P){return zn(c,y,P)}function bs(c,y){var P=c.length,W=typeof Uint8Array<"u"?Uint8Array:Array,de=new W(P);de[0]=de[P-1]=1,z(c,de,y,0,P-1);var ke,ft=[];for(ke=0;ke<P;ke++)de[ke]&&ft.push(c[ke]);return ft}function z(c,y,P,W,de){var ke=0,ft,jt,Zt;for(jt=W+1;jt<=de-1;jt++)Zt=zn(c[jt],c[W],c[de],!0),Zt>ke&&(ft=jt,ke=Zt);ke>P&&(y[ft]=1,z(c,y,P,W,ft),z(c,y,P,ft,de))}function Ce(c,y){for(var P=[c[0]],W=1,de=0,ke=c.length;W<ke;W++)vn(c[W],c[de])>y&&(P.push(c[W]),de=W);return de<ke-1&&P.push(c[ke-1]),P}var nt;function mt(c,y,P,W,de){var ke=W?nt:Kt(c,P),ft=Kt(y,P),jt,Zt,hn;for(nt=ft;;){if(!(ke|ft))return[c,y];if(ke&ft)return!1;jt=ke||ft,Zt=Ot(c,y,jt,P,de),hn=Kt(Zt,P),jt===ke?(c=Zt,ke=hn):(y=Zt,ft=hn)}}function Ot(c,y,P,W,de){var ke=y.x-c.x,ft=y.y-c.y,jt=W.min,Zt=W.max,hn,$n;return P&8?(hn=c.x+ke*(Zt.y-c.y)/ft,$n=Zt.y):P&4?(hn=c.x+ke*(jt.y-c.y)/ft,$n=jt.y):P&2?(hn=Zt.x,$n=c.y+ft*(Zt.x-c.x)/ke):P&1&&(hn=jt.x,$n=c.y+ft*(jt.x-c.x)/ke),new X(hn,$n,de)}function Kt(c,y){var P=0;return c.x<y.min.x?P|=1:c.x>y.max.x&&(P|=2),c.y<y.min.y?P|=4:c.y>y.max.y&&(P|=8),P}function vn(c,y){var P=y.x-c.x,W=y.y-c.y;return P*P+W*W}function zn(c,y,P,W){var de=y.x,ke=y.y,ft=P.x-de,jt=P.y-ke,Zt=ft*ft+jt*jt,hn;return Zt>0&&(hn=((c.x-de)*ft+(c.y-ke)*jt)/Zt,hn>1?(de=P.x,ke=P.y):hn>0&&(de+=ft*hn,ke+=jt*hn)),ft=c.x-de,jt=c.y-ke,W?ft*ft+jt*jt:new X(de,ke)}function Gn(c){return!R(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function fr(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Gn(c)}function Cr(c,y){var P,W,de,ke,ft,jt,Zt,hn;if(!c||c.length===0)throw new Error("latlngs not passed");Gn(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var $n=se([0,0]),lr=ye(c),Vr=lr.getNorthWest().distanceTo(lr.getSouthWest())*lr.getNorthEast().distanceTo(lr.getNorthWest());Vr<1700&&($n=jl(c));var Ts=c.length,hs=[];for(P=0;P<Ts;P++){var Zs=se(c[P]);hs.push(y.project(se([Zs.lat-$n.lat,Zs.lng-$n.lng])))}for(P=0,W=0;P<Ts-1;P++)W+=hs[P].distanceTo(hs[P+1])/2;if(W===0)hn=hs[0];else for(P=0,ke=0;P<Ts-1;P++)if(ft=hs[P],jt=hs[P+1],de=ft.distanceTo(jt),ke+=de,ke>W){Zt=(ke-W)/de,hn=[jt.x-Zt*(jt.x-ft.x),jt.y-Zt*(jt.y-ft.y)];break}var es=y.unproject(me(hn));return se([es.lat+$n.lat,es.lng+$n.lng])}var Hr={__proto__:null,simplify:wi,pointToSegmentDistance:Zo,closestPointOnSegment:Ga,clipSegment:mt,_getEdgeIntersection:Ot,_getBitCode:Kt,_sqClosestPointOnSegment:zn,isFlat:Gn,_flat:fr,polylineCenter:Cr},Wi={project:function(c){return new X(c.lng,c.lat)},unproject:function(c){return new J(c.y,c.x)},bounds:new We([-180,-90],[180,90])},gi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new We([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var y=Math.PI/180,P=this.R,W=c.lat*y,de=this.R_MINOR/P,ke=Math.sqrt(1-de*de),ft=ke*Math.sin(W),jt=Math.tan(Math.PI/4-W/2)/Math.pow((1-ft)/(1+ft),ke/2);return W=-P*Math.log(Math.max(jt,1e-10)),new X(c.lng*y*P,W)},unproject:function(c){for(var y=180/Math.PI,P=this.R,W=this.R_MINOR/P,de=Math.sqrt(1-W*W),ke=Math.exp(-c.y/P),ft=Math.PI/2-2*Math.atan(ke),jt=0,Zt=.1,hn;jt<15&&Math.abs(Zt)>1e-7;jt++)hn=de*Math.sin(ft),hn=Math.pow((1-hn)/(1+hn),de/2),Zt=Math.PI/2-2*Math.atan(ke*hn)-ft,ft+=Zt;return new J(ft*y,c.x*y/P)}},xi={__proto__:null,LonLat:Wi,Mercator:gi,SphericalMercator:Oe},ws=i({},ie,{code:"EPSG:3395",projection:gi,transformation:function(){var c=.5/(Math.PI*gi.R);return Be(c,.5,-c,.5)}()}),Ms=i({},ie,{code:"EPSG:4326",projection:Wi,transformation:Be(1/180,1,-1/180,.5)}),Xo=i({},fe,{projection:Wi,transformation:Be(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,y){var P=y.lng-c.lng,W=y.lat-c.lat;return Math.sqrt(P*P+W*W)},infinite:!0});fe.Earth=ie,fe.EPSG3395=ws,fe.EPSG3857=ue,fe.EPSG900913=re,fe.EPSG4326=Ms,fe.Simple=Xo;var Gr=Q.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[l(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[l(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var y=c.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var P=this.getEvents();y.on(P,this),this.once("remove",function(){y.off(P,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});Jr.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(c);return this._layers[y]?this:(this._layers[y]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var y=l(c);return this._layers[y]?(this._loaded&&c.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return l(c)in this._layers},eachLayer:function(c,y){for(var P in this._layers)c.call(y,this._layers[P]);return this},_addLayers:function(c){c=c?R(c)?c:[c]:[];for(var y=0,P=c.length;y<P;y++)this.addLayer(c[y])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[l(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var y=l(c);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,y=-1/0,P=this._getZoomSpan();for(var W in this._zoomBoundLayers){var de=this._zoomBoundLayers[W].options;c=de.minZoom===void 0?c:Math.min(c,de.minZoom),y=de.maxZoom===void 0?y:Math.max(y,de.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=c===1/0?void 0:c,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ro=Gr.extend({initialize:function(c,y){E(this,y),this._layers={};var P,W;if(c)for(P=0,W=c.length;P<W;P++)this.addLayer(c[P])},addLayer:function(c){var y=this.getLayerId(c);return this._layers[y]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var y=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(c){var y=typeof c=="number"?c:this.getLayerId(c);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var y=Array.prototype.slice.call(arguments,1),P,W;for(P in this._layers)W=this._layers[P],W[c]&&W[c].apply(W,y);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,y){for(var P in this._layers)c.call(y,this._layers[P]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return l(c)}}),$l=function(c,y){return new ro(c,y)},yo=ro.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),ro.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),ro.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new ve;for(var y in this._layers){var P=this._layers[y];c.extend(P.getBounds?P.getBounds():P.getLatLng())}return c}}),Ou=function(c,y){return new yo(c,y)},ka=$.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){E(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,y){var P=this._getIconUrl(c);if(!P){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var W=this._createImg(P,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(W,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(W.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),W},_setIconStyles:function(c,y){var P=this.options,W=P[y+"Size"];typeof W=="number"&&(W=[W,W]);var de=me(W),ke=me(y==="shadow"&&P.shadowAnchor||P.iconAnchor||de&&de.divideBy(2,!0));c.className="leaflet-marker-"+y+" "+(P.className||""),ke&&(c.style.marginLeft=-ke.x+"px",c.style.marginTop=-ke.y+"px"),de&&(c.style.width=de.x+"px",c.style.height=de.y+"px")},_createImg:function(c,y){return y=y||document.createElement("img"),y.src=c,y},_getIconUrl:function(c){return Yt.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function tc(c){return new ka(c)}var yl=ka.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof yl.imagePath!="string"&&(yl.imagePath=this._detectIconPath()),(this.options.imagePath||yl.imagePath)+ka.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var y=function(P,W,de){var ke=W.exec(P);return ke&&ke[de]};return c=y(c,/^url\((['"])?(.+)\1\)$/,2),c&&y(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=kr("div","leaflet-default-icon-path",document.body),y=Sr(c,"background-image")||Sr(c,"backgroundImage");if(document.body.removeChild(c),y=this._stripUrl(y),y)return y;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),_l=bi.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new ga(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_r(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$r(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var y=this._marker,P=y._map,W=this._marker.options.autoPanSpeed,de=this._marker.options.autoPanPadding,ke=Re(y._icon),ft=P.getPixelBounds(),jt=P.getPixelOrigin(),Zt=ae(ft.min._subtract(jt).add(de),ft.max._subtract(jt).subtract(de));if(!Zt.contains(ke)){var hn=me((Math.max(Zt.max.x,ke.x)-Zt.max.x)/(ft.max.x-Zt.max.x)-(Math.min(Zt.min.x,ke.x)-Zt.min.x)/(ft.min.x-Zt.min.x),(Math.max(Zt.max.y,ke.y)-Zt.max.y)/(ft.max.y-Zt.max.y)-(Math.min(Zt.min.y,ke.y)-Zt.min.y)/(ft.min.y-Zt.min.y)).multiplyBy(W);P.panBy(hn,{animate:!1}),this._draggable._newPos._add(hn),this._draggable._startPos._add(hn),Zi(y._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=V(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,c)))},_onDrag:function(c){var y=this._marker,P=y._shadow,W=Re(y._icon),de=y._map.layerPointToLatLng(W);P&&Zi(P,W),y._latlng=de,c.latlng=de,c.oldLatLng=this._oldLatLng,y.fire("move",c).fire("drag",c)},_onDragEnd:function(c){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),ks=Gr.extend({options:{icon:new yl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,y){E(this,y),this._latlng=se(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var y=this._latlng;return this._latlng=se(c),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=c.icon.createIcon(this._icon),W=!1;P!==this._icon&&(this._icon&&this._removeIcon(),W=!0,c.title&&(P.title=c.title),P.tagName==="IMG"&&(P.alt=c.alt||"")),_r(P,y),c.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dr(P,"focus",this._panOnFocus,this);var de=c.icon.createShadow(this._shadow),ke=!1;de!==this._shadow&&(this._removeShadow(),ke=!0),de&&(_r(de,y),de.alt=""),this._shadow=de,c.opacity<1&&this._updateOpacity(),W&&this.getPane().appendChild(this._icon),this._initInteraction(),de&&ke&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ai(this._icon,"focus",this._panOnFocus,this),nr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&nr(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Zi(this._icon,c),this._shadow&&Zi(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var y=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(_r(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),_l)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new _l(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&oi(this._icon,c),this._shadow&&oi(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var y=this.options.icon.options,P=y.iconSize?me(y.iconSize):me(0,0),W=y.iconAnchor?me(y.iconAnchor):me(0,0);c.panInside(this._latlng,{paddingTopLeft:W,paddingBottomRight:P.subtract(W)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Aa(c,y){return new ks(c,y)}var Jo=Gr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return E(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Io=Jo.extend({options:{fill:!0,radius:10},initialize:function(c,y){E(this,y),this._latlng=se(c),this._radius=this.options.radius},setLatLng:function(c){var y=this._latlng;return this._latlng=se(c),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var y=c&&c.radius||this._radius;return Jo.prototype.setStyle.call(this,c),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,y=this._radiusY||c,P=this._clickTolerance(),W=[c+P,y+P];this._pxBounds=new We(this._point.subtract(W),this._point.add(W))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ul(c,y){return new Io(c,y)}var io=Io.extend({initialize:function(c,y,P){if(typeof y=="number"&&(y=i({},P,{radius:y})),E(this,y),this._latlng=se(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new ve(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:Jo.prototype.setStyle,_project:function(){var c=this._latlng.lng,y=this._latlng.lat,P=this._map,W=P.options.crs;if(W.distance===ie.distance){var de=Math.PI/180,ke=this._mRadius/ie.R/de,ft=P.project([y+ke,c]),jt=P.project([y-ke,c]),Zt=ft.add(jt).divideBy(2),hn=P.unproject(Zt).lat,$n=Math.acos((Math.cos(ke*de)-Math.sin(y*de)*Math.sin(hn*de))/(Math.cos(y*de)*Math.cos(hn*de)))/de;(isNaN($n)||$n===0)&&($n=ke/Math.cos(Math.PI/180*y)),this._point=Zt.subtract(P.getPixelOrigin()),this._radius=isNaN($n)?0:Zt.x-P.project([hn,c-$n]).x,this._radiusY=Zt.y-ft.y}else{var lr=W.unproject(W.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(lr).x}this._updateBounds()}});function _o(c,y,P){return new io(c,y,P)}var bo=Jo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,y){E(this,y),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var y=1/0,P=null,W=zn,de,ke,ft=0,jt=this._parts.length;ft<jt;ft++)for(var Zt=this._parts[ft],hn=1,$n=Zt.length;hn<$n;hn++){de=Zt[hn-1],ke=Zt[hn];var lr=W(c,de,ke,!0);lr<y&&(y=lr,P=W(c,de,ke))}return P&&(P.distance=Math.sqrt(y)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Cr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,y){return y=y||this._defaultShape(),c=se(c),y.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new ve,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return Gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var y=[],P=Gn(c),W=0,de=c.length;W<de;W++)P?(y[W]=se(c[W]),this._bounds.extend(y[W])):y[W]=this._convertLatLngs(c[W]);return y},_project:function(){var c=new We;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),y=new X(c,c);this._rawPxBounds&&(this._pxBounds=new We([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(c,y,P){var W=c[0]instanceof J,de=c.length,ke,ft;if(W){for(ft=[],ke=0;ke<de;ke++)ft[ke]=this._map.latLngToLayerPoint(c[ke]),P.extend(ft[ke]);y.push(ft)}else for(ke=0;ke<de;ke++)this._projectLatlngs(c[ke],y,P)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,P,W,de,ke,ft,jt,Zt;for(P=0,de=0,ke=this._rings.length;P<ke;P++)for(Zt=this._rings[P],W=0,ft=Zt.length;W<ft-1;W++)jt=mt(Zt[W],Zt[W+1],c,W,!0),jt&&(y[de]=y[de]||[],y[de].push(jt[0]),(jt[1]!==Zt[W+1]||W===ft-2)&&(y[de].push(jt[1]),de++))}},_simplifyPoints:function(){for(var c=this._parts,y=this.options.smoothFactor,P=0,W=c.length;P<W;P++)c[P]=wi(c[P],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,y){var P,W,de,ke,ft,jt,Zt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(P=0,ke=this._parts.length;P<ke;P++)for(jt=this._parts[P],W=0,ft=jt.length,de=ft-1;W<ft;de=W++)if(!(!y&&W===0)&&Zo(c,jt[de],jt[W])<=Zt)return!0;return!1}});function Nc(c,y){return new bo(c,y)}bo._flat=fr;var Fs=bo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ma(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var y=bo.prototype._convertLatLngs.call(this,c),P=y.length;return P>=2&&y[0]instanceof J&&y[0].equals(y[P-1])&&y.pop(),y},_setLatLngs:function(c){bo.prototype._setLatLngs.call(this,c),Gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,y=this.options.weight,P=new X(y,y);if(c=new We(c.min.subtract(P),c.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var W=0,de=this._rings.length,ke;W<de;W++)ke=gu(this._rings[W],c,!0),ke.length&&this._parts.push(ke)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var y=!1,P,W,de,ke,ft,jt,Zt,hn;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(ke=0,Zt=this._parts.length;ke<Zt;ke++)for(P=this._parts[ke],ft=0,hn=P.length,jt=hn-1;ft<hn;jt=ft++)W=P[ft],de=P[jt],W.y>c.y!=de.y>c.y&&c.x<(de.x-W.x)*(c.y-W.y)/(de.y-W.y)+W.x&&(y=!y);return y||bo.prototype._containsPoint.call(this,c,!0)}});function Wa(c,y){return new Fs(c,y)}var so=yo.extend({initialize:function(c,y){E(this,y),this._layers={},c&&this.addData(c)},addData:function(c){var y=R(c)?c:c.features,P,W,de;if(y){for(P=0,W=y.length;P<W;P++)de=y[P],(de.geometries||de.geometry||de.features||de.coordinates)&&this.addData(de);return this}var ke=this.options;if(ke.filter&&!ke.filter(c))return this;var ft=oo(c,ke);return ft?(ft.feature=lo(c),ft.defaultOptions=ft.options,this.resetStyle(ft),ke.onEachFeature&&ke.onEachFeature(c,ft),this.addLayer(ft)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=i({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(y){this._setLayerStyle(y,c)},this)},_setLayerStyle:function(c,y){c.setStyle&&(typeof y=="function"&&(y=y(c.feature)),c.setStyle(y))}});function oo(c,y){var P=c.type==="Feature"?c.geometry:c,W=P?P.coordinates:null,de=[],ke=y&&y.pointToLayer,ft=y&&y.coordsToLatLng||Ya,jt,Zt,hn,$n;if(!W&&!P)return null;switch(P.type){case"Point":return jt=ft(W),qa(ke,c,jt,y);case"MultiPoint":for(hn=0,$n=W.length;hn<$n;hn++)jt=ft(W[hn]),de.push(qa(ke,c,jt,y));return new yo(de);case"LineString":case"MultiLineString":return Zt=ao(W,P.type==="LineString"?0:1,ft),new bo(Zt,y);case"Polygon":case"MultiPolygon":return Zt=ao(W,P.type==="Polygon"?1:2,ft),new Fs(Zt,y);case"GeometryCollection":for(hn=0,$n=P.geometries.length;hn<$n;hn++){var lr=oo({geometry:P.geometries[hn],type:"Feature",properties:c.properties},y);lr&&de.push(lr)}return new yo(de);case"FeatureCollection":for(hn=0,$n=P.features.length;hn<$n;hn++){var Vr=oo(P.features[hn],y);Vr&&de.push(Vr)}return new yo(de);default:throw new Error("Invalid GeoJSON object.")}}function qa(c,y,P,W){return c?c(y,P):new ks(P,W&&W.markersInheritOptions&&W)}function Ya(c){return new J(c[1],c[0],c[2])}function ao(c,y,P){for(var W=[],de=0,ke=c.length,ft;de<ke;de++)ft=y?ao(c[de],y-1,P):(P||Ya)(c[de]),W.push(ft);return W}function Ws(c,y){return c=se(c),c.alt!==void 0?[v(c.lng,y),v(c.lat,y),v(c.alt,y)]:[v(c.lng,y),v(c.lat,y)]}function Ta(c,y,P,W){for(var de=[],ke=0,ft=c.length;ke<ft;ke++)de.push(y?Ta(c[ke],Gn(c[ke])?0:y-1,P,W):Ws(c[ke],W));return!y&&P&&de.length>0&&de.push(de[0].slice()),de}function Qo(c,y){return c.feature?i({},c.feature,{geometry:y}):lo(y)}function lo(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var kt={toGeoJSON:function(c){return Qo(this,{type:"Point",coordinates:Ws(this.getLatLng(),c)})}};ks.include(kt),io.include(kt),Io.include(kt),bo.include({toGeoJSON:function(c){var y=!Gn(this._latlngs),P=Ta(this._latlngs,y?1:0,!1,c);return Qo(this,{type:(y?"Multi":"")+"LineString",coordinates:P})}}),Fs.include({toGeoJSON:function(c){var y=!Gn(this._latlngs),P=y&&!Gn(this._latlngs[0]),W=Ta(this._latlngs,P?2:y?1:0,!0,c);return y||(W=[W]),Qo(this,{type:(P?"Multi":"")+"Polygon",coordinates:W})}}),ro.include({toMultiPoint:function(c){var y=[];return this.eachLayer(function(P){y.push(P.toGeoJSON(c).geometry.coordinates)}),Qo(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(c){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(c);var P=y==="GeometryCollection",W=[];return this.eachLayer(function(de){if(de.toGeoJSON){var ke=de.toGeoJSON(c);if(P)W.push(ke.geometry);else{var ft=lo(ke);ft.type==="FeatureCollection"?W.push.apply(W,ft.features):W.push(ft)}}}),P?Qo(this,{geometries:W,type:"GeometryCollection"}):{type:"FeatureCollection",features:W}}});function nn(c,y){return new so(c,y)}var $t=nn,Fn=Gr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,y,P){this._url=c,this._bounds=ye(y),E(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_r(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){nr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&no(this._image),this},bringToBack:function(){return this._map&&Bs(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=ye(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",y=this._image=c?this._url:kr("img");if(_r(y,"leaflet-image-layer"),this._zoomAnimated&&_r(y,"leaflet-zoom-animated"),this.options.className&&_r(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(c){var y=this._map.getZoomScale(c.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;ha(this._image,P,y)},_reset:function(){var c=this._image,y=new We(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=y.getSize();Zi(c,y.min),c.style.width=P.x+"px",c.style.height=P.y+"px"},_updateOpacity:function(){oi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),or=function(c,y,P){return new Fn(c,y,P)},Mr=Fn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",y=this._image=c?this._url:kr("video");if(_r(y,"leaflet-image-layer"),this._zoomAnimated&&_r(y,"leaflet-zoom-animated"),this.options.className&&_r(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),c){for(var P=y.getElementsByTagName("source"),W=[],de=0;de<P.length;de++)W.push(P[de].src);this._url=P.length>0?W:[y.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var ke=0;ke<this._url.length;ke++){var ft=kr("source");ft.src=this._url[ke],y.appendChild(ft)}}});function Ji(c,y,P){return new Mr(c,y,P)}var Li=Fn.extend({_initImage:function(){var c=this._image=this._url;_r(c,"leaflet-image-layer"),this._zoomAnimated&&_r(c,"leaflet-zoom-animated"),this.options.className&&_r(c,this.options.className),c.onselectstart=p,c.onmousemove=p}});function mu(c,y,P){return new Li(c,y,P)}var wo=Gr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,y){c&&(c instanceof J||R(c))?(this._latlng=se(c),E(this,y)):(E(this,c),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&oi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&oi(this._container,1),this.bringToFront(),this.options.interactive&&(_r(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(oi(this._container,0),this._removeTimeout=setTimeout(o(nr,void 0,this._container),200)):nr(this._container),this.options.interactive&&($r(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=se(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&no(this._container),this},bringToBack:function(){return this._map&&Bs(this._container),this},_prepareOpen:function(c){var y=this._source;if(!y._map)return!1;if(y instanceof yo){y=null;var P=this._source._layers;for(var W in P)if(P[W]._map){y=P[W];break}if(!y)return!1;this._source=y}if(!c)if(y.getCenter)c=y.getCenter();else if(y.getLatLng)c=y.getLatLng();else if(y.getBounds)c=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")c.innerHTML=y;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),y=me(this.options.offset),P=this._getAnchor();this._zoomAnimated?Zi(this._container,c.add(P)):y=y.add(c).add(P);var W=this._containerBottom=-y.y,de=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=W+"px",this._container.style.left=de+"px"}},_getAnchor:function(){return[0,0]}});Jr.include({_initOverlay:function(c,y,P,W){var de=y;return de instanceof c||(de=new c(W).setContent(y)),P&&de.setLatLng(P),de}}),Gr.include({_initOverlay:function(c,y,P,W){var de=P;return de instanceof c?(E(de,W),de._source=this):(de=y&&!W?y:new c(W,this),de.setContent(P)),de}});var Qi=wo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,wo.prototype.openOn.call(this,c)},onAdd:function(c){wo.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Jo||this._source.on("preclick",ml))},onRemove:function(c){wo.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Jo||this._source.off("preclick",ml))},getEvents:function(){var c=wo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",y=this._container=kr("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=kr("div",c+"-content-wrapper",y);if(this._contentNode=kr("div",c+"-content",P),uu(y),ec(this._contentNode),Dr(y,"contextmenu",ml),this._tipContainer=kr("div",c+"-tip-container",y),this._tip=kr("div",c+"-tip",this._tipContainer),this.options.closeButton){var W=this._closeButton=kr("a",c+"-close-button",y);W.setAttribute("role","button"),W.setAttribute("aria-label","Close popup"),W.href="#close",W.innerHTML='<span aria-hidden="true">&#215;</span>',Dr(W,"click",function(de){Ar(de),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,y=c.style;y.width="",y.whiteSpace="nowrap";var P=c.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),y.width=P+1+"px",y.whiteSpace="",y.height="";var W=c.offsetHeight,de=this.options.maxHeight,ke="leaflet-popup-scrolled";de&&W>de?(y.height=de+"px",_r(c,ke)):$r(c,ke),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var y=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),P=this._getAnchor();Zi(this._container,y.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,y=parseInt(Sr(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+y,W=this._containerWidth,de=new X(this._containerLeft,-P-this._containerBottom);de._add(Re(this._container));var ke=c.layerPointToContainerPoint(de),ft=me(this.options.autoPanPadding),jt=me(this.options.autoPanPaddingTopLeft||ft),Zt=me(this.options.autoPanPaddingBottomRight||ft),hn=c.getSize(),$n=0,lr=0;ke.x+W+Zt.x>hn.x&&($n=ke.x+W-hn.x+Zt.x),ke.x-$n-jt.x<0&&($n=ke.x-jt.x),ke.y+P+Zt.y>hn.y&&(lr=ke.y+P-hn.y+Zt.y),ke.y-lr-jt.y<0&&(lr=ke.y-jt.y),($n||lr)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([$n,lr]))}},_getAnchor:function(){return me(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Da=function(c,y){return new Qi(c,y)};Jr.mergeOptions({closePopupOnClick:!0}),Jr.include({openPopup:function(c,y,P){return this._initOverlay(Qi,c,y,P).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),Gr.include({bindPopup:function(c,y){return this._popup=this._initOverlay(Qi,this._popup,c,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof yo||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){Yr(c);var y=c.layer||c.target;if(this._popup._source===y&&!(y instanceof Jo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=y,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var Ka=wo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){wo.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){wo.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=wo.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",y=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=kr("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var y,P,W=this._map,de=this._container,ke=W.latLngToContainerPoint(W.getCenter()),ft=W.layerPointToContainerPoint(c),jt=this.options.direction,Zt=de.offsetWidth,hn=de.offsetHeight,$n=me(this.options.offset),lr=this._getAnchor();jt==="top"?(y=Zt/2,P=hn):jt==="bottom"?(y=Zt/2,P=0):jt==="center"?(y=Zt/2,P=hn/2):jt==="right"?(y=0,P=hn/2):jt==="left"?(y=Zt,P=hn/2):ft.x<ke.x?(jt="right",y=0,P=hn/2):(jt="left",y=Zt+($n.x+lr.x)*2,P=hn/2),c=c.subtract(me(y,P,!0)).add($n).add(lr),$r(de,"leaflet-tooltip-right"),$r(de,"leaflet-tooltip-left"),$r(de,"leaflet-tooltip-top"),$r(de,"leaflet-tooltip-bottom"),_r(de,"leaflet-tooltip-"+jt),Zi(de,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&oi(this._container,c)},_animateZoom:function(c){var y=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(y)},_getAnchor:function(){return me(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ia=function(c,y){return new Ka(c,y)};Jr.include({openTooltip:function(c,y,P){return this._initOverlay(Ka,c,y,P).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Gr.include({bindTooltip:function(c,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ka,this._tooltip,c,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var y=c?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[y](P),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof yo||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var y=typeof c.getElement=="function"&&c.getElement();y&&(Dr(y,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),Dr(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var y=typeof c.getElement=="function"&&c.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var y=c.latlng,P,W;this._tooltip.options.sticky&&c.originalEvent&&(P=this._map.mouseEventToContainerPoint(c.originalEvent),W=this._map.containerPointToLayerPoint(P),y=this._map.layerPointToLatLng(W)),this._tooltip.setLatLng(y)}});var Oa=ka.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var y=c&&c.tagName==="DIV"?c:document.createElement("div"),P=this.options;if(P.html instanceof Element?(to(y),y.appendChild(P.html)):y.innerHTML=P.html!==!1?P.html:"",P.bgPos){var W=me(P.bgPos);y.style.backgroundPosition=-W.x+"px "+-W.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function Na(c){return new Oa(c)}ka.Default=yl;var Qr=Gr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Yt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){E(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),nr(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(no(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Bs(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof X?c:new X(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var y=this.getPane().children,P=-c(-1/0,1/0),W=0,de=y.length,ke;W<de;W++)ke=y[W].style.zIndex,y[W]!==this._container&&ke&&(P=c(P,+ke));isFinite(P)&&(this.options.zIndex=P+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Yt.ielt9){oi(this._container,this.options.opacity);var c=+new Date,y=!1,P=!1;for(var W in this._tiles){var de=this._tiles[W];if(!(!de.current||!de.loaded)){var ke=Math.min(1,(c-de.loaded)/200);oi(de.el,ke),ke<1?y=!0:(de.active?P=!0:this._onOpaqueTile(de),de.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),y&&(N(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=kr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,y=this.options.maxZoom;if(c!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===c?(this._levels[P].el.style.zIndex=y-Math.abs(c-P),this._onUpdateLevel(P)):(nr(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var W=this._levels[c],de=this._map;return W||(W=this._levels[c]={},W.el=kr("div","leaflet-tile-container leaflet-zoom-animated",this._container),W.el.style.zIndex=y,W.origin=de.project(de.unproject(de.getPixelOrigin()),c).round(),W.zoom=c,this._setZoomTransform(W,de.getCenter(),de.getZoom()),p(W.el.offsetWidth),this._onCreateLevel(W)),this._level=W,W}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var c,y,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)y=this._tiles[c],y.retain=y.current;for(c in this._tiles)if(y=this._tiles[c],y.current&&!y.active){var W=y.coords;this._retainParent(W.x,W.y,W.z,W.z-5)||this._retainChildren(W.x,W.y,W.z,W.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var y in this._tiles)this._tiles[y].coords.z===c&&this._removeTile(y)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)nr(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,y,P,W){var de=Math.floor(c/2),ke=Math.floor(y/2),ft=P-1,jt=new X(+de,+ke);jt.z=+ft;var Zt=this._tileCoordsToKey(jt),hn=this._tiles[Zt];return hn&&hn.active?(hn.retain=!0,!0):(hn&&hn.loaded&&(hn.retain=!0),ft>W?this._retainParent(de,ke,ft,W):!1)},_retainChildren:function(c,y,P,W){for(var de=2*c;de<2*c+2;de++)for(var ke=2*y;ke<2*y+2;ke++){var ft=new X(de,ke);ft.z=P+1;var jt=this._tileCoordsToKey(ft),Zt=this._tiles[jt];if(Zt&&Zt.active){Zt.retain=!0;continue}else Zt&&Zt.loaded&&(Zt.retain=!0);P+1<W&&this._retainChildren(de,ke,P+1,W)}},_resetView:function(c){var y=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var y=this.options;return y.minNativeZoom!==void 0&&c<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<c?y.maxNativeZoom:c},_setView:function(c,y,P,W){var de=Math.round(y);this.options.maxZoom!==void 0&&de>this.options.maxZoom||this.options.minZoom!==void 0&&de<this.options.minZoom?de=void 0:de=this._clampZoom(de);var ke=this.options.updateWhenZooming&&de!==this._tileZoom;(!W||ke)&&(this._tileZoom=de,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),de!==void 0&&this._update(c),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(c,y)},_setZoomTransforms:function(c,y){for(var P in this._levels)this._setZoomTransform(this._levels[P],c,y)},_setZoomTransform:function(c,y,P){var W=this._map.getZoomScale(P,c.zoom),de=c.origin.multiplyBy(W).subtract(this._map._getNewPixelOrigin(y,P)).round();Yt.any3d?ha(c.el,de,W):Zi(c.el,de)},_resetGrid:function(){var c=this._map,y=c.options.crs,P=this._tileSize=this.getTileSize(),W=this._tileZoom,de=this._map.getPixelWorldBounds(this._tileZoom);de&&(this._globalTileRange=this._pxBoundsToTileRange(de)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,y.wrapLng[0]],W).x/P.x),Math.ceil(c.project([0,y.wrapLng[1]],W).x/P.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([y.wrapLat[0],0],W).y/P.x),Math.ceil(c.project([y.wrapLat[1],0],W).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var y=this._map,P=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),W=y.getZoomScale(P,this._tileZoom),de=y.project(c,this._tileZoom).floor(),ke=y.getSize().divideBy(W*2);return new We(de.subtract(ke),de.add(ke))},_update:function(c){var y=this._map;if(y){var P=this._clampZoom(y.getZoom());if(c===void 0&&(c=y.getCenter()),this._tileZoom!==void 0){var W=this._getTiledPixelBounds(c),de=this._pxBoundsToTileRange(W),ke=de.getCenter(),ft=[],jt=this.options.keepBuffer,Zt=new We(de.getBottomLeft().subtract([jt,-jt]),de.getTopRight().add([jt,-jt]));if(!(isFinite(de.min.x)&&isFinite(de.min.y)&&isFinite(de.max.x)&&isFinite(de.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var hn in this._tiles){var $n=this._tiles[hn].coords;($n.z!==this._tileZoom||!Zt.contains(new X($n.x,$n.y)))&&(this._tiles[hn].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(c,P);return}for(var lr=de.min.y;lr<=de.max.y;lr++)for(var Vr=de.min.x;Vr<=de.max.x;Vr++){var Ts=new X(Vr,lr);if(Ts.z=this._tileZoom,!!this._isValidTile(Ts)){var hs=this._tiles[this._tileCoordsToKey(Ts)];hs?hs.current=!0:ft.push(Ts)}}if(ft.sort(function(es,Ro){return es.distanceTo(ke)-Ro.distanceTo(ke)}),ft.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Zs=document.createDocumentFragment();for(Vr=0;Vr<ft.length;Vr++)this._addTile(ft[Vr],Zs);this._level.el.appendChild(Zs)}}}},_isValidTile:function(c){var y=this._map.options.crs;if(!y.infinite){var P=this._globalTileRange;if(!y.wrapLng&&(c.x<P.min.x||c.x>P.max.x)||!y.wrapLat&&(c.y<P.min.y||c.y>P.max.y))return!1}if(!this.options.bounds)return!0;var W=this._tileCoordsToBounds(c);return ye(this.options.bounds).overlaps(W)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var y=this._map,P=this.getTileSize(),W=c.scaleBy(P),de=W.add(P),ke=y.unproject(W,c.z),ft=y.unproject(de,c.z);return[ke,ft]},_tileCoordsToBounds:function(c){var y=this._tileCoordsToNwSe(c),P=new ve(y[0],y[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var y=c.split(":"),P=new X(+y[0],+y[1]);return P.z=+y[2],P},_removeTile:function(c){var y=this._tiles[c];y&&(nr(y.el),delete this._tiles[c],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){_r(c,"leaflet-tile");var y=this.getTileSize();c.style.width=y.x+"px",c.style.height=y.y+"px",c.onselectstart=p,c.onmousemove=p,Yt.ielt9&&this.options.opacity<1&&oi(c,this.options.opacity)},_addTile:function(c,y){var P=this._getTilePos(c),W=this._tileCoordsToKey(c),de=this.createTile(this._wrapCoords(c),o(this._tileReady,this,c));this._initTile(de),this.createTile.length<2&&V(o(this._tileReady,this,c,null,de)),Zi(de,P),this._tiles[W]={el:de,coords:c,current:!0},y.appendChild(de),this.fire("tileloadstart",{tile:de,coords:c})},_tileReady:function(c,y,P){y&&this.fire("tileerror",{error:y,tile:P,coords:c});var W=this._tileCoordsToKey(c);P=this._tiles[W],P&&(P.loaded=+new Date,this._map._fadeAnimated?(oi(P.el,0),N(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),y||(_r(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Yt.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var y=new X(this._wrapX?h(c.x,this._wrapX):c.x,this._wrapY?h(c.y,this._wrapY):c.y);return y.z=c.z,y},_pxBoundsToTileRange:function(c){var y=this.getTileSize();return new We(c.min.unscaleBy(y).floor(),c.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function va(c){return new Qr(c)}var qs=Qr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,y){this._url=c,y=E(this,y),y.detectRetina&&Yt.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,y){return this._url===c&&y===void 0&&(y=!0),this._url=c,y||this.redraw(),this},createTile:function(c,y){var P=document.createElement("img");return Dr(P,"load",o(this._tileOnLoad,this,y,P)),Dr(P,"error",o(this._tileOnError,this,y,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(c),P},getTileUrl:function(c){var y={r:Yt.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-c.y;this.options.tms&&(y.y=P),y["-y"]=P}return A(this._url,i(y,this.options))},_tileOnLoad:function(c,y){Yt.ielt9?setTimeout(o(c,this,null,y),0):c(null,y)},_tileOnError:function(c,y,P){var W=this.options.errorTileUrl;W&&y.getAttribute("src")!==W&&(y.src=W),c(P,y)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,y=this.options.maxZoom,P=this.options.zoomReverse,W=this.options.zoomOffset;return P&&(c=y-c),c+W},_getSubdomain:function(c){var y=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var c,y;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(y=this._tiles[c].el,y.onload=p,y.onerror=p,!y.complete)){y.src=ee;var P=this._tiles[c].coords;nr(y),delete this._tiles[c],this.fire("tileabort",{tile:y,coords:P})}},_removeTile:function(c){var y=this._tiles[c];if(y)return y.el.setAttribute("src",ee),Qr.prototype._removeTile.call(this,c)},_tileReady:function(c,y,P){if(!(!this._map||P&&P.getAttribute("src")===ee))return Qr.prototype._tileReady.call(this,c,y,P)}});function Si(c,y){return new qs(c,y)}var Di=qs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,y){this._url=c;var P=i({},this.defaultWmsParams);for(var W in y)W in this.options||(P[W]=y[W]);y=E(this,y);var de=y.detectRetina&&Yt.retina?2:1,ke=this.getTileSize();P.width=ke.x*de,P.height=ke.y*de,this.wmsParams=P},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,qs.prototype.onAdd.call(this,c)},getTileUrl:function(c){var y=this._tileCoordsToNwSe(c),P=this._crs,W=ae(P.project(y[0]),P.project(y[1])),de=W.min,ke=W.max,ft=(this._wmsVersion>=1.3&&this._crs===Ms?[de.y,de.x,ke.y,ke.x]:[de.x,de.y,ke.x,ke.y]).join(","),jt=qs.prototype.getTileUrl.call(this,c);return jt+k(this.wmsParams,jt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ft},setParams:function(c,y){return i(this.wmsParams,c),y||this.redraw(),this}});function xs(c,y){return new Di(c,y)}qs.WMS=Di,Si.wms=xs;var Vi=Gr.extend({options:{padding:.1},initialize:function(c){E(this,c),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_r(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,y){var P=this._map.getZoomScale(y,this._zoom),W=this._map.getSize().multiplyBy(.5+this.options.padding),de=this._map.project(this._center,y),ke=W.multiplyBy(-P).add(de).subtract(this._map._getNewPixelOrigin(c,y));Yt.any3d?ha(this._container,ke,P):Zi(this._container,ke)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,y=this._map.getSize(),P=this._map.containerPointToLayerPoint(y.multiplyBy(-c)).round();this._bounds=new We(P,P.add(y.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ea=Vi.extend({options:{tolerance:0},getEvents:function(){var c=Vi.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");Dr(c,"mousemove",this._onMouseMove,this),Dr(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Dr(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,nr(this._container),ai(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var y in this._layers)c=this._layers[y],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vi.prototype._update.call(this);var c=this._bounds,y=this._container,P=c.getSize(),W=Yt.retina?2:1;Zi(y,c.min),y.width=W*P.x,y.height=W*P.y,y.style.width=P.x+"px",y.style.height=P.y+"px",Yt.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){Vi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[l(c)]=c;var y=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var y=c._order,P=y.next,W=y.prev;P?P.prev=W:this._drawLast=W,W?W.next=P:this._drawFirst=P,delete c._order,delete this._layers[l(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var y=c.options.dashArray.split(/[, ]+/),P=[],W,de;for(de=0;de<y.length;de++){if(W=Number(y[de]),isNaN(W))return;P.push(W)}c.options._dashArray=P}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var y=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new We,this._redrawBounds.extend(c._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(c._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var y=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,y=this._redrawBounds;if(this._ctx.save(),y){var P=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var W=this._drawFirst;W;W=W.next)c=W.layer,(!y||c._pxBounds&&c._pxBounds.intersects(y))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,y){if(this._drawing){var P,W,de,ke,ft=c._parts,jt=ft.length,Zt=this._ctx;if(jt){for(Zt.beginPath(),P=0;P<jt;P++){for(W=0,de=ft[P].length;W<de;W++)ke=ft[P][W],Zt[W?"lineTo":"moveTo"](ke.x,ke.y);y&&Zt.closePath()}this._fillStroke(Zt,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var y=c._point,P=this._ctx,W=Math.max(Math.round(c._radius),1),de=(Math.max(Math.round(c._radiusY),1)||W)/W;de!==1&&(P.save(),P.scale(1,de)),P.beginPath(),P.arc(y.x,y.y/de,W,0,Math.PI*2,!1),de!==1&&P.restore(),this._fillStroke(P,c)}},_fillStroke:function(c,y){var P=y.options;P.fill&&(c.globalAlpha=P.fillOpacity,c.fillStyle=P.fillColor||P.color,c.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(c.setLineDash&&c.setLineDash(y.options&&y.options._dashArray||[]),c.globalAlpha=P.opacity,c.lineWidth=P.weight,c.strokeStyle=P.color,c.lineCap=P.lineCap,c.lineJoin=P.lineJoin,c.stroke())},_onClick:function(c){for(var y=this._map.mouseEventToLayerPoint(c),P,W,de=this._drawFirst;de;de=de.next)P=de.layer,P.options.interactive&&P._containsPoint(y)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(P))&&(W=P);this._fireEvent(W?[W]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,y)}},_handleMouseOut:function(c){var y=this._hoveredLayer;y&&($r(this._container,"leaflet-interactive"),this._fireEvent([y],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,y){if(!this._mouseHoverThrottled){for(var P,W,de=this._drawFirst;de;de=de.next)P=de.layer,P.options.interactive&&P._containsPoint(y)&&(W=P);W!==this._hoveredLayer&&(this._handleMouseOut(c),W&&(_r(this._container,"leaflet-interactive"),this._fireEvent([W],c,"mouseover"),this._hoveredLayer=W)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,y,P){this._map._fireDOMEvent(y,P||y.type,c)},_bringToFront:function(c){var y=c._order;if(y){var P=y.next,W=y.prev;if(P)P.prev=W;else return;W?W.next=P:P&&(this._drawFirst=P),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(c)}},_bringToBack:function(c){var y=c._order;if(y){var P=y.next,W=y.prev;if(W)W.next=P;else return;P?P.prev=W:W&&(this._drawLast=W),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(c)}}});function Oo(c){return Yt.canvas?new ea(c):null}var ia=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),nc={_initContainer:function(){this._container=kr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vi.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var y=c._container=ia("shape");_r(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",c._path=ia("path"),y.appendChild(c._path),this._updateStyle(c),this._layers[l(c)]=c},_addPath:function(c){var y=c._container;this._container.appendChild(y),c.options.interactive&&c.addInteractiveTarget(y)},_removePath:function(c){var y=c._container;nr(y),c.removeInteractiveTarget(y),delete this._layers[l(c)]},_updateStyle:function(c){var y=c._stroke,P=c._fill,W=c.options,de=c._container;de.stroked=!!W.stroke,de.filled=!!W.fill,W.stroke?(y||(y=c._stroke=ia("stroke")),de.appendChild(y),y.weight=W.weight+"px",y.color=W.color,y.opacity=W.opacity,W.dashArray?y.dashStyle=R(W.dashArray)?W.dashArray.join(" "):W.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=W.lineCap.replace("butt","flat"),y.joinstyle=W.lineJoin):y&&(de.removeChild(y),c._stroke=null),W.fill?(P||(P=c._fill=ia("fill")),de.appendChild(P),P.color=W.fillColor||W.color,P.opacity=W.fillOpacity):P&&(de.removeChild(P),c._fill=null)},_updateCircle:function(c){var y=c._point.round(),P=Math.round(c._radius),W=Math.round(c._radiusY||P);this._setPath(c,c._empty()?"M0 0":"AL "+y.x+","+y.y+" "+P+","+W+" 0,"+65535*360)},_setPath:function(c,y){c._path.v=y},_bringToFront:function(c){no(c._container)},_bringToBack:function(c){Bs(c._container)}},Ra=Yt.vml?ia:Z,As=Vi.extend({_initContainer:function(){this._container=Ra("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ra("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){nr(this._container),ai(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vi.prototype._update.call(this);var c=this._bounds,y=c.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,P.setAttribute("width",y.x),P.setAttribute("height",y.y)),Zi(P,c.min),P.setAttribute("viewBox",[c.min.x,c.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(c){var y=c._path=Ra("path");c.options.className&&_r(y,c.options.className),c.options.interactive&&_r(y,"leaflet-interactive"),this._updateStyle(c),this._layers[l(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){nr(c._path),c.removeInteractiveTarget(c._path),delete this._layers[l(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var y=c._path,P=c.options;y&&(P.stroke?(y.setAttribute("stroke",P.color),y.setAttribute("stroke-opacity",P.opacity),y.setAttribute("stroke-width",P.weight),y.setAttribute("stroke-linecap",P.lineCap),y.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?y.setAttribute("stroke-dasharray",P.dashArray):y.removeAttribute("stroke-dasharray"),P.dashOffset?y.setAttribute("stroke-dashoffset",P.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),P.fill?(y.setAttribute("fill",P.fillColor||P.color),y.setAttribute("fill-opacity",P.fillOpacity),y.setAttribute("fill-rule",P.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(c,y){this._setPath(c,U(c._parts,y))},_updateCircle:function(c){var y=c._point,P=Math.max(Math.round(c._radius),1),W=Math.max(Math.round(c._radiusY),1)||P,de="a"+P+","+W+" 0 1,0 ",ke=c._empty()?"M0 0":"M"+(y.x-P)+","+y.y+de+P*2+",0 "+de+-P*2+",0 ";this._setPath(c,ke)},_setPath:function(c,y){c._path.setAttribute("d",y)},_bringToFront:function(c){no(c._path)},_bringToBack:function(c){Bs(c._path)}});Yt.vml&&As.include(nc);function zi(c){return Yt.svg||Yt.vml?new As(c):null}Jr.include({getRenderer:function(c){var y=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var y=this._paneRenderers[c];return y===void 0&&(y=this._createRenderer({pane:c}),this._paneRenderers[c]=y),y},_createRenderer:function(c){return this.options.preferCanvas&&Oo(c)||zi(c)}});var uo=Fs.extend({initialize:function(c,y){Fs.prototype.initialize.call(this,this._boundsToLatLngs(c),y)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=ye(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function No(c,y){return new uo(c,y)}As.create=Ra,As.pointsToPath=U,so.geometryToLayer=oo,so.coordsToLatLng=Ya,so.coordsToLatLngs=ao,so.latLngToCoords=Ws,so.latLngsToCoords=Ta,so.getFeature=Qo,so.asFeature=lo,Jr.mergeOptions({boxZoom:!0});var br=bi.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){Dr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ai(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){nr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qe(),Vn(),this._startPoint=this._map.mouseEventToContainerPoint(c),Dr(document,{contextmenu:Yr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=kr("div","leaflet-zoom-box",this._container),_r(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var y=new We(this._point,this._startPoint),P=y.getSize();Zi(this._box,y.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(nr(this._box),$r(this._container,"leaflet-crosshair")),dt(),xr(),ai(document,{contextmenu:Yr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Jr.addInitHook("addHandler","boxZoom",br),Jr.mergeOptions({doubleClickZoom:!0});var Za=bi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var y=this._map,P=y.getZoom(),W=y.options.zoomDelta,de=c.originalEvent.shiftKey?P-W:P+W;y.options.doubleClickZoom==="center"?y.setZoom(de):y.setZoomAround(c.containerPoint,de)}});Jr.addInitHook("addHandler","doubleClickZoom",Za),Jr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Xa=bi.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new ga(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}_r(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$r(this._map._container,"leaflet-grab"),$r(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=ye(this._map.options.maxBounds);this._offsetLimit=ae(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var y=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(y),this._prunePositions(y)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,y){return c-(c-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;c.x<y.min.x&&(c.x=this._viscousLimit(c.x,y.min.x)),c.y<y.min.y&&(c.y=this._viscousLimit(c.y,y.min.y)),c.x>y.max.x&&(c.x=this._viscousLimit(c.x,y.max.x)),c.y>y.max.y&&(c.y=this._viscousLimit(c.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,y=Math.round(c/2),P=this._initialWorldOffset,W=this._draggable._newPos.x,de=(W-y+P)%c+y-P,ke=(W+y+P)%c-y-P,ft=Math.abs(de+P)<Math.abs(ke+P)?de:ke;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ft},_onDragEnd:function(c){var y=this._map,P=y.options,W=!P.inertia||c.noInertia||this._times.length<2;if(y.fire("dragend",c),W)y.fire("moveend");else{this._prunePositions(+new Date);var de=this._lastPos.subtract(this._positions[0]),ke=(this._lastTime-this._times[0])/1e3,ft=P.easeLinearity,jt=de.multiplyBy(ft/ke),Zt=jt.distanceTo([0,0]),hn=Math.min(P.inertiaMaxSpeed,Zt),$n=jt.multiplyBy(hn/Zt),lr=hn/(P.inertiaDeceleration*ft),Vr=$n.multiplyBy(-lr/2).round();!Vr.x&&!Vr.y?y.fire("moveend"):(Vr=y._limitOffset(Vr,y.options.maxBounds),V(function(){y.panBy(Vr,{duration:lr,easeLinearity:ft,noMoveStart:!0,animate:!0})}))}}});Jr.addInitHook("addHandler","dragging",Xa),Jr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ya=bi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),Dr(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ai(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,y=document.documentElement,P=c.scrollTop||y.scrollTop,W=c.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(W,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var y=this._panKeys={},P=this.keyCodes,W,de;for(W=0,de=P.left.length;W<de;W++)y[P.left[W]]=[-1*c,0];for(W=0,de=P.right.length;W<de;W++)y[P.right[W]]=[c,0];for(W=0,de=P.down.length;W<de;W++)y[P.down[W]]=[0,c];for(W=0,de=P.up.length;W<de;W++)y[P.up[W]]=[0,-1*c]},_setZoomDelta:function(c){var y=this._zoomKeys={},P=this.keyCodes,W,de;for(W=0,de=P.zoomIn.length;W<de;W++)y[P.zoomIn[W]]=c;for(W=0,de=P.zoomOut.length;W<de;W++)y[P.zoomOut[W]]=-c},_addHooks:function(){Dr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ai(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var y=c.keyCode,P=this._map,W;if(y in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(W=this._panKeys[y],c.shiftKey&&(W=me(W).multiplyBy(3)),P.options.maxBounds&&(W=P._limitOffset(me(W),P.options.maxBounds)),P.options.worldCopyJump){var de=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(W)));P.panTo(de)}else P.panBy(W)}else if(y in this._zoomKeys)P.setZoom(P.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;Yr(c)}}});Jr.addInitHook("addHandler","keyboard",ya),Jr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xo=bi.extend({addHooks:function(){Dr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ai(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var y=Tu(c),P=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var W=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),W),Yr(c)},_performZoom:function(){var c=this._map,y=c.getZoom(),P=this._map.options.zoomSnap||0;c._stop();var W=this._delta/(this._map.options.wheelPxPerZoomLevel*4),de=4*Math.log(2/(1+Math.exp(-Math.abs(W))))/Math.LN2,ke=P?Math.ceil(de/P)*P:de,ft=c._limitZoom(y+(this._delta>0?ke:-ke))-y;this._delta=0,this._startTime=null,ft&&(c.options.scrollWheelZoom==="center"?c.setZoom(y+ft):c.setZoomAround(this._lastMousePos,y+ft))}});Jr.addInitHook("addHandler","scrollWheelZoom",xo);var ud=600;Jr.mergeOptions({tapHold:Yt.touchNative&&Yt.safari&&Yt.mobile,tapTolerance:15});var Ys=bi.extend({addHooks:function(){Dr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ai(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var y=c.touches[0];this._startPos=this._newPos=new X(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Dr(document,"touchend",Ar),Dr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),ud),Dr(document,"touchend touchcancel contextmenu",this._cancel,this),Dr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){ai(document,"touchend",Ar),ai(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),ai(document,"touchend touchcancel contextmenu",this._cancel,this),ai(document,"touchmove",this._onMove,this)},_onMove:function(c){var y=c.touches[0];this._newPos=new X(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,y){var P=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});P._simulated=!0,y.target.dispatchEvent(P)}});Jr.addInitHook("addHandler","tapHold",Ys),Jr.mergeOptions({touchZoom:Yt.touch,bounceAtZoomLimits:!0});var Ks=bi.extend({addHooks:function(){_r(this._map._container,"leaflet-touch-zoom"),Dr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$r(this._map._container,"leaflet-touch-zoom"),ai(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var y=this._map;if(!(!c.touches||c.touches.length!==2||y._animatingZoom||this._zooming)){var P=y.mouseEventToContainerPoint(c.touches[0]),W=y.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(P.add(W)._divideBy(2))),this._startDist=P.distanceTo(W),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),Dr(document,"touchmove",this._onTouchMove,this),Dr(document,"touchend touchcancel",this._onTouchEnd,this),Ar(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var y=this._map,P=y.mouseEventToContainerPoint(c.touches[0]),W=y.mouseEventToContainerPoint(c.touches[1]),de=P.distanceTo(W)/this._startDist;if(this._zoom=y.getScaleZoom(de,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&de<1||this._zoom>y.getMaxZoom()&&de>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,de===1)return}else{var ke=P._add(W)._divideBy(2)._subtract(this._centerPoint);if(de===1&&ke.x===0&&ke.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(ke),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var ft=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(ft,this,!0),Ar(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,N(this._animRequest),ai(document,"touchmove",this._onTouchMove,this),ai(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Jr.addInitHook("addHandler","touchZoom",Ks),Jr.BoxZoom=br,Jr.DoubleClickZoom=Za,Jr.Drag=Xa,Jr.Keyboard=ya,Jr.ScrollWheelZoom=xo,Jr.TapHold=Ys,Jr.TouchZoom=Ks,t.Bounds=We,t.Browser=Yt,t.CRS=fe,t.Canvas=ea,t.Circle=io,t.CircleMarker=Io,t.Class=$,t.Control=gr,t.DivIcon=Oa,t.DivOverlay=wo,t.DomEvent=du,t.DomUtil=Pr,t.Draggable=ga,t.Evented=Q,t.FeatureGroup=yo,t.GeoJSON=so,t.GridLayer=Qr,t.Handler=bi,t.Icon=ka,t.ImageOverlay=Fn,t.LatLng=J,t.LatLngBounds=ve,t.Layer=Gr,t.LayerGroup=ro,t.LineUtil=Hr,t.Map=Jr,t.Marker=ks,t.Mixin=Oc,t.Path=Jo,t.Point=X,t.PolyUtil=zl,t.Polygon=Fs,t.Polyline=bo,t.Popup=Qi,t.PosAnimation=Du,t.Projection=xi,t.Rectangle=uo,t.Renderer=Vi,t.SVG=As,t.SVGOverlay=Li,t.TileLayer=qs,t.Tooltip=Ka,t.Transformation=we,t.Util=q,t.VideoOverlay=Mr,t.bind=o,t.bounds=ae,t.canvas=Oo,t.circle=_o,t.circleMarker=Ul,t.control=_s,t.divIcon=Na,t.extend=i,t.featureGroup=Ou,t.geoJSON=nn,t.geoJson=$t,t.gridLayer=va,t.icon=tc,t.imageOverlay=or,t.latLng=se,t.latLngBounds=ye,t.layerGroup=$l,t.map=ys,t.marker=Aa,t.point=me,t.polygon=Wa,t.polyline=Nc,t.popup=Da,t.rectangle=No,t.setOptions=E,t.stamp=l,t.svg=zi,t.svgOverlay=mu,t.tileLayer=Si,t.tooltip=Ia,t.transformation=Be,t.version=r,t.videoOverlay=Ji;var _a=window.L;t.noConflict=function(){return window.L=_a,this},window.L=t})})(bb,bb.exports);var vt=bb.exports;const tr=Hy(vt);var a5={exports:{}};(function(n,e){(function(t,r){r(e)})(Ca,function(t){var r=typeof window<"u"?window:typeof Ca<"u"?Ca:typeof self<"u"?self:{};function i(u,h){return u(h={exports:{}},h.exports),h.exports}var s=i(function(u,h){(function(p){const v={escape:function(F){return F.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:m,mimeType:function(F){return F=m(F).toLowerCase(),function(){var B="application/font-woff",Q="image/jpeg";return{woff:B,woff2:B,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Q,jpeg:Q,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[F]||""},dataAsUrl:function(F,B){return`data:${B};base64,`+F},isDataUrl:function(F){return F.search(/^(data:)/)!==-1},canvasToBlob:function(F){return F.toBlob?new Promise(function(Q){F.toBlob(Q)}):(B=F,new Promise(function(Q){const X=ge(B.toDataURL().split(",")[1]);var _e=X.length;const me=new Uint8Array(_e);for(let We=0;We<_e;We++)me[We]=X.charCodeAt(We);Q(new Blob([me],{type:"image/png"}))}));var B},resolveUrl:function(F,B){const Q=document.implementation.createHTMLDocument(),X=Q.createElement("base"),_e=(Q.head.appendChild(X),Q.createElement("a"));return Q.body.appendChild(_e),X.href=B,_e.href=F,_e.href},getAndEncode:function(F){let B=ee.impl.urlCache.find(function(Q){return Q.url===F});return B||(B={url:F,promise:null},ee.impl.urlCache.push(B)),B.promise===null&&(ee.impl.options.cacheBust&&(F+=(/\?/.test(F)?"&":"?")+new Date().getTime()),B.promise=new Promise(function(Q){const X=ee.impl.options.httpTimeout,_e=new XMLHttpRequest;let me;var We;function ae(ve){console.error(ve),Q("")}_e.onreadystatechange=function(){if(_e.readyState===4)if(_e.status!==200)me?Q(me):ae(`cannot fetch resource: ${F}, status: `+_e.status);else{const ve=new FileReader;ve.onloadend=function(){var ye=ve.result.split(/,/)[1];Q(ye)},ve.readAsDataURL(_e.response)}},_e.ontimeout=function(){me?Q(me):ae(`timeout of ${X}ms occured while fetching resource: `+F)},_e.responseType="blob",_e.timeout=X,ee.impl.options.useCredentials&&(_e.withCredentials=!0),_e.open("GET",F,!0),_e.send(),ee.impl.options.imagePlaceholder&&(We=ee.impl.options.imagePlaceholder.split(/,/))&&We[1]&&(me=We[1])})),B.promise},uid:function(){let F=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+F++}}(),delay:function(F){return function(B){return new Promise(function(Q){setTimeout(function(){Q(B)},F)})}},asArray:function(F){const B=[],Q=F.length;for(let X=0;X<Q;X++)B.push(F[X]);return B},escapeXhtml:function(F){return F.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(F){return F!=="data:,"?new Promise(function(B,Q){const X=new Image;ee.impl.options.useCredentials&&(X.crossOrigin="use-credentials"),X.onload=function(){B(X)},X.onerror=Q,X.src=F}):Promise.resolve()},width:function(F){var B=S(F,"border-left-width"),Q=S(F,"border-right-width");return F.scrollWidth+B+Q},height:function(F){var B=S(F,"border-top-width"),Q=S(F,"border-bottom-width");return F.scrollHeight+B+Q}};function m(F){return(F=/\.([^\.\/]*?)(\?|$)/g.exec(F))?F[1]:""}function S(F,B){const Q=pe(F).getPropertyValue(B);return parseFloat(Q.replace("px",""))}const E=function(){const F=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(_e,me,We){return B(_e)?Promise.resolve(_e).then(Q).then(function(ae){let ve=Promise.resolve(_e);return ae.forEach(function(ye){ve=ve.then(function(J){return X(J,ye,me,We)})}),ve}):Promise.resolve(_e)},shouldProcess:B,impl:{readUrls:Q,inline:X}};function B(_e){return _e.search(F)!==-1}function Q(_e){const me=[];for(var We;(We=F.exec(_e))!==null;)me.push(We[1]);return me.filter(function(ae){return!v.isDataUrl(ae)})}function X(_e,me,We,ae){return Promise.resolve(me).then(function(ve){return We?v.resolveUrl(ve,We):ve}).then(ae||v.getAndEncode).then(function(ve){return v.dataAsUrl(ve,v.mimeType(me))}).then(function(ve){return _e.replace((ye=me,new RegExp(`(url\\(['"]?)(${v.escape(ye)})(['"]?\\))`,"g")),`$1${ve}$3`);var ye})}}(),k={resolveAll:function(){return T().then(function(F){return Promise.all(F.map(function(B){return B.resolve()}))}).then(function(F){return F.join(`
`)})},impl:{readAll:T}};function T(){return Promise.resolve(v.asArray(document.styleSheets)).then(function(B){const Q=[];return B.forEach(function(X){if(Object.getPrototypeOf(X).hasOwnProperty("cssRules"))try{v.asArray(X.cssRules||[]).forEach(Q.push.bind(Q))}catch(_e){console.log("Error while reading CSS rules from "+X.href,_e.toString())}}),Q}).then(function(B){return B.filter(function(Q){return Q.type===CSSRule.FONT_FACE_RULE}).filter(function(Q){return E.shouldProcess(Q.style.getPropertyValue("src"))})}).then(function(B){return B.map(F)});function F(B){return{resolve:function(){var Q=(B.parentStyleSheet||{}).href;return E.inlineAll(B.cssText,Q)},src:function(){return B.style.getPropertyValue("src")}}}}const A={inlineAll:function F(B){return B instanceof Element?function(Q){const X=Q.style.getPropertyValue("background");return X?E.inlineAll(X).then(function(_e){Q.style.setProperty("background",_e,X)}).then(function(){return Q}):Promise.resolve(Q)}(B).then(function(){return B instanceof HTMLImageElement?R(B).inline():Promise.all(v.asArray(B.childNodes).map(function(Q){return F(Q)}))}):Promise.resolve(B)},impl:{newImage:R}};function R(F){return{inline:function(B){return v.isDataUrl(F.src)?Promise.resolve():Promise.resolve(F.src).then(B||v.getAndEncode).then(function(Q){return v.dataAsUrl(Q,v.mimeType(F.src))}).then(function(Q){return new Promise(function(X){F.onload=X,F.onerror=X,F.src=Q})})}}}const G={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},ee={toSvg:O,toPng:function(F,B){return(B=B||{}).raster=!0,j(F,B).then(function(Q){return Q.toDataURL()})},toJpeg:function(F,B){return(B=B||{}).raster=!0,j(F,B).then(function(Q){return Q.toDataURL("image/jpeg",B.quality||1)})},toBlob:function(F,B){return(B=B||{}).raster=!0,j(F,B).then(v.canvasToBlob)},toPixelData:function(F,B){return(B=B||{}).raster=!0,j(F,B).then(function(Q){return Q.getContext("2d").getImageData(0,0,v.width(F),v.height(F)).data})},toCanvas:function(F,B){return(B=B||{}).raster=!0,j(F,B||{})},impl:{fontFaces:k,images:A,util:v,inliner:E,urlCache:[],options:{}}},pe=(u.exports=ee,p.getComputedStyle||window.getComputedStyle),ge=p.atob||window.atob;function O(F,B){var Q=B=B||{};return Q.imagePlaceholder===void 0?ee.impl.options.imagePlaceholder=G.imagePlaceholder:ee.impl.options.imagePlaceholder=Q.imagePlaceholder,Q.cacheBust===void 0?ee.impl.options.cacheBust=G.cacheBust:ee.impl.options.cacheBust=Q.cacheBust,Q.useCredentials===void 0?ee.impl.options.useCredentials=G.useCredentials:ee.impl.options.useCredentials=Q.useCredentials,Promise.resolve(F).then(function(X){return function _e(me,We,ae,ve,ye=null){return ae||!We||We(me)?Promise.resolve(me).then(function(J){return J instanceof HTMLCanvasElement?v.makeImage(J.toDataURL()):J.nodeName==="IFRAME"?html2canvas(J.contentDocument.body).then(se=>se.toDataURL()).then(v.makeImage):J.cloneNode(!1)}).then(function(J){return function(se,fe){const ie=se.childNodes;return ie.length===0?Promise.resolve(fe):function(te,Oe){const we=pe(se);let Be=Promise.resolve();return Oe.forEach(function(ue){Be=Be.then(function(){return _e(ue,We,!1,ve,we)}).then(function(re){re&&te.appendChild(re)})}),Be}(fe,v.asArray(ie)).then(function(){return fe})}(me,J)}).then(function(J){return function(se,fe,ie){return fe instanceof Element?Promise.resolve().then(function(){(function(te,Oe){const we=pe(te);we.cssText?(Oe.style.cssText=we.cssText,function(Be,ue){ue.font=Be.font,ue.fontFamily=Be.fontFamily,ue.fontFeatureSettings=Be.fontFeatureSettings,ue.fontKerning=Be.fontKerning,ue.fontSize=Be.fontSize,ue.fontStretch=Be.fontStretch,ue.fontStyle=Be.fontStyle,ue.fontVariant=Be.fontVariant,ue.fontVariantCaps=Be.fontVariantCaps,ue.fontVariantEastAsian=Be.fontVariantEastAsian,ue.fontVariantLigatures=Be.fontVariantLigatures,ue.fontVariantNumeric=Be.fontVariantNumeric,ue.fontVariationSettings=Be.fontVariationSettings,ue.fontWeight=Be.fontWeight}(we,Oe.style)):(ie?function(Be,ue,re,Z){const U=re.style,xe=Be.style;for(var Ne of ue){var Ge=ue.getPropertyValue(Ne),Se=xe.getPropertyValue(Ne),ce=(xe.setProperty(Ne,Z?"initial":"unset"),ue.getPropertyValue(Ne));ce!==Ge?U.setProperty(Ne,Ge):U.removeProperty(Ne),xe.setProperty(Ne,Se)}}(te,we,Oe,ae):function(Be,ue,re){const Z=function(xe){if($[xe])return $[xe];q||((q=document.createElement("iframe")).style.visibility="hidden",q.style.position="fixed",document.body.appendChild(q),q.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Ne=document.createElement(xe),Ge=(q.contentWindow.document.body.appendChild(Ne),Ne.textContent=".",q.contentWindow.getComputedStyle(Ne)),Se={};return v.asArray(Ge).forEach(function(ce){Se[ce]=ce==="width"||ce==="height"?"auto":Ge.getPropertyValue(ce)}),q.contentWindow.document.body.removeChild(Ne),$[xe]=Se}(re.tagName),U=re.style;v.asArray(Be).forEach(function(xe){var Ne=Be.getPropertyValue(xe);(Ne!==Z[xe]||ue&&Ne!==ue.getPropertyValue(xe))&&U.setProperty(xe,Ne,Be.getPropertyPriority(xe))})}(we,ye,Oe),ae&&(["inset-block","inset-block-start","inset-block-end"].forEach(Be=>Oe.style.removeProperty(Be)),["left","right","top","bottom"].forEach(Be=>{Oe.style.getPropertyValue(Be)&&Oe.style.setProperty(Be,"0px")})))})(se,fe)}).then(function(){[":before",":after"].forEach(function(te){(function(Oe){const we=pe(se,Oe),Be=we.getPropertyValue("content");if(Be!==""&&Be!=="none"){const ue=v.uid(),re=fe.getAttribute("class"),Z=(re&&fe.setAttribute("class",re+" "+ue),document.createElement("style"));Z.appendChild(function(){const U=`.${ue}:`+Oe,xe=(we.cssText?function(){return`${we.cssText} content: ${we.getPropertyValue("content")};`}:function(){return v.asArray(we).map(function(Ne){return Ne+": "+we.getPropertyValue(Ne)+(we.getPropertyPriority(Ne)?" !important":"")}).join("; ")+";"})();return document.createTextNode(U+`{${xe}}`)}()),fe.appendChild(Z)}})(te)})}).then(function(){se instanceof HTMLTextAreaElement&&(fe.innerHTML=se.value),se instanceof HTMLInputElement&&fe.setAttribute("value",se.value)}).then(function(){fe instanceof SVGElement&&(fe.setAttribute("xmlns","http://www.w3.org/2000/svg"),fe instanceof SVGRectElement&&["width","height"].forEach(function(te){const Oe=fe.getAttribute(te);Oe&&fe.style.setProperty(te,Oe)}))}).then(function(){return fe}):fe}(me,J,ve)}):Promise.resolve()}(X,B.filter,!0,!B.raster)}).then(Y).then(V).then(function(X){B.bgcolor&&(X.style.backgroundColor=B.bgcolor),B.width&&(X.style.width=B.width+"px"),B.height&&(X.style.height=B.height+"px"),B.style&&Object.keys(B.style).forEach(function(me){X.style[me]=B.style[me]});let _e=null;return typeof B.onclone=="function"&&(_e=B.onclone(X)),Promise.resolve(_e).then(function(){return X})}).then(function(X){return X=X,_e=B.width||v.width(F),me=B.height||v.height(F),Promise.resolve(X).then(function(We){return We.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(We)}).then(v.escapeXhtml).then(function(We){return`<foreignObject x="0" y="0" width="100%" height="100%">${We}</foreignObject>`}).then(function(We){return`<svg xmlns="http://www.w3.org/2000/svg" width="${_e}" height="${me}">${We}</svg>`}).then(function(We){return"data:image/svg+xml;charset=utf-8,"+We});var _e,me}).then(function(X){return ee.impl.urlCache=[],X})}function j(F,B){return O(F,B).then(v.makeImage).then(v.delay(0)).then(function(Q){var X=typeof B.scale!="number"?1:B.scale;const _e=function(We,ae){const ve=document.createElement("canvas");if(ve.width=(B.width||v.width(We))*ae,ve.height=(B.height||v.height(We))*ae,B.bgcolor){const ye=ve.getContext("2d");ye.fillStyle=B.bgcolor,ye.fillRect(0,0,ve.width,ve.height)}return ve}(F,X),me=_e.getContext("2d");return me.mozImageSmoothingEnabled=!1,me.msImageSmoothingEnabled=!1,me.imageSmoothingEnabled=!1,Q&&(me.scale(X,X),me.drawImage(Q,0,0)),q&&(document.body.removeChild(q),q=null,N&&clearTimeout(N),N=setTimeout(()=>{N=null,$={}},2e4)),_e})}function Y(F){return k.resolveAll().then(function(B){const Q=document.createElement("style");return F.appendChild(Q),Q.appendChild(document.createTextNode(B)),F})}function V(F){return A.inlineAll(F).then(function(){return F})}let N=null,q=null,$={}})(r)}),o=i(function(u,h){(function(){function p(k,T,A){var R=new XMLHttpRequest;R.open("GET",k),R.responseType="blob",R.onload=function(){E(R.response,T,A)},R.onerror=function(){console.error("could not download file")},R.send()}function v(k){var T=new XMLHttpRequest;T.open("HEAD",k,!1);try{T.send()}catch{}return 200<=T.status&&299>=T.status}function m(k){try{k.dispatchEvent(new MouseEvent("click"))}catch{var T=document.createEvent("MouseEvents");T.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),k.dispatchEvent(T)}}var S=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,E=S.saveAs||(typeof window!="object"||window!==S?function(){}:"download"in HTMLAnchorElement.prototype?function(k,T,A){var R=S.URL||S.webkitURL,G=document.createElement("a");T=T||k.name||"download",G.download=T,G.rel="noopener",typeof k=="string"?(G.href=k,G.origin===location.origin?m(G):v(G.href)?p(k,T,A):m(G,G.target="_blank")):(G.href=R.createObjectURL(k),setTimeout(function(){R.revokeObjectURL(G.href)},4e4),setTimeout(function(){m(G)},0))}:"msSaveOrOpenBlob"in navigator?function(k,T,A){if(T=T||k.name||"download",typeof k!="string")navigator.msSaveOrOpenBlob(function(G,ee){return ee===void 0?ee={autoBom:!1}:typeof ee!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),ee={autoBom:!ee}),ee.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(G.type)?new Blob(["\uFEFF",G],{type:G.type}):G}(k,A),T);else if(v(k))p(k,T,A);else{var R=document.createElement("a");R.href=k,R.target="_blank",setTimeout(function(){m(R)})}}:function(k,T,A,R){if((R=R||open("","_blank"))&&(R.document.title=R.document.body.innerText="downloading..."),typeof k=="string")return p(k,T,A);var G=k.type==="application/octet-stream",ee=/constructor/i.test(S.HTMLElement)||S.safari,pe=/CriOS\/[\d]+/.test(navigator.userAgent);if((pe||G&&ee)&&typeof FileReader=="object"){var ge=new FileReader;ge.onloadend=function(){var Y=ge.result;Y=pe?Y:Y.replace(/^data:[^;]*;/,"data:attachment/file;"),R?R.location.href=Y:location=Y,R=null},ge.readAsDataURL(k)}else{var O=S.URL||S.webkitURL,j=O.createObjectURL(k);R?R.location=j:location.href=j,R=null,setTimeout(function(){O.revokeObjectURL(j)},4e4)}});S.saveAs=E.saveAs=E,u.exports=E})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(u){var h=u.node,p=u.error;return console.warn("Map node is very big "+h.scrollWidth+"x"+h.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var u=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var m in this.options)p.hasOwnProperty(m)?v[m]=p[m]:v[m]=this.options[m];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return u._getPixelData(v)}).then(function(S){return u._setElementsVisible(!0),u._toCanvas(S,v)}).then(function(S){return h==="image"?u._canvasToImage(S,v):h==="canvas"?S:u._canvasToBlob(S,v)}).then(function(S){return u._screenState.status=1,u._map.fire("simpleMapScreenshoter.done"),S}).catch(function(S){return u._setElementsVisible(!0),u._screenState.status=1,u._map.fire("simpleMapScreenshoter.error",{e:S}),Promise.reject(S)}),this._screenState.promise)},_setElementsVisible:function(){var u=this,h=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=u._map._container.querySelectorAll(p),m=!0,S=!1,E=void 0;try{for(var k,T=v[Symbol.iterator]();!(m=(k=T.next()).done);m=!0)k.value.style.opacity=h===!1?0:1}catch(A){S=!0,E=A}finally{try{!m&&T.return&&T.return()}finally{if(S)throw E}}})},_canvasToImage:function(u,h){var p=h.mimeType,v=u.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(u,h){var p=h.mimeType;return new Promise(function(v,m){u.toBlob(function(S){v(S)},p)})},_toCanvas:function(u,h){var p=h.captionOffset,v=h.caption,m=h.captionFontSize,S=h.captionFont,E=h.captionColor,k=h.captionBgColor,T=this._node,A=T.screenHeight,R=T.screenWidth,G=document.createElement("canvas");G.width=R,G.height=A;for(var ee=G.getContext("2d"),pe=ee.createImageData(R,A),ge=0;ge<u.length;++ge)pe.data[ge]=u[ge];ee.putImageData(pe,0,0),pe=null;var O=document.createElement("canvas"),j=O.getContext("2d"),Y=0,V=0,N=A,q=R;if(this.options.cropImageByInnerWH===!0){for(var $=[],F=0,B=0;B<A;++B){F=0;for(var Q=0;Q<R;++Q)u[4*B*R+4*Q+4]===0&&F++;F===R&&$.push(B)}var X=this._getMinAndMaxOnValuesBreak($);Y=X.min;for(var _e=R,me=X.max,We=[],ae=0,ve=V;ve<_e;++ve){ae=0;for(var ye=0;ye<A;++ye)u[4*ye*R+4*ve+4]===0&&ae++;ae===A&&We.push(ve)}var J=this._getMinAndMaxOnValuesBreak(We);V=J.min,_e=J.max,(V===0&&_e===0||_e===null)&&(_e=R),(Y===0&&me===0||me===null)&&(me=A),this.options.debugMode===!0&&(console.log("emptyYLine",$),console.log("minMaxY",X),console.log("emptyXLine",We),console.log("minMaxX",J),console.log("debugX",{}),console.log("debugY",{})),Y===0&&me===A&&V===0&&_e===R||(Y+=this.options.onCropBorderSize,me-=this.options.onCropBorderSize,V+=this.options.onCropBorderSize,_e-=this.options.onCropBorderSize),N=me-Y,q=_e-V,O.width=q,O.height=N}else O.width=q,O.height=N;var se=null;return v&&(se=typeof v=="function"?v.call(this):v),se!==null&&(O.height=O.height+(p+m+p),j.beginPath(),j.rect(0,0,O.width,O.height),j.fillStyle=k,j.fill(),j.save()),j.drawImage(G,V,Y,q,N,0,0,q,N),se!==null&&(j.font=m+"px "+S,j.fillStyle=E,j.fillText(se,p,N+p+m)),Promise.resolve(O)},_getMinAndMaxOnValuesBreak:function(u){for(var h=0,p=0,v=!1,m=1;m<u.length;m++){if(u[m]-1!==u[m-1]){p=u[m],v=!0;break}h=u[m]}return v===!1&&u[0]>1?(h=0,p=u[0]):v===!1&&(h=u[u.length-1]||0,p=null),{min:h,max:p}},_getPixelData:function(u){var h=this,p=u.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(m){return console.warn("May be map size very big on that zoom level, we have error:",m.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),h._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=this._map.getContainer();return this._node={node:h,screenHeight:h.scrollHeight,screenWidth:h.scrollWidth},s.toPixelData(h,u)},_getPixelDataOfBigMap:function(){var u=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var m=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,h).then(function(S){return m(),S}).catch(function(S){return m(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?u.options.onPixelDataFail({plugin:u,node:p,mapPane:v,error:S,domtoimageOptions:h}):Promise.reject(S)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var u=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,h=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(u)),h.appendChild(p)},_onScreenBtn:function(){var u=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(h){var p=typeof u.options.screenName=="function"?u.options.screenName.call(u):u.options.screenName;o.saveAs(h,p+".png")}).catch(function(h){u._map.fire("simpleMapScreenshoter.error",{e:h})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var u=this;return new Promise(function(h){var p=setInterval(function(){u._interaction||(h(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(u){return new L.Control.SimpleMapScreenshoter(u)},a);t.default=l,t.SimpleMapScreenshoter=a,Object.defineProperty(t,"__esModule",{value:!0})})})(a5,a5.exports);var El=63710088e-1,OE={centimeters:El*100,centimetres:El*100,degrees:360/(2*Math.PI),feet:El*3.28084,inches:El*39.37,kilometers:El/1e3,kilometres:El/1e3,meters:El,metres:El,miles:El/1609.344,millimeters:El*1e3,millimetres:El*1e3,nauticalmiles:El/1852,radians:1,yards:El*1.0936};function Dp(n,e,t={}){const r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=n,r}function Hv(n,e,t={}){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!l5(n[0])||!l5(n[1]))throw new Error("coordinates must contain numbers");return Dp({type:"Point",coordinates:n},e,t)}function qu(n,e,t={}){for(const i of n){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Dp({type:"Polygon",coordinates:n},e,t)}function yc(n,e,t={}){if(n.length<2)throw new Error("coordinates must be an array of two or more positions");return Dp({type:"LineString",coordinates:n},e,t)}function Yj(n,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function Kj(n,e,t={}){return Dp({type:"MultiPolygon",coordinates:n},e,t)}function Zj(n,e="kilometers"){const t=OE[e];if(!t)throw new Error(e+" units is invalid");return n*t}function Xj(n,e="kilometers"){const t=OE[e];if(!t)throw new Error(e+" units is invalid");return n/t}function wb(n){return n%(2*Math.PI)*180/Math.PI}function wc(n){return n%360*Math.PI/180}function l5(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function u5(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Jj(n){return n.type==="Feature"?n.geometry:n}function NE(n,e,t={}){if(t.final===!0)return Qj(n,e);const r=u5(n),i=u5(e),s=wc(r[0]),o=wc(i[0]),a=wc(r[1]),l=wc(i[1]),u=Math.sin(o-s)*Math.cos(l),h=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return wb(Math.atan2(u,h))}function Qj(n,e){let t=NE(e,n);return t=(t+180)%360,t}function ez(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function H2(n,e,t,r={}){const i=ez(n),s=wc(i[0]),o=wc(i[1]),a=wc(t),l=Xj(e,r.units),u=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),h=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(u)),p=wb(h),v=wb(u);return Hv([p,v],r.properties)}var c5=H2;function d5(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function G2(n,e,t={}){var r=d5(n),i=d5(e),s=wc(i[1]-r[1]),o=wc(i[0]-r[0]),a=wc(r[1]),l=wc(i[1]),u=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Zj(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),t.units)}var e_=G2;function tz(n,e,t={}){const i=Jj(n).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=NE(i[o],i[o-1])-180;return H2(i[o],a,l,t)}else return Hv(i[o])}else s+=G2(i[o],i[o+1],t);return Hv(i[i.length-1])}var h5=tz;function nz(n,e){var t,r,i,s,o,a,l,u,h,p,v=0,m=n.type==="FeatureCollection",S=n.type==="Feature",E=m?n.features.length:1;for(t=0;t<E;t++){for(a=m?n.features[t].geometry:S?n.geometry:n,u=m?n.features[t].properties:S?n.properties:{},h=m?n.features[t].bbox:S?n.bbox:void 0,p=m?n.features[t].id:S?n.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,u,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,u,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,u,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function rz(n,e,t){var r=t;return nz(n,function(i,s,o,a,l){s===0&&t===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function RE(n){return rz(n,(e,t)=>e+iz(t),0)}function iz(n){let e=0,t;switch(n.type){case"Polygon":return f5(n.coordinates);case"MultiPolygon":for(t=0;t<n.coordinates.length;t++)e+=f5(n.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function f5(n){let e=0;if(n&&n.length>0){e+=Math.abs(p5(n[0]));for(let t=1;t<n.length;t++)e-=Math.abs(p5(n[t]))}return e}var sz=El*El/2,t_=Math.PI/180;function p5(n){const e=n.length-1;if(e<=2)return 0;let t=0,r=0;for(;r<e;){const i=n[r],s=n[r+1===e?0:r+1],o=n[r+2>=e?(r+2)%e:r+2],a=i[0]*t_,l=s[1]*t_,u=o[0]*t_;t+=(u-a)*Math.sin(l),r++}return t*sz}var Uc=RE;function BE(n,e,t){if(n!==null)for(var r,i,s,o,a,l,u,h=0,p=0,v,m=n.type,S=m==="FeatureCollection",E=m==="Feature",k=S?n.features.length:1,T=0;T<k;T++){u=S?n.features[T].geometry:E?n.geometry:n,v=u?u.type==="GeometryCollection":!1,a=v?u.geometries.length:1;for(var A=0;A<a;A++){var R=0,G=0;if(o=v?u.geometries[A]:u,o!==null){l=o.coordinates;var ee=o.type;switch(h=ee==="Polygon"||ee==="MultiPolygon"?1:0,ee){case null:break;case"Point":if(e(l,p,T,R,G)===!1)return!1;p++,R++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,T,R,G)===!1)return!1;p++,ee==="MultiPoint"&&R++}ee==="LineString"&&R++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(e(l[r][i],p,T,R,G)===!1)return!1;p++}ee==="MultiLineString"&&R++,ee==="Polygon"&&G++}ee==="Polygon"&&R++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(G=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(e(l[r][i][s],p,T,R,G)===!1)return!1;p++}G++}R++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(BE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function oz(n,e={}){let t=0,r=0,i=0;return BE(n,function(s){t+=s[0],r+=s[1],i++}),Hv([t/i,r/i],e.properties)}var qg=oz;function az(n,e,t={}){const r=t.steps||64,i=t.properties?t.properties:!Array.isArray(n)&&n.type==="Feature"&&n.properties?n.properties:{},s=[];for(let o=0;o<r;o++)s.push(H2(n,e,o*-360/r,t).geometry.coordinates);return s.push(s[0]),qu([s],i)}var lz=az,uz=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n_=Math.ceil,Gu=Math.floor,Xl="[BigNumber Error] ",g5=Xl+"Number primitive has more than 15 significant digits: ",dc=1e14,ni=14,m5=9007199254740991,r_=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],eh=1e7,wu=1e9;function FE(n){var e,t,r,i=A.prototype={constructor:A,toString:null,valueOf:null},s=new A(1),o=20,a=4,l=-7,u=21,h=-1e7,p=1e7,v=!1,m=1,S=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},k="0123456789abcdefghijklmnopqrstuvwxyz",T=!0;function A(O,j){var Y,V,N,q,$,F,B,Q,X=this;if(!(X instanceof A))return new A(O,j);if(j==null){if(O&&O._isBigNumber===!0){X.s=O.s,!O.c||O.e>p?X.c=X.e=null:O.e<h?X.c=[X.e=0]:(X.e=O.e,X.c=O.c.slice());return}if((F=typeof O=="number")&&O*0==0){if(X.s=1/O<0?(O=-O,-1):1,O===~~O){for(q=0,$=O;$>=10;$/=10,q++);q>p?X.c=X.e=null:(X.e=q,X.c=[O]);return}Q=String(O)}else{if(!uz.test(Q=String(O)))return r(X,Q,F);X.s=Q.charCodeAt(0)==45?(Q=Q.slice(1),-1):1}(q=Q.indexOf("."))>-1&&(Q=Q.replace(".","")),($=Q.search(/e/i))>0?(q<0&&(q=$),q+=+Q.slice($+1),Q=Q.substring(0,$)):q<0&&(q=Q.length)}else{if(po(j,2,k.length,"Base"),j==10&&T)return X=new A(O),pe(X,o+X.e+1,a);if(Q=String(O),F=typeof O=="number"){if(O*0!=0)return r(X,Q,F,j);if(X.s=1/O<0?(Q=Q.slice(1),-1):1,A.DEBUG&&Q.replace(/^0\.0*|\./,"").length>15)throw Error(g5+O)}else X.s=Q.charCodeAt(0)===45?(Q=Q.slice(1),-1):1;for(Y=k.slice(0,j),q=$=0,B=Q.length;$<B;$++)if(Y.indexOf(V=Q.charAt($))<0){if(V=="."){if($>q){q=B;continue}}else if(!N&&(Q==Q.toUpperCase()&&(Q=Q.toLowerCase())||Q==Q.toLowerCase()&&(Q=Q.toUpperCase()))){N=!0,$=-1,q=0;continue}return r(X,String(O),F,j)}F=!1,Q=t(Q,j,10,X.s),(q=Q.indexOf("."))>-1?Q=Q.replace(".",""):q=Q.length}for($=0;Q.charCodeAt($)===48;$++);for(B=Q.length;Q.charCodeAt(--B)===48;);if(Q=Q.slice($,++B)){if(B-=$,F&&A.DEBUG&&B>15&&(O>m5||O!==Gu(O)))throw Error(g5+X.s*O);if((q=q-$-1)>p)X.c=X.e=null;else if(q<h)X.c=[X.e=0];else{if(X.e=q,X.c=[],$=(q+1)%ni,q<0&&($+=ni),$<B){for($&&X.c.push(+Q.slice(0,$)),B-=ni;$<B;)X.c.push(+Q.slice($,$+=ni));$=ni-(Q=Q.slice($)).length}else $-=B;for(;$--;Q+="0");X.c.push(+Q)}}else X.c=[X.e=0]}A.clone=FE,A.ROUND_UP=0,A.ROUND_DOWN=1,A.ROUND_CEIL=2,A.ROUND_FLOOR=3,A.ROUND_HALF_UP=4,A.ROUND_HALF_DOWN=5,A.ROUND_HALF_EVEN=6,A.ROUND_HALF_CEIL=7,A.ROUND_HALF_FLOOR=8,A.EUCLID=9,A.config=A.set=function(O){var j,Y;if(O!=null)if(typeof O=="object"){if(O.hasOwnProperty(j="DECIMAL_PLACES")&&(Y=O[j],po(Y,0,wu,j),o=Y),O.hasOwnProperty(j="ROUNDING_MODE")&&(Y=O[j],po(Y,0,8,j),a=Y),O.hasOwnProperty(j="EXPONENTIAL_AT")&&(Y=O[j],Y&&Y.pop?(po(Y[0],-1e9,0,j),po(Y[1],0,wu,j),l=Y[0],u=Y[1]):(po(Y,-1e9,wu,j),l=-(u=Y<0?-Y:Y))),O.hasOwnProperty(j="RANGE"))if(Y=O[j],Y&&Y.pop)po(Y[0],-1e9,-1,j),po(Y[1],1,wu,j),h=Y[0],p=Y[1];else if(po(Y,-1e9,wu,j),Y)h=-(p=Y<0?-Y:Y);else throw Error(Xl+j+" cannot be zero: "+Y);if(O.hasOwnProperty(j="CRYPTO"))if(Y=O[j],Y===!!Y)if(Y)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=Y;else throw v=!Y,Error(Xl+"crypto unavailable");else v=Y;else throw Error(Xl+j+" not true or false: "+Y);if(O.hasOwnProperty(j="MODULO_MODE")&&(Y=O[j],po(Y,0,9,j),m=Y),O.hasOwnProperty(j="POW_PRECISION")&&(Y=O[j],po(Y,0,wu,j),S=Y),O.hasOwnProperty(j="FORMAT"))if(Y=O[j],typeof Y=="object")E=Y;else throw Error(Xl+j+" not an object: "+Y);if(O.hasOwnProperty(j="ALPHABET"))if(Y=O[j],typeof Y=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Y))T=Y.slice(0,10)=="0123456789",k=Y;else throw Error(Xl+j+" invalid: "+Y)}else throw Error(Xl+"Object expected: "+O);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,u],RANGE:[h,p],CRYPTO:v,MODULO_MODE:m,POW_PRECISION:S,FORMAT:E,ALPHABET:k}},A.isBigNumber=function(O){if(!O||O._isBigNumber!==!0)return!1;if(!A.DEBUG)return!0;var j,Y,V=O.c,N=O.e,q=O.s;e:if({}.toString.call(V)=="[object Array]"){if((q===1||q===-1)&&N>=-1e9&&N<=wu&&N===Gu(N)){if(V[0]===0){if(N===0&&V.length===1)return!0;break e}if(j=(N+1)%ni,j<1&&(j+=ni),String(V[0]).length==j){for(j=0;j<V.length;j++)if(Y=V[j],Y<0||Y>=dc||Y!==Gu(Y))break e;if(Y!==0)return!0}}}else if(V===null&&N===null&&(q===null||q===1||q===-1))return!0;throw Error(Xl+"Invalid BigNumber: "+O)},A.maximum=A.max=function(){return G(arguments,-1)},A.minimum=A.min=function(){return G(arguments,1)},A.random=function(){var O=9007199254740992,j=Math.random()*O&2097151?function(){return Gu(Math.random()*O)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Y){var V,N,q,$,F,B=0,Q=[],X=new A(s);if(Y==null?Y=o:po(Y,0,wu),$=n_(Y/ni),v)if(crypto.getRandomValues){for(V=crypto.getRandomValues(new Uint32Array($*=2));B<$;)F=V[B]*131072+(V[B+1]>>>11),F>=9e15?(N=crypto.getRandomValues(new Uint32Array(2)),V[B]=N[0],V[B+1]=N[1]):(Q.push(F%1e14),B+=2);B=$/2}else if(crypto.randomBytes){for(V=crypto.randomBytes($*=7);B<$;)F=(V[B]&31)*281474976710656+V[B+1]*1099511627776+V[B+2]*4294967296+V[B+3]*16777216+(V[B+4]<<16)+(V[B+5]<<8)+V[B+6],F>=9e15?crypto.randomBytes(7).copy(V,B):(Q.push(F%1e14),B+=7);B=$/7}else throw v=!1,Error(Xl+"crypto unavailable");if(!v)for(;B<$;)F=j(),F<9e15&&(Q[B++]=F%1e14);for($=Q[--B],Y%=ni,$&&Y&&(F=r_[ni-Y],Q[B]=Gu($/F)*F);Q[B]===0;Q.pop(),B--);if(B<0)Q=[q=0];else{for(q=-1;Q[0]===0;Q.splice(0,1),q-=ni);for(B=1,F=Q[0];F>=10;F/=10,B++);B<ni&&(q-=ni-B)}return X.e=q,X.c=Q,X}}(),A.sum=function(){for(var O=1,j=arguments,Y=new A(j[0]);O<j.length;)Y=Y.plus(j[O++]);return Y},t=function(){var O="0123456789";function j(Y,V,N,q){for(var $,F=[0],B,Q=0,X=Y.length;Q<X;){for(B=F.length;B--;F[B]*=V);for(F[0]+=q.indexOf(Y.charAt(Q++)),$=0;$<F.length;$++)F[$]>N-1&&(F[$+1]==null&&(F[$+1]=0),F[$+1]+=F[$]/N|0,F[$]%=N)}return F.reverse()}return function(Y,V,N,q,$){var F,B,Q,X,_e,me,We,ae,ve=Y.indexOf("."),ye=o,J=a;for(ve>=0&&(X=S,S=0,Y=Y.replace(".",""),ae=new A(V),me=ae.pow(Y.length-ve),S=X,ae.c=j(Ld(Uu(me.c),me.e,"0"),10,N,O),ae.e=ae.c.length),We=j(Y,V,N,$?(F=k,O):(F=O,k)),Q=X=We.length;We[--X]==0;We.pop());if(!We[0])return F.charAt(0);if(ve<0?--Q:(me.c=We,me.e=Q,me.s=q,me=e(me,ae,ye,J,N),We=me.c,_e=me.r,Q=me.e),B=Q+ye+1,ve=We[B],X=N/2,_e=_e||B<0||We[B+1]!=null,_e=J<4?(ve!=null||_e)&&(J==0||J==(me.s<0?3:2)):ve>X||ve==X&&(J==4||_e||J==6&&We[B-1]&1||J==(me.s<0?8:7)),B<1||!We[0])Y=_e?Ld(F.charAt(1),-ye,F.charAt(0)):F.charAt(0);else{if(We.length=B,_e)for(--N;++We[--B]>N;)We[B]=0,B||(++Q,We=[1].concat(We));for(X=We.length;!We[--X];);for(ve=0,Y="";ve<=X;Y+=F.charAt(We[ve++]));Y=Ld(Y,Q,F.charAt(0))}return Y}}(),e=function(){function O(V,N,q){var $,F,B,Q,X=0,_e=V.length,me=N%eh,We=N/eh|0;for(V=V.slice();_e--;)B=V[_e]%eh,Q=V[_e]/eh|0,$=We*B+Q*me,F=me*B+$%eh*eh+X,X=(F/q|0)+($/eh|0)+We*Q,V[_e]=F%q;return X&&(V=[X].concat(V)),V}function j(V,N,q,$){var F,B;if(q!=$)B=q>$?1:-1;else for(F=B=0;F<q;F++)if(V[F]!=N[F]){B=V[F]>N[F]?1:-1;break}return B}function Y(V,N,q,$){for(var F=0;q--;)V[q]-=F,F=V[q]<N[q]?1:0,V[q]=F*$+V[q]-N[q];for(;!V[0]&&V.length>1;V.splice(0,1));}return function(V,N,q,$,F){var B,Q,X,_e,me,We,ae,ve,ye,J,se,fe,ie,te,Oe,we,Be,ue=V.s==N.s?1:-1,re=V.c,Z=N.c;if(!re||!re[0]||!Z||!Z[0])return new A(!V.s||!N.s||(re?Z&&re[0]==Z[0]:!Z)?NaN:re&&re[0]==0||!Z?ue*0:ue/0);for(ve=new A(ue),ye=ve.c=[],Q=V.e-N.e,ue=q+Q+1,F||(F=dc,Q=Wu(V.e/ni)-Wu(N.e/ni),ue=ue/ni|0),X=0;Z[X]==(re[X]||0);X++);if(Z[X]>(re[X]||0)&&Q--,ue<0)ye.push(1),_e=!0;else{for(te=re.length,we=Z.length,X=0,ue+=2,me=Gu(F/(Z[0]+1)),me>1&&(Z=O(Z,me,F),re=O(re,me,F),we=Z.length,te=re.length),ie=we,J=re.slice(0,we),se=J.length;se<we;J[se++]=0);Be=Z.slice(),Be=[0].concat(Be),Oe=Z[0],Z[1]>=F/2&&Oe++;do{if(me=0,B=j(Z,J,we,se),B<0){if(fe=J[0],we!=se&&(fe=fe*F+(J[1]||0)),me=Gu(fe/Oe),me>1)for(me>=F&&(me=F-1),We=O(Z,me,F),ae=We.length,se=J.length;j(We,J,ae,se)==1;)me--,Y(We,we<ae?Be:Z,ae,F),ae=We.length,B=1;else me==0&&(B=me=1),We=Z.slice(),ae=We.length;if(ae<se&&(We=[0].concat(We)),Y(J,We,se,F),se=J.length,B==-1)for(;j(Z,J,we,se)<1;)me++,Y(J,we<se?Be:Z,se,F),se=J.length}else B===0&&(me++,J=[0]);ye[X++]=me,J[0]?J[se++]=re[ie]||0:(J=[re[ie]],se=1)}while((ie++<te||J[0]!=null)&&ue--);_e=J[0]!=null,ye[0]||ye.splice(0,1)}if(F==dc){for(X=1,ue=ye[0];ue>=10;ue/=10,X++);pe(ve,q+(ve.e=X+Q*ni-1)+1,$,_e)}else ve.e=Q,ve.r=+_e;return ve}}();function R(O,j,Y,V){var N,q,$,F,B;if(Y==null?Y=a:po(Y,0,8),!O.c)return O.toString();if(N=O.c[0],$=O.e,j==null)B=Uu(O.c),B=V==1||V==2&&($<=l||$>=u)?S0(B,$):Ld(B,$,"0");else if(O=pe(new A(O),j,Y),q=O.e,B=Uu(O.c),F=B.length,V==1||V==2&&(j<=q||q<=l)){for(;F<j;B+="0",F++);B=S0(B,q)}else if(j-=$,B=Ld(B,q,"0"),q+1>F){if(--j>0)for(B+=".";j--;B+="0");}else if(j+=q-F,j>0)for(q+1==F&&(B+=".");j--;B+="0");return O.s<0&&N?"-"+B:B}function G(O,j){for(var Y,V,N=1,q=new A(O[0]);N<O.length;N++)V=new A(O[N]),(!V.s||(Y=Gh(q,V))===j||Y===0&&q.s===j)&&(q=V);return q}function ee(O,j,Y){for(var V=1,N=j.length;!j[--N];j.pop());for(N=j[0];N>=10;N/=10,V++);return(Y=V+Y*ni-1)>p?O.c=O.e=null:Y<h?O.c=[O.e=0]:(O.e=Y,O.c=j),O}r=function(){var O=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,Y=/^\.([^.]+)$/,V=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(q,$,F,B){var Q,X=F?$:$.replace(N,"");if(V.test(X))q.s=isNaN(X)?null:X<0?-1:1;else{if(!F&&(X=X.replace(O,function(_e,me,We){return Q=(We=We.toLowerCase())=="x"?16:We=="b"?2:8,!B||B==Q?me:_e}),B&&(Q=B,X=X.replace(j,"$1").replace(Y,"0.$1")),$!=X))return new A(X,Q);if(A.DEBUG)throw Error(Xl+"Not a"+(B?" base "+B:"")+" number: "+$);q.s=null}q.c=q.e=null}}();function pe(O,j,Y,V){var N,q,$,F,B,Q,X,_e=O.c,me=r_;if(_e){e:{for(N=1,F=_e[0];F>=10;F/=10,N++);if(q=j-N,q<0)q+=ni,$=j,B=_e[Q=0],X=Gu(B/me[N-$-1]%10);else if(Q=n_((q+1)/ni),Q>=_e.length)if(V){for(;_e.length<=Q;_e.push(0));B=X=0,N=1,q%=ni,$=q-ni+1}else break e;else{for(B=F=_e[Q],N=1;F>=10;F/=10,N++);q%=ni,$=q-ni+N,X=$<0?0:Gu(B/me[N-$-1]%10)}if(V=V||j<0||_e[Q+1]!=null||($<0?B:B%me[N-$-1]),V=Y<4?(X||V)&&(Y==0||Y==(O.s<0?3:2)):X>5||X==5&&(Y==4||V||Y==6&&(q>0?$>0?B/me[N-$]:0:_e[Q-1])%10&1||Y==(O.s<0?8:7)),j<1||!_e[0])return _e.length=0,V?(j-=O.e+1,_e[0]=me[(ni-j%ni)%ni],O.e=-j||0):_e[0]=O.e=0,O;if(q==0?(_e.length=Q,F=1,Q--):(_e.length=Q+1,F=me[ni-q],_e[Q]=$>0?Gu(B/me[N-$]%me[$])*F:0),V)for(;;)if(Q==0){for(q=1,$=_e[0];$>=10;$/=10,q++);for($=_e[0]+=F,F=1;$>=10;$/=10,F++);q!=F&&(O.e++,_e[0]==dc&&(_e[0]=1));break}else{if(_e[Q]+=F,_e[Q]!=dc)break;_e[Q--]=0,F=1}for(q=_e.length;_e[--q]===0;_e.pop());}O.e>p?O.c=O.e=null:O.e<h&&(O.c=[O.e=0])}return O}function ge(O){var j,Y=O.e;return Y===null?O.toString():(j=Uu(O.c),j=Y<=l||Y>=u?S0(j,Y):Ld(j,Y,"0"),O.s<0?"-"+j:j)}return i.absoluteValue=i.abs=function(){var O=new A(this);return O.s<0&&(O.s=1),O},i.comparedTo=function(O,j){return Gh(this,new A(O,j))},i.decimalPlaces=i.dp=function(O,j){var Y,V,N,q=this;if(O!=null)return po(O,0,wu),j==null?j=a:po(j,0,8),pe(new A(q),O+q.e+1,j);if(!(Y=q.c))return null;if(V=((N=Y.length-1)-Wu(this.e/ni))*ni,N=Y[N])for(;N%10==0;N/=10,V--);return V<0&&(V=0),V},i.dividedBy=i.div=function(O,j){return e(this,new A(O,j),o,a)},i.dividedToIntegerBy=i.idiv=function(O,j){return e(this,new A(O,j),0,1)},i.exponentiatedBy=i.pow=function(O,j){var Y,V,N,q,$,F,B,Q,X,_e=this;if(O=new A(O),O.c&&!O.isInteger())throw Error(Xl+"Exponent not an integer: "+ge(O));if(j!=null&&(j=new A(j)),F=O.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!O.c||!O.c[0])return X=new A(Math.pow(+ge(_e),F?O.s*(2-L0(O)):+ge(O))),j?X.mod(j):X;if(B=O.s<0,j){if(j.c?!j.c[0]:!j.s)return new A(NaN);V=!B&&_e.isInteger()&&j.isInteger(),V&&(_e=_e.mod(j))}else{if(O.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||F&&_e.c[1]>=24e7:_e.c[0]<8e13||F&&_e.c[0]<=9999975e7)))return q=_e.s<0&&L0(O)?-0:0,_e.e>-1&&(q=1/q),new A(B?1/q:q);S&&(q=n_(S/ni+2))}for(F?(Y=new A(.5),B&&(O.s=1),Q=L0(O)):(N=Math.abs(+ge(O)),Q=N%2),X=new A(s);;){if(Q){if(X=X.times(_e),!X.c)break;q?X.c.length>q&&(X.c.length=q):V&&(X=X.mod(j))}if(N){if(N=Gu(N/2),N===0)break;Q=N%2}else if(O=O.times(Y),pe(O,O.e+1,1),O.e>14)Q=L0(O);else{if(N=+ge(O),N===0)break;Q=N%2}_e=_e.times(_e),q?_e.c&&_e.c.length>q&&(_e.c.length=q):V&&(_e=_e.mod(j))}return V?X:(B&&(X=s.div(X)),j?X.mod(j):q?pe(X,S,a,$):X)},i.integerValue=function(O){var j=new A(this);return O==null?O=a:po(O,0,8),pe(j,j.e+1,O)},i.isEqualTo=i.eq=function(O,j){return Gh(this,new A(O,j))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(O,j){return Gh(this,new A(O,j))>0},i.isGreaterThanOrEqualTo=i.gte=function(O,j){return(j=Gh(this,new A(O,j)))===1||j===0},i.isInteger=function(){return!!this.c&&Wu(this.e/ni)>this.c.length-2},i.isLessThan=i.lt=function(O,j){return Gh(this,new A(O,j))<0},i.isLessThanOrEqualTo=i.lte=function(O,j){return(j=Gh(this,new A(O,j)))===-1||j===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(O,j){var Y,V,N,q,$=this,F=$.s;if(O=new A(O,j),j=O.s,!F||!j)return new A(NaN);if(F!=j)return O.s=-j,$.plus(O);var B=$.e/ni,Q=O.e/ni,X=$.c,_e=O.c;if(!B||!Q){if(!X||!_e)return X?(O.s=-j,O):new A(_e?$:NaN);if(!X[0]||!_e[0])return _e[0]?(O.s=-j,O):new A(X[0]?$:a==3?-0:0)}if(B=Wu(B),Q=Wu(Q),X=X.slice(),F=B-Q){for((q=F<0)?(F=-F,N=X):(Q=B,N=_e),N.reverse(),j=F;j--;N.push(0));N.reverse()}else for(V=(q=(F=X.length)<(j=_e.length))?F:j,F=j=0;j<V;j++)if(X[j]!=_e[j]){q=X[j]<_e[j];break}if(q&&(N=X,X=_e,_e=N,O.s=-O.s),j=(V=_e.length)-(Y=X.length),j>0)for(;j--;X[Y++]=0);for(j=dc-1;V>F;){if(X[--V]<_e[V]){for(Y=V;Y&&!X[--Y];X[Y]=j);--X[Y],X[V]+=dc}X[V]-=_e[V]}for(;X[0]==0;X.splice(0,1),--Q);return X[0]?ee(O,X,Q):(O.s=a==3?-1:1,O.c=[O.e=0],O)},i.modulo=i.mod=function(O,j){var Y,V,N=this;return O=new A(O,j),!N.c||!O.s||O.c&&!O.c[0]?new A(NaN):!O.c||N.c&&!N.c[0]?new A(N):(m==9?(V=O.s,O.s=1,Y=e(N,O,0,3),O.s=V,Y.s*=V):Y=e(N,O,0,m),O=N.minus(Y.times(O)),!O.c[0]&&m==1&&(O.s=N.s),O)},i.multipliedBy=i.times=function(O,j){var Y,V,N,q,$,F,B,Q,X,_e,me,We,ae,ve,ye,J=this,se=J.c,fe=(O=new A(O,j)).c;if(!se||!fe||!se[0]||!fe[0])return!J.s||!O.s||se&&!se[0]&&!fe||fe&&!fe[0]&&!se?O.c=O.e=O.s=null:(O.s*=J.s,!se||!fe?O.c=O.e=null:(O.c=[0],O.e=0)),O;for(V=Wu(J.e/ni)+Wu(O.e/ni),O.s*=J.s,B=se.length,_e=fe.length,B<_e&&(ae=se,se=fe,fe=ae,N=B,B=_e,_e=N),N=B+_e,ae=[];N--;ae.push(0));for(ve=dc,ye=eh,N=_e;--N>=0;){for(Y=0,me=fe[N]%ye,We=fe[N]/ye|0,$=B,q=N+$;q>N;)Q=se[--$]%ye,X=se[$]/ye|0,F=We*Q+X*me,Q=me*Q+F%ye*ye+ae[q]+Y,Y=(Q/ve|0)+(F/ye|0)+We*X,ae[q--]=Q%ve;ae[q]=Y}return Y?++V:ae.splice(0,1),ee(O,ae,V)},i.negated=function(){var O=new A(this);return O.s=-O.s||null,O},i.plus=function(O,j){var Y,V=this,N=V.s;if(O=new A(O,j),j=O.s,!N||!j)return new A(NaN);if(N!=j)return O.s=-j,V.minus(O);var q=V.e/ni,$=O.e/ni,F=V.c,B=O.c;if(!q||!$){if(!F||!B)return new A(N/0);if(!F[0]||!B[0])return B[0]?O:new A(F[0]?V:N*0)}if(q=Wu(q),$=Wu($),F=F.slice(),N=q-$){for(N>0?($=q,Y=B):(N=-N,Y=F),Y.reverse();N--;Y.push(0));Y.reverse()}for(N=F.length,j=B.length,N-j<0&&(Y=B,B=F,F=Y,j=N),N=0;j;)N=(F[--j]=F[j]+B[j]+N)/dc|0,F[j]=dc===F[j]?0:F[j]%dc;return N&&(F=[N].concat(F),++$),ee(O,F,$)},i.precision=i.sd=function(O,j){var Y,V,N,q=this;if(O!=null&&O!==!!O)return po(O,1,wu),j==null?j=a:po(j,0,8),pe(new A(q),O,j);if(!(Y=q.c))return null;if(N=Y.length-1,V=N*ni+1,N=Y[N]){for(;N%10==0;N/=10,V--);for(N=Y[0];N>=10;N/=10,V++);}return O&&q.e+1>V&&(V=q.e+1),V},i.shiftedBy=function(O){return po(O,-9007199254740991,m5),this.times("1e"+O)},i.squareRoot=i.sqrt=function(){var O,j,Y,V,N,q=this,$=q.c,F=q.s,B=q.e,Q=o+4,X=new A("0.5");if(F!==1||!$||!$[0])return new A(!F||F<0&&(!$||$[0])?NaN:$?q:1/0);if(F=Math.sqrt(+ge(q)),F==0||F==1/0?(j=Uu($),(j.length+B)%2==0&&(j+="0"),F=Math.sqrt(+j),B=Wu((B+1)/2)-(B<0||B%2),F==1/0?j="5e"+B:(j=F.toExponential(),j=j.slice(0,j.indexOf("e")+1)+B),Y=new A(j)):Y=new A(F+""),Y.c[0]){for(B=Y.e,F=B+Q,F<3&&(F=0);;)if(N=Y,Y=X.times(N.plus(e(q,N,Q,1))),Uu(N.c).slice(0,F)===(j=Uu(Y.c)).slice(0,F))if(Y.e<B&&--F,j=j.slice(F-3,F+1),j=="9999"||!V&&j=="4999"){if(!V&&(pe(N,N.e+o+2,0),N.times(N).eq(q))){Y=N;break}Q+=4,F+=4,V=1}else{(!+j||!+j.slice(1)&&j.charAt(0)=="5")&&(pe(Y,Y.e+o+2,1),O=!Y.times(Y).eq(q));break}}return pe(Y,Y.e+o+1,a,O)},i.toExponential=function(O,j){return O!=null&&(po(O,0,wu),O++),R(this,O,j,1)},i.toFixed=function(O,j){return O!=null&&(po(O,0,wu),O=O+this.e+1),R(this,O,j)},i.toFormat=function(O,j,Y){var V,N=this;if(Y==null)O!=null&&j&&typeof j=="object"?(Y=j,j=null):O&&typeof O=="object"?(Y=O,O=j=null):Y=E;else if(typeof Y!="object")throw Error(Xl+"Argument not an object: "+Y);if(V=N.toFixed(O,j),N.c){var q,$=V.split("."),F=+Y.groupSize,B=+Y.secondaryGroupSize,Q=Y.groupSeparator||"",X=$[0],_e=$[1],me=N.s<0,We=me?X.slice(1):X,ae=We.length;if(B&&(q=F,F=B,B=q,ae-=q),F>0&&ae>0){for(q=ae%F||F,X=We.substr(0,q);q<ae;q+=F)X+=Q+We.substr(q,F);B>0&&(X+=Q+We.slice(q)),me&&(X="-"+X)}V=_e?X+(Y.decimalSeparator||"")+((B=+Y.fractionGroupSize)?_e.replace(new RegExp("\\d{"+B+"}\\B","g"),"$&"+(Y.fractionGroupSeparator||"")):_e):X}return(Y.prefix||"")+V+(Y.suffix||"")},i.toFraction=function(O){var j,Y,V,N,q,$,F,B,Q,X,_e,me,We=this,ae=We.c;if(O!=null&&(F=new A(O),!F.isInteger()&&(F.c||F.s!==1)||F.lt(s)))throw Error(Xl+"Argument "+(F.isInteger()?"out of range: ":"not an integer: ")+ge(F));if(!ae)return new A(We);for(j=new A(s),Q=Y=new A(s),V=B=new A(s),me=Uu(ae),q=j.e=me.length-We.e-1,j.c[0]=r_[($=q%ni)<0?ni+$:$],O=!O||F.comparedTo(j)>0?q>0?j:Q:F,$=p,p=1/0,F=new A(me),B.c[0]=0;X=e(F,j,0,1),N=Y.plus(X.times(V)),N.comparedTo(O)!=1;)Y=V,V=N,Q=B.plus(X.times(N=Q)),B=N,j=F.minus(X.times(N=j)),F=N;return N=e(O.minus(Y),V,0,1),B=B.plus(N.times(Q)),Y=Y.plus(N.times(V)),B.s=Q.s=We.s,q=q*2,_e=e(Q,V,q,a).minus(We).abs().comparedTo(e(B,Y,q,a).minus(We).abs())<1?[Q,V]:[B,Y],p=$,_e},i.toNumber=function(){return+ge(this)},i.toPrecision=function(O,j){return O!=null&&po(O,1,wu),R(this,O,j,2)},i.toString=function(O){var j,Y=this,V=Y.s,N=Y.e;return N===null?V?(j="Infinity",V<0&&(j="-"+j)):j="NaN":(O==null?j=N<=l||N>=u?S0(Uu(Y.c),N):Ld(Uu(Y.c),N,"0"):O===10&&T?(Y=pe(new A(Y),o+N+1,a),j=Ld(Uu(Y.c),Y.e,"0")):(po(O,2,k.length,"Base"),j=t(Ld(Uu(Y.c),N,"0"),10,O,V,!0)),V<0&&Y.c[0]&&(j="-"+j)),j},i.valueOf=i.toJSON=function(){return ge(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,n!=null&&A.set(n),A}function Wu(n){var e=n|0;return n>0||n===e?e:e-1}function Uu(n){for(var e,t,r=1,i=n.length,s=n[0]+"";r<i;){for(e=n[r++]+"",t=ni-e.length;t--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Gh(n,e){var t,r,i=n.c,s=e.c,o=n.s,a=e.s,l=n.e,u=e.e;if(!o||!a)return null;if(t=i&&!i[0],r=s&&!s[0],t||r)return t?r?0:-a:o;if(o!=a)return o;if(t=o<0,r=l==u,!i||!s)return r?0:!i^t?1:-1;if(!r)return l>u^t?1:-1;for(a=(l=i.length)<(u=s.length)?l:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^t?1:-1;return l==u?0:l>u^t?1:-1}function po(n,e,t,r){if(n<e||n>t||n!==Gu(n))throw Error(Xl+(r||"Argument")+(typeof n=="number"?n<e||n>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}function L0(n){var e=n.c.length-1;return Wu(n.e/ni)==e&&n.c[e]%2!=0}function S0(n,e){return(n.length>1?n.charAt(0)+"."+n.slice(1):n)+(e<0?"e":"e+")+e}function Ld(n,e,t){var r,i;if(e<0){for(i=t+".";++e;i+=t);n=i+n}else if(r=n.length,++e>r){for(i=t,e-=r;--e;i+=t);n+=i}else e<r&&(n=n.slice(0,e)+"."+n.slice(e));return n}var Qc=FE(),cz=class{constructor(n){tt(this,"key");tt(this,"left",null);tt(this,"right",null);this.key=n}},sg=class extends cz{constructor(n){super(n)}},dz=class{constructor(){tt(this,"size",0);tt(this,"modificationCount",0);tt(this,"splayCount",0)}splay(n){const e=this.root;if(e==null)return this.compare(n,n),-1;let t=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,n),l>0){let u=o.left;if(u==null||(l=a(u.key,n),l>0&&(o.left=u.right,u.right=o,o=u,u=o.left,u==null)))break;t==null?r=o:t.left=o,t=o,o=u}else if(l<0){let u=o.right;if(u==null||(l=a(u.key,n),l<0&&(o.right=u.left,u.left=o,o=u,u=o.right,u==null)))break;i==null?s=o:i.right=o,i=o,o=u}else break;return i!=null&&(i.right=o.left,o.left=s),t!=null&&(t.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(n){let e=n,t=e.left;for(;t!=null;){const r=t;e.left=r.right,r.right=e,e=r,t=e.left}return e}splayMax(n){let e=n,t=e.right;for(;t!=null;){const r=t;e.right=r.left,r.left=e,e=r,t=e.right}return e}_delete(n){if(this.root==null||this.splay(n)!=0)return null;let t=this.root;const r=t,i=t.left;if(this.size--,i==null)this.root=t.right;else{const s=t.right;t=this.splayMax(i),t.right=s,this.root=t}return this.modificationCount++,r}addNewRoot(n,e){this.size++,this.modificationCount++;const t=this.root;if(t==null){this.root=n;return}e<0?(n.left=t,n.right=t.right,t.right=null):(n.right=t,n.left=t.left,t.left=null),this.root=n}_first(){const n=this.root;return n==null?null:(this.root=this.splayMin(n),this.root)}_last(){const n=this.root;return n==null?null:(this.root=this.splayMax(n),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(n){return this.validKey(n)&&this.splay(n)==0}defaultCompare(){return(n,e)=>n<e?-1:n>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:n=>{this.root=n},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:n=>{this.splayCount=n},splay:n=>this.splay(n),has:n=>this.has(n)}}},NL,RL,Gv=class Lg extends dz{constructor(t,r){super();tt(this,"root",null);tt(this,"compare");tt(this,"validKey");tt(this,NL,"[object Set]");this.compare=t??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(t){return this.validKey(t)?this._delete(t)!=null:!1}deleteAll(t){for(const r of t)this.delete(r)}forEach(t){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)t(i.value,i.value,this)}add(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new sg(t),r),this}addAndReturn(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new sg(t),r),this.root.key}addAll(t){for(const r of t)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(t){const r=new Lg(this.compare,this.validKey),i=this.modificationCount;for(const s of t){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(t){return!this.validKey(t)||this.splay(t)!=0?null:this.root.key}intersection(t){const r=new Lg(this.compare,this.validKey);for(const i of this)t.has(i)&&r.add(i);return r}difference(t){const r=new Lg(this.compare,this.validKey);for(const i of this)t.has(i)||r.add(i);return r}union(t){const r=this.clone();return r.addAll(t),r}clone(){const t=new Lg(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(t){if(t==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const u=new sg(a.key);o.left=u,r(a,u)}if(l!=null){const u=new sg(l.key);o.right=u,s=l,o=u}}while(l!=null)}const i=new sg(t.key);return r(t,i),i}toSet(){return this.clone()}entries(){return new fz(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(RL=Symbol.iterator,NL=Symbol.toStringTag,RL)](){return new hz(this.wrap())}},jE=class{constructor(n){tt(this,"tree");tt(this,"path",new Array);tt(this,"modificationCount",null);tt(this,"splayCount");this.tree=n,this.splayCount=n.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const n=this.path[this.path.length-1];return this.getValue(n)}rebuildPath(n){this.path.splice(0,this.path.length),this.tree.splay(n),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(n){for(;n!=null;)this.path.push(n),n=n.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let t=this.tree.getRoot();for(;t!=null;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let n=this.path[this.path.length-1],e=n.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===n;)n=this.path.pop();return this.path.length>0}},hz=class extends jE{getValue(n){return n.key}},fz=class extends jE{getValue(n){return[n.key,n.key]}},zE=n=>()=>n,xb=n=>{const e=n?(t,r)=>r.minus(t).abs().isLessThanOrEqualTo(n):zE(!1);return(t,r)=>e(t,r)?0:t.comparedTo(r)};function pz(n){const e=n?(t,r,i,s,o)=>t.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(n)):zE(!1);return(t,r,i)=>{const s=t.x,o=t.y,a=i.x,l=i.y,u=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(u,s,o,a,l)?0:u.comparedTo(0)}}var gz=n=>n,mz=n=>{if(n){const e=new Gv(xb(n)),t=new Gv(xb(n)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,t)});return i({x:new Qc(0),y:new Qc(0)}),i}return gz},Lb=n=>({set:e=>{$d=Lb(e)},reset:()=>Lb(n),compare:xb(n),snap:mz(n),orient:pz(n)}),$d=Lb(),og=(n,e)=>n.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(n.ur.x)&&n.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(n.ur.y),Sb=(n,e)=>{if(e.ur.x.isLessThan(n.ll.x)||n.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(n.ll.y)||n.ur.y.isLessThan(e.ll.y))return null;const t=n.ll.x.isLessThan(e.ll.x)?e.ll.x:n.ll.x,r=n.ur.x.isLessThan(e.ur.x)?n.ur.x:e.ur.x,i=n.ll.y.isLessThan(e.ll.y)?e.ll.y:n.ll.y,s=n.ur.y.isLessThan(e.ur.y)?n.ur.y:e.ur.y;return{ll:{x:t,y:i},ur:{x:r,y:s}}},sv=(n,e)=>n.x.times(e.y).minus(n.y.times(e.x)),$E=(n,e)=>n.x.times(e.x).plus(n.y.times(e.y)),Wv=n=>$E(n,n).sqrt(),vz=(n,e,t)=>{const r={x:e.x.minus(n.x),y:e.y.minus(n.y)},i={x:t.x.minus(n.x),y:t.y.minus(n.y)};return sv(i,r).div(Wv(i)).div(Wv(r))},yz=(n,e,t)=>{const r={x:e.x.minus(n.x),y:e.y.minus(n.y)},i={x:t.x.minus(n.x),y:t.y.minus(n.y)};return $E(i,r).div(Wv(i)).div(Wv(r))},v5=(n,e,t)=>e.y.isZero()?null:{x:n.x.plus(e.x.div(e.y).times(t.minus(n.y))),y:t},y5=(n,e,t)=>e.x.isZero()?null:{x:t,y:n.y.plus(e.y.div(e.x).times(t.minus(n.x)))},_z=(n,e,t,r)=>{if(e.x.isZero())return y5(t,r,n.x);if(r.x.isZero())return y5(n,e,t.x);if(e.y.isZero())return v5(t,r,n.y);if(r.y.isZero())return v5(n,e,t.y);const i=sv(e,r);if(i.isZero())return null;const s={x:t.x.minus(n.x),y:t.y.minus(n.y)},o=sv(s,e).div(i),a=sv(s,r).div(i),l=n.x.plus(a.times(e.x)),u=t.x.plus(o.times(r.x)),h=n.y.plus(a.times(e.y)),p=t.y.plus(o.times(r.y)),v=l.plus(u).div(2),m=h.plus(p).div(2);return{x:v,y:m}},Kc=class UE{constructor(e,t){tt(this,"point");tt(this,"isLeft");tt(this,"segment");tt(this,"otherSE");tt(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}static compare(e,t){const r=UE.comparePoints(e.point,t.point);return r!==0?r:(e.point!==t.point&&e.link(t),e.isLeft!==t.isLeft?e.isLeft?1:-1:qv.compare(e.segment,t.segment))}static comparePoints(e,t){return e.x.isLessThan(t.x)?-1:e.x.isGreaterThan(t.x)?1:e.y.isLessThan(t.y)?-1:e.y.isGreaterThan(t.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const t=e.point.events;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let t=0;t<e;t++){const r=this.point.events[t];if(r.segment.consumedBy===void 0)for(let i=t+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let t=0,r=this.point.events.length;t<r;t++){const i=this.point.events[t];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const t=new Map,r=i=>{const s=i.otherSE;t.set(i,{sine:vz(this.point,e.point,s.point),cosine:yz(this.point,e.point,s.point)})};return(i,s)=>{t.has(i)||r(i),t.has(s)||r(s);const{sine:o,cosine:a}=t.get(i),{sine:l,cosine:u}=t.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(u)?1:a.isGreaterThan(u)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(u)?-1:a.isGreaterThan(u)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},bz=class Cb{constructor(e){tt(this,"events");tt(this,"poly");tt(this,"_isExteriorRing");tt(this,"_enclosingRing");this.events=e;for(let t=0,r=e.length;t<r;t++)e[t].segment.ringOut=this;this.poly=null}static factory(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const u=[a],h=a.point,p=[];for(;o=a,a=l,u.push(a),a.point!==h;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const E=u[0].point,k=u[u.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${k.x}, ${k.y}].`)}if(v.length===1){l=v[0].otherSE;break}let m=null;for(let E=0,k=p.length;E<k;E++)if(p[E].point===a.point){m=E;break}if(m!==null){const E=p.splice(m)[0],k=u.splice(E.index);k.unshift(k[0].otherSE),t.push(new Cb(k.reverse()));continue}p.push({index:u.length,point:a.point});const S=a.getLeftmostComparator(o);l=v.sort(S)[0].otherSE;break}t.push(new Cb(u))}return t}getGeom(){let e=this.events[0].point;const t=[e];for(let u=1,h=this.events.length-1;u<h;u++){const p=this.events[u].point,v=this.events[u+1].point;$d.orient(p,e,v)!==0&&(t.push(p),e=p)}if(t.length===1)return null;const r=t[0],i=t[1];$d.orient(r,e,i)===0&&t.shift(),t.push(t[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:t.length-1,a=this.isExteriorRing()?t.length:-1,l=[];for(let u=o;u!=a;u+=s)l.push([t[u].x.toNumber(),t[u].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];Kc.compare(e,l)>0&&(e=l)}let t=e.segment.prevInResult(),r=t?t.prevInResult():null;for(;;){if(!t)return null;if(!r)return t.ringOut;if(r.ringOut!==t.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==t.ringOut?t.ringOut:(s=t.ringOut)==null?void 0:s.enclosingRing();t=r.prevInResult(),r=t?t.prevInResult():null}}},_5=class{constructor(n){tt(this,"exteriorRing");tt(this,"interiorRings");this.exteriorRing=n,n.poly=this,this.interiorRings=[]}addInterior(n){this.interiorRings.push(n),n.poly=this}getGeom(){const n=this.exteriorRing.getGeom();if(n===null)return null;const e=[n];for(let t=0,r=this.interiorRings.length;t<r;t++){const i=this.interiorRings[t].getGeom();i!==null&&e.push(i)}return e}},wz=class{constructor(n){tt(this,"rings");tt(this,"polys");this.rings=n,this.polys=this._composePolys(n)}getGeom(){const n=[];for(let e=0,t=this.polys.length;e<t;e++){const r=this.polys[e].getGeom();r!==null&&n.push(r)}return n}_composePolys(n){var t;const e=[];for(let r=0,i=n.length;r<i;r++){const s=n[r];if(!s.poly)if(s.isExteriorRing())e.push(new _5(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new _5(o)),(t=o==null?void 0:o.poly)==null||t.addInterior(s)}}return e}},xz=class{constructor(n,e=qv.compare){tt(this,"queue");tt(this,"tree");tt(this,"segments");this.queue=n,this.tree=new Gv(e),this.segments=[]}process(n){const e=n.segment,t=[];if(n.consumedBy)return n.isLeft?this.queue.delete(n.otherSE):this.tree.delete(e),t;n.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(n.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let u=0,h=l.length;u<h;u++)t.push(l[u])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let u=0,h=l.length;u<h;u++)t.push(l[u])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=Kc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),t.push(e.rightSE);const l=e.split(a);for(let u=0,h=l.length;u<h;u++)t.push(l[u])}t.length>0?(this.tree.delete(e),t.push(n)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)t.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)t.push(o[a])}}}this.tree.delete(e)}return t}_splitSafely(n,e){this.tree.delete(n);const t=n.rightSE;this.queue.delete(t);const r=n.split(e);return r.push(t),n.consumedBy===void 0&&this.tree.add(n),r}},Lz=class{constructor(){tt(this,"type");tt(this,"numMultiPolys")}run(n,e,t){Sg.type=n;const r=[new w5(e,!0)];for(let u=0,h=t.length;u<h;u++)r.push(new w5(t[u],!1));if(Sg.numMultiPolys=r.length,Sg.type==="difference"){const u=r[0];let h=1;for(;h<r.length;)Sb(r[h].bbox,u.bbox)!==null?h++:r.splice(h,1)}if(Sg.type==="intersection")for(let u=0,h=r.length;u<h;u++){const p=r[u];for(let v=u+1,m=r.length;v<m;v++)if(Sb(p.bbox,r[v].bbox)===null)return[]}const i=new Gv(Kc.compare);for(let u=0,h=r.length;u<h;u++){const p=r[u].getSweepEvents();for(let v=0,m=p.length;v<m;v++)i.add(p[v])}const s=new xz(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const u=s.process(o);for(let h=0,p=u.length;h<p;h++){const v=u[h];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}$d.reset();const a=bz.factory(s.segments);return new wz(a).getGeom()}},Sg=new Lz,Eb=Sg,Sz=0,qv=class ov{constructor(e,t,r,i){tt(this,"id");tt(this,"leftSE");tt(this,"rightSE");tt(this,"rings");tt(this,"windings");tt(this,"ringOut");tt(this,"consumedBy");tt(this,"prev");tt(this,"_prevInResult");tt(this,"_beforeState");tt(this,"_afterState");tt(this,"_isInResult");this.id=++Sz,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=r,this.windings=i}static compare(e,t){const r=e.leftSE.point.x,i=t.leftSE.point.x,s=e.rightSE.point.x,o=t.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=t.leftSE.point.y,u=e.rightSE.point.y,h=t.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(u))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(u))return-1;const p=e.comparePoint(t.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=t.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(h))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(h))return 1;const p=t.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(t.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=t.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(t.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=u.minus(a),v=s.minus(r),m=h.minus(l),S=o.minus(i);if(p.isGreaterThan(v)&&m.isLessThan(S))return 1;if(p.isLessThan(v)&&m.isGreaterThan(S))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||u.isLessThan(h)?-1:u.isGreaterThan(h)?1:e.id<t.id?-1:e.id>t.id?1:0}static fromRing(e,t,r){let i,s,o;const a=Kc.comparePoints(e,t);if(a<0)i=e,s=t,o=1;else if(a>0)i=t,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Kc(i,!0),u=new Kc(s,!1);return new ov(l,u,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(t)?e:t},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(t)?e:t}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return $d.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const t=this.bbox(),r=e.bbox(),i=Sb(t,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,u=og(t,a)&&this.comparePoint(a)===0,h=og(r,s)&&e.comparePoint(s)===0,p=og(t,l)&&this.comparePoint(l)===0,v=og(r,o)&&e.comparePoint(o)===0;if(h&&u)return v&&!p?o:!v&&p?l:null;if(h)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(u)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const m=_z(s,this.vector(),a,e.vector());return m===null||!og(i,m)?null:$d.snap(m)}split(e){const t=[],r=e.events!==void 0,i=new Kc(e,!0),s=new Kc(e,!1),o=this.rightSE;this.replaceRightSE(s),t.push(s),t.push(i);const a=new ov(i,o,this.rings.slice(),this.windings.slice());return Kc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Kc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),t}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,r=this.windings.length;t<r;t++)this.windings[t]*=-1}consume(e){let t=this,r=e;for(;t.consumedBy;)t=t.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=ov.compare(t,r);if(i!==0){if(i>0){const s=t;t=r,r=s}if(t.prev===r){const s=t;t=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],u=t.rings.indexOf(a);u===-1?(t.rings.push(a),t.windings.push(l)):t.windings[u]+=l}r.rings=null,r.windings=null,r.consumedBy=t,r.leftSE.consumedBy=t.leftSE,r.rightSE.consumedBy=t.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const t=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const u=this.rings[a],h=this.windings[a],p=t.indexOf(u);p===-1?(t.push(u),r.push(h)):r[p]+=h}const s=[],o=[];for(let a=0,l=t.length;a<l;a++){if(r[a]===0)continue;const u=t[a],h=u.poly;if(o.indexOf(h)===-1)if(u.isExterior)s.push(h);else{o.indexOf(h)===-1&&o.push(h);const p=s.indexOf(u.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const u=s[a].multiPoly;i.indexOf(u)===-1&&i.push(u)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(Eb.type){case"union":{const r=e.length===0,i=t.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<t.length?(r=e.length,i=t.length):(r=t.length,i=e.length),this._isInResult=i===Eb.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-t.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(t);break}}return this._isInResult}},b5=class{constructor(n,e,t){tt(this,"poly");tt(this,"isExterior");tt(this,"segments");tt(this,"bbox");if(!Array.isArray(n)||n.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=t,this.segments=[],typeof n[0][0]!="number"||typeof n[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=$d.snap({x:new Qc(n[0][0]),y:new Qc(n[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=n.length;s<o;s++){if(typeof n[s][0]!="number"||typeof n[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=$d.snap({x:new Qc(n[s][0]),y:new Qc(n[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(qv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(qv.fromRing(i,r,this))}getSweepEvents(){const n=[];for(let e=0,t=this.segments.length;e<t;e++){const r=this.segments[e];n.push(r.leftSE),n.push(r.rightSE)}return n}},Cz=class{constructor(n,e){tt(this,"multiPoly");tt(this,"exteriorRing");tt(this,"interiorRings");tt(this,"bbox");if(!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new b5(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let t=1,r=n.length;t<r;t++){const i=new b5(n[t],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const n=this.exteriorRing.getSweepEvents();for(let e=0,t=this.interiorRings.length;e<t;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)n.push(r[i])}return n}},w5=class{constructor(n,e){tt(this,"isSubject");tt(this,"polys");tt(this,"bbox");if(!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof n[0][0][0]=="number"&&(n=[n])}catch{}this.polys=[],this.bbox={ll:{x:new Qc(Number.POSITIVE_INFINITY),y:new Qc(Number.POSITIVE_INFINITY)},ur:{x:new Qc(Number.NEGATIVE_INFINITY),y:new Qc(Number.NEGATIVE_INFINITY)}};for(let t=0,r=n.length;t<r;t++){const i=new Cz(n[t],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const n=[];for(let e=0,t=this.polys.length;e<t;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)n.push(r[i])}return n}},Ez=(n,...e)=>Eb.run("intersection",n,e);$d.set;function Pz(n,e){var t,r,i,s,o,a,l,u,h,p,v=0,m=n.type==="FeatureCollection",S=n.type==="Feature",E=m?n.features.length:1;for(t=0;t<E;t++){for(a=m?n.features[t].geometry:S?n.geometry:n,u=m?n.features[t].properties:S?n.properties:{},h=m?n.features[t].bbox:S?n.bbox:void 0,p=m?n.features[t].id:S?n.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,u,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,u,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,u,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Mz(n,e={}){const t=[];if(Pz(n,i=>{t.push(i.coordinates)}),t.length<2)throw new Error("Must specify at least 2 geometries");const r=Ez(t[0],...t.slice(1));return r.length===0?null:r.length===1?qu(r[0],e.properties):Kj(r,e.properties)}var kz=Mz;function VE(n,e,t){if(n!==null)for(var r,i,s,o,a,l,u,h=0,p=0,v,m=n.type,S=m==="FeatureCollection",E=m==="Feature",k=S?n.features.length:1,T=0;T<k;T++){u=S?n.features[T].geometry:E?n.geometry:n,v=u?u.type==="GeometryCollection":!1,a=v?u.geometries.length:1;for(var A=0;A<a;A++){var R=0,G=0;if(o=v?u.geometries[A]:u,o!==null){l=o.coordinates;var ee=o.type;switch(h=0,ee){case null:break;case"Point":if(e(l,p,T,R,G)===!1)return!1;p++,R++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,T,R,G)===!1)return!1;p++,ee==="MultiPoint"&&R++}ee==="LineString"&&R++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(e(l[r][i],p,T,R,G)===!1)return!1;p++}ee==="MultiLineString"&&R++,ee==="Polygon"&&G++}ee==="Polygon"&&R++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(G=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(e(l[r][i][s],p,T,R,G)===!1)return!1;p++}G++}R++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(VE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Az(n,e){var t,r,i,s,o,a,l,u,h,p,v=0,m=n.type==="FeatureCollection",S=n.type==="Feature",E=m?n.features.length:1;for(t=0;t<E;t++){for(a=m?n.features[t].geometry:S?n.geometry:n,u=m?n.features[t].properties:S?n.properties:{},h=m?n.features[t].bbox:S?n.bbox:void 0,p=m?n.features[t].id:S?n.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,u,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,u,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,u,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Tz(n,e){Az(n,function(t,r,i,s,o){var a=t===null?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Dp(t,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var h=t.coordinates[u],p={type:l,coordinates:h};if(e(Dp(p,i),r,u)===!1)return!1}})}function Dz(n,e){Tz(n,function(t,r,i){var s=0;if(t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,u=0,h=0;if(VE(t,function(p,v,m,S,E){if(a===void 0||r>l||S>u||E>h){a=p,l=r,u=S,h=E,s=0;return}var k=yc([a,p],t.properties);if(e(k,r,i,E,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function Iz(n,e,t){var r=t,i=!1;return Dz(n,function(s,o,a,l,u){i===!1&&t===void 0?r=s:r=e(r,s,o,a,l,u),i=!0}),r}function Yv(n,e={}){return Iz(n,(t,r)=>{const i=r.geometry.coordinates;return t+G2(i[0],i[1],e)},0)}var Wh=Yv;class Ql extends tr.Polygon{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});tt(this,"properties");tt(this,"_originalStyle");tt(this,"_path");this.properties=On.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){On.measure("Polygon.updateProperties",()=>{var t,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(T=>[T.lng,T.lat]);l.push(l[0]);const u=qu([l]),h=RE(u),p=Yv(yc([...l]),{units:"meters"}),v=qg(u),m=tr.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),S=((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||"",E=((i=this.properties)==null?void 0:i.category)||"forages",k=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(T=>({lat:T.lat,lng:T.lng})),surface:h,perimeter:p,center:{lat:m.lat,lng:m.lng},vertices:a.length,category:E,accessLevel:k,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:S}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}})}setName(t){On.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return On.measure("Polygon.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}setLatLngs(t){return On.measure("Polygon.setLatLngs",()=>(super.setLatLngs(t),this.updateProperties(),this))}getMidPoints(){return On.measure("Polygon.getMidPoints",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(tr.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(t,r){On.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i[t]=r,tr.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(t,r){On.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i.splice((t+1)%i.length,0,r),tr.Polygon.prototype.setLatLngs.call(this,[i]))})}move(t){return On.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>tr.latLng(s.lat+t.lat,s.lng+t.lng));return tr.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return On.measure("Polygon.getCenter",()=>{const t=this.getLatLngs()[0];if(!t||t.length===0)return new tr.LatLng(0,0);try{const r=t.filter(u=>u&&typeof u.lat=="number"&&typeof u.lng=="number"&&!isNaN(u.lat)&&!isNaN(u.lng)&&Math.abs(u.lat)<=90&&Math.abs(u.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new tr.LatLng(0,0);const i=r.map(u=>[u.lng,u.lat]);i.push(i[0]);const s=qu([i]),o=qg(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calculé invalide");return tr.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const a of t)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new tr.LatLng(0,0)):new tr.LatLng(i/o,s/o)}})}getSegmentLengths(){return On.measure("Polygon.getSegmentLengths",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(s.distanceTo(o))}return r})}highlight(){if(!this._originalStyle){this._originalStyle={...this.options};const t=(this._originalStyle.weight||3)*1.5;this.setStyle({weight:t,opacity:1,fillOpacity:Math.min((this._originalStyle.fillOpacity||.2)+.1,.4),className:"polygon-hover-effect"});try{this._path&&(this._path.style.filter="drop-shadow(0 0 3px rgba(43, 100, 81, 0.7))",this._path.style.transition="all 0.2s ease-in-out")}catch(r){console.warn("Impossible d'appliquer l'effet de lueur au polygone",r)}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch(t){console.warn("Impossible de restaurer le style du polygone",t)}}}}class js extends tr.Polyline{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});tt(this,"properties");tt(this,"cachedProperties",{});tt(this,"needsUpdate",!0);tt(this,"_originalStyle");tt(this,"_path");this.properties=On.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}highlight(){if(!this._originalStyle){this._originalStyle={...this.options};const t=(this._originalStyle.weight||3)*1.75,r=this._originalStyle.color||"#2b6451";this.setStyle({weight:t,opacity:1,className:"line-hover-effect"});try{this._path&&(this._path.style.filter=`drop-shadow(0 0 4px ${r})`,this._path.style.transition="all 0.2s ease-in-out")}catch{console.warn("Impossible d'appliquer l'effet de lueur à la ligne")}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch{console.warn("Impossible de retirer l'effet de lueur de la ligne")}}}isPointNearLine(t,r=10){if(!this._map)return!1;const i=this.getLatLngs();if(i.length<2)return!1;for(let s=0;s<i.length-1;s++){const o=this._map.latLngToLayerPoint(i[s]),a=this._map.latLngToLayerPoint(i[s+1]),l=this._map.latLngToLayerPoint(t);if(tr.LineUtil.pointToSegmentDistance(l,o,a)<=r)return!0}return!1}updateProperties(){On.measure("Line.updateProperties",()=>{var i,s,o,a,l;const t=this.getLatLngs();if(!t||t.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=t.map(u=>[u.lng,u.lat]);try{const u=yc(r),h=Yv(u,{units:"meters"});let p;if(t.length===2)p=tr.latLng((t[0].lat+t[1].lat)/2,(t[0].lng+t[1].lng)/2);else{const k=h5(u,h/2,{units:"meters"});p=tr.latLng(k.geometry.coordinates[1],k.geometry.coordinates[0])}const v=10,m=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",S=((o=this.properties)==null?void 0:o.category)||"forages",E=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:h,coordinates:t.map(k=>({lat:k.lat,lng:k.lng})),center:{lat:p.lat,lng:p.lng},vertices:t.length,surfaceInfluence:h*v,dimensions:{width:v},category:S,accessLevel:E,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:m}},this.cachedProperties.length=h,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(u){console.error("Failed to calculate line properties",u)}})}setName(t){On.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return On.measure("Line.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}invalidateCache(){On.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(t){return super.setLatLngs(t),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return On.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push(tr.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(t){return On.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return null;const i=r[t],s=r[t+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",t),null):tr.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(t,r,i=!1){On.measure("Line.moveVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length&&(s[t]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:t,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(t,r,i=!1){On.measure("Line.addVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length-1&&(s.splice(t+1,0,r),tr.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(t,r=!0){return On.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>tr.latLng(o.lat+t.lat,o.lng+t.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:t,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return On.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const t=this.getLatLngs();if(t.length<2)return t[0]||new tr.LatLng(0,0);try{const r=t.map(l=>[l.lng,l.lat]),i=yc(r),s=Yv(i,{units:"meters"}),o=h5(i,s/2,{units:"meters"}),a=tr.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=t.reduce((a,l)=>a+l.lat,0)/t.length,s=t.reduce((a,l)=>a+l.lng,0)/t.length,o=new tr.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return On.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(t){return On.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return 0;const i=r[t],s=r[t+1];return i.distanceTo(s)})}getLengthToVertex(t){return On.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(t<=0||r.length<2)return 0;for(let s=0;s<Math.min(t,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return On.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const t=this.getLatLngs();let r=0;for(let i=0;i<t.length-1;i++)r+=t[i].distanceTo(t[i+1]);return this.cachedProperties.length=r,r})}}var Kv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Kv.exports;(function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",p=1,v=2,m=4,S=1,E=2,k=1,T=2,A=4,R=8,G=16,ee=32,pe=64,ge=128,O=256,j=512,Y=30,V="...",N=800,q=16,$=1,F=2,B=3,Q=1/0,X=9007199254740991,_e=17976931348623157e292,me=NaN,We=4294967295,ae=We-1,ve=We>>>1,ye=[["ary",ge],["bind",k],["bindKey",T],["curry",R],["curryRight",G],["flip",j],["partial",ee],["partialRight",pe],["rearg",O]],J="[object Arguments]",se="[object Array]",fe="[object AsyncFunction]",ie="[object Boolean]",te="[object Date]",Oe="[object DOMException]",we="[object Error]",Be="[object Function]",ue="[object GeneratorFunction]",re="[object Map]",Z="[object Number]",U="[object Null]",xe="[object Object]",Ne="[object Promise]",Ge="[object Proxy]",Se="[object RegExp]",ce="[object Set]",je="[object String]",st="[object Symbol]",lt="[object Undefined]",_t="[object WeakMap]",Je="[object WeakSet]",zt="[object ArrayBuffer]",Xt="[object DataView]",et="[object Float32Array]",ut="[object Float64Array]",ot="[object Int8Array]",It="[object Int16Array]",Jt="[object Int32Array]",xn="[object Uint8Array]",Sn="[object Uint8ClampedArray]",An="[object Uint16Array]",Zn="[object Uint32Array]",Cn=/\b__p \+= '';/g,cn=/\b(__p \+=) '' \+/g,bn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ir=/&(?:amp|lt|gt|quot|#39);/g,hr=/[&<>"']/g,wr=RegExp(ir.source),Kn=RegExp(hr.source),Rr=/<%-([\s\S]+?)%>/g,ms=/<%([\s\S]+?)%>/g,Bi=/<%=([\s\S]+?)%>/g,Vs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,is=/^\w*$/,Xn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ss=/[\\^$.*+?()[\]{}|]/g,Et=RegExp(ss.source),at=/^\s+/,Bt=/\s/,Yt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,In=/\{\n\/\* \[wrapped with (.+)\] \*/,Pn=/,? & /,Er=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Yn=/[()=,{}\[\]\/\s]/,Ct=/\\(\\)?/g,mn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hn=/\w*$/,en=/^[-+]0x[0-9a-f]+$/i,ln=/^0b[01]+$/i,Rn=/^\[object .+?Constructor\]$/,vr=/^0o[0-7]+$/i,us=/^(?:0|[1-9]\d*)$/,En=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Lr=/($^)/,Jn=/['\n\r\u2028\u2029\\]/g,Ki="\\ud800-\\udfff",fi="\\u0300-\\u036f",pi="\\ufe20-\\ufe2f",$i="\\u20d0-\\u20ff",Ai=fi+pi+$i,Fi="\\u2700-\\u27bf",ji="a-z\\xdf-\\xf6\\xf8-\\xff",os="\\xac\\xb1\\xd7\\xf7",cs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Sr="\\u2000-\\u206f",kr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",nr="A-Z\\xc0-\\xd6\\xd8-\\xde",to="\\ufe0e\\ufe0f",no=os+cs+Sr+kr,Bs="['’]",Ko="["+Ki+"]",_r="["+no+"]",$r="["+Ai+"]",er="\\d+",di="["+Fi+"]",oi="["+ji+"]",Hs="[^"+Ki+no+er+Fi+ji+nr+"]",Pa="\\ud83c[\\udffb-\\udfff]",ha="(?:"+$r+"|"+Pa+")",Zi="[^"+Ki+"]",Re="(?:\\ud83c[\\udde6-\\uddff]){2}",qe="[\\ud800-\\udbff][\\udc00-\\udfff]",dt="["+nr+"]",qt="\\u200d",pn="(?:"+oi+"|"+Hs+")",Vn="(?:"+dt+"|"+Hs+")",xr="(?:"+Bs+"(?:d|ll|m|re|s|t|ve))?",Ti="(?:"+Bs+"(?:D|LL|M|RE|S|T|VE))?",Ui=ha+"?",ds="["+to+"]?",Ei="(?:"+qt+"(?:"+[Zi,Re,qe].join("|")+")"+ds+Ui+")*",Dc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Au="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Pr=ds+Ui+Ei,Dr="(?:"+[di,Re,qe].join("|")+")"+Pr,fa="(?:"+[Zi+$r+"?",$r,Re,qe,Ko].join("|")+")",ai=RegExp(Bs,"g"),Qu=RegExp($r,"g"),Nl=RegExp(Pa+"(?="+Pa+")|"+fa+Pr,"g"),Rl=RegExp([dt+"?"+oi+"+"+xr+"(?="+[_r,dt,"$"].join("|")+")",Vn+"+"+Ti+"(?="+[_r,dt+pn,"$"].join("|")+")",dt+"?"+pn+"+"+xr,dt+"+"+Ti,Au,Dc,er,Dr].join("|"),"g"),pa=RegExp("["+qt+Ki+Ai+to+"]"),ml=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ec=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],uu=-1,Ar={};Ar[et]=Ar[ut]=Ar[ot]=Ar[It]=Ar[Jt]=Ar[xn]=Ar[Sn]=Ar[An]=Ar[Zn]=!0,Ar[J]=Ar[se]=Ar[zt]=Ar[ie]=Ar[Xt]=Ar[te]=Ar[we]=Ar[Be]=Ar[re]=Ar[Z]=Ar[xe]=Ar[Se]=Ar[ce]=Ar[je]=Ar[_t]=!1;var Yr={};Yr[J]=Yr[se]=Yr[zt]=Yr[Xt]=Yr[ie]=Yr[te]=Yr[et]=Yr[ut]=Yr[ot]=Yr[It]=Yr[Jt]=Yr[re]=Yr[Z]=Yr[xe]=Yr[Se]=Yr[ce]=Yr[je]=Yr[st]=Yr[xn]=Yr[Sn]=Yr[An]=Yr[Zn]=!0,Yr[we]=Yr[Be]=Yr[_t]=!1;var vl={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ic={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Tu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bl=parseFloat,du=parseInt,Du=typeof Ca=="object"&&Ca&&Ca.Object===Object&&Ca,Jr=typeof self=="object"&&self&&self.Object===Object&&self,ys=Du||Jr||Function("return this")(),gr=e&&!e.nodeType&&e,_s=gr&&!0&&n&&!n.nodeType&&n,Fl=_s&&_s.exports===gr,Ha=Fl&&Du.process,Xi=function(){try{var kt=_s&&_s.require&&_s.require("util").types;return kt||Ha&&Ha.binding&&Ha.binding("util")}catch{}}(),Iu=Xi&&Xi.isArrayBuffer,Ma=Xi&&Xi.isDate,hu=Xi&&Xi.isMap,fu=Xi&&Xi.isRegExp,ra=Xi&&Xi.isSet,pu=Xi&&Xi.isTypedArray;function bi(kt,nn,$t){switch($t.length){case 0:return kt.call(nn);case 1:return kt.call(nn,$t[0]);case 2:return kt.call(nn,$t[0],$t[1]);case 3:return kt.call(nn,$t[0],$t[1],$t[2])}return kt.apply(nn,$t)}function Oc(kt,nn,$t,Fn){for(var or=-1,Mr=kt==null?0:kt.length;++or<Mr;){var Ji=kt[or];nn(Fn,Ji,$t(Ji),kt)}return Fn}function Gs(kt,nn){for(var $t=-1,Fn=kt==null?0:kt.length;++$t<Fn&&nn(kt[$t],$t,kt)!==!1;);return kt}function ga(kt,nn){for(var $t=kt==null?0:kt.length;$t--&&nn(kt[$t],$t,kt)!==!1;);return kt}function gu(kt,nn){for(var $t=-1,Fn=kt==null?0:kt.length;++$t<Fn;)if(!nn(kt[$t],$t,kt))return!1;return!0}function ma(kt,nn){for(var $t=-1,Fn=kt==null?0:kt.length,or=0,Mr=[];++$t<Fn;){var Ji=kt[$t];nn(Ji,$t,kt)&&(Mr[or++]=Ji)}return Mr}function jl(kt,nn){var $t=kt==null?0:kt.length;return!!$t&&vn(kt,nn,0)>-1}function zl(kt,nn,$t){for(var Fn=-1,or=kt==null?0:kt.length;++Fn<or;)if($t(nn,kt[Fn]))return!0;return!1}function wi(kt,nn){for(var $t=-1,Fn=kt==null?0:kt.length,or=Array(Fn);++$t<Fn;)or[$t]=nn(kt[$t],$t,kt);return or}function Zo(kt,nn){for(var $t=-1,Fn=nn.length,or=kt.length;++$t<Fn;)kt[or+$t]=nn[$t];return kt}function Ga(kt,nn,$t,Fn){var or=-1,Mr=kt==null?0:kt.length;for(Fn&&Mr&&($t=kt[++or]);++or<Mr;)$t=nn($t,kt[or],or,kt);return $t}function bs(kt,nn,$t,Fn){var or=kt==null?0:kt.length;for(Fn&&or&&($t=kt[--or]);or--;)$t=nn($t,kt[or],or,kt);return $t}function z(kt,nn){for(var $t=-1,Fn=kt==null?0:kt.length;++$t<Fn;)if(nn(kt[$t],$t,kt))return!0;return!1}var Ce=Cr("length");function nt(kt){return kt.split("")}function mt(kt){return kt.match(Er)||[]}function Ot(kt,nn,$t){var Fn;return $t(kt,function(or,Mr,Ji){if(nn(or,Mr,Ji))return Fn=Mr,!1}),Fn}function Kt(kt,nn,$t,Fn){for(var or=kt.length,Mr=$t+(Fn?1:-1);Fn?Mr--:++Mr<or;)if(nn(kt[Mr],Mr,kt))return Mr;return-1}function vn(kt,nn,$t){return nn===nn?Fs(kt,nn,$t):Kt(kt,Gn,$t)}function zn(kt,nn,$t,Fn){for(var or=$t-1,Mr=kt.length;++or<Mr;)if(Fn(kt[or],nn))return or;return-1}function Gn(kt){return kt!==kt}function fr(kt,nn){var $t=kt==null?0:kt.length;return $t?xi(kt,nn)/$t:me}function Cr(kt){return function(nn){return nn==null?t:nn[kt]}}function Hr(kt){return function(nn){return kt==null?t:kt[nn]}}function Wi(kt,nn,$t,Fn,or){return or(kt,function(Mr,Ji,Li){$t=Fn?(Fn=!1,Mr):nn($t,Mr,Ji,Li)}),$t}function gi(kt,nn){var $t=kt.length;for(kt.sort(nn);$t--;)kt[$t]=kt[$t].value;return kt}function xi(kt,nn){for(var $t,Fn=-1,or=kt.length;++Fn<or;){var Mr=nn(kt[Fn]);Mr!==t&&($t=$t===t?Mr:$t+Mr)}return $t}function ws(kt,nn){for(var $t=-1,Fn=Array(kt);++$t<kt;)Fn[$t]=nn($t);return Fn}function Ms(kt,nn){return wi(nn,function($t){return[$t,kt[$t]]})}function Xo(kt){return kt&&kt.slice(0,qa(kt)+1).replace(at,"")}function Gr(kt){return function(nn){return kt(nn)}}function ro(kt,nn){return wi(nn,function($t){return kt[$t]})}function $l(kt,nn){return kt.has(nn)}function yo(kt,nn){for(var $t=-1,Fn=kt.length;++$t<Fn&&vn(nn,kt[$t],0)>-1;);return $t}function Ou(kt,nn){for(var $t=kt.length;$t--&&vn(nn,kt[$t],0)>-1;);return $t}function ka(kt,nn){for(var $t=kt.length,Fn=0;$t--;)kt[$t]===nn&&++Fn;return Fn}var tc=Hr(vl),yl=Hr(Ic);function _l(kt){return"\\"+Tu[kt]}function ks(kt,nn){return kt==null?t:kt[nn]}function Aa(kt){return pa.test(kt)}function Jo(kt){return ml.test(kt)}function Io(kt){for(var nn,$t=[];!(nn=kt.next()).done;)$t.push(nn.value);return $t}function Ul(kt){var nn=-1,$t=Array(kt.size);return kt.forEach(function(Fn,or){$t[++nn]=[or,Fn]}),$t}function io(kt,nn){return function($t){return kt(nn($t))}}function _o(kt,nn){for(var $t=-1,Fn=kt.length,or=0,Mr=[];++$t<Fn;){var Ji=kt[$t];(Ji===nn||Ji===h)&&(kt[$t]=h,Mr[or++]=$t)}return Mr}function bo(kt){var nn=-1,$t=Array(kt.size);return kt.forEach(function(Fn){$t[++nn]=Fn}),$t}function Nc(kt){var nn=-1,$t=Array(kt.size);return kt.forEach(function(Fn){$t[++nn]=[Fn,Fn]}),$t}function Fs(kt,nn,$t){for(var Fn=$t-1,or=kt.length;++Fn<or;)if(kt[Fn]===nn)return Fn;return-1}function Wa(kt,nn,$t){for(var Fn=$t+1;Fn--;)if(kt[Fn]===nn)return Fn;return Fn}function so(kt){return Aa(kt)?ao(kt):Ce(kt)}function oo(kt){return Aa(kt)?Ws(kt):nt(kt)}function qa(kt){for(var nn=kt.length;nn--&&Bt.test(kt.charAt(nn)););return nn}var Ya=Hr(cu);function ao(kt){for(var nn=Nl.lastIndex=0;Nl.test(kt);)++nn;return nn}function Ws(kt){return kt.match(Nl)||[]}function Ta(kt){return kt.match(Rl)||[]}var Qo=function kt(nn){nn=nn==null?ys:lo.defaults(ys.Object(),nn,lo.pick(ys,ec));var $t=nn.Array,Fn=nn.Date,or=nn.Error,Mr=nn.Function,Ji=nn.Math,Li=nn.Object,mu=nn.RegExp,wo=nn.String,Qi=nn.TypeError,Da=$t.prototype,Ka=Mr.prototype,Ia=Li.prototype,Oa=nn["__core-js_shared__"],Na=Ka.toString,Qr=Ia.hasOwnProperty,va=0,qs=function(){var f=/[^.]+$/.exec(Oa&&Oa.keys&&Oa.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Si=Ia.toString,Di=Na.call(Li),xs=ys._,Vi=mu("^"+Na.call(Qr).replace(ss,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ea=Fl?nn.Buffer:t,Oo=nn.Symbol,ia=nn.Uint8Array,nc=ea?ea.allocUnsafe:t,Ra=io(Li.getPrototypeOf,Li),As=Li.create,zi=Ia.propertyIsEnumerable,uo=Da.splice,No=Oo?Oo.isConcatSpreadable:t,br=Oo?Oo.iterator:t,Za=Oo?Oo.toStringTag:t,Xa=function(){try{var f=zh(Li,"defineProperty");return f({},"",{}),f}catch{}}(),ya=nn.clearTimeout!==ys.clearTimeout&&nn.clearTimeout,xo=Fn&&Fn.now!==ys.Date.now&&Fn.now,ud=nn.setTimeout!==ys.setTimeout&&nn.setTimeout,Ys=Ji.ceil,Ks=Ji.floor,_a=Li.getOwnPropertySymbols,c=ea?ea.isBuffer:t,y=nn.isFinite,P=Da.join,W=io(Li.keys,Li),de=Ji.max,ke=Ji.min,ft=Fn.now,jt=nn.parseInt,Zt=Ji.random,hn=Da.reverse,$n=zh(nn,"DataView"),lr=zh(nn,"Map"),Vr=zh(nn,"Promise"),Ts=zh(nn,"Set"),hs=zh(nn,"WeakMap"),Zs=zh(Li,"create"),es=hs&&new hs,Ro={},cd=$h($n),Ba=$h(lr),ba=$h(Vr),sa=$h(Ts),Ih=$h(hs),Nu=Oo?Oo.prototype:t,mi=Nu?Nu.valueOf:t,co=Nu?Nu.toString:t;function $e(f){if(Lo(f)&&!ti(f)&&!(f instanceof Wr)){if(f instanceof Xs)return f;if(Qr.call(f,"__wrapped__"))return ex(f)}return new Xs(f)}var Bo=function(){function f(){}return function(_){if(!fo(_))return{};if(As)return As(_);f.prototype=_;var I=new f;return f.prototype=t,I}}();function rc(){}function Xs(f,_){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!_,this.__index__=0,this.__values__=t}$e.templateSettings={escape:Rr,evaluate:ms,interpolate:Bi,variable:"",imports:{_:$e}},$e.prototype=rc.prototype,$e.prototype.constructor=$e,Xs.prototype=Bo(rc.prototype),Xs.prototype.constructor=Xs;function Wr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=We,this.__views__=[]}function Gd(){var f=new Wr(this.__wrapped__);return f.__actions__=Hl(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Hl(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Hl(this.__views__),f}function Tf(){if(this.__filtered__){var f=new Wr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Wd(){var f=this.__wrapped__.value(),_=this.__dir__,I=ti(f),oe=_<0,Pe=I?f.length:0,Ye=ck(0,Pe,this.__views__),ht=Ye.start,St=Ye.end,Ft=St-ht,fn=oe?St:ht-1,gn=this.__iteratees__,wn=gn.length,qn=0,mr=ke(Ft,this.__takeCount__);if(!I||!oe&&Pe==Ft&&mr==Ft)return Ru(f,this.__actions__);var Ir=[];e:for(;Ft--&&qn<mr;){fn+=_;for(var hi=-1,Or=f[fn];++hi<wn;){var Ci=gn[hi],Oi=Ci.iteratee,_u=Ci.type,Ll=Oi(Or);if(_u==F)Or=Ll;else if(!Ll){if(_u==$)continue e;break e}}Ir[qn++]=Or}return Ir}Wr.prototype=Bo(rc.prototype),Wr.prototype.constructor=Wr;function bl(f){var _=-1,I=f==null?0:f.length;for(this.clear();++_<I;){var oe=f[_];this.set(oe[0],oe[1])}}function dd(){this.__data__=Zs?Zs(null):{},this.size=0}function Oh(f){var _=this.has(f)&&delete this.__data__[f];return this.size-=_?1:0,_}function Gp(f){var _=this.__data__;if(Zs){var I=_[f];return I===l?t:I}return Qr.call(_,f)?_[f]:t}function Rc(f){var _=this.__data__;return Zs?_[f]!==t:Qr.call(_,f)}function qd(f,_){var I=this.__data__;return this.size+=this.has(f)?0:1,I[f]=Zs&&_===t?l:_,this}bl.prototype.clear=dd,bl.prototype.delete=Oh,bl.prototype.get=Gp,bl.prototype.has=Rc,bl.prototype.set=qd;function vu(f){var _=-1,I=f==null?0:f.length;for(this.clear();++_<I;){var oe=f[_];this.set(oe[0],oe[1])}}function Wp(){this.__data__=[],this.size=0}function Yd(f){var _=this.__data__,I=Mt(_,f);if(I<0)return!1;var oe=_.length-1;return I==oe?_.pop():uo.call(_,I,1),--this.size,!0}function Kd(f){var _=this.__data__,I=Mt(_,f);return I<0?t:_[I][1]}function Df(f){return Mt(this.__data__,f)>-1}function If(f,_){var I=this.__data__,oe=Mt(I,f);return oe<0?(++this.size,I.push([f,_])):I[oe][1]=_,this}vu.prototype.clear=Wp,vu.prototype.delete=Yd,vu.prototype.get=Kd,vu.prototype.has=Df,vu.prototype.set=If;function Ja(f){var _=-1,I=f==null?0:f.length;for(this.clear();++_<I;){var oe=f[_];this.set(oe[0],oe[1])}}function Of(){this.size=0,this.__data__={hash:new bl,map:new(lr||vu),string:new bl}}function Nf(f){var _=t0(this,f).delete(f);return this.size-=_?1:0,_}function Rf(f){return t0(this,f).get(f)}function w(f){return t0(this,f).has(f)}function D(f,_){var I=t0(this,f),oe=I.size;return I.set(f,_),this.size+=I.size==oe?0:1,this}Ja.prototype.clear=Of,Ja.prototype.delete=Nf,Ja.prototype.get=Rf,Ja.prototype.has=w,Ja.prototype.set=D;function K(f){var _=-1,I=f==null?0:f.length;for(this.__data__=new Ja;++_<I;)this.add(f[_])}function he(f){return this.__data__.set(f,l),this}function Ee(f){return this.__data__.has(f)}K.prototype.add=K.prototype.push=he,K.prototype.has=Ee;function Ae(f){var _=this.__data__=new vu(f);this.size=_.size}function Ie(){this.__data__=new vu,this.size=0}function ze(f){var _=this.__data__,I=_.delete(f);return this.size=_.size,I}function Ue(f){return this.__data__.get(f)}function Qe(f){return this.__data__.has(f)}function wt(f,_){var I=this.__data__;if(I instanceof vu){var oe=I.__data__;if(!lr||oe.length<i-1)return oe.push([f,_]),this.size=++I.size,this;I=this.__data__=new Ja(oe)}return I.set(f,_),this.size=I.size,this}Ae.prototype.clear=Ie,Ae.prototype.delete=ze,Ae.prototype.get=Ue,Ae.prototype.has=Qe,Ae.prototype.set=wt;function Ht(f,_){var I=ti(f),oe=!I&&Uh(f),Pe=!I&&!oe&&Xd(f),Ye=!I&&!oe&&!Pe&&Gf(f),ht=I||oe||Pe||Ye,St=ht?ws(f.length,wo):[],Ft=St.length;for(var fn in f)(_||Qr.call(f,fn))&&!(ht&&(fn=="length"||Pe&&(fn=="offset"||fn=="parent")||Ye&&(fn=="buffer"||fn=="byteLength"||fn=="byteOffset")||vd(fn,Ft)))&&St.push(fn);return St}function Gt(f){var _=f.length;return _?f[Bh(0,_-1)]:t}function Tt(f,_){return n0(Hl(f),ur(_,0,f.length))}function rn(f){return n0(Hl(f))}function Qt(f,_,I){(I!==t&&!uc(f[_],I)||I===t&&!(_ in f))&&jn(f,_,I)}function xt(f,_,I){var oe=f[_];(!(Qr.call(f,_)&&uc(oe,I))||I===t&&!(_ in f))&&jn(f,_,I)}function Mt(f,_){for(var I=f.length;I--;)if(uc(f[I][0],_))return I;return-1}function an(f,_,I,oe){return H(f,function(Pe,Ye,ht){_(oe,Pe,I(Pe),ht)}),oe}function yn(f,_){return f&&jc(_,wa(_),f)}function un(f,_){return f&&jc(_,Wl(_),f)}function jn(f,_,I){_=="__proto__"&&Xa?Xa(f,_,{configurable:!0,enumerable:!0,value:I,writable:!0}):f[_]=I}function Nn(f,_){for(var I=-1,oe=_.length,Pe=$t(oe),Ye=f==null;++I<oe;)Pe[I]=Ye?t:x1(f,_[I]);return Pe}function ur(f,_,I){return f===f&&(I!==t&&(f=f<=I?f:I),_!==t&&(f=f>=_?f:_)),f}function d(f,_,I,oe,Pe,Ye){var ht,St=_&p,Ft=_&v,fn=_&m;if(I&&(ht=Pe?I(f,oe,Pe,Ye):I(f)),ht!==t)return ht;if(!fo(f))return f;var gn=ti(f);if(gn){if(ht=hk(f),!St)return Hl(f,ht)}else{var wn=el(f),qn=wn==Be||wn==ue;if(Xd(f))return Ew(f,St);if(wn==xe||wn==J||qn&&!Pe){if(ht=Ft||qn?{}:Gw(f),!St)return Ft?tk(f,un(ht,f)):ek(f,yn(ht,f))}else{if(!Yr[wn])return Pe?f:{};ht=fk(f,wn,St)}}Ye||(Ye=new Ae);var mr=Ye.get(f);if(mr)return mr;Ye.set(f,ht),bx(f)?f.forEach(function(Or){ht.add(d(Or,_,I,Or,f,Ye))}):yx(f)&&f.forEach(function(Or,Ci){ht.set(Ci,d(Or,_,I,Ci,f,Ye))});var Ir=fn?Ft?l1:a1:Ft?Wl:wa,hi=gn?t:Ir(f);return Gs(hi||f,function(Or,Ci){hi&&(Ci=Or,Or=f[Ci]),xt(ht,Ci,d(Or,_,I,Ci,f,Ye))}),ht}function g(f){var _=wa(f);return function(I){return b(I,f,_)}}function b(f,_,I){var oe=I.length;if(f==null)return!oe;for(f=Li(f);oe--;){var Pe=I[oe],Ye=_[Pe],ht=f[Pe];if(ht===t&&!(Pe in f)||!Ye(ht))return!1}return!0}function C(f,_,I){if(typeof f!="function")throw new Qi(o);return Xp(function(){f.apply(t,I)},_)}function M(f,_,I,oe){var Pe=-1,Ye=jl,ht=!0,St=f.length,Ft=[],fn=_.length;if(!St)return Ft;I&&(_=wi(_,Gr(I))),oe?(Ye=zl,ht=!1):_.length>=i&&(Ye=$l,ht=!1,_=new K(_));e:for(;++Pe<St;){var gn=f[Pe],wn=I==null?gn:I(gn);if(gn=oe||gn!==0?gn:0,ht&&wn===wn){for(var qn=fn;qn--;)if(_[qn]===wn)continue e;Ft.push(gn)}else Ye(_,wn,oe)||Ft.push(gn)}return Ft}var H=Tw(on),ne=Tw(Mn,!0);function le(f,_){var I=!0;return H(f,function(oe,Pe,Ye){return I=!!_(oe,Pe,Ye),I}),I}function be(f,_,I){for(var oe=-1,Pe=f.length;++oe<Pe;){var Ye=f[oe],ht=_(Ye);if(ht!=null&&(St===t?ht===ht&&!yu(ht):I(ht,St)))var St=ht,Ft=Ye}return Ft}function Me(f,_,I,oe){var Pe=f.length;for(I=ui(I),I<0&&(I=-I>Pe?0:Pe+I),oe=oe===t||oe>Pe?Pe:ui(oe),oe<0&&(oe+=Pe),oe=I>oe?0:xx(oe);I<oe;)f[I++]=_;return f}function it(f,_){var I=[];return H(f,function(oe,Pe,Ye){_(oe,Pe,Ye)&&I.push(oe)}),I}function Xe(f,_,I,oe,Pe){var Ye=-1,ht=f.length;for(I||(I=gk),Pe||(Pe=[]);++Ye<ht;){var St=f[Ye];_>0&&I(St)?_>1?Xe(St,_-1,I,oe,Pe):Zo(Pe,St):oe||(Pe[Pe.length]=St)}return Pe}var Pt=Dw(),Ut=Dw(!0);function on(f,_){return f&&Pt(f,_,wa)}function Mn(f,_){return f&&Ut(f,_,wa)}function Dn(f,_){return ma(_,function(I){return yd(f[I])})}function yr(f,_){_=lc(_,f);for(var I=0,oe=_.length;f!=null&&I<oe;)f=f[zc(_[I++])];return I&&I==oe?f:t}function rt(f,_,I){var oe=_(f);return ti(f)?oe:Zo(oe,I(f))}function ct(f){return f==null?f===t?lt:U:Za&&Za in Li(f)?uk(f):xk(f)}function bt(f,_){return f>_}function Wt(f,_){return f!=null&&Qr.call(f,_)}function At(f,_){return f!=null&&_ in Li(f)}function Vt(f,_,I){return f>=ke(_,I)&&f<de(_,I)}function Le(f,_,I){for(var oe=I?zl:jl,Pe=f[0].length,Ye=f.length,ht=Ye,St=$t(Ye),Ft=1/0,fn=[];ht--;){var gn=f[ht];ht&&_&&(gn=wi(gn,Gr(_))),Ft=ke(gn.length,Ft),St[ht]=!I&&(_||Pe>=120&&gn.length>=120)?new K(ht&&gn):t}gn=f[0];var wn=-1,qn=St[0];e:for(;++wn<Pe&&fn.length<Ft;){var mr=gn[wn],Ir=_?_(mr):mr;if(mr=I||mr!==0?mr:0,!(qn?$l(qn,Ir):oe(fn,Ir,I))){for(ht=Ye;--ht;){var hi=St[ht];if(!(hi?$l(hi,Ir):oe(f[ht],Ir,I)))continue e}qn&&qn.push(Ir),fn.push(mr)}}return fn}function Te(f,_,I,oe){return on(f,function(Pe,Ye,ht){_(oe,I(Pe),Ye,ht)}),oe}function He(f,_,I){_=lc(_,f),f=Kw(f,_);var oe=f==null?f:f[zc(ju(_))];return oe==null?t:bi(oe,f,I)}function Ve(f){return Lo(f)&&ct(f)==J}function Ke(f){return Lo(f)&&ct(f)==zt}function Ze(f){return Lo(f)&&ct(f)==te}function pt(f,_,I,oe,Pe){return f===_?!0:f==null||_==null||!Lo(f)&&!Lo(_)?f!==f&&_!==_:gt(f,_,I,oe,pt,Pe)}function gt(f,_,I,oe,Pe,Ye){var ht=ti(f),St=ti(_),Ft=ht?se:el(f),fn=St?se:el(_);Ft=Ft==J?xe:Ft,fn=fn==J?xe:fn;var gn=Ft==xe,wn=fn==xe,qn=Ft==fn;if(qn&&Xd(f)){if(!Xd(_))return!1;ht=!0,gn=!1}if(qn&&!gn)return Ye||(Ye=new Ae),ht||Gf(f)?Uw(f,_,I,oe,Pe,Ye):ak(f,_,Ft,I,oe,Pe,Ye);if(!(I&S)){var mr=gn&&Qr.call(f,"__wrapped__"),Ir=wn&&Qr.call(_,"__wrapped__");if(mr||Ir){var hi=mr?f.value():f,Or=Ir?_.value():_;return Ye||(Ye=new Ae),Pe(hi,Or,I,oe,Ye)}}return qn?(Ye||(Ye=new Ae),lk(f,_,I,oe,Pe,Ye)):!1}function Lt(f){return Lo(f)&&el(f)==re}function Nt(f,_,I,oe){var Pe=I.length,Ye=Pe,ht=!oe;if(f==null)return!Ye;for(f=Li(f);Pe--;){var St=I[Pe];if(ht&&St[2]?St[1]!==f[St[0]]:!(St[0]in f))return!1}for(;++Pe<Ye;){St=I[Pe];var Ft=St[0],fn=f[Ft],gn=St[1];if(ht&&St[2]){if(fn===t&&!(Ft in f))return!1}else{var wn=new Ae;if(oe)var qn=oe(fn,gn,Ft,f,_,wn);if(!(qn===t?pt(gn,fn,S|E,oe,wn):qn))return!1}}return!0}function Rt(f){if(!fo(f)||vk(f))return!1;var _=yd(f)?Vi:Rn;return _.test($h(f))}function dn(f){return Lo(f)&&ct(f)==Se}function Wn(f){return Lo(f)&&el(f)==ce}function Qn(f){return Lo(f)&&l0(f.length)&&!!Ar[ct(f)]}function cr(f){return typeof f=="function"?f:f==null?ql:typeof f=="object"?ti(f)?ic(f[0],f[1]):Fo(f):Ix(f)}function vi(f){if(!Zp(f))return W(f);var _=[];for(var I in Li(f))Qr.call(f,I)&&I!="constructor"&&_.push(I);return _}function Ii(f){if(!fo(f))return wk(f);var _=Zp(f),I=[];for(var oe in f)oe=="constructor"&&(_||!Qr.call(f,oe))||I.push(oe);return I}function ei(f,_){return f<_}function Hi(f,_){var I=-1,oe=Gl(f)?$t(f.length):[];return H(f,function(Pe,Ye,ht){oe[++I]=_(Pe,Ye,ht)}),oe}function Fo(f){var _=c1(f);return _.length==1&&_[0][2]?qw(_[0][0],_[0][1]):function(I){return I===f||Nt(I,f,_)}}function ic(f,_){return h1(f)&&Ww(_)?qw(zc(f),_):function(I){var oe=x1(I,f);return oe===t&&oe===_?L1(I,f):pt(_,oe,S|E)}}function Fa(f,_,I,oe,Pe){f!==_&&Pt(_,function(Ye,ht){if(Pe||(Pe=new Ae),fo(Ye))Nh(f,_,ht,I,Fa,oe,Pe);else{var St=oe?oe(p1(f,ht),Ye,ht+"",f,_,Pe):t;St===t&&(St=Ye),Qt(f,ht,St)}},Wl)}function Nh(f,_,I,oe,Pe,Ye,ht){var St=p1(f,I),Ft=p1(_,I),fn=ht.get(Ft);if(fn){Qt(f,I,fn);return}var gn=Ye?Ye(St,Ft,I+"",f,_,ht):t,wn=gn===t;if(wn){var qn=ti(Ft),mr=!qn&&Xd(Ft),Ir=!qn&&!mr&&Gf(Ft);gn=Ft,qn||mr||Ir?ti(St)?gn=St:jo(St)?gn=Hl(St):mr?(wn=!1,gn=Ew(Ft,!0)):Ir?(wn=!1,gn=Pw(Ft,!0)):gn=[]:Jp(Ft)||Uh(Ft)?(gn=St,Uh(St)?gn=Lx(St):(!fo(St)||yd(St))&&(gn=Gw(Ft))):wn=!1}wn&&(ht.set(Ft,gn),Pe(gn,Ft,oe,Ye,ht),ht.delete(Ft)),Qt(f,I,gn)}function wl(f,_){var I=f.length;if(I)return _+=_<0?I:0,vd(_,I)?f[_]:t}function Bc(f,_,I){_.length?_=wi(_,function(Ye){return ti(Ye)?function(ht){return yr(ht,Ye.length===1?Ye[0]:Ye)}:Ye}):_=[ql];var oe=-1;_=wi(_,Gr(Tr()));var Pe=Hi(f,function(Ye,ht,St){var Ft=wi(_,function(fn){return fn(Ye)});return{criteria:Ft,index:++oe,value:Ye}});return gi(Pe,function(Ye,ht){return QM(Ye,ht,I)})}function ja(f,_){return ho(f,_,function(I,oe){return L1(f,oe)})}function ho(f,_,I){for(var oe=-1,Pe=_.length,Ye={};++oe<Pe;){var ht=_[oe],St=yr(f,ht);I(St,ht)&&hd(Ye,lc(ht,f),St)}return Ye}function Ls(f){return function(_){return yr(_,f)}}function Bf(f,_,I,oe){var Pe=oe?zn:vn,Ye=-1,ht=_.length,St=f;for(f===_&&(_=Hl(_)),I&&(St=wi(f,Gr(I)));++Ye<ht;)for(var Ft=0,fn=_[Ye],gn=I?I(fn):fn;(Ft=Pe(St,gn,Ft,oe))>-1;)St!==f&&uo.call(St,Ft,1),uo.call(f,Ft,1);return f}function Rh(f,_){for(var I=f?_.length:0,oe=I-1;I--;){var Pe=_[I];if(I==oe||Pe!==Ye){var Ye=Pe;vd(Pe)?uo.call(f,Pe,1):fd(f,Pe)}}return f}function Bh(f,_){return f+Ks(Zt()*(_-f+1))}function Fh(f,_,I,oe){for(var Pe=-1,Ye=de(Ys((_-f)/(I||1)),0),ht=$t(Ye);Ye--;)ht[oe?Ye:++Pe]=f,f+=I;return ht}function Ff(f,_){var I="";if(!f||_<1||_>X)return I;do _%2&&(I+=f),_=Ks(_/2),_&&(f+=f);while(_);return I}function li(f,_){return g1(Yw(f,_,ql),f+"")}function jf(f){return Gt(Wf(f))}function Hm(f,_){var I=Wf(f);return n0(I,ur(_,0,I.length))}function hd(f,_,I,oe){if(!fo(f))return f;_=lc(_,f);for(var Pe=-1,Ye=_.length,ht=Ye-1,St=f;St!=null&&++Pe<Ye;){var Ft=zc(_[Pe]),fn=I;if(Ft==="__proto__"||Ft==="constructor"||Ft==="prototype")return f;if(Pe!=ht){var gn=St[Ft];fn=oe?oe(gn,Ft,St):t,fn===t&&(fn=fo(gn)?gn:vd(_[Pe+1])?[]:{})}xt(St,Ft,fn),St=St[Ft]}return f}var sc=es?function(f,_){return es.set(f,_),f}:ql,Gm=Xa?function(f,_){return Xa(f,"toString",{configurable:!0,enumerable:!1,value:C1(_),writable:!0})}:ql;function Wm(f){return n0(Wf(f))}function Vl(f,_,I){var oe=-1,Pe=f.length;_<0&&(_=-_>Pe?0:Pe+_),I=I>Pe?Pe:I,I<0&&(I+=Pe),Pe=_>I?0:I-_>>>0,_>>>=0;for(var Ye=$t(Pe);++oe<Pe;)Ye[oe]=f[oe+_];return Ye}function qm(f,_){var I;return H(f,function(oe,Pe,Ye){return I=_(oe,Pe,Ye),!I}),!!I}function oc(f,_,I){var oe=0,Pe=f==null?oe:f.length;if(typeof _=="number"&&_===_&&Pe<=ve){for(;oe<Pe;){var Ye=oe+Pe>>>1,ht=f[Ye];ht!==null&&!yu(ht)&&(I?ht<=_:ht<_)?oe=Ye+1:Pe=Ye}return Pe}return qp(f,_,ql,I)}function qp(f,_,I,oe){var Pe=0,Ye=f==null?0:f.length;if(Ye===0)return 0;_=I(_);for(var ht=_!==_,St=_===null,Ft=yu(_),fn=_===t;Pe<Ye;){var gn=Ks((Pe+Ye)/2),wn=I(f[gn]),qn=wn!==t,mr=wn===null,Ir=wn===wn,hi=yu(wn);if(ht)var Or=oe||Ir;else fn?Or=Ir&&(oe||qn):St?Or=Ir&&qn&&(oe||!mr):Ft?Or=Ir&&qn&&!mr&&(oe||!hi):mr||hi?Or=!1:Or=oe?wn<=_:wn<_;Or?Pe=gn+1:Ye=gn}return ke(Ye,ae)}function Yp(f,_){for(var I=-1,oe=f.length,Pe=0,Ye=[];++I<oe;){var ht=f[I],St=_?_(ht):ht;if(!I||!uc(St,Ft)){var Ft=St;Ye[Pe++]=ht===0?0:ht}}return Ye}function Ym(f){return typeof f=="number"?f:yu(f)?me:+f}function Qa(f){if(typeof f=="string")return f;if(ti(f))return wi(f,Qa)+"";if(yu(f))return co?co.call(f):"";var _=f+"";return _=="0"&&1/f==-1/0?"-0":_}function Fc(f,_,I){var oe=-1,Pe=jl,Ye=f.length,ht=!0,St=[],Ft=St;if(I)ht=!1,Pe=zl;else if(Ye>=i){var fn=_?null:sk(f);if(fn)return bo(fn);ht=!1,Pe=$l,Ft=new K}else Ft=_?[]:St;e:for(;++oe<Ye;){var gn=f[oe],wn=_?_(gn):gn;if(gn=I||gn!==0?gn:0,ht&&wn===wn){for(var qn=Ft.length;qn--;)if(Ft[qn]===wn)continue e;_&&Ft.push(wn),St.push(gn)}else Pe(Ft,wn,I)||(Ft!==St&&Ft.push(wn),St.push(gn))}return St}function fd(f,_){return _=lc(_,f),f=Kw(f,_),f==null||delete f[zc(ju(_))]}function zf(f,_,I,oe){return hd(f,_,I(yr(f,_)),oe)}function pd(f,_,I,oe){for(var Pe=f.length,Ye=oe?Pe:-1;(oe?Ye--:++Ye<Pe)&&_(f[Ye],Ye,f););return I?Vl(f,oe?0:Ye,oe?Ye+1:Pe):Vl(f,oe?Ye+1:0,oe?Pe:Ye)}function Ru(f,_){var I=f;return I instanceof Wr&&(I=I.value()),Ga(_,function(oe,Pe){return Pe.func.apply(Pe.thisArg,Zo([oe],Pe.args))},I)}function Bu(f,_,I){var oe=f.length;if(oe<2)return oe?Fc(f[0]):[];for(var Pe=-1,Ye=$t(oe);++Pe<oe;)for(var ht=f[Pe],St=-1;++St<oe;)St!=Pe&&(Ye[Pe]=M(Ye[Pe]||ht,f[St],_,I));return Fc(Xe(Ye,1),_,I)}function ac(f,_,I){for(var oe=-1,Pe=f.length,Ye=_.length,ht={};++oe<Pe;){var St=oe<Ye?_[oe]:t;I(ht,f[oe],St)}return ht}function Zd(f){return jo(f)?f:[]}function jh(f){return typeof f=="function"?f:ql}function lc(f,_){return ti(f)?f:h1(f,_)?[f]:Qw(as(f))}var r1=li;function Fu(f,_,I){var oe=f.length;return I=I===t?oe:I,!_&&I>=oe?f:Vl(f,_,I)}var $f=ya||function(f){return ys.clearTimeout(f)};function Ew(f,_){if(_)return f.slice();var I=f.length,oe=nc?nc(I):new f.constructor(I);return f.copy(oe),oe}function i1(f){var _=new f.constructor(f.byteLength);return new ia(_).set(new ia(f)),_}function ZM(f,_){var I=_?i1(f.buffer):f.buffer;return new f.constructor(I,f.byteOffset,f.byteLength)}function XM(f){var _=new f.constructor(f.source,Hn.exec(f));return _.lastIndex=f.lastIndex,_}function JM(f){return mi?Li(mi.call(f)):{}}function Pw(f,_){var I=_?i1(f.buffer):f.buffer;return new f.constructor(I,f.byteOffset,f.length)}function Mw(f,_){if(f!==_){var I=f!==t,oe=f===null,Pe=f===f,Ye=yu(f),ht=_!==t,St=_===null,Ft=_===_,fn=yu(_);if(!St&&!fn&&!Ye&&f>_||Ye&&ht&&Ft&&!St&&!fn||oe&&ht&&Ft||!I&&Ft||!Pe)return 1;if(!oe&&!Ye&&!fn&&f<_||fn&&I&&Pe&&!oe&&!Ye||St&&I&&Pe||!ht&&Pe||!Ft)return-1}return 0}function QM(f,_,I){for(var oe=-1,Pe=f.criteria,Ye=_.criteria,ht=Pe.length,St=I.length;++oe<ht;){var Ft=Mw(Pe[oe],Ye[oe]);if(Ft){if(oe>=St)return Ft;var fn=I[oe];return Ft*(fn=="desc"?-1:1)}}return f.index-_.index}function kw(f,_,I,oe){for(var Pe=-1,Ye=f.length,ht=I.length,St=-1,Ft=_.length,fn=de(Ye-ht,0),gn=$t(Ft+fn),wn=!oe;++St<Ft;)gn[St]=_[St];for(;++Pe<ht;)(wn||Pe<Ye)&&(gn[I[Pe]]=f[Pe]);for(;fn--;)gn[St++]=f[Pe++];return gn}function Aw(f,_,I,oe){for(var Pe=-1,Ye=f.length,ht=-1,St=I.length,Ft=-1,fn=_.length,gn=de(Ye-St,0),wn=$t(gn+fn),qn=!oe;++Pe<gn;)wn[Pe]=f[Pe];for(var mr=Pe;++Ft<fn;)wn[mr+Ft]=_[Ft];for(;++ht<St;)(qn||Pe<Ye)&&(wn[mr+I[ht]]=f[Pe++]);return wn}function Hl(f,_){var I=-1,oe=f.length;for(_||(_=$t(oe));++I<oe;)_[I]=f[I];return _}function jc(f,_,I,oe){var Pe=!I;I||(I={});for(var Ye=-1,ht=_.length;++Ye<ht;){var St=_[Ye],Ft=oe?oe(I[St],f[St],St,I,f):t;Ft===t&&(Ft=f[St]),Pe?jn(I,St,Ft):xt(I,St,Ft)}return I}function ek(f,_){return jc(f,d1(f),_)}function tk(f,_){return jc(f,Vw(f),_)}function Km(f,_){return function(I,oe){var Pe=ti(I)?Oc:an,Ye=_?_():{};return Pe(I,f,Tr(oe,2),Ye)}}function Uf(f){return li(function(_,I){var oe=-1,Pe=I.length,Ye=Pe>1?I[Pe-1]:t,ht=Pe>2?I[2]:t;for(Ye=f.length>3&&typeof Ye=="function"?(Pe--,Ye):t,ht&&xl(I[0],I[1],ht)&&(Ye=Pe<3?t:Ye,Pe=1),_=Li(_);++oe<Pe;){var St=I[oe];St&&f(_,St,oe,Ye)}return _})}function Tw(f,_){return function(I,oe){if(I==null)return I;if(!Gl(I))return f(I,oe);for(var Pe=I.length,Ye=_?Pe:-1,ht=Li(I);(_?Ye--:++Ye<Pe)&&oe(ht[Ye],Ye,ht)!==!1;);return I}}function Dw(f){return function(_,I,oe){for(var Pe=-1,Ye=Li(_),ht=oe(_),St=ht.length;St--;){var Ft=ht[f?St:++Pe];if(I(Ye[Ft],Ft,Ye)===!1)break}return _}}function nk(f,_,I){var oe=_&k,Pe=Kp(f);function Ye(){var ht=this&&this!==ys&&this instanceof Ye?Pe:f;return ht.apply(oe?I:this,arguments)}return Ye}function Iw(f){return function(_){_=as(_);var I=Aa(_)?oo(_):t,oe=I?I[0]:_.charAt(0),Pe=I?Fu(I,1).join(""):_.slice(1);return oe[f]()+Pe}}function Vf(f){return function(_){return Ga(Tx(Ax(_).replace(ai,"")),f,"")}}function Kp(f){return function(){var _=arguments;switch(_.length){case 0:return new f;case 1:return new f(_[0]);case 2:return new f(_[0],_[1]);case 3:return new f(_[0],_[1],_[2]);case 4:return new f(_[0],_[1],_[2],_[3]);case 5:return new f(_[0],_[1],_[2],_[3],_[4]);case 6:return new f(_[0],_[1],_[2],_[3],_[4],_[5]);case 7:return new f(_[0],_[1],_[2],_[3],_[4],_[5],_[6])}var I=Bo(f.prototype),oe=f.apply(I,_);return fo(oe)?oe:I}}function rk(f,_,I){var oe=Kp(f);function Pe(){for(var Ye=arguments.length,ht=$t(Ye),St=Ye,Ft=Hf(Pe);St--;)ht[St]=arguments[St];var fn=Ye<3&&ht[0]!==Ft&&ht[Ye-1]!==Ft?[]:_o(ht,Ft);if(Ye-=fn.length,Ye<I)return Fw(f,_,Zm,Pe.placeholder,t,ht,fn,t,t,I-Ye);var gn=this&&this!==ys&&this instanceof Pe?oe:f;return bi(gn,this,ht)}return Pe}function Ow(f){return function(_,I,oe){var Pe=Li(_);if(!Gl(_)){var Ye=Tr(I,3);_=wa(_),I=function(St){return Ye(Pe[St],St,Pe)}}var ht=f(_,I,oe);return ht>-1?Pe[Ye?_[ht]:ht]:t}}function Nw(f){return md(function(_){var I=_.length,oe=I,Pe=Xs.prototype.thru;for(f&&_.reverse();oe--;){var Ye=_[oe];if(typeof Ye!="function")throw new Qi(o);if(Pe&&!ht&&e0(Ye)=="wrapper")var ht=new Xs([],!0)}for(oe=ht?oe:I;++oe<I;){Ye=_[oe];var St=e0(Ye),Ft=St=="wrapper"?u1(Ye):t;Ft&&f1(Ft[0])&&Ft[1]==(ge|R|ee|O)&&!Ft[4].length&&Ft[9]==1?ht=ht[e0(Ft[0])].apply(ht,Ft[3]):ht=Ye.length==1&&f1(Ye)?ht[St]():ht.thru(Ye)}return function(){var fn=arguments,gn=fn[0];if(ht&&fn.length==1&&ti(gn))return ht.plant(gn).value();for(var wn=0,qn=I?_[wn].apply(this,fn):gn;++wn<I;)qn=_[wn].call(this,qn);return qn}})}function Zm(f,_,I,oe,Pe,Ye,ht,St,Ft,fn){var gn=_&ge,wn=_&k,qn=_&T,mr=_&(R|G),Ir=_&j,hi=qn?t:Kp(f);function Or(){for(var Ci=arguments.length,Oi=$t(Ci),_u=Ci;_u--;)Oi[_u]=arguments[_u];if(mr)var Ll=Hf(Or),bu=ka(Oi,Ll);if(oe&&(Oi=kw(Oi,oe,Pe,mr)),Ye&&(Oi=Aw(Oi,Ye,ht,mr)),Ci-=bu,mr&&Ci<fn){var zo=_o(Oi,Ll);return Fw(f,_,Zm,Or.placeholder,I,Oi,zo,St,Ft,fn-Ci)}var cc=wn?I:this,bd=qn?cc[f]:f;return Ci=Oi.length,St?Oi=Lk(Oi,St):Ir&&Ci>1&&Oi.reverse(),gn&&Ft<Ci&&(Oi.length=Ft),this&&this!==ys&&this instanceof Or&&(bd=hi||Kp(bd)),bd.apply(cc,Oi)}return Or}function Rw(f,_){return function(I,oe){return Te(I,f,_(oe),{})}}function Xm(f,_){return function(I,oe){var Pe;if(I===t&&oe===t)return _;if(I!==t&&(Pe=I),oe!==t){if(Pe===t)return oe;typeof I=="string"||typeof oe=="string"?(I=Qa(I),oe=Qa(oe)):(I=Ym(I),oe=Ym(oe)),Pe=f(I,oe)}return Pe}}function s1(f){return md(function(_){return _=wi(_,Gr(Tr())),li(function(I){var oe=this;return f(_,function(Pe){return bi(Pe,oe,I)})})})}function Jm(f,_){_=_===t?" ":Qa(_);var I=_.length;if(I<2)return I?Ff(_,f):_;var oe=Ff(_,Ys(f/so(_)));return Aa(_)?Fu(oo(oe),0,f).join(""):oe.slice(0,f)}function ik(f,_,I,oe){var Pe=_&k,Ye=Kp(f);function ht(){for(var St=-1,Ft=arguments.length,fn=-1,gn=oe.length,wn=$t(gn+Ft),qn=this&&this!==ys&&this instanceof ht?Ye:f;++fn<gn;)wn[fn]=oe[fn];for(;Ft--;)wn[fn++]=arguments[++St];return bi(qn,Pe?I:this,wn)}return ht}function Bw(f){return function(_,I,oe){return oe&&typeof oe!="number"&&xl(_,I,oe)&&(I=oe=t),_=_d(_),I===t?(I=_,_=0):I=_d(I),oe=oe===t?_<I?1:-1:_d(oe),Fh(_,I,oe,f)}}function Qm(f){return function(_,I){return typeof _=="string"&&typeof I=="string"||(_=zu(_),I=zu(I)),f(_,I)}}function Fw(f,_,I,oe,Pe,Ye,ht,St,Ft,fn){var gn=_&R,wn=gn?ht:t,qn=gn?t:ht,mr=gn?Ye:t,Ir=gn?t:Ye;_|=gn?ee:pe,_&=~(gn?pe:ee),_&A||(_&=-4);var hi=[f,_,Pe,mr,wn,Ir,qn,St,Ft,fn],Or=I.apply(t,hi);return f1(f)&&Zw(Or,hi),Or.placeholder=oe,Xw(Or,f,_)}function o1(f){var _=Ji[f];return function(I,oe){if(I=zu(I),oe=oe==null?0:ke(ui(oe),292),oe&&y(I)){var Pe=(as(I)+"e").split("e"),Ye=_(Pe[0]+"e"+(+Pe[1]+oe));return Pe=(as(Ye)+"e").split("e"),+(Pe[0]+"e"+(+Pe[1]-oe))}return _(I)}}var sk=Ts&&1/bo(new Ts([,-0]))[1]==Q?function(f){return new Ts(f)}:M1;function jw(f){return function(_){var I=el(_);return I==re?Ul(_):I==ce?Nc(_):Ms(_,f(_))}}function gd(f,_,I,oe,Pe,Ye,ht,St){var Ft=_&T;if(!Ft&&typeof f!="function")throw new Qi(o);var fn=oe?oe.length:0;if(fn||(_&=-97,oe=Pe=t),ht=ht===t?ht:de(ui(ht),0),St=St===t?St:ui(St),fn-=Pe?Pe.length:0,_&pe){var gn=oe,wn=Pe;oe=Pe=t}var qn=Ft?t:u1(f),mr=[f,_,I,oe,Pe,gn,wn,Ye,ht,St];if(qn&&bk(mr,qn),f=mr[0],_=mr[1],I=mr[2],oe=mr[3],Pe=mr[4],St=mr[9]=mr[9]===t?Ft?0:f.length:de(mr[9]-fn,0),!St&&_&(R|G)&&(_&=-25),!_||_==k)var Ir=nk(f,_,I);else _==R||_==G?Ir=rk(f,_,St):(_==ee||_==(k|ee))&&!Pe.length?Ir=ik(f,_,I,oe):Ir=Zm.apply(t,mr);var hi=qn?sc:Zw;return Xw(hi(Ir,mr),f,_)}function zw(f,_,I,oe){return f===t||uc(f,Ia[I])&&!Qr.call(oe,I)?_:f}function $w(f,_,I,oe,Pe,Ye){return fo(f)&&fo(_)&&(Ye.set(_,f),Fa(f,_,t,$w,Ye),Ye.delete(_)),f}function ok(f){return Jp(f)?t:f}function Uw(f,_,I,oe,Pe,Ye){var ht=I&S,St=f.length,Ft=_.length;if(St!=Ft&&!(ht&&Ft>St))return!1;var fn=Ye.get(f),gn=Ye.get(_);if(fn&&gn)return fn==_&&gn==f;var wn=-1,qn=!0,mr=I&E?new K:t;for(Ye.set(f,_),Ye.set(_,f);++wn<St;){var Ir=f[wn],hi=_[wn];if(oe)var Or=ht?oe(hi,Ir,wn,_,f,Ye):oe(Ir,hi,wn,f,_,Ye);if(Or!==t){if(Or)continue;qn=!1;break}if(mr){if(!z(_,function(Ci,Oi){if(!$l(mr,Oi)&&(Ir===Ci||Pe(Ir,Ci,I,oe,Ye)))return mr.push(Oi)})){qn=!1;break}}else if(!(Ir===hi||Pe(Ir,hi,I,oe,Ye))){qn=!1;break}}return Ye.delete(f),Ye.delete(_),qn}function ak(f,_,I,oe,Pe,Ye,ht){switch(I){case Xt:if(f.byteLength!=_.byteLength||f.byteOffset!=_.byteOffset)return!1;f=f.buffer,_=_.buffer;case zt:return!(f.byteLength!=_.byteLength||!Ye(new ia(f),new ia(_)));case ie:case te:case Z:return uc(+f,+_);case we:return f.name==_.name&&f.message==_.message;case Se:case je:return f==_+"";case re:var St=Ul;case ce:var Ft=oe&S;if(St||(St=bo),f.size!=_.size&&!Ft)return!1;var fn=ht.get(f);if(fn)return fn==_;oe|=E,ht.set(f,_);var gn=Uw(St(f),St(_),oe,Pe,Ye,ht);return ht.delete(f),gn;case st:if(mi)return mi.call(f)==mi.call(_)}return!1}function lk(f,_,I,oe,Pe,Ye){var ht=I&S,St=a1(f),Ft=St.length,fn=a1(_),gn=fn.length;if(Ft!=gn&&!ht)return!1;for(var wn=Ft;wn--;){var qn=St[wn];if(!(ht?qn in _:Qr.call(_,qn)))return!1}var mr=Ye.get(f),Ir=Ye.get(_);if(mr&&Ir)return mr==_&&Ir==f;var hi=!0;Ye.set(f,_),Ye.set(_,f);for(var Or=ht;++wn<Ft;){qn=St[wn];var Ci=f[qn],Oi=_[qn];if(oe)var _u=ht?oe(Oi,Ci,qn,_,f,Ye):oe(Ci,Oi,qn,f,_,Ye);if(!(_u===t?Ci===Oi||Pe(Ci,Oi,I,oe,Ye):_u)){hi=!1;break}Or||(Or=qn=="constructor")}if(hi&&!Or){var Ll=f.constructor,bu=_.constructor;Ll!=bu&&"constructor"in f&&"constructor"in _&&!(typeof Ll=="function"&&Ll instanceof Ll&&typeof bu=="function"&&bu instanceof bu)&&(hi=!1)}return Ye.delete(f),Ye.delete(_),hi}function md(f){return g1(Yw(f,t,rx),f+"")}function a1(f){return rt(f,wa,d1)}function l1(f){return rt(f,Wl,Vw)}var u1=es?function(f){return es.get(f)}:M1;function e0(f){for(var _=f.name+"",I=Ro[_],oe=Qr.call(Ro,_)?I.length:0;oe--;){var Pe=I[oe],Ye=Pe.func;if(Ye==null||Ye==f)return Pe.name}return _}function Hf(f){var _=Qr.call($e,"placeholder")?$e:f;return _.placeholder}function Tr(){var f=$e.iteratee||E1;return f=f===E1?cr:f,arguments.length?f(arguments[0],arguments[1]):f}function t0(f,_){var I=f.__data__;return mk(_)?I[typeof _=="string"?"string":"hash"]:I.map}function c1(f){for(var _=wa(f),I=_.length;I--;){var oe=_[I],Pe=f[oe];_[I]=[oe,Pe,Ww(Pe)]}return _}function zh(f,_){var I=ks(f,_);return Rt(I)?I:t}function uk(f){var _=Qr.call(f,Za),I=f[Za];try{f[Za]=t;var oe=!0}catch{}var Pe=Si.call(f);return oe&&(_?f[Za]=I:delete f[Za]),Pe}var d1=_a?function(f){return f==null?[]:(f=Li(f),ma(_a(f),function(_){return zi.call(f,_)}))}:k1,Vw=_a?function(f){for(var _=[];f;)Zo(_,d1(f)),f=Ra(f);return _}:k1,el=ct;($n&&el(new $n(new ArrayBuffer(1)))!=Xt||lr&&el(new lr)!=re||Vr&&el(Vr.resolve())!=Ne||Ts&&el(new Ts)!=ce||hs&&el(new hs)!=_t)&&(el=function(f){var _=ct(f),I=_==xe?f.constructor:t,oe=I?$h(I):"";if(oe)switch(oe){case cd:return Xt;case Ba:return re;case ba:return Ne;case sa:return ce;case Ih:return _t}return _});function ck(f,_,I){for(var oe=-1,Pe=I.length;++oe<Pe;){var Ye=I[oe],ht=Ye.size;switch(Ye.type){case"drop":f+=ht;break;case"dropRight":_-=ht;break;case"take":_=ke(_,f+ht);break;case"takeRight":f=de(f,_-ht);break}}return{start:f,end:_}}function dk(f){var _=f.match(In);return _?_[1].split(Pn):[]}function Hw(f,_,I){_=lc(_,f);for(var oe=-1,Pe=_.length,Ye=!1;++oe<Pe;){var ht=zc(_[oe]);if(!(Ye=f!=null&&I(f,ht)))break;f=f[ht]}return Ye||++oe!=Pe?Ye:(Pe=f==null?0:f.length,!!Pe&&l0(Pe)&&vd(ht,Pe)&&(ti(f)||Uh(f)))}function hk(f){var _=f.length,I=new f.constructor(_);return _&&typeof f[0]=="string"&&Qr.call(f,"index")&&(I.index=f.index,I.input=f.input),I}function Gw(f){return typeof f.constructor=="function"&&!Zp(f)?Bo(Ra(f)):{}}function fk(f,_,I){var oe=f.constructor;switch(_){case zt:return i1(f);case ie:case te:return new oe(+f);case Xt:return ZM(f,I);case et:case ut:case ot:case It:case Jt:case xn:case Sn:case An:case Zn:return Pw(f,I);case re:return new oe;case Z:case je:return new oe(f);case Se:return XM(f);case ce:return new oe;case st:return JM(f)}}function pk(f,_){var I=_.length;if(!I)return f;var oe=I-1;return _[oe]=(I>1?"& ":"")+_[oe],_=_.join(I>2?", ":" "),f.replace(Yt,`{
/* [wrapped with `+_+`] */
`)}function gk(f){return ti(f)||Uh(f)||!!(No&&f&&f[No])}function vd(f,_){var I=typeof f;return _=_??X,!!_&&(I=="number"||I!="symbol"&&us.test(f))&&f>-1&&f%1==0&&f<_}function xl(f,_,I){if(!fo(I))return!1;var oe=typeof _;return(oe=="number"?Gl(I)&&vd(_,I.length):oe=="string"&&_ in I)?uc(I[_],f):!1}function h1(f,_){if(ti(f))return!1;var I=typeof f;return I=="number"||I=="symbol"||I=="boolean"||f==null||yu(f)?!0:is.test(f)||!Vs.test(f)||_!=null&&f in Li(_)}function mk(f){var _=typeof f;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?f!=="__proto__":f===null}function f1(f){var _=e0(f),I=$e[_];if(typeof I!="function"||!(_ in Wr.prototype))return!1;if(f===I)return!0;var oe=u1(I);return!!oe&&f===oe[0]}function vk(f){return!!qs&&qs in f}var yk=Oa?yd:A1;function Zp(f){var _=f&&f.constructor,I=typeof _=="function"&&_.prototype||Ia;return f===I}function Ww(f){return f===f&&!fo(f)}function qw(f,_){return function(I){return I==null?!1:I[f]===_&&(_!==t||f in Li(I))}}function _k(f){var _=o0(f,function(oe){return I.size===u&&I.clear(),oe}),I=_.cache;return _}function bk(f,_){var I=f[1],oe=_[1],Pe=I|oe,Ye=Pe<(k|T|ge),ht=oe==ge&&I==R||oe==ge&&I==O&&f[7].length<=_[8]||oe==(ge|O)&&_[7].length<=_[8]&&I==R;if(!(Ye||ht))return f;oe&k&&(f[2]=_[2],Pe|=I&k?0:A);var St=_[3];if(St){var Ft=f[3];f[3]=Ft?kw(Ft,St,_[4]):St,f[4]=Ft?_o(f[3],h):_[4]}return St=_[5],St&&(Ft=f[5],f[5]=Ft?Aw(Ft,St,_[6]):St,f[6]=Ft?_o(f[5],h):_[6]),St=_[7],St&&(f[7]=St),oe&ge&&(f[8]=f[8]==null?_[8]:ke(f[8],_[8])),f[9]==null&&(f[9]=_[9]),f[0]=_[0],f[1]=Pe,f}function wk(f){var _=[];if(f!=null)for(var I in Li(f))_.push(I);return _}function xk(f){return Si.call(f)}function Yw(f,_,I){return _=de(_===t?f.length-1:_,0),function(){for(var oe=arguments,Pe=-1,Ye=de(oe.length-_,0),ht=$t(Ye);++Pe<Ye;)ht[Pe]=oe[_+Pe];Pe=-1;for(var St=$t(_+1);++Pe<_;)St[Pe]=oe[Pe];return St[_]=I(ht),bi(f,this,St)}}function Kw(f,_){return _.length<2?f:yr(f,Vl(_,0,-1))}function Lk(f,_){for(var I=f.length,oe=ke(_.length,I),Pe=Hl(f);oe--;){var Ye=_[oe];f[oe]=vd(Ye,I)?Pe[Ye]:t}return f}function p1(f,_){if(!(_==="constructor"&&typeof f[_]=="function")&&_!="__proto__")return f[_]}var Zw=Jw(sc),Xp=ud||function(f,_){return ys.setTimeout(f,_)},g1=Jw(Gm);function Xw(f,_,I){var oe=_+"";return g1(f,pk(oe,Sk(dk(oe),I)))}function Jw(f){var _=0,I=0;return function(){var oe=ft(),Pe=q-(oe-I);if(I=oe,Pe>0){if(++_>=N)return arguments[0]}else _=0;return f.apply(t,arguments)}}function n0(f,_){var I=-1,oe=f.length,Pe=oe-1;for(_=_===t?oe:_;++I<_;){var Ye=Bh(I,Pe),ht=f[Ye];f[Ye]=f[I],f[I]=ht}return f.length=_,f}var Qw=_k(function(f){var _=[];return f.charCodeAt(0)===46&&_.push(""),f.replace(Xn,function(I,oe,Pe,Ye){_.push(Pe?Ye.replace(Ct,"$1"):oe||I)}),_});function zc(f){if(typeof f=="string"||yu(f))return f;var _=f+"";return _=="0"&&1/f==-1/0?"-0":_}function $h(f){if(f!=null){try{return Na.call(f)}catch{}try{return f+""}catch{}}return""}function Sk(f,_){return Gs(ye,function(I){var oe="_."+I[0];_&I[1]&&!jl(f,oe)&&f.push(oe)}),f.sort()}function ex(f){if(f instanceof Wr)return f.clone();var _=new Xs(f.__wrapped__,f.__chain__);return _.__actions__=Hl(f.__actions__),_.__index__=f.__index__,_.__values__=f.__values__,_}function Ck(f,_,I){(I?xl(f,_,I):_===t)?_=1:_=de(ui(_),0);var oe=f==null?0:f.length;if(!oe||_<1)return[];for(var Pe=0,Ye=0,ht=$t(Ys(oe/_));Pe<oe;)ht[Ye++]=Vl(f,Pe,Pe+=_);return ht}function Ek(f){for(var _=-1,I=f==null?0:f.length,oe=0,Pe=[];++_<I;){var Ye=f[_];Ye&&(Pe[oe++]=Ye)}return Pe}function Pk(){var f=arguments.length;if(!f)return[];for(var _=$t(f-1),I=arguments[0],oe=f;oe--;)_[oe-1]=arguments[oe];return Zo(ti(I)?Hl(I):[I],Xe(_,1))}var Mk=li(function(f,_){return jo(f)?M(f,Xe(_,1,jo,!0)):[]}),kk=li(function(f,_){var I=ju(_);return jo(I)&&(I=t),jo(f)?M(f,Xe(_,1,jo,!0),Tr(I,2)):[]}),Ak=li(function(f,_){var I=ju(_);return jo(I)&&(I=t),jo(f)?M(f,Xe(_,1,jo,!0),t,I):[]});function Tk(f,_,I){var oe=f==null?0:f.length;return oe?(_=I||_===t?1:ui(_),Vl(f,_<0?0:_,oe)):[]}function Dk(f,_,I){var oe=f==null?0:f.length;return oe?(_=I||_===t?1:ui(_),_=oe-_,Vl(f,0,_<0?0:_)):[]}function Ik(f,_){return f&&f.length?pd(f,Tr(_,3),!0,!0):[]}function Ok(f,_){return f&&f.length?pd(f,Tr(_,3),!0):[]}function Nk(f,_,I,oe){var Pe=f==null?0:f.length;return Pe?(I&&typeof I!="number"&&xl(f,_,I)&&(I=0,oe=Pe),Me(f,_,I,oe)):[]}function tx(f,_,I){var oe=f==null?0:f.length;if(!oe)return-1;var Pe=I==null?0:ui(I);return Pe<0&&(Pe=de(oe+Pe,0)),Kt(f,Tr(_,3),Pe)}function nx(f,_,I){var oe=f==null?0:f.length;if(!oe)return-1;var Pe=oe-1;return I!==t&&(Pe=ui(I),Pe=I<0?de(oe+Pe,0):ke(Pe,oe-1)),Kt(f,Tr(_,3),Pe,!0)}function rx(f){var _=f==null?0:f.length;return _?Xe(f,1):[]}function Rk(f){var _=f==null?0:f.length;return _?Xe(f,Q):[]}function Bk(f,_){var I=f==null?0:f.length;return I?(_=_===t?1:ui(_),Xe(f,_)):[]}function Fk(f){for(var _=-1,I=f==null?0:f.length,oe={};++_<I;){var Pe=f[_];oe[Pe[0]]=Pe[1]}return oe}function ix(f){return f&&f.length?f[0]:t}function jk(f,_,I){var oe=f==null?0:f.length;if(!oe)return-1;var Pe=I==null?0:ui(I);return Pe<0&&(Pe=de(oe+Pe,0)),vn(f,_,Pe)}function zk(f){var _=f==null?0:f.length;return _?Vl(f,0,-1):[]}var $k=li(function(f){var _=wi(f,Zd);return _.length&&_[0]===f[0]?Le(_):[]}),Uk=li(function(f){var _=ju(f),I=wi(f,Zd);return _===ju(I)?_=t:I.pop(),I.length&&I[0]===f[0]?Le(I,Tr(_,2)):[]}),Vk=li(function(f){var _=ju(f),I=wi(f,Zd);return _=typeof _=="function"?_:t,_&&I.pop(),I.length&&I[0]===f[0]?Le(I,t,_):[]});function Hk(f,_){return f==null?"":P.call(f,_)}function ju(f){var _=f==null?0:f.length;return _?f[_-1]:t}function Gk(f,_,I){var oe=f==null?0:f.length;if(!oe)return-1;var Pe=oe;return I!==t&&(Pe=ui(I),Pe=Pe<0?de(oe+Pe,0):ke(Pe,oe-1)),_===_?Wa(f,_,Pe):Kt(f,Gn,Pe,!0)}function Wk(f,_){return f&&f.length?wl(f,ui(_)):t}var qk=li(sx);function sx(f,_){return f&&f.length&&_&&_.length?Bf(f,_):f}function Yk(f,_,I){return f&&f.length&&_&&_.length?Bf(f,_,Tr(I,2)):f}function Kk(f,_,I){return f&&f.length&&_&&_.length?Bf(f,_,t,I):f}var Zk=md(function(f,_){var I=f==null?0:f.length,oe=Nn(f,_);return Rh(f,wi(_,function(Pe){return vd(Pe,I)?+Pe:Pe}).sort(Mw)),oe});function Xk(f,_){var I=[];if(!(f&&f.length))return I;var oe=-1,Pe=[],Ye=f.length;for(_=Tr(_,3);++oe<Ye;){var ht=f[oe];_(ht,oe,f)&&(I.push(ht),Pe.push(oe))}return Rh(f,Pe),I}function m1(f){return f==null?f:hn.call(f)}function Jk(f,_,I){var oe=f==null?0:f.length;return oe?(I&&typeof I!="number"&&xl(f,_,I)?(_=0,I=oe):(_=_==null?0:ui(_),I=I===t?oe:ui(I)),Vl(f,_,I)):[]}function Qk(f,_){return oc(f,_)}function eA(f,_,I){return qp(f,_,Tr(I,2))}function tA(f,_){var I=f==null?0:f.length;if(I){var oe=oc(f,_);if(oe<I&&uc(f[oe],_))return oe}return-1}function nA(f,_){return oc(f,_,!0)}function rA(f,_,I){return qp(f,_,Tr(I,2),!0)}function iA(f,_){var I=f==null?0:f.length;if(I){var oe=oc(f,_,!0)-1;if(uc(f[oe],_))return oe}return-1}function sA(f){return f&&f.length?Yp(f):[]}function oA(f,_){return f&&f.length?Yp(f,Tr(_,2)):[]}function aA(f){var _=f==null?0:f.length;return _?Vl(f,1,_):[]}function lA(f,_,I){return f&&f.length?(_=I||_===t?1:ui(_),Vl(f,0,_<0?0:_)):[]}function uA(f,_,I){var oe=f==null?0:f.length;return oe?(_=I||_===t?1:ui(_),_=oe-_,Vl(f,_<0?0:_,oe)):[]}function cA(f,_){return f&&f.length?pd(f,Tr(_,3),!1,!0):[]}function dA(f,_){return f&&f.length?pd(f,Tr(_,3)):[]}var hA=li(function(f){return Fc(Xe(f,1,jo,!0))}),fA=li(function(f){var _=ju(f);return jo(_)&&(_=t),Fc(Xe(f,1,jo,!0),Tr(_,2))}),pA=li(function(f){var _=ju(f);return _=typeof _=="function"?_:t,Fc(Xe(f,1,jo,!0),t,_)});function gA(f){return f&&f.length?Fc(f):[]}function mA(f,_){return f&&f.length?Fc(f,Tr(_,2)):[]}function vA(f,_){return _=typeof _=="function"?_:t,f&&f.length?Fc(f,t,_):[]}function v1(f){if(!(f&&f.length))return[];var _=0;return f=ma(f,function(I){if(jo(I))return _=de(I.length,_),!0}),ws(_,function(I){return wi(f,Cr(I))})}function ox(f,_){if(!(f&&f.length))return[];var I=v1(f);return _==null?I:wi(I,function(oe){return bi(_,t,oe)})}var yA=li(function(f,_){return jo(f)?M(f,_):[]}),_A=li(function(f){return Bu(ma(f,jo))}),bA=li(function(f){var _=ju(f);return jo(_)&&(_=t),Bu(ma(f,jo),Tr(_,2))}),wA=li(function(f){var _=ju(f);return _=typeof _=="function"?_:t,Bu(ma(f,jo),t,_)}),xA=li(v1);function LA(f,_){return ac(f||[],_||[],xt)}function SA(f,_){return ac(f||[],_||[],hd)}var CA=li(function(f){var _=f.length,I=_>1?f[_-1]:t;return I=typeof I=="function"?(f.pop(),I):t,ox(f,I)});function ax(f){var _=$e(f);return _.__chain__=!0,_}function EA(f,_){return _(f),f}function r0(f,_){return _(f)}var PA=md(function(f){var _=f.length,I=_?f[0]:0,oe=this.__wrapped__,Pe=function(Ye){return Nn(Ye,f)};return _>1||this.__actions__.length||!(oe instanceof Wr)||!vd(I)?this.thru(Pe):(oe=oe.slice(I,+I+(_?1:0)),oe.__actions__.push({func:r0,args:[Pe],thisArg:t}),new Xs(oe,this.__chain__).thru(function(Ye){return _&&!Ye.length&&Ye.push(t),Ye}))});function MA(){return ax(this)}function kA(){return new Xs(this.value(),this.__chain__)}function AA(){this.__values__===t&&(this.__values__=wx(this.value()));var f=this.__index__>=this.__values__.length,_=f?t:this.__values__[this.__index__++];return{done:f,value:_}}function TA(){return this}function DA(f){for(var _,I=this;I instanceof rc;){var oe=ex(I);oe.__index__=0,oe.__values__=t,_?Pe.__wrapped__=oe:_=oe;var Pe=oe;I=I.__wrapped__}return Pe.__wrapped__=f,_}function IA(){var f=this.__wrapped__;if(f instanceof Wr){var _=f;return this.__actions__.length&&(_=new Wr(this)),_=_.reverse(),_.__actions__.push({func:r0,args:[m1],thisArg:t}),new Xs(_,this.__chain__)}return this.thru(m1)}function OA(){return Ru(this.__wrapped__,this.__actions__)}var NA=Km(function(f,_,I){Qr.call(f,I)?++f[I]:jn(f,I,1)});function RA(f,_,I){var oe=ti(f)?gu:le;return I&&xl(f,_,I)&&(_=t),oe(f,Tr(_,3))}function BA(f,_){var I=ti(f)?ma:it;return I(f,Tr(_,3))}var FA=Ow(tx),jA=Ow(nx);function zA(f,_){return Xe(i0(f,_),1)}function $A(f,_){return Xe(i0(f,_),Q)}function UA(f,_,I){return I=I===t?1:ui(I),Xe(i0(f,_),I)}function lx(f,_){var I=ti(f)?Gs:H;return I(f,Tr(_,3))}function ux(f,_){var I=ti(f)?ga:ne;return I(f,Tr(_,3))}var VA=Km(function(f,_,I){Qr.call(f,I)?f[I].push(_):jn(f,I,[_])});function HA(f,_,I,oe){f=Gl(f)?f:Wf(f),I=I&&!oe?ui(I):0;var Pe=f.length;return I<0&&(I=de(Pe+I,0)),u0(f)?I<=Pe&&f.indexOf(_,I)>-1:!!Pe&&vn(f,_,I)>-1}var GA=li(function(f,_,I){var oe=-1,Pe=typeof _=="function",Ye=Gl(f)?$t(f.length):[];return H(f,function(ht){Ye[++oe]=Pe?bi(_,ht,I):He(ht,_,I)}),Ye}),WA=Km(function(f,_,I){jn(f,I,_)});function i0(f,_){var I=ti(f)?wi:Hi;return I(f,Tr(_,3))}function qA(f,_,I,oe){return f==null?[]:(ti(_)||(_=_==null?[]:[_]),I=oe?t:I,ti(I)||(I=I==null?[]:[I]),Bc(f,_,I))}var YA=Km(function(f,_,I){f[I?0:1].push(_)},function(){return[[],[]]});function KA(f,_,I){var oe=ti(f)?Ga:Wi,Pe=arguments.length<3;return oe(f,Tr(_,4),I,Pe,H)}function ZA(f,_,I){var oe=ti(f)?bs:Wi,Pe=arguments.length<3;return oe(f,Tr(_,4),I,Pe,ne)}function XA(f,_){var I=ti(f)?ma:it;return I(f,a0(Tr(_,3)))}function JA(f){var _=ti(f)?Gt:jf;return _(f)}function QA(f,_,I){(I?xl(f,_,I):_===t)?_=1:_=ui(_);var oe=ti(f)?Tt:Hm;return oe(f,_)}function e6(f){var _=ti(f)?rn:Wm;return _(f)}function t6(f){if(f==null)return 0;if(Gl(f))return u0(f)?so(f):f.length;var _=el(f);return _==re||_==ce?f.size:vi(f).length}function n6(f,_,I){var oe=ti(f)?z:qm;return I&&xl(f,_,I)&&(_=t),oe(f,Tr(_,3))}var r6=li(function(f,_){if(f==null)return[];var I=_.length;return I>1&&xl(f,_[0],_[1])?_=[]:I>2&&xl(_[0],_[1],_[2])&&(_=[_[0]]),Bc(f,Xe(_,1),[])}),s0=xo||function(){return ys.Date.now()};function i6(f,_){if(typeof _!="function")throw new Qi(o);return f=ui(f),function(){if(--f<1)return _.apply(this,arguments)}}function cx(f,_,I){return _=I?t:_,_=f&&_==null?f.length:_,gd(f,ge,t,t,t,t,_)}function dx(f,_){var I;if(typeof _!="function")throw new Qi(o);return f=ui(f),function(){return--f>0&&(I=_.apply(this,arguments)),f<=1&&(_=t),I}}var y1=li(function(f,_,I){var oe=k;if(I.length){var Pe=_o(I,Hf(y1));oe|=ee}return gd(f,oe,_,I,Pe)}),hx=li(function(f,_,I){var oe=k|T;if(I.length){var Pe=_o(I,Hf(hx));oe|=ee}return gd(_,oe,f,I,Pe)});function fx(f,_,I){_=I?t:_;var oe=gd(f,R,t,t,t,t,t,_);return oe.placeholder=fx.placeholder,oe}function px(f,_,I){_=I?t:_;var oe=gd(f,G,t,t,t,t,t,_);return oe.placeholder=px.placeholder,oe}function gx(f,_,I){var oe,Pe,Ye,ht,St,Ft,fn=0,gn=!1,wn=!1,qn=!0;if(typeof f!="function")throw new Qi(o);_=zu(_)||0,fo(I)&&(gn=!!I.leading,wn="maxWait"in I,Ye=wn?de(zu(I.maxWait)||0,_):Ye,qn="trailing"in I?!!I.trailing:qn);function mr(zo){var cc=oe,bd=Pe;return oe=Pe=t,fn=zo,ht=f.apply(bd,cc),ht}function Ir(zo){return fn=zo,St=Xp(Ci,_),gn?mr(zo):ht}function hi(zo){var cc=zo-Ft,bd=zo-fn,Ox=_-cc;return wn?ke(Ox,Ye-bd):Ox}function Or(zo){var cc=zo-Ft,bd=zo-fn;return Ft===t||cc>=_||cc<0||wn&&bd>=Ye}function Ci(){var zo=s0();if(Or(zo))return Oi(zo);St=Xp(Ci,hi(zo))}function Oi(zo){return St=t,qn&&oe?mr(zo):(oe=Pe=t,ht)}function _u(){St!==t&&$f(St),fn=0,oe=Ft=Pe=St=t}function Ll(){return St===t?ht:Oi(s0())}function bu(){var zo=s0(),cc=Or(zo);if(oe=arguments,Pe=this,Ft=zo,cc){if(St===t)return Ir(Ft);if(wn)return $f(St),St=Xp(Ci,_),mr(Ft)}return St===t&&(St=Xp(Ci,_)),ht}return bu.cancel=_u,bu.flush=Ll,bu}var s6=li(function(f,_){return C(f,1,_)}),o6=li(function(f,_,I){return C(f,zu(_)||0,I)});function a6(f){return gd(f,j)}function o0(f,_){if(typeof f!="function"||_!=null&&typeof _!="function")throw new Qi(o);var I=function(){var oe=arguments,Pe=_?_.apply(this,oe):oe[0],Ye=I.cache;if(Ye.has(Pe))return Ye.get(Pe);var ht=f.apply(this,oe);return I.cache=Ye.set(Pe,ht)||Ye,ht};return I.cache=new(o0.Cache||Ja),I}o0.Cache=Ja;function a0(f){if(typeof f!="function")throw new Qi(o);return function(){var _=arguments;switch(_.length){case 0:return!f.call(this);case 1:return!f.call(this,_[0]);case 2:return!f.call(this,_[0],_[1]);case 3:return!f.call(this,_[0],_[1],_[2])}return!f.apply(this,_)}}function l6(f){return dx(2,f)}var u6=r1(function(f,_){_=_.length==1&&ti(_[0])?wi(_[0],Gr(Tr())):wi(Xe(_,1),Gr(Tr()));var I=_.length;return li(function(oe){for(var Pe=-1,Ye=ke(oe.length,I);++Pe<Ye;)oe[Pe]=_[Pe].call(this,oe[Pe]);return bi(f,this,oe)})}),_1=li(function(f,_){var I=_o(_,Hf(_1));return gd(f,ee,t,_,I)}),mx=li(function(f,_){var I=_o(_,Hf(mx));return gd(f,pe,t,_,I)}),c6=md(function(f,_){return gd(f,O,t,t,t,_)});function d6(f,_){if(typeof f!="function")throw new Qi(o);return _=_===t?_:ui(_),li(f,_)}function h6(f,_){if(typeof f!="function")throw new Qi(o);return _=_==null?0:de(ui(_),0),li(function(I){var oe=I[_],Pe=Fu(I,0,_);return oe&&Zo(Pe,oe),bi(f,this,Pe)})}function f6(f,_,I){var oe=!0,Pe=!0;if(typeof f!="function")throw new Qi(o);return fo(I)&&(oe="leading"in I?!!I.leading:oe,Pe="trailing"in I?!!I.trailing:Pe),gx(f,_,{leading:oe,maxWait:_,trailing:Pe})}function p6(f){return cx(f,1)}function g6(f,_){return _1(jh(_),f)}function m6(){if(!arguments.length)return[];var f=arguments[0];return ti(f)?f:[f]}function v6(f){return d(f,m)}function y6(f,_){return _=typeof _=="function"?_:t,d(f,m,_)}function _6(f){return d(f,p|m)}function b6(f,_){return _=typeof _=="function"?_:t,d(f,p|m,_)}function w6(f,_){return _==null||b(f,_,wa(_))}function uc(f,_){return f===_||f!==f&&_!==_}var x6=Qm(bt),L6=Qm(function(f,_){return f>=_}),Uh=Ve(function(){return arguments}())?Ve:function(f){return Lo(f)&&Qr.call(f,"callee")&&!zi.call(f,"callee")},ti=$t.isArray,S6=Iu?Gr(Iu):Ke;function Gl(f){return f!=null&&l0(f.length)&&!yd(f)}function jo(f){return Lo(f)&&Gl(f)}function C6(f){return f===!0||f===!1||Lo(f)&&ct(f)==ie}var Xd=c||A1,E6=Ma?Gr(Ma):Ze;function P6(f){return Lo(f)&&f.nodeType===1&&!Jp(f)}function M6(f){if(f==null)return!0;if(Gl(f)&&(ti(f)||typeof f=="string"||typeof f.splice=="function"||Xd(f)||Gf(f)||Uh(f)))return!f.length;var _=el(f);if(_==re||_==ce)return!f.size;if(Zp(f))return!vi(f).length;for(var I in f)if(Qr.call(f,I))return!1;return!0}function k6(f,_){return pt(f,_)}function A6(f,_,I){I=typeof I=="function"?I:t;var oe=I?I(f,_):t;return oe===t?pt(f,_,t,I):!!oe}function b1(f){if(!Lo(f))return!1;var _=ct(f);return _==we||_==Oe||typeof f.message=="string"&&typeof f.name=="string"&&!Jp(f)}function T6(f){return typeof f=="number"&&y(f)}function yd(f){if(!fo(f))return!1;var _=ct(f);return _==Be||_==ue||_==fe||_==Ge}function vx(f){return typeof f=="number"&&f==ui(f)}function l0(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=X}function fo(f){var _=typeof f;return f!=null&&(_=="object"||_=="function")}function Lo(f){return f!=null&&typeof f=="object"}var yx=hu?Gr(hu):Lt;function D6(f,_){return f===_||Nt(f,_,c1(_))}function I6(f,_,I){return I=typeof I=="function"?I:t,Nt(f,_,c1(_),I)}function O6(f){return _x(f)&&f!=+f}function N6(f){if(yk(f))throw new or(s);return Rt(f)}function R6(f){return f===null}function B6(f){return f==null}function _x(f){return typeof f=="number"||Lo(f)&&ct(f)==Z}function Jp(f){if(!Lo(f)||ct(f)!=xe)return!1;var _=Ra(f);if(_===null)return!0;var I=Qr.call(_,"constructor")&&_.constructor;return typeof I=="function"&&I instanceof I&&Na.call(I)==Di}var w1=fu?Gr(fu):dn;function F6(f){return vx(f)&&f>=-9007199254740991&&f<=X}var bx=ra?Gr(ra):Wn;function u0(f){return typeof f=="string"||!ti(f)&&Lo(f)&&ct(f)==je}function yu(f){return typeof f=="symbol"||Lo(f)&&ct(f)==st}var Gf=pu?Gr(pu):Qn;function j6(f){return f===t}function z6(f){return Lo(f)&&el(f)==_t}function $6(f){return Lo(f)&&ct(f)==Je}var U6=Qm(ei),V6=Qm(function(f,_){return f<=_});function wx(f){if(!f)return[];if(Gl(f))return u0(f)?oo(f):Hl(f);if(br&&f[br])return Io(f[br]());var _=el(f),I=_==re?Ul:_==ce?bo:Wf;return I(f)}function _d(f){if(!f)return f===0?f:0;if(f=zu(f),f===Q||f===-1/0){var _=f<0?-1:1;return _*_e}return f===f?f:0}function ui(f){var _=_d(f),I=_%1;return _===_?I?_-I:_:0}function xx(f){return f?ur(ui(f),0,We):0}function zu(f){if(typeof f=="number")return f;if(yu(f))return me;if(fo(f)){var _=typeof f.valueOf=="function"?f.valueOf():f;f=fo(_)?_+"":_}if(typeof f!="string")return f===0?f:+f;f=Xo(f);var I=ln.test(f);return I||vr.test(f)?du(f.slice(2),I?2:8):en.test(f)?me:+f}function Lx(f){return jc(f,Wl(f))}function H6(f){return f?ur(ui(f),-9007199254740991,X):f===0?f:0}function as(f){return f==null?"":Qa(f)}var G6=Uf(function(f,_){if(Zp(_)||Gl(_)){jc(_,wa(_),f);return}for(var I in _)Qr.call(_,I)&&xt(f,I,_[I])}),Sx=Uf(function(f,_){jc(_,Wl(_),f)}),c0=Uf(function(f,_,I,oe){jc(_,Wl(_),f,oe)}),W6=Uf(function(f,_,I,oe){jc(_,wa(_),f,oe)}),q6=md(Nn);function Y6(f,_){var I=Bo(f);return _==null?I:yn(I,_)}var K6=li(function(f,_){f=Li(f);var I=-1,oe=_.length,Pe=oe>2?_[2]:t;for(Pe&&xl(_[0],_[1],Pe)&&(oe=1);++I<oe;)for(var Ye=_[I],ht=Wl(Ye),St=-1,Ft=ht.length;++St<Ft;){var fn=ht[St],gn=f[fn];(gn===t||uc(gn,Ia[fn])&&!Qr.call(f,fn))&&(f[fn]=Ye[fn])}return f}),Z6=li(function(f){return f.push(t,$w),bi(Cx,t,f)});function X6(f,_){return Ot(f,Tr(_,3),on)}function J6(f,_){return Ot(f,Tr(_,3),Mn)}function Q6(f,_){return f==null?f:Pt(f,Tr(_,3),Wl)}function eT(f,_){return f==null?f:Ut(f,Tr(_,3),Wl)}function tT(f,_){return f&&on(f,Tr(_,3))}function nT(f,_){return f&&Mn(f,Tr(_,3))}function rT(f){return f==null?[]:Dn(f,wa(f))}function iT(f){return f==null?[]:Dn(f,Wl(f))}function x1(f,_,I){var oe=f==null?t:yr(f,_);return oe===t?I:oe}function sT(f,_){return f!=null&&Hw(f,_,Wt)}function L1(f,_){return f!=null&&Hw(f,_,At)}var oT=Rw(function(f,_,I){_!=null&&typeof _.toString!="function"&&(_=Si.call(_)),f[_]=I},C1(ql)),aT=Rw(function(f,_,I){_!=null&&typeof _.toString!="function"&&(_=Si.call(_)),Qr.call(f,_)?f[_].push(I):f[_]=[I]},Tr),lT=li(He);function wa(f){return Gl(f)?Ht(f):vi(f)}function Wl(f){return Gl(f)?Ht(f,!0):Ii(f)}function uT(f,_){var I={};return _=Tr(_,3),on(f,function(oe,Pe,Ye){jn(I,_(oe,Pe,Ye),oe)}),I}function cT(f,_){var I={};return _=Tr(_,3),on(f,function(oe,Pe,Ye){jn(I,Pe,_(oe,Pe,Ye))}),I}var dT=Uf(function(f,_,I){Fa(f,_,I)}),Cx=Uf(function(f,_,I,oe){Fa(f,_,I,oe)}),hT=md(function(f,_){var I={};if(f==null)return I;var oe=!1;_=wi(_,function(Ye){return Ye=lc(Ye,f),oe||(oe=Ye.length>1),Ye}),jc(f,l1(f),I),oe&&(I=d(I,p|v|m,ok));for(var Pe=_.length;Pe--;)fd(I,_[Pe]);return I});function fT(f,_){return Ex(f,a0(Tr(_)))}var pT=md(function(f,_){return f==null?{}:ja(f,_)});function Ex(f,_){if(f==null)return{};var I=wi(l1(f),function(oe){return[oe]});return _=Tr(_),ho(f,I,function(oe,Pe){return _(oe,Pe[0])})}function gT(f,_,I){_=lc(_,f);var oe=-1,Pe=_.length;for(Pe||(Pe=1,f=t);++oe<Pe;){var Ye=f==null?t:f[zc(_[oe])];Ye===t&&(oe=Pe,Ye=I),f=yd(Ye)?Ye.call(f):Ye}return f}function mT(f,_,I){return f==null?f:hd(f,_,I)}function vT(f,_,I,oe){return oe=typeof oe=="function"?oe:t,f==null?f:hd(f,_,I,oe)}var Px=jw(wa),Mx=jw(Wl);function yT(f,_,I){var oe=ti(f),Pe=oe||Xd(f)||Gf(f);if(_=Tr(_,4),I==null){var Ye=f&&f.constructor;Pe?I=oe?new Ye:[]:fo(f)?I=yd(Ye)?Bo(Ra(f)):{}:I={}}return(Pe?Gs:on)(f,function(ht,St,Ft){return _(I,ht,St,Ft)}),I}function _T(f,_){return f==null?!0:fd(f,_)}function bT(f,_,I){return f==null?f:zf(f,_,jh(I))}function wT(f,_,I,oe){return oe=typeof oe=="function"?oe:t,f==null?f:zf(f,_,jh(I),oe)}function Wf(f){return f==null?[]:ro(f,wa(f))}function xT(f){return f==null?[]:ro(f,Wl(f))}function LT(f,_,I){return I===t&&(I=_,_=t),I!==t&&(I=zu(I),I=I===I?I:0),_!==t&&(_=zu(_),_=_===_?_:0),ur(zu(f),_,I)}function ST(f,_,I){return _=_d(_),I===t?(I=_,_=0):I=_d(I),f=zu(f),Vt(f,_,I)}function CT(f,_,I){if(I&&typeof I!="boolean"&&xl(f,_,I)&&(_=I=t),I===t&&(typeof _=="boolean"?(I=_,_=t):typeof f=="boolean"&&(I=f,f=t)),f===t&&_===t?(f=0,_=1):(f=_d(f),_===t?(_=f,f=0):_=_d(_)),f>_){var oe=f;f=_,_=oe}if(I||f%1||_%1){var Pe=Zt();return ke(f+Pe*(_-f+Bl("1e-"+((Pe+"").length-1))),_)}return Bh(f,_)}var ET=Vf(function(f,_,I){return _=_.toLowerCase(),f+(I?kx(_):_)});function kx(f){return S1(as(f).toLowerCase())}function Ax(f){return f=as(f),f&&f.replace(En,tc).replace(Qu,"")}function PT(f,_,I){f=as(f),_=Qa(_);var oe=f.length;I=I===t?oe:ur(ui(I),0,oe);var Pe=I;return I-=_.length,I>=0&&f.slice(I,Pe)==_}function MT(f){return f=as(f),f&&Kn.test(f)?f.replace(hr,yl):f}function kT(f){return f=as(f),f&&Et.test(f)?f.replace(ss,"\\$&"):f}var AT=Vf(function(f,_,I){return f+(I?"-":"")+_.toLowerCase()}),TT=Vf(function(f,_,I){return f+(I?" ":"")+_.toLowerCase()}),DT=Iw("toLowerCase");function IT(f,_,I){f=as(f),_=ui(_);var oe=_?so(f):0;if(!_||oe>=_)return f;var Pe=(_-oe)/2;return Jm(Ks(Pe),I)+f+Jm(Ys(Pe),I)}function OT(f,_,I){f=as(f),_=ui(_);var oe=_?so(f):0;return _&&oe<_?f+Jm(_-oe,I):f}function NT(f,_,I){f=as(f),_=ui(_);var oe=_?so(f):0;return _&&oe<_?Jm(_-oe,I)+f:f}function RT(f,_,I){return I||_==null?_=0:_&&(_=+_),jt(as(f).replace(at,""),_||0)}function BT(f,_,I){return(I?xl(f,_,I):_===t)?_=1:_=ui(_),Ff(as(f),_)}function FT(){var f=arguments,_=as(f[0]);return f.length<3?_:_.replace(f[1],f[2])}var jT=Vf(function(f,_,I){return f+(I?"_":"")+_.toLowerCase()});function zT(f,_,I){return I&&typeof I!="number"&&xl(f,_,I)&&(_=I=t),I=I===t?We:I>>>0,I?(f=as(f),f&&(typeof _=="string"||_!=null&&!w1(_))&&(_=Qa(_),!_&&Aa(f))?Fu(oo(f),0,I):f.split(_,I)):[]}var $T=Vf(function(f,_,I){return f+(I?" ":"")+S1(_)});function UT(f,_,I){return f=as(f),I=I==null?0:ur(ui(I),0,f.length),_=Qa(_),f.slice(I,I+_.length)==_}function VT(f,_,I){var oe=$e.templateSettings;I&&xl(f,_,I)&&(_=t),f=as(f),_=c0({},_,oe,zw);var Pe=c0({},_.imports,oe.imports,zw),Ye=wa(Pe),ht=ro(Pe,Ye),St,Ft,fn=0,gn=_.interpolate||Lr,wn="__p += '",qn=mu((_.escape||Lr).source+"|"+gn.source+"|"+(gn===Bi?mn:Lr).source+"|"+(_.evaluate||Lr).source+"|$","g"),mr="//# sourceURL="+(Qr.call(_,"sourceURL")?(_.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++uu+"]")+`
`;f.replace(qn,function(Or,Ci,Oi,_u,Ll,bu){return Oi||(Oi=_u),wn+=f.slice(fn,bu).replace(Jn,_l),Ci&&(St=!0,wn+=`' +
__e(`+Ci+`) +
'`),Ll&&(Ft=!0,wn+=`';
`+Ll+`;
__p += '`),Oi&&(wn+=`' +
((__t = (`+Oi+`)) == null ? '' : __t) +
'`),fn=bu+Or.length,Or}),wn+=`';
`;var Ir=Qr.call(_,"variable")&&_.variable;if(!Ir)wn=`with (obj) {
`+wn+`
}
`;else if(Yn.test(Ir))throw new or(a);wn=(Ft?wn.replace(Cn,""):wn).replace(cn,"$1").replace(bn,"$1;"),wn="function("+(Ir||"obj")+`) {
`+(Ir?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(St?", __e = _.escape":"")+(Ft?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+wn+`return __p
}`;var hi=Dx(function(){return Mr(Ye,mr+"return "+wn).apply(t,ht)});if(hi.source=wn,b1(hi))throw hi;return hi}function HT(f){return as(f).toLowerCase()}function GT(f){return as(f).toUpperCase()}function WT(f,_,I){if(f=as(f),f&&(I||_===t))return Xo(f);if(!f||!(_=Qa(_)))return f;var oe=oo(f),Pe=oo(_),Ye=yo(oe,Pe),ht=Ou(oe,Pe)+1;return Fu(oe,Ye,ht).join("")}function qT(f,_,I){if(f=as(f),f&&(I||_===t))return f.slice(0,qa(f)+1);if(!f||!(_=Qa(_)))return f;var oe=oo(f),Pe=Ou(oe,oo(_))+1;return Fu(oe,0,Pe).join("")}function YT(f,_,I){if(f=as(f),f&&(I||_===t))return f.replace(at,"");if(!f||!(_=Qa(_)))return f;var oe=oo(f),Pe=yo(oe,oo(_));return Fu(oe,Pe).join("")}function KT(f,_){var I=Y,oe=V;if(fo(_)){var Pe="separator"in _?_.separator:Pe;I="length"in _?ui(_.length):I,oe="omission"in _?Qa(_.omission):oe}f=as(f);var Ye=f.length;if(Aa(f)){var ht=oo(f);Ye=ht.length}if(I>=Ye)return f;var St=I-so(oe);if(St<1)return oe;var Ft=ht?Fu(ht,0,St).join(""):f.slice(0,St);if(Pe===t)return Ft+oe;if(ht&&(St+=Ft.length-St),w1(Pe)){if(f.slice(St).search(Pe)){var fn,gn=Ft;for(Pe.global||(Pe=mu(Pe.source,as(Hn.exec(Pe))+"g")),Pe.lastIndex=0;fn=Pe.exec(gn);)var wn=fn.index;Ft=Ft.slice(0,wn===t?St:wn)}}else if(f.indexOf(Qa(Pe),St)!=St){var qn=Ft.lastIndexOf(Pe);qn>-1&&(Ft=Ft.slice(0,qn))}return Ft+oe}function ZT(f){return f=as(f),f&&wr.test(f)?f.replace(ir,Ya):f}var XT=Vf(function(f,_,I){return f+(I?" ":"")+_.toUpperCase()}),S1=Iw("toUpperCase");function Tx(f,_,I){return f=as(f),_=I?t:_,_===t?Jo(f)?Ta(f):mt(f):f.match(_)||[]}var Dx=li(function(f,_){try{return bi(f,t,_)}catch(I){return b1(I)?I:new or(I)}}),JT=md(function(f,_){return Gs(_,function(I){I=zc(I),jn(f,I,y1(f[I],f))}),f});function QT(f){var _=f==null?0:f.length,I=Tr();return f=_?wi(f,function(oe){if(typeof oe[1]!="function")throw new Qi(o);return[I(oe[0]),oe[1]]}):[],li(function(oe){for(var Pe=-1;++Pe<_;){var Ye=f[Pe];if(bi(Ye[0],this,oe))return bi(Ye[1],this,oe)}})}function eD(f){return g(d(f,p))}function C1(f){return function(){return f}}function tD(f,_){return f==null||f!==f?_:f}var nD=Nw(),rD=Nw(!0);function ql(f){return f}function E1(f){return cr(typeof f=="function"?f:d(f,p))}function iD(f){return Fo(d(f,p))}function sD(f,_){return ic(f,d(_,p))}var oD=li(function(f,_){return function(I){return He(I,f,_)}}),aD=li(function(f,_){return function(I){return He(f,I,_)}});function P1(f,_,I){var oe=wa(_),Pe=Dn(_,oe);I==null&&!(fo(_)&&(Pe.length||!oe.length))&&(I=_,_=f,f=this,Pe=Dn(_,wa(_)));var Ye=!(fo(I)&&"chain"in I)||!!I.chain,ht=yd(f);return Gs(Pe,function(St){var Ft=_[St];f[St]=Ft,ht&&(f.prototype[St]=function(){var fn=this.__chain__;if(Ye||fn){var gn=f(this.__wrapped__),wn=gn.__actions__=Hl(this.__actions__);return wn.push({func:Ft,args:arguments,thisArg:f}),gn.__chain__=fn,gn}return Ft.apply(f,Zo([this.value()],arguments))})}),f}function lD(){return ys._===this&&(ys._=xs),this}function M1(){}function uD(f){return f=ui(f),li(function(_){return wl(_,f)})}var cD=s1(wi),dD=s1(gu),hD=s1(z);function Ix(f){return h1(f)?Cr(zc(f)):Ls(f)}function fD(f){return function(_){return f==null?t:yr(f,_)}}var pD=Bw(),gD=Bw(!0);function k1(){return[]}function A1(){return!1}function mD(){return{}}function vD(){return""}function yD(){return!0}function _D(f,_){if(f=ui(f),f<1||f>X)return[];var I=We,oe=ke(f,We);_=Tr(_),f-=We;for(var Pe=ws(oe,_);++I<f;)_(I);return Pe}function bD(f){return ti(f)?wi(f,zc):yu(f)?[f]:Hl(Qw(as(f)))}function wD(f){var _=++va;return as(f)+_}var xD=Xm(function(f,_){return f+_},0),LD=o1("ceil"),SD=Xm(function(f,_){return f/_},1),CD=o1("floor");function ED(f){return f&&f.length?be(f,ql,bt):t}function PD(f,_){return f&&f.length?be(f,Tr(_,2),bt):t}function MD(f){return fr(f,ql)}function kD(f,_){return fr(f,Tr(_,2))}function AD(f){return f&&f.length?be(f,ql,ei):t}function TD(f,_){return f&&f.length?be(f,Tr(_,2),ei):t}var DD=Xm(function(f,_){return f*_},1),ID=o1("round"),OD=Xm(function(f,_){return f-_},0);function ND(f){return f&&f.length?xi(f,ql):0}function RD(f,_){return f&&f.length?xi(f,Tr(_,2)):0}return $e.after=i6,$e.ary=cx,$e.assign=G6,$e.assignIn=Sx,$e.assignInWith=c0,$e.assignWith=W6,$e.at=q6,$e.before=dx,$e.bind=y1,$e.bindAll=JT,$e.bindKey=hx,$e.castArray=m6,$e.chain=ax,$e.chunk=Ck,$e.compact=Ek,$e.concat=Pk,$e.cond=QT,$e.conforms=eD,$e.constant=C1,$e.countBy=NA,$e.create=Y6,$e.curry=fx,$e.curryRight=px,$e.debounce=gx,$e.defaults=K6,$e.defaultsDeep=Z6,$e.defer=s6,$e.delay=o6,$e.difference=Mk,$e.differenceBy=kk,$e.differenceWith=Ak,$e.drop=Tk,$e.dropRight=Dk,$e.dropRightWhile=Ik,$e.dropWhile=Ok,$e.fill=Nk,$e.filter=BA,$e.flatMap=zA,$e.flatMapDeep=$A,$e.flatMapDepth=UA,$e.flatten=rx,$e.flattenDeep=Rk,$e.flattenDepth=Bk,$e.flip=a6,$e.flow=nD,$e.flowRight=rD,$e.fromPairs=Fk,$e.functions=rT,$e.functionsIn=iT,$e.groupBy=VA,$e.initial=zk,$e.intersection=$k,$e.intersectionBy=Uk,$e.intersectionWith=Vk,$e.invert=oT,$e.invertBy=aT,$e.invokeMap=GA,$e.iteratee=E1,$e.keyBy=WA,$e.keys=wa,$e.keysIn=Wl,$e.map=i0,$e.mapKeys=uT,$e.mapValues=cT,$e.matches=iD,$e.matchesProperty=sD,$e.memoize=o0,$e.merge=dT,$e.mergeWith=Cx,$e.method=oD,$e.methodOf=aD,$e.mixin=P1,$e.negate=a0,$e.nthArg=uD,$e.omit=hT,$e.omitBy=fT,$e.once=l6,$e.orderBy=qA,$e.over=cD,$e.overArgs=u6,$e.overEvery=dD,$e.overSome=hD,$e.partial=_1,$e.partialRight=mx,$e.partition=YA,$e.pick=pT,$e.pickBy=Ex,$e.property=Ix,$e.propertyOf=fD,$e.pull=qk,$e.pullAll=sx,$e.pullAllBy=Yk,$e.pullAllWith=Kk,$e.pullAt=Zk,$e.range=pD,$e.rangeRight=gD,$e.rearg=c6,$e.reject=XA,$e.remove=Xk,$e.rest=d6,$e.reverse=m1,$e.sampleSize=QA,$e.set=mT,$e.setWith=vT,$e.shuffle=e6,$e.slice=Jk,$e.sortBy=r6,$e.sortedUniq=sA,$e.sortedUniqBy=oA,$e.split=zT,$e.spread=h6,$e.tail=aA,$e.take=lA,$e.takeRight=uA,$e.takeRightWhile=cA,$e.takeWhile=dA,$e.tap=EA,$e.throttle=f6,$e.thru=r0,$e.toArray=wx,$e.toPairs=Px,$e.toPairsIn=Mx,$e.toPath=bD,$e.toPlainObject=Lx,$e.transform=yT,$e.unary=p6,$e.union=hA,$e.unionBy=fA,$e.unionWith=pA,$e.uniq=gA,$e.uniqBy=mA,$e.uniqWith=vA,$e.unset=_T,$e.unzip=v1,$e.unzipWith=ox,$e.update=bT,$e.updateWith=wT,$e.values=Wf,$e.valuesIn=xT,$e.without=yA,$e.words=Tx,$e.wrap=g6,$e.xor=_A,$e.xorBy=bA,$e.xorWith=wA,$e.zip=xA,$e.zipObject=LA,$e.zipObjectDeep=SA,$e.zipWith=CA,$e.entries=Px,$e.entriesIn=Mx,$e.extend=Sx,$e.extendWith=c0,P1($e,$e),$e.add=xD,$e.attempt=Dx,$e.camelCase=ET,$e.capitalize=kx,$e.ceil=LD,$e.clamp=LT,$e.clone=v6,$e.cloneDeep=_6,$e.cloneDeepWith=b6,$e.cloneWith=y6,$e.conformsTo=w6,$e.deburr=Ax,$e.defaultTo=tD,$e.divide=SD,$e.endsWith=PT,$e.eq=uc,$e.escape=MT,$e.escapeRegExp=kT,$e.every=RA,$e.find=FA,$e.findIndex=tx,$e.findKey=X6,$e.findLast=jA,$e.findLastIndex=nx,$e.findLastKey=J6,$e.floor=CD,$e.forEach=lx,$e.forEachRight=ux,$e.forIn=Q6,$e.forInRight=eT,$e.forOwn=tT,$e.forOwnRight=nT,$e.get=x1,$e.gt=x6,$e.gte=L6,$e.has=sT,$e.hasIn=L1,$e.head=ix,$e.identity=ql,$e.includes=HA,$e.indexOf=jk,$e.inRange=ST,$e.invoke=lT,$e.isArguments=Uh,$e.isArray=ti,$e.isArrayBuffer=S6,$e.isArrayLike=Gl,$e.isArrayLikeObject=jo,$e.isBoolean=C6,$e.isBuffer=Xd,$e.isDate=E6,$e.isElement=P6,$e.isEmpty=M6,$e.isEqual=k6,$e.isEqualWith=A6,$e.isError=b1,$e.isFinite=T6,$e.isFunction=yd,$e.isInteger=vx,$e.isLength=l0,$e.isMap=yx,$e.isMatch=D6,$e.isMatchWith=I6,$e.isNaN=O6,$e.isNative=N6,$e.isNil=B6,$e.isNull=R6,$e.isNumber=_x,$e.isObject=fo,$e.isObjectLike=Lo,$e.isPlainObject=Jp,$e.isRegExp=w1,$e.isSafeInteger=F6,$e.isSet=bx,$e.isString=u0,$e.isSymbol=yu,$e.isTypedArray=Gf,$e.isUndefined=j6,$e.isWeakMap=z6,$e.isWeakSet=$6,$e.join=Hk,$e.kebabCase=AT,$e.last=ju,$e.lastIndexOf=Gk,$e.lowerCase=TT,$e.lowerFirst=DT,$e.lt=U6,$e.lte=V6,$e.max=ED,$e.maxBy=PD,$e.mean=MD,$e.meanBy=kD,$e.min=AD,$e.minBy=TD,$e.stubArray=k1,$e.stubFalse=A1,$e.stubObject=mD,$e.stubString=vD,$e.stubTrue=yD,$e.multiply=DD,$e.nth=Wk,$e.noConflict=lD,$e.noop=M1,$e.now=s0,$e.pad=IT,$e.padEnd=OT,$e.padStart=NT,$e.parseInt=RT,$e.random=CT,$e.reduce=KA,$e.reduceRight=ZA,$e.repeat=BT,$e.replace=FT,$e.result=gT,$e.round=ID,$e.runInContext=kt,$e.sample=JA,$e.size=t6,$e.snakeCase=jT,$e.some=n6,$e.sortedIndex=Qk,$e.sortedIndexBy=eA,$e.sortedIndexOf=tA,$e.sortedLastIndex=nA,$e.sortedLastIndexBy=rA,$e.sortedLastIndexOf=iA,$e.startCase=$T,$e.startsWith=UT,$e.subtract=OD,$e.sum=ND,$e.sumBy=RD,$e.template=VT,$e.times=_D,$e.toFinite=_d,$e.toInteger=ui,$e.toLength=xx,$e.toLower=HT,$e.toNumber=zu,$e.toSafeInteger=H6,$e.toString=as,$e.toUpper=GT,$e.trim=WT,$e.trimEnd=qT,$e.trimStart=YT,$e.truncate=KT,$e.unescape=ZT,$e.uniqueId=wD,$e.upperCase=XT,$e.upperFirst=S1,$e.each=lx,$e.eachRight=ux,$e.first=ix,P1($e,function(){var f={};return on($e,function(_,I){Qr.call($e.prototype,I)||(f[I]=_)}),f}(),{chain:!1}),$e.VERSION=r,Gs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){$e[f].placeholder=$e}),Gs(["drop","take"],function(f,_){Wr.prototype[f]=function(I){I=I===t?1:de(ui(I),0);var oe=this.__filtered__&&!_?new Wr(this):this.clone();return oe.__filtered__?oe.__takeCount__=ke(I,oe.__takeCount__):oe.__views__.push({size:ke(I,We),type:f+(oe.__dir__<0?"Right":"")}),oe},Wr.prototype[f+"Right"]=function(I){return this.reverse()[f](I).reverse()}}),Gs(["filter","map","takeWhile"],function(f,_){var I=_+1,oe=I==$||I==B;Wr.prototype[f]=function(Pe){var Ye=this.clone();return Ye.__iteratees__.push({iteratee:Tr(Pe,3),type:I}),Ye.__filtered__=Ye.__filtered__||oe,Ye}}),Gs(["head","last"],function(f,_){var I="take"+(_?"Right":"");Wr.prototype[f]=function(){return this[I](1).value()[0]}}),Gs(["initial","tail"],function(f,_){var I="drop"+(_?"":"Right");Wr.prototype[f]=function(){return this.__filtered__?new Wr(this):this[I](1)}}),Wr.prototype.compact=function(){return this.filter(ql)},Wr.prototype.find=function(f){return this.filter(f).head()},Wr.prototype.findLast=function(f){return this.reverse().find(f)},Wr.prototype.invokeMap=li(function(f,_){return typeof f=="function"?new Wr(this):this.map(function(I){return He(I,f,_)})}),Wr.prototype.reject=function(f){return this.filter(a0(Tr(f)))},Wr.prototype.slice=function(f,_){f=ui(f);var I=this;return I.__filtered__&&(f>0||_<0)?new Wr(I):(f<0?I=I.takeRight(-f):f&&(I=I.drop(f)),_!==t&&(_=ui(_),I=_<0?I.dropRight(-_):I.take(_-f)),I)},Wr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Wr.prototype.toArray=function(){return this.take(We)},on(Wr.prototype,function(f,_){var I=/^(?:filter|find|map|reject)|While$/.test(_),oe=/^(?:head|last)$/.test(_),Pe=$e[oe?"take"+(_=="last"?"Right":""):_],Ye=oe||/^find/.test(_);Pe&&($e.prototype[_]=function(){var ht=this.__wrapped__,St=oe?[1]:arguments,Ft=ht instanceof Wr,fn=St[0],gn=Ft||ti(ht),wn=function(Ci){var Oi=Pe.apply($e,Zo([Ci],St));return oe&&qn?Oi[0]:Oi};gn&&I&&typeof fn=="function"&&fn.length!=1&&(Ft=gn=!1);var qn=this.__chain__,mr=!!this.__actions__.length,Ir=Ye&&!qn,hi=Ft&&!mr;if(!Ye&&gn){ht=hi?ht:new Wr(this);var Or=f.apply(ht,St);return Or.__actions__.push({func:r0,args:[wn],thisArg:t}),new Xs(Or,qn)}return Ir&&hi?f.apply(this,St):(Or=this.thru(wn),Ir?oe?Or.value()[0]:Or.value():Or)})}),Gs(["pop","push","shift","sort","splice","unshift"],function(f){var _=Da[f],I=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",oe=/^(?:pop|shift)$/.test(f);$e.prototype[f]=function(){var Pe=arguments;if(oe&&!this.__chain__){var Ye=this.value();return _.apply(ti(Ye)?Ye:[],Pe)}return this[I](function(ht){return _.apply(ti(ht)?ht:[],Pe)})}}),on(Wr.prototype,function(f,_){var I=$e[_];if(I){var oe=I.name+"";Qr.call(Ro,oe)||(Ro[oe]=[]),Ro[oe].push({name:_,func:I})}}),Ro[Zm(t,T).name]=[{name:"wrapper",func:t}],Wr.prototype.clone=Gd,Wr.prototype.reverse=Tf,Wr.prototype.value=Wd,$e.prototype.at=PA,$e.prototype.chain=MA,$e.prototype.commit=kA,$e.prototype.next=AA,$e.prototype.plant=DA,$e.prototype.reverse=IA,$e.prototype.toJSON=$e.prototype.valueOf=$e.prototype.value=OA,$e.prototype.first=$e.prototype.head,br&&($e.prototype[br]=TA),$e},lo=Qo();_s?((_s.exports=lo)._=lo,gr._=lo):ys._=lo}).call(Ca)})(Kv,Kv.exports);var HE=Kv.exports;class $a extends tr.Polygon{constructor(t,r={}){super([],{...r,pmIgnore:!1,interactive:!0});tt(this,"_width");tt(this,"_height");tt(this,"_center");tt(this,"_rotation");tt(this,"_isMapReady",!1);tt(this,"properties");tt(this,"_helperPoints",{corners:[],midPoints:[]});tt(this,"_throttledUpdateProperties");const i=t instanceof tr.LatLngBounds?t:tr.latLngBounds(t);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=On.measure("Rectangle.constructor.calculateWidth",()=>{const a=e_([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(a,1)}),this._height=On.measure("Rectangle.constructor.calculateHeight",()=>{const a=e_([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(a,1)}),console.log("[Rectangle][constructor] Dimensions calculées depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=On.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=On.measure("Rectangle.constructor.initThrottle",()=>HE.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){On.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Début mise à jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const t=this._width/2,r=this._height/2,i=c5([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=c5([this._center.lng,this._center.lat],t,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,a=Math.abs(s[0]-this._center.lng)*2,l=[tr.latLng(this._center.lat+o/2,this._center.lng-a/2),tr.latLng(this._center.lat+o/2,this._center.lng+a/2),tr.latLng(this._center.lat-o/2,this._center.lng+a/2),tr.latLng(this._center.lat-o/2,this._center.lng-a/2)];if(this._rotation===0){this.setLatLngs(l);return}const u=this._map.latLngToContainerPoint(this._center),h=l.map(k=>this._map.latLngToContainerPoint(k)),p=-this._rotation*Math.PI/180,v=Math.cos(p),m=Math.sin(p),E=h.map(k=>{const T=k.x-u.x,A=k.y-u.y;return tr.point(u.x+(T*v-A*m),u.y+(T*m+A*v))}).map(k=>this._map.containerPointToLatLng(k));console.log("[Rectangle][_updatePolygonCoordinates] Résultat final:",{corners:E,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(E),this.fire("coordinates:updated",{corners:E,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return On.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const t=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(tr.latLng(this._center.lat,this._center.lng+t)).x-r.x,o=e_([this._center.lng,this._center.lat],[this._center.lng+t,this._center.lat],{units:"meters"}),a=Math.abs(s/o);return isNaN(a)||a<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par défaut"),1):a})}getRotatedCorners(){return On.measure("Rectangle.getRotatedCorners",()=>{try{const t=this.getLatLngs();if(!t||!Array.isArray(t)||t.length===0){const r=this._width/2,i=this._height/2;return[tr.latLng(this._center.lat+i,this._center.lng-r),tr.latLng(this._center.lat+i,this._center.lng+r),tr.latLng(this._center.lat-i,this._center.lng+r),tr.latLng(this._center.lat-i,this._center.lng-r)]}return t[0]}catch(t){console.warn("Error in getRotatedCorners:",t);const r=this._width/2,i=this._height/2;return[tr.latLng(this._center.lat+i,this._center.lng-r),tr.latLng(this._center.lat+i,this._center.lng+r),tr.latLng(this._center.lat-i,this._center.lng+r),tr.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return On.measure("Rectangle.getMidPoints",()=>{try{const t=this.getRotatedCorners();if(!t||t.length<4){const i=this._width/2,s=this._height/2;return[tr.latLng(this._center.lat+s,this._center.lng),tr.latLng(this._center.lat,this._center.lng+i),tr.latLng(this._center.lat-s,this._center.lng),tr.latLng(this._center.lat,this._center.lng-i)]}if(!t.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(t[3],t[0]),this._getMidPoint(t[0],t[1]),this._getMidPoint(t[1],t[2]),this._getMidPoint(t[2],t[3])]}catch(t){console.warn("Error in getMidPoints:",t);const r=this._width/2,i=this._height/2;return[tr.latLng(this._center.lat+i,this._center.lng),tr.latLng(this._center.lat,this._center.lng+r),tr.latLng(this._center.lat-i,this._center.lng),tr.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(t,r){return On.measure("Rectangle._getMidPoint",()=>{if(!t||!r||typeof t.lat!="number"||typeof t.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return tr.latLng((t.lat+r.lat)/2,(t.lng+r.lng)/2)})}getCenter(){return On.measure("Rectangle.getCenter",()=>this._center)}setCenter(t){On.measure("Rectangle.setCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return On.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(t,r=!1){On.measure("Rectangle.setRotation",()=>{this._rotation=(t%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){On.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return On.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(t,r){On.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Début de la mise à jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:t,newHeight:r}),this._width=t,this._height=r,console.log("[Rectangle][setDimensions] Mise à jour des coordonnées du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise à jour des propriétés"),this.updateProperties(),console.log("[Rectangle][setDimensions] Émission de l'événement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(t,r){On.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,u=Math.cos(l),h=Math.sin(l),p=o*u-a*h,v=o*h+a*u,m=this._getPixelsPerMeter(),S=t===0||t===3?-1:1,E=t===0||t===1?1:-1,k=Math.max(Math.abs(p*2)/m,1),T=Math.max(Math.abs(v*2)/m,1),A=k*m/2,R=T*m/2,G=S*A*u-E*R*h,ee=S*A*h+E*R*u,pe=tr.point(s.x-G,s.y-ee),ge=this._map.containerPointToLatLng(pe),Y=[tr.point(pe.x-A,pe.y+R),tr.point(pe.x+A,pe.y+R),tr.point(pe.x+A,pe.y-R),tr.point(pe.x-A,pe.y-R)].map(V=>{const N=V.x-pe.x,q=V.y-pe.y;return tr.point(pe.x+(N*u-q*h),pe.y+(N*h+q*u))}).map(V=>this._map.containerPointToLatLng(V));this._width=k,this._height=T,this._center=ge,this.setLatLngs(Y),this.fire("coordinates:updated",{corners:Y,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(t,r){On.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,u=Math.cos(l),h=Math.sin(l),p=o*u-a*h,v=o*h+a*u,m=this._getPixelsPerMeter();t%2===0?this._height=Math.abs(v*2)/m:this._width=Math.abs(p*2)/m,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(t){On.measure("Rectangle.moveFromCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){On.measure("Rectangle.updateProperties",()=>{var i,s,o;const t=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:t,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:t,midPoints:this.getMidPoints()})})}setName(t){On.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return On.measure("Rectangle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}generateHelperPoints(t,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){On.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(a=>tr.circleMarker(a,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(t)),this._helperPoints.midPoints=o.map(a=>tr.circleMarker(a,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(t))})}clearHelperPoints(){On.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){On.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const t=this.getRotatedCorners(),r=this.getMidPoints();t.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(t){return On.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],a=t.distanceTo(o);for(let l=1;l<s.length;l++){const u=t.distanceTo(s[l]);u<a&&(a=u,o=s[l])}return o})}toggleHelperPoints(t,r,i,s){On.measure("Rectangle.toggleHelperPoints",()=>{r&&t?this.generateHelperPoints(t,i,s):this.clearHelperPoints()})}containsPoint(t){return On.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s].lng,l=r[s].lat,u=r[o].lng,h=r[o].lat;l>t.lat!=h>t.lat&&t.lng<(u-a)*(t.lat-l)/(h-l)+a&&(i=!i)}return i})}}var qi=(n=>(n.PRIVATE="private",n.COMPANY="company",n.EMPLOYEE="employee",n.VISITOR="visitor",n))(qi||{});const xf=$p("notes",()=>{const n=yt([]),e=yt([]),t=rr(()=>Y=>n.value.find(V=>V.id===Y)),r=rr(()=>Y=>{const V=n.value.find(N=>N.id===Y);return V?V.color:"#6B7280"}),i=rr(()=>Y=>e.value.filter(V=>V.columnId===Y).sort((V,N)=>V.order-N.order)),s=rr(()=>n.value.find(Y=>Y.isDefault)||n.value[0]),o=rr(()=>[...n.value].sort((Y,V)=>Y.order-V.order)),a=rr(()=>e.value),l=rr(()=>Y=>a.value.filter(V=>V.columnId===Y).sort((V,N)=>V.order-N.order));async function u(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const Y=[{id:"1",title:"Idées",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:"À faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Terminées",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];n.value=Y,console.log("[NotesStore][loadColumns] Colonnes fixes initialisées:",n.value)}catch(Y){throw console.error("[NotesStore][loadColumns] Erreur:",Y),Y}}async function h(Y){console.log(`
[NotesStore][addColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function p(Y,V){console.log(`
[NotesStore][updateColumn] Mise à jour locale de la colonne:`,Y,V);try{const N=n.value.findIndex(q=>q.id===Y);N!==-1&&(n.value[N]={...n.value[N],...V},console.log("[NotesStore][updateColumn] État des colonnes après mise à jour:",n.value))}catch(N){throw console.error("[NotesStore][updateColumn] Erreur:",N),N}}async function v(Y){console.log(`
[NotesStore][removeColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function m(Y){console.log(`
[NotesStore][reorderColumns] FONCTION DÉSACTIVÉE - Le déplacement des colonnes n'est plus possible`)}function S(Y){if(!Y)return"private";switch(Y.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accès inconnu: ${Y}, utilisation de PRIVATE par défaut`),"private"}}function E(Y){var Q,X,_e,me;if(!Y.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const V=new Date().toISOString(),N=e.value.filter(We=>We.columnId===Y.columnId),q=N.length>0?Math.max(...N.map(We=>We.order))+1:0,$=S(Y.access_level);console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",Y.id,"et niveau d'accès:",$);const F=Ao();let B=Y.enterprise_id;return B==null&&(F.isAdmin?B=null:F.isEntreprise&&F.user?B=F.user.id:F.isSalarie&&((Q=F.user)!=null&&Q.enterprise_id)?B=F.user.enterprise_id:F.isVisiteur&&((_e=(X=F.user)==null?void 0:X.salarie)!=null&&_e.enterprise_id)?B=F.user.salarie.enterprise_id:!F.isAdmin&&((me=F.user)!=null&&me.enterprise_id)&&(B=F.user.enterprise_id)),console.log("[NotesStore][addNote] Enterprise ID final:",B),e.value.push({...Y,id:Y.id,order:q,accessLevel:$,createdAt:Y.createdAt||Y.created_at||V,updatedAt:Y.updatedAt||Y.updated_at||V,comments:[],photos:[],enterprise_id:B}),Y.id}function k(Y,V){console.log(`
[NotesStore][updateNote] Mise à jour de la note:`,Y,V);try{const N=e.value.findIndex(q=>q.id===Y);N!==-1&&(V.color&&(V.style={...e.value[N].style,color:V.color,fillColor:V.color}),V.access_level&&(V.accessLevel=S(V.access_level),delete V.access_level),e.value[N]={...e.value[N],...V},console.log("[NotesStore][updateNote] Note mise à jour:",e.value[N]))}catch(N){throw console.error("[NotesStore][updateNote] Erreur:",N),N}}function T(Y){e.value.findIndex(N=>N.id===Y)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",Y),e.value=e.value.filter(N=>N.id!==Y)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",Y)}function A(Y,V){const N=e.value.findIndex(q=>q.id===Y);if(N!==-1){const q=e.value[N];if(q.columnId!==V){const F=e.value.filter(X=>X.columnId===V),B=F.length>0?Math.max(...F.map(X=>X.order))+1:0,Q={...q,columnId:V,order:B,updatedAt:new Date().toISOString()};e.value[N]=Q}else e.value[N]={...e.value[N],updatedAt:new Date().toISOString()}}}function R(Y,V){V.forEach((N,q)=>{const $=e.value.findIndex(F=>F.id===N&&F.columnId===Y);$!==-1&&(e.value[$]={...e.value[$],order:q,updatedAt:new Date().toISOString()})})}function G(Y){switch(Y){case"private":return"Privé";case"company":return"Entreprise";case"employee":return"Salariés";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function ee(Y,V){try{const N=Ao();if(!N.user)throw new Error("Vous devez être connecté pour ajouter un commentaire");if(!N.isEntreprise&&!N.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(_e=>_e.id===Y))throw new Error(`La note avec l'ID ${Y} n'existe pas`);const F=(await Sa.addComment(Y,V)).data,B=e.value.findIndex(_e=>_e.id===Y);if(B===-1)return;const Q=e.value[B];Q.comments||(Q.comments=[]);const X={id:F.id,text:F.text,createdAt:F.created_at,userId:F.user,userName:F.user_name,userRole:F.user_role};return Q.comments.push(X),Q.updatedAt=new Date().toISOString(),e.value[B]={...Q},X.id}catch(N){throw console.error("Erreur lors de l'ajout du commentaire:",N),N}}async function pe(Y,V){try{const N=e.value.findIndex(F=>F.id===Y);if(N===-1)throw new Error(`La note avec l'ID ${Y} n'existe pas`);const q=e.value[N];if(!q.comments||q.comments.length===0)throw new Error("Aucun commentaire trouvé pour cette note");if(!q.comments.some(F=>F.id===V))throw new Error(`Le commentaire avec l'ID ${V} n'existe pas`);await Sa.deleteComment(Y,V),q.comments=q.comments.filter(F=>F.id!==V),q.updatedAt=new Date().toISOString(),e.value[N]={...q}}catch(N){throw console.error("Erreur lors de la suppression du commentaire:",N),N}}async function ge(Y,V){try{if(V.id&&V.image){const N=e.value.findIndex(F=>F.id===Y);if(N===-1)return;const q=e.value[N];q.photos||(q.photos=[]);const $={id:V.id,url:V.image,caption:V.caption,createdAt:V.created_at};return q.photos.push($),q.updatedAt=new Date().toISOString(),e.value[N]={...q},$.id}else{const N=new FormData;N.append("image",V.url),V.caption&&N.append("caption",V.caption);const $=(await Sa.addPhoto(Y,N)).data,F=e.value.findIndex(X=>X.id===Y);if(F===-1)return;const B=e.value[F];B.photos||(B.photos=[]);const Q={id:$.id,url:$.image,caption:$.caption,createdAt:$.created_at};return B.photos.push(Q),B.updatedAt=new Date().toISOString(),e.value[F]={...B},Q.id}}catch(N){throw console.error("Erreur lors de l'ajout de la photo:",N),N}}async function O(Y,V){try{await Sa.deletePhoto(Y,V);const N=e.value.findIndex(F=>F.id===Y);if(N===-1){console.error("[NotesStore] Note non trouvée pour la suppression de la photo");return}e.value[N].photos||(e.value[N].photos=[]);const q=e.value[N],$=(q.photos||[]).filter(F=>F.id!==V);e.value[N]={...q,photos:$,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprimée avec succès, photos restantes:",$.length)}catch(N){throw console.error("Erreur lors de la suppression de la photo:",N),N}}async function j(Y,V,N){try{await Sa.updatePhoto(Y,V,{caption:N});const q=e.value.findIndex(B=>B.id===Y);if(q===-1||!e.value[q].photos)return;const $=e.value[q],F=$.photos.findIndex(B=>B.id===V);if(F===-1)return;$.photos[F].caption=N,$.updatedAt=new Date().toISOString(),e.value[q]={...$}}catch(q){throw console.error("Erreur lors de la mise à jour de la légende:",q),q}}return{columns:n,notes:e,getColumnById:t,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,getAccessibleNotes:a,getAccessibleNotesByColumn:l,getAccessLevelLabel:G,loadColumns:u,addColumn:h,updateColumn:p,removeColumn:v,reorderColumns:m,addNote:E,updateNote:k,removeNote:T,moveNote:A,reorderNotes:R,addComment:ee,removeComment:pe,addPhoto:ge,removePhoto:O,updatePhoto:j}});class Ml extends vt.Marker{constructor(t,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=vt.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          position: relative;
          transition: filter 0.2s ease-in-out;
        }
        .geo-note-marker.hover {
          filter: brightness(1.2) drop-shadow(0 0 4px rgba(59, 130, 246, 0.7));
        }
      `,document.head.appendChild(l)}super(t,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});tt(this,"properties");tt(this,"_planSaved",!1);tt(this,"_isMoving",!1);tt(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||qi.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:r.enterprise_id||null},console.log("[GeoNote][constructor] Note créée avec columnId:",this.properties.columnId),this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const u=l.target._map;this._protectFromZoomAnimationErrors(u),u.on("zoomend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),u.on("moveend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),setTimeout(()=>this.forceVisible(),100)}}),window.addEventListener("geonote:updateStyle",l=>{const u=l.detail.noteId,h=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] Événement reçu pour noteId:",u,"Comparaison avec ID backend:",h),u===h&&(console.log("[GeoNote][updateStyle] Correspondance trouvée, mise à jour du style:",l.detail.style),this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}))}),window.addEventListener("geonote:update",l=>{const u=l.detail.noteId,h=this._dbId||this.properties.id;console.log("[GeoNote][update] Événement reçu pour noteId:",u,"Comparaison avec ID backend:",h),u===h&&(console.log("[GeoNote][update] Correspondance trouvée, mise à jour des propriétés:",l.detail.properties),this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style),console.log("[GeoNote][update] Propriétés mises à jour:",this.properties))}),console.log("[GeoNote][constructor] Note créée:",{location:t,name:this.properties.name,type:this.properties.type,style:this.properties.style}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}forceVisible(){try{const t=this.getElement();if(!t){console.warn("[GeoNote][forceVisible] Élément DOM introuvable, recréation de l'icône"),this.recreateIcon();return}console.log("[GeoNote][forceVisible] Forçage de la visibilité de la note"),t.style.display="block",t.style.visibility="visible",t.style.opacity="1";const r=t.querySelector(".geo-note-marker");r&&(r.style.display="flex",r.style.visibility="visible",r.style.opacity="1");const i=t.querySelector("svg");i&&(i.style.display="block",i.style.visibility="visible",i.style.opacity="1"),t.offsetHeight,console.log("[GeoNote][forceVisible] Note maintenant visible")}catch(t){console.error("[GeoNote][forceVisible] Erreur:",t),this.recreateIcon()}}recreateIcon(){var t,r;try{console.log("[GeoNote][recreateIcon] Recréation de l'icône");const i=this.getLatLng(),o=`
        <div class="geo-note-marker" style="display: flex; visibility: visible; opacity: 1;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="display: block; visibility: visible; opacity: 1;">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${((t=this.properties.style)==null?void 0:t.fillColor)||((r=this.properties.style)==null?void 0:r.color)||"#2b6451"}" />
          </svg>
        </div>
      `,a=vt.divIcon({html:o,className:"geo-note-icon forced-visible",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});if(this.setIcon(a),this._map){const l=this._map.latLngToLayerPoint(i),u=this.getElement();u&&vt.DomUtil.setPosition(u,l)}if(!document.getElementById("geo-note-forced-style")){const l=document.createElement("style");l.id="geo-note-forced-style",l.textContent=`
          .forced-visible {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            pointer-events: auto !important;
          }
          .forced-visible * {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
          .geo-note-marker {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
        `,document.head.appendChild(l)}console.log("[GeoNote][recreateIcon] Icône recréée avec succès")}catch(i){console.error("[GeoNote][recreateIcon] Erreur lors de la recréation de l'icône:",i)}}highlight(){const t=this.getElement();if(t){console.log("[GeoNote][highlight] Avant application de l'effet:",{element:t,display:t.style.display,visibility:t.style.visibility,opacity:t.style.opacity}),this.forceVisible(),t.style.visibility="visible",t.style.display="",t.style.opacity="1",t.style.zIndex="1000";const r=t.querySelector(".geo-note-marker");r&&r.classList.add("hover"),console.log("[GeoNote][highlight] Après application de l'effet:",{element:t,display:t.style.display,visibility:t.style.visibility,opacity:t.style.opacity})}}unhighlight(){const t=this.getElement();if(t){console.log("[GeoNote][unhighlight] Avant retrait de l'effet:",{element:t,display:t.style.display,visibility:t.style.visibility,opacity:t.style.opacity}),this.forceVisible();const r=t.querySelector(".geo-note-marker");r&&r.classList.remove("hover"),t.style.zIndex="",t.style.visibility="visible",t.style.display="",t.style.opacity="1",console.log("[GeoNote][unhighlight] Après retrait de l'effet:",{element:t,display:t.style.display,visibility:t.style.visibility,opacity:t.style.opacity})}}getColumnColor(t){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[t]||"#6B7280"}getColumnLabel(t){return{1:"Idées",2:"À faire",3:"En cours",4:"Terminées",5:"Autres"}[t]||"Colonne "+t}getAccessLevelLabel(t){switch(t){case qi.PRIVATE:return"Privé";case qi.COMPANY:return"Entreprise";case qi.EMPLOYEE:return"Salariés";case qi.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(t){switch(t){case qi.PRIVATE:return"#9CA3AF";case qi.COMPANY:return"#EF4444";case qi.EMPLOYEE:return"#F59E0B";case qi.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(t){vt.DomEvent.stopPropagation(t),this.editNote()}editNote(){const t=this._dbId,r=this._leaflet_id;console.log(`[GeoNote][editNote] Édition de note - ID backend: ${t}, ID properties: ${this.properties.id}, ID Leaflet: ${r}`);const i={id:r,backendId:t,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] Édition de note avec columnId:",i.columnId),console.log("[GeoNote] Émission de l'événement note:edit avec",i);const s=new CustomEvent("geonote:edit",{detail:{note:i,source:this,backendId:t}});window.dispatchEvent(s),this.fire("note:edit",{note:i,source:this,backendId:t})}openInGoogleMaps(){const t=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${t},${r}`;window.open(i,"_blank")}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=qi.PRIVATE);const t=this.properties.style||{};let r=t.color||t.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a,console.log("[GeoNote][updateProperties] Couleur récupérée depuis SVG:",r))}}r||(r="#2b6451",console.log("[GeoNote][updateProperties] Utilisation de la couleur par défaut:",r)),console.log("[GeoNote][updateProperties] Couleur finale utilisée:",r);const i=t.radius||12;this.properties.style={...t,color:r,weight:t.weight||2,fillColor:r,fillOpacity:t.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},console.log("[GeoNote][updateProperties] Style mis à jour:",this.properties.style)}setNoteStyle(t){console.log("[GeoNote][setNoteStyle] Mise à jour du style:",t);const r=t.color||t.fillColor||"#2b6451",i=t.fillColor||t.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?(l.setAttribute("fill",i),console.log("[GeoNote][setNoteStyle] Couleur mise à jour directement sur le SVG existant")):(console.warn("[GeoNote][setNoteStyle] Impossible de trouver le path SVG dans l'élément"),this._updateIconWithNewColor(i))}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise à jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=t._accessLevel||t.accessLevel||this.properties.accessLevel,a=t.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:t.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:t.fillOpacity!==void 0?t.fillOpacity:this.properties.style.fillOpacity||.8,radius:t.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o,console.log("[GeoNote][setNoteStyle] Niveau d'accès mis à jour:",o)),a&&this.properties.category!==a&&(this.properties.category=a,console.log("[GeoNote][setNoteStyle] Catégorie mise à jour:",a)),this.refreshIconStyle(),console.log("[GeoNote][setNoteStyle] Mise à jour du popup")}refreshIconStyle(){const t=this.getElement();if(t&&(t.style.display="none",t.offsetHeight,t.style.display="",vt.DomUtil.setTransform(t,new vt.Point(0,0),1),this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());vt.DomUtil.setPosition(t,r),t.style.opacity="1",t.style.transition="opacity 0.2s"}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise à jour de la position:",r)}}_protectFromZoomAnimationErrors(t){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignorée: propriétés manquantes");return}typeof this.updatePositionDuringZoom=="function"?this.updatePositionDuringZoom(i):r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());vt.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la récupération:",o)}}},t.on("zoomanim",i=>{this.updatePositionDuringZoom(i)}),console.log("[GeoNote][_protectFromZoomAnimationErrors] Protection contre les erreurs d'animation de zoom activée")}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(t){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${t}" />
          </svg>
        </div>
      `,o=vt.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100),console.log("[GeoNote][_updateIconWithNewColor] Icône mise à jour avec la nouvelle couleur")}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise à jour de l'icône:",r)}}toBackendFormat(t){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:t,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(t){var l,u,h,p,v;console.log("[GeoNote][updateFromBackendData] Début de la mise à jour avec les données:",t),console.log("[GeoNote][updateFromBackendData] Couleur dans les données reçues:",{styleColor:(l=t.style)==null?void 0:l.color,styleFillColor:(u=t.style)==null?void 0:u.fillColor,styleObject:t.style}),this.properties.type="Note";const r=t.style?{...t.style,radius:t.style.radius||12}:this.properties.style;console.log("[GeoNote][updateFromBackendData] Style après traitement initial:",r);const i=((h=t.style)==null?void 0:h._accessLevel)||((p=t.style)==null?void 0:p.accessLevel)||t.accessLevel||this.properties.accessLevel||qi.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accès récupéré:",i);const s=((v=t.style)==null?void 0:v.category)||t.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catégorie récupérée:",s);const o=t.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise à jour de note avec columnId:",o);const a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:t.name||this.properties.name,description:t.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:t.comments||this.properties.comments||[],photos:t.photos||this.properties.photos||[],order:t.order||this.properties.order||0,createdAt:t.createdAt||this.properties.createdAt,updatedAt:t.updatedAt||new Date().toISOString()},this.setNoteStyle(a),console.log("[GeoNote][updateFromBackendData] Note mise à jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(t){var l,u,h,p,v,m,S,E;let r;if(typeof t.location=="object"&&!Array.isArray(t.location)&&t.location.type==="Point"){const k=t.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnées GeoJSON reçues:",k),r=[k[1],k[0]]}else if(Array.isArray(t.location)&&t.location.length===2)r=t.location;else throw new Error("Les données de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Création d'une note à partir des données:",t),console.log("[GeoNote][fromBackendData] Position utilisée:",r);const i=((l=t.style)==null?void 0:l._accessLevel)||((u=t.style)==null?void 0:u.accessLevel)||t.accessLevel||qi.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accès récupéré:",i,"Style:",t.style);const s=((h=t.style)==null?void 0:h.category)||t.category||"forages";console.log("[GeoNote][fromBackendData] Catégorie récupérée:",s),t.accessLevel=i,t.category=s;const o=t.columnId||"1";console.log("[GeoNote][fromBackendData] Création de note avec columnId:",o);const a=new Ml(r,{name:t.name,description:t.description,columnId:o,accessLevel:i,category:t.category||"forages",color:(p=t.style)==null?void 0:p.color,weight:(v=t.style)==null?void 0:v.weight,fillColor:(m=t.style)==null?void 0:m.fillColor,fillOpacity:(S=t.style)==null?void 0:S.fillOpacity,radius:(E=t.style)==null?void 0:E.radius});return a.properties.type="Note",a.properties.comments=t.comments||[],a.properties.photos=t.photos||[],a.properties.order=t.order||0,a.properties.createdAt=t.createdAt||new Date().toISOString(),a.properties.updatedAt=t.updatedAt||new Date().toISOString(),t.style&&a.setNoteStyle(t.style),console.log("[GeoNote][fromBackendData] Note créée:",{location:r,name:a.properties.name,type:a.properties.type,category:a.properties.category,accessLevel:a.properties.accessLevel,style:a.properties.style}),a}async saveNote(t){var r,i,s,o,a,l,u,h,p,v,m;if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties(),console.log("[GeoNote][saveNote] Couleur avant sauvegarde:",{styleColor:(r=this.properties.style)==null?void 0:r.color,styleFillColor:(i=this.properties.style)==null?void 0:i.fillColor,iconColor:((o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path"))==null?void 0:o.getAttribute("fill"))||"non disponible"});let S=((a=this.properties.style)==null?void 0:a.color)||"#2b6451";if(S.startsWith("rgb")){const A=(l=this.getElement())==null?void 0:l.querySelector(".geo-note-marker svg path");if(A){const R=A.getAttribute("fill");R&&(S=R,console.log("[GeoNote][saveNote] Couleur récupérée depuis SVG pour remplacer RGB:",S))}}const E={...this.properties.style,color:S,fillColor:S,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category};console.log("[GeoNote][saveNote] Style final pour l'envoi:",E);const k={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:E,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};if(this.properties.enterprise_id)k.enterprise_id=this.properties.enterprise_id;else{const A=Ao();!A.isAdmin&&((u=A.user)!=null&&u.enterprise_id)&&(k.enterprise_id=A.user.enterprise_id)}t&&(k.plan=t),console.log("[GeoNote][saveNote] Données à envoyer:",k),console.log("[GeoNote][saveNote] Couleur dans les données envoyées:",{styleColor:k.style.color,styleFillColor:k.style.fillColor});let T;return this._dbId?(T=(await Sa.updateNote(this._dbId,k)).data,console.log("[GeoNote][saveNote] Note mise à jour avec succès:",T),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (update):",{styleColor:(h=T.style)==null?void 0:h.color,styleFillColor:(p=T.style)==null?void 0:p.fillColor,styleObject:T.style})):(T=(await Sa.createNote(k)).data,console.log("[GeoNote][saveNote] Note créée avec succès:",T),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (create):",{styleColor:(v=T.style)==null?void 0:v.color,styleFillColor:(m=T.style)==null?void 0:m.fillColor,styleObject:T.style}),this._dbId=T.id,xf().addNote({...T,id:T.id,columnId:T.column,accessLevel:T.access_level})),this._planSaved=!0,T.id}catch(S){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",S),ou().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const t=localStorage.getItem("lastPlanId");t?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${t}`),this.saveNote(parseInt(t))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(t){this.setLatLng(t),this.fire("note:moved",{latlng:t,note:this}),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}updatePositionDuringZoom(t){try{if(!this._map||!t.center||t.zoom===void 0)return;const r=this.getElement();if(!r)return;r.style.opacity="0",r.style.transition="opacity 0.01s"}catch(r){console.warn("[GeoNote][updatePositionDuringZoom] Erreur lors de la gestion de l'animation de zoom:",r)}}updatePosition(){try{if(!this._map)return;const t=this.getElement();if(!t){console.warn("[GeoNote][updatePosition] Élément DOM introuvable, recréation de l'icône"),this.recreateIcon();return}const r=this._map.latLngToLayerPoint(this.getLatLng());vt.DomUtil.setPosition(t,r),t.style.opacity="1",t.style.transition="opacity 0.2s",t.style.visibility="visible",t.style.display="block",console.log("[GeoNote][updatePosition] Position mise à jour:",{latLng:this.getLatLng(),pixelPosition:r,element:t});const i=t.getBoundingClientRect();i.width===0||i.height===0?(console.warn("[GeoNote][updatePosition] L'élément a une taille nulle, recréation de l'icône"),this.recreateIcon()):setTimeout(()=>this.forceVisible(),50)}catch(t){console.warn("[GeoNote][updatePosition] Erreur lors de la mise à jour de la position:",t),this.recreateIcon()}}}function Oz(n){return n&&Array.isArray(n.points)&&n.points.length>0&&Array.isArray(n.points[0])&&n.points[0].length===2}function Nz(n){return n&&Array.isArray(n.points)&&n.points.length>0&&Array.isArray(n.points[0])&&n.points[0].length===2}function x5(n){var e,t,r,i,s,o,a,l,u,h,p,v,m,S,E,k,T,A,R,G,ee,pe;if(console.log("[DrawingStore] Conversion de la forme en élément",{type:(e=n.properties)==null?void 0:e.type,name:(r=(t=n.properties)==null?void 0:t.style)==null?void 0:r.name,properties:n.properties}),((i=n.properties)==null?void 0:i.type)==="Note"){const ge=n.getLatLng();return{type_forme:"Note",data:{points:[[ge.lng,ge.lat]],style:{color:((s=n.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=n.properties.style)==null?void 0:o.weight)||3,opacity:((a=n.properties.style)==null?void 0:a.opacity)||1,fillColor:((l=n.properties.style)==null?void 0:l.fillColor)||"#2b6451",fillOpacity:((u=n.properties.style)==null?void 0:u.fillOpacity)||.2,name:((h=n.properties.style)==null?void 0:h.name)||""}}}}if(n instanceof Ql||((p=n.properties)==null?void 0:p.type)==="Polygon")return{type_forme:"Polygon",data:{points:n.getLatLngs()[0].map(j=>[j.lng,j.lat]),style:{color:((v=n.properties.style)==null?void 0:v.color)||"#2b6451",weight:((m=n.properties.style)==null?void 0:m.weight)||3,opacity:((S=n.properties.style)==null?void 0:S.opacity)||1,fillColor:((E=n.properties.style)==null?void 0:E.fillColor)||"#2b6451",fillOpacity:((k=n.properties.style)==null?void 0:k.fillOpacity)||.2,name:((T=n.properties.style)==null?void 0:T.name)||""},category:n.properties.category||"forages",accessLevel:n.properties.accessLevel||"visitor"}};if(n instanceof js||((A=n.properties)==null?void 0:A.type)==="Line")return{type_forme:"Line",data:{points:n.getLatLngs().map(j=>[j.lng,j.lat]),category:n.properties.category||"forages",accessLevel:n.properties.accessLevel||"visitor",style:{color:((R=n.properties.style)==null?void 0:R.color)||"#2b6451",weight:((G=n.properties.style)==null?void 0:G.weight)||3,opacity:((ee=n.properties.style)==null?void 0:ee.opacity)||1,name:((pe=n.properties.style)==null?void 0:pe.name)||""}}};throw new Error("Type de forme non reconnu")}function Rz(n){var e,t,r,i,s,o,a,l,u,h,p,v,m,S,E,k,T,A,R,G,ee,pe,ge,O,j,Y,V,N,q,$,F,B,Q,X,_e;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:n}),n.type_forme){case"Polygon":{const me=n.data;if(!Oz(me))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const We=me.points.map(ye=>tr.latLng(ye[1],ye[0])),ae=((e=me.style)==null?void 0:e._accessLevel)||((t=me.style)==null?void 0:t.accessLevel)||me.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accès récupéré:",ae,"Style:",me.style),me.accessLevel=ae;const ve=new Ql([We],{color:((r=me.style)==null?void 0:r.color)||"#2b6451",weight:((i=me.style)==null?void 0:i.weight)||3,opacity:((s=me.style)==null?void 0:s.opacity)||1,fillColor:((o=me.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=me.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=me.style)==null?void 0:l.dashArray)||"",name:((u=me.style)==null?void 0:u.name)||"",category:me.category||"forages",accessLevel:ae});return ve.updateProperties(),ve}case"Line":{const me=n.data;if(!Nz(me))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const We=me.points.map(ye=>tr.latLng(ye[1],ye[0])),ae=((h=me.style)==null?void 0:h._accessLevel)||((p=me.style)==null?void 0:p.accessLevel)||me.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accès récupéré:",ae,"Style:",me.style),me.accessLevel=ae;const ve=new js(We,{...me.style||{},name:((v=me.style)==null?void 0:v.name)||"",category:me.category||"forages",accessLevel:ae});return ve.updateProperties(),ve}case"Rectangle":{const me=n.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:me,bounds:me.bounds,width:me.width,height:me.height,rotation:me.rotation}),!me.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour Rectangle"),null;const We=new tr.LatLngBounds(tr.latLng(me.bounds.southWest[1],me.bounds.southWest[0]),tr.latLng(me.bounds.northEast[1],me.bounds.northEast[0])),ae=new $a(We,{color:((m=me.style)==null?void 0:m.color)||"#2b6451",weight:((S=me.style)==null?void 0:S.weight)||3,opacity:((E=me.style)==null?void 0:E.opacity)||1,fillColor:((k=me.style)==null?void 0:k.fillColor)||"#2b6451",fillOpacity:((T=me.style)==null?void 0:T.fillOpacity)||.2,dashArray:((A=me.style)==null?void 0:A.dashArray)||"",name:((R=me.style)==null?void 0:R.name)||"",width:me.width,height:me.height});return me.rotation&&ae.setRotation(me.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restauré:",{bounds:ae.getBounds(),dimensions:ae.getDimensions(),properties:ae.properties}),ae}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle à partir de l'API",{id:n.id,data:n.data,hasName:((ee=(G=n.data)==null?void 0:G.style)==null?void 0:ee.name)!==void 0,name:(ge=(pe=n.data)==null?void 0:pe.style)==null?void 0:ge.name});const me=n.data;if(!me.center||!me.radius)return console.error("[DrawingStore] Données invalides pour Circle"),null;const We=tr.circle([me.center[1],me.center[0]],{color:((O=me.style)==null?void 0:O.color)||"#2b6451",weight:((j=me.style)==null?void 0:j.weight)||3,opacity:((Y=me.style)==null?void 0:Y.opacity)||1,fillColor:((V=me.style)==null?void 0:V.fillColor)||"#2b6451",fillOpacity:((N=me.style)==null?void 0:N.fillOpacity)||.2,dashArray:((q=me.style)==null?void 0:q.dashArray)||"",radius:me.radius});return We.properties={type:"Circle",radius:me.radius,diameter:me.radius*2,surface:Math.PI*me.radius*me.radius,perimeter:2*Math.PI*me.radius,style:{...me.style||{},name:(($=me.style)==null?void 0:$.name)||""}},console.log("[DrawingStore] Cercle créé:",{centerType:typeof me.center,center:me.center,radius:me.radius,style:We.properties.style,name:We.properties.style.name}),We}case"Note":{console.log("[DrawingStore] Traitement d'une Note à partir de l'API",{id:n.id,data:n.data});const me=n.data;if(!me.location)return console.error("[DrawingStore] Données invalides pour Note"),null;try{const We={location:me.location,name:me.name||"Note géolocalisée",description:me.description||"",columnId:me.columnId||"en-cours",accessLevel:me.accessLevel||"private",category:me.category||"forages",style:{color:((F=me.style)==null?void 0:F.color)||"#2b6451",weight:((B=me.style)==null?void 0:B.weight)||2,fillColor:((Q=me.style)==null?void 0:Q.fillColor)||"#2b6451",fillOpacity:((X=me.style)==null?void 0:X.fillOpacity)||.8,radius:((_e=me.style)==null?void 0:_e.radius)||12},comments:me.comments||[],photos:me.photos||[],order:me.order||0,createdAt:me.createdAt||new Date().toISOString(),updatedAt:me.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Données préparées pour la note:",We);const ae=Ml.fromBackendData(We);return ae._dbId=n.id,console.log("[DrawingStore] Note créée:",{id:n.id,location:We.location,name:We.name,type:ae.properties.type}),ae}catch(We){return console.error("[DrawingStore] Erreur lors de la création de la Note:",We),null}}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",n.type_forme),null}}const Ip=$p("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:Hp()}),getters:{hasUnsavedChanges:n=>n.unsavedChanges,getCurrentElements:n=>n.elements,getSelectedElement:n=>n.selectedElement,getCurrentTool:n=>n.currentTool,getCurrentStyle:n=>n.currentStyle,getLastUsedType:n=>n.lastUsedType,getFilters:n=>n.filters,getFilteredElements:n=>{if(n.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun élément dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Début du filtrage avec",{totalElements:n.elements.length,filters:JSON.stringify({accessLevels:n.filters.accessLevels,categories:n.filters.categories,shapeTypes:n.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] Éléments dans le store:",n.elements.map(t=>({id:t.id,type_forme:t.type_forme,data:t.data?JSON.stringify(t.data):null})));const e=n.elements.filter(t=>{var l,u;if(console.log(`[DrawingStore][getFilteredElements] Vérification de l'élément ${t.id} (${t.type_forme})`),!(t.type_forme in n.filters.shapeTypes?n.filters.shapeTypes[t.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} filtré par type: ${t.type_forme} (non visible)`),!1;const i=((l=t.data)==null?void 0:l.category)||"default";if(!(i in n.filters.categories?n.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} filtré par catégorie: ${i} (non visible)`),!1;const o=((u=t.data)==null?void 0:u.accessLevel)||"visitor";let a=!0;return o==="company"?a=n.filters.accessLevels.company:o==="employee"?a=n.filters.accessLevels.employee:o==="visitor"&&(a=n.filters.accessLevels.visitor),a?(console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} visible: type=${t.type_forme}, catégorie=${i}, accès=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} filtré par niveau d'accès: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Résultat du filtrage:",{total:n.elements.length,filtered:e.length,filteredIds:e.map(t=>t.id)}),e}},actions:{setCurrentPlan(n){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=n,n===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(n){var t;const e=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un élément",{element:n,isLeafletLayer:n instanceof tr.Layer,hasProperties:!!n.properties,properties:n.properties,type:(t=n.properties)==null?void 0:t.type}),n instanceof tr.Layer&&n.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>x5(n),"DrawingStore");console.log("[DrawingStore] Élément converti avant ajout",{original:n,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!n.type_forme&&this.lastUsedType&&(n.type_forme=this.lastUsedType),this.elements.push(n);this.unsavedChanges=!0}finally{e()}},updateElement(n){const e=this.elements.findIndex(t=>t.id===n.id);if(e!==-1){const t=this.elements[e].type_forme;this.elements[e]={...n,type_forme:t},this.unsavedChanges=!0}},removeElement(n){const e=this.elements.findIndex(t=>t.id===n);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(n){this.selectedElement=n},setCurrentTool(n){this.currentTool=n,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(n)&&(this.lastUsedType=n)},setCurrentStyle(n){if(!n||Object.keys(n).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...n}},updateFilters(n){if(n.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...n.accessLevels}),n.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...n.categories};const t=Object.keys(n.categories).filter(r=>e[r]!==this.filters.categories[r]);if(t.length>0){const r=t.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(n.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...n.shapeTypes};const t=Object.keys(n.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(t.length>0){const r=t.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(n){var t;const e=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===n&&this.elements.length>0)return console.log(`[ISSUE01][DrawingStore] Plan ${n} déjà chargé avec ${this.elements.length} éléments, ne pas recharger`),e(),this.elements;this.loading=!0;try{console.log("[ISSUE01][DrawingStore] Début du chargement du plan",{planId:n,currentMapId:this.currentMapId,currentElements:this.elements.length});const i=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>Bn.get(`/plans/${n}/`),"DrawingStore")).data;return console.log("[ISSUE01][DrawingStore] Données du plan reçues",{formesCount:((t=i.formes)==null?void 0:t.length)||0,preferences:i.preferences}),i.formes&&Array.isArray(i.formes)&&i.formes.forEach((s,o)=>{var a;console.log(`[ISSUE01][DrawingStore] Analyse détaillée forme ${o}:`,{id:s.id,type_forme:s.type_forme,hasData:!!s.data,dataKeys:s.data?Object.keys(s.data):[],name:(a=s.data)==null?void 0:a.name})}),this.elements=i.formes.map(s=>{if(console.log("[ISSUE01][DrawingStore] Traitement de la forme stockée",{id:s.id,type_forme:s.type_forme}),s.type_forme)return console.log("[ISSUE01][DrawingStore] Forme déjà au format élément",{type_forme:s.type_forme,id:s.id}),{id:s.id,type_forme:s.type_forme,data:s.data||{}};try{const o=Rz(s);if(o)return console.log("[ISSUE01][DrawingStore] Forme convertie avec succès",{originalType:s.type_forme,convertedType:o.type,id:s.id}),x5(o)}catch(o){console.error("[ISSUE01][DrawingStore] Erreur lors de la conversion de la forme",{error:o,id:s.id,type:s.type_forme})}return console.warn("[ISSUE01][DrawingStore] Utilisation de la forme sans conversion",{type_forme:s.type_forme,id:s.id}),s}),console.log(`[ISSUE01][DrawingStore] Plan ${n} - Chargé ${this.elements.length} éléments`,{elementsIds:this.elements.map(s=>s.id)}),this.currentMapId=n,this.unsavedChanges=!1,i.preferences&&(console.log("[ISSUE01][DrawingStore] Chargement des préférences",i.preferences),i.preferences.currentTool&&this.setCurrentTool(i.preferences.currentTool),i.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...i.preferences.currentStyle}),i.preferences.lastUsedType&&(this.lastUsedType=i.preferences.lastUsedType)),this.elements}catch(r){throw console.error("[ISSUE01][DrawingStore] Erreur lors du chargement des éléments:",r),this.error="Erreur lors du chargement des éléments du plan",r}finally{this.loading=!1,e()}},async saveToPlan(n,e){var r,i,s,o,a;const t=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const l=n||this.currentMapId;if(console.log("[ISSUE01][DrawingStore][saveToPlan] Début de la sauvegarde",{targetPlanId:l,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsIds:this.elements.map(m=>m.id),elementsToDelete:e==null?void 0:e.elementsToDelete}),!l)throw new Error("Aucun plan sélectionné pour la sauvegarde");const u=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(m=>({...m,type_forme:m.type_forme||this.lastUsedType})),"DrawingStore");console.log("[ISSUE01][DrawingStore][saveToPlan] Formes préparées pour sauvegarde:",{formesCount:u.length,formesIds:u.map(m=>m.id)});const h=(e==null?void 0:e.elementsToDelete)||[],p=`/plans/${l}/save_with_elements/`,v=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>Bn.post(p,{formes:u,connexions:[],annotations:[],elementsToDelete:h,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return console.log("[ISSUE01][DrawingStore][saveToPlan] Réponse reçue du serveur:",{formesCount:((r=v.data.formes)==null?void 0:r.length)||0,formesIds:((i=v.data.formes)==null?void 0:i.map(m=>m.id))||[]}),console.log("[ISSUE01][DrawingStore][saveToPlan] Détail de la réponse du serveur:",{requestFormeCount:u.length,responseFormeCount:((s=v.data.formes)==null?void 0:s.length)||0,formesDuplicates:(o=v.data.formes)==null?void 0:o.map(m=>m.id).filter((m,S,E)=>E.indexOf(m)!==S),detailedResponseFormes:(a=v.data.formes)==null?void 0:a.map(m=>({id:m.id,type:m.type_forme,pointCount:m.data&&m.data.points?m.data.points.length:"N/A"})),requestBody:{formesCount:u.length,formesTypes:u.map(m=>m.type_forme),formesIds:u.map(m=>m.id),elementsToDelete:h}}),this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const m=new Set(h);return v.data.formes.filter(S=>!m.has(S.id)).map(S=>({...S,type_forme:S.type_forme}))},"DrawingStore"),console.log("[ISSUE01][DrawingStore][saveToPlan] Éléments après filtrage:",{totalElements:this.elements.length,elementsIds:this.elements.map(m=>m.id),elementsToDelete:h}),this.unsavedChanges=!1,v.data}catch(l){throw console.error("[ISSUE01][DrawingStore][saveToPlan] ERREUR:",l),console.error("[ISSUE01][DrawingStore][saveToPlan] Stack trace:",l instanceof Error?l.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",l}finally{this.loading=!1,t()}}}}),GE=$p("mapFilters",{state:()=>({filters:[],loading:!1,error:null,performanceMonitor:Hp()}),getters:{getFilterById:n=>e=>n.filters.find(t=>t.id===e),getFiltersByCategory:n=>e=>n.filters.filter(t=>t.category===e),getUniqueCategories:n=>{const e=new Set;return n.filters.forEach(t=>e.add(t.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const n=this.performanceMonitor.startMeasure("fetchFilters","MapFilterStore"),e=ou();this.loading=!0,this.error=null;try{const t=await this.performanceMonitor.measureAsync("fetchFilters_apiCall",()=>x0.getFilters(),"MapFilterStore");return this.filters=t.data,this.filters}catch(t){throw this.error="Erreur lors du chargement des filtres",e.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",t),t}finally{this.loading=!1,n()}},async createFilter(n){const e=this.performanceMonitor.startMeasure("createFilter","MapFilterStore");this.loading=!0,this.error=null;try{const t=await this.performanceMonitor.measureAsync("createFilter_apiCall",()=>x0.createFilter(n),"MapFilterStore");return this.filters.push(t.data),console.log("[MapFilterStore] Filtre créé avec succès:",t.data),t.data}catch(t){throw this.error="Erreur lors de la création du filtre",console.error("[MapFilterStore] Erreur lors de la création du filtre:",t),t}finally{this.loading=!1,e()}},async updateFilter(n,e){const t=this.performanceMonitor.startMeasure("updateFilter","MapFilterStore");this.loading=!0,this.error=null;try{const r=await this.performanceMonitor.measureAsync("updateFilter_apiCall",()=>x0.updateFilter(n,e),"MapFilterStore"),i=this.filters.findIndex(s=>s.id===n);return i!==-1&&(this.filters[i]=r.data),console.log("[MapFilterStore] Filtre mis à jour avec succès:",r.data),r.data}catch(r){throw this.error="Erreur lors de la mise à jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise à jour du filtre:",r),r}finally{this.loading=!1,t()}},async deleteFilter(n){const e=this.performanceMonitor.startMeasure("deleteFilter","MapFilterStore");this.loading=!0,this.error=null;try{return await this.performanceMonitor.measureAsync("deleteFilter_apiCall",()=>x0.deleteFilter(n),"MapFilterStore"),this.filters=this.filters.filter(t=>t.id!==n),console.log("[MapFilterStore] Filtre supprimé avec succès:",n),!0}catch(t){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",t),t}finally{this.loading=!1,e()}}}}),Gy=$p("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:Hp()}),getters:{getPlanById:n=>e=>n.plans.find(t=>t.id===e),hasUnsavedChanges:n=>n.unsavedChanges,getCurrentPlanHistory:n=>n.planHistory},actions:{async fetchPlans(){var t,r;const n=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),e=Ao();this.loading=!0;try{let i="/plans/";const s={};e.isSalarie?s.salarie=(t=e.user)==null?void 0:t.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>Bn.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,n()}},async fetchPlansWithDetails(){var t,r;const n=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),e=Ao();this.loading=!0;try{let i="/plans/";const s={include_details:!0};e.isSalarie?s.salarie=(t=e.user)==null?void 0:t.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>Bn.get(i,{params:s}),"IrrigationStore"),a=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(l=>({...l,entreprise:typeof l.entreprise=="object"?l.entreprise:null,salarie:typeof l.salarie=="object"?l.salarie:null,visiteur:typeof l.visiteur=="object"?l.visiteur:null})),"IrrigationStore");return this.plans=a,{data:a}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,n()}},async fetchClientPlans(n){this.loading=!0;try{return(await w0.getVisiteurPlans(n)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(n){var r;const e=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const t=ou();try{const i=Ao();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(n={...n,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...n,entreprise:n.entreprise?typeof n.entreprise=="object"&&n.entreprise&&"id"in n.entreprise?n.entreprise.id:Number(n.entreprise):null,salarie:n.salarie?typeof n.salarie=="object"&&n.salarie&&"id"in n.salarie?n.salarie.id:Number(n.salarie):null,visiteur:n.visiteur?typeof n.visiteur=="object"&&n.visiteur&&"id"in n.visiteur?n.visiteur.id:Number(n.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>w0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),t.success(`Le plan "${o.data.nom}" a été créé avec succès`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,t.error(`Erreur lors de la création du plan : ${s}`),i}finally{this.loading=!1,e()}},async createPlanForClient(n,e){this.clearCurrentPlan(),this.loading=!0;try{const t={...n,visiteur:e},r=await w0.createPlanForVisiteur(t);return this.plans.push(r.data),r.data}catch(t){const r=t instanceof Error?t.message:String(t);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(n){const e=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement à sauvegarder"),e();return}this.loading=!0;try{const t=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return Bn.patch(`/plans/${n}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===n);r!==-1&&(this.plans[r]=t.data),((i=this.currentPlan)==null?void 0:i.id)===n&&(this.currentPlan=t.data)},"IrrigationStore"),this.unsavedChanges=!1,t.data}catch(t){throw console.error("[IrrigationStore][savePlan] ERREUR:",t),this.error="Erreur lors de la sauvegarde du plan",t}finally{this.loading=!1,e()}},async updatePlanDetails(n,e){const t=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=ou();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:a,...l}=e,u={...l};return s!==void 0&&(u.visiteur_id=s),o!==void 0&&(u.salarie_id=o),a!==void 0&&(u.entreprise_id=a),Bn.patch(`/plans/${n}/`,u)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===n&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===n);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise à jour du plan:",i),r.error(`Erreur lors de la mise à jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{t()}},async fetchPlanHistory(n){this.loading=!0;try{const e=await Bn.get(`/plans/${n}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(n,e){var t;this.loading=!0;try{const r=await Bn.post(`/plans/${n}/restaurer/`,{version_id:e});((t=this.currentPlan)==null?void 0:t.id)===n&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===n);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(n){this.currentPlan=n,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(n){var t;this.loading=!0;const e=ou();try{const r=this.plans.find(i=>i.id===n);await w0.deletePlan(n),this.plans=this.plans.filter(i=>i.id!==n),((t=this.currentPlan)==null?void 0:t.id)===n&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Bz={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},Fz={class:"flex-1 flex flex-col overflow-hidden"},jz={class:"border-b border-gray-200"},zz={class:"flex -mb-px"},$z={class:"flex-1 overflow-hidden flex flex-col"},Uz={key:0,class:"tab-content"},Vz={class:"grid grid-cols-3 gap-1.5 mb-4"},Hz=["onClick","title"],Gz=["innerHTML"],Wz={key:0,class:"grid grid-cols-2 gap-2 mt-2 mb-2"},qz={key:2,class:"my-4 border-t border-gray-200"},Yz={key:3,class:"mt-4"},Kz={key:0,class:"mb-4"},Zz={class:"mb-4"},Xz=["value"],Jz={class:"mb-4"},Qz={class:"grid grid-cols-1 gap-4"},e$={key:0,class:"space-y-1"},t$={class:"flex justify-between items-center"},n$={class:"text-sm font-medium text-gray-500"},r$={class:"flex justify-between items-center"},i$={class:"text-sm font-medium text-gray-500"},s$={class:"text-sm font-medium text-gray-500"},o$={class:"flex flex-col space-y-2 w-full"},a$={class:"flex justify-between items-center"},l$={class:"text-sm font-medium text-gray-500 ml-2"},u$={class:"flex justify-between items-center"},c$={class:"text-sm font-medium text-gray-500 ml-2"},d$={class:"flex justify-between items-center"},h$={class:"text-sm font-medium text-gray-500 ml-2"},f$={class:"flex justify-between items-center"},p$={class:"text-sm font-medium text-gray-500 ml-2"},g$={class:"flex justify-between items-center"},m$={class:"text-sm font-medium text-gray-500 ml-2"},v$={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},y$={ref:"elevationCanvas"},_$={key:1,class:"tab-content"},b$={class:"grid grid-cols-6 gap-2 mb-4"},w$=["onClick","title"],x$={key:0,class:"space-y-4"},L$={class:"flex items-center gap-4"},S$={class:"flex items-center gap-2"},C$={class:"flex items-center gap-4"},E$=["value"],P$={key:0,class:"flex items-center gap-4"},M$={class:"flex items-center gap-2"},k$={key:1,class:"space-y-4"},A$={class:"flex items-center gap-4"},T$={class:"flex items-center gap-2"},D$={class:"flex items-center gap-4"},I$={class:"flex items-center gap-2"},O$={key:2,class:"tab-content filters-tab"},N$={class:"filters-content"},R$={class:"space-y-2"},B$={class:"space-y-2 mt-4"},F$={class:"space-y-1"},j$={class:"flex items-center"},z$={class:"flex items-center"},$$={class:"flex items-center"},U$={class:"flex items-center"},V$={class:"flex items-center"},H$={class:"flex items-center"},G$={key:0,class:"flex items-center"},W$=["onUpdate:modelValue"],q$={class:"ml-2 text-sm text-gray-700"},Y$={key:0,class:"mt-2 pt-2 border-t border-gray-200"},K$={class:"flex space-x-2"},Z$=["disabled"],X$={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J$={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Q$={class:"space-y-2 mt-4"},eU={class:"space-y-1"},tU={class:"flex items-center"},nU={class:"flex items-center"},rU={class:"flex items-center"},iU={class:"flex items-center"},sU={key:0,class:"p-3 border-t border-gray-200"},oU={class:"mt-3"},aU={class:"mb-4"},lU={class:"grid grid-cols-2 gap-2"},uU={class:"grid grid-cols-2 gap-2"},cU=Rs({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(n,{emit:e}){const t=n,r=Ip(),i=Ao(),s=rr(()=>i.isAdmin),o=rr(()=>i.isEntreprise),a=GE(),l=Gy(),u=au({name:""}),h=yt(!1),p=yt(["forages","clients","entrepots","livraisons","cultures","parcelles"]),v=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Note",label:"Note géolocalisée"}],m=Se=>{switch(Se){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c1.38 0 2.5-1.12 2.5-2.5S13.38 6 12 6s-2.5 1.12-2.5 2.5S10.62 11 12 11z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><ellipse cx="12" cy="22" rx="4" ry="1.5" stroke-width="2.5" fill="currentColor" fill-opacity="0.2"/></svg>';default:return""}},S=yt("tools");_i(()=>t.selectedTool,(Se,ce)=>{console.log("[DrawingTools][watch selectedTool] Changement d'outil:",{newTool:Se,oldTool:ce})}),_i(S,(Se,ce)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:Se,oldTab:ce}),Se==="filters"&&ce!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage à l'onglet filtres"),console.log("[DrawingTools][watch activeTab] État actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] État actuel des filtres locaux:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),t.selectedShape&&(console.log("[DrawingTools][watch activeTab] Désélection de la forme actuelle lors du passage à l'onglet filtres"),U("tool-selected","")),setTimeout(()=>{ie()},0)),ce==="filters"&&Se!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] État des filtres locaux avant application:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),ie())});const E=yt({samplePoints:!0,circleSections:!0}),k=yt("#2b6451"),T=yt(2),A=yt("solid"),R=yt("#2b6451"),G=yt(.2),ee=yt(!0),pe=yt(""),ge=yt("default"),O=yt("visitor"),j=yt({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),Y=yt({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),V=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],N=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],q=yt("company"),$=au({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),F=Se=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accès: ${Se}`),q.value=Se,Se==="company"?($.accessLevels.company=!0,$.accessLevels.employee=!1,$.accessLevels.visitor=!1):Se==="employee"?($.accessLevels.company=!1,$.accessLevels.employee=!0,$.accessLevels.visitor=!1):Se==="visitor"&&($.accessLevels.company=!1,$.accessLevels.employee=!1,$.accessLevels.visitor=!0),ie()},B=Se=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accès: ${Se}`),t.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Désélection de la forme actuelle"),U("tool-selected","")),F(Se)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const Q=rr(()=>t.selectedShape&&t.selectedShape.properties||null),X=Se=>{E.value[Se]=!E.value[Se]},_e=Se=>{k.value=Se,R.value=Se,me({strokeColor:Se,fillColor:Se})},me=Se=>{t.selectedShape&&U("style-update",Se)},We=()=>{t.selectedShape&&U("properties-update",{name:pe.value})},ae=()=>{t.selectedShape&&U("properties-update",{category:ge.value})},ve=()=>{t.selectedShape&&U("properties-update",{accessLevel:O.value})},ye=()=>{var Se;!t.selectedShape||((Se=Q.value)==null?void 0:Se.type)!=="ElevationLine"||U("style-update",{samplePointStyle:j.value})},J=()=>{var Se;!t.selectedShape||((Se=Q.value)==null?void 0:Se.type)!=="ElevationLine"||U("style-update",{minMaxPointStyle:Y.value})},se=()=>{console.log("[DrawingTools][resetFilters] Début de la réinitialisation des filtres"),console.log("[DrawingTools][resetFilters] État actuel des filtres:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2));const Se={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres à appliquer:",JSON.stringify(Se,null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres locaux"),$.accessLevels.company=!0,$.accessLevels.employee=!0,$.accessLevels.visitor=!0,$.categories.forages=!0,$.categories.clients=!0,$.categories.entrepots=!0,$.categories.livraisons=!0,$.categories.cultures=!0,$.categories.parcelles=!0,$.shapeTypes.Polygon=!0,$.shapeTypes.Line=!0,$.shapeTypes.ElevationLine=!0,$.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux après mise à jour:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres dans le store"),r.updateFilters(Se),console.log("[DrawingTools][resetFilters] Émission de l'event filter-change"),U("filter-change",Se),console.log("[DrawingTools][resetFilters] Mise à jour forcée de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres réinitialisés avec succès")},fe=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Début de la réinitialisation des filtres avec désélection"),ue(),se(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres réinitialisés et forme désélectionnée avec succès")},ie=()=>{const Se={...$.accessLevels},ce={...$.categories},je={...$.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:Se,categories:ce,shapeTypes:je},null,2));const st={accessLevels:Se,categories:ce,shapeTypes:je};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(st,null,2)),r.updateFilters(st),console.log("[DrawingTools][applyFilters] Émission de l'event filter-change"),U("filter-change",st),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise à jour forcée de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:st}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqués avec succès")},te=Se=>`${Math.round(Se)} m`,Oe=Se=>Se>=1e4?`${(Se/1e4).toFixed(2)} ha`:`${Math.round(Se)} m²`,we=Se=>`${Se.toFixed(1)}%`,Be=Se=>p.value.includes(Se)?Se:Se.split("_").map(ce=>ce.charAt(0).toUpperCase()+ce.slice(1)).join(" "),ue=()=>{t.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Désélection de la forme actuelle"),U("tool-selected",""))};async function re(){var Se,ce;if(!(!u.name||h.value)){h.value=!0;try{const je=u.name.toLowerCase().replace(/\s+/g,"_"),st=l.currentPlan;let lt=null;if(st!=null&&st.entreprise_id?lt=st.entreprise_id:st!=null&&st.entreprise&&typeof st.entreprise=="object"&&"id"in st.entreprise?lt=st.entreprise.id:(Se=i.user)!=null&&Se.enterprise_id?lt=i.user.enterprise_id:i.isEntreprise&&((ce=i.user)!=null&&ce.id)&&(lt=i.user.id),!lt){console.error("[DrawingTools] Impossible de créer un filtre: ID d'entreprise non disponible");return}console.log("[DrawingTools] Création d'un filtre pour l'entreprise:",lt);const _t=await a.createFilter({name:u.name,category:je,entreprise:lt});console.log("[DrawingTools] Filtre créé avec succès:",_t),$.categories[je]||(console.log(`[DrawingTools] Ajout de la catégorie ${je} aux filtres locaux`),$.categories[je]=!0),console.log(`[DrawingTools] Mise à jour du DrawingStore avec la catégorie ${je}`);const Je={...r.filters.categories};Je[je]=!0,r.updateFilters({categories:Je}),console.log("[DrawingTools] Émission de l'événement filter-change"),U("filter-change",$),u.name=""}catch(je){console.error("[DrawingTools] Erreur lors de la création du filtre:",je)}finally{h.value=!1}}}const Z=()=>{ue(),S.value="filters"},U=e;pm(()=>{var Se,ce,je,st,lt,_t,Je;if(t.selectedShape){console.log("[DrawingTools][watchEffect] Mise à jour des propriétés pour la forme sélectionnée:",{type:t.selectedShape.type,properties:t.selectedShape.properties,options:t.selectedShape.options,layer:(Se=t.selectedShape.layer)==null?void 0:Se._leaflet_id});const zt=t.selectedShape.options||{};k.value=zt.color||"#2b6451",T.value=zt.weight||3,A.value=zt.dashArray?"dashed":"solid",R.value=zt.fillColor||"#2b6451",G.value=zt.fillOpacity||.2;const Xt=t.selectedShape.type||((ce=t.selectedShape.properties)==null?void 0:ce.type)||"";ee.value=Xt!=="Line",console.log("[DrawingTools][watchEffect] Type de forme détecté:",Xt),pe.value=((je=t.selectedShape.properties)==null?void 0:je.name)||"",ge.value=((st=t.selectedShape.properties)==null?void 0:st.category)||"forages",O.value=((lt=t.selectedShape.properties)==null?void 0:lt.accessLevel)||"visitor",Xt==="ElevationLine"&&((_t=t.selectedShape.properties)!=null&&_t.samplePointStyle&&(j.value={...t.selectedShape.properties.samplePointStyle}),(Je=t.selectedShape.properties)!=null&&Je.minMaxPointStyle&&(Y.value={...t.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Propriétés mises à jour avec succès")}}),Es(async()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const Se=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...Se.accessLevels},categories:{...Se.categories},shapeTypes:{...Se.shapeTypes}},null,2)),$.accessLevels.company=Se.accessLevels.company,$.accessLevels.employee=Se.accessLevels.employee,$.accessLevels.visitor=Se.accessLevels.visitor,$.categories.forages=Se.categories.forages,$.categories.clients=Se.categories.clients,$.categories.entrepots=Se.categories.entrepots,$.categories.livraisons=Se.categories.livraisons,$.categories.cultures=Se.categories.cultures,$.categories.parcelles=Se.categories.parcelles,$.shapeTypes.Polygon=Se.shapeTypes.Polygon,$.shapeTypes.Line=Se.shapeTypes.Line,$.shapeTypes.ElevationLine=Se.shapeTypes.ElevationLine,$.shapeTypes.Note=Se.shapeTypes.Note;try{console.log("[DrawingTools][onMounted] Chargement des filtres personnalisés"),await a.fetchFilters();const ce=a.getUniqueCategories;console.log("[DrawingTools][onMounted] Catégories personnalisées trouvées:",ce);const je=[];ce.forEach(st=>{!p.value.includes(st)&&!$.categories[st]&&(console.log(`[DrawingTools][onMounted] Ajout de la catégorie personnalisée: ${st}`),$.categories[st]=!0,je.push(st))}),je.length>0&&(console.log("[DrawingTools][onMounted] Mise à jour du store avec les catégories personnalisées:",je),r.updateFilters({categories:$.categories}),U("filter-change",$))}catch(ce){console.error("[DrawingTools][onMounted] Erreur lors du chargement des filtres personnalisés:",ce)}console.log("[DrawingTools][onMounted] Filtres locaux après initialisation:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2))}),_i($,(Se,ce)=>{console.log("[DrawingTools][watch filters] Changement détecté:",{activeTab:S.value,newFilters:JSON.stringify({accessLevels:Se.accessLevels,categories:Se.categories,shapeTypes:Se.shapeTypes}),oldFilters:JSON.stringify({accessLevels:ce.accessLevels,categories:ce.categories,shapeTypes:ce.shapeTypes})});const je=Object.keys(Se.accessLevels).filter(Je=>ce.accessLevels[Je]!==Se.accessLevels[Je]),st=Object.keys(Se.categories).filter(Je=>ce.categories[Je]!==Se.categories[Je]),lt=Object.keys(Se.shapeTypes).filter(Je=>ce.shapeTypes[Je]!==Se.shapeTypes[Je]),_t=je.length>0||st.length>0||lt.length>0;console.log("[DrawingTools][watch filters] Différences détectées:",{accessLevelsDiff:je,categoriesDiff:st,shapeTypesDiff:lt,hasChanges:_t}),S.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),ie()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const xe=Se=>{console.log("[DrawingTools][handleToolClick] Outil cliqué:",Se,"Outil actuel:",t.selectedTool),U("tool-selected",t.selectedTool===Se?"":Se),window.innerWidth<768&&U("update:show",!1)},Ne=()=>{var Se;if(console.log("[DrawingTools][editGeoNote] Édition de la GeoNote"),U("update:show",!1),t.selectedShape&&((Se=t.selectedShape.properties)==null?void 0:Se.type)==="Note"){const ce=t.selectedShape.layer;ce&&typeof ce.editNote=="function"?(ce.editNote(),console.log("[DrawingTools][editGeoNote] Méthode editNote appelée avec succès")):console.error("[DrawingTools][editGeoNote] La méthode editNote n'est pas disponible sur la couche")}},Ge=()=>{var Se;if(console.log("[DrawingTools][openGeoNoteRoute] Ouverture de l'itinéraire pour la GeoNote"),U("update:show",!1),t.selectedShape&&((Se=t.selectedShape.properties)==null?void 0:Se.type)==="Note"){const ce=t.selectedShape.layer;ce&&typeof ce.openInGoogleMaps=="function"?(ce.openInGoogleMaps(),console.log("[DrawingTools][openGeoNoteRoute] Méthode openInGoogleMaps appelée avec succès")):console.error("[DrawingTools][openGeoNoteRoute] La méthode openInGoogleMaps n'est pas disponible sur la couche")}};return(Se,ce)=>{var je,st,lt,_t;return De(),Fe("div",{class:Mi(["drawing-tools-panel",{open:n.show}])},[x("div",Bz,[ce[47]||(ce[47]=x("div",{class:"flex items-center"},[x("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),x("h3",{class:"text-sm font-semibold text-gray-700"},"Outils")],-1)),x("button",{onClick:ce[0]||(ce[0]=Je=>Se.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},ce[46]||(ce[46]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",Fz,[x("div",jz,[x("nav",zz,[x("button",{onClick:ce[1]||(ce[1]=Je=>S.value="tools"),class:Mi([S.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ce[48]||(ce[48]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),x("span",null,"Outils",-1)]),2),n.selectedShape&&((je=n.selectedShape.properties)==null?void 0:je.type)!=="Note"?(De(),Fe("button",{key:0,onClick:ce[2]||(ce[2]=Je=>S.value="style"),class:Mi([S.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ce[49]||(ce[49]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),x("span",null,"Style",-1)]),2)):tn("",!0),x("button",{onClick:Z,class:Mi([S.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ce[50]||(ce[50]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),x("span",null,"Filtres",-1)]),2)])]),x("div",$z,[S.value==="tools"?(De(),Fe("div",Uz,[x("div",Vz,[(De(!0),Fe(kn,null,sr(v.filter(Je=>Je.type!=="delete"),Je=>(De(),Fe("button",{key:Je.type,class:Mi(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":t.selectedTool===Je.type,"hover:bg-gray-50 border-gray-300 text-gray-700":t.selectedTool!==Je.type}]),onClick:zt=>xe(Je.type),title:Je.label},[x("span",{class:"icon",innerHTML:m(Je.type)},null,8,Gz)],10,Hz))),128))]),n.selectedShape&&Q.value&&Q.value.type==="Note"?(De(),Fe("div",Wz,[x("button",{class:"p-2 rounded-md border border-primary-200 bg-primary-50 text-primary-600 hover:bg-primary-100 flex items-center justify-center",onClick:Ne,title:"Éditer la note"},ce[51]||(ce[51]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),x("span",{class:"text-sm"},"Éditer",-1)])),x("button",{class:"p-2 rounded-md border border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 flex items-center justify-center",onClick:Ge,title:"Obtenir l'itinéraire"},ce[52]||(ce[52]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),x("span",{class:"text-sm"},"Itinéraire",-1)]))])):tn("",!0),n.selectedShape?(De(),Fe("button",{key:1,class:Mi(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":t.selectedTool==="delete"}]),onClick:ce[3]||(ce[3]=Je=>Se.$emit("delete-shape")),title:"Supprimer la forme"},ce[53]||(ce[53]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),x("span",{class:"text-sm"},"Supprimer",-1)]),2)):tn("",!0),n.selectedShape&&Q.value?(De(),Fe("div",qz)):tn("",!0),n.selectedShape&&Q.value?(De(),Fe("div",Yz,[Q.value.type!=="Note"?(De(),Fe("div",Kz,[ce[54]||(ce[54]=x("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),Tn(x("input",{type:"text",id:"shapeName","onUpdate:modelValue":ce[4]||(ce[4]=Je=>pe.value=Je),onChange:We,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[Ur,pe.value]])])):tn("",!0),x("div",Zz,[ce[57]||(ce[57]=x("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),Tn(x("select",{id:"shapeCategory","onUpdate:modelValue":ce[5]||(ce[5]=Je=>ge.value=Je),onChange:ae,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[ce[55]||(ce[55]=fl('<option value="forages" data-v-338b5d61>Forages</option><option value="clients" data-v-338b5d61>Clients</option><option value="entrepots" data-v-338b5d61>Entrepôts</option><option value="livraisons" data-v-338b5d61>Lieux de livraison</option><option value="cultures" data-v-338b5d61>Cultures</option><option value="parcelles" data-v-338b5d61>Noms des parcelles</option>',6)),(De(!0),Fe(kn,null,sr($.categories,(Je,zt)=>(De(),Fe(kn,{key:zt},[p.value.includes(String(zt))?tn("",!0):(De(),Fe("option",{key:0,value:String(zt)},Dt(Be(String(zt))),9,Xz))],64))),128)),ce[56]||(ce[56]=x("option",{value:"default"},"Autre",-1))],544),[[Yi,ge.value]])]),x("div",Jz,[ce[59]||(ce[59]=x("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accès",-1)),ce[60]||(ce[60]=x("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Définit qui peut voir cet élément sur la carte. ",-1)),Tn(x("select",{id:"accessLevel","onUpdate:modelValue":ce[6]||(ce[6]=Je=>O.value=Je),onChange:ve,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},ce[58]||(ce[58]=[x("option",{value:"company"},"Entreprise uniquement",-1),x("option",{value:"employee"},"Entreprise et salariés",-1),x("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[Yi,O.value]])]),x("div",Qz,[Q.value.type==="Polygon"?(De(),Fe("div",e$,[x("div",t$,[ce[61]||(ce[61]=x("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),x("span",n$,Dt(Oe(Q.value.surface||0)),1)]),x("div",r$,[ce[62]||(ce[62]=x("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),x("span",i$,Dt(te(Q.value.perimeter||0)),1)])])):Q.value.type==="Line"?(De(),Fe(kn,{key:1},[ce[63]||(ce[63]=x("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),x("span",s$,Dt(te(Q.value.length||0)),1)],64)):Q.value.type==="ElevationLine"?(De(),Fe(kn,{key:2},[x("div",o$,[x("div",a$,[ce[64]||(ce[64]=x("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),x("span",l$,Dt(te(Q.value.length||0)),1)]),x("div",u$,[ce[65]||(ce[65]=x("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé + :",-1)),x("span",c$,Dt(te(Q.value.elevationGain||0)),1)]),x("div",d$,[ce[66]||(ce[66]=x("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé - :",-1)),x("span",h$,Dt(te(Q.value.elevationLoss||0)),1)]),x("div",f$,[ce[67]||(ce[67]=x("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),x("span",p$,Dt(we(Q.value.averageSlope||0)),1)]),x("div",g$,[ce[68]||(ce[68]=x("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),x("span",m$,Dt(we(Q.value.maxSlope||0)),1)])]),x("div",v$,[x("canvas",y$,null,512)],512)],64)):tn("",!0)])])):tn("",!0)])):tn("",!0),S.value==="style"&&n.selectedShape&&((st=n.selectedShape.properties)==null?void 0:st.type)!=="Note"?(De(),Fe("div",_$,[x("div",b$,[(De(),Fe(kn,null,sr(V,Je=>x("button",{key:Je,class:"w-8 h-8 rounded-full",style:iu({backgroundColor:Je}),onClick:zt=>_e(Je),title:Je},null,12,w$)),64))]),((lt=Q.value)==null?void 0:lt.type)!=="TextRectangle"?(De(),Fe("div",x$,[x("div",L$,[ce[69]||(ce[69]=x("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),x("div",S$,[Tn(x("input",{type:"color","onUpdate:modelValue":ce[7]||(ce[7]=Je=>k.value=Je),class:"w-16 h-8 rounded border",onChange:ce[8]||(ce[8]=Je=>me({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[Ur,k.value]]),Tn(x("input",{type:"range","onUpdate:modelValue":ce[9]||(ce[9]=Je=>T.value=Je),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:ce[10]||(ce[10]=Je=>me({strokeWidth:T.value})),title:"Épaisseur du contour"},null,544),[[Ur,T.value]])])]),x("div",C$,[ce[70]||(ce[70]=x("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),Tn(x("select",{"onUpdate:modelValue":ce[11]||(ce[11]=Je=>A.value=Je),class:"w-full rounded border",onChange:ce[12]||(ce[12]=Je=>me({strokeStyle:A.value}))},[(De(),Fe(kn,null,sr(N,Je=>x("option",{key:Je.value,value:Je.value},Dt(Je.label),9,E$)),64))],544),[[Yi,A.value]])]),ee.value?(De(),Fe("div",P$,[ce[71]||(ce[71]=x("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),x("div",M$,[Tn(x("input",{type:"color","onUpdate:modelValue":ce[13]||(ce[13]=Je=>R.value=Je),class:"w-16 h-8 rounded border",onChange:ce[14]||(ce[14]=Je=>me({fillColor:R.value})),title:"Couleur de remplissage"},null,544),[[Ur,R.value]]),Tn(x("input",{type:"range","onUpdate:modelValue":ce[15]||(ce[15]=Je=>G.value=Je),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:ce[16]||(ce[16]=Je=>me({fillOpacity:G.value})),title:"Opacité du remplissage"},null,544),[[Ur,G.value]])])])):tn("",!0)])):tn("",!0),((_t=Q.value)==null?void 0:_t.type)==="TextRectangle"?(De(),Fe("div",k$,[x("div",A$,[ce[72]||(ce[72]=x("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),x("div",T$,[Tn(x("input",{type:"color","onUpdate:modelValue":ce[17]||(ce[17]=Je=>k.value=Je),class:"w-16 h-8 rounded border",onChange:ce[18]||(ce[18]=Je=>me({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[Ur,k.value]]),Tn(x("input",{type:"range","onUpdate:modelValue":ce[19]||(ce[19]=Je=>T.value=Je),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:ce[20]||(ce[20]=Je=>me({strokeWidth:T.value})),title:"Épaisseur du contour"},null,544),[[Ur,T.value]])])]),x("div",D$,[ce[73]||(ce[73]=x("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),x("div",I$,[Tn(x("input",{type:"color","onUpdate:modelValue":ce[21]||(ce[21]=Je=>R.value=Je),class:"w-16 h-8 rounded border",onChange:ce[22]||(ce[22]=Je=>me({fillColor:R.value})),title:"Couleur de remplissage"},null,544),[[Ur,R.value]]),Tn(x("input",{type:"range","onUpdate:modelValue":ce[23]||(ce[23]=Je=>G.value=Je),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:ce[24]||(ce[24]=Je=>me({fillOpacity:G.value})),title:"Opacité du remplissage"},null,544),[[Ur,G.value]])])])])):tn("",!0)])):tn("",!0),S.value==="filters"?(De(),Fe("div",O$,[x("div",N$,[x("div",R$,[ce[76]||(ce[76]=x("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accès",-1)),ce[77]||(ce[77]=x("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Sélectionnez votre niveau d'accès pour filtrer les éléments visibles sur la carte. ",-1)),x("div",null,[Tn(x("select",{"onUpdate:modelValue":ce[25]||(ce[25]=Je=>q.value=Je),onChange:ce[26]||(ce[26]=Je=>B(q.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},ce[74]||(ce[74]=[x("option",{value:"company"},"Entreprise (accès à tout)",-1),x("option",{value:"employee"},"Salariés (accès niveau salariés et visiteurs)",-1),x("option",{value:"visitor"},"Visiteurs (accès niveau visiteurs uniquement)",-1)]),544),[[Yi,q.value]]),ce[75]||(ce[75]=x("div",{class:"mt-2 text-xs text-gray-500"},[x("p",null,[x("strong",null,"Entreprise"),qr(" : Vous verrez tous les éléments (entreprise, salariés, visiteurs)")]),x("p",null,[x("strong",null,"Salariés"),qr(" : Vous verrez les éléments pour salariés et visiteurs")]),x("p",null,[x("strong",null,"Visiteurs"),qr(" : Vous ne verrez que les éléments pour visiteurs")])],-1))])]),x("div",B$,[ce[86]||(ce[86]=x("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catégories",-1)),x("div",F$,[x("label",j$,[Tn(x("input",{type:"checkbox","onUpdate:modelValue":ce[27]||(ce[27]=Je=>$.categories.forages=Je),onChange:ue,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,$.categories.forages]]),ce[78]||(ce[78]=x("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),x("label",z$,[Tn(x("input",{type:"checkbox","onUpdate:modelValue":ce[28]||(ce[28]=Je=>$.categories.clients=Je),onChange:ue,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,$.categories.clients]]),ce[79]||(ce[79]=x("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),x("label",$$,[Tn(x("input",{type:"checkbox","onUpdate:modelValue":ce[29]||(ce[29]=Je=>$.categories.entrepots=Je),onChange:ue,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,$.categories.entrepots]]),ce[80]||(ce[80]=x("span",{class:"ml-2 text-sm text-gray-700"},"Entrepôts",-1))]),x("label",U$,[Tn(x("input",{type:"checkbox","onUpdate:modelValue":ce[30]||(ce[30]=Je=>$.categories.livraisons=Je),onChange:ue,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,$.categories.livraisons]]),ce[81]||(ce[81]=x("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),x("label",V$,[Tn(x("input",{type:"checkbox","onUpdate:modelValue":ce[31]||(ce[31]=Je=>$.categories.cultures=Je),onChange:ue,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,$.categories.cultures]]),ce[82]||(ce[82]=x("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),x("label",H$,[Tn(x("input",{type:"checkbox","onUpdate:modelValue":ce[32]||(ce[32]=Je=>$.categories.parcelles=Je),onChange:ue,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,$.categories.parcelles]]),ce[83]||(ce[83]=x("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(De(!0),Fe(kn,null,sr($.categories,(Je,zt)=>(De(),Fe(kn,{key:zt},[p.value.includes(String(zt))?tn("",!0):(De(),Fe("label",G$,[Tn(x("input",{type:"checkbox","onUpdate:modelValue":Xt=>$.categories[zt]=Xt,onChange:ue,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,W$),[[Pl,$.categories[zt]]]),x("span",q$,Dt(zt),1)]))],64))),128)),s.value||o.value?(De(),Fe("div",Y$,[x("div",K$,[Tn(x("input",{type:"text","onUpdate:modelValue":ce[33]||(ce[33]=Je=>u.name=Je),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[Ur,u.name]]),x("button",{onClick:re,disabled:!u.name||h.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[h.value?(De(),Fe("svg",J$,ce[85]||(ce[85]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(De(),Fe("svg",X$,ce[84]||(ce[84]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,Z$)])])):tn("",!0)])]),x("div",Q$,[ce[91]||(ce[91]=x("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),x("div",eU,[x("label",tU,[Tn(x("input",{type:"checkbox","onUpdate:modelValue":ce[34]||(ce[34]=Je=>$.shapeTypes.Polygon=Je),onChange:ue,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,$.shapeTypes.Polygon]]),ce[87]||(ce[87]=x("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),x("label",nU,[Tn(x("input",{type:"checkbox","onUpdate:modelValue":ce[35]||(ce[35]=Je=>$.shapeTypes.Line=Je),onChange:ue,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,$.shapeTypes.Line]]),ce[88]||(ce[88]=x("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),x("label",rU,[Tn(x("input",{type:"checkbox","onUpdate:modelValue":ce[36]||(ce[36]=Je=>$.shapeTypes.ElevationLine=Je),onChange:ue,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,$.shapeTypes.ElevationLine]]),ce[89]||(ce[89]=x("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimétriques",-1))]),x("label",iU,[Tn(x("input",{type:"checkbox","onUpdate:modelValue":ce[37]||(ce[37]=Je=>$.shapeTypes.Note=Je),onChange:ue,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,$.shapeTypes.Note]]),ce[90]||(ce[90]=x("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),x("div",{class:"pt-4 mb-4"},[x("button",{onClick:fe,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Réinitialiser ")])])])):tn("",!0)])]),n.selectedShape&&Q.value&&Q.value.type==="ElevationLine"?(De(),Fe("div",sU,[x("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:ce[38]||(ce[38]=Je=>X("samplePoints"))},[ce[93]||(ce[93]=x("span",null,"Points d'échantillonnage",-1)),(De(),Fe("svg",{class:Mi(["w-4 h-4",{"rotate-180":!E.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ce[92]||(ce[92]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Tn(x("div",oU,[x("div",aU,[ce[98]||(ce[98]=x("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),x("div",lU,[x("div",null,[ce[94]||(ce[94]=x("label",{class:"text-xs text-gray-600"},"Taille",-1)),Tn(x("input",{type:"number","onUpdate:modelValue":ce[39]||(ce[39]=Je=>j.value.radius=Je),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:ye},null,544),[[Ur,j.value.radius]])]),x("div",null,[ce[95]||(ce[95]=x("label",{class:"text-xs text-gray-600"},"Couleur",-1)),Tn(x("input",{type:"color","onUpdate:modelValue":ce[40]||(ce[40]=Je=>j.value.color=Je),class:"w-full h-8 px-1 border rounded",onChange:ye},null,544),[[Ur,j.value.color]])]),x("div",null,[ce[96]||(ce[96]=x("label",{class:"text-xs text-gray-600"},"Opacité",-1)),Tn(x("input",{type:"range","onUpdate:modelValue":ce[41]||(ce[41]=Je=>j.value.fillOpacity=Je),min:"0",max:"1",step:"0.1",class:"w-full",onChange:ye},null,544),[[Ur,j.value.fillOpacity]])]),x("div",null,[ce[97]||(ce[97]=x("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Tn(x("input",{type:"number","onUpdate:modelValue":ce[42]||(ce[42]=Je=>j.value.weight=Je),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:ye},null,544),[[Ur,j.value.weight]])])])]),x("div",null,[ce[102]||(ce[102]=x("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),x("div",uU,[x("div",null,[ce[99]||(ce[99]=x("label",{class:"text-xs text-gray-600"},"Taille",-1)),Tn(x("input",{type:"number","onUpdate:modelValue":ce[43]||(ce[43]=Je=>Y.value.radius=Je),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:J},null,544),[[Ur,Y.value.radius]])]),x("div",null,[ce[100]||(ce[100]=x("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Tn(x("input",{type:"number","onUpdate:modelValue":ce[44]||(ce[44]=Je=>Y.value.weight=Je),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:J},null,544),[[Ur,Y.value.weight]])]),x("div",null,[ce[101]||(ce[101]=x("label",{class:"text-xs text-gray-600"},"Opacité",-1)),Tn(x("input",{type:"range","onUpdate:modelValue":ce[45]||(ce[45]=Je=>Y.value.fillOpacity=Je),min:"0",max:"1",step:"0.1",class:"w-full",onChange:J},null,544),[[Ur,Y.value.fillOpacity]])])])])],512),[[Dy,!E.value.samplePoints]])])):tn("",!0)],2)}}}),L5=kc(cU,[["__scopeId","data-v-338b5d61"]]),dU={class:"map-toolbar w-full"},hU={class:"hidden md:flex items-center space-x-2"},fU={class:"dropdown"},pU={class:"dropdown-menu"},gU=["onClick"],mU={key:0,class:"border-l pl-2 flex-1"},vU={class:"flex items-center"},yU={class:"plan-info"},_U={class:"plan-name"},bU={key:0,class:"plan-description"},wU={class:"border-l pl-2 ml-auto"},xU={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},LU={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},SU={key:"saving"},CU={key:"success",class:"save-success-text"},EU={key:"default"},PU={class:"md:hidden"},MU={class:"flex justify-between items-center"},kU={key:0,class:"truncate mx-2 text-sm font-medium"},AU={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},TU={class:"flex justify-between items-center mb-3 border-b pb-2"},DU={class:"flex flex-col space-y-4"},IU={key:0,class:"flex flex-col pb-3 border-b"},OU={class:"text-sm font-semibold text-gray-800"},NU={key:0,class:"text-xs text-gray-600 mt-1"},RU={class:"flex flex-col"},BU={class:"grid grid-cols-3 gap-2"},FU=["onClick"],jU={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},zU={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},$U={key:"saving"},UU={key:"success",class:"save-success-text"},VU={key:"default"},HU=Rs({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view"],setup(n,{emit:e}){const t=n,r=e,{lastSave:i,planName:s,planDescription:o,saveStatus:a}=x2(t),l=yt("Hybride"),u=yt(!1),h=A=>{const R=A.currentTarget,G=R.nextElementSibling;if(G&&G.classList.contains("dropdown-menu")){const ee=R.getBoundingClientRect();G.style.top=`${ee.bottom}px`,G.style.left=`${ee.left}px`}},p={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},v=rr(()=>i.value?new Date(i.value).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),m=A=>{l.value=A,r("change-map-type",A),u.value=!1},S=()=>{r("create-new-plan"),u.value=!1},E=()=>{r("load-plan"),u.value=!1},k=()=>{r("save-plan"),u.value=!1},T=()=>{r("adjust-view"),u.value=!1};return Es(()=>{const A=setInterval(()=>{window.dispatchEvent(new CustomEvent("geonote:savePlan"))},6e4);Ol(()=>{clearInterval(A)})}),_i(a,A=>{A==="saving"&&window.dispatchEvent(new CustomEvent("geonote:savePlan"))}),(A,R)=>(De(),Fe("div",dU,[x("div",hU,[x("div",fU,[x("button",{class:"btn-toolbar dropdown-toggle",onMouseover:h},[R[2]||(R[2]=x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),x("span",null,Dt(p[l.value]),1)],32),x("div",pU,[(De(),Fe(kn,null,sr(p,(G,ee)=>x("button",{key:ee,class:Mi(["dropdown-item",{active:ee===l.value}]),onClick:pe=>m(ee)},Dt(G),11,gU)),64))])]),Ln(s)?(De(),Fe("div",mU,[x("div",vU,[x("div",yU,[x("h2",_U,Dt(Ln(s)),1),Ln(o)?(De(),Fe("p",bU,Dt(Ln(o)),1)):tn("",!0)])])])):tn("",!0),x("div",{class:"border-l pl-2"},[x("div",{class:"flex items-center space-x-1"},[x("button",{onClick:S,class:"btn-toolbar",title:"Nouveau plan"},R[3]||(R[3]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),x("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),x("button",{onClick:E,class:"btn-toolbar",title:"Charger un plan"},R[4]||(R[4]=[fl('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-f1cdc164><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-f1cdc164></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-f1cdc164></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-f1cdc164></path></svg><span class="hidden lg:inline ml-1" data-v-f1cdc164>Charger</span>',2)])),x("button",{onClick:k,class:"btn-toolbar",title:"Enregistrer le plan"},R[5]||(R[5]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),x("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),x("div",{class:"border-l pl-2"},[x("div",{class:"flex items-center space-x-1"},[x("button",{onClick:T,class:"btn-toolbar",title:"Ajuster la vue"},R[6]||(R[6]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),x("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)]))])]),x("div",wU,[x("div",{class:Mi(["text-xs hidden lg:flex items-center",{"text-gray-500":!Ln(a),"text-primary-600 font-medium":Ln(a)==="success","text-blue-600 font-medium":Ln(a)==="saving"}])},[Ln(a)==="saving"?(De(),Fe("svg",xU,R[7]||(R[7]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),Ln(a)==="success"?(De(),Fe("svg",LU,R[8]||(R[8]=[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):tn("",!0),ci(nb,{name:"fade-slide",mode:"out-in"},{default:nu(()=>[Ln(a)==="saving"?(De(),Fe("span",SU," Sauvegarde en cours... ")):Ln(a)==="success"?(De(),Fe("span",CU," Sauvegarde réussie ! ")):(De(),Fe("span",EU," Dernière modification : "+Dt(v.value),1))]),_:1})],2)])]),x("div",PU,[x("div",MU,[x("button",{onClick:R[0]||(R[0]=G=>u.value=!u.value),class:"p-2 rounded-md border bg-white shadow-sm"},R[9]||(R[9]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),Ln(s)?(De(),Fe("div",kU,Dt(Ln(s)),1)):tn("",!0),x("div",{class:"flex space-x-2"},[x("button",{onClick:S,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},R[10]||(R[10]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),x("button",{onClick:k,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},R[11]||(R[11]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),x("button",{onClick:T,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},R[12]||(R[12]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),u.value?(De(),Fe("div",AU,[x("div",TU,[R[14]||(R[14]=x("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),x("button",{onClick:R[1]||(R[1]=G=>u.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},R[13]||(R[13]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",DU,[Ln(s)?(De(),Fe("div",IU,[x("h3",OU,Dt(Ln(s)),1),Ln(o)?(De(),Fe("p",NU,Dt(Ln(o)),1)):tn("",!0)])):tn("",!0),x("div",RU,[R[15]||(R[15]=x("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),x("div",BU,[(De(),Fe(kn,null,sr(p,(G,ee)=>x("button",{key:ee,class:Mi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":ee===l.value}]),onClick:pe=>m(ee)},Dt(G),11,FU)),64))])]),x("div",{class:"flex flex-col"},[R[18]||(R[18]=x("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),x("div",{class:"grid grid-cols-2 gap-2"},[x("button",{onClick:S,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},R[16]||(R[16]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),qr(" Nouveau ")])),x("button",{onClick:E,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},R[17]||(R[17]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),x("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),x("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),qr(" Charger ")]))])]),x("div",{class:Mi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!Ln(a),"text-primary-600 font-medium":Ln(a)==="success","text-blue-600 font-medium":Ln(a)==="saving"}])},[Ln(a)==="saving"?(De(),Fe("svg",jU,R[19]||(R[19]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),Ln(a)==="success"?(De(),Fe("svg",zU,R[20]||(R[20]=[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):tn("",!0),ci(nb,{name:"fade-slide",mode:"out-in"},{default:nu(()=>[Ln(a)==="saving"?(De(),Fe("span",$U," Sauvegarde en cours... ")):Ln(a)==="success"?(De(),Fe("span",UU," Sauvegarde réussie ! ")):(De(),Fe("span",VU," Dernière modification : "+Dt(v.value),1))]),_:1})],2)])])):tn("",!0)])]))}}),GU=kc(HU,[["__scopeId","data-v-f1cdc164"]]),WU={class:"comment-thread"},qU={key:0,class:"space-y-3 mb-4"},YU={class:"flex justify-between items-start"},KU={class:"flex items-center"},ZU={class:"font-medium text-sm text-gray-900"},XU={class:"flex items-center"},JU={class:"text-xs text-gray-500"},QU=["onClick"],eV={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},tV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},nV={key:2,class:"mt-3"},rV={class:"flex justify-end mt-2"},iV=["disabled"],sV={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},oV=Rs({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(n,{emit:e}){const t=n;console.log("[CommentThread] Commentaires reçus initialement:",t.comments),_i(()=>t.comments,E=>{console.log("[CommentThread] Commentaires mis à jour:",E)},{deep:!0});const r=e,i=Ao(),s=xf(),o=ou(),a=yt(""),l=rr(()=>i.isEntreprise||i.isAdmin);function u(E){return i.user&&E.userId===i.user.id||i.isAdmin}async function h(){var E;if(a.value.trim())try{await s.addComment(t.noteId,a.value.trim()),a.value="",o.success("Commentaire ajouté avec succès"),r("comment-added")}catch(k){if(console.error("Erreur lors de l'ajout du commentaire:",k),(E=k.response)!=null&&E.data){const T=k.response.data;T.note?o.error(`Erreur: ${T.note[0]}`):T.user?o.error(`Erreur: ${T.user[0]}`):T.text?o.error(`Erreur: ${T.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(E){var k;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(t.noteId,E),o.success("Commentaire supprimé"),r("comment-deleted")}catch(T){if(console.error("Erreur lors de la suppression du commentaire:",T),(k=T.response)!=null&&k.data){const A=T.response.data;A.detail?o.error(`Erreur: ${A.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(E){try{if(!E)return"Date inconnue";const k=new Date(E);return isNaN(k.getTime())?(console.warn(`Date invalide: ${E}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)}catch(k){return console.error(`Erreur lors du formatage de la date: ${E}`,k),"Date invalide"}}function m(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function S(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return E}}return(E,k)=>(De(),Fe("div",WU,[E.comments&&E.comments.length>0?(De(),Fe("div",qU,[(De(!0),Fe(kn,null,sr(E.comments,T=>(De(),Fe("div",{key:T.id,class:"bg-gray-50 rounded-lg p-3"},[x("div",YU,[x("div",KU,[x("div",ZU,Dt(T.userName),1),x("span",{class:Mi(["ml-2 text-xs px-2 py-0.5 rounded-full",m(T.userRole)])},Dt(S(T.userRole)),3)]),x("div",XU,[x("span",JU,Dt(v(T.createdAt)),1),u(T)?(De(),Fe("button",{key:0,onClick:Il(A=>p(T.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},k[1]||(k[1]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,QU)):tn("",!0)])]),x("p",eV,Dt(T.text),1)]))),128))])):(De(),Fe("div",tV," Aucun commentaire pour le moment ")),l.value?(De(),Fe("div",nV,[Tn(x("textarea",{"onUpdate:modelValue":k[0]||(k[0]=T=>a.value=T),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[Ur,a.value]]),x("div",rV,[x("button",{type:"button",onClick:Il(h,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,iV)])])):(De(),Fe("div",sV," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),aV={class:"photo-gallery"},lV={key:0,class:"grid grid-cols-2 gap-2 mb-4"},uV=["src","onClick"],cV={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},dV={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},hV=["onClick"],fV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},pV={class:"flex space-x-2 mt-3"},gV={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},mV={class:"relative bg-gray-900",style:{height:"300px"}},vV=["src"],yV={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},_V={key:1,class:"flex space-x-3"},bV={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},wV={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},xV=["src"],LV=Rs({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(n,{emit:e}){const t=n,r=e,i=xf(),s=ou(),o=yt(null),a=yt(null),l=yt(null);let u=null;const h=yt(!1),p=yt(!1),v=yt(null),m=yt(null);function S(ge){v.value=ge,h.value=!0}async function E(ge){var O;if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{await i.removePhoto(t.noteId,ge),s.success("Photo supprimée"),r("photo-deleted"),h.value&&((O=v.value)==null?void 0:O.id)===ge&&(h.value=!1,v.value=null)}catch(j){console.error("Erreur lors de la suppression de la photo:",j),s.error("Erreur lors de la suppression de la photo")}}function k(){l.value&&l.value.click()}async function T(ge){const O=ge.target;if(!O.files||O.files.length===0)return;const j=O.files[0];if(!j.type.startsWith("image/")){s.error("Le fichier doit être une image");return}if(j.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const Y=await A(j);await i.addPhoto(t.noteId,{url:Y}),O.value="",s.success("Photo ajoutée"),r("photo-added")}catch(Y){console.error("Erreur lors de l'ajout de la photo:",Y),s.error("Erreur lors de l'ajout de la photo")}}function A(ge){return new Promise((O,j)=>{const Y=new FileReader;Y.onload=()=>O(Y.result),Y.onerror=j,Y.readAsDataURL(ge)})}_i(p,async ge=>{if(ge){m.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de caméra non supportée sur ce navigateur");const O={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};u=await navigator.mediaDevices.getUserMedia(O),o.value&&(o.value.srcObject=u,await new Promise(j=>{o.value.onloadedmetadata=()=>{o.value.play().then(j)}}))}catch(O){console.error("Erreur lors de l'accès à la caméra:",O);let j="Impossible d'accéder à la caméra";O.name==="NotAllowedError"?j="L'accès à la caméra a été refusé. Veuillez vérifier vos permissions.":O.name==="NotFoundError"?j="Aucune caméra n'a été trouvée sur votre appareil.":O.name==="NotSupportedError"&&(j="Votre navigateur ne supporte pas l'accès à la caméra."),s.error(j),p.value=!1}}else u&&(u.getTracks().forEach(O=>O.stop()),u=null)});function R(){if(!o.value||!a.value)return;const ge=o.value,O=a.value;O.width=ge.videoWidth,O.height=ge.videoHeight;const j=O.getContext("2d");j&&(j.drawImage(ge,0,0,O.width,O.height),m.value=O.toDataURL("image/jpeg"))}function G(){m.value=null}async function ee(){if(m.value)try{await i.addPhoto(t.noteId,{url:m.value}),p.value=!1,s.success("Photo ajoutée"),r("photo-added")}catch(ge){console.error("Erreur lors de l'ajout de la photo:",ge),s.error("Erreur lors de l'ajout de la photo")}}function pe(){p.value=!1}return Ol(()=>{u&&(u.getTracks().forEach(ge=>ge.stop()),u=null)}),(ge,O)=>(De(),Fe("div",aV,[ge.photos&&ge.photos.length>0?(De(),Fe("div",lV,[(De(!0),Fe(kn,null,sr(ge.photos,j=>(De(),Fe("div",{key:j.id,class:"relative group"},[x("img",{src:j.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:Y=>S(j)},null,8,uV),x("div",cV,[x("div",dV,[x("button",{onClick:Il(Y=>E(j.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},O[2]||(O[2]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,hV)])])]))),128))])):(De(),Fe("div",fV," Aucune photo pour le moment ")),x("div",pV,[x("button",{type:"button",onClick:O[0]||(O[0]=j=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},O[3]||(O[3]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),qr(" Prendre une photo ")])),x("button",{type:"button",onClick:k,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},O[4]||(O[4]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),qr(" Téléverser ")])),x("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:T},null,544)]),p.value?(De(),Fe("div",gV,[x("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[O[6]||(O[6]=x("h3",{class:"text-sm font-medium text-gray-700"},"Mode caméra",-1)),x("button",{type:"button",onClick:pe,class:"text-gray-400 hover:text-gray-500"},O[5]||(O[5]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",mV,[m.value?(De(),Fe("img",{key:1,src:m.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,vV)):(De(),Fe("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),x("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),x("div",yV,[m.value?(De(),Fe("div",_V,[x("button",{type:"button",onClick:G,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),x("button",{type:"button",onClick:ee,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(De(),Fe("button",{key:0,type:"button",onClick:R,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},O[7]||(O[7]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):tn("",!0),h.value?(De(),Fe("div",bV,[x("div",wV,[x("button",{type:"button",onClick:O[1]||(O[1]=j=>h.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},O[8]||(O[8]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(De(),Fe("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,xV)):tn("",!0)])])):tn("",!0)]))}}),SV=kc(LV,[["__scopeId","data-v-f87156b4"]]),CV={class:"modal-header"},EV={class:"modal-title"},PV={class:"modal-tabs"},MV={key:0,class:"badge"},kV={key:0,class:"badge"},AV={class:"modal-content"},TV={key:0,class:"tab-content"},DV={class:"form-group"},IV={class:"form-group"},OV={key:0,class:"location-indicator"},NV={class:"form-group"},RV=["value"],BV={key:1,class:"form-group"},FV=["value"],jV={class:"form-group"},zV=["value"],$V={class:"form-group"},UV={class:"color-picker"},VV=["onClick"],HV={key:1,class:"tab-content"},GV={key:2,class:"tab-content"},WV=Rs({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(n,{emit:e}){const t=n,r=e,i=xf(),s=ou(),o=Ao(),a=yt("info"),l=yt([]),u=yt(null),h=window.console;_i(a,async F=>{h.log("[NoteEditModal] Onglet actif changé:",F),F==="comments"&&t.note&&t.note.id&&(h.log("[NoteEditModal] Onglet Commentaires sélectionné, commentaires actuels:",p.value.comments),await S(t.note.id)),F==="photos"&&t.note&&t.note.id&&(h.log("[NoteEditModal] Onglet Photos sélectionné, photos actuelles:",p.value.photos),await E(t.note.id))});const p=yt({title:"",description:"",columnId:"",accessLevel:qi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],enterprise_id:null});function v(F){return Array.isArray(F)?F:typeof F=="object"&&"type"in F&&"coordinates"in F?[F.coordinates[1],F.coordinates[0]]:(h.error("[NoteEditModal] Format de localisation non reconnu:",F),[0,0])}function m(F){if(!F)return new Date().toISOString();try{const B=new Date(F);return isNaN(B.getTime())?(h.warn("[NoteEditModal] Date invalide:",F),new Date().toISOString()):B.toISOString()}catch(B){return h.error("[NoteEditModal] Erreur lors de la création de la date:",B),new Date().toISOString()}}async function S(F){try{h.log(`[NoteEditModal] Chargement des commentaires pour la note ${F}`);const B=await Sa.getComments(F);h.log("[NoteEditModal] Commentaires reçus:",B.data);const Q=B.data.map(X=>({id:X.id,text:X.text,createdAt:X.created_at,userId:X.user,userName:X.user_name,userRole:X.user_role}));return h.log("[NoteEditModal] Commentaires transformés:",Q),t.note&&(i.updateNote(t.note.id,{comments:Q}),p.value.comments=Q,h.log("[NoteEditModal] Commentaires mis à jour dans le store et localement"),h.log("[NoteEditModal] editingNote.comments après mise à jour:",p.value.comments)),Q}catch(B){return h.error("[NoteEditModal] Erreur lors du chargement des commentaires:",B),s.error("Erreur lors du chargement des commentaires"),[]}}async function E(F){try{h.log(`[NoteEditModal] Chargement des photos pour la note ${F}`);const B=await Sa.getPhotos(F);h.log("[NoteEditModal] Photos reçues:",B.data);const Q=B.data.map(X=>({id:X.id,url:X.image,createdAt:X.created_at,caption:X.caption}));return t.note&&(i.updateNote(t.note.id,{photos:Q}),p.value.photos=Q,h.log("[NoteEditModal] Photos mises à jour dans le store et localement")),Q}catch(B){return h.error("[NoteEditModal] Erreur lors du chargement des photos:",B),s.error("Erreur lors du chargement des photos"),[]}}async function k(){if(o.isAdmin)try{const F=await Ua.getEntreprises();l.value=F.data,h.log("[NoteEditModal] Entreprises chargées:",l.value)}catch(F){h.error("[NoteEditModal] Erreur lors du chargement des entreprises:",F),s.error("Erreur lors du chargement des entreprises")}}Es(async()=>{var F,B,Q;if(h.log("[NoteEditModal] onMounted - props:",t),await i.loadColumns(),h.log("[NoteEditModal] Colonnes chargées:",i.columns),await k(),t.note){h.log("[NoteEditModal] Édition d'une note existante:",t.note);const X=JSON.parse(JSON.stringify(t.note));X.createdAt=m(X.createdAt),X.updatedAt=m(X.updatedAt),p.value=X,o.isAdmin&&X.enterprise_id&&(u.value=X.enterprise_id),t.note.id&&(h.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([S(t.note.id),E(t.note.id)]),h.log("[NoteEditModal] Après chargement - Commentaires:",((F=p.value.comments)==null?void 0:F.length)||0),h.log("[NoteEditModal] Après chargement - Photos:",((B=p.value.photos)==null?void 0:B.length)||0),setTimeout(()=>{h.log("[NoteEditModal] Compteurs après timeout - Commentaires:",A.value),h.log("[NoteEditModal] Compteurs après timeout - Photos:",R.value)},0))}else if(t.isNewNote){if(h.log("[NoteEditModal] Création d'une nouvelle note"),p.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:qi.PRIVATE,style:{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:null},!o.isAdmin&&((Q=o.user)!=null&&Q.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id),t.location){h.log("[NoteEditModal] Ajout de la localisation:",t.location);const X=v(t.location);p.value.location=X}h.log("[NoteEditModal] Niveau d'accès initial:",p.value.accessLevel)}else h.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");h.log("[NoteEditModal] editingNote.value après initialisation:",p.value)});const T=rr(()=>i.getSortedColumns),A=rr(()=>{var B;const F=((B=p.value.comments)==null?void 0:B.length)||0;return h.log("[NoteEditModal] Computed commentsCount recalculé:",F),F}),R=rr(()=>{var B;const F=((B=p.value.photos)==null?void 0:B.length)||0;return h.log("[NoteEditModal] Computed photosCount recalculé:",F),F}),G=[{id:qi.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:qi.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:qi.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et les salariés"},{id:qi.VISITOR,title:"Visiteurs",description:"Visible par tous"}],ee=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],pe=F=>{var B;if(p.value.style?(p.value.style.color=F,p.value.style.fillColor=F):p.value.style={color:F,weight:2,opacity:1,fillColor:F,fillOpacity:.6,radius:8},p.value.color=F,(B=t.note)!=null&&B.id){h.log("[NoteEditModal] Émission de l'événement de mise à jour de couleur:",F);const Q=new CustomEvent("geonote:updateStyle",{detail:{noteId:t.note.id,style:{color:F,fillColor:F}}});window.dispatchEvent(Q);const X=new CustomEvent("geonote:update",{detail:{noteId:t.note.id,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style}}});window.dispatchEvent(X)}},ge=()=>{var F,B,Q,X,_e,me,We,ae,ve,ye,J;p.value={title:((F=t.note)==null?void 0:F.title)||"",description:((B=t.note)==null?void 0:B.description)||"",columnId:((Q=t.note)==null?void 0:Q.columnId)||"",accessLevel:((X=t.note)==null?void 0:X.accessLevel)||"private",style:((_e=t.note)==null?void 0:_e.style)||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},location:t.location||((me=t.note)==null?void 0:me.location)||null,comments:((We=t.note)==null?void 0:We.comments)||[],photos:((ae=t.note)==null?void 0:ae.photos)||[],enterprise_id:((ve=t.note)==null?void 0:ve.enterprise_id)||null},o.isAdmin&&((ye=t.note)!=null&&ye.enterprise_id)&&(u.value=t.note.enterprise_id),!o.isAdmin&&!p.value.enterprise_id&&((J=o.user)!=null&&J.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id)};Es(()=>{ge()}),_i(()=>t.note,()=>{ge()},{deep:!0});function O(){r("close")}async function j(){h.log("[NoteEditModal] Commentaire ajouté, le modal reste ouvert"),t.note&&t.note.id&&await S(t.note.id)}async function Y(){h.log("[NoteEditModal] Photo ajoutée, le modal reste ouvert"),t.note&&t.note.id&&await E(t.note.id)}async function V(){h.log("[NoteEditModal] Commentaire supprimé, mise à jour de la liste"),t.note&&t.note.id&&await S(t.note.id)}async function N(){h.log("[NoteEditModal] Photo supprimée, mise à jour de la liste"),t.note&&t.note.id&&await E(t.note.id)}async function q(){var F,B;try{const Q=p.value.style.color;p.value.style={...p.value.style,color:Q,fillColor:Q,weight:2,opacity:1,fillOpacity:.6,radius:8};const X={title:p.value.title,description:p.value.description,columnId:p.value.columnId,style:p.value.style,access_level:p.value.accessLevel,comments:p.value.comments||[],photos:p.value.photos||[],color:Q,enterprise_id:o.isAdmin?u.value:p.value.enterprise_id};!o.isAdmin&&((F=o.user)!=null&&F.enterprise_id)&&(X.enterprise_id=o.user.enterprise_id),p.value.location&&(X.location=Array.isArray(p.value.location)?{type:"Point",coordinates:[p.value.location[1],p.value.location[0]]}:p.value.location),h.log("[NoteEditModal] Données de note à sauvegarder:",X);let _e;if((B=t.note)!=null&&B.id){const me=t.note.backendId||t.note.id;h.log(`[NoteEditModal] Mise à jour de la note avec ID backend: ${me}`),X.backendId=t.note.backendId,_e=(await Sa.updateNote(me,X)).data,i.updateNote(me,{...p.value,..._e,accessLevel:p.value.accessLevel,style:p.value.style,color:Q,updatedAt:new Date().toISOString(),enterprise_id:X.enterprise_id,enterprise_name:p.value.enterprise_name});const ae=t.note.leafletId||t.note.id,ve=new CustomEvent("geonote:update",{detail:{noteId:ae,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style,color:Q}}});window.dispatchEvent(ve),s.success("Note mise à jour avec succès")}else{if(_e=(await Sa.createNote(X)).data,!_e.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const We=i.getDefaultColumn,ae={...X,id:_e.id,columnId:X.columnId||We.id,accessLevel:p.value.accessLevel,style:X.style,color:Q};h.log("[NoteEditModal] Note à ajouter au store avec ID backend:",_e.id),i.addNote(ae),s.success("Note créée avec succès")}_e&&(!_e.comments&&p.value.comments&&(_e.comments=p.value.comments),!_e.photos&&p.value.photos&&(_e.photos=p.value.photos),_e.color=Q,_e.style={..._e.style,color:Q,fillColor:Q}),r("save",_e),r("close")}catch(Q){h.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",Q),s.error("Erreur lors de la sauvegarde de la note")}}function $(F){F.stopPropagation()}return(F,B)=>{var Q;return De(),Fe("div",{class:"modal-overlay",onClick:$},[x("div",{class:"modal-container",onClick:B[8]||(B[8]=Il(()=>{},["stop"]))},[x("form",{onSubmit:Il(q,["prevent"]),class:"modal-form"},[x("div",CV,[x("h3",EV,Dt((Q=F.note)!=null&&Q.id?"Modifier la note":"Nouvelle note"),1),x("button",{type:"button",onClick:O,class:"close-button"},B[9]||(B[9]=[x("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",PV,[x("button",{type:"button",onClick:B[0]||(B[0]=X=>a.value="info"),class:Mi(["tab-button",{active:a.value==="info"}])}," Informations ",2),x("button",{type:"button",onClick:B[1]||(B[1]=X=>a.value="comments"),class:Mi(["tab-button",{active:a.value==="comments"}])},[B[10]||(B[10]=qr(" Commentaires ")),A.value>0?(De(),Fe("span",MV,Dt(A.value),1)):tn("",!0)],2),x("button",{type:"button",onClick:B[2]||(B[2]=X=>a.value="photos"),class:Mi(["tab-button",{active:a.value==="photos"}])},[B[11]||(B[11]=qr(" Photos ")),R.value>0?(De(),Fe("span",kV,Dt(R.value),1)):tn("",!0)],2)]),x("div",AV,[a.value==="info"?(De(),Fe("div",TV,[x("div",DV,[B[12]||(B[12]=x("label",{for:"title"},"Titre",-1)),Tn(x("input",{type:"text",id:"title","onUpdate:modelValue":B[3]||(B[3]=X=>p.value.title=X),required:""},null,512),[[Ur,p.value.title]])]),x("div",IV,[B[13]||(B[13]=x("label",{for:"description"},"Description",-1)),Tn(x("textarea",{id:"description","onUpdate:modelValue":B[4]||(B[4]=X=>p.value.description=X),rows:"3"},null,512),[[Ur,p.value.description]])]),p.value.location?(De(),Fe("div",OV,B[14]||(B[14]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1),x("span",null,"Note géolocalisée",-1)]))):tn("",!0),x("div",NV,[B[15]||(B[15]=x("label",{for:"column"},"État",-1)),Tn(x("select",{id:"column","onUpdate:modelValue":B[5]||(B[5]=X=>p.value.columnId=X)},[(De(!0),Fe(kn,null,sr(T.value,X=>(De(),Fe("option",{key:X.id,value:X.id},Dt(X.title),9,RV))),128))],512),[[Yi,p.value.columnId]])]),Ln(o).isAdmin?(De(),Fe("div",BV,[B[17]||(B[17]=x("label",{for:"enterprise"},"Entreprise",-1)),Tn(x("select",{id:"enterprise","onUpdate:modelValue":B[6]||(B[6]=X=>u.value=X)},[B[16]||(B[16]=x("option",{value:null},"Sélectionner une entreprise",-1)),(De(!0),Fe(kn,null,sr(l.value,X=>(De(),Fe("option",{key:X.id,value:X.id},Dt(X.company_name||`${X.first_name} ${X.last_name}`),9,FV))),128))],512),[[Yi,u.value]])])):tn("",!0),x("div",jV,[B[18]||(B[18]=x("label",{for:"accessLevel"},"Niveau d'accès",-1)),Tn(x("select",{id:"accessLevel","onUpdate:modelValue":B[7]||(B[7]=X=>p.value.accessLevel=X)},[(De(),Fe(kn,null,sr(G,X=>x("option",{key:X.id,value:X.id},Dt(X.title)+" - "+Dt(X.description),9,zV)),64))],512),[[Yi,p.value.accessLevel]])]),x("div",$V,[B[19]||(B[19]=x("label",null,"Couleur",-1)),x("div",UV,[(De(),Fe(kn,null,sr(ee,X=>x("div",{key:X,class:Mi(["color-option",{selected:p.value.style.color===X}]),style:iu({backgroundColor:X}),onClick:_e=>pe(X)},null,14,VV)),64))])])])):a.value==="comments"?(De(),Fe("div",HV,[F.note?(De(),$o(oV,{key:0,noteId:F.note.id,comments:p.value.comments||[],onCommentAdded:j,onCommentDeleted:V},null,8,["noteId","comments"])):tn("",!0)])):a.value==="photos"?(De(),Fe("div",GV,[F.note?(De(),$o(SV,{key:0,noteId:F.note.id,photos:p.value.photos||[],onPhotoAdded:Y,onPhotoDeleted:N},null,8,["noteId","photos"])):tn("",!0)])):tn("",!0)]),x("div",{class:"modal-footer"},[B[20]||(B[20]=x("button",{type:"submit",class:"primary-button"},"Enregistrer",-1)),x("button",{type:"button",onClick:O,class:"secondary-button"},"Annuler")])],32)])])}}}),WE=kc(WV,[["__scopeId","data-v-a9b914c4"]]);(()=>{var Nn,ur;var n=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(d,g)=>()=>(g||d((g={exports:{}}).exports,g),g.exports),a=(d,g,b,C)=>{if(g&&typeof g=="object"||typeof g=="function")for(let M of r(g))!s.call(d,M)&&M!==b&&e(d,M,{get:()=>g[M],enumerable:!(C=t(g,M))||C.enumerable});return d},l=(d,g,b)=>(b=d!=null?n(i(d)):{},a(g||!d||!d.__esModule?e(b,"default",{value:d,enumerable:!0}):b,d)),u=o((d,g)=>{function b(){this.__data__=[],this.size=0}g.exports=b}),h=o((d,g)=>{function b(C,M){return C===M||C!==C&&M!==M}g.exports=b}),p=o((d,g)=>{var b=h();function C(M,H){for(var ne=M.length;ne--;)if(b(M[ne][0],H))return ne;return-1}g.exports=C}),v=o((d,g)=>{var b=p(),C=Array.prototype,M=C.splice;function H(ne){var le=this.__data__,be=b(le,ne);if(be<0)return!1;var Me=le.length-1;return be==Me?le.pop():M.call(le,be,1),--this.size,!0}g.exports=H}),m=o((d,g)=>{var b=p();function C(M){var H=this.__data__,ne=b(H,M);return ne<0?void 0:H[ne][1]}g.exports=C}),S=o((d,g)=>{var b=p();function C(M){return b(this.__data__,M)>-1}g.exports=C}),E=o((d,g)=>{var b=p();function C(M,H){var ne=this.__data__,le=b(ne,M);return le<0?(++this.size,ne.push([M,H])):ne[le][1]=H,this}g.exports=C}),k=o((d,g)=>{var b=u(),C=v(),M=m(),H=S(),ne=E();function le(be){var Me=-1,it=be==null?0:be.length;for(this.clear();++Me<it;){var Xe=be[Me];this.set(Xe[0],Xe[1])}}le.prototype.clear=b,le.prototype.delete=C,le.prototype.get=M,le.prototype.has=H,le.prototype.set=ne,g.exports=le}),T=o((d,g)=>{var b=k();function C(){this.__data__=new b,this.size=0}g.exports=C}),A=o((d,g)=>{function b(C){var M=this.__data__,H=M.delete(C);return this.size=M.size,H}g.exports=b}),R=o((d,g)=>{function b(C){return this.__data__.get(C)}g.exports=b}),G=o((d,g)=>{function b(C){return this.__data__.has(C)}g.exports=b}),ee=o((d,g)=>{var b=typeof Ca=="object"&&Ca&&Ca.Object===Object&&Ca;g.exports=b}),pe=o((d,g)=>{var b=ee(),C=typeof self=="object"&&self&&self.Object===Object&&self,M=b||C||Function("return this")();g.exports=M}),ge=o((d,g)=>{var b=pe(),C=b.Symbol;g.exports=C}),O=o((d,g)=>{var b=ge(),C=Object.prototype,M=C.hasOwnProperty,H=C.toString,ne=b?b.toStringTag:void 0;function le(be){var Me=M.call(be,ne),it=be[ne];try{be[ne]=void 0;var Xe=!0}catch{}var Pt=H.call(be);return Xe&&(Me?be[ne]=it:delete be[ne]),Pt}g.exports=le}),j=o((d,g)=>{var b=Object.prototype,C=b.toString;function M(H){return C.call(H)}g.exports=M}),Y=o((d,g)=>{var b=ge(),C=O(),M=j(),H="[object Null]",ne="[object Undefined]",le=b?b.toStringTag:void 0;function be(Me){return Me==null?Me===void 0?ne:H:le&&le in Object(Me)?C(Me):M(Me)}g.exports=be}),V=o((d,g)=>{function b(C){var M=typeof C;return C!=null&&(M=="object"||M=="function")}g.exports=b}),N=o((d,g)=>{var b=Y(),C=V(),M="[object AsyncFunction]",H="[object Function]",ne="[object GeneratorFunction]",le="[object Proxy]";function be(Me){if(!C(Me))return!1;var it=b(Me);return it==H||it==ne||it==M||it==le}g.exports=be}),q=o((d,g)=>{var b=pe(),C=b["__core-js_shared__"];g.exports=C}),$=o((d,g)=>{var b=q(),C=function(){var H=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}();function M(H){return!!C&&C in H}g.exports=M}),F=o((d,g)=>{var b=Function.prototype,C=b.toString;function M(H){if(H!=null){try{return C.call(H)}catch{}try{return H+""}catch{}}return""}g.exports=M}),B=o((d,g)=>{var b=N(),C=$(),M=V(),H=F(),ne=/[\\^$.*+?()[\]{}|]/g,le=/^\[object .+?Constructor\]$/,be=Function.prototype,Me=Object.prototype,it=be.toString,Xe=Me.hasOwnProperty,Pt=RegExp("^"+it.call(Xe).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ut(on){if(!M(on)||C(on))return!1;var Mn=b(on)?Pt:le;return Mn.test(H(on))}g.exports=Ut}),Q=o((d,g)=>{function b(C,M){return C==null?void 0:C[M]}g.exports=b}),X=o((d,g)=>{var b=B(),C=Q();function M(H,ne){var le=C(H,ne);return b(le)?le:void 0}g.exports=M}),_e=o((d,g)=>{var b=X(),C=pe(),M=b(C,"Map");g.exports=M}),me=o((d,g)=>{var b=X(),C=b(Object,"create");g.exports=C}),We=o((d,g)=>{var b=me();function C(){this.__data__=b?b(null):{},this.size=0}g.exports=C}),ae=o((d,g)=>{function b(C){var M=this.has(C)&&delete this.__data__[C];return this.size-=M?1:0,M}g.exports=b}),ve=o((d,g)=>{var b=me(),C="__lodash_hash_undefined__",M=Object.prototype,H=M.hasOwnProperty;function ne(le){var be=this.__data__;if(b){var Me=be[le];return Me===C?void 0:Me}return H.call(be,le)?be[le]:void 0}g.exports=ne}),ye=o((d,g)=>{var b=me(),C=Object.prototype,M=C.hasOwnProperty;function H(ne){var le=this.__data__;return b?le[ne]!==void 0:M.call(le,ne)}g.exports=H}),J=o((d,g)=>{var b=me(),C="__lodash_hash_undefined__";function M(H,ne){var le=this.__data__;return this.size+=this.has(H)?0:1,le[H]=b&&ne===void 0?C:ne,this}g.exports=M}),se=o((d,g)=>{var b=We(),C=ae(),M=ve(),H=ye(),ne=J();function le(be){var Me=-1,it=be==null?0:be.length;for(this.clear();++Me<it;){var Xe=be[Me];this.set(Xe[0],Xe[1])}}le.prototype.clear=b,le.prototype.delete=C,le.prototype.get=M,le.prototype.has=H,le.prototype.set=ne,g.exports=le}),fe=o((d,g)=>{var b=se(),C=k(),M=_e();function H(){this.size=0,this.__data__={hash:new b,map:new(M||C),string:new b}}g.exports=H}),ie=o((d,g)=>{function b(C){var M=typeof C;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?C!=="__proto__":C===null}g.exports=b}),te=o((d,g)=>{var b=ie();function C(M,H){var ne=M.__data__;return b(H)?ne[typeof H=="string"?"string":"hash"]:ne.map}g.exports=C}),Oe=o((d,g)=>{var b=te();function C(M){var H=b(this,M).delete(M);return this.size-=H?1:0,H}g.exports=C}),we=o((d,g)=>{var b=te();function C(M){return b(this,M).get(M)}g.exports=C}),Be=o((d,g)=>{var b=te();function C(M){return b(this,M).has(M)}g.exports=C}),ue=o((d,g)=>{var b=te();function C(M,H){var ne=b(this,M),le=ne.size;return ne.set(M,H),this.size+=ne.size==le?0:1,this}g.exports=C}),re=o((d,g)=>{var b=fe(),C=Oe(),M=we(),H=Be(),ne=ue();function le(be){var Me=-1,it=be==null?0:be.length;for(this.clear();++Me<it;){var Xe=be[Me];this.set(Xe[0],Xe[1])}}le.prototype.clear=b,le.prototype.delete=C,le.prototype.get=M,le.prototype.has=H,le.prototype.set=ne,g.exports=le}),Z=o((d,g)=>{var b=k(),C=_e(),M=re(),H=200;function ne(le,be){var Me=this.__data__;if(Me instanceof b){var it=Me.__data__;if(!C||it.length<H-1)return it.push([le,be]),this.size=++Me.size,this;Me=this.__data__=new M(it)}return Me.set(le,be),this.size=Me.size,this}g.exports=ne}),U=o((d,g)=>{var b=k(),C=T(),M=A(),H=R(),ne=G(),le=Z();function be(Me){var it=this.__data__=new b(Me);this.size=it.size}be.prototype.clear=C,be.prototype.delete=M,be.prototype.get=H,be.prototype.has=ne,be.prototype.set=le,g.exports=be}),xe=o((d,g)=>{var b=X(),C=function(){try{var M=b(Object,"defineProperty");return M({},"",{}),M}catch{}}();g.exports=C}),Ne=o((d,g)=>{var b=xe();function C(M,H,ne){H=="__proto__"&&b?b(M,H,{configurable:!0,enumerable:!0,value:ne,writable:!0}):M[H]=ne}g.exports=C}),Ge=o((d,g)=>{var b=Ne(),C=h();function M(H,ne,le){(le!==void 0&&!C(H[ne],le)||le===void 0&&!(ne in H))&&b(H,ne,le)}g.exports=M}),Se=o((d,g)=>{function b(C){return function(M,H,ne){for(var le=-1,be=Object(M),Me=ne(M),it=Me.length;it--;){var Xe=Me[C?it:++le];if(H(be[Xe],Xe,be)===!1)break}return M}}g.exports=b}),ce=o((d,g)=>{var b=Se(),C=b();g.exports=C}),je=o((d,g)=>{var b=pe(),C=typeof d=="object"&&d&&!d.nodeType&&d,M=C&&typeof g=="object"&&g&&!g.nodeType&&g,H=M&&M.exports===C,ne=H?b.Buffer:void 0,le=ne?ne.allocUnsafe:void 0;function be(Me,it){if(it)return Me.slice();var Xe=Me.length,Pt=le?le(Xe):new Me.constructor(Xe);return Me.copy(Pt),Pt}g.exports=be}),st=o((d,g)=>{var b=pe(),C=b.Uint8Array;g.exports=C}),lt=o((d,g)=>{var b=st();function C(M){var H=new M.constructor(M.byteLength);return new b(H).set(new b(M)),H}g.exports=C}),_t=o((d,g)=>{var b=lt();function C(M,H){var ne=H?b(M.buffer):M.buffer;return new M.constructor(ne,M.byteOffset,M.length)}g.exports=C}),Je=o((d,g)=>{function b(C,M){var H=-1,ne=C.length;for(M||(M=Array(ne));++H<ne;)M[H]=C[H];return M}g.exports=b}),zt=o((d,g)=>{var b=V(),C=Object.create,M=function(){function H(){}return function(ne){if(!b(ne))return{};if(C)return C(ne);H.prototype=ne;var le=new H;return H.prototype=void 0,le}}();g.exports=M}),Xt=o((d,g)=>{function b(C,M){return function(H){return C(M(H))}}g.exports=b}),et=o((d,g)=>{var b=Xt(),C=b(Object.getPrototypeOf,Object);g.exports=C}),ut=o((d,g)=>{var b=Object.prototype;function C(M){var H=M&&M.constructor,ne=typeof H=="function"&&H.prototype||b;return M===ne}g.exports=C}),ot=o((d,g)=>{var b=zt(),C=et(),M=ut();function H(ne){return typeof ne.constructor=="function"&&!M(ne)?b(C(ne)):{}}g.exports=H}),It=o((d,g)=>{function b(C){return C!=null&&typeof C=="object"}g.exports=b}),Jt=o((d,g)=>{var b=Y(),C=It(),M="[object Arguments]";function H(ne){return C(ne)&&b(ne)==M}g.exports=H}),xn=o((d,g)=>{var b=Jt(),C=It(),M=Object.prototype,H=M.hasOwnProperty,ne=M.propertyIsEnumerable,le=b(function(){return arguments}())?b:function(be){return C(be)&&H.call(be,"callee")&&!ne.call(be,"callee")};g.exports=le}),Sn=o((d,g)=>{var b=Array.isArray;g.exports=b}),An=o((d,g)=>{var b=9007199254740991;function C(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=b}g.exports=C}),Zn=o((d,g)=>{var b=N(),C=An();function M(H){return H!=null&&C(H.length)&&!b(H)}g.exports=M}),Cn=o((d,g)=>{var b=Zn(),C=It();function M(H){return C(H)&&b(H)}g.exports=M}),cn=o((d,g)=>{function b(){return!1}g.exports=b}),bn=o((d,g)=>{var b=pe(),C=cn(),M=typeof d=="object"&&d&&!d.nodeType&&d,H=M&&typeof g=="object"&&g&&!g.nodeType&&g,ne=H&&H.exports===M,le=ne?b.Buffer:void 0,be=le?le.isBuffer:void 0,Me=be||C;g.exports=Me}),ir=o((d,g)=>{var b=Y(),C=et(),M=It(),H="[object Object]",ne=Function.prototype,le=Object.prototype,be=ne.toString,Me=le.hasOwnProperty,it=be.call(Object);function Xe(Pt){if(!M(Pt)||b(Pt)!=H)return!1;var Ut=C(Pt);if(Ut===null)return!0;var on=Me.call(Ut,"constructor")&&Ut.constructor;return typeof on=="function"&&on instanceof on&&be.call(on)==it}g.exports=Xe}),hr=o((d,g)=>{var b=Y(),C=An(),M=It(),H="[object Arguments]",ne="[object Array]",le="[object Boolean]",be="[object Date]",Me="[object Error]",it="[object Function]",Xe="[object Map]",Pt="[object Number]",Ut="[object Object]",on="[object RegExp]",Mn="[object Set]",Dn="[object String]",yr="[object WeakMap]",rt="[object ArrayBuffer]",ct="[object DataView]",bt="[object Float32Array]",Wt="[object Float64Array]",At="[object Int8Array]",Vt="[object Int16Array]",Le="[object Int32Array]",Te="[object Uint8Array]",He="[object Uint8ClampedArray]",Ve="[object Uint16Array]",Ke="[object Uint32Array]",Ze={};Ze[bt]=Ze[Wt]=Ze[At]=Ze[Vt]=Ze[Le]=Ze[Te]=Ze[He]=Ze[Ve]=Ze[Ke]=!0,Ze[H]=Ze[ne]=Ze[rt]=Ze[le]=Ze[ct]=Ze[be]=Ze[Me]=Ze[it]=Ze[Xe]=Ze[Pt]=Ze[Ut]=Ze[on]=Ze[Mn]=Ze[Dn]=Ze[yr]=!1;function pt(gt){return M(gt)&&C(gt.length)&&!!Ze[b(gt)]}g.exports=pt}),wr=o((d,g)=>{function b(C){return function(M){return C(M)}}g.exports=b}),Kn=o((d,g)=>{var b=ee(),C=typeof d=="object"&&d&&!d.nodeType&&d,M=C&&typeof g=="object"&&g&&!g.nodeType&&g,H=M&&M.exports===C,ne=H&&b.process,le=function(){try{var be=M&&M.require&&M.require("util").types;return be||ne&&ne.binding&&ne.binding("util")}catch{}}();g.exports=le}),Rr=o((d,g)=>{var b=hr(),C=wr(),M=Kn(),H=M&&M.isTypedArray,ne=H?C(H):b;g.exports=ne}),ms=o((d,g)=>{function b(C,M){if(!(M==="constructor"&&typeof C[M]=="function")&&M!="__proto__")return C[M]}g.exports=b}),Bi=o((d,g)=>{var b=Ne(),C=h(),M=Object.prototype,H=M.hasOwnProperty;function ne(le,be,Me){var it=le[be];(!(H.call(le,be)&&C(it,Me))||Me===void 0&&!(be in le))&&b(le,be,Me)}g.exports=ne}),Vs=o((d,g)=>{var b=Bi(),C=Ne();function M(H,ne,le,be){var Me=!le;le||(le={});for(var it=-1,Xe=ne.length;++it<Xe;){var Pt=ne[it],Ut=be?be(le[Pt],H[Pt],Pt,le,H):void 0;Ut===void 0&&(Ut=H[Pt]),Me?C(le,Pt,Ut):b(le,Pt,Ut)}return le}g.exports=M}),is=o((d,g)=>{function b(C,M){for(var H=-1,ne=Array(C);++H<C;)ne[H]=M(H);return ne}g.exports=b}),Xn=o((d,g)=>{var b=9007199254740991,C=/^(?:0|[1-9]\d*)$/;function M(H,ne){var le=typeof H;return ne=ne??b,!!ne&&(le=="number"||le!="symbol"&&C.test(H))&&H>-1&&H%1==0&&H<ne}g.exports=M}),ss=o((d,g)=>{var b=is(),C=xn(),M=Sn(),H=bn(),ne=Xn(),le=Rr(),be=Object.prototype,Me=be.hasOwnProperty;function it(Xe,Pt){var Ut=M(Xe),on=!Ut&&C(Xe),Mn=!Ut&&!on&&H(Xe),Dn=!Ut&&!on&&!Mn&&le(Xe),yr=Ut||on||Mn||Dn,rt=yr?b(Xe.length,String):[],ct=rt.length;for(var bt in Xe)(Pt||Me.call(Xe,bt))&&!(yr&&(bt=="length"||Mn&&(bt=="offset"||bt=="parent")||Dn&&(bt=="buffer"||bt=="byteLength"||bt=="byteOffset")||ne(bt,ct)))&&rt.push(bt);return rt}g.exports=it}),Et=o((d,g)=>{function b(C){var M=[];if(C!=null)for(var H in Object(C))M.push(H);return M}g.exports=b}),at=o((d,g)=>{var b=V(),C=ut(),M=Et(),H=Object.prototype,ne=H.hasOwnProperty;function le(be){if(!b(be))return M(be);var Me=C(be),it=[];for(var Xe in be)Xe=="constructor"&&(Me||!ne.call(be,Xe))||it.push(Xe);return it}g.exports=le}),Bt=o((d,g)=>{var b=ss(),C=at(),M=Zn();function H(ne){return M(ne)?b(ne,!0):C(ne)}g.exports=H}),Yt=o((d,g)=>{var b=Vs(),C=Bt();function M(H){return b(H,C(H))}g.exports=M}),In=o((d,g)=>{var b=Ge(),C=je(),M=_t(),H=Je(),ne=ot(),le=xn(),be=Sn(),Me=Cn(),it=bn(),Xe=N(),Pt=V(),Ut=ir(),on=Rr(),Mn=ms(),Dn=Yt();function yr(rt,ct,bt,Wt,At,Vt,Le){var Te=Mn(rt,bt),He=Mn(ct,bt),Ve=Le.get(He);if(Ve){b(rt,bt,Ve);return}var Ke=Vt?Vt(Te,He,bt+"",rt,ct,Le):void 0,Ze=Ke===void 0;if(Ze){var pt=be(He),gt=!pt&&it(He),Lt=!pt&&!gt&&on(He);Ke=He,pt||gt||Lt?be(Te)?Ke=Te:Me(Te)?Ke=H(Te):gt?(Ze=!1,Ke=C(He,!0)):Lt?(Ze=!1,Ke=M(He,!0)):Ke=[]:Ut(He)||le(He)?(Ke=Te,le(Te)?Ke=Dn(Te):(!Pt(Te)||Xe(Te))&&(Ke=ne(He))):Ze=!1}Ze&&(Le.set(He,Ke),At(Ke,He,Wt,Vt,Le),Le.delete(He)),b(rt,bt,Ke)}g.exports=yr}),Pn=o((d,g)=>{var b=U(),C=Ge(),M=ce(),H=In(),ne=V(),le=Bt(),be=ms();function Me(it,Xe,Pt,Ut,on){it!==Xe&&M(Xe,function(Mn,Dn){if(on||(on=new b),ne(Mn))H(it,Xe,Dn,Pt,Me,Ut,on);else{var yr=Ut?Ut(be(it,Dn),Mn,Dn+"",it,Xe,on):void 0;yr===void 0&&(yr=Mn),C(it,Dn,yr)}},le)}g.exports=Me}),Er=o((d,g)=>{function b(C){return C}g.exports=b}),Yn=o((d,g)=>{function b(C,M,H){switch(H.length){case 0:return C.call(M);case 1:return C.call(M,H[0]);case 2:return C.call(M,H[0],H[1]);case 3:return C.call(M,H[0],H[1],H[2])}return C.apply(M,H)}g.exports=b}),Ct=o((d,g)=>{var b=Yn(),C=Math.max;function M(H,ne,le){return ne=C(ne===void 0?H.length-1:ne,0),function(){for(var be=arguments,Me=-1,it=C(be.length-ne,0),Xe=Array(it);++Me<it;)Xe[Me]=be[ne+Me];Me=-1;for(var Pt=Array(ne+1);++Me<ne;)Pt[Me]=be[Me];return Pt[ne]=le(Xe),b(H,this,Pt)}}g.exports=M}),mn=o((d,g)=>{function b(C){return function(){return C}}g.exports=b}),Hn=o((d,g)=>{var b=mn(),C=xe(),M=Er(),H=C?function(ne,le){return C(ne,"toString",{configurable:!0,enumerable:!1,value:b(le),writable:!0})}:M;g.exports=H}),en=o((d,g)=>{var b=800,C=16,M=Date.now;function H(ne){var le=0,be=0;return function(){var Me=M(),it=C-(Me-be);if(be=Me,it>0){if(++le>=b)return arguments[0]}else le=0;return ne.apply(void 0,arguments)}}g.exports=H}),ln=o((d,g)=>{var b=Hn(),C=en(),M=C(b);g.exports=M}),Rn=o((d,g)=>{var b=Er(),C=Ct(),M=ln();function H(ne,le){return M(C(ne,le,b),ne+"")}g.exports=H}),vr=o((d,g)=>{var b=h(),C=Zn(),M=Xn(),H=V();function ne(le,be,Me){if(!H(Me))return!1;var it=typeof be;return(it=="number"?C(Me)&&M(be,Me.length):it=="string"&&be in Me)?b(Me[be],le):!1}g.exports=ne}),us=o((d,g)=>{var b=Rn(),C=vr();function M(H){return b(function(ne,le){var be=-1,Me=le.length,it=Me>1?le[Me-1]:void 0,Xe=Me>2?le[2]:void 0;for(it=H.length>3&&typeof it=="function"?(Me--,it):void 0,Xe&&C(le[0],le[1],Xe)&&(it=Me<3?void 0:it,Me=1),ne=Object(ne);++be<Me;){var Pt=le[be];Pt&&H(ne,Pt,be,it)}return ne})}g.exports=M}),En=o((d,g)=>{var b=Pn(),C=us(),M=C(function(H,ne,le){b(H,ne,le)});g.exports=M}),Lr=o((d,g)=>{var b=Y(),C=It(),M="[object Symbol]";function H(ne){return typeof ne=="symbol"||C(ne)&&b(ne)==M}g.exports=H}),Jn=o((d,g)=>{var b=Sn(),C=Lr(),M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/;function ne(le,be){if(b(le))return!1;var Me=typeof le;return Me=="number"||Me=="symbol"||Me=="boolean"||le==null||C(le)?!0:H.test(le)||!M.test(le)||be!=null&&le in Object(be)}g.exports=ne}),Ki=o((d,g)=>{var b=re(),C="Expected a function";function M(H,ne){if(typeof H!="function"||ne!=null&&typeof ne!="function")throw new TypeError(C);var le=function(){var be=arguments,Me=ne?ne.apply(this,be):be[0],it=le.cache;if(it.has(Me))return it.get(Me);var Xe=H.apply(this,be);return le.cache=it.set(Me,Xe)||it,Xe};return le.cache=new(M.Cache||b),le}M.Cache=b,g.exports=M}),fi=o((d,g)=>{var b=Ki(),C=500;function M(H){var ne=b(H,function(be){return le.size===C&&le.clear(),be}),le=ne.cache;return ne}g.exports=M}),pi=o((d,g)=>{var b=fi(),C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,H=b(function(ne){var le=[];return ne.charCodeAt(0)===46&&le.push(""),ne.replace(C,function(be,Me,it,Xe){le.push(it?Xe.replace(M,"$1"):Me||be)}),le});g.exports=H}),$i=o((d,g)=>{function b(C,M){for(var H=-1,ne=C==null?0:C.length,le=Array(ne);++H<ne;)le[H]=M(C[H],H,C);return le}g.exports=b}),Ai=o((d,g)=>{var b=ge(),C=$i(),M=Sn(),H=Lr(),ne=b?b.prototype:void 0,le=ne?ne.toString:void 0;function be(Me){if(typeof Me=="string")return Me;if(M(Me))return C(Me,be)+"";if(H(Me))return le?le.call(Me):"";var it=Me+"";return it=="0"&&1/Me==-1/0?"-0":it}g.exports=be}),Fi=o((d,g)=>{var b=Ai();function C(M){return M==null?"":b(M)}g.exports=C}),ji=o((d,g)=>{var b=Sn(),C=Jn(),M=pi(),H=Fi();function ne(le,be){return b(le)?le:C(le,be)?[le]:M(H(le))}g.exports=ne}),os=o((d,g)=>{var b=Lr();function C(M){if(typeof M=="string"||b(M))return M;var H=M+"";return H=="0"&&1/M==-1/0?"-0":H}g.exports=C}),cs=o((d,g)=>{var b=ji(),C=os();function M(H,ne){ne=b(ne,H);for(var le=0,be=ne.length;H!=null&&le<be;)H=H[C(ne[le++])];return le&&le==be?H:void 0}g.exports=M}),Sr=o((d,g)=>{var b=cs();function C(M,H,ne){var le=M==null?void 0:b(M,H);return le===void 0?ne:le}g.exports=C}),kr=o((d,g)=>{(function(b,C){typeof d=="object"&&typeof g<"u"?g.exports=C():(b=b||self).RBush=C()})(d,function(){function b(rt,ct,bt,Wt,At){(function Vt(Le,Te,He,Ve,Ke){for(;Ve>He;){if(Ve-He>600){var Ze=Ve-He+1,pt=Te-He+1,gt=Math.log(Ze),Lt=.5*Math.exp(2*gt/3),Nt=.5*Math.sqrt(gt*Lt*(Ze-Lt)/Ze)*(pt-Ze/2<0?-1:1),Rt=Math.max(He,Math.floor(Te-pt*Lt/Ze+Nt)),dn=Math.min(Ve,Math.floor(Te+(Ze-pt)*Lt/Ze+Nt));Vt(Le,Te,Rt,dn,Ke)}var Wn=Le[Te],Qn=He,cr=Ve;for(C(Le,He,Te),Ke(Le[Ve],Wn)>0&&C(Le,He,Ve);Qn<cr;){for(C(Le,Qn,cr),Qn++,cr--;Ke(Le[Qn],Wn)<0;)Qn++;for(;Ke(Le[cr],Wn)>0;)cr--}Ke(Le[He],Wn)===0?C(Le,He,cr):C(Le,++cr,Ve),cr<=Te&&(He=cr+1),Te<=cr&&(Ve=cr-1)}})(rt,ct,bt||0,Wt||rt.length-1,At||M)}function C(rt,ct,bt){var Wt=rt[ct];rt[ct]=rt[bt],rt[bt]=Wt}function M(rt,ct){return rt<ct?-1:rt>ct?1:0}var H=function(rt){rt===void 0&&(rt=9),this._maxEntries=Math.max(4,rt),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function ne(rt,ct,bt){if(!bt)return ct.indexOf(rt);for(var Wt=0;Wt<ct.length;Wt++)if(bt(rt,ct[Wt]))return Wt;return-1}function le(rt,ct){be(rt,0,rt.children.length,ct,rt)}function be(rt,ct,bt,Wt,At){At||(At=Dn(null)),At.minX=1/0,At.minY=1/0,At.maxX=-1/0,At.maxY=-1/0;for(var Vt=ct;Vt<bt;Vt++){var Le=rt.children[Vt];Me(At,rt.leaf?Wt(Le):Le)}return At}function Me(rt,ct){return rt.minX=Math.min(rt.minX,ct.minX),rt.minY=Math.min(rt.minY,ct.minY),rt.maxX=Math.max(rt.maxX,ct.maxX),rt.maxY=Math.max(rt.maxY,ct.maxY),rt}function it(rt,ct){return rt.minX-ct.minX}function Xe(rt,ct){return rt.minY-ct.minY}function Pt(rt){return(rt.maxX-rt.minX)*(rt.maxY-rt.minY)}function Ut(rt){return rt.maxX-rt.minX+(rt.maxY-rt.minY)}function on(rt,ct){return rt.minX<=ct.minX&&rt.minY<=ct.minY&&ct.maxX<=rt.maxX&&ct.maxY<=rt.maxY}function Mn(rt,ct){return ct.minX<=rt.maxX&&ct.minY<=rt.maxY&&ct.maxX>=rt.minX&&ct.maxY>=rt.minY}function Dn(rt){return{children:rt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function yr(rt,ct,bt,Wt,At){for(var Vt=[ct,bt];Vt.length;)if(!((bt=Vt.pop())-(ct=Vt.pop())<=Wt)){var Le=ct+Math.ceil((bt-ct)/Wt/2)*Wt;b(rt,Le,ct,bt,At),Vt.push(ct,Le,Le,bt)}}return H.prototype.all=function(){return this._all(this.data,[])},H.prototype.search=function(rt){var ct=this.data,bt=[];if(!Mn(rt,ct))return bt;for(var Wt=this.toBBox,At=[];ct;){for(var Vt=0;Vt<ct.children.length;Vt++){var Le=ct.children[Vt],Te=ct.leaf?Wt(Le):Le;Mn(rt,Te)&&(ct.leaf?bt.push(Le):on(rt,Te)?this._all(Le,bt):At.push(Le))}ct=At.pop()}return bt},H.prototype.collides=function(rt){var ct=this.data;if(!Mn(rt,ct))return!1;for(var bt=[];ct;){for(var Wt=0;Wt<ct.children.length;Wt++){var At=ct.children[Wt],Vt=ct.leaf?this.toBBox(At):At;if(Mn(rt,Vt)){if(ct.leaf||on(rt,Vt))return!0;bt.push(At)}}ct=bt.pop()}return!1},H.prototype.load=function(rt){if(!rt||!rt.length)return this;if(rt.length<this._minEntries){for(var ct=0;ct<rt.length;ct++)this.insert(rt[ct]);return this}var bt=this._build(rt.slice(),0,rt.length-1,0);if(this.data.children.length)if(this.data.height===bt.height)this._splitRoot(this.data,bt);else{if(this.data.height<bt.height){var Wt=this.data;this.data=bt,bt=Wt}this._insert(bt,this.data.height-bt.height-1,!0)}else this.data=bt;return this},H.prototype.insert=function(rt){return rt&&this._insert(rt,this.data.height-1),this},H.prototype.clear=function(){return this.data=Dn([]),this},H.prototype.remove=function(rt,ct){if(!rt)return this;for(var bt,Wt,At,Vt=this.data,Le=this.toBBox(rt),Te=[],He=[];Vt||Te.length;){if(Vt||(Vt=Te.pop(),Wt=Te[Te.length-1],bt=He.pop(),At=!0),Vt.leaf){var Ve=ne(rt,Vt.children,ct);if(Ve!==-1)return Vt.children.splice(Ve,1),Te.push(Vt),this._condense(Te),this}At||Vt.leaf||!on(Vt,Le)?Wt?(bt++,Vt=Wt.children[bt],At=!1):Vt=null:(Te.push(Vt),He.push(bt),bt=0,Wt=Vt,Vt=Vt.children[0])}return this},H.prototype.toBBox=function(rt){return rt},H.prototype.compareMinX=function(rt,ct){return rt.minX-ct.minX},H.prototype.compareMinY=function(rt,ct){return rt.minY-ct.minY},H.prototype.toJSON=function(){return this.data},H.prototype.fromJSON=function(rt){return this.data=rt,this},H.prototype._all=function(rt,ct){for(var bt=[];rt;)rt.leaf?ct.push.apply(ct,rt.children):bt.push.apply(bt,rt.children),rt=bt.pop();return ct},H.prototype._build=function(rt,ct,bt,Wt){var At,Vt=bt-ct+1,Le=this._maxEntries;if(Vt<=Le)return le(At=Dn(rt.slice(ct,bt+1)),this.toBBox),At;Wt||(Wt=Math.ceil(Math.log(Vt)/Math.log(Le)),Le=Math.ceil(Vt/Math.pow(Le,Wt-1))),(At=Dn([])).leaf=!1,At.height=Wt;var Te=Math.ceil(Vt/Le),He=Te*Math.ceil(Math.sqrt(Le));yr(rt,ct,bt,He,this.compareMinX);for(var Ve=ct;Ve<=bt;Ve+=He){var Ke=Math.min(Ve+He-1,bt);yr(rt,Ve,Ke,Te,this.compareMinY);for(var Ze=Ve;Ze<=Ke;Ze+=Te){var pt=Math.min(Ze+Te-1,Ke);At.children.push(this._build(rt,Ze,pt,Wt-1))}}return le(At,this.toBBox),At},H.prototype._chooseSubtree=function(rt,ct,bt,Wt){for(;Wt.push(ct),!ct.leaf&&Wt.length-1!==bt;){for(var At=1/0,Vt=1/0,Le=void 0,Te=0;Te<ct.children.length;Te++){var He=ct.children[Te],Ve=Pt(He),Ke=(Ze=rt,pt=He,(Math.max(pt.maxX,Ze.maxX)-Math.min(pt.minX,Ze.minX))*(Math.max(pt.maxY,Ze.maxY)-Math.min(pt.minY,Ze.minY))-Ve);Ke<Vt?(Vt=Ke,At=Ve<At?Ve:At,Le=He):Ke===Vt&&Ve<At&&(At=Ve,Le=He)}ct=Le||ct.children[0]}var Ze,pt;return ct},H.prototype._insert=function(rt,ct,bt){var Wt=bt?rt:this.toBBox(rt),At=[],Vt=this._chooseSubtree(Wt,this.data,ct,At);for(Vt.children.push(rt),Me(Vt,Wt);ct>=0&&At[ct].children.length>this._maxEntries;)this._split(At,ct),ct--;this._adjustParentBBoxes(Wt,At,ct)},H.prototype._split=function(rt,ct){var bt=rt[ct],Wt=bt.children.length,At=this._minEntries;this._chooseSplitAxis(bt,At,Wt);var Vt=this._chooseSplitIndex(bt,At,Wt),Le=Dn(bt.children.splice(Vt,bt.children.length-Vt));Le.height=bt.height,Le.leaf=bt.leaf,le(bt,this.toBBox),le(Le,this.toBBox),ct?rt[ct-1].children.push(Le):this._splitRoot(bt,Le)},H.prototype._splitRoot=function(rt,ct){this.data=Dn([rt,ct]),this.data.height=rt.height+1,this.data.leaf=!1,le(this.data,this.toBBox)},H.prototype._chooseSplitIndex=function(rt,ct,bt){for(var Wt,At,Vt,Le,Te,He,Ve,Ke=1/0,Ze=1/0,pt=ct;pt<=bt-ct;pt++){var gt=be(rt,0,pt,this.toBBox),Lt=be(rt,pt,bt,this.toBBox),Nt=(At=gt,Vt=Lt,Le=void 0,Te=void 0,He=void 0,Ve=void 0,Le=Math.max(At.minX,Vt.minX),Te=Math.max(At.minY,Vt.minY),He=Math.min(At.maxX,Vt.maxX),Ve=Math.min(At.maxY,Vt.maxY),Math.max(0,He-Le)*Math.max(0,Ve-Te)),Rt=Pt(gt)+Pt(Lt);Nt<Ke?(Ke=Nt,Wt=pt,Ze=Rt<Ze?Rt:Ze):Nt===Ke&&Rt<Ze&&(Ze=Rt,Wt=pt)}return Wt||bt-ct},H.prototype._chooseSplitAxis=function(rt,ct,bt){var Wt=rt.leaf?this.compareMinX:it,At=rt.leaf?this.compareMinY:Xe;this._allDistMargin(rt,ct,bt,Wt)<this._allDistMargin(rt,ct,bt,At)&&rt.children.sort(Wt)},H.prototype._allDistMargin=function(rt,ct,bt,Wt){rt.children.sort(Wt);for(var At=this.toBBox,Vt=be(rt,0,ct,At),Le=be(rt,bt-ct,bt,At),Te=Ut(Vt)+Ut(Le),He=ct;He<bt-ct;He++){var Ve=rt.children[He];Me(Vt,rt.leaf?At(Ve):Ve),Te+=Ut(Vt)}for(var Ke=bt-ct-1;Ke>=ct;Ke--){var Ze=rt.children[Ke];Me(Le,rt.leaf?At(Ze):Ze),Te+=Ut(Le)}return Te},H.prototype._adjustParentBBoxes=function(rt,ct,bt){for(var Wt=bt;Wt>=0;Wt--)Me(ct[Wt],rt)},H.prototype._condense=function(rt){for(var ct=rt.length-1,bt=void 0;ct>=0;ct--)rt[ct].children.length===0?ct>0?(bt=rt[ct-1].children).splice(bt.indexOf(rt[ct]),1):this.clear():le(rt[ct],this.toBBox)},H})}),nr=o(d=>{Object.defineProperty(d,"__esModule",{value:!0}),d.earthRadius=63710088e-1,d.factors={centimeters:d.earthRadius*100,centimetres:d.earthRadius*100,degrees:d.earthRadius/111325,feet:d.earthRadius*3.28084,inches:d.earthRadius*39.37,kilometers:d.earthRadius/1e3,kilometres:d.earthRadius/1e3,meters:d.earthRadius,metres:d.earthRadius,miles:d.earthRadius/1609.344,millimeters:d.earthRadius*1e3,millimetres:d.earthRadius*1e3,nauticalmiles:d.earthRadius/1852,radians:1,yards:d.earthRadius*1.0936},d.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/d.earthRadius,yards:1.0936133},d.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g(Ve,Ke,Ze){Ze===void 0&&(Ze={});var pt={type:"Feature"};return(Ze.id===0||Ze.id)&&(pt.id=Ze.id),Ze.bbox&&(pt.bbox=Ze.bbox),pt.properties=Ke||{},pt.geometry=Ve,pt}d.feature=g;function b(Ve,Ke,Ze){switch(Ve){case"Point":return C(Ke).geometry;case"LineString":return le(Ke).geometry;case"Polygon":return H(Ke).geometry;case"MultiPoint":return Xe(Ke).geometry;case"MultiLineString":return it(Ke).geometry;case"MultiPolygon":return Pt(Ke).geometry;default:throw new Error(Ve+" is invalid")}}d.geometry=b;function C(Ve,Ke,Ze){if(Ze===void 0&&(Ze={}),!Ve)throw new Error("coordinates is required");if(!Array.isArray(Ve))throw new Error("coordinates must be an Array");if(Ve.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Vt(Ve[0])||!Vt(Ve[1]))throw new Error("coordinates must contain numbers");var pt={type:"Point",coordinates:Ve};return g(pt,Ke,Ze)}d.point=C;function M(Ve,Ke,Ze){return Ze===void 0&&(Ze={}),Me(Ve.map(function(pt){return C(pt,Ke)}),Ze)}d.points=M;function H(Ve,Ke,Ze){Ze===void 0&&(Ze={});for(var pt=0,gt=Ve;pt<gt.length;pt++){var Lt=gt[pt];if(Lt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Nt=0;Nt<Lt[Lt.length-1].length;Nt++)if(Lt[Lt.length-1][Nt]!==Lt[0][Nt])throw new Error("First and last Position are not equivalent.")}var Rt={type:"Polygon",coordinates:Ve};return g(Rt,Ke,Ze)}d.polygon=H;function ne(Ve,Ke,Ze){return Ze===void 0&&(Ze={}),Me(Ve.map(function(pt){return H(pt,Ke)}),Ze)}d.polygons=ne;function le(Ve,Ke,Ze){if(Ze===void 0&&(Ze={}),Ve.length<2)throw new Error("coordinates must be an array of two or more positions");var pt={type:"LineString",coordinates:Ve};return g(pt,Ke,Ze)}d.lineString=le;function be(Ve,Ke,Ze){return Ze===void 0&&(Ze={}),Me(Ve.map(function(pt){return le(pt,Ke)}),Ze)}d.lineStrings=be;function Me(Ve,Ke){Ke===void 0&&(Ke={});var Ze={type:"FeatureCollection"};return Ke.id&&(Ze.id=Ke.id),Ke.bbox&&(Ze.bbox=Ke.bbox),Ze.features=Ve,Ze}d.featureCollection=Me;function it(Ve,Ke,Ze){Ze===void 0&&(Ze={});var pt={type:"MultiLineString",coordinates:Ve};return g(pt,Ke,Ze)}d.multiLineString=it;function Xe(Ve,Ke,Ze){Ze===void 0&&(Ze={});var pt={type:"MultiPoint",coordinates:Ve};return g(pt,Ke,Ze)}d.multiPoint=Xe;function Pt(Ve,Ke,Ze){Ze===void 0&&(Ze={});var pt={type:"MultiPolygon",coordinates:Ve};return g(pt,Ke,Ze)}d.multiPolygon=Pt;function Ut(Ve,Ke,Ze){Ze===void 0&&(Ze={});var pt={type:"GeometryCollection",geometries:Ve};return g(pt,Ke,Ze)}d.geometryCollection=Ut;function on(Ve,Ke){if(Ke===void 0&&(Ke=0),Ke&&!(Ke>=0))throw new Error("precision must be a positive number");var Ze=Math.pow(10,Ke||0);return Math.round(Ve*Ze)/Ze}d.round=on;function Mn(Ve,Ke){Ke===void 0&&(Ke="kilometers");var Ze=d.factors[Ke];if(!Ze)throw new Error(Ke+" units is invalid");return Ve*Ze}d.radiansToLength=Mn;function Dn(Ve,Ke){Ke===void 0&&(Ke="kilometers");var Ze=d.factors[Ke];if(!Ze)throw new Error(Ke+" units is invalid");return Ve/Ze}d.lengthToRadians=Dn;function yr(Ve,Ke){return ct(Dn(Ve,Ke))}d.lengthToDegrees=yr;function rt(Ve){var Ke=Ve%360;return Ke<0&&(Ke+=360),Ke}d.bearingToAzimuth=rt;function ct(Ve){var Ke=Ve%(2*Math.PI);return Ke*180/Math.PI}d.radiansToDegrees=ct;function bt(Ve){var Ke=Ve%360;return Ke*Math.PI/180}d.degreesToRadians=bt;function Wt(Ve,Ke,Ze){if(Ke===void 0&&(Ke="kilometers"),Ze===void 0&&(Ze="kilometers"),!(Ve>=0))throw new Error("length must be a positive number");return Mn(Dn(Ve,Ke),Ze)}d.convertLength=Wt;function At(Ve,Ke,Ze){if(Ke===void 0&&(Ke="meters"),Ze===void 0&&(Ze="kilometers"),!(Ve>=0))throw new Error("area must be a positive number");var pt=d.areaFactors[Ke];if(!pt)throw new Error("invalid original units");var gt=d.areaFactors[Ze];if(!gt)throw new Error("invalid final units");return Ve/pt*gt}d.convertArea=At;function Vt(Ve){return!isNaN(Ve)&&Ve!==null&&!Array.isArray(Ve)}d.isNumber=Vt;function Le(Ve){return!!Ve&&Ve.constructor===Object}d.isObject=Le;function Te(Ve){if(!Ve)throw new Error("bbox is required");if(!Array.isArray(Ve))throw new Error("bbox must be an Array");if(Ve.length!==4&&Ve.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Ve.forEach(function(Ke){if(!Vt(Ke))throw new Error("bbox must only contain numbers")})}d.validateBBox=Te;function He(Ve){if(!Ve)throw new Error("id is required");if(["string","number"].indexOf(typeof Ve)===-1)throw new Error("id must be a number or a string")}d.validateId=He}),to=o(d=>{Object.defineProperty(d,"__esModule",{value:!0});var g=nr();function b(ct,bt,Wt){if(ct!==null)for(var At,Vt,Le,Te,He,Ve,Ke,Ze=0,pt=0,gt,Lt=ct.type,Nt=Lt==="FeatureCollection",Rt=Lt==="Feature",dn=Nt?ct.features.length:1,Wn=0;Wn<dn;Wn++){Ke=Nt?ct.features[Wn].geometry:Rt?ct.geometry:ct,gt=Ke?Ke.type==="GeometryCollection":!1,He=gt?Ke.geometries.length:1;for(var Qn=0;Qn<He;Qn++){var cr=0,vi=0;if(Te=gt?Ke.geometries[Qn]:Ke,Te!==null){Ve=Te.coordinates;var Ii=Te.type;switch(Ze=Wt&&(Ii==="Polygon"||Ii==="MultiPolygon")?1:0,Ii){case null:break;case"Point":if(bt(Ve,pt,Wn,cr,vi)===!1)return!1;pt++,cr++;break;case"LineString":case"MultiPoint":for(At=0;At<Ve.length;At++){if(bt(Ve[At],pt,Wn,cr,vi)===!1)return!1;pt++,Ii==="MultiPoint"&&cr++}Ii==="LineString"&&cr++;break;case"Polygon":case"MultiLineString":for(At=0;At<Ve.length;At++){for(Vt=0;Vt<Ve[At].length-Ze;Vt++){if(bt(Ve[At][Vt],pt,Wn,cr,vi)===!1)return!1;pt++}Ii==="MultiLineString"&&cr++,Ii==="Polygon"&&vi++}Ii==="Polygon"&&cr++;break;case"MultiPolygon":for(At=0;At<Ve.length;At++){for(vi=0,Vt=0;Vt<Ve[At].length;Vt++){for(Le=0;Le<Ve[At][Vt].length-Ze;Le++){if(bt(Ve[At][Vt][Le],pt,Wn,cr,vi)===!1)return!1;pt++}vi++}cr++}break;case"GeometryCollection":for(At=0;At<Te.geometries.length;At++)if(b(Te.geometries[At],bt,Wt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function C(ct,bt,Wt,At){var Vt=Wt;return b(ct,function(Le,Te,He,Ve,Ke){Te===0&&Wt===void 0?Vt=Le:Vt=bt(Vt,Le,Te,He,Ve,Ke)},At),Vt}function M(ct,bt){var Wt;switch(ct.type){case"FeatureCollection":for(Wt=0;Wt<ct.features.length&&bt(ct.features[Wt].properties,Wt)!==!1;Wt++);break;case"Feature":bt(ct.properties,0);break}}function H(ct,bt,Wt){var At=Wt;return M(ct,function(Vt,Le){Le===0&&Wt===void 0?At=Vt:At=bt(At,Vt,Le)}),At}function ne(ct,bt){if(ct.type==="Feature")bt(ct,0);else if(ct.type==="FeatureCollection")for(var Wt=0;Wt<ct.features.length&&bt(ct.features[Wt],Wt)!==!1;Wt++);}function le(ct,bt,Wt){var At=Wt;return ne(ct,function(Vt,Le){Le===0&&Wt===void 0?At=Vt:At=bt(At,Vt,Le)}),At}function be(ct){var bt=[];return b(ct,function(Wt){bt.push(Wt)}),bt}function Me(ct,bt){var Wt,At,Vt,Le,Te,He,Ve,Ke,Ze,pt,gt=0,Lt=ct.type==="FeatureCollection",Nt=ct.type==="Feature",Rt=Lt?ct.features.length:1;for(Wt=0;Wt<Rt;Wt++){for(He=Lt?ct.features[Wt].geometry:Nt?ct.geometry:ct,Ke=Lt?ct.features[Wt].properties:Nt?ct.properties:{},Ze=Lt?ct.features[Wt].bbox:Nt?ct.bbox:void 0,pt=Lt?ct.features[Wt].id:Nt?ct.id:void 0,Ve=He?He.type==="GeometryCollection":!1,Te=Ve?He.geometries.length:1,Vt=0;Vt<Te;Vt++){if(Le=Ve?He.geometries[Vt]:He,Le===null){if(bt(null,gt,Ke,Ze,pt)===!1)return!1;continue}switch(Le.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(bt(Le,gt,Ke,Ze,pt)===!1)return!1;break}case"GeometryCollection":{for(At=0;At<Le.geometries.length;At++)if(bt(Le.geometries[At],gt,Ke,Ze,pt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}gt++}}function it(ct,bt,Wt){var At=Wt;return Me(ct,function(Vt,Le,Te,He,Ve){Le===0&&Wt===void 0?At=Vt:At=bt(At,Vt,Le,Te,He,Ve)}),At}function Xe(ct,bt){Me(ct,function(Wt,At,Vt,Le,Te){var He=Wt===null?null:Wt.type;switch(He){case null:case"Point":case"LineString":case"Polygon":return bt(g.feature(Wt,Vt,{bbox:Le,id:Te}),At,0)===!1?!1:void 0}var Ve;switch(He){case"MultiPoint":Ve="Point";break;case"MultiLineString":Ve="LineString";break;case"MultiPolygon":Ve="Polygon";break}for(var Ke=0;Ke<Wt.coordinates.length;Ke++){var Ze=Wt.coordinates[Ke],pt={type:Ve,coordinates:Ze};if(bt(g.feature(pt,Vt),At,Ke)===!1)return!1}})}function Pt(ct,bt,Wt){var At=Wt;return Xe(ct,function(Vt,Le,Te){Le===0&&Te===0&&Wt===void 0?At=Vt:At=bt(At,Vt,Le,Te)}),At}function Ut(ct,bt){Xe(ct,function(Wt,At,Vt){var Le=0;if(Wt.geometry){var Te=Wt.geometry.type;if(!(Te==="Point"||Te==="MultiPoint")){var He,Ve=0,Ke=0,Ze=0;if(b(Wt,function(pt,gt,Lt,Nt,Rt){if(He===void 0||At>Ve||Nt>Ke||Rt>Ze){He=pt,Ve=At,Ke=Nt,Ze=Rt,Le=0;return}var dn=g.lineString([He,pt],Wt.properties);if(bt(dn,At,Vt,Rt,Le)===!1)return!1;Le++,He=pt})===!1)return!1}}})}function on(ct,bt,Wt){var At=Wt,Vt=!1;return Ut(ct,function(Le,Te,He,Ve,Ke){Vt===!1&&Wt===void 0?At=Le:At=bt(At,Le,Te,He,Ve,Ke),Vt=!0}),At}function Mn(ct,bt){if(!ct)throw new Error("geojson is required");Xe(ct,function(Wt,At,Vt){if(Wt.geometry!==null){var Le=Wt.geometry.type,Te=Wt.geometry.coordinates;switch(Le){case"LineString":if(bt(Wt,At,Vt,0,0)===!1)return!1;break;case"Polygon":for(var He=0;He<Te.length;He++)if(bt(g.lineString(Te[He],Wt.properties),At,Vt,He)===!1)return!1;break}}})}function Dn(ct,bt,Wt){var At=Wt;return Mn(ct,function(Vt,Le,Te,He){Le===0&&Wt===void 0?At=Vt:At=bt(At,Vt,Le,Te,He)}),At}function yr(ct,bt){if(bt=bt||{},!g.isObject(bt))throw new Error("options is invalid");var Wt=bt.featureIndex||0,At=bt.multiFeatureIndex||0,Vt=bt.geometryIndex||0,Le=bt.segmentIndex||0,Te=bt.properties,He;switch(ct.type){case"FeatureCollection":Wt<0&&(Wt=ct.features.length+Wt),Te=Te||ct.features[Wt].properties,He=ct.features[Wt].geometry;break;case"Feature":Te=Te||ct.properties,He=ct.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":He=ct;break;default:throw new Error("geojson is invalid")}if(He===null)return null;var Ve=He.coordinates;switch(He.type){case"Point":case"MultiPoint":return null;case"LineString":return Le<0&&(Le=Ve.length+Le-1),g.lineString([Ve[Le],Ve[Le+1]],Te,bt);case"Polygon":return Vt<0&&(Vt=Ve.length+Vt),Le<0&&(Le=Ve[Vt].length+Le-1),g.lineString([Ve[Vt][Le],Ve[Vt][Le+1]],Te,bt);case"MultiLineString":return At<0&&(At=Ve.length+At),Le<0&&(Le=Ve[At].length+Le-1),g.lineString([Ve[At][Le],Ve[At][Le+1]],Te,bt);case"MultiPolygon":return At<0&&(At=Ve.length+At),Vt<0&&(Vt=Ve[At].length+Vt),Le<0&&(Le=Ve[At][Vt].length-Le-1),g.lineString([Ve[At][Vt][Le],Ve[At][Vt][Le+1]],Te,bt)}throw new Error("geojson is invalid")}function rt(ct,bt){if(bt=bt||{},!g.isObject(bt))throw new Error("options is invalid");var Wt=bt.featureIndex||0,At=bt.multiFeatureIndex||0,Vt=bt.geometryIndex||0,Le=bt.coordIndex||0,Te=bt.properties,He;switch(ct.type){case"FeatureCollection":Wt<0&&(Wt=ct.features.length+Wt),Te=Te||ct.features[Wt].properties,He=ct.features[Wt].geometry;break;case"Feature":Te=Te||ct.properties,He=ct.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":He=ct;break;default:throw new Error("geojson is invalid")}if(He===null)return null;var Ve=He.coordinates;switch(He.type){case"Point":return g.point(Ve,Te,bt);case"MultiPoint":return At<0&&(At=Ve.length+At),g.point(Ve[At],Te,bt);case"LineString":return Le<0&&(Le=Ve.length+Le),g.point(Ve[Le],Te,bt);case"Polygon":return Vt<0&&(Vt=Ve.length+Vt),Le<0&&(Le=Ve[Vt].length+Le),g.point(Ve[Vt][Le],Te,bt);case"MultiLineString":return At<0&&(At=Ve.length+At),Le<0&&(Le=Ve[At].length+Le),g.point(Ve[At][Le],Te,bt);case"MultiPolygon":return At<0&&(At=Ve.length+At),Vt<0&&(Vt=Ve[At].length+Vt),Le<0&&(Le=Ve[At][Vt].length-Le),g.point(Ve[At][Vt][Le],Te,bt)}throw new Error("geojson is invalid")}d.coordAll=be,d.coordEach=b,d.coordReduce=C,d.featureEach=ne,d.featureReduce=le,d.findPoint=rt,d.findSegment=yr,d.flattenEach=Xe,d.flattenReduce=Pt,d.geomEach=Me,d.geomReduce=it,d.lineEach=Mn,d.lineReduce=Dn,d.propEach=M,d.propReduce=H,d.segmentEach=Ut,d.segmentReduce=on}),no=o(d=>{Object.defineProperty(d,"__esModule",{value:!0});var g=to();function b(C){var M=[1/0,1/0,-1/0,-1/0];return g.coordEach(C,function(H){M[0]>H[0]&&(M[0]=H[0]),M[1]>H[1]&&(M[1]=H[1]),M[2]<H[0]&&(M[2]=H[0]),M[3]<H[1]&&(M[3]=H[1])}),M}b.default=b,d.default=b}),Bs=o((d,g)=>{var b=kr(),C=nr(),M=to(),H=no().default,ne=M.featureEach;M.coordEach,C.polygon;var le=C.featureCollection;function be(Me){var it=new b(Me);return it.insert=function(Xe){if(Xe.type!=="Feature")throw new Error("invalid feature");return Xe.bbox=Xe.bbox?Xe.bbox:H(Xe),b.prototype.insert.call(this,Xe)},it.load=function(Xe){var Pt=[];return Array.isArray(Xe)?Xe.forEach(function(Ut){if(Ut.type!=="Feature")throw new Error("invalid features");Ut.bbox=Ut.bbox?Ut.bbox:H(Ut),Pt.push(Ut)}):ne(Xe,function(Ut){if(Ut.type!=="Feature")throw new Error("invalid features");Ut.bbox=Ut.bbox?Ut.bbox:H(Ut),Pt.push(Ut)}),b.prototype.load.call(this,Pt)},it.remove=function(Xe,Pt){if(Xe.type!=="Feature")throw new Error("invalid feature");return Xe.bbox=Xe.bbox?Xe.bbox:H(Xe),b.prototype.remove.call(this,Xe,Pt)},it.clear=function(){return b.prototype.clear.call(this)},it.search=function(Xe){var Pt=b.prototype.search.call(this,this.toBBox(Xe));return le(Pt)},it.collides=function(Xe){return b.prototype.collides.call(this,this.toBBox(Xe))},it.all=function(){var Xe=b.prototype.all.call(this);return le(Xe)},it.toJSON=function(){return b.prototype.toJSON.call(this)},it.fromJSON=function(Xe){return b.prototype.fromJSON.call(this,Xe)},it.toBBox=function(Xe){var Pt;if(Xe.bbox)Pt=Xe.bbox;else if(Array.isArray(Xe)&&Xe.length===4)Pt=Xe;else if(Array.isArray(Xe)&&Xe.length===6)Pt=[Xe[0],Xe[1],Xe[3],Xe[4]];else if(Xe.type==="Feature")Pt=H(Xe);else if(Xe.type==="FeatureCollection")Pt=H(Xe);else throw new Error("invalid geojson");return{minX:Pt[0],minY:Pt[1],maxX:Pt[2],maxY:Pt[3]}},it}g.exports=be,g.exports.default=be});Array.prototype.findIndex=Array.prototype.findIndex||function(d){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var g=Object(this),b=g.length>>>0,C=arguments[1],M=0;M<b;M++)if(d.call(C,g[M],M,g))return M;return-1},Array.prototype.find=Array.prototype.find||function(d){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var g=Object(this),b=g.length>>>0,C=arguments[1],M=0;M<b;M++){var H=g[M];if(d.call(C,H,M,g))return H}},typeof Object.assign!="function"&&(Object.assign=function(d){if(d==null)throw new TypeError("Cannot convert undefined or null to object");d=Object(d);for(var g=1;g<arguments.length;g++){var b=arguments[g];if(b!=null)for(var C in b)Object.prototype.hasOwnProperty.call(b,C)&&(d[C]=b[C])}return d}),function(d){d.forEach(function(g){g.hasOwnProperty("remove")||Object.defineProperty(g,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(d,g){if(this==null)throw new TypeError('"this" is null or not defined');var b=Object(this),C=b.length>>>0;if(C===0)return!1;var M=g|0,H=Math.max(M>=0?M:C-Math.abs(M),0);function ne(le,be){return le===be||typeof le=="number"&&typeof be=="number"&&isNaN(le)&&isNaN(be)}for(;H<C;){if(ne(b[H],d))return!0;H++}return!1}});var Ko={version:"2.18.3"},_r=l(En()),$r={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},er={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},di={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},oi={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Hs={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Pa={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},ha={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Zi={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Re={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},qe={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},dt={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},qt={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},pn={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Vn={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},xr={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Ti={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Ui={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},ds={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Ei={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},Dc={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Au={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},Pr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},Dr={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},fa={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},ai={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Qu={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Nl={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Rl=pn,pa={en:$r,de:er,it:di,id:oi,ro:Hs,ru:Pa,es:ha,nl:Zi,fr:Re,pt:Rl,pt_br:qt,pt_pt:pn,zh:qe,zh_tw:dt,pl:Vn,sv:xr,el:Ti,hu:Ui,da:ds,no:Ei,fa:Dc,ua:Au,tr:Pr,cz:Dr,ja:fa,fi:ai,ko:Qu,ky:Nl},ml={_globalEditModeEnabled:!1,enableGlobalEditMode(d){let g={...d};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(b=>{this._isRelevantForEdit(b)&&b.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(d=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(d)},handleLayerAdditionInGlobalEditMode(){let d=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let g in d){let b=d[g];this._isRelevantForEdit(b)&&b.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:d}){this._addedLayersEdit[L.stamp(d)]=d},_isRelevantForEdit(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowEditing}},ec=ml,uu={_globalDragModeEnabled:!1,enableGlobalDragMode(){let d=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},d.forEach(g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let d=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,d.forEach(g=>{g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let d=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let g in d){let b=d[g];this._isRelevantForDrag(b)&&b.pm.enableLayerDrag()}},_layerAddedDrag({layer:d}){this._addedLayersDrag[L.stamp(d)]=d},_isRelevantForDrag(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.draggable}},Ar=uu,Yr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(d=>{this._isRelevantForRemoval(d)&&(d.pm.enabled()&&d.pm.disable(),d.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(d=>{d.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(d){let g=d.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let d=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let g in d){let b=d[g];this._isRelevantForRemoval(b)&&(b.pm.enabled()&&b.pm.disable(),b.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:d}){this._addedLayersRemoval[L.stamp(d)]=d}},vl=Yr,Ic={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(d=>d instanceof L.Polyline).forEach(d=>{this._isRelevantForRotate(d)&&d.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(d=>d instanceof L.Polyline).forEach(d=>{d.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(d){return d.pm&&d instanceof L.Polyline&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let d=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in d){let b=d[g];this._isRelevantForRemoval(b)&&b.pm.enableRotate()}},_layerAddedRotate({layer:d}){this._addedLayersRotate[L.stamp(d)]=d}},cu=Ic,Tu=l(En()),Bl={_fireDrawStart(d="Draw",g={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},d,g)},_fireDrawEnd(d="Draw",g={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},d,g)},_fireCreate(d,g="Draw",b={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:d,layer:d},g,b)},_fireCenterPlaced(d="Draw",g={}){let b=d==="Draw"?this._layer:void 0,C=d!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:b,layer:C,latlng:this._layer.getLatLng()},d,g)},_fireCut(d,g,b,C="Draw",M={}){this.__fire(d,"pm:cut",{shape:this._shape,layer:g,originalLayer:b},C,M)},_fireEdit(d=this._layer,g="Edit",b={}){this.__fire(d,"pm:edit",{layer:this._layer,shape:this.getShape()},g,b)},_fireEnable(d="Edit",g={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},d,g)},_fireDisable(d="Edit",g={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},d,g)},_fireUpdate(d="Edit",g={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},d,g)},_fireMarkerDragStart(d,g=void 0,b="Edit",C={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:g},b,C)},_fireMarkerDrag(d,g=void 0,b="Edit",C={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:g},b,C)},_fireMarkerDragEnd(d,g=void 0,b=void 0,C="Edit",M={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:g,intersectionReset:b},C,M)},_fireDragStart(d="Edit",g={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},d,g)},_fireDrag(d,g="Edit",b={}){this.__fire(this._layer,"pm:drag",{...d,shape:this.getShape()},g,b)},_fireDragEnd(d="Edit",g={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},d,g)},_fireDragEnable(d="Edit",g={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},d,g)},_fireDragDisable(d="Edit",g={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},d,g)},_fireRemove(d,g=d,b="Edit",C={}){this.__fire(d,"pm:remove",{layer:g,shape:this.getShape()},b,C)},_fireVertexAdded(d,g,b,C="Edit",M={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:d,indexPath:g,latlng:b,shape:this.getShape()},C,M)},_fireVertexRemoved(d,g,b="Edit",C={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:d,indexPath:g,shape:this.getShape()},b,C)},_fireVertexClick(d,g,b="Edit",C={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:d,indexPath:g,shape:this.getShape()},b,C)},_fireIntersect(d,g=this._layer,b="Edit",C={}){this.__fire(g,"pm:intersect",{layer:this._layer,intersection:d,shape:this.getShape()},b,C)},_fireLayerReset(d,g,b="Edit",C={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:d,indexPath:g,shape:this.getShape()},b,C)},_fireChange(d,g="Edit",b={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:d,shape:this.getShape()},g,b)},_fireTextChange(d,g="Edit",b={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:d,shape:this.getShape()},g,b)},_fireTextFocus(d="Edit",g={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},d,g)},_fireTextBlur(d="Edit",g={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},d,g)},_fireSnapDrag(d,g,b="Snapping",C={}){this.__fire(d,"pm:snapdrag",g,b,C)},_fireSnap(d,g,b="Snapping",C={}){this.__fire(d,"pm:snap",g,b,C)},_fireUnsnap(d,g,b="Snapping",C={}){this.__fire(d,"pm:unsnap",g,b,C)},_fireRotationEnable(d,g,b="Rotation",C={}){this.__fire(d,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},b,C)},_fireRotationDisable(d,g="Rotation",b={}){this.__fire(d,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,b)},_fireRotationStart(d,g,b="Rotation",C={}){this.__fire(d,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},b,C)},_fireRotation(d,g,b,C=this._rotationLayer,M="Rotation",H={}){this.__fire(d,"pm:rotate",{layer:C,helpLayer:this._layer,startAngle:this._startAngle,angle:C.pm.getAngle(),angleDiff:g,oldLatLngs:b,newLatLngs:C.getLatLngs()},M,H)},_fireRotationEnd(d,g,b,C="Rotation",M={}){this.__fire(d,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:b,newLatLngs:this._rotationLayer.getLatLngs()},C,M)},_fireActionClick(d,g,b,C="Toolbar",M={}){this.__fire(this._map,"pm:actionclick",{text:d.text,action:d,btnName:g,button:b},C,M)},_fireButtonClick(d,g,b="Toolbar",C={}){this.__fire(this._map,"pm:buttonclick",{btnName:d,button:g},b,C)},_fireLangChange(d,g,b,C,M="Global",H={}){this.__fire(this.map,"pm:langchange",{oldLang:d,activeLang:g,fallback:b,translations:C},M,H)},_fireGlobalDragModeToggled(d,g="Global",b={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:d,map:this.map},g,b)},_fireGlobalEditModeToggled(d,g="Global",b={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:d,map:this.map},g,b)},_fireGlobalRemovalModeToggled(d,g="Global",b={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:d,map:this.map},g,b)},_fireGlobalCutModeToggled(d="Global",g={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},d,g)},_fireGlobalDrawModeToggled(d="Global",g={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},d,g)},_fireGlobalRotateModeToggled(d="Global",g={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},d,g)},_fireRemoveLayerGroup(d,g=d,b="Edit",C={}){this.__fire(d,"pm:remove",{layer:g,shape:void 0},b,C)},_fireKeyeventEvent(d,g,b,C="Global",M={}){this.__fire(this.map,"pm:keyevent",{event:d,eventType:g,focusOn:b},C,M)},__fire(d,g,b,C,M={}){b=(0,Tu.default)(b,M,{source:C}),L.PM.Utils._fireEvent(d,g,b)}},du=Bl,Du=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(d){this.map=d,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),d.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(d){let g="document";this.map.getContainer().contains(d.target)&&(g="map");let b={event:d,eventType:d.type,focusOn:g};this._lastEvents[d.type]=b,this._lastEvents.current=b,this.map.pm._fireKeyeventEvent(d,d.type,g)},_onBlur(d){d.altKey=!1;let g={event:d,eventType:d.type,focusOn:"document"};this._lastEvents[d.type]=g,this._lastEvents.current=g},getLastKeyEvent(d="current"){return this._lastEvents[d]},isShiftKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.shiftKey},isAltKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.altKey},isCtrlKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.ctrlKey},isMetaKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.metaKey},getPressedKey(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.key}}),Jr=Du,ys=l(Sr());function gr(d){let g=L.PM.activeLang;return(0,ys.default)(pa[g],d)||(0,ys.default)(pa.en,d)||d}function _s(d){for(let g=0;g<d.length;g+=1){let b=d[g];if(Array.isArray(b)){if(_s(b))return!0}else if(b!=null&&b!=="")return!0}return!1}function Fl(d){return d.reduce((g,b)=>{if(b.length!==0){let C=Array.isArray(b)?Fl(b):b;Array.isArray(C)?C.length!==0&&g.push(C):g.push(C)}return g},[])}function Ha(d,g,b){let C={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:M,b:H,f:ne}=C,le=d.lng,be=d.lat,Me=b,it=Math.PI,Xe=g*it/180,Pt=Math.sin(Xe),Ut=Math.cos(Xe),on=(1-ne)*Math.tan(be*it/180),Mn=1/Math.sqrt(1+on*on),Dn=on*Mn,yr=Math.atan2(on,Ut),rt=Mn*Pt,ct=1-rt*rt,bt=ct*(M*M-H*H)/(H*H),Wt=1+bt/16384*(4096+bt*(-768+bt*(320-175*bt))),At=bt/1024*(256+bt*(-128+bt*(74-47*bt))),Vt=Me/(H*Wt),Le=2*Math.PI,Te,He,Ve;for(;Math.abs(Vt-Le)>1e-12;){Te=Math.cos(2*yr+Vt),He=Math.sin(Vt),Ve=Math.cos(Vt);let dn=At*He*(Te+At/4*(Ve*(-1+2*Te*Te)-At/6*Te*(-3+4*He*He)*(-3+4*Te*Te)));Le=Vt,Vt=Me/(H*Wt)+dn}let Ke=Dn*He-Mn*Ve*Ut,Ze=Math.atan2(Dn*Ve+Mn*He*Ut,(1-ne)*Math.sqrt(rt*rt+Ke*Ke)),pt=Math.atan2(He*Pt,Mn*Ve-Dn*He*Ut),gt=ne/16*ct*(4+ne*(4-3*ct)),Lt=pt-(1-gt)*ne*rt*(Vt+gt*He*(Te+gt*Ve*(-1+2*Te*Te))),Nt=le+Lt*180/it,Rt=Ze*180/it;return L.latLng(Nt,Rt)}function Xi(d,g,b,C,M=!0){let H,ne,le,be=[];for(let Me=0;Me<b;Me+=1){if(M)H=Me*360/b+C,ne=Ha(d,H,g),le=L.latLng(ne.lng,ne.lat);else{let it=d.lat+Math.cos(2*Me*Math.PI/b)*g,Xe=d.lng+Math.sin(2*Me*Math.PI/b)*g;le=L.latLng(it,Xe)}be.push(le)}return be}function Iu(d,g,b){g=(g+360)%360;let C=Math.PI/180,M=180/Math.PI,{R:H}=L.CRS.Earth,ne=d.lng*C,le=d.lat*C,be=g*C,Me=Math.sin(le),it=Math.cos(le),Xe=Math.cos(b/H),Pt=Math.sin(b/H),Ut=Math.asin(Me*Xe+it*Pt*Math.cos(be)),on=ne+Math.atan2(Math.sin(be)*Pt*it,Xe-Me*Math.sin(Ut));on*=M;let Mn=on-360,Dn=on<-180?on+360:on;return on=on>180?Mn:Dn,L.latLng([Ut*M,on])}function Ma(d,g,b){let C=d.latLngToContainerPoint(g),M=d.latLngToContainerPoint(b),H=Math.atan2(M.y-C.y,M.x-C.x)*180/Math.PI+90;return H+=H<0?360:0,H}function hu(d,g,b,C){let M=Ma(d,g,b);return Iu(g,M,C)}function fu(d,g,b="asc"){if(!g||Object.keys(g).length===0)return(be,Me)=>be-Me;let C=Object.keys(g),M,H=C.length-1,ne={};for(;H>=0;)M=C[H],ne[M.toLowerCase()]=g[M],H-=1;function le(be){if(be instanceof L.Marker)return"Marker";if(be instanceof L.Circle)return"Circle";if(be instanceof L.CircleMarker)return"CircleMarker";if(be instanceof L.Rectangle)return"Rectangle";if(be instanceof L.Polygon)return"Polygon";if(be instanceof L.Polyline)return"Line"}return(be,Me)=>{let it,Xe;if(it=le(be.layer).toLowerCase(),Xe=le(Me.layer).toLowerCase(),!it||!Xe)return 0;let Pt=it in ne?ne[it]:Number.MAX_SAFE_INTEGER,Ut=Xe in ne?ne[Xe]:Number.MAX_SAFE_INTEGER,on=0;return Pt<Ut?on=-1:Pt>Ut&&(on=1),b==="desc"?on*-1:on}}function ra(d,g=d.getLatLngs()){return d instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function pu(d,g){var b,C,M,H;if((C=(b=g.options.crs)==null?void 0:b.projection)!=null&&C.MAX_LATITUDE){let ne=(H=(M=g.options.crs)==null?void 0:M.projection)==null?void 0:H.MAX_LATITUDE;d.lat=Math.max(Math.min(ne,d.lat),-ne)}return d}function bi(d){return d.options.renderer||d._map&&(d._map._getPaneRenderer(d.options.pane)||d._map.options.renderer||d._map._renderer)||d._renderer}var Oc=L.Class.extend({includes:[ec,Ar,vl,cu,du],initialize(d){this.map=d,this.Draw=new L.PM.Draw(d),this.Toolbar=new L.PM.Toolbar(d),this.Keyboard=Jr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(d)},setLang(d="en",g,b="en"){if(d=d.trim().toLowerCase(),!/^[a-z]{2}$/.test(d)){let M=d.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(M){let H=[`${M[1]}_${M[2]}`,`${M[1]}`];for(let ne of H)if(pa[ne]){d=ne;break}}}let C=L.PM.activeLang;g&&(pa[d]=(0,_r.default)(pa[b],g)),L.PM.activeLang=d,this.map.pm.Toolbar.reinit(),this._fireLangChange(C,d,b,pa[d])},addControls(d){this.Toolbar.addControls(d)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(d="Polygon",g){d==="Poly"&&(d="Polygon"),this.Draw.enable(d,g)},disableDraw(d="Polygon"){d==="Poly"&&(d="Polygon"),this.Draw.disable(d)},setPathOptions(d,g={}){let b=g.ignoreShapes||[],C=g.merge||!1;this.map.pm.Draw.shapes.forEach(M=>{b.indexOf(M)===-1&&this.map.pm.Draw[M].setPathOptions(d,C)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(d){let g=(0,_r.default)(this.globalOptions,d);g.editable&&(g.resizeableCircleMarker=g.editable,delete g.editable);let b=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!g.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),b=!0);let C=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!g.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),C=!0),this.map.pm.Draw.shapes.forEach(M=>{this.map.pm.Draw[M].setOptions(g)}),b&&this.map.pm.Draw.CircleMarker.enable(),C&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(M=>{M.pm.setOptions(g)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=g,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.enabled()&&d.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(d){return this.Draw.Cut.enable(d)},toggleGlobalCutMode(d){return this.Draw.Cut.toggle(d)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(d=!1){let g=L.PM.Utils.findLayers(this.map);if(!d)return g;let b=L.featureGroup();return b._pmTempLayer=!0,g.forEach(C=>{b.addLayer(C)}),b},getGeomanDrawLayers(d=!1){let g=L.PM.Utils.findLayers(this.map).filter(C=>C._drawnByGeoman===!0);if(!d)return g;let b=L.featureGroup();return b._pmTempLayer=!0,g.forEach(C=>{b.addLayer(C)}),b},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(d){this._touchEventCounter===0&&(L.DomEvent.on(d,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(d,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(d){this._touchEventCounter===1&&(L.DomEvent.off(d,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(d,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(d){bi(this.map)._onMouseMove(this._createMouseEvent("mousemove",d))},_canvasTouchClick(d){let g="";d.type==="touchstart"||d.type==="pointerdown"?g="mousedown":(d.type==="touchend"||d.type==="pointerup"||d.type==="touchcancel"||d.type==="pointercancel")&&(g="mouseup"),g&&bi(this.map)._onClick(this._createMouseEvent(g,d))},_createMouseEvent(d,g){let b,C=g.touches[0]||g.changedTouches[0];try{b=new MouseEvent(d,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:C.detail,screenX:C.screenX,screenY:C.screenY,clientX:C.clientX,clientY:C.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{b=document.createEvent("MouseEvents"),b.initMouseEvent(d,g.bubbles,g.cancelable,g.view,C.detail,C.screenX,C.screenY,C.clientX,C.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return b}}),Gs=Oc,ga=L.Control.extend({includes:[du],options:{position:"topleft",disableByOtherButtons:!0},initialize(d){this._button=L.Util.extend({},this.options,d)},onAdd(d){return this._map=d,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let d=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),d?d.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(d){return typeof d=="boolean"?this._button.toggleStatus=d:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(d){d&&d.preventDefault(),!this._button.disabled&&(this._button.onClick(d,{button:this,event:d}),this._clicked(d),this._button.afterClick(d,{button:this,event:d}))},_makeButton(d){let g=this.options.position.indexOf("right")>-1?"pos-right":"",b=L.DomUtil.create("div",`button-container  ${g}`,this._container);d.title&&b.setAttribute("title",d.title);let C=L.DomUtil.create("a","leaflet-buttons-control-button",b);C.setAttribute("role","button"),C.setAttribute("tabindex","0"),C.href="#";let M=L.DomUtil.create("div",`leaflet-pm-actions-container ${g}`,b),H=d.actions,ne={cancel:{text:gr("actions.cancel"),title:gr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:gr("actions.finish"),title:gr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:gr("actions.removeLastVertex"),title:gr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[d.jsClass]._removeLastVertex()}},finish:{text:gr("actions.finish"),title:gr("actions.finish"),onClick(be){this._map.pm.Draw[d.jsClass]._finishShape(be)}}};d._preparedActions=H.map(be=>{let Me=typeof be=="string"?be:be.name,it;if(ne[Me])it=ne[Me];else if(be.text)it=be;else return it;let Xe=L.DomUtil.create("a",`leaflet-pm-action ${g} action-${Me}`,M);if(Xe.setAttribute("role","button"),Xe.setAttribute("tabindex","0"),Xe.href="#",it.title&&(Xe.title=it.title),Xe.innerHTML=it.text,L.DomEvent.disableClickPropagation(Xe),L.DomEvent.on(Xe,"click",L.DomEvent.stop),it._node=Xe,!d.disabled&&it.onClick){let Pt=Ut=>{Ut.preventDefault();let on="",{buttons:Mn}=this._map.pm.Toolbar;for(let Dn in Mn)if(Mn[Dn]._button===d){on=Dn;break}this._fireActionClick(it,on,d)};L.DomEvent.addListener(Xe,"click",Pt,this),L.DomEvent.addListener(Xe,"click",it.onClick,this),L.DomEvent.addListener(Xe,"click",()=>this._updateActiveAction(d))}return it}),this._updateActiveAction(d),d.toggleStatus&&L.DomUtil.addClass(b,"active");let le=L.DomUtil.create("div","control-icon",C);return d.iconUrl&&le.setAttribute("src",d.iconUrl),d.className&&L.DomUtil.addClass(le,d.className),L.DomEvent.disableClickPropagation(C),L.DomEvent.on(C,"click",L.DomEvent.stop),d.disabled||(L.DomEvent.addListener(C,"click",this._onBtnClick,this),L.DomEvent.addListener(C,"click",this._triggerClick,this)),d.disabled&&(L.DomUtil.addClass(C,"pm-disabled"),C.setAttribute("aria-disabled","true")),b},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let d="",{buttons:g}=this._map.pm.Toolbar;for(let b in g)if(g[b]._button===this._button){d=b;break}this._fireButtonClick(d,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let d="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,d),g.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(g,d),g.setAttribute("aria-disabled","false"))},_updateActiveAction(d){var g;(g=d._preparedActions)==null||g.forEach(b=>{b!=null&&b._node&&(b.isActive&&b.isActive.call(this)?L.DomUtil.addClass(b._node,"active-action"):L.DomUtil.removeClass(b._node,"active-action"))})}}),gu=ga;L.Control.PMButton=gu;var ma=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(d){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(d)},reinit(){let d=this.isVisible;this.removeControls(),this._defineButtons(),d&&this.addControls()},init(d){this.map=d,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(d){let g=`${d}Container`;return this[g]||(this[g]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${d} leaflet-bar leaflet-control`)),this[g]},getButtons(){return this.buttons},addControls(d=this.options){typeof d.editPolygon<"u"&&(d.editMode=d.editPolygon),typeof d.deleteLayer<"u"&&(d.removalMode=d.deleteLayer),L.Util.setOptions(this,d),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let d=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let b in d){let C=d[b];L.Util.setOptions(C,{className:g.geomanIcons[b]})}},removeControls(){let d=this.getButtons();for(let g in d)d[g].remove();this.isVisible=!1},toggleControls(d=this.options){this.isVisible?this.removeControls():this.addControls(d)},_addButton(d,g){return this.buttons[d]=g,this.options[d]=!!this.options[d]||!1,this.buttons[d]},triggerClickOnToggledButtons(d){for(let g in this.buttons){let b=this.buttons[g];b._button.disableByOtherButtons&&b!==d&&b.toggled()&&b._triggerClick()}},toggleButton(d,g,b=!0){d==="editPolygon"&&(d="editMode"),d==="deleteLayer"&&(d="removalMode");let C=d;return b&&this.triggerClickOnToggledButtons(this.buttons[C]),this.buttons[C]?this.buttons[C].toggle(g):!1},_defineButtons(){let d={className:"control-icon leaflet-pm-icon-marker",title:gr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(Pt,Ut)=>{this.map.pm.Draw[Ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:gr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(Pt,Ut)=>{this.map.pm.Draw[Ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},b={className:"control-icon leaflet-pm-icon-polyline",title:gr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(Pt,Ut)=>{this.map.pm.Draw[Ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},C={title:gr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(Pt,Ut)=>{this.map.pm.Draw[Ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:gr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(Pt,Ut)=>{this.map.pm.Draw[Ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},H={title:gr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(Pt,Ut)=>{this.map.pm.Draw[Ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},ne={title:gr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},le={title:gr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},be={title:gr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(Pt,Ut)=>{this.map.pm.Draw[Ut.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Me={title:gr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},it={title:gr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Xe={className:"control-icon leaflet-pm-icon-text",title:gr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(Pt,Ut)=>{this.map.pm.Draw[Ut.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(d)),this._addButton("drawPolyline",new L.Control.PMButton(b)),this._addButton("drawRectangle",new L.Control.PMButton(H)),this._addButton("drawPolygon",new L.Control.PMButton(g)),this._addButton("drawCircle",new L.Control.PMButton(C)),this._addButton("drawCircleMarker",new L.Control.PMButton(M)),this._addButton("drawText",new L.Control.PMButton(Xe)),this._addButton("editMode",new L.Control.PMButton(ne)),this._addButton("dragMode",new L.Control.PMButton(le)),this._addButton("cutPolygon",new L.Control.PMButton(be)),this._addButton("removalMode",new L.Control.PMButton(Me)),this._addButton("rotateMode",new L.Control.PMButton(it))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let d=this.getButtons(),g=[];this.options.drawControls===!1&&(g=g.concat(Object.keys(d).filter(b=>!d[b]._button.tool))),this.options.editControls===!1&&(g=g.concat(Object.keys(d).filter(b=>d[b]._button.tool==="edit"))),this.options.optionsControls===!1&&(g=g.concat(Object.keys(d).filter(b=>d[b]._button.tool==="options"))),this.options.customControls===!1&&(g=g.concat(Object.keys(d).filter(b=>d[b]._button.tool==="custom")));for(let b in d)if(this.options[b]&&g.indexOf(b)===-1){let C=d[b]._button.tool;C||(C="draw"),d[b].setPosition(this._getBtnPosition(C)),d[b].addTo(this.map)}},_getBtnPosition(d){return this.options.positions&&this.options.positions[d]?this.options.positions[d]:this.options.position},setBlockPosition(d,g){this.options.positions[d]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(d,g){if(g)typeof g!="object"&&(g={name:g});else throw new TypeError("Button has no name");let b=this._btnNameMapping(d);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");let C=this.map.pm.Draw.createNewDrawInstance(g.name,b);g={...this.buttons[b]._button,...g};let M=this.createCustomControl(g);return{drawInstance:C,control:M}},createCustomControl(d){if(!d.name)throw new TypeError("Button has no name");if(this.buttons[d.name])throw new TypeError("Button with this name already exists");d.onClick||(d.onClick=()=>{}),d.afterClick||(d.afterClick=()=>{}),d.toggle!==!1&&(d.toggle=!0),d.block&&(d.block=d.block.toLowerCase()),(!d.block||d.block==="draw")&&(d.block=""),d.className?d.className.indexOf("control-icon")===-1&&(d.className=`control-icon ${d.className}`):d.className="control-icon";let g={tool:d.block,className:d.className,title:d.title||"",jsClass:d.name,onClick:d.onClick,afterClick:d.afterClick,doToggle:d.toggle,toggleStatus:!1,disableOtherButtons:d.disableOtherButtons??!0,disableByOtherButtons:d.disableByOtherButtons??!0,cssToggle:d.toggle,position:this.options.position,actions:d.actions||[],disabled:!!d.disabled};this.options[d.name]!==!1&&(this.options[d.name]=!0);let b=this._addButton(d.name,new L.Control.PMButton(g));return this.changeControlOrder(),b},controlExists(d){return!!this.getButton(d)},getButton(d){return this.getButtons()[d]},getButtonsInBlock(d){let g={};if(d)for(let b in this.getButtons()){let C=this.getButtons()[b];(C._button.tool===d||d==="draw"&&!C._button.tool)&&(g[b]=C)}return g},changeControlOrder(d=[]){let g=this._shapeMapping(),b=[];d.forEach(H=>{g[H]?b.push(g[H]):b.push(H)});let C=this.getButtons(),M={};b.forEach(H=>{C[H]&&(M[H]=C[H])}),Object.keys(C).filter(H=>!C[H]._button.tool||C[H]._button.tool==="draw").forEach(H=>{b.indexOf(H)===-1&&(M[H]=C[H])}),Object.keys(C).filter(H=>C[H]._button.tool==="edit").forEach(H=>{b.indexOf(H)===-1&&(M[H]=C[H])}),Object.keys(C).filter(H=>C[H]._button.tool==="options").forEach(H=>{b.indexOf(H)===-1&&(M[H]=C[H])}),Object.keys(C).filter(H=>C[H]._button.tool==="custom").forEach(H=>{b.indexOf(H)===-1&&(M[H]=C[H])}),Object.keys(C).forEach(H=>{b.indexOf(H)===-1&&(M[H]=C[H])}),this.map.pm.Toolbar.buttons=M,this._showHideButtons()},getControlOrder(){let d=this.getButtons(),g=[];for(let b in d)g.push(b);return g},changeActionsOfControl(d,g){let b=this._btnNameMapping(d);if(!b)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[b])throw new TypeError("Button with this name not exists");this.buttons[b]._button.actions=g,this.changeControlOrder()},setButtonDisabled(d,g){let b=this._btnNameMapping(d);g?this.buttons[b].disable():this.buttons[b].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(d){let g=this._shapeMapping();return g[d]?g[d]:d}}),jl=ma,zl=l(En()),wi={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(d){d.forEach(g=>{if(Array.isArray(g)){this._assignEvents(g);return}g.off("drag",this._handleSnapping,this),g.on("drag",this._handleSnapping,this),g.off("dragend",this._cleanupSnapping,this),g.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(d){if(d){let g=d.target;g._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(g=>{g.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(d){var le,be,Me;let g=d.target;if(g._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((le=d==null?void 0:d.originalEvent)==null?void 0:le.altKey)||((Me=(be=this._map)==null?void 0:be.pm)==null?void 0:Me.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let b=this._calcClosestLayer(g.getLatLng(),this._snapList);if(Object.keys(b).length===0)return!1;let C=b.layer instanceof L.Marker||b.layer instanceof L.CircleMarker||!this.options.snapSegment,M;C?M=b.latlng:M=this._checkPrioritiySnapping(b);let H=this.options.snapDistance,ne={marker:g,shape:this._shape,snapLatLng:M,segment:b.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:b.layer,distance:b.distance};if(this._fireSnapDrag(ne.marker,ne),this._fireSnapDrag(this._layer,ne),b.distance<H){g._orgLatLng=g.getLatLng(),g.setLatLng(M),g._snapped=!0,g._snapInfo=ne;let it=()=>{this._snapLatLng=M,this._fireSnap(g,ne),this._fireSnap(this._layer,ne)},Xe=this._snapLatLng||{},Pt=M||{};(Xe.lat!==Pt.lat||Xe.lng!==Pt.lng)&&it()}else this._snapLatLng&&(this._unsnap(ne),g._snapped=!1,g._snapInfo=void 0,this._fireUnsnap(ne.marker,ne),this._fireUnsnap(this._layer,ne));return!0},_createSnapList(){let d=[],g=[],b=this._map;b.off("layerremove",this._handleSnapLayerRemoval,this),b.on("layerremove",this._handleSnapLayerRemoval,this),b.eachLayer(C=>{if((C instanceof L.Polyline||C instanceof L.Marker||C instanceof L.CircleMarker||C instanceof L.ImageOverlay)&&C.options.snapIgnore!==!0){if(C.options.snapIgnore===void 0&&(!L.PM.optIn&&C.options.pmIgnore===!0||L.PM.optIn&&C.options.pmIgnore!==!1))return;(C instanceof L.Circle||C instanceof L.CircleMarker)&&C.pm&&C.pm._hiddenPolyCircle?d.push(C.pm._hiddenPolyCircle):C instanceof L.ImageOverlay&&(C=L.rectangle(C.getBounds())),d.push(C);let M=L.polyline([],{color:"red",pmIgnore:!0});M._pmTempLayer=!0,g.push(M),(C instanceof L.Circle||C instanceof L.CircleMarker)&&g.push(M)}}),d=d.filter(C=>this._layer!==C),d=d.filter(C=>C._latlng||C._latlngs&&_s(C._latlngs)),d=d.filter(C=>!C._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let C=L.polyline([],{color:"red",pmIgnore:!0});C._pmTempLayer=!0,g.push(C)}),this._snapList=d.concat(this._otherSnapLayers)):this._snapList=d,this.debugIndicatorLines=g},_handleSnapLayerRemoval({layer:d}){if(!d._leaflet_id)return;let g=this._snapList.findIndex(b=>b._leaflet_id===d._leaflet_id);g>-1&&this._snapList.splice(g,1)},_calcClosestLayer(d,g){return this._calcClosestLayers(d,g,1)[0]},_calcClosestLayers(d,g,b=1){let C=[],M={};g.forEach((ne,le)=>{var Me;if(ne._parentCopy&&ne._parentCopy===this._layer||((Me=ne.getLatLngs)==null?void 0:Me.call(ne).flat(5).length)<2)return;let be=this._calcLayerDistances(d,ne);if(be.distance=Math.floor(be.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[le]){let it=L.polyline([],{color:"red",pmIgnore:!0});it._pmTempLayer=!0,this.debugIndicatorLines[le]=it}this.debugIndicatorLines[le].setLatLngs([d,be.latlng])}b===1&&(M.distance===void 0||be.distance-5<=M.distance)?(be.distance+5<M.distance&&(C=[]),M=be,M.layer=ne,C.push(M)):b!==1&&(M={},M=be,M.layer=ne,C.push(M))}),b!==1&&(C=C.sort((ne,le)=>ne.distance-le.distance)),b===-1&&(b=C.length);let H=this._getClosestLayerByPriority(C,b);return L.Util.isArray(H)?H:[H]},_calcLayerDistances(d,g){let b=this._map,C=g instanceof L.Marker||g instanceof L.CircleMarker,M=g instanceof L.Polygon,H=d;if(C){let ne=g.getLatLng();return{latlng:{...ne},distance:this._getDistance(b,ne,H)}}return this._calcLatLngDistances(H,g.getLatLngs(),b,M)},_calcLatLngDistances(d,g,b,C=!1){let M,H,ne,le=be=>{be.forEach((Me,it)=>{if(Array.isArray(Me)){le(Me);return}if(this.options.snapSegment){let Xe=Me,Pt;C?Pt=it+1===be.length?0:it+1:Pt=it+1===be.length?void 0:it+1;let Ut=be[Pt];if(Ut){let on=this._getDistanceToSegment(b,d,Xe,Ut);(H===void 0||on<H)&&(H=on,ne=[Xe,Ut])}}else{let Xe=this._getDistance(b,d,Me);(H===void 0||Xe<H)&&(H=Xe,M=Me)}})};return le(g),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(b,d,ne[0],ne[1])},segment:ne,distance:H}:{latlng:M,distance:H}},_getClosestLayerByPriority(d,g=1){d=d.sort((ne,le)=>ne._leaflet_id-le._leaflet_id);let b=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],C=this._map.pm.globalOptions.snappingOrder||[],M=0,H={};return C.concat(b).forEach(ne=>{H[ne]||(M+=1,H[ne]=M)}),d.sort(fu("instanceofShape",H)),g===1?d[0]||{}:d.slice(0,g)},_checkPrioritiySnapping(d){let g=this._map,b=d.segment[0],C=d.segment[1],M=d.latlng,H=M;if(this.options.snapVertex){let ne=this._getDistance(g,b,M),le=this._getDistance(g,C,M),be=ne<le?b:C,Me=ne<le?ne:le;if(this.options.snapMiddle){let Xe=L.PM.Utils.calcMiddleLatLng(g,b,C),Pt=this._getDistance(g,Xe,M);Pt<ne&&Pt<le&&(be=Xe,Me=Pt)}let it=this.options.snapDistance;Me<it&&(H=be)}return{...H}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(d,g,b,C){let M=d.getMaxZoom();M===1/0&&(M=d.getZoom());let H=d.project(g,M),ne=d.project(b,M),le=d.project(C,M),be=L.LineUtil.closestPointOnSegment(H,ne,le);return d.unproject(be,M)},_getDistanceToSegment(d,g,b,C){let M=d.latLngToContainerPoint(g),H=d.latLngToContainerPoint(b),ne=d.latLngToContainerPoint(C);return L.LineUtil.pointToSegmentDistance(M,H,ne)},_getDistance(d,g,b){return d.latLngToContainerPoint(g).distanceTo(d.latLngToContainerPoint(b))}},Zo=wi,Ga=L.Class.extend({includes:[Zo,du],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(d){L.Util.setOptions(this,d),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(d){let g=new L.Icon.Default;g.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=g,this._map=d,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(b=>{this[b]=new L.PM.Draw[b](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(d,g=!1){g?this.options.pathOptions=(0,zl.default)(this.options.pathOptions,d):this.options.pathOptions=d},getShapes(){return this.shapes},getShape(){return this._shape},enable(d,g){if(!d)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[d].enable(g)},disable(){this.shapes.forEach(d=>{this[d].disable()})},addControls(){this.shapes.forEach(d=>{this[d].addButton()})},getActiveShape(){let d;return this.shapes.forEach(g=>{this[g]._enabled&&(d=g)}),d},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let d=[];this._map.eachLayer(g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||d.push(g))}),this._enabled?d.forEach(g=>{L.PM.Utils.disablePopup(g)}):d.forEach(g=>{L.PM.Utils.enablePopup(g)})},createNewDrawInstance(d,g){let b=this._getShapeFromBtnName(g);if(this[d])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[b])throw new TypeError(`There is no class L.PM.Draw.${b}`);return this[d]=new L.PM.Draw[b](this._map),this[d].toolbarButtonName=d,this[d]._shape=d,this.shapes.push(d),this[g]&&this[d].setOptions(this[g].options),this[d].setOptions(this[d].options),this[d]},_getShapeFromBtnName(d){let g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[d]?g[d]:this[d]?this[d]._shape:d},_finishLayer(d){d.pm&&(d.pm.setOptions(this.options),d.pm._shape=this._shape,d.pm._map=this._map),this._addDrawnLayerProp(d)},_addDrawnLayerProp(d){d._drawnByGeoman=!0},_setPane(d,g){g==="layerPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),bs=Ga;bs.Marker=bs.extend({initialize(d){this._map=d,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(g=>{this.isRelevantMarker(g)&&g.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},isRelevantMarker(d){return d instanceof L.Marker&&d.pm&&!d._pmTempLayer&&!d.pm._initTextMarker},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let g=d;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(d){if(!d.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),b=new L.Marker(g,this.options.markerStyle);this._setPane(b,"markerPane"),this._finishLayer(b),b.pm||(b.options.draggable=!1),b.addTo(this._map.pm._getContainingLayer()),b.pm&&this.options.markerEditable?b.pm.enable():b.dragging&&b.dragging.disable(),this._fireCreate(b),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var d,g;(d=this.options.markerStyle)!=null&&d.icon&&((g=this._hintMarker)==null||g.setIcon(this.options.markerStyle.icon))}});var z=63710088e-1,Ce={centimeters:z*100,centimetres:z*100,degrees:z/111325,feet:z*3.28084,inches:z*39.37,kilometers:z/1e3,kilometres:z/1e3,meters:z,metres:z,miles:z/1609.344,millimeters:z*1e3,millimetres:z*1e3,nauticalmiles:z/1852,radians:1,yards:z*1.0936};function nt(d,g,b){b===void 0&&(b={});var C={type:"Feature"};return(b.id===0||b.id)&&(C.id=b.id),b.bbox&&(C.bbox=b.bbox),C.properties=g||{},C.geometry=d,C}function mt(d,g,b){if(b===void 0&&(b={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Cr(d[0])||!Cr(d[1]))throw new Error("coordinates must contain numbers");var C={type:"Point",coordinates:d};return nt(C,g,b)}function Ot(d,g,b){if(b===void 0&&(b={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");var C={type:"LineString",coordinates:d};return nt(C,g,b)}function Kt(d,g){g===void 0&&(g={});var b={type:"FeatureCollection"};return g.id&&(b.id=g.id),g.bbox&&(b.bbox=g.bbox),b.features=d,b}function vn(d,g){g===void 0&&(g="kilometers");var b=Ce[g];if(!b)throw new Error(g+" units is invalid");return d*b}function zn(d,g){g===void 0&&(g="kilometers");var b=Ce[g];if(!b)throw new Error(g+" units is invalid");return d/b}function Gn(d){var g=d%(2*Math.PI);return g*180/Math.PI}function fr(d){var g=d%360;return g*Math.PI/180}function Cr(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function Hr(d){var g,b,C={type:"FeatureCollection",features:[]};if(d.type==="Feature"?b=d.geometry:b=d,b.type==="LineString")g=[b.coordinates];else if(b.type==="MultiLineString")g=b.coordinates;else if(b.type==="MultiPolygon")g=[].concat.apply([],b.coordinates);else if(b.type==="Polygon")g=b.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return g.forEach(function(M){g.forEach(function(H){for(var ne=0;ne<M.length-1;ne++)for(var le=ne;le<H.length-1;le++)if(!(M===H&&(Math.abs(ne-le)===1||ne===0&&le===M.length-2&&M[ne][0]===M[M.length-1][0]&&M[ne][1]===M[M.length-1][1]))){var be=Wi(M[ne][0],M[ne][1],M[ne+1][0],M[ne+1][1],H[le][0],H[le][1],H[le+1][0],H[le+1][1]);be&&C.features.push(mt([be[0],be[1]]))}})}),C}function Wi(d,g,b,C,M,H,ne,le){var be,Me,it,Xe,Pt,Ut={x:null,y:null,onLine1:!1,onLine2:!1};return be=(le-H)*(b-d)-(ne-M)*(C-g),be===0?Ut.x!==null&&Ut.y!==null?Ut:!1:(Me=g-H,it=d-M,Xe=(ne-M)*Me-(le-H)*it,Pt=(b-d)*Me-(C-g)*it,Me=Xe/be,it=Pt/be,Ut.x=d+Me*(b-d),Ut.y=g+Me*(C-g),Me>=0&&Me<=1&&(Ut.onLine1=!0),it>=0&&it<=1&&(Ut.onLine2=!0),Ut.onLine1&&Ut.onLine2?[Ut.x,Ut.y]:!1)}bs.Line=bs.extend({initialize(d){this._map=d,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_syncHintLine(){let d=this._layer.getLatLngs();if(d.length>0){let g=d[d.length-1];this._hintline.setLatLngs([g,this._hintMarker.getLatLng()])}},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let b=d;b.target=this._hintMarker,this._handleSnapping(b)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let g=this._layer._defaultShape().slice();g.push(this._hintMarker.getLatLng()),this._change(g)},hasSelfIntersection(){return Hr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(d,g){let b=L.polyline(this._layer.getLatLngs());d&&(g||(g=this._hintMarker.getLatLng()),b.addLatLng(g));let C=Hr(b.toGeoJSON(15));this._doesSelfIntersect=C.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(C,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(d){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,d.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),b=this._layer.getLatLngs(),C=b[b.length-1];if(g.equals(b[0])||b.length>0&&g.equals(C)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);let M=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(M,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(d)},_setHintLineAfterNewVertex(d){this._hintline.setLatLngs([d,d])},_removeLastVertex(){let d=this._markers;if(d.length<=1){this.disable();return}let g=this._layer.getLatLngs(),b=d[d.length-1],{indexPath:C}=L.PM.Utils.findDeepMarkerIndex(d,b);d.pop(),this._layerGroup.removeLayer(b);let M=d[d.length-1],H=g.indexOf(M.getLatLng());g=g.slice(0,H+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(b,C,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=1)return;let g=L.polyline(d,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping();let b=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(b))},_createMarker(d){let g=new L.Marker(d,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText(){let{length:d}=this._layer.getLatLngs().flat(),g="";d<=1?g=gr("tooltips.continueLine"):g=gr("tooltips.finishLine"),this._hintMarker.setTooltipContent(g)},_change(d){this._fireChange(d,"Draw")},setStyle(){var d,g;(d=this._layer)==null||d.setStyle(this.options.templineStyle),(g=this._hintline)==null||g.setStyle(this.options.hintlineStyle)}}),bs.Polygon=bs.Line.extend({initialize(d){this._map=d,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(d){L.PM.Draw.Line.prototype.enable.call(this,d),this._layer.pm._shape="Polygon"},_createMarker(d){let g=new L.Marker(d,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),this._layer.getLatLngs().flat().length===1?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",()=>1),g},_setTooltipText(){let{length:d}=this._layer.getLatLngs().flat(),g="";d<=2?g=gr("tooltips.continueLine"):g=gr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(g)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=2)return;let g=L.polygon(d,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let b=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(b))}}),bs.Rectangle=bs.extend({initialize(d){this._map=d,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(d){if(L.Util.setOptions(this,d),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let g=0;g<2;g+=1){let b=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(b,"vertexPane"),b._pmTempLayer=!0,this._layerGroup.addLayer(b),this._styleMarkers.push(b)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_placeStartingMarkers(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(b=>{L.DomUtil.addClass(b._icon,"visible"),b.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(gr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let d=this._startMarker.getLatLng();d&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([d,d]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let b=d;b.target=this._hintMarker,this._handleSnapping(b)}let g=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(g,"Draw")},_syncRectangleSize(){let d=pu(this._startMarker.getLatLng(),this._map),g=pu(this._hintMarker.getLatLng(),this._map),b=L.PM.Utils._getRotatedRectangle(d,g,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(b),this.options.cursorMarker&&this._styleMarkers){let C=[];b.forEach(M=>{!M.equals(d,1e-8)&&!M.equals(g,1e-8)&&C.push(M)}),C.forEach((M,H)=>{try{this._styleMarkers[H].setLatLng(M)}catch{}})}},_findCorners(){let d=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(d[0],d[2],this.options.rectangleAngle||0,this._map)},_finishShape(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),b=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||b.equals(g))return;let C=L.rectangle([b,g],this.options.pathOptions);if(this.options.rectangleAngle){let H=L.PM.Utils._getRotatedRectangle(b,g,this.options.rectangleAngle||0,this._map);C.setLatLngs(H),C.pm&&C.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(C,"layerPane"),this._finishLayer(C),C.addTo(this._map.pm._getContainingLayer()),this._fireCreate(C);let M=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(M))},setStyle(){var d;(d=this._layer)==null||d.setStyle(this.options.pathOptions)}}),bs.CircleMarker=bs.extend({initialize(d){this._map=d,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(d){if(L.Util.setOptions(this,d),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let g={};L.extend(g,this.options.templineStyle),g.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),g),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.disable()})},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_placeCenterMarker(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let g=this._hintMarker.getLatLng();this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let d=this._centerMarker.getLatLng();d&&(this._layer.setLatLng(d),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(gr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let d=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([d,g])},_syncCircleRadius(){let d=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),b=this._distanceCalculation(d,g);this.options[this._minRadiusOption]&&b<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&b>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(b)},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let b=d;b.target=this._hintMarker,this._handleSnapping(b)}this._handleHintMarkerSnapping();let g=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(g,"Draw")},isRelevantMarker(d){return d instanceof L.CircleMarker&&!(d instanceof L.Circle)&&d.pm&&!d._pmTempLayer},_createMarker(d){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!d.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),b=new this._BaseCircleClass(g,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(b,"layerPane"),this._finishLayer(b),b.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(b),this._fireCreate(b),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(d){d.pm&&this.options.markerEditable&&d.pm.enable()},_finishShape(d){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._centerMarker.getLatLng(),b=this._defaultRadius;if(this.options[this._editableOption]){let ne=this._hintMarker.getLatLng();b=this._distanceCalculation(g,ne),this.options[this._minRadiusOption]&&b<this.options[this._minRadiusOption]?b=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&b>this.options[this._maxRadiusOption]&&(b=this.options[this._maxRadiusOption])}let C={...this.options.pathOptions,radius:b},M=new this._BaseCircleClass(g,C);this._setPane(M,"layerPane"),this._finishLayer(M),M.addTo(this._map.pm._getContainingLayer()),M.pm&&M.pm._updateHiddenPolyCircle(),this._fireCreate(M);let H=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(H))},_getNewDestinationOfHintMarker(){let d=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return d;let g=this._centerMarker.getLatLng(),b=this._distanceCalculation(g,d);this.options[this._minRadiusOption]&&b<this.options[this._minRadiusOption]?d=hu(this._map,g,d,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&b>this.options[this._maxRadiusOption]&&(d=hu(this._map,g,d,this._getMaxDistanceInMeter()))}return d},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let d=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),b=this._distanceCalculation(d,g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&b<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&b>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var g,b;let d={};L.extend(d,this.options.templineStyle),this.options[this._editableOption]&&(d.radius=0),(g=this._layer)==null||g.setStyle(d),(b=this._hintline)==null||b.setStyle(this.options.hintlineStyle)},_distanceCalculation(d,g){return this._map.project(d).distanceTo(this._map.project(g))}}),bs.Circle=bs.CircleMarker.extend({initialize(d){this._map=d,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(d,g){return this._map.distance(d,g)}});function gi(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function xi(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ws(d){return d.type==="Feature"?d.geometry:d}function Ms(d,g){return d.type==="FeatureCollection"?"FeatureCollection":d.type==="GeometryCollection"?"GeometryCollection":d.type==="Feature"&&d.geometry!==null?d.geometry.type:d.type}function Xo(d,g,b){if(d!==null)for(var C,M,H,ne,le,be,Me,it=0,Xe=0,Pt,Ut=d.type,on=Ut==="FeatureCollection",Mn=Ut==="Feature",Dn=on?d.features.length:1,yr=0;yr<Dn;yr++){Me=on?d.features[yr].geometry:Mn?d.geometry:d,Pt=Me?Me.type==="GeometryCollection":!1,le=Pt?Me.geometries.length:1;for(var rt=0;rt<le;rt++){var ct=0,bt=0;if(ne=Pt?Me.geometries[rt]:Me,ne!==null){be=ne.coordinates;var Wt=ne.type;switch(it=0,Wt){case null:break;case"Point":if(g(be,Xe,yr,ct,bt)===!1)return!1;Xe++,ct++;break;case"LineString":case"MultiPoint":for(C=0;C<be.length;C++){if(g(be[C],Xe,yr,ct,bt)===!1)return!1;Xe++,Wt==="MultiPoint"&&ct++}Wt==="LineString"&&ct++;break;case"Polygon":case"MultiLineString":for(C=0;C<be.length;C++){for(M=0;M<be[C].length-it;M++){if(g(be[C][M],Xe,yr,ct,bt)===!1)return!1;Xe++}Wt==="MultiLineString"&&ct++,Wt==="Polygon"&&bt++}Wt==="Polygon"&&ct++;break;case"MultiPolygon":for(C=0;C<be.length;C++){for(bt=0,M=0;M<be[C].length;M++){for(H=0;H<be[C][M].length-it;H++){if(g(be[C][M][H],Xe,yr,ct,bt)===!1)return!1;Xe++}bt++}ct++}break;case"GeometryCollection":for(C=0;C<ne.geometries.length;C++)if(Xo(ne.geometries[C],g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Gr(d,g){if(d.type==="Feature")g(d,0);else if(d.type==="FeatureCollection")for(var b=0;b<d.features.length&&g(d.features[b],b)!==!1;b++);}function ro(d,g,b){var C=b;return Gr(d,function(M,H){H===0&&b===void 0?C=M:C=g(C,M,H)}),C}function $l(d,g){var b,C,M,H,ne,le,be,Me,it,Xe,Pt=0,Ut=d.type==="FeatureCollection",on=d.type==="Feature",Mn=Ut?d.features.length:1;for(b=0;b<Mn;b++){for(le=Ut?d.features[b].geometry:on?d.geometry:d,Me=Ut?d.features[b].properties:on?d.properties:{},it=Ut?d.features[b].bbox:on?d.bbox:void 0,Xe=Ut?d.features[b].id:on?d.id:void 0,be=le?le.type==="GeometryCollection":!1,ne=be?le.geometries.length:1,M=0;M<ne;M++){if(H=be?le.geometries[M]:le,H===null){if(g(null,Pt,Me,it,Xe)===!1)return!1;continue}switch(H.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(H,Pt,Me,it,Xe)===!1)return!1;break}case"GeometryCollection":{for(C=0;C<H.geometries.length;C++)if(g(H.geometries[C],Pt,Me,it,Xe)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}Pt++}}function yo(d,g){$l(d,function(b,C,M,H,ne){var le=b===null?null:b.type;switch(le){case null:case"Point":case"LineString":case"Polygon":return g(nt(b,M,{bbox:H,id:ne}),C,0)===!1?!1:void 0}var be;switch(le){case"MultiPoint":be="Point";break;case"MultiLineString":be="LineString";break;case"MultiPolygon":be="Polygon";break}for(var Me=0;Me<b.coordinates.length;Me++){var it=b.coordinates[Me],Xe={type:be,coordinates:it};if(g(nt(Xe,M),C,Me)===!1)return!1}})}function Ou(d){if(!d)throw new Error("geojson is required");var g=[];return yo(d,function(b){ka(b,g)}),Kt(g)}function ka(d,g){var b=[],C=d.geometry;if(C!==null){switch(C.type){case"Polygon":b=xi(C);break;case"LineString":b=[xi(C)]}b.forEach(function(M){var H=tc(M,d.properties);H.forEach(function(ne){ne.id=g.length,g.push(ne)})})}}function tc(d,g){var b=[];return d.reduce(function(C,M){var H=Ot([C,M],g);return H.bbox=yl(C,M),b.push(H),M}),b}function yl(d,g){var b=d[0],C=d[1],M=g[0],H=g[1],ne=b<M?b:M,le=C<H?C:H,be=b>M?b:M,Me=C>H?C:H;return[ne,le,be,Me]}var _l=Ou,ks=l(Bs(),1);function Aa(d,g){var b={},C=[];if(d.type==="LineString"&&(d=nt(d)),g.type==="LineString"&&(g=nt(g)),d.type==="Feature"&&g.type==="Feature"&&d.geometry!==null&&g.geometry!==null&&d.geometry.type==="LineString"&&g.geometry.type==="LineString"&&d.geometry.coordinates.length===2&&g.geometry.coordinates.length===2){var M=Jo(d,g);return M&&C.push(M),Kt(C)}var H=(0,ks.default)();return H.load(_l(g)),Gr(_l(d),function(ne){Gr(H.search(ne),function(le){var be=Jo(ne,le);if(be){var Me=xi(be).join(",");b[Me]||(b[Me]=!0,C.push(be))}})}),Kt(C)}function Jo(d,g){var b=xi(d),C=xi(g);if(b.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(C.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var M=b[0][0],H=b[0][1],ne=b[1][0],le=b[1][1],be=C[0][0],Me=C[0][1],it=C[1][0],Xe=C[1][1],Pt=(Xe-Me)*(ne-M)-(it-be)*(le-H),Ut=(it-be)*(H-Me)-(Xe-Me)*(M-be),on=(ne-M)*(H-Me)-(le-H)*(M-be);if(Pt===0)return null;var Mn=Ut/Pt,Dn=on/Pt;if(Mn>=0&&Mn<=1&&Dn>=0&&Dn<=1){var yr=M+Mn*(ne-M),rt=H+Mn*(le-H);return mt([yr,rt])}return null}var Io=Aa,Ul=l(Bs(),1);function io(d,g,b){b===void 0&&(b={});var C=gi(d),M=gi(g),H=fr(M[1]-C[1]),ne=fr(M[0]-C[0]),le=fr(C[1]),be=fr(M[1]),Me=Math.pow(Math.sin(H/2),2)+Math.pow(Math.sin(ne/2),2)*Math.cos(le)*Math.cos(be);return vn(2*Math.atan2(Math.sqrt(Me),Math.sqrt(1-Me)),b.units)}var _o=io;function bo(d){var g=d[0],b=d[1],C=d[2],M=d[3],H=_o(d.slice(0,2),[C,b]),ne=_o(d.slice(0,2),[g,M]);if(H>=ne){var le=(b+M)/2;return[g,le-(C-g)/2,C,le+(C-g)/2]}else{var be=(g+C)/2;return[be-(M-b)/2,b,be+(M-b)/2,M]}}var Nc=bo;function Fs(d){var g=[1/0,1/0,-1/0,-1/0];return Xo(d,function(b){g[0]>b[0]&&(g[0]=b[0]),g[1]>b[1]&&(g[1]=b[1]),g[2]<b[0]&&(g[2]=b[0]),g[3]<b[1]&&(g[3]=b[1])}),g}Fs.default=Fs;var Wa=Fs;function so(d,g){g===void 0&&(g={});var b=g.precision,C=g.coordinates,M=g.mutate;if(b=b==null||isNaN(b)?6:b,C=C==null||isNaN(C)?3:C,!d)throw new Error("<geojson> is required");if(typeof b!="number")throw new Error("<precision> must be a number");if(typeof C!="number")throw new Error("<coordinates> must be a number");(M===!1||M===void 0)&&(d=JSON.parse(JSON.stringify(d)));var H=Math.pow(10,b);return Xo(d,function(ne){oo(ne,H,C)}),d}function oo(d,g,b){d.length>b&&d.splice(b,d.length);for(var C=0;C<d.length;C++)d[C]=Math.round(d[C]*g)/g;return d}var qa=so;function Ya(d,g,b){if(b===void 0&&(b={}),b.final===!0)return ao(d,g);var C=gi(d),M=gi(g),H=fr(C[0]),ne=fr(M[0]),le=fr(C[1]),be=fr(M[1]),Me=Math.sin(ne-H)*Math.cos(be),it=Math.cos(le)*Math.sin(be)-Math.sin(le)*Math.cos(be)*Math.cos(ne-H);return Gn(Math.atan2(Me,it))}function ao(d,g){var b=Ya(g,d);return b=(b+180)%360,b}function Ws(d,g,b,C){C===void 0&&(C={});var M=gi(d),H=fr(M[0]),ne=fr(M[1]),le=fr(b),be=zn(g,C.units),Me=Math.asin(Math.sin(ne)*Math.cos(be)+Math.cos(ne)*Math.sin(be)*Math.cos(le)),it=H+Math.atan2(Math.sin(le)*Math.sin(be)*Math.cos(ne),Math.cos(be)-Math.sin(ne)*Math.sin(Me)),Xe=Gn(it),Pt=Gn(Me);return mt([Xe,Pt],C.properties)}function Ta(d,g,b){b===void 0&&(b={});var C=mt([1/0,1/0],{dist:1/0}),M=0;return yo(d,function(H){for(var ne=xi(H),le=0;le<ne.length-1;le++){var be=mt(ne[le]);be.properties.dist=_o(g,be,b);var Me=mt(ne[le+1]);Me.properties.dist=_o(g,Me,b);var it=_o(be,Me,b),Xe=Math.max(be.properties.dist,Me.properties.dist),Pt=Ya(be,Me),Ut=Ws(g,Xe,Pt+90,b),on=Ws(g,Xe,Pt-90,b),Mn=Io(Ot([Ut.geometry.coordinates,on.geometry.coordinates]),Ot([be.geometry.coordinates,Me.geometry.coordinates])),Dn=null;Mn.features.length>0&&(Dn=Mn.features[0],Dn.properties.dist=_o(g,Dn,b),Dn.properties.location=M+_o(be,Dn,b)),be.properties.dist<C.properties.dist&&(C=be,C.properties.index=le,C.properties.location=M),Me.properties.dist<C.properties.dist&&(C=Me,C.properties.index=le+1,C.properties.location=M+it),Dn&&Dn.properties.dist<C.properties.dist&&(C=Dn,C.properties.index=le),M+=it}}),C}var Qo=Ta;function lo(d,g){if(!d)throw new Error("line is required");if(!g)throw new Error("splitter is required");var b=Ms(d),C=Ms(g);if(b!=="LineString")throw new Error("line must be LineString");if(C==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(C==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var M=qa(g,{precision:7});switch(C){case"Point":return nn(d,M);case"MultiPoint":return kt(d,M);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return kt(d,Io(d,M))}}function kt(d,g){var b=[],C=(0,Ul.default)();return yo(g,function(M){if(b.forEach(function(le,be){le.id=be}),!b.length)b=nn(d,M).features,b.forEach(function(le){le.bbox||(le.bbox=Nc(Wa(le)))}),C.load(Kt(b));else{var H=C.search(M);if(H.features.length){var ne=$t(M,H);b=b.filter(function(le){return le.id!==ne.id}),C.remove(ne),Gr(nn(ne,M),function(le){b.push(le),C.insert(le)})}}}),Kt(b)}function nn(d,g){var b=[],C=xi(d)[0],M=xi(d)[d.geometry.coordinates.length-1];if(Fn(C,gi(g))||Fn(M,gi(g)))return Kt([d]);var H=(0,Ul.default)(),ne=_l(d);H.load(ne);var le=H.search(g);if(!le.features.length)return Kt([d]);var be=$t(g,le),Me=[C],it=ro(ne,function(Xe,Pt,Ut){var on=xi(Pt)[1],Mn=gi(g);return Ut===be.id?(Xe.push(Mn),b.push(Ot(Xe)),Fn(Mn,on)?[Mn]:[Mn,on]):(Xe.push(on),Xe)},Me);return it.length>1&&b.push(Ot(it)),Kt(b)}function $t(d,g){if(!g.features.length)throw new Error("lines must contain features");if(g.features.length===1)return g.features[0];var b,C=1/0;return Gr(g,function(M){var H=Qo(M,d),ne=H.properties.dist;ne<C&&(b=M,C=ne)}),b}function Fn(d,g){return d[0]===g[0]&&d[1]===g[1]}var or=lo;function Mr(d,g,b){if(b===void 0&&(b={}),!d)throw new Error("point is required");if(!g)throw new Error("polygon is required");var C=gi(d),M=ws(g),H=M.type,ne=g.bbox,le=M.coordinates;if(ne&&Li(C,ne)===!1)return!1;H==="Polygon"&&(le=[le]);for(var be=!1,Me=0;Me<le.length&&!be;Me++)if(Ji(C,le[Me][0],b.ignoreBoundary)){for(var it=!1,Xe=1;Xe<le[Me].length&&!it;)Ji(C,le[Me][Xe],!b.ignoreBoundary)&&(it=!0),Xe++;it||(be=!0)}return be}function Ji(d,g,b){var C=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var M=0,H=g.length-1;M<g.length;H=M++){var ne=g[M][0],le=g[M][1],be=g[H][0],Me=g[H][1],it=d[1]*(ne-be)+le*(be-d[0])+Me*(d[0]-ne)===0&&(ne-d[0])*(be-d[0])<=0&&(le-d[1])*(Me-d[1])<=0;if(it)return!b;var Xe=le>d[1]!=Me>d[1]&&d[0]<(be-ne)*(d[1]-le)/(Me-le)+ne;Xe&&(C=!C)}return C}function Li(d,g){return g[0]<=d[0]&&g[1]<=d[1]&&g[2]>=d[0]&&g[3]>=d[1]}function mu(d,g,b){b===void 0&&(b={});for(var C=gi(d),M=xi(g),H=0;H<M.length-1;H++){var ne=!1;if(b.ignoreEndVertices&&(H===0&&(ne="start"),H===M.length-2&&(ne="end"),H===0&&H+1===M.length-1&&(ne="both")),wo(M[H],M[H+1],C,ne,typeof b.epsilon>"u"?null:b.epsilon))return!0}return!1}function wo(d,g,b,C,M){var H=b[0],ne=b[1],le=d[0],be=d[1],Me=g[0],it=g[1],Xe=b[0]-le,Pt=b[1]-be,Ut=Me-le,on=it-be,Mn=Xe*on-Pt*Ut;if(M!==null){if(Math.abs(Mn)>M)return!1}else if(Mn!==0)return!1;if(C){if(C==="start")return Math.abs(Ut)>=Math.abs(on)?Ut>0?le<H&&H<=Me:Me<=H&&H<le:on>0?be<ne&&ne<=it:it<=ne&&ne<be;if(C==="end")return Math.abs(Ut)>=Math.abs(on)?Ut>0?le<=H&&H<Me:Me<H&&H<=le:on>0?be<=ne&&ne<it:it<ne&&ne<=be;if(C==="both")return Math.abs(Ut)>=Math.abs(on)?Ut>0?le<H&&H<Me:Me<H&&H<le:on>0?be<ne&&ne<it:it<ne&&ne<be}else return Math.abs(Ut)>=Math.abs(on)?Ut>0?le<=H&&H<=Me:Me<=H&&H<=le:on>0?be<=ne&&ne<=it:it<=ne&&ne<=be;return!1}var Qi=mu;function Da(d,g){var b=ws(d),C=ws(g),M=b.type,H=C.type,ne=b.coordinates,le=C.coordinates;switch(M){case"Point":switch(H){case"Point":return Di(ne,le);default:throw new Error("feature2 "+H+" geometry not supported")}case"MultiPoint":switch(H){case"Point":return Ka(b,C);case"MultiPoint":return Ia(b,C);default:throw new Error("feature2 "+H+" geometry not supported")}case"LineString":switch(H){case"Point":return Qi(C,b,{ignoreEndVertices:!0});case"LineString":return Qr(b,C);case"MultiPoint":return Oa(b,C);default:throw new Error("feature2 "+H+" geometry not supported")}case"Polygon":switch(H){case"Point":return Mr(C,b,{ignoreBoundary:!0});case"LineString":return va(b,C);case"Polygon":return qs(b,C);case"MultiPoint":return Na(b,C);default:throw new Error("feature2 "+H+" geometry not supported")}default:throw new Error("feature1 "+M+" geometry not supported")}}function Ka(d,g){var b,C=!1;for(b=0;b<d.coordinates.length;b++)if(Di(d.coordinates[b],g.coordinates)){C=!0;break}return C}function Ia(d,g){for(var b=0,C=g.coordinates;b<C.length;b++){for(var M=C[b],H=!1,ne=0,le=d.coordinates;ne<le.length;ne++){var be=le[ne];if(Di(M,be)){H=!0;break}}if(!H)return!1}return!0}function Oa(d,g){for(var b=!1,C=0,M=g.coordinates;C<M.length;C++){var H=M[C];if(Qi(H,d,{ignoreEndVertices:!0})&&(b=!0),!Qi(H,d))return!1}return!!b}function Na(d,g){for(var b=0,C=g.coordinates;b<C.length;b++){var M=C[b];if(!Mr(M,d,{ignoreBoundary:!0}))return!1}return!0}function Qr(d,g){for(var b=!1,C=0,M=g.coordinates;C<M.length;C++){var H=M[C];if(Qi({type:"Point",coordinates:H},d,{ignoreEndVertices:!0})&&(b=!0),!Qi({type:"Point",coordinates:H},d,{ignoreEndVertices:!1}))return!1}return b}function va(d,g){var b=!1,C=0,M=Wa(d),H=Wa(g);if(!Si(M,H))return!1;for(C;C<g.coordinates.length-1;C++){var ne=xs(g.coordinates[C],g.coordinates[C+1]);if(Mr({type:"Point",coordinates:ne},d,{ignoreBoundary:!0})){b=!0;break}}return b}function qs(d,g){if(d.type==="Feature"&&d.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;var b=Wa(d),C=Wa(g);if(!Si(b,C))return!1;for(var M=ws(g).coordinates,H=0,ne=M;H<ne.length;H++)for(var le=ne[H],be=0,Me=le;be<Me.length;be++){var it=Me[be];if(!Mr(it,d))return!1}return!0}function Si(d,g){return!(d[0]>g[0]||d[2]<g[2]||d[1]>g[1]||d[3]<g[3])}function Di(d,g){return d[0]===g[0]&&d[1]===g[1]}function xs(d,g){return[(d[0]+g[0])/2,(d[1]+g[1])/2]}var Vi=l(Sr()),ea=d=>()=>d,Oo=d=>{let g=d?(b,C)=>C.minus(b).abs().isLessThanOrEqualTo(d):ea(!1);return(b,C)=>g(b,C)?0:b.comparedTo(C)};function ia(d){let g=d?(b,C,M,H,ne)=>b.exponentiatedBy(2).isLessThanOrEqualTo(H.minus(C).exponentiatedBy(2).plus(ne.minus(M).exponentiatedBy(2)).times(d)):ea(!1);return(b,C,M)=>{let H=b.x,ne=b.y,le=M.x,be=M.y,Me=ne.minus(be).times(C.x.minus(le)).minus(H.minus(le).times(C.y.minus(be)));return g(Me,H,ne,le,be)?0:Me.comparedTo(0)}}var nc=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Ra=Math.ceil,As=Math.floor,zi="[BigNumber Error] ",uo=zi+"Number primitive has more than 15 significant digits: ",No=1e14,br=14,Za=9007199254740991,Xa=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ya=1e7,xo=1e9;function ud(d){var g,b,C,M=rt.prototype={constructor:rt,toString:null,valueOf:null},H=new rt(1),ne=20,le=4,be=-7,Me=21,it=-1e7,Xe=1e7,Pt=!1,Ut=1,on=0,Mn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Dn="0123456789abcdefghijklmnopqrstuvwxyz",yr=!0;function rt(Le,Te){var He,Ve,Ke,Ze,pt,gt,Lt,Nt,Rt=this;if(!(Rt instanceof rt))return new rt(Le,Te);if(Te==null){if(Le&&Le._isBigNumber===!0){Rt.s=Le.s,!Le.c||Le.e>Xe?Rt.c=Rt.e=null:Le.e<it?Rt.c=[Rt.e=0]:(Rt.e=Le.e,Rt.c=Le.c.slice());return}if((gt=typeof Le=="number")&&Le*0==0){if(Rt.s=1/Le<0?(Le=-Le,-1):1,Le===~~Le){for(Ze=0,pt=Le;pt>=10;pt/=10,Ze++);Ze>Xe?Rt.c=Rt.e=null:(Rt.e=Ze,Rt.c=[Le]);return}Nt=String(Le)}else{if(!nc.test(Nt=String(Le)))return C(Rt,Nt,gt);Rt.s=Nt.charCodeAt(0)==45?(Nt=Nt.slice(1),-1):1}(Ze=Nt.indexOf("."))>-1&&(Nt=Nt.replace(".","")),(pt=Nt.search(/e/i))>0?(Ze<0&&(Ze=pt),Ze+=+Nt.slice(pt+1),Nt=Nt.substring(0,pt)):Ze<0&&(Ze=Nt.length)}else{if(c(Te,2,Dn.length,"Base"),Te==10&&yr)return Rt=new rt(Le),At(Rt,ne+Rt.e+1,le);if(Nt=String(Le),gt=typeof Le=="number"){if(Le*0!=0)return C(Rt,Nt,gt,Te);if(Rt.s=1/Le<0?(Nt=Nt.slice(1),-1):1,rt.DEBUG&&Nt.replace(/^0\.0*|\./,"").length>15)throw Error(uo+Le)}else Rt.s=Nt.charCodeAt(0)===45?(Nt=Nt.slice(1),-1):1;for(He=Dn.slice(0,Te),Ze=pt=0,Lt=Nt.length;pt<Lt;pt++)if(He.indexOf(Ve=Nt.charAt(pt))<0){if(Ve=="."){if(pt>Ze){Ze=Lt;continue}}else if(!Ke&&(Nt==Nt.toUpperCase()&&(Nt=Nt.toLowerCase())||Nt==Nt.toLowerCase()&&(Nt=Nt.toUpperCase()))){Ke=!0,pt=-1,Ze=0;continue}return C(Rt,String(Le),gt,Te)}gt=!1,Nt=b(Nt,Te,10,Rt.s),(Ze=Nt.indexOf("."))>-1?Nt=Nt.replace(".",""):Ze=Nt.length}for(pt=0;Nt.charCodeAt(pt)===48;pt++);for(Lt=Nt.length;Nt.charCodeAt(--Lt)===48;);if(Nt=Nt.slice(pt,++Lt)){if(Lt-=pt,gt&&rt.DEBUG&&Lt>15&&(Le>Za||Le!==As(Le)))throw Error(uo+Rt.s*Le);if((Ze=Ze-pt-1)>Xe)Rt.c=Rt.e=null;else if(Ze<it)Rt.c=[Rt.e=0];else{if(Rt.e=Ze,Rt.c=[],pt=(Ze+1)%br,Ze<0&&(pt+=br),pt<Lt){for(pt&&Rt.c.push(+Nt.slice(0,pt)),Lt-=br;pt<Lt;)Rt.c.push(+Nt.slice(pt,pt+=br));pt=br-(Nt=Nt.slice(pt)).length}else pt-=Lt;for(;pt--;Nt+="0");Rt.c.push(+Nt)}}else Rt.c=[Rt.e=0]}rt.clone=ud,rt.ROUND_UP=0,rt.ROUND_DOWN=1,rt.ROUND_CEIL=2,rt.ROUND_FLOOR=3,rt.ROUND_HALF_UP=4,rt.ROUND_HALF_DOWN=5,rt.ROUND_HALF_EVEN=6,rt.ROUND_HALF_CEIL=7,rt.ROUND_HALF_FLOOR=8,rt.EUCLID=9,rt.config=rt.set=function(Le){var Te,He;if(Le!=null)if(typeof Le=="object"){if(Le.hasOwnProperty(Te="DECIMAL_PLACES")&&(He=Le[Te],c(He,0,xo,Te),ne=He),Le.hasOwnProperty(Te="ROUNDING_MODE")&&(He=Le[Te],c(He,0,8,Te),le=He),Le.hasOwnProperty(Te="EXPONENTIAL_AT")&&(He=Le[Te],He&&He.pop?(c(He[0],-1e9,0,Te),c(He[1],0,xo,Te),be=He[0],Me=He[1]):(c(He,-1e9,xo,Te),be=-(Me=He<0?-He:He))),Le.hasOwnProperty(Te="RANGE"))if(He=Le[Te],He&&He.pop)c(He[0],-1e9,-1,Te),c(He[1],1,xo,Te),it=He[0],Xe=He[1];else if(c(He,-1e9,xo,Te),He)it=-(Xe=He<0?-He:He);else throw Error(zi+Te+" cannot be zero: "+He);if(Le.hasOwnProperty(Te="CRYPTO"))if(He=Le[Te],He===!!He)if(He)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Pt=He;else throw Pt=!He,Error(zi+"crypto unavailable");else Pt=He;else throw Error(zi+Te+" not true or false: "+He);if(Le.hasOwnProperty(Te="MODULO_MODE")&&(He=Le[Te],c(He,0,9,Te),Ut=He),Le.hasOwnProperty(Te="POW_PRECISION")&&(He=Le[Te],c(He,0,xo,Te),on=He),Le.hasOwnProperty(Te="FORMAT"))if(He=Le[Te],typeof He=="object")Mn=He;else throw Error(zi+Te+" not an object: "+He);if(Le.hasOwnProperty(Te="ALPHABET"))if(He=Le[Te],typeof He=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(He))yr=He.slice(0,10)=="0123456789",Dn=He;else throw Error(zi+Te+" invalid: "+He)}else throw Error(zi+"Object expected: "+Le);return{DECIMAL_PLACES:ne,ROUNDING_MODE:le,EXPONENTIAL_AT:[be,Me],RANGE:[it,Xe],CRYPTO:Pt,MODULO_MODE:Ut,POW_PRECISION:on,FORMAT:Mn,ALPHABET:Dn}},rt.isBigNumber=function(Le){if(!Le||Le._isBigNumber!==!0)return!1;if(!rt.DEBUG)return!0;var Te,He,Ve=Le.c,Ke=Le.e,Ze=Le.s;e:if({}.toString.call(Ve)=="[object Array]"){if((Ze===1||Ze===-1)&&Ke>=-1e9&&Ke<=xo&&Ke===As(Ke)){if(Ve[0]===0){if(Ke===0&&Ve.length===1)return!0;break e}if(Te=(Ke+1)%br,Te<1&&(Te+=br),String(Ve[0]).length==Te){for(Te=0;Te<Ve.length;Te++)if(He=Ve[Te],He<0||He>=No||He!==As(He))break e;if(He!==0)return!0}}}else if(Ve===null&&Ke===null&&(Ze===null||Ze===1||Ze===-1))return!0;throw Error(zi+"Invalid BigNumber: "+Le)},rt.maximum=rt.max=function(){return bt(arguments,-1)},rt.minimum=rt.min=function(){return bt(arguments,1)},rt.random=function(){var Le=9007199254740992,Te=Math.random()*Le&2097151?function(){return As(Math.random()*Le)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(He){var Ve,Ke,Ze,pt,gt,Lt=0,Nt=[],Rt=new rt(H);if(He==null?He=ne:c(He,0,xo),pt=Ra(He/br),Pt)if(crypto.getRandomValues){for(Ve=crypto.getRandomValues(new Uint32Array(pt*=2));Lt<pt;)gt=Ve[Lt]*131072+(Ve[Lt+1]>>>11),gt>=9e15?(Ke=crypto.getRandomValues(new Uint32Array(2)),Ve[Lt]=Ke[0],Ve[Lt+1]=Ke[1]):(Nt.push(gt%1e14),Lt+=2);Lt=pt/2}else if(crypto.randomBytes){for(Ve=crypto.randomBytes(pt*=7);Lt<pt;)gt=(Ve[Lt]&31)*281474976710656+Ve[Lt+1]*1099511627776+Ve[Lt+2]*4294967296+Ve[Lt+3]*16777216+(Ve[Lt+4]<<16)+(Ve[Lt+5]<<8)+Ve[Lt+6],gt>=9e15?crypto.randomBytes(7).copy(Ve,Lt):(Nt.push(gt%1e14),Lt+=7);Lt=pt/7}else throw Pt=!1,Error(zi+"crypto unavailable");if(!Pt)for(;Lt<pt;)gt=Te(),gt<9e15&&(Nt[Lt++]=gt%1e14);for(pt=Nt[--Lt],He%=br,pt&&He&&(gt=Xa[br-He],Nt[Lt]=As(pt/gt)*gt);Nt[Lt]===0;Nt.pop(),Lt--);if(Lt<0)Nt=[Ze=0];else{for(Ze=-1;Nt[0]===0;Nt.splice(0,1),Ze-=br);for(Lt=1,gt=Nt[0];gt>=10;gt/=10,Lt++);Lt<br&&(Ze-=br-Lt)}return Rt.e=Ze,Rt.c=Nt,Rt}}(),rt.sum=function(){for(var Le=1,Te=arguments,He=new rt(Te[0]);Le<Te.length;)He=He.plus(Te[Le++]);return He},b=function(){var Le="0123456789";function Te(He,Ve,Ke,Ze){for(var pt,gt=[0],Lt,Nt=0,Rt=He.length;Nt<Rt;){for(Lt=gt.length;Lt--;gt[Lt]*=Ve);for(gt[0]+=Ze.indexOf(He.charAt(Nt++)),pt=0;pt<gt.length;pt++)gt[pt]>Ke-1&&(gt[pt+1]==null&&(gt[pt+1]=0),gt[pt+1]+=gt[pt]/Ke|0,gt[pt]%=Ke)}return gt.reverse()}return function(He,Ve,Ke,Ze,pt){var gt,Lt,Nt,Rt,dn,Wn,Qn,cr,vi=He.indexOf("."),Ii=ne,ei=le;for(vi>=0&&(Rt=on,on=0,He=He.replace(".",""),cr=new rt(Ve),Wn=cr.pow(He.length-vi),on=Rt,cr.c=Te(W(Ks(Wn.c),Wn.e,"0"),10,Ke,Le),cr.e=cr.c.length),Qn=Te(He,Ve,Ke,pt?(gt=Dn,Le):(gt=Le,Dn)),Nt=Rt=Qn.length;Qn[--Rt]==0;Qn.pop());if(!Qn[0])return gt.charAt(0);if(vi<0?--Nt:(Wn.c=Qn,Wn.e=Nt,Wn.s=Ze,Wn=g(Wn,cr,Ii,ei,Ke),Qn=Wn.c,dn=Wn.r,Nt=Wn.e),Lt=Nt+Ii+1,vi=Qn[Lt],Rt=Ke/2,dn=dn||Lt<0||Qn[Lt+1]!=null,dn=ei<4?(vi!=null||dn)&&(ei==0||ei==(Wn.s<0?3:2)):vi>Rt||vi==Rt&&(ei==4||dn||ei==6&&Qn[Lt-1]&1||ei==(Wn.s<0?8:7)),Lt<1||!Qn[0])He=dn?W(gt.charAt(1),-Ii,gt.charAt(0)):gt.charAt(0);else{if(Qn.length=Lt,dn)for(--Ke;++Qn[--Lt]>Ke;)Qn[Lt]=0,Lt||(++Nt,Qn=[1].concat(Qn));for(Rt=Qn.length;!Qn[--Rt];);for(vi=0,He="";vi<=Rt;He+=gt.charAt(Qn[vi++]));He=W(He,Nt,gt.charAt(0))}return He}}(),g=function(){function Le(Ve,Ke,Ze){var pt,gt,Lt,Nt,Rt=0,dn=Ve.length,Wn=Ke%ya,Qn=Ke/ya|0;for(Ve=Ve.slice();dn--;)Lt=Ve[dn]%ya,Nt=Ve[dn]/ya|0,pt=Qn*Lt+Nt*Wn,gt=Wn*Lt+pt%ya*ya+Rt,Rt=(gt/Ze|0)+(pt/ya|0)+Qn*Nt,Ve[dn]=gt%Ze;return Rt&&(Ve=[Rt].concat(Ve)),Ve}function Te(Ve,Ke,Ze,pt){var gt,Lt;if(Ze!=pt)Lt=Ze>pt?1:-1;else for(gt=Lt=0;gt<Ze;gt++)if(Ve[gt]!=Ke[gt]){Lt=Ve[gt]>Ke[gt]?1:-1;break}return Lt}function He(Ve,Ke,Ze,pt){for(var gt=0;Ze--;)Ve[Ze]-=gt,gt=Ve[Ze]<Ke[Ze]?1:0,Ve[Ze]=gt*pt+Ve[Ze]-Ke[Ze];for(;!Ve[0]&&Ve.length>1;Ve.splice(0,1));}return function(Ve,Ke,Ze,pt,gt){var Lt,Nt,Rt,dn,Wn,Qn,cr,vi,Ii,ei,Hi,Fo,ic,Fa,Nh,wl,Bc,ja=Ve.s==Ke.s?1:-1,ho=Ve.c,Ls=Ke.c;if(!ho||!ho[0]||!Ls||!Ls[0])return new rt(!Ve.s||!Ke.s||(ho?Ls&&ho[0]==Ls[0]:!Ls)?NaN:ho&&ho[0]==0||!Ls?ja*0:ja/0);for(vi=new rt(ja),Ii=vi.c=[],Nt=Ve.e-Ke.e,ja=Ze+Nt+1,gt||(gt=No,Nt=Ys(Ve.e/br)-Ys(Ke.e/br),ja=ja/br|0),Rt=0;Ls[Rt]==(ho[Rt]||0);Rt++);if(Ls[Rt]>(ho[Rt]||0)&&Nt--,ja<0)Ii.push(1),dn=!0;else{for(Fa=ho.length,wl=Ls.length,Rt=0,ja+=2,Wn=As(gt/(Ls[0]+1)),Wn>1&&(Ls=Le(Ls,Wn,gt),ho=Le(ho,Wn,gt),wl=Ls.length,Fa=ho.length),ic=wl,ei=ho.slice(0,wl),Hi=ei.length;Hi<wl;ei[Hi++]=0);Bc=Ls.slice(),Bc=[0].concat(Bc),Nh=Ls[0],Ls[1]>=gt/2&&Nh++;do{if(Wn=0,Lt=Te(Ls,ei,wl,Hi),Lt<0){if(Fo=ei[0],wl!=Hi&&(Fo=Fo*gt+(ei[1]||0)),Wn=As(Fo/Nh),Wn>1)for(Wn>=gt&&(Wn=gt-1),Qn=Le(Ls,Wn,gt),cr=Qn.length,Hi=ei.length;Te(Qn,ei,cr,Hi)==1;)Wn--,He(Qn,wl<cr?Bc:Ls,cr,gt),cr=Qn.length,Lt=1;else Wn==0&&(Lt=Wn=1),Qn=Ls.slice(),cr=Qn.length;if(cr<Hi&&(Qn=[0].concat(Qn)),He(ei,Qn,Hi,gt),Hi=ei.length,Lt==-1)for(;Te(Ls,ei,wl,Hi)<1;)Wn++,He(ei,wl<Hi?Bc:Ls,Hi,gt),Hi=ei.length}else Lt===0&&(Wn++,ei=[0]);Ii[Rt++]=Wn,ei[0]?ei[Hi++]=ho[ic]||0:(ei=[ho[ic]],Hi=1)}while((ic++<Fa||ei[0]!=null)&&ja--);dn=ei[0]!=null,Ii[0]||Ii.splice(0,1)}if(gt==No){for(Rt=1,ja=Ii[0];ja>=10;ja/=10,Rt++);At(vi,Ze+(vi.e=Rt+Nt*br-1)+1,pt,dn)}else vi.e=Nt,vi.r=+dn;return vi}}();function ct(Le,Te,He,Ve){var Ke,Ze,pt,gt,Lt;if(He==null?He=le:c(He,0,8),!Le.c)return Le.toString();if(Ke=Le.c[0],pt=Le.e,Te==null)Lt=Ks(Le.c),Lt=Ve==1||Ve==2&&(pt<=be||pt>=Me)?P(Lt,pt):W(Lt,pt,"0");else if(Le=At(new rt(Le),Te,He),Ze=Le.e,Lt=Ks(Le.c),gt=Lt.length,Ve==1||Ve==2&&(Te<=Ze||Ze<=be)){for(;gt<Te;Lt+="0",gt++);Lt=P(Lt,Ze)}else if(Te-=pt,Lt=W(Lt,Ze,"0"),Ze+1>gt){if(--Te>0)for(Lt+=".";Te--;Lt+="0");}else if(Te+=Ze-gt,Te>0)for(Ze+1==gt&&(Lt+=".");Te--;Lt+="0");return Le.s<0&&Ke?"-"+Lt:Lt}function bt(Le,Te){for(var He,Ve,Ke=1,Ze=new rt(Le[0]);Ke<Le.length;Ke++)Ve=new rt(Le[Ke]),(!Ve.s||(He=_a(Ze,Ve))===Te||He===0&&Ze.s===Te)&&(Ze=Ve);return Ze}function Wt(Le,Te,He){for(var Ve=1,Ke=Te.length;!Te[--Ke];Te.pop());for(Ke=Te[0];Ke>=10;Ke/=10,Ve++);return(He=Ve+He*br-1)>Xe?Le.c=Le.e=null:He<it?Le.c=[Le.e=0]:(Le.e=He,Le.c=Te),Le}C=function(){var Le=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Te=/^([^.]+)\.$/,He=/^\.([^.]+)$/,Ve=/^-?(Infinity|NaN)$/,Ke=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Ze,pt,gt,Lt){var Nt,Rt=gt?pt:pt.replace(Ke,"");if(Ve.test(Rt))Ze.s=isNaN(Rt)?null:Rt<0?-1:1;else{if(!gt&&(Rt=Rt.replace(Le,function(dn,Wn,Qn){return Nt=(Qn=Qn.toLowerCase())=="x"?16:Qn=="b"?2:8,!Lt||Lt==Nt?Wn:dn}),Lt&&(Nt=Lt,Rt=Rt.replace(Te,"$1").replace(He,"0.$1")),pt!=Rt))return new rt(Rt,Nt);if(rt.DEBUG)throw Error(zi+"Not a"+(Lt?" base "+Lt:"")+" number: "+pt);Ze.s=null}Ze.c=Ze.e=null}}();function At(Le,Te,He,Ve){var Ke,Ze,pt,gt,Lt,Nt,Rt,dn=Le.c,Wn=Xa;if(dn){e:{for(Ke=1,gt=dn[0];gt>=10;gt/=10,Ke++);if(Ze=Te-Ke,Ze<0)Ze+=br,pt=Te,Lt=dn[Nt=0],Rt=As(Lt/Wn[Ke-pt-1]%10);else if(Nt=Ra((Ze+1)/br),Nt>=dn.length)if(Ve){for(;dn.length<=Nt;dn.push(0));Lt=Rt=0,Ke=1,Ze%=br,pt=Ze-br+1}else break e;else{for(Lt=gt=dn[Nt],Ke=1;gt>=10;gt/=10,Ke++);Ze%=br,pt=Ze-br+Ke,Rt=pt<0?0:As(Lt/Wn[Ke-pt-1]%10)}if(Ve=Ve||Te<0||dn[Nt+1]!=null||(pt<0?Lt:Lt%Wn[Ke-pt-1]),Ve=He<4?(Rt||Ve)&&(He==0||He==(Le.s<0?3:2)):Rt>5||Rt==5&&(He==4||Ve||He==6&&(Ze>0?pt>0?Lt/Wn[Ke-pt]:0:dn[Nt-1])%10&1||He==(Le.s<0?8:7)),Te<1||!dn[0])return dn.length=0,Ve?(Te-=Le.e+1,dn[0]=Wn[(br-Te%br)%br],Le.e=-Te||0):dn[0]=Le.e=0,Le;if(Ze==0?(dn.length=Nt,gt=1,Nt--):(dn.length=Nt+1,gt=Wn[br-Ze],dn[Nt]=pt>0?As(Lt/Wn[Ke-pt]%Wn[pt])*gt:0),Ve)for(;;)if(Nt==0){for(Ze=1,pt=dn[0];pt>=10;pt/=10,Ze++);for(pt=dn[0]+=gt,gt=1;pt>=10;pt/=10,gt++);Ze!=gt&&(Le.e++,dn[0]==No&&(dn[0]=1));break}else{if(dn[Nt]+=gt,dn[Nt]!=No)break;dn[Nt--]=0,gt=1}for(Ze=dn.length;dn[--Ze]===0;dn.pop());}Le.e>Xe?Le.c=Le.e=null:Le.e<it&&(Le.c=[Le.e=0])}return Le}function Vt(Le){var Te,He=Le.e;return He===null?Le.toString():(Te=Ks(Le.c),Te=He<=be||He>=Me?P(Te,He):W(Te,He,"0"),Le.s<0?"-"+Te:Te)}return M.absoluteValue=M.abs=function(){var Le=new rt(this);return Le.s<0&&(Le.s=1),Le},M.comparedTo=function(Le,Te){return _a(this,new rt(Le,Te))},M.decimalPlaces=M.dp=function(Le,Te){var He,Ve,Ke,Ze=this;if(Le!=null)return c(Le,0,xo),Te==null?Te=le:c(Te,0,8),At(new rt(Ze),Le+Ze.e+1,Te);if(!(He=Ze.c))return null;if(Ve=((Ke=He.length-1)-Ys(this.e/br))*br,Ke=He[Ke])for(;Ke%10==0;Ke/=10,Ve--);return Ve<0&&(Ve=0),Ve},M.dividedBy=M.div=function(Le,Te){return g(this,new rt(Le,Te),ne,le)},M.dividedToIntegerBy=M.idiv=function(Le,Te){return g(this,new rt(Le,Te),0,1)},M.exponentiatedBy=M.pow=function(Le,Te){var He,Ve,Ke,Ze,pt,gt,Lt,Nt,Rt,dn=this;if(Le=new rt(Le),Le.c&&!Le.isInteger())throw Error(zi+"Exponent not an integer: "+Vt(Le));if(Te!=null&&(Te=new rt(Te)),gt=Le.e>14,!dn.c||!dn.c[0]||dn.c[0]==1&&!dn.e&&dn.c.length==1||!Le.c||!Le.c[0])return Rt=new rt(Math.pow(+Vt(dn),gt?Le.s*(2-y(Le)):+Vt(Le))),Te?Rt.mod(Te):Rt;if(Lt=Le.s<0,Te){if(Te.c?!Te.c[0]:!Te.s)return new rt(NaN);Ve=!Lt&&dn.isInteger()&&Te.isInteger(),Ve&&(dn=dn.mod(Te))}else{if(Le.e>9&&(dn.e>0||dn.e<-1||(dn.e==0?dn.c[0]>1||gt&&dn.c[1]>=24e7:dn.c[0]<8e13||gt&&dn.c[0]<=9999975e7)))return Ze=dn.s<0&&y(Le)?-0:0,dn.e>-1&&(Ze=1/Ze),new rt(Lt?1/Ze:Ze);on&&(Ze=Ra(on/br+2))}for(gt?(He=new rt(.5),Lt&&(Le.s=1),Nt=y(Le)):(Ke=Math.abs(+Vt(Le)),Nt=Ke%2),Rt=new rt(H);;){if(Nt){if(Rt=Rt.times(dn),!Rt.c)break;Ze?Rt.c.length>Ze&&(Rt.c.length=Ze):Ve&&(Rt=Rt.mod(Te))}if(Ke){if(Ke=As(Ke/2),Ke===0)break;Nt=Ke%2}else if(Le=Le.times(He),At(Le,Le.e+1,1),Le.e>14)Nt=y(Le);else{if(Ke=+Vt(Le),Ke===0)break;Nt=Ke%2}dn=dn.times(dn),Ze?dn.c&&dn.c.length>Ze&&(dn.c.length=Ze):Ve&&(dn=dn.mod(Te))}return Ve?Rt:(Lt&&(Rt=H.div(Rt)),Te?Rt.mod(Te):Ze?At(Rt,on,le,pt):Rt)},M.integerValue=function(Le){var Te=new rt(this);return Le==null?Le=le:c(Le,0,8),At(Te,Te.e+1,Le)},M.isEqualTo=M.eq=function(Le,Te){return _a(this,new rt(Le,Te))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(Le,Te){return _a(this,new rt(Le,Te))>0},M.isGreaterThanOrEqualTo=M.gte=function(Le,Te){return(Te=_a(this,new rt(Le,Te)))===1||Te===0},M.isInteger=function(){return!!this.c&&Ys(this.e/br)>this.c.length-2},M.isLessThan=M.lt=function(Le,Te){return _a(this,new rt(Le,Te))<0},M.isLessThanOrEqualTo=M.lte=function(Le,Te){return(Te=_a(this,new rt(Le,Te)))===-1||Te===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(Le,Te){var He,Ve,Ke,Ze,pt=this,gt=pt.s;if(Le=new rt(Le,Te),Te=Le.s,!gt||!Te)return new rt(NaN);if(gt!=Te)return Le.s=-Te,pt.plus(Le);var Lt=pt.e/br,Nt=Le.e/br,Rt=pt.c,dn=Le.c;if(!Lt||!Nt){if(!Rt||!dn)return Rt?(Le.s=-Te,Le):new rt(dn?pt:NaN);if(!Rt[0]||!dn[0])return dn[0]?(Le.s=-Te,Le):new rt(Rt[0]?pt:le==3?-0:0)}if(Lt=Ys(Lt),Nt=Ys(Nt),Rt=Rt.slice(),gt=Lt-Nt){for((Ze=gt<0)?(gt=-gt,Ke=Rt):(Nt=Lt,Ke=dn),Ke.reverse(),Te=gt;Te--;Ke.push(0));Ke.reverse()}else for(Ve=(Ze=(gt=Rt.length)<(Te=dn.length))?gt:Te,gt=Te=0;Te<Ve;Te++)if(Rt[Te]!=dn[Te]){Ze=Rt[Te]<dn[Te];break}if(Ze&&(Ke=Rt,Rt=dn,dn=Ke,Le.s=-Le.s),Te=(Ve=dn.length)-(He=Rt.length),Te>0)for(;Te--;Rt[He++]=0);for(Te=No-1;Ve>gt;){if(Rt[--Ve]<dn[Ve]){for(He=Ve;He&&!Rt[--He];Rt[He]=Te);--Rt[He],Rt[Ve]+=No}Rt[Ve]-=dn[Ve]}for(;Rt[0]==0;Rt.splice(0,1),--Nt);return Rt[0]?Wt(Le,Rt,Nt):(Le.s=le==3?-1:1,Le.c=[Le.e=0],Le)},M.modulo=M.mod=function(Le,Te){var He,Ve,Ke=this;return Le=new rt(Le,Te),!Ke.c||!Le.s||Le.c&&!Le.c[0]?new rt(NaN):!Le.c||Ke.c&&!Ke.c[0]?new rt(Ke):(Ut==9?(Ve=Le.s,Le.s=1,He=g(Ke,Le,0,3),Le.s=Ve,He.s*=Ve):He=g(Ke,Le,0,Ut),Le=Ke.minus(He.times(Le)),!Le.c[0]&&Ut==1&&(Le.s=Ke.s),Le)},M.multipliedBy=M.times=function(Le,Te){var He,Ve,Ke,Ze,pt,gt,Lt,Nt,Rt,dn,Wn,Qn,cr,vi,Ii,ei=this,Hi=ei.c,Fo=(Le=new rt(Le,Te)).c;if(!Hi||!Fo||!Hi[0]||!Fo[0])return!ei.s||!Le.s||Hi&&!Hi[0]&&!Fo||Fo&&!Fo[0]&&!Hi?Le.c=Le.e=Le.s=null:(Le.s*=ei.s,!Hi||!Fo?Le.c=Le.e=null:(Le.c=[0],Le.e=0)),Le;for(Ve=Ys(ei.e/br)+Ys(Le.e/br),Le.s*=ei.s,Lt=Hi.length,dn=Fo.length,Lt<dn&&(cr=Hi,Hi=Fo,Fo=cr,Ke=Lt,Lt=dn,dn=Ke),Ke=Lt+dn,cr=[];Ke--;cr.push(0));for(vi=No,Ii=ya,Ke=dn;--Ke>=0;){for(He=0,Wn=Fo[Ke]%Ii,Qn=Fo[Ke]/Ii|0,pt=Lt,Ze=Ke+pt;Ze>Ke;)Nt=Hi[--pt]%Ii,Rt=Hi[pt]/Ii|0,gt=Qn*Nt+Rt*Wn,Nt=Wn*Nt+gt%Ii*Ii+cr[Ze]+He,He=(Nt/vi|0)+(gt/Ii|0)+Qn*Rt,cr[Ze--]=Nt%vi;cr[Ze]=He}return He?++Ve:cr.splice(0,1),Wt(Le,cr,Ve)},M.negated=function(){var Le=new rt(this);return Le.s=-Le.s||null,Le},M.plus=function(Le,Te){var He,Ve=this,Ke=Ve.s;if(Le=new rt(Le,Te),Te=Le.s,!Ke||!Te)return new rt(NaN);if(Ke!=Te)return Le.s=-Te,Ve.minus(Le);var Ze=Ve.e/br,pt=Le.e/br,gt=Ve.c,Lt=Le.c;if(!Ze||!pt){if(!gt||!Lt)return new rt(Ke/0);if(!gt[0]||!Lt[0])return Lt[0]?Le:new rt(gt[0]?Ve:Ke*0)}if(Ze=Ys(Ze),pt=Ys(pt),gt=gt.slice(),Ke=Ze-pt){for(Ke>0?(pt=Ze,He=Lt):(Ke=-Ke,He=gt),He.reverse();Ke--;He.push(0));He.reverse()}for(Ke=gt.length,Te=Lt.length,Ke-Te<0&&(He=Lt,Lt=gt,gt=He,Te=Ke),Ke=0;Te;)Ke=(gt[--Te]=gt[Te]+Lt[Te]+Ke)/No|0,gt[Te]=No===gt[Te]?0:gt[Te]%No;return Ke&&(gt=[Ke].concat(gt),++pt),Wt(Le,gt,pt)},M.precision=M.sd=function(Le,Te){var He,Ve,Ke,Ze=this;if(Le!=null&&Le!==!!Le)return c(Le,1,xo),Te==null?Te=le:c(Te,0,8),At(new rt(Ze),Le,Te);if(!(He=Ze.c))return null;if(Ke=He.length-1,Ve=Ke*br+1,Ke=He[Ke]){for(;Ke%10==0;Ke/=10,Ve--);for(Ke=He[0];Ke>=10;Ke/=10,Ve++);}return Le&&Ze.e+1>Ve&&(Ve=Ze.e+1),Ve},M.shiftedBy=function(Le){return c(Le,-9007199254740991,Za),this.times("1e"+Le)},M.squareRoot=M.sqrt=function(){var Le,Te,He,Ve,Ke,Ze=this,pt=Ze.c,gt=Ze.s,Lt=Ze.e,Nt=ne+4,Rt=new rt("0.5");if(gt!==1||!pt||!pt[0])return new rt(!gt||gt<0&&(!pt||pt[0])?NaN:pt?Ze:1/0);if(gt=Math.sqrt(+Vt(Ze)),gt==0||gt==1/0?(Te=Ks(pt),(Te.length+Lt)%2==0&&(Te+="0"),gt=Math.sqrt(+Te),Lt=Ys((Lt+1)/2)-(Lt<0||Lt%2),gt==1/0?Te="5e"+Lt:(Te=gt.toExponential(),Te=Te.slice(0,Te.indexOf("e")+1)+Lt),He=new rt(Te)):He=new rt(gt+""),He.c[0]){for(Lt=He.e,gt=Lt+Nt,gt<3&&(gt=0);;)if(Ke=He,He=Rt.times(Ke.plus(g(Ze,Ke,Nt,1))),Ks(Ke.c).slice(0,gt)===(Te=Ks(He.c)).slice(0,gt))if(He.e<Lt&&--gt,Te=Te.slice(gt-3,gt+1),Te=="9999"||!Ve&&Te=="4999"){if(!Ve&&(At(Ke,Ke.e+ne+2,0),Ke.times(Ke).eq(Ze))){He=Ke;break}Nt+=4,gt+=4,Ve=1}else{(!+Te||!+Te.slice(1)&&Te.charAt(0)=="5")&&(At(He,He.e+ne+2,1),Le=!He.times(He).eq(Ze));break}}return At(He,He.e+ne+1,le,Le)},M.toExponential=function(Le,Te){return Le!=null&&(c(Le,0,xo),Le++),ct(this,Le,Te,1)},M.toFixed=function(Le,Te){return Le!=null&&(c(Le,0,xo),Le=Le+this.e+1),ct(this,Le,Te)},M.toFormat=function(Le,Te,He){var Ve,Ke=this;if(He==null)Le!=null&&Te&&typeof Te=="object"?(He=Te,Te=null):Le&&typeof Le=="object"?(He=Le,Le=Te=null):He=Mn;else if(typeof He!="object")throw Error(zi+"Argument not an object: "+He);if(Ve=Ke.toFixed(Le,Te),Ke.c){var Ze,pt=Ve.split("."),gt=+He.groupSize,Lt=+He.secondaryGroupSize,Nt=He.groupSeparator||"",Rt=pt[0],dn=pt[1],Wn=Ke.s<0,Qn=Wn?Rt.slice(1):Rt,cr=Qn.length;if(Lt&&(Ze=gt,gt=Lt,Lt=Ze,cr-=Ze),gt>0&&cr>0){for(Ze=cr%gt||gt,Rt=Qn.substr(0,Ze);Ze<cr;Ze+=gt)Rt+=Nt+Qn.substr(Ze,gt);Lt>0&&(Rt+=Nt+Qn.slice(Ze)),Wn&&(Rt="-"+Rt)}Ve=dn?Rt+(He.decimalSeparator||"")+((Lt=+He.fractionGroupSize)?dn.replace(new RegExp("\\d{"+Lt+"}\\B","g"),"$&"+(He.fractionGroupSeparator||"")):dn):Rt}return(He.prefix||"")+Ve+(He.suffix||"")},M.toFraction=function(Le){var Te,He,Ve,Ke,Ze,pt,gt,Lt,Nt,Rt,dn,Wn,Qn=this,cr=Qn.c;if(Le!=null&&(gt=new rt(Le),!gt.isInteger()&&(gt.c||gt.s!==1)||gt.lt(H)))throw Error(zi+"Argument "+(gt.isInteger()?"out of range: ":"not an integer: ")+Vt(gt));if(!cr)return new rt(Qn);for(Te=new rt(H),Nt=He=new rt(H),Ve=Lt=new rt(H),Wn=Ks(cr),Ze=Te.e=Wn.length-Qn.e-1,Te.c[0]=Xa[(pt=Ze%br)<0?br+pt:pt],Le=!Le||gt.comparedTo(Te)>0?Ze>0?Te:Nt:gt,pt=Xe,Xe=1/0,gt=new rt(Wn),Lt.c[0]=0;Rt=g(gt,Te,0,1),Ke=He.plus(Rt.times(Ve)),Ke.comparedTo(Le)!=1;)He=Ve,Ve=Ke,Nt=Lt.plus(Rt.times(Ke=Nt)),Lt=Ke,Te=gt.minus(Rt.times(Ke=Te)),gt=Ke;return Ke=g(Le.minus(He),Ve,0,1),Lt=Lt.plus(Ke.times(Nt)),He=He.plus(Ke.times(Ve)),Lt.s=Nt.s=Qn.s,Ze=Ze*2,dn=g(Nt,Ve,Ze,le).minus(Qn).abs().comparedTo(g(Lt,He,Ze,le).minus(Qn).abs())<1?[Nt,Ve]:[Lt,He],Xe=pt,dn},M.toNumber=function(){return+Vt(this)},M.toPrecision=function(Le,Te){return Le!=null&&c(Le,1,xo),ct(this,Le,Te,2)},M.toString=function(Le){var Te,He=this,Ve=He.s,Ke=He.e;return Ke===null?Ve?(Te="Infinity",Ve<0&&(Te="-"+Te)):Te="NaN":(Le==null?Te=Ke<=be||Ke>=Me?P(Ks(He.c),Ke):W(Ks(He.c),Ke,"0"):Le===10&&yr?(He=At(new rt(He),ne+Ke+1,le),Te=W(Ks(He.c),He.e,"0")):(c(Le,2,Dn.length,"Base"),Te=b(W(Ks(He.c),Ke,"0"),10,Le,Ve,!0)),Ve<0&&He.c[0]&&(Te="-"+Te)),Te},M.valueOf=M.toJSON=function(){return Vt(this)},M._isBigNumber=!0,M[Symbol.toStringTag]="BigNumber",M[Symbol.for("nodejs.util.inspect.custom")]=M.valueOf,d!=null&&rt.set(d),rt}function Ys(d){var g=d|0;return d>0||d===g?g:g-1}function Ks(d){for(var g,b,C=1,M=d.length,H=d[0]+"";C<M;){for(g=d[C++]+"",b=br-g.length;b--;g="0"+g);H+=g}for(M=H.length;H.charCodeAt(--M)===48;);return H.slice(0,M+1||1)}function _a(d,g){var b,C,M=d.c,H=g.c,ne=d.s,le=g.s,be=d.e,Me=g.e;if(!ne||!le)return null;if(b=M&&!M[0],C=H&&!H[0],b||C)return b?C?0:-le:ne;if(ne!=le)return ne;if(b=ne<0,C=be==Me,!M||!H)return C?0:!M^b?1:-1;if(!C)return be>Me^b?1:-1;for(le=(be=M.length)<(Me=H.length)?be:Me,ne=0;ne<le;ne++)if(M[ne]!=H[ne])return M[ne]>H[ne]^b?1:-1;return be==Me?0:be>Me^b?1:-1}function c(d,g,b,C){if(d<g||d>b||d!==As(d))throw Error(zi+(C||"Argument")+(typeof d=="number"?d<g||d>b?" out of range: ":" not an integer: ":" not a primitive number: ")+String(d))}function y(d){var g=d.c.length-1;return Ys(d.e/br)==g&&d.c[g]%2!=0}function P(d,g){return(d.length>1?d.charAt(0)+"."+d.slice(1):d)+(g<0?"e":"e+")+g}function W(d,g,b){var C,M;if(g<0){for(M=b+".";++g;M+=b);d=M+d}else if(C=d.length,++g>C){for(M=b,g-=C;--g;M+=b);d+=M}else g<C&&(d=d.slice(0,g)+"."+d.slice(g));return d}var de=ud(),ke=de,ft=class{constructor(d){tt(this,"key");tt(this,"left",null);tt(this,"right",null);this.key=d}},jt=class extends ft{constructor(d){super(d)}},Zt=class{constructor(){tt(this,"size",0);tt(this,"modificationCount",0);tt(this,"splayCount",0)}splay(d){let g=this.root;if(g==null)return this.compare(d,d),-1;let b=null,C=null,M=null,H=null,ne=g,le=this.compare,be;for(;;)if(be=le(ne.key,d),be>0){let Me=ne.left;if(Me==null||(be=le(Me.key,d),be>0&&(ne.left=Me.right,Me.right=ne,ne=Me,Me=ne.left,Me==null)))break;b==null?C=ne:b.left=ne,b=ne,ne=Me}else if(be<0){let Me=ne.right;if(Me==null||(be=le(Me.key,d),be<0&&(ne.right=Me.left,Me.left=ne,ne=Me,Me=ne.right,Me==null)))break;M==null?H=ne:M.right=ne,M=ne,ne=Me}else break;return M!=null&&(M.right=ne.left,ne.left=H),b!=null&&(b.left=ne.right,ne.right=C),this.root!==ne&&(this.root=ne,this.splayCount++),be}splayMin(d){let g=d,b=g.left;for(;b!=null;){let C=b;g.left=C.right,C.right=g,g=C,b=g.left}return g}splayMax(d){let g=d,b=g.right;for(;b!=null;){let C=b;g.right=C.left,C.left=g,g=C,b=g.right}return g}_delete(d){if(this.root==null||this.splay(d)!=0)return null;let g=this.root,b=g,C=g.left;if(this.size--,C==null)this.root=g.right;else{let M=g.right;g=this.splayMax(C),g.right=M,this.root=g}return this.modificationCount++,b}addNewRoot(d,g){this.size++,this.modificationCount++;let b=this.root;if(b==null){this.root=d;return}g<0?(d.left=b,d.right=b.right,b.right=null):(d.right=b,d.left=b.left,b.left=null),this.root=d}_first(){let d=this.root;return d==null?null:(this.root=this.splayMin(d),this.root)}_last(){let d=this.root;return d==null?null:(this.root=this.splayMax(d),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(d){return this.validKey(d)&&this.splay(d)==0}defaultCompare(){return(d,g)=>d<g?-1:d>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:d=>{this.root=d},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:d=>{this.splayCount=d},splay:d=>this.splay(d),has:d=>this.has(d)}}},hn=class Cg extends Zt{constructor(b,C){super();tt(this,"root",null);tt(this,"compare");tt(this,"validKey");tt(this,Nn,"[object Set]");this.compare=b??this.defaultCompare(),this.validKey=C??(M=>M!=null&&M!=null)}delete(b){return this.validKey(b)?this._delete(b)!=null:!1}deleteAll(b){for(let C of b)this.delete(C)}forEach(b){let C=this[Symbol.iterator](),M;for(;M=C.next(),!M.done;)b(M.value,M.value,this)}add(b){let C=this.splay(b);return C!=0&&this.addNewRoot(new jt(b),C),this}addAndReturn(b){let C=this.splay(b);return C!=0&&this.addNewRoot(new jt(b),C),this.root.key}addAll(b){for(let C of b)this.add(C)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(b){if(b==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(b)<0)return this.root.key;let C=this.root.left;if(C==null)return null;let M=C.right;for(;M!=null;)C=M,M=C.right;return C.key}firstAfter(b){if(b==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(b)>0)return this.root.key;let C=this.root.right;if(C==null)return null;let M=C.left;for(;M!=null;)C=M,M=C.left;return C.key}retainAll(b){let C=new Cg(this.compare,this.validKey),M=this.modificationCount;for(let H of b){if(M!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(H)&&this.splay(H)==0&&C.add(this.root.key)}C.size!=this.size&&(this.root=C.root,this.size=C.size,this.modificationCount++)}lookup(b){return!this.validKey(b)||this.splay(b)!=0?null:this.root.key}intersection(b){let C=new Cg(this.compare,this.validKey);for(let M of this)b.has(M)&&C.add(M);return C}difference(b){let C=new Cg(this.compare,this.validKey);for(let M of this)b.has(M)||C.add(M);return C}union(b){let C=this.clone();return C.addAll(b),C}clone(){let b=new Cg(this.compare,this.validKey);return b.size=this.size,b.root=this.copyNode(this.root),b}copyNode(b){if(b==null)return null;function C(H,ne){let le,be;do{if(le=H.left,be=H.right,le!=null){let Me=new jt(le.key);ne.left=Me,C(le,Me)}if(be!=null){let Me=new jt(be.key);ne.right=Me,H=be,ne=Me}}while(be!=null)}let M=new jt(b.key);return C(b,M),M}toSet(){return this.clone()}entries(){return new Vr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(ur=Symbol.iterator,Nn=Symbol.toStringTag,ur)](){return new lr(this.wrap())}},$n=class{constructor(d){tt(this,"tree");tt(this,"path",new Array);tt(this,"modificationCount",null);tt(this,"splayCount");this.tree=d,this.splayCount=d.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let d=this.path[this.path.length-1];return this.getValue(d)}rebuildPath(d){this.path.splice(0,this.path.length),this.tree.splay(d),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(d){for(;d!=null;)this.path.push(d),d=d.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let b=this.tree.getRoot();for(;b!=null;)this.path.push(b),b=b.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let d=this.path[this.path.length-1],g=d.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===d;)d=this.path.pop();return this.path.length>0}},lr=class extends $n{getValue(d){return d.key}},Vr=class extends $n{getValue(d){return[d.key,d.key]}},Ts=d=>d,hs=d=>{if(d){let g=new hn(Oo(d)),b=new hn(Oo(d)),C=(H,ne)=>ne.addAndReturn(H),M=H=>({x:C(H.x,g),y:C(H.y,b)});return M({x:new ke(0),y:new ke(0)}),M}return Ts},Zs=d=>({set:g=>{es=Zs(g)},reset:()=>Zs(d),compare:Oo(d),snap:hs(d),orient:ia(d)}),es=Zs(),Ro=(d,g)=>d.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(d.ur.x)&&d.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(d.ur.y),cd=(d,g)=>{if(g.ur.x.isLessThan(d.ll.x)||d.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(d.ll.y)||d.ur.y.isLessThan(g.ll.y))return null;let b=d.ll.x.isLessThan(g.ll.x)?g.ll.x:d.ll.x,C=d.ur.x.isLessThan(g.ur.x)?d.ur.x:g.ur.x,M=d.ll.y.isLessThan(g.ll.y)?g.ll.y:d.ll.y,H=d.ur.y.isLessThan(g.ur.y)?d.ur.y:g.ur.y;return{ll:{x:b,y:M},ur:{x:C,y:H}}},Ba=(d,g)=>d.x.times(g.y).minus(d.y.times(g.x)),ba=(d,g)=>d.x.times(g.x).plus(d.y.times(g.y)),sa=d=>ba(d,d).sqrt(),Ih=(d,g,b)=>{let C={x:g.x.minus(d.x),y:g.y.minus(d.y)},M={x:b.x.minus(d.x),y:b.y.minus(d.y)};return Ba(M,C).div(sa(M)).div(sa(C))},Nu=(d,g,b)=>{let C={x:g.x.minus(d.x),y:g.y.minus(d.y)},M={x:b.x.minus(d.x),y:b.y.minus(d.y)};return ba(M,C).div(sa(M)).div(sa(C))},mi=(d,g,b)=>g.y.isZero()?null:{x:d.x.plus(g.x.div(g.y).times(b.minus(d.y))),y:b},co=(d,g,b)=>g.x.isZero()?null:{x:b,y:d.y.plus(g.y.div(g.x).times(b.minus(d.x)))},$e=(d,g,b,C)=>{if(g.x.isZero())return co(b,C,d.x);if(C.x.isZero())return co(d,g,b.x);if(g.y.isZero())return mi(b,C,d.y);if(C.y.isZero())return mi(d,g,b.y);let M=Ba(g,C);if(M.isZero())return null;let H={x:b.x.minus(d.x),y:b.y.minus(d.y)},ne=Ba(H,g).div(M),le=Ba(H,C).div(M),be=d.x.plus(le.times(g.x)),Me=b.x.plus(ne.times(C.x)),it=d.y.plus(le.times(g.y)),Xe=b.y.plus(ne.times(C.y)),Pt=be.plus(Me).div(2),Ut=it.plus(Xe).div(2);return{x:Pt,y:Ut}},Bo=class qE{constructor(g,b){tt(this,"point");tt(this,"isLeft");tt(this,"segment");tt(this,"otherSE");tt(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=b}static compare(g,b){let C=qE.comparePoints(g.point,b.point);return C!==0?C:(g.point!==b.point&&g.link(b),g.isLeft!==b.isLeft?g.isLeft?1:-1:Xs.compare(g.segment,b.segment))}static comparePoints(g,b){return g.x.isLessThan(b.x)?-1:g.x.isGreaterThan(b.x)?1:g.y.isLessThan(b.y)?-1:g.y.isGreaterThan(b.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let b=g.point.events;for(let C=0,M=b.length;C<M;C++){let H=b[C];this.point.events.push(H),H.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let b=0;b<g;b++){let C=this.point.events[b];if(C.segment.consumedBy===void 0)for(let M=b+1;M<g;M++){let H=this.point.events[M];H.consumedBy===void 0&&C.otherSE.point.events===H.otherSE.point.events&&C.segment.consume(H.segment)}}}getAvailableLinkedEvents(){let g=[];for(let b=0,C=this.point.events.length;b<C;b++){let M=this.point.events[b];M!==this&&!M.segment.ringOut&&M.segment.isInResult()&&g.push(M)}return g}getLeftmostComparator(g){let b=new Map,C=M=>{let H=M.otherSE;b.set(M,{sine:Ih(this.point,g.point,H.point),cosine:Nu(this.point,g.point,H.point)})};return(M,H)=>{b.has(M)||C(M),b.has(H)||C(H);let{sine:ne,cosine:le}=b.get(M),{sine:be,cosine:Me}=b.get(H);return ne.isGreaterThanOrEqualTo(0)&&be.isGreaterThanOrEqualTo(0)?le.isLessThan(Me)?1:le.isGreaterThan(Me)?-1:0:ne.isLessThan(0)&&be.isLessThan(0)?le.isLessThan(Me)?-1:le.isGreaterThan(Me)?1:0:be.isLessThan(ne)?-1:be.isGreaterThan(ne)?1:0}}},rc=0,Xs=class av{constructor(g,b,C,M){tt(this,"id");tt(this,"leftSE");tt(this,"rightSE");tt(this,"rings");tt(this,"windings");tt(this,"ringOut");tt(this,"consumedBy");tt(this,"prev");tt(this,"_prevInResult");tt(this,"_beforeState");tt(this,"_afterState");tt(this,"_isInResult");this.id=++rc,this.leftSE=g,g.segment=this,g.otherSE=b,this.rightSE=b,b.segment=this,b.otherSE=g,this.rings=C,this.windings=M}static compare(g,b){let C=g.leftSE.point.x,M=b.leftSE.point.x,H=g.rightSE.point.x,ne=b.rightSE.point.x;if(ne.isLessThan(C))return 1;if(H.isLessThan(M))return-1;let le=g.leftSE.point.y,be=b.leftSE.point.y,Me=g.rightSE.point.y,it=b.rightSE.point.y;if(C.isLessThan(M)){if(be.isLessThan(le)&&be.isLessThan(Me))return 1;if(be.isGreaterThan(le)&&be.isGreaterThan(Me))return-1;let Xe=g.comparePoint(b.leftSE.point);if(Xe<0)return 1;if(Xe>0)return-1;let Pt=b.comparePoint(g.rightSE.point);return Pt!==0?Pt:-1}if(C.isGreaterThan(M)){if(le.isLessThan(be)&&le.isLessThan(it))return-1;if(le.isGreaterThan(be)&&le.isGreaterThan(it))return 1;let Xe=b.comparePoint(g.leftSE.point);if(Xe!==0)return Xe;let Pt=g.comparePoint(b.rightSE.point);return Pt<0?1:Pt>0?-1:1}if(le.isLessThan(be))return-1;if(le.isGreaterThan(be))return 1;if(H.isLessThan(ne)){let Xe=b.comparePoint(g.rightSE.point);if(Xe!==0)return Xe}if(H.isGreaterThan(ne)){let Xe=g.comparePoint(b.rightSE.point);if(Xe<0)return 1;if(Xe>0)return-1}if(!H.eq(ne)){let Xe=Me.minus(le),Pt=H.minus(C),Ut=it.minus(be),on=ne.minus(M);if(Xe.isGreaterThan(Pt)&&Ut.isLessThan(on))return 1;if(Xe.isLessThan(Pt)&&Ut.isGreaterThan(on))return-1}return H.isGreaterThan(ne)?1:H.isLessThan(ne)||Me.isLessThan(it)?-1:Me.isGreaterThan(it)?1:g.id<b.id?-1:g.id>b.id?1:0}static fromRing(g,b,C){let M,H,ne,le=Bo.comparePoints(g,b);if(le<0)M=g,H=b,ne=1;else if(le>0)M=b,H=g,ne=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);let be=new Bo(M,!0),Me=new Bo(H,!1);return new av(be,Me,[C],[ne])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,b=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(b)?g:b},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(b)?g:b}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return es.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let b=this.bbox(),C=g.bbox(),M=cd(b,C);if(M===null)return null;let H=this.leftSE.point,ne=this.rightSE.point,le=g.leftSE.point,be=g.rightSE.point,Me=Ro(b,le)&&this.comparePoint(le)===0,it=Ro(C,H)&&g.comparePoint(H)===0,Xe=Ro(b,be)&&this.comparePoint(be)===0,Pt=Ro(C,ne)&&g.comparePoint(ne)===0;if(it&&Me)return Pt&&!Xe?ne:!Pt&&Xe?be:null;if(it)return Xe&&H.x.eq(be.x)&&H.y.eq(be.y)?null:H;if(Me)return Pt&&ne.x.eq(le.x)&&ne.y.eq(le.y)?null:le;if(Pt&&Xe)return null;if(Pt)return ne;if(Xe)return be;let Ut=$e(H,this.vector(),le,g.vector());return Ut===null||!Ro(M,Ut)?null:es.snap(Ut)}split(g){let b=[],C=g.events!==void 0,M=new Bo(g,!0),H=new Bo(g,!1),ne=this.rightSE;this.replaceRightSE(H),b.push(H),b.push(M);let le=new av(M,ne,this.rings.slice(),this.windings.slice());return Bo.comparePoints(le.leftSE.point,le.rightSE.point)>0&&le.swapEvents(),Bo.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),C&&(M.checkForConsuming(),H.checkForConsuming()),b}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let b=0,C=this.windings.length;b<C;b++)this.windings[b]*=-1}consume(g){let b=this,C=g;for(;b.consumedBy;)b=b.consumedBy;for(;C.consumedBy;)C=C.consumedBy;let M=av.compare(b,C);if(M!==0){if(M>0){let H=b;b=C,C=H}if(b.prev===C){let H=b;b=C,C=H}for(let H=0,ne=C.rings.length;H<ne;H++){let le=C.rings[H],be=C.windings[H],Me=b.rings.indexOf(le);Me===-1?(b.rings.push(le),b.windings.push(be)):b.windings[Me]+=be}C.rings=null,C.windings=null,C.consumedBy=b,C.leftSE.consumedBy=b.leftSE,C.rightSE.consumedBy=b.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let b=this._afterState.rings,C=this._afterState.windings,M=this._afterState.multiPolys;for(let le=0,be=this.rings.length;le<be;le++){let Me=this.rings[le],it=this.windings[le],Xe=b.indexOf(Me);Xe===-1?(b.push(Me),C.push(it)):C[Xe]+=it}let H=[],ne=[];for(let le=0,be=b.length;le<be;le++){if(C[le]===0)continue;let Me=b[le],it=Me.poly;if(ne.indexOf(it)===-1)if(Me.isExterior)H.push(it);else{ne.indexOf(it)===-1&&ne.push(it);let Xe=H.indexOf(Me.poly);Xe!==-1&&H.splice(Xe,1)}}for(let le=0,be=H.length;le<be;le++){let Me=H[le].multiPoly;M.indexOf(Me)===-1&&M.push(Me)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,b=this.afterState().multiPolys;switch(qd.type){case"union":{let C=g.length===0,M=b.length===0;this._isInResult=C!==M;break}case"intersection":{let C,M;g.length<b.length?(C=g.length,M=b.length):(C=b.length,M=g.length),this._isInResult=M===qd.numMultiPolys&&C<M;break}case"xor":{let C=Math.abs(g.length-b.length);this._isInResult=C%2===1;break}case"difference":{let C=M=>M.length===1&&M[0].isSubject;this._isInResult=C(g)!==C(b);break}}return this._isInResult}},Wr=class{constructor(d,g,b){tt(this,"poly");tt(this,"isExterior");tt(this,"segments");tt(this,"bbox");if(!Array.isArray(d)||d.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=b,this.segments=[],typeof d[0][0]!="number"||typeof d[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let C=es.snap({x:new ke(d[0][0]),y:new ke(d[0][1])});this.bbox={ll:{x:C.x,y:C.y},ur:{x:C.x,y:C.y}};let M=C;for(let H=1,ne=d.length;H<ne;H++){if(typeof d[H][0]!="number"||typeof d[H][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let le=es.snap({x:new ke(d[H][0]),y:new ke(d[H][1])});le.x.eq(M.x)&&le.y.eq(M.y)||(this.segments.push(Xs.fromRing(M,le,this)),le.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=le.x),le.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=le.y),le.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=le.x),le.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=le.y),M=le)}(!C.x.eq(M.x)||!C.y.eq(M.y))&&this.segments.push(Xs.fromRing(M,C,this))}getSweepEvents(){let d=[];for(let g=0,b=this.segments.length;g<b;g++){let C=this.segments[g];d.push(C.leftSE),d.push(C.rightSE)}return d}},Gd=class{constructor(d,g){tt(this,"multiPoly");tt(this,"exteriorRing");tt(this,"interiorRings");tt(this,"bbox");if(!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Wr(d[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let b=1,C=d.length;b<C;b++){let M=new Wr(d[b],this,!1);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.interiorRings.push(M)}this.multiPoly=g}getSweepEvents(){let d=this.exteriorRing.getSweepEvents();for(let g=0,b=this.interiorRings.length;g<b;g++){let C=this.interiorRings[g].getSweepEvents();for(let M=0,H=C.length;M<H;M++)d.push(C[M])}return d}},Tf=class{constructor(d,g){tt(this,"isSubject");tt(this,"polys");tt(this,"bbox");if(!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof d[0][0][0]=="number"&&(d=[d])}catch{}this.polys=[],this.bbox={ll:{x:new ke(Number.POSITIVE_INFINITY),y:new ke(Number.POSITIVE_INFINITY)},ur:{x:new ke(Number.NEGATIVE_INFINITY),y:new ke(Number.NEGATIVE_INFINITY)}};for(let b=0,C=d.length;b<C;b++){let M=new Gd(d[b],this);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.polys.push(M)}this.isSubject=g}getSweepEvents(){let d=[];for(let g=0,b=this.polys.length;g<b;g++){let C=this.polys[g].getSweepEvents();for(let M=0,H=C.length;M<H;M++)d.push(C[M])}return d}},Wd=class Pb{constructor(g){tt(this,"events");tt(this,"poly");tt(this,"_isExteriorRing");tt(this,"_enclosingRing");this.events=g;for(let b=0,C=g.length;b<C;b++)g[b].segment.ringOut=this;this.poly=null}static factory(g){let b=[];for(let C=0,M=g.length;C<M;C++){let H=g[C];if(!H.isInResult()||H.ringOut)continue;let ne=null,le=H.leftSE,be=H.rightSE,Me=[le],it=le.point,Xe=[];for(;ne=le,le=be,Me.push(le),le.point!==it;)for(;;){let Pt=le.getAvailableLinkedEvents();if(Pt.length===0){let Mn=Me[0].point,Dn=Me[Me.length-1].point;throw new Error(`Unable to complete output ring starting at [${Mn.x}, ${Mn.y}]. Last matching segment found ends at [${Dn.x}, ${Dn.y}].`)}if(Pt.length===1){be=Pt[0].otherSE;break}let Ut=null;for(let Mn=0,Dn=Xe.length;Mn<Dn;Mn++)if(Xe[Mn].point===le.point){Ut=Mn;break}if(Ut!==null){let Mn=Xe.splice(Ut)[0],Dn=Me.splice(Mn.index);Dn.unshift(Dn[0].otherSE),b.push(new Pb(Dn.reverse()));continue}Xe.push({index:Me.length,point:le.point});let on=le.getLeftmostComparator(ne);be=Pt.sort(on)[0].otherSE;break}b.push(new Pb(Me))}return b}getGeom(){let g=this.events[0].point,b=[g];for(let Me=1,it=this.events.length-1;Me<it;Me++){let Xe=this.events[Me].point,Pt=this.events[Me+1].point;es.orient(Xe,g,Pt)!==0&&(b.push(Xe),g=Xe)}if(b.length===1)return null;let C=b[0],M=b[1];es.orient(C,g,M)===0&&b.shift(),b.push(b[0]);let H=this.isExteriorRing()?1:-1,ne=this.isExteriorRing()?0:b.length-1,le=this.isExteriorRing()?b.length:-1,be=[];for(let Me=ne;Me!=le;Me+=H)be.push([b[Me].x.toNumber(),b[Me].y.toNumber()]);return be}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var M,H;let g=this.events[0];for(let ne=1,le=this.events.length;ne<le;ne++){let be=this.events[ne];Bo.compare(g,be)>0&&(g=be)}let b=g.segment.prevInResult(),C=b?b.prevInResult():null;for(;;){if(!b)return null;if(!C)return b.ringOut;if(C.ringOut!==b.ringOut)return((M=C.ringOut)==null?void 0:M.enclosingRing())!==b.ringOut?b.ringOut:(H=b.ringOut)==null?void 0:H.enclosingRing();b=C.prevInResult(),C=b?b.prevInResult():null}}},bl=class{constructor(d){tt(this,"exteriorRing");tt(this,"interiorRings");this.exteriorRing=d,d.poly=this,this.interiorRings=[]}addInterior(d){this.interiorRings.push(d),d.poly=this}getGeom(){let d=this.exteriorRing.getGeom();if(d===null)return null;let g=[d];for(let b=0,C=this.interiorRings.length;b<C;b++){let M=this.interiorRings[b].getGeom();M!==null&&g.push(M)}return g}},dd=class{constructor(d){tt(this,"rings");tt(this,"polys");this.rings=d,this.polys=this._composePolys(d)}getGeom(){let d=[];for(let g=0,b=this.polys.length;g<b;g++){let C=this.polys[g].getGeom();C!==null&&d.push(C)}return d}_composePolys(d){var b;let g=[];for(let C=0,M=d.length;C<M;C++){let H=d[C];if(!H.poly)if(H.isExteriorRing())g.push(new bl(H));else{let ne=H.enclosingRing();ne!=null&&ne.poly||g.push(new bl(ne)),(b=ne==null?void 0:ne.poly)==null||b.addInterior(H)}}return g}},Oh=class{constructor(d,g=Xs.compare){tt(this,"queue");tt(this,"tree");tt(this,"segments");this.queue=d,this.tree=new hn(g),this.segments=[]}process(d){let g=d.segment,b=[];if(d.consumedBy)return d.isLeft?this.queue.delete(d.otherSE):this.tree.delete(g),b;d.isLeft&&this.tree.add(g);let C=g,M=g;do C=this.tree.lastBefore(C);while(C!=null&&C.consumedBy!=null);do M=this.tree.firstAfter(M);while(M!=null&&M.consumedBy!=null);if(d.isLeft){let H=null;if(C){let le=C.getIntersection(g);if(le!==null&&(g.isAnEndpoint(le)||(H=le),!C.isAnEndpoint(le))){let be=this._splitSafely(C,le);for(let Me=0,it=be.length;Me<it;Me++)b.push(be[Me])}}let ne=null;if(M){let le=M.getIntersection(g);if(le!==null&&(g.isAnEndpoint(le)||(ne=le),!M.isAnEndpoint(le))){let be=this._splitSafely(M,le);for(let Me=0,it=be.length;Me<it;Me++)b.push(be[Me])}}if(H!==null||ne!==null){let le=null;H===null?le=ne:ne===null?le=H:le=Bo.comparePoints(H,ne)<=0?H:ne,this.queue.delete(g.rightSE),b.push(g.rightSE);let be=g.split(le);for(let Me=0,it=be.length;Me<it;Me++)b.push(be[Me])}b.length>0?(this.tree.delete(g),b.push(d)):(this.segments.push(g),g.prev=C)}else{if(C&&M){let H=C.getIntersection(M);if(H!==null){if(!C.isAnEndpoint(H)){let ne=this._splitSafely(C,H);for(let le=0,be=ne.length;le<be;le++)b.push(ne[le])}if(!M.isAnEndpoint(H)){let ne=this._splitSafely(M,H);for(let le=0,be=ne.length;le<be;le++)b.push(ne[le])}}}this.tree.delete(g)}return b}_splitSafely(d,g){this.tree.delete(d);let b=d.rightSE;this.queue.delete(b);let C=d.split(g);return C.push(b),d.consumedBy===void 0&&this.tree.add(d),C}},Gp=class{constructor(){tt(this,"type");tt(this,"numMultiPolys")}run(d,g,b){Rc.type=d;let C=[new Tf(g,!0)];for(let be=0,Me=b.length;be<Me;be++)C.push(new Tf(b[be],!1));if(Rc.numMultiPolys=C.length,Rc.type==="difference"){let be=C[0],Me=1;for(;Me<C.length;)cd(C[Me].bbox,be.bbox)!==null?Me++:C.splice(Me,1)}if(Rc.type==="intersection")for(let be=0,Me=C.length;be<Me;be++){let it=C[be];for(let Xe=be+1,Pt=C.length;Xe<Pt;Xe++)if(cd(it.bbox,C[Xe].bbox)===null)return[]}let M=new hn(Bo.compare);for(let be=0,Me=C.length;be<Me;be++){let it=C[be].getSweepEvents();for(let Xe=0,Pt=it.length;Xe<Pt;Xe++)M.add(it[Xe])}let H=new Oh(M),ne=null;for(M.size!=0&&(ne=M.first(),M.delete(ne));ne;){let be=H.process(ne);for(let Me=0,it=be.length;Me<it;Me++){let Xe=be[Me];Xe.consumedBy===void 0&&M.add(Xe)}M.size!=0?(ne=M.first(),M.delete(ne)):ne=null}es.reset();let le=Wd.factory(H.segments);return new dd(le).getGeom()}},Rc=new Gp,qd=Rc,vu=(d,...g)=>qd.run("intersection",d,g),Wp=(d,...g)=>qd.run("difference",d,g);es.set;function Yd(d){let g={type:"Feature"};return g.geometry=d,g}function Kd(d){return d.type==="Feature"?d.geometry:d}function Df(d){return d&&d.geometry&&d.geometry.coordinates?d.geometry.coordinates:d}function If(d){return Yd({type:"LineString",coordinates:d})}function Ja(d){return Yd({type:"MultiLineString",coordinates:d})}function Of(d){return Yd({type:"Polygon",coordinates:d})}function Nf(d){return Yd({type:"MultiPolygon",coordinates:d})}function Rf(d,g){let b=Kd(d),C=Kd(g),M=vu(b.coordinates,C.coordinates);return M.length===0?null:M.length===1?Of(M[0]):Nf(M)}function w(d,g){let b=Kd(d),C=Kd(g),M=Wp(b.coordinates,C.coordinates);return M.length===0?null:M.length===1?Of(M[0]):Nf(M)}function D(d){return Array.isArray(d)?1+D(d[0]):-1}function K(d){d instanceof L.Polyline&&(d=d.toGeoJSON(15));let g=Df(d),b=D(g),C=[];return b>1?g.forEach(M=>{C.push(If(M))}):C.push(d),C}function he(d){let g=[];return d.eachLayer(b=>{g.push(Df(b.toGeoJSON(15)))}),Ja(g)}bs.Cut=bs.Polygon.extend({initialize(d){this._map=d,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=2)return;let g=L.polygon(d,this.options.pathOptions);g._latlngInfos=this._layer._latlngInfo,this.cut(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:C,originalLayer:M})=>{this._fireCut(M,C,M),this._fireCut(this._map,C,M),M.pm._fireEdit()}),this._editedLayers=[];let b=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(b))},cut(d){let g=this._map._layers,b=d._latlngInfos||[];Object.keys(g).map(C=>g[C]).filter(C=>C.pm).filter(C=>!C._pmTempLayer).filter(C=>!L.PM.optIn&&!C.options.pmIgnore||L.PM.optIn&&C.options.pmIgnore===!1).filter(C=>C instanceof L.Polyline).filter(C=>C!==d).filter(C=>C.pm.options.allowCutting).filter(C=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(C)>-1:!0).filter(C=>!this._layerGroup.hasLayer(C)).filter(C=>{try{let M=!!Io(d.toGeoJSON(15),C.toGeoJSON(15)).features.length>0;return M||C instanceof L.Polyline&&!(C instanceof L.Polygon)?M:!!Rf(d.toGeoJSON(15),C.toGeoJSON(15))}catch{return C instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(C=>{let M;if(C instanceof L.Polygon){M=L.polygon(C.getLatLngs());let be=M.getLatLngs();b.forEach(Me=>{if(Me&&Me.snapInfo){let{latlng:it}=Me,Xe=this._calcClosestLayer(it,[M]);if(Xe&&Xe.segment&&Xe.distance<this.options.snapDistance){let{segment:Pt}=Xe;if(Pt&&Pt.length===2){let{indexPath:Ut,parentPath:on,newIndex:Mn}=L.PM.Utils._getIndexFromSegment(be,Pt);(Ut.length>1?(0,Vi.default)(be,on):be).splice(Mn,0,it)}}}})}else M=C;let H=this._cutLayer(d,M),ne=L.geoJSON(H,C.options);ne.getLayers().length===1&&([ne]=ne.getLayers()),this._setPane(ne,"layerPane");let le=ne.addTo(this._map.pm._getContainingLayer());if(le.pm.enable(C.pm.options),le.pm.disable(),C._pmTempLayer=!0,d._pmTempLayer=!0,C.remove(),C.removeFrom(this._map.pm._getContainingLayer()),d.remove(),d.removeFrom(this._map.pm._getContainingLayer()),le.getLayers&&le.getLayers().length===0&&this._map.pm.removeLayer({target:le}),le instanceof L.LayerGroup?(le.eachLayer(be=>{this._addDrawnLayerProp(be)}),this._addDrawnLayerProp(le)):this._addDrawnLayerProp(le),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let be=this.options.layersToCut.indexOf(C);be>-1&&this.options.layersToCut.splice(be,1)}this._editedLayers.push({layer:le,originalLayer:C})})},_cutLayer(d,g){let b=L.geoJSON(),C;if(g instanceof L.Polygon)C=w(g.toGeoJSON(15),d.toGeoJSON(15));else{let M=K(g);M.forEach(H=>{let ne=or(H,d.toGeoJSON(15)),le;ne&&ne.features.length>0?le=L.geoJSON(ne):le=L.geoJSON(H),le.getLayers().forEach(be=>{Da(d.toGeoJSON(15),be.toGeoJSON(15))||be.addTo(b)})}),M.length>1?C=he(b):C=b.toGeoJSON(15)}return C},_change:L.Util.falseFn}),bs.Text=bs.extend({initialize(d){this._map=d,this._shape="Text",this.toolbarButtonName="drawText"},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var d;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(d=this._hintMarker)==null||d.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let g=d;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker(d){var M,H,ne,le;if(!d.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(M=this.options.textOptions)==null?void 0:M.className){let be=this.options.textOptions.className.split(" ");this.textArea.classList.add(...be)}let b=this._createTextIcon(this.textArea),C=new L.Marker(g,{textMarker:!0,_textMarkerOverPM:!0,icon:b});if(this._setPane(C,"markerPane"),this._finishLayer(C),C.pm||(C.options.draggable=!1),C.addTo(this._map.pm._getContainingLayer()),C.pm){C.pm.textArea=this.textArea,L.setOptions(C.pm,{removeIfEmpty:((H=this.options.textOptions)==null?void 0:H.removeIfEmpty)??!0});let be=((ne=this.options.textOptions)==null?void 0:ne.focusAfterDraw)??!0;C.pm._createTextMarker(be),(le=this.options.textOptions)!=null&&le.text&&C.pm.setText(this.options.textOptions.text)}this._fireCreate(C),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(d){this.enable(),this._hintMarker.setLatLng(d.latlng)},_createTextArea(){let d=document.createElement("textarea");return d.readOnly=!0,d.classList.add("pm-textarea","pm-disabled"),d},_createTextIcon(d){return L.divIcon({className:"pm-text-marker",html:d})}});var Ee={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,bi(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let d=this._getDOMElem();d&&(bi(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(d)):L.DomEvent.on(d,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,bi(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let d=this._getDOMElem();d&&(bi(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(d)):L.DomEvent.off(d,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(d){let g=d.touches?d.touches[0]:d,b={originalEvent:g,target:this._layer};return b.containerPoint=this._map.mouseEventToContainerPoint(g),b.latlng=this._map.containerPointToLatLng(b.containerPoint),this._dragMixinOnMouseDown(b),!1},_simulateMouseMoveEvent(d){let g=d.touches?d.touches[0]:d,b={originalEvent:g,target:this._layer};return b.containerPoint=this._map.mouseEventToContainerPoint(g),b.latlng=this._map.containerPointToLatLng(b.containerPoint),this._dragMixinOnMouseMove(b),!1},_simulateMouseUpEvent(d){let g={originalEvent:d.touches?d.touches[0]:d,target:this._layer};return d.type.indexOf("touch")===-1&&(g.containerPoint=this._map.mouseEventToContainerPoint(d),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown(d){if(d.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(d);let g=d._fromLayerSync,b=this._syncLayers("_dragMixinOnMouseDown",d);if(this._layer instanceof L.Marker&&(this.options.snappable&&!g&&!b?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let C="resizeableCircleMarker";this._layer instanceof L.Circle&&(C="resizeableCircle"),this.options.snappable&&!g&&!b?this._layer.pm.options[C]||this._initSnappableMarkersDrag():this._layer.pm.options[C]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=d.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(d){this._overwriteEventIfItComesFromMarker(d);let g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",d),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=d.latlng),this._onLayerDrag(d),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(d){let g=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",d),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,g&&L.DomUtil.removeClass(g,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(d){let{latlng:g}=d,b={lat:g.lat-this._tempDragCoord.lat,lng:g.lng-this._tempDragCoord.lng},C=M=>M.map(H=>{if(Array.isArray(H))return C(H);let ne={lat:H.lat+b.lat,lng:H.lng+b.lng};return(H.alt||H.alt===0)&&(ne.alt=H.alt),ne});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let M=C([this._layer.getLatLng()]);this._layer.setLatLng(M[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let M=this._layer.getLatLng();this._layer._snapped&&(M=this._layer._orgLatLng);let H=C([M]);this._layer.setLatLng(H[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let M=C([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(M),this._fireChange(this._layer.getBounds(),"Edit")}else{let M=C(this._layer.getLatLngs());this._layer.setLatLngs(M),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,d.layer=this._layer,this._fireDrag(d)},addDraggingClass(){let d=this._getDOMElem();d&&L.DomUtil.addClass(d,"leaflet-pm-draggable")},removeDraggingClass(){let d=this._getDOMElem();d&&L.DomUtil.removeClass(d,"leaflet-pm-draggable")},_getDOMElem(){let d=null;return this._layer._path?d=this._layer._path:this._layer._renderer&&this._layer._renderer._container?d=this._layer._renderer._container:this._layer._image?d=this._layer._image:this._layer._icon&&(d=this._layer._icon),d},_overwriteEventIfItComesFromMarker(d){d.target.getLatLng&&(!d.target._radius||d.target._radius<=10)&&(d.containerPoint=this._map.mouseEventToContainerPoint(d.originalEvent),d.latlng=this._map.containerPointToLatLng(d.containerPoint))},_syncLayers(d,g){if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;let b=[];if(L.Util.isArray(this.options.syncLayersOnDrag))b=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(C=>{C instanceof L.LayerGroup&&(b=b.concat(C.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let C in this._parentLayerGroup){let M=this._parentLayerGroup[C];M.pm&&(b=M.pm.getLayers(!0))}return L.Util.isArray(b)&&b.length>0&&(b=b.filter(C=>!!C.pm).filter(C=>!!C.pm.options.draggable),b.forEach(C=>{C!==this._layer&&C.pm[d]&&(C._snapped=!1,C.pm[d](g))})),b.length>0}return!1},_stopDOMImageDrag(d){return d.preventDefault(),!1}},Ae=Ee,Ie=l(Sr());function ze(d,g,b,C){return b.unproject(g.transform(b.project(d,C)),C)}function Ue(d,g,b){let C=b.getMaxZoom();if(C===1/0&&(C=b.getZoom()),L.Util.isArray(d)){let M=[];return d.forEach(H=>{M.push(Ue(H,g,b))}),M}return d instanceof L.LatLng?ze(d,g,b,C):null}function Qe(d,g){g instanceof L.Layer&&(g=g.getLatLng());let b=d.getMaxZoom();return b===1/0&&(b=d.getZoom()),d.project(g,b)}function wt(d,g){let b=d.getMaxZoom();return b===1/0&&(b=d.getZoom()),d.unproject(g,b)}var Ht={_onRotateStart(d){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Qe(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Qe(this._map,d.target.getLatLng()),this._initialRotateLatLng=ra(this._layer),this._startAngle=this.getAngle();let g=ra(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate(d){let g=Qe(this._map,d.target.getLatLng()),b=this._rotationStartPoint,C=this._rotationOriginPoint,M=Math.atan2(g.y-C.y,g.x-C.x)-Math.atan2(b.y-C.y,b.x-C.x);this._layer.setLatLngs(this._rotateLayer(M,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let H=this;function ne(it,Xe=[],Pt=-1){if(Pt>-1&&Xe.push(Pt),L.Util.isArray(it[0]))it.forEach((Ut,on)=>ne(Ut,Xe.slice(),on));else{let Ut=Xe.length>0?(0,Ie.default)(H._markers,Xe):H._markers[0];it.forEach((on,Mn)=>{Ut[Mn].setLatLng(on)})}}ne(this._layer.getLatLngs());let le=ra(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(M,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let be=M*180/Math.PI;be=be<0?be+360:be;let Me=be+this._startAngle;this._setAngle(Me),this._rotationLayer.pm._setAngle(Me),this._fireRotation(this._rotationLayer,be,le),this._fireRotation(this._map,be,le),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let d=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let g=ra(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=ra(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,d,g),this._fireRotationEnd(this._map,d,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(d,g,b,C,M){let H=Qe(M,b);return this._matrix=C.clone().rotate(d,H).flip(),Ue(g,this._matrix,M)},_setAngle(d){d=d<0?d+360:d,this._angle=d%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let d=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=d.getCenter();return d.removeFrom(this._layer._map),g},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Ma(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let d={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),d),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=ra(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(d){let g=this.getAngle(),b=this._layer.getLatLngs(),C=d*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(C,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+d),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(C,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let M=this.getAngle()-g;M=M<0?M+360:M,this._startAngle=g,this._fireRotation(this._layer,M,b,this._layer),this._fireRotation(this._map||this._layer._map,M,b,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(d){let g=d-this.getAngle();this.rotateLayer(g)},getAngle(){return this._angle||0},setInitAngle(d){this._setAngle(d)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(d){this._rotationCenter=d,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(d)}},Gt=Ht,Tt=L.Class.extend({includes:[Ae,Zo,Gt,du],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(d){L.Util.setOptions(this,d)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(d,g){g==="layerPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(d,g){let b=g.target,C={layer:this._layer,marker:b,event:g},M="";return d==="move"?M="moveVertexValidation":d==="add"?M="addVertexValidation":d==="remove"&&(M="removeVertexValidation"),this.options[M]&&typeof this.options[M]=="function"&&!this.options[M](C)?(d==="move"&&(b._cancelDragEventChain=b.getLatLng()),!1):(b._cancelDragEventChain=null,!0)},_vertexValidationDrag(d){return d._cancelDragEventChain?(d._latlng=d._cancelDragEventChain,d.update(),!1):!0},_vertexValidationDragEnd(d){return d._cancelDragEventChain?(d._cancelDragEventChain=null,!1):!0}}),rn=Tt;rn.LayerGroup=L.Class.extend({initialize(d){this._layerGroup=d,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(C=>this._initLayer(C));let g=C=>{if(C.layer._pmTempLayer)return;this._layers=this.getLayers();let M=this._layers.filter(H=>!H.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in H.pm._parentLayerGroup));M.forEach(H=>{this._initLayer(H)}),M.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(g,100,this),this),this._layerGroup.on("layerremove",C=>{this._removeLayerFromGroup(C.target)},this);let b=C=>{C.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(b,100,this),this)},enable(d,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=d,this._layers.forEach(b=>{b instanceof L.LayerGroup?g.indexOf(b._leaflet_id)===-1&&(g.push(b._leaflet_id),b.pm.enable(d,g)):b.pm.enable(d)})},disable(d=[]){d.length===0&&(this._layers=this.getLayers()),this._layers.forEach(g=>{g instanceof L.LayerGroup?d.indexOf(g._leaflet_id)===-1&&(d.push(g._leaflet_id),g.pm.disable(d)):g.pm.disable()})},enabled(d=[]){return d.length===0&&(this._layers=this.getLayers()),!!this._layers.find(g=>g instanceof L.LayerGroup?d.indexOf(g._leaflet_id)===-1?(d.push(g._leaflet_id),g.pm.enabled(d)):!1:g.pm.enabled())},toggleEdit(d,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=d,this._layers.forEach(b=>{b instanceof L.LayerGroup?g.indexOf(b._leaflet_id)===-1&&(g.push(b._leaflet_id),b.pm.toggleEdit(d,g)):b.pm.toggleEdit(d)})},_initLayer(d){let g=L.Util.stamp(this._layerGroup);d.pm._parentLayerGroup||(d.pm._parentLayerGroup={}),d.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup(d){if(d.pm&&d.pm._layerGroup){let g=L.Util.stamp(this._layerGroup);delete d.pm._layerGroup[g]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(d=>d.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var d;return this._map||((d=this._layers.find(g=>!!g._map))==null?void 0:d._map)||null},getLayers(d=!1,g=!0,b=!0,C=[]){let M=[];return d?this._layerGroup.getLayers().forEach(H=>{M.push(H),H instanceof L.LayerGroup&&C.indexOf(H._leaflet_id)===-1&&(C.push(H._leaflet_id),M=M.concat(H.pm.getLayers(!0,!0,!0,C)))}):M=this._layerGroup.getLayers(),b&&(M=M.filter(H=>!(H instanceof L.LayerGroup))),g&&(M=M.filter(H=>!!H.pm),M=M.filter(H=>!H._pmTempLayer),M=M.filter(H=>!L.PM.optIn&&!H.options.pmIgnore||L.PM.optIn&&H.options.pmIgnore===!1)),M},setOptions(d,g=[]){g.length===0&&(this._layers=this.getLayers()),this.options=d,this._layers.forEach(b=>{b.pm&&(b instanceof L.LayerGroup?g.indexOf(b._leaflet_id)===-1&&(g.push(b._leaflet_id),b.pm.setOptions(d,g)):b.pm.setOptions(d))})}}),rn.Marker=rn.extend({_shape:"Marker",initialize(d){this._layer=d,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(d={draggable:!0}){if(L.Util.setOptions(this,d),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(d){let g=d.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)}});var Qt=l(Sr()),xt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let d=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=d.filter((g,b,C)=>C.indexOf(g)===b)},_removeFromCache(d){let g=this.markerCache.indexOf(d);g>-1&&this.markerCache.splice(g,1)},renderLimits(d){this.markerCache.forEach(g=>{d.includes(g)?this._markerGroup.addLayer(g):this._markerGroup.removeLayer(g)})},applyLimitFilters({latlng:d={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let g=[...this._filterClosestMarkers(d)];this.renderLimits(g)},_filterClosestMarkers(d){let g=[...this.markerCache],b=this.options.limitMarkersToCount;return b===-1?g:(g.sort((C,M)=>{let H=C._latlng.distanceTo(d),ne=M._latlng.distanceTo(d);return H-ne}),g.filter((C,M)=>b>-1?M<b:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(d){this._preventRenderMarkers=!!d}},Mt=xt;rn.Line=rn.extend({includes:[Mt],_shape:"Line",initialize(d){this._layer=d,this._enabled=!1},enable(d){if(L.Util.setOptions(this,d),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let d=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(d,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(d){return this.enabled()?this.disable():this.enable(d),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let d=this._map,g=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(d),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let b=C=>{if(Array.isArray(C[0]))return C.map(b,this);let M=C.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&C.map((H,ne)=>{let le=this.isPolygon()?(ne+1)%C.length:ne+1;return this._createMiddleMarker(M[ne],M[le])}),M};this._markers=b(g),this.filterMarkerGroup(),d.addLayer(this._markerGroup)},_createMarker(d){let g=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker(d,g){if(!d||!g)return!1;let b=L.PM.Utils.calcMiddleLatLng(this._map,d.getLatLng(),g.getLatLng()),C=this._createMarker(b),M=L.divIcon({className:"marker-icon marker-icon-middle"});return C.setIcon(M),C.leftM=d,C.rightM=g,d._middleMarkerNext=C,g._middleMarkerPrev=C,C.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),C.on("movestart",this._onMiddleMarkerMoveStart,this),C},_onMiddleMarkerClick(d){let g=d.target;if(!this._vertexValidation("add",d))return;let b=L.divIcon({className:"marker-icon"});g.setIcon(b),this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMoveStart(d){let g=d.target;if(g.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",d)){g.on("move",this._onMiddleMarkerMovePrevent,this);return}g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMovePrevent(d){let g=d.target;this._vertexValidationDrag(g)},_onMiddleMarkerMoveEnd(d){let g=d.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(g))return;let b=L.divIcon({className:"marker-icon"});g.setIcon(b),setTimeout(()=>{delete g._dragging},100)},_addMarker(d,g,b){d.off("movestart",this._onMiddleMarkerMoveStart,this),d.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let C=d.getLatLng(),M=this._layer._latlngs;delete d.leftM,delete d.rightM;let{indexPath:H,index:ne,parentPath:le}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),be=H.length>1?(0,Qt.default)(M,le):M,Me=H.length>1?(0,Qt.default)(this._markers,le):this._markers;be.splice(ne+1,0,C),Me.splice(ne+1,0,d),this._layer.setLatLngs(M),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(g,d),this._createMiddleMarker(d,b)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(d,L.PM.Utils.findDeepMarkerIndex(this._markers,d).indexPath,C),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Hr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(d){let g=this._layer,b,C;if(this.options.allowSelfIntersection?b=!1:(C=Hr(this._layer.toGeoJSON(15)),b=C.features.length>0),b){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return b;d?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(C)}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return b},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(d,g){d.forEach(b=>{Array.isArray(b)?this._updateDisabledMarkerStyle(b,g):b._icon&&(g&&!this._checkMarkerAllowedToDrag(b)?L.DomUtil.addClass(b._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(b._icon,"vertexmarker-disabled"))})},_removeMarker(d){let g=d.target;if(!this._vertexValidation("remove",d))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=ra(this._layer,this._layer.getLatLngs()));let b=this._layer.getLatLngs(),{indexPath:C,index:M,parentPath:H}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!C)return;let ne=C.length>1?(0,Qt.default)(b,H):b,le=C.length>1?(0,Qt.default)(this._markers,H):this._markers,be=H[H.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!be&&(ne.length<=2||this.isPolygon()&&ne.length<=3)){this._flashLayer();return}ne.splice(M,1),this._layer.setLatLngs(b),this.isPolygon()&&ne.length<=2&&ne.splice(0,ne.length);let Me=!1;if(ne.length<=1&&(ne.splice(0,ne.length),H.length>1&&C.length>1&&(b=Fl(b)),this._layer.setLatLngs(b),this._initMarkers(),Me=!0),_s(b)||this._layer.remove(),b=Fl(b),this._layer.setLatLngs(b),this._markers=Fl(this._markers),!Me&&(le=C.length>1?(0,Qt.default)(this._markers,H):this._markers,g._middleMarkerPrev&&(this._markerGroup.removeLayer(g._middleMarkerPrev),this._removeFromCache(g._middleMarkerPrev)),g._middleMarkerNext&&(this._markerGroup.removeLayer(g._middleMarkerNext),this._removeFromCache(g._middleMarkerNext)),this._markerGroup.removeLayer(g),this._removeFromCache(g),le)){let it,Xe;if(this.isPolygon()?(it=(M+1)%le.length,Xe=(M+(le.length-1))%le.length):(Xe=M-1<0?void 0:M-1,it=M+1>=le.length?void 0:M+1),it!==Xe){let Pt=le[Xe],Ut=le[it];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(Pt,Ut)}le.splice(M,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,C),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(d){let g=this._layer.getLatLngs(),b=d.getLatLng(),{indexPath:C,index:M,parentPath:H}=L.PM.Utils.findDeepMarkerIndex(this._markers,d);(C.length>1?(0,Qt.default)(g,H):g).splice(M,1,b),this._layer.setLatLngs(g)},_getNeighborMarkers(d){let{indexPath:g,index:b,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,d),M=g.length>1?(0,Qt.default)(this._markers,C):this._markers,H=(b+1)%M.length,ne=(b+(M.length-1))%M.length,le=M[ne],be=M[H];return{prevMarker:le,nextMarker:be}},_checkMarkerAllowedToDrag(d){let{prevMarker:g,nextMarker:b}=this._getNeighborMarkers(d),C=L.polyline([g.getLatLng(),d.getLatLng()]),M=L.polyline([d.getLatLng(),b.getLatLng()]),H=Io(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length,ne=Io(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return d.getLatLng()===this._markers[0][0].getLatLng()?ne+=1:d.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(H+=1),!(H<=2&&ne<=2)},_onMarkerDragStart(d){let g=d.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",d))return;let{indexPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(d,b),this.options.allowSelfIntersection||(this._coordsBeforeEdit=ra(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(g):this._markerAllowedToDrag=null},_onMarkerDrag(d){let g=d.target;if(!this._vertexValidationDrag(g))return;let{indexPath:b,index:C,parentPath:M}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!b)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(g);let H=b.length>1?(0,Qt.default)(this._markers,M):this._markers,ne=(C+1)%H.length,le=(C+(H.length-1))%H.length,be=g.getLatLng(),Me=H[le].getLatLng(),it=H[ne].getLatLng();if(g._middleMarkerNext){let Xe=L.PM.Utils.calcMiddleLatLng(this._map,be,it);g._middleMarkerNext.setLatLng(Xe)}if(g._middleMarkerPrev){let Xe=L.PM.Utils.calcMiddleLatLng(this._map,be,Me);g._middleMarkerPrev.setLatLng(Xe)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(d,b),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(d){let g=d.target;if(!this._vertexValidationDragEnd(g))return;let{indexPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),C=!this.options.allowSelfIntersection&&this.hasSelfIntersection();C&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(C=!1);let M=!this.options.allowSelfIntersection&&C;if(this._fireMarkerDragEnd(d,b,M),M){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(d,b);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(d){let g=d.target;if(g._dragging)return;let{indexPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireVertexClick(d,b)}}),rn.Polygon=rn.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(d){let{prevMarker:g,nextMarker:b}=this._getNeighborMarkers(d),C=L.polyline([g.getLatLng(),d.getLatLng()]),M=L.polyline([d.getLatLng(),b.getLatLng()]),H=Io(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length,ne=Io(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return!(H<=2&&ne<=2)}}),rn.Rectangle=rn.Polygon.extend({_shape:"Rectangle",_initMarkers(){let d=this._map,g=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,d.addLayer(this._markerGroup),this._markers=[],this._markers[0]=g.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((b,C)=>{let M=this._cornerMarkers.find(H=>H._index===C);M&&M.setLatLng(b)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(d,g){let b=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(b,"vertexPane"),b._origLatLng=d,b._index=g,b._pmTempLayer=!0,b.on("click",this._onVertexClick,this),this._markerGroup.addLayer(b),b},_addMarkerEvents(){this._markers[0].forEach(d=>{d.on("dragstart",this._onMarkerDragStart,this),d.on("drag",this._onMarkerDrag,this),d.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||d.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(d){if(!this._vertexValidation("move",d))return;let g=d.target,b=this._cornerMarkers;g._oppositeCornerLatLng=b.find(M=>M._index===(g._index+2)%4).getLatLng(),g._snapped=!1;let{indexPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(d,C)},_onMarkerDrag(d){let g=d.target;if(!this._vertexValidationDrag(g)||g._index===void 0)return;this._adjustRectangleForMarkerMove(g);let{indexPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDrag(d,b),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(d){let g=d.target;if(!this._vertexValidationDragEnd(g))return;this._cornerMarkers.forEach(C=>{delete C._oppositeCornerLatLng});let{indexPath:b}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragEnd(d,b),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(d){L.extend(d._origLatLng,d._latlng);let g=L.PM.Utils._getRotatedRectangle(d.getLatLng(),d._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(d),this._layer.redraw()},_adjustAllMarkers(d){let g=this._layer.getLatLngs()[0];if(g&&g.length!==4&&g.length>0)g.forEach((b,C)=>{this._cornerMarkers[C].setLatLng(b)}),this._cornerMarkers.slice(g.length).forEach(b=>{b.setLatLng(g[0])});else if(!g||!g.length)console.error("The layer has no LatLngs");else{let b=g.findIndex(C=>d.getLatLng().equals(C));b>-1?(this._cornerMarkers[(d._index+1)%4].setLatLng(g[(b+1)%4]),this._cornerMarkers[(d._index+2)%4].setLatLng(g[(b+2)%4]),this._cornerMarkers[(d._index+3)%4].setLatLng(g[(b+3)%4])):this._cornerMarkers.forEach(C=>{C.setLatLng(g[C._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Ma(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let d=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(d[0],d[2],this.getAngle(),this._map||this)}}),rn.CircleMarker=rn.extend({_shape:"CircleMarker",initialize(d){this._layer=d,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(d={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,d),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let d=this._map;this._helperLayers&&(this._helperLayers.removeFrom(d),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(d);let g=this._layer.getLatLng(),b=this._layer._radius,C=this._getLatLngOnCircle(g,b);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(C),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(d,g){let b=this._map.project(d),C=L.point(b.x+g,b.y);return this._map.unproject(C)},_createHintLine(d,g){let b=d.getLatLng(),C=g.getLatLng();this._hintline=L.polyline([b,C],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(d){let g=this._createMarker(d);return this.options.draggable?(L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("move",this._moveCircle,this)):g.dragging.disable(),g},_createOuterMarker(d){let g=this._createMarker(d);return g.on("drag",this._resizeCircle,this),g},_createMarker(d){let g=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=d,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),g.on("click",this._onVertexClick,this),this._helperLayers.addLayer(g),g},_moveCircle(d){if(d.target._cancelDragEventChain)return;let g=this._centerMarker.getLatLng();this._layer.setLatLng(g);let b=this._layer._radius,C=this._getLatLngOnCircle(g,b);this._outerMarker._latlng=C,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let d=this._layer.getLatLng(),g=this._layer._radius,b=this._getLatLngOnCircle(d,g);this._outerMarker.setLatLng(b),this._centerMarker.setLatLng(d),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),b=this._distanceCalculation(d,g);this.options[this._minRadiusOption]&&b<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&b>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(b),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([d,g])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(d){this._vertexValidation("move",d)&&this._fireMarkerDragStart(d)},_onMarkerDrag(d){let g=d.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(d)},_onMarkerDragEnd(d){this._extedingMarkerDragEnd();let g=d.target;this._vertexValidationDragEnd(g)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(d))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let d=this._layer._map||this._map;if(d){let g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),d,this._layer.getLatLng()),b=L.circle(this._layer.getLatLng(),this._layer.options);b.setRadius(g);let C=d&&d.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(b,200,!C).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(b,200,!C),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),b=this._distanceCalculation(d,g);return this.options[this._minRadiusOption]&&b<this.options[this._minRadiusOption]?g=hu(this._map,d,g,this._getMinDistanceInMeter(d)):this.options[this._maxRadiusOption]&&b>this.options[this._maxRadiusOption]&&(g=hu(this._map,d,g,this._getMaxDistanceInMeter(d))),g},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),b=this._distanceCalculation(d,g);this.options[this._minRadiusOption]&&b<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&b>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(d,g){return this._map.project(d).distanceTo(this._map.project(g))},_getMinDistanceInMeter(d){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,d)},_getMaxDistanceInMeter(d){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,d)},_onVertexClick(d){d.target._dragging||this._fireVertexClick(d,void 0)}}),rn.Circle=rn.CircleMarker.extend({_shape:"Circle",initialize(d){this._layer=d,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(d){L.PM.Edit.CircleMarker.prototype.enable.call(this,d||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let d=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(d,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let d=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!d).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!d),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(d,g){return this._map.distance(d,g)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(d){d.target._dragging||this._fireVertexClick(d,void 0)}}),rn.ImageOverlay=rn.extend({_shape:"ImageOverlay",initialize(d){this._layer=d,this._enabled=!1},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},enabled(){return this._enabled},enable(d={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,d),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let d=this._layer.getBounds(),g=d.getNorthWest(),b=d.getNorthEast(),C=d.getSouthEast(),M=d.getSouthWest();return[g,b,C,M]}}),rn.Text=rn.extend({_shape:"Text",initialize(d){this._layer=d,this._enabled=!1},enable(d){if(L.Util.setOptions(this,d),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let d=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),d.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let d=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${d}px`,this.textArea.style.width=`${g}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(d){d.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(d={}){let g=this._hasFocus;this._hasFocus=d.type==="focus",!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(d){d&&(this.textArea.value=d),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let g=this.options.className.split(" ");this.textArea.classList.add(...g)}let d=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(d),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(d=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),d===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(d){d.preventDefault()}});var an=function(d,g,b,C,M,H){this._matrix=[d,g,b,C,M,H]};an.init=()=>new L.PM.Matrix(1,0,0,1,0,0),an.prototype={transform(d){return this._transform(d.clone())},_transform(d){let g=this._matrix,{x:b,y:C}=d;return d.x=g[0]*b+g[1]*C+g[4],d.y=g[2]*b+g[3]*C+g[5],d},untransform(d){let g=this._matrix;return new L.Point((d.x/g[0]-g[4])/g[0],(d.y/g[2]-g[5])/g[2])},clone(){let d=this._matrix;return new L.PM.Matrix(d[0],d[1],d[2],d[3],d[4],d[5])},translate(d){if(d===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let g,b;return typeof d=="number"?(g=d,b=d):(g=d.x,b=d.y),this._add(1,0,0,1,g,b)},scale(d,g){if(d===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let b,C;return g=g||L.point(0,0),typeof d=="number"?(b=d,C=d):(b=d.x,C=d.y),this._add(b,0,0,C,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},rotate(d,g){let b=Math.cos(d),C=Math.sin(d);return g=g||new L.Point(0,0),this._add(b,C,-C,b,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(d,g,b,C,M,H){let ne=[[],[],[]],le=this._matrix,be=[[le[0],le[2],le[4]],[le[1],le[3],le[5]],[0,0,1]],Me=[[d,b,M],[g,C,H],[0,0,1]],it;d&&d instanceof L.PM.Matrix&&(le=d._matrix,Me=[[le[0],le[2],le[4]],[le[1],le[3],le[5]],[0,0,1]]);for(let Xe=0;Xe<3;Xe+=1)for(let Pt=0;Pt<3;Pt+=1){it=0;for(let Ut=0;Ut<3;Ut+=1)it+=be[Xe][Ut]*Me[Ut][Pt];ne[Xe][Pt]=it}return this._matrix=[ne[0][0],ne[1][0],ne[0][1],ne[1][1],ne[0][2],ne[1][2]],this}};var yn=an,un={calcMiddleLatLng(d,g,b){let C=d.project(g),M=d.project(b);return d.unproject(C._add(M)._divideBy(2))},findLayers(d){let g=[];return d.eachLayer(b=>{(b instanceof L.Polyline||b instanceof L.Marker||b instanceof L.Circle||b instanceof L.CircleMarker||b instanceof L.ImageOverlay)&&g.push(b)}),g=g.filter(b=>!!b.pm),g=g.filter(b=>!b._pmTempLayer),g=g.filter(b=>!L.PM.optIn&&!b.options.pmIgnore||L.PM.optIn&&b.options.pmIgnore===!1),g},circleToPolygon(d,g=60,b=!0){let C=d.getLatLng(),M=d.getRadius(),H=Xi(C,M,g,0,b),ne=[];for(let le=0;le<H.length;le+=1){let be=[H[le].lat,H[le].lng];ne.push(be)}return L.polygon(ne,d.options)},disablePopup(d){d.getPopup()&&(d._tempPopupCopy=d.getPopup(),d.unbindPopup())},enablePopup(d){d._tempPopupCopy&&(d.bindPopup(d._tempPopupCopy),delete d._tempPopupCopy)},_fireEvent(d,g,b,C=!1){d.fire(g,b,C);let{groups:M}=this.getAllParentGroups(d);M.forEach(H=>{H.fire(g,b,C)})},getAllParentGroups(d){let g=[],b=[],C=M=>{for(let H in M._eventParents)if(g.indexOf(H)===-1){g.push(H);let ne=M._eventParents[H];b.push(ne),C(ne)}};return!d._pmLastGroupFetch||!d._pmLastGroupFetch.time||new Date().getTime()-d._pmLastGroupFetch.time>1e3?(C(d),d._pmLastGroupFetch={time:new Date().getTime(),groups:b,groupIds:g},{groupIds:g,groups:b}):{groups:d._pmLastGroupFetch.groups,groupIds:d._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Xi,getTranslation:gr,findDeepCoordIndex(d,g,b=!0){let C,M=ne=>(le,be)=>{let Me=ne.concat(be);if(b){if(le.lat&&le.lat===g.lat&&le.lng===g.lng)return C=Me,!0}else if(le.lat&&L.latLng(le).equals(g))return C=Me,!0;return Array.isArray(le)&&le.some(M(Me))};d.some(M([]));let H={};return C&&(H={indexPath:C,index:C[C.length-1],parentPath:C.slice(0,C.length-1)}),H},findDeepMarkerIndex(d,g){let b,C=H=>(ne,le)=>{let be=H.concat(le);return ne._leaflet_id===g._leaflet_id?(b=be,!0):Array.isArray(ne)&&ne.some(C(be))};d.some(C([]));let M={};return b&&(M={indexPath:b,index:b[b.length-1],parentPath:b.slice(0,b.length-1)}),M},_getIndexFromSegment(d,g){if(g&&g.length===2){let b=this.findDeepCoordIndex(d,g[0]),C=this.findDeepCoordIndex(d,g[1]),M=Math.max(b.index,C.index);return(b.index===0||C.index===0)&&M!==1&&(M+=1),{indexA:b,indexB:C,newIndex:M,indexPath:b.indexPath,parentPath:b.parentPath}}return null},_getRotatedRectangle(d,g,b,C){let M=Qe(C,d),H=Qe(C,g),ne=b*Math.PI/180,le=Math.cos(ne),be=Math.sin(ne),Me=(H.x-M.x)*le+(H.y-M.y)*be,it=(H.y-M.y)*le-(H.x-M.x)*be,Xe=Me*le+M.x,Pt=Me*be+M.y,Ut=-it*be+M.x,on=it*le+M.y,Mn=wt(C,M),Dn=wt(C,{x:Xe,y:Pt}),yr=wt(C,H),rt=wt(C,{x:Ut,y:on});return[Mn,Dn,yr,rt]},pxRadiusToMeterRadius(d,g,b){let C=g.project(b),M=L.point(C.x+d,C.y);return g.distance(g.unproject(M),b)}},jn=un;L.PM=L.PM||{version:Ko.version,Map:Gs,Toolbar:jl,Draw:bs,Edit:rn,Utils:jn,Matrix:yn,activeLang:"en",optIn:!1,initialize(d){this.addInitHooks(d)},setOptIn(d){this.optIn=!!d},addInitHooks(){function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(d);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(g);function b(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(b);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(C);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(M);function H(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(H);function ne(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(ne);function le(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(le);function be(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(be)},reInitLayer(d){d instanceof L.LayerGroup&&d.eachLayer(g=>{this.reInitLayer(g)}),d.pm||L.PM.optIn&&d.options.pmIgnore!==!1||d.options.pmIgnore||(d instanceof L.Map?d.pm=new L.PM.Map(d):d instanceof L.Marker?d.options.textMarker?(d.pm=new L.PM.Edit.Text(d),d.pm._initTextMarker(),d.pm._createTextMarker(!1)):d.pm=new L.PM.Edit.Marker(d):d instanceof L.Circle?d.pm=new L.PM.Edit.Circle(d):d instanceof L.CircleMarker?d.pm=new L.PM.Edit.CircleMarker(d):d instanceof L.Rectangle?d.pm=new L.PM.Edit.Rectangle(d):d instanceof L.Polygon?d.pm=new L.PM.Edit.Polygon(d):d instanceof L.Polyline?d.pm=new L.PM.Edit.Line(d):d instanceof L.LayerGroup?d.pm=new L.PM.Edit.LayerGroup(d):d instanceof L.ImageOverlay&&(d.pm=new L.PM.Edit.ImageOverlay(d)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(d){let g=this._map.mouseEventToLayerPoint(d),b,C;for(let M=this._drawFirst;M;M=M.next)b=M.layer,b.options.interactive&&b._containsPoint(g)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(b))&&(C=b);C&&(L.DomEvent.fakeStop(d),this._fireEvent([C],d))}}),L.PM.initialize()})();var qV={exports:{}};(function(n){(function(e){var t;t=vt,n.exports=e(t)})(function(e){return e.Polyline._flat=e.LineUtil.isFlat||e.Polyline._flat||function(t){return!e.Util.isArray(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"},e.GeometryUtil=e.extend(e.GeometryUtil||{},{distance:function(t,r,i){return t.latLngToLayerPoint(r).distanceTo(t.latLngToLayerPoint(i))},distanceSegment:function(t,r,i,s){var o=t.latLngToLayerPoint(r),a=t.latLngToLayerPoint(i),l=t.latLngToLayerPoint(s);return e.LineUtil.pointToSegmentDistance(o,a,l)},readableDistance:function(t,r){var i=r!=="imperial",s;return i?t>1e3?s=(t/1e3).toFixed(2)+" km":s=t.toFixed(1)+" m":(t*=1.09361,t>1760?s=(t/1760).toFixed(2)+" miles":s=t.toFixed(1)+" yd"),s},belongsSegment:function(t,r,i,s){s=s===void 0?.2:s;var o=r.distanceTo(i),a=r.distanceTo(t)+t.distanceTo(i)-o;return a/o<s},length:function(t){var r=e.GeometryUtil.accumulatedLengths(t);return r.length>0?r[r.length-1]:0},accumulatedLengths:function(t){if(typeof t.getLatLngs=="function"&&(t=t.getLatLngs()),t.length===0)return[];for(var r=0,i=[0],s=0,o=t.length-1;s<o;s++)r+=t[s].distanceTo(t[s+1]),i.push(r);return i},closestOnSegment:function(t,r,i,s){var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());var a=t.project(r,o),l=t.project(i,o),u=t.project(s,o),h=e.LineUtil.closestPointOnSegment(a,l,u);return t.unproject(h,o)},closestOnCircle:function(t,r){const i=t.getLatLng(),s=t.getRadius(),o=typeof s=="number"?s:s.radius,a=r.lng,l=r.lat,u=i.lng,h=i.lat,p=a-u,v=l-h,m=Math.sqrt(p*p+v*v),S=u+p/m*o,E=h+v/m*o;return new e.LatLng(E,S)},closest:function(t,r,i,s){var o,a=1/0,l=null,u,h,p,v;if(r instanceof Array)if(r[0]instanceof Array&&typeof r[0][0]!="number"){for(u=0;u<r.length;u++)v=e.GeometryUtil.closest(t,r[u],i,s),v&&v.distance<a&&(a=v.distance,l=v);return l}else if(r[0]instanceof e.LatLng||typeof r[0][0]=="number"||typeof r[0].lat=="number")r=e.polyline(r);else return l;if(!(r instanceof e.Polyline))return l;if(o=JSON.parse(JSON.stringify(r.getLatLngs().slice(0))),r instanceof e.Polygon){var m=function(T){if(e.Polyline._flat(T))T.push(T[0]);else for(var A=0;A<T.length;A++)m(T[A])};m(o)}if(e.Polyline._flat(o)){if(s){for(u=0,h=o.length;u<h;u++){var S=o[u];p=e.GeometryUtil.distance(t,i,S),p<a&&(a=p,l=S,l.distance=p)}return l}for(u=0,h=o.length;u<h-1;u++){var E=o[u],k=o[u+1];p=e.GeometryUtil.distanceSegment(t,i,E,k),p<=a&&(a=p,l=e.GeometryUtil.closestOnSegment(t,i,E,k),l.distance=p)}return l}else{for(u=0;u<o.length;u++)v=e.GeometryUtil.closest(t,o[u],i,s),v.distance<a&&(a=v.distance,l=v);return l}},closestLayer:function(t,r,i){for(var s=1/0,o=null,a=null,l=1/0,u=0,h=r.length;u<h;u++){var p=r[u];if(p instanceof e.LayerGroup){var v=e.GeometryUtil.closestLayer(t,p.getLayers(),i);v.distance<s&&(s=v.distance,o=v)}else p instanceof e.Circle?(a=this.closestOnCircle(p,i),l=e.GeometryUtil.distance(t,i,a)):typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(t,i,a)):(a=e.GeometryUtil.closest(t,p,i),a&&(l=a.distance)),l<s&&(s=l,o={layer:p,latlng:a,distance:l})}return o},nClosestLayers:function(t,r,i,s){if(s=typeof s=="number"?s:r.length,s<1||r.length<1)return null;for(var o=[],a,l,u=0,h=r.length;u<h;u++){var p=r[u];if(p instanceof e.LayerGroup){var v=e.GeometryUtil.closestLayer(t,p.getLayers(),i);o.push(v)}else p instanceof e.Circle?(l=this.closestOnCircle(p,i),a=e.GeometryUtil.distance(t,i,l)):typeof p.getLatLng=="function"?(l=p.getLatLng(),a=e.GeometryUtil.distance(t,i,l)):(l=e.GeometryUtil.closest(t,p,i),l&&(a=l.distance)),o.push({layer:p,latlng:l,distance:a})}return o.sort(function(m,S){return m.distance-S.distance}),o.length>s?o.slice(0,s):o},layersWithin:function(t,r,i,s){s=typeof s=="number"?s:1/0;for(var o=[],a=null,l=0,u=0,h=r.length;u<h;u++){var p=r[u];typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(t,i,a)):(a=e.GeometryUtil.closest(t,p,i),a&&(l=a.distance)),a&&l<s&&o.push({layer:p,latlng:a,distance:l})}var v=o.sort(function(m,S){return m.distance-S.distance});return v},closestLayerSnap:function(t,r,i,s,o){s=typeof s=="number"?s:1/0,o=typeof o=="boolean"?o:!0;var a=e.GeometryUtil.closestLayer(t,r,i);if(!a||a.distance>s)return null;if(o&&typeof a.layer.getLatLngs=="function"){var l=e.GeometryUtil.closest(t,a.layer,a.latlng,!0);l.distance<s&&(a.latlng=l,a.distance=e.GeometryUtil.distance(t,l,i))}return a},interpolateOnPointSegment:function(t,r,i){return e.point(t.x*(1-i)+i*r.x,t.y*(1-i)+i*r.y)},interpolateOnLine:function(t,r,i){r=r instanceof e.Polyline?r.getLatLngs():r;var s=r.length;if(s<2)return null;if(i=Math.max(Math.min(i,1),0),i===0)return{latLng:r[0]instanceof e.LatLng?r[0]:e.latLng(r[0]),predecessor:-1};if(i==1)return{latLng:r[r.length-1]instanceof e.LatLng?r[r.length-1]:e.latLng(r[r.length-1]),predecessor:r.length-2};var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());for(var a=[],l=0,u=0;u<s;u++)a[u]=t.project(r[u],o),u>0&&(l+=a[u-1].distanceTo(a[u]));for(var h=l*i,p=0,v=0,u=0;v<h;u++){var m=a[u],S=a[u+1];p=v,v+=m.distanceTo(S)}if(m==null&&S==null)var m=a[0],S=a[1],u=1;var E=v-p!==0?(h-p)/(v-p):0,k=e.GeometryUtil.interpolateOnPointSegment(m,S,E);return{latLng:t.unproject(k,o),predecessor:u-1}},locateOnLine:function(t,r,i){var s=r.getLatLngs();if(i.equals(s[0]))return 0;if(i.equals(s[s.length-1]))return 1;for(var o=e.GeometryUtil.closest(t,r,i,!1),a=e.GeometryUtil.accumulatedLengths(s),l=a[a.length-1],u=0,h=!1,p=0,v=s.length-1;p<v;p++){var m=s[p],S=s[p+1];if(u=a[p],e.GeometryUtil.belongsSegment(o,m,S,.001)){u+=m.distanceTo(o),h=!0;break}}if(!h)throw"Could not interpolate "+i.toString()+" within "+r.toString();return u/l},reverse:function(t){return e.polyline(t.getLatLngs().slice(0).reverse())},extract:function(t,r,i,s){if(i>s)return e.GeometryUtil.extract(t,e.GeometryUtil.reverse(r),1-i,1-s);i=Math.max(Math.min(i,1),0),s=Math.max(Math.min(s,1),0);var o=r.getLatLngs(),a=e.GeometryUtil.interpolateOnLine(t,r,i),l=e.GeometryUtil.interpolateOnLine(t,r,s);if(i==s){var u=e.GeometryUtil.interpolateOnLine(t,r,s);return[u.latLng]}a.predecessor==-1&&(a.predecessor=0),l.predecessor==-1&&(l.predecessor=0);var h=o.slice(a.predecessor+1,l.predecessor+1);return h.unshift(a.latLng),h.push(l.latLng),h},isBefore:function(t,r){if(!r)return!1;var i=t.getLatLngs(),s=r.getLatLngs();return i[i.length-1].equals(s[0])},isAfter:function(t,r){if(!r)return!1;var i=t.getLatLngs(),s=r.getLatLngs();return i[0].equals(s[s.length-1])},startsAtExtremity:function(t,r){if(!r)return!1;var i=t.getLatLngs(),s=r.getLatLngs(),o=i[0];return o.equals(s[0])||o.equals(s[s.length-1])},computeAngle:function(t,r){return Math.atan2(r.y-t.y,r.x-t.x)*180/Math.PI},computeSlope:function(t,r){var i=(r.y-t.y)/(r.x-t.x),s=t.y-i*t.x;return{a:i,b:s}},rotatePoint:function(t,r,i,s){var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());var a=i*Math.PI/180,l=t.project(r,o),u=t.project(s,o),h=Math.cos(a)*(l.x-u.x)-Math.sin(a)*(l.y-u.y)+u.x,p=Math.sin(a)*(l.x-u.x)+Math.cos(a)*(l.y-u.y)+u.y;return t.unproject(new e.Point(h,p),o)},bearing:function(t,r){var i=Math.PI/180,s=t.lat*i,o=r.lat*i,a=t.lng*i,l=r.lng*i,u=Math.sin(l-a)*Math.cos(o),h=Math.cos(s)*Math.sin(o)-Math.sin(s)*Math.cos(o)*Math.cos(l-a),p=(Math.atan2(u,h)*180/Math.PI+360)%360;return p>=180?p-360:p},destination:function(t,r,i){r=(r+360)%360;var s=Math.PI/180,o=180/Math.PI,a=e.CRS.Earth.R,l=t.lng*s,u=t.lat*s,h=r*s,p=Math.sin(u),v=Math.cos(u),m=Math.cos(i/a),S=Math.sin(i/a),E=Math.asin(p*m+v*S*Math.cos(h)),k=l+Math.atan2(Math.sin(h)*S*v,m-p*Math.sin(E));return k=k*o,k=k>180?k-360:k<-180?k+360:k,e.latLng([E*o,k])},angle:function(t,r,i){var s=t.latLngToContainerPoint(r),o=t.latLngToContainerPoint(i),a=Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI+90;return a+=a<0?360:0,a},destinationOnSegment:function(t,r,i,s){var o=e.GeometryUtil.angle(t,r,i),a=e.GeometryUtil.destination(r,o,s);return e.GeometryUtil.closestOnSegment(t,a,r,i)}}),e.GeometryUtil})})(qV);L.Map.mergeOptions({almostOver:!0,almostDistance:25,almostSamplingPeriod:50,almostOnMouseMove:!0});L.Handler.AlmostOver=L.Handler.extend({includes:L.Evented||L.Mixin.Events,initialize:function(n){this._map=n,this._layers=[],this._previous=null,this._marker=null,this._buffer=0,this.__mouseMoveSampling=function(){var e=new Date;return function(t){var r=new Date,i=r-e<this._map.options.almostSamplingPeriod;i||this._layers.length===0||(e=r,this._map.fire("mousemovesample",{latlng:t.latlng}))}}()},addHooks:function(){this._map.options.almostOnMouseMove&&(this._map.on("mousemove",this.__mouseMoveSampling,this),this._map.on("mousemovesample",this._onMouseMove,this)),this._map.on("click dblclick",this._onMouseClick,this),this._map;function n(){this._buffer=this._map.layerPointToLatLng([0,0]).lat-this._map.layerPointToLatLng([this._map.options.almostDistance,this._map.options.almostDistance]).lat}this._map.on("viewreset zoomend",n,this),this._map.whenReady(n,this)},removeHooks:function(){this._map.off("mousemovesample"),this._map.off("mousemove",this.__mouseMoveSampling,this),this._map.off("click dblclick",this._onMouseClick,this)},addLayer:function(n){typeof n.eachLayer=="function"?n.eachLayer(function(e){this.addLayer(e)},this):(typeof this.indexLayer=="function"&&this.indexLayer(n),this._layers.push(n))},removeLayer:function(n){if(typeof n.eachLayer=="function")n.eachLayer(function(t){this.removeLayer(t)},this);else{typeof this.unindexLayer=="function"&&this.unindexLayer(n);var e=this._layers.indexOf(n);0<=e&&this._layers.splice(e,1)}this._previous=null},getClosest:function(n){var e=L.GeometryUtil.closestLayerSnap,t=this._map.options.almostDistance,r=[];return typeof this.searchBuffer=="function"?r=this.searchBuffer(n,this._buffer):r=this._layers,e(this._map,r,n,t,!1)},_onMouseMove:function(n){var e=this.getClosest(n.latlng);e?(this._previous?L.stamp(this._previous.layer)!=L.stamp(e.layer)&&(this._map.fire("almost:out",{layer:this._previous.layer}),this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng})):this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng}),this._map.fire("almost:move",{layer:e.layer,latlng:e.latlng})):this._previous&&this._map.fire("almost:out",{layer:this._previous.layer}),this._previous=e},_onMouseClick:function(n){var e=this.getClosest(n.latlng);e&&this._map.fire("almost:"+n.type,{layer:e.layer,latlng:e.latlng})}});L.LayerIndexMixin!==void 0&&L.Handler.AlmostOver.include(L.LayerIndexMixin);L.Map.addInitHook("addHandler","almostOver",L.Handler.AlmostOver);class lp extends tr.Circle{constructor(t,r){const i=r.radius||10;super(t,i,r);tt(this,"properties");tt(this,"angleCache",new Map);tt(this,"lastCenter");tt(this,"lastCenterCosLat");tt(this,"_pendingNameUpdate",!1);tt(this,"_nameUpdateTimeout",null);On.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){On.measure("Circle.updateProperties",()=>{var a,l,u,h;const t=this.getRadius(),r=this.getLatLng(),i=((l=(a=this.properties)==null?void 0:a.style)==null?void 0:l.name)||"",s=((u=this.properties)==null?void 0:u.style)||{},o={type:"Circle",radius:t,diameter:t*2,surface:Math.PI*Math.pow(t,2),perimeter:2*Math.PI*t,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((h=this.options)==null?void 0:h.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(t){On.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==t&&(this.properties.style||(this.properties.style={}),this.properties.style.name=t,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return On.measure("Circle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""},"Circle")}setRadius(t){return On.measure("Circle.setRadius",()=>(super.setRadius(t),this.updateProperties(),this),"Circle")}setLatLng(t){return On.measure("Circle.setLatLng",()=>(super.setLatLng(t),this.updateProperties(),this),"Circle")}calculatePointOnCircle(t){return On.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(t);if(!s){const o=t*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(t,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),tr.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return On.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(t=>this.calculatePointOnCircle(t)),"Circle")}calculateAngleFromPoint(t){return On.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=t.lng-r.lng,s=t.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(t){On.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(t);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const Zv=(n,e)=>{if(!n||typeof n!="string"||!n.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const t=parseInt(n.slice(1,3),16),r=parseInt(n.slice(3,5),16),i=parseInt(n.slice(5,7),16);return`rgba(${t}, ${r}, ${i}, ${e})`},S5=(n,e)=>{n.style.fontSize=e.fontSize,n.style.color=e.color,n.style.backgroundColor=Zv(e.backgroundColor,e.backgroundOpacity),e.hasBorder?n.style.border=`${e.borderWidth} solid ${Zv(e.borderColor,e.borderOpacity)}`:n.style.border="none",n.style.padding=e.padding,n.style.borderRadius=e.borderRadius},oa=n=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const t=vt.DomUtil.create("div","drawing-help-message");return t.innerHTML=n,t.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(t),t};function C5(n,e,t){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,t);return n/r}const ts=(n,e="m",t="")=>{let r,i;return e==="m²"?n>=1e4?(r=(n/1e4).toFixed(2),i="ha"):(r=n.toFixed(2),i="m²"):e==="m"?n>=1e3?(r=(n/1e3).toFixed(2),i="km"):(r=n.toFixed(2),i="m"):(r=n.toFixed(2),i=e),t?`${t}: ${r} ${i}`:`${r} ${i}`},YV=n=>({...n,clientX:n.clientX,clientY:n.clientY,button:n.button||0,buttons:n.buttons||0,altKey:n.altKey||!1}),KV=(n,e)=>{let t;return function(...r){window.clearTimeout(t),t=window.setTimeout(()=>n.apply(this,r),e)}},qh=(n,e)=>{let t=0;return function(...r){const i=Date.now();if(!(i-t<e))return t=i,n.apply(this,r)}};function YE(){const n=yt(null),e=yt(null),t=yt(null),r=yt(null),i=yt(""),s=yt(null),o=yt(!1),a=yt(null);window.addEventListener("clearControlPoints",()=>{s.value=null,t.value&&t.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(J=>J.remove()),document.querySelectorAll(".drawing-help-message").forEach(J=>J.remove())}),Ol(()=>{window.removeEventListener("clearControlPoints",()=>{}),n.value&&(n.value.remove(),n.value=null)});const l=(J,se="Double-cliquez pour éditer")=>{const fe={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},ie=(Ge,Se)=>{var lt;const ce=((lt=n.value)==null?void 0:lt.getZoom())||14,je=J.lat,st=C5(Se.physicalSize,je,ce);return`<div class="text-container" style="width:${st}px;height:${st}px;transform:rotate(${Se.rotation}deg)">
        <div class="text-annotation" style="font-size:${st*.2}px;color:${Se.color};background-color:${Zv(Se.backgroundColor,Se.backgroundOpacity)};border:${Se.hasBorder?Se.borderWidth+" solid "+Zv(Se.borderColor,Se.borderOpacity):"none"};padding:${Se.padding};border-radius:${Se.borderRadius}">${Ge}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},te=()=>{if(!n.value)return;const Ge=we.getIcon(),Se={html:ie(we.properties.text,we.properties.style),className:Ge.options.className};we.setIcon(vt.divIcon(Se))},Oe=vt.divIcon({html:ie(se,fe),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),we=vt.marker(J,{icon:Oe,draggable:!1,pmIgnore:!0});we.properties={type:"text",text:se,style:{...fe}},n.value&&(n.value.on("zoomend",te),we.on("remove",()=>{var Ge;(Ge=n.value)==null||Ge.off("zoomend",te)})),te();let Be=!1,ue=!1,re=0,Z=0;const U=Ge=>{if(!n.value)return;const Se=Ge.target;if(Se.classList.contains("rotate")){Be=!0;const ce=we.getLatLng(),je=n.value.mouseEventToLatLng(Ge);re=Math.atan2(je.lat-ce.lat,je.lng-ce.lng)*180/Math.PI,Z=we.properties.style.rotation||0}else Se.classList.contains("move")&&(ue=!0);document.addEventListener("mousemove",xe),document.addEventListener("mouseup",Ne)},xe=Ge=>{if(!(!ue||!n.value)){if(Be){const Se=we.getLatLng(),ce=n.value.mouseEventToLatLng(Ge),je=Math.atan2(ce.lat-Se.lat,ce.lng-Se.lng)*180/Math.PI,st=(Z+(je-re))%360;we.properties.style.rotation=st;const lt=we.getIcon(),_t={html:ie(we.properties.text,we.properties.style),className:lt.options.className};we.setIcon(vt.divIcon(_t))}else if(ue){const Se=YV(Ge),ce=n.value.mouseEventToLatLng(Se);we.setLatLng(ce)}}},Ne=()=>{Be=!1,ue=!1,document.removeEventListener("mousemove",xe),document.removeEventListener("mouseup",Ne)};return we.on("add",()=>{const Ge=we.getElement();Ge&&Ge.querySelectorAll(".control-button").forEach(ce=>{ce.addEventListener("mousedown",U)})}),we.on("remove",()=>{const Ge=we.getElement();Ge&&Ge.querySelectorAll(".control-button").forEach(ce=>{ce.removeEventListener("mousedown",U)})}),we.on("dblclick",Ge=>{var _t;vt.DomEvent.stopPropagation(Ge);const Se=(_t=we.getElement())==null?void 0:_t.querySelector(".text-annotation");if(!Se)return;Se.contentEditable="true",Se.focus(),Se.classList.add("editing");const ce=window.getSelection(),je=document.createRange();je.selectNodeContents(Se),ce==null||ce.removeAllRanges(),ce==null||ce.addRange(je);const st=()=>{Se.contentEditable="false",Se.classList.remove("editing");const Je=Se.innerText.trim();if(Je){we.properties.text=Je;const zt=we.getIcon(),Xt={html:ie(Je,we.properties.style),className:zt.options.className};we.setIcon(vt.divIcon(Xt))}Se.removeEventListener("blur",st),Se.removeEventListener("keydown",lt)},lt=Je=>{Je.key==="Enter"&&!Je.shiftKey&&(Je.preventDefault(),st())};Se.addEventListener("blur",st),Se.addEventListener("keydown",lt)}),we},u=(J,se)=>{const fe=vt.DomUtil.create("div","measure-tooltip");if(fe.innerHTML=se,fe.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(fe),n.value){const ie=n.value.latLngToContainerPoint(J);fe.style.left=`${ie.x+10}px`,fe.style.top=`${ie.y-25}px`}return fe},h=qh((J,se,fe)=>{if(J&&(J.innerHTML=fe,n.value)){const ie=n.value.latLngToContainerPoint(se);J.style.left=`${ie.x+10}px`,J.style.top=`${ie.y-25}px`}},100),p=(J,se,fe)=>{J.on("mouseover",()=>{const ie=u(J.getLatLng(),fe());J.measureDiv=ie}),J.on("mousemove",ie=>{J.measureDiv&&n.value&&h(J.measureDiv,ie.latlng,fe())}),J.on("mouseout",()=>{J.measureDiv&&(J.measureDiv.remove(),J.measureDiv=void 0)})};let v=[];const m=()=>{var J;v.cleanup&&v.cleanup(),t.value&&t.value.clearLayers(),v=[],(J=r.value)==null||J.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(se=>se.remove()),e.value&&e.value.getLayers().forEach(se=>{se instanceof $a&&se.clearHelperPoints()})},S=(J,se="#2563EB")=>{const fe=vt.circleMarker(J,{radius:6,color:se,fillColor:se,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return t.value&&t.value.addLayer(fe),fe},E=(J,se)=>{var ie,te,Oe,we,Be,ue;console.log("Input layer:",{type:se,instanceof:{Circle:J instanceof vt.Circle,Rectangle:J instanceof vt.Rectangle,Polygon:J instanceof vt.Polygon,Polyline:J instanceof vt.Polyline,Line:J instanceof js},options:J.options});const fe={type:se,style:J.options||{}};try{if(J instanceof vt.Circle){const re=J.getRadius();fe.radius=re,fe.diameter=re*2,fe.surface=Math.PI*Math.pow(re,2),fe.perimeter=2*Math.PI*re,fe.center=J.getLatLng()}else if(J instanceof vt.Rectangle){const re=J.getBounds(),Z=re.getNorthEast(),U=re.getSouthWest(),xe=yc([[U.lng,U.lat],[Z.lng,U.lat]]),Ne=yc([[U.lng,U.lat],[U.lng,Z.lat]]),Ge=Wh(xe,{units:"meters"}),Se=Wh(Ne,{units:"meters"});fe.width=Ge,fe.height=Se,fe.surface=Ge*Se,fe.perimeter=2*(Ge+Se),fe.dimensions={width:Ge,height:Se}}else if(J instanceof vt.Polygon)try{const Z=J.getLatLngs()[0].map(xe=>[xe.lng,xe.lat]);Z.push(Z[0]);const U=qu([Z]);fe.surface=Uc(U),fe.perimeter=Wh(yc(Z),{units:"meters"})}catch(re){console.error("Erreur lors du calcul des propriétés du polygone",re)}else if(J instanceof vt.Polyline&&!(J instanceof vt.Polygon))try{const re=J.getLatLngs();let Z=0;for(let U=1;U<re.length;U++)Z+=re[U].distanceTo(re[U-1]);fe.length=Z}catch(re){console.error("Erreur lors du calcul de la longueur de la ligne",re)}fe.style={...fe.style,color:((ie=J.options)==null?void 0:ie.color)||"#3388ff",weight:((te=J.options)==null?void 0:te.weight)||3,opacity:((Oe=J.options)==null?void 0:Oe.opacity)||1,fillColor:((we=J.options)==null?void 0:we.fillColor)||"#3388ff",fillOpacity:((Be=J.options)==null?void 0:Be.fillOpacity)||.2,dashArray:((ue=J.options)==null?void 0:ue.dashArray)||""}}catch(re){console.error("Error calculating shape properties:",re)}return fe},k=(J,se=2)=>{var we;if(!n.value){console.warn("Map is not available for text size update");return}const fe=n.value.getZoom(),ie=J.getLatLng().lat,te=C5(se,ie,fe),Oe=(we=J.getElement())==null?void 0:we.querySelector(".text-annotation");Oe&&(J.properties.style.fontSize=`${te}px`,J.properties.physicalWidth=se,J.properties.physicalHeight=se,S5(Oe,J.properties.style))},T=()=>{if(!n.value||!n.value.almostOver||!e.value)return;const J=e.value.getLayers().filter(se=>se instanceof js||se instanceof vt.Polyline&&!(se instanceof vt.Polygon)||se instanceof Ql||se instanceof Ml);J.forEach(se=>{var fe;(fe=n.value)==null||fe.almostOver.addLayer(se),console.log("[useMapDrawing] Couche ajoutée à almostOver:",se)}),console.log(`[useMapDrawing] ${J.length} couches ajoutées à almostOver`)},A=(J,se,fe)=>{const ie={almostOnMouseMove:!0,zoomAnimation:!0,fadeAnimation:!0,markerZoomAnimation:!0},te=vt.map(J,ie).setView(se,fe);n.value=te,vt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(te);const Oe=new vt.FeatureGroup;return Oe.addTo(te),e.value=Oe,te.almostOver?te.almostOver.options.tolerance=25:console.warn("Leaflet.AlmostOver plugin not loaded properly"),t.value=vt.featureGroup().addTo(te),r.value=vt.featureGroup().addTo(te),te.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:Oe,snapLayers:[Oe,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),setTimeout(T,500),te.on("pm:drawstart",we=>{o.value=!0,we.shape==="Circle"&&i.value==="Semicircle"&&(te.getContainer().style.cursor="crosshair")}),te.on("pm:drawend",()=>{o.value=!1,te.getContainer().style.cursor="",s.value&&oa("Cliquez sur la forme pour afficher les points de contrôle")}),te.on("pm:create",ae),Oe.on("click",we=>{var ue,re,Z,U,xe,Ne,Ge,Se,ce,je,st,lt,_t,Je,zt;vt.DomEvent.stopPropagation(we);const Be=we.layer;if(Be.name&&!((ue=Be.properties)!=null&&ue.name)?(Be.properties||(Be.properties={}),Be.properties.name=Be.name):(re=Be.properties)!=null&&re.name&&!Be.name&&(Be.name=Be.properties.name),console.log("[featureGroup click] État du nom:",{directName:Be.name,propertiesName:(Z=Be.properties)==null?void 0:Z.name,fullProperties:Be.properties}),(U=r.value)==null||U.clearLayers(),m(),s.value=Be,Be instanceof lp)Y(Be);else if(Be instanceof vt.Circle){console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(Be,"name"),directName:Be.name,propertiesName:(xe=Be.properties)==null?void 0:xe.name,styleNameBeforeTransfer:(Ge=(Ne=Be.properties)==null?void 0:Ne.style)==null?void 0:Ge.name,nameIsEnumerable:Object.keys(Be).includes("name"),allProperties:Object.keys(Be.properties||{}),_dbId:Be._dbId});const Xt=Be.name,et=(Se=Be.properties)==null?void 0:Se.name,ut=(je=(ce=Be.properties)==null?void 0:ce.style)==null?void 0:je.name,ot=Be._dbId,It=new lp(Be.getLatLng(),{...Be.options,radius:Be.getRadius()});Be.properties?It.properties={...Be.properties||{}}:It.updateProperties();const Jt=Xt||et||ut;Jt&&(It.properties.name=Jt,It.properties.style||(It.properties.style={}),It.properties.style.name=Jt,It.name=Jt),ot&&(It._dbId=ot),console.log("[useMapDrawing] Cercle après conversion:",{name:It.name,propertiesName:It.properties.name,stylePropertyName:(st=It.properties.style)==null?void 0:st.name,allProperties:Object.keys(It.properties||{})}),(lt=e.value)==null||lt.removeLayer(Be),(_t=e.value)==null||_t.addLayer(It),s.value=It,Y(It)}else if(Be instanceof $a)V(Be);else if(Be instanceof vt.Rectangle){const Xt=new $a(Be.getBounds(),{...Be.options});Xt.updateProperties(),(Je=e.value)==null||Je.removeLayer(Be),(zt=e.value)==null||zt.addLayer(Xt),s.value=Xt,V(Xt)}else Be instanceof vt.Polygon?q(Be):Be instanceof js||Be instanceof vt.Polyline?N(Be):Be instanceof Ml&&$(Be)}),te.on("pm:edit",we=>{var ue,re,Z;console.log("[pm:edit] Début",{layer:we.layer,currentProperties:we.layer.properties});const Be=we.layer;if(Be){const U=((ue=Be.properties)==null?void 0:ue.type)||"unknown";if(O(Be,U),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:Be.properties,selectedShape:s.value}),Be instanceof lp)Y(Be);else if(Be instanceof $a)V(Be);else if(Be instanceof vt.Rectangle){const xe=new $a(Be.getBounds(),{...Be.options});xe.updateProperties(),(re=e.value)==null||re.removeLayer(Be),(Z=e.value)==null||Z.addLayer(xe),s.value=xe,V(xe)}else Be instanceof vt.Polygon?q(Be):Be instanceof js?(Be.updateProperties(),O(Be,"Line"),N(Be)):Be instanceof vt.Polyline?N(Be):Be instanceof Ml&&(Be.updateProperties(),$(Be))}}),te.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(we=>we.remove()),oa("Déplacez la forme à l'endroit souhaité")}),te.on("pm:dragend",we=>{var ue,re,Z;console.log("[pm:dragend] Début",{layer:we.layer,currentProperties:we.layer.properties});const Be=we.layer;if(Be){const U=((ue=Be.properties)==null?void 0:ue.type)||"unknown";if(Be instanceof vt.Rectangle&&!(Be instanceof $a)){const xe=new $a(Be.getBounds(),{...Be.options});xe.updateProperties(),(re=e.value)==null||re.removeLayer(Be),(Z=e.value)==null||Z.addLayer(xe),s.value=xe,V(xe)}else Be instanceof js?(Be.updateProperties(),O(Be,"Line"),N(Be)):O(Be,U);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:Be.properties,selectedShape:s.value})}setTimeout(()=>{oa("Cliquez sur la forme pour afficher les points de contrôle")},100)}),te.on("pm:remove",()=>{var we;(we=document.querySelector(".drawing-help-message"))==null||we.remove()}),te.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(we=>we.remove()),oa("Utilisez les points de contrôle pour modifier la forme")}),te.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(we=>we.remove())}),te.on("zoomstart",()=>{s.value&&(m(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(we=>we.remove()))}),te.on("almost:over",function(we){const ue=we.layer;if(ue){if(s.value===ue)return;if(ue instanceof js){const re={...ue.options};ue._originalStyle=re,ue.setStyle({weight:(re.weight||3)+2,opacity:Math.min((re.opacity||1)+.2,1)}),document.querySelectorAll(".drawing-help-message").forEach(Z=>Z.remove()),oa("Cliquez pour sélectionner cette ligne"),te.getContainer()&&(te.getContainer().style.cursor="pointer")}else if(ue instanceof Ql){const re={...ue.options};ue._originalStyle=re,ue.setStyle({weight:(re.weight||3)+2,opacity:Math.min((re.opacity||1)+.2,1),fillOpacity:Math.min((re.fillOpacity||.2)+.1,.4)}),document.querySelectorAll(".drawing-help-message").forEach(Z=>Z.remove()),oa("Cliquez pour sélectionner ce polygone"),te.getContainer()&&(te.getContainer().style.cursor="pointer")}else if(ue instanceof Ml){const re=ue.getElement();re&&(console.log("[almost:over] État initial de la GeoNote",{display:re.style.display,visibility:re.style.visibility,opacity:re.style.opacity,filter:re.style.filter}),re.classList.add("geo-note-pulse"),re.style.zIndex="1000",re.style.visibility="visible",re.style.display="flex",re.style.opacity="1",re.style.filter="drop-shadow(0 0 5px rgba(59, 130, 246, 0.7))",console.log("[almost:over] GeoNote après application de l'effet",re)),document.querySelectorAll(".drawing-help-message").forEach(Z=>Z.remove()),oa("Cliquez pour sélectionner cette note"),te.getContainer()&&(te.getContainer().style.cursor="pointer")}}}),te.on("almost:out",function(we){const ue=we.layer;if(ue){if(s.value===ue)return;if(ue instanceof js&&ue._originalStyle)ue.setStyle(ue._originalStyle),ue._originalStyle=void 0;else if(ue instanceof Ql)ue._originalStyle&&(ue.setStyle(ue._originalStyle),ue._originalStyle=void 0);else if(ue instanceof Ml){const re=ue.getElement();re?(console.log("[almost:out] État de la GeoNote avant réinitialisation",{display:re.style.display,visibility:re.style.visibility,opacity:re.style.opacity,filter:re.style.filter}),re.classList.remove("geo-note-pulse"),re.style.zIndex="",re.style.filter="none",re.style.opacity="1",re.style.display="block",re.style.visibility="visible",Array.from(re.querySelectorAll("*")).forEach(Z=>{Z.style.visibility="visible",Z.style.display="block",Z.style.opacity="1"}),console.log("[almost:out] GeoNote après réinitialisation",re),setTimeout(()=>{try{const Z=re.getBoundingClientRect();(Z.width===0||Z.height===0)&&(console.warn("[almost:out] L'élément a une taille nulle après sortie, recréation de l'icône"),ue.recreateIcon())}catch(Z){console.error("[almost:out] Erreur lors de la vérification de la taille:",Z),ue.recreateIcon()}},100)):(console.warn("[almost:out] Élément DOM introuvable, recréation de l'icône"),ue.recreateIcon())}(!s.value||s.value&&s.value!==ue)&&document.querySelectorAll(".drawing-help-message").forEach(re=>re.remove()),te.getContainer()&&!document.querySelectorAll(".geo-note-pulse").length&&!document.querySelectorAll(".line-hover-effect").length&&(te.getContainer().style.cursor="")}}),te.on("almost:click",function(we){var re,Z;const Be=we;console.log("[almost:click] Clic à proximité d'une couche",Be);const ue=Be.layer;ue&&s.value===ue||(s.value&&m(),ue&&ue instanceof js?(s.value=ue,(re=r.value)==null||re.clearLayers(),m(),N(ue),oa("Utilisez les points de contrôle pour modifier la ligne")):ue&&ue instanceof Ql?(s.value=ue,(Z=r.value)==null||Z.clearLayers(),m(),q(ue),oa("Utilisez les points de contrôle pour modifier le polygone")):ue&&ue instanceof Ml&&(s.value=ue,ue.editNote()))}),Oe.on("layeradd",function(we){te.almostOver&&(we.layer instanceof js||we.layer instanceof vt.Polyline&&!(we.layer instanceof vt.Polygon)||we.layer instanceof Ql||we.layer instanceof Ml)&&(te.almostOver.addLayer(we.layer),console.log("[useMapDrawing] Nouvelle couche ajoutée à almostOver"))}),Oe.on("layerremove",function(we){te.almostOver&&(we.layer instanceof js||we.layer instanceof vt.Polyline&&!(we.layer instanceof vt.Polygon)||we.layer instanceof Ql||we.layer instanceof Ml)&&(te.almostOver.removeLayer(we.layer),console.log("[useMapDrawing] Couche supprimée de almostOver"))}),te},R=()=>{if(!(!n.value||!e.value||!e.value.getLayers().length))try{const J=e.value.getBounds();if(J.isValid()){const se={zoomAnimation:n.value.options.zoomAnimation,fadeAnimation:n.value.options.fadeAnimation,markerZoomAnimation:n.value.options.markerZoomAnimation};n.value.options.zoomAnimation=!1,n.value.options.fadeAnimation=!1,n.value.options.markerZoomAnimation=!1,n.value.fitBounds(J,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),n.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{n.value.options.fadeAnimation=se.fadeAnimation,setTimeout(()=>{try{n.value.options.zoomAnimation=se.zoomAnimation,n.value.options.markerZoomAnimation=se.markerZoomAnimation}catch(fe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",fe)}},500)}catch(fe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",fe)}},500)}}catch(J){if(console.warn("[useMapDrawing] Error adjusting view:",J),n.value)try{n.value.options.zoomAnimation=!0,n.value.options.fadeAnimation=!0,n.value.options.markerZoomAnimation=!0,n.value.invalidateSize({animate:!1,pan:!1})}catch(se){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",se)}}},G=J=>{var fe;if(!n.value)return;document.querySelectorAll(".drawing-help-message").forEach(ie=>ie.remove());try{const ie=n.value.pm;ie.globalEditModeEnabled()&&ie.disableGlobalEditMode(),ie.globalRemovalModeEnabled()&&ie.disableGlobalRemovalMode(),ie.disableDraw(),m(),(fe=r.value)==null||fe.clearLayers()}catch(ie){console.error("Error disabling modes:",ie)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:J}})),i.value=J,!J){m(),T();return}let se=J;switch(J){case"Note":se="GeoNote";break;case"Polygon":se="Polygon";break;case"Line":se="Line";break;case"ElevationLine":se="ElevationLine";break;default:se=J}J=se,ve(),setTimeout(()=>{var ie,te,Oe,we,Be,ue,re,Z,U,xe,Ne,Ge,Se;try{switch(J){case"Polygon":oa("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ie=n.value)==null||ie.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(te=n.value)==null||te.off("pm:create"),(Oe=n.value)==null||Oe.on("pm:create",je=>{var st,lt,_t;if(je.shape==="Polygon"&&je.layer){const Je=je.layer.getLatLngs()[0];(st=n.value)==null||st.removeLayer(je.layer),(lt=e.value)!=null&&lt.hasLayer(je.layer)&&e.value.removeLayer(je.layer);const zt=new Ql(Je,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(zt),s.value=zt,zt.updateProperties()),(_t=n.value)==null||_t.pm.disableDraw(),ve()}});break;case"Circle":e.value&&e.value.getLayers().filter(st=>st instanceof $a).forEach(st=>{st.toggleHelperPoints(n.value,!0,"#DC2626","#2563EB")}),n.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[e.value,r.value],snapMiddle:!0,snapIntersections:!0}),oa("Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),n.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":oa("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(we=n.value)==null||we.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":oa("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Be=n.value)==null||Be.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":oa("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(ue=n.value)==null||ue.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(re=n.value)==null||re.off("pm:create"),(Z=n.value)==null||Z.on("pm:create",je=>{var st,lt,_t;if(je.shape==="Line"&&je.layer){const Je=je.layer.getLatLngs();(st=n.value)==null||st.removeLayer(je.layer),(lt=e.value)!=null&&lt.hasLayer(je.layer)&&e.value.removeLayer(je.layer);const zt=new js(Je,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(zt),s.value=zt,zt.updateProperties()),(_t=n.value)==null||_t.pm.disableDraw(),ve()}});break;case"Text":if(oa("Cliquez pour ajouter du texte, double-cliquez pour éditer"),n.value){const je=st=>{if(!n.value||!e.value)return;const lt=l(st.latlng);e.value.addLayer(lt),s.value=lt,n.value.off("click",je),G("")};n.value.on("click",je)}break;case"GeoNote":if(oa("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),n.value){const je=async lt=>{if(!n.value||!e.value)return null;try{const _t=Ip(),Je=new Ml(lt,{color:"#3B82F6",name:"Note géolocalisée",description:"",columnId:"1"});e.value.addLayer(Je),s.value=Je,Je.updateProperties();try{const zt=_t.currentMapId||void 0,Xt=await Je.saveNote(zt);console.log(`[useMapDrawing] Note sauvegardée avec succès, ID backend: ${Xt}`);const et=Je._leaflet_id;return console.log(`[useMapDrawing] ID Leaflet: ${et}, ID backend: ${Xt}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:Je,leafletId:et,backendId:Xt}})),Je.openPopup(),Je}catch(zt){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",zt),Id(async()=>{const{useNotificationStore:Xt}=await Promise.resolve().then(()=>cB);return{useNotificationStore:Xt}},void 0).then(({useNotificationStore:Xt})=>{Xt().error("Erreur lors de la création de la note")}),null}}catch(_t){return console.error("[useMapDrawing] Erreur lors de la création de la note:",_t),null}},st=async lt=>{vt.DomEvent.stopPropagation(lt),vt.DomEvent.preventDefault(lt);const _t=await je(lt.latlng);_t&&(n.value.off("click",st),e.value&&e.value.getLayers().forEach(Je=>{if(Je.off&&typeof Je.off=="function")try{Je.off("click")}catch(zt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",zt)}}),G(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:_t,leafletId:_t._leaflet_id}})))};if(n.value.on("click",st),e.value){const lt=async Je=>{vt.DomEvent.stopPropagation(Je),vt.DomEvent.preventDefault(Je),console.log("[useMapDrawing] Clic sur une forme existante en mode GeoNote");const zt=await je(Je.latlng);return zt&&(n.value.off("click",st),e.value&&e.value.getLayers().forEach(Xt=>{if(Xt.off&&typeof Xt.off=="function")try{Xt.off("click")}catch(et){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",et)}}),G(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:zt,leafletId:zt._leaflet_id}}))),!1};e.value.getLayers().forEach(Je=>{Je.on("click",lt)});const _t=()=>{e.value&&e.value.getLayers().forEach(Je=>{if(Je.off&&typeof Je.off=="function")try{Je.off("click")}catch(zt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",zt)}}),window.removeEventListener("tool:changed",_t),console.log("[useMapDrawing] Nettoyage des gestionnaires d'événements pour les formes existantes")};window.addEventListener("tool:changed",_t)}}break;case"delete":oa("Cliquez sur une forme pour la supprimer"),(U=n.value)==null||U.pm.enableGlobalRemovalMode();break;case"ElevationLine":oa("Cliquez et maintenez pour tracer le profil altimétrique"),(xe=n.value)==null||xe.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(Ne=n.value)==null||Ne.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(Ge=n.value)==null||Ge.off("pm:create"),(Se=n.value)==null||Se.on("pm:create",async je=>{var st,lt,_t;if(je.shape==="Line"&&je.layer){const Je=je.layer.getLatLngs();(st=n.value)==null||st.removeLayer(je.layer),(lt=e.value)!=null&&lt.hasLayer(je.layer)&&e.value.removeLayer(je.layer),(_t=n.value)==null||_t.pm.disableDraw(),i.value="",ve()}});break}}catch(ce){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",ce)}},100)},ee=J=>{var fe;if(!s.value)return;const se=s.value;if(se.properties=se.properties||{},se.properties.style=se.properties.style||{},se.properties.style={...se.properties.style,...J},se.properties.type==="text"){const ie=se.properties._textLayer,te=(fe=ie==null?void 0:ie.getElement())==null?void 0:fe.querySelector(".text-annotation");te&&S5(te,se.properties.style);const Oe={color:J.borderColor||se.properties.style.borderColor,weight:parseInt(J.borderWidth||se.properties.style.borderWidth),opacity:J.borderOpacity??se.properties.style.borderOpacity};"setStyle"in se&&se.setStyle(Oe)}else if(se.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprimé selon les exigences");else{const ie={};J.fillColor&&(ie.fillColor=J.fillColor),J.fillOpacity!==void 0&&(ie.fillOpacity=J.fillOpacity),J.strokeColor&&(ie.color=J.strokeColor),J.strokeOpacity!==void 0&&(ie.opacity=J.strokeOpacity),J.strokeWidth!==void 0&&(ie.weight=J.strokeWidth),J.dashArray&&(ie.dashArray=J.dashArray),"setStyle"in se&&se.setStyle(ie)}},pe=J=>{var we,Be,ue,re,Z;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:J,layerType:(we=s.value.properties)==null?void 0:we.type,beforeName:s.value.name,beforePropertiesName:(Be=s.value.properties)==null?void 0:Be.name,beforeCategory:(ue=s.value.properties)==null?void 0:ue.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const se=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${se}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const fe=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise à jour: ${fe}`);const ie=s.value.properties.category;console.log(`[useMapDrawing] Catégorie existante: ${ie}`);const te="category"in J&&J.category!==ie;if(Object.keys(J).forEach(U=>{U==="type"&&fe?console.log(`[useMapDrawing] Préservation du type original: ${fe}`):s.value.properties[U]=J[U],U==="name"&&(console.log(`[useMapDrawing] Setting name "${J[U]}" directly on layer`),s.value.name=J[U]),U==="category"&&console.log(`[useMapDrawing] Mise à jour de la catégorie: ${ie} -> ${J[U]}`)}),fe&&(s.value.properties.type=fe),ie&&!te&&(console.log(`[useMapDrawing] Restauration de la catégorie originale: ${ie}`),s.value.properties.category=ie),s.value._dbId&&te){const U=Ip(),xe=U.elements.find(Ne=>Ne.id===s.value._dbId);if(xe){console.log(`[useMapDrawing] Mise à jour de la catégorie dans le store: ${s.value.properties.category} pour l'élément ${s.value._dbId}`);const Ne=xe;Ne.data||(Ne.data={}),Ne.data.category=s.value.properties.category,U.$patch({unsavedChanges:!0})}}const Oe=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:te}});if(window.dispatchEvent(Oe),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(re=s.value.properties)==null?void 0:re.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((Z=s.value.properties)==null?void 0:Z.type)==="Circle"){const U=s.value,xe=U.getRadius();U.properties.radius=xe,U.properties.diameter=xe*2,U.properties.surface=Math.PI*xe*xe,U.properties.perimeter=2*Math.PI*xe,J.name&&(console.log(`[useMapDrawing] Ensuring circle name "${J.name}" is set in multiple places`),U.properties.name=J.name,U.properties.style.name=J.name,U.name=J.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:U.name,circlePropertiesName:U.properties.name,nameIsEnumerable:Object.keys(U).includes("name"),propertiesNameIsEnumerable:Object.keys(U.properties).includes("name")}))}},ge=J=>{console.log("[forceShapeUpdate] Début",{currentProperties:J.properties,selectedShapeRef:s.value}),s.value=null,la(()=>{s.value=J,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:s.value,properties:s.value.properties})})},O=(J,se)=>{console.log("[updateLayerProperties] Début",{layer:J,shapeType:se,currentProperties:J.properties}),KV((ie,te)=>{const Oe=E(ie,te);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:Oe}),ie.properties={...Oe},ge(ie),ie.fire("properties:updated",{shape:ie,properties:ie.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:ie.properties,selectedShape:s.value})},100)(J,se)},j=(J,se)=>vt.latLng((J.lat+se.lat)/2,(J.lng+se.lng)/2),Y=J=>{if(!n.value||!e.value)return;m();const se=J.getLatLng(),fe=J.getRadius(),ie=S(se,"#059669");v.push(ie),p(ie,J,()=>[ts(fe,"m","Rayon"),ts(fe*2,"m","Diamètre"),ts(Math.PI*Math.pow(fe,2),"m²","Surface")].join("<br>"));const te=[],Oe=[0,45,90,135,180,225,270,315];Oe.forEach(we=>{const Be=J.calculatePointOnCircle(we),ue=S(Be,"#2563EB");te.push(ue),v.push(ue),p(ue,J,()=>ts(fe,"m","Rayon")),ue.on("mousedown",re=>{if(!n.value)return;vt.DomEvent.stopPropagation(re),n.value.dragging.disable();let Z=!0;const U=Ne=>{Z&&(J.resizeFromControlPoint(Ne.latlng),te.forEach((Ge,Se)=>{const ce=J.calculatePointOnCircle(Oe[Se]);Ge.setLatLng(ce)}),ie.setLatLng(J.getLatLng()),ue.measureDiv&&(ue.measureDiv.innerHTML=ts(J.getRadius(),"m","Rayon")))},xe=()=>{Z=!1,n.value&&(n.value.off("mousemove",U),document.removeEventListener("mouseup",xe),n.value.dragging.enable(),J.updateProperties(),s.value=null,la(()=>{s.value=J}),O(J,"Circle"))};n.value.on("mousemove",U),document.addEventListener("mouseup",xe)})}),ie.on("mousedown",we=>{if(!n.value)return;vt.DomEvent.stopPropagation(we),n.value.dragging.disable();let Be=!0;const ue=J.getLatLng(),re=we.latlng,Z=xe=>{if(!Be)return;const Ne=xe.latlng.lng-re.lng,Ge=xe.latlng.lat-re.lat,Se=vt.latLng(ue.lat+Ge,ue.lng+Ne);vt.Circle.prototype.setLatLng.call(J,Se),ie.setLatLng(Se),te.forEach((ce,je)=>{const st=J.calculatePointOnCircle(Oe[je]);ce.setLatLng(st)}),ie.measureDiv&&(ie.measureDiv.innerHTML=[ts(J.getRadius(),"m","Rayon"),ts(J.getRadius()*2,"m","Diamètre"),ts(Math.PI*Math.pow(J.getRadius(),2),"m²","Surface")].join("<br>"))},U=()=>{Be=!1,n.value&&(n.value.off("mousemove",Z),document.removeEventListener("mouseup",U),n.value.dragging.enable(),J.updateProperties(),s.value=null,la(()=>{s.value=J}),O(J,"Circle"))};n.value.on("mousemove",Z),document.addEventListener("mouseup",U)}),J.on("circle:resized",()=>{O(J,"Circle")}),s.value=J},V=J=>{var Z;if(!n.value||!e.value)return;if(!(J instanceof $a)){console.warn("La couche n'est pas une instance de Rectangle");return}const se=J;m();const fe=se.getCenter(),ie=se.getRotatedCorners(),te=se.getMidPoints(),Oe=S(fe,"#059669");v.push(Oe),p(Oe,se,()=>{const{width:U,height:xe}=se.getDimensions(),Ne=U*xe,Ge=se.getRotation();return[ts(U,"m","Largeur"),ts(xe,"m","Hauteur"),ts(Ne,"m²","Surface"),`Rotation: ${Ge.toFixed(1)}°`].join("<br>")});const we=S(vt.latLng(fe.lat+(ie[0].lat-fe.lat)*1.2,fe.lng+(ie[0].lng-fe.lng)*1.2),"#F97316");v.push(we);const Be=vt.polyline([fe,we.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(Z=t.value)==null||Z.addLayer(Be);const ue=ie.map(U=>{const xe=S(U,"#DC2626");return v.push(xe),p(xe,se,()=>{const{width:Ne,height:Ge}=se.getDimensions();return[ts(Ne,"m","Largeur"),ts(Ge,"m","Hauteur")].join("<br>")}),xe}),re=te.map((U,xe)=>{const Ne=S(U,"#2b6451");return v.push(Ne),p(Ne,se,()=>{const{width:Ge,height:Se}=se.getDimensions(),ce=xe%2===0?Ge:Se;return[ts(ce,"m","Longueur du côté"),ts(ce/2,"m","Distance au coin")].join("<br>")}),Ne});Oe.on("mousedown",U=>{if(!n.value)return;vt.DomEvent.stopPropagation(U),n.value.dragging.disable();let xe=!0;const Ne=Se=>{if(!xe)return;se.moveFromCenter(Se.latlng);const ce=se.getRotatedCorners(),je=se.getMidPoints();ue.forEach((lt,_t)=>lt.setLatLng(ce[_t])),re.forEach((lt,_t)=>lt.setLatLng(je[_t])),Oe.setLatLng(Se.latlng);const st=vt.latLng(Se.latlng.lat+(ce[0].lat-Se.latlng.lat)*1.2,Se.latlng.lng+(ce[0].lng-Se.latlng.lng)*1.2);we.setLatLng(st),Be.setLatLngs([Se.latlng,st])},Ge=()=>{xe=!1,n.value&&(n.value.off("mousemove",Ne),document.removeEventListener("mouseup",Ge),n.value.dragging.enable(),se.updateProperties(),s.value=null,la(()=>{s.value=se}))};n.value.on("mousemove",Ne),document.addEventListener("mouseup",Ge)}),we.on("mousedown",U=>{if(!n.value)return;vt.DomEvent.stopPropagation(U),n.value.dragging.disable();let xe=!1;const Ne=U.latlng,Ge=se.getRotation(),Se=se.getCenter(),ce=Ne.lng-Se.lng,je=Ne.lat-Se.lat,st=Math.atan2(je,ce)*180/Math.PI;v.forEach(Je=>{Je!==we&&(Je.setStyle({opacity:0,fillOpacity:0}),Je.measureDiv&&(Je.measureDiv.style.display="none"))});const lt=qh(Je=>{xe||(xe=!0);const zt=Je.latlng.lng-Se.lng,Xt=Je.latlng.lat-Se.lat;let ut=Math.atan2(Xt,zt)*180/Math.PI-st,ot=(Ge+ut)%360;ot<0&&(ot+=360),se.setRotation(ot,!1),we.setLatLng(Je.latlng),Be.setLatLngs([Se,Je.latlng])},16),_t=()=>{n.value&&(n.value.off("mousemove",lt),document.removeEventListener("mouseup",_t),n.value.dragging.enable(),xe&&se.finalizeRotation(),s.value=null,la(()=>{s.value=se,m(),V(se)}))};n.value.on("mousemove",lt),document.addEventListener("mouseup",_t)}),se.on("coordinates:updated",U=>{const{corners:xe,center:Ne}=U,Ge=se.getMidPoints();ue.forEach((ce,je)=>ce.setLatLng(xe[je])),re.forEach((ce,je)=>ce.setLatLng(Ge[je])),Oe.setLatLng(Ne);const Se=vt.latLng(Ne.lat+(xe[0].lat-Ne.lat)*1.2,Ne.lng+(xe[0].lng-Ne.lng)*1.2);we.setLatLng(Se),Be.setLatLngs([Ne,Se])})},N=J=>{if(!n.value||!e.value)return;m();const se=J.getLatLngs();if(!se||se.length===0){console.warn("Pas de points pour la ligne");return}let fe=null;if(J instanceof js){const ie=J.getCenter();fe=S(ie,"#059669"),v.push(fe),p(fe,J,()=>{const te=J.getLength()||0;return ts(te,"m","Longueur totale")}),fe.on("mousedown",te=>{if(!n.value)return;vt.DomEvent.stopPropagation(te),n.value.dragging.disable();let Oe=!0;const we=J.getLatLngs().map(U=>vt.latLng(U.lat,U.lng)),Be=te.latlng;J instanceof js&&(J.off("move:end"),J.off("vertex:moved"),J.off("latlngs:updated"),J.off("properties:updated")),v.forEach((U,xe)=>{xe>0&&(U.setStyle({opacity:0,fillOpacity:0}),U.measureDiv&&(U.measureDiv.style.display="none"))});const re=qh(U=>{if(!Oe)return;const xe=U.latlng.lng-Be.lng,Ne=U.latlng.lat-Be.lat,Ge=we.map(Se=>vt.latLng(Se.lat+Ne,Se.lng+xe));vt.Polyline.prototype.setLatLngs.call(J,Ge),fe==null||fe.setLatLng(U.latlng)},16),Z=()=>{if(Oe=!1,!!n.value){if(n.value.off("mousemove",re),document.removeEventListener("mouseup",Z),n.value.dragging.enable(),J instanceof js){const U=()=>{m(),N(J)};J.on("move:end",U),J.on("vertex:moved",U),J.on("latlngs:updated",U),J.on("properties:updated",U),J.updateProperties(),O(J,"Line")}m(),N(J)}};n.value.on("mousemove",re),document.addEventListener("mouseup",Z)})}if(se.forEach((ie,te)=>{const Oe=S(ie,"#DC2626");v.push(Oe),p(Oe,J,()=>{if(J instanceof js){const we=J.getLength()||0,Be=J.getLengthToVertex(te);return[ts(Be,"m","Distance depuis le début"),ts(we,"m","Longueur totale")].join("<br>")}return""}),Oe.on("mousedown",we=>{if(!n.value)return;vt.DomEvent.stopPropagation(we),n.value.dragging.disable();let Be=!0;J instanceof js&&(J.off("move:end"),J.off("vertex:moved"),J.off("latlngs:updated"),J.off("properties:updated")),v.forEach((Z,U)=>{U!==te+1&&(Z.setStyle({opacity:0,fillOpacity:0}),Z.measureDiv&&(Z.measureDiv.style.display="none"))});const ue=qh(Z=>{if(!Be)return;const U=J.getLatLngs();U[te]=Z.latlng,vt.Polyline.prototype.setLatLngs.call(J,U),Oe.setLatLng(Z.latlng)},16),re=()=>{if(Be=!1,!!n.value){if(n.value.off("mousemove",ue),document.removeEventListener("mouseup",re),n.value.dragging.enable(),J instanceof js){const Z=()=>{m(),N(J)};J.on("move:end",Z),J.on("vertex:moved",Z),J.on("latlngs:updated",Z),J.on("properties:updated",Z),J.updateProperties(),O(J,"Line")}m(),N(J)}};n.value.on("mousemove",ue),document.addEventListener("mouseup",re)})}),se.length>=2)for(let ie=0;ie<se.length-1;ie++){const te=se[ie],Oe=se[ie+1],we=vt.latLng((te.lat+Oe.lat)/2,(te.lng+Oe.lng)/2),Be=S(we,"#2b6451");v.push(Be),p(Be,J,()=>{if(J instanceof js){const ue=J.getSegmentLengthAt(ie),re=J.getLength()||0,Z=J.getLengthToVertex(ie)+ue/2;return[ts(ue,"m","Longueur du segment"),ts(ue/2,"m","Demi-segment"),ts(Z,"m","Distance depuis le début"),ts(re,"m","Longueur totale")].join("<br>")}return""})}if(J instanceof js){const ie=()=>{m(),N(J)};J.on("move:start",()=>{v.forEach((te,Oe)=>{Oe>0&&(te.setStyle({opacity:0,fillOpacity:0}),te.measureDiv&&(te.measureDiv.style.display="none"))})}),J.on("move:end",ie),J.on("vertex:moved",ie),J.on("latlngs:updated",ie),J.on("properties:updated",ie),v.cleanup=()=>{J.off("move:start",()=>{}),J.off("move:end",ie),J.off("vertex:moved",ie),J.off("latlngs:updated",ie),J.off("properties:updated",ie)}}},q=J=>{if(!n.value||!e.value)return;m();const se=J.getLatLngs()[0],fe=se.map(re=>[re.lng,re.lat]);fe.push(fe[0]);const ie=qu([fe]),te=Uc(ie),Oe=se.reduce((re,Z,U)=>{const xe=se[(U+1)%se.length];return re+Z.distanceTo(xe)},0);let we;if(typeof J.getCenter=="function")try{we=J.getCenter()}catch(re){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",re);const Z=qg(ie);we=vt.latLng(Z.geometry.coordinates[1],Z.geometry.coordinates[0])}else{const re=qg(ie);we=vt.latLng(re.geometry.coordinates[1],re.geometry.coordinates[0])}const Be=S(we,"#059669");v.push(Be),p(Be,J,()=>[ts(Oe,"m","Périmètre"),ts(te,"m²","Surface")].join("<br>")),Be.on("mousedown",re=>{if(!n.value)return;vt.DomEvent.stopPropagation(re),n.value.dragging.disable();let Z=!0;const U=re.latlng,xe=[...se];v.forEach((ce,je)=>{je>0&&ce.setStyle({opacity:0,fillOpacity:0})});const Ne=qh(ce=>{if(!Z)return;const je=ce.latlng.lng-U.lng,st=ce.latlng.lat-U.lat,lt=xe.map(_t=>vt.latLng(_t.lat+st,_t.lng+je));vt.Polygon.prototype.setLatLngs.call(J,[lt]),Be.setLatLng(ce.latlng)},16),Ge=ce=>{Z&&Ne(ce)},Se=()=>{if(Z=!1,!!n.value){if(n.value.off("mousemove",Ge),document.removeEventListener("mouseup",Se),n.value.dragging.enable(),J.properties){const ce=J.getLatLngs()[0],je=ce.map(lt=>[lt.lng,lt.lat]);je.push(je[0]);const st=qu([je]);J.properties.area=Uc(st),J.properties.perimeter=ce.reduce((lt,_t,Je)=>{const zt=ce[(Je+1)%ce.length];return lt+_t.distanceTo(zt)},0),J.properties.surface=J.properties.area}m(),q(J),s.value=null,la(()=>{s.value=J})}};n.value.on("mousemove",Ge),document.addEventListener("mouseup",Se)}),se.forEach((re,Z)=>{const U=S(re,"#DC2626");v.push(U),p(U,J,()=>{const xe=se[(Z-1+se.length)%se.length],Ne=se[(Z+1)%se.length],Ge=re.distanceTo(xe),Se=re.distanceTo(Ne);return[ts(Ge,"m","Distance au point précédent"),ts(Se,"m","Distance au point suivant"),ts(Oe,"m","Périmètre total"),ts(te,"m²","Surface")].join("<br>")}),U.on("mousedown",xe=>{if(vt.DomEvent.stopPropagation(xe),!n.value)return;n.value.dragging.disable();let Ne=!0;Be&&(Be.setStyle({opacity:0,fillOpacity:0}),Be.measureDiv&&(Be.measureDiv.style.display="none"));const Ge=qh(je=>{if(!Ne)return;se[Z]=je.latlng,vt.Polygon.prototype.setLatLngs.call(J,[se]),U.setLatLng(je.latlng);const st=v.slice(se.length+1),lt=(Z-1+se.length)%se.length,_t=st[lt];if(_t){const zt=se[lt],Xt=se[Z],et=vt.latLng((zt.lat+Xt.lat)/2,(zt.lng+Xt.lng)/2);_t.setLatLng(et)}const Je=st[Z];if(Je){const zt=se[Z],Xt=se[(Z+1)%se.length],et=vt.latLng((zt.lat+Xt.lat)/2,(zt.lng+Xt.lng)/2);Je.setLatLng(et)}},16),Se=je=>{Ne&&Ge(je)},ce=()=>{if(Ne=!1,!!n.value){if(n.value.off("mousemove",Se),document.removeEventListener("mouseup",ce),n.value.dragging.enable(),J.properties){const je=J.getLatLngs()[0].map(lt=>[lt.lng,lt.lat]);je.push(je[0]);const st=qu([je]);J.properties.area=Uc(st),J.properties.perimeter=se.reduce((lt,_t,Je)=>{const zt=se[(Je+1)%se.length];return lt+_t.distanceTo(zt)},0),J.properties.surface=J.properties.area}m(),q(J),s.value=null,la(()=>{s.value=J})}};n.value.on("mousemove",Se),document.addEventListener("mouseup",ce)})}),(()=>{const re=J.getLatLngs()[0];v.slice(re.length+1).forEach(U=>{t.value&&t.value.removeLayer(U)}),v=v.slice(0,re.length+1);const Z=new Array(re.length);for(let U=0;U<re.length;U++){const xe=re[U],Ne=re[(U+1)%re.length];Z[U]=j(xe,Ne)}Z.forEach((U,xe)=>{const Ne=S(U,"#2b6451");v.push(Ne),p(Ne,J,()=>{const Ge=re[xe],Se=re[(xe+1)%re.length],ce=Ge.distanceTo(Se);return[ts(ce,"m","Longueur du segment"),ts(Oe,"m","Périmètre total"),ts(te,"m²","Surface")].join("<br>")}),Ne.on("mousedown",Ge=>{if(!n.value)return;vt.DomEvent.stopPropagation(Ge),n.value.dragging.disable();let Se=!0;const ce=xe;Be&&(Be.setStyle({opacity:0,fillOpacity:0}),Be.measureDiv&&(Be.measureDiv.style.display="none"));const je=[...J.getLatLngs()[0]];je.splice((ce+1)%je.length,0,U),J.setLatLngs([je]),m(),q(J);const st=ce+1,lt=1+st,_t=st<v.length-1?v[lt]:null;if(_t){const Je=Xt=>{if(!Se)return;const et=J.getLatLngs()[0];et[st]=Xt.latlng,J.setLatLngs([et]),_t.setLatLng(Xt.latlng);const ut=v.slice(1+et.length),ot=(st-1+et.length)%et.length,It=st;if(ut[ot]){const Jt=et[ot],xn=et[st],Sn=vt.latLng((Jt.lat+xn.lat)/2,(Jt.lng+xn.lng)/2);ut[ot].setLatLng(Sn)}if(ut[It]){const Jt=et[st],xn=et[(st+1)%et.length],Sn=vt.latLng((Jt.lat+xn.lat)/2,(Jt.lng+xn.lng)/2);ut[It].setLatLng(Sn)}},zt=()=>{if(Se=!1,!!n.value){if(n.value.off("mousemove",Je),document.removeEventListener("mouseup",zt),n.value.dragging.enable(),J.properties){const Xt=J.getLatLngs()[0].map(ut=>[ut.lng,ut.lat]);Xt.push(Xt[0]);const et=qu([Xt]);J.properties.area=Uc(et),J.properties.perimeter=J.getLatLngs()[0].reduce((ut,ot,It,Jt)=>{const xn=Jt[(It+1)%Jt.length];return ut+ot.distanceTo(xn)},0)}m(),q(J),s.value=null,la(()=>{s.value=J})}};n.value.on("mousemove",Je),document.addEventListener("mouseup",zt)}else n.value.dragging.enable(),m(),q(J)})})})()},$=J=>{if(!n.value||!e.value)return;m();const se=J.getLatLng(),fe=S(se,"#059669");v.push(fe),p(fe,J,()=>`Position: ${se.lat.toFixed(6)}, ${se.lng.toFixed(6)}`),fe.on("mousedown",ie=>{if(!n.value)return;vt.DomEvent.stopPropagation(ie),n.value.dragging.disable(),J.startMoving();let te=!0;const we=qh(ue=>{te&&(fe.setLatLng(ue.latlng),J.setLatLng(ue.latlng))},16),Be=()=>{n.value&&(n.value.off("mousemove",we),document.removeEventListener("mouseup",Be),n.value.dragging.enable(),te=!1,J.finishMoving(),J.updateProperties(),s.value=null,la(()=>{s.value=J,m(),$(J)}))};n.value.on("mousemove",we),document.addEventListener("mouseup",Be)}),s.value=J},F=J=>{if(!(!n.value||!r.value)){console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:J.constructor.name,properties:J.properties}),r.value.clearLayers();try{if(J instanceof $a)J.generateHelperPoints(n.value);else if(J instanceof lp){if("getLatLng"in J&&typeof J.getLatLng=="function"){const se=J.getLatLng();if(se){const fe=vt.circleMarker(se,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(fe)}}}else if(J instanceof Ml){const se=J.getLatLng();if(se){const fe=vt.circleMarker(se,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(fe)}}else if(J instanceof Ql||J instanceof vt.Polygon){let se=[];if("getLatLngs"in J){const ie=J.getLatLngs();if(Array.isArray(ie)&&ie.length>0){const te=ie[0];Array.isArray(te)?se=te:te instanceof vt.LatLng&&(se=ie)}}let fe=null;if(J instanceof Ql&&typeof J.getCenter=="function")fe=J.getCenter();else if(se.length>0){const ie=se.map(we=>[we.lng,we.lat]);ie.push(ie[0]);const te=qu([ie]),Oe=qg(te);fe=vt.latLng(Oe.geometry.coordinates[1],Oe.geometry.coordinates[0])}if(fe){const ie=vt.circleMarker(fe,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ie)}se.forEach(ie=>{if(ie){const te=vt.circleMarker(ie,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(te)}});for(let ie=0;ie<se.length;ie++){const te=se[ie],Oe=se[(ie+1)%se.length];if(te&&Oe){const we=vt.latLng((te.lat+Oe.lat)/2,(te.lng+Oe.lng)/2),Be=vt.circleMarker(we,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(Be)}}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}catch(se){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",se)}}},B=J=>{console.log("Nombre total de couches:",J.length);const se=J.filter(we=>{var re;if(!we)return!1;let Be=0,ue={width:0,height:0};if(we instanceof vt.Circle){Be=Math.PI*Math.pow(we.getRadius(),2);const Z=we.getRadius();console.log(`
Forme détectée: Circle`),console.log(`- Surface propre: ${Be.toFixed(2)} m²`),console.log(`- Rayon: ${Z.toFixed(2)} m`),console.log("- Angle: Cercle complet (360°)")}else if(we instanceof $a||we instanceof vt.Rectangle){const Z=we.getBounds(),U=Z.getSouthWest(),xe=Z.getNorthEast(),Ne=yc([[U.lng,U.lat],[xe.lng,U.lat]]),Ge=yc([[U.lng,U.lat],[U.lng,xe.lat]]);ue.width=Wh(Ne,{units:"meters"}),ue.height=Wh(Ge,{units:"meters"}),Be=ue.width*ue.height,console.log(`
Forme détectée: Rectangle`),console.log(`- Surface propre: ${Be.toFixed(2)} m²`),console.log(`- Largeur: ${ue.width.toFixed(2)} m`),console.log(`- Hauteur: ${ue.height.toFixed(2)} m`)}else if(((re=we.properties)==null?void 0:re.type)==="Semicircle"){const Z=we.getStartAngle(),U=we.getStopAngle(),xe=(U-Z+360)%360,Ne=we.getRadius();Be=Math.PI*Math.pow(Ne,2)*xe/360,console.log(`
Forme détectée: Semicircle`),console.log(`- Surface propre: ${Be.toFixed(2)} m²`),console.log(`- Rayon: ${Ne.toFixed(2)} m`),console.log(`- Angle de début: ${Z.toFixed(2)}°`),console.log(`- Angle de fin: ${U.toFixed(2)}°`),console.log(`- Angle d'ouverture: ${xe.toFixed(2)}°`)}return Be>0});if(se.length===0)return 0;const fe=new Set,ie=[];for(const we of se)if(!fe.has(we)){const Be=_e(se,we);Be.length>0&&(ie.push(Be),Be.forEach(ue=>fe.add(ue)))}console.log(`
Nombre de groupes de formes connectées: ${ie.length}`);const te=ie.map((we,Be)=>{console.log(`
Calcul pour le groupe ${Be+1} (${we.length} formes):`);const ue=we.map(Ne=>{var Ge,Se,ce;try{let je;if(Ne instanceof vt.Circle){const st=Ne.getLatLng(),lt=Ne.getRadius();je=lz([st.lng,st.lat],lt/1e3,{units:"kilometers",steps:256});const _t=Uc(je),Je=((Ge=Ne.properties)==null?void 0:Ge.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${lt.toFixed(2)}m`),console.log(`- Surface propriété: ${Je.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${_t.toFixed(2)}m²`),je}else if(Ne instanceof $a||Ne instanceof vt.Rectangle){const st=Ne.getBounds(),lt=st.getSouthWest(),_t=st.getNorthEast(),Je=vt.latLng(_t.lat,lt.lng),zt=vt.latLng(lt.lat,_t.lng),Xt=[[lt.lng,lt.lat],[zt.lng,zt.lat],[_t.lng,_t.lat],[Je.lng,Je.lat],[lt.lng,lt.lat]];je=qu([Xt]);const et=Uc(je),ut=yc([[lt.lng,lt.lat],[_t.lng,lt.lat]]),ot=yc([[lt.lng,lt.lat],[lt.lng,_t.lat]]),It=Wh(ut,{units:"meters"}),Jt=Wh(ot,{units:"meters"}),xn=It*Jt;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${It.toFixed(2)}m`),console.log(`- Hauteur: ${Jt.toFixed(2)}m`),console.log(`- Surface théorique: ${xn.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${et.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(xn-et).toFixed(2)}m² (${(Math.abs(xn-et)/xn*100).toFixed(2)}%)`),je}else if(((Se=Ne.properties)==null?void 0:Se.type)==="Semicircle"){const st=Ne.getCenter(),lt=Ne.getRadius(),_t=Ne.getStartAngle(),Je=Ne.getStopAngle(),zt=[],Xt=64;zt.push([st.lng,st.lat]);for(let ot=0;ot<=Xt;ot++){const Jt=(_t+(Je-_t+360)%360*ot/Xt)*Math.PI/180,xn=lt*Math.cos(Jt),An=lt*Math.sin(Jt)/111319.9,Zn=xn/(111319.9*Math.cos(st.lat*Math.PI/180));zt.push([st.lng+Zn,st.lat+An])}zt.push([st.lng,st.lat]),je=qu([zt]);const et=Uc(je),ut=((ce=Ne.properties)==null?void 0:ce.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${lt.toFixed(2)}m`),console.log(`- Surface propriété: ${ut.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${et.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(ut-et).toFixed(2)}m² (${(Math.abs(ut-et)/ut*100).toFixed(2)}%)`),je}return null}catch(je){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",je),null}}).filter(Ne=>Ne!==null);if(ue.length===0)return 0;const re=ue.map(Ne=>{const Ge=Uc(Ne);return console.log(`Surface individuelle: ${Ge.toFixed(2)}m²`),Ge});let Z=0;for(let Ne=0;Ne<ue.length;Ne++)for(let Ge=Ne+1;Ge<ue.length;Ge++)try{const Se=Yj([ue[Ne],ue[Ge]]),ce=kz(Se);if(ce){const je=Uc(ce);Z+=je,console.log(`Intersection entre formes ${Ne+1} et ${Ge+1}: ${je.toFixed(2)}m²`)}}catch(Se){console.error(`Erreur lors du calcul d'intersection entre les formes ${Ne+1} et ${Ge+1}:`,Se)}const U=re.reduce((Ne,Ge)=>Ne+Ge,0),xe=U-Z;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${Be+1}:`),console.log(`- Surface totale (somme): ${U.toFixed(2)}m²`),console.log(`- Surface d'intersection: ${Z.toFixed(2)}m²`),console.log(`- Surface d'irrigation finale: ${xe.toFixed(2)}m²`),xe}),Oe=Math.max(...te);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${Oe.toFixed(2)}m²`),Oe},Q=()=>{a.value&&(n.value.removeLayer(a.value),a.value=null)},X=(J,se)=>{if(!n.value)return;Q();const fe=se?_e(J,se):J;if(a.value||(a.value=vt.layerGroup().addTo(n.value)),fe.forEach(ie=>{var Oe;const te=(Oe=ie.properties)==null?void 0:Oe.type;if(te==="Circle"||te==="Semicircle"){const we=ie.getLatLng(),Be=ie.getRadius(),ue=vt.circle(we,{radius:Be,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:vt.canvas({padding:.5})}),re=vt.circle(we,{radius:Be,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:vt.canvas({padding:.5})});a.value&&(a.value.addLayer(re),a.value.addLayer(ue))}else if(te==="Rectangle"||te==="Polygon"){const we=ie.getLatLngs(),Be=vt.polygon(we,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:vt.canvas({padding:.5})}),ue=vt.polygon(we,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:vt.canvas({padding:.5})});a.value&&(a.value.addLayer(ue),a.value.addLayer(Be))}}),se&&fe.length>1&&n.value){const ie=vt.latLngBounds([]);fe.forEach(we=>{we.getBounds?ie.extend(we.getBounds()):we.getLatLng&&ie.extend(we.getLatLng())});const te=ie.getCenter(),Oe=vt.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connecté</div>").setLatLng(te);a.value&&a.value.addLayer(vt.marker(te,{opacity:0,interactive:!1}).bindTooltip(Oe).openTooltip())}},_e=(J,se)=>{if(!se)return[];const fe=new Set,ie=[se],te=[se];for(se._leaflet_id!==void 0&&fe.add(se._leaflet_id);ie.length>0;){const Oe=ie.shift();for(const we of J){if(we===Oe||fe.has(we._leaflet_id))continue;me(Oe,we)&&(te.push(we),ie.push(we),fe.add(we._leaflet_id))}}return te},me=(J,se)=>{let fe=null,ie=null;if(J.getBounds&&typeof J.getBounds=="function")fe=J.getBounds();else if(J.getLatLng&&J.getRadius){const te=J.getLatLng(),Oe=J.getRadius();fe=vt.latLngBounds([te.lat-Oe/111e3,te.lng-Oe/(111e3*Math.cos(te.lat*Math.PI/180))],[te.lat+Oe/111e3,te.lng+Oe/(111e3*Math.cos(te.lat*Math.PI/180))])}if(se.getBounds&&typeof se.getBounds=="function")ie=se.getBounds();else if(se.getLatLng&&se.getRadius){const te=se.getLatLng(),Oe=se.getRadius();ie=vt.latLngBounds([te.lat-Oe/111e3,te.lng-Oe/(111e3*Math.cos(te.lat*Math.PI/180))],[te.lat+Oe/111e3,te.lng+Oe/(111e3*Math.cos(te.lat*Math.PI/180))])}return!(!fe||!ie||!fe.intersects(ie))},We=(J,se)=>{var ie;const fe=_e(J,se);return fe.length===1&&(ie=se.properties)!=null&&ie.surface?se.properties.surface:B(fe)},ae=J=>{var ie,te,Oe,we,Be,ue,re,Z,U;const se=J.layer;(ie=e.value)==null||ie.addLayer(se);let fe="unknown";if(se instanceof vt.Circle?fe=i.value==="Semicircle"?"Semicircle":"Circle":se instanceof vt.Rectangle?fe="Rectangle":se instanceof vt.Polygon?fe="Polygon":se instanceof vt.Polyline&&!(se instanceof vt.Polygon)&&(fe="Line"),se.properties=E(se,fe),se.properties||(se.properties={}),se.properties.category||(se.properties.category="forages"),se.properties.accessLevel||(se.properties.accessLevel="visitor"),se._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=se,console.log("[useMapDrawing] Input layer:",{type:fe,instanceof:{Circle:se instanceof vt.Circle,Rectangle:se instanceof vt.Rectangle,Polygon:se instanceof vt.Polygon,Polyline:se instanceof vt.Polyline},options:se.options,properties:se.properties,_dbId:se._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:se,type:fe,properties:se.properties}})),se.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:fe,isSelected:s.value===se}),(!s.value||s.value!==se)&&F(se)}),se.on("mouseout",()=>{var xe;console.log("[mouseout] Sortie de la forme",{type:fe,isSelected:s.value===se}),(!s.value||s.value!==se)&&((xe=r.value)==null||xe.clearLayers())}),fe==="Semicircle")console.log("Conversion en demi-cercle désactivée selon les exigences");else if(fe==="Circle"){(te=e.value)==null||te.removeLayer(se);const xe=new lp(se.getLatLng(),{radius:se.getRadius(),...se.options});xe.properties={...E(xe,"Circle"),type:"Circle"},Object.defineProperty(xe,"name",{value:xe.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(xe,"name"),directName:xe.name,propertiesName:xe.properties.name,nameIsEnumerable:Object.keys(xe).includes("name"),allProperties:Object.keys(xe.properties),allKeys:Object.keys(xe)}),(Oe=e.value)==null||Oe.addLayer(xe),s.value=xe,Y(xe)}else if(fe==="Rectangle"){(we=e.value)==null||we.removeLayer(se);const xe=new $a(se.getBounds(),{...se.options});xe.updateProperties(),(Be=e.value)==null||Be.addLayer(xe),s.value=xe,V(xe)}else if(se instanceof vt.Polygon){const xe=se.getLatLngs()[0],Ne=new Ql([xe],{...se.options});Ne.updateProperties(),(ue=e.value)==null||ue.removeLayer(se),(re=e.value)==null||re.addLayer(Ne),s.value=Ne,q(Ne)}else if(se instanceof js)N(se),n.value&&n.value.almostOver&&n.value.almostOver.addLayer(se);else if(se instanceof vt.Polyline&&!(se instanceof vt.Polygon)){const xe=se.getLatLngs(),Ne=new js(xe,{...se.options});Ne.updateProperties(),(Z=e.value)==null||Z.removeLayer(se),(U=e.value)==null||U.addLayer(Ne),s.value=Ne,N(Ne),n.value&&n.value.almostOver&&n.value.almostOver.addLayer(Ne)}oa("Cliquez sur la forme pour afficher les points de contrôle")},ve=()=>{n.value&&(n.value.off("pm:create"),n.value.on("pm:create",ae))},ye=()=>{if(n.value&&n.value.almostOver){const J=n.value.almostOver.options.tolerance;return n.value.almostOver.options.tolerance=0,()=>{n.value&&n.value.almostOver&&(n.value.almostOver.options.tolerance=J)}}return()=>{}};return window.addEventListener("edit:start",()=>{const J=ye(),se=()=>{J(),window.removeEventListener("edit:end",se)};window.addEventListener("edit:end",se)}),{map:n,featureGroup:e,controlPointsGroup:t,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:A,setDrawingTool:G,updateShapeStyle:ee,updateShapeProperties:pe,updateTextFixedSize:k,adjustView:R,clearActiveControlPoints:m,calculateTotalCoverageArea:B,showCoverageOverlay:X,hideCoverageOverlay:Q,calculateConnectedCoverageArea:We,getConnectedShapes:_e,disableAlmostOver:ye,addLinesToAlmostOver:T}}const Ss=Symbol("newer"),xa=Symbol("older");class ZV{constructor(e,t){typeof e!="number"&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[Ss]&&(e===this.oldest&&(this.oldest=e[Ss]),e[Ss][xa]=e[xa]),e[xa]&&(e[xa][Ss]=e[Ss]),e[Ss]=void 0,e[xa]=this.newest,this.newest&&(this.newest[Ss]=e),this.newest=e)}assign(e){let t,r=this.limit||Number.MAX_VALUE;this._keymap.clear();let i=e[Symbol.iterator]();for(let s=i.next();!s.done;s=i.next()){let o=new E5(s.value[0],s.value[1]);if(this._keymap.set(o.key,o),t?(t[Ss]=o,o[xa]=t):this.oldest=o,t=o,r--==0)throw new Error("overflow")}this.newest=t,this.size=this._keymap.size}get(e){var t=this._keymap.get(e);if(t)return this._markEntryAsUsed(t),t.value}set(e,t){var r=this._keymap.get(e);return r?(r.value=t,this._markEntryAsUsed(r),this):(this._keymap.set(e,r=new E5(e,t)),this.newest?(this.newest[Ss]=r,r[xa]=this.newest):this.oldest=r,this.newest=r,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[Ss]?(this.oldest=this.oldest[Ss],this.oldest[xa]=void 0):(this.oldest=void 0,this.newest=void 0),e[Ss]=e[xa]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let t=this._keymap.get(e);return t?t.value:void 0}has(e){return this._keymap.has(e)}delete(e){var t=this._keymap.get(e);if(t)return this._keymap.delete(t.key),t[Ss]&&t[xa]?(t[xa][Ss]=t[Ss],t[Ss][xa]=t[xa]):t[Ss]?(t[Ss][xa]=void 0,this.oldest=t[Ss]):t[xa]?(t[xa][Ss]=void 0,this.newest=t[xa]):this.oldest=this.newest=void 0,this.size--,t.value}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new q2(this.oldest)}values(){return new Y2(this.oldest)}entries(){return this}[Symbol.iterator](){return new W2(this.oldest)}forEach(e,t){typeof t!="object"&&(t=this);let r=this.oldest;for(;r;)e.call(t,r.value,r.key,this),r=r[Ss]}toJSON(){for(var e=new Array(this.size),t=0,r=this.oldest;r;)e[t++]={key:r.key,value:r.value},r=r[Ss];return e}toString(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,t=t[Ss],t&&(e+=" < ");return e}}function E5(n,e){this.key=n,this.value=e,this[Ss]=void 0,this[xa]=void 0}function W2(n){this.entry=n}W2.prototype[Symbol.iterator]=function(){return this};W2.prototype.next=function(){let n=this.entry;return n?(this.entry=n[Ss],{done:!1,value:[n.key,n.value]}):{done:!0,value:void 0}};function q2(n){this.entry=n}q2.prototype[Symbol.iterator]=function(){return this};q2.prototype.next=function(){let n=this.entry;return n?(this.entry=n[Ss],{done:!1,value:n.key}):{done:!0,value:void 0}};function Y2(n){this.entry=n}Y2.prototype[Symbol.iterator]=function(){return this};Y2.prototype.next=function(){let n=this.entry;return n?(this.entry=n[Ss],{done:!1,value:n.value}):{done:!0,value:void 0}};function XV(n,e){let t=0,r=null;r=setInterval(function(){if(t>=20)throw clearInterval(r),new Error("window.google not found after 10 seconds");window.google&&window.google.maps&&window.google.maps.Map&&(clearInterval(r),n.call(e)),++t},500)}L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{maxZoom:21,type:"roadmap",maxNativeZoom:21},initialize:function(n){L.GridLayer.prototype.initialize.call(this,n),this._tileCallbacks={},this._lru=new ZV(100),this._imagesPerTile=1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(n){L.GridLayer.prototype.onAdd.call(this,n),this._initMutantContainer(),this._logoContainer&&n._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&n._controlCorners.bottomright.appendChild(this._attributionContainer),XV(()=>{this._map&&(this._initMutant(),google.maps.event.addListenerOnce(this._mutant,"idle",()=>{this._map&&(this._checkZoomLevels(),this._mutantIsReady=!0)}))})},onRemove:function(n){L.GridLayer.prototype.onRemove.call(this,n),this._observer.disconnect(),n._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle")},addGoogleLayer:function(n,e){return this._subLayers||(this._subLayers={}),this.whenReady(()=>{var t=google.maps[n],r=new t(e);r.setMap(this._mutant),this._subLayers[n]=r}),this},removeGoogleLayer:function(n){return this.whenReady(()=>{var e=this._subLayers&&this._subLayers[n];e&&(e.setMap(null),delete this._subLayers[n])}),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.pointerEvents="none",this._mutantContainer.style.visibility="hidden",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);const n=this._mutantContainer.style;this._map.options.zoomSnap<1?(n.width="180%",n.height="180%"):(n.width="100%",n.height="100%"),n.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){if(!this._mutant){var n={center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,styles:this.options.styles||[],backgroundColor:"transparent"};this.options.mapId!=null&&(n.mapId=this.options.mapId);var e=new google.maps.Map(this._mutantContainer,n);this._mutant=e,this._update(),this.fire("spawned",{mapObject:e}),this._waitControls(),this.once("controls_ready",this._setupAttribution)}},_attachObserver:function(e){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(e,{childList:!0,subtree:!0}),Array.prototype.forEach.call(e.querySelectorAll("img"),this._boundOnMutatedImage)},_waitControls:function(){const n=setInterval(()=>{const e=this._mutant.__gm.layoutManager;if(!e)return;clearInterval(n);let t;Object.keys(e).forEach(function(r){const i=e[r];i.get&&i.get(1)instanceof Node&&(t=i)}),this.fire("controls_ready",{positions:t})},50)},_setupAttribution:function(n){if(!this._map)return;const e=google.maps.ControlPosition,t=this._attributionContainer=n.positions.get(e.BOTTOM_RIGHT);L.DomUtil.addClass(t,"leaflet-control leaflet-control-attribution"),L.DomEvent.disableClickPropagation(t),t.style.height="14px",this._map._controlCorners.bottomright.appendChild(t),this._logoContainer=n.positions.get(e.BOTTOM_LEFT),this._logoContainer.style.pointerEvents="auto",this._map._controlCorners.bottomleft.appendChild(this._logoContainer)},_onMutations:function(e){for(var t=0;t<e.length;++t)for(var r=e[t],i=0;i<r.addedNodes.length;++i){var s=r.addedNodes[i];s instanceof HTMLImageElement?this._onMutatedImage(s):s instanceof HTMLElement&&Array.prototype.forEach.call(s.querySelectorAll("img"),this._boundOnMutatedImage)}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+|VinaFnapurmBegrtn)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+|VinaFnapurmBegrtn)/,_onMutatedImage:function(e){let t,r=e.src.match(this._roadRegexp),i=0;if(r?(t={z:r[1],x:r[2],y:r[3]},this._imagesPerTile>1&&(e.style.zIndex=1,i=1)):(r=e.src.match(this._satRegexp),r&&(t={x:r[1],y:r[2],z:r[3]}),i=0),t){var s=this._tileCoordsToKey(t);e.style.position="absolute";var o=s+"/"+i;this._lru.set(o,e),o in this._tileCallbacks&&this._tileCallbacks[o]&&(this._tileCallbacks[o].forEach(a=>a(e)),delete this._tileCallbacks[o])}},createTile:function(n,e){const t=this._tileCoordsToKey(n),r=L.DomUtil.create("div");r.style.textAlign="left",r.dataset.pending=this._imagesPerTile,e=e.bind(this,null,r);for(var i=0;i<this._imagesPerTile;++i){const s=t+"/"+i,o=this._lru.get(s);o?(r.appendChild(this._clone(o)),--r.dataset.pending):(this._tileCallbacks[s]=this._tileCallbacks[s]||[],this._tileCallbacks[s].push((function(a){return(function(l){a.appendChild(this._clone(l)),--a.dataset.pending,parseInt(a.dataset.pending)||e()}).bind(this)}).bind(this)(r)))}return parseInt(r.dataset.pending)||L.Util.requestAnimFrame(e),r},_clone:function(n){const e=n.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){const n=this._map.getZoom(),e=this._mutant.getZoom();!n||!e||(e!==n||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(n){n!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=n,this._resetView())},_update:function(n){if(this._mutant){n=n||this._map.getCenter();const e=new google.maps.LatLng(n.lat,n.lng),t=Math.round(this._map.getZoom()),r=this._mutant.getZoom();this._mutant.setCenter(e),t!==r&&(this._mutant.setZoom(t),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this,n)},whenReady:function(n,e){return this._mutant?n.call(e||this,{target:this}):this.on("spawned",n,e),this}});L.gridLayer.googleMutant=function(n){return new L.GridLayer.GoogleMutant(n)};let i_=!1,Yh=null;function JV(){return i_?Promise.resolve():Yh||(Yh=new Promise(async(n,e)=>{var t;try{if(window.google&&window.google.maps){i_=!0,n();return}try{const r=await mb.getGoogleMapsApiKey(),i=((t=r==null?void 0:r.data)==null?void 0:t.url)||"https://maps.googleapis.com/maps/api/js?libraries=places",s=document.createElement("script");s.type="text/javascript",s.src=i,s.async=!0,s.defer=!0,s.onload=()=>{i_=!0,n()},s.onerror=()=>{Yh=null,e(new Error("Failed to load Google Maps API"))},document.head.appendChild(s)}catch(r){console.warn("Error loading Google Maps API:",r),Yh=null,e(r)}}catch(r){Yh=null,e(r)}}),Yh)}function QV(){const{isEnabled:n,startMeasure:e}=Hp(),t=yt(null),r=yt(""),i=yt("Hybride"),s=yt(null),o=yt(!1),a={maxZoom:19,updateWhenZooming:!0,updateWhenIdle:!0,noWrap:!0,keepBuffer:2,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:vt.latLngBounds(vt.latLng(41.333,-5.566),vt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,useCache:!0,priorityLevels:3},l=e("createBaseMaps","useMapState"),u={Hybride:vt.layerGroup([vt.gridLayer.googleMutant({type:"hybrid",maxZoom:a.maxZoom})]),Cadastre:vt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...a,attribution:"Cadastre - Carte © IGN/Geoportail",maxNativeZoom:18}),IGN:vt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...a,attribution:"Carte IGN © IGN/Geoportail",maxNativeZoom:18})};l();const h=async()=>{try{await JV(),o.value=!0}catch(E){console.error("Failed to load Google Maps API:",E),o.value=!1,i.value==="Hybride"&&(i.value="IGN")}},p=On.createPerformanceTracker(async E=>{o.value||await h(),On.measure("initMap:setOptions",()=>{t.value=E,E.options.zoomSnap=.5,E.options.zoomDelta=.5,E.options.wheelPxPerZoomLevel=120,E.options.zoomAnimation=!0,E.options.fadeAnimation=!0,E.options.markerZoomAnimation=!0,E.options.preferCanvas=!0,E.options.renderer=vt.canvas(),E.options.minZoom=2,E.options.maxZoom=19,E.options.scrollWheelZoom=!0,E.options.doubleClickZoom=!0;const k=vt.latLngBounds(vt.latLng(-90,-180),vt.latLng(90,180));E.setMaxBounds(k),E.options.maxBoundsViscosity=1,E.options.trackResize=!0;let T=null;E.getZoom(),E.on("zoomstart",()=>{E.getZoom(),E.options.zoomAnimation=!1,E.options.markerZoomAnimation=!1}),E.on("zoomend",()=>{T&&clearTimeout(T),T=setTimeout(()=>{setTimeout(()=>{E.options.zoomAnimation=!0,E.options.markerZoomAnimation=!0,E.invalidateSize({animate:!1,pan:!1});const R=E.getBounds(),G=E.options.maxBounds;G&&!R.intersects(G)&&E.panInsideBounds(G,{animate:!1}),E.eachLayer(ee=>{ee.properties&&ee.properties.type==="Note"&&typeof ee.updatePosition=="function"&&ee.updatePosition()})},250)},250)});const A=E._zoomAnimation;A&&(E._zoomAnimation=function(R){try{this._animatingZoom||A.call(this,R)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),E.on("zoomanim",R=>{E.eachLayer(G=>{G.properties&&G.properties.type==="Note"&&typeof G.updatePositionDuringZoom=="function"&&G.updatePositionDuringZoom(R)})})},"useMapState"),On.measure("initMap:addInitialLayer",()=>{E&&E.whenReady(()=>{const k=i.value;if(u[k]){if(console.log(`Initialisation de la couche de base: ${k}`),s.value&&E.hasLayer(s.value))try{E.removeLayer(s.value),console.log("Couche active précédente supprimée")}catch(T){console.warn("Erreur lors de la suppression de la couche active précédente:",T)}s.value=u[k];try{s.value.addTo(E),console.log(`Couche ${k} ajoutée à la carte`)}catch(T){console.error(`Erreur lors de l'ajout de la couche ${k}:`,T)}}else console.warn(`Couche de base non disponible: ${k}`)})},"useMapState"),E.on("baselayerchange",k=>{const T=e("baselayerchange","useMapState",{layer:k.name});i.value=k.name,s.value=k.layer,T()}),n.value&&(E.on("movestart",()=>{e("mapMove","useMapState",{startCenter:E.getCenter()})}),E.on("moveend",()=>{e("mapMoveEnd","useMapState",{endCenter:E.getCenter()})(),E.eachLayer(T=>{T.properties&&T.properties.type==="Note"&&typeof T.updatePosition=="function"&&T.updatePosition()})}),E.on("tileloadstart",()=>{e("tileLoad","useMapState")}),E.on("tileload",()=>{e("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),v=On.createAsyncPerformanceTracker(async E=>{if(E==="Hybride"&&!o.value&&(await h(),!o.value)){console.warn("Cannot switch to Hybride: Google Maps API not loaded");return}if(!t.value||!u[E]){console.warn(`Impossible de changer la carte de base: ${t.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(i.value===E)return;console.log(`Changement de carte: ${i.value} -> ${E}`);const k=t.value,T=k.getCenter(),A=k.getZoom();k.options.zoomAnimation=!1,k.options.fadeAnimation=!1,k.options.markerZoomAnimation=!1;const R=u[E];if(s.value&&k.hasLayer(s.value))try{k.removeLayer(s.value),console.log(`Couche précédente ${i.value} supprimée`)}catch(G){console.warn("Erreur lors de la suppression de la couche active:",G)}try{R instanceof vt.LayerGroup,R.addTo(k),console.log(`Nouvelle couche ${E} ajoutée`)}catch(G){console.error("Erreur lors de l'ajout de la nouvelle couche:",G);try{k.hasLayer(R)&&k.removeLayer(R),R.addTo(k),console.log(`Récupération: couche ${E} réajoutée`)}catch(ee){throw console.error("Échec de la récupération:",ee),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=R,i.value=E;try{k.setView(T,A,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue réinitialisée: centre=${T}, zoom=${A}`)}catch(G){console.warn("Erreur lors de la réinitialisation de la vue:",G)}try{k.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{k.eachLayer(G=>{G.properties&&G.properties.type==="Note"&&typeof G.updatePosition=="function"&&G.updatePosition()})},100)}catch(G){console.warn("Erreur lors du rafraîchissement de la carte:",G)}setTimeout(()=>{k.options.zoomAnimation=!0,k.options.fadeAnimation=!0,k.options.markerZoomAnimation=!0,console.log("Animations restaurées")},500)}catch(k){if(console.error("Erreur lors du changement de carte de base:",k),t.value)try{const T=t.value;T.eachLayer(R=>{(R instanceof vt.TileLayer||R instanceof vt.LayerGroup)&&T.removeLayer(R)});const A=u[E];A.addTo(T),s.value=A,i.value=E,T.options.zoomAnimation=!0,T.options.fadeAnimation=!0,T.options.markerZoomAnimation=!0,T.invalidateSize({animate:!1,pan:!1}),console.log("Récupération effectuée après erreur")}catch(T){console.error("Erreur lors de la récupération après échec:",T)}}},"changeBaseMap","useMapState"),m=On.createAsyncPerformanceTracker(async()=>{if(!(!t.value||!r.value))try{const E=await On.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),k=await On.measureAsync("searchLocation:parseResponse",async()=>await E.json(),"useMapState");k&&k.length>0&&On.measure("searchLocation:updateView",()=>{const{lat:T,lon:A}=k[0];t.value.setView([T,A],13,{animate:!0})},"useMapState")}catch(E){console.error("Erreur lors de la recherche de localisation:",E)}},"searchLocation","useMapState");return{map:t,searchQuery:r,currentBaseMap:i,baseMaps:u,initMap:p,searchLocation:m,changeBaseMap:v,cleanup:()=>{const E=e("cleanup","useMapState");t.value&&(t.value.remove(),t.value=null),s.value&&(s.value=null),E()},isPerformanceEnabled:n,isGoogleMapsLoaded:o}}var KE={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(n){(function(e,t,r,i){var s=["","webkit","Moz","MS","ms","o"],o=t.createElement("div"),a="function",l=Math.round,u=Math.abs,h=Date.now;function p(Re,qe,dt){return setTimeout(R(Re,dt),qe)}function v(Re,qe,dt){return Array.isArray(Re)?(m(Re,dt[qe],dt),!0):!1}function m(Re,qe,dt){var qt;if(Re)if(Re.forEach)Re.forEach(qe,dt);else if(Re.length!==i)for(qt=0;qt<Re.length;)qe.call(dt,Re[qt],qt,Re),qt++;else for(qt in Re)Re.hasOwnProperty(qt)&&qe.call(dt,Re[qt],qt,Re)}function S(Re,qe,dt){var qt="DEPRECATED METHOD: "+qe+`
`+dt+` AT 
`;return function(){var pn=new Error("get-stack-trace"),Vn=pn&&pn.stack?pn.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",xr=e.console&&(e.console.warn||e.console.log);return xr&&xr.call(e.console,qt,Vn),Re.apply(this,arguments)}}var E;typeof Object.assign!="function"?E=function(qe){if(qe===i||qe===null)throw new TypeError("Cannot convert undefined or null to object");for(var dt=Object(qe),qt=1;qt<arguments.length;qt++){var pn=arguments[qt];if(pn!==i&&pn!==null)for(var Vn in pn)pn.hasOwnProperty(Vn)&&(dt[Vn]=pn[Vn])}return dt}:E=Object.assign;var k=S(function(qe,dt,qt){for(var pn=Object.keys(dt),Vn=0;Vn<pn.length;)(!qt||qt&&qe[pn[Vn]]===i)&&(qe[pn[Vn]]=dt[pn[Vn]]),Vn++;return qe},"extend","Use `assign`."),T=S(function(qe,dt){return k(qe,dt,!0)},"merge","Use `assign`.");function A(Re,qe,dt){var qt=qe.prototype,pn;pn=Re.prototype=Object.create(qt),pn.constructor=Re,pn._super=qt,dt&&E(pn,dt)}function R(Re,qe){return function(){return Re.apply(qe,arguments)}}function G(Re,qe){return typeof Re==a?Re.apply(qe&&qe[0]||i,qe):Re}function ee(Re,qe){return Re===i?qe:Re}function pe(Re,qe,dt){m(Y(qe),function(qt){Re.addEventListener(qt,dt,!1)})}function ge(Re,qe,dt){m(Y(qe),function(qt){Re.removeEventListener(qt,dt,!1)})}function O(Re,qe){for(;Re;){if(Re==qe)return!0;Re=Re.parentNode}return!1}function j(Re,qe){return Re.indexOf(qe)>-1}function Y(Re){return Re.trim().split(/\s+/g)}function V(Re,qe,dt){if(Re.indexOf&&!dt)return Re.indexOf(qe);for(var qt=0;qt<Re.length;){if(dt&&Re[qt][dt]==qe||!dt&&Re[qt]===qe)return qt;qt++}return-1}function N(Re){return Array.prototype.slice.call(Re,0)}function q(Re,qe,dt){for(var qt=[],pn=[],Vn=0;Vn<Re.length;){var xr=Re[Vn][qe];V(pn,xr)<0&&qt.push(Re[Vn]),pn[Vn]=xr,Vn++}return qt=qt.sort(function(Ui,ds){return Ui[qe]>ds[qe]}),qt}function $(Re,qe){for(var dt,qt,pn=qe[0].toUpperCase()+qe.slice(1),Vn=0;Vn<s.length;){if(dt=s[Vn],qt=dt?dt+pn:qe,qt in Re)return qt;Vn++}return i}var F=1;function B(){return F++}function Q(Re){var qe=Re.ownerDocument||Re;return qe.defaultView||qe.parentWindow||e}var X=/mobile|tablet|ip(ad|hone|od)|android/i,_e="ontouchstart"in e,me=$(e,"PointerEvent")!==i,We=_e&&X.test(navigator.userAgent),ae="touch",ve="pen",ye="mouse",J="kinect",se=25,fe=1,ie=2,te=4,Oe=8,we=1,Be=2,ue=4,re=8,Z=16,U=Be|ue,xe=re|Z,Ne=U|xe,Ge=["x","y"],Se=["clientX","clientY"];function ce(Re,qe){var dt=this;this.manager=Re,this.callback=qe,this.element=Re.element,this.target=Re.options.inputTarget,this.domHandler=function(qt){G(Re.options.enable,[Re])&&dt.handler(qt)},this.init()}ce.prototype={handler:function(){},init:function(){this.evEl&&pe(this.element,this.evEl,this.domHandler),this.evTarget&&pe(this.target,this.evTarget,this.domHandler),this.evWin&&pe(Q(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ge(this.element,this.evEl,this.domHandler),this.evTarget&&ge(this.target,this.evTarget,this.domHandler),this.evWin&&ge(Q(this.element),this.evWin,this.domHandler)}};function je(Re){var qe,dt=Re.options.inputClass;return dt?qe=dt:me?qe=wr:We?qe=ss:_e?qe=Yt:qe=Cn,new qe(Re,st)}function st(Re,qe,dt){var qt=dt.pointers.length,pn=dt.changedPointers.length,Vn=qe&fe&&qt-pn===0,xr=qe&(te|Oe)&&qt-pn===0;dt.isFirst=!!Vn,dt.isFinal=!!xr,Vn&&(Re.session={}),dt.eventType=qe,lt(Re,dt),Re.emit("hammer.input",dt),Re.recognize(dt),Re.session.prevInput=dt}function lt(Re,qe){var dt=Re.session,qt=qe.pointers,pn=qt.length;dt.firstInput||(dt.firstInput=zt(qe)),pn>1&&!dt.firstMultiple?dt.firstMultiple=zt(qe):pn===1&&(dt.firstMultiple=!1);var Vn=dt.firstInput,xr=dt.firstMultiple,Ti=xr?xr.center:Vn.center,Ui=qe.center=Xt(qt);qe.timeStamp=h(),qe.deltaTime=qe.timeStamp-Vn.timeStamp,qe.angle=It(Ti,Ui),qe.distance=ot(Ti,Ui),_t(dt,qe),qe.offsetDirection=ut(qe.deltaX,qe.deltaY);var ds=et(qe.deltaTime,qe.deltaX,qe.deltaY);qe.overallVelocityX=ds.x,qe.overallVelocityY=ds.y,qe.overallVelocity=u(ds.x)>u(ds.y)?ds.x:ds.y,qe.scale=xr?xn(xr.pointers,qt):1,qe.rotation=xr?Jt(xr.pointers,qt):0,qe.maxPointers=dt.prevInput?qe.pointers.length>dt.prevInput.maxPointers?qe.pointers.length:dt.prevInput.maxPointers:qe.pointers.length,Je(dt,qe);var Ei=Re.element;O(qe.srcEvent.target,Ei)&&(Ei=qe.srcEvent.target),qe.target=Ei}function _t(Re,qe){var dt=qe.center,qt=Re.offsetDelta||{},pn=Re.prevDelta||{},Vn=Re.prevInput||{};(qe.eventType===fe||Vn.eventType===te)&&(pn=Re.prevDelta={x:Vn.deltaX||0,y:Vn.deltaY||0},qt=Re.offsetDelta={x:dt.x,y:dt.y}),qe.deltaX=pn.x+(dt.x-qt.x),qe.deltaY=pn.y+(dt.y-qt.y)}function Je(Re,qe){var dt=Re.lastInterval||qe,qt=qe.timeStamp-dt.timeStamp,pn,Vn,xr,Ti;if(qe.eventType!=Oe&&(qt>se||dt.velocity===i)){var Ui=qe.deltaX-dt.deltaX,ds=qe.deltaY-dt.deltaY,Ei=et(qt,Ui,ds);Vn=Ei.x,xr=Ei.y,pn=u(Ei.x)>u(Ei.y)?Ei.x:Ei.y,Ti=ut(Ui,ds),Re.lastInterval=qe}else pn=dt.velocity,Vn=dt.velocityX,xr=dt.velocityY,Ti=dt.direction;qe.velocity=pn,qe.velocityX=Vn,qe.velocityY=xr,qe.direction=Ti}function zt(Re){for(var qe=[],dt=0;dt<Re.pointers.length;)qe[dt]={clientX:l(Re.pointers[dt].clientX),clientY:l(Re.pointers[dt].clientY)},dt++;return{timeStamp:h(),pointers:qe,center:Xt(qe),deltaX:Re.deltaX,deltaY:Re.deltaY}}function Xt(Re){var qe=Re.length;if(qe===1)return{x:l(Re[0].clientX),y:l(Re[0].clientY)};for(var dt=0,qt=0,pn=0;pn<qe;)dt+=Re[pn].clientX,qt+=Re[pn].clientY,pn++;return{x:l(dt/qe),y:l(qt/qe)}}function et(Re,qe,dt){return{x:qe/Re||0,y:dt/Re||0}}function ut(Re,qe){return Re===qe?we:u(Re)>=u(qe)?Re<0?Be:ue:qe<0?re:Z}function ot(Re,qe,dt){dt||(dt=Ge);var qt=qe[dt[0]]-Re[dt[0]],pn=qe[dt[1]]-Re[dt[1]];return Math.sqrt(qt*qt+pn*pn)}function It(Re,qe,dt){dt||(dt=Ge);var qt=qe[dt[0]]-Re[dt[0]],pn=qe[dt[1]]-Re[dt[1]];return Math.atan2(pn,qt)*180/Math.PI}function Jt(Re,qe){return It(qe[1],qe[0],Se)+It(Re[1],Re[0],Se)}function xn(Re,qe){return ot(qe[0],qe[1],Se)/ot(Re[0],Re[1],Se)}var Sn={mousedown:fe,mousemove:ie,mouseup:te},An="mousedown",Zn="mousemove mouseup";function Cn(){this.evEl=An,this.evWin=Zn,this.pressed=!1,ce.apply(this,arguments)}A(Cn,ce,{handler:function(qe){var dt=Sn[qe.type];dt&fe&&qe.button===0&&(this.pressed=!0),dt&ie&&qe.which!==1&&(dt=te),this.pressed&&(dt&te&&(this.pressed=!1),this.callback(this.manager,dt,{pointers:[qe],changedPointers:[qe],pointerType:ye,srcEvent:qe}))}});var cn={pointerdown:fe,pointermove:ie,pointerup:te,pointercancel:Oe,pointerout:Oe},bn={2:ae,3:ve,4:ye,5:J},ir="pointerdown",hr="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(ir="MSPointerDown",hr="MSPointerMove MSPointerUp MSPointerCancel");function wr(){this.evEl=ir,this.evWin=hr,ce.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}A(wr,ce,{handler:function(qe){var dt=this.store,qt=!1,pn=qe.type.toLowerCase().replace("ms",""),Vn=cn[pn],xr=bn[qe.pointerType]||qe.pointerType,Ti=xr==ae,Ui=V(dt,qe.pointerId,"pointerId");Vn&fe&&(qe.button===0||Ti)?Ui<0&&(dt.push(qe),Ui=dt.length-1):Vn&(te|Oe)&&(qt=!0),!(Ui<0)&&(dt[Ui]=qe,this.callback(this.manager,Vn,{pointers:dt,changedPointers:[qe],pointerType:xr,srcEvent:qe}),qt&&dt.splice(Ui,1))}});var Kn={touchstart:fe,touchmove:ie,touchend:te,touchcancel:Oe},Rr="touchstart",ms="touchstart touchmove touchend touchcancel";function Bi(){this.evTarget=Rr,this.evWin=ms,this.started=!1,ce.apply(this,arguments)}A(Bi,ce,{handler:function(qe){var dt=Kn[qe.type];if(dt===fe&&(this.started=!0),!!this.started){var qt=Vs.call(this,qe,dt);dt&(te|Oe)&&qt[0].length-qt[1].length===0&&(this.started=!1),this.callback(this.manager,dt,{pointers:qt[0],changedPointers:qt[1],pointerType:ae,srcEvent:qe})}}});function Vs(Re,qe){var dt=N(Re.touches),qt=N(Re.changedTouches);return qe&(te|Oe)&&(dt=q(dt.concat(qt),"identifier")),[dt,qt]}var is={touchstart:fe,touchmove:ie,touchend:te,touchcancel:Oe},Xn="touchstart touchmove touchend touchcancel";function ss(){this.evTarget=Xn,this.targetIds={},ce.apply(this,arguments)}A(ss,ce,{handler:function(qe){var dt=is[qe.type],qt=Et.call(this,qe,dt);qt&&this.callback(this.manager,dt,{pointers:qt[0],changedPointers:qt[1],pointerType:ae,srcEvent:qe})}});function Et(Re,qe){var dt=N(Re.touches),qt=this.targetIds;if(qe&(fe|ie)&&dt.length===1)return qt[dt[0].identifier]=!0,[dt,dt];var pn,Vn,xr=N(Re.changedTouches),Ti=[],Ui=this.target;if(Vn=dt.filter(function(ds){return O(ds.target,Ui)}),qe===fe)for(pn=0;pn<Vn.length;)qt[Vn[pn].identifier]=!0,pn++;for(pn=0;pn<xr.length;)qt[xr[pn].identifier]&&Ti.push(xr[pn]),qe&(te|Oe)&&delete qt[xr[pn].identifier],pn++;if(Ti.length)return[q(Vn.concat(Ti),"identifier"),Ti]}var at=2500,Bt=25;function Yt(){ce.apply(this,arguments);var Re=R(this.handler,this);this.touch=new ss(this.manager,Re),this.mouse=new Cn(this.manager,Re),this.primaryTouch=null,this.lastTouches=[]}A(Yt,ce,{handler:function(qe,dt,qt){var pn=qt.pointerType==ae,Vn=qt.pointerType==ye;if(!(Vn&&qt.sourceCapabilities&&qt.sourceCapabilities.firesTouchEvents)){if(pn)In.call(this,dt,qt);else if(Vn&&Er.call(this,qt))return;this.callback(qe,dt,qt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function In(Re,qe){Re&fe?(this.primaryTouch=qe.changedPointers[0].identifier,Pn.call(this,qe)):Re&(te|Oe)&&Pn.call(this,qe)}function Pn(Re){var qe=Re.changedPointers[0];if(qe.identifier===this.primaryTouch){var dt={x:qe.clientX,y:qe.clientY};this.lastTouches.push(dt);var qt=this.lastTouches,pn=function(){var Vn=qt.indexOf(dt);Vn>-1&&qt.splice(Vn,1)};setTimeout(pn,at)}}function Er(Re){for(var qe=Re.srcEvent.clientX,dt=Re.srcEvent.clientY,qt=0;qt<this.lastTouches.length;qt++){var pn=this.lastTouches[qt],Vn=Math.abs(qe-pn.x),xr=Math.abs(dt-pn.y);if(Vn<=Bt&&xr<=Bt)return!0}return!1}var Yn=$(o.style,"touchAction"),Ct=Yn!==i,mn="compute",Hn="auto",en="manipulation",ln="none",Rn="pan-x",vr="pan-y",us=Jn();function En(Re,qe){this.manager=Re,this.set(qe)}En.prototype={set:function(Re){Re==mn&&(Re=this.compute()),Ct&&this.manager.element.style&&us[Re]&&(this.manager.element.style[Yn]=Re),this.actions=Re.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Re=[];return m(this.manager.recognizers,function(qe){G(qe.options.enable,[qe])&&(Re=Re.concat(qe.getTouchAction()))}),Lr(Re.join(" "))},preventDefaults:function(Re){var qe=Re.srcEvent,dt=Re.offsetDirection;if(this.manager.session.prevented){qe.preventDefault();return}var qt=this.actions,pn=j(qt,ln)&&!us[ln],Vn=j(qt,vr)&&!us[vr],xr=j(qt,Rn)&&!us[Rn];if(pn){var Ti=Re.pointers.length===1,Ui=Re.distance<2,ds=Re.deltaTime<250;if(Ti&&Ui&&ds)return}if(!(xr&&Vn)&&(pn||Vn&&dt&U||xr&&dt&xe))return this.preventSrc(qe)},preventSrc:function(Re){this.manager.session.prevented=!0,Re.preventDefault()}};function Lr(Re){if(j(Re,ln))return ln;var qe=j(Re,Rn),dt=j(Re,vr);return qe&&dt?ln:qe||dt?qe?Rn:vr:j(Re,en)?en:Hn}function Jn(){if(!Ct)return!1;var Re={},qe=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(dt){Re[dt]=qe?e.CSS.supports("touch-action",dt):!0}),Re}var Ki=1,fi=2,pi=4,$i=8,Ai=$i,Fi=16,ji=32;function os(Re){this.options=E({},this.defaults,Re||{}),this.id=B(),this.manager=null,this.options.enable=ee(this.options.enable,!0),this.state=Ki,this.simultaneous={},this.requireFail=[]}os.prototype={defaults:{},set:function(Re){return E(this.options,Re),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Re){if(v(Re,"recognizeWith",this))return this;var qe=this.simultaneous;return Re=kr(Re,this),qe[Re.id]||(qe[Re.id]=Re,Re.recognizeWith(this)),this},dropRecognizeWith:function(Re){return v(Re,"dropRecognizeWith",this)?this:(Re=kr(Re,this),delete this.simultaneous[Re.id],this)},requireFailure:function(Re){if(v(Re,"requireFailure",this))return this;var qe=this.requireFail;return Re=kr(Re,this),V(qe,Re)===-1&&(qe.push(Re),Re.requireFailure(this)),this},dropRequireFailure:function(Re){if(v(Re,"dropRequireFailure",this))return this;Re=kr(Re,this);var qe=V(this.requireFail,Re);return qe>-1&&this.requireFail.splice(qe,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Re){return!!this.simultaneous[Re.id]},emit:function(Re){var qe=this,dt=this.state;function qt(pn){qe.manager.emit(pn,Re)}dt<$i&&qt(qe.options.event+cs(dt)),qt(qe.options.event),Re.additionalEvent&&qt(Re.additionalEvent),dt>=$i&&qt(qe.options.event+cs(dt))},tryEmit:function(Re){if(this.canEmit())return this.emit(Re);this.state=ji},canEmit:function(){for(var Re=0;Re<this.requireFail.length;){if(!(this.requireFail[Re].state&(ji|Ki)))return!1;Re++}return!0},recognize:function(Re){var qe=E({},Re);if(!G(this.options.enable,[this,qe])){this.reset(),this.state=ji;return}this.state&(Ai|Fi|ji)&&(this.state=Ki),this.state=this.process(qe),this.state&(fi|pi|$i|Fi)&&this.tryEmit(qe)},process:function(Re){},getTouchAction:function(){},reset:function(){}};function cs(Re){return Re&Fi?"cancel":Re&$i?"end":Re&pi?"move":Re&fi?"start":""}function Sr(Re){return Re==Z?"down":Re==re?"up":Re==Be?"left":Re==ue?"right":""}function kr(Re,qe){var dt=qe.manager;return dt?dt.get(Re):Re}function nr(){os.apply(this,arguments)}A(nr,os,{defaults:{pointers:1},attrTest:function(Re){var qe=this.options.pointers;return qe===0||Re.pointers.length===qe},process:function(Re){var qe=this.state,dt=Re.eventType,qt=qe&(fi|pi),pn=this.attrTest(Re);return qt&&(dt&Oe||!pn)?qe|Fi:qt||pn?dt&te?qe|$i:qe&fi?qe|pi:fi:ji}});function to(){nr.apply(this,arguments),this.pX=null,this.pY=null}A(to,nr,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ne},getTouchAction:function(){var Re=this.options.direction,qe=[];return Re&U&&qe.push(vr),Re&xe&&qe.push(Rn),qe},directionTest:function(Re){var qe=this.options,dt=!0,qt=Re.distance,pn=Re.direction,Vn=Re.deltaX,xr=Re.deltaY;return pn&qe.direction||(qe.direction&U?(pn=Vn===0?we:Vn<0?Be:ue,dt=Vn!=this.pX,qt=Math.abs(Re.deltaX)):(pn=xr===0?we:xr<0?re:Z,dt=xr!=this.pY,qt=Math.abs(Re.deltaY))),Re.direction=pn,dt&&qt>qe.threshold&&pn&qe.direction},attrTest:function(Re){return nr.prototype.attrTest.call(this,Re)&&(this.state&fi||!(this.state&fi)&&this.directionTest(Re))},emit:function(Re){this.pX=Re.deltaX,this.pY=Re.deltaY;var qe=Sr(Re.direction);qe&&(Re.additionalEvent=this.options.event+qe),this._super.emit.call(this,Re)}});function no(){nr.apply(this,arguments)}A(no,nr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ln]},attrTest:function(Re){return this._super.attrTest.call(this,Re)&&(Math.abs(Re.scale-1)>this.options.threshold||this.state&fi)},emit:function(Re){if(Re.scale!==1){var qe=Re.scale<1?"in":"out";Re.additionalEvent=this.options.event+qe}this._super.emit.call(this,Re)}});function Bs(){os.apply(this,arguments),this._timer=null,this._input=null}A(Bs,os,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Hn]},process:function(Re){var qe=this.options,dt=Re.pointers.length===qe.pointers,qt=Re.distance<qe.threshold,pn=Re.deltaTime>qe.time;if(this._input=Re,!qt||!dt||Re.eventType&(te|Oe)&&!pn)this.reset();else if(Re.eventType&fe)this.reset(),this._timer=p(function(){this.state=Ai,this.tryEmit()},qe.time,this);else if(Re.eventType&te)return Ai;return ji},reset:function(){clearTimeout(this._timer)},emit:function(Re){this.state===Ai&&(Re&&Re.eventType&te?this.manager.emit(this.options.event+"up",Re):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}});function Ko(){nr.apply(this,arguments)}A(Ko,nr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ln]},attrTest:function(Re){return this._super.attrTest.call(this,Re)&&(Math.abs(Re.rotation)>this.options.threshold||this.state&fi)}});function _r(){nr.apply(this,arguments)}A(_r,nr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:U|xe,pointers:1},getTouchAction:function(){return to.prototype.getTouchAction.call(this)},attrTest:function(Re){var qe=this.options.direction,dt;return qe&(U|xe)?dt=Re.overallVelocity:qe&U?dt=Re.overallVelocityX:qe&xe&&(dt=Re.overallVelocityY),this._super.attrTest.call(this,Re)&&qe&Re.offsetDirection&&Re.distance>this.options.threshold&&Re.maxPointers==this.options.pointers&&u(dt)>this.options.velocity&&Re.eventType&te},emit:function(Re){var qe=Sr(Re.offsetDirection);qe&&this.manager.emit(this.options.event+qe,Re),this.manager.emit(this.options.event,Re)}});function $r(){os.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}A($r,os,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[en]},process:function(Re){var qe=this.options,dt=Re.pointers.length===qe.pointers,qt=Re.distance<qe.threshold,pn=Re.deltaTime<qe.time;if(this.reset(),Re.eventType&fe&&this.count===0)return this.failTimeout();if(qt&&pn&&dt){if(Re.eventType!=te)return this.failTimeout();var Vn=this.pTime?Re.timeStamp-this.pTime<qe.interval:!0,xr=!this.pCenter||ot(this.pCenter,Re.center)<qe.posThreshold;this.pTime=Re.timeStamp,this.pCenter=Re.center,!xr||!Vn?this.count=1:this.count+=1,this._input=Re;var Ti=this.count%qe.taps;if(Ti===0)return this.hasRequireFailures()?(this._timer=p(function(){this.state=Ai,this.tryEmit()},qe.interval,this),fi):Ai}return ji},failTimeout:function(){return this._timer=p(function(){this.state=ji},this.options.interval,this),ji},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ai&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function er(Re,qe){return qe=qe||{},qe.recognizers=ee(qe.recognizers,er.defaults.preset),new Hs(Re,qe)}er.VERSION="2.0.7",er.defaults={domEvents:!1,touchAction:mn,enable:!0,inputTarget:null,inputClass:null,preset:[[Ko,{enable:!1}],[no,{enable:!1},["rotate"]],[_r,{direction:U}],[to,{direction:U},["swipe"]],[$r],[$r,{event:"doubletap",taps:2},["tap"]],[Bs]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var di=1,oi=2;function Hs(Re,qe){this.options=E({},er.defaults,qe||{}),this.options.inputTarget=this.options.inputTarget||Re,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Re,this.input=je(this),this.touchAction=new En(this,this.options.touchAction),Pa(this,!0),m(this.options.recognizers,function(dt){var qt=this.add(new dt[0](dt[1]));dt[2]&&qt.recognizeWith(dt[2]),dt[3]&&qt.requireFailure(dt[3])},this)}Hs.prototype={set:function(Re){return E(this.options,Re),Re.touchAction&&this.touchAction.update(),Re.inputTarget&&(this.input.destroy(),this.input.target=Re.inputTarget,this.input.init()),this},stop:function(Re){this.session.stopped=Re?oi:di},recognize:function(Re){var qe=this.session;if(!qe.stopped){this.touchAction.preventDefaults(Re);var dt,qt=this.recognizers,pn=qe.curRecognizer;(!pn||pn&&pn.state&Ai)&&(pn=qe.curRecognizer=null);for(var Vn=0;Vn<qt.length;)dt=qt[Vn],qe.stopped!==oi&&(!pn||dt==pn||dt.canRecognizeWith(pn))?dt.recognize(Re):dt.reset(),!pn&&dt.state&(fi|pi|$i)&&(pn=qe.curRecognizer=dt),Vn++}},get:function(Re){if(Re instanceof os)return Re;for(var qe=this.recognizers,dt=0;dt<qe.length;dt++)if(qe[dt].options.event==Re)return qe[dt];return null},add:function(Re){if(v(Re,"add",this))return this;var qe=this.get(Re.options.event);return qe&&this.remove(qe),this.recognizers.push(Re),Re.manager=this,this.touchAction.update(),Re},remove:function(Re){if(v(Re,"remove",this))return this;if(Re=this.get(Re),Re){var qe=this.recognizers,dt=V(qe,Re);dt!==-1&&(qe.splice(dt,1),this.touchAction.update())}return this},on:function(Re,qe){if(Re!==i&&qe!==i){var dt=this.handlers;return m(Y(Re),function(qt){dt[qt]=dt[qt]||[],dt[qt].push(qe)}),this}},off:function(Re,qe){if(Re!==i){var dt=this.handlers;return m(Y(Re),function(qt){qe?dt[qt]&&dt[qt].splice(V(dt[qt],qe),1):delete dt[qt]}),this}},emit:function(Re,qe){this.options.domEvents&&ha(Re,qe);var dt=this.handlers[Re]&&this.handlers[Re].slice();if(!(!dt||!dt.length)){qe.type=Re,qe.preventDefault=function(){qe.srcEvent.preventDefault()};for(var qt=0;qt<dt.length;)dt[qt](qe),qt++}},destroy:function(){this.element&&Pa(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Pa(Re,qe){var dt=Re.element;if(dt.style){var qt;m(Re.options.cssProps,function(pn,Vn){qt=$(dt.style,Vn),qe?(Re.oldCssProps[qt]=dt.style[qt],dt.style[qt]=pn):dt.style[qt]=Re.oldCssProps[qt]||""}),qe||(Re.oldCssProps={})}}function ha(Re,qe){var dt=t.createEvent("Event");dt.initEvent(Re,!0,!0),dt.gesture=qe,qe.target.dispatchEvent(dt)}E(er,{INPUT_START:fe,INPUT_MOVE:ie,INPUT_END:te,INPUT_CANCEL:Oe,STATE_POSSIBLE:Ki,STATE_BEGAN:fi,STATE_CHANGED:pi,STATE_ENDED:$i,STATE_RECOGNIZED:Ai,STATE_CANCELLED:Fi,STATE_FAILED:ji,DIRECTION_NONE:we,DIRECTION_LEFT:Be,DIRECTION_RIGHT:ue,DIRECTION_UP:re,DIRECTION_DOWN:Z,DIRECTION_HORIZONTAL:U,DIRECTION_VERTICAL:xe,DIRECTION_ALL:Ne,Manager:Hs,Input:ce,TouchAction:En,TouchInput:ss,MouseInput:Cn,PointerEventInput:wr,TouchMouseInput:Yt,SingleTouchInput:Bi,Recognizer:os,AttrRecognizer:nr,Tap:$r,Pan:to,Swipe:_r,Pinch:no,Rotate:Ko,Press:Bs,on:pe,off:ge,each:m,merge:T,extend:k,assign:E,inherit:A,bindFn:R,prefixed:$});var Zi=typeof e<"u"?e:typeof self<"u"?self:{};Zi.Hammer=er,n.exports?n.exports=er:e[r]=er})(window,document,"Hammer")})(KE);var eH=KE.exports;const P5=Hy(eH);function tH(){const{map:n,featureGroup:e,controlPointsGroup:t,selectedShape:r,clearActiveControlPoints:i}=YE(),s=yt(!1),o=yt(null),a=yt(null),l=yt(!1),u=yt(null),h=yt(null),p=yt(1),v=yt(1),m=yt(0),S=yt(0),E=yt(null),k=yt(null),T=()=>{A(),R(),window.addEventListener("shape:selected",G),window.addEventListener("editing:start",ee),window.addEventListener("editing:end",pe)},A=()=>{const re=document.createElement("div");re.className="mobile-edit-overlay",re.style.cssText=`
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 1000;
      background: transparent;
      display: none;
      touch-action: none;
    `,document.body.appendChild(re),u.value=re;const Z=new P5(re);Z.get("pan").set({direction:P5.DIRECTION_ALL}),Z.get("pinch").set({enable:!0}),Z.get("rotate").set({enable:!0}),Z.on("panstart",V),Z.on("pan",N),Z.on("panend",q),Z.on("pinchstart",$),Z.on("pinch",F),Z.on("pinchend",B),Z.on("rotatestart",Q),Z.on("rotate",X),Z.on("rotateend",_e),Z.on("tap",me)},R=()=>{const re=document.createElement("div");re.className="mobile-edit-controls",re.style.cssText=`
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      background: white;
      border-radius: 30px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      padding: 8px;
      z-index: 2000;
      display: none;
    `;const Z=document.createElement("button");Z.className="edit-btn done-btn",Z.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="currentColor"/></svg>',Z.addEventListener("click",pe);const U=document.createElement("button");U.className="edit-btn delete-btn",U.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" fill="currentColor"/></svg>',U.addEventListener("click",ge);const xe=document.createElement("button");xe.className="edit-btn add-point-btn",xe.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/></svg>',xe.addEventListener("click",ve),xe.style.display="none",re.appendChild(Z),re.appendChild(U),re.appendChild(xe),document.body.appendChild(re),h.value=re},G=re=>{const Z=re.detail.shape;Z&&(r.value=Z,window.innerWidth<768&&ee())},ee=()=>{var U;if(!r.value||!n.value)return;s.value=!0;const re=r.value;let Z=((U=re.properties)==null?void 0:U.type)||"";if(re instanceof vt.Circle?o.value={layer:re,initialLatLng:re.getLatLng(),initialRadius:re.getRadius(),type:"Circle"}:re instanceof vt.Rectangle?o.value={layer:re,initialBounds:re.getBounds(),type:"Rectangle"}:re instanceof vt.Polygon&&!(re instanceof vt.Rectangle)?o.value={layer:re,points:re.getLatLngs()[0].slice(),type:"Polygon"}:re instanceof vt.Polyline&&!(re instanceof vt.Polygon)?o.value={layer:re,points:re.getLatLngs().slice(),type:Z||"Line"}:o.value={layer:re,type:Z||"Unknown"},i(),te(),u.value&&(u.value.style.display="block"),h.value){const xe=h.value.querySelector(".add-point-btn");xe&&(xe.style.display=Z==="Line"||Z==="Polygon"||Z==="ElevationLine"?"block":"none")}O()},pe=()=>{if(s.value=!1,o.value=null,a.value=null,u.value&&(u.value.style.display="none"),h.value&&(h.value.style.display="none"),Y(),r.value){const re=r.value;re.properties&&re.properties.type&&we(re,re.properties.type)}Oe()},ge=()=>{!r.value||!e.value||(e.value.removeLayer(r.value),r.value=null,pe())},O=()=>{if(!o.value||!n.value)return;const re=o.value.layer,Z=o.value.type;re.setStyle&&(re._originalEditStyle||(re._originalEditStyle={...re.options}),re.setStyle({color:"#3B82F6",weight:(re.options.weight||3)+1,opacity:.9,dashArray:"5, 5"})),(Z==="Polygon"||Z==="Line"||Z==="ElevationLine")&&j()},j=()=>{if(!o.value||!n.value||!t.value)return;const re=o.value.layer;let Z=[];re instanceof vt.Polygon?Z=re.getLatLngs()[0]:re instanceof vt.Polyline&&(Z=re.getLatLngs()),t.value.clearLayers(),Z.forEach((U,xe)=>{var Ge;const Ne=vt.circleMarker(U,{radius:8,color:"#3B82F6",fillColor:"#3B82F6",fillOpacity:.7,weight:2,className:"edit-point-handle",pmIgnore:!0});Ne._index=xe,(Ge=t.value)==null||Ge.addLayer(Ne)})},Y=()=>{if(!o.value)return;const re=o.value.layer;re.setStyle&&re._originalEditStyle&&(re.setStyle(re._originalEditStyle),delete re._originalEditStyle),t.value&&t.value.clearLayers()},V=re=>{if(!o.value||!n.value)return;l.value=!0;const Z=vt.point(re.center.x,re.center.y);E.value=Z,k.value=Z,We(Z)},N=re=>{if(!o.value||!n.value||!l.value)return;const Z=vt.point(re.center.x,re.center.y);k.value=Z,a.value!==null?ye(Z):se(Z)},q=()=>{l.value=!1,a.value=null,o.value&&j()},$=re=>{!o.value||!n.value||(l.value=!0,p.value=re.scale,v.value=re.scale)},F=re=>{!o.value||!n.value||!l.value||(v.value=re.scale,fe(re.scale/p.value))},B=()=>{l.value=!1,p.value=1,o.value&&j()},Q=re=>{!o.value||!n.value||(l.value=!0,m.value=re.rotation,S.value=re.rotation)},X=re=>{if(!o.value||!n.value||!l.value)return;S.value=re.rotation;const Z=re.rotation-m.value;ie(Z)},_e=()=>{l.value=!1,m.value=0,o.value&&j()},me=re=>{if(!o.value||!n.value)return;const Z=vt.point(re.center.x,re.center.y);!We(Z)&&(o.value.type==="Line"||o.value.type==="Polygon")&&ae(Z)},We=re=>{if(!t.value||!n.value)return!1;let Z=!1;return t.value.eachLayer(U=>{U instanceof vt.CircleMarker&&n.value.latLngToContainerPoint(U.getLatLng()).distanceTo(re)<=20&&(a.value=U._index,Z=!0)}),Z},ae=re=>{if(!o.value||!n.value)return;const Z=o.value.layer;let U=[];Z instanceof vt.Polygon?U=Z.getLatLngs()[0].slice():Z instanceof vt.Polyline&&(U=Z.getLatLngs().slice());for(let xe=0;xe<U.length-1;xe++){const Ne=n.value.latLngToContainerPoint(U[xe]),Ge=n.value.latLngToContainerPoint(U[xe+1]);if(Be(re,Ne,Ge)<=20){const ce=vt.latLng((U[xe].lat+U[xe+1].lat)/2,(U[xe].lng+U[xe+1].lng)/2);if(Z instanceof vt.Polygon){const je=Z.getLatLngs()[0];je.splice(xe+1,0,ce),Z.setLatLngs([je])}else if(Z instanceof vt.Polyline){const je=Z.getLatLngs();je.splice(xe+1,0,ce),Z.setLatLngs(je)}j(),a.value=xe+1;break}}},ve=()=>{if(!o.value||!n.value)return;const re=o.value.layer;if(re instanceof vt.Polygon){const Z=re.getLatLngs()[0];if(Z.length<2)return;const U=Z[Z.length-1],xe=Z[Z.length-2],Ne=U.lat+(U.lat-xe.lat)*.3,Ge=U.lng+(U.lng-xe.lng)*.3;Z.push(vt.latLng(Ne,Ge)),re.setLatLngs([Z]),j(),a.value=Z.length-1}else if(re instanceof vt.Polyline){const Z=re.getLatLngs();if(Z.length<2)return;const U=Z[Z.length-1],xe=Z[Z.length-2],Ne=U.lat+(U.lat-xe.lat)*.3,Ge=U.lng+(U.lng-xe.lng)*.3;Z.push(vt.latLng(Ne,Ge)),re.setLatLngs(Z),j(),a.value=Z.length-1}},ye=re=>{if(!o.value||!n.value||a.value===null)return;const Z=n.value.containerPointToLatLng(re),U=o.value.layer;if(U instanceof vt.Polygon){const xe=U.getLatLngs()[0];xe[a.value]=Z,U.setLatLngs([xe]),J(a.value,Z)}else if(U instanceof vt.Polyline){const xe=U.getLatLngs();xe[a.value]=Z,U.setLatLngs(xe),J(a.value,Z)}},J=(re,Z)=>{t.value&&t.value.eachLayer(U=>{U instanceof vt.CircleMarker&&U._index===re&&U.setLatLng(Z)})},se=re=>{if(!o.value||!n.value||!E.value)return;const Z=re.x-E.value.x,U=re.y-E.value.y,xe=n.value.getCenter(),Ne=vt.point(n.value.getSize().x/2+Z,n.value.getSize().y/2+U),Ge=n.value.containerPointToLatLng(Ne),Se=Ge.lat-xe.lat,ce=Ge.lng-xe.lng,je=o.value.layer;if(je instanceof vt.Circle){const st=je.getLatLng();je.setLatLng(vt.latLng(st.lat+Se,st.lng+ce))}else if(je instanceof vt.Rectangle){const st=je.getBounds(),lt=st.getNorthWest(),_t=st.getSouthEast();je.setBounds(vt.latLngBounds(vt.latLng(lt.lat+Se,lt.lng+ce),vt.latLng(_t.lat+Se,_t.lng+ce)))}else if(je instanceof vt.Polygon||je instanceof vt.Polyline){let st=je.getLatLngs();if(je instanceof vt.Polygon){const _t=st[0].map(Je=>vt.latLng(Je.lat+Se,Je.lng+ce));je.setLatLngs([_t])}else{const _t=st.map(Je=>vt.latLng(Je.lat+Se,Je.lng+ce));je.setLatLngs(_t)}t.value&&t.value.eachLayer(lt=>{if(lt instanceof vt.CircleMarker){const _t=lt.getLatLng();lt.setLatLng(vt.latLng(_t.lat+Se,_t.lng+ce))}})}E.value=re},fe=re=>{if(!o.value||!n.value)return;const Z=o.value.layer;if(Z instanceof vt.Circle){const U=o.value.initialRadius||Z.getRadius();Z.setRadius(U*re)}else if(Z instanceof vt.Rectangle){o.value.initialBounds||(o.value.initialBounds=Z.getBounds());const U=o.value.initialBounds;if(!U)return;const xe=U.getCenter(),Ne=U.getNorthWest(),Ge=U.getSouthEast(),Se=Ne.lat-xe.lat,ce=xe.lat-Ge.lat,je=xe.lng-Ne.lng,st=Ge.lng-xe.lng;Z.setBounds(vt.latLngBounds(vt.latLng(xe.lat+Se*re,xe.lng-je*re),vt.latLng(xe.lat-ce*re,xe.lng+st*re)))}else if(Z instanceof vt.Polygon||Z instanceof vt.Polyline){let U=[],xe;if(Z instanceof vt.Polygon){U=Z.getLatLngs()[0];const Ge=U.reduce((ce,je)=>ce+je.lat,0),Se=U.reduce((ce,je)=>ce+je.lng,0);xe=vt.latLng(Ge/U.length,Se/U.length)}else{U=Z.getLatLngs();const Ge=U.reduce((ce,je)=>ce+je.lat,0),Se=U.reduce((ce,je)=>ce+je.lng,0);xe=vt.latLng(Ge/U.length,Se/U.length)}const Ne=U.map(Ge=>{const Se=xe.lat+(Ge.lat-xe.lat)*re,ce=xe.lng+(Ge.lng-xe.lng)*re;return vt.latLng(Se,ce)});Z instanceof vt.Polygon?Z.setLatLngs([Ne]):Z.setLatLngs(Ne),j()}},ie=re=>{if(!o.value||!n.value)return;const Z=o.value.layer;if(Z instanceof vt.Polygon||Z instanceof vt.Polyline){let U=[],xe;Z instanceof vt.Polygon?U=Z.getLatLngs()[0]:U=Z.getLatLngs();const Ne=U.reduce((je,st)=>je+st.lat,0),Ge=U.reduce((je,st)=>je+st.lng,0);xe=vt.latLng(Ne/U.length,Ge/U.length);const Se=re*Math.PI/180,ce=U.map(je=>{const st=je.lng-xe.lng,lt=je.lat-xe.lat,_t=st*Math.cos(Se)-lt*Math.sin(Se),Je=st*Math.sin(Se)+lt*Math.cos(Se);return vt.latLng(xe.lat+Je,xe.lng+_t)});Z instanceof vt.Polygon?Z.setLatLngs([ce]):Z.setLatLngs(ce),j()}},te=()=>{h.value&&(h.value.style.display="flex")},Oe=()=>{p.value=1,v.value=1,m.value=0,S.value=0,E.value=null,k.value=null,l.value=!1},we=(re,Z)=>{window.dispatchEvent(new CustomEvent("shape:propertiesNeedUpdate",{detail:{layer:re,type:Z}}))},Be=(re,Z,U)=>{const xe=re.x-Z.x,Ne=re.y-Z.y,Ge=U.x-Z.x,Se=U.y-Z.y,ce=xe*Ge+Ne*Se,je=Ge*Ge+Se*Se;let st=-1;je!==0&&(st=ce/je);let lt,_t;st<0?(lt=Z.x,_t=Z.y):st>1?(lt=U.x,_t=U.y):(lt=Z.x+st*Ge,_t=Z.y+st*Se);const Je=re.x-lt,zt=re.y-_t;return Math.sqrt(Je*Je+zt*zt)},ue=()=>{const re=document.createElement("style");re.textContent=`
      .mobile-edit-overlay {
        /* No additional styles needed beyond inline styles */
      }
      
      .mobile-edit-controls {
        /* Base styles are set inline */
      }
      
      .edit-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 44px;
        height: 44px;
        margin: 0 4px;
        border-radius: 22px;
        background: white;
        border: none;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        color: #666;
        transition: all 0.2s;
      }
      
      .edit-btn:active {
        background: #f0f0f0;
        transform: scale(0.95);
      }
      
      .done-btn {
        background: #3B82F6;
        color: white;
      }
      
      .delete-btn {
        background: #EF4444;
        color: white;
      }
      
      .add-point-btn {
        background: #10B981;
        color: white;
      }
      
      .edit-point-handle {
        cursor: move;
      }
    `,document.head.appendChild(re)};return Es(()=>{ue(),T()}),Ol(()=>{window.removeEventListener("shape:selected",G),window.removeEventListener("editing:start",ee),window.removeEventListener("editing:end",pe),u.value&&u.value.remove(),h.value&&h.value.remove()}),{isEditing:s,editingShape:o,startEditing:ee,stopEditing:pe}}const nH={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},rH={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},iH={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},sH={key:0,class:"mb-4"},oH={key:0,class:"animate-pulse"},aH=["value"],lH={key:1,class:"mb-4"},uH={key:0,class:"animate-pulse"},cH=["disabled"],dH={value:null},hH=["value"],fH={key:2,class:"mb-4"},pH={key:0,class:"animate-pulse"},gH=["disabled"],mH={value:null},vH=["value"],yH={class:"mb-4"},_H={class:"mb-6"},bH={class:"flex justify-end space-x-3"},wH=["disabled"],xH={key:0},LH={key:1},ZE=Rs({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(n,{expose:e,emit:t}){function r(q){return q?typeof q=="object"?q.id:q:null}function i(q){if(q===null)throw new Error("Invalid ID");return q}const s=n,o=t,a=Ao(),l=Gy(),u=Ip(),h=yt(!1),p=yt(null),v=yt([]),m=yt([]),S=yt([]),E=yt(null),k=yt(null),T=yt(!1),A=yt(!1),R=yt(!1),G=yt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),ee=rr(()=>{var q,$,F;return((q=a.user)==null?void 0:q.user_type)==="admin"?G.value.nom.trim()&&G.value.entreprise&&G.value.salarie:(($=a.user)==null?void 0:$.user_type)==="entreprise"?G.value.nom.trim()&&G.value.salarie:(((F=a.user)==null?void 0:F.user_type)==="salarie",G.value.nom.trim())});_i(()=>G.value.entreprise,async q=>{if(!s.modelValue)return;G.value.salarie=null,G.value.visiteur=null,m.value=[];const $=r(q);console.log("[NewPlanModal] Entreprise sélectionnée:",$),$?await pe($):v.value=[]}),_i(()=>G.value.salarie,async q=>{if(!s.modelValue)return;G.value.visiteur=null;const $=r(q);$?await ge($):m.value=[]}),_i(()=>s.modelValue,q=>{var $,F,B;q?(($=a.user)==null?void 0:$.user_type)==="admin"?V():((F=a.user)==null?void 0:F.user_type)==="entreprise"?pe(a.user.id):((B=a.user)==null?void 0:B.user_type)==="salarie"&&ge(a.user.id):(G.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,m.value=[],v.value=[],S.value=[],p.value=null)});async function pe(q){T.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",q);const $=await Ua.getUsers({role:"SALARIE",entreprise:q});console.log("[NewPlanModal] Réponse salaries:",$.data),v.value=$.data}catch($){console.error("[NewPlanModal] Error loading salaries:",$),v.value=[]}finally{T.value=!1}}async function ge(q){A.value=!0;try{const $=await Ua.getUsers({role:"VISITEUR",salarie:q});m.value=$.data}catch($){console.error("[NewPlanModal] Error loading visiteurs:",$),m.value=[]}finally{A.value=!1}}async function O(q){s.modelValue&&(E.value=q,G.value.salarie=q.id,await ge(q.id),o("salarieSelected",q))}function j(q){s.modelValue&&(k.value=q,G.value.visiteur=q.id,o("visiteurSelected",q))}function Y(){o("update:modelValue",!1),G.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,m.value=[],p.value=null}async function V(){R.value=!0;try{const q=await a.fetchEnterprises();S.value=q}catch(q){console.error("[NewPlanModal] Error loading entreprises:",q),S.value=[]}finally{R.value=!1}}async function N(){var q,$;p.value=null,h.value=!0;try{const F={nom:G.value.nom.trim(),description:G.value.description.trim()},B=a.user;if(!B)throw new Error("User not found");if(B.user_type==="admin"){if(!G.value.entreprise||!G.value.salarie)throw new Error("Missing required fields");F.entreprise=i(r(G.value.entreprise)),F.salarie=i(r(G.value.salarie)),G.value.visiteur&&(F.visiteur=G.value.visiteur)}else if(B.user_type==="entreprise"){if(!G.value.salarie)throw new Error("Missing required fields");F.entreprise=B.id,F.salarie=i(r(G.value.salarie)),G.value.visiteur&&(F.visiteur=G.value.visiteur)}else if(B.user_type==="salarie"){if(!B.entreprise)throw new Error("Missing required fields");F.entreprise=B.entreprise.id,F.salarie=B.id,G.value.visiteur&&(F.visiteur=G.value.visiteur)}else if(B.user_type==="visiteur"){if(!B.entreprise||!B.salarie)throw new Error("Missing required fields");F.entreprise=B.entreprise.id,F.salarie=B.salarie.id,F.visiteur=B.id}console.log("Données du plan à créer:",F),l.clearCurrentPlan(),u.setCurrentPlan(null);const Q=await l.createPlan(F);o("created",Q.id),Y()}catch(F){console.error("[NewPlanModal] Error creating plan:",F),console.error("Response data:",(q=F.response)==null?void 0:q.data);let B="Une erreur est survenue lors de la création du plan";($=F.response)!=null&&$.data&&(typeof F.response.data=="object"?B=Object.entries(F.response.data).map(([Q,X])=>Array.isArray(X)?`${Q}: ${X.join(", ")}`:`${Q}: ${X}`).join(`
`):typeof F.response.data=="string"&&(B=F.response.data)),p.value=B}finally{h.value=!1}}return e({salaries:v,visiteurs:m,selectedSalarie:E,selectedVisiteur:k,loadSalaries:pe,loadVisiteurs:ge,selectSalarie:O,selectVisiteur:j}),(q,$)=>{var F,B,Q,X;return q.modelValue?(De(),Fe("div",nH,[x("div",rH,[x("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[$[6]||($[6]=x("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),x("button",{onClick:Y,class:"text-gray-400 hover:text-gray-500"},$[5]||($[5]=[x("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",iH,[Ln(a).isAdmin?(De(),Fe("div",sH,[$[9]||($[9]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),R.value?(De(),Fe("div",oH,$[7]||($[7]=[x("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Tn((De(),Fe("select",{key:1,"onUpdate:modelValue":$[0]||($[0]=_e=>G.value.entreprise=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[$[8]||($[8]=x("option",{value:null},"Sélectionnez une entreprise",-1)),(De(!0),Fe(kn,null,sr(S.value,_e=>(De(),Fe("option",{key:_e.id,value:_e.id},Dt(Ln(Dl)(_e)),9,aH))),128))],512)),[[Yi,G.value.entreprise]])])):tn("",!0),((F=Ln(a).user)==null?void 0:F.user_type)==="admin"||((B=Ln(a).user)==null?void 0:B.user_type)==="entreprise"?(De(),Fe("div",lH,[$[11]||($[11]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),T.value?(De(),Fe("div",uH,$[10]||($[10]=[x("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Tn((De(),Fe("select",{key:1,id:"edit-salarie","onUpdate:modelValue":$[1]||($[1]=_e=>G.value.salarie=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:Ln(a).isAdmin&&!G.value.entreprise},[x("option",dH,Dt(v.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),(De(!0),Fe(kn,null,sr(v.value,_e=>(De(),Fe("option",{key:_e.id,value:_e.id},Dt(Ln(Dl)(_e)),9,hH))),128))],8,cH)),[[Yi,G.value.salarie]])])):tn("",!0),((Q=Ln(a).user)==null?void 0:Q.user_type)!=="visiteur"?(De(),Fe("div",fH,[$[13]||($[13]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),A.value?(De(),Fe("div",pH,$[12]||($[12]=[x("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Tn((De(),Fe("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":$[2]||($[2]=_e=>G.value.visiteur=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!m.value.length||((X=Ln(a).user)==null?void 0:X.user_type)!=="salarie"&&!G.value.salarie},[x("option",mH,Dt(m.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),(De(!0),Fe(kn,null,sr(m.value,_e=>(De(),Fe("option",{key:_e.id,value:_e.id},Dt(Ln(Dl)(_e)),9,vH))),128))],8,gH)),[[Yi,G.value.visiteur]])])):tn("",!0),x("div",yH,[$[14]||($[14]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Tn(x("input",{id:"edit-nom","onUpdate:modelValue":$[3]||($[3]=_e=>G.value.nom=_e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Ur,G.value.nom]])]),x("div",_H,[$[15]||($[15]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Tn(x("textarea",{id:"edit-description","onUpdate:modelValue":$[4]||($[4]=_e=>G.value.description=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Ur,G.value.description]])]),x("div",bH,[x("button",{onClick:Y,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),x("button",{onClick:N,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!ee.value||h.value},[h.value?(De(),Fe("span",xH,"Création en cours...")):(De(),Fe("span",LH,"Créer"))],8,wH)])])])])):tn("",!0)}}});function gs(n){"@babel/helpers - typeof";return gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gs(n)}var cl=Uint8Array,Eu=Uint16Array,K2=Int32Array,Wy=new cl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),qy=new cl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Mb=new cl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XE=function(n,e){for(var t=new Eu(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new K2(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},JE=XE(Wy,2),QE=JE.b,kb=JE.r;QE[28]=258,kb[258]=28;var eP=XE(qy,0),SH=eP.b,M5=eP.r,Ab=new Eu(32768);for(var zs=0;zs<32768;++zs){var th=(zs&43690)>>1|(zs&21845)<<1;th=(th&52428)>>2|(th&13107)<<2,th=(th&61680)>>4|(th&3855)<<4,Ab[zs]=((th&65280)>>8|(th&255)<<8)>>1}var nd=function(n,e,t){for(var r=n.length,i=0,s=new Eu(e);i<r;++i)n[i]&&++s[n[i]-1];var o=new Eu(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new Eu(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],h=e-n[i],p=o[n[i]-1]++<<h,v=p|(1<<h)-1;p<=v;++p)a[Ab[p]>>l]=u}else for(a=new Eu(r),i=0;i<r;++i)n[i]&&(a[i]=Ab[o[n[i]-1]++]>>15-n[i]);return a},Eh=new cl(288);for(var zs=0;zs<144;++zs)Eh[zs]=8;for(var zs=144;zs<256;++zs)Eh[zs]=9;for(var zs=256;zs<280;++zs)Eh[zs]=7;for(var zs=280;zs<288;++zs)Eh[zs]=8;var bm=new cl(32);for(var zs=0;zs<32;++zs)bm[zs]=5;var CH=nd(Eh,9,0),EH=nd(Eh,9,1),PH=nd(bm,5,0),MH=nd(bm,5,1),s_=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},hc=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},o_=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Z2=function(n){return(n+7)/8|0},tP=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new cl(n.subarray(e,t))},kH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],vc=function(n,e,t){var r=new Error(e||kH[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,vc),!t)throw r;return r},AH=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new cl(0);var o=!t,a=o||e.i!=2,l=e.i;o&&(t=new cl(i*3));var u=function(we){var Be=t.length;if(we>Be){var ue=new cl(Math.max(Be*2,we));ue.set(t),t=ue}},h=e.f||0,p=e.p||0,v=e.b||0,m=e.l,S=e.d,E=e.m,k=e.n,T=i*8;do{if(!m){h=hc(n,p,1);var A=hc(n,p+1,3);if(p+=3,A)if(A==1)m=EH,S=MH,E=9,k=5;else if(A==2){var pe=hc(n,p,31)+257,ge=hc(n,p+10,15)+4,O=pe+hc(n,p+5,31)+1;p+=14;for(var j=new cl(O),Y=new cl(19),V=0;V<ge;++V)Y[Mb[V]]=hc(n,p+V*3,7);p+=ge*3;for(var N=s_(Y),q=(1<<N)-1,$=nd(Y,N,1),V=0;V<O;){var F=$[hc(n,p,q)];p+=F&15;var R=F>>4;if(R<16)j[V++]=R;else{var B=0,Q=0;for(R==16?(Q=3+hc(n,p,3),p+=2,B=j[V-1]):R==17?(Q=3+hc(n,p,7),p+=3):R==18&&(Q=11+hc(n,p,127),p+=7);Q--;)j[V++]=B}}var X=j.subarray(0,pe),_e=j.subarray(pe);E=s_(X),k=s_(_e),m=nd(X,E,1),S=nd(_e,k,1)}else vc(1);else{var R=Z2(p)+4,G=n[R-4]|n[R-3]<<8,ee=R+G;if(ee>i){l&&vc(0);break}a&&u(v+G),t.set(n.subarray(R,ee),v),e.b=v+=G,e.p=p=ee*8,e.f=h;continue}if(p>T){l&&vc(0);break}}a&&u(v+131072);for(var me=(1<<E)-1,We=(1<<k)-1,ae=p;;ae=p){var B=m[o_(n,p)&me],ve=B>>4;if(p+=B&15,p>T){l&&vc(0);break}if(B||vc(2),ve<256)t[v++]=ve;else if(ve==256){ae=p,m=null;break}else{var ye=ve-254;if(ve>264){var V=ve-257,J=Wy[V];ye=hc(n,p,(1<<J)-1)+QE[V],p+=J}var se=S[o_(n,p)&We],fe=se>>4;se||vc(3),p+=se&15;var _e=SH[fe];if(fe>3){var J=qy[fe];_e+=o_(n,p)&(1<<J)-1,p+=J}if(p>T){l&&vc(0);break}a&&u(v+131072);var ie=v+ye;if(v<_e){var te=s-_e,Oe=Math.min(_e,ie);for(te+v<0&&vc(3);v<Oe;++v)t[v]=r[te+v]}for(;v<ie;++v)t[v]=t[v-_e]}}e.l=m,e.p=ae,e.b=v,e.f=h,m&&(h=1,e.m=E,e.d=S,e.n=k)}while(!h);return v!=t.length&&o?tP(t,0,v):t.subarray(0,v)},Sd=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},ag=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},a_=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:rP,l:0};if(i==1){var o=new cl(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(ee,pe){return ee.f-pe.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],u=0,h=1,p=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=i-1;)a=t[t[u].f<t[p].f?u++:p++],l=t[u!=h&&t[u].f<t[p].f?u++:p++],t[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var m=new Eu(v+1),S=Tb(t[h-1],m,0);if(S>e){var r=0,E=0,k=S-e,T=1<<k;for(s.sort(function(pe,ge){return m[ge.s]-m[pe.s]||pe.f-ge.f});r<i;++r){var A=s[r].s;if(m[A]>e)E+=T-(1<<S-m[A]),m[A]=e;else break}for(E>>=k;E>0;){var R=s[r].s;m[R]<e?E-=1<<e-m[R]++-1:++r}for(;r>=0&&E;--r){var G=s[r].s;m[G]==e&&(--m[G],++E)}S=e}return{t:new cl(m),l:S}},Tb=function(n,e,t){return n.s==-1?Math.max(Tb(n.l,e,t+1),Tb(n.r,e,t+1)):e[n.s]=t},k5=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Eu(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return{c:t.subarray(0,r),n:e}},lg=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},nP=function(n,e,t){var r=t.length,i=Z2(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},A5=function(n,e,t,r,i,s,o,a,l,u,h){Sd(e,h++,t),++i[256];for(var p=a_(i,15),v=p.t,m=p.l,S=a_(s,15),E=S.t,k=S.l,T=k5(v),A=T.c,R=T.n,G=k5(E),ee=G.c,pe=G.n,ge=new Eu(19),O=0;O<A.length;++O)++ge[A[O]&31];for(var O=0;O<ee.length;++O)++ge[ee[O]&31];for(var j=a_(ge,7),Y=j.t,V=j.l,N=19;N>4&&!Y[Mb[N-1]];--N);var q=u+5<<3,$=lg(i,Eh)+lg(s,bm)+o,F=lg(i,v)+lg(s,E)+o+14+3*N+lg(ge,Y)+2*ge[16]+3*ge[17]+7*ge[18];if(l>=0&&q<=$&&q<=F)return nP(e,h,n.subarray(l,l+u));var B,Q,X,_e;if(Sd(e,h,1+(F<$)),h+=2,F<$){B=nd(v,m,0),Q=v,X=nd(E,k,0),_e=E;var me=nd(Y,V,0);Sd(e,h,R-257),Sd(e,h+5,pe-1),Sd(e,h+10,N-4),h+=14;for(var O=0;O<N;++O)Sd(e,h+3*O,Y[Mb[O]]);h+=3*N;for(var We=[A,ee],ae=0;ae<2;++ae)for(var ve=We[ae],O=0;O<ve.length;++O){var ye=ve[O]&31;Sd(e,h,me[ye]),h+=Y[ye],ye>15&&(Sd(e,h,ve[O]>>5&127),h+=ve[O]>>12)}}else B=CH,Q=Eh,X=PH,_e=bm;for(var O=0;O<a;++O){var J=r[O];if(J>255){var ye=J>>18&31;ag(e,h,B[ye+257]),h+=Q[ye+257],ye>7&&(Sd(e,h,J>>23&31),h+=Wy[ye]);var se=J&31;ag(e,h,X[se]),h+=_e[se],se>3&&(ag(e,h,J>>5&8191),h+=qy[se])}else ag(e,h,B[J]),h+=Q[J]}return ag(e,h,B[256]),h+Q[256]},TH=new K2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rP=new cl(0),DH=function(n,e,t,r,i,s){var o=s.z||n.length,a=new cl(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var p=TH[e-1],v=p>>13,m=p&8191,S=(1<<t)-1,E=s.p||new Eu(32768),k=s.h||new Eu(S+1),T=Math.ceil(t/3),A=2*T,R=function(re){return(n[re]^n[re+1]<<T^n[re+2]<<A)&S},G=new K2(25e3),ee=new Eu(288),pe=new Eu(32),ge=0,O=0,j=s.i||0,Y=0,V=s.w||0,N=0;j+2<o;++j){var q=R(j),$=j&32767,F=k[q];if(E[$]=F,k[q]=$,V<=j){var B=o-j;if((ge>7e3||Y>24576)&&(B>423||!u)){h=A5(n,l,0,G,ee,pe,O,Y,N,j-N,h),Y=ge=O=0,N=j;for(var Q=0;Q<286;++Q)ee[Q]=0;for(var Q=0;Q<30;++Q)pe[Q]=0}var X=2,_e=0,me=m,We=$-F&32767;if(B>2&&q==R(j-We))for(var ae=Math.min(v,B)-1,ve=Math.min(32767,j),ye=Math.min(258,B);We<=ve&&--me&&$!=F;){if(n[j+X]==n[j+X-We]){for(var J=0;J<ye&&n[j+J]==n[j+J-We];++J);if(J>X){if(X=J,_e=We,J>ae)break;for(var se=Math.min(We,J-2),fe=0,Q=0;Q<se;++Q){var ie=j-We+Q&32767,te=E[ie],Oe=ie-te&32767;Oe>fe&&(fe=Oe,F=ie)}}}$=F,F=E[$],We+=$-F&32767}if(_e){G[Y++]=268435456|kb[X]<<18|M5[_e];var we=kb[X]&31,Be=M5[_e]&31;O+=Wy[we]+qy[Be],++ee[257+we],++pe[Be],V=j+X,++ge}else G[Y++]=n[j],++ee[n[j]]}}for(j=Math.max(j,V);j<o;++j)G[Y++]=n[j],++ee[n[j]];h=A5(n,l,u,G,ee,pe,O,Y,N,j-N,h),u||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=k,s.p=E,s.i=j,s.w=V)}else{for(var j=s.w||0;j<o+u;j+=65535){var ue=j+65535;ue>=o&&(l[h/8|0]=u,ue=o),h=nP(l,h+1,n.subarray(j,ue))}s.i=o}return tP(a,0,r+Z2(h)+i)},iP=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},IH=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new cl(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return DH(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},sP=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},OH=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=iP();i.p(e.dictionary),sP(n,2,i.d())}},NH=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&vc(6,"invalid zlib data"),(n[1]>>5&1)==1&&vc(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Db(n,e){e||(e={});var t=iP();t.p(n);var r=IH(n,e,e.dictionary?6:2,4);return OH(r,e),sP(r,r.length-4,t.d()),r}function RH(n,e){return AH(n.subarray(NH(n),-4),{i:2},e,e)}var BH=typeof TextDecoder<"u"&&new TextDecoder,FH=0;try{BH.decode(rP,{stream:!0}),FH=1}catch{}var jr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function l_(){jr.console&&typeof jr.console.log=="function"&&jr.console.log.apply(jr.console,arguments)}var Cs={log:l_,warn:function(n){jr.console&&(typeof jr.console.warn=="function"?jr.console.warn.apply(jr.console,arguments):l_.call(null,arguments))},error:function(n){jr.console&&(typeof jr.console.error=="function"?jr.console.error.apply(jr.console,arguments):l_(n))}};function u_(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){tf(r.response,e,t)},r.onerror=function(){Cs.error("could not download file")},r.send()}function T5(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function C0(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Yg,Ib,tf=jr.saveAs||((typeof window>"u"?"undefined":gs(window))!=="object"||window!==jr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=jr.URL||jr.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?T5(i.href)?u_(n,e,t):C0(i,i.target="_blank"):C0(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){C0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(T5(n))u_(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){C0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:gs(s)!=="object"&&(Cs.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return u_(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(jr.HTMLElement)||jr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":gs(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(n)}else{var l=jr.URL||jr.webkitURL,u=l.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function oP(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function c_(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=tl(t,r,i,s,e[0],7,-680876936),s=tl(s,t,r,i,e[1],12,-389564586),i=tl(i,s,t,r,e[2],17,606105819),r=tl(r,i,s,t,e[3],22,-1044525330),t=tl(t,r,i,s,e[4],7,-176418897),s=tl(s,t,r,i,e[5],12,1200080426),i=tl(i,s,t,r,e[6],17,-1473231341),r=tl(r,i,s,t,e[7],22,-45705983),t=tl(t,r,i,s,e[8],7,1770035416),s=tl(s,t,r,i,e[9],12,-1958414417),i=tl(i,s,t,r,e[10],17,-42063),r=tl(r,i,s,t,e[11],22,-1990404162),t=tl(t,r,i,s,e[12],7,1804603682),s=tl(s,t,r,i,e[13],12,-40341101),i=tl(i,s,t,r,e[14],17,-1502002290),t=nl(t,r=tl(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=nl(s,t,r,i,e[6],9,-1069501632),i=nl(i,s,t,r,e[11],14,643717713),r=nl(r,i,s,t,e[0],20,-373897302),t=nl(t,r,i,s,e[5],5,-701558691),s=nl(s,t,r,i,e[10],9,38016083),i=nl(i,s,t,r,e[15],14,-660478335),r=nl(r,i,s,t,e[4],20,-405537848),t=nl(t,r,i,s,e[9],5,568446438),s=nl(s,t,r,i,e[14],9,-1019803690),i=nl(i,s,t,r,e[3],14,-187363961),r=nl(r,i,s,t,e[8],20,1163531501),t=nl(t,r,i,s,e[13],5,-1444681467),s=nl(s,t,r,i,e[2],9,-51403784),i=nl(i,s,t,r,e[7],14,1735328473),t=rl(t,r=nl(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=rl(s,t,r,i,e[8],11,-2022574463),i=rl(i,s,t,r,e[11],16,1839030562),r=rl(r,i,s,t,e[14],23,-35309556),t=rl(t,r,i,s,e[1],4,-1530992060),s=rl(s,t,r,i,e[4],11,1272893353),i=rl(i,s,t,r,e[7],16,-155497632),r=rl(r,i,s,t,e[10],23,-1094730640),t=rl(t,r,i,s,e[13],4,681279174),s=rl(s,t,r,i,e[0],11,-358537222),i=rl(i,s,t,r,e[3],16,-722521979),r=rl(r,i,s,t,e[6],23,76029189),t=rl(t,r,i,s,e[9],4,-640364487),s=rl(s,t,r,i,e[12],11,-421815835),i=rl(i,s,t,r,e[15],16,530742520),t=il(t,r=rl(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=il(s,t,r,i,e[7],10,1126891415),i=il(i,s,t,r,e[14],15,-1416354905),r=il(r,i,s,t,e[5],21,-57434055),t=il(t,r,i,s,e[12],6,1700485571),s=il(s,t,r,i,e[3],10,-1894986606),i=il(i,s,t,r,e[10],15,-1051523),r=il(r,i,s,t,e[1],21,-2054922799),t=il(t,r,i,s,e[8],6,1873313359),s=il(s,t,r,i,e[15],10,-30611744),i=il(i,s,t,r,e[6],15,-1560198380),r=il(r,i,s,t,e[13],21,1309151649),t=il(t,r,i,s,e[4],6,-145523070),s=il(s,t,r,i,e[11],10,-1120210379),i=il(i,s,t,r,e[2],15,718787259),r=il(r,i,s,t,e[9],21,-343485551),n[0]=fh(t,n[0]),n[1]=fh(r,n[1]),n[2]=fh(i,n[2]),n[3]=fh(s,n[3])}function Yy(n,e,t,r,i,s){return e=fh(fh(e,n),fh(r,s)),fh(e<<i|e>>>32-i,t)}function tl(n,e,t,r,i,s,o){return Yy(e&t|~e&r,n,e,i,s,o)}function nl(n,e,t,r,i,s,o){return Yy(e&r|t&~r,n,e,i,s,o)}function rl(n,e,t,r,i,s,o){return Yy(e^t^r,n,e,i,s,o)}function il(n,e,t,r,i,s,o){return Yy(t^(e|~r),n,e,i,s,o)}function aP(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)c_(r,jH(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(c_(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,c_(r,i),r}function jH(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Yg=jr.atob.bind(jr),Ib=jr.btoa.bind(jr);var D5="0123456789abcdef".split("");function zH(n){for(var e="",t=0;t<4;t++)e+=D5[n>>8*t+4&15]+D5[n>>8*t&15];return e}function $H(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Ob(n){return aP(n).map($H).join("")}var UH=function(n){for(var e=0;e<n.length;e++)n[e]=zH(n[e]);return n.join("")}(aP("hello"))!="5d41402abc4b2a76b9719d911017c592";function fh(n,e){if(UH){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Nb(n,e){var t,r,i,s;if(n!==t){for(var o=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var h=a[l];u=(u+h+o.charCodeAt(l))%256,a[l]=a[u],a[u]=h}t=n,r=a}else a=r;var p=e.length,v=0,m=0,S="";for(l=0;l<p;l++)m=(m+(h=a[v=(v+1)%256]))%256,a[v]=a[m],a[m]=h,o=a[(a[v]+a[m])%256],S+=String.fromCharCode(e.charCodeAt(l)^o);return S}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var I5={print:4,modify:8,copy:16,"annot-forms":32};function up(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(I5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=I5[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Ob(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Nb(this.encryptionKey,this.padding)}function cp(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function O5(n){if(gs(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(a){jr.console&&Cs.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Xv(n){if(!(this instanceof Xv))return new Xv(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function lP(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function af(n,e,t,r,i){if(!(this instanceof af))return new af(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,lP.call(this,r,i)}function fp(n,e,t,r,i){if(!(this instanceof fp))return new fp(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,lP.call(this,r,i)}function Fr(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",h=null;gs(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=O5;var S="1.3",E=m.__private__.getPdfVersion=function(){return S};m.__private__.setPdfVersion=function(z){S=z};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return k};var T=m.__private__.getPageFormat=function(z){return k[z]};i=i||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},R=A.COMPAT;function G(){this.saveGraphicsState(),U(new Xn(ot,0,0,-ot,0,Ga()*ot).toString()+" cm"),this.setFontSize(this.getFontSize()/ot),u="n",R=A.ADVANCED}function ee(){this.restoreGraphicsState(),u="S",R=A.COMPAT}var pe=m.__private__.combineFontStyleAndFontWeight=function(z,Ce){if(z=="bold"&&Ce=="normal"||z=="bold"&&Ce==400||z=="normal"&&Ce=="italic"||z=="bold"&&Ce=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ce&&(z=Ce==400||Ce==="normal"?z==="italic"?"italic":"normal":Ce!=700&&Ce!=="bold"||z!=="normal"?(Ce==700?"bold":Ce)+""+z:"bold"),z};m.advancedAPI=function(z){var Ce=R===A.COMPAT;return Ce&&G.call(this),typeof z!="function"||(z(this),Ce&&ee.call(this)),this},m.compatAPI=function(z){var Ce=R===A.ADVANCED;return Ce&&ee.call(this),typeof z!="function"||(z(this),Ce&&G.call(this)),this},m.isAdvancedAPI=function(){return R===A.ADVANCED};var ge,O=function(z){if(R!==A.ADVANCED)throw new Error(z+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=m.roundToPrecision=m.__private__.roundToPrecision=function(z,Ce){var nt=e||Ce;if(isNaN(z)||isNaN(nt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return z.toFixed(nt).replace(/0+$/,"")};ge=m.hpf=m.__private__.hpf=typeof l=="number"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return j(z,l)}:l==="smart"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return j(z,z>-1&&z<1?16:5)}:function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return j(z,16)};var Y=m.f2=m.__private__.f2=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f2");return j(z,2)},V=m.__private__.f3=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f3");return j(z,3)},N=m.scale=m.__private__.scale=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.scale");return R===A.COMPAT?z*ot:R===A.ADVANCED?z:void 0},q=function(z){return R===A.COMPAT?Ga()-z:R===A.ADVANCED?z:void 0},$=function(z){return N(q(z))};m.__private__.setPrecision=m.setPrecision=function(z){typeof parseInt(z,10)=="number"&&(e=parseInt(z,10))};var F,B="00000000000000000000000000000000",Q=m.__private__.getFileId=function(){return B},X=m.__private__.setFileId=function(z){return B=z!==void 0&&/^[a-fA-F0-9]{32}$/.test(z)?z.toUpperCase():B.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Ei=new up(h.userPermissions,h.userPassword,h.ownerPassword,B)),B};m.setFileId=function(z){return X(z),this},m.getFileId=function(){return Q()};var _e=m.__private__.convertDateToPDFDate=function(z){var Ce=z.getTimezoneOffset(),nt=Ce<0?"+":"-",mt=Math.floor(Math.abs(Ce/60)),Ot=Math.abs(Ce%60),Kt=[nt,ye(mt),"'",ye(Ot),"'"].join("");return["D:",z.getFullYear(),ye(z.getMonth()+1),ye(z.getDate()),ye(z.getHours()),ye(z.getMinutes()),ye(z.getSeconds()),Kt].join("")},me=m.__private__.convertPDFDateToDate=function(z){var Ce=parseInt(z.substr(2,4),10),nt=parseInt(z.substr(6,2),10)-1,mt=parseInt(z.substr(8,2),10),Ot=parseInt(z.substr(10,2),10),Kt=parseInt(z.substr(12,2),10),vn=parseInt(z.substr(14,2),10);return new Date(Ce,nt,mt,Ot,Kt,vn,0)},We=m.__private__.setCreationDate=function(z){var Ce;if(z===void 0&&(z=new Date),z instanceof Date)Ce=_e(z);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(z))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ce=z}return F=Ce},ae=m.__private__.getCreationDate=function(z){var Ce=F;return z==="jsDate"&&(Ce=me(F)),Ce};m.setCreationDate=function(z){return We(z),this},m.getCreationDate=function(z){return ae(z)};var ve,ye=m.__private__.padd2=function(z){return("0"+parseInt(z)).slice(-2)},J=m.__private__.padd2Hex=function(z){return("00"+(z=z.toString())).substr(z.length)},se=0,fe=[],ie=[],te=0,Oe=[],we=[],Be=!1,ue=ie,re=function(){se=0,te=0,ie=[],fe=[],Oe=[],Er=Yt(),Yn=Yt()};m.__private__.setCustomOutputDestination=function(z){Be=!0,ue=z};var Z=function(z){Be||(ue=z)};m.__private__.resetCustomOutputDestination=function(){Be=!1,ue=ie};var U=m.__private__.out=function(z){return z=z.toString(),te+=z.length+1,ue.push(z),ue},xe=m.__private__.write=function(z){return U(arguments.length===1?z.toString():Array.prototype.join.call(arguments," "))},Ne=m.__private__.getArrayBuffer=function(z){for(var Ce=z.length,nt=new ArrayBuffer(Ce),mt=new Uint8Array(nt);Ce--;)mt[Ce]=z.charCodeAt(Ce);return nt},Ge=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Ge};var Se=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(z){return Se=R===A.ADVANCED?z/ot:z,this};var ce,je=m.__private__.getFontSize=m.getFontSize=function(){return R===A.COMPAT?Se:Se*ot},st=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(z){return st=z,this},m.__private__.getR2L=m.getR2L=function(){return st};var lt,_t=m.__private__.setZoomMode=function(z){var Ce=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(z))ce=z;else if(isNaN(z)){if(Ce.indexOf(z)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+z+'" is not recognized.');ce=z}else ce=parseInt(z,10)};m.__private__.getZoomMode=function(){return ce};var Je,zt=m.__private__.setPageMode=function(z){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(z)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+z+'" is not recognized.');lt=z};m.__private__.getPageMode=function(){return lt};var Xt=m.__private__.setLayoutMode=function(z){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(z)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+z+'" is not recognized.');Je=z};m.__private__.getLayoutMode=function(){return Je},m.__private__.setDisplayMode=m.setDisplayMode=function(z,Ce,nt){return _t(z),Xt(Ce),zt(nt),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(z){if(Object.keys(et).indexOf(z)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[z]},m.__private__.getDocumentProperties=function(){return et},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(z){for(var Ce in et)et.hasOwnProperty(Ce)&&z[Ce]&&(et[Ce]=z[Ce]);return this},m.__private__.setDocumentProperty=function(z,Ce){if(Object.keys(et).indexOf(z)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[z]=Ce};var ut,ot,It,Jt,xn,Sn={},An={},Zn=[],Cn={},cn={},bn={},ir={},hr=null,wr=0,Kn=[],Rr=new O5(m),ms=n.hotfixes||[],Bi={},Vs={},is=[],Xn=function z(Ce,nt,mt,Ot,Kt,vn){if(!(this instanceof z))return new z(Ce,nt,mt,Ot,Kt,vn);isNaN(Ce)&&(Ce=1),isNaN(nt)&&(nt=0),isNaN(mt)&&(mt=0),isNaN(Ot)&&(Ot=1),isNaN(Kt)&&(Kt=0),isNaN(vn)&&(vn=0),this._matrix=[Ce,nt,mt,Ot,Kt,vn]};Object.defineProperty(Xn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(Xn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(Xn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(Xn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(Xn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(Xn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(Xn.prototype,"a",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(Xn.prototype,"b",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(Xn.prototype,"c",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(Xn.prototype,"d",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(Xn.prototype,"e",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(Xn.prototype,"f",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(Xn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Xn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Xn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Xn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Xn.prototype.join=function(z){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ge).join(z)},Xn.prototype.multiply=function(z){var Ce=z.sx*this.sx+z.shy*this.shx,nt=z.sx*this.shy+z.shy*this.sy,mt=z.shx*this.sx+z.sy*this.shx,Ot=z.shx*this.shy+z.sy*this.sy,Kt=z.tx*this.sx+z.ty*this.shx+this.tx,vn=z.tx*this.shy+z.ty*this.sy+this.ty;return new Xn(Ce,nt,mt,Ot,Kt,vn)},Xn.prototype.decompose=function(){var z=this.sx,Ce=this.shy,nt=this.shx,mt=this.sy,Ot=this.tx,Kt=this.ty,vn=Math.sqrt(z*z+Ce*Ce),zn=(z/=vn)*nt+(Ce/=vn)*mt;nt-=z*zn,mt-=Ce*zn;var Gn=Math.sqrt(nt*nt+mt*mt);return zn/=Gn,z*(mt/=Gn)<Ce*(nt/=Gn)&&(z=-z,Ce=-Ce,zn=-zn,vn=-vn),{scale:new Xn(vn,0,0,Gn,0,0),translate:new Xn(1,0,0,1,Ot,Kt),rotate:new Xn(z,Ce,-Ce,z,0,0),skew:new Xn(1,0,zn,1,0,0)}},Xn.prototype.toString=function(z){return this.join(" ")},Xn.prototype.inversed=function(){var z=this.sx,Ce=this.shy,nt=this.shx,mt=this.sy,Ot=this.tx,Kt=this.ty,vn=1/(z*mt-Ce*nt),zn=mt*vn,Gn=-Ce*vn,fr=-nt*vn,Cr=z*vn;return new Xn(zn,Gn,fr,Cr,-zn*Ot-fr*Kt,-Gn*Ot-Cr*Kt)},Xn.prototype.applyToPoint=function(z){var Ce=z.x*this.sx+z.y*this.shx+this.tx,nt=z.x*this.shy+z.y*this.sy+this.ty;return new Gs(Ce,nt)},Xn.prototype.applyToRectangle=function(z){var Ce=this.applyToPoint(z),nt=this.applyToPoint(new Gs(z.x+z.w,z.y+z.h));return new ga(Ce.x,Ce.y,nt.x-Ce.x,nt.y-Ce.y)},Xn.prototype.clone=function(){var z=this.sx,Ce=this.shy,nt=this.shx,mt=this.sy,Ot=this.tx,Kt=this.ty;return new Xn(z,Ce,nt,mt,Ot,Kt)},m.Matrix=Xn;var ss=m.matrixMult=function(z,Ce){return Ce.multiply(z)},Et=new Xn(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Et;var at=function(z,Ce){if(!cn[z]){var nt=(Ce instanceof af?"Sh":"P")+(Object.keys(Cn).length+1).toString(10);Ce.id=nt,cn[z]=nt,Cn[nt]=Ce,Rr.publish("addPattern",Ce)}};m.ShadingPattern=af,m.TilingPattern=fp,m.addShadingPattern=function(z,Ce){return O("addShadingPattern()"),at(z,Ce),this},m.beginTilingPattern=function(z){O("beginTilingPattern()"),ma(z.boundingBox[0],z.boundingBox[1],z.boundingBox[2]-z.boundingBox[0],z.boundingBox[3]-z.boundingBox[1],z.matrix)},m.endTilingPattern=function(z,Ce){O("endTilingPattern()"),Ce.stream=we[ve].join(`
`),at(z,Ce),Rr.publish("endTilingPattern",Ce),is.pop().restore()};var Bt=m.__private__.newObject=function(){var z=Yt();return In(z,!0),z},Yt=m.__private__.newObjectDeferred=function(){return se++,fe[se]=function(){return te},se},In=function(z,Ce){return Ce=typeof Ce=="boolean"&&Ce,fe[z]=te,Ce&&U(z+" 0 obj"),z},Pn=m.__private__.newAdditionalObject=function(){var z={objId:Yt(),content:""};return Oe.push(z),z},Er=Yt(),Yn=Yt(),Ct=m.__private__.decodeColorString=function(z){var Ce=z.split(" ");if(Ce.length!==2||Ce[1]!=="g"&&Ce[1]!=="G")Ce.length===5&&(Ce[4]==="k"||Ce[4]==="K")&&(Ce=[(1-Ce[0])*(1-Ce[3]),(1-Ce[1])*(1-Ce[3]),(1-Ce[2])*(1-Ce[3]),"r"]);else{var nt=parseFloat(Ce[0]);Ce=[nt,nt,nt,"r"]}for(var mt="#",Ot=0;Ot<3;Ot++)mt+=("0"+Math.floor(255*parseFloat(Ce[Ot])).toString(16)).slice(-2);return mt},mn=m.__private__.encodeColorString=function(z){var Ce;typeof z=="string"&&(z={ch1:z});var nt=z.ch1,mt=z.ch2,Ot=z.ch3,Kt=z.ch4,vn=z.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof nt=="string"&&nt.charAt(0)!=="#"){var zn=new oP(nt);if(zn.ok)nt=zn.toHex();else if(!/^\d*\.?\d*$/.test(nt))throw new Error('Invalid color "'+nt+'" passed to jsPDF.encodeColorString.')}if(typeof nt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(nt)&&(nt="#"+nt[1]+nt[1]+nt[2]+nt[2]+nt[3]+nt[3]),typeof nt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(nt)){var Gn=parseInt(nt.substr(1),16);nt=Gn>>16&255,mt=Gn>>8&255,Ot=255&Gn}if(mt===void 0||Kt===void 0&&nt===mt&&mt===Ot)if(typeof nt=="string")Ce=nt+" "+vn[0];else switch(z.precision){case 2:Ce=Y(nt/255)+" "+vn[0];break;case 3:default:Ce=V(nt/255)+" "+vn[0]}else if(Kt===void 0||gs(Kt)==="object"){if(Kt&&!isNaN(Kt.a)&&Kt.a===0)return Ce=["1.","1.","1.",vn[1]].join(" ");if(typeof nt=="string")Ce=[nt,mt,Ot,vn[1]].join(" ");else switch(z.precision){case 2:Ce=[Y(nt/255),Y(mt/255),Y(Ot/255),vn[1]].join(" ");break;default:case 3:Ce=[V(nt/255),V(mt/255),V(Ot/255),vn[1]].join(" ")}}else if(typeof nt=="string")Ce=[nt,mt,Ot,Kt,vn[2]].join(" ");else switch(z.precision){case 2:Ce=[Y(nt),Y(mt),Y(Ot),Y(Kt),vn[2]].join(" ");break;case 3:default:Ce=[V(nt),V(mt),V(Ot),V(Kt),vn[2]].join(" ")}return Ce},Hn=m.__private__.getFilters=function(){return o},en=m.__private__.putStream=function(z){var Ce=(z=z||{}).data||"",nt=z.filters||Hn(),mt=z.alreadyAppliedFilters||[],Ot=z.addLength1||!1,Kt=Ce.length,vn=z.objectId,zn=function(ws){return ws};if(h!==null&&vn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(zn=Ei.encryptor(vn,0));var Gn={};nt===!0&&(nt=["FlateEncode"]);var fr=z.additionalKeyValues||[],Cr=(Gn=Fr.API.processDataByFilters!==void 0?Fr.API.processDataByFilters(Ce,nt):{data:Ce,reverseChain:[]}).reverseChain+(Array.isArray(mt)?mt.join(" "):mt.toString());if(Gn.data.length!==0&&(fr.push({key:"Length",value:Gn.data.length}),Ot===!0&&fr.push({key:"Length1",value:Kt})),Cr.length!=0)if(Cr.split("/").length-1==1)fr.push({key:"Filter",value:Cr});else{fr.push({key:"Filter",value:"["+Cr+"]"});for(var Hr=0;Hr<fr.length;Hr+=1)if(fr[Hr].key==="DecodeParms"){for(var Wi=[],gi=0;gi<Gn.reverseChain.split("/").length-1;gi+=1)Wi.push("null");Wi.push(fr[Hr].value),fr[Hr].value="["+Wi.join(" ")+"]"}}U("<<");for(var xi=0;xi<fr.length;xi++)U("/"+fr[xi].key+" "+fr[xi].value);U(">>"),Gn.data.length!==0&&(U("stream"),U(zn(Gn.data)),U("endstream"))},ln=m.__private__.putPage=function(z){var Ce=z.number,nt=z.data,mt=z.objId,Ot=z.contentsObjId;In(mt,!0),U("<</Type /Page"),U("/Parent "+z.rootDictionaryObjId+" 0 R"),U("/Resources "+z.resourceDictionaryObjId+" 0 R"),U("/MediaBox ["+parseFloat(ge(z.mediaBox.bottomLeftX))+" "+parseFloat(ge(z.mediaBox.bottomLeftY))+" "+ge(z.mediaBox.topRightX)+" "+ge(z.mediaBox.topRightY)+"]"),z.cropBox!==null&&U("/CropBox ["+ge(z.cropBox.bottomLeftX)+" "+ge(z.cropBox.bottomLeftY)+" "+ge(z.cropBox.topRightX)+" "+ge(z.cropBox.topRightY)+"]"),z.bleedBox!==null&&U("/BleedBox ["+ge(z.bleedBox.bottomLeftX)+" "+ge(z.bleedBox.bottomLeftY)+" "+ge(z.bleedBox.topRightX)+" "+ge(z.bleedBox.topRightY)+"]"),z.trimBox!==null&&U("/TrimBox ["+ge(z.trimBox.bottomLeftX)+" "+ge(z.trimBox.bottomLeftY)+" "+ge(z.trimBox.topRightX)+" "+ge(z.trimBox.topRightY)+"]"),z.artBox!==null&&U("/ArtBox ["+ge(z.artBox.bottomLeftX)+" "+ge(z.artBox.bottomLeftY)+" "+ge(z.artBox.topRightX)+" "+ge(z.artBox.topRightY)+"]"),typeof z.userUnit=="number"&&z.userUnit!==1&&U("/UserUnit "+z.userUnit),Rr.publish("putPage",{objId:mt,pageContext:Kn[Ce],pageNumber:Ce,page:nt}),U("/Contents "+Ot+" 0 R"),U(">>"),U("endobj");var Kt=nt.join(`
`);return R===A.ADVANCED&&(Kt+=`
Q`),In(Ot,!0),en({data:Kt,filters:Hn(),objectId:Ot}),U("endobj"),mt},Rn=m.__private__.putPages=function(){var z,Ce,nt=[];for(z=1;z<=wr;z++)Kn[z].objId=Yt(),Kn[z].contentsObjId=Yt();for(z=1;z<=wr;z++)nt.push(ln({number:z,data:we[z],objId:Kn[z].objId,contentsObjId:Kn[z].contentsObjId,mediaBox:Kn[z].mediaBox,cropBox:Kn[z].cropBox,bleedBox:Kn[z].bleedBox,trimBox:Kn[z].trimBox,artBox:Kn[z].artBox,userUnit:Kn[z].userUnit,rootDictionaryObjId:Er,resourceDictionaryObjId:Yn}));In(Er,!0),U("<</Type /Pages");var mt="/Kids [";for(Ce=0;Ce<wr;Ce++)mt+=nt[Ce]+" 0 R ";U(mt+"]"),U("/Count "+wr),U(">>"),U("endobj"),Rr.publish("postPutPages")},vr=function(z){Rr.publish("putFont",{font:z,out:U,newObject:Bt,putStream:en}),z.isAlreadyPutted!==!0&&(z.objectNumber=Bt(),U("<<"),U("/Type /Font"),U("/BaseFont /"+cp(z.postScriptName)),U("/Subtype /Type1"),typeof z.encoding=="string"&&U("/Encoding /"+z.encoding),U("/FirstChar 32"),U("/LastChar 255"),U(">>"),U("endobj"))},us=function(){for(var z in Sn)Sn.hasOwnProperty(z)&&(p===!1||p===!0&&v.hasOwnProperty(z))&&vr(Sn[z])},En=function(z){z.objectNumber=Bt();var Ce=[];Ce.push({key:"Type",value:"/XObject"}),Ce.push({key:"Subtype",value:"/Form"}),Ce.push({key:"BBox",value:"["+[ge(z.x),ge(z.y),ge(z.x+z.width),ge(z.y+z.height)].join(" ")+"]"}),Ce.push({key:"Matrix",value:"["+z.matrix.toString()+"]"});var nt=z.pages[1].join(`
`);en({data:nt,additionalKeyValues:Ce,objectId:z.objectNumber}),U("endobj")},Lr=function(){for(var z in Bi)Bi.hasOwnProperty(z)&&En(Bi[z])},Jn=function(z,Ce){var nt,mt=[],Ot=1/(Ce-1);for(nt=0;nt<1;nt+=Ot)mt.push(nt);if(mt.push(1),z[0].offset!=0){var Kt={offset:0,color:z[0].color};z.unshift(Kt)}if(z[z.length-1].offset!=1){var vn={offset:1,color:z[z.length-1].color};z.push(vn)}for(var zn="",Gn=0,fr=0;fr<mt.length;fr++){for(nt=mt[fr];nt>z[Gn+1].offset;)Gn++;var Cr=z[Gn].offset,Hr=(nt-Cr)/(z[Gn+1].offset-Cr),Wi=z[Gn].color,gi=z[Gn+1].color;zn+=J(Math.round((1-Hr)*Wi[0]+Hr*gi[0]).toString(16))+J(Math.round((1-Hr)*Wi[1]+Hr*gi[1]).toString(16))+J(Math.round((1-Hr)*Wi[2]+Hr*gi[2]).toString(16))}return zn.trim()},Ki=function(z,Ce){Ce||(Ce=21);var nt=Bt(),mt=Jn(z.colors,Ce),Ot=[];Ot.push({key:"FunctionType",value:"0"}),Ot.push({key:"Domain",value:"[0.0 1.0]"}),Ot.push({key:"Size",value:"["+Ce+"]"}),Ot.push({key:"BitsPerSample",value:"8"}),Ot.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ot.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),en({data:mt,additionalKeyValues:Ot,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:nt}),U("endobj"),z.objectNumber=Bt(),U("<< /ShadingType "+z.type),U("/ColorSpace /DeviceRGB");var Kt="/Coords ["+ge(parseFloat(z.coords[0]))+" "+ge(parseFloat(z.coords[1]))+" ";z.type===2?Kt+=ge(parseFloat(z.coords[2]))+" "+ge(parseFloat(z.coords[3])):Kt+=ge(parseFloat(z.coords[2]))+" "+ge(parseFloat(z.coords[3]))+" "+ge(parseFloat(z.coords[4]))+" "+ge(parseFloat(z.coords[5])),U(Kt+="]"),z.matrix&&U("/Matrix ["+z.matrix.toString()+"]"),U("/Function "+nt+" 0 R"),U("/Extend [true true]"),U(">>"),U("endobj")},fi=function(z,Ce){var nt=Yt(),mt=Bt();Ce.push({resourcesOid:nt,objectOid:mt}),z.objectNumber=mt;var Ot=[];Ot.push({key:"Type",value:"/Pattern"}),Ot.push({key:"PatternType",value:"1"}),Ot.push({key:"PaintType",value:"1"}),Ot.push({key:"TilingType",value:"1"}),Ot.push({key:"BBox",value:"["+z.boundingBox.map(ge).join(" ")+"]"}),Ot.push({key:"XStep",value:ge(z.xStep)}),Ot.push({key:"YStep",value:ge(z.yStep)}),Ot.push({key:"Resources",value:nt+" 0 R"}),z.matrix&&Ot.push({key:"Matrix",value:"["+z.matrix.toString()+"]"}),en({data:z.stream,additionalKeyValues:Ot,objectId:z.objectNumber}),U("endobj")},pi=function(z){var Ce;for(Ce in Cn)Cn.hasOwnProperty(Ce)&&(Cn[Ce]instanceof af?Ki(Cn[Ce]):Cn[Ce]instanceof fp&&fi(Cn[Ce],z))},$i=function(z){for(var Ce in z.objectNumber=Bt(),U("<<"),z)switch(Ce){case"opacity":U("/ca "+Y(z[Ce]));break;case"stroke-opacity":U("/CA "+Y(z[Ce]))}U(">>"),U("endobj")},Ai=function(){var z;for(z in bn)bn.hasOwnProperty(z)&&$i(bn[z])},Fi=function(){for(var z in U("/XObject <<"),Bi)Bi.hasOwnProperty(z)&&Bi[z].objectNumber>=0&&U("/"+z+" "+Bi[z].objectNumber+" 0 R");Rr.publish("putXobjectDict"),U(">>")},ji=function(){Ei.oid=Bt(),U("<<"),U("/Filter /Standard"),U("/V "+Ei.v),U("/R "+Ei.r),U("/U <"+Ei.toHexString(Ei.U)+">"),U("/O <"+Ei.toHexString(Ei.O)+">"),U("/P "+Ei.P),U(">>"),U("endobj")},os=function(){for(var z in U("/Font <<"),Sn)Sn.hasOwnProperty(z)&&(p===!1||p===!0&&v.hasOwnProperty(z))&&U("/"+z+" "+Sn[z].objectNumber+" 0 R");U(">>")},cs=function(){if(Object.keys(Cn).length>0){for(var z in U("/Shading <<"),Cn)Cn.hasOwnProperty(z)&&Cn[z]instanceof af&&Cn[z].objectNumber>=0&&U("/"+z+" "+Cn[z].objectNumber+" 0 R");Rr.publish("putShadingPatternDict"),U(">>")}},Sr=function(z){if(Object.keys(Cn).length>0){for(var Ce in U("/Pattern <<"),Cn)Cn.hasOwnProperty(Ce)&&Cn[Ce]instanceof m.TilingPattern&&Cn[Ce].objectNumber>=0&&Cn[Ce].objectNumber<z&&U("/"+Ce+" "+Cn[Ce].objectNumber+" 0 R");Rr.publish("putTilingPatternDict"),U(">>")}},kr=function(){if(Object.keys(bn).length>0){var z;for(z in U("/ExtGState <<"),bn)bn.hasOwnProperty(z)&&bn[z].objectNumber>=0&&U("/"+z+" "+bn[z].objectNumber+" 0 R");Rr.publish("putGStateDict"),U(">>")}},nr=function(z){In(z.resourcesOid,!0),U("<<"),U("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),os(),cs(),Sr(z.objectOid),kr(),Fi(),U(">>"),U("endobj")},to=function(){var z=[];us(),Ai(),Lr(),pi(z),Rr.publish("putResources"),z.forEach(nr),nr({resourcesOid:Yn,objectOid:Number.MAX_SAFE_INTEGER}),Rr.publish("postPutResources")},no=function(){Rr.publish("putAdditionalObjects");for(var z=0;z<Oe.length;z++){var Ce=Oe[z];In(Ce.objId,!0),U(Ce.content),U("endobj")}Rr.publish("postPutAdditionalObjects")},Bs=function(z){An[z.fontName]=An[z.fontName]||{},An[z.fontName][z.fontStyle]=z.id},Ko=function(z,Ce,nt,mt,Ot){var Kt={id:"F"+(Object.keys(Sn).length+1).toString(10),postScriptName:z,fontName:Ce,fontStyle:nt,encoding:mt,isStandardFont:Ot||!1,metadata:{}};return Rr.publish("addFont",{font:Kt,instance:this}),Sn[Kt.id]=Kt,Bs(Kt),Kt.id},_r=function(z){for(var Ce=0,nt=Ge.length;Ce<nt;Ce++){var mt=Ko.call(this,z[Ce][0],z[Ce][1],z[Ce][2],Ge[Ce][3],!0);p===!1&&(v[mt]=!0);var Ot=z[Ce][0].split("-");Bs({id:mt,fontName:Ot[0],fontStyle:Ot[1]||""})}Rr.publish("addFonts",{fonts:Sn,dictionary:An})},$r=function(z){return z.foo=function(){try{return z.apply(this,arguments)}catch(mt){var Ce=mt.stack||"";~Ce.indexOf(" at ")&&(Ce=Ce.split(" at ")[1]);var nt="Error in function "+Ce.split(`
`)[0].split("<")[0]+": "+mt.message;if(!jr.console)throw new Error(nt);jr.console.error(nt,mt),jr.alert&&alert(nt)}},z.foo.bar=z,z.foo},er=function(z,Ce){var nt,mt,Ot,Kt,vn,zn,Gn,fr,Cr;if(Ot=(Ce=Ce||{}).sourceEncoding||"Unicode",vn=Ce.outputEncoding,(Ce.autoencode||vn)&&Sn[ut].metadata&&Sn[ut].metadata[Ot]&&Sn[ut].metadata[Ot].encoding&&(Kt=Sn[ut].metadata[Ot].encoding,!vn&&Sn[ut].encoding&&(vn=Sn[ut].encoding),!vn&&Kt.codePages&&(vn=Kt.codePages[0]),typeof vn=="string"&&(vn=Kt[vn]),vn)){for(Gn=!1,zn=[],nt=0,mt=z.length;nt<mt;nt++)(fr=vn[z.charCodeAt(nt)])?zn.push(String.fromCharCode(fr)):zn.push(z[nt]),zn[nt].charCodeAt(0)>>8&&(Gn=!0);z=zn.join("")}for(nt=z.length;Gn===void 0&&nt!==0;)z.charCodeAt(nt-1)>>8&&(Gn=!0),nt--;if(!Gn)return z;for(zn=Ce.noBOM?[]:[254,255],nt=0,mt=z.length;nt<mt;nt++){if((Cr=(fr=z.charCodeAt(nt))>>8)>>8)throw new Error("Character at position "+nt+" of string '"+z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zn.push(Cr),zn.push(fr-(Cr<<8))}return String.fromCharCode.apply(void 0,zn)},di=m.__private__.pdfEscape=m.pdfEscape=function(z,Ce){return er(z,Ce).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},oi=m.__private__.beginPage=function(z){we[++wr]=[],Kn[wr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(z[0]),topRightY:Number(z[1])}},ha(wr),Z(we[ve])},Hs=function(z,Ce){var nt,mt,Ot;switch(t=Ce||t,typeof z=="string"&&(nt=T(z.toLowerCase()),Array.isArray(nt)&&(mt=nt[0],Ot=nt[1])),Array.isArray(z)&&(mt=z[0]*ot,Ot=z[1]*ot),isNaN(mt)&&(mt=i[0],Ot=i[1]),(mt>14400||Ot>14400)&&(Cs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),mt=Math.min(14400,mt),Ot=Math.min(14400,Ot)),i=[mt,Ot],t.substr(0,1)){case"l":Ot>mt&&(i=[Ot,mt]);break;case"p":mt>Ot&&(i=[Ot,mt])}oi(i),du(Tu),U(Xi),pu!==0&&U(pu+" J"),bi!==0&&U(bi+" j"),Rr.publish("addPage",{pageNumber:wr})},Pa=function(z){z>0&&z<=wr&&(we.splice(z,1),Kn.splice(z,1),wr--,ve>wr&&(ve=wr),this.setPage(ve))},ha=function(z){z>0&&z<=wr&&(ve=z)},Zi=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return we.length-1},Re=function(z,Ce,nt){var mt,Ot=void 0;return nt=nt||{},z=z!==void 0?z:Sn[ut].fontName,Ce=Ce!==void 0?Ce:Sn[ut].fontStyle,mt=z.toLowerCase(),An[mt]!==void 0&&An[mt][Ce]!==void 0?Ot=An[mt][Ce]:An[z]!==void 0&&An[z][Ce]!==void 0?Ot=An[z][Ce]:nt.disableWarning===!1&&Cs.warn("Unable to look up font label for font '"+z+"', '"+Ce+"'. Refer to getFontList() for available fonts."),Ot||nt.noFallback||(Ot=An.times[Ce])==null&&(Ot=An.times.normal),Ot},qe=m.__private__.putInfo=function(){var z=Bt(),Ce=function(mt){return mt};for(var nt in h!==null&&(Ce=Ei.encryptor(z,0)),U("<<"),U("/Producer ("+di(Ce("jsPDF "+Fr.version))+")"),et)et.hasOwnProperty(nt)&&et[nt]&&U("/"+nt.substr(0,1).toUpperCase()+nt.substr(1)+" ("+di(Ce(et[nt]))+")");U("/CreationDate ("+di(Ce(F))+")"),U(">>"),U("endobj")},dt=m.__private__.putCatalog=function(z){var Ce=(z=z||{}).rootDictionaryObjId||Er;switch(Bt(),U("<<"),U("/Type /Catalog"),U("/Pages "+Ce+" 0 R"),ce||(ce="fullwidth"),ce){case"fullwidth":U("/OpenAction [3 0 R /FitH null]");break;case"fullheight":U("/OpenAction [3 0 R /FitV null]");break;case"fullpage":U("/OpenAction [3 0 R /Fit]");break;case"original":U("/OpenAction [3 0 R /XYZ null null 1]");break;default:var nt=""+ce;nt.substr(nt.length-1)==="%"&&(ce=parseInt(ce)/100),typeof ce=="number"&&U("/OpenAction [3 0 R /XYZ null null "+Y(ce)+"]")}switch(Je||(Je="continuous"),Je){case"continuous":U("/PageLayout /OneColumn");break;case"single":U("/PageLayout /SinglePage");break;case"two":case"twoleft":U("/PageLayout /TwoColumnLeft");break;case"tworight":U("/PageLayout /TwoColumnRight")}lt&&U("/PageMode /"+lt),Rr.publish("putCatalog"),U(">>"),U("endobj")},qt=m.__private__.putTrailer=function(){U("trailer"),U("<<"),U("/Size "+(se+1)),U("/Root "+se+" 0 R"),U("/Info "+(se-1)+" 0 R"),h!==null&&U("/Encrypt "+Ei.oid+" 0 R"),U("/ID [ <"+B+"> <"+B+"> ]"),U(">>")},pn=m.__private__.putHeader=function(){U("%PDF-"+S),U("%ºß¬à")},Vn=m.__private__.putXRef=function(){var z="0000000000";U("xref"),U("0 "+(se+1)),U("0000000000 65535 f ");for(var Ce=1;Ce<=se;Ce++)typeof fe[Ce]=="function"?U((z+fe[Ce]()).slice(-10)+" 00000 n "):fe[Ce]!==void 0?U((z+fe[Ce]).slice(-10)+" 00000 n "):U("0000000000 00000 n ")},xr=m.__private__.buildDocument=function(){re(),Z(ie),Rr.publish("buildDocument"),pn(),Rn(),no(),to(),h!==null&&ji(),qe(),dt();var z=te;return Vn(),qt(),U("startxref"),U(""+z),U("%%EOF"),Z(we[ve]),ie.join(`
`)},Ti=m.__private__.getBlob=function(z){return new Blob([Ne(z)],{type:"application/pdf"})},Ui=m.output=m.__private__.output=$r(function(z,Ce){switch(typeof(Ce=Ce||{})=="string"?Ce={filename:Ce}:Ce.filename=Ce.filename||"generated.pdf",z){case void 0:return xr();case"save":m.save(Ce.filename);break;case"arraybuffer":return Ne(xr());case"blob":return Ti(xr());case"bloburi":case"bloburl":if(jr.URL!==void 0&&typeof jr.URL.createObjectURL=="function")return jr.URL&&jr.URL.createObjectURL(Ti(xr()))||void 0;Cs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var nt="",mt=xr();try{nt=Ib(mt)}catch{nt=Ib(unescape(encodeURIComponent(mt)))}return"data:application/pdf;filename="+Ce.filename+";base64,"+nt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(jr)==="[object Window]"){var Ot="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Kt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ce.pdfObjectUrl&&(Ot=Ce.pdfObjectUrl,Kt="");var vn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ot+'"'+Kt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ce)+");<\/script></body></html>",zn=jr.open();return zn!==null&&zn.document.write(vn),zn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(jr)==="[object Window]"){var Gn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ce.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ce.filename+'" width="500px" height="400px" /></body></html>',fr=jr.open();if(fr!==null){fr.document.write(Gn);var Cr=this;fr.document.documentElement.querySelector("#pdfViewer").onload=function(){fr.document.title=Ce.filename,fr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Cr.output("bloburl"))}}return fr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(jr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Hr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ce)+'"></iframe></body></html>',Wi=jr.open();if(Wi!==null&&(Wi.document.write(Hr),Wi.document.title=Ce.filename),Wi||typeof safari>"u")return Wi;break;case"datauri":case"dataurl":return jr.document.location.href=this.output("datauristring",Ce);default:return null}}),ds=function(z){return Array.isArray(ms)===!0&&ms.indexOf(z)>-1};switch(r){case"pt":ot=1;break;case"mm":ot=72/25.4;break;case"cm":ot=72/2.54;break;case"in":ot=72;break;case"px":ot=ds("px_scaling")==1?.75:96/72;break;case"pc":case"em":ot=12;break;case"ex":ot=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ot=r}var Ei=null;We(),X();var Dc=function(z){return h!==null?Ei.encryptor(z,0):function(Ce){return Ce}},Au=m.__private__.getPageInfo=m.getPageInfo=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Kn[z].objId,pageNumber:z,pageContext:Kn[z]}},Pr=m.__private__.getPageInfoByObjId=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ce in Kn)if(Kn[Ce].objId===z)break;return Au(Ce)},Dr=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Kn[ve].objId,pageNumber:ve,pageContext:Kn[ve]}};m.addPage=function(){return Hs.apply(this,arguments),this},m.setPage=function(){return ha.apply(this,arguments),Z.call(this,we[ve]),this},m.insertPage=function(z){return this.addPage(),this.movePage(ve,z),this},m.movePage=function(z,Ce){var nt,mt;if(z>Ce){nt=we[z],mt=Kn[z];for(var Ot=z;Ot>Ce;Ot--)we[Ot]=we[Ot-1],Kn[Ot]=Kn[Ot-1];we[Ce]=nt,Kn[Ce]=mt,this.setPage(Ce)}else if(z<Ce){nt=we[z],mt=Kn[z];for(var Kt=z;Kt<Ce;Kt++)we[Kt]=we[Kt+1],Kn[Kt]=Kn[Kt+1];we[Ce]=nt,Kn[Ce]=mt,this.setPage(Ce)}return this},m.deletePage=function(){return Pa.apply(this,arguments),this},m.__private__.text=m.text=function(z,Ce,nt,mt,Ot){var Kt,vn,zn,Gn,fr,Cr,Hr,Wi,gi,xi=(mt=mt||{}).scope||this;if(typeof z=="number"&&typeof Ce=="number"&&(typeof nt=="string"||Array.isArray(nt))){var ws=nt;nt=Ce,Ce=z,z=ws}if(arguments[3]instanceof Xn?(O("The transform parameter of text() with a Matrix value"),gi=Ot):(zn=arguments[4],Gn=arguments[5],gs(Hr=arguments[3])==="object"&&Hr!==null||(typeof zn=="string"&&(Gn=zn,zn=null),typeof Hr=="string"&&(Gn=Hr,Hr=null),typeof Hr=="number"&&(zn=Hr,Hr=null),mt={flags:Hr,angle:zn,align:Gn})),isNaN(Ce)||isNaN(nt)||z==null)throw new Error("Invalid arguments passed to jsPDF.text");if(z.length===0)return xi;var Ms="",Xo=!1,Gr=typeof mt.lineHeightFactor=="number"?mt.lineHeightFactor:cu,ro=xi.internal.scaleFactor;function $l(Si){return Si=Si.split("	").join(Array(mt.TabLen||9).join(" ")),di(Si,Hr)}function yo(Si){for(var Di,xs=Si.concat(),Vi=[],ea=xs.length;ea--;)typeof(Di=xs.shift())=="string"?Vi.push(Di):Array.isArray(Si)&&(Di.length===1||Di[1]===void 0&&Di[2]===void 0)?Vi.push(Di[0]):Vi.push([Di[0],Di[1],Di[2]]);return Vi}function Ou(Si,Di){var xs;if(typeof Si=="string")xs=Di(Si)[0];else if(Array.isArray(Si)){for(var Vi,ea,Oo=Si.concat(),ia=[],nc=Oo.length;nc--;)typeof(Vi=Oo.shift())=="string"?ia.push(Di(Vi)[0]):Array.isArray(Vi)&&typeof Vi[0]=="string"&&(ea=Di(Vi[0],Vi[1],Vi[2]),ia.push([ea[0],ea[1],ea[2]]));xs=ia}return xs}var ka=!1,tc=!0;if(typeof z=="string")ka=!0;else if(Array.isArray(z)){var yl=z.concat();vn=[];for(var _l,ks=yl.length;ks--;)(typeof(_l=yl.shift())!="string"||Array.isArray(_l)&&typeof _l[0]!="string")&&(tc=!1);ka=tc}if(ka===!1)throw new Error('Type of text must be string or Array. "'+z+'" is not recognized.');typeof z=="string"&&(z=z.match(/[\r?\n]/)?z.split(/\r\n|\r|\n/g):[z]);var Aa=Se/xi.internal.scaleFactor,Jo=Aa*(Gr-1);switch(mt.baseline){case"bottom":nt-=Jo;break;case"top":nt+=Aa-Jo;break;case"hanging":nt+=Aa-2*Jo;break;case"middle":nt+=Aa/2-Jo}if((Cr=mt.maxWidth||0)>0&&(typeof z=="string"?z=xi.splitTextToSize(z,Cr):Object.prototype.toString.call(z)==="[object Array]"&&(z=z.reduce(function(Si,Di){return Si.concat(xi.splitTextToSize(Di,Cr))},[]))),Kt={text:z,x:Ce,y:nt,options:mt,mutex:{pdfEscape:di,activeFontKey:ut,fonts:Sn,activeFontSize:Se}},Rr.publish("preProcessText",Kt),z=Kt.text,zn=(mt=Kt.options).angle,!(gi instanceof Xn)&&zn&&typeof zn=="number"){zn*=Math.PI/180,mt.rotationDirection===0&&(zn=-zn),R===A.ADVANCED&&(zn=-zn);var Io=Math.cos(zn),Ul=Math.sin(zn);gi=new Xn(Io,Ul,-Ul,Io,0,0)}else zn&&zn instanceof Xn&&(gi=zn);R!==A.ADVANCED||gi||(gi=Et),(fr=mt.charSpace||fu)!==void 0&&(Ms+=ge(N(fr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Wi=mt.horizontalScale)!==void 0&&(Ms+=ge(100*Wi)+` Tz
`),mt.lang;var io=-1,_o=mt.renderingMode!==void 0?mt.renderingMode:mt.stroke,bo=xi.internal.getCurrentPageInfo().pageContext;switch(_o){case 0:case!1:case"fill":io=0;break;case 1:case!0:case"stroke":io=1;break;case 2:case"fillThenStroke":io=2;break;case 3:case"invisible":io=3;break;case 4:case"fillAndAddForClipping":io=4;break;case 5:case"strokeAndAddPathForClipping":io=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":io=6;break;case 7:case"addToPathForClipping":io=7}var Nc=bo.usedRenderingMode!==void 0?bo.usedRenderingMode:-1;io!==-1?Ms+=io+` Tr
`:Nc!==-1&&(Ms+=`0 Tr
`),io!==-1&&(bo.usedRenderingMode=io),Gn=mt.align||"left";var Fs,Wa=Se*Gr,so=xi.internal.pageSize.getWidth(),oo=Sn[ut];fr=mt.charSpace||fu,Cr=mt.maxWidth||0,Hr=Object.assign({autoencode:!0,noBOM:!0},mt.flags);var qa=[],Ya=function(Si){return xi.getStringUnitWidth(Si,{font:oo,charSpace:fr,fontSize:Se,doKerning:!1})*Se/ro};if(Object.prototype.toString.call(z)==="[object Array]"){var ao;vn=yo(z),Gn!=="left"&&(Fs=vn.map(Ya));var Ws,Ta=0;if(Gn==="right"){Ce-=Fs[0],z=[],ks=vn.length;for(var Qo=0;Qo<ks;Qo++)Qo===0?(Ws=gr(Ce),ao=_s(nt)):(Ws=N(Ta-Fs[Qo]),ao=-Wa),z.push([vn[Qo],Ws,ao]),Ta=Fs[Qo]}else if(Gn==="center"){Ce-=Fs[0]/2,z=[],ks=vn.length;for(var lo=0;lo<ks;lo++)lo===0?(Ws=gr(Ce),ao=_s(nt)):(Ws=N((Ta-Fs[lo])/2),ao=-Wa),z.push([vn[lo],Ws,ao]),Ta=Fs[lo]}else if(Gn==="left"){z=[],ks=vn.length;for(var kt=0;kt<ks;kt++)z.push(vn[kt])}else if(Gn==="justify"&&oo.encoding==="Identity-H"){z=[],ks=vn.length,Cr=Cr!==0?Cr:so;for(var nn=0,$t=0;$t<ks;$t++)if(ao=$t===0?_s(nt):-Wa,Ws=$t===0?gr(Ce):nn,$t<ks-1){var Fn=N((Cr-Fs[$t])/(vn[$t].split(" ").length-1)),or=vn[$t].split(" ");z.push([or[0]+" ",Ws,ao]),nn=0;for(var Mr=1;Mr<or.length;Mr++){var Ji=(Ya(or[Mr-1]+" "+or[Mr])-Ya(or[Mr]))*ro+Fn;Mr==or.length-1?z.push([or[Mr],Ji,0]):z.push([or[Mr]+" ",Ji,0]),nn-=Ji}}else z.push([vn[$t],Ws,ao]);z.push(["",nn,0])}else{if(Gn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(z=[],ks=vn.length,Cr=Cr!==0?Cr:so,$t=0;$t<ks;$t++)ao=$t===0?_s(nt):-Wa,Ws=$t===0?gr(Ce):0,$t<ks-1?qa.push(ge(N((Cr-Fs[$t])/(vn[$t].split(" ").length-1)))):qa.push(0),z.push([vn[$t],Ws,ao])}}var Li=typeof mt.R2L=="boolean"?mt.R2L:st;Li===!0&&(z=Ou(z,function(Si,Di,xs){return[Si.split("").reverse().join(""),Di,xs]})),Kt={text:z,x:Ce,y:nt,options:mt,mutex:{pdfEscape:di,activeFontKey:ut,fonts:Sn,activeFontSize:Se}},Rr.publish("postProcessText",Kt),z=Kt.text,Xo=Kt.mutex.isHex||!1;var mu=Sn[ut].encoding;mu!=="WinAnsiEncoding"&&mu!=="StandardEncoding"||(z=Ou(z,function(Si,Di,xs){return[$l(Si),Di,xs]})),vn=yo(z),z=[];for(var wo,Qi,Da,Ka=0,Ia=1,Oa=Array.isArray(vn[0])?Ia:Ka,Na="",Qr=function(Si,Di,xs){var Vi="";return xs instanceof Xn?(xs=typeof mt.angle=="number"?ss(xs,new Xn(1,0,0,1,Si,Di)):ss(new Xn(1,0,0,1,Si,Di),xs),R===A.ADVANCED&&(xs=ss(new Xn(1,0,0,-1,0,0),xs)),Vi=xs.join(" ")+` Tm
`):Vi=ge(Si)+" "+ge(Di)+` Td
`,Vi},va=0;va<vn.length;va++){switch(Na="",Oa){case Ia:Da=(Xo?"<":"(")+vn[va][0]+(Xo?">":")"),wo=parseFloat(vn[va][1]),Qi=parseFloat(vn[va][2]);break;case Ka:Da=(Xo?"<":"(")+vn[va]+(Xo?">":")"),wo=gr(Ce),Qi=_s(nt)}qa!==void 0&&qa[va]!==void 0&&(Na=qa[va]+` Tw
`),va===0?z.push(Na+Qr(wo,Qi,gi)+Da):Oa===Ka?z.push(Na+Da):Oa===Ia&&z.push(Na+Qr(wo,Qi,gi)+Da)}z=Oa===Ka?z.join(` Tj
T* `):z.join(` Tj
`),z+=` Tj
`;var qs=`BT
/`;return qs+=ut+" "+Se+` Tf
`,qs+=ge(Se*Gr)+` TL
`,qs+=Ma+`
`,qs+=Ms,qs+=z,U(qs+="ET"),v[ut]=!0,xi};var fa=m.__private__.clip=m.clip=function(z){return U(z==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return fa("evenodd")},m.__private__.discardPath=m.discardPath=function(){return U("n"),this};var ai=m.__private__.isValidStyle=function(z){var Ce=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(z)!==-1&&(Ce=!0),Ce};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(z){return ai(z)&&(u=z),this};var Qu=m.__private__.getStyle=m.getStyle=function(z){var Ce=u;switch(z){case"D":case"S":Ce="S";break;case"F":Ce="f";break;case"FD":case"DF":Ce="B";break;case"f":case"f*":case"B":case"B*":Ce=z}return Ce},Nl=m.close=function(){return U("h"),this};m.stroke=function(){return U("S"),this},m.fill=function(z){return Rl("f",z),this},m.fillEvenOdd=function(z){return Rl("f*",z),this},m.fillStroke=function(z){return Rl("B",z),this},m.fillStrokeEvenOdd=function(z){return Rl("B*",z),this};var Rl=function(z,Ce){gs(Ce)==="object"?ec(Ce,z):U(z)},pa=function(z){z===null||R===A.ADVANCED&&z===void 0||(z=Qu(z),U(z))};function ml(z,Ce,nt,mt,Ot){var Kt=new fp(Ce||this.boundingBox,nt||this.xStep,mt||this.yStep,this.gState,Ot||this.matrix);Kt.stream=this.stream;var vn=z+"$$"+this.cloneIndex+++"$$";return at(vn,Kt),Kt}var ec=function(z,Ce){var nt=cn[z.key],mt=Cn[nt];if(mt instanceof af)U("q"),U(uu(Ce)),mt.gState&&m.setGState(mt.gState),U(z.matrix.toString()+" cm"),U("/"+nt+" sh"),U("Q");else if(mt instanceof fp){var Ot=new Xn(1,0,0,-1,0,Ga());z.matrix&&(Ot=Ot.multiply(z.matrix||Et),nt=ml.call(mt,z.key,z.boundingBox,z.xStep,z.yStep,Ot).id),U("q"),U("/Pattern cs"),U("/"+nt+" scn"),mt.gState&&m.setGState(mt.gState),U(Ce),U("Q")}},uu=function(z){switch(z){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ar=m.moveTo=function(z,Ce){return U(ge(N(z))+" "+ge($(Ce))+" m"),this},Yr=m.lineTo=function(z,Ce){return U(ge(N(z))+" "+ge($(Ce))+" l"),this},vl=m.curveTo=function(z,Ce,nt,mt,Ot,Kt){return U([ge(N(z)),ge($(Ce)),ge(N(nt)),ge($(mt)),ge(N(Ot)),ge($(Kt)),"c"].join(" ")),this};m.__private__.line=m.line=function(z,Ce,nt,mt,Ot){if(isNaN(z)||isNaN(Ce)||isNaN(nt)||isNaN(mt)||!ai(Ot))throw new Error("Invalid arguments passed to jsPDF.line");return R===A.COMPAT?this.lines([[nt-z,mt-Ce]],z,Ce,[1,1],Ot||"S"):this.lines([[nt-z,mt-Ce]],z,Ce,[1,1]).stroke()},m.__private__.lines=m.lines=function(z,Ce,nt,mt,Ot,Kt){var vn,zn,Gn,fr,Cr,Hr,Wi,gi,xi,ws,Ms,Xo;if(typeof z=="number"&&(Xo=nt,nt=Ce,Ce=z,z=Xo),mt=mt||[1,1],Kt=Kt||!1,isNaN(Ce)||isNaN(nt)||!Array.isArray(z)||!Array.isArray(mt)||!ai(Ot)||typeof Kt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ar(Ce,nt),vn=mt[0],zn=mt[1],fr=z.length,ws=Ce,Ms=nt,Gn=0;Gn<fr;Gn++)(Cr=z[Gn]).length===2?(ws=Cr[0]*vn+ws,Ms=Cr[1]*zn+Ms,Yr(ws,Ms)):(Hr=Cr[0]*vn+ws,Wi=Cr[1]*zn+Ms,gi=Cr[2]*vn+ws,xi=Cr[3]*zn+Ms,ws=Cr[4]*vn+ws,Ms=Cr[5]*zn+Ms,vl(Hr,Wi,gi,xi,ws,Ms));return Kt&&Nl(),pa(Ot),this},m.path=function(z){for(var Ce=0;Ce<z.length;Ce++){var nt=z[Ce],mt=nt.c;switch(nt.op){case"m":Ar(mt[0],mt[1]);break;case"l":Yr(mt[0],mt[1]);break;case"c":vl.apply(this,mt);break;case"h":Nl()}}return this},m.__private__.rect=m.rect=function(z,Ce,nt,mt,Ot){if(isNaN(z)||isNaN(Ce)||isNaN(nt)||isNaN(mt)||!ai(Ot))throw new Error("Invalid arguments passed to jsPDF.rect");return R===A.COMPAT&&(mt=-mt),U([ge(N(z)),ge($(Ce)),ge(N(nt)),ge(N(mt)),"re"].join(" ")),pa(Ot),this},m.__private__.triangle=m.triangle=function(z,Ce,nt,mt,Ot,Kt,vn){if(isNaN(z)||isNaN(Ce)||isNaN(nt)||isNaN(mt)||isNaN(Ot)||isNaN(Kt)||!ai(vn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[nt-z,mt-Ce],[Ot-nt,Kt-mt],[z-Ot,Ce-Kt]],z,Ce,[1,1],vn,!0),this},m.__private__.roundedRect=m.roundedRect=function(z,Ce,nt,mt,Ot,Kt,vn){if(isNaN(z)||isNaN(Ce)||isNaN(nt)||isNaN(mt)||isNaN(Ot)||isNaN(Kt)||!ai(vn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zn=4/3*(Math.SQRT2-1);return Ot=Math.min(Ot,.5*nt),Kt=Math.min(Kt,.5*mt),this.lines([[nt-2*Ot,0],[Ot*zn,0,Ot,Kt-Kt*zn,Ot,Kt],[0,mt-2*Kt],[0,Kt*zn,-Ot*zn,Kt,-Ot,Kt],[2*Ot-nt,0],[-Ot*zn,0,-Ot,-Kt*zn,-Ot,-Kt],[0,2*Kt-mt],[0,-Kt*zn,Ot*zn,-Kt,Ot,-Kt]],z+Ot,Ce,[1,1],vn,!0),this},m.__private__.ellipse=m.ellipse=function(z,Ce,nt,mt,Ot){if(isNaN(z)||isNaN(Ce)||isNaN(nt)||isNaN(mt)||!ai(Ot))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Kt=4/3*(Math.SQRT2-1)*nt,vn=4/3*(Math.SQRT2-1)*mt;return Ar(z+nt,Ce),vl(z+nt,Ce-vn,z+Kt,Ce-mt,z,Ce-mt),vl(z-Kt,Ce-mt,z-nt,Ce-vn,z-nt,Ce),vl(z-nt,Ce+vn,z-Kt,Ce+mt,z,Ce+mt),vl(z+Kt,Ce+mt,z+nt,Ce+vn,z+nt,Ce),pa(Ot),this},m.__private__.circle=m.circle=function(z,Ce,nt,mt){if(isNaN(z)||isNaN(Ce)||isNaN(nt)||!ai(mt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(z,Ce,nt,nt,mt)},m.setFont=function(z,Ce,nt){return nt&&(Ce=pe(Ce,nt)),ut=Re(z,Ce,{disableWarning:!1}),this};var Ic=m.__private__.getFont=m.getFont=function(){return Sn[Re.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var z,Ce,nt={};for(z in An)if(An.hasOwnProperty(z))for(Ce in nt[z]=[],An[z])An[z].hasOwnProperty(Ce)&&nt[z].push(Ce);return nt},m.addFont=function(z,Ce,nt,mt,Ot){var Kt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Kt.indexOf(arguments[3])!==-1?Ot=arguments[3]:arguments[3]&&Kt.indexOf(arguments[3])==-1&&(nt=pe(nt,mt)),Ot=Ot||"Identity-H",Ko.call(this,z,Ce,nt,Ot)};var cu,Tu=n.lineWidth||.200025,Bl=m.__private__.getLineWidth=m.getLineWidth=function(){return Tu},du=m.__private__.setLineWidth=m.setLineWidth=function(z){return Tu=z,U(ge(N(z))+" w"),this};m.__private__.setLineDash=Fr.API.setLineDash=Fr.API.setLineDashPattern=function(z,Ce){if(z=z||[],Ce=Ce||0,isNaN(Ce)||!Array.isArray(z))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return z=z.map(function(nt){return ge(N(nt))}).join(" "),Ce=ge(N(Ce)),U("["+z+"] "+Ce+" d"),this};var Du=m.__private__.getLineHeight=m.getLineHeight=function(){return Se*cu};m.__private__.getLineHeight=m.getLineHeight=function(){return Se*cu};var Jr=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(z){return typeof(z=z||1.15)=="number"&&(cu=z),this},ys=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return cu};Jr(n.lineHeight);var gr=m.__private__.getHorizontalCoordinate=function(z){return N(z)},_s=m.__private__.getVerticalCoordinate=function(z){return R===A.ADVANCED?z:Kn[ve].mediaBox.topRightY-Kn[ve].mediaBox.bottomLeftY-N(z)},Fl=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(z){return ge(gr(z))},Ha=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(z){return ge(_s(z))},Xi=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ct(Xi)},m.__private__.setStrokeColor=m.setDrawColor=function(z,Ce,nt,mt){return Xi=mn({ch1:z,ch2:Ce,ch3:nt,ch4:mt,pdfColorType:"draw",precision:2}),U(Xi),this};var Iu=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ct(Iu)},m.__private__.setFillColor=m.setFillColor=function(z,Ce,nt,mt){return Iu=mn({ch1:z,ch2:Ce,ch3:nt,ch4:mt,pdfColorType:"fill",precision:2}),U(Iu),this};var Ma=n.textColor||"0 g",hu=m.__private__.getTextColor=m.getTextColor=function(){return Ct(Ma)};m.__private__.setTextColor=m.setTextColor=function(z,Ce,nt,mt){return Ma=mn({ch1:z,ch2:Ce,ch3:nt,ch4:mt,pdfColorType:"text",precision:3}),this};var fu=n.charSpace,ra=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(fu||0)};m.__private__.setCharSpace=m.setCharSpace=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return fu=z,this};var pu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(z){var Ce=m.CapJoinStyles[z];if(Ce===void 0)throw new Error("Line cap style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pu=Ce,U(Ce+" J"),this};var bi=0;m.__private__.setLineJoin=m.setLineJoin=function(z){var Ce=m.CapJoinStyles[z];if(Ce===void 0)throw new Error("Line join style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bi=Ce,U(Ce+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(z){if(z=z||0,isNaN(z))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return U(ge(N(z))+" M"),this},m.GState=Xv,m.setGState=function(z){(z=typeof z=="string"?bn[ir[z]]:Oc(null,z)).equals(hr)||(U("/"+z.id+" gs"),hr=z)};var Oc=function(z,Ce){if(!z||!ir[z]){var nt=!1;for(var mt in bn)if(bn.hasOwnProperty(mt)&&bn[mt].equals(Ce)){nt=!0;break}if(nt)Ce=bn[mt];else{var Ot="GS"+(Object.keys(bn).length+1).toString(10);bn[Ot]=Ce,Ce.id=Ot}return z&&(ir[z]=Ce.id),Rr.publish("addGState",Ce),Ce}};m.addGState=function(z,Ce){return Oc(z,Ce),this},m.saveGraphicsState=function(){return U("q"),Zn.push({key:ut,size:Se,color:Ma}),this},m.restoreGraphicsState=function(){U("Q");var z=Zn.pop();return ut=z.key,Se=z.size,Ma=z.color,hr=null,this},m.setCurrentTransformationMatrix=function(z){return U(z.toString()+" cm"),this},m.comment=function(z){return U("#"+z),this};var Gs=function(z,Ce){var nt=z||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return nt},set:function(Kt){isNaN(Kt)||(nt=parseFloat(Kt))}});var mt=Ce||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return mt},set:function(Kt){isNaN(Kt)||(mt=parseFloat(Kt))}});var Ot="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ot},set:function(Kt){Ot=Kt.toString()}}),this},ga=function(z,Ce,nt,mt){Gs.call(this,z,Ce),this.type="rect";var Ot=nt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ot},set:function(vn){isNaN(vn)||(Ot=parseFloat(vn))}});var Kt=mt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Kt},set:function(vn){isNaN(vn)||(Kt=parseFloat(vn))}}),this},gu=function(){this.page=wr,this.currentPage=ve,this.pages=we.slice(0),this.pagesContext=Kn.slice(0),this.x=It,this.y=Jt,this.matrix=xn,this.width=wi(ve),this.height=Ga(ve),this.outputDestination=ue,this.id="",this.objectNumber=-1};gu.prototype.restore=function(){wr=this.page,ve=this.currentPage,Kn=this.pagesContext,we=this.pages,It=this.x,Jt=this.y,xn=this.matrix,Zo(ve,this.width),bs(ve,this.height),ue=this.outputDestination};var ma=function(z,Ce,nt,mt,Ot){is.push(new gu),wr=ve=0,we=[],It=z,Jt=Ce,xn=Ot,oi([nt,mt])},jl=function(z){if(Vs[z])is.pop().restore();else{var Ce=new gu,nt="Xo"+(Object.keys(Bi).length+1).toString(10);Ce.id=nt,Vs[z]=nt,Bi[nt]=Ce,Rr.publish("addFormObject",Ce),is.pop().restore()}};for(var zl in m.beginFormObject=function(z,Ce,nt,mt,Ot){return ma(z,Ce,nt,mt,Ot),this},m.endFormObject=function(z){return jl(z),this},m.doFormObject=function(z,Ce){var nt=Bi[Vs[z]];return U("q"),U(Ce.toString()+" cm"),U("/"+nt.id+" Do"),U("Q"),this},m.getFormObject=function(z){var Ce=Bi[Vs[z]];return{x:Ce.x,y:Ce.y,width:Ce.width,height:Ce.height,matrix:Ce.matrix}},m.save=function(z,Ce){return z=z||"generated.pdf",(Ce=Ce||{}).returnPromise=Ce.returnPromise||!1,Ce.returnPromise===!1?(tf(Ti(xr()),z),typeof tf.unload=="function"&&jr.setTimeout&&setTimeout(tf.unload,911),this):new Promise(function(nt,mt){try{var Ot=tf(Ti(xr()),z);typeof tf.unload=="function"&&jr.setTimeout&&setTimeout(tf.unload,911),nt(Ot)}catch(Kt){mt(Kt.message)}})},Fr.API)Fr.API.hasOwnProperty(zl)&&(zl==="events"&&Fr.API.events.length?function(z,Ce){var nt,mt,Ot;for(Ot=Ce.length-1;Ot!==-1;Ot--)nt=Ce[Ot][0],mt=Ce[Ot][1],z.subscribe.apply(z,[nt].concat(typeof mt=="function"?[mt]:mt))}(Rr,Fr.API.events):m[zl]=Fr.API[zl]);var wi=m.getPageWidth=function(z){return(Kn[z=z||ve].mediaBox.topRightX-Kn[z].mediaBox.bottomLeftX)/ot},Zo=m.setPageWidth=function(z,Ce){Kn[z].mediaBox.topRightX=Ce*ot+Kn[z].mediaBox.bottomLeftX},Ga=m.getPageHeight=function(z){return(Kn[z=z||ve].mediaBox.topRightY-Kn[z].mediaBox.bottomLeftY)/ot},bs=m.setPageHeight=function(z,Ce){Kn[z].mediaBox.topRightY=Ce*ot+Kn[z].mediaBox.bottomLeftY};return m.internal={pdfEscape:di,getStyle:Qu,getFont:Ic,getFontSize:je,getCharSpace:ra,getTextColor:hu,getLineHeight:Du,getLineHeightFactor:ys,getLineWidth:Bl,write:xe,getHorizontalCoordinate:gr,getVerticalCoordinate:_s,getCoordinateString:Fl,getVerticalCoordinateString:Ha,collections:{},newObject:Bt,newAdditionalObject:Pn,newObjectDeferred:Yt,newObjectDeferredBegin:In,getFilters:Hn,putStream:en,events:Rr,scaleFactor:ot,pageSize:{getWidth:function(){return wi(ve)},setWidth:function(z){Zo(ve,z)},getHeight:function(){return Ga(ve)},setHeight:function(z){bs(ve,z)}},encryptionOptions:h,encryption:Ei,getEncryptor:Dc,output:Ui,getNumberOfPages:Zi,pages:we,out:U,f2:Y,f3:V,getPageInfo:Au,getPageInfoByObjId:Pr,getCurrentPageInfo:Dr,getPDFVersion:E,Point:Gs,Rectangle:ga,Matrix:Xn,hasHotfix:ds},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return wi(ve)},set:function(z){Zo(ve,z)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ga(ve)},set:function(z){bs(ve,z)},enumerable:!0,configurable:!0}),_r.call(m,Ge),ut="F1",Hs(i,t),Rr.publish("initialized"),m}up.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},up.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},up.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},up.prototype.processOwnerPassword=function(n,e){return Nb(Ob(e).substr(0,5),n)},up.prototype.encryptor=function(n,e){var t=Ob(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Nb(t,r)}},Xv.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||gs(n)!==gs(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Fr.API={events:[]},Fr.version="2.5.2";var Eo=Fr.API,X2=1,Pf=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zf=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Zr=function(n){return n.toFixed(2)},nh=function(n){return n.toFixed(5)};Eo.__acroform__={};var lu=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},N5=function(n){return n*X2},Hc=function(n){var e=new cP,t=ar.internal.getHeight(n)||0,r=ar.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Zr(r)),Number(Zr(t))],e},VH=Eo.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},HH=Eo.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},GH=Eo.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Uo=Eo.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return GH(n,e-1)},Vo=Eo.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return VH(n,e-1)},Ho=Eo.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return HH(n,e-1)},WH=Eo.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=t(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Zr(l.lowerLeft_X)),Number(Zr(l.lowerLeft_Y)),Number(Zr(l.upperRight_X)),Number(Zr(l.upperRight_Y))]},qH=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=Rb(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Zr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Hc(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},Rb=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(V){return V.split(`
`)}):i.map(function(V){return[V]});var s=t,o=ar.internal.getHeight(n)||0;o=o<0?-o:o;var a=ar.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(V,N,q){if(V+1<i.length){var $=N+" "+i[V+1][0];return E0($,n,q).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,h,p=E0("3",n,s).height,v=n.multiline?o-s:(o-p)/2,m=v+=2,S=0,E=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+E0(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var T="",A=0,R=0;R<i.length;R++)if(i.hasOwnProperty(R)){var G=!1;if(i[R].length!==1&&k!==i[R].length-1){if((p+2)*(A+2)+2>o)continue e;T+=i[R][k],G=!0,E=R,R--}else{T=(T+=i[R][k]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var ee=parseInt(R),pe=l(ee,T,s),ge=R>=i.length-1;if(pe&&!ge){T+=" ",k=0;continue}if(pe||ge){if(ge)E=ee;else if(n.multiline&&(p+2)*(A+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(A+2)+2>o)continue e;E=ee}}for(var O="",j=S;j<=E;j++){var Y=i[j];if(n.multiline){if(j===E){O+=Y[k]+" ",k=(k+1)%Y.length;continue}if(j===S){O+=Y[Y.length-1]+" ";continue}}O+=Y[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,h=E0(O,n,s).width,n.textAlign){case"right":u=a-h-2;break;case"center":u=(a-h)/2;break;case"left":default:u=2}e+=Zr(u)+" "+Zr(m)+` Td
`,e+="("+Pf(O)+`) Tj
`,e+=-Zr(u)+` 0 Td
`,m=-(s+2),h=0,S=G?E:E+1,A++,T=""}break}return r.text=e,r.fontSize=s,r},E0=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},YH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},KH=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},ZH=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),gs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},XH=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ac.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(YH)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");X2=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new dP,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&KH(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=WH(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ar.createDefaultAppearanceStream(a),gs(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=qH(a);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var m=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var S=m[o];typeof S=="function"&&(S=S.call(i,a)),p+="/"+o+" "+S+" ",i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S)}}else typeof(S=m)=="function"&&(S=S.call(i,a)),p+="/"+o+" "+S,i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&ZH(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},uP=Eo.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),gs(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Pf(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},d_=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Pf(r(n))+")"},ed=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ed.prototype.toString=function(){return this.objId+" 0 R"},ed.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ed.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:uP(i,this.objId,this.scope)}):i instanceof ed?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var cP=function(){ed.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};lu(cP,ed);var dP=function(){ed.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Pf(t(n))+")"}},set:function(t){n=t}})};lu(dP,ed);var Ac=function n(){ed.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Uo(e,3)},set:function(T){T?this.F=Vo(e,3):this.F=Ho(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');t=T}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(T){r=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(T){r[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(T){r[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(T){r[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(T){r[3]=T}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Jv)return;s="FieldObject"+n.FieldNum++}var T=function(A){return A};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+Pf(T(s))+")"},set:function(T){s=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(T){s=T}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(T){o=T}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(T){a=T}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(T){l=T}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/X2:u},set:function(T){u=T}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(T){h=T}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Jv||this instanceof gf))return d_(p,this.objId,this.scope)},set:function(T){T=T.toString(),p=T}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof La?v:d_(v,this.objId,this.scope)},set:function(T){T=T.toString(),v=this instanceof La?T:T.substr(0,1)==="("?Zf(T.substr(1,T.length-2)):Zf(T)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof La?Zf(v.substr(1,v.length-1)):v},set:function(T){T=T.toString(),v=this instanceof La?"/"+T:T}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof La?m:d_(m,this.objId,this.scope)},set:function(T){T=T.toString(),m=this instanceof La?T:T.substr(0,1)==="("?Zf(T.substr(1,T.length-2)):Zf(T)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof La?Zf(m.substr(1,m.length-1)):m},set:function(T){T=T.toString(),m=this instanceof La?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var S,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(T){T=!!T,E=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(S)return S},set:function(T){S=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,1)},set:function(T){T?this.Ff=Vo(this.Ff,1):this.Ff=Ho(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,2)},set:function(T){T?this.Ff=Vo(this.Ff,2):this.Ff=Ho(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,3)},set:function(T){T?this.Ff=Vo(this.Ff,3):this.Ff=Ho(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');k=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(k){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};lu(Ac,ed);var wp=function(){Ac.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return uP(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,18)},set:function(t){t?this.Ff=Vo(this.Ff,18):this.Ff=Ho(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Vo(this.Ff,19):this.Ff=Ho(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,20)},set:function(t){t?(this.Ff=Vo(this.Ff,20),e.sort()):this.Ff=Ho(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,22)},set:function(t){t?this.Ff=Vo(this.Ff,22):this.Ff=Ho(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,23)},set:function(t){t?this.Ff=Vo(this.Ff,23):this.Ff=Ho(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,27)},set:function(t){t?this.Ff=Vo(this.Ff,27):this.Ff=Ho(this.Ff,27)}}),this.hasAppearanceStream=!1};lu(wp,Ac);var xp=function(){wp.call(this),this.fontName="helvetica",this.combo=!1};lu(xp,wp);var Lp=function(){xp.call(this),this.combo=!0};lu(Lp,xp);var lv=function(){Lp.call(this),this.edit=!0};lu(lv,Lp);var La=function(){Ac.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,15)},set:function(t){t?this.Ff=Vo(this.Ff,15):this.Ff=Ho(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,16)},set:function(t){t?this.Ff=Vo(this.Ff,16):this.Ff=Ho(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,17)},set:function(t){t?this.Ff=Vo(this.Ff,17):this.Ff=Ho(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,26)},set:function(t){t?this.Ff=Vo(this.Ff,26):this.Ff=Ho(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Pf(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){gs(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};lu(La,Ac);var uv=function(){La.call(this),this.pushButton=!0};lu(uv,La);var Sp=function(){La.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};lu(Sp,La);var Jv=function(){var n,e;Ac.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Pf(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){gs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ar.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};lu(Jv,Ac),Sp.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Sp.prototype.createOption=function(n){var e=new Jv;return e.Parent=this,e.optionName=n,this.Kids.push(e),JH.call(this.scope,e),e};var cv=function(){La.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ar.CheckBox.createAppearanceStream()};lu(cv,La);var gf=function(){Ac.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,13)},set:function(e){e?this.Ff=Vo(this.Ff,13):this.Ff=Ho(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,21)},set:function(e){e?this.Ff=Vo(this.Ff,21):this.Ff=Ho(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,23)},set:function(e){e?this.Ff=Vo(this.Ff,23):this.Ff=Ho(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,24)},set:function(e){e?this.Ff=Vo(this.Ff,24):this.Ff=Ho(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,25)},set:function(e){e?this.Ff=Vo(this.Ff,25):this.Ff=Ho(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,26)},set:function(e){e?this.Ff=Vo(this.Ff,26):this.Ff=Ho(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};lu(gf,Ac);var dv=function(){gf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,14)},set:function(n){n?this.Ff=Vo(this.Ff,14):this.Ff=Ho(this.Ff,14)}}),this.password=!0};lu(dv,gf);var ar={CheckBox:{createAppearanceStream:function(){return{N:{On:ar.CheckBox.YesNormal},D:{On:ar.CheckBox.YesPushDown,Off:ar.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Hc(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=Rb(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Zr(ar.internal.getWidth(n))+" "+Zr(ar.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Zr(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Hc(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=ar.internal.getHeight(n),o=ar.internal.getWidth(n),a=Rb(n,n.caption);return i.push("1 g"),i.push("0 0 "+Zr(o)+" "+Zr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Zr(o-1)+" "+Zr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Zr(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Hc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Zr(ar.internal.getWidth(n))+" "+Zr(ar.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:ar.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=ar.RadioButton.Circle.YesNormal,e.D[n]=ar.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Hc(n);e.scope=n.scope;var t=[],r=ar.internal.getWidth(n)<=ar.internal.getHeight(n)?ar.internal.getWidth(n)/4:ar.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=ar.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+nh(ar.internal.getWidth(n)/2)+" "+nh(ar.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Hc(n);e.scope=n.scope;var t=[],r=ar.internal.getWidth(n)<=ar.internal.getHeight(n)?ar.internal.getWidth(n)/4:ar.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ar.internal.Bezier_C).toFixed(5)),o=Number((r*ar.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+nh(ar.internal.getWidth(n)/2)+" "+nh(ar.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+nh(ar.internal.getWidth(n)/2)+" "+nh(ar.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Hc(n);e.scope=n.scope;var t=[],r=ar.internal.getWidth(n)<=ar.internal.getHeight(n)?ar.internal.getWidth(n)/4:ar.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ar.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+nh(ar.internal.getWidth(n)/2)+" "+nh(ar.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:ar.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=ar.RadioButton.Cross.YesNormal,e.D[n]=ar.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Hc(n);e.scope=n.scope;var t=[],r=ar.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Zr(ar.internal.getWidth(n)-2)+" "+Zr(ar.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Zr(r.x1.x)+" "+Zr(r.x1.y)+" m"),t.push(Zr(r.x2.x)+" "+Zr(r.x2.y)+" l"),t.push(Zr(r.x4.x)+" "+Zr(r.x4.y)+" m"),t.push(Zr(r.x3.x)+" "+Zr(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Hc(n);e.scope=n.scope;var t=ar.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Zr(ar.internal.getWidth(n))+" "+Zr(ar.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Zr(ar.internal.getWidth(n)-2)+" "+Zr(ar.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Zr(t.x1.x)+" "+Zr(t.x1.y)+" m"),r.push(Zr(t.x2.x)+" "+Zr(t.x2.y)+" l"),r.push(Zr(t.x4.x)+" "+Zr(t.x4.y)+" m"),r.push(Zr(t.x3.x)+" "+Zr(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Hc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Zr(ar.internal.getWidth(n))+" "+Zr(ar.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};ar.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=ar.internal.getWidth(n),t=ar.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},ar.internal.getWidth=function(n){var e=0;return gs(n)==="object"&&(e=N5(n.Rect[2])),e},ar.internal.getHeight=function(n){var e=0;return gs(n)==="object"&&(e=N5(n.Rect[3])),e};var JH=Eo.addField=function(n){if(XH(this,n),!(n instanceof Ac))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Eo.AcroFormChoiceField=wp,Eo.AcroFormListBox=xp,Eo.AcroFormComboBox=Lp,Eo.AcroFormEditBox=lv,Eo.AcroFormButton=La,Eo.AcroFormPushButton=uv,Eo.AcroFormRadioButton=Sp,Eo.AcroFormCheckBox=cv,Eo.AcroFormTextField=gf,Eo.AcroFormPasswordField=dv,Eo.AcroFormAppearance=ar,Eo.AcroForm={ChoiceField:wp,ListBox:xp,ComboBox:Lp,EditBox:lv,Button:La,PushButton:uv,RadioButton:Sp,CheckBox:cv,TextField:gf,PasswordField:dv,Appearance:ar},Fr.AcroForm={ChoiceField:wp,ListBox:xp,ComboBox:Lp,EditBox:lv,Button:La,PushButton:uv,RadioButton:Sp,CheckBox:cv,TextField:gf,PasswordField:dv,Appearance:ar};Fr.AcroForm;function hP(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(V,N){var q,$,F,B,Q,X=e;if((N=N||e)==="RGBA"||V.data!==void 0&&V.data instanceof Uint8ClampedArray&&"height"in V&&"width"in V)return"RGBA";if(pe(V))for(Q in t)for(F=t[Q],q=0;q<F.length;q+=1){for(B=!0,$=0;$<F[q].length;$+=1)if(F[q][$]!==void 0&&F[q][$]!==V[$]){B=!1;break}if(B===!0){X=Q;break}}else for(Q in t)for(F=t[Q],q=0;q<F.length;q+=1){for(B=!0,$=0;$<F[q].length;$+=1)if(F[q][$]!==void 0&&F[q][$]!==V.charCodeAt($)){B=!1;break}if(B===!0){X=Q;break}}return X===e&&N!==e&&(X=N),X},i=function V(N){for(var q=this.internal.write,$=this.internal.putStream,F=(0,this.internal.getFilters)();F.indexOf("FlateEncode")!==-1;)F.splice(F.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var B=[];if(B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Image"}),B.push({key:"Width",value:N.width}),B.push({key:"Height",value:N.height}),N.colorSpace===k.INDEXED?B.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):(B.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===k.DEVICE_CMYK&&B.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),B.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&B.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var Q="",X=0,_e=N.transparency.length;X<_e;X++)Q+=N.transparency[X]+" "+N.transparency[X]+" ";B.push({key:"Mask",value:"["+Q+"]"})}N.sMask!==void 0&&B.push({key:"SMask",value:N.objectId+1+" 0 R"});var me=N.filter!==void 0?["/"+N.filter]:void 0;if($({data:N.data,additionalKeyValues:B,alreadyAppliedFilters:me,objectId:N.objectId}),q("endobj"),"sMask"in N&&N.sMask!==void 0){var We="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,ae={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:We,data:N.sMask};"filter"in N&&(ae.filter=N.filter),V.call(this,ae)}if(N.colorSpace===k.INDEXED){var ve=this.internal.newObject();$({data:O(new Uint8Array(N.palette)),objectId:ve}),q("endobj")}},s=function(){var V=this.internal.collections.addImage_images;for(var N in V)i.call(this,V[N])},o=function(){var V,N=this.internal.collections.addImage_images,q=this.internal.write;for(var $ in N)q("/I"+(V=N[$]).index,V.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var V=this.internal.collections.addImage_images;return a.call(this),V},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(V){return typeof n["process"+V.toUpperCase()]=="function"},p=function(V){return gs(V)==="object"&&V.nodeType===1},v=function(V,N){if(V.nodeName==="IMG"&&V.hasAttribute("src")){var q=""+V.getAttribute("src");if(q.indexOf("data:image/")===0)return Yg(unescape(q).split("base64,").pop());var $=n.loadFile(q,!0);if($!==void 0)return $}if(V.nodeName==="CANVAS"){if(V.width===0||V.height===0)throw new Error("Given canvas must have data. Canvas width: "+V.width+", height: "+V.height);var F;switch(N){case"PNG":F="image/png";break;case"WEBP":F="image/webp";break;case"JPEG":case"JPG":default:F="image/jpeg"}return Yg(V.toDataURL(F,1).split("base64,").pop())}},m=function(V){var N=this.internal.collections.addImage_images;if(N){for(var q in N)if(V===N[q].alias)return N[q]}},S=function(V,N,q){return V||N||(V=-96,N=-96),V<0&&(V=-1*q.width*72/V/this.internal.scaleFactor),N<0&&(N=-1*q.height*72/N/this.internal.scaleFactor),V===0&&(V=N*q.width/q.height),N===0&&(N=V*q.height/q.width),[V,N]},E=function(V,N,q,$,F,B){var Q=S.call(this,q,$,F),X=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,me=l.call(this);if(q=Q[0],$=Q[1],me[F.index]=F,B){B*=Math.PI/180;var We=Math.cos(B),ae=Math.sin(B),ve=function(J){return J.toFixed(4)},ye=[ve(We),ve(ae),ve(-1*ae),ve(We),0,0,"cm"]}this.internal.write("q"),B?(this.internal.write([1,"0","0",1,X(V),_e(N+$),"cm"].join(" ")),this.internal.write(ye.join(" ")),this.internal.write([X(q),"0","0",X($),"0","0","cm"].join(" "))):this.internal.write([X(q),"0","0",X($),X(V),_e(N+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+F.index+" Do"),this.internal.write("Q")},k=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=n.__addimage__.sHashCode=function(V){var N,q,$=0;if(typeof V=="string")for(q=V.length,N=0;N<q;N++)$=($<<5)-$+V.charCodeAt(N),$|=0;else if(pe(V))for(q=V.byteLength/2,N=0;N<q;N++)$=($<<5)-$+V[N],$|=0;return $},R=n.__addimage__.validateStringAsBase64=function(V){(V=V||"").toString().trim();var N=!0;return V.length===0&&(N=!1),V.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(V.substr(0,V.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(V.substr(-2))===!1&&(N=!1),N},G=n.__addimage__.extractImageFromDataUrl=function(V){var N=(V=V||"").split("base64,"),q=null;if(N.length===2){var $=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(N[0]);Array.isArray($)&&(q={mimeType:$[1],charset:$[2],data:N[1]})}return q},ee=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(V){return ee()&&V instanceof ArrayBuffer};var pe=n.__addimage__.isArrayBufferView=function(V){return ee()&&typeof Uint32Array<"u"&&(V instanceof Int8Array||V instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&V instanceof Uint8ClampedArray||V instanceof Int16Array||V instanceof Uint16Array||V instanceof Int32Array||V instanceof Uint32Array||V instanceof Float32Array||V instanceof Float64Array)},ge=n.__addimage__.binaryStringToUint8Array=function(V){for(var N=V.length,q=new Uint8Array(N),$=0;$<N;$++)q[$]=V.charCodeAt($);return q},O=n.__addimage__.arrayBufferToBinaryString=function(V){for(var N="",q=pe(V)?V:new Uint8Array(V),$=0;$<q.length;$+=8192)N+=String.fromCharCode.apply(null,q.subarray($,$+8192));return N};n.addImage=function(){var V,N,q,$,F,B,Q,X,_e;if(typeof arguments[1]=="number"?(N=e,q=arguments[1],$=arguments[2],F=arguments[3],B=arguments[4],Q=arguments[5],X=arguments[6],_e=arguments[7]):(N=arguments[1],q=arguments[2],$=arguments[3],F=arguments[4],B=arguments[5],Q=arguments[6],X=arguments[7],_e=arguments[8]),gs(V=arguments[0])==="object"&&!p(V)&&"imageData"in V){var me=V;V=me.imageData,N=me.format||N||e,q=me.x||q||0,$=me.y||$||0,F=me.w||me.width||F,B=me.h||me.height||B,Q=me.alias||Q,X=me.compression||X,_e=me.rotation||me.angle||_e}var We=this.internal.getFilters();if(X===void 0&&We.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(q)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var ae=j.call(this,V,N,Q,X);return E.call(this,q,$,F,B,ae,_e),this};var j=function(V,N,q,$){var F,B,Q;if(typeof V=="string"&&r(V)===e){V=unescape(V);var X=Y(V,!1);(X!==""||(X=n.loadFile(V,!0))!==void 0)&&(V=X)}if(p(V)&&(V=v(V,N)),N=r(V,N),!h(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((Q=q)==null||Q.length===0)&&(q=function(_e){return typeof _e=="string"||pe(_e)?A(_e):pe(_e.data)?A(_e.data):null}(V)),(F=m.call(this,q))||(ee()&&(V instanceof Uint8Array||N==="RGBA"||(B=V,V=ge(V))),F=this["process"+N.toUpperCase()](V,u.call(this),q,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in n.image_compression?_e:T.NONE}($),B)),!F)throw new Error("An unknown error occurred whilst processing the image.");return F},Y=n.__addimage__.convertBase64ToBinaryString=function(V,N){var q;N=typeof N!="boolean"||N;var $,F="";if(typeof V=="string"){$=(q=G(V))!==null?q.data:V;try{F=Yg($)}catch(B){if(N)throw R($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+B.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return F};n.getImageProperties=function(V){var N,q,$="";if(p(V)&&(V=v(V)),typeof V=="string"&&r(V)===e&&(($=Y(V,!1))===""&&($=n.loadFile(V)||""),V=$),q=r(V),!h(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(!ee()||V instanceof Uint8Array||(V=ge(V)),!(N=this["process"+q.toUpperCase()](V)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=q,N}})(Fr.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Fr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,h=!1,p=0;p<u.length&&!h;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var v=0;v<u.length;v++){r=u[v];var m=this.internal.pdfEscape,S=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(E.objId),A=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(T(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(T(A))+") >>",E.content=s;var R=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+R,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(E.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var G=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(S(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+G+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var ee=this.annotations._nameMap[r.options.name];r.options.pageNumber=ee.page,r.options.top=ee.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(S(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var pe=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+pe+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:u(r),w:l(t+i),h:u(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,a,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(t,a).length;o=Math.ceil(u*h)}else a=l,o=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Fr.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=n.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(E){var k=0,T=t,A="",R=0;for(k=0;k<E.length;k+=1)T[E.charCodeAt(k)]!==void 0?(R++,typeof(T=T[E.charCodeAt(k)])=="number"&&(A+=String.fromCharCode(T),T=t,R=0),k===E.length-1&&(T=t,A+=E.charAt(k-(R-1)),k-=R-1,R=0)):(T=t,A+=E.charAt(k-R),k-=R,R=0);return A};n.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(E,k,T){return o(E)?s(E)===!1?-1:!u(E)||!o(k)&&!o(T)||!o(T)&&a(k)||a(E)&&!o(k)||a(E)&&l(k)||a(E)&&a(k)?0:h(E)&&o(k)&&!a(k)&&o(T)&&u(T)?3:a(E)||!o(T)?1:2:-1},m=function(E){var k=0,T=0,A=0,R="",G="",ee="",pe=(E=E||"").split("\\s+"),ge=[];for(k=0;k<pe.length;k+=1){for(ge.push(""),T=0;T<pe[k].length;T+=1)R=pe[k][T],G=pe[k][T-1],ee=pe[k][T+1],o(R)?(A=v(R,G,ee),ge[k]+=A!==-1?String.fromCharCode(e[R.charCodeAt(0)][A]):R):ge[k]+=R;ge[k]=p(ge[k])}return ge.join(" ")},S=n.__arabicParser__.processArabic=n.processArabic=function(){var E,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(k)){var A=0;for(T=[],A=0;A<k.length;A+=1)Array.isArray(k[A])?T.push([m(k[A][0]),k[A][1],k[A][2]]):T.push([m(k[A])]);E=T}else E=m(k);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};n.events.push(["preProcessText",S])}(Fr.API),Fr.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Fr.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(E){u=E}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(E){h=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(E){m=E}});var S=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return S},set:function(E){S=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){r.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),v=u.scaleFactor||this.internal.scaleFactor,m=0,S=0,E=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var T=u.maxWidth;T>0?typeof l=="string"?l=this.splitTextToSize(l,T):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(R,G){return R.concat(k.splitTextToSize(G,T))},[])):l=Array.isArray(l)?l:[l];for(var A=0;A<l.length;A++)m<(E=this.getStringUnitWidth(l[A],{font:p})*h)&&(m=E);return m!==0&&(S=l.length),{w:m/=v,h:Math.max((S*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,h,p,v){if(r.call(this),!h)throw new Error("No data for PDF table.");var m,S,E,k,T=[],A=[],R=[],G={},ee={},pe=[],ge=[],O=(v=v||{}).autoSize||!1,j=v.printHeaders!==!1,Y=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,V=v.margins||Object.assign({width:this.getPageWidth()},e),N=typeof v.padding=="number"?v.padding:3,q=v.headerBackgroundColor||"#c8c8c8",$=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=V,this.internal.__cell__.table_font_size=Y,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=q,this.internal.__cell__.headerTextColor=$,this.setFontSize(Y),p==null)A=T=Object.keys(h[0]),R=T.map(function(){return"left"});else if(Array.isArray(p)&&gs(p[0])==="object")for(T=p.map(function(me){return me.name}),A=p.map(function(me){return me.prompt||me.name||""}),R=p.map(function(me){return me.align||"left"}),m=0;m<p.length;m+=1)ee[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(A=T=p,R=T.map(function(){return"left"}));if(O||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<T.length;m+=1){for(G[k=T[m]]=h.map(function(me){return me[k]}),this.setFont(void 0,"bold"),pe.push(this.getTextDimensions(A[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),S=G[k],this.setFont(void 0,"normal"),E=0;E<S.length;E+=1)pe.push(this.getTextDimensions(S[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ee[k]=Math.max.apply(null,pe)+N+N,pe=[]}if(j){var F={};for(m=0;m<T.length;m+=1)F[T[m]]={},F[T[m]].text=A[m],F[T[m]].align=R[m];var B=a.call(this,F,ee);ge=T.map(function(me){return new s(l,u,ee[me],B,F[me].text,void 0,F[me].align)}),this.setTableHeaderRow(ge),this.printHeaderRow(1,!1)}var Q=p.reduce(function(me,We){return me[We.name]=We.align,me},{});for(m=0;m<h.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:h[m]},this);var X=a.call(this,h[m],ee);for(E=0;E<T.length;E+=1){var _e=h[m][T[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:E,data:_e},this),o.call(this,new s(l,u,ee[T[E]],X,_e,m+2,Q[T[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(m){var S=l[m];return this.splitTextToSize(S.hasOwnProperty("text")?S.text:S,u[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/v+h+h},this).reduce(function(m,S){return Math.max(m,S)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,v.push(h)),h.lineNumber=l;var S=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(S)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),t=!1}}(Fr.API);var fP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},pP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Bb=hP(pP),gP=[100,200,300,400,500,600,700,800,900],QH=hP(gP);function Fb(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return fP[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof Bb[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function R5(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var eG={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},B5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function F5(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function tG(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},eG,t.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Fb(e[a])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+F5(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var h=Bb[l],p=h<=Bb.normal?-1:1,v=R5(u,pP,h,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var h=fP[l],p=0;p<h.length;++p)if(u[h[p]])return u[h[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var h=QH[l],p=R5(u,gP,h,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+F5(s)+"'.");return o}function j5(n){return n.trimLeft()}function nG(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function rG(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var P0,z5,$5,h_=["times"];(function(n){var e,t,r,i,s,o,a,l,u,h=function(ae){return ae=ae||{},this.isStrokeTransparent=ae.isStrokeTransparent||!1,this.strokeOpacity=ae.strokeOpacity||1,this.strokeStyle=ae.strokeStyle||"#000000",this.fillStyle=ae.fillStyle||"#000000",this.isFillTransparent=ae.isFillTransparent||!1,this.fillOpacity=ae.fillOpacity||1,this.font=ae.font||"10px sans-serif",this.textBaseline=ae.textBaseline||"alphabetic",this.textAlign=ae.textAlign||"left",this.lineWidth=ae.lineWidth||1,this.lineJoin=ae.lineJoin||"miter",this.lineCap=ae.lineCap||"butt",this.path=ae.path||[],this.transform=ae.transform!==void 0?ae.transform.clone():new l,this.globalCompositeOperation=ae.globalCompositeOperation||"normal",this.globalAlpha=ae.globalAlpha||1,this.clip_path=ae.clip_path||[],this.currentPoint=ae.currentPoint||new o,this.miterLimit=ae.miterLimit||10,this.lastPoint=ae.lastPoint||new o,this.lineDashOffset=ae.lineDashOffset||0,this.lineDash=ae.lineDash||[],this.margin=ae.margin||[0,0,0,0],this.prevPageLastElemOffset=ae.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ae.ignoreClearRect!="boolean"||ae.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var p=function(ae){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ve=ae;Object.defineProperty(this,"pdf",{get:function(){return ve}});var ye=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ye},set:function(Z){ye=!!Z}});var J=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return J},set:function(Z){J=!!Z}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Z){isNaN(Z)||(se=Z)}});var fe=0;Object.defineProperty(this,"posY",{get:function(){return fe},set:function(Z){isNaN(Z)||(fe=Z)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Z){var U;typeof Z=="number"?U=[Z,Z,Z,Z]:((U=new Array(4))[0]=Z[0],U[1]=Z.length>=2?Z[1]:U[0],U[2]=Z.length>=3?Z[2]:U[0],U[3]=Z.length>=4?Z[3]:U[1]),u.margin=U}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(Z){ie=Z}});var te=0;Object.defineProperty(this,"lastBreak",{get:function(){return te},set:function(Z){te=Z}});var Oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Oe},set:function(Z){Oe=Z}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Z){Z instanceof h&&(u=Z)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Z){u.path=Z}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(Z){we=Z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Z){var U;U=v(Z),this.ctx.fillStyle=U.style,this.ctx.isFillTransparent=U.a===0,this.ctx.fillOpacity=U.a,this.pdf.setFillColor(U.r,U.g,U.b,{a:U.a}),this.pdf.setTextColor(U.r,U.g,U.b,{a:U.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Z){var U=v(Z);this.ctx.strokeStyle=U.style,this.ctx.isStrokeTransparent=U.a===0,this.ctx.strokeOpacity=U.a,U.a===0?this.pdf.setDrawColor(255,255,255):(U.a,this.pdf.setDrawColor(U.r,U.g,U.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Z){["butt","round","square"].indexOf(Z)!==-1&&(this.ctx.lineCap=Z,this.pdf.setLineCap(Z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Z){isNaN(Z)||(this.ctx.lineWidth=Z,this.pdf.setLineWidth(Z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Z){["bevel","round","miter"].indexOf(Z)!==-1&&(this.ctx.lineJoin=Z,this.pdf.setLineJoin(Z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Z){isNaN(Z)||(this.ctx.miterLimit=Z,this.pdf.setMiterLimit(Z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Z){this.ctx.textBaseline=Z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Z){["right","end","center","left","start"].indexOf(Z)!==-1&&(this.ctx.textAlign=Z)}});var Be=null;function ue(Z,U){if(Be===null){var xe=function(Ne){var Ge=[];return Object.keys(Ne).forEach(function(Se){Ne[Se].forEach(function(ce){var je=null;switch(ce){case"bold":je={family:Se,weight:"bold"};break;case"italic":je={family:Se,style:"italic"};break;case"bolditalic":je={family:Se,weight:"bold",style:"italic"};break;case"":case"normal":je={family:Se}}je!==null&&(je.ref={name:Se,style:ce},Ge.push(je))})}),Ge}(Z.getFontList());Be=function(Ne){for(var Ge={},Se=0;Se<Ne.length;++Se){var ce=Fb(Ne[Se]),je=ce.family,st=ce.stretch,lt=ce.style,_t=ce.weight;Ge[je]=Ge[je]||{},Ge[je][st]=Ge[je][st]||{},Ge[je][st][lt]=Ge[je][st][lt]||{},Ge[je][st][lt][_t]=ce}return Ge}(xe.concat(U))}return Be}var re=null;Object.defineProperty(this,"fontFaces",{get:function(){return re},set:function(Z){Be=null,re=Z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Z){var U;if(this.ctx.font=Z,(U=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Z))!==null){var xe=U[1],Ne=(U[2],U[3]),Ge=U[4],Se=(U[5],U[6]),ce=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ge)[2];Ge=Math.floor(ce==="px"?parseFloat(Ge)*this.pdf.internal.scaleFactor:ce==="em"?parseFloat(Ge)*this.pdf.getFontSize():parseFloat(Ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ge);var je=function(et){var ut,ot,It=[],Jt=et.trim();if(Jt==="")return h_;if(Jt in B5)return[B5[Jt]];for(;Jt!=="";){switch(ot=null,ut=(Jt=j5(Jt)).charAt(0)){case'"':case"'":ot=nG(Jt.substring(1),ut);break;default:ot=rG(Jt)}if(ot===null||(It.push(ot[0]),(Jt=j5(ot[1]))!==""&&Jt.charAt(0)!==","))return h_;Jt=Jt.replace(/^,/,"")}return It}(Se);if(this.fontFaces){var st=tG(ue(this.pdf,this.fontFaces),je.map(function(et){return{family:et,stretch:"normal",weight:Ne,style:xe}}));this.pdf.setFont(st.ref.name,st.ref.style)}else{var lt="";(Ne==="bold"||parseInt(Ne,10)>=700||xe==="bold")&&(lt="bold"),xe==="italic"&&(lt+="italic"),lt.length===0&&(lt="normal");for(var _t="",Je={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},zt=0;zt<je.length;zt++){if(this.pdf.internal.getFont(je[zt],lt,{noFallback:!0,disableWarning:!0})!==void 0){_t=je[zt];break}if(lt==="bolditalic"&&this.pdf.internal.getFont(je[zt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_t=je[zt],lt="bold";else if(this.pdf.internal.getFont(je[zt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_t=je[zt],lt="normal";break}}if(_t===""){for(var Xt=0;Xt<je.length;Xt++)if(Je[je[Xt]]){_t=Je[je[Xt]];break}}_t=_t===""?"Times":_t,this.pdf.setFont(_t,lt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Z){this.ctx.globalCompositeOperation=Z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Z){this.ctx.globalAlpha=Z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Z){this.ctx.lineDashOffset=Z,We.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Z){this.ctx.lineDash=Z,We.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Z){this.ctx.ignoreClearRect=!!Z}})};p.prototype.setLineDash=function(ae){this.lineDash=ae},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){G.call(this,"fill",!1)},p.prototype.stroke=function(){G.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(ae,ve){if(isNaN(ae)||isNaN(ve))throw Cs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ye=this.ctx.transform.applyToPoint(new o(ae,ve));this.path.push({type:"mt",x:ye.x,y:ye.y}),this.ctx.lastPoint=new o(ae,ve)},p.prototype.closePath=function(){var ae=new o(0,0),ve=0;for(ve=this.path.length-1;ve!==-1;ve--)if(this.path[ve].type==="begin"&&gs(this.path[ve+1])==="object"&&typeof this.path[ve+1].x=="number"){ae=new o(this.path[ve+1].x,this.path[ve+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(ae.x,ae.y)},p.prototype.lineTo=function(ae,ve){if(isNaN(ae)||isNaN(ve))throw Cs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ye=this.ctx.transform.applyToPoint(new o(ae,ve));this.path.push({type:"lt",x:ye.x,y:ye.y}),this.ctx.lastPoint=new o(ye.x,ye.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),G.call(this,null,!0)},p.prototype.quadraticCurveTo=function(ae,ve,ye,J){if(isNaN(ye)||isNaN(J)||isNaN(ae)||isNaN(ve))throw Cs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(ye,J)),fe=this.ctx.transform.applyToPoint(new o(ae,ve));this.path.push({type:"qct",x1:fe.x,y1:fe.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},p.prototype.bezierCurveTo=function(ae,ve,ye,J,se,fe){if(isNaN(se)||isNaN(fe)||isNaN(ae)||isNaN(ve)||isNaN(ye)||isNaN(J))throw Cs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new o(se,fe)),te=this.ctx.transform.applyToPoint(new o(ae,ve)),Oe=this.ctx.transform.applyToPoint(new o(ye,J));this.path.push({type:"bct",x1:te.x,y1:te.y,x2:Oe.x,y2:Oe.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},p.prototype.arc=function(ae,ve,ye,J,se,fe){if(isNaN(ae)||isNaN(ve)||isNaN(ye)||isNaN(J)||isNaN(se))throw Cs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(fe=!!fe,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new o(ae,ve));ae=ie.x,ve=ie.y;var te=this.ctx.transform.applyToPoint(new o(0,ye)),Oe=this.ctx.transform.applyToPoint(new o(0,0));ye=Math.sqrt(Math.pow(te.x-Oe.x,2)+Math.pow(te.y-Oe.y,2))}Math.abs(se-J)>=2*Math.PI&&(J=0,se=2*Math.PI),this.path.push({type:"arc",x:ae,y:ve,radius:ye,startAngle:J,endAngle:se,counterclockwise:fe})},p.prototype.arcTo=function(ae,ve,ye,J,se){throw new Error("arcTo not implemented.")},p.prototype.rect=function(ae,ve,ye,J){if(isNaN(ae)||isNaN(ve)||isNaN(ye)||isNaN(J))throw Cs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ae,ve),this.lineTo(ae+ye,ve),this.lineTo(ae+ye,ve+J),this.lineTo(ae,ve+J),this.lineTo(ae,ve),this.lineTo(ae+ye,ve),this.lineTo(ae,ve)},p.prototype.fillRect=function(ae,ve,ye,J){if(isNaN(ae)||isNaN(ve)||isNaN(ye)||isNaN(J))throw Cs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ae,ve,ye,J),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},p.prototype.strokeRect=function(ae,ve,ye,J){if(isNaN(ae)||isNaN(ve)||isNaN(ye)||isNaN(J))throw Cs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");S.call(this)||(this.beginPath(),this.rect(ae,ve,ye,J),this.stroke())},p.prototype.clearRect=function(ae,ve,ye,J){if(isNaN(ae)||isNaN(ve)||isNaN(ye)||isNaN(J))throw Cs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ae,ve,ye,J))},p.prototype.save=function(ae){ae=typeof ae!="boolean"||ae;for(var ve=this.pdf.internal.getCurrentPageInfo().pageNumber,ye=0;ye<this.pdf.internal.getNumberOfPages();ye++)this.pdf.setPage(ye+1),this.pdf.internal.out("q");if(this.pdf.setPage(ve),ae){this.ctx.fontSize=this.pdf.internal.getFontSize();var J=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=J}},p.prototype.restore=function(ae){ae=typeof ae!="boolean"||ae;for(var ve=this.pdf.internal.getCurrentPageInfo().pageNumber,ye=0;ye<this.pdf.internal.getNumberOfPages();ye++)this.pdf.setPage(ye+1),this.pdf.internal.out("Q");this.pdf.setPage(ve),ae&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(ae){var ve,ye,J,se;if(ae.isCanvasGradient===!0&&(ae=ae.getColor()),!ae)return{r:0,g:0,b:0,a:0,style:ae};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ae))ve=0,ye=0,J=0,se=0;else{var fe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ae);if(fe!==null)ve=parseInt(fe[1]),ye=parseInt(fe[2]),J=parseInt(fe[3]),se=1;else if((fe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ae))!==null)ve=parseInt(fe[1]),ye=parseInt(fe[2]),J=parseInt(fe[3]),se=parseFloat(fe[4]);else{if(se=1,typeof ae=="string"&&ae.charAt(0)!=="#"){var ie=new oP(ae);ae=ie.ok?ie.toHex():"#000000"}ae.length===4?(ve=ae.substring(1,2),ve+=ve,ye=ae.substring(2,3),ye+=ye,J=ae.substring(3,4),J+=J):(ve=ae.substring(1,3),ye=ae.substring(3,5),J=ae.substring(5,7)),ve=parseInt(ve,16),ye=parseInt(ye,16),J=parseInt(J,16)}}return{r:ve,g:ye,b:J,a:se,style:ae}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},S=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(ae,ve,ye,J){if(isNaN(ve)||isNaN(ye)||typeof ae!="string")throw Cs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(J=isNaN(J)?void 0:J,!m.call(this)){var se=X(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;N.call(this,{text:ae,x:ve,y:ye,scale:fe,angle:se,align:this.textAlign,maxWidth:J})}},p.prototype.strokeText=function(ae,ve,ye,J){if(isNaN(ve)||isNaN(ye)||typeof ae!="string")throw Cs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!S.call(this)){J=isNaN(J)?void 0:J;var se=X(this.ctx.transform.rotation),fe=this.ctx.transform.scaleX;N.call(this,{text:ae,x:ve,y:ye,scale:fe,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:J})}},p.prototype.measureText=function(ae){if(typeof ae!="string")throw Cs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ve=this.pdf,ye=this.pdf.internal.scaleFactor,J=ve.internal.getFontSize(),se=ve.getStringUnitWidth(ae)*J/ve.internal.scaleFactor,fe=function(ie){var te=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return te}}),this};return new fe({width:se*=Math.round(96*ye/72*1e4)/1e4})},p.prototype.scale=function(ae,ve){if(isNaN(ae)||isNaN(ve))throw Cs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ye=new l(ae,0,0,ve,0,0);this.ctx.transform=this.ctx.transform.multiply(ye)},p.prototype.rotate=function(ae){if(isNaN(ae))throw Cs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ve=new l(Math.cos(ae),Math.sin(ae),-Math.sin(ae),Math.cos(ae),0,0);this.ctx.transform=this.ctx.transform.multiply(ve)},p.prototype.translate=function(ae,ve){if(isNaN(ae)||isNaN(ve))throw Cs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ye=new l(1,0,0,1,ae,ve);this.ctx.transform=this.ctx.transform.multiply(ye)},p.prototype.transform=function(ae,ve,ye,J,se,fe){if(isNaN(ae)||isNaN(ve)||isNaN(ye)||isNaN(J)||isNaN(se)||isNaN(fe))throw Cs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new l(ae,ve,ye,J,se,fe);this.ctx.transform=this.ctx.transform.multiply(ie)},p.prototype.setTransform=function(ae,ve,ye,J,se,fe){ae=isNaN(ae)?1:ae,ve=isNaN(ve)?0:ve,ye=isNaN(ye)?0:ye,J=isNaN(J)?1:J,se=isNaN(se)?0:se,fe=isNaN(fe)?0:fe,this.ctx.transform=new l(ae,ve,ye,J,se,fe)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(ae,ve,ye,J,se,fe,ie,te,Oe){var we=this.pdf.getImageProperties(ae),Be=1,ue=1,re=1,Z=1;J!==void 0&&te!==void 0&&(re=te/J,Z=Oe/se,Be=we.width/J*te/J,ue=we.height/se*Oe/se),fe===void 0&&(fe=ve,ie=ye,ve=0,ye=0),J!==void 0&&te===void 0&&(te=J,Oe=se),J===void 0&&te===void 0&&(te=we.width,Oe=we.height);for(var U,xe=this.ctx.transform.decompose(),Ne=X(xe.rotate.shx),Ge=new l,Se=(Ge=(Ge=(Ge=Ge.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale)).applyToRectangle(new a(fe-ve*re,ie-ye*Z,J*Be,se*ue)),ce=k.call(this,Se),je=[],st=0;st<ce.length;st+=1)je.indexOf(ce[st])===-1&&je.push(ce[st]);if(R(je),this.autoPaging)for(var lt=je[0],_t=je[je.length-1],Je=lt;Je<_t+1;Je++){this.pdf.setPage(Je);var zt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xt=Je===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=Je===1?0:et+(Je-2)*ut;if(this.ctx.clip_path.length!==0){var It=this.path;U=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(U,this.posX+this.margin[3],-ot+Xt+this.ctx.prevPageLastElemOffset),ee.call(this,"fill",!0),this.path=It}var Jt=JSON.parse(JSON.stringify(Se));Jt=A([Jt],this.posX+this.margin[3],-ot+Xt+this.ctx.prevPageLastElemOffset)[0];var xn=(Je>lt||Je<_t)&&E.call(this);xn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zt,ut,null).clip().discardPath()),this.pdf.addImage(ae,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,Ne),xn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ae,"JPEG",Se.x,Se.y,Se.w,Se.h,null,null,Ne)};var k=function(ae,ve,ye){var J=[];ve=ve||this.pdf.internal.pageSize.width,ye=ye||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(ae.type){default:case"mt":case"lt":J.push(Math.floor((ae.y+se)/ye)+1);break;case"arc":J.push(Math.floor((ae.y+se-ae.radius)/ye)+1),J.push(Math.floor((ae.y+se+ae.radius)/ye)+1);break;case"qct":var fe=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ae.x1,ae.y1,ae.x,ae.y);J.push(Math.floor((fe.y+se)/ye)+1),J.push(Math.floor((fe.y+fe.h+se)/ye)+1);break;case"bct":var ie=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ae.x1,ae.y1,ae.x2,ae.y2,ae.x,ae.y);J.push(Math.floor((ie.y+se)/ye)+1),J.push(Math.floor((ie.y+ie.h+se)/ye)+1);break;case"rect":J.push(Math.floor((ae.y+se)/ye)+1),J.push(Math.floor((ae.y+ae.h+se)/ye)+1)}for(var te=0;te<J.length;te+=1)for(;this.pdf.internal.getNumberOfPages()<J[te];)T.call(this);return J},T=function(){var ae=this.fillStyle,ve=this.strokeStyle,ye=this.font,J=this.lineCap,se=this.lineWidth,fe=this.lineJoin;this.pdf.addPage(),this.fillStyle=ae,this.strokeStyle=ve,this.font=ye,this.lineCap=J,this.lineWidth=se,this.lineJoin=fe},A=function(ae,ve,ye){for(var J=0;J<ae.length;J++)switch(ae[J].type){case"bct":ae[J].x2+=ve,ae[J].y2+=ye;case"qct":ae[J].x1+=ve,ae[J].y1+=ye;case"mt":case"lt":case"arc":default:ae[J].x+=ve,ae[J].y+=ye}return ae},R=function(ae){return ae.sort(function(ve,ye){return ve-ye})},G=function(ae,ve){for(var ye,J,se=this.fillStyle,fe=this.strokeStyle,ie=this.lineCap,te=this.lineWidth,Oe=Math.abs(te*this.ctx.transform.scaleX),we=this.lineJoin,Be=JSON.parse(JSON.stringify(this.path)),ue=JSON.parse(JSON.stringify(this.path)),re=[],Z=0;Z<ue.length;Z++)if(ue[Z].x!==void 0)for(var U=k.call(this,ue[Z]),xe=0;xe<U.length;xe+=1)re.indexOf(U[xe])===-1&&re.push(U[xe]);for(var Ne=0;Ne<re.length;Ne++)for(;this.pdf.internal.getNumberOfPages()<re[Ne];)T.call(this);if(R(re),this.autoPaging)for(var Ge=re[0],Se=re[re.length-1],ce=Ge;ce<Se+1;ce++){this.pdf.setPage(ce),this.fillStyle=se,this.strokeStyle=fe,this.lineCap=ie,this.lineWidth=Oe,this.lineJoin=we;var je=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],st=ce===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=ce===1?0:lt+(ce-2)*_t;if(this.ctx.clip_path.length!==0){var zt=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(ye,this.posX+this.margin[3],-Je+st+this.ctx.prevPageLastElemOffset),ee.call(this,ae,!0),this.path=zt}if(J=JSON.parse(JSON.stringify(Be)),this.path=A(J,this.posX+this.margin[3],-Je+st+this.ctx.prevPageLastElemOffset),ve===!1||ce===0){var Xt=(ce>Ge||ce<Se)&&E.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],je,_t,null).clip().discardPath()),ee.call(this,ae,ve),Xt&&this.pdf.restoreGraphicsState()}this.lineWidth=te}else this.lineWidth=Oe,ee.call(this,ae,ve),this.lineWidth=te;this.path=Be},ee=function(ae,ve){if((ae!=="stroke"||ve||!S.call(this))&&(ae==="stroke"||ve||!m.call(this))){for(var ye,J,se=[],fe=this.path,ie=0;ie<fe.length;ie++){var te=fe[ie];switch(te.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:te,deltas:[],abs:[]});break;case"lt":var Oe=se.length;if(fe[ie-1]&&!isNaN(fe[ie-1].x)&&(ye=[te.x-fe[ie-1].x,te.y-fe[ie-1].y],Oe>0)){for(;Oe>=0;Oe--)if(se[Oe-1].close!==!0&&se[Oe-1].begin!==!0){se[Oe-1].deltas.push(ye),se[Oe-1].abs.push(te);break}}break;case"bct":ye=[te.x1-fe[ie-1].x,te.y1-fe[ie-1].y,te.x2-fe[ie-1].x,te.y2-fe[ie-1].y,te.x-fe[ie-1].x,te.y-fe[ie-1].y],se[se.length-1].deltas.push(ye);break;case"qct":var we=fe[ie-1].x+2/3*(te.x1-fe[ie-1].x),Be=fe[ie-1].y+2/3*(te.y1-fe[ie-1].y),ue=te.x+2/3*(te.x1-te.x),re=te.y+2/3*(te.y1-te.y),Z=te.x,U=te.y;ye=[we-fe[ie-1].x,Be-fe[ie-1].y,ue-fe[ie-1].x,re-fe[ie-1].y,Z-fe[ie-1].x,U-fe[ie-1].y],se[se.length-1].deltas.push(ye);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(te)}}J=ve?null:ae==="stroke"?"stroke":"fill";for(var xe=!1,Ne=0;Ne<se.length;Ne++)if(se[Ne].arc)for(var Ge=se[Ne].abs,Se=0;Se<Ge.length;Se++){var ce=Ge[Se];ce.type==="arc"?O.call(this,ce.x,ce.y,ce.radius,ce.startAngle,ce.endAngle,ce.counterclockwise,void 0,ve,!xe):q.call(this,ce.x,ce.y),xe=!0}else if(se[Ne].close===!0)this.pdf.internal.out("h"),xe=!1;else if(se[Ne].begin!==!0){var je=se[Ne].start.x,st=se[Ne].start.y;$.call(this,se[Ne].deltas,je,st),xe=!0}J&&j.call(this,J),ve&&Y.call(this)}},pe=function(ae){var ve=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ye=ve*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ae-ye;case"top":return ae+ve-ye;case"hanging":return ae+ve-2*ye;case"middle":return ae+ve/2-ye;case"ideographic":return ae;case"alphabetic":default:return ae}},ge=function(ae){return ae+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var ae=function(){};return ae.colorStops=[],ae.addColorStop=function(ve,ye){this.colorStops.push([ve,ye])},ae.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ae.isCanvasGradient=!0,ae},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(ae,ve,ye,J,se,fe,ie,te,Oe){for(var we=B.call(this,ye,J,se,fe),Be=0;Be<we.length;Be++){var ue=we[Be];Be===0&&(Oe?V.call(this,ue.x1+ae,ue.y1+ve):q.call(this,ue.x1+ae,ue.y1+ve)),F.call(this,ae,ve,ue.x2,ue.y2,ue.x3,ue.y3,ue.x4,ue.y4)}te?Y.call(this):j.call(this,ie)},j=function(ae){switch(ae){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Y=function(){this.pdf.clip(),this.pdf.discardPath()},V=function(ae,ve){this.pdf.internal.out(t(ae)+" "+r(ve)+" m")},N=function(ae){var ve;switch(ae.align){case"right":case"end":ve="right";break;case"center":ve="center";break;case"left":case"start":default:ve="left"}var ye=this.pdf.getTextDimensions(ae.text),J=pe.call(this,ae.y),se=ge.call(this,J)-ye.h,fe=this.ctx.transform.applyToPoint(new o(ae.x,J)),ie=this.ctx.transform.decompose(),te=new l;te=(te=(te=te.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var Oe,we,Be,ue=this.ctx.transform.applyToRectangle(new a(ae.x,J,ye.w,ye.h)),re=te.applyToRectangle(new a(ae.x,se,ye.w,ye.h)),Z=k.call(this,re),U=[],xe=0;xe<Z.length;xe+=1)U.indexOf(Z[xe])===-1&&U.push(Z[xe]);if(R(U),this.autoPaging)for(var Ne=U[0],Ge=U[U.length-1],Se=Ne;Se<Ge+1;Se++){this.pdf.setPage(Se);var ce=Se===1?this.posY+this.margin[0]:this.margin[0],je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[2],lt=st-this.margin[0],_t=this.pdf.internal.pageSize.width-this.margin[1],Je=_t-this.margin[3],zt=Se===1?0:je+(Se-2)*lt;if(this.ctx.clip_path.length!==0){var Xt=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Oe,this.posX+this.margin[3],-1*zt+ce),ee.call(this,"fill",!0),this.path=Xt}var et=A([JSON.parse(JSON.stringify(re))],this.posX+this.margin[3],-zt+ce+this.ctx.prevPageLastElemOffset)[0];ae.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*ae.scale),Be=this.lineWidth,this.lineWidth=Be*ae.scale);var ut=this.autoPaging!=="text";if(ut||et.y+et.h<=st){if(ut||et.y>=ce&&et.x<=_t){var ot=ut?ae.text:this.pdf.splitTextToSize(ae.text,ae.maxWidth||_t-et.x)[0],It=A([JSON.parse(JSON.stringify(ue))],this.posX+this.margin[3],-zt+ce+this.ctx.prevPageLastElemOffset)[0],Jt=ut&&(Se>Ne||Se<Ge)&&E.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Je,lt,null).clip().discardPath()),this.pdf.text(ot,It.x,It.y,{angle:ae.angle,align:ve,renderingMode:ae.renderingMode}),Jt&&this.pdf.restoreGraphicsState()}}else et.y<st&&(this.ctx.prevPageLastElemOffset+=st-et.y);ae.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Be)}else ae.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*ae.scale),Be=this.lineWidth,this.lineWidth=Be*ae.scale),this.pdf.text(ae.text,fe.x+this.posX,fe.y+this.posY,{angle:ae.angle,align:ve,renderingMode:ae.renderingMode,maxWidth:ae.maxWidth}),ae.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Be)},q=function(ae,ve,ye,J){ye=ye||0,J=J||0,this.pdf.internal.out(t(ae+ye)+" "+r(ve+J)+" l")},$=function(ae,ve,ye){return this.pdf.lines(ae,ve,ye,null,null)},F=function(ae,ve,ye,J,se,fe,ie,te){this.pdf.internal.out([e(i(ye+ae)),e(s(J+ve)),e(i(se+ae)),e(s(fe+ve)),e(i(ie+ae)),e(s(te+ve)),"c"].join(" "))},B=function(ae,ve,ye,J){for(var se=2*Math.PI,fe=Math.PI/2;ve>ye;)ve-=se;var ie=Math.abs(ye-ve);ie<se&&J&&(ie=se-ie);for(var te=[],Oe=J?-1:1,we=ve;ie>1e-5;){var Be=we+Oe*Math.min(ie,fe);te.push(Q.call(this,ae,we,Be)),ie-=Math.abs(Be-we),we=Be}return te},Q=function(ae,ve,ye){var J=(ye-ve)/2,se=ae*Math.cos(J),fe=ae*Math.sin(J),ie=se,te=-fe,Oe=ie*ie+te*te,we=Oe+ie*se+te*fe,Be=4/3*(Math.sqrt(2*Oe*we)-we)/(ie*fe-te*se),ue=ie-Be*te,re=te+Be*ie,Z=ue,U=-re,xe=J+ve,Ne=Math.cos(xe),Ge=Math.sin(xe);return{x1:ae*Math.cos(ve),y1:ae*Math.sin(ve),x2:ue*Ne-re*Ge,y2:ue*Ge+re*Ne,x3:Z*Ne-U*Ge,y3:Z*Ge+U*Ne,x4:ae*Math.cos(ye),y4:ae*Math.sin(ye)}},X=function(ae){return 180*ae/Math.PI},_e=function(ae,ve,ye,J,se,fe){var ie=ae+.5*(ye-ae),te=ve+.5*(J-ve),Oe=se+.5*(ye-se),we=fe+.5*(J-fe),Be=Math.min(ae,se,ie,Oe),ue=Math.max(ae,se,ie,Oe),re=Math.min(ve,fe,te,we),Z=Math.max(ve,fe,te,we);return new a(Be,re,ue-Be,Z-re)},me=function(ae,ve,ye,J,se,fe,ie,te){var Oe,we,Be,ue,re,Z,U,xe,Ne,Ge,Se,ce,je,st,lt=ye-ae,_t=J-ve,Je=se-ye,zt=fe-J,Xt=ie-se,et=te-fe;for(we=0;we<41;we++)Ne=(U=(Be=ae+(Oe=we/40)*lt)+Oe*((re=ye+Oe*Je)-Be))+Oe*(re+Oe*(se+Oe*Xt-re)-U),Ge=(xe=(ue=ve+Oe*_t)+Oe*((Z=J+Oe*zt)-ue))+Oe*(Z+Oe*(fe+Oe*et-Z)-xe),we==0?(Se=Ne,ce=Ge,je=Ne,st=Ge):(Se=Math.min(Se,Ne),ce=Math.min(ce,Ge),je=Math.max(je,Ne),st=Math.max(st,Ge));return new a(Math.round(Se),Math.round(ce),Math.round(je-Se),Math.round(st-ce))},We=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ae,ve,ye=(ae=this.ctx.lineDash,ve=this.ctx.lineDashOffset,JSON.stringify({lineDash:ae,lineDashOffset:ve}));this.prevLineDash!==ye&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ye)}}})(Fr.API),function(n){var e=function(s){var o,a,l,u,h,p,v,m,S,E;for(a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(h=((h=((h=((h=(h-(E=h%85))/85)-(S=h%85))/85)-(m=h%85))/85)-(v=h%85))/85)%85,a.push(p+33,v+33,m+33,S+33,E+33)):a.push(122);return function(k,T){for(var A=T;A>0;A--)k.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var o,a,l,u,h,p=String,v="length",m=255,S="charCodeAt",E="slice",k="replace";for(s[E](-2),s=s[E](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),l=[],u=0,h=(s+=o="uuuuu"[E](s[v]%5||5))[v];h>u;u+=5)a=52200625*(s[S](u)-33)+614125*(s[S](u+1)-33)+7225*(s[S](u+2)-33)+85*(s[S](u+3)-33)+(s[S](u+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(T,A){for(var R=A;R>0;R--)T.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Db(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(Fr.API),function(n){n.loadFile=function(e,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,h){var p=new XMLHttpRequest,v=0,m=function(S){var E=S.length,k=[],T=String.fromCharCode;for(v=0;v<E;v+=1)k.push(T(255&S.charCodeAt(v)));return k.join("")};if(p.open("GET",l,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?h(m(this.responseText)):h(void 0)}),p.send(null),u&&p.status===200)return m(p.responseText)}(i,s,o)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(Fr.API),function(n){function e(){return(jr.html2canvas?Promise.resolve(jr.html2canvas):Id(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(jr.DOMPurify?Promise.resolve(jr.DOMPurify):Id(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=gs(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,h){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),v=u.firstChild;v;v=v.nextSibling)h!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var v=0;v<u.length;++v){var m=u[v],S=m.src.find(function(E){return E.format==="truetype"});S&&l.addFont(S.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||Fr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,h){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,u),p}).then(u,h).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=l.call(u,o,a);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Fr.getPageSize=function(o,a,l){if(gs(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var m,S=0,E=0;if(v.hasOwnProperty(p))S=v[p][1]/h,E=v[p][0]/h;else try{S=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>S&&(m=E,E=S,S=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",S>E&&(m=E,E=S,S=m)}return{width:E,height:S,unit:a,k:h,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Fb):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Fr.API),Fr.API.addJS=function(n){return $5=n,this.internal.events.subscribe("postPutResources",function(){P0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(P0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),z5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){P0!==void 0&&z5!==void 0&&this.internal.out("/Names <</JavaScript "+P0+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(s=0;s<u;s++){var p=t.internal.newObject();h.push(p);var v=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<h.length;s++)t.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Fr.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(p){for(var v,m=256*p.charCodeAt(4)+p.charCodeAt(5),S=p.length,E={width:0,height:0,numcomponents:1},k=4;k<S;k+=2){if(k+=m,e.indexOf(p.charCodeAt(k+1))!==-1){v=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),E={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:v,numcomponents:p.charCodeAt(k+9)};break}m=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return E}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return h}}(Fr.API);var Xf,M0,U5,V5,H5,iG=function(){var n,e,t;function r(s){var o,a,l,u,h,p,v,m,S,E,k,T,A,R;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),S=(function(){var G,ee;for(ee=[],G=0;G<4;++G)ee.push(String.fromCharCode(this.data[this.pos++]));return ee}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*h/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(S==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,T=0;0<=o?T<o:T>o;0<=o?++T:--T)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(A=0;0<=E?A<E:A>E;0<=E?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(k=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,k.slice(0,v)),this.text[m]=String.fromCharCode.apply(String,k.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(R=this.colorType)===4||R===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(p,v,m,S){var E,k,T,A,R,G,ee,pe,ge,O,j,Y,V,N,q,$,F,B,Q,X,_e,me=Math.ceil((u.width-p)/m),We=Math.ceil((u.height-v)/S),ae=u.width==me&&u.height==We;for(N=o*me,Y=ae?a:new Uint8Array(N*We),G=s.length,V=0,k=0;V<We&&l<G;){switch(s[l++]){case 0:for(A=F=0;F<N;A=F+=1)Y[k++]=s[l++];break;case 1:for(A=B=0;B<N;A=B+=1)E=s[l++],R=A<o?0:Y[k-o],Y[k++]=(E+R)%256;break;case 2:for(A=Q=0;Q<N;A=Q+=1)E=s[l++],T=(A-A%o)/o,q=V&&Y[(V-1)*N+T*o+A%o],Y[k++]=(q+E)%256;break;case 3:for(A=X=0;X<N;A=X+=1)E=s[l++],T=(A-A%o)/o,R=A<o?0:Y[k-o],q=V&&Y[(V-1)*N+T*o+A%o],Y[k++]=(E+Math.floor((R+q)/2))%256;break;case 4:for(A=_e=0;_e<N;A=_e+=1)E=s[l++],T=(A-A%o)/o,R=A<o?0:Y[k-o],V===0?q=$=0:(q=Y[(V-1)*N+T*o+A%o],$=T&&Y[(V-1)*N+(T-1)*o+A%o]),ee=R+q-$,pe=Math.abs(ee-R),O=Math.abs(ee-q),j=Math.abs(ee-$),ge=pe<=O&&pe<=j?R:O<=j?q:$,Y[k++]=(E+ge)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!ae){var ve=((v+V*S)*u.width+p)*o,ye=V*N;for(A=0;A<me;A+=1){for(var J=0;J<o;J+=1)a[ve++]=Y[ye++];ve+=(m-1)*o}}V++}}return s=RH(s),u.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,h,p,v,m;for(a=this.palette,h=this.transparency.indexed||[],u=new Uint8Array((h.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(m=h[s++])!=null?m:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,h,p,v,m,S,E,k,T;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(T=this._decodedPalette)!=null?T:this._decodedPalette=this.decodePalette(),l=4,a=!0),S=(u=s.data||s).length,p=E||o,h=v=0,l===1)for(;h<S;)m=E?4*o[h/4]:v,k=p[m++],u[h++]=k,u[h++]=k,u[h++]=k,u[h++]=a?p[m++]:255,v=m;else for(;h<S;)m=E?4*o[h/4]:v,u[h++]=p[m++],u[h++]=p[m++],u[h++]=p[m++],u[h++]=a?p[m++]:255,v=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(jr)==="[object Window]"){try{e=jr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,h,p,v,m;if(this.animation){for(m=[],a=h=0,p=(v=this.animation.frames).length;h<p;a=++h)o=v[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,m.push(o.image=n(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,h,p,v=this;return a=0,p=this.animation,u=p.numFrames,l=p.frames,h=p.numPlays,(o=function(){var m,S;if(m=a++%u,S=l[m],v.renderFrame(s,m),u>1&&a/u<h)return v.animation._timeout=setTimeout(o,S.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function sG(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,h=[],p=0,v=null,m=0,S=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,S=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((V=n[e++])>=0))throw Error("Invalid block size");if(V===0)break;e+=V}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=n[e++];p=n[e++]|n[e++]<<8,v=n[e++],!(1&E)&&(v=null),m=E>>2&7,e++;break;case 254:for(;;){if(!((V=n[e++])>=0))throw Error("Invalid block size");if(V===0)break;e+=V}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var k=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,G=n[e++],ee=G>>6&1,pe=1<<(7&G)+1,ge=a,O=l,j=!1;G>>7&&(j=!0,ge=e,O=pe,e+=3*pe);var Y=e;for(e++;;){var V;if(!((V=n[e++])>=0))throw Error("Invalid block size");if(V===0)break;e+=V}h.push({x:k,y:T,width:A,height:R,has_local_palette:j,palette_offset:ge,palette_size:O,data_offset:Y,data_length:e-Y,transparent_index:v,interlaced:!!ee,delay:p,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return S},this.frameInfo=function(N){if(N<0||N>=h.length)throw new Error("Frame index out of range.");return h[N]},this.decodeAndBlitFrameBGRA=function(N,q){var $=this.frameInfo(N),F=$.width*$.height,B=new Uint8Array(F);G5(n,$.data_offset,B,F);var Q=$.palette_offset,X=$.transparent_index;X===null&&(X=256);var _e=$.width,me=t-_e,We=_e,ae=4*($.y*t+$.x),ve=4*(($.y+$.height)*t+$.x),ye=ae,J=4*me;$.interlaced===!0&&(J+=4*t*7);for(var se=8,fe=0,ie=B.length;fe<ie;++fe){var te=B[fe];if(We===0&&(We=_e,(ye+=J)>=ve&&(J=4*me+4*t*(se-1),ye=ae+(_e+me)*(se<<1),se>>=1)),te===X)ye+=4;else{var Oe=n[Q+3*te],we=n[Q+3*te+1],Be=n[Q+3*te+2];q[ye++]=Be,q[ye++]=we,q[ye++]=Oe,q[ye++]=255}--We}},this.decodeAndBlitFrameRGBA=function(N,q){var $=this.frameInfo(N),F=$.width*$.height,B=new Uint8Array(F);G5(n,$.data_offset,B,F);var Q=$.palette_offset,X=$.transparent_index;X===null&&(X=256);var _e=$.width,me=t-_e,We=_e,ae=4*($.y*t+$.x),ve=4*(($.y+$.height)*t+$.x),ye=ae,J=4*me;$.interlaced===!0&&(J+=4*t*7);for(var se=8,fe=0,ie=B.length;fe<ie;++fe){var te=B[fe];if(We===0&&(We=_e,(ye+=J)>=ve&&(J=4*me+4*t*(se-1),ye=ae+(_e+me)*(se<<1),se>>=1)),te===X)ye+=4;else{var Oe=n[Q+3*te],we=n[Q+3*te+1],Be=n[Q+3*te+2];q[ye++]=Oe,q[ye++]=we,q[ye++]=Be,q[ye++]=255}--We}}}function G5(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,h=0,p=0,v=0,m=n[e++],S=new Int32Array(4096),E=null;;){for(;h<16&&m!==0;)p|=n[e++]<<h,h+=8,m===1?m=n[e++]:--m;if(h<l)break;var k=p&u;if(p>>=l,h-=l,k!==s){if(k===o)break;for(var T=k<a?k:E,A=0,R=T;R>s;)R=S[R]>>8,++A;var G=R;if(v+A+(T!==k?1:0)>r)return void Cs.log("Warning, gif stream longer than expected.");t[v++]=G;var ee=v+=A;for(T!==k&&(t[v++]=G),R=T;A--;)R=S[R],t[--ee]=255&R,R>>=8;E!==null&&a<4096&&(S[a++]=E<<8|G,a>=u+1&&l<12&&(++l,u=u<<1|1)),E=k}else a=o+1,u=(1<<(l=i+1))-1,E=null}return v!==r&&Cs.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function f_(n){var e,t,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),h=new Array(64),p=new Array(65535),v=new Array(65535),m=new Array(64),S=new Array(64),E=[],k=0,T=7,A=new Array(64),R=new Array(64),G=new Array(64),ee=new Array(256),pe=new Array(2048),ge=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],V=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],q=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],F=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function B(ae,ve){for(var ye=0,J=0,se=new Array,fe=1;fe<=16;fe++){for(var ie=1;ie<=ae[fe];ie++)se[ve[J]]=[],se[ve[J]][0]=ye,se[ve[J]][1]=fe,J++,ye++;ye*=2}return se}function Q(ae){for(var ve=ae[0],ye=ae[1]-1;ye>=0;)ve&1<<ye&&(k|=1<<T),ye--,--T<0&&(k==255?(X(255),X(0)):X(k),T=7,k=0)}function X(ae){E.push(ae)}function _e(ae){X(ae>>8&255),X(255&ae)}function me(ae,ve,ye,J,se){for(var fe,ie=se[0],te=se[240],Oe=function(Ge,Se){var ce,je,st,lt,_t,Je,zt,Xt,et,ut,ot=0;for(et=0;et<8;++et){ce=Ge[ot],je=Ge[ot+1],st=Ge[ot+2],lt=Ge[ot+3],_t=Ge[ot+4],Je=Ge[ot+5],zt=Ge[ot+6];var It=ce+(Xt=Ge[ot+7]),Jt=ce-Xt,xn=je+zt,Sn=je-zt,An=st+Je,Zn=st-Je,Cn=lt+_t,cn=lt-_t,bn=It+Cn,ir=It-Cn,hr=xn+An,wr=xn-An;Ge[ot]=bn+hr,Ge[ot+4]=bn-hr;var Kn=.707106781*(wr+ir);Ge[ot+2]=ir+Kn,Ge[ot+6]=ir-Kn;var Rr=.382683433*((bn=cn+Zn)-(wr=Sn+Jt)),ms=.5411961*bn+Rr,Bi=1.306562965*wr+Rr,Vs=.707106781*(hr=Zn+Sn),is=Jt+Vs,Xn=Jt-Vs;Ge[ot+5]=Xn+ms,Ge[ot+3]=Xn-ms,Ge[ot+1]=is+Bi,Ge[ot+7]=is-Bi,ot+=8}for(ot=0,et=0;et<8;++et){ce=Ge[ot],je=Ge[ot+8],st=Ge[ot+16],lt=Ge[ot+24],_t=Ge[ot+32],Je=Ge[ot+40],zt=Ge[ot+48];var ss=ce+(Xt=Ge[ot+56]),Et=ce-Xt,at=je+zt,Bt=je-zt,Yt=st+Je,In=st-Je,Pn=lt+_t,Er=lt-_t,Yn=ss+Pn,Ct=ss-Pn,mn=at+Yt,Hn=at-Yt;Ge[ot]=Yn+mn,Ge[ot+32]=Yn-mn;var en=.707106781*(Hn+Ct);Ge[ot+16]=Ct+en,Ge[ot+48]=Ct-en;var ln=.382683433*((Yn=Er+In)-(Hn=Bt+Et)),Rn=.5411961*Yn+ln,vr=1.306562965*Hn+ln,us=.707106781*(mn=In+Bt),En=Et+us,Lr=Et-us;Ge[ot+40]=Lr+Rn,Ge[ot+24]=Lr-Rn,Ge[ot+8]=En+vr,Ge[ot+56]=En-vr,ot++}for(et=0;et<64;++et)ut=Ge[et]*Se[et],m[et]=ut>0?ut+.5|0:ut-.5|0;return m}(ae,ve),we=0;we<64;++we)S[ge[we]]=Oe[we];var Be=S[0]-ye;ye=S[0],Be==0?Q(J[0]):(Q(J[v[fe=32767+Be]]),Q(p[fe]));for(var ue=63;ue>0&&S[ue]==0;)ue--;if(ue==0)return Q(ie),ye;for(var re,Z=1;Z<=ue;){for(var U=Z;S[Z]==0&&Z<=ue;)++Z;var xe=Z-U;if(xe>=16){re=xe>>4;for(var Ne=1;Ne<=re;++Ne)Q(te);xe&=15}fe=32767+S[Z],Q(se[(xe<<4)+v[fe]]),Q(p[fe]),Z++}return ue!=63&&Q(ie),ye}function We(ae){ae=Math.min(Math.max(ae,1),100),s!=ae&&(function(ve){for(var ye=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],J=0;J<64;J++){var se=o((ye[J]*ve+50)/100);se=Math.min(Math.max(se,1),255),a[ge[J]]=se}for(var fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var te=o((fe[ie]*ve+50)/100);te=Math.min(Math.max(te,1),255),l[ge[ie]]=te}for(var Oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,Be=0;Be<8;Be++)for(var ue=0;ue<8;ue++)u[we]=1/(a[ge[we]]*Oe[Be]*Oe[ue]*8),h[we]=1/(l[ge[we]]*Oe[Be]*Oe[ue]*8),we++}(ae<50?Math.floor(5e3/ae):Math.floor(200-2*ae)),s=ae)}this.encode=function(ae,ve){ve&&We(ve),E=new Array,k=0,T=7,_e(65496),_e(65504),_e(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),_e(1),_e(1),X(0),X(0),function(){_e(65499),_e(132),X(0);for(var je=0;je<64;je++)X(a[je]);X(1);for(var st=0;st<64;st++)X(l[st])}(),function(je,st){_e(65472),_e(17),X(8),_e(st),_e(je),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(ae.width,ae.height),function(){_e(65476),_e(418),X(0);for(var je=0;je<16;je++)X(O[je+1]);for(var st=0;st<=11;st++)X(j[st]);X(16);for(var lt=0;lt<16;lt++)X(Y[lt+1]);for(var _t=0;_t<=161;_t++)X(V[_t]);X(1);for(var Je=0;Je<16;Je++)X(N[Je+1]);for(var zt=0;zt<=11;zt++)X(q[zt]);X(17);for(var Xt=0;Xt<16;Xt++)X($[Xt+1]);for(var et=0;et<=161;et++)X(F[et])}(),_e(65498),_e(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var ye=0,J=0,se=0;k=0,T=7,this.encode.displayName="_encode_";for(var fe,ie,te,Oe,we,Be,ue,re,Z,U=ae.data,xe=ae.width,Ne=ae.height,Ge=4*xe,Se=0;Se<Ne;){for(fe=0;fe<Ge;){for(we=Ge*Se+fe,ue=-1,re=0,Z=0;Z<64;Z++)Be=we+(re=Z>>3)*Ge+(ue=4*(7&Z)),Se+re>=Ne&&(Be-=Ge*(Se+1+re-Ne)),fe+ue>=Ge&&(Be-=fe+ue-Ge+4),ie=U[Be++],te=U[Be++],Oe=U[Be++],A[Z]=(pe[ie]+pe[te+256>>0]+pe[Oe+512>>0]>>16)-128,R[Z]=(pe[ie+768>>0]+pe[te+1024>>0]+pe[Oe+1280>>0]>>16)-128,G[Z]=(pe[ie+1280>>0]+pe[te+1536>>0]+pe[Oe+1792>>0]>>16)-128;ye=me(A,u,ye,e,r),J=me(R,h,J,t,i),se=me(G,h,se,t,i),fe+=32}Se+=8}if(T>=0){var ce=[];ce[1]=T+1,ce[0]=(1<<T+1)-1,Q(ce)}return _e(65497),new Uint8Array(E)},n=n||50,function(){for(var ae=String.fromCharCode,ve=0;ve<256;ve++)ee[ve]=ae(ve)}(),e=B(O,j),t=B(N,q),r=B(Y,V),i=B($,F),function(){for(var ae=1,ve=2,ye=1;ye<=15;ye++){for(var J=ae;J<ve;J++)v[32767+J]=ye,p[32767+J]=[],p[32767+J][1]=ye,p[32767+J][0]=J;for(var se=-(ve-1);se<=-ae;se++)v[32767+se]=ye,p[32767+se]=[],p[32767+se][1]=ye,p[32767+se][0]=ve-1+se;ae<<=1,ve<<=1}}(),function(){for(var ae=0;ae<256;ae++)pe[ae]=19595*ae,pe[ae+256>>0]=38470*ae,pe[ae+512>>0]=7471*ae+32768,pe[ae+768>>0]=-11059*ae,pe[ae+1024>>0]=-21709*ae,pe[ae+1280>>0]=32768*ae+8421375,pe[ae+1536>>0]=-27439*ae,pe[ae+1792>>0]=-5329*ae}(),We(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function fc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function W5(n){function e(O){if(!O)throw Error("assert :P")}function t(O,j,Y){for(var V=0;4>V;V++)if(O[j+V]!=Y.charCodeAt(V))return!0;return!1}function r(O,j,Y,V,N){for(var q=0;q<N;q++)O[j+q]=Y[V+q]}function i(O,j,Y,V){for(var N=0;N<V;N++)O[j+N]=Y}function s(O){return new Int32Array(O)}function o(O,j){for(var Y=[],V=0;V<O;V++)Y.push(new j);return Y}function a(O,j){var Y=[];return function V(N,q,$){for(var F=$[q],B=0;B<F&&(N.push($.length>q+1?[]:new j),!($.length<q+1));B++)V(N[B],q+1,$)}(Y,0,O),Y}var l=function(){var O=this;function j(w,D){for(var K=1<<D-1>>>0;w&K;)K>>>=1;return K?(w&K-1)+K:w}function Y(w,D,K,he,Ee){e(!(he%K));do w[D+(he-=K)]=Ee;while(0<he)}function V(w,D,K,he,Ee){if(e(2328>=Ee),512>=Ee)var Ae=s(512);else if((Ae=s(Ee))==null)return 0;return function(Ie,ze,Ue,Qe,wt,Ht){var Gt,Tt,rn=ze,Qt=1<<Ue,xt=s(16),Mt=s(16);for(e(wt!=0),e(Qe!=null),e(Ie!=null),e(0<Ue),Tt=0;Tt<wt;++Tt){if(15<Qe[Tt])return 0;++xt[Qe[Tt]]}if(xt[0]==wt)return 0;for(Mt[1]=0,Gt=1;15>Gt;++Gt){if(xt[Gt]>1<<Gt)return 0;Mt[Gt+1]=Mt[Gt]+xt[Gt]}for(Tt=0;Tt<wt;++Tt)Gt=Qe[Tt],0<Qe[Tt]&&(Ht[Mt[Gt]++]=Tt);if(Mt[15]==1)return(Qe=new N).g=0,Qe.value=Ht[0],Y(Ie,rn,1,Qt,Qe),Qt;var an,yn=-1,un=Qt-1,jn=0,Nn=1,ur=1,d=1<<Ue;for(Tt=0,Gt=1,wt=2;Gt<=Ue;++Gt,wt<<=1){if(Nn+=ur<<=1,0>(ur-=xt[Gt]))return 0;for(;0<xt[Gt];--xt[Gt])(Qe=new N).g=Gt,Qe.value=Ht[Tt++],Y(Ie,rn+jn,wt,d,Qe),jn=j(jn,Gt)}for(Gt=Ue+1,wt=2;15>=Gt;++Gt,wt<<=1){if(Nn+=ur<<=1,0>(ur-=xt[Gt]))return 0;for(;0<xt[Gt];--xt[Gt]){if(Qe=new N,(jn&un)!=yn){for(rn+=d,an=1<<(yn=Gt)-Ue;15>yn&&!(0>=(an-=xt[yn]));)++yn,an<<=1;Qt+=d=1<<(an=yn-Ue),Ie[ze+(yn=jn&un)].g=an+Ue,Ie[ze+yn].value=rn-ze-yn}Qe.g=Gt-Ue,Qe.value=Ht[Tt++],Y(Ie,rn+(jn>>Ue),wt,d,Qe),jn=j(jn,Gt)}}return Nn!=2*Mt[15]-1?0:Qt}(w,D,K,he,Ee,Ae)}function N(){this.value=this.g=0}function q(){this.value=this.g=0}function $(){this.G=o(5,N),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ks,q)}function F(w,D,K,he){e(w!=null),e(D!=null),e(2147483648>he),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=D,w.pa=K,w.Jd=D,w.Yc=K+he,w.Zc=4<=he?K+he-4+1:K,fe(w)}function B(w,D){for(var K=0;0<D--;)K|=te(w,128)<<D;return K}function Q(w,D){var K=B(w,D);return ie(w)?-K:K}function X(w,D,K,he){var Ee,Ae=0;for(e(w!=null),e(D!=null),e(4294967288>he),w.Sb=he,w.Ra=0,w.u=0,w.h=0,4<he&&(he=4),Ee=0;Ee<he;++Ee)Ae+=D[K+Ee]<<8*Ee;w.Ra=Ae,w.bb=he,w.oa=D,w.pa=K}function _e(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Io-8>>>0,++w.bb,w.u-=8;ye(w)&&(w.h=1,w.u=0)}function me(w,D){if(e(0<=D),!w.h&&D<=Jo){var K=ve(w)&Aa[D];return w.u+=D,_e(w),K}return w.h=1,w.u=0}function We(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ae(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ve(w){return w.Ra>>>(w.u&Io-1)>>>0}function ye(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Io}function J(w,D){w.u=D,w.h=ye(w)}function se(w){w.u>=Ul&&(e(w.u>=Ul),_e(w))}function fe(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function ie(w){return B(w,1)}function te(w,D){var K=w.Ca;0>w.b&&fe(w);var he=w.b,Ee=K*D>>>8,Ae=(w.I>>>he>Ee)+0;for(Ae?(K-=Ee,w.I-=Ee+1<<he>>>0):K=Ee+1,he=K,Ee=0;256<=he;)Ee+=8,he>>=8;return he=7^Ee+io[he],w.b-=he,w.Ca=(K<<he)-1,Ae}function Oe(w,D,K){w[D+0]=K>>24&255,w[D+1]=K>>16&255,w[D+2]=K>>8&255,w[D+3]=K>>0&255}function we(w,D){return w[D+0]<<0|w[D+1]<<8}function Be(w,D){return we(w,D)|w[D+2]<<16}function ue(w,D){return we(w,D)|we(w,D+2)<<16}function re(w,D){var K=1<<D;return e(w!=null),e(0<D),w.X=s(K),w.X==null?0:(w.Mb=32-D,w.Xa=D,1)}function Z(w,D){e(w!=null),e(D!=null),e(w.Xa==D.Xa),r(D.X,0,w.X,0,1<<D.Xa)}function U(){this.X=[],this.Xa=this.Mb=0}function xe(w,D,K,he){e(K!=null),e(he!=null);var Ee=K[0],Ae=he[0];return Ee==0&&(Ee=(w*Ae+D/2)/D),Ae==0&&(Ae=(D*Ee+w/2)/w),0>=Ee||0>=Ae?0:(K[0]=Ee,he[0]=Ae,1)}function Ne(w,D){return w+(1<<D)-1>>>D}function Ge(w,D){return((4278255360&w)+(4278255360&D)>>>0&4278255360)+((16711935&w)+(16711935&D)>>>0&16711935)>>>0}function Se(w,D){O[D]=function(K,he,Ee,Ae,Ie,ze,Ue){var Qe;for(Qe=0;Qe<Ie;++Qe){var wt=O[w](ze[Ue+Qe-1],Ee,Ae+Qe);ze[Ue+Qe]=Ge(K[he+Qe],wt)}}}function ce(){this.ud=this.hd=this.jd=0}function je(w,D){return((4278124286&(w^D))>>>1)+(w&D)>>>0}function st(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function lt(w,D){return st(w+(w-D+.5>>1))}function _t(w,D,K){return Math.abs(D-K)-Math.abs(w-K)}function Je(w,D,K,he,Ee,Ae,Ie){for(he=Ae[Ie-1],K=0;K<Ee;++K)Ae[Ie+K]=he=Ge(w[D+K],he)}function zt(w,D,K,he,Ee){var Ae;for(Ae=0;Ae<K;++Ae){var Ie=w[D+Ae],ze=Ie>>8&255,Ue=16711935&(Ue=(Ue=16711935&Ie)+((ze<<16)+ze));he[Ee+Ae]=(4278255360&Ie)+Ue>>>0}}function Xt(w,D){D.jd=w>>0&255,D.hd=w>>8&255,D.ud=w>>16&255}function et(w,D,K,he,Ee,Ae){var Ie;for(Ie=0;Ie<he;++Ie){var ze=D[K+Ie],Ue=ze>>>8,Qe=ze,wt=255&(wt=(wt=ze>>>16)+((w.jd<<24>>24)*(Ue<<24>>24)>>>5));Qe=255&(Qe=(Qe=Qe+((w.hd<<24>>24)*(Ue<<24>>24)>>>5))+((w.ud<<24>>24)*(wt<<24>>24)>>>5)),Ee[Ae+Ie]=(4278255360&ze)+(wt<<16)+Qe}}function ut(w,D,K,he,Ee){O[D]=function(Ae,Ie,ze,Ue,Qe,wt,Ht,Gt,Tt){for(Ue=Ht;Ue<Gt;++Ue)for(Ht=0;Ht<Tt;++Ht)Qe[wt++]=Ee(ze[he(Ae[Ie++])])},O[w]=function(Ae,Ie,ze,Ue,Qe,wt,Ht){var Gt=8>>Ae.b,Tt=Ae.Ea,rn=Ae.K[0],Qt=Ae.w;if(8>Gt)for(Ae=(1<<Ae.b)-1,Qt=(1<<Gt)-1;Ie<ze;++Ie){var xt,Mt=0;for(xt=0;xt<Tt;++xt)xt&Ae||(Mt=he(Ue[Qe++])),wt[Ht++]=Ee(rn[Mt&Qt]),Mt>>=Gt}else O["VP8LMapColor"+K](Ue,Qe,rn,Qt,wt,Ht,Ie,ze,Tt)}}function ot(w,D,K,he,Ee){for(K=D+K;D<K;){var Ae=w[D++];he[Ee++]=Ae>>16&255,he[Ee++]=Ae>>8&255,he[Ee++]=Ae>>0&255}}function It(w,D,K,he,Ee){for(K=D+K;D<K;){var Ae=w[D++];he[Ee++]=Ae>>16&255,he[Ee++]=Ae>>8&255,he[Ee++]=Ae>>0&255,he[Ee++]=Ae>>24&255}}function Jt(w,D,K,he,Ee){for(K=D+K;D<K;){var Ae=(Ie=w[D++])>>16&240|Ie>>12&15,Ie=Ie>>0&240|Ie>>28&15;he[Ee++]=Ae,he[Ee++]=Ie}}function xn(w,D,K,he,Ee){for(K=D+K;D<K;){var Ae=(Ie=w[D++])>>16&248|Ie>>13&7,Ie=Ie>>5&224|Ie>>3&31;he[Ee++]=Ae,he[Ee++]=Ie}}function Sn(w,D,K,he,Ee){for(K=D+K;D<K;){var Ae=w[D++];he[Ee++]=Ae>>0&255,he[Ee++]=Ae>>8&255,he[Ee++]=Ae>>16&255}}function An(w,D,K,he,Ee,Ae){if(Ae==0)for(K=D+K;D<K;)Oe(he,((Ae=w[D++])[0]>>24|Ae[1]>>8&65280|Ae[2]<<8&16711680|Ae[3]<<24)>>>0),Ee+=32;else r(he,Ee,w,D,K)}function Zn(w,D){O[D][0]=O[w+"0"],O[D][1]=O[w+"1"],O[D][2]=O[w+"2"],O[D][3]=O[w+"3"],O[D][4]=O[w+"4"],O[D][5]=O[w+"5"],O[D][6]=O[w+"6"],O[D][7]=O[w+"7"],O[D][8]=O[w+"8"],O[D][9]=O[w+"9"],O[D][10]=O[w+"10"],O[D][11]=O[w+"11"],O[D][12]=O[w+"12"],O[D][13]=O[w+"13"],O[D][14]=O[w+"0"],O[D][15]=O[w+"0"]}function Cn(w){return w==Ys||w==Ks||w==_a||w==c}function cn(){this.eb=[],this.size=this.A=this.fb=0}function bn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ir(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new cn,this.f.kb=new bn,this.sd=null}function hr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function wr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Kn(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Rr(w,D){var K=w.T,he=D.ba.f.RGBA,Ee=he.eb,Ae=he.fb+w.ka*he.A,Ie=co[D.ba.S],ze=w.y,Ue=w.O,Qe=w.f,wt=w.N,Ht=w.ea,Gt=w.W,Tt=D.cc,rn=D.dc,Qt=D.Mc,xt=D.Nc,Mt=w.ka,an=w.ka+w.T,yn=w.U,un=yn+1>>1;for(Mt==0?Ie(ze,Ue,null,null,Qe,wt,Ht,Gt,Qe,wt,Ht,Gt,Ee,Ae,null,null,yn):(Ie(D.ec,D.fc,ze,Ue,Tt,rn,Qt,xt,Qe,wt,Ht,Gt,Ee,Ae-he.A,Ee,Ae,yn),++K);Mt+2<an;Mt+=2)Tt=Qe,rn=wt,Qt=Ht,xt=Gt,wt+=w.Rc,Gt+=w.Rc,Ae+=2*he.A,Ie(ze,(Ue+=2*w.fa)-w.fa,ze,Ue,Tt,rn,Qt,xt,Qe,wt,Ht,Gt,Ee,Ae-he.A,Ee,Ae,yn);return Ue+=w.fa,w.j+an<w.o?(r(D.ec,D.fc,ze,Ue,yn),r(D.cc,D.dc,Qe,wt,un),r(D.Mc,D.Nc,Ht,Gt,un),K--):1&an||Ie(ze,Ue,null,null,Qe,wt,Ht,Gt,Qe,wt,Ht,Gt,Ee,Ae+he.A,null,null,yn),K}function ms(w,D,K){var he=w.F,Ee=[w.J];if(he!=null){var Ae=w.U,Ie=D.ba.S,ze=Ie==ya||Ie==_a;D=D.ba.f.RGBA;var Ue=[0],Qe=w.ka;Ue[0]=w.T,w.Kb&&(Qe==0?--Ue[0]:(--Qe,Ee[0]-=w.width),w.j+w.ka+w.T==w.o&&(Ue[0]=w.o-w.j-Qe));var wt=D.eb;Qe=D.fb+Qe*D.A,w=Di(he,Ee[0],w.width,Ae,Ue,wt,Qe+(ze?0:3),D.A),e(K==Ue),w&&Cn(Ie)&&qs(wt,Qe,ze,Ae,Ue,D.A)}return 0}function Bi(w){var D=w.ma,K=D.ba.S,he=11>K,Ee=K==br||K==Xa||K==ya||K==xo||K==12||Cn(K);if(D.memory=null,D.Ib=null,D.Jb=null,D.Nd=null,!tc(D.Oa,w,Ee?11:12))return 0;if(Ee&&Cn(K)&&vn(),w.da)alert("todo:use_scaling");else{if(he){if(D.Ib=Kn,w.Kb){if(K=w.U+1>>1,D.memory=s(w.U+2*K),D.memory==null)return 0;D.ec=D.memory,D.fc=0,D.cc=D.ec,D.dc=D.fc+w.U,D.Mc=D.cc,D.Nc=D.dc+K,D.Ib=Rr,vn()}}else alert("todo:EmitYUV");Ee&&(D.Jb=ms,he&&Ot())}if(he&&!Rc){for(w=0;256>w;++w)qd[w]=89858*(w-128)+bl>>Wd,Yd[w]=-22014*(w-128)+bl,Wp[w]=-45773*(w-128),vu[w]=113618*(w-128)+bl>>Wd;for(w=dd;w<Oh;++w)D=76283*(w-16)+bl>>Wd,Kd[w-dd]=Gr(D,255),Df[w-dd]=Gr(D+8>>4,15);Rc=1}return 1}function Vs(w){var D=w.ma,K=w.U,he=w.T;return e(!(1&w.ka)),0>=K||0>=he?0:(K=D.Ib(w,D),D.Jb!=null&&D.Jb(w,D,K),D.Dc+=K,1)}function is(w){w.ma.memory=null}function Xn(w,D,K,he){return me(w,8)!=47?0:(D[0]=me(w,14)+1,K[0]=me(w,14)+1,he[0]=me(w,1),me(w,3)!=0?0:!w.h)}function ss(w,D){if(4>w)return w+1;var K=w-2>>1;return(2+(1&w)<<K)+me(D,K)+1}function Et(w,D){return 120<D?D-120:1<=(K=((K=ft[D-1])>>4)*w+(8-(15&K)))?K:1;var K}function at(w,D,K){var he=ve(K),Ee=w[D+=255&he].g-8;return 0<Ee&&(J(K,K.u+8),he=ve(K),D+=w[D].value,D+=he&(1<<Ee)-1),J(K,K.u+w[D].g),w[D].value}function Bt(w,D,K){return K.g+=w.g,K.value+=w.value<<D>>>0,e(8>=K.g),w.g}function Yt(w,D,K){var he=w.xc;return e((D=he==0?0:w.vc[w.md*(K>>he)+(D>>he)])<w.Wb),w.Ya[D]}function In(w,D,K,he){var Ee=w.ab,Ae=w.c*D,Ie=w.C;D=Ie+D;var ze=K,Ue=he;for(he=w.Ta,K=w.Ua;0<Ee--;){var Qe=w.gc[Ee],wt=Ie,Ht=D,Gt=ze,Tt=Ue,rn=(Ue=he,ze=K,Qe.Ea);switch(e(wt<Ht),e(Ht<=Qe.nc),Qe.hc){case 2:Nc(Gt,Tt,(Ht-wt)*rn,Ue,ze);break;case 0:var Qt=wt,xt=Ht,Mt=Ue,an=ze,yn=(d=Qe).Ea;Qt==0&&(_o(Gt,Tt,null,null,1,Mt,an),Je(Gt,Tt+1,0,0,yn-1,Mt,an+1),Tt+=yn,an+=yn,++Qt);for(var un=1<<d.b,jn=un-1,Nn=Ne(yn,d.b),ur=d.K,d=d.w+(Qt>>d.b)*Nn;Qt<xt;){var g=ur,b=d,C=1;for(bo(Gt,Tt,Mt,an-yn,1,Mt,an);C<yn;){var M=(C&~jn)+un;M>yn&&(M=yn),(0,qa[g[b++]>>8&15])(Gt,Tt+ +C,Mt,an+C-yn,M-C,Mt,an+C),C=M}Tt+=yn,an+=yn,++Qt&jn||(d+=Nn)}Ht!=Qe.nc&&r(Ue,ze-rn,Ue,ze+(Ht-wt-1)*rn,rn);break;case 1:for(rn=Gt,xt=Tt,yn=(Gt=Qe.Ea)-(an=Gt&~(Mt=(Tt=1<<Qe.b)-1)),Qt=Ne(Gt,Qe.b),un=Qe.K,Qe=Qe.w+(wt>>Qe.b)*Qt;wt<Ht;){for(jn=un,Nn=Qe,ur=new ce,d=xt+an,g=xt+Gt;xt<d;)Xt(jn[Nn++],ur),Ya(ur,rn,xt,Tt,Ue,ze),xt+=Tt,ze+=Tt;xt<g&&(Xt(jn[Nn++],ur),Ya(ur,rn,xt,yn,Ue,ze),xt+=yn,ze+=yn),++wt&Mt||(Qe+=Qt)}break;case 3:if(Gt==Ue&&Tt==ze&&0<Qe.b){for(xt=Ue,Gt=rn=ze+(Ht-wt)*rn-(an=(Ht-wt)*Ne(Qe.Ea,Qe.b)),Tt=Ue,Mt=ze,Qt=[],an=(yn=an)-1;0<=an;--an)Qt[an]=Tt[Mt+an];for(an=yn-1;0<=an;--an)xt[Gt+an]=Qt[an];Fs(Qe,wt,Ht,Ue,rn,Ue,ze)}else Fs(Qe,wt,Ht,Gt,Tt,Ue,ze)}ze=he,Ue=K}Ue!=K&&r(he,K,ze,Ue,Ae)}function Pn(w,D){var K=w.V,he=w.Ba+w.c*w.C,Ee=D-w.C;if(e(D<=w.l.o),e(16>=Ee),0<Ee){var Ae=w.l,Ie=w.Ta,ze=w.Ua,Ue=Ae.width;if(In(w,Ee,K,he),Ee=ze=[ze],e((K=w.C)<(he=D)),e(Ae.v<Ae.va),he>Ae.o&&(he=Ae.o),K<Ae.j){var Qe=Ae.j-K;K=Ae.j,Ee[0]+=Qe*Ue}if(K>=he?K=0:(Ee[0]+=4*Ae.v,Ae.ka=K-Ae.j,Ae.U=Ae.va-Ae.v,Ae.T=he-K,K=1),K){if(ze=ze[0],11>(K=w.ca).S){var wt=K.f.RGBA,Ht=(he=K.S,Ee=Ae.U,Ae=Ae.T,Qe=wt.eb,wt.A),Gt=Ae;for(wt=wt.fb+w.Ma*wt.A;0<Gt--;){var Tt=Ie,rn=ze,Qt=Ee,xt=Qe,Mt=wt;switch(he){case No:ao(Tt,rn,Qt,xt,Mt);break;case br:Ws(Tt,rn,Qt,xt,Mt);break;case Ys:Ws(Tt,rn,Qt,xt,Mt),qs(xt,Mt,0,Qt,1,0);break;case Za:lo(Tt,rn,Qt,xt,Mt);break;case Xa:An(Tt,rn,Qt,xt,Mt,1);break;case Ks:An(Tt,rn,Qt,xt,Mt,1),qs(xt,Mt,0,Qt,1,0);break;case ya:An(Tt,rn,Qt,xt,Mt,0);break;case _a:An(Tt,rn,Qt,xt,Mt,0),qs(xt,Mt,1,Qt,1,0);break;case xo:Ta(Tt,rn,Qt,xt,Mt);break;case c:Ta(Tt,rn,Qt,xt,Mt),Si(xt,Mt,Qt,1,0);break;case ud:Qo(Tt,rn,Qt,xt,Mt);break;default:e(0)}ze+=Ue,wt+=Ht}w.Ma+=Ae}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=K.height)}}w.C=D,e(w.C<=w.i)}function Er(w){var D;if(0<w.ua)return 0;for(D=0;D<w.Wb;++D){var K=w.Ya[D].G,he=w.Ya[D].H;if(0<K[1][he[1]+0].g||0<K[2][he[2]+0].g||0<K[3][he[3]+0].g)return 0}return 1}function Yn(w,D,K,he,Ee,Ae){if(w.Z!=0){var Ie=w.qd,ze=w.rd;for(e(mi[w.Z]!=null);D<K;++D)mi[w.Z](Ie,ze,he,Ee,he,Ee,Ae),Ie=he,ze=Ee,Ee+=Ae;w.qd=Ie,w.rd=ze}}function Ct(w,D){var K=w.l.ma,he=K.Z==0||K.Z==1?w.l.j:w.C;if(he=w.C<he?he:w.C,e(D<=w.l.o),D>he){var Ee=w.l.width,Ae=K.ca,Ie=K.tb+Ee*he,ze=w.V,Ue=w.Ba+w.c*he,Qe=w.gc;e(w.ab==1),e(Qe[0].hc==3),so(Qe[0],he,D,ze,Ue,Ae,Ie),Yn(K,he,D,Ae,Ie,Ee)}w.C=w.Ma=D}function mn(w,D,K,he,Ee,Ae,Ie){var ze=w.$/he,Ue=w.$%he,Qe=w.m,wt=w.s,Ht=K+w.$,Gt=Ht;Ee=K+he*Ee;var Tt=K+he*Ae,rn=280+wt.ua,Qt=w.Pb?ze:16777216,xt=0<wt.ua?wt.Wa:null,Mt=wt.wc,an=Ht<Tt?Yt(wt,Ue,ze):null;e(w.C<Ae),e(Tt<=Ee);var yn=!1;e:for(;;){for(;yn||Ht<Tt;){var un=0;if(ze>=Qt){var jn=Ht-K;e((Qt=w).Pb),Qt.wd=Qt.m,Qt.xd=jn,0<Qt.s.ua&&Z(Qt.s.Wa,Qt.s.vb),Qt=ze+Zt}if(Ue&Mt||(an=Yt(wt,Ue,ze)),e(an!=null),an.Qb&&(D[Ht]=an.qb,yn=!0),!yn)if(se(Qe),an.jc){un=Qe,jn=D;var Nn=Ht,ur=an.pd[ve(un)&ks-1];e(an.jc),256>ur.g?(J(un,un.u+ur.g),jn[Nn]=ur.value,un=0):(J(un,un.u+ur.g-256),e(256<=ur.value),un=ur.value),un==0&&(yn=!0)}else un=at(an.G[0],an.H[0],Qe);if(Qe.h)break;if(yn||256>un){if(!yn)if(an.nd)D[Ht]=(an.qb|un<<8)>>>0;else{if(se(Qe),yn=at(an.G[1],an.H[1],Qe),se(Qe),jn=at(an.G[2],an.H[2],Qe),Nn=at(an.G[3],an.H[3],Qe),Qe.h)break;D[Ht]=(Nn<<24|yn<<16|un<<8|jn)>>>0}if(yn=!1,++Ht,++Ue>=he&&(Ue=0,++ze,Ie!=null&&ze<=Ae&&!(ze%16)&&Ie(w,ze),xt!=null))for(;Gt<Ht;)un=D[Gt++],xt.X[(506832829*un&4294967295)>>>xt.Mb]=un}else if(280>un){if(un=ss(un-256,Qe),jn=at(an.G[4],an.H[4],Qe),se(Qe),jn=Et(he,jn=ss(jn,Qe)),Qe.h)break;if(Ht-K<jn||Ee-Ht<un)break e;for(Nn=0;Nn<un;++Nn)D[Ht+Nn]=D[Ht+Nn-jn];for(Ht+=un,Ue+=un;Ue>=he;)Ue-=he,++ze,Ie!=null&&ze<=Ae&&!(ze%16)&&Ie(w,ze);if(e(Ht<=Ee),Ue&Mt&&(an=Yt(wt,Ue,ze)),xt!=null)for(;Gt<Ht;)un=D[Gt++],xt.X[(506832829*un&4294967295)>>>xt.Mb]=un}else{if(!(un<rn))break e;for(yn=un-280,e(xt!=null);Gt<Ht;)un=D[Gt++],xt.X[(506832829*un&4294967295)>>>xt.Mb]=un;un=Ht,e(!(yn>>>(jn=xt).Xa)),D[un]=jn.X[yn],yn=!0}yn||e(Qe.h==ye(Qe))}if(w.Pb&&Qe.h&&Ht<Ee)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Z(w.s.vb,w.s.Wa);else{if(Qe.h)break e;Ie!=null&&Ie(w,ze>Ae?Ae:ze),w.a=0,w.$=Ht-K}return 1}return w.a=3,0}function Hn(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var D=w.Wa;D!=null&&(D.X=null),w.vb=null,e(w!=null)}function en(){var w=new jl;return w==null?null:(w.a=0,w.xb=Nu,Zn("Predictor","VP8LPredictors"),Zn("Predictor","VP8LPredictors_C"),Zn("PredictorAdd","VP8LPredictorsAdd"),Zn("PredictorAdd","VP8LPredictorsAdd_C"),Nc=zt,Ya=et,ao=ot,Ws=It,Ta=Jt,Qo=xn,lo=Sn,O.VP8LMapColor32b=Wa,O.VP8LMapColor8b=oo,w)}function ln(w,D,K,he,Ee){var Ae=1,Ie=[w],ze=[D],Ue=he.m,Qe=he.s,wt=null,Ht=0;e:for(;;){if(K)for(;Ae&&me(Ue,1);){var Gt=Ie,Tt=ze,rn=he,Qt=1,xt=rn.m,Mt=rn.gc[rn.ab],an=me(xt,2);if(rn.Oc&1<<an)Ae=0;else{switch(rn.Oc|=1<<an,Mt.hc=an,Mt.Ea=Gt[0],Mt.nc=Tt[0],Mt.K=[null],++rn.ab,e(4>=rn.ab),an){case 0:case 1:Mt.b=me(xt,3)+2,Qt=ln(Ne(Mt.Ea,Mt.b),Ne(Mt.nc,Mt.b),0,rn,Mt.K),Mt.K=Mt.K[0];break;case 3:var yn,un=me(xt,8)+1,jn=16<un?0:4<un?1:2<un?2:3;if(Gt[0]=Ne(Mt.Ea,jn),Mt.b=jn,yn=Qt=ln(un,1,0,rn,Mt.K)){var Nn,ur=un,d=Mt,g=1<<(8>>d.b),b=s(g);if(b==null)yn=0;else{var C=d.K[0],M=d.w;for(b[0]=d.K[0][0],Nn=1;Nn<1*ur;++Nn)b[Nn]=Ge(C[M+Nn],b[Nn-1]);for(;Nn<4*g;++Nn)b[Nn]=0;d.K[0]=null,d.K[0]=b,yn=1}}Qt=yn;break;case 2:break;default:e(0)}Ae=Qt}}if(Ie=Ie[0],ze=ze[0],Ae&&me(Ue,1)&&!(Ae=1<=(Ht=me(Ue,4))&&11>=Ht)){he.a=3;break e}var H;if(H=Ae)t:{var ne,le,be,Me=he,it=Ie,Xe=ze,Pt=Ht,Ut=K,on=Me.m,Mn=Me.s,Dn=[null],yr=1,rt=0,ct=jt[Pt];n:for(;;){if(Ut&&me(on,1)){var bt=me(on,3)+2,Wt=Ne(it,bt),At=Ne(Xe,bt),Vt=Wt*At;if(!ln(Wt,At,0,Me,Dn))break n;for(Dn=Dn[0],Mn.xc=bt,ne=0;ne<Vt;++ne){var Le=Dn[ne]>>8&65535;Dn[ne]=Le,Le>=yr&&(yr=Le+1)}}if(on.h)break n;for(le=0;5>le;++le){var Te=W[le];!le&&0<Pt&&(Te+=1<<Pt),rt<Te&&(rt=Te)}var He=o(yr*ct,N),Ve=yr,Ke=o(Ve,$);if(Ke==null)var Ze=null;else e(65536>=Ve),Ze=Ke;var pt=s(rt);if(Ze==null||pt==null||He==null){Me.a=1;break n}var gt=He;for(ne=be=0;ne<yr;++ne){var Lt=Ze[ne],Nt=Lt.G,Rt=Lt.H,dn=0,Wn=1,Qn=0;for(le=0;5>le;++le){Te=W[le],Nt[le]=gt,Rt[le]=be,!le&&0<Pt&&(Te+=1<<Pt);i:{var cr,vi=Te,Ii=Me,ei=pt,Hi=gt,Fo=be,ic=0,Fa=Ii.m,Nh=me(Fa,1);if(i(ei,0,0,vi),Nh){var wl=me(Fa,1)+1,Bc=me(Fa,1),ja=me(Fa,Bc==0?1:8);ei[ja]=1,wl==2&&(ei[ja=me(Fa,8)]=1);var ho=1}else{var Ls=s(19),Bf=me(Fa,4)+4;if(19<Bf){Ii.a=3;var Rh=0;break i}for(cr=0;cr<Bf;++cr)Ls[ke[cr]]=me(Fa,3);var Bh=void 0,Fh=void 0,Ff=Ii,li=Ls,jf=vi,Hm=ei,hd=0,sc=Ff.m,Gm=8,Wm=o(128,N);r:for(;V(Wm,0,7,li,19);){if(me(sc,1)){var Vl=2+2*me(sc,3);if((Bh=2+me(sc,Vl))>jf)break r}else Bh=jf;for(Fh=0;Fh<jf&&Bh--;){se(sc);var qm=Wm[0+(127&ve(sc))];J(sc,sc.u+qm.g);var oc=qm.value;if(16>oc)Hm[Fh++]=oc,oc!=0&&(Gm=oc);else{var qp=oc==16,Yp=oc-16,Ym=P[Yp],Qa=me(sc,y[Yp])+Ym;if(Fh+Qa>jf)break r;for(var Fc=qp?Gm:0;0<Qa--;)Hm[Fh++]=Fc}}hd=1;break r}hd||(Ff.a=3),ho=hd}(ho=ho&&!Fa.h)&&(ic=V(Hi,Fo,8,ei,vi)),ho&&ic!=0?Rh=ic:(Ii.a=3,Rh=0)}if(Rh==0)break n;if(Wn&&de[le]==1&&(Wn=gt[be].g==0),dn+=gt[be].g,be+=Rh,3>=le){var fd,zf=pt[0];for(fd=1;fd<Te;++fd)pt[fd]>zf&&(zf=pt[fd]);Qn+=zf}}if(Lt.nd=Wn,Lt.Qb=0,Wn&&(Lt.qb=(Nt[3][Rt[3]+0].value<<24|Nt[1][Rt[1]+0].value<<16|Nt[2][Rt[2]+0].value)>>>0,dn==0&&256>Nt[0][Rt[0]+0].value&&(Lt.Qb=1,Lt.qb+=Nt[0][Rt[0]+0].value<<8)),Lt.jc=!Lt.Qb&&6>Qn,Lt.jc){var pd,Ru=Lt;for(pd=0;pd<ks;++pd){var Bu=pd,ac=Ru.pd[Bu],Zd=Ru.G[0][Ru.H[0]+Bu];256<=Zd.value?(ac.g=Zd.g+256,ac.value=Zd.value):(ac.g=0,ac.value=0,Bu>>=Bt(Zd,8,ac),Bu>>=Bt(Ru.G[1][Ru.H[1]+Bu],16,ac),Bu>>=Bt(Ru.G[2][Ru.H[2]+Bu],0,ac),Bt(Ru.G[3][Ru.H[3]+Bu],24,ac))}}}Mn.vc=Dn,Mn.Wb=yr,Mn.Ya=Ze,Mn.yc=He,H=1;break t}H=0}if(!(Ae=H)){he.a=3;break e}if(0<Ht){if(Qe.ua=1<<Ht,!re(Qe.Wa,Ht)){he.a=1,Ae=0;break e}}else Qe.ua=0;var jh=he,lc=Ie,r1=ze,Fu=jh.s,$f=Fu.xc;if(jh.c=lc,jh.i=r1,Fu.md=Ne(lc,$f),Fu.wc=$f==0?-1:(1<<$f)-1,K){he.xb=Ih;break e}if((wt=s(Ie*ze))==null){he.a=1,Ae=0;break e}Ae=(Ae=mn(he,wt,0,Ie,ze,ze,null))&&!Ue.h;break e}return Ae?(Ee!=null?Ee[0]=wt:(e(wt==null),e(K)),he.$=0,K||Hn(Qe)):Hn(Qe),Ae}function Rn(w,D){var K=w.c*w.i,he=K+D+16*D;return e(w.c<=D),w.V=s(he),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+K+D,1)}function vr(w,D){var K=w.C,he=D-K,Ee=w.V,Ae=w.Ba+w.c*K;for(e(D<=w.l.o);0<he;){var Ie=16<he?16:he,ze=w.l.ma,Ue=w.l.width,Qe=Ue*Ie,wt=ze.ca,Ht=ze.tb+Ue*K,Gt=w.Ta,Tt=w.Ua;In(w,Ie,Ee,Ae),xs(Gt,Tt,wt,Ht,Qe),Yn(ze,K,K+Ie,wt,Ht,Ue),he-=Ie,Ee+=Ie*w.c,K+=Ie}e(K==D),w.C=w.Ma=D}function us(){this.ub=this.yd=this.td=this.Rb=0}function En(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Lr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Jn(){this.Yb=function(){var w=[];return function D(K,he,Ee){for(var Ae=Ee[he],Ie=0;Ie<Ae&&(K.push(Ee.length>he+1?[]:0),!(Ee.length<he+1));Ie++)D(K[Ie],he+1,Ee)}(w,0,[3,11]),w}()}function Ki(){this.jb=s(3),this.Wc=a([4,8],Jn),this.Xc=a([4,17],Jn)}function fi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function pi(){this.ld=this.La=this.dd=this.tc=0}function $i(){this.Na=this.la=0}function Ai(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Fi(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ji(){this.uc=this.M=this.Nb=0,this.wa=Array(new pi),this.Y=0,this.ya=Array(new Fi),this.aa=0,this.l=new Sr}function os(){this.y=s(16),this.f=s(8),this.ea=s(8)}function cs(){this.cb=this.a=0,this.sc="",this.m=new We,this.Od=new us,this.Kc=new En,this.ed=new fi,this.Qa=new Lr,this.Ic=this.$c=this.Aa=0,this.D=new ji,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,We),this.ia=0,this.pb=o(4,Ai),this.Pa=new Ki,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new os),this.Hd=0,this.rb=Array(new $i),this.sb=0,this.wa=Array(new pi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Fi),this.L=this.aa=0,this.gd=a([4,2],pi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Sr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function kr(){var w=new cs;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,lr||(lr=Bs)),w}function nr(w,D,K){return w.a==0&&(w.a=D,w.sc=K,w.cb=0),0}function to(w,D,K){return 3<=K&&w[D+0]==157&&w[D+1]==1&&w[D+2]==42}function no(w,D){if(w==null)return 0;if(w.a=0,w.sc="OK",D==null)return nr(w,2,"null VP8Io passed to VP8GetHeaders()");var K=D.data,he=D.w,Ee=D.ha;if(4>Ee)return nr(w,7,"Truncated header.");var Ae=K[he+0]|K[he+1]<<8|K[he+2]<<16,Ie=w.Od;if(Ie.Rb=!(1&Ae),Ie.td=Ae>>1&7,Ie.yd=Ae>>4&1,Ie.ub=Ae>>5,3<Ie.td)return nr(w,3,"Incorrect keyframe parameters.");if(!Ie.yd)return nr(w,4,"Frame not displayable.");he+=3,Ee-=3;var ze=w.Kc;if(Ie.Rb){if(7>Ee)return nr(w,7,"cannot parse picture header");if(!to(K,he,Ee))return nr(w,3,"Bad code word");ze.c=16383&(K[he+4]<<8|K[he+3]),ze.Td=K[he+4]>>6,ze.i=16383&(K[he+6]<<8|K[he+5]),ze.Ud=K[he+6]>>6,he+=7,Ee-=7,w.za=ze.c+15>>4,w.Ub=ze.i+15>>4,D.width=ze.c,D.height=ze.i,D.Da=0,D.j=0,D.v=0,D.va=D.width,D.o=D.height,D.da=0,D.ib=D.width,D.hb=D.height,D.U=D.width,D.T=D.height,i((Ae=w.Pa).jb,0,255,Ae.jb.length),e((Ae=w.Qa)!=null),Ae.Cb=0,Ae.Bb=0,Ae.Fb=1,i(Ae.Zb,0,0,Ae.Zb.length),i(Ae.Lb,0,0,Ae.Lb)}if(Ie.ub>Ee)return nr(w,7,"bad partition length");F(Ae=w.m,K,he,Ie.ub),he+=Ie.ub,Ee-=Ie.ub,Ie.Rb&&(ze.Ld=ie(Ae),ze.Kd=ie(Ae)),ze=w.Qa;var Ue,Qe=w.Pa;if(e(Ae!=null),e(ze!=null),ze.Cb=ie(Ae),ze.Cb){if(ze.Bb=ie(Ae),ie(Ae)){for(ze.Fb=ie(Ae),Ue=0;4>Ue;++Ue)ze.Zb[Ue]=ie(Ae)?Q(Ae,7):0;for(Ue=0;4>Ue;++Ue)ze.Lb[Ue]=ie(Ae)?Q(Ae,6):0}if(ze.Bb)for(Ue=0;3>Ue;++Ue)Qe.jb[Ue]=ie(Ae)?B(Ae,8):255}else ze.Bb=0;if(Ae.Ka)return nr(w,3,"cannot parse segment header");if((ze=w.ed).zd=ie(Ae),ze.Tb=B(Ae,6),ze.wb=B(Ae,3),ze.Pc=ie(Ae),ze.Pc&&ie(Ae)){for(Qe=0;4>Qe;++Qe)ie(Ae)&&(ze.vd[Qe]=Q(Ae,6));for(Qe=0;4>Qe;++Qe)ie(Ae)&&(ze.od[Qe]=Q(Ae,6))}if(w.L=ze.Tb==0?0:ze.zd?1:2,Ae.Ka)return nr(w,3,"cannot parse filter header");var wt=Ee;if(Ee=Ue=he,he=Ue+wt,ze=wt,w.Xb=(1<<B(w.m,2))-1,wt<3*(Qe=w.Xb))K=7;else{for(Ue+=3*Qe,ze-=3*Qe,wt=0;wt<Qe;++wt){var Ht=K[Ee+0]|K[Ee+1]<<8|K[Ee+2]<<16;Ht>ze&&(Ht=ze),F(w.Jc[+wt],K,Ue,Ht),Ue+=Ht,ze-=Ht,Ee+=3}F(w.Jc[+Qe],K,Ue,ze),K=Ue<he?0:5}if(K!=0)return nr(w,K,"cannot parse partitions");for(K=B(Ue=w.m,7),Ee=ie(Ue)?Q(Ue,4):0,he=ie(Ue)?Q(Ue,4):0,ze=ie(Ue)?Q(Ue,4):0,Qe=ie(Ue)?Q(Ue,4):0,Ue=ie(Ue)?Q(Ue,4):0,wt=w.Qa,Ht=0;4>Ht;++Ht){if(wt.Cb){var Gt=wt.Zb[Ht];wt.Fb||(Gt+=K)}else{if(0<Ht){w.pb[Ht]=w.pb[0];continue}Gt=K}var Tt=w.pb[Ht];Tt.Sc[0]=hn[Gr(Gt+Ee,127)],Tt.Sc[1]=$n[Gr(Gt+0,127)],Tt.Eb[0]=2*hn[Gr(Gt+he,127)],Tt.Eb[1]=101581*$n[Gr(Gt+ze,127)]>>16,8>Tt.Eb[1]&&(Tt.Eb[1]=8),Tt.Qc[0]=hn[Gr(Gt+Qe,117)],Tt.Qc[1]=$n[Gr(Gt+Ue,127)],Tt.lc=Gt+Ue}if(!Ie.Rb)return nr(w,4,"Not a key frame.");for(ie(Ae),Ie=w.Pa,K=0;4>K;++K){for(Ee=0;8>Ee;++Ee)for(he=0;3>he;++he)for(ze=0;11>ze;++ze)Qe=te(Ae,Ro[K][Ee][he][ze])?B(Ae,8):Zs[K][Ee][he][ze],Ie.Wc[K][Ee].Yb[he][ze]=Qe;for(Ee=0;17>Ee;++Ee)Ie.Xc[K][Ee]=Ie.Wc[K][cd[Ee]]}return w.kc=ie(Ae),w.kc&&(w.Bd=B(Ae,8)),w.cb=1}function Bs(w,D,K,he,Ee,Ae,Ie){var ze=D[Ee].Yb[K];for(K=0;16>Ee;++Ee){if(!te(w,ze[K+0]))return Ee;for(;!te(w,ze[K+1]);)if(ze=D[++Ee].Yb[0],K=0,Ee==16)return 16;var Ue=D[Ee+1].Yb;if(te(w,ze[K+2])){var Qe=w,wt=0;if(te(Qe,(Gt=ze)[(Ht=K)+3]))if(te(Qe,Gt[Ht+6])){for(ze=0,Ht=2*(wt=te(Qe,Gt[Ht+8]))+(Gt=te(Qe,Gt[Ht+9+wt])),wt=0,Gt=Vr[Ht];Gt[ze];++ze)wt+=wt+te(Qe,Gt[ze]);wt+=3+(8<<Ht)}else te(Qe,Gt[Ht+7])?(wt=7+2*te(Qe,165),wt+=te(Qe,145)):wt=5+te(Qe,159);else wt=te(Qe,Gt[Ht+4])?3+te(Qe,Gt[Ht+5]):2;ze=Ue[2]}else wt=1,ze=Ue[1];Ue=Ie+Ts[Ee],0>(Qe=w).b&&fe(Qe);var Ht,Gt=Qe.b,Tt=(Ht=Qe.Ca>>1)-(Qe.I>>Gt)>>31;--Qe.b,Qe.Ca+=Tt,Qe.Ca|=1,Qe.I-=(Ht+1&Tt)<<Gt,Ae[Ue]=((wt^Tt)-Tt)*he[(0<Ee)+0]}return 16}function Ko(w){var D=w.rb[w.sb-1];D.la=0,D.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function _r(w,D){if(w==null)return 0;if(D==null)return nr(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!no(w,D))return 0;if(e(w.cb),D.ac==null||D.ac(D)){D.ob&&(w.L=0);var K=Ja[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=D.v-K>>4,w.zb=D.j-K>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=D.o+15+K>>4,w.Hb=D.va+15+K>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var he=w.ed;for(K=0;4>K;++K){var Ee;if(w.Qa.Cb){var Ae=w.Qa.Lb[K];w.Qa.Fb||(Ae+=he.Tb)}else Ae=he.Tb;for(Ee=0;1>=Ee;++Ee){var Ie=w.gd[K][Ee],ze=Ae;if(he.Pc&&(ze+=he.vd[0],Ee&&(ze+=he.od[0])),0<(ze=0>ze?0:63<ze?63:ze)){var Ue=ze;0<he.wb&&(Ue=4<he.wb?Ue>>2:Ue>>1)>9-he.wb&&(Ue=9-he.wb),1>Ue&&(Ue=1),Ie.dd=Ue,Ie.tc=2*ze+Ue,Ie.ld=40<=ze?2:15<=ze?1:0}else Ie.tc=0;Ie.La=Ee}}}K=0}else nr(w,6,"Frame setup failed"),K=w.a;if(K=K==0){if(K){w.$c=0,0<w.Aa||(w.Ic=Nf);e:{K=w.Ic,he=4*(Ue=w.za);var Qe=32*Ue,wt=Ue+1,Ht=0<w.L?Ue*(0<w.Aa?2:1):0,Gt=(w.Aa==2?2:1)*Ue;if((Ie=he+832+(Ee=3*(16*K+Ja[w.L])/2*Qe)+(Ae=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Ie)K=0;else{if(Ie>w.Vb){if(w.Vb=0,w.Ec=s(Ie),w.Fc=0,w.Ec==null){K=nr(w,1,"no memory during frame initialization.");break e}w.Vb=Ie}Ie=w.Ec,ze=w.Fc,w.Ac=Ie,w.Bc=ze,ze+=he,w.Gd=o(Qe,os),w.Hd=0,w.rb=o(wt+1,$i),w.sb=1,w.wa=Ht?o(Ht,pi):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Ue),e(!0),w.oc=Ie,w.pc=ze,ze+=832,w.ya=o(Gt,Fi),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Ue),w.R=16*Ue,w.B=8*Ue,Ue=(Qe=Ja[w.L])*w.R,Qe=Qe/2*w.B,w.sa=Ie,w.ta=ze+Ue,w.qa=w.sa,w.ra=w.ta+16*K*w.R+Qe,w.Ha=w.qa,w.Ia=w.ra+8*K*w.B+Qe,w.$c=0,ze+=Ee,w.mb=Ae?Ie:null,w.nb=Ae?ze:null,e(ze+Ae<=w.Fc+w.Vb),Ko(w),i(w.Ac,w.Bc,0,he),K=1}}if(K){if(D.ka=0,D.y=w.sa,D.O=w.ta,D.f=w.qa,D.N=w.ra,D.ea=w.Ha,D.Vd=w.Ia,D.fa=w.R,D.Rc=w.B,D.F=null,D.J=0,!nc){for(K=-255;255>=K;++K)Vi[255+K]=0>K?-K:K;for(K=-1020;1020>=K;++K)ea[1020+K]=-128>K?-128:127<K?127:K;for(K=-112;112>=K;++K)Oo[112+K]=-16>K?-16:15<K?15:K;for(K=-255;510>=K;++K)ia[255+K]=0>K?0:255<K?255:K;nc=1}kt=qe,nn=Pa,Fn=ha,or=Zi,Mr=Re,$t=Hs,Ji=Iu,Li=Ma,mu=ra,wo=pu,Qi=hu,Da=fu,Ka=bi,Ia=Oc,Oa=ys,Na=gr,Qr=_s,va=Fl,ba[0]=ai,ba[1]=qt,ba[2]=Dr,ba[3]=fa,ba[4]=Qu,ba[5]=Rl,ba[6]=Nl,ba[7]=pa,ba[8]=ec,ba[9]=ml,Ba[0]=ds,Ba[1]=Vn,Ba[2]=xr,Ba[3]=Ti,Ba[4]=Ei,Ba[5]=Dc,Ba[6]=Au,sa[0]=vl,sa[1]=pn,sa[2]=uu,sa[3]=Ar,sa[4]=cu,sa[5]=Ic,sa[6]=Tu,K=1}else K=0}K&&(K=function(Tt,rn){for(Tt.M=0;Tt.M<Tt.Va;++Tt.M){var Qt,xt=Tt.Jc[Tt.M&Tt.Xb],Mt=Tt.m,an=Tt;for(Qt=0;Qt<an.za;++Qt){var yn=Mt,un=an,jn=un.Ac,Nn=un.Bc+4*Qt,ur=un.zc,d=un.ya[un.aa+Qt];if(un.Qa.Bb?d.$b=te(yn,un.Pa.jb[0])?2+te(yn,un.Pa.jb[2]):te(yn,un.Pa.jb[1]):d.$b=0,un.kc&&(d.Ad=te(yn,un.Bd)),d.Za=!te(yn,145)+0,d.Za){var g=d.Ob,b=0;for(un=0;4>un;++un){var C,M=ur[0+un];for(C=0;4>C;++C){M=es[jn[Nn+C]][M];for(var H=hs[te(yn,M[0])];0<H;)H=hs[2*H+te(yn,M[H])];M=-H,jn[Nn+C]=M}r(g,b,jn,Nn,4),b+=4,ur[0+un]=M}}else M=te(yn,156)?te(yn,128)?1:3:te(yn,163)?2:0,d.Ob[0]=M,i(jn,Nn,M,4),i(ur,0,M,4);d.Dd=te(yn,142)?te(yn,114)?te(yn,183)?1:3:2:0}if(an.m.Ka)return nr(Tt,7,"Premature end-of-partition0 encountered.");for(;Tt.ja<Tt.za;++Tt.ja){if(an=xt,yn=(Mt=Tt).rb[Mt.sb-1],jn=Mt.rb[Mt.sb+Mt.ja],Qt=Mt.ya[Mt.aa+Mt.ja],Nn=Mt.kc?Qt.Ad:0)yn.la=jn.la=0,Qt.Za||(yn.Na=jn.Na=0),Qt.Hc=0,Qt.Gc=0,Qt.ia=0;else{var ne,le;if(yn=jn,jn=an,Nn=Mt.Pa.Xc,ur=Mt.ya[Mt.aa+Mt.ja],d=Mt.pb[ur.$b],un=ur.ad,g=0,b=Mt.rb[Mt.sb-1],M=C=0,i(un,g,0,384),ur.Za)var be=0,Me=Nn[3];else{H=s(16);var it=yn.Na+b.Na;if(it=lr(jn,Nn[1],it,d.Eb,0,H,0),yn.Na=b.Na=(0<it)+0,1<it)kt(H,0,un,g);else{var Xe=H[0]+3>>3;for(H=0;256>H;H+=16)un[g+H]=Xe}be=1,Me=Nn[0]}var Pt=15&yn.la,Ut=15&b.la;for(H=0;4>H;++H){var on=1&Ut;for(Xe=le=0;4>Xe;++Xe)Pt=Pt>>1|(on=(it=lr(jn,Me,it=on+(1&Pt),d.Sc,be,un,g))>be)<<7,le=le<<2|(3<it?3:1<it?2:un[g+0]!=0),g+=16;Pt>>=4,Ut=Ut>>1|on<<7,C=(C<<8|le)>>>0}for(Me=Pt,be=Ut>>4,ne=0;4>ne;ne+=2){for(le=0,Pt=yn.la>>4+ne,Ut=b.la>>4+ne,H=0;2>H;++H){for(on=1&Ut,Xe=0;2>Xe;++Xe)it=on+(1&Pt),Pt=Pt>>1|(on=0<(it=lr(jn,Nn[2],it,d.Qc,0,un,g)))<<3,le=le<<2|(3<it?3:1<it?2:un[g+0]!=0),g+=16;Pt>>=2,Ut=Ut>>1|on<<5}M|=le<<4*ne,Me|=Pt<<4<<ne,be|=(240&Ut)<<ne}yn.la=Me,b.la=be,ur.Hc=C,ur.Gc=M,ur.ia=43690&M?0:d.ia,Nn=!(C|M)}if(0<Mt.L&&(Mt.wa[Mt.Y+Mt.ja]=Mt.gd[Qt.$b][Qt.Za],Mt.wa[Mt.Y+Mt.ja].La|=!Nn),an.Ka)return nr(Tt,7,"Premature end-of-file encountered.")}if(Ko(Tt),Mt=rn,an=1,Qt=(xt=Tt).D,yn=0<xt.L&&xt.M>=xt.zb&&xt.M<=xt.Va,xt.Aa==0)e:{if(Qt.M=xt.M,Qt.uc=yn,Ou(xt,Qt),an=1,Qt=(le=xt.D).Nb,yn=(M=Ja[xt.L])*xt.R,jn=M/2*xt.B,H=16*Qt*xt.R,Xe=8*Qt*xt.B,Nn=xt.sa,ur=xt.ta-yn+H,d=xt.qa,un=xt.ra-jn+Xe,g=xt.Ha,b=xt.Ia-jn+Xe,Ut=(Pt=le.M)==0,C=Pt>=xt.Va-1,xt.Aa==2&&Ou(xt,le),le.uc)for(on=(it=xt).D.M,e(it.D.uc),le=it.yb;le<it.Hb;++le){be=le,Me=on;var Mn=(Dn=(Te=it).D).Nb;ne=Te.R;var Dn=Dn.wa[Dn.Y+be],yr=Te.sa,rt=Te.ta+16*Mn*ne+16*be,ct=Dn.dd,bt=Dn.tc;if(bt!=0)if(e(3<=bt),Te.L==1)0<be&&Na(yr,rt,ne,bt+4),Dn.La&&va(yr,rt,ne,bt),0<Me&&Oa(yr,rt,ne,bt+4),Dn.La&&Qr(yr,rt,ne,bt);else{var Wt=Te.B,At=Te.qa,Vt=Te.ra+8*Mn*Wt+8*be,Le=Te.Ha,Te=Te.Ia+8*Mn*Wt+8*be;Mn=Dn.ld,0<be&&(Li(yr,rt,ne,bt+4,ct,Mn),wo(At,Vt,Le,Te,Wt,bt+4,ct,Mn)),Dn.La&&(Da(yr,rt,ne,bt,ct,Mn),Ia(At,Vt,Le,Te,Wt,bt,ct,Mn)),0<Me&&(Ji(yr,rt,ne,bt+4,ct,Mn),mu(At,Vt,Le,Te,Wt,bt+4,ct,Mn)),Dn.La&&(Qi(yr,rt,ne,bt,ct,Mn),Ka(At,Vt,Le,Te,Wt,bt,ct,Mn))}}if(xt.ia&&alert("todo:DitherRow"),Mt.put!=null){if(le=16*Pt,Pt=16*(Pt+1),Ut?(Mt.y=xt.sa,Mt.O=xt.ta+H,Mt.f=xt.qa,Mt.N=xt.ra+Xe,Mt.ea=xt.Ha,Mt.W=xt.Ia+Xe):(le-=M,Mt.y=Nn,Mt.O=ur,Mt.f=d,Mt.N=un,Mt.ea=g,Mt.W=b),C||(Pt-=M),Pt>Mt.o&&(Pt=Mt.o),Mt.F=null,Mt.J=null,xt.Fa!=null&&0<xt.Fa.length&&le<Pt&&(Mt.J=bs(xt,Mt,le,Pt-le),Mt.F=xt.mb,Mt.F==null&&Mt.F.length==0)){an=nr(xt,3,"Could not decode alpha data.");break e}le<Mt.j&&(M=Mt.j-le,le=Mt.j,e(!(1&M)),Mt.O+=xt.R*M,Mt.N+=xt.B*(M>>1),Mt.W+=xt.B*(M>>1),Mt.F!=null&&(Mt.J+=Mt.width*M)),le<Pt&&(Mt.O+=Mt.v,Mt.N+=Mt.v>>1,Mt.W+=Mt.v>>1,Mt.F!=null&&(Mt.J+=Mt.v),Mt.ka=le-Mt.j,Mt.U=Mt.va-Mt.v,Mt.T=Pt-le,an=Mt.put(Mt))}Qt+1!=xt.Ic||C||(r(xt.sa,xt.ta-yn,Nn,ur+16*xt.R,yn),r(xt.qa,xt.ra-jn,d,un+8*xt.B,jn),r(xt.Ha,xt.Ia-jn,g,b+8*xt.B,jn))}if(!an)return nr(Tt,6,"Output aborted.")}return 1}(w,D)),D.bc!=null&&D.bc(D),K&=1}return K?(w.cb=0,K):0}function $r(w,D,K,he,Ee){Ee=w[D+K+32*he]+(Ee>>3),w[D+K+32*he]=-256&Ee?0>Ee?0:255:Ee}function er(w,D,K,he,Ee,Ae){$r(w,D,0,K,he+Ee),$r(w,D,1,K,he+Ae),$r(w,D,2,K,he-Ae),$r(w,D,3,K,he-Ee)}function di(w){return(20091*w>>16)+w}function oi(w,D,K,he){var Ee,Ae=0,Ie=s(16);for(Ee=0;4>Ee;++Ee){var ze=w[D+0]+w[D+8],Ue=w[D+0]-w[D+8],Qe=(35468*w[D+4]>>16)-di(w[D+12]),wt=di(w[D+4])+(35468*w[D+12]>>16);Ie[Ae+0]=ze+wt,Ie[Ae+1]=Ue+Qe,Ie[Ae+2]=Ue-Qe,Ie[Ae+3]=ze-wt,Ae+=4,D++}for(Ee=Ae=0;4>Ee;++Ee)ze=(w=Ie[Ae+0]+4)+Ie[Ae+8],Ue=w-Ie[Ae+8],Qe=(35468*Ie[Ae+4]>>16)-di(Ie[Ae+12]),$r(K,he,0,0,ze+(wt=di(Ie[Ae+4])+(35468*Ie[Ae+12]>>16))),$r(K,he,1,0,Ue+Qe),$r(K,he,2,0,Ue-Qe),$r(K,he,3,0,ze-wt),Ae++,he+=32}function Hs(w,D,K,he){var Ee=w[D+0]+4,Ae=35468*w[D+4]>>16,Ie=di(w[D+4]),ze=35468*w[D+1]>>16;er(K,he,0,Ee+Ie,w=di(w[D+1]),ze),er(K,he,1,Ee+Ae,w,ze),er(K,he,2,Ee-Ae,w,ze),er(K,he,3,Ee-Ie,w,ze)}function Pa(w,D,K,he,Ee){oi(w,D,K,he),Ee&&oi(w,D+16,K,he+4)}function ha(w,D,K,he){nn(w,D+0,K,he,1),nn(w,D+32,K,he+128,1)}function Zi(w,D,K,he){var Ee;for(w=w[D+0]+4,Ee=0;4>Ee;++Ee)for(D=0;4>D;++D)$r(K,he,D,Ee,w)}function Re(w,D,K,he){w[D+0]&&or(w,D+0,K,he),w[D+16]&&or(w,D+16,K,he+4),w[D+32]&&or(w,D+32,K,he+128),w[D+48]&&or(w,D+48,K,he+128+4)}function qe(w,D,K,he){var Ee,Ae=s(16);for(Ee=0;4>Ee;++Ee){var Ie=w[D+0+Ee]+w[D+12+Ee],ze=w[D+4+Ee]+w[D+8+Ee],Ue=w[D+4+Ee]-w[D+8+Ee],Qe=w[D+0+Ee]-w[D+12+Ee];Ae[0+Ee]=Ie+ze,Ae[8+Ee]=Ie-ze,Ae[4+Ee]=Qe+Ue,Ae[12+Ee]=Qe-Ue}for(Ee=0;4>Ee;++Ee)Ie=(w=Ae[0+4*Ee]+3)+Ae[3+4*Ee],ze=Ae[1+4*Ee]+Ae[2+4*Ee],Ue=Ae[1+4*Ee]-Ae[2+4*Ee],Qe=w-Ae[3+4*Ee],K[he+0]=Ie+ze>>3,K[he+16]=Qe+Ue>>3,K[he+32]=Ie-ze>>3,K[he+48]=Qe-Ue>>3,he+=64}function dt(w,D,K){var he,Ee=D-32,Ae=zi,Ie=255-w[Ee-1];for(he=0;he<K;++he){var ze,Ue=Ae,Qe=Ie+w[D-1];for(ze=0;ze<K;++ze)w[D+ze]=Ue[Qe+w[Ee+ze]];D+=32}}function qt(w,D){dt(w,D,4)}function pn(w,D){dt(w,D,8)}function Vn(w,D){dt(w,D,16)}function xr(w,D){var K;for(K=0;16>K;++K)r(w,D+32*K,w,D-32,16)}function Ti(w,D){var K;for(K=16;0<K;--K)i(w,D,w[D-1],16),D+=32}function Ui(w,D,K){var he;for(he=0;16>he;++he)i(D,K+32*he,w,16)}function ds(w,D){var K,he=16;for(K=0;16>K;++K)he+=w[D-1+32*K]+w[D+K-32];Ui(he>>5,w,D)}function Ei(w,D){var K,he=8;for(K=0;16>K;++K)he+=w[D-1+32*K];Ui(he>>4,w,D)}function Dc(w,D){var K,he=8;for(K=0;16>K;++K)he+=w[D+K-32];Ui(he>>4,w,D)}function Au(w,D){Ui(128,w,D)}function Pr(w,D,K){return w+2*D+K+2>>2}function Dr(w,D){var K,he=D-32;for(he=new Uint8Array([Pr(w[he-1],w[he+0],w[he+1]),Pr(w[he+0],w[he+1],w[he+2]),Pr(w[he+1],w[he+2],w[he+3]),Pr(w[he+2],w[he+3],w[he+4])]),K=0;4>K;++K)r(w,D+32*K,he,0,he.length)}function fa(w,D){var K=w[D-1],he=w[D-1+32],Ee=w[D-1+64],Ae=w[D-1+96];Oe(w,D+0,16843009*Pr(w[D-1-32],K,he)),Oe(w,D+32,16843009*Pr(K,he,Ee)),Oe(w,D+64,16843009*Pr(he,Ee,Ae)),Oe(w,D+96,16843009*Pr(Ee,Ae,Ae))}function ai(w,D){var K,he=4;for(K=0;4>K;++K)he+=w[D+K-32]+w[D-1+32*K];for(he>>=3,K=0;4>K;++K)i(w,D+32*K,he,4)}function Qu(w,D){var K=w[D-1+0],he=w[D-1+32],Ee=w[D-1+64],Ae=w[D-1-32],Ie=w[D+0-32],ze=w[D+1-32],Ue=w[D+2-32],Qe=w[D+3-32];w[D+0+96]=Pr(he,Ee,w[D-1+96]),w[D+1+96]=w[D+0+64]=Pr(K,he,Ee),w[D+2+96]=w[D+1+64]=w[D+0+32]=Pr(Ae,K,he),w[D+3+96]=w[D+2+64]=w[D+1+32]=w[D+0+0]=Pr(Ie,Ae,K),w[D+3+64]=w[D+2+32]=w[D+1+0]=Pr(ze,Ie,Ae),w[D+3+32]=w[D+2+0]=Pr(Ue,ze,Ie),w[D+3+0]=Pr(Qe,Ue,ze)}function Nl(w,D){var K=w[D+1-32],he=w[D+2-32],Ee=w[D+3-32],Ae=w[D+4-32],Ie=w[D+5-32],ze=w[D+6-32],Ue=w[D+7-32];w[D+0+0]=Pr(w[D+0-32],K,he),w[D+1+0]=w[D+0+32]=Pr(K,he,Ee),w[D+2+0]=w[D+1+32]=w[D+0+64]=Pr(he,Ee,Ae),w[D+3+0]=w[D+2+32]=w[D+1+64]=w[D+0+96]=Pr(Ee,Ae,Ie),w[D+3+32]=w[D+2+64]=w[D+1+96]=Pr(Ae,Ie,ze),w[D+3+64]=w[D+2+96]=Pr(Ie,ze,Ue),w[D+3+96]=Pr(ze,Ue,Ue)}function Rl(w,D){var K=w[D-1+0],he=w[D-1+32],Ee=w[D-1+64],Ae=w[D-1-32],Ie=w[D+0-32],ze=w[D+1-32],Ue=w[D+2-32],Qe=w[D+3-32];w[D+0+0]=w[D+1+64]=Ae+Ie+1>>1,w[D+1+0]=w[D+2+64]=Ie+ze+1>>1,w[D+2+0]=w[D+3+64]=ze+Ue+1>>1,w[D+3+0]=Ue+Qe+1>>1,w[D+0+96]=Pr(Ee,he,K),w[D+0+64]=Pr(he,K,Ae),w[D+0+32]=w[D+1+96]=Pr(K,Ae,Ie),w[D+1+32]=w[D+2+96]=Pr(Ae,Ie,ze),w[D+2+32]=w[D+3+96]=Pr(Ie,ze,Ue),w[D+3+32]=Pr(ze,Ue,Qe)}function pa(w,D){var K=w[D+0-32],he=w[D+1-32],Ee=w[D+2-32],Ae=w[D+3-32],Ie=w[D+4-32],ze=w[D+5-32],Ue=w[D+6-32],Qe=w[D+7-32];w[D+0+0]=K+he+1>>1,w[D+1+0]=w[D+0+64]=he+Ee+1>>1,w[D+2+0]=w[D+1+64]=Ee+Ae+1>>1,w[D+3+0]=w[D+2+64]=Ae+Ie+1>>1,w[D+0+32]=Pr(K,he,Ee),w[D+1+32]=w[D+0+96]=Pr(he,Ee,Ae),w[D+2+32]=w[D+1+96]=Pr(Ee,Ae,Ie),w[D+3+32]=w[D+2+96]=Pr(Ae,Ie,ze),w[D+3+64]=Pr(Ie,ze,Ue),w[D+3+96]=Pr(ze,Ue,Qe)}function ml(w,D){var K=w[D-1+0],he=w[D-1+32],Ee=w[D-1+64],Ae=w[D-1+96];w[D+0+0]=K+he+1>>1,w[D+2+0]=w[D+0+32]=he+Ee+1>>1,w[D+2+32]=w[D+0+64]=Ee+Ae+1>>1,w[D+1+0]=Pr(K,he,Ee),w[D+3+0]=w[D+1+32]=Pr(he,Ee,Ae),w[D+3+32]=w[D+1+64]=Pr(Ee,Ae,Ae),w[D+3+64]=w[D+2+64]=w[D+0+96]=w[D+1+96]=w[D+2+96]=w[D+3+96]=Ae}function ec(w,D){var K=w[D-1+0],he=w[D-1+32],Ee=w[D-1+64],Ae=w[D-1+96],Ie=w[D-1-32],ze=w[D+0-32],Ue=w[D+1-32],Qe=w[D+2-32];w[D+0+0]=w[D+2+32]=K+Ie+1>>1,w[D+0+32]=w[D+2+64]=he+K+1>>1,w[D+0+64]=w[D+2+96]=Ee+he+1>>1,w[D+0+96]=Ae+Ee+1>>1,w[D+3+0]=Pr(ze,Ue,Qe),w[D+2+0]=Pr(Ie,ze,Ue),w[D+1+0]=w[D+3+32]=Pr(K,Ie,ze),w[D+1+32]=w[D+3+64]=Pr(he,K,Ie),w[D+1+64]=w[D+3+96]=Pr(Ee,he,K),w[D+1+96]=Pr(Ae,Ee,he)}function uu(w,D){var K;for(K=0;8>K;++K)r(w,D+32*K,w,D-32,8)}function Ar(w,D){var K;for(K=0;8>K;++K)i(w,D,w[D-1],8),D+=32}function Yr(w,D,K){var he;for(he=0;8>he;++he)i(D,K+32*he,w,8)}function vl(w,D){var K,he=8;for(K=0;8>K;++K)he+=w[D+K-32]+w[D-1+32*K];Yr(he>>4,w,D)}function Ic(w,D){var K,he=4;for(K=0;8>K;++K)he+=w[D+K-32];Yr(he>>3,w,D)}function cu(w,D){var K,he=4;for(K=0;8>K;++K)he+=w[D-1+32*K];Yr(he>>3,w,D)}function Tu(w,D){Yr(128,w,D)}function Bl(w,D,K){var he=w[D-K],Ee=w[D+0],Ae=3*(Ee-he)+Ra[1020+w[D-2*K]-w[D+K]],Ie=As[112+(Ae+4>>3)];w[D-K]=zi[255+he+As[112+(Ae+3>>3)]],w[D+0]=zi[255+Ee-Ie]}function du(w,D,K,he){var Ee=w[D+0],Ae=w[D+K];return uo[255+w[D-2*K]-w[D-K]]>he||uo[255+Ae-Ee]>he}function Du(w,D,K,he){return 4*uo[255+w[D-K]-w[D+0]]+uo[255+w[D-2*K]-w[D+K]]<=he}function Jr(w,D,K,he,Ee){var Ae=w[D-3*K],Ie=w[D-2*K],ze=w[D-K],Ue=w[D+0],Qe=w[D+K],wt=w[D+2*K],Ht=w[D+3*K];return 4*uo[255+ze-Ue]+uo[255+Ie-Qe]>he?0:uo[255+w[D-4*K]-Ae]<=Ee&&uo[255+Ae-Ie]<=Ee&&uo[255+Ie-ze]<=Ee&&uo[255+Ht-wt]<=Ee&&uo[255+wt-Qe]<=Ee&&uo[255+Qe-Ue]<=Ee}function ys(w,D,K,he){var Ee=2*he+1;for(he=0;16>he;++he)Du(w,D+he,K,Ee)&&Bl(w,D+he,K)}function gr(w,D,K,he){var Ee=2*he+1;for(he=0;16>he;++he)Du(w,D+he*K,1,Ee)&&Bl(w,D+he*K,1)}function _s(w,D,K,he){var Ee;for(Ee=3;0<Ee;--Ee)ys(w,D+=4*K,K,he)}function Fl(w,D,K,he){var Ee;for(Ee=3;0<Ee;--Ee)gr(w,D+=4,K,he)}function Ha(w,D,K,he,Ee,Ae,Ie,ze){for(Ae=2*Ae+1;0<Ee--;){if(Jr(w,D,K,Ae,Ie))if(du(w,D,K,ze))Bl(w,D,K);else{var Ue=w,Qe=D,wt=K,Ht=Ue[Qe-2*wt],Gt=Ue[Qe-wt],Tt=Ue[Qe+0],rn=Ue[Qe+wt],Qt=Ue[Qe+2*wt],xt=27*(an=Ra[1020+3*(Tt-Gt)+Ra[1020+Ht-rn]])+63>>7,Mt=18*an+63>>7,an=9*an+63>>7;Ue[Qe-3*wt]=zi[255+Ue[Qe-3*wt]+an],Ue[Qe-2*wt]=zi[255+Ht+Mt],Ue[Qe-wt]=zi[255+Gt+xt],Ue[Qe+0]=zi[255+Tt-xt],Ue[Qe+wt]=zi[255+rn-Mt],Ue[Qe+2*wt]=zi[255+Qt-an]}D+=he}}function Xi(w,D,K,he,Ee,Ae,Ie,ze){for(Ae=2*Ae+1;0<Ee--;){if(Jr(w,D,K,Ae,Ie))if(du(w,D,K,ze))Bl(w,D,K);else{var Ue=w,Qe=D,wt=K,Ht=Ue[Qe-wt],Gt=Ue[Qe+0],Tt=Ue[Qe+wt],rn=As[112+((Qt=3*(Gt-Ht))+4>>3)],Qt=As[112+(Qt+3>>3)],xt=rn+1>>1;Ue[Qe-2*wt]=zi[255+Ue[Qe-2*wt]+xt],Ue[Qe-wt]=zi[255+Ht+Qt],Ue[Qe+0]=zi[255+Gt-rn],Ue[Qe+wt]=zi[255+Tt-xt]}D+=he}}function Iu(w,D,K,he,Ee,Ae){Ha(w,D,K,1,16,he,Ee,Ae)}function Ma(w,D,K,he,Ee,Ae){Ha(w,D,1,K,16,he,Ee,Ae)}function hu(w,D,K,he,Ee,Ae){var Ie;for(Ie=3;0<Ie;--Ie)Xi(w,D+=4*K,K,1,16,he,Ee,Ae)}function fu(w,D,K,he,Ee,Ae){var Ie;for(Ie=3;0<Ie;--Ie)Xi(w,D+=4,1,K,16,he,Ee,Ae)}function ra(w,D,K,he,Ee,Ae,Ie,ze){Ha(w,D,Ee,1,8,Ae,Ie,ze),Ha(K,he,Ee,1,8,Ae,Ie,ze)}function pu(w,D,K,he,Ee,Ae,Ie,ze){Ha(w,D,1,Ee,8,Ae,Ie,ze),Ha(K,he,1,Ee,8,Ae,Ie,ze)}function bi(w,D,K,he,Ee,Ae,Ie,ze){Xi(w,D+4*Ee,Ee,1,8,Ae,Ie,ze),Xi(K,he+4*Ee,Ee,1,8,Ae,Ie,ze)}function Oc(w,D,K,he,Ee,Ae,Ie,ze){Xi(w,D+4,1,Ee,8,Ae,Ie,ze),Xi(K,he+4,1,Ee,8,Ae,Ie,ze)}function Gs(){this.ba=new ir,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new wr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ga(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function gu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ma(){this.ua=0,this.Wa=new U,this.vb=new U,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new N}function jl(){this.xb=this.a=0,this.l=new Sr,this.ca=new ir,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ae,this.Pb=0,this.wd=new ae,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ma,this.ab=0,this.gc=o(4,gu),this.Oc=0}function zl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Sr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wi(w,D,K,he,Ee,Ae,Ie){for(w=w==null?0:w[D+0],D=0;D<Ie;++D)Ee[Ae+D]=w+K[he+D]&255,w=Ee[Ae+D]}function Zo(w,D,K,he,Ee,Ae,Ie){var ze;if(w==null)wi(null,null,K,he,Ee,Ae,Ie);else for(ze=0;ze<Ie;++ze)Ee[Ae+ze]=w[D+ze]+K[he+ze]&255}function Ga(w,D,K,he,Ee,Ae,Ie){if(w==null)wi(null,null,K,he,Ee,Ae,Ie);else{var ze,Ue=w[D+0],Qe=Ue,wt=Ue;for(ze=0;ze<Ie;++ze)Qe=wt+(Ue=w[D+ze])-Qe,wt=K[he+ze]+(-256&Qe?0>Qe?0:255:Qe)&255,Qe=Ue,Ee[Ae+ze]=wt}}function bs(w,D,K,he){var Ee=D.width,Ae=D.o;if(e(w!=null&&D!=null),0>K||0>=he||K+he>Ae)return null;if(!w.Cc){if(w.ga==null){var Ie;if(w.ga=new zl,(Ie=w.ga==null)||(Ie=D.width*D.o,e(w.Gb.length==0),w.Gb=s(Ie),w.Uc=0,w.Gb==null?Ie=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ie=1),Ie=!Ie),!Ie){Ie=w.ga;var ze=w.Fa,Ue=w.P,Qe=w.qc,wt=w.mb,Ht=w.nb,Gt=Ue+1,Tt=Qe-1,rn=Ie.l;if(e(ze!=null&&wt!=null&&D!=null),mi[0]=null,mi[1]=wi,mi[2]=Zo,mi[3]=Ga,Ie.ca=wt,Ie.tb=Ht,Ie.c=D.width,Ie.i=D.height,e(0<Ie.c&&0<Ie.i),1>=Qe)D=0;else if(Ie.$a=ze[Ue+0]>>0&3,Ie.Z=ze[Ue+0]>>2&3,Ie.Lc=ze[Ue+0]>>4&3,Ue=ze[Ue+0]>>6&3,0>Ie.$a||1<Ie.$a||4<=Ie.Z||1<Ie.Lc||Ue)D=0;else if(rn.put=Vs,rn.ac=Bi,rn.bc=is,rn.ma=Ie,rn.width=D.width,rn.height=D.height,rn.Da=D.Da,rn.v=D.v,rn.va=D.va,rn.j=D.j,rn.o=D.o,Ie.$a)e:{e(Ie.$a==1),D=en();t:for(;;){if(D==null){D=0;break e}if(e(Ie!=null),Ie.mc=D,D.c=Ie.c,D.i=Ie.i,D.l=Ie.l,D.l.ma=Ie,D.l.width=Ie.c,D.l.height=Ie.i,D.a=0,X(D.m,ze,Gt,Tt),!ln(Ie.c,Ie.i,1,D,null)||(D.ab==1&&D.gc[0].hc==3&&Er(D.s)?(Ie.ic=1,ze=D.c*D.i,D.Ta=null,D.Ua=0,D.V=s(ze),D.Ba=0,D.V==null?(D.a=1,D=0):D=1):(Ie.ic=0,D=Rn(D,Ie.c)),!D))break t;D=1;break e}Ie.mc=null,D=0}else D=Tt>=Ie.c*Ie.i;Ie=!D}if(Ie)return null;w.ga.Lc!=1?w.Ga=0:he=Ae-K}e(w.ga!=null),e(K+he<=Ae);e:{if(D=(ze=w.ga).c,Ae=ze.l.o,ze.$a==0){if(Gt=w.rc,Tt=w.Vc,rn=w.Fa,Ue=w.P+1+K*D,Qe=w.mb,wt=w.nb+K*D,e(Ue<=w.P+w.qc),ze.Z!=0)for(e(mi[ze.Z]!=null),Ie=0;Ie<he;++Ie)mi[ze.Z](Gt,Tt,rn,Ue,Qe,wt,D),Gt=Qe,Tt=wt,wt+=D,Ue+=D;else for(Ie=0;Ie<he;++Ie)r(Qe,wt,rn,Ue,D),Gt=Qe,Tt=wt,wt+=D,Ue+=D;w.rc=Gt,w.Vc=Tt}else{if(e(ze.mc!=null),D=K+he,e((Ie=ze.mc)!=null),e(D<=Ie.i),Ie.C>=D)D=1;else if(ze.ic||Ot(),ze.ic){ze=Ie.V,Gt=Ie.Ba,Tt=Ie.c;var Qt=Ie.i,xt=(rn=1,Ue=Ie.$/Tt,Qe=Ie.$%Tt,wt=Ie.m,Ht=Ie.s,Ie.$),Mt=Tt*Qt,an=Tt*D,yn=Ht.wc,un=xt<an?Yt(Ht,Qe,Ue):null;e(xt<=Mt),e(D<=Qt),e(Er(Ht));t:for(;;){for(;!wt.h&&xt<an;){if(Qe&yn||(un=Yt(Ht,Qe,Ue)),e(un!=null),se(wt),256>(Qt=at(un.G[0],un.H[0],wt)))ze[Gt+xt]=Qt,++xt,++Qe>=Tt&&(Qe=0,++Ue<=D&&!(Ue%16)&&Ct(Ie,Ue));else{if(!(280>Qt)){rn=0;break t}Qt=ss(Qt-256,wt);var jn,Nn=at(un.G[4],un.H[4],wt);if(se(wt),!(xt>=(Nn=Et(Tt,Nn=ss(Nn,wt)))&&Mt-xt>=Qt)){rn=0;break t}for(jn=0;jn<Qt;++jn)ze[Gt+xt+jn]=ze[Gt+xt+jn-Nn];for(xt+=Qt,Qe+=Qt;Qe>=Tt;)Qe-=Tt,++Ue<=D&&!(Ue%16)&&Ct(Ie,Ue);xt<an&&Qe&yn&&(un=Yt(Ht,Qe,Ue))}e(wt.h==ye(wt))}Ct(Ie,Ue>D?D:Ue);break t}!rn||wt.h&&xt<Mt?(rn=0,Ie.a=wt.h?5:3):Ie.$=xt,D=rn}else D=mn(Ie,Ie.V,Ie.Ba,Ie.c,Ie.i,D,vr);if(!D){he=0;break e}}K+he>=Ae&&(w.Cc=1),he=1}if(!he)return null;if(w.Cc&&((he=w.ga)!=null&&(he.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+K*Ee}function z(w,D,K,he,Ee,Ae){for(;0<Ee--;){var Ie,ze=w,Ue=D+(K?1:0),Qe=w,wt=D+(K?0:3);for(Ie=0;Ie<he;++Ie){var Ht=Qe[wt+4*Ie];Ht!=255&&(Ht*=32897,ze[Ue+4*Ie+0]=ze[Ue+4*Ie+0]*Ht>>23,ze[Ue+4*Ie+1]=ze[Ue+4*Ie+1]*Ht>>23,ze[Ue+4*Ie+2]=ze[Ue+4*Ie+2]*Ht>>23)}D+=Ae}}function Ce(w,D,K,he,Ee){for(;0<he--;){var Ae;for(Ae=0;Ae<K;++Ae){var Ie=w[D+2*Ae+0],ze=15&(Qe=w[D+2*Ae+1]),Ue=4369*ze,Qe=(240&Qe|Qe>>4)*Ue>>16;w[D+2*Ae+0]=(240&Ie|Ie>>4)*Ue>>16&240|(15&Ie|Ie<<4)*Ue>>16>>4&15,w[D+2*Ae+1]=240&Qe|ze}D+=Ee}}function nt(w,D,K,he,Ee,Ae,Ie,ze){var Ue,Qe,wt=255;for(Qe=0;Qe<Ee;++Qe){for(Ue=0;Ue<he;++Ue){var Ht=w[D+Ue];Ae[Ie+4*Ue]=Ht,wt&=Ht}D+=K,Ie+=ze}return wt!=255}function mt(w,D,K,he,Ee){var Ae;for(Ae=0;Ae<Ee;++Ae)K[he+Ae]=w[D+Ae]>>8}function Ot(){qs=z,Si=Ce,Di=nt,xs=mt}function Kt(w,D,K){O[w]=function(he,Ee,Ae,Ie,ze,Ue,Qe,wt,Ht,Gt,Tt,rn,Qt,xt,Mt,an,yn){var un,jn=yn-1>>1,Nn=ze[Ue+0]|Qe[wt+0]<<16,ur=Ht[Gt+0]|Tt[rn+0]<<16;e(he!=null);var d=3*Nn+ur+131074>>2;for(D(he[Ee+0],255&d,d>>16,Qt,xt),Ae!=null&&(d=3*ur+Nn+131074>>2,D(Ae[Ie+0],255&d,d>>16,Mt,an)),un=1;un<=jn;++un){var g=ze[Ue+un]|Qe[wt+un]<<16,b=Ht[Gt+un]|Tt[rn+un]<<16,C=Nn+g+ur+b+524296,M=C+2*(g+ur)>>3;d=M+Nn>>1,Nn=(C=C+2*(Nn+b)>>3)+g>>1,D(he[Ee+2*un-1],255&d,d>>16,Qt,xt+(2*un-1)*K),D(he[Ee+2*un-0],255&Nn,Nn>>16,Qt,xt+(2*un-0)*K),Ae!=null&&(d=C+ur>>1,Nn=M+b>>1,D(Ae[Ie+2*un-1],255&d,d>>16,Mt,an+(2*un-1)*K),D(Ae[Ie+2*un+0],255&Nn,Nn>>16,Mt,an+(2*un+0)*K)),Nn=g,ur=b}1&yn||(d=3*Nn+ur+131074>>2,D(he[Ee+yn-1],255&d,d>>16,Qt,xt+(yn-1)*K),Ae!=null&&(d=3*ur+Nn+131074>>2,D(Ae[Ie+yn-1],255&d,d>>16,Mt,an+(yn-1)*K)))}}function vn(){co[No]=$e,co[br]=rc,co[Za]=Bo,co[Xa]=Xs,co[ya]=Wr,co[xo]=Gd,co[ud]=Tf,co[Ys]=rc,co[Ks]=Xs,co[_a]=Wr,co[c]=Gd}function zn(w){return w&-16384?0>w?0:255:w>>Gp}function Gn(w,D){return zn((19077*w>>8)+(26149*D>>8)-14234)}function fr(w,D,K){return zn((19077*w>>8)-(6419*D>>8)-(13320*K>>8)+8708)}function Cr(w,D){return zn((19077*w>>8)+(33050*D>>8)-17685)}function Hr(w,D,K,he,Ee){he[Ee+0]=Gn(w,K),he[Ee+1]=fr(w,D,K),he[Ee+2]=Cr(w,D)}function Wi(w,D,K,he,Ee){he[Ee+0]=Cr(w,D),he[Ee+1]=fr(w,D,K),he[Ee+2]=Gn(w,K)}function gi(w,D,K,he,Ee){var Ae=fr(w,D,K);D=Ae<<3&224|Cr(w,D)>>3,he[Ee+0]=248&Gn(w,K)|Ae>>5,he[Ee+1]=D}function xi(w,D,K,he,Ee){var Ae=240&Cr(w,D)|15;he[Ee+0]=240&Gn(w,K)|fr(w,D,K)>>4,he[Ee+1]=Ae}function ws(w,D,K,he,Ee){he[Ee+0]=255,Hr(w,D,K,he,Ee+1)}function Ms(w,D,K,he,Ee){Wi(w,D,K,he,Ee),he[Ee+3]=255}function Xo(w,D,K,he,Ee){Hr(w,D,K,he,Ee),he[Ee+3]=255}function Gr(w,D){return 0>w?0:w>D?D:w}function ro(w,D,K){O[w]=function(he,Ee,Ae,Ie,ze,Ue,Qe,wt,Ht){for(var Gt=wt+(-2&Ht)*K;wt!=Gt;)D(he[Ee+0],Ae[Ie+0],ze[Ue+0],Qe,wt),D(he[Ee+1],Ae[Ie+0],ze[Ue+0],Qe,wt+K),Ee+=2,++Ie,++Ue,wt+=2*K;1&Ht&&D(he[Ee+0],Ae[Ie+0],ze[Ue+0],Qe,wt)}}function $l(w,D,K){return K==0?w==0?D==0?6:5:D==0?4:0:K}function yo(w,D,K,he,Ee){switch(w>>>30){case 3:nn(D,K,he,Ee,0);break;case 2:$t(D,K,he,Ee);break;case 1:or(D,K,he,Ee)}}function Ou(w,D){var K,he,Ee=D.M,Ae=D.Nb,Ie=w.oc,ze=w.pc+40,Ue=w.oc,Qe=w.pc+584,wt=w.oc,Ht=w.pc+600;for(K=0;16>K;++K)Ie[ze+32*K-1]=129;for(K=0;8>K;++K)Ue[Qe+32*K-1]=129,wt[Ht+32*K-1]=129;for(0<Ee?Ie[ze-1-32]=Ue[Qe-1-32]=wt[Ht-1-32]=129:(i(Ie,ze-32-1,127,21),i(Ue,Qe-32-1,127,9),i(wt,Ht-32-1,127,9)),he=0;he<w.za;++he){var Gt=D.ya[D.aa+he];if(0<he){for(K=-1;16>K;++K)r(Ie,ze+32*K-4,Ie,ze+32*K+12,4);for(K=-1;8>K;++K)r(Ue,Qe+32*K-4,Ue,Qe+32*K+4,4),r(wt,Ht+32*K-4,wt,Ht+32*K+4,4)}var Tt=w.Gd,rn=w.Hd+he,Qt=Gt.ad,xt=Gt.Hc;if(0<Ee&&(r(Ie,ze-32,Tt[rn].y,0,16),r(Ue,Qe-32,Tt[rn].f,0,8),r(wt,Ht-32,Tt[rn].ea,0,8)),Gt.Za){var Mt=Ie,an=ze-32+16;for(0<Ee&&(he>=w.za-1?i(Mt,an,Tt[rn].y[15],4):r(Mt,an,Tt[rn+1].y,0,4)),K=0;4>K;K++)Mt[an+128+K]=Mt[an+256+K]=Mt[an+384+K]=Mt[an+0+K];for(K=0;16>K;++K,xt<<=2)Mt=Ie,an=ze+If[K],ba[Gt.Ob[K]](Mt,an),yo(xt,Qt,16*+K,Mt,an)}else if(Mt=$l(he,Ee,Gt.Ob[0]),Ba[Mt](Ie,ze),xt!=0)for(K=0;16>K;++K,xt<<=2)yo(xt,Qt,16*+K,Ie,ze+If[K]);for(K=Gt.Gc,Mt=$l(he,Ee,Gt.Dd),sa[Mt](Ue,Qe),sa[Mt](wt,Ht),xt=Qt,Mt=Ue,an=Qe,255&(Gt=K>>0)&&(170&Gt?Fn(xt,256,Mt,an):Mr(xt,256,Mt,an)),Gt=wt,xt=Ht,255&(K>>=8)&&(170&K?Fn(Qt,320,Gt,xt):Mr(Qt,320,Gt,xt)),Ee<w.Ub-1&&(r(Tt[rn].y,0,Ie,ze+480,16),r(Tt[rn].f,0,Ue,Qe+224,8),r(Tt[rn].ea,0,wt,Ht+224,8)),K=8*Ae*w.B,Tt=w.sa,rn=w.ta+16*he+16*Ae*w.R,Qt=w.qa,Gt=w.ra+8*he+K,xt=w.Ha,Mt=w.Ia+8*he+K,K=0;16>K;++K)r(Tt,rn+K*w.R,Ie,ze+32*K,16);for(K=0;8>K;++K)r(Qt,Gt+K*w.B,Ue,Qe+32*K,8),r(xt,Mt+K*w.B,wt,Ht+32*K,8)}}function ka(w,D,K,he,Ee,Ae,Ie,ze,Ue){var Qe=[0],wt=[0],Ht=0,Gt=Ue!=null?Ue.kd:0,Tt=Ue??new ga;if(w==null||12>K)return 7;Tt.data=w,Tt.w=D,Tt.ha=K,D=[D],K=[K],Tt.gb=[Tt.gb];e:{var rn=D,Qt=K,xt=Tt.gb;if(e(w!=null),e(Qt!=null),e(xt!=null),xt[0]=0,12<=Qt[0]&&!t(w,rn[0],"RIFF")){if(t(w,rn[0]+8,"WEBP")){xt=3;break e}var Mt=ue(w,rn[0]+4);if(12>Mt||4294967286<Mt){xt=3;break e}if(Gt&&Mt>Qt[0]-8){xt=7;break e}xt[0]=Mt,rn[0]+=12,Qt[0]-=12}xt=0}if(xt!=0)return xt;for(Mt=0<Tt.gb[0],K=K[0];;){e:{var an=w;Qt=D,xt=K;var yn=Qe,un=wt,jn=rn=[0];if((d=Ht=[Ht])[0]=0,8>xt[0])xt=7;else{if(!t(an,Qt[0],"VP8X")){if(ue(an,Qt[0]+4)!=10){xt=3;break e}if(18>xt[0]){xt=7;break e}var Nn=ue(an,Qt[0]+8),ur=1+Be(an,Qt[0]+12);if(2147483648<=ur*(an=1+Be(an,Qt[0]+15))){xt=3;break e}jn!=null&&(jn[0]=Nn),yn!=null&&(yn[0]=ur),un!=null&&(un[0]=an),Qt[0]+=18,xt[0]-=18,d[0]=1}xt=0}}if(Ht=Ht[0],rn=rn[0],xt!=0)return xt;if(Qt=!!(2&rn),!Mt&&Ht)return 3;if(Ae!=null&&(Ae[0]=!!(16&rn)),Ie!=null&&(Ie[0]=Qt),ze!=null&&(ze[0]=0),Ie=Qe[0],rn=wt[0],Ht&&Qt&&Ue==null){xt=0;break}if(4>K){xt=7;break}if(Mt&&Ht||!Mt&&!Ht&&!t(w,D[0],"ALPH")){K=[K],Tt.na=[Tt.na],Tt.P=[Tt.P],Tt.Sa=[Tt.Sa];e:{Nn=w,xt=D,Mt=K;var d=Tt.gb;yn=Tt.na,un=Tt.P,jn=Tt.Sa,ur=22,e(Nn!=null),e(Mt!=null),an=xt[0];var g=Mt[0];for(e(yn!=null),e(jn!=null),yn[0]=null,un[0]=null,jn[0]=0;;){if(xt[0]=an,Mt[0]=g,8>g){xt=7;break e}var b=ue(Nn,an+4);if(4294967286<b){xt=3;break e}var C=8+b+1&-2;if(ur+=C,0<d&&ur>d){xt=3;break e}if(!t(Nn,an,"VP8 ")||!t(Nn,an,"VP8L")){xt=0;break e}if(g[0]<C){xt=7;break e}t(Nn,an,"ALPH")||(yn[0]=Nn,un[0]=an+8,jn[0]=b),an+=C,g-=C}}if(K=K[0],Tt.na=Tt.na[0],Tt.P=Tt.P[0],Tt.Sa=Tt.Sa[0],xt!=0)break}K=[K],Tt.Ja=[Tt.Ja],Tt.xa=[Tt.xa];e:if(d=w,xt=D,Mt=K,yn=Tt.gb[0],un=Tt.Ja,jn=Tt.xa,Nn=xt[0],an=!t(d,Nn,"VP8 "),ur=!t(d,Nn,"VP8L"),e(d!=null),e(Mt!=null),e(un!=null),e(jn!=null),8>Mt[0])xt=7;else{if(an||ur){if(d=ue(d,Nn+4),12<=yn&&d>yn-12){xt=3;break e}if(Gt&&d>Mt[0]-8){xt=7;break e}un[0]=d,xt[0]+=8,Mt[0]-=8,jn[0]=ur}else jn[0]=5<=Mt[0]&&d[Nn+0]==47&&!(d[Nn+4]>>5),un[0]=Mt[0];xt=0}if(K=K[0],Tt.Ja=Tt.Ja[0],Tt.xa=Tt.xa[0],D=D[0],xt!=0)break;if(4294967286<Tt.Ja)return 3;if(ze==null||Qt||(ze[0]=Tt.xa?2:1),Ie=[Ie],rn=[rn],Tt.xa){if(5>K){xt=7;break}ze=Ie,Gt=rn,Qt=Ae,w==null||5>K?w=0:5<=K&&w[D+0]==47&&!(w[D+4]>>5)?(Mt=[0],d=[0],yn=[0],X(un=new ae,w,D,K),Xn(un,Mt,d,yn)?(ze!=null&&(ze[0]=Mt[0]),Gt!=null&&(Gt[0]=d[0]),Qt!=null&&(Qt[0]=yn[0]),w=1):w=0):w=0}else{if(10>K){xt=7;break}ze=rn,w==null||10>K||!to(w,D+3,K-3)?w=0:(Gt=w[D+0]|w[D+1]<<8|w[D+2]<<16,Qt=16383&(w[D+7]<<8|w[D+6]),w=16383&(w[D+9]<<8|w[D+8]),1&Gt||3<(Gt>>1&7)||!(Gt>>4&1)||Gt>>5>=Tt.Ja||!Qt||!w?w=0:(Ie&&(Ie[0]=Qt),ze&&(ze[0]=w),w=1))}if(!w||(Ie=Ie[0],rn=rn[0],Ht&&(Qe[0]!=Ie||wt[0]!=rn)))return 3;Ue!=null&&(Ue[0]=Tt,Ue.offset=D-Ue.w,e(4294967286>D-Ue.w),e(Ue.offset==Ue.ha-K));break}return xt==0||xt==7&&Ht&&Ue==null?(Ae!=null&&(Ae[0]|=Tt.na!=null&&0<Tt.na.length),he!=null&&(he[0]=Ie),Ee!=null&&(Ee[0]=rn),0):xt}function tc(w,D,K){var he=D.width,Ee=D.height,Ae=0,Ie=0,ze=he,Ue=Ee;if(D.Da=w!=null&&0<w.Da,D.Da&&(ze=w.cd,Ue=w.bd,Ae=w.v,Ie=w.j,11>K||(Ae&=-2,Ie&=-2),0>Ae||0>Ie||0>=ze||0>=Ue||Ae+ze>he||Ie+Ue>Ee))return 0;if(D.v=Ae,D.j=Ie,D.va=Ae+ze,D.o=Ie+Ue,D.U=ze,D.T=Ue,D.da=w!=null&&0<w.da,D.da){if(!xe(ze,Ue,K=[w.ib],Ae=[w.hb]))return 0;D.ib=K[0],D.hb=Ae[0]}return D.ob=w!=null&&w.ob,D.Kb=w==null||!w.Sd,D.da&&(D.ob=D.ib<3*he/4&&D.hb<3*Ee/4,D.Kb=0),1}function yl(w){if(w==null)return 2;if(11>w.S){var D=w.f.RGBA;D.fb+=(w.height-1)*D.A,D.A=-D.A}else D=w.f.kb,w=w.height,D.O+=(w-1)*D.fa,D.fa=-D.fa,D.N+=(w-1>>1)*D.Ab,D.Ab=-D.Ab,D.W+=(w-1>>1)*D.Db,D.Db=-D.Db,D.F!=null&&(D.J+=(w-1)*D.lb,D.lb=-D.lb);return 0}function _l(w,D,K,he){if(he==null||0>=w||0>=D)return 2;if(K!=null){if(K.Da){var Ee=K.cd,Ae=K.bd,Ie=-2&K.v,ze=-2&K.j;if(0>Ie||0>ze||0>=Ee||0>=Ae||Ie+Ee>w||ze+Ae>D)return 2;w=Ee,D=Ae}if(K.da){if(!xe(w,D,Ee=[K.ib],Ae=[K.hb]))return 2;w=Ee[0],D=Ae[0]}}he.width=w,he.height=D;e:{var Ue=he.width,Qe=he.height;if(w=he.S,0>=Ue||0>=Qe||!(w>=No&&13>w))w=2;else{if(0>=he.Rd&&he.sd==null){Ie=Ae=Ee=D=0;var wt=(ze=Ue*Rf[w])*Qe;if(11>w||(Ae=(Qe+1)/2*(D=(Ue+1)/2),w==12&&(Ie=(Ee=Ue)*Qe)),(Qe=s(wt+2*Ae+Ie))==null){w=1;break e}he.sd=Qe,11>w?((Ue=he.f.RGBA).eb=Qe,Ue.fb=0,Ue.A=ze,Ue.size=wt):((Ue=he.f.kb).y=Qe,Ue.O=0,Ue.fa=ze,Ue.Fd=wt,Ue.f=Qe,Ue.N=0+wt,Ue.Ab=D,Ue.Cd=Ae,Ue.ea=Qe,Ue.W=0+wt+Ae,Ue.Db=D,Ue.Ed=Ae,w==12&&(Ue.F=Qe,Ue.J=0+wt+2*Ae),Ue.Tc=Ie,Ue.lb=Ee)}if(D=1,Ee=he.S,Ae=he.width,Ie=he.height,Ee>=No&&13>Ee)if(11>Ee)w=he.f.RGBA,D&=(ze=Math.abs(w.A))*(Ie-1)+Ae<=w.size,D&=ze>=Ae*Rf[Ee],D&=w.eb!=null;else{w=he.f.kb,ze=(Ae+1)/2,wt=(Ie+1)/2,Ue=Math.abs(w.fa),Qe=Math.abs(w.Ab);var Ht=Math.abs(w.Db),Gt=Math.abs(w.lb),Tt=Gt*(Ie-1)+Ae;D&=Ue*(Ie-1)+Ae<=w.Fd,D&=Qe*(wt-1)+ze<=w.Cd,D=(D&=Ht*(wt-1)+ze<=w.Ed)&Ue>=Ae&Qe>=ze&Ht>=ze,D&=w.y!=null,D&=w.f!=null,D&=w.ea!=null,Ee==12&&(D&=Gt>=Ae,D&=Tt<=w.Tc,D&=w.F!=null)}else D=0;w=D?0:2}}return w!=0||K!=null&&K.fd&&(w=yl(he)),w}var ks=64,Aa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Jo=24,Io=32,Ul=8,io=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Se("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(w){return w},O.Predictor2=function(w,D,K){return D[K+0]},O.Predictor3=function(w,D,K){return D[K+1]},O.Predictor4=function(w,D,K){return D[K-1]},O.Predictor5=function(w,D,K){return je(je(w,D[K+1]),D[K+0])},O.Predictor6=function(w,D,K){return je(w,D[K-1])},O.Predictor7=function(w,D,K){return je(w,D[K+0])},O.Predictor8=function(w,D,K){return je(D[K-1],D[K+0])},O.Predictor9=function(w,D,K){return je(D[K+0],D[K+1])},O.Predictor10=function(w,D,K){return je(je(w,D[K-1]),je(D[K+0],D[K+1]))},O.Predictor11=function(w,D,K){var he=D[K+0];return 0>=_t(he>>24&255,w>>24&255,(D=D[K-1])>>24&255)+_t(he>>16&255,w>>16&255,D>>16&255)+_t(he>>8&255,w>>8&255,D>>8&255)+_t(255&he,255&w,255&D)?he:w},O.Predictor12=function(w,D,K){var he=D[K+0];return(st((w>>24&255)+(he>>24&255)-((D=D[K-1])>>24&255))<<24|st((w>>16&255)+(he>>16&255)-(D>>16&255))<<16|st((w>>8&255)+(he>>8&255)-(D>>8&255))<<8|st((255&w)+(255&he)-(255&D)))>>>0},O.Predictor13=function(w,D,K){var he=D[K-1];return(lt((w=je(w,D[K+0]))>>24&255,he>>24&255)<<24|lt(w>>16&255,he>>16&255)<<16|lt(w>>8&255,he>>8&255)<<8|lt(w>>0&255,he>>0&255))>>>0};var _o=O.PredictorAdd0;O.PredictorAdd1=Je,Se("Predictor2","PredictorAdd2"),Se("Predictor3","PredictorAdd3"),Se("Predictor4","PredictorAdd4"),Se("Predictor5","PredictorAdd5"),Se("Predictor6","PredictorAdd6"),Se("Predictor7","PredictorAdd7"),Se("Predictor8","PredictorAdd8"),Se("Predictor9","PredictorAdd9"),Se("Predictor10","PredictorAdd10"),Se("Predictor11","PredictorAdd11"),Se("Predictor12","PredictorAdd12"),Se("Predictor13","PredictorAdd13");var bo=O.PredictorAdd2;ut("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Nc,Fs=O.ColorIndexInverseTransform,Wa=O.MapARGB,so=O.VP8LColorIndexInverseTransformAlpha,oo=O.MapAlpha,qa=O.VP8LPredictorsAdd=[];qa.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Ya,ao,Ws,Ta,Qo,lo,kt,nn,$t,Fn,or,Mr,Ji,Li,mu,wo,Qi,Da,Ka,Ia,Oa,Na,Qr,va,qs,Si,Di,xs,Vi=s(511),ea=s(2041),Oo=s(225),ia=s(767),nc=0,Ra=ea,As=Oo,zi=ia,uo=Vi,No=0,br=1,Za=2,Xa=3,ya=4,xo=5,ud=6,Ys=7,Ks=8,_a=9,c=10,y=[2,3,7],P=[3,3,11],W=[280,256,256,256,40],de=[0,1,1,1,0],ke=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ft=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],jt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zt=8,hn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$n=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],lr=null,Vr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ts=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],hs=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Zs=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],es=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ro=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cd=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ba=[],ba=[],sa=[],Ih=1,Nu=2,mi=[],co=[];Kt("UpsampleRgbLinePair",Hr,3),Kt("UpsampleBgrLinePair",Wi,3),Kt("UpsampleRgbaLinePair",Xo,4),Kt("UpsampleBgraLinePair",Ms,4),Kt("UpsampleArgbLinePair",ws,4),Kt("UpsampleRgba4444LinePair",xi,2),Kt("UpsampleRgb565LinePair",gi,2);var $e=O.UpsampleRgbLinePair,Bo=O.UpsampleBgrLinePair,rc=O.UpsampleRgbaLinePair,Xs=O.UpsampleBgraLinePair,Wr=O.UpsampleArgbLinePair,Gd=O.UpsampleRgba4444LinePair,Tf=O.UpsampleRgb565LinePair,Wd=16,bl=1<<Wd-1,dd=-227,Oh=482,Gp=6,Rc=0,qd=s(256),vu=s(256),Wp=s(256),Yd=s(256),Kd=s(Oh-dd),Df=s(Oh-dd);ro("YuvToRgbRow",Hr,3),ro("YuvToBgrRow",Wi,3),ro("YuvToRgbaRow",Xo,4),ro("YuvToBgraRow",Ms,4),ro("YuvToArgbRow",ws,4),ro("YuvToRgba4444Row",xi,2),ro("YuvToRgb565Row",gi,2);var If=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ja=[0,2,8],Of=[8,7,6,4,4,2,2,2,1,1,1,1],Nf=1;this.WebPDecodeRGBA=function(w,D,K,he,Ee){var Ae=br,Ie=new Gs,ze=new ir;Ie.ba=ze,ze.S=Ae,ze.width=[ze.width],ze.height=[ze.height];var Ue=ze.width,Qe=ze.height,wt=new hr;if(wt==null||w==null)var Ht=2;else e(wt!=null),Ht=ka(w,D,K,wt.width,wt.height,wt.Pd,wt.Qd,wt.format,null);if(Ht!=0?Ue=0:(Ue!=null&&(Ue[0]=wt.width[0]),Qe!=null&&(Qe[0]=wt.height[0]),Ue=1),Ue){ze.width=ze.width[0],ze.height=ze.height[0],he!=null&&(he[0]=ze.width),Ee!=null&&(Ee[0]=ze.height);e:{if(he=new Sr,(Ee=new ga).data=w,Ee.w=D,Ee.ha=K,Ee.kd=1,D=[0],e(Ee!=null),((w=ka(Ee.data,Ee.w,Ee.ha,null,null,null,D,null,Ee))==0||w==7)&&D[0]&&(w=4),(D=w)==0){if(e(Ie!=null),he.data=Ee.data,he.w=Ee.w+Ee.offset,he.ha=Ee.ha-Ee.offset,he.put=Vs,he.ac=Bi,he.bc=is,he.ma=Ie,Ee.xa){if((w=en())==null){Ie=1;break e}if(function(Gt,Tt){var rn=[0],Qt=[0],xt=[0];t:for(;;){if(Gt==null)return 0;if(Tt==null)return Gt.a=2,0;if(Gt.l=Tt,Gt.a=0,X(Gt.m,Tt.data,Tt.w,Tt.ha),!Xn(Gt.m,rn,Qt,xt)){Gt.a=3;break t}if(Gt.xb=Nu,Tt.width=rn[0],Tt.height=Qt[0],!ln(rn[0],Qt[0],1,Gt,null))break t;return 1}return e(Gt.a!=0),0}(w,he)){if(he=(D=_l(he.width,he.height,Ie.Oa,Ie.ba))==0){t:{he=w;n:for(;;){if(he==null){he=0;break t}if(e(he.s.yc!=null),e(he.s.Ya!=null),e(0<he.s.Wb),e((K=he.l)!=null),e((Ee=K.ma)!=null),he.xb!=0){if(he.ca=Ee.ba,he.tb=Ee.tb,e(he.ca!=null),!tc(Ee.Oa,K,Xa)){he.a=2;break n}if(!Rn(he,K.width)||K.da)break n;if((K.da||Cn(he.ca.S))&&Ot(),11>he.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),he.ca.f.kb.F!=null&&Ot()),he.Pb&&0<he.s.ua&&he.s.vb.X==null&&!re(he.s.vb,he.s.Wa.Xa)){he.a=1;break n}he.xb=0}if(!mn(he,he.V,he.Ba,he.c,he.i,K.o,Pn))break n;Ee.Dc=he.Ma,he=1;break t}e(he.a!=0),he=0}he=!he}he&&(D=w.a)}else D=w.a}else{if((w=new kr)==null){Ie=1;break e}if(w.Fa=Ee.na,w.P=Ee.P,w.qc=Ee.Sa,no(w,he)){if((D=_l(he.width,he.height,Ie.Oa,Ie.ba))==0){if(w.Aa=0,K=Ie.Oa,e((Ee=w)!=null),K!=null){if(0<(Ue=0>(Ue=K.Md)?0:100<Ue?255:255*Ue/100)){for(Qe=wt=0;4>Qe;++Qe)12>(Ht=Ee.pb[Qe]).lc&&(Ht.ia=Ue*Of[0>Ht.lc?0:Ht.lc]>>3),wt|=Ht.ia;wt&&(alert("todo:VP8InitRandom"),Ee.ia=1)}Ee.Ga=K.Id,100<Ee.Ga?Ee.Ga=100:0>Ee.Ga&&(Ee.Ga=0)}_r(w,he)||(D=w.a)}}else D=w.a}D==0&&Ie.Oa!=null&&Ie.Oa.fd&&(D=yl(Ie.ba))}Ie=D}Ae=Ie!=0?null:11>Ae?ze.f.RGBA.eb:ze.f.kb.y}else Ae=null;return Ae};var Rf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(O,j){for(var Y="",V=0;V<4;V++)Y+=String.fromCharCode(O[j++]);return Y}function h(O,j){return(O[j+0]<<0|O[j+1]<<8|O[j+2]<<16)>>>0}function p(O,j){return(O[j+0]<<0|O[j+1]<<8|O[j+2]<<16|O[j+3]<<24)>>>0}new l;var v=[0],m=[0],S=[],E=new l,k=n,T=function(O,j){var Y={},V=0,N=!1,q=0,$=0;if(Y.frames=[],!function(ve,ye,J,se){for(var fe=0;fe<se;fe++)if(ve[ye+fe]!=J.charCodeAt(fe))return!0;return!1}(O,j,"RIFF",4)){var F,B;for(p(O,j+=4),j+=8;j<O.length;){var Q=u(O,j),X=p(O,j+=4);j+=4;var _e=X+(1&X);switch(Q){case"VP8 ":case"VP8L":Y.frames[V]===void 0&&(Y.frames[V]={}),(ae=Y.frames[V]).src_off=N?$:j-8,ae.src_size=q+X+8,V++,N&&(N=!1,q=0,$=0);break;case"VP8X":(ae=Y.header={}).feature_flags=O[j];var me=j+4;ae.canvas_width=1+h(O,me),me+=3,ae.canvas_height=1+h(O,me),me+=3;break;case"ALPH":N=!0,q=_e+8,$=j-8;break;case"ANIM":(ae=Y.header).bgcolor=p(O,j),me=j+4,ae.loop_count=(F=O)[(B=me)+0]<<0|F[B+1]<<8,me+=2;break;case"ANMF":var We,ae;(ae=Y.frames[V]={}).offset_x=2*h(O,j),j+=3,ae.offset_y=2*h(O,j),j+=3,ae.width=1+h(O,j),j+=3,ae.height=1+h(O,j),j+=3,ae.duration=h(O,j),j+=3,We=O[j++],ae.dispose=1&We,ae.blend=We>>1&1}Q!="ANMF"&&(j+=_e)}return Y}}(k,0);T.response=k,T.rgbaoutput=!0,T.dataurl=!1;var A=T.header?T.header:null,R=T.frames?T.frames:null;if(A){A.loop_counter=A.loop_count,v=[A.canvas_height],m=[A.canvas_width];for(var G=0;G<R.length&&R[G].blend!=0;G++);}var ee=R[0],pe=E.WebPDecodeRGBA(k,ee.src_off,ee.src_size,m,v);ee.rgba=pe,ee.imgwidth=m[0],ee.imgheight=v[0];for(var ge=0;ge<m[0]*v[0]*4;ge++)S[ge]=pe[ge];return this.width=m,this.height=v,this.data=S,this}(function(n){var e=function(){return typeof Db=="function"},t=function(v,m,S,E){var k=4,T=o;switch(E){case n.image_compression.FAST:k=1,T=s;break;case n.image_compression.MEDIUM:k=6,T=a;break;case n.image_compression.SLOW:k=9,T=l}v=r(v,m,S,T);var A=Db(v,{level:k});return n.__addimage__.arrayBufferToBinaryString(A)},r=function(v,m,S,E){for(var k,T,A,R=v.length/m,G=new Uint8Array(v.length+R),ee=h(),pe=0;pe<R;pe+=1){if(A=pe*m,k=v.subarray(A,A+m),E)G.set(E(k,S,T),A+pe);else{for(var ge,O=ee.length,j=[];ge<O;ge+=1)j[ge]=ee[ge](k,S,T);var Y=p(j.concat());G.set(j[Y],A+pe)}T=k}return G},i=function(v){var m=Array.apply([],v);return m.unshift(0),m},s=function(v,m){var S,E=[],k=v.length;E[0]=1;for(var T=0;T<k;T+=1)S=v[T-m]||0,E[T+1]=v[T]-S+256&255;return E},o=function(v,m,S){var E,k=[],T=v.length;k[0]=2;for(var A=0;A<T;A+=1)E=S&&S[A]||0,k[A+1]=v[A]-E+256&255;return k},a=function(v,m,S){var E,k,T=[],A=v.length;T[0]=3;for(var R=0;R<A;R+=1)E=v[R-m]||0,k=S&&S[R]||0,T[R+1]=v[R]+256-(E+k>>>1)&255;return T},l=function(v,m,S){var E,k,T,A,R=[],G=v.length;R[0]=4;for(var ee=0;ee<G;ee+=1)E=v[ee-m]||0,k=S&&S[ee]||0,T=S&&S[ee-m]||0,A=u(E,k,T),R[ee+1]=v[ee]-A+256&255;return R},u=function(v,m,S){if(v===m&&m===S)return v;var E=Math.abs(m-S),k=Math.abs(v-S),T=Math.abs(v+m-S-S);return E<=k&&E<=T?v:k<=T?m:S},h=function(){return[i,s,o,a,l]},p=function(v){var m=v.map(function(S){return S.reduce(function(E,k){return E+Math.abs(k)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(v,m,S,E){var k,T,A,R,G,ee,pe,ge,O,j,Y,V,N,q,$,F=this.decode.FLATE_DECODE,B="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(A=new iG(v)).imgData,T=A.bits,k=A.colorSpace,G=A.colors,[4,6].indexOf(A.colorType)!==-1){if(A.bits===8){O=(ge=A.pixelBitlength==32?new Uint32Array(A.decodePixels().buffer):A.pixelBitlength==16?new Uint16Array(A.decodePixels().buffer):new Uint8Array(A.decodePixels().buffer)).length,Y=new Uint8Array(O*A.colors),j=new Uint8Array(O);var Q,X=A.pixelBitlength-A.bits;for(q=0,$=0;q<O;q++){for(N=ge[q],Q=0;Q<X;)Y[$++]=N>>>Q&255,Q+=A.bits;j[q]=N>>>Q&255}}if(A.bits===16){O=(ge=new Uint32Array(A.decodePixels().buffer)).length,Y=new Uint8Array(O*(32/A.pixelBitlength)*A.colors),j=new Uint8Array(O*(32/A.pixelBitlength)),V=A.colors>1,q=0,$=0;for(var _e=0;q<O;)N=ge[q++],Y[$++]=N>>>0&255,V&&(Y[$++]=N>>>16&255,N=ge[q++],Y[$++]=N>>>0&255),j[_e++]=N>>>16&255;T=8}E!==n.image_compression.NONE&&e()?(v=t(Y,A.width*A.colors,A.colors,E),pe=t(j,A.width,1,E)):(v=Y,pe=j,F=void 0)}if(A.colorType===3&&(k=this.color_spaces.INDEXED,ee=A.palette,A.transparency.indexed)){var me=A.transparency.indexed,We=0;for(q=0,O=me.length;q<O;++q)We+=me[q];if((We/=255)===O-1&&me.indexOf(0)!==-1)R=[me.indexOf(0)];else if(We!==O){for(ge=A.decodePixels(),j=new Uint8Array(ge.length),q=0,O=ge.length;q<O;q++)j[q]=me[ge[q]];pe=t(j,A.width,1)}}var ae=function(ve){var ye;switch(ve){case n.image_compression.FAST:ye=11;break;case n.image_compression.MEDIUM:ye=13;break;case n.image_compression.SLOW:ye=14;break;default:ye=12}return ye}(E);return F===this.decode.FLATE_DECODE&&(B="/Predictor "+ae+" "),B+="/Colors "+G+" /BitsPerComponent "+T+" /Columns "+A.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(pe&&this.__addimage__.isArrayBuffer(pe)||this.__addimage__.isArrayBufferView(pe))&&(pe=this.__addimage__.arrayBufferToBinaryString(pe)),{alias:S,data:v,index:m,filter:F,decodeParameters:B,transparency:R,palette:ee,sMask:pe,predictor:ae,width:A.width,height:A.height,bitsPerComponent:T,colorSpace:k}}}})(Fr.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new sG(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},h=new f_(100).encode(u,100);return n.processJPEG.call(this,h,t,r,i)},n.processGIF87A=n.processGIF89A}(Fr.API),fc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},fc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Cs.log("bit decode error:"+t)}},fc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}t!==0&&(this.pos+=4-t)}},fc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},fc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},fc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=u}this.pos+=n}},fc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&t)/t*255|0,u=(o>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=n}},fc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},fc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},fc.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new fc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new f_(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(Fr.API),W5.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new W5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new f_(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(Fr.API),Fr.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var h=r[u],p=r[u+1],v=r[u+2],m=r[u+3];s[a++]=h,s[a++]=p,s[a++]=v,o[l++]=m}var S=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:S,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Fr.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xf=Fr.API,M0=Xf.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=u.fof?u.fof:1,p=e.doKerning!==!1,v=0,m=n.length,S=0,E=a[0]||l,k=[];for(t=0;t<m;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&gs(u[r])==="object"&&!isNaN(parseInt(u[r][S],10))?u[r][S]/h:0,k.push((a[r]||E)/l+v)),S=r;return k},U5=Xf.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Xf.processArabic&&(n=Xf.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:M0.apply(this,arguments).reduce(function(s,o){return s+o},0)},V5=function(n,e,t,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+e[s]<t;)a+=e[s],s++;i.push(n.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(n.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},H5=function(n,e,t){t||(t={});var r,i,s,o,a,l,u,h=[],p=[h],v=t.textIndent||0,m=0,S=0,E=n.split(" "),k=M0.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?E[0].length+2:t.lineIndent||0){var T=Array(l).join(" "),A=[];E.map(function(G){(G=G.split(/\s*\n/)).length>1?A=A.concat(G.map(function(ee,pe){return(pe&&ee.length?`
`:"")+ee})):A.push(G[0])}),E=A,l=U5.apply(this,[T,t])}for(s=0,o=E.length;s<o;s++){var R=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),R=1),v+m+(S=(i=M0.apply(this,[r,t])).reduce(function(G,ee){return G+ee},0))>e||R){if(S>e){for(a=V5.apply(this,[r,i,e-(v+m),e]),h.push(a.shift()),h=[a.pop()];a.length;)p.push([a.shift()]);S=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(G,ee){return G+ee},0)}else h=[r];p.push(h),v=S+l,m=k}else h.push(r),v+=m+S,m=k}return u=l?function(G,ee){return(ee?T:"")+G.join(" ")}:function(G){return G.join(" ")},p.map(u)},Xf.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(H5.apply(this,[r[a],o,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var v,m,S,E,k=["{"];for(var T in p){if(v=p[T],isNaN(parseInt(T,10))?m="'"+T+"'":(T=parseInt(T,10),m=(m=s(T).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof v=="number")v<0?(S=s(v).slice(3),E="-"):(S=s(v).slice(2),E=""),S=E+S.slice(0,-1)+r[S.slice(-1)];else{if(gs(v)!=="object")throw new Error("Don't know what to do with value type "+gs(v)+".");S=o(v)}k.push(m+S)}return k.push("}"),k.join("")},a=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,m,S,E,k={},T=1,A=k,R=[],G="",ee="",pe=p.length-1,ge=1;ge<pe;ge+=1)(E=p[ge])=="'"?v?(S=v.join(""),v=void 0):v=[]:v?v.push(E):E=="{"?(R.push([A,S]),A={},S=void 0):E=="}"?((m=R.pop())[0][m[1]]=A,S=void 0,A=m[0]):E=="-"?T=-1:S===void 0?t.hasOwnProperty(E)?(G+=t[E],S=parseInt(G,16)*T,T=1,G=""):G+=E:t.hasOwnProperty(E)?(ee+=t[E],A[S]=parseInt(ee,16)*T,T=1,S=void 0,ee=""):ee+=E;return k},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var v=p.font,m=h.Unicode[v.postScriptName];m&&(v.metadata.Unicode={},v.metadata.Unicode.widths=m.widths,v.metadata.Unicode.kerning=m.kerning);var S=u.Unicode[v.postScriptName];S&&(v.metadata.Unicode.encoding=S,v.encoding=S.codePages[0])}])}(Fr.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Yg(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Fr),function(n){function e(){return(jr.canvg?Promise.resolve(jr.canvg):Id(()=>import("./index.es.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Fr.API.addSvgAsImage=function(t,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw Cs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Cs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(S){return S.fromString(p,t,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(v)}).then(function(){m.addImage(h.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),Fr.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Fr.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,h=0,p=0;function v(S,E){var k,T=!1;for(k=0;k<S.length;k+=1)S[k]===E&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=a.length;for(p=0;p<m;p+=1)t[a[p]].value=t[a[p]].defaultValue,t[a[p]].explicitSet=!1}if(gs(n)==="object"){for(i in n)if(s=n[i],v(a,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&v(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(h=0;h<s[u].length;h+=1)typeof s[u][h]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var S,E=[];for(S in t)t[S].explicitSet===!0&&(t[S].type==="name"?E.push("/"+S+" /"+t[S].value):E.push("/"+S+" "+t[S].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Fr.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(u[4-a.length],a)}return h.join("")},r=function(s){var o,a,l,u,h,p,v;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(m,S){return m-S})).length;p<v;p++)o=a[p],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",S=0;S<v.length;S++)m+=String.fromCharCode(v[S]);var E=u();h({data:m,addLength1:!0,objectId:E}),l("endobj");var k=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var T=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+cp(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var A=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+cp(a.fontName)),l("/FontDescriptor "+T+" 0 R"),l("/W "+n.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+cp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+A+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);var S=u();h({data:v,addLength1:!0,objectId:S}),l("endobj");var E=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var k=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+S+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+cp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var T=0;T<a.metadata.hmtx.widths.length;T++)a.metadata.hmtx.widths[T]=parseInt(a.metadata.hmtx.widths[T]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+cp(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,h=s.options||{},p=s.mutex||{},v=p.pdfEscape,m=p.activeFontKey,S=p.fonts,E=m,k="",T=0,A="",R=S[E].encoding;if(S[E].encoding!=="Identity-H")return{text:a,x:l,y:u,options:h,mutex:p};for(A=a,E=m,Array.isArray(a)&&(A=a[0]),T=0;T<A.length;T+=1)S[E].metadata.hasOwnProperty("cmap")&&(o=S[E].metadata.cmap.unicode.codeMap[A[T].charCodeAt(0)]),o||A[T].charCodeAt(0)<256&&S[E].metadata.hasOwnProperty("Unicode")?k+=A[T]:k+="";var G="";return parseInt(E.slice(1))<14||R==="WinAnsiEncoding"?G=v(k,E).split("").map(function(ee){return ee.charCodeAt(0).toString(16)}).join(""):R==="Identity-H"&&(G=t(k,S[E])),p.isHex=!0,{text:G,x:l,y:u,options:h,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Fr),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Fr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,h,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],S={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,R=0;this.__bidiEngine__={};var G=function(V){var N=V.charCodeAt(),q=N>>8,$=E[q];return $!==void 0?p[256*$+(255&N)]:q===252||q===253?"AL":T.test(q)?"L":q===8?"R":"N"},ee=function(V){for(var N,q=0;q<V.length;q++){if((N=G(V.charAt(q)))==="L")return!1;if(N==="R")return!0}return!1},pe=function(V,N,q,$){var F,B,Q,X,_e=N[$];switch(_e){case"L":case"R":A=!1;break;case"N":case"AN":break;case"EN":A&&(_e="AN");break;case"AL":A=!0,_e="R";break;case"WS":_e="N";break;case"CS":$<1||$+1>=N.length||(F=q[$-1])!=="EN"&&F!=="AN"||(B=N[$+1])!=="EN"&&B!=="AN"?_e="N":A&&(B="AN"),_e=B===F?B:"N";break;case"ES":_e=(F=$>0?q[$-1]:"B")==="EN"&&$+1<N.length&&N[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&q[$-1]==="EN"){_e="EN";break}if(A){_e="N";break}for(Q=$+1,X=N.length;Q<X&&N[Q]==="ET";)Q++;_e=Q<X&&N[Q]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(X=N.length,Q=$+1;Q<X&&N[Q]==="NSM";)Q++;if(Q<X){var me=V[$],We=me>=1425&&me<=2303||me===64286;if(F=N[Q],We&&(F==="R"||F==="AL")){_e="R";break}}}_e=$<1||(F=N[$-1])==="B"?"N":q[$-1];break;case"B":A=!1,i=!0,_e=R;break;case"S":s=!0,_e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"BN":_e="N"}return _e},ge=function(V,N,q){var $=V.split("");return q&&O($,q,{hiLevel:R}),$.reverse(),N&&N.reverse(),$.join("")},O=function(V,N,q){var $,F,B,Q,X,_e=-1,me=V.length,We=0,ae=[],ve=R?m:v,ye=[];for(A=!1,i=!1,s=!1,F=0;F<me;F++)ye[F]=G(V[F]);for(B=0;B<me;B++){if(X=We,ae[B]=pe(V,ye,ae,B),$=240&(We=ve[X][S[ae[B]]]),We&=15,N[B]=Q=ve[We][5],$>0)if($===16){for(F=_e;F<B;F++)N[F]=1;_e=-1}else _e=-1;if(ve[We][6])_e===-1&&(_e=B);else if(_e>-1){for(F=_e;F<B;F++)N[F]=Q;_e=-1}ye[B]==="B"&&(N[B]=0),q.hiLevel|=Q}s&&function(J,se,fe){for(var ie=0;ie<fe;ie++)if(J[ie]==="S"){se[ie]=R;for(var te=ie-1;te>=0&&J[te]==="WS";te--)se[te]=R}}(ye,N,me)},j=function(V,N,q,$,F){if(!(F.hiLevel<V)){if(V===1&&R===1&&!i)return N.reverse(),void(q&&q.reverse());for(var B,Q,X,_e,me=N.length,We=0;We<me;){if($[We]>=V){for(X=We+1;X<me&&$[X]>=V;)X++;for(_e=We,Q=X-1;_e<Q;_e++,Q--)B=N[_e],N[_e]=N[Q],N[Q]=B,q&&(B=q[_e],q[_e]=q[Q],q[Q]=B);We=X}We++}}},Y=function(V,N,q){var $=V.split(""),F={hiLevel:R};return q||(q=[]),O($,q,F),function(B,Q,X){if(X.hiLevel!==0&&h)for(var _e,me=0;me<B.length;me++)Q[me]===1&&(_e=k.indexOf(B[me]))>=0&&(B[me]=k[_e+1])}($,q,F),j(2,$,N,q,F),j(1,$,N,q,F),$.join("")};return this.__bidiEngine__.doBidiReorder=function(V,N,q){if(function(F,B){if(B)for(var Q=0;Q<F.length;Q++)B[Q]=Q;a===void 0&&(a=ee(F)),u===void 0&&(u=ee(F))}(V,N),o||!l||u)if(o&&l&&a^u)R=a?1:0,V=ge(V,N,q);else if(!o&&l&&u)R=a?1:0,V=Y(V,N,q),V=ge(V,N);else if(!o||a||l||u){if(o&&!l&&a^u)V=ge(V,N),a?(R=0,V=Y(V,N,q)):(R=1,V=Y(V,N,q),V=ge(V,N));else if(o&&a&&!l&&u)R=1,V=Y(V,N,q),V=ge(V,N);else if(!o&&!l&&a^u){var $=h;a?(R=1,V=Y(V,N,q),R=0,h=!1,V=Y(V,N,q),h=$):(R=0,V=Y(V,N,q),V=ge(V,N),R=1,h=!1,V=Y(V,N,q),h=$,V=ge(V,N))}}else R=0,V=Y(V,N,q);else R=a?1:0,V=Y(V,N,q);return V},this.__bidiEngine__.setOptions=function(V){V&&(o=V.isInputVisual,l=V.isOutputVisual,a=V.isInputRtl,u=V.isOutputRtl,h=V.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([t.doBidiReorder(i[a])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Fr),Fr.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Ph(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new bG(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new oG(this.contents),this.head=new lG(this),this.name=new fG(this),this.cmap=new mP(this),this.toUnicode={},this.hhea=new uG(this),this.maxp=new pG(this),this.hmtx=new gG(this),this.post=new dG(this),this.os2=new cG(this),this.loca=new _G(this),this.glyf=new mG(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Tc,Ph=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),oG=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,o,a,l,u,h,p,v,m,S,E;for(E in m=Object.keys(t).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),o=Math.floor(p/l),h=16*m-p,(i=new Ph).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(h),s=16*m,u=i.pos+s,a=null,S=[],t)for(v=t[E],i.writeString(E),i.writeInt(n(v)),i.writeInt(u),i.writeInt(v.length),S=S.concat(v),E==="head"&&(a=u),u+=v.length;u%4;)S.push(0),u++;return i.write(S),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=vP.call(t);t.length%4;)t.push(0);for(s=new Ph(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),aG={}.hasOwnProperty,ld=function(n,e){for(var t in e)aG.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Tc=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var lG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Tc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Ph).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),q5=function(){function n(e,t){var r,i,s,o,a,l,u,h,p,v,m,S,E,k,T,A,R;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),v=m/2,e.pos+=6,s=function(){var G,ee;for(ee=[],l=G=0;0<=v?G<v:G>v;l=0<=v?++G:--G)ee.push(e.readUInt16());return ee}(),e.pos+=2,E=function(){var G,ee;for(ee=[],l=G=0;0<=v?G<v:G>v;l=0<=v?++G:--G)ee.push(e.readUInt16());return ee}(),u=function(){var G,ee;for(ee=[],l=G=0;0<=v?G<v:G>v;l=0<=v?++G:--G)ee.push(e.readUInt16());return ee}(),h=function(){var G,ee;for(ee=[],l=G=0;0<=v?G<v:G>v;l=0<=v?++G:--G)ee.push(e.readUInt16());return ee}(),i=(this.length-e.pos+this.offset)/2,a=function(){var G,ee;for(ee=[],l=G=0;0<=i?G<i:G>i;l=0<=i?++G:--G)ee.push(e.readUInt16());return ee}(),l=T=0,R=s.length;T<R;l=++T)for(k=s[l],r=A=S=E[l];S<=k?A<=k:A>=k;r=S<=k?++A:--A)h[l]===0?o=r+u[l]:(o=a[h[l]/2+(r-S)-(v-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,s,o,a,l,u,h,p,v,m,S,E,k,T,A,R,G,ee,pe,ge,O,j,Y,V,N,q,$,F,B,Q,X,_e,me,We,ae,ve,ye,J,se,fe,ie,te,Oe,we,Be;switch($=new Ph,o=Object.keys(e).sort(function(ue,re){return ue-re}),t){case"macroman":for(E=0,k=function(){var ue=[];for(S=0;S<256;++S)ue.push(0);return ue}(),A={0:0},s={},F=0,_e=o.length;F<_e;F++)A[te=e[i=o[F]]]==null&&(A[te]=++E),s[i]={old:e[i],new:A[e[i]]},k[i]=A[e[i]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(k),{charMap:s,subtable:$.data,maxGlyphID:E+1};case"unicode":for(N=[],p=[],R=0,A={},r={},T=u=null,B=0,me=o.length;B<me;B++)A[ee=e[i=o[B]]]==null&&(A[ee]=++R),r[i]={old:ee,new:A[ee]},a=A[ee]-i,T!=null&&a===u||(T&&p.push(T),N.push(i),u=a),T=i;for(T&&p.push(T),p.push(65535),N.push(65535),Y=2*(j=N.length),O=2*Math.pow(Math.log(j)/Math.LN2,2),v=Math.log(O/2)/Math.LN2,ge=2*j-O,l=[],pe=[],m=[],S=Q=0,We=N.length;Q<We;S=++Q){if(V=N[S],h=p[S],V===65535){l.push(0),pe.push(0);break}if(V-(q=r[V].new)>=32768)for(l.push(0),pe.push(2*(m.length+j-S)),i=X=V;V<=h?X<=h:X>=h;i=V<=h?++X:--X)m.push(r[i].new);else l.push(q-V),pe.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*j+2*m.length),$.writeUInt16(0),$.writeUInt16(Y),$.writeUInt16(O),$.writeUInt16(v),$.writeUInt16(ge),fe=0,ae=p.length;fe<ae;fe++)i=p[fe],$.writeUInt16(i);for($.writeUInt16(0),ie=0,ve=N.length;ie<ve;ie++)i=N[ie],$.writeUInt16(i);for(Oe=0,ye=l.length;Oe<ye;Oe++)a=l[Oe],$.writeUInt16(a);for(we=0,J=pe.length;we<J;we++)G=pe[we],$.writeUInt16(G);for(Be=0,se=m.length;Be<se;Be++)E=m[Be],$.writeUInt16(E);return{charMap:r,subtable:$.data,maxGlyphID:R+1}}},n}(),mP=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Tc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new q5(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=q5.encode(t,r),(s=new Ph).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),uG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Tc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),cG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Tc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),dG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Tc),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(t.readUInt32());return u}).call(this)}},e}(),hG=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},fG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Tc),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,o,a,l,u,h,p,v,m;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},o=p=0,v=i.length;p<v;o=++p)s=i[o],t.pos=s.offset,h=t.readString(s.length),a=new hG(h,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),pG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Tc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),gG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Tc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,o,a,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,p;for(p=[],r=h=0;0<=s?h<s:h>s;r=0<=s?++h:--h)p.push(t.readInt16());return p}(),this.widths=(function(){var h,p,v,m;for(m=[],h=0,p=(v=this.metrics).length;h<p;h++)o=v[h],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),vP=[].slice,mG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Tc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,o,a,l,u,h,p,v;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(l=new Ph(r.read(s))).readShort(),h=l.readShort(),v=l.readShort(),u=l.readShort(),p=l.readShort(),this.cache[t]=a===-1?new yG(l,h,v,u,p):new vG(l,a,h,v,u,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=t[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),vG=function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),yG=function(){function n(e,t,r,i,s){var o,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Ph(vP.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),_G=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Tc),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},e}(),bG=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))r=l[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,o,a,l,u,h,p,v,m,S,E,k,T;for(i in r=mP.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},T=r.charMap)m[(l=T[i]).old]=l.new;for(S in v=r.maxGlyphID,o)S in m||(m[S]=v++);return h=function(A){var R,G;for(R in G={},A)G[A[R]]=R;return G}(m),p=Object.keys(h).sort(function(A,R){return A-R}),E=function(){var A,R,G;for(G=[],A=0,R=p.length;A<R;A++)a=p[A],G.push(h[a]);return G}(),s=this.font.glyf.encode(o,E,m),u=this.font.loca.encode(s.offsets,E),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},n}();Fr.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var a,l,u;for(u=[],a=0,l=t.length;a<l;a++)r=t[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+t},e}();const wG={class:"h-full flex"},xG={class:"flex-1 relative"},LG={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},SG={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},CG={class:"text-center max-w-lg mx-auto p-8"},EG={class:"space-y-4"},PG={class:"map-parent"},MG={class:"map-content flex flex-col h-full"},kG={class:"flex-1 flex flex-col md:flex-row relative"},AG={class:"flex-1 relative"},TG={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},DG={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},IG={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},OG={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},NG={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},RG={key:0,class:"space-y-4"},BG={key:0,class:"space-y-2"},FG={class:"grid grid-cols-1 gap-2"},jG=["onClick"],zG={class:"font-medium text-gray-900"},$G={key:1,class:"space-y-2"},UG={class:"flex items-center mb-4"},VG={class:"text-sm text-gray-600"},HG={class:"grid grid-cols-1 gap-2"},GG=["onClick"],WG={class:"font-medium text-gray-900"},qG={key:2,class:"space-y-2"},YG={class:"flex items-center mb-4"},KG={class:"text-sm text-gray-600"},ZG={class:"grid grid-cols-1 gap-2"},XG={key:0,class:"text-center py-4"},JG=["onClick"],QG={class:"font-medium text-gray-900"},eW={key:3,class:"space-y-2"},tW={class:"flex items-center mb-4"},nW={class:"text-sm text-gray-600"},rW={class:"grid grid-cols-1 gap-2"},iW=["onClick"],sW={class:"font-medium text-gray-900"},oW={class:"text-sm text-gray-500"},aW={class:"text-xs text-gray-400 mt-1"},lW=["onClick"],uW={key:1,class:"space-y-4"},cW={key:0,class:"space-y-2"},dW={class:"grid grid-cols-1 gap-2"},hW={key:0,class:"text-center py-8"},fW=["onClick"],pW={class:"font-medium text-gray-900"},gW={key:1,class:"space-y-2"},mW={class:"flex items-center mb-4"},vW={class:"text-sm text-gray-600"},yW={class:"grid grid-cols-1 gap-2"},_W=["onClick"],bW={class:"font-medium text-gray-900"},wW={class:"text-sm text-gray-500"},xW={class:"text-xs text-gray-400 mt-1"},LW=["onClick"],SW={key:2,class:"space-y-4"},CW={key:0,class:"space-y-2"},EW={class:"grid grid-cols-1 gap-2"},PW=["onClick"],MW={class:"font-medium text-gray-900"},kW={key:1,class:"space-y-2"},AW={class:"flex items-center mb-4"},TW={class:"text-sm text-gray-600"},DW={class:"grid grid-cols-1 gap-2"},IW={key:0,class:"text-center py-4"},OW=["onClick"],NW={class:"font-medium text-gray-900"},RW={key:2,class:"space-y-2"},BW={class:"flex items-center mb-4"},FW={class:"text-sm text-gray-600"},jW={class:"grid grid-cols-1 gap-2"},zW=["onClick"],$W={class:"font-medium text-gray-900"},UW={class:"text-sm text-gray-500"},VW={class:"text-xs text-gray-400 mt-1"},HW=["onClick"],GW={key:3,class:"space-y-4"},WW={key:0,class:"text-center py-8"},qW={key:1,class:"space-y-2"},YW=["onClick"],KW={class:"font-medium text-gray-900"},ZW={class:"text-sm text-gray-500"},XW={class:"text-xs text-gray-400 mt-1"},JW=["onClick"],QW={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},eq={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},tq={class:"text-center mb-4"},nq={class:"mt-2 text-gray-600"},Y5=Rs({__name:"MapView",emits:["shape-selected"],setup(n,{emit:e}){const t=uB(),r=yt(null),i=yt(!1),s=Gy(),o=Ip(),a=xf(),l=ou(),u=yt([]),h=yt({planId:t.query.planId?parseInt(t.query.planId):null,noteId:t.query.noteId?parseInt(t.query.noteId):null,lat:t.query.lat?parseFloat(t.query.lat):null,lng:t.query.lng?parseFloat(t.query.lng):null,tool:t.query.tool||null}),{currentTool:p,selectedShape:v,map:m,initMap:S,setDrawingTool:E,updateShapeStyle:k,updateShapeProperties:T,featureGroup:A,adjustView:R,clearActiveControlPoints:G,isDrawing:ee}=YE(),{initMap:pe,changeBaseMap:ge}=QV(),O=yt(!1),j=yt(!1),Y=yt(!1),V=yt(!1),N=yt(null),q=yt(null),$=yt(null),F=yt(!1),B=yt(null),Q=Ao(),X=yt([]),_e=yt([]),me=yt([]),We=yt(null),ae=yt(null),ve=yt(null),ye=yt(!1),J=yt(!1),se=yt(!1),fe=yt(null),ie=rr(()=>{var Et,at;return console.log("[MapView][filteredClients] Computing with:",{userType:(Et=Q.user)==null?void 0:Et.user_type,selectedSalarie:We.value,salarieVisiteurs:_e.value,visiteurCount:((at=_e.value)==null?void 0:at.length)||0}),Q.isSalarie||We.value?_e.value:[]}),te=rr(()=>{var Pn,Er,Yn;if(!v.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:v.value,hasName:"name"in v.value,name:v.value.name,hasProperties:"properties"in v.value,propertiesName:(Pn=v.value.properties)==null?void 0:Pn.name,allLayerKeys:Object.keys(v.value),allPropertiesKeys:v.value.properties?Object.keys(v.value.properties):[],_leaflet_id:v.value._leaflet_id,_dbId:v.value._dbId,descriptor:Object.getOwnPropertyDescriptor(v.value,"name")});const Et=v.value.properties||{};let at="unknown";Et.type?at=Et.type:v.value instanceof vt.Circle?at="Circle":v.value instanceof $a||v.value instanceof vt.Rectangle?at="Rectangle":v.value instanceof Ql||v.value instanceof vt.Polygon?at="Polygon":(v.value instanceof js||v.value instanceof vt.Polyline&&!(v.value instanceof vt.Polygon))&&(at="Line"),console.log(`[MapView][selectedShape] Type de forme détecté: ${at}`),Et.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=at);let Bt;if(Et.style&&Et.style.name)Bt=Et.style.name,console.log("[MapView][selectedShape] Using name from style:",Bt);else if(Et.name)Bt=Et.name,console.log("[MapView][selectedShape] Using name from properties:",Bt);else if(v.value.name)Bt=v.value.name,console.log("[MapView][selectedShape] Using name from layer:",Bt);else{const Ct=Object.getOwnPropertyDescriptor(v.value,"name");Ct&&Ct.value&&(Bt=Ct.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",Bt));const mn=["_name","displayName","title"];for(const Hn of mn)if(v.value[Hn]){Bt=v.value[Hn],console.log(`[MapView][selectedShape] Found name in ${Hn}:`,Bt);break}}Bt&&(console.log(`[MapView][selectedShape] Ensuring name "${Bt}" is set everywhere`),v.value.properties||(v.value.properties={}),v.value.properties.name=Bt,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=Bt,v.value.name=Bt,typeof v.value.setName=="function"&&(v.value.setName(Bt),console.log(`[MapView][selectedShape] Used setName method to set name "${Bt}"`))),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:at,name:Et.name,foundName:Bt,hasNameProperty:"name"in Et,allPropertiesKeys:Object.keys(Et),layerId:v.value._leaflet_id,rawProperties:Et,layerName:v.value.name,layerPropertiesName:(Er=v.value.properties)==null?void 0:Er.name});const Yt={...Et,type:at,name:Bt||v.value.name||Et.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"},In={type:at,properties:Yt,layer:v.value,options:v.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:In.type,hasName:"name"in In.properties,name:In.properties.name,layerName:In.layer.name,layerPropertiesName:(Yn=In.layer.properties)==null?void 0:Yn.name}),In});function Oe(Et){const at=Et.getCenter(),Bt=Et.getZoom(),Yt={lat:at.lat,lng:at.lng,zoom:Bt};document.cookie=`mapState=${JSON.stringify(Yt)};max-age=2592000;path=/`}function we(){const at=document.cookie.split(";").find(Bt=>Bt.trim().startsWith("mapState="));if(at)try{return JSON.parse(at.split("=")[1])}catch(Bt){return console.error("Erreur lors de la lecture du cookie de position:",Bt),null}return null}Es(async()=>{var Et,at;console.log("[MapView][onMounted] Initialisation du composant MapView"),window.addEventListener("resize",ss),console.log("[MapView][onMounted] État initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),(Q.isAdmin||Q.isEntreprise)&&await Jt(),Q.isEntreprise){ye.value=!0;try{const Ct=await Bn.get("/users/",{params:{role:"SALARIE",entreprise:(Et=Q.user)==null?void 0:Et.id}});X.value=Ct.data}catch(Ct){console.error("Error loading salaries:",Ct),X.value=[]}finally{ye.value=!1}}if(Q.isSalarie){J.value=!0;try{const Ct=await Q.fetchSalarieVisiteurs(((at=Q.user)==null?void 0:at.id)||0);_e.value=Array.isArray(Ct)?Ct:[Ct]}catch(Ct){console.error("Error loading clients:",Ct)}finally{J.value=!1}}const Bt=we(),Yt=Bt?[Bt.lat,Bt.lng]:[46.603354,1.888334],In=(Bt==null?void 0:Bt.zoom)??6;if(r.value&&!m.value){const Ct=S(r.value,Yt,In);Ct.pm.setLang("fr"),Ct.pm.addControls({rotateMode:!1}),pe(Ct),Xn=tH(),is.value&&Xn.initMobileEditing(),jd(()=>{Xn&&Xn.cleanup()}),Ct.on("moveend",()=>{Oe(Ct)}),window.addEventListener("map-set-location",mn=>{if(Ct&&mn.detail){const{lat:Hn,lng:en,zoom:ln}=mn.detail;Ct.flyTo([Hn,en],ln,{duration:1.5,easeLinearity:.25})}}),A.value&&(A.value.on("layeradd",mn=>{const Hn=mn.layer;Hn&&Hn._leaflet_id&&u.value.findIndex(ln=>ln.layer&&ln.layer._leaflet_id===Hn._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Hn._leaflet_id} à shapes.value`),u.value.push({layer:Hn,id:Hn._dbId||Hn._leaflet_id}))}),A.value.on("layerremove",mn=>{const Hn=mn.layer;if(Hn&&Hn._leaflet_id)if(!Hn._dbId&&(!Hn.properties||Hn.properties&&!Hn.properties.type)){console.log(`[MapView][featureGroup.layerremove] Couche temporaire ${Hn._leaflet_id} supprimée définitivement`);const ln=u.value.findIndex(Rn=>Rn.layer&&Rn.layer._leaflet_id===Hn._leaflet_id);ln!==-1&&u.value.splice(ln,1)}else console.log(`[MapView][featureGroup.layerremove] Couche ${Hn._leaflet_id} supprimée du featureGroup mais conservée dans shapes.value pour restauration ultérieure`)}))}if(h.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramètres d'URL:",h.value.planId),await xe(h.value.planId);const Ct=document.querySelector(".map-parent");Ct instanceof HTMLElement&&(Ct.style.display="block"),h.value.lat&&h.value.lng&&m.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnées:",h.value.lat,h.value.lng),m.value.flyTo([h.value.lat,h.value.lng],30)),h.value.noteId&&A.value&&(console.log("[MapView][onMounted] Recherche de la note:",h.value.noteId),setTimeout(()=>{var Hn;const mn=((Hn=A.value)==null?void 0:Hn.getLayers())||[];for(const en of mn)if(en._dbId===h.value.noteId||en.id===h.value.noteId){if(console.log("[MapView][onMounted] Note trouvée:",en),typeof en.fire=="function"&&en.fire("click"),typeof en.bringToFront=="function"&&en.bringToFront(),m.value){const ln=typeof en.getLatLng=="function"?en.getLatLng():[h.value.lat,h.value.lng];m.value.flyTo(ln,18)}break}},1e3)),h.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",h.value.tool),E(h.value.tool))}catch(Ct){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",Ct),await Pn()}else await Pn();async function Pn(){const Ct=localStorage.getItem("lastPlanId");if(Ct)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",Ct),await xe(parseInt(Ct));const mn=document.querySelector(".map-parent");mn instanceof HTMLElement&&(mn.style.display="block")}catch(mn){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",mn),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Z(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan à charger"),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Z()}window.addEventListener("shape:created",Ct=>{const{shape:mn,type:Hn,properties:en}=Ct.detail;console.log("[MapView] Nouvelle forme créée",{shape:mn,type:Hn,properties:en}),o.addElement(mn),E("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[ISSUE01][MapView] Événement geonote:savePlan reçu - Sauvegarde automatique du plan"),Ne()}),window.addEventListener("geonote:select",Ct=>{if(console.log("[MapView] Événement geonote:select reçu",Ct.detail),Ct.detail&&Ct.detail.geoNote){const mn=Ct.detail.geoNote;v.value=mn,la(()=>{console.log("[MapView] Note géolocalisée sélectionnée:",mn)})}}),window.addEventListener("categoriesReactivated",Ct=>{console.log("[MapView][categoriesReactivated] Événement reçu:",Ct.detail),Kn()}),window.addEventListener("shapeTypesReactivated",Ct=>{console.log("[MapView][shapeTypesReactivated] Événement reçu:",Ct.detail),Kn()});const Er=Ct=>{if(console.log("[MapView] Édition de note via Leaflet",Ct),console.log("[MapView] Type de e:",typeof Ct,"Contenu de e:",JSON.stringify(Ct)),!Ct||!Ct.note){console.error("[MapView] Erreur: e.note est undefined ou null",Ct);return}const mn=Ct.note;console.log("[MapView] Note à éditer:",mn),q.value={id:mn.id,title:mn.title||mn.name,description:mn.description,location:mn.location,columnId:mn.columnId||a.getDefaultColumn.id,accessLevel:mn.accessLevel,style:mn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:mn.createdAt||new Date().toISOString(),updatedAt:mn.updatedAt||new Date().toISOString(),comments:mn.comments||[],photos:mn.photos||[]},console.log("[MapView] editingMapNote.value après conversion:",q.value),Y.value=!0,console.log("[MapView] showNoteEditModal.value:",Y.value)},Yn=Ct=>{if(console.log("[MapView] Édition de note via événement global",Ct),!Ct.detail||!Ct.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",Ct);return}const mn=Ct.detail.note;console.log("[MapView] Note à éditer (global):",mn);let en=Ct.detail.backendId||mn.backendId;if(!en){const ln=u.value.find(Rn=>Rn.layer===Ct.detail.source);en=ln?ln.id:mn.id}console.log("[MapView] ID backend de la note pour l'API:",en,"Source:",Ct.detail.source?"Couche Leaflet":"Autre"),q.value={id:en,leafletId:mn.id,title:mn.title||mn.name,description:mn.description,location:mn.location,columnId:mn.columnId||a.getDefaultColumn.id,accessLevel:mn.accessLevel,style:mn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:mn.createdAt||new Date().toISOString(),updatedAt:mn.updatedAt||new Date().toISOString(),comments:mn.comments||[],photos:mn.photos||[]},console.log("[MapView] Note préparée pour édition:",q.value),Y.value=!0};window.addEventListener("geonote:edit",Yn),A.value&&(A.value.off("note:edit"),A.value.on("note:edit",Er))}catch(Bt){console.error("Error during component mount:",Bt),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Z(),localStorage.removeItem("lastPlanId")}}),_i(()=>o.hasUnsavedChanges,Et=>{console.log("[ISSUE01][MapView][watch drawingStore.hasUnsavedChanges]",Et),Et&&N.value&&(s.markUnsavedChanges(),Ne())});let Be;Es(()=>{Be=setInterval(()=>{o.hasUnsavedChanges&&N.value&&(console.log("[ISSUE01][MapView] Sauvegarde déclenchée par intervalle"),Ne())},6e4)}),Ol(()=>{clearInterval(Be)}),_i(()=>s.plans,Et=>{console.log("[MapView][watch irrigationStore.plans] Mise à jour de la liste des plans:",Et.length),j.value&&(ve.value||console.log("[MapView][watch irrigationStore.plans] Mise à jour de l'interface client"))},{deep:!0}),_i(()=>o.filters,(Et,at)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres détecté:",JSON.stringify(Et,null,2)),at){const Bt=JSON.stringify(at.accessLevels)!==JSON.stringify(Et.accessLevels),Yt=JSON.stringify(at.categories)!==JSON.stringify(Et.categories),In=JSON.stringify(at.shapeTypes)!==JSON.stringify(Et.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements détectés:",{accessLevelsChanged:Bt,categoriesChanged:Yt,shapeTypesChanged:In}),Bt||Yt||In?(console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Kn()):console.log("[MapView][watch drawingStore.filters] Aucun changement réel, pas de mise à jour")}else console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Kn()},{deep:!0});const ue=Et=>{console.log("[MapView][filtersChanged] Événement reçu:",Et.detail),Kn()};Es(()=>{window.addEventListener("filtersChanged",ue)}),Ol(()=>{window.removeEventListener("filtersChanged",ue),console.log("[MapView][filtersChanged] Événement désactivé")}),_i(()=>o.getFilteredElements,(Et,at)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage, éléments filtrés:",{nouveaux:Et.length,anciens:at?at.length:"aucun",ids:Et.map(Bt=>Bt.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage suite au changement d'elements filtrés"),Kn()},{deep:!0}),_i(m,async Et=>{var at;console.log(`
[MapView][watch map] Nouvelle carte:`,!!Et),Et&&s.currentPlan&&!((at=A.value)!=null&&at.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des éléments du plan:",s.currentPlan.id),Z(),await o.loadPlanElements(s.currentPlan.id))}),_i(()=>s.currentPlan,async(Et,at)=>{var Bt,Yt,In;if((Et==null?void 0:Et.id)===(at==null?void 0:at.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement nécessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",Et==null?void 0:Et.id);try{if(Et){console.log("[MapView][watch currentPlan] Mise à jour du plan courant..."),N.value=Et;const Pn=document.querySelector(".map-parent");Pn instanceof HTMLElement&&(Pn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis à jour avec succès")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),N.value=null,Z();const Pn=document.querySelector(".map-parent");Pn instanceof HTMLElement&&(Pn.style.display="none")}}catch(Pn){console.error("[MapView][watch currentPlan] ERREUR:",Pn),N.value=null,Z()}console.log("[MapView][watch currentPlan] État final:",{currentPlanId:(Bt=N.value)==null?void 0:Bt.id,storePlanId:(Yt=s.currentPlan)==null?void 0:Yt.id,mapVisible:m.value!==null,mapParentDisplay:(In=document.querySelector(".map-parent"))==null?void 0:In.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),jd(()=>{m.value&&m.value.off("moveend"),window.removeEventListener("resize",ss),window.removeEventListener("shape:created",()=>{})});function re(){i.value=!i.value}function Z(){var Et,at;console.log("[ISSUE01][MapView][clearMap] Début du nettoyage de la carte",{featureGroupExists:!!A.value,featureGroupLayersCount:((Et=A.value)==null?void 0:Et.getLayers().length)||0,shapesCount:u.value.length,shapesIds:u.value.map(Bt=>Bt.id)}),A.value&&(A.value.eachLayer(Bt=>{var Yt;((Yt=Bt.properties)==null?void 0:Yt.type)==="Note"&&typeof Bt.resetPlanSaveState=="function"&&Bt.resetPlanSaveState()}),A.value.clearLayers(),console.log("[ISSUE01][MapView][clearMap] Toutes les couches ont été supprimées")),u.value=[],G(),v.value=null,p.value="",console.log("[ISSUE01][MapView][clearMap] Fin du nettoyage de la carte",{featureGroupLayersCount:((at=A.value)==null?void 0:at.getLayers().length)||0,shapesCount:u.value.length})}async function U(Et){return await On.measureAsync("refreshMapWithPlan",async()=>{var at,Bt;try{console.log("[ISSUE01][MapView][refreshMapWithPlan] Début du refreshMapWithPlan",{planId:Et,currentPlanId:(at=N.value)==null?void 0:at.id,mapInitialized:!!m.value,featureGroupExists:!!A.value,featureGroupLayersCount:((Bt=A.value)==null?void 0:Bt.getLayers().length)||0}),On.measure("refreshMapWithPlan:clearMap",()=>{console.log("[ISSUE01][MapView][refreshMapWithPlan] Nettoyage de la carte avant chargement"),Z()},"MapView"),await On.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{console.log("[ISSUE01][MapView][refreshMapWithPlan] Chargement des éléments du plan"),await o.loadPlanElements(Et)},"MapView");const Yt=On.measure("refreshMapWithPlan:getPlanById",()=>s.getPlanById(Et),"MapView");console.log("[ISSUE01][MapView][refreshMapWithPlan] Plan chargé depuis le store",{planFound:!!Yt,planId:Yt==null?void 0:Yt.id,drawingElementsCount:o.getCurrentElements.length,drawingElementsIds:o.getCurrentElements.map(In=>In.id)}),Yt?(On.measure("refreshMapWithPlan:updateCurrentPlan",()=>{var In;console.log("[ISSUE01][MapView][refreshMapWithPlan] Mise à jour du plan courant",{oldPlanId:(In=N.value)==null?void 0:In.id,newPlanId:Yt.id}),N.value=Yt,s.setCurrentPlan(Yt),o.setCurrentPlan(Yt.id),localStorage.setItem("lastPlanId",Yt.id.toString())},"MapView"),await On.measureAsync("refreshMapWithPlan:loadPlanNotes",async()=>{try{console.log("[MapView][refreshMapWithPlan] Chargement des notes géolocalisées associées au plan:",Et);const Pn=(await Sa.getNotesByPlan(Et)).data;console.log(`[MapView][refreshMapWithPlan] ${Pn.length} notes géolocalisées récupérées`);const Er=xf();m.value&&A.value&&Pn.forEach(Yn=>{try{if(Er.addNote({...Yn,id:Yn.id,columnId:Yn.column,accessLevel:Yn.access_level}),Yn.location&&Yn.location.type==="Point"&&Array.isArray(Yn.location.coordinates)&&Yn.location.coordinates.length===2){const Ct=Ml.fromBackendData({name:Yn.title,description:Yn.description,location:Yn.location,columnId:Yn.column,accessLevel:Yn.access_level,style:Yn.style||{color:Yn.color||"#3B82F6",weight:2,opacity:1,fillColor:Yn.color||"#3B82F6",fillOpacity:.6,radius:8},category:Yn.category||"forages",comments:Yn.comments||[],photos:Yn.photos||[]});Ct._dbId=Yn.id,A.value.addLayer(Ct),u.value.push({id:Yn.id,type:"Note",layer:Ct,properties:Ct.properties}),console.log("[MapView][refreshMapWithPlan] Note géolocalisée ajoutée à la carte:",{id:Yn.id,title:Yn.title,location:Yn.location})}}catch(Ct){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note géolocalisée:",Ct)}})}catch(In){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes géolocalisées:",In)}},"MapView"),m.value&&A.value&&await On.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[ISSUE01][MapView][refreshMapWithPlan:addShapesToMap] Éléments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(Ct=>({id:Ct.id,type:Ct.type_forme}))});const In=o.getCurrentElements.reduce((Ct,mn)=>(Ct[mn.type_forme]||(Ct[mn.type_forme]=[]),Ct[mn.type_forme].push(mn),Ct),{}),Pn=["Note","Polygon","Line","Circle","Rectangle"],Er=Object.keys(In).sort((Ct,mn)=>{const Hn=Pn.indexOf(Ct),en=Pn.indexOf(mn);return(Hn===-1?999:Hn)-(en===-1?999:en)}),Yn=Ct=>{switch(Ct){case"Note":return 20;case"Circle":return 15;case"Rectangle":return 15;case"Line":return 10;case"Polygon":return 5;default:return 10}};for(const Ct of Er){const mn=In[Ct],Hn=Yn(Ct);for(let en=0;en<mn.length;en+=Hn){const ln=mn.slice(en,en+Hn);await Promise.all(ln.map(async Rn=>{await On.measureAsync(`refreshMapWithPlan:createElement:${Rn.type_forme}`,async()=>{var us;if(!A.value||!Rn.data)return;console.log(`[ISSUE01][MapView][refreshMapWithPlan:createElement] Création d'un élément de type ${Rn.type_forme}`,{id:Rn.id,hasFeatureGroup:!!A.value,hasData:!!Rn.data});let vr=null;switch(Rn.type_forme){case"Circle":{const En=Rn.data;En.center&&En.radius&&(vr=new lp(vt.latLng(En.center[1],En.center[0]),{...En.style,radius:En.radius}),En.name&&(vr.properties={type:"Circle",name:En.name,style:En.style,radius:En.radius,diameter:En.radius*2,surface:Math.PI*En.radius*En.radius,perimeter:2*Math.PI*En.radius},vr.name=En.name));break}case"Rectangle":{const En=Rn.data;if(En.bounds){const Lr=vt.latLngBounds(vt.latLng(En.bounds.southWest[1],En.bounds.southWest[0]),vt.latLng(En.bounds.northEast[1],En.bounds.northEast[0]));vr=new $a(Lr,En.style),En.name&&(vr.properties={name:En.name},vr.name=En.name)}break}case"Polygon":{const En=Rn.data;if(En.points&&En.points.length>0){const Lr=En.points.map(Jn=>vt.latLng(Jn[1],Jn[0]));vr=new Ql(Lr,En.style),En.name&&(vr.properties={name:En.name},vr.name=En.name)}break}case"Line":{const En=Rn.data;if(En.points&&En.points.length>0){const Lr=En.points.map(Jn=>vt.latLng(Jn[1],Jn[0]));vr=new js(Lr,En.style),En.name&&(vr.properties={name:En.name},vr.name=En.name)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Création d'une note:",Rn.data);const En=Rn.data;if(En.location&&Array.isArray(En.location)&&En.location.length===2||En.location&&typeof En.location=="object"&&En.location.type==="Point"&&Array.isArray(En.location.coordinates)&&En.location.coordinates.length===2)try{En.category||(En.category="forages",console.log("[MapView][refreshMapWithPlan] Catégorie par défaut ajoutée:",En.category)),En.accessLevel||(En.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accès par défaut ajouté:",En.accessLevel));const Jn=Ml.fromBackendData(En);Jn._dbId=Rn.id,vr=Jn,console.log("[MapView][refreshMapWithPlan] Note créée:",{id:Rn.id,location:En.location,name:En.name,category:En.category,accessLevel:En.accessLevel,type:Jn.properties.type})}catch(Jn){console.error("[MapView][refreshMapWithPlan] Erreur lors de la création de la Note:",Jn)}else console.error("[MapView][refreshMapWithPlan] Données invalides pour Note:",En),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}vr&&(vr._dbId=Rn.id,(us=A.value)==null||us.addLayer(vr),u.value.push({id:Rn.id,type:Rn.type_forme,layer:vr,properties:vr.properties}))},"MapView")})),await new Promise(Rn=>requestAnimationFrame(()=>setTimeout(Rn,0)))}}On.measure("refreshMapWithPlan:adjustView",()=>{setTimeout(()=>{R(),m.value&&m.value.invalidateSize({animate:!1,pan:!1})},100)},"MapView")},"MapView"),console.log(`Plan ${Et} chargé avec succès avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${Et} introuvable après chargement`),j.value=!1}catch(Yt){throw console.error("Erreur lors du rafraîchissement de la carte:",Yt),Yt}},"MapView")}async function xe(Et){return await On.measureAsync("loadPlan",async()=>{var at;console.log(`
[MapView][loadPlan] ====== DÉBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",Et);try{const Bt=await On.measureAsync("loadPlan:getPlanFromStore",async()=>s.getPlanById(Et),"MapView");if(console.log("[MapView][loadPlan] Plan trouvé dans le store:",!!Bt),!Bt){console.log("[MapView][loadPlan] Plan non trouvé dans le store, vérification API...");try{await On.measureAsync("loadPlan:apiCheck",async()=>{await Bn.get(`/plans/${Et}/`)},"MapView")}catch(Yt){throw((at=Yt.response)==null?void 0:at.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - conservation de lastPlanId pour fallback"),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Z()),Yt}}console.log("[MapView][loadPlan] Rafraîchissement de la carte..."),await On.measureAsync("loadPlan:refreshMap",async()=>{await U(Et)},"MapView"),j.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),zt(),console.log("[MapView][loadPlan] Plan chargé avec succès:",{planId:Et,elementsCount:o.getCurrentElements.length})}catch(Bt){throw console.error("Erreur lors du chargement du plan:",Bt),On.measure("loadPlan:errorRecovery",()=>{N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Z()},"MapView"),Bt}},"MapView")}async function Ne(){var Et,at,Bt,Yt,In;if(console.log("[ISSUE01][MapView][savePlan] POINT D'ENTRÉE - Call Stack:",new Error().stack),F.value){console.log("[ISSUE01][MapView][savePlan] Sauvegarde déjà en cours, ignorer l'appel");return}if(!N.value||!A.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}F.value=!0,B.value="saving";try{const Pn=[],Er=new Set(o.getCurrentElements.filter(en=>en.id!==void 0).map(en=>en.id)),Yn=new Set;console.log("[ISSUE01][MapView][savePlan] Début de la sauvegarde",{featureGroupLayers:A.value.getLayers().length,existingIds:Array.from(Er),currentElements:o.getCurrentElements.length,currentElementsIds:o.getCurrentElements.map(en=>en.id)}),A.value.eachLayer(en=>{var us,En,Lr,Jn,Ki,fi,pi,$i,Ai,Fi,ji,os,cs,Sr,kr,nr,to,no,Bs,Ko,_r,$r;console.log("[ISSUE01][MapView][savePlan] Traitement de la couche",{type:(us=en.properties)==null?void 0:us.type,id:en._dbId||en._elementId,isPolygon:en instanceof vt.Polygon,properties:en.properties});let ln,Rn;const vr={color:en.options.color||"#2b6451",weight:en.options.weight||3,opacity:en.options.opacity||1,fillColor:en.options.fillColor||"#2b6451",fillOpacity:en.options.fillOpacity||.2,dashArray:en.options.dashArray||""};if(en instanceof $a){ln="Rectangle";const er=en.getBounds();Rn={bounds:{southWest:[er.getSouthWest().lng,er.getSouthWest().lat],northEast:[er.getNorthEast().lng,er.getNorthEast().lat]},style:vr,name:((En=en.properties)==null?void 0:En.name)||"",rotation:en.getRotation(),width:en.getDimensions().width,height:en.getDimensions().height,center:[en.getCenter().lng,en.getCenter().lat]}}else if(en instanceof vt.Circle)ln="Circle",Rn={center:[en.getLatLng().lng,en.getLatLng().lat],radius:en.getRadius(),name:((Lr=en.properties)==null?void 0:Lr.name)||"",style:vr};else if(en instanceof vt.Rectangle){ln="Rectangle";const er=en.getBounds();Rn={bounds:{southWest:[er.getSouthWest().lng,er.getSouthWest().lat],northEast:[er.getNorthEast().lng,er.getNorthEast().lat]},name:((Jn=en.properties)==null?void 0:Jn.name)||"",style:vr}}else if(en instanceof vt.Polyline&&!(en instanceof vt.Polygon))if(((Ki=en.properties)==null?void 0:Ki.type)==="ElevationLine"){ln="ElevationLine";const er=en.getLatLngs(),di=((fi=en.properties)==null?void 0:fi.category)||"forages",oi=((pi=en.properties)==null?void 0:pi.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catégorie:",di,"Niveau d'accès:",oi),Rn={points:er.map(Hs=>[Hs.lng,Hs.lat]),style:{...vr,color:(($i=en.properties.style)==null?void 0:$i.color)||"#FF4500",weight:((Ai=en.properties.style)==null?void 0:Ai.weight)||4,opacity:((Fi=en.properties.style)==null?void 0:Fi.opacity)||.8,_accessLevel:oi,accessLevel:oi},name:((ji=en.properties)==null?void 0:ji.name)||"",category:di,accessLevel:oi,elevationData:en.properties.elevationData,samplePointStyle:en.properties.samplePointStyle,minMaxPointStyle:en.properties.minMaxPointStyle,minElevation:en.properties.minElevation,maxElevation:en.properties.maxElevation,elevationGain:en.properties.elevationGain,elevationLoss:en.properties.elevationLoss,averageSlope:en.properties.averageSlope,maxSlope:en.properties.maxSlope}}else{ln="Line";const er=en.getLatLngs(),di=((os=en.properties)==null?void 0:os.category)||"forages",oi=((cs=en.properties)==null?void 0:cs.accessLevel)||"visitor";console.log("[savePlan] Line - Catégorie:",di,"Niveau d'accès:",oi),Rn={points:er.map(Hs=>[Hs.lng,Hs.lat]),name:((Sr=en.properties)==null?void 0:Sr.name)||"",category:di,accessLevel:oi,style:{...vr,_accessLevel:oi,accessLevel:oi}}}else if(en instanceof vt.Polygon&&!(en instanceof vt.Rectangle)){ln="Polygon";const er=en.getLatLngs()[0],di=((kr=en.properties)==null?void 0:kr.category)||"forages",oi=((nr=en.properties)==null?void 0:nr.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catégorie:",di,"Niveau d'accès:",oi),Rn={points:er.map(Hs=>[Hs.lng,Hs.lat]),name:((to=en.properties)==null?void 0:to.name)||"",category:di,accessLevel:oi,style:{...vr,_accessLevel:oi,accessLevel:oi}}}else if(((no=en.properties)==null?void 0:no.type)==="Note"){console.log("[savePlan] Note géolocalisée détectée - sauvegarde via API dédiée");const er=en;if(er._dbId&&typeof er._dbId=="number"&&Yn.add(er._dbId),typeof er.saveNote=="function")try{if(er.properties&&(er.properties.style||(er.properties.style={}),er.properties.accessLevel&&(er.properties.style._accessLevel=er.properties.accessLevel,er.properties.style.accessLevel=er.properties.accessLevel),er.properties.style.color)){const di=er.properties.style.color;console.log("[savePlan] Préservation de la couleur existante:",di),er.properties.style.color=di,er.properties.style.fillColor=di}console.log("[savePlan] Sauvegarde de la note géolocalisée via API dédiée",{category:(Bs=er.properties)==null?void 0:Bs.category,accessLevel:(Ko=er.properties)==null?void 0:Ko.accessLevel,styleAccessLevel:($r=(_r=er.properties)==null?void 0:_r.style)==null?void 0:$r.accessLevel}),N.value&&N.value.id?er.saveNote(N.value.id):er.saveNote()}catch(di){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",di)}else console.warn("[savePlan] La note ne possède pas de méthode saveNote");ln=void 0,Rn=void 0}if(ln&&Rn){let er=en._elementId;en._dbId&&(er=en._dbId,typeof er=="number"&&Yn.add(er)),Pn.push({id:er,type_forme:ln,data:Rn})}}),console.log("[ISSUE01][MapView][savePlan] Éléments à sauvegarder",{totalElements:Pn.length,elementsIds:Pn.map(en=>en.id),elementTypes:Pn.map(en=>en.type_forme)});const Ct=Array.from(Er).filter(en=>!Yn.has(en));console.log("[ISSUE01][MapView][savePlan] Éléments supprimés:",{existingIds:Array.from(Er),currentLayerIds:Array.from(Yn),elementsToDelete:Ct});const mn=Pn.filter(en=>!en.id||!Ct.includes(en.id));console.log("[ISSUE01][MapView][savePlan] Elements après filtrage:",{totalBefore:Pn.length,totalAfter:mn.length,elementsIdsAfter:mn.map(en=>en.id)}),o.elements=mn;const Hn=await o.saveToPlan(N.value.id,{elementsToDelete:Ct});if(console.log("[ISSUE01][MapView][savePlan] Plan mis à jour par le serveur:",{formesCount:((Et=Hn.formes)==null?void 0:Et.length)||0,formesIds:((at=Hn.formes)==null?void 0:at.map(en=>en.id))||[]}),console.log("[ISSUE01][MapView][savePlan] Vérification du contenu détaillé des formes:",{currentLayerCount:A.value.getLayers().length,currentElements:o.getCurrentElements.length,serverElementCount:((Bt=Hn.formes)==null?void 0:Bt.length)||0,detailedFormes:(Yt=Hn.formes)==null?void 0:Yt.map(en=>({id:en.id,type:en.type_forme,dataSize:en.data?Object.keys(en.data).length:0}))}),Hn&&((In=N.value)!=null&&In.id)){const en=N.value.id;N.value={...N.value,...Hn},s.updatePlanDetails(en,Hn)}B.value="success",A.value&&A.value.eachLayer(en=>{var ln;((ln=en.properties)==null?void 0:ln.type)==="Note"&&typeof en.resetPlanSaveState=="function"&&en.resetPlanSaveState()}),setTimeout(()=>{B.value=null},3e3)}catch(Pn){console.error("Erreur lors de la sauvegarde du plan:",Pn),B.value=null}finally{F.value=!1}}Ol(()=>{Q.user||lt(),s.clearCurrentPlan(),o.clearCurrentPlan(),A.value&&A.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function Ge(Et){var at,Bt,Yt;if(console.log("[MapView][updateShapeProperties] Mise à jour des propriétés:",Et),T(Et),v.value&&((at=v.value.properties)==null?void 0:at.type)==="Note")if(console.log("[MapView][updateShapeProperties] Note géolocalisée détectée, sauvegarde via API dédiée"),typeof v.value.saveNote=="function")try{if(Et.category&&(v.value.properties.category=Et.category),Et.accessLevel&&(v.value.properties.accessLevel=Et.accessLevel,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style._accessLevel=Et.accessLevel,v.value.properties.style.accessLevel=Et.accessLevel),v.value.properties.style&&v.value.properties.style.color){const In=v.value.properties.style.color;console.log("[MapView][updateShapeProperties] Préservation de la couleur existante:",In),v.value.properties.style.color=In,v.value.properties.style.fillColor=In}console.log("[MapView][updateShapeProperties] Sauvegarde de la note géolocalisée via API dédiée",{category:(Bt=v.value.properties)==null?void 0:Bt.category,accessLevel:(Yt=v.value.properties)==null?void 0:Yt.accessLevel,updatedProperties:Et}),N.value&&N.value.id?v.value.saveNote(N.value.id):v.value.saveNote(),v.value.bindPopup&&v.value.createPopupContent&&(console.log("[MapView][updateShapeProperties] Forçage de la mise à jour du popup après la sauvegarde"),v.value.bindPopup(v.value.createPopupContent()))}catch(In){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",In)}else console.warn("[MapView][updateShapeProperties] La note ne possède pas de méthode saveNote");else if(Et.category&&v.value&&v.value._dbId){const In=v.value._dbId,Pn=o.elements.find(Er=>Er.id===In);if(Pn){console.log(`[MapView][updateShapeProperties] Mise à jour de la catégorie dans le store: ${Et.category} pour l'élément ${In}`);const Er=Pn;Er.data||(Er.data={}),Er.data.category=Et.category,o.$patch({unsavedChanges:!0})}}}function Se(Et){try{const at=new Date(Et);return isNaN(at.getTime())?(console.error("Date invalide reçue:",Et),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(at)}catch(at){return console.error("Erreur lors du formatage de la date:",at),"Date invalide"}}const ce=()=>{A.value&&R()},je=async()=>{var Et;if(v.value&&A.value){const at=v.value._leaflet_id,Bt=v.value._dbId;if(((Et=v.value.properties)==null?void 0:Et.type)==="Note"&&Bt)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${Bt} du backend...`),await Sa.deleteNote(Bt),a.removeNote(Bt),console.log(`[MapView][deleteSelectedShape] Note ${Bt} supprimée avec succès du backend et du store`),l.success("Note supprimée avec succès")}catch(In){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${Bt} du backend:`,In),l.error("Erreur lors de la suppression de la note")}E(""),A.value.removeLayer(v.value),u.value=u.value.filter(In=>In.layer&&In.layer._leaflet_id!==at),console.log(`[MapView][deleteSelectedShape] Forme ${at} (dbId: ${Bt}) supprimée du featureGroup et de shapes.value`),v.value=null}};async function st(Et){console.log(`onPlanCreated - Tentative de chargement du plan ${Et}`),await s.fetchPlans();const at=s.getPlanById(Et);at?(console.log(`Plan ${Et} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",Et.toString()),N.value=at,s.setCurrentPlan(at),o.setCurrentPlan(at.id),O.value=!1,zt(),console.log(`Plan ${Et} chargé avec succès`)):console.error(`Plan ${Et} introuvable après création! Vérifiez les permissions.`)}_i(We,async Et=>{var at;if(Et&&((at=Q.user)==null?void 0:at.user_type)==="admin"){J.value=!0;try{const Bt=await Q.fetchSalarieVisiteurs(Et.id);_e.value=Array.isArray(Bt)?Bt:[Bt]}catch(Bt){console.error("[MapView][watch selectedSalarie] Error:",Bt),_e.value=[]}finally{J.value=!1}}});function lt(){localStorage.removeItem("lastPlanId")}const _t=yt(!1),Je=HE.debounce(()=>{const Et=On.startMeasure("invalidateMapSize","MapView");if(!m.value){Et();return}la(()=>{On.measure("invalidateMapSize:nextTick",()=>{var at;try{if(m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())){if(m.value.invalidateSize({animate:!1}),(at=A.value)!=null&&at.getLayers().length)try{R()}catch(Bt){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Bt)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Bt){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Bt)}Et()},"MapView")})},250);function zt(){Je()}_i(N,(Et,at)=>{Et&&Et.id!==(at==null?void 0:at.id)&&la(()=>{zt()})});const Xt=yt(null),et=yt(!1),ut=yt([]),ot=rr(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:Xt.value,salaries:X.value,salariesLength:X.value.length}),!Xt.value)return[];const Et=X.value.filter(at=>{var In,Pn,Er;const Bt=at.entreprise,Yt=typeof Bt=="object"&&Bt!==null?Bt.id:Bt;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:at,salarieEntreprise:Bt,salarieEntrepriseId:Yt,selectedEntrepriseId:(In=Xt.value)==null?void 0:In.id,matches:Yt===((Pn=Xt.value)==null?void 0:Pn.id)}),Yt===((Er=Xt.value)==null?void 0:Er.id)});return console.log("[MapView][filteredSalaries] Filtered result:",Et),Et});function It(Et){if(!Et)return"";const at=Et.first_name||"",Bt=Et.last_name?Et.last_name.toUpperCase():"",Yt=Et.company_name||Et.role||"";return`${at} ${Bt} (${Yt})`}async function Jt(){et.value=!0;try{const Et=await Bn.get("/users/",{params:{role:"ENTREPRISE"}});ut.value=Et.data}catch(Et){console.error("[MapView] Error loading entreprises:",Et),ut.value=[]}finally{et.value=!1}}async function xn(Et){console.log("[MapView][selectEntreprise] Sélection de l'entreprise:",Et),Xt.value=Et,ye.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requête avec params:",{role:"SALARIE",entreprise:Et.id});const at=await Bn.get("/users/",{params:{role:"SALARIE",entreprise:Et.id}});console.log("[MapView][selectEntreprise] Réponse reçue:",at.data),X.value=at.data,console.log("[MapView][selectEntreprise] Salaries mis à jour:",X.value)}catch(at){console.error("[MapView] Error loading salaries for entreprise:",at),X.value=[]}finally{ye.value=!1}}function Sn(){Xt.value=null,We.value=null,ve.value=null,X.value=[],_e.value=[],me.value=[]}function An(){We.value=null,ve.value=null,_e.value=[],me.value=[]}function Zn(){ve.value=null,me.value=[]}async function Cn(Et){var at,Bt,Yt,In,Pn,Er;console.log(`
[MapView][selectSalarie] ====== DÉBUT SÉLECTION SALARIE ======`),console.log("Informations du salarie:",{id:Et.id,username:Et.username,company:Et.company_name,role:Et.role}),console.log("Contexte utilisateur:",{userType:(at=Q.user)==null?void 0:at.user_type,userId:(Bt=Q.user)==null?void 0:Bt.id,userRole:(Yt=Q.user)==null?void 0:Yt.role,selectedEntrepriseId:(In=Xt.value)==null?void 0:In.id}),We.value=Et,J.value=!0;try{const Yn={role:"VISITEUR",salarie:Et.id};Q.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connectée:",(Pn=Q.user)==null?void 0:Pn.id),Yn.entreprise=(Er=Q.user)==null?void 0:Er.id):Xt.value&&(console.log("Ajout de l'ID de l'entreprise sélectionnée:",Xt.value.id),Yn.entreprise=Xt.value.id),console.log("Paramètres de la requête:",Yn);const Ct=await Bn.get("/users/",{params:Yn});console.log("Réponse reçue du serveur:",{status:Ct.status,dataLength:Array.isArray(Ct.data)?Ct.data.length:"non-array",data:Ct.data}),Array.isArray(Ct.data)?(_e.value=Ct.data,console.log(`${Ct.data.length} visiteurs chargés`),Ct.data.forEach((mn,Hn)=>{console.log(`Visiteur ${Hn+1}:`,{id:mn.id,username:mn.username,company:mn.company_name,salarie:mn.salarie})})):(console.warn("Format de réponse inattendu:",Ct.data),_e.value=[]),_e.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch(Yn){if(console.error("ERREUR lors du chargement des visiteurs:",Yn),Yn&&typeof Yn=="object"&&"response"in Yn){const Ct=Yn;console.error("Détails de l'erreur:",{status:Ct.response.status,data:Ct.response.data})}_e.value=[]}finally{J.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SÉLECTION SALARIE ======
`)}}function cn(){Y.value=!1,q.value=null}function bn(Et){$.value=Et,V.value=!0}async function ir(){var Et,at,Bt;if((Et=$.value)!=null&&Et.id)try{const Yt=$.value.id,In={selectedClient:ve.value,selectedSalarie:We.value,isNoVisiteurView:ve.value&&ve.value.id===-1};if(await s.deletePlan(Yt),V.value=!1,$.value=null,await new Promise(Pn=>setTimeout(Pn,50)),In.isNoVisiteurView)console.log("[MapView][confirmDeletePlan] Rechargement des plans sans visiteur"),await Bi();else if(In.selectedClient){console.log("[MapView][confirmDeletePlan] Rechargement des plans du client:",In.selectedClient.id);const Pn={visiteur:In.selectedClient.id};In.selectedSalarie&&(Pn.salarie=In.selectedSalarie.id),Q.isEntreprise?Pn.entreprise=(at=Q.user)==null?void 0:at.id:Xt.value&&(Pn.entreprise=Xt.value.id);const Er=await Bn.get("/plans/",{params:Pn});me.value=Er.data}else console.log("[MapView][confirmDeletePlan] Rechargement de tous les plans"),await s.fetchPlans();((Bt=N.value)==null?void 0:Bt.id)===Yt&&(N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Z(),localStorage.removeItem("lastPlanId"))}catch(Yt){console.error("Erreur lors de la suppression du plan:",Yt),alert("Une erreur est survenue lors de la suppression du plan"),V.value=!1,$.value=null}}function hr(){V.value=!1,$.value=null}function wr(Et){console.log("[MapView][handleFilterChange] Mise à jour des filtres dans le store"),o.updateFilters(Et),console.log("[MapView][handleFilterChange] Éléments dans le store:",{count:o.elements.length,ids:o.elements.map(at=>at.id)}),console.log("[MapView][handleFilterChange] Mise à jour de l'affichage de la carte"),Kn(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise à jour forcée de l'affichage"),Kn()},100),console.log("[MapView][handleFilterChange] Traitement des filtres terminé")}function Kn(){if(!A.value)return;const Et=[];u.value.forEach((ln,Rn)=>{ln.layer&&!ln.id&&(!ln.layer.properties||ln.layer.properties&&!ln.layer.properties.type)&&(console.log(`[MapView][updateMapDisplay] Nettoyage préventif de la couche temporaire ${ln.layer._leaflet_id}`),Et.push(Rn))});for(let ln=Et.length-1;ln>=0;ln--)u.value.splice(Et[ln],1);({...o.filters.accessLevels},{...o.filters.categories}),{...o.filters.shapeTypes};const at={count:o.elements.length,elements:o.elements.map(ln=>({id:ln.id,type_forme:ln.type_forme}))};console.log("[MapView][updateMapDisplay] Éléments dans le store:",JSON.stringify(at,null,2));const Bt=o.getFilteredElements;console.log("[MapView][updateMapDisplay] Éléments filtrés:",{total:o.elements.length,filtered:Bt.length,filteredIds:Bt.map(ln=>ln.id)});const Yt=A.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",Yt.length);const In=Yt.map(ln=>({_leaflet_id:ln._leaflet_id,_dbId:ln._dbId,hasProperties:!!ln.properties,propertyType:ln.properties?ln.properties.type:null,category:ln.properties?ln.properties.category:null}));console.log("[MapView][updateMapDisplay] Détails des couches:",JSON.stringify(In,null,2)),console.log("[MapView][updateMapDisplay] État des filtres pour les catégories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const Pn=new Map;u.value.forEach(ln=>{ln.layer&&ln.id&&Pn.set(ln.id,ln.layer)});const Er=new Map;Yt.forEach(ln=>{ln._dbId&&Er.set(ln,ln._dbId)});const Yn=new Set(Bt.map(ln=>ln.id));console.log("[MapView][updateMapDisplay] Début du traitement des couches");const Ct=Array.from(Yn);console.log("[MapView][updateMapDisplay] IDs des éléments filtrés:",JSON.stringify(Ct));let mn=0,Hn=0,en=0;Yt.forEach(ln=>{var ji,os;const Rn=ln._dbId,vr=ln._leaflet_id;if(!Rn){if(!ln.properties){en++,console.log(`[MapView][updateMapDisplay] Couche ${vr} sans dbId et sans propriétés, ignorée`);return}ln._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${vr} sans dbId, ID temporaire assigné: ${ln._dbId}`)}const us=ln.properties||{},En=us.type||ln.type_forme||"";let Lr=us.category;if(ln._dbId){const cs=o.elements.find(Sr=>Sr.id===ln._dbId);if(cs){const Sr=cs.data;Sr&&Sr.category&&(Lr!==Sr.category&&(console.log(`[MapView][updateMapDisplay] Catégorie différente détectée - Propriétés: ${Lr}, Store: ${Sr.category} pour la couche ${ln._dbId}`),Lr=Sr.category),ln.properties||(ln.properties={}),ln.properties.category=Lr)}}Lr||(Lr="default");const Jn=us.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${vr} (dbId: ${ln._dbId}): type=${En}, category=${Lr}, accessLevel=${Jn}`);let Ki=!1;En?Ki=En in o.filters.shapeTypes&&o.filters.shapeTypes[En]===!0:Ki=o.filters.shapeTypes.Polygon===!0;let fi=!1;Lr?Lr in o.filters.categories?(fi=o.filters.categories[Lr]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${Lr}: ${fi}`)):(fi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${Lr} non trouvée dans les filtres, utilisation de 'forages': ${fi}`)):(fi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie non spécifiée, utilisation de 'forages': ${fi}`));let pi=!1;const $i={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Ai="visitor";$i.company?Ai="company":$i.employee?Ai="employee":$i.visitor&&(Ai="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur: ${Ai}`),Ai==="company"?pi=!0:Ai==="employee"?pi=Jn==="employee"||Jn==="visitor":Ai==="visitor"&&(pi=Jn==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche: ${Jn}, visible: ${pi}`);const Fi=Ki&&fi&&pi;console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${vr}: typeVisible=${Ki}, categoryVisible=${fi}, accessLevelVisible=${pi}, isVisible=${Fi}`),console.log(`[MapView][updateMapDisplay] Détails de la couche ${vr}: type=${En}, category=${Lr}, accessLevel=${Jn}`),Fi?A.value.hasLayer(ln)?(mn++,console.log(`[MapView][updateMapDisplay] Couche ${ln._dbId} (${En}) déjà visible avec catégorie ${((os=ln.properties)==null?void 0:os.category)||"non définie"}`)):(Lr&&Lr!=="default"&&(!ln.properties||!ln.properties.category)&&(ln.properties||(ln.properties={}),ln.properties.category=Lr,console.log(`[MapView][updateMapDisplay] Catégorie définie avant ajout: ${Lr} pour la couche ${ln._dbId}`)),A.value.addLayer(ln),mn++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${ln._dbId} (${En}) avec catégorie ${((ji=ln.properties)==null?void 0:ji.category)||"non définie"}`)):A.value.hasLayer(ln)?(A.value.removeLayer(ln),Hn++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${ln._dbId} (${En}) - Filtres non respectés`)):(Hn++,console.log(`[MapView][updateMapDisplay] Couche ${ln._dbId} (${En}) déjà masquée`))}),console.log("[MapView][updateMapDisplay] Début de la restauration des couches filtrées"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",u.value.length),u.value.forEach(ln=>{var os;if(!ln.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignorée");return}const Rn=ln.layer,vr=Rn._leaflet_id,us=Rn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${vr} (dbId: ${us})`),A.value.hasLayer(Rn)){console.log(`[MapView][updateMapDisplay] La couche ${vr} est déjà dans le featureGroup, ignorée`);return}const En=Rn.properties||{},Lr=En.type||Rn.type_forme||"";let Jn=null;if(Rn._dbId){const cs=o.elements.find(Sr=>Sr.id===Rn._dbId);if(cs){const Sr=cs.data;Sr&&Sr.category&&(Jn=Sr.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis le store: ${Jn} pour la couche ${Rn._dbId}`))}}!Jn&&En.category&&(Jn=En.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis les propriétés: ${Jn} pour la couche ${vr}`)),Jn||(Jn="default");const Ki=En.accessLevel||"visitor";if(Rn.properties||(Rn.properties={}),Jn&&Jn!=="default"&&(Rn.properties.category=Jn,console.log(`[MapView][updateMapDisplay] Catégorie définie/restaurée: ${Jn} pour la couche ${Rn._dbId}`),Rn._dbId)){const cs=o.elements.find(Sr=>Sr.id===Rn._dbId);if(cs){const Sr=cs;Sr.data||(Sr.data={}),Sr.data.category!==Jn&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store: ${Jn} pour l'élément ${Rn._dbId}`),Sr.data.category=Jn,o.$patch({unsavedChanges:!0}))}}Rn.properties.accessLevel||(Rn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Propriétés de la couche ${vr}: type=${Lr}, category=${Jn}, accessLevel=${Ki}`);let fi=!1;Lr?fi=Lr in o.filters.shapeTypes&&o.filters.shapeTypes[Lr]===!0:fi=o.filters.shapeTypes.Polygon===!0;let pi=!1;if(Jn)if(Jn in o.filters.categories)pi=o.filters.categories[Jn]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${Jn}: ${pi}`);else if(GE().getUniqueCategories.includes(Jn)){console.log(`[MapView][updateMapDisplay] Catégorie personnalisée ${Jn} trouvée dans mapFilterStore, ajout aux filtres`);const kr={...o.filters.categories};kr[Jn]=!0,o.updateFilters({categories:kr}),pi=!0}else pi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${Jn} non trouvée, utilisation de 'forages': ${pi}`);else pi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catégorie, utilisation de 'forages': ${pi}`);let $i=!1;const Ai={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Fi="visitor";Ai.company?Fi="company":Ai.employee?Fi="employee":Ai.visitor&&(Fi="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur (2ème étape): ${Fi}`),Fi==="company"?$i=!0:Fi==="employee"?$i=Ki==="employee"||Ki==="visitor":Fi==="visitor"&&($i=Ki==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche (2ème étape): ${Ki}, visible: ${$i}`);const ji=fi&&pi&&$i;if(console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${vr}: typeVisible=${fi}, categoryVisible=${pi}, accessLevelVisible=${$i}, isVisible=${ji}`),ji){if(Jn&&Jn!=="default"&&(Rn.properties||(Rn.properties={}),Rn.properties.category=Jn,console.log(`[MapView][updateMapDisplay] Catégorie définie avant restauration: ${Jn} pour la couche ${vr}`),Rn._dbId)){const cs=o.elements.find(Sr=>Sr.id===Rn._dbId);if(cs){const Sr=cs;Sr.data||(Sr.data={}),Sr.data.category!==Jn&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store avant restauration: ${Jn} pour l'élément ${Rn._dbId}`),Sr.data.category=Jn,o.$patch({unsavedChanges:!0}))}}A.value.addLayer(Rn),mn++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${vr} (${Lr}) avec catégorie ${((os=Rn.properties)==null?void 0:os.category)||"non définie"} - Filtres respectés`)}else console.log(`[MapView][updateMapDisplay] La couche ${vr} (${Lr}) reste masquée - Filtres non respectés`)}),console.log(`[MapView][updateMapDisplay] Restauration terminée: ${mn} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${mn} couches visibles, ${Hn} couches masquées, ${en} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise à jour terminée")}function Rr(Et){if(A.value){const Bt=A.value.getLayers().find(Yt=>Yt._leaflet_id===Et.id);Bt&&(Bt.properties.name=Et.title,Bt.properties.description=Et.description,Bt.properties.columnId=Et.columnId,Bt.properties.accessLevel=Et.accessLevel,Bt.properties.category||(Bt.properties.category="forages"),Bt.setNoteStyle({color:Et.style.color,fillColor:Et.style.fillColor,weight:Et.style.weight,fillOpacity:Et.style.fillOpacity,radius:Et.style.radius}),Bt.closePopup(),Bt.unbindPopup(),Bt.bindPopup(Bt.createPopupContent()),console.log("[handleNoteSave] Note mise à jour:",{name:Bt.properties.name,category:Bt.properties.category,accessLevel:Bt.properties.accessLevel,columnId:Bt.properties.columnId}),a.notes.find(In=>In.id===Et.id)?(a.updateNote(Et.id,{title:Et.title,description:Et.description,columnId:Et.columnId,accessLevel:Et.accessLevel,style:Et.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise à jour dans le store avec columnId:",Et.columnId)):(a.addNote({title:Et.title,description:Et.description,location:[Et.location[0],Et.location[1]],columnId:Et.columnId||"1",style:Et.style,accessLevel:Et.accessLevel}),console.log("[handleNoteSave] Note ajoutée au store avec columnId:",Et.columnId||"1")))}l.success("Note enregistrée avec succès")}async function ms(Et){var at;ve.value=Et,se.value=!0;try{const Bt={visiteur:Et.id};Q.isEntreprise?Bt.entreprise=(at=Q.user)==null?void 0:at.id:Xt.value&&(Bt.entreprise=Xt.value.id),We.value&&(Bt.salarie=We.value.id);const Yt=await Bn.get("/plans/",{params:Bt});me.value=Yt.data}catch(Bt){console.error("[MapView] Error loading client plans:",Bt),me.value=[]}finally{se.value=!1}}async function Bi(){var at;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const Et={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};ve.value=Et,se.value=!0;try{const Bt={visiteur_null:!0};Q.isEntreprise?Bt.entreprise=(at=Q.user)==null?void 0:at.id:Xt.value&&(Bt.entreprise=Xt.value.id),We.value&&(Bt.salarie=We.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramètres de requête:",Bt);const Yt=await Bn.get("/plans/",{params:Bt});console.log("[MapView][loadPlansWithoutVisiteur] Plans reçus:",Yt.data),me.value=Yt.data}catch(Bt){console.error("[MapView] Error loading plans without visiteur:",Bt),me.value=[]}finally{se.value=!1}}async function Vs(){var Et;if(We.value=null,ve.value=null,me.value=[],Q.isEntreprise){ye.value=!0;try{const at=await Bn.get("/users/",{params:{role:"SALARIE",entreprise:(Et=Q.user)==null?void 0:Et.id}});X.value=at.data,console.log("[MapView][openLoadPlanModal] Salariés chargés:",X.value.length)}catch(at){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salariés:",at),X.value=[]}finally{ye.value=!1}}j.value=!0}const is=yt(window.innerWidth<768);let Xn=null;function ss(){const Et=is.value;is.value=window.innerWidth<768,Xn&&Et!==is.value&&(is.value?Xn.initMobileEditing():Xn.cleanup())}return(Et,at)=>{var Bt,Yt,In,Pn,Er,Yn;return De(),Fe(kn,null,[x("div",wG,[x("div",xG,[_t.value?(De(),Fe("div",LG,at[8]||(at[8]=[fl('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):tn("",!0),N.value?tn("",!0):(De(),Fe("div",SG,[x("div",CG,[at[11]||(at[11]=fl('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+qj+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),x("div",EG,[x("button",{onClick:at[0]||(at[0]=Ct=>O.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},at[9]||(at[9]=[x("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),qr(" Créer un nouveau plan ")])),x("button",{onClick:Vs,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},at[10]||(at[10]=[x("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),qr(" Charger un plan existant ")]))])])])),Tn(x("div",PG,[x("div",MG,[N.value&&!_t.value?(De(),$o(GU,{key:0,"last-save":(Bt=N.value)!=null&&Bt.date_modification?new Date(N.value.date_modification):void 0,"plan-name":(Yt=N.value)==null?void 0:Yt.nom,"plan-description":(In=N.value)==null?void 0:In.description,"save-status":B.value,onChangeMapType:Ln(ge),onCreateNewPlan:at[1]||(at[1]=Ct=>O.value=!0),onLoadPlan:Vs,onSavePlan:Ne,onAdjustView:ce,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):tn("",!0),x("div",kG,[i.value&&N.value&&!_t.value?(De(),Fe("div",{key:0,onClick:re,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):tn("",!0),x("div",AG,[x("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),N.value&&!_t.value?(De(),Fe(kn,{key:1},[is.value?(De(),$o(op,{key:0,to:"body"},[ci(L5,{show:i.value,"onUpdate:show":at[2]||(at[2]=Ct=>i.value=Ct),"selected-tool":Ln(p),"selected-shape":te.value,"is-drawing":Ln(ee),onToolSelected:Ln(E),onFilterChange:wr,onDeleteShape:je,onPropertiesUpdate:Ge,onStyleUpdate:Ln(k),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])])):(De(),$o(L5,{key:1,show:i.value,"onUpdate:show":at[3]||(at[3]=Ct=>i.value=Ct),"selected-tool":Ln(p),"selected-shape":te.value,"is-drawing":Ln(ee),onToolSelected:Ln(E),onFilterChange:wr,onDeleteShape:je,onPropertiesUpdate:Ge,onStyleUpdate:Ln(k),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"]))],64)):tn("",!0),N.value&&!_t.value?(De(),Fe("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:re},at[12]||(at[12]=[fl('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils</span></div></div>',1)]))):tn("",!0)])]),_t.value?(De(),Fe("div",TG,at[13]||(at[13]=[fl('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):tn("",!0)],512),[[Dy,N.value]]),(De(),$o(op,{to:"body"},[ci(ZE,{ref_key:"newPlanModalRef",ref:fe,modelValue:O.value,"onUpdate:modelValue":at[4]||(at[4]=Ct=>O.value=Ct),onCreated:st,onSalarieSelected:at[5]||(at[5]=Ct=>We.value=Ct),onVisiteurSelected:at[6]||(at[6]=Ct=>ae.value=Ct)},null,8,["modelValue"])])),(De(),$o(op,{to:"body"},[j.value?(De(),Fe("div",DG,[x("div",IG,[x("div",OG,[at[15]||(at[15]=x("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),x("button",{onClick:at[7]||(at[7]=Ct=>j.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},at[14]||(at[14]=[x("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",NG,[Ln(Q).isAdmin?(De(),Fe("div",RG,[Xt.value?We.value?ve.value?(De(),Fe("div",eW,[x("div",tW,[x("button",{onClick:Zn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},at[31]||(at[31]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des clients ")])),at[32]||(at[32]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",nW,Dt(It(ve.value)),1)]),at[34]||(at[34]=x("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),x("div",rW,[se.value?(De(),Fe(kn,{key:0},sr(3,Ct=>x("div",{key:Ct,class:"animate-pulse"},at[33]||(at[33]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),x("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(De(!0),Fe(kn,{key:1},sr(me.value,Ct=>(De(),Fe("div",{key:Ct.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[x("button",{onClick:mn=>xe(Ct.id),class:"w-full text-left"},[x("div",sW,Dt(Ct.nom),1),x("div",oW,Dt(Ct.description),1),x("div",aW," Modifié le "+Dt(Se(Ct.date_modification)),1)],8,iW),Ln(Q).isAdmin||Ln(Q).isEntreprise?(De(),Fe("button",{key:0,onClick:Il(mn=>bn(Ct),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,lW)):tn("",!0)]))),128))])])):(De(),Fe("div",qG,[x("div",YG,[x("button",{onClick:An,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},at[24]||(at[24]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des salaries ")])),at[25]||(at[25]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",KG,Dt(It(We.value)),1)]),at[30]||(at[30]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),x("div",ZG,[x("button",{onClick:Bi,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},at[26]||(at[26]=[x("div",null,[x("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),x("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),x("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),J.value?(De(),Fe(kn,{key:0},sr(3,Ct=>x("div",{key:Ct,class:"animate-pulse"},at[27]||(at[27]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(),Fe(kn,{key:1},[ie.value.length===0?(De(),Fe("div",XG,at[28]||(at[28]=[x("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),x("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(De(!0),Fe(kn,{key:1},sr(ie.value,Ct=>(De(),Fe("button",{key:Ct.id,onClick:mn=>ms(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",QG,Dt(It(Ct)),1)]),at[29]||(at[29]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,JG))),128))],64))])])):(De(),Fe("div",$G,[x("div",UG,[x("button",{onClick:Sn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},at[19]||(at[19]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des entreprises ")])),at[20]||(at[20]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",VG,Dt(It(Xt.value)),1)]),at[23]||(at[23]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),x("div",HG,[ye.value?(De(),Fe(kn,{key:0},sr(3,Ct=>x("div",{key:Ct,class:"animate-pulse"},at[21]||(at[21]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(!0),Fe(kn,{key:1},sr(ot.value,Ct=>(De(),Fe("button",{key:Ct.id,onClick:mn=>Cn(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",WG,Dt(It(Ct)),1)]),at[22]||(at[22]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,GG))),128))])])):(De(),Fe("div",BG,[at[18]||(at[18]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),x("div",FG,[et.value?(De(),Fe(kn,{key:0},sr(3,Ct=>x("div",{key:Ct,class:"animate-pulse"},at[16]||(at[16]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(!0),Fe(kn,{key:1},sr(ut.value,Ct=>(De(),Fe("button",{key:Ct.id,onClick:mn=>xn(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",zG,Dt(It(Ct)),1)]),at[17]||(at[17]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,jG))),128))])]))])):Ln(Q).isSalarie?(De(),Fe("div",uW,[ve.value?(De(),Fe("div",gW,[x("div",mW,[x("button",{onClick:Zn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},at[39]||(at[39]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des clients ")])),at[40]||(at[40]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",vW,Dt(It(ve.value)),1)]),at[42]||(at[42]=x("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),x("div",yW,[se.value?(De(),Fe(kn,{key:0},sr(3,Ct=>x("div",{key:Ct,class:"animate-pulse"},at[41]||(at[41]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),x("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(De(!0),Fe(kn,{key:1},sr(me.value,Ct=>(De(),Fe("div",{key:Ct.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[x("button",{onClick:mn=>xe(Ct.id),class:"w-full text-left"},[x("div",bW,Dt(Ct.nom),1),x("div",wW,Dt(Ct.description),1),x("div",xW," Modifié le "+Dt(Se(Ct.date_modification)),1)],8,_W),Ln(Q).isAdmin||Ln(Q).isEntreprise?(De(),Fe("button",{key:0,onClick:Il(mn=>bn(Ct),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,LW)):tn("",!0)]))),128))])])):(De(),Fe("div",cW,[at[38]||(at[38]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),x("div",dW,[J.value?(De(),Fe(kn,{key:0},sr(3,Ct=>x("div",{key:Ct,class:"animate-pulse"},at[35]||(at[35]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(),Fe(kn,{key:1},[ie.value.length===0?(De(),Fe("div",hW,at[36]||(at[36]=[x("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),x("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(De(!0),Fe(kn,{key:1},sr(ie.value,Ct=>(De(),Fe("button",{key:Ct.id,onClick:mn=>ms(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",pW,Dt(It(Ct)),1)]),at[37]||(at[37]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,fW))),128))],64))])]))])):Ln(Q).isEntreprise?(De(),Fe("div",SW,[We.value?ve.value?(De(),Fe("div",RW,[x("div",BW,[x("button",{onClick:Zn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},at[53]||(at[53]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des visiteurs ")])),at[54]||(at[54]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",FW,Dt(It(ve.value)),1)]),at[56]||(at[56]=x("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),x("div",jW,[se.value?(De(),Fe(kn,{key:0},sr(3,Ct=>x("div",{key:Ct,class:"animate-pulse"},at[55]||(at[55]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),x("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(De(!0),Fe(kn,{key:1},sr(me.value,Ct=>(De(),Fe("div",{key:Ct.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[x("button",{onClick:mn=>xe(Ct.id),class:"w-full text-left"},[x("div",$W,Dt(Ct.nom),1),x("div",UW,Dt(Ct.description),1),x("div",VW," Modifié le "+Dt(Se(Ct.date_modification)),1)],8,zW),Ln(Q).isAdmin||Ln(Q).isEntreprise?(De(),Fe("button",{key:0,onClick:Il(mn=>bn(Ct),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,HW)):tn("",!0)]))),128))])])):(De(),Fe("div",kW,[x("div",AW,[x("button",{onClick:An,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},at[46]||(at[46]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des salariés ")])),at[47]||(at[47]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",TW,Dt(It(We.value)),1)]),at[52]||(at[52]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),x("div",DW,[x("button",{onClick:Bi,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},at[48]||(at[48]=[x("div",null,[x("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),x("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),x("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),J.value?(De(),Fe(kn,{key:0},sr(3,Ct=>x("div",{key:Ct,class:"animate-pulse"},at[49]||(at[49]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(),Fe(kn,{key:1},[ie.value.length===0?(De(),Fe("div",IW,at[50]||(at[50]=[x("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarié",-1),x("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(De(!0),Fe(kn,{key:1},sr(ie.value,Ct=>(De(),Fe("button",{key:Ct.id,onClick:mn=>ms(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",NW,Dt(It(Ct)),1)]),at[51]||(at[51]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,OW))),128))],64))])])):(De(),Fe("div",CW,[at[45]||(at[45]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarié",-1)),x("div",EW,[ye.value?(De(),Fe(kn,{key:0},sr(3,Ct=>x("div",{key:Ct,class:"animate-pulse"},at[43]||(at[43]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(!0),Fe(kn,{key:1},sr(X.value,Ct=>(De(),Fe("button",{key:Ct.id,onClick:mn=>Cn(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",MW,Dt(It(Ct)),1)]),at[44]||(at[44]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,PW))),128))])]))])):(De(),Fe("div",GW,[Ln(s).plans.length===0?(De(),Fe("div",WW,at[57]||(at[57]=[x("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(De(),Fe("div",qW,[(De(!0),Fe(kn,null,sr(Ln(s).plans,Ct=>(De(),Fe("div",{key:Ct.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[x("button",{onClick:mn=>xe(Ct.id),class:"w-full text-left"},[x("div",KW,Dt(Ct.nom),1),x("div",ZW,Dt(Ct.description),1),x("div",XW," Modifié le "+Dt(Se(Ct.date_modification)),1)],8,YW),Ln(Q).isAdmin||Ln(Q).isEntreprise?(De(),Fe("button",{key:0,onClick:Il(mn=>bn(Ct),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,JW)):tn("",!0)]))),128))]))]))])])])):tn("",!0)])),(De(),$o(op,{to:"body"},[V.value?(De(),Fe("div",QW,[x("div",eq,[x("div",tq,[at[58]||(at[58]=x("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),at[59]||(at[59]=x("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),x("p",nq,' Êtes-vous sûr de vouloir supprimer le plan "'+Dt((Pn=$.value)==null?void 0:Pn.nom)+'" ? Cette action est irréversible. ',1)]),x("div",{class:"flex justify-center space-x-4"},[x("button",{onClick:hr,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),x("button",{onClick:ir,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):tn("",!0)]))])]),(De(),$o(op,{to:"body"},[Y.value?(De(),$o(WE,{key:0,note:q.value,"is-new-note":!((Er=q.value)!=null&&Er.id),location:(Yn=q.value)==null?void 0:Yn.location,onClose:cn,onSave:Rr},null,8,["note","is-new-note","location"])):tn("",!0)]))],64)}}}),rq={class:"fixed inset-0 z-[3001] overflow-y-auto"},iq={class:"flex items-center justify-center min-h-screen w-full p-0"},sq={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},oq={class:"p-4 md:p-6"},aq={class:"flex justify-between items-center mb-4 border-b pb-4"},lq={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},uq={class:"mt-4"},cq={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},dq={class:"flex"},hq={class:"ml-3"},fq={class:"text-sm font-medium text-red-800"},pq={key:0},gq={key:1},mq=["value"],vq={key:2},yq={key:3},_q=["value"],bq={key:4,class:"bg-blue-50 p-3 rounded-md mb-4"},wq={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},xq={key:0,class:"mt-2 text-sm text-red-600"},Lq={key:0,class:"mt-2 text-sm text-red-600"},Sq={key:5},Cq={class:"flex items-center"},Eq={key:6,class:"border-t pt-4 mt-4"},Pq={class:"mb-4"},Mq={class:"mb-4"},kq={key:7},Aq={key:8},Tq={key:0,class:"mt-2 text-sm text-red-600"},Dq={class:"flex justify-end space-x-3"},Iq=["disabled"],Oq={key:0,class:"mr-2"},Nq=Rs({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(n,{emit:e}){const t=n,r=e,i=yt(!1),s=yt(""),o=yt(""),a=yt(""),l=yt(""),u=yt(""),h=au({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:t.isEntreprise?"SALARIE":t.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});Es(()=>{var v;(v=t.user)!=null&&v.id?(h.id=t.user.id,h.first_name=t.user.first_name||"",h.last_name=t.user.last_name||"",h.username=t.user.username||"",h.email=t.user.email||"",h.company_name=t.user.company_name||"",h.role=t.user.role||"VISITEUR",h.is_active=t.user.is_active??!0,h.ecowitt_api_key=t.user.ecowitt_api_key||"",h.ecowitt_application_key=t.user.ecowitt_application_key||"",h.storage_quota=t.user.storage_quota||50,h.storage_used=t.user.storage_used||0,t.user.salarie?typeof t.user.salarie=="object"?h.salarie=t.user.salarie.id:h.salarie=t.user.salarie:t.user.salarie_id?h.salarie=t.user.salarie_id:t.currentSalarie&&(h.salarie=parseInt(t.currentSalarie)),t.user.entreprise?typeof t.user.entreprise=="object"?h.entreprise=t.user.entreprise.id:h.entreprise=t.user.entreprise:t.user.entreprise_id?h.entreprise=t.user.entreprise_id:t.currentEntreprise&&(h.entreprise=parseInt(t.currentEntreprise))):(t.currentSalarie&&(h.salarie=parseInt(t.currentSalarie)),t.currentEntreprise&&(h.entreprise=parseInt(t.currentEntreprise)),t.isEntreprise?h.role="SALARIE":t.isAdmin||(h.role="VISITEUR"))}),pm(()=>{h.role==="ADMIN"||h.role==="ENTREPRISE"?(h.salarie=null,h.entreprise=null):h.role==="SALARIE"&&(h.salarie=null,t.isEntreprise&&t.currentEntreprise&&(h.entreprise=parseInt(t.currentEntreprise)))}),pm(()=>{s.value="",o.value="",a.value="",l.value="",t.apiErrors&&t.apiErrors.length>0&&t.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(h.id||(h.password!==u.value?(a.value="Les mots de passe ne correspondent pas",v=!1):h.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractères",v=!1)),!!v){i.value=!0;try{const m={...h};h.id&&delete m.password,t.isEntreprise&&["SALARIE","VISITEUR"].includes(h.role)&&(m.entreprise_id=t.currentEntreprise?parseInt(t.currentEntreprise):void 0),m.salarie&&(m.salarie_id=m.salarie,delete m.salarie),t.currentSalarie&&h.role==="VISITEUR"&&(m.salarie_id=parseInt(t.currentSalarie)),await r("save",m),r("refresh")}catch(m){console.error("Erreur locale:",m)}finally{i.value=!1}}}return(v,m)=>(De(),Fe("div",rq,[x("div",iq,[m[43]||(m[43]=x("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[x("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),x("div",sq,[x("div",null,[x("div",oq,[x("div",aq,[x("h3",lq,Dt(n.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),x("button",{type:"button",onClick:m[0]||(m[0]=S=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},m[16]||(m[16]=[x("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",uq,[l.value?(De(),Fe("div",cq,[x("div",dq,[m[17]||(m[17]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),x("div",hq,[x("h3",fq,Dt(l.value),1)])])])):tn("",!0),x("form",{onSubmit:Il(p,["prevent"]),class:"space-y-6"},[n.isAdmin?(De(),Fe("div",pq,[m[19]||(m[19]=x("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Tn(x("select",{id:"role","onUpdate:modelValue":m[1]||(m[1]=S=>h.role=S),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[18]||(m[18]=[x("option",{value:"ADMIN"},"Administrateur",-1),x("option",{value:"ENTREPRISE"},"Entreprise",-1),x("option",{value:"SALARIE"},"Salarie",-1),x("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Yi,h.role]])])):tn("",!0),n.isAdmin&&h.role==="SALARIE"?(De(),Fe("div",gq,[m[21]||(m[21]=x("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Tn(x("select",{id:"entreprise","onUpdate:modelValue":m[2]||(m[2]=S=>h.entreprise=S),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[m[20]||(m[20]=x("option",{value:null},"-- Sélectionner une entreprise --",-1)),(De(!0),Fe(kn,null,sr(n.entreprises,S=>(De(),Fe("option",{key:S.id,value:S.id},Dt(S.first_name)+" "+Dt(S.last_name)+" ("+Dt(S.company_name||"Entreprise")+") ",9,mq))),128))],512),[[Yi,h.entreprise]])])):tn("",!0),n.isEntreprise&&!h.id?(De(),Fe("div",vq,[m[23]||(m[23]=x("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Tn(x("select",{id:"role","onUpdate:modelValue":m[3]||(m[3]=S=>h.role=S),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[22]||(m[22]=[x("option",{value:"SALARIE"},"Salarie",-1),x("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Yi,h.role]])])):tn("",!0),(n.isAdmin||n.isEntreprise)&&h.role==="VISITEUR"&&!n.currentSalarie?(De(),Fe("div",yq,[m[25]||(m[25]=x("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Tn(x("select",{id:"salarie","onUpdate:modelValue":m[4]||(m[4]=S=>h.salarie=S),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[m[24]||(m[24]=x("option",{value:null},"-- Sélectionner un salarie --",-1)),(De(!0),Fe(kn,null,sr(n.salaries,S=>(De(),Fe("option",{key:S.id,value:S.id},Dt(S.first_name)+" "+Dt(S.last_name)+" ("+Dt(S.company_name||"Salarie")+") ",9,_q))),128))],512),[[Yi,h.salarie]])])):tn("",!0),n.currentSalarie&&!n.isAdmin&&!n.isEntreprise?(De(),Fe("div",bq,m[26]||(m[26]=[fl('<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><p class="text-sm text-blue-700"> Vous êtes en train de créer un visiteur qui sera automatiquement associé à votre compte. </p></div></div>',1)]))):tn("",!0),x("div",wq,[x("div",null,[m[27]||(m[27]=x("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),Tn(x("input",{type:"text",id:"first_name","onUpdate:modelValue":m[5]||(m[5]=S=>h.first_name=S),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,h.first_name]])]),x("div",null,[m[28]||(m[28]=x("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Tn(x("input",{type:"text",id:"last_name","onUpdate:modelValue":m[6]||(m[6]=S=>h.last_name=S),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,h.last_name]])])]),x("div",null,[m[29]||(m[29]=x("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Tn(x("input",{type:"email",id:"email","onUpdate:modelValue":m[7]||(m[7]=S=>h.email=S),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,h.email]]),s.value?(De(),Fe("div",xq,Dt(s.value),1)):tn("",!0)]),x("div",null,[m[30]||(m[30]=x("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Tn(x("input",{type:"text",id:"username","onUpdate:modelValue":m[8]||(m[8]=S=>h.username=S),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,h.username]]),o.value?(De(),Fe("div",Lq,Dt(o.value),1)):tn("",!0)]),x("div",null,[m[31]||(m[31]=x("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Tn(x("input",{type:"text",id:"company_name","onUpdate:modelValue":m[9]||(m[9]=S=>h.company_name=S),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,h.company_name]])]),h.role==="ENTREPRISE"||h.role==="SALARIE"?(De(),Fe("div",Sq,[m[33]||(m[33]=x("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),x("div",Cq,[Tn(x("input",{type:"number",id:"storage_quota","onUpdate:modelValue":m[10]||(m[10]=S=>h.storage_quota=S),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,h.storage_quota]]),m[32]||(m[32]=x("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),m[34]||(m[34]=x("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):tn("",!0),h.role==="ENTREPRISE"?(De(),Fe("div",Eq,[m[39]||(m[39]=x("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),x("div",Pq,[m[35]||(m[35]=x("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Clé API Ecowitt",-1)),Tn(x("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":m[11]||(m[11]=S=>h.ecowitt_api_key=S),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé API Ecowitt"},null,512),[[Ur,h.ecowitt_api_key]]),m[36]||(m[36]=x("p",{class:"mt-1 text-sm text-gray-500"},"Clé API pour accéder aux services météo Ecowitt",-1))]),x("div",Mq,[m[37]||(m[37]=x("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Clé d'application Ecowitt",-1)),Tn(x("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":m[12]||(m[12]=S=>h.ecowitt_application_key=S),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé d'application Ecowitt"},null,512),[[Ur,h.ecowitt_application_key]]),m[38]||(m[38]=x("p",{class:"mt-1 text-sm text-gray-500"},"Clé d'application pour accéder aux services météo Ecowitt",-1))])])):tn("",!0),h.id?tn("",!0):(De(),Fe("div",kq,[m[40]||(m[40]=x("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Tn(x("input",{type:"password",id:"password","onUpdate:modelValue":m[13]||(m[13]=S=>h.password=S),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,h.password]])])),h.id?tn("",!0):(De(),Fe("div",Aq,[m[41]||(m[41]=x("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Tn(x("input",{type:"password",id:"password_confirm","onUpdate:modelValue":m[14]||(m[14]=S=>u.value=S),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ur,u.value]]),a.value?(De(),Fe("div",Tq,Dt(a.value),1)):tn("",!0)])),x("div",Dq,[x("button",{type:"button",onClick:m[15]||(m[15]=S=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),x("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(De(),Fe("span",Oq,m[42]||(m[42]=[x("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):tn("",!0),qr(" "+Dt(h.id?"Enregistrer":"Créer"),1)],8,Iq)])],32)])])])])])]))}}),Rq={class:"fixed inset-0 z-[3001] overflow-y-auto"},Bq={class:"flex items-center justify-center min-h-screen w-full"},Fq={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},jq={class:"p-4 md:p-6"},zq={class:"flex items-start"},$q={class:"ml-4 flex-1"},Uq={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Vq={class:"mt-2"},Hq={class:"text-sm text-gray-500"},Gq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},yP=Rs({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(n){return(e,t)=>(De(),Fe("div",Rq,[x("div",Bq,[t[3]||(t[3]=x("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[x("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),x("div",Fq,[x("div",jq,[x("div",zq,[t[2]||(t[2]=x("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[x("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),x("div",$q,[x("h3",Uq,Dt(n.title),1),x("div",Vq,[x("p",Hq,Dt(n.message),1)])])]),x("div",Gq,[x("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:t[0]||(t[0]=r=>e.$emit("confirm"))}," Confirmer "),x("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:t[1]||(t[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),Wq={class:"h-full bg-gray-50"},qq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Yq={class:"flex justify-between items-center mb-8"},Kq={class:"text-3xl font-extrabold text-gray-900"},Zq={key:0},Xq={key:1},Jq={key:2},Qq={key:0},eY={key:1},tY={key:2},nY={class:"bg-white shadow rounded-lg mb-6 p-4"},rY={class:"space-y-4"},iY={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},sY={key:0},oY={key:0,value:"ADMIN"},aY={key:1,value:"ENTREPRISE"},lY={key:1},uY=["value"],cY={key:2},dY=["value"],hY={class:"w-full"},fY={class:"bg-white shadow rounded-lg"},pY={class:"overflow-x-auto"},gY={class:"min-w-full divide-y divide-gray-200"},mY={class:"bg-gray-50"},vY={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},yY={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},_Y={class:"bg-white divide-y divide-gray-200"},bY={key:0,class:"animate-pulse"},wY={key:1},xY={class:"px-6 py-4 whitespace-nowrap"},LY={class:"flex items-center"},SY={class:"flex-shrink-0 h-10 w-10"},CY={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},EY={class:"text-primary-600 font-medium"},PY={class:"ml-4"},MY={class:"text-sm font-medium text-gray-900"},kY={class:"text-sm text-gray-500"},AY={class:"px-6 py-4 whitespace-nowrap"},TY={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},DY={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},IY={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},OY={class:"px-6 py-4 whitespace-nowrap"},NY={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},RY=["onClick"],BY=["onClick"],FY={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},jY=Rs({__name:"UserListView",setup(n){const e=Ao(),t=ou(),r=yt([]),i=yt([]),s=yt([]),o=yt(!1),a=yt(!1),l=yt(null),u=yt(null),h=yt(!0),p=yt([]),v=au({role:"",search:"",salarie:"",entreprise:""}),m=rr(()=>e.isAdmin),S=rr(()=>e.isEntreprise),E=rr(()=>e.isSalarie),k=rr(()=>m.value?r.value.filter($=>$.role==="SALARIE"):S.value?r.value.filter($=>{var F,B;return $.role==="SALARIE"&&((F=$.entreprise)==null?void 0:F.id)===((B=e.user)==null?void 0:B.id)}):[]),T=rr(()=>{let $=r.value;if(S.value&&($=$.filter(F=>{var B,Q,X,_e,me;return F.role==="SALARIE"?((B=F.entreprise)==null?void 0:B.id)===((Q=e.user)==null?void 0:Q.id):F.role==="VISITEUR"?((_e=(X=F.salarie)==null?void 0:X.entreprise)==null?void 0:_e.id)===((me=e.user)==null?void 0:me.id):!1})),E.value&&($=$.filter(F=>{var B,Q;return F.role==="VISITEUR"&&(F.salarie_id===((B=e.user)==null?void 0:B.id)||F.salarie&&F.salarie.id===((Q=e.user)==null?void 0:Q.id))})),(m.value||S.value)&&(v.role&&($=$.filter(F=>F.role===v.role)),v.salarie&&($=$.filter(F=>{var Q;const B=((Q=F.salarie)==null?void 0:Q.id)||F.salarie_id;return(B==null?void 0:B.toString())===v.salarie.toString()})),v.entreprise&&m.value&&($=$.filter(F=>{var B,Q,X,_e,me;return F.role==="SALARIE"?((Q=(B=F.entreprise)==null?void 0:B.id)==null?void 0:Q.toString())===v.entreprise.toString():F.role==="VISITEUR"?((me=(_e=(X=F.salarie)==null?void 0:X.entreprise)==null?void 0:_e.id)==null?void 0:me.toString())===v.entreprise.toString():!1}))),v.search){const F=v.search.toLowerCase();$=$.filter(B=>{var Q,X,_e,me;return((Q=B.username)==null?void 0:Q.toLowerCase().includes(F))||((X=B.email)==null?void 0:X.toLowerCase().includes(F))||((_e=B.first_name)==null?void 0:_e.toLowerCase().includes(F))||((me=B.last_name)==null?void 0:me.toLowerCase().includes(F))||B.company_name&&B.company_name.toLowerCase().includes(F)})}return $});Es(async()=>{await A(),await R()});async function A(){var $,F,B;h.value=!0;try{if(m.value)r.value=await e.fetchUsers();else if(S.value){const[Q,X]=await Promise.all([iv({role:"SALARIE",entrepriseId:($=e.user)==null?void 0:$.id}),iv({role:"VISITEUR",entrepriseId:(F=e.user)==null?void 0:F.id})]);r.value=[...Q,...X]}else E.value&&(r.value=await iv({role:"VISITEUR",salarieId:(B=e.user)==null?void 0:B.id,includeDetails:!0}),console.log("Visiteurs récupérés:",r.value))}catch(Q){console.error("Erreur lors de la récupération des utilisateurs:",Q),t.error("Erreur lors de la récupération des utilisateurs")}finally{h.value=!1}}async function R(){try{m.value?await Promise.all([G(),pe()]):S.value&&await ee()}catch($){console.error("Erreur lors de la récupération des dépendances:",$)}}async function G(){var $;try{m.value?i.value=await e.fetchUsersByRole({role:"SALARIE"}):S.value?i.value=await e.fetchEntrepriseSalaries(($=e.user)==null?void 0:$.id):E.value&&e.user&&(i.value=[{id:e.user.id,first_name:e.user.first_name,last_name:e.user.last_name,username:e.user.username,role:"SALARIE",company_name:e.user.company_name}])}catch(F){console.error("Erreur lors de la récupération des salaries:",F)}}async function ee(){var $,F;if(!(!S.value||!(($=e.user)!=null&&$.id)))try{i.value=await e.fetchEntrepriseSalaries((F=e.user)==null?void 0:F.id)}catch(B){console.error("Erreur lors de la récupération des salaries de l'entreprise:",B)}}async function pe(){try{s.value=await e.fetchEnterprises()}catch($){console.error("Erreur lors de la récupération des entreprises:",$)}}function ge(){l.value=null,o.value=!0}function O($){l.value={...$},o.value=!0}function j(){o.value=!1,l.value=null,p.value=[]}async function Y($){var B,Q,X,_e,me,We;p.value=[];const F=!!$.id;try{const ae={...$};m.value?(ae.entreprise&&typeof ae.entreprise=="object"?ae.entreprise_id=ae.entreprise.id:typeof ae.entreprise=="number"&&(ae.entreprise_id=ae.entreprise),ae.salarie&&typeof ae.salarie=="object"?ae.salarie_id=ae.salarie.id:typeof ae.salarie=="number"&&(ae.salarie_id=ae.salarie)):S.value?(ae.entreprise_id=(B=e.user)==null?void 0:B.id,ae.role==="VISITEUR"&&(ae.salarie&&typeof ae.salarie=="object"?ae.salarie_id=ae.salarie.id:typeof ae.salarie=="number"&&(ae.salarie_id=ae.salarie))):E.value&&(ae.role="VISITEUR",ae.salarie_id=(Q=e.user)==null?void 0:Q.id),ae.role==="SALARIE"?((X=ae.entreprise)!=null&&X.id?(ae.entreprise_id=ae.entreprise.id,delete ae.entreprise):typeof ae.entreprise=="number"&&(ae.entreprise_id=ae.entreprise,delete ae.entreprise),delete ae.salarie):ae.role==="VISITEUR"&&((_e=ae.salarie)!=null&&_e.id?(ae.salarie_id=ae.salarie.id,delete ae.salarie):typeof ae.salarie=="number"&&(ae.salarie_id=ae.salarie,delete ae.salarie),delete ae.entreprise,delete ae.entreprise_id),F?(await e.updateUser($.id,ae),t.success("Utilisateur modifié avec succès")):(await e.createUser(ae),t.success("Utilisateur créé avec succès")),await Promise.all([A(),R()]),j()}catch(ae){console.error("Error saving user:",((me=ae.response)==null?void 0:me.data)||ae),p.value=eR(ae),t.error("Erreur lors de la sauvegarde de l'utilisateur");const ve=((We=ae.response)==null?void 0:We.data)||{};let ye="";throw typeof ve=="object"&&(ye=Object.entries(ve).map(([J,se])=>Array.isArray(se)?`${J}: ${se[0]}`:`${J}: ${se}`).filter(J=>J).join(`
`)),ye||(ye="Une erreur est survenue lors de la sauvegarde"),new Error(ye)}}function V($){u.value=$,a.value=!0}async function N(){if(u.value)try{await e.deleteUser(u.value.id),t.success("Utilisateur supprimé avec succès"),await Promise.all([A(),R()]),a.value=!1,u.value=null}catch($){throw console.error("Erreur lors de la suppression de l'utilisateur:",$),t.error("Erreur lors de la suppression de l'utilisateur"),$}}function q($){var F,B,Q,X,_e,me,We,ae;return m.value?!0:S.value?$.role==="SALARIE"?((F=$.entreprise)==null?void 0:F.id)===((B=e.user)==null?void 0:B.id):$.role==="VISITEUR"?((X=(Q=$.salarie)==null?void 0:Q.entreprise)==null?void 0:X.id)===((_e=e.user)==null?void 0:_e.id):!1:E.value?$.role==="VISITEUR"&&($.salarie_id===((me=e.user)==null?void 0:me.id)||((We=$.salarie)==null?void 0:We.id)===((ae=e.user)==null?void 0:ae.id)):!1}return($,F)=>{var B,Q,X,_e;return De(),Fe("div",Wq,[x("div",qq,[x("div",Yq,[x("h1",Kq,[m.value?(De(),Fe("span",Zq,"Gestion des utilisateurs")):S.value?(De(),Fe("span",Xq,"Gestion des salaries et visiteurs")):E.value?(De(),Fe("span",Jq,"Gestion des visiteurs")):tn("",!0)]),x("button",{onClick:ge,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[F[5]||(F[5]=x("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(De(),Fe("span",Qq,"Nouvel utilisateur")):S.value?(De(),Fe("span",eY,"Nouveau salarie/visiteur")):E.value?(De(),Fe("span",tY,"Nouvel visiteur")):tn("",!0)])]),x("div",nY,[x("div",rY,[x("div",iY,[m.value||S.value?(De(),Fe("div",sY,[F[9]||(F[9]=x("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Tn(x("select",{id:"role-filter","onUpdate:modelValue":F[0]||(F[0]=me=>v.role=me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[F[6]||(F[6]=x("option",{value:""},"Tous les rôles",-1)),m.value?(De(),Fe("option",oY,"Administrateur")):tn("",!0),m.value?(De(),Fe("option",aY,"Entreprise")):tn("",!0),F[7]||(F[7]=x("option",{value:"SALARIE"},"Salarie",-1)),F[8]||(F[8]=x("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[Yi,v.role]])])):tn("",!0),m.value?(De(),Fe("div",lY,[F[11]||(F[11]=x("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Tn(x("select",{id:"entreprise-filter","onUpdate:modelValue":F[1]||(F[1]=me=>v.entreprise=me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[F[10]||(F[10]=x("option",{value:""},"Toutes les entreprises",-1)),(De(!0),Fe(kn,null,sr(s.value,me=>(De(),Fe("option",{key:me.id,value:me.id},Dt(Ln(Dl)(me)),9,uY))),128))],512),[[Yi,v.entreprise]])])):tn("",!0),m.value||S.value?(De(),Fe("div",cY,[F[13]||(F[13]=x("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Tn(x("select",{id:"salarie-filter","onUpdate:modelValue":F[2]||(F[2]=me=>v.salarie=me),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[F[12]||(F[12]=x("option",{value:""},"Tous les salaries",-1)),(De(!0),Fe(kn,null,sr(k.value,me=>(De(),Fe("option",{key:me.id,value:me.id},Dt(Ln(Dl)(me)),9,dY))),128))],512),[[Yi,v.salarie]])])):tn("",!0)]),x("div",hY,[F[14]||(F[14]=x("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Tn(x("input",{type:"text",id:"search","onUpdate:modelValue":F[3]||(F[3]=me=>v.search=me),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ur,v.search]])])])]),x("div",fY,[x("div",pY,[x("table",gY,[x("thead",mY,[x("tr",null,[F[15]||(F[15]=x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),F[16]||(F[16]=x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),F[17]||(F[17]=x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),m.value||S.value?(De(),Fe("th",vY," Entreprise ")):tn("",!0),m.value||S.value?(De(),Fe("th",yY," Salarie ")):tn("",!0),F[18]||(F[18]=x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),F[19]||(F[19]=x("th",{scope:"col",class:"relative px-6 py-3"},[x("span",{class:"sr-only"},"Actions")],-1))])]),x("tbody",_Y,[h.value?(De(),Fe("tr",bY,F[20]||(F[20]=[x("td",{colspan:"7",class:"py-4 px-6"},[x("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):T.value.length===0?(De(),Fe("tr",wY,F[21]||(F[21]=[x("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):tn("",!0),(De(!0),Fe(kn,null,sr(T.value,me=>{var We;return De(),Fe("tr",{key:me.id},[x("td",xY,[x("div",LY,[x("div",SY,[x("div",CY,[x("span",EY,Dt(Ln(nR)(me.first_name,me.last_name)),1)])]),x("div",PY,[x("div",MY,Dt(Ln(Dl)(me)),1),x("div",kY,Dt(me.username),1)])])]),x("td",AY,[x("span",{class:Mi(Ln(sR)())},Dt(Ln(iR)(me.role)),3)]),x("td",TY,Dt(me.email),1),m.value||S.value?(De(),Fe("td",DY,[me.role==="ENTREPRISE"?(De(),Fe(kn,{key:0},[qr(" - ")],64)):me.role==="SALARIE"?(De(),Fe(kn,{key:1},[qr(Dt(me.entreprise?Ln(Dl)(me.entreprise):"Non assigné"),1)],64)):me.role==="VISITEUR"?(De(),Fe(kn,{key:2},[qr(Dt((We=me.salarie)!=null&&We.entreprise?Ln(Dl)(me.salarie.entreprise):"Non assigné"),1)],64)):(De(),Fe(kn,{key:3},[qr(" - ")],64))])):tn("",!0),m.value||S.value?(De(),Fe("td",IY,[me.role==="ENTREPRISE"||me.role==="ADMIN"?(De(),Fe(kn,{key:0},[qr(" - ")],64)):me.role==="SALARIE"?(De(),Fe(kn,{key:1},[qr(" - ")],64)):(De(),Fe(kn,{key:2},[qr(Dt(me.salarie?Ln(Dl)(me.salarie):"Non assigné"),1)],64))])):tn("",!0),x("td",OY,[x("span",{class:Mi(Ln(oR)(me.is_active))},Dt(me.is_active?"Actif":"Inactif"),3)]),x("td",NY,[x("button",{onClick:ae=>O(me),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,RY),q(me)?(De(),Fe("button",{key:0,onClick:ae=>V(me),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,BY)):tn("",!0)])])}),128))])])])])]),o.value?(De(),Fe("div",FY,[ci(Nq,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":m.value,"is-entreprise":S.value,"current-salarie":E.value?(Q=(B=Ln(e).user)==null?void 0:B.id)==null?void 0:Q.toString():void 0,"current-entreprise":S.value?(_e=(X=Ln(e).user)==null?void 0:X.id)==null?void 0:_e.toString():void 0,"api-errors":p.value,onClose:j,onSave:Y},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):tn("",!0),a.value?(De(),$o(yP,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:N,onCancel:F[4]||(F[4]=me=>a.value=!1)})):tn("",!0)])}}}),zY={class:"h-full bg-gray-50"},$Y={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},UY={class:"sm:flex sm:items-center"},VY={class:"sm:flex-auto"},HY={class:"text-2xl font-semibold text-gray-900"},GY={class:"mt-2 text-sm text-gray-700"},WY={key:0,class:"mt-8"},qY={class:"mb-6"},YY=["value"],KY={class:"mb-6"},ZY={value:null},XY=["value"],JY={key:0,class:"mb-6"},QY={value:null},eK=["value"],tK={key:1,class:"mt-8"},nK={class:"mb-6"},rK=["value"],iK={class:"mt-8"},sK={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},oK={class:"overflow-x-auto"},aK={class:"min-w-full divide-y divide-gray-300"},lK={class:"bg-gray-50"},uK={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},cK={class:"ml-2 flex-none rounded"},dK={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},hK={class:"ml-2 flex-none rounded"},fK={class:"divide-y divide-gray-200 bg-white"},pK={key:0},gK={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},mK={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},vK={class:"px-3 py-4 text-sm text-gray-900"},yK={key:0,class:"flex items-center"},_K={class:"h-8 w-8 flex-shrink-0"},bK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},wK={class:"text-primary-700 font-medium text-sm"},xK={class:"ml-3"},LK={class:"font-medium"},SK={key:1,class:"text-gray-500"},CK={class:"px-3 py-4 text-sm text-gray-900"},EK={key:0,class:"flex items-center"},PK={class:"h-8 w-8 flex-shrink-0"},MK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},kK={class:"text-primary-700 font-medium text-sm"},AK={class:"ml-3"},TK={class:"font-medium"},DK={key:1,class:"text-gray-500"},IK={class:"px-3 py-4 text-sm text-gray-900"},OK={key:0,class:"flex items-center"},NK={class:"h-8 w-8 flex-shrink-0"},RK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},BK={class:"text-primary-700 font-medium text-sm"},FK={class:"ml-3"},jK={class:"font-medium"},zK={key:1,class:"text-gray-500"},$K={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},UK={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},VK=["onClick"],HK=["onClick"],GK=["onClick"],WK={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},qK={class:"bg-white rounded-lg p-6 max-w-md w-full"},YK={class:"flex justify-between items-center mb-4"},KK=["disabled"],ZK=["disabled"],XK={key:0,class:"space-y-4"},JK={key:0},QK=["disabled"],eZ=["value"],tZ=["disabled"],nZ=["value"],rZ={key:0,class:"mt-1 text-sm text-gray-500"},iZ=["disabled"],sZ=["value"],oZ={key:0,class:"mt-1 text-sm text-gray-500"},aZ={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},lZ={class:"flex"},uZ={class:"ml-3"},cZ={class:"text-sm font-medium text-red-800"},dZ={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},hZ=["disabled"],fZ={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},pZ=Rs({__name:"PlansView",setup(n){const e=Rm(),t=Gy(),r=Ao(),i=yt([]),s=yt([]),o=yt([]),a=yt([]),l=yt(!1),u=yt(!1),h=yt(!1),p=yt(null),v=yt({nom:"",description:"",client:null}),m=yt({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),S=yt(!1),E=yt(null),k=yt(null),T=yt(null),A=yt("date_modification"),R=yt("desc"),G=yt(null),ee=rr(()=>k.value?a.value.filter(ie=>typeof ie.salarie=="object"&&ie.salarie?ie.salarie.id===k.value:ie.salarie===k.value||ie.salarie_id===k.value):a.value),pe=rr(()=>{let ie=i.value;console.log(`
[PlansView] Filtering plans:`,ie.map(Oe=>({id:Oe.id,entreprise:Oe.entreprise,salarie:Oe.salarie,visiteur:Oe.visiteur}))),r.isAdmin?(G.value&&(ie=ie.filter(Oe=>{var we;return typeof Oe.entreprise=="object"?((we=Oe.entreprise)==null?void 0:we.id)===G.value:Oe.entreprise===G.value})),k.value&&(ie=ie.filter(Oe=>{var we;return typeof Oe.salarie=="object"?((we=Oe.salarie)==null?void 0:we.id)===k.value:Oe.salarie===k.value}),T.value&&(ie=ie.filter(Oe=>{var we;return typeof Oe.visiteur=="object"?((we=Oe.visiteur)==null?void 0:we.id)===T.value:Oe.visiteur===T.value})))):r.isSalarie&&(ie=ie.filter(Oe=>{var we,Be,ue;return typeof Oe.salarie=="object"?((we=Oe.salarie)==null?void 0:we.id)===((Be=r.user)==null?void 0:Be.id):Oe.salarie===((ue=r.user)==null?void 0:ue.id)}),T.value&&(ie=ie.filter(Oe=>{var we;return typeof Oe.visiteur=="object"?((we=Oe.visiteur)==null?void 0:we.id)===T.value:Oe.visiteur===T.value})));const te=[...ie].sort((Oe,we)=>{if(A.value==="nom")return R.value==="asc"?Oe.nom.localeCompare(we.nom):we.nom.localeCompare(Oe.nom);{const Be=new Date(Oe[A.value]).getTime(),ue=new Date(we[A.value]).getTime();return R.value==="asc"?Be-ue:ue-Be}});return console.log("[PlansView] Final filtered and sorted plans:",te.map(Oe=>({id:Oe.id,entreprise:Oe.entreprise,salarie:Oe.salarie,visiteur:Oe.visiteur}))),te}),ge=rr(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans où vous êtes assigné comme salarie",plans:i.value.filter(ie=>{var te,Oe,we;return typeof ie.salarie=="object"?((te=ie.salarie)==null?void 0:te.id)===((Oe=r.user)==null?void 0:Oe.id):ie.salarie===((we=r.user)==null?void 0:we.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:i.value.filter(ie=>{var we,Be,ue,re;const te=ie.createur.id===((we=r.user)==null?void 0:we.id);let Oe=!1;return typeof ie.visiteur=="object"?Oe=((Be=ie.visiteur)==null?void 0:Be.id)===((ue=r.user)==null?void 0:ue.id):Oe=ie.visiteur===((re=r.user)==null?void 0:re.id),Oe||te})}),O=rr(()=>G.value?s.value.filter(ie=>{var te;return typeof ie.entreprise=="object"?((te=ie.entreprise)==null?void 0:te.id)===G.value:ie.entreprise_id===G.value}):s.value),j=rr(()=>m.value.entreprise?s.value.filter(ie=>{var te;return typeof ie.entreprise=="object"?((te=ie.entreprise)==null?void 0:te.id)===m.value.entreprise:ie.entreprise_id===m.value.entreprise}):[]),Y=rr(()=>!m.value.entreprise||!m.value.salarie?[]:a.value.filter(ie=>typeof ie.salarie=="object"&&ie.salarie?ie.salarie.id===m.value.salarie:ie.salarie===m.value.salarie||ie.salarie_id===m.value.salarie));Es(async()=>{var ie;await V(),r.isAdmin?await N():r.isSalarie&&await $(((ie=r.user)==null?void 0:ie.id)||0)});async function V(){try{const ie=await t.fetchPlansWithDetails();i.value=ie.data}catch(ie){console.error("Erreur lors du chargement des plans:",ie)}}async function N(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises chargées:",o.value)}catch(ie){console.error("Erreur lors du chargement des entreprises:",ie)}}async function q(ie){try{if(console.log("Chargement des salaries pour l'entreprise:",ie),ie===void 0){const te=await r.fetchUsersByRole({role:"SALARIE"});s.value=te}else s.value=await r.fetchEntrepriseSalaries(ie);console.log("Salaries chargés:",s.value)}catch(te){console.error("Erreur lors du chargement des salaries:",te)}}async function $(ie){try{console.log("Chargement des visiteurs pour le salarie:",ie);const te=await iv({role:"VISITEUR",salarieId:ie});a.value=te.map(Oe=>({...Oe,salarie_id:ie})),console.log("Visiteurs chargés:",a.value)}catch(te){console.error("Erreur lors du chargement des visiteurs:",te)}}function F(){l.value=!0,v.value={nom:"",description:"",client:null}}async function B(ie){console.log(`
[PlansView][editPlan] ====== DÉBUT ÉDITION PLAN ======`),console.log("[PlansView][editPlan] Plan reçu:",{id:ie.id,nom:ie.nom,entreprise:ie.entreprise,salarie:ie.salarie,visiteur:ie.visiteur});try{console.log("[PlansView][editPlan] Définition du plan courant dans le store..."),t.setCurrentPlan(ie),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",ie.id),localStorage.setItem("lastPlanId",ie.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await e.push("/"),console.log(`[PlansView][editPlan] ====== FIN ÉDITION PLAN ======
`)}catch(te){console.error("[PlansView][editPlan] ERREUR:",te),te instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",te.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function Q(ie){ie!=null&&ie.id&&(p.value=ie,h.value=!0)}async function X(){var ie,te;if((ie=p.value)!=null&&ie.id)try{await t.deletePlan(p.value.id),await V(),((te=t.currentPlan)==null?void 0:te.id)===p.value.id&&t.clearCurrentPlan()}catch(Oe){console.error("Erreur lors de la suppression du plan:",Oe),alert("Une erreur est survenue lors de la suppression du plan")}finally{h.value=!1,p.value=null}}function _e(){h.value=!1,p.value=null}function me(ie){return new Date(ie).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function We(ie){if(!ie)return"";const te=ie.first_name||"",Oe=ie.last_name||"";return(te.charAt(0)+Oe.charAt(0)).toUpperCase()}async function ae(ie){S.value=!0,E.value=null;try{r.isAdmin&&!o.value.length&&await N();const te=typeof ie.entreprise=="object"&&ie.entreprise?ie.entreprise.id:ie.entreprise,Oe=typeof ie.salarie=="object"&&ie.salarie?ie.salarie.id:ie.salarie,we=typeof ie.visiteur=="object"&&ie.visiteur?ie.visiteur.id:ie.visiteur;m.value={id:ie.id,nom:ie.nom,description:ie.description,entreprise:te||null,salarie:Oe||null,visiteur:we||null},te&&await q(te),Oe&&await $(Oe),u.value=!0}catch(te){console.error("Erreur lors de l'ouverture du modal:",te),E.value="Erreur lors du chargement des données"}finally{S.value=!1}}async function ve(){var ie,te,Oe,we,Be;E.value=null,S.value=!0;try{if(!m.value.nom.trim())throw new Error("Le nom du plan est requis");if(m.value.visiteur&&!m.value.salarie)throw new Error("Un salarie doit être sélectionné pour assigner un visiteur");if(m.value.salarie&&!m.value.entreprise)throw new Error("Une entreprise doit être sélectionnée pour assigner un salarie");console.log("Données envoyées pour la mise à jour:",{id:m.value.id,nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});const ue=await t.updatePlanDetails(m.value.id,{nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});console.log("Réponse de la mise à jour:",ue),ue&&(u.value=!1,await V())}catch(ue){if(console.error("Erreur lors de la mise à jour du plan:",ue),(te=(ie=ue.response)==null?void 0:ie.data)!=null&&te.detail)E.value=ue.response.data.detail;else if((we=(Oe=ue.response)==null?void 0:Oe.data)!=null&&we.non_field_errors)E.value=ue.response.data.non_field_errors[0];else if((Be=ue.response)!=null&&Be.data){const re=Object.entries(ue.response.data).map(([Z,U])=>`${Z}: ${Array.isArray(U)?U[0]:U}`);E.value=re.join(`
`)}else E.value=ue.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{S.value=!1}}_i(()=>G.value,async ie=>{k.value=null,T.value=null,ie?await q(ie):await q()}),_i(()=>k.value,async ie=>{T.value=null,ie&&await $(ie)}),_i(()=>m.value.entreprise,async ie=>{ie===null?(m.value.salarie=null,m.value.visiteur=null):await q(ie)}),_i(()=>m.value.salarie,async ie=>{m.value.visiteur=null,ie&&await $(ie)});function ye(ie){var Be,ue,re;const te=r.user;if(!te)return!1;if(te.user_type==="admin")return!0;if(te.user_type==="entreprise")return typeof ie.entreprise=="object"?((Be=ie.entreprise)==null?void 0:Be.id)===te.id:ie.entreprise===te.id;if(te.user_type==="salarie")return typeof ie.salarie=="object"?((ue=ie.salarie)==null?void 0:ue.id)===te.id:ie.salarie===te.id;const Oe=ie.createur.id===te.id;let we=!1;return typeof ie.visiteur=="object"?we=((re=ie.visiteur)==null?void 0:re.id)===te.id:we=ie.visiteur===te.id,we||Oe}async function J(ie){await V(),localStorage.setItem("lastPlanId",ie.toString()),console.log(`Plan ${ie} créé et défini comme plan actif`),e.push("/")}function se(ie){A.value===ie?R.value=R.value==="asc"?"desc":"asc":(A.value=ie,R.value="desc")}function fe(ie){return ie?Dl(ie):""}return(ie,te)=>{var Oe;return De(),Fe("div",zY,[x("div",$Y,[x("div",UY,[x("div",VY,[x("h1",HY,Dt(ge.value.title),1),x("p",GY,Dt(ge.value.description),1)]),x("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[x("button",{onClick:F,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Ln(r).isAdmin?(De(),Fe("div",WY,[x("div",qY,[te[15]||(te[15]=x("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),Tn(x("select",{id:"entreprise-filter","onUpdate:modelValue":te[0]||(te[0]=we=>G.value=we),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[14]||(te[14]=x("option",{value:null},"Toutes les entreprises",-1)),(De(!0),Fe(kn,null,sr(o.value,we=>(De(),Fe("option",{key:we.id,value:we.id},Dt(fe(we)),9,YY))),128))],512),[[Yi,G.value]])]),x("div",KY,[te[16]||(te[16]=x("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),Tn(x("select",{id:"salarie-filter","onUpdate:modelValue":te[1]||(te[1]=we=>k.value=we),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[x("option",ZY,Dt(O.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(De(!0),Fe(kn,null,sr(O.value,we=>(De(),Fe("option",{key:we.id,value:we.id},Dt(fe(we)),9,XY))),128))],512),[[Yi,k.value]])]),k.value?(De(),Fe("div",JY,[te[17]||(te[17]=x("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Tn(x("select",{id:"visiteur-filter","onUpdate:modelValue":te[2]||(te[2]=we=>T.value=we),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[x("option",QY,Dt(ee.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(De(!0),Fe(kn,null,sr(ee.value,we=>(De(),Fe("option",{key:we.id,value:we.id},Dt(fe(we)),9,eK))),128))],512),[[Yi,T.value]])])):tn("",!0)])):Ln(r).isSalarie?(De(),Fe("div",tK,[x("div",nK,[te[19]||(te[19]=x("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Tn(x("select",{id:"visiteur-filter","onUpdate:modelValue":te[3]||(te[3]=we=>T.value=we),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[te[18]||(te[18]=x("option",{value:null},"Tous les visiteurs",-1)),(De(!0),Fe(kn,null,sr(a.value,we=>(De(),Fe("option",{key:we.id,value:we.id},Dt(fe(we)),9,rK))),128))],512),[[Yi,T.value]])])])):tn("",!0),x("div",iK,[x("div",sK,[x("div",oK,[x("table",aK,[x("thead",lK,[x("tr",null,[x("th",uK,[x("button",{onClick:te[4]||(te[4]=we=>se("nom")),class:"group inline-flex items-center"},[te[21]||(te[21]=qr(" Nom ")),x("span",cK,[(De(),Fe("svg",{class:Mi(["h-5 w-5",{"text-gray-900":A.value==="nom","text-gray-400":A.value!=="nom","rotate-180":A.value==="nom"&&R.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},te[20]||(te[20]=[x("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),te[24]||(te[24]=x("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),te[25]||(te[25]=x("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),te[26]||(te[26]=x("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),te[27]||(te[27]=x("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),x("th",dK,[x("button",{onClick:te[5]||(te[5]=we=>se("date_modification")),class:"group inline-flex items-center"},[te[23]||(te[23]=qr(" Dernière modification ")),x("span",hK,[(De(),Fe("svg",{class:Mi(["h-5 w-5",{"text-gray-900":A.value==="date_modification","text-gray-400":A.value!=="date_modification","rotate-180":A.value==="date_modification"&&R.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},te[22]||(te[22]=[x("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),te[28]||(te[28]=x("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[x("span",{class:"sr-only"},"Actions")],-1))])]),x("tbody",fK,[pe.value.length===0?(De(),Fe("tr",pK,te[29]||(te[29]=[x("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):tn("",!0),(De(!0),Fe(kn,null,sr(pe.value,we=>(De(),Fe("tr",{key:we.id,class:"hover:bg-gray-50"},[x("td",gK,Dt(we.nom),1),x("td",mK,Dt(we.description||"-"),1),x("td",vK,[we.entreprise&&typeof we.entreprise=="object"?(De(),Fe("div",yK,[x("div",_K,[x("div",bK,[x("span",wK,Dt(We(we.entreprise)),1)])]),x("div",xK,[x("div",LK,Dt(Ln(Dl)(we.entreprise)),1)])])):(De(),Fe("div",SK," Non assigné "))]),x("td",CK,[we.salarie&&typeof we.salarie=="object"?(De(),Fe("div",EK,[x("div",PK,[x("div",MK,[x("span",kK,Dt(We(we.salarie)),1)])]),x("div",AK,[x("div",TK,Dt(Ln(Dl)(we.salarie)),1)])])):(De(),Fe("div",DK," Non assigné "))]),x("td",IK,[we.visiteur&&typeof we.visiteur=="object"?(De(),Fe("div",OK,[x("div",NK,[x("div",RK,[x("span",BK,Dt(We(we.visiteur)),1)])]),x("div",FK,[x("div",jK,Dt(Ln(Dl)(we.visiteur)),1)])])):(De(),Fe("div",zK," Non assigné "))]),x("td",$K,Dt(me(we.date_modification)),1),x("td",UK,[x("button",{onClick:Be=>B(we),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,VK),x("button",{onClick:Be=>ae(we),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,HK),ye(we)?(De(),Fe("button",{key:0,onClick:Be=>Q(we),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,GK)):tn("",!0)])]))),128))])])])])]),ci(ZE,{modelValue:l.value,"onUpdate:modelValue":te[6]||(te[6]=we=>l.value=we),salaries:s.value,clients:a.value,onCreated:J},null,8,["modelValue","salaries","clients"]),u.value?(De(),Fe("div",WK,[x("div",qK,[x("div",YK,[te[31]||(te[31]=x("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),x("button",{onClick:te[7]||(te[7]=we=>u.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},te[30]||(te[30]=[x("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("form",{onSubmit:Il(ve,["prevent"]),class:"space-y-4"},[x("div",null,[te[32]||(te[32]=x("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Tn(x("input",{type:"text",id:"edit-nom","onUpdate:modelValue":te[8]||(te[8]=we=>m.value.nom=we),disabled:S.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,KK),[[Ur,m.value.nom]])]),x("div",null,[te[33]||(te[33]=x("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Tn(x("textarea",{id:"edit-description","onUpdate:modelValue":te[9]||(te[9]=we=>m.value.description=we),disabled:S.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,ZK),[[Ur,m.value.description]])]),Ln(r).isAdmin||((Oe=Ln(r).user)==null?void 0:Oe.user_type)==="entreprise"?(De(),Fe("div",XK,[Ln(r).isAdmin?(De(),Fe("div",JK,[te[35]||(te[35]=x("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),Tn(x("select",{id:"edit-entreprise","onUpdate:modelValue":te[10]||(te[10]=we=>m.value.entreprise=we),disabled:S.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[te[34]||(te[34]=x("option",{value:null},"Sélectionner une entreprise",-1)),(De(!0),Fe(kn,null,sr(o.value,we=>(De(),Fe("option",{key:we.id,value:we.id},Dt(fe(we)),9,eZ))),128))],8,QK),[[Yi,m.value.entreprise]])])):tn("",!0),x("div",null,[te[37]||(te[37]=x("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),Tn(x("select",{id:"edit-salarie","onUpdate:modelValue":te[11]||(te[11]=we=>m.value.salarie=we),disabled:Ln(r).isAdmin&&!m.value.entreprise||S.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[te[36]||(te[36]=x("option",{value:null},"Sélectionner un salarie",-1)),(De(!0),Fe(kn,null,sr(j.value,we=>(De(),Fe("option",{key:we.id,value:we.id},Dt(fe(we)),9,nZ))),128))],8,tZ),[[Yi,m.value.salarie]]),Ln(r).isAdmin&&!m.value.entreprise?(De(),Fe("p",rZ," Veuillez d'abord sélectionner une entreprise ")):tn("",!0)]),x("div",null,[te[39]||(te[39]=x("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),Tn(x("select",{id:"edit-visiteur","onUpdate:modelValue":te[12]||(te[12]=we=>m.value.visiteur=we),disabled:!m.value.salarie||S.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[te[38]||(te[38]=x("option",{value:null},"Sélectionner un visiteur",-1)),(De(!0),Fe(kn,null,sr(Y.value,we=>(De(),Fe("option",{key:we.id,value:we.id},Dt(fe(we)),9,sZ))),128))],8,iZ),[[Yi,m.value.visiteur]]),m.value.salarie?tn("",!0):(De(),Fe("p",oZ," Veuillez d'abord sélectionner un salarie "))])])):tn("",!0),E.value?(De(),Fe("div",aZ,[x("div",lZ,[te[40]||(te[40]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),x("div",uZ,[x("p",cZ,Dt(E.value),1)])])])):tn("",!0),x("div",dZ,[x("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:te[13]||(te[13]=we=>u.value=!1)}," Annuler "),x("button",{type:"submit",disabled:S.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[S.value?(De(),Fe("svg",fZ,te[41]||(te[41]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),qr(" "+Dt(S.value?"Enregistrement...":"Enregistrer"),1)],8,hZ)])],32)])])):tn("",!0),h.value?(De(),$o(yP,{key:3,title:"Supprimer le plan",message:"Êtes-vous sûr de vouloir supprimer ce plan ? Cette action est irréversible.",onConfirm:X,onCancel:_e})):tn("",!0)])])}}});var _P={exports:{}};const gZ=kE(pN);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function K5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function od(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?K5(Object(t),!0).forEach(function(r){mZ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):K5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function hv(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hv=function(e){return typeof e}:hv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(n)}function mZ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Xu(){return Xu=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xu.apply(this,arguments)}function vZ(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function yZ(n,e){if(n==null)return{};var t=vZ(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function _Z(n){return bZ(n)||wZ(n)||xZ(n)||LZ()}function bZ(n){if(Array.isArray(n))return jb(n)}function wZ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function xZ(n,e){if(n){if(typeof n=="string")return jb(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jb(n,e)}}function jb(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function LZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var SZ="1.14.0";function Bd(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Vd=Bd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Bm=Bd(/Edge/i),Z5=Bd(/firefox/i),Kg=Bd(/safari/i)&&!Bd(/chrome/i)&&!Bd(/android/i),bP=Bd(/iP(ad|od|hone)/i),CZ=Bd(/chrome/i)&&Bd(/android/i),wP={capture:!1,passive:!1};function Pi(n,e,t){n.addEventListener(e,t,!Vd&&wP)}function yi(n,e,t){n.removeEventListener(e,t,!Vd&&wP)}function Qv(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function EZ(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function _c(n,e,t,r){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&Qv(n,e):Qv(n,e))||r&&n===t)return n;if(n===t)break}while(n=EZ(n))}return null}var X5=/\s+/g;function go(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var r=(" "+n.className+" ").replace(X5," ").replace(" "+e+" "," ");n.className=(r+(t?" "+e:"")).replace(X5," ")}}function pr(n,e,t){var r=n&&n.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function mf(n,e){var t="";if(typeof n=="string")t=n;else do{var r=pr(n,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function xP(n,e,t){if(n){var r=n.getElementsByTagName(e),i=0,s=r.length;if(t)for(;i<s;i++)t(r[i],i);return r}return[]}function rd(){var n=document.scrollingElement;return n||document.documentElement}function Qs(n,e,t,r,i){if(!(!n.getBoundingClientRect&&n!==window)){var s,o,a,l,u,h,p;if(n!==window&&n.parentNode&&n!==rd()?(s=n.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,h=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,h=window.innerHeight,p=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!Vd))do if(i&&i.getBoundingClientRect&&(pr(i,"transform")!=="none"||t&&pr(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(pr(i,"border-top-width")),a-=v.left+parseInt(pr(i,"border-left-width")),l=o+s.height,u=a+s.width;break}while(i=i.parentNode);if(r&&n!==window){var m=mf(i||n),S=m&&m.a,E=m&&m.d;m&&(o/=E,a/=S,p/=S,h/=E,l=o+h,u=a+p)}return{top:o,left:a,bottom:l,right:u,width:p,height:h}}}function J5(n,e,t){for(var r=ph(n,!0),i=Qs(n)[e];r;){var s=Qs(r)[t],o=void 0;if(o=i>=s,!o)return r;if(r===rd())break;r=ph(r,!1)}return!1}function Op(n,e,t,r){for(var i=0,s=0,o=n.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Br.ghost&&(r||o[s]!==Br.dragged)&&_c(o[s],t.draggable,n,!1)){if(i===e)return o[s];i++}s++}return null}function J2(n,e){for(var t=n.lastElementChild;t&&(t===Br.ghost||pr(t,"display")==="none"||e&&!Qv(t,e));)t=t.previousElementSibling;return t||null}function Po(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==Br.clone&&(!e||Qv(n,e))&&t++;return t}function Q5(n){var e=0,t=0,r=rd();if(n)do{var i=mf(n),s=i.a,o=i.d;e+=n.scrollLeft*s,t+=n.scrollTop*o}while(n!==r&&(n=n.parentNode));return[e,t]}function PZ(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===n[t][r])return Number(t)}return-1}function ph(n,e){if(!n||!n.getBoundingClientRect)return rd();var t=n,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=pr(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return rd();if(r||e)return t;r=!0}}while(t=t.parentNode);return rd()}function MZ(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function p_(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var Zg;function LP(n,e){return function(){if(!Zg){var t=arguments,r=this;t.length===1?n.call(r,t[0]):n.apply(r,t),Zg=setTimeout(function(){Zg=void 0},e)}}}function kZ(){clearTimeout(Zg),Zg=void 0}function SP(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function Q2(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function e3(n,e){pr(n,"position","absolute"),pr(n,"top",e.top),pr(n,"left",e.left),pr(n,"width",e.width),pr(n,"height",e.height)}function g_(n){pr(n,"position",""),pr(n,"top",""),pr(n,"left",""),pr(n,"width",""),pr(n,"height","")}var dl="Sortable"+new Date().getTime();function AZ(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(pr(i,"display")==="none"||i===Br.ghost)){n.push({target:i,rect:Qs(i)});var s=od({},n[n.length-1].rect);if(i.thisAnimationDuration){var o=mf(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){n.push(r)},removeAnimationState:function(r){n.splice(PZ(n,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;n.forEach(function(a){var l=0,u=a.target,h=u.fromRect,p=Qs(u),v=u.prevFromRect,m=u.prevToRect,S=a.rect,E=mf(u,!0);E&&(p.top-=E.f,p.left-=E.e),u.toRect=p,u.thisAnimationDuration&&p_(v,p)&&!p_(h,p)&&(S.top-p.top)/(S.left-p.left)===(h.top-p.top)/(h.left-p.left)&&(l=DZ(S,v,m,i.options)),p_(p,h)||(u.prevFromRect=h,u.prevToRect=p,l||(l=i.options.animation),i.animate(u,S,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),n=[]},animate:function(r,i,s,o){if(o){pr(r,"transition",""),pr(r,"transform","");var a=mf(this.el),l=a&&a.a,u=a&&a.d,h=(i.left-s.left)/(l||1),p=(i.top-s.top)/(u||1);r.animatingX=!!h,r.animatingY=!!p,pr(r,"transform","translate3d("+h+"px,"+p+"px,0)"),this.forRepaintDummy=TZ(r),pr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),pr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){pr(r,"transition",""),pr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function TZ(n){return n.offsetWidth}function DZ(n,e,t,r){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var Jf=[],m_={initializeByDefault:!0},Fm={mount:function(e){for(var t in m_)m_.hasOwnProperty(t)&&!(t in e)&&(e[t]=m_[t]);Jf.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Jf.push(e)},pluginEvent:function(e,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Jf.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](od({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](od({sortable:t},r)))})},initializePlugins:function(e,t,r,i){Jf.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[l]=u,Xu(r,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var r={};return Jf.forEach(function(i){typeof i.eventProperties=="function"&&Xu(r,i.eventProperties.call(t[i.pluginName],e))}),r},modifyOption:function(e,t,r){var i;return Jf.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],r))}),i}};function Eg(n){var e=n.sortable,t=n.rootEl,r=n.name,i=n.targetEl,s=n.cloneEl,o=n.toEl,a=n.fromEl,l=n.oldIndex,u=n.newIndex,h=n.oldDraggableIndex,p=n.newDraggableIndex,v=n.originalEvent,m=n.putSortable,S=n.extraEventProperties;if(e=e||t&&t[dl],!!e){var E,k=e.options,T="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Vd&&!Bm?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||t,E.from=a||t,E.item=i||t,E.clone=s,E.oldIndex=l,E.newIndex=u,E.oldDraggableIndex=h,E.newDraggableIndex=p,E.originalEvent=v,E.pullMode=m?m.lastPutMode:void 0;var A=od(od({},S),Fm.getEventProperties(r,e));for(var R in A)E[R]=A[R];t&&t.dispatchEvent(E),k[T]&&k[T].call(e,E)}}var IZ=["evt"],Yl=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=yZ(r,IZ);Fm.pluginEvent.bind(Br)(e,t,od({dragEl:Un,parentEl:So,ghostEl:ri,rootEl:Js,nextEl:nf,lastDownEl:fv,cloneEl:Co,cloneHidden:hh,dragStarted:Pg,putSortable:za,activeSortable:Br.active,originalEvent:i,oldIndex:pp,oldDraggableIndex:Xg,newIndex:Lu,newDraggableIndex:dh,hideGhostForTarget:MP,unhideGhostForTarget:kP,cloneNowHidden:function(){hh=!0},cloneNowShown:function(){hh=!1},dispatchSortableEvent:function(a){Cl({sortable:t,name:a,originalEvent:i})}},s))};function Cl(n){Eg(od({putSortable:za,cloneEl:Co,targetEl:Un,rootEl:Js,oldIndex:pp,oldDraggableIndex:Xg,newIndex:Lu,newDraggableIndex:dh},n))}var Un,So,ri,Js,nf,fv,Co,hh,pp,Lu,Xg,dh,k0,za,dp=!1,ey=!1,ty=[],Kh,pc,v_,y_,t3,n3,Pg,Qf,Jg,Qg=!1,A0=!1,pv,sl,__=[],zb=!1,ny=[],Ky=typeof document<"u",T0=bP,r3=Bm||Vd?"cssFloat":"float",OZ=Ky&&!CZ&&!bP&&"draggable"in document.createElement("div"),CP=function(){if(Ky){if(Vd)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),EP=function(e,t){var r=pr(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Op(e,0,t),o=Op(e,1,t),a=s&&pr(s),l=o&&pr(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Qs(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Qs(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[r3]==="none"||o&&r[r3]==="none"&&u+h>i)?"vertical":"horizontal"},NZ=function(e,t,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?t.left:t.top,l=r?t.right:t.bottom,u=r?t.width:t.height;return i===a||s===l||i+o/2===a+u/2},RZ=function(e,t){var r;return ty.some(function(i){var s=i[dl].options.emptyInsertThreshold;if(!(!s||J2(i))){var o=Qs(i),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return r=i}}),r},PP=function(e){function t(s,o){return function(a,l,u,h){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,u,h),o)(a,l,u,h);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||hv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},MP=function(){!CP&&ri&&pr(ri,"display","none")},kP=function(){!CP&&ri&&pr(ri,"display","")};Ky&&document.addEventListener("click",function(n){if(ey)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ey=!1,!1},!0);var Zh=function(e){if(Un){e=e.touches?e.touches[0]:e;var t=RZ(e.clientX,e.clientY);if(t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[dl]._onDragOver(r)}}},BZ=function(e){Un&&Un.parentNode[dl]._isOutsideThisEl(e.target)};function Br(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Xu({},e),n[dl]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return EP(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Br.supportPointer!==!1&&"PointerEvent"in window&&!Kg,emptyInsertThreshold:5};Fm.initializePlugins(this,n,t);for(var r in t)!(r in e)&&(e[r]=t[r]);PP(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:OZ,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Pi(n,"pointerdown",this._onTapStart):(Pi(n,"mousedown",this._onTapStart),Pi(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(Pi(n,"dragover",this),Pi(n,"dragenter",this)),ty.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Xu(this,AZ())}Br.prototype={constructor:Br,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Qf=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,Un):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=i.filter;if(GZ(r),!Un&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Kg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=_c(l,i.draggable,r,!1),!(l&&l.animated)&&fv!==l)){if(pp=Po(l),Xg=Po(l,i.draggable),typeof h=="function"){if(h.call(this,e,l,this)){Cl({sortable:t,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),Yl("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(p){if(p=_c(u,p.trim(),r,!1),p)return Cl({sortable:t,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),Yl("filter",t,{evt:e}),!0}),h)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!_c(u,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Un&&r.parentNode===s){var u=Qs(r);if(Js=s,Un=r,So=Un.parentNode,nf=Un.nextSibling,fv=r,k0=o.group,Br.dragged=Un,Kh={target:Un,clientX:(t||e).clientX,clientY:(t||e).clientY},t3=Kh.clientX-u.left,n3=Kh.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Un.style["will-change"]="all",l=function(){if(Yl("delayEnded",i,{evt:e}),Br.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!Z5&&i.nativeDraggable&&(Un.draggable=!0),i._triggerDragStart(e,t),Cl({sortable:i,name:"choose",originalEvent:e}),go(Un,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){xP(Un,h.trim(),b_)}),Pi(a,"dragover",Zh),Pi(a,"mousemove",Zh),Pi(a,"touchmove",Zh),Pi(a,"mouseup",i._onDrop),Pi(a,"touchend",i._onDrop),Pi(a,"touchcancel",i._onDrop),Z5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Un.draggable=!0),Yl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Bm||Vd))){if(Br.eventCanceled){this._onDrop();return}Pi(a,"mouseup",i._disableDelayedDrag),Pi(a,"touchend",i._disableDelayedDrag),Pi(a,"touchcancel",i._disableDelayedDrag),Pi(a,"mousemove",i._delayedDragTouchMoveHandler),Pi(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Pi(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Un&&b_(Un),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;yi(e,"mouseup",this._disableDelayedDrag),yi(e,"touchend",this._disableDelayedDrag),yi(e,"touchcancel",this._disableDelayedDrag),yi(e,"mousemove",this._delayedDragTouchMoveHandler),yi(e,"touchmove",this._delayedDragTouchMoveHandler),yi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Pi(document,"pointermove",this._onTouchMove):t?Pi(document,"touchmove",this._onTouchMove):Pi(document,"mousemove",this._onTouchMove):(Pi(Un,"dragend",this),Pi(Js,"dragstart",this._onDragStart));try{document.selection?gv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(dp=!1,Js&&Un){Yl("dragStarted",this,{evt:t}),this.nativeDraggable&&Pi(document,"dragover",BZ);var r=this.options;!e&&go(Un,r.dragClass,!1),go(Un,r.ghostClass,!0),Br.active=this,e&&this._appendGhost(),Cl({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(pc){this._lastX=pc.clientX,this._lastY=pc.clientY,MP();for(var e=document.elementFromPoint(pc.clientX,pc.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(pc.clientX,pc.clientY),e!==t);)t=e;if(Un.parentNode[dl]._isOutsideThisEl(e),t)do{if(t[dl]){var r=void 0;if(r=t[dl]._onDragOver({clientX:pc.clientX,clientY:pc.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);kP()}},_onTouchMove:function(e){if(Kh){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=ri&&mf(ri,!0),a=ri&&o&&o.a,l=ri&&o&&o.d,u=T0&&sl&&Q5(sl),h=(s.clientX-Kh.clientX+i.x)/(a||1)+(u?u[0]-__[0]:0)/(a||1),p=(s.clientY-Kh.clientY+i.y)/(l||1)+(u?u[1]-__[1]:0)/(l||1);if(!Br.active&&!dp){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ri){o?(o.e+=h-(v_||0),o.f+=p-(y_||0)):o={a:1,b:0,c:0,d:1,e:h,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");pr(ri,"webkitTransform",v),pr(ri,"mozTransform",v),pr(ri,"msTransform",v),pr(ri,"transform",v),v_=h,y_=p,pc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ri){var e=this.options.fallbackOnBody?document.body:Js,t=Qs(Un,!0,T0,!0,e),r=this.options;if(T0){for(sl=e;pr(sl,"position")==="static"&&pr(sl,"transform")==="none"&&sl!==document;)sl=sl.parentNode;sl!==document.body&&sl!==document.documentElement?(sl===document&&(sl=rd()),t.top+=sl.scrollTop,t.left+=sl.scrollLeft):sl=rd(),__=Q5(sl)}ri=Un.cloneNode(!0),go(ri,r.ghostClass,!1),go(ri,r.fallbackClass,!0),go(ri,r.dragClass,!0),pr(ri,"transition",""),pr(ri,"transform",""),pr(ri,"box-sizing","border-box"),pr(ri,"margin",0),pr(ri,"top",t.top),pr(ri,"left",t.left),pr(ri,"width",t.width),pr(ri,"height",t.height),pr(ri,"opacity","0.8"),pr(ri,"position",T0?"absolute":"fixed"),pr(ri,"zIndex","100000"),pr(ri,"pointerEvents","none"),Br.ghost=ri,e.appendChild(ri),pr(ri,"transform-origin",t3/parseInt(ri.style.width)*100+"% "+n3/parseInt(ri.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,i=e.dataTransfer,s=r.options;if(Yl("dragStart",this,{evt:e}),Br.eventCanceled){this._onDrop();return}Yl("setupClone",this),Br.eventCanceled||(Co=Q2(Un),Co.draggable=!1,Co.style["will-change"]="",this._hideClone(),go(Co,this.options.chosenClass,!1),Br.clone=Co),r.cloneId=gv(function(){Yl("clone",r),!Br.eventCanceled&&(r.options.removeCloneOnHide||Js.insertBefore(Co,Un),r._hideClone(),Cl({sortable:r,name:"clone"}))}),!t&&go(Un,s.dragClass,!0),t?(ey=!0,r._loopId=setInterval(r._emulateDragOver,50)):(yi(document,"mouseup",r._onDrop),yi(document,"touchend",r._onDrop),yi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Un)),Pi(document,"drop",r),pr(Un,"transform","translateZ(0)")),dp=!0,r._dragStartId=gv(r._dragStarted.bind(r,t,e)),Pi(document,"selectstart",r),Pg=!0,Kg&&pr(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,i,s,o,a=this.options,l=a.group,u=Br.active,h=k0===l,p=a.sort,v=za||u,m,S=this,E=!1;if(zb)return;function k(X,_e){Yl(X,S,od({evt:e,isOwner:h,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:A,onMove:function(We,ae){return D0(Js,t,Un,i,We,Qs(We),e,ae)},changed:R},_e))}function T(){k("dragOverAnimationCapture"),S.captureAnimationState(),S!==v&&v.captureAnimationState()}function A(X){return k("dragOverCompleted",{insertion:X}),X&&(h?u._hideClone():u._showClone(S),S!==v&&(go(Un,za?za.options.ghostClass:u.options.ghostClass,!1),go(Un,a.ghostClass,!0)),za!==S&&S!==Br.active?za=S:S===Br.active&&za&&(za=null),v===S&&(S._ignoreWhileAnimating=r),S.animateAll(function(){k("dragOverAnimationComplete"),S._ignoreWhileAnimating=null}),S!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===Un&&!Un.animated||r===t&&!r.animated)&&(Qf=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(Un.parentNode[dl]._isOutsideThisEl(e.target),!X&&Zh(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function R(){Lu=Po(Un),dh=Po(Un,a.draggable),Cl({sortable:S,name:"change",toEl:t,newIndex:Lu,newDraggableIndex:dh,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=_c(r,a.draggable,t,!0),k("dragOver"),Br.eventCanceled)return E;if(Un.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||S._ignoreWhileAnimating===r)return A(!1);if(ey=!1,u&&!a.disabled&&(h?p||(o=So!==Js):za===this||(this.lastPutMode=k0.checkPull(this,u,Un,e))&&l.checkPut(this,u,Un,e))){if(m=this._getDirection(e,r)==="vertical",i=Qs(Un),k("dragOverValid"),Br.eventCanceled)return E;if(o)return So=Js,T(),this._hideClone(),k("revert"),Br.eventCanceled||(nf?Js.insertBefore(Un,nf):Js.appendChild(Un)),A(!0);var G=J2(t,a.draggable);if(!G||$Z(e,m,this)&&!G.animated){if(G===Un)return A(!1);if(G&&t===e.target&&(r=G),r&&(s=Qs(r)),D0(Js,t,Un,i,r,s,e,!!r)!==!1)return T(),t.appendChild(Un),So=t,R(),A(!0)}else if(G&&zZ(e,m,this)){var ee=Op(t,0,a,!0);if(ee===Un)return A(!1);if(r=ee,s=Qs(r),D0(Js,t,Un,i,r,s,e,!1)!==!1)return T(),t.insertBefore(Un,ee),So=t,R(),A(!0)}else if(r.parentNode===t){s=Qs(r);var pe=0,ge,O=Un.parentNode!==t,j=!NZ(Un.animated&&Un.toRect||i,r.animated&&r.toRect||s,m),Y=m?"top":"left",V=J5(r,"top","top")||J5(Un,"top","top"),N=V?V.scrollTop:void 0;Qf!==r&&(ge=s[Y],Qg=!1,A0=!j&&a.invertSwap||O),pe=UZ(e,r,s,m,j?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,A0,Qf===r);var q;if(pe!==0){var $=Po(Un);do $-=pe,q=So.children[$];while(q&&(pr(q,"display")==="none"||q===ri))}if(pe===0||q===r)return A(!1);Qf=r,Jg=pe;var F=r.nextElementSibling,B=!1;B=pe===1;var Q=D0(Js,t,Un,i,r,s,e,B);if(Q!==!1)return(Q===1||Q===-1)&&(B=Q===1),zb=!0,setTimeout(jZ,30),T(),B&&!F?t.appendChild(Un):r.parentNode.insertBefore(Un,B?F:r),V&&SP(V,0,N-V.scrollTop),So=Un.parentNode,ge!==void 0&&!A0&&(pv=Math.abs(ge-Qs(r)[Y])),R(),A(!0)}if(t.contains(Un))return A(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){yi(document,"mousemove",this._onTouchMove),yi(document,"touchmove",this._onTouchMove),yi(document,"pointermove",this._onTouchMove),yi(document,"dragover",Zh),yi(document,"mousemove",Zh),yi(document,"touchmove",Zh)},_offUpEvents:function(){var e=this.el.ownerDocument;yi(e,"mouseup",this._onDrop),yi(e,"touchend",this._onDrop),yi(e,"pointerup",this._onDrop),yi(e,"touchcancel",this._onDrop),yi(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(Lu=Po(Un),dh=Po(Un,r.draggable),Yl("drop",this,{evt:e}),So=Un&&Un.parentNode,Lu=Po(Un),dh=Po(Un,r.draggable),Br.eventCanceled){this._nulling();return}dp=!1,A0=!1,Qg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),$b(this.cloneId),$b(this._dragStartId),this.nativeDraggable&&(yi(document,"drop",this),yi(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Kg&&pr(document.body,"user-select",""),pr(Un,"transform",""),e&&(Pg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ri&&ri.parentNode&&ri.parentNode.removeChild(ri),(Js===So||za&&za.lastPutMode!=="clone")&&Co&&Co.parentNode&&Co.parentNode.removeChild(Co),Un&&(this.nativeDraggable&&yi(Un,"dragend",this),b_(Un),Un.style["will-change"]="",Pg&&!dp&&go(Un,za?za.options.ghostClass:this.options.ghostClass,!1),go(Un,this.options.chosenClass,!1),Cl({sortable:this,name:"unchoose",toEl:So,newIndex:null,newDraggableIndex:null,originalEvent:e}),Js!==So?(Lu>=0&&(Cl({rootEl:So,name:"add",toEl:So,fromEl:Js,originalEvent:e}),Cl({sortable:this,name:"remove",toEl:So,originalEvent:e}),Cl({rootEl:So,name:"sort",toEl:So,fromEl:Js,originalEvent:e}),Cl({sortable:this,name:"sort",toEl:So,originalEvent:e})),za&&za.save()):Lu!==pp&&Lu>=0&&(Cl({sortable:this,name:"update",toEl:So,originalEvent:e}),Cl({sortable:this,name:"sort",toEl:So,originalEvent:e})),Br.active&&((Lu==null||Lu===-1)&&(Lu=pp,dh=Xg),Cl({sortable:this,name:"end",toEl:So,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Yl("nulling",this),Js=Un=So=ri=nf=Co=fv=hh=Kh=pc=Pg=Lu=dh=pp=Xg=Qf=Jg=za=k0=Br.dragged=Br.ghost=Br.clone=Br.active=null,ny.forEach(function(e){e.checked=!0}),ny.length=v_=y_=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Un&&(this._onDragOver(e),FZ(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)t=r[i],_c(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||HZ(t));return e},sort:function(e,t){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];_c(a,this.options.draggable,i,!1)&&(r[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return _c(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var i=Fm.modifyOption(this,e,t);typeof i<"u"?r[e]=i:r[e]=t,e==="group"&&PP(r)},destroy:function(){Yl("destroy",this);var e=this.el;e[dl]=null,yi(e,"mousedown",this._onTapStart),yi(e,"touchstart",this._onTapStart),yi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(yi(e,"dragover",this),yi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ty.splice(ty.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!hh){if(Yl("hideClone",this),Br.eventCanceled)return;pr(Co,"display","none"),this.options.removeCloneOnHide&&Co.parentNode&&Co.parentNode.removeChild(Co),hh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(hh){if(Yl("showClone",this),Br.eventCanceled)return;Un.parentNode==Js&&!this.options.group.revertClone?Js.insertBefore(Co,Un):nf?Js.insertBefore(Co,nf):Js.appendChild(Co),this.options.group.revertClone&&this.animate(Un,Co),pr(Co,"display",""),hh=!1}}};function FZ(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function D0(n,e,t,r,i,s,o,a){var l,u=n[dl],h=u.options.onMove,p;return window.CustomEvent&&!Vd&&!Bm?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Qs(e),l.willInsertAfter=a,l.originalEvent=o,n.dispatchEvent(l),h&&(p=h.call(u,l,o)),p}function b_(n){n.draggable=!1}function jZ(){zb=!1}function zZ(n,e,t){var r=Qs(Op(t.el,0,t.options,!0)),i=10;return e?n.clientX<r.left-i||n.clientY<r.top&&n.clientX<r.right:n.clientY<r.top-i||n.clientY<r.bottom&&n.clientX<r.left}function $Z(n,e,t){var r=Qs(J2(t.el,t.options.draggable)),i=10;return e?n.clientX>r.right+i||n.clientX<=r.right&&n.clientY>r.bottom&&n.clientX>=r.left:n.clientX>r.right&&n.clientY>r.top||n.clientX<=r.right&&n.clientY>r.bottom+i}function UZ(n,e,t,r,i,s,o,a){var l=r?n.clientY:n.clientX,u=r?t.height:t.width,h=r?t.top:t.left,p=r?t.bottom:t.right,v=!1;if(!o){if(a&&pv<u*i){if(!Qg&&(Jg===1?l>h+u*s/2:l<p-u*s/2)&&(Qg=!0),Qg)v=!0;else if(Jg===1?l<h+pv:l>p-pv)return-Jg}else if(l>h+u*(1-i)/2&&l<p-u*(1-i)/2)return VZ(e)}return v=v||o,v&&(l<h+u*s/2||l>p-u*s/2)?l>h+u/2?1:-1:0}function VZ(n){return Po(Un)<Po(n)?1:-1}function HZ(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function GZ(n){ny.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&ny.push(r)}}function gv(n){return setTimeout(n,0)}function $b(n){return clearTimeout(n)}Ky&&Pi(document,"touchmove",function(n){(Br.active||dp)&&n.cancelable&&n.preventDefault()});Br.utils={on:Pi,off:yi,css:pr,find:xP,is:function(e,t){return!!_c(e,t,e,!1)},extend:MZ,throttle:LP,closest:_c,toggleClass:go,clone:Q2,index:Po,nextTick:gv,cancelNextTick:$b,detectDirection:EP,getChild:Op};Br.get=function(n){return n[dl]};Br.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Br.utils=od(od({},Br.utils),r.utils)),Fm.mount(r)})};Br.create=function(n,e){return new Br(n,e)};Br.version=SZ;var ta=[],Mg,Ub,Vb=!1,w_,x_,ry,kg;function WZ(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?Pi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Pi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Pi(document,"touchmove",this._handleFallbackAutoScroll):Pi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?yi(document,"dragover",this._handleAutoScroll):(yi(document,"pointermove",this._handleFallbackAutoScroll),yi(document,"touchmove",this._handleFallbackAutoScroll),yi(document,"mousemove",this._handleFallbackAutoScroll)),i3(),mv(),kZ()},nulling:function(){ry=Ub=Mg=Vb=kg=w_=x_=null,ta.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(ry=t,r||this.options.forceAutoScrollFallback||Bm||Vd||Kg){L_(t,this.options,a,r);var l=ph(a,!0);Vb&&(!kg||s!==w_||o!==x_)&&(kg&&i3(),kg=setInterval(function(){var u=ph(document.elementFromPoint(s,o),!0);u!==l&&(l=u,mv()),L_(t,i.options,u,r)},10),w_=s,x_=o)}else{if(!this.options.bubbleScroll||ph(a,!0)===rd()){mv();return}L_(t,this.options,ph(a,!1),!1)}}},Xu(n,{pluginName:"scroll",initializeByDefault:!0})}function mv(){ta.forEach(function(n){clearInterval(n.pid)}),ta=[]}function i3(){clearInterval(kg)}var L_=LP(function(n,e,t,r){if(e.scroll){var i=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=rd(),u=!1,h;Ub!==t&&(Ub=t,mv(),Mg=e.scroll,h=e.scrollFn,Mg===!0&&(Mg=ph(t,!0)));var p=0,v=Mg;do{var m=v,S=Qs(m),E=S.top,k=S.bottom,T=S.left,A=S.right,R=S.width,G=S.height,ee=void 0,pe=void 0,ge=m.scrollWidth,O=m.scrollHeight,j=pr(m),Y=m.scrollLeft,V=m.scrollTop;m===l?(ee=R<ge&&(j.overflowX==="auto"||j.overflowX==="scroll"||j.overflowX==="visible"),pe=G<O&&(j.overflowY==="auto"||j.overflowY==="scroll"||j.overflowY==="visible")):(ee=R<ge&&(j.overflowX==="auto"||j.overflowX==="scroll"),pe=G<O&&(j.overflowY==="auto"||j.overflowY==="scroll"));var N=ee&&(Math.abs(A-i)<=o&&Y+R<ge)-(Math.abs(T-i)<=o&&!!Y),q=pe&&(Math.abs(k-s)<=o&&V+G<O)-(Math.abs(E-s)<=o&&!!V);if(!ta[p])for(var $=0;$<=p;$++)ta[$]||(ta[$]={});(ta[p].vx!=N||ta[p].vy!=q||ta[p].el!==m)&&(ta[p].el=m,ta[p].vx=N,ta[p].vy=q,clearInterval(ta[p].pid),(N!=0||q!=0)&&(u=!0,ta[p].pid=setInterval((function(){r&&this.layer===0&&Br.active._onTouchMove(ry);var F=ta[this.layer].vy?ta[this.layer].vy*a:0,B=ta[this.layer].vx?ta[this.layer].vx*a:0;typeof h=="function"&&h.call(Br.dragged.parentNode[dl],B,F,n,ry,ta[this.layer].el)!=="continue"||SP(ta[this.layer].el,B,F)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=ph(v,!1)));Vb=u}},30),AP=function(e){var t=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var u=r||s;a();var h=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,p=document.elementFromPoint(h.clientX,h.clientY);l(),u&&!u.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function ew(){}ew.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Op(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:AP};Xu(ew,{pluginName:"revertOnSpill"});function tw(){}tw.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:AP};Xu(tw,{pluginName:"removeOnSpill"});var Vu;function qZ(){function n(){this.defaults={swapClass:"sortable-swap-highlight"}}return n.prototype={dragStart:function(t){var r=t.dragEl;Vu=r},dragOverValid:function(t){var r=t.completed,i=t.target,s=t.onMove,o=t.activeSortable,a=t.changed,l=t.cancel;if(o.options.swap){var u=this.sortable.el,h=this.options;if(i&&i!==u){var p=Vu;s(i)!==!1?(go(i,h.swapClass,!0),Vu=i):Vu=null,p&&p!==Vu&&go(p,h.swapClass,!1)}a(),r(!0),l()}},drop:function(t){var r=t.activeSortable,i=t.putSortable,s=t.dragEl,o=i||this.sortable,a=this.options;Vu&&go(Vu,a.swapClass,!1),Vu&&(a.swap||i&&i.options.swap)&&s!==Vu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),YZ(s,Vu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){Vu=null}},Xu(n,{pluginName:"swap",eventProperties:function(){return{swapItem:Vu}}})}function YZ(n,e){var t=n.parentNode,r=e.parentNode,i,s;!t||!r||t.isEqualNode(e)||r.isEqualNode(n)||(i=Po(n),s=Po(e),t.isEqualNode(r)&&i<s&&s++,t.insertBefore(e,t.children[i]),r.insertBefore(n,r.children[s]))}var Kr=[],xu=[],ug,gc,cg=!1,Kl=!1,ep=!1,Ds,dg,I0;function KZ(){function n(e){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));e.options.supportPointer?Pi(document,"pointerup",this._deselectMultiDrag):(Pi(document,"mouseup",this._deselectMultiDrag),Pi(document,"touchend",this._deselectMultiDrag)),Pi(document,"keydown",this._checkKeyDown),Pi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Kr.length&&gc===e?Kr.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return n.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;Ds=r},delayEnded:function(){this.isMultiDrag=~Kr.indexOf(Ds)},setupClone:function(t){var r=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var s=0;s<Kr.length;s++)xu.push(Q2(Kr[s])),xu[s].sortableIndex=Kr[s].sortableIndex,xu[s].draggable=!1,xu[s].style["will-change"]="",go(xu[s],this.options.selectedClass,!1),Kr[s]===Ds&&go(xu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(t){var r=t.sortable,i=t.rootEl,s=t.dispatchSortableEvent,o=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Kr.length&&gc===r&&(s3(!0,i),s("clone"),o()))},showClone:function(t){var r=t.cloneNowShown,i=t.rootEl,s=t.cancel;this.isMultiDrag&&(s3(!1,i),xu.forEach(function(o){pr(o,"display","")}),r(),I0=!1,s())},hideClone:function(t){var r=this;t.sortable;var i=t.cloneNowHidden,s=t.cancel;this.isMultiDrag&&(xu.forEach(function(o){pr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),I0=!0,s())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&gc&&gc.multiDrag._deselectMultiDrag(),Kr.forEach(function(r){r.sortableIndex=Po(r)}),Kr=Kr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),ep=!0},dragStarted:function(t){var r=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Kr.forEach(function(o){o!==Ds&&pr(o,"position","absolute")});var s=Qs(Ds,!1,!0,!0);Kr.forEach(function(o){o!==Ds&&e3(o,s)}),Kl=!0,cg=!0}i.animateAll(function(){Kl=!1,cg=!1,r.options.animation&&Kr.forEach(function(o){g_(o)}),r.options.sort&&O0()})}},dragOver:function(t){var r=t.target,i=t.completed,s=t.cancel;Kl&&~Kr.indexOf(r)&&(i(!1),s())},revert:function(t){var r=t.fromSortable,i=t.rootEl,s=t.sortable,o=t.dragRect;Kr.length>1&&(Kr.forEach(function(a){s.addAnimationState({target:a,rect:Kl?Qs(a):o}),g_(a),a.fromRect=o,r.removeAnimationState(a)}),Kl=!1,ZZ(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var r=t.sortable,i=t.isOwner,s=t.insertion,o=t.activeSortable,a=t.parentEl,l=t.putSortable,u=this.options;if(s){if(i&&o._hideClone(),cg=!1,u.animation&&Kr.length>1&&(Kl||!i&&!o.options.sort&&!l)){var h=Qs(Ds,!1,!0,!0);Kr.forEach(function(v){v!==Ds&&(e3(v,h),a.appendChild(v))}),Kl=!0}if(!i)if(Kl||O0(),Kr.length>1){var p=I0;o._showClone(r),o.options.animation&&!I0&&p&&xu.forEach(function(v){o.addAnimationState({target:v,rect:dg}),v.fromRect=dg,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,i=t.isOwner,s=t.activeSortable;if(Kr.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){dg=Xu({},r);var o=mf(Ds,!0);dg.top-=o.f,dg.left-=o.e}},dragOverAnimationComplete:function(){Kl&&(Kl=!1,O0())},drop:function(t){var r=t.originalEvent,i=t.rootEl,s=t.parentEl,o=t.sortable,a=t.dispatchSortableEvent,l=t.oldIndex,u=t.putSortable,h=u||this.sortable;if(r){var p=this.options,v=s.children;if(!ep)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),go(Ds,p.selectedClass,!~Kr.indexOf(Ds)),~Kr.indexOf(Ds))Kr.splice(Kr.indexOf(Ds),1),ug=null,Eg({sortable:o,rootEl:i,name:"deselect",targetEl:Ds});else{if(Kr.push(Ds),Eg({sortable:o,rootEl:i,name:"select",targetEl:Ds}),r.shiftKey&&ug&&o.el.contains(ug)){var m=Po(ug),S=Po(Ds);if(~m&&~S&&m!==S){var E,k;for(S>m?(k=m,E=S):(k=S,E=m+1);k<E;k++)~Kr.indexOf(v[k])||(go(v[k],p.selectedClass,!0),Kr.push(v[k]),Eg({sortable:o,rootEl:i,name:"select",targetEl:v[k]}))}}else ug=Ds;gc=h}if(ep&&this.isMultiDrag){if(Kl=!1,(s[dl].options.sort||s!==i)&&Kr.length>1){var T=Qs(Ds),A=Po(Ds,":not(."+this.options.selectedClass+")");if(!cg&&p.animation&&(Ds.thisAnimationDuration=null),h.captureAnimationState(),!cg&&(p.animation&&(Ds.fromRect=T,Kr.forEach(function(G){if(G.thisAnimationDuration=null,G!==Ds){var ee=Kl?Qs(G):T;G.fromRect=ee,h.addAnimationState({target:G,rect:ee})}})),O0(),Kr.forEach(function(G){v[A]?s.insertBefore(G,v[A]):s.appendChild(G),A++}),l===Po(Ds))){var R=!1;Kr.forEach(function(G){if(G.sortableIndex!==Po(G)){R=!0;return}}),R&&a("update")}Kr.forEach(function(G){g_(G)}),h.animateAll()}gc=h}(i===s||u&&u.lastPutMode!=="clone")&&xu.forEach(function(G){G.parentNode&&G.parentNode.removeChild(G)})}},nullingGlobal:function(){this.isMultiDrag=ep=!1,xu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),yi(document,"pointerup",this._deselectMultiDrag),yi(document,"mouseup",this._deselectMultiDrag),yi(document,"touchend",this._deselectMultiDrag),yi(document,"keydown",this._checkKeyDown),yi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof ep<"u"&&ep)&&gc===this.sortable&&!(t&&_c(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;Kr.length;){var r=Kr[0];go(r,this.options.selectedClass,!1),Kr.shift(),Eg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Xu(n,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[dl];!r||!r.options.multiDrag||~Kr.indexOf(t)||(gc&&gc!==r&&(gc.multiDrag._deselectMultiDrag(),gc=r),go(t,r.options.selectedClass,!0),Kr.push(t))},deselect:function(t){var r=t.parentNode[dl],i=Kr.indexOf(t);!r||!r.options.multiDrag||!~i||(go(t,r.options.selectedClass,!1),Kr.splice(i,1))}},eventProperties:function(){var t=this,r=[],i=[];return Kr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Kl&&s!==Ds?o=-1:Kl?o=Po(s,":not(."+t.options.selectedClass+")"):o=Po(s),i.push({multiDragElement:s,index:o})}),{items:_Z(Kr),clones:[].concat(xu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function ZZ(n,e){Kr.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function s3(n,e){xu.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function O0(){Kr.forEach(function(n){n!==Ds&&n.parentNode&&n.parentNode.removeChild(n)})}Br.mount(new WZ);Br.mount(tw,ew);const XZ=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:KZ,Sortable:Br,Swap:qZ,default:Br},Symbol.toStringTag,{value:"Module"})),JZ=kE(XZ);(function(n,e){(function(r,i){n.exports=i(gZ,JZ)})(typeof self<"u"?self:Ca,function(t,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,u){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:u})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var u=Object.create(null);if(o.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var h in a)o.d(u,h,(function(p){return a[p]}).bind(null,h));return u},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),u={};u[l]="z",i.exports=String(u)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,u,h){if(a(l),u===void 0)return l;switch(h){case 0:return function(){return l.call(u)};case 1:return function(p){return l.call(u,p)};case 2:return function(p,v){return l.call(u,p,v)};case 3:return function(p,v,m){return l.call(u,p,v,m)}}return function(){return l.apply(u,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,u={}.toString,h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return h.slice()}};i.exports.f=function(m){return h&&u.call(m)=="[object Window]"?p(m):l(a(m))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),u=o("5c6c"),h=o("fc6a"),p=o("c04e"),v=o("5135"),m=o("0cfb"),S=Object.getOwnPropertyDescriptor;s.f=a?S:function(k,T){if(k=h(k),T=p(T,!0),m)try{return S(k,T)}catch{}if(v(k,T))return u(!l.f.call(k,T),k[T])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),u=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,u=o("a640"),h=o("ae40"),p=u("reduce"),v=h("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(S){return l(this,S,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(u,h){var p=u.exec;if(typeof p=="function"){var v=p.call(u,h);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,h)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),u=o("17c2"),h=o("9112");for(var p in l){var v=a[p],m=v&&v.prototype;if(m&&m.forEach!==u)try{h(m,"forEach",u)}catch{m.forEach=u}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),u=o("ae40"),h=l("forEach"),p=u("forEach");i.exports=!h||!p?function(m){return a(this,m,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),u=!1;try{var h=0,p={next:function(){return{done:!!h++}},return:function(){u=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,m){if(!m&&!u)return!1;var S=!1;try{var E={};E[l]=function(){return{next:function(){return{done:S=!0}}}},v(E)}catch{}return S}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),u=o("2d00"),h=l("species");i.exports=function(p){return u>=51||!a(function(){var v=[],m=v.constructor={};return m[h]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,u=Math.min;i.exports=function(h,p){var v=a(h);return v<0?l(v+p,0):u(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,u=o("9112"),h=o("6eeb"),p=o("ce4e"),v=o("e893"),m=o("94ca");i.exports=function(S,E){var k=S.target,T=S.global,A=S.stat,R,G,ee,pe,ge,O;if(T?G=a:A?G=a[k]||p(k,{}):G=(a[k]||{}).prototype,G)for(ee in E){if(ge=E[ee],S.noTargetGet?(O=l(G,ee),pe=O&&O.value):pe=G[ee],R=m(T?ee:k+(A?".":"#")+ee,S.forced),!R&&pe!==void 0){if(typeof ge==typeof pe)continue;v(ge,pe)}(S.sham||pe&&pe.sham)&&u(ge,"sham",!0),h(G,ee,ge,S)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),u=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,u)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),u=o("d039"),h=o("ad6d"),p="toString",v=RegExp.prototype,m=v[p],S=u(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),E=m.name!=p;(S||E)&&a(RegExp.prototype,p,function(){var T=l(this),A=String(T.source),R=T.flags,G=String(R===void 0&&T instanceof RegExp&&!("flags"in v)?h.call(T):R);return"/"+A+"/"+G},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,u=o("50c4"),h=o("5a34"),p=o("1d80"),v=o("ab13"),m=o("c430"),S="".startsWith,E=Math.min,k=v("startsWith"),T=!m&&!k&&!!function(){var A=l(String.prototype,"startsWith");return A&&!A.writable}();a({target:"String",proto:!0,forced:!T&&!k},{startsWith:function(R){var G=String(p(this));h(R);var ee=u(E(arguments.length>1?arguments[1]:void 0,G.length)),pe=String(R);return S?S.call(G,pe,ee):G.slice(ee,ee+pe.length)===pe}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),u=a.process,h=u&&u.versions,p=h&&h.v8,v,m;p?(v=p.split("."),m=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(m=v[1]))),i.exports=m&&+m},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),u=o("b622"),h=u("iterator");i.exports=function(p){if(p!=null)return p[h]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),u=o("825a"),h=o("df75");i.exports=a?Object.defineProperties:function(v,m){u(v);for(var S=h(m),E=S.length,k=0,T;E>k;)l.f(v,T=S[k++],m[T]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),u=o("7dd0"),h="String Iterator",p=l.set,v=l.getterFor(h);u(String,"String",function(m){p(this,{type:h,string:String(m),index:0})},function(){var S=v(this),E=S.string,k=S.index,T;return k>=E.length?{value:void 0,done:!0}:(T=a(E,k),S.index+=T.length,{value:T,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),u="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return l(h)=="String"?u.call(h,""):Object(h)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),u=o("9bf2"),h=a("unscopables"),p=Array.prototype;p[h]==null&&u.f(p,h,{configurable:!0,value:l(null)}),i.exports=function(v){p[h][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),u=o("b622"),h=u("match");i.exports=function(p){var v;return a(p)&&((v=p[h])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),u=o("23cb"),h=function(p){return function(v,m,S){var E=a(v),k=l(E.length),T=u(S,k),A;if(p&&m!=m){for(;k>T;)if(A=E[T++],A!=A)return!0}else for(;k>T;T++)if((p||T in E)&&E[T]===m)return p||T||0;return!p&&-1}};i.exports={includes:h(!0),indexOf:h(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,u=o("1dde"),h=o("ae40"),p=u("filter"),v=h("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(S){return l(this,S,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),u=o("9bdd"),h=o("e95a"),p=o("50c4"),v=o("8418"),m=o("35a1");i.exports=function(E){var k=l(E),T=typeof this=="function"?this:Array,A=arguments.length,R=A>1?arguments[1]:void 0,G=R!==void 0,ee=m(k),pe=0,ge,O,j,Y,V,N;if(G&&(R=a(R,A>2?arguments[2]:void 0,2)),ee!=null&&!(T==Array&&h(ee)))for(Y=ee.call(k),V=Y.next,O=new T;!(j=V.call(Y)).done;pe++)N=G?u(Y,R,[j.value,pe],!0):j.value,v(O,pe,N);else for(ge=p(k.length),O=new T(ge);ge>pe;pe++)N=G?R(k[pe],pe):k[pe],v(O,pe,N);return O.length=pe,O}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(h){return l(h)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(u){return u>0?l(a(u),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),u=o("7b0b"),h=o("50c4"),p=o("a691"),v=o("1d80"),m=o("8aa5"),S=o("14c3"),E=Math.max,k=Math.min,T=Math.floor,A=/\$([$&'`]|\d\d?|<[^>]*>)/g,R=/\$([$&'`]|\d\d?)/g,G=function(ee){return ee===void 0?ee:String(ee)};a("replace",2,function(ee,pe,ge,O){var j=O.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Y=O.REPLACE_KEEPS_$0,V=j?"$":"$0";return[function($,F){var B=v(this),Q=$==null?void 0:$[ee];return Q!==void 0?Q.call($,B,F):pe.call(String(B),$,F)},function(q,$){if(!j&&Y||typeof $=="string"&&$.indexOf(V)===-1){var F=ge(pe,q,this,$);if(F.done)return F.value}var B=l(q),Q=String(this),X=typeof $=="function";X||($=String($));var _e=B.global;if(_e){var me=B.unicode;B.lastIndex=0}for(var We=[];;){var ae=S(B,Q);if(ae===null||(We.push(ae),!_e))break;var ve=String(ae[0]);ve===""&&(B.lastIndex=m(Q,h(B.lastIndex),me))}for(var ye="",J=0,se=0;se<We.length;se++){ae=We[se];for(var fe=String(ae[0]),ie=E(k(p(ae.index),Q.length),0),te=[],Oe=1;Oe<ae.length;Oe++)te.push(G(ae[Oe]));var we=ae.groups;if(X){var Be=[fe].concat(te,ie,Q);we!==void 0&&Be.push(we);var ue=String($.apply(void 0,Be))}else ue=N(fe,Q,ie,te,we,$);ie>=J&&(ye+=Q.slice(J,ie)+ue,J=ie+fe.length)}return ye+Q.slice(J)}];function N(q,$,F,B,Q,X){var _e=F+q.length,me=B.length,We=R;return Q!==void 0&&(Q=u(Q),We=A),pe.call(X,We,function(ae,ve){var ye;switch(ve.charAt(0)){case"$":return"$";case"&":return q;case"`":return $.slice(0,F);case"'":return $.slice(_e);case"<":ye=Q[ve.slice(1,-1)];break;default:var J=+ve;if(J===0)return ae;if(J>me){var se=T(J/10);return se===0?ae:se<=me?B[se-1]===void 0?ve.charAt(1):B[se-1]+ve.charAt(1):ae}ye=B[J-1]}return ye===void 0?"":ye})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(u,h){return l[u]||(l[u]=h!==void 0?h:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),u=o("7418"),h=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var m=l.f(h(v)),S=u.f;return S?m.concat(S(v)):m}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),u=o("7b0b"),h=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(S){var E=u(this),k=h(E.length),T;return p(S),T=v(E,0),T.length=l(T,E,E,k,0,1,S,arguments.length>1?arguments[1]:void 0),T}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),u=function(h){return function(p,v){var m=String(l(p)),S=a(v),E=m.length,k,T;return S<0||S>=E?h?"":void 0:(k=m.charCodeAt(S),k<55296||k>56319||S+1===E||(T=m.charCodeAt(S+1))<56320||T>57343?h?m.charAt(S):k:h?m.slice(S,S+2):(k-55296<<10)+(T-56320)+65536)}};i.exports={codeAt:u(!1),charAt:u(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),u=o("b622"),h=u("species");i.exports=function(p,v){var m;return l(p)&&(m=p.constructor,typeof m=="function"&&(m===Array||l(m.prototype))?m=void 0:a(m)&&(m=m[h],m===null&&(m=void 0))),new(m===void 0?Array:m)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),u=o("861d"),h=o("9112"),p=o("5135"),v=o("f772"),m=o("d012"),S=l.WeakMap,E,k,T,A=function(j){return T(j)?k(j):E(j,{})},R=function(j){return function(Y){var V;if(!u(Y)||(V=k(Y)).type!==j)throw TypeError("Incompatible receiver, "+j+" required");return V}};if(a){var G=new S,ee=G.get,pe=G.has,ge=G.set;E=function(j,Y){return ge.call(G,j,Y),Y},k=function(j){return ee.call(G,j)||{}},T=function(j){return pe.call(G,j)}}else{var O=v("state");m[O]=!0,E=function(j,Y){return h(j,O,Y),Y},k=function(j){return p(j,O)?j[O]:{}},T=function(j){return p(j,O)}}i.exports={set:E,get:k,has:T,enforce:A,getterFor:R}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),u=o("5135"),h=o("ce4e"),p=o("8925"),v=o("69f3"),m=v.get,S=v.enforce,E=String(String).split("String");(i.exports=function(k,T,A,R){var G=R?!!R.unsafe:!1,ee=R?!!R.enumerable:!1,pe=R?!!R.noTargetGet:!1;if(typeof A=="function"&&(typeof T=="string"&&!u(A,"name")&&l(A,"name",T),S(A).source=E.join(typeof T=="string"?T:"")),k===a){ee?k[T]=A:h(T,A);return}else G?!pe&&k[T]&&(ee=!0):delete k[T];ee?k[T]=A:l(k,T,A)})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),u=o("fc6a"),h=o("d1e7").f,p=function(v){return function(m){for(var S=u(m),E=l(S),k=E.length,T=0,A=[],R;k>T;)R=E[T++],(!a||h.call(S,R))&&A.push(v?[R,S[R]]:S[R]);return A}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),u=o("e538"),h=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||h(v,p,{value:u.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),u=o("7839"),h=o("d012"),p=o("1be4"),v=o("cc12"),m=o("f772"),S=">",E="<",k="prototype",T="script",A=m("IE_PROTO"),R=function(){},G=function(j){return E+T+S+j+E+"/"+T+S},ee=function(j){j.write(G("")),j.close();var Y=j.parentWindow.Object;return j=null,Y},pe=function(){var j=v("iframe"),Y="java"+T+":",V;return j.style.display="none",p.appendChild(j),j.src=String(Y),V=j.contentWindow.document,V.open(),V.write(G("document.F=Object")),V.close(),V.F},ge,O=function(){try{ge=document.domain&&new ActiveXObject("htmlfile")}catch{}O=ge?ee(ge):pe();for(var j=u.length;j--;)delete O[k][u[j]];return O()};h[A]=!0,i.exports=Object.create||function(Y,V){var N;return Y!==null?(R[k]=a(Y),N=new R,R[k]=null,N[A]=Y):N=O(),V===void 0?N:l(N,V)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),u=o("e163"),h=o("d2bb"),p=o("d44e"),v=o("9112"),m=o("6eeb"),S=o("b622"),E=o("c430"),k=o("3f8c"),T=o("ae93"),A=T.IteratorPrototype,R=T.BUGGY_SAFARI_ITERATORS,G=S("iterator"),ee="keys",pe="values",ge="entries",O=function(){return this};i.exports=function(j,Y,V,N,q,$,F){l(V,Y,N);var B=function(se){if(se===q&&We)return We;if(!R&&se in _e)return _e[se];switch(se){case ee:return function(){return new V(this,se)};case pe:return function(){return new V(this,se)};case ge:return function(){return new V(this,se)}}return function(){return new V(this)}},Q=Y+" Iterator",X=!1,_e=j.prototype,me=_e[G]||_e["@@iterator"]||q&&_e[q],We=!R&&me||B(q),ae=Y=="Array"&&_e.entries||me,ve,ye,J;if(ae&&(ve=u(ae.call(new j)),A!==Object.prototype&&ve.next&&(!E&&u(ve)!==A&&(h?h(ve,A):typeof ve[G]!="function"&&v(ve,G,O)),p(ve,Q,!0,!0),E&&(k[Q]=O))),q==pe&&me&&me.name!==pe&&(X=!0,We=function(){return me.call(this)}),(!E||F)&&_e[G]!==We&&v(_e,G,We),k[Y]=We,q)if(ye={values:B(pe),keys:$?We:B(ee),entries:B(ge)},F)for(J in ye)(R||X||!(J in _e))&&m(_e,J,ye[J]);else a({target:Y,proto:!0,forced:R||X},ye);return ye}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),u=a.WeakMap;i.exports=typeof u=="function"&&/native code/.test(l(u))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),u=o("5c6c");i.exports=function(h,p,v){var m=a(p);m in h?l.f(h,m,u(0,v)):h[m]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,u;(function(h,p){l=[],a=p,u=typeof a=="function"?a.apply(s,l):a,u!==void 0&&(i.exports=u)})(typeof self<"u"?self:this,function(){function h(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==h&&document.currentScript)return document.currentScript;try{throw new Error}catch(ge){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,m=/@([^@]*):(\d+):(\d+)\s*$/ig,S=v.exec(ge.stack)||m.exec(ge.stack),E=S&&S[1]||!1,k=S&&S[2]||!1,T=document.location.href.replace(document.location.hash,""),A,R,G,ee=document.getElementsByTagName("script");E===T&&(A=document.documentElement.outerHTML,R=new RegExp("(?:[^\\n]+?\\n){0,"+(k-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),G=A.replace(R,"$1").trim());for(var pe=0;pe<ee.length;pe++)if(ee[pe].readyState==="interactive"||ee[pe].src===E||E===T&&ee[pe].innerHTML&&ee[pe].innerHTML.trim()===G)return ee[pe];return null}}return h})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(u){return l.call(u)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,u,h){return u+(h?a(l,u).length:1)}},"8bbf":function(i,s){i.exports=t},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),u=o("5c6c");i.exports=a?function(h,p,v){return l.f(h,p,u(1,v))}:function(h,p,v){return h[p]=v,h}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),u=RegExp.prototype.exec,h=String.prototype.replace,p=u,v=function(){var k=/a/,T=/b*/g;return u.call(k,"a"),u.call(T,"a"),k.lastIndex!==0||T.lastIndex!==0}(),m=l.UNSUPPORTED_Y||l.BROKEN_CARET,S=/()??/.exec("")[1]!==void 0,E=v||S||m;E&&(p=function(T){var A=this,R,G,ee,pe,ge=m&&A.sticky,O=a.call(A),j=A.source,Y=0,V=T;return ge&&(O=O.replace("y",""),O.indexOf("g")===-1&&(O+="g"),V=String(T).slice(A.lastIndex),A.lastIndex>0&&(!A.multiline||A.multiline&&T[A.lastIndex-1]!==`
`)&&(j="(?: "+j+")",V=" "+V,Y++),G=new RegExp("^(?:"+j+")",O)),S&&(G=new RegExp("^"+j+"$(?!\\s)",O)),v&&(R=A.lastIndex),ee=u.call(ge?G:A,V),ge?ee?(ee.input=ee.input.slice(Y),ee[0]=ee[0].slice(Y),ee.index=A.lastIndex,A.lastIndex+=ee[0].length):A.lastIndex=0:v&&ee&&(A.lastIndex=A.global?ee.index+ee[0].length:R),S&&ee&&ee.length>1&&h.call(ee[0],G,function(){for(pe=1;pe<arguments.length-2;pe++)arguments[pe]===void 0&&(ee[pe]=void 0)}),ee}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,u=function(S,E){var k=p[h(S)];return k==m?!0:k==v?!1:typeof E=="function"?a(E):!!E},h=u.normalize=function(S){return String(S).replace(l,".").toLowerCase()},p=u.data={},v=u.NATIVE="N",m=u.POLYFILL="P";i.exports=u},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),u=o("e8b5"),h=o("861d"),p=o("7b0b"),v=o("50c4"),m=o("8418"),S=o("65f0"),E=o("1dde"),k=o("b622"),T=o("2d00"),A=k("isConcatSpreadable"),R=9007199254740991,G="Maximum allowed index exceeded",ee=T>=51||!l(function(){var j=[];return j[A]=!1,j.concat()[0]!==j}),pe=E("concat"),ge=function(j){if(!h(j))return!1;var Y=j[A];return Y!==void 0?!!Y:u(j)},O=!ee||!pe;a({target:"Array",proto:!0,forced:O},{concat:function(Y){var V=p(this),N=S(V,0),q=0,$,F,B,Q,X;for($=-1,B=arguments.length;$<B;$++)if(X=$===-1?V:arguments[$],ge(X)){if(Q=v(X.length),q+Q>R)throw TypeError(G);for(F=0;F<Q;F++,q++)F in X&&m(N,q,X[F])}else{if(q>=R)throw TypeError(G);m(N,q++,X)}return N.length=q,N}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,u,h,p){try{return p?u(a(h)[0],h[1]):u(h)}catch(m){var v=l.return;throw v!==void 0&&a(v.call(l)),m}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),u=o("825a"),h=o("c04e"),p=Object.defineProperty;s.f=a?p:function(m,S,E){if(u(m),S=h(S,!0),u(E),l)try{return p(m,S,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(m[S]=E.value),m}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),u=o("5c6c"),h=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(m,S,E){var k=S+" Iterator";return m.prototype=l(a,{next:u(1,E)}),h(m,k,!1,!0),p[k]=v,m}},"9f7f":function(i,s,o){var a=o("d039");function l(u,h){return RegExp(u,h)}s.UNSUPPORTED_Y=a(function(){var u=l("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var u=l("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),u=o("0366"),h=function(p,v,m,S,E,k,T,A){for(var R=E,G=0,ee=T?u(T,A,3):!1,pe;G<S;){if(G in m){if(pe=ee?ee(m[G],G,v):m[G],k>0&&a(pe))R=h(p,v,pe,l(pe.length),R,k-1)-1;else{if(R>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[R]=pe}R++}G++}return R};i.exports=h},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),u=o("a691"),h=o("50c4"),p=o("7b0b"),v=o("65f0"),m=o("8418"),S=o("1dde"),E=o("ae40"),k=S("splice"),T=E("splice",{ACCESSORS:!0,0:0,1:2}),A=Math.max,R=Math.min,G=9007199254740991,ee="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!k||!T},{splice:function(ge,O){var j=p(this),Y=h(j.length),V=l(ge,Y),N=arguments.length,q,$,F,B,Q,X;if(N===0?q=$=0:N===1?(q=0,$=Y-V):(q=N-2,$=R(A(u(O),0),Y-V)),Y+q-$>G)throw TypeError(ee);for(F=v(j,$),B=0;B<$;B++)Q=V+B,Q in j&&m(F,B,j[Q]);if(F.length=$,q<$){for(B=V;B<Y-$;B++)Q=B+$,X=B+q,Q in j?j[X]=j[Q]:delete j[X];for(B=Y;B>Y-$+q;B--)delete j[B-1]}else if(q>$)for(B=Y-$;B>V;B--)Q=B+$-1,X=B+q-1,Q in j?j[X]=j[Q]:delete j[X];for(B=0;B<q;B++)j[B+V]=arguments[B+2];return j.length=Y-$+q,F}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),u=o("d066"),h=o("c430"),p=o("83ab"),v=o("4930"),m=o("fdbf"),S=o("d039"),E=o("5135"),k=o("e8b5"),T=o("861d"),A=o("825a"),R=o("7b0b"),G=o("fc6a"),ee=o("c04e"),pe=o("5c6c"),ge=o("7c73"),O=o("df75"),j=o("241c"),Y=o("057f"),V=o("7418"),N=o("06cf"),q=o("9bf2"),$=o("d1e7"),F=o("9112"),B=o("6eeb"),Q=o("5692"),X=o("f772"),_e=o("d012"),me=o("90e3"),We=o("b622"),ae=o("e538"),ve=o("746f"),ye=o("d44e"),J=o("69f3"),se=o("b727").forEach,fe=X("hidden"),ie="Symbol",te="prototype",Oe=We("toPrimitive"),we=J.set,Be=J.getterFor(ie),ue=Object[te],re=l.Symbol,Z=u("JSON","stringify"),U=N.f,xe=q.f,Ne=Y.f,Ge=$.f,Se=Q("symbols"),ce=Q("op-symbols"),je=Q("string-to-symbol-registry"),st=Q("symbol-to-string-registry"),lt=Q("wks"),_t=l.QObject,Je=!_t||!_t[te]||!_t[te].findChild,zt=p&&S(function(){return ge(xe({},"a",{get:function(){return xe(this,"a",{value:7}).a}})).a!=7})?function(Cn,cn,bn){var ir=U(ue,cn);ir&&delete ue[cn],xe(Cn,cn,bn),ir&&Cn!==ue&&xe(ue,cn,ir)}:xe,Xt=function(Cn,cn){var bn=Se[Cn]=ge(re[te]);return we(bn,{type:ie,tag:Cn,description:cn}),p||(bn.description=cn),bn},et=m?function(Cn){return typeof Cn=="symbol"}:function(Cn){return Object(Cn)instanceof re},ut=function(cn,bn,ir){cn===ue&&ut(ce,bn,ir),A(cn);var hr=ee(bn,!0);return A(ir),E(Se,hr)?(ir.enumerable?(E(cn,fe)&&cn[fe][hr]&&(cn[fe][hr]=!1),ir=ge(ir,{enumerable:pe(0,!1)})):(E(cn,fe)||xe(cn,fe,pe(1,{})),cn[fe][hr]=!0),zt(cn,hr,ir)):xe(cn,hr,ir)},ot=function(cn,bn){A(cn);var ir=G(bn),hr=O(ir).concat(An(ir));return se(hr,function(wr){(!p||Jt.call(ir,wr))&&ut(cn,wr,ir[wr])}),cn},It=function(cn,bn){return bn===void 0?ge(cn):ot(ge(cn),bn)},Jt=function(cn){var bn=ee(cn,!0),ir=Ge.call(this,bn);return this===ue&&E(Se,bn)&&!E(ce,bn)?!1:ir||!E(this,bn)||!E(Se,bn)||E(this,fe)&&this[fe][bn]?ir:!0},xn=function(cn,bn){var ir=G(cn),hr=ee(bn,!0);if(!(ir===ue&&E(Se,hr)&&!E(ce,hr))){var wr=U(ir,hr);return wr&&E(Se,hr)&&!(E(ir,fe)&&ir[fe][hr])&&(wr.enumerable=!0),wr}},Sn=function(cn){var bn=Ne(G(cn)),ir=[];return se(bn,function(hr){!E(Se,hr)&&!E(_e,hr)&&ir.push(hr)}),ir},An=function(cn){var bn=cn===ue,ir=Ne(bn?ce:G(cn)),hr=[];return se(ir,function(wr){E(Se,wr)&&(!bn||E(ue,wr))&&hr.push(Se[wr])}),hr};if(v||(re=function(){if(this instanceof re)throw TypeError("Symbol is not a constructor");var cn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),bn=me(cn),ir=function(hr){this===ue&&ir.call(ce,hr),E(this,fe)&&E(this[fe],bn)&&(this[fe][bn]=!1),zt(this,bn,pe(1,hr))};return p&&Je&&zt(ue,bn,{configurable:!0,set:ir}),Xt(bn,cn)},B(re[te],"toString",function(){return Be(this).tag}),B(re,"withoutSetter",function(Cn){return Xt(me(Cn),Cn)}),$.f=Jt,q.f=ut,N.f=xn,j.f=Y.f=Sn,V.f=An,ae.f=function(Cn){return Xt(We(Cn),Cn)},p&&(xe(re[te],"description",{configurable:!0,get:function(){return Be(this).description}}),h||B(ue,"propertyIsEnumerable",Jt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:re}),se(O(lt),function(Cn){ve(Cn)}),a({target:ie,stat:!0,forced:!v},{for:function(Cn){var cn=String(Cn);if(E(je,cn))return je[cn];var bn=re(cn);return je[cn]=bn,st[bn]=cn,bn},keyFor:function(cn){if(!et(cn))throw TypeError(cn+" is not a symbol");if(E(st,cn))return st[cn]},useSetter:function(){Je=!0},useSimple:function(){Je=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:It,defineProperty:ut,defineProperties:ot,getOwnPropertyDescriptor:xn}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:Sn,getOwnPropertySymbols:An}),a({target:"Object",stat:!0,forced:S(function(){V.f(1)})},{getOwnPropertySymbols:function(cn){return V.f(R(cn))}}),Z){var Zn=!v||S(function(){var Cn=re();return Z([Cn])!="[null]"||Z({a:Cn})!="{}"||Z(Object(Cn))!="{}"});a({target:"JSON",stat:!0,forced:Zn},{stringify:function(cn,bn,ir){for(var hr=[cn],wr=1,Kn;arguments.length>wr;)hr.push(arguments[wr++]);if(Kn=bn,!(!T(bn)&&cn===void 0||et(cn)))return k(bn)||(bn=function(Rr,ms){if(typeof Kn=="function"&&(ms=Kn.call(this,Rr,ms)),!et(ms))return ms}),hr[1]=bn,Z.apply(null,hr)}})}re[te][Oe]||F(re[te],Oe,re[te].valueOf),ye(re,ie),_e[fe]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),u=o("1c7e"),h=!u(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:h},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,u){var h=[][l];return!!h&&a(function(){h.call(null,u||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(u){var h=/./;try{"/./"[u](h)}catch{try{return h[l]=!1,"/./"[u](h)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),u=o("5135"),h=Object.defineProperty,p={},v=function(m){throw m};i.exports=function(m,S){if(u(p,m))return p[m];S||(S={});var E=[][m],k=u(S,"ACCESSORS")?S.ACCESSORS:!1,T=u(S,0)?S[0]:v,A=u(S,1)?S[1]:void 0;return p[m]=!!E&&!l(function(){if(k&&!a)return!0;var R={length:-1};k?h(R,1,{enumerable:!0,get:v}):R[1]=1,E.call(R,T,A)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),u=o("5135"),h=o("b622"),p=o("c430"),v=h("iterator"),m=!1,S=function(){return this},E,k,T;[].keys&&(T=[].keys(),"next"in T?(k=a(a(T)),k!==Object.prototype&&(E=k)):m=!0),E==null&&(E={}),!p&&!u(E,v)&&l(E,v,S),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:m}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,u=Function.prototype,h=u.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in u)&&l(u,v,{configurable:!0,get:function(){try{return h.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),u=o("5135"),h=o("90e3"),p=o("4930"),v=o("fdbf"),m=l("wks"),S=a.Symbol,E=v?S:S&&S.withoutSetter||h;i.exports=function(k){return u(m,k)||(p&&u(S,k)?m[k]=S[k]:m[k]=E("Symbol."+k)),m[k]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),u=o("df75"),h=o("d039"),p=h(function(){u(1)});a({target:"Object",stat:!0,forced:p},{keys:function(m){return u(l(m))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),u=o("7b0b"),h=o("50c4"),p=o("65f0"),v=[].push,m=function(S){var E=S==1,k=S==2,T=S==3,A=S==4,R=S==6,G=S==5||R;return function(ee,pe,ge,O){for(var j=u(ee),Y=l(j),V=a(pe,ge,3),N=h(Y.length),q=0,$=O||p,F=E?$(ee,N):k?$(ee,0):void 0,B,Q;N>q;q++)if((G||q in Y)&&(B=Y[q],Q=V(B,q,j),S)){if(E)F[q]=Q;else if(Q)switch(S){case 3:return!0;case 5:return B;case 6:return q;case 2:v.call(F,B)}else if(A)return!1}return R?-1:T||A?A:F}};i.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,u){if(!a(l))return l;var h,p;if(u&&typeof(h=l.toString)=="function"&&!a(p=h.call(l))||typeof(h=l.valueOf)=="function"&&!a(p=h.call(l))||!u&&typeof(h=l.toString)=="function"&&!a(p=h.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),u="__core-js_shared__",h=a[u]||l(u,{});i.exports=h},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,u=o("44d2"),h=o("ae40"),p="findIndex",v=!0,m=h(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!m},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),u(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,u=o("a640"),h=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,m=u("indexOf"),S=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!m||!S},{indexOf:function(k){return v?p.apply(this,arguments)||0:l(this,k,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),u=o("4d64").indexOf,h=o("d012");i.exports=function(p,v){var m=l(p),S=0,E=[],k;for(k in m)!a(h,k)&&a(m,k)&&E.push(k);for(;v.length>S;)a(m,k=v[S++])&&(~u(E,k)||E.push(k));return E}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,u=o("44d2"),h=o("ae40"),p=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),u("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),u=a.document,h=l(u)&&l(u.createElement);i.exports=function(p){return h?u.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(u,h){try{l(a,u,h)}catch{a[u]=h}return h}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),u=function(h){return typeof h=="function"?h:void 0};i.exports=function(h,p){return arguments.length<2?u(a[h])||u(l[h]):a[h]&&a[h][p]||l[h]&&l[h][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!a.call({1:2},1);s.f=u?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,h={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(h,[]),u=h instanceof Array}catch{}return function(m,S){return a(m),l(S),u?p.call(m,S):m.__proto__=S,m}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),u=o("b041");a||l(Object.prototype,"toString",u,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),u=o("b622"),h=u("toStringTag");i.exports=function(p,v,m){p&&!l(p=m?p:p.prototype,h)&&a(p,h,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),u=o("44ad"),h=o("50c4"),p=function(v){return function(m,S,E,k){a(S);var T=l(m),A=u(T),R=h(T.length),G=v?R-1:0,ee=v?-1:1;if(E<2)for(;;){if(G in A){k=A[G],G+=ee;break}if(G+=ee,v?G<0:R<=G)throw TypeError("Reduce of empty array with no initial value")}for(;v?G>=0:R>G;G+=ee)G in A&&(k=S(k,A[G],G,T));return k}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),u=o("b622"),h=o("9263"),p=o("9112"),v=u("species"),m=!l(function(){var A=/./;return A.exec=function(){var R=[];return R.groups={a:"7"},R},"".replace(A,"$<a>")!=="7"}),S=function(){return"a".replace(/./,"$0")==="$0"}(),E=u("replace"),k=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),T=!l(function(){var A=/(?:)/,R=A.exec;A.exec=function(){return R.apply(this,arguments)};var G="ab".split(A);return G.length!==2||G[0]!=="a"||G[1]!=="b"});i.exports=function(A,R,G,ee){var pe=u(A),ge=!l(function(){var q={};return q[pe]=function(){return 7},""[A](q)!=7}),O=ge&&!l(function(){var q=!1,$=/a/;return A==="split"&&($={},$.constructor={},$.constructor[v]=function(){return $},$.flags="",$[pe]=/./[pe]),$.exec=function(){return q=!0,null},$[pe](""),!q});if(!ge||!O||A==="replace"&&!(m&&S&&!k)||A==="split"&&!T){var j=/./[pe],Y=G(pe,""[A],function(q,$,F,B,Q){return $.exec===h?ge&&!Q?{done:!0,value:j.call($,F,B)}:{done:!0,value:q.call(F,$,B)}:{done:!1}},{REPLACE_KEEPS_$0:S,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:k}),V=Y[0],N=Y[1];a(String.prototype,A,V),a(RegExp.prototype,pe,R==2?function(q,$){return N.call(q,this,$)}:function(q){return N.call(q,this)})}ee&&p(RegExp.prototype[pe],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,u=o("1dde"),h=o("ae40"),p=u("map"),v=h("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(S){return l(this,S,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(u){return u&&u.Math==Math&&u};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),u=o("56ef"),h=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(S){for(var E=h(S),k=p.f,T=u(E),A={},R=0,G,ee;T.length>R;)ee=k(E,G=T[R++]),ee!==void 0&&v(A,G,ee);return A}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return u});function l(){return typeof window<"u"?window.console:a.console}var u=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),u=o("e260"),h=o("9112"),p=o("b622"),v=p("iterator"),m=p("toStringTag"),S=u.values;for(var E in l){var k=a[E],T=k&&k.prototype;if(T){if(T[v]!==S)try{h(T,v,S)}catch{T[v]=S}if(T[m]||h(T,m,E),l[E]){for(var A in u)if(T[A]!==u[A])try{h(T,A,u[A])}catch{T[A]=u[A]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(h){return a(h,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),u=o("da84"),h=o("5135"),p=o("861d"),v=o("9bf2").f,m=o("e893"),S=u.Symbol;if(l&&typeof S=="function"&&(!("description"in S.prototype)||S().description!==void 0)){var E={},k=function(){var pe=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),ge=this instanceof k?new S(pe):pe===void 0?S():S(pe);return pe===""&&(E[ge]=!0),ge};m(k,S);var T=k.prototype=S.prototype;T.constructor=k;var A=T.toString,R=String(S("test"))=="Symbol(test)",G=/^Symbol\((.*)\)[^)]+$/;v(T,"description",{configurable:!0,get:function(){var pe=p(this)?this.valueOf():this,ge=A.call(pe);if(h(E,pe))return"";var O=R?ge.slice(7,-1):ge.replace(G,"$1");return O===""?void 0:O}}),a({global:!0,forced:!0},{Symbol:k})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),u=o("f772"),h=o("e177"),p=u("IE_PROTO"),v=Object.prototype;i.exports=h?Object.getPrototypeOf:function(m){return m=l(m),a(m,p)?m[p]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),u=o("3f8c"),h=o("69f3"),p=o("7dd0"),v="Array Iterator",m=h.set,S=h.getterFor(v);i.exports=p(Array,"Array",function(E,k){m(this,{type:v,target:a(E),index:0,kind:k})},function(){var E=S(this),k=E.target,T=E.kind,A=E.index++;return!k||A>=k.length?(E.target=void 0,{value:void 0,done:!0}):T=="keys"?{value:A,done:!1}:T=="values"?{value:k[A],done:!1}:{value:[A,k[A]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),u=o("fc6a"),h=o("06cf").f,p=o("83ab"),v=l(function(){h(1)}),m=!p||v;a({target:"Object",stat:!0,forced:m,sham:!p},{getOwnPropertyDescriptor:function(E,k){return h(u(E),k)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),u=o("06cf"),h=o("9bf2");i.exports=function(p,v){for(var m=l(v),S=h.f,E=u.f,k=0;k<m.length;k++){var T=m[k];a(p,T)||S(p,T,E(v,T))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(u){return a(u)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),u=a("iterator"),h=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||h[u]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),u=o("b622"),h=u("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(m,S){try{return m[S]}catch{}};i.exports=a?l:function(m){var S,E,k;return m===void 0?"Undefined":m===null?"Null":typeof(E=v(S=Object(m),h))=="string"?E:p?l(S):(k=l(S))=="Object"&&typeof S.callee=="function"?"Arguments":k}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),u=a("keys");i.exports=function(h){return u[h]||(u[h]=l(h))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var u=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(o.p=u[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function h(et,ut,ot){return ut in et?Object.defineProperty(et,ut,{value:ot,enumerable:!0,configurable:!0,writable:!0}):et[ut]=ot,et}function p(et,ut){var ot=Object.keys(et);if(Object.getOwnPropertySymbols){var It=Object.getOwnPropertySymbols(et);ut&&(It=It.filter(function(Jt){return Object.getOwnPropertyDescriptor(et,Jt).enumerable})),ot.push.apply(ot,It)}return ot}function v(et){for(var ut=1;ut<arguments.length;ut++){var ot=arguments[ut]!=null?arguments[ut]:{};ut%2?p(Object(ot),!0).forEach(function(It){h(et,It,ot[It])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(ot)):p(Object(ot)).forEach(function(It){Object.defineProperty(et,It,Object.getOwnPropertyDescriptor(ot,It))})}return et}function m(et){if(Array.isArray(et))return et}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function S(et,ut){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(et)))){var ot=[],It=!0,Jt=!1,xn=void 0;try{for(var Sn=et[Symbol.iterator](),An;!(It=(An=Sn.next()).done)&&(ot.push(An.value),!(ut&&ot.length===ut));It=!0);}catch(Zn){Jt=!0,xn=Zn}finally{try{!It&&Sn.return!=null&&Sn.return()}finally{if(Jt)throw xn}}return ot}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(et,ut){(ut==null||ut>et.length)&&(ut=et.length);for(var ot=0,It=new Array(ut);ot<ut;ot++)It[ot]=et[ot];return It}function k(et,ut){if(et){if(typeof et=="string")return E(et,ut);var ot=Object.prototype.toString.call(et).slice(8,-1);if(ot==="Object"&&et.constructor&&(ot=et.constructor.name),ot==="Map"||ot==="Set")return Array.from(et);if(ot==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ot))return E(et,ut)}}function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(et,ut){return m(et)||S(et,ut)||k(et,ut)||T()}function R(et){if(Array.isArray(et))return E(et)}function G(et){if(typeof Symbol<"u"&&Symbol.iterator in Object(et))return Array.from(et)}function ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(et){return R(et)||G(et)||k(et)||ee()}var ge=o("a352"),O=o.n(ge);function j(et){et.parentElement!==null&&et.parentElement.removeChild(et)}function Y(et,ut,ot){var It=ot===0?et.children[0]:et.children[ot-1].nextSibling;et.insertBefore(ut,It)}var V=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function N(et){var ut=Object.create(null);return function(It){var Jt=ut[It];return Jt||(ut[It]=et(It))}}var q=/-(\w)/g,$=N(function(et){return et.replace(q,function(ut,ot){return ot.toUpperCase()})});o("5db7"),o("73d9");var F=["Start","Add","Remove","Update","End"],B=["Choose","Unchoose","Sort","Filter","Clone"],Q=["Move"],X=[Q,F,B].flatMap(function(et){return et}).map(function(et){return"on".concat(et)}),_e={manage:Q,manageAndEmit:F,emit:B};function me(et){return X.indexOf(et)!==-1}o("caad"),o("2ca0");var We=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function ae(et){return We.includes(et)}function ve(et){return["transition-group","TransitionGroup"].includes(et)}function ye(et){return["id","class","role","style"].includes(et)||et.startsWith("data-")||et.startsWith("aria-")||et.startsWith("on")}function J(et){return et.reduce(function(ut,ot){var It=A(ot,2),Jt=It[0],xn=It[1];return ut[Jt]=xn,ut},{})}function se(et){var ut=et.$attrs,ot=et.componentData,It=ot===void 0?{}:ot,Jt=J(Object.entries(ut).filter(function(xn){var Sn=A(xn,2),An=Sn[0];return Sn[1],ye(An)}));return v(v({},Jt),It)}function fe(et){var ut=et.$attrs,ot=et.callBackBuilder,It=J(ie(ut));Object.entries(ot).forEach(function(xn){var Sn=A(xn,2),An=Sn[0],Zn=Sn[1];_e[An].forEach(function(Cn){It["on".concat(Cn)]=Zn(Cn)})});var Jt="[data-draggable]".concat(It.draggable||"");return v(v({},It),{},{draggable:Jt})}function ie(et){return Object.entries(et).filter(function(ut){var ot=A(ut,2),It=ot[0];return ot[1],!ye(It)}).map(function(ut){var ot=A(ut,2),It=ot[0],Jt=ot[1];return[$(It),Jt]}).filter(function(ut){var ot=A(ut,2),It=ot[0];return ot[1],!me(It)})}o("c740");function te(et,ut){if(!(et instanceof ut))throw new TypeError("Cannot call a class as a function")}function Oe(et,ut){for(var ot=0;ot<ut.length;ot++){var It=ut[ot];It.enumerable=It.enumerable||!1,It.configurable=!0,"value"in It&&(It.writable=!0),Object.defineProperty(et,It.key,It)}}function we(et,ut,ot){return ut&&Oe(et.prototype,ut),et}var Be=function(ut){var ot=ut.el;return ot},ue=function(ut,ot){return ut.__draggable_context=ot},re=function(ut){return ut.__draggable_context},Z=function(){function et(ut){var ot=ut.nodes,It=ot.header,Jt=ot.default,xn=ot.footer,Sn=ut.root,An=ut.realList;te(this,et),this.defaultNodes=Jt,this.children=[].concat(pe(It),pe(Jt),pe(xn)),this.externalComponent=Sn.externalComponent,this.rootTransition=Sn.transition,this.tag=Sn.tag,this.realList=An}return we(et,[{key:"render",value:function(ot,It){var Jt=this.tag,xn=this.children,Sn=this._isRootComponent,An=Sn?{default:function(){return xn}}:xn;return ot(Jt,It,An)}},{key:"updated",value:function(){var ot=this.defaultNodes,It=this.realList;ot.forEach(function(Jt,xn){ue(Be(Jt),{element:It[xn],index:xn})})}},{key:"getUnderlyingVm",value:function(ot){return re(ot)}},{key:"getVmIndexFromDomIndex",value:function(ot,It){var Jt=this.defaultNodes,xn=Jt.length,Sn=It.children,An=Sn.item(ot);if(An===null)return xn;var Zn=re(An);if(Zn)return Zn.index;if(xn===0)return 0;var Cn=Be(Jt[0]),cn=pe(Sn).findIndex(function(bn){return bn===Cn});return ot<cn?0:xn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),et}(),U=o("8bbf");function xe(et,ut){var ot=et[ut];return ot?ot():[]}function Ne(et){var ut=et.$slots,ot=et.realList,It=et.getKey,Jt=ot||[],xn=["header","footer"].map(function(bn){return xe(ut,bn)}),Sn=A(xn,2),An=Sn[0],Zn=Sn[1],Cn=ut.item;if(!Cn)throw new Error("draggable element must have an item slot");var cn=Jt.flatMap(function(bn,ir){return Cn({element:bn,index:ir}).map(function(hr){return hr.key=It(bn),hr.props=v(v({},hr.props||{}),{},{"data-draggable":!0}),hr})});if(cn.length!==Jt.length)throw new Error("Item slot must have only one child");return{header:An,footer:Zn,default:cn}}function Ge(et){var ut=ve(et),ot=!ae(et)&&!ut;return{transition:ut,externalComponent:ot,tag:ot?Object(U.resolveComponent)(et):ut?U.TransitionGroup:et}}function Se(et){var ut=et.$slots,ot=et.tag,It=et.realList,Jt=et.getKey,xn=Ne({$slots:ut,realList:It,getKey:Jt}),Sn=Ge(ot);return new Z({nodes:xn,root:Sn,realList:It})}function ce(et,ut){var ot=this;Object(U.nextTick)(function(){return ot.$emit(et.toLowerCase(),ut)})}function je(et){var ut=this;return function(ot,It){if(ut.realList!==null)return ut["onDrag".concat(et)](ot,It)}}function st(et){var ut=this,ot=je.call(this,et);return function(It,Jt){ot.call(ut,It,Jt),ce.call(ut,et,It)}}var lt=null,_t={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ut){return ut}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Je=["update:modelValue","change"].concat(pe([].concat(pe(_e.manageAndEmit),pe(_e.emit)).map(function(et){return et.toLowerCase()}))),zt=Object(U.defineComponent)({name:"draggable",inheritAttrs:!1,props:_t,emits:Je,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ut=this.$slots,ot=this.$attrs,It=this.tag,Jt=this.componentData,xn=this.realList,Sn=this.getKey,An=Se({$slots:ut,tag:It,realList:xn,getKey:Sn});this.componentStructure=An;var Zn=se({$attrs:ot,componentData:Jt});return An.render(U.h,Zn)}catch(Cn){return this.error=!0,Object(U.h)("pre",{style:{color:"red"}},Cn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&V.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ut=this;if(!this.error){var ot=this.$attrs,It=this.$el,Jt=this.componentStructure;Jt.updated();var xn=fe({$attrs:ot,callBackBuilder:{manageAndEmit:function(Zn){return st.call(ut,Zn)},emit:function(Zn){return ce.bind(ut,Zn)},manage:function(Zn){return je.call(ut,Zn)}}}),Sn=It.nodeType===1?It:It.parentElement;this._sortable=new O.a(Sn,xn),this.targetDomElement=Sn,Sn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ut=this.list;return ut||this.modelValue},getKey:function(){var ut=this.itemKey;return typeof ut=="function"?ut:function(ot){return ot[ut]}}},watch:{$attrs:{handler:function(ut){var ot=this._sortable;ot&&ie(ut).forEach(function(It){var Jt=A(It,2),xn=Jt[0],Sn=Jt[1];ot.option(xn,Sn)})},deep:!0}},methods:{getUnderlyingVm:function(ut){return this.componentStructure.getUnderlyingVm(ut)||null},getUnderlyingPotencialDraggableComponent:function(ut){return ut.__draggable_component__},emitChanges:function(ut){var ot=this;Object(U.nextTick)(function(){return ot.$emit("change",ut)})},alterList:function(ut){if(this.list){ut(this.list);return}var ot=pe(this.modelValue);ut(ot),this.$emit("update:modelValue",ot)},spliceList:function(){var ut=arguments,ot=function(Jt){return Jt.splice.apply(Jt,pe(ut))};this.alterList(ot)},updatePosition:function(ut,ot){var It=function(xn){return xn.splice(ot,0,xn.splice(ut,1)[0])};this.alterList(It)},getRelatedContextFromMoveEvent:function(ut){var ot=ut.to,It=ut.related,Jt=this.getUnderlyingPotencialDraggableComponent(ot);if(!Jt)return{component:Jt};var xn=Jt.realList,Sn={list:xn,component:Jt};if(ot!==It&&xn){var An=Jt.getUnderlyingVm(It)||{};return v(v({},An),Sn)}return Sn},getVmIndexFromDomIndex:function(ut){return this.componentStructure.getVmIndexFromDomIndex(ut,this.targetDomElement)},onDragStart:function(ut){this.context=this.getUnderlyingVm(ut.item),ut.item._underlying_vm_=this.clone(this.context.element),lt=ut.item},onDragAdd:function(ut){var ot=ut.item._underlying_vm_;if(ot!==void 0){j(ut.item);var It=this.getVmIndexFromDomIndex(ut.newIndex);this.spliceList(It,0,ot);var Jt={element:ot,newIndex:It};this.emitChanges({added:Jt})}},onDragRemove:function(ut){if(Y(this.$el,ut.item,ut.oldIndex),ut.pullMode==="clone"){j(ut.clone);return}var ot=this.context,It=ot.index,Jt=ot.element;this.spliceList(It,1);var xn={element:Jt,oldIndex:It};this.emitChanges({removed:xn})},onDragUpdate:function(ut){j(ut.item),Y(ut.from,ut.item,ut.oldIndex);var ot=this.context.index,It=this.getVmIndexFromDomIndex(ut.newIndex);this.updatePosition(ot,It);var Jt={element:this.context.element,oldIndex:ot,newIndex:It};this.emitChanges({moved:Jt})},computeFutureIndex:function(ut,ot){if(!ut.element)return 0;var It=pe(ot.to.children).filter(function(An){return An.style.display!=="none"}),Jt=It.indexOf(ot.related),xn=ut.component.getVmIndexFromDomIndex(Jt),Sn=It.indexOf(lt)!==-1;return Sn||!ot.willInsertAfter?xn:xn+1},onDragMove:function(ut,ot){var It=this.move,Jt=this.realList;if(!It||!Jt)return!0;var xn=this.getRelatedContextFromMoveEvent(ut),Sn=this.computeFutureIndex(xn,ut),An=v(v({},this.context),{},{futureIndex:Sn}),Zn=v(v({},ut),{},{relatedContext:xn,draggedContext:An});return It(Zn,ot)},onDragEnd:function(){lt=null}}}),Xt=zt;s.default=Xt},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),u=o("e8b5"),h=o("23cb"),p=o("50c4"),v=o("fc6a"),m=o("8418"),S=o("b622"),E=o("1dde"),k=o("ae40"),T=E("slice"),A=k("slice",{ACCESSORS:!0,0:0,1:2}),R=S("species"),G=[].slice,ee=Math.max;a({target:"Array",proto:!0,forced:!T||!A},{slice:function(ge,O){var j=v(this),Y=p(j.length),V=h(ge,Y),N=h(O===void 0?Y:O,Y),q,$,F;if(u(j)&&(q=j.constructor,typeof q=="function"&&(q===Array||u(q.prototype))?q=void 0:l(q)&&(q=q[R],q===null&&(q=void 0)),q===Array||q===void 0))return G.call(j,V,N);for($=new(q===void 0?Array:q)(ee(N-V,0)),F=0;V<N;V++,F++)V in j&&m($,F,j[V]);return $.length=F,$}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(u){return a(l(u))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(_P);var QZ=_P.exports;const eX=Hy(QZ),tX={class:"h-full bg-gray-50"},nX={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},rX={class:"sm:flex sm:items-center"},iX={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},sX={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},oX={class:"mt-6 bg-white shadow rounded-lg p-4"},aX={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},lX=["value"],uX={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},cX={key:1,class:"mt-6 overflow-x-auto pb-4"},dX={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},hX={key:1,class:"flex space-x-4 min-w-max"},fX={class:"bg-white rounded-lg shadow overflow-hidden"},pX={class:"flex items-center"},gX={class:"flex items-center"},mX={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},vX={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},yX={class:"min-h-[100px] draggable-container"},_X={class:"note-container"},bX={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},wX={class:"flex items-center"},xX={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},LX={class:"text-sm font-medium text-gray-900 truncate"},SX={class:"px-3 py-2"},CX={class:"text-sm text-gray-500 line-clamp-2"},EX={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex items-center space-x-2"},PX={class:"text-xs text-gray-500"},MX={key:0,class:"text-xs text-gray-700"},kX={class:"flex space-x-1 ml-auto"},AX={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note géolocalisée"},TX={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},DX=["onClick"],IX=["onClick"],OX=["onClick"],NX=["onClick"],RX={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},BX={class:"flex items-center justify-center min-h-screen w-full"},FX={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},jX={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},zX=Rs({__name:"NotesView",setup(n){const e=yt([]),t=Rm(),r=ou(),i=xf(),s=Ao();Ip();const o=yt(!0),a=yt(!1),l=yt(!1),u=yt(null),h=yt(null),p=yt("info");yt(null);const v=yt(window.innerWidth<768),m=()=>{v.value=window.innerWidth<768},S=rr(()=>{const ve=i.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes triées:",ve),ve}),E=[{id:qi.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:qi.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:qi.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:qi.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salariés et visiteurs)"}],k=au({search:"",date:"",accessLevel:""});function T(ve){if(!ve)return"Date non définie";try{const ye=new Date(ve);return isNaN(ye.getTime())?(console.warn("[safeFormatDate] Date invalide:",ve),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(ye)}catch(ye){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",ye),"Date invalide"}}function A(ve){if(!ve)return null;try{const ye=new Date(ve);return isNaN(ye.getTime())?(console.warn("[safeDate] Date invalide:",ve),null):ye}catch(ye){return console.error("[safeDate] Erreur lors de la création de la date:",ye),null}}function R(ve){return T(ve)}const G=rr(()=>{let ve=i.getAccessibleNotes;if(k.search){const ye=k.search.toLowerCase();ve=ve.filter(J=>J.title.toLowerCase().includes(ye)||J.description.toLowerCase().includes(ye))}if(k.accessLevel&&(ve=ve.filter(ye=>ye.accessLevel===k.accessLevel)),k.date){const ye=new Date;ye.setHours(0,0,0,0);const J=new Date(ye);J.setDate(ye.getDate()-ye.getDay());const se=new Date(ye.getFullYear(),ye.getMonth(),1);ve=ve.filter(fe=>{const ie=A(fe.createdAt);return ie?k.date==="today"?ie>=ye:k.date==="week"?ie>=J:k.date==="month"?ie>=se:!0:!1})}return ve}),ee=rr(()=>ve=>G.value.filter(ye=>ye.columnId===ve));function pe(ve){if(ve==null)return"Non défini";switch(ve){case qi.PRIVATE:return"Privé";case qi.COMPANY:return"Entreprise";case qi.EMPLOYEE:return"Salariés";case qi.VISITOR:return"Visiteurs";default:return"Non défini"}}function ge(ve){if(ve==null)return"#9CA3AF";switch(ve){case qi.PRIVATE:return"#9CA3AF";case qi.COMPANY:return"#EF4444";case qi.EMPLOYEE:return"#F59E0B";case qi.VISITOR:return"#10B981";default:return"#6B7280"}}Es(()=>{console.log("[NotesView] Composant monté"),O().then(()=>{console.log("[NotesView] Données chargées avec succès")}).catch(ve=>{console.error("[NotesView] Erreur lors du chargement des données:",ve),r.error("Erreur lors du chargement des données")}),document.addEventListener("click",ae),window.addEventListener("resize",m)});async function O(){var ve;console.log(`
[NotesView][loadInitialData] Début du chargement des données`);try{if(o.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await i.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes chargées:",i.columns),s.isAdmin)try{const te=await Ua.getEntreprises();e.value=te.data,console.log("[NotesView][loadInitialData] Entreprises chargées:",e.value)}catch(te){console.error("[NotesView][loadInitialData] Erreur chargement entreprises:",te)}console.log("[NotesView][loadInitialData] Chargement des notes...");const ye={};!s.isAdmin&&((ve=s.user)!=null&&ve.enterprise_id)&&(ye.enterprise_id=s.user.enterprise_id,console.log(`[NotesView][loadInitialData] Filtrage des notes par entreprise: ${ye.enterprise_id}`));const J=await Sa.getNotes(ye);console.log("[NotesView][loadInitialData] Notes reçues:",J.data),J.data.length>0?(console.log("[NotesView][loadInitialData] Détails des notes:"),J.data.forEach((te,Oe)=>{console.log(`Note ${Oe+1}:`,{id:te.id,title:te.title,columnId:te.column||te.column_id,access_level:te.access_level,column:te.column})})):console.warn("[NotesView][loadInitialData] Aucune note reçue du backend!");const se=i.columns.map(te=>te.id),fe=J.data.filter(te=>{const Oe=(te.column||te.column_id||"").toString();return Oe===""||!se.includes(Oe)});if(fe.length>0){console.warn(`[NotesView][loadInitialData] ${fe.length} notes avec des colonnes invalides:`,fe),console.log("[NotesView][loadInitialData] Assignation des notes à la colonne À faire (2)");for(const te of fe)try{await Sa.updateNote(te.id,{column:"2"})}catch(Oe){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${te.id} à la colonne À faire:`,Oe)}}const ie=J.data.map(te=>{let Oe;if(s.isAdmin&&te.enterprise_id!=null)if(te.enterprise_name)Oe=te.enterprise_name;else{const we=e.value.find(Be=>Be.id===te.enterprise_id);Oe=we?Dl(we):void 0}return{id:te.id,title:te.title,description:te.description,location:te.location,columnId:(te.column||te.column_id||"2").toString(),access_level:te.access_level,style:te.style||{},comments:te.comments||[],photos:te.photos||[],order:te.order||0,createdAt:te.created_at,updatedAt:te.updated_at,enterprise_id:te.enterprise_id,enterprise_name:Oe}});i.notes.length=0,ie.forEach(te=>{i.addNote(te)}),console.log("[NotesView][loadInitialData] Notes chargées dans le store");for(const te of i.columns){const Oe=i.getNotesByColumn(te.id);console.log(`[NotesView][loadInitialData] Colonne ${te.title} (${te.id}): ${Oe.length} notes`),Oe.length>0&&Oe.forEach(we=>{console.log(`  - Note ID=${we.id}, Titre="${we.title}", Niveau d'accès=${we.accessLevel}, Colonne=${we.columnId}`)})}}catch(ye){console.error("[NotesView][loadInitialData] Erreur:",ye),r.error("Erreur lors du chargement des données")}finally{o.value=!1,console.log("[NotesView][loadInitialData] Chargement terminé")}}function j(){t.push({path:"/",query:{tool:"Note"}})}async function Y(ve){if(!ve.location){r.warning("Cette note n'est pas géolocalisée");return}try{const J=(await Sa.getNote(ve.id)).data,se=J.plan;console.log("[NotesView][viewOnMap] Détails de la note récupérés:",J),t.push({path:"/",query:{lat:Array.isArray(ve.location)?ve.location[0].toString():ve.location.coordinates[1].toString(),lng:Array.isArray(ve.location)?ve.location[1].toString():ve.location.coordinates[0].toString(),noteId:ve.id.toString(),planId:se?se.toString():void 0}})}catch(ye){console.error("[NotesView][viewOnMap] Erreur lors de la récupération des détails de la note:",ye),r.error("Erreur lors de l'ouverture de la note sur la carte")}}function V(ve){if(!ve.location){r.warning("Cette note n'est pas géolocalisée");return}let ye,J;Array.isArray(ve.location)?(ye=ve.location[0],J=ve.location[1]):(ye=ve.location.coordinates[1],J=ve.location.coordinates[0]);const se=`https://www.google.com/maps/dir/?api=1&destination=${ye},${J}`;window.open(se,"_blank")}function N(ve){h.value=JSON.parse(JSON.stringify(ve)),p.value="info",l.value=!0}async function q(ve){var J,se;console.log("[NotesView][handleNoteSave] Note sauvegardée:",ve);let ye=ve.enterprise_id;if(ye==null&&(s.isAdmin?ye=null:s.isEntreprise&&s.user?ye=s.user.id:s.isSalarie&&((J=s.user)!=null&&J.enterprise_id)?ye=s.user.enterprise_id:s.isVisiteur&&s.user?ye=s.user.enterprise_id??null:!s.isAdmin&&((se=s.user)!=null&&se.enterprise_id)&&(ye=s.user.enterprise_id),console.log("[NotesView][handleNoteSave] Enterprise ID déterminé automatiquement:",ye),ye!==null&&ve.id&&i.updateNote(ve.id,{enterprise_id:ye})),ye!==null&&ve.id){const fe=i.notes.findIndex(ie=>ie.id===ve.id);if(fe!==-1&&!ve.enterprise_name){const ie=e.value.find(te=>te.id===ye);ie&&(i.notes[fe].enterprise_name=Dl(ie))}}}function $(ve){u.value=ve,a.value=!0}async function F(){if(u.value)try{try{await Sa.deleteNote(u.value.id)}catch(ve){if(ve.response&&ve.response.status===404)console.log("[NotesView][deleteNote] Note non trouvée dans le backend (404), suppression locale uniquement");else throw ve}i.removeNote(u.value.id),r.success("Note supprimée avec succès")}catch(ve){console.error("Erreur lors de la suppression de la note:",ve),r.error("Erreur lors de la suppression de la note")}finally{a.value=!1,u.value=null}}async function B(ve,ye){console.log("[NotesView][onDragChange] Événement:",ve),console.log("[NotesView][onDragChange] Colonne cible:",ye);try{if(ve.added){const{element:J}=ve.added;console.log("[NotesView][onDragChange] Note à déplacer:",J);const se=typeof J=="object"&&J.id?J.id:null;if(!se)throw console.error("[NotesView][onDragChange] ID de note invalide:",J),new Error("ID de note invalide");i.moveNote(se,ye);const ie=ee.value(ye).map(Oe=>Oe.id);i.reorderNotes(ye,ie);const te=i.getColumnById(ye);r.success(`Note déplacée vers ${(te==null?void 0:te.title)||"une autre colonne"}`),await Q(se,{columnId:ye})}if(ve.moved){const J=ee.value(ye),se=J.map(fe=>fe.id);i.reorderNotes(ye,se),r.success("Ordre des notes mis à jour");for(const[fe,ie]of J.entries())await Q(ie.id,{order:fe})}}catch(J){console.error("[NotesView][onDragChange] Erreur:",J),r.error("Une erreur est survenue lors du déplacement de la note")}}async function Q(ve,ye){console.log("[NotesView][updateNoteInBackend] Mise à jour de la note:",ve,ye);try{const J=i.notes.find(ie=>ie.id===ve);if(!J){console.error("[NotesView][updateNoteInBackend] Note non trouvée:",ve);return}const se={...ye};if(ye.columnId){const ie=i.getColumnById(ye.columnId);ie?(console.log(`[NotesView][updateNoteInBackend] Mise à jour de la colonne: ${ie.id} (${ie.title})`),se.column=ie.id,delete se.columnId,delete se.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouvée: ${ye.columnId}`)}const fe={...J,...se,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Données envoyées au backend:",fe),await Sa.updateNote(ve,fe),console.log("[NotesView][updateNoteInBackend] Note mise à jour avec succès")}catch(J){throw console.error("[NotesView][updateNoteInBackend] Erreur:",J),J}}function X(){var ye;let ve=null;s.isAdmin?ve=null:s.isEntreprise&&s.user?ve=s.user.id:s.isSalarie&&((ye=s.user)!=null&&ye.enterprise_id)?ve=s.user.enterprise_id:s.isVisiteur&&s.user&&(console.log("[NotesView][createSimpleNote] Utilisateur visiteur - recherche ID entreprise"),ve=s.user.enterprise_id??null),console.log("[NotesView][createSimpleNote] Enterprise ID déterminé:",ve),h.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:i.getDefaultColumn.id,accessLevel:qi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[],enterprise_id:ve},l.value=!0,p.value="info"}const _e=yt(null),me=yt(!1);function We(){me.value=!me.value}function ae(ve){_e.value&&!_e.value.contains(ve.target)&&(me.value=!1)}return Es(()=>{document.addEventListener("click",ae),window.addEventListener("resize",m)}),jd(()=>{document.removeEventListener("click",ae),window.removeEventListener("resize",m)}),(ve,ye)=>{var J,se;return De(),Fe("div",tX,[x("div",nX,[x("div",rX,[ye[6]||(ye[6]=x("div",{class:"sm:flex-auto"},[x("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),x("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),x("div",iX,[x("div",{class:"relative",ref_key:"dropdownRef",ref:_e},[x("button",{onClick:We,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},ye[5]||(ye[5]=[qr(" Créer "),x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),me.value?(De(),Fe("div",sX,[x("div",{class:"py-1"},[x("button",{onClick:X,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),x("button",{onClick:j,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note géolocalisée ")])])):tn("",!0)],512)])]),x("div",oX,[x("div",aX,[x("div",null,[ye[7]||(ye[7]=x("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Tn(x("input",{type:"text",id:"search","onUpdate:modelValue":ye[0]||(ye[0]=fe=>k.search=fe),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Ur,k.search]])]),x("div",null,[ye[9]||(ye[9]=x("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),Tn(x("select",{id:"date","onUpdate:modelValue":ye[1]||(ye[1]=fe=>k.date=fe),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},ye[8]||(ye[8]=[x("option",{value:""},"Toutes les dates",-1),x("option",{value:"today"},"Aujourd'hui",-1),x("option",{value:"week"},"Cette semaine",-1),x("option",{value:"month"},"Ce mois",-1)]),512),[[Yi,k.date]])]),x("div",null,[ye[11]||(ye[11]=x("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),Tn(x("select",{id:"accessLevel","onUpdate:modelValue":ye[2]||(ye[2]=fe=>k.accessLevel=fe),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[ye[10]||(ye[10]=x("option",{value:""},"Tous les niveaux",-1)),(De(),Fe(kn,null,sr(E,fe=>x("option",{key:fe.id,value:fe.id},Dt(fe.title),9,lX)),64))],512),[[Yi,k.accessLevel]])])])]),o.value?(De(),Fe("div",uX,ye[12]||(ye[12]=[x("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),x("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(De(),Fe("div",cX,[G.value.length===0?(De(),Fe("div",dX,ye[13]||(ye[13]=[x("p",{class:"text-sm text-gray-500"},"Aucune note trouvée",-1)]))):tn("",!0),G.value.length>0?(De(),Fe("div",hX,[(De(!0),Fe(kn,null,sr(S.value,fe=>(De(),Fe("div",{key:fe.id,class:"column-wrapper w-80 flex-shrink-0"},[x("div",fX,[x("div",{class:"p-3 flex items-center justify-between no-select",style:iu({backgroundColor:fe.color+"20",borderBottom:"2px solid "+fe.color})},[x("div",pX,[x("h3",{class:"text-sm font-semibold",style:iu({color:fe.color})},Dt(fe.title),5)]),x("div",gX,[x("span",mX,Dt(ee.value(fe.id).length),1)])],4),x("div",vX,[x("div",yX,[ci(Ln(eX),{list:ee.value(fe.id),class:"space-y-2 empty-column-drop-zone",group:"notes","item-key":"id",handle:v.value?null:".note-drag-handle",onChange:ie=>B(ie,fe.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:v.value},{item:nu(({element:ie})=>[x("div",_X,[x("div",bX,[x("div",{class:Mi(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!v.value,"no-select":!0}])},[x("div",wX,[v.value?tn("",!0):(De(),Fe("svg",xX,ye[14]||(ye[14]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),x("h4",LX,Dt(ie.title),1)]),x("div",null,[x("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:iu({backgroundColor:ge(ie.accessLevel)+"20",color:ge(ie.accessLevel)})},Dt(pe(ie.accessLevel)||"Non défini"),5)])],2),x("div",SX,[x("p",CX,Dt(ie.description||"Aucune description"),1)]),x("div",EX,[x("span",PX,Dt(ie.updatedAt?R(ie.updatedAt):ie.createdAt?R(ie.createdAt):"Date non définie"),1),Ln(s).isAdmin?(De(),Fe("span",MX,Dt(ie.enterprise_name||"Non assignée"),1)):tn("",!0),x("div",kX,[ie.location?(De(),Fe("span",AX,ye[15]||(ye[15]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(De(),Fe("span",TX,ye[16]||(ye[16]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),ie.location?(De(),Fe(kn,{key:2},[x("button",{onClick:te=>V(ie),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},ye[17]||(ye[17]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,DX),x("button",{onClick:te=>Y(ie),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},ye[18]||(ye[18]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,IX)],64)):tn("",!0),x("button",{onClick:te=>N(ie),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Éditer la note"},ye[19]||(ye[19]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,OX),x("button",{onClick:te=>$(ie),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},ye[20]||(ye[20]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,NX)])])])])]),"empty-content":nu(()=>ye[21]||(ye[21]=[x("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])):tn("",!0)]))]),a.value?(De(),Fe("div",RX,[x("div",BX,[ye[23]||(ye[23]=x("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),x("div",FX,[ye[22]||(ye[22]=fl('<div class="p-4 md:p-6" data-v-88bb49f3><div class="flex items-start" data-v-88bb49f3><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-88bb49f3><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-88bb49f3><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-88bb49f3></path></svg></div><div class="ml-4 flex-1" data-v-88bb49f3><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-88bb49f3> Supprimer la note </h3><div class="mt-2" data-v-88bb49f3><p class="text-sm text-gray-500" data-v-88bb49f3> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),x("div",jX,[x("button",{onClick:F,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),x("button",{onClick:ye[3]||(ye[3]=fe=>a.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):tn("",!0),l.value?(De(),$o(WE,{key:1,note:h.value,"is-new-note":!((J=h.value)!=null&&J.id),location:(se=h.value)==null?void 0:se.location,onClose:ye[4]||(ye[4]=fe=>l.value=!1),onSave:q},null,8,["note","is-new-note","location"])):tn("",!0)])}}}),$X=kc(zX,[["__scopeId","data-v-88bb49f3"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function jm(n){return n+.5|0}const gh=(n,e,t)=>Math.max(Math.min(n,t),e);function Ag(n){return gh(jm(n*2.55),0,255)}function xh(n){return gh(jm(n*255),0,255)}function kd(n){return gh(jm(n/2.55)/100,0,1)}function o3(n){return gh(jm(n*100),0,100)}const Hu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Hb=[..."0123456789ABCDEF"],UX=n=>Hb[n&15],VX=n=>Hb[(n&240)>>4]+Hb[n&15],N0=n=>(n&240)>>4===(n&15),HX=n=>N0(n.r)&&N0(n.g)&&N0(n.b)&&N0(n.a);function GX(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Hu[n[1]]*17,g:255&Hu[n[2]]*17,b:255&Hu[n[3]]*17,a:e===5?Hu[n[4]]*17:255}:(e===7||e===9)&&(t={r:Hu[n[1]]<<4|Hu[n[2]],g:Hu[n[3]]<<4|Hu[n[4]],b:Hu[n[5]]<<4|Hu[n[6]],a:e===9?Hu[n[7]]<<4|Hu[n[8]]:255})),t}const WX=(n,e)=>n<255?e(n):"";function qX(n){var e=HX(n)?UX:VX;return n?"#"+e(n.r)+e(n.g)+e(n.b)+WX(n.a,e):void 0}const YX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function TP(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function KX(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function ZX(n,e,t){const r=TP(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function XX(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function nw(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2;let l,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),l=XX(t,r,i,h,s),l=l*60+.5),[l|0,u||0,a]}function rw(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(xh)}function iw(n,e,t){return rw(TP,n,e,t)}function JX(n,e,t){return rw(ZX,n,e,t)}function QX(n,e,t){return rw(KX,n,e,t)}function DP(n){return(n%360+360)%360}function eJ(n){const e=YX.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Ag(+e[5]):xh(+e[5]));const i=DP(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=JX(i,s,o):e[1]==="hsv"?r=QX(i,s,o):r=iw(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function tJ(n,e){var t=nw(n);t[0]=DP(t[0]+e),t=iw(t),n.r=t[0],n.g=t[1],n.b=t[2]}function nJ(n){if(!n)return;const e=nw(n),t=e[0],r=o3(e[1]),i=o3(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${kd(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const a3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},l3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function rJ(){const n={},e=Object.keys(l3),t=Object.keys(a3);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<t.length;i++)s=t[i],a=a.replace(s,a3[s]);s=parseInt(l3[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let R0;function iJ(n){R0||(R0=rJ(),R0.transparent=[0,0,0,0]);const e=R0[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const sJ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function oJ(n){const e=sJ.exec(n);let t=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?Ag(o):gh(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Ag(r):gh(r,0,255)),i=255&(e[4]?Ag(i):gh(i,0,255)),s=255&(e[6]?Ag(s):gh(s,0,255)),{r,g:i,b:s,a:t}}}function aJ(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${kd(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const S_=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,tp=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function lJ(n,e,t){const r=tp(kd(n.r)),i=tp(kd(n.g)),s=tp(kd(n.b));return{r:xh(S_(r+t*(tp(kd(e.r))-r))),g:xh(S_(i+t*(tp(kd(e.g))-i))),b:xh(S_(s+t*(tp(kd(e.b))-s))),a:n.a+t*(e.a-n.a)}}function B0(n,e,t){if(n){let r=nw(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=iw(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function IP(n,e){return n&&Object.assign(e||{},n)}function u3(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=xh(n[3]))):(e=IP(n,{r:0,g:0,b:0,a:1}),e.a=xh(e.a)),e}function uJ(n){return n.charAt(0)==="r"?oJ(n):eJ(n)}class wm{constructor(e){if(e instanceof wm)return e;const t=typeof e;let r;t==="object"?r=u3(e):t==="string"&&(r=GX(e)||iJ(e)||uJ(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=IP(this._rgb);return e&&(e.a=kd(e.a)),e}set rgb(e){this._rgb=u3(e)}rgbString(){return this._valid?aJ(this._rgb):void 0}hexString(){return this._valid?qX(this._rgb):void 0}hslString(){return this._valid?nJ(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=r.a-i.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,r.r=255&u*r.r+s*i.r+.5,r.g=255&u*r.g+s*i.g+.5,r.b=255&u*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=lJ(this._rgb,e._rgb,t)),this}clone(){return new wm(this.rgb)}alpha(e){return this._rgb.a=xh(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=jm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return B0(this._rgb,2,e),this}darken(e){return B0(this._rgb,2,-e),this}saturate(e){return B0(this._rgb,1,e),this}desaturate(e){return B0(this._rgb,1,-e),this}rotate(e){return tJ(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Cd(){}const cJ=(()=>{let n=0;return()=>n++})();function Gi(n){return n===null||typeof n>"u"}function eo(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ki(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Mo(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Su(n,e){return Mo(n)?n:e}function si(n,e){return typeof n>"u"?e:n}const dJ=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,OP=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Os(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function ps(n,e,t,r){let i,s,o;if(eo(n))for(s=n.length,i=0;i<s;i++)e.call(t,n[i],i);else if(ki(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function iy(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function sy(n){if(eo(n))return n.map(sy);if(ki(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=sy(n[t[i]]);return e}return n}function NP(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function hJ(n,e,t,r){if(!NP(n))return;const i=e[n],s=t[n];ki(i)&&ki(s)?xm(i,s,r):e[n]=sy(s)}function xm(n,e,t){const r=eo(e)?e:[e],i=r.length;if(!ki(n))return n;t=t||{};const s=t.merger||hJ;let o;for(let a=0;a<i;++a){if(o=r[a],!ki(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)s(l[u],n,o,t)}return n}function em(n,e){return xm(n,e,{merger:fJ})}function fJ(n,e,t){if(!NP(n))return;const r=e[n],i=t[n];ki(r)&&ki(i)?em(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=sy(i))}const c3={"":n=>n,x:n=>n.x,y:n=>n.y};function pJ(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function gJ(n){const e=pJ(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function Mh(n,e){return(c3[e]||(c3[e]=gJ(e)))(n)}function sw(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Lm=n=>typeof n<"u",kh=n=>typeof n=="function",d3=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function mJ(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Us=Math.PI,$s=2*Us,vJ=$s+Us,oy=Number.POSITIVE_INFINITY,yJ=Us/180,Go=Us/2,Xh=Us/4,h3=Us*2/3,mh=Math.log10,id=Math.sign;function tm(n,e,t){return Math.abs(n-e)<t}function f3(n){const e=Math.round(n);n=tm(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(mh(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function _J(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function Np(n){return!isNaN(parseFloat(n))&&isFinite(n)}function bJ(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function RP(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function xc(n){return n*(Us/180)}function ow(n){return n*(180/Us)}function p3(n){if(!Mo(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function BP(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*Us&&(s+=$s),{angle:s,distance:i}}function Gb(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function wJ(n,e){return(n-e+vJ)%$s-Us}function Cu(n){return(n%$s+$s)%$s}function Sm(n,e,t,r){const i=Cu(n),s=Cu(e),o=Cu(t),a=Cu(s-i),l=Cu(o-i),u=Cu(i-s),h=Cu(i-o);return i===s||i===o||r&&s===o||a>l&&u<h}function Ea(n,e,t){return Math.max(e,Math.min(t,n))}function xJ(n){return Ea(n,-32768,32767)}function Od(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function aw(n,e,t){t=t||(o=>n[o]<e);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const Nd=(n,e,t,r)=>aw(n,t,r?i=>{const s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),LJ=(n,e,t)=>aw(n,t,r=>n[r][e]>=t);function SJ(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}const FP=["push","pop","shift","splice","unshift"];function CJ(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),FP.forEach(t=>{const r="_onData"+sw(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function g3(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(FP.forEach(s=>{delete n[s]}),delete n._chartjs)}function jP(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const zP=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function $P(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,zP.call(window,()=>{r=!1,n.apply(e,t)}))}}function EJ(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const lw=n=>n==="start"?"left":n==="end"?"right":"center",ol=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,PJ=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function UP(n,e,t){const r=e.length;let i=0,s=r;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:u,max:h,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=Ea(Math.min(Nd(a,l,u).lo,t?r:Nd(e,l,o.getPixelForValue(u)).lo),0,r-1)),v?s=Ea(Math.max(Nd(a,o.axis,h,!0).hi+1,t?0:Nd(e,l,o.getPixelForValue(h),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function VP(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const F0=n=>n===0||n===1,m3=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*$s/t)),v3=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*$s/t)+1,nm={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Go)+1,easeOutSine:n=>Math.sin(n*Go),easeInOutSine:n=>-.5*(Math.cos(Us*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>F0(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>F0(n)?n:m3(n,.075,.3),easeOutElastic:n=>F0(n)?n:v3(n,.075,.3),easeInOutElastic(n){return F0(n)?n:n<.5?.5*m3(n*2,.1125,.45):.5+.5*v3(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-nm.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?nm.easeInBounce(n*2)*.5:nm.easeOutBounce(n*2-1)*.5+.5};function uw(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function y3(n){return uw(n)?n:new wm(n)}function C_(n){return uw(n)?n:new wm(n).saturate(.5).darken(.1).hexString()}const MJ=["x","y","borderWidth","radius","tension"],kJ=["color","borderColor","backgroundColor"];function AJ(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:kJ},numbers:{type:"number",properties:MJ}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function TJ(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const _3=new Map;function DJ(n,e){e=e||{};const t=n+JSON.stringify(e);let r=_3.get(t);return r||(r=new Intl.NumberFormat(n,e),_3.set(t,r)),r}function zm(n,e,t){return DJ(e,t).format(n)}const HP={values(n){return eo(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=IJ(n,t)}const o=mh(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),zm(n,r,l)},logarithmic(n,e,t){if(n===0)return"0";const r=t[e].significand||n/Math.pow(10,Math.floor(mh(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?HP.numeric.call(this,n,e,t):""}};function IJ(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Zy={formatters:HP};function OJ(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Zy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Lf=Object.create(null),Wb=Object.create(null);function rm(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function E_(n,e,t){return typeof e=="string"?xm(rm(n,e),t):xm(rm(n,""),e)}class NJ{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>C_(i.backgroundColor),this.hoverBorderColor=(r,i)=>C_(i.borderColor),this.hoverColor=(r,i)=>C_(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return E_(this,e,t)}get(e){return rm(this,e)}describe(e,t){return E_(Wb,e,t)}override(e,t){return E_(Lf,e,t)}route(e,t,r,i){const s=rm(this,e),o=rm(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],u=o[i];return ki(l)?Object.assign({},u,l):si(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var ko=new NJ({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[AJ,TJ,OJ]);function RJ(n){return!n||Gi(n.size)||Gi(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function ay(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function BJ(n,e,t,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,u,h,p,v;for(l=0;l<a;l++)if(p=t[l],p!=null&&!eo(p))o=ay(n,i,s,o,p);else if(eo(p))for(u=0,h=p.length;u<h;u++)v=p[u],v!=null&&!eo(v)&&(o=ay(n,i,s,o,v));n.restore();const m=s.length/2;if(m>t.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function Jh(n,e,t){const r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function b3(n,e){e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function qb(n,e,t,r){GP(n,e,t,r,null)}function GP(n,e,t,r,i){let s,o,a,l,u,h,p,v;const m=e.pointStyle,S=e.rotation,E=e.radius;let k=(S||0)*yJ;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(k),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(E)||E<=0)){switch(n.beginPath(),m){default:i?n.ellipse(t,r,i/2,E,0,0,$s):n.arc(t,r,E,0,$s),n.closePath();break;case"triangle":h=i?i/2:E,n.moveTo(t+Math.sin(k)*h,r-Math.cos(k)*E),k+=h3,n.lineTo(t+Math.sin(k)*h,r-Math.cos(k)*E),k+=h3,n.lineTo(t+Math.sin(k)*h,r-Math.cos(k)*E),n.closePath();break;case"rectRounded":u=E*.516,l=E-u,o=Math.cos(k+Xh)*l,p=Math.cos(k+Xh)*(i?i/2-u:l),a=Math.sin(k+Xh)*l,v=Math.sin(k+Xh)*(i?i/2-u:l),n.arc(t-p,r-a,u,k-Us,k-Go),n.arc(t+v,r-o,u,k-Go,k),n.arc(t+p,r+a,u,k,k+Go),n.arc(t-v,r+o,u,k+Go,k+Us),n.closePath();break;case"rect":if(!S){l=Math.SQRT1_2*E,h=i?i/2:l,n.rect(t-h,r-l,2*h,2*l);break}k+=Xh;case"rectRot":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),n.moveTo(t-p,r-a),n.lineTo(t+v,r-o),n.lineTo(t+p,r+a),n.lineTo(t-v,r+o),n.closePath();break;case"crossRot":k+=Xh;case"cross":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),n.moveTo(t-p,r-a),n.lineTo(t+p,r+a),n.moveTo(t+v,r-o),n.lineTo(t-v,r+o);break;case"star":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),n.moveTo(t-p,r-a),n.lineTo(t+p,r+a),n.moveTo(t+v,r-o),n.lineTo(t-v,r+o),k+=Xh,p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),n.moveTo(t-p,r-a),n.lineTo(t+p,r+a),n.moveTo(t+v,r-o),n.lineTo(t-v,r+o);break;case"line":o=i?i/2:Math.cos(k)*E,a=Math.sin(k)*E,n.moveTo(t-o,r-a),n.lineTo(t+o,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(k)*(i?i/2:E),r+Math.sin(k)*E);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Rd(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Xy(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Jy(n){n.restore()}function FJ(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function jJ(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function zJ(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Gi(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function $J(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,u=t+s.actualBoundingBoxDescent,h=i.strikethrough?(l+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function UJ(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Sf(n,e,t,r,i,s={}){const o=eo(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(n.save(),n.font=i.string,zJ(n,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&UJ(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Gi(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(u,t,r,s.maxWidth)),n.fillText(u,t,r,s.maxWidth),$J(n,t,r,u,s),r+=Number(i.lineHeight);n.restore()}function Cm(n,e){const{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*Us,Us,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Us,Go,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Go,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-Go,!0),n.lineTo(t+o.topLeft,r)}const VJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,HJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function GJ(n,e){const t=(""+n).match(VJ);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const WJ=n=>+n||0;function cw(n,e){const t={},r=ki(e),i=r?Object.keys(e):e,s=ki(n)?r?o=>si(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=WJ(s(o));return t}function WP(n){return cw(n,{top:"y",right:"x",bottom:"y",left:"x"})}function vf(n){return cw(n,["topLeft","topRight","bottomLeft","bottomRight"])}function gl(n){const e=WP(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function da(n,e){n=n||{},e=e||ko.font;let t=si(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=si(n.style,e.style);r&&!(""+r).match(HJ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:si(n.family,e.family),lineHeight:GJ(si(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:si(n.weight,e.weight),string:""};return i.string=RJ(i),i}function Tg(n,e,t,r){let i,s,o;for(i=0,s=n.length;i<s;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function qJ(n,e,t){const{min:r,max:i}=n,s=OP(e,(i-r)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Dh(n,e){return Object.assign(Object.create(n),e)}function dw(n,e=[""],t,r,i=()=>n[0]){const s=t||n;typeof r>"u"&&(r=ZP("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>dw([a,...n],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return YP(a,l,()=>tQ(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return x3(a).includes(l)},ownKeys(a){return x3(a)},set(a,l,u){const h=a._storage||(a._storage=i());return a[l]=h[l]=u,delete a._keys,!0}})}function Rp(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:qP(n,r),setContext:s=>Rp(n,s,t,r),override:s=>Rp(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return YP(s,o,()=>KJ(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function qP(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:kh(t)?t:()=>t,isIndexable:kh(r)?r:()=>r}}const YJ=(n,e)=>n?n+sw(e):e,hw=(n,e)=>ki(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function YP(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];const r=t();return n[e]=r,r}function KJ(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n;let a=r[e];return kh(a)&&o.isScriptable(e)&&(a=ZJ(e,a,n,t)),eo(a)&&a.length&&(a=XJ(e,a,n,o.isIndexable)),hw(e,a)&&(a=Rp(a,i,s&&s[e],o)),a}function ZJ(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(s,o||r);return a.delete(n),hw(n,l)&&(l=fw(i._scopes,i,n,l)),l}function XJ(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(ki(e[0])){const l=e,u=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const p=fw(u,i,n,h);e.push(Rp(p,s,o&&o[n],a))}}return e}function KP(n,e,t){return kh(n)?n(e,t):n}const JJ=(n,e)=>n===!0?e:typeof n=="string"?Mh(e,n):void 0;function QJ(n,e,t,r,i){for(const s of e){const o=JJ(t,s);if(o){n.add(o);const a=KP(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function fw(n,e,t,r){const i=e._rootScopes,s=KP(e._fallback,t,r),o=[...n,...i],a=new Set;a.add(r);let l=w3(a,o,t,s||t,r);return l===null||typeof s<"u"&&s!==t&&(l=w3(a,o,s,l,r),l===null)?!1:dw(Array.from(a),[""],i,s,()=>eQ(e,t,r))}function w3(n,e,t,r,i){for(;t;)t=QJ(n,e,t,r,i);return t}function eQ(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return eo(i)&&ki(t)?t:i||{}}function tQ(n,e,t,r){let i;for(const s of e)if(i=ZP(YJ(s,n),t),typeof i<"u")return hw(n,i)?fw(t,r,n,i):i}function ZP(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function x3(n){let e=n._keys;return e||(e=n._keys=nQ(n._scopes)),e}function nQ(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function XP(n,e,t,r){const{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r);let a,l,u,h;for(a=0,l=r;a<l;++a)u=a+t,h=e[u],o[a]={r:i.parse(Mh(h,s),u)};return o}const rQ=Number.EPSILON||1e-14,Bp=(n,e)=>e<n.length&&!n[e].skip&&n[e],JP=n=>n==="x"?"y":"x";function iQ(n,e,t,r){const i=n.skip?e:n,s=e,o=t.skip?e:t,a=Gb(s,i),l=Gb(o,s);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const p=r*u,v=r*h;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function sQ(n,e,t){const r=n.length;let i,s,o,a,l,u=Bp(n,0);for(let h=0;h<r-1;++h)if(l=u,u=Bp(n,h+1),!(!l||!u)){if(tm(e[h],0,rQ)){t[h]=t[h+1]=0;continue}i=t[h]/e[h],s=t[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[h]=i*o*e[h],t[h+1]=s*o*e[h])}}function oQ(n,e,t="x"){const r=JP(t),i=n.length;let s,o,a,l=Bp(n,0);for(let u=0;u<i;++u){if(o=a,a=l,l=Bp(n,u+1),!a)continue;const h=a[t],p=a[r];o&&(s=(h-o[t])/3,a[`cp1${t}`]=h-s,a[`cp1${r}`]=p-s*e[u]),l&&(s=(l[t]-h)/3,a[`cp2${t}`]=h+s,a[`cp2${r}`]=p+s*e[u])}}function aQ(n,e="x"){const t=JP(e),r=n.length,i=Array(r).fill(0),s=Array(r);let o,a,l,u=Bp(n,0);for(o=0;o<r;++o)if(a=l,l=u,u=Bp(n,o+1),!!l){if(u){const h=u[e]-l[e];i[o]=h!==0?(u[t]-l[t])/h:0}s[o]=a?u?id(i[o-1])!==id(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}sQ(n,i,s),oQ(n,s,e)}function j0(n,e,t){return Math.max(Math.min(n,t),e)}function lQ(n,e){let t,r,i,s,o,a=Rd(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=a,a=t<r-1&&Rd(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=j0(i.cp1x,e.left,e.right),i.cp1y=j0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=j0(i.cp2x,e.left,e.right),i.cp2y=j0(i.cp2y,e.top,e.bottom)))}function uQ(n,e,t,r,i){let s,o,a,l;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")aQ(n,i);else{let u=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=iQ(u,a,n[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&lQ(n,t)}function pw(){return typeof window<"u"&&typeof document<"u"}function gw(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ly(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const Qy=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function cQ(n,e){return Qy(n).getPropertyValue(e)}const dQ=["top","right","bottom","left"];function yf(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=dQ[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const hQ=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function fQ(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(hQ(i,s,n.target))a=i,l=s;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function rf(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=Qy(t),s=i.boxSizing==="border-box",o=yf(i,"padding"),a=yf(i,"border","width"),{x:l,y:u,box:h}=fQ(n,t),p=o.left+(h&&a.left),v=o.top+(h&&a.top);let{width:m,height:S}=e;return s&&(m-=o.width+a.width,S-=o.height+a.height),{x:Math.round((l-p)/m*t.width/r),y:Math.round((u-v)/S*t.height/r)}}function pQ(n,e,t){let r,i;if(e===void 0||t===void 0){const s=gw(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),a=Qy(s),l=yf(a,"border","width"),u=yf(a,"padding");e=o.width-u.width-l.width,t=o.height-u.height-l.height,r=ly(a.maxWidth,s,"clientWidth"),i=ly(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||oy,maxHeight:i||oy}}const z0=n=>Math.round(n*10)/10;function gQ(n,e,t,r){const i=Qy(n),s=yf(i,"margin"),o=ly(i.maxWidth,n,"clientWidth")||oy,a=ly(i.maxHeight,n,"clientHeight")||oy,l=pQ(n,e,t);let{width:u,height:h}=l;if(i.boxSizing==="content-box"){const v=yf(i,"border","width"),m=yf(i,"padding");u-=m.width+v.width,h-=m.height+v.height}return u=Math.max(0,u-s.width),h=Math.max(0,r?u/r:h-s.height),u=z0(Math.min(u,o,l.maxWidth)),h=z0(Math.min(h,a,l.maxHeight)),u&&!h&&(h=z0(u/2)),(e!==void 0||t!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,u=z0(Math.floor(h*r))),{width:u,height:h}}function L3(n,e,t){const r=e||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const mQ=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};pw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function S3(n,e){const t=cQ(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function sf(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function vQ(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function yQ(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=sf(n,i,t),a=sf(i,s,t),l=sf(s,e,t),u=sf(o,a,t),h=sf(a,l,t);return sf(u,h,t)}const _Q=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},bQ=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Cp(n,e,t){return n?_Q(e,t):bQ()}function QP(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function eM(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function tM(n){return n==="angle"?{between:Sm,compare:wJ,normalize:Cu}:{between:Od,compare:(e,t)=>e-t,normalize:e=>e}}function C3({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function wQ(n,e,t){const{property:r,start:i,end:s}=t,{between:o,normalize:a}=tM(r),l=e.length;let{start:u,end:h,loop:p}=n,v,m;if(p){for(u+=l,h+=l,v=0,m=l;v<m&&o(a(e[u%l][r]),i,s);++v)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:n.style}}function nM(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,o=e.length,{compare:a,between:l,normalize:u}=tM(r),{start:h,end:p,loop:v,style:m}=wQ(n,e,t),S=[];let E=!1,k=null,T,A,R;const G=()=>l(i,R,T)&&a(i,R)!==0,ee=()=>a(s,T)===0||l(s,R,T),pe=()=>E||G(),ge=()=>!E||ee();for(let O=h,j=h;O<=p;++O)A=e[O%o],!A.skip&&(T=u(A[r]),T!==R&&(E=l(T,i,s),k===null&&pe()&&(k=a(T,i)===0?O:j),k!==null&&ge()&&(S.push(C3({start:k,end:O,loop:v,count:o,style:m})),k=null),j=O,R=T));return k!==null&&S.push(C3({start:k,end:p,loop:v,count:o,style:m})),S}function rM(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=nM(r[i],n.points,e);s.length&&t.push(...s)}return t}function xQ(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}function LQ(n,e,t,r){const i=n.length,s=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const u=n[l%i];u.skip||u.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function SQ(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:o,end:a}=xQ(t,i,s,r);if(r===!0)return E3(n,[{start:o,end:a,loop:s}],t,e);const l=a<o?a+i:a,u=!!n._fullLoop&&o===0&&a===i-1;return E3(n,LQ(t,o,l,u),t,e)}function E3(n,e,t,r){return!r||!r.setContext||!t?e:CQ(n,e,t,r)}function CQ(n,e,t,r){const i=n._chart.getContext(),s=P3(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,u=[];let h=s,p=e[0].start,v=p;function m(S,E,k,T){const A=a?-1:1;if(S!==E){for(S+=l;t[S%l].skip;)S-=A;for(;t[E%l].skip;)E+=A;S%l!==E%l&&(u.push({start:S%l,end:E%l,loop:k,style:T}),h=T,p=E%l)}}for(const S of e){p=a?p:S.start;let E=t[p%l],k;for(v=p+1;v<=S.end;v++){const T=t[v%l];k=P3(r.setContext(Dh(i,{type:"segment",p0:E,p1:T,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),EQ(k,h)&&m(p,v-1,S.loop,h),E=T,h=k}p<v-1&&m(p,v-1,S.loop,h)}return u}function P3(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function EQ(n,e){if(!e)return!1;const t=[],r=function(i,s){return uw(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class PQ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const s=t.listeners[i],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=zP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ed=new PQ;const M3="transparent",MQ={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=y3(n||M3),i=r.valid&&y3(e||M3);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class kQ{constructor(e,t,r,i){const s=t[r];i=Tg([e.to,i,s,e.from]);const o=Tg([e.from,s,i]);this._active=!0,this._fn=e.fn||MQ[e.type||typeof o],this._easing=nm[e.easing]||nm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Tg([e.to,t,i,e.from]),this._from=Tg([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=s;return}l=t/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class iM{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ki(e))return;const t=Object.keys(ko.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!ki(s))return;const o={};for(const a of t)o[a]=s[a];(eo(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){const r=t.options,i=TQ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&AQ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,t));continue}const h=t[u];let p=s[u];const v=r.get(u);if(p)if(v&&p.active()){p.update(v,h,a);continue}else p.cancel();if(!v||!v.duration){e[u]=h;continue}s[u]=p=new kQ(v,e,u,h),i.push(p)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return Ed.add(this._chart,r),!0}}function AQ(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function TQ(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function k3(n,e){const t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function DQ(n,e,t){if(t===!1)return!1;const r=k3(n,t),i=k3(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function IQ(n){let e,t,r,i;return ki(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function sM(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function A3(n,e,t,r={}){const i=n.keys,s=r.mode==="single";let o,a,l,u;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===t){if(r.all)continue;break}u=n.values[l],Mo(u)&&(s||e===0||id(e)===id(u))&&(e+=u)}return e}}function OQ(n){const e=Object.keys(n),t=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],t[r]={x:s,y:n[s]};return t}function T3(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function NQ(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function RQ(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function BQ(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function D3(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function I3(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,u=o.axis,h=NQ(s,o,r),p=e.length;let v;for(let m=0;m<p;++m){const S=e[m],{[l]:E,[u]:k}=S,T=S._stacks||(S._stacks={});v=T[u]=BQ(i,h,E),v[a]=k,v._top=D3(v,o,!0,r.type),v._bottom=D3(v,o,!1,r.type);const A=v._visualValues||(v._visualValues={});A[a]=k}}function P_(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function FQ(n,e){return Dh(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function jQ(n,e,t){return Dh(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function hg(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}const M_=n=>n==="reset"||n==="none",O3=(n,e)=>e?n:Object.assign({},n),zQ=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:sM(t,!0),values:null};class Sc{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=T3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&hg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(p,v,m,S)=>p==="x"?v:p==="r"?S:m,s=t.xAxisID=si(r.xAxisID,P_(e,"x")),o=t.yAxisID=si(r.yAxisID,P_(e,"y")),a=t.rAxisID=si(r.rAxisID,P_(e,"r")),l=t.indexAxis,u=t.iAxisID=i(l,s,o,a),h=t.vAxisID=i(l,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&g3(this._data,this),e._stacked&&hg(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(ki(t))this._data=OQ(t);else if(r!==t){if(r){g3(r,this);const i=this._cachedMeta;hg(i),i._parsed=[]}t&&Object.isExtensible(t)&&CJ(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=T3(t.vScale,t),t.stack!==r.stack&&(i=!0,hg(t),t.stack=r.stack),this._resyncElements(e),(i||s!==t._stacked)&&I3(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&t===i.length?!0:r._sorted,u=e>0&&r._parsed[e-1],h,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{eo(i[e])?v=this.parseArrayData(r,i,e,t):ki(i[e])?v=this.parseObjectData(r,i,e,t):v=this.parsePrimitiveData(r,i,e,t);const m=()=>p[a]===null||u&&p[a]<u[a];for(h=0;h<t;++h)r._parsed[h+e]=p=v[h],l&&(m()&&(l=!1),u=p);r._sorted=l}o&&I3(this,v)}parsePrimitiveData(e,t,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),h=s===o,p=new Array(i);let v,m,S;for(v=0,m=i;v<m;++v)S=v+r,p[v]={[a]:h||s.parse(u[S],S),[l]:o.parse(t[S],S)};return p}parseArrayData(e,t,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,u,h,p;for(l=0,u=i;l<u;++l)h=l+r,p=t[h],a[l]={x:s.parse(p[0],h),y:o.parse(p[1],h)};return a}parseObjectData(e,t,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let h,p,v,m;for(h=0,p=i;h<p;++h)v=h+r,m=t[v],u[h]={x:s.parse(Mh(m,a),v),y:o.parse(Mh(m,l),v)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,s=this._cachedMeta,o=t[e.axis],a={keys:sM(i,!0),values:t._stacks[e.axis]._visualValues};return A3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const s=r[t.axis];let o=s===null?NaN:s;const a=i&&r._stacks[t.axis];i&&a&&(i.values=a,o=A3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=zQ(t,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=RQ(a);let v,m;function S(){m=i[v];const E=m[a.axis];return!Mo(m[e.axis])||h>E||p<E}for(v=0;v<o&&!(!S()&&(this.updateRangeFromParsed(u,e,m,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!S()){this.updateRangeFromParsed(u,e,m,l);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i][e.axis],Mo(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=IQ(si(this.options.clip,DQ(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],s=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const p=i[h];p.hidden||(p.active&&u?o.push(p):p.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=jQ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=FQ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",s=this._cachedDataOpts,o=e+"-"+t,a=s[o],l=this.enableOptionSharing&&Lm(r);if(a)return O3(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=u.getOptionScopes(this.getDataset(),h),m=Object.keys(ko.elements[e]),S=()=>this.getContext(r,i,t),E=u.resolveNamedOptions(v,m,S,p);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(O3(E,l))),E}_resolveAnimations(e,t,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,t),v=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(v,this.getContext(e,r,t))}const u=new iM(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||M_(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:o}}updateElement(e,t,r,i){M_(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!M_(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const i=r.length,s=t.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t,r=!0){const i=this._cachedMeta,s=i.data,o=e+t;let a;const l=u=>{for(u.length+=t,a=u.length-1;a>=o;a--)u[a]=u[a-t]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&hg(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}tt(Sc,"defaults",{}),tt(Sc,"datasetElementType",null),tt(Sc,"dataElementType",null);function $Q(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=jP(r.sort((i,s)=>i-s))}return n._cache.$bar}function UQ(n){const e=n.iScale,t=$Q(e,n.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Lm(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function VQ(n,e,t,r){const i=t.barThickness;let s,o;return Gi(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}function HQ(n,e,t,r){const i=e.pixels,s=i[n];let o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null;const l=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const u=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:t.barPercentage,start:u}}function GQ(n,e,t,r){const i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[t.axis]=u,e._custom={barStart:l,barEnd:u,start:i,end:s,min:o,max:a}}function oM(n,e,t,r){return eo(n)?GQ(n,e,t,r):e[t.axis]=t.parse(n,r),e}function N3(n,e,t,r){const i=n.iScale,s=n.vScale,o=i.getLabels(),a=i===s,l=[];let u,h,p,v;for(u=t,h=t+r;u<h;++u)v=e[u],p={},p[i.axis]=a||i.parse(o[u],u),l.push(oM(v,p,s,u));return l}function k_(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function WQ(n,e,t){return n!==0?id(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function qQ(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}function YQ(n,e,t,r){let i=e.borderSkipped;const s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:h}=qQ(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=u:(t._bottom||0)===r?i=h:(s[R3(h,o,a,l)]=!0,i=u)),s[R3(i,o,a,l)]=!0,n.borderSkipped=s}function R3(n,e,t,r){return r?(n=KQ(n,e,t),n=B3(n,t,e)):n=B3(n,e,t),n}function KQ(n,e,t){return n===e?t:n===t?e:n}function B3(n,e,t){return n==="start"?e:n==="end"?t:n}function ZQ(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class vv extends Sc{parsePrimitiveData(e,t,r,i){return N3(e,t,r,i)}parseArrayData(e,t,r,i){return N3(e,t,r,i)}parseObjectData(e,t,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?a:l,h=o.axis==="x"?a:l,p=[];let v,m,S,E;for(v=r,m=r+i;v<m;++v)E=t[v],S={},S[s.axis]=s.parse(Mh(E,u),v),p.push(oM(Mh(E,h),S,o,v));return p}updateRangeFromParsed(e,t,r,i){super.updateRangeFromParsed(e,t,r,i);const s=r._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:i}=t,s=this.getParsed(e),o=s._custom,a=k_(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(t,i);for(let m=t;m<t+r;m++){const S=this.getParsed(m),E=s||Gi(S[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),k=this._calculateBarIndexPixels(m,h),T=(S._stacks||{})[a.axis],A={horizontal:u,base:E.base,enableBorderRadius:!T||k_(S._custom)||o===T._top||o===T._bottom,x:u?E.head:k.center,y:u?k.center:E.head,height:u?k.size:Math.abs(E.size),width:u?Math.abs(E.size):k.size};v&&(A.options=p||this.resolveDataElementOptions(m,e[m].active?"active":i));const R=A.options||e[m].options;YQ(A,R,T,o),ZQ(A,R,h.ratio),this.updateElement(e[m],m,A,i)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const u=l.controller.getParsed(t),h=u&&u[l.vScale.axis];if(Gi(h)||isNaN(h))return!0};for(const l of i)if(!(t!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,r){const i=this._getStacks(e,r),s=t!==void 0?i.indexOf(t):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,i=[];let s,o;for(s=0,o=t.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||UQ(t),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),u=l._custom,h=k_(u);let p=l[t.axis],v=0,m=r?this.applyStack(t,l,r):p,S,E;m!==p&&(v=m-p,m=p),h&&(p=u.barStart,m=u.barEnd-u.barStart,p!==0&&id(p)!==id(u.barEnd)&&(v=0),v+=p);const k=!Gi(s)&&!h?s:v;let T=t.getPixelForValue(k);if(this.chart.getDataVisibility(e)?S=t.getPixelForValue(v+m):S=T,E=S-T,Math.abs(E)<o){E=WQ(E,t,a)*o,p===a&&(T-=E/2);const A=t.getPixelForDecimal(0),R=t.getPixelForDecimal(1),G=Math.min(A,R),ee=Math.max(A,R);T=Math.max(Math.min(T,ee),G),S=T+E,r&&!h&&(l._stacks[t.axis]._visualValues[i]=t.getValueForPixel(S)-t.getValueForPixel(T))}if(T===t.getPixelForValue(a)){const A=id(E)*t.getLineWidthForValue(a)/2;T+=A,E-=A}return{size:E,base:T,head:S,center:S+E/2}}_calculateBarIndexPixels(e,t){const r=t.scale,i=this.options,s=i.skipNull,o=si(i.maxBarThickness,1/0);let a,l;if(t.grouped){const u=s?this._getStackCount(e):t.stackCount,h=i.barThickness==="flex"?HQ(e,t,i,u):VQ(e,t,i,u),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*p+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[t.axis]!==null&&r[s].draw(this._ctx)}}tt(vv,"id","bar"),tt(vv,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),tt(vv,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class yv extends Sc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,i){const s=super.parsePrimitiveData(e,t,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,t,r,i){const s=super.parseArrayData(e,t,r,i);for(let o=0;o<s.length;o++){const a=t[r+o];s[o]._custom=si(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,t,r,i){const s=super.parseObjectData(e,t,r,i);for(let o=0;o<s.length;o++){const a=t[r+o];s[o]._custom=si(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),u=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(u?", "+u:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(t,i),h=o.axis,p=a.axis;for(let v=t;v<t+r;v++){const m=e[v],S=!s&&this.getParsed(v),E={},k=E[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(S[h]),T=E[p]=s?a.getBasePixel():a.getPixelForValue(S[p]);E.skip=isNaN(k)||isNaN(T),u&&(E.options=l||this.resolveDataElementOptions(v,m.active?"active":i),s&&(E.options.radius=0)),this.updateElement(m,v,E,i)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return t!=="active"&&(i.radius=0),i.radius+=si(r&&r._custom,s),i}}tt(yv,"id","bubble"),tt(yv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),tt(yv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function XQ(n,e,t){let r=1,i=1,s=0,o=0;if(e<$s){const a=n,l=a+e,u=Math.cos(a),h=Math.sin(a),p=Math.cos(l),v=Math.sin(l),m=(R,G,ee)=>Sm(R,a,l,!0)?1:Math.max(G,G*t,ee,ee*t),S=(R,G,ee)=>Sm(R,a,l,!0)?-1:Math.min(G,G*t,ee,ee*t),E=m(0,u,p),k=m(Go,h,v),T=S(Us,u,p),A=S(Us+Go,h,v);r=(E-T)/2,i=(k-A)/2,s=-(E+T)/2,o=-(k+A)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class cf extends Sc{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(ki(r[e])){const{key:l="value"}=this._parsing;s=u=>+Mh(r[u],l)}let o,a;for(o=e,a=e+t;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return xc(this.options.rotation-90)}_getCircumference(){return xc(this.options.circumference)}_getRotationExtents(){let e=$s,t=-$s;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(dJ(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:m,offsetX:S,offsetY:E}=XQ(p,h,l),k=(r.width-o)/v,T=(r.height-o)/m,A=Math.max(Math.min(k,T)/2,0),R=OP(this.options.radius,A),G=Math.max(R*l,0),ee=(R-G)/this._getVisibleDatasetWeightTotal();this.offsetX=S*R,this.offsetY=E*R,i.total=this.calculateTotal(),this.outerRadius=R-ee*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ee*u,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/$s)}updateElements(e,t,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,h=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&u.animateScale,m=v?0:this.innerRadius,S=v?0:this.outerRadius,{sharedOptions:E,includeOptions:k}=this._getSharedOptions(t,i);let T=this._getRotation(),A;for(A=0;A<t;++A)T+=this._circumference(A,s);for(A=t;A<t+r;++A){const R=this._circumference(A,s),G=e[A],ee={x:h+this.offsetX,y:p+this.offsetY,startAngle:T,endAngle:T+R,circumference:R,outerRadius:S,innerRadius:m};k&&(ee.options=E||this.resolveDataElementOptions(A,G.active?"active":i)),T+=R,this.updateElement(G,A,ee,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,i;for(i=0;i<t.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?$s*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=zm(t._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(si(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}tt(cf,"id","doughnut"),tt(cf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),tt(cf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),tt(cf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});class _v extends Sc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=UP(t,i,o);this._drawStart=a,this._drawCount=l,VP(t)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(i,a,l,e)}updateElements(e,t,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(t,i),v=o.axis,m=a.axis,{spanGaps:S,segment:E}=this.options,k=Np(S)?S:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||i==="none",A=t+r,R=e.length;let G=t>0&&this.getParsed(t-1);for(let ee=0;ee<R;++ee){const pe=e[ee],ge=T?pe:{};if(ee<t||ee>=A){ge.skip=!0;continue}const O=this.getParsed(ee),j=Gi(O[m]),Y=ge[v]=o.getPixelForValue(O[v],ee),V=ge[m]=s||j?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[m],ee);ge.skip=isNaN(Y)||isNaN(V)||j,ge.stop=ee>0&&Math.abs(O[v]-G[v])>k,E&&(ge.parsed=O,ge.raw=u.data[ee]),p&&(ge.options=h||this.resolveDataElementOptions(ee,pe.active?"active":i)),T||this.updateElement(pe,ee,ge,i),G=O}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}tt(_v,"id","line"),tt(_v,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),tt(_v,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class im extends Sc{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=zm(t._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,t,r,i){return XP.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,p=u.yCenter,v=u.getIndexAngle(0)-.5*Us;let m=v,S;const E=360/this.countVisibleElements();for(S=0;S<t;++S)m+=this._computeAngle(S,i,E);for(S=t;S<t+r;S++){const k=e[S];let T=m,A=m+this._computeAngle(S,i,E),R=o.getDataVisibility(S)?u.getDistanceFromCenterForValue(this.getParsed(S).r):0;m=A,s&&(l.animateScale&&(R=0),l.animateRotate&&(T=A=v));const G={x:h,y:p,innerRadius:0,outerRadius:R,startAngle:T,endAngle:A,options:this.resolveDataElementOptions(S,k.active?"active":i)};this.updateElement(k,S,G,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?xc(this.resolveDataElementOptions(e,t).angle||r):0}}tt(im,"id","polarArea"),tt(im,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),tt(im,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Yb extends cf{}tt(Yb,"id","pie"),tt(Yb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class bv extends Sc{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,i){return XP.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta,r=t.dataset,i=t.data||[],s=t.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=t;a<t+r;a++){const l=e[a],u=this.resolveDataElementOptions(a,l.active?"active":i),h=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:h.x,v=o?s.yCenter:h.y,m={x:p,y:v,angle:h.angle,skip:isNaN(p)||isNaN(v),options:u};this.updateElement(l,a,m,i)}}}tt(bv,"id","radar"),tt(bv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),tt(bv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class wv extends Sc{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,i=this.chart._animationsDisabled;let{start:s,count:o}=UP(t,r,i);if(this._drawStart=s,this._drawCount=o,VP(t)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:u},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(t,i),p=this.getSharedOptions(h),v=this.includeOptions(i,p),m=o.axis,S=a.axis,{spanGaps:E,segment:k}=this.options,T=Np(E)?E:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||s||i==="none";let R=t>0&&this.getParsed(t-1);for(let G=t;G<t+r;++G){const ee=e[G],pe=this.getParsed(G),ge=A?ee:{},O=Gi(pe[S]),j=ge[m]=o.getPixelForValue(pe[m],G),Y=ge[S]=s||O?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,pe,l):pe[S],G);ge.skip=isNaN(j)||isNaN(Y)||O,ge.stop=G>0&&Math.abs(pe[m]-R[m])>T,k&&(ge.parsed=pe,ge.raw=u.data[G]),v&&(ge.options=p||this.resolveDataElementOptions(G,ee.active?"active":i)),A||this.updateElement(ee,G,ge,i),R=pe}this.updateSharedOptions(p,i,h)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!t.length)return i;const s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,s,o)/2}}tt(wv,"id","scatter"),tt(wv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),tt(wv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var JQ=Object.freeze({__proto__:null,BarController:vv,BubbleController:yv,DoughnutController:cf,LineController:_v,PieController:Yb,PolarAreaController:im,RadarController:bv,ScatterController:wv});function Qh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class mw{constructor(e){tt(this,"options");this.options=e||{}}static override(e){Object.assign(mw.prototype,e)}init(){}formats(){return Qh()}parse(){return Qh()}format(){return Qh()}add(){return Qh()}diff(){return Qh()}startOf(){return Qh()}endOf(){return Qh()}}var aM={_date:mw};function QQ(n,e,t,r){const{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?LJ:Nd;if(r){if(i._sharedOptions){const u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const p=l(s,e,t-h),v=l(s,e,t+h);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,t)}return{lo:0,hi:s.length-1}}function e1(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:h}=s[a],{lo:p,hi:v}=QQ(s[a],e,o,i);for(let m=p;m<=v;++m){const S=h[m];S.skip||r(S,u,m)}}}function eee(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function A_(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||e1(n,t,e,function(a,l,u){!i&&!Rd(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function tee(n,e,t,r){let i=[];function s(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:p}=BP(o,{x:e.x,y:e.y});Sm(p,u,h)&&i.push({element:o,datasetIndex:a,index:l})}return e1(n,t,e,s),i}function nee(n,e,t,r,i,s){let o=[];const a=eee(t);let l=Number.POSITIVE_INFINITY;function u(h,p,v){const m=h.inRange(e.x,e.y,i);if(r&&!m)return;const S=h.getCenterPoint(i);if(!(!!s||n.isPointInArea(S))&&!m)return;const k=a(e,S);k<l?(o=[{element:h,datasetIndex:p,index:v}],l=k):k===l&&o.push({element:h,datasetIndex:p,index:v})}return e1(n,t,e,u),o}function T_(n,e,t,r,i,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!r?tee(n,e,t,i):nee(n,e,t,r,i,s)}function F3(n,e,t,r,i){const s=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return e1(n,t,e,(l,u,h)=>{l[o](e[t],i)&&(s.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var ree={modes:{index(n,e,t,r){const i=rf(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?A_(n,i,s,r,o):T_(n,i,s,!1,r,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,p=u.data[h];p&&!p.skip&&l.push({element:p,datasetIndex:u.index,index:h})}),l):[]},dataset(n,e,t,r){const i=rf(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?A_(n,i,s,r,o):T_(n,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,u=n.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(n,e,t,r){const i=rf(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return A_(n,i,s,r,o)},nearest(n,e,t,r){const i=rf(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return T_(n,i,s,t.intersect,r,o)},x(n,e,t,r){const i=rf(e,n);return F3(n,i,"x",t.intersect,r)},y(n,e,t,r){const i=rf(e,n);return F3(n,i,"y",t.intersect,r)}}};const lM=["left","top","right","bottom"];function fg(n,e){return n.filter(t=>t.pos===e)}function j3(n,e){return n.filter(t=>lM.indexOf(t.pos)===-1&&t.box.axis===e)}function pg(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function iee(n){const e=[];let t,r,i,s,o,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function see(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!lM.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function oee(n,e){const t=see(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,u=t[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return t}function aee(n){const e=iee(n),t=pg(e.filter(u=>u.box.fullSize),!0),r=pg(fg(e,"left"),!0),i=pg(fg(e,"right")),s=pg(fg(e,"top"),!0),o=pg(fg(e,"bottom")),a=j3(e,"x"),l=j3(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:fg(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function z3(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function uM(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function lee(n,e,t,r){const{pos:i,box:s}=t,o=n.maxPadding;if(!ki(i)){t.size&&(n[i]-=t.size);const p=r[t.stack]||{size:0,count:1};p.size=Math.max(p.size,t.horizontal?s.height:s.width),t.size=p.size/p.count,n[i]+=t.size}s.getPadding&&uM(o,s.getPadding());const a=Math.max(0,e.outerWidth-z3(o,n,"left","right")),l=Math.max(0,e.outerHeight-z3(o,n,"top","bottom")),u=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:u,other:h}:{same:h,other:u}}function uee(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function cee(n,e){const t=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(n?["left","right"]:["top","bottom"])}function Dg(n,e,t,r){const i=[];let s,o,a,l,u,h;for(s=0,o=n.length,u=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||e.w,a.height||e.h,cee(a.horizontal,e));const{same:p,other:v}=lee(e,t,a,r);u|=p&&i.length,h=h||v,l.fullSize||i.push(a)}return u&&Dg(i,e,t,r)||h}function $0(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function $3(n,e,t,r){const i=t.padding;let{x:s,y:o}=e;for(const a of n){const l=a.box,u=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const p=e.w*h,v=u.size||l.height;Lm(u.start)&&(o=u.start),l.fullSize?$0(l,i.left,o,t.outerWidth-i.right-i.left,v):$0(l,e.left+u.placed,o,p,v),u.start=o,u.placed+=p,o=l.bottom}else{const p=e.h*h,v=u.size||l.width;Lm(u.start)&&(s=u.start),l.fullSize?$0(l,s,i.top,v,t.outerHeight-i.bottom-i.top):$0(l,s,e.top+u.placed,v,p),u.start=s,u.placed+=p,s=l.right}}e.x=s,e.y=o}var pl={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=gl(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=aee(n.boxes),l=a.vertical,u=a.horizontal;ps(n.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,k)=>k.box.options&&k.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),v=Object.assign({},i);uM(v,gl(r));const m=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),S=oee(l.concat(u),p);Dg(a.fullSize,m,p,S),Dg(l,m,p,S),Dg(u,m,p,S)&&Dg(l,m,p,S),uee(m),$3(a.leftAndTop,m,p,S),m.x+=m.w,m.y+=m.h,$3(a.rightAndBottom,m,p,S),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ps(a.chartArea,E=>{const k=E.box;Object.assign(k,n.chartArea),k.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class cM{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class dee extends cM{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xv="$chartjs",hee={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},U3=n=>n===null||n==="";function fee(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[xv]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",U3(i)){const s=S3(n,"width");s!==void 0&&(n.width=s)}if(U3(r))if(n.style.height==="")n.height=n.width/(e||2);else{const s=S3(n,"height");s!==void 0&&(n.height=s)}return n}const dM=mQ?{passive:!0}:!1;function pee(n,e,t){n.addEventListener(e,t,dM)}function gee(n,e,t){n.canvas.removeEventListener(e,t,dM)}function mee(n,e){const t=hee[n.type]||n.type,{x:r,y:i}=rf(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function uy(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function vee(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||uy(a.addedNodes,r),o=o&&!uy(a.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function yee(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||uy(a.removedNodes,r),o=o&&!uy(a.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const Em=new Map;let V3=0;function hM(){const n=window.devicePixelRatio;n!==V3&&(V3=n,Em.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function _ee(n,e){Em.size||window.addEventListener("resize",hM),Em.set(n,e)}function bee(n){Em.delete(n),Em.size||window.removeEventListener("resize",hM)}function wee(n,e,t){const r=n.canvas,i=r&&gw(r);if(!i)return;const s=$P((a,l)=>{const u=i.clientWidth;t(a,l),u<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(i),_ee(n,s),o}function D_(n,e,t){t&&t.disconnect(),e==="resize"&&bee(n)}function xee(n,e,t){const r=n.canvas,i=$P(s=>{n.ctx!==null&&t(mee(s,n))},n);return pee(r,e,i),i}class Lee extends cM{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(fee(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[xv])return!1;const r=t[xv].initial;["height","width"].forEach(s=>{const o=r[s];Gi(o)?t.removeAttribute(s):t.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[xv],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:vee,detach:yee,resize:wee}[t]||xee;i[t]=o(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:D_,detach:D_,resize:D_}[t]||gee)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return gQ(e,t,r,i)}isAttached(e){const t=gw(e);return!!(t&&t.isConnected)}}function See(n){return!pw()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?dee:Lee}var Z0;let Hd=(Z0=class{constructor(){tt(this,"x");tt(this,"y");tt(this,"active",!1);tt(this,"options");tt(this,"$animations")}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Np(this.x)&&Np(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},tt(Z0,"defaults",{}),tt(Z0,"defaultRoutes"),Z0);function Cee(n,e){const t=n.options.ticks,r=Eee(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?Mee(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>i)return kee(e,u,s,o/i),u;const h=Pee(s,e,i);if(o>0){let p,v;const m=o>1?Math.round((l-a)/(o-1)):null;for(U0(e,u,h,Gi(m)?0:a-m,a),p=0,v=o-1;p<v;p++)U0(e,u,h,s[p],s[p+1]);return U0(e,u,h,l,Gi(m)?e.length:l+m),u}return U0(e,u,h),u}function Eee(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function Pee(n,e,t){const r=Aee(n),i=e.length/t;if(!r)return Math.max(i,1);const s=_J(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function Mee(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function kee(n,e,t,r){let i=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}function U0(n,e,t,r,i){const s=si(r,0),o=Math.min(si(i,n.length),n.length);let a=0,l,u,h;for(t=Math.ceil(t),i&&(l=i-r,t=l/Math.floor(l/t)),h=s;h<0;)a++,h=Math.round(s+a*t);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(n[u]),a++,h=Math.round(s+a*t))}function Aee(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const Tee=n=>n==="left"?"right":n==="right"?"left":n,H3=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,G3=(n,e)=>Math.min(e||n,n);function W3(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function Dee(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(i),u;if(!(t&&(r===1?u=Math.max(l-s,o-l):e===0?u=(n.getPixelForTick(1)-l)/2:u=(l-n.getPixelForTick(i-1))/2,l+=i<e?u:-u,l<s-a||l>o+a)))return l}function Iee(n,e){ps(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}function gg(n){return n.drawTicks?n.tickLength:0}function q3(n,e){if(!n.display)return 0;const t=da(n.font,e),r=gl(n.padding);return(eo(n.text)?n.text.length:1)*t.lineHeight+r.height}function Oee(n,e){return Dh(n,{scale:e,type:"scale"})}function Nee(n,e,t){return Dh(n,{tick:t,index:e,type:"tick"})}function Ree(n,e,t){let r=lw(n);return(t&&e!=="right"||!t&&e==="right")&&(r=Tee(r)),r}function Bee(n,e,t,r){const{top:i,left:s,bottom:o,right:a,chart:l}=n,{chartArea:u,scales:h}=l;let p=0,v,m,S;const E=o-i,k=a-s;if(n.isHorizontal()){if(m=ol(r,s,a),ki(t)){const T=Object.keys(t)[0],A=t[T];S=h[T].getPixelForValue(A)+E-e}else t==="center"?S=(u.bottom+u.top)/2+E-e:S=H3(n,t,e);v=a-s}else{if(ki(t)){const T=Object.keys(t)[0],A=t[T];m=h[T].getPixelForValue(A)-k+e}else t==="center"?m=(u.left+u.right)/2-k+e:m=H3(n,t,e);S=ol(r,o,i),p=t==="left"?-Go:Go}return{titleX:m,titleY:S,maxWidth:v,rotation:p}}class Mf extends Hd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Su(e,Number.POSITIVE_INFINITY),t=Su(t,Number.NEGATIVE_INFINITY),r=Su(r,Number.POSITIVE_INFINITY),i=Su(i,Number.NEGATIVE_INFINITY),{min:Su(e,r),max:Su(t,i),minDefined:Mo(e),maxDefined:Mo(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:t,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:Su(t,Su(r,t)),max:Su(r,Su(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Os(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=qJ(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?W3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Cee(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Os(this.options.afterUpdate,[this])}beforeSetDimensions(){Os(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Os(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Os(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Os(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Os(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Os(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Os(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=G3(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let o=i,a,l,u;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),p=h.widest.width,v=h.highest.height,m=Ea(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),p+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-gg(e.grid)-t.padding-q3(e.title,this.chart.options.font),u=Math.sqrt(p*p+v*v),o=ow(Math.min(Math.asin(Ea((h.highest.height+6)/a,-1,1)),Math.asin(Ea(l/u,-1,1))-Math.asin(Ea(v/u,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Os(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Os(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=q3(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=gg(s)+l):(e.height=this.maxHeight,e.width=gg(s)+l),r.display&&this.ticks.length){const{first:u,last:h,widest:p,highest:v}=this._getLabelSizes(),m=r.padding*2,S=xc(this.labelRotation),E=Math.cos(S),k=Math.sin(S);if(a){const T=r.mirror?0:k*p.width+E*v.height;e.height=Math.min(this.maxHeight,e.height+T+m)}else{const T=r.mirror?0:E*p.width+k*v.height;e.width=Math.min(this.maxWidth,e.width+T+m)}this._calculatePadding(u,h,k,E)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,m=0;l?u?(v=i*e.width,m=r*t.height):(v=r*e.height,m=i*t.width):s==="start"?m=t.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,m=t.width/2),this.paddingLeft=Math.max((v-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-p+o)*this.width/(this.width-p),0)}else{let h=t.height/2,p=e.height/2;s==="start"?(h=0,p=e.height):s==="end"&&(h=t.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Os(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Gi(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=W3(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/G3(t,r));let u=0,h=0,p,v,m,S,E,k,T,A,R,G,ee;for(p=0;p<t;p+=l){if(S=e[p].label,E=this._resolveTickFontOptions(p),i.font=k=E.string,T=s[k]=s[k]||{data:{},gc:[]},A=E.lineHeight,R=G=0,!Gi(S)&&!eo(S))R=ay(i,T.data,T.gc,R,S),G=A;else if(eo(S))for(v=0,m=S.length;v<m;++v)ee=S[v],!Gi(ee)&&!eo(ee)&&(R=ay(i,T.data,T.gc,R,ee),G+=A);o.push(R),a.push(G),u=Math.max(R,u),h=Math.max(G,h)}Iee(s,t);const pe=o.indexOf(u),ge=a.indexOf(h),O=j=>({width:o[j]||0,height:a[j]||0});return{first:O(0),last:O(t-1),widest:O(pe),highest:O(ge),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return xJ(this._alignToPixels?Jh(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=Nee(this.getContext(),e,r))}return this.$context||(this.$context=Oee(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=xc(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,u=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=gg(s),m=[],S=a.setContext(this.getContext()),E=S.display?S.width:0,k=E/2,T=function(B){return Jh(r,B,E)};let A,R,G,ee,pe,ge,O,j,Y,V,N,q;if(o==="top")A=T(this.bottom),ge=this.bottom-v,j=A-k,V=T(e.top)+k,q=e.bottom;else if(o==="bottom")A=T(this.top),V=e.top,q=T(e.bottom)-k,ge=A+k,j=this.top+v;else if(o==="left")A=T(this.right),pe=this.right-v,O=A-k,Y=T(e.left)+k,N=e.right;else if(o==="right")A=T(this.left),Y=e.left,N=T(e.right)-k,pe=A+k,O=this.left+v;else if(t==="x"){if(o==="center")A=T((e.top+e.bottom)/2+.5);else if(ki(o)){const B=Object.keys(o)[0],Q=o[B];A=T(this.chart.scales[B].getPixelForValue(Q))}V=e.top,q=e.bottom,ge=A+k,j=ge+v}else if(t==="y"){if(o==="center")A=T((e.left+e.right)/2);else if(ki(o)){const B=Object.keys(o)[0],Q=o[B];A=T(this.chart.scales[B].getPixelForValue(Q))}pe=A-k,O=pe-v,Y=e.left,N=e.right}const $=si(i.ticks.maxTicksLimit,p),F=Math.max(1,Math.ceil(p/$));for(R=0;R<p;R+=F){const B=this.getContext(R),Q=s.setContext(B),X=a.setContext(B),_e=Q.lineWidth,me=Q.color,We=X.dash||[],ae=X.dashOffset,ve=Q.tickWidth,ye=Q.tickColor,J=Q.tickBorderDash||[],se=Q.tickBorderDashOffset;G=Dee(this,R,l),G!==void 0&&(ee=Jh(r,G,_e),u?pe=O=Y=N=ee:ge=j=V=q=ee,m.push({tx1:pe,ty1:ge,tx2:O,ty2:j,x1:Y,y1:V,x2:N,y2:q,width:_e,color:me,borderDash:We,borderDashOffset:ae,tickWidth:ve,tickColor:ye,tickBorderDash:J,tickBorderDashOffset:se}))}return this._ticksLength=p,this._borderValue=A,m}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:p}=s,v=gg(r.grid),m=v+h,S=p?-h:m,E=-xc(this.labelRotation),k=[];let T,A,R,G,ee,pe,ge,O,j,Y,V,N,q="middle";if(i==="top")pe=this.bottom-S,ge=this._getXAxisLabelAlignment();else if(i==="bottom")pe=this.top+S,ge=this._getXAxisLabelAlignment();else if(i==="left"){const F=this._getYAxisLabelAlignment(v);ge=F.textAlign,ee=F.x}else if(i==="right"){const F=this._getYAxisLabelAlignment(v);ge=F.textAlign,ee=F.x}else if(t==="x"){if(i==="center")pe=(e.top+e.bottom)/2+m;else if(ki(i)){const F=Object.keys(i)[0],B=i[F];pe=this.chart.scales[F].getPixelForValue(B)+m}ge=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")ee=(e.left+e.right)/2-m;else if(ki(i)){const F=Object.keys(i)[0],B=i[F];ee=this.chart.scales[F].getPixelForValue(B)}ge=this._getYAxisLabelAlignment(v).textAlign}t==="y"&&(l==="start"?q="top":l==="end"&&(q="bottom"));const $=this._getLabelSizes();for(T=0,A=a.length;T<A;++T){R=a[T],G=R.label;const F=s.setContext(this.getContext(T));O=this.getPixelForTick(T)+s.labelOffset,j=this._resolveTickFontOptions(T),Y=j.lineHeight,V=eo(G)?G.length:1;const B=V/2,Q=F.color,X=F.textStrokeColor,_e=F.textStrokeWidth;let me=ge;o?(ee=O,ge==="inner"&&(T===A-1?me=this.options.reverse?"left":"right":T===0?me=this.options.reverse?"right":"left":me="center"),i==="top"?u==="near"||E!==0?N=-V*Y+Y/2:u==="center"?N=-$.highest.height/2-B*Y+Y:N=-$.highest.height+Y/2:u==="near"||E!==0?N=Y/2:u==="center"?N=$.highest.height/2-B*Y:N=$.highest.height-V*Y,p&&(N*=-1),E!==0&&!F.showLabelBackdrop&&(ee+=Y/2*Math.sin(E))):(pe=O,N=(1-V)*Y/2);let We;if(F.showLabelBackdrop){const ae=gl(F.backdropPadding),ve=$.heights[T],ye=$.widths[T];let J=N-ae.top,se=0-ae.left;switch(q){case"middle":J-=ve/2;break;case"bottom":J-=ve;break}switch(ge){case"center":se-=ye/2;break;case"right":se-=ye;break;case"inner":T===A-1?se-=ye:T>0&&(se-=ye/2);break}We={left:se,top:J,width:ye+ae.width,height:ve+ae.height,color:F.backdropColor}}k.push({label:G,font:j,textOffset:N,options:{rotation:E,color:Q,strokeColor:X,strokeWidth:_e,textAlign:me,textBaseline:q,translation:[ee,pe],backdrop:We}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-xc(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,h;return t==="left"?i?(h=this.right+s,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h=this.left)):t==="right"?i?(h=this.left+s,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const l=i[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,p,v;this.isHorizontal()?(u=Jh(e,this.left,o)-o/2,h=Jh(e,this.right,a)+a/2,p=v=l):(p=Jh(e,this.top,o)-o/2,v=Jh(e,this.bottom,a)+a/2,u=h=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(u,p),t.lineTo(h,v),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Xy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,h=o.textOffset;Sf(r,u,0,h,l,a)}i&&Jy(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=da(r.font),o=gl(r.padding),a=r.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||ki(t)?(l+=o.bottom,eo(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:p,rotation:v}=Bee(this,l,t,a);Sf(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:Ree(a,t,i),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=si(e.grid&&e.grid.z,-1),i=si(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Mf.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return da(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class V0{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;zee(t)&&(r=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,Fee(e,o,r),this.override&&ko.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in ko[i]&&(delete ko[i][r],this.override&&delete Lf[r])}}function Fee(n,e,t){const r=xm(Object.create(null),[t?ko.get(t):{},ko.get(e),n.defaults]);ko.set(e,r),n.defaultRoutes&&jee(e,n.defaultRoutes),n.descriptors&&ko.describe(e,n.descriptors)}function jee(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");ko.route(s,i,l,a)})}function zee(n){return"id"in n&&"defaults"in n}class $ee{constructor(){this.controllers=new V0(Sc,"datasets",!0),this.elements=new V0(Hd,"elements"),this.plugins=new V0(Object,"plugins"),this.scales=new V0(Mf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ps(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){const i=sw(e);Os(r["before"+i],[],r),t[e](r),Os(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var qc=new $ee;class Uee{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[t,i,s.options];if(Os(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Gi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=si(r.options&&r.options.plugins,{}),s=Vee(r);return i===!1&&!t?[]:Gee(e,s,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function Vee(n){const e={},t=[],r=Object.keys(qc.plugins.items);for(let s=0;s<r.length;s++)t.push(qc.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function Hee(n,e){return!e&&n===!1?null:n===!0?{}:n}function Gee(n,{plugins:e,localIds:t},r,i){const s=[],o=n.getContext();for(const a of e){const l=a.id,u=Hee(r[l],i);u!==null&&s.push({plugin:a,options:Wee(n.config,{plugin:a,local:t[l]},u,o)})}return s}function Wee(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Kb(n,e){const t=ko.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function qee(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function Yee(n,e){return n===e?"_index_":"_value_"}function Y3(n){if(n==="x"||n==="y"||n==="r")return n}function Kee(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Zb(n,...e){if(Y3(n))return n;for(const t of e){const r=t.axis||Kee(t.position)||n.length>1&&Y3(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function K3(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function Zee(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return K3(n,"x",t[0])||K3(n,"y",t[0])}return{}}function Xee(n,e){const t=Lf[n.type]||{scales:{}},r=e.scales||{},i=Kb(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ki(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Zb(o,a,Zee(o,n),ko.scales[a.type]),u=Yee(l,i),h=t.scales||{};s[o]=em(Object.create(null),[{axis:l},a,h[l],h[u]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||Kb(a,e),h=(Lf[a]||{}).scales||{};Object.keys(h).forEach(p=>{const v=qee(p,l),m=o[v+"AxisID"]||v;s[m]=s[m]||Object.create(null),em(s[m],[{axis:v},r[m],h[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];em(a,[ko.scales[a.type],ko.scale])}),s}function fM(n){const e=n.options||(n.options={});e.plugins=si(e.plugins,{}),e.scales=Xee(n,e)}function pM(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Jee(n){return n=n||{},n.data=pM(n.data),fM(n),n}const Z3=new Map,gM=new Set;function H0(n,e){let t=Z3.get(n);return t||(t=e(),Z3.set(n,t),gM.add(t)),t}const mg=(n,e,t)=>{const r=Mh(e,t);r!==void 0&&n.add(r)};class Qee{constructor(e){this._config=Jee(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=pM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),fM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return H0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return H0(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return H0(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return H0(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;const l=new Set;t.forEach(h=>{e&&(l.add(e),h.forEach(p=>mg(l,e,p))),h.forEach(p=>mg(l,i,p)),h.forEach(p=>mg(l,Lf[s]||{},p)),h.forEach(p=>mg(l,ko,p)),h.forEach(p=>mg(l,Wb,p))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),gM.has(t)&&o.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,Lf[t]||{},ko.datasets[t]||{},{type:t},ko,Wb]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=X3(this._resolverCache,e,i);let l=o;if(tte(o,t)){s.$shared=!1,r=kh(r)?r():r;const u=this.createResolver(e,r,a);l=Rp(o,r,u)}for(const u of t)s[u]=l[u];return s}createResolver(e,t,r=[""],i){const{resolver:s}=X3(this._resolverCache,e,r);return ki(t)?Rp(s,t,void 0,i):s}}function X3(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:dw(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const ete=n=>ki(n)&&Object.getOwnPropertyNames(n).some(e=>kh(n[e]));function tte(n,e){const{isScriptable:t,isIndexable:r}=qP(n);for(const i of e){const s=t(i),o=r(i),a=(o||s)&&n[i];if(s&&(kh(a)||ete(a))||o&&eo(a))return!0}return!1}var nte="4.4.1";const rte=["top","bottom","left","right","chartArea"];function J3(n,e){return n==="top"||n==="bottom"||rte.indexOf(n)===-1&&e==="x"}function Q3(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function eL(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Os(t&&t.onComplete,[n],e)}function ite(n){const e=n.chart,t=e.options.animation;Os(t&&t.onProgress,[n],e)}function mM(n){return pw()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Lv={},tL=n=>{const e=mM(n);return Object.values(Lv).filter(t=>t.canvas===e).pop()};function ste(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function ote(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}function G0(n,e,t){return n.options.clip?n[t]:e[t]}function ate(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:G0(t,e,"left"),right:G0(t,e,"right"),top:G0(r,e,"top"),bottom:G0(r,e,"bottom")}:e}class Zc{static register(...e){qc.add(...e),nL()}static unregister(...e){qc.remove(...e),nL()}constructor(e,t){const r=this.config=new Qee(t),i=mM(e),s=tL(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||See(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=cJ(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Uee,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=EJ(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],Lv[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ed.listen(this,"complete",eL),Ed.listen(this,"progress",ite),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:s}=this;return Gi(e)?t&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return qc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():L3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return b3(this.canvas,this.ctx),this}stop(){return Ed.stop(this),this}resize(e,t){Ed.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,L3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Os(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};ps(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const a=t[o],l=Zb(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),ps(s,o=>{const a=o.options,l=a.id,u=Zb(l,a),h=si(a.type,o.dtype);(a.position===void 0||J3(a.position,u)!==J3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===h)p=r[l];else{const v=qc.getScale(h);p=new v({id:l,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),ps(i,(o,a)=>{o||delete r[a]}),ps(r,o=>{pl.configure(this,o,o.options),pl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(Q3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const s=t[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Kb(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=qc.getController(a),{datasetElementType:u,dataElementType:h}=ko.datasets[a];Object.assign(l,{dataElementType:qc.getElement(h),datasetElementType:u&&qc.getElement(u)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ps(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:p}=this.getDatasetMeta(u),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ps(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Q3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ps(this.scales,e=>{pl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!d3(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of t){const o=r==="_removeElements"?-s:s;ste(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<t;s++)if(!d3(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;pl.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],ps(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,kh(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ed.has(this)?this.attached&&!Ed.running(this)&&Ed.start(this):(this.draw(),eL({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,s;for(i=0,s=t.length;i<s;++i){const o=t[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r=e._clip,i=!r.disabled,s=ate(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Xy(t,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Jy(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Rd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const s=ree.modes[t];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Dh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Lm(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ed.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),b3(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Lv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ps(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(l,u)=>{t.addEventListener(this,l,u),e[l]=u},i=(l,u)=>{e[l]&&(t.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){ps(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ps(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let s,o,a,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!iy(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=s(t,e),a=r?e:s(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:s}=this,o=t,a=this._getActiveElements(e,i,r,o),l=mJ(e),u=ote(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Os(s.onHover,[e,a,this],this),l&&Os(s.onClick,[e,a,this],this));const h=!iy(a,i);return(h||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=u,h}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}tt(Zc,"defaults",ko),tt(Zc,"instances",Lv),tt(Zc,"overrides",Lf),tt(Zc,"registry",qc),tt(Zc,"version",nte),tt(Zc,"getChart",tL);function nL(){return ps(Zc.instances,n=>n._plugins.invalidate())}function lte(n,e,t){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let u=i/a;n.beginPath(),n.arc(s,o,a,r-u,t+u),l>i?(u=i/l,n.arc(s,o,l,t+u,r-u,!0)):n.arc(s,o,i,t+Go,r-Go),n.closePath(),n.clip()}function ute(n){return cw(n,["outerStart","outerEnd","innerStart","innerEnd"])}function cte(n,e,t,r){const i=ute(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),a=l=>{const u=(t-Math.min(s,l))*r/2;return Ea(l,0,Math.min(s,u))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ea(i.innerStart,0,o),innerEnd:Ea(i.innerEnd,0,o)}}function np(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function cy(n,e,t,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:h}=e,p=Math.max(e.outerRadius+r+t-u,0),v=h>0?h+r+t+u:0;let m=0;const S=i-l;if(r){const F=h>0?h-r:0,B=p>0?p-r:0,Q=(F+B)/2,X=Q!==0?S*Q/(Q+r):S;m=(S-X)/2}const E=Math.max(.001,S*p-t/Us)/p,k=(S-E)/2,T=l+k+m,A=i-k-m,{outerStart:R,outerEnd:G,innerStart:ee,innerEnd:pe}=cte(e,v,p,A-T),ge=p-R,O=p-G,j=T+R/ge,Y=A-G/O,V=v+ee,N=v+pe,q=T+ee/V,$=A-pe/N;if(n.beginPath(),s){const F=(j+Y)/2;if(n.arc(o,a,p,j,F),n.arc(o,a,p,F,Y),G>0){const _e=np(O,Y,o,a);n.arc(_e.x,_e.y,G,Y,A+Go)}const B=np(N,A,o,a);if(n.lineTo(B.x,B.y),pe>0){const _e=np(N,$,o,a);n.arc(_e.x,_e.y,pe,A+Go,$+Math.PI)}const Q=(A-pe/v+(T+ee/v))/2;if(n.arc(o,a,v,A-pe/v,Q,!0),n.arc(o,a,v,Q,T+ee/v,!0),ee>0){const _e=np(V,q,o,a);n.arc(_e.x,_e.y,ee,q+Math.PI,T-Go)}const X=np(ge,T,o,a);if(n.lineTo(X.x,X.y),R>0){const _e=np(ge,j,o,a);n.arc(_e.x,_e.y,R,T-Go,j)}}else{n.moveTo(o,a);const F=Math.cos(j)*p+o,B=Math.sin(j)*p+a;n.lineTo(F,B);const Q=Math.cos(Y)*p+o,X=Math.sin(Y)*p+a;n.lineTo(Q,X)}n.closePath()}function dte(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){cy(n,e,t,r,l,i);for(let u=0;u<s;++u)n.fill();isNaN(a)||(l=o+(a%$s||$s))}return cy(n,e,t,r,l,i),n.fill(),l}function hte(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:h,borderDash:p,borderDashOffset:v}=l,m=l.borderAlign==="inner";if(!u)return;n.setLineDash(p||[]),n.lineDashOffset=v,m?(n.lineWidth=u*2,n.lineJoin=h||"round"):(n.lineWidth=u,n.lineJoin=h||"bevel");let S=e.endAngle;if(s){cy(n,e,t,r,S,i);for(let E=0;E<s;++E)n.stroke();isNaN(a)||(S=o+(a%$s||$s))}m&&lte(n,e,S),s||(cy(n,e,t,r,S,i),n.stroke())}class Ig extends Hd{constructor(t){super();tt(this,"circumference");tt(this,"endAngle");tt(this,"fullCircles");tt(this,"innerRadius");tt(this,"outerRadius");tt(this,"pixelMargin");tt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=BP(s,{x:t,y:r}),{startAngle:l,endAngle:u,innerRadius:h,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,E=si(v,u-l)>=$s||Sm(o,l,u),k=Od(a,h+m,p+m);return E&&k}getCenterPoint(t){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:u,spacing:h}=this.options,p=(s+o)/2,v=(a+l+h+u)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>$s?Math.floor(i/$s):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*s,Math.sin(l)*s);const u=1-Math.sin(Math.min(Us,i||0)),h=s*u;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,dte(t,this,h,o,a),hte(t,this,h,o,a),t.restore()}}tt(Ig,"id","arc"),tt(Ig,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),tt(Ig,"defaultRoutes",{backgroundColor:"backgroundColor"}),tt(Ig,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function vM(n,e,t=e){n.lineCap=si(t.borderCapStyle,e.borderCapStyle),n.setLineDash(si(t.borderDash,e.borderDash)),n.lineDashOffset=si(t.borderDashOffset,e.borderDashOffset),n.lineJoin=si(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=si(t.borderWidth,e.borderWidth),n.strokeStyle=si(t.borderColor,e.borderColor)}function fte(n,e,t){n.lineTo(t.x,t.y)}function pte(n){return n.stepped?FJ:n.tension||n.cubicInterpolationMode==="monotone"?jJ:fte}function yM(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:a}=e,l=Math.max(i,o),u=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:u<l&&!h?r+u-l:u-l}}function gte(n,e,t,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:u}=yM(i,t,r),h=pte(s);let{move:p=!0,reverse:v}=r||{},m,S,E;for(m=0;m<=u;++m)S=i[(a+(v?u-m:m))%o],!S.skip&&(p?(n.moveTo(S.x,S.y),p=!1):h(n,E,S,v,s.stepped),E=S);return l&&(S=i[(a+(v?u:0))%o],h(n,E,S,v,s.stepped)),!!l}function mte(n,e,t,r){const i=e.points,{count:s,start:o,ilen:a}=yM(i,t,r),{move:l=!0,reverse:u}=r||{};let h=0,p=0,v,m,S,E,k,T;const A=G=>(o+(u?a-G:G))%s,R=()=>{E!==k&&(n.lineTo(h,k),n.lineTo(h,E),n.lineTo(h,T))};for(l&&(m=i[A(0)],n.moveTo(m.x,m.y)),v=0;v<=a;++v){if(m=i[A(v)],m.skip)continue;const G=m.x,ee=m.y,pe=G|0;pe===S?(ee<E?E=ee:ee>k&&(k=ee),h=(p*h+G)/++p):(R(),n.lineTo(G,ee),S=pe,p=0,E=k=ee),T=ee}R()}function Xb(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?mte:gte}function vte(n){return n.stepped?vQ:n.tension||n.cubicInterpolationMode==="monotone"?yQ:sf}function yte(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),vM(n,e.options),n.stroke(i)}function _te(n,e,t,r){const{segments:i,options:s}=e,o=Xb(e);for(const a of i)vM(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}const bte=typeof Path2D=="function";function wte(n,e,t,r){bte&&!e.options.segment?yte(n,e,t,r):_te(n,e,t,r)}class vh extends Hd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;uQ(this._points,r,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=SQ(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],s=this.points,o=rM(this,{property:t,start:i,end:i});if(!o.length)return;const a=[],l=vte(r);let u,h;for(u=0,h=o.length;u<h;++u){const{start:p,end:v}=o[u],m=s[p],S=s[v];if(m===S){a.push(m);continue}const E=Math.abs((i-m[t])/(S[t]-m[t])),k=l(m,S,E,r.stepped);k[t]=e[t],a.push(k)}return a.length===1?a[0]:a}pathSegment(e,t,r){return Xb(this)(e,this,t,r)}path(e,t,r){const i=this.segments,s=Xb(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const a of i)o&=s(e,this,a,{start:t,end:t+r-1});return!!o}draw(e,t,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),wte(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}tt(vh,"id","line"),tt(vh,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),tt(vh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),tt(vh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function rL(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Sv extends Hd{constructor(t){super();tt(this,"parsed");tt(this,"skip");tt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return rL(this,t,"x",r)}inYRange(t,r){return rL(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){const i=this.options;this.skip||i.radius<.1||!Rd(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,qb(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}tt(Sv,"id","point"),tt(Sv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),tt(Sv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function _M(n,e){const{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,u,h,p;return n.horizontal?(p=o/2,a=Math.min(t,i),l=Math.max(t,i),u=r-p,h=r+p):(p=s/2,a=t-p,l=t+p,u=Math.min(r,i),h=Math.max(r,i)),{left:a,top:u,right:l,bottom:h}}function yh(n,e,t,r){return n?0:Ea(e,t,r)}function xte(n,e,t){const r=n.options.borderWidth,i=n.borderSkipped,s=WP(r);return{t:yh(i.top,s.top,0,t),r:yh(i.right,s.right,0,e),b:yh(i.bottom,s.bottom,0,t),l:yh(i.left,s.left,0,e)}}function Lte(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=vf(i),o=Math.min(e,t),a=n.borderSkipped,l=r||ki(i);return{topLeft:yh(!l||a.top||a.left,s.topLeft,0,o),topRight:yh(!l||a.top||a.right,s.topRight,0,o),bottomLeft:yh(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:yh(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Ste(n){const e=_M(n),t=e.right-e.left,r=e.bottom-e.top,i=xte(n,t/2,r/2),s=Lte(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function I_(n,e,t,r){const i=e===null,s=t===null,a=n&&!(i&&s)&&_M(n,r);return a&&(i||Od(e,a.left,a.right))&&(s||Od(t,a.top,a.bottom))}function Cte(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Ete(n,e){n.rect(e.x,e.y,e.w,e.h)}function O_(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-r,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+o,radius:n.radius}}class Cv extends Hd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Ste(this),a=Cte(o.radius)?Cm:Ete;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,O_(o,t,s)),e.clip(),a(e,O_(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,O_(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return I_(this,e,t,r)}inXRange(e,t){return I_(this,e,null,t)}inYRange(e,t){return I_(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}tt(Cv,"id","bar"),tt(Cv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),tt(Cv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Pte=Object.freeze({__proto__:null,ArcElement:Ig,BarElement:Cv,LineElement:vh,PointElement:Sv});const Jb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],iL=Jb.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function bM(n){return Jb[n%Jb.length]}function wM(n){return iL[n%iL.length]}function Mte(n,e){return n.borderColor=bM(e),n.backgroundColor=wM(e),++e}function kte(n,e){return n.backgroundColor=n.data.map(()=>bM(e++)),e}function Ate(n,e){return n.backgroundColor=n.data.map(()=>wM(e++)),e}function Tte(n){let e=0;return(t,r)=>{const i=n.getDatasetMeta(r).controller;i instanceof cf?e=kte(t,e):i instanceof im?e=Ate(t,e):i&&(e=Mte(t,e))}}function sL(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function Dte(n){return n&&(n.borderColor||n.backgroundColor)}var Ite={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:r},options:i}=n.config,{elements:s}=i;if(!t.forceOverride&&(sL(r)||Dte(i)||s&&sL(s)))return;const o=Tte(n);r.forEach(o)}};function Ote(n,e,t,r,i){const s=i.samples||r;if(s>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(s-2);let l=0;const u=e+t-1;let h=e,p,v,m,S,E;for(o[l++]=n[h],p=0;p<s-2;p++){let k=0,T=0,A;const R=Math.floor((p+1)*a)+1+e,G=Math.min(Math.floor((p+2)*a)+1,t)+e,ee=G-R;for(A=R;A<G;A++)k+=n[A].x,T+=n[A].y;k/=ee,T/=ee;const pe=Math.floor(p*a)+1+e,ge=Math.min(Math.floor((p+1)*a)+1,t)+e,{x:O,y:j}=n[h];for(m=S=-1,A=pe;A<ge;A++)S=.5*Math.abs((O-k)*(n[A].y-j)-(O-n[A].x)*(T-j)),S>m&&(m=S,v=n[A],E=A);o[l++]=v,h=E}return o[l++]=n[u],o}function Nte(n,e,t,r){let i=0,s=0,o,a,l,u,h,p,v,m,S,E;const k=[],T=e+t-1,A=n[e].x,G=n[T].x-A;for(o=e;o<e+t;++o){a=n[o],l=(a.x-A)/G*r,u=a.y;const ee=l|0;if(ee===h)u<S?(S=u,p=o):u>E&&(E=u,v=o),i=(s*i+a.x)/++s;else{const pe=o-1;if(!Gi(p)&&!Gi(v)){const ge=Math.min(p,v),O=Math.max(p,v);ge!==m&&ge!==pe&&k.push({...n[ge],x:i}),O!==m&&O!==pe&&k.push({...n[O],x:i})}o>0&&pe!==m&&k.push(n[pe]),k.push(a),h=ee,s=0,S=E=u,p=v=m=o}}return k}function xM(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function oL(n){n.data.datasets.forEach(e=>{xM(e)})}function Rte(n,e){const t=e.length;let r=0,i;const{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:u}=s.getUserBounds();return l&&(r=Ea(Nd(e,s.axis,o).lo,0,t-1)),u?i=Ea(Nd(e,s.axis,a).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var Bte={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){oL(n);return}const r=n.width;n.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=n.getDatasetMeta(s),u=o||i.data;if(Tg([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=n.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:p,count:v}=Rte(l,u);const m=t.threshold||4*r;if(v<=m){xM(i);return}Gi(o)&&(i._data=u,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let S;switch(t.algorithm){case"lttb":S=Ote(u,p,v,r,t);break;case"min-max":S=Nte(u,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=S})},destroy(n){oL(n)}};function Fte(n,e,t){const r=n.segments,i=n.points,s=e.points,o=[];for(const a of r){let{start:l,end:u}=a;u=vw(l,u,i);const h=Qb(t,i[l],i[u],a.loop);if(!e.segments){o.push({source:a,target:h,start:i[l],end:i[u]});continue}const p=rM(e,h);for(const v of p){const m=Qb(t,s[v.start],s[v.end],v.loop),S=nM(a,i,m);for(const E of S)o.push({source:E,target:v,start:{[t]:aL(h,m,"start",Math.max)},end:{[t]:aL(h,m,"end",Math.min)}})}}return o}function Qb(n,e,t,r){if(r)return;let i=e[n],s=t[n];return n==="angle"&&(i=Cu(i),s=Cu(s)),{property:n,start:i,end:s}}function jte(n,e){const{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=vw(o,a,i);const l=i[o],u=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:u.x,y:r})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:u.y}))}),s}function vw(n,e,t){for(;e>n;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function aL(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function LM(n,e){let t=[],r=!1;return eo(n)?(r=!0,t=n):t=jte(n,e),t.length?new vh({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function lL(n){return n&&n.fill!==!1}function zte(n,e,t){let i=n[e].fill;const s=[e];let o;if(!t)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Mo(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function $te(n,e,t){const r=Gte(n);if(ki(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Mo(i)&&Math.floor(i)===i?Ute(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Ute(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function Vte(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:ki(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Hte(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:ki(n)?r=n.value:r=e.getBaseValue(),r}function Gte(n){const e=n.options,t=e.fill;let r=si(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Wte(n){const{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,a=qte(e,t);a.push(LM({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const u=s[l];for(let h=u.start;h<=u.end;h++)Yte(i,o[h],a)}return new vh({points:i,options:{}})}function qte(n,e){const t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function Yte(n,e,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i],{first:o,last:a,point:l}=Kte(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(n.push(l),!a)break}}n.push(...r)}function Kte(n,e,t){const r=n.interpolate(e,t);if(!r)return{};const i=r[t],s=n.segments,o=n.points;let a=!1,l=!1;for(let u=0;u<s.length;u++){const h=s[u],p=o[h.start][t],v=o[h.end][t];if(Od(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class SM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:i,y:s,radius:o}=this;return t=t||{start:0,end:$s},e.arc(i,s,o,t.end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function Zte(n){const{chart:e,fill:t,line:r}=n;if(Mo(t))return Xte(e,t);if(t==="stack")return Wte(n);if(t==="shape")return!0;const i=Jte(n);return i instanceof SM?i:LM(i,r)}function Xte(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function Jte(n){return(n.scale||{}).getPointPositionForValue?ene(n):Qte(n)}function Qte(n){const{scale:e={},fill:t}=n,r=Vte(t,e);if(Mo(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function ene(n){const{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Hte(t,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new SM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function N_(n,e,t){const r=Zte(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,u=a.backgroundColor,{above:h=u,below:p=u}=l||{};r&&i.points.length&&(Xy(n,t),tne(n,{line:i,target:r,above:h,below:p,area:t,scale:s,axis:o}),Jy(n))}function tne(n,e){const{line:t,target:r,above:i,below:s,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&s!==i&&(uL(n,r,o.top),cL(n,{line:t,target:r,color:i,scale:a,property:l}),n.restore(),n.save(),uL(n,r,o.bottom)),cL(n,{line:t,target:r,color:s,scale:a,property:l}),n.restore()}function uL(n,e,t){const{segments:r,points:i}=e;let s=!0,o=!1;n.beginPath();for(const a of r){const{start:l,end:u}=a,h=i[l],p=i[vw(l,u,i)];s?(n.moveTo(h.x,h.y),s=!1):(n.lineTo(h.x,t),n.lineTo(h.x,h.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(p.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function cL(n,e){const{line:t,target:r,property:i,color:s,scale:o}=e,a=Fte(t,r,i);for(const{source:l,target:u,start:h,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,m=r!==!0;n.save(),n.fillStyle=v,nne(n,o,m&&Qb(i,h,p)),n.beginPath();const S=!!t.pathSegment(n,l);let E;if(m){S?n.closePath():dL(n,r,p,i);const k=!!r.pathSegment(n,u,{move:S,reverse:!0});E=S&&k,E||dL(n,r,h,i)}n.closePath(),n.fill(E?"evenodd":"nonzero"),n.restore()}}function nne(n,e,t){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(n.beginPath(),n.rect(o,r,a-o,i-r),n.clip())}function dL(n,e,t,r){const i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var rne={id:"filler",afterDatasetsUpdate(n,e,t){const r=(n.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof vh&&(l={visible:n.isDatasetVisible(o),index:o,fill:$te(a,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=zte(i,o,t.propagate))},beforeDraw(n,e,t){const r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&N_(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;lL(s)&&N_(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const r=e.meta.$filler;!lL(r)||t.drawTime!=="beforeDatasetDraw"||N_(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const hL=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},ine=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class fL extends Hd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Os(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=da(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=hL(r,s);let u,h;t.font=i.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,i,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,m=-h;return this.legendItems.forEach((S,E)=>{const k=r+t/2+s.measureText(S.text).width;(E===0||u[u.length-1]+k+2*a>o)&&(p+=h,u[u.length-(E>0?0:1)]=0,m+=h,v++),l[E]={left:0,top:m,row:v,width:k,height:i},u[u.length-1]+=k+a}),p}_fitCols(e,t,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let p=a,v=0,m=0,S=0,E=0;return this.legendItems.forEach((k,T)=>{const{itemWidth:A,itemHeight:R}=sne(r,t,s,k,i);T>0&&m+R+2*a>h&&(p+=v+a,u.push({width:v,height:m}),S+=v+a,E++,v=m=0),l[T]={left:S,top:m,col:E,width:A,height:R},v=Math.max(v,A),m+=R+a}),p+=v,u.push({width:v,height:m}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Cp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=ol(r,this.left+i,this.right-this.lineWidths[a]);for(const u of t)a!==u.row&&(a=u.row,l=ol(r,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+e+i,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+i}else{let a=0,l=ol(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const u of t)u.col!==a&&(a=u.col,l=ol(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+i,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Xy(e,this),this._draw(),Jy(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=ko.color,l=Cp(e.rtl,this.left,this.width),u=da(o.font),{padding:h}=o,p=u.size,v=p/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:S,boxHeight:E,itemHeight:k}=hL(o,p),T=function(pe,ge,O){if(isNaN(S)||S<=0||isNaN(E)||E<0)return;i.save();const j=si(O.lineWidth,1);if(i.fillStyle=si(O.fillStyle,a),i.lineCap=si(O.lineCap,"butt"),i.lineDashOffset=si(O.lineDashOffset,0),i.lineJoin=si(O.lineJoin,"miter"),i.lineWidth=j,i.strokeStyle=si(O.strokeStyle,a),i.setLineDash(si(O.lineDash,[])),o.usePointStyle){const Y={radius:E*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:j},V=l.xPlus(pe,S/2),N=ge+v;GP(i,Y,V,N,o.pointStyleWidth&&S)}else{const Y=ge+Math.max((p-E)/2,0),V=l.leftForLtr(pe,S),N=vf(O.borderRadius);i.beginPath(),Object.values(N).some(q=>q!==0)?Cm(i,{x:V,y:Y,w:S,h:E,radius:N}):i.rect(V,Y,S,E),i.fill(),j!==0&&i.stroke()}i.restore()},A=function(pe,ge,O){Sf(i,O.text,pe,ge+k/2,u,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},R=this.isHorizontal(),G=this._computeTitleHeight();R?m={x:ol(s,this.left+h,this.right-r[0]),y:this.top+h+G,line:0}:m={x:this.left+h,y:ol(s,this.top+G+h,this.bottom-t[0].height),line:0},QP(this.ctx,e.textDirection);const ee=k+h;this.legendItems.forEach((pe,ge)=>{i.strokeStyle=pe.fontColor,i.fillStyle=pe.fontColor;const O=i.measureText(pe.text).width,j=l.textAlign(pe.textAlign||(pe.textAlign=o.textAlign)),Y=S+v+O;let V=m.x,N=m.y;l.setWidth(this.width),R?ge>0&&V+Y+h>this.right&&(N=m.y+=ee,m.line++,V=m.x=ol(s,this.left+h,this.right-r[m.line])):ge>0&&N+ee>this.bottom&&(V=m.x=V+t[m.line].width+h,m.line++,N=m.y=ol(s,this.top+G+h,this.bottom-t[m.line].height));const q=l.x(V);if(T(q,N,pe),V=PJ(j,V+S+v,R?V+Y:this.right,e.rtl),A(l.x(V),N,pe),R)m.x+=Y+h;else if(typeof pe.text!="string"){const $=u.lineHeight;m.y+=CM(pe,$)+h}else m.y+=ee}),eM(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=da(t.font),i=gl(t.padding);if(!t.display)return;const s=Cp(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=r.size/2,u=i.top+l;let h,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),h=this.top+u,p=ol(e.align,p,this.right-v);else{const S=this.columnSizes.reduce((E,k)=>Math.max(E,k.height),0);h=u+ol(e.align,this.top,this.bottom-S-e.labels.padding-this._computeTitleHeight())}const m=ol(a,p,p+v);o.textAlign=s.textAlign(lw(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,Sf(o,t.text,m,h,r)}_computeTitleHeight(){const e=this.options.title,t=da(e.font),r=gl(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(Od(e,this.left,this.right)&&Od(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Od(e,i.left,i.left+i.width)&&Od(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!lne(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=ine(i,r);i&&!s&&Os(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Os(t.onHover,[e,r,this],this)}else r&&Os(t.onClick,[e,r,this],this)}}function sne(n,e,t,r,i){const s=one(r,n,e,t),o=ane(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function one(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}function ane(n,e,t){let r=n;return typeof e.text!="string"&&(r=CM(e,t)),r}function CM(n,e){const t=n.text?n.text.length:0;return e*t}function lne(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var une={id:"legend",_element:fL,start(n,e,t){const r=n.legend=new fL({ctx:n.ctx,options:t,chart:n});pl.configure(n,r,t),pl.addBox(n,r)},stop(n){pl.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;pl.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(t?0:void 0),h=gl(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class yw extends Hd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=eo(r.text)?r.text.length:1;this._padding=gl(r.padding);const s=i*da(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,u,h,p;return this.isHorizontal()?(h=ol(a,r,s),p=t+e,u=s-r):(o.position==="left"?(h=r+e,p=ol(a,i,t),l=Us*-.5):(h=s-e,p=ol(a,t,i),l=Us*.5),u=i-t),{titleX:h,titleY:p,maxWidth:u,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=da(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(s);Sf(e,t.text,0,0,r,{color:t.color,maxWidth:l,rotation:u,textAlign:lw(t.align),textBaseline:"middle",translation:[o,a]})}}function cne(n,e){const t=new yw({ctx:n.ctx,options:e,chart:n});pl.configure(n,t,e),pl.addBox(n,t),n.titleBlock=t}var dne={id:"title",_element:yw,start(n,e,t){cne(n,t)},stop(n){const e=n.titleBlock;pl.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;pl.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const W0=new WeakMap;var hne={id:"subtitle",start(n,e,t){const r=new yw({ctx:n.ctx,options:t,chart:n});pl.configure(n,r,t),pl.addBox(n,r),W0.set(n,r)},stop(n){pl.removeBox(n,W0.get(n)),W0.delete(n)},beforeUpdate(n,e,t){const r=W0.get(n);pl.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Og={average(n){if(!n.length)return!1;let e,t,r=0,i=0,s=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=Gb(e,u);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,r=l.y}return{x:t,y:r}}};function Gc(n,e){return e&&(eo(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Pd(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function fne(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function pL(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=e,l=da(e.bodyFont),u=da(e.titleFont),h=da(e.footerFont),p=s.length,v=i.length,m=r.length,S=gl(e.padding);let E=S.height,k=0,T=r.reduce((G,ee)=>G+ee.before.length+ee.lines.length+ee.after.length,0);if(T+=n.beforeBody.length+n.afterBody.length,p&&(E+=p*u.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),T){const G=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=m*G+(T-m)*l.lineHeight+(T-1)*e.bodySpacing}v&&(E+=e.footerMarginTop+v*h.lineHeight+(v-1)*e.footerSpacing);let A=0;const R=function(G){k=Math.max(k,t.measureText(G).width+A)};return t.save(),t.font=u.string,ps(n.title,R),t.font=l.string,ps(n.beforeBody.concat(n.afterBody),R),A=e.displayColors?o+2+e.boxPadding:0,ps(r,G=>{ps(G.before,R),ps(G.lines,R),ps(G.after,R)}),A=0,t.font=h.string,ps(n.footer,R),t.restore(),k+=S.width,{width:k,height:E}}function pne(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function gne(n,e,t,r){const{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if(n==="left"&&i+s+o>e.width||n==="right"&&i-s-o<0)return!0}function mne(n,e,t,r){const{x:i,width:s}=t,{width:o,chartArea:{left:a,right:l}}=n;let u="center";return r==="center"?u=i<=(a+l)/2?"left":"right":i<=s/2?u="left":i>=o-s/2&&(u="right"),gne(u,n,e,t)&&(u="center"),u}function gL(n,e,t){const r=t.yAlign||e.yAlign||pne(n,t);return{xAlign:t.xAlign||e.xAlign||mne(n,e,t,r),yAlign:r}}function vne(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function yne(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function mL(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,u=i+s,{topLeft:h,topRight:p,bottomLeft:v,bottomRight:m}=vf(o);let S=vne(e,a);const E=yne(e,l,u);return l==="center"?a==="left"?S+=u:a==="right"&&(S-=u):a==="left"?S-=Math.max(h,v)+i:a==="right"&&(S+=Math.max(p,m)+i),{x:Ea(S,0,r.width-e.width),y:Ea(E,0,r.height-e.height)}}function q0(n,e,t){const r=gl(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function vL(n){return Gc([],Pd(n))}function _ne(n,e,t){return Dh(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function yL(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const EM={beforeTitle:Cd,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Cd,beforeBody:Cd,beforeLabel:Cd,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Gi(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Cd,afterBody:Cd,beforeFooter:Cd,footer:Cd,afterFooter:Cd};function Zl(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?EM[e].call(t,r):i}class e2 extends Hd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,s=new iM(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=_ne(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=Zl(r,"beforeTitle",this,e),s=Zl(r,"title",this,e),o=Zl(r,"afterTitle",this,e);let a=[];return a=Gc(a,Pd(i)),a=Gc(a,Pd(s)),a=Gc(a,Pd(o)),a}getBeforeBody(e,t){return vL(Zl(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return ps(e,s=>{const o={before:[],lines:[],after:[]},a=yL(r,s);Gc(o.before,Pd(Zl(a,"beforeLabel",this,s))),Gc(o.lines,Zl(a,"label",this,s)),Gc(o.after,Pd(Zl(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,t){return vL(Zl(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=Zl(r,"beforeFooter",this,e),s=Zl(r,"footer",this,e),o=Zl(r,"afterFooter",this,e);let a=[];return a=Gc(a,Pd(i)),a=Gc(a,Pd(s)),a=Gc(a,Pd(o)),a}_createItems(e){const t=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,u;for(l=0,u=t.length;l<u;++l)a.push(fne(this.chart,t[l]));return e.filter&&(a=a.filter((h,p,v)=>e.filter(h,p,v,r))),e.itemSort&&(a=a.sort((h,p)=>e.itemSort(h,p,r))),ps(a,h=>{const p=yL(e.callbacks,h);i.push(Zl(p,"labelColor",this,h)),s.push(Zl(p,"labelPointStyle",this,h)),o.push(Zl(p,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Og[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=pL(this,r),u=Object.assign({},a,l),h=gL(this.chart,r,u),p=mL(r,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const s=this.getCaretPosition(e,r,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:p}=vf(a),{x:v,y:m}=e,{width:S,height:E}=t;let k,T,A,R,G,ee;return s==="center"?(G=m+E/2,i==="left"?(k=v,T=k-o,R=G+o,ee=G-o):(k=v+S,T=k+o,R=G-o,ee=G+o),A=k):(i==="left"?T=v+Math.max(l,h)+o:i==="right"?T=v+S-Math.max(u,p)-o:T=this.caretX,s==="top"?(R=m,G=R-o,k=T-o,A=T+o):(R=m+E,G=R+o,k=T+o,A=T-o),ee=R),{x1:k,x2:T,x3:A,y1:R,y2:G,y3:ee}}drawTitle(e,t,r){const i=this.title,s=i.length;let o,a,l;if(s){const u=Cp(r.rtl,this.x,this.width);for(e.x=q0(this,r.titleAlign,r),t.textAlign=u.textAlign(r.titleAlign),t.textBaseline="middle",o=da(r.titleFont),a=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,l=0;l<s;++l)t.fillText(i[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,t,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=s,h=da(s.bodyFont),p=q0(this,"left",s),v=i.x(p),m=l<h.lineHeight?(h.lineHeight-l)/2:0,S=t.y+m;if(s.usePointStyle){const E={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=i.leftForLtr(v,u)+u/2,T=S+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,qb(e,E,k,T),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,qb(e,E,k,T)}else{e.lineWidth=ki(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(v,u),k=i.leftForLtr(i.xPlus(v,1),u-2),T=vf(o.borderRadius);Object.values(T).some(A=>A!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Cm(e,{x:E,y:S,w:u,h:l,radius:T}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Cm(e,{x:k,y:S+1,w:u-2,h:l-2,radius:T}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,S,u,l),e.strokeRect(E,S,u,l),e.fillStyle=o.backgroundColor,e.fillRect(k,S+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=r,p=da(r.bodyFont);let v=p.lineHeight,m=0;const S=Cp(r.rtl,this.x,this.width),E=function(O){t.fillText(O,S.x(e.x+m),e.y+v/2),e.y+=v+s},k=S.textAlign(o);let T,A,R,G,ee,pe,ge;for(t.textAlign=o,t.textBaseline="middle",t.font=p.string,e.x=q0(this,k,r),t.fillStyle=r.bodyColor,ps(this.beforeBody,E),m=a&&k!=="right"?o==="center"?u/2+h:u+2+h:0,G=0,pe=i.length;G<pe;++G){for(T=i[G],A=this.labelTextColors[G],t.fillStyle=A,ps(T.before,E),R=T.lines,a&&R.length&&(this._drawColorBox(t,e,G,S,r),v=Math.max(p.lineHeight,l)),ee=0,ge=R.length;ee<ge;++ee)E(R[ee]),v=p.lineHeight;ps(T.after,E)}m=0,v=p.lineHeight,ps(this.afterBody,E),e.y-=s}drawFooter(e,t,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Cp(r.rtl,this.x,this.width);for(e.x=q0(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=l.textAlign(r.footerAlign),t.textBaseline="middle",o=da(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=r,{topLeft:p,topRight:v,bottomLeft:m,bottomRight:S}=vf(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+p,l),o==="top"&&this.drawCaret(e,t,r,i),t.lineTo(a+u-v,l),t.quadraticCurveTo(a+u,l,a+u,l+v),o==="center"&&s==="right"&&this.drawCaret(e,t,r,i),t.lineTo(a+u,l+h-S),t.quadraticCurveTo(a+u,l+h,a+u-S,l+h),o==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(a+m,l+h),t.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,t,r,i),t.lineTo(a,l+p),t.quadraticCurveTo(a,l,a+p,l),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Og[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=pL(this,e),l=Object.assign({},o,this._size),u=gL(t,e,l),h=mL(e,l,u,t);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=gl(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,t),QP(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),eM(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!iy(r,i),o=this._positionChanged(i,t);(s||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,r),a=this._positionChanged(o,e),l=t||!iy(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:i,options:s}=this,o=Og[s.position].call(this,e,t);return o!==!1&&(r!==o.x||i!==o.y)}}tt(e2,"positioners",Og);var bne={id:"tooltip",_element:e2,positioners:Og,afterInit(n,e,t){t&&(n.tooltip=new e2({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:EM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},wne=Object.freeze({__proto__:null,Colors:Ite,Decimation:Bte,Filler:rne,Legend:une,SubTitle:hne,Title:dne,Tooltip:bne});const xne=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Lne(n,e,t,r){const i=n.indexOf(e);if(i===-1)return xne(n,e,t,r);const s=n.lastIndexOf(e);return i!==s?t:i}const Sne=(n,e)=>n===null?null:Ea(Math.round(n),0,e);function _L(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class t2 extends Mf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:s}of t)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Gi(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:Lne(r,e,si(t,e),this._addedLabels),Sne(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return _L.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}tt(t2,"id","category"),tt(t2,"defaults",{ticks:{callback:_L}});function Cne(n,e){const t=[],{bounds:i,step:s,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:p,includeBounds:v}=n,m=s||1,S=h-1,{min:E,max:k}=e,T=!Gi(o),A=!Gi(a),R=!Gi(u),G=(k-E)/(p+1);let ee=f3((k-E)/S/m)*m,pe,ge,O,j;if(ee<1e-14&&!T&&!A)return[{value:E},{value:k}];j=Math.ceil(k/ee)-Math.floor(E/ee),j>S&&(ee=f3(j*ee/S/m)*m),Gi(l)||(pe=Math.pow(10,l),ee=Math.ceil(ee*pe)/pe),i==="ticks"?(ge=Math.floor(E/ee)*ee,O=Math.ceil(k/ee)*ee):(ge=E,O=k),T&&A&&s&&bJ((a-o)/s,ee/1e3)?(j=Math.round(Math.min((a-o)/ee,h)),ee=(a-o)/j,ge=o,O=a):R?(ge=T?o:ge,O=A?a:O,j=u-1,ee=(O-ge)/j):(j=(O-ge)/ee,tm(j,Math.round(j),ee/1e3)?j=Math.round(j):j=Math.ceil(j));const Y=Math.max(p3(ee),p3(ge));pe=Math.pow(10,Gi(l)?Y:l),ge=Math.round(ge*pe)/pe,O=Math.round(O*pe)/pe;let V=0;for(T&&(v&&ge!==o?(t.push({value:o}),ge<o&&V++,tm(Math.round((ge+V*ee)*pe)/pe,o,bL(o,G,n))&&V++):ge<o&&V++);V<j;++V){const N=Math.round((ge+V*ee)*pe)/pe;if(A&&N>a)break;t.push({value:N})}return A&&v&&O!==a?t.length&&tm(t[t.length-1].value,a,bL(a,G,n))?t[t.length-1].value=a:t.push({value:a}):(!A||O===a)&&t.push({value:O}),t}function bL(n,e,{horizontal:t,minRotation:r}){const i=xc(r),s=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class dy extends Mf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Gi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=t?i:l,a=l=>s=r?s:l;if(e){const l=id(i),u=id(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=Cne(i,s);return e.bounds==="ticks"&&RP(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return zm(e,this.chart.options.locale,this.options.ticks.format)}}class n2 extends dy{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Mo(e)?e:0,this.max=Mo(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=xc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}tt(n2,"id","linear"),tt(n2,"defaults",{ticks:{callback:Zy.formatters.numeric}});const Pm=n=>Math.floor(mh(n)),ef=(n,e)=>Math.pow(10,Pm(n)+e);function wL(n){return n/Math.pow(10,Pm(n))===1}function xL(n,e,t){const r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function Ene(n,e){const t=e-n;let r=Pm(t);for(;xL(n,e,r)>10;)r++;for(;xL(n,e,r)<10;)r--;return Math.min(r,Pm(n))}function Pne(n,{min:e,max:t}){e=Su(n.min,e);const r=[],i=Pm(e);let s=Ene(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,u=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((u-h)/Math.pow(10,s)),v=Su(n.min,Math.round((l+h+p*Math.pow(10,s))*o)/o);for(;v<t;)r.push({value:v,major:wL(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+h+p*Math.pow(10,s))*o)/o;const m=Su(n.max,v);return r.push({value:m,major:wL(m),significand:p}),r}class r2 extends Mf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=dy.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return Mo(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Mo(e)?Math.max(0,e):null,this.max=Mo(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Mo(this._userMin)&&(this.min=e===ef(this.min,0)?ef(this.min,-1):ef(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=t?i:a;r===i&&(r<=0?(s(1),o(10)):(s(ef(r,-1)),o(ef(i,1)))),r<=0&&s(ef(i,-1)),i<=0&&o(ef(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},r=Pne(t,this);return e.bounds==="ticks"&&RP(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":zm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=mh(e),this._valueRange=mh(this.max)-mh(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(mh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}tt(r2,"id","logarithmic"),tt(r2,"defaults",{ticks:{callback:Zy.formatters.logarithmic,major:{enabled:!0}}});function i2(n){const e=n.ticks;if(e.display&&n.display){const t=gl(e.backdropPadding);return si(e.font&&e.font.size,ko.font.size)+t.height}return 0}function Mne(n,e,t){return t=eo(t)?t:[t],{w:BJ(n,e.string,t),h:t.length*e.lineHeight}}function LL(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function kne(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Us/s:0;for(let l=0;l<s;l++){const u=o.setContext(n.getPointLabelContext(l));i[l]=u.padding;const h=n.getPointPosition(l,n.drawingArea+i[l],a),p=da(u.font),v=Mne(n.ctx,p,n._pointLabels[l]);r[l]=v;const m=Cu(n.getIndexAngle(l)+a),S=Math.round(ow(m)),E=LL(S,h.x,v.w,0,180),k=LL(S,h.y,v.h,90,270);Ane(t,e,m,E,k)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=Ine(n,r,i)}function Ane(n,e,t,r,i){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function Tne(n,e,t){const r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=t,l=n.getPointPosition(e,r+i+o,s),u=Math.round(ow(Cu(l.angle+Go))),h=Rne(l.y,a.h,u),p=One(u),v=Nne(l.x,a.w,p);return{visible:!0,x:l.x,y:h,textAlign:p,left:v,top:h,right:v+a.w,bottom:h+a.h}}function Dne(n,e){if(!e)return!0;const{left:t,top:r,right:i,bottom:s}=n;return!(Rd({x:t,y:r},e)||Rd({x:t,y:s},e)||Rd({x:i,y:r},e)||Rd({x:i,y:s},e))}function Ine(n,e,t){const r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:i2(s)/2,additionalAngle:o?Us/i:0};let u;for(let h=0;h<i;h++){l.padding=t[h],l.size=e[h];const p=Tne(n,h,l);r.push(p),a==="auto"&&(p.visible=Dne(p,u),p.visible&&(u=p))}return r}function One(n){return n===0||n===180?"center":n<180?"left":"right"}function Nne(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function Rne(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function Bne(n,e,t){const{left:r,top:i,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Gi(a)){const l=vf(e.borderRadius),u=gl(e.backdropPadding);n.fillStyle=a;const h=r-u.left,p=i-u.top,v=s-r+u.width,m=o-i+u.height;Object.values(l).some(S=>S!==0)?(n.beginPath(),Cm(n,{x:h,y:p,w:v,h:m,radius:l}),n.fill()):n.fillRect(h,p,v,m)}}function Fne(n,e){const{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){const s=n._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(n.getPointLabelContext(i));Bne(t,o,s);const a=da(o.font),{x:l,y:u,textAlign:h}=s;Sf(t,n._pointLabels[i],l,u+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function PM(n,e,t,r){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,$s);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function jne(n,e,t,r,i){const s=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),PM(n,t,o,r),s.closePath(),s.stroke(),s.restore())}function zne(n,e,t){return Dh(n,{label:t,index:e,type:"pointLabel"})}class Ng extends dy{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=gl(i2(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Mo(e)&&!isNaN(e)?e:0,this.max=Mo(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/i2(this.options))}generateTickLabels(e){dy.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const i=Os(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?kne(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){const t=$s/(this._pointLabels.length||1),r=this.options.startAngle||0;return Cu(e*t+xc(r))}getDistanceFromCenterForValue(e){if(Gi(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Gi(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return zne(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const i=this.getIndexAngle(e)-Go+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),PM(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length;let a,l,u;if(t.pointLabels.display&&Fne(this,o),i.display&&this.ticks.forEach((h,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(h.value);const v=this.getContext(p),m=i.setContext(v),S=s.setContext(v);jne(this,m,l,o,S)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const h=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=h;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),u=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!t.reverse)return;const u=r.setContext(this.getContext(l)),h=da(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=u.backdropColor;const p=gl(u.backdropPadding);e.fillRect(-o/2-p.left,-s-h.size/2-p.top,o+p.width,h.size+p.height)}Sf(e,a.label,0,-s,h,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}tt(Ng,"id","radialLinear"),tt(Ng,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Zy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),tt(Ng,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),tt(Ng,"descriptors",{angleLines:{_fallback:"grid"}});const t1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ru=Object.keys(t1);function SL(n,e){return n-e}function CL(n,e){if(Gi(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Mo(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(Np(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,i)),+o)}function EL(n,e,t,r){const i=ru.length;for(let s=ru.indexOf(n);s<i-1;++s){const o=t1[ru[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=r)return ru[s]}return ru[i-1]}function $ne(n,e,t,r,i){for(let s=ru.length-1;s>=ru.indexOf(t);s--){const o=ru[s];if(t1[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return ru[t?ru.indexOf(t):0]}function Une(n){for(let e=ru.indexOf(n)+1,t=ru.length;e<t;++e)if(t1[ru[e]].common)return ru[e]}function PL(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:i}=aw(t,e),s=t[r]>=e?t[r]:t[i];n[s]=!0}}function Vne(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=t[a],l>=0&&(e[l].major=!0);return e}function ML(n,e,t){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!t?r:Vne(n,r,i,t)}class Mm extends Mf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new aM._date(e.adapters.date);i.init(t),em(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:CL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Mo(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),s=Mo(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=SJ(i,s,o);return this._unit=t.unit||(r.autoSkip?EL(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):$ne(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Une(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),ML(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=Ea(t,0,o),r=Ea(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||EL(s.minUnit,t,r,this._getLabelCapacity(t)),a=si(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=Np(l)||l===!0,h={};let p=t,v,m;if(u&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,u?"day":o),e.diff(r,t,o)>1e5*a)throw new Error(t+" and "+r+" are too far apart with stepSize of "+a+" "+o);const S=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,m=0;v<r;v=+e.add(v,a,o),m++)PL(h,v,S);return(v===r||i.bounds==="ticks"||m===1)&&PL(h,v,S),Object.keys(h).sort(SL).map(E=>+E)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,s=this._unit,o=t||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,r,i){const s=this.options,o=s.ticks.callback;if(o)return Os(o,[e,t,r],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],p=u&&a[u],v=r[t],m=u&&p&&v&&v.major;return this._adapter.format(e,i||(m?p:h))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=xc(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,ML(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(CL(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return jP(e.sort(SL))}}tt(Mm,"id","time"),tt(Mm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Y0(n,e,t){let r=0,i=n.length-1,s,o,a,l;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Nd(n,"pos",e)),{pos:s,time:a}=n[r],{pos:o,time:l}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Nd(n,"time",e)),{time:s,pos:a}=n[r],{time:o,pos:l}=n[i]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class s2 extends Mm{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Y0(t,this.min),this._tableRange=Y0(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=t&&u<=r&&i.push(u);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],u=i[o],Math.round((h+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Y0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return Y0(this._table,r*this._tableRange+this._minPos,!0)}}tt(s2,"id","timeseries"),tt(s2,"defaults",Mm.defaults);var Hne=Object.freeze({__proto__:null,CategoryScale:t2,LinearScale:n2,LogarithmicScale:r2,RadialLinearScale:Ng,TimeScale:Mm,TimeSeriesScale:s2});const Gne=[JQ,Pte,wne,Hne];Zc.register(...Gne);const MM=6048e5,Wne=864e5,$m=6e4,Um=36e5,qne=1e3,kL=Symbol.for("constructDateFrom");function To(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&kL in n?n[kL](e):n instanceof Date?new n.constructor(e):new Date(e)}function Xr(n,e){return To(e||n,n)}function n1(n,e,t){const r=Xr(n,t==null?void 0:t.in);return isNaN(e)?To((t==null?void 0:t.in)||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function _w(n,e,t){const r=Xr(n,t==null?void 0:t.in);if(isNaN(e))return To(n,NaN);if(!e)return r;const i=r.getDate(),s=To(n,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function bw(n,e,t){return To(n,+Xr(n)+e)}function Yne(n,e,t){return bw(n,e*Um)}let Kne={};function kf(){return Kne}function ad(n,e){var a,l,u,h;const t=kf(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,i=Xr(n,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Fp(n,e){return ad(n,{...e,weekStartsOn:1})}function kM(n,e){const t=Xr(n,e==null?void 0:e.in),r=t.getFullYear(),i=To(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Fp(i),o=To(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Fp(o);return t.getTime()>=s.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function hy(n){const e=Xr(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Af(n,...e){const t=To.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function o2(n,e){const t=Xr(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function AM(n,e,t){const[r,i]=Af(t==null?void 0:t.in,n,e),s=o2(r),o=o2(i),a=+s-hy(s),l=+o-hy(o);return Math.round((a-l)/Wne)}function Zne(n,e){const t=kM(n,e),r=To(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Fp(r)}function Xne(n,e,t){const r=Xr(n,t==null?void 0:t.in);return r.setTime(r.getTime()+e*$m),r}function Jne(n,e,t){return _w(n,e*3,t)}function Qne(n,e,t){return bw(n,e*1e3)}function ere(n,e,t){return n1(n,e*7,t)}function tre(n,e,t){return _w(n,e*12,t)}function sm(n,e){const t=+Xr(n)-+Xr(e);return t<0?-1:t>0?1:t}function nre(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function TM(n){return!(!nre(n)&&typeof n!="number"||isNaN(+Xr(n)))}function rre(n,e,t){const[r,i]=Af(t==null?void 0:t.in,n,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function ire(n,e,t){const[r,i]=Af(t==null?void 0:t.in,n,e);return r.getFullYear()-i.getFullYear()}function DM(n,e,t){const[r,i]=Af(t==null?void 0:t.in,n,e),s=AL(r,i),o=Math.abs(AM(r,i));r.setDate(r.getDate()-s*o);const a=+(AL(r,i)===-s),l=s*(o-a);return l===0?0:l}function AL(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Vm(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function sre(n,e,t){const[r,i]=Af(t==null?void 0:t.in,n,e),s=(+r-+i)/Um;return Vm(t==null?void 0:t.roundingMethod)(s)}function ww(n,e){return+Xr(n)-+Xr(e)}function ore(n,e,t){const r=ww(n,e)/$m;return Vm(t==null?void 0:t.roundingMethod)(r)}function IM(n,e){const t=Xr(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function OM(n,e){const t=Xr(n,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function are(n,e){const t=Xr(n,e==null?void 0:e.in);return+IM(t,e)==+OM(t,e)}function NM(n,e,t){const[r,i,s]=Af(t==null?void 0:t.in,n,n,e),o=sm(i,s),a=Math.abs(rre(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=sm(i,s)===-o;are(r)&&a===1&&sm(r,s)===1&&(l=!1);const u=o*(a-+l);return u===0?0:u}function lre(n,e,t){const r=NM(n,e,t)/3;return Vm(t==null?void 0:t.roundingMethod)(r)}function ure(n,e,t){const r=ww(n,e)/1e3;return Vm(t==null?void 0:t.roundingMethod)(r)}function cre(n,e,t){const r=DM(n,e,t)/7;return Vm(t==null?void 0:t.roundingMethod)(r)}function dre(n,e,t){const[r,i]=Af(t==null?void 0:t.in,n,e),s=sm(r,i),o=Math.abs(ire(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=sm(r,i)===-s,l=s*(o-+a);return l===0?0:l}function hre(n,e){const t=Xr(n,e==null?void 0:e.in),r=t.getMonth(),i=r-r%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function fre(n,e){const t=Xr(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function pre(n,e){const t=Xr(n,e==null?void 0:e.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function RM(n,e){const t=Xr(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function gre(n,e){const t=Xr(n,e==null?void 0:e.in);return t.setMinutes(59,59,999),t}function mre(n,e){var a,l;const t=kf(),r=t.weekStartsOn??((l=(a=t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Xr(n,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function vre(n,e){const t=Xr(n,e==null?void 0:e.in);return t.setSeconds(59,999),t}function yre(n,e){const t=Xr(n,e==null?void 0:e.in),r=t.getMonth(),i=r-r%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function _re(n,e){const t=Xr(n,e==null?void 0:e.in);return t.setMilliseconds(999),t}const bre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},wre=(n,e,t)=>{let r;const i=bre[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function R_(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const xre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Lre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Sre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Cre={date:R_({formats:xre,defaultWidth:"full"}),time:R_({formats:Lre,defaultWidth:"full"}),dateTime:R_({formats:Sre,defaultWidth:"full"})},Ere={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Pre=(n,e,t,r)=>Ere[n];function vg(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):o;i=n.formattingValues[a]||n.formattingValues[o]}else{const o=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[o]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const Mre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Are={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Tre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Dre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ire={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ore=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Nre={ordinalNumber:Ore,era:vg({values:Mre,defaultWidth:"wide"}),quarter:vg({values:kre,defaultWidth:"wide",argumentCallback:n=>n-1}),month:vg({values:Are,defaultWidth:"wide"}),day:vg({values:Tre,defaultWidth:"wide"}),dayPeriod:vg({values:Dre,defaultWidth:"wide",formattingValues:Ire,defaultFormattingWidth:"wide"})};function yg(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?Bre(a,p=>p.test(o)):Rre(a,p=>p.test(o));let u;u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function Rre(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Bre(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Fre(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const jre=/^(\d+)(th|st|nd|rd)?/i,zre=/\d+/i,$re={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ure={any:[/^b/i,/^(a|c)/i]},Vre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Hre={any:[/1/i,/2/i,/3/i,/4/i]},Gre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Wre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Yre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Kre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Zre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Xre={ordinalNumber:Fre({matchPattern:jre,parsePattern:zre,valueCallback:n=>parseInt(n,10)}),era:yg({matchPatterns:$re,defaultMatchWidth:"wide",parsePatterns:Ure,defaultParseWidth:"any"}),quarter:yg({matchPatterns:Vre,defaultMatchWidth:"wide",parsePatterns:Hre,defaultParseWidth:"any",valueCallback:n=>n+1}),month:yg({matchPatterns:Gre,defaultMatchWidth:"wide",parsePatterns:Wre,defaultParseWidth:"any"}),day:yg({matchPatterns:qre,defaultMatchWidth:"wide",parsePatterns:Yre,defaultParseWidth:"any"}),dayPeriod:yg({matchPatterns:Kre,defaultMatchWidth:"any",parsePatterns:Zre,defaultParseWidth:"any"})},BM={code:"en-US",formatDistance:wre,formatLong:Cre,formatRelative:Pre,localize:Nre,match:Xre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Jre(n,e){const t=Xr(n,e==null?void 0:e.in);return AM(t,RM(t))+1}function FM(n,e){const t=Xr(n,e==null?void 0:e.in),r=+Fp(t)-+Zne(t);return Math.round(r/MM)+1}function xw(n,e){var h,p,v,m;const t=Xr(n,e==null?void 0:e.in),r=t.getFullYear(),i=kf(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(v=i.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=To((e==null?void 0:e.in)||n,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=ad(o,e),l=To((e==null?void 0:e.in)||n,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const u=ad(l,e);return+t>=+a?r+1:+t>=+u?r:r-1}function Qre(n,e){var a,l,u,h;const t=kf(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,i=xw(n,e),s=To((e==null?void 0:e.in)||n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),ad(s,e)}function jM(n,e){const t=Xr(n,e==null?void 0:e.in),r=+ad(t,e)-+Qre(t,e);return Math.round(r/MM)+1}function fs(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const rh={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return fs(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):fs(t+1,2)},d(n,e){return fs(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return fs(n.getHours()%12||12,e.length)},H(n,e){return fs(n.getHours(),e.length)},m(n,e){return fs(n.getMinutes(),e.length)},s(n,e){return fs(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return fs(i,e.length)}},rp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},TL={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return rh.y(n,e)},Y:function(n,e,t,r){const i=xw(n,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return fs(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):fs(s,e.length)},R:function(n,e){const t=kM(n);return fs(t,e.length)},u:function(n,e){const t=n.getFullYear();return fs(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return fs(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return fs(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return rh.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return fs(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=jM(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):fs(i,e.length)},I:function(n,e,t){const r=FM(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):fs(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):rh.d(n,e)},D:function(n,e,t){const r=Jre(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):fs(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return fs(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return fs(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return fs(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=rp.noon:r===0?i=rp.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=rp.evening:r>=12?i=rp.afternoon:r>=4?i=rp.morning:i=rp.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return rh.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):rh.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):fs(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):fs(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):rh.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):rh.s(n,e)},S:function(n,e){return rh.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return IL(r);case"XXXX":case"XX":return of(r);case"XXXXX":case"XXX":default:return of(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return IL(r);case"xxxx":case"xx":return of(r);case"xxxxx":case"xxx":default:return of(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+DL(r,":");case"OOOO":default:return"GMT"+of(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+DL(r,":");case"zzzz":default:return"GMT"+of(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return fs(r,e.length)},T:function(n,e,t){return fs(+n,e.length)}};function DL(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+fs(s,2)}function IL(n,e){return n%60===0?(n>0?"-":"+")+fs(Math.abs(n)/60,2):of(n,e)}function of(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=fs(Math.trunc(r/60),2),s=fs(r%60,2);return t+i+e+s}const OL=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},zM=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},eie=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return OL(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",OL(r,e)).replace("{{time}}",zM(i,e))},a2={p:zM,P:eie},tie=/^D+$/,nie=/^Y+$/,rie=["D","DD","YY","YYYY"];function $M(n){return tie.test(n)}function UM(n){return nie.test(n)}function l2(n,e,t){const r=iie(n,e,t);if(console.warn(r),rie.includes(n))throw new RangeError(r)}function iie(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const sie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aie=/^'([^]*?)'?$/,lie=/''/g,uie=/[a-zA-Z]/;function cie(n,e,t){var h,p,v,m,S,E,k,T;const r=kf(),i=(t==null?void 0:t.locale)??r.locale??BM,s=(t==null?void 0:t.firstWeekContainsDate)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(v=r.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((E=(S=t==null?void 0:t.locale)==null?void 0:S.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((T=(k=r.locale)==null?void 0:k.options)==null?void 0:T.weekStartsOn)??0,a=Xr(n,t==null?void 0:t.in);if(!TM(a))throw new RangeError("Invalid time value");let l=e.match(oie).map(A=>{const R=A[0];if(R==="p"||R==="P"){const G=a2[R];return G(A,i.formatLong)}return A}).join("").match(sie).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const R=A[0];if(R==="'")return{isToken:!1,value:die(A)};if(TL[R])return{isToken:!0,value:A};if(R.match(uie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:A}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(A=>{if(!A.isToken)return A.value;const R=A.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&UM(R)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&$M(R))&&l2(R,e,String(n));const G=TL[R[0]];return G(a,R,i.localize,u)}).join("")}function die(n){const e=n.match(aie);return e?e[1].replace(lie,"'"):n}function hie(){return Object.assign({},kf())}function fie(n,e){const t=Xr(n,e==null?void 0:e.in).getDay();return t===0?7:t}function pie(n,e){const t=gie(e)?new e(0):To(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function gie(n){var e;return typeof n=="function"&&((e=n.prototype)==null?void 0:e.constructor)===n}const mie=10;class VM{constructor(){tt(this,"subPriority",0)}validate(e,t){return!0}}class vie extends VM{constructor(e,t,r,i,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class yie extends VM{constructor(t,r){super();tt(this,"priority",mie);tt(this,"subPriority",-1);this.context=t||(i=>To(r,i))}set(t,r){return r.timestampIsSet?t:To(t,pie(t,this.context))}}class rs{run(e,t,r,i){const s=this.parse(e,t,r,i);return s?{setter:new vie(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}class _ie extends rs{constructor(){super(...arguments);tt(this,"priority",140);tt(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,r,i){return r.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const Wo={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Xc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function qo(n,e){return n&&{value:e(n.value),rest:n.rest}}function mo(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Jc(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,o=t[5]?parseInt(t[5],10):0;return{value:r*(i*Um+s*$m+o*qne),rest:e.slice(t[0].length)}}function HM(n){return mo(Wo.anyDigitsSigned,n)}function Do(n,e){switch(n){case 1:return mo(Wo.singleDigit,e);case 2:return mo(Wo.twoDigits,e);case 3:return mo(Wo.threeDigits,e);case 4:return mo(Wo.fourDigits,e);default:return mo(new RegExp("^\\d{1,"+n+"}"),e)}}function fy(n,e){switch(n){case 1:return mo(Wo.singleDigitSigned,e);case 2:return mo(Wo.twoDigitsSigned,e);case 3:return mo(Wo.threeDigitsSigned,e);case 4:return mo(Wo.fourDigitsSigned,e);default:return mo(new RegExp("^-?\\d{1,"+n+"}"),e)}}function Lw(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function GM(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=n>=s%100;i=n+o-(a?100:0)}return t?i:1-i}function WM(n){return n%400===0||n%4===0&&n%100!==0}class bie extends rs{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return qo(Do(4,t),s);case"yo":return qo(i.ordinalNumber(t,{unit:"year"}),s);default:return qo(Do(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i){const s=t.getFullYear();if(i.isTwoDigitYear){const a=GM(i.year,s);return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}const o=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}class wie extends rs{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return qo(Do(4,t),s);case"Yo":return qo(i.ordinalNumber(t,{unit:"year"}),s);default:return qo(Do(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i,s){const o=xw(t,s);if(i.isTwoDigitYear){const l=GM(i.year,o);return t.setFullYear(l,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),ad(t,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(a,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),ad(t,s)}}class xie extends rs{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return fy(r==="R"?4:r.length,t)}set(t,r,i){const s=To(t,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Fp(s)}}class Lie extends rs{constructor(){super(...arguments);tt(this,"priority",130);tt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return fy(r==="u"?4:r.length,t)}set(t,r,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class Sie extends rs{constructor(){super(...arguments);tt(this,"priority",120);tt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"Q":case"QQ":return Do(r.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class Cie extends rs{constructor(){super(...arguments);tt(this,"priority",120);tt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"q":case"qq":return Do(r.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class Eie extends rs{constructor(){super(...arguments);tt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);tt(this,"priority",110)}parse(t,r,i){const s=o=>o-1;switch(r){case"M":return qo(mo(Wo.month,t),s);case"MM":return qo(Do(2,t),s);case"Mo":return qo(i.ordinalNumber(t,{unit:"month"}),s);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class Pie extends rs{constructor(){super(...arguments);tt(this,"priority",110);tt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,i){const s=o=>o-1;switch(r){case"L":return qo(mo(Wo.month,t),s);case"LL":return qo(Do(2,t),s);case"Lo":return qo(i.ordinalNumber(t,{unit:"month"}),s);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function Mie(n,e,t){const r=Xr(n,t==null?void 0:t.in),i=jM(r,t)-e;return r.setDate(r.getDate()-i*7),Xr(r,t==null?void 0:t.in)}class kie extends rs{constructor(){super(...arguments);tt(this,"priority",100);tt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,i){switch(r){case"w":return mo(Wo.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return Do(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i,s){return ad(Mie(t,i,s),s)}}function Aie(n,e,t){const r=Xr(n,t==null?void 0:t.in),i=FM(r,t)-e;return r.setDate(r.getDate()-i*7),r}class Tie extends rs{constructor(){super(...arguments);tt(this,"priority",100);tt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,i){switch(r){case"I":return mo(Wo.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return Do(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i){return Fp(Aie(t,i))}}const Die=[31,28,31,30,31,30,31,31,30,31,30,31],Iie=[31,29,31,30,31,30,31,31,30,31,30,31];class Oie extends rs{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"subPriority",1);tt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"d":return mo(Wo.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return Do(r.length,t)}}validate(t,r){const i=t.getFullYear(),s=WM(i),o=t.getMonth();return s?r>=1&&r<=Iie[o]:r>=1&&r<=Die[o]}set(t,r,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class Nie extends rs{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"subpriority",1);tt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,i){switch(r){case"D":case"DD":return mo(Wo.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return Do(r.length,t)}}validate(t,r){const i=t.getFullYear();return WM(i)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function Sw(n,e,t){var p,v,m,S;const r=kf(),i=(t==null?void 0:t.weekStartsOn)??((v=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((S=(m=r.locale)==null?void 0:m.options)==null?void 0:S.weekStartsOn)??0,s=Xr(n,t==null?void 0:t.in),o=s.getDay(),l=(e%7+7)%7,u=7-i,h=e<0||e>6?e-(o+u)%7:(l+u)%7-(o+u)%7;return n1(s,h,t)}class Rie extends rs{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=Sw(t,i,s),t.setHours(0,0,0,0),t}}class Bie extends rs{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return qo(Do(r.length,t),o);case"eo":return qo(i.ordinalNumber(t,{unit:"day"}),o);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=Sw(t,i,s),t.setHours(0,0,0,0),t}}class Fie extends rs{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return qo(Do(r.length,t),o);case"co":return qo(i.ordinalNumber(t,{unit:"day"}),o);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=Sw(t,i,s),t.setHours(0,0,0,0),t}}function jie(n,e,t){const r=Xr(n,t==null?void 0:t.in),i=fie(r,t),s=e-i;return n1(r,s,t)}class zie extends rs{constructor(){super(...arguments);tt(this,"priority",90);tt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Do(r.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return qo(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return qo(i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return qo(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return qo(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,r){return r>=1&&r<=7}set(t,r,i){return t=jie(t,i),t.setHours(0,0,0,0),t}}class $ie extends rs{constructor(){super(...arguments);tt(this,"priority",80);tt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(Lw(i),0,0,0),t}}class Uie extends rs{constructor(){super(...arguments);tt(this,"priority",80);tt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(Lw(i),0,0,0),t}}class Vie extends rs{constructor(){super(...arguments);tt(this,"priority",80);tt(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(Lw(i),0,0,0),t}}class Hie extends rs{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,i){switch(r){case"h":return mo(Wo.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return Do(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,i){const s=t.getHours()>=12;return s&&i<12?t.setHours(i+12,0,0,0):!s&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class Gie extends rs{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,i){switch(r){case"H":return mo(Wo.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return Do(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,i){return t.setHours(i,0,0,0),t}}class Wie extends rs{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,i){switch(r){case"K":return mo(Wo.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return Do(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class qie extends rs{constructor(){super(...arguments);tt(this,"priority",70);tt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,i){switch(r){case"k":return mo(Wo.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return Do(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,i){const s=i<=24?i%24:i;return t.setHours(s,0,0,0),t}}class Yie extends rs{constructor(){super(...arguments);tt(this,"priority",60);tt(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"m":return mo(Wo.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return Do(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setMinutes(i,0,0),t}}class Kie extends rs{constructor(){super(...arguments);tt(this,"priority",50);tt(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"s":return mo(Wo.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return Do(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setSeconds(i,0),t}}class Zie extends rs{constructor(){super(...arguments);tt(this,"priority",30);tt(this,"incompatibleTokens",["t","T"])}parse(t,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return qo(Do(r.length,t),i)}set(t,r,i){return t.setMilliseconds(i),t}}class Xie extends rs{constructor(){super(...arguments);tt(this,"priority",10);tt(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return Jc(Xc.basicOptionalMinutes,t);case"XX":return Jc(Xc.basic,t);case"XXXX":return Jc(Xc.basicOptionalSeconds,t);case"XXXXX":return Jc(Xc.extendedOptionalSeconds,t);case"XXX":default:return Jc(Xc.extended,t)}}set(t,r,i){return r.timestampIsSet?t:To(t,t.getTime()-hy(t)-i)}}class Jie extends rs{constructor(){super(...arguments);tt(this,"priority",10);tt(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return Jc(Xc.basicOptionalMinutes,t);case"xx":return Jc(Xc.basic,t);case"xxxx":return Jc(Xc.basicOptionalSeconds,t);case"xxxxx":return Jc(Xc.extendedOptionalSeconds,t);case"xxx":default:return Jc(Xc.extended,t)}}set(t,r,i){return r.timestampIsSet?t:To(t,t.getTime()-hy(t)-i)}}class Qie extends rs{constructor(){super(...arguments);tt(this,"priority",40);tt(this,"incompatibleTokens","*")}parse(t){return HM(t)}set(t,r,i){return[To(t,i*1e3),{timestampIsSet:!0}]}}class ese extends rs{constructor(){super(...arguments);tt(this,"priority",20);tt(this,"incompatibleTokens","*")}parse(t){return HM(t)}set(t,r,i){return[To(t,i),{timestampIsSet:!0}]}}const tse={G:new _ie,y:new bie,Y:new wie,R:new xie,u:new Lie,Q:new Sie,q:new Cie,M:new Eie,L:new Pie,w:new kie,I:new Tie,d:new Oie,D:new Nie,E:new Rie,e:new Bie,c:new Fie,i:new zie,a:new $ie,b:new Uie,B:new Vie,h:new Hie,H:new Gie,K:new Wie,k:new qie,m:new Yie,s:new Kie,S:new Zie,X:new Xie,x:new Jie,t:new Qie,T:new ese},nse=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rse=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ise=/^'([^]*?)'?$/,sse=/''/g,ose=/\S/,ase=/[a-zA-Z]/;function lse(n,e,t,r){var k,T,A,R,G,ee,pe,ge;const i=()=>To((r==null?void 0:r.in)||t,NaN),s=hie(),o=(r==null?void 0:r.locale)??s.locale??BM,a=(r==null?void 0:r.firstWeekContainsDate)??((T=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:T.firstWeekContainsDate)??s.firstWeekContainsDate??((R=(A=s.locale)==null?void 0:A.options)==null?void 0:R.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((ee=(G=r==null?void 0:r.locale)==null?void 0:G.options)==null?void 0:ee.weekStartsOn)??s.weekStartsOn??((ge=(pe=s.locale)==null?void 0:pe.options)==null?void 0:ge.weekStartsOn)??0;if(!e)return n?i():Xr(t,r==null?void 0:r.in);const u={firstWeekContainsDate:a,weekStartsOn:l,locale:o},h=[new yie(r==null?void 0:r.in,t)],p=e.match(rse).map(O=>{const j=O[0];if(j in a2){const Y=a2[j];return Y(O,o.formatLong)}return O}).join("").match(nse),v=[];for(let O of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&UM(O)&&l2(O,e,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&$M(O)&&l2(O,e,n);const j=O[0],Y=tse[j];if(Y){const{incompatibleTokens:V}=Y;if(Array.isArray(V)){const q=v.find($=>V.includes($.token)||$.token===j);if(q)throw new RangeError(`The format string mustn't contain \`${q.fullToken}\` and \`${O}\` at the same time`)}else if(Y.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${O}\` and any other token at the same time`);v.push({token:j,fullToken:O});const N=Y.run(n,O,o.match,u);if(!N)return i();h.push(N.setter),n=N.rest}else{if(j.match(ase))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(O==="''"?O="'":j==="'"&&(O=use(O)),n.indexOf(O)===0)n=n.slice(O.length);else return i()}}if(n.length>0&&ose.test(n))return i();const m=h.map(O=>O.priority).sort((O,j)=>j-O).filter((O,j,Y)=>Y.indexOf(O)===j).map(O=>h.filter(j=>j.priority===O).sort((j,Y)=>Y.subPriority-j.subPriority)).map(O=>O[0]);let S=Xr(t,r==null?void 0:r.in);if(isNaN(+S))return i();const E={};for(const O of m){if(!O.validate(S,u))return i();const j=O.set(S,E,u);Array.isArray(j)?(S=j[0],Object.assign(E,j[1])):S=j}return S}function use(n){return n.match(ise)[1].replace(sse,"'")}function cse(n,e){const t=Xr(n,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function dse(n,e){const t=Xr(n,e==null?void 0:e.in);return t.setSeconds(0,0),t}function hse(n,e){const t=Xr(n,e==null?void 0:e.in);return t.setMilliseconds(0),t}function fse(n,e){const t=()=>To(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=vse(n);let s;if(i.date){const u=yse(i.date,r);s=_se(u.restDateString,u.year)}if(!s||isNaN(+s))return t();const o=+s;let a=0,l;if(i.time&&(a=bse(i.time),isNaN(a)))return t();if(i.timezone){if(l=wse(i.timezone),isNaN(l))return t()}else{const u=new Date(o+a),h=Xr(0,e==null?void 0:e.in);return h.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),h.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),h}return Xr(o+a+l,e==null?void 0:e.in)}const K0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},pse=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,gse=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,mse=/^([+-])(\d{2})(?::?(\d{2}))?$/;function vse(n){const e={},t=n.split(K0.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],K0.timeZoneDelimiter.test(e.date)&&(e.date=n.split(K0.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const i=K0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function yse(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function _se(n,e){if(e===null)return new Date(NaN);const t=n.match(pse);if(!t)return new Date(NaN);const r=!!t[4],i=_g(t[1]),s=_g(t[2])-1,o=_g(t[3]),a=_g(t[4]),l=_g(t[5])-1;if(r)return Ese(e,a,l)?xse(e,a,l):new Date(NaN);{const u=new Date(0);return!Sse(e,s,o)||!Cse(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,o)),u)}}function _g(n){return n?parseInt(n):1}function bse(n){const e=n.match(gse);if(!e)return NaN;const t=B_(e[1]),r=B_(e[2]),i=B_(e[3]);return Pse(t,r,i)?t*Um+r*$m+i*1e3:NaN}function B_(n){return n&&parseFloat(n.replace(",","."))||0}function wse(n){if(n==="Z")return 0;const e=n.match(mse);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Mse(r,i)?t*(r*Um+i*$m):NaN}function xse(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Lse=[31,null,31,30,31,30,31,31,30,31,30,31];function qM(n){return n%400===0||n%4===0&&n%100!==0}function Sse(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(Lse[e]||(qM(n)?29:28))}function Cse(n,e){return e>=1&&e<=(qM(n)?366:365)}function Ese(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Pse(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function Mse(n,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const kse={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};aM._date.override({_id:"date-fns",formats:function(){return kse},parse:function(n,e){if(n===null||typeof n>"u")return null;const t=typeof n;return t==="number"||n instanceof Date?n=Xr(n):t==="string"&&(typeof e=="string"?n=lse(n,e,new Date,this.options):n=fse(n,this.options)),TM(n)?n.getTime():null},format:function(n,e){return cie(n,e,this.options)},add:function(n,e,t){switch(t){case"millisecond":return bw(n,e);case"second":return Qne(n,e);case"minute":return Xne(n,e);case"hour":return Yne(n,e);case"day":return n1(n,e);case"week":return ere(n,e);case"month":return _w(n,e);case"quarter":return Jne(n,e);case"year":return tre(n,e);default:return n}},diff:function(n,e,t){switch(t){case"millisecond":return ww(n,e);case"second":return ure(n,e);case"minute":return ore(n,e);case"hour":return sre(n,e);case"day":return DM(n,e);case"week":return cre(n,e);case"month":return NM(n,e);case"quarter":return lre(n,e);case"year":return dre(n,e);default:return 0}},startOf:function(n,e,t){switch(e){case"second":return hse(n);case"minute":return dse(n);case"hour":return cse(n);case"day":return o2(n);case"week":return ad(n);case"isoWeek":return ad(n,{weekStartsOn:+t});case"month":return fre(n);case"quarter":return hre(n);case"year":return RM(n);default:return n}},endOf:function(n,e){switch(e){case"second":return _re(n);case"minute":return vre(n);case"hour":return gre(n);case"day":return IM(n);case"week":return mre(n);case"month":return OM(n);case"quarter":return yre(n);case"year":return pre(n);default:return n}}});const Ase={class:"container mx-auto px-4 py-8"},Tse={class:"mb-8"},Dse={key:0,class:"mb-6"},Ise={class:"flex gap-4"},Ose=["disabled"],Nse={key:0,value:""},Rse=["value"],Bse={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},Fse={class:"flex"},jse={class:"ml-3"},zse={class:"text-sm font-medium text-red-800"},$se={key:2,class:"mb-6 p-6 bg-gray-100 border border-gray-300 rounded-md text-center"},Use={class:"flex flex-col items-center"},Vse={class:"text-gray-600 mb-4"},Hse={key:0,class:"mt-2"},Gse={key:3,class:"mb-6"},Wse={class:"flex gap-4"},qse=["disabled"],Yse={key:0,value:""},Kse={key:1,value:""},Zse=["value"],Xse=["disabled"],Jse={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},Qse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},eoe={class:"font-medium"},toe={class:"font-medium"},noe={class:"font-medium"},roe={class:"text-gray-500"},ioe={class:"font-medium"},soe={class:"font-medium"},ooe={class:"font-medium"},aoe={class:"md:col-span-2 lg:col-span-3 flex items-center"},loe=["href"],uoe={key:4,class:"mb-6"},coe={class:"border-b border-gray-200"},doe={class:"-mb-px flex space-x-8","aria-label":"Tabs"},hoe=["onClick"],foe={key:5,class:"mb-8"},poe={class:"flex justify-between items-center mb-4"},goe={class:"text-sm text-gray-600"},moe={key:0,class:"flex items-center"},voe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},yoe={class:"bg-white rounded-lg shadow-md p-6"},_oe={class:"text-4xl font-bold text-primary-600 mb-2"},boe={class:"text-sm text-gray-600"},woe={class:"bg-white rounded-lg shadow-md p-6"},xoe={class:"text-4xl font-bold text-primary-600 mb-2"},Loe={class:"mt-4"},Soe={class:"w-full bg-gray-200 rounded-full h-2.5"},Coe={class:"bg-white rounded-lg shadow-md p-6"},Eoe={class:"text-4xl font-bold text-primary-600 mb-2"},Poe={class:"text-sm text-gray-600"},Moe={class:"bg-white rounded-lg shadow-md p-6"},koe={class:"text-4xl font-bold text-primary-600 mb-2"},Aoe={class:"text-sm text-gray-600"},Toe={class:"bg-white rounded-lg shadow-md p-6"},Doe={class:"text-4xl font-bold text-primary-600 mb-2"},Ioe={class:"text-sm text-gray-600"},Ooe={class:"bg-white rounded-lg shadow-md p-6"},Noe={class:"text-4xl font-bold text-primary-600 mb-2"},Roe={class:"text-sm text-gray-600"},Boe={key:6,class:"mb-8"},Foe={class:"flex justify-between items-center mb-4"},joe={class:"text-sm text-gray-600"},zoe={class:"flex items-center"},$oe={key:0,class:"flex items-center mr-3"},Uoe=["disabled"],Voe={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Hoe={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},Goe=["value"],Woe={key:0,class:"mt-1 text-sm text-red-600"},qoe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Yoe={class:"bg-white rounded-lg shadow-md p-6"},Koe={class:"chart-container"},Zoe={class:"bg-white rounded-lg shadow-md p-6"},Xoe={class:"chart-container"},Joe={class:"bg-white rounded-lg shadow-md p-6"},Qoe={class:"chart-container"},eae={class:"bg-white rounded-lg shadow-md p-6"},tae={class:"chart-container"},nae={class:"bg-white rounded-lg shadow-md p-6"},rae={class:"chart-container"},iae={class:"bg-white rounded-lg shadow-md p-6"},sae={class:"chart-container"},oae=Rs({__name:"MeteoView",setup(n){const e=ou(),t=Ao(),r=yt({}),i=yt(new Date),s=yt(""),o=yt([]),a=yt(""),l=yt([]),u=yt(null),h=yt(""),p=yt(""),v=yt(!1);rr(()=>{var Z;return((Z=t.user)==null?void 0:Z.user_type)||""});const m=rr(()=>t.isAdmin);let S=null;const E=rr(()=>!a.value||!o.value.length?null:o.value.find(Z=>Z.mac===a.value));function k(Z){return Z?Z.latitude&&Z.longitude&&Z.latitude!==0&&Z.longitude!==0:!1}function T(Z){return k(Z)?`${Z.latitude.toFixed(6)}, ${Z.longitude.toFixed(6)}`:""}function A(Z){if(!k(Z))return"#";const U=Z.latitude,xe=Z.longitude,Ne=encodeURIComponent(Z.name||"Station météo");return`https://www.google.com/maps/search/?api=1&query=${U},${xe}&query_place_id=${Ne}`}async function R(){try{h.value="";const Z={};m.value&&u.value&&(Z.entreprise=u.value),console.log("[fetchDevices] Appel API avec params:",Z);const U=await Y1.getDevices(Z);console.log("[fetchDevices] Réponse API:",U.data);let xe=[];if(U.data&&U.data.devices&&Array.isArray(U.data.devices)&&U.data.devices.length>0&&typeof U.data.devices[1]=="string"){let Ne=U.data.devices[1];h.value=Ne,console.warn("[fetchDevices] Message d'erreur API reçu:",h.value);return}if(U.data&&U.data.devices&&Array.isArray(U.data.devices))xe=U.data.devices;else if(Array.isArray(U.data))xe=U.data;else if(typeof U.data=="object"&&U.data!==null){for(const Ne in U.data)if(Array.isArray(U.data[Ne])){xe=U.data[Ne];break}}o.value=xe.filter(Ne=>Ne!==null&&typeof Ne=="object").map(Ne=>{var Se,ce;const Ge=Ne.mac||Ne.imei;return{id:Ne.id,name:Ne.name||`Station ${Ge}`,mac:Ge,model:((Se=Ne.stationtype)==null?void 0:Se.split("_")[0])||"Inconnu",firmware_version:(ce=Ne.stationtype)!=null&&ce.includes("_V")?Ne.stationtype.split("_V")[1]:"1.0",timezone:Ne.date_zone_id||"UTC",created_at:Ne.createtime?new Date(Ne.createtime*1e3).toISOString():new Date().toISOString(),latitude:Ne.latitude||0,longitude:Ne.longitude||0}}),console.log("[fetchDevices] Appareils normalisés:",o.value),o.value.length>0?a.value=o.value[0].mac:(console.warn("[fetchDevices] Aucun appareil disponible"),r.value={})}catch(Z){console.error("[fetchDevices] Erreur lors de la récupération des appareils:",Z),Z.response&&Z.response.data&&Z.response.data.error?h.value=Z.response.data.error:(h.value="Erreur lors de la récupération des stations météo",e.error("Erreur lors de la récupération des stations météo")),o.value=[],a.value="",r.value={}}}async function G(){try{if(!a.value){console.warn("[fetchWeatherData] Aucun appareil sélectionné");return}h.value="",v.value=!0;const Z={mac:a.value};m.value&&u.value&&(Z.entreprise=u.value),console.log("[fetchWeatherData] Appel API avec params:",Z);const U=await Y1.getRealTimeData(Z);console.log("[fetchWeatherData] Réponse API:",U.data),console.log("[fetchWeatherData] Structure de la réponse:",{hasData:U.data&&"data"in U.data,hasCode:U.data&&"code"in U.data,topLevelKeys:U.data?Object.keys(U.data):[]});let xe;U.data&&"data"in U.data?xe=U.data.data:U.data&&("outdoor"in U.data||"indoor"in U.data)?xe=U.data:(xe={},console.warn("[fetchWeatherData] Format de réponse non reconnu")),r.value=xe,i.value=new Date,s.value=new Date().toLocaleString(),h.value=""}catch(Z){console.error("[fetchWeatherData] Erreur lors de la récupération des données météo:",Z),Z.response&&Z.response.data&&Z.response.data.error?h.value=Z.response.data.error:(h.value="Erreur lors de la récupération des données météo",e.error("Erreur lors de la récupération des données météo")),r.value={}}finally{v.value=!1}}function ee(Z){if(Z==null)return"0";const U=typeof Z=="string"?parseFloat(Z):Z;return isNaN(U)?"0":((U-32)*5/9).toFixed(1)}function pe(Z){if(Z==null)return"0";const U=typeof Z=="string"?parseFloat(Z):Z;return isNaN(U)?"0":(U*1.60934).toFixed(1)}function ge(Z){if(Z==null)return"0";const U=typeof Z=="string"?parseFloat(Z):Z;return isNaN(U)?"0":(U*25.4).toFixed(1)}function O(Z){if(Z==null)return"0";const U=typeof Z=="string"?parseFloat(Z):Z;return isNaN(U)?"0":(U*33.8639).toFixed(1)}function j(Z){if(!Z)return"N/A";const U=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],xe=Math.round(Z/22.5)%16;return U[xe]}function Y(Z){return Z?Z>0?"En hausse":"En baisse":"Stable"}async function V(){if(m.value)try{const Z=await Ua.getUsers({role:"ENTREPRISE"});l.value=Z.data,l.value.length>0&&!u.value&&(u.value=l.value[0].id)}catch(Z){console.error("Erreur lors de la récupération des entreprises:",Z),e.error("Erreur lors de la récupération des entreprises")}}async function N(){try{o.value=[],a.value="",r.value={},h.value="",Object.values(ie).forEach(Z=>{try{Z.destroy()}catch(U){console.error("Erreur lors de la destruction d'un graphique:",U)}}),ie={},await R()}catch(Z){console.error("Erreur lors de la récupération des appareils avec l'entreprise:",Z),e.error("Erreur lors du changement d'entreprise")}}const q=[{id:"realtime",name:"Temps réel"},{id:"history",name:"Historique"}],$=yt("realtime"),F=yt("today"),B=yt("5min"),Q=yt(""),X=yt(""),_e=()=>{const Z=new Date,U=new Date(Z);U.setDate(Z.getDate()-1),Q.value=U.toISOString().split("T")[0],X.value=U.toISOString().split("T")[0]},me=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],We=rr(()=>{const Z=te(),U=new Date(Z.start),xe=new Date(Z.end);xe.setHours(23,59,59,999);const Ne=Math.abs(xe.getTime()-U.getTime()),Ge=Math.ceil(Ne/(1e3*60*60*24)),ce=Math.abs(new Date().getTime()-U.getTime()),je=Math.ceil(ce/(1e3*60*60*24));return me.filter(st=>Ge<=st.maxDays&&je<=st.maxPastDays)});_i(F,Z=>{Z==="custom"&&_e(),!We.value.some(xe=>xe.value===B.value)&&We.value.length>0&&(B.value=We.value[0].value)}),_i([Q,X],()=>{F.value==="custom"&&!We.value.some(U=>U.value===B.value)&&We.value.length>0&&(B.value=We.value[0].value)});const ae=yt(null),ve=yt(null),ye=yt(null),J=yt(null),se=yt(null),fe=yt(null);let ie={};const te=()=>{let Z=new Date,U=new Date;switch(F.value){case"today":Z.setHours(0,0,0,0);break;case"yesterday":Z.setDate(Z.getDate()-1),Z.setHours(0,0,0,0),U.setDate(U.getDate()-1),U.setHours(23,59,59,999);break;case"week":Z.setDate(Z.getDate()-7);break;case"month":Z.setDate(Z.getDate()-30);break;case"custom":Z=new Date(Q.value),U=new Date(X.value);break}return{start:Z.toISOString().split("T")[0],end:U.toISOString().split("T")[0]}},Oe=async()=>{try{if(we.value){console.log("[updateAllCharts] Mise à jour déjà en cours, annulation");return}if(we.value=!0,We.value.length===0){e.warning("Aucun intervalle disponible pour cette période"),we.value=!1;return}We.value.some(Ne=>Ne.value===B.value)||(B.value=We.value[0].value),console.log("[updateAllCharts] Début de la mise à jour des graphiques");const U=te(),xe={mac:a.value,start_date:U.start,end_date:U.end,cycle_type:B.value};m.value&&u.value&&(xe.entreprise=u.value),console.log("[updateAllCharts] Récupération des données historiques:",xe);try{const Ge=(await Y1.getHistoryData(xe)).data;console.log("[updateAllCharts] Données historiques reçues:",Ge);const Se=[{type:"temp",ref:ae},{type:"humidity",ref:ve},{type:"pressure",ref:ye},{type:"wind",ref:J},{type:"rain",ref:se},{type:"solar",ref:fe}];for(const ce of Se)if(console.log(`[updateAllCharts] Mise à jour du graphique ${ce.type}`),ce.ref.value){const je=re(Ge,ce.type);Be(ce.type,ce.ref.value,je)}s.value=new Date().toLocaleString()}catch(Ne){console.error("[updateAllCharts] Erreur lors de la récupération des données:",Ne),e.error("Erreur lors de la récupération des données historiques")}finally{we.value=!1}}catch(Z){console.error("[updateAllCharts] Erreur lors de la mise à jour des graphiques:",Z),e.error("Erreur lors de la mise à jour des graphiques"),we.value=!1}},we=yt(!1),Be=(Z,U,xe)=>{try{if(ie[Z]&&(ie[Z].destroy(),delete ie[Z]),console.log(`[updateChart] Données reçues pour ${Z}:`,xe),!xe.datasets||!xe.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${Z}`),ie[Z]=new Zc(U,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donnée disponible"}}}});return}let Ne="hour";B.value==="5min"||B.value==="30min"?Ne="hour":(B.value==="4hour"||B.value==="1day")&&(Ne="day");const Ge=te(),Se=new Date(Ge.start),ce=new Date(Ge.end);ce.setHours(23,59,59,999);const je={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(st){return st.length>0?new Date(st[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:Ne,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:Se.getTime(),max:ce.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:ue(Z)},ticks:{callback:function(st){const lt=typeof st=="string"?parseFloat(st):st;switch(Z){case"temp":return lt.toFixed(1)+"°C";case"humidity":return lt.toFixed(0)+"%";case"pressure":return lt.toFixed(0)+" hPa";case"wind":case"rain":return lt.toFixed(1)+(Z==="wind"?" km/h":" mm");case"solar":return lt.toFixed(0)+" W/m²";default:return lt}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};ie[Z]=new Zc(U,{type:"line",data:{datasets:xe.datasets||[]},options:je}),console.log(`[updateChart] Graphique ${Z} créé avec ${xe.datasets.length} datasets`)}catch(Ne){console.error(`[updateChart] Erreur lors de la mise à jour du graphique ${Z}:`,Ne)}},ue=Z=>{switch(Z){case"temp":return"Température (°C)";case"humidity":return"Humidité (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Précipitations (mm)";case"solar":return"Rayonnement (W/m²)";default:return""}},re=(Z,U)=>{var Se,ce,je,st,lt,_t,Je,zt,Xt,et,ut,ot,It,Jt,xn,Sn,An,Zn,Cn;if(console.log(`[formatHistoryDataForChart] Données reçues pour ${U}:`,Z),!Z)return console.warn(`[formatHistoryDataForChart] Pas de données pour ${U}`),null;let xe;if("data"in Z)xe=Z.data;else if(U in Z)xe=Z;else return console.warn(`[formatHistoryDataForChart] Structure de données non reconnue pour ${U}`),null;console.log(`[formatHistoryDataForChart] Données extraites pour ${U}:`,xe);const Ne=[],Ge=(cn,bn,ir,hr)=>{if(!Array.isArray(cn)){console.warn(`[formatHistoryDataForChart] Les données pour ${bn} ne sont pas un tableau`);return}const wr=cn.map(Kn=>{const Rr=parseFloat(String(Kn.value));return{x:Kn.time,y:hr?hr(Rr):Rr}}).filter(Kn=>!isNaN(Kn.y));wr.length>0&&Ne.push({label:bn,data:wr,borderColor:ir,fill:!1,tension:.4})};switch(U){case"temp":(ce=(Se=xe.outdoor)==null?void 0:Se.temperature)!=null&&ce.list?Ge(Object.entries(xe.outdoor.temperature.list).map(([cn,bn])=>({time:parseInt(cn)*1e3,value:bn})),"Température","#FF6384",cn=>(cn-32)*5/9):(je=xe.outdoor)!=null&&je.temperature&&Ge(xe.outdoor.temperature,"Température","#FF6384",cn=>(cn-32)*5/9);break;case"humidity":(lt=(st=xe.outdoor)==null?void 0:st.humidity)!=null&&lt.list?Ge(Object.entries(xe.outdoor.humidity.list).map(([cn,bn])=>({time:parseInt(cn)*1e3,value:bn})),"Humidité","#36A2EB"):(_t=xe.outdoor)!=null&&_t.humidity&&Ge(xe.outdoor.humidity,"Humidité","#36A2EB");break;case"pressure":(zt=(Je=xe.pressure)==null?void 0:Je.absolute)!=null&&zt.list?Ge(Object.entries(xe.pressure.absolute.list).map(([cn,bn])=>({time:parseInt(cn)*1e3,value:bn})),"Pression","#4BC0C0",cn=>cn*33.8639):(Xt=xe.pressure)!=null&&Xt.absolute&&Ge(xe.pressure.absolute,"Pression","#4BC0C0",cn=>cn*33.8639);break;case"wind":(ut=(et=xe.wind)==null?void 0:et.wind_speed)!=null&&ut.list?(Ge(Object.entries(xe.wind.wind_speed.list).map(([cn,bn])=>({time:parseInt(cn)*1e3,value:bn})),"Vitesse du vent","#FFCE56",cn=>cn*1.60934),(ot=xe.wind.wind_gust)!=null&&ot.list&&Ge(Object.entries(xe.wind.wind_gust.list).map(([cn,bn])=>({time:parseInt(cn)*1e3,value:bn})),"Rafales","#FF9F40",cn=>cn*1.60934)):(It=xe.wind)!=null&&It.wind_speed&&(Ge(xe.wind.wind_speed,"Vitesse du vent","#FFCE56",cn=>cn*1.60934),xe.wind.wind_gust&&Ge(xe.wind.wind_gust,"Rafales","#FF9F40",cn=>cn*1.60934));break;case"rain":(xn=(Jt=xe.rainfall)==null?void 0:Jt.daily)!=null&&xn.list?Ge(Object.entries(xe.rainfall.daily.list).map(([cn,bn])=>({time:parseInt(cn)*1e3,value:bn})),"Précipitations journalières","#9966FF",cn=>cn*25.4):(Sn=xe.rainfall)!=null&&Sn.daily&&Ge(xe.rainfall.daily,"Précipitations journalières","#9966FF",cn=>cn*25.4);break;case"solar":(Zn=(An=xe.solar_and_uvi)==null?void 0:An.solar)!=null&&Zn.list?Ge(Object.entries(xe.solar_and_uvi.solar.list).map(([cn,bn])=>({time:parseInt(cn)*1e3,value:bn})),"Rayonnement solaire","#FF9F40"):(Cn=xe.solar_and_uvi)!=null&&Cn.solar&&Ge(xe.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return console.log(`[formatHistoryDataForChart] Datasets générés pour ${U}:`,Ne),{datasets:Ne}};return Ol(()=>{Object.values(ie).forEach(Z=>Z.destroy())}),_i([F,B,Q,X],()=>{$.value==="history"&&a.value&&Oe()}),Es(async()=>{const Z=[];m.value&&Z.push(V()),await Promise.all(Z),await R(),S=window.setInterval(G,5*60*1e3)}),_i(u,async Z=>{m.value&&(console.log("[watch selectedCompany] Nouvelle entreprise sélectionnée:",Z),await R())}),_i(a,Z=>{Z?(console.log("[watch selectedDevice] Nouvelle station sélectionnée:",Z),G(),$.value==="history"&&Oe()):(console.log("[watch selectedDevice] Aucune station sélectionnée"),r.value={})}),_i($,Z=>{Z==="history"&&a.value&&Oe()}),Ol(()=>{S&&clearInterval(S)}),(Z,U)=>{var Ne,Ge,Se,ce,je,st,lt,_t,Je,zt,Xt,et,ut,ot,It,Jt,xn,Sn,An,Zn,Cn,cn,bn,ir,hr,wr,Kn,Rr,ms,Bi,Vs,is,Xn,ss,Et,at,Bt,Yt,In;const xe=k2("router-link");return De(),Fe("div",Ase,[x("div",Tse,[U[41]||(U[41]=x("h1",{class:"text-3xl font-bold mb-4"},"Météo",-1)),m.value?(De(),Fe("div",Dse,[U[6]||(U[6]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une entreprise ",-1)),x("div",Ise,[Tn(x("select",{"onUpdate:modelValue":U[0]||(U[0]=Pn=>u.value=Pn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:N},[l.value.length?tn("",!0):(De(),Fe("option",Nse,"Chargement des entreprises...")),(De(!0),Fe(kn,null,sr(l.value,Pn=>(De(),Fe("option",{key:Pn.id,value:Pn.id},Dt(Pn.company_name||`${Pn.first_name} ${Pn.last_name}`),9,Rse))),128))],40,Ose),[[Yi,u.value]])])])):tn("",!0),h.value?(De(),Fe("div",Bse,[x("div",Fse,[U[7]||(U[7]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),x("div",jse,[x("h3",zse,Dt(h.value),1)])])])):tn("",!0),h.value&&(h.value.includes("clés API")||h.value.includes("Ecowitt"))?(De(),Fe("div",$se,[x("div",Use,[U[9]||(U[9]=x("svg",{class:"h-12 w-12 text-gray-400 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)),U[10]||(U[10]=x("h2",{class:"text-xl font-bold text-gray-700 mb-2"},"Configuration requise",-1)),x("p",Vse,Dt(h.value),1),h.value.includes("ajouter dans la gestion")?(De(),Fe("div",Hse,[ci(xe,{to:"/users",class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:nu(()=>U[8]||(U[8]=[qr(" Configurer les clés API ")])),_:1})])):tn("",!0)])])):tn("",!0),!h.value||!(h.value.includes("clés API")||h.value.includes("Ecowitt"))?(De(),Fe("div",Gse,[U[19]||(U[19]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une station ",-1)),x("div",Wse,[Tn(x("select",{"onUpdate:modelValue":U[1]||(U[1]=Pn=>a.value=Pn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||h.value)},[!o.value.length&&!h.value?(De(),Fe("option",Yse,"Chargement des stations...")):tn("",!0),h.value?(De(),Fe("option",Kse,"Aucune station disponible")):tn("",!0),(De(!0),Fe(kn,null,sr(o.value,Pn=>(De(),Fe("option",{key:Pn.mac,value:Pn.mac},Dt(Pn.name)+" ("+Dt(Pn.model)+" - v"+Dt(Pn.firmware_version)+") ",9,Zse))),128))],8,qse),[[Yi,a.value]]),x("button",{onClick:G,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||h.value)}," Actualiser ",8,Xse)]),E.value?(De(),Fe("div",Jse,[U[18]||(U[18]=x("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),x("div",Qse,[x("div",null,[U[11]||(U[11]=x("span",{class:"text-gray-500"},"Modèle:",-1)),x("p",eoe,Dt(E.value.model),1)]),x("div",null,[U[12]||(U[12]=x("span",{class:"text-gray-500"},"Version:",-1)),x("p",toe,Dt(E.value.firmware_version),1)]),x("div",null,[U[13]||(U[13]=x("span",{class:"text-gray-500"},"ID:",-1)),x("p",noe,Dt(E.value.id),1)]),x("div",null,[x("span",roe,Dt((Ne=E.value.mac)!=null&&Ne.includes(":")?"MAC:":"IMEI:"),1),x("p",ioe,Dt(E.value.mac),1)]),x("div",null,[U[14]||(U[14]=x("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),x("p",soe,Dt(E.value.timezone),1)]),x("div",null,[U[15]||(U[15]=x("span",{class:"text-gray-500"},"Installation:",-1)),x("p",ooe,Dt(new Date(E.value.created_at).toLocaleDateString()),1)]),x("div",aoe,[U[17]||(U[17]=x("span",{class:"text-gray-500 mr-2"},"Position:",-1)),k(E.value)?(De(),Fe("a",{key:0,href:A(E.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[U[16]||(U[16]=x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),qr(" "+Dt(T(E.value)),1)],8,loe)):tn("",!0)])])])):tn("",!0)])):tn("",!0),!h.value||!(h.value.includes("clés API")||h.value.includes("Ecowitt"))?(De(),Fe("div",uoe,[x("div",coe,[x("nav",doe,[(De(),Fe(kn,null,sr(q,Pn=>x("button",{key:Pn.id,onClick:Er=>$.value=Pn.id,class:Mi([$.value===Pn.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},Dt(Pn.name),11,hoe)),64))])])])):tn("",!0),(!h.value||!(h.value.includes("clés API")||h.value.includes("Ecowitt")))&&$.value==="realtime"?(De(),Fe("div",foe,[x("div",poe,[x("p",goe," Dernière mise à jour : "+Dt(i.value?new Date(i.value).toLocaleString():"Jamais"),1),v.value?(De(),Fe("div",moe,U[20]||(U[20]=[x("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x("span",{class:"text-primary-600"},"Chargement des données...",-1)]))):tn("",!0)]),x("div",voe,[x("div",yoe,[U[21]||(U[21]=x("h2",{class:"text-xl font-semibold mb-4"},"Température Extérieure",-1)),x("div",_oe,Dt(ee((Se=(Ge=r.value.outdoor)==null?void 0:Ge.temperature)==null?void 0:Se.value))+"°C ",1),x("div",boe," Min: "+Dt(ee(((je=(ce=r.value.outdoor)==null?void 0:ce.temperature)==null?void 0:je.min)||"0"))+"°C Max: "+Dt(ee(((lt=(st=r.value.outdoor)==null?void 0:st.temperature)==null?void 0:lt.max)||"0"))+"°C ",1)]),x("div",woe,[U[22]||(U[22]=x("h2",{class:"text-xl font-semibold mb-4"},"Humidité",-1)),x("div",xoe,Dt(((Je=(_t=r.value.outdoor)==null?void 0:_t.humidity)==null?void 0:Je.value)||"0")+"% ",1),x("div",Loe,[x("div",Soe,[x("div",{class:"bg-primary-600 h-2.5 rounded-full",style:iu({width:`${((Xt=(zt=r.value.outdoor)==null?void 0:zt.humidity)==null?void 0:Xt.value)||0}%`})},null,4)])])]),x("div",Coe,[U[23]||(U[23]=x("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphérique",-1)),x("div",Eoe,Dt(O((ut=(et=r.value.pressure)==null?void 0:et.absolute)==null?void 0:ut.value))+" hPa ",1),x("div",Poe," Tendance: "+Dt(Y((It=(ot=r.value.pressure)==null?void 0:ot.absolute)==null?void 0:It.trend)),1)]),x("div",Moe,[U[25]||(U[25]=x("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),x("div",koe,Dt(pe(((xn=(Jt=r.value.wind)==null?void 0:Jt.speed)==null?void 0:xn.value)||((An=(Sn=r.value.wind)==null?void 0:Sn.wind_speed)==null?void 0:An.value)))+" km/h ",1),x("div",Aoe,[qr(" Direction: "+Dt(j(((Cn=(Zn=r.value.wind)==null?void 0:Zn.direction)==null?void 0:Cn.value)||((bn=(cn=r.value.wind)==null?void 0:cn.wind_direction)==null?void 0:bn.value)))+" ",1),U[24]||(U[24]=x("br",null,null,-1)),qr(" Rafales: "+Dt(pe(((hr=(ir=r.value.wind)==null?void 0:ir.gust)==null?void 0:hr.value)||((Kn=(wr=r.value.wind)==null?void 0:wr.wind_gust)==null?void 0:Kn.value)))+" km/h ",1)])]),x("div",Toe,[U[27]||(U[27]=x("h2",{class:"text-xl font-semibold mb-4"},"Précipitations",-1)),x("div",Doe,Dt(ge((ms=(Rr=r.value.rainfall)==null?void 0:Rr.daily)==null?void 0:ms.value))+" mm ",1),x("div",Ioe,[qr(" Taux: "+Dt(ge(((Vs=(Bi=r.value.rainfall)==null?void 0:Bi.rate)==null?void 0:Vs.value)||((Xn=(is=r.value.rainfall)==null?void 0:is.rain_rate)==null?void 0:Xn.value)))+" mm/h ",1),U[26]||(U[26]=x("br",null,null,-1)),qr(" Mensuel: "+Dt(ge((Et=(ss=r.value.rainfall)==null?void 0:ss.monthly)==null?void 0:Et.value))+" mm ",1)])]),x("div",Ooe,[U[28]||(U[28]=x("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),x("div",Noe,Dt(((Bt=(at=r.value.solar_and_uvi)==null?void 0:at.solar)==null?void 0:Bt.value)||"0")+" W/m² ",1),x("div",Roe," UV: "+Dt(((In=(Yt=r.value.solar_and_uvi)==null?void 0:Yt.uvi)==null?void 0:In.value)||"0"),1)])])])):(!h.value||!(h.value.includes("clés API")||h.value.includes("Ecowitt")))&&$.value==="history"?(De(),Fe("div",Boe,[x("div",Foe,[x("p",joe," Dernière mise à jour : "+Dt(s.value?s.value:"Jamais"),1),x("div",zoe,[we.value?(De(),Fe("div",$oe,U[29]||(U[29]=[x("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x("span",{class:"text-sm text-primary-600"},"Chargement des données...",-1)]))):tn("",!0),x("button",{onClick:Oe,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value||we.value}," Actualiser ",8,Uoe)])]),x("div",Voe,[x("div",null,[U[31]||(U[31]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Période ",-1)),Tn(x("select",{"onUpdate:modelValue":U[2]||(U[2]=Pn=>F.value=Pn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},U[30]||(U[30]=[fl('<option value="today" data-v-f7412d6a>Aujourd&#39;hui</option><option value="yesterday" data-v-f7412d6a>Hier</option><option value="week" data-v-f7412d6a>7 derniers jours</option><option value="month" data-v-f7412d6a>30 derniers jours</option><option value="custom" data-v-f7412d6a>Période personnalisée</option>',5)]),512),[[Yi,F.value]])]),F.value==="custom"?(De(),Fe("div",Hoe,[x("div",null,[U[32]||(U[32]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de début ",-1)),Tn(x("input",{type:"date","onUpdate:modelValue":U[3]||(U[3]=Pn=>Q.value=Pn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Ur,Q.value]])]),x("div",null,[U[33]||(U[33]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),Tn(x("input",{type:"date","onUpdate:modelValue":U[4]||(U[4]=Pn=>X.value=Pn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Ur,X.value]])])])):tn("",!0),x("div",null,[U[34]||(U[34]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),Tn(x("select",{"onUpdate:modelValue":U[5]||(U[5]=Pn=>B.value=Pn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(De(!0),Fe(kn,null,sr(We.value,Pn=>(De(),Fe("option",{key:Pn.value,value:Pn.value},Dt(Pn.label),9,Goe))),128))],512),[[Yi,B.value]]),p.value?(De(),Fe("div",Woe,Dt(p.value),1)):tn("",!0)])]),x("div",qoe,[x("div",Yoe,[U[35]||(U[35]=x("h3",{class:"text-lg font-semibold mb-4"},"Température",-1)),x("div",Koe,[x("canvas",{ref_key:"tempChart",ref:ae},null,512)])]),x("div",Zoe,[U[36]||(U[36]=x("h3",{class:"text-lg font-semibold mb-4"},"Humidité",-1)),x("div",Xoe,[x("canvas",{ref_key:"humidityChart",ref:ve},null,512)])]),x("div",Joe,[U[37]||(U[37]=x("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),x("div",Qoe,[x("canvas",{ref_key:"pressureChart",ref:ye},null,512)])]),x("div",eae,[U[38]||(U[38]=x("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),x("div",tae,[x("canvas",{ref_key:"windChart",ref:J},null,512)])]),x("div",nae,[U[39]||(U[39]=x("h3",{class:"text-lg font-semibold mb-4"},"Précipitations",-1)),x("div",rae,[x("canvas",{ref_key:"rainChart",ref:se},null,512)])]),x("div",iae,[U[40]||(U[40]=x("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),x("div",sae,[x("canvas",{ref_key:"solarChart",ref:fe},null,512)])])])])):tn("",!0)])])}}}),aae=kc(oae,[["__scopeId","data-v-f7412d6a"]]),lae={class:"settings-page max-w-xl mx-auto py-10 px-4"},uae={key:0,class:"mb-6"},cae={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 mb-6"},dae={class:"flex"},hae={class:"ml-3"},fae={class:"text-sm text-red-700"},pae={class:"bg-white shadow rounded-lg p-6"},gae=["disabled"],mae=["disabled"],vae={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},yae={key:0,class:"text-green-600 mt-2"},_ae=Rs({__name:"ParametresView",setup(n){const e=yt(""),t=yt(""),r=yt(!1),i=yt("");Es(async()=>{await s()});async function s(){r.value=!0,i.value="";try{const a=await mb.getGoogleMapsApiKey();a.data&&a.data.key_status==="configured"?e.value="••••••••••••••••••••••••••":e.value=""}catch(a){console.error("Erreur lors de la récupération de la clé API:",a),i.value="Impossible de récupérer la clé API. Veuillez réessayer plus tard."}finally{r.value=!1}}async function o(){if(!e.value){i.value="La clé API est requise.";return}r.value=!0,i.value="",t.value="";try{await mb.setGoogleMapsApiKey(e.value),t.value="Clé API sauvegardée avec succès.",setTimeout(()=>{t.value=""},3e3)}catch(a){console.error("Erreur lors de la sauvegarde de la clé API:",a),i.value="Impossible de sauvegarder la clé API. Veuillez réessayer plus tard."}finally{r.value=!1}}return(a,l)=>(De(),Fe("div",lae,[l[6]||(l[6]=x("h1",{class:"text-2xl font-bold mb-6"},"Paramètres de l'application",-1)),r.value?(De(),Fe("div",uae,l[1]||(l[1]=[fl('<div class="animate-pulse flex space-x-4" data-v-a28a65cb><div class="flex-1 space-y-4 py-1" data-v-a28a65cb><div class="h-4 bg-gray-200 rounded w-3/4" data-v-a28a65cb></div><div class="space-y-2" data-v-a28a65cb><div class="h-4 bg-gray-200 rounded" data-v-a28a65cb></div><div class="h-4 bg-gray-200 rounded w-5/6" data-v-a28a65cb></div></div></div></div>',1)]))):tn("",!0),i.value?(De(),Fe("div",cae,[x("div",dae,[l[2]||(l[2]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),x("div",hae,[x("p",fae,Dt(i.value),1)])])])):tn("",!0),x("div",pae,[x("form",{onSubmit:Il(o,["prevent"]),class:"space-y-4"},[x("div",null,[l[3]||(l[3]=x("label",{for:"google-maps-api-key",class:"block text-sm font-medium text-gray-700"},"Clé API Google Maps",-1)),Tn(x("input",{id:"google-maps-api-key","onUpdate:modelValue":l[0]||(l[0]=u=>e.value=u),type:"password",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre clé API Google Maps",autocomplete:"off",disabled:r.value},null,8,gae),[[Ur,e.value]])]),x("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r.value},[r.value?(De(),Fe("svg",vae,l[4]||(l[4]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):tn("",!0),l[5]||(l[5]=qr(" Sauvegarder "))],8,mae),t.value?(De(),Fe("p",yae,Dt(t.value),1)):tn("",!0)],32)])]))}}),bae=kc(_ae,[["__scopeId","data-v-a28a65cb"]]),YM=aB({history:FR("/"),routes:[{path:"/",name:"home",component:Y5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"],isMapRoute:!0}},{path:"/meteo",name:"meteo",component:aae,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:pZ,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:jY,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Id(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:Wj,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Id(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Id(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:pj,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:$X,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:Y5,meta:{requiresAuth:!0,isMapRoute:!0}},{path:"/parametres",name:"parametres",component:bae,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Id(()=>import("./NotFoundView.js"),[])}]});YM.beforeEach(async(n,e,t)=>{var a,l;const r=Ao();if(console.log("Route:",n.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(u){console.error("Error initializing auth store:",u)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(n.meta.requiresAuth&&!i){t("/login");return}if(i&&s&&n.name!=="changePassword"){t({name:"changePassword"});return}if(n.name==="changePassword"&&!s){t({name:"home"});return}if(n.meta.allowedRoles&&o&&!n.meta.allowedRoles.includes(o)){t({name:"home"});return}if(n.meta.requiresGuest&&i){t({name:"home"});return}t()});function wae(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=n;let a,l;const u=async(p=!0)=>{await l};async function h(){if("serviceWorker"in navigator){if(a=await Id(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=h(),u}const Cw=zv(W9),KM=gN();Cw.use(KM);Cw.use(YM);const xae=Ao(KM);window.INITIAL_STATE&&xae.initialize(window.INITIAL_STATE);Cw.mount("#app");wae({immediate:!0,onRegistered(n){n&&console.log("SW enregistré:",n)},onRegisterError(n){console.error("Erreur d'enregistrement du SW:",n)},onOfflineReady(){console.log("L'application est prête à être utilisée hors ligne")}});export{gs as _,au as a,x as b,Fe as c,Rs as d,tn as e,Ln as f,qr as g,Tn as h,De as i,fl as j,ci as k,nu as l,k2 as m,Mi as n,Es as o,uB as p,Rm as q,yt as r,Ca as s,Dt as t,Ao as u,Ur as v,Il as w,Hy as x};

var DD=Object.defineProperty;var OD=(n,e,t)=>e in n?DD(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Je=(n,e,t)=>OD(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function py(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const wi={},gp=[],Wu=()=>{},ND=()=>!1,km=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),a_=n=>n.startsWith("onUpdate:"),os=Object.assign,l_=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},ID=Object.prototype.hasOwnProperty,zi=(n,e)=>ID.call(n,e),er=Array.isArray,mp=n=>jp(n)==="[object Map]",Cf=n=>jp(n)==="[object Set]",Ox=n=>jp(n)==="[object Date]",BD=n=>jp(n)==="[object RegExp]",Sr=n=>typeof n=="function",ys=n=>typeof n=="string",Sc=n=>typeof n=="symbol",Xi=n=>n!==null&&typeof n=="object",u_=n=>(Xi(n)||Sr(n))&&Sr(n.then)&&Sr(n.catch),NL=Object.prototype.toString,jp=n=>NL.call(n),RD=n=>jp(n).slice(8,-1),gy=n=>jp(n)==="[object Object]",c_=n=>ys(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,vp=py(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),my=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},FD=/-(\w)/g,Ta=my(n=>n.replace(FD,(e,t)=>t?t.toUpperCase():"")),jD=/\B([A-Z])/g,ql=my(n=>n.replace(jD,"-$1").toLowerCase()),Am=my(n=>n.charAt(0).toUpperCase()+n.slice(1)),Bg=my(n=>n?`on${Am(n)}`:""),Cl=(n,e)=>!Object.is(n,e),yp=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},IL=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},Ev=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Mv=n=>{const e=ys(n)?Number(n):NaN;return isNaN(e)?n:e};let Nx;const vy=()=>Nx||(Nx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),zD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",$D=py(zD);function Xl(n){if(er(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=ys(r)?GD(r):Xl(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(ys(n)||Xi(n))return n}const UD=/;(?![^(]*\))/g,VD=/:([^]+)/,HD=/\/\*[^]*?\*\//g;function GD(n){const e={};return n.replace(HD,"").split(UD).forEach(t=>{if(t){const r=t.split(VD);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function xi(n){let e="";if(ys(n))e=n;else if(er(n))for(let t=0;t<n.length;t++){const r=xi(n[t]);r&&(e+=r+" ")}else if(Xi(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function WD(n){if(!n)return null;let{class:e,style:t}=n;return e&&!ys(e)&&(n.class=xi(e)),t&&(n.style=Xl(t)),n}const qD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",YD=py(qD);function BL(n){return!!n||n===""}function KD(n,e){if(n.length!==e.length)return!1;let t=!0;for(let r=0;t&&r<n.length;r++)t=xh(n[r],e[r]);return t}function xh(n,e){if(n===e)return!0;let t=Ox(n),r=Ox(e);if(t||r)return t&&r?n.getTime()===e.getTime():!1;if(t=Sc(n),r=Sc(e),t||r)return n===e;if(t=er(n),r=er(e),t||r)return t&&r?KD(n,e):!1;if(t=Xi(n),r=Xi(e),t||r){if(!t||!r)return!1;const i=Object.keys(n).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!xh(n[o],e[o]))return!1}}return String(n)===String(e)}function yy(n,e){return n.findIndex(t=>xh(t,e))}const RL=n=>!!(n&&n.__v_isRef===!0),kt=n=>ys(n)?n:n==null?"":er(n)||Xi(n)&&(n.toString===NL||!Sr(n.toString))?RL(n)?kt(n.value):JSON.stringify(n,FL,2):String(n),FL=(n,e)=>RL(e)?FL(n,e.value):mp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],s)=>(t[A1(r,s)+" =>"]=i,t),{})}:Cf(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>A1(t))}:Sc(e)?A1(e):Xi(e)&&!er(e)&&!gy(e)?String(e):e,A1=(n,e="")=>{var t;return Sc(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ll;class d_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ll,!e&&Ll&&(this.index=(Ll.scopes||(Ll.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Ll;try{return Ll=this,e()}finally{Ll=t}}}on(){Ll=this}off(){Ll=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function h_(n){return new d_(n)}function f_(){return Ll}function jL(n,e=!1){Ll&&Ll.cleanups.push(n)}let ms;const T1=new WeakSet;class om{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ll&&Ll.active&&Ll.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,T1.has(this)&&(T1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||$L(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ix(this),UL(this);const e=ms,t=Lc;ms=this,Lc=!0;try{return this.fn()}finally{VL(this),ms=e,Lc=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)m_(e);this.deps=this.depsTail=void 0,Ix(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?T1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Rb(this)&&this.run()}get dirty(){return Rb(this)}}let zL=0,Rg,Fg;function $L(n,e=!1){if(n.flags|=8,e){n.next=Fg,Fg=n;return}n.next=Rg,Rg=n}function p_(){zL++}function g_(){if(--zL>0)return;if(Fg){let e=Fg;for(Fg=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;Rg;){let e=Rg;for(Rg=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function UL(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function VL(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),m_(r),ZD(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function Rb(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(HL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function HL(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===am))return;n.globalVersion=am;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Rb(n)){n.flags&=-3;return}const t=ms,r=Lc;ms=n,Lc=!0;try{UL(n);const i=n.fn(n._value);(e.version===0||Cl(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{ms=t,Lc=r,VL(n),n.flags&=-3}}function m_(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)m_(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function ZD(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}function XD(n,e){n.effect instanceof om&&(n=n.effect.fn);const t=new om(n);e&&os(t,e);try{t.run()}catch(i){throw t.stop(),i}const r=t.run.bind(t);return r.effect=t,r}function JD(n){n.effect.stop()}let Lc=!0;const GL=[];function kh(){GL.push(Lc),Lc=!1}function Ah(){const n=GL.pop();Lc=n===void 0?!0:n}function Ix(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=ms;ms=void 0;try{e()}finally{ms=t}}}let am=0;class QD{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class by{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ms||!Lc||ms===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==ms)t=this.activeLink=new QD(ms,this),ms.deps?(t.prevDep=ms.depsTail,ms.depsTail.nextDep=t,ms.depsTail=t):ms.deps=ms.depsTail=t,WL(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=ms.depsTail,t.nextDep=void 0,ms.depsTail.nextDep=t,ms.depsTail=t,ms.deps===t&&(ms.deps=r)}return t}trigger(e){this.version++,am++,this.notify(e)}notify(e){p_();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{g_()}}}function WL(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)WL(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Pv=new WeakMap,cf=Symbol(""),Fb=Symbol(""),lm=Symbol("");function Ja(n,e,t){if(Lc&&ms){let r=Pv.get(n);r||Pv.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new by),i.map=r,i.key=t),i.track()}}function Ad(n,e,t,r,i,s){const o=Pv.get(n);if(!o){am++;return}const a=l=>{l&&l.trigger()};if(p_(),e==="clear")o.forEach(a);else{const l=er(n),u=l&&c_(t);if(l&&t==="length"){const h=Number(r);o.forEach((p,v)=>{(v==="length"||v===lm||!Sc(v)&&v>=h)&&a(p)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),u&&a(o.get(lm)),e){case"add":l?u&&a(o.get("length")):(a(o.get(cf)),mp(n)&&a(o.get(Fb)));break;case"delete":l||(a(o.get(cf)),mp(n)&&a(o.get(Fb)));break;case"set":mp(n)&&a(o.get(cf));break}}g_()}function e8(n,e){const t=Pv.get(n);return t&&t.get(e)}function Wf(n){const e=_i(n);return e===n?e:(Ja(e,"iterate",lm),Lu(n)?e:e.map(Qa))}function _y(n){return Ja(n=_i(n),"iterate",lm),n}const t8={__proto__:null,[Symbol.iterator](){return D1(this,Symbol.iterator,Qa)},concat(...n){return Wf(this).concat(...n.map(e=>er(e)?Wf(e):e))},entries(){return D1(this,"entries",n=>(n[1]=Qa(n[1]),n))},every(n,e){return wd(this,"every",n,e,void 0,arguments)},filter(n,e){return wd(this,"filter",n,e,t=>t.map(Qa),arguments)},find(n,e){return wd(this,"find",n,e,Qa,arguments)},findIndex(n,e){return wd(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return wd(this,"findLast",n,e,Qa,arguments)},findLastIndex(n,e){return wd(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return wd(this,"forEach",n,e,void 0,arguments)},includes(...n){return O1(this,"includes",n)},indexOf(...n){return O1(this,"indexOf",n)},join(n){return Wf(this).join(n)},lastIndexOf(...n){return O1(this,"lastIndexOf",n)},map(n,e){return wd(this,"map",n,e,void 0,arguments)},pop(){return Qp(this,"pop")},push(...n){return Qp(this,"push",n)},reduce(n,...e){return Bx(this,"reduce",n,e)},reduceRight(n,...e){return Bx(this,"reduceRight",n,e)},shift(){return Qp(this,"shift")},some(n,e){return wd(this,"some",n,e,void 0,arguments)},splice(...n){return Qp(this,"splice",n)},toReversed(){return Wf(this).toReversed()},toSorted(n){return Wf(this).toSorted(n)},toSpliced(...n){return Wf(this).toSpliced(...n)},unshift(...n){return Qp(this,"unshift",n)},values(){return D1(this,"values",Qa)}};function D1(n,e,t){const r=_y(n),i=r[e]();return r!==n&&!Lu(n)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=t(s.value)),s}),i}const n8=Array.prototype;function wd(n,e,t,r,i,s){const o=_y(n),a=o!==n&&!Lu(n),l=o[e];if(l!==n8[e]){const p=l.apply(n,s);return a?Qa(p):p}let u=t;o!==n&&(a?u=function(p,v){return t.call(this,Qa(p),v,n)}:t.length>2&&(u=function(p,v){return t.call(this,p,v,n)}));const h=l.call(o,u,r);return a&&i?i(h):h}function Bx(n,e,t,r){const i=_y(n);let s=t;return i!==n&&(Lu(n)?t.length>3&&(s=function(o,a,l){return t.call(this,o,a,l,n)}):s=function(o,a,l){return t.call(this,o,Qa(a),l,n)}),i[e](s,...r)}function O1(n,e,t){const r=_i(n);Ja(r,"iterate",lm);const i=r[e](...t);return(i===-1||i===!1)&&Ly(t[0])?(t[0]=_i(t[0]),r[e](...t)):i}function Qp(n,e,t=[]){kh(),p_();const r=_i(n)[e].apply(n,t);return g_(),Ah(),r}const r8=py("__proto__,__v_isRef,__isVue"),qL=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Sc));function i8(n){Sc(n)||(n=String(n));const e=_i(this);return Ja(e,"has",n),e.hasOwnProperty(n)}class YL{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return s;if(t==="__v_raw")return r===(i?s?eC:QL:s?JL:XL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=er(e);if(!i){let l;if(o&&(l=t8[t]))return l;if(t==="hasOwnProperty")return i8}const a=Reflect.get(e,t,no(e)?e:r);return(Sc(t)?qL.has(t):r8(t))||(i||Ja(e,"get",t),s)?a:no(a)?o&&c_(t)?a:a.value:Xi(a)?i?mc(a):tu(a):a}}class KL extends YL{constructor(e=!1){super(!1,e)}set(e,t,r,i){let s=e[t];if(!this._isShallow){const l=Lh(s);if(!Lu(r)&&!Lh(r)&&(s=_i(s),r=_i(r)),!er(e)&&no(s)&&!no(r))return l?!1:(s.value=r,!0)}const o=er(e)&&c_(t)?Number(t)<e.length:zi(e,t),a=Reflect.set(e,t,r,no(e)?e:i);return e===_i(i)&&(o?Cl(r,s)&&Ad(e,"set",t,r):Ad(e,"add",t,r)),a}deleteProperty(e,t){const r=zi(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Ad(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!Sc(t)||!qL.has(t))&&Ja(e,"has",t),r}ownKeys(e){return Ja(e,"iterate",er(e)?"length":cf),Reflect.ownKeys(e)}}class ZL extends YL{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const s8=new KL,o8=new ZL,a8=new KL(!0),l8=new ZL(!0),jb=n=>n,d0=n=>Reflect.getPrototypeOf(n);function u8(n,e,t){return function(...r){const i=this.__v_raw,s=_i(i),o=mp(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,u=i[n](...r),h=t?jb:e?zb:Qa;return!e&&Ja(s,"iterate",l?Fb:cf),{next(){const{value:p,done:v}=u.next();return v?{value:p,done:v}:{value:a?[h(p[0]),h(p[1])]:h(p),done:v}},[Symbol.iterator](){return this}}}}function h0(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function c8(n,e){const t={get(i){const s=this.__v_raw,o=_i(s),a=_i(i);n||(Cl(i,a)&&Ja(o,"get",i),Ja(o,"get",a));const{has:l}=d0(o),u=e?jb:n?zb:Qa;if(l.call(o,i))return u(s.get(i));if(l.call(o,a))return u(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!n&&Ja(_i(i),"iterate",cf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=_i(s),a=_i(i);return n||(Cl(i,a)&&Ja(o,"has",i),Ja(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=_i(a),u=e?jb:n?zb:Qa;return!n&&Ja(l,"iterate",cf),a.forEach((h,p)=>i.call(s,u(h),u(p),o))}};return os(t,n?{add:h0("add"),set:h0("set"),delete:h0("delete"),clear:h0("clear")}:{add(i){!e&&!Lu(i)&&!Lh(i)&&(i=_i(i));const s=_i(this);return d0(s).has.call(s,i)||(s.add(i),Ad(s,"add",i,i)),this},set(i,s){!e&&!Lu(s)&&!Lh(s)&&(s=_i(s));const o=_i(this),{has:a,get:l}=d0(o);let u=a.call(o,i);u||(i=_i(i),u=a.call(o,i));const h=l.call(o,i);return o.set(i,s),u?Cl(s,h)&&Ad(o,"set",i,s):Ad(o,"add",i,s),this},delete(i){const s=_i(this),{has:o,get:a}=d0(s);let l=o.call(s,i);l||(i=_i(i),l=o.call(s,i)),a&&a.call(s,i);const u=s.delete(i);return l&&Ad(s,"delete",i,void 0),u},clear(){const i=_i(this),s=i.size!==0,o=i.clear();return s&&Ad(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=u8(i,n,e)}),t}function wy(n,e){const t=c8(n,e);return(r,i,s)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(zi(t,i)&&i in r?t:r,i,s)}const d8={get:wy(!1,!1)},h8={get:wy(!1,!0)},f8={get:wy(!0,!1)},p8={get:wy(!0,!0)},XL=new WeakMap,JL=new WeakMap,QL=new WeakMap,eC=new WeakMap;function g8(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function m8(n){return n.__v_skip||!Object.isExtensible(n)?0:g8(RD(n))}function tu(n){return Lh(n)?n:xy(n,!1,s8,d8,XL)}function v_(n){return xy(n,!1,a8,h8,JL)}function mc(n){return xy(n,!0,o8,f8,QL)}function v8(n){return xy(n,!0,l8,p8,eC)}function xy(n,e,t,r,i){if(!Xi(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=i.get(n);if(s)return s;const o=m8(n);if(o===0)return n;const a=new Proxy(n,o===2?r:t);return i.set(n,a),a}function ed(n){return Lh(n)?ed(n.__v_raw):!!(n&&n.__v_isReactive)}function Lh(n){return!!(n&&n.__v_isReadonly)}function Lu(n){return!!(n&&n.__v_isShallow)}function Ly(n){return n?!!n.__v_raw:!1}function _i(n){const e=n&&n.__v_raw;return e?_i(e):n}function Cy(n){return!zi(n,"__v_skip")&&Object.isExtensible(n)&&IL(n,"__v_skip",!0),n}const Qa=n=>Xi(n)?tu(n):n,zb=n=>Xi(n)?mc(n):n;function no(n){return n?n.__v_isRef===!0:!1}function wt(n){return tC(n,!1)}function y_(n){return tC(n,!0)}function tC(n,e){return no(n)?n:new y8(n,e)}class y8{constructor(e,t){this.dep=new by,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:_i(e),this._value=t?e:Qa(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||Lu(e)||Lh(e);e=r?e:_i(e),Cl(e,t)&&(this._rawValue=e,this._value=r?e:Qa(e),this.dep.trigger())}}function b8(n){n.dep&&n.dep.trigger()}function yn(n){return no(n)?n.value:n}function _8(n){return Sr(n)?n():yn(n)}const w8={get:(n,e,t)=>e==="__v_raw"?n:yn(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return no(i)&&!no(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function b_(n){return ed(n)?n:new Proxy(n,w8)}class x8{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new by,{get:r,set:i}=e(t.track.bind(t),t.trigger.bind(t));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function nC(n){return new x8(n)}function __(n){const e=er(n)?new Array(n.length):{};for(const t in n)e[t]=rC(n,t);return e}class L8{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return e8(_i(this._object),this._key)}}class C8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function S8(n,e,t){return no(n)?n:Sr(n)?new C8(n):Xi(n)&&arguments.length>1?rC(n,e,t):wt(n)}function rC(n,e,t){const r=n[e];return no(r)?r:new L8(n,e,t)}class E8{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new by(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=am-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ms!==this)return $L(this,!0),!0}get value(){const e=this.dep.track();return HL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function M8(n,e,t=!1){let r,i;return Sr(n)?r=n:(r=n.get,i=n.set),new E8(r,i,t)}const P8={GET:"get",HAS:"has",ITERATE:"iterate"},k8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},f0={},kv=new WeakMap;let sh;function A8(){return sh}function iC(n,e=!1,t=sh){if(t){let r=kv.get(t);r||kv.set(t,r=[]),r.push(n)}}function T8(n,e,t=wi){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=t,u=W=>i?W:Lu(W)||i===!1||i===0?Td(W,1):Td(W);let h,p,v,m,C=!1,E=!1;if(no(n)?(p=()=>n.value,C=Lu(n)):ed(n)?(p=()=>u(n),C=!0):er(n)?(E=!0,C=n.some(W=>ed(W)||Lu(W)),p=()=>n.map(W=>{if(no(W))return W.value;if(ed(W))return u(W);if(Sr(W))return l?l(W,2):W()})):Sr(n)?e?p=l?()=>l(n,2):n:p=()=>{if(v){kh();try{v()}finally{Ah()}}const W=sh;sh=h;try{return l?l(n,3,[m]):n(m)}finally{sh=W}}:p=Wu,e&&i){const W=p,Q=i===!0?1/0:i;p=()=>Td(W(),Q)}const k=f_(),A=()=>{h.stop(),k&&k.active&&l_(k.effects,h)};if(s&&e){const W=e;e=(...Q)=>{W(...Q),A()}}let D=E?new Array(n.length).fill(f0):f0;const R=W=>{if(!(!(h.flags&1)||!h.dirty&&!W))if(e){const Q=h.run();if(i||C||(E?Q.some((de,fe)=>Cl(de,D[fe])):Cl(Q,D))){v&&v();const de=sh;sh=h;try{const fe=[Q,D===f0?void 0:E&&D[0]===f0?[]:D,m];l?l(e,3,fe):e(...fe),D=Q}finally{sh=de}}}else h.run()};return a&&a(R),h=new om(p),h.scheduler=o?()=>o(R,!1):R,m=W=>iC(W,!1,h),v=h.onStop=()=>{const W=kv.get(h);if(W){if(l)l(W,4);else for(const Q of W)Q();kv.delete(h)}},e?r?R(!0):D=h.run():o?o(R.bind(null,!0),!0):h.run(),A.pause=h.pause.bind(h),A.resume=h.resume.bind(h),A.stop=A,A}function Td(n,e=1/0,t){if(e<=0||!Xi(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,no(n))Td(n.value,e,t);else if(er(n))for(let r=0;r<n.length;r++)Td(n[r],e,t);else if(Cf(n)||mp(n))n.forEach(r=>{Td(r,e,t)});else if(gy(n)){for(const r in n)Td(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&Td(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const sC=[];function D8(n){sC.push(n)}function O8(){sC.pop()}function N8(n,e){}const I8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},B8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function zp(n,e,t,r){try{return r?n(...r):n()}catch(i){Sf(i,e,t)}}function Yu(n,e,t,r){if(Sr(n)){const i=zp(n,e,t,r);return i&&u_(i)&&i.catch(s=>{Sf(s,e,t)}),i}if(er(n)){const i=[];for(let s=0;s<n.length;s++)i.push(Yu(n[s],e,t,r));return i}}function Sf(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||wi;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const h=a.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](n,l,u)===!1)return}a=a.parent}if(s){kh(),zp(s,null,10,[n,l,u]),Ah();return}}R8(n,t,i,r,o)}function R8(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const Sl=[];let Gc=-1;const bp=[];let oh=null,ip=0;const oC=Promise.resolve();let Av=null;function Zo(n){const e=Av||oC;return n?e.then(this?n.bind(this):n):e}function F8(n){let e=Gc+1,t=Sl.length;for(;e<t;){const r=e+t>>>1,i=Sl[r],s=cm(i);s<n||s===n&&i.flags&2?e=r+1:t=r}return e}function w_(n){if(!(n.flags&1)){const e=cm(n),t=Sl[Sl.length-1];!t||!(n.flags&2)&&e>=cm(t)?Sl.push(n):Sl.splice(F8(e),0,n),n.flags|=1,aC()}}function aC(){Av||(Av=oC.then(lC))}function um(n){er(n)?bp.push(...n):oh&&n.id===-1?oh.splice(ip+1,0,n):n.flags&1||(bp.push(n),n.flags|=1),aC()}function Rx(n,e,t=Gc+1){for(;t<Sl.length;t++){const r=Sl[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Sl.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Tv(n){if(bp.length){const e=[...new Set(bp)].sort((t,r)=>cm(t)-cm(r));if(bp.length=0,oh){oh.push(...e);return}for(oh=e,ip=0;ip<oh.length;ip++){const t=oh[ip];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}oh=null,ip=0}}const cm=n=>n.id==null?n.flags&2?-1:1/0:n.id;function lC(n){try{for(Gc=0;Gc<Sl.length;Gc++){const e=Sl[Gc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),zp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Gc<Sl.length;Gc++){const e=Sl[Gc];e&&(e.flags&=-2)}Gc=-1,Sl.length=0,Tv(),Av=null,(Sl.length||bp.length)&&lC()}}let sp,p0=[];function uC(n,e){var t,r;sp=n,sp?(sp.enabled=!0,p0.forEach(({event:i,args:s})=>sp.emit(i,...s)),p0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(t=window.navigator)==null?void 0:t.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{uC(s,e)}),setTimeout(()=>{sp||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,p0=[])},3e3)):p0=[]}let Jo=null,Sy=null;function dm(n){const e=Jo;return Jo=n,Sy=n&&n.type.__scopeId||null,e}function j8(n){Sy=n}function z8(){Sy=null}const $8=n=>Gu;function Gu(n,e=Jo,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&Yb(-1);const s=dm(e);let o;try{o=n(...i)}finally{dm(s),r._d&&Yb(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Pn(n,e){if(Jo===null)return n;const t=Om(Jo),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=wi]=e[i];s&&(Sr(s)&&(s={mounted:s,updated:s}),s.deep&&Td(o),r.push({dir:s,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function qc(n,e,t,r){const i=n.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(kh(),Yu(l,t,8,[n.el,a,n,e]),Ah())}}const cC=Symbol("_vte"),dC=n=>n.__isTeleport,jg=n=>n&&(n.disabled||n.disabled===""),Fx=n=>n&&(n.defer||n.defer===""),jx=n=>typeof SVGElement<"u"&&n instanceof SVGElement,zx=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,$b=(n,e)=>{const t=n&&n.to;return ys(t)?e?e(t):null:t},hC={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,s,o,a,l,u){const{mc:h,pc:p,pbc:v,o:{insert:m,querySelector:C,createText:E,createComment:k}}=u,A=jg(e.props);let{shapeFlag:D,children:R,dynamicChildren:W}=e;if(n==null){const Q=e.el=E(""),de=e.anchor=E("");m(Q,t,r),m(de,t,r);const fe=(z,J)=>{D&16&&(i&&i.isCE&&(i.ce._teleportTarget=z),h(R,z,J,i,s,o,a,l))},N=()=>{const z=e.target=$b(e.props,C),J=fC(z,e,E,m);z&&(o!=="svg"&&jx(z)?o="svg":o!=="mathml"&&zx(z)&&(o="mathml"),A||(fe(z,J),X0(e,!1)))};A&&(fe(t,de),X0(e,!0)),Fx(e.props)?Ko(()=>{N(),e.el.__isMounted=!0},s):N()}else{if(Fx(e.props)&&!n.el.__isMounted){Ko(()=>{hC.process(n,e,t,r,i,s,o,a,l,u),delete n.el.__isMounted},s);return}e.el=n.el,e.targetStart=n.targetStart;const Q=e.anchor=n.anchor,de=e.target=n.target,fe=e.targetAnchor=n.targetAnchor,N=jg(n.props),z=N?t:de,J=N?Q:fe;if(o==="svg"||jx(de)?o="svg":(o==="mathml"||zx(de))&&(o="mathml"),W?(v(n.dynamicChildren,W,z,i,s,o,a),T_(n,e,!0)):l||p(n,e,z,J,i,s,o,a,!1),A)N?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):g0(e,t,Q,u,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const U=e.target=$b(e.props,C);U&&g0(e,U,null,u,0)}else N&&g0(e,de,fe,u,1);X0(e,A)}},remove(n,e,t,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:h,target:p,props:v}=n;if(p&&(i(u),i(h)),s&&i(l),o&16){const m=s||!jg(v);for(let C=0;C<a.length;C++){const E=a[C];r(E,e,t,m,!!E.dynamicChildren)}}},move:g0,hydrate:U8};function g0(n,e,t,{o:{insert:r},m:i},s=2){s===0&&r(n.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=n,p=s===2;if(p&&r(o,e,t),(!p||jg(h))&&l&16)for(let v=0;v<u.length;v++)i(u[v],e,t,2);p&&r(a,e,t)}function U8(n,e,t,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:h}},p){const v=e.target=$b(e.props,l);if(v){const m=jg(e.props),C=v._lpa||v.firstChild;if(e.shapeFlag&16)if(m)e.anchor=p(o(n),e,a(n),t,r,i,s),e.targetStart=C,e.targetAnchor=C&&o(C);else{e.anchor=o(n);let E=C;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||fC(v,e,h,u),p(C&&o(C),e,v,t,r,i,s)}X0(e,m)}return e.anchor&&o(e.anchor)}const op=hC;function X0(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function fC(n,e,t,r){const i=e.targetStart=t(""),s=e.targetAnchor=t("");return i[cC]=s,n&&(r(i,n),r(s,n)),s}const ah=Symbol("_leaveCb"),m0=Symbol("_enterCb");function x_(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ss(()=>{n.isMounted=!0}),Th(()=>{n.isUnmounting=!0}),n}const Fu=[Function,Array],L_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Fu,onEnter:Fu,onAfterEnter:Fu,onEnterCancelled:Fu,onBeforeLeave:Fu,onLeave:Fu,onAfterLeave:Fu,onLeaveCancelled:Fu,onBeforeAppear:Fu,onAppear:Fu,onAfterAppear:Fu,onAppearCancelled:Fu},pC=n=>{const e=n.subTree;return e.component?pC(e.component):e},V8={name:"BaseTransition",props:L_,setup(n,{slots:e}){const t=Zu(),r=x_();return()=>{const i=e.default&&Ey(e.default(),!0);if(!i||!i.length)return;const s=gC(i),o=_i(n),{mode:a}=o;if(r.isLeaving)return N1(s);const l=$x(s);if(!l)return N1(s);let u=Ep(l,o,r,t,p=>u=p);l.type!==Ho&&Fd(l,u);let h=t.subTree&&$x(t.subTree);if(h&&h.type!==Ho&&!_c(l,h)&&pC(t).type!==Ho){let p=Ep(h,o,r,t);if(Fd(h,p),a==="out-in"&&l.type!==Ho)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete p.afterLeave,h=void 0},N1(s);a==="in-out"&&l.type!==Ho?p.delayLeave=(v,m,C)=>{const E=vC(r,h);E[String(h.key)]=h,v[ah]=()=>{m(),v[ah]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{C(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return s}}};function gC(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==Ho){e=t;break}}return e}const mC=V8;function vC(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Ep(n,e,t,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:v,onLeave:m,onAfterLeave:C,onLeaveCancelled:E,onBeforeAppear:k,onAppear:A,onAfterAppear:D,onAppearCancelled:R}=e,W=String(n.key),Q=vC(t,n),de=(z,J)=>{z&&Yu(z,r,9,J)},fe=(z,J)=>{const U=J[1];de(z,J),er(z)?z.every(B=>B.length<=1)&&U():z.length<=1&&U()},N={mode:o,persisted:a,beforeEnter(z){let J=l;if(!t.isMounted)if(s)J=k||l;else return;z[ah]&&z[ah](!0);const U=Q[W];U&&_c(n,U)&&U.el[ah]&&U.el[ah](),de(J,[z])},enter(z){let J=u,U=h,B=p;if(!t.isMounted)if(s)J=A||u,U=D||h,B=R||p;else return;let G=!1;const $=z[m0]=F=>{G||(G=!0,F?de(B,[z]):de(U,[z]),N.delayedLeave&&N.delayedLeave(),z[m0]=void 0)};J?fe(J,[z,$]):$()},leave(z,J){const U=String(n.key);if(z[m0]&&z[m0](!0),t.isUnmounting)return J();de(v,[z]);let B=!1;const G=z[ah]=$=>{B||(B=!0,J(),$?de(E,[z]):de(C,[z]),z[ah]=void 0,Q[U]===n&&delete Q[U])};Q[U]=n,m?fe(m,[z,G]):G()},clone(z){const J=Ep(z,e,t,r,i);return i&&i(J),J}};return N}function N1(n){if(Tm(n))return n=id(n),n.children=null,n}function $x(n){if(!Tm(n))return dC(n.type)&&n.children?gC(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&Sr(t.default))return t.default()}}function Fd(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Fd(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Ey(n,e=!1,t){let r=[],i=0;for(let s=0;s<n.length;s++){let o=n[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===wn?(o.patchFlag&128&&i++,r=r.concat(Ey(o.children,e,a))):(e||o.type!==Ho)&&r.push(a!=null?id(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ms(n,e){return Sr(n)?os({name:n.name},e,{setup:n}):n}function H8(){const n=Zu();return n?(n.appContext.config.idPrefix||"v")+"-"+n.ids[0]+n.ids[1]++:""}function C_(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function G8(n){const e=Zu(),t=y_(null);if(e){const i=e.refs===wi?e.refs={}:e.refs;Object.defineProperty(i,n,{enumerable:!0,get:()=>t.value,set:s=>t.value=s})}return t}function hm(n,e,t,r,i=!1){if(er(n)){n.forEach((C,E)=>hm(C,e&&(er(e)?e[E]:e),t,r,i));return}if(yh(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&hm(n,e,t,r.component.subTree);return}const s=r.shapeFlag&4?Om(r.component):r.el,o=i?null:s,{i:a,r:l}=n,u=e&&e.r,h=a.refs===wi?a.refs={}:a.refs,p=a.setupState,v=_i(p),m=p===wi?()=>!1:C=>zi(v,C);if(u!=null&&u!==l&&(ys(u)?(h[u]=null,m(u)&&(p[u]=null)):no(u)&&(u.value=null)),Sr(l))zp(l,a,12,[o,h]);else{const C=ys(l),E=no(l);if(C||E){const k=()=>{if(n.f){const A=C?m(l)?p[l]:h[l]:l.value;i?er(A)&&l_(A,s):er(A)?A.includes(s)||A.push(s):C?(h[l]=[s],m(l)&&(p[l]=h[l])):(l.value=[s],n.k&&(h[n.k]=l.value))}else C?(h[l]=o,m(l)&&(p[l]=o)):E&&(l.value=o,n.k&&(h[n.k]=o))};o?(k.id=-1,Ko(k,t)):k()}}}let Ux=!1;const qf=()=>{Ux||(console.error("Hydration completed but contains mismatches."),Ux=!0)},W8=n=>n.namespaceURI.includes("svg")&&n.tagName!=="foreignObject",q8=n=>n.namespaceURI.includes("MathML"),v0=n=>{if(n.nodeType===1){if(W8(n))return"svg";if(q8(n))return"mathml"}},hp=n=>n.nodeType===8;function Y8(n){const{mt:e,p:t,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:u}}=n,h=(R,W)=>{if(!W.hasChildNodes()){t(null,R,W),Tv(),W._vnode=R;return}p(W.firstChild,R,null,null,null),Tv(),W._vnode=R},p=(R,W,Q,de,fe,N=!1)=>{N=N||!!W.dynamicChildren;const z=hp(R)&&R.data==="[",J=()=>E(R,W,Q,de,fe,z),{type:U,ref:B,shapeFlag:G,patchFlag:$}=W;let F=R.nodeType;W.el=R,$===-2&&(N=!1,W.dynamicChildren=null);let I=null;switch(U){case bh:F!==3?W.children===""?(l(W.el=i(""),o(R),R),I=R):I=J():(R.data!==W.children&&(qf(),R.data=W.children),I=s(R));break;case Ho:D(R)?(I=s(R),A(W.el=R.content.firstChild,R,Q)):F!==8||z?I=J():I=s(R);break;case hf:if(z&&(R=s(R),F=R.nodeType),F===1||F===3){I=R;const X=!W.children.length;for(let K=0;K<W.staticCount;K++)X&&(W.children+=I.nodeType===1?I.outerHTML:I.data),K===W.staticCount-1&&(W.anchor=I),I=s(I);return z?s(I):I}else J();break;case wn:z?I=C(R,W,Q,de,fe,N):I=J();break;default:if(G&1)(F!==1||W.type.toLowerCase()!==R.tagName.toLowerCase())&&!D(R)?I=J():I=v(R,W,Q,de,fe,N);else if(G&6){W.slotScopeIds=fe;const X=o(R);if(z?I=k(R):hp(R)&&R.data==="teleport start"?I=k(R,R.data,"teleport end"):I=s(R),e(W,X,null,Q,de,v0(X),N),yh(W)&&!W.type.__asyncResolved){let K;z?(K=ni(wn),K.anchor=I?I.previousSibling:X.lastChild):K=R.nodeType===3?qr(""):ni("div"),K.el=R,W.component.subTree=K}}else G&64?F!==8?I=J():I=W.type.hydrate(R,W,Q,de,fe,N,n,m):G&128&&(I=W.type.hydrate(R,W,Q,de,v0(o(R)),fe,N,n,p))}return B!=null&&hm(B,null,de,W),I},v=(R,W,Q,de,fe,N)=>{N=N||!!W.dynamicChildren;const{type:z,props:J,patchFlag:U,shapeFlag:B,dirs:G,transition:$}=W,F=z==="input"||z==="option";if(F||U!==-1){G&&qc(W,null,Q,"created");let I=!1;if(D(R)){I=HC(null,$)&&Q&&Q.vnode.props&&Q.vnode.props.appear;const K=R.content.firstChild;I&&$.beforeEnter(K),A(K,R,Q),W.el=R=K}if(B&16&&!(J&&(J.innerHTML||J.textContent))){let K=m(R.firstChild,W,R,Q,de,fe,N);for(;K;){y0(R,1)||qf();const ve=K;K=K.nextSibling,a(ve)}}else if(B&8){let K=W.children;K[0]===`
`&&(R.tagName==="PRE"||R.tagName==="TEXTAREA")&&(K=K.slice(1)),R.textContent!==K&&(y0(R,0)||qf(),R.textContent=W.children)}if(J){if(F||!N||U&48){const K=R.tagName.includes("-");for(const ve in J)(F&&(ve.endsWith("value")||ve==="indeterminate")||km(ve)&&!vp(ve)||ve[0]==="."||K)&&r(R,ve,null,J[ve],void 0,Q)}else if(J.onClick)r(R,"onClick",null,J.onClick,void 0,Q);else if(U&4&&ed(J.style))for(const K in J.style)J.style[K]}let X;(X=J&&J.onVnodeBeforeMount)&&Hl(X,Q,W),G&&qc(W,null,Q,"beforeMount"),((X=J&&J.onVnodeMounted)||G||I)&&QC(()=>{X&&Hl(X,Q,W),I&&$.enter(R),G&&qc(W,null,Q,"mounted")},de)}return R.nextSibling},m=(R,W,Q,de,fe,N,z)=>{z=z||!!W.dynamicChildren;const J=W.children,U=J.length;for(let B=0;B<U;B++){const G=z?J[B]:J[B]=Wl(J[B]),$=G.type===bh;R?($&&!z&&B+1<U&&Wl(J[B+1]).type===bh&&(l(i(R.data.slice(G.children.length)),Q,s(R)),R.data=G.children),R=p(R,G,de,fe,N,z)):$&&!G.children?l(G.el=i(""),Q):(y0(Q,1)||qf(),t(null,G,Q,null,de,fe,v0(Q),N))}return R},C=(R,W,Q,de,fe,N)=>{const{slotScopeIds:z}=W;z&&(fe=fe?fe.concat(z):z);const J=o(R),U=m(s(R),W,J,Q,de,fe,N);return U&&hp(U)&&U.data==="]"?s(W.anchor=U):(qf(),l(W.anchor=u("]"),J,U),U)},E=(R,W,Q,de,fe,N)=>{if(y0(R.parentElement,1)||qf(),W.el=null,N){const U=k(R);for(;;){const B=s(R);if(B&&B!==U)a(B);else break}}const z=s(R),J=o(R);return a(R),t(null,W,J,z,Q,de,v0(J),fe),Q&&(Q.vnode.el=W.el,Ay(Q,W.el)),z},k=(R,W="[",Q="]")=>{let de=0;for(;R;)if(R=s(R),R&&hp(R)&&(R.data===W&&de++,R.data===Q)){if(de===0)return s(R);de--}return R},A=(R,W,Q)=>{const de=W.parentNode;de&&de.replaceChild(R,W);let fe=Q;for(;fe;)fe.vnode.el===W&&(fe.vnode.el=fe.subTree.el=R),fe=fe.parent},D=R=>R.nodeType===1&&R.tagName==="TEMPLATE";return[h,p]}const Vx="data-allow-mismatch",K8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function y0(n,e){if(e===0||e===1)for(;n&&!n.hasAttribute(Vx);)n=n.parentElement;const t=n&&n.getAttribute(Vx);if(t==null)return!1;if(t==="")return!0;{const r=t.split(",");return e===0&&r.includes("children")?!0:t.split(",").includes(K8[e])}}const Z8=vy().requestIdleCallback||(n=>setTimeout(n,1)),X8=vy().cancelIdleCallback||(n=>clearTimeout(n)),J8=(n=1e4)=>e=>{const t=Z8(e,{timeout:n});return()=>X8(t)};function Q8(n){const{top:e,left:t,bottom:r,right:i}=n.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(t>0&&t<o||i>0&&i<o)}const eO=n=>(e,t)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},n);return t(i=>{if(i instanceof Element){if(Q8(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},tO=n=>e=>{if(n){const t=matchMedia(n);if(t.matches)e();else return t.addEventListener("change",e,{once:!0}),()=>t.removeEventListener("change",e)}},nO=(n=[])=>(e,t)=>{ys(n)&&(n=[n]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{t(o=>{for(const a of n)o.removeEventListener(a,i)})};return t(o=>{for(const a of n)o.addEventListener(a,i,{once:!0})}),s};function rO(n,e){if(hp(n)&&n.data==="["){let t=1,r=n.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(hp(r))if(r.data==="]"){if(--t===0)break}else r.data==="["&&t++;r=r.nextSibling}}else e(n)}const yh=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function iO(n){Sr(n)&&(n={loader:n});const{loader:e,loadingComponent:t,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=n;let u=null,h,p=0;const v=()=>(p++,u=null,m()),m=()=>{let C;return u||(C=u=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),l)return new Promise((k,A)=>{l(E,()=>k(v()),()=>A(E),p+1)});throw E}).then(E=>C!==u&&u?u:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),h=E,E)))};return Ms({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(C,E,k){const A=s?()=>{const D=s(k,R=>rO(C,R));D&&(E.bum||(E.bum=[])).push(D)}:k;h?A():m().then(()=>!E.isUnmounted&&A())},get __asyncResolved(){return h},setup(){const C=Xo;if(C_(C),h)return()=>I1(h,C);const E=R=>{u=null,Sf(R,C,13,!r)};if(a&&C.suspense||Mp)return m().then(R=>()=>I1(R,C)).catch(R=>(E(R),()=>r?ni(r,{error:R}):null));const k=wt(!1),A=wt(),D=wt(!!i);return i&&setTimeout(()=>{D.value=!1},i),o!=null&&setTimeout(()=>{if(!k.value&&!A.value){const R=new Error(`Async component timed out after ${o}ms.`);E(R),A.value=R}},o),m().then(()=>{k.value=!0,C.parent&&Tm(C.parent.vnode)&&C.parent.update()}).catch(R=>{E(R),A.value=R}),()=>{if(k.value&&h)return I1(h,C);if(A.value&&r)return ni(r,{error:A.value});if(t&&!D.value)return ni(t)}}})}function I1(n,e){const{ref:t,props:r,children:i,ce:s}=e.vnode,o=ni(n,r,i);return o.ref=t,o.ce=s,delete e.vnode.ce,o}const Tm=n=>n.type.__isKeepAlive,sO={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=Zu(),r=t.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const i=new Map,s=new Set;let o=null;const a=t.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:p}}}=r,v=p("div");r.activate=(D,R,W,Q,de)=>{const fe=D.component;u(D,R,W,0,a),l(fe.vnode,D,R,W,fe,a,Q,D.slotScopeIds,de),Ko(()=>{fe.isDeactivated=!1,fe.a&&yp(fe.a);const N=D.props&&D.props.onVnodeMounted;N&&Hl(N,fe.parent,D)},a)},r.deactivate=D=>{const R=D.component;Ov(R.m),Ov(R.a),u(D,v,null,1,a),Ko(()=>{R.da&&yp(R.da);const W=D.props&&D.props.onVnodeUnmounted;W&&Hl(W,R.parent,D),R.isDeactivated=!0},a)};function m(D){B1(D),h(D,t,a,!0)}function C(D){i.forEach((R,W)=>{const Q=Qb(R.type);Q&&!D(Q)&&E(W)})}function E(D){const R=i.get(D);R&&(!o||!_c(R,o))?m(R):o&&B1(o),i.delete(D),s.delete(D)}ai(()=>[n.include,n.exclude],([D,R])=>{D&&C(W=>_g(D,W)),R&&C(W=>!_g(R,W))},{flush:"post",deep:!0});let k=null;const A=()=>{k!=null&&(Nv(t.subTree.type)?Ko(()=>{i.set(k,b0(t.subTree))},t.subTree.suspense):i.set(k,b0(t.subTree)))};return Ss(A),Py(A),Th(()=>{i.forEach(D=>{const{subTree:R,suspense:W}=t,Q=b0(R);if(D.type===Q.type&&D.key===Q.key){B1(Q);const de=Q.component.da;de&&Ko(de,W);return}m(D)})}),()=>{if(k=null,!e.default)return o=null;const D=e.default(),R=D[0];if(D.length>1)return o=null,D;if(!jd(R)||!(R.shapeFlag&4)&&!(R.shapeFlag&128))return o=null,R;let W=b0(R);if(W.type===Ho)return o=null,W;const Q=W.type,de=Qb(yh(W)?W.type.__asyncResolved||{}:Q),{include:fe,exclude:N,max:z}=n;if(fe&&(!de||!_g(fe,de))||N&&de&&_g(N,de))return W.shapeFlag&=-257,o=W,R;const J=W.key==null?Q:W.key,U=i.get(J);return W.el&&(W=id(W),R.shapeFlag&128&&(R.ssContent=W)),k=J,U?(W.el=U.el,W.component=U.component,W.transition&&Fd(W,W.transition),W.shapeFlag|=512,s.delete(J),s.add(J)):(s.add(J),z&&s.size>parseInt(z,10)&&E(s.values().next().value)),W.shapeFlag|=256,o=W,Nv(R.type)?R:W}}},oO=sO;function _g(n,e){return er(n)?n.some(t=>_g(t,e)):ys(n)?n.split(",").includes(e):BD(n)?(n.lastIndex=0,n.test(e)):!1}function yC(n,e){_C(n,"a",e)}function bC(n,e){_C(n,"da",e)}function _C(n,e,t=Xo){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(My(e,r,t),t){let i=t.parent;for(;i&&i.parent;)Tm(i.parent.vnode)&&aO(r,e,t,i),i=i.parent}}function aO(n,e,t,r){const i=My(e,n,r,!0);Jl(()=>{l_(r[e],i)},t)}function B1(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function b0(n){return n.shapeFlag&128?n.ssContent:n}function My(n,e,t=Xo,r=!1){if(t){const i=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{kh();const a=bf(t),l=Yu(e,t,n,o);return a(),Ah(),l});return r?i.unshift(s):i.push(s),s}}const $d=n=>(e,t=Xo)=>{(!Mp||n==="sp")&&My(n,(...r)=>e(...r),t)},wC=$d("bm"),Ss=$d("m"),S_=$d("bu"),Py=$d("u"),Th=$d("bum"),Jl=$d("um"),xC=$d("sp"),LC=$d("rtg"),CC=$d("rtc");function SC(n,e=Xo){My("ec",n,e)}const E_="components",lO="directives";function EC(n,e){return M_(E_,n,!0,e)||n}const MC=Symbol.for("v-ndc");function uO(n){return ys(n)?M_(E_,n,!1)||n:n||MC}function cO(n){return M_(lO,n)}function M_(n,e,t=!0,r=!1){const i=Jo||Xo;if(i){const s=i.type;if(n===E_){const a=Qb(s,!1);if(a&&(a===e||a===Ta(e)||a===Am(Ta(e))))return s}const o=Hx(i[n]||s[n],e)||Hx(i.appContext[n],e);return!o&&r?s:o}}function Hx(n,e){return n&&(n[e]||n[Ta(e)]||n[Am(Ta(e))])}function Wn(n,e,t,r){let i;const s=t&&t[r],o=er(n);if(o||ys(n)){const a=o&&ed(n);let l=!1;a&&(l=!Lu(n),n=_y(n)),i=new Array(n.length);for(let u=0,h=n.length;u<h;u++)i[u]=e(l?Qa(n[u]):n[u],u,void 0,s&&s[u])}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(Xi(n))if(n[Symbol.iterator])i=Array.from(n,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(n);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];i[l]=e(n[h],h,l,s&&s[l])}}else i=[];return t&&(t[r]=i),i}function dO(n,e){for(let t=0;t<e.length;t++){const r=e[t];if(er(r))for(let i=0;i<r.length;i++)n[r[i].name]=r[i].fn;else r&&(n[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return n}function hO(n,e,t={},r,i){if(Jo.ce||Jo.parent&&yh(Jo.parent)&&Jo.parent.ce)return e!=="default"&&(t.name=e),Ne(),Vo(wn,null,[ni("slot",t,r&&r())],64);let s=n[e];s&&s._c&&(s._d=!1),Ne();const o=s&&P_(s(t)),a=t.key||o&&o.key,l=Vo(wn,{key:(a&&!Sc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&n._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function P_(n){return n.some(e=>jd(e)?!(e.type===Ho||e.type===wn&&!P_(e.children)):!0)?n:null}function fO(n,e){const t={};for(const r in n)t[e&&/[A-Z]/.test(r)?`on:${r}`:Bg(r)]=n[r];return t}const Ub=n=>n?oS(n)?Om(n):Ub(n.parent):null,zg=os(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Ub(n.parent),$root:n=>Ub(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>k_(n),$forceUpdate:n=>n.f||(n.f=()=>{w_(n.update)}),$nextTick:n=>n.n||(n.n=Zo.bind(n.proxy)),$watch:n=>VO.bind(n)}),R1=(n,e)=>n!==wi&&!n.__isScriptSetup&&zi(n,e),Vb={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=n;let u;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return s[e]}else{if(R1(r,e))return o[e]=1,r[e];if(i!==wi&&zi(i,e))return o[e]=2,i[e];if((u=n.propsOptions[0])&&zi(u,e))return o[e]=3,s[e];if(t!==wi&&zi(t,e))return o[e]=4,t[e];Hb&&(o[e]=0)}}const h=zg[e];let p,v;if(h)return e==="$attrs"&&Ja(n.attrs,"get",""),h(n);if((p=a.__cssModules)&&(p=p[e]))return p;if(t!==wi&&zi(t,e))return o[e]=4,t[e];if(v=l.config.globalProperties,zi(v,e))return v[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:s}=n;return R1(i,e)?(i[e]=t,!0):r!==wi&&zi(r,e)?(r[e]=t,!0):zi(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!t[o]||n!==wi&&zi(n,o)||R1(e,o)||(a=s[0])&&zi(a,o)||zi(r,o)||zi(zg,o)||zi(i.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:zi(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}},pO=os({},Vb,{get(n,e){if(e!==Symbol.unscopables)return Vb.get(n,e,n)},has(n,e){return e[0]!=="_"&&!$D(e)}});function gO(){return null}function mO(){return null}function vO(n){}function yO(n){}function bO(){return null}function _O(){}function wO(n,e){return null}function xO(){return PC().slots}function LO(){return PC().attrs}function PC(){const n=Zu();return n.setupContext||(n.setupContext=uS(n))}function fm(n){return er(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}function CO(n,e){const t=fm(n);for(const r in e){if(r.startsWith("__skip"))continue;let i=t[r];i?er(i)||Sr(i)?i=t[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=t[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return t}function SO(n,e){return!n||!e?n||e:er(n)&&er(e)?n.concat(e):os({},fm(n),fm(e))}function EO(n,e){const t={};for(const r in n)e.includes(r)||Object.defineProperty(t,r,{enumerable:!0,get:()=>n[r]});return t}function MO(n){const e=Zu();let t=n();return Zb(),u_(t)&&(t=t.catch(r=>{throw bf(e),r})),[t,()=>bf(e)]}let Hb=!0;function PO(n){const e=k_(n),t=n.proxy,r=n.ctx;Hb=!1,e.beforeCreate&&Gx(e.beforeCreate,n,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:p,mounted:v,beforeUpdate:m,updated:C,activated:E,deactivated:k,beforeDestroy:A,beforeUnmount:D,destroyed:R,unmounted:W,render:Q,renderTracked:de,renderTriggered:fe,errorCaptured:N,serverPrefetch:z,expose:J,inheritAttrs:U,components:B,directives:G,filters:$}=e;if(u&&kO(u,r,null),o)for(const X in o){const K=o[X];Sr(K)&&(r[X]=K.bind(t))}if(i){const X=i.call(t,t);Xi(X)&&(n.data=tu(X))}if(Hb=!0,s)for(const X in s){const K=s[X],ve=Sr(K)?K.bind(t,t):Sr(K.get)?K.get.bind(t,t):Wu,ge=!Sr(K)&&Sr(K.set)?K.set.bind(t):Wu,He=Gn({get:ve,set:ge});Object.defineProperty(r,X,{enumerable:!0,configurable:!0,get:()=>He.value,set:ie=>He.value=ie})}if(a)for(const X in a)kC(a[X],r,t,X);if(l){const X=Sr(l)?l.call(t):l;Reflect.ownKeys(X).forEach(K=>{$g(K,X[K])})}h&&Gx(h,n,"c");function I(X,K){er(K)?K.forEach(ve=>X(ve.bind(t))):K&&X(K.bind(t))}if(I(wC,p),I(Ss,v),I(S_,m),I(Py,C),I(yC,E),I(bC,k),I(SC,N),I(CC,de),I(LC,fe),I(Th,D),I(Jl,W),I(xC,z),er(J))if(J.length){const X=n.exposed||(n.exposed={});J.forEach(K=>{Object.defineProperty(X,K,{get:()=>t[K],set:ve=>t[K]=ve})})}else n.exposed||(n.exposed={});Q&&n.render===Wu&&(n.render=Q),U!=null&&(n.inheritAttrs=U),B&&(n.components=B),G&&(n.directives=G),z&&C_(n)}function kO(n,e,t=Wu){er(n)&&(n=Gb(n));for(const r in n){const i=n[r];let s;Xi(i)?"default"in i?s=Cu(i.from||r,i.default,!0):s=Cu(i.from||r):s=Cu(i),no(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Gx(n,e,t){Yu(er(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function kC(n,e,t,r){let i=r.includes(".")?KC(t,r):()=>t[r];if(ys(n)){const s=e[n];Sr(s)&&ai(i,s)}else if(Sr(n))ai(i,n.bind(t));else if(Xi(n))if(er(n))n.forEach(s=>kC(s,e,t,r));else{const s=Sr(n.handler)?n.handler.bind(t):e[n.handler];Sr(s)&&ai(i,s,n)}}function k_(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!t&&!r?l=e:(l={},i.length&&i.forEach(u=>Dv(l,u,o,!0)),Dv(l,e,o)),Xi(e)&&s.set(e,l),l}function Dv(n,e,t,r=!1){const{mixins:i,extends:s}=e;s&&Dv(n,s,t,!0),i&&i.forEach(o=>Dv(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=AO[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const AO={data:Wx,props:qx,emits:qx,methods:wg,computed:wg,beforeCreate:yl,created:yl,beforeMount:yl,mounted:yl,beforeUpdate:yl,updated:yl,beforeDestroy:yl,beforeUnmount:yl,destroyed:yl,unmounted:yl,activated:yl,deactivated:yl,errorCaptured:yl,serverPrefetch:yl,components:wg,directives:wg,watch:DO,provide:Wx,inject:TO};function Wx(n,e){return e?n?function(){return os(Sr(n)?n.call(this,this):n,Sr(e)?e.call(this,this):e)}:e:n}function TO(n,e){return wg(Gb(n),Gb(e))}function Gb(n){if(er(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function yl(n,e){return n?[...new Set([].concat(n,e))]:e}function wg(n,e){return n?os(Object.create(null),n,e):e}function qx(n,e){return n?er(n)&&er(e)?[...new Set([...n,...e])]:os(Object.create(null),fm(n),fm(e??{})):e}function DO(n,e){if(!n)return e;if(!e)return n;const t=os(Object.create(null),n);for(const r in e)t[r]=yl(n[r],e[r]);return t}function AC(){return{app:null,config:{isNativeTag:ND,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let OO=0;function NO(n,e){return function(r,i=null){Sr(r)||(r=os({},r)),i!=null&&!Xi(i)&&(i=null);const s=AC(),o=new WeakSet,a=[];let l=!1;const u=s.app={_uid:OO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:dS,get config(){return s.config},set config(h){},use(h,...p){return o.has(h)||(h&&Sr(h.install)?(o.add(h),h.install(u,...p)):Sr(h)&&(o.add(h),h(u,...p))),u},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),u},component(h,p){return p?(s.components[h]=p,u):s.components[h]},directive(h,p){return p?(s.directives[h]=p,u):s.directives[h]},mount(h,p,v){if(!l){const m=u._ceVNode||ni(r,i);return m.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(m,h):n(m,h,v),l=!0,u._container=h,h.__vue_app__=u,Om(m.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Yu(a,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(h,p){return s.provides[h]=p,u},runWithContext(h){const p=df;df=u;try{return h()}finally{df=p}}};return u}}let df=null;function $g(n,e){if(Xo){let t=Xo.provides;const r=Xo.parent&&Xo.parent.provides;r===t&&(t=Xo.provides=Object.create(r)),t[n]=e}}function Cu(n,e,t=!1){const r=Xo||Jo;if(r||df){const i=df?df._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&Sr(e)?e.call(r&&r.proxy):e}}function TC(){return!!(Xo||Jo||df)}const DC={},OC=()=>Object.create(DC),NC=n=>Object.getPrototypeOf(n)===DC;function IO(n,e,t,r=!1){const i={},s=OC();n.propsDefaults=Object.create(null),IC(n,e,i,s);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);t?n.props=r?i:v_(i):n.type.props?n.props=i:n.props=s,n.attrs=s}function BO(n,e,t,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=n,a=_i(i),[l]=n.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=n.vnode.dynamicProps;for(let p=0;p<h.length;p++){let v=h[p];if(ky(n.emitsOptions,v))continue;const m=e[v];if(l)if(zi(s,v))m!==s[v]&&(s[v]=m,u=!0);else{const C=Ta(v);i[C]=Wb(l,a,C,m,n,!1)}else m!==s[v]&&(s[v]=m,u=!0)}}}else{IC(n,e,i,s)&&(u=!0);let h;for(const p in a)(!e||!zi(e,p)&&((h=ql(p))===p||!zi(e,h)))&&(l?t&&(t[p]!==void 0||t[h]!==void 0)&&(i[p]=Wb(l,a,p,void 0,n,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!zi(e,p))&&(delete s[p],u=!0)}u&&Ad(n.attrs,"set","")}function IC(n,e,t,r){const[i,s]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(vp(l))continue;const u=e[l];let h;i&&zi(i,h=Ta(l))?!s||!s.includes(h)?t[h]=u:(a||(a={}))[h]=u:ky(n.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=_i(t),u=a||wi;for(let h=0;h<s.length;h++){const p=s[h];t[p]=Wb(i,l,p,u[p],n,!zi(u,p))}}return o}function Wb(n,e,t,r,i,s){const o=n[t];if(o!=null){const a=zi(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Sr(l)){const{propsDefaults:u}=i;if(t in u)r=u[t];else{const h=bf(i);r=u[t]=l.call(null,e),h()}}else r=l;i.ce&&i.ce._setProp(t,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===ql(t))&&(r=!0))}return r}const RO=new WeakMap;function BC(n,e,t=!1){const r=t?RO:e.propsCache,i=r.get(n);if(i)return i;const s=n.props,o={},a=[];let l=!1;if(!Sr(n)){const h=p=>{l=!0;const[v,m]=BC(p,e,!0);os(o,v),m&&a.push(...m)};!t&&e.mixins.length&&e.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!s&&!l)return Xi(n)&&r.set(n,gp),gp;if(er(s))for(let h=0;h<s.length;h++){const p=Ta(s[h]);Yx(p)&&(o[p]=wi)}else if(s)for(const h in s){const p=Ta(h);if(Yx(p)){const v=s[h],m=o[p]=er(v)||Sr(v)?{type:v}:os({},v),C=m.type;let E=!1,k=!0;if(er(C))for(let A=0;A<C.length;++A){const D=C[A],R=Sr(D)&&D.name;if(R==="Boolean"){E=!0;break}else R==="String"&&(k=!1)}else E=Sr(C)&&C.name==="Boolean";m[0]=E,m[1]=k,(E||zi(m,"default"))&&a.push(p)}}const u=[o,a];return Xi(n)&&r.set(n,u),u}function Yx(n){return n[0]!=="$"&&!vp(n)}const RC=n=>n[0]==="_"||n==="$stable",A_=n=>er(n)?n.map(Wl):[Wl(n)],FO=(n,e,t)=>{if(e._n)return e;const r=Gu((...i)=>A_(e(...i)),t);return r._c=!1,r},FC=(n,e,t)=>{const r=n._ctx;for(const i in n){if(RC(i))continue;const s=n[i];if(Sr(s))e[i]=FO(i,s,r);else if(s!=null){const o=A_(s);e[i]=()=>o}}},jC=(n,e)=>{const t=A_(e);n.slots.default=()=>t},zC=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},jO=(n,e,t)=>{const r=n.slots=OC();if(n.vnode.shapeFlag&32){const i=e._;i?(zC(r,e,t),t&&IL(r,"_",i,!0)):FC(e,r)}else e&&jC(n,e)},zO=(n,e,t)=>{const{vnode:r,slots:i}=n;let s=!0,o=wi;if(r.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:zC(i,e,t):(s=!e.$stable,FC(e,i)),o=e}else e&&(jC(n,e),o={default:1});if(s)for(const a in i)!RC(a)&&o[a]==null&&delete i[a]},Ko=QC;function $C(n){return VC(n)}function UC(n){return VC(n,Y8)}function VC(n,e){const t=vy();t.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:p,nextSibling:v,setScopeId:m=Wu,insertStaticContent:C}=n,E=(le,me,oe,Z=null,Ae=null,je=null,Ke=void 0,Me=null,he=!!me.dynamicChildren)=>{if(le===me)return;le&&!_c(le,me)&&(Z=pe(le),ie(le,Ae,je,!0),le=null),me.patchFlag===-2&&(he=!1,me.dynamicChildren=null);const{type:We,ref:at,shapeFlag:ut}=me;switch(We){case bh:k(le,me,oe,Z);break;case Ho:A(le,me,oe,Z);break;case hf:le==null&&D(me,oe,Z,Ke);break;case wn:B(le,me,oe,Z,Ae,je,Ke,Me,he);break;default:ut&1?Q(le,me,oe,Z,Ae,je,Ke,Me,he):ut&6?G(le,me,oe,Z,Ae,je,Ke,Me,he):(ut&64||ut&128)&&We.process(le,me,oe,Z,Ae,je,Ke,Me,he,De)}at!=null&&Ae&&hm(at,le&&le.ref,je,me||le,!me)},k=(le,me,oe,Z)=>{if(le==null)r(me.el=a(me.children),oe,Z);else{const Ae=me.el=le.el;me.children!==le.children&&u(Ae,me.children)}},A=(le,me,oe,Z)=>{le==null?r(me.el=l(me.children||""),oe,Z):me.el=le.el},D=(le,me,oe,Z)=>{[le.el,le.anchor]=C(le.children,me,oe,Z,le.el,le.anchor)},R=({el:le,anchor:me},oe,Z)=>{let Ae;for(;le&&le!==me;)Ae=v(le),r(le,oe,Z),le=Ae;r(me,oe,Z)},W=({el:le,anchor:me})=>{let oe;for(;le&&le!==me;)oe=v(le),i(le),le=oe;i(me)},Q=(le,me,oe,Z,Ae,je,Ke,Me,he)=>{me.type==="svg"?Ke="svg":me.type==="math"&&(Ke="mathml"),le==null?de(me,oe,Z,Ae,je,Ke,Me,he):z(le,me,Ae,je,Ke,Me,he)},de=(le,me,oe,Z,Ae,je,Ke,Me)=>{let he,We;const{props:at,shapeFlag:ut,transition:Ct,dirs:Xe}=le;if(he=le.el=o(le.type,je,at&&at.is,at),ut&8?h(he,le.children):ut&16&&N(le.children,he,null,Z,Ae,F1(le,je),Ke,Me),Xe&&qc(le,null,Z,"created"),fe(he,le,le.scopeId,Ke,Z),at){for(const qt in at)qt!=="value"&&!vp(qt)&&s(he,qt,null,at[qt],je,Z);"value"in at&&s(he,"value",null,at.value,je),(We=at.onVnodeBeforeMount)&&Hl(We,Z,le)}Xe&&qc(le,null,Z,"beforeMount");const zt=HC(Ae,Ct);zt&&Ct.beforeEnter(he),r(he,me,oe),((We=at&&at.onVnodeMounted)||zt||Xe)&&Ko(()=>{We&&Hl(We,Z,le),zt&&Ct.enter(he),Xe&&qc(le,null,Z,"mounted")},Ae)},fe=(le,me,oe,Z,Ae)=>{if(oe&&m(le,oe),Z)for(let je=0;je<Z.length;je++)m(le,Z[je]);if(Ae){let je=Ae.subTree;if(me===je||Nv(je.type)&&(je.ssContent===me||je.ssFallback===me)){const Ke=Ae.vnode;fe(le,Ke,Ke.scopeId,Ke.slotScopeIds,Ae.parent)}}},N=(le,me,oe,Z,Ae,je,Ke,Me,he=0)=>{for(let We=he;We<le.length;We++){const at=le[We]=Me?lh(le[We]):Wl(le[We]);E(null,at,me,oe,Z,Ae,je,Ke,Me)}},z=(le,me,oe,Z,Ae,je,Ke)=>{const Me=me.el=le.el;let{patchFlag:he,dynamicChildren:We,dirs:at}=me;he|=le.patchFlag&16;const ut=le.props||wi,Ct=me.props||wi;let Xe;if(oe&&Vh(oe,!1),(Xe=Ct.onVnodeBeforeUpdate)&&Hl(Xe,oe,me,le),at&&qc(me,le,oe,"beforeUpdate"),oe&&Vh(oe,!0),(ut.innerHTML&&Ct.innerHTML==null||ut.textContent&&Ct.textContent==null)&&h(Me,""),We?J(le.dynamicChildren,We,Me,oe,Z,F1(me,Ae),je):Ke||K(le,me,Me,null,oe,Z,F1(me,Ae),je,!1),he>0){if(he&16)U(Me,ut,Ct,oe,Ae);else if(he&2&&ut.class!==Ct.class&&s(Me,"class",null,Ct.class,Ae),he&4&&s(Me,"style",ut.style,Ct.style,Ae),he&8){const zt=me.dynamicProps;for(let qt=0;qt<zt.length;qt++){const Qe=zt[qt],ot=ut[Qe],it=Ct[Qe];(it!==ot||Qe==="value")&&s(Me,Qe,ot,it,Ae,oe)}}he&1&&le.children!==me.children&&h(Me,me.children)}else!Ke&&We==null&&U(Me,ut,Ct,oe,Ae);((Xe=Ct.onVnodeUpdated)||at)&&Ko(()=>{Xe&&Hl(Xe,oe,me,le),at&&qc(me,le,oe,"updated")},Z)},J=(le,me,oe,Z,Ae,je,Ke)=>{for(let Me=0;Me<me.length;Me++){const he=le[Me],We=me[Me],at=he.el&&(he.type===wn||!_c(he,We)||he.shapeFlag&70)?p(he.el):oe;E(he,We,at,null,Z,Ae,je,Ke,!0)}},U=(le,me,oe,Z,Ae)=>{if(me!==oe){if(me!==wi)for(const je in me)!vp(je)&&!(je in oe)&&s(le,je,me[je],null,Ae,Z);for(const je in oe){if(vp(je))continue;const Ke=oe[je],Me=me[je];Ke!==Me&&je!=="value"&&s(le,je,Me,Ke,Ae,Z)}"value"in oe&&s(le,"value",me.value,oe.value,Ae)}},B=(le,me,oe,Z,Ae,je,Ke,Me,he)=>{const We=me.el=le?le.el:a(""),at=me.anchor=le?le.anchor:a("");let{patchFlag:ut,dynamicChildren:Ct,slotScopeIds:Xe}=me;Xe&&(Me=Me?Me.concat(Xe):Xe),le==null?(r(We,oe,Z),r(at,oe,Z),N(me.children||[],oe,at,Ae,je,Ke,Me,he)):ut>0&&ut&64&&Ct&&le.dynamicChildren?(J(le.dynamicChildren,Ct,oe,Ae,je,Ke,Me),(me.key!=null||Ae&&me===Ae.subTree)&&T_(le,me,!0)):K(le,me,oe,at,Ae,je,Ke,Me,he)},G=(le,me,oe,Z,Ae,je,Ke,Me,he)=>{me.slotScopeIds=Me,le==null?me.shapeFlag&512?Ae.ctx.activate(me,oe,Z,Ke,he):$(me,oe,Z,Ae,je,Ke,he):F(le,me,he)},$=(le,me,oe,Z,Ae,je,Ke)=>{const Me=le.component=sS(le,Z,Ae);if(Tm(le)&&(Me.ctx.renderer=De),aS(Me,!1,Ke),Me.asyncDep){if(Ae&&Ae.registerDep(Me,I,Ke),!le.el){const he=Me.subTree=ni(Ho);A(null,he,me,oe)}}else I(Me,le,me,oe,Ae,je,Ke)},F=(le,me,oe)=>{const Z=me.component=le.component;if(KO(le,me,oe))if(Z.asyncDep&&!Z.asyncResolved){X(Z,me,oe);return}else Z.next=me,Z.update();else me.el=le.el,Z.vnode=me},I=(le,me,oe,Z,Ae,je,Ke)=>{const Me=()=>{if(le.isMounted){let{next:ut,bu:Ct,u:Xe,parent:zt,vnode:qt}=le;{const Yt=GC(le);if(Yt){ut&&(ut.el=qt.el,X(le,ut,Ke)),Yt.asyncDep.then(()=>{le.isUnmounted||Me()});return}}let Qe=ut,ot;Vh(le,!1),ut?(ut.el=qt.el,X(le,ut,Ke)):ut=qt,Ct&&yp(Ct),(ot=ut.props&&ut.props.onVnodeBeforeUpdate)&&Hl(ot,zt,ut,qt),Vh(le,!0);const it=J0(le),At=le.subTree;le.subTree=it,E(At,it,p(At.el),pe(At),le,Ae,je),ut.el=it.el,Qe===null&&Ay(le,it.el),Xe&&Ko(Xe,Ae),(ot=ut.props&&ut.props.onVnodeUpdated)&&Ko(()=>Hl(ot,zt,ut,qt),Ae)}else{let ut;const{el:Ct,props:Xe}=me,{bm:zt,m:qt,parent:Qe,root:ot,type:it}=le,At=yh(me);if(Vh(le,!1),zt&&yp(zt),!At&&(ut=Xe&&Xe.onVnodeBeforeMount)&&Hl(ut,Qe,me),Vh(le,!0),Ct&&Ie){const Yt=()=>{le.subTree=J0(le),Ie(Ct,le.subTree,le,Ae,null)};At&&it.__asyncHydrate?it.__asyncHydrate(Ct,le,Yt):Yt()}else{ot.ce&&ot.ce._injectChildStyle(it);const Yt=le.subTree=J0(le);E(null,Yt,oe,Z,le,Ae,je),me.el=Yt.el}if(qt&&Ko(qt,Ae),!At&&(ut=Xe&&Xe.onVnodeMounted)){const Yt=me;Ko(()=>Hl(ut,Qe,Yt),Ae)}(me.shapeFlag&256||Qe&&yh(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&le.a&&Ko(le.a,Ae),le.isMounted=!0,me=oe=Z=null}};le.scope.on();const he=le.effect=new om(Me);le.scope.off();const We=le.update=he.run.bind(he),at=le.job=he.runIfDirty.bind(he);at.i=le,at.id=le.uid,he.scheduler=()=>w_(at),Vh(le,!0),We()},X=(le,me,oe)=>{me.component=le;const Z=le.vnode.props;le.vnode=me,le.next=null,BO(le,me.props,Z,oe),zO(le,me.children,oe),kh(),Rx(le),Ah()},K=(le,me,oe,Z,Ae,je,Ke,Me,he=!1)=>{const We=le&&le.children,at=le?le.shapeFlag:0,ut=me.children,{patchFlag:Ct,shapeFlag:Xe}=me;if(Ct>0){if(Ct&128){ge(We,ut,oe,Z,Ae,je,Ke,Me,he);return}else if(Ct&256){ve(We,ut,oe,Z,Ae,je,Ke,Me,he);return}}Xe&8?(at&16&&ee(We,Ae,je),ut!==We&&h(oe,ut)):at&16?Xe&16?ge(We,ut,oe,Z,Ae,je,Ke,Me,he):ee(We,Ae,je,!0):(at&8&&h(oe,""),Xe&16&&N(ut,oe,Z,Ae,je,Ke,Me,he))},ve=(le,me,oe,Z,Ae,je,Ke,Me,he)=>{le=le||gp,me=me||gp;const We=le.length,at=me.length,ut=Math.min(We,at);let Ct;for(Ct=0;Ct<ut;Ct++){const Xe=me[Ct]=he?lh(me[Ct]):Wl(me[Ct]);E(le[Ct],Xe,oe,null,Ae,je,Ke,Me,he)}We>at?ee(le,Ae,je,!0,!1,ut):N(me,oe,Z,Ae,je,Ke,Me,he,ut)},ge=(le,me,oe,Z,Ae,je,Ke,Me,he)=>{let We=0;const at=me.length;let ut=le.length-1,Ct=at-1;for(;We<=ut&&We<=Ct;){const Xe=le[We],zt=me[We]=he?lh(me[We]):Wl(me[We]);if(_c(Xe,zt))E(Xe,zt,oe,null,Ae,je,Ke,Me,he);else break;We++}for(;We<=ut&&We<=Ct;){const Xe=le[ut],zt=me[Ct]=he?lh(me[Ct]):Wl(me[Ct]);if(_c(Xe,zt))E(Xe,zt,oe,null,Ae,je,Ke,Me,he);else break;ut--,Ct--}if(We>ut){if(We<=Ct){const Xe=Ct+1,zt=Xe<at?me[Xe].el:Z;for(;We<=Ct;)E(null,me[We]=he?lh(me[We]):Wl(me[We]),oe,zt,Ae,je,Ke,Me,he),We++}}else if(We>Ct)for(;We<=ut;)ie(le[We],Ae,je,!0),We++;else{const Xe=We,zt=We,qt=new Map;for(We=zt;We<=Ct;We++){const En=me[We]=he?lh(me[We]):Wl(me[We]);En.key!=null&&qt.set(En.key,We)}let Qe,ot=0;const it=Ct-zt+1;let At=!1,Yt=0;const bn=new Array(it);for(We=0;We<it;We++)bn[We]=0;for(We=Xe;We<=ut;We++){const En=le[We];if(ot>=it){ie(En,Ae,je,!0);continue}let $n;if(En.key!=null)$n=qt.get(En.key);else for(Qe=zt;Qe<=Ct;Qe++)if(bn[Qe-zt]===0&&_c(En,me[Qe])){$n=Qe;break}$n===void 0?ie(En,Ae,je,!0):(bn[$n-zt]=We+1,$n>=Yt?Yt=$n:At=!0,E(En,me[$n],oe,null,Ae,je,Ke,Me,he),ot++)}const xn=At?$O(bn):gp;for(Qe=xn.length-1,We=it-1;We>=0;We--){const En=zt+We,$n=me[En],Sn=En+1<at?me[En+1].el:Z;bn[We]===0?E(null,$n,oe,Sn,Ae,je,Ke,Me,he):At&&(Qe<0||We!==xn[Qe]?He($n,oe,Sn,2):Qe--)}}},He=(le,me,oe,Z,Ae=null)=>{const{el:je,type:Ke,transition:Me,children:he,shapeFlag:We}=le;if(We&6){He(le.component.subTree,me,oe,Z);return}if(We&128){le.suspense.move(me,oe,Z);return}if(We&64){Ke.move(le,me,oe,De);return}if(Ke===wn){r(je,me,oe);for(let ut=0;ut<he.length;ut++)He(he[ut],me,oe,Z);r(le.anchor,me,oe);return}if(Ke===hf){R(le,me,oe);return}if(Z!==2&&We&1&&Me)if(Z===0)Me.beforeEnter(je),r(je,me,oe),Ko(()=>Me.enter(je),Ae);else{const{leave:ut,delayLeave:Ct,afterLeave:Xe}=Me,zt=()=>r(je,me,oe),qt=()=>{ut(je,()=>{zt(),Xe&&Xe()})};Ct?Ct(je,zt,qt):qt()}else r(je,me,oe)},ie=(le,me,oe,Z=!1,Ae=!1)=>{const{type:je,props:Ke,ref:Me,children:he,dynamicChildren:We,shapeFlag:at,patchFlag:ut,dirs:Ct,cacheIndex:Xe}=le;if(ut===-2&&(Ae=!1),Me!=null&&hm(Me,null,oe,le,!0),Xe!=null&&(me.renderCache[Xe]=void 0),at&256){me.ctx.deactivate(le);return}const zt=at&1&&Ct,qt=!yh(le);let Qe;if(qt&&(Qe=Ke&&Ke.onVnodeBeforeUnmount)&&Hl(Qe,me,le),at&6)H(le.component,oe,Z);else{if(at&128){le.suspense.unmount(oe,Z);return}zt&&qc(le,null,me,"beforeUnmount"),at&64?le.type.remove(le,me,oe,De,Z):We&&!We.hasOnce&&(je!==wn||ut>0&&ut&64)?ee(We,me,oe,!1,!0):(je===wn&&ut&384||!Ae&&at&16)&&ee(he,me,oe),Z&&Ce(le)}(qt&&(Qe=Ke&&Ke.onVnodeUnmounted)||zt)&&Ko(()=>{Qe&&Hl(Qe,me,le),zt&&qc(le,null,me,"unmounted")},oe)},Ce=le=>{const{type:me,el:oe,anchor:Z,transition:Ae}=le;if(me===wn){_e(oe,Z);return}if(me===hf){W(le);return}const je=()=>{i(oe),Ae&&!Ae.persisted&&Ae.afterLeave&&Ae.afterLeave()};if(le.shapeFlag&1&&Ae&&!Ae.persisted){const{leave:Ke,delayLeave:Me}=Ae,he=()=>Ke(oe,je);Me?Me(le.el,je,he):he()}else je()},_e=(le,me)=>{let oe;for(;le!==me;)oe=v(le),i(le),le=oe;i(me)},H=(le,me,oe)=>{const{bum:Z,scope:Ae,job:je,subTree:Ke,um:Me,m:he,a:We}=le;Ov(he),Ov(We),Z&&yp(Z),Ae.stop(),je&&(je.flags|=8,ie(Ke,le,me,oe)),Me&&Ko(Me,me),Ko(()=>{le.isUnmounted=!0},me),me&&me.pendingBranch&&!me.isUnmounted&&le.asyncDep&&!le.asyncResolved&&le.suspenseId===me.pendingId&&(me.deps--,me.deps===0&&me.resolve())},ee=(le,me,oe,Z=!1,Ae=!1,je=0)=>{for(let Ke=je;Ke<le.length;Ke++)ie(le[Ke],me,oe,Z,Ae)},pe=le=>{if(le.shapeFlag&6)return pe(le.component.subTree);if(le.shapeFlag&128)return le.suspense.next();const me=v(le.anchor||le.el),oe=me&&me[cC];return oe?v(oe):me};let re=!1;const ae=(le,me,oe)=>{le==null?me._vnode&&ie(me._vnode,null,null,!0):E(me._vnode||null,le,me,null,null,null,oe),me._vnode=le,re||(re=!0,Rx(),Tv(),re=!1)},De={p:E,um:ie,m:He,r:Ce,mt:$,mc:N,pc:K,pbc:J,n:pe,o:n};let be,Ie;return e&&([be,Ie]=e(De)),{render:ae,hydrate:be,createApp:NO(ae,be)}}function F1({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Vh({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function HC(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function T_(n,e,t=!1){const r=n.children,i=e.children;if(er(r)&&er(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=lh(i[s]),a.el=o.el),!t&&a.patchFlag!==-2&&T_(o,a)),a.type===bh&&(a.el=o.el)}}function $O(n){const e=n.slice(),t=[0];let r,i,s,o,a;const l=n.length;for(r=0;r<l;r++){const u=n[r];if(u!==0){if(i=t[t.length-1],n[i]<u){e[r]=i,t.push(r);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<u?s=a+1:o=a;u<n[t[s]]&&(s>0&&(e[r]=t[s-1]),t[s]=r)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function GC(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:GC(e)}function Ov(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const WC=Symbol.for("v-scx"),qC=()=>Cu(WC);function pm(n,e){return Dm(n,null,e)}function UO(n,e){return Dm(n,null,{flush:"post"})}function YC(n,e){return Dm(n,null,{flush:"sync"})}function ai(n,e,t){return Dm(n,e,t)}function Dm(n,e,t=wi){const{immediate:r,deep:i,flush:s,once:o}=t,a=os({},t),l=e&&r||!e&&s!=="post";let u;if(Mp){if(s==="sync"){const m=qC();u=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Wu,m.resume=Wu,m.pause=Wu,m}}const h=Xo;a.call=(m,C,E)=>Yu(m,h,C,E);let p=!1;s==="post"?a.scheduler=m=>{Ko(m,h&&h.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(m,C)=>{C?m():w_(m)}),a.augmentJob=m=>{e&&(m.flags|=4),p&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const v=T8(n,e,a);return Mp&&(u?u.push(v):l&&v()),v}function VO(n,e,t){const r=this.proxy,i=ys(n)?n.includes(".")?KC(r,n):()=>r[n]:n.bind(r,r);let s;Sr(e)?s=e:(s=e.handler,t=e);const o=bf(this),a=Dm(i,s.bind(r),t);return o(),a}function KC(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}function HO(n,e,t=wi){const r=Zu(),i=Ta(e),s=ql(e),o=ZC(n,i),a=nC((l,u)=>{let h,p=wi,v;return YC(()=>{const m=n[i];Cl(h,m)&&(h=m,u())}),{get(){return l(),t.get?t.get(h):h},set(m){const C=t.set?t.set(m):m;if(!Cl(C,h)&&!(p!==wi&&Cl(m,p)))return;const E=r.vnode.props;E&&(e in E||i in E||s in E)&&(`onUpdate:${e}`in E||`onUpdate:${i}`in E||`onUpdate:${s}`in E)||(h=m,u()),r.emit(`update:${e}`,C),Cl(m,C)&&Cl(m,p)&&!Cl(C,v)&&u(),p=m,v=C}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||wi:a,done:!1}:{done:!0}}}},a}const ZC=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Ta(e)}Modifiers`]||n[`${ql(e)}Modifiers`];function GO(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||wi;let i=t;const s=e.startsWith("update:"),o=s&&ZC(r,e.slice(7));o&&(o.trim&&(i=t.map(h=>ys(h)?h.trim():h)),o.number&&(i=t.map(Ev)));let a,l=r[a=Bg(e)]||r[a=Bg(Ta(e))];!l&&s&&(l=r[a=Bg(ql(e))]),l&&Yu(l,n,6,i);const u=r[a+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Yu(u,n,6,i)}}function XC(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const s=n.emits;let o={},a=!1;if(!Sr(n)){const l=u=>{const h=XC(u,e,!0);h&&(a=!0,os(o,h))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(Xi(n)&&r.set(n,null),null):(er(s)?s.forEach(l=>o[l]=null):os(o,s),Xi(n)&&r.set(n,o),o)}function ky(n,e){return!n||!km(e)?!1:(e=e.slice(2).replace(/Once$/,""),zi(n,e[0].toLowerCase()+e.slice(1))||zi(n,ql(e))||zi(n,e))}function J0(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:u,renderCache:h,props:p,data:v,setupState:m,ctx:C,inheritAttrs:E}=n,k=dm(n);let A,D;try{if(t.shapeFlag&4){const W=i||r,Q=W;A=Wl(u.call(Q,W,h,p,m,v,C)),D=a}else{const W=e;A=Wl(W.length>1?W(p,{attrs:a,slots:o,emit:l}):W(p,null)),D=e.props?a:qO(a)}}catch(W){Ug.length=0,Sf(W,n,1),A=ni(Ho)}let R=A;if(D&&E!==!1){const W=Object.keys(D),{shapeFlag:Q}=R;W.length&&Q&7&&(s&&W.some(a_)&&(D=YO(D,s)),R=id(R,D,!1,!0))}return t.dirs&&(R=id(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(t.dirs):t.dirs),t.transition&&Fd(R,t.transition),A=R,dm(k),A}function WO(n,e=!0){let t;for(let r=0;r<n.length;r++){const i=n[r];if(jd(i)){if(i.type!==Ho||i.children==="v-if"){if(t)return;t=i}}else return}return t}const qO=n=>{let e;for(const t in n)(t==="class"||t==="style"||km(t))&&((e||(e={}))[t]=n[t]);return e},YO=(n,e)=>{const t={};for(const r in n)(!a_(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function KO(n,e,t){const{props:r,children:i,component:s}=n,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?Kx(r,o,u):!!o;if(l&8){const h=e.dynamicProps;for(let p=0;p<h.length;p++){const v=h[p];if(o[v]!==r[v]&&!ky(u,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Kx(r,o,u):!0:!!o;return!1}function Kx(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==n[s]&&!ky(t,s))return!0}return!1}function Ay({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const Nv=n=>n.__isSuspense;let qb=0;const ZO={name:"Suspense",__isSuspense:!0,process(n,e,t,r,i,s,o,a,l,u){if(n==null)JO(e,t,r,i,s,o,a,l,u);else{if(s&&s.deps>0&&!n.suspense.isInFallback){e.suspense=n.suspense,e.suspense.vnode=e,e.el=n.el;return}QO(n,e,t,r,i,o,a,l,u)}},hydrate:eN,normalize:tN},XO=ZO;function gm(n,e){const t=n.props&&n.props[e];Sr(t)&&t()}function JO(n,e,t,r,i,s,o,a,l){const{p:u,o:{createElement:h}}=l,p=h("div"),v=n.suspense=JC(n,i,r,e,p,t,s,o,a,l);u(null,v.pendingBranch=n.ssContent,p,null,r,v,s,o),v.deps>0?(gm(n,"onPending"),gm(n,"onFallback"),u(null,n.ssFallback,e,t,r,null,s,o),_p(v,n.ssFallback)):v.resolve(!1,!0)}function QO(n,e,t,r,i,s,o,a,{p:l,um:u,o:{createElement:h}}){const p=e.suspense=n.suspense;p.vnode=e,e.el=n.el;const v=e.ssContent,m=e.ssFallback,{activeBranch:C,pendingBranch:E,isInFallback:k,isHydrating:A}=p;if(E)p.pendingBranch=v,_c(v,E)?(l(E,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():k&&(A||(l(C,m,t,r,i,null,s,o,a),_p(p,m)))):(p.pendingId=qb++,A?(p.isHydrating=!1,p.activeBranch=E):u(E,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=h("div"),k?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(C,m,t,r,i,null,s,o,a),_p(p,m))):C&&_c(v,C)?(l(C,v,t,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(C&&_c(v,C))l(C,v,t,r,i,p,s,o,a),_p(p,v);else if(gm(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=qb++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:D,pendingId:R}=p;D>0?setTimeout(()=>{p.pendingId===R&&p.fallback(m)},D):D===0&&p.fallback(m)}}function JC(n,e,t,r,i,s,o,a,l,u,h=!1){const{p,m:v,um:m,n:C,o:{parentNode:E,remove:k}}=u;let A;const D=nN(n);D&&e&&e.pendingBranch&&(A=e.pendingId,e.deps++);const R=n.props?Mv(n.props.timeout):void 0,W=s,Q={vnode:n,parent:e,parentComponent:t,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:qb++,timeout:typeof R=="number"?R:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(de=!1,fe=!1){const{vnode:N,activeBranch:z,pendingBranch:J,pendingId:U,effects:B,parentComponent:G,container:$}=Q;let F=!1;Q.isHydrating?Q.isHydrating=!1:de||(F=z&&J.transition&&J.transition.mode==="out-in",F&&(z.transition.afterLeave=()=>{U===Q.pendingId&&(v(J,$,s===W?C(z):s,0),um(B))}),z&&(E(z.el)===$&&(s=C(z)),m(z,G,Q,!0)),F||v(J,$,s,0)),_p(Q,J),Q.pendingBranch=null,Q.isInFallback=!1;let I=Q.parent,X=!1;for(;I;){if(I.pendingBranch){I.effects.push(...B),X=!0;break}I=I.parent}!X&&!F&&um(B),Q.effects=[],D&&e&&e.pendingBranch&&A===e.pendingId&&(e.deps--,e.deps===0&&!fe&&e.resolve()),gm(N,"onResolve")},fallback(de){if(!Q.pendingBranch)return;const{vnode:fe,activeBranch:N,parentComponent:z,container:J,namespace:U}=Q;gm(fe,"onFallback");const B=C(N),G=()=>{Q.isInFallback&&(p(null,de,J,B,z,null,U,a,l),_p(Q,de))},$=de.transition&&de.transition.mode==="out-in";$&&(N.transition.afterLeave=G),Q.isInFallback=!0,m(N,z,null,!0),$||G()},move(de,fe,N){Q.activeBranch&&v(Q.activeBranch,de,fe,N),Q.container=de},next(){return Q.activeBranch&&C(Q.activeBranch)},registerDep(de,fe,N){const z=!!Q.pendingBranch;z&&Q.deps++;const J=de.vnode.el;de.asyncDep.catch(U=>{Sf(U,de,0)}).then(U=>{if(de.isUnmounted||Q.isUnmounted||Q.pendingId!==de.suspenseId)return;de.asyncResolved=!0;const{vnode:B}=de;Xb(de,U,!1),J&&(B.el=J);const G=!J&&de.subTree.el;fe(de,B,E(J||de.subTree.el),J?null:C(de.subTree),Q,o,N),G&&k(G),Ay(de,B.el),z&&--Q.deps===0&&Q.resolve()})},unmount(de,fe){Q.isUnmounted=!0,Q.activeBranch&&m(Q.activeBranch,t,de,fe),Q.pendingBranch&&m(Q.pendingBranch,t,de,fe)}};return Q}function eN(n,e,t,r,i,s,o,a,l){const u=e.suspense=JC(e,r,t,n.parentNode,document.createElement("div"),null,i,s,o,a,!0),h=l(n,u.pendingBranch=e.ssContent,t,u,s,o);return u.deps===0&&u.resolve(!1,!0),h}function tN(n){const{shapeFlag:e,children:t}=n,r=e&32;n.ssContent=Zx(r?t.default:t),n.ssFallback=r?Zx(t.fallback):ni(Ho)}function Zx(n){let e;if(Sr(n)){const t=yf&&n._c;t&&(n._d=!1,Ne()),n=n(),t&&(n._d=!0,e=rl,eS())}return er(n)&&(n=WO(n)),n=Wl(n),e&&!n.dynamicChildren&&(n.dynamicChildren=e.filter(t=>t!==n)),n}function QC(n,e){e&&e.pendingBranch?er(n)?e.effects.push(...n):e.effects.push(n):um(n)}function _p(n,e){n.activeBranch=e;const{vnode:t,parentComponent:r}=n;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;t.el=i,r&&r.subTree===t&&(r.vnode.el=i,Ay(r,i))}function nN(n){const e=n.props&&n.props.suspensible;return e!=null&&e!==!1}const wn=Symbol.for("v-fgt"),bh=Symbol.for("v-txt"),Ho=Symbol.for("v-cmt"),hf=Symbol.for("v-stc"),Ug=[];let rl=null;function Ne(n=!1){Ug.push(rl=n?null:[])}function eS(){Ug.pop(),rl=Ug[Ug.length-1]||null}let yf=1;function Yb(n,e=!1){yf+=n,n<0&&rl&&e&&(rl.hasOnce=!0)}function tS(n){return n.dynamicChildren=yf>0?rl||gp:null,eS(),yf>0&&rl&&rl.push(n),n}function Re(n,e,t,r,i,s){return tS(x(n,e,t,r,i,s,!0))}function Vo(n,e,t,r,i){return tS(ni(n,e,t,r,i,!0))}function jd(n){return n?n.__v_isVNode===!0:!1}function _c(n,e){return n.type===e.type&&n.key===e.key}function rN(n){}const nS=({key:n})=>n??null,Q0=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?ys(n)||no(n)||Sr(n)?{i:Jo,r:n,k:e,f:!!t}:n:null);function x(n,e=null,t=null,r=0,i=null,s=n===wn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&nS(e),ref:e&&Q0(e),scopeId:Sy,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Jo};return a?(D_(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=ys(t)?8:16),yf>0&&!o&&rl&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&rl.push(l),l}const ni=iN;function iN(n,e=null,t=null,r=0,i=null,s=!1){if((!n||n===MC)&&(n=Ho),jd(n)){const a=id(n,e,!0);return t&&D_(a,t),yf>0&&!s&&rl&&(a.shapeFlag&6?rl[rl.indexOf(n)]=a:rl.push(a)),a.patchFlag=-2,a}if(dN(n)&&(n=n.__vccOpts),e){e=rS(e);let{class:a,style:l}=e;a&&!ys(a)&&(e.class=xi(a)),Xi(l)&&(Ly(l)&&!er(l)&&(l=os({},l)),e.style=Xl(l))}const o=ys(n)?1:Nv(n)?128:dC(n)?64:Xi(n)?4:Sr(n)?2:0;return x(n,e,t,r,i,o,s,!0)}function rS(n){return n?Ly(n)||NC(n)?os({},n):n:null}function id(n,e,t=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=n,u=e?iS(i||{},e):i,h={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&nS(u),ref:e&&e.ref?t&&s?er(s)?s.concat(Q0(e)):[s,Q0(e)]:Q0(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==wn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&id(n.ssContent),ssFallback:n.ssFallback&&id(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&Fd(h,l.clone(h)),h}function qr(n=" ",e=0){return ni(bh,null,n,e)}function Kl(n,e){const t=ni(hf,null,n);return t.staticCount=e,t}function Jt(n="",e=!1){return e?(Ne(),Vo(Ho,null,n)):ni(Ho,null,n)}function Wl(n){return n==null||typeof n=="boolean"?ni(Ho):er(n)?ni(wn,null,n.slice()):jd(n)?lh(n):ni(bh,null,String(n))}function lh(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:id(n)}function D_(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(er(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),D_(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!NC(e)?e._ctx=Jo:i===3&&Jo&&(Jo.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Sr(e)?(e={default:e,_ctx:Jo},t=32):(e=String(e),r&64?(t=16,e=[qr(e)]):t=8);n.children=e,n.shapeFlag|=t}function iS(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=xi([e.class,r.class]));else if(i==="style")e.style=Xl([e.style,r.style]);else if(km(i)){const s=e[i],o=r[i];o&&s!==o&&!(er(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Hl(n,e,t,r=null){Yu(n,e,7,[t,r])}const sN=AC();let oN=0;function sS(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||sN,s={uid:oN++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new d_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:BC(r,i),emitsOptions:XC(r,i),emit:null,emitted:null,propsDefaults:wi,inheritAttrs:r.inheritAttrs,ctx:wi,data:wi,props:wi,attrs:wi,slots:wi,refs:wi,setupState:wi,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=GO.bind(null,s),n.ce&&n.ce(s),s}let Xo=null;const Zu=()=>Xo||Jo;let Iv,Kb;{const n=vy(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Iv=e("__VUE_INSTANCE_SETTERS__",t=>Xo=t),Kb=e("__VUE_SSR_SETTERS__",t=>Mp=t)}const bf=n=>{const e=Xo;return Iv(n),n.scope.on(),()=>{n.scope.off(),Iv(e)}},Zb=()=>{Xo&&Xo.scope.off(),Iv(null)};function oS(n){return n.vnode.shapeFlag&4}let Mp=!1;function aS(n,e=!1,t=!1){e&&Kb(e);const{props:r,children:i}=n.vnode,s=oS(n);IO(n,r,s,e),jO(n,i,t);const o=s?aN(n,e):void 0;return e&&Kb(!1),o}function aN(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,Vb);const{setup:r}=t;if(r){kh();const i=n.setupContext=r.length>1?uS(n):null,s=bf(n),o=zp(r,n,0,[n.props,i]),a=u_(o);if(Ah(),s(),(a||n.sp)&&!yh(n)&&C_(n),a){if(o.then(Zb,Zb),e)return o.then(l=>{Xb(n,l,e)}).catch(l=>{Sf(l,n,0)});n.asyncDep=o}else Xb(n,o,e)}else lS(n,e)}function Xb(n,e,t){Sr(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Xi(e)&&(n.setupState=b_(e)),lS(n,t)}let Bv,Jb;function lN(n){Bv=n,Jb=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,pO))}}const uN=()=>!Bv;function lS(n,e,t){const r=n.type;if(!n.render){if(!e&&Bv&&!r.render){const i=r.template||k_(n).template;if(i){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=r,u=os(os({isCustomElement:s,delimiters:a},o),l);r.render=Bv(i,u)}}n.render=r.render||Wu,Jb&&Jb(n)}{const i=bf(n);kh();try{PO(n)}finally{Ah(),i()}}}const cN={get(n,e){return Ja(n,"get",""),n[e]}};function uS(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,cN),slots:n.slots,emit:n.emit,expose:e}}function Om(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(b_(Cy(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in zg)return zg[t](n)},has(e,t){return t in e||t in zg}})):n.proxy}function Qb(n,e=!0){return Sr(n)?n.displayName||n.name:n.name||e&&n.__name}function dN(n){return Sr(n)&&"__vccOpts"in n}const Gn=(n,e)=>M8(n,e,Mp);function Ty(n,e,t){const r=arguments.length;return r===2?Xi(e)&&!er(e)?jd(e)?ni(n,null,[e]):ni(n,e):ni(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&jd(t)&&(t=[t]),ni(n,e,t))}function hN(){}function fN(n,e,t,r){const i=t[r];if(i&&cS(i,n))return i;const s=e();return s.memo=n.slice(),s.cacheIndex=r,t[r]=s}function cS(n,e){const t=n.memo;if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(Cl(t[r],e[r]))return!1;return yf>0&&rl&&rl.push(n),!0}const dS="3.5.13",pN=Wu,gN=B8,mN=sp,vN=uC,yN={createComponentInstance:sS,setupComponent:aS,renderComponentRoot:J0,setCurrentRenderingInstance:dm,isVNode:jd,normalizeVNode:Wl,getComponentPublicInstance:Om,ensureValidVNode:P_,pushWarningContext:D8,popWarningContext:O8},bN=yN,_N=null,wN=null,xN=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let e2;const Xx=typeof window<"u"&&window.trustedTypes;if(Xx)try{e2=Xx.createPolicy("vue",{createHTML:n=>n})}catch{}const hS=e2?n=>e2.createHTML(n):n=>n,LN="http://www.w3.org/2000/svg",CN="http://www.w3.org/1998/Math/MathML",Pd=typeof document<"u"?document:null,Jx=Pd&&Pd.createElement("template"),SN={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?Pd.createElementNS(LN,n):e==="mathml"?Pd.createElementNS(CN,n):t?Pd.createElement(n,{is:t}):Pd.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>Pd.createTextNode(n),createComment:n=>Pd.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Pd.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,s){const o=t?t.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===s||!(i=i.nextSibling)););else{Jx.innerHTML=hS(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=Jx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Xd="transition",eg="animation",Pp=Symbol("_vtc"),fS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},pS=os({},L_,fS),EN=n=>(n.displayName="Transition",n.props=pS,n),t2=EN((n,{slots:e})=>Ty(mC,gS(n),e)),Hh=(n,e=[])=>{er(n)?n.forEach(t=>t(...e)):n&&n(...e)},Qx=n=>n?er(n)?n.some(e=>e.length>1):n.length>1:!1;function gS(n){const e={};for(const B in n)B in fS||(e[B]=n[B]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:p=`${t}-leave-from`,leaveActiveClass:v=`${t}-leave-active`,leaveToClass:m=`${t}-leave-to`}=n,C=MN(i),E=C&&C[0],k=C&&C[1],{onBeforeEnter:A,onEnter:D,onEnterCancelled:R,onLeave:W,onLeaveCancelled:Q,onBeforeAppear:de=A,onAppear:fe=D,onAppearCancelled:N=R}=e,z=(B,G,$,F)=>{B._enterCancelled=F,rh(B,G?h:a),rh(B,G?u:o),$&&$()},J=(B,G)=>{B._isLeaving=!1,rh(B,p),rh(B,m),rh(B,v),G&&G()},U=B=>(G,$)=>{const F=B?fe:D,I=()=>z(G,B,$);Hh(F,[G,I]),e4(()=>{rh(G,B?l:s),Uc(G,B?h:a),Qx(F)||t4(G,r,E,I)})};return os(e,{onBeforeEnter(B){Hh(A,[B]),Uc(B,s),Uc(B,o)},onBeforeAppear(B){Hh(de,[B]),Uc(B,l),Uc(B,u)},onEnter:U(!1),onAppear:U(!0),onLeave(B,G){B._isLeaving=!0;const $=()=>J(B,G);Uc(B,p),B._enterCancelled?(Uc(B,v),n2()):(n2(),Uc(B,v)),e4(()=>{B._isLeaving&&(rh(B,p),Uc(B,m),Qx(W)||t4(B,r,k,$))}),Hh(W,[B,$])},onEnterCancelled(B){z(B,!1,void 0,!0),Hh(R,[B])},onAppearCancelled(B){z(B,!0,void 0,!0),Hh(N,[B])},onLeaveCancelled(B){J(B),Hh(Q,[B])}})}function MN(n){if(n==null)return null;if(Xi(n))return[j1(n.enter),j1(n.leave)];{const e=j1(n);return[e,e]}}function j1(n){return Mv(n)}function Uc(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Pp]||(n[Pp]=new Set)).add(e)}function rh(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[Pp];t&&(t.delete(e),t.size||(n[Pp]=void 0))}function e4(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let PN=0;function t4(n,e,t,r){const i=n._endId=++PN,s=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(s,t);const{type:o,timeout:a,propCount:l}=mS(n,e);if(!o)return r();const u=o+"end";let h=0;const p=()=>{n.removeEventListener(u,v),s()},v=m=>{m.target===n&&++h>=l&&p()};setTimeout(()=>{h<l&&p()},a+1),n.addEventListener(u,v)}function mS(n,e){const t=window.getComputedStyle(n),r=C=>(t[C]||"").split(", "),i=r(`${Xd}Delay`),s=r(`${Xd}Duration`),o=n4(i,s),a=r(`${eg}Delay`),l=r(`${eg}Duration`),u=n4(a,l);let h=null,p=0,v=0;e===Xd?o>0&&(h=Xd,p=o,v=s.length):e===eg?u>0&&(h=eg,p=u,v=l.length):(p=Math.max(o,u),h=p>0?o>u?Xd:eg:null,v=h?h===Xd?s.length:l.length:0);const m=h===Xd&&/\b(transform|all)(,|$)/.test(r(`${Xd}Property`).toString());return{type:h,timeout:p,propCount:v,hasTransform:m}}function n4(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>r4(t)+r4(n[r])))}function r4(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function n2(){return document.body.offsetHeight}function kN(n,e,t){const r=n[Pp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Rv=Symbol("_vod"),vS=Symbol("_vsh"),Dy={beforeMount(n,{value:e},{transition:t}){n[Rv]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):tg(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),tg(n,!0),r.enter(n)):r.leave(n,()=>{tg(n,!1)}):tg(n,e))},beforeUnmount(n,{value:e}){tg(n,e)}};function tg(n,e){n.style.display=e?n[Rv]:"none",n[vS]=!e}function AN(){Dy.getSSRProps=({value:n})=>{if(!n)return{style:{display:"none"}}}}const yS=Symbol("");function TN(n){const e=Zu();if(!e)return;const t=e.ut=(i=n(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Fv(s,i))},r=()=>{const i=n(e.proxy);e.ce?Fv(e.ce,i):r2(e.subTree,i),t(i)};S_(()=>{um(r)}),Ss(()=>{ai(r,Wu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Jl(()=>i.disconnect())})}function r2(n,e){if(n.shapeFlag&128){const t=n.suspense;n=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{r2(t.activeBranch,e)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)Fv(n.el,e);else if(n.type===wn)n.children.forEach(t=>r2(t,e));else if(n.type===hf){let{el:t,anchor:r}=n;for(;t&&(Fv(t,e),t!==r);)t=t.nextSibling}}function Fv(n,e){if(n.nodeType===1){const t=n.style;let r="";for(const i in e)t.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;t[yS]=r}}const DN=/(^|;)\s*display\s*:/;function ON(n,e,t){const r=n.style,i=ys(t);let s=!1;if(t&&!i){if(e)if(ys(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&ev(r,a,"")}else for(const o in e)t[o]==null&&ev(r,o,"");for(const o in t)o==="display"&&(s=!0),ev(r,o,t[o])}else if(i){if(e!==t){const o=r[yS];o&&(t+=";"+o),r.cssText=t,s=DN.test(t)}}else e&&n.removeAttribute("style");Rv in n&&(n[Rv]=s?r.display:"",n[vS]&&(r.display="none"))}const i4=/\s*!important$/;function ev(n,e,t){if(er(t))t.forEach(r=>ev(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=NN(n,e);i4.test(t)?n.setProperty(ql(r),t.replace(i4,""),"important"):n[r]=t}}const s4=["Webkit","Moz","ms"],z1={};function NN(n,e){const t=z1[e];if(t)return t;let r=Ta(e);if(r!=="filter"&&r in n)return z1[e]=r;r=Am(r);for(let i=0;i<s4.length;i++){const s=s4[i]+r;if(s in n)return z1[e]=s}return e}const o4="http://www.w3.org/1999/xlink";function a4(n,e,t,r,i,s=YD(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(o4,e.slice(6,e.length)):n.setAttributeNS(o4,e,t):t==null||s&&!BL(t)?n.removeAttribute(e):n.setAttribute(e,s?"":Sc(t)?String(t):t)}function l4(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?hS(t):t);return}const s=n.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=BL(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(i||e)}function Dd(n,e,t,r){n.addEventListener(e,t,r)}function IN(n,e,t,r){n.removeEventListener(e,t,r)}const u4=Symbol("_vei");function BN(n,e,t,r,i=null){const s=n[u4]||(n[u4]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=RN(e);if(r){const u=s[e]=zN(r,i);Dd(n,a,u,l)}else o&&(IN(n,a,o,l),s[e]=void 0)}}const c4=/(?:Once|Passive|Capture)$/;function RN(n){let e;if(c4.test(n)){e={};let r;for(;r=n.match(c4);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):ql(n.slice(2)),e]}let $1=0;const FN=Promise.resolve(),jN=()=>$1||(FN.then(()=>$1=0),$1=Date.now());function zN(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Yu($N(r,t.value),e,5,[r])};return t.value=n,t.attached=jN(),t}function $N(n,e){if(er(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const d4=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,UN=(n,e,t,r,i,s)=>{const o=i==="svg";e==="class"?kN(n,r,o):e==="style"?ON(n,t,r):km(e)?a_(e)||BN(n,e,t,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):VN(n,e,r,o))?(l4(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&a4(n,e,r,o,s,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!ys(r))?l4(n,Ta(e),r,s,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),a4(n,e,r,o))};function VN(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&d4(e)&&Sr(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return d4(e)&&ys(t)?!1:e in n}const h4={};/*! #__NO_SIDE_EFFECTS__ */function bS(n,e,t){const r=Ms(n,e);gy(r)&&os(r,e);class i extends Oy{constructor(o){super(r,o,t)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const HN=(n,e)=>bS(n,e,kS),GN=typeof HTMLElement<"u"?HTMLElement:class{};class Oy extends GN{constructor(e,t={},r=zv){super(),this._def=e,this._props=t,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==zv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Oy){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,Zo(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!er(s))for(const l in s){const u=s[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=Mv(this._props[l])),(a||(a=Object.create(null)))[Ta(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const r in t)zi(this,r)||Object.defineProperty(this,r,{get:()=>yn(t[r])})}_resolveProps(e){const{props:t}=e,r=er(t)?t:Object.keys(t||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(Ta))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const t=this.hasAttribute(e);let r=t?this.getAttribute(e):h4;const i=Ta(e);t&&this._numberProps&&this._numberProps[i]&&(r=Mv(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,t,r=!0,i=!1){if(t!==this._props[e]&&(t===h4?delete this._props[e]:(this._props[e]=t,e==="key"&&this._app&&(this._app._ceVNode.key=t)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),t===!0?this.setAttribute(ql(e),""):typeof t=="string"||typeof t=="number"?this.setAttribute(ql(e),t+""):t||this.removeAttribute(ql(e)),s&&s.observe(this,{attributes:!0})}}_update(){PS(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const t=ni(this._def,os(e,this._props));return this._instance||(t.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,gy(o[0])?os({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),ql(s)!==s&&i(ql(s),o)},this._setParent()}),t}_applyStyles(e,t){if(!e)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let t;for(;t=this.firstChild;){const r=t.nodeType===1&&t.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(t),this.removeChild(t)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(t&&l.nodeType===1){const u=t+"-s",h=document.createTreeWalker(l,1);l.setAttribute(u,"");let p;for(;p=h.nextNode();)p.setAttribute(u,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function _S(n){const e=Zu(),t=e&&e.ce;return t||null}function WN(){const n=_S();return n&&n.shadowRoot}function qN(n="$style"){{const e=Zu();if(!e)return wi;const t=e.type.__cssModules;if(!t)return wi;const r=t[n];return r||wi}}const wS=new WeakMap,xS=new WeakMap,jv=Symbol("_moveCb"),f4=Symbol("_enterCb"),YN=n=>(delete n.props.mode,n),KN=YN({name:"TransitionGroup",props:os({},pS,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Zu(),r=x_();let i,s;return Py(()=>{if(!i.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!eI(i[0].el,t.vnode.el,o))return;i.forEach(XN),i.forEach(JN);const a=i.filter(QN);n2(),a.forEach(l=>{const u=l.el,h=u.style;Uc(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const p=u[jv]=v=>{v&&v.target!==u||(!v||/transform$/.test(v.propertyName))&&(u.removeEventListener("transitionend",p),u[jv]=null,rh(u,o))};u.addEventListener("transitionend",p)})}),()=>{const o=_i(n),a=gS(o);let l=o.tag||wn;if(i=[],s)for(let u=0;u<s.length;u++){const h=s[u];h.el&&h.el instanceof Element&&(i.push(h),Fd(h,Ep(h,a,r,t)),wS.set(h,h.el.getBoundingClientRect()))}s=e.default?Ey(e.default()):[];for(let u=0;u<s.length;u++){const h=s[u];h.key!=null&&Fd(h,Ep(h,a,r,t))}return ni(l,null,s)}}}),ZN=KN;function XN(n){const e=n.el;e[jv]&&e[jv](),e[f4]&&e[f4]()}function JN(n){xS.set(n,n.el.getBoundingClientRect())}function QN(n){const e=wS.get(n),t=xS.get(n),r=e.left-t.left,i=e.top-t.top;if(r||i){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",n}}function eI(n,e,t){const r=n.cloneNode(),i=n[Pp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),t.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=mS(r);return s.removeChild(r),o}const Ch=n=>{const e=n.props["onUpdate:modelValue"]||!1;return er(e)?t=>yp(e,t):e};function tI(n){n.target.composing=!0}function p4(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const qu=Symbol("_assign"),Ar={created(n,{modifiers:{lazy:e,trim:t,number:r}},i){n[qu]=Ch(i);const s=r||i.props&&i.props.type==="number";Dd(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),s&&(a=Ev(a)),n[qu](a)}),t&&Dd(n,"change",()=>{n.value=n.value.trim()}),e||(Dd(n,"compositionstart",tI),Dd(n,"compositionend",p4),Dd(n,"change",p4))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:i,number:s}},o){if(n[qu]=Ch(o),n.composing)return;const a=(s||n.type==="number")&&!/^0\d/.test(n.value)?Ev(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||i&&n.value.trim()===l)||(n.value=l))}},wl={deep:!0,created(n,e,t){n[qu]=Ch(t),Dd(n,"change",()=>{const r=n._modelValue,i=kp(n),s=n.checked,o=n[qu];if(er(r)){const a=yy(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const u=[...r];u.splice(a,1),o(u)}}else if(Cf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(LS(n,s))})},mounted:g4,beforeUpdate(n,e,t){n[qu]=Ch(t),g4(n,e,t)}};function g4(n,{value:e,oldValue:t},r){n._modelValue=e;let i;if(er(e))i=yy(e,r.props.value)>-1;else if(Cf(e))i=e.has(r.props.value);else{if(e===t)return;i=xh(e,LS(n,!0))}n.checked!==i&&(n.checked=i)}const O_={created(n,{value:e},t){n.checked=xh(e,t.props.value),n[qu]=Ch(t),Dd(n,"change",()=>{n[qu](kp(n))})},beforeUpdate(n,{value:e,oldValue:t},r){n[qu]=Ch(r),e!==t&&(n.checked=xh(e,r.props.value))}},Oi={deep:!0,created(n,{value:e,modifiers:{number:t}},r){const i=Cf(e);Dd(n,"change",()=>{const s=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?Ev(kp(o)):kp(o));n[qu](n.multiple?i?new Set(s):s:s[0]),n._assigning=!0,Zo(()=>{n._assigning=!1})}),n[qu]=Ch(r)},mounted(n,{value:e}){m4(n,e)},beforeUpdate(n,e,t){n[qu]=Ch(t)},updated(n,{value:e}){n._assigning||m4(n,e)}};function m4(n,e){const t=n.multiple,r=er(e);if(!(t&&!r&&!Cf(e))){for(let i=0,s=n.options.length;i<s;i++){const o=n.options[i],a=kp(o);if(t)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=yy(e,a)>-1}else o.selected=e.has(a);else if(xh(kp(o),e)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function kp(n){return"_value"in n?n._value:n.value}function LS(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const N_={created(n,e,t){_0(n,e,t,null,"created")},mounted(n,e,t){_0(n,e,t,null,"mounted")},beforeUpdate(n,e,t,r){_0(n,e,t,r,"beforeUpdate")},updated(n,e,t,r){_0(n,e,t,r,"updated")}};function CS(n,e){switch(n){case"SELECT":return Oi;case"TEXTAREA":return Ar;default:switch(e){case"checkbox":return wl;case"radio":return O_;default:return Ar}}}function _0(n,e,t,r,i){const o=CS(n.tagName,t.props&&t.props.type)[i];o&&o(n,e,t,r)}function nI(){Ar.getSSRProps=({value:n})=>({value:n}),O_.getSSRProps=({value:n},e)=>{if(e.props&&xh(e.props.value,n))return{checked:!0}},wl.getSSRProps=({value:n},e)=>{if(er(n)){if(e.props&&yy(n,e.props.value)>-1)return{checked:!0}}else if(Cf(n)){if(e.props&&n.has(e.props.value))return{checked:!0}}else if(n)return{checked:!0}},N_.getSSRProps=(n,e)=>{if(typeof e.type!="string")return;const t=CS(e.type.toUpperCase(),e.props&&e.props.type);if(t.getSSRProps)return t.getSSRProps(n,e)}}const rI=["ctrl","shift","alt","meta"],iI={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>rI.some(t=>n[`${t}Key`]&&!e.includes(t))},Zl=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=iI[e[o]];if(a&&a(i,e))return}return n(i,...s)})},sI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},oI=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=i=>{if(!("key"in i))return;const s=ql(i.key);if(e.some(o=>o===s||sI[o]===s))return n(i)})},SS=os({patchProp:UN},SN);let Vg,v4=!1;function ES(){return Vg||(Vg=$C(SS))}function MS(){return Vg=v4?Vg:UC(SS),v4=!0,Vg}const PS=(...n)=>{ES().render(...n)},aI=(...n)=>{MS().hydrate(...n)},zv=(...n)=>{const e=ES().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=TS(r);if(!i)return;const s=e._component;!Sr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=t(i,!1,AS(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},kS=(...n)=>{const e=MS().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=TS(r);if(i)return t(i,!0,AS(i))},e};function AS(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function TS(n){return ys(n)?document.querySelector(n):n}let y4=!1;const lI=()=>{y4||(y4=!0,nI(),AN())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const uI=()=>{},cI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:mC,BaseTransitionPropsValidators:L_,Comment:Ho,DeprecationTypes:xN,EffectScope:d_,ErrorCodes:I8,ErrorTypeStrings:gN,Fragment:wn,KeepAlive:oO,ReactiveEffect:om,Static:hf,Suspense:XO,Teleport:op,Text:bh,TrackOpTypes:P8,Transition:t2,TransitionGroup:ZN,TriggerOpTypes:k8,VueElement:Oy,assertNumber:N8,callWithAsyncErrorHandling:Yu,callWithErrorHandling:zp,camelize:Ta,capitalize:Am,cloneVNode:id,compatUtils:wN,compile:uI,computed:Gn,createApp:zv,createBlock:Vo,createCommentVNode:Jt,createElementBlock:Re,createElementVNode:x,createHydrationRenderer:UC,createPropsRestProxy:EO,createRenderer:$C,createSSRApp:kS,createSlots:dO,createStaticVNode:Kl,createTextVNode:qr,createVNode:ni,customRef:nC,defineAsyncComponent:iO,defineComponent:Ms,defineCustomElement:bS,defineEmits:mO,defineExpose:vO,defineModel:_O,defineOptions:yO,defineProps:gO,defineSSRCustomElement:HN,defineSlots:bO,devtools:mN,effect:XD,effectScope:h_,getCurrentInstance:Zu,getCurrentScope:f_,getCurrentWatcher:A8,getTransitionRawChildren:Ey,guardReactiveProps:rS,h:Ty,handleError:Sf,hasInjectionContext:TC,hydrate:aI,hydrateOnIdle:J8,hydrateOnInteraction:nO,hydrateOnMediaQuery:tO,hydrateOnVisible:eO,initCustomFormatter:hN,initDirectivesForSSR:lI,inject:Cu,isMemoSame:cS,isProxy:Ly,isReactive:ed,isReadonly:Lh,isRef:no,isRuntimeOnly:uN,isShallow:Lu,isVNode:jd,markRaw:Cy,mergeDefaults:CO,mergeModels:SO,mergeProps:iS,nextTick:Zo,normalizeClass:xi,normalizeProps:WD,normalizeStyle:Xl,onActivated:yC,onBeforeMount:wC,onBeforeUnmount:Th,onBeforeUpdate:S_,onDeactivated:bC,onErrorCaptured:SC,onMounted:Ss,onRenderTracked:CC,onRenderTriggered:LC,onScopeDispose:jL,onServerPrefetch:xC,onUnmounted:Jl,onUpdated:Py,onWatcherCleanup:iC,openBlock:Ne,popScopeId:z8,provide:$g,proxyRefs:b_,pushScopeId:j8,queuePostFlushCb:um,reactive:tu,readonly:mc,ref:wt,registerRuntimeCompiler:lN,render:PS,renderList:Wn,renderSlot:hO,resolveComponent:EC,resolveDirective:cO,resolveDynamicComponent:uO,resolveFilter:_N,resolveTransitionHooks:Ep,setBlockTracking:Yb,setDevtoolsHook:vN,setTransitionHooks:Fd,shallowReactive:v_,shallowReadonly:v8,shallowRef:y_,ssrContextKey:WC,ssrUtils:bN,stop:JD,toDisplayString:kt,toHandlerKey:Bg,toHandlers:fO,toRaw:_i,toRef:S8,toRefs:__,toValue:_8,transformVNodeArgs:rN,triggerRef:b8,unref:yn,useAttrs:LO,useCssModule:qN,useCssVars:TN,useHost:_S,useId:H8,useModel:HO,useSSRContext:qC,useShadowRoot:WN,useSlots:xO,useTemplateRef:G8,useTransitionState:x_,vModelCheckbox:wl,vModelDynamic:N_,vModelRadio:O_,vModelSelect:Oi,vModelText:Ar,vShow:Dy,version:dS,warn:pN,watch:ai,watchEffect:pm,watchPostEffect:UO,watchSyncEffect:YC,withAsyncContext:MO,withCtx:Gu,withDefaults:wO,withDirectives:Pn,withKeys:oI,withMemo:fN,withModifiers:Zl,withScopeId:$8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let DS;const Ny=n=>DS=n,OS=Symbol();function i2(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Hg;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Hg||(Hg={}));function dI(){const n=h_(!0),e=n.run(()=>wt({}));let t=[],r=[];const i=Cy({install(s){Ny(i),i._a=s,s.provide(OS,i),s.config.globalProperties.$pinia=i,r.forEach(o=>t.push(o)),r=[]},use(s){return this._a?t.push(s):r.push(s),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const NS=()=>{};function b4(n,e,t,r=NS){n.push(e);const i=()=>{const s=n.indexOf(e);s>-1&&(n.splice(s,1),r())};return!t&&f_()&&jL(i),i}function Yf(n,...e){n.slice().forEach(t=>{t(...e)})}const hI=n=>n(),_4=Symbol(),U1=Symbol();function s2(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];i2(i)&&i2(r)&&n.hasOwnProperty(t)&&!no(r)&&!ed(r)?n[t]=s2(i,r):n[t]=r}return n}const fI=Symbol();function pI(n){return!i2(n)||!n.hasOwnProperty(fI)}const{assign:ih}=Object;function gI(n){return!!(no(n)&&n.effect)}function mI(n,e,t,r){const{state:i,actions:s,getters:o}=e,a=t.state.value[n];let l;function u(){a||(t.state.value[n]=i?i():{});const h=__(t.state.value[n]);return ih(h,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=Cy(Gn(()=>{Ny(t);const m=t._s.get(n);return o[v].call(m,m)})),p),{}))}return l=IS(n,u,e,t,r,!0),l}function IS(n,e,t={},r,i,s){let o;const a=ih({actions:{}},t),l={deep:!0};let u,h,p=[],v=[],m;const C=r.state.value[n];!s&&!C&&(r.state.value[n]={}),wt({});let E;function k(N){let z;u=h=!1,typeof N=="function"?(N(r.state.value[n]),z={type:Hg.patchFunction,storeId:n,events:m}):(s2(r.state.value[n],N),z={type:Hg.patchObject,payload:N,storeId:n,events:m});const J=E=Symbol();Zo().then(()=>{E===J&&(u=!0)}),h=!0,Yf(p,z,r.state.value[n])}const A=s?function(){const{state:z}=t,J=z?z():{};this.$patch(U=>{ih(U,J)})}:NS;function D(){o.stop(),p=[],v=[],r._s.delete(n)}const R=(N,z="")=>{if(_4 in N)return N[U1]=z,N;const J=function(){Ny(r);const U=Array.from(arguments),B=[],G=[];function $(X){B.push(X)}function F(X){G.push(X)}Yf(v,{args:U,name:J[U1],store:Q,after:$,onError:F});let I;try{I=N.apply(this&&this.$id===n?this:Q,U)}catch(X){throw Yf(G,X),X}return I instanceof Promise?I.then(X=>(Yf(B,X),X)).catch(X=>(Yf(G,X),Promise.reject(X))):(Yf(B,I),I)};return J[_4]=!0,J[U1]=z,J},W={_p:r,$id:n,$onAction:b4.bind(null,v),$patch:k,$reset:A,$subscribe(N,z={}){const J=b4(p,N,z.detached,()=>U()),U=o.run(()=>ai(()=>r.state.value[n],B=>{(z.flush==="sync"?h:u)&&N({storeId:n,type:Hg.direct,events:m},B)},ih({},l,z)));return J},$dispose:D},Q=tu(W);r._s.set(n,Q);const fe=(r._a&&r._a.runWithContext||hI)(()=>r._e.run(()=>(o=h_()).run(()=>e({action:R}))));for(const N in fe){const z=fe[N];if(no(z)&&!gI(z)||ed(z))s||(C&&pI(z)&&(no(z)?z.value=C[N]:s2(z,C[N])),r.state.value[n][N]=z);else if(typeof z=="function"){const J=R(z,N);fe[N]=J,a.actions[N]=z}}return ih(Q,fe),ih(_i(Q),fe),Object.defineProperty(Q,"$state",{get:()=>r.state.value[n],set:N=>{k(z=>{ih(z,N)})}}),r._p.forEach(N=>{ih(Q,o.run(()=>N({store:Q,app:r._a,pinia:r,options:a})))}),C&&s&&t.hydrate&&t.hydrate(Q.$state,C),u=!0,h=!0,Q}/*! #__NO_SIDE_EFFECTS__ */function $p(n,e,t){let r,i;const s=typeof e=="function";typeof n=="string"?(r=n,i=s?t:e):(i=n,r=n.id);function o(a,l){const u=TC();return a=a||(u?Cu(OS,null):null),a&&Ny(a),a=DS,a._s.has(r)||(s?IS(r,e,i,a):mI(r,i,a)),a._s.get(r)}return o.$id=r,o}function BS(n,e){return function(){return n.apply(e,arguments)}}const{toString:vI}=Object.prototype,{getPrototypeOf:I_}=Object,Iy=(n=>e=>{const t=vI.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Pc=n=>(n=n.toLowerCase(),e=>Iy(e)===n),By=n=>e=>typeof e===n,{isArray:Up}=Array,mm=By("undefined");function yI(n){return n!==null&&!mm(n)&&n.constructor!==null&&!mm(n.constructor)&&Su(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const RS=Pc("ArrayBuffer");function bI(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&RS(n.buffer),e}const _I=By("string"),Su=By("function"),FS=By("number"),Ry=n=>n!==null&&typeof n=="object",wI=n=>n===!0||n===!1,tv=n=>{if(Iy(n)!=="object")return!1;const e=I_(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},xI=Pc("Date"),LI=Pc("File"),CI=Pc("Blob"),SI=Pc("FileList"),EI=n=>Ry(n)&&Su(n.pipe),MI=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Su(n.append)&&((e=Iy(n))==="formdata"||e==="object"&&Su(n.toString)&&n.toString()==="[object FormData]"))},PI=Pc("URLSearchParams"),[kI,AI,TI,DI]=["ReadableStream","Request","Response","Headers"].map(Pc),OI=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Nm(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Up(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function jS(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const af=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zS=n=>!mm(n)&&n!==af;function o2(){const{caseless:n}=zS(this)&&this||{},e={},t=(r,i)=>{const s=n&&jS(e,i)||i;tv(e[s])&&tv(r)?e[s]=o2(e[s],r):tv(r)?e[s]=o2({},r):Up(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Nm(arguments[r],t);return e}const NI=(n,e,t,{allOwnKeys:r}={})=>(Nm(e,(i,s)=>{t&&Su(i)?n[s]=BS(i,t):n[s]=i},{allOwnKeys:r}),n),II=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),BI=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},RI=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&I_(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},FI=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},jI=n=>{if(!n)return null;if(Up(n))return n;let e=n.length;if(!FS(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},zI=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&I_(Uint8Array)),$I=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},UI=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},VI=Pc("HTMLFormElement"),HI=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),w4=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),GI=Pc("RegExp"),$S=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Nm(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},WI=n=>{$S(n,(e,t)=>{if(Su(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Su(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},qI=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return Up(n)?r(n):r(String(n).split(e)),t},YI=()=>{},KI=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function ZI(n){return!!(n&&Su(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const XI=n=>{const e=new Array(10),t=(r,i)=>{if(Ry(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Up(r)?[]:{};return Nm(r,(o,a)=>{const l=t(o,i+1);!mm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},JI=Pc("AsyncFunction"),QI=n=>n&&(Ry(n)||Su(n))&&Su(n.then)&&Su(n.catch),US=((n,e)=>n?setImmediate:e?((t,r)=>(af.addEventListener("message",({source:i,data:s})=>{i===af&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),af.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Su(af.postMessage)),e7=typeof queueMicrotask<"u"?queueMicrotask.bind(af):typeof process<"u"&&process.nextTick||US,en={isArray:Up,isArrayBuffer:RS,isBuffer:yI,isFormData:MI,isArrayBufferView:bI,isString:_I,isNumber:FS,isBoolean:wI,isObject:Ry,isPlainObject:tv,isReadableStream:kI,isRequest:AI,isResponse:TI,isHeaders:DI,isUndefined:mm,isDate:xI,isFile:LI,isBlob:CI,isRegExp:GI,isFunction:Su,isStream:EI,isURLSearchParams:PI,isTypedArray:zI,isFileList:SI,forEach:Nm,merge:o2,extend:NI,trim:OI,stripBOM:II,inherits:BI,toFlatObject:RI,kindOf:Iy,kindOfTest:Pc,endsWith:FI,toArray:jI,forEachEntry:$I,matchAll:UI,isHTMLForm:VI,hasOwnProperty:w4,hasOwnProp:w4,reduceDescriptors:$S,freezeMethods:WI,toObjectSet:qI,toCamelCase:HI,noop:YI,toFiniteNumber:KI,findKey:jS,global:af,isContextDefined:zS,isSpecCompliantForm:ZI,toJSONObject:XI,isAsyncFn:JI,isThenable:QI,setImmediate:US,asap:e7};function Kr(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}en.inherits(Kr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:en.toJSONObject(this.config),code:this.code,status:this.status}}});const VS=Kr.prototype,HS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{HS[n]={value:n}});Object.defineProperties(Kr,HS);Object.defineProperty(VS,"isAxiosError",{value:!0});Kr.from=(n,e,t,r,i,s)=>{const o=Object.create(VS);return en.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Kr.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const t7=null;function a2(n){return en.isPlainObject(n)||en.isArray(n)}function GS(n){return en.endsWith(n,"[]")?n.slice(0,-2):n}function x4(n,e,t){return n?n.concat(e).map(function(i,s){return i=GS(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function n7(n){return en.isArray(n)&&!n.some(a2)}const r7=en.toFlatObject(en,{},null,function(e){return/^is[A-Z]/.test(e)});function Fy(n,e,t){if(!en.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=en.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,k){return!en.isUndefined(k[E])});const r=t.metaTokens,i=t.visitor||h,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&en.isSpecCompliantForm(e);if(!en.isFunction(i))throw new TypeError("visitor must be a function");function u(C){if(C===null)return"";if(en.isDate(C))return C.toISOString();if(!l&&en.isBlob(C))throw new Kr("Blob is not supported. Use a Buffer instead.");return en.isArrayBuffer(C)||en.isTypedArray(C)?l&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function h(C,E,k){let A=C;if(C&&!k&&typeof C=="object"){if(en.endsWith(E,"{}"))E=r?E:E.slice(0,-2),C=JSON.stringify(C);else if(en.isArray(C)&&n7(C)||(en.isFileList(C)||en.endsWith(E,"[]"))&&(A=en.toArray(C)))return E=GS(E),A.forEach(function(R,W){!(en.isUndefined(R)||R===null)&&e.append(o===!0?x4([E],W,s):o===null?E:E+"[]",u(R))}),!1}return a2(C)?!0:(e.append(x4(k,E,s),u(C)),!1)}const p=[],v=Object.assign(r7,{defaultVisitor:h,convertValue:u,isVisitable:a2});function m(C,E){if(!en.isUndefined(C)){if(p.indexOf(C)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(C),en.forEach(C,function(A,D){(!(en.isUndefined(A)||A===null)&&i.call(e,A,en.isString(D)?D.trim():D,E,v))===!0&&m(A,E?E.concat(D):[D])}),p.pop()}}if(!en.isObject(n))throw new TypeError("data must be an object");return m(n),e}function L4(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function B_(n,e){this._pairs=[],n&&Fy(n,this,e)}const WS=B_.prototype;WS.append=function(e,t){this._pairs.push([e,t])};WS.toString=function(e){const t=e?function(r){return e.call(this,r,L4)}:L4;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function i7(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qS(n,e,t){if(!e)return n;const r=t&&t.encode||i7;en.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let s;if(i?s=i(e,t):s=en.isURLSearchParams(e)?e.toString():new B_(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class C4{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){en.forEach(this.handlers,function(r){r!==null&&e(r)})}}const YS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},s7=typeof URLSearchParams<"u"?URLSearchParams:B_,o7=typeof FormData<"u"?FormData:null,a7=typeof Blob<"u"?Blob:null,l7={isBrowser:!0,classes:{URLSearchParams:s7,FormData:o7,Blob:a7},protocols:["http","https","file","blob","url","data"]},R_=typeof window<"u"&&typeof document<"u",l2=typeof navigator=="object"&&navigator||void 0,u7=R_&&(!l2||["ReactNative","NativeScript","NS"].indexOf(l2.product)<0),c7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",d7=R_&&window.location.href||"http://localhost",h7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:R_,hasStandardBrowserEnv:u7,hasStandardBrowserWebWorkerEnv:c7,navigator:l2,origin:d7},Symbol.toStringTag,{value:"Module"})),el={...h7,...l7};function f7(n,e){return Fy(n,new el.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return el.isNode&&en.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function p7(n){return en.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function g7(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function KS(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&en.isArray(i)?i.length:o,l?(en.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!en.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&en.isArray(i[o])&&(i[o]=g7(i[o])),!a)}if(en.isFormData(n)&&en.isFunction(n.entries)){const t={};return en.forEachEntry(n,(r,i)=>{e(p7(r),i,t,0)}),t}return null}function m7(n,e,t){if(en.isString(n))try{return(e||JSON.parse)(n),en.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Im={transitional:YS,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=en.isObject(e);if(s&&en.isHTMLForm(e)&&(e=new FormData(e)),en.isFormData(e))return i?JSON.stringify(KS(e)):e;if(en.isArrayBuffer(e)||en.isBuffer(e)||en.isStream(e)||en.isFile(e)||en.isBlob(e)||en.isReadableStream(e))return e;if(en.isArrayBufferView(e))return e.buffer;if(en.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return f7(e,this.formSerializer).toString();if((a=en.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Fy(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),m7(e)):e}],transformResponse:[function(e){const t=this.transitional||Im.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(en.isResponse(e)||en.isReadableStream(e))return e;if(e&&en.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Kr.from(a,Kr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:el.classes.FormData,Blob:el.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};en.forEach(["delete","get","head","post","put","patch"],n=>{Im.headers[n]={}});const v7=en.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),y7=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&v7[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},S4=Symbol("internals");function ng(n){return n&&String(n).trim().toLowerCase()}function nv(n){return n===!1||n==null?n:en.isArray(n)?n.map(nv):String(n)}function b7(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const _7=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function V1(n,e,t,r,i){if(en.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!en.isString(e)){if(en.isString(r))return e.indexOf(r)!==-1;if(en.isRegExp(r))return r.test(e)}}function w7(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function x7(n,e){const t=en.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Ql=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,u){const h=ng(l);if(!h)throw new Error("header name must be a non-empty string");const p=en.findKey(i,h);(!p||i[p]===void 0||u===!0||u===void 0&&i[p]!==!1)&&(i[p||l]=nv(a))}const o=(a,l)=>en.forEach(a,(u,h)=>s(u,h,l));if(en.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(en.isString(e)&&(e=e.trim())&&!_7(e))o(y7(e),t);else if(en.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=ng(e),e){const r=en.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return b7(i);if(en.isFunction(t))return t.call(this,i,r);if(en.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ng(e),e){const r=en.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||V1(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=ng(o),o){const a=en.findKey(r,o);a&&(!t||V1(r,r[a],a,t))&&(delete r[a],i=!0)}}return en.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||V1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return en.forEach(this,(i,s)=>{const o=en.findKey(r,s);if(o){t[o]=nv(i),delete t[s];return}const a=e?w7(s):String(s).trim();a!==s&&delete t[s],t[a]=nv(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return en.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&en.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[S4]=this[S4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=ng(o);r[a]||(x7(i,o),r[a]=!0)}return en.isArray(e)?e.forEach(s):s(e),this}};Ql.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);en.reduceDescriptors(Ql.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});en.freezeMethods(Ql);function H1(n,e){const t=this||Im,r=e||t,i=Ql.from(r.headers);let s=r.data;return en.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function ZS(n){return!!(n&&n.__CANCEL__)}function Vp(n,e,t){Kr.call(this,n??"canceled",Kr.ERR_CANCELED,e,t),this.name="CanceledError"}en.inherits(Vp,Kr,{__CANCEL__:!0});function XS(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Kr("Request failed with status code "+t.status,[Kr.ERR_BAD_REQUEST,Kr.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function L7(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function C7(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),h=r[s];o||(o=u),t[i]=l,r[i]=u;let p=s,v=0;for(;p!==i;)v+=t[p++],p=p%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),u-o<e)return;const m=h&&u-h;return m?Math.round(v*1e3/m):void 0}}function S7(n,e){let t=0,r=1e3/e,i,s;const o=(u,h=Date.now())=>{t=h,i=null,s&&(clearTimeout(s),s=null),n.apply(null,u)};return[(...u)=>{const h=Date.now(),p=h-t;p>=r?o(u,h):(i=u,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const $v=(n,e,t=3)=>{let r=0;const i=C7(50,250);return S7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,u=i(l),h=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&h?(a-o)/u:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(p)},t)},E4=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},M4=n=>(...e)=>en.asap(()=>n(...e)),E7=el.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,el.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(el.origin),el.navigator&&/(msie|trident)/i.test(el.navigator.userAgent)):()=>!0,M7=el.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];en.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),en.isString(r)&&o.push("path="+r),en.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function P7(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function k7(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function JS(n,e,t){let r=!P7(e);return n&&(r||t==!1)?k7(n,e):e}const P4=n=>n instanceof Ql?{...n}:n;function _f(n,e){e=e||{};const t={};function r(u,h,p,v){return en.isPlainObject(u)&&en.isPlainObject(h)?en.merge.call({caseless:v},u,h):en.isPlainObject(h)?en.merge({},h):en.isArray(h)?h.slice():h}function i(u,h,p,v){if(en.isUndefined(h)){if(!en.isUndefined(u))return r(void 0,u,p,v)}else return r(u,h,p,v)}function s(u,h){if(!en.isUndefined(h))return r(void 0,h)}function o(u,h){if(en.isUndefined(h)){if(!en.isUndefined(u))return r(void 0,u)}else return r(void 0,h)}function a(u,h,p){if(p in e)return r(u,h);if(p in n)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,h,p)=>i(P4(u),P4(h),p,!0)};return en.forEach(Object.keys(Object.assign({},n,e)),function(h){const p=l[h]||i,v=p(n[h],e[h],h);en.isUndefined(v)&&p!==a||(t[h]=v)}),t}const QS=n=>{const e=_f({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Ql.from(o),e.url=qS(JS(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(en.isFormData(t)){if(el.hasStandardBrowserEnv||el.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...h]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(el.hasStandardBrowserEnv&&(r&&en.isFunction(r)&&(r=r(e)),r||r!==!1&&E7(e.url))){const u=i&&s&&M7.read(s);u&&o.set(i,u)}return e},A7=typeof XMLHttpRequest<"u",T7=A7&&function(n){return new Promise(function(t,r){const i=QS(n);let s=i.data;const o=Ql.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=i,h,p,v,m,C;function E(){m&&m(),C&&C(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function A(){if(!k)return;const R=Ql.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),Q={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:R,config:n,request:k};XS(function(fe){t(fe),E()},function(fe){r(fe),E()},Q),k=null}"onloadend"in k?k.onloadend=A:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(A)},k.onabort=function(){k&&(r(new Kr("Request aborted",Kr.ECONNABORTED,n,k)),k=null)},k.onerror=function(){r(new Kr("Network Error",Kr.ERR_NETWORK,n,k)),k=null},k.ontimeout=function(){let W=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const Q=i.transitional||YS;i.timeoutErrorMessage&&(W=i.timeoutErrorMessage),r(new Kr(W,Q.clarifyTimeoutError?Kr.ETIMEDOUT:Kr.ECONNABORTED,n,k)),k=null},s===void 0&&o.setContentType(null),"setRequestHeader"in k&&en.forEach(o.toJSON(),function(W,Q){k.setRequestHeader(Q,W)}),en.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),u&&([v,C]=$v(u,!0),k.addEventListener("progress",v)),l&&k.upload&&([p,m]=$v(l),k.upload.addEventListener("progress",p),k.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(h=R=>{k&&(r(!R||R.type?new Vp(null,n,k):R),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const D=L7(i.url);if(D&&el.protocols.indexOf(D)===-1){r(new Kr("Unsupported protocol "+D+":",Kr.ERR_BAD_REQUEST,n));return}k.send(s||null)})},D7=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(u){if(!i){i=!0,a();const h=u instanceof Error?u:this.reason;r.abort(h instanceof Kr?h:new Vp(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new Kr(`timeout ${e} of ms exceeded`,Kr.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),n=null)};n.forEach(u=>u.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>en.asap(a),l}},O7=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},N7=async function*(n,e){for await(const t of I7(n))yield*O7(t,e)},I7=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},k4=(n,e,t,r)=>{const i=N7(n,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:h}=await i.next();if(u){a(),l.close();return}let p=h.byteLength;if(t){let v=s+=p;t(v)}l.enqueue(new Uint8Array(h))}catch(u){throw a(u),u}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},jy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",eE=jy&&typeof ReadableStream=="function",B7=jy&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),tE=(n,...e)=>{try{return!!n(...e)}catch{return!1}},R7=eE&&tE(()=>{let n=!1;const e=new Request(el.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),A4=64*1024,u2=eE&&tE(()=>en.isReadableStream(new Response("").body)),Uv={stream:u2&&(n=>n.body)};jy&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Uv[e]&&(Uv[e]=en.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Kr(`Response type '${e}' is not supported`,Kr.ERR_NOT_SUPPORT,r)})})})(new Response);const F7=async n=>{if(n==null)return 0;if(en.isBlob(n))return n.size;if(en.isSpecCompliantForm(n))return(await new Request(el.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(en.isArrayBufferView(n)||en.isArrayBuffer(n))return n.byteLength;if(en.isURLSearchParams(n)&&(n=n+""),en.isString(n))return(await B7(n)).byteLength},j7=async(n,e)=>{const t=en.toFiniteNumber(n.getContentLength());return t??F7(e)},z7=jy&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:h,withCredentials:p="same-origin",fetchOptions:v}=QS(n);u=u?(u+"").toLowerCase():"text";let m=D7([i,s&&s.toAbortSignal()],o),C;const E=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let k;try{if(l&&R7&&t!=="get"&&t!=="head"&&(k=await j7(h,r))!==0){let Q=new Request(e,{method:"POST",body:r,duplex:"half"}),de;if(en.isFormData(r)&&(de=Q.headers.get("content-type"))&&h.setContentType(de),Q.body){const[fe,N]=E4(k,$v(M4(l)));r=k4(Q.body,A4,fe,N)}}en.isString(p)||(p=p?"include":"omit");const A="credentials"in Request.prototype;C=new Request(e,{...v,signal:m,method:t.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:A?p:void 0});let D=await fetch(C);const R=u2&&(u==="stream"||u==="response");if(u2&&(a||R&&E)){const Q={};["status","statusText","headers"].forEach(z=>{Q[z]=D[z]});const de=en.toFiniteNumber(D.headers.get("content-length")),[fe,N]=a&&E4(de,$v(M4(a),!0))||[];D=new Response(k4(D.body,A4,fe,()=>{N&&N(),E&&E()}),Q)}u=u||"text";let W=await Uv[en.findKey(Uv,u)||"text"](D,n);return!R&&E&&E(),await new Promise((Q,de)=>{XS(Q,de,{data:W,headers:Ql.from(D.headers),status:D.status,statusText:D.statusText,config:n,request:C})})}catch(A){throw E&&E(),A&&A.name==="TypeError"&&/fetch/i.test(A.message)?Object.assign(new Kr("Network Error",Kr.ERR_NETWORK,n,C),{cause:A.cause||A}):Kr.from(A,A&&A.code,n,C)}}),c2={http:t7,xhr:T7,fetch:z7};en.forEach(c2,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const T4=n=>`- ${n}`,$7=n=>en.isFunction(n)||n===null||n===!1,nE={getAdapter:n=>{n=en.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!$7(t)&&(r=c2[(o=String(t)).toLowerCase()],r===void 0))throw new Kr(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(T4).join(`
`):" "+T4(s[0]):"as no adapter specified";throw new Kr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:c2};function G1(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Vp(null,n)}function D4(n){return G1(n),n.headers=Ql.from(n.headers),n.data=H1.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),nE.getAdapter(n.adapter||Im.adapter)(n).then(function(r){return G1(n),r.data=H1.call(n,n.transformResponse,r),r.headers=Ql.from(r.headers),r},function(r){return ZS(r)||(G1(n),r&&r.response&&(r.response.data=H1.call(n,n.transformResponse,r.response),r.response.headers=Ql.from(r.response.headers))),Promise.reject(r)})}const rE="1.8.4",zy={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{zy[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const O4={};zy.transitional=function(e,t,r){function i(s,o){return"[Axios v"+rE+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Kr(i(o," has been removed"+(t?" in "+t:"")),Kr.ERR_DEPRECATED);return t&&!O4[o]&&(O4[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};zy.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function U7(n,e,t){if(typeof n!="object")throw new Kr("options must be an object",Kr.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new Kr("option "+s+" must be "+l,Kr.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Kr("Unknown option "+s,Kr.ERR_BAD_OPTION)}}const rv={assertOptions:U7,validators:zy},zc=rv.validators;let ff=class{constructor(e){this.defaults=e,this.interceptors={request:new C4,response:new C4}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=_f(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&rv.assertOptions(r,{silentJSONParsing:zc.transitional(zc.boolean),forcedJSONParsing:zc.transitional(zc.boolean),clarifyTimeoutError:zc.transitional(zc.boolean)},!1),i!=null&&(en.isFunction(i)?t.paramsSerializer={serialize:i}:rv.assertOptions(i,{encode:zc.function,serialize:zc.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),rv.assertOptions(t,{baseUrl:zc.spelling("baseURL"),withXsrfToken:zc.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&en.merge(s.common,s[t.method]);s&&en.forEach(["delete","get","head","post","put","patch","common"],C=>{delete s[C]}),t.headers=Ql.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(t)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const u=[];this.interceptors.response.forEach(function(E){u.push(E.fulfilled,E.rejected)});let h,p=0,v;if(!l){const C=[D4.bind(this),void 0];for(C.unshift.apply(C,a),C.push.apply(C,u),v=C.length,h=Promise.resolve(t);p<v;)h=h.then(C[p++],C[p++]);return h}v=a.length;let m=t;for(p=0;p<v;){const C=a[p++],E=a[p++];try{m=C(m)}catch(k){E.call(this,k);break}}try{h=D4.call(this,m)}catch(C){return Promise.reject(C)}for(p=0,v=u.length;p<v;)h=h.then(u[p++],u[p++]);return h}getUri(e){e=_f(this.defaults,e);const t=JS(e.baseURL,e.url,e.allowAbsoluteUrls);return qS(t,e.params,e.paramsSerializer)}};en.forEach(["delete","get","head","options"],function(e){ff.prototype[e]=function(t,r){return this.request(_f(r||{},{method:e,url:t,data:(r||{}).data}))}});en.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(_f(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ff.prototype[e]=t(),ff.prototype[e+"Form"]=t(!0)});let V7=class iE{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Vp(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new iE(function(i){e=i}),cancel:e}}};function H7(n){return function(t){return n.apply(null,t)}}function G7(n){return en.isObject(n)&&n.isAxiosError===!0}const d2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(d2).forEach(([n,e])=>{d2[e]=n});function sE(n){const e=new ff(n),t=BS(ff.prototype.request,e);return en.extend(t,ff.prototype,e,{allOwnKeys:!0}),en.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return sE(_f(n,i))},t}const No=sE(Im);No.Axios=ff;No.CanceledError=Vp;No.CancelToken=V7;No.isCancel=ZS;No.VERSION=rE;No.toFormData=Fy;No.AxiosError=Kr;No.Cancel=No.CanceledError;No.all=function(e){return Promise.all(e)};No.spread=H7;No.isAxiosError=G7;No.mergeConfig=_f;No.AxiosHeaders=Ql;No.formToJSON=n=>KS(en.isHTMLForm(n)?new FormData(n):n);No.getAdapter=nE.getAdapter;No.HttpStatusCode=d2;No.default=No;const{Axios:rae,AxiosError:iae,CanceledError:sae,isCancel:oae,CancelToken:aae,VERSION:lae,all:uae,Cancel:cae,isAxiosError:dae,spread:hae,toFormData:fae,AxiosHeaders:pae,HttpStatusCode:gae,formToJSON:mae,getAdapter:vae,mergeConfig:yae}=No,pn=tu({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let _h=null,lf=null;const W7=1e3;function $y(){if(pn.isEnabled){pn.isRecording=!0,pn.startTime=performance.now(),pn.frameCount=0,pn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(_h=new PerformanceObserver(n=>{n.getEntries().forEach(t=>{pn.longTasks.push({duration:t.duration,startTime:t.startTime,name:t.name,component:Ec()})})}),_h.observe({entryTypes:["longtask"]}))}catch(n){console.warn("PerformanceObserver pour longues tâches non supporté",n)}q7(),F_()}}function Vv(){pn.isRecording=!1,_h&&(_h.disconnect(),_h=null),uE()}function h2(){_h&&(_h.disconnect(),_h=null),uE(),pn.measures=[],pn.longTasks=[],pn.memorySnapshots=[],pn.operationHistory=[],pn.frameCount=0,pn.framesPerSecond=0,pn.lastFpsUpdate=0,pn.isEnabled&&$y()}function oE(n,e,t){if(!pn.isEnabled||!pn.isRecording)return()=>{};const r=performance.now(),i=pn.currentOperation;return pn.currentOperation=n,pn.operationStack.push(n),()=>{const s=performance.now()-r;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:n,startTime:r,duration:s,component:e||Ec(),info:t,parentOperation:i||void 0}),s>10&&pn.operationHistory.push({operation:n,component:e||Ec()||"unknown",durationMs:s,timestamp:Date.now()})}}async function aE(n,e,t,r){if(!pn.isEnabled||!pn.isRecording)return e();const i=performance.now(),s=pn.currentOperation;pn.currentOperation=n,pn.operationStack.push(n);try{return await e()}finally{const o=performance.now()-i;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:n,startTime:i,duration:o,component:t||Ec(),info:r,parentOperation:s||void 0}),o>10&&pn.operationHistory.push({operation:n,component:t||Ec()||"unknown",durationMs:o,timestamp:Date.now()})}}function lE(n,e,t,r){if(!pn.isEnabled||!pn.isRecording)return e();const i=performance.now(),s=pn.currentOperation;pn.currentOperation=n,pn.operationStack.push(n);try{return e()}finally{const o=performance.now()-i;pn.operationStack.pop(),pn.currentOperation=pn.operationStack[pn.operationStack.length-1]||null,pn.measures.push({name:n,startTime:i,duration:o,component:t||Ec(),info:r,parentOperation:s||void 0}),o>10&&pn.operationHistory.push({operation:n,component:t||Ec()||"unknown",durationMs:o,timestamp:Date.now()})}}function F_(){!pn.isEnabled||!pn.isRecording||(performance.memory?pn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):pn.memorySnapshots.push({timestamp:performance.now()}))}function q7(){lf!==null&&cancelAnimationFrame(lf),pn.frameCount=0,pn.lastFpsUpdate=performance.now();function n(){pn.frameCount++;const e=performance.now();e-pn.lastFpsUpdate>=W7&&(pn.framesPerSecond=Math.round(pn.frameCount*1e3/(e-pn.lastFpsUpdate)),pn.frameCount=0,pn.lastFpsUpdate=e),pn.isRecording&&(lf=requestAnimationFrame(n))}lf=requestAnimationFrame(n)}function uE(){lf!==null&&(cancelAnimationFrame(lf),lf=null)}function Ec(){return""}function f2(n){pn.isEnabled=n,n&&!pn.isRecording?$y():!n&&pn.isRecording&&Vv()}function cE(n,e,t){return(...r)=>{if(!pn.isEnabled||!pn.isRecording)return n(...r);const i=performance.now();try{return n(...r)}finally{const s=performance.now()-i;pn.measures.push({name:e,startTime:i,duration:s,component:t||Ec(),info:{args:r}}),s>10&&pn.operationHistory.push({operation:e,component:t||Ec()||"unknown",durationMs:s,timestamp:Date.now()})}}}function dE(n,e,t){return async(...r)=>{if(!pn.isEnabled||!pn.isRecording)return await n(...r);const i=performance.now();try{return await n(...r)}finally{const s=performance.now()-i;pn.measures.push({name:e,startTime:i,duration:s,component:t||Ec(),info:{args:r}}),s>10&&pn.operationHistory.push({operation:e,component:t||Ec()||"unknown",durationMs:s,timestamp:Date.now()})}}}function Y7(n,e){const t=pn.measures.filter(o=>o.startTime>=n&&o.startTime+o.duration<=e),r=new Map,i=[];t.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const a=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:a.sort((l,u)=>u.duration-l.duration).map(l=>s(l))}}return i.sort((o,a)=>a.duration-o.duration).map(o=>s(o))}function p2(n,e){const t=n||pn.startTime,r=e||performance.now(),i=Y7(t,r),s=r-t,o=new Map;function a(u){const h=o.get(u.operation)||{duration:0,component:u.component};h.duration+=u.duration,o.set(u.operation,h),u.children.forEach(p=>a(p))}i.forEach(u=>a(u));const l=Array.from(o.entries()).map(([u,{duration:h,component:p}])=>({operation:u,duration:h,component:p,impact:h/s*100})).sort((u,h)=>h.impact-u.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:l}}function Hp(){const n=wt(!1);Ss(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";n.value=r,f2(r),h2()}catch(t){console.warn("Erreur lors de la vérification du paramètre perf:",t),n.value=!1,f2(!1)}}),Jl(()=>{pn.isRecording&&Vv()});const e=(t,r)=>{if(!pn.isEnabled||!pn.isRecording)return null;const i=pn.measures.find(u=>u.name===t&&u.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=pn.measures.filter(u=>u.startTime>=i.startTime&&u.startTime<=s&&u!==i),a=pn.longTasks.filter(u=>u.startTime>=i.startTime&&u.startTime<=s),l=pn.memorySnapshots.filter(u=>u.timestamp>=i.startTime&&u.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(u=>({name:u.name,component:u.component,startTime:u.startTime-i.startTime,duration:u.duration,info:u.info})),longTasks:a.map(u=>({duration:u.duration,startTime:u.startTime-i.startTime,name:u.name,component:u.component})),memorySnapshots:l.map(u=>({...u,timestamp:u.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:a.length,maxLongTaskDuration:Math.max(...a.map(u=>u.duration),0),memoryDelta:l.length>1?(l[l.length-1].usedJSHeapSize||0)-(l[0].usedJSHeapSize||0):0}}};return{isEnabled:mc(wt(pn.isEnabled)),isQueryParamEnabled:mc(n),isRecording:mc(wt(pn.isRecording)),measures:mc(wt(pn.measures)),longTasks:mc(wt(pn.longTasks)),memorySnapshots:mc(wt(pn.memorySnapshots)),framesPerSecond:mc(wt(pn.framesPerSecond)),operationHistory:mc(wt(pn.operationHistory)),startRecording:$y,stopRecording:Vv,clearRecording:h2,startMeasure:oE,measure:lE,measureAsync:aE,captureMemorySnapshot:F_,createPerformanceTracker:cE,createAsyncPerformanceTracker:dE,getOperationDetails:e,getSlowOperations:()=>!pn.isEnabled||!pn.isRecording?[]:[...pn.measures].sort((t,r)=>r.duration-t.duration).slice(0,10),getLongTasks:()=>!pn.isEnabled||!pn.isRecording?[]:[...pn.longTasks].sort((t,r)=>r.duration-t.duration),getPerformanceReport:()=>{if(!pn.isEnabled||!pn.isRecording)return null;const t=p2();return{totalMeasures:pn.measures.length,totalLongTasks:pn.longTasks.length,slowestOperations:[...pn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:pn.framesPerSecond,memoryUsage:pn.memorySnapshots.length>0?pn.memorySnapshots[pn.memorySnapshots.length-1]:null,operationsByComponent:K7(pn.measures),criticalPaths:t.criticalPaths,bottlenecks:t.bottlenecks,recordingDuration:pn.isRecording?performance.now()-pn.startTime:null}},analyzeCriticalPaths:p2}}function K7(n){if(!pn.isEnabled||!pn.isRecording)return{};const e={};return n.forEach(t=>{const r=t.component||"unknown";e[r]||(e[r]={totalTime:0,callCount:0,operations:{}}),e[r].totalTime+=t.duration,e[r].callCount++,e[r].operations[t.name]||(e[r].operations[t.name]={totalTime:0,callCount:0}),e[r].operations[t.name].totalTime+=t.duration,e[r].operations[t.name].callCount++}),e}const kn={startRecording:$y,stopRecording:Vv,clearRecording:h2,startMeasure:oE,measure:lE,measureAsync:aE,captureMemorySnapshot:F_,createPerformanceTracker:cE,createAsyncPerformanceTracker:dE,setEnabled:f2,analyzeCriticalPaths:p2},On=No.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Rr=Hp();function hE(n){var r;const t=`; ${document.cookie}`.split(`; ${n}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}On.interceptors.request.use(async n=>{const e=Rr.startMeasure("api_request_interceptor","ApiService");try{const t=hE("access_token");return t&&(n.headers.Authorization=`Bearer ${t}`),console.log("Request config:",{url:n.url,method:n.method,headers:n.headers,withCredentials:n.withCredentials}),n}finally{e()}},n=>(console.error("Request interceptor error:",n),Promise.reject(n)));On.interceptors.response.use(n=>n,async n=>{var r,i;const e=Rr.startMeasure("api_response_interceptor","ApiService"),t=n.config;try{if(((r=n.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;const s=ro();try{await Rr.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=hE("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,On(t)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(n)}finally{e()}});function Z7(n){var t;const e=[];if((t=n.response)!=null&&t.data){const r=n.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else n.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${n.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function iv(n){console.log("[fetchUsersByHierarchy] Récupération des utilisateurs:",n);const e={role:n.role};n.entrepriseId&&(e.entreprise=n.entrepriseId),n.salarieId&&(e.salarie=n.salarieId),n.includeDetails&&(e.include_plans=!0),n.search&&(e.search=n.search),console.log("[fetchUsersByHierarchy] Filtres appliqués:",e);try{const t=await Xa.getUsers(e);return console.log(`[fetchUsersByHierarchy] Résultat (${t.data.length} utilisateurs):`,t.data),t.data}catch(t){throw console.error("[fetchUsersByHierarchy] Erreur lors de la récupération des utilisateurs:",t),t}}const Xa={async getUsers(n={}){const e=Rr.startMeasure("get_users","UserService");try{return await Rr.measureAsync("get_users_request",()=>On.get("/users/",{params:n}),"UserService")}finally{e()}},async getUser(n){return await On.get(`/users/${n}/`)},async createUser(n){return await On.post("/users/",n)},async updateUser(n,e){return await On.patch(`/users/${n}/`,e)},async deleteUser(n){return await On.delete(`/users/${n}/`)},async getEntreprises(){return await On.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(n){const e={role:"SALARIE"};return n&&(e.entreprise=n),await On.get("/users/",{params:e})},async getSalarieVisiteurs(n){return await On.get("/users/",{params:{role:"VISITEUR",salarie:n}})},async getEntrepriseVisiteurs(n){return await On.get("/users/",{params:{role:"VISITEUR",entreprise:n}})},async getUsersByHierarchy(n){const e=Rr.startMeasure("get_users_hierarchy","UserService");try{const t=Rr.measure("prepare_hierarchy_filters",()=>{const r={role:n.role};return n.entrepriseId&&(r.entreprise=n.entrepriseId),n.salarieId&&(r.salarie=n.salarieId),n.includeDetails&&(r.include_plans=!0),n.search&&(r.search=n.search),r},"UserService");return await Rr.measureAsync("get_users_hierarchy_request",()=>On.get("/users/",{params:t}),"UserService")}finally{e()}},async getEntrepriseSalaries(n){return await On.get("/users/",{params:{role:"SALARIE",entreprise:n}})},async getVisiteurs(n,e){const t={role:"VISITEUR"};return n&&(t.salarie=n),e&&(t.entreprise=e),await On.get("/users/",{params:t})},async assignEntrepriseToSalarie(n,e){return await On.patch(`/users/${n}/`,{entreprise:e})},async assignSalarieToVisiteur(n,e){return await On.patch(`/users/${n}/`,{salarie:e})},formatLogoFileName(n){return Rr.measure("format_logo_filename",()=>{var i;const e=new Date().getTime(),t=((i=n.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${n.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${t}`},"UserService")},async uploadLogo(n){const e=Rr.startMeasure("upload_logo","UserService");try{const t=new FormData,r=this.formatLogoFileName(n),i=new File([n],r,{type:n.type});return t.append("logo",i),await Rr.measureAsync("upload_logo_request",()=>On.post("/users/upload_logo/",t,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{e()}}};async function W1(n,e=3,t=1e3,r=1e4){let i=0;for(;;)try{return await n()}catch(s){if(i++,i>=e)throw s;const o=Math.min(t*Math.pow(2,i-1),r),a=Math.random()*200;console.log(`Tentative ${i}/${e} échouée, nouvelle tentative dans ${o+a}ms`),await new Promise(l=>setTimeout(l,o+a))}}const w0={async getPlans(){const n=Rr.startMeasure("get_plans","IrrigationService");try{return await Rr.measureAsync("get_plans_request",()=>On.get("/plans/"),"IrrigationService")}finally{n()}},async createPlan(n){const e=Rr.startMeasure("create_plan","IrrigationService");try{const t=Rr.measure("format_plan_data",()=>({...n,entreprise:n.entreprise?typeof n.entreprise=="object"&&"id"in n.entreprise?n.entreprise.id:Number(n.entreprise):null,salarie:n.salarie?typeof n.salarie=="object"&&"id"in n.salarie?n.salarie.id:Number(n.salarie):null,visiteur:n.visiteur?typeof n.visiteur=="object"&&"id"in n.visiteur?n.visiteur.id:Number(n.visiteur):null}),"IrrigationService");return await Rr.measureAsync("create_plan_request",()=>On.post("/plans/",t),"IrrigationService")}finally{e()}},async updatePlan(n,e){const t=Rr.startMeasure("update_plan","IrrigationService");try{return await Rr.measureAsync("update_plan_request",()=>On.put(`/plans/${n}/`,e),"IrrigationService")}finally{t()}},async deletePlan(n){const e=Rr.startMeasure("delete_plan","IrrigationService");try{return await Rr.measureAsync("delete_plan_request",()=>On.delete(`/plans/${n}/`),"IrrigationService")}finally{e()}},async getVisiteurPlans(n){return await On.get("/plans/",{params:{visiteur:n}})},async createPlanForVisiteur(n){return await On.post("/plans/",n)},async getEntreprisePlans(n){return await On.get("/plans/",{params:{entreprise:n}})},async getSalariePlans(n){return await On.get("/plans/",{params:{salarie:n}})},async createPlanForSalarie(n,e){const t={...n,salarie:e};return await On.post("/plans/",t)},async createPlanForEntreprise(n,e){const t={...n,entreprise:e};return await On.post("/plans/",t)}},pa={async getNotes(n={}){const e=Rr.startMeasure("get_notes","NoteService");try{return await Rr.measureAsync("get_notes_request",()=>On.get("/notes/",{params:n}),"NoteService")}finally{e()}},async getNotesByPlan(n){const e=Rr.startMeasure("get_notes_by_plan","NoteService");try{return await Rr.measureAsync("get_notes_by_plan_request",()=>On.get("/notes/",{params:{plan:n}}),"NoteService")}finally{e()}},async getNote(n){const e=Rr.startMeasure("get_note","NoteService");try{return await Rr.measureAsync("get_note_request",()=>On.get(`/notes/${n}/`),"NoteService")}finally{e()}},async createNote(n){const e=Rr.startMeasure("create_note","NoteService");try{const t={...n};return t.location&&Object.keys(t.location).length===0&&delete t.location,await Rr.measureAsync("create_note_request",()=>On.post("/notes/",t),"NoteService")}finally{e()}},async updateNote(n,e){console.log("[noteService][updateNote] Mise à jour de la note:",{noteId:n,noteData:e});const t=Rr.startMeasure("update_note","NoteService");try{const r=e.backendId||n,i={...e};i.location&&Object.keys(i.location).length===0&&delete i.location,e.column!==void 0?i.column=e.column:e.columnId!==void 0&&(i.column=e.columnId),delete i.columnId,delete i.column_id,delete i.column_details,delete i.backendId,delete i.leafletId,console.log("[noteService][updateNote] Données formatées:",i),console.log(`[noteService][updateNote] Utilisation de l'ID backend ${r} pour la mise à jour`);const s=await Rr.measureAsync("update_note_request",()=>On.patch(`/notes/${r}/`,i),"NoteService");return console.log("[noteService][updateNote] Réponse du serveur:",s.data),s}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise à jour:",r),r}finally{t()}},async deleteNote(n){const e=Rr.startMeasure("delete_note","NoteService");try{return await Rr.measureAsync("delete_note_request",()=>On.delete(`/notes/${n}/`),"NoteService")}finally{e()}},async getComments(n){return await On.get(`/notes/${n}/comments/`)},async addComment(n,e){const t=typeof e=="string"?{text:e}:e;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${n}:`,t),await On.post(`/notes/${n}/comments/`,t)},async updateComment(n,e,t){return await On.patch(`/notes/${n}/comments/${e}/`,t)},async deleteComment(n,e){return await On.delete(`/notes/${n}/comments/${e}/`)},async getPhotos(n){return await On.get(`/notes/${n}/photos/`)},async addPhoto(n,e){return await On.post(`/notes/${n}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(n,e,t){return await On.patch(`/notes/${n}/photos/${e}/`,t)},async deletePhoto(n,e){return await On.delete(`/notes/${n}/photos/${e}/`)}},q1={async getDevices(n={}){const e=Rr.startMeasure("get_weather_devices","WeatherService");try{return await W1(()=>On.get("/weather/devices/",{params:n}),3,1e3,1e4)}finally{e()}},async getRealTimeData(n){const e=Rr.startMeasure("get_weather_data","WeatherService");try{const t=typeof n=="string"?{mac:n}:n;return await W1(()=>On.get("/weather/",{params:t}),3,1e3,1e4)}finally{e()}},async getHistoryData(n){const e=Rr.startMeasure("get_history_data","WeatherService");try{return await W1(()=>On.get("/weather/history/",{params:n}),3,1e3,1e4)}finally{e()}}},x0={async getFilters(){const n=Rr.startMeasure("get_map_filters","MapFilterService");try{return await Rr.measureAsync("get_map_filters_request",()=>On.get("/map-filters/"),"MapFilterService")}finally{n()}},async getFilter(n){const e=Rr.startMeasure("get_map_filter","MapFilterService");try{return await Rr.measureAsync("get_map_filter_request",()=>On.get(`/map-filters/${n}/`),"MapFilterService")}finally{e()}},async createFilter(n){const e=Rr.startMeasure("create_map_filter","MapFilterService");try{return await Rr.measureAsync("create_map_filter_request",()=>On.post("/map-filters/",n),"MapFilterService")}finally{e()}},async updateFilter(n,e){const t=Rr.startMeasure("update_map_filter","MapFilterService");try{return await Rr.measureAsync("update_map_filter_request",()=>On.patch(`/map-filters/${n}/`,e),"MapFilterService")}finally{t()}},async deleteFilter(n){const e=Rr.startMeasure("delete_map_filter","MapFilterService");try{return await Rr.measureAsync("delete_map_filter_request",()=>On.delete(`/map-filters/${n}/`),"MapFilterService")}finally{e()}}};On.defaults.baseURL="/api";On.defaults.headers.common["Content-Type"]="application/json";On.defaults.withCredentials=!0;function vm(n){var r;const t=`; ${document.cookie}`.split(`; ${n}=`);return t.length===2&&((r=t.pop())==null?void 0:r.split(";").shift())||null}On.interceptors.request.use(n=>{const e=vm("access_token");return e&&(n.headers.Authorization=`Bearer ${e}`),n},n=>(console.error("Request interceptor error:",n),Promise.reject(n)));On.interceptors.response.use(n=>n,async n=>{var r,i;const e=ro(),t=n.config;if(((r=n.response)==null?void 0:r.status)===401&&!t._retry&&!((i=t.url)!=null&&i.includes("/token/refresh/"))){t._retry=!0;try{if(!vm("access_token"))throw new Error("No token available");await e.refreshToken();const o=vm("access_token");if(o)return t.headers.Authorization=`Bearer ${o}`,On(t)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(n)});function X7(n,e,t=1){const r=new Date;r.setTime(r.getTime()+t*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${n}=${e};${i};path=/;secure;samesite=Strict`}function wu(n){if(!n)return"-";const e=n.first_name||"",t=n.last_name?n.last_name.toUpperCase():"",r=`${e} ${t}`.trim(),i=n.company_name||n.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function J7(n="",e=""){return`${(n==null?void 0:n.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const Q7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function eB(n){return Q7[n]||n}function tB(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function nB(n){return n?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function rB({role:n,entrepriseId:e,salarieId:t,includeDetails:r=!1}){const i={role:n};return e&&(i.entreprise=e),t&&(i.salarie=t),r&&(i.include_plans=!0),(await Xa.getUsers(i)).data}const ro=$p("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:n=>{var e;return((e=n.user)==null?void 0:e.user_type)==="admin"},isEntreprise:n=>{var e;return((e=n.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:n=>{var e;return((e=n.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:n=>{var e;return((e=n.user)==null?void 0:e.user_type)==="visiteur"},currentUser:n=>n.user,hasEnterprise:n=>{var e;return!!((e=n.user)!=null&&e.enterprise_id)},hasEmployee:n=>{var e;return!!((e=n.user)!=null&&e.employee_id)}},actions:{async initialize(n){if(!n){const t=await this.restoreSession();return this.initialized=!0,t}if(n.isAuthenticated&&n.user)return this.user=n.user,this.isAuthenticated=!0,this.mustChangePassword=n.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!vm("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await On.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(n){return console.error("Failed to restore session:",n),this.isAuthenticated=!1,this.user=null,!1}},async login(n,e){var t,r,i;try{const s=await On.post("/token/",{username:n,password:e});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((t=s.response)==null?void 0:t.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const n=await On.get("/users/me/");return this.user=n.data,this.isAuthenticated=!0,this.mustChangePassword=n.data.must_change_password||!1,n.data}catch(n){throw this.isAuthenticated=!1,this.user=null,n}},async changePassword(n,e){try{const t=await On.post("/users/change_password/",{old_password:n,password:e});return this.user={...this.user,must_change_password:!1},t.data}catch(t){throw console.error("Password change error:",t),t}},async refreshToken(){var n,e;try{if(!vm("refresh_token"))throw new Error("No refresh token available");const r=await On.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return X7("access_token",i,1),this.isAuthenticated=!0,i}catch(t){throw console.error("Error refreshing token:",{status:(n=t.response)==null?void 0:n.status,data:(e=t.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",t}},async fetchUsers(n={}){this.loading=!0;try{return(await Xa.getUsers(n)).data}catch(e){throw this.error="Erreur lors de la récupération des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const n=await Xa.getUsers({role:"ENTREPRISE"});return this.enterprises=n.data,this.enterprises}catch(n){throw this.error="Erreur lors de la récupération des entreprises",n}finally{this.loading=!1}},async fetchEnterpriseEmployees(n){this.loading=!0;try{const e=await Xa.getUsers({role:"SALARIE",entreprise:n});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(n){this.loading=!0;try{const e=await Xa.getUsers({role:"VISITEUR",entreprise:n});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}},async createUser(n){this.loading=!0;try{return(await Xa.createUser(n)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUser(n,e){this.loading=!0;try{return(await Xa.updateUser(n,e)).data}catch(t){throw this.error="Erreur lors de la mise à jour de l'utilisateur",t}finally{this.loading=!1}},async deleteUser(n){this.loading=!0;try{return await Xa.deleteUser(n),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const n=await On.get("/users/",{params:{role:"entreprise"}});this.enterprises=n.data}catch(n){throw this.error="Erreur lors de la récupération des entreprises",n}finally{this.loading=!1}},async setEnterprise(n,e){this.loading=!0;try{await On.patch(`/users/${n}/`,{enterprise:e}),this.user&&this.user.id===n&&(this.user.enterprise_id=e)}catch(t){throw this.error="Erreur lors de la mise à jour de l'entreprise",t}finally{this.loading=!1}},async updateUserRole(n,e){this.loading=!0;try{const t=await On.patch(`/users/${n}/`,{role:e});return this.user&&this.user.id===n&&(this.user.user_type=e),t.data}catch(t){throw this.error="Erreur lors de la mise à jour du rôle",t}finally{this.loading=!1}},async updateUserEmail(n){var e;this.loading=!0;try{const t=await On.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:n});return this.user&&(this.user.email=n),t.data}catch(t){throw this.error="Erreur lors de la mise à jour de l'email",t}finally{this.loading=!1}},async uploadLogo(n){this.loading=!0;try{const e=await Xa.uploadLogo(n);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du téléversement du logo",e}finally{this.loading=!1}},checkAccess(n){return this.user?n.includes(this.user.user_type):!1},async fetchUsersByRole(n){this.loading=!0;try{return await rB(n)}catch(e){throw console.error(`Error fetching ${n.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(n){this.loading=!0;try{return(await Xa.getUsers({role:"SALARIE",entreprise:n})).data}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(n){this.loading=!0;try{return(await Xa.getUsers({role:"VISITEUR",salarie:n})).data}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ap=typeof document<"u";function fE(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function iB(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&fE(n.default)}const Vi=Object.assign;function Y1(n,e){const t={};for(const r in e){const i=e[r];t[r]=Mc(i)?i.map(n):n(i)}return t}const Gg=()=>{},Mc=Array.isArray,pE=/#/g,sB=/&/g,oB=/\//g,aB=/=/g,lB=/\?/g,gE=/\+/g,uB=/%5B/g,cB=/%5D/g,mE=/%5E/g,dB=/%60/g,vE=/%7B/g,hB=/%7C/g,yE=/%7D/g,fB=/%20/g;function j_(n){return encodeURI(""+n).replace(hB,"|").replace(uB,"[").replace(cB,"]")}function pB(n){return j_(n).replace(vE,"{").replace(yE,"}").replace(mE,"^")}function g2(n){return j_(n).replace(gE,"%2B").replace(fB,"+").replace(pE,"%23").replace(sB,"%26").replace(dB,"`").replace(vE,"{").replace(yE,"}").replace(mE,"^")}function gB(n){return g2(n).replace(aB,"%3D")}function mB(n){return j_(n).replace(pE,"%23").replace(lB,"%3F")}function vB(n){return n==null?"":mB(n).replace(oB,"%2F")}function ym(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const yB=/\/$/,bB=n=>n.replace(yB,"");function K1(n,e,t="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=n(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=LB(r??e,t),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:ym(o)}}function _B(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function N4(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function wB(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&Ap(e.matched[r],t.matched[i])&&bE(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Ap(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function bE(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!xB(n[t],e[t]))return!1;return!0}function xB(n,e){return Mc(n)?I4(n,e):Mc(e)?I4(e,n):n===e}function I4(n,e){return Mc(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function LB(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=t.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Jd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var bm;(function(n){n.pop="pop",n.push="push"})(bm||(bm={}));var Wg;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Wg||(Wg={}));function CB(n){if(!n)if(ap){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),bB(n)}const SB=/^[^#]+#/;function EB(n,e){return n.replace(SB,"#")+e}function MB(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const Uy=()=>({left:window.scrollX,top:window.scrollY});function PB(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=MB(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function B4(n,e){return(history.state?history.state.position-e:-1)+n}const m2=new Map;function kB(n,e){m2.set(n,e)}function AB(n){const e=m2.get(n);return m2.delete(n),e}let TB=()=>location.protocol+"//"+location.host;function _E(n,e){const{pathname:t,search:r,hash:i}=e,s=n.indexOf("#");if(s>-1){let a=i.includes(n.slice(s))?n.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),N4(l,"")}return N4(t,n)+r+i}function DB(n,e,t,r){let i=[],s=[],o=null;const a=({state:v})=>{const m=_E(n,location),C=t.value,E=e.value;let k=0;if(v){if(t.value=m,e.value=v,o&&o===C){o=null;return}k=E?v.position-E.position:0}else r(m);i.forEach(A=>{A(t.value,C,{delta:k,type:bm.pop,direction:k?k>0?Wg.forward:Wg.back:Wg.unknown})})};function l(){o=t.value}function u(v){i.push(v);const m=()=>{const C=i.indexOf(v);C>-1&&i.splice(C,1)};return s.push(m),m}function h(){const{history:v}=window;v.state&&v.replaceState(Vi({},v.state,{scroll:Uy()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:u,destroy:p}}function R4(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?Uy():null}}function OB(n){const{history:e,location:t}=window,r={value:_E(n,t)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,u,h){const p=n.indexOf("#"),v=p>-1?(t.host&&document.querySelector("base")?n:n.slice(p))+l:TB()+n+l;try{e[h?"replaceState":"pushState"](u,"",v),i.value=u}catch(m){console.error(m),t[h?"replace":"assign"](v)}}function o(l,u){const h=Vi({},e.state,R4(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});s(l,h,!0),r.value=l}function a(l,u){const h=Vi({},i.value,e.state,{forward:l,scroll:Uy()});s(h.current,h,!0);const p=Vi({},R4(r.value,l,null),{position:h.position+1},u);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function NB(n){n=CB(n);const e=OB(n),t=DB(n,e.state,e.location,e.replace);function r(s,o=!0){o||t.pauseListeners(),history.go(s)}const i=Vi({location:"",base:n,go:r,createHref:EB.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function IB(n){return typeof n=="string"||n&&typeof n=="object"}function wE(n){return typeof n=="string"||typeof n=="symbol"}const xE=Symbol("");var F4;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(F4||(F4={}));function Tp(n,e){return Vi(new Error,{type:n,[xE]:!0},e)}function xd(n,e){return n instanceof Error&&xE in n&&(e==null||!!(n.type&e))}const j4="[^/]+?",BB={sensitive:!1,strict:!1,start:!0,end:!0},RB=/[.+*?^${}()[\]/\\]/g;function FB(n,e){const t=Vi({},BB,e),r=[];let i=t.start?"^":"";const s=[];for(const u of n){const h=u.length?[]:[90];t.strict&&!u.length&&(i+="/");for(let p=0;p<u.length;p++){const v=u[p];let m=40+(t.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(RB,"\\$&"),m+=40;else if(v.type===1){const{value:C,repeatable:E,optional:k,regexp:A}=v;s.push({name:C,repeatable:E,optional:k});const D=A||j4;if(D!==j4){m+=10;try{new RegExp(`(${D})`)}catch(W){throw new Error(`Invalid custom RegExp for param "${C}" (${D}): `+W.message)}}let R=E?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;p||(R=k&&u.length<2?`(?:/${R})`:"/"+R),k&&(R+="?"),i+=R,m+=20,k&&(m+=-8),E&&(m+=-20),D===".*"&&(m+=-50)}h.push(m)}r.push(h)}if(t.strict&&t.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function a(u){const h=u.match(o),p={};if(!h)return null;for(let v=1;v<h.length;v++){const m=h[v]||"",C=s[v-1];p[C.name]=m&&C.repeatable?m.split("/"):m}return p}function l(u){let h="",p=!1;for(const v of n){(!p||!h.endsWith("/"))&&(h+="/"),p=!1;for(const m of v)if(m.type===0)h+=m.value;else if(m.type===1){const{value:C,repeatable:E,optional:k}=m,A=C in u?u[C]:"";if(Mc(A)&&!E)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const D=Mc(A)?A.join("/"):A;if(!D)if(k)v.length<2&&(h.endsWith("/")?h=h.slice(0,-1):p=!0);else throw new Error(`Missing required param "${C}"`);h+=D}}return h||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function jB(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function LE(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const s=jB(r[t],i[t]);if(s)return s;t++}if(Math.abs(i.length-r.length)===1){if(z4(r))return 1;if(z4(i))return-1}return i.length-r.length}function z4(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const zB={type:0,value:""},$B=/[a-zA-Z0-9_]/;function UB(n){if(!n)return[[]];if(n==="/")return[[zB]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(m){throw new Error(`ERR (${t})/"${u}": ${m}`)}let t=0,r=t;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,u="",h="";function p(){u&&(t===0?s.push({type:0,value:u}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function v(){u+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:l==="/"?(u&&p(),o()):l===":"?(p(),t=1):v();break;case 4:v(),t=r;break;case 1:l==="("?t=2:$B.test(l)?v():(p(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:t=3:h+=l;break;case 3:p(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),i}function VB(n,e,t){const r=FB(UB(n.path),t),i=Vi(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function HB(n,e){const t=[],r=new Map;e=H4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,m){const C=!m,E=U4(p);E.aliasOf=m&&m.record;const k=H4(e,p),A=[E];if("alias"in p){const W=typeof p.alias=="string"?[p.alias]:p.alias;for(const Q of W)A.push(U4(Vi({},E,{components:m?m.record.components:E.components,path:Q,aliasOf:m?m.record:E})))}let D,R;for(const W of A){const{path:Q}=W;if(v&&Q[0]!=="/"){const de=v.record.path,fe=de[de.length-1]==="/"?"":"/";W.path=v.record.path+(Q&&fe+Q)}if(D=VB(W,v,k),m?m.alias.push(D):(R=R||D,R!==D&&R.alias.push(D),C&&p.name&&!V4(D)&&o(p.name)),CE(D)&&l(D),E.children){const de=E.children;for(let fe=0;fe<de.length;fe++)s(de[fe],D,m&&m.children[fe])}m=m||D}return R?()=>{o(R)}:Gg}function o(p){if(wE(p)){const v=r.get(p);v&&(r.delete(p),t.splice(t.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=t.indexOf(p);v>-1&&(t.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return t}function l(p){const v=qB(p,t);t.splice(v,0,p),p.record.name&&!V4(p)&&r.set(p.record.name,p)}function u(p,v){let m,C={},E,k;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw Tp(1,{location:p});k=m.record.name,C=Vi($4(v.params,m.keys.filter(R=>!R.optional).concat(m.parent?m.parent.keys.filter(R=>R.optional):[]).map(R=>R.name)),p.params&&$4(p.params,m.keys.map(R=>R.name))),E=m.stringify(C)}else if(p.path!=null)E=p.path,m=t.find(R=>R.re.test(E)),m&&(C=m.parse(E),k=m.record.name);else{if(m=v.name?r.get(v.name):t.find(R=>R.re.test(v.path)),!m)throw Tp(1,{location:p,currentLocation:v});k=m.record.name,C=Vi({},v.params,p.params),E=m.stringify(C)}const A=[];let D=m;for(;D;)A.unshift(D.record),D=D.parent;return{name:k,path:E,params:C,matched:A,meta:WB(A)}}n.forEach(p=>s(p));function h(){t.length=0,r.clear()}return{addRoute:s,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:i}}function $4(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function U4(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:GB(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function GB(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function V4(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function WB(n){return n.reduce((e,t)=>Vi(e,t.meta),{})}function H4(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function qB(n,e){let t=0,r=e.length;for(;t!==r;){const s=t+r>>1;LE(n,e[s])<0?r=s:t=s+1}const i=YB(n);return i&&(r=e.lastIndexOf(i,r-1)),r}function YB(n){let e=n;for(;e=e.parent;)if(CE(e)&&LE(n,e)===0)return e}function CE({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function KB(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(gE," "),o=s.indexOf("="),a=ym(o<0?s:s.slice(0,o)),l=o<0?null:ym(s.slice(o+1));if(a in e){let u=e[a];Mc(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function G4(n){let e="";for(let t in n){const r=n[t];if(t=gB(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(Mc(r)?r.map(s=>s&&g2(s)):[r&&g2(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function ZB(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=Mc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const XB=Symbol(""),W4=Symbol(""),Vy=Symbol(""),z_=Symbol(""),v2=Symbol("");function rg(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function uh(n,e,t,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const u=v=>{v===!1?l(Tp(4,{from:t,to:e})):v instanceof Error?l(v):IB(v)?l(Tp(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},h=s(()=>n.call(r&&r.instances[i],e,t,u));let p=Promise.resolve(h);n.length<3&&(p=p.then(u)),p.catch(v=>l(v))})}function Z1(n,e,t,r,i=s=>s()){const s=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(fE(l)){const h=(l.__vccOpts||l)[e];h&&s.push(uh(h,t,r,o,a,i))}else{let u=l();s.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=iB(h)?h.default:h;o.mods[a]=h,o.components[a]=p;const m=(p.__vccOpts||p)[e];return m&&uh(m,t,r,o,a,i)()}))}}return s}function q4(n){const e=Cu(Vy),t=Cu(z_),r=Gn(()=>{const l=yn(n.to);return e.resolve(l)}),i=Gn(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],p=t.matched;if(!h||!p.length)return-1;const v=p.findIndex(Ap.bind(null,h));if(v>-1)return v;const m=Y4(l[u-2]);return u>1&&Y4(h)===m&&p[p.length-1].path!==m?p.findIndex(Ap.bind(null,l[u-2])):v}),s=Gn(()=>i.value>-1&&tR(t.params,r.value.params)),o=Gn(()=>i.value>-1&&i.value===t.matched.length-1&&bE(t.params,r.value.params));function a(l={}){if(eR(l)){const u=e[yn(n.replace)?"replace":"push"](yn(n.to)).catch(Gg);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Gn(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function JB(n){return n.length===1?n[0]:n}const QB=Ms({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:q4,setup(n,{slots:e}){const t=tu(q4(n)),{options:r}=Cu(Vy),i=Gn(()=>({[K4(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[K4(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&JB(e.default(t));return n.custom?s:Ty("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},s)}}}),xg=QB;function eR(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function tR(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!Mc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Y4(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const K4=(n,e,t)=>n??e??t,nR=Ms({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=Cu(v2),i=Gn(()=>n.route||r.value),s=Cu(W4,0),o=Gn(()=>{let u=yn(s);const{matched:h}=i.value;let p;for(;(p=h[u])&&!p.components;)u++;return u}),a=Gn(()=>i.value.matched[o.value]);$g(W4,Gn(()=>o.value+1)),$g(XB,a),$g(v2,i);const l=wt();return ai(()=>[l.value,a.value,n.name],([u,h,p],[v,m,C])=>{h&&(h.instances[p]=u,m&&m!==h&&u&&u===v&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),u&&h&&(!m||!Ap(h,m)||!v)&&(h.enterCallbacks[p]||[]).forEach(E=>E(u))},{flush:"post"}),()=>{const u=i.value,h=n.name,p=a.value,v=p&&p.components[h];if(!v)return Z4(t.default,{Component:v,route:u});const m=p.props[h],C=m?m===!0?u.params:typeof m=="function"?m(u):m:null,k=Ty(v,Vi({},C,e,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(p.instances[h]=null)},ref:l}));return Z4(t.default,{Component:k,route:u})||k}}});function Z4(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const SE=nR;function rR(n){const e=HB(n.routes,n),t=n.parseQuery||KB,r=n.stringifyQuery||G4,i=n.history,s=rg(),o=rg(),a=rg(),l=y_(Jd);let u=Jd;ap&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Y1.bind(null,pe=>""+pe),p=Y1.bind(null,vB),v=Y1.bind(null,ym);function m(pe,re){let ae,De;return wE(pe)?(ae=e.getRecordMatcher(pe),De=re):De=pe,e.addRoute(De,ae)}function C(pe){const re=e.getRecordMatcher(pe);re&&e.removeRoute(re)}function E(){return e.getRoutes().map(pe=>pe.record)}function k(pe){return!!e.getRecordMatcher(pe)}function A(pe,re){if(re=Vi({},re||l.value),typeof pe=="string"){const me=K1(t,pe,re.path),oe=e.resolve({path:me.path},re),Z=i.createHref(me.fullPath);return Vi(me,oe,{params:v(oe.params),hash:ym(me.hash),redirectedFrom:void 0,href:Z})}let ae;if(pe.path!=null)ae=Vi({},pe,{path:K1(t,pe.path,re.path).path});else{const me=Vi({},pe.params);for(const oe in me)me[oe]==null&&delete me[oe];ae=Vi({},pe,{params:p(me)}),re.params=p(re.params)}const De=e.resolve(ae,re),be=pe.hash||"";De.params=h(v(De.params));const Ie=_B(r,Vi({},pe,{hash:pB(be),path:De.path})),le=i.createHref(Ie);return Vi({fullPath:Ie,hash:be,query:r===G4?ZB(pe.query):pe.query||{}},De,{redirectedFrom:void 0,href:le})}function D(pe){return typeof pe=="string"?K1(t,pe,l.value.path):Vi({},pe)}function R(pe,re){if(u!==pe)return Tp(8,{from:re,to:pe})}function W(pe){return fe(pe)}function Q(pe){return W(Vi(D(pe),{replace:!0}))}function de(pe){const re=pe.matched[pe.matched.length-1];if(re&&re.redirect){const{redirect:ae}=re;let De=typeof ae=="function"?ae(pe):ae;return typeof De=="string"&&(De=De.includes("?")||De.includes("#")?De=D(De):{path:De},De.params={}),Vi({query:pe.query,hash:pe.hash,params:De.path!=null?{}:pe.params},De)}}function fe(pe,re){const ae=u=A(pe),De=l.value,be=pe.state,Ie=pe.force,le=pe.replace===!0,me=de(ae);if(me)return fe(Vi(D(me),{state:typeof me=="object"?Vi({},be,me.state):be,force:Ie,replace:le}),re||ae);const oe=ae;oe.redirectedFrom=re;let Z;return!Ie&&wB(r,De,ae)&&(Z=Tp(16,{to:oe,from:De}),He(De,De,!0,!1)),(Z?Promise.resolve(Z):J(oe,De)).catch(Ae=>xd(Ae)?xd(Ae,2)?Ae:ge(Ae):K(Ae,oe,De)).then(Ae=>{if(Ae){if(xd(Ae,2))return fe(Vi({replace:le},D(Ae.to),{state:typeof Ae.to=="object"?Vi({},be,Ae.to.state):be,force:Ie}),re||oe)}else Ae=B(oe,De,!0,le,be);return U(oe,De,Ae),Ae})}function N(pe,re){const ae=R(pe,re);return ae?Promise.reject(ae):Promise.resolve()}function z(pe){const re=_e.values().next().value;return re&&typeof re.runWithContext=="function"?re.runWithContext(pe):pe()}function J(pe,re){let ae;const[De,be,Ie]=iR(pe,re);ae=Z1(De.reverse(),"beforeRouteLeave",pe,re);for(const me of De)me.leaveGuards.forEach(oe=>{ae.push(uh(oe,pe,re))});const le=N.bind(null,pe,re);return ae.push(le),ee(ae).then(()=>{ae=[];for(const me of s.list())ae.push(uh(me,pe,re));return ae.push(le),ee(ae)}).then(()=>{ae=Z1(be,"beforeRouteUpdate",pe,re);for(const me of be)me.updateGuards.forEach(oe=>{ae.push(uh(oe,pe,re))});return ae.push(le),ee(ae)}).then(()=>{ae=[];for(const me of Ie)if(me.beforeEnter)if(Mc(me.beforeEnter))for(const oe of me.beforeEnter)ae.push(uh(oe,pe,re));else ae.push(uh(me.beforeEnter,pe,re));return ae.push(le),ee(ae)}).then(()=>(pe.matched.forEach(me=>me.enterCallbacks={}),ae=Z1(Ie,"beforeRouteEnter",pe,re,z),ae.push(le),ee(ae))).then(()=>{ae=[];for(const me of o.list())ae.push(uh(me,pe,re));return ae.push(le),ee(ae)}).catch(me=>xd(me,8)?me:Promise.reject(me))}function U(pe,re,ae){a.list().forEach(De=>z(()=>De(pe,re,ae)))}function B(pe,re,ae,De,be){const Ie=R(pe,re);if(Ie)return Ie;const le=re===Jd,me=ap?history.state:{};ae&&(De||le?i.replace(pe.fullPath,Vi({scroll:le&&me&&me.scroll},be)):i.push(pe.fullPath,be)),l.value=pe,He(pe,re,ae,le),ge()}let G;function $(){G||(G=i.listen((pe,re,ae)=>{if(!H.listening)return;const De=A(pe),be=de(De);if(be){fe(Vi(be,{replace:!0,force:!0}),De).catch(Gg);return}u=De;const Ie=l.value;ap&&kB(B4(Ie.fullPath,ae.delta),Uy()),J(De,Ie).catch(le=>xd(le,12)?le:xd(le,2)?(fe(Vi(D(le.to),{force:!0}),De).then(me=>{xd(me,20)&&!ae.delta&&ae.type===bm.pop&&i.go(-1,!1)}).catch(Gg),Promise.reject()):(ae.delta&&i.go(-ae.delta,!1),K(le,De,Ie))).then(le=>{le=le||B(De,Ie,!1),le&&(ae.delta&&!xd(le,8)?i.go(-ae.delta,!1):ae.type===bm.pop&&xd(le,20)&&i.go(-1,!1)),U(De,Ie,le)}).catch(Gg)}))}let F=rg(),I=rg(),X;function K(pe,re,ae){ge(pe);const De=I.list();return De.length?De.forEach(be=>be(pe,re,ae)):console.error(pe),Promise.reject(pe)}function ve(){return X&&l.value!==Jd?Promise.resolve():new Promise((pe,re)=>{F.add([pe,re])})}function ge(pe){return X||(X=!pe,$(),F.list().forEach(([re,ae])=>pe?ae(pe):re()),F.reset()),pe}function He(pe,re,ae,De){const{scrollBehavior:be}=n;if(!ap||!be)return Promise.resolve();const Ie=!ae&&AB(B4(pe.fullPath,0))||(De||!ae)&&history.state&&history.state.scroll||null;return Zo().then(()=>be(pe,re,Ie)).then(le=>le&&PB(le)).catch(le=>K(le,pe,re))}const ie=pe=>i.go(pe);let Ce;const _e=new Set,H={currentRoute:l,listening:!0,addRoute:m,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:E,resolve:A,options:n,push:W,replace:Q,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:I.add,isReady:ve,install(pe){const re=this;pe.component("RouterLink",xg),pe.component("RouterView",SE),pe.config.globalProperties.$router=re,Object.defineProperty(pe.config.globalProperties,"$route",{enumerable:!0,get:()=>yn(l)}),ap&&!Ce&&l.value===Jd&&(Ce=!0,W(i.location).catch(be=>{}));const ae={};for(const be in Jd)Object.defineProperty(ae,be,{get:()=>l.value[be],enumerable:!0});pe.provide(Vy,re),pe.provide(z_,v_(ae)),pe.provide(v2,l);const De=pe.unmount;_e.add(pe),pe.unmount=function(){_e.delete(pe),_e.size<1&&(u=Jd,G&&G(),G=null,l.value=Jd,Ce=!1,X=!1),De()}}};function ee(pe){return pe.reduce((re,ae)=>re.then(()=>z(ae)),Promise.resolve())}return H}function iR(n,e){const t=[],r=[],i=[],s=Math.max(e.matched.length,n.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(n.matched.find(u=>Ap(u,a))?r.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(u=>Ap(u,l))||i.push(l))}return[t,r,i]}function Bm(){return Cu(Vy)}function sR(n){return Cu(z_)}const eu=$p("notification",()=>{const n=wt([]),e=wt(0),t=wt(null),r=Gn(()=>[...n.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:m=5e3}){const C=++e.value,E=Date.now(),k={id:C,type:p,message:v,duration:m,timestamp:E};return n.value.push(k),t.value=C,m>0&&setTimeout(()=>{u(C)},m),C}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function u(p){const v=n.value.findIndex(m=>m.id===p);v!==-1&&n.value.splice(v,1),t.value===p&&(t.value=null)}function h(){n.value=[],t.value=null}return{notifications:r,lastAddedId:t,addNotification:i,removeNotification:u,clearAll:h,success:s,error:o,info:a,warning:l}}),oR=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:eu},Symbol.toStringTag,{value:"Module"}));var ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function EE(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}function aR(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var ME=aR,lR=typeof ga=="object"&&ga&&ga.Object===Object&&ga,uR=lR,cR=uR,dR=typeof self=="object"&&self&&self.Object===Object&&self,hR=cR||dR||Function("return this")(),PE=hR,fR=PE,pR=function(){return fR.Date.now()},gR=pR,mR=/\s/;function vR(n){for(var e=n.length;e--&&mR.test(n.charAt(e)););return e}var yR=vR,bR=yR,_R=/^\s+/;function wR(n){return n&&n.slice(0,bR(n)+1).replace(_R,"")}var xR=wR,LR=PE,CR=LR.Symbol,kE=CR,X4=kE,AE=Object.prototype,SR=AE.hasOwnProperty,ER=AE.toString,ig=X4?X4.toStringTag:void 0;function MR(n){var e=SR.call(n,ig),t=n[ig];try{n[ig]=void 0;var r=!0}catch{}var i=ER.call(n);return r&&(e?n[ig]=t:delete n[ig]),i}var PR=MR,kR=Object.prototype,AR=kR.toString;function TR(n){return AR.call(n)}var DR=TR,J4=kE,OR=PR,NR=DR,IR="[object Null]",BR="[object Undefined]",Q4=J4?J4.toStringTag:void 0;function RR(n){return n==null?n===void 0?BR:IR:Q4&&Q4 in Object(n)?OR(n):NR(n)}var FR=RR;function jR(n){return n!=null&&typeof n=="object"}var zR=jR,$R=FR,UR=zR,VR="[object Symbol]";function HR(n){return typeof n=="symbol"||UR(n)&&$R(n)==VR}var GR=HR,WR=xR,e5=ME,qR=GR,t5=NaN,YR=/^[-+]0x[0-9a-f]+$/i,KR=/^0b[01]+$/i,ZR=/^0o[0-7]+$/i,XR=parseInt;function JR(n){if(typeof n=="number")return n;if(qR(n))return t5;if(e5(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=e5(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=WR(n);var t=KR.test(n);return t||ZR.test(n)?XR(n.slice(2),t?2:8):YR.test(n)?t5:+n}var QR=JR,eF=ME,X1=gR,n5=QR,tF="Expected a function",nF=Math.max,rF=Math.min;function iF(n,e,t){var r,i,s,o,a,l,u=0,h=!1,p=!1,v=!0;if(typeof n!="function")throw new TypeError(tF);e=n5(e)||0,eF(t)&&(h=!!t.leading,p="maxWait"in t,s=p?nF(n5(t.maxWait)||0,e):s,v="trailing"in t?!!t.trailing:v);function m(de){var fe=r,N=i;return r=i=void 0,u=de,o=n.apply(N,fe),o}function C(de){return u=de,a=setTimeout(A,e),h?m(de):o}function E(de){var fe=de-l,N=de-u,z=e-fe;return p?rF(z,s-N):z}function k(de){var fe=de-l,N=de-u;return l===void 0||fe>=e||fe<0||p&&N>=s}function A(){var de=X1();if(k(de))return D(de);a=setTimeout(A,E(de))}function D(de){return a=void 0,v&&r?m(de):(r=i=void 0,o)}function R(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function W(){return a===void 0?o:D(X1())}function Q(){var de=X1(),fe=k(de);if(r=arguments,i=this,l=de,fe){if(a===void 0)return C(l);if(p)return clearTimeout(a),a=setTimeout(A,e),m(l)}return a===void 0&&(a=setTimeout(A,e)),o}return Q.cancel=R,Q.flush=W,Q}var sF=iF;const oF=$_(sF),aF={class:"relative w-full"},lF={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},uF=["onClick"],r5=Ms({__name:"SearchBar",emits:["select-location"],setup(n,{emit:e}){const t=wt(""),r=wt([]),i=e,s=oF(async l=>{if(l.length<3){r.value=[];return}try{const h=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=h}catch(u){console.error("Erreur lors de la recherche d'adresse:",u),r.value=[]}},300);function o(){s(t.value)}function a(l){t.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,u)=>(Ne(),Re("div",aF,[Pn(x("input",{"onUpdate:modelValue":u[0]||(u[0]=h=>t.value=h),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Ar,t.value]]),r.value.length>0?(Ne(),Re("div",lF,[(Ne(!0),Re(wn,null,Wn(r.value,h=>(Ne(),Re("div",{key:h.place_id,onClick:p=>a(h),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},kt(h.display_name),9,uF))),128))])):Jt("",!0)]))}}),cF={class:"perf-title"},dF={class:"perf-basic-stats"},hF={class:"perf-stat"},fF={class:"perf-stat"},pF={class:"perf-expand-btn"},gF={key:0,class:"perf-content"},mF={class:"perf-section"},vF={class:"perf-metrics"},yF={class:"perf-metric"},bF={class:"perf-metric-value"},_F={class:"perf-metric"},wF={class:"perf-metric-value"},xF={class:"perf-metric"},LF={class:"perf-metric-value"},CF={class:"perf-metric"},SF={class:"perf-metric-value"},EF={class:"perf-section"},MF={class:"perf-metrics"},PF={key:0,class:"perf-metric"},kF={class:"perf-metric-value"},AF={key:1,class:"perf-metric"},TF={class:"perf-metric-value"},DF={key:2,class:"perf-metric"},OF={class:"perf-metric-value"},NF={class:"perf-section"},IF={class:"perf-table"},BF={class:"perf-table-cell"},RF={class:"perf-table-cell"},FF={class:"perf-table-cell"},jF={class:"perf-table-cell"},zF=["onClick"],$F={key:0,class:"perf-empty"},UF=Ms({__name:"PerformancePanel",props:{position:{}},setup(n){const t=n.position||"bottom-left",r=wt(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:a,memorySnapshots:l,framesPerSecond:u,operationHistory:h,startRecording:p,stopRecording:v,clearRecording:m,captureMemorySnapshot:C,getSlowOperations:E,getPerformanceReport:k,getOperationDetails:A}=Hp(),D=Gn(()=>{const B=k()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:B.totalMeasures,totalLongTasks:B.totalLongTasks,averageDuration:B.slowestOperations.length>0?B.slowestOperations.reduce((G,$)=>G+$.duration,0)/B.slowestOperations.length:0,fps:B.averageFps,slowestOperations:B.slowestOperations,memoryUsage:B.memoryUsage}}),R=Gn(()=>(k()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(G=>({operation:G.name,component:G.component||"unknown",durationMs:G.duration,timestamp:G.startTime}))),W=wt(null);Ss(()=>{i.value&&(W.value=window.setInterval(()=>{C()},1e3))}),Jl(()=>{W.value!==null&&clearInterval(W.value)});function Q(B){return B===void 0?"N/A":B<1024?B+" B":B<1024*1024?(B/1024).toFixed(2)+" KB":B<1024*1024*1024?(B/(1024*1024)).toFixed(2)+" MB":(B/(1024*1024*1024)).toFixed(2)+" GB"}function de(B){return B.toFixed(2)}const fe=()=>{C()};function N(){const B=k(),G="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(B,null,2)),$=document.createElement("a");$.setAttribute("href",G),$.setAttribute("download","performance_report.json"),document.body.appendChild($),$.click(),$.remove()}function z(){m(),fe()}function J(){const B=k();navigator.clipboard.writeText(JSON.stringify(B,null,2)).then(()=>{alert("Données de performance copiées dans le presse-papiers")}).catch(G=>{console.error("Erreur lors de la copie des données",G),alert("Erreur lors de la copie des données")})}async function U(B){const G=A(B.operation,B.timestamp);if(!G){alert("Impossible de trouver les détails de cette opération");return}const $={operation:{...G.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(G.operation.startTime).toISOString()},context:{...G.context,relatedOperations:G.context.relatedOperations.map(F=>({...F,startTime:`+${F.startTime.toFixed(2)}ms`})),longTasks:G.context.longTasks.map(F=>({...F,startTime:`+${F.startTime.toFixed(2)}ms`})),memorySnapshots:G.context.memorySnapshots.map(F=>({...F,timestamp:`+${F.timestamp.toFixed(2)}ms`,usedJSHeapSize:F.usedJSHeapSize?Q(F.usedJSHeapSize):"N/A",totalJSHeapSize:F.totalJSHeapSize?Q(F.totalJSHeapSize):"N/A"}))},summary:{...G.summary,memoryDelta:Q(G.summary.memoryDelta),maxLongTaskDuration:`${G.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify($,null,2)),alert("Détails de l'opération copiés dans le presse-papiers")}catch(F){console.error("Erreur lors de la copie des détails",F),alert("Erreur lors de la copie des détails")}}return(B,G)=>{var $,F,I,X,K,ve;return yn(i)?(Ne(),Re("div",{key:0,class:xi(["performance-panel",`position-${yn(t)}`,{expanded:r.value}])},[x("div",{class:"perf-header",onClick:G[0]||(G[0]=ge=>r.value=!r.value)},[x("div",cF,[x("div",{class:xi(["perf-indicator",{active:yn(s)}])},null,2),G[1]||(G[1]=x("span",null,"Performance",-1))]),x("div",dF,[x("span",hF,kt(D.value.fps)+" FPS",1),x("span",fF,kt(de(D.value.averageDuration))+"ms",1)]),x("button",pF,kt(r.value?"▼":"▲"),1)]),r.value?(Ne(),Re("div",gF,[x("div",mF,[G[6]||(G[6]=x("h3",null,"Métriques générales",-1)),x("div",vF,[x("div",yF,[G[2]||(G[2]=x("span",{class:"perf-metric-label"},"Mesures",-1)),x("span",bF,kt(D.value.totalMeasures),1)]),x("div",_F,[G[3]||(G[3]=x("span",{class:"perf-metric-label"},"Tâches longues",-1)),x("span",wF,kt(D.value.totalLongTasks),1)]),x("div",xF,[G[4]||(G[4]=x("span",{class:"perf-metric-label"},"Durée moyenne",-1)),x("span",LF,kt(de(D.value.averageDuration))+"ms",1)]),x("div",CF,[G[5]||(G[5]=x("span",{class:"perf-metric-label"},"FPS",-1)),x("span",SF,kt(D.value.fps),1)])])]),x("div",EF,[G[10]||(G[10]=x("h3",null,"Mémoire",-1)),x("div",MF,[(($=D.value.memoryUsage)==null?void 0:$.usedJSHeapSize)!==void 0?(Ne(),Re("div",PF,[G[7]||(G[7]=x("span",{class:"perf-metric-label"},"Utilisée",-1)),x("span",kF,kt(Q((F=D.value.memoryUsage)==null?void 0:F.usedJSHeapSize)),1)])):Jt("",!0),((I=D.value.memoryUsage)==null?void 0:I.totalJSHeapSize)!==void 0?(Ne(),Re("div",AF,[G[8]||(G[8]=x("span",{class:"perf-metric-label"},"Totale",-1)),x("span",TF,kt(Q((X=D.value.memoryUsage)==null?void 0:X.totalJSHeapSize)),1)])):Jt("",!0),((K=D.value.memoryUsage)==null?void 0:K.jsHeapSizeLimit)!==void 0?(Ne(),Re("div",DF,[G[9]||(G[9]=x("span",{class:"perf-metric-label"},"Limite",-1)),x("span",OF,kt(Q((ve=D.value.memoryUsage)==null?void 0:ve.jsHeapSizeLimit)),1)])):Jt("",!0)])]),x("div",NF,[G[13]||(G[13]=x("h3",null,"Opérations les plus lentes",-1)),x("div",IF,[G[12]||(G[12]=Kl('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opération</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Durée</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Ne(!0),Re(wn,null,Wn(R.value,ge=>(Ne(),Re("div",{class:"perf-table-row",key:ge.timestamp},[x("div",BF,kt(ge.operation),1),x("div",RF,kt(ge.component),1),x("div",FF,kt(de(ge.durationMs))+"ms",1),x("div",jF,[x("button",{onClick:He=>U(ge),class:"perf-action-button",title:"Copier les détails"},G[11]||(G[11]=[x("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,zF)])]))),128)),R.value.length===0?(Ne(),Re("div",$F," Aucune opération enregistrée ")):Jt("",!0)])]),x("div",{class:"perf-actions"},[x("button",{onClick:z,class:"perf-button"}," Réinitialiser "),x("button",{onClick:N,class:"perf-button"}," Télécharger "),x("button",{onClick:J,class:"perf-button"}," Copier ")])])):Jt("",!0)],2)):Jt("",!0)}}}),ad=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},VF=ad(UF,[["__scopeId","data-v-fefe39b0"]]),HF={key:0,class:"pwa-update-notification"},GF=Ms({__name:"PWAUpdateNotification",setup(n,{expose:e}){const t=wt(!1),r=async()=>{window.location.reload(),t.value=!1},i=()=>{t.value=!1};return e({showUpdateNotification:t,refreshApp:r,closeNotification:i}),(s,o)=>t.value?(Ne(),Re("div",HF,[x("div",{class:"pwa-update-content"},[o[0]||(o[0]=x("p",null,"Une nouvelle version est disponible",-1)),x("div",{class:"pwa-update-actions"},[x("button",{onClick:r,class:"pwa-update-button"},"Mettre à jour"),x("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):Jt("",!0)}}),WF=ad(GF,[["__scopeId","data-v-aa687693"]]),qF="/static/frontend/img/icons/android-chrome-192x192.png",YF={class:"prompt-content"},KF={class:"prompt-body"},ZF={key:0,class:"install-instructions ios"},XF={key:1,class:"install-instructions android"},JF={key:2,class:"install-instructions desktop"},QF={key:3,class:"install-instructions desktop"},e9=Ms({__name:"PWAInstallPrompt",setup(n){const e=wt(!1),t=wt(!1),r=wt(null);wt(null);const i=wt(!1),s=wt(!1),o=wt(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const m=localStorage.getItem("pwaPromptLastClosed");if(!m)return!1;const C=3*24*60*60*1e3;return Date.now()-parseInt(m)<C},u=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),r.value=m,e.value=!0,t.value=!0}),window.addEventListener("appinstalled",m=>{console.log("Application installée avec succès",m),e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,t.value=!0},3e3))},h=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};Ss(()=>{u()}),Th(()=>{h()});const p=async()=>{if(!r.value){console.log("Installation non disponible");return}try{r.value.prompt();const m=await r.value.userChoice;r.value=null,m.outcome==="accepted"?(console.log("Installation acceptée"),e.value=!1):console.log("Installation refusée")}catch(m){console.error("Erreur lors de l'installation:",m)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(m,C)=>e.value?(Ne(),Re("div",{key:0,class:xi(["pwa-install-prompt",{fullscreen:t.value}])},[x("div",YF,[x("div",{class:"prompt-header"},[C[1]||(C[1]=x("div",{class:"app-info"},[x("img",{src:qF,alt:"TagMap Logo",class:"app-logo"}),x("div",{class:"app-details"},[x("h2",null,"Installer TagMap"),x("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),x("button",{onClick:v,class:"close-button","aria-label":"Fermer"},C[0]||(C[0]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[x("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),x("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),x("div",KF,[i.value?(Ne(),Re("div",ZF,C[2]||(C[2]=[Kl('<h3 data-v-48772823>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Partager</strong> <span class="ios-share-icon" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-48772823></path><polyline points="16 6 12 2 8 6" data-v-48772823></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-48772823></line></svg></span></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Faites défiler et appuyez sur <strong data-v-48772823>Sur l&#39;écran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>3</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Ajouter</strong> en haut à droite</p></div></div>',4)]))):s.value?(Ne(),Re("div",XF,[C[3]||(C[3]=x("h3",null,"Pour installer l'application sur votre appareil :",-1)),C[4]||(C[4]=x("div",{class:"instruction-step"},[x("div",{class:"step-number"},"1"),x("div",{class:"step-content"},[x("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),x("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Ne(),Re("div",JF,[C[5]||(C[5]=x("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),C[6]||(C[6]=x("div",{class:"instruction-step"},[x("div",{class:"step-number"},"1"),x("div",{class:"step-content"},[x("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),x("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Ne(),Re("div",QF,C[7]||(C[7]=[Kl('<h3 data-v-48772823>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur l&#39;icône d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),x("div",{class:"prompt-footer"},[C[8]||(C[8]=Kl('<div class="benefits" data-v-48772823><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-48772823></path></svg><span data-v-48772823>Sécurisé</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><circle cx="12" cy="12" r="10" data-v-48772823></circle><polyline points="12 6 12 12 16 14" data-v-48772823></polyline></svg><span data-v-48772823>Rapide</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-48772823></path></svg><span data-v-48772823>Hors ligne</span></div></div>',1)),x("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):Jt("",!0)}}),t9=ad(e9,[["__scopeId","data-v-48772823"]]),n9={class:"app-container"},r9={key:0,class:"app-header bg-white shadow-sm z-[2500] flex-shrink-0"},i9={class:"mx-auto px-4 sm:px-6 lg:px-8"},s9={class:"flex h-16 items-center justify-between"},o9={class:"flex items-center"},a9={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},l9={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},u9={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},c9={class:"hidden md:flex md:ml-6 space-x-8"},d9={key:0,class:"flex-1 mx-2"},h9={class:"hidden md:block"},f9={class:"md:hidden"},p9={key:1,class:"flex-1"},g9={class:"flex items-center space-x-2 md:space-x-4"},m9={class:"relative"},v9={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},y9={class:"flex items-center justify-between w-full"},b9={class:"flex items-center space-x-3"},_9={class:"max-h-72 overflow-y-auto"},w9={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},x9={class:"flex items-start"},L9={class:"flex-shrink-0 mr-3"},C9={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},S9={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},E9={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},M9={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},P9={class:"flex-1"},k9={class:"text-sm md:text-sm text-gray-800"},A9=["onClick"],T9={class:"relative"},D9={class:"hidden md:flex flex-col items-end"},O9={class:"text-sm font-medium text-gray-700"},N9={key:0,class:"text-xs text-gray-500"},I9=["src","alt"],B9={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},R9={class:"text-sm font-semibold text-gray-700"},F9={class:"text-xs text-gray-500"},j9={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},z9={class:"space-y-1 px-2 pb-3 pt-2"},$9={class:"app-main"},U9=Ms({__name:"App",setup(n){const e=Bm(),t=ro(),r=eu(),i=wt(!1),s=wt(!1),o=wt(!1),a=wt(!1),l=wt(null),u=wt(!1),h=wt(!1),p=wt(null),v=wt("13px"),m=wt("65px"),C=wt(null),E=wt(null),k=wt(!1);function A(){h.value=window.innerWidth<768}Ss(()=>{A(),window.addEventListener("resize",A),window.addEventListener("resize",D),window.addEventListener("pwa-update-available",()=>{k.value=!0})}),Th(()=>{window.removeEventListener("resize",A),window.removeEventListener("resize",D),window.removeEventListener("pwa-update-available",()=>{})});function D(){if(!p.value)return;const F=p.value.getBoundingClientRect();v.value=`${F.top+window.scrollY+5}px`;const I=F.left+F.width/2;m.value=`${window.innerWidth-I-22}px`}const R=Gn(()=>{const F=t.user;if(!F)return"";const I=`${F.first_name} ${F.last_name.toUpperCase()}`;return F.company_name?`${I} (${F.company_name})`:I}),W=Gn(()=>{var I;switch((I=t.user)==null?void 0:I.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),Q=Gn(()=>{var F;return((F=t.user)==null?void 0:F.user_type)==="admin"}),de=Gn(()=>t.isAuthenticated),fe=[{name:"Carte",to:"/"},{name:"Météo",to:"/meteo"},{name:"Notes",to:"/notes"}],N=Gn(()=>{var I;if(!de.value)return[];const F=[...fe];return(Q.value||((I=t.user)==null?void 0:I.user_type)==="entreprise")&&F.push({name:"Utilisateurs",to:"/users"}),F}),z=Gn(()=>de.value?[{name:"Mon profil",to:"/profile"}]:[]);async function J(){try{await t.logout(),e.push("/login")}catch(F){console.error("Erreur lors de la déconnexion:",F)}}function U(F){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:F.lat,lng:F.lng,zoom:16}}))}Ss(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await t.checkAuth(),await t.fetchUserProfile();const I=localStorage.getItem("lastPlanId");I&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:I}}))}else console.log("No token found")}catch(F){console.error("Auth check error:",F),e.push("/login")}});const B=Gn(()=>{const F="TagMap";if(!de.value)return`${F} - Connexion`;const I=e.currentRoute.value,K={home:"Carte",meteo:"Météo",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[I.name]||"";return K?`${F} - ${K}`:F});ai(B,F=>{document.title=F},{immediate:!0});const G=Gn(()=>r.notifications.length);function $(){r.clearAll(),o.value=!1}return pm(()=>{if(r.lastAddedId!==null){const F=r.notifications.find(I=>I.id===r.lastAddedId);F&&Zo(()=>{D(),a.value=!0,l.value={id:F.id,message:F.message,type:F.type},requestAnimationFrame(()=>{setTimeout(()=>{u.value=!0,setTimeout(()=>{u.value=!1,setTimeout(()=>{var I;((I=l.value)==null?void 0:I.id)===F.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(F,I)=>{var X;return Ne(),Re("div",n9,[de.value?(Ne(),Re("header",r9,[x("nav",i9,[x("div",s9,[x("div",o9,[x("button",{onClick:I[0]||(I[0]=K=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[I[7]||(I[7]=x("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Ne(),Re("svg",a9,[s.value?(Ne(),Re("path",u9)):(Ne(),Re("path",l9))]))]),ni(yn(xg),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Gu(()=>I[8]||(I[8]=[x("span",{class:"md:inline hidden"},"TagMap",-1),x("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),x("div",c9,[(Ne(!0),Re(wn,null,Wn(N.value,K=>(Ne(),Vo(yn(xg),{key:K.name,to:K.to,class:xi(["text-sm font-medium transition-colors duration-200",[F.$route.path===K.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Gu(()=>[qr(kt(K.name),1)]),_:2},1032,["to","class"]))),128))])]),F.$route.path==="/"?(Ne(),Re("div",d9,[x("div",h9,[ni(r5,{onSelectLocation:U})]),x("div",f9,[ni(r5,{onSelectLocation:U,class:"max-w-full"})])])):(Ne(),Re("div",p9)),x("div",g9,[x("div",m9,[x("button",{ref_key:"bellButtonRef",ref:p,onClick:I[1]||(I[1]=K=>o.value=!o.value),class:xi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},I[9]||(I[9]=[x("span",{class:"sr-only"},"Voir les notifications",-1),x("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Ne(),Re("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Xl(h.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[x("div",v9,[x("div",y9,[I[11]||(I[11]=x("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),x("div",b9,[G.value>0?(Ne(),Re("button",{key:0,onClick:$,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):Jt("",!0),x("button",{onClick:I[2]||(I[2]=K=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},I[10]||(I[10]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),x("div",_9,[G.value===0?(Ne(),Re("div",w9," Aucune notification ")):Jt("",!0),(Ne(!0),Re(wn,null,Wn(yn(r).notifications,K=>(Ne(),Re("div",{key:K.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[x("div",x9,[x("div",L9,[K.type==="success"?(Ne(),Re("svg",C9,I[12]||(I[12]=[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):K.type==="error"?(Ne(),Re("svg",S9,I[13]||(I[13]=[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):K.type==="warning"?(Ne(),Re("svg",E9,I[14]||(I[14]=[x("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Ne(),Re("svg",M9,I[15]||(I[15]=[x("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),x("div",P9,[x("p",k9,kt(K.message),1),x("button",{onClick:ve=>yn(r).removeNotification(K.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,A9)])])]))),128))])],4)):Jt("",!0)]),x("div",T9,[x("button",{onClick:I[3]||(I[3]=K=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[x("div",D9,[x("span",O9,kt(R.value),1),W.value?(Ne(),Re("span",N9,kt(W.value),1)):Jt("",!0)]),x("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((X=yn(t).user)==null?void 0:X.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(R.value),alt:R.value},null,8,I9)]),i.value?(Ne(),Re("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Xl(h.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[x("div",B9,[x("div",null,[x("div",R9,kt(R.value),1),x("div",F9,kt(W.value),1)]),x("button",{onClick:I[4]||(I[4]=K=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},I[16]||(I[16]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Ne(!0),Re(wn,null,Wn(z.value,K=>(Ne(),Vo(yn(xg),{key:K.name,to:K.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:I[5]||(I[5]=ve=>i.value=!1)},{default:Gu(()=>[qr(kt(K.name),1)]),_:2},1032,["to"]))),128)),x("button",{onClick:J,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):Jt("",!0)])])]),s.value?(Ne(),Re("div",j9,[x("div",z9,[(Ne(!0),Re(wn,null,Wn(N.value,K=>(Ne(),Vo(yn(xg),{key:K.name,to:K.to,class:xi(["block px-3 py-2 rounded-md text-base font-medium",[F.$route.path===K.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:I[6]||(I[6]=ve=>s.value=!1)},{default:Gu(()=>[qr(kt(K.name),1)]),_:2},1032,["to","class"]))),128))])])):Jt("",!0)])])):Jt("",!0),x("main",$9,[ni(yn(SE))]),ni(VF,{position:"bottom-left"}),ni(WF,{ref_key:"pwaUpdateNotification",ref:C},null,512),ni(t9,{ref_key:"pwaInstallPrompt",ref:E},null,512)])}}}),V9="modulepreload",H9=function(n){return"/static/frontend/"+n},i5={},Od=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=H9(l),l in i5)return;i5[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":V9,u||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((v,m)=>{p.addEventListener("load",v),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},G9={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},W9={class:"max-w-md w-full space-y-8"},q9={class:"space-y-4"},Y9={class:"mt-1"},K9={class:"mt-1"},Z9={class:"mt-1"},X9={key:0,class:"rounded-md bg-red-50 p-4"},J9={class:"flex"},Q9={class:"ml-3"},ej={class:"text-sm font-medium text-red-800"},tj={key:1,class:"rounded-md bg-yellow-50 p-4"},nj={class:"flex"},rj={class:"ml-3"},ij={class:"mt-2 text-sm text-yellow-700"},sj={class:"list-disc pl-5 space-y-1"},oj=["disabled"],aj={class:"absolute left-0 inset-y-0 flex items-center pl-3"},lj={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},uj={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},cj=Ms({__name:"ChangePasswordForm",setup(n){const e=Bm(),t=ro(),r=tu({oldPassword:"",newPassword:"",confirmPassword:""}),i=wt(!1),s=wt("");Ss(()=>{var u,h;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:t.isAuthenticated,userId:(u=t.user)==null?void 0:u.id,mustChangePassword:(h=t.user)==null?void 0:h.must_change_password})});const o=Gn(()=>{const u=[];return r.newPassword&&r.newPassword.length<8&&u.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&u.push("Les mots de passe ne correspondent pas"),u}),a=Gn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var u,h,p,v,m,C,E,k;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((u=t.user)!=null&&u.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await t.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(A){console.error("Password change failed:",A),(p=(h=A.response)==null?void 0:h.data)!=null&&p.detail?s.value=A.response.data.detail:(m=(v=A.response)==null?void 0:v.data)!=null&&m.old_password?s.value=A.response.data.old_password[0]:(E=(C=A.response)==null?void 0:C.data)!=null&&E.password?s.value=A.response.data.password[0]:((k=A.response)==null?void 0:k.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await t.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(u,h)=>(Ne(),Re("div",G9,[x("div",W9,[h[12]||(h[12]=x("div",null,[x("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),x("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),x("form",{class:"mt-8 space-y-6",onSubmit:Zl(l,["prevent"])},[x("div",q9,[x("div",null,[h[3]||(h[3]=x("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),x("div",Y9,[Pn(x("input",{id:"old-password","onUpdate:modelValue":h[0]||(h[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Ar,r.oldPassword]])])]),x("div",null,[h[4]||(h[4]=x("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),x("div",K9,[Pn(x("input",{id:"new-password","onUpdate:modelValue":h[1]||(h[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Ar,r.newPassword]])]),h[5]||(h[5]=x("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),x("div",null,[h[6]||(h[6]=x("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),x("div",Z9,[Pn(x("input",{id:"confirm-password","onUpdate:modelValue":h[2]||(h[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Ar,r.confirmPassword]])])])]),s.value?(Ne(),Re("div",X9,[x("div",J9,[h[7]||(h[7]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),x("div",Q9,[x("h3",ej,kt(s.value),1)])])])):Jt("",!0),o.value.length>0?(Ne(),Re("div",tj,[x("div",nj,[h[9]||(h[9]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),x("div",rj,[h[8]||(h[8]=x("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),x("div",ij,[x("ul",sj,[(Ne(!0),Re(wn,null,Wn(o.value,(p,v)=>(Ne(),Re("li",{key:v},kt(p),1))),128))])])])])])):Jt("",!0),x("div",null,[x("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[x("span",aj,[i.value?(Ne(),Re("svg",uj,h[11]||(h[11]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ne(),Re("svg",lj,h[10]||(h[10]=[x("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),qr(" "+kt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,oj)])],32)])]))}}),dj="/static/frontend/assets/background.svg",hj={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},fj={class:"container mx-auto relative z-10"},pj={class:"sm:mx-auto sm:w-full sm:max-w-md"},gj={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},mj={key:0,class:"rounded-md bg-red-50 p-4"},vj={class:"flex"},yj={class:"ml-3"},bj={class:"text-sm font-medium text-red-800"},_j={class:"mt-1"},wj={class:"mt-1 relative"},xj=["type"],Lj={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Cj={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Sj={class:"flex items-center justify-between"},Ej={class:"flex items-center"},Mj={class:"text-sm"},Pj=["disabled"],kj={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Aj={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Tj={class:"mt-12"},Dj={class:"flex flex-wrap justify-center gap-2 mb-8"},Oj=["onClick"],Nj={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ij={class:"flex items-center mb-4"},Bj={class:"text-2xl mr-2"},Rj={class:"text-xl font-semibold text-gray-900"},Fj={class:"text-gray-600 text-sm"},jj={key:0,class:"flex justify-center mt-8 gap-2"},zj=["onClick"],J1=6,$j=Ms({__name:"LoginView",setup(n){const e=Bm(),t=ro(),r=wt(!1),i=wt(null),s=wt(!1),o=wt("Tous"),a=wt(1),l=tu({username:"",password:"",rememberMe:!1}),u=[{type:"Liniculteur",sector:"Agriculture",icon:"🌾",text:"En tant qu'entreprise, j'ai mis en place un sous-compte « agriculteur » permettant la géolocalisation des parcelles. Cela offre à nos salariés et prestataires une visibilité complète sur l'ensemble des parcelles et facilite leur accès. De plus, ils peuvent y ajouter des notes et des photos si nécessaire. Grâce aux trackers, nous renforçons également la sécurité de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"🏭",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrôler l'accès de nos salariés aux différentes tâches."},{type:"Agence de voyage",sector:"Tourisme",icon:"✈️",text:"L'outil nous permet de créer gratuitement et sans limite des sous-comptes clients, d'établir des itinéraires personnalisés avec des points d'intérêt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"🌱",text:"Nous disposons d'un compte entreprise avec des sous-comptes dédiés à chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grâce aux stations météo connectées, nous optimisons la gestion des tours d'irrigation par secteur géographique en fonction des précipitations."},{type:"Conseil municipal",sector:"Collectivité",icon:"🏛️",text:"Cette solution nous permet de gagner en efficacité dans la gestion des tâches à réaliser, en les géolocalisant et en offrant à nos employés communaux la possibilité d'ajouter des commentaires et des photos sur chaque tâche géoréférencée."},{type:"Location de matériel",sector:"Services",icon:"🚜",text:"Cette solution nous permet de géolocaliser notre flotte grâce à des trackers sans abonnement, avec uniquement un abonnement à la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"👨‍🌾",text:"J'ai équipé tous mes canons d'enrouleurs de trackers et de caméras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"🌱",text:"Nous assurons la géolocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"💧",text:"Nous avons géolocalisé tous les forages de nos clients et ajouté en commentaire la procédure d'entrée, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"🌳",text:"Nous géolocalisons tous nos chantiers et ajoutons une photo du chantier terminé en commentaire, servant de preuve en cas de litige."}],h=Gn(()=>["Tous",...new Set(u.map(E=>E.sector))]),p=Gn(()=>{let C=o.value==="Tous"?u:u.filter(A=>A.sector===o.value);const E=(a.value-1)*J1,k=E+J1;return C.slice(E,k)}),v=Gn(()=>{const C=o.value==="Tous"?u:u.filter(E=>E.sector===o.value);return Math.ceil(C.length/J1)});Ss(async()=>{var C;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((C=window.INITIAL_STATE)!=null&&C.isAuthenticated){console.log("User is authenticated, redirecting to home"),e.push("/");return}await t.restoreSession()&&(console.log("Session restored, redirecting to home"),e.push("/"))}catch(E){console.error("Error during initialization:",E),i.value=null}});async function m(){var C,E,k,A,D,R,W,Q,de;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await t.login(l.username,l.password),(C=t.user)!=null&&C.must_change_password?e.push("/change-password"):e.push("/")}catch(fe){console.error("Login error:",fe),((E=fe==null?void 0:fe.response)==null?void 0:E.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((k=fe==null?void 0:fe.response)==null?void 0:k.status)===401||((A=fe==null?void 0:fe.response)==null?void 0:A.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(R=(D=fe==null?void 0:fe.response)==null?void 0:D.data)!=null&&R.detail?i.value=fe.response.data.detail:(de=(Q=(W=fe==null?void 0:fe.response)==null?void 0:W.data)==null?void 0:Q.non_field_errors)!=null&&de[0]?i.value=fe.response.data.non_field_errors[0]:(fe==null?void 0:fe.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(C,E)=>{const k=EC("router-link");return Ne(),Re("div",hj,[x("div",{class:"fixed inset-0 z-0",style:Xl({backgroundImage:`url(${yn(dj)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),E[16]||(E[16]=x("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),x("div",fj,[x("div",pj,[x("div",gj,[E[12]||(E[12]=x("div",{class:"text-center mb-8"},[x("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),x("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),x("form",{class:"space-y-6",onSubmit:Zl(m,["prevent"])},[i.value?(Ne(),Re("div",mj,[x("div",vj,[E[4]||(E[4]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),x("div",yj,[x("h3",bj,kt(i.value),1)])])])):Jt("",!0),x("div",null,[E[5]||(E[5]=x("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),x("div",_j,[Pn(x("input",{id:"username","onUpdate:modelValue":E[0]||(E[0]=A=>l.username=A),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Ar,l.username]])])]),x("div",null,[E[8]||(E[8]=x("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),x("div",wj,[Pn(x("input",{id:"password","onUpdate:modelValue":E[1]||(E[1]=A=>l.password=A),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,xj),[[N_,l.password]]),x("button",{type:"button",onClick:E[2]||(E[2]=A=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Ne(),Re("svg",Lj,E[6]||(E[6]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Ne(),Re("svg",Cj,E[7]||(E[7]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),x("div",Sj,[x("div",Ej,[Pn(x("input",{id:"remember-me","onUpdate:modelValue":E[3]||(E[3]=A=>l.rememberMe=A),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[wl,l.rememberMe]]),E[9]||(E[9]=x("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),x("div",Mj,[ni(k,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Gu(()=>E[10]||(E[10]=[qr(" Mot de passe oublié ? ")])),_:1})])]),x("div",null,[x("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Ne(),Re("svg",kj,E[11]||(E[11]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),qr(" "+kt(r.value?"Connexion en cours...":"Se connecter"),1)],8,Pj)])],32)])]),x("div",Aj,[E[14]||(E[14]=Kl('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>💡</span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>Équipements Connectés sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>📍</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Géolocalisez et sécurisez votre matériel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>🌤️</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station météo</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos décisions avec des données en temps réel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👀📌</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive où tout est sous contrôle ! Tout est centralisé, organisé et accessible en un clin d&#39;œil !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👥💻🔄</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Réel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;équipe simplifié : Collaborez en temps réel sur une interface ultra-intuitive. Vos équipes restent synchronisées et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🚜📸</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🔐🔑</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accès Sécurisé</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accès sécurisé et intelligent : Gérez les droits d&#39;accès de vos salariés et prestataires en un clic.</p></div></div>',2)),x("div",Tj,[E[13]||(E[13]=x("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),x("div",Dj,[(Ne(!0),Re(wn,null,Wn(h.value,A=>(Ne(),Re("button",{key:A,onClick:D=>o.value=A,class:xi(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},kt(A),11,Oj))),128))]),x("div",Nj,[(Ne(!0),Re(wn,null,Wn(p.value,A=>(Ne(),Re("div",{key:A.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[x("div",Ij,[x("span",Bj,kt(A.icon),1),x("span",Rj,kt(A.type),1)]),x("p",Fj,kt(A.text),1)]))),128))]),v.value>1?(Ne(),Re("div",jj,[(Ne(!0),Re(wn,null,Wn(v.value,A=>(Ne(),Re("button",{key:A,onClick:D=>a.value=A,class:xi(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},kt(A),11,zj))),128))])):Jt("",!0)])]),E[15]||(E[15]=x("div",{class:"h-16"},null,-1))])])}}}),Uj=ad($j,[["__scopeId","data-v-9ff7ee32"]]),Vj="/static/frontend/assets/logo.svg";var y2={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(n,e){(function(t,r){r(e)})(ga,function(t){var r="1.9.4";function i(c){var y,M,q,ue;for(M=1,q=arguments.length;M<q;M++){ue=arguments[M];for(y in ue)c[y]=ue[y]}return c}var s=Object.create||function(){function c(){}return function(y){return c.prototype=y,new c}}();function o(c,y){var M=Array.prototype.slice;if(c.bind)return c.bind.apply(c,M.call(arguments,1));var q=M.call(arguments,2);return function(){return c.apply(y,q.length?q.concat(M.call(arguments)):arguments)}}var a=0;function l(c){return"_leaflet_id"in c||(c._leaflet_id=++a),c._leaflet_id}function u(c,y,M){var q,ue,Pe,ct;return ct=function(){q=!1,ue&&(Pe.apply(M,ue),ue=!1)},Pe=function(){q?ue=arguments:(c.apply(M,arguments),setTimeout(ct,y),q=!0)},Pe}function h(c,y,M){var q=y[1],ue=y[0],Pe=q-ue;return c===q&&M?c:((c-ue)%Pe+Pe)%Pe+ue}function p(){return!1}function v(c,y){if(y===!1)return c;var M=Math.pow(10,y===void 0?6:y);return Math.round(c*M)/M}function m(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function C(c){return m(c).split(/\s+/)}function E(c,y){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?s(c.options):{});for(var M in y)c.options[M]=y[M];return c.options}function k(c,y,M){var q=[];for(var ue in c)q.push(encodeURIComponent(M?ue.toUpperCase():ue)+"="+encodeURIComponent(c[ue]));return(!y||y.indexOf("?")===-1?"?":"&")+q.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function D(c,y){return c.replace(A,function(M,q){var ue=y[q];if(ue===void 0)throw new Error("No value provided for variable "+M);return typeof ue=="function"&&(ue=ue(y)),ue})}var R=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function W(c,y){for(var M=0;M<c.length;M++)if(c[M]===y)return M;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function de(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var fe=0;function N(c){var y=+new Date,M=Math.max(0,16-(y-fe));return fe=y+M,window.setTimeout(c,M)}var z=window.requestAnimationFrame||de("RequestAnimationFrame")||N,J=window.cancelAnimationFrame||de("CancelAnimationFrame")||de("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function U(c,y,M){if(M&&z===N)c.call(y);else return z.call(window,o(c,y))}function B(c){c&&J.call(window,c)}var G={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:u,wrapNum:h,falseFn:p,formatNum:v,trim:m,splitWords:C,setOptions:E,getParamString:k,template:D,isArray:R,indexOf:W,emptyImageUrl:Q,requestFn:z,cancelFn:J,requestAnimFrame:U,cancelAnimFrame:B};function $(){}$.extend=function(c){var y=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},M=y.__super__=this.prototype,q=s(M);q.constructor=y,y.prototype=q;for(var ue in this)Object.prototype.hasOwnProperty.call(this,ue)&&ue!=="prototype"&&ue!=="__super__"&&(y[ue]=this[ue]);return c.statics&&i(y,c.statics),c.includes&&(F(c.includes),i.apply(null,[q].concat(c.includes))),i(q,c),delete q.statics,delete q.includes,q.options&&(q.options=M.options?s(M.options):{},i(q.options,c.options)),q._initHooks=[],q.callInitHooks=function(){if(!this._initHooksCalled){M.callInitHooks&&M.callInitHooks.call(this),this._initHooksCalled=!0;for(var Pe=0,ct=q._initHooks.length;Pe<ct;Pe++)q._initHooks[Pe].call(this)}},y},$.include=function(c){var y=this.prototype.options;return i(this.prototype,c),c.options&&(this.prototype.options=y,this.mergeOptions(c.options)),this},$.mergeOptions=function(c){return i(this.prototype.options,c),this},$.addInitHook=function(c){var y=Array.prototype.slice.call(arguments,1),M=typeof c=="function"?c:function(){this[c].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(M),this};function F(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=R(c)?c:[c];for(var y=0;y<c.length;y++)c[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var I={on:function(c,y,M){if(typeof c=="object")for(var q in c)this._on(q,c[q],y);else{c=C(c);for(var ue=0,Pe=c.length;ue<Pe;ue++)this._on(c[ue],y,M)}return this},off:function(c,y,M){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var q in c)this._off(q,c[q],y);else{c=C(c);for(var ue=arguments.length===1,Pe=0,ct=c.length;Pe<ct;Pe++)ue?this._off(c[Pe]):this._off(c[Pe],y,M)}return this},_on:function(c,y,M,q){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(c,y,M)===!1){M===this&&(M=void 0);var ue={fn:y,ctx:M};q&&(ue.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(ue)}},_off:function(c,y,M){var q,ue,Pe;if(this._events&&(q=this._events[c],!!q)){if(arguments.length===1){if(this._firingCount)for(ue=0,Pe=q.length;ue<Pe;ue++)q[ue].fn=p;delete this._events[c];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var ct=this._listens(c,y,M);if(ct!==!1){var Nt=q[ct];this._firingCount&&(Nt.fn=p,this._events[c]=q=q.slice()),q.splice(ct,1)}}},fire:function(c,y,M){if(!this.listens(c,M))return this;var q=i({},y,{type:c,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var ue=this._events[c];if(ue){this._firingCount=this._firingCount+1||1;for(var Pe=0,ct=ue.length;Pe<ct;Pe++){var Nt=ue[Pe],Gt=Nt.fn;Nt.once&&this.off(c,Gt,Nt.ctx),Gt.call(Nt.ctx||this,q)}this._firingCount--}}return M&&this._propagateEvent(q),this},listens:function(c,y,M,q){typeof c!="string"&&console.warn('"string" type argument expected');var ue=y;typeof y!="function"&&(q=!!y,ue=void 0,M=void 0);var Pe=this._events&&this._events[c];if(Pe&&Pe.length&&this._listens(c,ue,M)!==!1)return!0;if(q){for(var ct in this._eventParents)if(this._eventParents[ct].listens(c,y,M,q))return!0}return!1},_listens:function(c,y,M){if(!this._events)return!1;var q=this._events[c]||[];if(!y)return!!q.length;M===this&&(M=void 0);for(var ue=0,Pe=q.length;ue<Pe;ue++)if(q[ue].fn===y&&q[ue].ctx===M)return ue;return!1},once:function(c,y,M){if(typeof c=="object")for(var q in c)this._on(q,c[q],y,!0);else{c=C(c);for(var ue=0,Pe=c.length;ue<Pe;ue++)this._on(c[ue],y,M,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[l(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[l(c)],this},_propagateEvent:function(c){for(var y in this._eventParents)this._eventParents[y].fire(c.type,i({layer:c.target,propagatedFrom:c.target},c),!0)}};I.addEventListener=I.on,I.removeEventListener=I.clearAllEventListeners=I.off,I.addOneTimeEventListener=I.once,I.fireEvent=I.fire,I.hasEventListeners=I.listens;var X=$.extend(I);function K(c,y,M){this.x=M?Math.round(c):c,this.y=M?Math.round(y):y}var ve=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(c){return this.clone()._add(ge(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(ge(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new K(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new K(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ve(this.x),this.y=ve(this.y),this},distanceTo:function(c){c=ge(c);var y=c.x-this.x,M=c.y-this.y;return Math.sqrt(y*y+M*M)},equals:function(c){return c=ge(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=ge(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ge(c,y,M){return c instanceof K?c:R(c)?new K(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new K(c.x,c.y):new K(c,y,M)}function He(c,y){if(c)for(var M=y?[c,y]:c,q=0,ue=M.length;q<ue;q++)this.extend(M[q])}He.prototype={extend:function(c){var y,M;if(!c)return this;if(c instanceof K||typeof c[0]=="number"||"x"in c)y=M=ge(c);else if(c=ie(c),y=c.min,M=c.max,!y||!M)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=M.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(M.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(M.y,this.max.y)),this},getCenter:function(c){return ge((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return ge(this.min.x,this.max.y)},getTopRight:function(){return ge(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var y,M;return typeof c[0]=="number"||c instanceof K?c=ge(c):c=ie(c),c instanceof He?(y=c.min,M=c.max):y=M=c,y.x>=this.min.x&&M.x<=this.max.x&&y.y>=this.min.y&&M.y<=this.max.y},intersects:function(c){c=ie(c);var y=this.min,M=this.max,q=c.min,ue=c.max,Pe=ue.x>=y.x&&q.x<=M.x,ct=ue.y>=y.y&&q.y<=M.y;return Pe&&ct},overlaps:function(c){c=ie(c);var y=this.min,M=this.max,q=c.min,ue=c.max,Pe=ue.x>y.x&&q.x<M.x,ct=ue.y>y.y&&q.y<M.y;return Pe&&ct},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var y=this.min,M=this.max,q=Math.abs(y.x-M.x)*c,ue=Math.abs(y.y-M.y)*c;return ie(ge(y.x-q,y.y-ue),ge(M.x+q,M.y+ue))},equals:function(c){return c?(c=ie(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function ie(c,y){return!c||c instanceof He?c:new He(c,y)}function Ce(c,y){if(c)for(var M=y?[c,y]:c,q=0,ue=M.length;q<ue;q++)this.extend(M[q])}Ce.prototype={extend:function(c){var y=this._southWest,M=this._northEast,q,ue;if(c instanceof H)q=c,ue=c;else if(c instanceof Ce){if(q=c._southWest,ue=c._northEast,!q||!ue)return this}else return c?this.extend(ee(c)||_e(c)):this;return!y&&!M?(this._southWest=new H(q.lat,q.lng),this._northEast=new H(ue.lat,ue.lng)):(y.lat=Math.min(q.lat,y.lat),y.lng=Math.min(q.lng,y.lng),M.lat=Math.max(ue.lat,M.lat),M.lng=Math.max(ue.lng,M.lng)),this},pad:function(c){var y=this._southWest,M=this._northEast,q=Math.abs(y.lat-M.lat)*c,ue=Math.abs(y.lng-M.lng)*c;return new Ce(new H(y.lat-q,y.lng-ue),new H(M.lat+q,M.lng+ue))},getCenter:function(){return new H((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new H(this.getNorth(),this.getWest())},getSouthEast:function(){return new H(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof H||"lat"in c?c=ee(c):c=_e(c);var y=this._southWest,M=this._northEast,q,ue;return c instanceof Ce?(q=c.getSouthWest(),ue=c.getNorthEast()):q=ue=c,q.lat>=y.lat&&ue.lat<=M.lat&&q.lng>=y.lng&&ue.lng<=M.lng},intersects:function(c){c=_e(c);var y=this._southWest,M=this._northEast,q=c.getSouthWest(),ue=c.getNorthEast(),Pe=ue.lat>=y.lat&&q.lat<=M.lat,ct=ue.lng>=y.lng&&q.lng<=M.lng;return Pe&&ct},overlaps:function(c){c=_e(c);var y=this._southWest,M=this._northEast,q=c.getSouthWest(),ue=c.getNorthEast(),Pe=ue.lat>y.lat&&q.lat<M.lat,ct=ue.lng>y.lng&&q.lng<M.lng;return Pe&&ct},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,y){return c?(c=_e(c),this._southWest.equals(c.getSouthWest(),y)&&this._northEast.equals(c.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function _e(c,y){return c instanceof Ce?c:new Ce(c,y)}function H(c,y,M){if(isNaN(c)||isNaN(y))throw new Error("Invalid LatLng object: ("+c+", "+y+")");this.lat=+c,this.lng=+y,M!==void 0&&(this.alt=+M)}H.prototype={equals:function(c,y){if(!c)return!1;c=ee(c);var M=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return M<=(y===void 0?1e-9:y)},toString:function(c){return"LatLng("+v(this.lat,c)+", "+v(this.lng,c)+")"},distanceTo:function(c){return re.distance(this,ee(c))},wrap:function(){return re.wrapLatLng(this)},toBounds:function(c){var y=180*c/40075017,M=y/Math.cos(Math.PI/180*this.lat);return _e([this.lat-y,this.lng-M],[this.lat+y,this.lng+M])},clone:function(){return new H(this.lat,this.lng,this.alt)}};function ee(c,y,M){return c instanceof H?c:R(c)&&typeof c[0]!="object"?c.length===3?new H(c[0],c[1],c[2]):c.length===2?new H(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new H(c.lat,"lng"in c?c.lng:c.lon,c.alt):y===void 0?null:new H(c,y,M)}var pe={latLngToPoint:function(c,y){var M=this.projection.project(c),q=this.scale(y);return this.transformation._transform(M,q)},pointToLatLng:function(c,y){var M=this.scale(y),q=this.transformation.untransform(c,M);return this.projection.unproject(q)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var y=this.projection.bounds,M=this.scale(c),q=this.transformation.transform(y.min,M),ue=this.transformation.transform(y.max,M);return new He(q,ue)},infinite:!1,wrapLatLng:function(c){var y=this.wrapLng?h(c.lng,this.wrapLng,!0):c.lng,M=this.wrapLat?h(c.lat,this.wrapLat,!0):c.lat,q=c.alt;return new H(M,y,q)},wrapLatLngBounds:function(c){var y=c.getCenter(),M=this.wrapLatLng(y),q=y.lat-M.lat,ue=y.lng-M.lng;if(q===0&&ue===0)return c;var Pe=c.getSouthWest(),ct=c.getNorthEast(),Nt=new H(Pe.lat-q,Pe.lng-ue),Gt=new H(ct.lat-q,ct.lng-ue);return new Ce(Nt,Gt)}},re=i({},pe,{wrapLng:[-180,180],R:6371e3,distance:function(c,y){var M=Math.PI/180,q=c.lat*M,ue=y.lat*M,Pe=Math.sin((y.lat-c.lat)*M/2),ct=Math.sin((y.lng-c.lng)*M/2),Nt=Pe*Pe+Math.cos(q)*Math.cos(ue)*ct*ct,Gt=2*Math.atan2(Math.sqrt(Nt),Math.sqrt(1-Nt));return this.R*Gt}}),ae=6378137,De={R:ae,MAX_LATITUDE:85.0511287798,project:function(c){var y=Math.PI/180,M=this.MAX_LATITUDE,q=Math.max(Math.min(M,c.lat),-M),ue=Math.sin(q*y);return new K(this.R*c.lng*y,this.R*Math.log((1+ue)/(1-ue))/2)},unproject:function(c){var y=180/Math.PI;return new H((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*y,c.x*y/this.R)},bounds:function(){var c=ae*Math.PI;return new He([-c,-c],[c,c])}()};function be(c,y,M,q){if(R(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=y,this._c=M,this._d=q}be.prototype={transform:function(c,y){return this._transform(c.clone(),y)},_transform:function(c,y){return y=y||1,c.x=y*(this._a*c.x+this._b),c.y=y*(this._c*c.y+this._d),c},untransform:function(c,y){return y=y||1,new K((c.x/y-this._b)/this._a,(c.y/y-this._d)/this._c)}};function Ie(c,y,M,q){return new be(c,y,M,q)}var le=i({},re,{code:"EPSG:3857",projection:De,transformation:function(){var c=.5/(Math.PI*De.R);return Ie(c,.5,-c,.5)}()}),me=i({},le,{code:"EPSG:900913"});function oe(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Z(c,y){var M="",q,ue,Pe,ct,Nt,Gt;for(q=0,Pe=c.length;q<Pe;q++){for(Nt=c[q],ue=0,ct=Nt.length;ue<ct;ue++)Gt=Nt[ue],M+=(ue?"L":"M")+Gt.x+" "+Gt.y;M+=y?Kt.svg?"z":"x":""}return M||"M0 0"}var Ae=document.documentElement.style,je="ActiveXObject"in window,Ke=je&&!document.addEventListener,Me="msLaunchUri"in navigator&&!("documentMode"in document),he=Ln("webkit"),We=Ln("android"),at=Ln("android 2")||Ln("android 3"),ut=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ct=We&&Ln("Google")&&ut<537&&!("AudioNode"in window),Xe=!!window.opera,zt=!Me&&Ln("chrome"),qt=Ln("gecko")&&!he&&!Xe&&!je,Qe=!zt&&Ln("safari"),ot=Ln("phantom"),it="OTransition"in Ae,At=navigator.platform.indexOf("Win")===0,Yt=je&&"transition"in Ae,bn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!at,xn="MozPerspective"in Ae,En=!window.L_DISABLE_3D&&(Yt||bn||xn)&&!it&&!ot,$n=typeof orientation<"u"||Ln("mobile"),Sn=$n&&he,an=$n&&bn,mn=!window.PointerEvent&&window.MSPointerEvent,tr=!!(window.PointerEvent||mn),ar="ontouchstart"in window||!!window.TouchEvent,mr=!window.L_NO_TOUCH&&(ar||tr),zn=$n&&Xe,kr=$n&&qt,as=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ni=function(){var c=!1;try{var y=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return c}(),io=function(){return!!document.createElement("canvas").getContext}(),Ps=!!(document.createElementNS&&oe("svg").createSVGRect),Zn=!!Ps&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),bt=!Ps&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var y=c.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),rt=navigator.platform.indexOf("Mac")===0,Vt=navigator.platform.indexOf("Linux")===0;function Ln(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var Kt={ie:je,ielt9:Ke,edge:Me,webkit:he,android:We,android23:at,androidStock:Ct,opera:Xe,chrome:zt,gecko:qt,safari:Qe,phantom:ot,opera12:it,win:At,ie3d:Yt,webkit3d:bn,gecko3d:xn,any3d:En,mobile:$n,mobileWebkit:Sn,mobileWebkit3d:an,msPointer:mn,pointer:tr,touch:mr,touchNative:ar,mobileOpera:zn,mobileGecko:kr,retina:as,passiveEvents:Ni,canvas:io,svg:Ps,vml:bt,inlineSvg:Zn,mac:rt,linux:Vt},rn=Kt.msPointer?"MSPointerDown":"pointerdown",Zt=Kt.msPointer?"MSPointerMove":"pointermove",qn=Kt.msPointer?"MSPointerUp":"pointerup",St=Kt.msPointer?"MSPointerCancel":"pointercancel",gn={touchstart:rn,touchmove:Zt,touchend:qn,touchcancel:St},nr={touchstart:ls,touchmove:fr,touchend:fr,touchcancel:fr},Vn={},dr=!1;function Cn(c,y,M){return y==="touchstart"&&Or(),nr[y]?(M=nr[y].bind(this,M),c.addEventListener(gn[y],M,!1),M):(console.warn("wrong event specified:",y),p)}function fn(c,y,M){if(!gn[y]){console.warn("wrong event specified:",y);return}c.removeEventListener(gn[y],M,!1)}function li(c){Vn[c.pointerId]=c}function Ci(c){Vn[c.pointerId]&&(Vn[c.pointerId]=c)}function Si(c){delete Vn[c.pointerId]}function Or(){dr||(document.addEventListener(rn,li,!0),document.addEventListener(Zt,Ci,!0),document.addEventListener(qn,Si,!0),document.addEventListener(St,Si,!0),dr=!0)}function fr(c,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var M in Vn)y.touches.push(Vn[M]);y.changedTouches=[y],c(y)}}function ls(c,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&_r(y),fr(c,y)}function us(c){var y={},M,q;for(q in c)M=c[q],y[q]=M&&M.bind?M.bind(c):M;return c=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var Ai=200;function ks(c,y){c.addEventListener("dblclick",y);var M=0,q;function ue(Pe){if(Pe.detail!==1){q=Pe.detail;return}if(!(Pe.pointerType==="mouse"||Pe.sourceCapabilities&&!Pe.sourceCapabilities.firesTouchEvents)){var ct=dl(Pe);if(!(ct.some(function(Gt){return Gt instanceof HTMLLabelElement&&Gt.attributes.for})&&!ct.some(function(Gt){return Gt instanceof HTMLInputElement||Gt instanceof HTMLSelectElement}))){var Nt=Date.now();Nt-M<=Ai?(q++,q===2&&y(us(Pe))):q=1,M=Nt}}}return c.addEventListener("click",ue),{dblclick:y,simDblclick:ue}}function bs(c,y){c.removeEventListener("dblclick",y.dblclick),c.removeEventListener("click",y.simDblclick)}var Ki=El(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),zs=El(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Io=zs==="webkitTransition"||zs==="OTransition"?zs+"End":"transitionend";function cs(c){return typeof c=="string"?document.getElementById(c):c}function br(c,y){var M=c.style[y]||c.currentStyle&&c.currentStyle[y];if((!M||M==="auto")&&document.defaultView){var q=document.defaultView.getComputedStyle(c,null);M=q?q[y]:null}return M==="auto"?null:M}function Tr(c,y,M){var q=document.createElement(c);return q.className=y||"",M&&M.appendChild(q),q}function pr(c){var y=c.parentNode;y&&y.removeChild(c)}function ea(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function lr(c){var y=c.parentNode;y&&y.lastChild!==c&&y.appendChild(c)}function Ei(c){var y=c.parentNode;y&&y.firstChild!==c&&y.insertBefore(c,y.firstChild)}function Zi(c,y){if(c.classList!==void 0)return c.classList.contains(y);var M=$s(c);return M.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(M)}function ur(c,y){if(c.classList!==void 0)for(var M=C(y),q=0,ue=M.length;q<ue;q++)c.classList.add(M[q]);else if(!Zi(c,y)){var Pe=$s(c);ol(c,(Pe?Pe+" ":"")+y)}}function ei(c,y){c.classList!==void 0?c.classList.remove(y):ol(c,m((" "+$s(c)+" ").replace(" "+y+" "," ")))}function ol(c,y){c.className.baseVal===void 0?c.className=y:c.className.baseVal=y}function $s(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function Us(c,y){"opacity"in c.style?c.style.opacity=y:"filter"in c.style&&Xu(c,y)}function Xu(c,y){var M=!1,q="DXImageTransform.Microsoft.Alpha";try{M=c.filters.item(q)}catch{if(y===1)return}y=Math.round(y*100),M?(M.Enabled=y!==100,M.Opacity=y):c.style.filter+=" progid:"+q+"(opacity="+y+")"}function El(c){for(var y=document.documentElement.style,M=0;M<c.length;M++)if(c[M]in y)return c[M];return!1}function Da(c,y,M){var q=y||new K(0,0);c.style[Ki]=(Kt.ie3d?"translate("+q.x+"px,"+q.y+"px)":"translate3d("+q.x+"px,"+q.y+"px,0)")+(M?" scale("+M+")":"")}function Hi(c,y){c._leaflet_pos=y,Kt.any3d?Da(c,y):(c.style.left=y.x+"px",c.style.top=y.y+"px")}function ta(c){return c._leaflet_pos||new K(0,0)}var al,Bo,Eu;if("onselectstart"in document)al=function(){xr(window,"selectstart",_r)},Bo=function(){Xr(window,"selectstart",_r)};else{var ll=El(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);al=function(){if(ll){var c=document.documentElement.style;Eu=c[ll],c[ll]="none"}},Bo=function(){ll&&(document.documentElement.style[ll]=Eu,Eu=void 0)}}function Ju(){xr(window,"dragstart",_r)}function na(){Xr(window,"dragstart",_r)}var Oa,ul;function ru(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(_s(),Oa=c,ul=c.style.outlineStyle,c.style.outlineStyle="none",xr(window,"keydown",_s))}function _s(){Oa&&(Oa.style.outlineStyle=ul,Oa=void 0,ul=void 0,Xr(window,"keydown",_s))}function Tc(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Mu(c){var y=c.getBoundingClientRect();return{x:y.width/c.offsetWidth||1,y:y.height/c.offsetHeight||1,boundingClientRect:y}}var vr={__proto__:null,TRANSFORM:Ki,TRANSITION:zs,TRANSITION_END:Io,get:cs,getStyle:br,create:Tr,remove:pr,empty:ea,toFront:lr,toBack:Ei,hasClass:Zi,addClass:ur,removeClass:ei,setClass:ol,getClass:$s,setOpacity:Us,testProp:El,setTransform:Da,setPosition:Hi,getPosition:ta,get disableTextSelection(){return al},get enableTextSelection(){return Bo},disableImageDrag:Ju,enableImageDrag:na,preventOutline:ru,restoreOutline:_s,getSizedParentNode:Tc,getScale:Mu};function xr(c,y,M,q){if(y&&typeof y=="object")for(var ue in y)Pl(c,ue,y[ue],M);else{y=C(y);for(var Pe=0,ct=y.length;Pe<ct;Pe++)Pl(c,y[Pe],M,q)}return this}var ra="_leaflet_events";function Xr(c,y,M,q){if(arguments.length===1)Qu(c),delete c[ra];else if(y&&typeof y=="object")for(var ue in y)ia(c,ue,y[ue],M);else if(y=C(y),arguments.length===2)Qu(c,function(Nt){return W(y,Nt)!==-1});else for(var Pe=0,ct=y.length;Pe<ct;Pe++)ia(c,y[Pe],M,q);return this}function Qu(c,y){for(var M in c[ra]){var q=M.split(/\d/)[0];(!y||y(q))&&ia(c,q,null,null,M)}}var Ml={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pl(c,y,M,q){var ue=y+l(M)+(q?"_"+l(q):"");if(c[ra]&&c[ra][ue])return this;var Pe=function(Nt){return M.call(q||c,Nt||window.event)},ct=Pe;!Kt.touchNative&&Kt.pointer&&y.indexOf("touch")===0?Pe=Cn(c,y,Pe):Kt.touch&&y==="dblclick"?Pe=ks(c,Pe):"addEventListener"in c?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?c.addEventListener(Ml[y]||y,Pe,Kt.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(Pe=function(Nt){Nt=Nt||window.event,kl(c,Nt)&&ct(Nt)},c.addEventListener(Ml[y],Pe,!1)):c.addEventListener(y,ct,!1):c.attachEvent("on"+y,Pe),c[ra]=c[ra]||{},c[ra][ue]=Pe}function ia(c,y,M,q,ue){ue=ue||y+l(M)+(q?"_"+l(q):"");var Pe=c[ra]&&c[ra][ue];if(!Pe)return this;!Kt.touchNative&&Kt.pointer&&y.indexOf("touch")===0?fn(c,y,Pe):Kt.touch&&y==="dblclick"?bs(c,Pe):"removeEventListener"in c?c.removeEventListener(Ml[y]||y,Pe,!1):c.detachEvent("on"+y,Pe),c[ra][ue]=null}function cl(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function ec(c){return Pl(c,"wheel",cl),this}function iu(c){return xr(c,"mousedown touchstart dblclick contextmenu",cl),c._leaflet_disable_click=!0,this}function _r(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function Fr(c){return _r(c),cl(c),this}function dl(c){if(c.composedPath)return c.composedPath();for(var y=[],M=c.target;M;)y.push(M),M=M.parentNode;return y}function Dc(c,y){if(!y)return new K(c.clientX,c.clientY);var M=Mu(y),q=M.boundingClientRect;return new K((c.clientX-q.left)/M.x-y.clientLeft,(c.clientY-q.top)/M.y-y.clientTop)}var su=Kt.linux&&Kt.chrome?window.devicePixelRatio:Kt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Pu(c){return Kt.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/su:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function kl(c,y){var M=y.relatedTarget;if(!M)return!0;try{for(;M&&M!==c;)M=M.parentNode}catch{return!1}return M!==c}var ou={__proto__:null,on:xr,off:Xr,stopPropagation:cl,disableScrollPropagation:ec,disableClickPropagation:iu,preventDefault:_r,stop:Fr,getPropagationPath:dl,getMousePosition:Dc,getWheelDelta:Pu,isExternalTarget:kl,addListener:xr,removeListener:Xr},ku=X.extend({run:function(c,y,M,q){this.stop(),this._el=c,this._inProgress=!0,this._duration=M||.25,this._easeOutPower=1/Math.max(q||.5,.2),this._startPos=ta(c),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(c){var y=+new Date-this._startTime,M=this._duration*1e3;y<M?this._runFrame(this._easeOut(y/M),c):(this._runFrame(1),this._complete())},_runFrame:function(c,y){var M=this._startPos.add(this._offset.multiplyBy(c));y&&M._round(),Hi(this._el,M),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Ur=X.extend({options:{crs:le,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,y){y=E(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(ee(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=zs&&Kt.any3d&&!Kt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),xr(this._proxy,Io,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,y,M){if(y=y===void 0?this._zoom:this._limitZoom(y),c=this._limitCenter(ee(c),y,this.options.maxBounds),M=M||{},this._stop(),this._loaded&&!M.reset&&M!==!0){M.animate!==void 0&&(M.zoom=i({animate:M.animate},M.zoom),M.pan=i({animate:M.animate,duration:M.duration},M.pan));var q=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,y,M.zoom):this._tryAnimatedPan(c,M.pan);if(q)return clearTimeout(this._sizeTimer),this}return this._resetView(c,y,M.pan&&M.pan.noMoveStart),this},setZoom:function(c,y){return this._loaded?this.setView(this.getCenter(),c,{zoom:y}):(this._zoom=c,this)},zoomIn:function(c,y){return c=c||(Kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,y)},zoomOut:function(c,y){return c=c||(Kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,y)},setZoomAround:function(c,y,M){var q=this.getZoomScale(y),ue=this.getSize().divideBy(2),Pe=c instanceof K?c:this.latLngToContainerPoint(c),ct=Pe.subtract(ue).multiplyBy(1-1/q),Nt=this.containerPointToLatLng(ue.add(ct));return this.setView(Nt,y,{zoom:M})},_getBoundsCenterZoom:function(c,y){y=y||{},c=c.getBounds?c.getBounds():_e(c);var M=ge(y.paddingTopLeft||y.padding||[0,0]),q=ge(y.paddingBottomRight||y.padding||[0,0]),ue=this.getBoundsZoom(c,!1,M.add(q));if(ue=typeof y.maxZoom=="number"?Math.min(y.maxZoom,ue):ue,ue===1/0)return{center:c.getCenter(),zoom:ue};var Pe=q.subtract(M).divideBy(2),ct=this.project(c.getSouthWest(),ue),Nt=this.project(c.getNorthEast(),ue),Gt=this.unproject(ct.add(Nt).divideBy(2).add(Pe),ue);return{center:Gt,zoom:ue}},fitBounds:function(c,y){if(c=_e(c),!c.isValid())throw new Error("Bounds are not valid.");var M=this._getBoundsCenterZoom(c,y);return this.setView(M.center,M.zoom,y)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,y){return this.setView(c,this._zoom,{pan:y})},panBy:function(c,y){if(c=ge(c).round(),y=y||{},!c.x&&!c.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ku,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){ur(this._mapPane,"leaflet-pan-anim");var M=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,M,y.duration||.25,y.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,y,M){if(M=M||{},M.animate===!1||!Kt.any3d)return this.setView(c,y,M);this._stop();var q=this.project(this.getCenter()),ue=this.project(c),Pe=this.getSize(),ct=this._zoom;c=ee(c),y=y===void 0?ct:y;var Nt=Math.max(Pe.x,Pe.y),Gt=Nt*this.getZoomScale(ct,y),ln=ue.distanceTo(q)||1,In=1.42,Xn=In*In;function Dr(ii){var Zs=ii?-1:1,Fe=ii?Gt:Nt,Co=Gt*Gt-Nt*Nt+Zs*Xn*Xn*ln*ln,rc=2*Fe*Xn*ln,Bs=Co/rc,Br=Math.sqrt(Bs*Bs+1)-Bs,Hd=Br<1e-9?-18:Math.log(Br);return Hd}function ps(ii){return(Math.exp(ii)-Math.exp(-ii))/2}function Gi(ii){return(Math.exp(ii)+Math.exp(-ii))/2}function Is(ii){return ps(ii)/Gi(ii)}var Fi=Dr(0);function Lo(ii){return Nt*(Gi(Fi)/Gi(Fi+In*ii))}function cd(ii){return Nt*(Gi(Fi)*Is(Fi+In*ii)-ps(Fi))/Xn}function Ea(ii){return 1-Math.pow(1-ii,1.5)}var ca=Date.now(),qo=(Dr(1)-Fi)/In,Oh=M.duration?1e3*M.duration:1e3*qo*.8;function Du(){var ii=(Date.now()-ca)/Oh,Zs=Ea(ii)*qo;ii<=1?(this._flyToFrame=U(Du,this),this._move(this.unproject(q.add(ue.subtract(q).multiplyBy(cd(Zs)/ln)),ct),this.getScaleZoom(Nt/Lo(Zs),ct),{flyTo:!0})):this._move(c,y)._moveEnd(!0)}return this._moveStart(!0,M.noMoveStart),Du.call(this),this},flyToBounds:function(c,y){var M=this._getBoundsCenterZoom(c,y);return this.flyTo(M.center,M.zoom,y)},setMaxBounds:function(c){return c=_e(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var y=this.options.minZoom;return this.options.minZoom=c,this._loaded&&y!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var y=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&y!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,y){this._enforcingBounds=!0;var M=this.getCenter(),q=this._limitCenter(M,this._zoom,_e(c));return M.equals(q)||this.panTo(q,y),this._enforcingBounds=!1,this},panInside:function(c,y){y=y||{};var M=ge(y.paddingTopLeft||y.padding||[0,0]),q=ge(y.paddingBottomRight||y.padding||[0,0]),ue=this.project(this.getCenter()),Pe=this.project(c),ct=this.getPixelBounds(),Nt=ie([ct.min.add(M),ct.max.subtract(q)]),Gt=Nt.getSize();if(!Nt.contains(Pe)){this._enforcingBounds=!0;var ln=Pe.subtract(Nt.getCenter()),In=Nt.extend(Pe).getSize().subtract(Gt);ue.x+=ln.x<0?-In.x:In.x,ue.y+=ln.y<0?-In.y:In.y,this.panTo(this.unproject(ue),y),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=i({animate:!1,pan:!0},c===!0?{animate:!0}:c);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var M=this.getSize(),q=y.divideBy(2).round(),ue=M.divideBy(2).round(),Pe=q.subtract(ue);return!Pe.x&&!Pe.y?this:(c.animate&&c.pan?this.panBy(Pe):(c.pan&&this._rawPanBy(Pe),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:M}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=i({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),M=o(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,M,c):navigator.geolocation.getCurrentPosition(y,M,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var y=c.code,M=c.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+M+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var y=c.coords.latitude,M=c.coords.longitude,q=new H(y,M),ue=q.toBounds(c.coords.accuracy*2),Pe=this._locateOptions;if(Pe.setView){var ct=this.getBoundsZoom(ue);this.setView(q,Pe.maxZoom?Math.min(ct,Pe.maxZoom):ct)}var Nt={latlng:q,bounds:ue,timestamp:c.timestamp};for(var Gt in c.coords)typeof c.coords[Gt]=="number"&&(Nt[Gt]=c.coords[Gt]);this.fire("locationfound",Nt)}},addHandler:function(c,y){if(!y)return this;var M=this[c]=new y(this);return this._handlers.push(M),this.options[c]&&M.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)pr(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,y){var M="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),q=Tr("div",M,y||this._mapPane);return c&&(this._panes[c]=q),q},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),y=this.unproject(c.getBottomLeft()),M=this.unproject(c.getTopRight());return new Ce(y,M)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,y,M){c=_e(c),M=ge(M||[0,0]);var q=this.getZoom()||0,ue=this.getMinZoom(),Pe=this.getMaxZoom(),ct=c.getNorthWest(),Nt=c.getSouthEast(),Gt=this.getSize().subtract(M),ln=ie(this.project(Nt,q),this.project(ct,q)).getSize(),In=Kt.any3d?this.options.zoomSnap:1,Xn=Gt.x/ln.x,Dr=Gt.y/ln.y,ps=y?Math.max(Xn,Dr):Math.min(Xn,Dr);return q=this.getScaleZoom(ps,q),In&&(q=Math.round(q/(In/100))*(In/100),q=y?Math.ceil(q/In)*In:Math.floor(q/In)*In),Math.max(ue,Math.min(Pe,q))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,y){var M=this._getTopLeftPoint(c,y);return new He(M,M.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,y){var M=this.options.crs;return y=y===void 0?this._zoom:y,M.scale(c)/M.scale(y)},getScaleZoom:function(c,y){var M=this.options.crs;y=y===void 0?this._zoom:y;var q=M.zoom(c*M.scale(y));return isNaN(q)?1/0:q},project:function(c,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(ee(c),y)},unproject:function(c,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(ge(c),y)},layerPointToLatLng:function(c){var y=ge(c).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(c){var y=this.project(ee(c))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(ee(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(_e(c))},distance:function(c,y){return this.options.crs.distance(ee(c),ee(y))},containerPointToLayerPoint:function(c){return ge(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return ge(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var y=this.containerPointToLayerPoint(ge(c));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ee(c)))},mouseEventToContainerPoint:function(c){return Dc(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var y=this._container=cs(c);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");xr(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&Kt.any3d,ur(c,"leaflet-container"+(Kt.touch?" leaflet-touch":"")+(Kt.retina?" leaflet-retina":"")+(Kt.ielt9?" leaflet-oldie":"")+(Kt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=br(c,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Hi(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ur(c.markerPane,"leaflet-zoom-hide"),ur(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,y,M){Hi(this._mapPane,new K(0,0));var q=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var ue=this._zoom!==y;this._moveStart(ue,M)._move(c,y)._moveEnd(ue),this.fire("viewreset"),q&&this.fire("load")},_moveStart:function(c,y){return c&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(c,y,M,q){y===void 0&&(y=this._zoom);var ue=this._zoom!==y;return this._zoom=y,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),q?M&&M.pinch&&this.fire("zoom",M):((ue||M&&M.pinch)&&this.fire("zoom",M),this.fire("move",M)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Hi(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[l(this._container)]=this;var y=c?Xr:xr;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),Kt.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,y){for(var M=[],q,ue=y==="mouseout"||y==="mouseover",Pe=c.target||c.srcElement,ct=!1;Pe;){if(q=this._targets[l(Pe)],q&&(y==="click"||y==="preclick")&&this._draggableMoved(q)){ct=!0;break}if(q&&q.listens(y,!0)&&(ue&&!kl(Pe,c)||(M.push(q),ue))||Pe===this._container)break;Pe=Pe.parentNode}return!M.length&&!ct&&!ue&&this.listens(y,!0)&&(M=[this]),M},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var y=c.target||c.srcElement;if(!(!this._loaded||y._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(y))){var M=c.type;M==="mousedown"&&ru(y),this._fireDOMEvent(c,M)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,y,M){if(c.type==="click"){var q=i({},c);q.type="preclick",this._fireDOMEvent(q,q.type,M)}var ue=this._findEventTargets(c,y);if(M){for(var Pe=[],ct=0;ct<M.length;ct++)M[ct].listens(y,!0)&&Pe.push(M[ct]);ue=Pe.concat(ue)}if(ue.length){y==="contextmenu"&&_r(c);var Nt=ue[0],Gt={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var ln=Nt.getLatLng&&(!Nt._radius||Nt._radius<=10);Gt.containerPoint=ln?this.latLngToContainerPoint(Nt.getLatLng()):this.mouseEventToContainerPoint(c),Gt.layerPoint=this.containerPointToLayerPoint(Gt.containerPoint),Gt.latlng=ln?Nt.getLatLng():this.layerPointToLatLng(Gt.layerPoint)}for(ct=0;ct<ue.length;ct++)if(ue[ct].fire(y,Gt,!0),Gt.originalEvent._stopped||ue[ct].options.bubblingMouseEvents===!1&&W(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,y=this._handlers.length;c<y;c++)this._handlers[c].disable()},whenReady:function(c,y){return this._loaded?c.call(y||this,{target:this}):this.on("load",c,y),this},_getMapPanePos:function(){return ta(this._mapPane)||new K(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,y){var M=c&&y!==void 0?this._getNewPixelOrigin(c,y):this.getPixelOrigin();return M.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,y){var M=this.getSize()._divideBy(2);return this.project(c,y)._subtract(M)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,y,M){var q=this._getNewPixelOrigin(M,y);return this.project(c,y)._subtract(q)},_latLngBoundsToNewLayerBounds:function(c,y,M){var q=this._getNewPixelOrigin(M,y);return ie([this.project(c.getSouthWest(),y)._subtract(q),this.project(c.getNorthWest(),y)._subtract(q),this.project(c.getSouthEast(),y)._subtract(q),this.project(c.getNorthEast(),y)._subtract(q)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,y,M){if(!M)return c;var q=this.project(c,y),ue=this.getSize().divideBy(2),Pe=new He(q.subtract(ue),q.add(ue)),ct=this._getBoundsOffset(Pe,M,y);return Math.abs(ct.x)<=1&&Math.abs(ct.y)<=1?c:this.unproject(q.add(ct),y)},_limitOffset:function(c,y){if(!y)return c;var M=this.getPixelBounds(),q=new He(M.min.add(c),M.max.add(c));return c.add(this._getBoundsOffset(q,y))},_getBoundsOffset:function(c,y,M){var q=ie(this.project(y.getNorthEast(),M),this.project(y.getSouthWest(),M)),ue=q.min.subtract(c.min),Pe=q.max.subtract(c.max),ct=this._rebound(ue.x,-Pe.x),Nt=this._rebound(ue.y,-Pe.y);return new K(ct,Nt)},_rebound:function(c,y){return c+y>0?Math.round(c-y)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(y))},_limitZoom:function(c){var y=this.getMinZoom(),M=this.getMaxZoom(),q=Kt.any3d?this.options.zoomSnap:1;return q&&(c=Math.round(c/q)*q),Math.max(y,Math.min(M,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ei(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,y){var M=this._getCenterOffset(c)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(M)?!1:(this.panBy(M,y),!0)},_createAnimProxy:function(){var c=this._proxy=Tr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(y){var M=Ki,q=this._proxy.style[M];Da(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),q===this._proxy.style[M]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),y=this.getZoom();Da(this._proxy,this.project(c,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,y,M){if(this._animatingZoom)return!0;if(M=M||{},!this._zoomAnimated||M.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var q=this.getZoomScale(y),ue=this._getCenterOffset(c)._divideBy(1-1/q);return M.animate!==!0&&!this.getSize().contains(ue)?!1:(U(function(){this._moveStart(!0,M.noMoveStart||!1)._animateZoom(c,y,!0)},this),!0)},_animateZoom:function(c,y,M,q){this._mapPane&&(M&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=y,ur(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:y,noUpdate:q}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ei(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ji(c,y){return new Ur(c,y)}var sr=$.extend({options:{position:"topright"},initialize:function(c){E(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var y=this._map;return y&&y.removeControl(this),this.options.position=c,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var y=this._container=this.onAdd(c),M=this.getPosition(),q=c._controlCorners[M];return ur(y,"leaflet-control"),M.indexOf("bottom")!==-1?q.insertBefore(y,q.firstChild):q.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),Qi=function(c){return new sr(c)};Ur.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},y="leaflet-",M=this._controlContainer=Tr("div",y+"control-container",this._container);function q(ue,Pe){var ct=y+ue+" "+y+Pe;c[ue+Pe]=Tr("div",ct,M)}q("top","left"),q("top","right"),q("bottom","left"),q("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)pr(this._controlCorners[c]);pr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Al=sr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,y,M,q){return M<q?-1:q<M?1:0}},initialize:function(c,y,M){E(this,M),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var q in c)this._addLayer(c[q],q);for(q in y)this._addLayer(y[q],q,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return sr.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,y){return this._addLayer(c,y),this._map?this._update():this},addOverlay:function(c,y){return this._addLayer(c,y,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(c));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){ur(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(ur(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):ei(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ei(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",y=this._container=Tr("div",c),M=this.options.collapsed;y.setAttribute("aria-haspopup",!0),iu(y),ec(y);var q=this._section=Tr("section",c+"-list");M&&(this._map.on("click",this.collapse,this),xr(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ue=this._layersLink=Tr("a",c+"-toggle",y);ue.href="#",ue.title="Layers",ue.setAttribute("role","button"),xr(ue,{keydown:function(Pe){Pe.keyCode===13&&this._expandSafely()},click:function(Pe){_r(Pe),this._expandSafely()}},this),M||this.expand(),this._baseLayersList=Tr("div",c+"-base",q),this._separator=Tr("div",c+"-separator",q),this._overlaysList=Tr("div",c+"-overlays",q),y.appendChild(q)},_getLayer:function(c){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===c)return this._layers[y]},_addLayer:function(c,y,M){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:y,overlay:M}),this.options.sortLayers&&this._layers.sort(o(function(q,ue){return this.options.sortFunction(q.layer,ue.layer,q.name,ue.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ea(this._baseLayersList),ea(this._overlaysList),this._layerControlInputs=[];var c,y,M,q,ue=0;for(M=0;M<this._layers.length;M++)q=this._layers[M],this._addItem(q),y=y||q.overlay,c=c||!q.overlay,ue+=q.overlay?0:1;return this.options.hideSingleBase&&(c=c&&ue>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=y&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var y=this._getLayer(l(c.target)),M=y.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;M&&this._map.fire(M,y)},_createRadioElement:function(c,y){var M='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(y?' checked="checked"':"")+"/>",q=document.createElement("div");return q.innerHTML=M,q.firstChild},_addItem:function(c){var y=document.createElement("label"),M=this._map.hasLayer(c.layer),q;c.overlay?(q=document.createElement("input"),q.type="checkbox",q.className="leaflet-control-layers-selector",q.defaultChecked=M):q=this._createRadioElement("leaflet-base-layers_"+l(this),M),this._layerControlInputs.push(q),q.layerId=l(c.layer),xr(q,"click",this._onInputClick,this);var ue=document.createElement("span");ue.innerHTML=" "+c.name;var Pe=document.createElement("span");y.appendChild(Pe),Pe.appendChild(q),Pe.appendChild(ue);var ct=c.overlay?this._overlaysList:this._baseLayersList;return ct.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,y,M,q=[],ue=[];this._handlingClick=!0;for(var Pe=c.length-1;Pe>=0;Pe--)y=c[Pe],M=this._getLayer(y.layerId).layer,y.checked?q.push(M):y.checked||ue.push(M);for(Pe=0;Pe<ue.length;Pe++)this._map.hasLayer(ue[Pe])&&this._map.removeLayer(ue[Pe]);for(Pe=0;Pe<q.length;Pe++)this._map.hasLayer(q[Pe])||this._map.addLayer(q[Pe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,y,M,q=this._map.getZoom(),ue=c.length-1;ue>=0;ue--)y=c[ue],M=this._getLayer(y.layerId).layer,y.disabled=M.options.minZoom!==void 0&&q<M.options.minZoom||M.options.maxZoom!==void 0&&q>M.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,xr(c,"click",_r),this.expand();var y=this;setTimeout(function(){Xr(c,"click",_r),y._preventClick=!1})}}),Na=function(c,y,M){return new Al(c,y,M)},Ii=sr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var y="leaflet-control-zoom",M=Tr("div",y+" leaflet-bar"),q=this.options;return this._zoomInButton=this._createButton(q.zoomInText,q.zoomInTitle,y+"-in",M,this._zoomIn),this._zoomOutButton=this._createButton(q.zoomOutText,q.zoomOutTitle,y+"-out",M,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),M},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,y,M,q,ue){var Pe=Tr("a",M,q);return Pe.innerHTML=c,Pe.href="#",Pe.title=y,Pe.setAttribute("role","button"),Pe.setAttribute("aria-label",y),iu(Pe),xr(Pe,"click",Fr),xr(Pe,"click",ue,this),xr(Pe,"click",this._refocusOnMap,this),Pe},_updateDisabled:function(){var c=this._map,y="leaflet-disabled";ei(this._zoomInButton,y),ei(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(ur(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(ur(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ur.mergeOptions({zoomControl:!0}),Ur.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ii,this.addControl(this.zoomControl))});var Au=function(c){return new Ii(c)},va=sr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var y="leaflet-control-scale",M=Tr("div",y),q=this.options;return this._addScales(q,y+"-line",M),c.on(q.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),M},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,y,M){c.metric&&(this._mScale=Tr("div",y,M)),c.imperial&&(this._iScale=Tr("div",y,M))},_update:function(){var c=this._map,y=c.getSize().y/2,M=c.distance(c.containerPointToLatLng([0,y]),c.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(M)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var y=this._getRoundNum(c),M=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,M,y/c)},_updateImperial:function(c){var y=c*3.2808399,M,q,ue;y>5280?(M=y/5280,q=this._getRoundNum(M),this._updateScale(this._iScale,q+" mi",q/M)):(ue=this._getRoundNum(y),this._updateScale(this._iScale,ue+" ft",ue/y))},_updateScale:function(c,y,M){c.style.width=Math.round(this.options.maxWidth*M)+"px",c.innerHTML=y},_getRoundNum:function(c){var y=Math.pow(10,(Math.floor(c)+"").length-1),M=c/y;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:1,y*M}}),au=function(c){return new va(c)},lu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Go=sr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Kt.inlineSvg?lu+" ":"")+"Leaflet</a>"},initialize:function(c){E(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=Tr("div","leaflet-control-attribution"),iu(this._container);for(var y in c._layers)c._layers[y].getAttribution&&this.addAttribution(c._layers[y].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var y in this._attributions)this._attributions[y]&&c.push(y);var M=[];this.options.prefix&&M.push(this.options.prefix),c.length&&M.push(c.join(", ")),this._container.innerHTML=M.join(' <span aria-hidden="true">|</span> ')}}});Ur.mergeOptions({attributionControl:!0}),Ur.addInitHook(function(){this.options.attributionControl&&new Go().addTo(this)});var uu=function(c){return new Go(c)};sr.Layers=Al,sr.Zoom=Ii,sr.Scale=va,sr.Attribution=Go,Qi.layers=Na,Qi.zoom=Au,Qi.scale=au,Qi.attribution=uu;var ui=$.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ui.addTo=function(c,y){return c.addHandler(y,this),this};var Oc={Events:I},As=Kt.touch?"touchstart mousedown":"mousedown",sa=X.extend({options:{clickTolerance:3},initialize:function(c,y,M,q){E(this,q),this._element=c,this._dragStartTarget=y||c,this._preventOutline=M},enable:function(){this._enabled||(xr(this._dragStartTarget,As,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(sa._dragging===this&&this.finishDrag(!0),Xr(this._dragStartTarget,As,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!Zi(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){sa._dragging===this&&this.finishDrag();return}if(!(sa._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(sa._dragging=this,this._preventOutline&&ru(this._element),Ju(),al(),!this._moving)){this.fire("down");var y=c.touches?c.touches[0]:c,M=Tc(this._element);this._startPoint=new K(y.clientX,y.clientY),this._startPos=ta(this._element),this._parentScale=Mu(M);var q=c.type==="mousedown";xr(document,q?"mousemove":"touchmove",this._onMove,this),xr(document,q?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var y=c.touches&&c.touches.length===1?c.touches[0]:c,M=new K(y.clientX,y.clientY)._subtract(this._startPoint);!M.x&&!M.y||Math.abs(M.x)+Math.abs(M.y)<this.options.clickTolerance||(M.x/=this._parentScale.x,M.y/=this._parentScale.y,_r(c),this._moved||(this.fire("dragstart"),this._moved=!0,ur(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ur(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(M),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Hi(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){ei(document.body,"leaflet-dragging"),this._lastTarget&&(ei(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xr(document,"mousemove touchmove",this._onMove,this),Xr(document,"mouseup touchend touchcancel",this._onUp,this),na(),Bo();var y=this._moved&&this._moving;this._moving=!1,sa._dragging=!1,y&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function cu(c,y,M){var q,ue=[1,4,2,8],Pe,ct,Nt,Gt,ln,In,Xn,Dr;for(Pe=0,In=c.length;Pe<In;Pe++)c[Pe]._code=Ht(c[Pe],y);for(Nt=0;Nt<4;Nt++){for(Xn=ue[Nt],q=[],Pe=0,In=c.length,ct=In-1;Pe<In;ct=Pe++)Gt=c[Pe],ln=c[ct],Gt._code&Xn?ln._code&Xn||(Dr=Pt(ln,Gt,Xn,y,M),Dr._code=Ht(Dr,y),q.push(Dr)):(ln._code&Xn&&(Dr=Pt(ln,Gt,Xn,y,M),Dr._code=Ht(Dr,y),q.push(Dr)),q.push(Gt));c=q}return c}function oa(c,y){var M,q,ue,Pe,ct,Nt,Gt,ln,In;if(!c||c.length===0)throw new Error("latlngs not passed");Rn(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Xn=ee([0,0]),Dr=_e(c),ps=Dr.getNorthWest().distanceTo(Dr.getSouthWest())*Dr.getNorthEast().distanceTo(Dr.getNorthWest());ps<1700&&(Xn=Tl(c));var Gi=c.length,Is=[];for(M=0;M<Gi;M++){var Fi=ee(c[M]);Is.push(y.project(ee([Fi.lat-Xn.lat,Fi.lng-Xn.lng])))}for(Nt=Gt=ln=0,M=0,q=Gi-1;M<Gi;q=M++)ue=Is[M],Pe=Is[q],ct=ue.y*Pe.x-Pe.y*ue.x,Gt+=(ue.x+Pe.x)*ct,ln+=(ue.y+Pe.y)*ct,Nt+=ct*3;Nt===0?In=Is[0]:In=[Gt/Nt,ln/Nt];var Lo=y.unproject(ge(In));return ee([Lo.lat+Xn.lat,Lo.lng+Xn.lng])}function Tl(c){for(var y=0,M=0,q=0,ue=0;ue<c.length;ue++){var Pe=ee(c[ue]);y+=Pe.lat,M+=Pe.lng,q++}return ee([y/q,M/q])}var Dl={__proto__:null,clipPolygon:cu,polygonCenter:oa,centroid:Tl};function ci(c,y){if(!y||!c.length)return c.slice();var M=y*y;return c=xe(c,M),c=es(c,M),c}function Ro(c,y,M){return Math.sqrt(Nn(c,y,M,!0))}function Ia(c,y,M){return Nn(c,y,M)}function es(c,y){var M=c.length,q=typeof Uint8Array<"u"?Uint8Array:Array,ue=new q(M);ue[0]=ue[M-1]=1,j(c,ue,y,0,M-1);var Pe,ct=[];for(Pe=0;Pe<M;Pe++)ue[Pe]&&ct.push(c[Pe]);return ct}function j(c,y,M,q,ue){var Pe=0,ct,Nt,Gt;for(Nt=q+1;Nt<=ue-1;Nt++)Gt=Nn(c[Nt],c[q],c[ue],!0),Gt>Pe&&(ct=Nt,Pe=Gt);Pe>M&&(y[ct]=1,j(c,y,M,q,ct),j(c,y,M,ct,ue))}function xe(c,y){for(var M=[c[0]],q=1,ue=0,Pe=c.length;q<Pe;q++)dn(c[q],c[ue])>y&&(M.push(c[q]),ue=q);return ue<Pe-1&&M.push(c[Pe-1]),M}var et;function ft(c,y,M,q,ue){var Pe=q?et:Ht(c,M),ct=Ht(y,M),Nt,Gt,ln;for(et=ct;;){if(!(Pe|ct))return[c,y];if(Pe&ct)return!1;Nt=Pe||ct,Gt=Pt(c,y,Nt,M,ue),ln=Ht(Gt,M),Nt===Pe?(c=Gt,Pe=ln):(y=Gt,ct=ln)}}function Pt(c,y,M,q,ue){var Pe=y.x-c.x,ct=y.y-c.y,Nt=q.min,Gt=q.max,ln,In;return M&8?(ln=c.x+Pe*(Gt.y-c.y)/ct,In=Gt.y):M&4?(ln=c.x+Pe*(Nt.y-c.y)/ct,In=Nt.y):M&2?(ln=Gt.x,In=c.y+ct*(Gt.x-c.x)/Pe):M&1&&(ln=Nt.x,In=c.y+ct*(Nt.x-c.x)/Pe),new K(ln,In,ue)}function Ht(c,y){var M=0;return c.x<y.min.x?M|=1:c.x>y.max.x&&(M|=2),c.y<y.min.y?M|=4:c.y>y.max.y&&(M|=8),M}function dn(c,y){var M=y.x-c.x,q=y.y-c.y;return M*M+q*q}function Nn(c,y,M,q){var ue=y.x,Pe=y.y,ct=M.x-ue,Nt=M.y-Pe,Gt=ct*ct+Nt*Nt,ln;return Gt>0&&(ln=((c.x-ue)*ct+(c.y-Pe)*Nt)/Gt,ln>1?(ue=M.x,Pe=M.y):ln>0&&(ue+=ct*ln,Pe+=Nt*ln)),ct=c.x-ue,Nt=c.y-Pe,q?ct*ct+Nt*Nt:new K(ue,Pe)}function Rn(c){return!R(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function rr(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Rn(c)}function gr(c,y){var M,q,ue,Pe,ct,Nt,Gt,ln;if(!c||c.length===0)throw new Error("latlngs not passed");Rn(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var In=ee([0,0]),Xn=_e(c),Dr=Xn.getNorthWest().distanceTo(Xn.getSouthWest())*Xn.getNorthEast().distanceTo(Xn.getNorthWest());Dr<1700&&(In=Tl(c));var ps=c.length,Gi=[];for(M=0;M<ps;M++){var Is=ee(c[M]);Gi.push(y.project(ee([Is.lat-In.lat,Is.lng-In.lng])))}for(M=0,q=0;M<ps-1;M++)q+=Gi[M].distanceTo(Gi[M+1])/2;if(q===0)ln=Gi[0];else for(M=0,Pe=0;M<ps-1;M++)if(ct=Gi[M],Nt=Gi[M+1],ue=ct.distanceTo(Nt),Pe+=ue,Pe>q){Gt=(Pe-q)/ue,ln=[Nt.x-Gt*(Nt.x-ct.x),Nt.y-Gt*(Nt.y-ct.y)];break}var Fi=y.unproject(ge(ln));return ee([Fi.lat+In.lat,Fi.lng+In.lng])}var Nr={__proto__:null,simplify:ci,pointToSegmentDistance:Ro,closestPointOnSegment:Ia,clipSegment:ft,_getEdgeIntersection:Pt,_getBitCode:Ht,_sqClosestPointOnSegment:Nn,isFlat:Rn,_flat:rr,polylineCenter:gr},Ti={project:function(c){return new K(c.lng,c.lat)},unproject:function(c){return new H(c.y,c.x)},bounds:new He([-180,-90],[180,90])},ri={R:6378137,R_MINOR:6356752314245179e-9,bounds:new He([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var y=Math.PI/180,M=this.R,q=c.lat*y,ue=this.R_MINOR/M,Pe=Math.sqrt(1-ue*ue),ct=Pe*Math.sin(q),Nt=Math.tan(Math.PI/4-q/2)/Math.pow((1-ct)/(1+ct),Pe/2);return q=-M*Math.log(Math.max(Nt,1e-10)),new K(c.lng*y*M,q)},unproject:function(c){for(var y=180/Math.PI,M=this.R,q=this.R_MINOR/M,ue=Math.sqrt(1-q*q),Pe=Math.exp(-c.y/M),ct=Math.PI/2-2*Math.atan(Pe),Nt=0,Gt=.1,ln;Nt<15&&Math.abs(Gt)>1e-7;Nt++)ln=ue*Math.sin(ct),ln=Math.pow((1-ln)/(1+ln),ue/2),Gt=Math.PI/2-2*Math.atan(Pe*ln)-ct,ct+=Gt;return new H(ct*y,c.x*y/M)}},di={__proto__:null,LonLat:Ti,Mercator:ri,SphericalMercator:De},ts=i({},re,{code:"EPSG:3395",projection:ri,transformation:function(){var c=.5/(Math.PI*ri.R);return Ie(c,.5,-c,.5)}()}),ds=i({},re,{code:"EPSG:4326",projection:Ti,transformation:Ie(1/180,1,-1/180,.5)}),Fo=i({},pe,{projection:Ti,transformation:Ie(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,y){var M=y.lng-c.lng,q=y.lat-c.lat;return Math.sqrt(M*M+q*q)},infinite:!0});pe.Earth=re,pe.EPSG3395=ts,pe.EPSG3857=le,pe.EPSG900913=me,pe.EPSG4326=ds,pe.Simple=Fo;var Ir=X.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[l(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[l(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var y=c.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var M=this.getEvents();y.on(M,this),this.once("remove",function(){y.off(M,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});Ur.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(c);return this._layers[y]?this:(this._layers[y]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var y=l(c);return this._layers[y]?(this._loaded&&c.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return l(c)in this._layers},eachLayer:function(c,y){for(var M in this._layers)c.call(y,this._layers[M]);return this},_addLayers:function(c){c=c?R(c)?c:[c]:[];for(var y=0,M=c.length;y<M;y++)this.addLayer(c[y])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[l(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var y=l(c);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,y=-1/0,M=this._getZoomSpan();for(var q in this._zoomBoundLayers){var ue=this._zoomBoundLayers[q].options;c=ue.minZoom===void 0?c:Math.min(c,ue.minZoom),y=ue.maxZoom===void 0?y:Math.max(y,ue.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=c===1/0?void 0:c,M!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Vs=Ir.extend({initialize:function(c,y){E(this,y),this._layers={};var M,q;if(c)for(M=0,q=c.length;M<q;M++)this.addLayer(c[M])},addLayer:function(c){var y=this.getLayerId(c);return this._layers[y]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var y=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(c){var y=typeof c=="number"?c:this.getLayerId(c);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var y=Array.prototype.slice.call(arguments,1),M,q;for(M in this._layers)q=this._layers[M],q[c]&&q[c].apply(q,y);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,y){for(var M in this._layers)c.call(y,this._layers[M]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return l(c)}}),Ol=function(c,y){return new Vs(c,y)},so=Vs.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),Vs.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),Vs.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new Ce;for(var y in this._layers){var M=this._layers[y];c.extend(M.getBounds?M.getBounds():M.getLatLng())}return c}}),Tu=function(c,y){return new so(c,y)},ya=$.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){E(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,y){var M=this._getIconUrl(c);if(!M){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var q=this._createImg(M,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(q,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(q.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),q},_setIconStyles:function(c,y){var M=this.options,q=M[y+"Size"];typeof q=="number"&&(q=[q,q]);var ue=ge(q),Pe=ge(y==="shadow"&&M.shadowAnchor||M.iconAnchor||ue&&ue.divideBy(2,!0));c.className="leaflet-marker-"+y+" "+(M.className||""),Pe&&(c.style.marginLeft=-Pe.x+"px",c.style.marginTop=-Pe.y+"px"),ue&&(c.style.width=ue.x+"px",c.style.height=ue.y+"px")},_createImg:function(c,y){return y=y||document.createElement("img"),y.src=c,y},_getIconUrl:function(c){return Kt.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function tc(c){return new ya(c)}var hl=ya.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof hl.imagePath!="string"&&(hl.imagePath=this._detectIconPath()),(this.options.imagePath||hl.imagePath)+ya.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var y=function(M,q,ue){var Pe=q.exec(M);return Pe&&Pe[ue]};return c=y(c,/^url\((['"])?(.+)\1\)$/,2),c&&y(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=Tr("div","leaflet-default-icon-path",document.body),y=br(c,"background-image")||br(c,"backgroundImage");if(document.body.removeChild(c),y=this._stripUrl(y),y)return y;var M=document.querySelector('link[href$="leaflet.css"]');return M?M.href.substring(0,M.href.length-11-1):""}}),fl=ui.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new sa(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ur(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ei(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var y=this._marker,M=y._map,q=this._marker.options.autoPanSpeed,ue=this._marker.options.autoPanPadding,Pe=ta(y._icon),ct=M.getPixelBounds(),Nt=M.getPixelOrigin(),Gt=ie(ct.min._subtract(Nt).add(ue),ct.max._subtract(Nt).subtract(ue));if(!Gt.contains(Pe)){var ln=ge((Math.max(Gt.max.x,Pe.x)-Gt.max.x)/(ct.max.x-Gt.max.x)-(Math.min(Gt.min.x,Pe.x)-Gt.min.x)/(ct.min.x-Gt.min.x),(Math.max(Gt.max.y,Pe.y)-Gt.max.y)/(ct.max.y-Gt.max.y)-(Math.min(Gt.min.y,Pe.y)-Gt.min.y)/(ct.min.y-Gt.min.y)).multiplyBy(q);M.panBy(ln,{animate:!1}),this._draggable._newPos._add(ln),this._draggable._startPos._add(ln),Hi(y._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=U(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,c)))},_onDrag:function(c){var y=this._marker,M=y._shadow,q=ta(y._icon),ue=y._map.layerPointToLatLng(q);M&&Hi(M,q),y._latlng=ue,c.latlng=ue,c.oldLatLng=this._oldLatLng,y.fire("move",c).fire("drag",c)},_onDragEnd:function(c){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),hs=Ir.extend({options:{icon:new hl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,y){E(this,y),this._latlng=ee(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var y=this._latlng;return this._latlng=ee(c),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),M=c.icon.createIcon(this._icon),q=!1;M!==this._icon&&(this._icon&&this._removeIcon(),q=!0,c.title&&(M.title=c.title),M.tagName==="IMG"&&(M.alt=c.alt||"")),ur(M,y),c.keyboard&&(M.tabIndex="0",M.setAttribute("role","button")),this._icon=M,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xr(M,"focus",this._panOnFocus,this);var ue=c.icon.createShadow(this._shadow),Pe=!1;ue!==this._shadow&&(this._removeShadow(),Pe=!0),ue&&(ur(ue,y),ue.alt=""),this._shadow=ue,c.opacity<1&&this._updateOpacity(),q&&this.getPane().appendChild(this._icon),this._initInteraction(),ue&&Pe&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xr(this._icon,"focus",this._panOnFocus,this),pr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pr(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Hi(this._icon,c),this._shadow&&Hi(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var y=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(ur(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fl)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fl(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Us(this._icon,c),this._shadow&&Us(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var y=this.options.icon.options,M=y.iconSize?ge(y.iconSize):ge(0,0),q=y.iconAnchor?ge(y.iconAnchor):ge(0,0);c.panInside(this._latlng,{paddingTopLeft:q,paddingBottomRight:M.subtract(q)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ba(c,y){return new hs(c,y)}var jo=Ir.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return E(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_o=jo.extend({options:{fill:!0,radius:10},initialize:function(c,y){E(this,y),this._latlng=ee(c),this._radius=this.options.radius},setLatLng:function(c){var y=this._latlng;return this._latlng=ee(c),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var y=c&&c.radius||this._radius;return jo.prototype.setStyle.call(this,c),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,y=this._radiusY||c,M=this._clickTolerance(),q=[c+M,y+M];this._pxBounds=new He(this._point.subtract(q),this._point.add(q))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Nl(c,y){return new _o(c,y)}var Hs=_o.extend({initialize:function(c,y,M){if(typeof y=="number"&&(y=i({},M,{radius:y})),E(this,y),this._latlng=ee(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new Ce(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:jo.prototype.setStyle,_project:function(){var c=this._latlng.lng,y=this._latlng.lat,M=this._map,q=M.options.crs;if(q.distance===re.distance){var ue=Math.PI/180,Pe=this._mRadius/re.R/ue,ct=M.project([y+Pe,c]),Nt=M.project([y-Pe,c]),Gt=ct.add(Nt).divideBy(2),ln=M.unproject(Gt).lat,In=Math.acos((Math.cos(Pe*ue)-Math.sin(y*ue)*Math.sin(ln*ue))/(Math.cos(y*ue)*Math.cos(ln*ue)))/ue;(isNaN(In)||In===0)&&(In=Pe/Math.cos(Math.PI/180*y)),this._point=Gt.subtract(M.getPixelOrigin()),this._radius=isNaN(In)?0:Gt.x-M.project([ln,c-In]).x,this._radiusY=Gt.y-ct.y}else{var Xn=q.unproject(q.project(this._latlng).subtract([this._mRadius,0]));this._point=M.latLngToLayerPoint(this._latlng),this._radius=this._point.x-M.latLngToLayerPoint(Xn).x}this._updateBounds()}});function oo(c,y,M){return new Hs(c,y,M)}var ao=jo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,y){E(this,y),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var y=1/0,M=null,q=Nn,ue,Pe,ct=0,Nt=this._parts.length;ct<Nt;ct++)for(var Gt=this._parts[ct],ln=1,In=Gt.length;ln<In;ln++){ue=Gt[ln-1],Pe=Gt[ln];var Xn=q(c,ue,Pe,!0);Xn<y&&(y=Xn,M=q(c,ue,Pe))}return M&&(M.distance=Math.sqrt(y)),M},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return gr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,y){return y=y||this._defaultShape(),c=ee(c),y.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new Ce,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return Rn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var y=[],M=Rn(c),q=0,ue=c.length;q<ue;q++)M?(y[q]=ee(c[q]),this._bounds.extend(y[q])):y[q]=this._convertLatLngs(c[q]);return y},_project:function(){var c=new He;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),y=new K(c,c);this._rawPxBounds&&(this._pxBounds=new He([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(c,y,M){var q=c[0]instanceof H,ue=c.length,Pe,ct;if(q){for(ct=[],Pe=0;Pe<ue;Pe++)ct[Pe]=this._map.latLngToLayerPoint(c[Pe]),M.extend(ct[Pe]);y.push(ct)}else for(Pe=0;Pe<ue;Pe++)this._projectLatlngs(c[Pe],y,M)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,M,q,ue,Pe,ct,Nt,Gt;for(M=0,ue=0,Pe=this._rings.length;M<Pe;M++)for(Gt=this._rings[M],q=0,ct=Gt.length;q<ct-1;q++)Nt=ft(Gt[q],Gt[q+1],c,q,!0),Nt&&(y[ue]=y[ue]||[],y[ue].push(Nt[0]),(Nt[1]!==Gt[q+1]||q===ct-2)&&(y[ue].push(Nt[1]),ue++))}},_simplifyPoints:function(){for(var c=this._parts,y=this.options.smoothFactor,M=0,q=c.length;M<q;M++)c[M]=ci(c[M],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,y){var M,q,ue,Pe,ct,Nt,Gt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(M=0,Pe=this._parts.length;M<Pe;M++)for(Nt=this._parts[M],q=0,ct=Nt.length,ue=ct-1;q<ct;ue=q++)if(!(!y&&q===0)&&Ro(c,Nt[ue],Nt[q])<=Gt)return!0;return!1}});function Nc(c,y){return new ao(c,y)}ao._flat=rr;var ws=ao.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return oa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var y=ao.prototype._convertLatLngs.call(this,c),M=y.length;return M>=2&&y[0]instanceof H&&y[0].equals(y[M-1])&&y.pop(),y},_setLatLngs:function(c){ao.prototype._setLatLngs.call(this,c),Rn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Rn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,y=this.options.weight,M=new K(y,y);if(c=new He(c.min.subtract(M),c.max.add(M)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var q=0,ue=this._rings.length,Pe;q<ue;q++)Pe=cu(this._rings[q],c,!0),Pe.length&&this._parts.push(Pe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var y=!1,M,q,ue,Pe,ct,Nt,Gt,ln;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(Pe=0,Gt=this._parts.length;Pe<Gt;Pe++)for(M=this._parts[Pe],ct=0,ln=M.length,Nt=ln-1;ct<ln;Nt=ct++)q=M[ct],ue=M[Nt],q.y>c.y!=ue.y>c.y&&c.x<(ue.x-q.x)*(c.y-q.y)/(ue.y-q.y)+q.x&&(y=!y);return y||ao.prototype._containsPoint.call(this,c,!0)}});function Ba(c,y){return new ws(c,y)}var Gs=so.extend({initialize:function(c,y){E(this,y),this._layers={},c&&this.addData(c)},addData:function(c){var y=R(c)?c:c.features,M,q,ue;if(y){for(M=0,q=y.length;M<q;M++)ue=y[M],(ue.geometries||ue.geometry||ue.features||ue.coordinates)&&this.addData(ue);return this}var Pe=this.options;if(Pe.filter&&!Pe.filter(c))return this;var ct=Ws(c,Pe);return ct?(ct.feature=Ys(c),ct.defaultOptions=ct.options,this.resetStyle(ct),Pe.onEachFeature&&Pe.onEachFeature(c,ct),this.addLayer(ct)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=i({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(y){this._setLayerStyle(y,c)},this)},_setLayerStyle:function(c,y){c.setStyle&&(typeof y=="function"&&(y=y(c.feature)),c.setStyle(y))}});function Ws(c,y){var M=c.type==="Feature"?c.geometry:c,q=M?M.coordinates:null,ue=[],Pe=y&&y.pointToLayer,ct=y&&y.coordsToLatLng||Fa,Nt,Gt,ln,In;if(!q&&!M)return null;switch(M.type){case"Point":return Nt=ct(q),Ra(Pe,c,Nt,y);case"MultiPoint":for(ln=0,In=q.length;ln<In;ln++)Nt=ct(q[ln]),ue.push(Ra(Pe,c,Nt,y));return new so(ue);case"LineString":case"MultiLineString":return Gt=qs(q,M.type==="LineString"?0:1,ct),new ao(Gt,y);case"Polygon":case"MultiPolygon":return Gt=qs(q,M.type==="Polygon"?1:2,ct),new ws(Gt,y);case"GeometryCollection":for(ln=0,In=M.geometries.length;ln<In;ln++){var Xn=Ws({geometry:M.geometries[ln],type:"Feature",properties:c.properties},y);Xn&&ue.push(Xn)}return new so(ue);case"FeatureCollection":for(ln=0,In=M.features.length;ln<In;ln++){var Dr=Ws(M.features[ln],y);Dr&&ue.push(Dr)}return new so(ue);default:throw new Error("Invalid GeoJSON object.")}}function Ra(c,y,M,q){return c?c(y,M):new hs(M,q&&q.markersInheritOptions&&q)}function Fa(c){return new H(c[1],c[0],c[2])}function qs(c,y,M){for(var q=[],ue=0,Pe=c.length,ct;ue<Pe;ue++)ct=y?qs(c[ue],y-1,M):(M||Fa)(c[ue]),q.push(ct);return q}function Ts(c,y){return c=ee(c),c.alt!==void 0?[v(c.lng,y),v(c.lat,y),v(c.alt,y)]:[v(c.lng,y),v(c.lat,y)]}function _a(c,y,M,q){for(var ue=[],Pe=0,ct=c.length;Pe<ct;Pe++)ue.push(y?_a(c[Pe],Rn(c[Pe])?0:y-1,M,q):Ts(c[Pe],q));return!y&&M&&ue.length>0&&ue.push(ue[0].slice()),ue}function zo(c,y){return c.feature?i({},c.feature,{geometry:y}):Ys(y)}function Ys(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var Lt={toGeoJSON:function(c){return zo(this,{type:"Point",coordinates:Ts(this.getLatLng(),c)})}};hs.include(Lt),Hs.include(Lt),_o.include(Lt),ao.include({toGeoJSON:function(c){var y=!Rn(this._latlngs),M=_a(this._latlngs,y?1:0,!1,c);return zo(this,{type:(y?"Multi":"")+"LineString",coordinates:M})}}),ws.include({toGeoJSON:function(c){var y=!Rn(this._latlngs),M=y&&!Rn(this._latlngs[0]),q=_a(this._latlngs,M?2:y?1:0,!0,c);return y||(q=[q]),zo(this,{type:(M?"Multi":"")+"Polygon",coordinates:q})}}),Vs.include({toMultiPoint:function(c){var y=[];return this.eachLayer(function(M){y.push(M.toGeoJSON(c).geometry.coordinates)}),zo(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(c){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(c);var M=y==="GeometryCollection",q=[];return this.eachLayer(function(ue){if(ue.toGeoJSON){var Pe=ue.toGeoJSON(c);if(M)q.push(Pe.geometry);else{var ct=Ys(Pe);ct.type==="FeatureCollection"?q.push.apply(q,ct.features):q.push(ct)}}}),M?zo(this,{geometries:q,type:"GeometryCollection"}):{type:"FeatureCollection",features:q}}});function Xt(c,y){return new Gs(c,y)}var It=Xt,Tn=Ir.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,y,M){this._url=c,this._bounds=_e(y),E(this,M)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ur(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&lr(this._image),this},bringToBack:function(){return this._map&&Ei(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=_e(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",y=this._image=c?this._url:Tr("img");if(ur(y,"leaflet-image-layer"),this._zoomAnimated&&ur(y,"leaflet-zoom-animated"),this.options.className&&ur(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(c){var y=this._map.getZoomScale(c.zoom),M=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;Da(this._image,M,y)},_reset:function(){var c=this._image,y=new He(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),M=y.getSize();Hi(c,y.min),c.style.width=M.x+"px",c.style.height=M.y+"px"},_updateOpacity:function(){Us(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),Yn=function(c,y,M){return new Tn(c,y,M)},yr=Tn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",y=this._image=c?this._url:Tr("video");if(ur(y,"leaflet-image-layer"),this._zoomAnimated&&ur(y,"leaflet-zoom-animated"),this.options.className&&ur(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),c){for(var M=y.getElementsByTagName("source"),q=[],ue=0;ue<M.length;ue++)q.push(M[ue].src);this._url=M.length>0?q:[y.src];return}R(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var Pe=0;Pe<this._url.length;Pe++){var ct=Tr("source");ct.src=this._url[Pe],y.appendChild(ct)}}});function Bi(c,y,M){return new yr(c,y,M)}var hi=Tn.extend({_initImage:function(){var c=this._image=this._url;ur(c,"leaflet-image-layer"),this._zoomAnimated&&ur(c,"leaflet-zoom-animated"),this.options.className&&ur(c,this.options.className),c.onselectstart=p,c.onmousemove=p}});function du(c,y,M){return new hi(c,y,M)}var lo=Ir.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,y){c&&(c instanceof H||R(c))?(this._latlng=ee(c),E(this,y)):(E(this,c),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Us(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Us(this._container,1),this.bringToFront(),this.options.interactive&&(ur(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Us(this._container,0),this._removeTimeout=setTimeout(o(pr,void 0,this._container),200)):pr(this._container),this.options.interactive&&(ei(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=ee(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&lr(this._container),this},bringToBack:function(){return this._map&&Ei(this._container),this},_prepareOpen:function(c){var y=this._source;if(!y._map)return!1;if(y instanceof so){y=null;var M=this._source._layers;for(var q in M)if(M[q]._map){y=M[q];break}if(!y)return!1;this._source=y}if(!c)if(y.getCenter)c=y.getCenter();else if(y.getLatLng)c=y.getLatLng();else if(y.getBounds)c=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")c.innerHTML=y;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),y=ge(this.options.offset),M=this._getAnchor();this._zoomAnimated?Hi(this._container,c.add(M)):y=y.add(c).add(M);var q=this._containerBottom=-y.y,ue=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=q+"px",this._container.style.left=ue+"px"}},_getAnchor:function(){return[0,0]}});Ur.include({_initOverlay:function(c,y,M,q){var ue=y;return ue instanceof c||(ue=new c(q).setContent(y)),M&&ue.setLatLng(M),ue}}),Ir.include({_initOverlay:function(c,y,M,q){var ue=M;return ue instanceof c?(E(ue,q),ue._source=this):(ue=y&&!q?y:new c(q,this),ue.setContent(M)),ue}});var Ri=lo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,lo.prototype.openOn.call(this,c)},onAdd:function(c){lo.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof jo||this._source.on("preclick",cl))},onRemove:function(c){lo.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof jo||this._source.off("preclick",cl))},getEvents:function(){var c=lo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",y=this._container=Tr("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),M=this._wrapper=Tr("div",c+"-content-wrapper",y);if(this._contentNode=Tr("div",c+"-content",M),iu(y),ec(this._contentNode),xr(y,"contextmenu",cl),this._tipContainer=Tr("div",c+"-tip-container",y),this._tip=Tr("div",c+"-tip",this._tipContainer),this.options.closeButton){var q=this._closeButton=Tr("a",c+"-close-button",y);q.setAttribute("role","button"),q.setAttribute("aria-label","Close popup"),q.href="#close",q.innerHTML='<span aria-hidden="true">&#215;</span>',xr(q,"click",function(ue){_r(ue),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,y=c.style;y.width="",y.whiteSpace="nowrap";var M=c.offsetWidth;M=Math.min(M,this.options.maxWidth),M=Math.max(M,this.options.minWidth),y.width=M+1+"px",y.whiteSpace="",y.height="";var q=c.offsetHeight,ue=this.options.maxHeight,Pe="leaflet-popup-scrolled";ue&&q>ue?(y.height=ue+"px",ur(c,Pe)):ei(c,Pe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var y=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),M=this._getAnchor();Hi(this._container,y.add(M))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,y=parseInt(br(this._container,"marginBottom"),10)||0,M=this._container.offsetHeight+y,q=this._containerWidth,ue=new K(this._containerLeft,-M-this._containerBottom);ue._add(ta(this._container));var Pe=c.layerPointToContainerPoint(ue),ct=ge(this.options.autoPanPadding),Nt=ge(this.options.autoPanPaddingTopLeft||ct),Gt=ge(this.options.autoPanPaddingBottomRight||ct),ln=c.getSize(),In=0,Xn=0;Pe.x+q+Gt.x>ln.x&&(In=Pe.x+q-ln.x+Gt.x),Pe.x-In-Nt.x<0&&(In=Pe.x-Nt.x),Pe.y+M+Gt.y>ln.y&&(Xn=Pe.y+M-ln.y+Gt.y),Pe.y-Xn-Nt.y<0&&(Xn=Pe.y-Nt.y),(In||Xn)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([In,Xn]))}},_getAnchor:function(){return ge(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),wa=function(c,y){return new Ri(c,y)};Ur.mergeOptions({closePopupOnClick:!0}),Ur.include({openPopup:function(c,y,M){return this._initOverlay(Ri,c,y,M).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),Ir.include({bindPopup:function(c,y){return this._popup=this._initOverlay(Ri,this._popup,c,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof so||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){Fr(c);var y=c.layer||c.target;if(this._popup._source===y&&!(y instanceof jo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=y,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var ja=lo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){lo.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){lo.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=lo.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",y=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Tr("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var y,M,q=this._map,ue=this._container,Pe=q.latLngToContainerPoint(q.getCenter()),ct=q.layerPointToContainerPoint(c),Nt=this.options.direction,Gt=ue.offsetWidth,ln=ue.offsetHeight,In=ge(this.options.offset),Xn=this._getAnchor();Nt==="top"?(y=Gt/2,M=ln):Nt==="bottom"?(y=Gt/2,M=0):Nt==="center"?(y=Gt/2,M=ln/2):Nt==="right"?(y=0,M=ln/2):Nt==="left"?(y=Gt,M=ln/2):ct.x<Pe.x?(Nt="right",y=0,M=ln/2):(Nt="left",y=Gt+(In.x+Xn.x)*2,M=ln/2),c=c.subtract(ge(y,M,!0)).add(In).add(Xn),ei(ue,"leaflet-tooltip-right"),ei(ue,"leaflet-tooltip-left"),ei(ue,"leaflet-tooltip-top"),ei(ue,"leaflet-tooltip-bottom"),ur(ue,"leaflet-tooltip-"+Nt),Hi(ue,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Us(this._container,c)},_animateZoom:function(c){var y=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(y)},_getAnchor:function(){return ge(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),xa=function(c,y){return new ja(c,y)};Ur.include({openTooltip:function(c,y,M){return this._initOverlay(ja,c,y,M).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Ir.include({bindTooltip:function(c,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ja,this._tooltip,c,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var y=c?"off":"on",M={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?M.add=this._openTooltip:(M.mouseover=this._openTooltip,M.mouseout=this.closeTooltip,M.click=this._openTooltip,this._map?this._addFocusListeners():M.add=this._addFocusListeners),this._tooltip.options.sticky&&(M.mousemove=this._moveTooltip),this[y](M),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof so||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var y=typeof c.getElement=="function"&&c.getElement();y&&(xr(y,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),xr(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var y=typeof c.getElement=="function"&&c.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var y=c.latlng,M,q;this._tooltip.options.sticky&&c.originalEvent&&(M=this._map.mouseEventToContainerPoint(c.originalEvent),q=this._map.containerPointToLayerPoint(M),y=this._map.layerPointToLatLng(q)),this._tooltip.setLatLng(y)}});var La=ya.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var y=c&&c.tagName==="DIV"?c:document.createElement("div"),M=this.options;if(M.html instanceof Element?(ea(y),y.appendChild(M.html)):y.innerHTML=M.html!==!1?M.html:"",M.bgPos){var q=ge(M.bgPos);y.style.backgroundPosition=-q.x+"px "+-q.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function Ca(c){return new La(c)}ya.Default=hl;var Vr=Ir.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Kt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){E(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),pr(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(lr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ei(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof K?c:new K(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var y=this.getPane().children,M=-c(-1/0,1/0),q=0,ue=y.length,Pe;q<ue;q++)Pe=y[q].style.zIndex,y[q]!==this._container&&Pe&&(M=c(M,+Pe));isFinite(M)&&(this.options.zIndex=M+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Kt.ielt9){Us(this._container,this.options.opacity);var c=+new Date,y=!1,M=!1;for(var q in this._tiles){var ue=this._tiles[q];if(!(!ue.current||!ue.loaded)){var Pe=Math.min(1,(c-ue.loaded)/200);Us(ue.el,Pe),Pe<1?y=!0:(ue.active?M=!0:this._onOpaqueTile(ue),ue.active=!0)}}M&&!this._noPrune&&this._pruneTiles(),y&&(B(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Tr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,y=this.options.maxZoom;if(c!==void 0){for(var M in this._levels)M=Number(M),this._levels[M].el.children.length||M===c?(this._levels[M].el.style.zIndex=y-Math.abs(c-M),this._onUpdateLevel(M)):(pr(this._levels[M].el),this._removeTilesAtZoom(M),this._onRemoveLevel(M),delete this._levels[M]);var q=this._levels[c],ue=this._map;return q||(q=this._levels[c]={},q.el=Tr("div","leaflet-tile-container leaflet-zoom-animated",this._container),q.el.style.zIndex=y,q.origin=ue.project(ue.unproject(ue.getPixelOrigin()),c).round(),q.zoom=c,this._setZoomTransform(q,ue.getCenter(),ue.getZoom()),p(q.el.offsetWidth),this._onCreateLevel(q)),this._level=q,q}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var c,y,M=this._map.getZoom();if(M>this.options.maxZoom||M<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)y=this._tiles[c],y.retain=y.current;for(c in this._tiles)if(y=this._tiles[c],y.current&&!y.active){var q=y.coords;this._retainParent(q.x,q.y,q.z,q.z-5)||this._retainChildren(q.x,q.y,q.z,q.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var y in this._tiles)this._tiles[y].coords.z===c&&this._removeTile(y)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)pr(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,y,M,q){var ue=Math.floor(c/2),Pe=Math.floor(y/2),ct=M-1,Nt=new K(+ue,+Pe);Nt.z=+ct;var Gt=this._tileCoordsToKey(Nt),ln=this._tiles[Gt];return ln&&ln.active?(ln.retain=!0,!0):(ln&&ln.loaded&&(ln.retain=!0),ct>q?this._retainParent(ue,Pe,ct,q):!1)},_retainChildren:function(c,y,M,q){for(var ue=2*c;ue<2*c+2;ue++)for(var Pe=2*y;Pe<2*y+2;Pe++){var ct=new K(ue,Pe);ct.z=M+1;var Nt=this._tileCoordsToKey(ct),Gt=this._tiles[Nt];if(Gt&&Gt.active){Gt.retain=!0;continue}else Gt&&Gt.loaded&&(Gt.retain=!0);M+1<q&&this._retainChildren(ue,Pe,M+1,q)}},_resetView:function(c){var y=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var y=this.options;return y.minNativeZoom!==void 0&&c<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<c?y.maxNativeZoom:c},_setView:function(c,y,M,q){var ue=Math.round(y);this.options.maxZoom!==void 0&&ue>this.options.maxZoom||this.options.minZoom!==void 0&&ue<this.options.minZoom?ue=void 0:ue=this._clampZoom(ue);var Pe=this.options.updateWhenZooming&&ue!==this._tileZoom;(!q||Pe)&&(this._tileZoom=ue,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ue!==void 0&&this._update(c),M||this._pruneTiles(),this._noPrune=!!M),this._setZoomTransforms(c,y)},_setZoomTransforms:function(c,y){for(var M in this._levels)this._setZoomTransform(this._levels[M],c,y)},_setZoomTransform:function(c,y,M){var q=this._map.getZoomScale(M,c.zoom),ue=c.origin.multiplyBy(q).subtract(this._map._getNewPixelOrigin(y,M)).round();Kt.any3d?Da(c.el,ue,q):Hi(c.el,ue)},_resetGrid:function(){var c=this._map,y=c.options.crs,M=this._tileSize=this.getTileSize(),q=this._tileZoom,ue=this._map.getPixelWorldBounds(this._tileZoom);ue&&(this._globalTileRange=this._pxBoundsToTileRange(ue)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,y.wrapLng[0]],q).x/M.x),Math.ceil(c.project([0,y.wrapLng[1]],q).x/M.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([y.wrapLat[0],0],q).y/M.x),Math.ceil(c.project([y.wrapLat[1],0],q).y/M.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var y=this._map,M=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),q=y.getZoomScale(M,this._tileZoom),ue=y.project(c,this._tileZoom).floor(),Pe=y.getSize().divideBy(q*2);return new He(ue.subtract(Pe),ue.add(Pe))},_update:function(c){var y=this._map;if(y){var M=this._clampZoom(y.getZoom());if(c===void 0&&(c=y.getCenter()),this._tileZoom!==void 0){var q=this._getTiledPixelBounds(c),ue=this._pxBoundsToTileRange(q),Pe=ue.getCenter(),ct=[],Nt=this.options.keepBuffer,Gt=new He(ue.getBottomLeft().subtract([Nt,-Nt]),ue.getTopRight().add([Nt,-Nt]));if(!(isFinite(ue.min.x)&&isFinite(ue.min.y)&&isFinite(ue.max.x)&&isFinite(ue.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ln in this._tiles){var In=this._tiles[ln].coords;(In.z!==this._tileZoom||!Gt.contains(new K(In.x,In.y)))&&(this._tiles[ln].current=!1)}if(Math.abs(M-this._tileZoom)>1){this._setView(c,M);return}for(var Xn=ue.min.y;Xn<=ue.max.y;Xn++)for(var Dr=ue.min.x;Dr<=ue.max.x;Dr++){var ps=new K(Dr,Xn);if(ps.z=this._tileZoom,!!this._isValidTile(ps)){var Gi=this._tiles[this._tileCoordsToKey(ps)];Gi?Gi.current=!0:ct.push(ps)}}if(ct.sort(function(Fi,Lo){return Fi.distanceTo(Pe)-Lo.distanceTo(Pe)}),ct.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Is=document.createDocumentFragment();for(Dr=0;Dr<ct.length;Dr++)this._addTile(ct[Dr],Is);this._level.el.appendChild(Is)}}}},_isValidTile:function(c){var y=this._map.options.crs;if(!y.infinite){var M=this._globalTileRange;if(!y.wrapLng&&(c.x<M.min.x||c.x>M.max.x)||!y.wrapLat&&(c.y<M.min.y||c.y>M.max.y))return!1}if(!this.options.bounds)return!0;var q=this._tileCoordsToBounds(c);return _e(this.options.bounds).overlaps(q)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var y=this._map,M=this.getTileSize(),q=c.scaleBy(M),ue=q.add(M),Pe=y.unproject(q,c.z),ct=y.unproject(ue,c.z);return[Pe,ct]},_tileCoordsToBounds:function(c){var y=this._tileCoordsToNwSe(c),M=new Ce(y[0],y[1]);return this.options.noWrap||(M=this._map.wrapLatLngBounds(M)),M},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var y=c.split(":"),M=new K(+y[0],+y[1]);return M.z=+y[2],M},_removeTile:function(c){var y=this._tiles[c];y&&(pr(y.el),delete this._tiles[c],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){ur(c,"leaflet-tile");var y=this.getTileSize();c.style.width=y.x+"px",c.style.height=y.y+"px",c.onselectstart=p,c.onmousemove=p,Kt.ielt9&&this.options.opacity<1&&Us(c,this.options.opacity)},_addTile:function(c,y){var M=this._getTilePos(c),q=this._tileCoordsToKey(c),ue=this.createTile(this._wrapCoords(c),o(this._tileReady,this,c));this._initTile(ue),this.createTile.length<2&&U(o(this._tileReady,this,c,null,ue)),Hi(ue,M),this._tiles[q]={el:ue,coords:c,current:!0},y.appendChild(ue),this.fire("tileloadstart",{tile:ue,coords:c})},_tileReady:function(c,y,M){y&&this.fire("tileerror",{error:y,tile:M,coords:c});var q=this._tileCoordsToKey(c);M=this._tiles[q],M&&(M.loaded=+new Date,this._map._fadeAnimated?(Us(M.el,0),B(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(M.active=!0,this._pruneTiles()),y||(ur(M.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:M.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Kt.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var y=new K(this._wrapX?h(c.x,this._wrapX):c.x,this._wrapY?h(c.y,this._wrapY):c.y);return y.z=c.z,y},_pxBoundsToTileRange:function(c){var y=this.getTileSize();return new He(c.min.unscaleBy(y).floor(),c.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function aa(c){return new Vr(c)}var Ds=Vr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,y){this._url=c,y=E(this,y),y.detectRetina&&Kt.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,y){return this._url===c&&y===void 0&&(y=!0),this._url=c,y||this.redraw(),this},createTile:function(c,y){var M=document.createElement("img");return xr(M,"load",o(this._tileOnLoad,this,y,M)),xr(M,"error",o(this._tileOnError,this,y,M)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(M.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(M.referrerPolicy=this.options.referrerPolicy),M.alt="",M.src=this.getTileUrl(c),M},getTileUrl:function(c){var y={r:Kt.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var M=this._globalTileRange.max.y-c.y;this.options.tms&&(y.y=M),y["-y"]=M}return D(this._url,i(y,this.options))},_tileOnLoad:function(c,y){Kt.ielt9?setTimeout(o(c,this,null,y),0):c(null,y)},_tileOnError:function(c,y,M){var q=this.options.errorTileUrl;q&&y.getAttribute("src")!==q&&(y.src=q),c(M,y)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,y=this.options.maxZoom,M=this.options.zoomReverse,q=this.options.zoomOffset;return M&&(c=y-c),c+q},_getSubdomain:function(c){var y=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var c,y;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(y=this._tiles[c].el,y.onload=p,y.onerror=p,!y.complete)){y.src=Q;var M=this._tiles[c].coords;pr(y),delete this._tiles[c],this.fire("tileabort",{tile:y,coords:M})}},_removeTile:function(c){var y=this._tiles[c];if(y)return y.el.setAttribute("src",Q),Vr.prototype._removeTile.call(this,c)},_tileReady:function(c,y,M){if(!(!this._map||M&&M.getAttribute("src")===Q))return Vr.prototype._tileReady.call(this,c,y,M)}});function fi(c,y){return new Ds(c,y)}var vi=Ds.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,y){this._url=c;var M=i({},this.defaultWmsParams);for(var q in y)q in this.options||(M[q]=y[q]);y=E(this,y);var ue=y.detectRetina&&Kt.retina?2:1,Pe=this.getTileSize();M.width=Pe.x*ue,M.height=Pe.y*ue,this.wmsParams=M},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,Ds.prototype.onAdd.call(this,c)},getTileUrl:function(c){var y=this._tileCoordsToNwSe(c),M=this._crs,q=ie(M.project(y[0]),M.project(y[1])),ue=q.min,Pe=q.max,ct=(this._wmsVersion>=1.3&&this._crs===ds?[ue.y,ue.x,Pe.y,Pe.x]:[ue.x,ue.y,Pe.x,Pe.y]).join(","),Nt=Ds.prototype.getTileUrl.call(this,c);return Nt+k(this.wmsParams,Nt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ct},setParams:function(c,y){return i(this.wmsParams,c),y||this.redraw(),this}});function ns(c,y){return new vi(c,y)}Ds.WMS=vi,fi.wms=ns;var Mi=Ir.extend({options:{padding:.1},initialize:function(c){E(this,c),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ur(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,y){var M=this._map.getZoomScale(y,this._zoom),q=this._map.getSize().multiplyBy(.5+this.options.padding),ue=this._map.project(this._center,y),Pe=q.multiplyBy(-M).add(ue).subtract(this._map._getNewPixelOrigin(c,y));Kt.any3d?Da(this._container,Pe,M):Hi(this._container,Pe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,y=this._map.getSize(),M=this._map.containerPointToLayerPoint(y.multiplyBy(-c)).round();this._bounds=new He(M,M.add(y.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$o=Mi.extend({options:{tolerance:0},getEvents:function(){var c=Mi.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Mi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");xr(c,"mousemove",this._onMouseMove,this),xr(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),xr(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,pr(this._container),Xr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var y in this._layers)c=this._layers[y],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Mi.prototype._update.call(this);var c=this._bounds,y=this._container,M=c.getSize(),q=Kt.retina?2:1;Hi(y,c.min),y.width=q*M.x,y.height=q*M.y,y.style.width=M.x+"px",y.style.height=M.y+"px",Kt.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){Mi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[l(c)]=c;var y=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var y=c._order,M=y.next,q=y.prev;M?M.prev=q:this._drawLast=q,q?q.next=M:this._drawFirst=M,delete c._order,delete this._layers[l(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var y=c.options.dashArray.split(/[, ]+/),M=[],q,ue;for(ue=0;ue<y.length;ue++){if(q=Number(y[ue]),isNaN(q))return;M.push(q)}c.options._dashArray=M}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var y=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new He,this._redrawBounds.extend(c._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(c._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var y=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,y=this._redrawBounds;if(this._ctx.save(),y){var M=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,M.x,M.y),this._ctx.clip()}this._drawing=!0;for(var q=this._drawFirst;q;q=q.next)c=q.layer,(!y||c._pxBounds&&c._pxBounds.intersects(y))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,y){if(this._drawing){var M,q,ue,Pe,ct=c._parts,Nt=ct.length,Gt=this._ctx;if(Nt){for(Gt.beginPath(),M=0;M<Nt;M++){for(q=0,ue=ct[M].length;q<ue;q++)Pe=ct[M][q],Gt[q?"lineTo":"moveTo"](Pe.x,Pe.y);y&&Gt.closePath()}this._fillStroke(Gt,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var y=c._point,M=this._ctx,q=Math.max(Math.round(c._radius),1),ue=(Math.max(Math.round(c._radiusY),1)||q)/q;ue!==1&&(M.save(),M.scale(1,ue)),M.beginPath(),M.arc(y.x,y.y/ue,q,0,Math.PI*2,!1),ue!==1&&M.restore(),this._fillStroke(M,c)}},_fillStroke:function(c,y){var M=y.options;M.fill&&(c.globalAlpha=M.fillOpacity,c.fillStyle=M.fillColor||M.color,c.fill(M.fillRule||"evenodd")),M.stroke&&M.weight!==0&&(c.setLineDash&&c.setLineDash(y.options&&y.options._dashArray||[]),c.globalAlpha=M.opacity,c.lineWidth=M.weight,c.strokeStyle=M.color,c.lineCap=M.lineCap,c.lineJoin=M.lineJoin,c.stroke())},_onClick:function(c){for(var y=this._map.mouseEventToLayerPoint(c),M,q,ue=this._drawFirst;ue;ue=ue.next)M=ue.layer,M.options.interactive&&M._containsPoint(y)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(M))&&(q=M);this._fireEvent(q?[q]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,y)}},_handleMouseOut:function(c){var y=this._hoveredLayer;y&&(ei(this._container,"leaflet-interactive"),this._fireEvent([y],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,y){if(!this._mouseHoverThrottled){for(var M,q,ue=this._drawFirst;ue;ue=ue.next)M=ue.layer,M.options.interactive&&M._containsPoint(y)&&(q=M);q!==this._hoveredLayer&&(this._handleMouseOut(c),q&&(ur(this._container,"leaflet-interactive"),this._fireEvent([q],c,"mouseover"),this._hoveredLayer=q)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,y,M){this._map._fireDOMEvent(y,M||y.type,c)},_bringToFront:function(c){var y=c._order;if(y){var M=y.next,q=y.prev;if(M)M.prev=q;else return;q?q.next=M:M&&(this._drawFirst=M),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(c)}},_bringToBack:function(c){var y=c._order;if(y){var M=y.next,q=y.prev;if(q)q.next=M;else return;M?M.prev=q:q&&(this._drawLast=q),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(c)}}});function wo(c){return Kt.canvas?new $o(c):null}var Wo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),nc={_initContainer:function(){this._container=Tr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Mi.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var y=c._container=Wo("shape");ur(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",c._path=Wo("path"),y.appendChild(c._path),this._updateStyle(c),this._layers[l(c)]=c},_addPath:function(c){var y=c._container;this._container.appendChild(y),c.options.interactive&&c.addInteractiveTarget(y)},_removePath:function(c){var y=c._container;pr(y),c.removeInteractiveTarget(y),delete this._layers[l(c)]},_updateStyle:function(c){var y=c._stroke,M=c._fill,q=c.options,ue=c._container;ue.stroked=!!q.stroke,ue.filled=!!q.fill,q.stroke?(y||(y=c._stroke=Wo("stroke")),ue.appendChild(y),y.weight=q.weight+"px",y.color=q.color,y.opacity=q.opacity,q.dashArray?y.dashStyle=R(q.dashArray)?q.dashArray.join(" "):q.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=q.lineCap.replace("butt","flat"),y.joinstyle=q.lineJoin):y&&(ue.removeChild(y),c._stroke=null),q.fill?(M||(M=c._fill=Wo("fill")),ue.appendChild(M),M.color=q.fillColor||q.color,M.opacity=q.fillOpacity):M&&(ue.removeChild(M),c._fill=null)},_updateCircle:function(c){var y=c._point.round(),M=Math.round(c._radius),q=Math.round(c._radiusY||M);this._setPath(c,c._empty()?"M0 0":"AL "+y.x+","+y.y+" "+M+","+q+" 0,"+65535*360)},_setPath:function(c,y){c._path.v=y},_bringToFront:function(c){lr(c._container)},_bringToBack:function(c){Ei(c._container)}},Sa=Kt.vml?Wo:oe,fs=Mi.extend({_initContainer:function(){this._container=Sa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Sa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pr(this._container),Xr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Mi.prototype._update.call(this);var c=this._bounds,y=c.getSize(),M=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,M.setAttribute("width",y.x),M.setAttribute("height",y.y)),Hi(M,c.min),M.setAttribute("viewBox",[c.min.x,c.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(c){var y=c._path=Sa("path");c.options.className&&ur(y,c.options.className),c.options.interactive&&ur(y,"leaflet-interactive"),this._updateStyle(c),this._layers[l(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){pr(c._path),c.removeInteractiveTarget(c._path),delete this._layers[l(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var y=c._path,M=c.options;y&&(M.stroke?(y.setAttribute("stroke",M.color),y.setAttribute("stroke-opacity",M.opacity),y.setAttribute("stroke-width",M.weight),y.setAttribute("stroke-linecap",M.lineCap),y.setAttribute("stroke-linejoin",M.lineJoin),M.dashArray?y.setAttribute("stroke-dasharray",M.dashArray):y.removeAttribute("stroke-dasharray"),M.dashOffset?y.setAttribute("stroke-dashoffset",M.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),M.fill?(y.setAttribute("fill",M.fillColor||M.color),y.setAttribute("fill-opacity",M.fillOpacity),y.setAttribute("fill-rule",M.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(c,y){this._setPath(c,Z(c._parts,y))},_updateCircle:function(c){var y=c._point,M=Math.max(Math.round(c._radius),1),q=Math.max(Math.round(c._radiusY),1)||M,ue="a"+M+","+q+" 0 1,0 ",Pe=c._empty()?"M0 0":"M"+(y.x-M)+","+y.y+ue+M*2+",0 "+ue+-M*2+",0 ";this._setPath(c,Pe)},_setPath:function(c,y){c._path.setAttribute("d",y)},_bringToFront:function(c){lr(c._path)},_bringToBack:function(c){Ei(c._path)}});Kt.vml&&fs.include(nc);function Li(c){return Kt.svg||Kt.vml?new fs(c):null}Ur.include({getRenderer:function(c){var y=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var y=this._paneRenderers[c];return y===void 0&&(y=this._createRenderer({pane:c}),this._paneRenderers[c]=y),y},_createRenderer:function(c){return this.options.preferCanvas&&wo(c)||Li(c)}});var Ks=ws.extend({initialize:function(c,y){ws.prototype.initialize.call(this,this._boundsToLatLngs(c),y)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=_e(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function xo(c,y){return new Ks(c,y)}fs.create=Sa,fs.pointsToPath=Z,Gs.geometryToLayer=Ws,Gs.coordsToLatLng=Fa,Gs.coordsToLatLngs=qs,Gs.latLngToCoords=Ts,Gs.latLngsToCoords=_a,Gs.getFeature=zo,Gs.asFeature=Ys,Ur.mergeOptions({boxZoom:!0});var hr=ui.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){xr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),al(),Ju(),this._startPoint=this._map.mouseEventToContainerPoint(c),xr(document,{contextmenu:Fr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=Tr("div","leaflet-zoom-box",this._container),ur(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var y=new He(this._point,this._startPoint),M=y.getSize();Hi(this._box,y.min),this._box.style.width=M.x+"px",this._box.style.height=M.y+"px"},_finish:function(){this._moved&&(pr(this._box),ei(this._container,"leaflet-crosshair")),Bo(),na(),Xr(document,{contextmenu:Fr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new Ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ur.addInitHook("addHandler","boxZoom",hr),Ur.mergeOptions({doubleClickZoom:!0});var za=ui.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var y=this._map,M=y.getZoom(),q=y.options.zoomDelta,ue=c.originalEvent.shiftKey?M-q:M+q;y.options.doubleClickZoom==="center"?y.setZoom(ue):y.setZoomAround(c.containerPoint,ue)}});Ur.addInitHook("addHandler","doubleClickZoom",za),Ur.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $a=ui.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new sa(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}ur(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ei(this._map._container,"leaflet-grab"),ei(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=_e(this._map.options.maxBounds);this._offsetLimit=ie(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var y=this._lastTime=+new Date,M=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(M),this._times.push(y),this._prunePositions(y)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,y){return c-(c-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;c.x<y.min.x&&(c.x=this._viscousLimit(c.x,y.min.x)),c.y<y.min.y&&(c.y=this._viscousLimit(c.y,y.min.y)),c.x>y.max.x&&(c.x=this._viscousLimit(c.x,y.max.x)),c.y>y.max.y&&(c.y=this._viscousLimit(c.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,y=Math.round(c/2),M=this._initialWorldOffset,q=this._draggable._newPos.x,ue=(q-y+M)%c+y-M,Pe=(q+y+M)%c-y-M,ct=Math.abs(ue+M)<Math.abs(Pe+M)?ue:Pe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ct},_onDragEnd:function(c){var y=this._map,M=y.options,q=!M.inertia||c.noInertia||this._times.length<2;if(y.fire("dragend",c),q)y.fire("moveend");else{this._prunePositions(+new Date);var ue=this._lastPos.subtract(this._positions[0]),Pe=(this._lastTime-this._times[0])/1e3,ct=M.easeLinearity,Nt=ue.multiplyBy(ct/Pe),Gt=Nt.distanceTo([0,0]),ln=Math.min(M.inertiaMaxSpeed,Gt),In=Nt.multiplyBy(ln/Gt),Xn=ln/(M.inertiaDeceleration*ct),Dr=In.multiplyBy(-Xn/2).round();!Dr.x&&!Dr.y?y.fire("moveend"):(Dr=y._limitOffset(Dr,y.options.maxBounds),U(function(){y.panBy(Dr,{duration:Xn,easeLinearity:ct,noMoveStart:!0,animate:!0})}))}}});Ur.addInitHook("addHandler","dragging",$a),Ur.mergeOptions({keyboard:!0,keyboardPanDelta:80});var la=ui.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),xr(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,y=document.documentElement,M=c.scrollTop||y.scrollTop,q=c.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(q,M)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var y=this._panKeys={},M=this.keyCodes,q,ue;for(q=0,ue=M.left.length;q<ue;q++)y[M.left[q]]=[-1*c,0];for(q=0,ue=M.right.length;q<ue;q++)y[M.right[q]]=[c,0];for(q=0,ue=M.down.length;q<ue;q++)y[M.down[q]]=[0,c];for(q=0,ue=M.up.length;q<ue;q++)y[M.up[q]]=[0,-1*c]},_setZoomDelta:function(c){var y=this._zoomKeys={},M=this.keyCodes,q,ue;for(q=0,ue=M.zoomIn.length;q<ue;q++)y[M.zoomIn[q]]=c;for(q=0,ue=M.zoomOut.length;q<ue;q++)y[M.zoomOut[q]]=-c},_addHooks:function(){xr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var y=c.keyCode,M=this._map,q;if(y in this._panKeys){if(!M._panAnim||!M._panAnim._inProgress)if(q=this._panKeys[y],c.shiftKey&&(q=ge(q).multiplyBy(3)),M.options.maxBounds&&(q=M._limitOffset(ge(q),M.options.maxBounds)),M.options.worldCopyJump){var ue=M.wrapLatLng(M.unproject(M.project(M.getCenter()).add(q)));M.panTo(ue)}else M.panBy(q)}else if(y in this._zoomKeys)M.setZoom(M.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&M._popup&&M._popup.options.closeOnEscapeKey)M.closePopup();else return;Fr(c)}}});Ur.addInitHook("addHandler","keyboard",la),Ur.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var uo=ui.extend({addHooks:function(){xr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var y=Pu(c),M=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var q=Math.max(M-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),q),Fr(c)},_performZoom:function(){var c=this._map,y=c.getZoom(),M=this._map.options.zoomSnap||0;c._stop();var q=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ue=4*Math.log(2/(1+Math.exp(-Math.abs(q))))/Math.LN2,Pe=M?Math.ceil(ue/M)*M:ue,ct=c._limitZoom(y+(this._delta>0?Pe:-Pe))-y;this._delta=0,this._startTime=null,ct&&(c.options.scrollWheelZoom==="center"?c.setZoom(y+ct):c.setZoomAround(this._lastMousePos,y+ct))}});Ur.addInitHook("addHandler","scrollWheelZoom",uo);var ud=600;Ur.mergeOptions({tapHold:Kt.touchNative&&Kt.safari&&Kt.mobile,tapTolerance:15});var Os=ui.extend({addHooks:function(){xr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var y=c.touches[0];this._startPos=this._newPos=new K(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(xr(document,"touchend",_r),xr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),ud),xr(document,"touchend touchcancel contextmenu",this._cancel,this),xr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){Xr(document,"touchend",_r),Xr(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),Xr(document,"touchend touchcancel contextmenu",this._cancel,this),Xr(document,"touchmove",this._onMove,this)},_onMove:function(c){var y=c.touches[0];this._newPos=new K(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,y){var M=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});M._simulated=!0,y.target.dispatchEvent(M)}});Ur.addInitHook("addHandler","tapHold",Os),Ur.mergeOptions({touchZoom:Kt.touch,bounceAtZoomLimits:!0});var Ns=ui.extend({addHooks:function(){ur(this._map._container,"leaflet-touch-zoom"),xr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ei(this._map._container,"leaflet-touch-zoom"),Xr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var y=this._map;if(!(!c.touches||c.touches.length!==2||y._animatingZoom||this._zooming)){var M=y.mouseEventToContainerPoint(c.touches[0]),q=y.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(M.add(q)._divideBy(2))),this._startDist=M.distanceTo(q),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),xr(document,"touchmove",this._onTouchMove,this),xr(document,"touchend touchcancel",this._onTouchEnd,this),_r(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var y=this._map,M=y.mouseEventToContainerPoint(c.touches[0]),q=y.mouseEventToContainerPoint(c.touches[1]),ue=M.distanceTo(q)/this._startDist;if(this._zoom=y.getScaleZoom(ue,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&ue<1||this._zoom>y.getMaxZoom()&&ue>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,ue===1)return}else{var Pe=M._add(q)._divideBy(2)._subtract(this._centerPoint);if(ue===1&&Pe.x===0&&Pe.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(Pe),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var ct=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(ct,this,!0),_r(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Xr(document,"touchmove",this._onTouchMove,this),Xr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ur.addInitHook("addHandler","touchZoom",Ns),Ur.BoxZoom=hr,Ur.DoubleClickZoom=za,Ur.Drag=$a,Ur.Keyboard=la,Ur.ScrollWheelZoom=uo,Ur.TapHold=Os,Ur.TouchZoom=Ns,t.Bounds=He,t.Browser=Kt,t.CRS=pe,t.Canvas=$o,t.Circle=Hs,t.CircleMarker=_o,t.Class=$,t.Control=sr,t.DivIcon=La,t.DivOverlay=lo,t.DomEvent=ou,t.DomUtil=vr,t.Draggable=sa,t.Evented=X,t.FeatureGroup=so,t.GeoJSON=Gs,t.GridLayer=Vr,t.Handler=ui,t.Icon=ya,t.ImageOverlay=Tn,t.LatLng=H,t.LatLngBounds=Ce,t.Layer=Ir,t.LayerGroup=Vs,t.LineUtil=Nr,t.Map=Ur,t.Marker=hs,t.Mixin=Oc,t.Path=jo,t.Point=K,t.PolyUtil=Dl,t.Polygon=ws,t.Polyline=ao,t.Popup=Ri,t.PosAnimation=ku,t.Projection=di,t.Rectangle=Ks,t.Renderer=Mi,t.SVG=fs,t.SVGOverlay=hi,t.TileLayer=Ds,t.Tooltip=ja,t.Transformation=be,t.Util=G,t.VideoOverlay=yr,t.bind=o,t.bounds=ie,t.canvas=wo,t.circle=oo,t.circleMarker=Nl,t.control=Qi,t.divIcon=Ca,t.extend=i,t.featureGroup=Tu,t.geoJSON=Xt,t.geoJson=It,t.gridLayer=aa,t.icon=tc,t.imageOverlay=Yn,t.latLng=ee,t.latLngBounds=_e,t.layerGroup=Ol,t.map=Ji,t.marker=ba,t.point=ge,t.polygon=Ba,t.polyline=Nc,t.popup=wa,t.rectangle=xo,t.setOptions=E,t.stamp=l,t.svg=Li,t.svgOverlay=du,t.tileLayer=fi,t.tooltip=xa,t.transformation=Ie,t.version=r,t.videoOverlay=Bi;var ua=window.L;t.noConflict=function(){return window.L=ua,this},window.L=t})})(y2,y2.exports);var Ut=y2.exports;const Hn=$_(Ut);var s5={exports:{}};(function(n,e){(function(t,r){r(e)})(ga,function(t){var r=typeof window<"u"?window:typeof ga<"u"?ga:typeof self<"u"?self:{};function i(u,h){return u(h={exports:{}},h.exports),h.exports}var s=i(function(u,h){(function(p){const v={escape:function(F){return F.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:m,mimeType:function(F){return F=m(F).toLowerCase(),function(){var I="application/font-woff",X="image/jpeg";return{woff:I,woff2:I,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:X,jpeg:X,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[F]||""},dataAsUrl:function(F,I){return`data:${I};base64,`+F},isDataUrl:function(F){return F.search(/^(data:)/)!==-1},canvasToBlob:function(F){return F.toBlob?new Promise(function(X){F.toBlob(X)}):(I=F,new Promise(function(X){const K=fe(I.toDataURL().split(",")[1]);var ve=K.length;const ge=new Uint8Array(ve);for(let He=0;He<ve;He++)ge[He]=K.charCodeAt(He);X(new Blob([ge],{type:"image/png"}))}));var I},resolveUrl:function(F,I){const X=document.implementation.createHTMLDocument(),K=X.createElement("base"),ve=(X.head.appendChild(K),X.createElement("a"));return X.body.appendChild(ve),K.href=I,ve.href=F,ve.href},getAndEncode:function(F){let I=Q.impl.urlCache.find(function(X){return X.url===F});return I||(I={url:F,promise:null},Q.impl.urlCache.push(I)),I.promise===null&&(Q.impl.options.cacheBust&&(F+=(/\?/.test(F)?"&":"?")+new Date().getTime()),I.promise=new Promise(function(X){const K=Q.impl.options.httpTimeout,ve=new XMLHttpRequest;let ge;var He;function ie(Ce){console.error(Ce),X("")}ve.onreadystatechange=function(){if(ve.readyState===4)if(ve.status!==200)ge?X(ge):ie(`cannot fetch resource: ${F}, status: `+ve.status);else{const Ce=new FileReader;Ce.onloadend=function(){var _e=Ce.result.split(/,/)[1];X(_e)},Ce.readAsDataURL(ve.response)}},ve.ontimeout=function(){ge?X(ge):ie(`timeout of ${K}ms occured while fetching resource: `+F)},ve.responseType="blob",ve.timeout=K,Q.impl.options.useCredentials&&(ve.withCredentials=!0),ve.open("GET",F,!0),ve.send(),Q.impl.options.imagePlaceholder&&(He=Q.impl.options.imagePlaceholder.split(/,/))&&He[1]&&(ge=He[1])})),I.promise},uid:function(){let F=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+F++}}(),delay:function(F){return function(I){return new Promise(function(X){setTimeout(function(){X(I)},F)})}},asArray:function(F){const I=[],X=F.length;for(let K=0;K<X;K++)I.push(F[K]);return I},escapeXhtml:function(F){return F.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(F){return F!=="data:,"?new Promise(function(I,X){const K=new Image;Q.impl.options.useCredentials&&(K.crossOrigin="use-credentials"),K.onload=function(){I(K)},K.onerror=X,K.src=F}):Promise.resolve()},width:function(F){var I=C(F,"border-left-width"),X=C(F,"border-right-width");return F.scrollWidth+I+X},height:function(F){var I=C(F,"border-top-width"),X=C(F,"border-bottom-width");return F.scrollHeight+I+X}};function m(F){return(F=/\.([^\.\/]*?)(\?|$)/g.exec(F))?F[1]:""}function C(F,I){const X=de(F).getPropertyValue(I);return parseFloat(X.replace("px",""))}const E=function(){const F=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(ve,ge,He){return I(ve)?Promise.resolve(ve).then(X).then(function(ie){let Ce=Promise.resolve(ve);return ie.forEach(function(_e){Ce=Ce.then(function(H){return K(H,_e,ge,He)})}),Ce}):Promise.resolve(ve)},shouldProcess:I,impl:{readUrls:X,inline:K}};function I(ve){return ve.search(F)!==-1}function X(ve){const ge=[];for(var He;(He=F.exec(ve))!==null;)ge.push(He[1]);return ge.filter(function(ie){return!v.isDataUrl(ie)})}function K(ve,ge,He,ie){return Promise.resolve(ge).then(function(Ce){return He?v.resolveUrl(Ce,He):Ce}).then(ie||v.getAndEncode).then(function(Ce){return v.dataAsUrl(Ce,v.mimeType(ge))}).then(function(Ce){return ve.replace((_e=ge,new RegExp(`(url\\(['"]?)(${v.escape(_e)})(['"]?\\))`,"g")),`$1${Ce}$3`);var _e})}}(),k={resolveAll:function(){return A().then(function(F){return Promise.all(F.map(function(I){return I.resolve()}))}).then(function(F){return F.join(`
`)})},impl:{readAll:A}};function A(){return Promise.resolve(v.asArray(document.styleSheets)).then(function(I){const X=[];return I.forEach(function(K){if(Object.getPrototypeOf(K).hasOwnProperty("cssRules"))try{v.asArray(K.cssRules||[]).forEach(X.push.bind(X))}catch(ve){console.log("Error while reading CSS rules from "+K.href,ve.toString())}}),X}).then(function(I){return I.filter(function(X){return X.type===CSSRule.FONT_FACE_RULE}).filter(function(X){return E.shouldProcess(X.style.getPropertyValue("src"))})}).then(function(I){return I.map(F)});function F(I){return{resolve:function(){var X=(I.parentStyleSheet||{}).href;return E.inlineAll(I.cssText,X)},src:function(){return I.style.getPropertyValue("src")}}}}const D={inlineAll:function F(I){return I instanceof Element?function(X){const K=X.style.getPropertyValue("background");return K?E.inlineAll(K).then(function(ve){X.style.setProperty("background",ve,K)}).then(function(){return X}):Promise.resolve(X)}(I).then(function(){return I instanceof HTMLImageElement?R(I).inline():Promise.all(v.asArray(I.childNodes).map(function(X){return F(X)}))}):Promise.resolve(I)},impl:{newImage:R}};function R(F){return{inline:function(I){return v.isDataUrl(F.src)?Promise.resolve():Promise.resolve(F.src).then(I||v.getAndEncode).then(function(X){return v.dataAsUrl(X,v.mimeType(F.src))}).then(function(X){return new Promise(function(K){F.onload=K,F.onerror=K,F.src=X})})}}}const W={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},Q={toSvg:N,toPng:function(F,I){return(I=I||{}).raster=!0,z(F,I).then(function(X){return X.toDataURL()})},toJpeg:function(F,I){return(I=I||{}).raster=!0,z(F,I).then(function(X){return X.toDataURL("image/jpeg",I.quality||1)})},toBlob:function(F,I){return(I=I||{}).raster=!0,z(F,I).then(v.canvasToBlob)},toPixelData:function(F,I){return(I=I||{}).raster=!0,z(F,I).then(function(X){return X.getContext("2d").getImageData(0,0,v.width(F),v.height(F)).data})},toCanvas:function(F,I){return(I=I||{}).raster=!0,z(F,I||{})},impl:{fontFaces:k,images:D,util:v,inliner:E,urlCache:[],options:{}}},de=(u.exports=Q,p.getComputedStyle||window.getComputedStyle),fe=p.atob||window.atob;function N(F,I){var X=I=I||{};return X.imagePlaceholder===void 0?Q.impl.options.imagePlaceholder=W.imagePlaceholder:Q.impl.options.imagePlaceholder=X.imagePlaceholder,X.cacheBust===void 0?Q.impl.options.cacheBust=W.cacheBust:Q.impl.options.cacheBust=X.cacheBust,X.useCredentials===void 0?Q.impl.options.useCredentials=W.useCredentials:Q.impl.options.useCredentials=X.useCredentials,Promise.resolve(F).then(function(K){return function ve(ge,He,ie,Ce,_e=null){return ie||!He||He(ge)?Promise.resolve(ge).then(function(H){return H instanceof HTMLCanvasElement?v.makeImage(H.toDataURL()):H.nodeName==="IFRAME"?html2canvas(H.contentDocument.body).then(ee=>ee.toDataURL()).then(v.makeImage):H.cloneNode(!1)}).then(function(H){return function(ee,pe){const re=ee.childNodes;return re.length===0?Promise.resolve(pe):function(ae,De){const be=de(ee);let Ie=Promise.resolve();return De.forEach(function(le){Ie=Ie.then(function(){return ve(le,He,!1,Ce,be)}).then(function(me){me&&ae.appendChild(me)})}),Ie}(pe,v.asArray(re)).then(function(){return pe})}(ge,H)}).then(function(H){return function(ee,pe,re){return pe instanceof Element?Promise.resolve().then(function(){(function(ae,De){const be=de(ae);be.cssText?(De.style.cssText=be.cssText,function(Ie,le){le.font=Ie.font,le.fontFamily=Ie.fontFamily,le.fontFeatureSettings=Ie.fontFeatureSettings,le.fontKerning=Ie.fontKerning,le.fontSize=Ie.fontSize,le.fontStretch=Ie.fontStretch,le.fontStyle=Ie.fontStyle,le.fontVariant=Ie.fontVariant,le.fontVariantCaps=Ie.fontVariantCaps,le.fontVariantEastAsian=Ie.fontVariantEastAsian,le.fontVariantLigatures=Ie.fontVariantLigatures,le.fontVariantNumeric=Ie.fontVariantNumeric,le.fontVariationSettings=Ie.fontVariationSettings,le.fontWeight=Ie.fontWeight}(be,De.style)):(re?function(Ie,le,me,oe){const Z=me.style,Ae=Ie.style;for(var je of le){var Ke=le.getPropertyValue(je),Me=Ae.getPropertyValue(je),he=(Ae.setProperty(je,oe?"initial":"unset"),le.getPropertyValue(je));he!==Ke?Z.setProperty(je,Ke):Z.removeProperty(je),Ae.setProperty(je,Me)}}(ae,be,De,ie):function(Ie,le,me){const oe=function(Ae){if($[Ae])return $[Ae];G||((G=document.createElement("iframe")).style.visibility="hidden",G.style.position="fixed",document.body.appendChild(G),G.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const je=document.createElement(Ae),Ke=(G.contentWindow.document.body.appendChild(je),je.textContent=".",G.contentWindow.getComputedStyle(je)),Me={};return v.asArray(Ke).forEach(function(he){Me[he]=he==="width"||he==="height"?"auto":Ke.getPropertyValue(he)}),G.contentWindow.document.body.removeChild(je),$[Ae]=Me}(me.tagName),Z=me.style;v.asArray(Ie).forEach(function(Ae){var je=Ie.getPropertyValue(Ae);(je!==oe[Ae]||le&&je!==le.getPropertyValue(Ae))&&Z.setProperty(Ae,je,Ie.getPropertyPriority(Ae))})}(be,_e,De),ie&&(["inset-block","inset-block-start","inset-block-end"].forEach(Ie=>De.style.removeProperty(Ie)),["left","right","top","bottom"].forEach(Ie=>{De.style.getPropertyValue(Ie)&&De.style.setProperty(Ie,"0px")})))})(ee,pe)}).then(function(){[":before",":after"].forEach(function(ae){(function(De){const be=de(ee,De),Ie=be.getPropertyValue("content");if(Ie!==""&&Ie!=="none"){const le=v.uid(),me=pe.getAttribute("class"),oe=(me&&pe.setAttribute("class",me+" "+le),document.createElement("style"));oe.appendChild(function(){const Z=`.${le}:`+De,Ae=(be.cssText?function(){return`${be.cssText} content: ${be.getPropertyValue("content")};`}:function(){return v.asArray(be).map(function(je){return je+": "+be.getPropertyValue(je)+(be.getPropertyPriority(je)?" !important":"")}).join("; ")+";"})();return document.createTextNode(Z+`{${Ae}}`)}()),pe.appendChild(oe)}})(ae)})}).then(function(){ee instanceof HTMLTextAreaElement&&(pe.innerHTML=ee.value),ee instanceof HTMLInputElement&&pe.setAttribute("value",ee.value)}).then(function(){pe instanceof SVGElement&&(pe.setAttribute("xmlns","http://www.w3.org/2000/svg"),pe instanceof SVGRectElement&&["width","height"].forEach(function(ae){const De=pe.getAttribute(ae);De&&pe.style.setProperty(ae,De)}))}).then(function(){return pe}):pe}(ge,H,Ce)}):Promise.resolve()}(K,I.filter,!0,!I.raster)}).then(J).then(U).then(function(K){I.bgcolor&&(K.style.backgroundColor=I.bgcolor),I.width&&(K.style.width=I.width+"px"),I.height&&(K.style.height=I.height+"px"),I.style&&Object.keys(I.style).forEach(function(ge){K.style[ge]=I.style[ge]});let ve=null;return typeof I.onclone=="function"&&(ve=I.onclone(K)),Promise.resolve(ve).then(function(){return K})}).then(function(K){return K=K,ve=I.width||v.width(F),ge=I.height||v.height(F),Promise.resolve(K).then(function(He){return He.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(He)}).then(v.escapeXhtml).then(function(He){return`<foreignObject x="0" y="0" width="100%" height="100%">${He}</foreignObject>`}).then(function(He){return`<svg xmlns="http://www.w3.org/2000/svg" width="${ve}" height="${ge}">${He}</svg>`}).then(function(He){return"data:image/svg+xml;charset=utf-8,"+He});var ve,ge}).then(function(K){return Q.impl.urlCache=[],K})}function z(F,I){return N(F,I).then(v.makeImage).then(v.delay(0)).then(function(X){var K=typeof I.scale!="number"?1:I.scale;const ve=function(He,ie){const Ce=document.createElement("canvas");if(Ce.width=(I.width||v.width(He))*ie,Ce.height=(I.height||v.height(He))*ie,I.bgcolor){const _e=Ce.getContext("2d");_e.fillStyle=I.bgcolor,_e.fillRect(0,0,Ce.width,Ce.height)}return Ce}(F,K),ge=ve.getContext("2d");return ge.mozImageSmoothingEnabled=!1,ge.msImageSmoothingEnabled=!1,ge.imageSmoothingEnabled=!1,X&&(ge.scale(K,K),ge.drawImage(X,0,0)),G&&(document.body.removeChild(G),G=null,B&&clearTimeout(B),B=setTimeout(()=>{B=null,$={}},2e4)),ve})}function J(F){return k.resolveAll().then(function(I){const X=document.createElement("style");return F.appendChild(X),X.appendChild(document.createTextNode(I)),F})}function U(F){return D.inlineAll(F).then(function(){return F})}let B=null,G=null,$={}})(r)}),o=i(function(u,h){(function(){function p(k,A,D){var R=new XMLHttpRequest;R.open("GET",k),R.responseType="blob",R.onload=function(){E(R.response,A,D)},R.onerror=function(){console.error("could not download file")},R.send()}function v(k){var A=new XMLHttpRequest;A.open("HEAD",k,!1);try{A.send()}catch{}return 200<=A.status&&299>=A.status}function m(k){try{k.dispatchEvent(new MouseEvent("click"))}catch{var A=document.createEvent("MouseEvents");A.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),k.dispatchEvent(A)}}var C=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,E=C.saveAs||(typeof window!="object"||window!==C?function(){}:"download"in HTMLAnchorElement.prototype?function(k,A,D){var R=C.URL||C.webkitURL,W=document.createElement("a");A=A||k.name||"download",W.download=A,W.rel="noopener",typeof k=="string"?(W.href=k,W.origin===location.origin?m(W):v(W.href)?p(k,A,D):m(W,W.target="_blank")):(W.href=R.createObjectURL(k),setTimeout(function(){R.revokeObjectURL(W.href)},4e4),setTimeout(function(){m(W)},0))}:"msSaveOrOpenBlob"in navigator?function(k,A,D){if(A=A||k.name||"download",typeof k!="string")navigator.msSaveOrOpenBlob(function(W,Q){return Q===void 0?Q={autoBom:!1}:typeof Q!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),Q={autoBom:!Q}),Q.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(W.type)?new Blob(["\uFEFF",W],{type:W.type}):W}(k,D),A);else if(v(k))p(k,A,D);else{var R=document.createElement("a");R.href=k,R.target="_blank",setTimeout(function(){m(R)})}}:function(k,A,D,R){if((R=R||open("","_blank"))&&(R.document.title=R.document.body.innerText="downloading..."),typeof k=="string")return p(k,A,D);var W=k.type==="application/octet-stream",Q=/constructor/i.test(C.HTMLElement)||C.safari,de=/CriOS\/[\d]+/.test(navigator.userAgent);if((de||W&&Q)&&typeof FileReader=="object"){var fe=new FileReader;fe.onloadend=function(){var J=fe.result;J=de?J:J.replace(/^data:[^;]*;/,"data:attachment/file;"),R?R.location.href=J:location=J,R=null},fe.readAsDataURL(k)}else{var N=C.URL||C.webkitURL,z=N.createObjectURL(k);R?R.location=z:location.href=z,R=null,setTimeout(function(){N.revokeObjectURL(z)},4e4)}});C.saveAs=E.saveAs=E,u.exports=E})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(u){var h=u.node,p=u.error;return console.warn("Map node is very big "+h.scrollWidth+"x"+h.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var u=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var m in this.options)p.hasOwnProperty(m)?v[m]=p[m]:v[m]=this.options[m];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return u._getPixelData(v)}).then(function(C){return u._setElementsVisible(!0),u._toCanvas(C,v)}).then(function(C){return h==="image"?u._canvasToImage(C,v):h==="canvas"?C:u._canvasToBlob(C,v)}).then(function(C){return u._screenState.status=1,u._map.fire("simpleMapScreenshoter.done"),C}).catch(function(C){return u._setElementsVisible(!0),u._screenState.status=1,u._map.fire("simpleMapScreenshoter.error",{e:C}),Promise.reject(C)}),this._screenState.promise)},_setElementsVisible:function(){var u=this,h=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=u._map._container.querySelectorAll(p),m=!0,C=!1,E=void 0;try{for(var k,A=v[Symbol.iterator]();!(m=(k=A.next()).done);m=!0)k.value.style.opacity=h===!1?0:1}catch(D){C=!0,E=D}finally{try{!m&&A.return&&A.return()}finally{if(C)throw E}}})},_canvasToImage:function(u,h){var p=h.mimeType,v=u.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(u,h){var p=h.mimeType;return new Promise(function(v,m){u.toBlob(function(C){v(C)},p)})},_toCanvas:function(u,h){var p=h.captionOffset,v=h.caption,m=h.captionFontSize,C=h.captionFont,E=h.captionColor,k=h.captionBgColor,A=this._node,D=A.screenHeight,R=A.screenWidth,W=document.createElement("canvas");W.width=R,W.height=D;for(var Q=W.getContext("2d"),de=Q.createImageData(R,D),fe=0;fe<u.length;++fe)de.data[fe]=u[fe];Q.putImageData(de,0,0),de=null;var N=document.createElement("canvas"),z=N.getContext("2d"),J=0,U=0,B=D,G=R;if(this.options.cropImageByInnerWH===!0){for(var $=[],F=0,I=0;I<D;++I){F=0;for(var X=0;X<R;++X)u[4*I*R+4*X+4]===0&&F++;F===R&&$.push(I)}var K=this._getMinAndMaxOnValuesBreak($);J=K.min;for(var ve=R,ge=K.max,He=[],ie=0,Ce=U;Ce<ve;++Ce){ie=0;for(var _e=0;_e<D;++_e)u[4*_e*R+4*Ce+4]===0&&ie++;ie===D&&He.push(Ce)}var H=this._getMinAndMaxOnValuesBreak(He);U=H.min,ve=H.max,(U===0&&ve===0||ve===null)&&(ve=R),(J===0&&ge===0||ge===null)&&(ge=D),this.options.debugMode===!0&&(console.log("emptyYLine",$),console.log("minMaxY",K),console.log("emptyXLine",He),console.log("minMaxX",H),console.log("debugX",{}),console.log("debugY",{})),J===0&&ge===D&&U===0&&ve===R||(J+=this.options.onCropBorderSize,ge-=this.options.onCropBorderSize,U+=this.options.onCropBorderSize,ve-=this.options.onCropBorderSize),B=ge-J,G=ve-U,N.width=G,N.height=B}else N.width=G,N.height=B;var ee=null;return v&&(ee=typeof v=="function"?v.call(this):v),ee!==null&&(N.height=N.height+(p+m+p),z.beginPath(),z.rect(0,0,N.width,N.height),z.fillStyle=k,z.fill(),z.save()),z.drawImage(W,U,J,G,B,0,0,G,B),ee!==null&&(z.font=m+"px "+C,z.fillStyle=E,z.fillText(ee,p,B+p+m)),Promise.resolve(N)},_getMinAndMaxOnValuesBreak:function(u){for(var h=0,p=0,v=!1,m=1;m<u.length;m++){if(u[m]-1!==u[m-1]){p=u[m],v=!0;break}h=u[m]}return v===!1&&u[0]>1?(h=0,p=u[0]):v===!1&&(h=u[u.length-1]||0,p=null),{min:h,max:p}},_getPixelData:function(u){var h=this,p=u.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(m){return console.warn("May be map size very big on that zoom level, we have error:",m.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),h._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=this._map.getContainer();return this._node={node:h,screenHeight:h.scrollHeight,screenWidth:h.scrollWidth},s.toPixelData(h,u)},_getPixelDataOfBigMap:function(){var u=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var m=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,h).then(function(C){return m(),C}).catch(function(C){return m(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?u.options.onPixelDataFail({plugin:u,node:p,mapPane:v,error:C,domtoimageOptions:h}):Promise.reject(C)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var u=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,h=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(u)),h.appendChild(p)},_onScreenBtn:function(){var u=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(h){var p=typeof u.options.screenName=="function"?u.options.screenName.call(u):u.options.screenName;o.saveAs(h,p+".png")}).catch(function(h){u._map.fire("simpleMapScreenshoter.error",{e:h})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var u=this;return new Promise(function(h){var p=setInterval(function(){u._interaction||(h(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(u){return new L.Control.SimpleMapScreenshoter(u)},a);t.default=l,t.SimpleMapScreenshoter=a,Object.defineProperty(t,"__esModule",{value:!0})})})(s5,s5.exports);var _l=63710088e-1,TE={centimeters:_l*100,centimetres:_l*100,degrees:360/(2*Math.PI),feet:_l*3.28084,inches:_l*39.37,kilometers:_l/1e3,kilometres:_l/1e3,meters:_l,metres:_l,miles:_l/1609.344,millimeters:_l*1e3,millimetres:_l*1e3,nauticalmiles:_l/1852,radians:1,yards:_l*1.0936};function Dp(n,e,t={}){const r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=n,r}function Hv(n,e,t={}){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!o5(n[0])||!o5(n[1]))throw new Error("coordinates must contain numbers");return Dp({type:"Point",coordinates:n},e,t)}function Hu(n,e,t={}){for(const i of n){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Dp({type:"Polygon",coordinates:n},e,t)}function yc(n,e,t={}){if(n.length<2)throw new Error("coordinates must be an array of two or more positions");return Dp({type:"LineString",coordinates:n},e,t)}function Hj(n,e={}){const t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function Gj(n,e,t={}){return Dp({type:"MultiPolygon",coordinates:n},e,t)}function Wj(n,e="kilometers"){const t=TE[e];if(!t)throw new Error(e+" units is invalid");return n*t}function qj(n,e="kilometers"){const t=TE[e];if(!t)throw new Error(e+" units is invalid");return n/t}function b2(n){return n%(2*Math.PI)*180/Math.PI}function wc(n){return n%360*Math.PI/180}function o5(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function a5(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Yj(n){return n.type==="Feature"?n.geometry:n}function DE(n,e,t={}){if(t.final===!0)return Kj(n,e);const r=a5(n),i=a5(e),s=wc(r[0]),o=wc(i[0]),a=wc(r[1]),l=wc(i[1]),u=Math.sin(o-s)*Math.cos(l),h=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return b2(Math.atan2(u,h))}function Kj(n,e){let t=DE(e,n);return t=(t+180)%360,t}function Zj(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function U_(n,e,t,r={}){const i=Zj(n),s=wc(i[0]),o=wc(i[1]),a=wc(t),l=qj(e,r.units),u=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),h=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(u)),p=b2(h),v=b2(u);return Hv([p,v],r.properties)}var l5=U_;function u5(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function V_(n,e,t={}){var r=u5(n),i=u5(e),s=wc(i[1]-r[1]),o=wc(i[0]-r[0]),a=wc(r[1]),l=wc(i[1]),u=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Wj(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),t.units)}var Q1=V_;function Xj(n,e,t={}){const i=Yj(n).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=DE(i[o],i[o-1])-180;return U_(i[o],a,l,t)}else return Hv(i[o])}else s+=V_(i[o],i[o+1],t);return Hv(i[i.length-1])}var c5=Xj;function Jj(n,e){var t,r,i,s,o,a,l,u,h,p,v=0,m=n.type==="FeatureCollection",C=n.type==="Feature",E=m?n.features.length:1;for(t=0;t<E;t++){for(a=m?n.features[t].geometry:C?n.geometry:n,u=m?n.features[t].properties:C?n.properties:{},h=m?n.features[t].bbox:C?n.bbox:void 0,p=m?n.features[t].id:C?n.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,u,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,u,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,u,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Qj(n,e,t){var r=t;return Jj(n,function(i,s,o,a,l){s===0&&t===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function OE(n){return Qj(n,(e,t)=>e+ez(t),0)}function ez(n){let e=0,t;switch(n.type){case"Polygon":return d5(n.coordinates);case"MultiPolygon":for(t=0;t<n.coordinates.length;t++)e+=d5(n.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function d5(n){let e=0;if(n&&n.length>0){e+=Math.abs(h5(n[0]));for(let t=1;t<n.length;t++)e-=Math.abs(h5(n[t]))}return e}var tz=_l*_l/2,eb=Math.PI/180;function h5(n){const e=n.length-1;if(e<=2)return 0;let t=0,r=0;for(;r<e;){const i=n[r],s=n[r+1===e?0:r+1],o=n[r+2>=e?(r+2)%e:r+2],a=i[0]*eb,l=s[1]*eb,u=o[0]*eb;t+=(u-a)*Math.sin(l),r++}return t*tz}var $c=OE;function NE(n,e,t){if(n!==null)for(var r,i,s,o,a,l,u,h=0,p=0,v,m=n.type,C=m==="FeatureCollection",E=m==="Feature",k=C?n.features.length:1,A=0;A<k;A++){u=C?n.features[A].geometry:E?n.geometry:n,v=u?u.type==="GeometryCollection":!1,a=v?u.geometries.length:1;for(var D=0;D<a;D++){var R=0,W=0;if(o=v?u.geometries[D]:u,o!==null){l=o.coordinates;var Q=o.type;switch(h=Q==="Polygon"||Q==="MultiPolygon"?1:0,Q){case null:break;case"Point":if(e(l,p,A,R,W)===!1)return!1;p++,R++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,R,W)===!1)return!1;p++,Q==="MultiPoint"&&R++}Q==="LineString"&&R++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(e(l[r][i],p,A,R,W)===!1)return!1;p++}Q==="MultiLineString"&&R++,Q==="Polygon"&&W++}Q==="Polygon"&&R++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(W=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(e(l[r][i][s],p,A,R,W)===!1)return!1;p++}W++}R++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(NE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function nz(n,e={}){let t=0,r=0,i=0;return NE(n,function(s){t+=s[0],r+=s[1],i++}),Hv([t/i,r/i],e.properties)}var qg=nz;function rz(n,e,t={}){const r=t.steps||64,i=t.properties?t.properties:!Array.isArray(n)&&n.type==="Feature"&&n.properties?n.properties:{},s=[];for(let o=0;o<r;o++)s.push(U_(n,e,o*-360/r,t).geometry.coordinates);return s.push(s[0]),Hu([s],i)}var iz=rz,sz=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,tb=Math.ceil,Uu=Math.floor,Vl="[BigNumber Error] ",f5=Vl+"Number primitive has more than 15 significant digits: ",dc=1e14,Wr=14,p5=9007199254740991,nb=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Qd=1e7,mu=1e9;function IE(n){var e,t,r,i=D.prototype={constructor:D,toString:null,valueOf:null},s=new D(1),o=20,a=4,l=-7,u=21,h=-1e7,p=1e7,v=!1,m=1,C=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},k="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function D(N,z){var J,U,B,G,$,F,I,X,K=this;if(!(K instanceof D))return new D(N,z);if(z==null){if(N&&N._isBigNumber===!0){K.s=N.s,!N.c||N.e>p?K.c=K.e=null:N.e<h?K.c=[K.e=0]:(K.e=N.e,K.c=N.c.slice());return}if((F=typeof N=="number")&&N*0==0){if(K.s=1/N<0?(N=-N,-1):1,N===~~N){for(G=0,$=N;$>=10;$/=10,G++);G>p?K.c=K.e=null:(K.e=G,K.c=[N]);return}X=String(N)}else{if(!sz.test(X=String(N)))return r(K,X,F);K.s=X.charCodeAt(0)==45?(X=X.slice(1),-1):1}(G=X.indexOf("."))>-1&&(X=X.replace(".","")),($=X.search(/e/i))>0?(G<0&&(G=$),G+=+X.slice($+1),X=X.substring(0,$)):G<0&&(G=X.length)}else{if(Qs(z,2,k.length,"Base"),z==10&&A)return K=new D(N),de(K,o+K.e+1,a);if(X=String(N),F=typeof N=="number"){if(N*0!=0)return r(K,X,F,z);if(K.s=1/N<0?(X=X.slice(1),-1):1,D.DEBUG&&X.replace(/^0\.0*|\./,"").length>15)throw Error(f5+N)}else K.s=X.charCodeAt(0)===45?(X=X.slice(1),-1):1;for(J=k.slice(0,z),G=$=0,I=X.length;$<I;$++)if(J.indexOf(U=X.charAt($))<0){if(U=="."){if($>G){G=I;continue}}else if(!B&&(X==X.toUpperCase()&&(X=X.toLowerCase())||X==X.toLowerCase()&&(X=X.toUpperCase()))){B=!0,$=-1,G=0;continue}return r(K,String(N),F,z)}F=!1,X=t(X,z,10,K.s),(G=X.indexOf("."))>-1?X=X.replace(".",""):G=X.length}for($=0;X.charCodeAt($)===48;$++);for(I=X.length;X.charCodeAt(--I)===48;);if(X=X.slice($,++I)){if(I-=$,F&&D.DEBUG&&I>15&&(N>p5||N!==Uu(N)))throw Error(f5+K.s*N);if((G=G-$-1)>p)K.c=K.e=null;else if(G<h)K.c=[K.e=0];else{if(K.e=G,K.c=[],$=(G+1)%Wr,G<0&&($+=Wr),$<I){for($&&K.c.push(+X.slice(0,$)),I-=Wr;$<I;)K.c.push(+X.slice($,$+=Wr));$=Wr-(X=X.slice($)).length}else $-=I;for(;$--;X+="0");K.c.push(+X)}}else K.c=[K.e=0]}D.clone=IE,D.ROUND_UP=0,D.ROUND_DOWN=1,D.ROUND_CEIL=2,D.ROUND_FLOOR=3,D.ROUND_HALF_UP=4,D.ROUND_HALF_DOWN=5,D.ROUND_HALF_EVEN=6,D.ROUND_HALF_CEIL=7,D.ROUND_HALF_FLOOR=8,D.EUCLID=9,D.config=D.set=function(N){var z,J;if(N!=null)if(typeof N=="object"){if(N.hasOwnProperty(z="DECIMAL_PLACES")&&(J=N[z],Qs(J,0,mu,z),o=J),N.hasOwnProperty(z="ROUNDING_MODE")&&(J=N[z],Qs(J,0,8,z),a=J),N.hasOwnProperty(z="EXPONENTIAL_AT")&&(J=N[z],J&&J.pop?(Qs(J[0],-1e9,0,z),Qs(J[1],0,mu,z),l=J[0],u=J[1]):(Qs(J,-1e9,mu,z),l=-(u=J<0?-J:J))),N.hasOwnProperty(z="RANGE"))if(J=N[z],J&&J.pop)Qs(J[0],-1e9,-1,z),Qs(J[1],1,mu,z),h=J[0],p=J[1];else if(Qs(J,-1e9,mu,z),J)h=-(p=J<0?-J:J);else throw Error(Vl+z+" cannot be zero: "+J);if(N.hasOwnProperty(z="CRYPTO"))if(J=N[z],J===!!J)if(J)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=J;else throw v=!J,Error(Vl+"crypto unavailable");else v=J;else throw Error(Vl+z+" not true or false: "+J);if(N.hasOwnProperty(z="MODULO_MODE")&&(J=N[z],Qs(J,0,9,z),m=J),N.hasOwnProperty(z="POW_PRECISION")&&(J=N[z],Qs(J,0,mu,z),C=J),N.hasOwnProperty(z="FORMAT"))if(J=N[z],typeof J=="object")E=J;else throw Error(Vl+z+" not an object: "+J);if(N.hasOwnProperty(z="ALPHABET"))if(J=N[z],typeof J=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(J))A=J.slice(0,10)=="0123456789",k=J;else throw Error(Vl+z+" invalid: "+J)}else throw Error(Vl+"Object expected: "+N);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,u],RANGE:[h,p],CRYPTO:v,MODULO_MODE:m,POW_PRECISION:C,FORMAT:E,ALPHABET:k}},D.isBigNumber=function(N){if(!N||N._isBigNumber!==!0)return!1;if(!D.DEBUG)return!0;var z,J,U=N.c,B=N.e,G=N.s;e:if({}.toString.call(U)=="[object Array]"){if((G===1||G===-1)&&B>=-1e9&&B<=mu&&B===Uu(B)){if(U[0]===0){if(B===0&&U.length===1)return!0;break e}if(z=(B+1)%Wr,z<1&&(z+=Wr),String(U[0]).length==z){for(z=0;z<U.length;z++)if(J=U[z],J<0||J>=dc||J!==Uu(J))break e;if(J!==0)return!0}}}else if(U===null&&B===null&&(G===null||G===1||G===-1))return!0;throw Error(Vl+"Invalid BigNumber: "+N)},D.maximum=D.max=function(){return W(arguments,-1)},D.minimum=D.min=function(){return W(arguments,1)},D.random=function(){var N=9007199254740992,z=Math.random()*N&2097151?function(){return Uu(Math.random()*N)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(J){var U,B,G,$,F,I=0,X=[],K=new D(s);if(J==null?J=o:Qs(J,0,mu),$=tb(J/Wr),v)if(crypto.getRandomValues){for(U=crypto.getRandomValues(new Uint32Array($*=2));I<$;)F=U[I]*131072+(U[I+1]>>>11),F>=9e15?(B=crypto.getRandomValues(new Uint32Array(2)),U[I]=B[0],U[I+1]=B[1]):(X.push(F%1e14),I+=2);I=$/2}else if(crypto.randomBytes){for(U=crypto.randomBytes($*=7);I<$;)F=(U[I]&31)*281474976710656+U[I+1]*1099511627776+U[I+2]*4294967296+U[I+3]*16777216+(U[I+4]<<16)+(U[I+5]<<8)+U[I+6],F>=9e15?crypto.randomBytes(7).copy(U,I):(X.push(F%1e14),I+=7);I=$/7}else throw v=!1,Error(Vl+"crypto unavailable");if(!v)for(;I<$;)F=z(),F<9e15&&(X[I++]=F%1e14);for($=X[--I],J%=Wr,$&&J&&(F=nb[Wr-J],X[I]=Uu($/F)*F);X[I]===0;X.pop(),I--);if(I<0)X=[G=0];else{for(G=-1;X[0]===0;X.splice(0,1),G-=Wr);for(I=1,F=X[0];F>=10;F/=10,I++);I<Wr&&(G-=Wr-I)}return K.e=G,K.c=X,K}}(),D.sum=function(){for(var N=1,z=arguments,J=new D(z[0]);N<z.length;)J=J.plus(z[N++]);return J},t=function(){var N="0123456789";function z(J,U,B,G){for(var $,F=[0],I,X=0,K=J.length;X<K;){for(I=F.length;I--;F[I]*=U);for(F[0]+=G.indexOf(J.charAt(X++)),$=0;$<F.length;$++)F[$]>B-1&&(F[$+1]==null&&(F[$+1]=0),F[$+1]+=F[$]/B|0,F[$]%=B)}return F.reverse()}return function(J,U,B,G,$){var F,I,X,K,ve,ge,He,ie,Ce=J.indexOf("."),_e=o,H=a;for(Ce>=0&&(K=C,C=0,J=J.replace(".",""),ie=new D(U),ge=ie.pow(J.length-Ce),C=K,ie.c=z(Ld(ju(ge.c),ge.e,"0"),10,B,N),ie.e=ie.c.length),He=z(J,U,B,$?(F=k,N):(F=N,k)),X=K=He.length;He[--K]==0;He.pop());if(!He[0])return F.charAt(0);if(Ce<0?--X:(ge.c=He,ge.e=X,ge.s=G,ge=e(ge,ie,_e,H,B),He=ge.c,ve=ge.r,X=ge.e),I=X+_e+1,Ce=He[I],K=B/2,ve=ve||I<0||He[I+1]!=null,ve=H<4?(Ce!=null||ve)&&(H==0||H==(ge.s<0?3:2)):Ce>K||Ce==K&&(H==4||ve||H==6&&He[I-1]&1||H==(ge.s<0?8:7)),I<1||!He[0])J=ve?Ld(F.charAt(1),-_e,F.charAt(0)):F.charAt(0);else{if(He.length=I,ve)for(--B;++He[--I]>B;)He[I]=0,I||(++X,He=[1].concat(He));for(K=He.length;!He[--K];);for(Ce=0,J="";Ce<=K;J+=F.charAt(He[Ce++]));J=Ld(J,X,F.charAt(0))}return J}}(),e=function(){function N(U,B,G){var $,F,I,X,K=0,ve=U.length,ge=B%Qd,He=B/Qd|0;for(U=U.slice();ve--;)I=U[ve]%Qd,X=U[ve]/Qd|0,$=He*I+X*ge,F=ge*I+$%Qd*Qd+K,K=(F/G|0)+($/Qd|0)+He*X,U[ve]=F%G;return K&&(U=[K].concat(U)),U}function z(U,B,G,$){var F,I;if(G!=$)I=G>$?1:-1;else for(F=I=0;F<G;F++)if(U[F]!=B[F]){I=U[F]>B[F]?1:-1;break}return I}function J(U,B,G,$){for(var F=0;G--;)U[G]-=F,F=U[G]<B[G]?1:0,U[G]=F*$+U[G]-B[G];for(;!U[0]&&U.length>1;U.splice(0,1));}return function(U,B,G,$,F){var I,X,K,ve,ge,He,ie,Ce,_e,H,ee,pe,re,ae,De,be,Ie,le=U.s==B.s?1:-1,me=U.c,oe=B.c;if(!me||!me[0]||!oe||!oe[0])return new D(!U.s||!B.s||(me?oe&&me[0]==oe[0]:!oe)?NaN:me&&me[0]==0||!oe?le*0:le/0);for(Ce=new D(le),_e=Ce.c=[],X=U.e-B.e,le=G+X+1,F||(F=dc,X=Vu(U.e/Wr)-Vu(B.e/Wr),le=le/Wr|0),K=0;oe[K]==(me[K]||0);K++);if(oe[K]>(me[K]||0)&&X--,le<0)_e.push(1),ve=!0;else{for(ae=me.length,be=oe.length,K=0,le+=2,ge=Uu(F/(oe[0]+1)),ge>1&&(oe=N(oe,ge,F),me=N(me,ge,F),be=oe.length,ae=me.length),re=be,H=me.slice(0,be),ee=H.length;ee<be;H[ee++]=0);Ie=oe.slice(),Ie=[0].concat(Ie),De=oe[0],oe[1]>=F/2&&De++;do{if(ge=0,I=z(oe,H,be,ee),I<0){if(pe=H[0],be!=ee&&(pe=pe*F+(H[1]||0)),ge=Uu(pe/De),ge>1)for(ge>=F&&(ge=F-1),He=N(oe,ge,F),ie=He.length,ee=H.length;z(He,H,ie,ee)==1;)ge--,J(He,be<ie?Ie:oe,ie,F),ie=He.length,I=1;else ge==0&&(I=ge=1),He=oe.slice(),ie=He.length;if(ie<ee&&(He=[0].concat(He)),J(H,He,ee,F),ee=H.length,I==-1)for(;z(oe,H,be,ee)<1;)ge++,J(H,be<ee?Ie:oe,ee,F),ee=H.length}else I===0&&(ge++,H=[0]);_e[K++]=ge,H[0]?H[ee++]=me[re]||0:(H=[me[re]],ee=1)}while((re++<ae||H[0]!=null)&&le--);ve=H[0]!=null,_e[0]||_e.splice(0,1)}if(F==dc){for(K=1,le=_e[0];le>=10;le/=10,K++);de(Ce,G+(Ce.e=K+X*Wr-1)+1,$,ve)}else Ce.e=X,Ce.r=+ve;return Ce}}();function R(N,z,J,U){var B,G,$,F,I;if(J==null?J=a:Qs(J,0,8),!N.c)return N.toString();if(B=N.c[0],$=N.e,z==null)I=ju(N.c),I=U==1||U==2&&($<=l||$>=u)?C0(I,$):Ld(I,$,"0");else if(N=de(new D(N),z,J),G=N.e,I=ju(N.c),F=I.length,U==1||U==2&&(z<=G||G<=l)){for(;F<z;I+="0",F++);I=C0(I,G)}else if(z-=$,I=Ld(I,G,"0"),G+1>F){if(--z>0)for(I+=".";z--;I+="0");}else if(z+=G-F,z>0)for(G+1==F&&(I+=".");z--;I+="0");return N.s<0&&B?"-"+I:I}function W(N,z){for(var J,U,B=1,G=new D(N[0]);B<N.length;B++)U=new D(N[B]),(!U.s||(J=Gh(G,U))===z||J===0&&G.s===z)&&(G=U);return G}function Q(N,z,J){for(var U=1,B=z.length;!z[--B];z.pop());for(B=z[0];B>=10;B/=10,U++);return(J=U+J*Wr-1)>p?N.c=N.e=null:J<h?N.c=[N.e=0]:(N.e=J,N.c=z),N}r=function(){var N=/^(-?)0([xbo])(?=\w[\w.]*$)/i,z=/^([^.]+)\.$/,J=/^\.([^.]+)$/,U=/^-?(Infinity|NaN)$/,B=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(G,$,F,I){var X,K=F?$:$.replace(B,"");if(U.test(K))G.s=isNaN(K)?null:K<0?-1:1;else{if(!F&&(K=K.replace(N,function(ve,ge,He){return X=(He=He.toLowerCase())=="x"?16:He=="b"?2:8,!I||I==X?ge:ve}),I&&(X=I,K=K.replace(z,"$1").replace(J,"0.$1")),$!=K))return new D(K,X);if(D.DEBUG)throw Error(Vl+"Not a"+(I?" base "+I:"")+" number: "+$);G.s=null}G.c=G.e=null}}();function de(N,z,J,U){var B,G,$,F,I,X,K,ve=N.c,ge=nb;if(ve){e:{for(B=1,F=ve[0];F>=10;F/=10,B++);if(G=z-B,G<0)G+=Wr,$=z,I=ve[X=0],K=Uu(I/ge[B-$-1]%10);else if(X=tb((G+1)/Wr),X>=ve.length)if(U){for(;ve.length<=X;ve.push(0));I=K=0,B=1,G%=Wr,$=G-Wr+1}else break e;else{for(I=F=ve[X],B=1;F>=10;F/=10,B++);G%=Wr,$=G-Wr+B,K=$<0?0:Uu(I/ge[B-$-1]%10)}if(U=U||z<0||ve[X+1]!=null||($<0?I:I%ge[B-$-1]),U=J<4?(K||U)&&(J==0||J==(N.s<0?3:2)):K>5||K==5&&(J==4||U||J==6&&(G>0?$>0?I/ge[B-$]:0:ve[X-1])%10&1||J==(N.s<0?8:7)),z<1||!ve[0])return ve.length=0,U?(z-=N.e+1,ve[0]=ge[(Wr-z%Wr)%Wr],N.e=-z||0):ve[0]=N.e=0,N;if(G==0?(ve.length=X,F=1,X--):(ve.length=X+1,F=ge[Wr-G],ve[X]=$>0?Uu(I/ge[B-$]%ge[$])*F:0),U)for(;;)if(X==0){for(G=1,$=ve[0];$>=10;$/=10,G++);for($=ve[0]+=F,F=1;$>=10;$/=10,F++);G!=F&&(N.e++,ve[0]==dc&&(ve[0]=1));break}else{if(ve[X]+=F,ve[X]!=dc)break;ve[X--]=0,F=1}for(G=ve.length;ve[--G]===0;ve.pop());}N.e>p?N.c=N.e=null:N.e<h&&(N.c=[N.e=0])}return N}function fe(N){var z,J=N.e;return J===null?N.toString():(z=ju(N.c),z=J<=l||J>=u?C0(z,J):Ld(z,J,"0"),N.s<0?"-"+z:z)}return i.absoluteValue=i.abs=function(){var N=new D(this);return N.s<0&&(N.s=1),N},i.comparedTo=function(N,z){return Gh(this,new D(N,z))},i.decimalPlaces=i.dp=function(N,z){var J,U,B,G=this;if(N!=null)return Qs(N,0,mu),z==null?z=a:Qs(z,0,8),de(new D(G),N+G.e+1,z);if(!(J=G.c))return null;if(U=((B=J.length-1)-Vu(this.e/Wr))*Wr,B=J[B])for(;B%10==0;B/=10,U--);return U<0&&(U=0),U},i.dividedBy=i.div=function(N,z){return e(this,new D(N,z),o,a)},i.dividedToIntegerBy=i.idiv=function(N,z){return e(this,new D(N,z),0,1)},i.exponentiatedBy=i.pow=function(N,z){var J,U,B,G,$,F,I,X,K,ve=this;if(N=new D(N),N.c&&!N.isInteger())throw Error(Vl+"Exponent not an integer: "+fe(N));if(z!=null&&(z=new D(z)),F=N.e>14,!ve.c||!ve.c[0]||ve.c[0]==1&&!ve.e&&ve.c.length==1||!N.c||!N.c[0])return K=new D(Math.pow(+fe(ve),F?N.s*(2-L0(N)):+fe(N))),z?K.mod(z):K;if(I=N.s<0,z){if(z.c?!z.c[0]:!z.s)return new D(NaN);U=!I&&ve.isInteger()&&z.isInteger(),U&&(ve=ve.mod(z))}else{if(N.e>9&&(ve.e>0||ve.e<-1||(ve.e==0?ve.c[0]>1||F&&ve.c[1]>=24e7:ve.c[0]<8e13||F&&ve.c[0]<=9999975e7)))return G=ve.s<0&&L0(N)?-0:0,ve.e>-1&&(G=1/G),new D(I?1/G:G);C&&(G=tb(C/Wr+2))}for(F?(J=new D(.5),I&&(N.s=1),X=L0(N)):(B=Math.abs(+fe(N)),X=B%2),K=new D(s);;){if(X){if(K=K.times(ve),!K.c)break;G?K.c.length>G&&(K.c.length=G):U&&(K=K.mod(z))}if(B){if(B=Uu(B/2),B===0)break;X=B%2}else if(N=N.times(J),de(N,N.e+1,1),N.e>14)X=L0(N);else{if(B=+fe(N),B===0)break;X=B%2}ve=ve.times(ve),G?ve.c&&ve.c.length>G&&(ve.c.length=G):U&&(ve=ve.mod(z))}return U?K:(I&&(K=s.div(K)),z?K.mod(z):G?de(K,C,a,$):K)},i.integerValue=function(N){var z=new D(this);return N==null?N=a:Qs(N,0,8),de(z,z.e+1,N)},i.isEqualTo=i.eq=function(N,z){return Gh(this,new D(N,z))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(N,z){return Gh(this,new D(N,z))>0},i.isGreaterThanOrEqualTo=i.gte=function(N,z){return(z=Gh(this,new D(N,z)))===1||z===0},i.isInteger=function(){return!!this.c&&Vu(this.e/Wr)>this.c.length-2},i.isLessThan=i.lt=function(N,z){return Gh(this,new D(N,z))<0},i.isLessThanOrEqualTo=i.lte=function(N,z){return(z=Gh(this,new D(N,z)))===-1||z===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(N,z){var J,U,B,G,$=this,F=$.s;if(N=new D(N,z),z=N.s,!F||!z)return new D(NaN);if(F!=z)return N.s=-z,$.plus(N);var I=$.e/Wr,X=N.e/Wr,K=$.c,ve=N.c;if(!I||!X){if(!K||!ve)return K?(N.s=-z,N):new D(ve?$:NaN);if(!K[0]||!ve[0])return ve[0]?(N.s=-z,N):new D(K[0]?$:a==3?-0:0)}if(I=Vu(I),X=Vu(X),K=K.slice(),F=I-X){for((G=F<0)?(F=-F,B=K):(X=I,B=ve),B.reverse(),z=F;z--;B.push(0));B.reverse()}else for(U=(G=(F=K.length)<(z=ve.length))?F:z,F=z=0;z<U;z++)if(K[z]!=ve[z]){G=K[z]<ve[z];break}if(G&&(B=K,K=ve,ve=B,N.s=-N.s),z=(U=ve.length)-(J=K.length),z>0)for(;z--;K[J++]=0);for(z=dc-1;U>F;){if(K[--U]<ve[U]){for(J=U;J&&!K[--J];K[J]=z);--K[J],K[U]+=dc}K[U]-=ve[U]}for(;K[0]==0;K.splice(0,1),--X);return K[0]?Q(N,K,X):(N.s=a==3?-1:1,N.c=[N.e=0],N)},i.modulo=i.mod=function(N,z){var J,U,B=this;return N=new D(N,z),!B.c||!N.s||N.c&&!N.c[0]?new D(NaN):!N.c||B.c&&!B.c[0]?new D(B):(m==9?(U=N.s,N.s=1,J=e(B,N,0,3),N.s=U,J.s*=U):J=e(B,N,0,m),N=B.minus(J.times(N)),!N.c[0]&&m==1&&(N.s=B.s),N)},i.multipliedBy=i.times=function(N,z){var J,U,B,G,$,F,I,X,K,ve,ge,He,ie,Ce,_e,H=this,ee=H.c,pe=(N=new D(N,z)).c;if(!ee||!pe||!ee[0]||!pe[0])return!H.s||!N.s||ee&&!ee[0]&&!pe||pe&&!pe[0]&&!ee?N.c=N.e=N.s=null:(N.s*=H.s,!ee||!pe?N.c=N.e=null:(N.c=[0],N.e=0)),N;for(U=Vu(H.e/Wr)+Vu(N.e/Wr),N.s*=H.s,I=ee.length,ve=pe.length,I<ve&&(ie=ee,ee=pe,pe=ie,B=I,I=ve,ve=B),B=I+ve,ie=[];B--;ie.push(0));for(Ce=dc,_e=Qd,B=ve;--B>=0;){for(J=0,ge=pe[B]%_e,He=pe[B]/_e|0,$=I,G=B+$;G>B;)X=ee[--$]%_e,K=ee[$]/_e|0,F=He*X+K*ge,X=ge*X+F%_e*_e+ie[G]+J,J=(X/Ce|0)+(F/_e|0)+He*K,ie[G--]=X%Ce;ie[G]=J}return J?++U:ie.splice(0,1),Q(N,ie,U)},i.negated=function(){var N=new D(this);return N.s=-N.s||null,N},i.plus=function(N,z){var J,U=this,B=U.s;if(N=new D(N,z),z=N.s,!B||!z)return new D(NaN);if(B!=z)return N.s=-z,U.minus(N);var G=U.e/Wr,$=N.e/Wr,F=U.c,I=N.c;if(!G||!$){if(!F||!I)return new D(B/0);if(!F[0]||!I[0])return I[0]?N:new D(F[0]?U:B*0)}if(G=Vu(G),$=Vu($),F=F.slice(),B=G-$){for(B>0?($=G,J=I):(B=-B,J=F),J.reverse();B--;J.push(0));J.reverse()}for(B=F.length,z=I.length,B-z<0&&(J=I,I=F,F=J,z=B),B=0;z;)B=(F[--z]=F[z]+I[z]+B)/dc|0,F[z]=dc===F[z]?0:F[z]%dc;return B&&(F=[B].concat(F),++$),Q(N,F,$)},i.precision=i.sd=function(N,z){var J,U,B,G=this;if(N!=null&&N!==!!N)return Qs(N,1,mu),z==null?z=a:Qs(z,0,8),de(new D(G),N,z);if(!(J=G.c))return null;if(B=J.length-1,U=B*Wr+1,B=J[B]){for(;B%10==0;B/=10,U--);for(B=J[0];B>=10;B/=10,U++);}return N&&G.e+1>U&&(U=G.e+1),U},i.shiftedBy=function(N){return Qs(N,-9007199254740991,p5),this.times("1e"+N)},i.squareRoot=i.sqrt=function(){var N,z,J,U,B,G=this,$=G.c,F=G.s,I=G.e,X=o+4,K=new D("0.5");if(F!==1||!$||!$[0])return new D(!F||F<0&&(!$||$[0])?NaN:$?G:1/0);if(F=Math.sqrt(+fe(G)),F==0||F==1/0?(z=ju($),(z.length+I)%2==0&&(z+="0"),F=Math.sqrt(+z),I=Vu((I+1)/2)-(I<0||I%2),F==1/0?z="5e"+I:(z=F.toExponential(),z=z.slice(0,z.indexOf("e")+1)+I),J=new D(z)):J=new D(F+""),J.c[0]){for(I=J.e,F=I+X,F<3&&(F=0);;)if(B=J,J=K.times(B.plus(e(G,B,X,1))),ju(B.c).slice(0,F)===(z=ju(J.c)).slice(0,F))if(J.e<I&&--F,z=z.slice(F-3,F+1),z=="9999"||!U&&z=="4999"){if(!U&&(de(B,B.e+o+2,0),B.times(B).eq(G))){J=B;break}X+=4,F+=4,U=1}else{(!+z||!+z.slice(1)&&z.charAt(0)=="5")&&(de(J,J.e+o+2,1),N=!J.times(J).eq(G));break}}return de(J,J.e+o+1,a,N)},i.toExponential=function(N,z){return N!=null&&(Qs(N,0,mu),N++),R(this,N,z,1)},i.toFixed=function(N,z){return N!=null&&(Qs(N,0,mu),N=N+this.e+1),R(this,N,z)},i.toFormat=function(N,z,J){var U,B=this;if(J==null)N!=null&&z&&typeof z=="object"?(J=z,z=null):N&&typeof N=="object"?(J=N,N=z=null):J=E;else if(typeof J!="object")throw Error(Vl+"Argument not an object: "+J);if(U=B.toFixed(N,z),B.c){var G,$=U.split("."),F=+J.groupSize,I=+J.secondaryGroupSize,X=J.groupSeparator||"",K=$[0],ve=$[1],ge=B.s<0,He=ge?K.slice(1):K,ie=He.length;if(I&&(G=F,F=I,I=G,ie-=G),F>0&&ie>0){for(G=ie%F||F,K=He.substr(0,G);G<ie;G+=F)K+=X+He.substr(G,F);I>0&&(K+=X+He.slice(G)),ge&&(K="-"+K)}U=ve?K+(J.decimalSeparator||"")+((I=+J.fractionGroupSize)?ve.replace(new RegExp("\\d{"+I+"}\\B","g"),"$&"+(J.fractionGroupSeparator||"")):ve):K}return(J.prefix||"")+U+(J.suffix||"")},i.toFraction=function(N){var z,J,U,B,G,$,F,I,X,K,ve,ge,He=this,ie=He.c;if(N!=null&&(F=new D(N),!F.isInteger()&&(F.c||F.s!==1)||F.lt(s)))throw Error(Vl+"Argument "+(F.isInteger()?"out of range: ":"not an integer: ")+fe(F));if(!ie)return new D(He);for(z=new D(s),X=J=new D(s),U=I=new D(s),ge=ju(ie),G=z.e=ge.length-He.e-1,z.c[0]=nb[($=G%Wr)<0?Wr+$:$],N=!N||F.comparedTo(z)>0?G>0?z:X:F,$=p,p=1/0,F=new D(ge),I.c[0]=0;K=e(F,z,0,1),B=J.plus(K.times(U)),B.comparedTo(N)!=1;)J=U,U=B,X=I.plus(K.times(B=X)),I=B,z=F.minus(K.times(B=z)),F=B;return B=e(N.minus(J),U,0,1),I=I.plus(B.times(X)),J=J.plus(B.times(U)),I.s=X.s=He.s,G=G*2,ve=e(X,U,G,a).minus(He).abs().comparedTo(e(I,J,G,a).minus(He).abs())<1?[X,U]:[I,J],p=$,ve},i.toNumber=function(){return+fe(this)},i.toPrecision=function(N,z){return N!=null&&Qs(N,1,mu),R(this,N,z,2)},i.toString=function(N){var z,J=this,U=J.s,B=J.e;return B===null?U?(z="Infinity",U<0&&(z="-"+z)):z="NaN":(N==null?z=B<=l||B>=u?C0(ju(J.c),B):Ld(ju(J.c),B,"0"):N===10&&A?(J=de(new D(J),o+B+1,a),z=Ld(ju(J.c),J.e,"0")):(Qs(N,2,k.length,"Base"),z=t(Ld(ju(J.c),B,"0"),10,N,U,!0)),U<0&&J.c[0]&&(z="-"+z)),z},i.valueOf=i.toJSON=function(){return fe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,n!=null&&D.set(n),D}function Vu(n){var e=n|0;return n>0||n===e?e:e-1}function ju(n){for(var e,t,r=1,i=n.length,s=n[0]+"";r<i;){for(e=n[r++]+"",t=Wr-e.length;t--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Gh(n,e){var t,r,i=n.c,s=e.c,o=n.s,a=e.s,l=n.e,u=e.e;if(!o||!a)return null;if(t=i&&!i[0],r=s&&!s[0],t||r)return t?r?0:-a:o;if(o!=a)return o;if(t=o<0,r=l==u,!i||!s)return r?0:!i^t?1:-1;if(!r)return l>u^t?1:-1;for(a=(l=i.length)<(u=s.length)?l:u,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^t?1:-1;return l==u?0:l>u^t?1:-1}function Qs(n,e,t,r){if(n<e||n>t||n!==Uu(n))throw Error(Vl+(r||"Argument")+(typeof n=="number"?n<e||n>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}function L0(n){var e=n.c.length-1;return Vu(n.e/Wr)==e&&n.c[e]%2!=0}function C0(n,e){return(n.length>1?n.charAt(0)+"."+n.slice(1):n)+(e<0?"e":"e+")+e}function Ld(n,e,t){var r,i;if(e<0){for(i=t+".";++e;i+=t);n=i+n}else if(r=n.length,++e>r){for(i=t,e-=r;--e;i+=t);n+=i}else e<r&&(n=n.slice(0,e)+"."+n.slice(e));return n}var Jc=IE(),oz=class{constructor(n){Je(this,"key");Je(this,"left",null);Je(this,"right",null);this.key=n}},sg=class extends oz{constructor(n){super(n)}},az=class{constructor(){Je(this,"size",0);Je(this,"modificationCount",0);Je(this,"splayCount",0)}splay(n){const e=this.root;if(e==null)return this.compare(n,n),-1;let t=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,n),l>0){let u=o.left;if(u==null||(l=a(u.key,n),l>0&&(o.left=u.right,u.right=o,o=u,u=o.left,u==null)))break;t==null?r=o:t.left=o,t=o,o=u}else if(l<0){let u=o.right;if(u==null||(l=a(u.key,n),l<0&&(o.right=u.left,u.left=o,o=u,u=o.right,u==null)))break;i==null?s=o:i.right=o,i=o,o=u}else break;return i!=null&&(i.right=o.left,o.left=s),t!=null&&(t.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(n){let e=n,t=e.left;for(;t!=null;){const r=t;e.left=r.right,r.right=e,e=r,t=e.left}return e}splayMax(n){let e=n,t=e.right;for(;t!=null;){const r=t;e.right=r.left,r.left=e,e=r,t=e.right}return e}_delete(n){if(this.root==null||this.splay(n)!=0)return null;let t=this.root;const r=t,i=t.left;if(this.size--,i==null)this.root=t.right;else{const s=t.right;t=this.splayMax(i),t.right=s,this.root=t}return this.modificationCount++,r}addNewRoot(n,e){this.size++,this.modificationCount++;const t=this.root;if(t==null){this.root=n;return}e<0?(n.left=t,n.right=t.right,t.right=null):(n.right=t,n.left=t.left,t.left=null),this.root=n}_first(){const n=this.root;return n==null?null:(this.root=this.splayMin(n),this.root)}_last(){const n=this.root;return n==null?null:(this.root=this.splayMax(n),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(n){return this.validKey(n)&&this.splay(n)==0}defaultCompare(){return(n,e)=>n<e?-1:n>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:n=>{this.root=n},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:n=>{this.splayCount=n},splay:n=>this.splay(n),has:n=>this.has(n)}}},DL,OL,Gv=class Lg extends az{constructor(t,r){super();Je(this,"root",null);Je(this,"compare");Je(this,"validKey");Je(this,DL,"[object Set]");this.compare=t??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(t){return this.validKey(t)?this._delete(t)!=null:!1}deleteAll(t){for(const r of t)this.delete(r)}forEach(t){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)t(i.value,i.value,this)}add(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new sg(t),r),this}addAndReturn(t){const r=this.splay(t);return r!=0&&this.addNewRoot(new sg(t),r),this.root.key}addAll(t){for(const r of t)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(t){if(t==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(t)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(t){const r=new Lg(this.compare,this.validKey),i=this.modificationCount;for(const s of t){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(t){return!this.validKey(t)||this.splay(t)!=0?null:this.root.key}intersection(t){const r=new Lg(this.compare,this.validKey);for(const i of this)t.has(i)&&r.add(i);return r}difference(t){const r=new Lg(this.compare,this.validKey);for(const i of this)t.has(i)||r.add(i);return r}union(t){const r=this.clone();return r.addAll(t),r}clone(){const t=new Lg(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(t){if(t==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const u=new sg(a.key);o.left=u,r(a,u)}if(l!=null){const u=new sg(l.key);o.right=u,s=l,o=u}}while(l!=null)}const i=new sg(t.key);return r(t,i),i}toSet(){return this.clone()}entries(){return new uz(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(OL=Symbol.iterator,DL=Symbol.toStringTag,OL)](){return new lz(this.wrap())}},BE=class{constructor(n){Je(this,"tree");Je(this,"path",new Array);Je(this,"modificationCount",null);Je(this,"splayCount");this.tree=n,this.splayCount=n.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const n=this.path[this.path.length-1];return this.getValue(n)}rebuildPath(n){this.path.splice(0,this.path.length),this.tree.splay(n),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(n){for(;n!=null;)this.path.push(n),n=n.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let t=this.tree.getRoot();for(;t!=null;)this.path.push(t),t=t.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let n=this.path[this.path.length-1],e=n.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===n;)n=this.path.pop();return this.path.length>0}},lz=class extends BE{getValue(n){return n.key}},uz=class extends BE{getValue(n){return[n.key,n.key]}},RE=n=>()=>n,_2=n=>{const e=n?(t,r)=>r.minus(t).abs().isLessThanOrEqualTo(n):RE(!1);return(t,r)=>e(t,r)?0:t.comparedTo(r)};function cz(n){const e=n?(t,r,i,s,o)=>t.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(n)):RE(!1);return(t,r,i)=>{const s=t.x,o=t.y,a=i.x,l=i.y,u=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(u,s,o,a,l)?0:u.comparedTo(0)}}var dz=n=>n,hz=n=>{if(n){const e=new Gv(_2(n)),t=new Gv(_2(n)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,t)});return i({x:new Jc(0),y:new Jc(0)}),i}return dz},w2=n=>({set:e=>{zd=w2(e)},reset:()=>w2(n),compare:_2(n),snap:hz(n),orient:cz(n)}),zd=w2(),og=(n,e)=>n.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(n.ur.x)&&n.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(n.ur.y),x2=(n,e)=>{if(e.ur.x.isLessThan(n.ll.x)||n.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(n.ll.y)||n.ur.y.isLessThan(e.ll.y))return null;const t=n.ll.x.isLessThan(e.ll.x)?e.ll.x:n.ll.x,r=n.ur.x.isLessThan(e.ur.x)?n.ur.x:e.ur.x,i=n.ll.y.isLessThan(e.ll.y)?e.ll.y:n.ll.y,s=n.ur.y.isLessThan(e.ur.y)?n.ur.y:e.ur.y;return{ll:{x:t,y:i},ur:{x:r,y:s}}},sv=(n,e)=>n.x.times(e.y).minus(n.y.times(e.x)),FE=(n,e)=>n.x.times(e.x).plus(n.y.times(e.y)),Wv=n=>FE(n,n).sqrt(),fz=(n,e,t)=>{const r={x:e.x.minus(n.x),y:e.y.minus(n.y)},i={x:t.x.minus(n.x),y:t.y.minus(n.y)};return sv(i,r).div(Wv(i)).div(Wv(r))},pz=(n,e,t)=>{const r={x:e.x.minus(n.x),y:e.y.minus(n.y)},i={x:t.x.minus(n.x),y:t.y.minus(n.y)};return FE(i,r).div(Wv(i)).div(Wv(r))},g5=(n,e,t)=>e.y.isZero()?null:{x:n.x.plus(e.x.div(e.y).times(t.minus(n.y))),y:t},m5=(n,e,t)=>e.x.isZero()?null:{x:t,y:n.y.plus(e.y.div(e.x).times(t.minus(n.x)))},gz=(n,e,t,r)=>{if(e.x.isZero())return m5(t,r,n.x);if(r.x.isZero())return m5(n,e,t.x);if(e.y.isZero())return g5(t,r,n.y);if(r.y.isZero())return g5(n,e,t.y);const i=sv(e,r);if(i.isZero())return null;const s={x:t.x.minus(n.x),y:t.y.minus(n.y)},o=sv(s,e).div(i),a=sv(s,r).div(i),l=n.x.plus(a.times(e.x)),u=t.x.plus(o.times(r.x)),h=n.y.plus(a.times(e.y)),p=t.y.plus(o.times(r.y)),v=l.plus(u).div(2),m=h.plus(p).div(2);return{x:v,y:m}},Yc=class jE{constructor(e,t){Je(this,"point");Je(this,"isLeft");Je(this,"segment");Je(this,"otherSE");Je(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}static compare(e,t){const r=jE.comparePoints(e.point,t.point);return r!==0?r:(e.point!==t.point&&e.link(t),e.isLeft!==t.isLeft?e.isLeft?1:-1:qv.compare(e.segment,t.segment))}static comparePoints(e,t){return e.x.isLessThan(t.x)?-1:e.x.isGreaterThan(t.x)?1:e.y.isLessThan(t.y)?-1:e.y.isGreaterThan(t.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const t=e.point.events;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let t=0;t<e;t++){const r=this.point.events[t];if(r.segment.consumedBy===void 0)for(let i=t+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let t=0,r=this.point.events.length;t<r;t++){const i=this.point.events[t];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const t=new Map,r=i=>{const s=i.otherSE;t.set(i,{sine:fz(this.point,e.point,s.point),cosine:pz(this.point,e.point,s.point)})};return(i,s)=>{t.has(i)||r(i),t.has(s)||r(s);const{sine:o,cosine:a}=t.get(i),{sine:l,cosine:u}=t.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(u)?1:a.isGreaterThan(u)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(u)?-1:a.isGreaterThan(u)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},mz=class L2{constructor(e){Je(this,"events");Je(this,"poly");Je(this,"_isExteriorRing");Je(this,"_enclosingRing");this.events=e;for(let t=0,r=e.length;t<r;t++)e[t].segment.ringOut=this;this.poly=null}static factory(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const u=[a],h=a.point,p=[];for(;o=a,a=l,u.push(a),a.point!==h;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const E=u[0].point,k=u[u.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${k.x}, ${k.y}].`)}if(v.length===1){l=v[0].otherSE;break}let m=null;for(let E=0,k=p.length;E<k;E++)if(p[E].point===a.point){m=E;break}if(m!==null){const E=p.splice(m)[0],k=u.splice(E.index);k.unshift(k[0].otherSE),t.push(new L2(k.reverse()));continue}p.push({index:u.length,point:a.point});const C=a.getLeftmostComparator(o);l=v.sort(C)[0].otherSE;break}t.push(new L2(u))}return t}getGeom(){let e=this.events[0].point;const t=[e];for(let u=1,h=this.events.length-1;u<h;u++){const p=this.events[u].point,v=this.events[u+1].point;zd.orient(p,e,v)!==0&&(t.push(p),e=p)}if(t.length===1)return null;const r=t[0],i=t[1];zd.orient(r,e,i)===0&&t.shift(),t.push(t[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:t.length-1,a=this.isExteriorRing()?t.length:-1,l=[];for(let u=o;u!=a;u+=s)l.push([t[u].x.toNumber(),t[u].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];Yc.compare(e,l)>0&&(e=l)}let t=e.segment.prevInResult(),r=t?t.prevInResult():null;for(;;){if(!t)return null;if(!r)return t.ringOut;if(r.ringOut!==t.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==t.ringOut?t.ringOut:(s=t.ringOut)==null?void 0:s.enclosingRing();t=r.prevInResult(),r=t?t.prevInResult():null}}},v5=class{constructor(n){Je(this,"exteriorRing");Je(this,"interiorRings");this.exteriorRing=n,n.poly=this,this.interiorRings=[]}addInterior(n){this.interiorRings.push(n),n.poly=this}getGeom(){const n=this.exteriorRing.getGeom();if(n===null)return null;const e=[n];for(let t=0,r=this.interiorRings.length;t<r;t++){const i=this.interiorRings[t].getGeom();i!==null&&e.push(i)}return e}},vz=class{constructor(n){Je(this,"rings");Je(this,"polys");this.rings=n,this.polys=this._composePolys(n)}getGeom(){const n=[];for(let e=0,t=this.polys.length;e<t;e++){const r=this.polys[e].getGeom();r!==null&&n.push(r)}return n}_composePolys(n){var t;const e=[];for(let r=0,i=n.length;r<i;r++){const s=n[r];if(!s.poly)if(s.isExteriorRing())e.push(new v5(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new v5(o)),(t=o==null?void 0:o.poly)==null||t.addInterior(s)}}return e}},yz=class{constructor(n,e=qv.compare){Je(this,"queue");Je(this,"tree");Je(this,"segments");this.queue=n,this.tree=new Gv(e),this.segments=[]}process(n){const e=n.segment,t=[];if(n.consumedBy)return n.isLeft?this.queue.delete(n.otherSE):this.tree.delete(e),t;n.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(n.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let u=0,h=l.length;u<h;u++)t.push(l[u])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let u=0,h=l.length;u<h;u++)t.push(l[u])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=Yc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),t.push(e.rightSE);const l=e.split(a);for(let u=0,h=l.length;u<h;u++)t.push(l[u])}t.length>0?(this.tree.delete(e),t.push(n)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)t.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)t.push(o[a])}}}this.tree.delete(e)}return t}_splitSafely(n,e){this.tree.delete(n);const t=n.rightSE;this.queue.delete(t);const r=n.split(e);return r.push(t),n.consumedBy===void 0&&this.tree.add(n),r}},bz=class{constructor(){Je(this,"type");Je(this,"numMultiPolys")}run(n,e,t){Cg.type=n;const r=[new b5(e,!0)];for(let u=0,h=t.length;u<h;u++)r.push(new b5(t[u],!1));if(Cg.numMultiPolys=r.length,Cg.type==="difference"){const u=r[0];let h=1;for(;h<r.length;)x2(r[h].bbox,u.bbox)!==null?h++:r.splice(h,1)}if(Cg.type==="intersection")for(let u=0,h=r.length;u<h;u++){const p=r[u];for(let v=u+1,m=r.length;v<m;v++)if(x2(p.bbox,r[v].bbox)===null)return[]}const i=new Gv(Yc.compare);for(let u=0,h=r.length;u<h;u++){const p=r[u].getSweepEvents();for(let v=0,m=p.length;v<m;v++)i.add(p[v])}const s=new yz(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const u=s.process(o);for(let h=0,p=u.length;h<p;h++){const v=u[h];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}zd.reset();const a=mz.factory(s.segments);return new vz(a).getGeom()}},Cg=new bz,C2=Cg,_z=0,qv=class ov{constructor(e,t,r,i){Je(this,"id");Je(this,"leftSE");Je(this,"rightSE");Je(this,"rings");Je(this,"windings");Je(this,"ringOut");Je(this,"consumedBy");Je(this,"prev");Je(this,"_prevInResult");Je(this,"_beforeState");Je(this,"_afterState");Je(this,"_isInResult");this.id=++_z,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=r,this.windings=i}static compare(e,t){const r=e.leftSE.point.x,i=t.leftSE.point.x,s=e.rightSE.point.x,o=t.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=t.leftSE.point.y,u=e.rightSE.point.y,h=t.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(u))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(u))return-1;const p=e.comparePoint(t.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=t.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(h))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(h))return 1;const p=t.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(t.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=t.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(t.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=u.minus(a),v=s.minus(r),m=h.minus(l),C=o.minus(i);if(p.isGreaterThan(v)&&m.isLessThan(C))return 1;if(p.isLessThan(v)&&m.isGreaterThan(C))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||u.isLessThan(h)?-1:u.isGreaterThan(h)?1:e.id<t.id?-1:e.id>t.id?1:0}static fromRing(e,t,r){let i,s,o;const a=Yc.comparePoints(e,t);if(a<0)i=e,s=t,o=1;else if(a>0)i=t,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Yc(i,!0),u=new Yc(s,!1);return new ov(l,u,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(t)?e:t},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(t)?e:t}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return zd.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const t=this.bbox(),r=e.bbox(),i=x2(t,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,u=og(t,a)&&this.comparePoint(a)===0,h=og(r,s)&&e.comparePoint(s)===0,p=og(t,l)&&this.comparePoint(l)===0,v=og(r,o)&&e.comparePoint(o)===0;if(h&&u)return v&&!p?o:!v&&p?l:null;if(h)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(u)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const m=gz(s,this.vector(),a,e.vector());return m===null||!og(i,m)?null:zd.snap(m)}split(e){const t=[],r=e.events!==void 0,i=new Yc(e,!0),s=new Yc(e,!1),o=this.rightSE;this.replaceRightSE(s),t.push(s),t.push(i);const a=new ov(i,o,this.rings.slice(),this.windings.slice());return Yc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Yc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),t}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let t=0,r=this.windings.length;t<r;t++)this.windings[t]*=-1}consume(e){let t=this,r=e;for(;t.consumedBy;)t=t.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=ov.compare(t,r);if(i!==0){if(i>0){const s=t;t=r,r=s}if(t.prev===r){const s=t;t=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],u=t.rings.indexOf(a);u===-1?(t.rings.push(a),t.windings.push(l)):t.windings[u]+=l}r.rings=null,r.windings=null,r.consumedBy=t,r.leftSE.consumedBy=t.leftSE,r.rightSE.consumedBy=t.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const t=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const u=this.rings[a],h=this.windings[a],p=t.indexOf(u);p===-1?(t.push(u),r.push(h)):r[p]+=h}const s=[],o=[];for(let a=0,l=t.length;a<l;a++){if(r[a]===0)continue;const u=t[a],h=u.poly;if(o.indexOf(h)===-1)if(u.isExterior)s.push(h);else{o.indexOf(h)===-1&&o.push(h);const p=s.indexOf(u.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const u=s[a].multiPoly;i.indexOf(u)===-1&&i.push(u)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(C2.type){case"union":{const r=e.length===0,i=t.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<t.length?(r=e.length,i=t.length):(r=t.length,i=e.length),this._isInResult=i===C2.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-t.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(t);break}}return this._isInResult}},y5=class{constructor(n,e,t){Je(this,"poly");Je(this,"isExterior");Je(this,"segments");Je(this,"bbox");if(!Array.isArray(n)||n.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=t,this.segments=[],typeof n[0][0]!="number"||typeof n[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=zd.snap({x:new Jc(n[0][0]),y:new Jc(n[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=n.length;s<o;s++){if(typeof n[s][0]!="number"||typeof n[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=zd.snap({x:new Jc(n[s][0]),y:new Jc(n[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(qv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(qv.fromRing(i,r,this))}getSweepEvents(){const n=[];for(let e=0,t=this.segments.length;e<t;e++){const r=this.segments[e];n.push(r.leftSE),n.push(r.rightSE)}return n}},wz=class{constructor(n,e){Je(this,"multiPoly");Je(this,"exteriorRing");Je(this,"interiorRings");Je(this,"bbox");if(!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new y5(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let t=1,r=n.length;t<r;t++){const i=new y5(n[t],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const n=this.exteriorRing.getSweepEvents();for(let e=0,t=this.interiorRings.length;e<t;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)n.push(r[i])}return n}},b5=class{constructor(n,e){Je(this,"isSubject");Je(this,"polys");Je(this,"bbox");if(!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof n[0][0][0]=="number"&&(n=[n])}catch{}this.polys=[],this.bbox={ll:{x:new Jc(Number.POSITIVE_INFINITY),y:new Jc(Number.POSITIVE_INFINITY)},ur:{x:new Jc(Number.NEGATIVE_INFINITY),y:new Jc(Number.NEGATIVE_INFINITY)}};for(let t=0,r=n.length;t<r;t++){const i=new wz(n[t],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const n=[];for(let e=0,t=this.polys.length;e<t;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)n.push(r[i])}return n}},xz=(n,...e)=>C2.run("intersection",n,e);zd.set;function Lz(n,e){var t,r,i,s,o,a,l,u,h,p,v=0,m=n.type==="FeatureCollection",C=n.type==="Feature",E=m?n.features.length:1;for(t=0;t<E;t++){for(a=m?n.features[t].geometry:C?n.geometry:n,u=m?n.features[t].properties:C?n.properties:{},h=m?n.features[t].bbox:C?n.bbox:void 0,p=m?n.features[t].id:C?n.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,u,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,u,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,u,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Cz(n,e={}){const t=[];if(Lz(n,i=>{t.push(i.coordinates)}),t.length<2)throw new Error("Must specify at least 2 geometries");const r=xz(t[0],...t.slice(1));return r.length===0?null:r.length===1?Hu(r[0],e.properties):Gj(r,e.properties)}var Sz=Cz;function zE(n,e,t){if(n!==null)for(var r,i,s,o,a,l,u,h=0,p=0,v,m=n.type,C=m==="FeatureCollection",E=m==="Feature",k=C?n.features.length:1,A=0;A<k;A++){u=C?n.features[A].geometry:E?n.geometry:n,v=u?u.type==="GeometryCollection":!1,a=v?u.geometries.length:1;for(var D=0;D<a;D++){var R=0,W=0;if(o=v?u.geometries[D]:u,o!==null){l=o.coordinates;var Q=o.type;switch(h=0,Q){case null:break;case"Point":if(e(l,p,A,R,W)===!1)return!1;p++,R++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,R,W)===!1)return!1;p++,Q==="MultiPoint"&&R++}Q==="LineString"&&R++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(e(l[r][i],p,A,R,W)===!1)return!1;p++}Q==="MultiLineString"&&R++,Q==="Polygon"&&W++}Q==="Polygon"&&R++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(W=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(e(l[r][i][s],p,A,R,W)===!1)return!1;p++}W++}R++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(zE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ez(n,e){var t,r,i,s,o,a,l,u,h,p,v=0,m=n.type==="FeatureCollection",C=n.type==="Feature",E=m?n.features.length:1;for(t=0;t<E;t++){for(a=m?n.features[t].geometry:C?n.geometry:n,u=m?n.features[t].properties:C?n.properties:{},h=m?n.features[t].bbox:C?n.bbox:void 0,p=m?n.features[t].id:C?n.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,u,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,u,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,u,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Mz(n,e){Ez(n,function(t,r,i,s,o){var a=t===null?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Dp(t,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var h=t.coordinates[u],p={type:l,coordinates:h};if(e(Dp(p,i),r,u)===!1)return!1}})}function Pz(n,e){Mz(n,function(t,r,i){var s=0;if(t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,u=0,h=0;if(zE(t,function(p,v,m,C,E){if(a===void 0||r>l||C>u||E>h){a=p,l=r,u=C,h=E,s=0;return}var k=yc([a,p],t.properties);if(e(k,r,i,E,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function kz(n,e,t){var r=t,i=!1;return Pz(n,function(s,o,a,l,u){i===!1&&t===void 0?r=s:r=e(r,s,o,a,l,u),i=!0}),r}function Yv(n,e={}){return kz(n,(t,r)=>{const i=r.geometry.coordinates;return t+V_(i[0],i[1],e)},0)}var Wh=Yv;class Gl extends Hn.Polygon{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});Je(this,"properties");Je(this,"_originalStyle");Je(this,"_path");this.properties=kn.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){kn.measure("Polygon.updateProperties",()=>{var t,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(A=>[A.lng,A.lat]);l.push(l[0]);const u=Hu([l]),h=OE(u),p=Yv(yc([...l]),{units:"meters"}),v=qg(u),m=Hn.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),C=((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||"",E=((i=this.properties)==null?void 0:i.category)||"forages",k=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(A=>({lat:A.lat,lng:A.lng})),surface:h,perimeter:p,center:{lat:m.lat,lng:m.lng},vertices:a.length,category:E,accessLevel:k,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:C}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}})}setName(t){kn.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return kn.measure("Polygon.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}setLatLngs(t){return kn.measure("Polygon.setLatLngs",()=>(super.setLatLngs(t),this.updateProperties(),this))}getMidPoints(){return kn.measure("Polygon.getMidPoints",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(Hn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(t,r){kn.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i[t]=r,Hn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(t,r){kn.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];t>=0&&t<i.length&&(i.splice((t+1)%i.length,0,r),Hn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(t){return kn.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Hn.latLng(s.lat+t.lat,s.lng+t.lng));return Hn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return kn.measure("Polygon.getCenter",()=>{const t=this.getLatLngs()[0];if(!t||t.length===0)return new Hn.LatLng(0,0);try{const r=t.filter(u=>u&&typeof u.lat=="number"&&typeof u.lng=="number"&&!isNaN(u.lat)&&!isNaN(u.lng)&&Math.abs(u.lat)<=90&&Math.abs(u.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Hn.LatLng(0,0);const i=r.map(u=>[u.lng,u.lat]);i.push(i[0]);const s=Hu([i]),o=qg(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calculé invalide");return Hn.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const a of t)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Hn.LatLng(0,0)):new Hn.LatLng(i/o,s/o)}})}getSegmentLengths(){return kn.measure("Polygon.getSegmentLengths",()=>{const t=this.getLatLngs()[0],r=[];if(t.length<2)return r;for(let i=0;i<t.length;i++){const s=t[i],o=t[(i+1)%t.length];r.push(s.distanceTo(o))}return r})}highlight(){if(!this._originalStyle){this._originalStyle={...this.options};const t=(this._originalStyle.weight||3)*1.5;this.setStyle({weight:t,opacity:1,fillOpacity:Math.min((this._originalStyle.fillOpacity||.2)+.1,.4),className:"polygon-hover-effect"});try{this._path&&(this._path.style.filter="drop-shadow(0 0 3px rgba(43, 100, 81, 0.7))",this._path.style.transition="all 0.2s ease-in-out")}catch(r){console.warn("Impossible d'appliquer l'effet de lueur au polygone",r)}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch(t){console.warn("Impossible de restaurer le style du polygone",t)}}}}class xs extends Hn.Polyline{constructor(t,r={}){super(t,{...r,pmIgnore:!1,interactive:!0});Je(this,"properties");Je(this,"cachedProperties",{});Je(this,"needsUpdate",!0);Je(this,"_originalStyle");Je(this,"_path");this.properties=kn.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}highlight(){if(!this._originalStyle){this._originalStyle={...this.options};const t=(this._originalStyle.weight||3)*1.75,r=this._originalStyle.color||"#2b6451";this.setStyle({weight:t,opacity:1,className:"line-hover-effect"});try{this._path&&(this._path.style.filter=`drop-shadow(0 0 4px ${r})`,this._path.style.transition="all 0.2s ease-in-out")}catch{console.warn("Impossible d'appliquer l'effet de lueur à la ligne")}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch{console.warn("Impossible de retirer l'effet de lueur de la ligne")}}}isPointNearLine(t,r=10){if(!this._map)return!1;const i=this.getLatLngs();if(i.length<2)return!1;for(let s=0;s<i.length-1;s++){const o=this._map.latLngToLayerPoint(i[s]),a=this._map.latLngToLayerPoint(i[s+1]),l=this._map.latLngToLayerPoint(t);if(Hn.LineUtil.pointToSegmentDistance(l,o,a)<=r)return!0}return!1}updateProperties(){kn.measure("Line.updateProperties",()=>{var i,s,o,a,l;const t=this.getLatLngs();if(!t||t.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=t.map(u=>[u.lng,u.lat]);try{const u=yc(r),h=Yv(u,{units:"meters"});let p;if(t.length===2)p=Hn.latLng((t[0].lat+t[1].lat)/2,(t[0].lng+t[1].lng)/2);else{const k=c5(u,h/2,{units:"meters"});p=Hn.latLng(k.geometry.coordinates[1],k.geometry.coordinates[0])}const v=10,m=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",C=((o=this.properties)==null?void 0:o.category)||"forages",E=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:h,coordinates:t.map(k=>({lat:k.lat,lng:k.lng})),center:{lat:p.lat,lng:p.lng},vertices:t.length,surfaceInfluence:h*v,dimensions:{width:v},category:C,accessLevel:E,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:m}},this.cachedProperties.length=h,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(u){console.error("Failed to calculate line properties",u)}})}setName(t){kn.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return kn.measure("Line.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}invalidateCache(){kn.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(t){return super.setLatLngs(t),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return kn.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push(Hn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(t){return kn.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return null;const i=r[t],s=r[t+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",t),null):Hn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(t,r,i=!1){kn.measure("Line.moveVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length&&(s[t]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:t,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(t,r,i=!1){kn.measure("Line.addVertex",()=>{const s=this.getLatLngs();t>=0&&t<s.length-1&&(s.splice(t+1,0,r),Hn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(t,r=!0){return kn.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Hn.latLng(o.lat+t.lat,o.lng+t.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:t,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return kn.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const t=this.getLatLngs();if(t.length<2)return t[0]||new Hn.LatLng(0,0);try{const r=t.map(l=>[l.lng,l.lat]),i=yc(r),s=Yv(i,{units:"meters"}),o=c5(i,s/2,{units:"meters"}),a=Hn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=t.reduce((a,l)=>a+l.lat,0)/t.length,s=t.reduce((a,l)=>a+l.lng,0)/t.length,o=new Hn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return kn.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const t=this.getLatLngs(),r=[];if(t.length<2)return r;for(let i=0;i<t.length-1;i++){const s=t[i],o=t[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(t){return kn.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(t<0||t>=r.length-1||r.length<2)return 0;const i=r[t],s=r[t+1];return i.distanceTo(s)})}getLengthToVertex(t){return kn.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(t<=0||r.length<2)return 0;for(let s=0;s<Math.min(t,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return kn.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const t=this.getLatLngs();let r=0;for(let i=0;i<t.length-1;i++)r+=t[i].distanceTo(t[i+1]);return this.cachedProperties.length=r,r})}}var Kv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Kv.exports;(function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",p=1,v=2,m=4,C=1,E=2,k=1,A=2,D=4,R=8,W=16,Q=32,de=64,fe=128,N=256,z=512,J=30,U="...",B=800,G=16,$=1,F=2,I=3,X=1/0,K=9007199254740991,ve=17976931348623157e292,ge=NaN,He=4294967295,ie=He-1,Ce=He>>>1,_e=[["ary",fe],["bind",k],["bindKey",A],["curry",R],["curryRight",W],["flip",z],["partial",Q],["partialRight",de],["rearg",N]],H="[object Arguments]",ee="[object Array]",pe="[object AsyncFunction]",re="[object Boolean]",ae="[object Date]",De="[object DOMException]",be="[object Error]",Ie="[object Function]",le="[object GeneratorFunction]",me="[object Map]",oe="[object Number]",Z="[object Null]",Ae="[object Object]",je="[object Promise]",Ke="[object Proxy]",Me="[object RegExp]",he="[object Set]",We="[object String]",at="[object Symbol]",ut="[object Undefined]",Ct="[object WeakMap]",Xe="[object WeakSet]",zt="[object ArrayBuffer]",qt="[object DataView]",Qe="[object Float32Array]",ot="[object Float64Array]",it="[object Int8Array]",At="[object Int16Array]",Yt="[object Int32Array]",bn="[object Uint8Array]",xn="[object Uint8ClampedArray]",En="[object Uint16Array]",$n="[object Uint32Array]",Sn=/\b__p \+= '';/g,an=/\b(__p \+=) '' \+/g,mn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,tr=/&(?:amp|lt|gt|quot|#39);/g,ar=/[&<>"']/g,mr=RegExp(tr.source),zn=RegExp(ar.source),kr=/<%-([\s\S]+?)%>/g,as=/<%([\s\S]+?)%>/g,Ni=/<%=([\s\S]+?)%>/g,io=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ps=/^\w*$/,Zn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bt=/[\\^$.*+?()[\]{}|]/g,rt=RegExp(bt.source),Vt=/^\s+/,Ln=/\s/,Kt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rn=/\{\n\/\* \[wrapped with (.+)\] \*/,Zt=/,? & /,qn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,St=/[()=,{}\[\]\/\s]/,gn=/\\(\\)?/g,nr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Vn=/\w*$/,dr=/^[-+]0x[0-9a-f]+$/i,Cn=/^0b[01]+$/i,fn=/^\[object .+?Constructor\]$/,li=/^0o[0-7]+$/i,Ci=/^(?:0|[1-9]\d*)$/,Si=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Or=/($^)/,fr=/['\n\r\u2028\u2029\\]/g,ls="\\ud800-\\udfff",us="\\u0300-\\u036f",Ai="\\ufe20-\\ufe2f",ks="\\u20d0-\\u20ff",bs=us+Ai+ks,Ki="\\u2700-\\u27bf",zs="a-z\\xdf-\\xf6\\xf8-\\xff",Io="\\xac\\xb1\\xd7\\xf7",cs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",br="\\u2000-\\u206f",Tr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pr="A-Z\\xc0-\\xd6\\xd8-\\xde",ea="\\ufe0e\\ufe0f",lr=Io+cs+br+Tr,Ei="['’]",Zi="["+ls+"]",ur="["+lr+"]",ei="["+bs+"]",ol="\\d+",$s="["+Ki+"]",Us="["+zs+"]",Xu="[^"+ls+lr+ol+Ki+zs+pr+"]",El="\\ud83c[\\udffb-\\udfff]",Da="(?:"+ei+"|"+El+")",Hi="[^"+ls+"]",ta="(?:\\ud83c[\\udde6-\\uddff]){2}",al="[\\ud800-\\udbff][\\udc00-\\udfff]",Bo="["+pr+"]",Eu="\\u200d",ll="(?:"+Us+"|"+Xu+")",Ju="(?:"+Bo+"|"+Xu+")",na="(?:"+Ei+"(?:d|ll|m|re|s|t|ve))?",Oa="(?:"+Ei+"(?:D|LL|M|RE|S|T|VE))?",ul=Da+"?",ru="["+ea+"]?",_s="(?:"+Eu+"(?:"+[Hi,ta,al].join("|")+")"+ru+ul+")*",Tc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vr=ru+ul+_s,xr="(?:"+[$s,ta,al].join("|")+")"+vr,ra="(?:"+[Hi+ei+"?",ei,ta,al,Zi].join("|")+")",Xr=RegExp(Ei,"g"),Qu=RegExp(ei,"g"),Ml=RegExp(El+"(?="+El+")|"+ra+vr,"g"),Pl=RegExp([Bo+"?"+Us+"+"+na+"(?="+[ur,Bo,"$"].join("|")+")",Ju+"+"+Oa+"(?="+[ur,Bo+ll,"$"].join("|")+")",Bo+"?"+ll+"+"+na,Bo+"+"+Oa,Mu,Tc,ol,xr].join("|"),"g"),ia=RegExp("["+Eu+ls+bs+ea+"]"),cl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ec=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],iu=-1,_r={};_r[Qe]=_r[ot]=_r[it]=_r[At]=_r[Yt]=_r[bn]=_r[xn]=_r[En]=_r[$n]=!0,_r[H]=_r[ee]=_r[zt]=_r[re]=_r[qt]=_r[ae]=_r[be]=_r[Ie]=_r[me]=_r[oe]=_r[Ae]=_r[Me]=_r[he]=_r[We]=_r[Ct]=!1;var Fr={};Fr[H]=Fr[ee]=Fr[zt]=Fr[qt]=Fr[re]=Fr[ae]=Fr[Qe]=Fr[ot]=Fr[it]=Fr[At]=Fr[Yt]=Fr[me]=Fr[oe]=Fr[Ae]=Fr[Me]=Fr[he]=Fr[We]=Fr[at]=Fr[bn]=Fr[xn]=Fr[En]=Fr[$n]=!0,Fr[be]=Fr[Ie]=Fr[Ct]=!1;var dl={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Dc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},su={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Pu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kl=parseFloat,ou=parseInt,ku=typeof ga=="object"&&ga&&ga.Object===Object&&ga,Ur=typeof self=="object"&&self&&self.Object===Object&&self,Ji=ku||Ur||Function("return this")(),sr=e&&!e.nodeType&&e,Qi=sr&&!0&&n&&!n.nodeType&&n,Al=Qi&&Qi.exports===sr,Na=Al&&ku.process,Ii=function(){try{var Lt=Qi&&Qi.require&&Qi.require("util").types;return Lt||Na&&Na.binding&&Na.binding("util")}catch{}}(),Au=Ii&&Ii.isArrayBuffer,va=Ii&&Ii.isDate,au=Ii&&Ii.isMap,lu=Ii&&Ii.isRegExp,Go=Ii&&Ii.isSet,uu=Ii&&Ii.isTypedArray;function ui(Lt,Xt,It){switch(It.length){case 0:return Lt.call(Xt);case 1:return Lt.call(Xt,It[0]);case 2:return Lt.call(Xt,It[0],It[1]);case 3:return Lt.call(Xt,It[0],It[1],It[2])}return Lt.apply(Xt,It)}function Oc(Lt,Xt,It,Tn){for(var Yn=-1,yr=Lt==null?0:Lt.length;++Yn<yr;){var Bi=Lt[Yn];Xt(Tn,Bi,It(Bi),Lt)}return Tn}function As(Lt,Xt){for(var It=-1,Tn=Lt==null?0:Lt.length;++It<Tn&&Xt(Lt[It],It,Lt)!==!1;);return Lt}function sa(Lt,Xt){for(var It=Lt==null?0:Lt.length;It--&&Xt(Lt[It],It,Lt)!==!1;);return Lt}function cu(Lt,Xt){for(var It=-1,Tn=Lt==null?0:Lt.length;++It<Tn;)if(!Xt(Lt[It],It,Lt))return!1;return!0}function oa(Lt,Xt){for(var It=-1,Tn=Lt==null?0:Lt.length,Yn=0,yr=[];++It<Tn;){var Bi=Lt[It];Xt(Bi,It,Lt)&&(yr[Yn++]=Bi)}return yr}function Tl(Lt,Xt){var It=Lt==null?0:Lt.length;return!!It&&dn(Lt,Xt,0)>-1}function Dl(Lt,Xt,It){for(var Tn=-1,Yn=Lt==null?0:Lt.length;++Tn<Yn;)if(It(Xt,Lt[Tn]))return!0;return!1}function ci(Lt,Xt){for(var It=-1,Tn=Lt==null?0:Lt.length,Yn=Array(Tn);++It<Tn;)Yn[It]=Xt(Lt[It],It,Lt);return Yn}function Ro(Lt,Xt){for(var It=-1,Tn=Xt.length,Yn=Lt.length;++It<Tn;)Lt[Yn+It]=Xt[It];return Lt}function Ia(Lt,Xt,It,Tn){var Yn=-1,yr=Lt==null?0:Lt.length;for(Tn&&yr&&(It=Lt[++Yn]);++Yn<yr;)It=Xt(It,Lt[Yn],Yn,Lt);return It}function es(Lt,Xt,It,Tn){var Yn=Lt==null?0:Lt.length;for(Tn&&Yn&&(It=Lt[--Yn]);Yn--;)It=Xt(It,Lt[Yn],Yn,Lt);return It}function j(Lt,Xt){for(var It=-1,Tn=Lt==null?0:Lt.length;++It<Tn;)if(Xt(Lt[It],It,Lt))return!0;return!1}var xe=gr("length");function et(Lt){return Lt.split("")}function ft(Lt){return Lt.match(qn)||[]}function Pt(Lt,Xt,It){var Tn;return It(Lt,function(Yn,yr,Bi){if(Xt(Yn,yr,Bi))return Tn=yr,!1}),Tn}function Ht(Lt,Xt,It,Tn){for(var Yn=Lt.length,yr=It+(Tn?1:-1);Tn?yr--:++yr<Yn;)if(Xt(Lt[yr],yr,Lt))return yr;return-1}function dn(Lt,Xt,It){return Xt===Xt?ws(Lt,Xt,It):Ht(Lt,Rn,It)}function Nn(Lt,Xt,It,Tn){for(var Yn=It-1,yr=Lt.length;++Yn<yr;)if(Tn(Lt[Yn],Xt))return Yn;return-1}function Rn(Lt){return Lt!==Lt}function rr(Lt,Xt){var It=Lt==null?0:Lt.length;return It?di(Lt,Xt)/It:ge}function gr(Lt){return function(Xt){return Xt==null?t:Xt[Lt]}}function Nr(Lt){return function(Xt){return Lt==null?t:Lt[Xt]}}function Ti(Lt,Xt,It,Tn,Yn){return Yn(Lt,function(yr,Bi,hi){It=Tn?(Tn=!1,yr):Xt(It,yr,Bi,hi)}),It}function ri(Lt,Xt){var It=Lt.length;for(Lt.sort(Xt);It--;)Lt[It]=Lt[It].value;return Lt}function di(Lt,Xt){for(var It,Tn=-1,Yn=Lt.length;++Tn<Yn;){var yr=Xt(Lt[Tn]);yr!==t&&(It=It===t?yr:It+yr)}return It}function ts(Lt,Xt){for(var It=-1,Tn=Array(Lt);++It<Lt;)Tn[It]=Xt(It);return Tn}function ds(Lt,Xt){return ci(Xt,function(It){return[It,Lt[It]]})}function Fo(Lt){return Lt&&Lt.slice(0,Ra(Lt)+1).replace(Vt,"")}function Ir(Lt){return function(Xt){return Lt(Xt)}}function Vs(Lt,Xt){return ci(Xt,function(It){return Lt[It]})}function Ol(Lt,Xt){return Lt.has(Xt)}function so(Lt,Xt){for(var It=-1,Tn=Lt.length;++It<Tn&&dn(Xt,Lt[It],0)>-1;);return It}function Tu(Lt,Xt){for(var It=Lt.length;It--&&dn(Xt,Lt[It],0)>-1;);return It}function ya(Lt,Xt){for(var It=Lt.length,Tn=0;It--;)Lt[It]===Xt&&++Tn;return Tn}var tc=Nr(dl),hl=Nr(Dc);function fl(Lt){return"\\"+Pu[Lt]}function hs(Lt,Xt){return Lt==null?t:Lt[Xt]}function ba(Lt){return ia.test(Lt)}function jo(Lt){return cl.test(Lt)}function _o(Lt){for(var Xt,It=[];!(Xt=Lt.next()).done;)It.push(Xt.value);return It}function Nl(Lt){var Xt=-1,It=Array(Lt.size);return Lt.forEach(function(Tn,Yn){It[++Xt]=[Yn,Tn]}),It}function Hs(Lt,Xt){return function(It){return Lt(Xt(It))}}function oo(Lt,Xt){for(var It=-1,Tn=Lt.length,Yn=0,yr=[];++It<Tn;){var Bi=Lt[It];(Bi===Xt||Bi===h)&&(Lt[It]=h,yr[Yn++]=It)}return yr}function ao(Lt){var Xt=-1,It=Array(Lt.size);return Lt.forEach(function(Tn){It[++Xt]=Tn}),It}function Nc(Lt){var Xt=-1,It=Array(Lt.size);return Lt.forEach(function(Tn){It[++Xt]=[Tn,Tn]}),It}function ws(Lt,Xt,It){for(var Tn=It-1,Yn=Lt.length;++Tn<Yn;)if(Lt[Tn]===Xt)return Tn;return-1}function Ba(Lt,Xt,It){for(var Tn=It+1;Tn--;)if(Lt[Tn]===Xt)return Tn;return Tn}function Gs(Lt){return ba(Lt)?qs(Lt):xe(Lt)}function Ws(Lt){return ba(Lt)?Ts(Lt):et(Lt)}function Ra(Lt){for(var Xt=Lt.length;Xt--&&Ln.test(Lt.charAt(Xt)););return Xt}var Fa=Nr(su);function qs(Lt){for(var Xt=Ml.lastIndex=0;Ml.test(Lt);)++Xt;return Xt}function Ts(Lt){return Lt.match(Ml)||[]}function _a(Lt){return Lt.match(Pl)||[]}var zo=function Lt(Xt){Xt=Xt==null?Ji:Ys.defaults(Ji.Object(),Xt,Ys.pick(Ji,ec));var It=Xt.Array,Tn=Xt.Date,Yn=Xt.Error,yr=Xt.Function,Bi=Xt.Math,hi=Xt.Object,du=Xt.RegExp,lo=Xt.String,Ri=Xt.TypeError,wa=It.prototype,ja=yr.prototype,xa=hi.prototype,La=Xt["__core-js_shared__"],Ca=ja.toString,Vr=xa.hasOwnProperty,aa=0,Ds=function(){var f=/[^.]+$/.exec(La&&La.keys&&La.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),fi=xa.toString,vi=Ca.call(hi),ns=Ji._,Mi=du("^"+Ca.call(Vr).replace(bt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$o=Al?Xt.Buffer:t,wo=Xt.Symbol,Wo=Xt.Uint8Array,nc=$o?$o.allocUnsafe:t,Sa=Hs(hi.getPrototypeOf,hi),fs=hi.create,Li=xa.propertyIsEnumerable,Ks=wa.splice,xo=wo?wo.isConcatSpreadable:t,hr=wo?wo.iterator:t,za=wo?wo.toStringTag:t,$a=function(){try{var f=zh(hi,"defineProperty");return f({},"",{}),f}catch{}}(),la=Xt.clearTimeout!==Ji.clearTimeout&&Xt.clearTimeout,uo=Tn&&Tn.now!==Ji.Date.now&&Tn.now,ud=Xt.setTimeout!==Ji.setTimeout&&Xt.setTimeout,Os=Bi.ceil,Ns=Bi.floor,ua=hi.getOwnPropertySymbols,c=$o?$o.isBuffer:t,y=Xt.isFinite,M=wa.join,q=Hs(hi.keys,hi),ue=Bi.max,Pe=Bi.min,ct=Tn.now,Nt=Xt.parseInt,Gt=Bi.random,ln=wa.reverse,In=zh(Xt,"DataView"),Xn=zh(Xt,"Map"),Dr=zh(Xt,"Promise"),ps=zh(Xt,"Set"),Gi=zh(Xt,"WeakMap"),Is=zh(hi,"create"),Fi=Gi&&new Gi,Lo={},cd=$h(In),Ea=$h(Xn),ca=$h(Dr),qo=$h(ps),Oh=$h(Gi),Du=wo?wo.prototype:t,ii=Du?Du.valueOf:t,Zs=Du?Du.toString:t;function Fe(f){if(co(f)&&!Gr(f)&&!(f instanceof Br)){if(f instanceof Bs)return f;if(Vr.call(f,"__wrapped__"))return Jw(f)}return new Bs(f)}var Co=function(){function f(){}return function(b){if(!Js(b))return{};if(fs)return fs(b);f.prototype=b;var O=new f;return f.prototype=t,O}}();function rc(){}function Bs(f,b){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=t}Fe.templateSettings={escape:kr,evaluate:as,interpolate:Ni,variable:"",imports:{_:Fe}},Fe.prototype=rc.prototype,Fe.prototype.constructor=Fe,Bs.prototype=Co(rc.prototype),Bs.prototype.constructor=Bs;function Br(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=He,this.__views__=[]}function Hd(){var f=new Br(this.__wrapped__);return f.__actions__=Bl(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Bl(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Bl(this.__views__),f}function Af(){if(this.__filtered__){var f=new Br(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Gd(){var f=this.__wrapped__.value(),b=this.__dir__,O=Gr(f),ne=b<0,Se=O?f.length:0,Ve=sk(0,Se,this.__views__),lt=Ve.start,yt=Ve.end,Ot=yt-lt,un=ne?yt:lt-1,cn=this.__iteratees__,vn=cn.length,jn=0,or=Pe(Ot,this.__takeCount__);if(!O||!ne&&Se==Ot&&or==Ot)return Ou(f,this.__actions__);var Lr=[];e:for(;Ot--&&jn<or;){un+=b;for(var ti=-1,Cr=f[un];++ti<vn;){var pi=cn[ti],bi=pi.iteratee,pu=pi.type,vl=bi(Cr);if(pu==F)Cr=vl;else if(!vl){if(pu==$)continue e;break e}}Lr[jn++]=Cr}return Lr}Br.prototype=Co(rc.prototype),Br.prototype.constructor=Br;function pl(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ne=f[b];this.set(ne[0],ne[1])}}function dd(){this.__data__=Is?Is(null):{},this.size=0}function Nh(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}function Gp(f){var b=this.__data__;if(Is){var O=b[f];return O===l?t:O}return Vr.call(b,f)?b[f]:t}function Ic(f){var b=this.__data__;return Is?b[f]!==t:Vr.call(b,f)}function Wd(f,b){var O=this.__data__;return this.size+=this.has(f)?0:1,O[f]=Is&&b===t?l:b,this}pl.prototype.clear=dd,pl.prototype.delete=Nh,pl.prototype.get=Gp,pl.prototype.has=Ic,pl.prototype.set=Wd;function hu(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ne=f[b];this.set(ne[0],ne[1])}}function Wp(){this.__data__=[],this.size=0}function qd(f){var b=this.__data__,O=xt(b,f);if(O<0)return!1;var ne=b.length-1;return O==ne?b.pop():Ks.call(b,O,1),--this.size,!0}function Yd(f){var b=this.__data__,O=xt(b,f);return O<0?t:b[O][1]}function Tf(f){return xt(this.__data__,f)>-1}function Df(f,b){var O=this.__data__,ne=xt(O,f);return ne<0?(++this.size,O.push([f,b])):O[ne][1]=b,this}hu.prototype.clear=Wp,hu.prototype.delete=qd,hu.prototype.get=Yd,hu.prototype.has=Tf,hu.prototype.set=Df;function Ua(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ne=f[b];this.set(ne[0],ne[1])}}function Of(){this.size=0,this.__data__={hash:new pl,map:new(Xn||hu),string:new pl}}function Nf(f){var b=t0(this,f).delete(f);return this.size-=b?1:0,b}function If(f){return t0(this,f).get(f)}function w(f){return t0(this,f).has(f)}function T(f,b){var O=t0(this,f),ne=O.size;return O.set(f,b),this.size+=O.size==ne?0:1,this}Ua.prototype.clear=Of,Ua.prototype.delete=Nf,Ua.prototype.get=If,Ua.prototype.has=w,Ua.prototype.set=T;function Y(f){var b=-1,O=f==null?0:f.length;for(this.__data__=new Ua;++b<O;)this.add(f[b])}function ce(f){return this.__data__.set(f,l),this}function Le(f){return this.__data__.has(f)}Y.prototype.add=Y.prototype.push=ce,Y.prototype.has=Le;function ke(f){var b=this.__data__=new hu(f);this.size=b.size}function Oe(){this.__data__=new hu,this.size=0}function Be(f){var b=this.__data__,O=b.delete(f);return this.size=b.size,O}function ze(f){return this.__data__.get(f)}function Ze(f){return this.__data__.has(f)}function gt(f,b){var O=this.__data__;if(O instanceof hu){var ne=O.__data__;if(!Xn||ne.length<i-1)return ne.push([f,b]),this.size=++O.size,this;O=this.__data__=new Ua(ne)}return O.set(f,b),this.size=O.size,this}ke.prototype.clear=Oe,ke.prototype.delete=Be,ke.prototype.get=ze,ke.prototype.has=Ze,ke.prototype.set=gt;function Ft(f,b){var O=Gr(f),ne=!O&&Uh(f),Se=!O&&!ne&&Zd(f),Ve=!O&&!ne&&!Se&&Hf(f),lt=O||ne||Se||Ve,yt=lt?ts(f.length,lo):[],Ot=yt.length;for(var un in f)(b||Vr.call(f,un))&&!(lt&&(un=="length"||Se&&(un=="offset"||un=="parent")||Ve&&(un=="buffer"||un=="byteLength"||un=="byteOffset")||vd(un,Ot)))&&yt.push(un);return yt}function jt(f){var b=f.length;return b?f[Rh(0,b-1)]:t}function Mt(f,b){return n0(Bl(f),Jn(b,0,f.length))}function Qt(f){return n0(Bl(f))}function Wt(f,b,O){(O!==t&&!uc(f[b],O)||O===t&&!(b in f))&&Dn(f,b,O)}function mt(f,b,O){var ne=f[b];(!(Vr.call(f,b)&&uc(ne,O))||O===t&&!(b in f))&&Dn(f,b,O)}function xt(f,b){for(var O=f.length;O--;)if(uc(f[O][0],b))return O;return-1}function nn(f,b,O,ne){return V(f,function(Se,Ve,lt){b(ne,Se,O(Se),lt)}),ne}function hn(f,b){return f&&Fc(b,da(b),f)}function sn(f,b){return f&&Fc(b,Fl(b),f)}function Dn(f,b,O){b=="__proto__"&&$a?$a(f,b,{configurable:!0,enumerable:!0,value:O,writable:!0}):f[b]=O}function An(f,b){for(var O=-1,ne=b.length,Se=It(ne),Ve=f==null;++O<ne;)Se[O]=Ve?t:w1(f,b[O]);return Se}function Jn(f,b,O){return f===f&&(O!==t&&(f=f<=O?f:O),b!==t&&(f=f>=b?f:b)),f}function d(f,b,O,ne,Se,Ve){var lt,yt=b&p,Ot=b&v,un=b&m;if(O&&(lt=Se?O(f,ne,Se,Ve):O(f)),lt!==t)return lt;if(!Js(f))return f;var cn=Gr(f);if(cn){if(lt=ak(f),!yt)return Bl(f,lt)}else{var vn=Ha(f),jn=vn==Ie||vn==le;if(Zd(f))return Cw(f,yt);if(vn==Ae||vn==H||jn&&!Se){if(lt=Ot||jn?{}:Vw(f),!yt)return Ot?ZP(f,sn(lt,f)):KP(f,hn(lt,f))}else{if(!Fr[vn])return Se?f:{};lt=lk(f,vn,yt)}}Ve||(Ve=new ke);var or=Ve.get(f);if(or)return or;Ve.set(f,lt),yx(f)?f.forEach(function(Cr){lt.add(d(Cr,b,O,Cr,f,Ve))}):mx(f)&&f.forEach(function(Cr,pi){lt.set(pi,d(Cr,b,O,pi,f,Ve))});var Lr=un?Ot?a1:o1:Ot?Fl:da,ti=cn?t:Lr(f);return As(ti||f,function(Cr,pi){ti&&(pi=Cr,Cr=f[pi]),mt(lt,pi,d(Cr,b,O,pi,f,Ve))}),lt}function g(f){var b=da(f);return function(O){return _(O,f,b)}}function _(f,b,O){var ne=O.length;if(f==null)return!ne;for(f=hi(f);ne--;){var Se=O[ne],Ve=b[Se],lt=f[Se];if(lt===t&&!(Se in f)||!Ve(lt))return!1}return!0}function S(f,b,O){if(typeof f!="function")throw new Ri(o);return Xp(function(){f.apply(t,O)},b)}function P(f,b,O,ne){var Se=-1,Ve=Tl,lt=!0,yt=f.length,Ot=[],un=b.length;if(!yt)return Ot;O&&(b=ci(b,Ir(O))),ne?(Ve=Dl,lt=!1):b.length>=i&&(Ve=Ol,lt=!1,b=new Y(b));e:for(;++Se<yt;){var cn=f[Se],vn=O==null?cn:O(cn);if(cn=ne||cn!==0?cn:0,lt&&vn===vn){for(var jn=un;jn--;)if(b[jn]===vn)continue e;Ot.push(cn)}else Ve(b,vn,ne)||Ot.push(cn)}return Ot}var V=kw(tn),te=kw(_n,!0);function se(f,b){var O=!0;return V(f,function(ne,Se,Ve){return O=!!b(ne,Se,Ve),O}),O}function ye(f,b,O){for(var ne=-1,Se=f.length;++ne<Se;){var Ve=f[ne],lt=b(Ve);if(lt!=null&&(yt===t?lt===lt&&!fu(lt):O(lt,yt)))var yt=lt,Ot=Ve}return Ot}function Ee(f,b,O,ne){var Se=f.length;for(O=Qr(O),O<0&&(O=-O>Se?0:Se+O),ne=ne===t||ne>Se?Se:Qr(ne),ne<0&&(ne+=Se),ne=O>ne?0:_x(ne);O<ne;)f[O++]=b;return f}function nt(f,b){var O=[];return V(f,function(ne,Se,Ve){b(ne,Se,Ve)&&O.push(ne)}),O}function Ye(f,b,O,ne,Se){var Ve=-1,lt=f.length;for(O||(O=ck),Se||(Se=[]);++Ve<lt;){var yt=f[Ve];b>0&&O(yt)?b>1?Ye(yt,b-1,O,ne,Se):Ro(Se,yt):ne||(Se[Se.length]=yt)}return Se}var _t=Aw(),Bt=Aw(!0);function tn(f,b){return f&&_t(f,b,da)}function _n(f,b){return f&&Bt(f,b,da)}function Mn(f,b){return oa(b,function(O){return yd(f[O])})}function cr(f,b){b=lc(b,f);for(var O=0,ne=b.length;f!=null&&O<ne;)f=f[jc(b[O++])];return O&&O==ne?f:t}function tt(f,b,O){var ne=b(f);return Gr(f)?ne:Ro(ne,O(f))}function st(f){return f==null?f===t?ut:Z:za&&za in hi(f)?ik(f):vk(f)}function pt(f,b){return f>b}function $t(f,b){return f!=null&&Vr.call(f,b)}function Et(f,b){return f!=null&&b in hi(f)}function Rt(f,b,O){return f>=Pe(b,O)&&f<ue(b,O)}function we(f,b,O){for(var ne=O?Dl:Tl,Se=f[0].length,Ve=f.length,lt=Ve,yt=It(Ve),Ot=1/0,un=[];lt--;){var cn=f[lt];lt&&b&&(cn=ci(cn,Ir(b))),Ot=Pe(cn.length,Ot),yt[lt]=!O&&(b||Se>=120&&cn.length>=120)?new Y(lt&&cn):t}cn=f[0];var vn=-1,jn=yt[0];e:for(;++vn<Se&&un.length<Ot;){var or=cn[vn],Lr=b?b(or):or;if(or=O||or!==0?or:0,!(jn?Ol(jn,Lr):ne(un,Lr,O))){for(lt=Ve;--lt;){var ti=yt[lt];if(!(ti?Ol(ti,Lr):ne(f[lt],Lr,O)))continue e}jn&&jn.push(Lr),un.push(or)}}return un}function Te(f,b,O,ne){return tn(f,function(Se,Ve,lt){b(ne,O(Se),Ve,lt)}),ne}function Ue(f,b,O){b=lc(b,f),f=qw(f,b);var ne=f==null?f:f[jc(Bu(b))];return ne==null?t:ui(ne,f,O)}function $e(f){return co(f)&&st(f)==H}function Ge(f){return co(f)&&st(f)==zt}function qe(f){return co(f)&&st(f)==ae}function dt(f,b,O,ne,Se){return f===b?!0:f==null||b==null||!co(f)&&!co(b)?f!==f&&b!==b:ht(f,b,O,ne,dt,Se)}function ht(f,b,O,ne,Se,Ve){var lt=Gr(f),yt=Gr(b),Ot=lt?ee:Ha(f),un=yt?ee:Ha(b);Ot=Ot==H?Ae:Ot,un=un==H?Ae:un;var cn=Ot==Ae,vn=un==Ae,jn=Ot==un;if(jn&&Zd(f)){if(!Zd(b))return!1;lt=!0,cn=!1}if(jn&&!cn)return Ve||(Ve=new ke),lt||Hf(f)?zw(f,b,O,ne,Se,Ve):nk(f,b,Ot,O,ne,Se,Ve);if(!(O&C)){var or=cn&&Vr.call(f,"__wrapped__"),Lr=vn&&Vr.call(b,"__wrapped__");if(or||Lr){var ti=or?f.value():f,Cr=Lr?b.value():b;return Ve||(Ve=new ke),Se(ti,Cr,O,ne,Ve)}}return jn?(Ve||(Ve=new ke),rk(f,b,O,ne,Se,Ve)):!1}function vt(f){return co(f)&&Ha(f)==me}function Tt(f,b,O,ne){var Se=O.length,Ve=Se,lt=!ne;if(f==null)return!Ve;for(f=hi(f);Se--;){var yt=O[Se];if(lt&&yt[2]?yt[1]!==f[yt[0]]:!(yt[0]in f))return!1}for(;++Se<Ve;){yt=O[Se];var Ot=yt[0],un=f[Ot],cn=yt[1];if(lt&&yt[2]){if(un===t&&!(Ot in f))return!1}else{var vn=new ke;if(ne)var jn=ne(un,cn,Ot,f,b,vn);if(!(jn===t?dt(cn,un,C|E,ne,vn):jn))return!1}}return!0}function Dt(f){if(!Js(f)||hk(f))return!1;var b=yd(f)?Mi:fn;return b.test($h(f))}function on(f){return co(f)&&st(f)==Me}function Fn(f){return co(f)&&Ha(f)==he}function Un(f){return co(f)&&l0(f.length)&&!!_r[st(f)]}function Qn(f){return typeof f=="function"?f:f==null?jl:typeof f=="object"?Gr(f)?ic(f[0],f[1]):So(f):Tx(f)}function si(f){if(!Zp(f))return q(f);var b=[];for(var O in hi(f))Vr.call(f,O)&&O!="constructor"&&b.push(O);return b}function yi(f){if(!Js(f))return mk(f);var b=Zp(f),O=[];for(var ne in f)ne=="constructor"&&(b||!Vr.call(f,ne))||O.push(ne);return O}function Hr(f,b){return f<b}function Pi(f,b){var O=-1,ne=Rl(f)?It(f.length):[];return V(f,function(Se,Ve,lt){ne[++O]=b(Se,Ve,lt)}),ne}function So(f){var b=u1(f);return b.length==1&&b[0][2]?Gw(b[0][0],b[0][1]):function(O){return O===f||Tt(O,f,b)}}function ic(f,b){return d1(f)&&Hw(b)?Gw(jc(f),b):function(O){var ne=w1(O,f);return ne===t&&ne===b?x1(O,f):dt(b,ne,C|E)}}function Ma(f,b,O,ne,Se){f!==b&&_t(b,function(Ve,lt){if(Se||(Se=new ke),Js(Ve))Ih(f,b,lt,O,Ma,ne,Se);else{var yt=ne?ne(f1(f,lt),Ve,lt+"",f,b,Se):t;yt===t&&(yt=Ve),Wt(f,lt,yt)}},Fl)}function Ih(f,b,O,ne,Se,Ve,lt){var yt=f1(f,O),Ot=f1(b,O),un=lt.get(Ot);if(un){Wt(f,O,un);return}var cn=Ve?Ve(yt,Ot,O+"",f,b,lt):t,vn=cn===t;if(vn){var jn=Gr(Ot),or=!jn&&Zd(Ot),Lr=!jn&&!or&&Hf(Ot);cn=Ot,jn||or||Lr?Gr(yt)?cn=yt:Eo(yt)?cn=Bl(yt):or?(vn=!1,cn=Cw(Ot,!0)):Lr?(vn=!1,cn=Sw(Ot,!0)):cn=[]:Jp(Ot)||Uh(Ot)?(cn=yt,Uh(yt)?cn=wx(yt):(!Js(yt)||yd(yt))&&(cn=Vw(Ot))):vn=!1}vn&&(lt.set(Ot,cn),Se(cn,Ot,ne,Ve,lt),lt.delete(Ot)),Wt(f,O,cn)}function gl(f,b){var O=f.length;if(O)return b+=b<0?O:0,vd(b,O)?f[b]:t}function Bc(f,b,O){b.length?b=ci(b,function(Ve){return Gr(Ve)?function(lt){return cr(lt,Ve.length===1?Ve[0]:Ve)}:Ve}):b=[jl];var ne=-1;b=ci(b,Ir(wr()));var Se=Pi(f,function(Ve,lt,yt){var Ot=ci(b,function(un){return un(Ve)});return{criteria:Ot,index:++ne,value:Ve}});return ri(Se,function(Ve,lt){return YP(Ve,lt,O)})}function Pa(f,b){return Xs(f,b,function(O,ne){return x1(f,ne)})}function Xs(f,b,O){for(var ne=-1,Se=b.length,Ve={};++ne<Se;){var lt=b[ne],yt=cr(f,lt);O(yt,lt)&&hd(Ve,lc(lt,f),yt)}return Ve}function rs(f){return function(b){return cr(b,f)}}function Bf(f,b,O,ne){var Se=ne?Nn:dn,Ve=-1,lt=b.length,yt=f;for(f===b&&(b=Bl(b)),O&&(yt=ci(f,Ir(O)));++Ve<lt;)for(var Ot=0,un=b[Ve],cn=O?O(un):un;(Ot=Se(yt,cn,Ot,ne))>-1;)yt!==f&&Ks.call(yt,Ot,1),Ks.call(f,Ot,1);return f}function Bh(f,b){for(var O=f?b.length:0,ne=O-1;O--;){var Se=b[O];if(O==ne||Se!==Ve){var Ve=Se;vd(Se)?Ks.call(f,Se,1):fd(f,Se)}}return f}function Rh(f,b){return f+Ns(Gt()*(b-f+1))}function Fh(f,b,O,ne){for(var Se=-1,Ve=ue(Os((b-f)/(O||1)),0),lt=It(Ve);Ve--;)lt[ne?Ve:++Se]=f,f+=O;return lt}function Rf(f,b){var O="";if(!f||b<1||b>K)return O;do b%2&&(O+=f),b=Ns(b/2),b&&(f+=f);while(b);return O}function Jr(f,b){return p1(Ww(f,b,jl),f+"")}function Ff(f){return jt(Gf(f))}function Hm(f,b){var O=Gf(f);return n0(O,Jn(b,0,O.length))}function hd(f,b,O,ne){if(!Js(f))return f;b=lc(b,f);for(var Se=-1,Ve=b.length,lt=Ve-1,yt=f;yt!=null&&++Se<Ve;){var Ot=jc(b[Se]),un=O;if(Ot==="__proto__"||Ot==="constructor"||Ot==="prototype")return f;if(Se!=lt){var cn=yt[Ot];un=ne?ne(cn,Ot,yt):t,un===t&&(un=Js(cn)?cn:vd(b[Se+1])?[]:{})}mt(yt,Ot,un),yt=yt[Ot]}return f}var sc=Fi?function(f,b){return Fi.set(f,b),f}:jl,Gm=$a?function(f,b){return $a(f,"toString",{configurable:!0,enumerable:!1,value:C1(b),writable:!0})}:jl;function Wm(f){return n0(Gf(f))}function Il(f,b,O){var ne=-1,Se=f.length;b<0&&(b=-b>Se?0:Se+b),O=O>Se?Se:O,O<0&&(O+=Se),Se=b>O?0:O-b>>>0,b>>>=0;for(var Ve=It(Se);++ne<Se;)Ve[ne]=f[ne+b];return Ve}function qm(f,b){var O;return V(f,function(ne,Se,Ve){return O=b(ne,Se,Ve),!O}),!!O}function oc(f,b,O){var ne=0,Se=f==null?ne:f.length;if(typeof b=="number"&&b===b&&Se<=Ce){for(;ne<Se;){var Ve=ne+Se>>>1,lt=f[Ve];lt!==null&&!fu(lt)&&(O?lt<=b:lt<b)?ne=Ve+1:Se=Ve}return Se}return qp(f,b,jl,O)}function qp(f,b,O,ne){var Se=0,Ve=f==null?0:f.length;if(Ve===0)return 0;b=O(b);for(var lt=b!==b,yt=b===null,Ot=fu(b),un=b===t;Se<Ve;){var cn=Ns((Se+Ve)/2),vn=O(f[cn]),jn=vn!==t,or=vn===null,Lr=vn===vn,ti=fu(vn);if(lt)var Cr=ne||Lr;else un?Cr=Lr&&(ne||jn):yt?Cr=Lr&&jn&&(ne||!or):Ot?Cr=Lr&&jn&&!or&&(ne||!ti):or||ti?Cr=!1:Cr=ne?vn<=b:vn<b;Cr?Se=cn+1:Ve=cn}return Pe(Ve,ie)}function Yp(f,b){for(var O=-1,ne=f.length,Se=0,Ve=[];++O<ne;){var lt=f[O],yt=b?b(lt):lt;if(!O||!uc(yt,Ot)){var Ot=yt;Ve[Se++]=lt===0?0:lt}}return Ve}function Ym(f){return typeof f=="number"?f:fu(f)?ge:+f}function Va(f){if(typeof f=="string")return f;if(Gr(f))return ci(f,Va)+"";if(fu(f))return Zs?Zs.call(f):"";var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function Rc(f,b,O){var ne=-1,Se=Tl,Ve=f.length,lt=!0,yt=[],Ot=yt;if(O)lt=!1,Se=Dl;else if(Ve>=i){var un=b?null:ek(f);if(un)return ao(un);lt=!1,Se=Ol,Ot=new Y}else Ot=b?[]:yt;e:for(;++ne<Ve;){var cn=f[ne],vn=b?b(cn):cn;if(cn=O||cn!==0?cn:0,lt&&vn===vn){for(var jn=Ot.length;jn--;)if(Ot[jn]===vn)continue e;b&&Ot.push(vn),yt.push(cn)}else Se(Ot,vn,O)||(Ot!==yt&&Ot.push(vn),yt.push(cn))}return yt}function fd(f,b){return b=lc(b,f),f=qw(f,b),f==null||delete f[jc(Bu(b))]}function jf(f,b,O,ne){return hd(f,b,O(cr(f,b)),ne)}function pd(f,b,O,ne){for(var Se=f.length,Ve=ne?Se:-1;(ne?Ve--:++Ve<Se)&&b(f[Ve],Ve,f););return O?Il(f,ne?0:Ve,ne?Ve+1:Se):Il(f,ne?Ve+1:0,ne?Se:Ve)}function Ou(f,b){var O=f;return O instanceof Br&&(O=O.value()),Ia(b,function(ne,Se){return Se.func.apply(Se.thisArg,Ro([ne],Se.args))},O)}function Nu(f,b,O){var ne=f.length;if(ne<2)return ne?Rc(f[0]):[];for(var Se=-1,Ve=It(ne);++Se<ne;)for(var lt=f[Se],yt=-1;++yt<ne;)yt!=Se&&(Ve[Se]=P(Ve[Se]||lt,f[yt],b,O));return Rc(Ye(Ve,1),b,O)}function ac(f,b,O){for(var ne=-1,Se=f.length,Ve=b.length,lt={};++ne<Se;){var yt=ne<Ve?b[ne]:t;O(lt,f[ne],yt)}return lt}function Kd(f){return Eo(f)?f:[]}function jh(f){return typeof f=="function"?f:jl}function lc(f,b){return Gr(f)?f:d1(f,b)?[f]:Xw(Ui(f))}var n1=Jr;function Iu(f,b,O){var ne=f.length;return O=O===t?ne:O,!b&&O>=ne?f:Il(f,b,O)}var zf=la||function(f){return Ji.clearTimeout(f)};function Cw(f,b){if(b)return f.slice();var O=f.length,ne=nc?nc(O):new f.constructor(O);return f.copy(ne),ne}function r1(f){var b=new f.constructor(f.byteLength);return new Wo(b).set(new Wo(f)),b}function GP(f,b){var O=b?r1(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.byteLength)}function WP(f){var b=new f.constructor(f.source,Vn.exec(f));return b.lastIndex=f.lastIndex,b}function qP(f){return ii?hi(ii.call(f)):{}}function Sw(f,b){var O=b?r1(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.length)}function Ew(f,b){if(f!==b){var O=f!==t,ne=f===null,Se=f===f,Ve=fu(f),lt=b!==t,yt=b===null,Ot=b===b,un=fu(b);if(!yt&&!un&&!Ve&&f>b||Ve&&lt&&Ot&&!yt&&!un||ne&&lt&&Ot||!O&&Ot||!Se)return 1;if(!ne&&!Ve&&!un&&f<b||un&&O&&Se&&!ne&&!Ve||yt&&O&&Se||!lt&&Se||!Ot)return-1}return 0}function YP(f,b,O){for(var ne=-1,Se=f.criteria,Ve=b.criteria,lt=Se.length,yt=O.length;++ne<lt;){var Ot=Ew(Se[ne],Ve[ne]);if(Ot){if(ne>=yt)return Ot;var un=O[ne];return Ot*(un=="desc"?-1:1)}}return f.index-b.index}function Mw(f,b,O,ne){for(var Se=-1,Ve=f.length,lt=O.length,yt=-1,Ot=b.length,un=ue(Ve-lt,0),cn=It(Ot+un),vn=!ne;++yt<Ot;)cn[yt]=b[yt];for(;++Se<lt;)(vn||Se<Ve)&&(cn[O[Se]]=f[Se]);for(;un--;)cn[yt++]=f[Se++];return cn}function Pw(f,b,O,ne){for(var Se=-1,Ve=f.length,lt=-1,yt=O.length,Ot=-1,un=b.length,cn=ue(Ve-yt,0),vn=It(cn+un),jn=!ne;++Se<cn;)vn[Se]=f[Se];for(var or=Se;++Ot<un;)vn[or+Ot]=b[Ot];for(;++lt<yt;)(jn||Se<Ve)&&(vn[or+O[lt]]=f[Se++]);return vn}function Bl(f,b){var O=-1,ne=f.length;for(b||(b=It(ne));++O<ne;)b[O]=f[O];return b}function Fc(f,b,O,ne){var Se=!O;O||(O={});for(var Ve=-1,lt=b.length;++Ve<lt;){var yt=b[Ve],Ot=ne?ne(O[yt],f[yt],yt,O,f):t;Ot===t&&(Ot=f[yt]),Se?Dn(O,yt,Ot):mt(O,yt,Ot)}return O}function KP(f,b){return Fc(f,c1(f),b)}function ZP(f,b){return Fc(f,$w(f),b)}function Km(f,b){return function(O,ne){var Se=Gr(O)?Oc:nn,Ve=b?b():{};return Se(O,f,wr(ne,2),Ve)}}function $f(f){return Jr(function(b,O){var ne=-1,Se=O.length,Ve=Se>1?O[Se-1]:t,lt=Se>2?O[2]:t;for(Ve=f.length>3&&typeof Ve=="function"?(Se--,Ve):t,lt&&ml(O[0],O[1],lt)&&(Ve=Se<3?t:Ve,Se=1),b=hi(b);++ne<Se;){var yt=O[ne];yt&&f(b,yt,ne,Ve)}return b})}function kw(f,b){return function(O,ne){if(O==null)return O;if(!Rl(O))return f(O,ne);for(var Se=O.length,Ve=b?Se:-1,lt=hi(O);(b?Ve--:++Ve<Se)&&ne(lt[Ve],Ve,lt)!==!1;);return O}}function Aw(f){return function(b,O,ne){for(var Se=-1,Ve=hi(b),lt=ne(b),yt=lt.length;yt--;){var Ot=lt[f?yt:++Se];if(O(Ve[Ot],Ot,Ve)===!1)break}return b}}function XP(f,b,O){var ne=b&k,Se=Kp(f);function Ve(){var lt=this&&this!==Ji&&this instanceof Ve?Se:f;return lt.apply(ne?O:this,arguments)}return Ve}function Tw(f){return function(b){b=Ui(b);var O=ba(b)?Ws(b):t,ne=O?O[0]:b.charAt(0),Se=O?Iu(O,1).join(""):b.slice(1);return ne[f]()+Se}}function Uf(f){return function(b){return Ia(kx(Px(b).replace(Xr,"")),f,"")}}function Kp(f){return function(){var b=arguments;switch(b.length){case 0:return new f;case 1:return new f(b[0]);case 2:return new f(b[0],b[1]);case 3:return new f(b[0],b[1],b[2]);case 4:return new f(b[0],b[1],b[2],b[3]);case 5:return new f(b[0],b[1],b[2],b[3],b[4]);case 6:return new f(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new f(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var O=Co(f.prototype),ne=f.apply(O,b);return Js(ne)?ne:O}}function JP(f,b,O){var ne=Kp(f);function Se(){for(var Ve=arguments.length,lt=It(Ve),yt=Ve,Ot=Vf(Se);yt--;)lt[yt]=arguments[yt];var un=Ve<3&&lt[0]!==Ot&&lt[Ve-1]!==Ot?[]:oo(lt,Ot);if(Ve-=un.length,Ve<O)return Bw(f,b,Zm,Se.placeholder,t,lt,un,t,t,O-Ve);var cn=this&&this!==Ji&&this instanceof Se?ne:f;return ui(cn,this,lt)}return Se}function Dw(f){return function(b,O,ne){var Se=hi(b);if(!Rl(b)){var Ve=wr(O,3);b=da(b),O=function(yt){return Ve(Se[yt],yt,Se)}}var lt=f(b,O,ne);return lt>-1?Se[Ve?b[lt]:lt]:t}}function Ow(f){return md(function(b){var O=b.length,ne=O,Se=Bs.prototype.thru;for(f&&b.reverse();ne--;){var Ve=b[ne];if(typeof Ve!="function")throw new Ri(o);if(Se&&!lt&&e0(Ve)=="wrapper")var lt=new Bs([],!0)}for(ne=lt?ne:O;++ne<O;){Ve=b[ne];var yt=e0(Ve),Ot=yt=="wrapper"?l1(Ve):t;Ot&&h1(Ot[0])&&Ot[1]==(fe|R|Q|N)&&!Ot[4].length&&Ot[9]==1?lt=lt[e0(Ot[0])].apply(lt,Ot[3]):lt=Ve.length==1&&h1(Ve)?lt[yt]():lt.thru(Ve)}return function(){var un=arguments,cn=un[0];if(lt&&un.length==1&&Gr(cn))return lt.plant(cn).value();for(var vn=0,jn=O?b[vn].apply(this,un):cn;++vn<O;)jn=b[vn].call(this,jn);return jn}})}function Zm(f,b,O,ne,Se,Ve,lt,yt,Ot,un){var cn=b&fe,vn=b&k,jn=b&A,or=b&(R|W),Lr=b&z,ti=jn?t:Kp(f);function Cr(){for(var pi=arguments.length,bi=It(pi),pu=pi;pu--;)bi[pu]=arguments[pu];if(or)var vl=Vf(Cr),gu=ya(bi,vl);if(ne&&(bi=Mw(bi,ne,Se,or)),Ve&&(bi=Pw(bi,Ve,lt,or)),pi-=gu,or&&pi<un){var Mo=oo(bi,vl);return Bw(f,b,Zm,Cr.placeholder,O,bi,Mo,yt,Ot,un-pi)}var cc=vn?O:this,_d=jn?cc[f]:f;return pi=bi.length,yt?bi=yk(bi,yt):Lr&&pi>1&&bi.reverse(),cn&&Ot<pi&&(bi.length=Ot),this&&this!==Ji&&this instanceof Cr&&(_d=ti||Kp(_d)),_d.apply(cc,bi)}return Cr}function Nw(f,b){return function(O,ne){return Te(O,f,b(ne),{})}}function Xm(f,b){return function(O,ne){var Se;if(O===t&&ne===t)return b;if(O!==t&&(Se=O),ne!==t){if(Se===t)return ne;typeof O=="string"||typeof ne=="string"?(O=Va(O),ne=Va(ne)):(O=Ym(O),ne=Ym(ne)),Se=f(O,ne)}return Se}}function i1(f){return md(function(b){return b=ci(b,Ir(wr())),Jr(function(O){var ne=this;return f(b,function(Se){return ui(Se,ne,O)})})})}function Jm(f,b){b=b===t?" ":Va(b);var O=b.length;if(O<2)return O?Rf(b,f):b;var ne=Rf(b,Os(f/Gs(b)));return ba(b)?Iu(Ws(ne),0,f).join(""):ne.slice(0,f)}function QP(f,b,O,ne){var Se=b&k,Ve=Kp(f);function lt(){for(var yt=-1,Ot=arguments.length,un=-1,cn=ne.length,vn=It(cn+Ot),jn=this&&this!==Ji&&this instanceof lt?Ve:f;++un<cn;)vn[un]=ne[un];for(;Ot--;)vn[un++]=arguments[++yt];return ui(jn,Se?O:this,vn)}return lt}function Iw(f){return function(b,O,ne){return ne&&typeof ne!="number"&&ml(b,O,ne)&&(O=ne=t),b=bd(b),O===t?(O=b,b=0):O=bd(O),ne=ne===t?b<O?1:-1:bd(ne),Fh(b,O,ne,f)}}function Qm(f){return function(b,O){return typeof b=="string"&&typeof O=="string"||(b=Ru(b),O=Ru(O)),f(b,O)}}function Bw(f,b,O,ne,Se,Ve,lt,yt,Ot,un){var cn=b&R,vn=cn?lt:t,jn=cn?t:lt,or=cn?Ve:t,Lr=cn?t:Ve;b|=cn?Q:de,b&=~(cn?de:Q),b&D||(b&=-4);var ti=[f,b,Se,or,vn,Lr,jn,yt,Ot,un],Cr=O.apply(t,ti);return h1(f)&&Yw(Cr,ti),Cr.placeholder=ne,Kw(Cr,f,b)}function s1(f){var b=Bi[f];return function(O,ne){if(O=Ru(O),ne=ne==null?0:Pe(Qr(ne),292),ne&&y(O)){var Se=(Ui(O)+"e").split("e"),Ve=b(Se[0]+"e"+(+Se[1]+ne));return Se=(Ui(Ve)+"e").split("e"),+(Se[0]+"e"+(+Se[1]-ne))}return b(O)}}var ek=ps&&1/ao(new ps([,-0]))[1]==X?function(f){return new ps(f)}:M1;function Rw(f){return function(b){var O=Ha(b);return O==me?Nl(b):O==he?Nc(b):ds(b,f(b))}}function gd(f,b,O,ne,Se,Ve,lt,yt){var Ot=b&A;if(!Ot&&typeof f!="function")throw new Ri(o);var un=ne?ne.length:0;if(un||(b&=-97,ne=Se=t),lt=lt===t?lt:ue(Qr(lt),0),yt=yt===t?yt:Qr(yt),un-=Se?Se.length:0,b&de){var cn=ne,vn=Se;ne=Se=t}var jn=Ot?t:l1(f),or=[f,b,O,ne,Se,cn,vn,Ve,lt,yt];if(jn&&gk(or,jn),f=or[0],b=or[1],O=or[2],ne=or[3],Se=or[4],yt=or[9]=or[9]===t?Ot?0:f.length:ue(or[9]-un,0),!yt&&b&(R|W)&&(b&=-25),!b||b==k)var Lr=XP(f,b,O);else b==R||b==W?Lr=JP(f,b,yt):(b==Q||b==(k|Q))&&!Se.length?Lr=QP(f,b,O,ne):Lr=Zm.apply(t,or);var ti=jn?sc:Yw;return Kw(ti(Lr,or),f,b)}function Fw(f,b,O,ne){return f===t||uc(f,xa[O])&&!Vr.call(ne,O)?b:f}function jw(f,b,O,ne,Se,Ve){return Js(f)&&Js(b)&&(Ve.set(b,f),Ma(f,b,t,jw,Ve),Ve.delete(b)),f}function tk(f){return Jp(f)?t:f}function zw(f,b,O,ne,Se,Ve){var lt=O&C,yt=f.length,Ot=b.length;if(yt!=Ot&&!(lt&&Ot>yt))return!1;var un=Ve.get(f),cn=Ve.get(b);if(un&&cn)return un==b&&cn==f;var vn=-1,jn=!0,or=O&E?new Y:t;for(Ve.set(f,b),Ve.set(b,f);++vn<yt;){var Lr=f[vn],ti=b[vn];if(ne)var Cr=lt?ne(ti,Lr,vn,b,f,Ve):ne(Lr,ti,vn,f,b,Ve);if(Cr!==t){if(Cr)continue;jn=!1;break}if(or){if(!j(b,function(pi,bi){if(!Ol(or,bi)&&(Lr===pi||Se(Lr,pi,O,ne,Ve)))return or.push(bi)})){jn=!1;break}}else if(!(Lr===ti||Se(Lr,ti,O,ne,Ve))){jn=!1;break}}return Ve.delete(f),Ve.delete(b),jn}function nk(f,b,O,ne,Se,Ve,lt){switch(O){case qt:if(f.byteLength!=b.byteLength||f.byteOffset!=b.byteOffset)return!1;f=f.buffer,b=b.buffer;case zt:return!(f.byteLength!=b.byteLength||!Ve(new Wo(f),new Wo(b)));case re:case ae:case oe:return uc(+f,+b);case be:return f.name==b.name&&f.message==b.message;case Me:case We:return f==b+"";case me:var yt=Nl;case he:var Ot=ne&C;if(yt||(yt=ao),f.size!=b.size&&!Ot)return!1;var un=lt.get(f);if(un)return un==b;ne|=E,lt.set(f,b);var cn=zw(yt(f),yt(b),ne,Se,Ve,lt);return lt.delete(f),cn;case at:if(ii)return ii.call(f)==ii.call(b)}return!1}function rk(f,b,O,ne,Se,Ve){var lt=O&C,yt=o1(f),Ot=yt.length,un=o1(b),cn=un.length;if(Ot!=cn&&!lt)return!1;for(var vn=Ot;vn--;){var jn=yt[vn];if(!(lt?jn in b:Vr.call(b,jn)))return!1}var or=Ve.get(f),Lr=Ve.get(b);if(or&&Lr)return or==b&&Lr==f;var ti=!0;Ve.set(f,b),Ve.set(b,f);for(var Cr=lt;++vn<Ot;){jn=yt[vn];var pi=f[jn],bi=b[jn];if(ne)var pu=lt?ne(bi,pi,jn,b,f,Ve):ne(pi,bi,jn,f,b,Ve);if(!(pu===t?pi===bi||Se(pi,bi,O,ne,Ve):pu)){ti=!1;break}Cr||(Cr=jn=="constructor")}if(ti&&!Cr){var vl=f.constructor,gu=b.constructor;vl!=gu&&"constructor"in f&&"constructor"in b&&!(typeof vl=="function"&&vl instanceof vl&&typeof gu=="function"&&gu instanceof gu)&&(ti=!1)}return Ve.delete(f),Ve.delete(b),ti}function md(f){return p1(Ww(f,t,tx),f+"")}function o1(f){return tt(f,da,c1)}function a1(f){return tt(f,Fl,$w)}var l1=Fi?function(f){return Fi.get(f)}:M1;function e0(f){for(var b=f.name+"",O=Lo[b],ne=Vr.call(Lo,b)?O.length:0;ne--;){var Se=O[ne],Ve=Se.func;if(Ve==null||Ve==f)return Se.name}return b}function Vf(f){var b=Vr.call(Fe,"placeholder")?Fe:f;return b.placeholder}function wr(){var f=Fe.iteratee||S1;return f=f===S1?Qn:f,arguments.length?f(arguments[0],arguments[1]):f}function t0(f,b){var O=f.__data__;return dk(b)?O[typeof b=="string"?"string":"hash"]:O.map}function u1(f){for(var b=da(f),O=b.length;O--;){var ne=b[O],Se=f[ne];b[O]=[ne,Se,Hw(Se)]}return b}function zh(f,b){var O=hs(f,b);return Dt(O)?O:t}function ik(f){var b=Vr.call(f,za),O=f[za];try{f[za]=t;var ne=!0}catch{}var Se=fi.call(f);return ne&&(b?f[za]=O:delete f[za]),Se}var c1=ua?function(f){return f==null?[]:(f=hi(f),oa(ua(f),function(b){return Li.call(f,b)}))}:P1,$w=ua?function(f){for(var b=[];f;)Ro(b,c1(f)),f=Sa(f);return b}:P1,Ha=st;(In&&Ha(new In(new ArrayBuffer(1)))!=qt||Xn&&Ha(new Xn)!=me||Dr&&Ha(Dr.resolve())!=je||ps&&Ha(new ps)!=he||Gi&&Ha(new Gi)!=Ct)&&(Ha=function(f){var b=st(f),O=b==Ae?f.constructor:t,ne=O?$h(O):"";if(ne)switch(ne){case cd:return qt;case Ea:return me;case ca:return je;case qo:return he;case Oh:return Ct}return b});function sk(f,b,O){for(var ne=-1,Se=O.length;++ne<Se;){var Ve=O[ne],lt=Ve.size;switch(Ve.type){case"drop":f+=lt;break;case"dropRight":b-=lt;break;case"take":b=Pe(b,f+lt);break;case"takeRight":f=ue(f,b-lt);break}}return{start:f,end:b}}function ok(f){var b=f.match(rn);return b?b[1].split(Zt):[]}function Uw(f,b,O){b=lc(b,f);for(var ne=-1,Se=b.length,Ve=!1;++ne<Se;){var lt=jc(b[ne]);if(!(Ve=f!=null&&O(f,lt)))break;f=f[lt]}return Ve||++ne!=Se?Ve:(Se=f==null?0:f.length,!!Se&&l0(Se)&&vd(lt,Se)&&(Gr(f)||Uh(f)))}function ak(f){var b=f.length,O=new f.constructor(b);return b&&typeof f[0]=="string"&&Vr.call(f,"index")&&(O.index=f.index,O.input=f.input),O}function Vw(f){return typeof f.constructor=="function"&&!Zp(f)?Co(Sa(f)):{}}function lk(f,b,O){var ne=f.constructor;switch(b){case zt:return r1(f);case re:case ae:return new ne(+f);case qt:return GP(f,O);case Qe:case ot:case it:case At:case Yt:case bn:case xn:case En:case $n:return Sw(f,O);case me:return new ne;case oe:case We:return new ne(f);case Me:return WP(f);case he:return new ne;case at:return qP(f)}}function uk(f,b){var O=b.length;if(!O)return f;var ne=O-1;return b[ne]=(O>1?"& ":"")+b[ne],b=b.join(O>2?", ":" "),f.replace(Kt,`{
/* [wrapped with `+b+`] */
`)}function ck(f){return Gr(f)||Uh(f)||!!(xo&&f&&f[xo])}function vd(f,b){var O=typeof f;return b=b??K,!!b&&(O=="number"||O!="symbol"&&Ci.test(f))&&f>-1&&f%1==0&&f<b}function ml(f,b,O){if(!Js(O))return!1;var ne=typeof b;return(ne=="number"?Rl(O)&&vd(b,O.length):ne=="string"&&b in O)?uc(O[b],f):!1}function d1(f,b){if(Gr(f))return!1;var O=typeof f;return O=="number"||O=="symbol"||O=="boolean"||f==null||fu(f)?!0:Ps.test(f)||!io.test(f)||b!=null&&f in hi(b)}function dk(f){var b=typeof f;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?f!=="__proto__":f===null}function h1(f){var b=e0(f),O=Fe[b];if(typeof O!="function"||!(b in Br.prototype))return!1;if(f===O)return!0;var ne=l1(O);return!!ne&&f===ne[0]}function hk(f){return!!Ds&&Ds in f}var fk=La?yd:k1;function Zp(f){var b=f&&f.constructor,O=typeof b=="function"&&b.prototype||xa;return f===O}function Hw(f){return f===f&&!Js(f)}function Gw(f,b){return function(O){return O==null?!1:O[f]===b&&(b!==t||f in hi(O))}}function pk(f){var b=o0(f,function(ne){return O.size===u&&O.clear(),ne}),O=b.cache;return b}function gk(f,b){var O=f[1],ne=b[1],Se=O|ne,Ve=Se<(k|A|fe),lt=ne==fe&&O==R||ne==fe&&O==N&&f[7].length<=b[8]||ne==(fe|N)&&b[7].length<=b[8]&&O==R;if(!(Ve||lt))return f;ne&k&&(f[2]=b[2],Se|=O&k?0:D);var yt=b[3];if(yt){var Ot=f[3];f[3]=Ot?Mw(Ot,yt,b[4]):yt,f[4]=Ot?oo(f[3],h):b[4]}return yt=b[5],yt&&(Ot=f[5],f[5]=Ot?Pw(Ot,yt,b[6]):yt,f[6]=Ot?oo(f[5],h):b[6]),yt=b[7],yt&&(f[7]=yt),ne&fe&&(f[8]=f[8]==null?b[8]:Pe(f[8],b[8])),f[9]==null&&(f[9]=b[9]),f[0]=b[0],f[1]=Se,f}function mk(f){var b=[];if(f!=null)for(var O in hi(f))b.push(O);return b}function vk(f){return fi.call(f)}function Ww(f,b,O){return b=ue(b===t?f.length-1:b,0),function(){for(var ne=arguments,Se=-1,Ve=ue(ne.length-b,0),lt=It(Ve);++Se<Ve;)lt[Se]=ne[b+Se];Se=-1;for(var yt=It(b+1);++Se<b;)yt[Se]=ne[Se];return yt[b]=O(lt),ui(f,this,yt)}}function qw(f,b){return b.length<2?f:cr(f,Il(b,0,-1))}function yk(f,b){for(var O=f.length,ne=Pe(b.length,O),Se=Bl(f);ne--;){var Ve=b[ne];f[ne]=vd(Ve,O)?Se[Ve]:t}return f}function f1(f,b){if(!(b==="constructor"&&typeof f[b]=="function")&&b!="__proto__")return f[b]}var Yw=Zw(sc),Xp=ud||function(f,b){return Ji.setTimeout(f,b)},p1=Zw(Gm);function Kw(f,b,O){var ne=b+"";return p1(f,uk(ne,bk(ok(ne),O)))}function Zw(f){var b=0,O=0;return function(){var ne=ct(),Se=G-(ne-O);if(O=ne,Se>0){if(++b>=B)return arguments[0]}else b=0;return f.apply(t,arguments)}}function n0(f,b){var O=-1,ne=f.length,Se=ne-1;for(b=b===t?ne:b;++O<b;){var Ve=Rh(O,Se),lt=f[Ve];f[Ve]=f[O],f[O]=lt}return f.length=b,f}var Xw=pk(function(f){var b=[];return f.charCodeAt(0)===46&&b.push(""),f.replace(Zn,function(O,ne,Se,Ve){b.push(Se?Ve.replace(gn,"$1"):ne||O)}),b});function jc(f){if(typeof f=="string"||fu(f))return f;var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function $h(f){if(f!=null){try{return Ca.call(f)}catch{}try{return f+""}catch{}}return""}function bk(f,b){return As(_e,function(O){var ne="_."+O[0];b&O[1]&&!Tl(f,ne)&&f.push(ne)}),f.sort()}function Jw(f){if(f instanceof Br)return f.clone();var b=new Bs(f.__wrapped__,f.__chain__);return b.__actions__=Bl(f.__actions__),b.__index__=f.__index__,b.__values__=f.__values__,b}function _k(f,b,O){(O?ml(f,b,O):b===t)?b=1:b=ue(Qr(b),0);var ne=f==null?0:f.length;if(!ne||b<1)return[];for(var Se=0,Ve=0,lt=It(Os(ne/b));Se<ne;)lt[Ve++]=Il(f,Se,Se+=b);return lt}function wk(f){for(var b=-1,O=f==null?0:f.length,ne=0,Se=[];++b<O;){var Ve=f[b];Ve&&(Se[ne++]=Ve)}return Se}function xk(){var f=arguments.length;if(!f)return[];for(var b=It(f-1),O=arguments[0],ne=f;ne--;)b[ne-1]=arguments[ne];return Ro(Gr(O)?Bl(O):[O],Ye(b,1))}var Lk=Jr(function(f,b){return Eo(f)?P(f,Ye(b,1,Eo,!0)):[]}),Ck=Jr(function(f,b){var O=Bu(b);return Eo(O)&&(O=t),Eo(f)?P(f,Ye(b,1,Eo,!0),wr(O,2)):[]}),Sk=Jr(function(f,b){var O=Bu(b);return Eo(O)&&(O=t),Eo(f)?P(f,Ye(b,1,Eo,!0),t,O):[]});function Ek(f,b,O){var ne=f==null?0:f.length;return ne?(b=O||b===t?1:Qr(b),Il(f,b<0?0:b,ne)):[]}function Mk(f,b,O){var ne=f==null?0:f.length;return ne?(b=O||b===t?1:Qr(b),b=ne-b,Il(f,0,b<0?0:b)):[]}function Pk(f,b){return f&&f.length?pd(f,wr(b,3),!0,!0):[]}function kk(f,b){return f&&f.length?pd(f,wr(b,3),!0):[]}function Ak(f,b,O,ne){var Se=f==null?0:f.length;return Se?(O&&typeof O!="number"&&ml(f,b,O)&&(O=0,ne=Se),Ee(f,b,O,ne)):[]}function Qw(f,b,O){var ne=f==null?0:f.length;if(!ne)return-1;var Se=O==null?0:Qr(O);return Se<0&&(Se=ue(ne+Se,0)),Ht(f,wr(b,3),Se)}function ex(f,b,O){var ne=f==null?0:f.length;if(!ne)return-1;var Se=ne-1;return O!==t&&(Se=Qr(O),Se=O<0?ue(ne+Se,0):Pe(Se,ne-1)),Ht(f,wr(b,3),Se,!0)}function tx(f){var b=f==null?0:f.length;return b?Ye(f,1):[]}function Tk(f){var b=f==null?0:f.length;return b?Ye(f,X):[]}function Dk(f,b){var O=f==null?0:f.length;return O?(b=b===t?1:Qr(b),Ye(f,b)):[]}function Ok(f){for(var b=-1,O=f==null?0:f.length,ne={};++b<O;){var Se=f[b];ne[Se[0]]=Se[1]}return ne}function nx(f){return f&&f.length?f[0]:t}function Nk(f,b,O){var ne=f==null?0:f.length;if(!ne)return-1;var Se=O==null?0:Qr(O);return Se<0&&(Se=ue(ne+Se,0)),dn(f,b,Se)}function Ik(f){var b=f==null?0:f.length;return b?Il(f,0,-1):[]}var Bk=Jr(function(f){var b=ci(f,Kd);return b.length&&b[0]===f[0]?we(b):[]}),Rk=Jr(function(f){var b=Bu(f),O=ci(f,Kd);return b===Bu(O)?b=t:O.pop(),O.length&&O[0]===f[0]?we(O,wr(b,2)):[]}),Fk=Jr(function(f){var b=Bu(f),O=ci(f,Kd);return b=typeof b=="function"?b:t,b&&O.pop(),O.length&&O[0]===f[0]?we(O,t,b):[]});function jk(f,b){return f==null?"":M.call(f,b)}function Bu(f){var b=f==null?0:f.length;return b?f[b-1]:t}function zk(f,b,O){var ne=f==null?0:f.length;if(!ne)return-1;var Se=ne;return O!==t&&(Se=Qr(O),Se=Se<0?ue(ne+Se,0):Pe(Se,ne-1)),b===b?Ba(f,b,Se):Ht(f,Rn,Se,!0)}function $k(f,b){return f&&f.length?gl(f,Qr(b)):t}var Uk=Jr(rx);function rx(f,b){return f&&f.length&&b&&b.length?Bf(f,b):f}function Vk(f,b,O){return f&&f.length&&b&&b.length?Bf(f,b,wr(O,2)):f}function Hk(f,b,O){return f&&f.length&&b&&b.length?Bf(f,b,t,O):f}var Gk=md(function(f,b){var O=f==null?0:f.length,ne=An(f,b);return Bh(f,ci(b,function(Se){return vd(Se,O)?+Se:Se}).sort(Ew)),ne});function Wk(f,b){var O=[];if(!(f&&f.length))return O;var ne=-1,Se=[],Ve=f.length;for(b=wr(b,3);++ne<Ve;){var lt=f[ne];b(lt,ne,f)&&(O.push(lt),Se.push(ne))}return Bh(f,Se),O}function g1(f){return f==null?f:ln.call(f)}function qk(f,b,O){var ne=f==null?0:f.length;return ne?(O&&typeof O!="number"&&ml(f,b,O)?(b=0,O=ne):(b=b==null?0:Qr(b),O=O===t?ne:Qr(O)),Il(f,b,O)):[]}function Yk(f,b){return oc(f,b)}function Kk(f,b,O){return qp(f,b,wr(O,2))}function Zk(f,b){var O=f==null?0:f.length;if(O){var ne=oc(f,b);if(ne<O&&uc(f[ne],b))return ne}return-1}function Xk(f,b){return oc(f,b,!0)}function Jk(f,b,O){return qp(f,b,wr(O,2),!0)}function Qk(f,b){var O=f==null?0:f.length;if(O){var ne=oc(f,b,!0)-1;if(uc(f[ne],b))return ne}return-1}function eA(f){return f&&f.length?Yp(f):[]}function tA(f,b){return f&&f.length?Yp(f,wr(b,2)):[]}function nA(f){var b=f==null?0:f.length;return b?Il(f,1,b):[]}function rA(f,b,O){return f&&f.length?(b=O||b===t?1:Qr(b),Il(f,0,b<0?0:b)):[]}function iA(f,b,O){var ne=f==null?0:f.length;return ne?(b=O||b===t?1:Qr(b),b=ne-b,Il(f,b<0?0:b,ne)):[]}function sA(f,b){return f&&f.length?pd(f,wr(b,3),!1,!0):[]}function oA(f,b){return f&&f.length?pd(f,wr(b,3)):[]}var aA=Jr(function(f){return Rc(Ye(f,1,Eo,!0))}),lA=Jr(function(f){var b=Bu(f);return Eo(b)&&(b=t),Rc(Ye(f,1,Eo,!0),wr(b,2))}),uA=Jr(function(f){var b=Bu(f);return b=typeof b=="function"?b:t,Rc(Ye(f,1,Eo,!0),t,b)});function cA(f){return f&&f.length?Rc(f):[]}function dA(f,b){return f&&f.length?Rc(f,wr(b,2)):[]}function hA(f,b){return b=typeof b=="function"?b:t,f&&f.length?Rc(f,t,b):[]}function m1(f){if(!(f&&f.length))return[];var b=0;return f=oa(f,function(O){if(Eo(O))return b=ue(O.length,b),!0}),ts(b,function(O){return ci(f,gr(O))})}function ix(f,b){if(!(f&&f.length))return[];var O=m1(f);return b==null?O:ci(O,function(ne){return ui(b,t,ne)})}var fA=Jr(function(f,b){return Eo(f)?P(f,b):[]}),pA=Jr(function(f){return Nu(oa(f,Eo))}),gA=Jr(function(f){var b=Bu(f);return Eo(b)&&(b=t),Nu(oa(f,Eo),wr(b,2))}),mA=Jr(function(f){var b=Bu(f);return b=typeof b=="function"?b:t,Nu(oa(f,Eo),t,b)}),vA=Jr(m1);function yA(f,b){return ac(f||[],b||[],mt)}function bA(f,b){return ac(f||[],b||[],hd)}var _A=Jr(function(f){var b=f.length,O=b>1?f[b-1]:t;return O=typeof O=="function"?(f.pop(),O):t,ix(f,O)});function sx(f){var b=Fe(f);return b.__chain__=!0,b}function wA(f,b){return b(f),f}function r0(f,b){return b(f)}var xA=md(function(f){var b=f.length,O=b?f[0]:0,ne=this.__wrapped__,Se=function(Ve){return An(Ve,f)};return b>1||this.__actions__.length||!(ne instanceof Br)||!vd(O)?this.thru(Se):(ne=ne.slice(O,+O+(b?1:0)),ne.__actions__.push({func:r0,args:[Se],thisArg:t}),new Bs(ne,this.__chain__).thru(function(Ve){return b&&!Ve.length&&Ve.push(t),Ve}))});function LA(){return sx(this)}function CA(){return new Bs(this.value(),this.__chain__)}function SA(){this.__values__===t&&(this.__values__=bx(this.value()));var f=this.__index__>=this.__values__.length,b=f?t:this.__values__[this.__index__++];return{done:f,value:b}}function EA(){return this}function MA(f){for(var b,O=this;O instanceof rc;){var ne=Jw(O);ne.__index__=0,ne.__values__=t,b?Se.__wrapped__=ne:b=ne;var Se=ne;O=O.__wrapped__}return Se.__wrapped__=f,b}function PA(){var f=this.__wrapped__;if(f instanceof Br){var b=f;return this.__actions__.length&&(b=new Br(this)),b=b.reverse(),b.__actions__.push({func:r0,args:[g1],thisArg:t}),new Bs(b,this.__chain__)}return this.thru(g1)}function kA(){return Ou(this.__wrapped__,this.__actions__)}var AA=Km(function(f,b,O){Vr.call(f,O)?++f[O]:Dn(f,O,1)});function TA(f,b,O){var ne=Gr(f)?cu:se;return O&&ml(f,b,O)&&(b=t),ne(f,wr(b,3))}function DA(f,b){var O=Gr(f)?oa:nt;return O(f,wr(b,3))}var OA=Dw(Qw),NA=Dw(ex);function IA(f,b){return Ye(i0(f,b),1)}function BA(f,b){return Ye(i0(f,b),X)}function RA(f,b,O){return O=O===t?1:Qr(O),Ye(i0(f,b),O)}function ox(f,b){var O=Gr(f)?As:V;return O(f,wr(b,3))}function ax(f,b){var O=Gr(f)?sa:te;return O(f,wr(b,3))}var FA=Km(function(f,b,O){Vr.call(f,O)?f[O].push(b):Dn(f,O,[b])});function jA(f,b,O,ne){f=Rl(f)?f:Gf(f),O=O&&!ne?Qr(O):0;var Se=f.length;return O<0&&(O=ue(Se+O,0)),u0(f)?O<=Se&&f.indexOf(b,O)>-1:!!Se&&dn(f,b,O)>-1}var zA=Jr(function(f,b,O){var ne=-1,Se=typeof b=="function",Ve=Rl(f)?It(f.length):[];return V(f,function(lt){Ve[++ne]=Se?ui(b,lt,O):Ue(lt,b,O)}),Ve}),$A=Km(function(f,b,O){Dn(f,O,b)});function i0(f,b){var O=Gr(f)?ci:Pi;return O(f,wr(b,3))}function UA(f,b,O,ne){return f==null?[]:(Gr(b)||(b=b==null?[]:[b]),O=ne?t:O,Gr(O)||(O=O==null?[]:[O]),Bc(f,b,O))}var VA=Km(function(f,b,O){f[O?0:1].push(b)},function(){return[[],[]]});function HA(f,b,O){var ne=Gr(f)?Ia:Ti,Se=arguments.length<3;return ne(f,wr(b,4),O,Se,V)}function GA(f,b,O){var ne=Gr(f)?es:Ti,Se=arguments.length<3;return ne(f,wr(b,4),O,Se,te)}function WA(f,b){var O=Gr(f)?oa:nt;return O(f,a0(wr(b,3)))}function qA(f){var b=Gr(f)?jt:Ff;return b(f)}function YA(f,b,O){(O?ml(f,b,O):b===t)?b=1:b=Qr(b);var ne=Gr(f)?Mt:Hm;return ne(f,b)}function KA(f){var b=Gr(f)?Qt:Wm;return b(f)}function ZA(f){if(f==null)return 0;if(Rl(f))return u0(f)?Gs(f):f.length;var b=Ha(f);return b==me||b==he?f.size:si(f).length}function XA(f,b,O){var ne=Gr(f)?j:qm;return O&&ml(f,b,O)&&(b=t),ne(f,wr(b,3))}var JA=Jr(function(f,b){if(f==null)return[];var O=b.length;return O>1&&ml(f,b[0],b[1])?b=[]:O>2&&ml(b[0],b[1],b[2])&&(b=[b[0]]),Bc(f,Ye(b,1),[])}),s0=uo||function(){return Ji.Date.now()};function QA(f,b){if(typeof b!="function")throw new Ri(o);return f=Qr(f),function(){if(--f<1)return b.apply(this,arguments)}}function lx(f,b,O){return b=O?t:b,b=f&&b==null?f.length:b,gd(f,fe,t,t,t,t,b)}function ux(f,b){var O;if(typeof b!="function")throw new Ri(o);return f=Qr(f),function(){return--f>0&&(O=b.apply(this,arguments)),f<=1&&(b=t),O}}var v1=Jr(function(f,b,O){var ne=k;if(O.length){var Se=oo(O,Vf(v1));ne|=Q}return gd(f,ne,b,O,Se)}),cx=Jr(function(f,b,O){var ne=k|A;if(O.length){var Se=oo(O,Vf(cx));ne|=Q}return gd(b,ne,f,O,Se)});function dx(f,b,O){b=O?t:b;var ne=gd(f,R,t,t,t,t,t,b);return ne.placeholder=dx.placeholder,ne}function hx(f,b,O){b=O?t:b;var ne=gd(f,W,t,t,t,t,t,b);return ne.placeholder=hx.placeholder,ne}function fx(f,b,O){var ne,Se,Ve,lt,yt,Ot,un=0,cn=!1,vn=!1,jn=!0;if(typeof f!="function")throw new Ri(o);b=Ru(b)||0,Js(O)&&(cn=!!O.leading,vn="maxWait"in O,Ve=vn?ue(Ru(O.maxWait)||0,b):Ve,jn="trailing"in O?!!O.trailing:jn);function or(Mo){var cc=ne,_d=Se;return ne=Se=t,un=Mo,lt=f.apply(_d,cc),lt}function Lr(Mo){return un=Mo,yt=Xp(pi,b),cn?or(Mo):lt}function ti(Mo){var cc=Mo-Ot,_d=Mo-un,Dx=b-cc;return vn?Pe(Dx,Ve-_d):Dx}function Cr(Mo){var cc=Mo-Ot,_d=Mo-un;return Ot===t||cc>=b||cc<0||vn&&_d>=Ve}function pi(){var Mo=s0();if(Cr(Mo))return bi(Mo);yt=Xp(pi,ti(Mo))}function bi(Mo){return yt=t,jn&&ne?or(Mo):(ne=Se=t,lt)}function pu(){yt!==t&&zf(yt),un=0,ne=Ot=Se=yt=t}function vl(){return yt===t?lt:bi(s0())}function gu(){var Mo=s0(),cc=Cr(Mo);if(ne=arguments,Se=this,Ot=Mo,cc){if(yt===t)return Lr(Ot);if(vn)return zf(yt),yt=Xp(pi,b),or(Ot)}return yt===t&&(yt=Xp(pi,b)),lt}return gu.cancel=pu,gu.flush=vl,gu}var e6=Jr(function(f,b){return S(f,1,b)}),t6=Jr(function(f,b,O){return S(f,Ru(b)||0,O)});function n6(f){return gd(f,z)}function o0(f,b){if(typeof f!="function"||b!=null&&typeof b!="function")throw new Ri(o);var O=function(){var ne=arguments,Se=b?b.apply(this,ne):ne[0],Ve=O.cache;if(Ve.has(Se))return Ve.get(Se);var lt=f.apply(this,ne);return O.cache=Ve.set(Se,lt)||Ve,lt};return O.cache=new(o0.Cache||Ua),O}o0.Cache=Ua;function a0(f){if(typeof f!="function")throw new Ri(o);return function(){var b=arguments;switch(b.length){case 0:return!f.call(this);case 1:return!f.call(this,b[0]);case 2:return!f.call(this,b[0],b[1]);case 3:return!f.call(this,b[0],b[1],b[2])}return!f.apply(this,b)}}function r6(f){return ux(2,f)}var i6=n1(function(f,b){b=b.length==1&&Gr(b[0])?ci(b[0],Ir(wr())):ci(Ye(b,1),Ir(wr()));var O=b.length;return Jr(function(ne){for(var Se=-1,Ve=Pe(ne.length,O);++Se<Ve;)ne[Se]=b[Se].call(this,ne[Se]);return ui(f,this,ne)})}),y1=Jr(function(f,b){var O=oo(b,Vf(y1));return gd(f,Q,t,b,O)}),px=Jr(function(f,b){var O=oo(b,Vf(px));return gd(f,de,t,b,O)}),s6=md(function(f,b){return gd(f,N,t,t,t,b)});function o6(f,b){if(typeof f!="function")throw new Ri(o);return b=b===t?b:Qr(b),Jr(f,b)}function a6(f,b){if(typeof f!="function")throw new Ri(o);return b=b==null?0:ue(Qr(b),0),Jr(function(O){var ne=O[b],Se=Iu(O,0,b);return ne&&Ro(Se,ne),ui(f,this,Se)})}function l6(f,b,O){var ne=!0,Se=!0;if(typeof f!="function")throw new Ri(o);return Js(O)&&(ne="leading"in O?!!O.leading:ne,Se="trailing"in O?!!O.trailing:Se),fx(f,b,{leading:ne,maxWait:b,trailing:Se})}function u6(f){return lx(f,1)}function c6(f,b){return y1(jh(b),f)}function d6(){if(!arguments.length)return[];var f=arguments[0];return Gr(f)?f:[f]}function h6(f){return d(f,m)}function f6(f,b){return b=typeof b=="function"?b:t,d(f,m,b)}function p6(f){return d(f,p|m)}function g6(f,b){return b=typeof b=="function"?b:t,d(f,p|m,b)}function m6(f,b){return b==null||_(f,b,da(b))}function uc(f,b){return f===b||f!==f&&b!==b}var v6=Qm(pt),y6=Qm(function(f,b){return f>=b}),Uh=$e(function(){return arguments}())?$e:function(f){return co(f)&&Vr.call(f,"callee")&&!Li.call(f,"callee")},Gr=It.isArray,b6=Au?Ir(Au):Ge;function Rl(f){return f!=null&&l0(f.length)&&!yd(f)}function Eo(f){return co(f)&&Rl(f)}function _6(f){return f===!0||f===!1||co(f)&&st(f)==re}var Zd=c||k1,w6=va?Ir(va):qe;function x6(f){return co(f)&&f.nodeType===1&&!Jp(f)}function L6(f){if(f==null)return!0;if(Rl(f)&&(Gr(f)||typeof f=="string"||typeof f.splice=="function"||Zd(f)||Hf(f)||Uh(f)))return!f.length;var b=Ha(f);if(b==me||b==he)return!f.size;if(Zp(f))return!si(f).length;for(var O in f)if(Vr.call(f,O))return!1;return!0}function C6(f,b){return dt(f,b)}function S6(f,b,O){O=typeof O=="function"?O:t;var ne=O?O(f,b):t;return ne===t?dt(f,b,t,O):!!ne}function b1(f){if(!co(f))return!1;var b=st(f);return b==be||b==De||typeof f.message=="string"&&typeof f.name=="string"&&!Jp(f)}function E6(f){return typeof f=="number"&&y(f)}function yd(f){if(!Js(f))return!1;var b=st(f);return b==Ie||b==le||b==pe||b==Ke}function gx(f){return typeof f=="number"&&f==Qr(f)}function l0(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=K}function Js(f){var b=typeof f;return f!=null&&(b=="object"||b=="function")}function co(f){return f!=null&&typeof f=="object"}var mx=au?Ir(au):vt;function M6(f,b){return f===b||Tt(f,b,u1(b))}function P6(f,b,O){return O=typeof O=="function"?O:t,Tt(f,b,u1(b),O)}function k6(f){return vx(f)&&f!=+f}function A6(f){if(fk(f))throw new Yn(s);return Dt(f)}function T6(f){return f===null}function D6(f){return f==null}function vx(f){return typeof f=="number"||co(f)&&st(f)==oe}function Jp(f){if(!co(f)||st(f)!=Ae)return!1;var b=Sa(f);if(b===null)return!0;var O=Vr.call(b,"constructor")&&b.constructor;return typeof O=="function"&&O instanceof O&&Ca.call(O)==vi}var _1=lu?Ir(lu):on;function O6(f){return gx(f)&&f>=-9007199254740991&&f<=K}var yx=Go?Ir(Go):Fn;function u0(f){return typeof f=="string"||!Gr(f)&&co(f)&&st(f)==We}function fu(f){return typeof f=="symbol"||co(f)&&st(f)==at}var Hf=uu?Ir(uu):Un;function N6(f){return f===t}function I6(f){return co(f)&&Ha(f)==Ct}function B6(f){return co(f)&&st(f)==Xe}var R6=Qm(Hr),F6=Qm(function(f,b){return f<=b});function bx(f){if(!f)return[];if(Rl(f))return u0(f)?Ws(f):Bl(f);if(hr&&f[hr])return _o(f[hr]());var b=Ha(f),O=b==me?Nl:b==he?ao:Gf;return O(f)}function bd(f){if(!f)return f===0?f:0;if(f=Ru(f),f===X||f===-1/0){var b=f<0?-1:1;return b*ve}return f===f?f:0}function Qr(f){var b=bd(f),O=b%1;return b===b?O?b-O:b:0}function _x(f){return f?Jn(Qr(f),0,He):0}function Ru(f){if(typeof f=="number")return f;if(fu(f))return ge;if(Js(f)){var b=typeof f.valueOf=="function"?f.valueOf():f;f=Js(b)?b+"":b}if(typeof f!="string")return f===0?f:+f;f=Fo(f);var O=Cn.test(f);return O||li.test(f)?ou(f.slice(2),O?2:8):dr.test(f)?ge:+f}function wx(f){return Fc(f,Fl(f))}function j6(f){return f?Jn(Qr(f),-9007199254740991,K):f===0?f:0}function Ui(f){return f==null?"":Va(f)}var z6=$f(function(f,b){if(Zp(b)||Rl(b)){Fc(b,da(b),f);return}for(var O in b)Vr.call(b,O)&&mt(f,O,b[O])}),xx=$f(function(f,b){Fc(b,Fl(b),f)}),c0=$f(function(f,b,O,ne){Fc(b,Fl(b),f,ne)}),$6=$f(function(f,b,O,ne){Fc(b,da(b),f,ne)}),U6=md(An);function V6(f,b){var O=Co(f);return b==null?O:hn(O,b)}var H6=Jr(function(f,b){f=hi(f);var O=-1,ne=b.length,Se=ne>2?b[2]:t;for(Se&&ml(b[0],b[1],Se)&&(ne=1);++O<ne;)for(var Ve=b[O],lt=Fl(Ve),yt=-1,Ot=lt.length;++yt<Ot;){var un=lt[yt],cn=f[un];(cn===t||uc(cn,xa[un])&&!Vr.call(f,un))&&(f[un]=Ve[un])}return f}),G6=Jr(function(f){return f.push(t,jw),ui(Lx,t,f)});function W6(f,b){return Pt(f,wr(b,3),tn)}function q6(f,b){return Pt(f,wr(b,3),_n)}function Y6(f,b){return f==null?f:_t(f,wr(b,3),Fl)}function K6(f,b){return f==null?f:Bt(f,wr(b,3),Fl)}function Z6(f,b){return f&&tn(f,wr(b,3))}function X6(f,b){return f&&_n(f,wr(b,3))}function J6(f){return f==null?[]:Mn(f,da(f))}function Q6(f){return f==null?[]:Mn(f,Fl(f))}function w1(f,b,O){var ne=f==null?t:cr(f,b);return ne===t?O:ne}function eT(f,b){return f!=null&&Uw(f,b,$t)}function x1(f,b){return f!=null&&Uw(f,b,Et)}var tT=Nw(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=fi.call(b)),f[b]=O},C1(jl)),nT=Nw(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=fi.call(b)),Vr.call(f,b)?f[b].push(O):f[b]=[O]},wr),rT=Jr(Ue);function da(f){return Rl(f)?Ft(f):si(f)}function Fl(f){return Rl(f)?Ft(f,!0):yi(f)}function iT(f,b){var O={};return b=wr(b,3),tn(f,function(ne,Se,Ve){Dn(O,b(ne,Se,Ve),ne)}),O}function sT(f,b){var O={};return b=wr(b,3),tn(f,function(ne,Se,Ve){Dn(O,Se,b(ne,Se,Ve))}),O}var oT=$f(function(f,b,O){Ma(f,b,O)}),Lx=$f(function(f,b,O,ne){Ma(f,b,O,ne)}),aT=md(function(f,b){var O={};if(f==null)return O;var ne=!1;b=ci(b,function(Ve){return Ve=lc(Ve,f),ne||(ne=Ve.length>1),Ve}),Fc(f,a1(f),O),ne&&(O=d(O,p|v|m,tk));for(var Se=b.length;Se--;)fd(O,b[Se]);return O});function lT(f,b){return Cx(f,a0(wr(b)))}var uT=md(function(f,b){return f==null?{}:Pa(f,b)});function Cx(f,b){if(f==null)return{};var O=ci(a1(f),function(ne){return[ne]});return b=wr(b),Xs(f,O,function(ne,Se){return b(ne,Se[0])})}function cT(f,b,O){b=lc(b,f);var ne=-1,Se=b.length;for(Se||(Se=1,f=t);++ne<Se;){var Ve=f==null?t:f[jc(b[ne])];Ve===t&&(ne=Se,Ve=O),f=yd(Ve)?Ve.call(f):Ve}return f}function dT(f,b,O){return f==null?f:hd(f,b,O)}function hT(f,b,O,ne){return ne=typeof ne=="function"?ne:t,f==null?f:hd(f,b,O,ne)}var Sx=Rw(da),Ex=Rw(Fl);function fT(f,b,O){var ne=Gr(f),Se=ne||Zd(f)||Hf(f);if(b=wr(b,4),O==null){var Ve=f&&f.constructor;Se?O=ne?new Ve:[]:Js(f)?O=yd(Ve)?Co(Sa(f)):{}:O={}}return(Se?As:tn)(f,function(lt,yt,Ot){return b(O,lt,yt,Ot)}),O}function pT(f,b){return f==null?!0:fd(f,b)}function gT(f,b,O){return f==null?f:jf(f,b,jh(O))}function mT(f,b,O,ne){return ne=typeof ne=="function"?ne:t,f==null?f:jf(f,b,jh(O),ne)}function Gf(f){return f==null?[]:Vs(f,da(f))}function vT(f){return f==null?[]:Vs(f,Fl(f))}function yT(f,b,O){return O===t&&(O=b,b=t),O!==t&&(O=Ru(O),O=O===O?O:0),b!==t&&(b=Ru(b),b=b===b?b:0),Jn(Ru(f),b,O)}function bT(f,b,O){return b=bd(b),O===t?(O=b,b=0):O=bd(O),f=Ru(f),Rt(f,b,O)}function _T(f,b,O){if(O&&typeof O!="boolean"&&ml(f,b,O)&&(b=O=t),O===t&&(typeof b=="boolean"?(O=b,b=t):typeof f=="boolean"&&(O=f,f=t)),f===t&&b===t?(f=0,b=1):(f=bd(f),b===t?(b=f,f=0):b=bd(b)),f>b){var ne=f;f=b,b=ne}if(O||f%1||b%1){var Se=Gt();return Pe(f+Se*(b-f+kl("1e-"+((Se+"").length-1))),b)}return Rh(f,b)}var wT=Uf(function(f,b,O){return b=b.toLowerCase(),f+(O?Mx(b):b)});function Mx(f){return L1(Ui(f).toLowerCase())}function Px(f){return f=Ui(f),f&&f.replace(Si,tc).replace(Qu,"")}function xT(f,b,O){f=Ui(f),b=Va(b);var ne=f.length;O=O===t?ne:Jn(Qr(O),0,ne);var Se=O;return O-=b.length,O>=0&&f.slice(O,Se)==b}function LT(f){return f=Ui(f),f&&zn.test(f)?f.replace(ar,hl):f}function CT(f){return f=Ui(f),f&&rt.test(f)?f.replace(bt,"\\$&"):f}var ST=Uf(function(f,b,O){return f+(O?"-":"")+b.toLowerCase()}),ET=Uf(function(f,b,O){return f+(O?" ":"")+b.toLowerCase()}),MT=Tw("toLowerCase");function PT(f,b,O){f=Ui(f),b=Qr(b);var ne=b?Gs(f):0;if(!b||ne>=b)return f;var Se=(b-ne)/2;return Jm(Ns(Se),O)+f+Jm(Os(Se),O)}function kT(f,b,O){f=Ui(f),b=Qr(b);var ne=b?Gs(f):0;return b&&ne<b?f+Jm(b-ne,O):f}function AT(f,b,O){f=Ui(f),b=Qr(b);var ne=b?Gs(f):0;return b&&ne<b?Jm(b-ne,O)+f:f}function TT(f,b,O){return O||b==null?b=0:b&&(b=+b),Nt(Ui(f).replace(Vt,""),b||0)}function DT(f,b,O){return(O?ml(f,b,O):b===t)?b=1:b=Qr(b),Rf(Ui(f),b)}function OT(){var f=arguments,b=Ui(f[0]);return f.length<3?b:b.replace(f[1],f[2])}var NT=Uf(function(f,b,O){return f+(O?"_":"")+b.toLowerCase()});function IT(f,b,O){return O&&typeof O!="number"&&ml(f,b,O)&&(b=O=t),O=O===t?He:O>>>0,O?(f=Ui(f),f&&(typeof b=="string"||b!=null&&!_1(b))&&(b=Va(b),!b&&ba(f))?Iu(Ws(f),0,O):f.split(b,O)):[]}var BT=Uf(function(f,b,O){return f+(O?" ":"")+L1(b)});function RT(f,b,O){return f=Ui(f),O=O==null?0:Jn(Qr(O),0,f.length),b=Va(b),f.slice(O,O+b.length)==b}function FT(f,b,O){var ne=Fe.templateSettings;O&&ml(f,b,O)&&(b=t),f=Ui(f),b=c0({},b,ne,Fw);var Se=c0({},b.imports,ne.imports,Fw),Ve=da(Se),lt=Vs(Se,Ve),yt,Ot,un=0,cn=b.interpolate||Or,vn="__p += '",jn=du((b.escape||Or).source+"|"+cn.source+"|"+(cn===Ni?nr:Or).source+"|"+(b.evaluate||Or).source+"|$","g"),or="//# sourceURL="+(Vr.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++iu+"]")+`
`;f.replace(jn,function(Cr,pi,bi,pu,vl,gu){return bi||(bi=pu),vn+=f.slice(un,gu).replace(fr,fl),pi&&(yt=!0,vn+=`' +
__e(`+pi+`) +
'`),vl&&(Ot=!0,vn+=`';
`+vl+`;
__p += '`),bi&&(vn+=`' +
((__t = (`+bi+`)) == null ? '' : __t) +
'`),un=gu+Cr.length,Cr}),vn+=`';
`;var Lr=Vr.call(b,"variable")&&b.variable;if(!Lr)vn=`with (obj) {
`+vn+`
}
`;else if(St.test(Lr))throw new Yn(a);vn=(Ot?vn.replace(Sn,""):vn).replace(an,"$1").replace(mn,"$1;"),vn="function("+(Lr||"obj")+`) {
`+(Lr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(yt?", __e = _.escape":"")+(Ot?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+vn+`return __p
}`;var ti=Ax(function(){return yr(Ve,or+"return "+vn).apply(t,lt)});if(ti.source=vn,b1(ti))throw ti;return ti}function jT(f){return Ui(f).toLowerCase()}function zT(f){return Ui(f).toUpperCase()}function $T(f,b,O){if(f=Ui(f),f&&(O||b===t))return Fo(f);if(!f||!(b=Va(b)))return f;var ne=Ws(f),Se=Ws(b),Ve=so(ne,Se),lt=Tu(ne,Se)+1;return Iu(ne,Ve,lt).join("")}function UT(f,b,O){if(f=Ui(f),f&&(O||b===t))return f.slice(0,Ra(f)+1);if(!f||!(b=Va(b)))return f;var ne=Ws(f),Se=Tu(ne,Ws(b))+1;return Iu(ne,0,Se).join("")}function VT(f,b,O){if(f=Ui(f),f&&(O||b===t))return f.replace(Vt,"");if(!f||!(b=Va(b)))return f;var ne=Ws(f),Se=so(ne,Ws(b));return Iu(ne,Se).join("")}function HT(f,b){var O=J,ne=U;if(Js(b)){var Se="separator"in b?b.separator:Se;O="length"in b?Qr(b.length):O,ne="omission"in b?Va(b.omission):ne}f=Ui(f);var Ve=f.length;if(ba(f)){var lt=Ws(f);Ve=lt.length}if(O>=Ve)return f;var yt=O-Gs(ne);if(yt<1)return ne;var Ot=lt?Iu(lt,0,yt).join(""):f.slice(0,yt);if(Se===t)return Ot+ne;if(lt&&(yt+=Ot.length-yt),_1(Se)){if(f.slice(yt).search(Se)){var un,cn=Ot;for(Se.global||(Se=du(Se.source,Ui(Vn.exec(Se))+"g")),Se.lastIndex=0;un=Se.exec(cn);)var vn=un.index;Ot=Ot.slice(0,vn===t?yt:vn)}}else if(f.indexOf(Va(Se),yt)!=yt){var jn=Ot.lastIndexOf(Se);jn>-1&&(Ot=Ot.slice(0,jn))}return Ot+ne}function GT(f){return f=Ui(f),f&&mr.test(f)?f.replace(tr,Fa):f}var WT=Uf(function(f,b,O){return f+(O?" ":"")+b.toUpperCase()}),L1=Tw("toUpperCase");function kx(f,b,O){return f=Ui(f),b=O?t:b,b===t?jo(f)?_a(f):ft(f):f.match(b)||[]}var Ax=Jr(function(f,b){try{return ui(f,t,b)}catch(O){return b1(O)?O:new Yn(O)}}),qT=md(function(f,b){return As(b,function(O){O=jc(O),Dn(f,O,v1(f[O],f))}),f});function YT(f){var b=f==null?0:f.length,O=wr();return f=b?ci(f,function(ne){if(typeof ne[1]!="function")throw new Ri(o);return[O(ne[0]),ne[1]]}):[],Jr(function(ne){for(var Se=-1;++Se<b;){var Ve=f[Se];if(ui(Ve[0],this,ne))return ui(Ve[1],this,ne)}})}function KT(f){return g(d(f,p))}function C1(f){return function(){return f}}function ZT(f,b){return f==null||f!==f?b:f}var XT=Ow(),JT=Ow(!0);function jl(f){return f}function S1(f){return Qn(typeof f=="function"?f:d(f,p))}function QT(f){return So(d(f,p))}function eD(f,b){return ic(f,d(b,p))}var tD=Jr(function(f,b){return function(O){return Ue(O,f,b)}}),nD=Jr(function(f,b){return function(O){return Ue(f,O,b)}});function E1(f,b,O){var ne=da(b),Se=Mn(b,ne);O==null&&!(Js(b)&&(Se.length||!ne.length))&&(O=b,b=f,f=this,Se=Mn(b,da(b)));var Ve=!(Js(O)&&"chain"in O)||!!O.chain,lt=yd(f);return As(Se,function(yt){var Ot=b[yt];f[yt]=Ot,lt&&(f.prototype[yt]=function(){var un=this.__chain__;if(Ve||un){var cn=f(this.__wrapped__),vn=cn.__actions__=Bl(this.__actions__);return vn.push({func:Ot,args:arguments,thisArg:f}),cn.__chain__=un,cn}return Ot.apply(f,Ro([this.value()],arguments))})}),f}function rD(){return Ji._===this&&(Ji._=ns),this}function M1(){}function iD(f){return f=Qr(f),Jr(function(b){return gl(b,f)})}var sD=i1(ci),oD=i1(cu),aD=i1(j);function Tx(f){return d1(f)?gr(jc(f)):rs(f)}function lD(f){return function(b){return f==null?t:cr(f,b)}}var uD=Iw(),cD=Iw(!0);function P1(){return[]}function k1(){return!1}function dD(){return{}}function hD(){return""}function fD(){return!0}function pD(f,b){if(f=Qr(f),f<1||f>K)return[];var O=He,ne=Pe(f,He);b=wr(b),f-=He;for(var Se=ts(ne,b);++O<f;)b(O);return Se}function gD(f){return Gr(f)?ci(f,jc):fu(f)?[f]:Bl(Xw(Ui(f)))}function mD(f){var b=++aa;return Ui(f)+b}var vD=Xm(function(f,b){return f+b},0),yD=s1("ceil"),bD=Xm(function(f,b){return f/b},1),_D=s1("floor");function wD(f){return f&&f.length?ye(f,jl,pt):t}function xD(f,b){return f&&f.length?ye(f,wr(b,2),pt):t}function LD(f){return rr(f,jl)}function CD(f,b){return rr(f,wr(b,2))}function SD(f){return f&&f.length?ye(f,jl,Hr):t}function ED(f,b){return f&&f.length?ye(f,wr(b,2),Hr):t}var MD=Xm(function(f,b){return f*b},1),PD=s1("round"),kD=Xm(function(f,b){return f-b},0);function AD(f){return f&&f.length?di(f,jl):0}function TD(f,b){return f&&f.length?di(f,wr(b,2)):0}return Fe.after=QA,Fe.ary=lx,Fe.assign=z6,Fe.assignIn=xx,Fe.assignInWith=c0,Fe.assignWith=$6,Fe.at=U6,Fe.before=ux,Fe.bind=v1,Fe.bindAll=qT,Fe.bindKey=cx,Fe.castArray=d6,Fe.chain=sx,Fe.chunk=_k,Fe.compact=wk,Fe.concat=xk,Fe.cond=YT,Fe.conforms=KT,Fe.constant=C1,Fe.countBy=AA,Fe.create=V6,Fe.curry=dx,Fe.curryRight=hx,Fe.debounce=fx,Fe.defaults=H6,Fe.defaultsDeep=G6,Fe.defer=e6,Fe.delay=t6,Fe.difference=Lk,Fe.differenceBy=Ck,Fe.differenceWith=Sk,Fe.drop=Ek,Fe.dropRight=Mk,Fe.dropRightWhile=Pk,Fe.dropWhile=kk,Fe.fill=Ak,Fe.filter=DA,Fe.flatMap=IA,Fe.flatMapDeep=BA,Fe.flatMapDepth=RA,Fe.flatten=tx,Fe.flattenDeep=Tk,Fe.flattenDepth=Dk,Fe.flip=n6,Fe.flow=XT,Fe.flowRight=JT,Fe.fromPairs=Ok,Fe.functions=J6,Fe.functionsIn=Q6,Fe.groupBy=FA,Fe.initial=Ik,Fe.intersection=Bk,Fe.intersectionBy=Rk,Fe.intersectionWith=Fk,Fe.invert=tT,Fe.invertBy=nT,Fe.invokeMap=zA,Fe.iteratee=S1,Fe.keyBy=$A,Fe.keys=da,Fe.keysIn=Fl,Fe.map=i0,Fe.mapKeys=iT,Fe.mapValues=sT,Fe.matches=QT,Fe.matchesProperty=eD,Fe.memoize=o0,Fe.merge=oT,Fe.mergeWith=Lx,Fe.method=tD,Fe.methodOf=nD,Fe.mixin=E1,Fe.negate=a0,Fe.nthArg=iD,Fe.omit=aT,Fe.omitBy=lT,Fe.once=r6,Fe.orderBy=UA,Fe.over=sD,Fe.overArgs=i6,Fe.overEvery=oD,Fe.overSome=aD,Fe.partial=y1,Fe.partialRight=px,Fe.partition=VA,Fe.pick=uT,Fe.pickBy=Cx,Fe.property=Tx,Fe.propertyOf=lD,Fe.pull=Uk,Fe.pullAll=rx,Fe.pullAllBy=Vk,Fe.pullAllWith=Hk,Fe.pullAt=Gk,Fe.range=uD,Fe.rangeRight=cD,Fe.rearg=s6,Fe.reject=WA,Fe.remove=Wk,Fe.rest=o6,Fe.reverse=g1,Fe.sampleSize=YA,Fe.set=dT,Fe.setWith=hT,Fe.shuffle=KA,Fe.slice=qk,Fe.sortBy=JA,Fe.sortedUniq=eA,Fe.sortedUniqBy=tA,Fe.split=IT,Fe.spread=a6,Fe.tail=nA,Fe.take=rA,Fe.takeRight=iA,Fe.takeRightWhile=sA,Fe.takeWhile=oA,Fe.tap=wA,Fe.throttle=l6,Fe.thru=r0,Fe.toArray=bx,Fe.toPairs=Sx,Fe.toPairsIn=Ex,Fe.toPath=gD,Fe.toPlainObject=wx,Fe.transform=fT,Fe.unary=u6,Fe.union=aA,Fe.unionBy=lA,Fe.unionWith=uA,Fe.uniq=cA,Fe.uniqBy=dA,Fe.uniqWith=hA,Fe.unset=pT,Fe.unzip=m1,Fe.unzipWith=ix,Fe.update=gT,Fe.updateWith=mT,Fe.values=Gf,Fe.valuesIn=vT,Fe.without=fA,Fe.words=kx,Fe.wrap=c6,Fe.xor=pA,Fe.xorBy=gA,Fe.xorWith=mA,Fe.zip=vA,Fe.zipObject=yA,Fe.zipObjectDeep=bA,Fe.zipWith=_A,Fe.entries=Sx,Fe.entriesIn=Ex,Fe.extend=xx,Fe.extendWith=c0,E1(Fe,Fe),Fe.add=vD,Fe.attempt=Ax,Fe.camelCase=wT,Fe.capitalize=Mx,Fe.ceil=yD,Fe.clamp=yT,Fe.clone=h6,Fe.cloneDeep=p6,Fe.cloneDeepWith=g6,Fe.cloneWith=f6,Fe.conformsTo=m6,Fe.deburr=Px,Fe.defaultTo=ZT,Fe.divide=bD,Fe.endsWith=xT,Fe.eq=uc,Fe.escape=LT,Fe.escapeRegExp=CT,Fe.every=TA,Fe.find=OA,Fe.findIndex=Qw,Fe.findKey=W6,Fe.findLast=NA,Fe.findLastIndex=ex,Fe.findLastKey=q6,Fe.floor=_D,Fe.forEach=ox,Fe.forEachRight=ax,Fe.forIn=Y6,Fe.forInRight=K6,Fe.forOwn=Z6,Fe.forOwnRight=X6,Fe.get=w1,Fe.gt=v6,Fe.gte=y6,Fe.has=eT,Fe.hasIn=x1,Fe.head=nx,Fe.identity=jl,Fe.includes=jA,Fe.indexOf=Nk,Fe.inRange=bT,Fe.invoke=rT,Fe.isArguments=Uh,Fe.isArray=Gr,Fe.isArrayBuffer=b6,Fe.isArrayLike=Rl,Fe.isArrayLikeObject=Eo,Fe.isBoolean=_6,Fe.isBuffer=Zd,Fe.isDate=w6,Fe.isElement=x6,Fe.isEmpty=L6,Fe.isEqual=C6,Fe.isEqualWith=S6,Fe.isError=b1,Fe.isFinite=E6,Fe.isFunction=yd,Fe.isInteger=gx,Fe.isLength=l0,Fe.isMap=mx,Fe.isMatch=M6,Fe.isMatchWith=P6,Fe.isNaN=k6,Fe.isNative=A6,Fe.isNil=D6,Fe.isNull=T6,Fe.isNumber=vx,Fe.isObject=Js,Fe.isObjectLike=co,Fe.isPlainObject=Jp,Fe.isRegExp=_1,Fe.isSafeInteger=O6,Fe.isSet=yx,Fe.isString=u0,Fe.isSymbol=fu,Fe.isTypedArray=Hf,Fe.isUndefined=N6,Fe.isWeakMap=I6,Fe.isWeakSet=B6,Fe.join=jk,Fe.kebabCase=ST,Fe.last=Bu,Fe.lastIndexOf=zk,Fe.lowerCase=ET,Fe.lowerFirst=MT,Fe.lt=R6,Fe.lte=F6,Fe.max=wD,Fe.maxBy=xD,Fe.mean=LD,Fe.meanBy=CD,Fe.min=SD,Fe.minBy=ED,Fe.stubArray=P1,Fe.stubFalse=k1,Fe.stubObject=dD,Fe.stubString=hD,Fe.stubTrue=fD,Fe.multiply=MD,Fe.nth=$k,Fe.noConflict=rD,Fe.noop=M1,Fe.now=s0,Fe.pad=PT,Fe.padEnd=kT,Fe.padStart=AT,Fe.parseInt=TT,Fe.random=_T,Fe.reduce=HA,Fe.reduceRight=GA,Fe.repeat=DT,Fe.replace=OT,Fe.result=cT,Fe.round=PD,Fe.runInContext=Lt,Fe.sample=qA,Fe.size=ZA,Fe.snakeCase=NT,Fe.some=XA,Fe.sortedIndex=Yk,Fe.sortedIndexBy=Kk,Fe.sortedIndexOf=Zk,Fe.sortedLastIndex=Xk,Fe.sortedLastIndexBy=Jk,Fe.sortedLastIndexOf=Qk,Fe.startCase=BT,Fe.startsWith=RT,Fe.subtract=kD,Fe.sum=AD,Fe.sumBy=TD,Fe.template=FT,Fe.times=pD,Fe.toFinite=bd,Fe.toInteger=Qr,Fe.toLength=_x,Fe.toLower=jT,Fe.toNumber=Ru,Fe.toSafeInteger=j6,Fe.toString=Ui,Fe.toUpper=zT,Fe.trim=$T,Fe.trimEnd=UT,Fe.trimStart=VT,Fe.truncate=HT,Fe.unescape=GT,Fe.uniqueId=mD,Fe.upperCase=WT,Fe.upperFirst=L1,Fe.each=ox,Fe.eachRight=ax,Fe.first=nx,E1(Fe,function(){var f={};return tn(Fe,function(b,O){Vr.call(Fe.prototype,O)||(f[O]=b)}),f}(),{chain:!1}),Fe.VERSION=r,As(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){Fe[f].placeholder=Fe}),As(["drop","take"],function(f,b){Br.prototype[f]=function(O){O=O===t?1:ue(Qr(O),0);var ne=this.__filtered__&&!b?new Br(this):this.clone();return ne.__filtered__?ne.__takeCount__=Pe(O,ne.__takeCount__):ne.__views__.push({size:Pe(O,He),type:f+(ne.__dir__<0?"Right":"")}),ne},Br.prototype[f+"Right"]=function(O){return this.reverse()[f](O).reverse()}}),As(["filter","map","takeWhile"],function(f,b){var O=b+1,ne=O==$||O==I;Br.prototype[f]=function(Se){var Ve=this.clone();return Ve.__iteratees__.push({iteratee:wr(Se,3),type:O}),Ve.__filtered__=Ve.__filtered__||ne,Ve}}),As(["head","last"],function(f,b){var O="take"+(b?"Right":"");Br.prototype[f]=function(){return this[O](1).value()[0]}}),As(["initial","tail"],function(f,b){var O="drop"+(b?"":"Right");Br.prototype[f]=function(){return this.__filtered__?new Br(this):this[O](1)}}),Br.prototype.compact=function(){return this.filter(jl)},Br.prototype.find=function(f){return this.filter(f).head()},Br.prototype.findLast=function(f){return this.reverse().find(f)},Br.prototype.invokeMap=Jr(function(f,b){return typeof f=="function"?new Br(this):this.map(function(O){return Ue(O,f,b)})}),Br.prototype.reject=function(f){return this.filter(a0(wr(f)))},Br.prototype.slice=function(f,b){f=Qr(f);var O=this;return O.__filtered__&&(f>0||b<0)?new Br(O):(f<0?O=O.takeRight(-f):f&&(O=O.drop(f)),b!==t&&(b=Qr(b),O=b<0?O.dropRight(-b):O.take(b-f)),O)},Br.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Br.prototype.toArray=function(){return this.take(He)},tn(Br.prototype,function(f,b){var O=/^(?:filter|find|map|reject)|While$/.test(b),ne=/^(?:head|last)$/.test(b),Se=Fe[ne?"take"+(b=="last"?"Right":""):b],Ve=ne||/^find/.test(b);Se&&(Fe.prototype[b]=function(){var lt=this.__wrapped__,yt=ne?[1]:arguments,Ot=lt instanceof Br,un=yt[0],cn=Ot||Gr(lt),vn=function(pi){var bi=Se.apply(Fe,Ro([pi],yt));return ne&&jn?bi[0]:bi};cn&&O&&typeof un=="function"&&un.length!=1&&(Ot=cn=!1);var jn=this.__chain__,or=!!this.__actions__.length,Lr=Ve&&!jn,ti=Ot&&!or;if(!Ve&&cn){lt=ti?lt:new Br(this);var Cr=f.apply(lt,yt);return Cr.__actions__.push({func:r0,args:[vn],thisArg:t}),new Bs(Cr,jn)}return Lr&&ti?f.apply(this,yt):(Cr=this.thru(vn),Lr?ne?Cr.value()[0]:Cr.value():Cr)})}),As(["pop","push","shift","sort","splice","unshift"],function(f){var b=wa[f],O=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",ne=/^(?:pop|shift)$/.test(f);Fe.prototype[f]=function(){var Se=arguments;if(ne&&!this.__chain__){var Ve=this.value();return b.apply(Gr(Ve)?Ve:[],Se)}return this[O](function(lt){return b.apply(Gr(lt)?lt:[],Se)})}}),tn(Br.prototype,function(f,b){var O=Fe[b];if(O){var ne=O.name+"";Vr.call(Lo,ne)||(Lo[ne]=[]),Lo[ne].push({name:b,func:O})}}),Lo[Zm(t,A).name]=[{name:"wrapper",func:t}],Br.prototype.clone=Hd,Br.prototype.reverse=Af,Br.prototype.value=Gd,Fe.prototype.at=xA,Fe.prototype.chain=LA,Fe.prototype.commit=CA,Fe.prototype.next=SA,Fe.prototype.plant=MA,Fe.prototype.reverse=PA,Fe.prototype.toJSON=Fe.prototype.valueOf=Fe.prototype.value=kA,Fe.prototype.first=Fe.prototype.head,hr&&(Fe.prototype[hr]=EA),Fe},Ys=zo();Qi?((Qi.exports=Ys)._=Ys,sr._=Ys):Ji._=Ys}).call(ga)})(Kv,Kv.exports);var $E=Kv.exports;class Aa extends Hn.Polygon{constructor(t,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Je(this,"_width");Je(this,"_height");Je(this,"_center");Je(this,"_rotation");Je(this,"_isMapReady",!1);Je(this,"properties");Je(this,"_helperPoints",{corners:[],midPoints:[]});Je(this,"_throttledUpdateProperties");const i=t instanceof Hn.LatLngBounds?t:Hn.latLngBounds(t);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=kn.measure("Rectangle.constructor.calculateWidth",()=>{const a=Q1([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(a,1)}),this._height=kn.measure("Rectangle.constructor.calculateHeight",()=>{const a=Q1([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(a,1)}),console.log("[Rectangle][constructor] Dimensions calculées depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=kn.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=kn.measure("Rectangle.constructor.initThrottle",()=>$E.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){kn.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Début mise à jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const t=this._width/2,r=this._height/2,i=l5([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=l5([this._center.lng,this._center.lat],t,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,a=Math.abs(s[0]-this._center.lng)*2,l=[Hn.latLng(this._center.lat+o/2,this._center.lng-a/2),Hn.latLng(this._center.lat+o/2,this._center.lng+a/2),Hn.latLng(this._center.lat-o/2,this._center.lng+a/2),Hn.latLng(this._center.lat-o/2,this._center.lng-a/2)];if(this._rotation===0){this.setLatLngs(l);return}const u=this._map.latLngToContainerPoint(this._center),h=l.map(k=>this._map.latLngToContainerPoint(k)),p=-this._rotation*Math.PI/180,v=Math.cos(p),m=Math.sin(p),E=h.map(k=>{const A=k.x-u.x,D=k.y-u.y;return Hn.point(u.x+(A*v-D*m),u.y+(A*m+D*v))}).map(k=>this._map.containerPointToLatLng(k));console.log("[Rectangle][_updatePolygonCoordinates] Résultat final:",{corners:E,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(E),this.fire("coordinates:updated",{corners:E,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return kn.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const t=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Hn.latLng(this._center.lat,this._center.lng+t)).x-r.x,o=Q1([this._center.lng,this._center.lat],[this._center.lng+t,this._center.lat],{units:"meters"}),a=Math.abs(s/o);return isNaN(a)||a<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par défaut"),1):a})}getRotatedCorners(){return kn.measure("Rectangle.getRotatedCorners",()=>{try{const t=this.getLatLngs();if(!t||!Array.isArray(t)||t.length===0){const r=this._width/2,i=this._height/2;return[Hn.latLng(this._center.lat+i,this._center.lng-r),Hn.latLng(this._center.lat+i,this._center.lng+r),Hn.latLng(this._center.lat-i,this._center.lng+r),Hn.latLng(this._center.lat-i,this._center.lng-r)]}return t[0]}catch(t){console.warn("Error in getRotatedCorners:",t);const r=this._width/2,i=this._height/2;return[Hn.latLng(this._center.lat+i,this._center.lng-r),Hn.latLng(this._center.lat+i,this._center.lng+r),Hn.latLng(this._center.lat-i,this._center.lng+r),Hn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return kn.measure("Rectangle.getMidPoints",()=>{try{const t=this.getRotatedCorners();if(!t||t.length<4){const i=this._width/2,s=this._height/2;return[Hn.latLng(this._center.lat+s,this._center.lng),Hn.latLng(this._center.lat,this._center.lng+i),Hn.latLng(this._center.lat-s,this._center.lng),Hn.latLng(this._center.lat,this._center.lng-i)]}if(!t.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(t[3],t[0]),this._getMidPoint(t[0],t[1]),this._getMidPoint(t[1],t[2]),this._getMidPoint(t[2],t[3])]}catch(t){console.warn("Error in getMidPoints:",t);const r=this._width/2,i=this._height/2;return[Hn.latLng(this._center.lat+i,this._center.lng),Hn.latLng(this._center.lat,this._center.lng+r),Hn.latLng(this._center.lat-i,this._center.lng),Hn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(t,r){return kn.measure("Rectangle._getMidPoint",()=>{if(!t||!r||typeof t.lat!="number"||typeof t.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Hn.latLng((t.lat+r.lat)/2,(t.lng+r.lng)/2)})}getCenter(){return kn.measure("Rectangle.getCenter",()=>this._center)}setCenter(t){kn.measure("Rectangle.setCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return kn.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(t,r=!1){kn.measure("Rectangle.setRotation",()=>{this._rotation=(t%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){kn.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return kn.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(t,r){kn.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Début de la mise à jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:t,newHeight:r}),this._width=t,this._height=r,console.log("[Rectangle][setDimensions] Mise à jour des coordonnées du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise à jour des propriétés"),this.updateProperties(),console.log("[Rectangle][setDimensions] Émission de l'événement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(t,r){kn.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,u=Math.cos(l),h=Math.sin(l),p=o*u-a*h,v=o*h+a*u,m=this._getPixelsPerMeter(),C=t===0||t===3?-1:1,E=t===0||t===1?1:-1,k=Math.max(Math.abs(p*2)/m,1),A=Math.max(Math.abs(v*2)/m,1),D=k*m/2,R=A*m/2,W=C*D*u-E*R*h,Q=C*D*h+E*R*u,de=Hn.point(s.x-W,s.y-Q),fe=this._map.containerPointToLatLng(de),J=[Hn.point(de.x-D,de.y+R),Hn.point(de.x+D,de.y+R),Hn.point(de.x+D,de.y-R),Hn.point(de.x-D,de.y-R)].map(U=>{const B=U.x-de.x,G=U.y-de.y;return Hn.point(de.x+(B*u-G*h),de.y+(B*h+G*u))}).map(U=>this._map.containerPointToLatLng(U));this._width=k,this._height=A,this._center=fe,this.setLatLngs(J),this.fire("coordinates:updated",{corners:J,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(t,r){kn.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,u=Math.cos(l),h=Math.sin(l),p=o*u-a*h,v=o*h+a*u,m=this._getPixelsPerMeter();t%2===0?this._height=Math.abs(v*2)/m:this._width=Math.abs(p*2)/m,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(t){kn.measure("Rectangle.moveFromCenter",()=>{this._center=t,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){kn.measure("Rectangle.updateProperties",()=>{var i,s,o;const t=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:t,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:t,midPoints:this.getMidPoints()})})}setName(t){kn.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=t,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return kn.measure("Rectangle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""})}generateHelperPoints(t,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){kn.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(a=>Hn.circleMarker(a,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(t)),this._helperPoints.midPoints=o.map(a=>Hn.circleMarker(a,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(t))})}clearHelperPoints(){kn.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(t=>{if(t&&t.remove)try{t.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){kn.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const t=this.getRotatedCorners(),r=this.getMidPoints();t.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(t){return kn.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],a=t.distanceTo(o);for(let l=1;l<s.length;l++){const u=t.distanceTo(s[l]);u<a&&(a=u,o=s[l])}return o})}toggleHelperPoints(t,r,i,s){kn.measure("Rectangle.toggleHelperPoints",()=>{r&&t?this.generateHelperPoints(t,i,s):this.clearHelperPoints()})}containsPoint(t){return kn.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s].lng,l=r[s].lat,u=r[o].lng,h=r[o].lat;l>t.lat!=h>t.lat&&t.lng<(u-a)*(t.lat-l)/(h-l)+a&&(i=!i)}return i})}}var Di=(n=>(n.PRIVATE="private",n.COMPANY="company",n.EMPLOYEE="employee",n.VISITOR="visitor",n))(Di||{});const wf=$p("notes",()=>{const n=wt([]),e=wt([]),t=Gn(()=>U=>n.value.find(B=>B.id===U)),r=Gn(()=>U=>{const B=n.value.find(G=>G.id===U);return B?B.color:"#6B7280"}),i=Gn(()=>U=>e.value.filter(B=>B.columnId===U).sort((B,G)=>B.order-G.order)),s=Gn(()=>n.value.find(U=>U.isDefault)||n.value[0]),o=Gn(()=>[...n.value].sort((U,B)=>U.order-B.order)),a=Gn(()=>U=>{const B=ro();if(!B.user)return!1;if(B.isAdmin)return!0;switch(U.accessLevel){case"private":return!0;case"company":return B.isAdmin||B.isEntreprise;case"employee":return B.isAdmin||B.isEntreprise||B.isSalarie;case"visitor":return B.isAdmin||B.isEntreprise||B.isSalarie||B.isVisiteur;default:return!1}}),l=Gn(()=>e.value.filter(U=>a.value(U))),u=Gn(()=>U=>l.value.filter(B=>B.columnId===U).sort((B,G)=>B.order-G.order));async function h(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const U=[{id:"1",title:"Idées",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:"À faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Terminées",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];n.value=U,console.log("[NotesStore][loadColumns] Colonnes fixes initialisées:",n.value)}catch(U){throw console.error("[NotesStore][loadColumns] Erreur:",U),U}}async function p(U){console.log(`
[NotesStore][addColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function v(U,B){console.log(`
[NotesStore][updateColumn] Mise à jour locale de la colonne:`,U,B);try{const G=n.value.findIndex($=>$.id===U);G!==-1&&(n.value[G]={...n.value[G],...B},console.log("[NotesStore][updateColumn] État des colonnes après mise à jour:",n.value))}catch(G){throw console.error("[NotesStore][updateColumn] Erreur:",G),G}}async function m(U){console.log(`
[NotesStore][removeColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function C(U){console.log(`
[NotesStore][reorderColumns] FONCTION DÉSACTIVÉE - Le déplacement des colonnes n'est plus possible`)}function E(U){if(!U)return"private";switch(U.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accès inconnu: ${U}, utilisation de PRIVATE par défaut`),"private"}}function k(U){var K;if(!U.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const B=new Date().toISOString(),G=e.value.filter(ve=>ve.columnId===U.columnId),$=G.length>0?Math.max(...G.map(ve=>ve.order))+1:0,F=E(U.access_level);console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",U.id,"et niveau d'accès:",F);const I=ro(),X=U.enterprise_id||(!I.isAdmin&&((K=I.user)!=null&&K.enterprise_id)?I.user.enterprise_id:null);return e.value.push({...U,id:U.id,order:$,accessLevel:F,createdAt:U.createdAt||U.created_at||B,updatedAt:U.updatedAt||U.updated_at||B,comments:[],photos:[],enterprise_id:X}),U.id}function A(U,B){console.log(`
[NotesStore][updateNote] Mise à jour de la note:`,U,B);try{const G=e.value.findIndex($=>$.id===U);G!==-1&&(B.color&&(B.style={...e.value[G].style,color:B.color,fillColor:B.color}),B.access_level&&(B.accessLevel=E(B.access_level),delete B.access_level),e.value[G]={...e.value[G],...B},console.log("[NotesStore][updateNote] Note mise à jour:",e.value[G]))}catch(G){throw console.error("[NotesStore][updateNote] Erreur:",G),G}}function D(U){e.value.findIndex(G=>G.id===U)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",U),e.value=e.value.filter(G=>G.id!==U)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",U)}function R(U,B){const G=e.value.findIndex($=>$.id===U);if(G!==-1){const $=e.value[G];if($.columnId!==B){const I=e.value.filter(ve=>ve.columnId===B),X=I.length>0?Math.max(...I.map(ve=>ve.order))+1:0,K={...$,columnId:B,order:X,updatedAt:new Date().toISOString()};e.value[G]=K}else e.value[G]={...e.value[G],updatedAt:new Date().toISOString()}}}function W(U,B){B.forEach((G,$)=>{const F=e.value.findIndex(I=>I.id===G&&I.columnId===U);F!==-1&&(e.value[F]={...e.value[F],order:$,updatedAt:new Date().toISOString()})})}function Q(U){switch(U){case"private":return"Privé";case"company":return"Entreprise";case"employee":return"Salariés";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function de(U,B){try{const G=ro();if(!G.user)throw new Error("Vous devez être connecté pour ajouter un commentaire");if(!G.isEntreprise&&!G.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(ge=>ge.id===U))throw new Error(`La note avec l'ID ${U} n'existe pas`);const I=(await pa.addComment(U,B)).data,X=e.value.findIndex(ge=>ge.id===U);if(X===-1)return;const K=e.value[X];K.comments||(K.comments=[]);const ve={id:I.id,text:I.text,createdAt:I.created_at,userId:I.user,userName:I.user_name,userRole:I.user_role};return K.comments.push(ve),K.updatedAt=new Date().toISOString(),e.value[X]={...K},ve.id}catch(G){throw console.error("Erreur lors de l'ajout du commentaire:",G),G}}async function fe(U,B){try{const G=e.value.findIndex(I=>I.id===U);if(G===-1)throw new Error(`La note avec l'ID ${U} n'existe pas`);const $=e.value[G];if(!$.comments||$.comments.length===0)throw new Error("Aucun commentaire trouvé pour cette note");if(!$.comments.some(I=>I.id===B))throw new Error(`Le commentaire avec l'ID ${B} n'existe pas`);await pa.deleteComment(U,B),$.comments=$.comments.filter(I=>I.id!==B),$.updatedAt=new Date().toISOString(),e.value[G]={...$}}catch(G){throw console.error("Erreur lors de la suppression du commentaire:",G),G}}async function N(U,B){try{if(B.id&&B.image){const G=e.value.findIndex(I=>I.id===U);if(G===-1)return;const $=e.value[G];$.photos||($.photos=[]);const F={id:B.id,url:B.image,caption:B.caption,createdAt:B.created_at};return $.photos.push(F),$.updatedAt=new Date().toISOString(),e.value[G]={...$},F.id}else{const G=new FormData;G.append("image",B.url),B.caption&&G.append("caption",B.caption);const F=(await pa.addPhoto(U,G)).data,I=e.value.findIndex(ve=>ve.id===U);if(I===-1)return;const X=e.value[I];X.photos||(X.photos=[]);const K={id:F.id,url:F.image,caption:F.caption,createdAt:F.created_at};return X.photos.push(K),X.updatedAt=new Date().toISOString(),e.value[I]={...X},K.id}}catch(G){throw console.error("Erreur lors de l'ajout de la photo:",G),G}}async function z(U,B){try{await pa.deletePhoto(U,B);const G=e.value.findIndex(I=>I.id===U);if(G===-1){console.error("[NotesStore] Note non trouvée pour la suppression de la photo");return}e.value[G].photos||(e.value[G].photos=[]);const $=e.value[G],F=($.photos||[]).filter(I=>I.id!==B);e.value[G]={...$,photos:F,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprimée avec succès, photos restantes:",F.length)}catch(G){throw console.error("Erreur lors de la suppression de la photo:",G),G}}async function J(U,B,G){try{await pa.updatePhoto(U,B,{caption:G});const $=e.value.findIndex(X=>X.id===U);if($===-1||!e.value[$].photos)return;const F=e.value[$],I=F.photos.findIndex(X=>X.id===B);if(I===-1)return;F.photos[I].caption=G,F.updatedAt=new Date().toISOString(),e.value[$]={...F}}catch($){throw console.error("Erreur lors de la mise à jour de la légende:",$),$}}return{columns:n,notes:e,getColumnById:t,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:a,getAccessibleNotes:l,getAccessibleNotesByColumn:u,getAccessLevelLabel:Q,loadColumns:h,addColumn:p,updateColumn:v,removeColumn:m,reorderColumns:C,addNote:k,updateNote:A,removeNote:D,moveNote:R,reorderNotes:W,addComment:de,removeComment:fe,addPhoto:N,removePhoto:z,updatePhoto:J}});class xl extends Ut.Marker{constructor(t,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=Ut.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          position: relative;
          transition: filter 0.2s ease-in-out;
        }
        .geo-note-marker.hover {
          filter: brightness(1.2) drop-shadow(0 0 4px rgba(59, 130, 246, 0.7));
        }
      `,document.head.appendChild(l)}super(t,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});Je(this,"properties");Je(this,"_planSaved",!1);Je(this,"_isMoving",!1);Je(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Di.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:r.enterprise_id||null},console.log("[GeoNote][constructor] Note créée avec columnId:",this.properties.columnId),this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const u=l.target._map;this._protectFromZoomAnimationErrors(u),u.on("zoomend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),u.on("moveend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),setTimeout(()=>this.forceVisible(),100)}}),window.addEventListener("geonote:updateStyle",l=>{const u=l.detail.noteId,h=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] Événement reçu pour noteId:",u,"Comparaison avec ID backend:",h),u===h&&(console.log("[GeoNote][updateStyle] Correspondance trouvée, mise à jour du style:",l.detail.style),this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}))}),window.addEventListener("geonote:update",l=>{const u=l.detail.noteId,h=this._dbId||this.properties.id;console.log("[GeoNote][update] Événement reçu pour noteId:",u,"Comparaison avec ID backend:",h),u===h&&(console.log("[GeoNote][update] Correspondance trouvée, mise à jour des propriétés:",l.detail.properties),this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style),console.log("[GeoNote][update] Propriétés mises à jour:",this.properties))}),console.log("[GeoNote][constructor] Note créée:",{location:t,name:this.properties.name,type:this.properties.type,style:this.properties.style}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}forceVisible(){try{const t=this.getElement();if(!t){console.warn("[GeoNote][forceVisible] Élément DOM introuvable, recréation de l'icône"),this.recreateIcon();return}console.log("[GeoNote][forceVisible] Forçage de la visibilité de la note"),t.style.display="block",t.style.visibility="visible",t.style.opacity="1";const r=t.querySelector(".geo-note-marker");r&&(r.style.display="flex",r.style.visibility="visible",r.style.opacity="1");const i=t.querySelector("svg");i&&(i.style.display="block",i.style.visibility="visible",i.style.opacity="1"),t.offsetHeight,console.log("[GeoNote][forceVisible] Note maintenant visible")}catch(t){console.error("[GeoNote][forceVisible] Erreur:",t),this.recreateIcon()}}recreateIcon(){var t,r;try{console.log("[GeoNote][recreateIcon] Recréation de l'icône");const i=this.getLatLng(),o=`
        <div class="geo-note-marker" style="display: flex; visibility: visible; opacity: 1;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="display: block; visibility: visible; opacity: 1;">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${((t=this.properties.style)==null?void 0:t.fillColor)||((r=this.properties.style)==null?void 0:r.color)||"#2b6451"}" />
          </svg>
        </div>
      `,a=Ut.divIcon({html:o,className:"geo-note-icon forced-visible",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});if(this.setIcon(a),this._map){const l=this._map.latLngToLayerPoint(i),u=this.getElement();u&&Ut.DomUtil.setPosition(u,l)}if(!document.getElementById("geo-note-forced-style")){const l=document.createElement("style");l.id="geo-note-forced-style",l.textContent=`
          .forced-visible {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            pointer-events: auto !important;
          }
          .forced-visible * {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
          .geo-note-marker {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
        `,document.head.appendChild(l)}console.log("[GeoNote][recreateIcon] Icône recréée avec succès")}catch(i){console.error("[GeoNote][recreateIcon] Erreur lors de la recréation de l'icône:",i)}}highlight(){const t=this.getElement();if(t){console.log("[GeoNote][highlight] Avant application de l'effet:",{element:t,display:t.style.display,visibility:t.style.visibility,opacity:t.style.opacity}),this.forceVisible(),t.style.visibility="visible",t.style.display="",t.style.opacity="1",t.style.zIndex="1000";const r=t.querySelector(".geo-note-marker");r&&r.classList.add("hover"),console.log("[GeoNote][highlight] Après application de l'effet:",{element:t,display:t.style.display,visibility:t.style.visibility,opacity:t.style.opacity})}}unhighlight(){const t=this.getElement();if(t){console.log("[GeoNote][unhighlight] Avant retrait de l'effet:",{element:t,display:t.style.display,visibility:t.style.visibility,opacity:t.style.opacity}),this.forceVisible();const r=t.querySelector(".geo-note-marker");r&&r.classList.remove("hover"),t.style.zIndex="",t.style.visibility="visible",t.style.display="",t.style.opacity="1",console.log("[GeoNote][unhighlight] Après retrait de l'effet:",{element:t,display:t.style.display,visibility:t.style.visibility,opacity:t.style.opacity})}}getColumnColor(t){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[t]||"#6B7280"}getColumnLabel(t){return{1:"Idées",2:"À faire",3:"En cours",4:"Terminées",5:"Autres"}[t]||"Colonne "+t}getAccessLevelLabel(t){switch(t){case Di.PRIVATE:return"Privé";case Di.COMPANY:return"Entreprise";case Di.EMPLOYEE:return"Salariés";case Di.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(t){switch(t){case Di.PRIVATE:return"#9CA3AF";case Di.COMPANY:return"#EF4444";case Di.EMPLOYEE:return"#F59E0B";case Di.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(t){Ut.DomEvent.stopPropagation(t),this.editNote()}editNote(){const t=this._dbId,r=this._leaflet_id;console.log(`[GeoNote][editNote] Édition de note - ID backend: ${t}, ID properties: ${this.properties.id}, ID Leaflet: ${r}`);const i={id:r,backendId:t,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] Édition de note avec columnId:",i.columnId),console.log("[GeoNote] Émission de l'événement note:edit avec",i);const s=new CustomEvent("geonote:edit",{detail:{note:i,source:this,backendId:t}});window.dispatchEvent(s),this.fire("note:edit",{note:i,source:this,backendId:t})}openInGoogleMaps(){const t=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${t},${r}`;window.open(i,"_blank")}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Di.PRIVATE);const t=this.properties.style||{};let r=t.color||t.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a,console.log("[GeoNote][updateProperties] Couleur récupérée depuis SVG:",r))}}r||(r="#2b6451",console.log("[GeoNote][updateProperties] Utilisation de la couleur par défaut:",r)),console.log("[GeoNote][updateProperties] Couleur finale utilisée:",r);const i=t.radius||12;this.properties.style={...t,color:r,weight:t.weight||2,fillColor:r,fillOpacity:t.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},console.log("[GeoNote][updateProperties] Style mis à jour:",this.properties.style)}setNoteStyle(t){console.log("[GeoNote][setNoteStyle] Mise à jour du style:",t);const r=t.color||t.fillColor||"#2b6451",i=t.fillColor||t.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?(l.setAttribute("fill",i),console.log("[GeoNote][setNoteStyle] Couleur mise à jour directement sur le SVG existant")):(console.warn("[GeoNote][setNoteStyle] Impossible de trouver le path SVG dans l'élément"),this._updateIconWithNewColor(i))}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise à jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=t._accessLevel||t.accessLevel||this.properties.accessLevel,a=t.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:t.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:t.fillOpacity!==void 0?t.fillOpacity:this.properties.style.fillOpacity||.8,radius:t.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o,console.log("[GeoNote][setNoteStyle] Niveau d'accès mis à jour:",o)),a&&this.properties.category!==a&&(this.properties.category=a,console.log("[GeoNote][setNoteStyle] Catégorie mise à jour:",a)),this.refreshIconStyle(),console.log("[GeoNote][setNoteStyle] Mise à jour du popup")}refreshIconStyle(){const t=this.getElement();if(t&&(t.style.display="none",t.offsetHeight,t.style.display="",Ut.DomUtil.setTransform(t,new Ut.Point(0,0),1),this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());Ut.DomUtil.setPosition(t,r),t.style.opacity="1",t.style.transition="opacity 0.2s"}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise à jour de la position:",r)}}_protectFromZoomAnimationErrors(t){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignorée: propriétés manquantes");return}typeof this.updatePositionDuringZoom=="function"?this.updatePositionDuringZoom(i):r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());Ut.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la récupération:",o)}}},t.on("zoomanim",i=>{this.updatePositionDuringZoom(i)}),console.log("[GeoNote][_protectFromZoomAnimationErrors] Protection contre les erreurs d'animation de zoom activée")}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(t){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${t}" />
          </svg>
        </div>
      `,o=Ut.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100),console.log("[GeoNote][_updateIconWithNewColor] Icône mise à jour avec la nouvelle couleur")}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise à jour de l'icône:",r)}}toBackendFormat(t){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:t,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(t){var l,u,h,p,v;console.log("[GeoNote][updateFromBackendData] Début de la mise à jour avec les données:",t),console.log("[GeoNote][updateFromBackendData] Couleur dans les données reçues:",{styleColor:(l=t.style)==null?void 0:l.color,styleFillColor:(u=t.style)==null?void 0:u.fillColor,styleObject:t.style}),this.properties.type="Note";const r=t.style?{...t.style,radius:t.style.radius||12}:this.properties.style;console.log("[GeoNote][updateFromBackendData] Style après traitement initial:",r);const i=((h=t.style)==null?void 0:h._accessLevel)||((p=t.style)==null?void 0:p.accessLevel)||t.accessLevel||this.properties.accessLevel||Di.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accès récupéré:",i);const s=((v=t.style)==null?void 0:v.category)||t.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catégorie récupérée:",s);const o=t.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise à jour de note avec columnId:",o);const a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:t.name||this.properties.name,description:t.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:t.comments||this.properties.comments||[],photos:t.photos||this.properties.photos||[],order:t.order||this.properties.order||0,createdAt:t.createdAt||this.properties.createdAt,updatedAt:t.updatedAt||new Date().toISOString()},this.setNoteStyle(a),console.log("[GeoNote][updateFromBackendData] Note mise à jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(t){var l,u,h,p,v,m,C,E;let r;if(typeof t.location=="object"&&!Array.isArray(t.location)&&t.location.type==="Point"){const k=t.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnées GeoJSON reçues:",k),r=[k[1],k[0]]}else if(Array.isArray(t.location)&&t.location.length===2)r=t.location;else throw new Error("Les données de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Création d'une note à partir des données:",t),console.log("[GeoNote][fromBackendData] Position utilisée:",r);const i=((l=t.style)==null?void 0:l._accessLevel)||((u=t.style)==null?void 0:u.accessLevel)||t.accessLevel||Di.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accès récupéré:",i,"Style:",t.style);const s=((h=t.style)==null?void 0:h.category)||t.category||"forages";console.log("[GeoNote][fromBackendData] Catégorie récupérée:",s),t.accessLevel=i,t.category=s;const o=t.columnId||"1";console.log("[GeoNote][fromBackendData] Création de note avec columnId:",o);const a=new xl(r,{name:t.name,description:t.description,columnId:o,accessLevel:i,category:t.category||"forages",color:(p=t.style)==null?void 0:p.color,weight:(v=t.style)==null?void 0:v.weight,fillColor:(m=t.style)==null?void 0:m.fillColor,fillOpacity:(C=t.style)==null?void 0:C.fillOpacity,radius:(E=t.style)==null?void 0:E.radius});return a.properties.type="Note",a.properties.comments=t.comments||[],a.properties.photos=t.photos||[],a.properties.order=t.order||0,a.properties.createdAt=t.createdAt||new Date().toISOString(),a.properties.updatedAt=t.updatedAt||new Date().toISOString(),t.style&&a.setNoteStyle(t.style),console.log("[GeoNote][fromBackendData] Note créée:",{location:r,name:a.properties.name,type:a.properties.type,category:a.properties.category,accessLevel:a.properties.accessLevel,style:a.properties.style}),a}async saveNote(t){var r,i,s,o,a,l,u,h,p,v,m;if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties(),console.log("[GeoNote][saveNote] Couleur avant sauvegarde:",{styleColor:(r=this.properties.style)==null?void 0:r.color,styleFillColor:(i=this.properties.style)==null?void 0:i.fillColor,iconColor:((o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path"))==null?void 0:o.getAttribute("fill"))||"non disponible"});let C=((a=this.properties.style)==null?void 0:a.color)||"#2b6451";if(C.startsWith("rgb")){const D=(l=this.getElement())==null?void 0:l.querySelector(".geo-note-marker svg path");if(D){const R=D.getAttribute("fill");R&&(C=R,console.log("[GeoNote][saveNote] Couleur récupérée depuis SVG pour remplacer RGB:",C))}}const E={...this.properties.style,color:C,fillColor:C,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category};console.log("[GeoNote][saveNote] Style final pour l'envoi:",E);const k={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:E,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};if(this.properties.enterprise_id)k.enterprise_id=this.properties.enterprise_id;else{const D=ro();!D.isAdmin&&((u=D.user)!=null&&u.enterprise_id)&&(k.enterprise_id=D.user.enterprise_id)}t&&(k.plan=t),console.log("[GeoNote][saveNote] Données à envoyer:",k),console.log("[GeoNote][saveNote] Couleur dans les données envoyées:",{styleColor:k.style.color,styleFillColor:k.style.fillColor});let A;return this._dbId?(A=(await pa.updateNote(this._dbId,k)).data,console.log("[GeoNote][saveNote] Note mise à jour avec succès:",A),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (update):",{styleColor:(h=A.style)==null?void 0:h.color,styleFillColor:(p=A.style)==null?void 0:p.fillColor,styleObject:A.style})):(A=(await pa.createNote(k)).data,console.log("[GeoNote][saveNote] Note créée avec succès:",A),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (create):",{styleColor:(v=A.style)==null?void 0:v.color,styleFillColor:(m=A.style)==null?void 0:m.fillColor,styleObject:A.style}),this._dbId=A.id,wf().addNote({...A,id:A.id,columnId:A.column,accessLevel:A.access_level})),this._planSaved=!0,A.id}catch(C){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",C),eu().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const t=localStorage.getItem("lastPlanId");t?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${t}`),this.saveNote(parseInt(t))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(t){this.setLatLng(t),this.fire("note:moved",{latlng:t,note:this}),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}updatePositionDuringZoom(t){try{if(!this._map||!t.center||t.zoom===void 0)return;const r=this.getElement();if(!r)return;r.style.opacity="0",r.style.transition="opacity 0.01s"}catch(r){console.warn("[GeoNote][updatePositionDuringZoom] Erreur lors de la gestion de l'animation de zoom:",r)}}updatePosition(){try{if(!this._map)return;const t=this.getElement();if(!t){console.warn("[GeoNote][updatePosition] Élément DOM introuvable, recréation de l'icône"),this.recreateIcon();return}const r=this._map.latLngToLayerPoint(this.getLatLng());Ut.DomUtil.setPosition(t,r),t.style.opacity="1",t.style.transition="opacity 0.2s",t.style.visibility="visible",t.style.display="block",console.log("[GeoNote][updatePosition] Position mise à jour:",{latLng:this.getLatLng(),pixelPosition:r,element:t});const i=t.getBoundingClientRect();i.width===0||i.height===0?(console.warn("[GeoNote][updatePosition] L'élément a une taille nulle, recréation de l'icône"),this.recreateIcon()):setTimeout(()=>this.forceVisible(),50)}catch(t){console.warn("[GeoNote][updatePosition] Erreur lors de la mise à jour de la position:",t),this.recreateIcon()}}}function Az(n){return n&&Array.isArray(n.points)&&n.points.length>0&&Array.isArray(n.points[0])&&n.points[0].length===2}function Tz(n){return n&&Array.isArray(n.points)&&n.points.length>0&&Array.isArray(n.points[0])&&n.points[0].length===2}function _5(n){var e,t,r,i,s,o,a,l,u,h,p,v,m,C,E,k,A,D,R,W,Q,de;if(console.log("[DrawingStore] Conversion de la forme en élément",{type:(e=n.properties)==null?void 0:e.type,name:(r=(t=n.properties)==null?void 0:t.style)==null?void 0:r.name,properties:n.properties}),((i=n.properties)==null?void 0:i.type)==="Note"){const fe=n.getLatLng();return{type_forme:"Note",data:{points:[[fe.lng,fe.lat]],style:{color:((s=n.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=n.properties.style)==null?void 0:o.weight)||3,opacity:((a=n.properties.style)==null?void 0:a.opacity)||1,fillColor:((l=n.properties.style)==null?void 0:l.fillColor)||"#2b6451",fillOpacity:((u=n.properties.style)==null?void 0:u.fillOpacity)||.2,name:((h=n.properties.style)==null?void 0:h.name)||""}}}}if(n instanceof Gl||((p=n.properties)==null?void 0:p.type)==="Polygon")return{type_forme:"Polygon",data:{points:n.getLatLngs()[0].map(z=>[z.lng,z.lat]),style:{color:((v=n.properties.style)==null?void 0:v.color)||"#2b6451",weight:((m=n.properties.style)==null?void 0:m.weight)||3,opacity:((C=n.properties.style)==null?void 0:C.opacity)||1,fillColor:((E=n.properties.style)==null?void 0:E.fillColor)||"#2b6451",fillOpacity:((k=n.properties.style)==null?void 0:k.fillOpacity)||.2,name:((A=n.properties.style)==null?void 0:A.name)||""},category:n.properties.category||"forages",accessLevel:n.properties.accessLevel||"visitor"}};if(n instanceof xs||((D=n.properties)==null?void 0:D.type)==="Line")return{type_forme:"Line",data:{points:n.getLatLngs().map(z=>[z.lng,z.lat]),category:n.properties.category||"forages",accessLevel:n.properties.accessLevel||"visitor",style:{color:((R=n.properties.style)==null?void 0:R.color)||"#2b6451",weight:((W=n.properties.style)==null?void 0:W.weight)||3,opacity:((Q=n.properties.style)==null?void 0:Q.opacity)||1,name:((de=n.properties.style)==null?void 0:de.name)||""}}};throw new Error("Type de forme non reconnu")}function Dz(n){var e,t,r,i,s,o,a,l,u,h,p,v,m,C,E,k,A,D,R,W,Q,de,fe,N,z,J,U,B,G,$,F,I,X,K,ve;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:n}),n.type_forme){case"Polygon":{const ge=n.data;if(!Az(ge))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const He=ge.points.map(_e=>Hn.latLng(_e[1],_e[0])),ie=((e=ge.style)==null?void 0:e._accessLevel)||((t=ge.style)==null?void 0:t.accessLevel)||ge.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accès récupéré:",ie,"Style:",ge.style),ge.accessLevel=ie;const Ce=new Gl([He],{color:((r=ge.style)==null?void 0:r.color)||"#2b6451",weight:((i=ge.style)==null?void 0:i.weight)||3,opacity:((s=ge.style)==null?void 0:s.opacity)||1,fillColor:((o=ge.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=ge.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=ge.style)==null?void 0:l.dashArray)||"",name:((u=ge.style)==null?void 0:u.name)||"",category:ge.category||"forages",accessLevel:ie});return Ce.updateProperties(),Ce}case"Line":{const ge=n.data;if(!Tz(ge))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const He=ge.points.map(_e=>Hn.latLng(_e[1],_e[0])),ie=((h=ge.style)==null?void 0:h._accessLevel)||((p=ge.style)==null?void 0:p.accessLevel)||ge.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accès récupéré:",ie,"Style:",ge.style),ge.accessLevel=ie;const Ce=new xs(He,{...ge.style||{},name:((v=ge.style)==null?void 0:v.name)||"",category:ge.category||"forages",accessLevel:ie});return Ce.updateProperties(),Ce}case"Rectangle":{const ge=n.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:ge,bounds:ge.bounds,width:ge.width,height:ge.height,rotation:ge.rotation}),!ge.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour Rectangle"),null;const He=new Hn.LatLngBounds(Hn.latLng(ge.bounds.southWest[1],ge.bounds.southWest[0]),Hn.latLng(ge.bounds.northEast[1],ge.bounds.northEast[0])),ie=new Aa(He,{color:((m=ge.style)==null?void 0:m.color)||"#2b6451",weight:((C=ge.style)==null?void 0:C.weight)||3,opacity:((E=ge.style)==null?void 0:E.opacity)||1,fillColor:((k=ge.style)==null?void 0:k.fillColor)||"#2b6451",fillOpacity:((A=ge.style)==null?void 0:A.fillOpacity)||.2,dashArray:((D=ge.style)==null?void 0:D.dashArray)||"",name:((R=ge.style)==null?void 0:R.name)||"",width:ge.width,height:ge.height});return ge.rotation&&ie.setRotation(ge.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restauré:",{bounds:ie.getBounds(),dimensions:ie.getDimensions(),properties:ie.properties}),ie}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle à partir de l'API",{id:n.id,data:n.data,hasName:((Q=(W=n.data)==null?void 0:W.style)==null?void 0:Q.name)!==void 0,name:(fe=(de=n.data)==null?void 0:de.style)==null?void 0:fe.name});const ge=n.data;if(!ge.center||!ge.radius)return console.error("[DrawingStore] Données invalides pour Circle"),null;const He=Hn.circle([ge.center[1],ge.center[0]],{color:((N=ge.style)==null?void 0:N.color)||"#2b6451",weight:((z=ge.style)==null?void 0:z.weight)||3,opacity:((J=ge.style)==null?void 0:J.opacity)||1,fillColor:((U=ge.style)==null?void 0:U.fillColor)||"#2b6451",fillOpacity:((B=ge.style)==null?void 0:B.fillOpacity)||.2,dashArray:((G=ge.style)==null?void 0:G.dashArray)||"",radius:ge.radius});return He.properties={type:"Circle",radius:ge.radius,diameter:ge.radius*2,surface:Math.PI*ge.radius*ge.radius,perimeter:2*Math.PI*ge.radius,style:{...ge.style||{},name:(($=ge.style)==null?void 0:$.name)||""}},console.log("[DrawingStore] Cercle créé:",{centerType:typeof ge.center,center:ge.center,radius:ge.radius,style:He.properties.style,name:He.properties.style.name}),He}case"Note":{console.log("[DrawingStore] Traitement d'une Note à partir de l'API",{id:n.id,data:n.data});const ge=n.data;if(!ge.location)return console.error("[DrawingStore] Données invalides pour Note"),null;try{const He={location:ge.location,name:ge.name||"Note géolocalisée",description:ge.description||"",columnId:ge.columnId||"en-cours",accessLevel:ge.accessLevel||"private",category:ge.category||"forages",style:{color:((F=ge.style)==null?void 0:F.color)||"#2b6451",weight:((I=ge.style)==null?void 0:I.weight)||2,fillColor:((X=ge.style)==null?void 0:X.fillColor)||"#2b6451",fillOpacity:((K=ge.style)==null?void 0:K.fillOpacity)||.8,radius:((ve=ge.style)==null?void 0:ve.radius)||12},comments:ge.comments||[],photos:ge.photos||[],order:ge.order||0,createdAt:ge.createdAt||new Date().toISOString(),updatedAt:ge.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Données préparées pour la note:",He);const ie=xl.fromBackendData(He);return ie._dbId=n.id,console.log("[DrawingStore] Note créée:",{id:n.id,location:He.location,name:He.name,type:ie.properties.type}),ie}catch(He){return console.error("[DrawingStore] Erreur lors de la création de la Note:",He),null}}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",n.type_forme),null}}const Op=$p("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:Hp()}),getters:{hasUnsavedChanges:n=>n.unsavedChanges,getCurrentElements:n=>n.elements,getSelectedElement:n=>n.selectedElement,getCurrentTool:n=>n.currentTool,getCurrentStyle:n=>n.currentStyle,getLastUsedType:n=>n.lastUsedType,getFilters:n=>n.filters,getFilteredElements:n=>{if(n.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun élément dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Début du filtrage avec",{totalElements:n.elements.length,filters:JSON.stringify({accessLevels:n.filters.accessLevels,categories:n.filters.categories,shapeTypes:n.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] Éléments dans le store:",n.elements.map(t=>({id:t.id,type_forme:t.type_forme,data:t.data?JSON.stringify(t.data):null})));const e=n.elements.filter(t=>{var l,u;if(console.log(`[DrawingStore][getFilteredElements] Vérification de l'élément ${t.id} (${t.type_forme})`),!(t.type_forme in n.filters.shapeTypes?n.filters.shapeTypes[t.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} filtré par type: ${t.type_forme} (non visible)`),!1;const i=((l=t.data)==null?void 0:l.category)||"default";if(!(i in n.filters.categories?n.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} filtré par catégorie: ${i} (non visible)`),!1;const o=((u=t.data)==null?void 0:u.accessLevel)||"visitor";let a=!0;return o==="company"?a=n.filters.accessLevels.company:o==="employee"?a=n.filters.accessLevels.employee:o==="visitor"&&(a=n.filters.accessLevels.visitor),a?(console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} visible: type=${t.type_forme}, catégorie=${i}, accès=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] Élément ${t.id} filtré par niveau d'accès: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Résultat du filtrage:",{total:n.elements.length,filtered:e.length,filteredIds:e.map(t=>t.id)}),e}},actions:{setCurrentPlan(n){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=n,n===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(n){var t;const e=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un élément",{element:n,isLeafletLayer:n instanceof Hn.Layer,hasProperties:!!n.properties,properties:n.properties,type:(t=n.properties)==null?void 0:t.type}),n instanceof Hn.Layer&&n.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>_5(n),"DrawingStore");console.log("[DrawingStore] Élément converti avant ajout",{original:n,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!n.type_forme&&this.lastUsedType&&(n.type_forme=this.lastUsedType),this.elements.push(n);this.unsavedChanges=!0}finally{e()}},updateElement(n){const e=this.elements.findIndex(t=>t.id===n.id);if(e!==-1){const t=this.elements[e].type_forme;this.elements[e]={...n,type_forme:t},this.unsavedChanges=!0}},removeElement(n){const e=this.elements.findIndex(t=>t.id===n);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(n){this.selectedElement=n},setCurrentTool(n){this.currentTool=n,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(n)&&(this.lastUsedType=n)},setCurrentStyle(n){if(!n||Object.keys(n).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...n}},updateFilters(n){if(n.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...n.accessLevels}),n.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...n.categories};const t=Object.keys(n.categories).filter(r=>e[r]!==this.filters.categories[r]);if(t.length>0){const r=t.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(n.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...n.shapeTypes};const t=Object.keys(n.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(t.length>0){const r=t.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(n){const e=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===n&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${n} déjà chargé avec ${this.elements.length} éléments`),e(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Début du chargement du plan",{planId:n});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>On.get(`/plans/${n}/`),"DrawingStore")).data;return console.log("[DrawingStore] Données du plan reçues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,a,l;console.log(`[DrawingStore] Analyse détaillée forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(a=i.data)!=null&&a.center?typeof i.data.center:"undefined",center:(l=i.data)==null?void 0:l.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stockée",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme déjà au format élément",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=Dz(i);if(o)return console.log("[DrawingStore] Forme convertie avec succès",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),_5(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${n} - Chargé ${this.elements.length} éléments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=n,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des préférences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(t){throw console.error("[DrawingStore] Erreur lors du chargement des éléments:",t),this.error="Erreur lors du chargement des éléments du plan",t}finally{this.loading=!1,e()}},async saveToPlan(n,e){const t=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=n||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Début de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:e==null?void 0:e.elementsToDelete}),!r)throw new Error("Aucun plan sélectionné pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),"DrawingStore"),s=(e==null?void 0:e.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,a=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>On.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const l=new Set(s);return a.data.formes.filter(u=>!l.has(u.id)).map(u=>({...u,type_forme:u.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] Éléments après filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,a.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,t()}}}}),UE=$p("mapFilters",{state:()=>({filters:[],loading:!1,error:null,performanceMonitor:Hp()}),getters:{getFilterById:n=>e=>n.filters.find(t=>t.id===e),getFiltersByCategory:n=>e=>n.filters.filter(t=>t.category===e),getUniqueCategories:n=>{const e=new Set;return n.filters.forEach(t=>e.add(t.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const n=this.performanceMonitor.startMeasure("fetchFilters","MapFilterStore"),e=eu();this.loading=!0,this.error=null;try{const t=await this.performanceMonitor.measureAsync("fetchFilters_apiCall",()=>x0.getFilters(),"MapFilterStore");return this.filters=t.data,this.filters}catch(t){throw this.error="Erreur lors du chargement des filtres",e.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",t),t}finally{this.loading=!1,n()}},async createFilter(n){const e=this.performanceMonitor.startMeasure("createFilter","MapFilterStore");this.loading=!0,this.error=null;try{const t=await this.performanceMonitor.measureAsync("createFilter_apiCall",()=>x0.createFilter(n),"MapFilterStore");return this.filters.push(t.data),console.log("[MapFilterStore] Filtre créé avec succès:",t.data),t.data}catch(t){throw this.error="Erreur lors de la création du filtre",console.error("[MapFilterStore] Erreur lors de la création du filtre:",t),t}finally{this.loading=!1,e()}},async updateFilter(n,e){const t=this.performanceMonitor.startMeasure("updateFilter","MapFilterStore");this.loading=!0,this.error=null;try{const r=await this.performanceMonitor.measureAsync("updateFilter_apiCall",()=>x0.updateFilter(n,e),"MapFilterStore"),i=this.filters.findIndex(s=>s.id===n);return i!==-1&&(this.filters[i]=r.data),console.log("[MapFilterStore] Filtre mis à jour avec succès:",r.data),r.data}catch(r){throw this.error="Erreur lors de la mise à jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise à jour du filtre:",r),r}finally{this.loading=!1,t()}},async deleteFilter(n){const e=this.performanceMonitor.startMeasure("deleteFilter","MapFilterStore");this.loading=!0,this.error=null;try{return await this.performanceMonitor.measureAsync("deleteFilter_apiCall",()=>x0.deleteFilter(n),"MapFilterStore"),this.filters=this.filters.filter(t=>t.id!==n),console.log("[MapFilterStore] Filtre supprimé avec succès:",n),!0}catch(t){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",t),t}finally{this.loading=!1,e()}}}}),Hy=$p("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:Hp()}),getters:{getPlanById:n=>e=>n.plans.find(t=>t.id===e),hasUnsavedChanges:n=>n.unsavedChanges,getCurrentPlanHistory:n=>n.planHistory},actions:{async fetchPlans(){var t,r;const n=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),e=ro();this.loading=!0;try{let i="/plans/";const s={};e.isSalarie?s.salarie=(t=e.user)==null?void 0:t.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>On.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,n()}},async fetchPlansWithDetails(){var t,r;const n=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),e=ro();this.loading=!0;try{let i="/plans/";const s={include_details:!0};e.isSalarie?s.salarie=(t=e.user)==null?void 0:t.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>On.get(i,{params:s}),"IrrigationStore"),a=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(l=>({...l,entreprise:typeof l.entreprise=="object"?l.entreprise:null,salarie:typeof l.salarie=="object"?l.salarie:null,visiteur:typeof l.visiteur=="object"?l.visiteur:null})),"IrrigationStore");return this.plans=a,{data:a}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,n()}},async fetchClientPlans(n){this.loading=!0;try{return(await w0.getVisiteurPlans(n)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(n){var r;const e=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const t=eu();try{const i=ro();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(n={...n,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...n,entreprise:n.entreprise?typeof n.entreprise=="object"&&n.entreprise&&"id"in n.entreprise?n.entreprise.id:Number(n.entreprise):null,salarie:n.salarie?typeof n.salarie=="object"&&n.salarie&&"id"in n.salarie?n.salarie.id:Number(n.salarie):null,visiteur:n.visiteur?typeof n.visiteur=="object"&&n.visiteur&&"id"in n.visiteur?n.visiteur.id:Number(n.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>w0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),t.success(`Le plan "${o.data.nom}" a été créé avec succès`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,t.error(`Erreur lors de la création du plan : ${s}`),i}finally{this.loading=!1,e()}},async createPlanForClient(n,e){this.clearCurrentPlan(),this.loading=!0;try{const t={...n,visiteur:e},r=await w0.createPlanForVisiteur(t);return this.plans.push(r.data),r.data}catch(t){const r=t instanceof Error?t.message:String(t);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",t}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(n){const e=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement à sauvegarder"),e();return}this.loading=!0;try{const t=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return On.patch(`/plans/${n}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===n);r!==-1&&(this.plans[r]=t.data),((i=this.currentPlan)==null?void 0:i.id)===n&&(this.currentPlan=t.data)},"IrrigationStore"),this.unsavedChanges=!1,t.data}catch(t){throw console.error("[IrrigationStore][savePlan] ERREUR:",t),this.error="Erreur lors de la sauvegarde du plan",t}finally{this.loading=!1,e()}},async updatePlanDetails(n,e){const t=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=eu();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:a,...l}=e,u={...l};return s!==void 0&&(u.visiteur_id=s),o!==void 0&&(u.salarie_id=o),a!==void 0&&(u.entreprise_id=a),On.patch(`/plans/${n}/`,u)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===n&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===n);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise à jour du plan:",i),r.error(`Erreur lors de la mise à jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{t()}},async fetchPlanHistory(n){this.loading=!0;try{const e=await On.get(`/plans/${n}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(n,e){var t;this.loading=!0;try{const r=await On.post(`/plans/${n}/restaurer/`,{version_id:e});((t=this.currentPlan)==null?void 0:t.id)===n&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===n);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(n){this.currentPlan=n,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(n){var t;this.loading=!0;const e=eu();try{const r=this.plans.find(i=>i.id===n);await w0.deletePlan(n),this.plans=this.plans.filter(i=>i.id!==n),((t=this.currentPlan)==null?void 0:t.id)===n&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Oz={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},Nz={class:"flex-1 flex flex-col overflow-hidden"},Iz={class:"border-b border-gray-200"},Bz={class:"flex -mb-px"},Rz={class:"flex-1 overflow-hidden flex flex-col"},Fz={key:0,class:"tab-content"},jz={class:"grid grid-cols-3 gap-1.5 mb-4"},zz=["onClick","title"],$z=["innerHTML"],Uz={key:0,class:"grid grid-cols-2 gap-2 mt-2 mb-2"},Vz={key:2,class:"my-4 border-t border-gray-200"},Hz={key:3,class:"mt-4"},Gz={key:0,class:"mb-4"},Wz={class:"mb-4"},qz=["value"],Yz={class:"mb-4"},Kz={class:"grid grid-cols-1 gap-4"},Zz={key:0,class:"space-y-1"},Xz={class:"flex justify-between items-center"},Jz={class:"text-sm font-medium text-gray-500"},Qz={class:"flex justify-between items-center"},e$={class:"text-sm font-medium text-gray-500"},t$={class:"text-sm font-medium text-gray-500"},n$={class:"flex flex-col space-y-2 w-full"},r$={class:"flex justify-between items-center"},i$={class:"text-sm font-medium text-gray-500 ml-2"},s$={class:"flex justify-between items-center"},o$={class:"text-sm font-medium text-gray-500 ml-2"},a$={class:"flex justify-between items-center"},l$={class:"text-sm font-medium text-gray-500 ml-2"},u$={class:"flex justify-between items-center"},c$={class:"text-sm font-medium text-gray-500 ml-2"},d$={class:"flex justify-between items-center"},h$={class:"text-sm font-medium text-gray-500 ml-2"},f$={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},p$={ref:"elevationCanvas"},g$={key:1,class:"tab-content"},m$={class:"grid grid-cols-6 gap-2 mb-4"},v$=["onClick","title"],y$={key:0,class:"space-y-4"},b$={class:"flex items-center gap-4"},_$={class:"flex items-center gap-2"},w$={class:"flex items-center gap-4"},x$=["value"],L$={key:0,class:"flex items-center gap-4"},C$={class:"flex items-center gap-2"},S$={key:1,class:"space-y-4"},E$={class:"flex items-center gap-4"},M$={class:"flex items-center gap-2"},P$={class:"flex items-center gap-4"},k$={class:"flex items-center gap-2"},A$={key:2,class:"tab-content filters-tab"},T$={class:"filters-content"},D$={class:"space-y-2"},O$={class:"space-y-2 mt-4"},N$={class:"space-y-1"},I$={class:"flex items-center"},B$={class:"flex items-center"},R$={class:"flex items-center"},F$={class:"flex items-center"},j$={class:"flex items-center"},z$={class:"flex items-center"},$$={key:0,class:"flex items-center"},U$=["onUpdate:modelValue"],V$={class:"ml-2 text-sm text-gray-700"},H$={key:0,class:"mt-2 pt-2 border-t border-gray-200"},G$={class:"flex space-x-2"},W$=["disabled"],q$={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Y$={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},K$={class:"space-y-2 mt-4"},Z$={class:"space-y-1"},X$={class:"flex items-center"},J$={class:"flex items-center"},Q$={class:"flex items-center"},eU={class:"flex items-center"},tU={key:0,class:"p-3 border-t border-gray-200"},nU={class:"mt-3"},rU={class:"mb-4"},iU={class:"grid grid-cols-2 gap-2"},sU={class:"grid grid-cols-2 gap-2"},oU=Ms({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(n,{emit:e}){const t=n,r=Op(),i=ro(),s=Gn(()=>i.isAdmin),o=Gn(()=>i.isEntreprise),a=UE(),l=Hy(),u=tu({name:""}),h=wt(!1),p=wt(["forages","clients","entrepots","livraisons","cultures","parcelles"]),v=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Note",label:"Note géolocalisée"}],m=Me=>{switch(Me){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c1.38 0 2.5-1.12 2.5-2.5S13.38 6 12 6s-2.5 1.12-2.5 2.5S10.62 11 12 11z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><ellipse cx="12" cy="22" rx="4" ry="1.5" stroke-width="2.5" fill="currentColor" fill-opacity="0.2"/></svg>';default:return""}},C=wt("tools");ai(()=>t.selectedTool,(Me,he)=>{console.log("[DrawingTools][watch selectedTool] Changement d'outil:",{newTool:Me,oldTool:he})}),ai(C,(Me,he)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:Me,oldTab:he}),Me==="filters"&&he!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage à l'onglet filtres"),console.log("[DrawingTools][watch activeTab] État actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] État actuel des filtres locaux:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),t.selectedShape&&(console.log("[DrawingTools][watch activeTab] Désélection de la forme actuelle lors du passage à l'onglet filtres"),Z("tool-selected","")),setTimeout(()=>{re()},0)),he==="filters"&&Me!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] État des filtres locaux avant application:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),re())});const E=wt({samplePoints:!0,circleSections:!0}),k=wt("#2b6451"),A=wt(2),D=wt("solid"),R=wt("#2b6451"),W=wt(.2),Q=wt(!0),de=wt(""),fe=wt("default"),N=wt("visitor"),z=wt({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),J=wt({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),U=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],B=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],G=wt("company"),$=tu({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),F=Me=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accès: ${Me}`),G.value=Me,Me==="company"?($.accessLevels.company=!0,$.accessLevels.employee=!1,$.accessLevels.visitor=!1):Me==="employee"?($.accessLevels.company=!1,$.accessLevels.employee=!0,$.accessLevels.visitor=!1):Me==="visitor"&&($.accessLevels.company=!1,$.accessLevels.employee=!1,$.accessLevels.visitor=!0),re()},I=Me=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accès: ${Me}`),t.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Désélection de la forme actuelle"),Z("tool-selected","")),F(Me)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const X=Gn(()=>t.selectedShape&&t.selectedShape.properties||null),K=Me=>{E.value[Me]=!E.value[Me]},ve=Me=>{k.value=Me,R.value=Me,ge({strokeColor:Me,fillColor:Me})},ge=Me=>{t.selectedShape&&Z("style-update",Me)},He=()=>{t.selectedShape&&Z("properties-update",{name:de.value})},ie=()=>{t.selectedShape&&Z("properties-update",{category:fe.value})},Ce=()=>{t.selectedShape&&Z("properties-update",{accessLevel:N.value})},_e=()=>{var Me;!t.selectedShape||((Me=X.value)==null?void 0:Me.type)!=="ElevationLine"||Z("style-update",{samplePointStyle:z.value})},H=()=>{var Me;!t.selectedShape||((Me=X.value)==null?void 0:Me.type)!=="ElevationLine"||Z("style-update",{minMaxPointStyle:J.value})},ee=()=>{console.log("[DrawingTools][resetFilters] Début de la réinitialisation des filtres"),console.log("[DrawingTools][resetFilters] État actuel des filtres:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2));const Me={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres à appliquer:",JSON.stringify(Me,null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres locaux"),$.accessLevels.company=!0,$.accessLevels.employee=!0,$.accessLevels.visitor=!0,$.categories.forages=!0,$.categories.clients=!0,$.categories.entrepots=!0,$.categories.livraisons=!0,$.categories.cultures=!0,$.categories.parcelles=!0,$.shapeTypes.Polygon=!0,$.shapeTypes.Line=!0,$.shapeTypes.ElevationLine=!0,$.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux après mise à jour:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres dans le store"),r.updateFilters(Me),console.log("[DrawingTools][resetFilters] Émission de l'event filter-change"),Z("filter-change",Me),console.log("[DrawingTools][resetFilters] Mise à jour forcée de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres réinitialisés avec succès")},pe=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Début de la réinitialisation des filtres avec désélection"),le(),ee(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres réinitialisés et forme désélectionnée avec succès")},re=()=>{const Me={...$.accessLevels},he={...$.categories},We={...$.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:Me,categories:he,shapeTypes:We},null,2));const at={accessLevels:Me,categories:he,shapeTypes:We};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(at,null,2)),r.updateFilters(at),console.log("[DrawingTools][applyFilters] Émission de l'event filter-change"),Z("filter-change",at),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise à jour forcée de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:at}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqués avec succès")},ae=Me=>`${Math.round(Me)} m`,De=Me=>Me>=1e4?`${(Me/1e4).toFixed(2)} ha`:`${Math.round(Me)} m²`,be=Me=>`${Me.toFixed(1)}%`,Ie=Me=>p.value.includes(Me)?Me:Me.split("_").map(he=>he.charAt(0).toUpperCase()+he.slice(1)).join(" "),le=()=>{t.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Désélection de la forme actuelle"),Z("tool-selected",""))};async function me(){var Me,he;if(!(!u.name||h.value)){h.value=!0;try{const We=u.name.toLowerCase().replace(/\s+/g,"_"),at=l.currentPlan;let ut=null;if(at!=null&&at.entreprise_id?ut=at.entreprise_id:at!=null&&at.entreprise&&typeof at.entreprise=="object"&&"id"in at.entreprise?ut=at.entreprise.id:(Me=i.user)!=null&&Me.enterprise_id?ut=i.user.enterprise_id:i.isEntreprise&&((he=i.user)!=null&&he.id)&&(ut=i.user.id),!ut){console.error("[DrawingTools] Impossible de créer un filtre: ID d'entreprise non disponible");return}console.log("[DrawingTools] Création d'un filtre pour l'entreprise:",ut);const Ct=await a.createFilter({name:u.name,category:We,entreprise:ut});console.log("[DrawingTools] Filtre créé avec succès:",Ct),$.categories[We]||(console.log(`[DrawingTools] Ajout de la catégorie ${We} aux filtres locaux`),$.categories[We]=!0),console.log(`[DrawingTools] Mise à jour du DrawingStore avec la catégorie ${We}`);const Xe={...r.filters.categories};Xe[We]=!0,r.updateFilters({categories:Xe}),console.log("[DrawingTools] Émission de l'événement filter-change"),Z("filter-change",$),u.name=""}catch(We){console.error("[DrawingTools] Erreur lors de la création du filtre:",We)}finally{h.value=!1}}}const oe=()=>{le(),C.value="filters"},Z=e;pm(()=>{var Me,he,We,at,ut,Ct,Xe;if(t.selectedShape){console.log("[DrawingTools][watchEffect] Mise à jour des propriétés pour la forme sélectionnée:",{type:t.selectedShape.type,properties:t.selectedShape.properties,options:t.selectedShape.options,layer:(Me=t.selectedShape.layer)==null?void 0:Me._leaflet_id});const zt=t.selectedShape.options||{};k.value=zt.color||"#2b6451",A.value=zt.weight||3,D.value=zt.dashArray?"dashed":"solid",R.value=zt.fillColor||"#2b6451",W.value=zt.fillOpacity||.2;const qt=t.selectedShape.type||((he=t.selectedShape.properties)==null?void 0:he.type)||"";Q.value=qt!=="Line",console.log("[DrawingTools][watchEffect] Type de forme détecté:",qt),de.value=((We=t.selectedShape.properties)==null?void 0:We.name)||"",fe.value=((at=t.selectedShape.properties)==null?void 0:at.category)||"forages",N.value=((ut=t.selectedShape.properties)==null?void 0:ut.accessLevel)||"visitor",qt==="ElevationLine"&&((Ct=t.selectedShape.properties)!=null&&Ct.samplePointStyle&&(z.value={...t.selectedShape.properties.samplePointStyle}),(Xe=t.selectedShape.properties)!=null&&Xe.minMaxPointStyle&&(J.value={...t.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Propriétés mises à jour avec succès")}}),Ss(async()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const Me=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...Me.accessLevels},categories:{...Me.categories},shapeTypes:{...Me.shapeTypes}},null,2)),$.accessLevels.company=Me.accessLevels.company,$.accessLevels.employee=Me.accessLevels.employee,$.accessLevels.visitor=Me.accessLevels.visitor,$.categories.forages=Me.categories.forages,$.categories.clients=Me.categories.clients,$.categories.entrepots=Me.categories.entrepots,$.categories.livraisons=Me.categories.livraisons,$.categories.cultures=Me.categories.cultures,$.categories.parcelles=Me.categories.parcelles,$.shapeTypes.Polygon=Me.shapeTypes.Polygon,$.shapeTypes.Line=Me.shapeTypes.Line,$.shapeTypes.ElevationLine=Me.shapeTypes.ElevationLine,$.shapeTypes.Note=Me.shapeTypes.Note;try{console.log("[DrawingTools][onMounted] Chargement des filtres personnalisés"),await a.fetchFilters();const he=a.getUniqueCategories;console.log("[DrawingTools][onMounted] Catégories personnalisées trouvées:",he);const We=[];he.forEach(at=>{!p.value.includes(at)&&!$.categories[at]&&(console.log(`[DrawingTools][onMounted] Ajout de la catégorie personnalisée: ${at}`),$.categories[at]=!0,We.push(at))}),We.length>0&&(console.log("[DrawingTools][onMounted] Mise à jour du store avec les catégories personnalisées:",We),r.updateFilters({categories:$.categories}),Z("filter-change",$))}catch(he){console.error("[DrawingTools][onMounted] Erreur lors du chargement des filtres personnalisés:",he)}console.log("[DrawingTools][onMounted] Filtres locaux après initialisation:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2))}),ai($,(Me,he)=>{console.log("[DrawingTools][watch filters] Changement détecté:",{activeTab:C.value,newFilters:JSON.stringify({accessLevels:Me.accessLevels,categories:Me.categories,shapeTypes:Me.shapeTypes}),oldFilters:JSON.stringify({accessLevels:he.accessLevels,categories:he.categories,shapeTypes:he.shapeTypes})});const We=Object.keys(Me.accessLevels).filter(Xe=>he.accessLevels[Xe]!==Me.accessLevels[Xe]),at=Object.keys(Me.categories).filter(Xe=>he.categories[Xe]!==Me.categories[Xe]),ut=Object.keys(Me.shapeTypes).filter(Xe=>he.shapeTypes[Xe]!==Me.shapeTypes[Xe]),Ct=We.length>0||at.length>0||ut.length>0;console.log("[DrawingTools][watch filters] Différences détectées:",{accessLevelsDiff:We,categoriesDiff:at,shapeTypesDiff:ut,hasChanges:Ct}),C.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),re()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const Ae=Me=>{console.log("[DrawingTools][handleToolClick] Outil cliqué:",Me,"Outil actuel:",t.selectedTool),Z("tool-selected",t.selectedTool===Me?"":Me),window.innerWidth<768&&Z("update:show",!1)},je=()=>{var Me;if(console.log("[DrawingTools][editGeoNote] Édition de la GeoNote"),Z("update:show",!1),t.selectedShape&&((Me=t.selectedShape.properties)==null?void 0:Me.type)==="Note"){const he=t.selectedShape.layer;he&&typeof he.editNote=="function"?(he.editNote(),console.log("[DrawingTools][editGeoNote] Méthode editNote appelée avec succès")):console.error("[DrawingTools][editGeoNote] La méthode editNote n'est pas disponible sur la couche")}},Ke=()=>{var Me;if(console.log("[DrawingTools][openGeoNoteRoute] Ouverture de l'itinéraire pour la GeoNote"),Z("update:show",!1),t.selectedShape&&((Me=t.selectedShape.properties)==null?void 0:Me.type)==="Note"){const he=t.selectedShape.layer;he&&typeof he.openInGoogleMaps=="function"?(he.openInGoogleMaps(),console.log("[DrawingTools][openGeoNoteRoute] Méthode openInGoogleMaps appelée avec succès")):console.error("[DrawingTools][openGeoNoteRoute] La méthode openInGoogleMaps n'est pas disponible sur la couche")}};return(Me,he)=>{var We,at,ut,Ct;return Ne(),Re("div",{class:xi(["drawing-tools-panel",{open:n.show}])},[x("div",Oz,[he[47]||(he[47]=x("div",{class:"flex items-center"},[x("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),x("h3",{class:"text-sm font-semibold text-gray-700"},"Outils")],-1)),x("button",{onClick:he[0]||(he[0]=Xe=>Me.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},he[46]||(he[46]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",Nz,[x("div",Iz,[x("nav",Bz,[x("button",{onClick:he[1]||(he[1]=Xe=>C.value="tools"),class:xi([C.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},he[48]||(he[48]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),x("span",null,"Outils",-1)]),2),n.selectedShape&&((We=n.selectedShape.properties)==null?void 0:We.type)!=="Note"?(Ne(),Re("button",{key:0,onClick:he[2]||(he[2]=Xe=>C.value="style"),class:xi([C.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},he[49]||(he[49]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),x("span",null,"Style",-1)]),2)):Jt("",!0),x("button",{onClick:oe,class:xi([C.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},he[50]||(he[50]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),x("span",null,"Filtres",-1)]),2)])]),x("div",Rz,[C.value==="tools"?(Ne(),Re("div",Fz,[x("div",jz,[(Ne(!0),Re(wn,null,Wn(v.filter(Xe=>Xe.type!=="delete"),Xe=>(Ne(),Re("button",{key:Xe.type,class:xi(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":t.selectedTool===Xe.type,"hover:bg-gray-50 border-gray-300 text-gray-700":t.selectedTool!==Xe.type}]),onClick:zt=>Ae(Xe.type),title:Xe.label},[x("span",{class:"icon",innerHTML:m(Xe.type)},null,8,$z)],10,zz))),128))]),n.selectedShape&&X.value&&X.value.type==="Note"?(Ne(),Re("div",Uz,[x("button",{class:"p-2 rounded-md border border-primary-200 bg-primary-50 text-primary-600 hover:bg-primary-100 flex items-center justify-center",onClick:je,title:"Éditer la note"},he[51]||(he[51]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),x("span",{class:"text-sm"},"Éditer",-1)])),x("button",{class:"p-2 rounded-md border border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 flex items-center justify-center",onClick:Ke,title:"Obtenir l'itinéraire"},he[52]||(he[52]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),x("span",{class:"text-sm"},"Itinéraire",-1)]))])):Jt("",!0),n.selectedShape?(Ne(),Re("button",{key:1,class:xi(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":t.selectedTool==="delete"}]),onClick:he[3]||(he[3]=Xe=>Me.$emit("delete-shape")),title:"Supprimer la forme"},he[53]||(he[53]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),x("span",{class:"text-sm"},"Supprimer",-1)]),2)):Jt("",!0),n.selectedShape&&X.value?(Ne(),Re("div",Vz)):Jt("",!0),n.selectedShape&&X.value?(Ne(),Re("div",Hz,[X.value.type!=="Note"?(Ne(),Re("div",Gz,[he[54]||(he[54]=x("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),Pn(x("input",{type:"text",id:"shapeName","onUpdate:modelValue":he[4]||(he[4]=Xe=>de.value=Xe),onChange:He,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[Ar,de.value]])])):Jt("",!0),x("div",Wz,[he[57]||(he[57]=x("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),Pn(x("select",{id:"shapeCategory","onUpdate:modelValue":he[5]||(he[5]=Xe=>fe.value=Xe),onChange:ie,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[he[55]||(he[55]=Kl('<option value="forages" data-v-338b5d61>Forages</option><option value="clients" data-v-338b5d61>Clients</option><option value="entrepots" data-v-338b5d61>Entrepôts</option><option value="livraisons" data-v-338b5d61>Lieux de livraison</option><option value="cultures" data-v-338b5d61>Cultures</option><option value="parcelles" data-v-338b5d61>Noms des parcelles</option>',6)),(Ne(!0),Re(wn,null,Wn($.categories,(Xe,zt)=>(Ne(),Re(wn,{key:zt},[p.value.includes(String(zt))?Jt("",!0):(Ne(),Re("option",{key:0,value:String(zt)},kt(Ie(String(zt))),9,qz))],64))),128)),he[56]||(he[56]=x("option",{value:"default"},"Autre",-1))],544),[[Oi,fe.value]])]),x("div",Yz,[he[59]||(he[59]=x("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accès",-1)),he[60]||(he[60]=x("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Définit qui peut voir cet élément sur la carte. ",-1)),Pn(x("select",{id:"accessLevel","onUpdate:modelValue":he[6]||(he[6]=Xe=>N.value=Xe),onChange:Ce,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},he[58]||(he[58]=[x("option",{value:"company"},"Entreprise uniquement",-1),x("option",{value:"employee"},"Entreprise et salariés",-1),x("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[Oi,N.value]])]),x("div",Kz,[X.value.type==="Polygon"?(Ne(),Re("div",Zz,[x("div",Xz,[he[61]||(he[61]=x("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),x("span",Jz,kt(De(X.value.surface||0)),1)]),x("div",Qz,[he[62]||(he[62]=x("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),x("span",e$,kt(ae(X.value.perimeter||0)),1)])])):X.value.type==="Line"?(Ne(),Re(wn,{key:1},[he[63]||(he[63]=x("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),x("span",t$,kt(ae(X.value.length||0)),1)],64)):X.value.type==="ElevationLine"?(Ne(),Re(wn,{key:2},[x("div",n$,[x("div",r$,[he[64]||(he[64]=x("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),x("span",i$,kt(ae(X.value.length||0)),1)]),x("div",s$,[he[65]||(he[65]=x("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé + :",-1)),x("span",o$,kt(ae(X.value.elevationGain||0)),1)]),x("div",a$,[he[66]||(he[66]=x("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé - :",-1)),x("span",l$,kt(ae(X.value.elevationLoss||0)),1)]),x("div",u$,[he[67]||(he[67]=x("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),x("span",c$,kt(be(X.value.averageSlope||0)),1)]),x("div",d$,[he[68]||(he[68]=x("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),x("span",h$,kt(be(X.value.maxSlope||0)),1)])]),x("div",f$,[x("canvas",p$,null,512)],512)],64)):Jt("",!0)])])):Jt("",!0)])):Jt("",!0),C.value==="style"&&n.selectedShape&&((at=n.selectedShape.properties)==null?void 0:at.type)!=="Note"?(Ne(),Re("div",g$,[x("div",m$,[(Ne(),Re(wn,null,Wn(U,Xe=>x("button",{key:Xe,class:"w-8 h-8 rounded-full",style:Xl({backgroundColor:Xe}),onClick:zt=>ve(Xe),title:Xe},null,12,v$)),64))]),((ut=X.value)==null?void 0:ut.type)!=="TextRectangle"?(Ne(),Re("div",y$,[x("div",b$,[he[69]||(he[69]=x("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),x("div",_$,[Pn(x("input",{type:"color","onUpdate:modelValue":he[7]||(he[7]=Xe=>k.value=Xe),class:"w-16 h-8 rounded border",onChange:he[8]||(he[8]=Xe=>ge({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[Ar,k.value]]),Pn(x("input",{type:"range","onUpdate:modelValue":he[9]||(he[9]=Xe=>A.value=Xe),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:he[10]||(he[10]=Xe=>ge({strokeWidth:A.value})),title:"Épaisseur du contour"},null,544),[[Ar,A.value]])])]),x("div",w$,[he[70]||(he[70]=x("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),Pn(x("select",{"onUpdate:modelValue":he[11]||(he[11]=Xe=>D.value=Xe),class:"w-full rounded border",onChange:he[12]||(he[12]=Xe=>ge({strokeStyle:D.value}))},[(Ne(),Re(wn,null,Wn(B,Xe=>x("option",{key:Xe.value,value:Xe.value},kt(Xe.label),9,x$)),64))],544),[[Oi,D.value]])]),Q.value?(Ne(),Re("div",L$,[he[71]||(he[71]=x("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),x("div",C$,[Pn(x("input",{type:"color","onUpdate:modelValue":he[13]||(he[13]=Xe=>R.value=Xe),class:"w-16 h-8 rounded border",onChange:he[14]||(he[14]=Xe=>ge({fillColor:R.value})),title:"Couleur de remplissage"},null,544),[[Ar,R.value]]),Pn(x("input",{type:"range","onUpdate:modelValue":he[15]||(he[15]=Xe=>W.value=Xe),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:he[16]||(he[16]=Xe=>ge({fillOpacity:W.value})),title:"Opacité du remplissage"},null,544),[[Ar,W.value]])])])):Jt("",!0)])):Jt("",!0),((Ct=X.value)==null?void 0:Ct.type)==="TextRectangle"?(Ne(),Re("div",S$,[x("div",E$,[he[72]||(he[72]=x("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),x("div",M$,[Pn(x("input",{type:"color","onUpdate:modelValue":he[17]||(he[17]=Xe=>k.value=Xe),class:"w-16 h-8 rounded border",onChange:he[18]||(he[18]=Xe=>ge({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[Ar,k.value]]),Pn(x("input",{type:"range","onUpdate:modelValue":he[19]||(he[19]=Xe=>A.value=Xe),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:he[20]||(he[20]=Xe=>ge({strokeWidth:A.value})),title:"Épaisseur du contour"},null,544),[[Ar,A.value]])])]),x("div",P$,[he[73]||(he[73]=x("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),x("div",k$,[Pn(x("input",{type:"color","onUpdate:modelValue":he[21]||(he[21]=Xe=>R.value=Xe),class:"w-16 h-8 rounded border",onChange:he[22]||(he[22]=Xe=>ge({fillColor:R.value})),title:"Couleur de remplissage"},null,544),[[Ar,R.value]]),Pn(x("input",{type:"range","onUpdate:modelValue":he[23]||(he[23]=Xe=>W.value=Xe),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:he[24]||(he[24]=Xe=>ge({fillOpacity:W.value})),title:"Opacité du remplissage"},null,544),[[Ar,W.value]])])])])):Jt("",!0)])):Jt("",!0),C.value==="filters"?(Ne(),Re("div",A$,[x("div",T$,[x("div",D$,[he[76]||(he[76]=x("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accès",-1)),he[77]||(he[77]=x("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Sélectionnez votre niveau d'accès pour filtrer les éléments visibles sur la carte. ",-1)),x("div",null,[Pn(x("select",{"onUpdate:modelValue":he[25]||(he[25]=Xe=>G.value=Xe),onChange:he[26]||(he[26]=Xe=>I(G.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},he[74]||(he[74]=[x("option",{value:"company"},"Entreprise (accès à tout)",-1),x("option",{value:"employee"},"Salariés (accès niveau salariés et visiteurs)",-1),x("option",{value:"visitor"},"Visiteurs (accès niveau visiteurs uniquement)",-1)]),544),[[Oi,G.value]]),he[75]||(he[75]=x("div",{class:"mt-2 text-xs text-gray-500"},[x("p",null,[x("strong",null,"Entreprise"),qr(" : Vous verrez tous les éléments (entreprise, salariés, visiteurs)")]),x("p",null,[x("strong",null,"Salariés"),qr(" : Vous verrez les éléments pour salariés et visiteurs")]),x("p",null,[x("strong",null,"Visiteurs"),qr(" : Vous ne verrez que les éléments pour visiteurs")])],-1))])]),x("div",O$,[he[86]||(he[86]=x("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catégories",-1)),x("div",N$,[x("label",I$,[Pn(x("input",{type:"checkbox","onUpdate:modelValue":he[27]||(he[27]=Xe=>$.categories.forages=Xe),onChange:le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[wl,$.categories.forages]]),he[78]||(he[78]=x("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),x("label",B$,[Pn(x("input",{type:"checkbox","onUpdate:modelValue":he[28]||(he[28]=Xe=>$.categories.clients=Xe),onChange:le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[wl,$.categories.clients]]),he[79]||(he[79]=x("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),x("label",R$,[Pn(x("input",{type:"checkbox","onUpdate:modelValue":he[29]||(he[29]=Xe=>$.categories.entrepots=Xe),onChange:le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[wl,$.categories.entrepots]]),he[80]||(he[80]=x("span",{class:"ml-2 text-sm text-gray-700"},"Entrepôts",-1))]),x("label",F$,[Pn(x("input",{type:"checkbox","onUpdate:modelValue":he[30]||(he[30]=Xe=>$.categories.livraisons=Xe),onChange:le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[wl,$.categories.livraisons]]),he[81]||(he[81]=x("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),x("label",j$,[Pn(x("input",{type:"checkbox","onUpdate:modelValue":he[31]||(he[31]=Xe=>$.categories.cultures=Xe),onChange:le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[wl,$.categories.cultures]]),he[82]||(he[82]=x("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),x("label",z$,[Pn(x("input",{type:"checkbox","onUpdate:modelValue":he[32]||(he[32]=Xe=>$.categories.parcelles=Xe),onChange:le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[wl,$.categories.parcelles]]),he[83]||(he[83]=x("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Ne(!0),Re(wn,null,Wn($.categories,(Xe,zt)=>(Ne(),Re(wn,{key:zt},[p.value.includes(String(zt))?Jt("",!0):(Ne(),Re("label",$$,[Pn(x("input",{type:"checkbox","onUpdate:modelValue":qt=>$.categories[zt]=qt,onChange:le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,U$),[[wl,$.categories[zt]]]),x("span",V$,kt(zt),1)]))],64))),128)),s.value||o.value?(Ne(),Re("div",H$,[x("div",G$,[Pn(x("input",{type:"text","onUpdate:modelValue":he[33]||(he[33]=Xe=>u.name=Xe),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[Ar,u.name]]),x("button",{onClick:me,disabled:!u.name||h.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[h.value?(Ne(),Re("svg",Y$,he[85]||(he[85]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ne(),Re("svg",q$,he[84]||(he[84]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,W$)])])):Jt("",!0)])]),x("div",K$,[he[91]||(he[91]=x("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),x("div",Z$,[x("label",X$,[Pn(x("input",{type:"checkbox","onUpdate:modelValue":he[34]||(he[34]=Xe=>$.shapeTypes.Polygon=Xe),onChange:le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[wl,$.shapeTypes.Polygon]]),he[87]||(he[87]=x("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),x("label",J$,[Pn(x("input",{type:"checkbox","onUpdate:modelValue":he[35]||(he[35]=Xe=>$.shapeTypes.Line=Xe),onChange:le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[wl,$.shapeTypes.Line]]),he[88]||(he[88]=x("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),x("label",Q$,[Pn(x("input",{type:"checkbox","onUpdate:modelValue":he[36]||(he[36]=Xe=>$.shapeTypes.ElevationLine=Xe),onChange:le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[wl,$.shapeTypes.ElevationLine]]),he[89]||(he[89]=x("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimétriques",-1))]),x("label",eU,[Pn(x("input",{type:"checkbox","onUpdate:modelValue":he[37]||(he[37]=Xe=>$.shapeTypes.Note=Xe),onChange:le,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[wl,$.shapeTypes.Note]]),he[90]||(he[90]=x("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),x("div",{class:"pt-4 mb-4"},[x("button",{onClick:pe,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Réinitialiser ")])])])):Jt("",!0)])]),n.selectedShape&&X.value&&X.value.type==="ElevationLine"?(Ne(),Re("div",tU,[x("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:he[38]||(he[38]=Xe=>K("samplePoints"))},[he[93]||(he[93]=x("span",null,"Points d'échantillonnage",-1)),(Ne(),Re("svg",{class:xi(["w-4 h-4",{"rotate-180":!E.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},he[92]||(he[92]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Pn(x("div",nU,[x("div",rU,[he[98]||(he[98]=x("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),x("div",iU,[x("div",null,[he[94]||(he[94]=x("label",{class:"text-xs text-gray-600"},"Taille",-1)),Pn(x("input",{type:"number","onUpdate:modelValue":he[39]||(he[39]=Xe=>z.value.radius=Xe),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:_e},null,544),[[Ar,z.value.radius]])]),x("div",null,[he[95]||(he[95]=x("label",{class:"text-xs text-gray-600"},"Couleur",-1)),Pn(x("input",{type:"color","onUpdate:modelValue":he[40]||(he[40]=Xe=>z.value.color=Xe),class:"w-full h-8 px-1 border rounded",onChange:_e},null,544),[[Ar,z.value.color]])]),x("div",null,[he[96]||(he[96]=x("label",{class:"text-xs text-gray-600"},"Opacité",-1)),Pn(x("input",{type:"range","onUpdate:modelValue":he[41]||(he[41]=Xe=>z.value.fillOpacity=Xe),min:"0",max:"1",step:"0.1",class:"w-full",onChange:_e},null,544),[[Ar,z.value.fillOpacity]])]),x("div",null,[he[97]||(he[97]=x("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Pn(x("input",{type:"number","onUpdate:modelValue":he[42]||(he[42]=Xe=>z.value.weight=Xe),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:_e},null,544),[[Ar,z.value.weight]])])])]),x("div",null,[he[102]||(he[102]=x("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),x("div",sU,[x("div",null,[he[99]||(he[99]=x("label",{class:"text-xs text-gray-600"},"Taille",-1)),Pn(x("input",{type:"number","onUpdate:modelValue":he[43]||(he[43]=Xe=>J.value.radius=Xe),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:H},null,544),[[Ar,J.value.radius]])]),x("div",null,[he[100]||(he[100]=x("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Pn(x("input",{type:"number","onUpdate:modelValue":he[44]||(he[44]=Xe=>J.value.weight=Xe),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:H},null,544),[[Ar,J.value.weight]])]),x("div",null,[he[101]||(he[101]=x("label",{class:"text-xs text-gray-600"},"Opacité",-1)),Pn(x("input",{type:"range","onUpdate:modelValue":he[45]||(he[45]=Xe=>J.value.fillOpacity=Xe),min:"0",max:"1",step:"0.1",class:"w-full",onChange:H},null,544),[[Ar,J.value.fillOpacity]])])])])],512),[[Dy,!E.value.samplePoints]])])):Jt("",!0)],2)}}}),w5=ad(oU,[["__scopeId","data-v-338b5d61"]]),aU={class:"map-toolbar w-full"},lU={class:"hidden md:flex items-center space-x-2"},uU={class:"dropdown"},cU={class:"dropdown-menu"},dU=["onClick"],hU={key:0,class:"border-l pl-2 flex-1"},fU={class:"flex items-center"},pU={class:"plan-info"},gU={class:"plan-name"},mU={key:0,class:"plan-description"},vU={class:"border-l pl-2 ml-auto"},yU={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},bU={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},_U={key:"saving"},wU={key:"success",class:"save-success-text"},xU={key:"default"},LU={class:"md:hidden"},CU={class:"flex justify-between items-center"},SU={key:0,class:"truncate mx-2 text-sm font-medium"},EU={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},MU={class:"flex justify-between items-center mb-3 border-b pb-2"},PU={class:"flex flex-col space-y-4"},kU={key:0,class:"flex flex-col pb-3 border-b"},AU={class:"text-sm font-semibold text-gray-800"},TU={key:0,class:"text-xs text-gray-600 mt-1"},DU={class:"flex flex-col"},OU={class:"grid grid-cols-3 gap-2"},NU=["onClick"],IU={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},BU={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},RU={key:"saving"},FU={key:"success",class:"save-success-text"},jU={key:"default"},zU=Ms({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view"],setup(n,{emit:e}){const t=n,r=e,{lastSave:i,planName:s,planDescription:o,saveStatus:a}=__(t),l=wt("Hybride"),u=wt(!1),h=D=>{const R=D.currentTarget,W=R.nextElementSibling;if(W&&W.classList.contains("dropdown-menu")){const Q=R.getBoundingClientRect();W.style.top=`${Q.bottom}px`,W.style.left=`${Q.left}px`}},p={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},v=Gn(()=>i.value?new Date(i.value).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),m=D=>{l.value=D,r("change-map-type",D),u.value=!1},C=()=>{r("create-new-plan"),u.value=!1},E=()=>{r("load-plan"),u.value=!1},k=()=>{r("save-plan"),u.value=!1},A=()=>{r("adjust-view"),u.value=!1};return Ss(()=>{const D=setInterval(()=>{window.dispatchEvent(new CustomEvent("geonote:savePlan"))},6e4);Jl(()=>{clearInterval(D)})}),ai(a,D=>{D==="saving"&&window.dispatchEvent(new CustomEvent("geonote:savePlan"))}),(D,R)=>(Ne(),Re("div",aU,[x("div",lU,[x("div",uU,[x("button",{class:"btn-toolbar dropdown-toggle",onMouseover:h},[R[2]||(R[2]=x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),x("span",null,kt(p[l.value]),1)],32),x("div",cU,[(Ne(),Re(wn,null,Wn(p,(W,Q)=>x("button",{key:Q,class:xi(["dropdown-item",{active:Q===l.value}]),onClick:de=>m(Q)},kt(W),11,dU)),64))])]),yn(s)?(Ne(),Re("div",hU,[x("div",fU,[x("div",pU,[x("h2",gU,kt(yn(s)),1),yn(o)?(Ne(),Re("p",mU,kt(yn(o)),1)):Jt("",!0)])])])):Jt("",!0),x("div",{class:"border-l pl-2"},[x("div",{class:"flex items-center space-x-1"},[x("button",{onClick:C,class:"btn-toolbar",title:"Nouveau plan"},R[3]||(R[3]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),x("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),x("button",{onClick:E,class:"btn-toolbar",title:"Charger un plan"},R[4]||(R[4]=[Kl('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-f1cdc164><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-f1cdc164></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-f1cdc164></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-f1cdc164></path></svg><span class="hidden lg:inline ml-1" data-v-f1cdc164>Charger</span>',2)])),x("button",{onClick:k,class:"btn-toolbar",title:"Enregistrer le plan"},R[5]||(R[5]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),x("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),x("div",{class:"border-l pl-2"},[x("div",{class:"flex items-center space-x-1"},[x("button",{onClick:A,class:"btn-toolbar",title:"Ajuster la vue"},R[6]||(R[6]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),x("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)]))])]),x("div",vU,[x("div",{class:xi(["text-xs hidden lg:flex items-center",{"text-gray-500":!yn(a),"text-primary-600 font-medium":yn(a)==="success","text-blue-600 font-medium":yn(a)==="saving"}])},[yn(a)==="saving"?(Ne(),Re("svg",yU,R[7]||(R[7]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),yn(a)==="success"?(Ne(),Re("svg",bU,R[8]||(R[8]=[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Jt("",!0),ni(t2,{name:"fade-slide",mode:"out-in"},{default:Gu(()=>[yn(a)==="saving"?(Ne(),Re("span",_U," Sauvegarde en cours... ")):yn(a)==="success"?(Ne(),Re("span",wU," Sauvegarde réussie ! ")):(Ne(),Re("span",xU," Dernière modification : "+kt(v.value),1))]),_:1})],2)])]),x("div",LU,[x("div",CU,[x("button",{onClick:R[0]||(R[0]=W=>u.value=!u.value),class:"p-2 rounded-md border bg-white shadow-sm"},R[9]||(R[9]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),yn(s)?(Ne(),Re("div",SU,kt(yn(s)),1)):Jt("",!0),x("div",{class:"flex space-x-2"},[x("button",{onClick:C,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},R[10]||(R[10]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),x("button",{onClick:k,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},R[11]||(R[11]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),x("button",{onClick:A,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},R[12]||(R[12]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),u.value?(Ne(),Re("div",EU,[x("div",MU,[R[14]||(R[14]=x("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),x("button",{onClick:R[1]||(R[1]=W=>u.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},R[13]||(R[13]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",PU,[yn(s)?(Ne(),Re("div",kU,[x("h3",AU,kt(yn(s)),1),yn(o)?(Ne(),Re("p",TU,kt(yn(o)),1)):Jt("",!0)])):Jt("",!0),x("div",DU,[R[15]||(R[15]=x("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),x("div",OU,[(Ne(),Re(wn,null,Wn(p,(W,Q)=>x("button",{key:Q,class:xi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":Q===l.value}]),onClick:de=>m(Q)},kt(W),11,NU)),64))])]),x("div",{class:"flex flex-col"},[R[18]||(R[18]=x("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),x("div",{class:"grid grid-cols-2 gap-2"},[x("button",{onClick:C,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},R[16]||(R[16]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),qr(" Nouveau ")])),x("button",{onClick:E,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},R[17]||(R[17]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),x("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),x("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),qr(" Charger ")]))])]),x("div",{class:xi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!yn(a),"text-primary-600 font-medium":yn(a)==="success","text-blue-600 font-medium":yn(a)==="saving"}])},[yn(a)==="saving"?(Ne(),Re("svg",IU,R[19]||(R[19]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),yn(a)==="success"?(Ne(),Re("svg",BU,R[20]||(R[20]=[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Jt("",!0),ni(t2,{name:"fade-slide",mode:"out-in"},{default:Gu(()=>[yn(a)==="saving"?(Ne(),Re("span",RU," Sauvegarde en cours... ")):yn(a)==="success"?(Ne(),Re("span",FU," Sauvegarde réussie ! ")):(Ne(),Re("span",jU," Dernière modification : "+kt(v.value),1))]),_:1})],2)])])):Jt("",!0)])]))}}),$U=ad(zU,[["__scopeId","data-v-f1cdc164"]]),UU={class:"comment-thread"},VU={key:0,class:"space-y-3 mb-4"},HU={class:"flex justify-between items-start"},GU={class:"flex items-center"},WU={class:"font-medium text-sm text-gray-900"},qU={class:"flex items-center"},YU={class:"text-xs text-gray-500"},KU=["onClick"],ZU={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},XU={key:1,class:"text-center text-sm text-gray-500 italic my-4"},JU={key:2,class:"mt-3"},QU={class:"flex justify-end mt-2"},eV=["disabled"],tV={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},nV=Ms({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(n,{emit:e}){const t=n;console.log("[CommentThread] Commentaires reçus initialement:",t.comments),ai(()=>t.comments,E=>{console.log("[CommentThread] Commentaires mis à jour:",E)},{deep:!0});const r=e,i=ro(),s=wf(),o=eu(),a=wt(""),l=Gn(()=>i.isEntreprise||i.isAdmin);function u(E){return i.user&&E.userId===i.user.id||i.isAdmin}async function h(){var E;if(a.value.trim())try{await s.addComment(t.noteId,a.value.trim()),a.value="",o.success("Commentaire ajouté avec succès"),r("comment-added")}catch(k){if(console.error("Erreur lors de l'ajout du commentaire:",k),(E=k.response)!=null&&E.data){const A=k.response.data;A.note?o.error(`Erreur: ${A.note[0]}`):A.user?o.error(`Erreur: ${A.user[0]}`):A.text?o.error(`Erreur: ${A.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(E){var k;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(t.noteId,E),o.success("Commentaire supprimé"),r("comment-deleted")}catch(A){if(console.error("Erreur lors de la suppression du commentaire:",A),(k=A.response)!=null&&k.data){const D=A.response.data;D.detail?o.error(`Erreur: ${D.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(E){try{if(!E)return"Date inconnue";const k=new Date(E);return isNaN(k.getTime())?(console.warn(`Date invalide: ${E}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)}catch(k){return console.error(`Erreur lors du formatage de la date: ${E}`,k),"Date invalide"}}function m(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function C(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return E}}return(E,k)=>(Ne(),Re("div",UU,[E.comments&&E.comments.length>0?(Ne(),Re("div",VU,[(Ne(!0),Re(wn,null,Wn(E.comments,A=>(Ne(),Re("div",{key:A.id,class:"bg-gray-50 rounded-lg p-3"},[x("div",HU,[x("div",GU,[x("div",WU,kt(A.userName),1),x("span",{class:xi(["ml-2 text-xs px-2 py-0.5 rounded-full",m(A.userRole)])},kt(C(A.userRole)),3)]),x("div",qU,[x("span",YU,kt(v(A.createdAt)),1),u(A)?(Ne(),Re("button",{key:0,onClick:Zl(D=>p(A.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},k[1]||(k[1]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,KU)):Jt("",!0)])]),x("p",ZU,kt(A.text),1)]))),128))])):(Ne(),Re("div",XU," Aucun commentaire pour le moment ")),l.value?(Ne(),Re("div",JU,[Pn(x("textarea",{"onUpdate:modelValue":k[0]||(k[0]=A=>a.value=A),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[Ar,a.value]]),x("div",QU,[x("button",{type:"button",onClick:Zl(h,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,eV)])])):(Ne(),Re("div",tV," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),rV={class:"photo-gallery"},iV={key:0,class:"grid grid-cols-2 gap-2 mb-4"},sV=["src","onClick"],oV={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},aV={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},lV=["onClick"],uV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},cV={class:"flex space-x-2 mt-3"},dV={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},hV={class:"relative bg-gray-900",style:{height:"300px"}},fV=["src"],pV={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},gV={key:1,class:"flex space-x-3"},mV={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},vV={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},yV=["src"],bV=Ms({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(n,{emit:e}){const t=n,r=e,i=wf(),s=eu(),o=wt(null),a=wt(null),l=wt(null);let u=null;const h=wt(!1),p=wt(!1),v=wt(null),m=wt(null);function C(fe){v.value=fe,h.value=!0}async function E(fe){var N;if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{await i.removePhoto(t.noteId,fe),s.success("Photo supprimée"),r("photo-deleted"),h.value&&((N=v.value)==null?void 0:N.id)===fe&&(h.value=!1,v.value=null)}catch(z){console.error("Erreur lors de la suppression de la photo:",z),s.error("Erreur lors de la suppression de la photo")}}function k(){l.value&&l.value.click()}async function A(fe){const N=fe.target;if(!N.files||N.files.length===0)return;const z=N.files[0];if(!z.type.startsWith("image/")){s.error("Le fichier doit être une image");return}if(z.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const J=await D(z);await i.addPhoto(t.noteId,{url:J}),N.value="",s.success("Photo ajoutée"),r("photo-added")}catch(J){console.error("Erreur lors de l'ajout de la photo:",J),s.error("Erreur lors de l'ajout de la photo")}}function D(fe){return new Promise((N,z)=>{const J=new FileReader;J.onload=()=>N(J.result),J.onerror=z,J.readAsDataURL(fe)})}ai(p,async fe=>{if(fe){m.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de caméra non supportée sur ce navigateur");const N={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};u=await navigator.mediaDevices.getUserMedia(N),o.value&&(o.value.srcObject=u,await new Promise(z=>{o.value.onloadedmetadata=()=>{o.value.play().then(z)}}))}catch(N){console.error("Erreur lors de l'accès à la caméra:",N);let z="Impossible d'accéder à la caméra";N.name==="NotAllowedError"?z="L'accès à la caméra a été refusé. Veuillez vérifier vos permissions.":N.name==="NotFoundError"?z="Aucune caméra n'a été trouvée sur votre appareil.":N.name==="NotSupportedError"&&(z="Votre navigateur ne supporte pas l'accès à la caméra."),s.error(z),p.value=!1}}else u&&(u.getTracks().forEach(N=>N.stop()),u=null)});function R(){if(!o.value||!a.value)return;const fe=o.value,N=a.value;N.width=fe.videoWidth,N.height=fe.videoHeight;const z=N.getContext("2d");z&&(z.drawImage(fe,0,0,N.width,N.height),m.value=N.toDataURL("image/jpeg"))}function W(){m.value=null}async function Q(){if(m.value)try{await i.addPhoto(t.noteId,{url:m.value}),p.value=!1,s.success("Photo ajoutée"),r("photo-added")}catch(fe){console.error("Erreur lors de l'ajout de la photo:",fe),s.error("Erreur lors de l'ajout de la photo")}}function de(){p.value=!1}return Jl(()=>{u&&(u.getTracks().forEach(fe=>fe.stop()),u=null)}),(fe,N)=>(Ne(),Re("div",rV,[fe.photos&&fe.photos.length>0?(Ne(),Re("div",iV,[(Ne(!0),Re(wn,null,Wn(fe.photos,z=>(Ne(),Re("div",{key:z.id,class:"relative group"},[x("img",{src:z.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:J=>C(z)},null,8,sV),x("div",oV,[x("div",aV,[x("button",{onClick:Zl(J=>E(z.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},N[2]||(N[2]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,lV)])])]))),128))])):(Ne(),Re("div",uV," Aucune photo pour le moment ")),x("div",cV,[x("button",{type:"button",onClick:N[0]||(N[0]=z=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},N[3]||(N[3]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),qr(" Prendre une photo ")])),x("button",{type:"button",onClick:k,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},N[4]||(N[4]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),qr(" Téléverser ")])),x("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:A},null,544)]),p.value?(Ne(),Re("div",dV,[x("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[N[6]||(N[6]=x("h3",{class:"text-sm font-medium text-gray-700"},"Mode caméra",-1)),x("button",{type:"button",onClick:de,class:"text-gray-400 hover:text-gray-500"},N[5]||(N[5]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",hV,[m.value?(Ne(),Re("img",{key:1,src:m.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,fV)):(Ne(),Re("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),x("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),x("div",pV,[m.value?(Ne(),Re("div",gV,[x("button",{type:"button",onClick:W,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),x("button",{type:"button",onClick:Q,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Ne(),Re("button",{key:0,type:"button",onClick:R,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},N[7]||(N[7]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):Jt("",!0),h.value?(Ne(),Re("div",mV,[x("div",vV,[x("button",{type:"button",onClick:N[1]||(N[1]=z=>h.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},N[8]||(N[8]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(Ne(),Re("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,yV)):Jt("",!0)])])):Jt("",!0)]))}}),_V=ad(bV,[["__scopeId","data-v-f87156b4"]]),wV={class:"modal-header"},xV={class:"modal-title"},LV={class:"modal-tabs"},CV={key:0,class:"badge"},SV={key:0,class:"badge"},EV={class:"modal-content"},MV={key:0,class:"tab-content"},PV={class:"form-group"},kV={class:"form-group"},AV={key:0,class:"location-indicator"},TV={class:"form-group"},DV=["value"],OV={key:1,class:"form-group"},NV=["value"],IV={class:"form-group"},BV=["value"],RV={class:"form-group"},FV={class:"color-picker"},jV=["onClick"],zV={key:1,class:"tab-content"},$V={key:2,class:"tab-content"},UV=Ms({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(n,{emit:e}){const t=n,r=e,i=wf(),s=eu(),o=ro(),a=wt("info"),l=wt([]),u=wt(null),h=window.console;ai(a,async F=>{h.log("[NoteEditModal] Onglet actif changé:",F),F==="comments"&&t.note&&t.note.id&&(h.log("[NoteEditModal] Onglet Commentaires sélectionné, commentaires actuels:",p.value.comments),await C(t.note.id)),F==="photos"&&t.note&&t.note.id&&(h.log("[NoteEditModal] Onglet Photos sélectionné, photos actuelles:",p.value.photos),await E(t.note.id))});const p=wt({title:"",description:"",columnId:"",accessLevel:Di.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],enterprise_id:null});function v(F){return Array.isArray(F)?F:typeof F=="object"&&"type"in F&&"coordinates"in F?[F.coordinates[1],F.coordinates[0]]:(h.error("[NoteEditModal] Format de localisation non reconnu:",F),[0,0])}function m(F){if(!F)return new Date().toISOString();try{const I=new Date(F);return isNaN(I.getTime())?(h.warn("[NoteEditModal] Date invalide:",F),new Date().toISOString()):I.toISOString()}catch(I){return h.error("[NoteEditModal] Erreur lors de la création de la date:",I),new Date().toISOString()}}async function C(F){try{h.log(`[NoteEditModal] Chargement des commentaires pour la note ${F}`);const I=await pa.getComments(F);h.log("[NoteEditModal] Commentaires reçus:",I.data);const X=I.data.map(K=>({id:K.id,text:K.text,createdAt:K.created_at,userId:K.user,userName:K.user_name,userRole:K.user_role}));return h.log("[NoteEditModal] Commentaires transformés:",X),t.note&&(i.updateNote(t.note.id,{comments:X}),p.value.comments=X,h.log("[NoteEditModal] Commentaires mis à jour dans le store et localement"),h.log("[NoteEditModal] editingNote.comments après mise à jour:",p.value.comments)),X}catch(I){return h.error("[NoteEditModal] Erreur lors du chargement des commentaires:",I),s.error("Erreur lors du chargement des commentaires"),[]}}async function E(F){try{h.log(`[NoteEditModal] Chargement des photos pour la note ${F}`);const I=await pa.getPhotos(F);h.log("[NoteEditModal] Photos reçues:",I.data);const X=I.data.map(K=>({id:K.id,url:K.image,createdAt:K.created_at,caption:K.caption}));return t.note&&(i.updateNote(t.note.id,{photos:X}),p.value.photos=X,h.log("[NoteEditModal] Photos mises à jour dans le store et localement")),X}catch(I){return h.error("[NoteEditModal] Erreur lors du chargement des photos:",I),s.error("Erreur lors du chargement des photos"),[]}}async function k(){if(o.isAdmin)try{const F=await Xa.getEntreprises();l.value=F.data,h.log("[NoteEditModal] Entreprises chargées:",l.value)}catch(F){h.error("[NoteEditModal] Erreur lors du chargement des entreprises:",F),s.error("Erreur lors du chargement des entreprises")}}Ss(async()=>{var F,I,X;if(h.log("[NoteEditModal] onMounted - props:",t),await i.loadColumns(),h.log("[NoteEditModal] Colonnes chargées:",i.columns),await k(),t.note){h.log("[NoteEditModal] Édition d'une note existante:",t.note);const K=JSON.parse(JSON.stringify(t.note));K.createdAt=m(K.createdAt),K.updatedAt=m(K.updatedAt),p.value=K,o.isAdmin&&K.enterprise_id&&(u.value=K.enterprise_id),t.note.id&&(h.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([C(t.note.id),E(t.note.id)]),h.log("[NoteEditModal] Après chargement - Commentaires:",((F=p.value.comments)==null?void 0:F.length)||0),h.log("[NoteEditModal] Après chargement - Photos:",((I=p.value.photos)==null?void 0:I.length)||0),setTimeout(()=>{h.log("[NoteEditModal] Compteurs après timeout - Commentaires:",D.value),h.log("[NoteEditModal] Compteurs après timeout - Photos:",R.value)},0))}else if(t.isNewNote){if(h.log("[NoteEditModal] Création d'une nouvelle note"),p.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Di.PRIVATE,style:{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:null},!o.isAdmin&&((X=o.user)!=null&&X.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id),t.location){h.log("[NoteEditModal] Ajout de la localisation:",t.location);const K=v(t.location);p.value.location=K}h.log("[NoteEditModal] Niveau d'accès initial:",p.value.accessLevel)}else h.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");h.log("[NoteEditModal] editingNote.value après initialisation:",p.value)});const A=Gn(()=>i.getSortedColumns),D=Gn(()=>{var I;const F=((I=p.value.comments)==null?void 0:I.length)||0;return h.log("[NoteEditModal] Computed commentsCount recalculé:",F),F}),R=Gn(()=>{var I;const F=((I=p.value.photos)==null?void 0:I.length)||0;return h.log("[NoteEditModal] Computed photosCount recalculé:",F),F}),W=[{id:Di.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Di.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:Di.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et les salariés"},{id:Di.VISITOR,title:"Visiteurs",description:"Visible par tous"}],Q=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],de=F=>{var I;if(p.value.style?(p.value.style.color=F,p.value.style.fillColor=F):p.value.style={color:F,weight:2,opacity:1,fillColor:F,fillOpacity:.6,radius:8},p.value.color=F,(I=t.note)!=null&&I.id){h.log("[NoteEditModal] Émission de l'événement de mise à jour de couleur:",F);const X=new CustomEvent("geonote:updateStyle",{detail:{noteId:t.note.id,style:{color:F,fillColor:F}}});window.dispatchEvent(X);const K=new CustomEvent("geonote:update",{detail:{noteId:t.note.id,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style}}});window.dispatchEvent(K)}},fe=()=>{var F,I,X,K,ve,ge,He,ie,Ce,_e,H;p.value={title:((F=t.note)==null?void 0:F.title)||"",description:((I=t.note)==null?void 0:I.description)||"",columnId:((X=t.note)==null?void 0:X.columnId)||"",accessLevel:((K=t.note)==null?void 0:K.accessLevel)||"private",style:((ve=t.note)==null?void 0:ve.style)||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},location:t.location||((ge=t.note)==null?void 0:ge.location)||null,comments:((He=t.note)==null?void 0:He.comments)||[],photos:((ie=t.note)==null?void 0:ie.photos)||[],enterprise_id:((Ce=t.note)==null?void 0:Ce.enterprise_id)||null},o.isAdmin&&((_e=t.note)!=null&&_e.enterprise_id)&&(u.value=t.note.enterprise_id),!o.isAdmin&&!p.value.enterprise_id&&((H=o.user)!=null&&H.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id)};Ss(()=>{fe()}),ai(()=>t.note,()=>{fe()},{deep:!0});function N(){r("close")}async function z(){h.log("[NoteEditModal] Commentaire ajouté, le modal reste ouvert"),t.note&&t.note.id&&await C(t.note.id)}async function J(){h.log("[NoteEditModal] Photo ajoutée, le modal reste ouvert"),t.note&&t.note.id&&await E(t.note.id)}async function U(){h.log("[NoteEditModal] Commentaire supprimé, mise à jour de la liste"),t.note&&t.note.id&&await C(t.note.id)}async function B(){h.log("[NoteEditModal] Photo supprimée, mise à jour de la liste"),t.note&&t.note.id&&await E(t.note.id)}async function G(){var F,I;try{const X=p.value.style.color;p.value.style={...p.value.style,color:X,fillColor:X,weight:2,opacity:1,fillOpacity:.6,radius:8};const K={title:p.value.title,description:p.value.description,columnId:p.value.columnId,style:p.value.style,access_level:p.value.accessLevel,comments:p.value.comments||[],photos:p.value.photos||[],color:X,enterprise_id:o.isAdmin?u.value:p.value.enterprise_id};!o.isAdmin&&((F=o.user)!=null&&F.enterprise_id)&&(K.enterprise_id=o.user.enterprise_id),p.value.location&&(K.location=Array.isArray(p.value.location)?{type:"Point",coordinates:[p.value.location[1],p.value.location[0]]}:p.value.location),h.log("[NoteEditModal] Données de note à sauvegarder:",K);let ve;if((I=t.note)!=null&&I.id){const ge=t.note.backendId||t.note.id;h.log(`[NoteEditModal] Mise à jour de la note avec ID backend: ${ge}`),K.backendId=t.note.backendId,ve=(await pa.updateNote(ge,K)).data,i.updateNote(ge,{...p.value,...ve,accessLevel:p.value.accessLevel,style:p.value.style,color:X,updatedAt:new Date().toISOString()});const ie=t.note.leafletId||t.note.id,Ce=new CustomEvent("geonote:update",{detail:{noteId:ie,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style,color:X}}});window.dispatchEvent(Ce),s.success("Note mise à jour avec succès")}else{if(ve=(await pa.createNote(K)).data,!ve.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const He=i.getDefaultColumn,ie={...K,id:ve.id,columnId:K.columnId||He.id,accessLevel:p.value.accessLevel,style:K.style,color:X};h.log("[NoteEditModal] Note à ajouter au store avec ID backend:",ve.id),i.addNote(ie),s.success("Note créée avec succès")}ve&&(!ve.comments&&p.value.comments&&(ve.comments=p.value.comments),!ve.photos&&p.value.photos&&(ve.photos=p.value.photos),ve.color=X,ve.style={...ve.style,color:X,fillColor:X}),r("save",ve),r("close")}catch(X){h.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",X),s.error("Erreur lors de la sauvegarde de la note")}}function $(F){F.stopPropagation()}return(F,I)=>{var X;return Ne(),Re("div",{class:"modal-overlay",onClick:$},[x("div",{class:"modal-container",onClick:I[8]||(I[8]=Zl(()=>{},["stop"]))},[x("form",{onSubmit:Zl(G,["prevent"]),class:"modal-form"},[x("div",wV,[x("h3",xV,kt((X=F.note)!=null&&X.id?"Modifier la note":"Nouvelle note"),1),x("button",{type:"button",onClick:N,class:"close-button"},I[9]||(I[9]=[x("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",LV,[x("button",{type:"button",onClick:I[0]||(I[0]=K=>a.value="info"),class:xi(["tab-button",{active:a.value==="info"}])}," Informations ",2),x("button",{type:"button",onClick:I[1]||(I[1]=K=>a.value="comments"),class:xi(["tab-button",{active:a.value==="comments"}])},[I[10]||(I[10]=qr(" Commentaires ")),D.value>0?(Ne(),Re("span",CV,kt(D.value),1)):Jt("",!0)],2),x("button",{type:"button",onClick:I[2]||(I[2]=K=>a.value="photos"),class:xi(["tab-button",{active:a.value==="photos"}])},[I[11]||(I[11]=qr(" Photos ")),R.value>0?(Ne(),Re("span",SV,kt(R.value),1)):Jt("",!0)],2)]),x("div",EV,[a.value==="info"?(Ne(),Re("div",MV,[x("div",PV,[I[12]||(I[12]=x("label",{for:"title"},"Titre",-1)),Pn(x("input",{type:"text",id:"title","onUpdate:modelValue":I[3]||(I[3]=K=>p.value.title=K),required:""},null,512),[[Ar,p.value.title]])]),x("div",kV,[I[13]||(I[13]=x("label",{for:"description"},"Description",-1)),Pn(x("textarea",{id:"description","onUpdate:modelValue":I[4]||(I[4]=K=>p.value.description=K),rows:"3"},null,512),[[Ar,p.value.description]])]),p.value.location?(Ne(),Re("div",AV,I[14]||(I[14]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1),x("span",null,"Note géolocalisée",-1)]))):Jt("",!0),x("div",TV,[I[15]||(I[15]=x("label",{for:"column"},"État",-1)),Pn(x("select",{id:"column","onUpdate:modelValue":I[5]||(I[5]=K=>p.value.columnId=K)},[(Ne(!0),Re(wn,null,Wn(A.value,K=>(Ne(),Re("option",{key:K.id,value:K.id},kt(K.title),9,DV))),128))],512),[[Oi,p.value.columnId]])]),yn(o).isAdmin?(Ne(),Re("div",OV,[I[17]||(I[17]=x("label",{for:"enterprise"},"Entreprise",-1)),Pn(x("select",{id:"enterprise","onUpdate:modelValue":I[6]||(I[6]=K=>u.value=K)},[I[16]||(I[16]=x("option",{value:null},"Sélectionner une entreprise",-1)),(Ne(!0),Re(wn,null,Wn(l.value,K=>(Ne(),Re("option",{key:K.id,value:K.id},kt(K.company_name||`${K.first_name} ${K.last_name}`),9,NV))),128))],512),[[Oi,u.value]])])):Jt("",!0),x("div",IV,[I[18]||(I[18]=x("label",{for:"accessLevel"},"Niveau d'accès",-1)),Pn(x("select",{id:"accessLevel","onUpdate:modelValue":I[7]||(I[7]=K=>p.value.accessLevel=K)},[(Ne(),Re(wn,null,Wn(W,K=>x("option",{key:K.id,value:K.id},kt(K.title)+" - "+kt(K.description),9,BV)),64))],512),[[Oi,p.value.accessLevel]])]),x("div",RV,[I[19]||(I[19]=x("label",null,"Couleur",-1)),x("div",FV,[(Ne(),Re(wn,null,Wn(Q,K=>x("div",{key:K,class:xi(["color-option",{selected:p.value.style.color===K}]),style:Xl({backgroundColor:K}),onClick:ve=>de(K)},null,14,jV)),64))])])])):a.value==="comments"?(Ne(),Re("div",zV,[F.note?(Ne(),Vo(nV,{key:0,noteId:F.note.id,comments:p.value.comments||[],onCommentAdded:z,onCommentDeleted:U},null,8,["noteId","comments"])):Jt("",!0)])):a.value==="photos"?(Ne(),Re("div",$V,[F.note?(Ne(),Vo(_V,{key:0,noteId:F.note.id,photos:p.value.photos||[],onPhotoAdded:J,onPhotoDeleted:B},null,8,["noteId","photos"])):Jt("",!0)])):Jt("",!0)]),x("div",{class:"modal-footer"},[I[20]||(I[20]=x("button",{type:"submit",class:"primary-button"},"Enregistrer",-1)),x("button",{type:"button",onClick:N,class:"secondary-button"},"Annuler")])],32)])])}}}),VE=ad(UV,[["__scopeId","data-v-a26dd91d"]]);(()=>{var An,Jn;var n=Object.create,e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(d,g)=>()=>(g||d((g={exports:{}}).exports,g),g.exports),a=(d,g,_,S)=>{if(g&&typeof g=="object"||typeof g=="function")for(let P of r(g))!s.call(d,P)&&P!==_&&e(d,P,{get:()=>g[P],enumerable:!(S=t(g,P))||S.enumerable});return d},l=(d,g,_)=>(_=d!=null?n(i(d)):{},a(g||!d||!d.__esModule?e(_,"default",{value:d,enumerable:!0}):_,d)),u=o((d,g)=>{function _(){this.__data__=[],this.size=0}g.exports=_}),h=o((d,g)=>{function _(S,P){return S===P||S!==S&&P!==P}g.exports=_}),p=o((d,g)=>{var _=h();function S(P,V){for(var te=P.length;te--;)if(_(P[te][0],V))return te;return-1}g.exports=S}),v=o((d,g)=>{var _=p(),S=Array.prototype,P=S.splice;function V(te){var se=this.__data__,ye=_(se,te);if(ye<0)return!1;var Ee=se.length-1;return ye==Ee?se.pop():P.call(se,ye,1),--this.size,!0}g.exports=V}),m=o((d,g)=>{var _=p();function S(P){var V=this.__data__,te=_(V,P);return te<0?void 0:V[te][1]}g.exports=S}),C=o((d,g)=>{var _=p();function S(P){return _(this.__data__,P)>-1}g.exports=S}),E=o((d,g)=>{var _=p();function S(P,V){var te=this.__data__,se=_(te,P);return se<0?(++this.size,te.push([P,V])):te[se][1]=V,this}g.exports=S}),k=o((d,g)=>{var _=u(),S=v(),P=m(),V=C(),te=E();function se(ye){var Ee=-1,nt=ye==null?0:ye.length;for(this.clear();++Ee<nt;){var Ye=ye[Ee];this.set(Ye[0],Ye[1])}}se.prototype.clear=_,se.prototype.delete=S,se.prototype.get=P,se.prototype.has=V,se.prototype.set=te,g.exports=se}),A=o((d,g)=>{var _=k();function S(){this.__data__=new _,this.size=0}g.exports=S}),D=o((d,g)=>{function _(S){var P=this.__data__,V=P.delete(S);return this.size=P.size,V}g.exports=_}),R=o((d,g)=>{function _(S){return this.__data__.get(S)}g.exports=_}),W=o((d,g)=>{function _(S){return this.__data__.has(S)}g.exports=_}),Q=o((d,g)=>{var _=typeof ga=="object"&&ga&&ga.Object===Object&&ga;g.exports=_}),de=o((d,g)=>{var _=Q(),S=typeof self=="object"&&self&&self.Object===Object&&self,P=_||S||Function("return this")();g.exports=P}),fe=o((d,g)=>{var _=de(),S=_.Symbol;g.exports=S}),N=o((d,g)=>{var _=fe(),S=Object.prototype,P=S.hasOwnProperty,V=S.toString,te=_?_.toStringTag:void 0;function se(ye){var Ee=P.call(ye,te),nt=ye[te];try{ye[te]=void 0;var Ye=!0}catch{}var _t=V.call(ye);return Ye&&(Ee?ye[te]=nt:delete ye[te]),_t}g.exports=se}),z=o((d,g)=>{var _=Object.prototype,S=_.toString;function P(V){return S.call(V)}g.exports=P}),J=o((d,g)=>{var _=fe(),S=N(),P=z(),V="[object Null]",te="[object Undefined]",se=_?_.toStringTag:void 0;function ye(Ee){return Ee==null?Ee===void 0?te:V:se&&se in Object(Ee)?S(Ee):P(Ee)}g.exports=ye}),U=o((d,g)=>{function _(S){var P=typeof S;return S!=null&&(P=="object"||P=="function")}g.exports=_}),B=o((d,g)=>{var _=J(),S=U(),P="[object AsyncFunction]",V="[object Function]",te="[object GeneratorFunction]",se="[object Proxy]";function ye(Ee){if(!S(Ee))return!1;var nt=_(Ee);return nt==V||nt==te||nt==P||nt==se}g.exports=ye}),G=o((d,g)=>{var _=de(),S=_["__core-js_shared__"];g.exports=S}),$=o((d,g)=>{var _=G(),S=function(){var V=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return V?"Symbol(src)_1."+V:""}();function P(V){return!!S&&S in V}g.exports=P}),F=o((d,g)=>{var _=Function.prototype,S=_.toString;function P(V){if(V!=null){try{return S.call(V)}catch{}try{return V+""}catch{}}return""}g.exports=P}),I=o((d,g)=>{var _=B(),S=$(),P=U(),V=F(),te=/[\\^$.*+?()[\]{}|]/g,se=/^\[object .+?Constructor\]$/,ye=Function.prototype,Ee=Object.prototype,nt=ye.toString,Ye=Ee.hasOwnProperty,_t=RegExp("^"+nt.call(Ye).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Bt(tn){if(!P(tn)||S(tn))return!1;var _n=_(tn)?_t:se;return _n.test(V(tn))}g.exports=Bt}),X=o((d,g)=>{function _(S,P){return S==null?void 0:S[P]}g.exports=_}),K=o((d,g)=>{var _=I(),S=X();function P(V,te){var se=S(V,te);return _(se)?se:void 0}g.exports=P}),ve=o((d,g)=>{var _=K(),S=de(),P=_(S,"Map");g.exports=P}),ge=o((d,g)=>{var _=K(),S=_(Object,"create");g.exports=S}),He=o((d,g)=>{var _=ge();function S(){this.__data__=_?_(null):{},this.size=0}g.exports=S}),ie=o((d,g)=>{function _(S){var P=this.has(S)&&delete this.__data__[S];return this.size-=P?1:0,P}g.exports=_}),Ce=o((d,g)=>{var _=ge(),S="__lodash_hash_undefined__",P=Object.prototype,V=P.hasOwnProperty;function te(se){var ye=this.__data__;if(_){var Ee=ye[se];return Ee===S?void 0:Ee}return V.call(ye,se)?ye[se]:void 0}g.exports=te}),_e=o((d,g)=>{var _=ge(),S=Object.prototype,P=S.hasOwnProperty;function V(te){var se=this.__data__;return _?se[te]!==void 0:P.call(se,te)}g.exports=V}),H=o((d,g)=>{var _=ge(),S="__lodash_hash_undefined__";function P(V,te){var se=this.__data__;return this.size+=this.has(V)?0:1,se[V]=_&&te===void 0?S:te,this}g.exports=P}),ee=o((d,g)=>{var _=He(),S=ie(),P=Ce(),V=_e(),te=H();function se(ye){var Ee=-1,nt=ye==null?0:ye.length;for(this.clear();++Ee<nt;){var Ye=ye[Ee];this.set(Ye[0],Ye[1])}}se.prototype.clear=_,se.prototype.delete=S,se.prototype.get=P,se.prototype.has=V,se.prototype.set=te,g.exports=se}),pe=o((d,g)=>{var _=ee(),S=k(),P=ve();function V(){this.size=0,this.__data__={hash:new _,map:new(P||S),string:new _}}g.exports=V}),re=o((d,g)=>{function _(S){var P=typeof S;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?S!=="__proto__":S===null}g.exports=_}),ae=o((d,g)=>{var _=re();function S(P,V){var te=P.__data__;return _(V)?te[typeof V=="string"?"string":"hash"]:te.map}g.exports=S}),De=o((d,g)=>{var _=ae();function S(P){var V=_(this,P).delete(P);return this.size-=V?1:0,V}g.exports=S}),be=o((d,g)=>{var _=ae();function S(P){return _(this,P).get(P)}g.exports=S}),Ie=o((d,g)=>{var _=ae();function S(P){return _(this,P).has(P)}g.exports=S}),le=o((d,g)=>{var _=ae();function S(P,V){var te=_(this,P),se=te.size;return te.set(P,V),this.size+=te.size==se?0:1,this}g.exports=S}),me=o((d,g)=>{var _=pe(),S=De(),P=be(),V=Ie(),te=le();function se(ye){var Ee=-1,nt=ye==null?0:ye.length;for(this.clear();++Ee<nt;){var Ye=ye[Ee];this.set(Ye[0],Ye[1])}}se.prototype.clear=_,se.prototype.delete=S,se.prototype.get=P,se.prototype.has=V,se.prototype.set=te,g.exports=se}),oe=o((d,g)=>{var _=k(),S=ve(),P=me(),V=200;function te(se,ye){var Ee=this.__data__;if(Ee instanceof _){var nt=Ee.__data__;if(!S||nt.length<V-1)return nt.push([se,ye]),this.size=++Ee.size,this;Ee=this.__data__=new P(nt)}return Ee.set(se,ye),this.size=Ee.size,this}g.exports=te}),Z=o((d,g)=>{var _=k(),S=A(),P=D(),V=R(),te=W(),se=oe();function ye(Ee){var nt=this.__data__=new _(Ee);this.size=nt.size}ye.prototype.clear=S,ye.prototype.delete=P,ye.prototype.get=V,ye.prototype.has=te,ye.prototype.set=se,g.exports=ye}),Ae=o((d,g)=>{var _=K(),S=function(){try{var P=_(Object,"defineProperty");return P({},"",{}),P}catch{}}();g.exports=S}),je=o((d,g)=>{var _=Ae();function S(P,V,te){V=="__proto__"&&_?_(P,V,{configurable:!0,enumerable:!0,value:te,writable:!0}):P[V]=te}g.exports=S}),Ke=o((d,g)=>{var _=je(),S=h();function P(V,te,se){(se!==void 0&&!S(V[te],se)||se===void 0&&!(te in V))&&_(V,te,se)}g.exports=P}),Me=o((d,g)=>{function _(S){return function(P,V,te){for(var se=-1,ye=Object(P),Ee=te(P),nt=Ee.length;nt--;){var Ye=Ee[S?nt:++se];if(V(ye[Ye],Ye,ye)===!1)break}return P}}g.exports=_}),he=o((d,g)=>{var _=Me(),S=_();g.exports=S}),We=o((d,g)=>{var _=de(),S=typeof d=="object"&&d&&!d.nodeType&&d,P=S&&typeof g=="object"&&g&&!g.nodeType&&g,V=P&&P.exports===S,te=V?_.Buffer:void 0,se=te?te.allocUnsafe:void 0;function ye(Ee,nt){if(nt)return Ee.slice();var Ye=Ee.length,_t=se?se(Ye):new Ee.constructor(Ye);return Ee.copy(_t),_t}g.exports=ye}),at=o((d,g)=>{var _=de(),S=_.Uint8Array;g.exports=S}),ut=o((d,g)=>{var _=at();function S(P){var V=new P.constructor(P.byteLength);return new _(V).set(new _(P)),V}g.exports=S}),Ct=o((d,g)=>{var _=ut();function S(P,V){var te=V?_(P.buffer):P.buffer;return new P.constructor(te,P.byteOffset,P.length)}g.exports=S}),Xe=o((d,g)=>{function _(S,P){var V=-1,te=S.length;for(P||(P=Array(te));++V<te;)P[V]=S[V];return P}g.exports=_}),zt=o((d,g)=>{var _=U(),S=Object.create,P=function(){function V(){}return function(te){if(!_(te))return{};if(S)return S(te);V.prototype=te;var se=new V;return V.prototype=void 0,se}}();g.exports=P}),qt=o((d,g)=>{function _(S,P){return function(V){return S(P(V))}}g.exports=_}),Qe=o((d,g)=>{var _=qt(),S=_(Object.getPrototypeOf,Object);g.exports=S}),ot=o((d,g)=>{var _=Object.prototype;function S(P){var V=P&&P.constructor,te=typeof V=="function"&&V.prototype||_;return P===te}g.exports=S}),it=o((d,g)=>{var _=zt(),S=Qe(),P=ot();function V(te){return typeof te.constructor=="function"&&!P(te)?_(S(te)):{}}g.exports=V}),At=o((d,g)=>{function _(S){return S!=null&&typeof S=="object"}g.exports=_}),Yt=o((d,g)=>{var _=J(),S=At(),P="[object Arguments]";function V(te){return S(te)&&_(te)==P}g.exports=V}),bn=o((d,g)=>{var _=Yt(),S=At(),P=Object.prototype,V=P.hasOwnProperty,te=P.propertyIsEnumerable,se=_(function(){return arguments}())?_:function(ye){return S(ye)&&V.call(ye,"callee")&&!te.call(ye,"callee")};g.exports=se}),xn=o((d,g)=>{var _=Array.isArray;g.exports=_}),En=o((d,g)=>{var _=9007199254740991;function S(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=_}g.exports=S}),$n=o((d,g)=>{var _=B(),S=En();function P(V){return V!=null&&S(V.length)&&!_(V)}g.exports=P}),Sn=o((d,g)=>{var _=$n(),S=At();function P(V){return S(V)&&_(V)}g.exports=P}),an=o((d,g)=>{function _(){return!1}g.exports=_}),mn=o((d,g)=>{var _=de(),S=an(),P=typeof d=="object"&&d&&!d.nodeType&&d,V=P&&typeof g=="object"&&g&&!g.nodeType&&g,te=V&&V.exports===P,se=te?_.Buffer:void 0,ye=se?se.isBuffer:void 0,Ee=ye||S;g.exports=Ee}),tr=o((d,g)=>{var _=J(),S=Qe(),P=At(),V="[object Object]",te=Function.prototype,se=Object.prototype,ye=te.toString,Ee=se.hasOwnProperty,nt=ye.call(Object);function Ye(_t){if(!P(_t)||_(_t)!=V)return!1;var Bt=S(_t);if(Bt===null)return!0;var tn=Ee.call(Bt,"constructor")&&Bt.constructor;return typeof tn=="function"&&tn instanceof tn&&ye.call(tn)==nt}g.exports=Ye}),ar=o((d,g)=>{var _=J(),S=En(),P=At(),V="[object Arguments]",te="[object Array]",se="[object Boolean]",ye="[object Date]",Ee="[object Error]",nt="[object Function]",Ye="[object Map]",_t="[object Number]",Bt="[object Object]",tn="[object RegExp]",_n="[object Set]",Mn="[object String]",cr="[object WeakMap]",tt="[object ArrayBuffer]",st="[object DataView]",pt="[object Float32Array]",$t="[object Float64Array]",Et="[object Int8Array]",Rt="[object Int16Array]",we="[object Int32Array]",Te="[object Uint8Array]",Ue="[object Uint8ClampedArray]",$e="[object Uint16Array]",Ge="[object Uint32Array]",qe={};qe[pt]=qe[$t]=qe[Et]=qe[Rt]=qe[we]=qe[Te]=qe[Ue]=qe[$e]=qe[Ge]=!0,qe[V]=qe[te]=qe[tt]=qe[se]=qe[st]=qe[ye]=qe[Ee]=qe[nt]=qe[Ye]=qe[_t]=qe[Bt]=qe[tn]=qe[_n]=qe[Mn]=qe[cr]=!1;function dt(ht){return P(ht)&&S(ht.length)&&!!qe[_(ht)]}g.exports=dt}),mr=o((d,g)=>{function _(S){return function(P){return S(P)}}g.exports=_}),zn=o((d,g)=>{var _=Q(),S=typeof d=="object"&&d&&!d.nodeType&&d,P=S&&typeof g=="object"&&g&&!g.nodeType&&g,V=P&&P.exports===S,te=V&&_.process,se=function(){try{var ye=P&&P.require&&P.require("util").types;return ye||te&&te.binding&&te.binding("util")}catch{}}();g.exports=se}),kr=o((d,g)=>{var _=ar(),S=mr(),P=zn(),V=P&&P.isTypedArray,te=V?S(V):_;g.exports=te}),as=o((d,g)=>{function _(S,P){if(!(P==="constructor"&&typeof S[P]=="function")&&P!="__proto__")return S[P]}g.exports=_}),Ni=o((d,g)=>{var _=je(),S=h(),P=Object.prototype,V=P.hasOwnProperty;function te(se,ye,Ee){var nt=se[ye];(!(V.call(se,ye)&&S(nt,Ee))||Ee===void 0&&!(ye in se))&&_(se,ye,Ee)}g.exports=te}),io=o((d,g)=>{var _=Ni(),S=je();function P(V,te,se,ye){var Ee=!se;se||(se={});for(var nt=-1,Ye=te.length;++nt<Ye;){var _t=te[nt],Bt=ye?ye(se[_t],V[_t],_t,se,V):void 0;Bt===void 0&&(Bt=V[_t]),Ee?S(se,_t,Bt):_(se,_t,Bt)}return se}g.exports=P}),Ps=o((d,g)=>{function _(S,P){for(var V=-1,te=Array(S);++V<S;)te[V]=P(V);return te}g.exports=_}),Zn=o((d,g)=>{var _=9007199254740991,S=/^(?:0|[1-9]\d*)$/;function P(V,te){var se=typeof V;return te=te??_,!!te&&(se=="number"||se!="symbol"&&S.test(V))&&V>-1&&V%1==0&&V<te}g.exports=P}),bt=o((d,g)=>{var _=Ps(),S=bn(),P=xn(),V=mn(),te=Zn(),se=kr(),ye=Object.prototype,Ee=ye.hasOwnProperty;function nt(Ye,_t){var Bt=P(Ye),tn=!Bt&&S(Ye),_n=!Bt&&!tn&&V(Ye),Mn=!Bt&&!tn&&!_n&&se(Ye),cr=Bt||tn||_n||Mn,tt=cr?_(Ye.length,String):[],st=tt.length;for(var pt in Ye)(_t||Ee.call(Ye,pt))&&!(cr&&(pt=="length"||_n&&(pt=="offset"||pt=="parent")||Mn&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||te(pt,st)))&&tt.push(pt);return tt}g.exports=nt}),rt=o((d,g)=>{function _(S){var P=[];if(S!=null)for(var V in Object(S))P.push(V);return P}g.exports=_}),Vt=o((d,g)=>{var _=U(),S=ot(),P=rt(),V=Object.prototype,te=V.hasOwnProperty;function se(ye){if(!_(ye))return P(ye);var Ee=S(ye),nt=[];for(var Ye in ye)Ye=="constructor"&&(Ee||!te.call(ye,Ye))||nt.push(Ye);return nt}g.exports=se}),Ln=o((d,g)=>{var _=bt(),S=Vt(),P=$n();function V(te){return P(te)?_(te,!0):S(te)}g.exports=V}),Kt=o((d,g)=>{var _=io(),S=Ln();function P(V){return _(V,S(V))}g.exports=P}),rn=o((d,g)=>{var _=Ke(),S=We(),P=Ct(),V=Xe(),te=it(),se=bn(),ye=xn(),Ee=Sn(),nt=mn(),Ye=B(),_t=U(),Bt=tr(),tn=kr(),_n=as(),Mn=Kt();function cr(tt,st,pt,$t,Et,Rt,we){var Te=_n(tt,pt),Ue=_n(st,pt),$e=we.get(Ue);if($e){_(tt,pt,$e);return}var Ge=Rt?Rt(Te,Ue,pt+"",tt,st,we):void 0,qe=Ge===void 0;if(qe){var dt=ye(Ue),ht=!dt&&nt(Ue),vt=!dt&&!ht&&tn(Ue);Ge=Ue,dt||ht||vt?ye(Te)?Ge=Te:Ee(Te)?Ge=V(Te):ht?(qe=!1,Ge=S(Ue,!0)):vt?(qe=!1,Ge=P(Ue,!0)):Ge=[]:Bt(Ue)||se(Ue)?(Ge=Te,se(Te)?Ge=Mn(Te):(!_t(Te)||Ye(Te))&&(Ge=te(Ue))):qe=!1}qe&&(we.set(Ue,Ge),Et(Ge,Ue,$t,Rt,we),we.delete(Ue)),_(tt,pt,Ge)}g.exports=cr}),Zt=o((d,g)=>{var _=Z(),S=Ke(),P=he(),V=rn(),te=U(),se=Ln(),ye=as();function Ee(nt,Ye,_t,Bt,tn){nt!==Ye&&P(Ye,function(_n,Mn){if(tn||(tn=new _),te(_n))V(nt,Ye,Mn,_t,Ee,Bt,tn);else{var cr=Bt?Bt(ye(nt,Mn),_n,Mn+"",nt,Ye,tn):void 0;cr===void 0&&(cr=_n),S(nt,Mn,cr)}},se)}g.exports=Ee}),qn=o((d,g)=>{function _(S){return S}g.exports=_}),St=o((d,g)=>{function _(S,P,V){switch(V.length){case 0:return S.call(P);case 1:return S.call(P,V[0]);case 2:return S.call(P,V[0],V[1]);case 3:return S.call(P,V[0],V[1],V[2])}return S.apply(P,V)}g.exports=_}),gn=o((d,g)=>{var _=St(),S=Math.max;function P(V,te,se){return te=S(te===void 0?V.length-1:te,0),function(){for(var ye=arguments,Ee=-1,nt=S(ye.length-te,0),Ye=Array(nt);++Ee<nt;)Ye[Ee]=ye[te+Ee];Ee=-1;for(var _t=Array(te+1);++Ee<te;)_t[Ee]=ye[Ee];return _t[te]=se(Ye),_(V,this,_t)}}g.exports=P}),nr=o((d,g)=>{function _(S){return function(){return S}}g.exports=_}),Vn=o((d,g)=>{var _=nr(),S=Ae(),P=qn(),V=S?function(te,se){return S(te,"toString",{configurable:!0,enumerable:!1,value:_(se),writable:!0})}:P;g.exports=V}),dr=o((d,g)=>{var _=800,S=16,P=Date.now;function V(te){var se=0,ye=0;return function(){var Ee=P(),nt=S-(Ee-ye);if(ye=Ee,nt>0){if(++se>=_)return arguments[0]}else se=0;return te.apply(void 0,arguments)}}g.exports=V}),Cn=o((d,g)=>{var _=Vn(),S=dr(),P=S(_);g.exports=P}),fn=o((d,g)=>{var _=qn(),S=gn(),P=Cn();function V(te,se){return P(S(te,se,_),te+"")}g.exports=V}),li=o((d,g)=>{var _=h(),S=$n(),P=Zn(),V=U();function te(se,ye,Ee){if(!V(Ee))return!1;var nt=typeof ye;return(nt=="number"?S(Ee)&&P(ye,Ee.length):nt=="string"&&ye in Ee)?_(Ee[ye],se):!1}g.exports=te}),Ci=o((d,g)=>{var _=fn(),S=li();function P(V){return _(function(te,se){var ye=-1,Ee=se.length,nt=Ee>1?se[Ee-1]:void 0,Ye=Ee>2?se[2]:void 0;for(nt=V.length>3&&typeof nt=="function"?(Ee--,nt):void 0,Ye&&S(se[0],se[1],Ye)&&(nt=Ee<3?void 0:nt,Ee=1),te=Object(te);++ye<Ee;){var _t=se[ye];_t&&V(te,_t,ye,nt)}return te})}g.exports=P}),Si=o((d,g)=>{var _=Zt(),S=Ci(),P=S(function(V,te,se){_(V,te,se)});g.exports=P}),Or=o((d,g)=>{var _=J(),S=At(),P="[object Symbol]";function V(te){return typeof te=="symbol"||S(te)&&_(te)==P}g.exports=V}),fr=o((d,g)=>{var _=xn(),S=Or(),P=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/;function te(se,ye){if(_(se))return!1;var Ee=typeof se;return Ee=="number"||Ee=="symbol"||Ee=="boolean"||se==null||S(se)?!0:V.test(se)||!P.test(se)||ye!=null&&se in Object(ye)}g.exports=te}),ls=o((d,g)=>{var _=me(),S="Expected a function";function P(V,te){if(typeof V!="function"||te!=null&&typeof te!="function")throw new TypeError(S);var se=function(){var ye=arguments,Ee=te?te.apply(this,ye):ye[0],nt=se.cache;if(nt.has(Ee))return nt.get(Ee);var Ye=V.apply(this,ye);return se.cache=nt.set(Ee,Ye)||nt,Ye};return se.cache=new(P.Cache||_),se}P.Cache=_,g.exports=P}),us=o((d,g)=>{var _=ls(),S=500;function P(V){var te=_(V,function(ye){return se.size===S&&se.clear(),ye}),se=te.cache;return te}g.exports=P}),Ai=o((d,g)=>{var _=us(),S=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,P=/\\(\\)?/g,V=_(function(te){var se=[];return te.charCodeAt(0)===46&&se.push(""),te.replace(S,function(ye,Ee,nt,Ye){se.push(nt?Ye.replace(P,"$1"):Ee||ye)}),se});g.exports=V}),ks=o((d,g)=>{function _(S,P){for(var V=-1,te=S==null?0:S.length,se=Array(te);++V<te;)se[V]=P(S[V],V,S);return se}g.exports=_}),bs=o((d,g)=>{var _=fe(),S=ks(),P=xn(),V=Or(),te=_?_.prototype:void 0,se=te?te.toString:void 0;function ye(Ee){if(typeof Ee=="string")return Ee;if(P(Ee))return S(Ee,ye)+"";if(V(Ee))return se?se.call(Ee):"";var nt=Ee+"";return nt=="0"&&1/Ee==-1/0?"-0":nt}g.exports=ye}),Ki=o((d,g)=>{var _=bs();function S(P){return P==null?"":_(P)}g.exports=S}),zs=o((d,g)=>{var _=xn(),S=fr(),P=Ai(),V=Ki();function te(se,ye){return _(se)?se:S(se,ye)?[se]:P(V(se))}g.exports=te}),Io=o((d,g)=>{var _=Or();function S(P){if(typeof P=="string"||_(P))return P;var V=P+"";return V=="0"&&1/P==-1/0?"-0":V}g.exports=S}),cs=o((d,g)=>{var _=zs(),S=Io();function P(V,te){te=_(te,V);for(var se=0,ye=te.length;V!=null&&se<ye;)V=V[S(te[se++])];return se&&se==ye?V:void 0}g.exports=P}),br=o((d,g)=>{var _=cs();function S(P,V,te){var se=P==null?void 0:_(P,V);return se===void 0?te:se}g.exports=S}),Tr=o((d,g)=>{(function(_,S){typeof d=="object"&&typeof g<"u"?g.exports=S():(_=_||self).RBush=S()})(d,function(){function _(tt,st,pt,$t,Et){(function Rt(we,Te,Ue,$e,Ge){for(;$e>Ue;){if($e-Ue>600){var qe=$e-Ue+1,dt=Te-Ue+1,ht=Math.log(qe),vt=.5*Math.exp(2*ht/3),Tt=.5*Math.sqrt(ht*vt*(qe-vt)/qe)*(dt-qe/2<0?-1:1),Dt=Math.max(Ue,Math.floor(Te-dt*vt/qe+Tt)),on=Math.min($e,Math.floor(Te+(qe-dt)*vt/qe+Tt));Rt(we,Te,Dt,on,Ge)}var Fn=we[Te],Un=Ue,Qn=$e;for(S(we,Ue,Te),Ge(we[$e],Fn)>0&&S(we,Ue,$e);Un<Qn;){for(S(we,Un,Qn),Un++,Qn--;Ge(we[Un],Fn)<0;)Un++;for(;Ge(we[Qn],Fn)>0;)Qn--}Ge(we[Ue],Fn)===0?S(we,Ue,Qn):S(we,++Qn,$e),Qn<=Te&&(Ue=Qn+1),Te<=Qn&&($e=Qn-1)}})(tt,st,pt||0,$t||tt.length-1,Et||P)}function S(tt,st,pt){var $t=tt[st];tt[st]=tt[pt],tt[pt]=$t}function P(tt,st){return tt<st?-1:tt>st?1:0}var V=function(tt){tt===void 0&&(tt=9),this._maxEntries=Math.max(4,tt),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function te(tt,st,pt){if(!pt)return st.indexOf(tt);for(var $t=0;$t<st.length;$t++)if(pt(tt,st[$t]))return $t;return-1}function se(tt,st){ye(tt,0,tt.children.length,st,tt)}function ye(tt,st,pt,$t,Et){Et||(Et=Mn(null)),Et.minX=1/0,Et.minY=1/0,Et.maxX=-1/0,Et.maxY=-1/0;for(var Rt=st;Rt<pt;Rt++){var we=tt.children[Rt];Ee(Et,tt.leaf?$t(we):we)}return Et}function Ee(tt,st){return tt.minX=Math.min(tt.minX,st.minX),tt.minY=Math.min(tt.minY,st.minY),tt.maxX=Math.max(tt.maxX,st.maxX),tt.maxY=Math.max(tt.maxY,st.maxY),tt}function nt(tt,st){return tt.minX-st.minX}function Ye(tt,st){return tt.minY-st.minY}function _t(tt){return(tt.maxX-tt.minX)*(tt.maxY-tt.minY)}function Bt(tt){return tt.maxX-tt.minX+(tt.maxY-tt.minY)}function tn(tt,st){return tt.minX<=st.minX&&tt.minY<=st.minY&&st.maxX<=tt.maxX&&st.maxY<=tt.maxY}function _n(tt,st){return st.minX<=tt.maxX&&st.minY<=tt.maxY&&st.maxX>=tt.minX&&st.maxY>=tt.minY}function Mn(tt){return{children:tt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function cr(tt,st,pt,$t,Et){for(var Rt=[st,pt];Rt.length;)if(!((pt=Rt.pop())-(st=Rt.pop())<=$t)){var we=st+Math.ceil((pt-st)/$t/2)*$t;_(tt,we,st,pt,Et),Rt.push(st,we,we,pt)}}return V.prototype.all=function(){return this._all(this.data,[])},V.prototype.search=function(tt){var st=this.data,pt=[];if(!_n(tt,st))return pt;for(var $t=this.toBBox,Et=[];st;){for(var Rt=0;Rt<st.children.length;Rt++){var we=st.children[Rt],Te=st.leaf?$t(we):we;_n(tt,Te)&&(st.leaf?pt.push(we):tn(tt,Te)?this._all(we,pt):Et.push(we))}st=Et.pop()}return pt},V.prototype.collides=function(tt){var st=this.data;if(!_n(tt,st))return!1;for(var pt=[];st;){for(var $t=0;$t<st.children.length;$t++){var Et=st.children[$t],Rt=st.leaf?this.toBBox(Et):Et;if(_n(tt,Rt)){if(st.leaf||tn(tt,Rt))return!0;pt.push(Et)}}st=pt.pop()}return!1},V.prototype.load=function(tt){if(!tt||!tt.length)return this;if(tt.length<this._minEntries){for(var st=0;st<tt.length;st++)this.insert(tt[st]);return this}var pt=this._build(tt.slice(),0,tt.length-1,0);if(this.data.children.length)if(this.data.height===pt.height)this._splitRoot(this.data,pt);else{if(this.data.height<pt.height){var $t=this.data;this.data=pt,pt=$t}this._insert(pt,this.data.height-pt.height-1,!0)}else this.data=pt;return this},V.prototype.insert=function(tt){return tt&&this._insert(tt,this.data.height-1),this},V.prototype.clear=function(){return this.data=Mn([]),this},V.prototype.remove=function(tt,st){if(!tt)return this;for(var pt,$t,Et,Rt=this.data,we=this.toBBox(tt),Te=[],Ue=[];Rt||Te.length;){if(Rt||(Rt=Te.pop(),$t=Te[Te.length-1],pt=Ue.pop(),Et=!0),Rt.leaf){var $e=te(tt,Rt.children,st);if($e!==-1)return Rt.children.splice($e,1),Te.push(Rt),this._condense(Te),this}Et||Rt.leaf||!tn(Rt,we)?$t?(pt++,Rt=$t.children[pt],Et=!1):Rt=null:(Te.push(Rt),Ue.push(pt),pt=0,$t=Rt,Rt=Rt.children[0])}return this},V.prototype.toBBox=function(tt){return tt},V.prototype.compareMinX=function(tt,st){return tt.minX-st.minX},V.prototype.compareMinY=function(tt,st){return tt.minY-st.minY},V.prototype.toJSON=function(){return this.data},V.prototype.fromJSON=function(tt){return this.data=tt,this},V.prototype._all=function(tt,st){for(var pt=[];tt;)tt.leaf?st.push.apply(st,tt.children):pt.push.apply(pt,tt.children),tt=pt.pop();return st},V.prototype._build=function(tt,st,pt,$t){var Et,Rt=pt-st+1,we=this._maxEntries;if(Rt<=we)return se(Et=Mn(tt.slice(st,pt+1)),this.toBBox),Et;$t||($t=Math.ceil(Math.log(Rt)/Math.log(we)),we=Math.ceil(Rt/Math.pow(we,$t-1))),(Et=Mn([])).leaf=!1,Et.height=$t;var Te=Math.ceil(Rt/we),Ue=Te*Math.ceil(Math.sqrt(we));cr(tt,st,pt,Ue,this.compareMinX);for(var $e=st;$e<=pt;$e+=Ue){var Ge=Math.min($e+Ue-1,pt);cr(tt,$e,Ge,Te,this.compareMinY);for(var qe=$e;qe<=Ge;qe+=Te){var dt=Math.min(qe+Te-1,Ge);Et.children.push(this._build(tt,qe,dt,$t-1))}}return se(Et,this.toBBox),Et},V.prototype._chooseSubtree=function(tt,st,pt,$t){for(;$t.push(st),!st.leaf&&$t.length-1!==pt;){for(var Et=1/0,Rt=1/0,we=void 0,Te=0;Te<st.children.length;Te++){var Ue=st.children[Te],$e=_t(Ue),Ge=(qe=tt,dt=Ue,(Math.max(dt.maxX,qe.maxX)-Math.min(dt.minX,qe.minX))*(Math.max(dt.maxY,qe.maxY)-Math.min(dt.minY,qe.minY))-$e);Ge<Rt?(Rt=Ge,Et=$e<Et?$e:Et,we=Ue):Ge===Rt&&$e<Et&&(Et=$e,we=Ue)}st=we||st.children[0]}var qe,dt;return st},V.prototype._insert=function(tt,st,pt){var $t=pt?tt:this.toBBox(tt),Et=[],Rt=this._chooseSubtree($t,this.data,st,Et);for(Rt.children.push(tt),Ee(Rt,$t);st>=0&&Et[st].children.length>this._maxEntries;)this._split(Et,st),st--;this._adjustParentBBoxes($t,Et,st)},V.prototype._split=function(tt,st){var pt=tt[st],$t=pt.children.length,Et=this._minEntries;this._chooseSplitAxis(pt,Et,$t);var Rt=this._chooseSplitIndex(pt,Et,$t),we=Mn(pt.children.splice(Rt,pt.children.length-Rt));we.height=pt.height,we.leaf=pt.leaf,se(pt,this.toBBox),se(we,this.toBBox),st?tt[st-1].children.push(we):this._splitRoot(pt,we)},V.prototype._splitRoot=function(tt,st){this.data=Mn([tt,st]),this.data.height=tt.height+1,this.data.leaf=!1,se(this.data,this.toBBox)},V.prototype._chooseSplitIndex=function(tt,st,pt){for(var $t,Et,Rt,we,Te,Ue,$e,Ge=1/0,qe=1/0,dt=st;dt<=pt-st;dt++){var ht=ye(tt,0,dt,this.toBBox),vt=ye(tt,dt,pt,this.toBBox),Tt=(Et=ht,Rt=vt,we=void 0,Te=void 0,Ue=void 0,$e=void 0,we=Math.max(Et.minX,Rt.minX),Te=Math.max(Et.minY,Rt.minY),Ue=Math.min(Et.maxX,Rt.maxX),$e=Math.min(Et.maxY,Rt.maxY),Math.max(0,Ue-we)*Math.max(0,$e-Te)),Dt=_t(ht)+_t(vt);Tt<Ge?(Ge=Tt,$t=dt,qe=Dt<qe?Dt:qe):Tt===Ge&&Dt<qe&&(qe=Dt,$t=dt)}return $t||pt-st},V.prototype._chooseSplitAxis=function(tt,st,pt){var $t=tt.leaf?this.compareMinX:nt,Et=tt.leaf?this.compareMinY:Ye;this._allDistMargin(tt,st,pt,$t)<this._allDistMargin(tt,st,pt,Et)&&tt.children.sort($t)},V.prototype._allDistMargin=function(tt,st,pt,$t){tt.children.sort($t);for(var Et=this.toBBox,Rt=ye(tt,0,st,Et),we=ye(tt,pt-st,pt,Et),Te=Bt(Rt)+Bt(we),Ue=st;Ue<pt-st;Ue++){var $e=tt.children[Ue];Ee(Rt,tt.leaf?Et($e):$e),Te+=Bt(Rt)}for(var Ge=pt-st-1;Ge>=st;Ge--){var qe=tt.children[Ge];Ee(we,tt.leaf?Et(qe):qe),Te+=Bt(we)}return Te},V.prototype._adjustParentBBoxes=function(tt,st,pt){for(var $t=pt;$t>=0;$t--)Ee(st[$t],tt)},V.prototype._condense=function(tt){for(var st=tt.length-1,pt=void 0;st>=0;st--)tt[st].children.length===0?st>0?(pt=tt[st-1].children).splice(pt.indexOf(tt[st]),1):this.clear():se(tt[st],this.toBBox)},V})}),pr=o(d=>{Object.defineProperty(d,"__esModule",{value:!0}),d.earthRadius=63710088e-1,d.factors={centimeters:d.earthRadius*100,centimetres:d.earthRadius*100,degrees:d.earthRadius/111325,feet:d.earthRadius*3.28084,inches:d.earthRadius*39.37,kilometers:d.earthRadius/1e3,kilometres:d.earthRadius/1e3,meters:d.earthRadius,metres:d.earthRadius,miles:d.earthRadius/1609.344,millimeters:d.earthRadius*1e3,millimetres:d.earthRadius*1e3,nauticalmiles:d.earthRadius/1852,radians:1,yards:d.earthRadius*1.0936},d.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/d.earthRadius,yards:1.0936133},d.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g($e,Ge,qe){qe===void 0&&(qe={});var dt={type:"Feature"};return(qe.id===0||qe.id)&&(dt.id=qe.id),qe.bbox&&(dt.bbox=qe.bbox),dt.properties=Ge||{},dt.geometry=$e,dt}d.feature=g;function _($e,Ge,qe){switch($e){case"Point":return S(Ge).geometry;case"LineString":return se(Ge).geometry;case"Polygon":return V(Ge).geometry;case"MultiPoint":return Ye(Ge).geometry;case"MultiLineString":return nt(Ge).geometry;case"MultiPolygon":return _t(Ge).geometry;default:throw new Error($e+" is invalid")}}d.geometry=_;function S($e,Ge,qe){if(qe===void 0&&(qe={}),!$e)throw new Error("coordinates is required");if(!Array.isArray($e))throw new Error("coordinates must be an Array");if($e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Rt($e[0])||!Rt($e[1]))throw new Error("coordinates must contain numbers");var dt={type:"Point",coordinates:$e};return g(dt,Ge,qe)}d.point=S;function P($e,Ge,qe){return qe===void 0&&(qe={}),Ee($e.map(function(dt){return S(dt,Ge)}),qe)}d.points=P;function V($e,Ge,qe){qe===void 0&&(qe={});for(var dt=0,ht=$e;dt<ht.length;dt++){var vt=ht[dt];if(vt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Tt=0;Tt<vt[vt.length-1].length;Tt++)if(vt[vt.length-1][Tt]!==vt[0][Tt])throw new Error("First and last Position are not equivalent.")}var Dt={type:"Polygon",coordinates:$e};return g(Dt,Ge,qe)}d.polygon=V;function te($e,Ge,qe){return qe===void 0&&(qe={}),Ee($e.map(function(dt){return V(dt,Ge)}),qe)}d.polygons=te;function se($e,Ge,qe){if(qe===void 0&&(qe={}),$e.length<2)throw new Error("coordinates must be an array of two or more positions");var dt={type:"LineString",coordinates:$e};return g(dt,Ge,qe)}d.lineString=se;function ye($e,Ge,qe){return qe===void 0&&(qe={}),Ee($e.map(function(dt){return se(dt,Ge)}),qe)}d.lineStrings=ye;function Ee($e,Ge){Ge===void 0&&(Ge={});var qe={type:"FeatureCollection"};return Ge.id&&(qe.id=Ge.id),Ge.bbox&&(qe.bbox=Ge.bbox),qe.features=$e,qe}d.featureCollection=Ee;function nt($e,Ge,qe){qe===void 0&&(qe={});var dt={type:"MultiLineString",coordinates:$e};return g(dt,Ge,qe)}d.multiLineString=nt;function Ye($e,Ge,qe){qe===void 0&&(qe={});var dt={type:"MultiPoint",coordinates:$e};return g(dt,Ge,qe)}d.multiPoint=Ye;function _t($e,Ge,qe){qe===void 0&&(qe={});var dt={type:"MultiPolygon",coordinates:$e};return g(dt,Ge,qe)}d.multiPolygon=_t;function Bt($e,Ge,qe){qe===void 0&&(qe={});var dt={type:"GeometryCollection",geometries:$e};return g(dt,Ge,qe)}d.geometryCollection=Bt;function tn($e,Ge){if(Ge===void 0&&(Ge=0),Ge&&!(Ge>=0))throw new Error("precision must be a positive number");var qe=Math.pow(10,Ge||0);return Math.round($e*qe)/qe}d.round=tn;function _n($e,Ge){Ge===void 0&&(Ge="kilometers");var qe=d.factors[Ge];if(!qe)throw new Error(Ge+" units is invalid");return $e*qe}d.radiansToLength=_n;function Mn($e,Ge){Ge===void 0&&(Ge="kilometers");var qe=d.factors[Ge];if(!qe)throw new Error(Ge+" units is invalid");return $e/qe}d.lengthToRadians=Mn;function cr($e,Ge){return st(Mn($e,Ge))}d.lengthToDegrees=cr;function tt($e){var Ge=$e%360;return Ge<0&&(Ge+=360),Ge}d.bearingToAzimuth=tt;function st($e){var Ge=$e%(2*Math.PI);return Ge*180/Math.PI}d.radiansToDegrees=st;function pt($e){var Ge=$e%360;return Ge*Math.PI/180}d.degreesToRadians=pt;function $t($e,Ge,qe){if(Ge===void 0&&(Ge="kilometers"),qe===void 0&&(qe="kilometers"),!($e>=0))throw new Error("length must be a positive number");return _n(Mn($e,Ge),qe)}d.convertLength=$t;function Et($e,Ge,qe){if(Ge===void 0&&(Ge="meters"),qe===void 0&&(qe="kilometers"),!($e>=0))throw new Error("area must be a positive number");var dt=d.areaFactors[Ge];if(!dt)throw new Error("invalid original units");var ht=d.areaFactors[qe];if(!ht)throw new Error("invalid final units");return $e/dt*ht}d.convertArea=Et;function Rt($e){return!isNaN($e)&&$e!==null&&!Array.isArray($e)}d.isNumber=Rt;function we($e){return!!$e&&$e.constructor===Object}d.isObject=we;function Te($e){if(!$e)throw new Error("bbox is required");if(!Array.isArray($e))throw new Error("bbox must be an Array");if($e.length!==4&&$e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");$e.forEach(function(Ge){if(!Rt(Ge))throw new Error("bbox must only contain numbers")})}d.validateBBox=Te;function Ue($e){if(!$e)throw new Error("id is required");if(["string","number"].indexOf(typeof $e)===-1)throw new Error("id must be a number or a string")}d.validateId=Ue}),ea=o(d=>{Object.defineProperty(d,"__esModule",{value:!0});var g=pr();function _(st,pt,$t){if(st!==null)for(var Et,Rt,we,Te,Ue,$e,Ge,qe=0,dt=0,ht,vt=st.type,Tt=vt==="FeatureCollection",Dt=vt==="Feature",on=Tt?st.features.length:1,Fn=0;Fn<on;Fn++){Ge=Tt?st.features[Fn].geometry:Dt?st.geometry:st,ht=Ge?Ge.type==="GeometryCollection":!1,Ue=ht?Ge.geometries.length:1;for(var Un=0;Un<Ue;Un++){var Qn=0,si=0;if(Te=ht?Ge.geometries[Un]:Ge,Te!==null){$e=Te.coordinates;var yi=Te.type;switch(qe=$t&&(yi==="Polygon"||yi==="MultiPolygon")?1:0,yi){case null:break;case"Point":if(pt($e,dt,Fn,Qn,si)===!1)return!1;dt++,Qn++;break;case"LineString":case"MultiPoint":for(Et=0;Et<$e.length;Et++){if(pt($e[Et],dt,Fn,Qn,si)===!1)return!1;dt++,yi==="MultiPoint"&&Qn++}yi==="LineString"&&Qn++;break;case"Polygon":case"MultiLineString":for(Et=0;Et<$e.length;Et++){for(Rt=0;Rt<$e[Et].length-qe;Rt++){if(pt($e[Et][Rt],dt,Fn,Qn,si)===!1)return!1;dt++}yi==="MultiLineString"&&Qn++,yi==="Polygon"&&si++}yi==="Polygon"&&Qn++;break;case"MultiPolygon":for(Et=0;Et<$e.length;Et++){for(si=0,Rt=0;Rt<$e[Et].length;Rt++){for(we=0;we<$e[Et][Rt].length-qe;we++){if(pt($e[Et][Rt][we],dt,Fn,Qn,si)===!1)return!1;dt++}si++}Qn++}break;case"GeometryCollection":for(Et=0;Et<Te.geometries.length;Et++)if(_(Te.geometries[Et],pt,$t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function S(st,pt,$t,Et){var Rt=$t;return _(st,function(we,Te,Ue,$e,Ge){Te===0&&$t===void 0?Rt=we:Rt=pt(Rt,we,Te,Ue,$e,Ge)},Et),Rt}function P(st,pt){var $t;switch(st.type){case"FeatureCollection":for($t=0;$t<st.features.length&&pt(st.features[$t].properties,$t)!==!1;$t++);break;case"Feature":pt(st.properties,0);break}}function V(st,pt,$t){var Et=$t;return P(st,function(Rt,we){we===0&&$t===void 0?Et=Rt:Et=pt(Et,Rt,we)}),Et}function te(st,pt){if(st.type==="Feature")pt(st,0);else if(st.type==="FeatureCollection")for(var $t=0;$t<st.features.length&&pt(st.features[$t],$t)!==!1;$t++);}function se(st,pt,$t){var Et=$t;return te(st,function(Rt,we){we===0&&$t===void 0?Et=Rt:Et=pt(Et,Rt,we)}),Et}function ye(st){var pt=[];return _(st,function($t){pt.push($t)}),pt}function Ee(st,pt){var $t,Et,Rt,we,Te,Ue,$e,Ge,qe,dt,ht=0,vt=st.type==="FeatureCollection",Tt=st.type==="Feature",Dt=vt?st.features.length:1;for($t=0;$t<Dt;$t++){for(Ue=vt?st.features[$t].geometry:Tt?st.geometry:st,Ge=vt?st.features[$t].properties:Tt?st.properties:{},qe=vt?st.features[$t].bbox:Tt?st.bbox:void 0,dt=vt?st.features[$t].id:Tt?st.id:void 0,$e=Ue?Ue.type==="GeometryCollection":!1,Te=$e?Ue.geometries.length:1,Rt=0;Rt<Te;Rt++){if(we=$e?Ue.geometries[Rt]:Ue,we===null){if(pt(null,ht,Ge,qe,dt)===!1)return!1;continue}switch(we.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(pt(we,ht,Ge,qe,dt)===!1)return!1;break}case"GeometryCollection":{for(Et=0;Et<we.geometries.length;Et++)if(pt(we.geometries[Et],ht,Ge,qe,dt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ht++}}function nt(st,pt,$t){var Et=$t;return Ee(st,function(Rt,we,Te,Ue,$e){we===0&&$t===void 0?Et=Rt:Et=pt(Et,Rt,we,Te,Ue,$e)}),Et}function Ye(st,pt){Ee(st,function($t,Et,Rt,we,Te){var Ue=$t===null?null:$t.type;switch(Ue){case null:case"Point":case"LineString":case"Polygon":return pt(g.feature($t,Rt,{bbox:we,id:Te}),Et,0)===!1?!1:void 0}var $e;switch(Ue){case"MultiPoint":$e="Point";break;case"MultiLineString":$e="LineString";break;case"MultiPolygon":$e="Polygon";break}for(var Ge=0;Ge<$t.coordinates.length;Ge++){var qe=$t.coordinates[Ge],dt={type:$e,coordinates:qe};if(pt(g.feature(dt,Rt),Et,Ge)===!1)return!1}})}function _t(st,pt,$t){var Et=$t;return Ye(st,function(Rt,we,Te){we===0&&Te===0&&$t===void 0?Et=Rt:Et=pt(Et,Rt,we,Te)}),Et}function Bt(st,pt){Ye(st,function($t,Et,Rt){var we=0;if($t.geometry){var Te=$t.geometry.type;if(!(Te==="Point"||Te==="MultiPoint")){var Ue,$e=0,Ge=0,qe=0;if(_($t,function(dt,ht,vt,Tt,Dt){if(Ue===void 0||Et>$e||Tt>Ge||Dt>qe){Ue=dt,$e=Et,Ge=Tt,qe=Dt,we=0;return}var on=g.lineString([Ue,dt],$t.properties);if(pt(on,Et,Rt,Dt,we)===!1)return!1;we++,Ue=dt})===!1)return!1}}})}function tn(st,pt,$t){var Et=$t,Rt=!1;return Bt(st,function(we,Te,Ue,$e,Ge){Rt===!1&&$t===void 0?Et=we:Et=pt(Et,we,Te,Ue,$e,Ge),Rt=!0}),Et}function _n(st,pt){if(!st)throw new Error("geojson is required");Ye(st,function($t,Et,Rt){if($t.geometry!==null){var we=$t.geometry.type,Te=$t.geometry.coordinates;switch(we){case"LineString":if(pt($t,Et,Rt,0,0)===!1)return!1;break;case"Polygon":for(var Ue=0;Ue<Te.length;Ue++)if(pt(g.lineString(Te[Ue],$t.properties),Et,Rt,Ue)===!1)return!1;break}}})}function Mn(st,pt,$t){var Et=$t;return _n(st,function(Rt,we,Te,Ue){we===0&&$t===void 0?Et=Rt:Et=pt(Et,Rt,we,Te,Ue)}),Et}function cr(st,pt){if(pt=pt||{},!g.isObject(pt))throw new Error("options is invalid");var $t=pt.featureIndex||0,Et=pt.multiFeatureIndex||0,Rt=pt.geometryIndex||0,we=pt.segmentIndex||0,Te=pt.properties,Ue;switch(st.type){case"FeatureCollection":$t<0&&($t=st.features.length+$t),Te=Te||st.features[$t].properties,Ue=st.features[$t].geometry;break;case"Feature":Te=Te||st.properties,Ue=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ue=st;break;default:throw new Error("geojson is invalid")}if(Ue===null)return null;var $e=Ue.coordinates;switch(Ue.type){case"Point":case"MultiPoint":return null;case"LineString":return we<0&&(we=$e.length+we-1),g.lineString([$e[we],$e[we+1]],Te,pt);case"Polygon":return Rt<0&&(Rt=$e.length+Rt),we<0&&(we=$e[Rt].length+we-1),g.lineString([$e[Rt][we],$e[Rt][we+1]],Te,pt);case"MultiLineString":return Et<0&&(Et=$e.length+Et),we<0&&(we=$e[Et].length+we-1),g.lineString([$e[Et][we],$e[Et][we+1]],Te,pt);case"MultiPolygon":return Et<0&&(Et=$e.length+Et),Rt<0&&(Rt=$e[Et].length+Rt),we<0&&(we=$e[Et][Rt].length-we-1),g.lineString([$e[Et][Rt][we],$e[Et][Rt][we+1]],Te,pt)}throw new Error("geojson is invalid")}function tt(st,pt){if(pt=pt||{},!g.isObject(pt))throw new Error("options is invalid");var $t=pt.featureIndex||0,Et=pt.multiFeatureIndex||0,Rt=pt.geometryIndex||0,we=pt.coordIndex||0,Te=pt.properties,Ue;switch(st.type){case"FeatureCollection":$t<0&&($t=st.features.length+$t),Te=Te||st.features[$t].properties,Ue=st.features[$t].geometry;break;case"Feature":Te=Te||st.properties,Ue=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Ue=st;break;default:throw new Error("geojson is invalid")}if(Ue===null)return null;var $e=Ue.coordinates;switch(Ue.type){case"Point":return g.point($e,Te,pt);case"MultiPoint":return Et<0&&(Et=$e.length+Et),g.point($e[Et],Te,pt);case"LineString":return we<0&&(we=$e.length+we),g.point($e[we],Te,pt);case"Polygon":return Rt<0&&(Rt=$e.length+Rt),we<0&&(we=$e[Rt].length+we),g.point($e[Rt][we],Te,pt);case"MultiLineString":return Et<0&&(Et=$e.length+Et),we<0&&(we=$e[Et].length+we),g.point($e[Et][we],Te,pt);case"MultiPolygon":return Et<0&&(Et=$e.length+Et),Rt<0&&(Rt=$e[Et].length+Rt),we<0&&(we=$e[Et][Rt].length-we),g.point($e[Et][Rt][we],Te,pt)}throw new Error("geojson is invalid")}d.coordAll=ye,d.coordEach=_,d.coordReduce=S,d.featureEach=te,d.featureReduce=se,d.findPoint=tt,d.findSegment=cr,d.flattenEach=Ye,d.flattenReduce=_t,d.geomEach=Ee,d.geomReduce=nt,d.lineEach=_n,d.lineReduce=Mn,d.propEach=P,d.propReduce=V,d.segmentEach=Bt,d.segmentReduce=tn}),lr=o(d=>{Object.defineProperty(d,"__esModule",{value:!0});var g=ea();function _(S){var P=[1/0,1/0,-1/0,-1/0];return g.coordEach(S,function(V){P[0]>V[0]&&(P[0]=V[0]),P[1]>V[1]&&(P[1]=V[1]),P[2]<V[0]&&(P[2]=V[0]),P[3]<V[1]&&(P[3]=V[1])}),P}_.default=_,d.default=_}),Ei=o((d,g)=>{var _=Tr(),S=pr(),P=ea(),V=lr().default,te=P.featureEach;P.coordEach,S.polygon;var se=S.featureCollection;function ye(Ee){var nt=new _(Ee);return nt.insert=function(Ye){if(Ye.type!=="Feature")throw new Error("invalid feature");return Ye.bbox=Ye.bbox?Ye.bbox:V(Ye),_.prototype.insert.call(this,Ye)},nt.load=function(Ye){var _t=[];return Array.isArray(Ye)?Ye.forEach(function(Bt){if(Bt.type!=="Feature")throw new Error("invalid features");Bt.bbox=Bt.bbox?Bt.bbox:V(Bt),_t.push(Bt)}):te(Ye,function(Bt){if(Bt.type!=="Feature")throw new Error("invalid features");Bt.bbox=Bt.bbox?Bt.bbox:V(Bt),_t.push(Bt)}),_.prototype.load.call(this,_t)},nt.remove=function(Ye,_t){if(Ye.type!=="Feature")throw new Error("invalid feature");return Ye.bbox=Ye.bbox?Ye.bbox:V(Ye),_.prototype.remove.call(this,Ye,_t)},nt.clear=function(){return _.prototype.clear.call(this)},nt.search=function(Ye){var _t=_.prototype.search.call(this,this.toBBox(Ye));return se(_t)},nt.collides=function(Ye){return _.prototype.collides.call(this,this.toBBox(Ye))},nt.all=function(){var Ye=_.prototype.all.call(this);return se(Ye)},nt.toJSON=function(){return _.prototype.toJSON.call(this)},nt.fromJSON=function(Ye){return _.prototype.fromJSON.call(this,Ye)},nt.toBBox=function(Ye){var _t;if(Ye.bbox)_t=Ye.bbox;else if(Array.isArray(Ye)&&Ye.length===4)_t=Ye;else if(Array.isArray(Ye)&&Ye.length===6)_t=[Ye[0],Ye[1],Ye[3],Ye[4]];else if(Ye.type==="Feature")_t=V(Ye);else if(Ye.type==="FeatureCollection")_t=V(Ye);else throw new Error("invalid geojson");return{minX:_t[0],minY:_t[1],maxX:_t[2],maxY:_t[3]}},nt}g.exports=ye,g.exports.default=ye});Array.prototype.findIndex=Array.prototype.findIndex||function(d){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,S=arguments[1],P=0;P<_;P++)if(d.call(S,g[P],P,g))return P;return-1},Array.prototype.find=Array.prototype.find||function(d){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,S=arguments[1],P=0;P<_;P++){var V=g[P];if(d.call(S,V,P,g))return V}},typeof Object.assign!="function"&&(Object.assign=function(d){if(d==null)throw new TypeError("Cannot convert undefined or null to object");d=Object(d);for(var g=1;g<arguments.length;g++){var _=arguments[g];if(_!=null)for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(d[S]=_[S])}return d}),function(d){d.forEach(function(g){g.hasOwnProperty("remove")||Object.defineProperty(g,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(d,g){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),S=_.length>>>0;if(S===0)return!1;var P=g|0,V=Math.max(P>=0?P:S-Math.abs(P),0);function te(se,ye){return se===ye||typeof se=="number"&&typeof ye=="number"&&isNaN(se)&&isNaN(ye)}for(;V<S;){if(te(_[V],d))return!0;V++}return!1}});var Zi={version:"2.18.3"},ur=l(Si()),ei={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},ol={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},$s={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Us={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Xu={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},El={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Da={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Hi={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},ta={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},al={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Bo={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},Eu={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ll={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Ju={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},na={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Oa={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},ul={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},ru={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},_s={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},Tc={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Mu={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},vr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},xr={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},ra={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Xr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Qu={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Ml={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Pl=ll,ia={en:ei,de:ol,it:$s,id:Us,ro:Xu,ru:El,es:Da,nl:Hi,fr:ta,pt:Pl,pt_br:Eu,pt_pt:ll,zh:al,zh_tw:Bo,pl:Ju,sv:na,el:Oa,hu:ul,da:ru,no:_s,fa:Tc,ua:Mu,tr:vr,cz:xr,ja:ra,fi:Xr,ko:Qu,ky:Ml},cl={_globalEditModeEnabled:!1,enableGlobalEditMode(d){let g={...d};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(d=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(d)},handleLayerAdditionInGlobalEditMode(){let d=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let g in d){let _=d[g];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:d}){this._addedLayersEdit[L.stamp(d)]=d},_isRelevantForEdit(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowEditing}},ec=cl,iu={_globalDragModeEnabled:!1,enableGlobalDragMode(){let d=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},d.forEach(g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let d=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,d.forEach(g=>{g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let d=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let g in d){let _=d[g];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:d}){this._addedLayersDrag[L.stamp(d)]=d},_isRelevantForDrag(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.draggable}},_r=iu,Fr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(d=>{this._isRelevantForRemoval(d)&&(d.pm.enabled()&&d.pm.disable(),d.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(d=>{d.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(d){let g=d.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let d=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let g in d){let _=d[g];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:d}){this._addedLayersRemoval[L.stamp(d)]=d}},dl=Fr,Dc={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(d=>d instanceof L.Polyline).forEach(d=>{this._isRelevantForRotate(d)&&d.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(d=>d instanceof L.Polyline).forEach(d=>{d.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(d){return d.pm&&d instanceof L.Polyline&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let d=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in d){let _=d[g];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:d}){this._addedLayersRotate[L.stamp(d)]=d}},su=Dc,Pu=l(Si()),kl={_fireDrawStart(d="Draw",g={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},d,g)},_fireDrawEnd(d="Draw",g={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},d,g)},_fireCreate(d,g="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:d,layer:d},g,_)},_fireCenterPlaced(d="Draw",g={}){let _=d==="Draw"?this._layer:void 0,S=d!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:S,latlng:this._layer.getLatLng()},d,g)},_fireCut(d,g,_,S="Draw",P={}){this.__fire(d,"pm:cut",{shape:this._shape,layer:g,originalLayer:_},S,P)},_fireEdit(d=this._layer,g="Edit",_={}){this.__fire(d,"pm:edit",{layer:this._layer,shape:this.getShape()},g,_)},_fireEnable(d="Edit",g={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},d,g)},_fireDisable(d="Edit",g={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},d,g)},_fireUpdate(d="Edit",g={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},d,g)},_fireMarkerDragStart(d,g=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:g},_,S)},_fireMarkerDrag(d,g=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:g},_,S)},_fireMarkerDragEnd(d,g=void 0,_=void 0,S="Edit",P={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:g,intersectionReset:_},S,P)},_fireDragStart(d="Edit",g={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},d,g)},_fireDrag(d,g="Edit",_={}){this.__fire(this._layer,"pm:drag",{...d,shape:this.getShape()},g,_)},_fireDragEnd(d="Edit",g={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},d,g)},_fireDragEnable(d="Edit",g={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},d,g)},_fireDragDisable(d="Edit",g={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},d,g)},_fireRemove(d,g=d,_="Edit",S={}){this.__fire(d,"pm:remove",{layer:g,shape:this.getShape()},_,S)},_fireVertexAdded(d,g,_,S="Edit",P={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:d,indexPath:g,latlng:_,shape:this.getShape()},S,P)},_fireVertexRemoved(d,g,_="Edit",S={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:d,indexPath:g,shape:this.getShape()},_,S)},_fireVertexClick(d,g,_="Edit",S={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:d,indexPath:g,shape:this.getShape()},_,S)},_fireIntersect(d,g=this._layer,_="Edit",S={}){this.__fire(g,"pm:intersect",{layer:this._layer,intersection:d,shape:this.getShape()},_,S)},_fireLayerReset(d,g,_="Edit",S={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:d,indexPath:g,shape:this.getShape()},_,S)},_fireChange(d,g="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:d,shape:this.getShape()},g,_)},_fireTextChange(d,g="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:d,shape:this.getShape()},g,_)},_fireTextFocus(d="Edit",g={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},d,g)},_fireTextBlur(d="Edit",g={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},d,g)},_fireSnapDrag(d,g,_="Snapping",S={}){this.__fire(d,"pm:snapdrag",g,_,S)},_fireSnap(d,g,_="Snapping",S={}){this.__fire(d,"pm:snap",g,_,S)},_fireUnsnap(d,g,_="Snapping",S={}){this.__fire(d,"pm:unsnap",g,_,S)},_fireRotationEnable(d,g,_="Rotation",S={}){this.__fire(d,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,S)},_fireRotationDisable(d,g="Rotation",_={}){this.__fire(d,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,_)},_fireRotationStart(d,g,_="Rotation",S={}){this.__fire(d,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},_,S)},_fireRotation(d,g,_,S=this._rotationLayer,P="Rotation",V={}){this.__fire(d,"pm:rotate",{layer:S,helpLayer:this._layer,startAngle:this._startAngle,angle:S.pm.getAngle(),angleDiff:g,oldLatLngs:_,newLatLngs:S.getLatLngs()},P,V)},_fireRotationEnd(d,g,_,S="Rotation",P={}){this.__fire(d,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},S,P)},_fireActionClick(d,g,_,S="Toolbar",P={}){this.__fire(this._map,"pm:actionclick",{text:d.text,action:d,btnName:g,button:_},S,P)},_fireButtonClick(d,g,_="Toolbar",S={}){this.__fire(this._map,"pm:buttonclick",{btnName:d,button:g},_,S)},_fireLangChange(d,g,_,S,P="Global",V={}){this.__fire(this.map,"pm:langchange",{oldLang:d,activeLang:g,fallback:_,translations:S},P,V)},_fireGlobalDragModeToggled(d,g="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:d,map:this.map},g,_)},_fireGlobalEditModeToggled(d,g="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:d,map:this.map},g,_)},_fireGlobalRemovalModeToggled(d,g="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:d,map:this.map},g,_)},_fireGlobalCutModeToggled(d="Global",g={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},d,g)},_fireGlobalDrawModeToggled(d="Global",g={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},d,g)},_fireGlobalRotateModeToggled(d="Global",g={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},d,g)},_fireRemoveLayerGroup(d,g=d,_="Edit",S={}){this.__fire(d,"pm:remove",{layer:g,shape:void 0},_,S)},_fireKeyeventEvent(d,g,_,S="Global",P={}){this.__fire(this.map,"pm:keyevent",{event:d,eventType:g,focusOn:_},S,P)},__fire(d,g,_,S,P={}){_=(0,Pu.default)(_,P,{source:S}),L.PM.Utils._fireEvent(d,g,_)}},ou=kl,ku=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(d){this.map=d,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),d.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(d){let g="document";this.map.getContainer().contains(d.target)&&(g="map");let _={event:d,eventType:d.type,focusOn:g};this._lastEvents[d.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(d,d.type,g)},_onBlur(d){d.altKey=!1;let g={event:d,eventType:d.type,focusOn:"document"};this._lastEvents[d.type]=g,this._lastEvents.current=g},getLastKeyEvent(d="current"){return this._lastEvents[d]},isShiftKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.shiftKey},isAltKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.altKey},isCtrlKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.ctrlKey},isMetaKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.metaKey},getPressedKey(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.key}}),Ur=ku,Ji=l(br());function sr(d){let g=L.PM.activeLang;return(0,Ji.default)(ia[g],d)||(0,Ji.default)(ia.en,d)||d}function Qi(d){for(let g=0;g<d.length;g+=1){let _=d[g];if(Array.isArray(_)){if(Qi(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function Al(d){return d.reduce((g,_)=>{if(_.length!==0){let S=Array.isArray(_)?Al(_):_;Array.isArray(S)?S.length!==0&&g.push(S):g.push(S)}return g},[])}function Na(d,g,_){let S={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:P,b:V,f:te}=S,se=d.lng,ye=d.lat,Ee=_,nt=Math.PI,Ye=g*nt/180,_t=Math.sin(Ye),Bt=Math.cos(Ye),tn=(1-te)*Math.tan(ye*nt/180),_n=1/Math.sqrt(1+tn*tn),Mn=tn*_n,cr=Math.atan2(tn,Bt),tt=_n*_t,st=1-tt*tt,pt=st*(P*P-V*V)/(V*V),$t=1+pt/16384*(4096+pt*(-768+pt*(320-175*pt))),Et=pt/1024*(256+pt*(-128+pt*(74-47*pt))),Rt=Ee/(V*$t),we=2*Math.PI,Te,Ue,$e;for(;Math.abs(Rt-we)>1e-12;){Te=Math.cos(2*cr+Rt),Ue=Math.sin(Rt),$e=Math.cos(Rt);let on=Et*Ue*(Te+Et/4*($e*(-1+2*Te*Te)-Et/6*Te*(-3+4*Ue*Ue)*(-3+4*Te*Te)));we=Rt,Rt=Ee/(V*$t)+on}let Ge=Mn*Ue-_n*$e*Bt,qe=Math.atan2(Mn*$e+_n*Ue*Bt,(1-te)*Math.sqrt(tt*tt+Ge*Ge)),dt=Math.atan2(Ue*_t,_n*$e-Mn*Ue*Bt),ht=te/16*st*(4+te*(4-3*st)),vt=dt-(1-ht)*te*tt*(Rt+ht*Ue*(Te+ht*$e*(-1+2*Te*Te))),Tt=se+vt*180/nt,Dt=qe*180/nt;return L.latLng(Tt,Dt)}function Ii(d,g,_,S,P=!0){let V,te,se,ye=[];for(let Ee=0;Ee<_;Ee+=1){if(P)V=Ee*360/_+S,te=Na(d,V,g),se=L.latLng(te.lng,te.lat);else{let nt=d.lat+Math.cos(2*Ee*Math.PI/_)*g,Ye=d.lng+Math.sin(2*Ee*Math.PI/_)*g;se=L.latLng(nt,Ye)}ye.push(se)}return ye}function Au(d,g,_){g=(g+360)%360;let S=Math.PI/180,P=180/Math.PI,{R:V}=L.CRS.Earth,te=d.lng*S,se=d.lat*S,ye=g*S,Ee=Math.sin(se),nt=Math.cos(se),Ye=Math.cos(_/V),_t=Math.sin(_/V),Bt=Math.asin(Ee*Ye+nt*_t*Math.cos(ye)),tn=te+Math.atan2(Math.sin(ye)*_t*nt,Ye-Ee*Math.sin(Bt));tn*=P;let _n=tn-360,Mn=tn<-180?tn+360:tn;return tn=tn>180?_n:Mn,L.latLng([Bt*P,tn])}function va(d,g,_){let S=d.latLngToContainerPoint(g),P=d.latLngToContainerPoint(_),V=Math.atan2(P.y-S.y,P.x-S.x)*180/Math.PI+90;return V+=V<0?360:0,V}function au(d,g,_,S){let P=va(d,g,_);return Au(g,P,S)}function lu(d,g,_="asc"){if(!g||Object.keys(g).length===0)return(ye,Ee)=>ye-Ee;let S=Object.keys(g),P,V=S.length-1,te={};for(;V>=0;)P=S[V],te[P.toLowerCase()]=g[P],V-=1;function se(ye){if(ye instanceof L.Marker)return"Marker";if(ye instanceof L.Circle)return"Circle";if(ye instanceof L.CircleMarker)return"CircleMarker";if(ye instanceof L.Rectangle)return"Rectangle";if(ye instanceof L.Polygon)return"Polygon";if(ye instanceof L.Polyline)return"Line"}return(ye,Ee)=>{let nt,Ye;if(nt=se(ye.layer).toLowerCase(),Ye=se(Ee.layer).toLowerCase(),!nt||!Ye)return 0;let _t=nt in te?te[nt]:Number.MAX_SAFE_INTEGER,Bt=Ye in te?te[Ye]:Number.MAX_SAFE_INTEGER,tn=0;return _t<Bt?tn=-1:_t>Bt&&(tn=1),_==="desc"?tn*-1:tn}}function Go(d,g=d.getLatLngs()){return d instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function uu(d,g){var _,S,P,V;if((S=(_=g.options.crs)==null?void 0:_.projection)!=null&&S.MAX_LATITUDE){let te=(V=(P=g.options.crs)==null?void 0:P.projection)==null?void 0:V.MAX_LATITUDE;d.lat=Math.max(Math.min(te,d.lat),-te)}return d}function ui(d){return d.options.renderer||d._map&&(d._map._getPaneRenderer(d.options.pane)||d._map.options.renderer||d._map._renderer)||d._renderer}var Oc=L.Class.extend({includes:[ec,_r,dl,su,ou],initialize(d){this.map=d,this.Draw=new L.PM.Draw(d),this.Toolbar=new L.PM.Toolbar(d),this.Keyboard=Ur(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(d)},setLang(d="en",g,_="en"){if(d=d.trim().toLowerCase(),!/^[a-z]{2}$/.test(d)){let P=d.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(P){let V=[`${P[1]}_${P[2]}`,`${P[1]}`];for(let te of V)if(ia[te]){d=te;break}}}let S=L.PM.activeLang;g&&(ia[d]=(0,ur.default)(ia[_],g)),L.PM.activeLang=d,this.map.pm.Toolbar.reinit(),this._fireLangChange(S,d,_,ia[d])},addControls(d){this.Toolbar.addControls(d)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(d="Polygon",g){d==="Poly"&&(d="Polygon"),this.Draw.enable(d,g)},disableDraw(d="Polygon"){d==="Poly"&&(d="Polygon"),this.Draw.disable(d)},setPathOptions(d,g={}){let _=g.ignoreShapes||[],S=g.merge||!1;this.map.pm.Draw.shapes.forEach(P=>{_.indexOf(P)===-1&&this.map.pm.Draw[P].setPathOptions(d,S)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(d){let g=(0,ur.default)(this.globalOptions,d);g.editable&&(g.resizeableCircleMarker=g.editable,delete g.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!g.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let S=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!g.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),S=!0),this.map.pm.Draw.shapes.forEach(P=>{this.map.pm.Draw[P].setOptions(g)}),_&&this.map.pm.Draw.CircleMarker.enable(),S&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(P=>{P.pm.setOptions(g)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=g,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.enabled()&&d.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(d){return this.Draw.Cut.enable(d)},toggleGlobalCutMode(d){return this.Draw.Cut.toggle(d)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(d=!1){let g=L.PM.Utils.findLayers(this.map);if(!d)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(S=>{_.addLayer(S)}),_},getGeomanDrawLayers(d=!1){let g=L.PM.Utils.findLayers(this.map).filter(S=>S._drawnByGeoman===!0);if(!d)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(S=>{_.addLayer(S)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(d){this._touchEventCounter===0&&(L.DomEvent.on(d,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(d,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(d){this._touchEventCounter===1&&(L.DomEvent.off(d,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(d,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(d){ui(this.map)._onMouseMove(this._createMouseEvent("mousemove",d))},_canvasTouchClick(d){let g="";d.type==="touchstart"||d.type==="pointerdown"?g="mousedown":(d.type==="touchend"||d.type==="pointerup"||d.type==="touchcancel"||d.type==="pointercancel")&&(g="mouseup"),g&&ui(this.map)._onClick(this._createMouseEvent(g,d))},_createMouseEvent(d,g){let _,S=g.touches[0]||g.changedTouches[0];try{_=new MouseEvent(d,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:S.detail,screenX:S.screenX,screenY:S.screenY,clientX:S.clientX,clientY:S.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(d,g.bubbles,g.cancelable,g.view,S.detail,S.screenX,S.screenY,S.clientX,S.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return _}}),As=Oc,sa=L.Control.extend({includes:[ou],options:{position:"topleft",disableByOtherButtons:!0},initialize(d){this._button=L.Util.extend({},this.options,d)},onAdd(d){return this._map=d,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let d=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),d?d.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(d){return typeof d=="boolean"?this._button.toggleStatus=d:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(d){d&&d.preventDefault(),!this._button.disabled&&(this._button.onClick(d,{button:this,event:d}),this._clicked(d),this._button.afterClick(d,{button:this,event:d}))},_makeButton(d){let g=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${g}`,this._container);d.title&&_.setAttribute("title",d.title);let S=L.DomUtil.create("a","leaflet-buttons-control-button",_);S.setAttribute("role","button"),S.setAttribute("tabindex","0"),S.href="#";let P=L.DomUtil.create("div",`leaflet-pm-actions-container ${g}`,_),V=d.actions,te={cancel:{text:sr("actions.cancel"),title:sr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:sr("actions.finish"),title:sr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:sr("actions.removeLastVertex"),title:sr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[d.jsClass]._removeLastVertex()}},finish:{text:sr("actions.finish"),title:sr("actions.finish"),onClick(ye){this._map.pm.Draw[d.jsClass]._finishShape(ye)}}};d._preparedActions=V.map(ye=>{let Ee=typeof ye=="string"?ye:ye.name,nt;if(te[Ee])nt=te[Ee];else if(ye.text)nt=ye;else return nt;let Ye=L.DomUtil.create("a",`leaflet-pm-action ${g} action-${Ee}`,P);if(Ye.setAttribute("role","button"),Ye.setAttribute("tabindex","0"),Ye.href="#",nt.title&&(Ye.title=nt.title),Ye.innerHTML=nt.text,L.DomEvent.disableClickPropagation(Ye),L.DomEvent.on(Ye,"click",L.DomEvent.stop),nt._node=Ye,!d.disabled&&nt.onClick){let _t=Bt=>{Bt.preventDefault();let tn="",{buttons:_n}=this._map.pm.Toolbar;for(let Mn in _n)if(_n[Mn]._button===d){tn=Mn;break}this._fireActionClick(nt,tn,d)};L.DomEvent.addListener(Ye,"click",_t,this),L.DomEvent.addListener(Ye,"click",nt.onClick,this),L.DomEvent.addListener(Ye,"click",()=>this._updateActiveAction(d))}return nt}),this._updateActiveAction(d),d.toggleStatus&&L.DomUtil.addClass(_,"active");let se=L.DomUtil.create("div","control-icon",S);return d.iconUrl&&se.setAttribute("src",d.iconUrl),d.className&&L.DomUtil.addClass(se,d.className),L.DomEvent.disableClickPropagation(S),L.DomEvent.on(S,"click",L.DomEvent.stop),d.disabled||(L.DomEvent.addListener(S,"click",this._onBtnClick,this),L.DomEvent.addListener(S,"click",this._triggerClick,this)),d.disabled&&(L.DomUtil.addClass(S,"pm-disabled"),S.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let d="",{buttons:g}=this._map.pm.Toolbar;for(let _ in g)if(g[_]._button===this._button){d=_;break}this._fireButtonClick(d,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let d="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,d),g.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(g,d),g.setAttribute("aria-disabled","false"))},_updateActiveAction(d){var g;(g=d._preparedActions)==null||g.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),cu=sa;L.Control.PMButton=cu;var oa=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(d){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(d)},reinit(){let d=this.isVisible;this.removeControls(),this._defineButtons(),d&&this.addControls()},init(d){this.map=d,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(d){let g=`${d}Container`;return this[g]||(this[g]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${d} leaflet-bar leaflet-control`)),this[g]},getButtons(){return this.buttons},addControls(d=this.options){typeof d.editPolygon<"u"&&(d.editMode=d.editPolygon),typeof d.deleteLayer<"u"&&(d.removalMode=d.deleteLayer),L.Util.setOptions(this,d),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let d=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in d){let S=d[_];L.Util.setOptions(S,{className:g.geomanIcons[_]})}},removeControls(){let d=this.getButtons();for(let g in d)d[g].remove();this.isVisible=!1},toggleControls(d=this.options){this.isVisible?this.removeControls():this.addControls(d)},_addButton(d,g){return this.buttons[d]=g,this.options[d]=!!this.options[d]||!1,this.buttons[d]},triggerClickOnToggledButtons(d){for(let g in this.buttons){let _=this.buttons[g];_._button.disableByOtherButtons&&_!==d&&_.toggled()&&_._triggerClick()}},toggleButton(d,g,_=!0){d==="editPolygon"&&(d="editMode"),d==="deleteLayer"&&(d="removalMode");let S=d;return _&&this.triggerClickOnToggledButtons(this.buttons[S]),this.buttons[S]?this.buttons[S].toggle(g):!1},_defineButtons(){let d={className:"control-icon leaflet-pm-icon-marker",title:sr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:sr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:sr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},S={title:sr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},P={title:sr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},V={title:sr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},te={title:sr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},se={title:sr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ye={title:sr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Ee={title:sr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},nt={title:sr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ye={className:"control-icon leaflet-pm-icon-text",title:sr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(d)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(V)),this._addButton("drawPolygon",new L.Control.PMButton(g)),this._addButton("drawCircle",new L.Control.PMButton(S)),this._addButton("drawCircleMarker",new L.Control.PMButton(P)),this._addButton("drawText",new L.Control.PMButton(Ye)),this._addButton("editMode",new L.Control.PMButton(te)),this._addButton("dragMode",new L.Control.PMButton(se)),this._addButton("cutPolygon",new L.Control.PMButton(ye)),this._addButton("removalMode",new L.Control.PMButton(Ee)),this._addButton("rotateMode",new L.Control.PMButton(nt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let d=this.getButtons(),g=[];this.options.drawControls===!1&&(g=g.concat(Object.keys(d).filter(_=>!d[_]._button.tool))),this.options.editControls===!1&&(g=g.concat(Object.keys(d).filter(_=>d[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(g=g.concat(Object.keys(d).filter(_=>d[_]._button.tool==="options"))),this.options.customControls===!1&&(g=g.concat(Object.keys(d).filter(_=>d[_]._button.tool==="custom")));for(let _ in d)if(this.options[_]&&g.indexOf(_)===-1){let S=d[_]._button.tool;S||(S="draw"),d[_].setPosition(this._getBtnPosition(S)),d[_].addTo(this.map)}},_getBtnPosition(d){return this.options.positions&&this.options.positions[d]?this.options.positions[d]:this.options.position},setBlockPosition(d,g){this.options.positions[d]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(d,g){if(g)typeof g!="object"&&(g={name:g});else throw new TypeError("Button has no name");let _=this._btnNameMapping(d);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");let S=this.map.pm.Draw.createNewDrawInstance(g.name,_);g={...this.buttons[_]._button,...g};let P=this.createCustomControl(g);return{drawInstance:S,control:P}},createCustomControl(d){if(!d.name)throw new TypeError("Button has no name");if(this.buttons[d.name])throw new TypeError("Button with this name already exists");d.onClick||(d.onClick=()=>{}),d.afterClick||(d.afterClick=()=>{}),d.toggle!==!1&&(d.toggle=!0),d.block&&(d.block=d.block.toLowerCase()),(!d.block||d.block==="draw")&&(d.block=""),d.className?d.className.indexOf("control-icon")===-1&&(d.className=`control-icon ${d.className}`):d.className="control-icon";let g={tool:d.block,className:d.className,title:d.title||"",jsClass:d.name,onClick:d.onClick,afterClick:d.afterClick,doToggle:d.toggle,toggleStatus:!1,disableOtherButtons:d.disableOtherButtons??!0,disableByOtherButtons:d.disableByOtherButtons??!0,cssToggle:d.toggle,position:this.options.position,actions:d.actions||[],disabled:!!d.disabled};this.options[d.name]!==!1&&(this.options[d.name]=!0);let _=this._addButton(d.name,new L.Control.PMButton(g));return this.changeControlOrder(),_},controlExists(d){return!!this.getButton(d)},getButton(d){return this.getButtons()[d]},getButtonsInBlock(d){let g={};if(d)for(let _ in this.getButtons()){let S=this.getButtons()[_];(S._button.tool===d||d==="draw"&&!S._button.tool)&&(g[_]=S)}return g},changeControlOrder(d=[]){let g=this._shapeMapping(),_=[];d.forEach(V=>{g[V]?_.push(g[V]):_.push(V)});let S=this.getButtons(),P={};_.forEach(V=>{S[V]&&(P[V]=S[V])}),Object.keys(S).filter(V=>!S[V]._button.tool||S[V]._button.tool==="draw").forEach(V=>{_.indexOf(V)===-1&&(P[V]=S[V])}),Object.keys(S).filter(V=>S[V]._button.tool==="edit").forEach(V=>{_.indexOf(V)===-1&&(P[V]=S[V])}),Object.keys(S).filter(V=>S[V]._button.tool==="options").forEach(V=>{_.indexOf(V)===-1&&(P[V]=S[V])}),Object.keys(S).filter(V=>S[V]._button.tool==="custom").forEach(V=>{_.indexOf(V)===-1&&(P[V]=S[V])}),Object.keys(S).forEach(V=>{_.indexOf(V)===-1&&(P[V]=S[V])}),this.map.pm.Toolbar.buttons=P,this._showHideButtons()},getControlOrder(){let d=this.getButtons(),g=[];for(let _ in d)g.push(_);return g},changeActionsOfControl(d,g){let _=this._btnNameMapping(d);if(!_)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=g,this.changeControlOrder()},setButtonDisabled(d,g){let _=this._btnNameMapping(d);g?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(d){let g=this._shapeMapping();return g[d]?g[d]:d}}),Tl=oa,Dl=l(Si()),ci={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(d){d.forEach(g=>{if(Array.isArray(g)){this._assignEvents(g);return}g.off("drag",this._handleSnapping,this),g.on("drag",this._handleSnapping,this),g.off("dragend",this._cleanupSnapping,this),g.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(d){if(d){let g=d.target;g._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(g=>{g.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(d){var se,ye,Ee;let g=d.target;if(g._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((se=d==null?void 0:d.originalEvent)==null?void 0:se.altKey)||((Ee=(ye=this._map)==null?void 0:ye.pm)==null?void 0:Ee.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(g.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let S=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,P;S?P=_.latlng:P=this._checkPrioritiySnapping(_);let V=this.options.snapDistance,te={marker:g,shape:this._shape,snapLatLng:P,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(te.marker,te),this._fireSnapDrag(this._layer,te),_.distance<V){g._orgLatLng=g.getLatLng(),g.setLatLng(P),g._snapped=!0,g._snapInfo=te;let nt=()=>{this._snapLatLng=P,this._fireSnap(g,te),this._fireSnap(this._layer,te)},Ye=this._snapLatLng||{},_t=P||{};(Ye.lat!==_t.lat||Ye.lng!==_t.lng)&&nt()}else this._snapLatLng&&(this._unsnap(te),g._snapped=!1,g._snapInfo=void 0,this._fireUnsnap(te.marker,te),this._fireUnsnap(this._layer,te));return!0},_createSnapList(){let d=[],g=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(S=>{if((S instanceof L.Polyline||S instanceof L.Marker||S instanceof L.CircleMarker||S instanceof L.ImageOverlay)&&S.options.snapIgnore!==!0){if(S.options.snapIgnore===void 0&&(!L.PM.optIn&&S.options.pmIgnore===!0||L.PM.optIn&&S.options.pmIgnore!==!1))return;(S instanceof L.Circle||S instanceof L.CircleMarker)&&S.pm&&S.pm._hiddenPolyCircle?d.push(S.pm._hiddenPolyCircle):S instanceof L.ImageOverlay&&(S=L.rectangle(S.getBounds())),d.push(S);let P=L.polyline([],{color:"red",pmIgnore:!0});P._pmTempLayer=!0,g.push(P),(S instanceof L.Circle||S instanceof L.CircleMarker)&&g.push(P)}}),d=d.filter(S=>this._layer!==S),d=d.filter(S=>S._latlng||S._latlngs&&Qi(S._latlngs)),d=d.filter(S=>!S._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let S=L.polyline([],{color:"red",pmIgnore:!0});S._pmTempLayer=!0,g.push(S)}),this._snapList=d.concat(this._otherSnapLayers)):this._snapList=d,this.debugIndicatorLines=g},_handleSnapLayerRemoval({layer:d}){if(!d._leaflet_id)return;let g=this._snapList.findIndex(_=>_._leaflet_id===d._leaflet_id);g>-1&&this._snapList.splice(g,1)},_calcClosestLayer(d,g){return this._calcClosestLayers(d,g,1)[0]},_calcClosestLayers(d,g,_=1){let S=[],P={};g.forEach((te,se)=>{var Ee;if(te._parentCopy&&te._parentCopy===this._layer||((Ee=te.getLatLngs)==null?void 0:Ee.call(te).flat(5).length)<2)return;let ye=this._calcLayerDistances(d,te);if(ye.distance=Math.floor(ye.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[se]){let nt=L.polyline([],{color:"red",pmIgnore:!0});nt._pmTempLayer=!0,this.debugIndicatorLines[se]=nt}this.debugIndicatorLines[se].setLatLngs([d,ye.latlng])}_===1&&(P.distance===void 0||ye.distance-5<=P.distance)?(ye.distance+5<P.distance&&(S=[]),P=ye,P.layer=te,S.push(P)):_!==1&&(P={},P=ye,P.layer=te,S.push(P))}),_!==1&&(S=S.sort((te,se)=>te.distance-se.distance)),_===-1&&(_=S.length);let V=this._getClosestLayerByPriority(S,_);return L.Util.isArray(V)?V:[V]},_calcLayerDistances(d,g){let _=this._map,S=g instanceof L.Marker||g instanceof L.CircleMarker,P=g instanceof L.Polygon,V=d;if(S){let te=g.getLatLng();return{latlng:{...te},distance:this._getDistance(_,te,V)}}return this._calcLatLngDistances(V,g.getLatLngs(),_,P)},_calcLatLngDistances(d,g,_,S=!1){let P,V,te,se=ye=>{ye.forEach((Ee,nt)=>{if(Array.isArray(Ee)){se(Ee);return}if(this.options.snapSegment){let Ye=Ee,_t;S?_t=nt+1===ye.length?0:nt+1:_t=nt+1===ye.length?void 0:nt+1;let Bt=ye[_t];if(Bt){let tn=this._getDistanceToSegment(_,d,Ye,Bt);(V===void 0||tn<V)&&(V=tn,te=[Ye,Bt])}}else{let Ye=this._getDistance(_,d,Ee);(V===void 0||Ye<V)&&(V=Ye,P=Ee)}})};return se(g),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,d,te[0],te[1])},segment:te,distance:V}:{latlng:P,distance:V}},_getClosestLayerByPriority(d,g=1){d=d.sort((te,se)=>te._leaflet_id-se._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],S=this._map.pm.globalOptions.snappingOrder||[],P=0,V={};return S.concat(_).forEach(te=>{V[te]||(P+=1,V[te]=P)}),d.sort(lu("instanceofShape",V)),g===1?d[0]||{}:d.slice(0,g)},_checkPrioritiySnapping(d){let g=this._map,_=d.segment[0],S=d.segment[1],P=d.latlng,V=P;if(this.options.snapVertex){let te=this._getDistance(g,_,P),se=this._getDistance(g,S,P),ye=te<se?_:S,Ee=te<se?te:se;if(this.options.snapMiddle){let Ye=L.PM.Utils.calcMiddleLatLng(g,_,S),_t=this._getDistance(g,Ye,P);_t<te&&_t<se&&(ye=Ye,Ee=_t)}let nt=this.options.snapDistance;Ee<nt&&(V=ye)}return{...V}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(d,g,_,S){let P=d.getMaxZoom();P===1/0&&(P=d.getZoom());let V=d.project(g,P),te=d.project(_,P),se=d.project(S,P),ye=L.LineUtil.closestPointOnSegment(V,te,se);return d.unproject(ye,P)},_getDistanceToSegment(d,g,_,S){let P=d.latLngToContainerPoint(g),V=d.latLngToContainerPoint(_),te=d.latLngToContainerPoint(S);return L.LineUtil.pointToSegmentDistance(P,V,te)},_getDistance(d,g,_){return d.latLngToContainerPoint(g).distanceTo(d.latLngToContainerPoint(_))}},Ro=ci,Ia=L.Class.extend({includes:[Ro,ou],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(d){L.Util.setOptions(this,d),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(d){let g=new L.Icon.Default;g.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=g,this._map=d,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(d,g=!1){g?this.options.pathOptions=(0,Dl.default)(this.options.pathOptions,d):this.options.pathOptions=d},getShapes(){return this.shapes},getShape(){return this._shape},enable(d,g){if(!d)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[d].enable(g)},disable(){this.shapes.forEach(d=>{this[d].disable()})},addControls(){this.shapes.forEach(d=>{this[d].addButton()})},getActiveShape(){let d;return this.shapes.forEach(g=>{this[g]._enabled&&(d=g)}),d},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let d=[];this._map.eachLayer(g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||d.push(g))}),this._enabled?d.forEach(g=>{L.PM.Utils.disablePopup(g)}):d.forEach(g=>{L.PM.Utils.enablePopup(g)})},createNewDrawInstance(d,g){let _=this._getShapeFromBtnName(g);if(this[d])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[d]=new L.PM.Draw[_](this._map),this[d].toolbarButtonName=d,this[d]._shape=d,this.shapes.push(d),this[g]&&this[d].setOptions(this[g].options),this[d].setOptions(this[d].options),this[d]},_getShapeFromBtnName(d){let g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[d]?g[d]:this[d]?this[d]._shape:d},_finishLayer(d){d.pm&&(d.pm.setOptions(this.options),d.pm._shape=this._shape,d.pm._map=this._map),this._addDrawnLayerProp(d)},_addDrawnLayerProp(d){d._drawnByGeoman=!0},_setPane(d,g){g==="layerPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),es=Ia;es.Marker=es.extend({initialize(d){this._map=d,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(g=>{this.isRelevantMarker(g)&&g.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},isRelevantMarker(d){return d instanceof L.Marker&&d.pm&&!d._pmTempLayer&&!d.pm._initTextMarker},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let g=d;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(d){if(!d.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),_=new L.Marker(g,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var d,g;(d=this.options.markerStyle)!=null&&d.icon&&((g=this._hintMarker)==null||g.setIcon(this.options.markerStyle.icon))}});var j=63710088e-1,xe={centimeters:j*100,centimetres:j*100,degrees:j/111325,feet:j*3.28084,inches:j*39.37,kilometers:j/1e3,kilometres:j/1e3,meters:j,metres:j,miles:j/1609.344,millimeters:j*1e3,millimetres:j*1e3,nauticalmiles:j/1852,radians:1,yards:j*1.0936};function et(d,g,_){_===void 0&&(_={});var S={type:"Feature"};return(_.id===0||_.id)&&(S.id=_.id),_.bbox&&(S.bbox=_.bbox),S.properties=g||{},S.geometry=d,S}function ft(d,g,_){if(_===void 0&&(_={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!gr(d[0])||!gr(d[1]))throw new Error("coordinates must contain numbers");var S={type:"Point",coordinates:d};return et(S,g,_)}function Pt(d,g,_){if(_===void 0&&(_={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");var S={type:"LineString",coordinates:d};return et(S,g,_)}function Ht(d,g){g===void 0&&(g={});var _={type:"FeatureCollection"};return g.id&&(_.id=g.id),g.bbox&&(_.bbox=g.bbox),_.features=d,_}function dn(d,g){g===void 0&&(g="kilometers");var _=xe[g];if(!_)throw new Error(g+" units is invalid");return d*_}function Nn(d,g){g===void 0&&(g="kilometers");var _=xe[g];if(!_)throw new Error(g+" units is invalid");return d/_}function Rn(d){var g=d%(2*Math.PI);return g*180/Math.PI}function rr(d){var g=d%360;return g*Math.PI/180}function gr(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function Nr(d){var g,_,S={type:"FeatureCollection",features:[]};if(d.type==="Feature"?_=d.geometry:_=d,_.type==="LineString")g=[_.coordinates];else if(_.type==="MultiLineString")g=_.coordinates;else if(_.type==="MultiPolygon")g=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")g=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return g.forEach(function(P){g.forEach(function(V){for(var te=0;te<P.length-1;te++)for(var se=te;se<V.length-1;se++)if(!(P===V&&(Math.abs(te-se)===1||te===0&&se===P.length-2&&P[te][0]===P[P.length-1][0]&&P[te][1]===P[P.length-1][1]))){var ye=Ti(P[te][0],P[te][1],P[te+1][0],P[te+1][1],V[se][0],V[se][1],V[se+1][0],V[se+1][1]);ye&&S.features.push(ft([ye[0],ye[1]]))}})}),S}function Ti(d,g,_,S,P,V,te,se){var ye,Ee,nt,Ye,_t,Bt={x:null,y:null,onLine1:!1,onLine2:!1};return ye=(se-V)*(_-d)-(te-P)*(S-g),ye===0?Bt.x!==null&&Bt.y!==null?Bt:!1:(Ee=g-V,nt=d-P,Ye=(te-P)*Ee-(se-V)*nt,_t=(_-d)*Ee-(S-g)*nt,Ee=Ye/ye,nt=_t/ye,Bt.x=d+Ee*(_-d),Bt.y=g+Ee*(S-g),Ee>=0&&Ee<=1&&(Bt.onLine1=!0),nt>=0&&nt<=1&&(Bt.onLine2=!0),Bt.onLine1&&Bt.onLine2?[Bt.x,Bt.y]:!1)}es.Line=es.extend({initialize(d){this._map=d,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_syncHintLine(){let d=this._layer.getLatLngs();if(d.length>0){let g=d[d.length-1];this._hintline.setLatLngs([g,this._hintMarker.getLatLng()])}},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let g=this._layer._defaultShape().slice();g.push(this._hintMarker.getLatLng()),this._change(g)},hasSelfIntersection(){return Nr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(d,g){let _=L.polyline(this._layer.getLatLngs());d&&(g||(g=this._hintMarker.getLatLng()),_.addLatLng(g));let S=Nr(_.toGeoJSON(15));this._doesSelfIntersect=S.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(S,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(d){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,d.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),S=_[_.length-1];if(g.equals(_[0])||_.length>0&&g.equals(S)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);let P=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(P,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(d)},_setHintLineAfterNewVertex(d){this._hintline.setLatLngs([d,d])},_removeLastVertex(){let d=this._markers;if(d.length<=1){this.disable();return}let g=this._layer.getLatLngs(),_=d[d.length-1],{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(d,_);d.pop(),this._layerGroup.removeLayer(_);let P=d[d.length-1],V=g.indexOf(P.getLatLng());g=g.slice(0,V+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,S,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=1)return;let g=L.polyline(d,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(d){let g=new L.Marker(d,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText(){let{length:d}=this._layer.getLatLngs().flat(),g="";d<=1?g=sr("tooltips.continueLine"):g=sr("tooltips.finishLine"),this._hintMarker.setTooltipContent(g)},_change(d){this._fireChange(d,"Draw")},setStyle(){var d,g;(d=this._layer)==null||d.setStyle(this.options.templineStyle),(g=this._hintline)==null||g.setStyle(this.options.hintlineStyle)}}),es.Polygon=es.Line.extend({initialize(d){this._map=d,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(d){L.PM.Draw.Line.prototype.enable.call(this,d),this._layer.pm._shape="Polygon"},_createMarker(d){let g=new L.Marker(d,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),this._layer.getLatLngs().flat().length===1?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",()=>1),g},_setTooltipText(){let{length:d}=this._layer.getLatLngs().flat(),g="";d<=2?g=sr("tooltips.continueLine"):g=sr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(g)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=2)return;let g=L.polygon(d,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),es.Rectangle=es.extend({initialize(d){this._map=d,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(d){if(L.Util.setOptions(this,d),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let g=0;g<2;g+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_placeStartingMarkers(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(sr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let d=this._startMarker.getLatLng();d&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([d,d]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}let g=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(g,"Draw")},_syncRectangleSize(){let d=uu(this._startMarker.getLatLng(),this._map),g=uu(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(d,g,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let S=[];_.forEach(P=>{!P.equals(d,1e-8)&&!P.equals(g,1e-8)&&S.push(P)}),S.forEach((P,V)=>{try{this._styleMarkers[V].setLatLng(P)}catch{}})}},_findCorners(){let d=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(d[0],d[2],this.options.rectangleAngle||0,this._map)},_finishShape(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(g))return;let S=L.rectangle([_,g],this.options.pathOptions);if(this.options.rectangleAngle){let V=L.PM.Utils._getRotatedRectangle(_,g,this.options.rectangleAngle||0,this._map);S.setLatLngs(V),S.pm&&S.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(S,"layerPane"),this._finishLayer(S),S.addTo(this._map.pm._getContainingLayer()),this._fireCreate(S);let P=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(P))},setStyle(){var d;(d=this._layer)==null||d.setStyle(this.options.pathOptions)}}),es.CircleMarker=es.extend({initialize(d){this._map=d,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(d){if(L.Util.setOptions(this,d),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let g={};L.extend(g,this.options.templineStyle),g.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),g),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.disable()})},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_placeCenterMarker(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let g=this._hintMarker.getLatLng();this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let d=this._centerMarker.getLatLng();d&&(this._layer.setLatLng(d),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(sr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let d=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([d,g])},_syncCircleRadius(){let d=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(d,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let g=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(g,"Draw")},isRelevantMarker(d){return d instanceof L.CircleMarker&&!(d instanceof L.Circle)&&d.pm&&!d._pmTempLayer},_createMarker(d){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!d.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(g,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(d){d.pm&&this.options.markerEditable&&d.pm.enable()},_finishShape(d){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let te=this._hintMarker.getLatLng();_=this._distanceCalculation(g,te),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let S={...this.options.pathOptions,radius:_},P=new this._BaseCircleClass(g,S);this._setPane(P,"layerPane"),this._finishLayer(P),P.addTo(this._map.pm._getContainingLayer()),P.pm&&P.pm._updateHiddenPolyCircle(),this._fireCreate(P);let V=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(V))},_getNewDestinationOfHintMarker(){let d=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return d;let g=this._centerMarker.getLatLng(),_=this._distanceCalculation(g,d);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?d=au(this._map,g,d,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(d=au(this._map,g,d,this._getMaxDistanceInMeter()))}return d},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let d=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(d,g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var g,_;let d={};L.extend(d,this.options.templineStyle),this.options[this._editableOption]&&(d.radius=0),(g=this._layer)==null||g.setStyle(d),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(d,g){return this._map.project(d).distanceTo(this._map.project(g))}}),es.Circle=es.CircleMarker.extend({initialize(d){this._map=d,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(d,g){return this._map.distance(d,g)}});function ri(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function di(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ts(d){return d.type==="Feature"?d.geometry:d}function ds(d,g){return d.type==="FeatureCollection"?"FeatureCollection":d.type==="GeometryCollection"?"GeometryCollection":d.type==="Feature"&&d.geometry!==null?d.geometry.type:d.type}function Fo(d,g,_){if(d!==null)for(var S,P,V,te,se,ye,Ee,nt=0,Ye=0,_t,Bt=d.type,tn=Bt==="FeatureCollection",_n=Bt==="Feature",Mn=tn?d.features.length:1,cr=0;cr<Mn;cr++){Ee=tn?d.features[cr].geometry:_n?d.geometry:d,_t=Ee?Ee.type==="GeometryCollection":!1,se=_t?Ee.geometries.length:1;for(var tt=0;tt<se;tt++){var st=0,pt=0;if(te=_t?Ee.geometries[tt]:Ee,te!==null){ye=te.coordinates;var $t=te.type;switch(nt=0,$t){case null:break;case"Point":if(g(ye,Ye,cr,st,pt)===!1)return!1;Ye++,st++;break;case"LineString":case"MultiPoint":for(S=0;S<ye.length;S++){if(g(ye[S],Ye,cr,st,pt)===!1)return!1;Ye++,$t==="MultiPoint"&&st++}$t==="LineString"&&st++;break;case"Polygon":case"MultiLineString":for(S=0;S<ye.length;S++){for(P=0;P<ye[S].length-nt;P++){if(g(ye[S][P],Ye,cr,st,pt)===!1)return!1;Ye++}$t==="MultiLineString"&&st++,$t==="Polygon"&&pt++}$t==="Polygon"&&st++;break;case"MultiPolygon":for(S=0;S<ye.length;S++){for(pt=0,P=0;P<ye[S].length;P++){for(V=0;V<ye[S][P].length-nt;V++){if(g(ye[S][P][V],Ye,cr,st,pt)===!1)return!1;Ye++}pt++}st++}break;case"GeometryCollection":for(S=0;S<te.geometries.length;S++)if(Fo(te.geometries[S],g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ir(d,g){if(d.type==="Feature")g(d,0);else if(d.type==="FeatureCollection")for(var _=0;_<d.features.length&&g(d.features[_],_)!==!1;_++);}function Vs(d,g,_){var S=_;return Ir(d,function(P,V){V===0&&_===void 0?S=P:S=g(S,P,V)}),S}function Ol(d,g){var _,S,P,V,te,se,ye,Ee,nt,Ye,_t=0,Bt=d.type==="FeatureCollection",tn=d.type==="Feature",_n=Bt?d.features.length:1;for(_=0;_<_n;_++){for(se=Bt?d.features[_].geometry:tn?d.geometry:d,Ee=Bt?d.features[_].properties:tn?d.properties:{},nt=Bt?d.features[_].bbox:tn?d.bbox:void 0,Ye=Bt?d.features[_].id:tn?d.id:void 0,ye=se?se.type==="GeometryCollection":!1,te=ye?se.geometries.length:1,P=0;P<te;P++){if(V=ye?se.geometries[P]:se,V===null){if(g(null,_t,Ee,nt,Ye)===!1)return!1;continue}switch(V.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(V,_t,Ee,nt,Ye)===!1)return!1;break}case"GeometryCollection":{for(S=0;S<V.geometries.length;S++)if(g(V.geometries[S],_t,Ee,nt,Ye)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}_t++}}function so(d,g){Ol(d,function(_,S,P,V,te){var se=_===null?null:_.type;switch(se){case null:case"Point":case"LineString":case"Polygon":return g(et(_,P,{bbox:V,id:te}),S,0)===!1?!1:void 0}var ye;switch(se){case"MultiPoint":ye="Point";break;case"MultiLineString":ye="LineString";break;case"MultiPolygon":ye="Polygon";break}for(var Ee=0;Ee<_.coordinates.length;Ee++){var nt=_.coordinates[Ee],Ye={type:ye,coordinates:nt};if(g(et(Ye,P),S,Ee)===!1)return!1}})}function Tu(d){if(!d)throw new Error("geojson is required");var g=[];return so(d,function(_){ya(_,g)}),Ht(g)}function ya(d,g){var _=[],S=d.geometry;if(S!==null){switch(S.type){case"Polygon":_=di(S);break;case"LineString":_=[di(S)]}_.forEach(function(P){var V=tc(P,d.properties);V.forEach(function(te){te.id=g.length,g.push(te)})})}}function tc(d,g){var _=[];return d.reduce(function(S,P){var V=Pt([S,P],g);return V.bbox=hl(S,P),_.push(V),P}),_}function hl(d,g){var _=d[0],S=d[1],P=g[0],V=g[1],te=_<P?_:P,se=S<V?S:V,ye=_>P?_:P,Ee=S>V?S:V;return[te,se,ye,Ee]}var fl=Tu,hs=l(Ei(),1);function ba(d,g){var _={},S=[];if(d.type==="LineString"&&(d=et(d)),g.type==="LineString"&&(g=et(g)),d.type==="Feature"&&g.type==="Feature"&&d.geometry!==null&&g.geometry!==null&&d.geometry.type==="LineString"&&g.geometry.type==="LineString"&&d.geometry.coordinates.length===2&&g.geometry.coordinates.length===2){var P=jo(d,g);return P&&S.push(P),Ht(S)}var V=(0,hs.default)();return V.load(fl(g)),Ir(fl(d),function(te){Ir(V.search(te),function(se){var ye=jo(te,se);if(ye){var Ee=di(ye).join(",");_[Ee]||(_[Ee]=!0,S.push(ye))}})}),Ht(S)}function jo(d,g){var _=di(d),S=di(g);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(S.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var P=_[0][0],V=_[0][1],te=_[1][0],se=_[1][1],ye=S[0][0],Ee=S[0][1],nt=S[1][0],Ye=S[1][1],_t=(Ye-Ee)*(te-P)-(nt-ye)*(se-V),Bt=(nt-ye)*(V-Ee)-(Ye-Ee)*(P-ye),tn=(te-P)*(V-Ee)-(se-V)*(P-ye);if(_t===0)return null;var _n=Bt/_t,Mn=tn/_t;if(_n>=0&&_n<=1&&Mn>=0&&Mn<=1){var cr=P+_n*(te-P),tt=V+_n*(se-V);return ft([cr,tt])}return null}var _o=ba,Nl=l(Ei(),1);function Hs(d,g,_){_===void 0&&(_={});var S=ri(d),P=ri(g),V=rr(P[1]-S[1]),te=rr(P[0]-S[0]),se=rr(S[1]),ye=rr(P[1]),Ee=Math.pow(Math.sin(V/2),2)+Math.pow(Math.sin(te/2),2)*Math.cos(se)*Math.cos(ye);return dn(2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee)),_.units)}var oo=Hs;function ao(d){var g=d[0],_=d[1],S=d[2],P=d[3],V=oo(d.slice(0,2),[S,_]),te=oo(d.slice(0,2),[g,P]);if(V>=te){var se=(_+P)/2;return[g,se-(S-g)/2,S,se+(S-g)/2]}else{var ye=(g+S)/2;return[ye-(P-_)/2,_,ye+(P-_)/2,P]}}var Nc=ao;function ws(d){var g=[1/0,1/0,-1/0,-1/0];return Fo(d,function(_){g[0]>_[0]&&(g[0]=_[0]),g[1]>_[1]&&(g[1]=_[1]),g[2]<_[0]&&(g[2]=_[0]),g[3]<_[1]&&(g[3]=_[1])}),g}ws.default=ws;var Ba=ws;function Gs(d,g){g===void 0&&(g={});var _=g.precision,S=g.coordinates,P=g.mutate;if(_=_==null||isNaN(_)?6:_,S=S==null||isNaN(S)?3:S,!d)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof S!="number")throw new Error("<coordinates> must be a number");(P===!1||P===void 0)&&(d=JSON.parse(JSON.stringify(d)));var V=Math.pow(10,_);return Fo(d,function(te){Ws(te,V,S)}),d}function Ws(d,g,_){d.length>_&&d.splice(_,d.length);for(var S=0;S<d.length;S++)d[S]=Math.round(d[S]*g)/g;return d}var Ra=Gs;function Fa(d,g,_){if(_===void 0&&(_={}),_.final===!0)return qs(d,g);var S=ri(d),P=ri(g),V=rr(S[0]),te=rr(P[0]),se=rr(S[1]),ye=rr(P[1]),Ee=Math.sin(te-V)*Math.cos(ye),nt=Math.cos(se)*Math.sin(ye)-Math.sin(se)*Math.cos(ye)*Math.cos(te-V);return Rn(Math.atan2(Ee,nt))}function qs(d,g){var _=Fa(g,d);return _=(_+180)%360,_}function Ts(d,g,_,S){S===void 0&&(S={});var P=ri(d),V=rr(P[0]),te=rr(P[1]),se=rr(_),ye=Nn(g,S.units),Ee=Math.asin(Math.sin(te)*Math.cos(ye)+Math.cos(te)*Math.sin(ye)*Math.cos(se)),nt=V+Math.atan2(Math.sin(se)*Math.sin(ye)*Math.cos(te),Math.cos(ye)-Math.sin(te)*Math.sin(Ee)),Ye=Rn(nt),_t=Rn(Ee);return ft([Ye,_t],S.properties)}function _a(d,g,_){_===void 0&&(_={});var S=ft([1/0,1/0],{dist:1/0}),P=0;return so(d,function(V){for(var te=di(V),se=0;se<te.length-1;se++){var ye=ft(te[se]);ye.properties.dist=oo(g,ye,_);var Ee=ft(te[se+1]);Ee.properties.dist=oo(g,Ee,_);var nt=oo(ye,Ee,_),Ye=Math.max(ye.properties.dist,Ee.properties.dist),_t=Fa(ye,Ee),Bt=Ts(g,Ye,_t+90,_),tn=Ts(g,Ye,_t-90,_),_n=_o(Pt([Bt.geometry.coordinates,tn.geometry.coordinates]),Pt([ye.geometry.coordinates,Ee.geometry.coordinates])),Mn=null;_n.features.length>0&&(Mn=_n.features[0],Mn.properties.dist=oo(g,Mn,_),Mn.properties.location=P+oo(ye,Mn,_)),ye.properties.dist<S.properties.dist&&(S=ye,S.properties.index=se,S.properties.location=P),Ee.properties.dist<S.properties.dist&&(S=Ee,S.properties.index=se+1,S.properties.location=P+nt),Mn&&Mn.properties.dist<S.properties.dist&&(S=Mn,S.properties.index=se),P+=nt}}),S}var zo=_a;function Ys(d,g){if(!d)throw new Error("line is required");if(!g)throw new Error("splitter is required");var _=ds(d),S=ds(g);if(_!=="LineString")throw new Error("line must be LineString");if(S==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(S==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var P=Ra(g,{precision:7});switch(S){case"Point":return Xt(d,P);case"MultiPoint":return Lt(d,P);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Lt(d,_o(d,P))}}function Lt(d,g){var _=[],S=(0,Nl.default)();return so(g,function(P){if(_.forEach(function(se,ye){se.id=ye}),!_.length)_=Xt(d,P).features,_.forEach(function(se){se.bbox||(se.bbox=Nc(Ba(se)))}),S.load(Ht(_));else{var V=S.search(P);if(V.features.length){var te=It(P,V);_=_.filter(function(se){return se.id!==te.id}),S.remove(te),Ir(Xt(te,P),function(se){_.push(se),S.insert(se)})}}}),Ht(_)}function Xt(d,g){var _=[],S=di(d)[0],P=di(d)[d.geometry.coordinates.length-1];if(Tn(S,ri(g))||Tn(P,ri(g)))return Ht([d]);var V=(0,Nl.default)(),te=fl(d);V.load(te);var se=V.search(g);if(!se.features.length)return Ht([d]);var ye=It(g,se),Ee=[S],nt=Vs(te,function(Ye,_t,Bt){var tn=di(_t)[1],_n=ri(g);return Bt===ye.id?(Ye.push(_n),_.push(Pt(Ye)),Tn(_n,tn)?[_n]:[_n,tn]):(Ye.push(tn),Ye)},Ee);return nt.length>1&&_.push(Pt(nt)),Ht(_)}function It(d,g){if(!g.features.length)throw new Error("lines must contain features");if(g.features.length===1)return g.features[0];var _,S=1/0;return Ir(g,function(P){var V=zo(P,d),te=V.properties.dist;te<S&&(_=P,S=te)}),_}function Tn(d,g){return d[0]===g[0]&&d[1]===g[1]}var Yn=Ys;function yr(d,g,_){if(_===void 0&&(_={}),!d)throw new Error("point is required");if(!g)throw new Error("polygon is required");var S=ri(d),P=ts(g),V=P.type,te=g.bbox,se=P.coordinates;if(te&&hi(S,te)===!1)return!1;V==="Polygon"&&(se=[se]);for(var ye=!1,Ee=0;Ee<se.length&&!ye;Ee++)if(Bi(S,se[Ee][0],_.ignoreBoundary)){for(var nt=!1,Ye=1;Ye<se[Ee].length&&!nt;)Bi(S,se[Ee][Ye],!_.ignoreBoundary)&&(nt=!0),Ye++;nt||(ye=!0)}return ye}function Bi(d,g,_){var S=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var P=0,V=g.length-1;P<g.length;V=P++){var te=g[P][0],se=g[P][1],ye=g[V][0],Ee=g[V][1],nt=d[1]*(te-ye)+se*(ye-d[0])+Ee*(d[0]-te)===0&&(te-d[0])*(ye-d[0])<=0&&(se-d[1])*(Ee-d[1])<=0;if(nt)return!_;var Ye=se>d[1]!=Ee>d[1]&&d[0]<(ye-te)*(d[1]-se)/(Ee-se)+te;Ye&&(S=!S)}return S}function hi(d,g){return g[0]<=d[0]&&g[1]<=d[1]&&g[2]>=d[0]&&g[3]>=d[1]}function du(d,g,_){_===void 0&&(_={});for(var S=ri(d),P=di(g),V=0;V<P.length-1;V++){var te=!1;if(_.ignoreEndVertices&&(V===0&&(te="start"),V===P.length-2&&(te="end"),V===0&&V+1===P.length-1&&(te="both")),lo(P[V],P[V+1],S,te,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function lo(d,g,_,S,P){var V=_[0],te=_[1],se=d[0],ye=d[1],Ee=g[0],nt=g[1],Ye=_[0]-se,_t=_[1]-ye,Bt=Ee-se,tn=nt-ye,_n=Ye*tn-_t*Bt;if(P!==null){if(Math.abs(_n)>P)return!1}else if(_n!==0)return!1;if(S){if(S==="start")return Math.abs(Bt)>=Math.abs(tn)?Bt>0?se<V&&V<=Ee:Ee<=V&&V<se:tn>0?ye<te&&te<=nt:nt<=te&&te<ye;if(S==="end")return Math.abs(Bt)>=Math.abs(tn)?Bt>0?se<=V&&V<Ee:Ee<V&&V<=se:tn>0?ye<=te&&te<nt:nt<te&&te<=ye;if(S==="both")return Math.abs(Bt)>=Math.abs(tn)?Bt>0?se<V&&V<Ee:Ee<V&&V<se:tn>0?ye<te&&te<nt:nt<te&&te<ye}else return Math.abs(Bt)>=Math.abs(tn)?Bt>0?se<=V&&V<=Ee:Ee<=V&&V<=se:tn>0?ye<=te&&te<=nt:nt<=te&&te<=ye;return!1}var Ri=du;function wa(d,g){var _=ts(d),S=ts(g),P=_.type,V=S.type,te=_.coordinates,se=S.coordinates;switch(P){case"Point":switch(V){case"Point":return vi(te,se);default:throw new Error("feature2 "+V+" geometry not supported")}case"MultiPoint":switch(V){case"Point":return ja(_,S);case"MultiPoint":return xa(_,S);default:throw new Error("feature2 "+V+" geometry not supported")}case"LineString":switch(V){case"Point":return Ri(S,_,{ignoreEndVertices:!0});case"LineString":return Vr(_,S);case"MultiPoint":return La(_,S);default:throw new Error("feature2 "+V+" geometry not supported")}case"Polygon":switch(V){case"Point":return yr(S,_,{ignoreBoundary:!0});case"LineString":return aa(_,S);case"Polygon":return Ds(_,S);case"MultiPoint":return Ca(_,S);default:throw new Error("feature2 "+V+" geometry not supported")}default:throw new Error("feature1 "+P+" geometry not supported")}}function ja(d,g){var _,S=!1;for(_=0;_<d.coordinates.length;_++)if(vi(d.coordinates[_],g.coordinates)){S=!0;break}return S}function xa(d,g){for(var _=0,S=g.coordinates;_<S.length;_++){for(var P=S[_],V=!1,te=0,se=d.coordinates;te<se.length;te++){var ye=se[te];if(vi(P,ye)){V=!0;break}}if(!V)return!1}return!0}function La(d,g){for(var _=!1,S=0,P=g.coordinates;S<P.length;S++){var V=P[S];if(Ri(V,d,{ignoreEndVertices:!0})&&(_=!0),!Ri(V,d))return!1}return!!_}function Ca(d,g){for(var _=0,S=g.coordinates;_<S.length;_++){var P=S[_];if(!yr(P,d,{ignoreBoundary:!0}))return!1}return!0}function Vr(d,g){for(var _=!1,S=0,P=g.coordinates;S<P.length;S++){var V=P[S];if(Ri({type:"Point",coordinates:V},d,{ignoreEndVertices:!0})&&(_=!0),!Ri({type:"Point",coordinates:V},d,{ignoreEndVertices:!1}))return!1}return _}function aa(d,g){var _=!1,S=0,P=Ba(d),V=Ba(g);if(!fi(P,V))return!1;for(S;S<g.coordinates.length-1;S++){var te=ns(g.coordinates[S],g.coordinates[S+1]);if(yr({type:"Point",coordinates:te},d,{ignoreBoundary:!0})){_=!0;break}}return _}function Ds(d,g){if(d.type==="Feature"&&d.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;var _=Ba(d),S=Ba(g);if(!fi(_,S))return!1;for(var P=ts(g).coordinates,V=0,te=P;V<te.length;V++)for(var se=te[V],ye=0,Ee=se;ye<Ee.length;ye++){var nt=Ee[ye];if(!yr(nt,d))return!1}return!0}function fi(d,g){return!(d[0]>g[0]||d[2]<g[2]||d[1]>g[1]||d[3]<g[3])}function vi(d,g){return d[0]===g[0]&&d[1]===g[1]}function ns(d,g){return[(d[0]+g[0])/2,(d[1]+g[1])/2]}var Mi=l(br()),$o=d=>()=>d,wo=d=>{let g=d?(_,S)=>S.minus(_).abs().isLessThanOrEqualTo(d):$o(!1);return(_,S)=>g(_,S)?0:_.comparedTo(S)};function Wo(d){let g=d?(_,S,P,V,te)=>_.exponentiatedBy(2).isLessThanOrEqualTo(V.minus(S).exponentiatedBy(2).plus(te.minus(P).exponentiatedBy(2)).times(d)):$o(!1);return(_,S,P)=>{let V=_.x,te=_.y,se=P.x,ye=P.y,Ee=te.minus(ye).times(S.x.minus(se)).minus(V.minus(se).times(S.y.minus(ye)));return g(Ee,V,te,se,ye)?0:Ee.comparedTo(0)}}var nc=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Sa=Math.ceil,fs=Math.floor,Li="[BigNumber Error] ",Ks=Li+"Number primitive has more than 15 significant digits: ",xo=1e14,hr=14,za=9007199254740991,$a=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],la=1e7,uo=1e9;function ud(d){var g,_,S,P=tt.prototype={constructor:tt,toString:null,valueOf:null},V=new tt(1),te=20,se=4,ye=-7,Ee=21,nt=-1e7,Ye=1e7,_t=!1,Bt=1,tn=0,_n={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Mn="0123456789abcdefghijklmnopqrstuvwxyz",cr=!0;function tt(we,Te){var Ue,$e,Ge,qe,dt,ht,vt,Tt,Dt=this;if(!(Dt instanceof tt))return new tt(we,Te);if(Te==null){if(we&&we._isBigNumber===!0){Dt.s=we.s,!we.c||we.e>Ye?Dt.c=Dt.e=null:we.e<nt?Dt.c=[Dt.e=0]:(Dt.e=we.e,Dt.c=we.c.slice());return}if((ht=typeof we=="number")&&we*0==0){if(Dt.s=1/we<0?(we=-we,-1):1,we===~~we){for(qe=0,dt=we;dt>=10;dt/=10,qe++);qe>Ye?Dt.c=Dt.e=null:(Dt.e=qe,Dt.c=[we]);return}Tt=String(we)}else{if(!nc.test(Tt=String(we)))return S(Dt,Tt,ht);Dt.s=Tt.charCodeAt(0)==45?(Tt=Tt.slice(1),-1):1}(qe=Tt.indexOf("."))>-1&&(Tt=Tt.replace(".","")),(dt=Tt.search(/e/i))>0?(qe<0&&(qe=dt),qe+=+Tt.slice(dt+1),Tt=Tt.substring(0,dt)):qe<0&&(qe=Tt.length)}else{if(c(Te,2,Mn.length,"Base"),Te==10&&cr)return Dt=new tt(we),Et(Dt,te+Dt.e+1,se);if(Tt=String(we),ht=typeof we=="number"){if(we*0!=0)return S(Dt,Tt,ht,Te);if(Dt.s=1/we<0?(Tt=Tt.slice(1),-1):1,tt.DEBUG&&Tt.replace(/^0\.0*|\./,"").length>15)throw Error(Ks+we)}else Dt.s=Tt.charCodeAt(0)===45?(Tt=Tt.slice(1),-1):1;for(Ue=Mn.slice(0,Te),qe=dt=0,vt=Tt.length;dt<vt;dt++)if(Ue.indexOf($e=Tt.charAt(dt))<0){if($e=="."){if(dt>qe){qe=vt;continue}}else if(!Ge&&(Tt==Tt.toUpperCase()&&(Tt=Tt.toLowerCase())||Tt==Tt.toLowerCase()&&(Tt=Tt.toUpperCase()))){Ge=!0,dt=-1,qe=0;continue}return S(Dt,String(we),ht,Te)}ht=!1,Tt=_(Tt,Te,10,Dt.s),(qe=Tt.indexOf("."))>-1?Tt=Tt.replace(".",""):qe=Tt.length}for(dt=0;Tt.charCodeAt(dt)===48;dt++);for(vt=Tt.length;Tt.charCodeAt(--vt)===48;);if(Tt=Tt.slice(dt,++vt)){if(vt-=dt,ht&&tt.DEBUG&&vt>15&&(we>za||we!==fs(we)))throw Error(Ks+Dt.s*we);if((qe=qe-dt-1)>Ye)Dt.c=Dt.e=null;else if(qe<nt)Dt.c=[Dt.e=0];else{if(Dt.e=qe,Dt.c=[],dt=(qe+1)%hr,qe<0&&(dt+=hr),dt<vt){for(dt&&Dt.c.push(+Tt.slice(0,dt)),vt-=hr;dt<vt;)Dt.c.push(+Tt.slice(dt,dt+=hr));dt=hr-(Tt=Tt.slice(dt)).length}else dt-=vt;for(;dt--;Tt+="0");Dt.c.push(+Tt)}}else Dt.c=[Dt.e=0]}tt.clone=ud,tt.ROUND_UP=0,tt.ROUND_DOWN=1,tt.ROUND_CEIL=2,tt.ROUND_FLOOR=3,tt.ROUND_HALF_UP=4,tt.ROUND_HALF_DOWN=5,tt.ROUND_HALF_EVEN=6,tt.ROUND_HALF_CEIL=7,tt.ROUND_HALF_FLOOR=8,tt.EUCLID=9,tt.config=tt.set=function(we){var Te,Ue;if(we!=null)if(typeof we=="object"){if(we.hasOwnProperty(Te="DECIMAL_PLACES")&&(Ue=we[Te],c(Ue,0,uo,Te),te=Ue),we.hasOwnProperty(Te="ROUNDING_MODE")&&(Ue=we[Te],c(Ue,0,8,Te),se=Ue),we.hasOwnProperty(Te="EXPONENTIAL_AT")&&(Ue=we[Te],Ue&&Ue.pop?(c(Ue[0],-1e9,0,Te),c(Ue[1],0,uo,Te),ye=Ue[0],Ee=Ue[1]):(c(Ue,-1e9,uo,Te),ye=-(Ee=Ue<0?-Ue:Ue))),we.hasOwnProperty(Te="RANGE"))if(Ue=we[Te],Ue&&Ue.pop)c(Ue[0],-1e9,-1,Te),c(Ue[1],1,uo,Te),nt=Ue[0],Ye=Ue[1];else if(c(Ue,-1e9,uo,Te),Ue)nt=-(Ye=Ue<0?-Ue:Ue);else throw Error(Li+Te+" cannot be zero: "+Ue);if(we.hasOwnProperty(Te="CRYPTO"))if(Ue=we[Te],Ue===!!Ue)if(Ue)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))_t=Ue;else throw _t=!Ue,Error(Li+"crypto unavailable");else _t=Ue;else throw Error(Li+Te+" not true or false: "+Ue);if(we.hasOwnProperty(Te="MODULO_MODE")&&(Ue=we[Te],c(Ue,0,9,Te),Bt=Ue),we.hasOwnProperty(Te="POW_PRECISION")&&(Ue=we[Te],c(Ue,0,uo,Te),tn=Ue),we.hasOwnProperty(Te="FORMAT"))if(Ue=we[Te],typeof Ue=="object")_n=Ue;else throw Error(Li+Te+" not an object: "+Ue);if(we.hasOwnProperty(Te="ALPHABET"))if(Ue=we[Te],typeof Ue=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Ue))cr=Ue.slice(0,10)=="0123456789",Mn=Ue;else throw Error(Li+Te+" invalid: "+Ue)}else throw Error(Li+"Object expected: "+we);return{DECIMAL_PLACES:te,ROUNDING_MODE:se,EXPONENTIAL_AT:[ye,Ee],RANGE:[nt,Ye],CRYPTO:_t,MODULO_MODE:Bt,POW_PRECISION:tn,FORMAT:_n,ALPHABET:Mn}},tt.isBigNumber=function(we){if(!we||we._isBigNumber!==!0)return!1;if(!tt.DEBUG)return!0;var Te,Ue,$e=we.c,Ge=we.e,qe=we.s;e:if({}.toString.call($e)=="[object Array]"){if((qe===1||qe===-1)&&Ge>=-1e9&&Ge<=uo&&Ge===fs(Ge)){if($e[0]===0){if(Ge===0&&$e.length===1)return!0;break e}if(Te=(Ge+1)%hr,Te<1&&(Te+=hr),String($e[0]).length==Te){for(Te=0;Te<$e.length;Te++)if(Ue=$e[Te],Ue<0||Ue>=xo||Ue!==fs(Ue))break e;if(Ue!==0)return!0}}}else if($e===null&&Ge===null&&(qe===null||qe===1||qe===-1))return!0;throw Error(Li+"Invalid BigNumber: "+we)},tt.maximum=tt.max=function(){return pt(arguments,-1)},tt.minimum=tt.min=function(){return pt(arguments,1)},tt.random=function(){var we=9007199254740992,Te=Math.random()*we&2097151?function(){return fs(Math.random()*we)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Ue){var $e,Ge,qe,dt,ht,vt=0,Tt=[],Dt=new tt(V);if(Ue==null?Ue=te:c(Ue,0,uo),dt=Sa(Ue/hr),_t)if(crypto.getRandomValues){for($e=crypto.getRandomValues(new Uint32Array(dt*=2));vt<dt;)ht=$e[vt]*131072+($e[vt+1]>>>11),ht>=9e15?(Ge=crypto.getRandomValues(new Uint32Array(2)),$e[vt]=Ge[0],$e[vt+1]=Ge[1]):(Tt.push(ht%1e14),vt+=2);vt=dt/2}else if(crypto.randomBytes){for($e=crypto.randomBytes(dt*=7);vt<dt;)ht=($e[vt]&31)*281474976710656+$e[vt+1]*1099511627776+$e[vt+2]*4294967296+$e[vt+3]*16777216+($e[vt+4]<<16)+($e[vt+5]<<8)+$e[vt+6],ht>=9e15?crypto.randomBytes(7).copy($e,vt):(Tt.push(ht%1e14),vt+=7);vt=dt/7}else throw _t=!1,Error(Li+"crypto unavailable");if(!_t)for(;vt<dt;)ht=Te(),ht<9e15&&(Tt[vt++]=ht%1e14);for(dt=Tt[--vt],Ue%=hr,dt&&Ue&&(ht=$a[hr-Ue],Tt[vt]=fs(dt/ht)*ht);Tt[vt]===0;Tt.pop(),vt--);if(vt<0)Tt=[qe=0];else{for(qe=-1;Tt[0]===0;Tt.splice(0,1),qe-=hr);for(vt=1,ht=Tt[0];ht>=10;ht/=10,vt++);vt<hr&&(qe-=hr-vt)}return Dt.e=qe,Dt.c=Tt,Dt}}(),tt.sum=function(){for(var we=1,Te=arguments,Ue=new tt(Te[0]);we<Te.length;)Ue=Ue.plus(Te[we++]);return Ue},_=function(){var we="0123456789";function Te(Ue,$e,Ge,qe){for(var dt,ht=[0],vt,Tt=0,Dt=Ue.length;Tt<Dt;){for(vt=ht.length;vt--;ht[vt]*=$e);for(ht[0]+=qe.indexOf(Ue.charAt(Tt++)),dt=0;dt<ht.length;dt++)ht[dt]>Ge-1&&(ht[dt+1]==null&&(ht[dt+1]=0),ht[dt+1]+=ht[dt]/Ge|0,ht[dt]%=Ge)}return ht.reverse()}return function(Ue,$e,Ge,qe,dt){var ht,vt,Tt,Dt,on,Fn,Un,Qn,si=Ue.indexOf("."),yi=te,Hr=se;for(si>=0&&(Dt=tn,tn=0,Ue=Ue.replace(".",""),Qn=new tt($e),Fn=Qn.pow(Ue.length-si),tn=Dt,Qn.c=Te(q(Ns(Fn.c),Fn.e,"0"),10,Ge,we),Qn.e=Qn.c.length),Un=Te(Ue,$e,Ge,dt?(ht=Mn,we):(ht=we,Mn)),Tt=Dt=Un.length;Un[--Dt]==0;Un.pop());if(!Un[0])return ht.charAt(0);if(si<0?--Tt:(Fn.c=Un,Fn.e=Tt,Fn.s=qe,Fn=g(Fn,Qn,yi,Hr,Ge),Un=Fn.c,on=Fn.r,Tt=Fn.e),vt=Tt+yi+1,si=Un[vt],Dt=Ge/2,on=on||vt<0||Un[vt+1]!=null,on=Hr<4?(si!=null||on)&&(Hr==0||Hr==(Fn.s<0?3:2)):si>Dt||si==Dt&&(Hr==4||on||Hr==6&&Un[vt-1]&1||Hr==(Fn.s<0?8:7)),vt<1||!Un[0])Ue=on?q(ht.charAt(1),-yi,ht.charAt(0)):ht.charAt(0);else{if(Un.length=vt,on)for(--Ge;++Un[--vt]>Ge;)Un[vt]=0,vt||(++Tt,Un=[1].concat(Un));for(Dt=Un.length;!Un[--Dt];);for(si=0,Ue="";si<=Dt;Ue+=ht.charAt(Un[si++]));Ue=q(Ue,Tt,ht.charAt(0))}return Ue}}(),g=function(){function we($e,Ge,qe){var dt,ht,vt,Tt,Dt=0,on=$e.length,Fn=Ge%la,Un=Ge/la|0;for($e=$e.slice();on--;)vt=$e[on]%la,Tt=$e[on]/la|0,dt=Un*vt+Tt*Fn,ht=Fn*vt+dt%la*la+Dt,Dt=(ht/qe|0)+(dt/la|0)+Un*Tt,$e[on]=ht%qe;return Dt&&($e=[Dt].concat($e)),$e}function Te($e,Ge,qe,dt){var ht,vt;if(qe!=dt)vt=qe>dt?1:-1;else for(ht=vt=0;ht<qe;ht++)if($e[ht]!=Ge[ht]){vt=$e[ht]>Ge[ht]?1:-1;break}return vt}function Ue($e,Ge,qe,dt){for(var ht=0;qe--;)$e[qe]-=ht,ht=$e[qe]<Ge[qe]?1:0,$e[qe]=ht*dt+$e[qe]-Ge[qe];for(;!$e[0]&&$e.length>1;$e.splice(0,1));}return function($e,Ge,qe,dt,ht){var vt,Tt,Dt,on,Fn,Un,Qn,si,yi,Hr,Pi,So,ic,Ma,Ih,gl,Bc,Pa=$e.s==Ge.s?1:-1,Xs=$e.c,rs=Ge.c;if(!Xs||!Xs[0]||!rs||!rs[0])return new tt(!$e.s||!Ge.s||(Xs?rs&&Xs[0]==rs[0]:!rs)?NaN:Xs&&Xs[0]==0||!rs?Pa*0:Pa/0);for(si=new tt(Pa),yi=si.c=[],Tt=$e.e-Ge.e,Pa=qe+Tt+1,ht||(ht=xo,Tt=Os($e.e/hr)-Os(Ge.e/hr),Pa=Pa/hr|0),Dt=0;rs[Dt]==(Xs[Dt]||0);Dt++);if(rs[Dt]>(Xs[Dt]||0)&&Tt--,Pa<0)yi.push(1),on=!0;else{for(Ma=Xs.length,gl=rs.length,Dt=0,Pa+=2,Fn=fs(ht/(rs[0]+1)),Fn>1&&(rs=we(rs,Fn,ht),Xs=we(Xs,Fn,ht),gl=rs.length,Ma=Xs.length),ic=gl,Hr=Xs.slice(0,gl),Pi=Hr.length;Pi<gl;Hr[Pi++]=0);Bc=rs.slice(),Bc=[0].concat(Bc),Ih=rs[0],rs[1]>=ht/2&&Ih++;do{if(Fn=0,vt=Te(rs,Hr,gl,Pi),vt<0){if(So=Hr[0],gl!=Pi&&(So=So*ht+(Hr[1]||0)),Fn=fs(So/Ih),Fn>1)for(Fn>=ht&&(Fn=ht-1),Un=we(rs,Fn,ht),Qn=Un.length,Pi=Hr.length;Te(Un,Hr,Qn,Pi)==1;)Fn--,Ue(Un,gl<Qn?Bc:rs,Qn,ht),Qn=Un.length,vt=1;else Fn==0&&(vt=Fn=1),Un=rs.slice(),Qn=Un.length;if(Qn<Pi&&(Un=[0].concat(Un)),Ue(Hr,Un,Pi,ht),Pi=Hr.length,vt==-1)for(;Te(rs,Hr,gl,Pi)<1;)Fn++,Ue(Hr,gl<Pi?Bc:rs,Pi,ht),Pi=Hr.length}else vt===0&&(Fn++,Hr=[0]);yi[Dt++]=Fn,Hr[0]?Hr[Pi++]=Xs[ic]||0:(Hr=[Xs[ic]],Pi=1)}while((ic++<Ma||Hr[0]!=null)&&Pa--);on=Hr[0]!=null,yi[0]||yi.splice(0,1)}if(ht==xo){for(Dt=1,Pa=yi[0];Pa>=10;Pa/=10,Dt++);Et(si,qe+(si.e=Dt+Tt*hr-1)+1,dt,on)}else si.e=Tt,si.r=+on;return si}}();function st(we,Te,Ue,$e){var Ge,qe,dt,ht,vt;if(Ue==null?Ue=se:c(Ue,0,8),!we.c)return we.toString();if(Ge=we.c[0],dt=we.e,Te==null)vt=Ns(we.c),vt=$e==1||$e==2&&(dt<=ye||dt>=Ee)?M(vt,dt):q(vt,dt,"0");else if(we=Et(new tt(we),Te,Ue),qe=we.e,vt=Ns(we.c),ht=vt.length,$e==1||$e==2&&(Te<=qe||qe<=ye)){for(;ht<Te;vt+="0",ht++);vt=M(vt,qe)}else if(Te-=dt,vt=q(vt,qe,"0"),qe+1>ht){if(--Te>0)for(vt+=".";Te--;vt+="0");}else if(Te+=qe-ht,Te>0)for(qe+1==ht&&(vt+=".");Te--;vt+="0");return we.s<0&&Ge?"-"+vt:vt}function pt(we,Te){for(var Ue,$e,Ge=1,qe=new tt(we[0]);Ge<we.length;Ge++)$e=new tt(we[Ge]),(!$e.s||(Ue=ua(qe,$e))===Te||Ue===0&&qe.s===Te)&&(qe=$e);return qe}function $t(we,Te,Ue){for(var $e=1,Ge=Te.length;!Te[--Ge];Te.pop());for(Ge=Te[0];Ge>=10;Ge/=10,$e++);return(Ue=$e+Ue*hr-1)>Ye?we.c=we.e=null:Ue<nt?we.c=[we.e=0]:(we.e=Ue,we.c=Te),we}S=function(){var we=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Te=/^([^.]+)\.$/,Ue=/^\.([^.]+)$/,$e=/^-?(Infinity|NaN)$/,Ge=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(qe,dt,ht,vt){var Tt,Dt=ht?dt:dt.replace(Ge,"");if($e.test(Dt))qe.s=isNaN(Dt)?null:Dt<0?-1:1;else{if(!ht&&(Dt=Dt.replace(we,function(on,Fn,Un){return Tt=(Un=Un.toLowerCase())=="x"?16:Un=="b"?2:8,!vt||vt==Tt?Fn:on}),vt&&(Tt=vt,Dt=Dt.replace(Te,"$1").replace(Ue,"0.$1")),dt!=Dt))return new tt(Dt,Tt);if(tt.DEBUG)throw Error(Li+"Not a"+(vt?" base "+vt:"")+" number: "+dt);qe.s=null}qe.c=qe.e=null}}();function Et(we,Te,Ue,$e){var Ge,qe,dt,ht,vt,Tt,Dt,on=we.c,Fn=$a;if(on){e:{for(Ge=1,ht=on[0];ht>=10;ht/=10,Ge++);if(qe=Te-Ge,qe<0)qe+=hr,dt=Te,vt=on[Tt=0],Dt=fs(vt/Fn[Ge-dt-1]%10);else if(Tt=Sa((qe+1)/hr),Tt>=on.length)if($e){for(;on.length<=Tt;on.push(0));vt=Dt=0,Ge=1,qe%=hr,dt=qe-hr+1}else break e;else{for(vt=ht=on[Tt],Ge=1;ht>=10;ht/=10,Ge++);qe%=hr,dt=qe-hr+Ge,Dt=dt<0?0:fs(vt/Fn[Ge-dt-1]%10)}if($e=$e||Te<0||on[Tt+1]!=null||(dt<0?vt:vt%Fn[Ge-dt-1]),$e=Ue<4?(Dt||$e)&&(Ue==0||Ue==(we.s<0?3:2)):Dt>5||Dt==5&&(Ue==4||$e||Ue==6&&(qe>0?dt>0?vt/Fn[Ge-dt]:0:on[Tt-1])%10&1||Ue==(we.s<0?8:7)),Te<1||!on[0])return on.length=0,$e?(Te-=we.e+1,on[0]=Fn[(hr-Te%hr)%hr],we.e=-Te||0):on[0]=we.e=0,we;if(qe==0?(on.length=Tt,ht=1,Tt--):(on.length=Tt+1,ht=Fn[hr-qe],on[Tt]=dt>0?fs(vt/Fn[Ge-dt]%Fn[dt])*ht:0),$e)for(;;)if(Tt==0){for(qe=1,dt=on[0];dt>=10;dt/=10,qe++);for(dt=on[0]+=ht,ht=1;dt>=10;dt/=10,ht++);qe!=ht&&(we.e++,on[0]==xo&&(on[0]=1));break}else{if(on[Tt]+=ht,on[Tt]!=xo)break;on[Tt--]=0,ht=1}for(qe=on.length;on[--qe]===0;on.pop());}we.e>Ye?we.c=we.e=null:we.e<nt&&(we.c=[we.e=0])}return we}function Rt(we){var Te,Ue=we.e;return Ue===null?we.toString():(Te=Ns(we.c),Te=Ue<=ye||Ue>=Ee?M(Te,Ue):q(Te,Ue,"0"),we.s<0?"-"+Te:Te)}return P.absoluteValue=P.abs=function(){var we=new tt(this);return we.s<0&&(we.s=1),we},P.comparedTo=function(we,Te){return ua(this,new tt(we,Te))},P.decimalPlaces=P.dp=function(we,Te){var Ue,$e,Ge,qe=this;if(we!=null)return c(we,0,uo),Te==null?Te=se:c(Te,0,8),Et(new tt(qe),we+qe.e+1,Te);if(!(Ue=qe.c))return null;if($e=((Ge=Ue.length-1)-Os(this.e/hr))*hr,Ge=Ue[Ge])for(;Ge%10==0;Ge/=10,$e--);return $e<0&&($e=0),$e},P.dividedBy=P.div=function(we,Te){return g(this,new tt(we,Te),te,se)},P.dividedToIntegerBy=P.idiv=function(we,Te){return g(this,new tt(we,Te),0,1)},P.exponentiatedBy=P.pow=function(we,Te){var Ue,$e,Ge,qe,dt,ht,vt,Tt,Dt,on=this;if(we=new tt(we),we.c&&!we.isInteger())throw Error(Li+"Exponent not an integer: "+Rt(we));if(Te!=null&&(Te=new tt(Te)),ht=we.e>14,!on.c||!on.c[0]||on.c[0]==1&&!on.e&&on.c.length==1||!we.c||!we.c[0])return Dt=new tt(Math.pow(+Rt(on),ht?we.s*(2-y(we)):+Rt(we))),Te?Dt.mod(Te):Dt;if(vt=we.s<0,Te){if(Te.c?!Te.c[0]:!Te.s)return new tt(NaN);$e=!vt&&on.isInteger()&&Te.isInteger(),$e&&(on=on.mod(Te))}else{if(we.e>9&&(on.e>0||on.e<-1||(on.e==0?on.c[0]>1||ht&&on.c[1]>=24e7:on.c[0]<8e13||ht&&on.c[0]<=9999975e7)))return qe=on.s<0&&y(we)?-0:0,on.e>-1&&(qe=1/qe),new tt(vt?1/qe:qe);tn&&(qe=Sa(tn/hr+2))}for(ht?(Ue=new tt(.5),vt&&(we.s=1),Tt=y(we)):(Ge=Math.abs(+Rt(we)),Tt=Ge%2),Dt=new tt(V);;){if(Tt){if(Dt=Dt.times(on),!Dt.c)break;qe?Dt.c.length>qe&&(Dt.c.length=qe):$e&&(Dt=Dt.mod(Te))}if(Ge){if(Ge=fs(Ge/2),Ge===0)break;Tt=Ge%2}else if(we=we.times(Ue),Et(we,we.e+1,1),we.e>14)Tt=y(we);else{if(Ge=+Rt(we),Ge===0)break;Tt=Ge%2}on=on.times(on),qe?on.c&&on.c.length>qe&&(on.c.length=qe):$e&&(on=on.mod(Te))}return $e?Dt:(vt&&(Dt=V.div(Dt)),Te?Dt.mod(Te):qe?Et(Dt,tn,se,dt):Dt)},P.integerValue=function(we){var Te=new tt(this);return we==null?we=se:c(we,0,8),Et(Te,Te.e+1,we)},P.isEqualTo=P.eq=function(we,Te){return ua(this,new tt(we,Te))===0},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(we,Te){return ua(this,new tt(we,Te))>0},P.isGreaterThanOrEqualTo=P.gte=function(we,Te){return(Te=ua(this,new tt(we,Te)))===1||Te===0},P.isInteger=function(){return!!this.c&&Os(this.e/hr)>this.c.length-2},P.isLessThan=P.lt=function(we,Te){return ua(this,new tt(we,Te))<0},P.isLessThanOrEqualTo=P.lte=function(we,Te){return(Te=ua(this,new tt(we,Te)))===-1||Te===0},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&this.c[0]==0},P.minus=function(we,Te){var Ue,$e,Ge,qe,dt=this,ht=dt.s;if(we=new tt(we,Te),Te=we.s,!ht||!Te)return new tt(NaN);if(ht!=Te)return we.s=-Te,dt.plus(we);var vt=dt.e/hr,Tt=we.e/hr,Dt=dt.c,on=we.c;if(!vt||!Tt){if(!Dt||!on)return Dt?(we.s=-Te,we):new tt(on?dt:NaN);if(!Dt[0]||!on[0])return on[0]?(we.s=-Te,we):new tt(Dt[0]?dt:se==3?-0:0)}if(vt=Os(vt),Tt=Os(Tt),Dt=Dt.slice(),ht=vt-Tt){for((qe=ht<0)?(ht=-ht,Ge=Dt):(Tt=vt,Ge=on),Ge.reverse(),Te=ht;Te--;Ge.push(0));Ge.reverse()}else for($e=(qe=(ht=Dt.length)<(Te=on.length))?ht:Te,ht=Te=0;Te<$e;Te++)if(Dt[Te]!=on[Te]){qe=Dt[Te]<on[Te];break}if(qe&&(Ge=Dt,Dt=on,on=Ge,we.s=-we.s),Te=($e=on.length)-(Ue=Dt.length),Te>0)for(;Te--;Dt[Ue++]=0);for(Te=xo-1;$e>ht;){if(Dt[--$e]<on[$e]){for(Ue=$e;Ue&&!Dt[--Ue];Dt[Ue]=Te);--Dt[Ue],Dt[$e]+=xo}Dt[$e]-=on[$e]}for(;Dt[0]==0;Dt.splice(0,1),--Tt);return Dt[0]?$t(we,Dt,Tt):(we.s=se==3?-1:1,we.c=[we.e=0],we)},P.modulo=P.mod=function(we,Te){var Ue,$e,Ge=this;return we=new tt(we,Te),!Ge.c||!we.s||we.c&&!we.c[0]?new tt(NaN):!we.c||Ge.c&&!Ge.c[0]?new tt(Ge):(Bt==9?($e=we.s,we.s=1,Ue=g(Ge,we,0,3),we.s=$e,Ue.s*=$e):Ue=g(Ge,we,0,Bt),we=Ge.minus(Ue.times(we)),!we.c[0]&&Bt==1&&(we.s=Ge.s),we)},P.multipliedBy=P.times=function(we,Te){var Ue,$e,Ge,qe,dt,ht,vt,Tt,Dt,on,Fn,Un,Qn,si,yi,Hr=this,Pi=Hr.c,So=(we=new tt(we,Te)).c;if(!Pi||!So||!Pi[0]||!So[0])return!Hr.s||!we.s||Pi&&!Pi[0]&&!So||So&&!So[0]&&!Pi?we.c=we.e=we.s=null:(we.s*=Hr.s,!Pi||!So?we.c=we.e=null:(we.c=[0],we.e=0)),we;for($e=Os(Hr.e/hr)+Os(we.e/hr),we.s*=Hr.s,vt=Pi.length,on=So.length,vt<on&&(Qn=Pi,Pi=So,So=Qn,Ge=vt,vt=on,on=Ge),Ge=vt+on,Qn=[];Ge--;Qn.push(0));for(si=xo,yi=la,Ge=on;--Ge>=0;){for(Ue=0,Fn=So[Ge]%yi,Un=So[Ge]/yi|0,dt=vt,qe=Ge+dt;qe>Ge;)Tt=Pi[--dt]%yi,Dt=Pi[dt]/yi|0,ht=Un*Tt+Dt*Fn,Tt=Fn*Tt+ht%yi*yi+Qn[qe]+Ue,Ue=(Tt/si|0)+(ht/yi|0)+Un*Dt,Qn[qe--]=Tt%si;Qn[qe]=Ue}return Ue?++$e:Qn.splice(0,1),$t(we,Qn,$e)},P.negated=function(){var we=new tt(this);return we.s=-we.s||null,we},P.plus=function(we,Te){var Ue,$e=this,Ge=$e.s;if(we=new tt(we,Te),Te=we.s,!Ge||!Te)return new tt(NaN);if(Ge!=Te)return we.s=-Te,$e.minus(we);var qe=$e.e/hr,dt=we.e/hr,ht=$e.c,vt=we.c;if(!qe||!dt){if(!ht||!vt)return new tt(Ge/0);if(!ht[0]||!vt[0])return vt[0]?we:new tt(ht[0]?$e:Ge*0)}if(qe=Os(qe),dt=Os(dt),ht=ht.slice(),Ge=qe-dt){for(Ge>0?(dt=qe,Ue=vt):(Ge=-Ge,Ue=ht),Ue.reverse();Ge--;Ue.push(0));Ue.reverse()}for(Ge=ht.length,Te=vt.length,Ge-Te<0&&(Ue=vt,vt=ht,ht=Ue,Te=Ge),Ge=0;Te;)Ge=(ht[--Te]=ht[Te]+vt[Te]+Ge)/xo|0,ht[Te]=xo===ht[Te]?0:ht[Te]%xo;return Ge&&(ht=[Ge].concat(ht),++dt),$t(we,ht,dt)},P.precision=P.sd=function(we,Te){var Ue,$e,Ge,qe=this;if(we!=null&&we!==!!we)return c(we,1,uo),Te==null?Te=se:c(Te,0,8),Et(new tt(qe),we,Te);if(!(Ue=qe.c))return null;if(Ge=Ue.length-1,$e=Ge*hr+1,Ge=Ue[Ge]){for(;Ge%10==0;Ge/=10,$e--);for(Ge=Ue[0];Ge>=10;Ge/=10,$e++);}return we&&qe.e+1>$e&&($e=qe.e+1),$e},P.shiftedBy=function(we){return c(we,-9007199254740991,za),this.times("1e"+we)},P.squareRoot=P.sqrt=function(){var we,Te,Ue,$e,Ge,qe=this,dt=qe.c,ht=qe.s,vt=qe.e,Tt=te+4,Dt=new tt("0.5");if(ht!==1||!dt||!dt[0])return new tt(!ht||ht<0&&(!dt||dt[0])?NaN:dt?qe:1/0);if(ht=Math.sqrt(+Rt(qe)),ht==0||ht==1/0?(Te=Ns(dt),(Te.length+vt)%2==0&&(Te+="0"),ht=Math.sqrt(+Te),vt=Os((vt+1)/2)-(vt<0||vt%2),ht==1/0?Te="5e"+vt:(Te=ht.toExponential(),Te=Te.slice(0,Te.indexOf("e")+1)+vt),Ue=new tt(Te)):Ue=new tt(ht+""),Ue.c[0]){for(vt=Ue.e,ht=vt+Tt,ht<3&&(ht=0);;)if(Ge=Ue,Ue=Dt.times(Ge.plus(g(qe,Ge,Tt,1))),Ns(Ge.c).slice(0,ht)===(Te=Ns(Ue.c)).slice(0,ht))if(Ue.e<vt&&--ht,Te=Te.slice(ht-3,ht+1),Te=="9999"||!$e&&Te=="4999"){if(!$e&&(Et(Ge,Ge.e+te+2,0),Ge.times(Ge).eq(qe))){Ue=Ge;break}Tt+=4,ht+=4,$e=1}else{(!+Te||!+Te.slice(1)&&Te.charAt(0)=="5")&&(Et(Ue,Ue.e+te+2,1),we=!Ue.times(Ue).eq(qe));break}}return Et(Ue,Ue.e+te+1,se,we)},P.toExponential=function(we,Te){return we!=null&&(c(we,0,uo),we++),st(this,we,Te,1)},P.toFixed=function(we,Te){return we!=null&&(c(we,0,uo),we=we+this.e+1),st(this,we,Te)},P.toFormat=function(we,Te,Ue){var $e,Ge=this;if(Ue==null)we!=null&&Te&&typeof Te=="object"?(Ue=Te,Te=null):we&&typeof we=="object"?(Ue=we,we=Te=null):Ue=_n;else if(typeof Ue!="object")throw Error(Li+"Argument not an object: "+Ue);if($e=Ge.toFixed(we,Te),Ge.c){var qe,dt=$e.split("."),ht=+Ue.groupSize,vt=+Ue.secondaryGroupSize,Tt=Ue.groupSeparator||"",Dt=dt[0],on=dt[1],Fn=Ge.s<0,Un=Fn?Dt.slice(1):Dt,Qn=Un.length;if(vt&&(qe=ht,ht=vt,vt=qe,Qn-=qe),ht>0&&Qn>0){for(qe=Qn%ht||ht,Dt=Un.substr(0,qe);qe<Qn;qe+=ht)Dt+=Tt+Un.substr(qe,ht);vt>0&&(Dt+=Tt+Un.slice(qe)),Fn&&(Dt="-"+Dt)}$e=on?Dt+(Ue.decimalSeparator||"")+((vt=+Ue.fractionGroupSize)?on.replace(new RegExp("\\d{"+vt+"}\\B","g"),"$&"+(Ue.fractionGroupSeparator||"")):on):Dt}return(Ue.prefix||"")+$e+(Ue.suffix||"")},P.toFraction=function(we){var Te,Ue,$e,Ge,qe,dt,ht,vt,Tt,Dt,on,Fn,Un=this,Qn=Un.c;if(we!=null&&(ht=new tt(we),!ht.isInteger()&&(ht.c||ht.s!==1)||ht.lt(V)))throw Error(Li+"Argument "+(ht.isInteger()?"out of range: ":"not an integer: ")+Rt(ht));if(!Qn)return new tt(Un);for(Te=new tt(V),Tt=Ue=new tt(V),$e=vt=new tt(V),Fn=Ns(Qn),qe=Te.e=Fn.length-Un.e-1,Te.c[0]=$a[(dt=qe%hr)<0?hr+dt:dt],we=!we||ht.comparedTo(Te)>0?qe>0?Te:Tt:ht,dt=Ye,Ye=1/0,ht=new tt(Fn),vt.c[0]=0;Dt=g(ht,Te,0,1),Ge=Ue.plus(Dt.times($e)),Ge.comparedTo(we)!=1;)Ue=$e,$e=Ge,Tt=vt.plus(Dt.times(Ge=Tt)),vt=Ge,Te=ht.minus(Dt.times(Ge=Te)),ht=Ge;return Ge=g(we.minus(Ue),$e,0,1),vt=vt.plus(Ge.times(Tt)),Ue=Ue.plus(Ge.times($e)),vt.s=Tt.s=Un.s,qe=qe*2,on=g(Tt,$e,qe,se).minus(Un).abs().comparedTo(g(vt,Ue,qe,se).minus(Un).abs())<1?[Tt,$e]:[vt,Ue],Ye=dt,on},P.toNumber=function(){return+Rt(this)},P.toPrecision=function(we,Te){return we!=null&&c(we,1,uo),st(this,we,Te,2)},P.toString=function(we){var Te,Ue=this,$e=Ue.s,Ge=Ue.e;return Ge===null?$e?(Te="Infinity",$e<0&&(Te="-"+Te)):Te="NaN":(we==null?Te=Ge<=ye||Ge>=Ee?M(Ns(Ue.c),Ge):q(Ns(Ue.c),Ge,"0"):we===10&&cr?(Ue=Et(new tt(Ue),te+Ge+1,se),Te=q(Ns(Ue.c),Ue.e,"0")):(c(we,2,Mn.length,"Base"),Te=_(q(Ns(Ue.c),Ge,"0"),10,we,$e,!0)),$e<0&&Ue.c[0]&&(Te="-"+Te)),Te},P.valueOf=P.toJSON=function(){return Rt(this)},P._isBigNumber=!0,P[Symbol.toStringTag]="BigNumber",P[Symbol.for("nodejs.util.inspect.custom")]=P.valueOf,d!=null&&tt.set(d),tt}function Os(d){var g=d|0;return d>0||d===g?g:g-1}function Ns(d){for(var g,_,S=1,P=d.length,V=d[0]+"";S<P;){for(g=d[S++]+"",_=hr-g.length;_--;g="0"+g);V+=g}for(P=V.length;V.charCodeAt(--P)===48;);return V.slice(0,P+1||1)}function ua(d,g){var _,S,P=d.c,V=g.c,te=d.s,se=g.s,ye=d.e,Ee=g.e;if(!te||!se)return null;if(_=P&&!P[0],S=V&&!V[0],_||S)return _?S?0:-se:te;if(te!=se)return te;if(_=te<0,S=ye==Ee,!P||!V)return S?0:!P^_?1:-1;if(!S)return ye>Ee^_?1:-1;for(se=(ye=P.length)<(Ee=V.length)?ye:Ee,te=0;te<se;te++)if(P[te]!=V[te])return P[te]>V[te]^_?1:-1;return ye==Ee?0:ye>Ee^_?1:-1}function c(d,g,_,S){if(d<g||d>_||d!==fs(d))throw Error(Li+(S||"Argument")+(typeof d=="number"?d<g||d>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(d))}function y(d){var g=d.c.length-1;return Os(d.e/hr)==g&&d.c[g]%2!=0}function M(d,g){return(d.length>1?d.charAt(0)+"."+d.slice(1):d)+(g<0?"e":"e+")+g}function q(d,g,_){var S,P;if(g<0){for(P=_+".";++g;P+=_);d=P+d}else if(S=d.length,++g>S){for(P=_,g-=S;--g;P+=_);d+=P}else g<S&&(d=d.slice(0,g)+"."+d.slice(g));return d}var ue=ud(),Pe=ue,ct=class{constructor(d){Je(this,"key");Je(this,"left",null);Je(this,"right",null);this.key=d}},Nt=class extends ct{constructor(d){super(d)}},Gt=class{constructor(){Je(this,"size",0);Je(this,"modificationCount",0);Je(this,"splayCount",0)}splay(d){let g=this.root;if(g==null)return this.compare(d,d),-1;let _=null,S=null,P=null,V=null,te=g,se=this.compare,ye;for(;;)if(ye=se(te.key,d),ye>0){let Ee=te.left;if(Ee==null||(ye=se(Ee.key,d),ye>0&&(te.left=Ee.right,Ee.right=te,te=Ee,Ee=te.left,Ee==null)))break;_==null?S=te:_.left=te,_=te,te=Ee}else if(ye<0){let Ee=te.right;if(Ee==null||(ye=se(Ee.key,d),ye<0&&(te.right=Ee.left,Ee.left=te,te=Ee,Ee=te.right,Ee==null)))break;P==null?V=te:P.right=te,P=te,te=Ee}else break;return P!=null&&(P.right=te.left,te.left=V),_!=null&&(_.left=te.right,te.right=S),this.root!==te&&(this.root=te,this.splayCount++),ye}splayMin(d){let g=d,_=g.left;for(;_!=null;){let S=_;g.left=S.right,S.right=g,g=S,_=g.left}return g}splayMax(d){let g=d,_=g.right;for(;_!=null;){let S=_;g.right=S.left,S.left=g,g=S,_=g.right}return g}_delete(d){if(this.root==null||this.splay(d)!=0)return null;let g=this.root,_=g,S=g.left;if(this.size--,S==null)this.root=g.right;else{let P=g.right;g=this.splayMax(S),g.right=P,this.root=g}return this.modificationCount++,_}addNewRoot(d,g){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=d;return}g<0?(d.left=_,d.right=_.right,_.right=null):(d.right=_,d.left=_.left,_.left=null),this.root=d}_first(){let d=this.root;return d==null?null:(this.root=this.splayMin(d),this.root)}_last(){let d=this.root;return d==null?null:(this.root=this.splayMax(d),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(d){return this.validKey(d)&&this.splay(d)==0}defaultCompare(){return(d,g)=>d<g?-1:d>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:d=>{this.root=d},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:d=>{this.splayCount=d},splay:d=>this.splay(d),has:d=>this.has(d)}}},ln=class Sg extends Gt{constructor(_,S){super();Je(this,"root",null);Je(this,"compare");Je(this,"validKey");Je(this,An,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=S??(P=>P!=null&&P!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let S of _)this.delete(S)}forEach(_){let S=this[Symbol.iterator](),P;for(;P=S.next(),!P.done;)_(P.value,P.value,this)}add(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Nt(_),S),this}addAndReturn(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Nt(_),S),this.root.key}addAll(_){for(let S of _)this.add(S)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let S=this.root.left;if(S==null)return null;let P=S.right;for(;P!=null;)S=P,P=S.right;return S.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let S=this.root.right;if(S==null)return null;let P=S.left;for(;P!=null;)S=P,P=S.left;return S.key}retainAll(_){let S=new Sg(this.compare,this.validKey),P=this.modificationCount;for(let V of _){if(P!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(V)&&this.splay(V)==0&&S.add(this.root.key)}S.size!=this.size&&(this.root=S.root,this.size=S.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let S=new Sg(this.compare,this.validKey);for(let P of this)_.has(P)&&S.add(P);return S}difference(_){let S=new Sg(this.compare,this.validKey);for(let P of this)_.has(P)||S.add(P);return S}union(_){let S=this.clone();return S.addAll(_),S}clone(){let _=new Sg(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function S(V,te){let se,ye;do{if(se=V.left,ye=V.right,se!=null){let Ee=new Nt(se.key);te.left=Ee,S(se,Ee)}if(ye!=null){let Ee=new Nt(ye.key);te.right=Ee,V=ye,te=Ee}}while(ye!=null)}let P=new Nt(_.key);return S(_,P),P}toSet(){return this.clone()}entries(){return new Dr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Jn=Symbol.iterator,An=Symbol.toStringTag,Jn)](){return new Xn(this.wrap())}},In=class{constructor(d){Je(this,"tree");Je(this,"path",new Array);Je(this,"modificationCount",null);Je(this,"splayCount");this.tree=d,this.splayCount=d.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let d=this.path[this.path.length-1];return this.getValue(d)}rebuildPath(d){this.path.splice(0,this.path.length),this.tree.splay(d),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(d){for(;d!=null;)this.path.push(d),d=d.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let d=this.path[this.path.length-1],g=d.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===d;)d=this.path.pop();return this.path.length>0}},Xn=class extends In{getValue(d){return d.key}},Dr=class extends In{getValue(d){return[d.key,d.key]}},ps=d=>d,Gi=d=>{if(d){let g=new ln(wo(d)),_=new ln(wo(d)),S=(V,te)=>te.addAndReturn(V),P=V=>({x:S(V.x,g),y:S(V.y,_)});return P({x:new Pe(0),y:new Pe(0)}),P}return ps},Is=d=>({set:g=>{Fi=Is(g)},reset:()=>Is(d),compare:wo(d),snap:Gi(d),orient:Wo(d)}),Fi=Is(),Lo=(d,g)=>d.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(d.ur.x)&&d.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(d.ur.y),cd=(d,g)=>{if(g.ur.x.isLessThan(d.ll.x)||d.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(d.ll.y)||d.ur.y.isLessThan(g.ll.y))return null;let _=d.ll.x.isLessThan(g.ll.x)?g.ll.x:d.ll.x,S=d.ur.x.isLessThan(g.ur.x)?d.ur.x:g.ur.x,P=d.ll.y.isLessThan(g.ll.y)?g.ll.y:d.ll.y,V=d.ur.y.isLessThan(g.ur.y)?d.ur.y:g.ur.y;return{ll:{x:_,y:P},ur:{x:S,y:V}}},Ea=(d,g)=>d.x.times(g.y).minus(d.y.times(g.x)),ca=(d,g)=>d.x.times(g.x).plus(d.y.times(g.y)),qo=d=>ca(d,d).sqrt(),Oh=(d,g,_)=>{let S={x:g.x.minus(d.x),y:g.y.minus(d.y)},P={x:_.x.minus(d.x),y:_.y.minus(d.y)};return Ea(P,S).div(qo(P)).div(qo(S))},Du=(d,g,_)=>{let S={x:g.x.minus(d.x),y:g.y.minus(d.y)},P={x:_.x.minus(d.x),y:_.y.minus(d.y)};return ca(P,S).div(qo(P)).div(qo(S))},ii=(d,g,_)=>g.y.isZero()?null:{x:d.x.plus(g.x.div(g.y).times(_.minus(d.y))),y:_},Zs=(d,g,_)=>g.x.isZero()?null:{x:_,y:d.y.plus(g.y.div(g.x).times(_.minus(d.x)))},Fe=(d,g,_,S)=>{if(g.x.isZero())return Zs(_,S,d.x);if(S.x.isZero())return Zs(d,g,_.x);if(g.y.isZero())return ii(_,S,d.y);if(S.y.isZero())return ii(d,g,_.y);let P=Ea(g,S);if(P.isZero())return null;let V={x:_.x.minus(d.x),y:_.y.minus(d.y)},te=Ea(V,g).div(P),se=Ea(V,S).div(P),ye=d.x.plus(se.times(g.x)),Ee=_.x.plus(te.times(S.x)),nt=d.y.plus(se.times(g.y)),Ye=_.y.plus(te.times(S.y)),_t=ye.plus(Ee).div(2),Bt=nt.plus(Ye).div(2);return{x:_t,y:Bt}},Co=class HE{constructor(g,_){Je(this,"point");Je(this,"isLeft");Je(this,"segment");Je(this,"otherSE");Je(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=_}static compare(g,_){let S=HE.comparePoints(g.point,_.point);return S!==0?S:(g.point!==_.point&&g.link(_),g.isLeft!==_.isLeft?g.isLeft?1:-1:Bs.compare(g.segment,_.segment))}static comparePoints(g,_){return g.x.isLessThan(_.x)?-1:g.x.isGreaterThan(_.x)?1:g.y.isLessThan(_.y)?-1:g.y.isGreaterThan(_.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let _=g.point.events;for(let S=0,P=_.length;S<P;S++){let V=_[S];this.point.events.push(V),V.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let _=0;_<g;_++){let S=this.point.events[_];if(S.segment.consumedBy===void 0)for(let P=_+1;P<g;P++){let V=this.point.events[P];V.consumedBy===void 0&&S.otherSE.point.events===V.otherSE.point.events&&S.segment.consume(V.segment)}}}getAvailableLinkedEvents(){let g=[];for(let _=0,S=this.point.events.length;_<S;_++){let P=this.point.events[_];P!==this&&!P.segment.ringOut&&P.segment.isInResult()&&g.push(P)}return g}getLeftmostComparator(g){let _=new Map,S=P=>{let V=P.otherSE;_.set(P,{sine:Oh(this.point,g.point,V.point),cosine:Du(this.point,g.point,V.point)})};return(P,V)=>{_.has(P)||S(P),_.has(V)||S(V);let{sine:te,cosine:se}=_.get(P),{sine:ye,cosine:Ee}=_.get(V);return te.isGreaterThanOrEqualTo(0)&&ye.isGreaterThanOrEqualTo(0)?se.isLessThan(Ee)?1:se.isGreaterThan(Ee)?-1:0:te.isLessThan(0)&&ye.isLessThan(0)?se.isLessThan(Ee)?-1:se.isGreaterThan(Ee)?1:0:ye.isLessThan(te)?-1:ye.isGreaterThan(te)?1:0}}},rc=0,Bs=class av{constructor(g,_,S,P){Je(this,"id");Je(this,"leftSE");Je(this,"rightSE");Je(this,"rings");Je(this,"windings");Je(this,"ringOut");Je(this,"consumedBy");Je(this,"prev");Je(this,"_prevInResult");Je(this,"_beforeState");Je(this,"_afterState");Je(this,"_isInResult");this.id=++rc,this.leftSE=g,g.segment=this,g.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=g,this.rings=S,this.windings=P}static compare(g,_){let S=g.leftSE.point.x,P=_.leftSE.point.x,V=g.rightSE.point.x,te=_.rightSE.point.x;if(te.isLessThan(S))return 1;if(V.isLessThan(P))return-1;let se=g.leftSE.point.y,ye=_.leftSE.point.y,Ee=g.rightSE.point.y,nt=_.rightSE.point.y;if(S.isLessThan(P)){if(ye.isLessThan(se)&&ye.isLessThan(Ee))return 1;if(ye.isGreaterThan(se)&&ye.isGreaterThan(Ee))return-1;let Ye=g.comparePoint(_.leftSE.point);if(Ye<0)return 1;if(Ye>0)return-1;let _t=_.comparePoint(g.rightSE.point);return _t!==0?_t:-1}if(S.isGreaterThan(P)){if(se.isLessThan(ye)&&se.isLessThan(nt))return-1;if(se.isGreaterThan(ye)&&se.isGreaterThan(nt))return 1;let Ye=_.comparePoint(g.leftSE.point);if(Ye!==0)return Ye;let _t=g.comparePoint(_.rightSE.point);return _t<0?1:_t>0?-1:1}if(se.isLessThan(ye))return-1;if(se.isGreaterThan(ye))return 1;if(V.isLessThan(te)){let Ye=_.comparePoint(g.rightSE.point);if(Ye!==0)return Ye}if(V.isGreaterThan(te)){let Ye=g.comparePoint(_.rightSE.point);if(Ye<0)return 1;if(Ye>0)return-1}if(!V.eq(te)){let Ye=Ee.minus(se),_t=V.minus(S),Bt=nt.minus(ye),tn=te.minus(P);if(Ye.isGreaterThan(_t)&&Bt.isLessThan(tn))return 1;if(Ye.isLessThan(_t)&&Bt.isGreaterThan(tn))return-1}return V.isGreaterThan(te)?1:V.isLessThan(te)||Ee.isLessThan(nt)?-1:Ee.isGreaterThan(nt)?1:g.id<_.id?-1:g.id>_.id?1:0}static fromRing(g,_,S){let P,V,te,se=Co.comparePoints(g,_);if(se<0)P=g,V=_,te=1;else if(se>0)P=_,V=g,te=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);let ye=new Co(P,!0),Ee=new Co(V,!1);return new av(ye,Ee,[S],[te])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(_)?g:_},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(_)?g:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return Fi.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let _=this.bbox(),S=g.bbox(),P=cd(_,S);if(P===null)return null;let V=this.leftSE.point,te=this.rightSE.point,se=g.leftSE.point,ye=g.rightSE.point,Ee=Lo(_,se)&&this.comparePoint(se)===0,nt=Lo(S,V)&&g.comparePoint(V)===0,Ye=Lo(_,ye)&&this.comparePoint(ye)===0,_t=Lo(S,te)&&g.comparePoint(te)===0;if(nt&&Ee)return _t&&!Ye?te:!_t&&Ye?ye:null;if(nt)return Ye&&V.x.eq(ye.x)&&V.y.eq(ye.y)?null:V;if(Ee)return _t&&te.x.eq(se.x)&&te.y.eq(se.y)?null:se;if(_t&&Ye)return null;if(_t)return te;if(Ye)return ye;let Bt=Fe(V,this.vector(),se,g.vector());return Bt===null||!Lo(P,Bt)?null:Fi.snap(Bt)}split(g){let _=[],S=g.events!==void 0,P=new Co(g,!0),V=new Co(g,!1),te=this.rightSE;this.replaceRightSE(V),_.push(V),_.push(P);let se=new av(P,te,this.rings.slice(),this.windings.slice());return Co.comparePoints(se.leftSE.point,se.rightSE.point)>0&&se.swapEvents(),Co.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),S&&(P.checkForConsuming(),V.checkForConsuming()),_}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,S=this.windings.length;_<S;_++)this.windings[_]*=-1}consume(g){let _=this,S=g;for(;_.consumedBy;)_=_.consumedBy;for(;S.consumedBy;)S=S.consumedBy;let P=av.compare(_,S);if(P!==0){if(P>0){let V=_;_=S,S=V}if(_.prev===S){let V=_;_=S,S=V}for(let V=0,te=S.rings.length;V<te;V++){let se=S.rings[V],ye=S.windings[V],Ee=_.rings.indexOf(se);Ee===-1?(_.rings.push(se),_.windings.push(ye)):_.windings[Ee]+=ye}S.rings=null,S.windings=null,S.consumedBy=_,S.leftSE.consumedBy=_.leftSE,S.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,S=this._afterState.windings,P=this._afterState.multiPolys;for(let se=0,ye=this.rings.length;se<ye;se++){let Ee=this.rings[se],nt=this.windings[se],Ye=_.indexOf(Ee);Ye===-1?(_.push(Ee),S.push(nt)):S[Ye]+=nt}let V=[],te=[];for(let se=0,ye=_.length;se<ye;se++){if(S[se]===0)continue;let Ee=_[se],nt=Ee.poly;if(te.indexOf(nt)===-1)if(Ee.isExterior)V.push(nt);else{te.indexOf(nt)===-1&&te.push(nt);let Ye=V.indexOf(Ee.poly);Ye!==-1&&V.splice(Ye,1)}}for(let se=0,ye=V.length;se<ye;se++){let Ee=V[se].multiPoly;P.indexOf(Ee)===-1&&P.push(Ee)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Wd.type){case"union":{let S=g.length===0,P=_.length===0;this._isInResult=S!==P;break}case"intersection":{let S,P;g.length<_.length?(S=g.length,P=_.length):(S=_.length,P=g.length),this._isInResult=P===Wd.numMultiPolys&&S<P;break}case"xor":{let S=Math.abs(g.length-_.length);this._isInResult=S%2===1;break}case"difference":{let S=P=>P.length===1&&P[0].isSubject;this._isInResult=S(g)!==S(_);break}}return this._isInResult}},Br=class{constructor(d,g,_){Je(this,"poly");Je(this,"isExterior");Je(this,"segments");Je(this,"bbox");if(!Array.isArray(d)||d.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=_,this.segments=[],typeof d[0][0]!="number"||typeof d[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let S=Fi.snap({x:new Pe(d[0][0]),y:new Pe(d[0][1])});this.bbox={ll:{x:S.x,y:S.y},ur:{x:S.x,y:S.y}};let P=S;for(let V=1,te=d.length;V<te;V++){if(typeof d[V][0]!="number"||typeof d[V][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let se=Fi.snap({x:new Pe(d[V][0]),y:new Pe(d[V][1])});se.x.eq(P.x)&&se.y.eq(P.y)||(this.segments.push(Bs.fromRing(P,se,this)),se.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=se.x),se.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=se.y),se.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=se.x),se.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=se.y),P=se)}(!S.x.eq(P.x)||!S.y.eq(P.y))&&this.segments.push(Bs.fromRing(P,S,this))}getSweepEvents(){let d=[];for(let g=0,_=this.segments.length;g<_;g++){let S=this.segments[g];d.push(S.leftSE),d.push(S.rightSE)}return d}},Hd=class{constructor(d,g){Je(this,"multiPoly");Je(this,"exteriorRing");Je(this,"interiorRings");Je(this,"bbox");if(!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Br(d[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,S=d.length;_<S;_++){let P=new Br(d[_],this,!1);P.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=P.bbox.ll.x),P.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=P.bbox.ll.y),P.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=P.bbox.ur.x),P.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=P.bbox.ur.y),this.interiorRings.push(P)}this.multiPoly=g}getSweepEvents(){let d=this.exteriorRing.getSweepEvents();for(let g=0,_=this.interiorRings.length;g<_;g++){let S=this.interiorRings[g].getSweepEvents();for(let P=0,V=S.length;P<V;P++)d.push(S[P])}return d}},Af=class{constructor(d,g){Je(this,"isSubject");Je(this,"polys");Je(this,"bbox");if(!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof d[0][0][0]=="number"&&(d=[d])}catch{}this.polys=[],this.bbox={ll:{x:new Pe(Number.POSITIVE_INFINITY),y:new Pe(Number.POSITIVE_INFINITY)},ur:{x:new Pe(Number.NEGATIVE_INFINITY),y:new Pe(Number.NEGATIVE_INFINITY)}};for(let _=0,S=d.length;_<S;_++){let P=new Hd(d[_],this);P.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=P.bbox.ll.x),P.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=P.bbox.ll.y),P.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=P.bbox.ur.x),P.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=P.bbox.ur.y),this.polys.push(P)}this.isSubject=g}getSweepEvents(){let d=[];for(let g=0,_=this.polys.length;g<_;g++){let S=this.polys[g].getSweepEvents();for(let P=0,V=S.length;P<V;P++)d.push(S[P])}return d}},Gd=class S2{constructor(g){Je(this,"events");Je(this,"poly");Je(this,"_isExteriorRing");Je(this,"_enclosingRing");this.events=g;for(let _=0,S=g.length;_<S;_++)g[_].segment.ringOut=this;this.poly=null}static factory(g){let _=[];for(let S=0,P=g.length;S<P;S++){let V=g[S];if(!V.isInResult()||V.ringOut)continue;let te=null,se=V.leftSE,ye=V.rightSE,Ee=[se],nt=se.point,Ye=[];for(;te=se,se=ye,Ee.push(se),se.point!==nt;)for(;;){let _t=se.getAvailableLinkedEvents();if(_t.length===0){let _n=Ee[0].point,Mn=Ee[Ee.length-1].point;throw new Error(`Unable to complete output ring starting at [${_n.x}, ${_n.y}]. Last matching segment found ends at [${Mn.x}, ${Mn.y}].`)}if(_t.length===1){ye=_t[0].otherSE;break}let Bt=null;for(let _n=0,Mn=Ye.length;_n<Mn;_n++)if(Ye[_n].point===se.point){Bt=_n;break}if(Bt!==null){let _n=Ye.splice(Bt)[0],Mn=Ee.splice(_n.index);Mn.unshift(Mn[0].otherSE),_.push(new S2(Mn.reverse()));continue}Ye.push({index:Ee.length,point:se.point});let tn=se.getLeftmostComparator(te);ye=_t.sort(tn)[0].otherSE;break}_.push(new S2(Ee))}return _}getGeom(){let g=this.events[0].point,_=[g];for(let Ee=1,nt=this.events.length-1;Ee<nt;Ee++){let Ye=this.events[Ee].point,_t=this.events[Ee+1].point;Fi.orient(Ye,g,_t)!==0&&(_.push(Ye),g=Ye)}if(_.length===1)return null;let S=_[0],P=_[1];Fi.orient(S,g,P)===0&&_.shift(),_.push(_[0]);let V=this.isExteriorRing()?1:-1,te=this.isExteriorRing()?0:_.length-1,se=this.isExteriorRing()?_.length:-1,ye=[];for(let Ee=te;Ee!=se;Ee+=V)ye.push([_[Ee].x.toNumber(),_[Ee].y.toNumber()]);return ye}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var P,V;let g=this.events[0];for(let te=1,se=this.events.length;te<se;te++){let ye=this.events[te];Co.compare(g,ye)>0&&(g=ye)}let _=g.segment.prevInResult(),S=_?_.prevInResult():null;for(;;){if(!_)return null;if(!S)return _.ringOut;if(S.ringOut!==_.ringOut)return((P=S.ringOut)==null?void 0:P.enclosingRing())!==_.ringOut?_.ringOut:(V=_.ringOut)==null?void 0:V.enclosingRing();_=S.prevInResult(),S=_?_.prevInResult():null}}},pl=class{constructor(d){Je(this,"exteriorRing");Je(this,"interiorRings");this.exteriorRing=d,d.poly=this,this.interiorRings=[]}addInterior(d){this.interiorRings.push(d),d.poly=this}getGeom(){let d=this.exteriorRing.getGeom();if(d===null)return null;let g=[d];for(let _=0,S=this.interiorRings.length;_<S;_++){let P=this.interiorRings[_].getGeom();P!==null&&g.push(P)}return g}},dd=class{constructor(d){Je(this,"rings");Je(this,"polys");this.rings=d,this.polys=this._composePolys(d)}getGeom(){let d=[];for(let g=0,_=this.polys.length;g<_;g++){let S=this.polys[g].getGeom();S!==null&&d.push(S)}return d}_composePolys(d){var _;let g=[];for(let S=0,P=d.length;S<P;S++){let V=d[S];if(!V.poly)if(V.isExteriorRing())g.push(new pl(V));else{let te=V.enclosingRing();te!=null&&te.poly||g.push(new pl(te)),(_=te==null?void 0:te.poly)==null||_.addInterior(V)}}return g}},Nh=class{constructor(d,g=Bs.compare){Je(this,"queue");Je(this,"tree");Je(this,"segments");this.queue=d,this.tree=new ln(g),this.segments=[]}process(d){let g=d.segment,_=[];if(d.consumedBy)return d.isLeft?this.queue.delete(d.otherSE):this.tree.delete(g),_;d.isLeft&&this.tree.add(g);let S=g,P=g;do S=this.tree.lastBefore(S);while(S!=null&&S.consumedBy!=null);do P=this.tree.firstAfter(P);while(P!=null&&P.consumedBy!=null);if(d.isLeft){let V=null;if(S){let se=S.getIntersection(g);if(se!==null&&(g.isAnEndpoint(se)||(V=se),!S.isAnEndpoint(se))){let ye=this._splitSafely(S,se);for(let Ee=0,nt=ye.length;Ee<nt;Ee++)_.push(ye[Ee])}}let te=null;if(P){let se=P.getIntersection(g);if(se!==null&&(g.isAnEndpoint(se)||(te=se),!P.isAnEndpoint(se))){let ye=this._splitSafely(P,se);for(let Ee=0,nt=ye.length;Ee<nt;Ee++)_.push(ye[Ee])}}if(V!==null||te!==null){let se=null;V===null?se=te:te===null?se=V:se=Co.comparePoints(V,te)<=0?V:te,this.queue.delete(g.rightSE),_.push(g.rightSE);let ye=g.split(se);for(let Ee=0,nt=ye.length;Ee<nt;Ee++)_.push(ye[Ee])}_.length>0?(this.tree.delete(g),_.push(d)):(this.segments.push(g),g.prev=S)}else{if(S&&P){let V=S.getIntersection(P);if(V!==null){if(!S.isAnEndpoint(V)){let te=this._splitSafely(S,V);for(let se=0,ye=te.length;se<ye;se++)_.push(te[se])}if(!P.isAnEndpoint(V)){let te=this._splitSafely(P,V);for(let se=0,ye=te.length;se<ye;se++)_.push(te[se])}}}this.tree.delete(g)}return _}_splitSafely(d,g){this.tree.delete(d);let _=d.rightSE;this.queue.delete(_);let S=d.split(g);return S.push(_),d.consumedBy===void 0&&this.tree.add(d),S}},Gp=class{constructor(){Je(this,"type");Je(this,"numMultiPolys")}run(d,g,_){Ic.type=d;let S=[new Af(g,!0)];for(let ye=0,Ee=_.length;ye<Ee;ye++)S.push(new Af(_[ye],!1));if(Ic.numMultiPolys=S.length,Ic.type==="difference"){let ye=S[0],Ee=1;for(;Ee<S.length;)cd(S[Ee].bbox,ye.bbox)!==null?Ee++:S.splice(Ee,1)}if(Ic.type==="intersection")for(let ye=0,Ee=S.length;ye<Ee;ye++){let nt=S[ye];for(let Ye=ye+1,_t=S.length;Ye<_t;Ye++)if(cd(nt.bbox,S[Ye].bbox)===null)return[]}let P=new ln(Co.compare);for(let ye=0,Ee=S.length;ye<Ee;ye++){let nt=S[ye].getSweepEvents();for(let Ye=0,_t=nt.length;Ye<_t;Ye++)P.add(nt[Ye])}let V=new Nh(P),te=null;for(P.size!=0&&(te=P.first(),P.delete(te));te;){let ye=V.process(te);for(let Ee=0,nt=ye.length;Ee<nt;Ee++){let Ye=ye[Ee];Ye.consumedBy===void 0&&P.add(Ye)}P.size!=0?(te=P.first(),P.delete(te)):te=null}Fi.reset();let se=Gd.factory(V.segments);return new dd(se).getGeom()}},Ic=new Gp,Wd=Ic,hu=(d,...g)=>Wd.run("intersection",d,g),Wp=(d,...g)=>Wd.run("difference",d,g);Fi.set;function qd(d){let g={type:"Feature"};return g.geometry=d,g}function Yd(d){return d.type==="Feature"?d.geometry:d}function Tf(d){return d&&d.geometry&&d.geometry.coordinates?d.geometry.coordinates:d}function Df(d){return qd({type:"LineString",coordinates:d})}function Ua(d){return qd({type:"MultiLineString",coordinates:d})}function Of(d){return qd({type:"Polygon",coordinates:d})}function Nf(d){return qd({type:"MultiPolygon",coordinates:d})}function If(d,g){let _=Yd(d),S=Yd(g),P=hu(_.coordinates,S.coordinates);return P.length===0?null:P.length===1?Of(P[0]):Nf(P)}function w(d,g){let _=Yd(d),S=Yd(g),P=Wp(_.coordinates,S.coordinates);return P.length===0?null:P.length===1?Of(P[0]):Nf(P)}function T(d){return Array.isArray(d)?1+T(d[0]):-1}function Y(d){d instanceof L.Polyline&&(d=d.toGeoJSON(15));let g=Tf(d),_=T(g),S=[];return _>1?g.forEach(P=>{S.push(Df(P))}):S.push(d),S}function ce(d){let g=[];return d.eachLayer(_=>{g.push(Tf(_.toGeoJSON(15)))}),Ua(g)}es.Cut=es.Polygon.extend({initialize(d){this._map=d,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=2)return;let g=L.polygon(d,this.options.pathOptions);g._latlngInfos=this._layer._latlngInfo,this.cut(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:S,originalLayer:P})=>{this._fireCut(P,S,P),this._fireCut(this._map,S,P),P.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(d){let g=this._map._layers,_=d._latlngInfos||[];Object.keys(g).map(S=>g[S]).filter(S=>S.pm).filter(S=>!S._pmTempLayer).filter(S=>!L.PM.optIn&&!S.options.pmIgnore||L.PM.optIn&&S.options.pmIgnore===!1).filter(S=>S instanceof L.Polyline).filter(S=>S!==d).filter(S=>S.pm.options.allowCutting).filter(S=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(S)>-1:!0).filter(S=>!this._layerGroup.hasLayer(S)).filter(S=>{try{let P=!!_o(d.toGeoJSON(15),S.toGeoJSON(15)).features.length>0;return P||S instanceof L.Polyline&&!(S instanceof L.Polygon)?P:!!If(d.toGeoJSON(15),S.toGeoJSON(15))}catch{return S instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(S=>{let P;if(S instanceof L.Polygon){P=L.polygon(S.getLatLngs());let ye=P.getLatLngs();_.forEach(Ee=>{if(Ee&&Ee.snapInfo){let{latlng:nt}=Ee,Ye=this._calcClosestLayer(nt,[P]);if(Ye&&Ye.segment&&Ye.distance<this.options.snapDistance){let{segment:_t}=Ye;if(_t&&_t.length===2){let{indexPath:Bt,parentPath:tn,newIndex:_n}=L.PM.Utils._getIndexFromSegment(ye,_t);(Bt.length>1?(0,Mi.default)(ye,tn):ye).splice(_n,0,nt)}}}})}else P=S;let V=this._cutLayer(d,P),te=L.geoJSON(V,S.options);te.getLayers().length===1&&([te]=te.getLayers()),this._setPane(te,"layerPane");let se=te.addTo(this._map.pm._getContainingLayer());if(se.pm.enable(S.pm.options),se.pm.disable(),S._pmTempLayer=!0,d._pmTempLayer=!0,S.remove(),S.removeFrom(this._map.pm._getContainingLayer()),d.remove(),d.removeFrom(this._map.pm._getContainingLayer()),se.getLayers&&se.getLayers().length===0&&this._map.pm.removeLayer({target:se}),se instanceof L.LayerGroup?(se.eachLayer(ye=>{this._addDrawnLayerProp(ye)}),this._addDrawnLayerProp(se)):this._addDrawnLayerProp(se),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let ye=this.options.layersToCut.indexOf(S);ye>-1&&this.options.layersToCut.splice(ye,1)}this._editedLayers.push({layer:se,originalLayer:S})})},_cutLayer(d,g){let _=L.geoJSON(),S;if(g instanceof L.Polygon)S=w(g.toGeoJSON(15),d.toGeoJSON(15));else{let P=Y(g);P.forEach(V=>{let te=Yn(V,d.toGeoJSON(15)),se;te&&te.features.length>0?se=L.geoJSON(te):se=L.geoJSON(V),se.getLayers().forEach(ye=>{wa(d.toGeoJSON(15),ye.toGeoJSON(15))||ye.addTo(_)})}),P.length>1?S=ce(_):S=_.toGeoJSON(15)}return S},_change:L.Util.falseFn}),es.Text=es.extend({initialize(d){this._map=d,this._shape="Text",this.toolbarButtonName="drawText"},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(sr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var d;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(d=this._hintMarker)==null||d.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let g=d;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker(d){var P,V,te,se;if(!d.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let g=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(P=this.options.textOptions)==null?void 0:P.className){let ye=this.options.textOptions.className.split(" ");this.textArea.classList.add(...ye)}let _=this._createTextIcon(this.textArea),S=new L.Marker(g,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(S,"markerPane"),this._finishLayer(S),S.pm||(S.options.draggable=!1),S.addTo(this._map.pm._getContainingLayer()),S.pm){S.pm.textArea=this.textArea,L.setOptions(S.pm,{removeIfEmpty:((V=this.options.textOptions)==null?void 0:V.removeIfEmpty)??!0});let ye=((te=this.options.textOptions)==null?void 0:te.focusAfterDraw)??!0;S.pm._createTextMarker(ye),(se=this.options.textOptions)!=null&&se.text&&S.pm.setText(this.options.textOptions.text)}this._fireCreate(S),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(d){this.enable(),this._hintMarker.setLatLng(d.latlng)},_createTextArea(){let d=document.createElement("textarea");return d.readOnly=!0,d.classList.add("pm-textarea","pm-disabled"),d},_createTextIcon(d){return L.divIcon({className:"pm-text-marker",html:d})}});var Le={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ui(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let d=this._getDOMElem();d&&(ui(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(d)):L.DomEvent.on(d,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,ui(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let d=this._getDOMElem();d&&(ui(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(d)):L.DomEvent.off(d,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(d){let g=d.touches?d.touches[0]:d,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(d){let g=d.touches?d.touches[0]:d,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(d){let g={originalEvent:d.touches?d.touches[0]:d,target:this._layer};return d.type.indexOf("touch")===-1&&(g.containerPoint=this._map.mouseEventToContainerPoint(d),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown(d){if(d.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(d);let g=d._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",d);if(this._layer instanceof L.Marker&&(this.options.snappable&&!g&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let S="resizeableCircleMarker";this._layer instanceof L.Circle&&(S="resizeableCircle"),this.options.snappable&&!g&&!_?this._layer.pm.options[S]||this._initSnappableMarkersDrag():this._layer.pm.options[S]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=d.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(d){this._overwriteEventIfItComesFromMarker(d);let g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",d),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=d.latlng),this._onLayerDrag(d),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(d){let g=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",d),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,g&&L.DomUtil.removeClass(g,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(d){let{latlng:g}=d,_={lat:g.lat-this._tempDragCoord.lat,lng:g.lng-this._tempDragCoord.lng},S=P=>P.map(V=>{if(Array.isArray(V))return S(V);let te={lat:V.lat+_.lat,lng:V.lng+_.lng};return(V.alt||V.alt===0)&&(te.alt=V.alt),te});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let P=S([this._layer.getLatLng()]);this._layer.setLatLng(P[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let P=this._layer.getLatLng();this._layer._snapped&&(P=this._layer._orgLatLng);let V=S([P]);this._layer.setLatLng(V[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let P=S([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(P),this._fireChange(this._layer.getBounds(),"Edit")}else{let P=S(this._layer.getLatLngs());this._layer.setLatLngs(P),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,d.layer=this._layer,this._fireDrag(d)},addDraggingClass(){let d=this._getDOMElem();d&&L.DomUtil.addClass(d,"leaflet-pm-draggable")},removeDraggingClass(){let d=this._getDOMElem();d&&L.DomUtil.removeClass(d,"leaflet-pm-draggable")},_getDOMElem(){let d=null;return this._layer._path?d=this._layer._path:this._layer._renderer&&this._layer._renderer._container?d=this._layer._renderer._container:this._layer._image?d=this._layer._image:this._layer._icon&&(d=this._layer._icon),d},_overwriteEventIfItComesFromMarker(d){d.target.getLatLng&&(!d.target._radius||d.target._radius<=10)&&(d.containerPoint=this._map.mouseEventToContainerPoint(d.originalEvent),d.latlng=this._map.containerPointToLatLng(d.containerPoint))},_syncLayers(d,g){if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(S=>{S instanceof L.LayerGroup&&(_=_.concat(S.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let S in this._parentLayerGroup){let P=this._parentLayerGroup[S];P.pm&&(_=P.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(S=>!!S.pm).filter(S=>!!S.pm.options.draggable),_.forEach(S=>{S!==this._layer&&S.pm[d]&&(S._snapped=!1,S.pm[d](g))})),_.length>0}return!1},_stopDOMImageDrag(d){return d.preventDefault(),!1}},ke=Le,Oe=l(br());function Be(d,g,_,S){return _.unproject(g.transform(_.project(d,S)),S)}function ze(d,g,_){let S=_.getMaxZoom();if(S===1/0&&(S=_.getZoom()),L.Util.isArray(d)){let P=[];return d.forEach(V=>{P.push(ze(V,g,_))}),P}return d instanceof L.LatLng?Be(d,g,_,S):null}function Ze(d,g){g instanceof L.Layer&&(g=g.getLatLng());let _=d.getMaxZoom();return _===1/0&&(_=d.getZoom()),d.project(g,_)}function gt(d,g){let _=d.getMaxZoom();return _===1/0&&(_=d.getZoom()),d.unproject(g,_)}var Ft={_onRotateStart(d){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ze(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ze(this._map,d.target.getLatLng()),this._initialRotateLatLng=Go(this._layer),this._startAngle=this.getAngle();let g=Go(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate(d){let g=Ze(this._map,d.target.getLatLng()),_=this._rotationStartPoint,S=this._rotationOriginPoint,P=Math.atan2(g.y-S.y,g.x-S.x)-Math.atan2(_.y-S.y,_.x-S.x);this._layer.setLatLngs(this._rotateLayer(P,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let V=this;function te(nt,Ye=[],_t=-1){if(_t>-1&&Ye.push(_t),L.Util.isArray(nt[0]))nt.forEach((Bt,tn)=>te(Bt,Ye.slice(),tn));else{let Bt=Ye.length>0?(0,Oe.default)(V._markers,Ye):V._markers[0];nt.forEach((tn,_n)=>{Bt[_n].setLatLng(tn)})}}te(this._layer.getLatLngs());let se=Go(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(P,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let ye=P*180/Math.PI;ye=ye<0?ye+360:ye;let Ee=ye+this._startAngle;this._setAngle(Ee),this._rotationLayer.pm._setAngle(Ee),this._fireRotation(this._rotationLayer,ye,se),this._fireRotation(this._map,ye,se),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let d=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let g=Go(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Go(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,d,g),this._fireRotationEnd(this._map,d,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(d,g,_,S,P){let V=Ze(P,_);return this._matrix=S.clone().rotate(d,V).flip(),ze(g,this._matrix,P)},_setAngle(d){d=d<0?d+360:d,this._angle=d%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let d=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=d.getCenter();return d.removeFrom(this._layer._map),g},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(va(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let d={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),d),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Go(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(d){let g=this.getAngle(),_=this._layer.getLatLngs(),S=d*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(S,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+d),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(S,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let P=this.getAngle()-g;P=P<0?P+360:P,this._startAngle=g,this._fireRotation(this._layer,P,_,this._layer),this._fireRotation(this._map||this._layer._map,P,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(d){let g=d-this.getAngle();this.rotateLayer(g)},getAngle(){return this._angle||0},setInitAngle(d){this._setAngle(d)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(d){this._rotationCenter=d,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(d)}},jt=Ft,Mt=L.Class.extend({includes:[ke,Ro,jt,ou],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(d){L.Util.setOptions(this,d)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(d,g){g==="layerPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(d,g){let _=g.target,S={layer:this._layer,marker:_,event:g},P="";return d==="move"?P="moveVertexValidation":d==="add"?P="addVertexValidation":d==="remove"&&(P="removeVertexValidation"),this.options[P]&&typeof this.options[P]=="function"&&!this.options[P](S)?(d==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(d){return d._cancelDragEventChain?(d._latlng=d._cancelDragEventChain,d.update(),!1):!0},_vertexValidationDragEnd(d){return d._cancelDragEventChain?(d._cancelDragEventChain=null,!1):!0}}),Qt=Mt;Qt.LayerGroup=L.Class.extend({initialize(d){this._layerGroup=d,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(S=>this._initLayer(S));let g=S=>{if(S.layer._pmTempLayer)return;this._layers=this.getLayers();let P=this._layers.filter(V=>!V.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in V.pm._parentLayerGroup));P.forEach(V=>{this._initLayer(V)}),P.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(g,100,this),this),this._layerGroup.on("layerremove",S=>{this._removeLayerFromGroup(S.target)},this);let _=S=>{S.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(d,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=d,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.enable(d,g)):_.pm.enable(d)})},disable(d=[]){d.length===0&&(this._layers=this.getLayers()),this._layers.forEach(g=>{g instanceof L.LayerGroup?d.indexOf(g._leaflet_id)===-1&&(d.push(g._leaflet_id),g.pm.disable(d)):g.pm.disable()})},enabled(d=[]){return d.length===0&&(this._layers=this.getLayers()),!!this._layers.find(g=>g instanceof L.LayerGroup?d.indexOf(g._leaflet_id)===-1?(d.push(g._leaflet_id),g.pm.enabled(d)):!1:g.pm.enabled())},toggleEdit(d,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=d,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.toggleEdit(d,g)):_.pm.toggleEdit(d)})},_initLayer(d){let g=L.Util.stamp(this._layerGroup);d.pm._parentLayerGroup||(d.pm._parentLayerGroup={}),d.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup(d){if(d.pm&&d.pm._layerGroup){let g=L.Util.stamp(this._layerGroup);delete d.pm._layerGroup[g]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(d=>d.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var d;return this._map||((d=this._layers.find(g=>!!g._map))==null?void 0:d._map)||null},getLayers(d=!1,g=!0,_=!0,S=[]){let P=[];return d?this._layerGroup.getLayers().forEach(V=>{P.push(V),V instanceof L.LayerGroup&&S.indexOf(V._leaflet_id)===-1&&(S.push(V._leaflet_id),P=P.concat(V.pm.getLayers(!0,!0,!0,S)))}):P=this._layerGroup.getLayers(),_&&(P=P.filter(V=>!(V instanceof L.LayerGroup))),g&&(P=P.filter(V=>!!V.pm),P=P.filter(V=>!V._pmTempLayer),P=P.filter(V=>!L.PM.optIn&&!V.options.pmIgnore||L.PM.optIn&&V.options.pmIgnore===!1)),P},setOptions(d,g=[]){g.length===0&&(this._layers=this.getLayers()),this.options=d,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.setOptions(d,g)):_.pm.setOptions(d))})}}),Qt.Marker=Qt.extend({_shape:"Marker",initialize(d){this._layer=d,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(d={draggable:!0}){if(L.Util.setOptions(this,d),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(d){let g=d.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)}});var Wt=l(br()),mt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let d=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=d.filter((g,_,S)=>S.indexOf(g)===_)},_removeFromCache(d){let g=this.markerCache.indexOf(d);g>-1&&this.markerCache.splice(g,1)},renderLimits(d){this.markerCache.forEach(g=>{d.includes(g)?this._markerGroup.addLayer(g):this._markerGroup.removeLayer(g)})},applyLimitFilters({latlng:d={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let g=[...this._filterClosestMarkers(d)];this.renderLimits(g)},_filterClosestMarkers(d){let g=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?g:(g.sort((S,P)=>{let V=S._latlng.distanceTo(d),te=P._latlng.distanceTo(d);return V-te}),g.filter((S,P)=>_>-1?P<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(d){this._preventRenderMarkers=!!d}},xt=mt;Qt.Line=Qt.extend({includes:[xt],_shape:"Line",initialize(d){this._layer=d,this._enabled=!1},enable(d){if(L.Util.setOptions(this,d),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let d=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(d,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(d){return this.enabled()?this.disable():this.enable(d),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let d=this._map,g=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(d),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=S=>{if(Array.isArray(S[0]))return S.map(_,this);let P=S.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&S.map((V,te)=>{let se=this.isPolygon()?(te+1)%S.length:te+1;return this._createMiddleMarker(P[te],P[se])}),P};this._markers=_(g),this.filterMarkerGroup(),d.addLayer(this._markerGroup)},_createMarker(d){let g=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker(d,g){if(!d||!g)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,d.getLatLng(),g.getLatLng()),S=this._createMarker(_),P=L.divIcon({className:"marker-icon marker-icon-middle"});return S.setIcon(P),S.leftM=d,S.rightM=g,d._middleMarkerNext=S,g._middleMarkerPrev=S,S.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),S.on("movestart",this._onMiddleMarkerMoveStart,this),S},_onMiddleMarkerClick(d){let g=d.target;if(!this._vertexValidation("add",d))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMoveStart(d){let g=d.target;if(g.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",d)){g.on("move",this._onMiddleMarkerMovePrevent,this);return}g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMovePrevent(d){let g=d.target;this._vertexValidationDrag(g)},_onMiddleMarkerMoveEnd(d){let g=d.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(g))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),setTimeout(()=>{delete g._dragging},100)},_addMarker(d,g,_){d.off("movestart",this._onMiddleMarkerMoveStart,this),d.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let S=d.getLatLng(),P=this._layer._latlngs;delete d.leftM,delete d.rightM;let{indexPath:V,index:te,parentPath:se}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),ye=V.length>1?(0,Wt.default)(P,se):P,Ee=V.length>1?(0,Wt.default)(this._markers,se):this._markers;ye.splice(te+1,0,S),Ee.splice(te+1,0,d),this._layer.setLatLngs(P),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(g,d),this._createMiddleMarker(d,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(d,L.PM.Utils.findDeepMarkerIndex(this._markers,d).indexPath,S),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Nr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(d){let g=this._layer,_,S;if(this.options.allowSelfIntersection?_=!1:(S=Nr(this._layer.toGeoJSON(15)),_=S.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;d?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(S)}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(d,g){d.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,g):_._icon&&(g&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(d){let g=d.target;if(!this._vertexValidation("remove",d))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Go(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:S,index:P,parentPath:V}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!S)return;let te=S.length>1?(0,Wt.default)(_,V):_,se=S.length>1?(0,Wt.default)(this._markers,V):this._markers,ye=V[V.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!ye&&(te.length<=2||this.isPolygon()&&te.length<=3)){this._flashLayer();return}te.splice(P,1),this._layer.setLatLngs(_),this.isPolygon()&&te.length<=2&&te.splice(0,te.length);let Ee=!1;if(te.length<=1&&(te.splice(0,te.length),V.length>1&&S.length>1&&(_=Al(_)),this._layer.setLatLngs(_),this._initMarkers(),Ee=!0),Qi(_)||this._layer.remove(),_=Al(_),this._layer.setLatLngs(_),this._markers=Al(this._markers),!Ee&&(se=S.length>1?(0,Wt.default)(this._markers,V):this._markers,g._middleMarkerPrev&&(this._markerGroup.removeLayer(g._middleMarkerPrev),this._removeFromCache(g._middleMarkerPrev)),g._middleMarkerNext&&(this._markerGroup.removeLayer(g._middleMarkerNext),this._removeFromCache(g._middleMarkerNext)),this._markerGroup.removeLayer(g),this._removeFromCache(g),se)){let nt,Ye;if(this.isPolygon()?(nt=(P+1)%se.length,Ye=(P+(se.length-1))%se.length):(Ye=P-1<0?void 0:P-1,nt=P+1>=se.length?void 0:P+1),nt!==Ye){let _t=se[Ye],Bt=se[nt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(_t,Bt)}se.splice(P,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,S),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(d){let g=this._layer.getLatLngs(),_=d.getLatLng(),{indexPath:S,index:P,parentPath:V}=L.PM.Utils.findDeepMarkerIndex(this._markers,d);(S.length>1?(0,Wt.default)(g,V):g).splice(P,1,_),this._layer.setLatLngs(g)},_getNeighborMarkers(d){let{indexPath:g,index:_,parentPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,d),P=g.length>1?(0,Wt.default)(this._markers,S):this._markers,V=(_+1)%P.length,te=(_+(P.length-1))%P.length,se=P[te],ye=P[V];return{prevMarker:se,nextMarker:ye}},_checkMarkerAllowedToDrag(d){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(d),S=L.polyline([g.getLatLng(),d.getLatLng()]),P=L.polyline([d.getLatLng(),_.getLatLng()]),V=_o(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,te=_o(this._layer.toGeoJSON(15),P.toGeoJSON(15)).features.length;return d.getLatLng()===this._markers[0][0].getLatLng()?te+=1:d.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(V+=1),!(V<=2&&te<=2)},_onMarkerDragStart(d){let g=d.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",d))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(d,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Go(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(g):this._markerAllowedToDrag=null},_onMarkerDrag(d){let g=d.target;if(!this._vertexValidationDrag(g))return;let{indexPath:_,index:S,parentPath:P}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(g);let V=_.length>1?(0,Wt.default)(this._markers,P):this._markers,te=(S+1)%V.length,se=(S+(V.length-1))%V.length,ye=g.getLatLng(),Ee=V[se].getLatLng(),nt=V[te].getLatLng();if(g._middleMarkerNext){let Ye=L.PM.Utils.calcMiddleLatLng(this._map,ye,nt);g._middleMarkerNext.setLatLng(Ye)}if(g._middleMarkerPrev){let Ye=L.PM.Utils.calcMiddleLatLng(this._map,ye,Ee);g._middleMarkerPrev.setLatLng(Ye)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(d,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(d){let g=d.target;if(!this._vertexValidationDragEnd(g))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),S=!this.options.allowSelfIntersection&&this.hasSelfIntersection();S&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(S=!1);let P=!this.options.allowSelfIntersection&&S;if(this._fireMarkerDragEnd(d,_,P),P){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(d,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(d){let g=d.target;if(g._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireVertexClick(d,_)}}),Qt.Polygon=Qt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(d){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(d),S=L.polyline([g.getLatLng(),d.getLatLng()]),P=L.polyline([d.getLatLng(),_.getLatLng()]),V=_o(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,te=_o(this._layer.toGeoJSON(15),P.toGeoJSON(15)).features.length;return!(V<=2&&te<=2)}}),Qt.Rectangle=Qt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let d=this._map,g=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,d.addLayer(this._markerGroup),this._markers=[],this._markers[0]=g.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,S)=>{let P=this._cornerMarkers.find(V=>V._index===S);P&&P.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(d,g){let _=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=d,_._index=g,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(d=>{d.on("dragstart",this._onMarkerDragStart,this),d.on("drag",this._onMarkerDrag,this),d.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||d.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(d){if(!this._vertexValidation("move",d))return;let g=d.target,_=this._cornerMarkers;g._oppositeCornerLatLng=_.find(P=>P._index===(g._index+2)%4).getLatLng(),g._snapped=!1;let{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(d,S)},_onMarkerDrag(d){let g=d.target;if(!this._vertexValidationDrag(g)||g._index===void 0)return;this._adjustRectangleForMarkerMove(g);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDrag(d,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(d){let g=d.target;if(!this._vertexValidationDragEnd(g))return;this._cornerMarkers.forEach(S=>{delete S._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragEnd(d,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(d){L.extend(d._origLatLng,d._latlng);let g=L.PM.Utils._getRotatedRectangle(d.getLatLng(),d._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(d),this._layer.redraw()},_adjustAllMarkers(d){let g=this._layer.getLatLngs()[0];if(g&&g.length!==4&&g.length>0)g.forEach((_,S)=>{this._cornerMarkers[S].setLatLng(_)}),this._cornerMarkers.slice(g.length).forEach(_=>{_.setLatLng(g[0])});else if(!g||!g.length)console.error("The layer has no LatLngs");else{let _=g.findIndex(S=>d.getLatLng().equals(S));_>-1?(this._cornerMarkers[(d._index+1)%4].setLatLng(g[(_+1)%4]),this._cornerMarkers[(d._index+2)%4].setLatLng(g[(_+2)%4]),this._cornerMarkers[(d._index+3)%4].setLatLng(g[(_+3)%4])):this._cornerMarkers.forEach(S=>{S.setLatLng(g[S._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(va(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let d=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(d[0],d[2],this.getAngle(),this._map||this)}}),Qt.CircleMarker=Qt.extend({_shape:"CircleMarker",initialize(d){this._layer=d,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(d={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,d),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let d=this._map;this._helperLayers&&(this._helperLayers.removeFrom(d),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(d);let g=this._layer.getLatLng(),_=this._layer._radius,S=this._getLatLngOnCircle(g,_);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(S),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(d,g){let _=this._map.project(d),S=L.point(_.x+g,_.y);return this._map.unproject(S)},_createHintLine(d,g){let _=d.getLatLng(),S=g.getLatLng();this._hintline=L.polyline([_,S],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(d){let g=this._createMarker(d);return this.options.draggable?(L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("move",this._moveCircle,this)):g.dragging.disable(),g},_createOuterMarker(d){let g=this._createMarker(d);return g.on("drag",this._resizeCircle,this),g},_createMarker(d){let g=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=d,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),g.on("click",this._onVertexClick,this),this._helperLayers.addLayer(g),g},_moveCircle(d){if(d.target._cancelDragEventChain)return;let g=this._centerMarker.getLatLng();this._layer.setLatLng(g);let _=this._layer._radius,S=this._getLatLngOnCircle(g,_);this._outerMarker._latlng=S,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let d=this._layer.getLatLng(),g=this._layer._radius,_=this._getLatLngOnCircle(d,g);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(d),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([d,g])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(d){this._vertexValidation("move",d)&&this._fireMarkerDragStart(d)},_onMarkerDrag(d){let g=d.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(d)},_onMarkerDragEnd(d){this._extedingMarkerDragEnd();let g=d.target;this._vertexValidationDragEnd(g)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(d))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let d=this._layer._map||this._map;if(d){let g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),d,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(g);let S=d&&d.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!S).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!S),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,g);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?g=au(this._map,d,g,this._getMinDistanceInMeter(d)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(g=au(this._map,d,g,this._getMaxDistanceInMeter(d))),g},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let d=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(d,g){return this._map.project(d).distanceTo(this._map.project(g))},_getMinDistanceInMeter(d){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,d)},_getMaxDistanceInMeter(d){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,d)},_onVertexClick(d){d.target._dragging||this._fireVertexClick(d,void 0)}}),Qt.Circle=Qt.CircleMarker.extend({_shape:"Circle",initialize(d){this._layer=d,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(d){L.PM.Edit.CircleMarker.prototype.enable.call(this,d||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let d=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(d,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let d=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!d).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!d),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(d,g){return this._map.distance(d,g)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(d){d.target._dragging||this._fireVertexClick(d,void 0)}}),Qt.ImageOverlay=Qt.extend({_shape:"ImageOverlay",initialize(d){this._layer=d,this._enabled=!1},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},enabled(){return this._enabled},enable(d={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,d),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let d=this._layer.getBounds(),g=d.getNorthWest(),_=d.getNorthEast(),S=d.getSouthEast(),P=d.getSouthWest();return[g,_,S,P]}}),Qt.Text=Qt.extend({_shape:"Text",initialize(d){this._layer=d,this._enabled=!1},enable(d){if(L.Util.setOptions(this,d),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let d=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),d.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let d=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${d}px`,this.textArea.style.width=`${g}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(d){d.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(d={}){let g=this._hasFocus;this._hasFocus=d.type==="focus",!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(d){d&&(this.textArea.value=d),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let g=this.options.className.split(" ");this.textArea.classList.add(...g)}let d=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(d),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(d=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),d===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(d){d.preventDefault()}});var nn=function(d,g,_,S,P,V){this._matrix=[d,g,_,S,P,V]};nn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),nn.prototype={transform(d){return this._transform(d.clone())},_transform(d){let g=this._matrix,{x:_,y:S}=d;return d.x=g[0]*_+g[1]*S+g[4],d.y=g[2]*_+g[3]*S+g[5],d},untransform(d){let g=this._matrix;return new L.Point((d.x/g[0]-g[4])/g[0],(d.y/g[2]-g[5])/g[2])},clone(){let d=this._matrix;return new L.PM.Matrix(d[0],d[1],d[2],d[3],d[4],d[5])},translate(d){if(d===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let g,_;return typeof d=="number"?(g=d,_=d):(g=d.x,_=d.y),this._add(1,0,0,1,g,_)},scale(d,g){if(d===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,S;return g=g||L.point(0,0),typeof d=="number"?(_=d,S=d):(_=d.x,S=d.y),this._add(_,0,0,S,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},rotate(d,g){let _=Math.cos(d),S=Math.sin(d);return g=g||new L.Point(0,0),this._add(_,S,-S,_,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(d,g,_,S,P,V){let te=[[],[],[]],se=this._matrix,ye=[[se[0],se[2],se[4]],[se[1],se[3],se[5]],[0,0,1]],Ee=[[d,_,P],[g,S,V],[0,0,1]],nt;d&&d instanceof L.PM.Matrix&&(se=d._matrix,Ee=[[se[0],se[2],se[4]],[se[1],se[3],se[5]],[0,0,1]]);for(let Ye=0;Ye<3;Ye+=1)for(let _t=0;_t<3;_t+=1){nt=0;for(let Bt=0;Bt<3;Bt+=1)nt+=ye[Ye][Bt]*Ee[Bt][_t];te[Ye][_t]=nt}return this._matrix=[te[0][0],te[1][0],te[0][1],te[1][1],te[0][2],te[1][2]],this}};var hn=nn,sn={calcMiddleLatLng(d,g,_){let S=d.project(g),P=d.project(_);return d.unproject(S._add(P)._divideBy(2))},findLayers(d){let g=[];return d.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&g.push(_)}),g=g.filter(_=>!!_.pm),g=g.filter(_=>!_._pmTempLayer),g=g.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),g},circleToPolygon(d,g=60,_=!0){let S=d.getLatLng(),P=d.getRadius(),V=Ii(S,P,g,0,_),te=[];for(let se=0;se<V.length;se+=1){let ye=[V[se].lat,V[se].lng];te.push(ye)}return L.polygon(te,d.options)},disablePopup(d){d.getPopup()&&(d._tempPopupCopy=d.getPopup(),d.unbindPopup())},enablePopup(d){d._tempPopupCopy&&(d.bindPopup(d._tempPopupCopy),delete d._tempPopupCopy)},_fireEvent(d,g,_,S=!1){d.fire(g,_,S);let{groups:P}=this.getAllParentGroups(d);P.forEach(V=>{V.fire(g,_,S)})},getAllParentGroups(d){let g=[],_=[],S=P=>{for(let V in P._eventParents)if(g.indexOf(V)===-1){g.push(V);let te=P._eventParents[V];_.push(te),S(te)}};return!d._pmLastGroupFetch||!d._pmLastGroupFetch.time||new Date().getTime()-d._pmLastGroupFetch.time>1e3?(S(d),d._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:g},{groupIds:g,groups:_}):{groups:d._pmLastGroupFetch.groups,groupIds:d._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Ii,getTranslation:sr,findDeepCoordIndex(d,g,_=!0){let S,P=te=>(se,ye)=>{let Ee=te.concat(ye);if(_){if(se.lat&&se.lat===g.lat&&se.lng===g.lng)return S=Ee,!0}else if(se.lat&&L.latLng(se).equals(g))return S=Ee,!0;return Array.isArray(se)&&se.some(P(Ee))};d.some(P([]));let V={};return S&&(V={indexPath:S,index:S[S.length-1],parentPath:S.slice(0,S.length-1)}),V},findDeepMarkerIndex(d,g){let _,S=V=>(te,se)=>{let ye=V.concat(se);return te._leaflet_id===g._leaflet_id?(_=ye,!0):Array.isArray(te)&&te.some(S(ye))};d.some(S([]));let P={};return _&&(P={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),P},_getIndexFromSegment(d,g){if(g&&g.length===2){let _=this.findDeepCoordIndex(d,g[0]),S=this.findDeepCoordIndex(d,g[1]),P=Math.max(_.index,S.index);return(_.index===0||S.index===0)&&P!==1&&(P+=1),{indexA:_,indexB:S,newIndex:P,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(d,g,_,S){let P=Ze(S,d),V=Ze(S,g),te=_*Math.PI/180,se=Math.cos(te),ye=Math.sin(te),Ee=(V.x-P.x)*se+(V.y-P.y)*ye,nt=(V.y-P.y)*se-(V.x-P.x)*ye,Ye=Ee*se+P.x,_t=Ee*ye+P.y,Bt=-nt*ye+P.x,tn=nt*se+P.y,_n=gt(S,P),Mn=gt(S,{x:Ye,y:_t}),cr=gt(S,V),tt=gt(S,{x:Bt,y:tn});return[_n,Mn,cr,tt]},pxRadiusToMeterRadius(d,g,_){let S=g.project(_),P=L.point(S.x+d,S.y);return g.distance(g.unproject(P),_)}},Dn=sn;L.PM=L.PM||{version:Zi.version,Map:As,Toolbar:Tl,Draw:es,Edit:Qt,Utils:Dn,Matrix:hn,activeLang:"en",optIn:!1,initialize(d){this.addInitHooks(d)},setOptIn(d){this.optIn=!!d},addInitHooks(){function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(d);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function S(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(S);function P(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(P);function V(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(V);function te(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(te);function se(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(se);function ye(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(ye)},reInitLayer(d){d instanceof L.LayerGroup&&d.eachLayer(g=>{this.reInitLayer(g)}),d.pm||L.PM.optIn&&d.options.pmIgnore!==!1||d.options.pmIgnore||(d instanceof L.Map?d.pm=new L.PM.Map(d):d instanceof L.Marker?d.options.textMarker?(d.pm=new L.PM.Edit.Text(d),d.pm._initTextMarker(),d.pm._createTextMarker(!1)):d.pm=new L.PM.Edit.Marker(d):d instanceof L.Circle?d.pm=new L.PM.Edit.Circle(d):d instanceof L.CircleMarker?d.pm=new L.PM.Edit.CircleMarker(d):d instanceof L.Rectangle?d.pm=new L.PM.Edit.Rectangle(d):d instanceof L.Polygon?d.pm=new L.PM.Edit.Polygon(d):d instanceof L.Polyline?d.pm=new L.PM.Edit.Line(d):d instanceof L.LayerGroup?d.pm=new L.PM.Edit.LayerGroup(d):d instanceof L.ImageOverlay&&(d.pm=new L.PM.Edit.ImageOverlay(d)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(d){let g=this._map.mouseEventToLayerPoint(d),_,S;for(let P=this._drawFirst;P;P=P.next)_=P.layer,_.options.interactive&&_._containsPoint(g)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(_))&&(S=_);S&&(L.DomEvent.fakeStop(d),this._fireEvent([S],d))}}),L.PM.initialize()})();var VV={exports:{}};(function(n){(function(e){var t;t=Ut,n.exports=e(t)})(function(e){return e.Polyline._flat=e.LineUtil.isFlat||e.Polyline._flat||function(t){return!e.Util.isArray(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"},e.GeometryUtil=e.extend(e.GeometryUtil||{},{distance:function(t,r,i){return t.latLngToLayerPoint(r).distanceTo(t.latLngToLayerPoint(i))},distanceSegment:function(t,r,i,s){var o=t.latLngToLayerPoint(r),a=t.latLngToLayerPoint(i),l=t.latLngToLayerPoint(s);return e.LineUtil.pointToSegmentDistance(o,a,l)},readableDistance:function(t,r){var i=r!=="imperial",s;return i?t>1e3?s=(t/1e3).toFixed(2)+" km":s=t.toFixed(1)+" m":(t*=1.09361,t>1760?s=(t/1760).toFixed(2)+" miles":s=t.toFixed(1)+" yd"),s},belongsSegment:function(t,r,i,s){s=s===void 0?.2:s;var o=r.distanceTo(i),a=r.distanceTo(t)+t.distanceTo(i)-o;return a/o<s},length:function(t){var r=e.GeometryUtil.accumulatedLengths(t);return r.length>0?r[r.length-1]:0},accumulatedLengths:function(t){if(typeof t.getLatLngs=="function"&&(t=t.getLatLngs()),t.length===0)return[];for(var r=0,i=[0],s=0,o=t.length-1;s<o;s++)r+=t[s].distanceTo(t[s+1]),i.push(r);return i},closestOnSegment:function(t,r,i,s){var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());var a=t.project(r,o),l=t.project(i,o),u=t.project(s,o),h=e.LineUtil.closestPointOnSegment(a,l,u);return t.unproject(h,o)},closestOnCircle:function(t,r){const i=t.getLatLng(),s=t.getRadius(),o=typeof s=="number"?s:s.radius,a=r.lng,l=r.lat,u=i.lng,h=i.lat,p=a-u,v=l-h,m=Math.sqrt(p*p+v*v),C=u+p/m*o,E=h+v/m*o;return new e.LatLng(E,C)},closest:function(t,r,i,s){var o,a=1/0,l=null,u,h,p,v;if(r instanceof Array)if(r[0]instanceof Array&&typeof r[0][0]!="number"){for(u=0;u<r.length;u++)v=e.GeometryUtil.closest(t,r[u],i,s),v&&v.distance<a&&(a=v.distance,l=v);return l}else if(r[0]instanceof e.LatLng||typeof r[0][0]=="number"||typeof r[0].lat=="number")r=e.polyline(r);else return l;if(!(r instanceof e.Polyline))return l;if(o=JSON.parse(JSON.stringify(r.getLatLngs().slice(0))),r instanceof e.Polygon){var m=function(A){if(e.Polyline._flat(A))A.push(A[0]);else for(var D=0;D<A.length;D++)m(A[D])};m(o)}if(e.Polyline._flat(o)){if(s){for(u=0,h=o.length;u<h;u++){var C=o[u];p=e.GeometryUtil.distance(t,i,C),p<a&&(a=p,l=C,l.distance=p)}return l}for(u=0,h=o.length;u<h-1;u++){var E=o[u],k=o[u+1];p=e.GeometryUtil.distanceSegment(t,i,E,k),p<=a&&(a=p,l=e.GeometryUtil.closestOnSegment(t,i,E,k),l.distance=p)}return l}else{for(u=0;u<o.length;u++)v=e.GeometryUtil.closest(t,o[u],i,s),v.distance<a&&(a=v.distance,l=v);return l}},closestLayer:function(t,r,i){for(var s=1/0,o=null,a=null,l=1/0,u=0,h=r.length;u<h;u++){var p=r[u];if(p instanceof e.LayerGroup){var v=e.GeometryUtil.closestLayer(t,p.getLayers(),i);v.distance<s&&(s=v.distance,o=v)}else p instanceof e.Circle?(a=this.closestOnCircle(p,i),l=e.GeometryUtil.distance(t,i,a)):typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(t,i,a)):(a=e.GeometryUtil.closest(t,p,i),a&&(l=a.distance)),l<s&&(s=l,o={layer:p,latlng:a,distance:l})}return o},nClosestLayers:function(t,r,i,s){if(s=typeof s=="number"?s:r.length,s<1||r.length<1)return null;for(var o=[],a,l,u=0,h=r.length;u<h;u++){var p=r[u];if(p instanceof e.LayerGroup){var v=e.GeometryUtil.closestLayer(t,p.getLayers(),i);o.push(v)}else p instanceof e.Circle?(l=this.closestOnCircle(p,i),a=e.GeometryUtil.distance(t,i,l)):typeof p.getLatLng=="function"?(l=p.getLatLng(),a=e.GeometryUtil.distance(t,i,l)):(l=e.GeometryUtil.closest(t,p,i),l&&(a=l.distance)),o.push({layer:p,latlng:l,distance:a})}return o.sort(function(m,C){return m.distance-C.distance}),o.length>s?o.slice(0,s):o},layersWithin:function(t,r,i,s){s=typeof s=="number"?s:1/0;for(var o=[],a=null,l=0,u=0,h=r.length;u<h;u++){var p=r[u];typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(t,i,a)):(a=e.GeometryUtil.closest(t,p,i),a&&(l=a.distance)),a&&l<s&&o.push({layer:p,latlng:a,distance:l})}var v=o.sort(function(m,C){return m.distance-C.distance});return v},closestLayerSnap:function(t,r,i,s,o){s=typeof s=="number"?s:1/0,o=typeof o=="boolean"?o:!0;var a=e.GeometryUtil.closestLayer(t,r,i);if(!a||a.distance>s)return null;if(o&&typeof a.layer.getLatLngs=="function"){var l=e.GeometryUtil.closest(t,a.layer,a.latlng,!0);l.distance<s&&(a.latlng=l,a.distance=e.GeometryUtil.distance(t,l,i))}return a},interpolateOnPointSegment:function(t,r,i){return e.point(t.x*(1-i)+i*r.x,t.y*(1-i)+i*r.y)},interpolateOnLine:function(t,r,i){r=r instanceof e.Polyline?r.getLatLngs():r;var s=r.length;if(s<2)return null;if(i=Math.max(Math.min(i,1),0),i===0)return{latLng:r[0]instanceof e.LatLng?r[0]:e.latLng(r[0]),predecessor:-1};if(i==1)return{latLng:r[r.length-1]instanceof e.LatLng?r[r.length-1]:e.latLng(r[r.length-1]),predecessor:r.length-2};var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());for(var a=[],l=0,u=0;u<s;u++)a[u]=t.project(r[u],o),u>0&&(l+=a[u-1].distanceTo(a[u]));for(var h=l*i,p=0,v=0,u=0;v<h;u++){var m=a[u],C=a[u+1];p=v,v+=m.distanceTo(C)}if(m==null&&C==null)var m=a[0],C=a[1],u=1;var E=v-p!==0?(h-p)/(v-p):0,k=e.GeometryUtil.interpolateOnPointSegment(m,C,E);return{latLng:t.unproject(k,o),predecessor:u-1}},locateOnLine:function(t,r,i){var s=r.getLatLngs();if(i.equals(s[0]))return 0;if(i.equals(s[s.length-1]))return 1;for(var o=e.GeometryUtil.closest(t,r,i,!1),a=e.GeometryUtil.accumulatedLengths(s),l=a[a.length-1],u=0,h=!1,p=0,v=s.length-1;p<v;p++){var m=s[p],C=s[p+1];if(u=a[p],e.GeometryUtil.belongsSegment(o,m,C,.001)){u+=m.distanceTo(o),h=!0;break}}if(!h)throw"Could not interpolate "+i.toString()+" within "+r.toString();return u/l},reverse:function(t){return e.polyline(t.getLatLngs().slice(0).reverse())},extract:function(t,r,i,s){if(i>s)return e.GeometryUtil.extract(t,e.GeometryUtil.reverse(r),1-i,1-s);i=Math.max(Math.min(i,1),0),s=Math.max(Math.min(s,1),0);var o=r.getLatLngs(),a=e.GeometryUtil.interpolateOnLine(t,r,i),l=e.GeometryUtil.interpolateOnLine(t,r,s);if(i==s){var u=e.GeometryUtil.interpolateOnLine(t,r,s);return[u.latLng]}a.predecessor==-1&&(a.predecessor=0),l.predecessor==-1&&(l.predecessor=0);var h=o.slice(a.predecessor+1,l.predecessor+1);return h.unshift(a.latLng),h.push(l.latLng),h},isBefore:function(t,r){if(!r)return!1;var i=t.getLatLngs(),s=r.getLatLngs();return i[i.length-1].equals(s[0])},isAfter:function(t,r){if(!r)return!1;var i=t.getLatLngs(),s=r.getLatLngs();return i[0].equals(s[s.length-1])},startsAtExtremity:function(t,r){if(!r)return!1;var i=t.getLatLngs(),s=r.getLatLngs(),o=i[0];return o.equals(s[0])||o.equals(s[s.length-1])},computeAngle:function(t,r){return Math.atan2(r.y-t.y,r.x-t.x)*180/Math.PI},computeSlope:function(t,r){var i=(r.y-t.y)/(r.x-t.x),s=t.y-i*t.x;return{a:i,b:s}},rotatePoint:function(t,r,i,s){var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());var a=i*Math.PI/180,l=t.project(r,o),u=t.project(s,o),h=Math.cos(a)*(l.x-u.x)-Math.sin(a)*(l.y-u.y)+u.x,p=Math.sin(a)*(l.x-u.x)+Math.cos(a)*(l.y-u.y)+u.y;return t.unproject(new e.Point(h,p),o)},bearing:function(t,r){var i=Math.PI/180,s=t.lat*i,o=r.lat*i,a=t.lng*i,l=r.lng*i,u=Math.sin(l-a)*Math.cos(o),h=Math.cos(s)*Math.sin(o)-Math.sin(s)*Math.cos(o)*Math.cos(l-a),p=(Math.atan2(u,h)*180/Math.PI+360)%360;return p>=180?p-360:p},destination:function(t,r,i){r=(r+360)%360;var s=Math.PI/180,o=180/Math.PI,a=e.CRS.Earth.R,l=t.lng*s,u=t.lat*s,h=r*s,p=Math.sin(u),v=Math.cos(u),m=Math.cos(i/a),C=Math.sin(i/a),E=Math.asin(p*m+v*C*Math.cos(h)),k=l+Math.atan2(Math.sin(h)*C*v,m-p*Math.sin(E));return k=k*o,k=k>180?k-360:k<-180?k+360:k,e.latLng([E*o,k])},angle:function(t,r,i){var s=t.latLngToContainerPoint(r),o=t.latLngToContainerPoint(i),a=Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI+90;return a+=a<0?360:0,a},destinationOnSegment:function(t,r,i,s){var o=e.GeometryUtil.angle(t,r,i),a=e.GeometryUtil.destination(r,o,s);return e.GeometryUtil.closestOnSegment(t,a,r,i)}}),e.GeometryUtil})})(VV);L.Map.mergeOptions({almostOver:!0,almostDistance:25,almostSamplingPeriod:50,almostOnMouseMove:!0});L.Handler.AlmostOver=L.Handler.extend({includes:L.Evented||L.Mixin.Events,initialize:function(n){this._map=n,this._layers=[],this._previous=null,this._marker=null,this._buffer=0,this.__mouseMoveSampling=function(){var e=new Date;return function(t){var r=new Date,i=r-e<this._map.options.almostSamplingPeriod;i||this._layers.length===0||(e=r,this._map.fire("mousemovesample",{latlng:t.latlng}))}}()},addHooks:function(){this._map.options.almostOnMouseMove&&(this._map.on("mousemove",this.__mouseMoveSampling,this),this._map.on("mousemovesample",this._onMouseMove,this)),this._map.on("click dblclick",this._onMouseClick,this),this._map;function n(){this._buffer=this._map.layerPointToLatLng([0,0]).lat-this._map.layerPointToLatLng([this._map.options.almostDistance,this._map.options.almostDistance]).lat}this._map.on("viewreset zoomend",n,this),this._map.whenReady(n,this)},removeHooks:function(){this._map.off("mousemovesample"),this._map.off("mousemove",this.__mouseMoveSampling,this),this._map.off("click dblclick",this._onMouseClick,this)},addLayer:function(n){typeof n.eachLayer=="function"?n.eachLayer(function(e){this.addLayer(e)},this):(typeof this.indexLayer=="function"&&this.indexLayer(n),this._layers.push(n))},removeLayer:function(n){if(typeof n.eachLayer=="function")n.eachLayer(function(t){this.removeLayer(t)},this);else{typeof this.unindexLayer=="function"&&this.unindexLayer(n);var e=this._layers.indexOf(n);0<=e&&this._layers.splice(e,1)}this._previous=null},getClosest:function(n){var e=L.GeometryUtil.closestLayerSnap,t=this._map.options.almostDistance,r=[];return typeof this.searchBuffer=="function"?r=this.searchBuffer(n,this._buffer):r=this._layers,e(this._map,r,n,t,!1)},_onMouseMove:function(n){var e=this.getClosest(n.latlng);e?(this._previous?L.stamp(this._previous.layer)!=L.stamp(e.layer)&&(this._map.fire("almost:out",{layer:this._previous.layer}),this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng})):this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng}),this._map.fire("almost:move",{layer:e.layer,latlng:e.latlng})):this._previous&&this._map.fire("almost:out",{layer:this._previous.layer}),this._previous=e},_onMouseClick:function(n){var e=this.getClosest(n.latlng);e&&this._map.fire("almost:"+n.type,{layer:e.layer,latlng:e.latlng})}});L.LayerIndexMixin!==void 0&&L.Handler.AlmostOver.include(L.LayerIndexMixin);L.Map.addInitHook("addHandler","almostOver",L.Handler.AlmostOver);class lp extends Hn.Circle{constructor(t,r){const i=r.radius||10;super(t,i,r);Je(this,"properties");Je(this,"angleCache",new Map);Je(this,"lastCenter");Je(this,"lastCenterCosLat");Je(this,"_pendingNameUpdate",!1);Je(this,"_nameUpdateTimeout",null);kn.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){kn.measure("Circle.updateProperties",()=>{var a,l,u,h;const t=this.getRadius(),r=this.getLatLng(),i=((l=(a=this.properties)==null?void 0:a.style)==null?void 0:l.name)||"",s=((u=this.properties)==null?void 0:u.style)||{},o={type:"Circle",radius:t,diameter:t*2,surface:Math.PI*Math.pow(t,2),perimeter:2*Math.PI*t,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((h=this.options)==null?void 0:h.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(t){kn.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==t&&(this.properties.style||(this.properties.style={}),this.properties.style.name=t,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return kn.measure("Circle.getName",()=>{var t,r;return((r=(t=this.properties)==null?void 0:t.style)==null?void 0:r.name)||""},"Circle")}setRadius(t){return kn.measure("Circle.setRadius",()=>(super.setRadius(t),this.updateProperties(),this),"Circle")}setLatLng(t){return kn.measure("Circle.setLatLng",()=>(super.setLatLng(t),this.updateProperties(),this),"Circle")}calculatePointOnCircle(t){return kn.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(t);if(!s){const o=t*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(t,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Hn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return kn.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(t=>this.calculatePointOnCircle(t)),"Circle")}calculateAngleFromPoint(t){return kn.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=t.lng-r.lng,s=t.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(t){kn.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(t);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const Zv=(n,e)=>{if(!n||typeof n!="string"||!n.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const t=parseInt(n.slice(1,3),16),r=parseInt(n.slice(3,5),16),i=parseInt(n.slice(5,7),16);return`rgba(${t}, ${r}, ${i}, ${e})`},x5=(n,e)=>{n.style.fontSize=e.fontSize,n.style.color=e.color,n.style.backgroundColor=Zv(e.backgroundColor,e.backgroundOpacity),e.hasBorder?n.style.border=`${e.borderWidth} solid ${Zv(e.borderColor,e.borderOpacity)}`:n.style.border="none",n.style.padding=e.padding,n.style.borderRadius=e.borderRadius},Yo=n=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const t=Ut.DomUtil.create("div","drawing-help-message");return t.innerHTML=n,t.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(t),t};function L5(n,e,t){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,t);return n/r}const ji=(n,e="m",t="")=>{let r,i;return e==="m²"?n>=1e4?(r=(n/1e4).toFixed(2),i="ha"):(r=n.toFixed(2),i="m²"):e==="m"?n>=1e3?(r=(n/1e3).toFixed(2),i="km"):(r=n.toFixed(2),i="m"):(r=n.toFixed(2),i=e),t?`${t}: ${r} ${i}`:`${r} ${i}`},HV=n=>({...n,clientX:n.clientX,clientY:n.clientY,button:n.button||0,buttons:n.buttons||0,altKey:n.altKey||!1}),GV=(n,e)=>{let t;return function(...r){window.clearTimeout(t),t=window.setTimeout(()=>n.apply(this,r),e)}},qh=(n,e)=>{let t=0;return function(...r){const i=Date.now();if(!(i-t<e))return t=i,n.apply(this,r)}};function WV(){const n=wt(null),e=wt(null),t=wt(null),r=wt(null),i=wt(""),s=wt(null),o=wt(!1),a=wt(null);window.addEventListener("clearControlPoints",()=>{s.value=null,t.value&&t.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(H=>H.remove()),document.querySelectorAll(".drawing-help-message").forEach(H=>H.remove())}),Jl(()=>{window.removeEventListener("clearControlPoints",()=>{}),n.value&&(n.value.remove(),n.value=null)});const l=(H,ee="Double-cliquez pour éditer")=>{const pe={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},re=(Ke,Me)=>{var ut;const he=((ut=n.value)==null?void 0:ut.getZoom())||14,We=H.lat,at=L5(Me.physicalSize,We,he);return`<div class="text-container" style="width:${at}px;height:${at}px;transform:rotate(${Me.rotation}deg)">
        <div class="text-annotation" style="font-size:${at*.2}px;color:${Me.color};background-color:${Zv(Me.backgroundColor,Me.backgroundOpacity)};border:${Me.hasBorder?Me.borderWidth+" solid "+Zv(Me.borderColor,Me.borderOpacity):"none"};padding:${Me.padding};border-radius:${Me.borderRadius}">${Ke}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},ae=()=>{if(!n.value)return;const Ke=be.getIcon(),Me={html:re(be.properties.text,be.properties.style),className:Ke.options.className};be.setIcon(Ut.divIcon(Me))},De=Ut.divIcon({html:re(ee,pe),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),be=Ut.marker(H,{icon:De,draggable:!1,pmIgnore:!0});be.properties={type:"text",text:ee,style:{...pe}},n.value&&(n.value.on("zoomend",ae),be.on("remove",()=>{var Ke;(Ke=n.value)==null||Ke.off("zoomend",ae)})),ae();let Ie=!1,le=!1,me=0,oe=0;const Z=Ke=>{if(!n.value)return;const Me=Ke.target;if(Me.classList.contains("rotate")){Ie=!0;const he=be.getLatLng(),We=n.value.mouseEventToLatLng(Ke);me=Math.atan2(We.lat-he.lat,We.lng-he.lng)*180/Math.PI,oe=be.properties.style.rotation||0}else Me.classList.contains("move")&&(le=!0);document.addEventListener("mousemove",Ae),document.addEventListener("mouseup",je)},Ae=Ke=>{if(!(!le||!n.value)){if(Ie){const Me=be.getLatLng(),he=n.value.mouseEventToLatLng(Ke),We=Math.atan2(he.lat-Me.lat,he.lng-Me.lng)*180/Math.PI,at=(oe+(We-me))%360;be.properties.style.rotation=at;const ut=be.getIcon(),Ct={html:re(be.properties.text,be.properties.style),className:ut.options.className};be.setIcon(Ut.divIcon(Ct))}else if(le){const Me=HV(Ke),he=n.value.mouseEventToLatLng(Me);be.setLatLng(he)}}},je=()=>{Ie=!1,le=!1,document.removeEventListener("mousemove",Ae),document.removeEventListener("mouseup",je)};return be.on("add",()=>{const Ke=be.getElement();Ke&&Ke.querySelectorAll(".control-button").forEach(he=>{he.addEventListener("mousedown",Z)})}),be.on("remove",()=>{const Ke=be.getElement();Ke&&Ke.querySelectorAll(".control-button").forEach(he=>{he.removeEventListener("mousedown",Z)})}),be.on("dblclick",Ke=>{var Ct;Ut.DomEvent.stopPropagation(Ke);const Me=(Ct=be.getElement())==null?void 0:Ct.querySelector(".text-annotation");if(!Me)return;Me.contentEditable="true",Me.focus(),Me.classList.add("editing");const he=window.getSelection(),We=document.createRange();We.selectNodeContents(Me),he==null||he.removeAllRanges(),he==null||he.addRange(We);const at=()=>{Me.contentEditable="false",Me.classList.remove("editing");const Xe=Me.innerText.trim();if(Xe){be.properties.text=Xe;const zt=be.getIcon(),qt={html:re(Xe,be.properties.style),className:zt.options.className};be.setIcon(Ut.divIcon(qt))}Me.removeEventListener("blur",at),Me.removeEventListener("keydown",ut)},ut=Xe=>{Xe.key==="Enter"&&!Xe.shiftKey&&(Xe.preventDefault(),at())};Me.addEventListener("blur",at),Me.addEventListener("keydown",ut)}),be},u=(H,ee)=>{const pe=Ut.DomUtil.create("div","measure-tooltip");if(pe.innerHTML=ee,pe.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(pe),n.value){const re=n.value.latLngToContainerPoint(H);pe.style.left=`${re.x+10}px`,pe.style.top=`${re.y-25}px`}return pe},h=qh((H,ee,pe)=>{if(H&&(H.innerHTML=pe,n.value)){const re=n.value.latLngToContainerPoint(ee);H.style.left=`${re.x+10}px`,H.style.top=`${re.y-25}px`}},100),p=(H,ee,pe)=>{H.on("mouseover",()=>{const re=u(H.getLatLng(),pe());H.measureDiv=re}),H.on("mousemove",re=>{H.measureDiv&&n.value&&h(H.measureDiv,re.latlng,pe())}),H.on("mouseout",()=>{H.measureDiv&&(H.measureDiv.remove(),H.measureDiv=void 0)})};let v=[];const m=()=>{var H;v.cleanup&&v.cleanup(),t.value&&t.value.clearLayers(),v=[],(H=r.value)==null||H.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(ee=>ee.remove()),e.value&&e.value.getLayers().forEach(ee=>{ee instanceof Aa&&ee.clearHelperPoints()})},C=(H,ee="#2563EB")=>{const pe=Ut.circleMarker(H,{radius:6,color:ee,fillColor:ee,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return t.value&&t.value.addLayer(pe),pe},E=(H,ee)=>{var re,ae,De,be,Ie,le;console.log("Input layer:",{type:ee,instanceof:{Circle:H instanceof Ut.Circle,Rectangle:H instanceof Ut.Rectangle,Polygon:H instanceof Ut.Polygon,Polyline:H instanceof Ut.Polyline,Line:H instanceof xs},options:H.options});const pe={type:ee,style:H.options||{}};try{if(H instanceof Ut.Circle){const me=H.getRadius();pe.radius=me,pe.diameter=me*2,pe.surface=Math.PI*Math.pow(me,2),pe.perimeter=2*Math.PI*me,pe.center=H.getLatLng()}else if(H instanceof Ut.Rectangle){const me=H.getBounds(),oe=me.getNorthEast(),Z=me.getSouthWest(),Ae=yc([[Z.lng,Z.lat],[oe.lng,Z.lat]]),je=yc([[Z.lng,Z.lat],[Z.lng,oe.lat]]),Ke=Wh(Ae,{units:"meters"}),Me=Wh(je,{units:"meters"});pe.width=Ke,pe.height=Me,pe.surface=Ke*Me,pe.perimeter=2*(Ke+Me),pe.dimensions={width:Ke,height:Me}}else if(H instanceof Ut.Polygon)try{const oe=H.getLatLngs()[0].map(Ae=>[Ae.lng,Ae.lat]);oe.push(oe[0]);const Z=Hu([oe]);pe.surface=$c(Z),pe.perimeter=Wh(yc(oe),{units:"meters"})}catch(me){console.error("Erreur lors du calcul des propriétés du polygone",me)}else if(H instanceof Ut.Polyline&&!(H instanceof Ut.Polygon))try{const me=H.getLatLngs();let oe=0;for(let Z=1;Z<me.length;Z++)oe+=me[Z].distanceTo(me[Z-1]);pe.length=oe}catch(me){console.error("Erreur lors du calcul de la longueur de la ligne",me)}pe.style={...pe.style,color:((re=H.options)==null?void 0:re.color)||"#3388ff",weight:((ae=H.options)==null?void 0:ae.weight)||3,opacity:((De=H.options)==null?void 0:De.opacity)||1,fillColor:((be=H.options)==null?void 0:be.fillColor)||"#3388ff",fillOpacity:((Ie=H.options)==null?void 0:Ie.fillOpacity)||.2,dashArray:((le=H.options)==null?void 0:le.dashArray)||""}}catch(me){console.error("Error calculating shape properties:",me)}return pe},k=(H,ee=2)=>{var be;if(!n.value){console.warn("Map is not available for text size update");return}const pe=n.value.getZoom(),re=H.getLatLng().lat,ae=L5(ee,re,pe),De=(be=H.getElement())==null?void 0:be.querySelector(".text-annotation");De&&(H.properties.style.fontSize=`${ae}px`,H.properties.physicalWidth=ee,H.properties.physicalHeight=ee,x5(De,H.properties.style))},A=()=>{if(!n.value||!n.value.almostOver||!e.value)return;const H=e.value.getLayers().filter(ee=>ee instanceof xs||ee instanceof Ut.Polyline&&!(ee instanceof Ut.Polygon)||ee instanceof Gl||ee instanceof xl);H.forEach(ee=>{var pe;(pe=n.value)==null||pe.almostOver.addLayer(ee),console.log("[useMapDrawing] Couche ajoutée à almostOver:",ee)}),console.log(`[useMapDrawing] ${H.length} couches ajoutées à almostOver`)},D=(H,ee,pe)=>{const re={almostOnMouseMove:!0,zoomAnimation:!0,fadeAnimation:!0,markerZoomAnimation:!0},ae=Ut.map(H,re).setView(ee,pe);n.value=ae,Ut.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(ae);const De=new Ut.FeatureGroup;return De.addTo(ae),e.value=De,ae.almostOver?ae.almostOver.options.tolerance=25:console.warn("Leaflet.AlmostOver plugin not loaded properly"),t.value=Ut.featureGroup().addTo(ae),r.value=Ut.featureGroup().addTo(ae),ae.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:De,snapLayers:[De,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),setTimeout(A,500),ae.on("pm:drawstart",be=>{o.value=!0,be.shape==="Circle"&&i.value==="Semicircle"&&(ae.getContainer().style.cursor="crosshair")}),ae.on("pm:drawend",()=>{o.value=!1,ae.getContainer().style.cursor="",s.value&&Yo("Cliquez sur la forme pour afficher les points de contrôle")}),ae.on("pm:create",ie),De.on("click",be=>{var le,me,oe,Z,Ae,je,Ke,Me,he,We,at,ut,Ct,Xe,zt;Ut.DomEvent.stopPropagation(be);const Ie=be.layer;if(Ie.name&&!((le=Ie.properties)!=null&&le.name)?(Ie.properties||(Ie.properties={}),Ie.properties.name=Ie.name):(me=Ie.properties)!=null&&me.name&&!Ie.name&&(Ie.name=Ie.properties.name),console.log("[featureGroup click] État du nom:",{directName:Ie.name,propertiesName:(oe=Ie.properties)==null?void 0:oe.name,fullProperties:Ie.properties}),(Z=r.value)==null||Z.clearLayers(),m(),s.value=Ie,Ie instanceof lp)J(Ie);else if(Ie instanceof Ut.Circle){console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(Ie,"name"),directName:Ie.name,propertiesName:(Ae=Ie.properties)==null?void 0:Ae.name,styleNameBeforeTransfer:(Ke=(je=Ie.properties)==null?void 0:je.style)==null?void 0:Ke.name,nameIsEnumerable:Object.keys(Ie).includes("name"),allProperties:Object.keys(Ie.properties||{}),_dbId:Ie._dbId});const qt=Ie.name,Qe=(Me=Ie.properties)==null?void 0:Me.name,ot=(We=(he=Ie.properties)==null?void 0:he.style)==null?void 0:We.name,it=Ie._dbId,At=new lp(Ie.getLatLng(),{...Ie.options,radius:Ie.getRadius()});Ie.properties?At.properties={...Ie.properties||{}}:At.updateProperties();const Yt=qt||Qe||ot;Yt&&(At.properties.name=Yt,At.properties.style||(At.properties.style={}),At.properties.style.name=Yt,At.name=Yt),it&&(At._dbId=it),console.log("[useMapDrawing] Cercle après conversion:",{name:At.name,propertiesName:At.properties.name,stylePropertyName:(at=At.properties.style)==null?void 0:at.name,allProperties:Object.keys(At.properties||{})}),(ut=e.value)==null||ut.removeLayer(Ie),(Ct=e.value)==null||Ct.addLayer(At),s.value=At,J(At)}else if(Ie instanceof Aa)U(Ie);else if(Ie instanceof Ut.Rectangle){const qt=new Aa(Ie.getBounds(),{...Ie.options});qt.updateProperties(),(Xe=e.value)==null||Xe.removeLayer(Ie),(zt=e.value)==null||zt.addLayer(qt),s.value=qt,U(qt)}else Ie instanceof Ut.Polygon?G(Ie):Ie instanceof xs||Ie instanceof Ut.Polyline?B(Ie):Ie instanceof xl&&$(Ie)}),ae.on("pm:edit",be=>{var le,me,oe;console.log("[pm:edit] Début",{layer:be.layer,currentProperties:be.layer.properties});const Ie=be.layer;if(Ie){const Z=((le=Ie.properties)==null?void 0:le.type)||"unknown";if(N(Ie,Z),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:Ie.properties,selectedShape:s.value}),Ie instanceof lp)J(Ie);else if(Ie instanceof Aa)U(Ie);else if(Ie instanceof Ut.Rectangle){const Ae=new Aa(Ie.getBounds(),{...Ie.options});Ae.updateProperties(),(me=e.value)==null||me.removeLayer(Ie),(oe=e.value)==null||oe.addLayer(Ae),s.value=Ae,U(Ae)}else Ie instanceof Ut.Polygon?G(Ie):Ie instanceof xs?(Ie.updateProperties(),N(Ie,"Line"),B(Ie)):Ie instanceof Ut.Polyline?B(Ie):Ie instanceof xl&&(Ie.updateProperties(),$(Ie))}}),ae.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(be=>be.remove()),Yo("Déplacez la forme à l'endroit souhaité")}),ae.on("pm:dragend",be=>{var le,me,oe;console.log("[pm:dragend] Début",{layer:be.layer,currentProperties:be.layer.properties});const Ie=be.layer;if(Ie){const Z=((le=Ie.properties)==null?void 0:le.type)||"unknown";if(Ie instanceof Ut.Rectangle&&!(Ie instanceof Aa)){const Ae=new Aa(Ie.getBounds(),{...Ie.options});Ae.updateProperties(),(me=e.value)==null||me.removeLayer(Ie),(oe=e.value)==null||oe.addLayer(Ae),s.value=Ae,U(Ae)}else Ie instanceof xs?(Ie.updateProperties(),N(Ie,"Line"),B(Ie)):N(Ie,Z);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:Ie.properties,selectedShape:s.value})}setTimeout(()=>{Yo("Cliquez sur la forme pour afficher les points de contrôle")},100)}),ae.on("pm:remove",()=>{var be;(be=document.querySelector(".drawing-help-message"))==null||be.remove()}),ae.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(be=>be.remove()),Yo("Utilisez les points de contrôle pour modifier la forme")}),ae.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(be=>be.remove())}),ae.on("zoomstart",()=>{s.value&&(m(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(be=>be.remove()))}),ae.on("almost:over",function(be){const le=be.layer;if(le){if(s.value===le)return;if(le instanceof xs){const me={...le.options};le._originalStyle=me,le.setStyle({weight:(me.weight||3)+2,opacity:Math.min((me.opacity||1)+.2,1)}),document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove()),Yo("Cliquez pour sélectionner cette ligne"),ae.getContainer()&&(ae.getContainer().style.cursor="pointer")}else if(le instanceof Gl){const me={...le.options};le._originalStyle=me,le.setStyle({weight:(me.weight||3)+2,opacity:Math.min((me.opacity||1)+.2,1),fillOpacity:Math.min((me.fillOpacity||.2)+.1,.4)}),document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove()),Yo("Cliquez pour sélectionner ce polygone"),ae.getContainer()&&(ae.getContainer().style.cursor="pointer")}else if(le instanceof xl){const me=le.getElement();me&&(console.log("[almost:over] État initial de la GeoNote",{display:me.style.display,visibility:me.style.visibility,opacity:me.style.opacity,filter:me.style.filter}),me.classList.add("geo-note-pulse"),me.style.zIndex="1000",me.style.visibility="visible",me.style.display="flex",me.style.opacity="1",me.style.filter="drop-shadow(0 0 5px rgba(59, 130, 246, 0.7))",console.log("[almost:over] GeoNote après application de l'effet",me)),document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove()),Yo("Cliquez pour sélectionner cette note"),ae.getContainer()&&(ae.getContainer().style.cursor="pointer")}}}),ae.on("almost:out",function(be){const le=be.layer;if(le){if(s.value===le)return;if(le instanceof xs&&le._originalStyle)le.setStyle(le._originalStyle),le._originalStyle=void 0;else if(le instanceof Gl)le._originalStyle&&(le.setStyle(le._originalStyle),le._originalStyle=void 0);else if(le instanceof xl){const me=le.getElement();me?(console.log("[almost:out] État de la GeoNote avant réinitialisation",{display:me.style.display,visibility:me.style.visibility,opacity:me.style.opacity,filter:me.style.filter}),me.classList.remove("geo-note-pulse"),me.style.zIndex="",me.style.filter="none",me.style.opacity="1",me.style.display="block",me.style.visibility="visible",Array.from(me.querySelectorAll("*")).forEach(oe=>{oe.style.visibility="visible",oe.style.display="block",oe.style.opacity="1"}),console.log("[almost:out] GeoNote après réinitialisation",me),setTimeout(()=>{try{const oe=me.getBoundingClientRect();(oe.width===0||oe.height===0)&&(console.warn("[almost:out] L'élément a une taille nulle après sortie, recréation de l'icône"),le.recreateIcon())}catch(oe){console.error("[almost:out] Erreur lors de la vérification de la taille:",oe),le.recreateIcon()}},100)):(console.warn("[almost:out] Élément DOM introuvable, recréation de l'icône"),le.recreateIcon())}(!s.value||s.value&&s.value!==le)&&document.querySelectorAll(".drawing-help-message").forEach(me=>me.remove()),ae.getContainer()&&!document.querySelectorAll(".geo-note-pulse").length&&!document.querySelectorAll(".line-hover-effect").length&&(ae.getContainer().style.cursor="")}}),ae.on("almost:click",function(be){var me,oe;const Ie=be;console.log("[almost:click] Clic à proximité d'une couche",Ie);const le=Ie.layer;le&&s.value===le||(s.value&&m(),le&&le instanceof xs?(s.value=le,(me=r.value)==null||me.clearLayers(),m(),B(le),Yo("Utilisez les points de contrôle pour modifier la ligne")):le&&le instanceof Gl?(s.value=le,(oe=r.value)==null||oe.clearLayers(),m(),G(le),Yo("Utilisez les points de contrôle pour modifier le polygone")):le&&le instanceof xl&&(s.value=le,le.editNote()))}),De.on("layeradd",function(be){ae.almostOver&&(be.layer instanceof xs||be.layer instanceof Ut.Polyline&&!(be.layer instanceof Ut.Polygon)||be.layer instanceof Gl||be.layer instanceof xl)&&(ae.almostOver.addLayer(be.layer),console.log("[useMapDrawing] Nouvelle couche ajoutée à almostOver"))}),De.on("layerremove",function(be){ae.almostOver&&(be.layer instanceof xs||be.layer instanceof Ut.Polyline&&!(be.layer instanceof Ut.Polygon)||be.layer instanceof Gl||be.layer instanceof xl)&&(ae.almostOver.removeLayer(be.layer),console.log("[useMapDrawing] Couche supprimée de almostOver"))}),ae},R=()=>{if(!(!n.value||!e.value||!e.value.getLayers().length))try{const H=e.value.getBounds();if(H.isValid()){const ee={zoomAnimation:n.value.options.zoomAnimation,fadeAnimation:n.value.options.fadeAnimation,markerZoomAnimation:n.value.options.markerZoomAnimation};n.value.options.zoomAnimation=!1,n.value.options.fadeAnimation=!1,n.value.options.markerZoomAnimation=!1,n.value.fitBounds(H,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),n.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{n.value.options.fadeAnimation=ee.fadeAnimation,setTimeout(()=>{try{n.value.options.zoomAnimation=ee.zoomAnimation,n.value.options.markerZoomAnimation=ee.markerZoomAnimation}catch(pe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",pe)}},500)}catch(pe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",pe)}},500)}}catch(H){if(console.warn("[useMapDrawing] Error adjusting view:",H),n.value)try{n.value.options.zoomAnimation=!0,n.value.options.fadeAnimation=!0,n.value.options.markerZoomAnimation=!0,n.value.invalidateSize({animate:!1,pan:!1})}catch(ee){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",ee)}}},W=H=>{var pe;if(!n.value)return;document.querySelectorAll(".drawing-help-message").forEach(re=>re.remove());try{const re=n.value.pm;re.globalEditModeEnabled()&&re.disableGlobalEditMode(),re.globalRemovalModeEnabled()&&re.disableGlobalRemovalMode(),re.disableDraw(),m(),(pe=r.value)==null||pe.clearLayers()}catch(re){console.error("Error disabling modes:",re)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:H}})),i.value=H,!H){m(),A();return}let ee=H;switch(H){case"Note":ee="GeoNote";break;case"Polygon":ee="Polygon";break;case"Line":ee="Line";break;case"ElevationLine":ee="ElevationLine";break;default:ee=H}H=ee,Ce(),setTimeout(()=>{var re,ae,De,be,Ie,le,me,oe,Z,Ae,je,Ke,Me;try{switch(H){case"Polygon":Yo("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(re=n.value)==null||re.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(ae=n.value)==null||ae.off("pm:create"),(De=n.value)==null||De.on("pm:create",We=>{var at,ut,Ct;if(We.shape==="Polygon"&&We.layer){const Xe=We.layer.getLatLngs()[0];(at=n.value)==null||at.removeLayer(We.layer),(ut=e.value)!=null&&ut.hasLayer(We.layer)&&e.value.removeLayer(We.layer);const zt=new Gl(Xe,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(zt),s.value=zt,zt.updateProperties()),(Ct=n.value)==null||Ct.pm.disableDraw(),Ce()}});break;case"Circle":e.value&&e.value.getLayers().filter(at=>at instanceof Aa).forEach(at=>{at.toggleHelperPoints(n.value,!0,"#DC2626","#2563EB")}),n.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[e.value,r.value],snapMiddle:!0,snapIntersections:!0}),Yo("Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),n.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":Yo("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(be=n.value)==null||be.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":Yo("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Ie=n.value)==null||Ie.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":Yo("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(le=n.value)==null||le.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(me=n.value)==null||me.off("pm:create"),(oe=n.value)==null||oe.on("pm:create",We=>{var at,ut,Ct;if(We.shape==="Line"&&We.layer){const Xe=We.layer.getLatLngs();(at=n.value)==null||at.removeLayer(We.layer),(ut=e.value)!=null&&ut.hasLayer(We.layer)&&e.value.removeLayer(We.layer);const zt=new xs(Xe,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(zt),s.value=zt,zt.updateProperties()),(Ct=n.value)==null||Ct.pm.disableDraw(),Ce()}});break;case"Text":if(Yo("Cliquez pour ajouter du texte, double-cliquez pour éditer"),n.value){const We=at=>{if(!n.value||!e.value)return;const ut=l(at.latlng);e.value.addLayer(ut),s.value=ut,n.value.off("click",We),W("")};n.value.on("click",We)}break;case"GeoNote":if(Yo("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),n.value){const We=async ut=>{if(!n.value||!e.value)return null;try{const Ct=Op(),Xe=new xl(ut,{color:"#3B82F6",name:"Note géolocalisée",description:"",columnId:"1"});e.value.addLayer(Xe),s.value=Xe,Xe.updateProperties();try{const zt=Ct.currentMapId||void 0,qt=await Xe.saveNote(zt);console.log(`[useMapDrawing] Note sauvegardée avec succès, ID backend: ${qt}`);const Qe=Xe._leaflet_id;return console.log(`[useMapDrawing] ID Leaflet: ${Qe}, ID backend: ${qt}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:Xe,leafletId:Qe,backendId:qt}})),Xe.openPopup(),Xe}catch(zt){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",zt),Od(async()=>{const{useNotificationStore:qt}=await Promise.resolve().then(()=>oR);return{useNotificationStore:qt}},void 0).then(({useNotificationStore:qt})=>{qt().error("Erreur lors de la création de la note")}),null}}catch(Ct){return console.error("[useMapDrawing] Erreur lors de la création de la note:",Ct),null}},at=async ut=>{Ut.DomEvent.stopPropagation(ut),Ut.DomEvent.preventDefault(ut);const Ct=await We(ut.latlng);Ct&&(n.value.off("click",at),e.value&&e.value.getLayers().forEach(Xe=>{if(Xe.off&&typeof Xe.off=="function")try{Xe.off("click")}catch(zt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",zt)}}),W(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:Ct,leafletId:Ct._leaflet_id}})))};if(n.value.on("click",at),e.value){const ut=async Xe=>{Ut.DomEvent.stopPropagation(Xe),Ut.DomEvent.preventDefault(Xe),console.log("[useMapDrawing] Clic sur une forme existante en mode GeoNote");const zt=await We(Xe.latlng);return zt&&(n.value.off("click",at),e.value&&e.value.getLayers().forEach(qt=>{if(qt.off&&typeof qt.off=="function")try{qt.off("click")}catch(Qe){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",Qe)}}),W(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:zt,leafletId:zt._leaflet_id}}))),!1};e.value.getLayers().forEach(Xe=>{Xe.on("click",ut)});const Ct=()=>{e.value&&e.value.getLayers().forEach(Xe=>{if(Xe.off&&typeof Xe.off=="function")try{Xe.off("click")}catch(zt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",zt)}}),window.removeEventListener("tool:changed",Ct),console.log("[useMapDrawing] Nettoyage des gestionnaires d'événements pour les formes existantes")};window.addEventListener("tool:changed",Ct)}}break;case"delete":Yo("Cliquez sur une forme pour la supprimer"),(Z=n.value)==null||Z.pm.enableGlobalRemovalMode();break;case"ElevationLine":Yo("Cliquez et maintenez pour tracer le profil altimétrique"),(Ae=n.value)==null||Ae.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(je=n.value)==null||je.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(Ke=n.value)==null||Ke.off("pm:create"),(Me=n.value)==null||Me.on("pm:create",async We=>{var at,ut,Ct;if(We.shape==="Line"&&We.layer){const Xe=We.layer.getLatLngs();(at=n.value)==null||at.removeLayer(We.layer),(ut=e.value)!=null&&ut.hasLayer(We.layer)&&e.value.removeLayer(We.layer),(Ct=n.value)==null||Ct.pm.disableDraw(),i.value="",Ce()}});break}}catch(he){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",he)}},100)},Q=H=>{var pe;if(!s.value)return;const ee=s.value;if(ee.properties=ee.properties||{},ee.properties.style=ee.properties.style||{},ee.properties.style={...ee.properties.style,...H},ee.properties.type==="text"){const re=ee.properties._textLayer,ae=(pe=re==null?void 0:re.getElement())==null?void 0:pe.querySelector(".text-annotation");ae&&x5(ae,ee.properties.style);const De={color:H.borderColor||ee.properties.style.borderColor,weight:parseInt(H.borderWidth||ee.properties.style.borderWidth),opacity:H.borderOpacity??ee.properties.style.borderOpacity};"setStyle"in ee&&ee.setStyle(De)}else if(ee.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprimé selon les exigences");else{const re={};H.fillColor&&(re.fillColor=H.fillColor),H.fillOpacity!==void 0&&(re.fillOpacity=H.fillOpacity),H.strokeColor&&(re.color=H.strokeColor),H.strokeOpacity!==void 0&&(re.opacity=H.strokeOpacity),H.strokeWidth!==void 0&&(re.weight=H.strokeWidth),H.dashArray&&(re.dashArray=H.dashArray),"setStyle"in ee&&ee.setStyle(re)}},de=H=>{var be,Ie,le,me,oe;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:H,layerType:(be=s.value.properties)==null?void 0:be.type,beforeName:s.value.name,beforePropertiesName:(Ie=s.value.properties)==null?void 0:Ie.name,beforeCategory:(le=s.value.properties)==null?void 0:le.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const ee=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${ee}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const pe=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise à jour: ${pe}`);const re=s.value.properties.category;console.log(`[useMapDrawing] Catégorie existante: ${re}`);const ae="category"in H&&H.category!==re;if(Object.keys(H).forEach(Z=>{Z==="type"&&pe?console.log(`[useMapDrawing] Préservation du type original: ${pe}`):s.value.properties[Z]=H[Z],Z==="name"&&(console.log(`[useMapDrawing] Setting name "${H[Z]}" directly on layer`),s.value.name=H[Z]),Z==="category"&&console.log(`[useMapDrawing] Mise à jour de la catégorie: ${re} -> ${H[Z]}`)}),pe&&(s.value.properties.type=pe),re&&!ae&&(console.log(`[useMapDrawing] Restauration de la catégorie originale: ${re}`),s.value.properties.category=re),s.value._dbId&&ae){const Z=Op(),Ae=Z.elements.find(je=>je.id===s.value._dbId);if(Ae){console.log(`[useMapDrawing] Mise à jour de la catégorie dans le store: ${s.value.properties.category} pour l'élément ${s.value._dbId}`);const je=Ae;je.data||(je.data={}),je.data.category=s.value.properties.category,Z.$patch({unsavedChanges:!0})}}const De=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:ae}});if(window.dispatchEvent(De),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(me=s.value.properties)==null?void 0:me.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((oe=s.value.properties)==null?void 0:oe.type)==="Circle"){const Z=s.value,Ae=Z.getRadius();Z.properties.radius=Ae,Z.properties.diameter=Ae*2,Z.properties.surface=Math.PI*Ae*Ae,Z.properties.perimeter=2*Math.PI*Ae,H.name&&(console.log(`[useMapDrawing] Ensuring circle name "${H.name}" is set in multiple places`),Z.properties.name=H.name,Z.properties.style.name=H.name,Z.name=H.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:Z.name,circlePropertiesName:Z.properties.name,nameIsEnumerable:Object.keys(Z).includes("name"),propertiesNameIsEnumerable:Object.keys(Z.properties).includes("name")}))}},fe=H=>{console.log("[forceShapeUpdate] Début",{currentProperties:H.properties,selectedShapeRef:s.value}),s.value=null,Zo(()=>{s.value=H,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:s.value,properties:s.value.properties})})},N=(H,ee)=>{console.log("[updateLayerProperties] Début",{layer:H,shapeType:ee,currentProperties:H.properties}),GV((re,ae)=>{const De=E(re,ae);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:De}),re.properties={...De},fe(re),re.fire("properties:updated",{shape:re,properties:re.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:re.properties,selectedShape:s.value})},100)(H,ee)},z=(H,ee)=>Ut.latLng((H.lat+ee.lat)/2,(H.lng+ee.lng)/2),J=H=>{if(!n.value||!e.value)return;m();const ee=H.getLatLng(),pe=H.getRadius(),re=C(ee,"#059669");v.push(re),p(re,H,()=>[ji(pe,"m","Rayon"),ji(pe*2,"m","Diamètre"),ji(Math.PI*Math.pow(pe,2),"m²","Surface")].join("<br>"));const ae=[],De=[0,45,90,135,180,225,270,315];De.forEach(be=>{const Ie=H.calculatePointOnCircle(be),le=C(Ie,"#2563EB");ae.push(le),v.push(le),p(le,H,()=>ji(pe,"m","Rayon")),le.on("mousedown",me=>{if(!n.value)return;Ut.DomEvent.stopPropagation(me),n.value.dragging.disable();let oe=!0;const Z=je=>{oe&&(H.resizeFromControlPoint(je.latlng),ae.forEach((Ke,Me)=>{const he=H.calculatePointOnCircle(De[Me]);Ke.setLatLng(he)}),re.setLatLng(H.getLatLng()),le.measureDiv&&(le.measureDiv.innerHTML=ji(H.getRadius(),"m","Rayon")))},Ae=()=>{oe=!1,n.value&&(n.value.off("mousemove",Z),document.removeEventListener("mouseup",Ae),n.value.dragging.enable(),H.updateProperties(),s.value=null,Zo(()=>{s.value=H}),N(H,"Circle"))};n.value.on("mousemove",Z),document.addEventListener("mouseup",Ae)})}),re.on("mousedown",be=>{if(!n.value)return;Ut.DomEvent.stopPropagation(be),n.value.dragging.disable();let Ie=!0;const le=H.getLatLng(),me=be.latlng,oe=Ae=>{if(!Ie)return;const je=Ae.latlng.lng-me.lng,Ke=Ae.latlng.lat-me.lat,Me=Ut.latLng(le.lat+Ke,le.lng+je);Ut.Circle.prototype.setLatLng.call(H,Me),re.setLatLng(Me),ae.forEach((he,We)=>{const at=H.calculatePointOnCircle(De[We]);he.setLatLng(at)}),re.measureDiv&&(re.measureDiv.innerHTML=[ji(H.getRadius(),"m","Rayon"),ji(H.getRadius()*2,"m","Diamètre"),ji(Math.PI*Math.pow(H.getRadius(),2),"m²","Surface")].join("<br>"))},Z=()=>{Ie=!1,n.value&&(n.value.off("mousemove",oe),document.removeEventListener("mouseup",Z),n.value.dragging.enable(),H.updateProperties(),s.value=null,Zo(()=>{s.value=H}),N(H,"Circle"))};n.value.on("mousemove",oe),document.addEventListener("mouseup",Z)}),H.on("circle:resized",()=>{N(H,"Circle")}),s.value=H},U=H=>{var oe;if(!n.value||!e.value)return;if(!(H instanceof Aa)){console.warn("La couche n'est pas une instance de Rectangle");return}const ee=H;m();const pe=ee.getCenter(),re=ee.getRotatedCorners(),ae=ee.getMidPoints(),De=C(pe,"#059669");v.push(De),p(De,ee,()=>{const{width:Z,height:Ae}=ee.getDimensions(),je=Z*Ae,Ke=ee.getRotation();return[ji(Z,"m","Largeur"),ji(Ae,"m","Hauteur"),ji(je,"m²","Surface"),`Rotation: ${Ke.toFixed(1)}°`].join("<br>")});const be=C(Ut.latLng(pe.lat+(re[0].lat-pe.lat)*1.2,pe.lng+(re[0].lng-pe.lng)*1.2),"#F97316");v.push(be);const Ie=Ut.polyline([pe,be.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(oe=t.value)==null||oe.addLayer(Ie);const le=re.map(Z=>{const Ae=C(Z,"#DC2626");return v.push(Ae),p(Ae,ee,()=>{const{width:je,height:Ke}=ee.getDimensions();return[ji(je,"m","Largeur"),ji(Ke,"m","Hauteur")].join("<br>")}),Ae}),me=ae.map((Z,Ae)=>{const je=C(Z,"#2b6451");return v.push(je),p(je,ee,()=>{const{width:Ke,height:Me}=ee.getDimensions(),he=Ae%2===0?Ke:Me;return[ji(he,"m","Longueur du côté"),ji(he/2,"m","Distance au coin")].join("<br>")}),je});De.on("mousedown",Z=>{if(!n.value)return;Ut.DomEvent.stopPropagation(Z),n.value.dragging.disable();let Ae=!0;const je=Me=>{if(!Ae)return;ee.moveFromCenter(Me.latlng);const he=ee.getRotatedCorners(),We=ee.getMidPoints();le.forEach((ut,Ct)=>ut.setLatLng(he[Ct])),me.forEach((ut,Ct)=>ut.setLatLng(We[Ct])),De.setLatLng(Me.latlng);const at=Ut.latLng(Me.latlng.lat+(he[0].lat-Me.latlng.lat)*1.2,Me.latlng.lng+(he[0].lng-Me.latlng.lng)*1.2);be.setLatLng(at),Ie.setLatLngs([Me.latlng,at])},Ke=()=>{Ae=!1,n.value&&(n.value.off("mousemove",je),document.removeEventListener("mouseup",Ke),n.value.dragging.enable(),ee.updateProperties(),s.value=null,Zo(()=>{s.value=ee}))};n.value.on("mousemove",je),document.addEventListener("mouseup",Ke)}),be.on("mousedown",Z=>{if(!n.value)return;Ut.DomEvent.stopPropagation(Z),n.value.dragging.disable();let Ae=!1;const je=Z.latlng,Ke=ee.getRotation(),Me=ee.getCenter(),he=je.lng-Me.lng,We=je.lat-Me.lat,at=Math.atan2(We,he)*180/Math.PI;v.forEach(Xe=>{Xe!==be&&(Xe.setStyle({opacity:0,fillOpacity:0}),Xe.measureDiv&&(Xe.measureDiv.style.display="none"))});const ut=qh(Xe=>{Ae||(Ae=!0);const zt=Xe.latlng.lng-Me.lng,qt=Xe.latlng.lat-Me.lat;let ot=Math.atan2(qt,zt)*180/Math.PI-at,it=(Ke+ot)%360;it<0&&(it+=360),ee.setRotation(it,!1),be.setLatLng(Xe.latlng),Ie.setLatLngs([Me,Xe.latlng])},16),Ct=()=>{n.value&&(n.value.off("mousemove",ut),document.removeEventListener("mouseup",Ct),n.value.dragging.enable(),Ae&&ee.finalizeRotation(),s.value=null,Zo(()=>{s.value=ee,m(),U(ee)}))};n.value.on("mousemove",ut),document.addEventListener("mouseup",Ct)}),ee.on("coordinates:updated",Z=>{const{corners:Ae,center:je}=Z,Ke=ee.getMidPoints();le.forEach((he,We)=>he.setLatLng(Ae[We])),me.forEach((he,We)=>he.setLatLng(Ke[We])),De.setLatLng(je);const Me=Ut.latLng(je.lat+(Ae[0].lat-je.lat)*1.2,je.lng+(Ae[0].lng-je.lng)*1.2);be.setLatLng(Me),Ie.setLatLngs([je,Me])})},B=H=>{if(!n.value||!e.value)return;m();const ee=H.getLatLngs();if(!ee||ee.length===0){console.warn("Pas de points pour la ligne");return}let pe=null;if(H instanceof xs){const re=H.getCenter();pe=C(re,"#059669"),v.push(pe),p(pe,H,()=>{const ae=H.getLength()||0;return ji(ae,"m","Longueur totale")}),pe.on("mousedown",ae=>{if(!n.value)return;Ut.DomEvent.stopPropagation(ae),n.value.dragging.disable();let De=!0;const be=H.getLatLngs().map(Z=>Ut.latLng(Z.lat,Z.lng)),Ie=ae.latlng;H instanceof xs&&(H.off("move:end"),H.off("vertex:moved"),H.off("latlngs:updated"),H.off("properties:updated")),v.forEach((Z,Ae)=>{Ae>0&&(Z.setStyle({opacity:0,fillOpacity:0}),Z.measureDiv&&(Z.measureDiv.style.display="none"))});const me=qh(Z=>{if(!De)return;const Ae=Z.latlng.lng-Ie.lng,je=Z.latlng.lat-Ie.lat,Ke=be.map(Me=>Ut.latLng(Me.lat+je,Me.lng+Ae));Ut.Polyline.prototype.setLatLngs.call(H,Ke),pe==null||pe.setLatLng(Z.latlng)},16),oe=()=>{if(De=!1,!!n.value){if(n.value.off("mousemove",me),document.removeEventListener("mouseup",oe),n.value.dragging.enable(),H instanceof xs){const Z=()=>{m(),B(H)};H.on("move:end",Z),H.on("vertex:moved",Z),H.on("latlngs:updated",Z),H.on("properties:updated",Z),H.updateProperties(),N(H,"Line")}m(),B(H)}};n.value.on("mousemove",me),document.addEventListener("mouseup",oe)})}if(ee.forEach((re,ae)=>{const De=C(re,"#DC2626");v.push(De),p(De,H,()=>{if(H instanceof xs){const be=H.getLength()||0,Ie=H.getLengthToVertex(ae);return[ji(Ie,"m","Distance depuis le début"),ji(be,"m","Longueur totale")].join("<br>")}return""}),De.on("mousedown",be=>{if(!n.value)return;Ut.DomEvent.stopPropagation(be),n.value.dragging.disable();let Ie=!0;H instanceof xs&&(H.off("move:end"),H.off("vertex:moved"),H.off("latlngs:updated"),H.off("properties:updated")),v.forEach((oe,Z)=>{Z!==ae+1&&(oe.setStyle({opacity:0,fillOpacity:0}),oe.measureDiv&&(oe.measureDiv.style.display="none"))});const le=qh(oe=>{if(!Ie)return;const Z=H.getLatLngs();Z[ae]=oe.latlng,Ut.Polyline.prototype.setLatLngs.call(H,Z),De.setLatLng(oe.latlng)},16),me=()=>{if(Ie=!1,!!n.value){if(n.value.off("mousemove",le),document.removeEventListener("mouseup",me),n.value.dragging.enable(),H instanceof xs){const oe=()=>{m(),B(H)};H.on("move:end",oe),H.on("vertex:moved",oe),H.on("latlngs:updated",oe),H.on("properties:updated",oe),H.updateProperties(),N(H,"Line")}m(),B(H)}};n.value.on("mousemove",le),document.addEventListener("mouseup",me)})}),ee.length>=2)for(let re=0;re<ee.length-1;re++){const ae=ee[re],De=ee[re+1],be=Ut.latLng((ae.lat+De.lat)/2,(ae.lng+De.lng)/2),Ie=C(be,"#2b6451");v.push(Ie),p(Ie,H,()=>{if(H instanceof xs){const le=H.getSegmentLengthAt(re),me=H.getLength()||0,oe=H.getLengthToVertex(re)+le/2;return[ji(le,"m","Longueur du segment"),ji(le/2,"m","Demi-segment"),ji(oe,"m","Distance depuis le début"),ji(me,"m","Longueur totale")].join("<br>")}return""})}if(H instanceof xs){const re=()=>{m(),B(H)};H.on("move:start",()=>{v.forEach((ae,De)=>{De>0&&(ae.setStyle({opacity:0,fillOpacity:0}),ae.measureDiv&&(ae.measureDiv.style.display="none"))})}),H.on("move:end",re),H.on("vertex:moved",re),H.on("latlngs:updated",re),H.on("properties:updated",re),v.cleanup=()=>{H.off("move:start",()=>{}),H.off("move:end",re),H.off("vertex:moved",re),H.off("latlngs:updated",re),H.off("properties:updated",re)}}},G=H=>{if(!n.value||!e.value)return;m();const ee=H.getLatLngs()[0],pe=ee.map(me=>[me.lng,me.lat]);pe.push(pe[0]);const re=Hu([pe]),ae=$c(re),De=ee.reduce((me,oe,Z)=>{const Ae=ee[(Z+1)%ee.length];return me+oe.distanceTo(Ae)},0);let be;if(typeof H.getCenter=="function")try{be=H.getCenter()}catch(me){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",me);const oe=qg(re);be=Ut.latLng(oe.geometry.coordinates[1],oe.geometry.coordinates[0])}else{const me=qg(re);be=Ut.latLng(me.geometry.coordinates[1],me.geometry.coordinates[0])}const Ie=C(be,"#059669");v.push(Ie),p(Ie,H,()=>[ji(De,"m","Périmètre"),ji(ae,"m²","Surface")].join("<br>")),Ie.on("mousedown",me=>{if(!n.value)return;Ut.DomEvent.stopPropagation(me),n.value.dragging.disable();let oe=!0;const Z=me.latlng,Ae=[...ee];v.forEach((he,We)=>{We>0&&he.setStyle({opacity:0,fillOpacity:0})});const je=qh(he=>{if(!oe)return;const We=he.latlng.lng-Z.lng,at=he.latlng.lat-Z.lat,ut=Ae.map(Ct=>Ut.latLng(Ct.lat+at,Ct.lng+We));Ut.Polygon.prototype.setLatLngs.call(H,[ut]),Ie.setLatLng(he.latlng)},16),Ke=he=>{oe&&je(he)},Me=()=>{if(oe=!1,!!n.value){if(n.value.off("mousemove",Ke),document.removeEventListener("mouseup",Me),n.value.dragging.enable(),H.properties){const he=H.getLatLngs()[0],We=he.map(ut=>[ut.lng,ut.lat]);We.push(We[0]);const at=Hu([We]);H.properties.area=$c(at),H.properties.perimeter=he.reduce((ut,Ct,Xe)=>{const zt=he[(Xe+1)%he.length];return ut+Ct.distanceTo(zt)},0),H.properties.surface=H.properties.area}m(),G(H),s.value=null,Zo(()=>{s.value=H})}};n.value.on("mousemove",Ke),document.addEventListener("mouseup",Me)}),ee.forEach((me,oe)=>{const Z=C(me,"#DC2626");v.push(Z),p(Z,H,()=>{const Ae=ee[(oe-1+ee.length)%ee.length],je=ee[(oe+1)%ee.length],Ke=me.distanceTo(Ae),Me=me.distanceTo(je);return[ji(Ke,"m","Distance au point précédent"),ji(Me,"m","Distance au point suivant"),ji(De,"m","Périmètre total"),ji(ae,"m²","Surface")].join("<br>")}),Z.on("mousedown",Ae=>{if(Ut.DomEvent.stopPropagation(Ae),!n.value)return;n.value.dragging.disable();let je=!0;Ie&&(Ie.setStyle({opacity:0,fillOpacity:0}),Ie.measureDiv&&(Ie.measureDiv.style.display="none"));const Ke=qh(We=>{if(!je)return;ee[oe]=We.latlng,Ut.Polygon.prototype.setLatLngs.call(H,[ee]),Z.setLatLng(We.latlng);const at=v.slice(ee.length+1),ut=(oe-1+ee.length)%ee.length,Ct=at[ut];if(Ct){const zt=ee[ut],qt=ee[oe],Qe=Ut.latLng((zt.lat+qt.lat)/2,(zt.lng+qt.lng)/2);Ct.setLatLng(Qe)}const Xe=at[oe];if(Xe){const zt=ee[oe],qt=ee[(oe+1)%ee.length],Qe=Ut.latLng((zt.lat+qt.lat)/2,(zt.lng+qt.lng)/2);Xe.setLatLng(Qe)}},16),Me=We=>{je&&Ke(We)},he=()=>{if(je=!1,!!n.value){if(n.value.off("mousemove",Me),document.removeEventListener("mouseup",he),n.value.dragging.enable(),H.properties){const We=H.getLatLngs()[0].map(ut=>[ut.lng,ut.lat]);We.push(We[0]);const at=Hu([We]);H.properties.area=$c(at),H.properties.perimeter=ee.reduce((ut,Ct,Xe)=>{const zt=ee[(Xe+1)%ee.length];return ut+Ct.distanceTo(zt)},0),H.properties.surface=H.properties.area}m(),G(H),s.value=null,Zo(()=>{s.value=H})}};n.value.on("mousemove",Me),document.addEventListener("mouseup",he)})}),(()=>{const me=H.getLatLngs()[0];v.slice(me.length+1).forEach(Z=>{t.value&&t.value.removeLayer(Z)}),v=v.slice(0,me.length+1);const oe=new Array(me.length);for(let Z=0;Z<me.length;Z++){const Ae=me[Z],je=me[(Z+1)%me.length];oe[Z]=z(Ae,je)}oe.forEach((Z,Ae)=>{const je=C(Z,"#2b6451");v.push(je),p(je,H,()=>{const Ke=me[Ae],Me=me[(Ae+1)%me.length],he=Ke.distanceTo(Me);return[ji(he,"m","Longueur du segment"),ji(De,"m","Périmètre total"),ji(ae,"m²","Surface")].join("<br>")}),je.on("mousedown",Ke=>{if(!n.value)return;Ut.DomEvent.stopPropagation(Ke),n.value.dragging.disable();let Me=!0;const he=Ae;Ie&&(Ie.setStyle({opacity:0,fillOpacity:0}),Ie.measureDiv&&(Ie.measureDiv.style.display="none"));const We=[...H.getLatLngs()[0]];We.splice((he+1)%We.length,0,Z),H.setLatLngs([We]),m(),G(H);const at=he+1,ut=1+at,Ct=at<v.length-1?v[ut]:null;if(Ct){const Xe=qt=>{if(!Me)return;const Qe=H.getLatLngs()[0];Qe[at]=qt.latlng,H.setLatLngs([Qe]),Ct.setLatLng(qt.latlng);const ot=v.slice(1+Qe.length),it=(at-1+Qe.length)%Qe.length,At=at;if(ot[it]){const Yt=Qe[it],bn=Qe[at],xn=Ut.latLng((Yt.lat+bn.lat)/2,(Yt.lng+bn.lng)/2);ot[it].setLatLng(xn)}if(ot[At]){const Yt=Qe[at],bn=Qe[(at+1)%Qe.length],xn=Ut.latLng((Yt.lat+bn.lat)/2,(Yt.lng+bn.lng)/2);ot[At].setLatLng(xn)}},zt=()=>{if(Me=!1,!!n.value){if(n.value.off("mousemove",Xe),document.removeEventListener("mouseup",zt),n.value.dragging.enable(),H.properties){const qt=H.getLatLngs()[0].map(ot=>[ot.lng,ot.lat]);qt.push(qt[0]);const Qe=Hu([qt]);H.properties.area=$c(Qe),H.properties.perimeter=H.getLatLngs()[0].reduce((ot,it,At,Yt)=>{const bn=Yt[(At+1)%Yt.length];return ot+it.distanceTo(bn)},0)}m(),G(H),s.value=null,Zo(()=>{s.value=H})}};n.value.on("mousemove",Xe),document.addEventListener("mouseup",zt)}else n.value.dragging.enable(),m(),G(H)})})})()},$=H=>{if(!n.value||!e.value)return;m();const ee=H.getLatLng(),pe=C(ee,"#059669");v.push(pe),p(pe,H,()=>`Position: ${ee.lat.toFixed(6)}, ${ee.lng.toFixed(6)}`),pe.on("mousedown",re=>{if(!n.value)return;Ut.DomEvent.stopPropagation(re),n.value.dragging.disable(),H.startMoving();let ae=!0;const be=qh(le=>{ae&&(pe.setLatLng(le.latlng),H.setLatLng(le.latlng))},16),Ie=()=>{n.value&&(n.value.off("mousemove",be),document.removeEventListener("mouseup",Ie),n.value.dragging.enable(),ae=!1,H.finishMoving(),H.updateProperties(),s.value=null,Zo(()=>{s.value=H,m(),$(H)}))};n.value.on("mousemove",be),document.addEventListener("mouseup",Ie)}),s.value=H},F=H=>{if(!(!n.value||!r.value)){console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:H.constructor.name,properties:H.properties}),r.value.clearLayers();try{if(H instanceof Aa)H.generateHelperPoints(n.value);else if(H instanceof lp){if("getLatLng"in H&&typeof H.getLatLng=="function"){const ee=H.getLatLng();if(ee){const pe=Ut.circleMarker(ee,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(pe)}}}else if(H instanceof xl){const ee=H.getLatLng();if(ee){const pe=Ut.circleMarker(ee,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(pe)}}else if(H instanceof Gl||H instanceof Ut.Polygon){let ee=[];if("getLatLngs"in H){const re=H.getLatLngs();if(Array.isArray(re)&&re.length>0){const ae=re[0];Array.isArray(ae)?ee=ae:ae instanceof Ut.LatLng&&(ee=re)}}let pe=null;if(H instanceof Gl&&typeof H.getCenter=="function")pe=H.getCenter();else if(ee.length>0){const re=ee.map(be=>[be.lng,be.lat]);re.push(re[0]);const ae=Hu([re]),De=qg(ae);pe=Ut.latLng(De.geometry.coordinates[1],De.geometry.coordinates[0])}if(pe){const re=Ut.circleMarker(pe,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(re)}ee.forEach(re=>{if(re){const ae=Ut.circleMarker(re,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ae)}});for(let re=0;re<ee.length;re++){const ae=ee[re],De=ee[(re+1)%ee.length];if(ae&&De){const be=Ut.latLng((ae.lat+De.lat)/2,(ae.lng+De.lng)/2),Ie=Ut.circleMarker(be,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(Ie)}}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}catch(ee){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",ee)}}},I=H=>{console.log("Nombre total de couches:",H.length);const ee=H.filter(be=>{var me;if(!be)return!1;let Ie=0,le={width:0,height:0};if(be instanceof Ut.Circle){Ie=Math.PI*Math.pow(be.getRadius(),2);const oe=be.getRadius();console.log(`
Forme détectée: Circle`),console.log(`- Surface propre: ${Ie.toFixed(2)} m²`),console.log(`- Rayon: ${oe.toFixed(2)} m`),console.log("- Angle: Cercle complet (360°)")}else if(be instanceof Aa||be instanceof Ut.Rectangle){const oe=be.getBounds(),Z=oe.getSouthWest(),Ae=oe.getNorthEast(),je=yc([[Z.lng,Z.lat],[Ae.lng,Z.lat]]),Ke=yc([[Z.lng,Z.lat],[Z.lng,Ae.lat]]);le.width=Wh(je,{units:"meters"}),le.height=Wh(Ke,{units:"meters"}),Ie=le.width*le.height,console.log(`
Forme détectée: Rectangle`),console.log(`- Surface propre: ${Ie.toFixed(2)} m²`),console.log(`- Largeur: ${le.width.toFixed(2)} m`),console.log(`- Hauteur: ${le.height.toFixed(2)} m`)}else if(((me=be.properties)==null?void 0:me.type)==="Semicircle"){const oe=be.getStartAngle(),Z=be.getStopAngle(),Ae=(Z-oe+360)%360,je=be.getRadius();Ie=Math.PI*Math.pow(je,2)*Ae/360,console.log(`
Forme détectée: Semicircle`),console.log(`- Surface propre: ${Ie.toFixed(2)} m²`),console.log(`- Rayon: ${je.toFixed(2)} m`),console.log(`- Angle de début: ${oe.toFixed(2)}°`),console.log(`- Angle de fin: ${Z.toFixed(2)}°`),console.log(`- Angle d'ouverture: ${Ae.toFixed(2)}°`)}return Ie>0});if(ee.length===0)return 0;const pe=new Set,re=[];for(const be of ee)if(!pe.has(be)){const Ie=ve(ee,be);Ie.length>0&&(re.push(Ie),Ie.forEach(le=>pe.add(le)))}console.log(`
Nombre de groupes de formes connectées: ${re.length}`);const ae=re.map((be,Ie)=>{console.log(`
Calcul pour le groupe ${Ie+1} (${be.length} formes):`);const le=be.map(je=>{var Ke,Me,he;try{let We;if(je instanceof Ut.Circle){const at=je.getLatLng(),ut=je.getRadius();We=iz([at.lng,at.lat],ut/1e3,{units:"kilometers",steps:256});const Ct=$c(We),Xe=((Ke=je.properties)==null?void 0:Ke.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${ut.toFixed(2)}m`),console.log(`- Surface propriété: ${Xe.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${Ct.toFixed(2)}m²`),We}else if(je instanceof Aa||je instanceof Ut.Rectangle){const at=je.getBounds(),ut=at.getSouthWest(),Ct=at.getNorthEast(),Xe=Ut.latLng(Ct.lat,ut.lng),zt=Ut.latLng(ut.lat,Ct.lng),qt=[[ut.lng,ut.lat],[zt.lng,zt.lat],[Ct.lng,Ct.lat],[Xe.lng,Xe.lat],[ut.lng,ut.lat]];We=Hu([qt]);const Qe=$c(We),ot=yc([[ut.lng,ut.lat],[Ct.lng,ut.lat]]),it=yc([[ut.lng,ut.lat],[ut.lng,Ct.lat]]),At=Wh(ot,{units:"meters"}),Yt=Wh(it,{units:"meters"}),bn=At*Yt;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${At.toFixed(2)}m`),console.log(`- Hauteur: ${Yt.toFixed(2)}m`),console.log(`- Surface théorique: ${bn.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${Qe.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(bn-Qe).toFixed(2)}m² (${(Math.abs(bn-Qe)/bn*100).toFixed(2)}%)`),We}else if(((Me=je.properties)==null?void 0:Me.type)==="Semicircle"){const at=je.getCenter(),ut=je.getRadius(),Ct=je.getStartAngle(),Xe=je.getStopAngle(),zt=[],qt=64;zt.push([at.lng,at.lat]);for(let it=0;it<=qt;it++){const Yt=(Ct+(Xe-Ct+360)%360*it/qt)*Math.PI/180,bn=ut*Math.cos(Yt),En=ut*Math.sin(Yt)/111319.9,$n=bn/(111319.9*Math.cos(at.lat*Math.PI/180));zt.push([at.lng+$n,at.lat+En])}zt.push([at.lng,at.lat]),We=Hu([zt]);const Qe=$c(We),ot=((he=je.properties)==null?void 0:he.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${ut.toFixed(2)}m`),console.log(`- Surface propriété: ${ot.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${Qe.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(ot-Qe).toFixed(2)}m² (${(Math.abs(ot-Qe)/ot*100).toFixed(2)}%)`),We}return null}catch(We){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",We),null}}).filter(je=>je!==null);if(le.length===0)return 0;const me=le.map(je=>{const Ke=$c(je);return console.log(`Surface individuelle: ${Ke.toFixed(2)}m²`),Ke});let oe=0;for(let je=0;je<le.length;je++)for(let Ke=je+1;Ke<le.length;Ke++)try{const Me=Hj([le[je],le[Ke]]),he=Sz(Me);if(he){const We=$c(he);oe+=We,console.log(`Intersection entre formes ${je+1} et ${Ke+1}: ${We.toFixed(2)}m²`)}}catch(Me){console.error(`Erreur lors du calcul d'intersection entre les formes ${je+1} et ${Ke+1}:`,Me)}const Z=me.reduce((je,Ke)=>je+Ke,0),Ae=Z-oe;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${Ie+1}:`),console.log(`- Surface totale (somme): ${Z.toFixed(2)}m²`),console.log(`- Surface d'intersection: ${oe.toFixed(2)}m²`),console.log(`- Surface d'irrigation finale: ${Ae.toFixed(2)}m²`),Ae}),De=Math.max(...ae);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${De.toFixed(2)}m²`),De},X=()=>{a.value&&(n.value.removeLayer(a.value),a.value=null)},K=(H,ee)=>{if(!n.value)return;X();const pe=ee?ve(H,ee):H;if(a.value||(a.value=Ut.layerGroup().addTo(n.value)),pe.forEach(re=>{var De;const ae=(De=re.properties)==null?void 0:De.type;if(ae==="Circle"||ae==="Semicircle"){const be=re.getLatLng(),Ie=re.getRadius(),le=Ut.circle(be,{radius:Ie,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Ut.canvas({padding:.5})}),me=Ut.circle(be,{radius:Ie,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Ut.canvas({padding:.5})});a.value&&(a.value.addLayer(me),a.value.addLayer(le))}else if(ae==="Rectangle"||ae==="Polygon"){const be=re.getLatLngs(),Ie=Ut.polygon(be,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Ut.canvas({padding:.5})}),le=Ut.polygon(be,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Ut.canvas({padding:.5})});a.value&&(a.value.addLayer(le),a.value.addLayer(Ie))}}),ee&&pe.length>1&&n.value){const re=Ut.latLngBounds([]);pe.forEach(be=>{be.getBounds?re.extend(be.getBounds()):be.getLatLng&&re.extend(be.getLatLng())});const ae=re.getCenter(),De=Ut.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connecté</div>").setLatLng(ae);a.value&&a.value.addLayer(Ut.marker(ae,{opacity:0,interactive:!1}).bindTooltip(De).openTooltip())}},ve=(H,ee)=>{if(!ee)return[];const pe=new Set,re=[ee],ae=[ee];for(ee._leaflet_id!==void 0&&pe.add(ee._leaflet_id);re.length>0;){const De=re.shift();for(const be of H){if(be===De||pe.has(be._leaflet_id))continue;ge(De,be)&&(ae.push(be),re.push(be),pe.add(be._leaflet_id))}}return ae},ge=(H,ee)=>{let pe=null,re=null;if(H.getBounds&&typeof H.getBounds=="function")pe=H.getBounds();else if(H.getLatLng&&H.getRadius){const ae=H.getLatLng(),De=H.getRadius();pe=Ut.latLngBounds([ae.lat-De/111e3,ae.lng-De/(111e3*Math.cos(ae.lat*Math.PI/180))],[ae.lat+De/111e3,ae.lng+De/(111e3*Math.cos(ae.lat*Math.PI/180))])}if(ee.getBounds&&typeof ee.getBounds=="function")re=ee.getBounds();else if(ee.getLatLng&&ee.getRadius){const ae=ee.getLatLng(),De=ee.getRadius();re=Ut.latLngBounds([ae.lat-De/111e3,ae.lng-De/(111e3*Math.cos(ae.lat*Math.PI/180))],[ae.lat+De/111e3,ae.lng+De/(111e3*Math.cos(ae.lat*Math.PI/180))])}return!(!pe||!re||!pe.intersects(re))},He=(H,ee)=>{var re;const pe=ve(H,ee);return pe.length===1&&(re=ee.properties)!=null&&re.surface?ee.properties.surface:I(pe)},ie=H=>{var re,ae,De,be,Ie,le,me,oe,Z;const ee=H.layer;(re=e.value)==null||re.addLayer(ee);let pe="unknown";if(ee instanceof Ut.Circle?pe=i.value==="Semicircle"?"Semicircle":"Circle":ee instanceof Ut.Rectangle?pe="Rectangle":ee instanceof Ut.Polygon?pe="Polygon":ee instanceof Ut.Polyline&&!(ee instanceof Ut.Polygon)&&(pe="Line"),ee.properties=E(ee,pe),ee.properties||(ee.properties={}),ee.properties.category||(ee.properties.category="forages"),ee.properties.accessLevel||(ee.properties.accessLevel="visitor"),ee._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=ee,console.log("[useMapDrawing] Input layer:",{type:pe,instanceof:{Circle:ee instanceof Ut.Circle,Rectangle:ee instanceof Ut.Rectangle,Polygon:ee instanceof Ut.Polygon,Polyline:ee instanceof Ut.Polyline},options:ee.options,properties:ee.properties,_dbId:ee._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:ee,type:pe,properties:ee.properties}})),ee.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:pe,isSelected:s.value===ee}),(!s.value||s.value!==ee)&&F(ee)}),ee.on("mouseout",()=>{var Ae;console.log("[mouseout] Sortie de la forme",{type:pe,isSelected:s.value===ee}),(!s.value||s.value!==ee)&&((Ae=r.value)==null||Ae.clearLayers())}),pe==="Semicircle")console.log("Conversion en demi-cercle désactivée selon les exigences");else if(pe==="Circle"){(ae=e.value)==null||ae.removeLayer(ee);const Ae=new lp(ee.getLatLng(),{radius:ee.getRadius(),...ee.options});Ae.properties={...E(Ae,"Circle"),type:"Circle"},Object.defineProperty(Ae,"name",{value:Ae.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(Ae,"name"),directName:Ae.name,propertiesName:Ae.properties.name,nameIsEnumerable:Object.keys(Ae).includes("name"),allProperties:Object.keys(Ae.properties),allKeys:Object.keys(Ae)}),(De=e.value)==null||De.addLayer(Ae),s.value=Ae,J(Ae)}else if(pe==="Rectangle"){(be=e.value)==null||be.removeLayer(ee);const Ae=new Aa(ee.getBounds(),{...ee.options});Ae.updateProperties(),(Ie=e.value)==null||Ie.addLayer(Ae),s.value=Ae,U(Ae)}else if(ee instanceof Ut.Polygon){const Ae=ee.getLatLngs()[0],je=new Gl([Ae],{...ee.options});je.updateProperties(),(le=e.value)==null||le.removeLayer(ee),(me=e.value)==null||me.addLayer(je),s.value=je,G(je)}else if(ee instanceof xs)B(ee),n.value&&n.value.almostOver&&n.value.almostOver.addLayer(ee);else if(ee instanceof Ut.Polyline&&!(ee instanceof Ut.Polygon)){const Ae=ee.getLatLngs(),je=new xs(Ae,{...ee.options});je.updateProperties(),(oe=e.value)==null||oe.removeLayer(ee),(Z=e.value)==null||Z.addLayer(je),s.value=je,B(je),n.value&&n.value.almostOver&&n.value.almostOver.addLayer(je)}Yo("Cliquez sur la forme pour afficher les points de contrôle")},Ce=()=>{n.value&&(n.value.off("pm:create"),n.value.on("pm:create",ie))},_e=()=>{if(n.value&&n.value.almostOver){const H=n.value.almostOver.options.tolerance;return n.value.almostOver.options.tolerance=0,()=>{n.value&&n.value.almostOver&&(n.value.almostOver.options.tolerance=H)}}return()=>{}};return window.addEventListener("edit:start",()=>{const H=_e(),ee=()=>{H(),window.removeEventListener("edit:end",ee)};window.addEventListener("edit:end",ee)}),{map:n,featureGroup:e,controlPointsGroup:t,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:D,setDrawingTool:W,updateShapeStyle:Q,updateShapeProperties:de,updateTextFixedSize:k,adjustView:R,clearActiveControlPoints:m,calculateTotalCoverageArea:I,showCoverageOverlay:K,hideCoverageOverlay:X,calculateConnectedCoverageArea:He,getConnectedShapes:ve,disableAlmostOver:_e,addLinesToAlmostOver:A}}const is=Symbol("newer"),ha=Symbol("older");class qV{constructor(e,t){typeof e!="number"&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[is]&&(e===this.oldest&&(this.oldest=e[is]),e[is][ha]=e[ha]),e[ha]&&(e[ha][is]=e[is]),e[is]=void 0,e[ha]=this.newest,this.newest&&(this.newest[is]=e),this.newest=e)}assign(e){let t,r=this.limit||Number.MAX_VALUE;this._keymap.clear();let i=e[Symbol.iterator]();for(let s=i.next();!s.done;s=i.next()){let o=new C5(s.value[0],s.value[1]);if(this._keymap.set(o.key,o),t?(t[is]=o,o[ha]=t):this.oldest=o,t=o,r--==0)throw new Error("overflow")}this.newest=t,this.size=this._keymap.size}get(e){var t=this._keymap.get(e);if(t)return this._markEntryAsUsed(t),t.value}set(e,t){var r=this._keymap.get(e);return r?(r.value=t,this._markEntryAsUsed(r),this):(this._keymap.set(e,r=new C5(e,t)),this.newest?(this.newest[is]=r,r[ha]=this.newest):this.oldest=r,this.newest=r,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[is]?(this.oldest=this.oldest[is],this.oldest[ha]=void 0):(this.oldest=void 0,this.newest=void 0),e[is]=e[ha]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let t=this._keymap.get(e);return t?t.value:void 0}has(e){return this._keymap.has(e)}delete(e){var t=this._keymap.get(e);if(t)return this._keymap.delete(t.key),t[is]&&t[ha]?(t[ha][is]=t[is],t[is][ha]=t[ha]):t[is]?(t[is][ha]=void 0,this.oldest=t[is]):t[ha]?(t[ha][is]=void 0,this.newest=t[ha]):this.oldest=this.newest=void 0,this.size--,t.value}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new G_(this.oldest)}values(){return new W_(this.oldest)}entries(){return this}[Symbol.iterator](){return new H_(this.oldest)}forEach(e,t){typeof t!="object"&&(t=this);let r=this.oldest;for(;r;)e.call(t,r.value,r.key,this),r=r[is]}toJSON(){for(var e=new Array(this.size),t=0,r=this.oldest;r;)e[t++]={key:r.key,value:r.value},r=r[is];return e}toString(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,t=t[is],t&&(e+=" < ");return e}}function C5(n,e){this.key=n,this.value=e,this[is]=void 0,this[ha]=void 0}function H_(n){this.entry=n}H_.prototype[Symbol.iterator]=function(){return this};H_.prototype.next=function(){let n=this.entry;return n?(this.entry=n[is],{done:!1,value:[n.key,n.value]}):{done:!0,value:void 0}};function G_(n){this.entry=n}G_.prototype[Symbol.iterator]=function(){return this};G_.prototype.next=function(){let n=this.entry;return n?(this.entry=n[is],{done:!1,value:n.key}):{done:!0,value:void 0}};function W_(n){this.entry=n}W_.prototype[Symbol.iterator]=function(){return this};W_.prototype.next=function(){let n=this.entry;return n?(this.entry=n[is],{done:!1,value:n.value}):{done:!0,value:void 0}};function YV(n,e){let t=0,r=null;r=setInterval(function(){if(t>=20)throw clearInterval(r),new Error("window.google not found after 10 seconds");window.google&&window.google.maps&&window.google.maps.Map&&(clearInterval(r),n.call(e)),++t},500)}L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{maxZoom:21,type:"roadmap",maxNativeZoom:21},initialize:function(n){L.GridLayer.prototype.initialize.call(this,n),this._tileCallbacks={},this._lru=new qV(100),this._imagesPerTile=1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(n){L.GridLayer.prototype.onAdd.call(this,n),this._initMutantContainer(),this._logoContainer&&n._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&n._controlCorners.bottomright.appendChild(this._attributionContainer),YV(()=>{this._map&&(this._initMutant(),google.maps.event.addListenerOnce(this._mutant,"idle",()=>{this._map&&(this._checkZoomLevels(),this._mutantIsReady=!0)}))})},onRemove:function(n){L.GridLayer.prototype.onRemove.call(this,n),this._observer.disconnect(),n._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle")},addGoogleLayer:function(n,e){return this._subLayers||(this._subLayers={}),this.whenReady(()=>{var t=google.maps[n],r=new t(e);r.setMap(this._mutant),this._subLayers[n]=r}),this},removeGoogleLayer:function(n){return this.whenReady(()=>{var e=this._subLayers&&this._subLayers[n];e&&(e.setMap(null),delete this._subLayers[n])}),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.pointerEvents="none",this._mutantContainer.style.visibility="hidden",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);const n=this._mutantContainer.style;this._map.options.zoomSnap<1?(n.width="180%",n.height="180%"):(n.width="100%",n.height="100%"),n.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){if(!this._mutant){var n={center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,styles:this.options.styles||[],backgroundColor:"transparent"};this.options.mapId!=null&&(n.mapId=this.options.mapId);var e=new google.maps.Map(this._mutantContainer,n);this._mutant=e,this._update(),this.fire("spawned",{mapObject:e}),this._waitControls(),this.once("controls_ready",this._setupAttribution)}},_attachObserver:function(e){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(e,{childList:!0,subtree:!0}),Array.prototype.forEach.call(e.querySelectorAll("img"),this._boundOnMutatedImage)},_waitControls:function(){const n=setInterval(()=>{const e=this._mutant.__gm.layoutManager;if(!e)return;clearInterval(n);let t;Object.keys(e).forEach(function(r){const i=e[r];i.get&&i.get(1)instanceof Node&&(t=i)}),this.fire("controls_ready",{positions:t})},50)},_setupAttribution:function(n){if(!this._map)return;const e=google.maps.ControlPosition,t=this._attributionContainer=n.positions.get(e.BOTTOM_RIGHT);L.DomUtil.addClass(t,"leaflet-control leaflet-control-attribution"),L.DomEvent.disableClickPropagation(t),t.style.height="14px",this._map._controlCorners.bottomright.appendChild(t),this._logoContainer=n.positions.get(e.BOTTOM_LEFT),this._logoContainer.style.pointerEvents="auto",this._map._controlCorners.bottomleft.appendChild(this._logoContainer)},_onMutations:function(e){for(var t=0;t<e.length;++t)for(var r=e[t],i=0;i<r.addedNodes.length;++i){var s=r.addedNodes[i];s instanceof HTMLImageElement?this._onMutatedImage(s):s instanceof HTMLElement&&Array.prototype.forEach.call(s.querySelectorAll("img"),this._boundOnMutatedImage)}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+|VinaFnapurmBegrtn)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+|VinaFnapurmBegrtn)/,_onMutatedImage:function(e){let t,r=e.src.match(this._roadRegexp),i=0;if(r?(t={z:r[1],x:r[2],y:r[3]},this._imagesPerTile>1&&(e.style.zIndex=1,i=1)):(r=e.src.match(this._satRegexp),r&&(t={x:r[1],y:r[2],z:r[3]}),i=0),t){var s=this._tileCoordsToKey(t);e.style.position="absolute";var o=s+"/"+i;this._lru.set(o,e),o in this._tileCallbacks&&this._tileCallbacks[o]&&(this._tileCallbacks[o].forEach(a=>a(e)),delete this._tileCallbacks[o])}},createTile:function(n,e){const t=this._tileCoordsToKey(n),r=L.DomUtil.create("div");r.style.textAlign="left",r.dataset.pending=this._imagesPerTile,e=e.bind(this,null,r);for(var i=0;i<this._imagesPerTile;++i){const s=t+"/"+i,o=this._lru.get(s);o?(r.appendChild(this._clone(o)),--r.dataset.pending):(this._tileCallbacks[s]=this._tileCallbacks[s]||[],this._tileCallbacks[s].push((function(a){return(function(l){a.appendChild(this._clone(l)),--a.dataset.pending,parseInt(a.dataset.pending)||e()}).bind(this)}).bind(this)(r)))}return parseInt(r.dataset.pending)||L.Util.requestAnimFrame(e),r},_clone:function(n){const e=n.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){const n=this._map.getZoom(),e=this._mutant.getZoom();!n||!e||(e!==n||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(n){n!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=n,this._resetView())},_update:function(n){if(this._mutant){n=n||this._map.getCenter();const e=new google.maps.LatLng(n.lat,n.lng),t=Math.round(this._map.getZoom()),r=this._mutant.getZoom();this._mutant.setCenter(e),t!==r&&(this._mutant.setZoom(t),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this,n)},whenReady:function(n,e){return this._mutant?n.call(e||this,{target:this}):this.on("spawned",n,e),this}});L.gridLayer.googleMutant=function(n){return new L.GridLayer.GoogleMutant(n)};const KV={googleMapsApiKey:"AIzaSyCQyGM6ndsRr6Jro1FK07a8BFBP-7lhzwM"};let rb=!1,Kf=null;function ZV(){return rb?Promise.resolve():Kf||(Kf=new Promise((n,e)=>{try{if(window.google&&window.google.maps){rb=!0,n();return}const t=document.createElement("script");t.type="text/javascript",t.src=`https://maps.googleapis.com/maps/api/js?key=${KV.googleMapsApiKey}&libraries=places`,t.async=!0,t.defer=!0,t.onload=()=>{rb=!0,n()},t.onerror=r=>{Kf=null,e(new Error(`Failed to load Google Maps API: ${r}`))},document.head.appendChild(t)}catch(t){Kf=null,e(t)}}),Kf)}function XV(){const{isEnabled:n,startMeasure:e}=Hp(),t=wt(null),r=wt(""),i=wt("Hybride"),s=wt(null),o=wt(!1),a={maxZoom:19,updateWhenZooming:!0,updateWhenIdle:!0,noWrap:!0,keepBuffer:2,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Ut.latLngBounds(Ut.latLng(41.333,-5.566),Ut.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,useCache:!0,priorityLevels:3},l=e("createBaseMaps","useMapState"),u={Hybride:Ut.layerGroup([Ut.gridLayer.googleMutant({type:"hybrid",maxZoom:a.maxZoom})]),Cadastre:Ut.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...a,attribution:"Cadastre - Carte © IGN/Geoportail",maxNativeZoom:18}),IGN:Ut.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...a,attribution:"Carte IGN © IGN/Geoportail",maxNativeZoom:18})};l();const h=async()=>{try{await ZV(),o.value=!0}catch(E){console.error("Failed to load Google Maps API:",E),o.value=!1,i.value==="Hybride"&&(i.value="IGN")}},p=kn.createPerformanceTracker(async E=>{o.value||await h(),kn.measure("initMap:setOptions",()=>{t.value=E,E.options.zoomSnap=.5,E.options.zoomDelta=.5,E.options.wheelPxPerZoomLevel=120,E.options.zoomAnimation=!0,E.options.fadeAnimation=!0,E.options.markerZoomAnimation=!0,E.options.preferCanvas=!0,E.options.renderer=Ut.canvas(),E.options.minZoom=2,E.options.maxZoom=19,E.options.scrollWheelZoom=!0,E.options.doubleClickZoom=!0;const k=Ut.latLngBounds(Ut.latLng(-90,-180),Ut.latLng(90,180));E.setMaxBounds(k),E.options.maxBoundsViscosity=1,E.options.trackResize=!0;let A=null;E.getZoom(),E.on("zoomstart",()=>{E.getZoom(),E.options.zoomAnimation=!1,E.options.markerZoomAnimation=!1}),E.on("zoomend",()=>{A&&clearTimeout(A),A=setTimeout(()=>{setTimeout(()=>{E.options.zoomAnimation=!0,E.options.markerZoomAnimation=!0,E.invalidateSize({animate:!1,pan:!1});const R=E.getBounds(),W=E.options.maxBounds;W&&!R.intersects(W)&&E.panInsideBounds(W,{animate:!1}),E.eachLayer(Q=>{Q.properties&&Q.properties.type==="Note"&&typeof Q.updatePosition=="function"&&Q.updatePosition()})},250)},250)});const D=E._zoomAnimation;D&&(E._zoomAnimation=function(R){try{this._animatingZoom||D.call(this,R)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),E.on("zoomanim",R=>{E.eachLayer(W=>{W.properties&&W.properties.type==="Note"&&typeof W.updatePositionDuringZoom=="function"&&W.updatePositionDuringZoom(R)})})},"useMapState"),kn.measure("initMap:addInitialLayer",()=>{E&&E.whenReady(()=>{const k=i.value;if(u[k]){if(console.log(`Initialisation de la couche de base: ${k}`),s.value&&E.hasLayer(s.value))try{E.removeLayer(s.value),console.log("Couche active précédente supprimée")}catch(A){console.warn("Erreur lors de la suppression de la couche active précédente:",A)}s.value=u[k];try{s.value.addTo(E),console.log(`Couche ${k} ajoutée à la carte`)}catch(A){console.error(`Erreur lors de l'ajout de la couche ${k}:`,A)}}else console.warn(`Couche de base non disponible: ${k}`)})},"useMapState"),E.on("baselayerchange",k=>{const A=e("baselayerchange","useMapState",{layer:k.name});i.value=k.name,s.value=k.layer,A()}),n.value&&(E.on("movestart",()=>{e("mapMove","useMapState",{startCenter:E.getCenter()})}),E.on("moveend",()=>{e("mapMoveEnd","useMapState",{endCenter:E.getCenter()})(),E.eachLayer(A=>{A.properties&&A.properties.type==="Note"&&typeof A.updatePosition=="function"&&A.updatePosition()})}),E.on("tileloadstart",()=>{e("tileLoad","useMapState")}),E.on("tileload",()=>{e("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),v=kn.createAsyncPerformanceTracker(async E=>{if(E==="Hybride"&&!o.value&&(await h(),!o.value)){console.warn("Cannot switch to Hybride: Google Maps API not loaded");return}if(!t.value||!u[E]){console.warn(`Impossible de changer la carte de base: ${t.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(i.value===E)return;console.log(`Changement de carte: ${i.value} -> ${E}`);const k=t.value,A=k.getCenter(),D=k.getZoom();k.options.zoomAnimation=!1,k.options.fadeAnimation=!1,k.options.markerZoomAnimation=!1;const R=u[E];if(s.value&&k.hasLayer(s.value))try{k.removeLayer(s.value),console.log(`Couche précédente ${i.value} supprimée`)}catch(W){console.warn("Erreur lors de la suppression de la couche active:",W)}try{R instanceof Ut.LayerGroup,R.addTo(k),console.log(`Nouvelle couche ${E} ajoutée`)}catch(W){console.error("Erreur lors de l'ajout de la nouvelle couche:",W);try{k.hasLayer(R)&&k.removeLayer(R),R.addTo(k),console.log(`Récupération: couche ${E} réajoutée`)}catch(Q){throw console.error("Échec de la récupération:",Q),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=R,i.value=E;try{k.setView(A,D,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue réinitialisée: centre=${A}, zoom=${D}`)}catch(W){console.warn("Erreur lors de la réinitialisation de la vue:",W)}try{k.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{k.eachLayer(W=>{W.properties&&W.properties.type==="Note"&&typeof W.updatePosition=="function"&&W.updatePosition()})},100)}catch(W){console.warn("Erreur lors du rafraîchissement de la carte:",W)}setTimeout(()=>{k.options.zoomAnimation=!0,k.options.fadeAnimation=!0,k.options.markerZoomAnimation=!0,console.log("Animations restaurées")},500)}catch(k){if(console.error("Erreur lors du changement de carte de base:",k),t.value)try{const A=t.value;A.eachLayer(R=>{(R instanceof Ut.TileLayer||R instanceof Ut.LayerGroup)&&A.removeLayer(R)});const D=u[E];D.addTo(A),s.value=D,i.value=E,A.options.zoomAnimation=!0,A.options.fadeAnimation=!0,A.options.markerZoomAnimation=!0,A.invalidateSize({animate:!1,pan:!1}),console.log("Récupération effectuée après erreur")}catch(A){console.error("Erreur lors de la récupération après échec:",A)}}},"changeBaseMap","useMapState"),m=kn.createAsyncPerformanceTracker(async()=>{if(!(!t.value||!r.value))try{const E=await kn.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),k=await kn.measureAsync("searchLocation:parseResponse",async()=>await E.json(),"useMapState");k&&k.length>0&&kn.measure("searchLocation:updateView",()=>{const{lat:A,lon:D}=k[0];t.value.setView([A,D],13,{animate:!0})},"useMapState")}catch(E){console.error("Erreur lors de la recherche de localisation:",E)}},"searchLocation","useMapState");return{map:t,searchQuery:r,currentBaseMap:i,baseMaps:u,initMap:p,searchLocation:m,changeBaseMap:v,cleanup:()=>{const E=e("cleanup","useMapState");t.value&&(t.value.remove(),t.value=null),s.value&&(s.value=null),E()},isPerformanceEnabled:n,isGoogleMapsLoaded:o}}const JV={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},QV={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},eH={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},tH={key:0,class:"mb-4"},nH={key:0,class:"animate-pulse"},rH=["value"],iH={key:1,class:"mb-4"},sH={key:0,class:"animate-pulse"},oH=["disabled"],aH={value:null},lH=["value"],uH={key:2,class:"mb-4"},cH={key:0,class:"animate-pulse"},dH=["disabled"],hH={value:null},fH=["value"],pH={class:"mb-4"},gH={class:"mb-6"},mH={class:"flex justify-end space-x-3"},vH=["disabled"],yH={key:0},bH={key:1},GE=Ms({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(n,{expose:e,emit:t}){function r(G){return G?typeof G=="object"?G.id:G:null}function i(G){if(G===null)throw new Error("Invalid ID");return G}const s=n,o=t,a=ro(),l=Hy(),u=Op(),h=wt(!1),p=wt(null),v=wt([]),m=wt([]),C=wt([]),E=wt(null),k=wt(null),A=wt(!1),D=wt(!1),R=wt(!1),W=wt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),Q=Gn(()=>{var G,$,F;return((G=a.user)==null?void 0:G.user_type)==="admin"?W.value.nom.trim()&&W.value.entreprise&&W.value.salarie:(($=a.user)==null?void 0:$.user_type)==="entreprise"?W.value.nom.trim()&&W.value.salarie:(((F=a.user)==null?void 0:F.user_type)==="salarie",W.value.nom.trim())});ai(()=>W.value.entreprise,async G=>{if(!s.modelValue)return;W.value.salarie=null,W.value.visiteur=null,m.value=[];const $=r(G);console.log("[NewPlanModal] Entreprise sélectionnée:",$),$?await de($):v.value=[]}),ai(()=>W.value.salarie,async G=>{if(!s.modelValue)return;W.value.visiteur=null;const $=r(G);$?await fe($):m.value=[]}),ai(()=>s.modelValue,G=>{var $,F,I;G?(($=a.user)==null?void 0:$.user_type)==="admin"?U():((F=a.user)==null?void 0:F.user_type)==="entreprise"?de(a.user.id):((I=a.user)==null?void 0:I.user_type)==="salarie"&&fe(a.user.id):(W.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,m.value=[],v.value=[],C.value=[],p.value=null)});async function de(G){A.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",G);const $=await Xa.getUsers({role:"SALARIE",entreprise:G});console.log("[NewPlanModal] Réponse salaries:",$.data),v.value=$.data}catch($){console.error("[NewPlanModal] Error loading salaries:",$),v.value=[]}finally{A.value=!1}}async function fe(G){D.value=!0;try{const $=await Xa.getUsers({role:"VISITEUR",salarie:G});m.value=$.data}catch($){console.error("[NewPlanModal] Error loading visiteurs:",$),m.value=[]}finally{D.value=!1}}async function N(G){s.modelValue&&(E.value=G,W.value.salarie=G.id,await fe(G.id),o("salarieSelected",G))}function z(G){s.modelValue&&(k.value=G,W.value.visiteur=G.id,o("visiteurSelected",G))}function J(){o("update:modelValue",!1),W.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,m.value=[],p.value=null}async function U(){R.value=!0;try{const G=await a.fetchEnterprises();C.value=G}catch(G){console.error("[NewPlanModal] Error loading entreprises:",G),C.value=[]}finally{R.value=!1}}async function B(){var G,$;p.value=null,h.value=!0;try{const F={nom:W.value.nom.trim(),description:W.value.description.trim()},I=a.user;if(!I)throw new Error("User not found");if(I.user_type==="admin"){if(!W.value.entreprise||!W.value.salarie)throw new Error("Missing required fields");F.entreprise=i(r(W.value.entreprise)),F.salarie=i(r(W.value.salarie)),W.value.visiteur&&(F.visiteur=W.value.visiteur)}else if(I.user_type==="entreprise"){if(!W.value.salarie)throw new Error("Missing required fields");F.entreprise=I.id,F.salarie=i(r(W.value.salarie)),W.value.visiteur&&(F.visiteur=W.value.visiteur)}else if(I.user_type==="salarie"){if(!I.entreprise)throw new Error("Missing required fields");F.entreprise=I.entreprise.id,F.salarie=I.id,W.value.visiteur&&(F.visiteur=W.value.visiteur)}else if(I.user_type==="visiteur"){if(!I.entreprise||!I.salarie)throw new Error("Missing required fields");F.entreprise=I.entreprise.id,F.salarie=I.salarie.id,F.visiteur=I.id}console.log("Données du plan à créer:",F),l.clearCurrentPlan(),u.setCurrentPlan(null);const X=await l.createPlan(F);o("created",X.id),J()}catch(F){console.error("[NewPlanModal] Error creating plan:",F),console.error("Response data:",(G=F.response)==null?void 0:G.data);let I="Une erreur est survenue lors de la création du plan";($=F.response)!=null&&$.data&&(typeof F.response.data=="object"?I=Object.entries(F.response.data).map(([X,K])=>Array.isArray(K)?`${X}: ${K.join(", ")}`:`${X}: ${K}`).join(`
`):typeof F.response.data=="string"&&(I=F.response.data)),p.value=I}finally{h.value=!1}}return e({salaries:v,visiteurs:m,selectedSalarie:E,selectedVisiteur:k,loadSalaries:de,loadVisiteurs:fe,selectSalarie:N,selectVisiteur:z}),(G,$)=>{var F,I,X,K;return G.modelValue?(Ne(),Re("div",JV,[x("div",QV,[x("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[$[6]||($[6]=x("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),x("button",{onClick:J,class:"text-gray-400 hover:text-gray-500"},$[5]||($[5]=[x("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",eH,[yn(a).isAdmin?(Ne(),Re("div",tH,[$[9]||($[9]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),R.value?(Ne(),Re("div",nH,$[7]||($[7]=[x("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Pn((Ne(),Re("select",{key:1,"onUpdate:modelValue":$[0]||($[0]=ve=>W.value.entreprise=ve),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[$[8]||($[8]=x("option",{value:null},"Sélectionnez une entreprise",-1)),(Ne(!0),Re(wn,null,Wn(C.value,ve=>(Ne(),Re("option",{key:ve.id,value:ve.id},kt(yn(wu)(ve)),9,rH))),128))],512)),[[Oi,W.value.entreprise]])])):Jt("",!0),((F=yn(a).user)==null?void 0:F.user_type)==="admin"||((I=yn(a).user)==null?void 0:I.user_type)==="entreprise"?(Ne(),Re("div",iH,[$[11]||($[11]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),A.value?(Ne(),Re("div",sH,$[10]||($[10]=[x("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Pn((Ne(),Re("select",{key:1,id:"edit-salarie","onUpdate:modelValue":$[1]||($[1]=ve=>W.value.salarie=ve),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:yn(a).isAdmin&&!W.value.entreprise},[x("option",aH,kt(v.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),(Ne(!0),Re(wn,null,Wn(v.value,ve=>(Ne(),Re("option",{key:ve.id,value:ve.id},kt(yn(wu)(ve)),9,lH))),128))],8,oH)),[[Oi,W.value.salarie]])])):Jt("",!0),((X=yn(a).user)==null?void 0:X.user_type)!=="visiteur"?(Ne(),Re("div",uH,[$[13]||($[13]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),D.value?(Ne(),Re("div",cH,$[12]||($[12]=[x("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Pn((Ne(),Re("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":$[2]||($[2]=ve=>W.value.visiteur=ve),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!m.value.length||((K=yn(a).user)==null?void 0:K.user_type)!=="salarie"&&!W.value.salarie},[x("option",hH,kt(m.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),(Ne(!0),Re(wn,null,Wn(m.value,ve=>(Ne(),Re("option",{key:ve.id,value:ve.id},kt(yn(wu)(ve)),9,fH))),128))],8,dH)),[[Oi,W.value.visiteur]])])):Jt("",!0),x("div",pH,[$[14]||($[14]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Pn(x("input",{id:"edit-nom","onUpdate:modelValue":$[3]||($[3]=ve=>W.value.nom=ve),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Ar,W.value.nom]])]),x("div",gH,[$[15]||($[15]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Pn(x("textarea",{id:"edit-description","onUpdate:modelValue":$[4]||($[4]=ve=>W.value.description=ve),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Ar,W.value.description]])]),x("div",mH,[x("button",{onClick:J,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),x("button",{onClick:B,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!Q.value||h.value},[h.value?(Ne(),Re("span",yH,"Création en cours...")):(Ne(),Re("span",bH,"Créer"))],8,vH)])])])])):Jt("",!0)}}});function Yi(n){"@babel/helpers - typeof";return Yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yi(n)}var tl=Uint8Array,xu=Uint16Array,q_=Int32Array,Gy=new tl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wy=new tl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),E2=new tl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WE=function(n,e){for(var t=new xu(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new q_(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},qE=WE(Gy,2),YE=qE.b,M2=qE.r;YE[28]=258,M2[258]=28;var KE=WE(Wy,0),_H=KE.b,S5=KE.r,P2=new xu(32768);for(var Ls=0;Ls<32768;++Ls){var eh=(Ls&43690)>>1|(Ls&21845)<<1;eh=(eh&52428)>>2|(eh&13107)<<2,eh=(eh&61680)>>4|(eh&3855)<<4,P2[Ls]=((eh&65280)>>8|(eh&255)<<8)>>1}var td=function(n,e,t){for(var r=n.length,i=0,s=new xu(e);i<r;++i)n[i]&&++s[n[i]-1];var o=new xu(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new xu(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],h=e-n[i],p=o[n[i]-1]++<<h,v=p|(1<<h)-1;p<=v;++p)a[P2[p]>>l]=u}else for(a=new xu(r),i=0;i<r;++i)n[i]&&(a[i]=P2[o[n[i]-1]++]>>15-n[i]);return a},Sh=new tl(288);for(var Ls=0;Ls<144;++Ls)Sh[Ls]=8;for(var Ls=144;Ls<256;++Ls)Sh[Ls]=9;for(var Ls=256;Ls<280;++Ls)Sh[Ls]=7;for(var Ls=280;Ls<288;++Ls)Sh[Ls]=8;var _m=new tl(32);for(var Ls=0;Ls<32;++Ls)_m[Ls]=5;var wH=td(Sh,9,0),xH=td(Sh,9,1),LH=td(_m,5,0),CH=td(_m,5,1),ib=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},hc=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},sb=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Y_=function(n){return(n+7)/8|0},ZE=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new tl(n.subarray(e,t))},SH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],vc=function(n,e,t){var r=new Error(e||SH[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,vc),!t)throw r;return r},EH=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new tl(0);var o=!t,a=o||e.i!=2,l=e.i;o&&(t=new tl(i*3));var u=function(be){var Ie=t.length;if(be>Ie){var le=new tl(Math.max(Ie*2,be));le.set(t),t=le}},h=e.f||0,p=e.p||0,v=e.b||0,m=e.l,C=e.d,E=e.m,k=e.n,A=i*8;do{if(!m){h=hc(n,p,1);var D=hc(n,p+1,3);if(p+=3,D)if(D==1)m=xH,C=CH,E=9,k=5;else if(D==2){var de=hc(n,p,31)+257,fe=hc(n,p+10,15)+4,N=de+hc(n,p+5,31)+1;p+=14;for(var z=new tl(N),J=new tl(19),U=0;U<fe;++U)J[E2[U]]=hc(n,p+U*3,7);p+=fe*3;for(var B=ib(J),G=(1<<B)-1,$=td(J,B,1),U=0;U<N;){var F=$[hc(n,p,G)];p+=F&15;var R=F>>4;if(R<16)z[U++]=R;else{var I=0,X=0;for(R==16?(X=3+hc(n,p,3),p+=2,I=z[U-1]):R==17?(X=3+hc(n,p,7),p+=3):R==18&&(X=11+hc(n,p,127),p+=7);X--;)z[U++]=I}}var K=z.subarray(0,de),ve=z.subarray(de);E=ib(K),k=ib(ve),m=td(K,E,1),C=td(ve,k,1)}else vc(1);else{var R=Y_(p)+4,W=n[R-4]|n[R-3]<<8,Q=R+W;if(Q>i){l&&vc(0);break}a&&u(v+W),t.set(n.subarray(R,Q),v),e.b=v+=W,e.p=p=Q*8,e.f=h;continue}if(p>A){l&&vc(0);break}}a&&u(v+131072);for(var ge=(1<<E)-1,He=(1<<k)-1,ie=p;;ie=p){var I=m[sb(n,p)&ge],Ce=I>>4;if(p+=I&15,p>A){l&&vc(0);break}if(I||vc(2),Ce<256)t[v++]=Ce;else if(Ce==256){ie=p,m=null;break}else{var _e=Ce-254;if(Ce>264){var U=Ce-257,H=Gy[U];_e=hc(n,p,(1<<H)-1)+YE[U],p+=H}var ee=C[sb(n,p)&He],pe=ee>>4;ee||vc(3),p+=ee&15;var ve=_H[pe];if(pe>3){var H=Wy[pe];ve+=sb(n,p)&(1<<H)-1,p+=H}if(p>A){l&&vc(0);break}a&&u(v+131072);var re=v+_e;if(v<ve){var ae=s-ve,De=Math.min(ve,re);for(ae+v<0&&vc(3);v<De;++v)t[v]=r[ae+v]}for(;v<re;++v)t[v]=t[v-ve]}}e.l=m,e.p=ie,e.b=v,e.f=h,m&&(h=1,e.m=E,e.d=C,e.n=k)}while(!h);return v!=t.length&&o?ZE(t,0,v):t.subarray(0,v)},Cd=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},ag=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},ob=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:JE,l:0};if(i==1){var o=new tl(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(Q,de){return Q.f-de.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],u=0,h=1,p=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=i-1;)a=t[t[u].f<t[p].f?u++:p++],l=t[u!=h&&t[u].f<t[p].f?u++:p++],t[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var m=new xu(v+1),C=k2(t[h-1],m,0);if(C>e){var r=0,E=0,k=C-e,A=1<<k;for(s.sort(function(de,fe){return m[fe.s]-m[de.s]||de.f-fe.f});r<i;++r){var D=s[r].s;if(m[D]>e)E+=A-(1<<C-m[D]),m[D]=e;else break}for(E>>=k;E>0;){var R=s[r].s;m[R]<e?E-=1<<e-m[R]++-1:++r}for(;r>=0&&E;--r){var W=s[r].s;m[W]==e&&(--m[W],++E)}C=e}return{t:new tl(m),l:C}},k2=function(n,e,t){return n.s==-1?Math.max(k2(n.l,e,t+1),k2(n.r,e,t+1)):e[n.s]=t},E5=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new xu(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return{c:t.subarray(0,r),n:e}},lg=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},XE=function(n,e,t){var r=t.length,i=Y_(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},M5=function(n,e,t,r,i,s,o,a,l,u,h){Cd(e,h++,t),++i[256];for(var p=ob(i,15),v=p.t,m=p.l,C=ob(s,15),E=C.t,k=C.l,A=E5(v),D=A.c,R=A.n,W=E5(E),Q=W.c,de=W.n,fe=new xu(19),N=0;N<D.length;++N)++fe[D[N]&31];for(var N=0;N<Q.length;++N)++fe[Q[N]&31];for(var z=ob(fe,7),J=z.t,U=z.l,B=19;B>4&&!J[E2[B-1]];--B);var G=u+5<<3,$=lg(i,Sh)+lg(s,_m)+o,F=lg(i,v)+lg(s,E)+o+14+3*B+lg(fe,J)+2*fe[16]+3*fe[17]+7*fe[18];if(l>=0&&G<=$&&G<=F)return XE(e,h,n.subarray(l,l+u));var I,X,K,ve;if(Cd(e,h,1+(F<$)),h+=2,F<$){I=td(v,m,0),X=v,K=td(E,k,0),ve=E;var ge=td(J,U,0);Cd(e,h,R-257),Cd(e,h+5,de-1),Cd(e,h+10,B-4),h+=14;for(var N=0;N<B;++N)Cd(e,h+3*N,J[E2[N]]);h+=3*B;for(var He=[D,Q],ie=0;ie<2;++ie)for(var Ce=He[ie],N=0;N<Ce.length;++N){var _e=Ce[N]&31;Cd(e,h,ge[_e]),h+=J[_e],_e>15&&(Cd(e,h,Ce[N]>>5&127),h+=Ce[N]>>12)}}else I=wH,X=Sh,K=LH,ve=_m;for(var N=0;N<a;++N){var H=r[N];if(H>255){var _e=H>>18&31;ag(e,h,I[_e+257]),h+=X[_e+257],_e>7&&(Cd(e,h,H>>23&31),h+=Gy[_e]);var ee=H&31;ag(e,h,K[ee]),h+=ve[ee],ee>3&&(ag(e,h,H>>5&8191),h+=Wy[ee])}else ag(e,h,I[H]),h+=X[H]}return ag(e,h,I[256]),h+X[256]},MH=new q_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),JE=new tl(0),PH=function(n,e,t,r,i,s){var o=s.z||n.length,a=new tl(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var p=MH[e-1],v=p>>13,m=p&8191,C=(1<<t)-1,E=s.p||new xu(32768),k=s.h||new xu(C+1),A=Math.ceil(t/3),D=2*A,R=function(me){return(n[me]^n[me+1]<<A^n[me+2]<<D)&C},W=new q_(25e3),Q=new xu(288),de=new xu(32),fe=0,N=0,z=s.i||0,J=0,U=s.w||0,B=0;z+2<o;++z){var G=R(z),$=z&32767,F=k[G];if(E[$]=F,k[G]=$,U<=z){var I=o-z;if((fe>7e3||J>24576)&&(I>423||!u)){h=M5(n,l,0,W,Q,de,N,J,B,z-B,h),J=fe=N=0,B=z;for(var X=0;X<286;++X)Q[X]=0;for(var X=0;X<30;++X)de[X]=0}var K=2,ve=0,ge=m,He=$-F&32767;if(I>2&&G==R(z-He))for(var ie=Math.min(v,I)-1,Ce=Math.min(32767,z),_e=Math.min(258,I);He<=Ce&&--ge&&$!=F;){if(n[z+K]==n[z+K-He]){for(var H=0;H<_e&&n[z+H]==n[z+H-He];++H);if(H>K){if(K=H,ve=He,H>ie)break;for(var ee=Math.min(He,H-2),pe=0,X=0;X<ee;++X){var re=z-He+X&32767,ae=E[re],De=re-ae&32767;De>pe&&(pe=De,F=re)}}}$=F,F=E[$],He+=$-F&32767}if(ve){W[J++]=268435456|M2[K]<<18|S5[ve];var be=M2[K]&31,Ie=S5[ve]&31;N+=Gy[be]+Wy[Ie],++Q[257+be],++de[Ie],U=z+K,++fe}else W[J++]=n[z],++Q[n[z]]}}for(z=Math.max(z,U);z<o;++z)W[J++]=n[z],++Q[n[z]];h=M5(n,l,u,W,Q,de,N,J,B,z-B,h),u||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=k,s.p=E,s.i=z,s.w=U)}else{for(var z=s.w||0;z<o+u;z+=65535){var le=z+65535;le>=o&&(l[h/8|0]=u,le=o),h=XE(l,h+1,n.subarray(z,le))}s.i=o}return ZE(a,0,r+Y_(h)+i)},QE=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},kH=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new tl(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return PH(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},eM=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},AH=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=QE();i.p(e.dictionary),eM(n,2,i.d())}},TH=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&vc(6,"invalid zlib data"),(n[1]>>5&1)==1&&vc(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function A2(n,e){e||(e={});var t=QE();t.p(n);var r=kH(n,e,e.dictionary?6:2,4);return AH(r,e),eM(r,r.length-4,t.d()),r}function DH(n,e){return EH(n.subarray(TH(n),-4),{i:2},e,e)}var OH=typeof TextDecoder<"u"&&new TextDecoder,NH=0;try{OH.decode(JE,{stream:!0}),NH=1}catch{}var Pr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function ab(){Pr.console&&typeof Pr.console.log=="function"&&Pr.console.log.apply(Pr.console,arguments)}var ss={log:ab,warn:function(n){Pr.console&&(typeof Pr.console.warn=="function"?Pr.console.warn.apply(Pr.console,arguments):ab.call(null,arguments))},error:function(n){Pr.console&&(typeof Pr.console.error=="function"?Pr.console.error.apply(Pr.console,arguments):ab(n))}};function lb(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){ef(r.response,e,t)},r.onerror=function(){ss.error("could not download file")},r.send()}function P5(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function S0(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Yg,T2,ef=Pr.saveAs||((typeof window>"u"?"undefined":Yi(window))!=="object"||window!==Pr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Pr.URL||Pr.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?P5(i.href)?lb(n,e,t):S0(i,i.target="_blank"):S0(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){S0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(P5(n))lb(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){S0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Yi(s)!=="object"&&(ss.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return lb(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(Pr.HTMLElement)||Pr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Yi(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(n)}else{var l=Pr.URL||Pr.webkitURL,u=l.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function tM(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function ub(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=Ga(t,r,i,s,e[0],7,-680876936),s=Ga(s,t,r,i,e[1],12,-389564586),i=Ga(i,s,t,r,e[2],17,606105819),r=Ga(r,i,s,t,e[3],22,-1044525330),t=Ga(t,r,i,s,e[4],7,-176418897),s=Ga(s,t,r,i,e[5],12,1200080426),i=Ga(i,s,t,r,e[6],17,-1473231341),r=Ga(r,i,s,t,e[7],22,-45705983),t=Ga(t,r,i,s,e[8],7,1770035416),s=Ga(s,t,r,i,e[9],12,-1958414417),i=Ga(i,s,t,r,e[10],17,-42063),r=Ga(r,i,s,t,e[11],22,-1990404162),t=Ga(t,r,i,s,e[12],7,1804603682),s=Ga(s,t,r,i,e[13],12,-40341101),i=Ga(i,s,t,r,e[14],17,-1502002290),t=Wa(t,r=Ga(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Wa(s,t,r,i,e[6],9,-1069501632),i=Wa(i,s,t,r,e[11],14,643717713),r=Wa(r,i,s,t,e[0],20,-373897302),t=Wa(t,r,i,s,e[5],5,-701558691),s=Wa(s,t,r,i,e[10],9,38016083),i=Wa(i,s,t,r,e[15],14,-660478335),r=Wa(r,i,s,t,e[4],20,-405537848),t=Wa(t,r,i,s,e[9],5,568446438),s=Wa(s,t,r,i,e[14],9,-1019803690),i=Wa(i,s,t,r,e[3],14,-187363961),r=Wa(r,i,s,t,e[8],20,1163531501),t=Wa(t,r,i,s,e[13],5,-1444681467),s=Wa(s,t,r,i,e[2],9,-51403784),i=Wa(i,s,t,r,e[7],14,1735328473),t=qa(t,r=Wa(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=qa(s,t,r,i,e[8],11,-2022574463),i=qa(i,s,t,r,e[11],16,1839030562),r=qa(r,i,s,t,e[14],23,-35309556),t=qa(t,r,i,s,e[1],4,-1530992060),s=qa(s,t,r,i,e[4],11,1272893353),i=qa(i,s,t,r,e[7],16,-155497632),r=qa(r,i,s,t,e[10],23,-1094730640),t=qa(t,r,i,s,e[13],4,681279174),s=qa(s,t,r,i,e[0],11,-358537222),i=qa(i,s,t,r,e[3],16,-722521979),r=qa(r,i,s,t,e[6],23,76029189),t=qa(t,r,i,s,e[9],4,-640364487),s=qa(s,t,r,i,e[12],11,-421815835),i=qa(i,s,t,r,e[15],16,530742520),t=Ya(t,r=qa(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ya(s,t,r,i,e[7],10,1126891415),i=Ya(i,s,t,r,e[14],15,-1416354905),r=Ya(r,i,s,t,e[5],21,-57434055),t=Ya(t,r,i,s,e[12],6,1700485571),s=Ya(s,t,r,i,e[3],10,-1894986606),i=Ya(i,s,t,r,e[10],15,-1051523),r=Ya(r,i,s,t,e[1],21,-2054922799),t=Ya(t,r,i,s,e[8],6,1873313359),s=Ya(s,t,r,i,e[15],10,-30611744),i=Ya(i,s,t,r,e[6],15,-1560198380),r=Ya(r,i,s,t,e[13],21,1309151649),t=Ya(t,r,i,s,e[4],6,-145523070),s=Ya(s,t,r,i,e[11],10,-1120210379),i=Ya(i,s,t,r,e[2],15,718787259),r=Ya(r,i,s,t,e[9],21,-343485551),n[0]=hh(t,n[0]),n[1]=hh(r,n[1]),n[2]=hh(i,n[2]),n[3]=hh(s,n[3])}function qy(n,e,t,r,i,s){return e=hh(hh(e,n),hh(r,s)),hh(e<<i|e>>>32-i,t)}function Ga(n,e,t,r,i,s,o){return qy(e&t|~e&r,n,e,i,s,o)}function Wa(n,e,t,r,i,s,o){return qy(e&r|t&~r,n,e,i,s,o)}function qa(n,e,t,r,i,s,o){return qy(e^t^r,n,e,i,s,o)}function Ya(n,e,t,r,i,s,o){return qy(t^(e|~r),n,e,i,s,o)}function nM(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)ub(r,IH(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(ub(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,ub(r,i),r}function IH(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Yg=Pr.atob.bind(Pr),T2=Pr.btoa.bind(Pr);var k5="0123456789abcdef".split("");function BH(n){for(var e="",t=0;t<4;t++)e+=k5[n>>8*t+4&15]+k5[n>>8*t&15];return e}function RH(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function D2(n){return nM(n).map(RH).join("")}var FH=function(n){for(var e=0;e<n.length;e++)n[e]=BH(n[e]);return n.join("")}(nM("hello"))!="5d41402abc4b2a76b9719d911017c592";function hh(n,e){if(FH){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function O2(n,e){var t,r,i,s;if(n!==t){for(var o=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var h=a[l];u=(u+h+o.charCodeAt(l))%256,a[l]=a[u],a[u]=h}t=n,r=a}else a=r;var p=e.length,v=0,m=0,C="";for(l=0;l<p;l++)m=(m+(h=a[v=(v+1)%256]))%256,a[v]=a[m],a[m]=h,o=a[(a[v]+a[m])%256],C+=String.fromCharCode(e.charCodeAt(l)^o);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var A5={print:4,modify:8,copy:16,"annot-forms":32};function up(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(A5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=A5[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=D2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=O2(this.encryptionKey,this.padding)}function cp(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function T5(n){if(Yi(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(a){Pr.console&&ss.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Xv(n){if(!(this instanceof Xv))return new Xv(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function rM(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function of(n,e,t,r,i){if(!(this instanceof of))return new of(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,rM.call(this,r,i)}function fp(n,e,t,r,i){if(!(this instanceof fp))return new fp(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,rM.call(this,r,i)}function Mr(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",h=null;Yi(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(h=n.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=T5;var C="1.3",E=m.__private__.getPdfVersion=function(){return C};m.__private__.setPdfVersion=function(j){C=j};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return k};var A=m.__private__.getPageFormat=function(j){return k[j]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},R=D.COMPAT;function W(){this.saveGraphicsState(),Z(new Zn(it,0,0,-it,0,Ia()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),u="n",R=D.ADVANCED}function Q(){this.restoreGraphicsState(),u="S",R=D.COMPAT}var de=m.__private__.combineFontStyleAndFontWeight=function(j,xe){if(j=="bold"&&xe=="normal"||j=="bold"&&xe==400||j=="normal"&&xe=="italic"||j=="bold"&&xe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return xe&&(j=xe==400||xe==="normal"?j==="italic"?"italic":"normal":xe!=700&&xe!=="bold"||j!=="normal"?(xe==700?"bold":xe)+""+j:"bold"),j};m.advancedAPI=function(j){var xe=R===D.COMPAT;return xe&&W.call(this),typeof j!="function"||(j(this),xe&&Q.call(this)),this},m.compatAPI=function(j){var xe=R===D.ADVANCED;return xe&&Q.call(this),typeof j!="function"||(j(this),xe&&W.call(this)),this},m.isAdvancedAPI=function(){return R===D.ADVANCED};var fe,N=function(j){if(R!==D.ADVANCED)throw new Error(j+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=m.roundToPrecision=m.__private__.roundToPrecision=function(j,xe){var et=e||xe;if(isNaN(j)||isNaN(et))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return j.toFixed(et).replace(/0+$/,"")};fe=m.hpf=m.__private__.hpf=typeof l=="number"?function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return z(j,l)}:l==="smart"?function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return z(j,j>-1&&j<1?16:5)}:function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.hpf");return z(j,16)};var J=m.f2=m.__private__.f2=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.f2");return z(j,2)},U=m.__private__.f3=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.f3");return z(j,3)},B=m.scale=m.__private__.scale=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.scale");return R===D.COMPAT?j*it:R===D.ADVANCED?j:void 0},G=function(j){return R===D.COMPAT?Ia()-j:R===D.ADVANCED?j:void 0},$=function(j){return B(G(j))};m.__private__.setPrecision=m.setPrecision=function(j){typeof parseInt(j,10)=="number"&&(e=parseInt(j,10))};var F,I="00000000000000000000000000000000",X=m.__private__.getFileId=function(){return I},K=m.__private__.setFileId=function(j){return I=j!==void 0&&/^[a-fA-F0-9]{32}$/.test(j)?j.toUpperCase():I.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(_s=new up(h.userPermissions,h.userPassword,h.ownerPassword,I)),I};m.setFileId=function(j){return K(j),this},m.getFileId=function(){return X()};var ve=m.__private__.convertDateToPDFDate=function(j){var xe=j.getTimezoneOffset(),et=xe<0?"+":"-",ft=Math.floor(Math.abs(xe/60)),Pt=Math.abs(xe%60),Ht=[et,_e(ft),"'",_e(Pt),"'"].join("");return["D:",j.getFullYear(),_e(j.getMonth()+1),_e(j.getDate()),_e(j.getHours()),_e(j.getMinutes()),_e(j.getSeconds()),Ht].join("")},ge=m.__private__.convertPDFDateToDate=function(j){var xe=parseInt(j.substr(2,4),10),et=parseInt(j.substr(6,2),10)-1,ft=parseInt(j.substr(8,2),10),Pt=parseInt(j.substr(10,2),10),Ht=parseInt(j.substr(12,2),10),dn=parseInt(j.substr(14,2),10);return new Date(xe,et,ft,Pt,Ht,dn,0)},He=m.__private__.setCreationDate=function(j){var xe;if(j===void 0&&(j=new Date),j instanceof Date)xe=ve(j);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(j))throw new Error("Invalid argument passed to jsPDF.setCreationDate");xe=j}return F=xe},ie=m.__private__.getCreationDate=function(j){var xe=F;return j==="jsDate"&&(xe=ge(F)),xe};m.setCreationDate=function(j){return He(j),this},m.getCreationDate=function(j){return ie(j)};var Ce,_e=m.__private__.padd2=function(j){return("0"+parseInt(j)).slice(-2)},H=m.__private__.padd2Hex=function(j){return("00"+(j=j.toString())).substr(j.length)},ee=0,pe=[],re=[],ae=0,De=[],be=[],Ie=!1,le=re,me=function(){ee=0,ae=0,re=[],pe=[],De=[],qn=Kt(),St=Kt()};m.__private__.setCustomOutputDestination=function(j){Ie=!0,le=j};var oe=function(j){Ie||(le=j)};m.__private__.resetCustomOutputDestination=function(){Ie=!1,le=re};var Z=m.__private__.out=function(j){return j=j.toString(),ae+=j.length+1,le.push(j),le},Ae=m.__private__.write=function(j){return Z(arguments.length===1?j.toString():Array.prototype.join.call(arguments," "))},je=m.__private__.getArrayBuffer=function(j){for(var xe=j.length,et=new ArrayBuffer(xe),ft=new Uint8Array(et);xe--;)ft[xe]=j.charCodeAt(xe);return et},Ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Ke};var Me=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(j){return Me=R===D.ADVANCED?j/it:j,this};var he,We=m.__private__.getFontSize=m.getFontSize=function(){return R===D.COMPAT?Me:Me*it},at=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(j){return at=j,this},m.__private__.getR2L=m.getR2L=function(){return at};var ut,Ct=m.__private__.setZoomMode=function(j){var xe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(j))he=j;else if(isNaN(j)){if(xe.indexOf(j)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+j+'" is not recognized.');he=j}else he=parseInt(j,10)};m.__private__.getZoomMode=function(){return he};var Xe,zt=m.__private__.setPageMode=function(j){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(j)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+j+'" is not recognized.');ut=j};m.__private__.getPageMode=function(){return ut};var qt=m.__private__.setLayoutMode=function(j){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(j)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+j+'" is not recognized.');Xe=j};m.__private__.getLayoutMode=function(){return Xe},m.__private__.setDisplayMode=m.setDisplayMode=function(j,xe,et){return Ct(j),qt(xe),zt(et),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(j){if(Object.keys(Qe).indexOf(j)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[j]},m.__private__.getDocumentProperties=function(){return Qe},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(j){for(var xe in Qe)Qe.hasOwnProperty(xe)&&j[xe]&&(Qe[xe]=j[xe]);return this},m.__private__.setDocumentProperty=function(j,xe){if(Object.keys(Qe).indexOf(j)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[j]=xe};var ot,it,At,Yt,bn,xn={},En={},$n=[],Sn={},an={},mn={},tr={},ar=null,mr=0,zn=[],kr=new T5(m),as=n.hotfixes||[],Ni={},io={},Ps=[],Zn=function j(xe,et,ft,Pt,Ht,dn){if(!(this instanceof j))return new j(xe,et,ft,Pt,Ht,dn);isNaN(xe)&&(xe=1),isNaN(et)&&(et=0),isNaN(ft)&&(ft=0),isNaN(Pt)&&(Pt=1),isNaN(Ht)&&(Ht=0),isNaN(dn)&&(dn=0),this._matrix=[xe,et,ft,Pt,Ht,dn]};Object.defineProperty(Zn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(j){this._matrix[0]=j}}),Object.defineProperty(Zn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(j){this._matrix[1]=j}}),Object.defineProperty(Zn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(j){this._matrix[2]=j}}),Object.defineProperty(Zn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(j){this._matrix[3]=j}}),Object.defineProperty(Zn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(j){this._matrix[4]=j}}),Object.defineProperty(Zn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(j){this._matrix[5]=j}}),Object.defineProperty(Zn.prototype,"a",{get:function(){return this._matrix[0]},set:function(j){this._matrix[0]=j}}),Object.defineProperty(Zn.prototype,"b",{get:function(){return this._matrix[1]},set:function(j){this._matrix[1]=j}}),Object.defineProperty(Zn.prototype,"c",{get:function(){return this._matrix[2]},set:function(j){this._matrix[2]=j}}),Object.defineProperty(Zn.prototype,"d",{get:function(){return this._matrix[3]},set:function(j){this._matrix[3]=j}}),Object.defineProperty(Zn.prototype,"e",{get:function(){return this._matrix[4]},set:function(j){this._matrix[4]=j}}),Object.defineProperty(Zn.prototype,"f",{get:function(){return this._matrix[5]},set:function(j){this._matrix[5]=j}}),Object.defineProperty(Zn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Zn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Zn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Zn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Zn.prototype.join=function(j){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(fe).join(j)},Zn.prototype.multiply=function(j){var xe=j.sx*this.sx+j.shy*this.shx,et=j.sx*this.shy+j.shy*this.sy,ft=j.shx*this.sx+j.sy*this.shx,Pt=j.shx*this.shy+j.sy*this.sy,Ht=j.tx*this.sx+j.ty*this.shx+this.tx,dn=j.tx*this.shy+j.ty*this.sy+this.ty;return new Zn(xe,et,ft,Pt,Ht,dn)},Zn.prototype.decompose=function(){var j=this.sx,xe=this.shy,et=this.shx,ft=this.sy,Pt=this.tx,Ht=this.ty,dn=Math.sqrt(j*j+xe*xe),Nn=(j/=dn)*et+(xe/=dn)*ft;et-=j*Nn,ft-=xe*Nn;var Rn=Math.sqrt(et*et+ft*ft);return Nn/=Rn,j*(ft/=Rn)<xe*(et/=Rn)&&(j=-j,xe=-xe,Nn=-Nn,dn=-dn),{scale:new Zn(dn,0,0,Rn,0,0),translate:new Zn(1,0,0,1,Pt,Ht),rotate:new Zn(j,xe,-xe,j,0,0),skew:new Zn(1,0,Nn,1,0,0)}},Zn.prototype.toString=function(j){return this.join(" ")},Zn.prototype.inversed=function(){var j=this.sx,xe=this.shy,et=this.shx,ft=this.sy,Pt=this.tx,Ht=this.ty,dn=1/(j*ft-xe*et),Nn=ft*dn,Rn=-xe*dn,rr=-et*dn,gr=j*dn;return new Zn(Nn,Rn,rr,gr,-Nn*Pt-rr*Ht,-Rn*Pt-gr*Ht)},Zn.prototype.applyToPoint=function(j){var xe=j.x*this.sx+j.y*this.shx+this.tx,et=j.x*this.shy+j.y*this.sy+this.ty;return new As(xe,et)},Zn.prototype.applyToRectangle=function(j){var xe=this.applyToPoint(j),et=this.applyToPoint(new As(j.x+j.w,j.y+j.h));return new sa(xe.x,xe.y,et.x-xe.x,et.y-xe.y)},Zn.prototype.clone=function(){var j=this.sx,xe=this.shy,et=this.shx,ft=this.sy,Pt=this.tx,Ht=this.ty;return new Zn(j,xe,et,ft,Pt,Ht)},m.Matrix=Zn;var bt=m.matrixMult=function(j,xe){return xe.multiply(j)},rt=new Zn(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=rt;var Vt=function(j,xe){if(!an[j]){var et=(xe instanceof of?"Sh":"P")+(Object.keys(Sn).length+1).toString(10);xe.id=et,an[j]=et,Sn[et]=xe,kr.publish("addPattern",xe)}};m.ShadingPattern=of,m.TilingPattern=fp,m.addShadingPattern=function(j,xe){return N("addShadingPattern()"),Vt(j,xe),this},m.beginTilingPattern=function(j){N("beginTilingPattern()"),oa(j.boundingBox[0],j.boundingBox[1],j.boundingBox[2]-j.boundingBox[0],j.boundingBox[3]-j.boundingBox[1],j.matrix)},m.endTilingPattern=function(j,xe){N("endTilingPattern()"),xe.stream=be[Ce].join(`
`),Vt(j,xe),kr.publish("endTilingPattern",xe),Ps.pop().restore()};var Ln=m.__private__.newObject=function(){var j=Kt();return rn(j,!0),j},Kt=m.__private__.newObjectDeferred=function(){return ee++,pe[ee]=function(){return ae},ee},rn=function(j,xe){return xe=typeof xe=="boolean"&&xe,pe[j]=ae,xe&&Z(j+" 0 obj"),j},Zt=m.__private__.newAdditionalObject=function(){var j={objId:Kt(),content:""};return De.push(j),j},qn=Kt(),St=Kt(),gn=m.__private__.decodeColorString=function(j){var xe=j.split(" ");if(xe.length!==2||xe[1]!=="g"&&xe[1]!=="G")xe.length===5&&(xe[4]==="k"||xe[4]==="K")&&(xe=[(1-xe[0])*(1-xe[3]),(1-xe[1])*(1-xe[3]),(1-xe[2])*(1-xe[3]),"r"]);else{var et=parseFloat(xe[0]);xe=[et,et,et,"r"]}for(var ft="#",Pt=0;Pt<3;Pt++)ft+=("0"+Math.floor(255*parseFloat(xe[Pt])).toString(16)).slice(-2);return ft},nr=m.__private__.encodeColorString=function(j){var xe;typeof j=="string"&&(j={ch1:j});var et=j.ch1,ft=j.ch2,Pt=j.ch3,Ht=j.ch4,dn=j.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof et=="string"&&et.charAt(0)!=="#"){var Nn=new tM(et);if(Nn.ok)et=Nn.toHex();else if(!/^\d*\.?\d*$/.test(et))throw new Error('Invalid color "'+et+'" passed to jsPDF.encodeColorString.')}if(typeof et=="string"&&/^#[0-9A-Fa-f]{3}$/.test(et)&&(et="#"+et[1]+et[1]+et[2]+et[2]+et[3]+et[3]),typeof et=="string"&&/^#[0-9A-Fa-f]{6}$/.test(et)){var Rn=parseInt(et.substr(1),16);et=Rn>>16&255,ft=Rn>>8&255,Pt=255&Rn}if(ft===void 0||Ht===void 0&&et===ft&&ft===Pt)if(typeof et=="string")xe=et+" "+dn[0];else switch(j.precision){case 2:xe=J(et/255)+" "+dn[0];break;case 3:default:xe=U(et/255)+" "+dn[0]}else if(Ht===void 0||Yi(Ht)==="object"){if(Ht&&!isNaN(Ht.a)&&Ht.a===0)return xe=["1.","1.","1.",dn[1]].join(" ");if(typeof et=="string")xe=[et,ft,Pt,dn[1]].join(" ");else switch(j.precision){case 2:xe=[J(et/255),J(ft/255),J(Pt/255),dn[1]].join(" ");break;default:case 3:xe=[U(et/255),U(ft/255),U(Pt/255),dn[1]].join(" ")}}else if(typeof et=="string")xe=[et,ft,Pt,Ht,dn[2]].join(" ");else switch(j.precision){case 2:xe=[J(et),J(ft),J(Pt),J(Ht),dn[2]].join(" ");break;case 3:default:xe=[U(et),U(ft),U(Pt),U(Ht),dn[2]].join(" ")}return xe},Vn=m.__private__.getFilters=function(){return o},dr=m.__private__.putStream=function(j){var xe=(j=j||{}).data||"",et=j.filters||Vn(),ft=j.alreadyAppliedFilters||[],Pt=j.addLength1||!1,Ht=xe.length,dn=j.objectId,Nn=function(ts){return ts};if(h!==null&&dn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Nn=_s.encryptor(dn,0));var Rn={};et===!0&&(et=["FlateEncode"]);var rr=j.additionalKeyValues||[],gr=(Rn=Mr.API.processDataByFilters!==void 0?Mr.API.processDataByFilters(xe,et):{data:xe,reverseChain:[]}).reverseChain+(Array.isArray(ft)?ft.join(" "):ft.toString());if(Rn.data.length!==0&&(rr.push({key:"Length",value:Rn.data.length}),Pt===!0&&rr.push({key:"Length1",value:Ht})),gr.length!=0)if(gr.split("/").length-1==1)rr.push({key:"Filter",value:gr});else{rr.push({key:"Filter",value:"["+gr+"]"});for(var Nr=0;Nr<rr.length;Nr+=1)if(rr[Nr].key==="DecodeParms"){for(var Ti=[],ri=0;ri<Rn.reverseChain.split("/").length-1;ri+=1)Ti.push("null");Ti.push(rr[Nr].value),rr[Nr].value="["+Ti.join(" ")+"]"}}Z("<<");for(var di=0;di<rr.length;di++)Z("/"+rr[di].key+" "+rr[di].value);Z(">>"),Rn.data.length!==0&&(Z("stream"),Z(Nn(Rn.data)),Z("endstream"))},Cn=m.__private__.putPage=function(j){var xe=j.number,et=j.data,ft=j.objId,Pt=j.contentsObjId;rn(ft,!0),Z("<</Type /Page"),Z("/Parent "+j.rootDictionaryObjId+" 0 R"),Z("/Resources "+j.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(fe(j.mediaBox.bottomLeftX))+" "+parseFloat(fe(j.mediaBox.bottomLeftY))+" "+fe(j.mediaBox.topRightX)+" "+fe(j.mediaBox.topRightY)+"]"),j.cropBox!==null&&Z("/CropBox ["+fe(j.cropBox.bottomLeftX)+" "+fe(j.cropBox.bottomLeftY)+" "+fe(j.cropBox.topRightX)+" "+fe(j.cropBox.topRightY)+"]"),j.bleedBox!==null&&Z("/BleedBox ["+fe(j.bleedBox.bottomLeftX)+" "+fe(j.bleedBox.bottomLeftY)+" "+fe(j.bleedBox.topRightX)+" "+fe(j.bleedBox.topRightY)+"]"),j.trimBox!==null&&Z("/TrimBox ["+fe(j.trimBox.bottomLeftX)+" "+fe(j.trimBox.bottomLeftY)+" "+fe(j.trimBox.topRightX)+" "+fe(j.trimBox.topRightY)+"]"),j.artBox!==null&&Z("/ArtBox ["+fe(j.artBox.bottomLeftX)+" "+fe(j.artBox.bottomLeftY)+" "+fe(j.artBox.topRightX)+" "+fe(j.artBox.topRightY)+"]"),typeof j.userUnit=="number"&&j.userUnit!==1&&Z("/UserUnit "+j.userUnit),kr.publish("putPage",{objId:ft,pageContext:zn[xe],pageNumber:xe,page:et}),Z("/Contents "+Pt+" 0 R"),Z(">>"),Z("endobj");var Ht=et.join(`
`);return R===D.ADVANCED&&(Ht+=`
Q`),rn(Pt,!0),dr({data:Ht,filters:Vn(),objectId:Pt}),Z("endobj"),ft},fn=m.__private__.putPages=function(){var j,xe,et=[];for(j=1;j<=mr;j++)zn[j].objId=Kt(),zn[j].contentsObjId=Kt();for(j=1;j<=mr;j++)et.push(Cn({number:j,data:be[j],objId:zn[j].objId,contentsObjId:zn[j].contentsObjId,mediaBox:zn[j].mediaBox,cropBox:zn[j].cropBox,bleedBox:zn[j].bleedBox,trimBox:zn[j].trimBox,artBox:zn[j].artBox,userUnit:zn[j].userUnit,rootDictionaryObjId:qn,resourceDictionaryObjId:St}));rn(qn,!0),Z("<</Type /Pages");var ft="/Kids [";for(xe=0;xe<mr;xe++)ft+=et[xe]+" 0 R ";Z(ft+"]"),Z("/Count "+mr),Z(">>"),Z("endobj"),kr.publish("postPutPages")},li=function(j){kr.publish("putFont",{font:j,out:Z,newObject:Ln,putStream:dr}),j.isAlreadyPutted!==!0&&(j.objectNumber=Ln(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+cp(j.postScriptName)),Z("/Subtype /Type1"),typeof j.encoding=="string"&&Z("/Encoding /"+j.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},Ci=function(){for(var j in xn)xn.hasOwnProperty(j)&&(p===!1||p===!0&&v.hasOwnProperty(j))&&li(xn[j])},Si=function(j){j.objectNumber=Ln();var xe=[];xe.push({key:"Type",value:"/XObject"}),xe.push({key:"Subtype",value:"/Form"}),xe.push({key:"BBox",value:"["+[fe(j.x),fe(j.y),fe(j.x+j.width),fe(j.y+j.height)].join(" ")+"]"}),xe.push({key:"Matrix",value:"["+j.matrix.toString()+"]"});var et=j.pages[1].join(`
`);dr({data:et,additionalKeyValues:xe,objectId:j.objectNumber}),Z("endobj")},Or=function(){for(var j in Ni)Ni.hasOwnProperty(j)&&Si(Ni[j])},fr=function(j,xe){var et,ft=[],Pt=1/(xe-1);for(et=0;et<1;et+=Pt)ft.push(et);if(ft.push(1),j[0].offset!=0){var Ht={offset:0,color:j[0].color};j.unshift(Ht)}if(j[j.length-1].offset!=1){var dn={offset:1,color:j[j.length-1].color};j.push(dn)}for(var Nn="",Rn=0,rr=0;rr<ft.length;rr++){for(et=ft[rr];et>j[Rn+1].offset;)Rn++;var gr=j[Rn].offset,Nr=(et-gr)/(j[Rn+1].offset-gr),Ti=j[Rn].color,ri=j[Rn+1].color;Nn+=H(Math.round((1-Nr)*Ti[0]+Nr*ri[0]).toString(16))+H(Math.round((1-Nr)*Ti[1]+Nr*ri[1]).toString(16))+H(Math.round((1-Nr)*Ti[2]+Nr*ri[2]).toString(16))}return Nn.trim()},ls=function(j,xe){xe||(xe=21);var et=Ln(),ft=fr(j.colors,xe),Pt=[];Pt.push({key:"FunctionType",value:"0"}),Pt.push({key:"Domain",value:"[0.0 1.0]"}),Pt.push({key:"Size",value:"["+xe+"]"}),Pt.push({key:"BitsPerSample",value:"8"}),Pt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dr({data:ft,additionalKeyValues:Pt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:et}),Z("endobj"),j.objectNumber=Ln(),Z("<< /ShadingType "+j.type),Z("/ColorSpace /DeviceRGB");var Ht="/Coords ["+fe(parseFloat(j.coords[0]))+" "+fe(parseFloat(j.coords[1]))+" ";j.type===2?Ht+=fe(parseFloat(j.coords[2]))+" "+fe(parseFloat(j.coords[3])):Ht+=fe(parseFloat(j.coords[2]))+" "+fe(parseFloat(j.coords[3]))+" "+fe(parseFloat(j.coords[4]))+" "+fe(parseFloat(j.coords[5])),Z(Ht+="]"),j.matrix&&Z("/Matrix ["+j.matrix.toString()+"]"),Z("/Function "+et+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},us=function(j,xe){var et=Kt(),ft=Ln();xe.push({resourcesOid:et,objectOid:ft}),j.objectNumber=ft;var Pt=[];Pt.push({key:"Type",value:"/Pattern"}),Pt.push({key:"PatternType",value:"1"}),Pt.push({key:"PaintType",value:"1"}),Pt.push({key:"TilingType",value:"1"}),Pt.push({key:"BBox",value:"["+j.boundingBox.map(fe).join(" ")+"]"}),Pt.push({key:"XStep",value:fe(j.xStep)}),Pt.push({key:"YStep",value:fe(j.yStep)}),Pt.push({key:"Resources",value:et+" 0 R"}),j.matrix&&Pt.push({key:"Matrix",value:"["+j.matrix.toString()+"]"}),dr({data:j.stream,additionalKeyValues:Pt,objectId:j.objectNumber}),Z("endobj")},Ai=function(j){var xe;for(xe in Sn)Sn.hasOwnProperty(xe)&&(Sn[xe]instanceof of?ls(Sn[xe]):Sn[xe]instanceof fp&&us(Sn[xe],j))},ks=function(j){for(var xe in j.objectNumber=Ln(),Z("<<"),j)switch(xe){case"opacity":Z("/ca "+J(j[xe]));break;case"stroke-opacity":Z("/CA "+J(j[xe]))}Z(">>"),Z("endobj")},bs=function(){var j;for(j in mn)mn.hasOwnProperty(j)&&ks(mn[j])},Ki=function(){for(var j in Z("/XObject <<"),Ni)Ni.hasOwnProperty(j)&&Ni[j].objectNumber>=0&&Z("/"+j+" "+Ni[j].objectNumber+" 0 R");kr.publish("putXobjectDict"),Z(">>")},zs=function(){_s.oid=Ln(),Z("<<"),Z("/Filter /Standard"),Z("/V "+_s.v),Z("/R "+_s.r),Z("/U <"+_s.toHexString(_s.U)+">"),Z("/O <"+_s.toHexString(_s.O)+">"),Z("/P "+_s.P),Z(">>"),Z("endobj")},Io=function(){for(var j in Z("/Font <<"),xn)xn.hasOwnProperty(j)&&(p===!1||p===!0&&v.hasOwnProperty(j))&&Z("/"+j+" "+xn[j].objectNumber+" 0 R");Z(">>")},cs=function(){if(Object.keys(Sn).length>0){for(var j in Z("/Shading <<"),Sn)Sn.hasOwnProperty(j)&&Sn[j]instanceof of&&Sn[j].objectNumber>=0&&Z("/"+j+" "+Sn[j].objectNumber+" 0 R");kr.publish("putShadingPatternDict"),Z(">>")}},br=function(j){if(Object.keys(Sn).length>0){for(var xe in Z("/Pattern <<"),Sn)Sn.hasOwnProperty(xe)&&Sn[xe]instanceof m.TilingPattern&&Sn[xe].objectNumber>=0&&Sn[xe].objectNumber<j&&Z("/"+xe+" "+Sn[xe].objectNumber+" 0 R");kr.publish("putTilingPatternDict"),Z(">>")}},Tr=function(){if(Object.keys(mn).length>0){var j;for(j in Z("/ExtGState <<"),mn)mn.hasOwnProperty(j)&&mn[j].objectNumber>=0&&Z("/"+j+" "+mn[j].objectNumber+" 0 R");kr.publish("putGStateDict"),Z(">>")}},pr=function(j){rn(j.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Io(),cs(),br(j.objectOid),Tr(),Ki(),Z(">>"),Z("endobj")},ea=function(){var j=[];Ci(),bs(),Or(),Ai(j),kr.publish("putResources"),j.forEach(pr),pr({resourcesOid:St,objectOid:Number.MAX_SAFE_INTEGER}),kr.publish("postPutResources")},lr=function(){kr.publish("putAdditionalObjects");for(var j=0;j<De.length;j++){var xe=De[j];rn(xe.objId,!0),Z(xe.content),Z("endobj")}kr.publish("postPutAdditionalObjects")},Ei=function(j){En[j.fontName]=En[j.fontName]||{},En[j.fontName][j.fontStyle]=j.id},Zi=function(j,xe,et,ft,Pt){var Ht={id:"F"+(Object.keys(xn).length+1).toString(10),postScriptName:j,fontName:xe,fontStyle:et,encoding:ft,isStandardFont:Pt||!1,metadata:{}};return kr.publish("addFont",{font:Ht,instance:this}),xn[Ht.id]=Ht,Ei(Ht),Ht.id},ur=function(j){for(var xe=0,et=Ke.length;xe<et;xe++){var ft=Zi.call(this,j[xe][0],j[xe][1],j[xe][2],Ke[xe][3],!0);p===!1&&(v[ft]=!0);var Pt=j[xe][0].split("-");Ei({id:ft,fontName:Pt[0],fontStyle:Pt[1]||""})}kr.publish("addFonts",{fonts:xn,dictionary:En})},ei=function(j){return j.foo=function(){try{return j.apply(this,arguments)}catch(ft){var xe=ft.stack||"";~xe.indexOf(" at ")&&(xe=xe.split(" at ")[1]);var et="Error in function "+xe.split(`
`)[0].split("<")[0]+": "+ft.message;if(!Pr.console)throw new Error(et);Pr.console.error(et,ft),Pr.alert&&alert(et)}},j.foo.bar=j,j.foo},ol=function(j,xe){var et,ft,Pt,Ht,dn,Nn,Rn,rr,gr;if(Pt=(xe=xe||{}).sourceEncoding||"Unicode",dn=xe.outputEncoding,(xe.autoencode||dn)&&xn[ot].metadata&&xn[ot].metadata[Pt]&&xn[ot].metadata[Pt].encoding&&(Ht=xn[ot].metadata[Pt].encoding,!dn&&xn[ot].encoding&&(dn=xn[ot].encoding),!dn&&Ht.codePages&&(dn=Ht.codePages[0]),typeof dn=="string"&&(dn=Ht[dn]),dn)){for(Rn=!1,Nn=[],et=0,ft=j.length;et<ft;et++)(rr=dn[j.charCodeAt(et)])?Nn.push(String.fromCharCode(rr)):Nn.push(j[et]),Nn[et].charCodeAt(0)>>8&&(Rn=!0);j=Nn.join("")}for(et=j.length;Rn===void 0&&et!==0;)j.charCodeAt(et-1)>>8&&(Rn=!0),et--;if(!Rn)return j;for(Nn=xe.noBOM?[]:[254,255],et=0,ft=j.length;et<ft;et++){if((gr=(rr=j.charCodeAt(et))>>8)>>8)throw new Error("Character at position "+et+" of string '"+j+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nn.push(gr),Nn.push(rr-(gr<<8))}return String.fromCharCode.apply(void 0,Nn)},$s=m.__private__.pdfEscape=m.pdfEscape=function(j,xe){return ol(j,xe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Us=m.__private__.beginPage=function(j){be[++mr]=[],zn[mr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(j[0]),topRightY:Number(j[1])}},Da(mr),oe(be[Ce])},Xu=function(j,xe){var et,ft,Pt;switch(t=xe||t,typeof j=="string"&&(et=A(j.toLowerCase()),Array.isArray(et)&&(ft=et[0],Pt=et[1])),Array.isArray(j)&&(ft=j[0]*it,Pt=j[1]*it),isNaN(ft)&&(ft=i[0],Pt=i[1]),(ft>14400||Pt>14400)&&(ss.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ft=Math.min(14400,ft),Pt=Math.min(14400,Pt)),i=[ft,Pt],t.substr(0,1)){case"l":Pt>ft&&(i=[Pt,ft]);break;case"p":ft>Pt&&(i=[Pt,ft])}Us(i),ou(Pu),Z(Ii),uu!==0&&Z(uu+" J"),ui!==0&&Z(ui+" j"),kr.publish("addPage",{pageNumber:mr})},El=function(j){j>0&&j<=mr&&(be.splice(j,1),zn.splice(j,1),mr--,Ce>mr&&(Ce=mr),this.setPage(Ce))},Da=function(j){j>0&&j<=mr&&(Ce=j)},Hi=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return be.length-1},ta=function(j,xe,et){var ft,Pt=void 0;return et=et||{},j=j!==void 0?j:xn[ot].fontName,xe=xe!==void 0?xe:xn[ot].fontStyle,ft=j.toLowerCase(),En[ft]!==void 0&&En[ft][xe]!==void 0?Pt=En[ft][xe]:En[j]!==void 0&&En[j][xe]!==void 0?Pt=En[j][xe]:et.disableWarning===!1&&ss.warn("Unable to look up font label for font '"+j+"', '"+xe+"'. Refer to getFontList() for available fonts."),Pt||et.noFallback||(Pt=En.times[xe])==null&&(Pt=En.times.normal),Pt},al=m.__private__.putInfo=function(){var j=Ln(),xe=function(ft){return ft};for(var et in h!==null&&(xe=_s.encryptor(j,0)),Z("<<"),Z("/Producer ("+$s(xe("jsPDF "+Mr.version))+")"),Qe)Qe.hasOwnProperty(et)&&Qe[et]&&Z("/"+et.substr(0,1).toUpperCase()+et.substr(1)+" ("+$s(xe(Qe[et]))+")");Z("/CreationDate ("+$s(xe(F))+")"),Z(">>"),Z("endobj")},Bo=m.__private__.putCatalog=function(j){var xe=(j=j||{}).rootDictionaryObjId||qn;switch(Ln(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+xe+" 0 R"),he||(he="fullwidth"),he){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var et=""+he;et.substr(et.length-1)==="%"&&(he=parseInt(he)/100),typeof he=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+J(he)+"]")}switch(Xe||(Xe="continuous"),Xe){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}ut&&Z("/PageMode /"+ut),kr.publish("putCatalog"),Z(">>"),Z("endobj")},Eu=m.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(ee+1)),Z("/Root "+ee+" 0 R"),Z("/Info "+(ee-1)+" 0 R"),h!==null&&Z("/Encrypt "+_s.oid+" 0 R"),Z("/ID [ <"+I+"> <"+I+"> ]"),Z(">>")},ll=m.__private__.putHeader=function(){Z("%PDF-"+C),Z("%ºß¬à")},Ju=m.__private__.putXRef=function(){var j="0000000000";Z("xref"),Z("0 "+(ee+1)),Z("0000000000 65535 f ");for(var xe=1;xe<=ee;xe++)typeof pe[xe]=="function"?Z((j+pe[xe]()).slice(-10)+" 00000 n "):pe[xe]!==void 0?Z((j+pe[xe]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},na=m.__private__.buildDocument=function(){me(),oe(re),kr.publish("buildDocument"),ll(),fn(),lr(),ea(),h!==null&&zs(),al(),Bo();var j=ae;return Ju(),Eu(),Z("startxref"),Z(""+j),Z("%%EOF"),oe(be[Ce]),re.join(`
`)},Oa=m.__private__.getBlob=function(j){return new Blob([je(j)],{type:"application/pdf"})},ul=m.output=m.__private__.output=ei(function(j,xe){switch(typeof(xe=xe||{})=="string"?xe={filename:xe}:xe.filename=xe.filename||"generated.pdf",j){case void 0:return na();case"save":m.save(xe.filename);break;case"arraybuffer":return je(na());case"blob":return Oa(na());case"bloburi":case"bloburl":if(Pr.URL!==void 0&&typeof Pr.URL.createObjectURL=="function")return Pr.URL&&Pr.URL.createObjectURL(Oa(na()))||void 0;ss.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var et="",ft=na();try{et=T2(ft)}catch{et=T2(unescape(encodeURIComponent(ft)))}return"data:application/pdf;filename="+xe.filename+";base64,"+et;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pr)==="[object Window]"){var Pt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ht=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';xe.pdfObjectUrl&&(Pt=xe.pdfObjectUrl,Ht="");var dn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pt+'"'+Ht+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(xe)+");<\/script></body></html>",Nn=Pr.open();return Nn!==null&&Nn.document.write(dn),Nn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pr)==="[object Window]"){var Rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(xe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+xe.filename+'" width="500px" height="400px" /></body></html>',rr=Pr.open();if(rr!==null){rr.document.write(Rn);var gr=this;rr.document.documentElement.querySelector("#pdfViewer").onload=function(){rr.document.title=xe.filename,rr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(gr.output("bloburl"))}}return rr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Nr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",xe)+'"></iframe></body></html>',Ti=Pr.open();if(Ti!==null&&(Ti.document.write(Nr),Ti.document.title=xe.filename),Ti||typeof safari>"u")return Ti;break;case"datauri":case"dataurl":return Pr.document.location.href=this.output("datauristring",xe);default:return null}}),ru=function(j){return Array.isArray(as)===!0&&as.indexOf(j)>-1};switch(r){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=ru("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);it=r}var _s=null;He(),K();var Tc=function(j){return h!==null?_s.encryptor(j,0):function(xe){return xe}},Mu=m.__private__.getPageInfo=m.getPageInfo=function(j){if(isNaN(j)||j%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:zn[j].objId,pageNumber:j,pageContext:zn[j]}},vr=m.__private__.getPageInfoByObjId=function(j){if(isNaN(j)||j%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var xe in zn)if(zn[xe].objId===j)break;return Mu(xe)},xr=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:zn[Ce].objId,pageNumber:Ce,pageContext:zn[Ce]}};m.addPage=function(){return Xu.apply(this,arguments),this},m.setPage=function(){return Da.apply(this,arguments),oe.call(this,be[Ce]),this},m.insertPage=function(j){return this.addPage(),this.movePage(Ce,j),this},m.movePage=function(j,xe){var et,ft;if(j>xe){et=be[j],ft=zn[j];for(var Pt=j;Pt>xe;Pt--)be[Pt]=be[Pt-1],zn[Pt]=zn[Pt-1];be[xe]=et,zn[xe]=ft,this.setPage(xe)}else if(j<xe){et=be[j],ft=zn[j];for(var Ht=j;Ht<xe;Ht++)be[Ht]=be[Ht+1],zn[Ht]=zn[Ht+1];be[xe]=et,zn[xe]=ft,this.setPage(xe)}return this},m.deletePage=function(){return El.apply(this,arguments),this},m.__private__.text=m.text=function(j,xe,et,ft,Pt){var Ht,dn,Nn,Rn,rr,gr,Nr,Ti,ri,di=(ft=ft||{}).scope||this;if(typeof j=="number"&&typeof xe=="number"&&(typeof et=="string"||Array.isArray(et))){var ts=et;et=xe,xe=j,j=ts}if(arguments[3]instanceof Zn?(N("The transform parameter of text() with a Matrix value"),ri=Pt):(Nn=arguments[4],Rn=arguments[5],Yi(Nr=arguments[3])==="object"&&Nr!==null||(typeof Nn=="string"&&(Rn=Nn,Nn=null),typeof Nr=="string"&&(Rn=Nr,Nr=null),typeof Nr=="number"&&(Nn=Nr,Nr=null),ft={flags:Nr,angle:Nn,align:Rn})),isNaN(xe)||isNaN(et)||j==null)throw new Error("Invalid arguments passed to jsPDF.text");if(j.length===0)return di;var ds="",Fo=!1,Ir=typeof ft.lineHeightFactor=="number"?ft.lineHeightFactor:su,Vs=di.internal.scaleFactor;function Ol(fi){return fi=fi.split("	").join(Array(ft.TabLen||9).join(" ")),$s(fi,Nr)}function so(fi){for(var vi,ns=fi.concat(),Mi=[],$o=ns.length;$o--;)typeof(vi=ns.shift())=="string"?Mi.push(vi):Array.isArray(fi)&&(vi.length===1||vi[1]===void 0&&vi[2]===void 0)?Mi.push(vi[0]):Mi.push([vi[0],vi[1],vi[2]]);return Mi}function Tu(fi,vi){var ns;if(typeof fi=="string")ns=vi(fi)[0];else if(Array.isArray(fi)){for(var Mi,$o,wo=fi.concat(),Wo=[],nc=wo.length;nc--;)typeof(Mi=wo.shift())=="string"?Wo.push(vi(Mi)[0]):Array.isArray(Mi)&&typeof Mi[0]=="string"&&($o=vi(Mi[0],Mi[1],Mi[2]),Wo.push([$o[0],$o[1],$o[2]]));ns=Wo}return ns}var ya=!1,tc=!0;if(typeof j=="string")ya=!0;else if(Array.isArray(j)){var hl=j.concat();dn=[];for(var fl,hs=hl.length;hs--;)(typeof(fl=hl.shift())!="string"||Array.isArray(fl)&&typeof fl[0]!="string")&&(tc=!1);ya=tc}if(ya===!1)throw new Error('Type of text must be string or Array. "'+j+'" is not recognized.');typeof j=="string"&&(j=j.match(/[\r?\n]/)?j.split(/\r\n|\r|\n/g):[j]);var ba=Me/di.internal.scaleFactor,jo=ba*(Ir-1);switch(ft.baseline){case"bottom":et-=jo;break;case"top":et+=ba-jo;break;case"hanging":et+=ba-2*jo;break;case"middle":et+=ba/2-jo}if((gr=ft.maxWidth||0)>0&&(typeof j=="string"?j=di.splitTextToSize(j,gr):Object.prototype.toString.call(j)==="[object Array]"&&(j=j.reduce(function(fi,vi){return fi.concat(di.splitTextToSize(vi,gr))},[]))),Ht={text:j,x:xe,y:et,options:ft,mutex:{pdfEscape:$s,activeFontKey:ot,fonts:xn,activeFontSize:Me}},kr.publish("preProcessText",Ht),j=Ht.text,Nn=(ft=Ht.options).angle,!(ri instanceof Zn)&&Nn&&typeof Nn=="number"){Nn*=Math.PI/180,ft.rotationDirection===0&&(Nn=-Nn),R===D.ADVANCED&&(Nn=-Nn);var _o=Math.cos(Nn),Nl=Math.sin(Nn);ri=new Zn(_o,Nl,-Nl,_o,0,0)}else Nn&&Nn instanceof Zn&&(ri=Nn);R!==D.ADVANCED||ri||(ri=rt),(rr=ft.charSpace||lu)!==void 0&&(ds+=fe(B(rr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ti=ft.horizontalScale)!==void 0&&(ds+=fe(100*Ti)+` Tz
`),ft.lang;var Hs=-1,oo=ft.renderingMode!==void 0?ft.renderingMode:ft.stroke,ao=di.internal.getCurrentPageInfo().pageContext;switch(oo){case 0:case!1:case"fill":Hs=0;break;case 1:case!0:case"stroke":Hs=1;break;case 2:case"fillThenStroke":Hs=2;break;case 3:case"invisible":Hs=3;break;case 4:case"fillAndAddForClipping":Hs=4;break;case 5:case"strokeAndAddPathForClipping":Hs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Hs=6;break;case 7:case"addToPathForClipping":Hs=7}var Nc=ao.usedRenderingMode!==void 0?ao.usedRenderingMode:-1;Hs!==-1?ds+=Hs+` Tr
`:Nc!==-1&&(ds+=`0 Tr
`),Hs!==-1&&(ao.usedRenderingMode=Hs),Rn=ft.align||"left";var ws,Ba=Me*Ir,Gs=di.internal.pageSize.getWidth(),Ws=xn[ot];rr=ft.charSpace||lu,gr=ft.maxWidth||0,Nr=Object.assign({autoencode:!0,noBOM:!0},ft.flags);var Ra=[],Fa=function(fi){return di.getStringUnitWidth(fi,{font:Ws,charSpace:rr,fontSize:Me,doKerning:!1})*Me/Vs};if(Object.prototype.toString.call(j)==="[object Array]"){var qs;dn=so(j),Rn!=="left"&&(ws=dn.map(Fa));var Ts,_a=0;if(Rn==="right"){xe-=ws[0],j=[],hs=dn.length;for(var zo=0;zo<hs;zo++)zo===0?(Ts=sr(xe),qs=Qi(et)):(Ts=B(_a-ws[zo]),qs=-Ba),j.push([dn[zo],Ts,qs]),_a=ws[zo]}else if(Rn==="center"){xe-=ws[0]/2,j=[],hs=dn.length;for(var Ys=0;Ys<hs;Ys++)Ys===0?(Ts=sr(xe),qs=Qi(et)):(Ts=B((_a-ws[Ys])/2),qs=-Ba),j.push([dn[Ys],Ts,qs]),_a=ws[Ys]}else if(Rn==="left"){j=[],hs=dn.length;for(var Lt=0;Lt<hs;Lt++)j.push(dn[Lt])}else if(Rn==="justify"&&Ws.encoding==="Identity-H"){j=[],hs=dn.length,gr=gr!==0?gr:Gs;for(var Xt=0,It=0;It<hs;It++)if(qs=It===0?Qi(et):-Ba,Ts=It===0?sr(xe):Xt,It<hs-1){var Tn=B((gr-ws[It])/(dn[It].split(" ").length-1)),Yn=dn[It].split(" ");j.push([Yn[0]+" ",Ts,qs]),Xt=0;for(var yr=1;yr<Yn.length;yr++){var Bi=(Fa(Yn[yr-1]+" "+Yn[yr])-Fa(Yn[yr]))*Vs+Tn;yr==Yn.length-1?j.push([Yn[yr],Bi,0]):j.push([Yn[yr]+" ",Bi,0]),Xt-=Bi}}else j.push([dn[It],Ts,qs]);j.push(["",Xt,0])}else{if(Rn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(j=[],hs=dn.length,gr=gr!==0?gr:Gs,It=0;It<hs;It++)qs=It===0?Qi(et):-Ba,Ts=It===0?sr(xe):0,It<hs-1?Ra.push(fe(B((gr-ws[It])/(dn[It].split(" ").length-1)))):Ra.push(0),j.push([dn[It],Ts,qs])}}var hi=typeof ft.R2L=="boolean"?ft.R2L:at;hi===!0&&(j=Tu(j,function(fi,vi,ns){return[fi.split("").reverse().join(""),vi,ns]})),Ht={text:j,x:xe,y:et,options:ft,mutex:{pdfEscape:$s,activeFontKey:ot,fonts:xn,activeFontSize:Me}},kr.publish("postProcessText",Ht),j=Ht.text,Fo=Ht.mutex.isHex||!1;var du=xn[ot].encoding;du!=="WinAnsiEncoding"&&du!=="StandardEncoding"||(j=Tu(j,function(fi,vi,ns){return[Ol(fi),vi,ns]})),dn=so(j),j=[];for(var lo,Ri,wa,ja=0,xa=1,La=Array.isArray(dn[0])?xa:ja,Ca="",Vr=function(fi,vi,ns){var Mi="";return ns instanceof Zn?(ns=typeof ft.angle=="number"?bt(ns,new Zn(1,0,0,1,fi,vi)):bt(new Zn(1,0,0,1,fi,vi),ns),R===D.ADVANCED&&(ns=bt(new Zn(1,0,0,-1,0,0),ns)),Mi=ns.join(" ")+` Tm
`):Mi=fe(fi)+" "+fe(vi)+` Td
`,Mi},aa=0;aa<dn.length;aa++){switch(Ca="",La){case xa:wa=(Fo?"<":"(")+dn[aa][0]+(Fo?">":")"),lo=parseFloat(dn[aa][1]),Ri=parseFloat(dn[aa][2]);break;case ja:wa=(Fo?"<":"(")+dn[aa]+(Fo?">":")"),lo=sr(xe),Ri=Qi(et)}Ra!==void 0&&Ra[aa]!==void 0&&(Ca=Ra[aa]+` Tw
`),aa===0?j.push(Ca+Vr(lo,Ri,ri)+wa):La===ja?j.push(Ca+wa):La===xa&&j.push(Ca+Vr(lo,Ri,ri)+wa)}j=La===ja?j.join(` Tj
T* `):j.join(` Tj
`),j+=` Tj
`;var Ds=`BT
/`;return Ds+=ot+" "+Me+` Tf
`,Ds+=fe(Me*Ir)+` TL
`,Ds+=va+`
`,Ds+=ds,Ds+=j,Z(Ds+="ET"),v[ot]=!0,di};var ra=m.__private__.clip=m.clip=function(j){return Z(j==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return ra("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Z("n"),this};var Xr=m.__private__.isValidStyle=function(j){var xe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(j)!==-1&&(xe=!0),xe};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(j){return Xr(j)&&(u=j),this};var Qu=m.__private__.getStyle=m.getStyle=function(j){var xe=u;switch(j){case"D":case"S":xe="S";break;case"F":xe="f";break;case"FD":case"DF":xe="B";break;case"f":case"f*":case"B":case"B*":xe=j}return xe},Ml=m.close=function(){return Z("h"),this};m.stroke=function(){return Z("S"),this},m.fill=function(j){return Pl("f",j),this},m.fillEvenOdd=function(j){return Pl("f*",j),this},m.fillStroke=function(j){return Pl("B",j),this},m.fillStrokeEvenOdd=function(j){return Pl("B*",j),this};var Pl=function(j,xe){Yi(xe)==="object"?ec(xe,j):Z(j)},ia=function(j){j===null||R===D.ADVANCED&&j===void 0||(j=Qu(j),Z(j))};function cl(j,xe,et,ft,Pt){var Ht=new fp(xe||this.boundingBox,et||this.xStep,ft||this.yStep,this.gState,Pt||this.matrix);Ht.stream=this.stream;var dn=j+"$$"+this.cloneIndex+++"$$";return Vt(dn,Ht),Ht}var ec=function(j,xe){var et=an[j.key],ft=Sn[et];if(ft instanceof of)Z("q"),Z(iu(xe)),ft.gState&&m.setGState(ft.gState),Z(j.matrix.toString()+" cm"),Z("/"+et+" sh"),Z("Q");else if(ft instanceof fp){var Pt=new Zn(1,0,0,-1,0,Ia());j.matrix&&(Pt=Pt.multiply(j.matrix||rt),et=cl.call(ft,j.key,j.boundingBox,j.xStep,j.yStep,Pt).id),Z("q"),Z("/Pattern cs"),Z("/"+et+" scn"),ft.gState&&m.setGState(ft.gState),Z(xe),Z("Q")}},iu=function(j){switch(j){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},_r=m.moveTo=function(j,xe){return Z(fe(B(j))+" "+fe($(xe))+" m"),this},Fr=m.lineTo=function(j,xe){return Z(fe(B(j))+" "+fe($(xe))+" l"),this},dl=m.curveTo=function(j,xe,et,ft,Pt,Ht){return Z([fe(B(j)),fe($(xe)),fe(B(et)),fe($(ft)),fe(B(Pt)),fe($(Ht)),"c"].join(" ")),this};m.__private__.line=m.line=function(j,xe,et,ft,Pt){if(isNaN(j)||isNaN(xe)||isNaN(et)||isNaN(ft)||!Xr(Pt))throw new Error("Invalid arguments passed to jsPDF.line");return R===D.COMPAT?this.lines([[et-j,ft-xe]],j,xe,[1,1],Pt||"S"):this.lines([[et-j,ft-xe]],j,xe,[1,1]).stroke()},m.__private__.lines=m.lines=function(j,xe,et,ft,Pt,Ht){var dn,Nn,Rn,rr,gr,Nr,Ti,ri,di,ts,ds,Fo;if(typeof j=="number"&&(Fo=et,et=xe,xe=j,j=Fo),ft=ft||[1,1],Ht=Ht||!1,isNaN(xe)||isNaN(et)||!Array.isArray(j)||!Array.isArray(ft)||!Xr(Pt)||typeof Ht!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_r(xe,et),dn=ft[0],Nn=ft[1],rr=j.length,ts=xe,ds=et,Rn=0;Rn<rr;Rn++)(gr=j[Rn]).length===2?(ts=gr[0]*dn+ts,ds=gr[1]*Nn+ds,Fr(ts,ds)):(Nr=gr[0]*dn+ts,Ti=gr[1]*Nn+ds,ri=gr[2]*dn+ts,di=gr[3]*Nn+ds,ts=gr[4]*dn+ts,ds=gr[5]*Nn+ds,dl(Nr,Ti,ri,di,ts,ds));return Ht&&Ml(),ia(Pt),this},m.path=function(j){for(var xe=0;xe<j.length;xe++){var et=j[xe],ft=et.c;switch(et.op){case"m":_r(ft[0],ft[1]);break;case"l":Fr(ft[0],ft[1]);break;case"c":dl.apply(this,ft);break;case"h":Ml()}}return this},m.__private__.rect=m.rect=function(j,xe,et,ft,Pt){if(isNaN(j)||isNaN(xe)||isNaN(et)||isNaN(ft)||!Xr(Pt))throw new Error("Invalid arguments passed to jsPDF.rect");return R===D.COMPAT&&(ft=-ft),Z([fe(B(j)),fe($(xe)),fe(B(et)),fe(B(ft)),"re"].join(" ")),ia(Pt),this},m.__private__.triangle=m.triangle=function(j,xe,et,ft,Pt,Ht,dn){if(isNaN(j)||isNaN(xe)||isNaN(et)||isNaN(ft)||isNaN(Pt)||isNaN(Ht)||!Xr(dn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[et-j,ft-xe],[Pt-et,Ht-ft],[j-Pt,xe-Ht]],j,xe,[1,1],dn,!0),this},m.__private__.roundedRect=m.roundedRect=function(j,xe,et,ft,Pt,Ht,dn){if(isNaN(j)||isNaN(xe)||isNaN(et)||isNaN(ft)||isNaN(Pt)||isNaN(Ht)||!Xr(dn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nn=4/3*(Math.SQRT2-1);return Pt=Math.min(Pt,.5*et),Ht=Math.min(Ht,.5*ft),this.lines([[et-2*Pt,0],[Pt*Nn,0,Pt,Ht-Ht*Nn,Pt,Ht],[0,ft-2*Ht],[0,Ht*Nn,-Pt*Nn,Ht,-Pt,Ht],[2*Pt-et,0],[-Pt*Nn,0,-Pt,-Ht*Nn,-Pt,-Ht],[0,2*Ht-ft],[0,-Ht*Nn,Pt*Nn,-Ht,Pt,-Ht]],j+Pt,xe,[1,1],dn,!0),this},m.__private__.ellipse=m.ellipse=function(j,xe,et,ft,Pt){if(isNaN(j)||isNaN(xe)||isNaN(et)||isNaN(ft)||!Xr(Pt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ht=4/3*(Math.SQRT2-1)*et,dn=4/3*(Math.SQRT2-1)*ft;return _r(j+et,xe),dl(j+et,xe-dn,j+Ht,xe-ft,j,xe-ft),dl(j-Ht,xe-ft,j-et,xe-dn,j-et,xe),dl(j-et,xe+dn,j-Ht,xe+ft,j,xe+ft),dl(j+Ht,xe+ft,j+et,xe+dn,j+et,xe),ia(Pt),this},m.__private__.circle=m.circle=function(j,xe,et,ft){if(isNaN(j)||isNaN(xe)||isNaN(et)||!Xr(ft))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(j,xe,et,et,ft)},m.setFont=function(j,xe,et){return et&&(xe=de(xe,et)),ot=ta(j,xe,{disableWarning:!1}),this};var Dc=m.__private__.getFont=m.getFont=function(){return xn[ta.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var j,xe,et={};for(j in En)if(En.hasOwnProperty(j))for(xe in et[j]=[],En[j])En[j].hasOwnProperty(xe)&&et[j].push(xe);return et},m.addFont=function(j,xe,et,ft,Pt){var Ht=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ht.indexOf(arguments[3])!==-1?Pt=arguments[3]:arguments[3]&&Ht.indexOf(arguments[3])==-1&&(et=de(et,ft)),Pt=Pt||"Identity-H",Zi.call(this,j,xe,et,Pt)};var su,Pu=n.lineWidth||.200025,kl=m.__private__.getLineWidth=m.getLineWidth=function(){return Pu},ou=m.__private__.setLineWidth=m.setLineWidth=function(j){return Pu=j,Z(fe(B(j))+" w"),this};m.__private__.setLineDash=Mr.API.setLineDash=Mr.API.setLineDashPattern=function(j,xe){if(j=j||[],xe=xe||0,isNaN(xe)||!Array.isArray(j))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return j=j.map(function(et){return fe(B(et))}).join(" "),xe=fe(B(xe)),Z("["+j+"] "+xe+" d"),this};var ku=m.__private__.getLineHeight=m.getLineHeight=function(){return Me*su};m.__private__.getLineHeight=m.getLineHeight=function(){return Me*su};var Ur=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(j){return typeof(j=j||1.15)=="number"&&(su=j),this},Ji=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return su};Ur(n.lineHeight);var sr=m.__private__.getHorizontalCoordinate=function(j){return B(j)},Qi=m.__private__.getVerticalCoordinate=function(j){return R===D.ADVANCED?j:zn[Ce].mediaBox.topRightY-zn[Ce].mediaBox.bottomLeftY-B(j)},Al=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(j){return fe(sr(j))},Na=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(j){return fe(Qi(j))},Ii=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return gn(Ii)},m.__private__.setStrokeColor=m.setDrawColor=function(j,xe,et,ft){return Ii=nr({ch1:j,ch2:xe,ch3:et,ch4:ft,pdfColorType:"draw",precision:2}),Z(Ii),this};var Au=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return gn(Au)},m.__private__.setFillColor=m.setFillColor=function(j,xe,et,ft){return Au=nr({ch1:j,ch2:xe,ch3:et,ch4:ft,pdfColorType:"fill",precision:2}),Z(Au),this};var va=n.textColor||"0 g",au=m.__private__.getTextColor=m.getTextColor=function(){return gn(va)};m.__private__.setTextColor=m.setTextColor=function(j,xe,et,ft){return va=nr({ch1:j,ch2:xe,ch3:et,ch4:ft,pdfColorType:"text",precision:3}),this};var lu=n.charSpace,Go=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(lu||0)};m.__private__.setCharSpace=m.setCharSpace=function(j){if(isNaN(j))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return lu=j,this};var uu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(j){var xe=m.CapJoinStyles[j];if(xe===void 0)throw new Error("Line cap style of '"+j+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return uu=xe,Z(xe+" J"),this};var ui=0;m.__private__.setLineJoin=m.setLineJoin=function(j){var xe=m.CapJoinStyles[j];if(xe===void 0)throw new Error("Line join style of '"+j+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ui=xe,Z(xe+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(j){if(j=j||0,isNaN(j))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(fe(B(j))+" M"),this},m.GState=Xv,m.setGState=function(j){(j=typeof j=="string"?mn[tr[j]]:Oc(null,j)).equals(ar)||(Z("/"+j.id+" gs"),ar=j)};var Oc=function(j,xe){if(!j||!tr[j]){var et=!1;for(var ft in mn)if(mn.hasOwnProperty(ft)&&mn[ft].equals(xe)){et=!0;break}if(et)xe=mn[ft];else{var Pt="GS"+(Object.keys(mn).length+1).toString(10);mn[Pt]=xe,xe.id=Pt}return j&&(tr[j]=xe.id),kr.publish("addGState",xe),xe}};m.addGState=function(j,xe){return Oc(j,xe),this},m.saveGraphicsState=function(){return Z("q"),$n.push({key:ot,size:Me,color:va}),this},m.restoreGraphicsState=function(){Z("Q");var j=$n.pop();return ot=j.key,Me=j.size,va=j.color,ar=null,this},m.setCurrentTransformationMatrix=function(j){return Z(j.toString()+" cm"),this},m.comment=function(j){return Z("#"+j),this};var As=function(j,xe){var et=j||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return et},set:function(Ht){isNaN(Ht)||(et=parseFloat(Ht))}});var ft=xe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ft},set:function(Ht){isNaN(Ht)||(ft=parseFloat(Ht))}});var Pt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pt},set:function(Ht){Pt=Ht.toString()}}),this},sa=function(j,xe,et,ft){As.call(this,j,xe),this.type="rect";var Pt=et||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pt},set:function(dn){isNaN(dn)||(Pt=parseFloat(dn))}});var Ht=ft||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ht},set:function(dn){isNaN(dn)||(Ht=parseFloat(dn))}}),this},cu=function(){this.page=mr,this.currentPage=Ce,this.pages=be.slice(0),this.pagesContext=zn.slice(0),this.x=At,this.y=Yt,this.matrix=bn,this.width=ci(Ce),this.height=Ia(Ce),this.outputDestination=le,this.id="",this.objectNumber=-1};cu.prototype.restore=function(){mr=this.page,Ce=this.currentPage,zn=this.pagesContext,be=this.pages,At=this.x,Yt=this.y,bn=this.matrix,Ro(Ce,this.width),es(Ce,this.height),le=this.outputDestination};var oa=function(j,xe,et,ft,Pt){Ps.push(new cu),mr=Ce=0,be=[],At=j,Yt=xe,bn=Pt,Us([et,ft])},Tl=function(j){if(io[j])Ps.pop().restore();else{var xe=new cu,et="Xo"+(Object.keys(Ni).length+1).toString(10);xe.id=et,io[j]=et,Ni[et]=xe,kr.publish("addFormObject",xe),Ps.pop().restore()}};for(var Dl in m.beginFormObject=function(j,xe,et,ft,Pt){return oa(j,xe,et,ft,Pt),this},m.endFormObject=function(j){return Tl(j),this},m.doFormObject=function(j,xe){var et=Ni[io[j]];return Z("q"),Z(xe.toString()+" cm"),Z("/"+et.id+" Do"),Z("Q"),this},m.getFormObject=function(j){var xe=Ni[io[j]];return{x:xe.x,y:xe.y,width:xe.width,height:xe.height,matrix:xe.matrix}},m.save=function(j,xe){return j=j||"generated.pdf",(xe=xe||{}).returnPromise=xe.returnPromise||!1,xe.returnPromise===!1?(ef(Oa(na()),j),typeof ef.unload=="function"&&Pr.setTimeout&&setTimeout(ef.unload,911),this):new Promise(function(et,ft){try{var Pt=ef(Oa(na()),j);typeof ef.unload=="function"&&Pr.setTimeout&&setTimeout(ef.unload,911),et(Pt)}catch(Ht){ft(Ht.message)}})},Mr.API)Mr.API.hasOwnProperty(Dl)&&(Dl==="events"&&Mr.API.events.length?function(j,xe){var et,ft,Pt;for(Pt=xe.length-1;Pt!==-1;Pt--)et=xe[Pt][0],ft=xe[Pt][1],j.subscribe.apply(j,[et].concat(typeof ft=="function"?[ft]:ft))}(kr,Mr.API.events):m[Dl]=Mr.API[Dl]);var ci=m.getPageWidth=function(j){return(zn[j=j||Ce].mediaBox.topRightX-zn[j].mediaBox.bottomLeftX)/it},Ro=m.setPageWidth=function(j,xe){zn[j].mediaBox.topRightX=xe*it+zn[j].mediaBox.bottomLeftX},Ia=m.getPageHeight=function(j){return(zn[j=j||Ce].mediaBox.topRightY-zn[j].mediaBox.bottomLeftY)/it},es=m.setPageHeight=function(j,xe){zn[j].mediaBox.topRightY=xe*it+zn[j].mediaBox.bottomLeftY};return m.internal={pdfEscape:$s,getStyle:Qu,getFont:Dc,getFontSize:We,getCharSpace:Go,getTextColor:au,getLineHeight:ku,getLineHeightFactor:Ji,getLineWidth:kl,write:Ae,getHorizontalCoordinate:sr,getVerticalCoordinate:Qi,getCoordinateString:Al,getVerticalCoordinateString:Na,collections:{},newObject:Ln,newAdditionalObject:Zt,newObjectDeferred:Kt,newObjectDeferredBegin:rn,getFilters:Vn,putStream:dr,events:kr,scaleFactor:it,pageSize:{getWidth:function(){return ci(Ce)},setWidth:function(j){Ro(Ce,j)},getHeight:function(){return Ia(Ce)},setHeight:function(j){es(Ce,j)}},encryptionOptions:h,encryption:_s,getEncryptor:Tc,output:ul,getNumberOfPages:Hi,pages:be,out:Z,f2:J,f3:U,getPageInfo:Mu,getPageInfoByObjId:vr,getCurrentPageInfo:xr,getPDFVersion:E,Point:As,Rectangle:sa,Matrix:Zn,hasHotfix:ru},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ci(Ce)},set:function(j){Ro(Ce,j)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ia(Ce)},set:function(j){es(Ce,j)},enumerable:!0,configurable:!0}),ur.call(m,Ke),ot="F1",Xu(i,t),kr.publish("initialized"),m}up.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},up.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},up.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},up.prototype.processOwnerPassword=function(n,e){return O2(D2(e).substr(0,5),n)},up.prototype.encryptor=function(n,e){var t=D2(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return O2(t,r)}},Xv.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Yi(n)!==Yi(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Mr.API={events:[]},Mr.version="2.5.2";var po=Mr.API,K_=1,Ef=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zf=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zr=function(n){return n.toFixed(2)},th=function(n){return n.toFixed(5)};po.__acroform__={};var nu=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},D5=function(n){return n*K_},Vc=function(n){var e=new sM,t=Kn.internal.getHeight(n)||0,r=Kn.internal.getWidth(n)||0;return e.BBox=[0,0,Number(zr(r)),Number(zr(t))],e},jH=po.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},zH=po.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},$H=po.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Po=po.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return $H(n,e-1)},ko=po.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return jH(n,e-1)},Ao=po.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zH(n,e-1)},UH=po.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=t(i+o)||0,l.upperRight_Y=r(s)||0,[Number(zr(l.lowerLeft_X)),Number(zr(l.lowerLeft_Y)),Number(zr(l.upperRight_X)),Number(zr(l.upperRight_Y))]},VH=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=N2(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+zr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Vc(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},N2=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(U){return U.split(`
`)}):i.map(function(U){return[U]});var s=t,o=Kn.internal.getHeight(n)||0;o=o<0?-o:o;var a=Kn.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(U,B,G){if(U+1<i.length){var $=B+" "+i[U+1][0];return E0($,n,G).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,h,p=E0("3",n,s).height,v=n.multiline?o-s:(o-p)/2,m=v+=2,C=0,E=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+E0(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var A="",D=0,R=0;R<i.length;R++)if(i.hasOwnProperty(R)){var W=!1;if(i[R].length!==1&&k!==i[R].length-1){if((p+2)*(D+2)+2>o)continue e;A+=i[R][k],W=!0,E=R,R--}else{A=(A+=i[R][k]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var Q=parseInt(R),de=l(Q,A,s),fe=R>=i.length-1;if(de&&!fe){A+=" ",k=0;continue}if(de||fe){if(fe)E=Q;else if(n.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!n.multiline||(p+2)*(D+2)+2>o)continue e;E=Q}}for(var N="",z=C;z<=E;z++){var J=i[z];if(n.multiline){if(z===E){N+=J[k]+" ",k=(k+1)%J.length;continue}if(z===C){N+=J[J.length-1]+" ";continue}}N+=J[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,h=E0(N,n,s).width,n.textAlign){case"right":u=a-h-2;break;case"center":u=(a-h)/2;break;case"left":default:u=2}e+=zr(u)+" "+zr(m)+` Td
`,e+="("+Ef(N)+`) Tj
`,e+=-zr(u)+` 0 Td
`,m=-(s+2),h=0,C=W?E:E+1,D++,A=""}break}return r.text=e,r.fontSize=s,r},E0=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},HH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},GH=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},WH=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Yi(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},qH=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(kc.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(HH)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");K_=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new oM,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&GH(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=UH(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Kn.createDefaultAppearanceStream(a),Yi(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=VH(a);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var m=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var C=m[o];typeof C=="function"&&(C=C.call(i,a)),p+="/"+o+" "+C+" ",i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C)}}else typeof(C=m)=="function"&&(C=C.call(i,a)),p+="/"+o+" "+C,i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&WH(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},iM=po.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),Yi(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Ef(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},cb=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Ef(r(n))+")"},Qc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Qc.prototype.toString=function(){return this.objId+" 0 R"},Qc.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Qc.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:iM(i,this.objId,this.scope)}):i instanceof Qc?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var sM=function(){Qc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};nu(sM,Qc);var oM=function(){Qc.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ef(t(n))+")"}},set:function(t){n=t}})};nu(oM,Qc);var kc=function n(){Qc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Po(e,3)},set:function(A){A?this.F=ko(e,3):this.F=Ao(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');t=A}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(A){r=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(A){r[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(A){r[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(A){r[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(A){r[3]=A}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Jv)return;s="FieldObject"+n.FieldNum++}var A=function(D){return D};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Ef(A(s))+")"},set:function(A){s=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(A){s=A}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(A){o=A}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(A){a=A}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(A){l=A}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/K_:u},set:function(A){u=A}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(A){h=A}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Jv||this instanceof pf))return cb(p,this.objId,this.scope)},set:function(A){A=A.toString(),p=A}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof fa?v:cb(v,this.objId,this.scope)},set:function(A){A=A.toString(),v=this instanceof fa?A:A.substr(0,1)==="("?Zf(A.substr(1,A.length-2)):Zf(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof fa?Zf(v.substr(1,v.length-1)):v},set:function(A){A=A.toString(),v=this instanceof fa?"/"+A:A}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof fa?m:cb(m,this.objId,this.scope)},set:function(A){A=A.toString(),m=this instanceof fa?A:A.substr(0,1)==="("?Zf(A.substr(1,A.length-2)):Zf(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof fa?Zf(m.substr(1,m.length-1)):m},set:function(A){A=A.toString(),m=this instanceof fa?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(A){A=!!A,E=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(A){C=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,1)},set:function(A){A?this.Ff=ko(this.Ff,1):this.Ff=Ao(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,2)},set:function(A){A?this.Ff=ko(this.Ff,2):this.Ff=Ao(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,3)},set:function(A){A?this.Ff=ko(this.Ff,3):this.Ff=Ao(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');k=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(k){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};nu(kc,Qc);var wp=function(){kc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return iM(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,18)},set:function(t){t?this.Ff=ko(this.Ff,18):this.Ff=Ao(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ko(this.Ff,19):this.Ff=Ao(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,20)},set:function(t){t?(this.Ff=ko(this.Ff,20),e.sort()):this.Ff=Ao(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,22)},set:function(t){t?this.Ff=ko(this.Ff,22):this.Ff=Ao(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,23)},set:function(t){t?this.Ff=ko(this.Ff,23):this.Ff=Ao(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,27)},set:function(t){t?this.Ff=ko(this.Ff,27):this.Ff=Ao(this.Ff,27)}}),this.hasAppearanceStream=!1};nu(wp,kc);var xp=function(){wp.call(this),this.fontName="helvetica",this.combo=!1};nu(xp,wp);var Lp=function(){xp.call(this),this.combo=!0};nu(Lp,xp);var lv=function(){Lp.call(this),this.edit=!0};nu(lv,Lp);var fa=function(){kc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,15)},set:function(t){t?this.Ff=ko(this.Ff,15):this.Ff=Ao(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,16)},set:function(t){t?this.Ff=ko(this.Ff,16):this.Ff=Ao(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,17)},set:function(t){t?this.Ff=ko(this.Ff,17):this.Ff=Ao(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,26)},set:function(t){t?this.Ff=ko(this.Ff,26):this.Ff=Ao(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ef(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Yi(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};nu(fa,kc);var uv=function(){fa.call(this),this.pushButton=!0};nu(uv,fa);var Cp=function(){fa.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};nu(Cp,fa);var Jv=function(){var n,e;kc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Ef(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Yi(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Kn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};nu(Jv,kc),Cp.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Cp.prototype.createOption=function(n){var e=new Jv;return e.Parent=this,e.optionName=n,this.Kids.push(e),YH.call(this.scope,e),e};var cv=function(){fa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Kn.CheckBox.createAppearanceStream()};nu(cv,fa);var pf=function(){kc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,13)},set:function(e){e?this.Ff=ko(this.Ff,13):this.Ff=Ao(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,21)},set:function(e){e?this.Ff=ko(this.Ff,21):this.Ff=Ao(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,23)},set:function(e){e?this.Ff=ko(this.Ff,23):this.Ff=Ao(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,24)},set:function(e){e?this.Ff=ko(this.Ff,24):this.Ff=Ao(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,25)},set:function(e){e?this.Ff=ko(this.Ff,25):this.Ff=Ao(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,26)},set:function(e){e?this.Ff=ko(this.Ff,26):this.Ff=Ao(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};nu(pf,kc);var dv=function(){pf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Po(this.Ff,14)},set:function(n){n?this.Ff=ko(this.Ff,14):this.Ff=Ao(this.Ff,14)}}),this.password=!0};nu(dv,pf);var Kn={CheckBox:{createAppearanceStream:function(){return{N:{On:Kn.CheckBox.YesNormal},D:{On:Kn.CheckBox.YesPushDown,Off:Kn.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Vc(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=N2(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+zr(Kn.internal.getWidth(n))+" "+zr(Kn.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+zr(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Vc(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Kn.internal.getHeight(n),o=Kn.internal.getWidth(n),a=N2(n,n.caption);return i.push("1 g"),i.push("0 0 "+zr(o)+" "+zr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+zr(o-1)+" "+zr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+zr(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Vc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+zr(Kn.internal.getWidth(n))+" "+zr(Kn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Kn.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Kn.RadioButton.Circle.YesNormal,e.D[n]=Kn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Vc(n);e.scope=n.scope;var t=[],r=Kn.internal.getWidth(n)<=Kn.internal.getHeight(n)?Kn.internal.getWidth(n)/4:Kn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Kn.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+th(Kn.internal.getWidth(n)/2)+" "+th(Kn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Vc(n);e.scope=n.scope;var t=[],r=Kn.internal.getWidth(n)<=Kn.internal.getHeight(n)?Kn.internal.getWidth(n)/4:Kn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Kn.internal.Bezier_C).toFixed(5)),o=Number((r*Kn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+th(Kn.internal.getWidth(n)/2)+" "+th(Kn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+th(Kn.internal.getWidth(n)/2)+" "+th(Kn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Vc(n);e.scope=n.scope;var t=[],r=Kn.internal.getWidth(n)<=Kn.internal.getHeight(n)?Kn.internal.getWidth(n)/4:Kn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Kn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+th(Kn.internal.getWidth(n)/2)+" "+th(Kn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Kn.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Kn.RadioButton.Cross.YesNormal,e.D[n]=Kn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Vc(n);e.scope=n.scope;var t=[],r=Kn.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+zr(Kn.internal.getWidth(n)-2)+" "+zr(Kn.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(zr(r.x1.x)+" "+zr(r.x1.y)+" m"),t.push(zr(r.x2.x)+" "+zr(r.x2.y)+" l"),t.push(zr(r.x4.x)+" "+zr(r.x4.y)+" m"),t.push(zr(r.x3.x)+" "+zr(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Vc(n);e.scope=n.scope;var t=Kn.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+zr(Kn.internal.getWidth(n))+" "+zr(Kn.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+zr(Kn.internal.getWidth(n)-2)+" "+zr(Kn.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(zr(t.x1.x)+" "+zr(t.x1.y)+" m"),r.push(zr(t.x2.x)+" "+zr(t.x2.y)+" l"),r.push(zr(t.x4.x)+" "+zr(t.x4.y)+" m"),r.push(zr(t.x3.x)+" "+zr(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Vc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+zr(Kn.internal.getWidth(n))+" "+zr(Kn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Kn.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Kn.internal.getWidth(n),t=Kn.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Kn.internal.getWidth=function(n){var e=0;return Yi(n)==="object"&&(e=D5(n.Rect[2])),e},Kn.internal.getHeight=function(n){var e=0;return Yi(n)==="object"&&(e=D5(n.Rect[3])),e};var YH=po.addField=function(n){if(qH(this,n),!(n instanceof kc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};po.AcroFormChoiceField=wp,po.AcroFormListBox=xp,po.AcroFormComboBox=Lp,po.AcroFormEditBox=lv,po.AcroFormButton=fa,po.AcroFormPushButton=uv,po.AcroFormRadioButton=Cp,po.AcroFormCheckBox=cv,po.AcroFormTextField=pf,po.AcroFormPasswordField=dv,po.AcroFormAppearance=Kn,po.AcroForm={ChoiceField:wp,ListBox:xp,ComboBox:Lp,EditBox:lv,Button:fa,PushButton:uv,RadioButton:Cp,CheckBox:cv,TextField:pf,PasswordField:dv,Appearance:Kn},Mr.AcroForm={ChoiceField:wp,ListBox:xp,ComboBox:Lp,EditBox:lv,Button:fa,PushButton:uv,RadioButton:Cp,CheckBox:cv,TextField:pf,PasswordField:dv,Appearance:Kn};Mr.AcroForm;function aM(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(U,B){var G,$,F,I,X,K=e;if((B=B||e)==="RGBA"||U.data!==void 0&&U.data instanceof Uint8ClampedArray&&"height"in U&&"width"in U)return"RGBA";if(de(U))for(X in t)for(F=t[X],G=0;G<F.length;G+=1){for(I=!0,$=0;$<F[G].length;$+=1)if(F[G][$]!==void 0&&F[G][$]!==U[$]){I=!1;break}if(I===!0){K=X;break}}else for(X in t)for(F=t[X],G=0;G<F.length;G+=1){for(I=!0,$=0;$<F[G].length;$+=1)if(F[G][$]!==void 0&&F[G][$]!==U.charCodeAt($)){I=!1;break}if(I===!0){K=X;break}}return K===e&&B!==e&&(K=B),K},i=function U(B){for(var G=this.internal.write,$=this.internal.putStream,F=(0,this.internal.getFilters)();F.indexOf("FlateEncode")!==-1;)F.splice(F.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var I=[];if(I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Image"}),I.push({key:"Width",value:B.width}),I.push({key:"Height",value:B.height}),B.colorSpace===k.INDEXED?I.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(I.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===k.DEVICE_CMYK&&I.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),I.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&I.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)){for(var X="",K=0,ve=B.transparency.length;K<ve;K++)X+=B.transparency[K]+" "+B.transparency[K]+" ";I.push({key:"Mask",value:"["+X+"]"})}B.sMask!==void 0&&I.push({key:"SMask",value:B.objectId+1+" 0 R"});var ge=B.filter!==void 0?["/"+B.filter]:void 0;if($({data:B.data,additionalKeyValues:I,alreadyAppliedFilters:ge,objectId:B.objectId}),G("endobj"),"sMask"in B&&B.sMask!==void 0){var He="/Predictor "+B.predictor+" /Colors 1 /BitsPerComponent "+B.bitsPerComponent+" /Columns "+B.width,ie={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:B.bitsPerComponent,decodeParameters:He,data:B.sMask};"filter"in B&&(ie.filter=B.filter),U.call(this,ie)}if(B.colorSpace===k.INDEXED){var Ce=this.internal.newObject();$({data:N(new Uint8Array(B.palette)),objectId:Ce}),G("endobj")}},s=function(){var U=this.internal.collections.addImage_images;for(var B in U)i.call(this,U[B])},o=function(){var U,B=this.internal.collections.addImage_images,G=this.internal.write;for(var $ in B)G("/I"+(U=B[$]).index,U.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var U=this.internal.collections.addImage_images;return a.call(this),U},u=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(U){return typeof n["process"+U.toUpperCase()]=="function"},p=function(U){return Yi(U)==="object"&&U.nodeType===1},v=function(U,B){if(U.nodeName==="IMG"&&U.hasAttribute("src")){var G=""+U.getAttribute("src");if(G.indexOf("data:image/")===0)return Yg(unescape(G).split("base64,").pop());var $=n.loadFile(G,!0);if($!==void 0)return $}if(U.nodeName==="CANVAS"){if(U.width===0||U.height===0)throw new Error("Given canvas must have data. Canvas width: "+U.width+", height: "+U.height);var F;switch(B){case"PNG":F="image/png";break;case"WEBP":F="image/webp";break;case"JPEG":case"JPG":default:F="image/jpeg"}return Yg(U.toDataURL(F,1).split("base64,").pop())}},m=function(U){var B=this.internal.collections.addImage_images;if(B){for(var G in B)if(U===B[G].alias)return B[G]}},C=function(U,B,G){return U||B||(U=-96,B=-96),U<0&&(U=-1*G.width*72/U/this.internal.scaleFactor),B<0&&(B=-1*G.height*72/B/this.internal.scaleFactor),U===0&&(U=B*G.width/G.height),B===0&&(B=U*G.height/G.width),[U,B]},E=function(U,B,G,$,F,I){var X=C.call(this,G,$,F),K=this.internal.getCoordinateString,ve=this.internal.getVerticalCoordinateString,ge=l.call(this);if(G=X[0],$=X[1],ge[F.index]=F,I){I*=Math.PI/180;var He=Math.cos(I),ie=Math.sin(I),Ce=function(H){return H.toFixed(4)},_e=[Ce(He),Ce(ie),Ce(-1*ie),Ce(He),0,0,"cm"]}this.internal.write("q"),I?(this.internal.write([1,"0","0",1,K(U),ve(B+$),"cm"].join(" ")),this.internal.write(_e.join(" ")),this.internal.write([K(G),"0","0",K($),"0","0","cm"].join(" "))):this.internal.write([K(G),"0","0",K($),K(U),ve(B+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+F.index+" Do"),this.internal.write("Q")},k=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=n.__addimage__.sHashCode=function(U){var B,G,$=0;if(typeof U=="string")for(G=U.length,B=0;B<G;B++)$=($<<5)-$+U.charCodeAt(B),$|=0;else if(de(U))for(G=U.byteLength/2,B=0;B<G;B++)$=($<<5)-$+U[B],$|=0;return $},R=n.__addimage__.validateStringAsBase64=function(U){(U=U||"").toString().trim();var B=!0;return U.length===0&&(B=!1),U.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(U.substr(0,U.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(U.substr(-2))===!1&&(B=!1),B},W=n.__addimage__.extractImageFromDataUrl=function(U){var B=(U=U||"").split("base64,"),G=null;if(B.length===2){var $=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(B[0]);Array.isArray($)&&(G={mimeType:$[1],charset:$[2],data:B[1]})}return G},Q=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(U){return Q()&&U instanceof ArrayBuffer};var de=n.__addimage__.isArrayBufferView=function(U){return Q()&&typeof Uint32Array<"u"&&(U instanceof Int8Array||U instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&U instanceof Uint8ClampedArray||U instanceof Int16Array||U instanceof Uint16Array||U instanceof Int32Array||U instanceof Uint32Array||U instanceof Float32Array||U instanceof Float64Array)},fe=n.__addimage__.binaryStringToUint8Array=function(U){for(var B=U.length,G=new Uint8Array(B),$=0;$<B;$++)G[$]=U.charCodeAt($);return G},N=n.__addimage__.arrayBufferToBinaryString=function(U){for(var B="",G=de(U)?U:new Uint8Array(U),$=0;$<G.length;$+=8192)B+=String.fromCharCode.apply(null,G.subarray($,$+8192));return B};n.addImage=function(){var U,B,G,$,F,I,X,K,ve;if(typeof arguments[1]=="number"?(B=e,G=arguments[1],$=arguments[2],F=arguments[3],I=arguments[4],X=arguments[5],K=arguments[6],ve=arguments[7]):(B=arguments[1],G=arguments[2],$=arguments[3],F=arguments[4],I=arguments[5],X=arguments[6],K=arguments[7],ve=arguments[8]),Yi(U=arguments[0])==="object"&&!p(U)&&"imageData"in U){var ge=U;U=ge.imageData,B=ge.format||B||e,G=ge.x||G||0,$=ge.y||$||0,F=ge.w||ge.width||F,I=ge.h||ge.height||I,X=ge.alias||X,K=ge.compression||K,ve=ge.rotation||ge.angle||ve}var He=this.internal.getFilters();if(K===void 0&&He.indexOf("FlateEncode")!==-1&&(K="SLOW"),isNaN(G)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var ie=z.call(this,U,B,X,K);return E.call(this,G,$,F,I,ie,ve),this};var z=function(U,B,G,$){var F,I,X;if(typeof U=="string"&&r(U)===e){U=unescape(U);var K=J(U,!1);(K!==""||(K=n.loadFile(U,!0))!==void 0)&&(U=K)}if(p(U)&&(U=v(U,B)),B=r(U,B),!h(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((X=G)==null||X.length===0)&&(G=function(ve){return typeof ve=="string"||de(ve)?D(ve):de(ve.data)?D(ve.data):null}(U)),(F=m.call(this,G))||(Q()&&(U instanceof Uint8Array||B==="RGBA"||(I=U,U=fe(U))),F=this["process"+B.toUpperCase()](U,u.call(this),G,function(ve){return ve&&typeof ve=="string"&&(ve=ve.toUpperCase()),ve in n.image_compression?ve:A.NONE}($),I)),!F)throw new Error("An unknown error occurred whilst processing the image.");return F},J=n.__addimage__.convertBase64ToBinaryString=function(U,B){var G;B=typeof B!="boolean"||B;var $,F="";if(typeof U=="string"){$=(G=W(U))!==null?G.data:U;try{F=Yg($)}catch(I){if(B)throw R($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+I.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return F};n.getImageProperties=function(U){var B,G,$="";if(p(U)&&(U=v(U)),typeof U=="string"&&r(U)===e&&(($=J(U,!1))===""&&($=n.loadFile(U)||""),U=$),G=r(U),!h(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(!Q()||U instanceof Uint8Array||(U=fe(U)),!(B=this["process"+G.toUpperCase()](U)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=G,B}})(Mr.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Mr.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,h=!1,p=0;p<u.length&&!h;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var v=0;v<u.length;v++){r=u[v];var m=this.internal.pdfEscape,C=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(E.objId),D=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(A(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(A(D))+") >>",E.content=s;var R=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+R,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(E.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var W=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(C(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var Q=this.annotations._nameMap[r.options.name];r.options.pageNumber=Q.page,r.options.top=Q.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var de=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+de+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:u(r),w:l(t+i),h:u(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,a,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(t,a).length;o=Math.ceil(u*h)}else a=l,o=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Mr.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=n.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(E){var k=0,A=t,D="",R=0;for(k=0;k<E.length;k+=1)A[E.charCodeAt(k)]!==void 0?(R++,typeof(A=A[E.charCodeAt(k)])=="number"&&(D+=String.fromCharCode(A),A=t,R=0),k===E.length-1&&(A=t,D+=E.charAt(k-(R-1)),k-=R-1,R=0)):(A=t,D+=E.charAt(k-R),k-=R,R=0);return D};n.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=n.__arabicParser__.getCorrectForm=function(E,k,A){return o(E)?s(E)===!1?-1:!u(E)||!o(k)&&!o(A)||!o(A)&&a(k)||a(E)&&!o(k)||a(E)&&l(k)||a(E)&&a(k)?0:h(E)&&o(k)&&!a(k)&&o(A)&&u(A)?3:a(E)||!o(A)?1:2:-1},m=function(E){var k=0,A=0,D=0,R="",W="",Q="",de=(E=E||"").split("\\s+"),fe=[];for(k=0;k<de.length;k+=1){for(fe.push(""),A=0;A<de[k].length;A+=1)R=de[k][A],W=de[k][A-1],Q=de[k][A+1],o(R)?(D=v(R,W,Q),fe[k]+=D!==-1?String.fromCharCode(e[R.charCodeAt(0)][D]):R):fe[k]+=R;fe[k]=p(fe[k])}return fe.join(" ")},C=n.__arabicParser__.processArabic=n.processArabic=function(){var E,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(k)){var D=0;for(A=[],D=0;D<k.length;D+=1)Array.isArray(k[D])?A.push([m(k[D][0]),k[D][1],k[D][2]]):A.push([m(k[D])]);E=A}else E=m(k);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};n.events.push(["preProcessText",C])}(Mr.API),Mr.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Mr.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(E){u=E}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(E){h=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(E){m=E}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(E){C=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){r.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),v=u.scaleFactor||this.internal.scaleFactor,m=0,C=0,E=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var A=u.maxWidth;A>0?typeof l=="string"?l=this.splitTextToSize(l,A):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(R,W){return R.concat(k.splitTextToSize(W,A))},[])):l=Array.isArray(l)?l:[l];for(var D=0;D<l.length;D++)m<(E=this.getStringUnitWidth(l[D],{font:p})*h)&&(m=E);return m!==0&&(C=l.length),{w:m/=v,h:Math.max((C*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/v,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,h,p,v){if(r.call(this),!h)throw new Error("No data for PDF table.");var m,C,E,k,A=[],D=[],R=[],W={},Q={},de=[],fe=[],N=(v=v||{}).autoSize||!1,z=v.printHeaders!==!1,J=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,U=v.margins||Object.assign({width:this.getPageWidth()},e),B=typeof v.padding=="number"?v.padding:3,G=v.headerBackgroundColor||"#c8c8c8",$=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=z,this.internal.__cell__.margins=U,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=$,this.setFontSize(J),p==null)D=A=Object.keys(h[0]),R=A.map(function(){return"left"});else if(Array.isArray(p)&&Yi(p[0])==="object")for(A=p.map(function(ge){return ge.name}),D=p.map(function(ge){return ge.prompt||ge.name||""}),R=p.map(function(ge){return ge.align||"left"}),m=0;m<p.length;m+=1)Q[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=A=p,R=A.map(function(){return"left"}));if(N||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<A.length;m+=1){for(W[k=A[m]]=h.map(function(ge){return ge[k]}),this.setFont(void 0,"bold"),de.push(this.getTextDimensions(D[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=W[k],this.setFont(void 0,"normal"),E=0;E<C.length;E+=1)de.push(this.getTextDimensions(C[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Q[k]=Math.max.apply(null,de)+B+B,de=[]}if(z){var F={};for(m=0;m<A.length;m+=1)F[A[m]]={},F[A[m]].text=D[m],F[A[m]].align=R[m];var I=a.call(this,F,Q);fe=A.map(function(ge){return new s(l,u,Q[ge],I,F[ge].text,void 0,F[ge].align)}),this.setTableHeaderRow(fe),this.printHeaderRow(1,!1)}var X=p.reduce(function(ge,He){return ge[He.name]=He.align,ge},{});for(m=0;m<h.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:h[m]},this);var K=a.call(this,h[m],Q);for(E=0;E<A.length;E+=1){var ve=h[m][A[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:E,data:ve},this),o.call(this,new s(l,u,Q[A[E]],K,ve,m+2,X[A[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(m){var C=l[m];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,u[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/v+h+h},this).reduce(function(m,C){return Math.max(m,C)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,v.push(h)),h.lineNumber=l;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(C)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),t=!1}}(Mr.API);var lM={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},uM=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],I2=aM(uM),cM=[100,200,300,400,500,600,700,800,900],KH=aM(cM);function B2(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return lM[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof I2[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function O5(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var ZH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},N5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function I5(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function XH(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},ZH,t.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=B2(e[a])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+I5(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var h=I2[l],p=h<=I2.normal?-1:1,v=O5(u,uM,h,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var h=lM[l],p=0;p<h.length;++p)if(u[h[p]])return u[h[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var h=KH[l],p=O5(u,cM,h,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+I5(s)+"'.");return o}function B5(n){return n.trimLeft()}function JH(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function QH(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var M0,R5,F5,db=["times"];(function(n){var e,t,r,i,s,o,a,l,u,h=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new l,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new o,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new o,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new h}]);var p=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ce=ie;Object.defineProperty(this,"pdf",{get:function(){return Ce}});var _e=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return _e},set:function(oe){_e=!!oe}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(oe){H=!!oe}});var ee=0;Object.defineProperty(this,"posX",{get:function(){return ee},set:function(oe){isNaN(oe)||(ee=oe)}});var pe=0;Object.defineProperty(this,"posY",{get:function(){return pe},set:function(oe){isNaN(oe)||(pe=oe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(oe){var Z;typeof oe=="number"?Z=[oe,oe,oe,oe]:((Z=new Array(4))[0]=oe[0],Z[1]=oe.length>=2?oe[1]:Z[0],Z[2]=oe.length>=3?oe[2]:Z[0],Z[3]=oe.length>=4?oe[3]:Z[1]),u.margin=Z}});var re=!1;Object.defineProperty(this,"autoPaging",{get:function(){return re},set:function(oe){re=oe}});var ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return ae},set:function(oe){ae=oe}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function(oe){De=oe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(oe){oe instanceof h&&(u=oe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(oe){u.path=oe}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(oe){be=oe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(oe){var Z;Z=v(oe),this.ctx.fillStyle=Z.style,this.ctx.isFillTransparent=Z.a===0,this.ctx.fillOpacity=Z.a,this.pdf.setFillColor(Z.r,Z.g,Z.b,{a:Z.a}),this.pdf.setTextColor(Z.r,Z.g,Z.b,{a:Z.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(oe){var Z=v(oe);this.ctx.strokeStyle=Z.style,this.ctx.isStrokeTransparent=Z.a===0,this.ctx.strokeOpacity=Z.a,Z.a===0?this.pdf.setDrawColor(255,255,255):(Z.a,this.pdf.setDrawColor(Z.r,Z.g,Z.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(oe){["butt","round","square"].indexOf(oe)!==-1&&(this.ctx.lineCap=oe,this.pdf.setLineCap(oe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(oe){isNaN(oe)||(this.ctx.lineWidth=oe,this.pdf.setLineWidth(oe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(oe){["bevel","round","miter"].indexOf(oe)!==-1&&(this.ctx.lineJoin=oe,this.pdf.setLineJoin(oe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(oe){isNaN(oe)||(this.ctx.miterLimit=oe,this.pdf.setMiterLimit(oe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(oe){this.ctx.textBaseline=oe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(oe){["right","end","center","left","start"].indexOf(oe)!==-1&&(this.ctx.textAlign=oe)}});var Ie=null;function le(oe,Z){if(Ie===null){var Ae=function(je){var Ke=[];return Object.keys(je).forEach(function(Me){je[Me].forEach(function(he){var We=null;switch(he){case"bold":We={family:Me,weight:"bold"};break;case"italic":We={family:Me,style:"italic"};break;case"bolditalic":We={family:Me,weight:"bold",style:"italic"};break;case"":case"normal":We={family:Me}}We!==null&&(We.ref={name:Me,style:he},Ke.push(We))})}),Ke}(oe.getFontList());Ie=function(je){for(var Ke={},Me=0;Me<je.length;++Me){var he=B2(je[Me]),We=he.family,at=he.stretch,ut=he.style,Ct=he.weight;Ke[We]=Ke[We]||{},Ke[We][at]=Ke[We][at]||{},Ke[We][at][ut]=Ke[We][at][ut]||{},Ke[We][at][ut][Ct]=he}return Ke}(Ae.concat(Z))}return Ie}var me=null;Object.defineProperty(this,"fontFaces",{get:function(){return me},set:function(oe){Ie=null,me=oe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(oe){var Z;if(this.ctx.font=oe,(Z=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(oe))!==null){var Ae=Z[1],je=(Z[2],Z[3]),Ke=Z[4],Me=(Z[5],Z[6]),he=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ke)[2];Ke=Math.floor(he==="px"?parseFloat(Ke)*this.pdf.internal.scaleFactor:he==="em"?parseFloat(Ke)*this.pdf.getFontSize():parseFloat(Ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ke);var We=function(Qe){var ot,it,At=[],Yt=Qe.trim();if(Yt==="")return db;if(Yt in N5)return[N5[Yt]];for(;Yt!=="";){switch(it=null,ot=(Yt=B5(Yt)).charAt(0)){case'"':case"'":it=JH(Yt.substring(1),ot);break;default:it=QH(Yt)}if(it===null||(At.push(it[0]),(Yt=B5(it[1]))!==""&&Yt.charAt(0)!==","))return db;Yt=Yt.replace(/^,/,"")}return At}(Me);if(this.fontFaces){var at=XH(le(this.pdf,this.fontFaces),We.map(function(Qe){return{family:Qe,stretch:"normal",weight:je,style:Ae}}));this.pdf.setFont(at.ref.name,at.ref.style)}else{var ut="";(je==="bold"||parseInt(je,10)>=700||Ae==="bold")&&(ut="bold"),Ae==="italic"&&(ut+="italic"),ut.length===0&&(ut="normal");for(var Ct="",Xe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},zt=0;zt<We.length;zt++){if(this.pdf.internal.getFont(We[zt],ut,{noFallback:!0,disableWarning:!0})!==void 0){Ct=We[zt];break}if(ut==="bolditalic"&&this.pdf.internal.getFont(We[zt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ct=We[zt],ut="bold";else if(this.pdf.internal.getFont(We[zt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ct=We[zt],ut="normal";break}}if(Ct===""){for(var qt=0;qt<We.length;qt++)if(Xe[We[qt]]){Ct=Xe[We[qt]];break}}Ct=Ct===""?"Times":Ct,this.pdf.setFont(Ct,ut)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(oe){this.ctx.globalCompositeOperation=oe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(oe){this.ctx.globalAlpha=oe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(oe){this.ctx.lineDashOffset=oe,He.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(oe){this.ctx.lineDash=oe,He.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(oe){this.ctx.ignoreClearRect=!!oe}})};p.prototype.setLineDash=function(ie){this.lineDash=ie},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){W.call(this,"fill",!1)},p.prototype.stroke=function(){W.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw ss.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var _e=this.ctx.transform.applyToPoint(new o(ie,Ce));this.path.push({type:"mt",x:_e.x,y:_e.y}),this.ctx.lastPoint=new o(ie,Ce)},p.prototype.closePath=function(){var ie=new o(0,0),Ce=0;for(Ce=this.path.length-1;Ce!==-1;Ce--)if(this.path[Ce].type==="begin"&&Yi(this.path[Ce+1])==="object"&&typeof this.path[Ce+1].x=="number"){ie=new o(this.path[Ce+1].x,this.path[Ce+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(ie.x,ie.y)},p.prototype.lineTo=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw ss.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var _e=this.ctx.transform.applyToPoint(new o(ie,Ce));this.path.push({type:"lt",x:_e.x,y:_e.y}),this.ctx.lastPoint=new o(_e.x,_e.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},p.prototype.quadraticCurveTo=function(ie,Ce,_e,H){if(isNaN(_e)||isNaN(H)||isNaN(ie)||isNaN(Ce))throw ss.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ee=this.ctx.transform.applyToPoint(new o(_e,H)),pe=this.ctx.transform.applyToPoint(new o(ie,Ce));this.path.push({type:"qct",x1:pe.x,y1:pe.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(ee.x,ee.y)},p.prototype.bezierCurveTo=function(ie,Ce,_e,H,ee,pe){if(isNaN(ee)||isNaN(pe)||isNaN(ie)||isNaN(Ce)||isNaN(_e)||isNaN(H))throw ss.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var re=this.ctx.transform.applyToPoint(new o(ee,pe)),ae=this.ctx.transform.applyToPoint(new o(ie,Ce)),De=this.ctx.transform.applyToPoint(new o(_e,H));this.path.push({type:"bct",x1:ae.x,y1:ae.y,x2:De.x,y2:De.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},p.prototype.arc=function(ie,Ce,_e,H,ee,pe){if(isNaN(ie)||isNaN(Ce)||isNaN(_e)||isNaN(H)||isNaN(ee))throw ss.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pe=!!pe,!this.ctx.transform.isIdentity){var re=this.ctx.transform.applyToPoint(new o(ie,Ce));ie=re.x,Ce=re.y;var ae=this.ctx.transform.applyToPoint(new o(0,_e)),De=this.ctx.transform.applyToPoint(new o(0,0));_e=Math.sqrt(Math.pow(ae.x-De.x,2)+Math.pow(ae.y-De.y,2))}Math.abs(ee-H)>=2*Math.PI&&(H=0,ee=2*Math.PI),this.path.push({type:"arc",x:ie,y:Ce,radius:_e,startAngle:H,endAngle:ee,counterclockwise:pe})},p.prototype.arcTo=function(ie,Ce,_e,H,ee){throw new Error("arcTo not implemented.")},p.prototype.rect=function(ie,Ce,_e,H){if(isNaN(ie)||isNaN(Ce)||isNaN(_e)||isNaN(H))throw ss.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,Ce),this.lineTo(ie+_e,Ce),this.lineTo(ie+_e,Ce+H),this.lineTo(ie,Ce+H),this.lineTo(ie,Ce),this.lineTo(ie+_e,Ce),this.lineTo(ie,Ce)},p.prototype.fillRect=function(ie,Ce,_e,H){if(isNaN(ie)||isNaN(Ce)||isNaN(_e)||isNaN(H))throw ss.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ee={};this.lineCap!=="butt"&&(ee.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ee.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,Ce,_e,H),this.fill(),ee.hasOwnProperty("lineCap")&&(this.lineCap=ee.lineCap),ee.hasOwnProperty("lineJoin")&&(this.lineJoin=ee.lineJoin)}},p.prototype.strokeRect=function(ie,Ce,_e,H){if(isNaN(ie)||isNaN(Ce)||isNaN(_e)||isNaN(H))throw ss.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(ie,Ce,_e,H),this.stroke())},p.prototype.clearRect=function(ie,Ce,_e,H){if(isNaN(ie)||isNaN(Ce)||isNaN(_e)||isNaN(H))throw ss.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,Ce,_e,H))},p.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var Ce=this.pdf.internal.getCurrentPageInfo().pageNumber,_e=0;_e<this.pdf.internal.getNumberOfPages();_e++)this.pdf.setPage(_e+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ce),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},p.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var Ce=this.pdf.internal.getCurrentPageInfo().pageNumber,_e=0;_e<this.pdf.internal.getNumberOfPages();_e++)this.pdf.setPage(_e+1),this.pdf.internal.out("Q");this.pdf.setPage(Ce),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(ie){var Ce,_e,H,ee;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))Ce=0,_e=0,H=0,ee=0;else{var pe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(pe!==null)Ce=parseInt(pe[1]),_e=parseInt(pe[2]),H=parseInt(pe[3]),ee=1;else if((pe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)Ce=parseInt(pe[1]),_e=parseInt(pe[2]),H=parseInt(pe[3]),ee=parseFloat(pe[4]);else{if(ee=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var re=new tM(ie);ie=re.ok?re.toHex():"#000000"}ie.length===4?(Ce=ie.substring(1,2),Ce+=Ce,_e=ie.substring(2,3),_e+=_e,H=ie.substring(3,4),H+=H):(Ce=ie.substring(1,3),_e=ie.substring(3,5),H=ie.substring(5,7)),Ce=parseInt(Ce,16),_e=parseInt(_e,16),H=parseInt(H,16)}}return{r:Ce,g:_e,b:H,a:ee,style:ie}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(ie,Ce,_e,H){if(isNaN(Ce)||isNaN(_e)||typeof ie!="string")throw ss.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!m.call(this)){var ee=K(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;B.call(this,{text:ie,x:Ce,y:_e,scale:pe,angle:ee,align:this.textAlign,maxWidth:H})}},p.prototype.strokeText=function(ie,Ce,_e,H){if(isNaN(Ce)||isNaN(_e)||typeof ie!="string")throw ss.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){H=isNaN(H)?void 0:H;var ee=K(this.ctx.transform.rotation),pe=this.ctx.transform.scaleX;B.call(this,{text:ie,x:Ce,y:_e,scale:pe,renderingMode:"stroke",angle:ee,align:this.textAlign,maxWidth:H})}},p.prototype.measureText=function(ie){if(typeof ie!="string")throw ss.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ce=this.pdf,_e=this.pdf.internal.scaleFactor,H=Ce.internal.getFontSize(),ee=Ce.getStringUnitWidth(ie)*H/Ce.internal.scaleFactor,pe=function(re){var ae=(re=re||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this};return new pe({width:ee*=Math.round(96*_e/72*1e4)/1e4})},p.prototype.scale=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw ss.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var _e=new l(ie,0,0,Ce,0,0);this.ctx.transform=this.ctx.transform.multiply(_e)},p.prototype.rotate=function(ie){if(isNaN(ie))throw ss.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ce=new l(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(Ce)},p.prototype.translate=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw ss.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var _e=new l(1,0,0,1,ie,Ce);this.ctx.transform=this.ctx.transform.multiply(_e)},p.prototype.transform=function(ie,Ce,_e,H,ee,pe){if(isNaN(ie)||isNaN(Ce)||isNaN(_e)||isNaN(H)||isNaN(ee)||isNaN(pe))throw ss.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var re=new l(ie,Ce,_e,H,ee,pe);this.ctx.transform=this.ctx.transform.multiply(re)},p.prototype.setTransform=function(ie,Ce,_e,H,ee,pe){ie=isNaN(ie)?1:ie,Ce=isNaN(Ce)?0:Ce,_e=isNaN(_e)?0:_e,H=isNaN(H)?1:H,ee=isNaN(ee)?0:ee,pe=isNaN(pe)?0:pe,this.ctx.transform=new l(ie,Ce,_e,H,ee,pe)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(ie,Ce,_e,H,ee,pe,re,ae,De){var be=this.pdf.getImageProperties(ie),Ie=1,le=1,me=1,oe=1;H!==void 0&&ae!==void 0&&(me=ae/H,oe=De/ee,Ie=be.width/H*ae/H,le=be.height/ee*De/ee),pe===void 0&&(pe=Ce,re=_e,Ce=0,_e=0),H!==void 0&&ae===void 0&&(ae=H,De=ee),H===void 0&&ae===void 0&&(ae=be.width,De=be.height);for(var Z,Ae=this.ctx.transform.decompose(),je=K(Ae.rotate.shx),Ke=new l,Me=(Ke=(Ke=(Ke=Ke.multiply(Ae.translate)).multiply(Ae.skew)).multiply(Ae.scale)).applyToRectangle(new a(pe-Ce*me,re-_e*oe,H*Ie,ee*le)),he=k.call(this,Me),We=[],at=0;at<he.length;at+=1)We.indexOf(he[at])===-1&&We.push(he[at]);if(R(We),this.autoPaging)for(var ut=We[0],Ct=We[We.length-1],Xe=ut;Xe<Ct+1;Xe++){this.pdf.setPage(Xe);var zt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qt=Xe===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=Xe===1?0:Qe+(Xe-2)*ot;if(this.ctx.clip_path.length!==0){var At=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Z,this.posX+this.margin[3],-it+qt+this.ctx.prevPageLastElemOffset),Q.call(this,"fill",!0),this.path=At}var Yt=JSON.parse(JSON.stringify(Me));Yt=D([Yt],this.posX+this.margin[3],-it+qt+this.ctx.prevPageLastElemOffset)[0];var bn=(Xe>ut||Xe<Ct)&&E.call(this);bn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zt,ot,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",Yt.x,Yt.y,Yt.w,Yt.h,null,null,je),bn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ie,"JPEG",Me.x,Me.y,Me.w,Me.h,null,null,je)};var k=function(ie,Ce,_e){var H=[];Ce=Ce||this.pdf.internal.pageSize.width,_e=_e||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ee=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":H.push(Math.floor((ie.y+ee)/_e)+1);break;case"arc":H.push(Math.floor((ie.y+ee-ie.radius)/_e)+1),H.push(Math.floor((ie.y+ee+ie.radius)/_e)+1);break;case"qct":var pe=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);H.push(Math.floor((pe.y+ee)/_e)+1),H.push(Math.floor((pe.y+pe.h+ee)/_e)+1);break;case"bct":var re=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);H.push(Math.floor((re.y+ee)/_e)+1),H.push(Math.floor((re.y+re.h+ee)/_e)+1);break;case"rect":H.push(Math.floor((ie.y+ee)/_e)+1),H.push(Math.floor((ie.y+ie.h+ee)/_e)+1)}for(var ae=0;ae<H.length;ae+=1)for(;this.pdf.internal.getNumberOfPages()<H[ae];)A.call(this);return H},A=function(){var ie=this.fillStyle,Ce=this.strokeStyle,_e=this.font,H=this.lineCap,ee=this.lineWidth,pe=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=Ce,this.font=_e,this.lineCap=H,this.lineWidth=ee,this.lineJoin=pe},D=function(ie,Ce,_e){for(var H=0;H<ie.length;H++)switch(ie[H].type){case"bct":ie[H].x2+=Ce,ie[H].y2+=_e;case"qct":ie[H].x1+=Ce,ie[H].y1+=_e;case"mt":case"lt":case"arc":default:ie[H].x+=Ce,ie[H].y+=_e}return ie},R=function(ie){return ie.sort(function(Ce,_e){return Ce-_e})},W=function(ie,Ce){for(var _e,H,ee=this.fillStyle,pe=this.strokeStyle,re=this.lineCap,ae=this.lineWidth,De=Math.abs(ae*this.ctx.transform.scaleX),be=this.lineJoin,Ie=JSON.parse(JSON.stringify(this.path)),le=JSON.parse(JSON.stringify(this.path)),me=[],oe=0;oe<le.length;oe++)if(le[oe].x!==void 0)for(var Z=k.call(this,le[oe]),Ae=0;Ae<Z.length;Ae+=1)me.indexOf(Z[Ae])===-1&&me.push(Z[Ae]);for(var je=0;je<me.length;je++)for(;this.pdf.internal.getNumberOfPages()<me[je];)A.call(this);if(R(me),this.autoPaging)for(var Ke=me[0],Me=me[me.length-1],he=Ke;he<Me+1;he++){this.pdf.setPage(he),this.fillStyle=ee,this.strokeStyle=pe,this.lineCap=re,this.lineWidth=De,this.lineJoin=be;var We=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],at=he===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=he===1?0:ut+(he-2)*Ct;if(this.ctx.clip_path.length!==0){var zt=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(_e,this.posX+this.margin[3],-Xe+at+this.ctx.prevPageLastElemOffset),Q.call(this,ie,!0),this.path=zt}if(H=JSON.parse(JSON.stringify(Ie)),this.path=D(H,this.posX+this.margin[3],-Xe+at+this.ctx.prevPageLastElemOffset),Ce===!1||he===0){var qt=(he>Ke||he<Me)&&E.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,Ct,null).clip().discardPath()),Q.call(this,ie,Ce),qt&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}else this.lineWidth=De,Q.call(this,ie,Ce),this.lineWidth=ae;this.path=Ie},Q=function(ie,Ce){if((ie!=="stroke"||Ce||!C.call(this))&&(ie==="stroke"||Ce||!m.call(this))){for(var _e,H,ee=[],pe=this.path,re=0;re<pe.length;re++){var ae=pe[re];switch(ae.type){case"begin":ee.push({begin:!0});break;case"close":ee.push({close:!0});break;case"mt":ee.push({start:ae,deltas:[],abs:[]});break;case"lt":var De=ee.length;if(pe[re-1]&&!isNaN(pe[re-1].x)&&(_e=[ae.x-pe[re-1].x,ae.y-pe[re-1].y],De>0)){for(;De>=0;De--)if(ee[De-1].close!==!0&&ee[De-1].begin!==!0){ee[De-1].deltas.push(_e),ee[De-1].abs.push(ae);break}}break;case"bct":_e=[ae.x1-pe[re-1].x,ae.y1-pe[re-1].y,ae.x2-pe[re-1].x,ae.y2-pe[re-1].y,ae.x-pe[re-1].x,ae.y-pe[re-1].y],ee[ee.length-1].deltas.push(_e);break;case"qct":var be=pe[re-1].x+2/3*(ae.x1-pe[re-1].x),Ie=pe[re-1].y+2/3*(ae.y1-pe[re-1].y),le=ae.x+2/3*(ae.x1-ae.x),me=ae.y+2/3*(ae.y1-ae.y),oe=ae.x,Z=ae.y;_e=[be-pe[re-1].x,Ie-pe[re-1].y,le-pe[re-1].x,me-pe[re-1].y,oe-pe[re-1].x,Z-pe[re-1].y],ee[ee.length-1].deltas.push(_e);break;case"arc":ee.push({deltas:[],abs:[],arc:!0}),Array.isArray(ee[ee.length-1].abs)&&ee[ee.length-1].abs.push(ae)}}H=Ce?null:ie==="stroke"?"stroke":"fill";for(var Ae=!1,je=0;je<ee.length;je++)if(ee[je].arc)for(var Ke=ee[je].abs,Me=0;Me<Ke.length;Me++){var he=Ke[Me];he.type==="arc"?N.call(this,he.x,he.y,he.radius,he.startAngle,he.endAngle,he.counterclockwise,void 0,Ce,!Ae):G.call(this,he.x,he.y),Ae=!0}else if(ee[je].close===!0)this.pdf.internal.out("h"),Ae=!1;else if(ee[je].begin!==!0){var We=ee[je].start.x,at=ee[je].start.y;$.call(this,ee[je].deltas,We,at),Ae=!0}H&&z.call(this,H),Ce&&J.call(this)}},de=function(ie){var Ce=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,_e=Ce*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-_e;case"top":return ie+Ce-_e;case"hanging":return ie+Ce-2*_e;case"middle":return ie+Ce/2-_e;case"ideographic":return ie;case"alphabetic":default:return ie}},fe=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(Ce,_e){this.colorStops.push([Ce,_e])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(ie,Ce,_e,H,ee,pe,re,ae,De){for(var be=I.call(this,_e,H,ee,pe),Ie=0;Ie<be.length;Ie++){var le=be[Ie];Ie===0&&(De?U.call(this,le.x1+ie,le.y1+Ce):G.call(this,le.x1+ie,le.y1+Ce)),F.call(this,ie,Ce,le.x2,le.y2,le.x3,le.y3,le.x4,le.y4)}ae?J.call(this):z.call(this,re)},z=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},U=function(ie,Ce){this.pdf.internal.out(t(ie)+" "+r(Ce)+" m")},B=function(ie){var Ce;switch(ie.align){case"right":case"end":Ce="right";break;case"center":Ce="center";break;case"left":case"start":default:Ce="left"}var _e=this.pdf.getTextDimensions(ie.text),H=de.call(this,ie.y),ee=fe.call(this,H)-_e.h,pe=this.ctx.transform.applyToPoint(new o(ie.x,H)),re=this.ctx.transform.decompose(),ae=new l;ae=(ae=(ae=ae.multiply(re.translate)).multiply(re.skew)).multiply(re.scale);for(var De,be,Ie,le=this.ctx.transform.applyToRectangle(new a(ie.x,H,_e.w,_e.h)),me=ae.applyToRectangle(new a(ie.x,ee,_e.w,_e.h)),oe=k.call(this,me),Z=[],Ae=0;Ae<oe.length;Ae+=1)Z.indexOf(oe[Ae])===-1&&Z.push(oe[Ae]);if(R(Z),this.autoPaging)for(var je=Z[0],Ke=Z[Z.length-1],Me=je;Me<Ke+1;Me++){this.pdf.setPage(Me);var he=Me===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[2],ut=at-this.margin[0],Ct=this.pdf.internal.pageSize.width-this.margin[1],Xe=Ct-this.margin[3],zt=Me===1?0:We+(Me-2)*ut;if(this.ctx.clip_path.length!==0){var qt=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(De,this.posX+this.margin[3],-1*zt+he),Q.call(this,"fill",!0),this.path=qt}var Qe=D([JSON.parse(JSON.stringify(me))],this.posX+this.margin[3],-zt+he+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*ie.scale),Ie=this.lineWidth,this.lineWidth=Ie*ie.scale);var ot=this.autoPaging!=="text";if(ot||Qe.y+Qe.h<=at){if(ot||Qe.y>=he&&Qe.x<=Ct){var it=ot?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||Ct-Qe.x)[0],At=D([JSON.parse(JSON.stringify(le))],this.posX+this.margin[3],-zt+he+this.ctx.prevPageLastElemOffset)[0],Yt=ot&&(Me>je||Me<Ke)&&E.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,ut,null).clip().discardPath()),this.pdf.text(it,At.x,At.y,{angle:ie.angle,align:Ce,renderingMode:ie.renderingMode}),Yt&&this.pdf.restoreGraphicsState()}}else Qe.y<at&&(this.ctx.prevPageLastElemOffset+=at-Qe.y);ie.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Ie)}else ie.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*ie.scale),Ie=this.lineWidth,this.lineWidth=Ie*ie.scale),this.pdf.text(ie.text,pe.x+this.posX,pe.y+this.posY,{angle:ie.angle,align:Ce,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=Ie)},G=function(ie,Ce,_e,H){_e=_e||0,H=H||0,this.pdf.internal.out(t(ie+_e)+" "+r(Ce+H)+" l")},$=function(ie,Ce,_e){return this.pdf.lines(ie,Ce,_e,null,null)},F=function(ie,Ce,_e,H,ee,pe,re,ae){this.pdf.internal.out([e(i(_e+ie)),e(s(H+Ce)),e(i(ee+ie)),e(s(pe+Ce)),e(i(re+ie)),e(s(ae+Ce)),"c"].join(" "))},I=function(ie,Ce,_e,H){for(var ee=2*Math.PI,pe=Math.PI/2;Ce>_e;)Ce-=ee;var re=Math.abs(_e-Ce);re<ee&&H&&(re=ee-re);for(var ae=[],De=H?-1:1,be=Ce;re>1e-5;){var Ie=be+De*Math.min(re,pe);ae.push(X.call(this,ie,be,Ie)),re-=Math.abs(Ie-be),be=Ie}return ae},X=function(ie,Ce,_e){var H=(_e-Ce)/2,ee=ie*Math.cos(H),pe=ie*Math.sin(H),re=ee,ae=-pe,De=re*re+ae*ae,be=De+re*ee+ae*pe,Ie=4/3*(Math.sqrt(2*De*be)-be)/(re*pe-ae*ee),le=re-Ie*ae,me=ae+Ie*re,oe=le,Z=-me,Ae=H+Ce,je=Math.cos(Ae),Ke=Math.sin(Ae);return{x1:ie*Math.cos(Ce),y1:ie*Math.sin(Ce),x2:le*je-me*Ke,y2:le*Ke+me*je,x3:oe*je-Z*Ke,y3:oe*Ke+Z*je,x4:ie*Math.cos(_e),y4:ie*Math.sin(_e)}},K=function(ie){return 180*ie/Math.PI},ve=function(ie,Ce,_e,H,ee,pe){var re=ie+.5*(_e-ie),ae=Ce+.5*(H-Ce),De=ee+.5*(_e-ee),be=pe+.5*(H-pe),Ie=Math.min(ie,ee,re,De),le=Math.max(ie,ee,re,De),me=Math.min(Ce,pe,ae,be),oe=Math.max(Ce,pe,ae,be);return new a(Ie,me,le-Ie,oe-me)},ge=function(ie,Ce,_e,H,ee,pe,re,ae){var De,be,Ie,le,me,oe,Z,Ae,je,Ke,Me,he,We,at,ut=_e-ie,Ct=H-Ce,Xe=ee-_e,zt=pe-H,qt=re-ee,Qe=ae-pe;for(be=0;be<41;be++)je=(Z=(Ie=ie+(De=be/40)*ut)+De*((me=_e+De*Xe)-Ie))+De*(me+De*(ee+De*qt-me)-Z),Ke=(Ae=(le=Ce+De*Ct)+De*((oe=H+De*zt)-le))+De*(oe+De*(pe+De*Qe-oe)-Ae),be==0?(Me=je,he=Ke,We=je,at=Ke):(Me=Math.min(Me,je),he=Math.min(he,Ke),We=Math.max(We,je),at=Math.max(at,Ke));return new a(Math.round(Me),Math.round(he),Math.round(We-Me),Math.round(at-he))},He=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,Ce,_e=(ie=this.ctx.lineDash,Ce=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:Ce}));this.prevLineDash!==_e&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=_e)}}})(Mr.API),function(n){var e=function(s){var o,a,l,u,h,p,v,m,C,E;for(a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(h=((h=((h=((h=(h-(E=h%85))/85)-(C=h%85))/85)-(m=h%85))/85)-(v=h%85))/85)%85,a.push(p+33,v+33,m+33,C+33,E+33)):a.push(122);return function(k,A){for(var D=A;D>0;D--)k.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var o,a,l,u,h,p=String,v="length",m=255,C="charCodeAt",E="slice",k="replace";for(s[E](-2),s=s[E](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),l=[],u=0,h=(s+=o="uuuuu"[E](s[v]%5||5))[v];h>u;u+=5)a=52200625*(s[C](u)-33)+614125*(s[C](u+1)-33)+7225*(s[C](u+2)-33)+85*(s[C](u+3)-33)+(s[C](u+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(A,D){for(var R=D;R>0;R--)A.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=A2(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(Mr.API),function(n){n.loadFile=function(e,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,h){var p=new XMLHttpRequest,v=0,m=function(C){var E=C.length,k=[],A=String.fromCharCode;for(v=0;v<E;v+=1)k.push(A(255&C.charCodeAt(v)));return k.join("")};if(p.open("GET",l,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?h(m(this.responseText)):h(void 0)}),p.send(null),u&&p.status===200)return m(p.responseText)}(i,s,o)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(Mr.API),function(n){function e(){return(Pr.html2canvas?Promise.resolve(Pr.html2canvas):Od(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Pr.DOMPurify?Promise.resolve(Pr.DOMPurify):Od(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Yi(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,h){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),v=u.firstChild;v;v=v.nextSibling)h!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,h));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var v=0;v<u.length;++v){var m=u[v],C=m.src.find(function(E){return E.format==="truetype"});C&&l.addFont(C.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||Mr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,h){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,u),p}).then(u,h).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=l.call(u,o,a);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Mr.getPageSize=function(o,a,l){if(Yi(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var m,C=0,E=0;if(v.hasOwnProperty(p))C=v[p][1]/h,E=v[p][0]/h;else try{C=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>C&&(m=E,E=C,C=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",C>E&&(m=E,E=C,C=m)}return{width:E,height:C,unit:a,k:h,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(B2):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Mr.API),Mr.API.addJS=function(n){return F5=n,this.internal.events.subscribe("postPutResources",function(){M0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(M0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),R5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+F5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){M0!==void 0&&R5!==void 0&&this.internal.out("/Names <</JavaScript "+M0+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(s=0;s<u;s++){var p=t.internal.newObject();h.push(p);var v=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<h.length;s++)t.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Mr.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,h=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(p){for(var v,m=256*p.charCodeAt(4)+p.charCodeAt(5),C=p.length,E={width:0,height:0,numcomponents:1},k=4;k<C;k+=2){if(k+=m,e.indexOf(p.charCodeAt(k+1))!==-1){v=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),E={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:v,numcomponents:p.charCodeAt(k+9)};break}m=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return E}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return h}}(Mr.API);var Xf,P0,j5,z5,$5,eG=function(){var n,e,t;function r(s){var o,a,l,u,h,p,v,m,C,E,k,A,D,R;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),C=(function(){var W,Q;for(Q=[],W=0;W<4;++W)Q.push(String.fromCharCode(this.data[this.pos++]));return Q}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*h/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,A=0;0<=o?A<o:A>o;0<=o?++A:--A)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(D=0;0<=E?D<E:D>E;0<=E?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(k=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,k.slice(0,v)),this.text[m]=String.fromCharCode.apply(String,k.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(R=this.colorType)===4||R===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(p,v,m,C){var E,k,A,D,R,W,Q,de,fe,N,z,J,U,B,G,$,F,I,X,K,ve,ge=Math.ceil((u.width-p)/m),He=Math.ceil((u.height-v)/C),ie=u.width==ge&&u.height==He;for(B=o*ge,J=ie?a:new Uint8Array(B*He),W=s.length,U=0,k=0;U<He&&l<W;){switch(s[l++]){case 0:for(D=F=0;F<B;D=F+=1)J[k++]=s[l++];break;case 1:for(D=I=0;I<B;D=I+=1)E=s[l++],R=D<o?0:J[k-o],J[k++]=(E+R)%256;break;case 2:for(D=X=0;X<B;D=X+=1)E=s[l++],A=(D-D%o)/o,G=U&&J[(U-1)*B+A*o+D%o],J[k++]=(G+E)%256;break;case 3:for(D=K=0;K<B;D=K+=1)E=s[l++],A=(D-D%o)/o,R=D<o?0:J[k-o],G=U&&J[(U-1)*B+A*o+D%o],J[k++]=(E+Math.floor((R+G)/2))%256;break;case 4:for(D=ve=0;ve<B;D=ve+=1)E=s[l++],A=(D-D%o)/o,R=D<o?0:J[k-o],U===0?G=$=0:(G=J[(U-1)*B+A*o+D%o],$=A&&J[(U-1)*B+(A-1)*o+D%o]),Q=R+G-$,de=Math.abs(Q-R),N=Math.abs(Q-G),z=Math.abs(Q-$),fe=de<=N&&de<=z?R:N<=z?G:$,J[k++]=(E+fe)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!ie){var Ce=((v+U*C)*u.width+p)*o,_e=U*B;for(D=0;D<ge;D+=1){for(var H=0;H<o;H+=1)a[Ce++]=J[_e++];Ce+=(m-1)*o}}U++}}return s=DH(s),u.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,h,p,v,m;for(a=this.palette,h=this.transparency.indexed||[],u=new Uint8Array((h.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(m=h[s++])!=null?m:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,h,p,v,m,C,E,k,A;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),l=4,a=!0),C=(u=s.data||s).length,p=E||o,h=v=0,l===1)for(;h<C;)m=E?4*o[h/4]:v,k=p[m++],u[h++]=k,u[h++]=k,u[h++]=k,u[h++]=a?p[m++]:255,v=m;else for(;h<C;)m=E?4*o[h/4]:v,u[h++]=p[m++],u[h++]=p[m++],u[h++]=p[m++],u[h++]=a?p[m++]:255,v=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Pr)==="[object Window]"){try{e=Pr.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,h,p,v,m;if(this.animation){for(m=[],a=h=0,p=(v=this.animation.frames).length;h<p;a=++h)o=v[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,m.push(o.image=n(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,h,p,v=this;return a=0,p=this.animation,u=p.numFrames,l=p.frames,h=p.numPlays,(o=function(){var m,C;if(m=a++%u,C=l[m],v.renderFrame(s,m),u>1&&a/u<h)return v.animation._timeout=setTimeout(o,C.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function tG(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,h=[],p=0,v=null,m=0,C=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,C=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((U=n[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=n[e++];p=n[e++]|n[e++]<<8,v=n[e++],!(1&E)&&(v=null),m=E>>2&7,e++;break;case 254:for(;;){if(!((U=n[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var k=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,D=n[e++]|n[e++]<<8,R=n[e++]|n[e++]<<8,W=n[e++],Q=W>>6&1,de=1<<(7&W)+1,fe=a,N=l,z=!1;W>>7&&(z=!0,fe=e,N=de,e+=3*de);var J=e;for(e++;;){var U;if(!((U=n[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}h.push({x:k,y:A,width:D,height:R,has_local_palette:z,palette_offset:fe,palette_size:N,data_offset:J,data_length:e-J,transparent_index:v,interlaced:!!Q,delay:p,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return C},this.frameInfo=function(B){if(B<0||B>=h.length)throw new Error("Frame index out of range.");return h[B]},this.decodeAndBlitFrameBGRA=function(B,G){var $=this.frameInfo(B),F=$.width*$.height,I=new Uint8Array(F);U5(n,$.data_offset,I,F);var X=$.palette_offset,K=$.transparent_index;K===null&&(K=256);var ve=$.width,ge=t-ve,He=ve,ie=4*($.y*t+$.x),Ce=4*(($.y+$.height)*t+$.x),_e=ie,H=4*ge;$.interlaced===!0&&(H+=4*t*7);for(var ee=8,pe=0,re=I.length;pe<re;++pe){var ae=I[pe];if(He===0&&(He=ve,(_e+=H)>=Ce&&(H=4*ge+4*t*(ee-1),_e=ie+(ve+ge)*(ee<<1),ee>>=1)),ae===K)_e+=4;else{var De=n[X+3*ae],be=n[X+3*ae+1],Ie=n[X+3*ae+2];G[_e++]=Ie,G[_e++]=be,G[_e++]=De,G[_e++]=255}--He}},this.decodeAndBlitFrameRGBA=function(B,G){var $=this.frameInfo(B),F=$.width*$.height,I=new Uint8Array(F);U5(n,$.data_offset,I,F);var X=$.palette_offset,K=$.transparent_index;K===null&&(K=256);var ve=$.width,ge=t-ve,He=ve,ie=4*($.y*t+$.x),Ce=4*(($.y+$.height)*t+$.x),_e=ie,H=4*ge;$.interlaced===!0&&(H+=4*t*7);for(var ee=8,pe=0,re=I.length;pe<re;++pe){var ae=I[pe];if(He===0&&(He=ve,(_e+=H)>=Ce&&(H=4*ge+4*t*(ee-1),_e=ie+(ve+ge)*(ee<<1),ee>>=1)),ae===K)_e+=4;else{var De=n[X+3*ae],be=n[X+3*ae+1],Ie=n[X+3*ae+2];G[_e++]=De,G[_e++]=be,G[_e++]=Ie,G[_e++]=255}--He}}}function U5(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,h=0,p=0,v=0,m=n[e++],C=new Int32Array(4096),E=null;;){for(;h<16&&m!==0;)p|=n[e++]<<h,h+=8,m===1?m=n[e++]:--m;if(h<l)break;var k=p&u;if(p>>=l,h-=l,k!==s){if(k===o)break;for(var A=k<a?k:E,D=0,R=A;R>s;)R=C[R]>>8,++D;var W=R;if(v+D+(A!==k?1:0)>r)return void ss.log("Warning, gif stream longer than expected.");t[v++]=W;var Q=v+=D;for(A!==k&&(t[v++]=W),R=A;D--;)R=C[R],t[--Q]=255&R,R>>=8;E!==null&&a<4096&&(C[a++]=E<<8|W,a>=u+1&&l<12&&(++l,u=u<<1|1)),E=k}else a=o+1,u=(1<<(l=i+1))-1,E=null}return v!==r&&ss.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function hb(n){var e,t,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),h=new Array(64),p=new Array(65535),v=new Array(65535),m=new Array(64),C=new Array(64),E=[],k=0,A=7,D=new Array(64),R=new Array(64),W=new Array(64),Q=new Array(256),de=new Array(2048),fe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],F=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function I(ie,Ce){for(var _e=0,H=0,ee=new Array,pe=1;pe<=16;pe++){for(var re=1;re<=ie[pe];re++)ee[Ce[H]]=[],ee[Ce[H]][0]=_e,ee[Ce[H]][1]=pe,H++,_e++;_e*=2}return ee}function X(ie){for(var Ce=ie[0],_e=ie[1]-1;_e>=0;)Ce&1<<_e&&(k|=1<<A),_e--,--A<0&&(k==255?(K(255),K(0)):K(k),A=7,k=0)}function K(ie){E.push(ie)}function ve(ie){K(ie>>8&255),K(255&ie)}function ge(ie,Ce,_e,H,ee){for(var pe,re=ee[0],ae=ee[240],De=function(Ke,Me){var he,We,at,ut,Ct,Xe,zt,qt,Qe,ot,it=0;for(Qe=0;Qe<8;++Qe){he=Ke[it],We=Ke[it+1],at=Ke[it+2],ut=Ke[it+3],Ct=Ke[it+4],Xe=Ke[it+5],zt=Ke[it+6];var At=he+(qt=Ke[it+7]),Yt=he-qt,bn=We+zt,xn=We-zt,En=at+Xe,$n=at-Xe,Sn=ut+Ct,an=ut-Ct,mn=At+Sn,tr=At-Sn,ar=bn+En,mr=bn-En;Ke[it]=mn+ar,Ke[it+4]=mn-ar;var zn=.707106781*(mr+tr);Ke[it+2]=tr+zn,Ke[it+6]=tr-zn;var kr=.382683433*((mn=an+$n)-(mr=xn+Yt)),as=.5411961*mn+kr,Ni=1.306562965*mr+kr,io=.707106781*(ar=$n+xn),Ps=Yt+io,Zn=Yt-io;Ke[it+5]=Zn+as,Ke[it+3]=Zn-as,Ke[it+1]=Ps+Ni,Ke[it+7]=Ps-Ni,it+=8}for(it=0,Qe=0;Qe<8;++Qe){he=Ke[it],We=Ke[it+8],at=Ke[it+16],ut=Ke[it+24],Ct=Ke[it+32],Xe=Ke[it+40],zt=Ke[it+48];var bt=he+(qt=Ke[it+56]),rt=he-qt,Vt=We+zt,Ln=We-zt,Kt=at+Xe,rn=at-Xe,Zt=ut+Ct,qn=ut-Ct,St=bt+Zt,gn=bt-Zt,nr=Vt+Kt,Vn=Vt-Kt;Ke[it]=St+nr,Ke[it+32]=St-nr;var dr=.707106781*(Vn+gn);Ke[it+16]=gn+dr,Ke[it+48]=gn-dr;var Cn=.382683433*((St=qn+rn)-(Vn=Ln+rt)),fn=.5411961*St+Cn,li=1.306562965*Vn+Cn,Ci=.707106781*(nr=rn+Ln),Si=rt+Ci,Or=rt-Ci;Ke[it+40]=Or+fn,Ke[it+24]=Or-fn,Ke[it+8]=Si+li,Ke[it+56]=Si-li,it++}for(Qe=0;Qe<64;++Qe)ot=Ke[Qe]*Me[Qe],m[Qe]=ot>0?ot+.5|0:ot-.5|0;return m}(ie,Ce),be=0;be<64;++be)C[fe[be]]=De[be];var Ie=C[0]-_e;_e=C[0],Ie==0?X(H[0]):(X(H[v[pe=32767+Ie]]),X(p[pe]));for(var le=63;le>0&&C[le]==0;)le--;if(le==0)return X(re),_e;for(var me,oe=1;oe<=le;){for(var Z=oe;C[oe]==0&&oe<=le;)++oe;var Ae=oe-Z;if(Ae>=16){me=Ae>>4;for(var je=1;je<=me;++je)X(ae);Ae&=15}pe=32767+C[oe],X(ee[(Ae<<4)+v[pe]]),X(p[pe]),oe++}return le!=63&&X(re),_e}function He(ie){ie=Math.min(Math.max(ie,1),100),s!=ie&&(function(Ce){for(var _e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var ee=o((_e[H]*Ce+50)/100);ee=Math.min(Math.max(ee,1),255),a[fe[H]]=ee}for(var pe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],re=0;re<64;re++){var ae=o((pe[re]*Ce+50)/100);ae=Math.min(Math.max(ae,1),255),l[fe[re]]=ae}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,Ie=0;Ie<8;Ie++)for(var le=0;le<8;le++)u[be]=1/(a[fe[be]]*De[Ie]*De[le]*8),h[be]=1/(l[fe[be]]*De[Ie]*De[le]*8),be++}(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),s=ie)}this.encode=function(ie,Ce){Ce&&He(Ce),E=new Array,k=0,A=7,ve(65496),ve(65504),ve(16),K(74),K(70),K(73),K(70),K(0),K(1),K(1),K(0),ve(1),ve(1),K(0),K(0),function(){ve(65499),ve(132),K(0);for(var We=0;We<64;We++)K(a[We]);K(1);for(var at=0;at<64;at++)K(l[at])}(),function(We,at){ve(65472),ve(17),K(8),ve(at),ve(We),K(3),K(1),K(17),K(0),K(2),K(17),K(1),K(3),K(17),K(1)}(ie.width,ie.height),function(){ve(65476),ve(418),K(0);for(var We=0;We<16;We++)K(N[We+1]);for(var at=0;at<=11;at++)K(z[at]);K(16);for(var ut=0;ut<16;ut++)K(J[ut+1]);for(var Ct=0;Ct<=161;Ct++)K(U[Ct]);K(1);for(var Xe=0;Xe<16;Xe++)K(B[Xe+1]);for(var zt=0;zt<=11;zt++)K(G[zt]);K(17);for(var qt=0;qt<16;qt++)K($[qt+1]);for(var Qe=0;Qe<=161;Qe++)K(F[Qe])}(),ve(65498),ve(12),K(3),K(1),K(0),K(2),K(17),K(3),K(17),K(0),K(63),K(0);var _e=0,H=0,ee=0;k=0,A=7,this.encode.displayName="_encode_";for(var pe,re,ae,De,be,Ie,le,me,oe,Z=ie.data,Ae=ie.width,je=ie.height,Ke=4*Ae,Me=0;Me<je;){for(pe=0;pe<Ke;){for(be=Ke*Me+pe,le=-1,me=0,oe=0;oe<64;oe++)Ie=be+(me=oe>>3)*Ke+(le=4*(7&oe)),Me+me>=je&&(Ie-=Ke*(Me+1+me-je)),pe+le>=Ke&&(Ie-=pe+le-Ke+4),re=Z[Ie++],ae=Z[Ie++],De=Z[Ie++],D[oe]=(de[re]+de[ae+256>>0]+de[De+512>>0]>>16)-128,R[oe]=(de[re+768>>0]+de[ae+1024>>0]+de[De+1280>>0]>>16)-128,W[oe]=(de[re+1280>>0]+de[ae+1536>>0]+de[De+1792>>0]>>16)-128;_e=ge(D,u,_e,e,r),H=ge(R,h,H,t,i),ee=ge(W,h,ee,t,i),pe+=32}Me+=8}if(A>=0){var he=[];he[1]=A+1,he[0]=(1<<A+1)-1,X(he)}return ve(65497),new Uint8Array(E)},n=n||50,function(){for(var ie=String.fromCharCode,Ce=0;Ce<256;Ce++)Q[Ce]=ie(Ce)}(),e=I(N,z),t=I(B,G),r=I(J,U),i=I($,F),function(){for(var ie=1,Ce=2,_e=1;_e<=15;_e++){for(var H=ie;H<Ce;H++)v[32767+H]=_e,p[32767+H]=[],p[32767+H][1]=_e,p[32767+H][0]=H;for(var ee=-(Ce-1);ee<=-ie;ee++)v[32767+ee]=_e,p[32767+ee]=[],p[32767+ee][1]=_e,p[32767+ee][0]=Ce-1+ee;ie<<=1,Ce<<=1}}(),function(){for(var ie=0;ie<256;ie++)de[ie]=19595*ie,de[ie+256>>0]=38470*ie,de[ie+512>>0]=7471*ie+32768,de[ie+768>>0]=-11059*ie,de[ie+1024>>0]=-21709*ie,de[ie+1280>>0]=32768*ie+8421375,de[ie+1536>>0]=-27439*ie,de[ie+1792>>0]=-5329*ie}(),He(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function fc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function V5(n){function e(N){if(!N)throw Error("assert :P")}function t(N,z,J){for(var U=0;4>U;U++)if(N[z+U]!=J.charCodeAt(U))return!0;return!1}function r(N,z,J,U,B){for(var G=0;G<B;G++)N[z+G]=J[U+G]}function i(N,z,J,U){for(var B=0;B<U;B++)N[z+B]=J}function s(N){return new Int32Array(N)}function o(N,z){for(var J=[],U=0;U<N;U++)J.push(new z);return J}function a(N,z){var J=[];return function U(B,G,$){for(var F=$[G],I=0;I<F&&(B.push($.length>G+1?[]:new z),!($.length<G+1));I++)U(B[I],G+1,$)}(J,0,N),J}var l=function(){var N=this;function z(w,T){for(var Y=1<<T-1>>>0;w&Y;)Y>>>=1;return Y?(w&Y-1)+Y:w}function J(w,T,Y,ce,Le){e(!(ce%Y));do w[T+(ce-=Y)]=Le;while(0<ce)}function U(w,T,Y,ce,Le){if(e(2328>=Le),512>=Le)var ke=s(512);else if((ke=s(Le))==null)return 0;return function(Oe,Be,ze,Ze,gt,Ft){var jt,Mt,Qt=Be,Wt=1<<ze,mt=s(16),xt=s(16);for(e(gt!=0),e(Ze!=null),e(Oe!=null),e(0<ze),Mt=0;Mt<gt;++Mt){if(15<Ze[Mt])return 0;++mt[Ze[Mt]]}if(mt[0]==gt)return 0;for(xt[1]=0,jt=1;15>jt;++jt){if(mt[jt]>1<<jt)return 0;xt[jt+1]=xt[jt]+mt[jt]}for(Mt=0;Mt<gt;++Mt)jt=Ze[Mt],0<Ze[Mt]&&(Ft[xt[jt]++]=Mt);if(xt[15]==1)return(Ze=new B).g=0,Ze.value=Ft[0],J(Oe,Qt,1,Wt,Ze),Wt;var nn,hn=-1,sn=Wt-1,Dn=0,An=1,Jn=1,d=1<<ze;for(Mt=0,jt=1,gt=2;jt<=ze;++jt,gt<<=1){if(An+=Jn<<=1,0>(Jn-=mt[jt]))return 0;for(;0<mt[jt];--mt[jt])(Ze=new B).g=jt,Ze.value=Ft[Mt++],J(Oe,Qt+Dn,gt,d,Ze),Dn=z(Dn,jt)}for(jt=ze+1,gt=2;15>=jt;++jt,gt<<=1){if(An+=Jn<<=1,0>(Jn-=mt[jt]))return 0;for(;0<mt[jt];--mt[jt]){if(Ze=new B,(Dn&sn)!=hn){for(Qt+=d,nn=1<<(hn=jt)-ze;15>hn&&!(0>=(nn-=mt[hn]));)++hn,nn<<=1;Wt+=d=1<<(nn=hn-ze),Oe[Be+(hn=Dn&sn)].g=nn+ze,Oe[Be+hn].value=Qt-Be-hn}Ze.g=jt-ze,Ze.value=Ft[Mt++],J(Oe,Qt+(Dn>>ze),gt,d,Ze),Dn=z(Dn,jt)}}return An!=2*xt[15]-1?0:Wt}(w,T,Y,ce,Le,ke)}function B(){this.value=this.g=0}function G(){this.value=this.g=0}function $(){this.G=o(5,B),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(hs,G)}function F(w,T,Y,ce){e(w!=null),e(T!=null),e(2147483648>ce),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=T,w.pa=Y,w.Jd=T,w.Yc=Y+ce,w.Zc=4<=ce?Y+ce-4+1:Y,pe(w)}function I(w,T){for(var Y=0;0<T--;)Y|=ae(w,128)<<T;return Y}function X(w,T){var Y=I(w,T);return re(w)?-Y:Y}function K(w,T,Y,ce){var Le,ke=0;for(e(w!=null),e(T!=null),e(4294967288>ce),w.Sb=ce,w.Ra=0,w.u=0,w.h=0,4<ce&&(ce=4),Le=0;Le<ce;++Le)ke+=T[Y+Le]<<8*Le;w.Ra=ke,w.bb=ce,w.oa=T,w.pa=Y}function ve(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<_o-8>>>0,++w.bb,w.u-=8;_e(w)&&(w.h=1,w.u=0)}function ge(w,T){if(e(0<=T),!w.h&&T<=jo){var Y=Ce(w)&ba[T];return w.u+=T,ve(w),Y}return w.h=1,w.u=0}function He(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ie(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ce(w){return w.Ra>>>(w.u&_o-1)>>>0}function _e(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>_o}function H(w,T){w.u=T,w.h=_e(w)}function ee(w){w.u>=Nl&&(e(w.u>=Nl),ve(w))}function pe(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function re(w){return I(w,1)}function ae(w,T){var Y=w.Ca;0>w.b&&pe(w);var ce=w.b,Le=Y*T>>>8,ke=(w.I>>>ce>Le)+0;for(ke?(Y-=Le,w.I-=Le+1<<ce>>>0):Y=Le+1,ce=Y,Le=0;256<=ce;)Le+=8,ce>>=8;return ce=7^Le+Hs[ce],w.b-=ce,w.Ca=(Y<<ce)-1,ke}function De(w,T,Y){w[T+0]=Y>>24&255,w[T+1]=Y>>16&255,w[T+2]=Y>>8&255,w[T+3]=Y>>0&255}function be(w,T){return w[T+0]<<0|w[T+1]<<8}function Ie(w,T){return be(w,T)|w[T+2]<<16}function le(w,T){return be(w,T)|be(w,T+2)<<16}function me(w,T){var Y=1<<T;return e(w!=null),e(0<T),w.X=s(Y),w.X==null?0:(w.Mb=32-T,w.Xa=T,1)}function oe(w,T){e(w!=null),e(T!=null),e(w.Xa==T.Xa),r(T.X,0,w.X,0,1<<T.Xa)}function Z(){this.X=[],this.Xa=this.Mb=0}function Ae(w,T,Y,ce){e(Y!=null),e(ce!=null);var Le=Y[0],ke=ce[0];return Le==0&&(Le=(w*ke+T/2)/T),ke==0&&(ke=(T*Le+w/2)/w),0>=Le||0>=ke?0:(Y[0]=Le,ce[0]=ke,1)}function je(w,T){return w+(1<<T)-1>>>T}function Ke(w,T){return((4278255360&w)+(4278255360&T)>>>0&4278255360)+((16711935&w)+(16711935&T)>>>0&16711935)>>>0}function Me(w,T){N[T]=function(Y,ce,Le,ke,Oe,Be,ze){var Ze;for(Ze=0;Ze<Oe;++Ze){var gt=N[w](Be[ze+Ze-1],Le,ke+Ze);Be[ze+Ze]=Ke(Y[ce+Ze],gt)}}}function he(){this.ud=this.hd=this.jd=0}function We(w,T){return((4278124286&(w^T))>>>1)+(w&T)>>>0}function at(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function ut(w,T){return at(w+(w-T+.5>>1))}function Ct(w,T,Y){return Math.abs(T-Y)-Math.abs(w-Y)}function Xe(w,T,Y,ce,Le,ke,Oe){for(ce=ke[Oe-1],Y=0;Y<Le;++Y)ke[Oe+Y]=ce=Ke(w[T+Y],ce)}function zt(w,T,Y,ce,Le){var ke;for(ke=0;ke<Y;++ke){var Oe=w[T+ke],Be=Oe>>8&255,ze=16711935&(ze=(ze=16711935&Oe)+((Be<<16)+Be));ce[Le+ke]=(4278255360&Oe)+ze>>>0}}function qt(w,T){T.jd=w>>0&255,T.hd=w>>8&255,T.ud=w>>16&255}function Qe(w,T,Y,ce,Le,ke){var Oe;for(Oe=0;Oe<ce;++Oe){var Be=T[Y+Oe],ze=Be>>>8,Ze=Be,gt=255&(gt=(gt=Be>>>16)+((w.jd<<24>>24)*(ze<<24>>24)>>>5));Ze=255&(Ze=(Ze=Ze+((w.hd<<24>>24)*(ze<<24>>24)>>>5))+((w.ud<<24>>24)*(gt<<24>>24)>>>5)),Le[ke+Oe]=(4278255360&Be)+(gt<<16)+Ze}}function ot(w,T,Y,ce,Le){N[T]=function(ke,Oe,Be,ze,Ze,gt,Ft,jt,Mt){for(ze=Ft;ze<jt;++ze)for(Ft=0;Ft<Mt;++Ft)Ze[gt++]=Le(Be[ce(ke[Oe++])])},N[w]=function(ke,Oe,Be,ze,Ze,gt,Ft){var jt=8>>ke.b,Mt=ke.Ea,Qt=ke.K[0],Wt=ke.w;if(8>jt)for(ke=(1<<ke.b)-1,Wt=(1<<jt)-1;Oe<Be;++Oe){var mt,xt=0;for(mt=0;mt<Mt;++mt)mt&ke||(xt=ce(ze[Ze++])),gt[Ft++]=Le(Qt[xt&Wt]),xt>>=jt}else N["VP8LMapColor"+Y](ze,Ze,Qt,Wt,gt,Ft,Oe,Be,Mt)}}function it(w,T,Y,ce,Le){for(Y=T+Y;T<Y;){var ke=w[T++];ce[Le++]=ke>>16&255,ce[Le++]=ke>>8&255,ce[Le++]=ke>>0&255}}function At(w,T,Y,ce,Le){for(Y=T+Y;T<Y;){var ke=w[T++];ce[Le++]=ke>>16&255,ce[Le++]=ke>>8&255,ce[Le++]=ke>>0&255,ce[Le++]=ke>>24&255}}function Yt(w,T,Y,ce,Le){for(Y=T+Y;T<Y;){var ke=(Oe=w[T++])>>16&240|Oe>>12&15,Oe=Oe>>0&240|Oe>>28&15;ce[Le++]=ke,ce[Le++]=Oe}}function bn(w,T,Y,ce,Le){for(Y=T+Y;T<Y;){var ke=(Oe=w[T++])>>16&248|Oe>>13&7,Oe=Oe>>5&224|Oe>>3&31;ce[Le++]=ke,ce[Le++]=Oe}}function xn(w,T,Y,ce,Le){for(Y=T+Y;T<Y;){var ke=w[T++];ce[Le++]=ke>>0&255,ce[Le++]=ke>>8&255,ce[Le++]=ke>>16&255}}function En(w,T,Y,ce,Le,ke){if(ke==0)for(Y=T+Y;T<Y;)De(ce,((ke=w[T++])[0]>>24|ke[1]>>8&65280|ke[2]<<8&16711680|ke[3]<<24)>>>0),Le+=32;else r(ce,Le,w,T,Y)}function $n(w,T){N[T][0]=N[w+"0"],N[T][1]=N[w+"1"],N[T][2]=N[w+"2"],N[T][3]=N[w+"3"],N[T][4]=N[w+"4"],N[T][5]=N[w+"5"],N[T][6]=N[w+"6"],N[T][7]=N[w+"7"],N[T][8]=N[w+"8"],N[T][9]=N[w+"9"],N[T][10]=N[w+"10"],N[T][11]=N[w+"11"],N[T][12]=N[w+"12"],N[T][13]=N[w+"13"],N[T][14]=N[w+"0"],N[T][15]=N[w+"0"]}function Sn(w){return w==Os||w==Ns||w==ua||w==c}function an(){this.eb=[],this.size=this.A=this.fb=0}function mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function tr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new an,this.f.kb=new mn,this.sd=null}function ar(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function mr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function zn(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function kr(w,T){var Y=w.T,ce=T.ba.f.RGBA,Le=ce.eb,ke=ce.fb+w.ka*ce.A,Oe=Zs[T.ba.S],Be=w.y,ze=w.O,Ze=w.f,gt=w.N,Ft=w.ea,jt=w.W,Mt=T.cc,Qt=T.dc,Wt=T.Mc,mt=T.Nc,xt=w.ka,nn=w.ka+w.T,hn=w.U,sn=hn+1>>1;for(xt==0?Oe(Be,ze,null,null,Ze,gt,Ft,jt,Ze,gt,Ft,jt,Le,ke,null,null,hn):(Oe(T.ec,T.fc,Be,ze,Mt,Qt,Wt,mt,Ze,gt,Ft,jt,Le,ke-ce.A,Le,ke,hn),++Y);xt+2<nn;xt+=2)Mt=Ze,Qt=gt,Wt=Ft,mt=jt,gt+=w.Rc,jt+=w.Rc,ke+=2*ce.A,Oe(Be,(ze+=2*w.fa)-w.fa,Be,ze,Mt,Qt,Wt,mt,Ze,gt,Ft,jt,Le,ke-ce.A,Le,ke,hn);return ze+=w.fa,w.j+nn<w.o?(r(T.ec,T.fc,Be,ze,hn),r(T.cc,T.dc,Ze,gt,sn),r(T.Mc,T.Nc,Ft,jt,sn),Y--):1&nn||Oe(Be,ze,null,null,Ze,gt,Ft,jt,Ze,gt,Ft,jt,Le,ke+ce.A,null,null,hn),Y}function as(w,T,Y){var ce=w.F,Le=[w.J];if(ce!=null){var ke=w.U,Oe=T.ba.S,Be=Oe==la||Oe==ua;T=T.ba.f.RGBA;var ze=[0],Ze=w.ka;ze[0]=w.T,w.Kb&&(Ze==0?--ze[0]:(--Ze,Le[0]-=w.width),w.j+w.ka+w.T==w.o&&(ze[0]=w.o-w.j-Ze));var gt=T.eb;Ze=T.fb+Ze*T.A,w=vi(ce,Le[0],w.width,ke,ze,gt,Ze+(Be?0:3),T.A),e(Y==ze),w&&Sn(Oe)&&Ds(gt,Ze,Be,ke,ze,T.A)}return 0}function Ni(w){var T=w.ma,Y=T.ba.S,ce=11>Y,Le=Y==hr||Y==$a||Y==la||Y==uo||Y==12||Sn(Y);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!tc(T.Oa,w,Le?11:12))return 0;if(Le&&Sn(Y)&&dn(),w.da)alert("todo:use_scaling");else{if(ce){if(T.Ib=zn,w.Kb){if(Y=w.U+1>>1,T.memory=s(w.U+2*Y),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+w.U,T.Mc=T.cc,T.Nc=T.dc+Y,T.Ib=kr,dn()}}else alert("todo:EmitYUV");Le&&(T.Jb=as,ce&&Pt())}if(ce&&!Ic){for(w=0;256>w;++w)Wd[w]=89858*(w-128)+pl>>Gd,qd[w]=-22014*(w-128)+pl,Wp[w]=-45773*(w-128),hu[w]=113618*(w-128)+pl>>Gd;for(w=dd;w<Nh;++w)T=76283*(w-16)+pl>>Gd,Yd[w-dd]=Ir(T,255),Tf[w-dd]=Ir(T+8>>4,15);Ic=1}return 1}function io(w){var T=w.ma,Y=w.U,ce=w.T;return e(!(1&w.ka)),0>=Y||0>=ce?0:(Y=T.Ib(w,T),T.Jb!=null&&T.Jb(w,T,Y),T.Dc+=Y,1)}function Ps(w){w.ma.memory=null}function Zn(w,T,Y,ce){return ge(w,8)!=47?0:(T[0]=ge(w,14)+1,Y[0]=ge(w,14)+1,ce[0]=ge(w,1),ge(w,3)!=0?0:!w.h)}function bt(w,T){if(4>w)return w+1;var Y=w-2>>1;return(2+(1&w)<<Y)+ge(T,Y)+1}function rt(w,T){return 120<T?T-120:1<=(Y=((Y=ct[T-1])>>4)*w+(8-(15&Y)))?Y:1;var Y}function Vt(w,T,Y){var ce=Ce(Y),Le=w[T+=255&ce].g-8;return 0<Le&&(H(Y,Y.u+8),ce=Ce(Y),T+=w[T].value,T+=ce&(1<<Le)-1),H(Y,Y.u+w[T].g),w[T].value}function Ln(w,T,Y){return Y.g+=w.g,Y.value+=w.value<<T>>>0,e(8>=Y.g),w.g}function Kt(w,T,Y){var ce=w.xc;return e((T=ce==0?0:w.vc[w.md*(Y>>ce)+(T>>ce)])<w.Wb),w.Ya[T]}function rn(w,T,Y,ce){var Le=w.ab,ke=w.c*T,Oe=w.C;T=Oe+T;var Be=Y,ze=ce;for(ce=w.Ta,Y=w.Ua;0<Le--;){var Ze=w.gc[Le],gt=Oe,Ft=T,jt=Be,Mt=ze,Qt=(ze=ce,Be=Y,Ze.Ea);switch(e(gt<Ft),e(Ft<=Ze.nc),Ze.hc){case 2:Nc(jt,Mt,(Ft-gt)*Qt,ze,Be);break;case 0:var Wt=gt,mt=Ft,xt=ze,nn=Be,hn=(d=Ze).Ea;Wt==0&&(oo(jt,Mt,null,null,1,xt,nn),Xe(jt,Mt+1,0,0,hn-1,xt,nn+1),Mt+=hn,nn+=hn,++Wt);for(var sn=1<<d.b,Dn=sn-1,An=je(hn,d.b),Jn=d.K,d=d.w+(Wt>>d.b)*An;Wt<mt;){var g=Jn,_=d,S=1;for(ao(jt,Mt,xt,nn-hn,1,xt,nn);S<hn;){var P=(S&~Dn)+sn;P>hn&&(P=hn),(0,Ra[g[_++]>>8&15])(jt,Mt+ +S,xt,nn+S-hn,P-S,xt,nn+S),S=P}Mt+=hn,nn+=hn,++Wt&Dn||(d+=An)}Ft!=Ze.nc&&r(ze,Be-Qt,ze,Be+(Ft-gt-1)*Qt,Qt);break;case 1:for(Qt=jt,mt=Mt,hn=(jt=Ze.Ea)-(nn=jt&~(xt=(Mt=1<<Ze.b)-1)),Wt=je(jt,Ze.b),sn=Ze.K,Ze=Ze.w+(gt>>Ze.b)*Wt;gt<Ft;){for(Dn=sn,An=Ze,Jn=new he,d=mt+nn,g=mt+jt;mt<d;)qt(Dn[An++],Jn),Fa(Jn,Qt,mt,Mt,ze,Be),mt+=Mt,Be+=Mt;mt<g&&(qt(Dn[An++],Jn),Fa(Jn,Qt,mt,hn,ze,Be),mt+=hn,Be+=hn),++gt&xt||(Ze+=Wt)}break;case 3:if(jt==ze&&Mt==Be&&0<Ze.b){for(mt=ze,jt=Qt=Be+(Ft-gt)*Qt-(nn=(Ft-gt)*je(Ze.Ea,Ze.b)),Mt=ze,xt=Be,Wt=[],nn=(hn=nn)-1;0<=nn;--nn)Wt[nn]=Mt[xt+nn];for(nn=hn-1;0<=nn;--nn)mt[jt+nn]=Wt[nn];ws(Ze,gt,Ft,ze,Qt,ze,Be)}else ws(Ze,gt,Ft,jt,Mt,ze,Be)}Be=ce,ze=Y}ze!=Y&&r(ce,Y,Be,ze,ke)}function Zt(w,T){var Y=w.V,ce=w.Ba+w.c*w.C,Le=T-w.C;if(e(T<=w.l.o),e(16>=Le),0<Le){var ke=w.l,Oe=w.Ta,Be=w.Ua,ze=ke.width;if(rn(w,Le,Y,ce),Le=Be=[Be],e((Y=w.C)<(ce=T)),e(ke.v<ke.va),ce>ke.o&&(ce=ke.o),Y<ke.j){var Ze=ke.j-Y;Y=ke.j,Le[0]+=Ze*ze}if(Y>=ce?Y=0:(Le[0]+=4*ke.v,ke.ka=Y-ke.j,ke.U=ke.va-ke.v,ke.T=ce-Y,Y=1),Y){if(Be=Be[0],11>(Y=w.ca).S){var gt=Y.f.RGBA,Ft=(ce=Y.S,Le=ke.U,ke=ke.T,Ze=gt.eb,gt.A),jt=ke;for(gt=gt.fb+w.Ma*gt.A;0<jt--;){var Mt=Oe,Qt=Be,Wt=Le,mt=Ze,xt=gt;switch(ce){case xo:qs(Mt,Qt,Wt,mt,xt);break;case hr:Ts(Mt,Qt,Wt,mt,xt);break;case Os:Ts(Mt,Qt,Wt,mt,xt),Ds(mt,xt,0,Wt,1,0);break;case za:Ys(Mt,Qt,Wt,mt,xt);break;case $a:En(Mt,Qt,Wt,mt,xt,1);break;case Ns:En(Mt,Qt,Wt,mt,xt,1),Ds(mt,xt,0,Wt,1,0);break;case la:En(Mt,Qt,Wt,mt,xt,0);break;case ua:En(Mt,Qt,Wt,mt,xt,0),Ds(mt,xt,1,Wt,1,0);break;case uo:_a(Mt,Qt,Wt,mt,xt);break;case c:_a(Mt,Qt,Wt,mt,xt),fi(mt,xt,Wt,1,0);break;case ud:zo(Mt,Qt,Wt,mt,xt);break;default:e(0)}Be+=ze,gt+=Ft}w.Ma+=ke}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=Y.height)}}w.C=T,e(w.C<=w.i)}function qn(w){var T;if(0<w.ua)return 0;for(T=0;T<w.Wb;++T){var Y=w.Ya[T].G,ce=w.Ya[T].H;if(0<Y[1][ce[1]+0].g||0<Y[2][ce[2]+0].g||0<Y[3][ce[3]+0].g)return 0}return 1}function St(w,T,Y,ce,Le,ke){if(w.Z!=0){var Oe=w.qd,Be=w.rd;for(e(ii[w.Z]!=null);T<Y;++T)ii[w.Z](Oe,Be,ce,Le,ce,Le,ke),Oe=ce,Be=Le,Le+=ke;w.qd=Oe,w.rd=Be}}function gn(w,T){var Y=w.l.ma,ce=Y.Z==0||Y.Z==1?w.l.j:w.C;if(ce=w.C<ce?ce:w.C,e(T<=w.l.o),T>ce){var Le=w.l.width,ke=Y.ca,Oe=Y.tb+Le*ce,Be=w.V,ze=w.Ba+w.c*ce,Ze=w.gc;e(w.ab==1),e(Ze[0].hc==3),Gs(Ze[0],ce,T,Be,ze,ke,Oe),St(Y,ce,T,ke,Oe,Le)}w.C=w.Ma=T}function nr(w,T,Y,ce,Le,ke,Oe){var Be=w.$/ce,ze=w.$%ce,Ze=w.m,gt=w.s,Ft=Y+w.$,jt=Ft;Le=Y+ce*Le;var Mt=Y+ce*ke,Qt=280+gt.ua,Wt=w.Pb?Be:16777216,mt=0<gt.ua?gt.Wa:null,xt=gt.wc,nn=Ft<Mt?Kt(gt,ze,Be):null;e(w.C<ke),e(Mt<=Le);var hn=!1;e:for(;;){for(;hn||Ft<Mt;){var sn=0;if(Be>=Wt){var Dn=Ft-Y;e((Wt=w).Pb),Wt.wd=Wt.m,Wt.xd=Dn,0<Wt.s.ua&&oe(Wt.s.Wa,Wt.s.vb),Wt=Be+Gt}if(ze&xt||(nn=Kt(gt,ze,Be)),e(nn!=null),nn.Qb&&(T[Ft]=nn.qb,hn=!0),!hn)if(ee(Ze),nn.jc){sn=Ze,Dn=T;var An=Ft,Jn=nn.pd[Ce(sn)&hs-1];e(nn.jc),256>Jn.g?(H(sn,sn.u+Jn.g),Dn[An]=Jn.value,sn=0):(H(sn,sn.u+Jn.g-256),e(256<=Jn.value),sn=Jn.value),sn==0&&(hn=!0)}else sn=Vt(nn.G[0],nn.H[0],Ze);if(Ze.h)break;if(hn||256>sn){if(!hn)if(nn.nd)T[Ft]=(nn.qb|sn<<8)>>>0;else{if(ee(Ze),hn=Vt(nn.G[1],nn.H[1],Ze),ee(Ze),Dn=Vt(nn.G[2],nn.H[2],Ze),An=Vt(nn.G[3],nn.H[3],Ze),Ze.h)break;T[Ft]=(An<<24|hn<<16|sn<<8|Dn)>>>0}if(hn=!1,++Ft,++ze>=ce&&(ze=0,++Be,Oe!=null&&Be<=ke&&!(Be%16)&&Oe(w,Be),mt!=null))for(;jt<Ft;)sn=T[jt++],mt.X[(506832829*sn&4294967295)>>>mt.Mb]=sn}else if(280>sn){if(sn=bt(sn-256,Ze),Dn=Vt(nn.G[4],nn.H[4],Ze),ee(Ze),Dn=rt(ce,Dn=bt(Dn,Ze)),Ze.h)break;if(Ft-Y<Dn||Le-Ft<sn)break e;for(An=0;An<sn;++An)T[Ft+An]=T[Ft+An-Dn];for(Ft+=sn,ze+=sn;ze>=ce;)ze-=ce,++Be,Oe!=null&&Be<=ke&&!(Be%16)&&Oe(w,Be);if(e(Ft<=Le),ze&xt&&(nn=Kt(gt,ze,Be)),mt!=null)for(;jt<Ft;)sn=T[jt++],mt.X[(506832829*sn&4294967295)>>>mt.Mb]=sn}else{if(!(sn<Qt))break e;for(hn=sn-280,e(mt!=null);jt<Ft;)sn=T[jt++],mt.X[(506832829*sn&4294967295)>>>mt.Mb]=sn;sn=Ft,e(!(hn>>>(Dn=mt).Xa)),T[sn]=Dn.X[hn],hn=!0}hn||e(Ze.h==_e(Ze))}if(w.Pb&&Ze.h&&Ft<Le)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&oe(w.s.vb,w.s.Wa);else{if(Ze.h)break e;Oe!=null&&Oe(w,Be>ke?ke:Be),w.a=0,w.$=Ft-Y}return 1}return w.a=3,0}function Vn(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var T=w.Wa;T!=null&&(T.X=null),w.vb=null,e(w!=null)}function dr(){var w=new Tl;return w==null?null:(w.a=0,w.xb=Du,$n("Predictor","VP8LPredictors"),$n("Predictor","VP8LPredictors_C"),$n("PredictorAdd","VP8LPredictorsAdd"),$n("PredictorAdd","VP8LPredictorsAdd_C"),Nc=zt,Fa=Qe,qs=it,Ts=At,_a=Yt,zo=bn,Ys=xn,N.VP8LMapColor32b=Ba,N.VP8LMapColor8b=Ws,w)}function Cn(w,T,Y,ce,Le){var ke=1,Oe=[w],Be=[T],ze=ce.m,Ze=ce.s,gt=null,Ft=0;e:for(;;){if(Y)for(;ke&&ge(ze,1);){var jt=Oe,Mt=Be,Qt=ce,Wt=1,mt=Qt.m,xt=Qt.gc[Qt.ab],nn=ge(mt,2);if(Qt.Oc&1<<nn)ke=0;else{switch(Qt.Oc|=1<<nn,xt.hc=nn,xt.Ea=jt[0],xt.nc=Mt[0],xt.K=[null],++Qt.ab,e(4>=Qt.ab),nn){case 0:case 1:xt.b=ge(mt,3)+2,Wt=Cn(je(xt.Ea,xt.b),je(xt.nc,xt.b),0,Qt,xt.K),xt.K=xt.K[0];break;case 3:var hn,sn=ge(mt,8)+1,Dn=16<sn?0:4<sn?1:2<sn?2:3;if(jt[0]=je(xt.Ea,Dn),xt.b=Dn,hn=Wt=Cn(sn,1,0,Qt,xt.K)){var An,Jn=sn,d=xt,g=1<<(8>>d.b),_=s(g);if(_==null)hn=0;else{var S=d.K[0],P=d.w;for(_[0]=d.K[0][0],An=1;An<1*Jn;++An)_[An]=Ke(S[P+An],_[An-1]);for(;An<4*g;++An)_[An]=0;d.K[0]=null,d.K[0]=_,hn=1}}Wt=hn;break;case 2:break;default:e(0)}ke=Wt}}if(Oe=Oe[0],Be=Be[0],ke&&ge(ze,1)&&!(ke=1<=(Ft=ge(ze,4))&&11>=Ft)){ce.a=3;break e}var V;if(V=ke)t:{var te,se,ye,Ee=ce,nt=Oe,Ye=Be,_t=Ft,Bt=Y,tn=Ee.m,_n=Ee.s,Mn=[null],cr=1,tt=0,st=Nt[_t];n:for(;;){if(Bt&&ge(tn,1)){var pt=ge(tn,3)+2,$t=je(nt,pt),Et=je(Ye,pt),Rt=$t*Et;if(!Cn($t,Et,0,Ee,Mn))break n;for(Mn=Mn[0],_n.xc=pt,te=0;te<Rt;++te){var we=Mn[te]>>8&65535;Mn[te]=we,we>=cr&&(cr=we+1)}}if(tn.h)break n;for(se=0;5>se;++se){var Te=q[se];!se&&0<_t&&(Te+=1<<_t),tt<Te&&(tt=Te)}var Ue=o(cr*st,B),$e=cr,Ge=o($e,$);if(Ge==null)var qe=null;else e(65536>=$e),qe=Ge;var dt=s(tt);if(qe==null||dt==null||Ue==null){Ee.a=1;break n}var ht=Ue;for(te=ye=0;te<cr;++te){var vt=qe[te],Tt=vt.G,Dt=vt.H,on=0,Fn=1,Un=0;for(se=0;5>se;++se){Te=q[se],Tt[se]=ht,Dt[se]=ye,!se&&0<_t&&(Te+=1<<_t);i:{var Qn,si=Te,yi=Ee,Hr=dt,Pi=ht,So=ye,ic=0,Ma=yi.m,Ih=ge(Ma,1);if(i(Hr,0,0,si),Ih){var gl=ge(Ma,1)+1,Bc=ge(Ma,1),Pa=ge(Ma,Bc==0?1:8);Hr[Pa]=1,gl==2&&(Hr[Pa=ge(Ma,8)]=1);var Xs=1}else{var rs=s(19),Bf=ge(Ma,4)+4;if(19<Bf){yi.a=3;var Bh=0;break i}for(Qn=0;Qn<Bf;++Qn)rs[Pe[Qn]]=ge(Ma,3);var Rh=void 0,Fh=void 0,Rf=yi,Jr=rs,Ff=si,Hm=Hr,hd=0,sc=Rf.m,Gm=8,Wm=o(128,B);r:for(;U(Wm,0,7,Jr,19);){if(ge(sc,1)){var Il=2+2*ge(sc,3);if((Rh=2+ge(sc,Il))>Ff)break r}else Rh=Ff;for(Fh=0;Fh<Ff&&Rh--;){ee(sc);var qm=Wm[0+(127&Ce(sc))];H(sc,sc.u+qm.g);var oc=qm.value;if(16>oc)Hm[Fh++]=oc,oc!=0&&(Gm=oc);else{var qp=oc==16,Yp=oc-16,Ym=M[Yp],Va=ge(sc,y[Yp])+Ym;if(Fh+Va>Ff)break r;for(var Rc=qp?Gm:0;0<Va--;)Hm[Fh++]=Rc}}hd=1;break r}hd||(Rf.a=3),Xs=hd}(Xs=Xs&&!Ma.h)&&(ic=U(Pi,So,8,Hr,si)),Xs&&ic!=0?Bh=ic:(yi.a=3,Bh=0)}if(Bh==0)break n;if(Fn&&ue[se]==1&&(Fn=ht[ye].g==0),on+=ht[ye].g,ye+=Bh,3>=se){var fd,jf=dt[0];for(fd=1;fd<Te;++fd)dt[fd]>jf&&(jf=dt[fd]);Un+=jf}}if(vt.nd=Fn,vt.Qb=0,Fn&&(vt.qb=(Tt[3][Dt[3]+0].value<<24|Tt[1][Dt[1]+0].value<<16|Tt[2][Dt[2]+0].value)>>>0,on==0&&256>Tt[0][Dt[0]+0].value&&(vt.Qb=1,vt.qb+=Tt[0][Dt[0]+0].value<<8)),vt.jc=!vt.Qb&&6>Un,vt.jc){var pd,Ou=vt;for(pd=0;pd<hs;++pd){var Nu=pd,ac=Ou.pd[Nu],Kd=Ou.G[0][Ou.H[0]+Nu];256<=Kd.value?(ac.g=Kd.g+256,ac.value=Kd.value):(ac.g=0,ac.value=0,Nu>>=Ln(Kd,8,ac),Nu>>=Ln(Ou.G[1][Ou.H[1]+Nu],16,ac),Nu>>=Ln(Ou.G[2][Ou.H[2]+Nu],0,ac),Ln(Ou.G[3][Ou.H[3]+Nu],24,ac))}}}_n.vc=Mn,_n.Wb=cr,_n.Ya=qe,_n.yc=Ue,V=1;break t}V=0}if(!(ke=V)){ce.a=3;break e}if(0<Ft){if(Ze.ua=1<<Ft,!me(Ze.Wa,Ft)){ce.a=1,ke=0;break e}}else Ze.ua=0;var jh=ce,lc=Oe,n1=Be,Iu=jh.s,zf=Iu.xc;if(jh.c=lc,jh.i=n1,Iu.md=je(lc,zf),Iu.wc=zf==0?-1:(1<<zf)-1,Y){ce.xb=Oh;break e}if((gt=s(Oe*Be))==null){ce.a=1,ke=0;break e}ke=(ke=nr(ce,gt,0,Oe,Be,Be,null))&&!ze.h;break e}return ke?(Le!=null?Le[0]=gt:(e(gt==null),e(Y)),ce.$=0,Y||Vn(Ze)):Vn(Ze),ke}function fn(w,T){var Y=w.c*w.i,ce=Y+T+16*T;return e(w.c<=T),w.V=s(ce),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+Y+T,1)}function li(w,T){var Y=w.C,ce=T-Y,Le=w.V,ke=w.Ba+w.c*Y;for(e(T<=w.l.o);0<ce;){var Oe=16<ce?16:ce,Be=w.l.ma,ze=w.l.width,Ze=ze*Oe,gt=Be.ca,Ft=Be.tb+ze*Y,jt=w.Ta,Mt=w.Ua;rn(w,Oe,Le,ke),ns(jt,Mt,gt,Ft,Ze),St(Be,Y,Y+Oe,gt,Ft,ze),ce-=Oe,Le+=Oe*w.c,Y+=Oe}e(Y==T),w.C=w.Ma=T}function Ci(){this.ub=this.yd=this.td=this.Rb=0}function Si(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Or(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function fr(){this.Yb=function(){var w=[];return function T(Y,ce,Le){for(var ke=Le[ce],Oe=0;Oe<ke&&(Y.push(Le.length>ce+1?[]:0),!(Le.length<ce+1));Oe++)T(Y[Oe],ce+1,Le)}(w,0,[3,11]),w}()}function ls(){this.jb=s(3),this.Wc=a([4,8],fr),this.Xc=a([4,17],fr)}function us(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ai(){this.ld=this.La=this.dd=this.tc=0}function ks(){this.Na=this.la=0}function bs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ki(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zs(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ai),this.Y=0,this.ya=Array(new Ki),this.aa=0,this.l=new br}function Io(){this.y=s(16),this.f=s(8),this.ea=s(8)}function cs(){this.cb=this.a=0,this.sc="",this.m=new He,this.Od=new Ci,this.Kc=new Si,this.ed=new us,this.Qa=new Or,this.Ic=this.$c=this.Aa=0,this.D=new zs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,He),this.ia=0,this.pb=o(4,bs),this.Pa=new ls,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Io),this.Hd=0,this.rb=Array(new ks),this.sb=0,this.wa=Array(new Ai),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ki),this.L=this.aa=0,this.gd=a([4,2],Ai),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function br(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Tr(){var w=new cs;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Xn||(Xn=Ei)),w}function pr(w,T,Y){return w.a==0&&(w.a=T,w.sc=Y,w.cb=0),0}function ea(w,T,Y){return 3<=Y&&w[T+0]==157&&w[T+1]==1&&w[T+2]==42}function lr(w,T){if(w==null)return 0;if(w.a=0,w.sc="OK",T==null)return pr(w,2,"null VP8Io passed to VP8GetHeaders()");var Y=T.data,ce=T.w,Le=T.ha;if(4>Le)return pr(w,7,"Truncated header.");var ke=Y[ce+0]|Y[ce+1]<<8|Y[ce+2]<<16,Oe=w.Od;if(Oe.Rb=!(1&ke),Oe.td=ke>>1&7,Oe.yd=ke>>4&1,Oe.ub=ke>>5,3<Oe.td)return pr(w,3,"Incorrect keyframe parameters.");if(!Oe.yd)return pr(w,4,"Frame not displayable.");ce+=3,Le-=3;var Be=w.Kc;if(Oe.Rb){if(7>Le)return pr(w,7,"cannot parse picture header");if(!ea(Y,ce,Le))return pr(w,3,"Bad code word");Be.c=16383&(Y[ce+4]<<8|Y[ce+3]),Be.Td=Y[ce+4]>>6,Be.i=16383&(Y[ce+6]<<8|Y[ce+5]),Be.Ud=Y[ce+6]>>6,ce+=7,Le-=7,w.za=Be.c+15>>4,w.Ub=Be.i+15>>4,T.width=Be.c,T.height=Be.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,i((ke=w.Pa).jb,0,255,ke.jb.length),e((ke=w.Qa)!=null),ke.Cb=0,ke.Bb=0,ke.Fb=1,i(ke.Zb,0,0,ke.Zb.length),i(ke.Lb,0,0,ke.Lb)}if(Oe.ub>Le)return pr(w,7,"bad partition length");F(ke=w.m,Y,ce,Oe.ub),ce+=Oe.ub,Le-=Oe.ub,Oe.Rb&&(Be.Ld=re(ke),Be.Kd=re(ke)),Be=w.Qa;var ze,Ze=w.Pa;if(e(ke!=null),e(Be!=null),Be.Cb=re(ke),Be.Cb){if(Be.Bb=re(ke),re(ke)){for(Be.Fb=re(ke),ze=0;4>ze;++ze)Be.Zb[ze]=re(ke)?X(ke,7):0;for(ze=0;4>ze;++ze)Be.Lb[ze]=re(ke)?X(ke,6):0}if(Be.Bb)for(ze=0;3>ze;++ze)Ze.jb[ze]=re(ke)?I(ke,8):255}else Be.Bb=0;if(ke.Ka)return pr(w,3,"cannot parse segment header");if((Be=w.ed).zd=re(ke),Be.Tb=I(ke,6),Be.wb=I(ke,3),Be.Pc=re(ke),Be.Pc&&re(ke)){for(Ze=0;4>Ze;++Ze)re(ke)&&(Be.vd[Ze]=X(ke,6));for(Ze=0;4>Ze;++Ze)re(ke)&&(Be.od[Ze]=X(ke,6))}if(w.L=Be.Tb==0?0:Be.zd?1:2,ke.Ka)return pr(w,3,"cannot parse filter header");var gt=Le;if(Le=ze=ce,ce=ze+gt,Be=gt,w.Xb=(1<<I(w.m,2))-1,gt<3*(Ze=w.Xb))Y=7;else{for(ze+=3*Ze,Be-=3*Ze,gt=0;gt<Ze;++gt){var Ft=Y[Le+0]|Y[Le+1]<<8|Y[Le+2]<<16;Ft>Be&&(Ft=Be),F(w.Jc[+gt],Y,ze,Ft),ze+=Ft,Be-=Ft,Le+=3}F(w.Jc[+Ze],Y,ze,Be),Y=ze<ce?0:5}if(Y!=0)return pr(w,Y,"cannot parse partitions");for(Y=I(ze=w.m,7),Le=re(ze)?X(ze,4):0,ce=re(ze)?X(ze,4):0,Be=re(ze)?X(ze,4):0,Ze=re(ze)?X(ze,4):0,ze=re(ze)?X(ze,4):0,gt=w.Qa,Ft=0;4>Ft;++Ft){if(gt.Cb){var jt=gt.Zb[Ft];gt.Fb||(jt+=Y)}else{if(0<Ft){w.pb[Ft]=w.pb[0];continue}jt=Y}var Mt=w.pb[Ft];Mt.Sc[0]=ln[Ir(jt+Le,127)],Mt.Sc[1]=In[Ir(jt+0,127)],Mt.Eb[0]=2*ln[Ir(jt+ce,127)],Mt.Eb[1]=101581*In[Ir(jt+Be,127)]>>16,8>Mt.Eb[1]&&(Mt.Eb[1]=8),Mt.Qc[0]=ln[Ir(jt+Ze,117)],Mt.Qc[1]=In[Ir(jt+ze,127)],Mt.lc=jt+ze}if(!Oe.Rb)return pr(w,4,"Not a key frame.");for(re(ke),Oe=w.Pa,Y=0;4>Y;++Y){for(Le=0;8>Le;++Le)for(ce=0;3>ce;++ce)for(Be=0;11>Be;++Be)Ze=ae(ke,Lo[Y][Le][ce][Be])?I(ke,8):Is[Y][Le][ce][Be],Oe.Wc[Y][Le].Yb[ce][Be]=Ze;for(Le=0;17>Le;++Le)Oe.Xc[Y][Le]=Oe.Wc[Y][cd[Le]]}return w.kc=re(ke),w.kc&&(w.Bd=I(ke,8)),w.cb=1}function Ei(w,T,Y,ce,Le,ke,Oe){var Be=T[Le].Yb[Y];for(Y=0;16>Le;++Le){if(!ae(w,Be[Y+0]))return Le;for(;!ae(w,Be[Y+1]);)if(Be=T[++Le].Yb[0],Y=0,Le==16)return 16;var ze=T[Le+1].Yb;if(ae(w,Be[Y+2])){var Ze=w,gt=0;if(ae(Ze,(jt=Be)[(Ft=Y)+3]))if(ae(Ze,jt[Ft+6])){for(Be=0,Ft=2*(gt=ae(Ze,jt[Ft+8]))+(jt=ae(Ze,jt[Ft+9+gt])),gt=0,jt=Dr[Ft];jt[Be];++Be)gt+=gt+ae(Ze,jt[Be]);gt+=3+(8<<Ft)}else ae(Ze,jt[Ft+7])?(gt=7+2*ae(Ze,165),gt+=ae(Ze,145)):gt=5+ae(Ze,159);else gt=ae(Ze,jt[Ft+4])?3+ae(Ze,jt[Ft+5]):2;Be=ze[2]}else gt=1,Be=ze[1];ze=Oe+ps[Le],0>(Ze=w).b&&pe(Ze);var Ft,jt=Ze.b,Mt=(Ft=Ze.Ca>>1)-(Ze.I>>jt)>>31;--Ze.b,Ze.Ca+=Mt,Ze.Ca|=1,Ze.I-=(Ft+1&Mt)<<jt,ke[ze]=((gt^Mt)-Mt)*ce[(0<Le)+0]}return 16}function Zi(w){var T=w.rb[w.sb-1];T.la=0,T.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function ur(w,T){if(w==null)return 0;if(T==null)return pr(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!lr(w,T))return 0;if(e(w.cb),T.ac==null||T.ac(T)){T.ob&&(w.L=0);var Y=Ua[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=T.v-Y>>4,w.zb=T.j-Y>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=T.o+15+Y>>4,w.Hb=T.va+15+Y>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ce=w.ed;for(Y=0;4>Y;++Y){var Le;if(w.Qa.Cb){var ke=w.Qa.Lb[Y];w.Qa.Fb||(ke+=ce.Tb)}else ke=ce.Tb;for(Le=0;1>=Le;++Le){var Oe=w.gd[Y][Le],Be=ke;if(ce.Pc&&(Be+=ce.vd[0],Le&&(Be+=ce.od[0])),0<(Be=0>Be?0:63<Be?63:Be)){var ze=Be;0<ce.wb&&(ze=4<ce.wb?ze>>2:ze>>1)>9-ce.wb&&(ze=9-ce.wb),1>ze&&(ze=1),Oe.dd=ze,Oe.tc=2*Be+ze,Oe.ld=40<=Be?2:15<=Be?1:0}else Oe.tc=0;Oe.La=Le}}}Y=0}else pr(w,6,"Frame setup failed"),Y=w.a;if(Y=Y==0){if(Y){w.$c=0,0<w.Aa||(w.Ic=Nf);e:{Y=w.Ic,ce=4*(ze=w.za);var Ze=32*ze,gt=ze+1,Ft=0<w.L?ze*(0<w.Aa?2:1):0,jt=(w.Aa==2?2:1)*ze;if((Oe=ce+832+(Le=3*(16*Y+Ua[w.L])/2*Ze)+(ke=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Oe)Y=0;else{if(Oe>w.Vb){if(w.Vb=0,w.Ec=s(Oe),w.Fc=0,w.Ec==null){Y=pr(w,1,"no memory during frame initialization.");break e}w.Vb=Oe}Oe=w.Ec,Be=w.Fc,w.Ac=Oe,w.Bc=Be,Be+=ce,w.Gd=o(Ze,Io),w.Hd=0,w.rb=o(gt+1,ks),w.sb=1,w.wa=Ft?o(Ft,Ai):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=ze),e(!0),w.oc=Oe,w.pc=Be,Be+=832,w.ya=o(jt,Ki),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=ze),w.R=16*ze,w.B=8*ze,ze=(Ze=Ua[w.L])*w.R,Ze=Ze/2*w.B,w.sa=Oe,w.ta=Be+ze,w.qa=w.sa,w.ra=w.ta+16*Y*w.R+Ze,w.Ha=w.qa,w.Ia=w.ra+8*Y*w.B+Ze,w.$c=0,Be+=Le,w.mb=ke?Oe:null,w.nb=ke?Be:null,e(Be+ke<=w.Fc+w.Vb),Zi(w),i(w.Ac,w.Bc,0,ce),Y=1}}if(Y){if(T.ka=0,T.y=w.sa,T.O=w.ta,T.f=w.qa,T.N=w.ra,T.ea=w.Ha,T.Vd=w.Ia,T.fa=w.R,T.Rc=w.B,T.F=null,T.J=0,!nc){for(Y=-255;255>=Y;++Y)Mi[255+Y]=0>Y?-Y:Y;for(Y=-1020;1020>=Y;++Y)$o[1020+Y]=-128>Y?-128:127<Y?127:Y;for(Y=-112;112>=Y;++Y)wo[112+Y]=-16>Y?-16:15<Y?15:Y;for(Y=-255;510>=Y;++Y)Wo[255+Y]=0>Y?0:255<Y?255:Y;nc=1}Lt=al,Xt=El,Tn=Da,Yn=Hi,yr=ta,It=Xu,Bi=Au,hi=va,du=Go,lo=uu,Ri=au,wa=lu,ja=ui,xa=Oc,La=Ji,Ca=sr,Vr=Qi,aa=Al,ca[0]=Xr,ca[1]=Eu,ca[2]=xr,ca[3]=ra,ca[4]=Qu,ca[5]=Pl,ca[6]=Ml,ca[7]=ia,ca[8]=ec,ca[9]=cl,Ea[0]=ru,Ea[1]=Ju,Ea[2]=na,Ea[3]=Oa,Ea[4]=_s,Ea[5]=Tc,Ea[6]=Mu,qo[0]=dl,qo[1]=ll,qo[2]=iu,qo[3]=_r,qo[4]=su,qo[5]=Dc,qo[6]=Pu,Y=1}else Y=0}Y&&(Y=function(Mt,Qt){for(Mt.M=0;Mt.M<Mt.Va;++Mt.M){var Wt,mt=Mt.Jc[Mt.M&Mt.Xb],xt=Mt.m,nn=Mt;for(Wt=0;Wt<nn.za;++Wt){var hn=xt,sn=nn,Dn=sn.Ac,An=sn.Bc+4*Wt,Jn=sn.zc,d=sn.ya[sn.aa+Wt];if(sn.Qa.Bb?d.$b=ae(hn,sn.Pa.jb[0])?2+ae(hn,sn.Pa.jb[2]):ae(hn,sn.Pa.jb[1]):d.$b=0,sn.kc&&(d.Ad=ae(hn,sn.Bd)),d.Za=!ae(hn,145)+0,d.Za){var g=d.Ob,_=0;for(sn=0;4>sn;++sn){var S,P=Jn[0+sn];for(S=0;4>S;++S){P=Fi[Dn[An+S]][P];for(var V=Gi[ae(hn,P[0])];0<V;)V=Gi[2*V+ae(hn,P[V])];P=-V,Dn[An+S]=P}r(g,_,Dn,An,4),_+=4,Jn[0+sn]=P}}else P=ae(hn,156)?ae(hn,128)?1:3:ae(hn,163)?2:0,d.Ob[0]=P,i(Dn,An,P,4),i(Jn,0,P,4);d.Dd=ae(hn,142)?ae(hn,114)?ae(hn,183)?1:3:2:0}if(nn.m.Ka)return pr(Mt,7,"Premature end-of-partition0 encountered.");for(;Mt.ja<Mt.za;++Mt.ja){if(nn=mt,hn=(xt=Mt).rb[xt.sb-1],Dn=xt.rb[xt.sb+xt.ja],Wt=xt.ya[xt.aa+xt.ja],An=xt.kc?Wt.Ad:0)hn.la=Dn.la=0,Wt.Za||(hn.Na=Dn.Na=0),Wt.Hc=0,Wt.Gc=0,Wt.ia=0;else{var te,se;if(hn=Dn,Dn=nn,An=xt.Pa.Xc,Jn=xt.ya[xt.aa+xt.ja],d=xt.pb[Jn.$b],sn=Jn.ad,g=0,_=xt.rb[xt.sb-1],P=S=0,i(sn,g,0,384),Jn.Za)var ye=0,Ee=An[3];else{V=s(16);var nt=hn.Na+_.Na;if(nt=Xn(Dn,An[1],nt,d.Eb,0,V,0),hn.Na=_.Na=(0<nt)+0,1<nt)Lt(V,0,sn,g);else{var Ye=V[0]+3>>3;for(V=0;256>V;V+=16)sn[g+V]=Ye}ye=1,Ee=An[0]}var _t=15&hn.la,Bt=15&_.la;for(V=0;4>V;++V){var tn=1&Bt;for(Ye=se=0;4>Ye;++Ye)_t=_t>>1|(tn=(nt=Xn(Dn,Ee,nt=tn+(1&_t),d.Sc,ye,sn,g))>ye)<<7,se=se<<2|(3<nt?3:1<nt?2:sn[g+0]!=0),g+=16;_t>>=4,Bt=Bt>>1|tn<<7,S=(S<<8|se)>>>0}for(Ee=_t,ye=Bt>>4,te=0;4>te;te+=2){for(se=0,_t=hn.la>>4+te,Bt=_.la>>4+te,V=0;2>V;++V){for(tn=1&Bt,Ye=0;2>Ye;++Ye)nt=tn+(1&_t),_t=_t>>1|(tn=0<(nt=Xn(Dn,An[2],nt,d.Qc,0,sn,g)))<<3,se=se<<2|(3<nt?3:1<nt?2:sn[g+0]!=0),g+=16;_t>>=2,Bt=Bt>>1|tn<<5}P|=se<<4*te,Ee|=_t<<4<<te,ye|=(240&Bt)<<te}hn.la=Ee,_.la=ye,Jn.Hc=S,Jn.Gc=P,Jn.ia=43690&P?0:d.ia,An=!(S|P)}if(0<xt.L&&(xt.wa[xt.Y+xt.ja]=xt.gd[Wt.$b][Wt.Za],xt.wa[xt.Y+xt.ja].La|=!An),nn.Ka)return pr(Mt,7,"Premature end-of-file encountered.")}if(Zi(Mt),xt=Qt,nn=1,Wt=(mt=Mt).D,hn=0<mt.L&&mt.M>=mt.zb&&mt.M<=mt.Va,mt.Aa==0)e:{if(Wt.M=mt.M,Wt.uc=hn,Tu(mt,Wt),nn=1,Wt=(se=mt.D).Nb,hn=(P=Ua[mt.L])*mt.R,Dn=P/2*mt.B,V=16*Wt*mt.R,Ye=8*Wt*mt.B,An=mt.sa,Jn=mt.ta-hn+V,d=mt.qa,sn=mt.ra-Dn+Ye,g=mt.Ha,_=mt.Ia-Dn+Ye,Bt=(_t=se.M)==0,S=_t>=mt.Va-1,mt.Aa==2&&Tu(mt,se),se.uc)for(tn=(nt=mt).D.M,e(nt.D.uc),se=nt.yb;se<nt.Hb;++se){ye=se,Ee=tn;var _n=(Mn=(Te=nt).D).Nb;te=Te.R;var Mn=Mn.wa[Mn.Y+ye],cr=Te.sa,tt=Te.ta+16*_n*te+16*ye,st=Mn.dd,pt=Mn.tc;if(pt!=0)if(e(3<=pt),Te.L==1)0<ye&&Ca(cr,tt,te,pt+4),Mn.La&&aa(cr,tt,te,pt),0<Ee&&La(cr,tt,te,pt+4),Mn.La&&Vr(cr,tt,te,pt);else{var $t=Te.B,Et=Te.qa,Rt=Te.ra+8*_n*$t+8*ye,we=Te.Ha,Te=Te.Ia+8*_n*$t+8*ye;_n=Mn.ld,0<ye&&(hi(cr,tt,te,pt+4,st,_n),lo(Et,Rt,we,Te,$t,pt+4,st,_n)),Mn.La&&(wa(cr,tt,te,pt,st,_n),xa(Et,Rt,we,Te,$t,pt,st,_n)),0<Ee&&(Bi(cr,tt,te,pt+4,st,_n),du(Et,Rt,we,Te,$t,pt+4,st,_n)),Mn.La&&(Ri(cr,tt,te,pt,st,_n),ja(Et,Rt,we,Te,$t,pt,st,_n))}}if(mt.ia&&alert("todo:DitherRow"),xt.put!=null){if(se=16*_t,_t=16*(_t+1),Bt?(xt.y=mt.sa,xt.O=mt.ta+V,xt.f=mt.qa,xt.N=mt.ra+Ye,xt.ea=mt.Ha,xt.W=mt.Ia+Ye):(se-=P,xt.y=An,xt.O=Jn,xt.f=d,xt.N=sn,xt.ea=g,xt.W=_),S||(_t-=P),_t>xt.o&&(_t=xt.o),xt.F=null,xt.J=null,mt.Fa!=null&&0<mt.Fa.length&&se<_t&&(xt.J=es(mt,xt,se,_t-se),xt.F=mt.mb,xt.F==null&&xt.F.length==0)){nn=pr(mt,3,"Could not decode alpha data.");break e}se<xt.j&&(P=xt.j-se,se=xt.j,e(!(1&P)),xt.O+=mt.R*P,xt.N+=mt.B*(P>>1),xt.W+=mt.B*(P>>1),xt.F!=null&&(xt.J+=xt.width*P)),se<_t&&(xt.O+=xt.v,xt.N+=xt.v>>1,xt.W+=xt.v>>1,xt.F!=null&&(xt.J+=xt.v),xt.ka=se-xt.j,xt.U=xt.va-xt.v,xt.T=_t-se,nn=xt.put(xt))}Wt+1!=mt.Ic||S||(r(mt.sa,mt.ta-hn,An,Jn+16*mt.R,hn),r(mt.qa,mt.ra-Dn,d,sn+8*mt.B,Dn),r(mt.Ha,mt.Ia-Dn,g,_+8*mt.B,Dn))}if(!nn)return pr(Mt,6,"Output aborted.")}return 1}(w,T)),T.bc!=null&&T.bc(T),Y&=1}return Y?(w.cb=0,Y):0}function ei(w,T,Y,ce,Le){Le=w[T+Y+32*ce]+(Le>>3),w[T+Y+32*ce]=-256&Le?0>Le?0:255:Le}function ol(w,T,Y,ce,Le,ke){ei(w,T,0,Y,ce+Le),ei(w,T,1,Y,ce+ke),ei(w,T,2,Y,ce-ke),ei(w,T,3,Y,ce-Le)}function $s(w){return(20091*w>>16)+w}function Us(w,T,Y,ce){var Le,ke=0,Oe=s(16);for(Le=0;4>Le;++Le){var Be=w[T+0]+w[T+8],ze=w[T+0]-w[T+8],Ze=(35468*w[T+4]>>16)-$s(w[T+12]),gt=$s(w[T+4])+(35468*w[T+12]>>16);Oe[ke+0]=Be+gt,Oe[ke+1]=ze+Ze,Oe[ke+2]=ze-Ze,Oe[ke+3]=Be-gt,ke+=4,T++}for(Le=ke=0;4>Le;++Le)Be=(w=Oe[ke+0]+4)+Oe[ke+8],ze=w-Oe[ke+8],Ze=(35468*Oe[ke+4]>>16)-$s(Oe[ke+12]),ei(Y,ce,0,0,Be+(gt=$s(Oe[ke+4])+(35468*Oe[ke+12]>>16))),ei(Y,ce,1,0,ze+Ze),ei(Y,ce,2,0,ze-Ze),ei(Y,ce,3,0,Be-gt),ke++,ce+=32}function Xu(w,T,Y,ce){var Le=w[T+0]+4,ke=35468*w[T+4]>>16,Oe=$s(w[T+4]),Be=35468*w[T+1]>>16;ol(Y,ce,0,Le+Oe,w=$s(w[T+1]),Be),ol(Y,ce,1,Le+ke,w,Be),ol(Y,ce,2,Le-ke,w,Be),ol(Y,ce,3,Le-Oe,w,Be)}function El(w,T,Y,ce,Le){Us(w,T,Y,ce),Le&&Us(w,T+16,Y,ce+4)}function Da(w,T,Y,ce){Xt(w,T+0,Y,ce,1),Xt(w,T+32,Y,ce+128,1)}function Hi(w,T,Y,ce){var Le;for(w=w[T+0]+4,Le=0;4>Le;++Le)for(T=0;4>T;++T)ei(Y,ce,T,Le,w)}function ta(w,T,Y,ce){w[T+0]&&Yn(w,T+0,Y,ce),w[T+16]&&Yn(w,T+16,Y,ce+4),w[T+32]&&Yn(w,T+32,Y,ce+128),w[T+48]&&Yn(w,T+48,Y,ce+128+4)}function al(w,T,Y,ce){var Le,ke=s(16);for(Le=0;4>Le;++Le){var Oe=w[T+0+Le]+w[T+12+Le],Be=w[T+4+Le]+w[T+8+Le],ze=w[T+4+Le]-w[T+8+Le],Ze=w[T+0+Le]-w[T+12+Le];ke[0+Le]=Oe+Be,ke[8+Le]=Oe-Be,ke[4+Le]=Ze+ze,ke[12+Le]=Ze-ze}for(Le=0;4>Le;++Le)Oe=(w=ke[0+4*Le]+3)+ke[3+4*Le],Be=ke[1+4*Le]+ke[2+4*Le],ze=ke[1+4*Le]-ke[2+4*Le],Ze=w-ke[3+4*Le],Y[ce+0]=Oe+Be>>3,Y[ce+16]=Ze+ze>>3,Y[ce+32]=Oe-Be>>3,Y[ce+48]=Ze-ze>>3,ce+=64}function Bo(w,T,Y){var ce,Le=T-32,ke=Li,Oe=255-w[Le-1];for(ce=0;ce<Y;++ce){var Be,ze=ke,Ze=Oe+w[T-1];for(Be=0;Be<Y;++Be)w[T+Be]=ze[Ze+w[Le+Be]];T+=32}}function Eu(w,T){Bo(w,T,4)}function ll(w,T){Bo(w,T,8)}function Ju(w,T){Bo(w,T,16)}function na(w,T){var Y;for(Y=0;16>Y;++Y)r(w,T+32*Y,w,T-32,16)}function Oa(w,T){var Y;for(Y=16;0<Y;--Y)i(w,T,w[T-1],16),T+=32}function ul(w,T,Y){var ce;for(ce=0;16>ce;++ce)i(T,Y+32*ce,w,16)}function ru(w,T){var Y,ce=16;for(Y=0;16>Y;++Y)ce+=w[T-1+32*Y]+w[T+Y-32];ul(ce>>5,w,T)}function _s(w,T){var Y,ce=8;for(Y=0;16>Y;++Y)ce+=w[T-1+32*Y];ul(ce>>4,w,T)}function Tc(w,T){var Y,ce=8;for(Y=0;16>Y;++Y)ce+=w[T+Y-32];ul(ce>>4,w,T)}function Mu(w,T){ul(128,w,T)}function vr(w,T,Y){return w+2*T+Y+2>>2}function xr(w,T){var Y,ce=T-32;for(ce=new Uint8Array([vr(w[ce-1],w[ce+0],w[ce+1]),vr(w[ce+0],w[ce+1],w[ce+2]),vr(w[ce+1],w[ce+2],w[ce+3]),vr(w[ce+2],w[ce+3],w[ce+4])]),Y=0;4>Y;++Y)r(w,T+32*Y,ce,0,ce.length)}function ra(w,T){var Y=w[T-1],ce=w[T-1+32],Le=w[T-1+64],ke=w[T-1+96];De(w,T+0,16843009*vr(w[T-1-32],Y,ce)),De(w,T+32,16843009*vr(Y,ce,Le)),De(w,T+64,16843009*vr(ce,Le,ke)),De(w,T+96,16843009*vr(Le,ke,ke))}function Xr(w,T){var Y,ce=4;for(Y=0;4>Y;++Y)ce+=w[T+Y-32]+w[T-1+32*Y];for(ce>>=3,Y=0;4>Y;++Y)i(w,T+32*Y,ce,4)}function Qu(w,T){var Y=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],ke=w[T-1-32],Oe=w[T+0-32],Be=w[T+1-32],ze=w[T+2-32],Ze=w[T+3-32];w[T+0+96]=vr(ce,Le,w[T-1+96]),w[T+1+96]=w[T+0+64]=vr(Y,ce,Le),w[T+2+96]=w[T+1+64]=w[T+0+32]=vr(ke,Y,ce),w[T+3+96]=w[T+2+64]=w[T+1+32]=w[T+0+0]=vr(Oe,ke,Y),w[T+3+64]=w[T+2+32]=w[T+1+0]=vr(Be,Oe,ke),w[T+3+32]=w[T+2+0]=vr(ze,Be,Oe),w[T+3+0]=vr(Ze,ze,Be)}function Ml(w,T){var Y=w[T+1-32],ce=w[T+2-32],Le=w[T+3-32],ke=w[T+4-32],Oe=w[T+5-32],Be=w[T+6-32],ze=w[T+7-32];w[T+0+0]=vr(w[T+0-32],Y,ce),w[T+1+0]=w[T+0+32]=vr(Y,ce,Le),w[T+2+0]=w[T+1+32]=w[T+0+64]=vr(ce,Le,ke),w[T+3+0]=w[T+2+32]=w[T+1+64]=w[T+0+96]=vr(Le,ke,Oe),w[T+3+32]=w[T+2+64]=w[T+1+96]=vr(ke,Oe,Be),w[T+3+64]=w[T+2+96]=vr(Oe,Be,ze),w[T+3+96]=vr(Be,ze,ze)}function Pl(w,T){var Y=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],ke=w[T-1-32],Oe=w[T+0-32],Be=w[T+1-32],ze=w[T+2-32],Ze=w[T+3-32];w[T+0+0]=w[T+1+64]=ke+Oe+1>>1,w[T+1+0]=w[T+2+64]=Oe+Be+1>>1,w[T+2+0]=w[T+3+64]=Be+ze+1>>1,w[T+3+0]=ze+Ze+1>>1,w[T+0+96]=vr(Le,ce,Y),w[T+0+64]=vr(ce,Y,ke),w[T+0+32]=w[T+1+96]=vr(Y,ke,Oe),w[T+1+32]=w[T+2+96]=vr(ke,Oe,Be),w[T+2+32]=w[T+3+96]=vr(Oe,Be,ze),w[T+3+32]=vr(Be,ze,Ze)}function ia(w,T){var Y=w[T+0-32],ce=w[T+1-32],Le=w[T+2-32],ke=w[T+3-32],Oe=w[T+4-32],Be=w[T+5-32],ze=w[T+6-32],Ze=w[T+7-32];w[T+0+0]=Y+ce+1>>1,w[T+1+0]=w[T+0+64]=ce+Le+1>>1,w[T+2+0]=w[T+1+64]=Le+ke+1>>1,w[T+3+0]=w[T+2+64]=ke+Oe+1>>1,w[T+0+32]=vr(Y,ce,Le),w[T+1+32]=w[T+0+96]=vr(ce,Le,ke),w[T+2+32]=w[T+1+96]=vr(Le,ke,Oe),w[T+3+32]=w[T+2+96]=vr(ke,Oe,Be),w[T+3+64]=vr(Oe,Be,ze),w[T+3+96]=vr(Be,ze,Ze)}function cl(w,T){var Y=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],ke=w[T-1+96];w[T+0+0]=Y+ce+1>>1,w[T+2+0]=w[T+0+32]=ce+Le+1>>1,w[T+2+32]=w[T+0+64]=Le+ke+1>>1,w[T+1+0]=vr(Y,ce,Le),w[T+3+0]=w[T+1+32]=vr(ce,Le,ke),w[T+3+32]=w[T+1+64]=vr(Le,ke,ke),w[T+3+64]=w[T+2+64]=w[T+0+96]=w[T+1+96]=w[T+2+96]=w[T+3+96]=ke}function ec(w,T){var Y=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],ke=w[T-1+96],Oe=w[T-1-32],Be=w[T+0-32],ze=w[T+1-32],Ze=w[T+2-32];w[T+0+0]=w[T+2+32]=Y+Oe+1>>1,w[T+0+32]=w[T+2+64]=ce+Y+1>>1,w[T+0+64]=w[T+2+96]=Le+ce+1>>1,w[T+0+96]=ke+Le+1>>1,w[T+3+0]=vr(Be,ze,Ze),w[T+2+0]=vr(Oe,Be,ze),w[T+1+0]=w[T+3+32]=vr(Y,Oe,Be),w[T+1+32]=w[T+3+64]=vr(ce,Y,Oe),w[T+1+64]=w[T+3+96]=vr(Le,ce,Y),w[T+1+96]=vr(ke,Le,ce)}function iu(w,T){var Y;for(Y=0;8>Y;++Y)r(w,T+32*Y,w,T-32,8)}function _r(w,T){var Y;for(Y=0;8>Y;++Y)i(w,T,w[T-1],8),T+=32}function Fr(w,T,Y){var ce;for(ce=0;8>ce;++ce)i(T,Y+32*ce,w,8)}function dl(w,T){var Y,ce=8;for(Y=0;8>Y;++Y)ce+=w[T+Y-32]+w[T-1+32*Y];Fr(ce>>4,w,T)}function Dc(w,T){var Y,ce=4;for(Y=0;8>Y;++Y)ce+=w[T+Y-32];Fr(ce>>3,w,T)}function su(w,T){var Y,ce=4;for(Y=0;8>Y;++Y)ce+=w[T-1+32*Y];Fr(ce>>3,w,T)}function Pu(w,T){Fr(128,w,T)}function kl(w,T,Y){var ce=w[T-Y],Le=w[T+0],ke=3*(Le-ce)+Sa[1020+w[T-2*Y]-w[T+Y]],Oe=fs[112+(ke+4>>3)];w[T-Y]=Li[255+ce+fs[112+(ke+3>>3)]],w[T+0]=Li[255+Le-Oe]}function ou(w,T,Y,ce){var Le=w[T+0],ke=w[T+Y];return Ks[255+w[T-2*Y]-w[T-Y]]>ce||Ks[255+ke-Le]>ce}function ku(w,T,Y,ce){return 4*Ks[255+w[T-Y]-w[T+0]]+Ks[255+w[T-2*Y]-w[T+Y]]<=ce}function Ur(w,T,Y,ce,Le){var ke=w[T-3*Y],Oe=w[T-2*Y],Be=w[T-Y],ze=w[T+0],Ze=w[T+Y],gt=w[T+2*Y],Ft=w[T+3*Y];return 4*Ks[255+Be-ze]+Ks[255+Oe-Ze]>ce?0:Ks[255+w[T-4*Y]-ke]<=Le&&Ks[255+ke-Oe]<=Le&&Ks[255+Oe-Be]<=Le&&Ks[255+Ft-gt]<=Le&&Ks[255+gt-Ze]<=Le&&Ks[255+Ze-ze]<=Le}function Ji(w,T,Y,ce){var Le=2*ce+1;for(ce=0;16>ce;++ce)ku(w,T+ce,Y,Le)&&kl(w,T+ce,Y)}function sr(w,T,Y,ce){var Le=2*ce+1;for(ce=0;16>ce;++ce)ku(w,T+ce*Y,1,Le)&&kl(w,T+ce*Y,1)}function Qi(w,T,Y,ce){var Le;for(Le=3;0<Le;--Le)Ji(w,T+=4*Y,Y,ce)}function Al(w,T,Y,ce){var Le;for(Le=3;0<Le;--Le)sr(w,T+=4,Y,ce)}function Na(w,T,Y,ce,Le,ke,Oe,Be){for(ke=2*ke+1;0<Le--;){if(Ur(w,T,Y,ke,Oe))if(ou(w,T,Y,Be))kl(w,T,Y);else{var ze=w,Ze=T,gt=Y,Ft=ze[Ze-2*gt],jt=ze[Ze-gt],Mt=ze[Ze+0],Qt=ze[Ze+gt],Wt=ze[Ze+2*gt],mt=27*(nn=Sa[1020+3*(Mt-jt)+Sa[1020+Ft-Qt]])+63>>7,xt=18*nn+63>>7,nn=9*nn+63>>7;ze[Ze-3*gt]=Li[255+ze[Ze-3*gt]+nn],ze[Ze-2*gt]=Li[255+Ft+xt],ze[Ze-gt]=Li[255+jt+mt],ze[Ze+0]=Li[255+Mt-mt],ze[Ze+gt]=Li[255+Qt-xt],ze[Ze+2*gt]=Li[255+Wt-nn]}T+=ce}}function Ii(w,T,Y,ce,Le,ke,Oe,Be){for(ke=2*ke+1;0<Le--;){if(Ur(w,T,Y,ke,Oe))if(ou(w,T,Y,Be))kl(w,T,Y);else{var ze=w,Ze=T,gt=Y,Ft=ze[Ze-gt],jt=ze[Ze+0],Mt=ze[Ze+gt],Qt=fs[112+((Wt=3*(jt-Ft))+4>>3)],Wt=fs[112+(Wt+3>>3)],mt=Qt+1>>1;ze[Ze-2*gt]=Li[255+ze[Ze-2*gt]+mt],ze[Ze-gt]=Li[255+Ft+Wt],ze[Ze+0]=Li[255+jt-Qt],ze[Ze+gt]=Li[255+Mt-mt]}T+=ce}}function Au(w,T,Y,ce,Le,ke){Na(w,T,Y,1,16,ce,Le,ke)}function va(w,T,Y,ce,Le,ke){Na(w,T,1,Y,16,ce,Le,ke)}function au(w,T,Y,ce,Le,ke){var Oe;for(Oe=3;0<Oe;--Oe)Ii(w,T+=4*Y,Y,1,16,ce,Le,ke)}function lu(w,T,Y,ce,Le,ke){var Oe;for(Oe=3;0<Oe;--Oe)Ii(w,T+=4,1,Y,16,ce,Le,ke)}function Go(w,T,Y,ce,Le,ke,Oe,Be){Na(w,T,Le,1,8,ke,Oe,Be),Na(Y,ce,Le,1,8,ke,Oe,Be)}function uu(w,T,Y,ce,Le,ke,Oe,Be){Na(w,T,1,Le,8,ke,Oe,Be),Na(Y,ce,1,Le,8,ke,Oe,Be)}function ui(w,T,Y,ce,Le,ke,Oe,Be){Ii(w,T+4*Le,Le,1,8,ke,Oe,Be),Ii(Y,ce+4*Le,Le,1,8,ke,Oe,Be)}function Oc(w,T,Y,ce,Le,ke,Oe,Be){Ii(w,T+4,1,Le,8,ke,Oe,Be),Ii(Y,ce+4,1,Le,8,ke,Oe,Be)}function As(){this.ba=new tr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new mr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function sa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function cu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function oa(){this.ua=0,this.Wa=new Z,this.vb=new Z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new B}function Tl(){this.xb=this.a=0,this.l=new br,this.ca=new tr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ie,this.Pb=0,this.wd=new ie,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new oa,this.ab=0,this.gc=o(4,cu),this.Oc=0}function Dl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new br,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ci(w,T,Y,ce,Le,ke,Oe){for(w=w==null?0:w[T+0],T=0;T<Oe;++T)Le[ke+T]=w+Y[ce+T]&255,w=Le[ke+T]}function Ro(w,T,Y,ce,Le,ke,Oe){var Be;if(w==null)ci(null,null,Y,ce,Le,ke,Oe);else for(Be=0;Be<Oe;++Be)Le[ke+Be]=w[T+Be]+Y[ce+Be]&255}function Ia(w,T,Y,ce,Le,ke,Oe){if(w==null)ci(null,null,Y,ce,Le,ke,Oe);else{var Be,ze=w[T+0],Ze=ze,gt=ze;for(Be=0;Be<Oe;++Be)Ze=gt+(ze=w[T+Be])-Ze,gt=Y[ce+Be]+(-256&Ze?0>Ze?0:255:Ze)&255,Ze=ze,Le[ke+Be]=gt}}function es(w,T,Y,ce){var Le=T.width,ke=T.o;if(e(w!=null&&T!=null),0>Y||0>=ce||Y+ce>ke)return null;if(!w.Cc){if(w.ga==null){var Oe;if(w.ga=new Dl,(Oe=w.ga==null)||(Oe=T.width*T.o,e(w.Gb.length==0),w.Gb=s(Oe),w.Uc=0,w.Gb==null?Oe=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Oe=1),Oe=!Oe),!Oe){Oe=w.ga;var Be=w.Fa,ze=w.P,Ze=w.qc,gt=w.mb,Ft=w.nb,jt=ze+1,Mt=Ze-1,Qt=Oe.l;if(e(Be!=null&&gt!=null&&T!=null),ii[0]=null,ii[1]=ci,ii[2]=Ro,ii[3]=Ia,Oe.ca=gt,Oe.tb=Ft,Oe.c=T.width,Oe.i=T.height,e(0<Oe.c&&0<Oe.i),1>=Ze)T=0;else if(Oe.$a=Be[ze+0]>>0&3,Oe.Z=Be[ze+0]>>2&3,Oe.Lc=Be[ze+0]>>4&3,ze=Be[ze+0]>>6&3,0>Oe.$a||1<Oe.$a||4<=Oe.Z||1<Oe.Lc||ze)T=0;else if(Qt.put=io,Qt.ac=Ni,Qt.bc=Ps,Qt.ma=Oe,Qt.width=T.width,Qt.height=T.height,Qt.Da=T.Da,Qt.v=T.v,Qt.va=T.va,Qt.j=T.j,Qt.o=T.o,Oe.$a)e:{e(Oe.$a==1),T=dr();t:for(;;){if(T==null){T=0;break e}if(e(Oe!=null),Oe.mc=T,T.c=Oe.c,T.i=Oe.i,T.l=Oe.l,T.l.ma=Oe,T.l.width=Oe.c,T.l.height=Oe.i,T.a=0,K(T.m,Be,jt,Mt),!Cn(Oe.c,Oe.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&qn(T.s)?(Oe.ic=1,Be=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(Be),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(Oe.ic=0,T=fn(T,Oe.c)),!T))break t;T=1;break e}Oe.mc=null,T=0}else T=Mt>=Oe.c*Oe.i;Oe=!T}if(Oe)return null;w.ga.Lc!=1?w.Ga=0:ce=ke-Y}e(w.ga!=null),e(Y+ce<=ke);e:{if(T=(Be=w.ga).c,ke=Be.l.o,Be.$a==0){if(jt=w.rc,Mt=w.Vc,Qt=w.Fa,ze=w.P+1+Y*T,Ze=w.mb,gt=w.nb+Y*T,e(ze<=w.P+w.qc),Be.Z!=0)for(e(ii[Be.Z]!=null),Oe=0;Oe<ce;++Oe)ii[Be.Z](jt,Mt,Qt,ze,Ze,gt,T),jt=Ze,Mt=gt,gt+=T,ze+=T;else for(Oe=0;Oe<ce;++Oe)r(Ze,gt,Qt,ze,T),jt=Ze,Mt=gt,gt+=T,ze+=T;w.rc=jt,w.Vc=Mt}else{if(e(Be.mc!=null),T=Y+ce,e((Oe=Be.mc)!=null),e(T<=Oe.i),Oe.C>=T)T=1;else if(Be.ic||Pt(),Be.ic){Be=Oe.V,jt=Oe.Ba,Mt=Oe.c;var Wt=Oe.i,mt=(Qt=1,ze=Oe.$/Mt,Ze=Oe.$%Mt,gt=Oe.m,Ft=Oe.s,Oe.$),xt=Mt*Wt,nn=Mt*T,hn=Ft.wc,sn=mt<nn?Kt(Ft,Ze,ze):null;e(mt<=xt),e(T<=Wt),e(qn(Ft));t:for(;;){for(;!gt.h&&mt<nn;){if(Ze&hn||(sn=Kt(Ft,Ze,ze)),e(sn!=null),ee(gt),256>(Wt=Vt(sn.G[0],sn.H[0],gt)))Be[jt+mt]=Wt,++mt,++Ze>=Mt&&(Ze=0,++ze<=T&&!(ze%16)&&gn(Oe,ze));else{if(!(280>Wt)){Qt=0;break t}Wt=bt(Wt-256,gt);var Dn,An=Vt(sn.G[4],sn.H[4],gt);if(ee(gt),!(mt>=(An=rt(Mt,An=bt(An,gt)))&&xt-mt>=Wt)){Qt=0;break t}for(Dn=0;Dn<Wt;++Dn)Be[jt+mt+Dn]=Be[jt+mt+Dn-An];for(mt+=Wt,Ze+=Wt;Ze>=Mt;)Ze-=Mt,++ze<=T&&!(ze%16)&&gn(Oe,ze);mt<nn&&Ze&hn&&(sn=Kt(Ft,Ze,ze))}e(gt.h==_e(gt))}gn(Oe,ze>T?T:ze);break t}!Qt||gt.h&&mt<xt?(Qt=0,Oe.a=gt.h?5:3):Oe.$=mt,T=Qt}else T=nr(Oe,Oe.V,Oe.Ba,Oe.c,Oe.i,T,li);if(!T){ce=0;break e}}Y+ce>=ke&&(w.Cc=1),ce=1}if(!ce)return null;if(w.Cc&&((ce=w.ga)!=null&&(ce.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+Y*Le}function j(w,T,Y,ce,Le,ke){for(;0<Le--;){var Oe,Be=w,ze=T+(Y?1:0),Ze=w,gt=T+(Y?0:3);for(Oe=0;Oe<ce;++Oe){var Ft=Ze[gt+4*Oe];Ft!=255&&(Ft*=32897,Be[ze+4*Oe+0]=Be[ze+4*Oe+0]*Ft>>23,Be[ze+4*Oe+1]=Be[ze+4*Oe+1]*Ft>>23,Be[ze+4*Oe+2]=Be[ze+4*Oe+2]*Ft>>23)}T+=ke}}function xe(w,T,Y,ce,Le){for(;0<ce--;){var ke;for(ke=0;ke<Y;++ke){var Oe=w[T+2*ke+0],Be=15&(Ze=w[T+2*ke+1]),ze=4369*Be,Ze=(240&Ze|Ze>>4)*ze>>16;w[T+2*ke+0]=(240&Oe|Oe>>4)*ze>>16&240|(15&Oe|Oe<<4)*ze>>16>>4&15,w[T+2*ke+1]=240&Ze|Be}T+=Le}}function et(w,T,Y,ce,Le,ke,Oe,Be){var ze,Ze,gt=255;for(Ze=0;Ze<Le;++Ze){for(ze=0;ze<ce;++ze){var Ft=w[T+ze];ke[Oe+4*ze]=Ft,gt&=Ft}T+=Y,Oe+=Be}return gt!=255}function ft(w,T,Y,ce,Le){var ke;for(ke=0;ke<Le;++ke)Y[ce+ke]=w[T+ke]>>8}function Pt(){Ds=j,fi=xe,vi=et,ns=ft}function Ht(w,T,Y){N[w]=function(ce,Le,ke,Oe,Be,ze,Ze,gt,Ft,jt,Mt,Qt,Wt,mt,xt,nn,hn){var sn,Dn=hn-1>>1,An=Be[ze+0]|Ze[gt+0]<<16,Jn=Ft[jt+0]|Mt[Qt+0]<<16;e(ce!=null);var d=3*An+Jn+131074>>2;for(T(ce[Le+0],255&d,d>>16,Wt,mt),ke!=null&&(d=3*Jn+An+131074>>2,T(ke[Oe+0],255&d,d>>16,xt,nn)),sn=1;sn<=Dn;++sn){var g=Be[ze+sn]|Ze[gt+sn]<<16,_=Ft[jt+sn]|Mt[Qt+sn]<<16,S=An+g+Jn+_+524296,P=S+2*(g+Jn)>>3;d=P+An>>1,An=(S=S+2*(An+_)>>3)+g>>1,T(ce[Le+2*sn-1],255&d,d>>16,Wt,mt+(2*sn-1)*Y),T(ce[Le+2*sn-0],255&An,An>>16,Wt,mt+(2*sn-0)*Y),ke!=null&&(d=S+Jn>>1,An=P+_>>1,T(ke[Oe+2*sn-1],255&d,d>>16,xt,nn+(2*sn-1)*Y),T(ke[Oe+2*sn+0],255&An,An>>16,xt,nn+(2*sn+0)*Y)),An=g,Jn=_}1&hn||(d=3*An+Jn+131074>>2,T(ce[Le+hn-1],255&d,d>>16,Wt,mt+(hn-1)*Y),ke!=null&&(d=3*Jn+An+131074>>2,T(ke[Oe+hn-1],255&d,d>>16,xt,nn+(hn-1)*Y)))}}function dn(){Zs[xo]=Fe,Zs[hr]=rc,Zs[za]=Co,Zs[$a]=Bs,Zs[la]=Br,Zs[uo]=Hd,Zs[ud]=Af,Zs[Os]=rc,Zs[Ns]=Bs,Zs[ua]=Br,Zs[c]=Hd}function Nn(w){return w&-16384?0>w?0:255:w>>Gp}function Rn(w,T){return Nn((19077*w>>8)+(26149*T>>8)-14234)}function rr(w,T,Y){return Nn((19077*w>>8)-(6419*T>>8)-(13320*Y>>8)+8708)}function gr(w,T){return Nn((19077*w>>8)+(33050*T>>8)-17685)}function Nr(w,T,Y,ce,Le){ce[Le+0]=Rn(w,Y),ce[Le+1]=rr(w,T,Y),ce[Le+2]=gr(w,T)}function Ti(w,T,Y,ce,Le){ce[Le+0]=gr(w,T),ce[Le+1]=rr(w,T,Y),ce[Le+2]=Rn(w,Y)}function ri(w,T,Y,ce,Le){var ke=rr(w,T,Y);T=ke<<3&224|gr(w,T)>>3,ce[Le+0]=248&Rn(w,Y)|ke>>5,ce[Le+1]=T}function di(w,T,Y,ce,Le){var ke=240&gr(w,T)|15;ce[Le+0]=240&Rn(w,Y)|rr(w,T,Y)>>4,ce[Le+1]=ke}function ts(w,T,Y,ce,Le){ce[Le+0]=255,Nr(w,T,Y,ce,Le+1)}function ds(w,T,Y,ce,Le){Ti(w,T,Y,ce,Le),ce[Le+3]=255}function Fo(w,T,Y,ce,Le){Nr(w,T,Y,ce,Le),ce[Le+3]=255}function Ir(w,T){return 0>w?0:w>T?T:w}function Vs(w,T,Y){N[w]=function(ce,Le,ke,Oe,Be,ze,Ze,gt,Ft){for(var jt=gt+(-2&Ft)*Y;gt!=jt;)T(ce[Le+0],ke[Oe+0],Be[ze+0],Ze,gt),T(ce[Le+1],ke[Oe+0],Be[ze+0],Ze,gt+Y),Le+=2,++Oe,++ze,gt+=2*Y;1&Ft&&T(ce[Le+0],ke[Oe+0],Be[ze+0],Ze,gt)}}function Ol(w,T,Y){return Y==0?w==0?T==0?6:5:T==0?4:0:Y}function so(w,T,Y,ce,Le){switch(w>>>30){case 3:Xt(T,Y,ce,Le,0);break;case 2:It(T,Y,ce,Le);break;case 1:Yn(T,Y,ce,Le)}}function Tu(w,T){var Y,ce,Le=T.M,ke=T.Nb,Oe=w.oc,Be=w.pc+40,ze=w.oc,Ze=w.pc+584,gt=w.oc,Ft=w.pc+600;for(Y=0;16>Y;++Y)Oe[Be+32*Y-1]=129;for(Y=0;8>Y;++Y)ze[Ze+32*Y-1]=129,gt[Ft+32*Y-1]=129;for(0<Le?Oe[Be-1-32]=ze[Ze-1-32]=gt[Ft-1-32]=129:(i(Oe,Be-32-1,127,21),i(ze,Ze-32-1,127,9),i(gt,Ft-32-1,127,9)),ce=0;ce<w.za;++ce){var jt=T.ya[T.aa+ce];if(0<ce){for(Y=-1;16>Y;++Y)r(Oe,Be+32*Y-4,Oe,Be+32*Y+12,4);for(Y=-1;8>Y;++Y)r(ze,Ze+32*Y-4,ze,Ze+32*Y+4,4),r(gt,Ft+32*Y-4,gt,Ft+32*Y+4,4)}var Mt=w.Gd,Qt=w.Hd+ce,Wt=jt.ad,mt=jt.Hc;if(0<Le&&(r(Oe,Be-32,Mt[Qt].y,0,16),r(ze,Ze-32,Mt[Qt].f,0,8),r(gt,Ft-32,Mt[Qt].ea,0,8)),jt.Za){var xt=Oe,nn=Be-32+16;for(0<Le&&(ce>=w.za-1?i(xt,nn,Mt[Qt].y[15],4):r(xt,nn,Mt[Qt+1].y,0,4)),Y=0;4>Y;Y++)xt[nn+128+Y]=xt[nn+256+Y]=xt[nn+384+Y]=xt[nn+0+Y];for(Y=0;16>Y;++Y,mt<<=2)xt=Oe,nn=Be+Df[Y],ca[jt.Ob[Y]](xt,nn),so(mt,Wt,16*+Y,xt,nn)}else if(xt=Ol(ce,Le,jt.Ob[0]),Ea[xt](Oe,Be),mt!=0)for(Y=0;16>Y;++Y,mt<<=2)so(mt,Wt,16*+Y,Oe,Be+Df[Y]);for(Y=jt.Gc,xt=Ol(ce,Le,jt.Dd),qo[xt](ze,Ze),qo[xt](gt,Ft),mt=Wt,xt=ze,nn=Ze,255&(jt=Y>>0)&&(170&jt?Tn(mt,256,xt,nn):yr(mt,256,xt,nn)),jt=gt,mt=Ft,255&(Y>>=8)&&(170&Y?Tn(Wt,320,jt,mt):yr(Wt,320,jt,mt)),Le<w.Ub-1&&(r(Mt[Qt].y,0,Oe,Be+480,16),r(Mt[Qt].f,0,ze,Ze+224,8),r(Mt[Qt].ea,0,gt,Ft+224,8)),Y=8*ke*w.B,Mt=w.sa,Qt=w.ta+16*ce+16*ke*w.R,Wt=w.qa,jt=w.ra+8*ce+Y,mt=w.Ha,xt=w.Ia+8*ce+Y,Y=0;16>Y;++Y)r(Mt,Qt+Y*w.R,Oe,Be+32*Y,16);for(Y=0;8>Y;++Y)r(Wt,jt+Y*w.B,ze,Ze+32*Y,8),r(mt,xt+Y*w.B,gt,Ft+32*Y,8)}}function ya(w,T,Y,ce,Le,ke,Oe,Be,ze){var Ze=[0],gt=[0],Ft=0,jt=ze!=null?ze.kd:0,Mt=ze??new sa;if(w==null||12>Y)return 7;Mt.data=w,Mt.w=T,Mt.ha=Y,T=[T],Y=[Y],Mt.gb=[Mt.gb];e:{var Qt=T,Wt=Y,mt=Mt.gb;if(e(w!=null),e(Wt!=null),e(mt!=null),mt[0]=0,12<=Wt[0]&&!t(w,Qt[0],"RIFF")){if(t(w,Qt[0]+8,"WEBP")){mt=3;break e}var xt=le(w,Qt[0]+4);if(12>xt||4294967286<xt){mt=3;break e}if(jt&&xt>Wt[0]-8){mt=7;break e}mt[0]=xt,Qt[0]+=12,Wt[0]-=12}mt=0}if(mt!=0)return mt;for(xt=0<Mt.gb[0],Y=Y[0];;){e:{var nn=w;Wt=T,mt=Y;var hn=Ze,sn=gt,Dn=Qt=[0];if((d=Ft=[Ft])[0]=0,8>mt[0])mt=7;else{if(!t(nn,Wt[0],"VP8X")){if(le(nn,Wt[0]+4)!=10){mt=3;break e}if(18>mt[0]){mt=7;break e}var An=le(nn,Wt[0]+8),Jn=1+Ie(nn,Wt[0]+12);if(2147483648<=Jn*(nn=1+Ie(nn,Wt[0]+15))){mt=3;break e}Dn!=null&&(Dn[0]=An),hn!=null&&(hn[0]=Jn),sn!=null&&(sn[0]=nn),Wt[0]+=18,mt[0]-=18,d[0]=1}mt=0}}if(Ft=Ft[0],Qt=Qt[0],mt!=0)return mt;if(Wt=!!(2&Qt),!xt&&Ft)return 3;if(ke!=null&&(ke[0]=!!(16&Qt)),Oe!=null&&(Oe[0]=Wt),Be!=null&&(Be[0]=0),Oe=Ze[0],Qt=gt[0],Ft&&Wt&&ze==null){mt=0;break}if(4>Y){mt=7;break}if(xt&&Ft||!xt&&!Ft&&!t(w,T[0],"ALPH")){Y=[Y],Mt.na=[Mt.na],Mt.P=[Mt.P],Mt.Sa=[Mt.Sa];e:{An=w,mt=T,xt=Y;var d=Mt.gb;hn=Mt.na,sn=Mt.P,Dn=Mt.Sa,Jn=22,e(An!=null),e(xt!=null),nn=mt[0];var g=xt[0];for(e(hn!=null),e(Dn!=null),hn[0]=null,sn[0]=null,Dn[0]=0;;){if(mt[0]=nn,xt[0]=g,8>g){mt=7;break e}var _=le(An,nn+4);if(4294967286<_){mt=3;break e}var S=8+_+1&-2;if(Jn+=S,0<d&&Jn>d){mt=3;break e}if(!t(An,nn,"VP8 ")||!t(An,nn,"VP8L")){mt=0;break e}if(g[0]<S){mt=7;break e}t(An,nn,"ALPH")||(hn[0]=An,sn[0]=nn+8,Dn[0]=_),nn+=S,g-=S}}if(Y=Y[0],Mt.na=Mt.na[0],Mt.P=Mt.P[0],Mt.Sa=Mt.Sa[0],mt!=0)break}Y=[Y],Mt.Ja=[Mt.Ja],Mt.xa=[Mt.xa];e:if(d=w,mt=T,xt=Y,hn=Mt.gb[0],sn=Mt.Ja,Dn=Mt.xa,An=mt[0],nn=!t(d,An,"VP8 "),Jn=!t(d,An,"VP8L"),e(d!=null),e(xt!=null),e(sn!=null),e(Dn!=null),8>xt[0])mt=7;else{if(nn||Jn){if(d=le(d,An+4),12<=hn&&d>hn-12){mt=3;break e}if(jt&&d>xt[0]-8){mt=7;break e}sn[0]=d,mt[0]+=8,xt[0]-=8,Dn[0]=Jn}else Dn[0]=5<=xt[0]&&d[An+0]==47&&!(d[An+4]>>5),sn[0]=xt[0];mt=0}if(Y=Y[0],Mt.Ja=Mt.Ja[0],Mt.xa=Mt.xa[0],T=T[0],mt!=0)break;if(4294967286<Mt.Ja)return 3;if(Be==null||Wt||(Be[0]=Mt.xa?2:1),Oe=[Oe],Qt=[Qt],Mt.xa){if(5>Y){mt=7;break}Be=Oe,jt=Qt,Wt=ke,w==null||5>Y?w=0:5<=Y&&w[T+0]==47&&!(w[T+4]>>5)?(xt=[0],d=[0],hn=[0],K(sn=new ie,w,T,Y),Zn(sn,xt,d,hn)?(Be!=null&&(Be[0]=xt[0]),jt!=null&&(jt[0]=d[0]),Wt!=null&&(Wt[0]=hn[0]),w=1):w=0):w=0}else{if(10>Y){mt=7;break}Be=Qt,w==null||10>Y||!ea(w,T+3,Y-3)?w=0:(jt=w[T+0]|w[T+1]<<8|w[T+2]<<16,Wt=16383&(w[T+7]<<8|w[T+6]),w=16383&(w[T+9]<<8|w[T+8]),1&jt||3<(jt>>1&7)||!(jt>>4&1)||jt>>5>=Mt.Ja||!Wt||!w?w=0:(Oe&&(Oe[0]=Wt),Be&&(Be[0]=w),w=1))}if(!w||(Oe=Oe[0],Qt=Qt[0],Ft&&(Ze[0]!=Oe||gt[0]!=Qt)))return 3;ze!=null&&(ze[0]=Mt,ze.offset=T-ze.w,e(4294967286>T-ze.w),e(ze.offset==ze.ha-Y));break}return mt==0||mt==7&&Ft&&ze==null?(ke!=null&&(ke[0]|=Mt.na!=null&&0<Mt.na.length),ce!=null&&(ce[0]=Oe),Le!=null&&(Le[0]=Qt),0):mt}function tc(w,T,Y){var ce=T.width,Le=T.height,ke=0,Oe=0,Be=ce,ze=Le;if(T.Da=w!=null&&0<w.Da,T.Da&&(Be=w.cd,ze=w.bd,ke=w.v,Oe=w.j,11>Y||(ke&=-2,Oe&=-2),0>ke||0>Oe||0>=Be||0>=ze||ke+Be>ce||Oe+ze>Le))return 0;if(T.v=ke,T.j=Oe,T.va=ke+Be,T.o=Oe+ze,T.U=Be,T.T=ze,T.da=w!=null&&0<w.da,T.da){if(!Ae(Be,ze,Y=[w.ib],ke=[w.hb]))return 0;T.ib=Y[0],T.hb=ke[0]}return T.ob=w!=null&&w.ob,T.Kb=w==null||!w.Sd,T.da&&(T.ob=T.ib<3*ce/4&&T.hb<3*Le/4,T.Kb=0),1}function hl(w){if(w==null)return 2;if(11>w.S){var T=w.f.RGBA;T.fb+=(w.height-1)*T.A,T.A=-T.A}else T=w.f.kb,w=w.height,T.O+=(w-1)*T.fa,T.fa=-T.fa,T.N+=(w-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(w-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(w-1)*T.lb,T.lb=-T.lb);return 0}function fl(w,T,Y,ce){if(ce==null||0>=w||0>=T)return 2;if(Y!=null){if(Y.Da){var Le=Y.cd,ke=Y.bd,Oe=-2&Y.v,Be=-2&Y.j;if(0>Oe||0>Be||0>=Le||0>=ke||Oe+Le>w||Be+ke>T)return 2;w=Le,T=ke}if(Y.da){if(!Ae(w,T,Le=[Y.ib],ke=[Y.hb]))return 2;w=Le[0],T=ke[0]}}ce.width=w,ce.height=T;e:{var ze=ce.width,Ze=ce.height;if(w=ce.S,0>=ze||0>=Ze||!(w>=xo&&13>w))w=2;else{if(0>=ce.Rd&&ce.sd==null){Oe=ke=Le=T=0;var gt=(Be=ze*If[w])*Ze;if(11>w||(ke=(Ze+1)/2*(T=(ze+1)/2),w==12&&(Oe=(Le=ze)*Ze)),(Ze=s(gt+2*ke+Oe))==null){w=1;break e}ce.sd=Ze,11>w?((ze=ce.f.RGBA).eb=Ze,ze.fb=0,ze.A=Be,ze.size=gt):((ze=ce.f.kb).y=Ze,ze.O=0,ze.fa=Be,ze.Fd=gt,ze.f=Ze,ze.N=0+gt,ze.Ab=T,ze.Cd=ke,ze.ea=Ze,ze.W=0+gt+ke,ze.Db=T,ze.Ed=ke,w==12&&(ze.F=Ze,ze.J=0+gt+2*ke),ze.Tc=Oe,ze.lb=Le)}if(T=1,Le=ce.S,ke=ce.width,Oe=ce.height,Le>=xo&&13>Le)if(11>Le)w=ce.f.RGBA,T&=(Be=Math.abs(w.A))*(Oe-1)+ke<=w.size,T&=Be>=ke*If[Le],T&=w.eb!=null;else{w=ce.f.kb,Be=(ke+1)/2,gt=(Oe+1)/2,ze=Math.abs(w.fa),Ze=Math.abs(w.Ab);var Ft=Math.abs(w.Db),jt=Math.abs(w.lb),Mt=jt*(Oe-1)+ke;T&=ze*(Oe-1)+ke<=w.Fd,T&=Ze*(gt-1)+Be<=w.Cd,T=(T&=Ft*(gt-1)+Be<=w.Ed)&ze>=ke&Ze>=Be&Ft>=Be,T&=w.y!=null,T&=w.f!=null,T&=w.ea!=null,Le==12&&(T&=jt>=ke,T&=Mt<=w.Tc,T&=w.F!=null)}else T=0;w=T?0:2}}return w!=0||Y!=null&&Y.fd&&(w=hl(ce)),w}var hs=64,ba=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jo=24,_o=32,Nl=8,Hs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Me("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(w){return w},N.Predictor2=function(w,T,Y){return T[Y+0]},N.Predictor3=function(w,T,Y){return T[Y+1]},N.Predictor4=function(w,T,Y){return T[Y-1]},N.Predictor5=function(w,T,Y){return We(We(w,T[Y+1]),T[Y+0])},N.Predictor6=function(w,T,Y){return We(w,T[Y-1])},N.Predictor7=function(w,T,Y){return We(w,T[Y+0])},N.Predictor8=function(w,T,Y){return We(T[Y-1],T[Y+0])},N.Predictor9=function(w,T,Y){return We(T[Y+0],T[Y+1])},N.Predictor10=function(w,T,Y){return We(We(w,T[Y-1]),We(T[Y+0],T[Y+1]))},N.Predictor11=function(w,T,Y){var ce=T[Y+0];return 0>=Ct(ce>>24&255,w>>24&255,(T=T[Y-1])>>24&255)+Ct(ce>>16&255,w>>16&255,T>>16&255)+Ct(ce>>8&255,w>>8&255,T>>8&255)+Ct(255&ce,255&w,255&T)?ce:w},N.Predictor12=function(w,T,Y){var ce=T[Y+0];return(at((w>>24&255)+(ce>>24&255)-((T=T[Y-1])>>24&255))<<24|at((w>>16&255)+(ce>>16&255)-(T>>16&255))<<16|at((w>>8&255)+(ce>>8&255)-(T>>8&255))<<8|at((255&w)+(255&ce)-(255&T)))>>>0},N.Predictor13=function(w,T,Y){var ce=T[Y-1];return(ut((w=We(w,T[Y+0]))>>24&255,ce>>24&255)<<24|ut(w>>16&255,ce>>16&255)<<16|ut(w>>8&255,ce>>8&255)<<8|ut(w>>0&255,ce>>0&255))>>>0};var oo=N.PredictorAdd0;N.PredictorAdd1=Xe,Me("Predictor2","PredictorAdd2"),Me("Predictor3","PredictorAdd3"),Me("Predictor4","PredictorAdd4"),Me("Predictor5","PredictorAdd5"),Me("Predictor6","PredictorAdd6"),Me("Predictor7","PredictorAdd7"),Me("Predictor8","PredictorAdd8"),Me("Predictor9","PredictorAdd9"),Me("Predictor10","PredictorAdd10"),Me("Predictor11","PredictorAdd11"),Me("Predictor12","PredictorAdd12"),Me("Predictor13","PredictorAdd13");var ao=N.PredictorAdd2;ot("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Nc,ws=N.ColorIndexInverseTransform,Ba=N.MapARGB,Gs=N.VP8LColorIndexInverseTransformAlpha,Ws=N.MapAlpha,Ra=N.VP8LPredictorsAdd=[];Ra.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Fa,qs,Ts,_a,zo,Ys,Lt,Xt,It,Tn,Yn,yr,Bi,hi,du,lo,Ri,wa,ja,xa,La,Ca,Vr,aa,Ds,fi,vi,ns,Mi=s(511),$o=s(2041),wo=s(225),Wo=s(767),nc=0,Sa=$o,fs=wo,Li=Wo,Ks=Mi,xo=0,hr=1,za=2,$a=3,la=4,uo=5,ud=6,Os=7,Ns=8,ua=9,c=10,y=[2,3,7],M=[3,3,11],q=[280,256,256,256,40],ue=[0,1,1,1,0],Pe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ct=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Nt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Gt=8,ln=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],In=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xn=null,Dr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ps=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Gi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Is=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Fi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Lo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cd=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ea=[],ca=[],qo=[],Oh=1,Du=2,ii=[],Zs=[];Ht("UpsampleRgbLinePair",Nr,3),Ht("UpsampleBgrLinePair",Ti,3),Ht("UpsampleRgbaLinePair",Fo,4),Ht("UpsampleBgraLinePair",ds,4),Ht("UpsampleArgbLinePair",ts,4),Ht("UpsampleRgba4444LinePair",di,2),Ht("UpsampleRgb565LinePair",ri,2);var Fe=N.UpsampleRgbLinePair,Co=N.UpsampleBgrLinePair,rc=N.UpsampleRgbaLinePair,Bs=N.UpsampleBgraLinePair,Br=N.UpsampleArgbLinePair,Hd=N.UpsampleRgba4444LinePair,Af=N.UpsampleRgb565LinePair,Gd=16,pl=1<<Gd-1,dd=-227,Nh=482,Gp=6,Ic=0,Wd=s(256),hu=s(256),Wp=s(256),qd=s(256),Yd=s(Nh-dd),Tf=s(Nh-dd);Vs("YuvToRgbRow",Nr,3),Vs("YuvToBgrRow",Ti,3),Vs("YuvToRgbaRow",Fo,4),Vs("YuvToBgraRow",ds,4),Vs("YuvToArgbRow",ts,4),Vs("YuvToRgba4444Row",di,2),Vs("YuvToRgb565Row",ri,2);var Df=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ua=[0,2,8],Of=[8,7,6,4,4,2,2,2,1,1,1,1],Nf=1;this.WebPDecodeRGBA=function(w,T,Y,ce,Le){var ke=hr,Oe=new As,Be=new tr;Oe.ba=Be,Be.S=ke,Be.width=[Be.width],Be.height=[Be.height];var ze=Be.width,Ze=Be.height,gt=new ar;if(gt==null||w==null)var Ft=2;else e(gt!=null),Ft=ya(w,T,Y,gt.width,gt.height,gt.Pd,gt.Qd,gt.format,null);if(Ft!=0?ze=0:(ze!=null&&(ze[0]=gt.width[0]),Ze!=null&&(Ze[0]=gt.height[0]),ze=1),ze){Be.width=Be.width[0],Be.height=Be.height[0],ce!=null&&(ce[0]=Be.width),Le!=null&&(Le[0]=Be.height);e:{if(ce=new br,(Le=new sa).data=w,Le.w=T,Le.ha=Y,Le.kd=1,T=[0],e(Le!=null),((w=ya(Le.data,Le.w,Le.ha,null,null,null,T,null,Le))==0||w==7)&&T[0]&&(w=4),(T=w)==0){if(e(Oe!=null),ce.data=Le.data,ce.w=Le.w+Le.offset,ce.ha=Le.ha-Le.offset,ce.put=io,ce.ac=Ni,ce.bc=Ps,ce.ma=Oe,Le.xa){if((w=dr())==null){Oe=1;break e}if(function(jt,Mt){var Qt=[0],Wt=[0],mt=[0];t:for(;;){if(jt==null)return 0;if(Mt==null)return jt.a=2,0;if(jt.l=Mt,jt.a=0,K(jt.m,Mt.data,Mt.w,Mt.ha),!Zn(jt.m,Qt,Wt,mt)){jt.a=3;break t}if(jt.xb=Du,Mt.width=Qt[0],Mt.height=Wt[0],!Cn(Qt[0],Wt[0],1,jt,null))break t;return 1}return e(jt.a!=0),0}(w,ce)){if(ce=(T=fl(ce.width,ce.height,Oe.Oa,Oe.ba))==0){t:{ce=w;n:for(;;){if(ce==null){ce=0;break t}if(e(ce.s.yc!=null),e(ce.s.Ya!=null),e(0<ce.s.Wb),e((Y=ce.l)!=null),e((Le=Y.ma)!=null),ce.xb!=0){if(ce.ca=Le.ba,ce.tb=Le.tb,e(ce.ca!=null),!tc(Le.Oa,Y,$a)){ce.a=2;break n}if(!fn(ce,Y.width)||Y.da)break n;if((Y.da||Sn(ce.ca.S))&&Pt(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&Pt()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!me(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break n}ce.xb=0}if(!nr(ce,ce.V,ce.Ba,ce.c,ce.i,Y.o,Zt))break n;Le.Dc=ce.Ma,ce=1;break t}e(ce.a!=0),ce=0}ce=!ce}ce&&(T=w.a)}else T=w.a}else{if((w=new Tr)==null){Oe=1;break e}if(w.Fa=Le.na,w.P=Le.P,w.qc=Le.Sa,lr(w,ce)){if((T=fl(ce.width,ce.height,Oe.Oa,Oe.ba))==0){if(w.Aa=0,Y=Oe.Oa,e((Le=w)!=null),Y!=null){if(0<(ze=0>(ze=Y.Md)?0:100<ze?255:255*ze/100)){for(Ze=gt=0;4>Ze;++Ze)12>(Ft=Le.pb[Ze]).lc&&(Ft.ia=ze*Of[0>Ft.lc?0:Ft.lc]>>3),gt|=Ft.ia;gt&&(alert("todo:VP8InitRandom"),Le.ia=1)}Le.Ga=Y.Id,100<Le.Ga?Le.Ga=100:0>Le.Ga&&(Le.Ga=0)}ur(w,ce)||(T=w.a)}}else T=w.a}T==0&&Oe.Oa!=null&&Oe.Oa.fd&&(T=hl(Oe.ba))}Oe=T}ke=Oe!=0?null:11>ke?Be.f.RGBA.eb:Be.f.kb.y}else ke=null;return ke};var If=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(N,z){for(var J="",U=0;U<4;U++)J+=String.fromCharCode(N[z++]);return J}function h(N,z){return(N[z+0]<<0|N[z+1]<<8|N[z+2]<<16)>>>0}function p(N,z){return(N[z+0]<<0|N[z+1]<<8|N[z+2]<<16|N[z+3]<<24)>>>0}new l;var v=[0],m=[0],C=[],E=new l,k=n,A=function(N,z){var J={},U=0,B=!1,G=0,$=0;if(J.frames=[],!function(Ce,_e,H,ee){for(var pe=0;pe<ee;pe++)if(Ce[_e+pe]!=H.charCodeAt(pe))return!0;return!1}(N,z,"RIFF",4)){var F,I;for(p(N,z+=4),z+=8;z<N.length;){var X=u(N,z),K=p(N,z+=4);z+=4;var ve=K+(1&K);switch(X){case"VP8 ":case"VP8L":J.frames[U]===void 0&&(J.frames[U]={}),(ie=J.frames[U]).src_off=B?$:z-8,ie.src_size=G+K+8,U++,B&&(B=!1,G=0,$=0);break;case"VP8X":(ie=J.header={}).feature_flags=N[z];var ge=z+4;ie.canvas_width=1+h(N,ge),ge+=3,ie.canvas_height=1+h(N,ge),ge+=3;break;case"ALPH":B=!0,G=ve+8,$=z-8;break;case"ANIM":(ie=J.header).bgcolor=p(N,z),ge=z+4,ie.loop_count=(F=N)[(I=ge)+0]<<0|F[I+1]<<8,ge+=2;break;case"ANMF":var He,ie;(ie=J.frames[U]={}).offset_x=2*h(N,z),z+=3,ie.offset_y=2*h(N,z),z+=3,ie.width=1+h(N,z),z+=3,ie.height=1+h(N,z),z+=3,ie.duration=h(N,z),z+=3,He=N[z++],ie.dispose=1&He,ie.blend=He>>1&1}X!="ANMF"&&(z+=ve)}return J}}(k,0);A.response=k,A.rgbaoutput=!0,A.dataurl=!1;var D=A.header?A.header:null,R=A.frames?A.frames:null;if(D){D.loop_counter=D.loop_count,v=[D.canvas_height],m=[D.canvas_width];for(var W=0;W<R.length&&R[W].blend!=0;W++);}var Q=R[0],de=E.WebPDecodeRGBA(k,Q.src_off,Q.src_size,m,v);Q.rgba=de,Q.imgwidth=m[0],Q.imgheight=v[0];for(var fe=0;fe<m[0]*v[0]*4;fe++)C[fe]=de[fe];return this.width=m,this.height=v,this.data=C,this}(function(n){var e=function(){return typeof A2=="function"},t=function(v,m,C,E){var k=4,A=o;switch(E){case n.image_compression.FAST:k=1,A=s;break;case n.image_compression.MEDIUM:k=6,A=a;break;case n.image_compression.SLOW:k=9,A=l}v=r(v,m,C,A);var D=A2(v,{level:k});return n.__addimage__.arrayBufferToBinaryString(D)},r=function(v,m,C,E){for(var k,A,D,R=v.length/m,W=new Uint8Array(v.length+R),Q=h(),de=0;de<R;de+=1){if(D=de*m,k=v.subarray(D,D+m),E)W.set(E(k,C,A),D+de);else{for(var fe,N=Q.length,z=[];fe<N;fe+=1)z[fe]=Q[fe](k,C,A);var J=p(z.concat());W.set(z[J],D+de)}A=k}return W},i=function(v){var m=Array.apply([],v);return m.unshift(0),m},s=function(v,m){var C,E=[],k=v.length;E[0]=1;for(var A=0;A<k;A+=1)C=v[A-m]||0,E[A+1]=v[A]-C+256&255;return E},o=function(v,m,C){var E,k=[],A=v.length;k[0]=2;for(var D=0;D<A;D+=1)E=C&&C[D]||0,k[D+1]=v[D]-E+256&255;return k},a=function(v,m,C){var E,k,A=[],D=v.length;A[0]=3;for(var R=0;R<D;R+=1)E=v[R-m]||0,k=C&&C[R]||0,A[R+1]=v[R]+256-(E+k>>>1)&255;return A},l=function(v,m,C){var E,k,A,D,R=[],W=v.length;R[0]=4;for(var Q=0;Q<W;Q+=1)E=v[Q-m]||0,k=C&&C[Q]||0,A=C&&C[Q-m]||0,D=u(E,k,A),R[Q+1]=v[Q]-D+256&255;return R},u=function(v,m,C){if(v===m&&m===C)return v;var E=Math.abs(m-C),k=Math.abs(v-C),A=Math.abs(v+m-C-C);return E<=k&&E<=A?v:k<=A?m:C},h=function(){return[i,s,o,a,l]},p=function(v){var m=v.map(function(C){return C.reduce(function(E,k){return E+Math.abs(k)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(v,m,C,E){var k,A,D,R,W,Q,de,fe,N,z,J,U,B,G,$,F=this.decode.FLATE_DECODE,I="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(D=new eG(v)).imgData,A=D.bits,k=D.colorSpace,W=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){N=(fe=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,J=new Uint8Array(N*D.colors),z=new Uint8Array(N);var X,K=D.pixelBitlength-D.bits;for(G=0,$=0;G<N;G++){for(B=fe[G],X=0;X<K;)J[$++]=B>>>X&255,X+=D.bits;z[G]=B>>>X&255}}if(D.bits===16){N=(fe=new Uint32Array(D.decodePixels().buffer)).length,J=new Uint8Array(N*(32/D.pixelBitlength)*D.colors),z=new Uint8Array(N*(32/D.pixelBitlength)),U=D.colors>1,G=0,$=0;for(var ve=0;G<N;)B=fe[G++],J[$++]=B>>>0&255,U&&(J[$++]=B>>>16&255,B=fe[G++],J[$++]=B>>>0&255),z[ve++]=B>>>16&255;A=8}E!==n.image_compression.NONE&&e()?(v=t(J,D.width*D.colors,D.colors,E),de=t(z,D.width,1,E)):(v=J,de=z,F=void 0)}if(D.colorType===3&&(k=this.color_spaces.INDEXED,Q=D.palette,D.transparency.indexed)){var ge=D.transparency.indexed,He=0;for(G=0,N=ge.length;G<N;++G)He+=ge[G];if((He/=255)===N-1&&ge.indexOf(0)!==-1)R=[ge.indexOf(0)];else if(He!==N){for(fe=D.decodePixels(),z=new Uint8Array(fe.length),G=0,N=fe.length;G<N;G++)z[G]=ge[fe[G]];de=t(z,D.width,1)}}var ie=function(Ce){var _e;switch(Ce){case n.image_compression.FAST:_e=11;break;case n.image_compression.MEDIUM:_e=13;break;case n.image_compression.SLOW:_e=14;break;default:_e=12}return _e}(E);return F===this.decode.FLATE_DECODE&&(I="/Predictor "+ie+" "),I+="/Colors "+W+" /BitsPerComponent "+A+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(de&&this.__addimage__.isArrayBuffer(de)||this.__addimage__.isArrayBufferView(de))&&(de=this.__addimage__.arrayBufferToBinaryString(de)),{alias:C,data:v,index:m,filter:F,decodeParameters:I,transparency:R,palette:Q,sMask:de,predictor:ie,width:D.width,height:D.height,bitsPerComponent:A,colorSpace:k}}}})(Mr.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new tG(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},h=new hb(100).encode(u,100);return n.processJPEG.call(this,h,t,r,i)},n.processGIF87A=n.processGIF89A}(Mr.API),fc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},fc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){ss.log("bit decode error:"+t)}},fc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}t!==0&&(this.pos+=4-t)}},fc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},fc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},fc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=u}this.pos+=n}},fc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&t)/t*255|0,u=(o>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=n}},fc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},fc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},fc.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new fc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new hb(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(Mr.API),V5.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new V5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new hb(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(Mr.API),Mr.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var h=r[u],p=r[u+1],v=r[u+2],m=r[u+3];s[a++]=h,s[a++]=p,s[a++]=v,o[l++]=m}var C=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:C,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Mr.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Xf=Mr.API,P0=Xf.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=u.fof?u.fof:1,p=e.doKerning!==!1,v=0,m=n.length,C=0,E=a[0]||l,k=[];for(t=0;t<m;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&Yi(u[r])==="object"&&!isNaN(parseInt(u[r][C],10))?u[r][C]/h:0,k.push((a[r]||E)/l+v)),C=r;return k},j5=Xf.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Xf.processArabic&&(n=Xf.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:P0.apply(this,arguments).reduce(function(s,o){return s+o},0)},z5=function(n,e,t,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+e[s]<t;)a+=e[s],s++;i.push(n.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(n.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},$5=function(n,e,t){t||(t={});var r,i,s,o,a,l,u,h=[],p=[h],v=t.textIndent||0,m=0,C=0,E=n.split(" "),k=P0.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?E[0].length+2:t.lineIndent||0){var A=Array(l).join(" "),D=[];E.map(function(W){(W=W.split(/\s*\n/)).length>1?D=D.concat(W.map(function(Q,de){return(de&&Q.length?`
`:"")+Q})):D.push(W[0])}),E=D,l=j5.apply(this,[A,t])}for(s=0,o=E.length;s<o;s++){var R=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),R=1),v+m+(C=(i=P0.apply(this,[r,t])).reduce(function(W,Q){return W+Q},0))>e||R){if(C>e){for(a=z5.apply(this,[r,i,e-(v+m),e]),h.push(a.shift()),h=[a.pop()];a.length;)p.push([a.shift()]);C=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(W,Q){return W+Q},0)}else h=[r];p.push(h),v=C+l,m=k}else h.push(r),v+=m+C,m=k}return u=l?function(W,Q){return(Q?A:"")+W.join(" ")}:function(W){return W.join(" ")},p.map(u)},Xf.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat($5.apply(this,[r[a],o,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=n.__fontmetrics__.compress=function(p){var v,m,C,E,k=["{"];for(var A in p){if(v=p[A],isNaN(parseInt(A,10))?m="'"+A+"'":(A=parseInt(A,10),m=(m=s(A).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof v=="number")v<0?(C=s(v).slice(3),E="-"):(C=s(v).slice(2),E=""),C=E+C.slice(0,-1)+r[C.slice(-1)];else{if(Yi(v)!=="object")throw new Error("Don't know what to do with value type "+Yi(v)+".");C=o(v)}k.push(m+C)}return k.push("}"),k.join("")},a=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,m,C,E,k={},A=1,D=k,R=[],W="",Q="",de=p.length-1,fe=1;fe<de;fe+=1)(E=p[fe])=="'"?v?(C=v.join(""),v=void 0):v=[]:v?v.push(E):E=="{"?(R.push([D,C]),D={},C=void 0):E=="}"?((m=R.pop())[0][m[1]]=D,C=void 0,D=m[0]):E=="-"?A=-1:C===void 0?t.hasOwnProperty(E)?(W+=t[E],C=parseInt(W,16)*A,A=1,W=""):W+=E:t.hasOwnProperty(E)?(Q+=t[E],D[C]=parseInt(Q,16)*A,A=1,C=void 0,Q=""):Q+=E;return k},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var v=p.font,m=h.Unicode[v.postScriptName];m&&(v.metadata.Unicode={},v.metadata.Unicode.widths=m.widths,v.metadata.Unicode.kerning=m.kerning);var C=u.Unicode[v.postScriptName];C&&(v.metadata.Unicode.encoding=C,v.encoding=C.codePages[0])}])}(Mr.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Yg(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Mr),function(n){function e(){return(Pr.canvg?Promise.resolve(Pr.canvg):Od(()=>import("./index.es.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Mr.API.addSvgAsImage=function(t,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw ss.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw ss.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(C){return C.fromString(p,t,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(v)}).then(function(){m.addImage(h.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),Mr.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Mr.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,h=0,p=0;function v(C,E){var k,A=!1;for(k=0;k<C.length;k+=1)C[k]===E&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=a.length;for(p=0;p<m;p+=1)t[a[p]].value=t[a[p]].defaultValue,t[a[p]].explicitSet=!1}if(Yi(n)==="object"){for(i in n)if(s=n[i],v(a,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&v(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(h=0;h<s[u].length;h+=1)typeof s[u][h]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,E=[];for(C in t)t[C].explicitSet===!0&&(t[C].type==="name"?E.push("/"+C+" /"+t[C].value):E.push("/"+C+" "+t[C].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Mr.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(u[4-a.length],a)}return h.join("")},r=function(s){var o,a,l,u,h,p,v;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(m,C){return m-C})).length;p<v;p++)o=a[p],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",C=0;C<v.length;C++)m+=String.fromCharCode(v[C]);var E=u();h({data:m,addLength1:!0,objectId:E}),l("endobj");var k=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var A=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+cp(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var D=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+cp(a.fontName)),l("/FontDescriptor "+A+" 0 R"),l("/W "+n.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+cp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+D+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,h=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);var C=u();h({data:v,addLength1:!0,objectId:C}),l("endobj");var E=u();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var k=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+C+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+cp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var A=0;A<a.metadata.hmtx.widths.length;A++)a.metadata.hmtx.widths[A]=parseInt(a.metadata.hmtx.widths[A]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+cp(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,h=s.options||{},p=s.mutex||{},v=p.pdfEscape,m=p.activeFontKey,C=p.fonts,E=m,k="",A=0,D="",R=C[E].encoding;if(C[E].encoding!=="Identity-H")return{text:a,x:l,y:u,options:h,mutex:p};for(D=a,E=m,Array.isArray(a)&&(D=a[0]),A=0;A<D.length;A+=1)C[E].metadata.hasOwnProperty("cmap")&&(o=C[E].metadata.cmap.unicode.codeMap[D[A].charCodeAt(0)]),o||D[A].charCodeAt(0)<256&&C[E].metadata.hasOwnProperty("Unicode")?k+=D[A]:k+="";var W="";return parseInt(E.slice(1))<14||R==="WinAnsiEncoding"?W=v(k,E).split("").map(function(Q){return Q.charCodeAt(0).toString(16)}).join(""):R==="Identity-H"&&(W=t(k,C[E])),p.isHex=!0,{text:W,x:l,y:u,options:h,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Mr),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Mr.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,h,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,R=0;this.__bidiEngine__={};var W=function(U){var B=U.charCodeAt(),G=B>>8,$=E[G];return $!==void 0?p[256*$+(255&B)]:G===252||G===253?"AL":A.test(G)?"L":G===8?"R":"N"},Q=function(U){for(var B,G=0;G<U.length;G++){if((B=W(U.charAt(G)))==="L")return!1;if(B==="R")return!0}return!1},de=function(U,B,G,$){var F,I,X,K,ve=B[$];switch(ve){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(ve="AN");break;case"AL":D=!0,ve="R";break;case"WS":ve="N";break;case"CS":$<1||$+1>=B.length||(F=G[$-1])!=="EN"&&F!=="AN"||(I=B[$+1])!=="EN"&&I!=="AN"?ve="N":D&&(I="AN"),ve=I===F?I:"N";break;case"ES":ve=(F=$>0?G[$-1]:"B")==="EN"&&$+1<B.length&&B[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&G[$-1]==="EN"){ve="EN";break}if(D){ve="N";break}for(X=$+1,K=B.length;X<K&&B[X]==="ET";)X++;ve=X<K&&B[X]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(K=B.length,X=$+1;X<K&&B[X]==="NSM";)X++;if(X<K){var ge=U[$],He=ge>=1425&&ge<=2303||ge===64286;if(F=B[X],He&&(F==="R"||F==="AL")){ve="R";break}}}ve=$<1||(F=B[$-1])==="B"?"N":G[$-1];break;case"B":D=!1,i=!0,ve=R;break;case"S":s=!0,ve="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":ve="N"}return ve},fe=function(U,B,G){var $=U.split("");return G&&N($,G,{hiLevel:R}),$.reverse(),B&&B.reverse(),$.join("")},N=function(U,B,G){var $,F,I,X,K,ve=-1,ge=U.length,He=0,ie=[],Ce=R?m:v,_e=[];for(D=!1,i=!1,s=!1,F=0;F<ge;F++)_e[F]=W(U[F]);for(I=0;I<ge;I++){if(K=He,ie[I]=de(U,_e,ie,I),$=240&(He=Ce[K][C[ie[I]]]),He&=15,B[I]=X=Ce[He][5],$>0)if($===16){for(F=ve;F<I;F++)B[F]=1;ve=-1}else ve=-1;if(Ce[He][6])ve===-1&&(ve=I);else if(ve>-1){for(F=ve;F<I;F++)B[F]=X;ve=-1}_e[I]==="B"&&(B[I]=0),G.hiLevel|=X}s&&function(H,ee,pe){for(var re=0;re<pe;re++)if(H[re]==="S"){ee[re]=R;for(var ae=re-1;ae>=0&&H[ae]==="WS";ae--)ee[ae]=R}}(_e,B,ge)},z=function(U,B,G,$,F){if(!(F.hiLevel<U)){if(U===1&&R===1&&!i)return B.reverse(),void(G&&G.reverse());for(var I,X,K,ve,ge=B.length,He=0;He<ge;){if($[He]>=U){for(K=He+1;K<ge&&$[K]>=U;)K++;for(ve=He,X=K-1;ve<X;ve++,X--)I=B[ve],B[ve]=B[X],B[X]=I,G&&(I=G[ve],G[ve]=G[X],G[X]=I);He=K}He++}}},J=function(U,B,G){var $=U.split(""),F={hiLevel:R};return G||(G=[]),N($,G,F),function(I,X,K){if(K.hiLevel!==0&&h)for(var ve,ge=0;ge<I.length;ge++)X[ge]===1&&(ve=k.indexOf(I[ge]))>=0&&(I[ge]=k[ve+1])}($,G,F),z(2,$,B,G,F),z(1,$,B,G,F),$.join("")};return this.__bidiEngine__.doBidiReorder=function(U,B,G){if(function(F,I){if(I)for(var X=0;X<F.length;X++)I[X]=X;a===void 0&&(a=Q(F)),u===void 0&&(u=Q(F))}(U,B),o||!l||u)if(o&&l&&a^u)R=a?1:0,U=fe(U,B,G);else if(!o&&l&&u)R=a?1:0,U=J(U,B,G),U=fe(U,B);else if(!o||a||l||u){if(o&&!l&&a^u)U=fe(U,B),a?(R=0,U=J(U,B,G)):(R=1,U=J(U,B,G),U=fe(U,B));else if(o&&a&&!l&&u)R=1,U=J(U,B,G),U=fe(U,B);else if(!o&&!l&&a^u){var $=h;a?(R=1,U=J(U,B,G),R=0,h=!1,U=J(U,B,G),h=$):(R=0,U=J(U,B,G),U=fe(U,B),R=1,h=!1,U=J(U,B,G),h=$,U=fe(U,B))}}else R=0,U=J(U,B,G);else R=a?1:0,U=J(U,B,G);return U},this.__bidiEngine__.setOptions=function(U){U&&(o=U.isInputVisual,l=U.isOutputVisual,a=U.isInputRtl,u=U.isOutputRtl,h=U.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([t.doBidiReorder(i[a])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Mr),Mr.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Eh(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new mG(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new nG(this.contents),this.head=new iG(this),this.name=new uG(this),this.cmap=new dM(this),this.toUnicode={},this.hhea=new sG(this),this.maxp=new cG(this),this.hmtx=new dG(this),this.post=new aG(this),this.os2=new oG(this),this.loca=new gG(this),this.glyf=new hG(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Ac,Eh=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),nG=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,o,a,l,u,h,p,v,m,C,E;for(E in m=Object.keys(t).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),o=Math.floor(p/l),h=16*m-p,(i=new Eh).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(h),s=16*m,u=i.pos+s,a=null,C=[],t)for(v=t[E],i.writeString(E),i.writeInt(n(v)),i.writeInt(u),i.writeInt(v.length),C=C.concat(v),E==="head"&&(a=u),u+=v.length;u%4;)C.push(0),u++;return i.write(C),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=hM.call(t);t.length%4;)t.push(0);for(s=new Eh(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),rG={}.hasOwnProperty,ld=function(n,e){for(var t in e)rG.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Ac=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var iG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Ac),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Eh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),H5=function(){function n(e,t){var r,i,s,o,a,l,u,h,p,v,m,C,E,k,A,D,R;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),v=m/2,e.pos+=6,s=function(){var W,Q;for(Q=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)Q.push(e.readUInt16());return Q}(),e.pos+=2,E=function(){var W,Q;for(Q=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)Q.push(e.readUInt16());return Q}(),u=function(){var W,Q;for(Q=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)Q.push(e.readUInt16());return Q}(),h=function(){var W,Q;for(Q=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)Q.push(e.readUInt16());return Q}(),i=(this.length-e.pos+this.offset)/2,a=function(){var W,Q;for(Q=[],l=W=0;0<=i?W<i:W>i;l=0<=i?++W:--W)Q.push(e.readUInt16());return Q}(),l=A=0,R=s.length;A<R;l=++A)for(k=s[l],r=D=C=E[l];C<=k?D<=k:D>=k;r=C<=k?++D:--D)h[l]===0?o=r+u[l]:(o=a[h[l]/2+(r-C)-(v-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=p}return n.encode=function(e,t){var r,i,s,o,a,l,u,h,p,v,m,C,E,k,A,D,R,W,Q,de,fe,N,z,J,U,B,G,$,F,I,X,K,ve,ge,He,ie,Ce,_e,H,ee,pe,re,ae,De,be,Ie;switch($=new Eh,o=Object.keys(e).sort(function(le,me){return le-me}),t){case"macroman":for(E=0,k=function(){var le=[];for(C=0;C<256;++C)le.push(0);return le}(),D={0:0},s={},F=0,ve=o.length;F<ve;F++)D[ae=e[i=o[F]]]==null&&(D[ae]=++E),s[i]={old:e[i],new:D[e[i]]},k[i]=D[e[i]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(k),{charMap:s,subtable:$.data,maxGlyphID:E+1};case"unicode":for(B=[],p=[],R=0,D={},r={},A=u=null,I=0,ge=o.length;I<ge;I++)D[Q=e[i=o[I]]]==null&&(D[Q]=++R),r[i]={old:Q,new:D[Q]},a=D[Q]-i,A!=null&&a===u||(A&&p.push(A),B.push(i),u=a),A=i;for(A&&p.push(A),p.push(65535),B.push(65535),J=2*(z=B.length),N=2*Math.pow(Math.log(z)/Math.LN2,2),v=Math.log(N/2)/Math.LN2,fe=2*z-N,l=[],de=[],m=[],C=X=0,He=B.length;X<He;C=++X){if(U=B[C],h=p[C],U===65535){l.push(0),de.push(0);break}if(U-(G=r[U].new)>=32768)for(l.push(0),de.push(2*(m.length+z-C)),i=K=U;U<=h?K<=h:K>=h;i=U<=h?++K:--K)m.push(r[i].new);else l.push(G-U),de.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*z+2*m.length),$.writeUInt16(0),$.writeUInt16(J),$.writeUInt16(N),$.writeUInt16(v),$.writeUInt16(fe),pe=0,ie=p.length;pe<ie;pe++)i=p[pe],$.writeUInt16(i);for($.writeUInt16(0),re=0,Ce=B.length;re<Ce;re++)i=B[re],$.writeUInt16(i);for(De=0,_e=l.length;De<_e;De++)a=l[De],$.writeUInt16(a);for(be=0,H=de.length;be<H;be++)W=de[be],$.writeUInt16(W);for(Ie=0,ee=m.length;Ie<ee;Ie++)E=m[Ie],$.writeUInt16(E);return{charMap:r,subtable:$.data,maxGlyphID:R+1}}},n}(),dM=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Ac),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new H5(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=H5.encode(t,r),(s=new Eh).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),sG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Ac),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),oG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Ac),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),aG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Ac),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(t.readUInt32());return u}).call(this)}},e}(),lG=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},uG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Ac),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,o,a,l,u,h,p,v,m;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},o=p=0,v=i.length;p<v;o=++p)s=i[o],t.pos=s.offset,h=t.readString(s.length),a=new lG(h,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),cG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Ac),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),dG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Ac),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,o,a,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,p;for(p=[],r=h=0;0<=s?h<s:h>s;r=0<=s?++h:--h)p.push(t.readInt16());return p}(),this.widths=(function(){var h,p,v,m;for(m=[],h=0,p=(v=this.metrics).length;h<p;h++)o=v[h],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),hM=[].slice,hG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Ac),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,o,a,l,u,h,p,v;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(l=new Eh(r.read(s))).readShort(),h=l.readShort(),v=l.readShort(),u=l.readShort(),p=l.readShort(),this.cache[t]=a===-1?new pG(l,h,v,u,p):new fG(l,a,h,v,u,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=t[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),fG=function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),pG=function(){function n(e,t,r,i,s){var o,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Eh(hM.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),gG=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return ld(e,Ac),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},e}(),mG=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))r=l[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,o,a,l,u,h,p,v,m,C,E,k,A;for(i in r=dM.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},A=r.charMap)m[(l=A[i]).old]=l.new;for(C in v=r.maxGlyphID,o)C in m||(m[C]=v++);return h=function(D){var R,W;for(R in W={},D)W[D[R]]=R;return W}(m),p=Object.keys(h).sort(function(D,R){return D-R}),E=function(){var D,R,W;for(W=[],D=0,R=p.length;D<R;D++)a=p[D],W.push(h[a]);return W}(),s=this.font.glyf.encode(o,E,m),u=this.font.loca.encode(s.offsets,E),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},n}();Mr.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var a,l,u;for(u=[],a=0,l=t.length;a<l;a++)r=t[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+t},e}();const vG={class:"h-full flex"},yG={class:"flex-1 relative"},bG={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},_G={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},wG={class:"text-center max-w-lg mx-auto p-8"},xG={class:"space-y-4"},LG={class:"map-parent"},CG={class:"map-content flex flex-col h-full"},SG={class:"flex-1 flex flex-col md:flex-row relative"},EG={class:"flex-1 relative"},MG={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},PG={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},kG={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},AG={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},TG={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},DG={key:0,class:"space-y-4"},OG={key:0,class:"space-y-2"},NG={class:"grid grid-cols-1 gap-2"},IG=["onClick"],BG={class:"font-medium text-gray-900"},RG={key:1,class:"space-y-2"},FG={class:"flex items-center mb-4"},jG={class:"text-sm text-gray-600"},zG={class:"grid grid-cols-1 gap-2"},$G=["onClick"],UG={class:"font-medium text-gray-900"},VG={key:2,class:"space-y-2"},HG={class:"flex items-center mb-4"},GG={class:"text-sm text-gray-600"},WG={class:"grid grid-cols-1 gap-2"},qG={key:0,class:"text-center py-4"},YG=["onClick"],KG={class:"font-medium text-gray-900"},ZG={key:3,class:"space-y-2"},XG={class:"flex items-center mb-4"},JG={class:"text-sm text-gray-600"},QG={class:"grid grid-cols-1 gap-2"},eW=["onClick"],tW={class:"font-medium text-gray-900"},nW={class:"text-sm text-gray-500"},rW={class:"text-xs text-gray-400 mt-1"},iW=["onClick"],sW={key:1,class:"space-y-4"},oW={key:0,class:"space-y-2"},aW={class:"grid grid-cols-1 gap-2"},lW={key:0,class:"text-center py-8"},uW=["onClick"],cW={class:"font-medium text-gray-900"},dW={key:1,class:"space-y-2"},hW={class:"flex items-center mb-4"},fW={class:"text-sm text-gray-600"},pW={class:"grid grid-cols-1 gap-2"},gW=["onClick"],mW={class:"font-medium text-gray-900"},vW={class:"text-sm text-gray-500"},yW={class:"text-xs text-gray-400 mt-1"},bW=["onClick"],_W={key:2,class:"space-y-4"},wW={key:0,class:"space-y-2"},xW={class:"grid grid-cols-1 gap-2"},LW=["onClick"],CW={class:"font-medium text-gray-900"},SW={key:1,class:"space-y-2"},EW={class:"flex items-center mb-4"},MW={class:"text-sm text-gray-600"},PW={class:"grid grid-cols-1 gap-2"},kW={key:0,class:"text-center py-4"},AW=["onClick"],TW={class:"font-medium text-gray-900"},DW={key:2,class:"space-y-2"},OW={class:"flex items-center mb-4"},NW={class:"text-sm text-gray-600"},IW={class:"grid grid-cols-1 gap-2"},BW=["onClick"],RW={class:"font-medium text-gray-900"},FW={class:"text-sm text-gray-500"},jW={class:"text-xs text-gray-400 mt-1"},zW=["onClick"],$W={key:3,class:"space-y-4"},UW={key:0,class:"text-center py-8"},VW={key:1,class:"space-y-2"},HW=["onClick"],GW={class:"font-medium text-gray-900"},WW={class:"text-sm text-gray-500"},qW={class:"text-xs text-gray-400 mt-1"},YW=["onClick"],KW={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},ZW={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},XW={class:"text-center mb-4"},JW={class:"mt-2 text-gray-600"},G5=Ms({__name:"MapView",emits:["shape-selected"],setup(n,{emit:e}){const t=sR(),r=wt(null),i=wt(!1),s=Hy(),o=Op(),a=wf(),l=eu(),u=wt([]),h=wt({planId:t.query.planId?parseInt(t.query.planId):null,noteId:t.query.noteId?parseInt(t.query.noteId):null,lat:t.query.lat?parseFloat(t.query.lat):null,lng:t.query.lng?parseFloat(t.query.lng):null,tool:t.query.tool||null}),{currentTool:p,selectedShape:v,map:m,initMap:C,setDrawingTool:E,updateShapeStyle:k,updateShapeProperties:A,featureGroup:D,adjustView:R,clearActiveControlPoints:W,isDrawing:Q}=WV(),{initMap:de,changeBaseMap:fe}=XV(),N=wt(!1),z=wt(!1),J=wt(!1),U=wt(!1),B=wt(null),G=wt(null),$=wt(null),F=wt(!1),I=wt(null),X=ro(),K=wt([]),ve=wt([]),ge=wt([]),He=wt(null),ie=wt(null),Ce=wt(null),_e=wt(!1),H=wt(!1),ee=wt(!1),pe=wt(null),re=Gn(()=>{var bt,rt;return console.log("[MapView][filteredClients] Computing with:",{userType:(bt=X.user)==null?void 0:bt.user_type,selectedSalarie:He.value,salarieVisiteurs:ve.value,visiteurCount:((rt=ve.value)==null?void 0:rt.length)||0}),X.isSalarie||He.value?ve.value:[]}),ae=Gn(()=>{var rn,Zt,qn;if(!v.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:v.value,hasName:"name"in v.value,name:v.value.name,hasProperties:"properties"in v.value,propertiesName:(rn=v.value.properties)==null?void 0:rn.name,allLayerKeys:Object.keys(v.value),allPropertiesKeys:v.value.properties?Object.keys(v.value.properties):[],_leaflet_id:v.value._leaflet_id,_dbId:v.value._dbId,descriptor:Object.getOwnPropertyDescriptor(v.value,"name")});const bt=v.value.properties||{};let rt="unknown";bt.type?rt=bt.type:v.value instanceof Ut.Circle?rt="Circle":v.value instanceof Aa||v.value instanceof Ut.Rectangle?rt="Rectangle":v.value instanceof Gl||v.value instanceof Ut.Polygon?rt="Polygon":(v.value instanceof xs||v.value instanceof Ut.Polyline&&!(v.value instanceof Ut.Polygon))&&(rt="Line"),console.log(`[MapView][selectedShape] Type de forme détecté: ${rt}`),bt.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=rt);let Vt;if(bt.style&&bt.style.name)Vt=bt.style.name,console.log("[MapView][selectedShape] Using name from style:",Vt);else if(bt.name)Vt=bt.name,console.log("[MapView][selectedShape] Using name from properties:",Vt);else if(v.value.name)Vt=v.value.name,console.log("[MapView][selectedShape] Using name from layer:",Vt);else{const St=Object.getOwnPropertyDescriptor(v.value,"name");St&&St.value&&(Vt=St.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",Vt));const gn=["_name","displayName","title"];for(const nr of gn)if(v.value[nr]){Vt=v.value[nr],console.log(`[MapView][selectedShape] Found name in ${nr}:`,Vt);break}}Vt&&(console.log(`[MapView][selectedShape] Ensuring name "${Vt}" is set everywhere`),v.value.properties||(v.value.properties={}),v.value.properties.name=Vt,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=Vt,v.value.name=Vt,typeof v.value.setName=="function"&&(v.value.setName(Vt),console.log(`[MapView][selectedShape] Used setName method to set name "${Vt}"`))),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:rt,name:bt.name,foundName:Vt,hasNameProperty:"name"in bt,allPropertiesKeys:Object.keys(bt),layerId:v.value._leaflet_id,rawProperties:bt,layerName:v.value.name,layerPropertiesName:(Zt=v.value.properties)==null?void 0:Zt.name});const Ln={...bt,type:rt,name:Vt||v.value.name||bt.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"},Kt={type:rt,properties:Ln,layer:v.value,options:v.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:Kt.type,hasName:"name"in Kt.properties,name:Kt.properties.name,layerName:Kt.layer.name,layerPropertiesName:(qn=Kt.layer.properties)==null?void 0:qn.name}),Kt});function De(bt){const rt=bt.getCenter(),Vt=bt.getZoom(),Ln={lat:rt.lat,lng:rt.lng,zoom:Vt};document.cookie=`mapState=${JSON.stringify(Ln)};max-age=2592000;path=/`}function be(){const rt=document.cookie.split(";").find(Vt=>Vt.trim().startsWith("mapState="));if(rt)try{return JSON.parse(rt.split("=")[1])}catch(Vt){return console.error("Erreur lors de la lecture du cookie de position:",Vt),null}return null}Ss(async()=>{var bt,rt;console.log("[MapView][onMounted] Initialisation du composant MapView"),window.addEventListener("resize",Zn),console.log("[MapView][onMounted] État initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),(X.isAdmin||X.isEntreprise)&&await Yt(),X.isEntreprise){_e.value=!0;try{const St=await On.get("/users/",{params:{role:"SALARIE",entreprise:(bt=X.user)==null?void 0:bt.id}});K.value=St.data}catch(St){console.error("Error loading salaries:",St),K.value=[]}finally{_e.value=!1}}if(X.isSalarie){H.value=!0;try{const St=await X.fetchSalarieVisiteurs(((rt=X.user)==null?void 0:rt.id)||0);ve.value=Array.isArray(St)?St:[St]}catch(St){console.error("Error loading clients:",St)}finally{H.value=!1}}const Vt=be(),Ln=Vt?[Vt.lat,Vt.lng]:[46.603354,1.888334],Kt=(Vt==null?void 0:Vt.zoom)??6;if(r.value&&!m.value){const St=C(r.value,Ln,Kt);St.pm.setLang("fr"),St.pm.addControls({rotateMode:!1}),de(St),St.on("moveend",()=>{De(St)}),window.addEventListener("map-set-location",gn=>{if(St&&gn.detail){const{lat:nr,lng:Vn,zoom:dr}=gn.detail;St.flyTo([nr,Vn],dr,{duration:1.5,easeLinearity:.25})}}),D.value&&(D.value.on("layeradd",gn=>{const nr=gn.layer;nr&&nr._leaflet_id&&u.value.findIndex(dr=>dr.layer&&dr.layer._leaflet_id===nr._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${nr._leaflet_id} à shapes.value`),u.value.push({layer:nr,id:nr._dbId||nr._leaflet_id}))}),D.value.on("layerremove",gn=>{const nr=gn.layer;if(nr&&nr._leaflet_id)if(!nr._dbId&&(!nr.properties||nr.properties&&!nr.properties.type)){console.log(`[MapView][featureGroup.layerremove] Couche temporaire ${nr._leaflet_id} supprimée définitivement`);const dr=u.value.findIndex(Cn=>Cn.layer&&Cn.layer._leaflet_id===nr._leaflet_id);dr!==-1&&u.value.splice(dr,1)}else console.log(`[MapView][featureGroup.layerremove] Couche ${nr._leaflet_id} supprimée du featureGroup mais conservée dans shapes.value pour restauration ultérieure`)}))}if(h.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramètres d'URL:",h.value.planId),await Ae(h.value.planId);const St=document.querySelector(".map-parent");St instanceof HTMLElement&&(St.style.display="block"),h.value.lat&&h.value.lng&&m.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnées:",h.value.lat,h.value.lng),m.value.flyTo([h.value.lat,h.value.lng],30)),h.value.noteId&&D.value&&(console.log("[MapView][onMounted] Recherche de la note:",h.value.noteId),setTimeout(()=>{var nr;const gn=((nr=D.value)==null?void 0:nr.getLayers())||[];for(const Vn of gn)if(Vn._dbId===h.value.noteId||Vn.id===h.value.noteId){if(console.log("[MapView][onMounted] Note trouvée:",Vn),typeof Vn.fire=="function"&&Vn.fire("click"),typeof Vn.bringToFront=="function"&&Vn.bringToFront(),m.value){const dr=typeof Vn.getLatLng=="function"?Vn.getLatLng():[h.value.lat,h.value.lng];m.value.flyTo(dr,18)}break}},1e3)),h.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",h.value.tool),E(h.value.tool))}catch(St){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",St),rn()}else rn();async function rn(){const St=localStorage.getItem("lastPlanId");if(St)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",St),await Ae(parseInt(St));const gn=document.querySelector(".map-parent");gn instanceof HTMLElement&&(gn.style.display="block")}catch(gn){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",gn),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),oe(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan à charger"),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),oe()}window.addEventListener("shape:created",St=>{const{shape:gn,type:nr,properties:Vn}=St.detail;console.log("[MapView] Nouvelle forme créée",{shape:gn,type:nr,properties:Vn}),o.addElement(gn),E("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[MapView] Événement geonote:savePlan reçu - Sauvegarde automatique du plan"),je()}),window.addEventListener("geonote:select",St=>{if(console.log("[MapView] Événement geonote:select reçu",St.detail),St.detail&&St.detail.geoNote){const gn=St.detail.geoNote;v.value=gn,Zo(()=>{console.log("[MapView] Note géolocalisée sélectionnée:",gn)})}}),window.addEventListener("categoriesReactivated",St=>{console.log("[MapView][categoriesReactivated] Événement reçu:",St.detail),zn()}),window.addEventListener("shapeTypesReactivated",St=>{console.log("[MapView][shapeTypesReactivated] Événement reçu:",St.detail),zn()});const Zt=St=>{if(console.log("[MapView] Édition de note via Leaflet",St),console.log("[MapView] Type de e:",typeof St,"Contenu de e:",JSON.stringify(St)),!St||!St.note){console.error("[MapView] Erreur: e.note est undefined ou null",St);return}const gn=St.note;console.log("[MapView] Note à éditer:",gn),G.value={id:gn.id,title:gn.title||gn.name,description:gn.description,location:gn.location,columnId:gn.columnId||a.getDefaultColumn.id,accessLevel:gn.accessLevel,style:gn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:gn.createdAt||new Date().toISOString(),updatedAt:gn.updatedAt||new Date().toISOString(),comments:gn.comments||[],photos:gn.photos||[]},console.log("[MapView] editingMapNote.value après conversion:",G.value),J.value=!0,console.log("[MapView] showNoteEditModal.value:",J.value)},qn=St=>{if(console.log("[MapView] Édition de note via événement global",St),!St.detail||!St.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",St);return}const gn=St.detail.note;console.log("[MapView] Note à éditer (global):",gn);let Vn=St.detail.backendId||gn.backendId;if(!Vn){const dr=u.value.find(Cn=>Cn.layer===St.detail.source);Vn=dr?dr.id:gn.id}console.log("[MapView] ID backend de la note pour l'API:",Vn,"Source:",St.detail.source?"Couche Leaflet":"Autre"),G.value={id:Vn,leafletId:gn.id,title:gn.title||gn.name,description:gn.description,location:gn.location,columnId:gn.columnId||a.getDefaultColumn.id,accessLevel:gn.accessLevel,style:gn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:gn.createdAt||new Date().toISOString(),updatedAt:gn.updatedAt||new Date().toISOString(),comments:gn.comments||[],photos:gn.photos||[]},console.log("[MapView] Note préparée pour édition:",G.value),J.value=!0};window.addEventListener("geonote:edit",qn),D.value&&(D.value.off("note:edit"),D.value.on("note:edit",Zt))}catch(Vt){console.error("Error during component mount:",Vt),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),oe(),localStorage.removeItem("lastPlanId")}}),ai(()=>o.hasUnsavedChanges,bt=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",bt),bt&&B.value&&(s.markUnsavedChanges(),je())});let Ie;Ss(()=>{Ie=setInterval(()=>{o.hasUnsavedChanges&&B.value&&je()},6e4)}),Jl(()=>{clearInterval(Ie)}),ai(()=>s.plans,bt=>{console.log("[MapView][watch irrigationStore.plans] Mise à jour de la liste des plans:",bt.length),z.value&&(Ce.value||console.log("[MapView][watch irrigationStore.plans] Mise à jour de l'interface client"))},{deep:!0}),ai(()=>o.filters,(bt,rt)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres détecté:",JSON.stringify(bt,null,2)),rt){const Vt=JSON.stringify(rt.accessLevels)!==JSON.stringify(bt.accessLevels),Ln=JSON.stringify(rt.categories)!==JSON.stringify(bt.categories),Kt=JSON.stringify(rt.shapeTypes)!==JSON.stringify(bt.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements détectés:",{accessLevelsChanged:Vt,categoriesChanged:Ln,shapeTypesChanged:Kt}),Vt||Ln||Kt?(console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),zn()):console.log("[MapView][watch drawingStore.filters] Aucun changement réel, pas de mise à jour")}else console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),zn()},{deep:!0});const le=bt=>{console.log("[MapView][filtersChanged] Événement reçu:",bt.detail),zn()};Ss(()=>{window.addEventListener("filtersChanged",le)}),Jl(()=>{window.removeEventListener("filtersChanged",le),console.log("[MapView][filtersChanged] Événement désactivé")}),ai(()=>o.getFilteredElements,(bt,rt)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage, éléments filtrés:",{nouveaux:bt.length,anciens:rt?rt.length:"aucun",ids:bt.map(Vt=>Vt.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage suite au changement d'elements filtrés"),zn()},{deep:!0}),ai(m,async bt=>{var rt;console.log(`
[MapView][watch map] Nouvelle carte:`,!!bt),bt&&s.currentPlan&&!((rt=D.value)!=null&&rt.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des éléments du plan:",s.currentPlan.id),oe(),await o.loadPlanElements(s.currentPlan.id))}),ai(()=>s.currentPlan,async(bt,rt)=>{var Vt,Ln,Kt;if((bt==null?void 0:bt.id)===(rt==null?void 0:rt.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement nécessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",bt==null?void 0:bt.id);try{if(bt){console.log("[MapView][watch currentPlan] Mise à jour du plan courant..."),B.value=bt;const rn=document.querySelector(".map-parent");rn instanceof HTMLElement&&(rn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis à jour avec succès")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),B.value=null,oe();const rn=document.querySelector(".map-parent");rn instanceof HTMLElement&&(rn.style.display="none")}}catch(rn){console.error("[MapView][watch currentPlan] ERREUR:",rn),B.value=null,oe()}console.log("[MapView][watch currentPlan] État final:",{currentPlanId:(Vt=B.value)==null?void 0:Vt.id,storePlanId:(Ln=s.currentPlan)==null?void 0:Ln.id,mapVisible:m.value!==null,mapParentDisplay:(Kt=document.querySelector(".map-parent"))==null?void 0:Kt.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),Th(()=>{m.value&&m.value.off("moveend"),window.removeEventListener("resize",Zn),window.removeEventListener("shape:created",()=>{})});function me(){i.value=!i.value}function oe(){D.value&&(D.value.eachLayer(bt=>{var rt;((rt=bt.properties)==null?void 0:rt.type)==="Note"&&typeof bt.resetPlanSaveState=="function"&&bt.resetPlanSaveState()}),D.value.clearLayers()),u.value=[],W(),v.value=null,p.value=""}async function Z(bt){return await kn.measureAsync("refreshMapWithPlan",async()=>{try{kn.measure("refreshMapWithPlan:clearMap",()=>{oe()},"MapView"),await kn.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await o.loadPlanElements(bt)},"MapView");const rt=kn.measure("refreshMapWithPlan:getPlanById",()=>s.getPlanById(bt),"MapView");rt?(kn.measure("refreshMapWithPlan:updateCurrentPlan",()=>{B.value=rt,s.setCurrentPlan(rt),o.setCurrentPlan(rt.id),localStorage.setItem("lastPlanId",rt.id.toString())},"MapView"),await kn.measureAsync("refreshMapWithPlan:loadPlanNotes",async()=>{try{console.log("[MapView][refreshMapWithPlan] Chargement des notes géolocalisées associées au plan:",bt);const Ln=(await pa.getNotesByPlan(bt)).data;console.log(`[MapView][refreshMapWithPlan] ${Ln.length} notes géolocalisées récupérées`);const Kt=wf();m.value&&D.value&&Ln.forEach(rn=>{try{if(Kt.addNote({...rn,id:rn.id,columnId:rn.column,accessLevel:rn.access_level}),rn.location&&rn.location.type==="Point"&&Array.isArray(rn.location.coordinates)&&rn.location.coordinates.length===2){const Zt=xl.fromBackendData({name:rn.title,description:rn.description,location:rn.location,columnId:rn.column,accessLevel:rn.access_level,style:rn.style||{color:rn.color||"#3B82F6",weight:2,opacity:1,fillColor:rn.color||"#3B82F6",fillOpacity:.6,radius:8},category:rn.category||"forages",comments:rn.comments||[],photos:rn.photos||[]});Zt._dbId=rn.id,D.value.addLayer(Zt),u.value.push({id:rn.id,type:"Note",layer:Zt,properties:Zt.properties}),console.log("[MapView][refreshMapWithPlan] Note géolocalisée ajoutée à la carte:",{id:rn.id,title:rn.title,location:rn.location})}}catch(Zt){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note géolocalisée:",Zt)}})}catch(Vt){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes géolocalisées:",Vt)}},"MapView"),m.value&&D.value&&await kn.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] Éléments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(Zt=>{var qn;return{id:Zt.id,type:Zt.type_forme,hasName:Zt.data&&"name"in Zt.data,name:(qn=Zt.data)==null?void 0:qn.name}})});const Vt=o.getCurrentElements.reduce((Zt,qn)=>(Zt[qn.type_forme]||(Zt[qn.type_forme]=[]),Zt[qn.type_forme].push(qn),Zt),{}),Ln=["Note","Polygon","Line","Circle","Rectangle"],Kt=Object.keys(Vt).sort((Zt,qn)=>{const St=Ln.indexOf(Zt),gn=Ln.indexOf(qn);return(St===-1?999:St)-(gn===-1?999:gn)}),rn=Zt=>{switch(Zt){case"Note":return 20;case"Circle":return 15;case"Rectangle":return 15;case"Line":return 10;case"Polygon":return 5;default:return 10}};for(const Zt of Kt){const qn=Vt[Zt],St=rn(Zt);for(let gn=0;gn<qn.length;gn+=St){const nr=qn.slice(gn,gn+St);await Promise.all(nr.map(async Vn=>{await kn.measureAsync(`refreshMapWithPlan:createElement:${Vn.type_forme}`,async()=>{var Cn;if(!D.value||!Vn.data)return;let dr=null;switch(Vn.type_forme){case"Circle":{const fn=Vn.data;fn.center&&fn.radius&&(dr=new lp(Ut.latLng(fn.center[1],fn.center[0]),{...fn.style,radius:fn.radius}),fn.name&&(dr.properties={type:"Circle",name:fn.name,style:fn.style,radius:fn.radius,diameter:fn.radius*2,surface:Math.PI*fn.radius*fn.radius,perimeter:2*Math.PI*fn.radius},dr.name=fn.name));break}case"Rectangle":{const fn=Vn.data;if(fn.bounds){const li=Ut.latLngBounds(Ut.latLng(fn.bounds.southWest[1],fn.bounds.southWest[0]),Ut.latLng(fn.bounds.northEast[1],fn.bounds.northEast[0]));dr=new Aa(li,fn.style),fn.name&&(dr.properties={name:fn.name},dr.name=fn.name)}break}case"Polygon":{const fn=Vn.data;if(fn.points&&fn.points.length>0){const li=fn.points.map(Ci=>Ut.latLng(Ci[1],Ci[0]));dr=new Gl(li,fn.style),fn.name&&(dr.properties={name:fn.name},dr.name=fn.name)}break}case"Line":{const fn=Vn.data;if(fn.points&&fn.points.length>0){const li=fn.points.map(Ci=>Ut.latLng(Ci[1],Ci[0]));dr=new xs(li,fn.style),fn.name&&(dr.properties={name:fn.name},dr.name=fn.name)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Création d'une note:",Vn.data);const fn=Vn.data;if(fn.location&&Array.isArray(fn.location)&&fn.location.length===2||fn.location&&typeof fn.location=="object"&&fn.location.type==="Point"&&Array.isArray(fn.location.coordinates)&&fn.location.coordinates.length===2)try{fn.category||(fn.category="forages",console.log("[MapView][refreshMapWithPlan] Catégorie par défaut ajoutée:",fn.category)),fn.accessLevel||(fn.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accès par défaut ajouté:",fn.accessLevel));const Ci=xl.fromBackendData(fn);Ci._dbId=Vn.id,dr=Ci,console.log("[MapView][refreshMapWithPlan] Note créée:",{id:Vn.id,location:fn.location,name:fn.name,category:fn.category,accessLevel:fn.accessLevel,type:Ci.properties.type})}catch(Ci){console.error("[MapView][refreshMapWithPlan] Erreur lors de la création de la Note:",Ci)}else console.error("[MapView][refreshMapWithPlan] Données invalides pour Note:",fn),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}dr&&(dr._dbId=Vn.id,(Cn=D.value)==null||Cn.addLayer(dr),u.value.push({id:Vn.id,type:Vn.type_forme,layer:dr,properties:dr.properties}))},"MapView")})),await new Promise(Vn=>requestAnimationFrame(()=>setTimeout(Vn,0)))}}kn.measure("refreshMapWithPlan:adjustView",()=>{setTimeout(()=>{R(),m.value&&m.value.invalidateSize({animate:!1,pan:!1})},100)},"MapView")},"MapView"),console.log(`Plan ${bt} chargé avec succès avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${bt} introuvable après chargement`),z.value=!1}catch(rt){throw console.error("Erreur lors du rafraîchissement de la carte:",rt),rt}},"MapView")}async function Ae(bt){return await kn.measureAsync("loadPlan",async()=>{var rt;console.log(`
[MapView][loadPlan] ====== DÉBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",bt);try{const Vt=await kn.measureAsync("loadPlan:getPlanFromStore",async()=>s.getPlanById(bt),"MapView");if(console.log("[MapView][loadPlan] Plan trouvé dans le store:",!!Vt),!Vt){console.log("[MapView][loadPlan] Plan non trouvé dans le store, vérification API...");try{await kn.measureAsync("loadPlan:apiCheck",async()=>{await On.get(`/plans/${bt}/`)},"MapView")}catch(Ln){throw((rt=Ln.response)==null?void 0:rt.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),oe()),Ln}}console.log("[MapView][loadPlan] Rafraîchissement de la carte..."),await kn.measureAsync("loadPlan:refreshMap",async()=>{await Z(bt)},"MapView"),z.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),zt(),console.log("[MapView][loadPlan] Plan chargé avec succès:",{planId:bt,elementsCount:o.getCurrentElements.length})}catch(Vt){throw console.error("Erreur lors du chargement du plan:",Vt),kn.measure("loadPlan:errorRecovery",()=>{B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),oe(),localStorage.removeItem("lastPlanId")},"MapView"),Vt}},"MapView")}async function je(){var bt;if(!B.value||!D.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}F.value=!0,I.value="saving";try{const rt=[],Vt=new Set(o.getCurrentElements.filter(Zt=>Zt.id!==void 0).map(Zt=>Zt.id)),Ln=new Set;console.log("[savePlan] Début de la sauvegarde",{featureGroupLayers:D.value.getLayers().length,existingIds:Array.from(Vt),currentElements:o.getCurrentElements}),D.value.eachLayer(Zt=>{var nr,Vn,dr,Cn,fn,li,Ci,Si,Or,fr,ls,us,Ai,ks,bs,Ki,zs,Io,cs,br,Tr,pr,ea;console.log("[savePlan] Traitement de la couche",{type:(nr=Zt.properties)==null?void 0:nr.type,name:(Vn=Zt.properties)==null?void 0:Vn.name,isPolygon:Zt instanceof Ut.Polygon,properties:Zt.properties});let qn,St;const gn={color:Zt.options.color||"#2b6451",weight:Zt.options.weight||3,opacity:Zt.options.opacity||1,fillColor:Zt.options.fillColor||"#2b6451",fillOpacity:Zt.options.fillOpacity||.2,dashArray:Zt.options.dashArray||""};if(Zt instanceof Aa){qn="Rectangle";const lr=Zt.getBounds();St={bounds:{southWest:[lr.getSouthWest().lng,lr.getSouthWest().lat],northEast:[lr.getNorthEast().lng,lr.getNorthEast().lat]},style:gn,name:((dr=Zt.properties)==null?void 0:dr.name)||"",rotation:Zt.getRotation(),width:Zt.getDimensions().width,height:Zt.getDimensions().height,center:[Zt.getCenter().lng,Zt.getCenter().lat]}}else if(Zt instanceof Ut.Circle)qn="Circle",St={center:[Zt.getLatLng().lng,Zt.getLatLng().lat],radius:Zt.getRadius(),name:((Cn=Zt.properties)==null?void 0:Cn.name)||"",style:gn};else if(Zt instanceof Ut.Rectangle){qn="Rectangle";const lr=Zt.getBounds();St={bounds:{southWest:[lr.getSouthWest().lng,lr.getSouthWest().lat],northEast:[lr.getNorthEast().lng,lr.getNorthEast().lat]},name:((fn=Zt.properties)==null?void 0:fn.name)||"",style:gn}}else if(Zt instanceof Ut.Polyline&&!(Zt instanceof Ut.Polygon))if(((li=Zt.properties)==null?void 0:li.type)==="ElevationLine"){qn="ElevationLine";const lr=Zt.getLatLngs(),Ei=((Ci=Zt.properties)==null?void 0:Ci.category)||"forages",Zi=((Si=Zt.properties)==null?void 0:Si.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catégorie:",Ei,"Niveau d'accès:",Zi),St={points:lr.map(ur=>[ur.lng,ur.lat]),style:{...gn,color:((Or=Zt.properties.style)==null?void 0:Or.color)||"#FF4500",weight:((fr=Zt.properties.style)==null?void 0:fr.weight)||4,opacity:((ls=Zt.properties.style)==null?void 0:ls.opacity)||.8,_accessLevel:Zi,accessLevel:Zi},name:((us=Zt.properties)==null?void 0:us.name)||"",category:Ei,accessLevel:Zi,elevationData:Zt.properties.elevationData,samplePointStyle:Zt.properties.samplePointStyle,minMaxPointStyle:Zt.properties.minMaxPointStyle,minElevation:Zt.properties.minElevation,maxElevation:Zt.properties.maxElevation,elevationGain:Zt.properties.elevationGain,elevationLoss:Zt.properties.elevationLoss,averageSlope:Zt.properties.averageSlope,maxSlope:Zt.properties.maxSlope}}else{qn="Line";const lr=Zt.getLatLngs(),Ei=((Ai=Zt.properties)==null?void 0:Ai.category)||"forages",Zi=((ks=Zt.properties)==null?void 0:ks.accessLevel)||"visitor";console.log("[savePlan] Line - Catégorie:",Ei,"Niveau d'accès:",Zi),St={points:lr.map(ur=>[ur.lng,ur.lat]),name:((bs=Zt.properties)==null?void 0:bs.name)||"",category:Ei,accessLevel:Zi,style:{...gn,_accessLevel:Zi,accessLevel:Zi}}}else if(Zt instanceof Ut.Polygon&&!(Zt instanceof Ut.Rectangle)){qn="Polygon";const lr=Zt.getLatLngs()[0],Ei=((Ki=Zt.properties)==null?void 0:Ki.category)||"forages",Zi=((zs=Zt.properties)==null?void 0:zs.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catégorie:",Ei,"Niveau d'accès:",Zi),St={points:lr.map(ur=>[ur.lng,ur.lat]),name:((Io=Zt.properties)==null?void 0:Io.name)||"",category:Ei,accessLevel:Zi,style:{...gn,_accessLevel:Zi,accessLevel:Zi}}}else if(((cs=Zt.properties)==null?void 0:cs.type)==="Note"){console.log("[savePlan] Note géolocalisée détectée - sauvegarde via API dédiée");const lr=Zt;if(lr._dbId&&typeof lr._dbId=="number"&&Ln.add(lr._dbId),typeof lr.saveNote=="function")try{if(lr.properties&&(lr.properties.style||(lr.properties.style={}),lr.properties.accessLevel&&(lr.properties.style._accessLevel=lr.properties.accessLevel,lr.properties.style.accessLevel=lr.properties.accessLevel),lr.properties.style.color)){const Ei=lr.properties.style.color;console.log("[savePlan] Préservation de la couleur existante:",Ei),lr.properties.style.color=Ei,lr.properties.style.fillColor=Ei}console.log("[savePlan] Sauvegarde de la note géolocalisée via API dédiée",{category:(br=lr.properties)==null?void 0:br.category,accessLevel:(Tr=lr.properties)==null?void 0:Tr.accessLevel,styleAccessLevel:(ea=(pr=lr.properties)==null?void 0:pr.style)==null?void 0:ea.accessLevel}),B.value&&B.value.id?lr.saveNote(B.value.id):lr.saveNote()}catch(Ei){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",Ei)}else console.warn("[savePlan] La note ne possède pas de méthode saveNote");qn=void 0,St=void 0}if(qn&&St){let lr=Zt._elementId;Zt._dbId&&(lr=Zt._dbId,typeof lr=="number"&&Ln.add(lr)),rt.push({id:lr,type_forme:qn,data:St})}}),console.log("[savePlan] Éléments à sauvegarder",{totalElements:rt.length,elements:rt.map(Zt=>({type:Zt.type_forme,hasPoints:"points"in Zt.data,hasStyle:"style"in Zt.data}))});const Kt=Array.from(Vt).filter(Zt=>!Ln.has(Zt));console.log("[savePlan] Éléments supprimés:",{existingIds:Array.from(Vt),currentLayerIds:Array.from(Ln),elementsToDelete:Kt}),o.elements=rt.filter(Zt=>!Zt.id||!Kt.includes(Zt.id));const rn=await o.saveToPlan(B.value.id,{elementsToDelete:Kt});if(rn&&((bt=B.value)!=null&&bt.id)){const Zt=B.value.id;B.value={...B.value,...rn},s.updatePlanDetails(Zt,rn)}I.value="success",D.value&&D.value.eachLayer(Zt=>{var qn;((qn=Zt.properties)==null?void 0:qn.type)==="Note"&&typeof Zt.resetPlanSaveState=="function"&&Zt.resetPlanSaveState()}),setTimeout(()=>{I.value=null},3e3)}catch(rt){console.error("Erreur lors de la sauvegarde du plan:",rt),I.value=null}finally{F.value=!1}}Jl(()=>{X.user||ut(),s.clearCurrentPlan(),o.clearCurrentPlan(),D.value&&D.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function Ke(bt){var rt,Vt,Ln;if(console.log("[MapView][updateShapeProperties] Mise à jour des propriétés:",bt),A(bt),v.value&&((rt=v.value.properties)==null?void 0:rt.type)==="Note")if(console.log("[MapView][updateShapeProperties] Note géolocalisée détectée, sauvegarde via API dédiée"),typeof v.value.saveNote=="function")try{if(bt.category&&(v.value.properties.category=bt.category),bt.accessLevel&&(v.value.properties.accessLevel=bt.accessLevel,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style._accessLevel=bt.accessLevel,v.value.properties.style.accessLevel=bt.accessLevel),v.value.properties.style&&v.value.properties.style.color){const Kt=v.value.properties.style.color;console.log("[MapView][updateShapeProperties] Préservation de la couleur existante:",Kt),v.value.properties.style.color=Kt,v.value.properties.style.fillColor=Kt}console.log("[MapView][updateShapeProperties] Sauvegarde de la note géolocalisée via API dédiée",{category:(Vt=v.value.properties)==null?void 0:Vt.category,accessLevel:(Ln=v.value.properties)==null?void 0:Ln.accessLevel,updatedProperties:bt}),B.value&&B.value.id?v.value.saveNote(B.value.id):v.value.saveNote(),v.value.bindPopup&&v.value.createPopupContent&&(console.log("[MapView][updateShapeProperties] Forçage de la mise à jour du popup après la sauvegarde"),v.value.bindPopup(v.value.createPopupContent()))}catch(Kt){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",Kt)}else console.warn("[MapView][updateShapeProperties] La note ne possède pas de méthode saveNote");else if(bt.category&&v.value&&v.value._dbId){const Kt=v.value._dbId,rn=o.elements.find(Zt=>Zt.id===Kt);if(rn){console.log(`[MapView][updateShapeProperties] Mise à jour de la catégorie dans le store: ${bt.category} pour l'élément ${Kt}`);const Zt=rn;Zt.data||(Zt.data={}),Zt.data.category=bt.category,o.$patch({unsavedChanges:!0})}}}function Me(bt){try{const rt=new Date(bt);return isNaN(rt.getTime())?(console.error("Date invalide reçue:",bt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(rt)}catch(rt){return console.error("Erreur lors du formatage de la date:",rt),"Date invalide"}}const he=()=>{D.value&&R()},We=async()=>{var bt;if(v.value&&D.value){const rt=v.value._leaflet_id,Vt=v.value._dbId;if(((bt=v.value.properties)==null?void 0:bt.type)==="Note"&&Vt)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${Vt} du backend...`),await pa.deleteNote(Vt),a.removeNote(Vt),console.log(`[MapView][deleteSelectedShape] Note ${Vt} supprimée avec succès du backend et du store`),l.success("Note supprimée avec succès")}catch(Kt){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${Vt} du backend:`,Kt),l.error("Erreur lors de la suppression de la note")}E(""),D.value.removeLayer(v.value),u.value=u.value.filter(Kt=>Kt.layer&&Kt.layer._leaflet_id!==rt),console.log(`[MapView][deleteSelectedShape] Forme ${rt} (dbId: ${Vt}) supprimée du featureGroup et de shapes.value`),v.value=null}};async function at(bt){console.log(`onPlanCreated - Tentative de chargement du plan ${bt}`),await s.fetchPlans();const rt=s.getPlanById(bt);rt?(console.log(`Plan ${bt} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",bt.toString()),B.value=rt,s.setCurrentPlan(rt),o.setCurrentPlan(rt.id),N.value=!1,zt(),console.log(`Plan ${bt} chargé avec succès`)):console.error(`Plan ${bt} introuvable après création! Vérifiez les permissions.`)}ai(He,async bt=>{var rt;if(bt&&((rt=X.user)==null?void 0:rt.user_type)==="admin"){H.value=!0;try{const Vt=await X.fetchSalarieVisiteurs(bt.id);ve.value=Array.isArray(Vt)?Vt:[Vt]}catch(Vt){console.error("[MapView][watch selectedSalarie] Error:",Vt),ve.value=[]}finally{H.value=!1}}});function ut(){localStorage.removeItem("lastPlanId")}const Ct=wt(!1),Xe=$E.debounce(()=>{const bt=kn.startMeasure("invalidateMapSize","MapView");if(!m.value){bt();return}Zo(()=>{kn.measure("invalidateMapSize:nextTick",()=>{var rt;try{if(m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())){if(m.value.invalidateSize({animate:!1}),(rt=D.value)!=null&&rt.getLayers().length)try{R()}catch(Vt){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Vt)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Vt){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Vt)}bt()},"MapView")})},250);function zt(){Xe()}ai(B,(bt,rt)=>{bt&&bt.id!==(rt==null?void 0:rt.id)&&Zo(()=>{zt()})});const qt=wt(null),Qe=wt(!1),ot=wt([]),it=Gn(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:qt.value,salaries:K.value,salariesLength:K.value.length}),!qt.value)return[];const bt=K.value.filter(rt=>{var Kt,rn,Zt;const Vt=rt.entreprise,Ln=typeof Vt=="object"&&Vt!==null?Vt.id:Vt;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:rt,salarieEntreprise:Vt,salarieEntrepriseId:Ln,selectedEntrepriseId:(Kt=qt.value)==null?void 0:Kt.id,matches:Ln===((rn=qt.value)==null?void 0:rn.id)}),Ln===((Zt=qt.value)==null?void 0:Zt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",bt),bt});function At(bt){if(!bt)return"";const rt=bt.first_name||"",Vt=bt.last_name?bt.last_name.toUpperCase():"",Ln=bt.company_name||bt.role||"";return`${rt} ${Vt} (${Ln})`}async function Yt(){Qe.value=!0;try{const bt=await On.get("/users/",{params:{role:"ENTREPRISE"}});ot.value=bt.data}catch(bt){console.error("[MapView] Error loading entreprises:",bt),ot.value=[]}finally{Qe.value=!1}}async function bn(bt){console.log("[MapView][selectEntreprise] Sélection de l'entreprise:",bt),qt.value=bt,_e.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requête avec params:",{role:"SALARIE",entreprise:bt.id});const rt=await On.get("/users/",{params:{role:"SALARIE",entreprise:bt.id}});console.log("[MapView][selectEntreprise] Réponse reçue:",rt.data),K.value=rt.data,console.log("[MapView][selectEntreprise] Salaries mis à jour:",K.value)}catch(rt){console.error("[MapView] Error loading salaries for entreprise:",rt),K.value=[]}finally{_e.value=!1}}function xn(){qt.value=null,He.value=null,Ce.value=null,K.value=[],ve.value=[],ge.value=[]}function En(){He.value=null,Ce.value=null,ve.value=[],ge.value=[]}function $n(){Ce.value=null,ge.value=[]}async function Sn(bt){var rt,Vt,Ln,Kt,rn,Zt;console.log(`
[MapView][selectSalarie] ====== DÉBUT SÉLECTION SALARIE ======`),console.log("Informations du salarie:",{id:bt.id,username:bt.username,company:bt.company_name,role:bt.role}),console.log("Contexte utilisateur:",{userType:(rt=X.user)==null?void 0:rt.user_type,userId:(Vt=X.user)==null?void 0:Vt.id,userRole:(Ln=X.user)==null?void 0:Ln.role,selectedEntrepriseId:(Kt=qt.value)==null?void 0:Kt.id}),He.value=bt,H.value=!0;try{const qn={role:"VISITEUR",salarie:bt.id};X.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connectée:",(rn=X.user)==null?void 0:rn.id),qn.entreprise=(Zt=X.user)==null?void 0:Zt.id):qt.value&&(console.log("Ajout de l'ID de l'entreprise sélectionnée:",qt.value.id),qn.entreprise=qt.value.id),console.log("Paramètres de la requête:",qn);const St=await On.get("/users/",{params:qn});console.log("Réponse reçue du serveur:",{status:St.status,dataLength:Array.isArray(St.data)?St.data.length:"non-array",data:St.data}),Array.isArray(St.data)?(ve.value=St.data,console.log(`${St.data.length} visiteurs chargés`),St.data.forEach((gn,nr)=>{console.log(`Visiteur ${nr+1}:`,{id:gn.id,username:gn.username,company:gn.company_name,salarie:gn.salarie})})):(console.warn("Format de réponse inattendu:",St.data),ve.value=[]),ve.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch(qn){if(console.error("ERREUR lors du chargement des visiteurs:",qn),qn&&typeof qn=="object"&&"response"in qn){const St=qn;console.error("Détails de l'erreur:",{status:St.response.status,data:St.response.data})}ve.value=[]}finally{H.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SÉLECTION SALARIE ======
`)}}function an(){J.value=!1,G.value=null}function mn(bt){$.value=bt,U.value=!0}async function tr(){var bt,rt,Vt;if((bt=$.value)!=null&&bt.id)try{const Ln=$.value.id,Kt={selectedClient:Ce.value,selectedSalarie:He.value,isNoVisiteurView:Ce.value&&Ce.value.id===-1};if(await s.deletePlan(Ln),U.value=!1,$.value=null,await new Promise(rn=>setTimeout(rn,50)),Kt.isNoVisiteurView)console.log("[MapView][confirmDeletePlan] Rechargement des plans sans visiteur"),await Ni();else if(Kt.selectedClient){console.log("[MapView][confirmDeletePlan] Rechargement des plans du client:",Kt.selectedClient.id);const rn={visiteur:Kt.selectedClient.id};Kt.selectedSalarie&&(rn.salarie=Kt.selectedSalarie.id),X.isEntreprise?rn.entreprise=(rt=X.user)==null?void 0:rt.id:qt.value&&(rn.entreprise=qt.value.id);const Zt=await On.get("/plans/",{params:rn});ge.value=Zt.data}else console.log("[MapView][confirmDeletePlan] Rechargement de tous les plans"),await s.fetchPlans();((Vt=B.value)==null?void 0:Vt.id)===Ln&&(B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),oe(),localStorage.removeItem("lastPlanId"))}catch(Ln){console.error("Erreur lors de la suppression du plan:",Ln),alert("Une erreur est survenue lors de la suppression du plan"),U.value=!1,$.value=null}}function ar(){U.value=!1,$.value=null}function mr(bt){console.log("[MapView][handleFilterChange] Nouveaux filtres reçus:",JSON.stringify(bt,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise à jour des filtres dans le store"),o.updateFilters(bt),console.log("[MapView][handleFilterChange] Éléments dans le store:",{count:o.elements.length,ids:o.elements.map(rt=>rt.id)}),console.log("[MapView][handleFilterChange] Mise à jour de l'affichage de la carte"),zn(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise à jour forcée de l'affichage"),zn()},100),console.log("[MapView][handleFilterChange] Traitement des filtres terminé")}function zn(){if(!D.value)return;const bt=[];u.value.forEach((Cn,fn)=>{Cn.layer&&!Cn.id&&(!Cn.layer.properties||Cn.layer.properties&&!Cn.layer.properties.type)&&(console.log(`[MapView][updateMapDisplay] Nettoyage préventif de la couche temporaire ${Cn.layer._leaflet_id}`),bt.push(fn))});for(let Cn=bt.length-1;Cn>=0;Cn--)u.value.splice(bt[Cn],1);const rt={accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise à jour de l'affichage avec filtres:",JSON.stringify(rt,null,2));const Vt={count:o.elements.length,elements:o.elements.map(Cn=>({id:Cn.id,type_forme:Cn.type_forme}))};console.log("[MapView][updateMapDisplay] Éléments dans le store:",JSON.stringify(Vt,null,2));const Ln=o.getFilteredElements;console.log("[MapView][updateMapDisplay] Éléments filtrés:",{total:o.elements.length,filtered:Ln.length,filteredIds:Ln.map(Cn=>Cn.id)});const Kt=D.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",Kt.length);const rn=Kt.map(Cn=>({_leaflet_id:Cn._leaflet_id,_dbId:Cn._dbId,hasProperties:!!Cn.properties,propertyType:Cn.properties?Cn.properties.type:null,category:Cn.properties?Cn.properties.category:null}));console.log("[MapView][updateMapDisplay] Détails des couches:",JSON.stringify(rn,null,2)),console.log("[MapView][updateMapDisplay] État des filtres pour les catégories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const Zt=new Map;u.value.forEach(Cn=>{Cn.layer&&Cn.id&&Zt.set(Cn.id,Cn.layer)});const qn=new Map;Kt.forEach(Cn=>{Cn._dbId&&qn.set(Cn,Cn._dbId)});const St=new Set(Ln.map(Cn=>Cn.id));console.log("[MapView][updateMapDisplay] Début du traitement des couches");const gn=Array.from(St);console.log("[MapView][updateMapDisplay] IDs des éléments filtrés:",JSON.stringify(gn));let nr=0,Vn=0,dr=0;Kt.forEach(Cn=>{var zs,Io;const fn=Cn._dbId,li=Cn._leaflet_id;if(!fn){if(!Cn.properties){dr++,console.log(`[MapView][updateMapDisplay] Couche ${li} sans dbId et sans propriétés, ignorée`);return}Cn._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${li} sans dbId, ID temporaire assigné: ${Cn._dbId}`)}const Ci=Cn.properties||{},Si=Ci.type||Cn.type_forme||"";let Or=Ci.category;if(Cn._dbId){const cs=o.elements.find(br=>br.id===Cn._dbId);if(cs){const br=cs.data;br&&br.category&&(Or!==br.category&&(console.log(`[MapView][updateMapDisplay] Catégorie différente détectée - Propriétés: ${Or}, Store: ${br.category} pour la couche ${Cn._dbId}`),Or=br.category),Cn.properties||(Cn.properties={}),Cn.properties.category=Or)}}Or||(Or="default");const fr=Ci.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${li} (dbId: ${Cn._dbId}): type=${Si}, category=${Or}, accessLevel=${fr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(o.filters));let ls=!1;Si?ls=Si in o.filters.shapeTypes&&o.filters.shapeTypes[Si]===!0:ls=o.filters.shapeTypes.Polygon===!0;let us=!1;Or?Or in o.filters.categories?(us=o.filters.categories[Or]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${Or}: ${us}`)):(us=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${Or} non trouvée dans les filtres, utilisation de 'forages': ${us}`)):(us=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie non spécifiée, utilisation de 'forages': ${us}`));let Ai=!1;const ks={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let bs="visitor";ks.company?bs="company":ks.employee?bs="employee":ks.visitor&&(bs="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur: ${bs}`),bs==="company"?Ai=!0:bs==="employee"?Ai=fr==="employee"||fr==="visitor":bs==="visitor"&&(Ai=fr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche: ${fr}, visible: ${Ai}`);const Ki=ls&&us&&Ai;console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${li}: typeVisible=${ls}, categoryVisible=${us}, accessLevelVisible=${Ai}, isVisible=${Ki}`),console.log(`[MapView][updateMapDisplay] Détails de la couche ${li}: type=${Si}, category=${Or}, accessLevel=${fr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:o.filters.accessLevels,categories:o.filters.categories,shapeTypes:o.filters.shapeTypes},null,2)),Ki?D.value.hasLayer(Cn)?(nr++,console.log(`[MapView][updateMapDisplay] Couche ${Cn._dbId} (${Si}) déjà visible avec catégorie ${((Io=Cn.properties)==null?void 0:Io.category)||"non définie"}`)):(Or&&Or!=="default"&&(!Cn.properties||!Cn.properties.category)&&(Cn.properties||(Cn.properties={}),Cn.properties.category=Or,console.log(`[MapView][updateMapDisplay] Catégorie définie avant ajout: ${Or} pour la couche ${Cn._dbId}`)),D.value.addLayer(Cn),nr++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${Cn._dbId} (${Si}) avec catégorie ${((zs=Cn.properties)==null?void 0:zs.category)||"non définie"}`)):D.value.hasLayer(Cn)?(D.value.removeLayer(Cn),Vn++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${Cn._dbId} (${Si}) - Filtres non respectés`)):(Vn++,console.log(`[MapView][updateMapDisplay] Couche ${Cn._dbId} (${Si}) déjà masquée`))}),console.log("[MapView][updateMapDisplay] Début de la restauration des couches filtrées"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",u.value.length),u.value.forEach(Cn=>{var Io;if(!Cn.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignorée");return}const fn=Cn.layer,li=fn._leaflet_id,Ci=fn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${li} (dbId: ${Ci})`),D.value.hasLayer(fn)){console.log(`[MapView][updateMapDisplay] La couche ${li} est déjà dans le featureGroup, ignorée`);return}const Si=fn.properties||{},Or=Si.type||fn.type_forme||"";let fr=null;if(fn._dbId){const cs=o.elements.find(br=>br.id===fn._dbId);if(cs){const br=cs.data;br&&br.category&&(fr=br.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis le store: ${fr} pour la couche ${fn._dbId}`))}}!fr&&Si.category&&(fr=Si.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis les propriétés: ${fr} pour la couche ${li}`)),fr||(fr="default");const ls=Si.accessLevel||"visitor";if(fn.properties||(fn.properties={}),fr&&fr!=="default"&&(fn.properties.category=fr,console.log(`[MapView][updateMapDisplay] Catégorie définie/restaurée: ${fr} pour la couche ${fn._dbId}`),fn._dbId)){const cs=o.elements.find(br=>br.id===fn._dbId);if(cs){const br=cs;br.data||(br.data={}),br.data.category!==fr&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store: ${fr} pour l'élément ${fn._dbId}`),br.data.category=fr,o.$patch({unsavedChanges:!0}))}}fn.properties.accessLevel||(fn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Propriétés de la couche ${li}: type=${Or}, category=${fr}, accessLevel=${ls}`);let us=!1;Or?us=Or in o.filters.shapeTypes&&o.filters.shapeTypes[Or]===!0:us=o.filters.shapeTypes.Polygon===!0;let Ai=!1;if(fr)if(fr in o.filters.categories)Ai=o.filters.categories[fr]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${fr}: ${Ai}`);else if(UE().getUniqueCategories.includes(fr)){console.log(`[MapView][updateMapDisplay] Catégorie personnalisée ${fr} trouvée dans mapFilterStore, ajout aux filtres`);const Tr={...o.filters.categories};Tr[fr]=!0,o.updateFilters({categories:Tr}),Ai=!0}else Ai=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${fr} non trouvée, utilisation de 'forages': ${Ai}`);else Ai=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catégorie, utilisation de 'forages': ${Ai}`);let ks=!1;const bs={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Ki="visitor";bs.company?Ki="company":bs.employee?Ki="employee":bs.visitor&&(Ki="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur (2ème étape): ${Ki}`),Ki==="company"?ks=!0:Ki==="employee"?ks=ls==="employee"||ls==="visitor":Ki==="visitor"&&(ks=ls==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche (2ème étape): ${ls}, visible: ${ks}`);const zs=us&&Ai&&ks;if(console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${li}: typeVisible=${us}, categoryVisible=${Ai}, accessLevelVisible=${ks}, isVisible=${zs}`),zs){if(fr&&fr!=="default"&&(fn.properties||(fn.properties={}),fn.properties.category=fr,console.log(`[MapView][updateMapDisplay] Catégorie définie avant restauration: ${fr} pour la couche ${li}`),fn._dbId)){const cs=o.elements.find(br=>br.id===fn._dbId);if(cs){const br=cs;br.data||(br.data={}),br.data.category!==fr&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store avant restauration: ${fr} pour l'élément ${fn._dbId}`),br.data.category=fr,o.$patch({unsavedChanges:!0}))}}D.value.addLayer(fn),nr++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${li} (${Or}) avec catégorie ${((Io=fn.properties)==null?void 0:Io.category)||"non définie"} - Filtres respectés`)}else console.log(`[MapView][updateMapDisplay] La couche ${li} (${Or}) reste masquée - Filtres non respectés`)}),console.log(`[MapView][updateMapDisplay] Restauration terminée: ${nr} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${nr} couches visibles, ${Vn} couches masquées, ${dr} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise à jour terminée")}function kr(bt){if(D.value){const Vt=D.value.getLayers().find(Ln=>Ln._leaflet_id===bt.id);Vt&&(Vt.properties.name=bt.title,Vt.properties.description=bt.description,Vt.properties.columnId=bt.columnId,Vt.properties.accessLevel=bt.accessLevel,Vt.properties.category||(Vt.properties.category="forages"),Vt.setNoteStyle({color:bt.style.color,fillColor:bt.style.fillColor,weight:bt.style.weight,fillOpacity:bt.style.fillOpacity,radius:bt.style.radius}),Vt.closePopup(),Vt.unbindPopup(),Vt.bindPopup(Vt.createPopupContent()),console.log("[handleNoteSave] Note mise à jour:",{name:Vt.properties.name,category:Vt.properties.category,accessLevel:Vt.properties.accessLevel,columnId:Vt.properties.columnId}),a.notes.find(Kt=>Kt.id===bt.id)?(a.updateNote(bt.id,{title:bt.title,description:bt.description,columnId:bt.columnId,accessLevel:bt.accessLevel,style:bt.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise à jour dans le store avec columnId:",bt.columnId)):(a.addNote({title:bt.title,description:bt.description,location:[bt.location[0],bt.location[1]],columnId:bt.columnId||"1",style:bt.style,accessLevel:bt.accessLevel}),console.log("[handleNoteSave] Note ajoutée au store avec columnId:",bt.columnId||"1")))}l.success("Note enregistrée avec succès")}async function as(bt){var rt;Ce.value=bt,ee.value=!0;try{const Vt={visiteur:bt.id};X.isEntreprise?Vt.entreprise=(rt=X.user)==null?void 0:rt.id:qt.value&&(Vt.entreprise=qt.value.id),He.value&&(Vt.salarie=He.value.id);const Ln=await On.get("/plans/",{params:Vt});ge.value=Ln.data}catch(Vt){console.error("[MapView] Error loading client plans:",Vt),ge.value=[]}finally{ee.value=!1}}async function Ni(){var rt;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const bt={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};Ce.value=bt,ee.value=!0;try{const Vt={visiteur_null:!0};X.isEntreprise?Vt.entreprise=(rt=X.user)==null?void 0:rt.id:qt.value&&(Vt.entreprise=qt.value.id),He.value&&(Vt.salarie=He.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramètres de requête:",Vt);const Ln=await On.get("/plans/",{params:Vt});console.log("[MapView][loadPlansWithoutVisiteur] Plans reçus:",Ln.data),ge.value=Ln.data}catch(Vt){console.error("[MapView] Error loading plans without visiteur:",Vt),ge.value=[]}finally{ee.value=!1}}async function io(){var bt;if(He.value=null,Ce.value=null,ge.value=[],X.isEntreprise){_e.value=!0;try{const rt=await On.get("/users/",{params:{role:"SALARIE",entreprise:(bt=X.user)==null?void 0:bt.id}});K.value=rt.data,console.log("[MapView][openLoadPlanModal] Salariés chargés:",K.value.length)}catch(rt){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salariés:",rt),K.value=[]}finally{_e.value=!1}}z.value=!0}const Ps=wt(window.innerWidth<768);function Zn(){Ps.value=window.innerWidth<768}return(bt,rt)=>{var Vt,Ln,Kt,rn,Zt,qn;return Ne(),Re(wn,null,[x("div",vG,[x("div",yG,[Ct.value?(Ne(),Re("div",bG,rt[8]||(rt[8]=[Kl('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):Jt("",!0),B.value?Jt("",!0):(Ne(),Re("div",_G,[x("div",wG,[rt[11]||(rt[11]=Kl('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+Vj+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),x("div",xG,[x("button",{onClick:rt[0]||(rt[0]=St=>N.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},rt[9]||(rt[9]=[x("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),qr(" Créer un nouveau plan ")])),x("button",{onClick:io,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},rt[10]||(rt[10]=[x("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),qr(" Charger un plan existant ")]))])])])),Pn(x("div",LG,[x("div",CG,[B.value&&!Ct.value?(Ne(),Vo($U,{key:0,"last-save":(Vt=B.value)!=null&&Vt.date_modification?new Date(B.value.date_modification):void 0,"plan-name":(Ln=B.value)==null?void 0:Ln.nom,"plan-description":(Kt=B.value)==null?void 0:Kt.description,"save-status":I.value,onChangeMapType:yn(fe),onCreateNewPlan:rt[1]||(rt[1]=St=>N.value=!0),onLoadPlan:io,onSavePlan:je,onAdjustView:he,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):Jt("",!0),x("div",SG,[i.value&&B.value&&!Ct.value?(Ne(),Re("div",{key:0,onClick:me,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):Jt("",!0),x("div",EG,[x("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),B.value&&!Ct.value?(Ne(),Re(wn,{key:1},[Ps.value?(Ne(),Vo(op,{key:0,to:"body"},[ni(w5,{show:i.value,"onUpdate:show":rt[2]||(rt[2]=St=>i.value=St),"selected-tool":yn(p),"selected-shape":ae.value,"is-drawing":yn(Q),onToolSelected:yn(E),onFilterChange:mr,onDeleteShape:We,onPropertiesUpdate:Ke,onStyleUpdate:yn(k),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])])):(Ne(),Vo(w5,{key:1,show:i.value,"onUpdate:show":rt[3]||(rt[3]=St=>i.value=St),"selected-tool":yn(p),"selected-shape":ae.value,"is-drawing":yn(Q),onToolSelected:yn(E),onFilterChange:mr,onDeleteShape:We,onPropertiesUpdate:Ke,onStyleUpdate:yn(k),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"]))],64)):Jt("",!0),B.value&&!Ct.value?(Ne(),Re("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:me},rt[12]||(rt[12]=[Kl('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils</span></div></div>',1)]))):Jt("",!0)])]),Ct.value?(Ne(),Re("div",MG,rt[13]||(rt[13]=[Kl('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):Jt("",!0)],512),[[Dy,B.value]]),(Ne(),Vo(op,{to:"body"},[ni(GE,{ref_key:"newPlanModalRef",ref:pe,modelValue:N.value,"onUpdate:modelValue":rt[4]||(rt[4]=St=>N.value=St),onCreated:at,onSalarieSelected:rt[5]||(rt[5]=St=>He.value=St),onVisiteurSelected:rt[6]||(rt[6]=St=>ie.value=St)},null,8,["modelValue"])])),(Ne(),Vo(op,{to:"body"},[z.value?(Ne(),Re("div",PG,[x("div",kG,[x("div",AG,[rt[15]||(rt[15]=x("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),x("button",{onClick:rt[7]||(rt[7]=St=>z.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},rt[14]||(rt[14]=[x("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",TG,[yn(X).isAdmin?(Ne(),Re("div",DG,[qt.value?He.value?Ce.value?(Ne(),Re("div",ZG,[x("div",XG,[x("button",{onClick:$n,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[31]||(rt[31]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des clients ")])),rt[32]||(rt[32]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",JG,kt(At(Ce.value)),1)]),rt[34]||(rt[34]=x("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),x("div",QG,[ee.value?(Ne(),Re(wn,{key:0},Wn(3,St=>x("div",{key:St,class:"animate-pulse"},rt[33]||(rt[33]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),x("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),Re(wn,{key:1},Wn(ge.value,St=>(Ne(),Re("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[x("button",{onClick:gn=>Ae(St.id),class:"w-full text-left"},[x("div",tW,kt(St.nom),1),x("div",nW,kt(St.description),1),x("div",rW," Modifié le "+kt(Me(St.date_modification)),1)],8,eW),yn(X).isAdmin||yn(X).isEntreprise?(Ne(),Re("button",{key:0,onClick:Zl(gn=>mn(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,iW)):Jt("",!0)]))),128))])])):(Ne(),Re("div",VG,[x("div",HG,[x("button",{onClick:En,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[24]||(rt[24]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des salaries ")])),rt[25]||(rt[25]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",GG,kt(At(He.value)),1)]),rt[30]||(rt[30]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),x("div",WG,[x("button",{onClick:Ni,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},rt[26]||(rt[26]=[x("div",null,[x("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),x("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),x("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),H.value?(Ne(),Re(wn,{key:0},Wn(3,St=>x("div",{key:St,class:"animate-pulse"},rt[27]||(rt[27]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),Re(wn,{key:1},[re.value.length===0?(Ne(),Re("div",qG,rt[28]||(rt[28]=[x("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),x("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ne(!0),Re(wn,{key:1},Wn(re.value,St=>(Ne(),Re("button",{key:St.id,onClick:gn=>as(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",KG,kt(At(St)),1)]),rt[29]||(rt[29]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,YG))),128))],64))])])):(Ne(),Re("div",RG,[x("div",FG,[x("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[19]||(rt[19]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des entreprises ")])),rt[20]||(rt[20]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",jG,kt(At(qt.value)),1)]),rt[23]||(rt[23]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),x("div",zG,[_e.value?(Ne(),Re(wn,{key:0},Wn(3,St=>x("div",{key:St,class:"animate-pulse"},rt[21]||(rt[21]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),Re(wn,{key:1},Wn(it.value,St=>(Ne(),Re("button",{key:St.id,onClick:gn=>Sn(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",UG,kt(At(St)),1)]),rt[22]||(rt[22]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,$G))),128))])])):(Ne(),Re("div",OG,[rt[18]||(rt[18]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),x("div",NG,[Qe.value?(Ne(),Re(wn,{key:0},Wn(3,St=>x("div",{key:St,class:"animate-pulse"},rt[16]||(rt[16]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),Re(wn,{key:1},Wn(ot.value,St=>(Ne(),Re("button",{key:St.id,onClick:gn=>bn(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",BG,kt(At(St)),1)]),rt[17]||(rt[17]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,IG))),128))])]))])):yn(X).isSalarie?(Ne(),Re("div",sW,[Ce.value?(Ne(),Re("div",dW,[x("div",hW,[x("button",{onClick:$n,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[39]||(rt[39]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des clients ")])),rt[40]||(rt[40]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",fW,kt(At(Ce.value)),1)]),rt[42]||(rt[42]=x("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),x("div",pW,[ee.value?(Ne(),Re(wn,{key:0},Wn(3,St=>x("div",{key:St,class:"animate-pulse"},rt[41]||(rt[41]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),x("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),Re(wn,{key:1},Wn(ge.value,St=>(Ne(),Re("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[x("button",{onClick:gn=>Ae(St.id),class:"w-full text-left"},[x("div",mW,kt(St.nom),1),x("div",vW,kt(St.description),1),x("div",yW," Modifié le "+kt(Me(St.date_modification)),1)],8,gW),yn(X).isAdmin||yn(X).isEntreprise?(Ne(),Re("button",{key:0,onClick:Zl(gn=>mn(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,bW)):Jt("",!0)]))),128))])])):(Ne(),Re("div",oW,[rt[38]||(rt[38]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),x("div",aW,[H.value?(Ne(),Re(wn,{key:0},Wn(3,St=>x("div",{key:St,class:"animate-pulse"},rt[35]||(rt[35]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),Re(wn,{key:1},[re.value.length===0?(Ne(),Re("div",lW,rt[36]||(rt[36]=[x("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),x("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(Ne(!0),Re(wn,{key:1},Wn(re.value,St=>(Ne(),Re("button",{key:St.id,onClick:gn=>as(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",cW,kt(At(St)),1)]),rt[37]||(rt[37]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,uW))),128))],64))])]))])):yn(X).isEntreprise?(Ne(),Re("div",_W,[He.value?Ce.value?(Ne(),Re("div",DW,[x("div",OW,[x("button",{onClick:$n,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[53]||(rt[53]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des visiteurs ")])),rt[54]||(rt[54]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",NW,kt(At(Ce.value)),1)]),rt[56]||(rt[56]=x("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),x("div",IW,[ee.value?(Ne(),Re(wn,{key:0},Wn(3,St=>x("div",{key:St,class:"animate-pulse"},rt[55]||(rt[55]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),x("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),Re(wn,{key:1},Wn(ge.value,St=>(Ne(),Re("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[x("button",{onClick:gn=>Ae(St.id),class:"w-full text-left"},[x("div",RW,kt(St.nom),1),x("div",FW,kt(St.description),1),x("div",jW," Modifié le "+kt(Me(St.date_modification)),1)],8,BW),yn(X).isAdmin||yn(X).isEntreprise?(Ne(),Re("button",{key:0,onClick:Zl(gn=>mn(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,zW)):Jt("",!0)]))),128))])])):(Ne(),Re("div",SW,[x("div",EW,[x("button",{onClick:En,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[46]||(rt[46]=[x("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),qr(" Retour à la liste des salariés ")])),rt[47]||(rt[47]=x("span",{class:"mx-2 text-gray-400"},"|",-1)),x("span",MW,kt(At(He.value)),1)]),rt[52]||(rt[52]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),x("div",PW,[x("button",{onClick:Ni,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},rt[48]||(rt[48]=[x("div",null,[x("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),x("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),x("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),H.value?(Ne(),Re(wn,{key:0},Wn(3,St=>x("div",{key:St,class:"animate-pulse"},rt[49]||(rt[49]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),Re(wn,{key:1},[re.value.length===0?(Ne(),Re("div",kW,rt[50]||(rt[50]=[x("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarié",-1),x("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ne(!0),Re(wn,{key:1},Wn(re.value,St=>(Ne(),Re("button",{key:St.id,onClick:gn=>as(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",TW,kt(At(St)),1)]),rt[51]||(rt[51]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,AW))),128))],64))])])):(Ne(),Re("div",wW,[rt[45]||(rt[45]=x("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarié",-1)),x("div",xW,[_e.value?(Ne(),Re(wn,{key:0},Wn(3,St=>x("div",{key:St,class:"animate-pulse"},rt[43]||(rt[43]=[x("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[x("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),x("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),Re(wn,{key:1},Wn(K.value,St=>(Ne(),Re("button",{key:St.id,onClick:gn=>Sn(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[x("div",null,[x("div",CW,kt(At(St)),1)]),rt[44]||(rt[44]=x("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,LW))),128))])]))])):(Ne(),Re("div",$W,[yn(s).plans.length===0?(Ne(),Re("div",UW,rt[57]||(rt[57]=[x("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Ne(),Re("div",VW,[(Ne(!0),Re(wn,null,Wn(yn(s).plans,St=>(Ne(),Re("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[x("button",{onClick:gn=>Ae(St.id),class:"w-full text-left"},[x("div",GW,kt(St.nom),1),x("div",WW,kt(St.description),1),x("div",qW," Modifié le "+kt(Me(St.date_modification)),1)],8,HW),yn(X).isAdmin||yn(X).isEntreprise?(Ne(),Re("button",{key:0,onClick:Zl(gn=>mn(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,YW)):Jt("",!0)]))),128))]))]))])])])):Jt("",!0)])),(Ne(),Vo(op,{to:"body"},[U.value?(Ne(),Re("div",KW,[x("div",ZW,[x("div",XW,[rt[58]||(rt[58]=x("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),rt[59]||(rt[59]=x("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),x("p",JW,' Êtes-vous sûr de vouloir supprimer le plan "'+kt((rn=$.value)==null?void 0:rn.nom)+'" ? Cette action est irréversible. ',1)]),x("div",{class:"flex justify-center space-x-4"},[x("button",{onClick:ar,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),x("button",{onClick:tr,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):Jt("",!0)]))])]),(Ne(),Vo(op,{to:"body"},[J.value?(Ne(),Vo(VE,{key:0,note:G.value,"is-new-note":!((Zt=G.value)!=null&&Zt.id),location:(qn=G.value)==null?void 0:qn.location,onClose:an,onSave:kr},null,8,["note","is-new-note","location"])):Jt("",!0)]))],64)}}}),QW={class:"fixed inset-0 z-[3001] overflow-y-auto"},eq={class:"flex items-center justify-center min-h-screen w-full p-0"},tq={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},nq={class:"p-4 md:p-6"},rq={class:"flex justify-between items-center mb-4 border-b pb-4"},iq={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},sq={class:"mt-4"},oq={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},aq={class:"flex"},lq={class:"ml-3"},uq={class:"text-sm font-medium text-red-800"},cq={key:0},dq={key:1},hq=["value"],fq={key:2},pq={key:3},gq=["value"],mq={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},vq={key:0,class:"mt-2 text-sm text-red-600"},yq={key:0,class:"mt-2 text-sm text-red-600"},bq={key:4},_q={class:"flex items-center"},wq={key:5,class:"border-t pt-4 mt-4"},xq={class:"mb-4"},Lq={class:"mb-4"},Cq={key:6},Sq={key:7},Eq={key:0,class:"mt-2 text-sm text-red-600"},Mq={class:"flex justify-end space-x-3"},Pq=["disabled"],kq={key:0,class:"mr-2"},Aq=Ms({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(n,{emit:e}){const t=n,r=e,i=wt(!1),s=wt(""),o=wt(""),a=wt(""),l=wt(""),u=wt(""),h=tu({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:t.isEntreprise?"SALARIE":t.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});Ss(()=>{var v;(v=t.user)!=null&&v.id?(h.id=t.user.id,h.first_name=t.user.first_name||"",h.last_name=t.user.last_name||"",h.username=t.user.username||"",h.email=t.user.email||"",h.company_name=t.user.company_name||"",h.role=t.user.role||"VISITEUR",h.is_active=t.user.is_active??!0,h.ecowitt_api_key=t.user.ecowitt_api_key||"",h.ecowitt_application_key=t.user.ecowitt_application_key||"",h.storage_quota=t.user.storage_quota||50,h.storage_used=t.user.storage_used||0,t.user.salarie?typeof t.user.salarie=="object"?h.salarie=t.user.salarie.id:h.salarie=t.user.salarie:t.user.salarie_id?h.salarie=t.user.salarie_id:t.currentSalarie&&(h.salarie=parseInt(t.currentSalarie)),t.user.entreprise?typeof t.user.entreprise=="object"?h.entreprise=t.user.entreprise.id:h.entreprise=t.user.entreprise:t.user.entreprise_id?h.entreprise=t.user.entreprise_id:t.currentEntreprise&&(h.entreprise=parseInt(t.currentEntreprise))):(t.currentSalarie&&(h.salarie=parseInt(t.currentSalarie)),t.currentEntreprise&&(h.entreprise=parseInt(t.currentEntreprise)),t.isEntreprise?h.role="SALARIE":t.isAdmin||(h.role="VISITEUR"))}),pm(()=>{h.role==="ADMIN"||h.role==="ENTREPRISE"?(h.salarie=null,h.entreprise=null):h.role==="SALARIE"&&(h.salarie=null,t.isEntreprise&&t.currentEntreprise&&(h.entreprise=parseInt(t.currentEntreprise)))}),pm(()=>{s.value="",o.value="",a.value="",l.value="",t.apiErrors&&t.apiErrors.length>0&&t.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(h.id||(h.password!==u.value?(a.value="Les mots de passe ne correspondent pas",v=!1):h.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractères",v=!1)),!!v){i.value=!0;try{const m={...h};h.id&&delete m.password,t.isEntreprise&&["SALARIE","VISITEUR"].includes(h.role)&&(m.entreprise_id=t.currentEntreprise?parseInt(t.currentEntreprise):void 0),m.salarie&&(m.salarie_id=m.salarie,delete m.salarie),t.currentSalarie&&h.role==="VISITEUR"&&(m.salarie_id=parseInt(t.currentSalarie)),await r("save",m),r("refresh")}catch(m){console.error("Erreur locale:",m)}finally{i.value=!1}}}return(v,m)=>(Ne(),Re("div",QW,[x("div",eq,[m[42]||(m[42]=x("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[x("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),x("div",tq,[x("div",null,[x("div",nq,[x("div",rq,[x("h3",iq,kt(n.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),x("button",{type:"button",onClick:m[0]||(m[0]=C=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},m[16]||(m[16]=[x("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("div",sq,[l.value?(Ne(),Re("div",oq,[x("div",aq,[m[17]||(m[17]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),x("div",lq,[x("h3",uq,kt(l.value),1)])])])):Jt("",!0),x("form",{onSubmit:Zl(p,["prevent"]),class:"space-y-6"},[n.isAdmin?(Ne(),Re("div",cq,[m[19]||(m[19]=x("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Pn(x("select",{id:"role","onUpdate:modelValue":m[1]||(m[1]=C=>h.role=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[18]||(m[18]=[x("option",{value:"ADMIN"},"Administrateur",-1),x("option",{value:"ENTREPRISE"},"Entreprise",-1),x("option",{value:"SALARIE"},"Salarie",-1),x("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Oi,h.role]])])):Jt("",!0),n.isAdmin&&h.role==="SALARIE"?(Ne(),Re("div",dq,[m[21]||(m[21]=x("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Pn(x("select",{id:"entreprise","onUpdate:modelValue":m[2]||(m[2]=C=>h.entreprise=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[m[20]||(m[20]=x("option",{value:null},"-- Sélectionner une entreprise --",-1)),(Ne(!0),Re(wn,null,Wn(n.entreprises,C=>(Ne(),Re("option",{key:C.id,value:C.id},kt(C.first_name)+" "+kt(C.last_name)+" ("+kt(C.company_name||"Entreprise")+") ",9,hq))),128))],512),[[Oi,h.entreprise]])])):Jt("",!0),n.isEntreprise&&!h.id?(Ne(),Re("div",fq,[m[23]||(m[23]=x("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Pn(x("select",{id:"role","onUpdate:modelValue":m[3]||(m[3]=C=>h.role=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[22]||(m[22]=[x("option",{value:"SALARIE"},"Salarie",-1),x("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Oi,h.role]])])):Jt("",!0),(n.isAdmin||n.isEntreprise)&&h.role==="VISITEUR"&&!n.currentSalarie?(Ne(),Re("div",pq,[m[25]||(m[25]=x("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Pn(x("select",{id:"salarie","onUpdate:modelValue":m[4]||(m[4]=C=>h.salarie=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[m[24]||(m[24]=x("option",{value:null},"-- Sélectionner un salarie --",-1)),(Ne(!0),Re(wn,null,Wn(n.salaries,C=>(Ne(),Re("option",{key:C.id,value:C.id},kt(C.first_name)+" "+kt(C.last_name)+" ("+kt(C.company_name||"Salarie")+") ",9,gq))),128))],512),[[Oi,h.salarie]])])):Jt("",!0),x("div",mq,[x("div",null,[m[26]||(m[26]=x("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),Pn(x("input",{type:"text",id:"first_name","onUpdate:modelValue":m[5]||(m[5]=C=>h.first_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ar,h.first_name]])]),x("div",null,[m[27]||(m[27]=x("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Pn(x("input",{type:"text",id:"last_name","onUpdate:modelValue":m[6]||(m[6]=C=>h.last_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ar,h.last_name]])])]),x("div",null,[m[28]||(m[28]=x("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Pn(x("input",{type:"email",id:"email","onUpdate:modelValue":m[7]||(m[7]=C=>h.email=C),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ar,h.email]]),s.value?(Ne(),Re("div",vq,kt(s.value),1)):Jt("",!0)]),x("div",null,[m[29]||(m[29]=x("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Pn(x("input",{type:"text",id:"username","onUpdate:modelValue":m[8]||(m[8]=C=>h.username=C),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ar,h.username]]),o.value?(Ne(),Re("div",yq,kt(o.value),1)):Jt("",!0)]),x("div",null,[m[30]||(m[30]=x("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Pn(x("input",{type:"text",id:"company_name","onUpdate:modelValue":m[9]||(m[9]=C=>h.company_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ar,h.company_name]])]),h.role==="ENTREPRISE"||h.role==="SALARIE"?(Ne(),Re("div",bq,[m[32]||(m[32]=x("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),x("div",_q,[Pn(x("input",{type:"number",id:"storage_quota","onUpdate:modelValue":m[10]||(m[10]=C=>h.storage_quota=C),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ar,h.storage_quota]]),m[31]||(m[31]=x("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),m[33]||(m[33]=x("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):Jt("",!0),h.role==="ENTREPRISE"?(Ne(),Re("div",wq,[m[38]||(m[38]=x("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),x("div",xq,[m[34]||(m[34]=x("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Clé API Ecowitt",-1)),Pn(x("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":m[11]||(m[11]=C=>h.ecowitt_api_key=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé API Ecowitt"},null,512),[[Ar,h.ecowitt_api_key]]),m[35]||(m[35]=x("p",{class:"mt-1 text-sm text-gray-500"},"Clé API pour accéder aux services météo Ecowitt",-1))]),x("div",Lq,[m[36]||(m[36]=x("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Clé d'application Ecowitt",-1)),Pn(x("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":m[12]||(m[12]=C=>h.ecowitt_application_key=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé d'application Ecowitt"},null,512),[[Ar,h.ecowitt_application_key]]),m[37]||(m[37]=x("p",{class:"mt-1 text-sm text-gray-500"},"Clé d'application pour accéder aux services météo Ecowitt",-1))])])):Jt("",!0),h.id?Jt("",!0):(Ne(),Re("div",Cq,[m[39]||(m[39]=x("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Pn(x("input",{type:"password",id:"password","onUpdate:modelValue":m[13]||(m[13]=C=>h.password=C),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ar,h.password]])])),h.id?Jt("",!0):(Ne(),Re("div",Sq,[m[40]||(m[40]=x("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Pn(x("input",{type:"password",id:"password_confirm","onUpdate:modelValue":m[14]||(m[14]=C=>u.value=C),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Ar,u.value]]),a.value?(Ne(),Re("div",Eq,kt(a.value),1)):Jt("",!0)])),x("div",Mq,[x("button",{type:"button",onClick:m[15]||(m[15]=C=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),x("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Ne(),Re("span",kq,m[41]||(m[41]=[x("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):Jt("",!0),qr(" "+kt(h.id?"Enregistrer":"Créer"),1)],8,Pq)])],32)])])])])])]))}}),Tq={class:"fixed inset-0 z-[3001] overflow-y-auto"},Dq={class:"flex items-center justify-center min-h-screen w-full"},Oq={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Nq={class:"p-4 md:p-6"},Iq={class:"flex items-start"},Bq={class:"ml-4 flex-1"},Rq={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Fq={class:"mt-2"},jq={class:"text-sm text-gray-500"},zq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},fM=Ms({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(n){return(e,t)=>(Ne(),Re("div",Tq,[x("div",Dq,[t[3]||(t[3]=x("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[x("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),x("div",Oq,[x("div",Nq,[x("div",Iq,[t[2]||(t[2]=x("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[x("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),x("div",Bq,[x("h3",Rq,kt(n.title),1),x("div",Fq,[x("p",jq,kt(n.message),1)])])]),x("div",zq,[x("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:t[0]||(t[0]=r=>e.$emit("confirm"))}," Confirmer "),x("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:t[1]||(t[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),$q={class:"h-full bg-gray-50"},Uq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Vq={class:"flex justify-between items-center mb-8"},Hq={class:"text-3xl font-extrabold text-gray-900"},Gq={key:0},Wq={key:1},qq={key:2},Yq={key:0},Kq={key:1},Zq={key:2},Xq={class:"bg-white shadow rounded-lg mb-6 p-4"},Jq={class:"space-y-4"},Qq={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},eY={key:0},tY={key:0,value:"ADMIN"},nY={key:1,value:"ENTREPRISE"},rY={key:1},iY=["value"],sY={key:2},oY=["value"],aY={class:"w-full"},lY={class:"bg-white shadow rounded-lg"},uY={class:"overflow-x-auto"},cY={class:"min-w-full divide-y divide-gray-200"},dY={class:"bg-gray-50"},hY={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},fY={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},pY={class:"bg-white divide-y divide-gray-200"},gY={key:0,class:"animate-pulse"},mY={key:1},vY={class:"px-6 py-4 whitespace-nowrap"},yY={class:"flex items-center"},bY={class:"flex-shrink-0 h-10 w-10"},_Y={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},wY={class:"text-primary-600 font-medium"},xY={class:"ml-4"},LY={class:"text-sm font-medium text-gray-900"},CY={class:"text-sm text-gray-500"},SY={class:"px-6 py-4 whitespace-nowrap"},EY={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},MY={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},PY={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},kY={class:"px-6 py-4 whitespace-nowrap"},AY={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},TY=["onClick"],DY=["onClick"],OY={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},NY=Ms({__name:"UserListView",setup(n){const e=ro(),t=eu(),r=wt([]),i=wt([]),s=wt([]),o=wt(!1),a=wt(!1),l=wt(null),u=wt(null),h=wt(!0),p=wt([]),v=tu({role:"",search:"",salarie:"",entreprise:""}),m=Gn(()=>e.isAdmin),C=Gn(()=>e.isEntreprise),E=Gn(()=>e.isSalarie),k=Gn(()=>m.value?r.value.filter($=>$.role==="SALARIE"):C.value?r.value.filter($=>{var F,I;return $.role==="SALARIE"&&((F=$.entreprise)==null?void 0:F.id)===((I=e.user)==null?void 0:I.id)}):[]),A=Gn(()=>{let $=r.value;if(C.value&&($=$.filter(F=>{var I,X,K,ve,ge;return F.role==="SALARIE"?((I=F.entreprise)==null?void 0:I.id)===((X=e.user)==null?void 0:X.id):F.role==="VISITEUR"?((ve=(K=F.salarie)==null?void 0:K.entreprise)==null?void 0:ve.id)===((ge=e.user)==null?void 0:ge.id):!1})),E.value&&($=$.filter(F=>{var I,X;return F.role==="VISITEUR"&&(F.salarie_id===((I=e.user)==null?void 0:I.id)||F.salarie&&F.salarie.id===((X=e.user)==null?void 0:X.id))})),(m.value||C.value)&&(v.role&&($=$.filter(F=>F.role===v.role)),v.salarie&&($=$.filter(F=>{var X;const I=((X=F.salarie)==null?void 0:X.id)||F.salarie_id;return(I==null?void 0:I.toString())===v.salarie.toString()})),v.entreprise&&m.value&&($=$.filter(F=>{var I,X,K,ve,ge;return F.role==="SALARIE"?((X=(I=F.entreprise)==null?void 0:I.id)==null?void 0:X.toString())===v.entreprise.toString():F.role==="VISITEUR"?((ge=(ve=(K=F.salarie)==null?void 0:K.entreprise)==null?void 0:ve.id)==null?void 0:ge.toString())===v.entreprise.toString():!1}))),v.search){const F=v.search.toLowerCase();$=$.filter(I=>{var X,K,ve,ge;return((X=I.username)==null?void 0:X.toLowerCase().includes(F))||((K=I.email)==null?void 0:K.toLowerCase().includes(F))||((ve=I.first_name)==null?void 0:ve.toLowerCase().includes(F))||((ge=I.last_name)==null?void 0:ge.toLowerCase().includes(F))||I.company_name&&I.company_name.toLowerCase().includes(F)})}return $});Ss(async()=>{await D(),await R()});async function D(){var $,F,I;h.value=!0;try{if(m.value)r.value=await e.fetchUsers();else if(C.value){const[X,K]=await Promise.all([iv({role:"SALARIE",entrepriseId:($=e.user)==null?void 0:$.id}),iv({role:"VISITEUR",entrepriseId:(F=e.user)==null?void 0:F.id})]);r.value=[...X,...K]}else E.value&&(r.value=await iv({role:"VISITEUR",salarieId:(I=e.user)==null?void 0:I.id,includeDetails:!0}),console.log("Visiteurs récupérés:",r.value))}catch(X){console.error("Erreur lors de la récupération des utilisateurs:",X),t.error("Erreur lors de la récupération des utilisateurs")}finally{h.value=!1}}async function R(){try{m.value?await Promise.all([W(),de()]):C.value&&await Q()}catch($){console.error("Erreur lors de la récupération des dépendances:",$)}}async function W(){var $;try{m.value?i.value=await e.fetchUsersByRole({role:"SALARIE"}):C.value&&(i.value=await e.fetchEntrepriseSalaries(($=e.user)==null?void 0:$.id))}catch(F){console.error("Erreur lors de la récupération des salaries:",F)}}async function Q(){var $,F;if(!(!C.value||!(($=e.user)!=null&&$.id)))try{i.value=await e.fetchEntrepriseSalaries((F=e.user)==null?void 0:F.id)}catch(I){console.error("Erreur lors de la récupération des salaries de l'entreprise:",I)}}async function de(){try{s.value=await e.fetchEnterprises()}catch($){console.error("Erreur lors de la récupération des entreprises:",$)}}function fe(){l.value=null,o.value=!0}function N($){l.value={...$},o.value=!0}function z(){o.value=!1,l.value=null,p.value=[]}async function J($){var I,X,K,ve,ge,He;p.value=[];const F=!!$.id;try{const ie={...$};m.value?(ie.entreprise&&typeof ie.entreprise=="object"?ie.entreprise_id=ie.entreprise.id:typeof ie.entreprise=="number"&&(ie.entreprise_id=ie.entreprise),ie.salarie&&typeof ie.salarie=="object"?ie.salarie_id=ie.salarie.id:typeof ie.salarie=="number"&&(ie.salarie_id=ie.salarie)):C.value?(ie.entreprise_id=(I=e.user)==null?void 0:I.id,ie.role==="VISITEUR"&&(ie.salarie&&typeof ie.salarie=="object"?ie.salarie_id=ie.salarie.id:typeof ie.salarie=="number"&&(ie.salarie_id=ie.salarie))):E.value&&(ie.role="VISITEUR",ie.salarie_id=(X=e.user)==null?void 0:X.id),ie.role==="SALARIE"?((K=ie.entreprise)!=null&&K.id?(ie.entreprise_id=ie.entreprise.id,delete ie.entreprise):typeof ie.entreprise=="number"&&(ie.entreprise_id=ie.entreprise,delete ie.entreprise),delete ie.salarie):ie.role==="VISITEUR"&&((ve=ie.salarie)!=null&&ve.id?(ie.salarie_id=ie.salarie.id,delete ie.salarie):typeof ie.salarie=="number"&&(ie.salarie_id=ie.salarie,delete ie.salarie),delete ie.entreprise,delete ie.entreprise_id),F?(await e.updateUser($.id,ie),t.success("Utilisateur modifié avec succès")):(await e.createUser(ie),t.success("Utilisateur créé avec succès")),await Promise.all([D(),R()]),z()}catch(ie){console.error("Error saving user:",((ge=ie.response)==null?void 0:ge.data)||ie),p.value=Z7(ie),t.error("Erreur lors de la sauvegarde de l'utilisateur");const Ce=((He=ie.response)==null?void 0:He.data)||{};let _e="";throw typeof Ce=="object"&&(_e=Object.entries(Ce).map(([H,ee])=>Array.isArray(ee)?`${H}: ${ee[0]}`:`${H}: ${ee}`).filter(H=>H).join(`
`)),_e||(_e="Une erreur est survenue lors de la sauvegarde"),new Error(_e)}}function U($){u.value=$,a.value=!0}async function B(){if(u.value)try{await e.deleteUser(u.value.id),t.success("Utilisateur supprimé avec succès"),await Promise.all([D(),R()]),a.value=!1,u.value=null}catch($){throw console.error("Erreur lors de la suppression de l'utilisateur:",$),t.error("Erreur lors de la suppression de l'utilisateur"),$}}function G($){var F,I,X,K,ve,ge,He,ie;return m.value?!0:C.value?$.role==="SALARIE"?((F=$.entreprise)==null?void 0:F.id)===((I=e.user)==null?void 0:I.id):$.role==="VISITEUR"?((K=(X=$.salarie)==null?void 0:X.entreprise)==null?void 0:K.id)===((ve=e.user)==null?void 0:ve.id):!1:E.value?$.role==="VISITEUR"&&($.salarie_id===((ge=e.user)==null?void 0:ge.id)||((He=$.salarie)==null?void 0:He.id)===((ie=e.user)==null?void 0:ie.id)):!1}return($,F)=>{var I,X,K,ve;return Ne(),Re("div",$q,[x("div",Uq,[x("div",Vq,[x("h1",Hq,[m.value?(Ne(),Re("span",Gq,"Gestion des utilisateurs")):C.value?(Ne(),Re("span",Wq,"Gestion des salaries et visiteurs")):E.value?(Ne(),Re("span",qq,"Gestion des visiteurs")):Jt("",!0)]),x("button",{onClick:fe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[F[5]||(F[5]=x("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(Ne(),Re("span",Yq,"Nouvel utilisateur")):C.value?(Ne(),Re("span",Kq,"Nouveau salarie/visiteur")):E.value?(Ne(),Re("span",Zq,"Nouvel visiteur")):Jt("",!0)])]),x("div",Xq,[x("div",Jq,[x("div",Qq,[m.value||C.value?(Ne(),Re("div",eY,[F[9]||(F[9]=x("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Pn(x("select",{id:"role-filter","onUpdate:modelValue":F[0]||(F[0]=ge=>v.role=ge),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[F[6]||(F[6]=x("option",{value:""},"Tous les rôles",-1)),m.value?(Ne(),Re("option",tY,"Administrateur")):Jt("",!0),m.value?(Ne(),Re("option",nY,"Entreprise")):Jt("",!0),F[7]||(F[7]=x("option",{value:"SALARIE"},"Salarie",-1)),F[8]||(F[8]=x("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[Oi,v.role]])])):Jt("",!0),m.value?(Ne(),Re("div",rY,[F[11]||(F[11]=x("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Pn(x("select",{id:"entreprise-filter","onUpdate:modelValue":F[1]||(F[1]=ge=>v.entreprise=ge),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[F[10]||(F[10]=x("option",{value:""},"Toutes les entreprises",-1)),(Ne(!0),Re(wn,null,Wn(s.value,ge=>(Ne(),Re("option",{key:ge.id,value:ge.id},kt(yn(wu)(ge)),9,iY))),128))],512),[[Oi,v.entreprise]])])):Jt("",!0),m.value||C.value?(Ne(),Re("div",sY,[F[13]||(F[13]=x("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Pn(x("select",{id:"salarie-filter","onUpdate:modelValue":F[2]||(F[2]=ge=>v.salarie=ge),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[F[12]||(F[12]=x("option",{value:""},"Tous les salaries",-1)),(Ne(!0),Re(wn,null,Wn(k.value,ge=>(Ne(),Re("option",{key:ge.id,value:ge.id},kt(yn(wu)(ge)),9,oY))),128))],512),[[Oi,v.salarie]])])):Jt("",!0)]),x("div",aY,[F[14]||(F[14]=x("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Pn(x("input",{type:"text",id:"search","onUpdate:modelValue":F[3]||(F[3]=ge=>v.search=ge),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Ar,v.search]])])])]),x("div",lY,[x("div",uY,[x("table",cY,[x("thead",dY,[x("tr",null,[F[15]||(F[15]=x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),F[16]||(F[16]=x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),F[17]||(F[17]=x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),m.value||C.value?(Ne(),Re("th",hY," Entreprise ")):Jt("",!0),m.value||C.value?(Ne(),Re("th",fY," Salarie ")):Jt("",!0),F[18]||(F[18]=x("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),F[19]||(F[19]=x("th",{scope:"col",class:"relative px-6 py-3"},[x("span",{class:"sr-only"},"Actions")],-1))])]),x("tbody",pY,[h.value?(Ne(),Re("tr",gY,F[20]||(F[20]=[x("td",{colspan:"7",class:"py-4 px-6"},[x("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):A.value.length===0?(Ne(),Re("tr",mY,F[21]||(F[21]=[x("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):Jt("",!0),(Ne(!0),Re(wn,null,Wn(A.value,ge=>{var He;return Ne(),Re("tr",{key:ge.id},[x("td",vY,[x("div",yY,[x("div",bY,[x("div",_Y,[x("span",wY,kt(yn(J7)(ge.first_name,ge.last_name)),1)])]),x("div",xY,[x("div",LY,kt(yn(wu)(ge)),1),x("div",CY,kt(ge.username),1)])])]),x("td",SY,[x("span",{class:xi(yn(tB)())},kt(yn(eB)(ge.role)),3)]),x("td",EY,kt(ge.email),1),m.value||C.value?(Ne(),Re("td",MY,[ge.role==="ENTREPRISE"?(Ne(),Re(wn,{key:0},[qr(" - ")],64)):ge.role==="SALARIE"?(Ne(),Re(wn,{key:1},[qr(kt(ge.entreprise?yn(wu)(ge.entreprise):"Non assigné"),1)],64)):ge.role==="VISITEUR"?(Ne(),Re(wn,{key:2},[qr(kt((He=ge.salarie)!=null&&He.entreprise?yn(wu)(ge.salarie.entreprise):"Non assigné"),1)],64)):(Ne(),Re(wn,{key:3},[qr(" - ")],64))])):Jt("",!0),m.value||C.value?(Ne(),Re("td",PY,[ge.role==="ENTREPRISE"||ge.role==="ADMIN"?(Ne(),Re(wn,{key:0},[qr(" - ")],64)):ge.role==="SALARIE"?(Ne(),Re(wn,{key:1},[qr(" - ")],64)):(Ne(),Re(wn,{key:2},[qr(kt(ge.salarie?yn(wu)(ge.salarie):"Non assigné"),1)],64))])):Jt("",!0),x("td",kY,[x("span",{class:xi(yn(nB)(ge.is_active))},kt(ge.is_active?"Actif":"Inactif"),3)]),x("td",AY,[x("button",{onClick:ie=>N(ge),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,TY),G(ge)?(Ne(),Re("button",{key:0,onClick:ie=>U(ge),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,DY)):Jt("",!0)])])}),128))])])])])]),o.value?(Ne(),Re("div",OY,[ni(Aq,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":m.value,"is-entreprise":C.value,"current-salarie":E.value?(X=(I=yn(e).user)==null?void 0:I.id)==null?void 0:X.toString():void 0,"current-entreprise":C.value?(ve=(K=yn(e).user)==null?void 0:K.id)==null?void 0:ve.toString():void 0,"api-errors":p.value,onClose:z,onSave:J},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):Jt("",!0),a.value?(Ne(),Vo(fM,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:B,onCancel:F[4]||(F[4]=ge=>a.value=!1)})):Jt("",!0)])}}}),IY={class:"h-full bg-gray-50"},BY={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},RY={class:"sm:flex sm:items-center"},FY={class:"sm:flex-auto"},jY={class:"text-2xl font-semibold text-gray-900"},zY={class:"mt-2 text-sm text-gray-700"},$Y={key:0,class:"mt-8"},UY={class:"mb-6"},VY=["value"],HY={class:"mb-6"},GY={value:null},WY=["value"],qY={key:0,class:"mb-6"},YY={value:null},KY=["value"],ZY={key:1,class:"mt-8"},XY={class:"mb-6"},JY=["value"],QY={class:"mt-8"},eK={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},tK={class:"overflow-x-auto"},nK={class:"min-w-full divide-y divide-gray-300"},rK={class:"bg-gray-50"},iK={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},sK={class:"ml-2 flex-none rounded"},oK={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},aK={class:"ml-2 flex-none rounded"},lK={class:"divide-y divide-gray-200 bg-white"},uK={key:0},cK={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},dK={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},hK={class:"px-3 py-4 text-sm text-gray-900"},fK={key:0,class:"flex items-center"},pK={class:"h-8 w-8 flex-shrink-0"},gK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},mK={class:"text-primary-700 font-medium text-sm"},vK={class:"ml-3"},yK={class:"font-medium"},bK={key:1,class:"text-gray-500"},_K={class:"px-3 py-4 text-sm text-gray-900"},wK={key:0,class:"flex items-center"},xK={class:"h-8 w-8 flex-shrink-0"},LK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},CK={class:"text-primary-700 font-medium text-sm"},SK={class:"ml-3"},EK={class:"font-medium"},MK={key:1,class:"text-gray-500"},PK={class:"px-3 py-4 text-sm text-gray-900"},kK={key:0,class:"flex items-center"},AK={class:"h-8 w-8 flex-shrink-0"},TK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},DK={class:"text-primary-700 font-medium text-sm"},OK={class:"ml-3"},NK={class:"font-medium"},IK={key:1,class:"text-gray-500"},BK={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},RK={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},FK=["onClick"],jK=["onClick"],zK=["onClick"],$K={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},UK={class:"bg-white rounded-lg p-6 max-w-md w-full"},VK={class:"flex justify-between items-center mb-4"},HK=["disabled"],GK=["disabled"],WK={key:0,class:"space-y-4"},qK={key:0},YK=["disabled"],KK=["value"],ZK=["disabled"],XK=["value"],JK={key:0,class:"mt-1 text-sm text-gray-500"},QK=["disabled"],eZ=["value"],tZ={key:0,class:"mt-1 text-sm text-gray-500"},nZ={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},rZ={class:"flex"},iZ={class:"ml-3"},sZ={class:"text-sm font-medium text-red-800"},oZ={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},aZ=["disabled"],lZ={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},uZ=Ms({__name:"PlansView",setup(n){const e=Bm(),t=Hy(),r=ro(),i=wt([]),s=wt([]),o=wt([]),a=wt([]),l=wt(!1),u=wt(!1),h=wt(!1),p=wt(null),v=wt({nom:"",description:"",client:null}),m=wt({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),C=wt(!1),E=wt(null),k=wt(null),A=wt(null),D=wt("date_modification"),R=wt("desc"),W=wt(null),Q=Gn(()=>k.value?a.value.filter(re=>typeof re.salarie=="object"&&re.salarie?re.salarie.id===k.value:re.salarie===k.value||re.salarie_id===k.value):a.value),de=Gn(()=>{let re=i.value;console.log(`
[PlansView] Filtering plans:`,re.map(De=>({id:De.id,entreprise:De.entreprise,salarie:De.salarie,visiteur:De.visiteur}))),r.isAdmin?(W.value&&(re=re.filter(De=>{var be;return typeof De.entreprise=="object"?((be=De.entreprise)==null?void 0:be.id)===W.value:De.entreprise===W.value})),k.value&&(re=re.filter(De=>{var be;return typeof De.salarie=="object"?((be=De.salarie)==null?void 0:be.id)===k.value:De.salarie===k.value}),A.value&&(re=re.filter(De=>{var be;return typeof De.visiteur=="object"?((be=De.visiteur)==null?void 0:be.id)===A.value:De.visiteur===A.value})))):r.isSalarie&&(re=re.filter(De=>{var be,Ie,le;return typeof De.salarie=="object"?((be=De.salarie)==null?void 0:be.id)===((Ie=r.user)==null?void 0:Ie.id):De.salarie===((le=r.user)==null?void 0:le.id)}),A.value&&(re=re.filter(De=>{var be;return typeof De.visiteur=="object"?((be=De.visiteur)==null?void 0:be.id)===A.value:De.visiteur===A.value})));const ae=[...re].sort((De,be)=>{if(D.value==="nom")return R.value==="asc"?De.nom.localeCompare(be.nom):be.nom.localeCompare(De.nom);{const Ie=new Date(De[D.value]).getTime(),le=new Date(be[D.value]).getTime();return R.value==="asc"?Ie-le:le-Ie}});return console.log("[PlansView] Final filtered and sorted plans:",ae.map(De=>({id:De.id,entreprise:De.entreprise,salarie:De.salarie,visiteur:De.visiteur}))),ae}),fe=Gn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans où vous êtes assigné comme salarie",plans:i.value.filter(re=>{var ae,De,be;return typeof re.salarie=="object"?((ae=re.salarie)==null?void 0:ae.id)===((De=r.user)==null?void 0:De.id):re.salarie===((be=r.user)==null?void 0:be.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:i.value.filter(re=>{var be,Ie,le,me;const ae=re.createur.id===((be=r.user)==null?void 0:be.id);let De=!1;return typeof re.visiteur=="object"?De=((Ie=re.visiteur)==null?void 0:Ie.id)===((le=r.user)==null?void 0:le.id):De=re.visiteur===((me=r.user)==null?void 0:me.id),De||ae})}),N=Gn(()=>W.value?s.value.filter(re=>{var ae;return typeof re.entreprise=="object"?((ae=re.entreprise)==null?void 0:ae.id)===W.value:re.entreprise_id===W.value}):s.value),z=Gn(()=>m.value.entreprise?s.value.filter(re=>{var ae;return typeof re.entreprise=="object"?((ae=re.entreprise)==null?void 0:ae.id)===m.value.entreprise:re.entreprise_id===m.value.entreprise}):[]),J=Gn(()=>!m.value.entreprise||!m.value.salarie?[]:a.value.filter(re=>typeof re.salarie=="object"&&re.salarie?re.salarie.id===m.value.salarie:re.salarie===m.value.salarie||re.salarie_id===m.value.salarie));Ss(async()=>{var re;await U(),r.isAdmin?await B():r.isSalarie&&await $(((re=r.user)==null?void 0:re.id)||0)});async function U(){try{const re=await t.fetchPlansWithDetails();i.value=re.data}catch(re){console.error("Erreur lors du chargement des plans:",re)}}async function B(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises chargées:",o.value)}catch(re){console.error("Erreur lors du chargement des entreprises:",re)}}async function G(re){try{if(console.log("Chargement des salaries pour l'entreprise:",re),re===void 0){const ae=await r.fetchUsersByRole({role:"SALARIE"});s.value=ae}else s.value=await r.fetchEntrepriseSalaries(re);console.log("Salaries chargés:",s.value)}catch(ae){console.error("Erreur lors du chargement des salaries:",ae)}}async function $(re){try{console.log("Chargement des visiteurs pour le salarie:",re);const ae=await iv({role:"VISITEUR",salarieId:re});a.value=ae.map(De=>({...De,salarie_id:re})),console.log("Visiteurs chargés:",a.value)}catch(ae){console.error("Erreur lors du chargement des visiteurs:",ae)}}function F(){l.value=!0,v.value={nom:"",description:"",client:null}}async function I(re){console.log(`
[PlansView][editPlan] ====== DÉBUT ÉDITION PLAN ======`),console.log("[PlansView][editPlan] Plan reçu:",{id:re.id,nom:re.nom,entreprise:re.entreprise,salarie:re.salarie,visiteur:re.visiteur});try{console.log("[PlansView][editPlan] Définition du plan courant dans le store..."),t.setCurrentPlan(re),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",re.id),localStorage.setItem("lastPlanId",re.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await e.push("/"),console.log(`[PlansView][editPlan] ====== FIN ÉDITION PLAN ======
`)}catch(ae){console.error("[PlansView][editPlan] ERREUR:",ae),ae instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",ae.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function X(re){re!=null&&re.id&&(p.value=re,h.value=!0)}async function K(){var re,ae;if((re=p.value)!=null&&re.id)try{await t.deletePlan(p.value.id),await U(),((ae=t.currentPlan)==null?void 0:ae.id)===p.value.id&&t.clearCurrentPlan()}catch(De){console.error("Erreur lors de la suppression du plan:",De),alert("Une erreur est survenue lors de la suppression du plan")}finally{h.value=!1,p.value=null}}function ve(){h.value=!1,p.value=null}function ge(re){return new Date(re).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function He(re){if(!re)return"";const ae=re.first_name||"",De=re.last_name||"";return(ae.charAt(0)+De.charAt(0)).toUpperCase()}async function ie(re){C.value=!0,E.value=null;try{r.isAdmin&&!o.value.length&&await B();const ae=typeof re.entreprise=="object"&&re.entreprise?re.entreprise.id:re.entreprise,De=typeof re.salarie=="object"&&re.salarie?re.salarie.id:re.salarie,be=typeof re.visiteur=="object"&&re.visiteur?re.visiteur.id:re.visiteur;m.value={id:re.id,nom:re.nom,description:re.description,entreprise:ae||null,salarie:De||null,visiteur:be||null},ae&&await G(ae),De&&await $(De),u.value=!0}catch(ae){console.error("Erreur lors de l'ouverture du modal:",ae),E.value="Erreur lors du chargement des données"}finally{C.value=!1}}async function Ce(){var re,ae,De,be,Ie;E.value=null,C.value=!0;try{if(!m.value.nom.trim())throw new Error("Le nom du plan est requis");if(m.value.visiteur&&!m.value.salarie)throw new Error("Un salarie doit être sélectionné pour assigner un visiteur");if(m.value.salarie&&!m.value.entreprise)throw new Error("Une entreprise doit être sélectionnée pour assigner un salarie");console.log("Données envoyées pour la mise à jour:",{id:m.value.id,nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});const le=await t.updatePlanDetails(m.value.id,{nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});console.log("Réponse de la mise à jour:",le),le&&(u.value=!1,await U())}catch(le){if(console.error("Erreur lors de la mise à jour du plan:",le),(ae=(re=le.response)==null?void 0:re.data)!=null&&ae.detail)E.value=le.response.data.detail;else if((be=(De=le.response)==null?void 0:De.data)!=null&&be.non_field_errors)E.value=le.response.data.non_field_errors[0];else if((Ie=le.response)!=null&&Ie.data){const me=Object.entries(le.response.data).map(([oe,Z])=>`${oe}: ${Array.isArray(Z)?Z[0]:Z}`);E.value=me.join(`
`)}else E.value=le.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{C.value=!1}}ai(()=>W.value,async re=>{k.value=null,A.value=null,re?await G(re):await G()}),ai(()=>k.value,async re=>{A.value=null,re&&await $(re)}),ai(()=>m.value.entreprise,async re=>{re===null?(m.value.salarie=null,m.value.visiteur=null):await G(re)}),ai(()=>m.value.salarie,async re=>{m.value.visiteur=null,re&&await $(re)});function _e(re){var Ie,le,me;const ae=r.user;if(!ae)return!1;if(ae.user_type==="admin")return!0;if(ae.user_type==="entreprise")return typeof re.entreprise=="object"?((Ie=re.entreprise)==null?void 0:Ie.id)===ae.id:re.entreprise===ae.id;if(ae.user_type==="salarie")return typeof re.salarie=="object"?((le=re.salarie)==null?void 0:le.id)===ae.id:re.salarie===ae.id;const De=re.createur.id===ae.id;let be=!1;return typeof re.visiteur=="object"?be=((me=re.visiteur)==null?void 0:me.id)===ae.id:be=re.visiteur===ae.id,be||De}async function H(re){await U(),localStorage.setItem("lastPlanId",re.toString()),console.log(`Plan ${re} créé et défini comme plan actif`),e.push("/")}function ee(re){D.value===re?R.value=R.value==="asc"?"desc":"asc":(D.value=re,R.value="desc")}function pe(re){return re?wu(re):""}return(re,ae)=>{var De;return Ne(),Re("div",IY,[x("div",BY,[x("div",RY,[x("div",FY,[x("h1",jY,kt(fe.value.title),1),x("p",zY,kt(fe.value.description),1)]),x("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[x("button",{onClick:F,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),yn(r).isAdmin?(Ne(),Re("div",$Y,[x("div",UY,[ae[15]||(ae[15]=x("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),Pn(x("select",{id:"entreprise-filter","onUpdate:modelValue":ae[0]||(ae[0]=be=>W.value=be),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ae[14]||(ae[14]=x("option",{value:null},"Toutes les entreprises",-1)),(Ne(!0),Re(wn,null,Wn(o.value,be=>(Ne(),Re("option",{key:be.id,value:be.id},kt(pe(be)),9,VY))),128))],512),[[Oi,W.value]])]),x("div",HY,[ae[16]||(ae[16]=x("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),Pn(x("select",{id:"salarie-filter","onUpdate:modelValue":ae[1]||(ae[1]=be=>k.value=be),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[x("option",GY,kt(N.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Ne(!0),Re(wn,null,Wn(N.value,be=>(Ne(),Re("option",{key:be.id,value:be.id},kt(pe(be)),9,WY))),128))],512),[[Oi,k.value]])]),k.value?(Ne(),Re("div",qY,[ae[17]||(ae[17]=x("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Pn(x("select",{id:"visiteur-filter","onUpdate:modelValue":ae[2]||(ae[2]=be=>A.value=be),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[x("option",YY,kt(Q.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Ne(!0),Re(wn,null,Wn(Q.value,be=>(Ne(),Re("option",{key:be.id,value:be.id},kt(pe(be)),9,KY))),128))],512),[[Oi,A.value]])])):Jt("",!0)])):yn(r).isSalarie?(Ne(),Re("div",ZY,[x("div",XY,[ae[19]||(ae[19]=x("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Pn(x("select",{id:"visiteur-filter","onUpdate:modelValue":ae[3]||(ae[3]=be=>A.value=be),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[ae[18]||(ae[18]=x("option",{value:null},"Tous les visiteurs",-1)),(Ne(!0),Re(wn,null,Wn(a.value,be=>(Ne(),Re("option",{key:be.id,value:be.id},kt(pe(be)),9,JY))),128))],512),[[Oi,A.value]])])])):Jt("",!0),x("div",QY,[x("div",eK,[x("div",tK,[x("table",nK,[x("thead",rK,[x("tr",null,[x("th",iK,[x("button",{onClick:ae[4]||(ae[4]=be=>ee("nom")),class:"group inline-flex items-center"},[ae[21]||(ae[21]=qr(" Nom ")),x("span",sK,[(Ne(),Re("svg",{class:xi(["h-5 w-5",{"text-gray-900":D.value==="nom","text-gray-400":D.value!=="nom","rotate-180":D.value==="nom"&&R.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ae[20]||(ae[20]=[x("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ae[24]||(ae[24]=x("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),ae[25]||(ae[25]=x("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),ae[26]||(ae[26]=x("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),ae[27]||(ae[27]=x("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),x("th",oK,[x("button",{onClick:ae[5]||(ae[5]=be=>ee("date_modification")),class:"group inline-flex items-center"},[ae[23]||(ae[23]=qr(" Dernière modification ")),x("span",aK,[(Ne(),Re("svg",{class:xi(["h-5 w-5",{"text-gray-900":D.value==="date_modification","text-gray-400":D.value!=="date_modification","rotate-180":D.value==="date_modification"&&R.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},ae[22]||(ae[22]=[x("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),ae[28]||(ae[28]=x("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[x("span",{class:"sr-only"},"Actions")],-1))])]),x("tbody",lK,[de.value.length===0?(Ne(),Re("tr",uK,ae[29]||(ae[29]=[x("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):Jt("",!0),(Ne(!0),Re(wn,null,Wn(de.value,be=>(Ne(),Re("tr",{key:be.id,class:"hover:bg-gray-50"},[x("td",cK,kt(be.nom),1),x("td",dK,kt(be.description||"-"),1),x("td",hK,[be.entreprise&&typeof be.entreprise=="object"?(Ne(),Re("div",fK,[x("div",pK,[x("div",gK,[x("span",mK,kt(He(be.entreprise)),1)])]),x("div",vK,[x("div",yK,kt(yn(wu)(be.entreprise)),1)])])):(Ne(),Re("div",bK," Non assigné "))]),x("td",_K,[be.salarie&&typeof be.salarie=="object"?(Ne(),Re("div",wK,[x("div",xK,[x("div",LK,[x("span",CK,kt(He(be.salarie)),1)])]),x("div",SK,[x("div",EK,kt(yn(wu)(be.salarie)),1)])])):(Ne(),Re("div",MK," Non assigné "))]),x("td",PK,[be.visiteur&&typeof be.visiteur=="object"?(Ne(),Re("div",kK,[x("div",AK,[x("div",TK,[x("span",DK,kt(He(be.visiteur)),1)])]),x("div",OK,[x("div",NK,kt(yn(wu)(be.visiteur)),1)])])):(Ne(),Re("div",IK," Non assigné "))]),x("td",BK,kt(ge(be.date_modification)),1),x("td",RK,[x("button",{onClick:Ie=>I(be),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,FK),x("button",{onClick:Ie=>ie(be),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,jK),_e(be)?(Ne(),Re("button",{key:0,onClick:Ie=>X(be),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,zK)):Jt("",!0)])]))),128))])])])])]),ni(GE,{modelValue:l.value,"onUpdate:modelValue":ae[6]||(ae[6]=be=>l.value=be),salaries:s.value,clients:a.value,onCreated:H},null,8,["modelValue","salaries","clients"]),u.value?(Ne(),Re("div",$K,[x("div",UK,[x("div",VK,[ae[31]||(ae[31]=x("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),x("button",{onClick:ae[7]||(ae[7]=be=>u.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},ae[30]||(ae[30]=[x("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),x("form",{onSubmit:Zl(Ce,["prevent"]),class:"space-y-4"},[x("div",null,[ae[32]||(ae[32]=x("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Pn(x("input",{type:"text",id:"edit-nom","onUpdate:modelValue":ae[8]||(ae[8]=be=>m.value.nom=be),disabled:C.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,HK),[[Ar,m.value.nom]])]),x("div",null,[ae[33]||(ae[33]=x("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Pn(x("textarea",{id:"edit-description","onUpdate:modelValue":ae[9]||(ae[9]=be=>m.value.description=be),disabled:C.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,GK),[[Ar,m.value.description]])]),yn(r).isAdmin||((De=yn(r).user)==null?void 0:De.user_type)==="entreprise"?(Ne(),Re("div",WK,[yn(r).isAdmin?(Ne(),Re("div",qK,[ae[35]||(ae[35]=x("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),Pn(x("select",{id:"edit-entreprise","onUpdate:modelValue":ae[10]||(ae[10]=be=>m.value.entreprise=be),disabled:C.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ae[34]||(ae[34]=x("option",{value:null},"Sélectionner une entreprise",-1)),(Ne(!0),Re(wn,null,Wn(o.value,be=>(Ne(),Re("option",{key:be.id,value:be.id},kt(pe(be)),9,KK))),128))],8,YK),[[Oi,m.value.entreprise]])])):Jt("",!0),x("div",null,[ae[37]||(ae[37]=x("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),Pn(x("select",{id:"edit-salarie","onUpdate:modelValue":ae[11]||(ae[11]=be=>m.value.salarie=be),disabled:yn(r).isAdmin&&!m.value.entreprise||C.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ae[36]||(ae[36]=x("option",{value:null},"Sélectionner un salarie",-1)),(Ne(!0),Re(wn,null,Wn(z.value,be=>(Ne(),Re("option",{key:be.id,value:be.id},kt(pe(be)),9,XK))),128))],8,ZK),[[Oi,m.value.salarie]]),yn(r).isAdmin&&!m.value.entreprise?(Ne(),Re("p",JK," Veuillez d'abord sélectionner une entreprise ")):Jt("",!0)]),x("div",null,[ae[39]||(ae[39]=x("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),Pn(x("select",{id:"edit-visiteur","onUpdate:modelValue":ae[12]||(ae[12]=be=>m.value.visiteur=be),disabled:!m.value.salarie||C.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[ae[38]||(ae[38]=x("option",{value:null},"Sélectionner un visiteur",-1)),(Ne(!0),Re(wn,null,Wn(J.value,be=>(Ne(),Re("option",{key:be.id,value:be.id},kt(pe(be)),9,eZ))),128))],8,QK),[[Oi,m.value.visiteur]]),m.value.salarie?Jt("",!0):(Ne(),Re("p",tZ," Veuillez d'abord sélectionner un salarie "))])])):Jt("",!0),E.value?(Ne(),Re("div",nZ,[x("div",rZ,[ae[40]||(ae[40]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),x("div",iZ,[x("p",sZ,kt(E.value),1)])])])):Jt("",!0),x("div",oZ,[x("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:ae[13]||(ae[13]=be=>u.value=!1)}," Annuler "),x("button",{type:"submit",disabled:C.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[C.value?(Ne(),Re("svg",lZ,ae[41]||(ae[41]=[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),qr(" "+kt(C.value?"Enregistrement...":"Enregistrer"),1)],8,aZ)])],32)])])):Jt("",!0),h.value?(Ne(),Vo(fM,{key:3,title:"Supprimer le plan",message:"Êtes-vous sûr de vouloir supprimer ce plan ? Cette action est irréversible.",onConfirm:K,onCancel:ve})):Jt("",!0)])])}}});var pM={exports:{}};const cZ=EE(cI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function W5(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function sd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?W5(Object(t),!0).forEach(function(r){dZ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):W5(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function hv(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hv=function(e){return typeof e}:hv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(n)}function dZ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ku(){return Ku=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ku.apply(this,arguments)}function hZ(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function fZ(n,e){if(n==null)return{};var t=hZ(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function pZ(n){return gZ(n)||mZ(n)||vZ(n)||yZ()}function gZ(n){if(Array.isArray(n))return R2(n)}function mZ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function vZ(n,e){if(n){if(typeof n=="string")return R2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return R2(n,e)}}function R2(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function yZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var bZ="1.14.0";function Rd(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Ud=Rd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Rm=Rd(/Edge/i),q5=Rd(/firefox/i),Kg=Rd(/safari/i)&&!Rd(/chrome/i)&&!Rd(/android/i),gM=Rd(/iP(ad|od|hone)/i),_Z=Rd(/chrome/i)&&Rd(/android/i),mM={capture:!1,passive:!1};function gi(n,e,t){n.addEventListener(e,t,!Ud&&mM)}function oi(n,e,t){n.removeEventListener(e,t,!Ud&&mM)}function Qv(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function wZ(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function bc(n,e,t,r){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&Qv(n,e):Qv(n,e))||r&&n===t)return n;if(n===t)break}while(n=wZ(n))}return null}var Y5=/\s+/g;function eo(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var r=(" "+n.className+" ").replace(Y5," ").replace(" "+e+" "," ");n.className=(r+(t?" "+e:"")).replace(Y5," ")}}function ir(n,e,t){var r=n&&n.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function gf(n,e){var t="";if(typeof n=="string")t=n;else do{var r=ir(n,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(n=n.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(t)}function vM(n,e,t){if(n){var r=n.getElementsByTagName(e),i=0,s=r.length;if(t)for(;i<s;i++)t(r[i],i);return r}return[]}function nd(){var n=document.scrollingElement;return n||document.documentElement}function Fs(n,e,t,r,i){if(!(!n.getBoundingClientRect&&n!==window)){var s,o,a,l,u,h,p;if(n!==window&&n.parentNode&&n!==nd()?(s=n.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,u=s.right,h=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,u=window.innerWidth,h=window.innerHeight,p=window.innerWidth),(e||t)&&n!==window&&(i=i||n.parentNode,!Ud))do if(i&&i.getBoundingClientRect&&(ir(i,"transform")!=="none"||t&&ir(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(ir(i,"border-top-width")),a-=v.left+parseInt(ir(i,"border-left-width")),l=o+s.height,u=a+s.width;break}while(i=i.parentNode);if(r&&n!==window){var m=gf(i||n),C=m&&m.a,E=m&&m.d;m&&(o/=E,a/=C,p/=C,h/=E,l=o+h,u=a+p)}return{top:o,left:a,bottom:l,right:u,width:p,height:h}}}function K5(n,e,t){for(var r=fh(n,!0),i=Fs(n)[e];r;){var s=Fs(r)[t],o=void 0;if(o=i>=s,!o)return r;if(r===nd())break;r=fh(r,!1)}return!1}function Np(n,e,t,r){for(var i=0,s=0,o=n.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Er.ghost&&(r||o[s]!==Er.dragged)&&bc(o[s],t.draggable,n,!1)){if(i===e)return o[s];i++}s++}return null}function Z_(n,e){for(var t=n.lastElementChild;t&&(t===Er.ghost||ir(t,"display")==="none"||e&&!Qv(t,e));)t=t.previousElementSibling;return t||null}function go(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==Er.clone&&(!e||Qv(n,e))&&t++;return t}function Z5(n){var e=0,t=0,r=nd();if(n)do{var i=gf(n),s=i.a,o=i.d;e+=n.scrollLeft*s,t+=n.scrollTop*o}while(n!==r&&(n=n.parentNode));return[e,t]}function xZ(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===n[t][r])return Number(t)}return-1}function fh(n,e){if(!n||!n.getBoundingClientRect)return nd();var t=n,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var i=ir(t);if(t.clientWidth<t.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return nd();if(r||e)return t;r=!0}}while(t=t.parentNode);return nd()}function LZ(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function fb(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var Zg;function yM(n,e){return function(){if(!Zg){var t=arguments,r=this;t.length===1?n.call(r,t[0]):n.apply(r,t),Zg=setTimeout(function(){Zg=void 0},e)}}}function CZ(){clearTimeout(Zg),Zg=void 0}function bM(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function X_(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function X5(n,e){ir(n,"position","absolute"),ir(n,"top",e.top),ir(n,"left",e.left),ir(n,"width",e.width),ir(n,"height",e.height)}function pb(n){ir(n,"position",""),ir(n,"top",""),ir(n,"left",""),ir(n,"width",""),ir(n,"height","")}var nl="Sortable"+new Date().getTime();function SZ(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(ir(i,"display")==="none"||i===Er.ghost)){n.push({target:i,rect:Fs(i)});var s=sd({},n[n.length-1].rect);if(i.thisAnimationDuration){var o=gf(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){n.push(r)},removeAnimationState:function(r){n.splice(xZ(n,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;n.forEach(function(a){var l=0,u=a.target,h=u.fromRect,p=Fs(u),v=u.prevFromRect,m=u.prevToRect,C=a.rect,E=gf(u,!0);E&&(p.top-=E.f,p.left-=E.e),u.toRect=p,u.thisAnimationDuration&&fb(v,p)&&!fb(h,p)&&(C.top-p.top)/(C.left-p.left)===(h.top-p.top)/(h.left-p.left)&&(l=MZ(C,v,m,i.options)),fb(p,h)||(u.prevFromRect=h,u.prevToRect=p,l||(l=i.options.animation),i.animate(u,C,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},l),u.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),n=[]},animate:function(r,i,s,o){if(o){ir(r,"transition",""),ir(r,"transform","");var a=gf(this.el),l=a&&a.a,u=a&&a.d,h=(i.left-s.left)/(l||1),p=(i.top-s.top)/(u||1);r.animatingX=!!h,r.animatingY=!!p,ir(r,"transform","translate3d("+h+"px,"+p+"px,0)"),this.forRepaintDummy=EZ(r),ir(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),ir(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){ir(r,"transition",""),ir(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function EZ(n){return n.offsetWidth}function MZ(n,e,t,r){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var Jf=[],gb={initializeByDefault:!0},Fm={mount:function(e){for(var t in gb)gb.hasOwnProperty(t)&&!(t in e)&&(e[t]=gb[t]);Jf.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Jf.push(e)},pluginEvent:function(e,t,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Jf.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](sd({sortable:t},r)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](sd({sortable:t},r)))})},initializePlugins:function(e,t,r,i){Jf.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var u=new a(e,t,e.options);u.sortable=e,u.options=e.options,e[l]=u,Ku(r,u.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var r={};return Jf.forEach(function(i){typeof i.eventProperties=="function"&&Ku(r,i.eventProperties.call(t[i.pluginName],e))}),r},modifyOption:function(e,t,r){var i;return Jf.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(i=s.optionListeners[t].call(e[s.pluginName],r))}),i}};function Eg(n){var e=n.sortable,t=n.rootEl,r=n.name,i=n.targetEl,s=n.cloneEl,o=n.toEl,a=n.fromEl,l=n.oldIndex,u=n.newIndex,h=n.oldDraggableIndex,p=n.newDraggableIndex,v=n.originalEvent,m=n.putSortable,C=n.extraEventProperties;if(e=e||t&&t[nl],!!e){var E,k=e.options,A="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Ud&&!Rm?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||t,E.from=a||t,E.item=i||t,E.clone=s,E.oldIndex=l,E.newIndex=u,E.oldDraggableIndex=h,E.newDraggableIndex=p,E.originalEvent=v,E.pullMode=m?m.lastPutMode:void 0;var D=sd(sd({},C),Fm.getEventProperties(r,e));for(var R in D)E[R]=D[R];t&&t.dispatchEvent(E),k[A]&&k[A].call(e,E)}}var PZ=["evt"],zl=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=fZ(r,PZ);Fm.pluginEvent.bind(Er)(e,t,sd({dragEl:Bn,parentEl:ho,ghostEl:Yr,rootEl:Rs,nextEl:tf,lastDownEl:fv,cloneEl:fo,cloneHidden:dh,dragStarted:Mg,putSortable:ka,activeSortable:Er.active,originalEvent:i,oldIndex:pp,oldDraggableIndex:Xg,newIndex:yu,newDraggableIndex:ch,hideGhostForTarget:LM,unhideGhostForTarget:CM,cloneNowHidden:function(){dh=!0},cloneNowShown:function(){dh=!1},dispatchSortableEvent:function(a){bl({sortable:t,name:a,originalEvent:i})}},s))};function bl(n){Eg(sd({putSortable:ka,cloneEl:fo,targetEl:Bn,rootEl:Rs,oldIndex:pp,oldDraggableIndex:Xg,newIndex:yu,newDraggableIndex:ch},n))}var Bn,ho,Yr,Rs,tf,fv,fo,dh,pp,yu,Xg,ch,k0,ka,dp=!1,ey=!1,ty=[],Yh,pc,mb,vb,J5,Q5,Mg,Qf,Jg,Qg=!1,A0=!1,pv,Ka,yb=[],F2=!1,ny=[],Yy=typeof document<"u",T0=gM,e3=Rm||Ud?"cssFloat":"float",kZ=Yy&&!_Z&&!gM&&"draggable"in document.createElement("div"),_M=function(){if(Yy){if(Ud)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),wM=function(e,t){var r=ir(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Np(e,0,t),o=Np(e,1,t),a=s&&ir(s),l=o&&ir(o),u=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Fs(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Fs(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||u>=i&&r[e3]==="none"||o&&r[e3]==="none"&&u+h>i)?"vertical":"horizontal"},AZ=function(e,t,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?t.left:t.top,l=r?t.right:t.bottom,u=r?t.width:t.height;return i===a||s===l||i+o/2===a+u/2},TZ=function(e,t){var r;return ty.some(function(i){var s=i[nl].options.emptyInsertThreshold;if(!(!s||Z_(i))){var o=Fs(i),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return r=i}}),r},xM=function(e){function t(s,o){return function(a,l,u,h){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,u,h),o)(a,l,u,h);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||hv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=t(i.pull,!0),r.checkPut=t(i.put),r.revertClone=i.revertClone,e.group=r},LM=function(){!_M&&Yr&&ir(Yr,"display","none")},CM=function(){!_M&&Yr&&ir(Yr,"display","")};Yy&&document.addEventListener("click",function(n){if(ey)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ey=!1,!1},!0);var Kh=function(e){if(Bn){e=e.touches?e.touches[0]:e;var t=TZ(e.clientX,e.clientY);if(t){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[nl]._onDragOver(r)}}},DZ=function(e){Bn&&Bn.parentNode[nl]._isOutsideThisEl(e.target)};function Er(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Ku({},e),n[nl]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return wM(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Er.supportPointer!==!1&&"PointerEvent"in window&&!Kg,emptyInsertThreshold:5};Fm.initializePlugins(this,n,t);for(var r in t)!(r in e)&&(e[r]=t[r]);xM(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:kZ,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?gi(n,"pointerdown",this._onTapStart):(gi(n,"mousedown",this._onTapStart),gi(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(gi(n,"dragover",this),gi(n,"dragenter",this)),ty.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Ku(this,SZ())}Er.prototype={constructor:Er,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Qf=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,Bn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=i.filter;if(zZ(r),!Bn&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Kg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=bc(l,i.draggable,r,!1),!(l&&l.animated)&&fv!==l)){if(pp=go(l),Xg=go(l,i.draggable),typeof h=="function"){if(h.call(this,e,l,this)){bl({sortable:t,rootEl:u,name:"filter",targetEl:l,toEl:r,fromEl:r}),zl("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(p){if(p=bc(u,p.trim(),r,!1),p)return bl({sortable:t,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),zl("filter",t,{evt:e}),!0}),h)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!bc(u,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Bn&&r.parentNode===s){var u=Fs(r);if(Rs=s,Bn=r,ho=Bn.parentNode,tf=Bn.nextSibling,fv=r,k0=o.group,Er.dragged=Bn,Yh={target:Bn,clientX:(t||e).clientX,clientY:(t||e).clientY},J5=Yh.clientX-u.left,Q5=Yh.clientY-u.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Bn.style["will-change"]="all",l=function(){if(zl("delayEnded",i,{evt:e}),Er.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!q5&&i.nativeDraggable&&(Bn.draggable=!0),i._triggerDragStart(e,t),bl({sortable:i,name:"choose",originalEvent:e}),eo(Bn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){vM(Bn,h.trim(),bb)}),gi(a,"dragover",Kh),gi(a,"mousemove",Kh),gi(a,"touchmove",Kh),gi(a,"mouseup",i._onDrop),gi(a,"touchend",i._onDrop),gi(a,"touchcancel",i._onDrop),q5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Bn.draggable=!0),zl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Rm||Ud))){if(Er.eventCanceled){this._onDrop();return}gi(a,"mouseup",i._disableDelayedDrag),gi(a,"touchend",i._disableDelayedDrag),gi(a,"touchcancel",i._disableDelayedDrag),gi(a,"mousemove",i._delayedDragTouchMoveHandler),gi(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&gi(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Bn&&bb(Bn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;oi(e,"mouseup",this._disableDelayedDrag),oi(e,"touchend",this._disableDelayedDrag),oi(e,"touchcancel",this._disableDelayedDrag),oi(e,"mousemove",this._delayedDragTouchMoveHandler),oi(e,"touchmove",this._delayedDragTouchMoveHandler),oi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?gi(document,"pointermove",this._onTouchMove):t?gi(document,"touchmove",this._onTouchMove):gi(document,"mousemove",this._onTouchMove):(gi(Bn,"dragend",this),gi(Rs,"dragstart",this._onDragStart));try{document.selection?gv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(dp=!1,Rs&&Bn){zl("dragStarted",this,{evt:t}),this.nativeDraggable&&gi(document,"dragover",DZ);var r=this.options;!e&&eo(Bn,r.dragClass,!1),eo(Bn,r.ghostClass,!0),Er.active=this,e&&this._appendGhost(),bl({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(pc){this._lastX=pc.clientX,this._lastY=pc.clientY,LM();for(var e=document.elementFromPoint(pc.clientX,pc.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(pc.clientX,pc.clientY),e!==t);)t=e;if(Bn.parentNode[nl]._isOutsideThisEl(e),t)do{if(t[nl]){var r=void 0;if(r=t[nl]._onDragOver({clientX:pc.clientX,clientY:pc.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);CM()}},_onTouchMove:function(e){if(Yh){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=Yr&&gf(Yr,!0),a=Yr&&o&&o.a,l=Yr&&o&&o.d,u=T0&&Ka&&Z5(Ka),h=(s.clientX-Yh.clientX+i.x)/(a||1)+(u?u[0]-yb[0]:0)/(a||1),p=(s.clientY-Yh.clientY+i.y)/(l||1)+(u?u[1]-yb[1]:0)/(l||1);if(!Er.active&&!dp){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Yr){o?(o.e+=h-(mb||0),o.f+=p-(vb||0)):o={a:1,b:0,c:0,d:1,e:h,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");ir(Yr,"webkitTransform",v),ir(Yr,"mozTransform",v),ir(Yr,"msTransform",v),ir(Yr,"transform",v),mb=h,vb=p,pc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Yr){var e=this.options.fallbackOnBody?document.body:Rs,t=Fs(Bn,!0,T0,!0,e),r=this.options;if(T0){for(Ka=e;ir(Ka,"position")==="static"&&ir(Ka,"transform")==="none"&&Ka!==document;)Ka=Ka.parentNode;Ka!==document.body&&Ka!==document.documentElement?(Ka===document&&(Ka=nd()),t.top+=Ka.scrollTop,t.left+=Ka.scrollLeft):Ka=nd(),yb=Z5(Ka)}Yr=Bn.cloneNode(!0),eo(Yr,r.ghostClass,!1),eo(Yr,r.fallbackClass,!0),eo(Yr,r.dragClass,!0),ir(Yr,"transition",""),ir(Yr,"transform",""),ir(Yr,"box-sizing","border-box"),ir(Yr,"margin",0),ir(Yr,"top",t.top),ir(Yr,"left",t.left),ir(Yr,"width",t.width),ir(Yr,"height",t.height),ir(Yr,"opacity","0.8"),ir(Yr,"position",T0?"absolute":"fixed"),ir(Yr,"zIndex","100000"),ir(Yr,"pointerEvents","none"),Er.ghost=Yr,e.appendChild(Yr),ir(Yr,"transform-origin",J5/parseInt(Yr.style.width)*100+"% "+Q5/parseInt(Yr.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,i=e.dataTransfer,s=r.options;if(zl("dragStart",this,{evt:e}),Er.eventCanceled){this._onDrop();return}zl("setupClone",this),Er.eventCanceled||(fo=X_(Bn),fo.draggable=!1,fo.style["will-change"]="",this._hideClone(),eo(fo,this.options.chosenClass,!1),Er.clone=fo),r.cloneId=gv(function(){zl("clone",r),!Er.eventCanceled&&(r.options.removeCloneOnHide||Rs.insertBefore(fo,Bn),r._hideClone(),bl({sortable:r,name:"clone"}))}),!t&&eo(Bn,s.dragClass,!0),t?(ey=!0,r._loopId=setInterval(r._emulateDragOver,50)):(oi(document,"mouseup",r._onDrop),oi(document,"touchend",r._onDrop),oi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Bn)),gi(document,"drop",r),ir(Bn,"transform","translateZ(0)")),dp=!0,r._dragStartId=gv(r._dragStarted.bind(r,t,e)),gi(document,"selectstart",r),Mg=!0,Kg&&ir(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,i,s,o,a=this.options,l=a.group,u=Er.active,h=k0===l,p=a.sort,v=ka||u,m,C=this,E=!1;if(F2)return;function k(K,ve){zl(K,C,sd({evt:e,isOwner:h,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:D,onMove:function(He,ie){return D0(Rs,t,Bn,i,He,Fs(He),e,ie)},changed:R},ve))}function A(){k("dragOverAnimationCapture"),C.captureAnimationState(),C!==v&&v.captureAnimationState()}function D(K){return k("dragOverCompleted",{insertion:K}),K&&(h?u._hideClone():u._showClone(C),C!==v&&(eo(Bn,ka?ka.options.ghostClass:u.options.ghostClass,!1),eo(Bn,a.ghostClass,!0)),ka!==C&&C!==Er.active?ka=C:C===Er.active&&ka&&(ka=null),v===C&&(C._ignoreWhileAnimating=r),C.animateAll(function(){k("dragOverAnimationComplete"),C._ignoreWhileAnimating=null}),C!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===Bn&&!Bn.animated||r===t&&!r.animated)&&(Qf=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(Bn.parentNode[nl]._isOutsideThisEl(e.target),!K&&Kh(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function R(){yu=go(Bn),ch=go(Bn,a.draggable),bl({sortable:C,name:"change",toEl:t,newIndex:yu,newDraggableIndex:ch,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=bc(r,a.draggable,t,!0),k("dragOver"),Er.eventCanceled)return E;if(Bn.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||C._ignoreWhileAnimating===r)return D(!1);if(ey=!1,u&&!a.disabled&&(h?p||(o=ho!==Rs):ka===this||(this.lastPutMode=k0.checkPull(this,u,Bn,e))&&l.checkPut(this,u,Bn,e))){if(m=this._getDirection(e,r)==="vertical",i=Fs(Bn),k("dragOverValid"),Er.eventCanceled)return E;if(o)return ho=Rs,A(),this._hideClone(),k("revert"),Er.eventCanceled||(tf?Rs.insertBefore(Bn,tf):Rs.appendChild(Bn)),D(!0);var W=Z_(t,a.draggable);if(!W||BZ(e,m,this)&&!W.animated){if(W===Bn)return D(!1);if(W&&t===e.target&&(r=W),r&&(s=Fs(r)),D0(Rs,t,Bn,i,r,s,e,!!r)!==!1)return A(),t.appendChild(Bn),ho=t,R(),D(!0)}else if(W&&IZ(e,m,this)){var Q=Np(t,0,a,!0);if(Q===Bn)return D(!1);if(r=Q,s=Fs(r),D0(Rs,t,Bn,i,r,s,e,!1)!==!1)return A(),t.insertBefore(Bn,Q),ho=t,R(),D(!0)}else if(r.parentNode===t){s=Fs(r);var de=0,fe,N=Bn.parentNode!==t,z=!AZ(Bn.animated&&Bn.toRect||i,r.animated&&r.toRect||s,m),J=m?"top":"left",U=K5(r,"top","top")||K5(Bn,"top","top"),B=U?U.scrollTop:void 0;Qf!==r&&(fe=s[J],Qg=!1,A0=!z&&a.invertSwap||N),de=RZ(e,r,s,m,z?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,A0,Qf===r);var G;if(de!==0){var $=go(Bn);do $-=de,G=ho.children[$];while(G&&(ir(G,"display")==="none"||G===Yr))}if(de===0||G===r)return D(!1);Qf=r,Jg=de;var F=r.nextElementSibling,I=!1;I=de===1;var X=D0(Rs,t,Bn,i,r,s,e,I);if(X!==!1)return(X===1||X===-1)&&(I=X===1),F2=!0,setTimeout(NZ,30),A(),I&&!F?t.appendChild(Bn):r.parentNode.insertBefore(Bn,I?F:r),U&&bM(U,0,B-U.scrollTop),ho=Bn.parentNode,fe!==void 0&&!A0&&(pv=Math.abs(fe-Fs(r)[J])),R(),D(!0)}if(t.contains(Bn))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){oi(document,"mousemove",this._onTouchMove),oi(document,"touchmove",this._onTouchMove),oi(document,"pointermove",this._onTouchMove),oi(document,"dragover",Kh),oi(document,"mousemove",Kh),oi(document,"touchmove",Kh)},_offUpEvents:function(){var e=this.el.ownerDocument;oi(e,"mouseup",this._onDrop),oi(e,"touchend",this._onDrop),oi(e,"pointerup",this._onDrop),oi(e,"touchcancel",this._onDrop),oi(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(yu=go(Bn),ch=go(Bn,r.draggable),zl("drop",this,{evt:e}),ho=Bn&&Bn.parentNode,yu=go(Bn),ch=go(Bn,r.draggable),Er.eventCanceled){this._nulling();return}dp=!1,A0=!1,Qg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),j2(this.cloneId),j2(this._dragStartId),this.nativeDraggable&&(oi(document,"drop",this),oi(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Kg&&ir(document.body,"user-select",""),ir(Bn,"transform",""),e&&(Mg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Yr&&Yr.parentNode&&Yr.parentNode.removeChild(Yr),(Rs===ho||ka&&ka.lastPutMode!=="clone")&&fo&&fo.parentNode&&fo.parentNode.removeChild(fo),Bn&&(this.nativeDraggable&&oi(Bn,"dragend",this),bb(Bn),Bn.style["will-change"]="",Mg&&!dp&&eo(Bn,ka?ka.options.ghostClass:this.options.ghostClass,!1),eo(Bn,this.options.chosenClass,!1),bl({sortable:this,name:"unchoose",toEl:ho,newIndex:null,newDraggableIndex:null,originalEvent:e}),Rs!==ho?(yu>=0&&(bl({rootEl:ho,name:"add",toEl:ho,fromEl:Rs,originalEvent:e}),bl({sortable:this,name:"remove",toEl:ho,originalEvent:e}),bl({rootEl:ho,name:"sort",toEl:ho,fromEl:Rs,originalEvent:e}),bl({sortable:this,name:"sort",toEl:ho,originalEvent:e})),ka&&ka.save()):yu!==pp&&yu>=0&&(bl({sortable:this,name:"update",toEl:ho,originalEvent:e}),bl({sortable:this,name:"sort",toEl:ho,originalEvent:e})),Er.active&&((yu==null||yu===-1)&&(yu=pp,ch=Xg),bl({sortable:this,name:"end",toEl:ho,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){zl("nulling",this),Rs=Bn=ho=Yr=tf=fo=fv=dh=Yh=pc=Mg=yu=ch=pp=Xg=Qf=Jg=ka=k0=Er.dragged=Er.ghost=Er.clone=Er.active=null,ny.forEach(function(e){e.checked=!0}),ny.length=mb=vb=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Bn&&(this._onDragOver(e),OZ(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)t=r[i],bc(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||jZ(t));return e},sort:function(e,t){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];bc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return bc(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var i=Fm.modifyOption(this,e,t);typeof i<"u"?r[e]=i:r[e]=t,e==="group"&&xM(r)},destroy:function(){zl("destroy",this);var e=this.el;e[nl]=null,oi(e,"mousedown",this._onTapStart),oi(e,"touchstart",this._onTapStart),oi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(oi(e,"dragover",this),oi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ty.splice(ty.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!dh){if(zl("hideClone",this),Er.eventCanceled)return;ir(fo,"display","none"),this.options.removeCloneOnHide&&fo.parentNode&&fo.parentNode.removeChild(fo),dh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(dh){if(zl("showClone",this),Er.eventCanceled)return;Bn.parentNode==Rs&&!this.options.group.revertClone?Rs.insertBefore(fo,Bn):tf?Rs.insertBefore(fo,tf):Rs.appendChild(fo),this.options.group.revertClone&&this.animate(Bn,fo),ir(fo,"display",""),dh=!1}}};function OZ(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function D0(n,e,t,r,i,s,o,a){var l,u=n[nl],h=u.options.onMove,p;return window.CustomEvent&&!Ud&&!Rm?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Fs(e),l.willInsertAfter=a,l.originalEvent=o,n.dispatchEvent(l),h&&(p=h.call(u,l,o)),p}function bb(n){n.draggable=!1}function NZ(){F2=!1}function IZ(n,e,t){var r=Fs(Np(t.el,0,t.options,!0)),i=10;return e?n.clientX<r.left-i||n.clientY<r.top&&n.clientX<r.right:n.clientY<r.top-i||n.clientY<r.bottom&&n.clientX<r.left}function BZ(n,e,t){var r=Fs(Z_(t.el,t.options.draggable)),i=10;return e?n.clientX>r.right+i||n.clientX<=r.right&&n.clientY>r.bottom&&n.clientX>=r.left:n.clientX>r.right&&n.clientY>r.top||n.clientX<=r.right&&n.clientY>r.bottom+i}function RZ(n,e,t,r,i,s,o,a){var l=r?n.clientY:n.clientX,u=r?t.height:t.width,h=r?t.top:t.left,p=r?t.bottom:t.right,v=!1;if(!o){if(a&&pv<u*i){if(!Qg&&(Jg===1?l>h+u*s/2:l<p-u*s/2)&&(Qg=!0),Qg)v=!0;else if(Jg===1?l<h+pv:l>p-pv)return-Jg}else if(l>h+u*(1-i)/2&&l<p-u*(1-i)/2)return FZ(e)}return v=v||o,v&&(l<h+u*s/2||l>p-u*s/2)?l>h+u/2?1:-1:0}function FZ(n){return go(Bn)<go(n)?1:-1}function jZ(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function zZ(n){ny.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&ny.push(r)}}function gv(n){return setTimeout(n,0)}function j2(n){return clearTimeout(n)}Yy&&gi(document,"touchmove",function(n){(Er.active||dp)&&n.cancelable&&n.preventDefault()});Er.utils={on:gi,off:oi,css:ir,find:vM,is:function(e,t){return!!bc(e,t,e,!1)},extend:LZ,throttle:yM,closest:bc,toggleClass:eo,clone:X_,index:go,nextTick:gv,cancelNextTick:j2,detectDirection:wM,getChild:Np};Er.get=function(n){return n[nl]};Er.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Er.utils=sd(sd({},Er.utils),r.utils)),Fm.mount(r)})};Er.create=function(n,e){return new Er(n,e)};Er.version=bZ;var Uo=[],Pg,z2,$2=!1,_b,wb,ry,kg;function $Z(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?gi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?gi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?gi(document,"touchmove",this._handleFallbackAutoScroll):gi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?oi(document,"dragover",this._handleAutoScroll):(oi(document,"pointermove",this._handleFallbackAutoScroll),oi(document,"touchmove",this._handleFallbackAutoScroll),oi(document,"mousemove",this._handleFallbackAutoScroll)),t3(),mv(),CZ()},nulling:function(){ry=z2=Pg=$2=kg=_b=wb=null,Uo.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var i=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(ry=t,r||this.options.forceAutoScrollFallback||Rm||Ud||Kg){xb(t,this.options,a,r);var l=fh(a,!0);$2&&(!kg||s!==_b||o!==wb)&&(kg&&t3(),kg=setInterval(function(){var u=fh(document.elementFromPoint(s,o),!0);u!==l&&(l=u,mv()),xb(t,i.options,u,r)},10),_b=s,wb=o)}else{if(!this.options.bubbleScroll||fh(a,!0)===nd()){mv();return}xb(t,this.options,fh(a,!1),!1)}}},Ku(n,{pluginName:"scroll",initializeByDefault:!0})}function mv(){Uo.forEach(function(n){clearInterval(n.pid)}),Uo=[]}function t3(){clearInterval(kg)}var xb=yM(function(n,e,t,r){if(e.scroll){var i=(n.touches?n.touches[0]:n).clientX,s=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=nd(),u=!1,h;z2!==t&&(z2=t,mv(),Pg=e.scroll,h=e.scrollFn,Pg===!0&&(Pg=fh(t,!0)));var p=0,v=Pg;do{var m=v,C=Fs(m),E=C.top,k=C.bottom,A=C.left,D=C.right,R=C.width,W=C.height,Q=void 0,de=void 0,fe=m.scrollWidth,N=m.scrollHeight,z=ir(m),J=m.scrollLeft,U=m.scrollTop;m===l?(Q=R<fe&&(z.overflowX==="auto"||z.overflowX==="scroll"||z.overflowX==="visible"),de=W<N&&(z.overflowY==="auto"||z.overflowY==="scroll"||z.overflowY==="visible")):(Q=R<fe&&(z.overflowX==="auto"||z.overflowX==="scroll"),de=W<N&&(z.overflowY==="auto"||z.overflowY==="scroll"));var B=Q&&(Math.abs(D-i)<=o&&J+R<fe)-(Math.abs(A-i)<=o&&!!J),G=de&&(Math.abs(k-s)<=o&&U+W<N)-(Math.abs(E-s)<=o&&!!U);if(!Uo[p])for(var $=0;$<=p;$++)Uo[$]||(Uo[$]={});(Uo[p].vx!=B||Uo[p].vy!=G||Uo[p].el!==m)&&(Uo[p].el=m,Uo[p].vx=B,Uo[p].vy=G,clearInterval(Uo[p].pid),(B!=0||G!=0)&&(u=!0,Uo[p].pid=setInterval((function(){r&&this.layer===0&&Er.active._onTouchMove(ry);var F=Uo[this.layer].vy?Uo[this.layer].vy*a:0,I=Uo[this.layer].vx?Uo[this.layer].vx*a:0;typeof h=="function"&&h.call(Er.dragged.parentNode[nl],I,F,n,ry,Uo[this.layer].el)!=="continue"||bM(Uo[this.layer].el,I,F)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=fh(v,!1)));$2=u}},30),SM=function(e){var t=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var u=r||s;a();var h=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,p=document.elementFromPoint(h.clientX,h.clientY);l(),u&&!u.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function J_(){}J_.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Np(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:SM};Ku(J_,{pluginName:"revertOnSpill"});function Q_(){}Q_.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:SM};Ku(Q_,{pluginName:"removeOnSpill"});var zu;function UZ(){function n(){this.defaults={swapClass:"sortable-swap-highlight"}}return n.prototype={dragStart:function(t){var r=t.dragEl;zu=r},dragOverValid:function(t){var r=t.completed,i=t.target,s=t.onMove,o=t.activeSortable,a=t.changed,l=t.cancel;if(o.options.swap){var u=this.sortable.el,h=this.options;if(i&&i!==u){var p=zu;s(i)!==!1?(eo(i,h.swapClass,!0),zu=i):zu=null,p&&p!==zu&&eo(p,h.swapClass,!1)}a(),r(!0),l()}},drop:function(t){var r=t.activeSortable,i=t.putSortable,s=t.dragEl,o=i||this.sortable,a=this.options;zu&&eo(zu,a.swapClass,!1),zu&&(a.swap||i&&i.options.swap)&&s!==zu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),VZ(s,zu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){zu=null}},Ku(n,{pluginName:"swap",eventProperties:function(){return{swapItem:zu}}})}function VZ(n,e){var t=n.parentNode,r=e.parentNode,i,s;!t||!r||t.isEqualNode(e)||r.isEqualNode(n)||(i=go(n),s=go(e),t.isEqualNode(r)&&i<s&&s++,t.insertBefore(e,t.children[i]),r.insertBefore(n,r.children[s]))}var jr=[],vu=[],ug,gc,cg=!1,$l=!1,ep=!1,gs,dg,O0;function HZ(){function n(e){for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this));e.options.supportPointer?gi(document,"pointerup",this._deselectMultiDrag):(gi(document,"mouseup",this._deselectMultiDrag),gi(document,"touchend",this._deselectMultiDrag)),gi(document,"keydown",this._checkKeyDown),gi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";jr.length&&gc===e?jr.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return n.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var r=t.dragEl;gs=r},delayEnded:function(){this.isMultiDrag=~jr.indexOf(gs)},setupClone:function(t){var r=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var s=0;s<jr.length;s++)vu.push(X_(jr[s])),vu[s].sortableIndex=jr[s].sortableIndex,vu[s].draggable=!1,vu[s].style["will-change"]="",eo(vu[s],this.options.selectedClass,!1),jr[s]===gs&&eo(vu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(t){var r=t.sortable,i=t.rootEl,s=t.dispatchSortableEvent,o=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||jr.length&&gc===r&&(n3(!0,i),s("clone"),o()))},showClone:function(t){var r=t.cloneNowShown,i=t.rootEl,s=t.cancel;this.isMultiDrag&&(n3(!1,i),vu.forEach(function(o){ir(o,"display","")}),r(),O0=!1,s())},hideClone:function(t){var r=this;t.sortable;var i=t.cloneNowHidden,s=t.cancel;this.isMultiDrag&&(vu.forEach(function(o){ir(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),O0=!0,s())},dragStartGlobal:function(t){t.sortable,!this.isMultiDrag&&gc&&gc.multiDrag._deselectMultiDrag(),jr.forEach(function(r){r.sortableIndex=go(r)}),jr=jr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),ep=!0},dragStarted:function(t){var r=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){jr.forEach(function(o){o!==gs&&ir(o,"position","absolute")});var s=Fs(gs,!1,!0,!0);jr.forEach(function(o){o!==gs&&X5(o,s)}),$l=!0,cg=!0}i.animateAll(function(){$l=!1,cg=!1,r.options.animation&&jr.forEach(function(o){pb(o)}),r.options.sort&&N0()})}},dragOver:function(t){var r=t.target,i=t.completed,s=t.cancel;$l&&~jr.indexOf(r)&&(i(!1),s())},revert:function(t){var r=t.fromSortable,i=t.rootEl,s=t.sortable,o=t.dragRect;jr.length>1&&(jr.forEach(function(a){s.addAnimationState({target:a,rect:$l?Fs(a):o}),pb(a),a.fromRect=o,r.removeAnimationState(a)}),$l=!1,GZ(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var r=t.sortable,i=t.isOwner,s=t.insertion,o=t.activeSortable,a=t.parentEl,l=t.putSortable,u=this.options;if(s){if(i&&o._hideClone(),cg=!1,u.animation&&jr.length>1&&($l||!i&&!o.options.sort&&!l)){var h=Fs(gs,!1,!0,!0);jr.forEach(function(v){v!==gs&&(X5(v,h),a.appendChild(v))}),$l=!0}if(!i)if($l||N0(),jr.length>1){var p=O0;o._showClone(r),o.options.animation&&!O0&&p&&vu.forEach(function(v){o.addAnimationState({target:v,rect:dg}),v.fromRect=dg,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(t){var r=t.dragRect,i=t.isOwner,s=t.activeSortable;if(jr.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){dg=Ku({},r);var o=gf(gs,!0);dg.top-=o.f,dg.left-=o.e}},dragOverAnimationComplete:function(){$l&&($l=!1,N0())},drop:function(t){var r=t.originalEvent,i=t.rootEl,s=t.parentEl,o=t.sortable,a=t.dispatchSortableEvent,l=t.oldIndex,u=t.putSortable,h=u||this.sortable;if(r){var p=this.options,v=s.children;if(!ep)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),eo(gs,p.selectedClass,!~jr.indexOf(gs)),~jr.indexOf(gs))jr.splice(jr.indexOf(gs),1),ug=null,Eg({sortable:o,rootEl:i,name:"deselect",targetEl:gs});else{if(jr.push(gs),Eg({sortable:o,rootEl:i,name:"select",targetEl:gs}),r.shiftKey&&ug&&o.el.contains(ug)){var m=go(ug),C=go(gs);if(~m&&~C&&m!==C){var E,k;for(C>m?(k=m,E=C):(k=C,E=m+1);k<E;k++)~jr.indexOf(v[k])||(eo(v[k],p.selectedClass,!0),jr.push(v[k]),Eg({sortable:o,rootEl:i,name:"select",targetEl:v[k]}))}}else ug=gs;gc=h}if(ep&&this.isMultiDrag){if($l=!1,(s[nl].options.sort||s!==i)&&jr.length>1){var A=Fs(gs),D=go(gs,":not(."+this.options.selectedClass+")");if(!cg&&p.animation&&(gs.thisAnimationDuration=null),h.captureAnimationState(),!cg&&(p.animation&&(gs.fromRect=A,jr.forEach(function(W){if(W.thisAnimationDuration=null,W!==gs){var Q=$l?Fs(W):A;W.fromRect=Q,h.addAnimationState({target:W,rect:Q})}})),N0(),jr.forEach(function(W){v[D]?s.insertBefore(W,v[D]):s.appendChild(W),D++}),l===go(gs))){var R=!1;jr.forEach(function(W){if(W.sortableIndex!==go(W)){R=!0;return}}),R&&a("update")}jr.forEach(function(W){pb(W)}),h.animateAll()}gc=h}(i===s||u&&u.lastPutMode!=="clone")&&vu.forEach(function(W){W.parentNode&&W.parentNode.removeChild(W)})}},nullingGlobal:function(){this.isMultiDrag=ep=!1,vu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),oi(document,"pointerup",this._deselectMultiDrag),oi(document,"mouseup",this._deselectMultiDrag),oi(document,"touchend",this._deselectMultiDrag),oi(document,"keydown",this._checkKeyDown),oi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(typeof ep<"u"&&ep)&&gc===this.sortable&&!(t&&bc(t.target,this.options.draggable,this.sortable.el,!1))&&!(t&&t.button!==0))for(;jr.length;){var r=jr[0];eo(r,this.options.selectedClass,!1),jr.shift(),Eg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Ku(n,{pluginName:"multiDrag",utils:{select:function(t){var r=t.parentNode[nl];!r||!r.options.multiDrag||~jr.indexOf(t)||(gc&&gc!==r&&(gc.multiDrag._deselectMultiDrag(),gc=r),eo(t,r.options.selectedClass,!0),jr.push(t))},deselect:function(t){var r=t.parentNode[nl],i=jr.indexOf(t);!r||!r.options.multiDrag||!~i||(eo(t,r.options.selectedClass,!1),jr.splice(i,1))}},eventProperties:function(){var t=this,r=[],i=[];return jr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;$l&&s!==gs?o=-1:$l?o=go(s,":not(."+t.options.selectedClass+")"):o=go(s),i.push({multiDragElement:s,index:o})}),{items:pZ(jr),clones:[].concat(vu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),t==="ctrl"?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function GZ(n,e){jr.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function n3(n,e){vu.forEach(function(t,r){var i=e.children[t.sortableIndex+(n?Number(r):0)];i?e.insertBefore(t,i):e.appendChild(t)})}function N0(){jr.forEach(function(n){n!==gs&&n.parentNode&&n.parentNode.removeChild(n)})}Er.mount(new $Z);Er.mount(Q_,J_);const WZ=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:HZ,Sortable:Er,Swap:UZ,default:Er},Symbol.toStringTag,{value:"Module"})),qZ=EE(WZ);(function(n,e){(function(r,i){n.exports=i(cZ,qZ)})(typeof self<"u"?self:ga,function(t,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,u){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:u})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var u=Object.create(null);if(o.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var h in a)o.d(u,h,(function(p){return a[p]}).bind(null,h));return u},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),u={};u[l]="z",i.exports=String(u)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,u,h){if(a(l),u===void 0)return l;switch(h){case 0:return function(){return l.call(u)};case 1:return function(p){return l.call(u,p)};case 2:return function(p,v){return l.call(u,p,v)};case 3:return function(p,v,m){return l.call(u,p,v,m)}}return function(){return l.apply(u,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,u={}.toString,h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return h.slice()}};i.exports.f=function(m){return h&&u.call(m)=="[object Window]"?p(m):l(a(m))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),u=o("5c6c"),h=o("fc6a"),p=o("c04e"),v=o("5135"),m=o("0cfb"),C=Object.getOwnPropertyDescriptor;s.f=a?C:function(k,A){if(k=h(k),A=p(A,!0),m)try{return C(k,A)}catch{}if(v(k,A))return u(!l.f.call(k,A),k[A])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),u=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,u=o("a640"),h=o("ae40"),p=u("reduce"),v=h("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(C){return l(this,C,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(u,h){var p=u.exec;if(typeof p=="function"){var v=p.call(u,h);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(u,h)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),u=o("17c2"),h=o("9112");for(var p in l){var v=a[p],m=v&&v.prototype;if(m&&m.forEach!==u)try{h(m,"forEach",u)}catch{m.forEach=u}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),u=o("ae40"),h=l("forEach"),p=u("forEach");i.exports=!h||!p?function(m){return a(this,m,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),u=!1;try{var h=0,p={next:function(){return{done:!!h++}},return:function(){u=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,m){if(!m&&!u)return!1;var C=!1;try{var E={};E[l]=function(){return{next:function(){return{done:C=!0}}}},v(E)}catch{}return C}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),u=o("2d00"),h=l("species");i.exports=function(p){return u>=51||!a(function(){var v=[],m=v.constructor={};return m[h]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,u=Math.min;i.exports=function(h,p){var v=a(h);return v<0?l(v+p,0):u(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,u=o("9112"),h=o("6eeb"),p=o("ce4e"),v=o("e893"),m=o("94ca");i.exports=function(C,E){var k=C.target,A=C.global,D=C.stat,R,W,Q,de,fe,N;if(A?W=a:D?W=a[k]||p(k,{}):W=(a[k]||{}).prototype,W)for(Q in E){if(fe=E[Q],C.noTargetGet?(N=l(W,Q),de=N&&N.value):de=W[Q],R=m(A?Q:k+(D?".":"#")+Q,C.forced),!R&&de!==void 0){if(typeof fe==typeof de)continue;v(fe,de)}(C.sham||de&&de.sham)&&u(fe,"sham",!0),h(W,Q,fe,C)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),u=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,u)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),u=o("d039"),h=o("ad6d"),p="toString",v=RegExp.prototype,m=v[p],C=u(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),E=m.name!=p;(C||E)&&a(RegExp.prototype,p,function(){var A=l(this),D=String(A.source),R=A.flags,W=String(R===void 0&&A instanceof RegExp&&!("flags"in v)?h.call(A):R);return"/"+D+"/"+W},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,u=o("50c4"),h=o("5a34"),p=o("1d80"),v=o("ab13"),m=o("c430"),C="".startsWith,E=Math.min,k=v("startsWith"),A=!m&&!k&&!!function(){var D=l(String.prototype,"startsWith");return D&&!D.writable}();a({target:"String",proto:!0,forced:!A&&!k},{startsWith:function(R){var W=String(p(this));h(R);var Q=u(E(arguments.length>1?arguments[1]:void 0,W.length)),de=String(R);return C?C.call(W,de,Q):W.slice(Q,Q+de.length)===de}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),u=a.process,h=u&&u.versions,p=h&&h.v8,v,m;p?(v=p.split("."),m=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(m=v[1]))),i.exports=m&&+m},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),u=o("b622"),h=u("iterator");i.exports=function(p){if(p!=null)return p[h]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),u=o("825a"),h=o("df75");i.exports=a?Object.defineProperties:function(v,m){u(v);for(var C=h(m),E=C.length,k=0,A;E>k;)l.f(v,A=C[k++],m[A]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),u=o("7dd0"),h="String Iterator",p=l.set,v=l.getterFor(h);u(String,"String",function(m){p(this,{type:h,string:String(m),index:0})},function(){var C=v(this),E=C.string,k=C.index,A;return k>=E.length?{value:void 0,done:!0}:(A=a(E,k),C.index+=A.length,{value:A,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),u="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return l(h)=="String"?u.call(h,""):Object(h)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),u=o("9bf2"),h=a("unscopables"),p=Array.prototype;p[h]==null&&u.f(p,h,{configurable:!0,value:l(null)}),i.exports=function(v){p[h][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),u=o("b622"),h=u("match");i.exports=function(p){var v;return a(p)&&((v=p[h])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),u=o("23cb"),h=function(p){return function(v,m,C){var E=a(v),k=l(E.length),A=u(C,k),D;if(p&&m!=m){for(;k>A;)if(D=E[A++],D!=D)return!0}else for(;k>A;A++)if((p||A in E)&&E[A]===m)return p||A||0;return!p&&-1}};i.exports={includes:h(!0),indexOf:h(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,u=o("1dde"),h=o("ae40"),p=u("filter"),v=h("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(C){return l(this,C,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),u=o("9bdd"),h=o("e95a"),p=o("50c4"),v=o("8418"),m=o("35a1");i.exports=function(E){var k=l(E),A=typeof this=="function"?this:Array,D=arguments.length,R=D>1?arguments[1]:void 0,W=R!==void 0,Q=m(k),de=0,fe,N,z,J,U,B;if(W&&(R=a(R,D>2?arguments[2]:void 0,2)),Q!=null&&!(A==Array&&h(Q)))for(J=Q.call(k),U=J.next,N=new A;!(z=U.call(J)).done;de++)B=W?u(J,R,[z.value,de],!0):z.value,v(N,de,B);else for(fe=p(k.length),N=new A(fe);fe>de;de++)B=W?R(k[de],de):k[de],v(N,de,B);return N.length=de,N}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(h){return l(h)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(u){return u>0?l(a(u),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),u=o("7b0b"),h=o("50c4"),p=o("a691"),v=o("1d80"),m=o("8aa5"),C=o("14c3"),E=Math.max,k=Math.min,A=Math.floor,D=/\$([$&'`]|\d\d?|<[^>]*>)/g,R=/\$([$&'`]|\d\d?)/g,W=function(Q){return Q===void 0?Q:String(Q)};a("replace",2,function(Q,de,fe,N){var z=N.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,J=N.REPLACE_KEEPS_$0,U=z?"$":"$0";return[function($,F){var I=v(this),X=$==null?void 0:$[Q];return X!==void 0?X.call($,I,F):de.call(String(I),$,F)},function(G,$){if(!z&&J||typeof $=="string"&&$.indexOf(U)===-1){var F=fe(de,G,this,$);if(F.done)return F.value}var I=l(G),X=String(this),K=typeof $=="function";K||($=String($));var ve=I.global;if(ve){var ge=I.unicode;I.lastIndex=0}for(var He=[];;){var ie=C(I,X);if(ie===null||(He.push(ie),!ve))break;var Ce=String(ie[0]);Ce===""&&(I.lastIndex=m(X,h(I.lastIndex),ge))}for(var _e="",H=0,ee=0;ee<He.length;ee++){ie=He[ee];for(var pe=String(ie[0]),re=E(k(p(ie.index),X.length),0),ae=[],De=1;De<ie.length;De++)ae.push(W(ie[De]));var be=ie.groups;if(K){var Ie=[pe].concat(ae,re,X);be!==void 0&&Ie.push(be);var le=String($.apply(void 0,Ie))}else le=B(pe,X,re,ae,be,$);re>=H&&(_e+=X.slice(H,re)+le,H=re+pe.length)}return _e+X.slice(H)}];function B(G,$,F,I,X,K){var ve=F+G.length,ge=I.length,He=R;return X!==void 0&&(X=u(X),He=D),de.call(K,He,function(ie,Ce){var _e;switch(Ce.charAt(0)){case"$":return"$";case"&":return G;case"`":return $.slice(0,F);case"'":return $.slice(ve);case"<":_e=X[Ce.slice(1,-1)];break;default:var H=+Ce;if(H===0)return ie;if(H>ge){var ee=A(H/10);return ee===0?ie:ee<=ge?I[ee-1]===void 0?Ce.charAt(1):I[ee-1]+Ce.charAt(1):ie}_e=I[H-1]}return _e===void 0?"":_e})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(u,h){return l[u]||(l[u]=h!==void 0?h:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),u=o("7418"),h=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var m=l.f(h(v)),C=u.f;return C?m.concat(C(v)):m}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),u=o("7b0b"),h=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(C){var E=u(this),k=h(E.length),A;return p(C),A=v(E,0),A.length=l(A,E,E,k,0,1,C,arguments.length>1?arguments[1]:void 0),A}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),u=function(h){return function(p,v){var m=String(l(p)),C=a(v),E=m.length,k,A;return C<0||C>=E?h?"":void 0:(k=m.charCodeAt(C),k<55296||k>56319||C+1===E||(A=m.charCodeAt(C+1))<56320||A>57343?h?m.charAt(C):k:h?m.slice(C,C+2):(k-55296<<10)+(A-56320)+65536)}};i.exports={codeAt:u(!1),charAt:u(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),u=o("b622"),h=u("species");i.exports=function(p,v){var m;return l(p)&&(m=p.constructor,typeof m=="function"&&(m===Array||l(m.prototype))?m=void 0:a(m)&&(m=m[h],m===null&&(m=void 0))),new(m===void 0?Array:m)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),u=o("861d"),h=o("9112"),p=o("5135"),v=o("f772"),m=o("d012"),C=l.WeakMap,E,k,A,D=function(z){return A(z)?k(z):E(z,{})},R=function(z){return function(J){var U;if(!u(J)||(U=k(J)).type!==z)throw TypeError("Incompatible receiver, "+z+" required");return U}};if(a){var W=new C,Q=W.get,de=W.has,fe=W.set;E=function(z,J){return fe.call(W,z,J),J},k=function(z){return Q.call(W,z)||{}},A=function(z){return de.call(W,z)}}else{var N=v("state");m[N]=!0,E=function(z,J){return h(z,N,J),J},k=function(z){return p(z,N)?z[N]:{}},A=function(z){return p(z,N)}}i.exports={set:E,get:k,has:A,enforce:D,getterFor:R}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),u=o("5135"),h=o("ce4e"),p=o("8925"),v=o("69f3"),m=v.get,C=v.enforce,E=String(String).split("String");(i.exports=function(k,A,D,R){var W=R?!!R.unsafe:!1,Q=R?!!R.enumerable:!1,de=R?!!R.noTargetGet:!1;if(typeof D=="function"&&(typeof A=="string"&&!u(D,"name")&&l(D,"name",A),C(D).source=E.join(typeof A=="string"?A:"")),k===a){Q?k[A]=D:h(A,D);return}else W?!de&&k[A]&&(Q=!0):delete k[A];Q?k[A]=D:l(k,A,D)})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),u=o("fc6a"),h=o("d1e7").f,p=function(v){return function(m){for(var C=u(m),E=l(C),k=E.length,A=0,D=[],R;k>A;)R=E[A++],(!a||h.call(C,R))&&D.push(v?[R,C[R]]:C[R]);return D}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),u=o("e538"),h=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||h(v,p,{value:u.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),u=o("7839"),h=o("d012"),p=o("1be4"),v=o("cc12"),m=o("f772"),C=">",E="<",k="prototype",A="script",D=m("IE_PROTO"),R=function(){},W=function(z){return E+A+C+z+E+"/"+A+C},Q=function(z){z.write(W("")),z.close();var J=z.parentWindow.Object;return z=null,J},de=function(){var z=v("iframe"),J="java"+A+":",U;return z.style.display="none",p.appendChild(z),z.src=String(J),U=z.contentWindow.document,U.open(),U.write(W("document.F=Object")),U.close(),U.F},fe,N=function(){try{fe=document.domain&&new ActiveXObject("htmlfile")}catch{}N=fe?Q(fe):de();for(var z=u.length;z--;)delete N[k][u[z]];return N()};h[D]=!0,i.exports=Object.create||function(J,U){var B;return J!==null?(R[k]=a(J),B=new R,R[k]=null,B[D]=J):B=N(),U===void 0?B:l(B,U)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),u=o("e163"),h=o("d2bb"),p=o("d44e"),v=o("9112"),m=o("6eeb"),C=o("b622"),E=o("c430"),k=o("3f8c"),A=o("ae93"),D=A.IteratorPrototype,R=A.BUGGY_SAFARI_ITERATORS,W=C("iterator"),Q="keys",de="values",fe="entries",N=function(){return this};i.exports=function(z,J,U,B,G,$,F){l(U,J,B);var I=function(ee){if(ee===G&&He)return He;if(!R&&ee in ve)return ve[ee];switch(ee){case Q:return function(){return new U(this,ee)};case de:return function(){return new U(this,ee)};case fe:return function(){return new U(this,ee)}}return function(){return new U(this)}},X=J+" Iterator",K=!1,ve=z.prototype,ge=ve[W]||ve["@@iterator"]||G&&ve[G],He=!R&&ge||I(G),ie=J=="Array"&&ve.entries||ge,Ce,_e,H;if(ie&&(Ce=u(ie.call(new z)),D!==Object.prototype&&Ce.next&&(!E&&u(Ce)!==D&&(h?h(Ce,D):typeof Ce[W]!="function"&&v(Ce,W,N)),p(Ce,X,!0,!0),E&&(k[X]=N))),G==de&&ge&&ge.name!==de&&(K=!0,He=function(){return ge.call(this)}),(!E||F)&&ve[W]!==He&&v(ve,W,He),k[J]=He,G)if(_e={values:I(de),keys:$?He:I(Q),entries:I(fe)},F)for(H in _e)(R||K||!(H in ve))&&m(ve,H,_e[H]);else a({target:J,proto:!0,forced:R||K},_e);return _e}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),u=a.WeakMap;i.exports=typeof u=="function"&&/native code/.test(l(u))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),u=o("5c6c");i.exports=function(h,p,v){var m=a(p);m in h?l.f(h,m,u(0,v)):h[m]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,u;(function(h,p){l=[],a=p,u=typeof a=="function"?a.apply(s,l):a,u!==void 0&&(i.exports=u)})(typeof self<"u"?self:this,function(){function h(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==h&&document.currentScript)return document.currentScript;try{throw new Error}catch(fe){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,m=/@([^@]*):(\d+):(\d+)\s*$/ig,C=v.exec(fe.stack)||m.exec(fe.stack),E=C&&C[1]||!1,k=C&&C[2]||!1,A=document.location.href.replace(document.location.hash,""),D,R,W,Q=document.getElementsByTagName("script");E===A&&(D=document.documentElement.outerHTML,R=new RegExp("(?:[^\\n]+?\\n){0,"+(k-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),W=D.replace(R,"$1").trim());for(var de=0;de<Q.length;de++)if(Q[de].readyState==="interactive"||Q[de].src===E||E===A&&Q[de].innerHTML&&Q[de].innerHTML.trim()===W)return Q[de];return null}}return h})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(u){return l.call(u)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,u,h){return u+(h?a(l,u).length:1)}},"8bbf":function(i,s){i.exports=t},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),u=o("5c6c");i.exports=a?function(h,p,v){return l.f(h,p,u(1,v))}:function(h,p,v){return h[p]=v,h}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),u=RegExp.prototype.exec,h=String.prototype.replace,p=u,v=function(){var k=/a/,A=/b*/g;return u.call(k,"a"),u.call(A,"a"),k.lastIndex!==0||A.lastIndex!==0}(),m=l.UNSUPPORTED_Y||l.BROKEN_CARET,C=/()??/.exec("")[1]!==void 0,E=v||C||m;E&&(p=function(A){var D=this,R,W,Q,de,fe=m&&D.sticky,N=a.call(D),z=D.source,J=0,U=A;return fe&&(N=N.replace("y",""),N.indexOf("g")===-1&&(N+="g"),U=String(A).slice(D.lastIndex),D.lastIndex>0&&(!D.multiline||D.multiline&&A[D.lastIndex-1]!==`
`)&&(z="(?: "+z+")",U=" "+U,J++),W=new RegExp("^(?:"+z+")",N)),C&&(W=new RegExp("^"+z+"$(?!\\s)",N)),v&&(R=D.lastIndex),Q=u.call(fe?W:D,U),fe?Q?(Q.input=Q.input.slice(J),Q[0]=Q[0].slice(J),Q.index=D.lastIndex,D.lastIndex+=Q[0].length):D.lastIndex=0:v&&Q&&(D.lastIndex=D.global?Q.index+Q[0].length:R),C&&Q&&Q.length>1&&h.call(Q[0],W,function(){for(de=1;de<arguments.length-2;de++)arguments[de]===void 0&&(Q[de]=void 0)}),Q}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,u=function(C,E){var k=p[h(C)];return k==m?!0:k==v?!1:typeof E=="function"?a(E):!!E},h=u.normalize=function(C){return String(C).replace(l,".").toLowerCase()},p=u.data={},v=u.NATIVE="N",m=u.POLYFILL="P";i.exports=u},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),u=o("e8b5"),h=o("861d"),p=o("7b0b"),v=o("50c4"),m=o("8418"),C=o("65f0"),E=o("1dde"),k=o("b622"),A=o("2d00"),D=k("isConcatSpreadable"),R=9007199254740991,W="Maximum allowed index exceeded",Q=A>=51||!l(function(){var z=[];return z[D]=!1,z.concat()[0]!==z}),de=E("concat"),fe=function(z){if(!h(z))return!1;var J=z[D];return J!==void 0?!!J:u(z)},N=!Q||!de;a({target:"Array",proto:!0,forced:N},{concat:function(J){var U=p(this),B=C(U,0),G=0,$,F,I,X,K;for($=-1,I=arguments.length;$<I;$++)if(K=$===-1?U:arguments[$],fe(K)){if(X=v(K.length),G+X>R)throw TypeError(W);for(F=0;F<X;F++,G++)F in K&&m(B,G,K[F])}else{if(G>=R)throw TypeError(W);m(B,G++,K)}return B.length=G,B}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,u,h,p){try{return p?u(a(h)[0],h[1]):u(h)}catch(m){var v=l.return;throw v!==void 0&&a(v.call(l)),m}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),u=o("825a"),h=o("c04e"),p=Object.defineProperty;s.f=a?p:function(m,C,E){if(u(m),C=h(C,!0),u(E),l)try{return p(m,C,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(m[C]=E.value),m}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),u=o("5c6c"),h=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(m,C,E){var k=C+" Iterator";return m.prototype=l(a,{next:u(1,E)}),h(m,k,!1,!0),p[k]=v,m}},"9f7f":function(i,s,o){var a=o("d039");function l(u,h){return RegExp(u,h)}s.UNSUPPORTED_Y=a(function(){var u=l("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var u=l("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),u=o("0366"),h=function(p,v,m,C,E,k,A,D){for(var R=E,W=0,Q=A?u(A,D,3):!1,de;W<C;){if(W in m){if(de=Q?Q(m[W],W,v):m[W],k>0&&a(de))R=h(p,v,de,l(de.length),R,k-1)-1;else{if(R>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[R]=de}R++}W++}return R};i.exports=h},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),u=o("a691"),h=o("50c4"),p=o("7b0b"),v=o("65f0"),m=o("8418"),C=o("1dde"),E=o("ae40"),k=C("splice"),A=E("splice",{ACCESSORS:!0,0:0,1:2}),D=Math.max,R=Math.min,W=9007199254740991,Q="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!k||!A},{splice:function(fe,N){var z=p(this),J=h(z.length),U=l(fe,J),B=arguments.length,G,$,F,I,X,K;if(B===0?G=$=0:B===1?(G=0,$=J-U):(G=B-2,$=R(D(u(N),0),J-U)),J+G-$>W)throw TypeError(Q);for(F=v(z,$),I=0;I<$;I++)X=U+I,X in z&&m(F,I,z[X]);if(F.length=$,G<$){for(I=U;I<J-$;I++)X=I+$,K=I+G,X in z?z[K]=z[X]:delete z[K];for(I=J;I>J-$+G;I--)delete z[I-1]}else if(G>$)for(I=J-$;I>U;I--)X=I+$-1,K=I+G-1,X in z?z[K]=z[X]:delete z[K];for(I=0;I<G;I++)z[I+U]=arguments[I+2];return z.length=J-$+G,F}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),u=o("d066"),h=o("c430"),p=o("83ab"),v=o("4930"),m=o("fdbf"),C=o("d039"),E=o("5135"),k=o("e8b5"),A=o("861d"),D=o("825a"),R=o("7b0b"),W=o("fc6a"),Q=o("c04e"),de=o("5c6c"),fe=o("7c73"),N=o("df75"),z=o("241c"),J=o("057f"),U=o("7418"),B=o("06cf"),G=o("9bf2"),$=o("d1e7"),F=o("9112"),I=o("6eeb"),X=o("5692"),K=o("f772"),ve=o("d012"),ge=o("90e3"),He=o("b622"),ie=o("e538"),Ce=o("746f"),_e=o("d44e"),H=o("69f3"),ee=o("b727").forEach,pe=K("hidden"),re="Symbol",ae="prototype",De=He("toPrimitive"),be=H.set,Ie=H.getterFor(re),le=Object[ae],me=l.Symbol,oe=u("JSON","stringify"),Z=B.f,Ae=G.f,je=J.f,Ke=$.f,Me=X("symbols"),he=X("op-symbols"),We=X("string-to-symbol-registry"),at=X("symbol-to-string-registry"),ut=X("wks"),Ct=l.QObject,Xe=!Ct||!Ct[ae]||!Ct[ae].findChild,zt=p&&C(function(){return fe(Ae({},"a",{get:function(){return Ae(this,"a",{value:7}).a}})).a!=7})?function(Sn,an,mn){var tr=Z(le,an);tr&&delete le[an],Ae(Sn,an,mn),tr&&Sn!==le&&Ae(le,an,tr)}:Ae,qt=function(Sn,an){var mn=Me[Sn]=fe(me[ae]);return be(mn,{type:re,tag:Sn,description:an}),p||(mn.description=an),mn},Qe=m?function(Sn){return typeof Sn=="symbol"}:function(Sn){return Object(Sn)instanceof me},ot=function(an,mn,tr){an===le&&ot(he,mn,tr),D(an);var ar=Q(mn,!0);return D(tr),E(Me,ar)?(tr.enumerable?(E(an,pe)&&an[pe][ar]&&(an[pe][ar]=!1),tr=fe(tr,{enumerable:de(0,!1)})):(E(an,pe)||Ae(an,pe,de(1,{})),an[pe][ar]=!0),zt(an,ar,tr)):Ae(an,ar,tr)},it=function(an,mn){D(an);var tr=W(mn),ar=N(tr).concat(En(tr));return ee(ar,function(mr){(!p||Yt.call(tr,mr))&&ot(an,mr,tr[mr])}),an},At=function(an,mn){return mn===void 0?fe(an):it(fe(an),mn)},Yt=function(an){var mn=Q(an,!0),tr=Ke.call(this,mn);return this===le&&E(Me,mn)&&!E(he,mn)?!1:tr||!E(this,mn)||!E(Me,mn)||E(this,pe)&&this[pe][mn]?tr:!0},bn=function(an,mn){var tr=W(an),ar=Q(mn,!0);if(!(tr===le&&E(Me,ar)&&!E(he,ar))){var mr=Z(tr,ar);return mr&&E(Me,ar)&&!(E(tr,pe)&&tr[pe][ar])&&(mr.enumerable=!0),mr}},xn=function(an){var mn=je(W(an)),tr=[];return ee(mn,function(ar){!E(Me,ar)&&!E(ve,ar)&&tr.push(ar)}),tr},En=function(an){var mn=an===le,tr=je(mn?he:W(an)),ar=[];return ee(tr,function(mr){E(Me,mr)&&(!mn||E(le,mr))&&ar.push(Me[mr])}),ar};if(v||(me=function(){if(this instanceof me)throw TypeError("Symbol is not a constructor");var an=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),mn=ge(an),tr=function(ar){this===le&&tr.call(he,ar),E(this,pe)&&E(this[pe],mn)&&(this[pe][mn]=!1),zt(this,mn,de(1,ar))};return p&&Xe&&zt(le,mn,{configurable:!0,set:tr}),qt(mn,an)},I(me[ae],"toString",function(){return Ie(this).tag}),I(me,"withoutSetter",function(Sn){return qt(ge(Sn),Sn)}),$.f=Yt,G.f=ot,B.f=bn,z.f=J.f=xn,U.f=En,ie.f=function(Sn){return qt(He(Sn),Sn)},p&&(Ae(me[ae],"description",{configurable:!0,get:function(){return Ie(this).description}}),h||I(le,"propertyIsEnumerable",Yt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:me}),ee(N(ut),function(Sn){Ce(Sn)}),a({target:re,stat:!0,forced:!v},{for:function(Sn){var an=String(Sn);if(E(We,an))return We[an];var mn=me(an);return We[an]=mn,at[mn]=an,mn},keyFor:function(an){if(!Qe(an))throw TypeError(an+" is not a symbol");if(E(at,an))return at[an]},useSetter:function(){Xe=!0},useSimple:function(){Xe=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:At,defineProperty:ot,defineProperties:it,getOwnPropertyDescriptor:bn}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:xn,getOwnPropertySymbols:En}),a({target:"Object",stat:!0,forced:C(function(){U.f(1)})},{getOwnPropertySymbols:function(an){return U.f(R(an))}}),oe){var $n=!v||C(function(){var Sn=me();return oe([Sn])!="[null]"||oe({a:Sn})!="{}"||oe(Object(Sn))!="{}"});a({target:"JSON",stat:!0,forced:$n},{stringify:function(an,mn,tr){for(var ar=[an],mr=1,zn;arguments.length>mr;)ar.push(arguments[mr++]);if(zn=mn,!(!A(mn)&&an===void 0||Qe(an)))return k(mn)||(mn=function(kr,as){if(typeof zn=="function"&&(as=zn.call(this,kr,as)),!Qe(as))return as}),ar[1]=mn,oe.apply(null,ar)}})}me[ae][De]||F(me[ae],De,me[ae].valueOf),_e(me,re),ve[pe]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),u=o("1c7e"),h=!u(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:h},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,u){var h=[][l];return!!h&&a(function(){h.call(null,u||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(u){var h=/./;try{"/./"[u](h)}catch{try{return h[l]=!1,"/./"[u](h)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),u="";return l.global&&(u+="g"),l.ignoreCase&&(u+="i"),l.multiline&&(u+="m"),l.dotAll&&(u+="s"),l.unicode&&(u+="u"),l.sticky&&(u+="y"),u}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),u=o("5135"),h=Object.defineProperty,p={},v=function(m){throw m};i.exports=function(m,C){if(u(p,m))return p[m];C||(C={});var E=[][m],k=u(C,"ACCESSORS")?C.ACCESSORS:!1,A=u(C,0)?C[0]:v,D=u(C,1)?C[1]:void 0;return p[m]=!!E&&!l(function(){if(k&&!a)return!0;var R={length:-1};k?h(R,1,{enumerable:!0,get:v}):R[1]=1,E.call(R,A,D)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),u=o("5135"),h=o("b622"),p=o("c430"),v=h("iterator"),m=!1,C=function(){return this},E,k,A;[].keys&&(A=[].keys(),"next"in A?(k=a(a(A)),k!==Object.prototype&&(E=k)):m=!0),E==null&&(E={}),!p&&!u(E,v)&&l(E,v,C),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:m}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,u=Function.prototype,h=u.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in u)&&l(u,v,{configurable:!0,get:function(){try{return h.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),u=o("5135"),h=o("90e3"),p=o("4930"),v=o("fdbf"),m=l("wks"),C=a.Symbol,E=v?C:C&&C.withoutSetter||h;i.exports=function(k){return u(m,k)||(p&&u(C,k)?m[k]=C[k]:m[k]=E("Symbol."+k)),m[k]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),u=o("df75"),h=o("d039"),p=h(function(){u(1)});a({target:"Object",stat:!0,forced:p},{keys:function(m){return u(l(m))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),u=o("7b0b"),h=o("50c4"),p=o("65f0"),v=[].push,m=function(C){var E=C==1,k=C==2,A=C==3,D=C==4,R=C==6,W=C==5||R;return function(Q,de,fe,N){for(var z=u(Q),J=l(z),U=a(de,fe,3),B=h(J.length),G=0,$=N||p,F=E?$(Q,B):k?$(Q,0):void 0,I,X;B>G;G++)if((W||G in J)&&(I=J[G],X=U(I,G,z),C)){if(E)F[G]=X;else if(X)switch(C){case 3:return!0;case 5:return I;case 6:return G;case 2:v.call(F,I)}else if(D)return!1}return R?-1:A||D?D:F}};i.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,u){if(!a(l))return l;var h,p;if(u&&typeof(h=l.toString)=="function"&&!a(p=h.call(l))||typeof(h=l.valueOf)=="function"&&!a(p=h.call(l))||!u&&typeof(h=l.toString)=="function"&&!a(p=h.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),u="__core-js_shared__",h=a[u]||l(u,{});i.exports=h},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,u=o("44d2"),h=o("ae40"),p="findIndex",v=!0,m=h(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!m},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),u(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,u=o("a640"),h=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,m=u("indexOf"),C=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!m||!C},{indexOf:function(k){return v?p.apply(this,arguments)||0:l(this,k,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),u=o("4d64").indexOf,h=o("d012");i.exports=function(p,v){var m=l(p),C=0,E=[],k;for(k in m)!a(h,k)&&a(m,k)&&E.push(k);for(;v.length>C;)a(m,k=v[C++])&&(~u(E,k)||E.push(k));return E}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,u=o("44d2"),h=o("ae40"),p=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),u("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),u=a.document,h=l(u)&&l(u.createElement);i.exports=function(p){return h?u.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(u,h){try{l(a,u,h)}catch{a[u]=h}return h}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),u=function(h){return typeof h=="function"?h:void 0};i.exports=function(h,p){return arguments.length<2?u(a[h])||u(l[h]):a[h]&&a[h][p]||l[h]&&l[h][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,u=l&&!a.call({1:2},1);s.f=u?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u=!1,h={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(h,[]),u=h instanceof Array}catch{}return function(m,C){return a(m),l(C),u?p.call(m,C):m.__proto__=C,m}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),u=o("b041");a||l(Object.prototype,"toString",u,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),u=o("b622"),h=u("toStringTag");i.exports=function(p,v,m){p&&!l(p=m?p:p.prototype,h)&&a(p,h,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),u=o("44ad"),h=o("50c4"),p=function(v){return function(m,C,E,k){a(C);var A=l(m),D=u(A),R=h(A.length),W=v?R-1:0,Q=v?-1:1;if(E<2)for(;;){if(W in D){k=D[W],W+=Q;break}if(W+=Q,v?W<0:R<=W)throw TypeError("Reduce of empty array with no initial value")}for(;v?W>=0:R>W;W+=Q)W in D&&(k=C(k,D[W],W,A));return k}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),u=o("b622"),h=o("9263"),p=o("9112"),v=u("species"),m=!l(function(){var D=/./;return D.exec=function(){var R=[];return R.groups={a:"7"},R},"".replace(D,"$<a>")!=="7"}),C=function(){return"a".replace(/./,"$0")==="$0"}(),E=u("replace"),k=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),A=!l(function(){var D=/(?:)/,R=D.exec;D.exec=function(){return R.apply(this,arguments)};var W="ab".split(D);return W.length!==2||W[0]!=="a"||W[1]!=="b"});i.exports=function(D,R,W,Q){var de=u(D),fe=!l(function(){var G={};return G[de]=function(){return 7},""[D](G)!=7}),N=fe&&!l(function(){var G=!1,$=/a/;return D==="split"&&($={},$.constructor={},$.constructor[v]=function(){return $},$.flags="",$[de]=/./[de]),$.exec=function(){return G=!0,null},$[de](""),!G});if(!fe||!N||D==="replace"&&!(m&&C&&!k)||D==="split"&&!A){var z=/./[de],J=W(de,""[D],function(G,$,F,I,X){return $.exec===h?fe&&!X?{done:!0,value:z.call($,F,I)}:{done:!0,value:G.call(F,$,I)}:{done:!1}},{REPLACE_KEEPS_$0:C,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:k}),U=J[0],B=J[1];a(String.prototype,D,U),a(RegExp.prototype,de,R==2?function(G,$){return B.call(G,this,$)}:function(G){return B.call(G,this)})}Q&&p(RegExp.prototype[de],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,u=o("1dde"),h=o("ae40"),p=u("map"),v=h("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(C){return l(this,C,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(u){return u&&u.Math==Math&&u};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),u=o("56ef"),h=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(C){for(var E=h(C),k=p.f,A=u(E),D={},R=0,W,Q;A.length>R;)Q=k(E,W=A[R++]),Q!==void 0&&v(D,W,Q);return D}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return u});function l(){return typeof window<"u"?window.console:a.console}var u=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),u=o("e260"),h=o("9112"),p=o("b622"),v=p("iterator"),m=p("toStringTag"),C=u.values;for(var E in l){var k=a[E],A=k&&k.prototype;if(A){if(A[v]!==C)try{h(A,v,C)}catch{A[v]=C}if(A[m]||h(A,m,E),l[E]){for(var D in u)if(A[D]!==u[D])try{h(A,D,u[D])}catch{A[D]=u[D]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(h){return a(h,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),u=o("da84"),h=o("5135"),p=o("861d"),v=o("9bf2").f,m=o("e893"),C=u.Symbol;if(l&&typeof C=="function"&&(!("description"in C.prototype)||C().description!==void 0)){var E={},k=function(){var de=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),fe=this instanceof k?new C(de):de===void 0?C():C(de);return de===""&&(E[fe]=!0),fe};m(k,C);var A=k.prototype=C.prototype;A.constructor=k;var D=A.toString,R=String(C("test"))=="Symbol(test)",W=/^Symbol\((.*)\)[^)]+$/;v(A,"description",{configurable:!0,get:function(){var de=p(this)?this.valueOf():this,fe=D.call(de);if(h(E,de))return"";var N=R?fe.slice(7,-1):fe.replace(W,"$1");return N===""?void 0:N}}),a({global:!0,forced:!0},{Symbol:k})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),u=o("f772"),h=o("e177"),p=u("IE_PROTO"),v=Object.prototype;i.exports=h?Object.getPrototypeOf:function(m){return m=l(m),a(m,p)?m[p]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),u=o("3f8c"),h=o("69f3"),p=o("7dd0"),v="Array Iterator",m=h.set,C=h.getterFor(v);i.exports=p(Array,"Array",function(E,k){m(this,{type:v,target:a(E),index:0,kind:k})},function(){var E=C(this),k=E.target,A=E.kind,D=E.index++;return!k||D>=k.length?(E.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:D,done:!1}:A=="values"?{value:k[D],done:!1}:{value:[D,k[D]],done:!1}},"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),u=o("fc6a"),h=o("06cf").f,p=o("83ab"),v=l(function(){h(1)}),m=!p||v;a({target:"Object",stat:!0,forced:m,sham:!p},{getOwnPropertyDescriptor:function(E,k){return h(u(E),k)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),u=o("06cf"),h=o("9bf2");i.exports=function(p,v){for(var m=l(v),C=h.f,E=u.f,k=0;k<m.length;k++){var A=m[k];a(p,A)||C(p,A,E(v,A))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(u){return a(u)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),u=a("iterator"),h=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||h[u]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),u=o("b622"),h=u("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(m,C){try{return m[C]}catch{}};i.exports=a?l:function(m){var C,E,k;return m===void 0?"Undefined":m===null?"Null":typeof(E=v(C=Object(m),h))=="string"?E:p?l(C):(k=l(C))=="Object"&&typeof C.callee=="function"?"Arguments":k}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),u=a("keys");i.exports=function(h){return u[h]||(u[h]=l(h))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var u=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);u&&(o.p=u[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function h(Qe,ot,it){return ot in Qe?Object.defineProperty(Qe,ot,{value:it,enumerable:!0,configurable:!0,writable:!0}):Qe[ot]=it,Qe}function p(Qe,ot){var it=Object.keys(Qe);if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(Qe);ot&&(At=At.filter(function(Yt){return Object.getOwnPropertyDescriptor(Qe,Yt).enumerable})),it.push.apply(it,At)}return it}function v(Qe){for(var ot=1;ot<arguments.length;ot++){var it=arguments[ot]!=null?arguments[ot]:{};ot%2?p(Object(it),!0).forEach(function(At){h(Qe,At,it[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors(it)):p(Object(it)).forEach(function(At){Object.defineProperty(Qe,At,Object.getOwnPropertyDescriptor(it,At))})}return Qe}function m(Qe){if(Array.isArray(Qe))return Qe}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function C(Qe,ot){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Qe)))){var it=[],At=!0,Yt=!1,bn=void 0;try{for(var xn=Qe[Symbol.iterator](),En;!(At=(En=xn.next()).done)&&(it.push(En.value),!(ot&&it.length===ot));At=!0);}catch($n){Yt=!0,bn=$n}finally{try{!At&&xn.return!=null&&xn.return()}finally{if(Yt)throw bn}}return it}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(Qe,ot){(ot==null||ot>Qe.length)&&(ot=Qe.length);for(var it=0,At=new Array(ot);it<ot;it++)At[it]=Qe[it];return At}function k(Qe,ot){if(Qe){if(typeof Qe=="string")return E(Qe,ot);var it=Object.prototype.toString.call(Qe).slice(8,-1);if(it==="Object"&&Qe.constructor&&(it=Qe.constructor.name),it==="Map"||it==="Set")return Array.from(Qe);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return E(Qe,ot)}}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(Qe,ot){return m(Qe)||C(Qe,ot)||k(Qe,ot)||A()}function R(Qe){if(Array.isArray(Qe))return E(Qe)}function W(Qe){if(typeof Symbol<"u"&&Symbol.iterator in Object(Qe))return Array.from(Qe)}function Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function de(Qe){return R(Qe)||W(Qe)||k(Qe)||Q()}var fe=o("a352"),N=o.n(fe);function z(Qe){Qe.parentElement!==null&&Qe.parentElement.removeChild(Qe)}function J(Qe,ot,it){var At=it===0?Qe.children[0]:Qe.children[it-1].nextSibling;Qe.insertBefore(ot,At)}var U=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function B(Qe){var ot=Object.create(null);return function(At){var Yt=ot[At];return Yt||(ot[At]=Qe(At))}}var G=/-(\w)/g,$=B(function(Qe){return Qe.replace(G,function(ot,it){return it.toUpperCase()})});o("5db7"),o("73d9");var F=["Start","Add","Remove","Update","End"],I=["Choose","Unchoose","Sort","Filter","Clone"],X=["Move"],K=[X,F,I].flatMap(function(Qe){return Qe}).map(function(Qe){return"on".concat(Qe)}),ve={manage:X,manageAndEmit:F,emit:I};function ge(Qe){return K.indexOf(Qe)!==-1}o("caad"),o("2ca0");var He=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function ie(Qe){return He.includes(Qe)}function Ce(Qe){return["transition-group","TransitionGroup"].includes(Qe)}function _e(Qe){return["id","class","role","style"].includes(Qe)||Qe.startsWith("data-")||Qe.startsWith("aria-")||Qe.startsWith("on")}function H(Qe){return Qe.reduce(function(ot,it){var At=D(it,2),Yt=At[0],bn=At[1];return ot[Yt]=bn,ot},{})}function ee(Qe){var ot=Qe.$attrs,it=Qe.componentData,At=it===void 0?{}:it,Yt=H(Object.entries(ot).filter(function(bn){var xn=D(bn,2),En=xn[0];return xn[1],_e(En)}));return v(v({},Yt),At)}function pe(Qe){var ot=Qe.$attrs,it=Qe.callBackBuilder,At=H(re(ot));Object.entries(it).forEach(function(bn){var xn=D(bn,2),En=xn[0],$n=xn[1];ve[En].forEach(function(Sn){At["on".concat(Sn)]=$n(Sn)})});var Yt="[data-draggable]".concat(At.draggable||"");return v(v({},At),{},{draggable:Yt})}function re(Qe){return Object.entries(Qe).filter(function(ot){var it=D(ot,2),At=it[0];return it[1],!_e(At)}).map(function(ot){var it=D(ot,2),At=it[0],Yt=it[1];return[$(At),Yt]}).filter(function(ot){var it=D(ot,2),At=it[0];return it[1],!ge(At)})}o("c740");function ae(Qe,ot){if(!(Qe instanceof ot))throw new TypeError("Cannot call a class as a function")}function De(Qe,ot){for(var it=0;it<ot.length;it++){var At=ot[it];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(Qe,At.key,At)}}function be(Qe,ot,it){return ot&&De(Qe.prototype,ot),Qe}var Ie=function(ot){var it=ot.el;return it},le=function(ot,it){return ot.__draggable_context=it},me=function(ot){return ot.__draggable_context},oe=function(){function Qe(ot){var it=ot.nodes,At=it.header,Yt=it.default,bn=it.footer,xn=ot.root,En=ot.realList;ae(this,Qe),this.defaultNodes=Yt,this.children=[].concat(de(At),de(Yt),de(bn)),this.externalComponent=xn.externalComponent,this.rootTransition=xn.transition,this.tag=xn.tag,this.realList=En}return be(Qe,[{key:"render",value:function(it,At){var Yt=this.tag,bn=this.children,xn=this._isRootComponent,En=xn?{default:function(){return bn}}:bn;return it(Yt,At,En)}},{key:"updated",value:function(){var it=this.defaultNodes,At=this.realList;it.forEach(function(Yt,bn){le(Ie(Yt),{element:At[bn],index:bn})})}},{key:"getUnderlyingVm",value:function(it){return me(it)}},{key:"getVmIndexFromDomIndex",value:function(it,At){var Yt=this.defaultNodes,bn=Yt.length,xn=At.children,En=xn.item(it);if(En===null)return bn;var $n=me(En);if($n)return $n.index;if(bn===0)return 0;var Sn=Ie(Yt[0]),an=de(xn).findIndex(function(mn){return mn===Sn});return it<an?0:bn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Qe}(),Z=o("8bbf");function Ae(Qe,ot){var it=Qe[ot];return it?it():[]}function je(Qe){var ot=Qe.$slots,it=Qe.realList,At=Qe.getKey,Yt=it||[],bn=["header","footer"].map(function(mn){return Ae(ot,mn)}),xn=D(bn,2),En=xn[0],$n=xn[1],Sn=ot.item;if(!Sn)throw new Error("draggable element must have an item slot");var an=Yt.flatMap(function(mn,tr){return Sn({element:mn,index:tr}).map(function(ar){return ar.key=At(mn),ar.props=v(v({},ar.props||{}),{},{"data-draggable":!0}),ar})});if(an.length!==Yt.length)throw new Error("Item slot must have only one child");return{header:En,footer:$n,default:an}}function Ke(Qe){var ot=Ce(Qe),it=!ie(Qe)&&!ot;return{transition:ot,externalComponent:it,tag:it?Object(Z.resolveComponent)(Qe):ot?Z.TransitionGroup:Qe}}function Me(Qe){var ot=Qe.$slots,it=Qe.tag,At=Qe.realList,Yt=Qe.getKey,bn=je({$slots:ot,realList:At,getKey:Yt}),xn=Ke(it);return new oe({nodes:bn,root:xn,realList:At})}function he(Qe,ot){var it=this;Object(Z.nextTick)(function(){return it.$emit(Qe.toLowerCase(),ot)})}function We(Qe){var ot=this;return function(it,At){if(ot.realList!==null)return ot["onDrag".concat(Qe)](it,At)}}function at(Qe){var ot=this,it=We.call(this,Qe);return function(At,Yt){it.call(ot,At,Yt),he.call(ot,Qe,At)}}var ut=null,Ct={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ot){return ot}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Xe=["update:modelValue","change"].concat(de([].concat(de(ve.manageAndEmit),de(ve.emit)).map(function(Qe){return Qe.toLowerCase()}))),zt=Object(Z.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ct,emits:Xe,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ot=this.$slots,it=this.$attrs,At=this.tag,Yt=this.componentData,bn=this.realList,xn=this.getKey,En=Me({$slots:ot,tag:At,realList:bn,getKey:xn});this.componentStructure=En;var $n=ee({$attrs:it,componentData:Yt});return En.render(Z.h,$n)}catch(Sn){return this.error=!0,Object(Z.h)("pre",{style:{color:"red"}},Sn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&U.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ot=this;if(!this.error){var it=this.$attrs,At=this.$el,Yt=this.componentStructure;Yt.updated();var bn=pe({$attrs:it,callBackBuilder:{manageAndEmit:function($n){return at.call(ot,$n)},emit:function($n){return he.bind(ot,$n)},manage:function($n){return We.call(ot,$n)}}}),xn=At.nodeType===1?At:At.parentElement;this._sortable=new N.a(xn,bn),this.targetDomElement=xn,xn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ot=this.list;return ot||this.modelValue},getKey:function(){var ot=this.itemKey;return typeof ot=="function"?ot:function(it){return it[ot]}}},watch:{$attrs:{handler:function(ot){var it=this._sortable;it&&re(ot).forEach(function(At){var Yt=D(At,2),bn=Yt[0],xn=Yt[1];it.option(bn,xn)})},deep:!0}},methods:{getUnderlyingVm:function(ot){return this.componentStructure.getUnderlyingVm(ot)||null},getUnderlyingPotencialDraggableComponent:function(ot){return ot.__draggable_component__},emitChanges:function(ot){var it=this;Object(Z.nextTick)(function(){return it.$emit("change",ot)})},alterList:function(ot){if(this.list){ot(this.list);return}var it=de(this.modelValue);ot(it),this.$emit("update:modelValue",it)},spliceList:function(){var ot=arguments,it=function(Yt){return Yt.splice.apply(Yt,de(ot))};this.alterList(it)},updatePosition:function(ot,it){var At=function(bn){return bn.splice(it,0,bn.splice(ot,1)[0])};this.alterList(At)},getRelatedContextFromMoveEvent:function(ot){var it=ot.to,At=ot.related,Yt=this.getUnderlyingPotencialDraggableComponent(it);if(!Yt)return{component:Yt};var bn=Yt.realList,xn={list:bn,component:Yt};if(it!==At&&bn){var En=Yt.getUnderlyingVm(At)||{};return v(v({},En),xn)}return xn},getVmIndexFromDomIndex:function(ot){return this.componentStructure.getVmIndexFromDomIndex(ot,this.targetDomElement)},onDragStart:function(ot){this.context=this.getUnderlyingVm(ot.item),ot.item._underlying_vm_=this.clone(this.context.element),ut=ot.item},onDragAdd:function(ot){var it=ot.item._underlying_vm_;if(it!==void 0){z(ot.item);var At=this.getVmIndexFromDomIndex(ot.newIndex);this.spliceList(At,0,it);var Yt={element:it,newIndex:At};this.emitChanges({added:Yt})}},onDragRemove:function(ot){if(J(this.$el,ot.item,ot.oldIndex),ot.pullMode==="clone"){z(ot.clone);return}var it=this.context,At=it.index,Yt=it.element;this.spliceList(At,1);var bn={element:Yt,oldIndex:At};this.emitChanges({removed:bn})},onDragUpdate:function(ot){z(ot.item),J(ot.from,ot.item,ot.oldIndex);var it=this.context.index,At=this.getVmIndexFromDomIndex(ot.newIndex);this.updatePosition(it,At);var Yt={element:this.context.element,oldIndex:it,newIndex:At};this.emitChanges({moved:Yt})},computeFutureIndex:function(ot,it){if(!ot.element)return 0;var At=de(it.to.children).filter(function(En){return En.style.display!=="none"}),Yt=At.indexOf(it.related),bn=ot.component.getVmIndexFromDomIndex(Yt),xn=At.indexOf(ut)!==-1;return xn||!it.willInsertAfter?bn:bn+1},onDragMove:function(ot,it){var At=this.move,Yt=this.realList;if(!At||!Yt)return!0;var bn=this.getRelatedContextFromMoveEvent(ot),xn=this.computeFutureIndex(bn,ot),En=v(v({},this.context),{},{futureIndex:xn}),$n=v(v({},ot),{},{relatedContext:bn,draggedContext:En});return At($n,it)},onDragEnd:function(){ut=null}}}),qt=zt;s.default=qt},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),u=o("e8b5"),h=o("23cb"),p=o("50c4"),v=o("fc6a"),m=o("8418"),C=o("b622"),E=o("1dde"),k=o("ae40"),A=E("slice"),D=k("slice",{ACCESSORS:!0,0:0,1:2}),R=C("species"),W=[].slice,Q=Math.max;a({target:"Array",proto:!0,forced:!A||!D},{slice:function(fe,N){var z=v(this),J=p(z.length),U=h(fe,J),B=h(N===void 0?J:N,J),G,$,F;if(u(z)&&(G=z.constructor,typeof G=="function"&&(G===Array||u(G.prototype))?G=void 0:l(G)&&(G=G[R],G===null&&(G=void 0)),G===Array||G===void 0))return W.call(z,U,B);for($=new(G===void 0?Array:G)(Q(B-U,0)),F=0;U<B;U++,F++)U in z&&m($,F,z[U]);return $.length=F,$}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(u){return a(l(u))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(pM);var YZ=pM.exports;const KZ=$_(YZ),ZZ={class:"h-full bg-gray-50"},XZ={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},JZ={class:"sm:flex sm:items-center"},QZ={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},eX={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},tX={class:"mt-6 bg-white shadow rounded-lg p-4"},nX={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},rX=["value"],iX={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},sX={key:1,class:"mt-6 overflow-x-auto pb-4"},oX={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},aX={key:1,class:"flex space-x-4 min-w-max"},lX={class:"bg-white rounded-lg shadow overflow-hidden"},uX={class:"flex items-center"},cX={class:"flex items-center"},dX={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},hX={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},fX={class:"min-h-[100px] draggable-container"},pX={class:"note-container"},gX={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},mX={class:"flex items-center"},vX={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},yX={class:"text-sm font-medium text-gray-900 truncate"},bX={class:"px-3 py-2"},_X={class:"text-sm text-gray-500 line-clamp-2"},wX={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},xX={class:"text-xs text-gray-500"},LX={class:"flex space-x-1"},CX={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note géolocalisée"},SX={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},EX=["onClick"],MX=["onClick"],PX=["onClick"],kX=["onClick"],AX={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},TX={class:"flex items-center justify-center min-h-screen w-full"},DX={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},OX={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},NX=Ms({__name:"NotesView",setup(n){const e=Bm(),t=eu(),r=wf(),i=ro(),s=Op(),o=wt(!0),a=wt(!1),l=wt(!1),u=wt(null),h=wt(null),p=wt("info"),v=wt(null),m=wt(window.innerWidth<768),C=()=>{m.value=window.innerWidth<768},E=Gn(()=>{const _e=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes triées:",_e),_e}),k=[{id:Di.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Di.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Di.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:Di.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salariés et visiteurs)"}],A=tu({search:"",date:"",accessLevel:""});function D(_e){if(!_e)return"Date non définie";try{const H=new Date(_e);return isNaN(H.getTime())?(console.warn("[safeFormatDate] Date invalide:",_e),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(H)}catch(H){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",H),"Date invalide"}}function R(_e){if(!_e)return null;try{const H=new Date(_e);return isNaN(H.getTime())?(console.warn("[safeDate] Date invalide:",_e),null):H}catch(H){return console.error("[safeDate] Erreur lors de la création de la date:",H),null}}function W(_e){return D(_e)}const Q=Gn(()=>{let _e=r.getAccessibleNotes;if(A.search){const H=A.search.toLowerCase();_e=_e.filter(ee=>ee.title.toLowerCase().includes(H)||ee.description.toLowerCase().includes(H))}if(A.accessLevel&&(_e=_e.filter(H=>H.accessLevel===A.accessLevel)),A.date){const H=new Date;H.setHours(0,0,0,0);const ee=new Date(H);ee.setDate(H.getDate()-H.getDay());const pe=new Date(H.getFullYear(),H.getMonth(),1);_e=_e.filter(re=>{const ae=R(re.createdAt);return ae?A.date==="today"?ae>=H:A.date==="week"?ae>=ee:A.date==="month"?ae>=pe:!0:!1})}return _e}),de=Gn(()=>_e=>Q.value.filter(H=>H.columnId===_e));function fe(_e){if(_e==null)return"Non défini";switch(_e){case Di.PRIVATE:return"Privé";case Di.COMPANY:return"Entreprise";case Di.EMPLOYEE:return"Salariés";case Di.VISITOR:return"Visiteurs";default:return"Non défini"}}function N(_e){if(_e==null)return"#9CA3AF";switch(_e){case Di.PRIVATE:return"#9CA3AF";case Di.COMPANY:return"#EF4444";case Di.EMPLOYEE:return"#F59E0B";case Di.VISITOR:return"#10B981";default:return"#6B7280"}}Ss(()=>{console.log("[NotesView] Composant monté"),z().then(()=>{console.log("[NotesView] Données chargées avec succès")}).catch(_e=>{console.error("[NotesView] Erreur lors du chargement des données:",_e),t.error("Erreur lors du chargement des données")}),document.addEventListener("click",Ce),window.addEventListener("resize",C)});async function z(){var _e;console.log(`
[NotesView][loadInitialData] Début du chargement des données`);try{o.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes chargées:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const H={};!i.isAdmin&&((_e=i.user)!=null&&_e.enterprise_id)&&(H.enterprise_id=i.user.enterprise_id,console.log(`[NotesView][loadInitialData] Filtrage des notes par entreprise: ${H.enterprise_id}`));const ee=await pa.getNotes(H);console.log("[NotesView][loadInitialData] Notes reçues:",ee.data),ee.data.length>0?(console.log("[NotesView][loadInitialData] Détails des notes:"),ee.data.forEach((De,be)=>{console.log(`Note ${be+1}:`,{id:De.id,title:De.title,columnId:De.column||De.column_id,access_level:De.access_level,column:De.column})})):console.warn("[NotesView][loadInitialData] Aucune note reçue du backend!");const pe=r.columns.map(De=>De.id),re=ee.data.filter(De=>{const be=(De.column||De.column_id||"").toString();return be===""||!pe.includes(be)});if(re.length>0){console.warn(`[NotesView][loadInitialData] ${re.length} notes avec des colonnes invalides:`,re),console.log("[NotesView][loadInitialData] Assignation des notes à la colonne À faire (2)");for(const De of re)try{await pa.updateNote(De.id,{column:"2"})}catch(be){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${De.id} à la colonne À faire:`,be)}}const ae=ee.data.map(De=>({id:De.id,title:De.title,description:De.description,location:De.location,columnId:(De.column||De.column_id||"2").toString(),access_level:De.access_level,style:De.style||{},comments:De.comments||[],photos:De.photos||[],order:De.order||0,createdAt:De.created_at,updatedAt:De.updated_at}));r.notes.length=0,ae.forEach(De=>{r.addNote(De)}),console.log("[NotesView][loadInitialData] Notes chargées dans le store");for(const De of r.columns){const be=r.getNotesByColumn(De.id);console.log(`[NotesView][loadInitialData] Colonne ${De.title} (${De.id}): ${be.length} notes`),be.length>0&&be.forEach(Ie=>{console.log(`  - Note ID=${Ie.id}, Titre="${Ie.title}", Niveau d'accès=${Ie.accessLevel}, Colonne=${Ie.columnId}`)})}}catch(H){console.error("[NotesView][loadInitialData] Erreur:",H),t.error("Erreur lors du chargement des données")}finally{o.value=!1,console.log("[NotesView][loadInitialData] Chargement terminé")}}function J(){e.push({path:"/",query:{tool:"Note"}})}async function U(_e){if(!_e.location){t.warning("Cette note n'est pas géolocalisée");return}try{const ee=(await pa.getNote(_e.id)).data,pe=ee.plan;console.log("[NotesView][viewOnMap] Détails de la note récupérés:",ee),e.push({path:"/",query:{lat:Array.isArray(_e.location)?_e.location[0].toString():_e.location.coordinates[1].toString(),lng:Array.isArray(_e.location)?_e.location[1].toString():_e.location.coordinates[0].toString(),noteId:_e.id.toString(),planId:pe?pe.toString():void 0}})}catch(H){console.error("[NotesView][viewOnMap] Erreur lors de la récupération des détails de la note:",H),t.error("Erreur lors de l'ouverture de la note sur la carte")}}function B(_e){if(!_e.location){t.warning("Cette note n'est pas géolocalisée");return}let H,ee;Array.isArray(_e.location)?(H=_e.location[0],ee=_e.location[1]):(H=_e.location.coordinates[1],ee=_e.location.coordinates[0]);const pe=`https://www.google.com/maps/dir/?api=1&destination=${H},${ee}`;window.open(pe,"_blank")}function G(_e){h.value=JSON.parse(JSON.stringify(_e)),p.value="info",l.value=!0}async function $(_e){if(console.log("[NotesView][handleNoteSave] Note sauvegardée:",_e),_e&&_e.id){const H=r.notes.find(ee=>ee.id===_e.id);H&&(!_e.comments&&H.comments&&(_e.comments=H.comments),!_e.photos&&H.photos&&(_e.photos=H.photos))}if(l.value=!1,v.value&&h.value)try{const H={location:h.value.location,name:h.value.title,description:h.value.description,columnId:h.value.columnId,accessLevel:h.value.accessLevel,style:h.value.style,comments:h.value.comments||[],photos:h.value.photos||[],order:h.value.order,createdAt:h.value.createdAt,updatedAt:new Date().toISOString()},ee=s.elements.findIndex(pe=>{var re;return pe.type_forme==="Note"&&pe.id===((re=h.value)==null?void 0:re.id)});ee!==-1?s.elements[ee].data=H:s.elements.push({id:h.value.id,type_forme:"Note",data:H}),await s.saveToPlan(v.value),t.success("Note sauvegardée et plan mis à jour avec succès")}catch(H){console.error("Erreur lors de la sauvegarde de la note:",H),t.error("Erreur lors de la sauvegarde de la note")}}function F(_e){u.value=_e,a.value=!0}async function I(){if(u.value)try{try{await pa.deleteNote(u.value.id)}catch(_e){if(_e.response&&_e.response.status===404)console.log("[NotesView][deleteNote] Note non trouvée dans le backend (404), suppression locale uniquement");else throw _e}r.removeNote(u.value.id),t.success("Note supprimée avec succès")}catch(_e){console.error("Erreur lors de la suppression de la note:",_e),t.error("Erreur lors de la suppression de la note")}finally{a.value=!1,u.value=null}}async function X(_e,H){console.log("[NotesView][onDragChange] Événement:",_e),console.log("[NotesView][onDragChange] Colonne cible:",H);try{if(_e.added){const{element:ee}=_e.added;console.log("[NotesView][onDragChange] Note à déplacer:",ee);const pe=typeof ee=="object"&&ee.id?ee.id:null;if(!pe)throw console.error("[NotesView][onDragChange] ID de note invalide:",ee),new Error("ID de note invalide");r.moveNote(pe,H);const ae=de.value(H).map(be=>be.id);r.reorderNotes(H,ae);const De=r.getColumnById(H);t.success(`Note déplacée vers ${(De==null?void 0:De.title)||"une autre colonne"}`),await K(pe,{columnId:H})}if(_e.moved){const ee=de.value(H),pe=ee.map(re=>re.id);r.reorderNotes(H,pe),t.success("Ordre des notes mis à jour");for(const[re,ae]of ee.entries())await K(ae.id,{order:re})}}catch(ee){console.error("[NotesView][onDragChange] Erreur:",ee),t.error("Une erreur est survenue lors du déplacement de la note")}}async function K(_e,H){console.log("[NotesView][updateNoteInBackend] Mise à jour de la note:",_e,H);try{const ee=r.notes.find(ae=>ae.id===_e);if(!ee){console.error("[NotesView][updateNoteInBackend] Note non trouvée:",_e);return}const pe={...H};if(H.columnId){const ae=r.getColumnById(H.columnId);ae?(console.log(`[NotesView][updateNoteInBackend] Mise à jour de la colonne: ${ae.id} (${ae.title})`),pe.column=ae.id,delete pe.columnId,delete pe.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouvée: ${H.columnId}`)}const re={...ee,...pe,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Données envoyées au backend:",re),await pa.updateNote(_e,re),console.log("[NotesView][updateNoteInBackend] Note mise à jour avec succès")}catch(ee){throw console.error("[NotesView][updateNoteInBackend] Erreur:",ee),ee}}function ve(){var _e;h.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:r.getDefaultColumn.id,accessLevel:Di.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[],enterprise_id:!i.isAdmin&&((_e=i.user)!=null&&_e.enterprise_id)?i.user.enterprise_id:null},l.value=!0,p.value="info"}const ge=wt(null),He=wt(!1);function ie(){He.value=!He.value}function Ce(_e){ge.value&&!ge.value.contains(_e.target)&&(He.value=!1)}return Ss(()=>{document.addEventListener("click",Ce),window.addEventListener("resize",C)}),Th(()=>{document.removeEventListener("click",Ce),window.removeEventListener("resize",C)}),(_e,H)=>{var ee,pe;return Ne(),Re("div",ZZ,[x("div",XZ,[x("div",JZ,[H[6]||(H[6]=x("div",{class:"sm:flex-auto"},[x("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),x("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),x("div",QZ,[x("div",{class:"relative",ref_key:"dropdownRef",ref:ge},[x("button",{onClick:ie,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},H[5]||(H[5]=[qr(" Créer "),x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),He.value?(Ne(),Re("div",eX,[x("div",{class:"py-1"},[x("button",{onClick:ve,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),x("button",{onClick:J,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note géolocalisée ")])])):Jt("",!0)],512)])]),x("div",tX,[x("div",nX,[x("div",null,[H[7]||(H[7]=x("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Pn(x("input",{type:"text",id:"search","onUpdate:modelValue":H[0]||(H[0]=re=>A.search=re),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Ar,A.search]])]),x("div",null,[H[9]||(H[9]=x("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),Pn(x("select",{id:"date","onUpdate:modelValue":H[1]||(H[1]=re=>A.date=re),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},H[8]||(H[8]=[x("option",{value:""},"Toutes les dates",-1),x("option",{value:"today"},"Aujourd'hui",-1),x("option",{value:"week"},"Cette semaine",-1),x("option",{value:"month"},"Ce mois",-1)]),512),[[Oi,A.date]])]),x("div",null,[H[11]||(H[11]=x("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),Pn(x("select",{id:"accessLevel","onUpdate:modelValue":H[2]||(H[2]=re=>A.accessLevel=re),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[H[10]||(H[10]=x("option",{value:""},"Tous les niveaux",-1)),(Ne(),Re(wn,null,Wn(k,re=>x("option",{key:re.id,value:re.id},kt(re.title),9,rX)),64))],512),[[Oi,A.accessLevel]])])])]),o.value?(Ne(),Re("div",iX,H[12]||(H[12]=[x("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),x("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Ne(),Re("div",sX,[Q.value.length===0?(Ne(),Re("div",oX,H[13]||(H[13]=[x("p",{class:"text-sm text-gray-500"},"Aucune note trouvée",-1)]))):Jt("",!0),Q.value.length>0?(Ne(),Re("div",aX,[(Ne(!0),Re(wn,null,Wn(E.value,re=>(Ne(),Re("div",{key:re.id,class:"column-wrapper w-80 flex-shrink-0"},[x("div",lX,[x("div",{class:"p-3 flex items-center justify-between no-select",style:Xl({backgroundColor:re.color+"20",borderBottom:"2px solid "+re.color})},[x("div",uX,[x("h3",{class:"text-sm font-semibold",style:Xl({color:re.color})},kt(re.title),5)]),x("div",cX,[x("span",dX,kt(de.value(re.id).length),1)])],4),x("div",hX,[x("div",fX,[ni(yn(KZ),{list:de.value(re.id),class:"space-y-2 empty-column-drop-zone",group:"notes","item-key":"id",handle:m.value?null:".note-drag-handle",onChange:ae=>X(ae,re.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:m.value},{item:Gu(({element:ae})=>[x("div",pX,[x("div",gX,[x("div",{class:xi(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!m.value,"no-select":!0}])},[x("div",mX,[m.value?Jt("",!0):(Ne(),Re("svg",vX,H[14]||(H[14]=[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),x("h4",yX,kt(ae.title),1)]),x("div",null,[x("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:Xl({backgroundColor:N(ae.accessLevel)+"20",color:N(ae.accessLevel)})},kt(fe(ae.accessLevel)||"Non défini"),5)])],2),x("div",bX,[x("p",_X,kt(ae.description||"Aucune description"),1)]),x("div",wX,[x("span",xX,kt(ae.updatedAt?W(ae.updatedAt):ae.createdAt?W(ae.createdAt):"Date non définie"),1),x("div",LX,[ae.location?(Ne(),Re("span",CX,H[15]||(H[15]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Ne(),Re("span",SX,H[16]||(H[16]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),ae.location?(Ne(),Re(wn,{key:2},[x("button",{onClick:De=>B(ae),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},H[17]||(H[17]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,EX),x("button",{onClick:De=>U(ae),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},H[18]||(H[18]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,MX)],64)):Jt("",!0),x("button",{onClick:De=>G(ae),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Éditer la note"},H[19]||(H[19]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,PX),x("button",{onClick:De=>F(ae),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},H[20]||(H[20]=[x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[x("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,kX)])])])])]),"empty-content":Gu(()=>H[21]||(H[21]=[x("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])):Jt("",!0)]))]),a.value?(Ne(),Re("div",AX,[x("div",TX,[H[23]||(H[23]=x("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),x("div",DX,[H[22]||(H[22]=Kl('<div class="p-4 md:p-6" data-v-2bccfcbb><div class="flex items-start" data-v-2bccfcbb><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-2bccfcbb><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-2bccfcbb><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-2bccfcbb></path></svg></div><div class="ml-4 flex-1" data-v-2bccfcbb><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-2bccfcbb> Supprimer la note </h3><div class="mt-2" data-v-2bccfcbb><p class="text-sm text-gray-500" data-v-2bccfcbb> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),x("div",OX,[x("button",{onClick:I,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),x("button",{onClick:H[3]||(H[3]=re=>a.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):Jt("",!0),l.value?(Ne(),Vo(VE,{key:1,note:h.value,"is-new-note":!((ee=h.value)!=null&&ee.id),location:(pe=h.value)==null?void 0:pe.location,onClose:H[4]||(H[4]=re=>l.value=!1),onSave:$},null,8,["note","is-new-note","location"])):Jt("",!0)])}}}),IX=ad(NX,[["__scopeId","data-v-2bccfcbb"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function jm(n){return n+.5|0}const ph=(n,e,t)=>Math.max(Math.min(n,t),e);function Ag(n){return ph(jm(n*2.55),0,255)}function wh(n){return ph(jm(n*255),0,255)}function kd(n){return ph(jm(n/2.55)/100,0,1)}function r3(n){return ph(jm(n*100),0,100)}const $u={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},U2=[..."0123456789ABCDEF"],BX=n=>U2[n&15],RX=n=>U2[(n&240)>>4]+U2[n&15],I0=n=>(n&240)>>4===(n&15),FX=n=>I0(n.r)&&I0(n.g)&&I0(n.b)&&I0(n.a);function jX(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&$u[n[1]]*17,g:255&$u[n[2]]*17,b:255&$u[n[3]]*17,a:e===5?$u[n[4]]*17:255}:(e===7||e===9)&&(t={r:$u[n[1]]<<4|$u[n[2]],g:$u[n[3]]<<4|$u[n[4]],b:$u[n[5]]<<4|$u[n[6]],a:e===9?$u[n[7]]<<4|$u[n[8]]:255})),t}const zX=(n,e)=>n<255?e(n):"";function $X(n){var e=FX(n)?BX:RX;return n?"#"+e(n.r)+e(n.g)+e(n.b)+zX(n.a,e):void 0}const UX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function EM(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function VX(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function HX(n,e,t){const r=EM(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function GX(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function ew(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2;let l,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),l=GX(t,r,i,h,s),l=l*60+.5),[l|0,u||0,a]}function tw(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(wh)}function nw(n,e,t){return tw(EM,n,e,t)}function WX(n,e,t){return tw(HX,n,e,t)}function qX(n,e,t){return tw(VX,n,e,t)}function MM(n){return(n%360+360)%360}function YX(n){const e=UX.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Ag(+e[5]):wh(+e[5]));const i=MM(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=WX(i,s,o):e[1]==="hsv"?r=qX(i,s,o):r=nw(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function KX(n,e){var t=ew(n);t[0]=MM(t[0]+e),t=nw(t),n.r=t[0],n.g=t[1],n.b=t[2]}function ZX(n){if(!n)return;const e=ew(n),t=e[0],r=r3(e[1]),i=r3(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${kd(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const i3={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},s3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function XX(){const n={},e=Object.keys(s3),t=Object.keys(i3);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<t.length;i++)s=t[i],a=a.replace(s,i3[s]);s=parseInt(s3[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}let B0;function JX(n){B0||(B0=XX(),B0.transparent=[0,0,0,0]);const e=B0[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const QX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function eJ(n){const e=QX.exec(n);let t=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?Ag(o):ph(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Ag(r):ph(r,0,255)),i=255&(e[4]?Ag(i):ph(i,0,255)),s=255&(e[6]?Ag(s):ph(s,0,255)),{r,g:i,b:s,a:t}}}function tJ(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${kd(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Lb=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,tp=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function nJ(n,e,t){const r=tp(kd(n.r)),i=tp(kd(n.g)),s=tp(kd(n.b));return{r:wh(Lb(r+t*(tp(kd(e.r))-r))),g:wh(Lb(i+t*(tp(kd(e.g))-i))),b:wh(Lb(s+t*(tp(kd(e.b))-s))),a:n.a+t*(e.a-n.a)}}function R0(n,e,t){if(n){let r=ew(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=nw(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function PM(n,e){return n&&Object.assign(e||{},n)}function o3(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=wh(n[3]))):(e=PM(n,{r:0,g:0,b:0,a:1}),e.a=wh(e.a)),e}function rJ(n){return n.charAt(0)==="r"?eJ(n):YX(n)}class wm{constructor(e){if(e instanceof wm)return e;const t=typeof e;let r;t==="object"?r=o3(e):t==="string"&&(r=jX(e)||JX(e)||rJ(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=PM(this._rgb);return e&&(e.a=kd(e.a)),e}set rgb(e){this._rgb=o3(e)}rgbString(){return this._valid?tJ(this._rgb):void 0}hexString(){return this._valid?$X(this._rgb):void 0}hslString(){return this._valid?ZX(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,a=2*o-1,l=r.a-i.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,r.r=255&u*r.r+s*i.r+.5,r.g=255&u*r.g+s*i.g+.5,r.b=255&u*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=nJ(this._rgb,e._rgb,t)),this}clone(){return new wm(this.rgb)}alpha(e){return this._rgb.a=wh(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=jm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return R0(this._rgb,2,e),this}darken(e){return R0(this._rgb,2,-e),this}saturate(e){return R0(this._rgb,1,e),this}desaturate(e){return R0(this._rgb,1,-e),this}rotate(e){return KX(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function Sd(){}const iJ=(()=>{let n=0;return()=>n++})();function ki(n){return n===null||typeof n>"u"}function js(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function mi(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function mo(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function bu(n,e){return mo(n)?n:e}function Zr(n,e){return typeof n>"u"?e:n}const sJ=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,kM=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function vs(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function qi(n,e,t,r){let i,s,o;if(js(n))for(s=n.length,i=0;i<s;i++)e.call(t,n[i],i);else if(mi(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function iy(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function sy(n){if(js(n))return n.map(sy);if(mi(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=sy(n[t[i]]);return e}return n}function AM(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function oJ(n,e,t,r){if(!AM(n))return;const i=e[n],s=t[n];mi(i)&&mi(s)?xm(i,s,r):e[n]=sy(s)}function xm(n,e,t){const r=js(e)?e:[e],i=r.length;if(!mi(n))return n;t=t||{};const s=t.merger||oJ;let o;for(let a=0;a<i;++a){if(o=r[a],!mi(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)s(l[u],n,o,t)}return n}function em(n,e){return xm(n,e,{merger:aJ})}function aJ(n,e,t){if(!AM(n))return;const r=e[n],i=t[n];mi(r)&&mi(i)?em(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=sy(i))}const a3={"":n=>n,x:n=>n.x,y:n=>n.y};function lJ(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function uJ(n){const e=lJ(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function Mh(n,e){return(a3[e]||(a3[e]=uJ(e)))(n)}function rw(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Lm=n=>typeof n<"u",Ph=n=>typeof n=="function",l3=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function cJ(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Es=Math.PI,Cs=2*Es,dJ=Cs+Es,oy=Number.POSITIVE_INFINITY,hJ=Es/180,To=Es/2,Zh=Es/4,u3=Es*2/3,gh=Math.log10,rd=Math.sign;function tm(n,e,t){return Math.abs(n-e)<t}function c3(n){const e=Math.round(n);n=tm(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(gh(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function fJ(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function Ip(n){return!isNaN(parseFloat(n))&&isFinite(n)}function pJ(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function TM(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function xc(n){return n*(Es/180)}function iw(n){return n*(180/Es)}function d3(n){if(!mo(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function DM(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*Es&&(s+=Cs),{angle:s,distance:i}}function V2(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function gJ(n,e){return(n-e+dJ)%Cs-Es}function _u(n){return(n%Cs+Cs)%Cs}function Cm(n,e,t,r){const i=_u(n),s=_u(e),o=_u(t),a=_u(s-i),l=_u(o-i),u=_u(i-s),h=_u(i-o);return i===s||i===o||r&&s===o||a>l&&u<h}function ma(n,e,t){return Math.max(e,Math.min(t,n))}function mJ(n){return ma(n,-32768,32767)}function Nd(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function sw(n,e,t){t=t||(o=>n[o]<e);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const Id=(n,e,t,r)=>sw(n,t,r?i=>{const s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),vJ=(n,e,t)=>sw(n,t,r=>n[r][e]>=t);function yJ(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}const OM=["push","pop","shift","splice","unshift"];function bJ(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),OM.forEach(t=>{const r="_onData"+rw(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function h3(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(OM.forEach(s=>{delete n[s]}),delete n._chartjs)}function NM(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const IM=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function BM(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,IM.call(window,()=>{r=!1,n.apply(e,t)}))}}function _J(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const ow=n=>n==="start"?"left":n==="end"?"right":"center",Za=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,wJ=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function RM(n,e,t){const r=e.length;let i=0,s=r;if(n._sorted){const{iScale:o,_parsed:a}=n,l=o.axis,{min:u,max:h,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=ma(Math.min(Id(a,l,u).lo,t?r:Id(e,l,o.getPixelForValue(u)).lo),0,r-1)),v?s=ma(Math.max(Id(a,o.axis,h,!0).hi+1,t?0:Id(e,l,o.getPixelForValue(h),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function FM(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const F0=n=>n===0||n===1,f3=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Cs/t)),p3=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Cs/t)+1,nm={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*To)+1,easeOutSine:n=>Math.sin(n*To),easeInOutSine:n=>-.5*(Math.cos(Es*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>F0(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>F0(n)?n:f3(n,.075,.3),easeOutElastic:n=>F0(n)?n:p3(n,.075,.3),easeInOutElastic(n){return F0(n)?n:n<.5?.5*f3(n*2,.1125,.45):.5+.5*p3(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-nm.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?nm.easeInBounce(n*2)*.5:nm.easeOutBounce(n*2-1)*.5+.5};function aw(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function g3(n){return aw(n)?n:new wm(n)}function Cb(n){return aw(n)?n:new wm(n).saturate(.5).darken(.1).hexString()}const xJ=["x","y","borderWidth","radius","tension"],LJ=["color","borderColor","backgroundColor"];function CJ(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:LJ},numbers:{type:"number",properties:xJ}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function SJ(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const m3=new Map;function EJ(n,e){e=e||{};const t=n+JSON.stringify(e);let r=m3.get(t);return r||(r=new Intl.NumberFormat(n,e),m3.set(t,r)),r}function zm(n,e,t){return EJ(e,t).format(n)}const jM={values(n){return js(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=MJ(n,t)}const o=gh(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),zm(n,r,l)},logarithmic(n,e,t){if(n===0)return"0";const r=t[e].significand||n/Math.pow(10,Math.floor(gh(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?jM.numeric.call(this,n,e,t):""}};function MJ(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Ky={formatters:jM};function PJ(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ky.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const xf=Object.create(null),H2=Object.create(null);function rm(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function Sb(n,e,t){return typeof e=="string"?xm(rm(n,e),t):xm(rm(n,""),e)}class kJ{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Cb(i.backgroundColor),this.hoverBorderColor=(r,i)=>Cb(i.borderColor),this.hoverColor=(r,i)=>Cb(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Sb(this,e,t)}get(e){return rm(this,e)}describe(e,t){return Sb(H2,e,t)}override(e,t){return Sb(xf,e,t)}route(e,t,r,i){const s=rm(this,e),o=rm(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[a],u=o[i];return mi(l)?Object.assign({},u,l):Zr(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}}var vo=new kJ({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[CJ,SJ,PJ]);function AJ(n){return!n||ki(n.size)||ki(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function ay(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function TJ(n,e,t,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0;const a=t.length;let l,u,h,p,v;for(l=0;l<a;l++)if(p=t[l],p!=null&&!js(p))o=ay(n,i,s,o,p);else if(js(p))for(u=0,h=p.length;u<h;u++)v=p[u],v!=null&&!js(v)&&(o=ay(n,i,s,o,v));n.restore();const m=s.length/2;if(m>t.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function Xh(n,e,t){const r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function v3(n,e){e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function G2(n,e,t,r){zM(n,e,t,r,null)}function zM(n,e,t,r,i){let s,o,a,l,u,h,p,v;const m=e.pointStyle,C=e.rotation,E=e.radius;let k=(C||0)*hJ;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(k),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(E)||E<=0)){switch(n.beginPath(),m){default:i?n.ellipse(t,r,i/2,E,0,0,Cs):n.arc(t,r,E,0,Cs),n.closePath();break;case"triangle":h=i?i/2:E,n.moveTo(t+Math.sin(k)*h,r-Math.cos(k)*E),k+=u3,n.lineTo(t+Math.sin(k)*h,r-Math.cos(k)*E),k+=u3,n.lineTo(t+Math.sin(k)*h,r-Math.cos(k)*E),n.closePath();break;case"rectRounded":u=E*.516,l=E-u,o=Math.cos(k+Zh)*l,p=Math.cos(k+Zh)*(i?i/2-u:l),a=Math.sin(k+Zh)*l,v=Math.sin(k+Zh)*(i?i/2-u:l),n.arc(t-p,r-a,u,k-Es,k-To),n.arc(t+v,r-o,u,k-To,k),n.arc(t+p,r+a,u,k,k+To),n.arc(t-v,r+o,u,k+To,k+Es),n.closePath();break;case"rect":if(!C){l=Math.SQRT1_2*E,h=i?i/2:l,n.rect(t-h,r-l,2*h,2*l);break}k+=Zh;case"rectRot":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),n.moveTo(t-p,r-a),n.lineTo(t+v,r-o),n.lineTo(t+p,r+a),n.lineTo(t-v,r+o),n.closePath();break;case"crossRot":k+=Zh;case"cross":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),n.moveTo(t-p,r-a),n.lineTo(t+p,r+a),n.moveTo(t+v,r-o),n.lineTo(t-v,r+o);break;case"star":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),n.moveTo(t-p,r-a),n.lineTo(t+p,r+a),n.moveTo(t+v,r-o),n.lineTo(t-v,r+o),k+=Zh,p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),n.moveTo(t-p,r-a),n.lineTo(t+p,r+a),n.moveTo(t+v,r-o),n.lineTo(t-v,r+o);break;case"line":o=i?i/2:Math.cos(k)*E,a=Math.sin(k)*E,n.moveTo(t-o,r-a),n.lineTo(t+o,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(k)*(i?i/2:E),r+Math.sin(k)*E);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Bd(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Zy(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Xy(n){n.restore()}function DJ(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function OJ(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function NJ(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),ki(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function IJ(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,u=t+s.actualBoundingBoxDescent,h=i.strikethrough?(l+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function BJ(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Lf(n,e,t,r,i,s={}){const o=js(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(n.save(),n.font=i.string,NJ(n,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&BJ(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),ki(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(u,t,r,s.maxWidth)),n.fillText(u,t,r,s.maxWidth),IJ(n,t,r,u,s),r+=Number(i.lineHeight);n.restore()}function Sm(n,e){const{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*Es,Es,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Es,To,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,To,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-To,!0),n.lineTo(t+o.topLeft,r)}const RJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function jJ(n,e){const t=(""+n).match(RJ);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const zJ=n=>+n||0;function lw(n,e){const t={},r=mi(e),i=r?Object.keys(e):e,s=mi(n)?r?o=>Zr(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=zJ(s(o));return t}function $M(n){return lw(n,{top:"y",right:"x",bottom:"y",left:"x"})}function mf(n){return lw(n,["topLeft","topRight","bottomLeft","bottomRight"])}function sl(n){const e=$M(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Qo(n,e){n=n||{},e=e||vo.font;let t=Zr(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=Zr(n.style,e.style);r&&!(""+r).match(FJ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Zr(n.family,e.family),lineHeight:jJ(Zr(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:Zr(n.weight,e.weight),string:""};return i.string=AJ(i),i}function Tg(n,e,t,r){let i,s,o;for(i=0,s=n.length;i<s;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function $J(n,e,t){const{min:r,max:i}=n,s=kM(e,(i-r)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Dh(n,e){return Object.assign(Object.create(n),e)}function uw(n,e=[""],t,r,i=()=>n[0]){const s=t||n;typeof r>"u"&&(r=GM("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>uw([a,...n],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return VM(a,l,()=>KJ(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return b3(a).includes(l)},ownKeys(a){return b3(a)},set(a,l,u){const h=a._storage||(a._storage=i());return a[l]=h[l]=u,delete a._keys,!0}})}function Bp(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:UM(n,r),setContext:s=>Bp(n,s,t,r),override:s=>Bp(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return VM(s,o,()=>VJ(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function UM(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Ph(t)?t:()=>t,isIndexable:Ph(r)?r:()=>r}}const UJ=(n,e)=>n?n+rw(e):e,cw=(n,e)=>mi(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function VM(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];const r=t();return n[e]=r,r}function VJ(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n;let a=r[e];return Ph(a)&&o.isScriptable(e)&&(a=HJ(e,a,n,t)),js(a)&&a.length&&(a=GJ(e,a,n,o.isIndexable)),cw(e,a)&&(a=Bp(a,i,s&&s[e],o)),a}function HJ(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(s,o||r);return a.delete(n),cw(n,l)&&(l=dw(i._scopes,i,n,l)),l}function GJ(n,e,t,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(mi(e[0])){const l=e,u=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const p=dw(u,i,n,h);e.push(Bp(p,s,o&&o[n],a))}}return e}function HM(n,e,t){return Ph(n)?n(e,t):n}const WJ=(n,e)=>n===!0?e:typeof n=="string"?Mh(e,n):void 0;function qJ(n,e,t,r,i){for(const s of e){const o=WJ(t,s);if(o){n.add(o);const a=HM(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function dw(n,e,t,r){const i=e._rootScopes,s=HM(e._fallback,t,r),o=[...n,...i],a=new Set;a.add(r);let l=y3(a,o,t,s||t,r);return l===null||typeof s<"u"&&s!==t&&(l=y3(a,o,s,l,r),l===null)?!1:uw(Array.from(a),[""],i,s,()=>YJ(e,t,r))}function y3(n,e,t,r,i){for(;t;)t=qJ(n,e,t,r,i);return t}function YJ(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return js(i)&&mi(t)?t:i||{}}function KJ(n,e,t,r){let i;for(const s of e)if(i=GM(UJ(s,n),t),typeof i<"u")return cw(n,i)?dw(t,r,n,i):i}function GM(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function b3(n){let e=n._keys;return e||(e=n._keys=ZJ(n._scopes)),e}function ZJ(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function WM(n,e,t,r){const{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r);let a,l,u,h;for(a=0,l=r;a<l;++a)u=a+t,h=e[u],o[a]={r:i.parse(Mh(h,s),u)};return o}const XJ=Number.EPSILON||1e-14,Rp=(n,e)=>e<n.length&&!n[e].skip&&n[e],qM=n=>n==="x"?"y":"x";function JJ(n,e,t,r){const i=n.skip?e:n,s=e,o=t.skip?e:t,a=V2(s,i),l=V2(o,s);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const p=r*u,v=r*h;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function QJ(n,e,t){const r=n.length;let i,s,o,a,l,u=Rp(n,0);for(let h=0;h<r-1;++h)if(l=u,u=Rp(n,h+1),!(!l||!u)){if(tm(e[h],0,XJ)){t[h]=t[h+1]=0;continue}i=t[h]/e[h],s=t[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[h]=i*o*e[h],t[h+1]=s*o*e[h])}}function eQ(n,e,t="x"){const r=qM(t),i=n.length;let s,o,a,l=Rp(n,0);for(let u=0;u<i;++u){if(o=a,a=l,l=Rp(n,u+1),!a)continue;const h=a[t],p=a[r];o&&(s=(h-o[t])/3,a[`cp1${t}`]=h-s,a[`cp1${r}`]=p-s*e[u]),l&&(s=(l[t]-h)/3,a[`cp2${t}`]=h+s,a[`cp2${r}`]=p+s*e[u])}}function tQ(n,e="x"){const t=qM(e),r=n.length,i=Array(r).fill(0),s=Array(r);let o,a,l,u=Rp(n,0);for(o=0;o<r;++o)if(a=l,l=u,u=Rp(n,o+1),!!l){if(u){const h=u[e]-l[e];i[o]=h!==0?(u[t]-l[t])/h:0}s[o]=a?u?rd(i[o-1])!==rd(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}QJ(n,i,s),eQ(n,s,e)}function j0(n,e,t){return Math.max(Math.min(n,t),e)}function nQ(n,e){let t,r,i,s,o,a=Bd(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=a,a=t<r-1&&Bd(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=j0(i.cp1x,e.left,e.right),i.cp1y=j0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=j0(i.cp2x,e.left,e.right),i.cp2y=j0(i.cp2y,e.top,e.bottom)))}function rQ(n,e,t,r,i){let s,o,a,l;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")tQ(n,i);else{let u=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=JJ(u,a,n[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&nQ(n,t)}function hw(){return typeof window<"u"&&typeof document<"u"}function fw(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ly(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const Jy=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function iQ(n,e){return Jy(n).getPropertyValue(e)}const sQ=["top","right","bottom","left"];function vf(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=sQ[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const oQ=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function aQ(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(oQ(i,s,n.target))a=i,l=s;else{const u=e.getBoundingClientRect();a=r.clientX-u.left,l=r.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function nf(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=Jy(t),s=i.boxSizing==="border-box",o=vf(i,"padding"),a=vf(i,"border","width"),{x:l,y:u,box:h}=aQ(n,t),p=o.left+(h&&a.left),v=o.top+(h&&a.top);let{width:m,height:C}=e;return s&&(m-=o.width+a.width,C-=o.height+a.height),{x:Math.round((l-p)/m*t.width/r),y:Math.round((u-v)/C*t.height/r)}}function lQ(n,e,t){let r,i;if(e===void 0||t===void 0){const s=fw(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const o=s.getBoundingClientRect(),a=Jy(s),l=vf(a,"border","width"),u=vf(a,"padding");e=o.width-u.width-l.width,t=o.height-u.height-l.height,r=ly(a.maxWidth,s,"clientWidth"),i=ly(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||oy,maxHeight:i||oy}}const z0=n=>Math.round(n*10)/10;function uQ(n,e,t,r){const i=Jy(n),s=vf(i,"margin"),o=ly(i.maxWidth,n,"clientWidth")||oy,a=ly(i.maxHeight,n,"clientHeight")||oy,l=lQ(n,e,t);let{width:u,height:h}=l;if(i.boxSizing==="content-box"){const v=vf(i,"border","width"),m=vf(i,"padding");u-=m.width+v.width,h-=m.height+v.height}return u=Math.max(0,u-s.width),h=Math.max(0,r?u/r:h-s.height),u=z0(Math.min(u,o,l.maxWidth)),h=z0(Math.min(h,a,l.maxHeight)),u&&!h&&(h=z0(u/2)),(e!==void 0||t!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,u=z0(Math.floor(h*r))),{width:u,height:h}}function _3(n,e,t){const r=e||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const cQ=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};hw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function w3(n,e){const t=iQ(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function rf(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function dQ(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function hQ(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=rf(n,i,t),a=rf(i,s,t),l=rf(s,e,t),u=rf(o,a,t),h=rf(a,l,t);return rf(u,h,t)}const fQ=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},pQ=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Sp(n,e,t){return n?fQ(e,t):pQ()}function YM(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function KM(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function ZM(n){return n==="angle"?{between:Cm,compare:gJ,normalize:_u}:{between:Nd,compare:(e,t)=>e-t,normalize:e=>e}}function x3({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function gQ(n,e,t){const{property:r,start:i,end:s}=t,{between:o,normalize:a}=ZM(r),l=e.length;let{start:u,end:h,loop:p}=n,v,m;if(p){for(u+=l,h+=l,v=0,m=l;v<m&&o(a(e[u%l][r]),i,s);++v)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:n.style}}function XM(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,o=e.length,{compare:a,between:l,normalize:u}=ZM(r),{start:h,end:p,loop:v,style:m}=gQ(n,e,t),C=[];let E=!1,k=null,A,D,R;const W=()=>l(i,R,A)&&a(i,R)!==0,Q=()=>a(s,A)===0||l(s,R,A),de=()=>E||W(),fe=()=>!E||Q();for(let N=h,z=h;N<=p;++N)D=e[N%o],!D.skip&&(A=u(D[r]),A!==R&&(E=l(A,i,s),k===null&&de()&&(k=a(A,i)===0?N:z),k!==null&&fe()&&(C.push(x3({start:k,end:N,loop:v,count:o,style:m})),k=null),z=N,R=A));return k!==null&&C.push(x3({start:k,end:p,loop:v,count:o,style:m})),C}function JM(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=XM(r[i],n.points,e);s.length&&t.push(...s)}return t}function mQ(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}function vQ(n,e,t,r){const i=n.length,s=[];let o=e,a=n[e],l;for(l=e+1;l<=t;++l){const u=n[l%i];u.skip||u.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function yQ(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:o,end:a}=mQ(t,i,s,r);if(r===!0)return L3(n,[{start:o,end:a,loop:s}],t,e);const l=a<o?a+i:a,u=!!n._fullLoop&&o===0&&a===i-1;return L3(n,vQ(t,o,l,u),t,e)}function L3(n,e,t,r){return!r||!r.setContext||!t?e:bQ(n,e,t,r)}function bQ(n,e,t,r){const i=n._chart.getContext(),s=C3(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,u=[];let h=s,p=e[0].start,v=p;function m(C,E,k,A){const D=a?-1:1;if(C!==E){for(C+=l;t[C%l].skip;)C-=D;for(;t[E%l].skip;)E+=D;C%l!==E%l&&(u.push({start:C%l,end:E%l,loop:k,style:A}),h=A,p=E%l)}}for(const C of e){p=a?p:C.start;let E=t[p%l],k;for(v=p+1;v<=C.end;v++){const A=t[v%l];k=C3(r.setContext(Dh(i,{type:"segment",p0:E,p1:A,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),_Q(k,h)&&m(p,v-1,C.loop,h),E=A,h=k}p<v-1&&m(p,v-1,C.loop,h)}return u}function C3(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function _Q(n,e){if(!e)return!1;const t=[],r=function(i,s){return aw(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class wQ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const s=t.listeners[i],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=IM.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ed=new wQ;const S3="transparent",xQ={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=g3(n||S3),i=r.valid&&g3(e||S3);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class LQ{constructor(e,t,r,i){const s=t[r];i=Tg([e.to,i,s,e.from]);const o=Tg([e.from,s,i]);this._active=!0,this._fn=e.fn||xQ[e.type||typeof o],this._easing=nm[e.easing]||nm.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Tg([e.to,t,i,e.from]),this._from=Tg([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=s;return}l=t/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class QM{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!mi(e))return;const t=Object.keys(vo.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!mi(s))return;const o={};for(const a of t)o[a]=s[a];(js(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){const r=t.options,i=SQ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&CQ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,t));continue}const h=t[u];let p=s[u];const v=r.get(u);if(p)if(v&&p.active()){p.update(v,h,a);continue}else p.cancel();if(!v||!v.duration){e[u]=h;continue}s[u]=p=new LQ(v,e,u,h),i.push(p)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return Ed.add(this._chart,r),!0}}function CQ(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function SQ(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function E3(n,e){const t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function EQ(n,e,t){if(t===!1)return!1;const r=E3(n,t),i=E3(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function MQ(n){let e,t,r,i;return mi(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function eP(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function M3(n,e,t,r={}){const i=n.keys,s=r.mode==="single";let o,a,l,u;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===t){if(r.all)continue;break}u=n.values[l],mo(u)&&(s||e===0||rd(e)===rd(u))&&(e+=u)}return e}}function PQ(n){const e=Object.keys(n),t=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],t[r]={x:s,y:n[s]};return t}function P3(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function kQ(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function AQ(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function TQ(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function k3(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function A3(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,u=o.axis,h=kQ(s,o,r),p=e.length;let v;for(let m=0;m<p;++m){const C=e[m],{[l]:E,[u]:k}=C,A=C._stacks||(C._stacks={});v=A[u]=TQ(i,h,E),v[a]=k,v._top=k3(v,o,!0,r.type),v._bottom=k3(v,o,!1,r.type);const D=v._visualValues||(v._visualValues={});D[a]=k}}function Eb(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function DQ(n,e){return Dh(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function OQ(n,e,t){return Dh(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function hg(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}const Mb=n=>n==="reset"||n==="none",T3=(n,e)=>e?n:Object.assign({},n),NQ=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:eP(t,!0),values:null};class Cc{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=P3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&hg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(p,v,m,C)=>p==="x"?v:p==="r"?C:m,s=t.xAxisID=Zr(r.xAxisID,Eb(e,"x")),o=t.yAxisID=Zr(r.yAxisID,Eb(e,"y")),a=t.rAxisID=Zr(r.rAxisID,Eb(e,"r")),l=t.indexAxis,u=t.iAxisID=i(l,s,o,a),h=t.vAxisID=i(l,o,s,a);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&h3(this._data,this),e._stacked&&hg(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(mi(t))this._data=PQ(t);else if(r!==t){if(r){h3(r,this);const i=this._cachedMeta;hg(i),i._parsed=[]}t&&Object.isExtensible(t)&&bJ(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=P3(t.vScale,t),t.stack!==r.stack&&(i=!0,hg(t),t.stack=r.stack),this._resyncElements(e),(i||s!==t._stacked)&&A3(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&t===i.length?!0:r._sorted,u=e>0&&r._parsed[e-1],h,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{js(i[e])?v=this.parseArrayData(r,i,e,t):mi(i[e])?v=this.parseObjectData(r,i,e,t):v=this.parsePrimitiveData(r,i,e,t);const m=()=>p[a]===null||u&&p[a]<u[a];for(h=0;h<t;++h)r._parsed[h+e]=p=v[h],l&&(m()&&(l=!1),u=p);r._sorted=l}o&&A3(this,v)}parsePrimitiveData(e,t,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),h=s===o,p=new Array(i);let v,m,C;for(v=0,m=i;v<m;++v)C=v+r,p[v]={[a]:h||s.parse(u[C],C),[l]:o.parse(t[C],C)};return p}parseArrayData(e,t,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,u,h,p;for(l=0,u=i;l<u;++l)h=l+r,p=t[h],a[l]={x:s.parse(p[0],h),y:o.parse(p[1],h)};return a}parseObjectData(e,t,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(i);let h,p,v,m;for(h=0,p=i;h<p;++h)v=h+r,m=t[v],u[h]={x:s.parse(Mh(m,a),v),y:o.parse(Mh(m,l),v)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,s=this._cachedMeta,o=t[e.axis],a={keys:eP(i,!0),values:t._stacks[e.axis]._visualValues};return M3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const s=r[t.axis];let o=s===null?NaN:s;const a=i&&r._stacks[t.axis];i&&a&&(i.values=a,o=M3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=NQ(t,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=AQ(a);let v,m;function C(){m=i[v];const E=m[a.axis];return!mo(m[e.axis])||h>E||p<E}for(v=0;v<o&&!(!C()&&(this.updateRangeFromParsed(u,e,m,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!C()){this.updateRangeFromParsed(u,e,m,l);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=t.length;i<s;++i)o=t[i][e.axis],mo(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=MQ(Zr(this.options.clip,EQ(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],s=t.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,u=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const p=i[h];p.hidden||(p.active&&u?o.push(p):p.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=OQ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=DQ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",s=this._cachedDataOpts,o=e+"-"+t,a=s[o],l=this.enableOptionSharing&&Lm(r);if(a)return T3(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=u.getOptionScopes(this.getDataset(),h),m=Object.keys(vo.elements[e]),C=()=>this.getContext(r,i,t),E=u.resolveNamedOptions(v,m,C,p);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(T3(E,l))),E}_resolveAnimations(e,t,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${t}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,t),v=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(v,this.getContext(e,r,t))}const u=new QM(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Mb(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:o}}updateElement(e,t,r,i){Mb(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!Mb(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const i=r.length,s=t.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t,r=!0){const i=this._cachedMeta,s=i.data,o=e+t;let a;const l=u=>{for(u.length+=t,a=u.length-1;a>=o;a--)u[a]=u[a-t]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&hg(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Je(Cc,"defaults",{}),Je(Cc,"datasetElementType",null),Je(Cc,"dataElementType",null);function IQ(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=NM(r.sort((i,s)=>i-s))}return n._cache.$bar}function BQ(n){const e=n.iScale,t=IQ(e,n.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Lm(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function RQ(n,e,t,r){const i=t.barThickness;let s,o;return ki(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}function FQ(n,e,t,r){const i=e.pixels,s=i[n];let o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null;const l=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const u=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:t.barPercentage,start:u}}function jQ(n,e,t,r){const i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,u=a;Math.abs(o)>Math.abs(a)&&(l=a,u=o),e[t.axis]=u,e._custom={barStart:l,barEnd:u,start:i,end:s,min:o,max:a}}function tP(n,e,t,r){return js(n)?jQ(n,e,t,r):e[t.axis]=t.parse(n,r),e}function D3(n,e,t,r){const i=n.iScale,s=n.vScale,o=i.getLabels(),a=i===s,l=[];let u,h,p,v;for(u=t,h=t+r;u<h;++u)v=e[u],p={},p[i.axis]=a||i.parse(o[u],u),l.push(tP(v,p,s,u));return l}function Pb(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function zQ(n,e,t){return n!==0?rd(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function $Q(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}function UQ(n,e,t,r){let i=e.borderSkipped;const s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:u,bottom:h}=$Q(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=u:(t._bottom||0)===r?i=h:(s[O3(h,o,a,l)]=!0,i=u)),s[O3(i,o,a,l)]=!0,n.borderSkipped=s}function O3(n,e,t,r){return r?(n=VQ(n,e,t),n=N3(n,t,e)):n=N3(n,e,t),n}function VQ(n,e,t){return n===e?t:n===t?e:n}function N3(n,e,t){return n==="start"?e:n==="end"?t:n}function HQ(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class vv extends Cc{parsePrimitiveData(e,t,r,i){return D3(e,t,r,i)}parseArrayData(e,t,r,i){return D3(e,t,r,i)}parseObjectData(e,t,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?a:l,h=o.axis==="x"?a:l,p=[];let v,m,C,E;for(v=r,m=r+i;v<m;++v)E=t[v],C={},C[s.axis]=s.parse(Mh(E,u),v),p.push(tP(Mh(E,h),C,o,v));return p}updateRangeFromParsed(e,t,r,i){super.updateRangeFromParsed(e,t,r,i);const s=r._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:i}=t,s=this.getParsed(e),o=s._custom,a=Pb(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(t,i);for(let m=t;m<t+r;m++){const C=this.getParsed(m),E=s||ki(C[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),k=this._calculateBarIndexPixels(m,h),A=(C._stacks||{})[a.axis],D={horizontal:u,base:E.base,enableBorderRadius:!A||Pb(C._custom)||o===A._top||o===A._bottom,x:u?E.head:k.center,y:u?k.center:E.head,height:u?k.size:Math.abs(E.size),width:u?Math.abs(E.size):k.size};v&&(D.options=p||this.resolveDataElementOptions(m,e[m].active?"active":i));const R=D.options||e[m].options;UQ(D,R,A,o),HQ(D,R,h.ratio),this.updateElement(e[m],m,D,i)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const u=l.controller.getParsed(t),h=u&&u[l.vScale.axis];if(ki(h)||isNaN(h))return!0};for(const l of i)if(!(t!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,r){const i=this._getStacks(e,r),s=t!==void 0?i.indexOf(t):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,i=[];let s,o;for(s=0,o=t.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||BQ(t),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),u=l._custom,h=Pb(u);let p=l[t.axis],v=0,m=r?this.applyStack(t,l,r):p,C,E;m!==p&&(v=m-p,m=p),h&&(p=u.barStart,m=u.barEnd-u.barStart,p!==0&&rd(p)!==rd(u.barEnd)&&(v=0),v+=p);const k=!ki(s)&&!h?s:v;let A=t.getPixelForValue(k);if(this.chart.getDataVisibility(e)?C=t.getPixelForValue(v+m):C=A,E=C-A,Math.abs(E)<o){E=zQ(E,t,a)*o,p===a&&(A-=E/2);const D=t.getPixelForDecimal(0),R=t.getPixelForDecimal(1),W=Math.min(D,R),Q=Math.max(D,R);A=Math.max(Math.min(A,Q),W),C=A+E,r&&!h&&(l._stacks[t.axis]._visualValues[i]=t.getValueForPixel(C)-t.getValueForPixel(A))}if(A===t.getPixelForValue(a)){const D=rd(E)*t.getLineWidthForValue(a)/2;A+=D,E-=D}return{size:E,base:A,head:C,center:C+E/2}}_calculateBarIndexPixels(e,t){const r=t.scale,i=this.options,s=i.skipNull,o=Zr(i.maxBarThickness,1/0);let a,l;if(t.grouped){const u=s?this._getStackCount(e):t.stackCount,h=i.barThickness==="flex"?FQ(e,t,i,u):RQ(e,t,i,u),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*p+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,t.min*t.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[t.axis]!==null&&r[s].draw(this._ctx)}}Je(vv,"id","bar"),Je(vv,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Je(vv,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class yv extends Cc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,i){const s=super.parsePrimitiveData(e,t,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,t,r,i){const s=super.parseArrayData(e,t,r,i);for(let o=0;o<s.length;o++){const a=t[r+o];s[o]._custom=Zr(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,t,r,i){const s=super.parseObjectData(e,t,r,i);for(let o=0;o<s.length;o++){const a=t[r+o];s[o]._custom=Zr(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),u=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(u?", "+u:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(t,i),h=o.axis,p=a.axis;for(let v=t;v<t+r;v++){const m=e[v],C=!s&&this.getParsed(v),E={},k=E[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(C[h]),A=E[p]=s?a.getBasePixel():a.getPixelForValue(C[p]);E.skip=isNaN(k)||isNaN(A),u&&(E.options=l||this.resolveDataElementOptions(v,m.active?"active":i),s&&(E.options.radius=0)),this.updateElement(m,v,E,i)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return t!=="active"&&(i.radius=0),i.radius+=Zr(r&&r._custom,s),i}}Je(yv,"id","bubble"),Je(yv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Je(yv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function GQ(n,e,t){let r=1,i=1,s=0,o=0;if(e<Cs){const a=n,l=a+e,u=Math.cos(a),h=Math.sin(a),p=Math.cos(l),v=Math.sin(l),m=(R,W,Q)=>Cm(R,a,l,!0)?1:Math.max(W,W*t,Q,Q*t),C=(R,W,Q)=>Cm(R,a,l,!0)?-1:Math.min(W,W*t,Q,Q*t),E=m(0,u,p),k=m(To,h,v),A=C(Es,u,p),D=C(Es+To,h,v);r=(E-A)/2,i=(k-D)/2,s=-(E+A)/2,o=-(k+D)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class uf extends Cc{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(mi(r[e])){const{key:l="value"}=this._parsing;s=u=>+Mh(r[u],l)}let o,a;for(o=e,a=e+t;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return xc(this.options.rotation-90)}_getCircumference(){return xc(this.options.circumference)}_getRotationExtents(){let e=Cs,t=-Cs;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),t=Math.max(t,s+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(sJ(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:m,offsetX:C,offsetY:E}=GQ(p,h,l),k=(r.width-o)/v,A=(r.height-o)/m,D=Math.max(Math.min(k,A)/2,0),R=kM(this.options.radius,D),W=Math.max(R*l,0),Q=(R-W)/this._getVisibleDatasetWeightTotal();this.offsetX=C*R,this.offsetY=E*R,i.total=this.calculateTotal(),this.outerRadius=R-Q*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Q*u,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Cs)}updateElements(e,t,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,u=o.options.animation,h=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&u.animateScale,m=v?0:this.innerRadius,C=v?0:this.outerRadius,{sharedOptions:E,includeOptions:k}=this._getSharedOptions(t,i);let A=this._getRotation(),D;for(D=0;D<t;++D)A+=this._circumference(D,s);for(D=t;D<t+r;++D){const R=this._circumference(D,s),W=e[D],Q={x:h+this.offsetX,y:p+this.offsetY,startAngle:A,endAngle:A+R,circumference:R,outerRadius:C,innerRadius:m};k&&(Q.options=E||this.resolveDataElementOptions(D,W.active?"active":i)),A+=R,this.updateElement(W,D,Q,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,i;for(i=0;i<t.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Cs*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=zm(t._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(Zr(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Je(uf,"id","doughnut"),Je(uf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Je(uf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Je(uf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});class bv extends Cc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=t,o=this.chart._animationsDisabled;let{start:a,count:l}=RM(t,i,o);this._drawStart=a,this._drawCount=l,FM(t)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(i,a,l,e)}updateElements(e,t,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(t,i),v=o.axis,m=a.axis,{spanGaps:C,segment:E}=this.options,k=Ip(C)?C:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||s||i==="none",D=t+r,R=e.length;let W=t>0&&this.getParsed(t-1);for(let Q=0;Q<R;++Q){const de=e[Q],fe=A?de:{};if(Q<t||Q>=D){fe.skip=!0;continue}const N=this.getParsed(Q),z=ki(N[m]),J=fe[v]=o.getPixelForValue(N[v],Q),U=fe[m]=s||z?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[m],Q);fe.skip=isNaN(J)||isNaN(U)||z,fe.stop=Q>0&&Math.abs(N[v]-W[v])>k,E&&(fe.parsed=N,fe.raw=u.data[Q]),p&&(fe.options=h||this.resolveDataElementOptions(Q,de.active?"active":i)),A||this.updateElement(de,Q,fe,i),W=N}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Je(bv,"id","line"),Je(bv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Je(bv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class im extends Cc{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=zm(t._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,t,r,i){return WM.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,p=u.yCenter,v=u.getIndexAngle(0)-.5*Es;let m=v,C;const E=360/this.countVisibleElements();for(C=0;C<t;++C)m+=this._computeAngle(C,i,E);for(C=t;C<t+r;C++){const k=e[C];let A=m,D=m+this._computeAngle(C,i,E),R=o.getDataVisibility(C)?u.getDistanceFromCenterForValue(this.getParsed(C).r):0;m=D,s&&(l.animateScale&&(R=0),l.animateRotate&&(A=D=v));const W={x:h,y:p,innerRadius:0,outerRadius:R,startAngle:A,endAngle:D,options:this.resolveDataElementOptions(C,k.active?"active":i)};this.updateElement(k,C,W,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?xc(this.resolveDataElementOptions(e,t).angle||r):0}}Je(im,"id","polarArea"),Je(im,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Je(im,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class W2 extends uf{}Je(W2,"id","pie"),Je(W2,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class _v extends Cc{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,i){return WM.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta,r=t.dataset,i=t.data||[],s=t.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=t;a<t+r;a++){const l=e[a],u=this.resolveDataElementOptions(a,l.active?"active":i),h=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:h.x,v=o?s.yCenter:h.y,m={x:p,y:v,angle:h.angle,skip:isNaN(p)||isNaN(v),options:u};this.updateElement(l,a,m,i)}}}Je(_v,"id","radar"),Je(_v,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Je(_v,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class wv extends Cc{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,i=this.chart._animationsDisabled;let{start:s,count:o}=RM(t,r,i);if(this._drawStart=s,this._drawCount=o,FM(t)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=t;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:u},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(t,i),p=this.getSharedOptions(h),v=this.includeOptions(i,p),m=o.axis,C=a.axis,{spanGaps:E,segment:k}=this.options,A=Ip(E)?E:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||s||i==="none";let R=t>0&&this.getParsed(t-1);for(let W=t;W<t+r;++W){const Q=e[W],de=this.getParsed(W),fe=D?Q:{},N=ki(de[C]),z=fe[m]=o.getPixelForValue(de[m],W),J=fe[C]=s||N?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,de,l):de[C],W);fe.skip=isNaN(z)||isNaN(J)||N,fe.stop=W>0&&Math.abs(de[m]-R[m])>A,k&&(fe.parsed=de,fe.raw=u.data[W]),v&&(fe.options=p||this.resolveDataElementOptions(W,Q.active?"active":i)),D||this.updateElement(Q,W,fe,i),R=de}this.updateSharedOptions(p,i,h)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let a=0;for(let l=t.length-1;l>=0;--l)a=Math.max(a,t[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!t.length)return i;const s=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,s,o)/2}}Je(wv,"id","scatter"),Je(wv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Je(wv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var WQ=Object.freeze({__proto__:null,BarController:vv,BubbleController:yv,DoughnutController:uf,LineController:bv,PieController:W2,PolarAreaController:im,RadarController:_v,ScatterController:wv});function Jh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pw{constructor(e){Je(this,"options");this.options=e||{}}static override(e){Object.assign(pw.prototype,e)}init(){}formats(){return Jh()}parse(){return Jh()}format(){return Jh()}add(){return Jh()}diff(){return Jh()}startOf(){return Jh()}endOf(){return Jh()}}var nP={_date:pw};function qQ(n,e,t,r){const{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?vJ:Id;if(r){if(i._sharedOptions){const u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const p=l(s,e,t-h),v=l(s,e,t+h);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,t)}return{lo:0,hi:s.length-1}}function Qy(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:h}=s[a],{lo:p,hi:v}=qQ(s[a],e,o,i);for(let m=p;m<=v;++m){const C=h[m];C.skip||r(C,u,m)}}}function YQ(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function kb(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||Qy(n,t,e,function(a,l,u){!i&&!Bd(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function KQ(n,e,t,r){let i=[];function s(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:p}=DM(o,{x:e.x,y:e.y});Cm(p,u,h)&&i.push({element:o,datasetIndex:a,index:l})}return Qy(n,t,e,s),i}function ZQ(n,e,t,r,i,s){let o=[];const a=YQ(t);let l=Number.POSITIVE_INFINITY;function u(h,p,v){const m=h.inRange(e.x,e.y,i);if(r&&!m)return;const C=h.getCenterPoint(i);if(!(!!s||n.isPointInArea(C))&&!m)return;const k=a(e,C);k<l?(o=[{element:h,datasetIndex:p,index:v}],l=k):k===l&&o.push({element:h,datasetIndex:p,index:v})}return Qy(n,t,e,u),o}function Ab(n,e,t,r,i,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!r?KQ(n,e,t,i):ZQ(n,e,t,r,i,s)}function I3(n,e,t,r,i){const s=[],o=t==="x"?"inXRange":"inYRange";let a=!1;return Qy(n,t,e,(l,u,h)=>{l[o](e[t],i)&&(s.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var XQ={modes:{index(n,e,t,r){const i=nf(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?kb(n,i,s,r,o):Ab(n,i,s,!1,r,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,p=u.data[h];p&&!p.skip&&l.push({element:p,datasetIndex:u.index,index:h})}),l):[]},dataset(n,e,t,r){const i=nf(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;let a=t.intersect?kb(n,i,s,r,o):Ab(n,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,u=n.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(n,e,t,r){const i=nf(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return kb(n,i,s,r,o)},nearest(n,e,t,r){const i=nf(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return Ab(n,i,s,t.intersect,r,o)},x(n,e,t,r){const i=nf(e,n);return I3(n,i,"x",t.intersect,r)},y(n,e,t,r){const i=nf(e,n);return I3(n,i,"y",t.intersect,r)}}};const rP=["left","top","right","bottom"];function fg(n,e){return n.filter(t=>t.pos===e)}function B3(n,e){return n.filter(t=>rP.indexOf(t.pos)===-1&&t.box.axis===e)}function pg(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function JQ(n){const e=[];let t,r,i,s,o,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function QQ(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!rP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function eee(n,e){const t=QQ(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];const{fullSize:l}=a.box,u=t[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return t}function tee(n){const e=JQ(n),t=pg(e.filter(u=>u.box.fullSize),!0),r=pg(fg(e,"left"),!0),i=pg(fg(e,"right")),s=pg(fg(e,"top"),!0),o=pg(fg(e,"bottom")),a=B3(e,"x"),l=B3(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:fg(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function R3(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function iP(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function nee(n,e,t,r){const{pos:i,box:s}=t,o=n.maxPadding;if(!mi(i)){t.size&&(n[i]-=t.size);const p=r[t.stack]||{size:0,count:1};p.size=Math.max(p.size,t.horizontal?s.height:s.width),t.size=p.size/p.count,n[i]+=t.size}s.getPadding&&iP(o,s.getPadding());const a=Math.max(0,e.outerWidth-R3(o,n,"left","right")),l=Math.max(0,e.outerHeight-R3(o,n,"top","bottom")),u=a!==n.w,h=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:u,other:h}:{same:h,other:u}}function ree(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function iee(n,e){const t=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(n?["left","right"]:["top","bottom"])}function Dg(n,e,t,r){const i=[];let s,o,a,l,u,h;for(s=0,o=n.length,u=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||e.w,a.height||e.h,iee(a.horizontal,e));const{same:p,other:v}=nee(e,t,a,r);u|=p&&i.length,h=h||v,l.fullSize||i.push(a)}return u&&Dg(i,e,t,r)||h}function $0(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function F3(n,e,t,r){const i=t.padding;let{x:s,y:o}=e;for(const a of n){const l=a.box,u=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const p=e.w*h,v=u.size||l.height;Lm(u.start)&&(o=u.start),l.fullSize?$0(l,i.left,o,t.outerWidth-i.right-i.left,v):$0(l,e.left+u.placed,o,p,v),u.start=o,u.placed+=p,o=l.bottom}else{const p=e.h*h,v=u.size||l.width;Lm(u.start)&&(s=u.start),l.fullSize?$0(l,s,i.top,v,t.outerHeight-i.bottom-i.top):$0(l,s,e.top+u.placed,v,p),u.start=s,u.placed+=p,s=l.right}}e.x=s,e.y=o}var il={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=sl(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=tee(n.boxes),l=a.vertical,u=a.horizontal;qi(n.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,k)=>k.box.options&&k.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),v=Object.assign({},i);iP(v,sl(r));const m=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),C=eee(l.concat(u),p);Dg(a.fullSize,m,p,C),Dg(l,m,p,C),Dg(u,m,p,C)&&Dg(l,m,p,C),ree(m),F3(a.leftAndTop,m,p,C),m.x+=m.w,m.y+=m.h,F3(a.rightAndBottom,m,p,C),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},qi(a.chartArea,E=>{const k=E.box;Object.assign(k,n.chartArea),k.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class sP{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class see extends sP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xv="$chartjs",oee={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},j3=n=>n===null||n==="";function aee(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[xv]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",j3(i)){const s=w3(n,"width");s!==void 0&&(n.width=s)}if(j3(r))if(n.style.height==="")n.height=n.width/(e||2);else{const s=w3(n,"height");s!==void 0&&(n.height=s)}return n}const oP=cQ?{passive:!0}:!1;function lee(n,e,t){n.addEventListener(e,t,oP)}function uee(n,e,t){n.canvas.removeEventListener(e,t,oP)}function cee(n,e){const t=oee[n.type]||n.type,{x:r,y:i}=nf(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function uy(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function dee(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||uy(a.addedNodes,r),o=o&&!uy(a.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function hee(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||uy(a.removedNodes,r),o=o&&!uy(a.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const Em=new Map;let z3=0;function aP(){const n=window.devicePixelRatio;n!==z3&&(z3=n,Em.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function fee(n,e){Em.size||window.addEventListener("resize",aP),Em.set(n,e)}function pee(n){Em.delete(n),Em.size||window.removeEventListener("resize",aP)}function gee(n,e,t){const r=n.canvas,i=r&&fw(r);if(!i)return;const s=BM((a,l)=>{const u=i.clientWidth;t(a,l),u<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(i),fee(n,s),o}function Tb(n,e,t){t&&t.disconnect(),e==="resize"&&pee(n)}function mee(n,e,t){const r=n.canvas,i=BM(s=>{n.ctx!==null&&t(cee(s,n))},n);return lee(r,e,i),i}class vee extends sP{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(aee(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[xv])return!1;const r=t[xv].initial;["height","width"].forEach(s=>{const o=r[s];ki(o)?t.removeAttribute(s):t.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[xv],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:dee,detach:hee,resize:gee}[t]||mee;i[t]=o(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:Tb,detach:Tb,resize:Tb}[t]||uee)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return uQ(e,t,r,i)}isAttached(e){const t=fw(e);return!!(t&&t.isConnected)}}function yee(n){return!hw()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?see:vee}var Z0;let Vd=(Z0=class{constructor(){Je(this,"x");Je(this,"y");Je(this,"active",!1);Je(this,"options");Je(this,"$animations")}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Ip(this.x)&&Ip(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Je(Z0,"defaults",{}),Je(Z0,"defaultRoutes"),Z0);function bee(n,e){const t=n.options.ticks,r=_ee(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?xee(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>i)return Lee(e,u,s,o/i),u;const h=wee(s,e,i);if(o>0){let p,v;const m=o>1?Math.round((l-a)/(o-1)):null;for(U0(e,u,h,ki(m)?0:a-m,a),p=0,v=o-1;p<v;p++)U0(e,u,h,s[p],s[p+1]);return U0(e,u,h,l,ki(m)?e.length:l+m),u}return U0(e,u,h),u}function _ee(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function wee(n,e,t){const r=Cee(n),i=e.length/t;if(!r)return Math.max(i,1);const s=fJ(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function xee(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function Lee(n,e,t,r){let i=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}function U0(n,e,t,r,i){const s=Zr(r,0),o=Math.min(Zr(i,n.length),n.length);let a=0,l,u,h;for(t=Math.ceil(t),i&&(l=i-r,t=l/Math.floor(l/t)),h=s;h<0;)a++,h=Math.round(s+a*t);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(n[u]),a++,h=Math.round(s+a*t))}function Cee(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const See=n=>n==="left"?"right":n==="right"?"left":n,$3=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,U3=(n,e)=>Math.min(e||n,n);function V3(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function Eee(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,a=1e-6;let l=n.getPixelForTick(i),u;if(!(t&&(r===1?u=Math.max(l-s,o-l):e===0?u=(n.getPixelForTick(1)-l)/2:u=(l-n.getPixelForTick(i-1))/2,l+=i<e?u:-u,l<s-a||l>o+a)))return l}function Mee(n,e){qi(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}function gg(n){return n.drawTicks?n.tickLength:0}function H3(n,e){if(!n.display)return 0;const t=Qo(n.font,e),r=sl(n.padding);return(js(n.text)?n.text.length:1)*t.lineHeight+r.height}function Pee(n,e){return Dh(n,{scale:e,type:"scale"})}function kee(n,e,t){return Dh(n,{tick:t,index:e,type:"tick"})}function Aee(n,e,t){let r=ow(n);return(t&&e!=="right"||!t&&e==="right")&&(r=See(r)),r}function Tee(n,e,t,r){const{top:i,left:s,bottom:o,right:a,chart:l}=n,{chartArea:u,scales:h}=l;let p=0,v,m,C;const E=o-i,k=a-s;if(n.isHorizontal()){if(m=Za(r,s,a),mi(t)){const A=Object.keys(t)[0],D=t[A];C=h[A].getPixelForValue(D)+E-e}else t==="center"?C=(u.bottom+u.top)/2+E-e:C=$3(n,t,e);v=a-s}else{if(mi(t)){const A=Object.keys(t)[0],D=t[A];m=h[A].getPixelForValue(D)-k+e}else t==="center"?m=(u.left+u.right)/2-k+e:m=$3(n,t,e);C=Za(r,o,i),p=t==="left"?-To:To}return{titleX:m,titleY:C,maxWidth:v,rotation:p}}class Mf extends Vd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=bu(e,Number.POSITIVE_INFINITY),t=bu(t,Number.NEGATIVE_INFINITY),r=bu(r,Number.POSITIVE_INFINITY),i=bu(i,Number.NEGATIVE_INFINITY),{min:bu(e,r),max:bu(t,i),minDefined:mo(e),maxDefined:mo(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:t,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:bu(t,bu(r,t)),max:bu(r,bu(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){vs(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=$J(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?V3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=bee(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){vs(this.options.afterUpdate,[this])}beforeSetDimensions(){vs(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){vs(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),vs(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){vs(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=vs(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){vs(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){vs(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=U3(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let o=i,a,l,u;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),p=h.widest.width,v=h.highest.height,m=ma(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),p+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-gg(e.grid)-t.padding-H3(e.title,this.chart.options.font),u=Math.sqrt(p*p+v*v),o=iw(Math.min(Math.asin(ma((h.highest.height+6)/a,-1,1)),Math.asin(ma(l/u,-1,1))-Math.asin(ma(v/u,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){vs(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){vs(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=H3(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=gg(s)+l):(e.height=this.maxHeight,e.width=gg(s)+l),r.display&&this.ticks.length){const{first:u,last:h,widest:p,highest:v}=this._getLabelSizes(),m=r.padding*2,C=xc(this.labelRotation),E=Math.cos(C),k=Math.sin(C);if(a){const A=r.mirror?0:k*p.width+E*v.height;e.height=Math.min(this.maxHeight,e.height+A+m)}else{const A=r.mirror?0:E*p.width+k*v.height;e.width=Math.min(this.maxWidth,e.width+A+m)}this._calculatePadding(u,h,k,E)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,m=0;l?u?(v=i*e.width,m=r*t.height):(v=r*e.height,m=i*t.width):s==="start"?m=t.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,m=t.width/2),this.paddingLeft=Math.max((v-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-p+o)*this.width/(this.width-p),0)}else{let h=t.height/2,p=e.height/2;s==="start"?(h=0,p=e.height):s==="end"&&(h=t.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){vs(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)ki(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=V3(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/U3(t,r));let u=0,h=0,p,v,m,C,E,k,A,D,R,W,Q;for(p=0;p<t;p+=l){if(C=e[p].label,E=this._resolveTickFontOptions(p),i.font=k=E.string,A=s[k]=s[k]||{data:{},gc:[]},D=E.lineHeight,R=W=0,!ki(C)&&!js(C))R=ay(i,A.data,A.gc,R,C),W=D;else if(js(C))for(v=0,m=C.length;v<m;++v)Q=C[v],!ki(Q)&&!js(Q)&&(R=ay(i,A.data,A.gc,R,Q),W+=D);o.push(R),a.push(W),u=Math.max(R,u),h=Math.max(W,h)}Mee(s,t);const de=o.indexOf(u),fe=a.indexOf(h),N=z=>({width:o[z]||0,height:a[z]||0});return{first:N(0),last:N(t-1),widest:N(de),highest:N(fe),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return mJ(this._alignToPixels?Xh(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=kee(this.getContext(),e,r))}return this.$context||(this.$context=Pee(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=xc(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,u=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=gg(s),m=[],C=a.setContext(this.getContext()),E=C.display?C.width:0,k=E/2,A=function(I){return Xh(r,I,E)};let D,R,W,Q,de,fe,N,z,J,U,B,G;if(o==="top")D=A(this.bottom),fe=this.bottom-v,z=D-k,U=A(e.top)+k,G=e.bottom;else if(o==="bottom")D=A(this.top),U=e.top,G=A(e.bottom)-k,fe=D+k,z=this.top+v;else if(o==="left")D=A(this.right),de=this.right-v,N=D-k,J=A(e.left)+k,B=e.right;else if(o==="right")D=A(this.left),J=e.left,B=A(e.right)-k,de=D+k,N=this.left+v;else if(t==="x"){if(o==="center")D=A((e.top+e.bottom)/2+.5);else if(mi(o)){const I=Object.keys(o)[0],X=o[I];D=A(this.chart.scales[I].getPixelForValue(X))}U=e.top,G=e.bottom,fe=D+k,z=fe+v}else if(t==="y"){if(o==="center")D=A((e.left+e.right)/2);else if(mi(o)){const I=Object.keys(o)[0],X=o[I];D=A(this.chart.scales[I].getPixelForValue(X))}de=D-k,N=de-v,J=e.left,B=e.right}const $=Zr(i.ticks.maxTicksLimit,p),F=Math.max(1,Math.ceil(p/$));for(R=0;R<p;R+=F){const I=this.getContext(R),X=s.setContext(I),K=a.setContext(I),ve=X.lineWidth,ge=X.color,He=K.dash||[],ie=K.dashOffset,Ce=X.tickWidth,_e=X.tickColor,H=X.tickBorderDash||[],ee=X.tickBorderDashOffset;W=Eee(this,R,l),W!==void 0&&(Q=Xh(r,W,ve),u?de=N=J=B=Q:fe=z=U=G=Q,m.push({tx1:de,ty1:fe,tx2:N,ty2:z,x1:J,y1:U,x2:B,y2:G,width:ve,color:ge,borderDash:He,borderDashOffset:ie,tickWidth:Ce,tickColor:_e,tickBorderDash:H,tickBorderDashOffset:ee}))}return this._ticksLength=p,this._borderValue=D,m}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:p}=s,v=gg(r.grid),m=v+h,C=p?-h:m,E=-xc(this.labelRotation),k=[];let A,D,R,W,Q,de,fe,N,z,J,U,B,G="middle";if(i==="top")de=this.bottom-C,fe=this._getXAxisLabelAlignment();else if(i==="bottom")de=this.top+C,fe=this._getXAxisLabelAlignment();else if(i==="left"){const F=this._getYAxisLabelAlignment(v);fe=F.textAlign,Q=F.x}else if(i==="right"){const F=this._getYAxisLabelAlignment(v);fe=F.textAlign,Q=F.x}else if(t==="x"){if(i==="center")de=(e.top+e.bottom)/2+m;else if(mi(i)){const F=Object.keys(i)[0],I=i[F];de=this.chart.scales[F].getPixelForValue(I)+m}fe=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")Q=(e.left+e.right)/2-m;else if(mi(i)){const F=Object.keys(i)[0],I=i[F];Q=this.chart.scales[F].getPixelForValue(I)}fe=this._getYAxisLabelAlignment(v).textAlign}t==="y"&&(l==="start"?G="top":l==="end"&&(G="bottom"));const $=this._getLabelSizes();for(A=0,D=a.length;A<D;++A){R=a[A],W=R.label;const F=s.setContext(this.getContext(A));N=this.getPixelForTick(A)+s.labelOffset,z=this._resolveTickFontOptions(A),J=z.lineHeight,U=js(W)?W.length:1;const I=U/2,X=F.color,K=F.textStrokeColor,ve=F.textStrokeWidth;let ge=fe;o?(Q=N,fe==="inner"&&(A===D-1?ge=this.options.reverse?"left":"right":A===0?ge=this.options.reverse?"right":"left":ge="center"),i==="top"?u==="near"||E!==0?B=-U*J+J/2:u==="center"?B=-$.highest.height/2-I*J+J:B=-$.highest.height+J/2:u==="near"||E!==0?B=J/2:u==="center"?B=$.highest.height/2-I*J:B=$.highest.height-U*J,p&&(B*=-1),E!==0&&!F.showLabelBackdrop&&(Q+=J/2*Math.sin(E))):(de=N,B=(1-U)*J/2);let He;if(F.showLabelBackdrop){const ie=sl(F.backdropPadding),Ce=$.heights[A],_e=$.widths[A];let H=B-ie.top,ee=0-ie.left;switch(G){case"middle":H-=Ce/2;break;case"bottom":H-=Ce;break}switch(fe){case"center":ee-=_e/2;break;case"right":ee-=_e;break;case"inner":A===D-1?ee-=_e:A>0&&(ee-=_e/2);break}He={left:ee,top:H,width:_e+ie.width,height:Ce+ie.height,color:F.backdropColor}}k.push({label:W,font:z,textOffset:B,options:{rotation:E,color:X,strokeColor:K,strokeWidth:ve,textAlign:ge,textBaseline:G,translation:[Q,de],backdrop:He}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-xc(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,h;return t==="left"?i?(h=this.right+s,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h=this.left)):t==="right"?i?(h=this.left+s,r==="near"?u="right":r==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,r==="near"?u="left":r==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){const l=i[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,p,v;this.isHorizontal()?(u=Xh(e,this.left,o)-o/2,h=Xh(e,this.right,a)+a/2,p=v=l):(p=Xh(e,this.top,o)-o/2,v=Xh(e,this.bottom,a)+a/2,u=h=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(u,p),t.lineTo(h,v),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Zy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,h=o.textOffset;Lf(r,u,0,h,l,a)}i&&Xy(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=Qo(r.font),o=sl(r.padding),a=r.align;let l=s.lineHeight/2;t==="bottom"||t==="center"||mi(t)?(l+=o.bottom,js(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:p,rotation:v}=Tee(this,l,t,a);Lf(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:Aee(a,t,i),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=Zr(e.grid&&e.grid.z,-1),i=Zr(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Mf.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=t.length;s<o;++s){const a=t[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Qo(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class V0{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;Nee(t)&&(r=this.register(t));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,Dee(e,o,r),this.override&&vo.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in vo[i]&&(delete vo[i][r],this.override&&delete xf[r])}}function Dee(n,e,t){const r=xm(Object.create(null),[t?vo.get(t):{},vo.get(e),n.defaults]);vo.set(e,r),n.defaultRoutes&&Oee(e,n.defaultRoutes),n.descriptors&&vo.describe(e,n.descriptors)}function Oee(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");vo.route(s,i,l,a)})}function Nee(n){return"id"in n&&"defaults"in n}class Iee{constructor(){this.controllers=new V0(Cc,"datasets",!0),this.elements=new V0(Vd,"elements"),this.plugins=new V0(Object,"plugins"),this.scales=new V0(Mf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):qi(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){const i=rw(e);vs(r["before"+i],[],r),t[e](r),vs(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Wc=new Iee;class Bee{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[t,i,s.options];if(vs(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){ki(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=Zr(r.options&&r.options.plugins,{}),s=Ree(r);return i===!1&&!t?[]:jee(e,s,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function Ree(n){const e={},t=[],r=Object.keys(Wc.plugins.items);for(let s=0;s<r.length;s++)t.push(Wc.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function Fee(n,e){return!e&&n===!1?null:n===!0?{}:n}function jee(n,{plugins:e,localIds:t},r,i){const s=[],o=n.getContext();for(const a of e){const l=a.id,u=Fee(r[l],i);u!==null&&s.push({plugin:a,options:zee(n.config,{plugin:a,local:t[l]},u,o)})}return s}function zee(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function q2(n,e){const t=vo.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function $ee(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function Uee(n,e){return n===e?"_index_":"_value_"}function G3(n){if(n==="x"||n==="y"||n==="r")return n}function Vee(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Y2(n,...e){if(G3(n))return n;for(const t of e){const r=t.axis||Vee(t.position)||n.length>1&&G3(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function W3(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function Hee(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return W3(n,"x",t[0])||W3(n,"y",t[0])}return{}}function Gee(n,e){const t=xf[n.type]||{scales:{}},r=e.scales||{},i=q2(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!mi(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Y2(o,a,Hee(o,n),vo.scales[a.type]),u=Uee(l,i),h=t.scales||{};s[o]=em(Object.create(null),[{axis:l},a,h[l],h[u]])}),n.data.datasets.forEach(o=>{const a=o.type||n.type,l=o.indexAxis||q2(a,e),h=(xf[a]||{}).scales||{};Object.keys(h).forEach(p=>{const v=$ee(p,l),m=o[v+"AxisID"]||v;s[m]=s[m]||Object.create(null),em(s[m],[{axis:v},r[m],h[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];em(a,[vo.scales[a.type],vo.scale])}),s}function lP(n){const e=n.options||(n.options={});e.plugins=Zr(e.plugins,{}),e.scales=Gee(n,e)}function uP(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Wee(n){return n=n||{},n.data=uP(n.data),lP(n),n}const q3=new Map,cP=new Set;function H0(n,e){let t=q3.get(n);return t||(t=e(),q3.set(n,t),cP.add(t)),t}const mg=(n,e,t)=>{const r=Mh(e,t);r!==void 0&&n.add(r)};class qee{constructor(e){this._config=Wee(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=uP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),lP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return H0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return H0(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return H0(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return H0(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;const l=new Set;t.forEach(h=>{e&&(l.add(e),h.forEach(p=>mg(l,e,p))),h.forEach(p=>mg(l,i,p)),h.forEach(p=>mg(l,xf[s]||{},p)),h.forEach(p=>mg(l,vo,p)),h.forEach(p=>mg(l,H2,p))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),cP.has(t)&&o.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,xf[t]||{},vo.datasets[t]||{},{type:t},vo,H2]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Y3(this._resolverCache,e,i);let l=o;if(Kee(o,t)){s.$shared=!1,r=Ph(r)?r():r;const u=this.createResolver(e,r,a);l=Bp(o,r,u)}for(const u of t)s[u]=l[u];return s}createResolver(e,t,r=[""],i){const{resolver:s}=Y3(this._resolverCache,e,r);return mi(t)?Bp(s,t,void 0,i):s}}function Y3(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:uw(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const Yee=n=>mi(n)&&Object.getOwnPropertyNames(n).some(e=>Ph(n[e]));function Kee(n,e){const{isScriptable:t,isIndexable:r}=UM(n);for(const i of e){const s=t(i),o=r(i),a=(o||s)&&n[i];if(s&&(Ph(a)||Yee(a))||o&&js(a))return!0}return!1}var Zee="4.4.1";const Xee=["top","bottom","left","right","chartArea"];function K3(n,e){return n==="top"||n==="bottom"||Xee.indexOf(n)===-1&&e==="x"}function Z3(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function X3(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),vs(t&&t.onComplete,[n],e)}function Jee(n){const e=n.chart,t=e.options.animation;vs(t&&t.onProgress,[n],e)}function dP(n){return hw()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Lv={},J3=n=>{const e=dP(n);return Object.values(Lv).filter(t=>t.canvas===e).pop()};function Qee(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function ete(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}function G0(n,e,t){return n.options.clip?n[t]:e[t]}function tte(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:G0(t,e,"left"),right:G0(t,e,"right"),top:G0(r,e,"top"),bottom:G0(r,e,"bottom")}:e}class Kc{static register(...e){Wc.add(...e),Q3()}static unregister(...e){Wc.remove(...e),Q3()}constructor(e,t){const r=this.config=new qee(t),i=dP(e),s=J3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||yee(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=iJ(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Bee,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=_J(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],Lv[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ed.listen(this,"complete",X3),Ed.listen(this,"progress",Jee),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:s}=this;return ki(e)?t&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Wc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return v3(this.canvas,this.ctx),this}stop(){return Ed.stop(this),this}resize(e,t){Ed.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,_3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),vs(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};qi(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];t&&(s=s.concat(Object.keys(t).map(o=>{const a=t[o],l=Y2(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),qi(s,o=>{const a=o.options,l=a.id,u=Y2(l,a),h=Zr(a.type,o.dtype);(a.position===void 0||K3(a.position,u)!==K3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===h)p=r[l];else{const v=Wc.getScale(h);p=new v({id:l,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),qi(i,(o,a)=>{o||delete r[a]}),qi(r,o=>{il.configure(this,o,o.options),il.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(Z3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const s=t[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||q2(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Wc.getController(a),{datasetElementType:u,dataElementType:h}=vo.datasets[a];Object.assign(l,{dataElementType:Wc.getElement(h),datasetElementType:u&&Wc.getElement(u)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){qi(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:p}=this.getDatasetMeta(u),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||qi(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Z3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){qi(this.scales,e=>{il.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!l3(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of t){const o=r==="_removeElements"?-s:s;Qee(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<t;s++)if(!l3(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;il.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],qi(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,Ph(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ed.has(this)?this.attached&&!Ed.running(this)&&Ed.start(this):(this.draw(),X3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,s;for(i=0,s=t.length;i<s;++i){const o=t[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r=e._clip,i=!r.disabled,s=tte(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Zy(t,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Xy(t),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Bd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const s=XQ.modes[t];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Dh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Lm(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ed.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),v3(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Lv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,o)=>{t.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};qi(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(l,u)=>{t.addEventListener(this,l,u),e[l]=u},i=(l,u)=>{e[l]&&(t.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},t.isAttached(this.canvas)?a():o()}unbindEvents(){qi(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},qi(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let s,o,a,l;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!iy(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=s(t,e),a=r?e:s(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:s}=this,o=t,a=this._getActiveElements(e,i,r,o),l=cJ(e),u=ete(e,this._lastEvent,r,l);r&&(this._lastEvent=null,vs(s.onHover,[e,a,this],this),l&&vs(s.onClick,[e,a,this],this));const h=!iy(a,i);return(h||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=u,h}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Je(Kc,"defaults",vo),Je(Kc,"instances",Lv),Je(Kc,"overrides",xf),Je(Kc,"registry",Wc),Je(Kc,"version",Zee),Je(Kc,"getChart",J3);function Q3(){return qi(Kc.instances,n=>n._plugins.invalidate())}function nte(n,e,t){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let u=i/a;n.beginPath(),n.arc(s,o,a,r-u,t+u),l>i?(u=i/l,n.arc(s,o,l,t+u,r-u,!0)):n.arc(s,o,i,t+To,r-To),n.closePath(),n.clip()}function rte(n){return lw(n,["outerStart","outerEnd","innerStart","innerEnd"])}function ite(n,e,t,r){const i=rte(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),a=l=>{const u=(t-Math.min(s,l))*r/2;return ma(l,0,Math.min(s,u))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:ma(i.innerStart,0,o),innerEnd:ma(i.innerEnd,0,o)}}function np(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function cy(n,e,t,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:u,innerRadius:h}=e,p=Math.max(e.outerRadius+r+t-u,0),v=h>0?h+r+t+u:0;let m=0;const C=i-l;if(r){const F=h>0?h-r:0,I=p>0?p-r:0,X=(F+I)/2,K=X!==0?C*X/(X+r):C;m=(C-K)/2}const E=Math.max(.001,C*p-t/Es)/p,k=(C-E)/2,A=l+k+m,D=i-k-m,{outerStart:R,outerEnd:W,innerStart:Q,innerEnd:de}=ite(e,v,p,D-A),fe=p-R,N=p-W,z=A+R/fe,J=D-W/N,U=v+Q,B=v+de,G=A+Q/U,$=D-de/B;if(n.beginPath(),s){const F=(z+J)/2;if(n.arc(o,a,p,z,F),n.arc(o,a,p,F,J),W>0){const ve=np(N,J,o,a);n.arc(ve.x,ve.y,W,J,D+To)}const I=np(B,D,o,a);if(n.lineTo(I.x,I.y),de>0){const ve=np(B,$,o,a);n.arc(ve.x,ve.y,de,D+To,$+Math.PI)}const X=(D-de/v+(A+Q/v))/2;if(n.arc(o,a,v,D-de/v,X,!0),n.arc(o,a,v,X,A+Q/v,!0),Q>0){const ve=np(U,G,o,a);n.arc(ve.x,ve.y,Q,G+Math.PI,A-To)}const K=np(fe,A,o,a);if(n.lineTo(K.x,K.y),R>0){const ve=np(fe,z,o,a);n.arc(ve.x,ve.y,R,A-To,z)}}else{n.moveTo(o,a);const F=Math.cos(z)*p+o,I=Math.sin(z)*p+a;n.lineTo(F,I);const X=Math.cos(J)*p+o,K=Math.sin(J)*p+a;n.lineTo(X,K)}n.closePath()}function ste(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){cy(n,e,t,r,l,i);for(let u=0;u<s;++u)n.fill();isNaN(a)||(l=o+(a%Cs||Cs))}return cy(n,e,t,r,l,i),n.fill(),l}function ote(n,e,t,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:u,borderJoinStyle:h,borderDash:p,borderDashOffset:v}=l,m=l.borderAlign==="inner";if(!u)return;n.setLineDash(p||[]),n.lineDashOffset=v,m?(n.lineWidth=u*2,n.lineJoin=h||"round"):(n.lineWidth=u,n.lineJoin=h||"bevel");let C=e.endAngle;if(s){cy(n,e,t,r,C,i);for(let E=0;E<s;++E)n.stroke();isNaN(a)||(C=o+(a%Cs||Cs))}m&&nte(n,e,C),s||(cy(n,e,t,r,C,i),n.stroke())}class Og extends Vd{constructor(t){super();Je(this,"circumference");Je(this,"endAngle");Je(this,"fullCircles");Je(this,"innerRadius");Je(this,"outerRadius");Je(this,"pixelMargin");Je(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=DM(s,{x:t,y:r}),{startAngle:l,endAngle:u,innerRadius:h,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,E=Zr(v,u-l)>=Cs||Cm(o,l,u),k=Nd(a,h+m,p+m);return E&&k}getCenterPoint(t){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:u,spacing:h}=this.options,p=(s+o)/2,v=(a+l+h+u)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Cs?Math.floor(i/Cs):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*s,Math.sin(l)*s);const u=1-Math.sin(Math.min(Es,i||0)),h=s*u;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,ste(t,this,h,o,a),ote(t,this,h,o,a),t.restore()}}Je(Og,"id","arc"),Je(Og,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Je(Og,"defaultRoutes",{backgroundColor:"backgroundColor"}),Je(Og,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function hP(n,e,t=e){n.lineCap=Zr(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Zr(t.borderDash,e.borderDash)),n.lineDashOffset=Zr(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Zr(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Zr(t.borderWidth,e.borderWidth),n.strokeStyle=Zr(t.borderColor,e.borderColor)}function ate(n,e,t){n.lineTo(t.x,t.y)}function lte(n){return n.stepped?DJ:n.tension||n.cubicInterpolationMode==="monotone"?OJ:ate}function fP(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:a}=e,l=Math.max(i,o),u=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:u<l&&!h?r+u-l:u-l}}function ute(n,e,t,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:u}=fP(i,t,r),h=lte(s);let{move:p=!0,reverse:v}=r||{},m,C,E;for(m=0;m<=u;++m)C=i[(a+(v?u-m:m))%o],!C.skip&&(p?(n.moveTo(C.x,C.y),p=!1):h(n,E,C,v,s.stepped),E=C);return l&&(C=i[(a+(v?u:0))%o],h(n,E,C,v,s.stepped)),!!l}function cte(n,e,t,r){const i=e.points,{count:s,start:o,ilen:a}=fP(i,t,r),{move:l=!0,reverse:u}=r||{};let h=0,p=0,v,m,C,E,k,A;const D=W=>(o+(u?a-W:W))%s,R=()=>{E!==k&&(n.lineTo(h,k),n.lineTo(h,E),n.lineTo(h,A))};for(l&&(m=i[D(0)],n.moveTo(m.x,m.y)),v=0;v<=a;++v){if(m=i[D(v)],m.skip)continue;const W=m.x,Q=m.y,de=W|0;de===C?(Q<E?E=Q:Q>k&&(k=Q),h=(p*h+W)/++p):(R(),n.lineTo(W,Q),C=de,p=0,E=k=Q),A=Q}R()}function K2(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?cte:ute}function dte(n){return n.stepped?dQ:n.tension||n.cubicInterpolationMode==="monotone"?hQ:rf}function hte(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),hP(n,e.options),n.stroke(i)}function fte(n,e,t,r){const{segments:i,options:s}=e,o=K2(e);for(const a of i)hP(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}const pte=typeof Path2D=="function";function gte(n,e,t,r){pte&&!e.options.segment?hte(n,e,t,r):fte(n,e,t,r)}class mh extends Vd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;rQ(this._points,r,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=yQ(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],s=this.points,o=JM(this,{property:t,start:i,end:i});if(!o.length)return;const a=[],l=dte(r);let u,h;for(u=0,h=o.length;u<h;++u){const{start:p,end:v}=o[u],m=s[p],C=s[v];if(m===C){a.push(m);continue}const E=Math.abs((i-m[t])/(C[t]-m[t])),k=l(m,C,E,r.stepped);k[t]=e[t],a.push(k)}return a.length===1?a[0]:a}pathSegment(e,t,r){return K2(this)(e,this,t,r)}path(e,t,r){const i=this.segments,s=K2(this);let o=this._loop;t=t||0,r=r||this.points.length-t;for(const a of i)o&=s(e,this,a,{start:t,end:t+r-1});return!!o}draw(e,t,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),gte(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Je(mh,"id","line"),Je(mh,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Je(mh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Je(mh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function eL(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Cv extends Vd{constructor(t){super();Je(this,"parsed");Je(this,"skip");Je(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return eL(this,t,"x",r)}inYRange(t,r){return eL(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){const i=this.options;this.skip||i.radius<.1||!Bd(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,G2(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}Je(Cv,"id","point"),Je(Cv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Je(Cv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function pP(n,e){const{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e);let a,l,u,h,p;return n.horizontal?(p=o/2,a=Math.min(t,i),l=Math.max(t,i),u=r-p,h=r+p):(p=s/2,a=t-p,l=t+p,u=Math.min(r,i),h=Math.max(r,i)),{left:a,top:u,right:l,bottom:h}}function vh(n,e,t,r){return n?0:ma(e,t,r)}function mte(n,e,t){const r=n.options.borderWidth,i=n.borderSkipped,s=$M(r);return{t:vh(i.top,s.top,0,t),r:vh(i.right,s.right,0,e),b:vh(i.bottom,s.bottom,0,t),l:vh(i.left,s.left,0,e)}}function vte(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=mf(i),o=Math.min(e,t),a=n.borderSkipped,l=r||mi(i);return{topLeft:vh(!l||a.top||a.left,s.topLeft,0,o),topRight:vh(!l||a.top||a.right,s.topRight,0,o),bottomLeft:vh(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:vh(!l||a.bottom||a.right,s.bottomRight,0,o)}}function yte(n){const e=pP(n),t=e.right-e.left,r=e.bottom-e.top,i=mte(n,t/2,r/2),s=vte(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Db(n,e,t,r){const i=e===null,s=t===null,a=n&&!(i&&s)&&pP(n,r);return a&&(i||Nd(e,a.left,a.right))&&(s||Nd(t,a.top,a.bottom))}function bte(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function _te(n,e){n.rect(e.x,e.y,e.w,e.h)}function Ob(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-r,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+o,radius:n.radius}}class Sv extends Vd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=yte(this),a=bte(o.radius)?Sm:_te;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,Ob(o,t,s)),e.clip(),a(e,Ob(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Ob(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return Db(this,e,t,r)}inXRange(e,t){return Db(this,e,null,t)}inYRange(e,t){return Db(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Je(Sv,"id","bar"),Je(Sv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Je(Sv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var wte=Object.freeze({__proto__:null,ArcElement:Og,BarElement:Sv,LineElement:mh,PointElement:Cv});const Z2=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],tL=Z2.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function gP(n){return Z2[n%Z2.length]}function mP(n){return tL[n%tL.length]}function xte(n,e){return n.borderColor=gP(e),n.backgroundColor=mP(e),++e}function Lte(n,e){return n.backgroundColor=n.data.map(()=>gP(e++)),e}function Cte(n,e){return n.backgroundColor=n.data.map(()=>mP(e++)),e}function Ste(n){let e=0;return(t,r)=>{const i=n.getDatasetMeta(r).controller;i instanceof uf?e=Lte(t,e):i instanceof im?e=Cte(t,e):i&&(e=xte(t,e))}}function nL(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function Ete(n){return n&&(n.borderColor||n.backgroundColor)}var Mte={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:r},options:i}=n.config,{elements:s}=i;if(!t.forceOverride&&(nL(r)||Ete(i)||s&&nL(s)))return;const o=Ste(n);r.forEach(o)}};function Pte(n,e,t,r,i){const s=i.samples||r;if(s>=t)return n.slice(e,e+t);const o=[],a=(t-2)/(s-2);let l=0;const u=e+t-1;let h=e,p,v,m,C,E;for(o[l++]=n[h],p=0;p<s-2;p++){let k=0,A=0,D;const R=Math.floor((p+1)*a)+1+e,W=Math.min(Math.floor((p+2)*a)+1,t)+e,Q=W-R;for(D=R;D<W;D++)k+=n[D].x,A+=n[D].y;k/=Q,A/=Q;const de=Math.floor(p*a)+1+e,fe=Math.min(Math.floor((p+1)*a)+1,t)+e,{x:N,y:z}=n[h];for(m=C=-1,D=de;D<fe;D++)C=.5*Math.abs((N-k)*(n[D].y-z)-(N-n[D].x)*(A-z)),C>m&&(m=C,v=n[D],E=D);o[l++]=v,h=E}return o[l++]=n[u],o}function kte(n,e,t,r){let i=0,s=0,o,a,l,u,h,p,v,m,C,E;const k=[],A=e+t-1,D=n[e].x,W=n[A].x-D;for(o=e;o<e+t;++o){a=n[o],l=(a.x-D)/W*r,u=a.y;const Q=l|0;if(Q===h)u<C?(C=u,p=o):u>E&&(E=u,v=o),i=(s*i+a.x)/++s;else{const de=o-1;if(!ki(p)&&!ki(v)){const fe=Math.min(p,v),N=Math.max(p,v);fe!==m&&fe!==de&&k.push({...n[fe],x:i}),N!==m&&N!==de&&k.push({...n[N],x:i})}o>0&&de!==m&&k.push(n[de]),k.push(a),h=Q,s=0,C=E=u,p=v=m=o}}return k}function vP(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function rL(n){n.data.datasets.forEach(e=>{vP(e)})}function Ate(n,e){const t=e.length;let r=0,i;const{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:u}=s.getUserBounds();return l&&(r=ma(Id(e,s.axis,o).lo,0,t-1)),u?i=ma(Id(e,s.axis,a).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var Tte={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){rL(n);return}const r=n.width;n.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=n.getDatasetMeta(s),u=o||i.data;if(Tg([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=n.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:p,count:v}=Ate(l,u);const m=t.threshold||4*r;if(v<=m){vP(i);return}ki(o)&&(i._data=u,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let C;switch(t.algorithm){case"lttb":C=Pte(u,p,v,r,t);break;case"min-max":C=kte(u,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=C})},destroy(n){rL(n)}};function Dte(n,e,t){const r=n.segments,i=n.points,s=e.points,o=[];for(const a of r){let{start:l,end:u}=a;u=gw(l,u,i);const h=X2(t,i[l],i[u],a.loop);if(!e.segments){o.push({source:a,target:h,start:i[l],end:i[u]});continue}const p=JM(e,h);for(const v of p){const m=X2(t,s[v.start],s[v.end],v.loop),C=XM(a,i,m);for(const E of C)o.push({source:E,target:v,start:{[t]:iL(h,m,"start",Math.max)},end:{[t]:iL(h,m,"end",Math.min)}})}}return o}function X2(n,e,t,r){if(r)return;let i=e[n],s=t[n];return n==="angle"&&(i=_u(i),s=_u(s)),{property:n,start:i,end:s}}function Ote(n,e){const{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=gw(o,a,i);const l=i[o],u=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:u.x,y:r})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:u.y}))}),s}function gw(n,e,t){for(;e>n;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function iL(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function yP(n,e){let t=[],r=!1;return js(n)?(r=!0,t=n):t=Ote(n,e),t.length?new mh({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function sL(n){return n&&n.fill!==!1}function Nte(n,e,t){let i=n[e].fill;const s=[e];let o;if(!t)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!mo(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Ite(n,e,t){const r=jte(n);if(mi(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return mo(i)&&Math.floor(i)===i?Bte(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Bte(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function Rte(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:mi(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Fte(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:mi(n)?r=n.value:r=e.getBaseValue(),r}function jte(n){const e=n.options,t=e.fill;let r=Zr(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function zte(n){const{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,a=$te(e,t);a.push(yP({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const u=s[l];for(let h=u.start;h<=u.end;h++)Ute(i,o[h],a)}return new mh({points:i,options:{}})}function $te(n,e){const t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function Ute(n,e,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i],{first:o,last:a,point:l}=Vte(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(n.push(l),!a)break}}n.push(...r)}function Vte(n,e,t){const r=n.interpolate(e,t);if(!r)return{};const i=r[t],s=n.segments,o=n.points;let a=!1,l=!1;for(let u=0;u<s.length;u++){const h=s[u],p=o[h.start][t],v=o[h.end][t];if(Nd(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class bP{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:i,y:s,radius:o}=this;return t=t||{start:0,end:Cs},e.arc(i,s,o,t.end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function Hte(n){const{chart:e,fill:t,line:r}=n;if(mo(t))return Gte(e,t);if(t==="stack")return zte(n);if(t==="shape")return!0;const i=Wte(n);return i instanceof bP?i:yP(i,r)}function Gte(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function Wte(n){return(n.scale||{}).getPointPositionForValue?Yte(n):qte(n)}function qte(n){const{scale:e={},fill:t}=n,r=Rte(t,e);if(mo(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Yte(n){const{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Fte(t,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new bP({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function Nb(n,e,t){const r=Hte(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,u=a.backgroundColor,{above:h=u,below:p=u}=l||{};r&&i.points.length&&(Zy(n,t),Kte(n,{line:i,target:r,above:h,below:p,area:t,scale:s,axis:o}),Xy(n))}function Kte(n,e){const{line:t,target:r,above:i,below:s,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&s!==i&&(oL(n,r,o.top),aL(n,{line:t,target:r,color:i,scale:a,property:l}),n.restore(),n.save(),oL(n,r,o.bottom)),aL(n,{line:t,target:r,color:s,scale:a,property:l}),n.restore()}function oL(n,e,t){const{segments:r,points:i}=e;let s=!0,o=!1;n.beginPath();for(const a of r){const{start:l,end:u}=a,h=i[l],p=i[gw(l,u,i)];s?(n.moveTo(h.x,h.y),s=!1):(n.lineTo(h.x,t),n.lineTo(h.x,h.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(p.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function aL(n,e){const{line:t,target:r,property:i,color:s,scale:o}=e,a=Dte(t,r,i);for(const{source:l,target:u,start:h,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,m=r!==!0;n.save(),n.fillStyle=v,Zte(n,o,m&&X2(i,h,p)),n.beginPath();const C=!!t.pathSegment(n,l);let E;if(m){C?n.closePath():lL(n,r,p,i);const k=!!r.pathSegment(n,u,{move:C,reverse:!0});E=C&&k,E||lL(n,r,h,i)}n.closePath(),n.fill(E?"evenodd":"nonzero"),n.restore()}}function Zte(n,e,t){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(n.beginPath(),n.rect(o,r,a-o,i-r),n.clip())}function lL(n,e,t,r){const i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var Xte={id:"filler",afterDatasetsUpdate(n,e,t){const r=(n.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof mh&&(l={visible:n.isDatasetVisible(o),index:o,fill:Ite(a,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=Nte(i,o,t.propagate))},beforeDraw(n,e,t){const r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&Nb(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;sL(s)&&Nb(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const r=e.meta.$filler;!sL(r)||t.drawTime!=="beforeDatasetDraw"||Nb(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const uL=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},Jte=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class cL extends Vd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=vs(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Qo(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=uL(r,s);let u,h;t.font=i.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,i,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,m=-h;return this.legendItems.forEach((C,E)=>{const k=r+t/2+s.measureText(C.text).width;(E===0||u[u.length-1]+k+2*a>o)&&(p+=h,u[u.length-(E>0?0:1)]=0,m+=h,v++),l[E]={left:0,top:m,row:v,width:k,height:i},u[u.length-1]+=k+a}),p}_fitCols(e,t,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let p=a,v=0,m=0,C=0,E=0;return this.legendItems.forEach((k,A)=>{const{itemWidth:D,itemHeight:R}=Qte(r,t,s,k,i);A>0&&m+R+2*a>h&&(p+=v+a,u.push({width:v,height:m}),C+=v+a,E++,v=m=0),l[A]={left:C,top:m,col:E,width:D,height:R},v=Math.max(v,D),m+=R+a}),p+=v,u.push({width:v,height:m}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Sp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Za(r,this.left+i,this.right-this.lineWidths[a]);for(const u of t)a!==u.row&&(a=u.row,l=Za(r,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+e+i,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+i}else{let a=0,l=Za(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const u of t)u.col!==a&&(a=u.col,l=Za(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+i,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Zy(e,this),this._draw(),Xy(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=vo.color,l=Sp(e.rtl,this.left,this.width),u=Qo(o.font),{padding:h}=o,p=u.size,v=p/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:C,boxHeight:E,itemHeight:k}=uL(o,p),A=function(de,fe,N){if(isNaN(C)||C<=0||isNaN(E)||E<0)return;i.save();const z=Zr(N.lineWidth,1);if(i.fillStyle=Zr(N.fillStyle,a),i.lineCap=Zr(N.lineCap,"butt"),i.lineDashOffset=Zr(N.lineDashOffset,0),i.lineJoin=Zr(N.lineJoin,"miter"),i.lineWidth=z,i.strokeStyle=Zr(N.strokeStyle,a),i.setLineDash(Zr(N.lineDash,[])),o.usePointStyle){const J={radius:E*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:z},U=l.xPlus(de,C/2),B=fe+v;zM(i,J,U,B,o.pointStyleWidth&&C)}else{const J=fe+Math.max((p-E)/2,0),U=l.leftForLtr(de,C),B=mf(N.borderRadius);i.beginPath(),Object.values(B).some(G=>G!==0)?Sm(i,{x:U,y:J,w:C,h:E,radius:B}):i.rect(U,J,C,E),i.fill(),z!==0&&i.stroke()}i.restore()},D=function(de,fe,N){Lf(i,N.text,de,fe+k/2,u,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},R=this.isHorizontal(),W=this._computeTitleHeight();R?m={x:Za(s,this.left+h,this.right-r[0]),y:this.top+h+W,line:0}:m={x:this.left+h,y:Za(s,this.top+W+h,this.bottom-t[0].height),line:0},YM(this.ctx,e.textDirection);const Q=k+h;this.legendItems.forEach((de,fe)=>{i.strokeStyle=de.fontColor,i.fillStyle=de.fontColor;const N=i.measureText(de.text).width,z=l.textAlign(de.textAlign||(de.textAlign=o.textAlign)),J=C+v+N;let U=m.x,B=m.y;l.setWidth(this.width),R?fe>0&&U+J+h>this.right&&(B=m.y+=Q,m.line++,U=m.x=Za(s,this.left+h,this.right-r[m.line])):fe>0&&B+Q>this.bottom&&(U=m.x=U+t[m.line].width+h,m.line++,B=m.y=Za(s,this.top+W+h,this.bottom-t[m.line].height));const G=l.x(U);if(A(G,B,de),U=wJ(z,U+C+v,R?U+J:this.right,e.rtl),D(l.x(U),B,de),R)m.x+=J+h;else if(typeof de.text!="string"){const $=u.lineHeight;m.y+=_P(de,$)+h}else m.y+=Q}),KM(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Qo(t.font),i=sl(t.padding);if(!t.display)return;const s=Sp(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=r.size/2,u=i.top+l;let h,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),h=this.top+u,p=Za(e.align,p,this.right-v);else{const C=this.columnSizes.reduce((E,k)=>Math.max(E,k.height),0);h=u+Za(e.align,this.top,this.bottom-C-e.labels.padding-this._computeTitleHeight())}const m=Za(a,p,p+v);o.textAlign=s.textAlign(ow(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,Lf(o,t.text,m,h,r)}_computeTitleHeight(){const e=this.options.title,t=Qo(e.font),r=sl(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(Nd(e,this.left,this.right)&&Nd(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Nd(e,i.left,i.left+i.width)&&Nd(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!nne(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Jte(i,r);i&&!s&&vs(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&vs(t.onHover,[e,r,this],this)}else r&&vs(t.onClick,[e,r,this],this)}}function Qte(n,e,t,r,i){const s=ene(r,n,e,t),o=tne(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function ene(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}function tne(n,e,t){let r=n;return typeof e.text!="string"&&(r=_P(e,t)),r}function _P(n,e){const t=n.text?n.text.length:0;return e*t}function nne(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var rne={id:"legend",_element:cL,start(n,e,t){const r=n.legend=new cL({ctx:n.ctx,options:t,chart:n});il.configure(n,r,t),il.addBox(n,r)},stop(n){il.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;il.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(t?0:void 0),h=sl(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class mw extends Vd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=js(r.text)?r.text.length:1;this._padding=sl(r.padding);const s=i*Qo(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,u,h,p;return this.isHorizontal()?(h=Za(a,r,s),p=t+e,u=s-r):(o.position==="left"?(h=r+e,p=Za(a,i,t),l=Es*-.5):(h=s-e,p=Za(a,t,i),l=Es*.5),u=i-t),{titleX:h,titleY:p,maxWidth:u,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Qo(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(s);Lf(e,t.text,0,0,r,{color:t.color,maxWidth:l,rotation:u,textAlign:ow(t.align),textBaseline:"middle",translation:[o,a]})}}function ine(n,e){const t=new mw({ctx:n.ctx,options:e,chart:n});il.configure(n,t,e),il.addBox(n,t),n.titleBlock=t}var sne={id:"title",_element:mw,start(n,e,t){ine(n,t)},stop(n){const e=n.titleBlock;il.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;il.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const W0=new WeakMap;var one={id:"subtitle",start(n,e,t){const r=new mw({ctx:n.ctx,options:t,chart:n});il.configure(n,r,t),il.addBox(n,r),W0.set(n,r)},stop(n){il.removeBox(n,W0.get(n)),W0.delete(n)},beforeUpdate(n,e,t){const r=W0.get(n);il.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ng={average(n){if(!n.length)return!1;let e,t,r=0,i=0,s=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){const l=n[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=V2(e,u);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();t=l.x,r=l.y}return{x:t,y:r}}};function Hc(n,e){return e&&(js(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Md(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function ane(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function dL(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=e,l=Qo(e.bodyFont),u=Qo(e.titleFont),h=Qo(e.footerFont),p=s.length,v=i.length,m=r.length,C=sl(e.padding);let E=C.height,k=0,A=r.reduce((W,Q)=>W+Q.before.length+Q.lines.length+Q.after.length,0);if(A+=n.beforeBody.length+n.afterBody.length,p&&(E+=p*u.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),A){const W=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=m*W+(A-m)*l.lineHeight+(A-1)*e.bodySpacing}v&&(E+=e.footerMarginTop+v*h.lineHeight+(v-1)*e.footerSpacing);let D=0;const R=function(W){k=Math.max(k,t.measureText(W).width+D)};return t.save(),t.font=u.string,qi(n.title,R),t.font=l.string,qi(n.beforeBody.concat(n.afterBody),R),D=e.displayColors?o+2+e.boxPadding:0,qi(r,W=>{qi(W.before,R),qi(W.lines,R),qi(W.after,R)}),D=0,t.font=h.string,qi(n.footer,R),t.restore(),k+=C.width,{width:k,height:E}}function lne(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function une(n,e,t,r){const{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if(n==="left"&&i+s+o>e.width||n==="right"&&i-s-o<0)return!0}function cne(n,e,t,r){const{x:i,width:s}=t,{width:o,chartArea:{left:a,right:l}}=n;let u="center";return r==="center"?u=i<=(a+l)/2?"left":"right":i<=s/2?u="left":i>=o-s/2&&(u="right"),une(u,n,e,t)&&(u="center"),u}function hL(n,e,t){const r=t.yAlign||e.yAlign||lne(n,t);return{xAlign:t.xAlign||e.xAlign||cne(n,e,t,r),yAlign:r}}function dne(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function hne(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function fL(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,u=i+s,{topLeft:h,topRight:p,bottomLeft:v,bottomRight:m}=mf(o);let C=dne(e,a);const E=hne(e,l,u);return l==="center"?a==="left"?C+=u:a==="right"&&(C-=u):a==="left"?C-=Math.max(h,v)+i:a==="right"&&(C+=Math.max(p,m)+i),{x:ma(C,0,r.width-e.width),y:ma(E,0,r.height-e.height)}}function q0(n,e,t){const r=sl(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function pL(n){return Hc([],Md(n))}function fne(n,e,t){return Dh(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function gL(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const wP={beforeTitle:Sd,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Sd,beforeBody:Sd,beforeLabel:Sd,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return ki(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Sd,afterBody:Sd,beforeFooter:Sd,footer:Sd,afterFooter:Sd};function Ul(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?wP[e].call(t,r):i}class J2 extends Vd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,s=new QM(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=fne(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=Ul(r,"beforeTitle",this,e),s=Ul(r,"title",this,e),o=Ul(r,"afterTitle",this,e);let a=[];return a=Hc(a,Md(i)),a=Hc(a,Md(s)),a=Hc(a,Md(o)),a}getBeforeBody(e,t){return pL(Ul(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return qi(e,s=>{const o={before:[],lines:[],after:[]},a=gL(r,s);Hc(o.before,Md(Ul(a,"beforeLabel",this,s))),Hc(o.lines,Ul(a,"label",this,s)),Hc(o.after,Md(Ul(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,t){return pL(Ul(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=Ul(r,"beforeFooter",this,e),s=Ul(r,"footer",this,e),o=Ul(r,"afterFooter",this,e);let a=[];return a=Hc(a,Md(i)),a=Hc(a,Md(s)),a=Hc(a,Md(o)),a}_createItems(e){const t=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,u;for(l=0,u=t.length;l<u;++l)a.push(ane(this.chart,t[l]));return e.filter&&(a=a.filter((h,p,v)=>e.filter(h,p,v,r))),e.itemSort&&(a=a.sort((h,p)=>e.itemSort(h,p,r))),qi(a,h=>{const p=gL(e.callbacks,h);i.push(Ul(p,"labelColor",this,h)),s.push(Ul(p,"labelPointStyle",this,h)),o.push(Ul(p,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Ng[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=dL(this,r),u=Object.assign({},a,l),h=hL(this.chart,r,u),p=fL(r,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const s=this.getCaretPosition(e,r,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:p}=mf(a),{x:v,y:m}=e,{width:C,height:E}=t;let k,A,D,R,W,Q;return s==="center"?(W=m+E/2,i==="left"?(k=v,A=k-o,R=W+o,Q=W-o):(k=v+C,A=k+o,R=W-o,Q=W+o),D=k):(i==="left"?A=v+Math.max(l,h)+o:i==="right"?A=v+C-Math.max(u,p)-o:A=this.caretX,s==="top"?(R=m,W=R-o,k=A-o,D=A+o):(R=m+E,W=R+o,k=A+o,D=A-o),Q=R),{x1:k,x2:A,x3:D,y1:R,y2:W,y3:Q}}drawTitle(e,t,r){const i=this.title,s=i.length;let o,a,l;if(s){const u=Sp(r.rtl,this.x,this.width);for(e.x=q0(this,r.titleAlign,r),t.textAlign=u.textAlign(r.titleAlign),t.textBaseline="middle",o=Qo(r.titleFont),a=r.titleSpacing,t.fillStyle=r.titleColor,t.font=o.string,l=0;l<s;++l)t.fillText(i[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,t,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=s,h=Qo(s.bodyFont),p=q0(this,"left",s),v=i.x(p),m=l<h.lineHeight?(h.lineHeight-l)/2:0,C=t.y+m;if(s.usePointStyle){const E={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=i.leftForLtr(v,u)+u/2,A=C+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,G2(e,E,k,A),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,G2(e,E,k,A)}else{e.lineWidth=mi(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(v,u),k=i.leftForLtr(i.xPlus(v,1),u-2),A=mf(o.borderRadius);Object.values(A).some(D=>D!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Sm(e,{x:E,y:C,w:u,h:l,radius:A}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Sm(e,{x:k,y:C+1,w:u-2,h:l-2,radius:A}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,C,u,l),e.strokeRect(E,C,u,l),e.fillStyle=o.backgroundColor,e.fillRect(k,C+1,u-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=r,p=Qo(r.bodyFont);let v=p.lineHeight,m=0;const C=Sp(r.rtl,this.x,this.width),E=function(N){t.fillText(N,C.x(e.x+m),e.y+v/2),e.y+=v+s},k=C.textAlign(o);let A,D,R,W,Q,de,fe;for(t.textAlign=o,t.textBaseline="middle",t.font=p.string,e.x=q0(this,k,r),t.fillStyle=r.bodyColor,qi(this.beforeBody,E),m=a&&k!=="right"?o==="center"?u/2+h:u+2+h:0,W=0,de=i.length;W<de;++W){for(A=i[W],D=this.labelTextColors[W],t.fillStyle=D,qi(A.before,E),R=A.lines,a&&R.length&&(this._drawColorBox(t,e,W,C,r),v=Math.max(p.lineHeight,l)),Q=0,fe=R.length;Q<fe;++Q)E(R[Q]),v=p.lineHeight;qi(A.after,E)}m=0,v=p.lineHeight,qi(this.afterBody,E),e.y-=s}drawFooter(e,t,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Sp(r.rtl,this.x,this.width);for(e.x=q0(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=l.textAlign(r.footerAlign),t.textBaseline="middle",o=Qo(r.footerFont),t.fillStyle=r.footerColor,t.font=o.string,a=0;a<s;++a)t.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=r,{topLeft:p,topRight:v,bottomLeft:m,bottomRight:C}=mf(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+p,l),o==="top"&&this.drawCaret(e,t,r,i),t.lineTo(a+u-v,l),t.quadraticCurveTo(a+u,l,a+u,l+v),o==="center"&&s==="right"&&this.drawCaret(e,t,r,i),t.lineTo(a+u,l+h-C),t.quadraticCurveTo(a+u,l+h,a+u-C,l+h),o==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(a+m,l+h),t.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,t,r,i),t.lineTo(a,l+p),t.quadraticCurveTo(a,l,a+p,l),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Ng[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=dL(this,e),l=Object.assign({},o,this._size),u=hL(t,e,l),h=fL(e,l,u,t);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=sl(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,t),YM(e,t.textDirection),s.y+=o.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),KM(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!iy(r,i),o=this._positionChanged(i,t);(s||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,t,r),a=this._positionChanged(o,e),l=t||!iy(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:r,caretY:i,options:s}=this,o=Ng[s.position].call(this,e,t);return o!==!1&&(r!==o.x||i!==o.y)}}Je(J2,"positioners",Ng);var pne={id:"tooltip",_element:J2,positioners:Ng,afterInit(n,e,t){t&&(n.tooltip=new J2({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:wP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},gne=Object.freeze({__proto__:null,Colors:Mte,Decimation:Tte,Filler:Xte,Legend:rne,SubTitle:one,Title:sne,Tooltip:pne});const mne=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function vne(n,e,t,r){const i=n.indexOf(e);if(i===-1)return mne(n,e,t,r);const s=n.lastIndexOf(e);return i!==s?t:i}const yne=(n,e)=>n===null?null:ma(Math.round(n),0,e);function mL(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class Q2 extends Mf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:s}of t)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ki(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:vne(r,e,Zr(t,e),this._addedLabels),yne(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return mL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Je(Q2,"id","category"),Je(Q2,"defaults",{ticks:{callback:mL}});function bne(n,e){const t=[],{bounds:i,step:s,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:p,includeBounds:v}=n,m=s||1,C=h-1,{min:E,max:k}=e,A=!ki(o),D=!ki(a),R=!ki(u),W=(k-E)/(p+1);let Q=c3((k-E)/C/m)*m,de,fe,N,z;if(Q<1e-14&&!A&&!D)return[{value:E},{value:k}];z=Math.ceil(k/Q)-Math.floor(E/Q),z>C&&(Q=c3(z*Q/C/m)*m),ki(l)||(de=Math.pow(10,l),Q=Math.ceil(Q*de)/de),i==="ticks"?(fe=Math.floor(E/Q)*Q,N=Math.ceil(k/Q)*Q):(fe=E,N=k),A&&D&&s&&pJ((a-o)/s,Q/1e3)?(z=Math.round(Math.min((a-o)/Q,h)),Q=(a-o)/z,fe=o,N=a):R?(fe=A?o:fe,N=D?a:N,z=u-1,Q=(N-fe)/z):(z=(N-fe)/Q,tm(z,Math.round(z),Q/1e3)?z=Math.round(z):z=Math.ceil(z));const J=Math.max(d3(Q),d3(fe));de=Math.pow(10,ki(l)?J:l),fe=Math.round(fe*de)/de,N=Math.round(N*de)/de;let U=0;for(A&&(v&&fe!==o?(t.push({value:o}),fe<o&&U++,tm(Math.round((fe+U*Q)*de)/de,o,vL(o,W,n))&&U++):fe<o&&U++);U<z;++U){const B=Math.round((fe+U*Q)*de)/de;if(D&&B>a)break;t.push({value:B})}return D&&v&&N!==a?t.length&&tm(t[t.length-1].value,a,vL(a,W,n))?t[t.length-1].value=a:t.push({value:a}):(!D||N===a)&&t.push({value:N}),t}function vL(n,e,{horizontal:t,minRotation:r}){const i=xc(r),s=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}class dy extends Mf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ki(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=t?i:l,a=l=>s=r?s:l;if(e){const l=rd(i),u=rd(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=bne(i,s);return e.bounds==="ticks"&&TM(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return zm(e,this.chart.options.locale,this.options.ticks.format)}}class e_ extends dy{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=mo(e)?e:0,this.max=mo(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=xc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Je(e_,"id","linear"),Je(e_,"defaults",{ticks:{callback:Ky.formatters.numeric}});const Mm=n=>Math.floor(gh(n)),Qh=(n,e)=>Math.pow(10,Mm(n)+e);function yL(n){return n/Math.pow(10,Mm(n))===1}function bL(n,e,t){const r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function _ne(n,e){const t=e-n;let r=Mm(t);for(;bL(n,e,r)>10;)r++;for(;bL(n,e,r)<10;)r--;return Math.min(r,Mm(n))}function wne(n,{min:e,max:t}){e=bu(n.min,e);const r=[],i=Mm(e);let s=_ne(e,t),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,u=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((u-h)/Math.pow(10,s)),v=bu(n.min,Math.round((l+h+p*Math.pow(10,s))*o)/o);for(;v<t;)r.push({value:v,major:yL(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+h+p*Math.pow(10,s))*o)/o;const m=bu(n.max,v);return r.push({value:m,major:yL(m),significand:p}),r}class t_ extends Mf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=dy.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return mo(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=mo(e)?Math.max(0,e):null,this.max=mo(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!mo(this._userMin)&&(this.min=e===Qh(this.min,0)?Qh(this.min,-1):Qh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=t?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Qh(r,-1)),o(Qh(i,1)))),r<=0&&s(Qh(i,-1)),i<=0&&o(Qh(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},r=wne(t,this);return e.bounds==="ticks"&&TM(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":zm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=gh(e),this._valueRange=gh(this.max)-gh(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(gh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}Je(t_,"id","logarithmic"),Je(t_,"defaults",{ticks:{callback:Ky.formatters.logarithmic,major:{enabled:!0}}});function n_(n){const e=n.ticks;if(e.display&&n.display){const t=sl(e.backdropPadding);return Zr(e.font&&e.font.size,vo.font.size)+t.height}return 0}function xne(n,e,t){return t=js(t)?t:[t],{w:TJ(n,e.string,t),h:t.length*e.lineHeight}}function _L(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function Lne(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Es/s:0;for(let l=0;l<s;l++){const u=o.setContext(n.getPointLabelContext(l));i[l]=u.padding;const h=n.getPointPosition(l,n.drawingArea+i[l],a),p=Qo(u.font),v=xne(n.ctx,p,n._pointLabels[l]);r[l]=v;const m=_u(n.getIndexAngle(l)+a),C=Math.round(iw(m)),E=_L(C,h.x,v.w,0,180),k=_L(C,h.y,v.h,90,270);Cne(t,e,m,E,k)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=Mne(n,r,i)}function Cne(n,e,t,r,i){const s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function Sne(n,e,t){const r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=t,l=n.getPointPosition(e,r+i+o,s),u=Math.round(iw(_u(l.angle+To))),h=Ane(l.y,a.h,u),p=Pne(u),v=kne(l.x,a.w,p);return{visible:!0,x:l.x,y:h,textAlign:p,left:v,top:h,right:v+a.w,bottom:h+a.h}}function Ene(n,e){if(!e)return!0;const{left:t,top:r,right:i,bottom:s}=n;return!(Bd({x:t,y:r},e)||Bd({x:t,y:s},e)||Bd({x:i,y:r},e)||Bd({x:i,y:s},e))}function Mne(n,e,t){const r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:n_(s)/2,additionalAngle:o?Es/i:0};let u;for(let h=0;h<i;h++){l.padding=t[h],l.size=e[h];const p=Sne(n,h,l);r.push(p),a==="auto"&&(p.visible=Ene(p,u),p.visible&&(u=p))}return r}function Pne(n){return n===0||n===180?"center":n<180?"left":"right"}function kne(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function Ane(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function Tne(n,e,t){const{left:r,top:i,right:s,bottom:o}=t,{backdropColor:a}=e;if(!ki(a)){const l=mf(e.borderRadius),u=sl(e.backdropPadding);n.fillStyle=a;const h=r-u.left,p=i-u.top,v=s-r+u.width,m=o-i+u.height;Object.values(l).some(C=>C!==0)?(n.beginPath(),Sm(n,{x:h,y:p,w:v,h:m,radius:l}),n.fill()):n.fillRect(h,p,v,m)}}function Dne(n,e){const{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){const s=n._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(n.getPointLabelContext(i));Tne(t,o,s);const a=Qo(o.font),{x:l,y:u,textAlign:h}=s;Lf(t,n._pointLabels[i],l,u+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function xP(n,e,t,r){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,Cs);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function One(n,e,t,r,i){const s=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),xP(n,t,o,r),s.closePath(),s.stroke(),s.restore())}function Nne(n,e,t){return Dh(n,{label:t,index:e,type:"pointLabel"})}class Ig extends dy{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=sl(n_(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=mo(e)&&!isNaN(e)?e:0,this.max=mo(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/n_(this.options))}generateTickLabels(e){dy.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const i=vs(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?Lne(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){const t=Cs/(this._pointLabels.length||1),r=this.options.startAngle||0;return _u(e*t+xc(r))}getDistanceFromCenterForValue(e){if(ki(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(ki(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return Nne(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const i=this.getIndexAngle(e)-To+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),xP(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length;let a,l,u;if(t.pointLabels.display&&Dne(this,o),i.display&&this.ticks.forEach((h,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(h.value);const v=this.getContext(p),m=i.setContext(v),C=s.setContext(v);One(this,m,l,o,C)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const h=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=h;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),u=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!t.reverse)return;const u=r.setContext(this.getContext(l)),h=Qo(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=u.backdropColor;const p=sl(u.backdropPadding);e.fillRect(-o/2-p.left,-s-h.size/2-p.top,o+p.width,h.size+p.height)}Lf(e,a.label,0,-s,h,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}Je(Ig,"id","radialLinear"),Je(Ig,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ky.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Je(Ig,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Je(Ig,"descriptors",{angleLines:{_fallback:"grid"}});const e1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Yl=Object.keys(e1);function wL(n,e){return n-e}function xL(n,e){if(ki(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),mo(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(Ip(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,i)),+o)}function LL(n,e,t,r){const i=Yl.length;for(let s=Yl.indexOf(n);s<i-1;++s){const o=e1[Yl[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=r)return Yl[s]}return Yl[i-1]}function Ine(n,e,t,r,i){for(let s=Yl.length-1;s>=Yl.indexOf(t);s--){const o=Yl[s];if(e1[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return Yl[t?Yl.indexOf(t):0]}function Bne(n){for(let e=Yl.indexOf(n)+1,t=Yl.length;e<t;++e)if(e1[Yl[e]].common)return Yl[e]}function CL(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:i}=sw(t,e),s=t[r]>=e?t[r]:t[i];n[s]=!0}}function Rne(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=t[a],l>=0&&(e[l].major=!0);return e}function SL(n,e,t){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!t?r:Rne(n,r,i,t)}class Pm extends Mf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new nP._date(e.adapters.date);i.init(t),em(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:xL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=mo(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),s=mo(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=yJ(i,s,o);return this._unit=t.unit||(r.autoSkip?LL(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):Ine(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Bne(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),SL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=ma(t,0,o),r=ma(r,0,o),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||LL(s.minUnit,t,r,this._getLabelCapacity(t)),a=Zr(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=Ip(l)||l===!0,h={};let p=t,v,m;if(u&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,u?"day":o),e.diff(r,t,o)>1e5*a)throw new Error(t+" and "+r+" are too far apart with stepSize of "+a+" "+o);const C=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,m=0;v<r;v=+e.add(v,a,o),m++)CL(h,v,C);return(v===r||i.bounds==="ticks"||m===1)&&CL(h,v,C),Object.keys(h).sort(wL).map(E=>+E)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,s=this._unit,o=t||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,t,r,i){const s=this.options,o=s.ticks.callback;if(o)return vs(o,[e,t,r],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],p=u&&a[u],v=r[t],m=u&&p&&v&&v.major;return this._adapter.format(e,i||(m?p:h))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=xc(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,SL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(xL(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return NM(e.sort(wL))}}Je(Pm,"id","time"),Je(Pm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Y0(n,e,t){let r=0,i=n.length-1,s,o,a,l;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Id(n,"pos",e)),{pos:s,time:a}=n[r],{pos:o,time:l}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Id(n,"time",e)),{time:s,pos:a}=n[r],{time:o,pos:l}=n[i]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class r_ extends Pm{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Y0(t,this.min),this._tableRange=Y0(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=t&&u<=r&&i.push(u);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],u=i[o],Math.round((h+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Y0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return Y0(this._table,r*this._tableRange+this._minPos,!0)}}Je(r_,"id","timeseries"),Je(r_,"defaults",Pm.defaults);var Fne=Object.freeze({__proto__:null,CategoryScale:Q2,LinearScale:e_,LogarithmicScale:t_,RadialLinearScale:Ig,TimeScale:Pm,TimeSeriesScale:r_});const jne=[WQ,wte,gne,Fne];Kc.register(...jne);const LP=6048e5,zne=864e5,$m=6e4,Um=36e5,$ne=1e3,EL=Symbol.for("constructDateFrom");function yo(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&EL in n?n[EL](e):n instanceof Date?new n.constructor(e):new Date(e)}function $r(n,e){return yo(e||n,n)}function t1(n,e,t){const r=$r(n,t==null?void 0:t.in);return isNaN(e)?yo((t==null?void 0:t.in)||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function vw(n,e,t){const r=$r(n,t==null?void 0:t.in);if(isNaN(e))return yo(n,NaN);if(!e)return r;const i=r.getDate(),s=yo(n,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function yw(n,e,t){return yo(n,+$r(n)+e)}function Une(n,e,t){return yw(n,e*Um)}let Vne={};function Pf(){return Vne}function od(n,e){var a,l,u,h;const t=Pf(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,i=$r(n,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Fp(n,e){return od(n,{...e,weekStartsOn:1})}function CP(n,e){const t=$r(n,e==null?void 0:e.in),r=t.getFullYear(),i=yo(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Fp(i),o=yo(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Fp(o);return t.getTime()>=s.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function hy(n){const e=$r(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function kf(n,...e){const t=yo.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function i_(n,e){const t=$r(n,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function SP(n,e,t){const[r,i]=kf(t==null?void 0:t.in,n,e),s=i_(r),o=i_(i),a=+s-hy(s),l=+o-hy(o);return Math.round((a-l)/zne)}function Hne(n,e){const t=CP(n,e),r=yo(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Fp(r)}function Gne(n,e,t){const r=$r(n,t==null?void 0:t.in);return r.setTime(r.getTime()+e*$m),r}function Wne(n,e,t){return vw(n,e*3,t)}function qne(n,e,t){return yw(n,e*1e3)}function Yne(n,e,t){return t1(n,e*7,t)}function Kne(n,e,t){return vw(n,e*12,t)}function sm(n,e){const t=+$r(n)-+$r(e);return t<0?-1:t>0?1:t}function Zne(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function EP(n){return!(!Zne(n)&&typeof n!="number"||isNaN(+$r(n)))}function Xne(n,e,t){const[r,i]=kf(t==null?void 0:t.in,n,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function Jne(n,e,t){const[r,i]=kf(t==null?void 0:t.in,n,e);return r.getFullYear()-i.getFullYear()}function MP(n,e,t){const[r,i]=kf(t==null?void 0:t.in,n,e),s=ML(r,i),o=Math.abs(SP(r,i));r.setDate(r.getDate()-s*o);const a=+(ML(r,i)===-s),l=s*(o-a);return l===0?0:l}function ML(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Vm(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function Qne(n,e,t){const[r,i]=kf(t==null?void 0:t.in,n,e),s=(+r-+i)/Um;return Vm(t==null?void 0:t.roundingMethod)(s)}function bw(n,e){return+$r(n)-+$r(e)}function ere(n,e,t){const r=bw(n,e)/$m;return Vm(t==null?void 0:t.roundingMethod)(r)}function PP(n,e){const t=$r(n,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function kP(n,e){const t=$r(n,e==null?void 0:e.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function tre(n,e){const t=$r(n,e==null?void 0:e.in);return+PP(t,e)==+kP(t,e)}function AP(n,e,t){const[r,i,s]=kf(t==null?void 0:t.in,n,n,e),o=sm(i,s),a=Math.abs(Xne(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=sm(i,s)===-o;tre(r)&&a===1&&sm(r,s)===1&&(l=!1);const u=o*(a-+l);return u===0?0:u}function nre(n,e,t){const r=AP(n,e,t)/3;return Vm(t==null?void 0:t.roundingMethod)(r)}function rre(n,e,t){const r=bw(n,e)/1e3;return Vm(t==null?void 0:t.roundingMethod)(r)}function ire(n,e,t){const r=MP(n,e,t)/7;return Vm(t==null?void 0:t.roundingMethod)(r)}function sre(n,e,t){const[r,i]=kf(t==null?void 0:t.in,n,e),s=sm(r,i),o=Math.abs(Jne(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=sm(r,i)===-s,l=s*(o-+a);return l===0?0:l}function ore(n,e){const t=$r(n,e==null?void 0:e.in),r=t.getMonth(),i=r-r%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function are(n,e){const t=$r(n,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function lre(n,e){const t=$r(n,e==null?void 0:e.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function TP(n,e){const t=$r(n,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function ure(n,e){const t=$r(n,e==null?void 0:e.in);return t.setMinutes(59,59,999),t}function cre(n,e){var a,l;const t=Pf(),r=t.weekStartsOn??((l=(a=t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=$r(n,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function dre(n,e){const t=$r(n,e==null?void 0:e.in);return t.setSeconds(59,999),t}function hre(n,e){const t=$r(n,e==null?void 0:e.in),r=t.getMonth(),i=r-r%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function fre(n,e){const t=$r(n,e==null?void 0:e.in);return t.setMilliseconds(999),t}const pre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gre=(n,e,t)=>{let r;const i=pre[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Ib(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const mre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},vre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},yre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bre={date:Ib({formats:mre,defaultWidth:"full"}),time:Ib({formats:vre,defaultWidth:"full"}),dateTime:Ib({formats:yre,defaultWidth:"full"})},_re={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},wre=(n,e,t,r)=>_re[n];function vg(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const o=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):o;i=n.formattingValues[a]||n.formattingValues[o]}else{const o=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[o]}const s=n.argumentCallback?n.argumentCallback(e):e;return i[s]}}const xre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Lre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Cre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Sre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ere={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Mre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Pre=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},kre={ordinalNumber:Pre,era:vg({values:xre,defaultWidth:"wide"}),quarter:vg({values:Lre,defaultWidth:"wide",argumentCallback:n=>n-1}),month:vg({values:Cre,defaultWidth:"wide"}),day:vg({values:Sre,defaultWidth:"wide"}),dayPeriod:vg({values:Ere,defaultWidth:"wide",formattingValues:Mre,defaultFormattingWidth:"wide"})};function yg(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?Tre(a,p=>p.test(o)):Are(a,p=>p.test(o));let u;u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;const h=e.slice(o.length);return{value:u,rest:h}}}function Are(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Tre(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function Dre(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],s=e.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Ore=/^(\d+)(th|st|nd|rd)?/i,Nre=/\d+/i,Ire={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Bre={any:[/^b/i,/^(a|c)/i]},Rre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Fre={any:[/1/i,/2/i,/3/i,/4/i]},jre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$re={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ure={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Vre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Hre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gre={ordinalNumber:Dre({matchPattern:Ore,parsePattern:Nre,valueCallback:n=>parseInt(n,10)}),era:yg({matchPatterns:Ire,defaultMatchWidth:"wide",parsePatterns:Bre,defaultParseWidth:"any"}),quarter:yg({matchPatterns:Rre,defaultMatchWidth:"wide",parsePatterns:Fre,defaultParseWidth:"any",valueCallback:n=>n+1}),month:yg({matchPatterns:jre,defaultMatchWidth:"wide",parsePatterns:zre,defaultParseWidth:"any"}),day:yg({matchPatterns:$re,defaultMatchWidth:"wide",parsePatterns:Ure,defaultParseWidth:"any"}),dayPeriod:yg({matchPatterns:Vre,defaultMatchWidth:"any",parsePatterns:Hre,defaultParseWidth:"any"})},DP={code:"en-US",formatDistance:gre,formatLong:bre,formatRelative:wre,localize:kre,match:Gre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Wre(n,e){const t=$r(n,e==null?void 0:e.in);return SP(t,TP(t))+1}function OP(n,e){const t=$r(n,e==null?void 0:e.in),r=+Fp(t)-+Hne(t);return Math.round(r/LP)+1}function _w(n,e){var h,p,v,m;const t=$r(n,e==null?void 0:e.in),r=t.getFullYear(),i=Pf(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(v=i.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=yo((e==null?void 0:e.in)||n,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=od(o,e),l=yo((e==null?void 0:e.in)||n,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const u=od(l,e);return+t>=+a?r+1:+t>=+u?r:r-1}function qre(n,e){var a,l,u,h;const t=Pf(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,i=_w(n,e),s=yo((e==null?void 0:e.in)||n,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),od(s,e)}function NP(n,e){const t=$r(n,e==null?void 0:e.in),r=+od(t,e)-+qre(t,e);return Math.round(r/LP)+1}function Wi(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const nh={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Wi(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Wi(t+1,2)},d(n,e){return Wi(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Wi(n.getHours()%12||12,e.length)},H(n,e){return Wi(n.getHours(),e.length)},m(n,e){return Wi(n.getMinutes(),e.length)},s(n,e){return Wi(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Wi(i,e.length)}},rp={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},PL={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return nh.y(n,e)},Y:function(n,e,t,r){const i=_w(n,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Wi(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):Wi(s,e.length)},R:function(n,e){const t=CP(n);return Wi(t,e.length)},u:function(n,e){const t=n.getFullYear();return Wi(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Wi(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Wi(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return nh.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Wi(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=NP(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Wi(i,e.length)},I:function(n,e,t){const r=OP(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Wi(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):nh.d(n,e)},D:function(n,e,t){const r=Wre(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Wi(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Wi(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Wi(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Wi(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=rp.noon:r===0?i=rp.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=rp.evening:r>=12?i=rp.afternoon:r>=4?i=rp.morning:i=rp.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return nh.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):nh.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Wi(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Wi(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):nh.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):nh.s(n,e)},S:function(n,e){return nh.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return AL(r);case"XXXX":case"XX":return sf(r);case"XXXXX":case"XXX":default:return sf(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return AL(r);case"xxxx":case"xx":return sf(r);case"xxxxx":case"xxx":default:return sf(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+kL(r,":");case"OOOO":default:return"GMT"+sf(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+kL(r,":");case"zzzz":default:return"GMT"+sf(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return Wi(r,e.length)},T:function(n,e,t){return Wi(+n,e.length)}};function kL(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),s=r%60;return s===0?t+String(i):t+String(i)+e+Wi(s,2)}function AL(n,e){return n%60===0?(n>0?"-":"+")+Wi(Math.abs(n)/60,2):sf(n,e)}function sf(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Wi(Math.trunc(r/60),2),s=Wi(r%60,2);return t+i+e+s}const TL=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},IP=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Yre=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return TL(n,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",TL(r,e)).replace("{{time}}",IP(i,e))},s_={p:IP,P:Yre},Kre=/^D+$/,Zre=/^Y+$/,Xre=["D","DD","YY","YYYY"];function BP(n){return Kre.test(n)}function RP(n){return Zre.test(n)}function o_(n,e,t){const r=Jre(n,e,t);if(console.warn(r),Xre.includes(n))throw new RangeError(r)}function Jre(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Qre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tie=/^'([^]*?)'?$/,nie=/''/g,rie=/[a-zA-Z]/;function iie(n,e,t){var h,p,v,m,C,E,k,A;const r=Pf(),i=(t==null?void 0:t.locale)??r.locale??DP,s=(t==null?void 0:t.firstWeekContainsDate)??((p=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(v=r.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=(t==null?void 0:t.weekStartsOn)??((E=(C=t==null?void 0:t.locale)==null?void 0:C.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((A=(k=r.locale)==null?void 0:k.options)==null?void 0:A.weekStartsOn)??0,a=$r(n,t==null?void 0:t.in);if(!EP(a))throw new RangeError("Invalid time value");let l=e.match(eie).map(D=>{const R=D[0];if(R==="p"||R==="P"){const W=s_[R];return W(D,i.formatLong)}return D}).join("").match(Qre).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const R=D[0];if(R==="'")return{isToken:!1,value:sie(D)};if(PL[R])return{isToken:!0,value:D};if(R.match(rie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:D}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(D=>{if(!D.isToken)return D.value;const R=D.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&RP(R)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&BP(R))&&o_(R,e,String(n));const W=PL[R[0]];return W(a,R,i.localize,u)}).join("")}function sie(n){const e=n.match(tie);return e?e[1].replace(nie,"'"):n}function oie(){return Object.assign({},Pf())}function aie(n,e){const t=$r(n,e==null?void 0:e.in).getDay();return t===0?7:t}function lie(n,e){const t=uie(e)?new e(0):yo(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function uie(n){var e;return typeof n=="function"&&((e=n.prototype)==null?void 0:e.constructor)===n}const cie=10;class FP{constructor(){Je(this,"subPriority",0)}validate(e,t){return!0}}class die extends FP{constructor(e,t,r,i,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class hie extends FP{constructor(t,r){super();Je(this,"priority",cie);Je(this,"subPriority",-1);this.context=t||(i=>yo(r,i))}set(t,r){return r.timestampIsSet?t:yo(t,lie(t,this.context))}}class $i{run(e,t,r,i){const s=this.parse(e,t,r,i);return s?{setter:new die(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}class fie extends $i{constructor(){super(...arguments);Je(this,"priority",140);Je(this,"incompatibleTokens",["R","u","t","T"])}parse(t,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,r,i){return r.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}const Do={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Zc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Oo(n,e){return n&&{value:e(n.value),rest:n.rest}}function to(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Xc(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,o=t[5]?parseInt(t[5],10):0;return{value:r*(i*Um+s*$m+o*$ne),rest:e.slice(t[0].length)}}function jP(n){return to(Do.anyDigitsSigned,n)}function bo(n,e){switch(n){case 1:return to(Do.singleDigit,e);case 2:return to(Do.twoDigits,e);case 3:return to(Do.threeDigits,e);case 4:return to(Do.fourDigits,e);default:return to(new RegExp("^\\d{1,"+n+"}"),e)}}function fy(n,e){switch(n){case 1:return to(Do.singleDigitSigned,e);case 2:return to(Do.twoDigitsSigned,e);case 3:return to(Do.threeDigitsSigned,e);case 4:return to(Do.fourDigitsSigned,e);default:return to(new RegExp("^-?\\d{1,"+n+"}"),e)}}function ww(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function zP(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=n>=s%100;i=n+o-(a?100:0)}return t?i:1-i}function $P(n){return n%400===0||n%4===0&&n%100!==0}class pie extends $i{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Oo(bo(4,t),s);case"yo":return Oo(i.ordinalNumber(t,{unit:"year"}),s);default:return Oo(bo(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i){const s=t.getFullYear();if(i.isTwoDigitYear){const a=zP(i.year,s);return t.setFullYear(a,0,1),t.setHours(0,0,0,0),t}const o=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}}class gie extends $i{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Oo(bo(4,t),s);case"Yo":return Oo(i.ordinalNumber(t,{unit:"year"}),s);default:return Oo(bo(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,i,s){const o=_w(t,s);if(i.isTwoDigitYear){const l=zP(i.year,o);return t.setFullYear(l,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),od(t,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return t.setFullYear(a,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),od(t,s)}}class mie extends $i{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,r){return fy(r==="R"?4:r.length,t)}set(t,r,i){const s=yo(t,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Fp(s)}}class vie extends $i{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,r){return fy(r==="u"?4:r.length,t)}set(t,r,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class yie extends $i{constructor(){super(...arguments);Je(this,"priority",120);Je(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"Q":case"QQ":return bo(r.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class bie extends $i{constructor(){super(...arguments);Je(this,"priority",120);Je(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"q":case"qq":return bo(r.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}}class _ie extends $i{constructor(){super(...arguments);Je(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Je(this,"priority",110)}parse(t,r,i){const s=o=>o-1;switch(r){case"M":return Oo(to(Do.month,t),s);case"MM":return Oo(bo(2,t),s);case"Mo":return Oo(i.ordinalNumber(t,{unit:"month"}),s);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}class wie extends $i{constructor(){super(...arguments);Je(this,"priority",110);Je(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,r,i){const s=o=>o-1;switch(r){case"L":return Oo(to(Do.month,t),s);case"LL":return Oo(bo(2,t),s);case"Lo":return Oo(i.ordinalNumber(t,{unit:"month"}),s);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}}function xie(n,e,t){const r=$r(n,t==null?void 0:t.in),i=NP(r,t)-e;return r.setDate(r.getDate()-i*7),$r(r,t==null?void 0:t.in)}class Lie extends $i{constructor(){super(...arguments);Je(this,"priority",100);Je(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,r,i){switch(r){case"w":return to(Do.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return bo(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i,s){return od(xie(t,i,s),s)}}function Cie(n,e,t){const r=$r(n,t==null?void 0:t.in),i=OP(r,t)-e;return r.setDate(r.getDate()-i*7),r}class Sie extends $i{constructor(){super(...arguments);Je(this,"priority",100);Je(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,r,i){switch(r){case"I":return to(Do.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return bo(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,i){return Fp(Cie(t,i))}}const Eie=[31,28,31,30,31,30,31,31,30,31,30,31],Mie=[31,29,31,30,31,30,31,31,30,31,30,31];class Pie extends $i{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"subPriority",1);Je(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"d":return to(Do.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return bo(r.length,t)}}validate(t,r){const i=t.getFullYear(),s=$P(i),o=t.getMonth();return s?r>=1&&r<=Mie[o]:r>=1&&r<=Eie[o]}set(t,r,i){return t.setDate(i),t.setHours(0,0,0,0),t}}class kie extends $i{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"subpriority",1);Je(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,r,i){switch(r){case"D":case"DD":return to(Do.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return bo(r.length,t)}}validate(t,r){const i=t.getFullYear();return $P(i)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}}function xw(n,e,t){var p,v,m,C;const r=Pf(),i=(t==null?void 0:t.weekStartsOn)??((v=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((C=(m=r.locale)==null?void 0:m.options)==null?void 0:C.weekStartsOn)??0,s=$r(n,t==null?void 0:t.in),o=s.getDay(),l=(e%7+7)%7,u=7-i,h=e<0||e>6?e-(o+u)%7:(l+u)%7-(o+u)%7;return t1(s,h,t)}class Aie extends $i{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=xw(t,i,s),t.setHours(0,0,0,0),t}}class Tie extends $i{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Oo(bo(r.length,t),o);case"eo":return Oo(i.ordinalNumber(t,{unit:"day"}),o);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=xw(t,i,s),t.setHours(0,0,0,0),t}}class Die extends $i{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Oo(bo(r.length,t),o);case"co":return Oo(i.ordinalNumber(t,{unit:"day"}),o);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,i,s){return t=xw(t,i,s),t.setHours(0,0,0,0),t}}function Oie(n,e,t){const r=$r(n,t==null?void 0:t.in),i=aie(r,t),s=e-i;return t1(r,s,t)}class Nie extends $i{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return bo(r.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return Oo(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return Oo(i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Oo(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Oo(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,r){return r>=1&&r<=7}set(t,r,i){return t=Oie(t,i),t.setHours(0,0,0,0),t}}class Iie extends $i{constructor(){super(...arguments);Je(this,"priority",80);Je(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(ww(i),0,0,0),t}}class Bie extends $i{constructor(){super(...arguments);Je(this,"priority",80);Je(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(ww(i),0,0,0),t}}class Rie extends $i{constructor(){super(...arguments);Je(this,"priority",80);Je(this,"incompatibleTokens",["a","b","t","T"])}parse(t,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,i){return t.setHours(ww(i),0,0,0),t}}class Fie extends $i{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,r,i){switch(r){case"h":return to(Do.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return bo(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,i){const s=t.getHours()>=12;return s&&i<12?t.setHours(i+12,0,0,0):!s&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}}class jie extends $i{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,r,i){switch(r){case"H":return to(Do.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return bo(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,i){return t.setHours(i,0,0,0),t}}class zie extends $i{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,r,i){switch(r){case"K":return to(Do.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return bo(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}}class $ie extends $i{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,r,i){switch(r){case"k":return to(Do.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return bo(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,i){const s=i<=24?i%24:i;return t.setHours(s,0,0,0),t}}class Uie extends $i{constructor(){super(...arguments);Je(this,"priority",60);Je(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"m":return to(Do.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return bo(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setMinutes(i,0,0),t}}class Vie extends $i{constructor(){super(...arguments);Je(this,"priority",50);Je(this,"incompatibleTokens",["t","T"])}parse(t,r,i){switch(r){case"s":return to(Do.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return bo(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,i){return t.setSeconds(i,0),t}}class Hie extends $i{constructor(){super(...arguments);Je(this,"priority",30);Je(this,"incompatibleTokens",["t","T"])}parse(t,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Oo(bo(r.length,t),i)}set(t,r,i){return t.setMilliseconds(i),t}}class Gie extends $i{constructor(){super(...arguments);Je(this,"priority",10);Je(this,"incompatibleTokens",["t","T","x"])}parse(t,r){switch(r){case"X":return Xc(Zc.basicOptionalMinutes,t);case"XX":return Xc(Zc.basic,t);case"XXXX":return Xc(Zc.basicOptionalSeconds,t);case"XXXXX":return Xc(Zc.extendedOptionalSeconds,t);case"XXX":default:return Xc(Zc.extended,t)}}set(t,r,i){return r.timestampIsSet?t:yo(t,t.getTime()-hy(t)-i)}}class Wie extends $i{constructor(){super(...arguments);Je(this,"priority",10);Je(this,"incompatibleTokens",["t","T","X"])}parse(t,r){switch(r){case"x":return Xc(Zc.basicOptionalMinutes,t);case"xx":return Xc(Zc.basic,t);case"xxxx":return Xc(Zc.basicOptionalSeconds,t);case"xxxxx":return Xc(Zc.extendedOptionalSeconds,t);case"xxx":default:return Xc(Zc.extended,t)}}set(t,r,i){return r.timestampIsSet?t:yo(t,t.getTime()-hy(t)-i)}}class qie extends $i{constructor(){super(...arguments);Je(this,"priority",40);Je(this,"incompatibleTokens","*")}parse(t){return jP(t)}set(t,r,i){return[yo(t,i*1e3),{timestampIsSet:!0}]}}class Yie extends $i{constructor(){super(...arguments);Je(this,"priority",20);Je(this,"incompatibleTokens","*")}parse(t){return jP(t)}set(t,r,i){return[yo(t,i),{timestampIsSet:!0}]}}const Kie={G:new fie,y:new pie,Y:new gie,R:new mie,u:new vie,Q:new yie,q:new bie,M:new _ie,L:new wie,w:new Lie,I:new Sie,d:new Pie,D:new kie,E:new Aie,e:new Tie,c:new Die,i:new Nie,a:new Iie,b:new Bie,B:new Rie,h:new Fie,H:new jie,K:new zie,k:new $ie,m:new Uie,s:new Vie,S:new Hie,X:new Gie,x:new Wie,t:new qie,T:new Yie},Zie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Jie=/^'([^]*?)'?$/,Qie=/''/g,ese=/\S/,tse=/[a-zA-Z]/;function nse(n,e,t,r){var k,A,D,R,W,Q,de,fe;const i=()=>yo((r==null?void 0:r.in)||t,NaN),s=oie(),o=(r==null?void 0:r.locale)??s.locale??DP,a=(r==null?void 0:r.firstWeekContainsDate)??((A=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:A.firstWeekContainsDate)??s.firstWeekContainsDate??((R=(D=s.locale)==null?void 0:D.options)==null?void 0:R.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((Q=(W=r==null?void 0:r.locale)==null?void 0:W.options)==null?void 0:Q.weekStartsOn)??s.weekStartsOn??((fe=(de=s.locale)==null?void 0:de.options)==null?void 0:fe.weekStartsOn)??0;if(!e)return n?i():$r(t,r==null?void 0:r.in);const u={firstWeekContainsDate:a,weekStartsOn:l,locale:o},h=[new hie(r==null?void 0:r.in,t)],p=e.match(Xie).map(N=>{const z=N[0];if(z in s_){const J=s_[z];return J(N,o.formatLong)}return N}).join("").match(Zie),v=[];for(let N of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&RP(N)&&o_(N,e,n),!(r!=null&&r.useAdditionalDayOfYearTokens)&&BP(N)&&o_(N,e,n);const z=N[0],J=Kie[z];if(J){const{incompatibleTokens:U}=J;if(Array.isArray(U)){const G=v.find($=>U.includes($.token)||$.token===z);if(G)throw new RangeError(`The format string mustn't contain \`${G.fullToken}\` and \`${N}\` at the same time`)}else if(J.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${N}\` and any other token at the same time`);v.push({token:z,fullToken:N});const B=J.run(n,N,o.match,u);if(!B)return i();h.push(B.setter),n=B.rest}else{if(z.match(tse))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");if(N==="''"?N="'":z==="'"&&(N=rse(N)),n.indexOf(N)===0)n=n.slice(N.length);else return i()}}if(n.length>0&&ese.test(n))return i();const m=h.map(N=>N.priority).sort((N,z)=>z-N).filter((N,z,J)=>J.indexOf(N)===z).map(N=>h.filter(z=>z.priority===N).sort((z,J)=>J.subPriority-z.subPriority)).map(N=>N[0]);let C=$r(t,r==null?void 0:r.in);if(isNaN(+C))return i();const E={};for(const N of m){if(!N.validate(C,u))return i();const z=N.set(C,E,u);Array.isArray(z)?(C=z[0],Object.assign(E,z[1])):C=z}return C}function rse(n){return n.match(Jie)[1].replace(Qie,"'")}function ise(n,e){const t=$r(n,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function sse(n,e){const t=$r(n,e==null?void 0:e.in);return t.setSeconds(0,0),t}function ose(n,e){const t=$r(n,e==null?void 0:e.in);return t.setMilliseconds(0),t}function ase(n,e){const t=()=>yo(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=dse(n);let s;if(i.date){const u=hse(i.date,r);s=fse(u.restDateString,u.year)}if(!s||isNaN(+s))return t();const o=+s;let a=0,l;if(i.time&&(a=pse(i.time),isNaN(a)))return t();if(i.timezone){if(l=gse(i.timezone),isNaN(l))return t()}else{const u=new Date(o+a),h=$r(0,e==null?void 0:e.in);return h.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),h.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),h}return $r(o+a+l,e==null?void 0:e.in)}const K0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},lse=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,use=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,cse=/^([+-])(\d{2})(?::?(\d{2}))?$/;function dse(n){const e={},t=n.split(K0.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],K0.timeZoneDelimiter.test(e.date)&&(e.date=n.split(K0.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const i=K0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function hse(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:n.slice((r[1]||r[2]).length)}}function fse(n,e){if(e===null)return new Date(NaN);const t=n.match(lse);if(!t)return new Date(NaN);const r=!!t[4],i=bg(t[1]),s=bg(t[2])-1,o=bg(t[3]),a=bg(t[4]),l=bg(t[5])-1;if(r)return _se(e,a,l)?mse(e,a,l):new Date(NaN);{const u=new Date(0);return!yse(e,s,o)||!bse(e,i)?new Date(NaN):(u.setUTCFullYear(e,s,Math.max(i,o)),u)}}function bg(n){return n?parseInt(n):1}function pse(n){const e=n.match(use);if(!e)return NaN;const t=Bb(e[1]),r=Bb(e[2]),i=Bb(e[3]);return wse(t,r,i)?t*Um+r*$m+i*1e3:NaN}function Bb(n){return n&&parseFloat(n.replace(",","."))||0}function gse(n){if(n==="Z")return 0;const e=n.match(cse);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return xse(r,i)?t*(r*Um+i*$m):NaN}function mse(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const vse=[31,null,31,30,31,30,31,31,30,31,30,31];function UP(n){return n%400===0||n%4===0&&n%100!==0}function yse(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(vse[e]||(UP(n)?29:28))}function bse(n,e){return e>=1&&e<=(UP(n)?366:365)}function _se(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function wse(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function xse(n,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Lse={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};nP._date.override({_id:"date-fns",formats:function(){return Lse},parse:function(n,e){if(n===null||typeof n>"u")return null;const t=typeof n;return t==="number"||n instanceof Date?n=$r(n):t==="string"&&(typeof e=="string"?n=nse(n,e,new Date,this.options):n=ase(n,this.options)),EP(n)?n.getTime():null},format:function(n,e){return iie(n,e,this.options)},add:function(n,e,t){switch(t){case"millisecond":return yw(n,e);case"second":return qne(n,e);case"minute":return Gne(n,e);case"hour":return Une(n,e);case"day":return t1(n,e);case"week":return Yne(n,e);case"month":return vw(n,e);case"quarter":return Wne(n,e);case"year":return Kne(n,e);default:return n}},diff:function(n,e,t){switch(t){case"millisecond":return bw(n,e);case"second":return rre(n,e);case"minute":return ere(n,e);case"hour":return Qne(n,e);case"day":return MP(n,e);case"week":return ire(n,e);case"month":return AP(n,e);case"quarter":return nre(n,e);case"year":return sre(n,e);default:return 0}},startOf:function(n,e,t){switch(e){case"second":return ose(n);case"minute":return sse(n);case"hour":return ise(n);case"day":return i_(n);case"week":return od(n);case"isoWeek":return od(n,{weekStartsOn:+t});case"month":return are(n);case"quarter":return ore(n);case"year":return TP(n);default:return n}},endOf:function(n,e){switch(e){case"second":return fre(n);case"minute":return dre(n);case"hour":return ure(n);case"day":return PP(n);case"week":return cre(n);case"month":return kP(n);case"quarter":return hre(n);case"year":return lre(n);default:return n}}});const Cse={class:"container mx-auto px-4 py-8"},Sse={class:"mb-8"},Ese={key:0,class:"mb-6"},Mse={class:"flex gap-4"},Pse=["disabled"],kse={key:0,value:""},Ase=["value"],Tse={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},Dse={class:"flex"},Ose={class:"ml-3"},Nse={class:"text-sm font-medium text-red-800"},Ise={class:"mb-6"},Bse={class:"flex gap-4"},Rse=["disabled"],Fse={key:0,value:""},jse={key:1,value:""},zse=["value"],$se=["disabled"],Use={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},Vse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},Hse={class:"font-medium"},Gse={class:"font-medium"},Wse={class:"font-medium"},qse={class:"text-gray-500"},Yse={class:"font-medium"},Kse={class:"font-medium"},Zse={class:"font-medium"},Xse={class:"md:col-span-2 lg:col-span-3 flex items-center"},Jse=["href"],Qse={class:"mb-6"},eoe={class:"border-b border-gray-200"},toe={class:"-mb-px flex space-x-8","aria-label":"Tabs"},noe=["onClick"],roe={key:2,class:"mb-8"},ioe={class:"flex justify-between items-center mb-4"},soe={class:"text-sm text-gray-600"},ooe={key:0,class:"flex items-center"},aoe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},loe={class:"bg-white rounded-lg shadow-md p-6"},uoe={class:"text-4xl font-bold text-primary-600 mb-2"},coe={class:"text-sm text-gray-600"},doe={class:"bg-white rounded-lg shadow-md p-6"},hoe={class:"text-4xl font-bold text-primary-600 mb-2"},foe={class:"mt-4"},poe={class:"w-full bg-gray-200 rounded-full h-2.5"},goe={class:"bg-white rounded-lg shadow-md p-6"},moe={class:"text-4xl font-bold text-primary-600 mb-2"},voe={class:"text-sm text-gray-600"},yoe={class:"bg-white rounded-lg shadow-md p-6"},boe={class:"text-4xl font-bold text-primary-600 mb-2"},_oe={class:"text-sm text-gray-600"},woe={class:"bg-white rounded-lg shadow-md p-6"},xoe={class:"text-4xl font-bold text-primary-600 mb-2"},Loe={class:"text-sm text-gray-600"},Coe={class:"bg-white rounded-lg shadow-md p-6"},Soe={class:"text-4xl font-bold text-primary-600 mb-2"},Eoe={class:"text-sm text-gray-600"},Moe={key:3,class:"mb-8"},Poe={class:"flex justify-between items-center mb-4"},koe={class:"text-sm text-gray-600"},Aoe={class:"flex items-center"},Toe={key:0,class:"flex items-center mr-3"},Doe=["disabled"],Ooe={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Noe={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},Ioe=["value"],Boe={key:0,class:"mt-1 text-sm text-red-600"},Roe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Foe={class:"bg-white rounded-lg shadow-md p-6"},joe={class:"chart-container"},zoe={class:"bg-white rounded-lg shadow-md p-6"},$oe={class:"chart-container"},Uoe={class:"bg-white rounded-lg shadow-md p-6"},Voe={class:"chart-container"},Hoe={class:"bg-white rounded-lg shadow-md p-6"},Goe={class:"chart-container"},Woe={class:"bg-white rounded-lg shadow-md p-6"},qoe={class:"chart-container"},Yoe={class:"bg-white rounded-lg shadow-md p-6"},Koe={class:"chart-container"},Zoe=Ms({__name:"MeteoView",setup(n){const e=eu(),t=ro(),r=wt({}),i=wt(new Date),s=wt(""),o=wt([]),a=wt(""),l=wt([]),u=wt(null),h=wt(""),p=wt(""),v=wt(!1),m=Gn(()=>t.isAdmin);let C=null;const E=Gn(()=>!a.value||!o.value.length?null:o.value.find(oe=>oe.mac===a.value));function k(oe){return oe?oe.latitude&&oe.longitude&&oe.latitude!==0&&oe.longitude!==0:!1}function A(oe){return k(oe)?`${oe.latitude.toFixed(6)}, ${oe.longitude.toFixed(6)}`:""}function D(oe){if(!k(oe))return"#";const Z=oe.latitude,Ae=oe.longitude,je=encodeURIComponent(oe.name||"Station météo");return`https://www.google.com/maps/search/?api=1&query=${Z},${Ae}&query_place_id=${je}`}async function R(){try{h.value="";const oe={};m.value&&u.value&&(oe.entreprise=u.value),console.log("[fetchDevices] Appel API avec params:",oe);const Z=await q1.getDevices(oe);console.log("[fetchDevices] Réponse API:",Z.data);let Ae;if(Z.data&&Z.data.devices)Ae=Z.data.devices;else if(Array.isArray(Z.data))Ae=Z.data;else if(Ae=[],typeof Z.data=="object"&&Z.data!==null){for(const je in Z.data)if(Array.isArray(Z.data[je])){Ae=Z.data[je];break}}o.value=Ae.map(je=>{var Me,he;const Ke=je.mac||je.imei;return{id:je.id,name:je.name||`Station ${Ke}`,mac:Ke,model:((Me=je.stationtype)==null?void 0:Me.split("_")[0])||"Inconnu",firmware_version:(he=je.stationtype)!=null&&he.includes("_V")?je.stationtype.split("_V")[1]:"1.0",timezone:je.date_zone_id||"UTC",created_at:je.createtime?new Date(je.createtime*1e3).toISOString():new Date().toISOString(),latitude:je.latitude||0,longitude:je.longitude||0}}),console.log("[fetchDevices] Appareils normalisés:",o.value),o.value.length>0?a.value=o.value[0].mac:(console.warn("[fetchDevices] Aucun appareil disponible"),r.value={})}catch(oe){console.error("[fetchDevices] Erreur lors de la récupération des appareils:",oe),oe.response&&oe.response.data&&oe.response.data.error?h.value=oe.response.data.error:(h.value="Erreur lors de la récupération des stations météo",e.error("Erreur lors de la récupération des stations météo")),o.value=[],a.value="",r.value={}}}async function W(){try{if(!a.value){console.warn("[fetchWeatherData] Aucun appareil sélectionné");return}h.value="",v.value=!0;const oe={mac:a.value};m.value&&u.value&&(oe.entreprise=u.value),console.log("[fetchWeatherData] Appel API avec params:",oe);const Z=await q1.getRealTimeData(oe);console.log("[fetchWeatherData] Réponse API:",Z.data),console.log("[fetchWeatherData] Structure de la réponse:",{hasData:Z.data&&"data"in Z.data,hasCode:Z.data&&"code"in Z.data,topLevelKeys:Z.data?Object.keys(Z.data):[]});let Ae;Z.data&&"data"in Z.data?Ae=Z.data.data:Z.data&&("outdoor"in Z.data||"indoor"in Z.data)?Ae=Z.data:(Ae={},console.warn("[fetchWeatherData] Format de réponse non reconnu")),r.value=Ae,i.value=new Date,s.value=new Date().toLocaleString(),h.value=""}catch(oe){console.error("[fetchWeatherData] Erreur lors de la récupération des données météo:",oe),oe.response&&oe.response.data&&oe.response.data.error?h.value=oe.response.data.error:(h.value="Erreur lors de la récupération des données météo",e.error("Erreur lors de la récupération des données météo")),r.value={}}finally{v.value=!1}}function Q(oe){if(oe==null)return"0";const Z=typeof oe=="string"?parseFloat(oe):oe;return isNaN(Z)?"0":((Z-32)*5/9).toFixed(1)}function de(oe){if(oe==null)return"0";const Z=typeof oe=="string"?parseFloat(oe):oe;return isNaN(Z)?"0":(Z*1.60934).toFixed(1)}function fe(oe){if(oe==null)return"0";const Z=typeof oe=="string"?parseFloat(oe):oe;return isNaN(Z)?"0":(Z*25.4).toFixed(1)}function N(oe){if(oe==null)return"0";const Z=typeof oe=="string"?parseFloat(oe):oe;return isNaN(Z)?"0":(Z*33.8639).toFixed(1)}function z(oe){if(!oe)return"N/A";const Z=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],Ae=Math.round(oe/22.5)%16;return Z[Ae]}function J(oe){return oe?oe>0?"En hausse":"En baisse":"Stable"}async function U(){if(m.value)try{const oe=await Xa.getUsers({role:"ENTREPRISE"});l.value=oe.data,l.value.length>0&&!u.value&&(u.value=l.value[0].id)}catch(oe){console.error("Erreur lors de la récupération des entreprises:",oe),e.error("Erreur lors de la récupération des entreprises")}}async function B(){try{o.value=[],a.value="",r.value={},h.value="",Object.values(re).forEach(oe=>{try{oe.destroy()}catch(Z){console.error("Erreur lors de la destruction d'un graphique:",Z)}}),re={},await R()}catch(oe){console.error("Erreur lors de la récupération des appareils avec l'entreprise:",oe),e.error("Erreur lors du changement d'entreprise")}}const G=[{id:"realtime",name:"Temps réel"},{id:"history",name:"Historique"}],$=wt("realtime"),F=wt("today"),I=wt("5min"),X=wt(""),K=wt(""),ve=()=>{const oe=new Date,Z=new Date(oe);Z.setDate(oe.getDate()-1),X.value=Z.toISOString().split("T")[0],K.value=Z.toISOString().split("T")[0]},ge=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],He=Gn(()=>{const oe=ae(),Z=new Date(oe.start),Ae=new Date(oe.end);Ae.setHours(23,59,59,999);const je=Math.abs(Ae.getTime()-Z.getTime()),Ke=Math.ceil(je/(1e3*60*60*24)),he=Math.abs(new Date().getTime()-Z.getTime()),We=Math.ceil(he/(1e3*60*60*24));return ge.filter(at=>Ke<=at.maxDays&&We<=at.maxPastDays)});ai(F,oe=>{oe==="custom"&&ve(),!He.value.some(Ae=>Ae.value===I.value)&&He.value.length>0&&(I.value=He.value[0].value)}),ai([X,K],()=>{F.value==="custom"&&!He.value.some(Z=>Z.value===I.value)&&He.value.length>0&&(I.value=He.value[0].value)});const ie=wt(null),Ce=wt(null),_e=wt(null),H=wt(null),ee=wt(null),pe=wt(null);let re={};const ae=()=>{let oe=new Date,Z=new Date;switch(F.value){case"today":oe.setHours(0,0,0,0);break;case"yesterday":oe.setDate(oe.getDate()-1),oe.setHours(0,0,0,0),Z.setDate(Z.getDate()-1),Z.setHours(23,59,59,999);break;case"week":oe.setDate(oe.getDate()-7);break;case"month":oe.setDate(oe.getDate()-30);break;case"custom":oe=new Date(X.value),Z=new Date(K.value);break}return{start:oe.toISOString().split("T")[0],end:Z.toISOString().split("T")[0]}},De=async()=>{try{if(be.value){console.log("[updateAllCharts] Mise à jour déjà en cours, annulation");return}if(be.value=!0,He.value.length===0){e.warning("Aucun intervalle disponible pour cette période"),be.value=!1;return}He.value.some(je=>je.value===I.value)||(I.value=He.value[0].value),console.log("[updateAllCharts] Début de la mise à jour des graphiques");const Z=ae(),Ae={mac:a.value,start_date:Z.start,end_date:Z.end,cycle_type:I.value};m.value&&u.value&&(Ae.entreprise=u.value),console.log("[updateAllCharts] Récupération des données historiques:",Ae);try{const Ke=(await q1.getHistoryData(Ae)).data;console.log("[updateAllCharts] Données historiques reçues:",Ke);const Me=[{type:"temp",ref:ie},{type:"humidity",ref:Ce},{type:"pressure",ref:_e},{type:"wind",ref:H},{type:"rain",ref:ee},{type:"solar",ref:pe}];for(const he of Me)if(console.log(`[updateAllCharts] Mise à jour du graphique ${he.type}`),he.ref.value){const We=me(Ke,he.type);Ie(he.type,he.ref.value,We)}s.value=new Date().toLocaleString()}catch(je){console.error("[updateAllCharts] Erreur lors de la récupération des données:",je),e.error("Erreur lors de la récupération des données historiques")}finally{be.value=!1}}catch(oe){console.error("[updateAllCharts] Erreur lors de la mise à jour des graphiques:",oe),e.error("Erreur lors de la mise à jour des graphiques"),be.value=!1}},be=wt(!1),Ie=(oe,Z,Ae)=>{try{if(re[oe]&&(re[oe].destroy(),delete re[oe]),console.log(`[updateChart] Données reçues pour ${oe}:`,Ae),!Ae.datasets||!Ae.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${oe}`),re[oe]=new Kc(Z,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donnée disponible"}}}});return}let je="hour";I.value==="5min"||I.value==="30min"?je="hour":(I.value==="4hour"||I.value==="1day")&&(je="day");const Ke=ae(),Me=new Date(Ke.start),he=new Date(Ke.end);he.setHours(23,59,59,999);const We={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(at){return at.length>0?new Date(at[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:je,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:Me.getTime(),max:he.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:le(oe)},ticks:{callback:function(at){const ut=typeof at=="string"?parseFloat(at):at;switch(oe){case"temp":return ut.toFixed(1)+"°C";case"humidity":return ut.toFixed(0)+"%";case"pressure":return ut.toFixed(0)+" hPa";case"wind":case"rain":return ut.toFixed(1)+(oe==="wind"?" km/h":" mm");case"solar":return ut.toFixed(0)+" W/m²";default:return ut}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};re[oe]=new Kc(Z,{type:"line",data:{datasets:Ae.datasets||[]},options:We}),console.log(`[updateChart] Graphique ${oe} créé avec ${Ae.datasets.length} datasets`)}catch(je){console.error(`[updateChart] Erreur lors de la mise à jour du graphique ${oe}:`,je)}},le=oe=>{switch(oe){case"temp":return"Température (°C)";case"humidity":return"Humidité (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Précipitations (mm)";case"solar":return"Rayonnement (W/m²)";default:return""}},me=(oe,Z)=>{var Me,he,We,at,ut,Ct,Xe,zt,qt,Qe,ot,it,At,Yt,bn,xn,En,$n,Sn;if(console.log(`[formatHistoryDataForChart] Données reçues pour ${Z}:`,oe),!oe)return console.warn(`[formatHistoryDataForChart] Pas de données pour ${Z}`),null;let Ae;if("data"in oe)Ae=oe.data;else if(Z in oe)Ae=oe;else return console.warn(`[formatHistoryDataForChart] Structure de données non reconnue pour ${Z}`),null;console.log(`[formatHistoryDataForChart] Données extraites pour ${Z}:`,Ae);const je=[],Ke=(an,mn,tr,ar)=>{if(!Array.isArray(an)){console.warn(`[formatHistoryDataForChart] Les données pour ${mn} ne sont pas un tableau`);return}const mr=an.map(zn=>{const kr=parseFloat(String(zn.value));return{x:zn.time,y:ar?ar(kr):kr}}).filter(zn=>!isNaN(zn.y));mr.length>0&&je.push({label:mn,data:mr,borderColor:tr,fill:!1,tension:.4})};switch(Z){case"temp":(he=(Me=Ae.outdoor)==null?void 0:Me.temperature)!=null&&he.list?Ke(Object.entries(Ae.outdoor.temperature.list).map(([an,mn])=>({time:parseInt(an)*1e3,value:mn})),"Température","#FF6384",an=>(an-32)*5/9):(We=Ae.outdoor)!=null&&We.temperature&&Ke(Ae.outdoor.temperature,"Température","#FF6384",an=>(an-32)*5/9);break;case"humidity":(ut=(at=Ae.outdoor)==null?void 0:at.humidity)!=null&&ut.list?Ke(Object.entries(Ae.outdoor.humidity.list).map(([an,mn])=>({time:parseInt(an)*1e3,value:mn})),"Humidité","#36A2EB"):(Ct=Ae.outdoor)!=null&&Ct.humidity&&Ke(Ae.outdoor.humidity,"Humidité","#36A2EB");break;case"pressure":(zt=(Xe=Ae.pressure)==null?void 0:Xe.absolute)!=null&&zt.list?Ke(Object.entries(Ae.pressure.absolute.list).map(([an,mn])=>({time:parseInt(an)*1e3,value:mn})),"Pression","#4BC0C0",an=>an*33.8639):(qt=Ae.pressure)!=null&&qt.absolute&&Ke(Ae.pressure.absolute,"Pression","#4BC0C0",an=>an*33.8639);break;case"wind":(ot=(Qe=Ae.wind)==null?void 0:Qe.wind_speed)!=null&&ot.list?(Ke(Object.entries(Ae.wind.wind_speed.list).map(([an,mn])=>({time:parseInt(an)*1e3,value:mn})),"Vitesse du vent","#FFCE56",an=>an*1.60934),(it=Ae.wind.wind_gust)!=null&&it.list&&Ke(Object.entries(Ae.wind.wind_gust.list).map(([an,mn])=>({time:parseInt(an)*1e3,value:mn})),"Rafales","#FF9F40",an=>an*1.60934)):(At=Ae.wind)!=null&&At.wind_speed&&(Ke(Ae.wind.wind_speed,"Vitesse du vent","#FFCE56",an=>an*1.60934),Ae.wind.wind_gust&&Ke(Ae.wind.wind_gust,"Rafales","#FF9F40",an=>an*1.60934));break;case"rain":(bn=(Yt=Ae.rainfall)==null?void 0:Yt.daily)!=null&&bn.list?Ke(Object.entries(Ae.rainfall.daily.list).map(([an,mn])=>({time:parseInt(an)*1e3,value:mn})),"Précipitations journalières","#9966FF",an=>an*25.4):(xn=Ae.rainfall)!=null&&xn.daily&&Ke(Ae.rainfall.daily,"Précipitations journalières","#9966FF",an=>an*25.4);break;case"solar":($n=(En=Ae.solar_and_uvi)==null?void 0:En.solar)!=null&&$n.list?Ke(Object.entries(Ae.solar_and_uvi.solar.list).map(([an,mn])=>({time:parseInt(an)*1e3,value:mn})),"Rayonnement solaire","#FF9F40"):(Sn=Ae.solar_and_uvi)!=null&&Sn.solar&&Ke(Ae.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return console.log(`[formatHistoryDataForChart] Datasets générés pour ${Z}:`,je),{datasets:je}};return Jl(()=>{Object.values(re).forEach(oe=>oe.destroy())}),ai([F,I,X,K],()=>{$.value==="history"&&a.value&&De()}),Ss(async()=>{const oe=[];m.value&&oe.push(U()),await Promise.all(oe),await R(),C=window.setInterval(W,5*60*1e3)}),ai(u,async oe=>{m.value&&(console.log("[watch selectedCompany] Nouvelle entreprise sélectionnée:",oe),await R())}),ai(a,oe=>{oe?(console.log("[watch selectedDevice] Nouvelle station sélectionnée:",oe),W(),$.value==="history"&&De()):(console.log("[watch selectedDevice] Aucune station sélectionnée"),r.value={})}),ai($,oe=>{oe==="history"&&a.value&&De()}),Jl(()=>{C&&clearInterval(C)}),(oe,Z)=>{var Ae,je,Ke,Me,he,We,at,ut,Ct,Xe,zt,qt,Qe,ot,it,At,Yt,bn,xn,En,$n,Sn,an,mn,tr,ar,mr,zn,kr,as,Ni,io,Ps,Zn,bt,rt,Vt,Ln,Kt;return Ne(),Re("div",Cse,[x("div",Sse,[Z[38]||(Z[38]=x("h1",{class:"text-3xl font-bold mb-4"},"Météo",-1)),m.value?(Ne(),Re("div",Ese,[Z[6]||(Z[6]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une entreprise ",-1)),x("div",Mse,[Pn(x("select",{"onUpdate:modelValue":Z[0]||(Z[0]=rn=>u.value=rn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:B},[l.value.length?Jt("",!0):(Ne(),Re("option",kse,"Chargement des entreprises...")),(Ne(!0),Re(wn,null,Wn(l.value,rn=>(Ne(),Re("option",{key:rn.id,value:rn.id},kt(rn.company_name||`${rn.first_name} ${rn.last_name}`),9,Ase))),128))],40,Pse),[[Oi,u.value]])])])):Jt("",!0),h.value?(Ne(),Re("div",Tse,[x("div",Dse,[Z[7]||(Z[7]=x("div",{class:"flex-shrink-0"},[x("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),x("div",Ose,[x("h3",Nse,kt(h.value),1)])])])):Jt("",!0),x("div",Ise,[Z[16]||(Z[16]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une station ",-1)),x("div",Bse,[Pn(x("select",{"onUpdate:modelValue":Z[1]||(Z[1]=rn=>a.value=rn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||h.value)},[!o.value.length&&!h.value?(Ne(),Re("option",Fse,"Chargement des stations...")):Jt("",!0),h.value?(Ne(),Re("option",jse,"Aucune station disponible")):Jt("",!0),(Ne(!0),Re(wn,null,Wn(o.value,rn=>(Ne(),Re("option",{key:rn.mac,value:rn.mac},kt(rn.name)+" ("+kt(rn.model)+" - v"+kt(rn.firmware_version)+") ",9,zse))),128))],8,Rse),[[Oi,a.value]]),x("button",{onClick:W,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||h.value)}," Actualiser ",8,$se)]),E.value?(Ne(),Re("div",Use,[Z[15]||(Z[15]=x("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),x("div",Vse,[x("div",null,[Z[8]||(Z[8]=x("span",{class:"text-gray-500"},"Modèle:",-1)),x("p",Hse,kt(E.value.model),1)]),x("div",null,[Z[9]||(Z[9]=x("span",{class:"text-gray-500"},"Version:",-1)),x("p",Gse,kt(E.value.firmware_version),1)]),x("div",null,[Z[10]||(Z[10]=x("span",{class:"text-gray-500"},"ID:",-1)),x("p",Wse,kt(E.value.id),1)]),x("div",null,[x("span",qse,kt((Ae=E.value.mac)!=null&&Ae.includes(":")?"MAC:":"IMEI:"),1),x("p",Yse,kt(E.value.mac),1)]),x("div",null,[Z[11]||(Z[11]=x("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),x("p",Kse,kt(E.value.timezone),1)]),x("div",null,[Z[12]||(Z[12]=x("span",{class:"text-gray-500"},"Installation:",-1)),x("p",Zse,kt(new Date(E.value.created_at).toLocaleDateString()),1)]),x("div",Xse,[Z[14]||(Z[14]=x("span",{class:"text-gray-500 mr-2"},"Position:",-1)),k(E.value)?(Ne(),Re("a",{key:0,href:D(E.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[Z[13]||(Z[13]=x("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[x("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),qr(" "+kt(A(E.value)),1)],8,Jse)):Jt("",!0)])])])):Jt("",!0)]),x("div",Qse,[x("div",eoe,[x("nav",toe,[(Ne(),Re(wn,null,Wn(G,rn=>x("button",{key:rn.id,onClick:Zt=>$.value=rn.id,class:xi([$.value===rn.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},kt(rn.name),11,noe)),64))])])]),$.value==="realtime"?(Ne(),Re("div",roe,[x("div",ioe,[x("p",soe," Dernière mise à jour : "+kt(i.value?new Date(i.value).toLocaleString():"Jamais"),1),v.value?(Ne(),Re("div",ooe,Z[17]||(Z[17]=[x("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x("span",{class:"text-primary-600"},"Chargement des données...",-1)]))):Jt("",!0)]),x("div",aoe,[x("div",loe,[Z[18]||(Z[18]=x("h2",{class:"text-xl font-semibold mb-4"},"Température Extérieure",-1)),x("div",uoe,kt(Q((Ke=(je=r.value.outdoor)==null?void 0:je.temperature)==null?void 0:Ke.value))+"°C ",1),x("div",coe," Min: "+kt(Q(((he=(Me=r.value.outdoor)==null?void 0:Me.temperature)==null?void 0:he.min)||"0"))+"°C Max: "+kt(Q(((at=(We=r.value.outdoor)==null?void 0:We.temperature)==null?void 0:at.max)||"0"))+"°C ",1)]),x("div",doe,[Z[19]||(Z[19]=x("h2",{class:"text-xl font-semibold mb-4"},"Humidité",-1)),x("div",hoe,kt(((Ct=(ut=r.value.outdoor)==null?void 0:ut.humidity)==null?void 0:Ct.value)||"0")+"% ",1),x("div",foe,[x("div",poe,[x("div",{class:"bg-primary-600 h-2.5 rounded-full",style:Xl({width:`${((zt=(Xe=r.value.outdoor)==null?void 0:Xe.humidity)==null?void 0:zt.value)||0}%`})},null,4)])])]),x("div",goe,[Z[20]||(Z[20]=x("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphérique",-1)),x("div",moe,kt(N((Qe=(qt=r.value.pressure)==null?void 0:qt.absolute)==null?void 0:Qe.value))+" hPa ",1),x("div",voe," Tendance: "+kt(J((it=(ot=r.value.pressure)==null?void 0:ot.absolute)==null?void 0:it.trend)),1)]),x("div",yoe,[Z[22]||(Z[22]=x("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),x("div",boe,kt(de(((Yt=(At=r.value.wind)==null?void 0:At.speed)==null?void 0:Yt.value)||((xn=(bn=r.value.wind)==null?void 0:bn.wind_speed)==null?void 0:xn.value)))+" km/h ",1),x("div",_oe,[qr(" Direction: "+kt(z((($n=(En=r.value.wind)==null?void 0:En.direction)==null?void 0:$n.value)||((an=(Sn=r.value.wind)==null?void 0:Sn.wind_direction)==null?void 0:an.value)))+" ",1),Z[21]||(Z[21]=x("br",null,null,-1)),qr(" Rafales: "+kt(de(((tr=(mn=r.value.wind)==null?void 0:mn.gust)==null?void 0:tr.value)||((mr=(ar=r.value.wind)==null?void 0:ar.wind_gust)==null?void 0:mr.value)))+" km/h ",1)])]),x("div",woe,[Z[24]||(Z[24]=x("h2",{class:"text-xl font-semibold mb-4"},"Précipitations",-1)),x("div",xoe,kt(fe((kr=(zn=r.value.rainfall)==null?void 0:zn.daily)==null?void 0:kr.value))+" mm ",1),x("div",Loe,[qr(" Taux: "+kt(fe(((Ni=(as=r.value.rainfall)==null?void 0:as.rate)==null?void 0:Ni.value)||((Ps=(io=r.value.rainfall)==null?void 0:io.rain_rate)==null?void 0:Ps.value)))+" mm/h ",1),Z[23]||(Z[23]=x("br",null,null,-1)),qr(" Mensuel: "+kt(fe((bt=(Zn=r.value.rainfall)==null?void 0:Zn.monthly)==null?void 0:bt.value))+" mm ",1)])]),x("div",Coe,[Z[25]||(Z[25]=x("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),x("div",Soe,kt(((Vt=(rt=r.value.solar_and_uvi)==null?void 0:rt.solar)==null?void 0:Vt.value)||"0")+" W/m² ",1),x("div",Eoe," UV: "+kt(((Kt=(Ln=r.value.solar_and_uvi)==null?void 0:Ln.uvi)==null?void 0:Kt.value)||"0"),1)])])])):$.value==="history"?(Ne(),Re("div",Moe,[x("div",Poe,[x("p",koe," Dernière mise à jour : "+kt(s.value?s.value:"Jamais"),1),x("div",Aoe,[be.value?(Ne(),Re("div",Toe,Z[26]||(Z[26]=[x("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[x("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),x("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x("span",{class:"text-sm text-primary-600"},"Chargement des données...",-1)]))):Jt("",!0),x("button",{onClick:De,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value||be.value}," Actualiser ",8,Doe)])]),x("div",Ooe,[x("div",null,[Z[28]||(Z[28]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Période ",-1)),Pn(x("select",{"onUpdate:modelValue":Z[2]||(Z[2]=rn=>F.value=rn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},Z[27]||(Z[27]=[Kl('<option value="today" data-v-9aa5288e>Aujourd&#39;hui</option><option value="yesterday" data-v-9aa5288e>Hier</option><option value="week" data-v-9aa5288e>7 derniers jours</option><option value="month" data-v-9aa5288e>30 derniers jours</option><option value="custom" data-v-9aa5288e>Période personnalisée</option>',5)]),512),[[Oi,F.value]])]),F.value==="custom"?(Ne(),Re("div",Noe,[x("div",null,[Z[29]||(Z[29]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de début ",-1)),Pn(x("input",{type:"date","onUpdate:modelValue":Z[3]||(Z[3]=rn=>X.value=rn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Ar,X.value]])]),x("div",null,[Z[30]||(Z[30]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),Pn(x("input",{type:"date","onUpdate:modelValue":Z[4]||(Z[4]=rn=>K.value=rn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Ar,K.value]])])])):Jt("",!0),x("div",null,[Z[31]||(Z[31]=x("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),Pn(x("select",{"onUpdate:modelValue":Z[5]||(Z[5]=rn=>I.value=rn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Ne(!0),Re(wn,null,Wn(He.value,rn=>(Ne(),Re("option",{key:rn.value,value:rn.value},kt(rn.label),9,Ioe))),128))],512),[[Oi,I.value]]),p.value?(Ne(),Re("div",Boe,kt(p.value),1)):Jt("",!0)])]),x("div",Roe,[x("div",Foe,[Z[32]||(Z[32]=x("h3",{class:"text-lg font-semibold mb-4"},"Température",-1)),x("div",joe,[x("canvas",{ref_key:"tempChart",ref:ie},null,512)])]),x("div",zoe,[Z[33]||(Z[33]=x("h3",{class:"text-lg font-semibold mb-4"},"Humidité",-1)),x("div",$oe,[x("canvas",{ref_key:"humidityChart",ref:Ce},null,512)])]),x("div",Uoe,[Z[34]||(Z[34]=x("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),x("div",Voe,[x("canvas",{ref_key:"pressureChart",ref:_e},null,512)])]),x("div",Hoe,[Z[35]||(Z[35]=x("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),x("div",Goe,[x("canvas",{ref_key:"windChart",ref:H},null,512)])]),x("div",Woe,[Z[36]||(Z[36]=x("h3",{class:"text-lg font-semibold mb-4"},"Précipitations",-1)),x("div",qoe,[x("canvas",{ref_key:"rainChart",ref:ee},null,512)])]),x("div",Yoe,[Z[37]||(Z[37]=x("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),x("div",Koe,[x("canvas",{ref_key:"solarChart",ref:pe},null,512)])])])])):Jt("",!0)])])}}}),Xoe=ad(Zoe,[["__scopeId","data-v-9aa5288e"]]),VP=rR({history:NB("/"),routes:[{path:"/",name:"home",component:G5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/meteo",name:"meteo",component:Xoe,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:uZ,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:NY,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Od(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:Uj,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Od(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Od(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:cj,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:IX,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:G5,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Od(()=>import("./NotFoundView.js"),[])}]});VP.beforeEach(async(n,e,t)=>{var a,l;const r=ro();if(console.log("Route:",n.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(u){console.error("Error initializing auth store:",u)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(n.meta.requiresAuth&&!i){t("/login");return}if(i&&s&&n.name!=="changePassword"){t({name:"changePassword"});return}if(n.name==="changePassword"&&!s){t({name:"home"});return}if(n.meta.allowedRoles&&o&&!n.meta.allowedRoles.includes(o)){t({name:"home"});return}if(n.meta.requiresGuest&&i){t({name:"home"});return}t()});function Joe(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=n;let a,l;const u=async(p=!0)=>{await l};async function h(){if("serviceWorker"in navigator){if(a=await Od(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=h(),u}const Lw=zv(U9),HP=dI();Lw.use(HP);Lw.use(VP);const Qoe=ro(HP);window.INITIAL_STATE&&Qoe.initialize(window.INITIAL_STATE);Lw.mount("#app");Joe({immediate:!0,onRegistered(n){n&&console.log("SW enregistré:",n)},onRegisterError(n){console.error("Erreur d'enregistrement du SW:",n)},onOfflineReady(){console.log("L'application est prête à être utilisée hors ligne")}});export{Yi as _,tu as a,x as b,Re as c,Ms as d,Jt as e,yn as f,qr as g,Pn as h,Ne as i,Kl as j,ni as k,Gu as l,EC as m,xi as n,Ss as o,sR as p,Bm as q,wt as r,ga as s,kt as t,ro as u,Ar as v,Zl as w,$_ as x};

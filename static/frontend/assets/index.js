var IT=Object.defineProperty;var NT=(t,e,n)=>e in t?IT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var nt=(t,e,n)=>NT(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Dv(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const pi={},Gd=[],Mu=()=>{},BT=()=>!1,rm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),mb=t=>t.startsWith("onUpdate:"),Wi=Object.assign,vb=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},RT=Object.prototype.hasOwnProperty,Si=(t,e)=>RT.call(t,e),qn=Array.isArray,qd=t=>pp(t)==="[object Map]",nd=t=>pp(t)==="[object Set]",qw=t=>pp(t)==="[object Date]",FT=t=>pp(t)==="[object RegExp]",yr=t=>typeof t=="function",ts=t=>typeof t=="string",ac=t=>typeof t=="symbol",Bi=t=>t!==null&&typeof t=="object",yb=t=>(Bi(t)||yr(t))&&yr(t.then)&&yr(t.catch),j3=Object.prototype.toString,pp=t=>j3.call(t),jT=t=>pp(t).slice(8,-1),Iv=t=>pp(t)==="[object Object]",bb=t=>ts(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Yd=Dv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Nv=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},zT=/-(\w)/g,ha=Nv(t=>t.replace(zT,(e,n)=>n?n.toUpperCase():"")),UT=/\B([A-Z])/g,Dl=Nv(t=>t.replace(UT,"-$1").toLowerCase()),im=Nv(t=>t.charAt(0).toUpperCase()+t.slice(1)),ag=Nv(t=>t?`on${im(t)}`:""),sl=(t,e)=>!Object.is(t,e),Zd=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},z3=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},K0=t=>{const e=parseFloat(t);return isNaN(e)?t:e},X0=t=>{const e=ts(t)?Number(t):NaN;return isNaN(e)?t:e};let Yw;const Bv=()=>Yw||(Yw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),$T="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",VT=Dv($T);function Rl(t){if(qn(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=ts(r)?qT(r):Rl(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(ts(t)||Bi(t))return t}const HT=/;(?![^(]*\))/g,WT=/:([^]+)/,GT=/\/\*[^]*?\*\//g;function qT(t){const e={};return t.replace(GT,"").split(HT).forEach(n=>{if(n){const r=n.split(WT);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ei(t){let e="";if(ts(t))e=t;else if(qn(t))for(let n=0;n<t.length;n++){const r=Ei(t[n]);r&&(e+=r+" ")}else if(Bi(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function YT(t){if(!t)return null;let{class:e,style:n}=t;return e&&!ts(e)&&(t.class=Ei(e)),n&&(t.style=Rl(n)),t}const ZT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",KT=Dv(ZT);function U3(t){return!!t||t===""}function XT(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=nf(t[r],e[r]);return n}function nf(t,e){if(t===e)return!0;let n=qw(t),r=qw(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=ac(t),r=ac(e),n||r)return t===e;if(n=qn(t),r=qn(e),n||r)return n&&r?XT(t,e):!1;if(n=Bi(t),r=Bi(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!nf(t[o],e[o]))return!1}}return String(t)===String(e)}function Rv(t,e){return t.findIndex(n=>nf(n,e))}const $3=t=>!!(t&&t.__v_isRef===!0),Ut=t=>ts(t)?t:t==null?"":qn(t)||Bi(t)&&(t.toString===j3||!yr(t.toString))?$3(t)?Ut(t.value):JSON.stringify(t,V3,2):String(t),V3=(t,e)=>$3(e)?V3(t,e.value):qd(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[Zy(r,s)+" =>"]=i,n),{})}:nd(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Zy(n))}:ac(e)?Zy(e):Bi(e)&&!qn(e)&&!Iv(e)?String(e):e,Zy=(t,e="")=>{var n;return ac(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let il;class _b{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=il,!e&&il&&(this.index=(il.scopes||(il.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=il;try{return il=this,e()}finally{il=n}}}on(){il=this}off(){il=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function wb(t){return new _b(t)}function xb(){return il}function H3(t,e=!1){il&&il.cleanups.push(t)}let Ji;const Ky=new WeakSet;class Tg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,il&&il.active&&il.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ky.has(this)&&(Ky.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||G3(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zw(this),q3(this);const e=Ji,n=sc;Ji=this,sc=!0;try{return this.fn()}finally{Y3(this),Ji=e,sc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Sb(e);this.deps=this.depsTail=void 0,Zw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ky.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Q1(this)&&this.run()}get dirty(){return Q1(this)}}let W3=0,lg,ug;function G3(t,e=!1){if(t.flags|=8,e){t.next=ug,ug=t;return}t.next=lg,lg=t}function Lb(){W3++}function Cb(){if(--W3>0)return;if(ug){let e=ug;for(ug=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;lg;){let e=lg;for(lg=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function q3(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Y3(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Sb(r),JT(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Q1(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Z3(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Z3(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Og))return;t.globalVersion=Og;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!Q1(t)){t.flags&=-3;return}const n=Ji,r=sc;Ji=t,sc=!0;try{q3(t);const i=t.fn(t._value);(e.version===0||sl(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ji=n,sc=r,Y3(t),t.flags&=-3}}function Sb(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Sb(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function JT(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function QT(t,e){t.effect instanceof Tg&&(t=t.effect.fn);const n=new Tg(t);e&&Wi(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function e8(t){t.effect.stop()}let sc=!0;const K3=[];function cf(){K3.push(sc),sc=!1}function hf(){const t=K3.pop();sc=t===void 0?!0:t}function Zw(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ji;Ji=void 0;try{e()}finally{Ji=n}}}let Og=0;class t8{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Fv{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ji||!sc||Ji===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ji)n=this.activeLink=new t8(Ji,this),Ji.deps?(n.prevDep=Ji.depsTail,Ji.depsTail.nextDep=n,Ji.depsTail=n):Ji.deps=Ji.depsTail=n,X3(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ji.depsTail,n.nextDep=void 0,Ji.depsTail.nextDep=n,Ji.depsTail=n,Ji.deps===n&&(Ji.deps=r)}return n}trigger(e){this.version++,Og++,this.notify(e)}notify(e){Lb();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Cb()}}}function X3(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)X3(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const J0=new WeakMap,$f=Symbol(""),e2=Symbol(""),Dg=Symbol("");function Da(t,e,n){if(sc&&Ji){let r=J0.get(t);r||J0.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new Fv),i.map=r,i.key=n),i.track()}}function fh(t,e,n,r,i,s){const o=J0.get(t);if(!o){Og++;return}const a=l=>{l&&l.trigger()};if(Lb(),e==="clear")o.forEach(a);else{const l=qn(t),c=l&&bb(n);if(l&&n==="length"){const f=Number(r);o.forEach((p,y)=>{(y==="length"||y===Dg||!ac(y)&&y>=f)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Dg)),e){case"add":l?c&&a(o.get("length")):(a(o.get($f)),qd(t)&&a(o.get(e2)));break;case"delete":l||(a(o.get($f)),qd(t)&&a(o.get(e2)));break;case"set":qd(t)&&a(o.get($f));break}}Cb()}function n8(t,e){const n=J0.get(t);return n&&n.get(e)}function Cd(t){const e=fi(t);return e===t?e:(Da(e,"iterate",Dg),ou(t)?e:e.map(Ia))}function jv(t){return Da(t=fi(t),"iterate",Dg),t}const r8={__proto__:null,[Symbol.iterator](){return Xy(this,Symbol.iterator,Ia)},concat(...t){return Cd(this).concat(...t.map(e=>qn(e)?Cd(e):e))},entries(){return Xy(this,"entries",t=>(t[1]=Ia(t[1]),t))},every(t,e){return ih(this,"every",t,e,void 0,arguments)},filter(t,e){return ih(this,"filter",t,e,n=>n.map(Ia),arguments)},find(t,e){return ih(this,"find",t,e,Ia,arguments)},findIndex(t,e){return ih(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ih(this,"findLast",t,e,Ia,arguments)},findLastIndex(t,e){return ih(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ih(this,"forEach",t,e,void 0,arguments)},includes(...t){return Jy(this,"includes",t)},indexOf(...t){return Jy(this,"indexOf",t)},join(t){return Cd(this).join(t)},lastIndexOf(...t){return Jy(this,"lastIndexOf",t)},map(t,e){return ih(this,"map",t,e,void 0,arguments)},pop(){return Pp(this,"pop")},push(...t){return Pp(this,"push",t)},reduce(t,...e){return Kw(this,"reduce",t,e)},reduceRight(t,...e){return Kw(this,"reduceRight",t,e)},shift(){return Pp(this,"shift")},some(t,e){return ih(this,"some",t,e,void 0,arguments)},splice(...t){return Pp(this,"splice",t)},toReversed(){return Cd(this).toReversed()},toSorted(t){return Cd(this).toSorted(t)},toSpliced(...t){return Cd(this).toSpliced(...t)},unshift(...t){return Pp(this,"unshift",t)},values(){return Xy(this,"values",Ia)}};function Xy(t,e,n){const r=jv(t),i=r[e]();return r!==t&&!ou(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const i8=Array.prototype;function ih(t,e,n,r,i,s){const o=jv(t),a=o!==t&&!ou(t),l=o[e];if(l!==i8[e]){const p=l.apply(t,s);return a?Ia(p):p}let c=n;o!==t&&(a?c=function(p,y){return n.call(this,Ia(p),y,t)}:n.length>2&&(c=function(p,y){return n.call(this,p,y,t)}));const f=l.call(o,c,r);return a&&i?i(f):f}function Kw(t,e,n,r){const i=jv(t);let s=n;return i!==t&&(ou(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,Ia(a),l,t)}),i[e](s,...r)}function Jy(t,e,n){const r=fi(t);Da(r,"iterate",Dg);const i=r[e](...n);return(i===-1||i===!1)&&$v(n[0])?(n[0]=fi(n[0]),r[e](...n)):i}function Pp(t,e,n=[]){cf(),Lb();const r=fi(t)[e].apply(t,n);return Cb(),hf(),r}const s8=Dv("__proto__,__v_isRef,__isVue"),J3=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ac));function o8(t){ac(t)||(t=String(t));const e=fi(this);return Da(e,"has",t),e.hasOwnProperty(t)}class Q3{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?sL:iL:s?rL:nL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=qn(e);if(!i){let l;if(o&&(l=r8[n]))return l;if(n==="hasOwnProperty")return o8}const a=Reflect.get(e,n,Rs(e)?e:r);return(ac(n)?J3.has(n):s8(n))||(i||Da(e,"get",n),s)?a:Rs(a)?o&&bb(n)?a:a.value:Bi(a)?i?Pb(a):cu(a):a}}class eL extends Q3{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=rf(s);if(!ou(r)&&!rf(r)&&(s=fi(s),r=fi(r)),!qn(e)&&Rs(s)&&!Rs(r))return l?!1:(s.value=r,!0)}const o=qn(e)&&bb(n)?Number(n)<e.length:Si(e,n),a=Reflect.set(e,n,r,Rs(e)?e:i);return e===fi(i)&&(o?sl(r,s)&&fh(e,"set",n,r):fh(e,"add",n,r)),a}deleteProperty(e,n){const r=Si(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&fh(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!ac(n)||!J3.has(n))&&Da(e,"has",n),r}ownKeys(e){return Da(e,"iterate",qn(e)?"length":$f),Reflect.ownKeys(e)}}class tL extends Q3{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const a8=new eL,l8=new tL,u8=new eL(!0),c8=new tL(!0),t2=t=>t,Fm=t=>Reflect.getPrototypeOf(t);function h8(t,e,n){return function(...r){const i=this.__v_raw,s=fi(i),o=qd(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),f=n?t2:e?n2:Ia;return!e&&Da(s,"iterate",l?e2:$f),{next(){const{value:p,done:y}=c.next();return y?{value:p,done:y}:{value:a?[f(p[0]),f(p[1])]:f(p),done:y}},[Symbol.iterator](){return this}}}}function jm(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function f8(t,e){const n={get(i){const s=this.__v_raw,o=fi(s),a=fi(i);t||(sl(i,a)&&Da(o,"get",i),Da(o,"get",a));const{has:l}=Fm(o),c=e?t2:t?n2:Ia;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Da(fi(i),"iterate",$f),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=fi(s),a=fi(i);return t||(sl(i,a)&&Da(o,"has",i),Da(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=fi(a),c=e?t2:t?n2:Ia;return!t&&Da(l,"iterate",$f),a.forEach((f,p)=>i.call(s,c(f),c(p),o))}};return Wi(n,t?{add:jm("add"),set:jm("set"),delete:jm("delete"),clear:jm("clear")}:{add(i){!e&&!ou(i)&&!rf(i)&&(i=fi(i));const s=fi(this);return Fm(s).has.call(s,i)||(s.add(i),fh(s,"add",i,i)),this},set(i,s){!e&&!ou(s)&&!rf(s)&&(s=fi(s));const o=fi(this),{has:a,get:l}=Fm(o);let c=a.call(o,i);c||(i=fi(i),c=a.call(o,i));const f=l.call(o,i);return o.set(i,s),c?sl(s,f)&&fh(o,"set",i,s):fh(o,"add",i,s),this},delete(i){const s=fi(this),{has:o,get:a}=Fm(s);let l=o.call(s,i);l||(i=fi(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&fh(s,"delete",i,void 0),c},clear(){const i=fi(this),s=i.size!==0,o=i.clear();return s&&fh(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=h8(i,t,e)}),n}function zv(t,e){const n=f8(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Si(n,i)&&i in r?n:r,i,s)}const d8={get:zv(!1,!1)},p8={get:zv(!1,!0)},g8={get:zv(!0,!1)},m8={get:zv(!0,!0)},nL=new WeakMap,rL=new WeakMap,iL=new WeakMap,sL=new WeakMap;function v8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function y8(t){return t.__v_skip||!Object.isExtensible(t)?0:v8(jT(t))}function cu(t){return rf(t)?t:Uv(t,!1,a8,d8,nL)}function Eb(t){return Uv(t,!1,u8,p8,rL)}function Pb(t){return Uv(t,!0,l8,g8,iL)}function b8(t){return Uv(t,!0,c8,m8,sL)}function Uv(t,e,n,r,i){if(!Bi(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=y8(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Bc(t){return rf(t)?Bc(t.__v_raw):!!(t&&t.__v_isReactive)}function rf(t){return!!(t&&t.__v_isReadonly)}function ou(t){return!!(t&&t.__v_isShallow)}function $v(t){return t?!!t.__v_raw:!1}function fi(t){const e=t&&t.__v_raw;return e?fi(e):t}function Vv(t){return!Si(t,"__v_skip")&&Object.isExtensible(t)&&z3(t,"__v_skip",!0),t}const Ia=t=>Bi(t)?cu(t):t,n2=t=>Bi(t)?Pb(t):t;function Rs(t){return t?t.__v_isRef===!0:!1}function kt(t){return oL(t,!1)}function kb(t){return oL(t,!0)}function oL(t,e){return Rs(t)?t:new _8(t,e)}class _8{constructor(e,n){this.dep=new Fv,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:fi(e),this._value=n?e:Ia(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ou(e)||rf(e);e=r?e:fi(e),sl(e,n)&&(this._rawValue=e,this._value=r?e:Ia(e),this.dep.trigger())}}function w8(t){t.dep&&t.dep.trigger()}function cn(t){return Rs(t)?t.value:t}function x8(t){return yr(t)?t():cn(t)}const L8={get:(t,e,n)=>e==="__v_raw"?t:cn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Rs(i)&&!Rs(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function Mb(t){return Bc(t)?t:new Proxy(t,L8)}class C8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Fv,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function aL(t){return new C8(t)}function Ab(t){const e=qn(t)?new Array(t.length):{};for(const n in t)e[n]=lL(t,n);return e}class S8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return n8(fi(this._object),this._key)}}class E8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function P8(t,e,n){return Rs(t)?t:yr(t)?new E8(t):Bi(t)&&arguments.length>1?lL(t,e,n):kt(t)}function lL(t,e,n){const r=t[e];return Rs(r)?r:new S8(t,e,n)}class k8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Fv(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Og-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ji!==this)return G3(this,!0),!0}get value(){const e=this.dep.track();return Z3(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function M8(t,e,n=!1){let r,i;return yr(t)?r=t:(r=t.get,i=t.set),new k8(r,i,n)}const A8={GET:"get",HAS:"has",ITERATE:"iterate"},T8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},zm={},Q0=new WeakMap;let jh;function O8(){return jh}function uL(t,e=!1,n=jh){if(n){let r=Q0.get(n);r||Q0.set(n,r=[]),r.push(t)}}function D8(t,e,n=pi){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=U=>i?U:ou(U)||i===!1||i===0?dh(U,1):dh(U);let f,p,y,m,C=!1,S=!1;if(Rs(t)?(p=()=>t.value,C=ou(t)):Bc(t)?(p=()=>c(t),C=!0):qn(t)?(S=!0,C=t.some(U=>Bc(U)||ou(U)),p=()=>t.map(U=>{if(Rs(U))return U.value;if(Bc(U))return c(U);if(yr(U))return l?l(U,2):U()})):yr(t)?e?p=l?()=>l(t,2):t:p=()=>{if(y){cf();try{y()}finally{hf()}}const U=jh;jh=f;try{return l?l(t,3,[m]):t(m)}finally{jh=U}}:p=Mu,e&&i){const U=p,G=i===!0?1/0:i;p=()=>dh(U(),G)}const T=xb(),O=()=>{f.stop(),T&&T.active&&vb(T.effects,f)};if(s&&e){const U=e;e=(...G)=>{U(...G),O()}}let D=S?new Array(t.length).fill(zm):zm;const N=U=>{if(!(!(f.flags&1)||!f.dirty&&!U))if(e){const G=f.run();if(i||C||(S?G.some((J,ee)=>sl(J,D[ee])):sl(G,D))){y&&y();const J=jh;jh=f;try{const ee=[G,D===zm?void 0:S&&D[0]===zm?[]:D,m];l?l(e,3,ee):e(...ee),D=G}finally{jh=J}}}else f.run()};return a&&a(N),f=new Tg(p),f.scheduler=o?()=>o(N,!1):N,m=U=>uL(U,!1,f),y=f.onStop=()=>{const U=Q0.get(f);if(U){if(l)l(U,4);else for(const G of U)G();Q0.delete(f)}},e?r?N(!0):D=f.run():o?o(N.bind(null,!0),!0):f.run(),O.pause=f.pause.bind(f),O.resume=f.resume.bind(f),O.stop=O,O}function dh(t,e=1/0,n){if(e<=0||!Bi(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Rs(t))dh(t.value,e,n);else if(qn(t))for(let r=0;r<t.length;r++)dh(t[r],e,n);else if(nd(t)||qd(t))t.forEach(r=>{dh(r,e,n)});else if(Iv(t)){for(const r in t)dh(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&dh(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const cL=[];function I8(t){cL.push(t)}function N8(){cL.pop()}function B8(t,e){}const R8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},F8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function gp(t,e,n,r){try{return r?t(...r):t()}catch(i){rd(i,e,n)}}function Ou(t,e,n,r){if(yr(t)){const i=gp(t,e,n,r);return i&&yb(i)&&i.catch(s=>{rd(s,e,n)}),i}if(qn(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Ou(t[s],e,n,r));return i}}function rd(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||pi;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const f=a.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,c)===!1)return}a=a.parent}if(s){cf(),gp(s,null,10,[t,l,c]),hf();return}}j8(t,n,i,r,o)}function j8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const ol=[];let Mc=-1;const Kd=[];let zh=null,Bd=0;const hL=Promise.resolve();let ev=null;function al(t){const e=ev||hL;return t?e.then(this?t.bind(this):t):e}function z8(t){let e=Mc+1,n=ol.length;for(;e<n;){const r=e+n>>>1,i=ol[r],s=Ng(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function Tb(t){if(!(t.flags&1)){const e=Ng(t),n=ol[ol.length-1];!n||!(t.flags&2)&&e>=Ng(n)?ol.push(t):ol.splice(z8(e),0,t),t.flags|=1,fL()}}function fL(){ev||(ev=hL.then(dL))}function Ig(t){qn(t)?Kd.push(...t):zh&&t.id===-1?zh.splice(Bd+1,0,t):t.flags&1||(Kd.push(t),t.flags|=1),fL()}function Xw(t,e,n=Mc+1){for(;n<ol.length;n++){const r=ol[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;ol.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function tv(t){if(Kd.length){const e=[...new Set(Kd)].sort((n,r)=>Ng(n)-Ng(r));if(Kd.length=0,zh){zh.push(...e);return}for(zh=e,Bd=0;Bd<zh.length;Bd++){const n=zh[Bd];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}zh=null,Bd=0}}const Ng=t=>t.id==null?t.flags&2?-1:1/0:t.id;function dL(t){try{for(Mc=0;Mc<ol.length;Mc++){const e=ol[Mc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),gp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Mc<ol.length;Mc++){const e=ol[Mc];e&&(e.flags&=-2)}Mc=-1,ol.length=0,tv(),ev=null,(ol.length||Kd.length)&&dL()}}let Rd,Um=[];function pL(t,e){var n,r;Rd=t,Rd?(Rd.enabled=!0,Um.forEach(({event:i,args:s})=>Rd.emit(i,...s)),Um=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{pL(s,e)}),setTimeout(()=>{Rd||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Um=[])},3e3)):Um=[]}let To=null,Hv=null;function Bg(t){const e=To;return To=t,Hv=t&&t.type.__scopeId||null,e}function U8(t){Hv=t}function $8(){Hv=null}const V8=t=>Il;function Il(t,e=To,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&c2(-1);const s=Bg(e);let o;try{o=t(...i)}finally{Bg(s),r._d&&c2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function jn(t,e){if(To===null)return t;const n=am(To),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=pi]=e[i];s&&(yr(s)&&(s={mounted:s,updated:s}),s.deep&&dh(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Tc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(cf(),Ou(l,n,8,[t.el,a,t,e]),hf())}}const gL=Symbol("_vte"),mL=t=>t.__isTeleport,cg=t=>t&&(t.disabled||t.disabled===""),Jw=t=>t&&(t.defer||t.defer===""),Qw=t=>typeof SVGElement<"u"&&t instanceof SVGElement,ex=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,r2=(t,e)=>{const n=t&&t.to;return ts(n)?e?e(n):null:n},vL={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:f,pc:p,pbc:y,o:{insert:m,querySelector:C,createText:S,createComment:T}}=c,O=cg(e.props);let{shapeFlag:D,children:N,dynamicChildren:U}=e;if(t==null){const G=e.el=S(""),J=e.anchor=S("");m(G,n,r),m(J,n,r);const ee=(K,pe)=>{D&16&&(i&&i.isCE&&(i.ce._teleportTarget=K),f(N,K,pe,i,s,o,a,l))},V=()=>{const K=e.target=r2(e.props,C),pe=yL(K,e,S,m);K&&(o!=="svg"&&Qw(K)?o="svg":o!=="mathml"&&ex(K)&&(o="mathml"),O||(ee(K,pe),L0(e,!1)))};O&&(ee(n,J),L0(e,!0)),Jw(e.props)?Mo(()=>{V(),e.el.__isMounted=!0},s):V()}else{if(Jw(e.props)&&!t.el.__isMounted){Mo(()=>{vL.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const G=e.anchor=t.anchor,J=e.target=t.target,ee=e.targetAnchor=t.targetAnchor,V=cg(t.props),K=V?n:J,pe=V?G:ee;if(o==="svg"||Qw(J)?o="svg":(o==="mathml"||ex(J))&&(o="mathml"),U?(y(t.dynamicChildren,U,K,i,s,o,a),$b(t,e,!0)):l||p(t,e,K,pe,i,s,o,a,!1),O)V?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):$m(e,n,G,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const $=e.target=r2(e.props,C);$&&$m(e,$,null,c,0)}else V&&$m(e,J,ee,c,1);L0(e,O)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:f,target:p,props:y}=t;if(p&&(i(c),i(f)),s&&i(l),o&16){const m=s||!cg(y);for(let C=0;C<a.length;C++){const S=a[C];r(S,e,n,m,!!S.dynamicChildren)}}},move:$m,hydrate:H8};function $m(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:f}=t,p=s===2;if(p&&r(o,e,n),(!p||cg(f))&&l&16)for(let y=0;y<c.length;y++)i(c[y],e,n,2);p&&r(a,e,n)}function H8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:f}},p){const y=e.target=r2(e.props,l);if(y){const m=cg(e.props),C=y._lpa||y.firstChild;if(e.shapeFlag&16)if(m)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=C,e.targetAnchor=C&&o(C);else{e.anchor=o(t);let S=C;for(;S;){if(S&&S.nodeType===8){if(S.data==="teleport start anchor")e.targetStart=S;else if(S.data==="teleport anchor"){e.targetAnchor=S,y._lpa=e.targetAnchor&&o(e.targetAnchor);break}}S=o(S)}e.targetAnchor||yL(y,e,f,c),p(C&&o(C),e,y,n,r,i,s)}L0(e,m)}return e.anchor&&o(e.anchor)}const Fd=vL;function L0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function yL(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[gL]=s,t&&(r(i,t),r(s,t)),s}const Uh=Symbol("_leaveCb"),Vm=Symbol("_enterCb");function Ob(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ks(()=>{t.isMounted=!0}),ff(()=>{t.isUnmounting=!0}),t}const Su=[Function,Array],Db={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Su,onEnter:Su,onAfterEnter:Su,onEnterCancelled:Su,onBeforeLeave:Su,onLeave:Su,onAfterLeave:Su,onLeaveCancelled:Su,onBeforeAppear:Su,onAppear:Su,onAfterAppear:Su,onAppearCancelled:Su},bL=t=>{const e=t.subTree;return e.component?bL(e.component):e},W8={name:"BaseTransition",props:Db,setup(t,{slots:e}){const n=Iu(),r=Ob();return()=>{const i=e.default&&Wv(e.default(),!0);if(!i||!i.length)return;const s=_L(i),o=fi(t),{mode:a}=o;if(r.isLeaving)return Qy(s);const l=tx(s);if(!l)return Qy(s);let c=rp(l,o,r,n,p=>c=p);l.type!==Co&&_h(l,c);let f=n.subTree&&tx(n.subTree);if(f&&f.type!==Co&&!nc(l,f)&&bL(n).type!==Co){let p=rp(f,o,r,n);if(_h(f,p),a==="out-in"&&l.type!==Co)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,f=void 0},Qy(s);a==="in-out"&&l.type!==Co?p.delayLeave=(y,m,C)=>{const S=xL(r,f);S[String(f.key)]=f,y[Uh]=()=>{m(),y[Uh]=void 0,delete c.delayedLeave,f=void 0},c.delayedLeave=()=>{C(),delete c.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return s}}};function _L(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Co){e=n;break}}return e}const wL=W8;function xL(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function rp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:f,onEnterCancelled:p,onBeforeLeave:y,onLeave:m,onAfterLeave:C,onLeaveCancelled:S,onBeforeAppear:T,onAppear:O,onAfterAppear:D,onAppearCancelled:N}=e,U=String(t.key),G=xL(n,t),J=(K,pe)=>{K&&Ou(K,r,9,pe)},ee=(K,pe)=>{const $=pe[1];J(K,pe),qn(K)?K.every(H=>H.length<=1)&&$():K.length<=1&&$()},V={mode:o,persisted:a,beforeEnter(K){let pe=l;if(!n.isMounted)if(s)pe=T||l;else return;K[Uh]&&K[Uh](!0);const $=G[U];$&&nc(t,$)&&$.el[Uh]&&$.el[Uh](),J(pe,[K])},enter(K){let pe=c,$=f,H=p;if(!n.isMounted)if(s)pe=O||c,$=D||f,H=N||p;else return;let oe=!1;const ie=K[Vm]=R=>{oe||(oe=!0,R?J(H,[K]):J($,[K]),V.delayedLeave&&V.delayedLeave(),K[Vm]=void 0)};pe?ee(pe,[K,ie]):ie()},leave(K,pe){const $=String(t.key);if(K[Vm]&&K[Vm](!0),n.isUnmounting)return pe();J(y,[K]);let H=!1;const oe=K[Uh]=ie=>{H||(H=!0,pe(),ie?J(S,[K]):J(C,[K]),K[Uh]=void 0,G[$]===t&&delete G[$])};G[$]=t,m?ee(m,[K,oe]):oe()},clone(K){const pe=rp(K,e,n,r,i);return i&&i(pe),pe}};return V}function Qy(t){if(sm(t))return t=zc(t),t.children=null,t}function tx(t){if(!sm(t))return mL(t.type)&&t.children?_L(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&yr(n.default))return n.default()}}function _h(t,e){t.shapeFlag&6&&t.component?(t.transition=e,_h(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Wv(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===bn?(o.patchFlag&128&&i++,r=r.concat(Wv(o.children,e,a))):(e||o.type!==Co)&&r.push(a!=null?zc(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function _s(t,e){return yr(t)?Wi({name:t.name},e,{setup:t}):t}function G8(){const t=Iu();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Ib(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function q8(t){const e=Iu(),n=kb(null);if(e){const i=e.refs===pi?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function Rg(t,e,n,r,i=!1){if(qn(t)){t.forEach((C,S)=>Rg(C,e&&(qn(e)?e[S]:e),n,r,i));return}if(Qh(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Rg(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?am(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,f=a.refs===pi?a.refs={}:a.refs,p=a.setupState,y=fi(p),m=p===pi?()=>!1:C=>Si(y,C);if(c!=null&&c!==l&&(ts(c)?(f[c]=null,m(c)&&(p[c]=null)):Rs(c)&&(c.value=null)),yr(l))gp(l,a,12,[o,f]);else{const C=ts(l),S=Rs(l);if(C||S){const T=()=>{if(t.f){const O=C?m(l)?p[l]:f[l]:l.value;i?qn(O)&&vb(O,s):qn(O)?O.includes(s)||O.push(s):C?(f[l]=[s],m(l)&&(p[l]=f[l])):(l.value=[s],t.k&&(f[t.k]=l.value))}else C?(f[l]=o,m(l)&&(p[l]=o)):S&&(l.value=o,t.k&&(f[t.k]=o))};o?(T.id=-1,Mo(T,n)):T()}}}let nx=!1;const Sd=()=>{nx||(console.error("Hydration completed but contains mismatches."),nx=!0)},Y8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",Z8=t=>t.namespaceURI.includes("MathML"),Hm=t=>{if(t.nodeType===1){if(Y8(t))return"svg";if(Z8(t))return"mathml"}},Vd=t=>t.nodeType===8;function K8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,f=(N,U)=>{if(!U.hasChildNodes()){n(null,N,U),tv(),U._vnode=N;return}p(U.firstChild,N,null,null,null),tv(),U._vnode=N},p=(N,U,G,J,ee,V=!1)=>{V=V||!!U.dynamicChildren;const K=Vd(N)&&N.data==="[",pe=()=>S(N,U,G,J,ee,K),{type:$,ref:H,shapeFlag:oe,patchFlag:ie}=U;let R=N.nodeType;U.el=N,ie===-2&&(V=!1,U.dynamicChildren=null);let j=null;switch($){case ef:R!==3?U.children===""?(l(U.el=i(""),o(N),N),j=N):j=pe():(N.data!==U.children&&(Sd(),N.data=U.children),j=s(N));break;case Co:D(N)?(j=s(N),O(U.el=N.content.firstChild,N,G)):R!==8||K?j=pe():j=s(N);break;case Hf:if(K&&(N=s(N),R=N.nodeType),R===1||R===3){j=N;const q=!U.children.length;for(let re=0;re<U.staticCount;re++)q&&(U.children+=j.nodeType===1?j.outerHTML:j.data),re===U.staticCount-1&&(U.anchor=j),j=s(j);return K?s(j):j}else pe();break;case bn:K?j=C(N,U,G,J,ee,V):j=pe();break;default:if(oe&1)(R!==1||U.type.toLowerCase()!==N.tagName.toLowerCase())&&!D(N)?j=pe():j=y(N,U,G,J,ee,V);else if(oe&6){U.slotScopeIds=ee;const q=o(N);if(K?j=T(N):Vd(N)&&N.data==="teleport start"?j=T(N,N.data,"teleport end"):j=s(N),e(U,q,null,G,J,Hm(q),V),Qh(U)&&!U.type.__asyncResolved){let re;K?(re=Kr(bn),re.anchor=j?j.previousSibling:q.lastChild):re=N.nodeType===3?zr(""):Kr("div"),re.el=N,U.component.subTree=re}}else oe&64?R!==8?j=pe():j=U.type.hydrate(N,U,G,J,ee,V,t,m):oe&128&&(j=U.type.hydrate(N,U,G,J,Hm(o(N)),ee,V,t,p))}return H!=null&&Rg(H,null,J,U),j},y=(N,U,G,J,ee,V)=>{V=V||!!U.dynamicChildren;const{type:K,props:pe,patchFlag:$,shapeFlag:H,dirs:oe,transition:ie}=U,R=K==="input"||K==="option";if(R||$!==-1){oe&&Tc(U,null,G,"created");let j=!1;if(D(N)){j=ZL(null,ie)&&G&&G.vnode.props&&G.vnode.props.appear;const re=N.content.firstChild;j&&ie.beforeEnter(re),O(re,N,G),U.el=N=re}if(H&16&&!(pe&&(pe.innerHTML||pe.textContent))){let re=m(N.firstChild,U,N,G,J,ee,V);for(;re;){Wm(N,1)||Sd();const xe=re;re=re.nextSibling,a(xe)}}else if(H&8){let re=U.children;re[0]===`
`&&(N.tagName==="PRE"||N.tagName==="TEXTAREA")&&(re=re.slice(1)),N.textContent!==re&&(Wm(N,0)||Sd(),N.textContent=U.children)}if(pe){if(R||!V||$&48){const re=N.tagName.includes("-");for(const xe in pe)(R&&(xe.endsWith("value")||xe==="indeterminate")||rm(xe)&&!Yd(xe)||xe[0]==="."||re)&&r(N,xe,null,pe[xe],void 0,G)}else if(pe.onClick)r(N,"onClick",null,pe.onClick,void 0,G);else if($&4&&Bc(pe.style))for(const re in pe.style)pe.style[re]}let q;(q=pe&&pe.onVnodeBeforeMount)&&Ml(q,G,U),oe&&Tc(U,null,G,"beforeMount"),((q=pe&&pe.onVnodeMounted)||oe||j)&&iC(()=>{q&&Ml(q,G,U),j&&ie.enter(N),oe&&Tc(U,null,G,"mounted")},J)}return N.nextSibling},m=(N,U,G,J,ee,V,K)=>{K=K||!!U.dynamicChildren;const pe=U.children,$=pe.length;for(let H=0;H<$;H++){const oe=K?pe[H]:pe[H]=Ol(pe[H]),ie=oe.type===ef;N?(ie&&!K&&H+1<$&&Ol(pe[H+1]).type===ef&&(l(i(N.data.slice(oe.children.length)),G,s(N)),N.data=oe.children),N=p(N,oe,J,ee,V,K)):ie&&!oe.children?l(oe.el=i(""),G):(Wm(G,1)||Sd(),n(null,oe,G,null,J,ee,Hm(G),V))}return N},C=(N,U,G,J,ee,V)=>{const{slotScopeIds:K}=U;K&&(ee=ee?ee.concat(K):K);const pe=o(N),$=m(s(N),U,pe,G,J,ee,V);return $&&Vd($)&&$.data==="]"?s(U.anchor=$):(Sd(),l(U.anchor=c("]"),pe,$),$)},S=(N,U,G,J,ee,V)=>{if(Wm(N.parentElement,1)||Sd(),U.el=null,V){const $=T(N);for(;;){const H=s(N);if(H&&H!==$)a(H);else break}}const K=s(N),pe=o(N);return a(N),n(null,U,pe,K,G,J,Hm(pe),ee),G&&(G.vnode.el=U.el,Zv(G,U.el)),K},T=(N,U="[",G="]")=>{let J=0;for(;N;)if(N=s(N),N&&Vd(N)&&(N.data===U&&J++,N.data===G)){if(J===0)return s(N);J--}return N},O=(N,U,G)=>{const J=U.parentNode;J&&J.replaceChild(N,U);let ee=G;for(;ee;)ee.vnode.el===U&&(ee.vnode.el=ee.subTree.el=N),ee=ee.parent},D=N=>N.nodeType===1&&N.tagName==="TEMPLATE";return[f,p]}const rx="data-allow-mismatch",X8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Wm(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(rx);)t=t.parentElement;const n=t&&t.getAttribute(rx);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes(X8[e])}}const J8=Bv().requestIdleCallback||(t=>setTimeout(t,1)),Q8=Bv().cancelIdleCallback||(t=>clearTimeout(t)),eO=(t=1e4)=>e=>{const n=J8(e,{timeout:t});return()=>Q8(n)};function tO(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const nO=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(tO(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},rO=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},iO=(t=[])=>(e,n)=>{ts(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function sO(t,e){if(Vd(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(Vd(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const Qh=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function oO(t){yr(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,f,p=0;const y=()=>(p++,c=null,m()),m=()=>{let C;return c||(C=c=e().catch(S=>{if(S=S instanceof Error?S:new Error(String(S)),l)return new Promise((T,O)=>{l(S,()=>T(y()),()=>O(S),p+1)});throw S}).then(S=>C!==c&&c?c:(S&&(S.__esModule||S[Symbol.toStringTag]==="Module")&&(S=S.default),f=S,S)))};return _s({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(C,S,T){const O=s?()=>{const D=s(T,N=>sO(C,N));D&&(S.bum||(S.bum=[])).push(D)}:T;f?O():m().then(()=>!S.isUnmounted&&O())},get __asyncResolved(){return f},setup(){const C=Ao;if(Ib(C),f)return()=>e1(f,C);const S=N=>{c=null,rd(N,C,13,!r)};if(a&&C.suspense||ip)return m().then(N=>()=>e1(N,C)).catch(N=>(S(N),()=>r?Kr(r,{error:N}):null));const T=kt(!1),O=kt(),D=kt(!!i);return i&&setTimeout(()=>{D.value=!1},i),o!=null&&setTimeout(()=>{if(!T.value&&!O.value){const N=new Error(`Async component timed out after ${o}ms.`);S(N),O.value=N}},o),m().then(()=>{T.value=!0,C.parent&&sm(C.parent.vnode)&&C.parent.update()}).catch(N=>{S(N),O.value=N}),()=>{if(T.value&&f)return e1(f,C);if(O.value&&r)return Kr(r,{error:O.value});if(n&&!D.value)return Kr(n)}}})}function e1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=Kr(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const sm=t=>t.type.__isKeepAlive,aO={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Iu(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:f,o:{createElement:p}}}=r,y=p("div");r.activate=(D,N,U,G,J)=>{const ee=D.component;c(D,N,U,0,a),l(ee.vnode,D,N,U,ee,a,G,D.slotScopeIds,J),Mo(()=>{ee.isDeactivated=!1,ee.a&&Zd(ee.a);const V=D.props&&D.props.onVnodeMounted;V&&Ml(V,ee.parent,D)},a)},r.deactivate=D=>{const N=D.component;rv(N.m),rv(N.a),c(D,y,null,1,a),Mo(()=>{N.da&&Zd(N.da);const U=D.props&&D.props.onVnodeUnmounted;U&&Ml(U,N.parent,D),N.isDeactivated=!0},a)};function m(D){t1(D),f(D,n,a,!0)}function C(D){i.forEach((N,U)=>{const G=g2(N.type);G&&!D(G)&&S(U)})}function S(D){const N=i.get(D);N&&(!o||!nc(N,o))?m(N):o&&t1(o),i.delete(D),s.delete(D)}yi(()=>[t.include,t.exclude],([D,N])=>{D&&C(U=>qp(D,U)),N&&C(U=>!qp(N,U))},{flush:"post",deep:!0});let T=null;const O=()=>{T!=null&&(iv(n.subTree.type)?Mo(()=>{i.set(T,Gm(n.subTree))},n.subTree.suspense):i.set(T,Gm(n.subTree)))};return Ks(O),qv(O),ff(()=>{i.forEach(D=>{const{subTree:N,suspense:U}=n,G=Gm(N);if(D.type===G.type&&D.key===G.key){t1(G);const J=G.component.da;J&&Mo(J,U);return}m(D)})}),()=>{if(T=null,!e.default)return o=null;const D=e.default(),N=D[0];if(D.length>1)return o=null,D;if(!wh(N)||!(N.shapeFlag&4)&&!(N.shapeFlag&128))return o=null,N;let U=Gm(N);if(U.type===Co)return o=null,U;const G=U.type,J=g2(Qh(U)?U.type.__asyncResolved||{}:G),{include:ee,exclude:V,max:K}=t;if(ee&&(!J||!qp(ee,J))||V&&J&&qp(V,J))return U.shapeFlag&=-257,o=U,N;const pe=U.key==null?G:U.key,$=i.get(pe);return U.el&&(U=zc(U),N.shapeFlag&128&&(N.ssContent=U)),T=pe,$?(U.el=$.el,U.component=$.component,U.transition&&_h(U,U.transition),U.shapeFlag|=512,s.delete(pe),s.add(pe)):(s.add(pe),K&&s.size>parseInt(K,10)&&S(s.values().next().value)),U.shapeFlag|=256,o=U,iv(N.type)?N:U}}},lO=aO;function qp(t,e){return qn(t)?t.some(n=>qp(n,e)):ts(t)?t.split(",").includes(e):FT(t)?(t.lastIndex=0,t.test(e)):!1}function LL(t,e){SL(t,"a",e)}function CL(t,e){SL(t,"da",e)}function SL(t,e,n=Ao){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Gv(e,r,n),n){let i=n.parent;for(;i&&i.parent;)sm(i.parent.vnode)&&uO(r,e,n,i),i=i.parent}}function uO(t,e,n,r){const i=Gv(e,t,r,!0);Au(()=>{vb(r[e],i)},n)}function t1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Gm(t){return t.shapeFlag&128?t.ssContent:t}function Gv(t,e,n=Ao,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{cf();const a=Jf(n),l=Ou(e,n,t,o);return a(),hf(),l});return r?i.unshift(s):i.push(s),s}}const xh=t=>(e,n=Ao)=>{(!ip||t==="sp")&&Gv(t,(...r)=>e(...r),n)},EL=xh("bm"),Ks=xh("m"),Nb=xh("bu"),qv=xh("u"),ff=xh("bum"),Au=xh("um"),PL=xh("sp"),kL=xh("rtg"),ML=xh("rtc");function AL(t,e=Ao){Gv("ec",t,e)}const Bb="components",cO="directives";function Rb(t,e){return Fb(Bb,t,!0,e)||t}const TL=Symbol.for("v-ndc");function OL(t){return ts(t)?Fb(Bb,t,!1)||t:t||TL}function hO(t){return Fb(cO,t)}function Fb(t,e,n=!0,r=!1){const i=To||Ao;if(i){const s=i.type;if(t===Bb){const a=g2(s,!1);if(a&&(a===e||a===ha(e)||a===im(ha(e))))return s}const o=ix(i[t]||s[t],e)||ix(i.appContext[t],e);return!o&&r?s:o}}function ix(t,e){return t&&(t[e]||t[ha(e)]||t[im(ha(e))])}function sr(t,e,n,r){let i;const s=n&&n[r],o=qn(t);if(o||ts(t)){const a=o&&Bc(t);let l=!1;a&&(l=!ou(t),t=jv(t)),i=new Array(t.length);for(let c=0,f=t.length;c<f;c++)i[c]=e(l?Ia(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(Bi(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const f=a[l];i[l]=e(t[f],f,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function fO(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(qn(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function dO(t,e,n={},r,i){if(To.ce||To.parent&&Qh(To.parent)&&To.parent.ce)return e!=="default"&&(n.name=e),Ie(),Lo(bn,null,[Kr("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Ie();const o=s&&jb(s(n)),a=n.key||o&&o.key,l=Lo(bn,{key:(a&&!ac(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function jb(t){return t.some(e=>wh(e)?!(e.type===Co||e.type===bn&&!jb(e.children)):!0)?t:null}function pO(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:ag(r)]=t[r];return n}const i2=t=>t?hC(t)?am(t):i2(t.parent):null,hg=Wi(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>i2(t.parent),$root:t=>i2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>zb(t),$forceUpdate:t=>t.f||(t.f=()=>{Tb(t.update)}),$nextTick:t=>t.n||(t.n=al.bind(t.proxy)),$watch:t=>HO.bind(t)}),n1=(t,e)=>t!==pi&&!t.__isScriptSetup&&Si(t,e),s2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(n1(r,e))return o[e]=1,r[e];if(i!==pi&&Si(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Si(c,e))return o[e]=3,s[e];if(n!==pi&&Si(n,e))return o[e]=4,n[e];o2&&(o[e]=0)}}const f=hg[e];let p,y;if(f)return e==="$attrs"&&Da(t.attrs,"get",""),f(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==pi&&Si(n,e))return o[e]=4,n[e];if(y=l.config.globalProperties,Si(y,e))return y[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return n1(i,e)?(i[e]=n,!0):r!==pi&&Si(r,e)?(r[e]=n,!0):Si(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==pi&&Si(t,o)||n1(e,o)||(a=s[0])&&Si(a,o)||Si(r,o)||Si(hg,o)||Si(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Si(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},gO=Wi({},s2,{get(t,e){if(e!==Symbol.unscopables)return s2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!VT(e)}});function mO(){return null}function vO(){return null}function yO(t){}function bO(t){}function _O(){return null}function wO(){}function xO(t,e){return null}function LO(){return DL().slots}function CO(){return DL().attrs}function DL(){const t=Iu();return t.setupContext||(t.setupContext=pC(t))}function Fg(t){return qn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function SO(t,e){const n=Fg(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?qn(i)||yr(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function EO(t,e){return!t||!e?t||e:qn(t)&&qn(e)?t.concat(e):Wi({},Fg(t),Fg(e))}function PO(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function kO(t){const e=Iu();let n=t();return f2(),yb(n)&&(n=n.catch(r=>{throw Jf(e),r})),[n,()=>Jf(e)]}let o2=!0;function MO(t){const e=zb(t),n=t.proxy,r=t.ctx;o2=!1,e.beforeCreate&&sx(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:f,beforeMount:p,mounted:y,beforeUpdate:m,updated:C,activated:S,deactivated:T,beforeDestroy:O,beforeUnmount:D,destroyed:N,unmounted:U,render:G,renderTracked:J,renderTriggered:ee,errorCaptured:V,serverPrefetch:K,expose:pe,inheritAttrs:$,components:H,directives:oe,filters:ie}=e;if(c&&AO(c,r,null),o)for(const q in o){const re=o[q];yr(re)&&(r[q]=re.bind(n))}if(i){const q=i.call(n,n);Bi(q)&&(t.data=cu(q))}if(o2=!0,s)for(const q in s){const re=s[q],xe=yr(re)?re.bind(n,n):yr(re.get)?re.get.bind(n,n):Mu,be=!yr(re)&&yr(re.set)?re.set.bind(n):Mu,_e=tr({get:xe,set:be});Object.defineProperty(r,q,{enumerable:!0,configurable:!0,get:()=>_e.value,set:Z=>_e.value=Z})}if(a)for(const q in a)IL(a[q],r,n,q);if(l){const q=yr(l)?l.call(n):l;Reflect.ownKeys(q).forEach(re=>{fg(re,q[re])})}f&&sx(f,t,"c");function j(q,re){qn(re)?re.forEach(xe=>q(xe.bind(n))):re&&q(re.bind(n))}if(j(EL,p),j(Ks,y),j(Nb,m),j(qv,C),j(LL,S),j(CL,T),j(AL,V),j(ML,J),j(kL,ee),j(ff,D),j(Au,U),j(PL,K),qn(pe))if(pe.length){const q=t.exposed||(t.exposed={});pe.forEach(re=>{Object.defineProperty(q,re,{get:()=>n[re],set:xe=>n[re]=xe})})}else t.exposed||(t.exposed={});G&&t.render===Mu&&(t.render=G),$!=null&&(t.inheritAttrs=$),H&&(t.components=H),oe&&(t.directives=oe),K&&Ib(t)}function AO(t,e,n=Mu){qn(t)&&(t=a2(t));for(const r in t){const i=t[r];let s;Bi(i)?"default"in i?s=au(i.from||r,i.default,!0):s=au(i.from||r):s=au(i),Rs(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function sx(t,e,n){Ou(qn(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function IL(t,e,n,r){let i=r.includes(".")?eC(n,r):()=>n[r];if(ts(t)){const s=e[t];yr(s)&&yi(i,s)}else if(yr(t))yi(i,t.bind(n));else if(Bi(t))if(qn(t))t.forEach(s=>IL(s,e,n,r));else{const s=yr(t.handler)?t.handler.bind(n):e[t.handler];yr(s)&&yi(i,s,t)}}function zb(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>nv(l,c,o,!0)),nv(l,e,o)),Bi(e)&&s.set(e,l),l}function nv(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&nv(t,s,n,!0),i&&i.forEach(o=>nv(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=TO[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const TO={data:ox,props:ax,emits:ax,methods:Yp,computed:Yp,beforeCreate:el,created:el,beforeMount:el,mounted:el,beforeUpdate:el,updated:el,beforeDestroy:el,beforeUnmount:el,destroyed:el,unmounted:el,activated:el,deactivated:el,errorCaptured:el,serverPrefetch:el,components:Yp,directives:Yp,watch:DO,provide:ox,inject:OO};function ox(t,e){return e?t?function(){return Wi(yr(t)?t.call(this,this):t,yr(e)?e.call(this,this):e)}:e:t}function OO(t,e){return Yp(a2(t),a2(e))}function a2(t){if(qn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function el(t,e){return t?[...new Set([].concat(t,e))]:e}function Yp(t,e){return t?Wi(Object.create(null),t,e):e}function ax(t,e){return t?qn(t)&&qn(e)?[...new Set([...t,...e])]:Wi(Object.create(null),Fg(t),Fg(e??{})):e}function DO(t,e){if(!t)return e;if(!e)return t;const n=Wi(Object.create(null),t);for(const r in e)n[r]=el(t[r],e[r]);return n}function NL(){return{app:null,config:{isNativeTag:BT,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let IO=0;function NO(t,e){return function(r,i=null){yr(r)||(r=Wi({},r)),i!=null&&!Bi(i)&&(i=null);const s=NL(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:IO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:mC,get config(){return s.config},set config(f){},use(f,...p){return o.has(f)||(f&&yr(f.install)?(o.add(f),f.install(c,...p)):yr(f)&&(o.add(f),f(c,...p))),c},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),c},component(f,p){return p?(s.components[f]=p,c):s.components[f]},directive(f,p){return p?(s.directives[f]=p,c):s.directives[f]},mount(f,p,y){if(!l){const m=c._ceVNode||Kr(r,i);return m.appContext=s,y===!0?y="svg":y===!1&&(y=void 0),p&&e?e(m,f):t(m,f,y),l=!0,c._container=f,f.__vue_app__=c,am(m.component)}},onUnmount(f){a.push(f)},unmount(){l&&(Ou(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(f,p){return s.provides[f]=p,c},runWithContext(f){const p=Vf;Vf=c;try{return f()}finally{Vf=p}}};return c}}let Vf=null;function fg(t,e){if(Ao){let n=Ao.provides;const r=Ao.parent&&Ao.parent.provides;r===n&&(n=Ao.provides=Object.create(r)),n[t]=e}}function au(t,e,n=!1){const r=Ao||To;if(r||Vf){const i=Vf?Vf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&yr(e)?e.call(r&&r.proxy):e}}function BL(){return!!(Ao||To||Vf)}const RL={},FL=()=>Object.create(RL),jL=t=>Object.getPrototypeOf(t)===RL;function BO(t,e,n,r=!1){const i={},s=FL();t.propsDefaults=Object.create(null),zL(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:Eb(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function RO(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=fi(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let y=f[p];if(Yv(t.emitsOptions,y))continue;const m=e[y];if(l)if(Si(s,y))m!==s[y]&&(s[y]=m,c=!0);else{const C=ha(y);i[C]=l2(l,a,C,m,t,!1)}else m!==s[y]&&(s[y]=m,c=!0)}}}else{zL(t,e,i,s)&&(c=!0);let f;for(const p in a)(!e||!Si(e,p)&&((f=Dl(p))===p||!Si(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(i[p]=l2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!Si(e,p))&&(delete s[p],c=!0)}c&&fh(t.attrs,"set","")}function zL(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Yd(l))continue;const c=e[l];let f;i&&Si(i,f=ha(l))?!s||!s.includes(f)?n[f]=c:(a||(a={}))[f]=c:Yv(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=fi(n),c=a||pi;for(let f=0;f<s.length;f++){const p=s[f];n[p]=l2(i,l,p,c[p],t,!Si(c,p))}}return o}function l2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Si(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&yr(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const f=Jf(i);r=c[n]=l.call(null,e),f()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Dl(n))&&(r=!0))}return r}const FO=new WeakMap;function UL(t,e,n=!1){const r=n?FO:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!yr(t)){const f=p=>{l=!0;const[y,m]=UL(p,e,!0);Wi(o,y),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!s&&!l)return Bi(t)&&r.set(t,Gd),Gd;if(qn(s))for(let f=0;f<s.length;f++){const p=ha(s[f]);lx(p)&&(o[p]=pi)}else if(s)for(const f in s){const p=ha(f);if(lx(p)){const y=s[f],m=o[p]=qn(y)||yr(y)?{type:y}:Wi({},y),C=m.type;let S=!1,T=!0;if(qn(C))for(let O=0;O<C.length;++O){const D=C[O],N=yr(D)&&D.name;if(N==="Boolean"){S=!0;break}else N==="String"&&(T=!1)}else S=yr(C)&&C.name==="Boolean";m[0]=S,m[1]=T,(S||Si(m,"default"))&&a.push(p)}}const c=[o,a];return Bi(t)&&r.set(t,c),c}function lx(t){return t[0]!=="$"&&!Yd(t)}const $L=t=>t[0]==="_"||t==="$stable",Ub=t=>qn(t)?t.map(Ol):[Ol(t)],jO=(t,e,n)=>{if(e._n)return e;const r=Il((...i)=>Ub(e(...i)),n);return r._c=!1,r},VL=(t,e,n)=>{const r=t._ctx;for(const i in t){if($L(i))continue;const s=t[i];if(yr(s))e[i]=jO(i,s,r);else if(s!=null){const o=Ub(s);e[i]=()=>o}}},HL=(t,e)=>{const n=Ub(e);t.slots.default=()=>n},WL=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},zO=(t,e,n)=>{const r=t.slots=FL();if(t.vnode.shapeFlag&32){const i=e._;i?(WL(r,e,n),n&&z3(r,"_",i,!0)):VL(e,r)}else e&&HL(t,e)},UO=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=pi;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:WL(i,e,n):(s=!e.$stable,VL(e,i)),o=e}else e&&(HL(t,e),o={default:1});if(s)for(const a in i)!$L(a)&&o[a]==null&&delete i[a]},Mo=iC;function GL(t){return YL(t)}function qL(t){return YL(t,K8)}function YL(t,e){const n=Bv();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:f,parentNode:p,nextSibling:y,setScopeId:m=Mu,insertStaticContent:C}=t,S=(le,se,ue,Q=null,ke=null,Ve=null,Xe=void 0,lt=null,at=!!se.dynamicChildren)=>{if(le===se)return;le&&!nc(le,se)&&(Q=Ee(le),Z(le,ke,Ve,!0),le=null),se.patchFlag===-2&&(at=!1,se.dynamicChildren=null);const{type:pt,ref:jt,shapeFlag:Bt}=se;switch(pt){case ef:T(le,se,ue,Q);break;case Co:O(le,se,ue,Q);break;case Hf:le==null&&D(se,ue,Q,Xe);break;case bn:H(le,se,ue,Q,ke,Ve,Xe,lt,at);break;default:Bt&1?G(le,se,ue,Q,ke,Ve,Xe,lt,at):Bt&6?oe(le,se,ue,Q,ke,Ve,Xe,lt,at):(Bt&64||Bt&128)&&pt.process(le,se,ue,Q,ke,Ve,Xe,lt,at,rt)}jt!=null&&ke&&Rg(jt,le&&le.ref,Ve,se||le,!se)},T=(le,se,ue,Q)=>{if(le==null)r(se.el=a(se.children),ue,Q);else{const ke=se.el=le.el;se.children!==le.children&&c(ke,se.children)}},O=(le,se,ue,Q)=>{le==null?r(se.el=l(se.children||""),ue,Q):se.el=le.el},D=(le,se,ue,Q)=>{[le.el,le.anchor]=C(le.children,se,ue,Q,le.el,le.anchor)},N=({el:le,anchor:se},ue,Q)=>{let ke;for(;le&&le!==se;)ke=y(le),r(le,ue,Q),le=ke;r(se,ue,Q)},U=({el:le,anchor:se})=>{let ue;for(;le&&le!==se;)ue=y(le),i(le),le=ue;i(se)},G=(le,se,ue,Q,ke,Ve,Xe,lt,at)=>{se.type==="svg"?Xe="svg":se.type==="math"&&(Xe="mathml"),le==null?J(se,ue,Q,ke,Ve,Xe,lt,at):K(le,se,ke,Ve,Xe,lt,at)},J=(le,se,ue,Q,ke,Ve,Xe,lt)=>{let at,pt;const{props:jt,shapeFlag:Bt,transition:qt,dirs:Jt}=le;if(at=le.el=o(le.type,Ve,jt&&jt.is,jt),Bt&8?f(at,le.children):Bt&16&&V(le.children,at,null,Q,ke,r1(le,Ve),Xe,lt),Jt&&Tc(le,null,Q,"created"),ee(at,le,le.scopeId,Xe,Q),jt){for(const Cn in jt)Cn!=="value"&&!Yd(Cn)&&s(at,Cn,null,jt[Cn],Ve,Q);"value"in jt&&s(at,"value",null,jt.value,Ve),(pt=jt.onVnodeBeforeMount)&&Ml(pt,Q,le)}Jt&&Tc(le,null,Q,"beforeMount");const gn=ZL(ke,qt);gn&&qt.beforeEnter(at),r(at,se,ue),((pt=jt&&jt.onVnodeMounted)||gn||Jt)&&Mo(()=>{pt&&Ml(pt,Q,le),gn&&qt.enter(at),Jt&&Tc(le,null,Q,"mounted")},ke)},ee=(le,se,ue,Q,ke)=>{if(ue&&m(le,ue),Q)for(let Ve=0;Ve<Q.length;Ve++)m(le,Q[Ve]);if(ke){let Ve=ke.subTree;if(se===Ve||iv(Ve.type)&&(Ve.ssContent===se||Ve.ssFallback===se)){const Xe=ke.vnode;ee(le,Xe,Xe.scopeId,Xe.slotScopeIds,ke.parent)}}},V=(le,se,ue,Q,ke,Ve,Xe,lt,at=0)=>{for(let pt=at;pt<le.length;pt++){const jt=le[pt]=lt?$h(le[pt]):Ol(le[pt]);S(null,jt,se,ue,Q,ke,Ve,Xe,lt)}},K=(le,se,ue,Q,ke,Ve,Xe)=>{const lt=se.el=le.el;let{patchFlag:at,dynamicChildren:pt,dirs:jt}=se;at|=le.patchFlag&16;const Bt=le.props||pi,qt=se.props||pi;let Jt;if(ue&&Cf(ue,!1),(Jt=qt.onVnodeBeforeUpdate)&&Ml(Jt,ue,se,le),jt&&Tc(se,le,ue,"beforeUpdate"),ue&&Cf(ue,!0),(Bt.innerHTML&&qt.innerHTML==null||Bt.textContent&&qt.textContent==null)&&f(lt,""),pt?pe(le.dynamicChildren,pt,lt,ue,Q,r1(se,ke),Ve):Xe||re(le,se,lt,null,ue,Q,r1(se,ke),Ve,!1),at>0){if(at&16)$(lt,Bt,qt,ue,ke);else if(at&2&&Bt.class!==qt.class&&s(lt,"class",null,qt.class,ke),at&4&&s(lt,"style",Bt.style,qt.style,ke),at&8){const gn=se.dynamicProps;for(let Cn=0;Cn<gn.length;Cn++){const Ye=gn[Cn],st=Bt[Ye],Qe=qt[Ye];(Qe!==st||Ye==="value")&&s(lt,Ye,st,Qe,ke,ue)}}at&1&&le.children!==se.children&&f(lt,se.children)}else!Xe&&pt==null&&$(lt,Bt,qt,ue,ke);((Jt=qt.onVnodeUpdated)||jt)&&Mo(()=>{Jt&&Ml(Jt,ue,se,le),jt&&Tc(se,le,ue,"updated")},Q)},pe=(le,se,ue,Q,ke,Ve,Xe)=>{for(let lt=0;lt<se.length;lt++){const at=le[lt],pt=se[lt],jt=at.el&&(at.type===bn||!nc(at,pt)||at.shapeFlag&70)?p(at.el):ue;S(at,pt,jt,null,Q,ke,Ve,Xe,!0)}},$=(le,se,ue,Q,ke)=>{if(se!==ue){if(se!==pi)for(const Ve in se)!Yd(Ve)&&!(Ve in ue)&&s(le,Ve,se[Ve],null,ke,Q);for(const Ve in ue){if(Yd(Ve))continue;const Xe=ue[Ve],lt=se[Ve];Xe!==lt&&Ve!=="value"&&s(le,Ve,lt,Xe,ke,Q)}"value"in ue&&s(le,"value",se.value,ue.value,ke)}},H=(le,se,ue,Q,ke,Ve,Xe,lt,at)=>{const pt=se.el=le?le.el:a(""),jt=se.anchor=le?le.anchor:a("");let{patchFlag:Bt,dynamicChildren:qt,slotScopeIds:Jt}=se;Jt&&(lt=lt?lt.concat(Jt):Jt),le==null?(r(pt,ue,Q),r(jt,ue,Q),V(se.children||[],ue,jt,ke,Ve,Xe,lt,at)):Bt>0&&Bt&64&&qt&&le.dynamicChildren?(pe(le.dynamicChildren,qt,ue,ke,Ve,Xe,lt),(se.key!=null||ke&&se===ke.subTree)&&$b(le,se,!0)):re(le,se,ue,jt,ke,Ve,Xe,lt,at)},oe=(le,se,ue,Q,ke,Ve,Xe,lt,at)=>{se.slotScopeIds=lt,le==null?se.shapeFlag&512?ke.ctx.activate(se,ue,Q,Xe,at):ie(se,ue,Q,ke,Ve,Xe,at):R(le,se,at)},ie=(le,se,ue,Q,ke,Ve,Xe)=>{const lt=le.component=cC(le,Q,ke);if(sm(le)&&(lt.ctx.renderer=rt),fC(lt,!1,Xe),lt.asyncDep){if(ke&&ke.registerDep(lt,j,Xe),!le.el){const at=lt.subTree=Kr(Co);O(null,at,se,ue)}}else j(lt,le,se,ue,ke,Ve,Xe)},R=(le,se,ue)=>{const Q=se.component=le.component;if(KO(le,se,ue))if(Q.asyncDep&&!Q.asyncResolved){q(Q,se,ue);return}else Q.next=se,Q.update();else se.el=le.el,Q.vnode=se},j=(le,se,ue,Q,ke,Ve,Xe)=>{const lt=()=>{if(le.isMounted){let{next:Bt,bu:qt,u:Jt,parent:gn,vnode:Cn}=le;{const Yt=KL(le);if(Yt){Bt&&(Bt.el=Cn.el,q(le,Bt,Xe)),Yt.asyncDep.then(()=>{le.isUnmounted||lt()});return}}let Ye=Bt,st;Cf(le,!1),Bt?(Bt.el=Cn.el,q(le,Bt,Xe)):Bt=Cn,qt&&Zd(qt),(st=Bt.props&&Bt.props.onVnodeBeforeUpdate)&&Ml(st,gn,Bt,Cn),Cf(le,!0);const Qe=C0(le),$t=le.subTree;le.subTree=Qe,S($t,Qe,p($t.el),Ee($t),le,ke,Ve),Bt.el=Qe.el,Ye===null&&Zv(le,Qe.el),Jt&&Mo(Jt,ke),(st=Bt.props&&Bt.props.onVnodeUpdated)&&Mo(()=>Ml(st,gn,Bt,Cn),ke)}else{let Bt;const{el:qt,props:Jt}=se,{bm:gn,m:Cn,parent:Ye,root:st,type:Qe}=le,$t=Qh(se);if(Cf(le,!1),gn&&Zd(gn),!$t&&(Bt=Jt&&Jt.onVnodeBeforeMount)&&Ml(Bt,Ye,se),Cf(le,!0),qt&&_t){const Yt=()=>{le.subTree=C0(le),_t(qt,le.subTree,le,ke,null)};$t&&Qe.__asyncHydrate?Qe.__asyncHydrate(qt,le,Yt):Yt()}else{st.ce&&st.ce._injectChildStyle(Qe);const Yt=le.subTree=C0(le);S(null,Yt,ue,Q,le,ke,Ve),se.el=Yt.el}if(Cn&&Mo(Cn,ke),!$t&&(Bt=Jt&&Jt.onVnodeMounted)){const Yt=se;Mo(()=>Ml(Bt,Ye,Yt),ke)}(se.shapeFlag&256||Ye&&Qh(Ye.vnode)&&Ye.vnode.shapeFlag&256)&&le.a&&Mo(le.a,ke),le.isMounted=!0,se=ue=Q=null}};le.scope.on();const at=le.effect=new Tg(lt);le.scope.off();const pt=le.update=at.run.bind(at),jt=le.job=at.runIfDirty.bind(at);jt.i=le,jt.id=le.uid,at.scheduler=()=>Tb(jt),Cf(le,!0),pt()},q=(le,se,ue)=>{se.component=le;const Q=le.vnode.props;le.vnode=se,le.next=null,RO(le,se.props,Q,ue),UO(le,se.children,ue),cf(),Xw(le),hf()},re=(le,se,ue,Q,ke,Ve,Xe,lt,at=!1)=>{const pt=le&&le.children,jt=le?le.shapeFlag:0,Bt=se.children,{patchFlag:qt,shapeFlag:Jt}=se;if(qt>0){if(qt&128){be(pt,Bt,ue,Q,ke,Ve,Xe,lt,at);return}else if(qt&256){xe(pt,Bt,ue,Q,ke,Ve,Xe,lt,at);return}}Jt&8?(jt&16&&ge(pt,ke,Ve),Bt!==pt&&f(ue,Bt)):jt&16?Jt&16?be(pt,Bt,ue,Q,ke,Ve,Xe,lt,at):ge(pt,ke,Ve,!0):(jt&8&&f(ue,""),Jt&16&&V(Bt,ue,Q,ke,Ve,Xe,lt,at))},xe=(le,se,ue,Q,ke,Ve,Xe,lt,at)=>{le=le||Gd,se=se||Gd;const pt=le.length,jt=se.length,Bt=Math.min(pt,jt);let qt;for(qt=0;qt<Bt;qt++){const Jt=se[qt]=at?$h(se[qt]):Ol(se[qt]);S(le[qt],Jt,ue,null,ke,Ve,Xe,lt,at)}pt>jt?ge(le,ke,Ve,!0,!1,Bt):V(se,ue,Q,ke,Ve,Xe,lt,at,Bt)},be=(le,se,ue,Q,ke,Ve,Xe,lt,at)=>{let pt=0;const jt=se.length;let Bt=le.length-1,qt=jt-1;for(;pt<=Bt&&pt<=qt;){const Jt=le[pt],gn=se[pt]=at?$h(se[pt]):Ol(se[pt]);if(nc(Jt,gn))S(Jt,gn,ue,null,ke,Ve,Xe,lt,at);else break;pt++}for(;pt<=Bt&&pt<=qt;){const Jt=le[Bt],gn=se[qt]=at?$h(se[qt]):Ol(se[qt]);if(nc(Jt,gn))S(Jt,gn,ue,null,ke,Ve,Xe,lt,at);else break;Bt--,qt--}if(pt>Bt){if(pt<=qt){const Jt=qt+1,gn=Jt<jt?se[Jt].el:Q;for(;pt<=qt;)S(null,se[pt]=at?$h(se[pt]):Ol(se[pt]),ue,gn,ke,Ve,Xe,lt,at),pt++}}else if(pt>qt)for(;pt<=Bt;)Z(le[pt],ke,Ve,!0),pt++;else{const Jt=pt,gn=pt,Cn=new Map;for(pt=gn;pt<=qt;pt++){const _n=se[pt]=at?$h(se[pt]):Ol(se[pt]);_n.key!=null&&Cn.set(_n.key,pt)}let Ye,st=0;const Qe=qt-gn+1;let $t=!1,Yt=0;const wn=new Array(Qe);for(pt=0;pt<Qe;pt++)wn[pt]=0;for(pt=Jt;pt<=Bt;pt++){const _n=le[pt];if(st>=Qe){Z(_n,ke,Ve,!0);continue}let Rn;if(_n.key!=null)Rn=Cn.get(_n.key);else for(Ye=gn;Ye<=qt;Ye++)if(wn[Ye-gn]===0&&nc(_n,se[Ye])){Rn=Ye;break}Rn===void 0?Z(_n,ke,Ve,!0):(wn[Rn-gn]=pt+1,Rn>=Yt?Yt=Rn:$t=!0,S(_n,se[Rn],ue,null,ke,Ve,Xe,lt,at),st++)}const mn=$t?$O(wn):Gd;for(Ye=mn.length-1,pt=Qe-1;pt>=0;pt--){const _n=gn+pt,Rn=se[_n],vn=_n+1<jt?se[_n+1].el:Q;wn[pt]===0?S(null,Rn,ue,vn,ke,Ve,Xe,lt,at):$t&&(Ye<0||pt!==mn[Ye]?_e(Rn,ue,vn,2):Ye--)}}},_e=(le,se,ue,Q,ke=null)=>{const{el:Ve,type:Xe,transition:lt,children:at,shapeFlag:pt}=le;if(pt&6){_e(le.component.subTree,se,ue,Q);return}if(pt&128){le.suspense.move(se,ue,Q);return}if(pt&64){Xe.move(le,se,ue,rt);return}if(Xe===bn){r(Ve,se,ue);for(let Bt=0;Bt<at.length;Bt++)_e(at[Bt],se,ue,Q);r(le.anchor,se,ue);return}if(Xe===Hf){N(le,se,ue);return}if(Q!==2&&pt&1&&lt)if(Q===0)lt.beforeEnter(Ve),r(Ve,se,ue),Mo(()=>lt.enter(Ve),ke);else{const{leave:Bt,delayLeave:qt,afterLeave:Jt}=lt,gn=()=>r(Ve,se,ue),Cn=()=>{Bt(Ve,()=>{gn(),Jt&&Jt()})};qt?qt(Ve,gn,Cn):Cn()}else r(Ve,se,ue)},Z=(le,se,ue,Q=!1,ke=!1)=>{const{type:Ve,props:Xe,ref:lt,children:at,dynamicChildren:pt,shapeFlag:jt,patchFlag:Bt,dirs:qt,cacheIndex:Jt}=le;if(Bt===-2&&(ke=!1),lt!=null&&Rg(lt,null,ue,le,!0),Jt!=null&&(se.renderCache[Jt]=void 0),jt&256){se.ctx.deactivate(le);return}const gn=jt&1&&qt,Cn=!Qh(le);let Ye;if(Cn&&(Ye=Xe&&Xe.onVnodeBeforeUnmount)&&Ml(Ye,se,le),jt&6)de(le.component,ue,Q);else{if(jt&128){le.suspense.unmount(ue,Q);return}gn&&Tc(le,null,se,"beforeUnmount"),jt&64?le.type.remove(le,se,ue,rt,Q):pt&&!pt.hasOnce&&(Ve!==bn||Bt>0&&Bt&64)?ge(pt,se,ue,!1,!0):(Ve===bn&&Bt&384||!ke&&jt&16)&&ge(at,se,ue),Q&&ae(le)}(Cn&&(Ye=Xe&&Xe.onVnodeUnmounted)||gn)&&Mo(()=>{Ye&&Ml(Ye,se,le),gn&&Tc(le,null,se,"unmounted")},ue)},ae=le=>{const{type:se,el:ue,anchor:Q,transition:ke}=le;if(se===bn){ce(ue,Q);return}if(se===Hf){U(le);return}const Ve=()=>{i(ue),ke&&!ke.persisted&&ke.afterLeave&&ke.afterLeave()};if(le.shapeFlag&1&&ke&&!ke.persisted){const{leave:Xe,delayLeave:lt}=ke,at=()=>Xe(ue,Ve);lt?lt(le.el,Ve,at):at()}else Ve()},ce=(le,se)=>{let ue;for(;le!==se;)ue=y(le),i(le),le=ue;i(se)},de=(le,se,ue)=>{const{bum:Q,scope:ke,job:Ve,subTree:Xe,um:lt,m:at,a:pt}=le;rv(at),rv(pt),Q&&Zd(Q),ke.stop(),Ve&&(Ve.flags|=8,Z(Xe,le,se,ue)),lt&&Mo(lt,se),Mo(()=>{le.isUnmounted=!0},se),se&&se.pendingBranch&&!se.isUnmounted&&le.asyncDep&&!le.asyncResolved&&le.suspenseId===se.pendingId&&(se.deps--,se.deps===0&&se.resolve())},ge=(le,se,ue,Q=!1,ke=!1,Ve=0)=>{for(let Xe=Ve;Xe<le.length;Xe++)Z(le[Xe],se,ue,Q,ke)},Ee=le=>{if(le.shapeFlag&6)return Ee(le.component.subTree);if(le.shapeFlag&128)return le.suspense.next();const se=y(le.anchor||le.el),ue=se&&se[gL];return ue?y(ue):se};let Ue=!1;const Ne=(le,se,ue)=>{le==null?se._vnode&&Z(se._vnode,null,null,!0):S(se._vnode||null,le,se,null,null,null,ue),se._vnode=le,Ue||(Ue=!0,Xw(),tv(),Ue=!1)},rt={p:S,um:Z,m:_e,r:ae,mt:ie,mc:V,pc:re,pbc:pe,n:Ee,o:t};let gt,_t;return e&&([gt,_t]=e(rt)),{render:Ne,hydrate:gt,createApp:NO(Ne,gt)}}function r1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Cf({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function ZL(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function $b(t,e,n=!1){const r=t.children,i=e.children;if(qn(r)&&qn(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=$h(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&$b(o,a)),a.type===ef&&(a.el=o.el)}}function $O(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function KL(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:KL(e)}function rv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const XL=Symbol.for("v-scx"),JL=()=>au(XL);function jg(t,e){return om(t,null,e)}function VO(t,e){return om(t,null,{flush:"post"})}function QL(t,e){return om(t,null,{flush:"sync"})}function yi(t,e,n){return om(t,e,n)}function om(t,e,n=pi){const{immediate:r,deep:i,flush:s,once:o}=n,a=Wi({},n),l=e&&r||!e&&s!=="post";let c;if(ip){if(s==="sync"){const m=JL();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Mu,m.resume=Mu,m.pause=Mu,m}}const f=Ao;a.call=(m,C,S)=>Ou(m,f,C,S);let p=!1;s==="post"?a.scheduler=m=>{Mo(m,f&&f.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(m,C)=>{C?m():Tb(m)}),a.augmentJob=m=>{e&&(m.flags|=4),p&&(m.flags|=2,f&&(m.id=f.uid,m.i=f))};const y=D8(t,e,a);return ip&&(c?c.push(y):l&&y()),y}function HO(t,e,n){const r=this.proxy,i=ts(t)?t.includes(".")?eC(r,t):()=>r[t]:t.bind(r,r);let s;yr(e)?s=e:(s=e.handler,n=e);const o=Jf(this),a=om(i,s.bind(r),n);return o(),a}function eC(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function WO(t,e,n=pi){const r=Iu(),i=ha(e),s=Dl(e),o=tC(t,i),a=aL((l,c)=>{let f,p=pi,y;return QL(()=>{const m=t[i];sl(f,m)&&(f=m,c())}),{get(){return l(),n.get?n.get(f):f},set(m){const C=n.set?n.set(m):m;if(!sl(C,f)&&!(p!==pi&&sl(m,p)))return;const S=r.vnode.props;S&&(e in S||i in S||s in S)&&(`onUpdate:${e}`in S||`onUpdate:${i}`in S||`onUpdate:${s}`in S)||(f=m,c()),r.emit(`update:${e}`,C),sl(m,C)&&sl(m,p)&&!sl(C,y)&&c(),p=m,y=C}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||pi:a,done:!1}:{done:!0}}}},a}const tC=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${ha(e)}Modifiers`]||t[`${Dl(e)}Modifiers`];function GO(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||pi;let i=n;const s=e.startsWith("update:"),o=s&&tC(r,e.slice(7));o&&(o.trim&&(i=n.map(f=>ts(f)?f.trim():f)),o.number&&(i=n.map(K0)));let a,l=r[a=ag(e)]||r[a=ag(ha(e))];!l&&s&&(l=r[a=ag(Dl(e))]),l&&Ou(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ou(c,t,6,i)}}function nC(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!yr(t)){const l=c=>{const f=nC(c,e,!0);f&&(a=!0,Wi(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Bi(t)&&r.set(t,null),null):(qn(s)?s.forEach(l=>o[l]=null):Wi(o,s),Bi(t)&&r.set(t,o),o)}function Yv(t,e){return!t||!rm(e)?!1:(e=e.slice(2).replace(/Once$/,""),Si(t,e[0].toLowerCase()+e.slice(1))||Si(t,Dl(e))||Si(t,e))}function C0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:f,props:p,data:y,setupState:m,ctx:C,inheritAttrs:S}=t,T=Bg(t);let O,D;try{if(n.shapeFlag&4){const U=i||r,G=U;O=Ol(c.call(G,U,f,p,m,y,C)),D=a}else{const U=e;O=Ol(U.length>1?U(p,{attrs:a,slots:o,emit:l}):U(p,null)),D=e.props?a:YO(a)}}catch(U){dg.length=0,rd(U,t,1),O=Kr(Co)}let N=O;if(D&&S!==!1){const U=Object.keys(D),{shapeFlag:G}=N;U.length&&G&7&&(s&&U.some(mb)&&(D=ZO(D,s)),N=zc(N,D,!1,!0))}return n.dirs&&(N=zc(N,null,!1,!0),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&_h(N,n.transition),O=N,Bg(T),O}function qO(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(wh(i)){if(i.type!==Co||i.children==="v-if"){if(n)return;n=i}}else return}return n}const YO=t=>{let e;for(const n in t)(n==="class"||n==="style"||rm(n))&&((e||(e={}))[n]=t[n]);return e},ZO=(t,e)=>{const n={};for(const r in t)(!mb(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function KO(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?ux(r,o,c):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const y=f[p];if(o[y]!==r[y]&&!Yv(c,y))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?ux(r,o,c):!0:!!o;return!1}function ux(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Yv(n,s))return!0}return!1}function Zv({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const iv=t=>t.__isSuspense;let u2=0;const XO={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)QO(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}eD(t,e,n,r,i,o,a,l,c)}},hydrate:tD,normalize:nD},JO=XO;function zg(t,e){const n=t.props&&t.props[e];yr(n)&&n()}function QO(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:f}}=l,p=f("div"),y=t.suspense=rC(t,i,r,e,p,n,s,o,a,l);c(null,y.pendingBranch=t.ssContent,p,null,r,y,s,o),y.deps>0?(zg(t,"onPending"),zg(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),Xd(y,t.ssFallback)):y.resolve(!1,!0)}function eD(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:f}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const y=e.ssContent,m=e.ssFallback,{activeBranch:C,pendingBranch:S,isInFallback:T,isHydrating:O}=p;if(S)p.pendingBranch=y,nc(y,S)?(l(S,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():T&&(O||(l(C,m,n,r,i,null,s,o,a),Xd(p,m)))):(p.pendingId=u2++,O?(p.isHydrating=!1,p.activeBranch=S):c(S,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=f("div"),T?(l(null,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(C,m,n,r,i,null,s,o,a),Xd(p,m))):C&&nc(y,C)?(l(C,y,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(C&&nc(y,C))l(C,y,n,r,i,p,s,o,a),Xd(p,y);else if(zg(e,"onPending"),p.pendingBranch=y,y.shapeFlag&512?p.pendingId=y.component.suspenseId:p.pendingId=u2++,l(null,y,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:D,pendingId:N}=p;D>0?setTimeout(()=>{p.pendingId===N&&p.fallback(m)},D):D===0&&p.fallback(m)}}function rC(t,e,n,r,i,s,o,a,l,c,f=!1){const{p,m:y,um:m,n:C,o:{parentNode:S,remove:T}}=c;let O;const D=rD(t);D&&e&&e.pendingBranch&&(O=e.pendingId,e.deps++);const N=t.props?X0(t.props.timeout):void 0,U=s,G={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:u2++,timeout:typeof N=="number"?N:-1,activeBranch:null,pendingBranch:null,isInFallback:!f,isHydrating:f,isUnmounted:!1,effects:[],resolve(J=!1,ee=!1){const{vnode:V,activeBranch:K,pendingBranch:pe,pendingId:$,effects:H,parentComponent:oe,container:ie}=G;let R=!1;G.isHydrating?G.isHydrating=!1:J||(R=K&&pe.transition&&pe.transition.mode==="out-in",R&&(K.transition.afterLeave=()=>{$===G.pendingId&&(y(pe,ie,s===U?C(K):s,0),Ig(H))}),K&&(S(K.el)===ie&&(s=C(K)),m(K,oe,G,!0)),R||y(pe,ie,s,0)),Xd(G,pe),G.pendingBranch=null,G.isInFallback=!1;let j=G.parent,q=!1;for(;j;){if(j.pendingBranch){j.effects.push(...H),q=!0;break}j=j.parent}!q&&!R&&Ig(H),G.effects=[],D&&e&&e.pendingBranch&&O===e.pendingId&&(e.deps--,e.deps===0&&!ee&&e.resolve()),zg(V,"onResolve")},fallback(J){if(!G.pendingBranch)return;const{vnode:ee,activeBranch:V,parentComponent:K,container:pe,namespace:$}=G;zg(ee,"onFallback");const H=C(V),oe=()=>{G.isInFallback&&(p(null,J,pe,H,K,null,$,a,l),Xd(G,J))},ie=J.transition&&J.transition.mode==="out-in";ie&&(V.transition.afterLeave=oe),G.isInFallback=!0,m(V,K,null,!0),ie||oe()},move(J,ee,V){G.activeBranch&&y(G.activeBranch,J,ee,V),G.container=J},next(){return G.activeBranch&&C(G.activeBranch)},registerDep(J,ee,V){const K=!!G.pendingBranch;K&&G.deps++;const pe=J.vnode.el;J.asyncDep.catch($=>{rd($,J,0)}).then($=>{if(J.isUnmounted||G.isUnmounted||G.pendingId!==J.suspenseId)return;J.asyncResolved=!0;const{vnode:H}=J;d2(J,$,!1),pe&&(H.el=pe);const oe=!pe&&J.subTree.el;ee(J,H,S(pe||J.subTree.el),pe?null:C(J.subTree),G,o,V),oe&&T(oe),Zv(J,H.el),K&&--G.deps===0&&G.resolve()})},unmount(J,ee){G.isUnmounted=!0,G.activeBranch&&m(G.activeBranch,n,J,ee),G.pendingBranch&&m(G.pendingBranch,n,J,ee)}};return G}function tD(t,e,n,r,i,s,o,a,l){const c=e.suspense=rC(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),f=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),f}function nD(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=cx(r?n.default:n),t.ssFallback=r?cx(n.fallback):Kr(Co)}function cx(t){let e;if(yr(t)){const n=Xf&&t._c;n&&(t._d=!1,Ie()),t=t(),n&&(t._d=!0,e=Fa,sC())}return qn(t)&&(t=qO(t)),t=Ol(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function iC(t,e){e&&e.pendingBranch?qn(t)?e.effects.push(...t):e.effects.push(t):Ig(t)}function Xd(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Zv(r,i))}function rD(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const bn=Symbol.for("v-fgt"),ef=Symbol.for("v-txt"),Co=Symbol.for("v-cmt"),Hf=Symbol.for("v-stc"),dg=[];let Fa=null;function Ie(t=!1){dg.push(Fa=t?null:[])}function sC(){dg.pop(),Fa=dg[dg.length-1]||null}let Xf=1;function c2(t,e=!1){Xf+=t,t<0&&Fa&&e&&(Fa.hasOnce=!0)}function oC(t){return t.dynamicChildren=Xf>0?Fa||Gd:null,sC(),Xf>0&&Fa&&Fa.push(t),t}function je(t,e,n,r,i,s){return oC(P(t,e,n,r,i,s,!0))}function Lo(t,e,n,r,i){return oC(Kr(t,e,n,r,i,!0))}function wh(t){return t?t.__v_isVNode===!0:!1}function nc(t,e){return t.type===e.type&&t.key===e.key}function iD(t){}const aC=({key:t})=>t??null,S0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?ts(t)||Rs(t)||yr(t)?{i:To,r:t,k:e,f:!!n}:t:null);function P(t,e=null,n=null,r=0,i=null,s=t===bn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&aC(e),ref:e&&S0(e),scopeId:Hv,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:To};return a?(Vb(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=ts(n)?8:16),Xf>0&&!o&&Fa&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Fa.push(l),l}const Kr=sD;function sD(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===TL)&&(t=Co),wh(t)){const a=zc(t,e,!0);return n&&Vb(a,n),Xf>0&&!s&&Fa&&(a.shapeFlag&6?Fa[Fa.indexOf(t)]=a:Fa.push(a)),a.patchFlag=-2,a}if(fD(t)&&(t=t.__vccOpts),e){e=lC(e);let{class:a,style:l}=e;a&&!ts(a)&&(e.class=Ei(a)),Bi(l)&&($v(l)&&!qn(l)&&(l=Wi({},l)),e.style=Rl(l))}const o=ts(t)?1:iv(t)?128:mL(t)?64:Bi(t)?4:yr(t)?2:0;return P(t,e,n,r,i,o,s,!0)}function lC(t){return t?$v(t)||jL(t)?Wi({},t):t:null}function zc(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?uC(i||{},e):i,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&aC(c),ref:e&&e.ref?n&&s?qn(s)?s.concat(S0(e)):[s,S0(e)]:S0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==bn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&zc(t.ssContent),ssFallback:t.ssFallback&&zc(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&_h(f,l.clone(f)),f}function zr(t=" ",e=0){return Kr(ef,null,t,e)}function lu(t,e){const n=Kr(Hf,null,t);return n.staticCount=e,n}function Kt(t="",e=!1){return e?(Ie(),Lo(Co,null,t)):Kr(Co,null,t)}function Ol(t){return t==null||typeof t=="boolean"?Kr(Co):qn(t)?Kr(bn,null,t.slice()):wh(t)?$h(t):Kr(ef,null,String(t))}function $h(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:zc(t)}function Vb(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(qn(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Vb(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!jL(e)?e._ctx=To:i===3&&To&&(To.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else yr(e)?(e={default:e,_ctx:To},n=32):(e=String(e),r&64?(n=16,e=[zr(e)]):n=8);t.children=e,t.shapeFlag|=n}function uC(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Ei([e.class,r.class]));else if(i==="style")e.style=Rl([e.style,r.style]);else if(rm(i)){const s=e[i],o=r[i];o&&s!==o&&!(qn(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Ml(t,e,n,r=null){Ou(t,e,7,[n,r])}const oD=NL();let aD=0;function cC(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||oD,s={uid:aD++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _b(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:UL(r,i),emitsOptions:nC(r,i),emit:null,emitted:null,propsDefaults:pi,inheritAttrs:r.inheritAttrs,ctx:pi,data:pi,props:pi,attrs:pi,slots:pi,refs:pi,setupState:pi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=GO.bind(null,s),t.ce&&t.ce(s),s}let Ao=null;const Iu=()=>Ao||To;let sv,h2;{const t=Bv(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};sv=e("__VUE_INSTANCE_SETTERS__",n=>Ao=n),h2=e("__VUE_SSR_SETTERS__",n=>ip=n)}const Jf=t=>{const e=Ao;return sv(t),t.scope.on(),()=>{t.scope.off(),sv(e)}},f2=()=>{Ao&&Ao.scope.off(),sv(null)};function hC(t){return t.vnode.shapeFlag&4}let ip=!1;function fC(t,e=!1,n=!1){e&&h2(e);const{props:r,children:i}=t.vnode,s=hC(t);BO(t,r,s,e),zO(t,i,n);const o=s?lD(t,e):void 0;return e&&h2(!1),o}function lD(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,s2);const{setup:r}=n;if(r){cf();const i=t.setupContext=r.length>1?pC(t):null,s=Jf(t),o=gp(r,t,0,[t.props,i]),a=yb(o);if(hf(),s(),(a||t.sp)&&!Qh(t)&&Ib(t),a){if(o.then(f2,f2),e)return o.then(l=>{d2(t,l,e)}).catch(l=>{rd(l,t,0)});t.asyncDep=o}else d2(t,o,e)}else dC(t,e)}function d2(t,e,n){yr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Bi(e)&&(t.setupState=Mb(e)),dC(t,n)}let ov,p2;function uD(t){ov=t,p2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,gO))}}const cD=()=>!ov;function dC(t,e,n){const r=t.type;if(!t.render){if(!e&&ov&&!r.render){const i=r.template||zb(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Wi(Wi({isCustomElement:s,delimiters:a},o),l);r.render=ov(i,c)}}t.render=r.render||Mu,p2&&p2(t)}{const i=Jf(t);cf();try{MO(t)}finally{hf(),i()}}}const hD={get(t,e){return Da(t,"get",""),t[e]}};function pC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,hD),slots:t.slots,emit:t.emit,expose:e}}function am(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Mb(Vv(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in hg)return hg[n](t)},has(e,n){return n in e||n in hg}})):t.proxy}function g2(t,e=!0){return yr(t)?t.displayName||t.name:t.name||e&&t.__name}function fD(t){return yr(t)&&"__vccOpts"in t}const tr=(t,e)=>M8(t,e,ip);function Kv(t,e,n){const r=arguments.length;return r===2?Bi(e)&&!qn(e)?wh(e)?Kr(t,null,[e]):Kr(t,e):Kr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&wh(n)&&(n=[n]),Kr(t,e,n))}function dD(){}function pD(t,e,n,r){const i=n[r];if(i&&gC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function gC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(sl(n[r],e[r]))return!1;return Xf>0&&Fa&&Fa.push(t),!0}const mC="3.5.13",gD=Mu,mD=F8,vD=Rd,yD=pL,bD={createComponentInstance:cC,setupComponent:fC,renderComponentRoot:C0,setCurrentRenderingInstance:Bg,isVNode:wh,normalizeVNode:Ol,getComponentPublicInstance:am,ensureValidVNode:jb,pushWarningContext:I8,popWarningContext:N8},_D=bD,wD=null,xD=null,LD=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let m2;const hx=typeof window<"u"&&window.trustedTypes;if(hx)try{m2=hx.createPolicy("vue",{createHTML:t=>t})}catch{}const vC=m2?t=>m2.createHTML(t):t=>t,CD="http://www.w3.org/2000/svg",SD="http://www.w3.org/1998/Math/MathML",ch=typeof document<"u"?document:null,fx=ch&&ch.createElement("template"),ED={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?ch.createElementNS(CD,t):e==="mathml"?ch.createElementNS(SD,t):n?ch.createElement(t,{is:n}):ch.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>ch.createTextNode(t),createComment:t=>ch.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ch.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{fx.innerHTML=vC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=fx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Oh="transition",kp="animation",sp=Symbol("_vtc"),yC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},bC=Wi({},Db,yC),PD=t=>(t.displayName="Transition",t.props=bC,t),v2=PD((t,{slots:e})=>Kv(wL,_C(t),e)),Sf=(t,e=[])=>{qn(t)?t.forEach(n=>n(...e)):t&&t(...e)},dx=t=>t?qn(t)?t.some(e=>e.length>1):t.length>1:!1;function _C(t){const e={};for(const H in t)H in yC||(e[H]=t[H]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:f=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:y=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,C=kD(i),S=C&&C[0],T=C&&C[1],{onBeforeEnter:O,onEnter:D,onEnterCancelled:N,onLeave:U,onLeaveCancelled:G,onBeforeAppear:J=O,onAppear:ee=D,onAppearCancelled:V=N}=e,K=(H,oe,ie,R)=>{H._enterCancelled=R,Rh(H,oe?f:a),Rh(H,oe?c:o),ie&&ie()},pe=(H,oe)=>{H._isLeaving=!1,Rh(H,p),Rh(H,m),Rh(H,y),oe&&oe()},$=H=>(oe,ie)=>{const R=H?ee:D,j=()=>K(oe,H,ie);Sf(R,[oe,j]),px(()=>{Rh(oe,H?l:s),Ec(oe,H?f:a),dx(R)||gx(oe,r,S,j)})};return Wi(e,{onBeforeEnter(H){Sf(O,[H]),Ec(H,s),Ec(H,o)},onBeforeAppear(H){Sf(J,[H]),Ec(H,l),Ec(H,c)},onEnter:$(!1),onAppear:$(!0),onLeave(H,oe){H._isLeaving=!0;const ie=()=>pe(H,oe);Ec(H,p),H._enterCancelled?(Ec(H,y),y2()):(y2(),Ec(H,y)),px(()=>{H._isLeaving&&(Rh(H,p),Ec(H,m),dx(U)||gx(H,r,T,ie))}),Sf(U,[H,ie])},onEnterCancelled(H){K(H,!1,void 0,!0),Sf(N,[H])},onAppearCancelled(H){K(H,!0,void 0,!0),Sf(V,[H])},onLeaveCancelled(H){pe(H),Sf(G,[H])}})}function kD(t){if(t==null)return null;if(Bi(t))return[i1(t.enter),i1(t.leave)];{const e=i1(t);return[e,e]}}function i1(t){return X0(t)}function Ec(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[sp]||(t[sp]=new Set)).add(e)}function Rh(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[sp];n&&(n.delete(e),n.size||(t[sp]=void 0))}function px(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let MD=0;function gx(t,e,n,r){const i=t._endId=++MD,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=wC(t,e);if(!o)return r();const c=o+"end";let f=0;const p=()=>{t.removeEventListener(c,y),s()},y=m=>{m.target===t&&++f>=l&&p()};setTimeout(()=>{f<l&&p()},a+1),t.addEventListener(c,y)}function wC(t,e){const n=window.getComputedStyle(t),r=C=>(n[C]||"").split(", "),i=r(`${Oh}Delay`),s=r(`${Oh}Duration`),o=mx(i,s),a=r(`${kp}Delay`),l=r(`${kp}Duration`),c=mx(a,l);let f=null,p=0,y=0;e===Oh?o>0&&(f=Oh,p=o,y=s.length):e===kp?c>0&&(f=kp,p=c,y=l.length):(p=Math.max(o,c),f=p>0?o>c?Oh:kp:null,y=f?f===Oh?s.length:l.length:0);const m=f===Oh&&/\b(transform|all)(,|$)/.test(r(`${Oh}Property`).toString());return{type:f,timeout:p,propCount:y,hasTransform:m}}function mx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>vx(n)+vx(t[r])))}function vx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function y2(){return document.body.offsetHeight}function AD(t,e,n){const r=t[sp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const av=Symbol("_vod"),xC=Symbol("_vsh"),Hb={beforeMount(t,{value:e},{transition:n}){t[av]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Mp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Mp(t,!0),r.enter(t)):r.leave(t,()=>{Mp(t,!1)}):Mp(t,e))},beforeUnmount(t,{value:e}){Mp(t,e)}};function Mp(t,e){t.style.display=e?t[av]:"none",t[xC]=!e}function TD(){Hb.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const LC=Symbol("");function OD(t){const e=Iu();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>lv(s,i))},r=()=>{const i=t(e.proxy);e.ce?lv(e.ce,i):b2(e.subTree,i),n(i)};Nb(()=>{Ig(r)}),Ks(()=>{yi(r,Mu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Au(()=>i.disconnect())})}function b2(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{b2(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)lv(t.el,e);else if(t.type===bn)t.children.forEach(n=>b2(n,e));else if(t.type===Hf){let{el:n,anchor:r}=t;for(;n&&(lv(n,e),n!==r);)n=n.nextSibling}}function lv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[LC]=r}}const DD=/(^|;)\s*display\s*:/;function ID(t,e,n){const r=t.style,i=ts(n);let s=!1;if(n&&!i){if(e)if(ts(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&E0(r,a,"")}else for(const o in e)n[o]==null&&E0(r,o,"");for(const o in n)o==="display"&&(s=!0),E0(r,o,n[o])}else if(i){if(e!==n){const o=r[LC];o&&(n+=";"+o),r.cssText=n,s=DD.test(n)}}else e&&t.removeAttribute("style");av in t&&(t[av]=s?r.display:"",t[xC]&&(r.display="none"))}const yx=/\s*!important$/;function E0(t,e,n){if(qn(n))n.forEach(r=>E0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=ND(t,e);yx.test(n)?t.setProperty(Dl(r),n.replace(yx,""),"important"):t[r]=n}}const bx=["Webkit","Moz","ms"],s1={};function ND(t,e){const n=s1[e];if(n)return n;let r=ha(e);if(r!=="filter"&&r in t)return s1[e]=r;r=im(r);for(let i=0;i<bx.length;i++){const s=bx[i]+r;if(s in t)return s1[e]=s}return e}const _x="http://www.w3.org/1999/xlink";function wx(t,e,n,r,i,s=KT(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(_x,e.slice(6,e.length)):t.setAttributeNS(_x,e,n):n==null||s&&!U3(n)?t.removeAttribute(e):t.setAttribute(e,s?"":ac(n)?String(n):n)}function xx(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?vC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=U3(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function ph(t,e,n,r){t.addEventListener(e,n,r)}function BD(t,e,n,r){t.removeEventListener(e,n,r)}const Lx=Symbol("_vei");function RD(t,e,n,r,i=null){const s=t[Lx]||(t[Lx]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=FD(e);if(r){const c=s[e]=UD(r,i);ph(t,a,c,l)}else o&&(BD(t,a,o,l),s[e]=void 0)}}const Cx=/(?:Once|Passive|Capture)$/;function FD(t){let e;if(Cx.test(t)){e={};let r;for(;r=t.match(Cx);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Dl(t.slice(2)),e]}let o1=0;const jD=Promise.resolve(),zD=()=>o1||(jD.then(()=>o1=0),o1=Date.now());function UD(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ou($D(r,n.value),e,5,[r])};return n.value=t,n.attached=zD(),n}function $D(t,e){if(qn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Sx=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,VD=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?AD(t,r,o):e==="style"?ID(t,n,r):rm(e)?mb(e)||RD(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):HD(t,e,r,o))?(xx(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&wx(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ts(r))?xx(t,ha(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),wx(t,e,r,o))};function HD(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Sx(e)&&yr(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Sx(e)&&ts(n)?!1:e in t}const Ex={};/*! #__NO_SIDE_EFFECTS__ */function CC(t,e,n){const r=_s(t,e);Iv(r)&&Wi(r,e);class i extends Xv{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const WD=(t,e)=>CC(t,e,IC),GD=typeof HTMLElement<"u"?HTMLElement:class{};class Xv extends GD{constructor(e,n={},r=cv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==cv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Xv){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,al(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!qn(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=X0(this._props[l])),(a||(a=Object.create(null)))[ha(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Si(this,r)||Object.defineProperty(this,r,{get:()=>cn(n[r])})}_resolveProps(e){const{props:n}=e,r=qn(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(ha))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):Ex;const i=ha(e);n&&this._numberProps&&this._numberProps[i]&&(r=X0(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===Ex?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Dl(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Dl(e),n+""):n||this.removeAttribute(Dl(e)),s&&s.observe(this,{attributes:!0})}}_update(){DC(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=Kr(this._def,Wi(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,Iv(o[0])?Wi({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Dl(s)!==s&&i(Dl(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",f=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=f.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function SC(t){const e=Iu(),n=e&&e.ce;return n||null}function qD(){const t=SC();return t&&t.shadowRoot}function YD(t="$style"){{const e=Iu();if(!e)return pi;const n=e.type.__cssModules;if(!n)return pi;const r=n[t];return r||pi}}const EC=new WeakMap,PC=new WeakMap,uv=Symbol("_moveCb"),Px=Symbol("_enterCb"),ZD=t=>(delete t.props.mode,t),KD=ZD({name:"TransitionGroup",props:Wi({},bC,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Iu(),r=Ob();let i,s;return qv(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!tI(i[0].el,n.vnode.el,o))return;i.forEach(JD),i.forEach(QD);const a=i.filter(eI);y2(),a.forEach(l=>{const c=l.el,f=c.style;Ec(c,o),f.transform=f.webkitTransform=f.transitionDuration="";const p=c[uv]=y=>{y&&y.target!==c||(!y||/transform$/.test(y.propertyName))&&(c.removeEventListener("transitionend",p),c[uv]=null,Rh(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=fi(t),a=_C(o);let l=o.tag||bn;if(i=[],s)for(let c=0;c<s.length;c++){const f=s[c];f.el&&f.el instanceof Element&&(i.push(f),_h(f,rp(f,a,r,n)),EC.set(f,f.el.getBoundingClientRect()))}s=e.default?Wv(e.default()):[];for(let c=0;c<s.length;c++){const f=s[c];f.key!=null&&_h(f,rp(f,a,r,n))}return Kr(l,null,s)}}}),XD=KD;function JD(t){const e=t.el;e[uv]&&e[uv](),e[Px]&&e[Px]()}function QD(t){PC.set(t,t.el.getBoundingClientRect())}function eI(t){const e=EC.get(t),n=PC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function tI(t,e,n){const r=t.cloneNode(),i=t[sp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=wC(r);return s.removeChild(r),o}const sf=t=>{const e=t.props["onUpdate:modelValue"]||!1;return qn(e)?n=>Zd(e,n):e};function nI(t){t.target.composing=!0}function kx(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Tu=Symbol("_assign"),di={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Tu]=sf(i);const s=r||i.props&&i.props.type==="number";ph(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=K0(a)),t[Tu](a)}),n&&ph(t,"change",()=>{t.value=t.value.trim()}),e||(ph(t,"compositionstart",nI),ph(t,"compositionend",kx),ph(t,"change",kx))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Tu]=sf(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?K0(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Al={deep:!0,created(t,e,n){t[Tu]=sf(n),ph(t,"change",()=>{const r=t._modelValue,i=op(t),s=t.checked,o=t[Tu];if(qn(r)){const a=Rv(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(nd(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(kC(t,s))})},mounted:Mx,beforeUpdate(t,e,n){t[Tu]=sf(n),Mx(t,e,n)}};function Mx(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(qn(e))i=Rv(e,r.props.value)>-1;else if(nd(e))i=e.has(r.props.value);else{if(e===n)return;i=nf(e,kC(t,!0))}t.checked!==i&&(t.checked=i)}const Wb={created(t,{value:e},n){t.checked=nf(e,n.props.value),t[Tu]=sf(n),ph(t,"change",()=>{t[Tu](op(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Tu]=sf(r),e!==n&&(t.checked=nf(e,r.props.value))}},os={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=nd(e);ph(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?K0(op(o)):op(o));t[Tu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,al(()=>{t._assigning=!1})}),t[Tu]=sf(r)},mounted(t,{value:e}){Ax(t,e)},beforeUpdate(t,e,n){t[Tu]=sf(n)},updated(t,{value:e}){t._assigning||Ax(t,e)}};function Ax(t,e){const n=t.multiple,r=qn(e);if(!(n&&!r&&!nd(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=op(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Rv(e,a)>-1}else o.selected=e.has(a);else if(nf(op(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function op(t){return"_value"in t?t._value:t.value}function kC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Gb={created(t,e,n){qm(t,e,n,null,"created")},mounted(t,e,n){qm(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){qm(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){qm(t,e,n,r,"updated")}};function MC(t,e){switch(t){case"SELECT":return os;case"TEXTAREA":return di;default:switch(e){case"checkbox":return Al;case"radio":return Wb;default:return di}}}function qm(t,e,n,r,i){const o=MC(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function rI(){di.getSSRProps=({value:t})=>({value:t}),Wb.getSSRProps=({value:t},e)=>{if(e.props&&nf(e.props.value,t))return{checked:!0}},Al.getSSRProps=({value:t},e)=>{if(qn(t)){if(e.props&&Rv(t,e.props.value)>-1)return{checked:!0}}else if(nd(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},Gb.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=MC(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const iI=["ctrl","shift","alt","meta"],sI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>iI.some(n=>t[`${n}Key`]&&!e.includes(n))},Bl=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=sI[e[o]];if(a&&a(i,e))return}return t(i,...s)})},oI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},aI=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Dl(i.key);if(e.some(o=>o===s||oI[o]===s))return t(i)})},AC=Wi({patchProp:VD},ED);let pg,Tx=!1;function TC(){return pg||(pg=GL(AC))}function OC(){return pg=Tx?pg:qL(AC),Tx=!0,pg}const DC=(...t)=>{TC().render(...t)},lI=(...t)=>{OC().hydrate(...t)},cv=(...t)=>{const e=TC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=BC(r);if(!i)return;const s=e._component;!yr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,NC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},IC=(...t)=>{const e=OC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=BC(r);if(i)return n(i,!0,NC(i))},e};function NC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function BC(t){return ts(t)?document.querySelector(t):t}let Ox=!1;const uI=()=>{Ox||(Ox=!0,rI(),TD())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const cI=()=>{},hI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:wL,BaseTransitionPropsValidators:Db,Comment:Co,DeprecationTypes:LD,EffectScope:_b,ErrorCodes:R8,ErrorTypeStrings:mD,Fragment:bn,KeepAlive:lO,ReactiveEffect:Tg,Static:Hf,Suspense:JO,Teleport:Fd,Text:ef,TrackOpTypes:A8,Transition:v2,TransitionGroup:XD,TriggerOpTypes:T8,VueElement:Xv,assertNumber:B8,callWithAsyncErrorHandling:Ou,callWithErrorHandling:gp,camelize:ha,capitalize:im,cloneVNode:zc,compatUtils:xD,compile:cI,computed:tr,createApp:cv,createBlock:Lo,createCommentVNode:Kt,createElementBlock:je,createElementVNode:P,createHydrationRenderer:qL,createPropsRestProxy:PO,createRenderer:GL,createSSRApp:IC,createSlots:fO,createStaticVNode:lu,createTextVNode:zr,createVNode:Kr,customRef:aL,defineAsyncComponent:oO,defineComponent:_s,defineCustomElement:CC,defineEmits:vO,defineExpose:yO,defineModel:wO,defineOptions:bO,defineProps:mO,defineSSRCustomElement:WD,defineSlots:_O,devtools:vD,effect:QT,effectScope:wb,getCurrentInstance:Iu,getCurrentScope:xb,getCurrentWatcher:O8,getTransitionRawChildren:Wv,guardReactiveProps:lC,h:Kv,handleError:rd,hasInjectionContext:BL,hydrate:lI,hydrateOnIdle:eO,hydrateOnInteraction:iO,hydrateOnMediaQuery:rO,hydrateOnVisible:nO,initCustomFormatter:dD,initDirectivesForSSR:uI,inject:au,isMemoSame:gC,isProxy:$v,isReactive:Bc,isReadonly:rf,isRef:Rs,isRuntimeOnly:cD,isShallow:ou,isVNode:wh,markRaw:Vv,mergeDefaults:SO,mergeModels:EO,mergeProps:uC,nextTick:al,normalizeClass:Ei,normalizeProps:YT,normalizeStyle:Rl,onActivated:LL,onBeforeMount:EL,onBeforeUnmount:ff,onBeforeUpdate:Nb,onDeactivated:CL,onErrorCaptured:AL,onMounted:Ks,onRenderTracked:ML,onRenderTriggered:kL,onScopeDispose:H3,onServerPrefetch:PL,onUnmounted:Au,onUpdated:qv,onWatcherCleanup:uL,openBlock:Ie,popScopeId:$8,provide:fg,proxyRefs:Mb,pushScopeId:U8,queuePostFlushCb:Ig,reactive:cu,readonly:Pb,ref:kt,registerRuntimeCompiler:uD,render:DC,renderList:sr,renderSlot:dO,resolveComponent:Rb,resolveDirective:hO,resolveDynamicComponent:OL,resolveFilter:wD,resolveTransitionHooks:rp,setBlockTracking:c2,setDevtoolsHook:yD,setTransitionHooks:_h,shallowReactive:Eb,shallowReadonly:b8,shallowRef:kb,ssrContextKey:XL,ssrUtils:_D,stop:e8,toDisplayString:Ut,toHandlerKey:ag,toHandlers:pO,toRaw:fi,toRef:P8,toRefs:Ab,toValue:x8,transformVNodeArgs:iD,triggerRef:w8,unref:cn,useAttrs:CO,useCssModule:YD,useCssVars:OD,useHost:SC,useId:G8,useModel:WO,useSSRContext:JL,useShadowRoot:qD,useSlots:LO,useTemplateRef:q8,useTransitionState:Ob,vModelCheckbox:Al,vModelDynamic:Gb,vModelRadio:Wb,vModelSelect:os,vModelText:di,vShow:Hb,version:mC,warn:gD,watch:yi,watchEffect:jg,watchPostEffect:VO,watchSyncEffect:QL,withAsyncContext:kO,withCtx:Il,withDefaults:xO,withDirectives:jn,withKeys:aI,withMemo:pD,withModifiers:Bl,withScopeId:V8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let RC;const Jv=t=>RC=t,FC=Symbol();function _2(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var gg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(gg||(gg={}));function fI(){const t=wb(!0),e=t.run(()=>kt({}));let n=[],r=[];const i=Vv({install(s){Jv(i),i._a=s,s.provide(FC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const jC=()=>{};function Dx(t,e,n,r=jC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&xb()&&H3(i),i}function Ed(t,...e){t.slice().forEach(n=>{n(...e)})}const dI=t=>t(),Ix=Symbol(),a1=Symbol();function w2(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];_2(i)&&_2(r)&&t.hasOwnProperty(n)&&!Rs(r)&&!Bc(r)?t[n]=w2(i,r):t[n]=r}return t}const pI=Symbol();function gI(t){return!_2(t)||!t.hasOwnProperty(pI)}const{assign:Fh}=Object;function mI(t){return!!(Rs(t)&&t.effect)}function vI(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const f=Ab(n.state.value[t]);return Fh(f,s,Object.keys(o||{}).reduce((p,y)=>(p[y]=Vv(tr(()=>{Jv(n);const m=n._s.get(t);return o[y].call(m,m)})),p),{}))}return l=zC(t,c,e,n,r,!0),l}function zC(t,e,n={},r,i,s){let o;const a=Fh({actions:{}},n),l={deep:!0};let c,f,p=[],y=[],m;const C=r.state.value[t];!s&&!C&&(r.state.value[t]={}),kt({});let S;function T(V){let K;c=f=!1,typeof V=="function"?(V(r.state.value[t]),K={type:gg.patchFunction,storeId:t,events:m}):(w2(r.state.value[t],V),K={type:gg.patchObject,payload:V,storeId:t,events:m});const pe=S=Symbol();al().then(()=>{S===pe&&(c=!0)}),f=!0,Ed(p,K,r.state.value[t])}const O=s?function(){const{state:K}=n,pe=K?K():{};this.$patch($=>{Fh($,pe)})}:jC;function D(){o.stop(),p=[],y=[],r._s.delete(t)}const N=(V,K="")=>{if(Ix in V)return V[a1]=K,V;const pe=function(){Jv(r);const $=Array.from(arguments),H=[],oe=[];function ie(q){H.push(q)}function R(q){oe.push(q)}Ed(y,{args:$,name:pe[a1],store:G,after:ie,onError:R});let j;try{j=V.apply(this&&this.$id===t?this:G,$)}catch(q){throw Ed(oe,q),q}return j instanceof Promise?j.then(q=>(Ed(H,q),q)).catch(q=>(Ed(oe,q),Promise.reject(q))):(Ed(H,j),j)};return pe[Ix]=!0,pe[a1]=K,pe},U={_p:r,$id:t,$onAction:Dx.bind(null,y),$patch:T,$reset:O,$subscribe(V,K={}){const pe=Dx(p,V,K.detached,()=>$()),$=o.run(()=>yi(()=>r.state.value[t],H=>{(K.flush==="sync"?f:c)&&V({storeId:t,type:gg.direct,events:m},H)},Fh({},l,K)));return pe},$dispose:D},G=cu(U);r._s.set(t,G);const ee=(r._a&&r._a.runWithContext||dI)(()=>r._e.run(()=>(o=wb()).run(()=>e({action:N}))));for(const V in ee){const K=ee[V];if(Rs(K)&&!mI(K)||Bc(K))s||(C&&gI(K)&&(Rs(K)?K.value=C[V]:w2(K,C[V])),r.state.value[t][V]=K);else if(typeof K=="function"){const pe=N(K,V);ee[V]=pe,a.actions[V]=K}}return Fh(G,ee),Fh(fi(G),ee),Object.defineProperty(G,"$state",{get:()=>r.state.value[t],set:V=>{T(K=>{Fh(K,V)})}}),r._p.forEach(V=>{Fh(G,o.run(()=>V({store:G,app:r._a,pinia:r,options:a})))}),C&&s&&n.hydrate&&n.hydrate(G.$state,C),c=!0,f=!0,G}/*! #__NO_SIDE_EFFECTS__ */function mp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=BL();return a=a||(c?au(FC,null):null),a&&Jv(a),a=RC,a._s.has(r)||(s?zC(r,e,i,a):vI(r,i,a)),a._s.get(r)}return o.$id=r,o}function UC(t,e){return function(){return t.apply(e,arguments)}}const{toString:yI}=Object.prototype,{getPrototypeOf:qb}=Object,Qv=(t=>e=>{const n=yI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),uc=t=>(t=t.toLowerCase(),e=>Qv(e)===t),ey=t=>e=>typeof e===t,{isArray:vp}=Array,Ug=ey("undefined");function bI(t){return t!==null&&!Ug(t)&&t.constructor!==null&&!Ug(t.constructor)&&uu(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const $C=uc("ArrayBuffer");function _I(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&$C(t.buffer),e}const wI=ey("string"),uu=ey("function"),VC=ey("number"),ty=t=>t!==null&&typeof t=="object",xI=t=>t===!0||t===!1,P0=t=>{if(Qv(t)!=="object")return!1;const e=qb(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},LI=uc("Date"),CI=uc("File"),SI=uc("Blob"),EI=uc("FileList"),PI=t=>ty(t)&&uu(t.pipe),kI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||uu(t.append)&&((e=Qv(t))==="formdata"||e==="object"&&uu(t.toString)&&t.toString()==="[object FormData]"))},MI=uc("URLSearchParams"),[AI,TI,OI,DI]=["ReadableStream","Request","Response","Headers"].map(uc),II=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),vp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function HC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const jf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,WC=t=>!Ug(t)&&t!==jf;function x2(){const{caseless:t}=WC(this)&&this||{},e={},n=(r,i)=>{const s=t&&HC(e,i)||i;P0(e[s])&&P0(r)?e[s]=x2(e[s],r):P0(r)?e[s]=x2({},r):vp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&lm(arguments[r],n);return e}const NI=(t,e,n,{allOwnKeys:r}={})=>(lm(e,(i,s)=>{n&&uu(i)?t[s]=UC(i,n):t[s]=i},{allOwnKeys:r}),t),BI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),RI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},FI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&qb(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},jI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},zI=t=>{if(!t)return null;if(vp(t))return t;let e=t.length;if(!VC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},UI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&qb(Uint8Array)),$I=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},VI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},HI=uc("HTMLFormElement"),WI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Nx=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),GI=uc("RegExp"),GC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};lm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},qI=t=>{GC(t,(e,n)=>{if(uu(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(uu(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},YI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return vp(t)?r(t):r(String(t).split(e)),n},ZI=()=>{},KI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function XI(t){return!!(t&&uu(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const JI=t=>{const e=new Array(10),n=(r,i)=>{if(ty(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=vp(r)?[]:{};return lm(r,(o,a)=>{const l=n(o,i+1);!Ug(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},QI=uc("AsyncFunction"),e7=t=>t&&(ty(t)||uu(t))&&uu(t.then)&&uu(t.catch),qC=((t,e)=>t?setImmediate:e?((n,r)=>(jf.addEventListener("message",({source:i,data:s})=>{i===jf&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),jf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",uu(jf.postMessage)),t7=typeof queueMicrotask<"u"?queueMicrotask.bind(jf):typeof process<"u"&&process.nextTick||qC,Wt={isArray:vp,isArrayBuffer:$C,isBuffer:bI,isFormData:kI,isArrayBufferView:_I,isString:wI,isNumber:VC,isBoolean:xI,isObject:ty,isPlainObject:P0,isReadableStream:AI,isRequest:TI,isResponse:OI,isHeaders:DI,isUndefined:Ug,isDate:LI,isFile:CI,isBlob:SI,isRegExp:GI,isFunction:uu,isStream:PI,isURLSearchParams:MI,isTypedArray:UI,isFileList:EI,forEach:lm,merge:x2,extend:NI,trim:II,stripBOM:BI,inherits:RI,toFlatObject:FI,kindOf:Qv,kindOfTest:uc,endsWith:jI,toArray:zI,forEachEntry:$I,matchAll:VI,isHTMLForm:HI,hasOwnProperty:Nx,hasOwnProp:Nx,reduceDescriptors:GC,freezeMethods:qI,toObjectSet:YI,toCamelCase:WI,noop:ZI,toFiniteNumber:KI,findKey:HC,global:jf,isContextDefined:WC,isSpecCompliantForm:XI,toJSONObject:JI,isAsyncFn:QI,isThenable:e7,setImmediate:qC,asap:t7};function jr(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Wt.inherits(jr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wt.toJSONObject(this.config),code:this.code,status:this.status}}});const YC=jr.prototype,ZC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ZC[t]={value:t}});Object.defineProperties(jr,ZC);Object.defineProperty(YC,"isAxiosError",{value:!0});jr.from=(t,e,n,r,i,s)=>{const o=Object.create(YC);return Wt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),jr.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const n7=null;function L2(t){return Wt.isPlainObject(t)||Wt.isArray(t)}function KC(t){return Wt.endsWith(t,"[]")?t.slice(0,-2):t}function Bx(t,e,n){return t?t.concat(e).map(function(i,s){return i=KC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function r7(t){return Wt.isArray(t)&&!t.some(L2)}const i7=Wt.toFlatObject(Wt,{},null,function(e){return/^is[A-Z]/.test(e)});function ny(t,e,n){if(!Wt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Wt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,T){return!Wt.isUndefined(T[S])});const r=n.metaTokens,i=n.visitor||f,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Wt.isSpecCompliantForm(e);if(!Wt.isFunction(i))throw new TypeError("visitor must be a function");function c(C){if(C===null)return"";if(Wt.isDate(C))return C.toISOString();if(!l&&Wt.isBlob(C))throw new jr("Blob is not supported. Use a Buffer instead.");return Wt.isArrayBuffer(C)||Wt.isTypedArray(C)?l&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function f(C,S,T){let O=C;if(C&&!T&&typeof C=="object"){if(Wt.endsWith(S,"{}"))S=r?S:S.slice(0,-2),C=JSON.stringify(C);else if(Wt.isArray(C)&&r7(C)||(Wt.isFileList(C)||Wt.endsWith(S,"[]"))&&(O=Wt.toArray(C)))return S=KC(S),O.forEach(function(N,U){!(Wt.isUndefined(N)||N===null)&&e.append(o===!0?Bx([S],U,s):o===null?S:S+"[]",c(N))}),!1}return L2(C)?!0:(e.append(Bx(T,S,s),c(C)),!1)}const p=[],y=Object.assign(i7,{defaultVisitor:f,convertValue:c,isVisitable:L2});function m(C,S){if(!Wt.isUndefined(C)){if(p.indexOf(C)!==-1)throw Error("Circular reference detected in "+S.join("."));p.push(C),Wt.forEach(C,function(O,D){(!(Wt.isUndefined(O)||O===null)&&i.call(e,O,Wt.isString(D)?D.trim():D,S,y))===!0&&m(O,S?S.concat(D):[D])}),p.pop()}}if(!Wt.isObject(t))throw new TypeError("data must be an object");return m(t),e}function Rx(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Yb(t,e){this._pairs=[],t&&ny(t,this,e)}const XC=Yb.prototype;XC.append=function(e,n){this._pairs.push([e,n])};XC.toString=function(e){const n=e?function(r){return e.call(this,r,Rx)}:Rx;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function s7(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function JC(t,e,n){if(!e)return t;const r=n&&n.encode||s7;Wt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Wt.isURLSearchParams(e)?e.toString():new Yb(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Fx{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Wt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const QC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},o7=typeof URLSearchParams<"u"?URLSearchParams:Yb,a7=typeof FormData<"u"?FormData:null,l7=typeof Blob<"u"?Blob:null,u7={isBrowser:!0,classes:{URLSearchParams:o7,FormData:a7,Blob:l7},protocols:["http","https","file","blob","url","data"]},Zb=typeof window<"u"&&typeof document<"u",C2=typeof navigator=="object"&&navigator||void 0,c7=Zb&&(!C2||["ReactNative","NativeScript","NS"].indexOf(C2.product)<0),h7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",f7=Zb&&window.location.href||"http://localhost",d7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Zb,hasStandardBrowserEnv:c7,hasStandardBrowserWebWorkerEnv:h7,navigator:C2,origin:f7},Symbol.toStringTag,{value:"Module"})),Na={...d7,...u7};function p7(t,e){return ny(t,new Na.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Na.isNode&&Wt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function g7(t){return Wt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function m7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function eS(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Wt.isArray(i)?i.length:o,l?(Wt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Wt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Wt.isArray(i[o])&&(i[o]=m7(i[o])),!a)}if(Wt.isFormData(t)&&Wt.isFunction(t.entries)){const n={};return Wt.forEachEntry(t,(r,i)=>{e(g7(r),i,n,0)}),n}return null}function v7(t,e,n){if(Wt.isString(t))try{return(e||JSON.parse)(t),Wt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const um={transitional:QC,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Wt.isObject(e);if(s&&Wt.isHTMLForm(e)&&(e=new FormData(e)),Wt.isFormData(e))return i?JSON.stringify(eS(e)):e;if(Wt.isArrayBuffer(e)||Wt.isBuffer(e)||Wt.isStream(e)||Wt.isFile(e)||Wt.isBlob(e)||Wt.isReadableStream(e))return e;if(Wt.isArrayBufferView(e))return e.buffer;if(Wt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return p7(e,this.formSerializer).toString();if((a=Wt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ny(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),v7(e)):e}],transformResponse:[function(e){const n=this.transitional||um.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Wt.isResponse(e)||Wt.isReadableStream(e))return e;if(e&&Wt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?jr.from(a,jr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Na.classes.FormData,Blob:Na.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Wt.forEach(["delete","get","head","post","put","patch"],t=>{um.headers[t]={}});const y7=Wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),b7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&y7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},jx=Symbol("internals");function Ap(t){return t&&String(t).trim().toLowerCase()}function k0(t){return t===!1||t==null?t:Wt.isArray(t)?t.map(k0):String(t)}function _7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const w7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function l1(t,e,n,r,i){if(Wt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Wt.isString(e)){if(Wt.isString(r))return e.indexOf(r)!==-1;if(Wt.isRegExp(r))return r.test(e)}}function x7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function L7(t,e){const n=Wt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Fl=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const f=Ap(l);if(!f)throw new Error("header name must be a non-empty string");const p=Wt.findKey(i,f);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=k0(a))}const o=(a,l)=>Wt.forEach(a,(c,f)=>s(c,f,l));if(Wt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Wt.isString(e)&&(e=e.trim())&&!w7(e))o(b7(e),n);else if(Wt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Ap(e),e){const r=Wt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return _7(i);if(Wt.isFunction(n))return n.call(this,i,r);if(Wt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Ap(e),e){const r=Wt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||l1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Ap(o),o){const a=Wt.findKey(r,o);a&&(!n||l1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Wt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||l1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Wt.forEach(this,(i,s)=>{const o=Wt.findKey(r,s);if(o){n[o]=k0(i),delete n[s];return}const a=e?x7(s):String(s).trim();a!==s&&delete n[s],n[a]=k0(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Wt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Wt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[jx]=this[jx]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Ap(o);r[a]||(L7(i,o),r[a]=!0)}return Wt.isArray(e)?e.forEach(s):s(e),this}};Fl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Wt.reduceDescriptors(Fl.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Wt.freezeMethods(Fl);function u1(t,e){const n=this||um,r=e||n,i=Fl.from(r.headers);let s=r.data;return Wt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function tS(t){return!!(t&&t.__CANCEL__)}function yp(t,e,n){jr.call(this,t??"canceled",jr.ERR_CANCELED,e,n),this.name="CanceledError"}Wt.inherits(yp,jr,{__CANCEL__:!0});function nS(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new jr("Request failed with status code "+n.status,[jr.ERR_BAD_REQUEST,jr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function C7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function S7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),f=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,y=0;for(;p!==i;)y+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=f&&c-f;return m?Math.round(y*1e3/m):void 0}}function E7(t,e){let n=0,r=1e3/e,i,s;const o=(c,f=Date.now())=>{n=f,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const f=Date.now(),p=f-n;p>=r?o(c,f):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const hv=(t,e,n=3)=>{let r=0;const i=S7(50,250);return E7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),f=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&f?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},zx=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Ux=t=>(...e)=>Wt.asap(()=>t(...e)),P7=Na.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Na.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Na.origin),Na.navigator&&/(msie|trident)/i.test(Na.navigator.userAgent)):()=>!0,k7=Na.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Wt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Wt.isString(r)&&o.push("path="+r),Wt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function M7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function A7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function rS(t,e,n){let r=!M7(e);return t&&(r||n==!1)?A7(t,e):e}const $x=t=>t instanceof Fl?{...t}:t;function Qf(t,e){e=e||{};const n={};function r(c,f,p,y){return Wt.isPlainObject(c)&&Wt.isPlainObject(f)?Wt.merge.call({caseless:y},c,f):Wt.isPlainObject(f)?Wt.merge({},f):Wt.isArray(f)?f.slice():f}function i(c,f,p,y){if(Wt.isUndefined(f)){if(!Wt.isUndefined(c))return r(void 0,c,p,y)}else return r(c,f,p,y)}function s(c,f){if(!Wt.isUndefined(f))return r(void 0,f)}function o(c,f){if(Wt.isUndefined(f)){if(!Wt.isUndefined(c))return r(void 0,c)}else return r(void 0,f)}function a(c,f,p){if(p in e)return r(c,f);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,f,p)=>i($x(c),$x(f),p,!0)};return Wt.forEach(Object.keys(Object.assign({},t,e)),function(f){const p=l[f]||i,y=p(t[f],e[f],f);Wt.isUndefined(y)&&p!==a||(n[f]=y)}),n}const iS=t=>{const e=Qf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Fl.from(o),e.url=JC(rS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Wt.isFormData(n)){if(Na.hasStandardBrowserEnv||Na.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...f]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...f].join("; "))}}if(Na.hasStandardBrowserEnv&&(r&&Wt.isFunction(r)&&(r=r(e)),r||r!==!1&&P7(e.url))){const c=i&&s&&k7.read(s);c&&o.set(i,c)}return e},T7=typeof XMLHttpRequest<"u",O7=T7&&function(t){return new Promise(function(n,r){const i=iS(t);let s=i.data;const o=Fl.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,f,p,y,m,C;function S(){m&&m(),C&&C(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function O(){if(!T)return;const N=Fl.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),G={data:!a||a==="text"||a==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:N,config:t,request:T};nS(function(ee){n(ee),S()},function(ee){r(ee),S()},G),T=null}"onloadend"in T?T.onloadend=O:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(O)},T.onabort=function(){T&&(r(new jr("Request aborted",jr.ECONNABORTED,t,T)),T=null)},T.onerror=function(){r(new jr("Network Error",jr.ERR_NETWORK,t,T)),T=null},T.ontimeout=function(){let U=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const G=i.transitional||QC;i.timeoutErrorMessage&&(U=i.timeoutErrorMessage),r(new jr(U,G.clarifyTimeoutError?jr.ETIMEDOUT:jr.ECONNABORTED,t,T)),T=null},s===void 0&&o.setContentType(null),"setRequestHeader"in T&&Wt.forEach(o.toJSON(),function(U,G){T.setRequestHeader(G,U)}),Wt.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),a&&a!=="json"&&(T.responseType=i.responseType),c&&([y,C]=hv(c,!0),T.addEventListener("progress",y)),l&&T.upload&&([p,m]=hv(l),T.upload.addEventListener("progress",p),T.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(f=N=>{T&&(r(!N||N.type?new yp(null,t,T):N),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const D=C7(i.url);if(D&&Na.protocols.indexOf(D)===-1){r(new jr("Unsupported protocol "+D+":",jr.ERR_BAD_REQUEST,t));return}T.send(s||null)})},D7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const f=c instanceof Error?c:this.reason;r.abort(f instanceof jr?f:new yp(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,s(new jr(`timeout ${e} of ms exceeded`,jr.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Wt.asap(a),l}},I7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},N7=async function*(t,e){for await(const n of B7(t))yield*I7(n,e)},B7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Vx=(t,e,n,r)=>{const i=N7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:f}=await i.next();if(c){a(),l.close();return}let p=f.byteLength;if(n){let y=s+=p;n(y)}l.enqueue(new Uint8Array(f))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},ry=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",sS=ry&&typeof ReadableStream=="function",R7=ry&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),oS=(t,...e)=>{try{return!!t(...e)}catch{return!1}},F7=sS&&oS(()=>{let t=!1;const e=new Request(Na.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Hx=64*1024,S2=sS&&oS(()=>Wt.isReadableStream(new Response("").body)),fv={stream:S2&&(t=>t.body)};ry&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!fv[e]&&(fv[e]=Wt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new jr(`Response type '${e}' is not supported`,jr.ERR_NOT_SUPPORT,r)})})})(new Response);const j7=async t=>{if(t==null)return 0;if(Wt.isBlob(t))return t.size;if(Wt.isSpecCompliantForm(t))return(await new Request(Na.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Wt.isArrayBufferView(t)||Wt.isArrayBuffer(t))return t.byteLength;if(Wt.isURLSearchParams(t)&&(t=t+""),Wt.isString(t))return(await R7(t)).byteLength},z7=async(t,e)=>{const n=Wt.toFiniteNumber(t.getContentLength());return n??j7(e)},U7=ry&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:f,withCredentials:p="same-origin",fetchOptions:y}=iS(t);c=c?(c+"").toLowerCase():"text";let m=D7([i,s&&s.toAbortSignal()],o),C;const S=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let T;try{if(l&&F7&&n!=="get"&&n!=="head"&&(T=await z7(f,r))!==0){let G=new Request(e,{method:"POST",body:r,duplex:"half"}),J;if(Wt.isFormData(r)&&(J=G.headers.get("content-type"))&&f.setContentType(J),G.body){const[ee,V]=zx(T,hv(Ux(l)));r=Vx(G.body,Hx,ee,V)}}Wt.isString(p)||(p=p?"include":"omit");const O="credentials"in Request.prototype;C=new Request(e,{...y,signal:m,method:n.toUpperCase(),headers:f.normalize().toJSON(),body:r,duplex:"half",credentials:O?p:void 0});let D=await fetch(C);const N=S2&&(c==="stream"||c==="response");if(S2&&(a||N&&S)){const G={};["status","statusText","headers"].forEach(K=>{G[K]=D[K]});const J=Wt.toFiniteNumber(D.headers.get("content-length")),[ee,V]=a&&zx(J,hv(Ux(a),!0))||[];D=new Response(Vx(D.body,Hx,ee,()=>{V&&V(),S&&S()}),G)}c=c||"text";let U=await fv[Wt.findKey(fv,c)||"text"](D,t);return!N&&S&&S(),await new Promise((G,J)=>{nS(G,J,{data:U,headers:Fl.from(D.headers),status:D.status,statusText:D.statusText,config:t,request:C})})}catch(O){throw S&&S(),O&&O.name==="TypeError"&&/fetch/i.test(O.message)?Object.assign(new jr("Network Error",jr.ERR_NETWORK,t,C),{cause:O.cause||O}):jr.from(O,O&&O.code,t,C)}}),E2={http:n7,xhr:O7,fetch:U7};Wt.forEach(E2,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Wx=t=>`- ${t}`,$7=t=>Wt.isFunction(t)||t===null||t===!1,aS={getAdapter:t=>{t=Wt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!$7(n)&&(r=E2[(o=String(n)).toLowerCase()],r===void 0))throw new jr(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(Wx).join(`
`):" "+Wx(s[0]):"as no adapter specified";throw new jr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:E2};function c1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new yp(null,t)}function Gx(t){return c1(t),t.headers=Fl.from(t.headers),t.data=u1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),aS.getAdapter(t.adapter||um.adapter)(t).then(function(r){return c1(t),r.data=u1.call(t,t.transformResponse,r),r.headers=Fl.from(r.headers),r},function(r){return tS(r)||(c1(t),r&&r.response&&(r.response.data=u1.call(t,t.transformResponse,r.response),r.response.headers=Fl.from(r.response.headers))),Promise.reject(r)})}const lS="1.8.4",iy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{iy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const qx={};iy.transitional=function(e,n,r){function i(s,o){return"[Axios v"+lS+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new jr(i(o," has been removed"+(n?" in "+n:"")),jr.ERR_DEPRECATED);return n&&!qx[o]&&(qx[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};iy.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function V7(t,e,n){if(typeof t!="object")throw new jr("options must be an object",jr.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new jr("option "+s+" must be "+l,jr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new jr("Unknown option "+s,jr.ERR_BAD_OPTION)}}const M0={assertOptions:V7,validators:iy},Cc=M0.validators;let Wf=class{constructor(e){this.defaults=e,this.interceptors={request:new Fx,response:new Fx}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Qf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&M0.assertOptions(r,{silentJSONParsing:Cc.transitional(Cc.boolean),forcedJSONParsing:Cc.transitional(Cc.boolean),clarifyTimeoutError:Cc.transitional(Cc.boolean)},!1),i!=null&&(Wt.isFunction(i)?n.paramsSerializer={serialize:i}:M0.assertOptions(i,{encode:Cc.function,serialize:Cc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),M0.assertOptions(n,{baseUrl:Cc.spelling("baseURL"),withXsrfToken:Cc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Wt.merge(s.common,s[n.method]);s&&Wt.forEach(["delete","get","head","post","put","patch","common"],C=>{delete s[C]}),n.headers=Fl.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(n)===!1||(l=l&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const c=[];this.interceptors.response.forEach(function(S){c.push(S.fulfilled,S.rejected)});let f,p=0,y;if(!l){const C=[Gx.bind(this),void 0];for(C.unshift.apply(C,a),C.push.apply(C,c),y=C.length,f=Promise.resolve(n);p<y;)f=f.then(C[p++],C[p++]);return f}y=a.length;let m=n;for(p=0;p<y;){const C=a[p++],S=a[p++];try{m=C(m)}catch(T){S.call(this,T);break}}try{f=Gx.call(this,m)}catch(C){return Promise.reject(C)}for(p=0,y=c.length;p<y;)f=f.then(c[p++],c[p++]);return f}getUri(e){e=Qf(this.defaults,e);const n=rS(e.baseURL,e.url,e.allowAbsoluteUrls);return JC(n,e.params,e.paramsSerializer)}};Wt.forEach(["delete","get","head","options"],function(e){Wf.prototype[e]=function(n,r){return this.request(Qf(r||{},{method:e,url:n,data:(r||{}).data}))}});Wt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Qf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Wf.prototype[e]=n(),Wf.prototype[e+"Form"]=n(!0)});let H7=class uS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new yp(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new uS(function(i){e=i}),cancel:e}}};function W7(t){return function(n){return t.apply(null,n)}}function G7(t){return Wt.isObject(t)&&t.isAxiosError===!0}const P2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(P2).forEach(([t,e])=>{P2[e]=t});function cS(t){const e=new Wf(t),n=UC(Wf.prototype.request,e);return Wt.extend(n,Wf.prototype,e,{allOwnKeys:!0}),Wt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return cS(Qf(t,i))},n}const go=cS(um);go.Axios=Wf;go.CanceledError=yp;go.CancelToken=H7;go.isCancel=tS;go.VERSION=lS;go.toFormData=ny;go.AxiosError=jr;go.Cancel=go.CanceledError;go.all=function(e){return Promise.all(e)};go.spread=W7;go.isAxiosError=G7;go.mergeConfig=Qf;go.AxiosHeaders=Fl;go.formToJSON=t=>eS(Wt.isHTMLForm(t)?new FormData(t):t);go.getAdapter=aS.getAdapter;go.HttpStatusCode=P2;go.default=go;const{Axios:Cre,AxiosError:Sre,CanceledError:Ere,isCancel:Pre,CancelToken:kre,VERSION:Mre,all:Are,Cancel:Tre,isAxiosError:Ore,spread:Dre,toFormData:Ire,AxiosHeaders:Nre,HttpStatusCode:Bre,formToJSON:Rre,getAdapter:Fre,mergeConfig:jre}=go,Ln=go.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function hS(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Ln.interceptors.request.use(async t=>{try{const e=hS("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t}catch{return t}},t=>Promise.reject(t));Ln.interceptors.response.use(t=>t,async t=>{var n,r;const e=t.config;try{if(((n=t.response)==null?void 0:n.status)===401&&!e._retry&&!((r=e.url)!=null&&r.includes("/token/refresh/"))){e._retry=!0;const i=po();try{await i.refreshToken();const s=hS("access_token");if(s)return e.headers.Authorization=`Bearer ${s}`,Ln(e)}catch(s){return await i.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(s)}}return Promise.reject(t)}catch(i){return Promise.reject(i)}});function q7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function h1(t){const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search);try{return(await ca.getUsers(e)).data}catch(n){throw n}}const ca={async getUsers(t={}){try{return await Ln.get("/users/",{params:t})}catch(e){throw e}},async getUser(t){return await Ln.get(`/users/${t}/`)},async createUser(t){return await Ln.post("/users/",t)},async updateUser(t,e){return await Ln.patch(`/users/${t}/`,e)},async deleteUser(t){return await Ln.delete(`/users/${t}/`)},async getEntreprises(){return await Ln.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await Ln.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await Ln.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await Ln.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e={role:t.role};return t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),await Ln.get("/users/",{params:e})},async getEntrepriseSalaries(t){return await Ln.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await Ln.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await Ln.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await Ln.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},async uploadLogo(t){try{const e=new FormData,n=this.formatLogoFileName(t),r=new File([t],n,{type:t.type});return e.append("logo",r),await Ln.post("/users/upload_logo/",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw e}}};async function f1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;await new Promise(l=>setTimeout(l,o+a))}}const Ym={async getPlans(){try{return await Ln.get("/plans/")}catch(t){throw t}},async createPlan(t){try{const e={...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null};return await Ln.post("/plans/",e)}catch(e){throw e}},async updatePlan(t,e){try{return await Ln.put(`/plans/${t}/`,e)}catch(n){throw n}},async deletePlan(t){try{return await Ln.delete(`/plans/${t}/`)}catch(e){throw e}},async getVisiteurPlans(t){return await Ln.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await Ln.post("/plans/",t)},async getEntreprisePlans(t){return await Ln.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await Ln.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await Ln.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await Ln.post("/plans/",n)}},Yo={async getNotes(t={}){try{return await Ln.get("/notes/",{params:t})}catch(e){throw console.error("Error getting notes:",e),e}},async getNotesByPlan(t){try{return await Ln.get("/notes/",{params:{plan:t}})}catch(e){throw console.error("Error getting notes for plan:",e),e}},async getNote(t){try{return await Ln.get(`/notes/${t}/`)}catch(e){throw console.error("Error getting note:",e),e}},async createNote(t){try{const e={...t};return e.location&&Object.keys(e.location).length===0&&delete e.location,await Ln.post("/notes/",e)}catch(e){throw console.error("Error creating note:",e),e}},async updateNote(t,e){try{const n=e.backendId||t,r={...e};r.location&&Object.keys(r.location).length===0&&delete r.location,e.column!==void 0?r.column=e.column:e.columnId!==void 0&&(r.column=e.columnId),delete r.columnId,delete r.column_id,delete r.column_details,delete r.backendId,delete r.leafletId;const i=r.enterprise_id;delete r.enterprise_name;const s=await Ln.patch(`/notes/${n}/`,r);return i!==void 0&&(s.data.enterprise_id=i),s}catch(n){throw console.error("[noteService][updateNote] Erreur lors de la mise  jour:",n),n}},async deleteNote(t){try{return await Ln.delete(`/notes/${t}/`)}catch(e){throw console.error("Error deleting note:",e),e}},async getComments(t){return await Ln.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return await Ln.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await Ln.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await Ln.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await Ln.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await Ln.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await Ln.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await Ln.delete(`/notes/${t}/photos/${e}/`)}},d1={async getDevices(t={}){try{return await f1(()=>Ln.get("/weather/devices/",{params:t}),3,1e3,1e4)}catch(e){throw console.error("Error getting weather devices:",e),e}},async getRealTimeData(t){try{const e=typeof t=="string"?{mac:t}:t;return await f1(()=>Ln.get("/weather/",{params:e}),3,1e3,1e4)}catch(e){throw console.error("Error getting real-time weather data:",e),e}},async getHistoryData(t){try{return await f1(()=>Ln.get("/weather/history/",{params:t}),3,1e3,1e4)}catch(e){throw console.error("Error getting weather history data:",e),e}}},Zm={async getFilters(){try{return await Ln.get("/map-filters/")}catch(t){throw console.error("Error getting map filters:",t),t}},async getFilter(t){try{return await Ln.get(`/map-filters/${t}/`)}catch(e){throw console.error("Error getting map filter:",e),e}},async createFilter(t){try{return await Ln.post("/map-filters/",t)}catch(e){throw console.error("Error creating map filter:",e),e}},async updateFilter(t,e){try{return await Ln.patch(`/map-filters/${t}/`,e)}catch(n){throw console.error("Error updating map filter:",n),n}},async deleteFilter(t){try{return await Ln.delete(`/map-filters/${t}/`)}catch(e){throw console.error("Error deleting map filter:",e),e}}},k2={async getGoogleMapsApiKey(){try{return await Ln.get("/settings/get_google_maps_api_key/")}catch(t){throw console.error("Error getting Google Maps API key:",t),t}},async setGoogleMapsApiKey(t){try{return await Ln.post("/settings/set_google_maps_api_key/",{key:t})}catch(e){throw console.error("Error setting Google Maps API key:",e),e}}};Ln.defaults.baseURL="/api";Ln.defaults.headers.common["Content-Type"]="application/json";Ln.defaults.withCredentials=!0;function $g(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Ln.interceptors.request.use(t=>{const e=$g("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Ln.interceptors.response.use(t=>t,async t=>{var r,i;const e=po(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!$g("access_token"))throw new Error("No token available");await e.refreshToken();const o=$g("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Ln(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function Y7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function Is(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function Z7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const K7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function X7(t){return K7[t]||t}function J7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Q7(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function eN({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await ca.getUsers(i)).data}const po=mp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!$g("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await Ln.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await Ln.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Ln.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await Ln.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!$g("refresh_token"))throw new Error("No refresh token available");const r=await Ln.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return Y7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await ca.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la rcupration des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await ca.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la rcupration des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await ca.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la rcupration des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await ca.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la rcupration des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await ca.createUser(t)).data}catch(e){throw this.error="Erreur lors de la cration de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await ca.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise  jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await ca.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await Ln.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la rcupration des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await Ln.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise  jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await Ln.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du rle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await Ln.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise  jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await ca.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du tlversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await eN(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await ca.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la rcupration des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await ca.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la rcupration des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const jd=typeof document<"u";function fS(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function tN(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&fS(t.default)}const Ai=Object.assign;function p1(t,e){const n={};for(const r in e){const i=e[r];n[r]=lc(i)?i.map(t):t(i)}return n}const mg=()=>{},lc=Array.isArray,dS=/#/g,nN=/&/g,rN=/\//g,iN=/=/g,sN=/\?/g,pS=/\+/g,oN=/%5B/g,aN=/%5D/g,gS=/%5E/g,lN=/%60/g,mS=/%7B/g,uN=/%7C/g,vS=/%7D/g,cN=/%20/g;function Kb(t){return encodeURI(""+t).replace(uN,"|").replace(oN,"[").replace(aN,"]")}function hN(t){return Kb(t).replace(mS,"{").replace(vS,"}").replace(gS,"^")}function M2(t){return Kb(t).replace(pS,"%2B").replace(cN,"+").replace(dS,"%23").replace(nN,"%26").replace(lN,"`").replace(mS,"{").replace(vS,"}").replace(gS,"^")}function fN(t){return M2(t).replace(iN,"%3D")}function dN(t){return Kb(t).replace(dS,"%23").replace(sN,"%3F")}function pN(t){return t==null?"":dN(t).replace(rN,"%2F")}function Vg(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const gN=/\/$/,mN=t=>t.replace(gN,"");function g1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=_N(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:Vg(o)}}function vN(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Yx(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function yN(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&ap(e.matched[r],n.matched[i])&&yS(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ap(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function yS(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!bN(t[n],e[n]))return!1;return!0}function bN(t,e){return lc(t)?Zx(t,e):lc(e)?Zx(e,t):t===e}function Zx(t,e){return lc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function _N(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Dh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Hg;(function(t){t.pop="pop",t.push="push"})(Hg||(Hg={}));var vg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(vg||(vg={}));function wN(t){if(!t)if(jd){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),mN(t)}const xN=/^[^#]+#/;function LN(t,e){return t.replace(xN,"#")+e}function CN(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const sy=()=>({left:window.scrollX,top:window.scrollY});function SN(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=CN(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Kx(t,e){return(history.state?history.state.position-e:-1)+t}const A2=new Map;function EN(t,e){A2.set(t,e)}function PN(t){const e=A2.get(t);return A2.delete(t),e}let kN=()=>location.protocol+"//"+location.host;function bS(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Yx(l,"")}return Yx(n,t)+r+i}function MN(t,e,n,r){let i=[],s=[],o=null;const a=({state:y})=>{const m=bS(t,location),C=n.value,S=e.value;let T=0;if(y){if(n.value=m,e.value=y,o&&o===C){o=null;return}T=S?y.position-S.position:0}else r(m);i.forEach(O=>{O(n.value,C,{delta:T,type:Hg.pop,direction:T?T>0?vg.forward:vg.back:vg.unknown})})};function l(){o=n.value}function c(y){i.push(y);const m=()=>{const C=i.indexOf(y);C>-1&&i.splice(C,1)};return s.push(m),m}function f(){const{history:y}=window;y.state&&y.replaceState(Ai({},y.state,{scroll:sy()}),"")}function p(){for(const y of s)y();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function Xx(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?sy():null}}function AN(t){const{history:e,location:n}=window,r={value:bS(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,f){const p=t.indexOf("#"),y=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:kN()+t+l;try{e[f?"replaceState":"pushState"](c,"",y),i.value=c}catch(m){console.error(m),n[f?"replace":"assign"](y)}}function o(l,c){const f=Ai({},e.state,Xx(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,f,!0),r.value=l}function a(l,c){const f=Ai({},i.value,e.state,{forward:l,scroll:sy()});s(f.current,f,!0);const p=Ai({},Xx(r.value,l,null),{position:f.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function TN(t){t=wN(t);const e=AN(t),n=MN(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Ai({location:"",base:t,go:r,createHref:LN.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function ON(t){return typeof t=="string"||t&&typeof t=="object"}function _S(t){return typeof t=="string"||typeof t=="symbol"}const wS=Symbol("");var Jx;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Jx||(Jx={}));function lp(t,e){return Ai(new Error,{type:t,[wS]:!0},e)}function sh(t,e){return t instanceof Error&&wS in t&&(e==null||!!(t.type&e))}const Qx="[^/]+?",DN={sensitive:!1,strict:!1,start:!0,end:!0},IN=/[.+*?^${}()[\]/\\]/g;function NN(t,e){const n=Ai({},DN,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const f=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const y=c[p];let m=40+(n.sensitive?.25:0);if(y.type===0)p||(i+="/"),i+=y.value.replace(IN,"\\$&"),m+=40;else if(y.type===1){const{value:C,repeatable:S,optional:T,regexp:O}=y;s.push({name:C,repeatable:S,optional:T});const D=O||Qx;if(D!==Qx){m+=10;try{new RegExp(`(${D})`)}catch(U){throw new Error(`Invalid custom RegExp for param "${C}" (${D}): `+U.message)}}let N=S?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;p||(N=T&&c.length<2?`(?:/${N})`:"/"+N),T&&(N+="?"),i+=N,m+=20,T&&(m+=-8),S&&(m+=-20),D===".*"&&(m+=-50)}f.push(m)}r.push(f)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const f=c.match(o),p={};if(!f)return null;for(let y=1;y<f.length;y++){const m=f[y]||"",C=s[y-1];p[C.name]=m&&C.repeatable?m.split("/"):m}return p}function l(c){let f="",p=!1;for(const y of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const m of y)if(m.type===0)f+=m.value;else if(m.type===1){const{value:C,repeatable:S,optional:T}=m,O=C in c?c[C]:"";if(lc(O)&&!S)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const D=lc(O)?O.join("/"):O;if(!D)if(T)y.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${C}"`);f+=D}}return f||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function BN(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function xS(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=BN(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(e4(r))return 1;if(e4(i))return-1}return i.length-r.length}function e4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const RN={type:0,value:""},FN=/[a-zA-Z0-9_]/;function jN(t){if(!t)return[[]];if(t==="/")return[[RN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",f="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function y(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):y();break;case 4:y(),n=r;break;case 1:l==="("?n=2:FN.test(l)?y():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=3:f+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,f="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function zN(t,e,n){const r=NN(jN(t.path),n),i=Ai(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function UN(t,e){const n=[],r=new Map;e=i4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,y,m){const C=!m,S=n4(p);S.aliasOf=m&&m.record;const T=i4(e,p),O=[S];if("alias"in p){const U=typeof p.alias=="string"?[p.alias]:p.alias;for(const G of U)O.push(n4(Ai({},S,{components:m?m.record.components:S.components,path:G,aliasOf:m?m.record:S})))}let D,N;for(const U of O){const{path:G}=U;if(y&&G[0]!=="/"){const J=y.record.path,ee=J[J.length-1]==="/"?"":"/";U.path=y.record.path+(G&&ee+G)}if(D=zN(U,y,T),m?m.alias.push(D):(N=N||D,N!==D&&N.alias.push(D),C&&p.name&&!r4(D)&&o(p.name)),LS(D)&&l(D),S.children){const J=S.children;for(let ee=0;ee<J.length;ee++)s(J[ee],D,m&&m.children[ee])}m=m||D}return N?()=>{o(N)}:mg}function o(p){if(_S(p)){const y=r.get(p);y&&(r.delete(p),n.splice(n.indexOf(y),1),y.children.forEach(o),y.alias.forEach(o))}else{const y=n.indexOf(p);y>-1&&(n.splice(y,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const y=HN(p,n);n.splice(y,0,p),p.record.name&&!r4(p)&&r.set(p.record.name,p)}function c(p,y){let m,C={},S,T;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw lp(1,{location:p});T=m.record.name,C=Ai(t4(y.params,m.keys.filter(N=>!N.optional).concat(m.parent?m.parent.keys.filter(N=>N.optional):[]).map(N=>N.name)),p.params&&t4(p.params,m.keys.map(N=>N.name))),S=m.stringify(C)}else if(p.path!=null)S=p.path,m=n.find(N=>N.re.test(S)),m&&(C=m.parse(S),T=m.record.name);else{if(m=y.name?r.get(y.name):n.find(N=>N.re.test(y.path)),!m)throw lp(1,{location:p,currentLocation:y});T=m.record.name,C=Ai({},y.params,p.params),S=m.stringify(C)}const O=[];let D=m;for(;D;)O.unshift(D.record),D=D.parent;return{name:T,path:S,params:C,matched:O,meta:VN(O)}}t.forEach(p=>s(p));function f(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:f,getRoutes:a,getRecordMatcher:i}}function t4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function n4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:$N(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function $N(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function r4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function VN(t){return t.reduce((e,n)=>Ai(e,n.meta),{})}function i4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function HN(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;xS(t,e[s])<0?r=s:n=s+1}const i=WN(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function WN(t){let e=t;for(;e=e.parent;)if(LS(e)&&xS(t,e)===0)return e}function LS({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function GN(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(pS," "),o=s.indexOf("="),a=Vg(o<0?s:s.slice(0,o)),l=o<0?null:Vg(s.slice(o+1));if(a in e){let c=e[a];lc(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function s4(t){let e="";for(let n in t){const r=t[n];if(n=fN(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(lc(r)?r.map(s=>s&&M2(s)):[r&&M2(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function qN(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=lc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const YN=Symbol(""),o4=Symbol(""),oy=Symbol(""),Xb=Symbol(""),T2=Symbol("");function Tp(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Vh(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=y=>{y===!1?l(lp(4,{from:n,to:e})):y instanceof Error?l(y):ON(y)?l(lp(2,{from:e,to:y})):(o&&r.enterCallbacks[i]===o&&typeof y=="function"&&o.push(y),a())},f=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(f);t.length<3&&(p=p.then(c)),p.catch(y=>l(y))})}function m1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(fS(l)){const f=(l.__vccOpts||l)[e];f&&s.push(Vh(f,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=tN(f)?f.default:f;o.mods[a]=f,o.components[a]=p;const m=(p.__vccOpts||p)[e];return m&&Vh(m,n,r,o,a,i)()}))}}return s}function a4(t){const e=au(oy),n=au(Xb),r=tr(()=>{const l=cn(t.to);return e.resolve(l)}),i=tr(()=>{const{matched:l}=r.value,{length:c}=l,f=l[c-1],p=n.matched;if(!f||!p.length)return-1;const y=p.findIndex(ap.bind(null,f));if(y>-1)return y;const m=l4(l[c-2]);return c>1&&l4(f)===m&&p[p.length-1].path!==m?p.findIndex(ap.bind(null,l[c-2])):y}),s=tr(()=>i.value>-1&&JN(n.params,r.value.params)),o=tr(()=>i.value>-1&&i.value===n.matched.length-1&&yS(n.params,r.value.params));function a(l={}){if(XN(l)){const c=e[cn(t.replace)?"replace":"push"](cn(t.to)).catch(mg);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:tr(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function ZN(t){return t.length===1?t[0]:t}const KN=_s({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:a4,setup(t,{slots:e}){const n=cu(a4(t)),{options:r}=au(oy),i=tr(()=>({[u4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[u4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&ZN(e.default(n));return t.custom?s:Kv("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Zp=KN;function XN(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function JN(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!lc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function l4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const u4=(t,e,n)=>t??e??n,QN=_s({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=au(T2),i=tr(()=>t.route||r.value),s=au(o4,0),o=tr(()=>{let c=cn(s);const{matched:f}=i.value;let p;for(;(p=f[c])&&!p.components;)c++;return c}),a=tr(()=>i.value.matched[o.value]);fg(o4,tr(()=>o.value+1)),fg(YN,a),fg(T2,i);const l=kt();return yi(()=>[l.value,a.value,t.name],([c,f,p],[y,m,C])=>{f&&(f.instances[p]=c,m&&m!==f&&c&&c===y&&(f.leaveGuards.size||(f.leaveGuards=m.leaveGuards),f.updateGuards.size||(f.updateGuards=m.updateGuards))),c&&f&&(!m||!ap(f,m)||!y)&&(f.enterCallbacks[p]||[]).forEach(S=>S(c))},{flush:"post"}),()=>{const c=i.value,f=t.name,p=a.value,y=p&&p.components[f];if(!y)return c4(n.default,{Component:y,route:c});const m=p.props[f],C=m?m===!0?c.params:typeof m=="function"?m(c):m:null,T=Kv(y,Ai({},C,e,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return c4(n.default,{Component:T,route:c})||T}}});function c4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const CS=QN;function eB(t){const e=UN(t.routes,t),n=t.parseQuery||GN,r=t.stringifyQuery||s4,i=t.history,s=Tp(),o=Tp(),a=Tp(),l=kb(Dh);let c=Dh;jd&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=p1.bind(null,Ee=>""+Ee),p=p1.bind(null,pN),y=p1.bind(null,Vg);function m(Ee,Ue){let Ne,rt;return _S(Ee)?(Ne=e.getRecordMatcher(Ee),rt=Ue):rt=Ee,e.addRoute(rt,Ne)}function C(Ee){const Ue=e.getRecordMatcher(Ee);Ue&&e.removeRoute(Ue)}function S(){return e.getRoutes().map(Ee=>Ee.record)}function T(Ee){return!!e.getRecordMatcher(Ee)}function O(Ee,Ue){if(Ue=Ai({},Ue||l.value),typeof Ee=="string"){const se=g1(n,Ee,Ue.path),ue=e.resolve({path:se.path},Ue),Q=i.createHref(se.fullPath);return Ai(se,ue,{params:y(ue.params),hash:Vg(se.hash),redirectedFrom:void 0,href:Q})}let Ne;if(Ee.path!=null)Ne=Ai({},Ee,{path:g1(n,Ee.path,Ue.path).path});else{const se=Ai({},Ee.params);for(const ue in se)se[ue]==null&&delete se[ue];Ne=Ai({},Ee,{params:p(se)}),Ue.params=p(Ue.params)}const rt=e.resolve(Ne,Ue),gt=Ee.hash||"";rt.params=f(y(rt.params));const _t=vN(r,Ai({},Ee,{hash:hN(gt),path:rt.path})),le=i.createHref(_t);return Ai({fullPath:_t,hash:gt,query:r===s4?qN(Ee.query):Ee.query||{}},rt,{redirectedFrom:void 0,href:le})}function D(Ee){return typeof Ee=="string"?g1(n,Ee,l.value.path):Ai({},Ee)}function N(Ee,Ue){if(c!==Ee)return lp(8,{from:Ue,to:Ee})}function U(Ee){return ee(Ee)}function G(Ee){return U(Ai(D(Ee),{replace:!0}))}function J(Ee){const Ue=Ee.matched[Ee.matched.length-1];if(Ue&&Ue.redirect){const{redirect:Ne}=Ue;let rt=typeof Ne=="function"?Ne(Ee):Ne;return typeof rt=="string"&&(rt=rt.includes("?")||rt.includes("#")?rt=D(rt):{path:rt},rt.params={}),Ai({query:Ee.query,hash:Ee.hash,params:rt.path!=null?{}:Ee.params},rt)}}function ee(Ee,Ue){const Ne=c=O(Ee),rt=l.value,gt=Ee.state,_t=Ee.force,le=Ee.replace===!0,se=J(Ne);if(se)return ee(Ai(D(se),{state:typeof se=="object"?Ai({},gt,se.state):gt,force:_t,replace:le}),Ue||Ne);const ue=Ne;ue.redirectedFrom=Ue;let Q;return!_t&&yN(r,rt,Ne)&&(Q=lp(16,{to:ue,from:rt}),_e(rt,rt,!0,!1)),(Q?Promise.resolve(Q):pe(ue,rt)).catch(ke=>sh(ke)?sh(ke,2)?ke:be(ke):re(ke,ue,rt)).then(ke=>{if(ke){if(sh(ke,2))return ee(Ai({replace:le},D(ke.to),{state:typeof ke.to=="object"?Ai({},gt,ke.to.state):gt,force:_t}),Ue||ue)}else ke=H(ue,rt,!0,le,gt);return $(ue,rt,ke),ke})}function V(Ee,Ue){const Ne=N(Ee,Ue);return Ne?Promise.reject(Ne):Promise.resolve()}function K(Ee){const Ue=ce.values().next().value;return Ue&&typeof Ue.runWithContext=="function"?Ue.runWithContext(Ee):Ee()}function pe(Ee,Ue){let Ne;const[rt,gt,_t]=tB(Ee,Ue);Ne=m1(rt.reverse(),"beforeRouteLeave",Ee,Ue);for(const se of rt)se.leaveGuards.forEach(ue=>{Ne.push(Vh(ue,Ee,Ue))});const le=V.bind(null,Ee,Ue);return Ne.push(le),ge(Ne).then(()=>{Ne=[];for(const se of s.list())Ne.push(Vh(se,Ee,Ue));return Ne.push(le),ge(Ne)}).then(()=>{Ne=m1(gt,"beforeRouteUpdate",Ee,Ue);for(const se of gt)se.updateGuards.forEach(ue=>{Ne.push(Vh(ue,Ee,Ue))});return Ne.push(le),ge(Ne)}).then(()=>{Ne=[];for(const se of _t)if(se.beforeEnter)if(lc(se.beforeEnter))for(const ue of se.beforeEnter)Ne.push(Vh(ue,Ee,Ue));else Ne.push(Vh(se.beforeEnter,Ee,Ue));return Ne.push(le),ge(Ne)}).then(()=>(Ee.matched.forEach(se=>se.enterCallbacks={}),Ne=m1(_t,"beforeRouteEnter",Ee,Ue,K),Ne.push(le),ge(Ne))).then(()=>{Ne=[];for(const se of o.list())Ne.push(Vh(se,Ee,Ue));return Ne.push(le),ge(Ne)}).catch(se=>sh(se,8)?se:Promise.reject(se))}function $(Ee,Ue,Ne){a.list().forEach(rt=>K(()=>rt(Ee,Ue,Ne)))}function H(Ee,Ue,Ne,rt,gt){const _t=N(Ee,Ue);if(_t)return _t;const le=Ue===Dh,se=jd?history.state:{};Ne&&(rt||le?i.replace(Ee.fullPath,Ai({scroll:le&&se&&se.scroll},gt)):i.push(Ee.fullPath,gt)),l.value=Ee,_e(Ee,Ue,Ne,le),be()}let oe;function ie(){oe||(oe=i.listen((Ee,Ue,Ne)=>{if(!de.listening)return;const rt=O(Ee),gt=J(rt);if(gt){ee(Ai(gt,{replace:!0,force:!0}),rt).catch(mg);return}c=rt;const _t=l.value;jd&&EN(Kx(_t.fullPath,Ne.delta),sy()),pe(rt,_t).catch(le=>sh(le,12)?le:sh(le,2)?(ee(Ai(D(le.to),{force:!0}),rt).then(se=>{sh(se,20)&&!Ne.delta&&Ne.type===Hg.pop&&i.go(-1,!1)}).catch(mg),Promise.reject()):(Ne.delta&&i.go(-Ne.delta,!1),re(le,rt,_t))).then(le=>{le=le||H(rt,_t,!1),le&&(Ne.delta&&!sh(le,8)?i.go(-Ne.delta,!1):Ne.type===Hg.pop&&sh(le,20)&&i.go(-1,!1)),$(rt,_t,le)}).catch(mg)}))}let R=Tp(),j=Tp(),q;function re(Ee,Ue,Ne){be(Ee);const rt=j.list();return rt.length?rt.forEach(gt=>gt(Ee,Ue,Ne)):console.error(Ee),Promise.reject(Ee)}function xe(){return q&&l.value!==Dh?Promise.resolve():new Promise((Ee,Ue)=>{R.add([Ee,Ue])})}function be(Ee){return q||(q=!Ee,ie(),R.list().forEach(([Ue,Ne])=>Ee?Ne(Ee):Ue()),R.reset()),Ee}function _e(Ee,Ue,Ne,rt){const{scrollBehavior:gt}=t;if(!jd||!gt)return Promise.resolve();const _t=!Ne&&PN(Kx(Ee.fullPath,0))||(rt||!Ne)&&history.state&&history.state.scroll||null;return al().then(()=>gt(Ee,Ue,_t)).then(le=>le&&SN(le)).catch(le=>re(le,Ee,Ue))}const Z=Ee=>i.go(Ee);let ae;const ce=new Set,de={currentRoute:l,listening:!0,addRoute:m,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:T,getRoutes:S,resolve:O,options:t,push:U,replace:G,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:j.add,isReady:xe,install(Ee){const Ue=this;Ee.component("RouterLink",Zp),Ee.component("RouterView",CS),Ee.config.globalProperties.$router=Ue,Object.defineProperty(Ee.config.globalProperties,"$route",{enumerable:!0,get:()=>cn(l)}),jd&&!ae&&l.value===Dh&&(ae=!0,U(i.location).catch(gt=>{}));const Ne={};for(const gt in Dh)Object.defineProperty(Ne,gt,{get:()=>l.value[gt],enumerable:!0});Ee.provide(oy,Ue),Ee.provide(Xb,Eb(Ne)),Ee.provide(T2,l);const rt=Ee.unmount;ce.add(Ee),Ee.unmount=function(){ce.delete(Ee),ce.size<1&&(c=Dh,oe&&oe(),oe=null,l.value=Dh,ae=!1,q=!1),rt()}}};function ge(Ee){return Ee.reduce((Ue,Ne)=>Ue.then(()=>K(Ne)),Promise.resolve())}return de}function tB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>ap(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>ap(c,l))||i.push(l))}return[n,r,i]}function ay(){return au(oy)}function nB(t){return au(Xb)}const ll=mp("notification",()=>{const t=kt([]),e=kt(0),n=kt(null),r=tr(()=>[...t.value].sort((p,y)=>y.timestamp-p.timestamp));function i({type:p,message:y,duration:m=5e3}){const C=++e.value,S=Date.now(),T={id:C,type:p,message:y,duration:m,timestamp:S};return t.value.push(T),n.value=C,m>0&&setTimeout(()=>{c(C)},m),C}const s=(p,y=5e3)=>i({type:"success",message:p,duration:y}),o=(p,y=5e3)=>i({type:"error",message:p,duration:y}),a=(p,y=5e3)=>i({type:"info",message:p,duration:y}),l=(p,y=5e3)=>i({type:"warning",message:p,duration:y});function c(p){const y=t.value.findIndex(m=>m.id===p);y!==-1&&t.value.splice(y,1),n.value===p&&(n.value=null)}function f(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:f,success:s,error:o,info:a,warning:l}}),rB=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:ll},Symbol.toStringTag,{value:"Module"}));var Zo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ly(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function SS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function iB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Jb=iB,sB=typeof Zo=="object"&&Zo&&Zo.Object===Object&&Zo,oB=sB,aB=oB,lB=typeof self=="object"&&self&&self.Object===Object&&self,uB=aB||lB||Function("return this")(),ES=uB,cB=ES,hB=function(){return cB.Date.now()},fB=hB,dB=/\s/;function pB(t){for(var e=t.length;e--&&dB.test(t.charAt(e)););return e}var gB=pB,mB=gB,vB=/^\s+/;function yB(t){return t&&t.slice(0,mB(t)+1).replace(vB,"")}var bB=yB,_B=ES,wB=_B.Symbol,PS=wB,h4=PS,kS=Object.prototype,xB=kS.hasOwnProperty,LB=kS.toString,Op=h4?h4.toStringTag:void 0;function CB(t){var e=xB.call(t,Op),n=t[Op];try{t[Op]=void 0;var r=!0}catch{}var i=LB.call(t);return r&&(e?t[Op]=n:delete t[Op]),i}var SB=CB,EB=Object.prototype,PB=EB.toString;function kB(t){return PB.call(t)}var MB=kB,f4=PS,AB=SB,TB=MB,OB="[object Null]",DB="[object Undefined]",d4=f4?f4.toStringTag:void 0;function IB(t){return t==null?t===void 0?DB:OB:d4&&d4 in Object(t)?AB(t):TB(t)}var NB=IB;function BB(t){return t!=null&&typeof t=="object"}var RB=BB,FB=NB,jB=RB,zB="[object Symbol]";function UB(t){return typeof t=="symbol"||jB(t)&&FB(t)==zB}var $B=UB,VB=bB,p4=Jb,HB=$B,g4=NaN,WB=/^[-+]0x[0-9a-f]+$/i,GB=/^0b[01]+$/i,qB=/^0o[0-7]+$/i,YB=parseInt;function ZB(t){if(typeof t=="number")return t;if(HB(t))return g4;if(p4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=p4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=VB(t);var n=GB.test(t);return n||qB.test(t)?YB(t.slice(2),n?2:8):WB.test(t)?g4:+t}var KB=ZB,XB=Jb,v1=fB,m4=KB,JB="Expected a function",QB=Math.max,eR=Math.min;function tR(t,e,n){var r,i,s,o,a,l,c=0,f=!1,p=!1,y=!0;if(typeof t!="function")throw new TypeError(JB);e=m4(e)||0,XB(n)&&(f=!!n.leading,p="maxWait"in n,s=p?QB(m4(n.maxWait)||0,e):s,y="trailing"in n?!!n.trailing:y);function m(J){var ee=r,V=i;return r=i=void 0,c=J,o=t.apply(V,ee),o}function C(J){return c=J,a=setTimeout(O,e),f?m(J):o}function S(J){var ee=J-l,V=J-c,K=e-ee;return p?eR(K,s-V):K}function T(J){var ee=J-l,V=J-c;return l===void 0||ee>=e||ee<0||p&&V>=s}function O(){var J=v1();if(T(J))return D(J);a=setTimeout(O,S(J))}function D(J){return a=void 0,y&&r?m(J):(r=i=void 0,o)}function N(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function U(){return a===void 0?o:D(v1())}function G(){var J=v1(),ee=T(J);if(r=arguments,i=this,l=J,ee){if(a===void 0)return C(l);if(p)return clearTimeout(a),a=setTimeout(O,e),m(l)}return a===void 0&&(a=setTimeout(O,e)),o}return G.cancel=N,G.flush=U,G}var MS=tR;const AS=ly(MS),nR={class:"relative w-full"},rR={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},iR=["onClick"],v4=_s({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=kt(""),r=kt([]),i=e,s=AS(async l=>{if(l.length<3){r.value=[];return}try{const f=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=f}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Ie(),je("div",nR,[jn(P("input",{"onUpdate:modelValue":c[0]||(c[0]=f=>n.value=f),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[di,n.value]]),r.value.length>0?(Ie(),je("div",rR,[(Ie(!0),je(bn,null,sr(r.value,f=>(Ie(),je("div",{key:f.place_id,onClick:p=>a(f),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Ut(f.display_name),9,iR))),128))])):Kt("",!0)]))}}),sR={key:0,class:"pwa-update-notification"},oR=_s({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=kt(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(Ie(),je("div",sR,[P("div",{class:"pwa-update-content"},[o[0]||(o[0]=P("p",null,"Une nouvelle version est disponible",-1)),P("div",{class:"pwa-update-actions"},[P("button",{onClick:r,class:"pwa-update-button"},"Mettre  jour"),P("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):Kt("",!0)}}),Vc=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},aR=Vc(oR,[["__scopeId","data-v-aa687693"]]),lR="/static/frontend/img/icons/android-chrome-192x192.png",uR={class:"prompt-content"},cR={class:"prompt-body"},hR={key:0,class:"install-instructions ios"},fR={key:1,class:"install-instructions android"},dR={key:2,class:"install-instructions desktop"},pR={key:3,class:"install-instructions desktop"},gR=_s({__name:"PWAInstallPrompt",setup(t){const e=kt(!1),n=kt(!1),r=kt(null);kt(null);const i=kt(!1),s=kt(!1),o=kt(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const m=localStorage.getItem("pwaPromptLastClosed");if(!m)return!1;const C=3*24*60*60*1e3;return Date.now()-parseInt(m)<C},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),r.value=m,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",m=>{e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},f=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};Ks(()=>{c()}),ff(()=>{f()});const p=async()=>{if(r.value)try{r.value.prompt();const m=await r.value.userChoice;r.value=null,m.outcome==="accepted"&&(e.value=!1)}catch(m){console.error("Erreur lors de l'installation:",m)}},y=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(m,C)=>e.value?(Ie(),je("div",{key:0,class:Ei(["pwa-install-prompt",{fullscreen:n.value}])},[P("div",uR,[P("div",{class:"prompt-header"},[C[1]||(C[1]=P("div",{class:"app-info"},[P("img",{src:lR,alt:"TagMap Logo",class:"app-logo"}),P("div",{class:"app-details"},[P("h2",null,"Installer TagMap"),P("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),P("button",{onClick:y,class:"close-button","aria-label":"Fermer"},C[0]||(C[0]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[P("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),P("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),P("div",cR,[i.value?(Ie(),je("div",hR,C[2]||(C[2]=[lu('<h3 data-v-3779ba3f>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>1</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Appuyez sur <strong data-v-3779ba3f>Partager</strong> <span class="ios-share-icon" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-3779ba3f></path><polyline points="16 6 12 2 8 6" data-v-3779ba3f></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-3779ba3f></line></svg></span></p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>2</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Faites dfiler et appuyez sur <strong data-v-3779ba3f>Sur l&#39;cran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>3</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Appuyez sur <strong data-v-3779ba3f>Ajouter</strong> en haut  droite</p></div></div>',4)]))):s.value?(Ie(),je("div",fR,[C[3]||(C[3]=P("h3",null,"Pour installer l'application sur votre appareil :",-1)),C[4]||(C[4]=P("div",{class:"instruction-step"},[P("div",{class:"step-number"},"1"),P("div",{class:"step-content"},[P("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),P("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Ie(),je("div",dR,[C[5]||(C[5]=P("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),C[6]||(C[6]=P("div",{class:"instruction-step"},[P("div",{class:"step-number"},"1"),P("div",{class:"step-content"},[P("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),P("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Ie(),je("div",pR,C[7]||(C[7]=[lu('<h3 data-v-3779ba3f>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>1</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Cliquez sur l&#39;icne d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-3779ba3f><div class="step-number" data-v-3779ba3f>2</div><div class="step-content" data-v-3779ba3f><p data-v-3779ba3f>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),P("div",{class:"prompt-footer"},[C[8]||(C[8]=lu('<div class="benefits" data-v-3779ba3f><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-3779ba3f></path></svg><span data-v-3779ba3f>Scuris</span></div><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><circle cx="12" cy="12" r="10" data-v-3779ba3f></circle><polyline points="12 6 12 12 16 14" data-v-3779ba3f></polyline></svg><span data-v-3779ba3f>Rapide</span></div><div class="benefit-item" data-v-3779ba3f><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3779ba3f><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-3779ba3f></path></svg><span data-v-3779ba3f>Hors ligne</span></div></div>',1)),P("button",{onClick:y,class:"remind-later"},"Me le rappeler plus tard")])])],2)):Kt("",!0)}}),mR=Vc(gR,[["__scopeId","data-v-3779ba3f"]]),vR={class:"app-container"},yR={key:0,class:"app-header bg-white shadow-sm z-[2500] flex-shrink-0"},bR={class:"mx-auto px-4 sm:px-6 lg:px-8"},_R={class:"flex h-16 items-center justify-between"},wR={class:"flex items-center"},xR={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},LR={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},CR={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},SR={class:"hidden md:flex md:ml-6 space-x-8"},ER={key:0,class:"flex-1 mx-2"},PR={class:"hidden md:block"},kR={class:"md:hidden"},MR={key:1,class:"flex-1"},AR={class:"flex items-center space-x-2 md:space-x-4"},TR={class:"relative"},OR={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},DR={class:"flex items-center justify-between w-full"},IR={class:"flex items-center space-x-3"},NR={class:"max-h-72 overflow-y-auto"},BR={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},RR={class:"flex items-start"},FR={class:"flex-shrink-0 mr-3"},jR={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},zR={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},UR={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},$R={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},VR={class:"flex-1"},HR={class:"text-sm md:text-sm text-gray-800"},WR=["onClick"],GR={class:"relative"},qR={class:"hidden md:flex flex-col items-end"},YR={class:"text-sm font-medium text-gray-700"},ZR={key:0,class:"text-xs text-gray-500"},KR=["src","alt"],XR={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},JR={class:"text-sm font-semibold text-gray-700"},QR={class:"text-xs text-gray-500"},eF={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},tF={class:"space-y-1 px-2 pb-3 pt-2"},nF={class:"app-main"},rF=_s({__name:"App",setup(t){const e=ay(),n=po(),r=ll(),i=kt(!1),s=kt(!1),o=kt(!1),a=kt(!1),l=kt(null),c=kt(!1),f=kt(!1),p=kt(null),y=kt("13px"),m=kt("65px"),C=kt(null),S=kt(null),T=kt(!1);function O(){f.value=window.innerWidth<768}Ks(()=>{O(),window.addEventListener("resize",O),window.addEventListener("resize",D),window.addEventListener("pwa-update-available",()=>{T.value=!0})}),ff(()=>{window.removeEventListener("resize",O),window.removeEventListener("resize",D),window.removeEventListener("pwa-update-available",()=>{})});function D(){if(!p.value)return;const R=p.value.getBoundingClientRect();y.value=`${R.top+window.scrollY+5}px`;const j=R.left+R.width/2;m.value=`${window.innerWidth-j-22}px`}const N=tr(()=>{const R=n.user;if(!R)return"";const j=`${R.first_name} ${R.last_name.toUpperCase()}`;return R.company_name?`${j} (${R.company_name})`:j}),U=tr(()=>{var j;switch((j=n.user)==null?void 0:j.user_type){case"admin":return"Accs administrateur";case"entreprise":return"Accs entreprise";case"salarie":return"Accs salarie";case"visiteur":return"Accs visiteur";default:return""}}),G=tr(()=>{var R;return((R=n.user)==null?void 0:R.user_type)==="admin"}),J=tr(()=>n.isAuthenticated),ee=[{name:"Carte",to:"/"},{name:"Mto",to:"/meteo"},{name:"Notes",to:"/notes"}],V=tr(()=>{var j,q;if(!J.value)return[];const R=[...ee];return(G.value||((j=n.user)==null?void 0:j.user_type)==="entreprise"||((q=n.user)==null?void 0:q.user_type)==="salarie")&&R.push({name:"Utilisateurs",to:"/users"}),G.value&&R.push({name:"Paramtres",to:"/parametres"}),R}),K=tr(()=>J.value?[{name:"Mon profil",to:"/profile"}]:[]);async function pe(){try{await n.logout(),e.push("/login")}catch(R){console.error("Erreur lors de la dconnexion:",R)}}function $(R){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:R.lat,lng:R.lng,zoom:16}}))}Ks(async()=>{try{if(localStorage.getItem("token")){await n.checkAuth(),await n.fetchUserProfile();const j=localStorage.getItem("lastPlanId");j&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:j}}))}}catch(R){console.error("Auth check error:",R),e.push("/login")}});const H=tr(()=>{const R="TagMap";if(!J.value)return`${R} - Connexion`;const j=e.currentRoute.value,re={home:"Carte",meteo:"Mto",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[j.name]||"";return re?`${R} - ${re}`:R});yi(H,R=>{document.title=R},{immediate:!0});const oe=tr(()=>r.notifications.length);function ie(){r.clearAll(),o.value=!1}return jg(()=>{if(r.lastAddedId!==null){const R=r.notifications.find(j=>j.id===r.lastAddedId);R&&al(()=>{D(),a.value=!0,l.value={id:R.id,message:R.message,type:R.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var j;((j=l.value)==null?void 0:j.id)===R.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(R,j)=>{var q;return Ie(),je("div",vR,[J.value?(Ie(),je("header",yR,[P("nav",bR,[P("div",_R,[P("div",wR,[P("button",{onClick:j[0]||(j[0]=re=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[j[7]||(j[7]=P("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Ie(),je("svg",xR,[s.value?(Ie(),je("path",CR)):(Ie(),je("path",LR))]))]),Kr(cn(Zp),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Il(()=>j[8]||(j[8]=[P("span",{class:"md:inline hidden"},"TagMap",-1),P("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),P("div",SR,[(Ie(!0),je(bn,null,sr(V.value,re=>(Ie(),Lo(cn(Zp),{key:re.name,to:re.to,class:Ei(["text-sm font-medium transition-colors duration-200",[R.$route.path===re.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Il(()=>[zr(Ut(re.name),1)]),_:2},1032,["to","class"]))),128))])]),R.$route.path==="/"?(Ie(),je("div",ER,[P("div",PR,[Kr(v4,{onSelectLocation:$})]),P("div",kR,[Kr(v4,{onSelectLocation:$,class:"max-w-full"})])])):(Ie(),je("div",MR)),P("div",AR,[P("div",TR,[P("button",{ref_key:"bellButtonRef",ref:p,onClick:j[1]||(j[1]=re=>o.value=!o.value),class:Ei(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},j[9]||(j[9]=[P("span",{class:"sr-only"},"Voir les notifications",-1),P("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Ie(),je("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Rl(f.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[P("div",OR,[P("div",DR,[j[11]||(j[11]=P("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),P("div",IR,[oe.value>0?(Ie(),je("button",{key:0,onClick:ie,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):Kt("",!0),P("button",{onClick:j[2]||(j[2]=re=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},j[10]||(j[10]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),P("div",NR,[oe.value===0?(Ie(),je("div",BR," Aucune notification ")):Kt("",!0),(Ie(!0),je(bn,null,sr(cn(r).notifications,re=>(Ie(),je("div",{key:re.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[P("div",RR,[P("div",FR,[re.type==="success"?(Ie(),je("svg",jR,j[12]||(j[12]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):re.type==="error"?(Ie(),je("svg",zR,j[13]||(j[13]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):re.type==="warning"?(Ie(),je("svg",UR,j[14]||(j[14]=[P("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Ie(),je("svg",$R,j[15]||(j[15]=[P("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),P("div",VR,[P("p",HR,Ut(re.message),1),P("button",{onClick:xe=>cn(r).removeNotification(re.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,WR)])])]))),128))])],4)):Kt("",!0)]),P("div",GR,[P("button",{onClick:j[3]||(j[3]=re=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[P("div",qR,[P("span",YR,Ut(N.value),1),U.value?(Ie(),je("span",ZR,Ut(U.value),1)):Kt("",!0)]),P("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((q=cn(n).user)==null?void 0:q.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(N.value),alt:N.value},null,8,KR)]),i.value?(Ie(),je("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Rl(f.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[P("div",XR,[P("div",null,[P("div",JR,Ut(N.value),1),P("div",QR,Ut(U.value),1)]),P("button",{onClick:j[4]||(j[4]=re=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},j[16]||(j[16]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Ie(!0),je(bn,null,sr(K.value,re=>(Ie(),Lo(cn(Zp),{key:re.name,to:re.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:j[5]||(j[5]=xe=>i.value=!1)},{default:Il(()=>[zr(Ut(re.name),1)]),_:2},1032,["to"]))),128)),P("button",{onClick:pe,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Dconnexion ")],4)):Kt("",!0)])])]),s.value?(Ie(),je("div",eF,[P("div",tF,[(Ie(!0),je(bn,null,sr(V.value,re=>(Ie(),Lo(cn(Zp),{key:re.name,to:re.to,class:Ei(["block px-3 py-2 rounded-md text-base font-medium",[R.$route.path===re.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:j[6]||(j[6]=xe=>s.value=!1)},{default:Il(()=>[zr(Ut(re.name),1)]),_:2},1032,["to","class"]))),128))])])):Kt("",!0)])])):Kt("",!0),P("main",nF,[Kr(cn(CS),null,{default:Il(({Component:re,route:xe})=>[P("div",{class:Ei({"router-view-map":xe.meta.isMapRoute})},[(Ie(),Lo(OL(re)))],2)]),_:1})]),Kr(aR,{ref_key:"pwaUpdateNotification",ref:C},null,512),Kr(mR,{ref_key:"pwaInstallPrompt",ref:S},null,512)])}}}),iF="modulepreload",sF=function(t){return"/static/frontend/"+t},y4={},ku=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=sF(l),l in y4)return;y4[l]=!0;const c=l.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":iF,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((y,m)=>{p.addEventListener("load",y),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},oF={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},aF={class:"max-w-md w-full space-y-8"},lF={class:"space-y-4"},uF={class:"mt-1"},cF={class:"mt-1"},hF={class:"mt-1"},fF={key:0,class:"rounded-md bg-red-50 p-4"},dF={class:"flex"},pF={class:"ml-3"},gF={class:"text-sm font-medium text-red-800"},mF={key:1,class:"rounded-md bg-yellow-50 p-4"},vF={class:"flex"},yF={class:"ml-3"},bF={class:"mt-2 text-sm text-yellow-700"},_F={class:"list-disc pl-5 space-y-1"},wF=["disabled"],xF={class:"absolute left-0 inset-y-0 flex items-center pl-3"},LF={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},CF={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},SF=_s({__name:"ChangePasswordForm",setup(t){const e=ay(),n=po(),r=cu({oldPassword:"",newPassword:"",confirmPassword:""}),i=kt(!1),s=kt(""),o=tr(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=tr(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,f,p,y,m,C,S,T;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifi";return}i.value=!0,s.value="";try{await n.changePassword(r.oldPassword,r.newPassword),e.push("/")}catch(O){console.error("Password change failed:",O),(p=(f=O.response)==null?void 0:f.data)!=null&&p.detail?s.value=O.response.data.detail:(m=(y=O.response)==null?void 0:y.data)!=null&&m.old_password?s.value=O.response.data.old_password[0]:(S=(C=O.response)==null?void 0:C.data)!=null&&S.password?s.value=O.response.data.password[0]:((T=O.response)==null?void 0:T.status)===401?(s.value="Session expire, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,f)=>(Ie(),je("div",oF,[P("div",aF,[f[12]||(f[12]=P("div",null,[P("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),P("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),P("form",{class:"mt-8 space-y-6",onSubmit:Bl(l,["prevent"])},[P("div",lF,[P("div",null,[f[3]||(f[3]=P("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),P("div",uF,[jn(P("input",{id:"old-password","onUpdate:modelValue":f[0]||(f[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[di,r.oldPassword]])])]),P("div",null,[f[4]||(f[4]=P("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),P("div",cF,[jn(P("input",{id:"new-password","onUpdate:modelValue":f[1]||(f[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[di,r.newPassword]])]),f[5]||(f[5]=P("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),P("div",null,[f[6]||(f[6]=P("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),P("div",hF,[jn(P("input",{id:"confirm-password","onUpdate:modelValue":f[2]||(f[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[di,r.confirmPassword]])])])]),s.value?(Ie(),je("div",fF,[P("div",dF,[f[7]||(f[7]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",pF,[P("h3",gF,Ut(s.value),1)])])])):Kt("",!0),o.value.length>0?(Ie(),je("div",mF,[P("div",vF,[f[9]||(f[9]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),P("div",yF,[f[8]||(f[8]=P("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),P("div",bF,[P("ul",_F,[(Ie(!0),je(bn,null,sr(o.value,(p,y)=>(Ie(),je("li",{key:y},Ut(p),1))),128))])])])])])):Kt("",!0),P("div",null,[P("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[P("span",xF,[i.value?(Ie(),je("svg",CF,f[11]||(f[11]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ie(),je("svg",LF,f[10]||(f[10]=[P("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),zr(" "+Ut(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,wF)])],32)])]))}}),EF="/static/frontend/assets/background.svg",PF={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},kF={class:"container mx-auto relative z-10"},MF={class:"sm:mx-auto sm:w-full sm:max-w-md"},AF={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},TF={key:0,class:"rounded-md bg-red-50 p-4"},OF={class:"flex"},DF={class:"ml-3"},IF={class:"text-sm font-medium text-red-800"},NF={class:"mt-1"},BF={class:"mt-1 relative"},RF=["type"],FF={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},jF={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},zF={class:"flex items-center justify-between"},UF={class:"flex items-center"},$F={class:"text-sm"},VF=["disabled"],HF={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},WF={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},GF={class:"mt-12"},qF={class:"flex flex-wrap justify-center gap-2 mb-8"},YF=["onClick"],ZF={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},KF={class:"flex items-center mb-4"},XF={class:"text-2xl mr-2"},JF={class:"text-xl font-semibold text-gray-900"},QF={class:"text-gray-600 text-sm"},e9={key:0,class:"flex justify-center mt-8 gap-2"},t9=["onClick"],y1=6,n9=_s({__name:"LoginView",setup(t){const e=ay(),n=po(),r=kt(!1),i=kt(null),s=kt(!1),o=kt("Tous"),a=kt(1),l=cu({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"",text:"En tant qu'entreprise, j'ai mis en place un sous-compte  agriculteur  permettant la golocalisation des parcelles. Cela offre  nos salaris et prestataires une visibilit complte sur l'ensemble des parcelles et facilite leur accs. De plus, ils peuvent y ajouter des notes et des photos si ncessaire. Grce aux trackers, nous renforons galement la scurit de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrler l'accs de nos salaris aux diffrentes tches."},{type:"Agence de voyage",sector:"Tourisme",icon:"",text:"L'outil nous permet de crer gratuitement et sans limite des sous-comptes clients, d'tablir des itinraires personnaliss avec des points d'intrt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"",text:"Nous disposons d'un compte entreprise avec des sous-comptes ddis  chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grce aux stations mto connectes, nous optimisons la gestion des tours d'irrigation par secteur gographique en fonction des prcipitations."},{type:"Conseil municipal",sector:"Collectivit",icon:"",text:"Cette solution nous permet de gagner en efficacit dans la gestion des tches  raliser, en les golocalisant et en offrant  nos employs communaux la possibilit d'ajouter des commentaires et des photos sur chaque tche gorfrence."},{type:"Location de matriel",sector:"Services",icon:"",text:"Cette solution nous permet de golocaliser notre flotte grce  des trackers sans abonnement, avec uniquement un abonnement  la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"",text:"J'ai quip tous mes canons d'enrouleurs de trackers et de camras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"",text:"Nous assurons la golocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"",text:"Nous avons golocalis tous les forages de nos clients et ajout en commentaire la procdure d'entre, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"",text:"Nous golocalisons tous nos chantiers et ajoutons une photo du chantier termin en commentaire, servant de preuve en cas de litige."}],f=tr(()=>["Tous",...new Set(c.map(S=>S.sector))]),p=tr(()=>{let C=o.value==="Tous"?c:c.filter(O=>O.sector===o.value);const S=(a.value-1)*y1,T=S+y1;return C.slice(S,T)}),y=tr(()=>{const C=o.value==="Tous"?c:c.filter(S=>S.sector===o.value);return Math.ceil(C.length/y1)});Ks(async()=>{var C;try{if((C=window.INITIAL_STATE)!=null&&C.isAuthenticated){e.push("/");return}await n.restoreSession()&&e.push("/")}catch(S){console.error("Error during initialization:",S),i.value=null}});async function m(){var C,S,T,O,D,N,U,G,J;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(C=n.user)!=null&&C.must_change_password?e.push("/change-password"):e.push("/")}catch(ee){console.error("Login error:",ee),((S=ee==null?void 0:ee.response)==null?void 0:S.status)===500?i.value="Le service est temporairement indisponible. Veuillez ressayer dans quelques instants.":((T=ee==null?void 0:ee.response)==null?void 0:T.status)===401||((O=ee==null?void 0:ee.response)==null?void 0:O.status)===403?i.value="Identifiants incorrects. Veuillez vrifier votre nom d'utilisateur et mot de passe.":(N=(D=ee==null?void 0:ee.response)==null?void 0:D.data)!=null&&N.detail?i.value=ee.response.data.detail:(J=(G=(U=ee==null?void 0:ee.response)==null?void 0:U.data)==null?void 0:G.non_field_errors)!=null&&J[0]?i.value=ee.response.data.non_field_errors[0]:(ee==null?void 0:ee.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vrifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez ressayer."}finally{r.value=!1}}return(C,S)=>{const T=Rb("router-link");return Ie(),je("div",PF,[P("div",{class:"fixed inset-0 z-0",style:Rl({backgroundImage:`url(${cn(EF)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),S[16]||(S[16]=P("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),P("div",kF,[P("div",MF,[P("div",AF,[S[12]||(S[12]=P("div",{class:"text-center mb-8"},[P("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),P("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),P("form",{class:"space-y-6",onSubmit:Bl(m,["prevent"])},[i.value?(Ie(),je("div",TF,[P("div",OF,[S[4]||(S[4]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",DF,[P("h3",IF,Ut(i.value),1)])])])):Kt("",!0),P("div",null,[S[5]||(S[5]=P("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),P("div",NF,[jn(P("input",{id:"username","onUpdate:modelValue":S[0]||(S[0]=O=>l.username=O),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[di,l.username]])])]),P("div",null,[S[8]||(S[8]=P("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),P("div",BF,[jn(P("input",{id:"password","onUpdate:modelValue":S[1]||(S[1]=O=>l.password=O),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,RF),[[Gb,l.password]]),P("button",{type:"button",onClick:S[2]||(S[2]=O=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Ie(),je("svg",FF,S[6]||(S[6]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Ie(),je("svg",jF,S[7]||(S[7]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),P("div",zF,[P("div",UF,[jn(P("input",{id:"remember-me","onUpdate:modelValue":S[3]||(S[3]=O=>l.rememberMe=O),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Al,l.rememberMe]]),S[9]||(S[9]=P("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),P("div",$F,[Kr(T,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Il(()=>S[10]||(S[10]=[zr(" Mot de passe oubli ? ")])),_:1})])]),P("div",null,[P("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Ie(),je("svg",HF,S[11]||(S[11]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Kt("",!0),zr(" "+Ut(r.value?"Connexion en cours...":"Se connecter"),1)],8,VF)])],32)])]),P("div",WF,[S[14]||(S[14]=lu('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-6" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253></span><h3 class="text-xl font-bold text-gray-900" data-v-cb538253>quipements Connects sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-cb538253><div class="flex items-center space-x-4" data-v-cb538253><div class="flex-shrink-0 text-2xl" data-v-cb538253></div><div data-v-cb538253><h4 class="font-semibold" data-v-cb538253>Tracker GPS solaire</h4><p class="text-gray-600" data-v-cb538253>Golocalisez et scurisez votre matriel</p></div></div><div class="flex items-center space-x-4" data-v-cb538253><div class="flex-shrink-0 text-2xl" data-v-cb538253></div><div data-v-cb538253><h4 class="font-semibold" data-v-cb538253>Station mto</h4><p class="text-gray-600" data-v-cb538253>Optimisez vos dcisions avec des donnes en temps rel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-cb538253><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253></span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Carte Interactive</h3></div><p class="text-gray-600" data-v-cb538253>Imaginez... Une carte interactive o tout est sous contrle ! Tout est centralis, organis et accessible en un clin d&#39;il !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253></span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Collaboration en Temps Rel</h3></div><p class="text-gray-600" data-v-cb538253>Travail d&#39;quipe simplifi : Collaborez en temps rel sur une interface ultra-intuitive. Vos quipes restent synchronises et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253></span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-cb538253>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-cb538253><div class="flex items-center mb-4" data-v-cb538253><span class="text-2xl mr-2" data-v-cb538253></span><h3 class="text-lg font-semibold text-gray-900" data-v-cb538253>Accs Scuris</h3></div><p class="text-gray-600" data-v-cb538253>Accs scuris et intelligent : Grez les droits d&#39;accs de vos salaris et prestataires en un clic.</p></div></div>',2)),P("div",GF,[S[13]||(S[13]=P("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),P("div",qF,[(Ie(!0),je(bn,null,sr(f.value,O=>(Ie(),je("button",{key:O,onClick:D=>o.value=O,class:Ei(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===O?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Ut(O),11,YF))),128))]),P("div",ZF,[(Ie(!0),je(bn,null,sr(p.value,O=>(Ie(),je("div",{key:O.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[P("div",KF,[P("span",XF,Ut(O.icon),1),P("span",JF,Ut(O.type),1)]),P("p",QF,Ut(O.text),1)]))),128))]),y.value>1?(Ie(),je("div",e9,[(Ie(!0),je(bn,null,sr(y.value,O=>(Ie(),je("button",{key:O,onClick:D=>a.value=O,class:Ei(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===O?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Ut(O),11,t9))),128))])):Kt("",!0)])]),S[15]||(S[15]=P("div",{class:"h-16"},null,-1))])])}}}),r9=Vc(n9,[["__scopeId","data-v-cb538253"]]),i9="/static/frontend/assets/logo.svg";var O2={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Zo,function(n){var r="1.9.4";function i(u){var v,E,F,te;for(E=1,F=arguments.length;E<F;E++){te=arguments[E];for(v in te)u[v]=te[v]}return u}var s=Object.create||function(){function u(){}return function(v){return u.prototype=v,new u}}();function o(u,v){var E=Array.prototype.slice;if(u.bind)return u.bind.apply(u,E.call(arguments,1));var F=E.call(arguments,2);return function(){return u.apply(v,F.length?F.concat(E.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,v,E){var F,te,Le,et;return et=function(){F=!1,te&&(Le.apply(E,te),te=!1)},Le=function(){F?te=arguments:(u.apply(E,arguments),setTimeout(et,v),F=!0)},Le}function f(u,v,E){var F=v[1],te=v[0],Le=F-te;return u===F&&E?u:((u-te)%Le+Le)%Le+te}function p(){return!1}function y(u,v){if(v===!1)return u;var E=Math.pow(10,v===void 0?6:v);return Math.round(u*E)/E}function m(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function C(u){return m(u).split(/\s+/)}function S(u,v){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var E in v)u.options[E]=v[E];return u.options}function T(u,v,E){var F=[];for(var te in u)F.push(encodeURIComponent(E?te.toUpperCase():te)+"="+encodeURIComponent(u[te]));return(!v||v.indexOf("?")===-1?"?":"&")+F.join("&")}var O=/\{ *([\w_ -]+) *\}/g;function D(u,v){return u.replace(O,function(E,F){var te=v[F];if(te===void 0)throw new Error("No value provided for variable "+E);return typeof te=="function"&&(te=te(v)),te})}var N=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function U(u,v){for(var E=0;E<u.length;E++)if(u[E]===v)return E;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function J(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var ee=0;function V(u){var v=+new Date,E=Math.max(0,16-(v-ee));return ee=v+E,window.setTimeout(u,E)}var K=window.requestAnimationFrame||J("RequestAnimationFrame")||V,pe=window.cancelAnimationFrame||J("CancelAnimationFrame")||J("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function $(u,v,E){if(E&&K===V)u.call(v);else return K.call(window,o(u,v))}function H(u){u&&pe.call(window,u)}var oe={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:f,falseFn:p,formatNum:y,trim:m,splitWords:C,setOptions:S,getParamString:T,template:D,isArray:N,indexOf:U,emptyImageUrl:G,requestFn:K,cancelFn:pe,requestAnimFrame:$,cancelAnimFrame:H};function ie(){}ie.extend=function(u){var v=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},E=v.__super__=this.prototype,F=s(E);F.constructor=v,v.prototype=F;for(var te in this)Object.prototype.hasOwnProperty.call(this,te)&&te!=="prototype"&&te!=="__super__"&&(v[te]=this[te]);return u.statics&&i(v,u.statics),u.includes&&(R(u.includes),i.apply(null,[F].concat(u.includes))),i(F,u),delete F.statics,delete F.includes,F.options&&(F.options=E.options?s(E.options):{},i(F.options,u.options)),F._initHooks=[],F.callInitHooks=function(){if(!this._initHooksCalled){E.callInitHooks&&E.callInitHooks.call(this),this._initHooksCalled=!0;for(var Le=0,et=F._initHooks.length;Le<et;Le++)F._initHooks[Le].call(this)}},v},ie.include=function(u){var v=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=v,this.mergeOptions(u.options)),this},ie.mergeOptions=function(u){return i(this.prototype.options,u),this},ie.addInitHook=function(u){var v=Array.prototype.slice.call(arguments,1),E=typeof u=="function"?u:function(){this[u].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(E),this};function R(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=N(u)?u:[u];for(var v=0;v<u.length;v++)u[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var j={on:function(u,v,E){if(typeof u=="object")for(var F in u)this._on(F,u[F],v);else{u=C(u);for(var te=0,Le=u.length;te<Le;te++)this._on(u[te],v,E)}return this},off:function(u,v,E){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var F in u)this._off(F,u[F],v);else{u=C(u);for(var te=arguments.length===1,Le=0,et=u.length;Le<et;Le++)te?this._off(u[Le]):this._off(u[Le],v,E)}return this},_on:function(u,v,E,F){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(u,v,E)===!1){E===this&&(E=void 0);var te={fn:v,ctx:E};F&&(te.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(te)}},_off:function(u,v,E){var F,te,Le;if(this._events&&(F=this._events[u],!!F)){if(arguments.length===1){if(this._firingCount)for(te=0,Le=F.length;te<Le;te++)F[te].fn=p;delete this._events[u];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var et=this._listens(u,v,E);if(et!==!1){var Pt=F[et];this._firingCount&&(Pt.fn=p,this._events[u]=F=F.slice()),F.splice(et,1)}}},fire:function(u,v,E){if(!this.listens(u,E))return this;var F=i({},v,{type:u,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var te=this._events[u];if(te){this._firingCount=this._firingCount+1||1;for(var Le=0,et=te.length;Le<et;Le++){var Pt=te[Le],Rt=Pt.fn;Pt.once&&this.off(u,Rt,Pt.ctx),Rt.call(Pt.ctx||this,F)}this._firingCount--}}return E&&this._propagateEvent(F),this},listens:function(u,v,E,F){typeof u!="string"&&console.warn('"string" type argument expected');var te=v;typeof v!="function"&&(F=!!v,te=void 0,E=void 0);var Le=this._events&&this._events[u];if(Le&&Le.length&&this._listens(u,te,E)!==!1)return!0;if(F){for(var et in this._eventParents)if(this._eventParents[et].listens(u,v,E,F))return!0}return!1},_listens:function(u,v,E){if(!this._events)return!1;var F=this._events[u]||[];if(!v)return!!F.length;E===this&&(E=void 0);for(var te=0,Le=F.length;te<Le;te++)if(F[te].fn===v&&F[te].ctx===E)return te;return!1},once:function(u,v,E){if(typeof u=="object")for(var F in u)this._on(F,u[F],v,!0);else{u=C(u);for(var te=0,Le=u.length;te<Le;te++)this._on(u[te],v,E,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var v in this._eventParents)this._eventParents[v].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};j.addEventListener=j.on,j.removeEventListener=j.clearAllEventListeners=j.off,j.addOneTimeEventListener=j.once,j.fireEvent=j.fire,j.hasEventListeners=j.listens;var q=ie.extend(j);function re(u,v,E){this.x=E?Math.round(u):u,this.y=E?Math.round(v):v}var xe=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};re.prototype={clone:function(){return new re(this.x,this.y)},add:function(u){return this.clone()._add(be(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(be(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new re(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new re(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=xe(this.x),this.y=xe(this.y),this},distanceTo:function(u){u=be(u);var v=u.x-this.x,E=u.y-this.y;return Math.sqrt(v*v+E*E)},equals:function(u){return u=be(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=be(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function be(u,v,E){return u instanceof re?u:N(u)?new re(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new re(u.x,u.y):new re(u,v,E)}function _e(u,v){if(u)for(var E=v?[u,v]:u,F=0,te=E.length;F<te;F++)this.extend(E[F])}_e.prototype={extend:function(u){var v,E;if(!u)return this;if(u instanceof re||typeof u[0]=="number"||"x"in u)v=E=be(u);else if(u=Z(u),v=u.min,E=u.max,!v||!E)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=E.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(E.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(E.y,this.max.y)),this},getCenter:function(u){return be((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return be(this.min.x,this.max.y)},getTopRight:function(){return be(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var v,E;return typeof u[0]=="number"||u instanceof re?u=be(u):u=Z(u),u instanceof _e?(v=u.min,E=u.max):v=E=u,v.x>=this.min.x&&E.x<=this.max.x&&v.y>=this.min.y&&E.y<=this.max.y},intersects:function(u){u=Z(u);var v=this.min,E=this.max,F=u.min,te=u.max,Le=te.x>=v.x&&F.x<=E.x,et=te.y>=v.y&&F.y<=E.y;return Le&&et},overlaps:function(u){u=Z(u);var v=this.min,E=this.max,F=u.min,te=u.max,Le=te.x>v.x&&F.x<E.x,et=te.y>v.y&&F.y<E.y;return Le&&et},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var v=this.min,E=this.max,F=Math.abs(v.x-E.x)*u,te=Math.abs(v.y-E.y)*u;return Z(be(v.x-F,v.y-te),be(E.x+F,E.y+te))},equals:function(u){return u?(u=Z(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function Z(u,v){return!u||u instanceof _e?u:new _e(u,v)}function ae(u,v){if(u)for(var E=v?[u,v]:u,F=0,te=E.length;F<te;F++)this.extend(E[F])}ae.prototype={extend:function(u){var v=this._southWest,E=this._northEast,F,te;if(u instanceof de)F=u,te=u;else if(u instanceof ae){if(F=u._southWest,te=u._northEast,!F||!te)return this}else return u?this.extend(ge(u)||ce(u)):this;return!v&&!E?(this._southWest=new de(F.lat,F.lng),this._northEast=new de(te.lat,te.lng)):(v.lat=Math.min(F.lat,v.lat),v.lng=Math.min(F.lng,v.lng),E.lat=Math.max(te.lat,E.lat),E.lng=Math.max(te.lng,E.lng)),this},pad:function(u){var v=this._southWest,E=this._northEast,F=Math.abs(v.lat-E.lat)*u,te=Math.abs(v.lng-E.lng)*u;return new ae(new de(v.lat-F,v.lng-te),new de(E.lat+F,E.lng+te))},getCenter:function(){return new de((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new de(this.getNorth(),this.getWest())},getSouthEast:function(){return new de(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof de||"lat"in u?u=ge(u):u=ce(u);var v=this._southWest,E=this._northEast,F,te;return u instanceof ae?(F=u.getSouthWest(),te=u.getNorthEast()):F=te=u,F.lat>=v.lat&&te.lat<=E.lat&&F.lng>=v.lng&&te.lng<=E.lng},intersects:function(u){u=ce(u);var v=this._southWest,E=this._northEast,F=u.getSouthWest(),te=u.getNorthEast(),Le=te.lat>=v.lat&&F.lat<=E.lat,et=te.lng>=v.lng&&F.lng<=E.lng;return Le&&et},overlaps:function(u){u=ce(u);var v=this._southWest,E=this._northEast,F=u.getSouthWest(),te=u.getNorthEast(),Le=te.lat>v.lat&&F.lat<E.lat,et=te.lng>v.lng&&F.lng<E.lng;return Le&&et},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,v){return u?(u=ce(u),this._southWest.equals(u.getSouthWest(),v)&&this._northEast.equals(u.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ce(u,v){return u instanceof ae?u:new ae(u,v)}function de(u,v,E){if(isNaN(u)||isNaN(v))throw new Error("Invalid LatLng object: ("+u+", "+v+")");this.lat=+u,this.lng=+v,E!==void 0&&(this.alt=+E)}de.prototype={equals:function(u,v){if(!u)return!1;u=ge(u);var E=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return E<=(v===void 0?1e-9:v)},toString:function(u){return"LatLng("+y(this.lat,u)+", "+y(this.lng,u)+")"},distanceTo:function(u){return Ue.distance(this,ge(u))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(u){var v=180*u/40075017,E=v/Math.cos(Math.PI/180*this.lat);return ce([this.lat-v,this.lng-E],[this.lat+v,this.lng+E])},clone:function(){return new de(this.lat,this.lng,this.alt)}};function ge(u,v,E){return u instanceof de?u:N(u)&&typeof u[0]!="object"?u.length===3?new de(u[0],u[1],u[2]):u.length===2?new de(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new de(u.lat,"lng"in u?u.lng:u.lon,u.alt):v===void 0?null:new de(u,v,E)}var Ee={latLngToPoint:function(u,v){var E=this.projection.project(u),F=this.scale(v);return this.transformation._transform(E,F)},pointToLatLng:function(u,v){var E=this.scale(v),F=this.transformation.untransform(u,E);return this.projection.unproject(F)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var v=this.projection.bounds,E=this.scale(u),F=this.transformation.transform(v.min,E),te=this.transformation.transform(v.max,E);return new _e(F,te)},infinite:!1,wrapLatLng:function(u){var v=this.wrapLng?f(u.lng,this.wrapLng,!0):u.lng,E=this.wrapLat?f(u.lat,this.wrapLat,!0):u.lat,F=u.alt;return new de(E,v,F)},wrapLatLngBounds:function(u){var v=u.getCenter(),E=this.wrapLatLng(v),F=v.lat-E.lat,te=v.lng-E.lng;if(F===0&&te===0)return u;var Le=u.getSouthWest(),et=u.getNorthEast(),Pt=new de(Le.lat-F,Le.lng-te),Rt=new de(et.lat-F,et.lng-te);return new ae(Pt,Rt)}},Ue=i({},Ee,{wrapLng:[-180,180],R:6371e3,distance:function(u,v){var E=Math.PI/180,F=u.lat*E,te=v.lat*E,Le=Math.sin((v.lat-u.lat)*E/2),et=Math.sin((v.lng-u.lng)*E/2),Pt=Le*Le+Math.cos(F)*Math.cos(te)*et*et,Rt=2*Math.atan2(Math.sqrt(Pt),Math.sqrt(1-Pt));return this.R*Rt}}),Ne=6378137,rt={R:Ne,MAX_LATITUDE:85.0511287798,project:function(u){var v=Math.PI/180,E=this.MAX_LATITUDE,F=Math.max(Math.min(E,u.lat),-E),te=Math.sin(F*v);return new re(this.R*u.lng*v,this.R*Math.log((1+te)/(1-te))/2)},unproject:function(u){var v=180/Math.PI;return new de((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*v,u.x*v/this.R)},bounds:function(){var u=Ne*Math.PI;return new _e([-u,-u],[u,u])}()};function gt(u,v,E,F){if(N(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=v,this._c=E,this._d=F}gt.prototype={transform:function(u,v){return this._transform(u.clone(),v)},_transform:function(u,v){return v=v||1,u.x=v*(this._a*u.x+this._b),u.y=v*(this._c*u.y+this._d),u},untransform:function(u,v){return v=v||1,new re((u.x/v-this._b)/this._a,(u.y/v-this._d)/this._c)}};function _t(u,v,E,F){return new gt(u,v,E,F)}var le=i({},Ue,{code:"EPSG:3857",projection:rt,transformation:function(){var u=.5/(Math.PI*rt.R);return _t(u,.5,-u,.5)}()}),se=i({},le,{code:"EPSG:900913"});function ue(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function Q(u,v){var E="",F,te,Le,et,Pt,Rt;for(F=0,Le=u.length;F<Le;F++){for(Pt=u[F],te=0,et=Pt.length;te<et;te++)Rt=Pt[te],E+=(te?"L":"M")+Rt.x+" "+Rt.y;E+=v?Ze.svg?"z":"x":""}return E||"M0 0"}var ke=document.documentElement.style,Ve="ActiveXObject"in window,Xe=Ve&&!document.addEventListener,lt="msLaunchUri"in navigator&&!("documentMode"in document),at=Zt("webkit"),pt=Zt("android"),jt=Zt("android 2")||Zt("android 3"),Bt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qt=pt&&Zt("Google")&&Bt<537&&!("AudioNode"in window),Jt=!!window.opera,gn=!lt&&Zt("chrome"),Cn=Zt("gecko")&&!at&&!Jt&&!Ve,Ye=!gn&&Zt("safari"),st=Zt("phantom"),Qe="OTransition"in ke,$t=navigator.platform.indexOf("Win")===0,Yt=Ve&&"transition"in ke,wn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!jt,mn="MozPerspective"in ke,_n=!window.L_DISABLE_3D&&(Yt||wn||mn)&&!Qe&&!st,Rn=typeof orientation<"u"||Zt("mobile"),vn=Rn&&at,tn=Rn&&wn,hn=!window.PointerEvent&&window.MSPointerEvent,Bn=!!(window.PointerEvent||hn),Jn="ontouchstart"in window||!!window.TouchEvent,ar=!window.L_NO_TOUCH&&(Jn||Bn),zn=Rn&&Jt,Lr=Rn&&Cn,ns=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ki=function(){var u=!1;try{var v=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,v),window.removeEventListener("testPassiveEventSupport",p,v)}catch{}return u}(),Ft=function(){return!!document.createElement("canvas").getContext}(),Je=!!(document.createElementNS&&ue("svg").createSVGRect),Lt=!!Je&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),In=!Je&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var v=u.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}}(),nr=navigator.platform.indexOf("Mac")===0,Nn=navigator.platform.indexOf("Linux")===0;function Zt(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var Ze={ie:Ve,ielt9:Xe,edge:lt,webkit:at,android:pt,android23:jt,androidStock:qt,opera:Jt,chrome:gn,gecko:Cn,safari:Ye,phantom:st,opera12:Qe,win:$t,ie3d:Yt,webkit3d:wn,gecko3d:mn,any3d:_n,mobile:Rn,mobileWebkit:vn,mobileWebkit3d:tn,msPointer:hn,pointer:Bn,touch:ar,touchNative:Jn,mobileOpera:zn,mobileGecko:Lr,retina:ns,passiveEvents:ki,canvas:Ft,svg:Je,vml:In,inlineSvg:Lt,mac:nr,linux:Nn},un=Ze.msPointer?"MSPointerDown":"pointerdown",sn=Ze.msPointer?"MSPointerMove":"pointermove",An=Ze.msPointer?"MSPointerUp":"pointerup",Qn=Ze.msPointer?"MSPointerCancel":"pointercancel",ir={touchstart:un,touchmove:sn,touchend:An,touchcancel:Qn},Wr={touchstart:hu,touchmove:zl,touchend:zl,touchcancel:zl},Un={},li=!1;function kr(u,v,E){return v==="touchstart"&&ws(),Wr[v]?(E=Wr[v].bind(this,E),u.addEventListener(ir[v],E,!1),E):(console.warn("wrong event specified:",v),p)}function Do(u,v,E){if(!ir[v]){console.warn("wrong event specified:",v);return}u.removeEventListener(ir[v],E,!1)}function lr(u){Un[u.pointerId]=u}function br(u){Un[u.pointerId]&&(Un[u.pointerId]=u)}function Gi(u){delete Un[u.pointerId]}function ws(){li||(document.addEventListener(un,lr,!0),document.addEventListener(sn,br,!0),document.addEventListener(An,Gi,!0),document.addEventListener(Qn,Gi,!0),li=!0)}function zl(u,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var E in Un)v.touches.push(Un[E]);v.changedTouches=[v],u(v)}}function hu(u,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&fr(v),zl(u,v)}function Wc(u){var v={},E,F;for(F in u)E=u[F],v[F]=E&&E.bind?E.bind(u):E;return u=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var fu=200;function fc(u,v){u.addEventListener("dblclick",v);var E=0,F;function te(Le){if(Le.detail!==1){F=Le.detail;return}if(!(Le.pointerType==="mouse"||Le.sourceCapabilities&&!Le.sourceCapabilities.firesTouchEvents)){var et=qa(Le);if(!(et.some(function(Rt){return Rt instanceof HTMLLabelElement&&Rt.attributes.for})&&!et.some(function(Rt){return Rt instanceof HTMLInputElement||Rt instanceof HTMLSelectElement}))){var Pt=Date.now();Pt-E<=fu?(F++,F===2&&v(Wc(Le))):F=1,E=Pt}}}return u.addEventListener("click",te),{dblclick:v,simDblclick:te}}function dc(u,v){u.removeEventListener("dblclick",v.dblclick),u.removeEventListener("click",v.simDblclick)}var ul=hl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),cl=hl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Nu=cl==="webkitTransition"||cl==="OTransition"?cl+"End":"transitionend";function pc(u){return typeof u=="string"?document.getElementById(u):u}function So(u,v){var E=u.style[v]||u.currentStyle&&u.currentStyle[v];if((!E||E==="auto")&&document.defaultView){var F=document.defaultView.getComputedStyle(u,null);E=F?F[v]:null}return E==="auto"?null:E}function Gr(u,v,E){var F=document.createElement(u);return F.className=v||"",E&&E.appendChild(F),F}function hr(u){var v=u.parentNode;v&&v.removeChild(u)}function Ua(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function fa(u){var v=u.parentNode;v&&v.lastChild!==u&&v.appendChild(u)}function Io(u){var v=u.parentNode;v&&v.firstChild!==u&&v.insertBefore(u,v.firstChild)}function Ul(u,v){if(u.classList!==void 0)return u.classList.contains(v);var E=xs(u);return E.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(E)}function pr(u,v){if(u.classList!==void 0)for(var E=C(v),F=0,te=E.length;F<te;F++)u.classList.add(E[F]);else if(!Ul(u,v)){var Le=xs(u);$a(u,(Le?Le+" ":"")+v)}}function qr(u,v){u.classList!==void 0?u.classList.remove(v):$a(u,m((" "+xs(u)+" ").replace(" "+v+" "," ")))}function $a(u,v){u.className.baseVal===void 0?u.className=v:u.className.baseVal=v}function xs(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function Ls(u,v){"opacity"in u.style?u.style.opacity=v:"filter"in u.style&&Bu(u,v)}function Bu(u,v){var E=!1,F="DXImageTransform.Microsoft.Alpha";try{E=u.filters.item(F)}catch{if(v===1)return}v=Math.round(v*100),E?(E.Enabled=v!==100,E.Opacity=v):u.style.filter+=" progid:"+F+"(opacity="+v+")"}function hl(u){for(var v=document.documentElement.style,E=0;E<u.length;E++)if(u[E]in v)return u[E];return!1}function da(u,v,E){var F=v||new re(0,0);u.style[ul]=(Ze.ie3d?"translate("+F.x+"px,"+F.y+"px)":"translate3d("+F.x+"px,"+F.y+"px,0)")+(E?" scale("+E+")":"")}function Ti(u,v){u._leaflet_pos=v,Ze.any3d?da(u,v):(u.style.left=v.x+"px",u.style.top=v.y+"px")}function No(u){return u._leaflet_pos||new re(0,0)}var Va,mo,du;if("onselectstart"in document)Va=function(){gr(window,"selectstart",fr)},mo=function(){$r(window,"selectstart",fr)};else{var Ha=hl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Va=function(){if(Ha){var u=document.documentElement.style;du=u[Ha],u[Ha]="none"}},mo=function(){Ha&&(document.documentElement.style[Ha]=du,du=void 0)}}function Ru(){gr(window,"dragstart",fr)}function Bo(){$r(window,"dragstart",fr)}var pa,Wa;function $l(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(rs(),pa=u,Wa=u.style.outlineStyle,u.style.outlineStyle="none",gr(window,"keydown",rs))}function rs(){pa&&(pa.style.outlineStyle=Wa,pa=void 0,Wa=void 0,$r(window,"keydown",rs))}function gc(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function pu(u){var v=u.getBoundingClientRect();return{x:v.width/u.offsetWidth||1,y:v.height/u.offsetHeight||1,boundingClientRect:v}}var ur={__proto__:null,TRANSFORM:ul,TRANSITION:cl,TRANSITION_END:Nu,get:pc,getStyle:So,create:Gr,remove:hr,empty:Ua,toFront:fa,toBack:Io,hasClass:Ul,addClass:pr,removeClass:qr,setClass:$a,getClass:xs,setOpacity:Ls,testProp:hl,setTransform:da,setPosition:Ti,getPosition:No,get disableTextSelection(){return Va},get enableTextSelection(){return mo},disableImageDrag:Ru,enableImageDrag:Bo,preventOutline:$l,restoreOutline:rs,getSizedParentNode:gc,getScale:pu};function gr(u,v,E,F){if(v&&typeof v=="object")for(var te in v)dl(u,te,v[te],E);else{v=C(v);for(var Le=0,et=v.length;Le<et;Le++)dl(u,v[Le],E,F)}return this}var Ro="_leaflet_events";function $r(u,v,E,F){if(arguments.length===1)Fu(u),delete u[Ro];else if(v&&typeof v=="object")for(var te in v)Fo(u,te,v[te],E);else if(v=C(v),arguments.length===2)Fu(u,function(Pt){return U(v,Pt)!==-1});else for(var Le=0,et=v.length;Le<et;Le++)Fo(u,v[Le],E,F);return this}function Fu(u,v){for(var E in u[Ro]){var F=E.split(/\d/)[0];(!v||v(F))&&Fo(u,F,null,null,E)}}var fl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function dl(u,v,E,F){var te=v+l(E)+(F?"_"+l(F):"");if(u[Ro]&&u[Ro][te])return this;var Le=function(Pt){return E.call(F||u,Pt||window.event)},et=Le;!Ze.touchNative&&Ze.pointer&&v.indexOf("touch")===0?Le=kr(u,v,Le):Ze.touch&&v==="dblclick"?Le=fc(u,Le):"addEventListener"in u?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?u.addEventListener(fl[v]||v,Le,Ze.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(Le=function(Pt){Pt=Pt||window.event,pl(u,Pt)&&et(Pt)},u.addEventListener(fl[v],Le,!1)):u.addEventListener(v,et,!1):u.attachEvent("on"+v,Le),u[Ro]=u[Ro]||{},u[Ro][te]=Le}function Fo(u,v,E,F,te){te=te||v+l(E)+(F?"_"+l(F):"");var Le=u[Ro]&&u[Ro][te];if(!Le)return this;!Ze.touchNative&&Ze.pointer&&v.indexOf("touch")===0?Do(u,v,Le):Ze.touch&&v==="dblclick"?dc(u,Le):"removeEventListener"in u?u.removeEventListener(fl[v]||v,Le,!1):u.detachEvent("on"+v,Le),u[Ro][te]=null}function Ga(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function ju(u){return dl(u,"wheel",Ga),this}function Vl(u){return gr(u,"mousedown touchstart dblclick contextmenu",Ga),u._leaflet_disable_click=!0,this}function fr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Mr(u){return fr(u),Ga(u),this}function qa(u){if(u.composedPath)return u.composedPath();for(var v=[],E=u.target;E;)v.push(E),E=E.parentNode;return v}function mc(u,v){if(!v)return new re(u.clientX,u.clientY);var E=pu(v),F=E.boundingClientRect;return new re((u.clientX-F.left)/E.x-v.clientLeft,(u.clientY-F.top)/E.y-v.clientTop)}var Hl=Ze.linux&&Ze.chrome?window.devicePixelRatio:Ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function gu(u){return Ze.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/Hl:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function pl(u,v){var E=v.relatedTarget;if(!E)return!0;try{for(;E&&E!==u;)E=E.parentNode}catch{return!1}return E!==u}var Wl={__proto__:null,on:gr,off:$r,stopPropagation:Ga,disableScrollPropagation:ju,disableClickPropagation:Vl,preventDefault:fr,stop:Mr,getPropagationPath:qa,getMousePosition:mc,getWheelDelta:gu,isExternalTarget:pl,addListener:gr,removeListener:$r},mu=q.extend({run:function(u,v,E,F){this.stop(),this._el=u,this._inProgress=!0,this._duration=E||.25,this._easeOutPower=1/Math.max(F||.5,.2),this._startPos=No(u),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(u){var v=+new Date-this._startTime,E=this._duration*1e3;v<E?this._runFrame(this._easeOut(v/E),u):(this._runFrame(1),this._complete())},_runFrame:function(u,v){var E=this._startPos.add(this._offset.multiplyBy(u));v&&E._round(),Ti(this._el,E),this.fire("step")},_complete:function(){H(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Dr=q.extend({options:{crs:le,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,v){v=S(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(ge(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=cl&&Ze.any3d&&!Ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),gr(this._proxy,Nu,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,v,E){if(v=v===void 0?this._zoom:this._limitZoom(v),u=this._limitCenter(ge(u),v,this.options.maxBounds),E=E||{},this._stop(),this._loaded&&!E.reset&&E!==!0){E.animate!==void 0&&(E.zoom=i({animate:E.animate},E.zoom),E.pan=i({animate:E.animate,duration:E.duration},E.pan));var F=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,v,E.zoom):this._tryAnimatedPan(u,E.pan);if(F)return clearTimeout(this._sizeTimer),this}return this._resetView(u,v,E.pan&&E.pan.noMoveStart),this},setZoom:function(u,v){return this._loaded?this.setView(this.getCenter(),u,{zoom:v}):(this._zoom=u,this)},zoomIn:function(u,v){return u=u||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,v)},zoomOut:function(u,v){return u=u||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,v)},setZoomAround:function(u,v,E){var F=this.getZoomScale(v),te=this.getSize().divideBy(2),Le=u instanceof re?u:this.latLngToContainerPoint(u),et=Le.subtract(te).multiplyBy(1-1/F),Pt=this.containerPointToLatLng(te.add(et));return this.setView(Pt,v,{zoom:E})},_getBoundsCenterZoom:function(u,v){v=v||{},u=u.getBounds?u.getBounds():ce(u);var E=be(v.paddingTopLeft||v.padding||[0,0]),F=be(v.paddingBottomRight||v.padding||[0,0]),te=this.getBoundsZoom(u,!1,E.add(F));if(te=typeof v.maxZoom=="number"?Math.min(v.maxZoom,te):te,te===1/0)return{center:u.getCenter(),zoom:te};var Le=F.subtract(E).divideBy(2),et=this.project(u.getSouthWest(),te),Pt=this.project(u.getNorthEast(),te),Rt=this.unproject(et.add(Pt).divideBy(2).add(Le),te);return{center:Rt,zoom:te}},fitBounds:function(u,v){if(u=ce(u),!u.isValid())throw new Error("Bounds are not valid.");var E=this._getBoundsCenterZoom(u,v);return this.setView(E.center,E.zoom,v)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,v){return this.setView(u,this._zoom,{pan:v})},panBy:function(u,v){if(u=be(u).round(),v=v||{},!u.x&&!u.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new mu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){pr(this._mapPane,"leaflet-pan-anim");var E=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,E,v.duration||.25,v.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,v,E){if(E=E||{},E.animate===!1||!Ze.any3d)return this.setView(u,v,E);this._stop();var F=this.project(this.getCenter()),te=this.project(u),Le=this.getSize(),et=this._zoom;u=ge(u),v=v===void 0?et:v;var Pt=Math.max(Le.x,Le.y),Rt=Pt*this.getZoomScale(et,v),nn=te.distanceTo(F)||1,kn=1.42,Hn=kn*kn;function Cr(Xr){var Ts=Xr?-1:1,Ae=Xr?Rt:Pt,ro=Rt*Rt-Pt*Pt+Ts*Hn*Hn*nn*nn,$u=2*Ae*Hn*nn,gs=ro/$u,Pr=Math.sqrt(gs*gs+1)-gs,Sh=Pr<1e-9?-18:Math.log(Pr);return Sh}function Ki(Xr){return(Math.exp(Xr)-Math.exp(-Xr))/2}function Oi(Xr){return(Math.exp(Xr)+Math.exp(-Xr))/2}function ps(Xr){return Ki(Xr)/Oi(Xr)}var Ci=Cr(0);function no(Xr){return Pt*(Oi(Ci)/Oi(Ci+kn*Xr))}function qc(Xr){return Pt*(Oi(Ci)*ps(Ci+kn*Xr)-Ki(Ci))/Hn}function oa(Xr){return 1-Math.pow(1-Xr,1.5)}var Ho=Date.now(),ko=(Cr(1)-Ci)/kn,pf=E.duration?1e3*E.duration:1e3*ko*.8;function bu(){var Xr=(Date.now()-Ho)/pf,Ts=oa(Xr)*ko;Xr<=1?(this._flyToFrame=$(bu,this),this._move(this.unproject(F.add(te.subtract(F).multiplyBy(qc(Ts)/nn)),et),this.getScaleZoom(Pt/no(Ts),et),{flyTo:!0})):this._move(u,v)._moveEnd(!0)}return this._moveStart(!0,E.noMoveStart),bu.call(this),this},flyToBounds:function(u,v){var E=this._getBoundsCenterZoom(u,v);return this.flyTo(E.center,E.zoom,v)},setMaxBounds:function(u){return u=ce(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var v=this.options.minZoom;return this.options.minZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var v=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&v!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,v){this._enforcingBounds=!0;var E=this.getCenter(),F=this._limitCenter(E,this._zoom,ce(u));return E.equals(F)||this.panTo(F,v),this._enforcingBounds=!1,this},panInside:function(u,v){v=v||{};var E=be(v.paddingTopLeft||v.padding||[0,0]),F=be(v.paddingBottomRight||v.padding||[0,0]),te=this.project(this.getCenter()),Le=this.project(u),et=this.getPixelBounds(),Pt=Z([et.min.add(E),et.max.subtract(F)]),Rt=Pt.getSize();if(!Pt.contains(Le)){this._enforcingBounds=!0;var nn=Le.subtract(Pt.getCenter()),kn=Pt.extend(Le).getSize().subtract(Rt);te.x+=nn.x<0?-kn.x:kn.x,te.y+=nn.y<0?-kn.y:kn.y,this.panTo(this.unproject(te),v),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var E=this.getSize(),F=v.divideBy(2).round(),te=E.divideBy(2).round(),Le=F.subtract(te);return!Le.x&&!Le.y?this:(u.animate&&u.pan?this.panBy(Le):(u.pan&&this._rawPanBy(Le),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:E}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=o(this._handleGeolocationResponse,this),E=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,E,u):navigator.geolocation.getCurrentPosition(v,E,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var v=u.code,E=u.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+E+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var v=u.coords.latitude,E=u.coords.longitude,F=new de(v,E),te=F.toBounds(u.coords.accuracy*2),Le=this._locateOptions;if(Le.setView){var et=this.getBoundsZoom(te);this.setView(F,Le.maxZoom?Math.min(et,Le.maxZoom):et)}var Pt={latlng:F,bounds:te,timestamp:u.timestamp};for(var Rt in u.coords)typeof u.coords[Rt]=="number"&&(Pt[Rt]=u.coords[Rt]);this.fire("locationfound",Pt)}},addHandler:function(u,v){if(!v)return this;var E=this[u]=new v(this);return this._handlers.push(E),this.options[u]&&E.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),hr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(H(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)hr(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,v){var E="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),F=Gr("div",E,v||this._mapPane);return u&&(this._panes[u]=F),F},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),v=this.unproject(u.getBottomLeft()),E=this.unproject(u.getTopRight());return new ae(v,E)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,v,E){u=ce(u),E=be(E||[0,0]);var F=this.getZoom()||0,te=this.getMinZoom(),Le=this.getMaxZoom(),et=u.getNorthWest(),Pt=u.getSouthEast(),Rt=this.getSize().subtract(E),nn=Z(this.project(Pt,F),this.project(et,F)).getSize(),kn=Ze.any3d?this.options.zoomSnap:1,Hn=Rt.x/nn.x,Cr=Rt.y/nn.y,Ki=v?Math.max(Hn,Cr):Math.min(Hn,Cr);return F=this.getScaleZoom(Ki,F),kn&&(F=Math.round(F/(kn/100))*(kn/100),F=v?Math.ceil(F/kn)*kn:Math.floor(F/kn)*kn),Math.max(te,Math.min(Le,F))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new re(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,v){var E=this._getTopLeftPoint(u,v);return new _e(E,E.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,v){var E=this.options.crs;return v=v===void 0?this._zoom:v,E.scale(u)/E.scale(v)},getScaleZoom:function(u,v){var E=this.options.crs;v=v===void 0?this._zoom:v;var F=E.zoom(u*E.scale(v));return isNaN(F)?1/0:F},project:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(ge(u),v)},unproject:function(u,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(be(u),v)},layerPointToLatLng:function(u){var v=be(u).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(u){var v=this.project(ge(u))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(ge(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(ce(u))},distance:function(u,v){return this.options.crs.distance(ge(u),ge(v))},containerPointToLayerPoint:function(u){return be(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return be(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var v=this.containerPointToLayerPoint(be(u));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(u)))},mouseEventToContainerPoint:function(u){return mc(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var v=this._container=pc(u);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");gr(v,"scroll",this._onScroll,this),this._containerId=l(v)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ze.any3d,pr(u,"leaflet-container"+(Ze.touch?" leaflet-touch":"")+(Ze.retina?" leaflet-retina":"")+(Ze.ielt9?" leaflet-oldie":"")+(Ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=So(u,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ti(this._mapPane,new re(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(pr(u.markerPane,"leaflet-zoom-hide"),pr(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,v,E){Ti(this._mapPane,new re(0,0));var F=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var te=this._zoom!==v;this._moveStart(te,E)._move(u,v)._moveEnd(te),this.fire("viewreset"),F&&this.fire("load")},_moveStart:function(u,v){return u&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(u,v,E,F){v===void 0&&(v=this._zoom);var te=this._zoom!==v;return this._zoom=v,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),F?E&&E.pinch&&this.fire("zoom",E):((te||E&&E.pinch)&&this.fire("zoom",E),this.fire("move",E)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return H(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){Ti(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var v=u?$r:gr;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),Ze.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){H(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,v){for(var E=[],F,te=v==="mouseout"||v==="mouseover",Le=u.target||u.srcElement,et=!1;Le;){if(F=this._targets[l(Le)],F&&(v==="click"||v==="preclick")&&this._draggableMoved(F)){et=!0;break}if(F&&F.listens(v,!0)&&(te&&!pl(Le,u)||(E.push(F),te))||Le===this._container)break;Le=Le.parentNode}return!E.length&&!et&&!te&&this.listens(v,!0)&&(E=[this]),E},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var v=u.target||u.srcElement;if(!(!this._loaded||v._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(v))){var E=u.type;E==="mousedown"&&$l(v),this._fireDOMEvent(u,E)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,v,E){if(u.type==="click"){var F=i({},u);F.type="preclick",this._fireDOMEvent(F,F.type,E)}var te=this._findEventTargets(u,v);if(E){for(var Le=[],et=0;et<E.length;et++)E[et].listens(v,!0)&&Le.push(E[et]);te=Le.concat(te)}if(te.length){v==="contextmenu"&&fr(u);var Pt=te[0],Rt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var nn=Pt.getLatLng&&(!Pt._radius||Pt._radius<=10);Rt.containerPoint=nn?this.latLngToContainerPoint(Pt.getLatLng()):this.mouseEventToContainerPoint(u),Rt.layerPoint=this.containerPointToLayerPoint(Rt.containerPoint),Rt.latlng=nn?Pt.getLatLng():this.layerPointToLatLng(Rt.layerPoint)}for(et=0;et<te.length;et++)if(te[et].fire(v,Rt,!0),Rt.originalEvent._stopped||te[et].options.bubblingMouseEvents===!1&&U(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,v=this._handlers.length;u<v;u++)this._handlers[u].disable()},whenReady:function(u,v){return this._loaded?u.call(v||this,{target:this}):this.on("load",u,v),this},_getMapPanePos:function(){return No(this._mapPane)||new re(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,v){var E=u&&v!==void 0?this._getNewPixelOrigin(u,v):this.getPixelOrigin();return E.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,v){var E=this.getSize()._divideBy(2);return this.project(u,v)._subtract(E)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,v,E){var F=this._getNewPixelOrigin(E,v);return this.project(u,v)._subtract(F)},_latLngBoundsToNewLayerBounds:function(u,v,E){var F=this._getNewPixelOrigin(E,v);return Z([this.project(u.getSouthWest(),v)._subtract(F),this.project(u.getNorthWest(),v)._subtract(F),this.project(u.getSouthEast(),v)._subtract(F),this.project(u.getNorthEast(),v)._subtract(F)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,v,E){if(!E)return u;var F=this.project(u,v),te=this.getSize().divideBy(2),Le=new _e(F.subtract(te),F.add(te)),et=this._getBoundsOffset(Le,E,v);return Math.abs(et.x)<=1&&Math.abs(et.y)<=1?u:this.unproject(F.add(et),v)},_limitOffset:function(u,v){if(!v)return u;var E=this.getPixelBounds(),F=new _e(E.min.add(u),E.max.add(u));return u.add(this._getBoundsOffset(F,v))},_getBoundsOffset:function(u,v,E){var F=Z(this.project(v.getNorthEast(),E),this.project(v.getSouthWest(),E)),te=F.min.subtract(u.min),Le=F.max.subtract(u.max),et=this._rebound(te.x,-Le.x),Pt=this._rebound(te.y,-Le.y);return new re(et,Pt)},_rebound:function(u,v){return u+v>0?Math.round(u-v)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(v))},_limitZoom:function(u){var v=this.getMinZoom(),E=this.getMaxZoom(),F=Ze.any3d?this.options.zoomSnap:1;return F&&(u=Math.round(u/F)*F),Math.max(v,Math.min(E,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){qr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,v){var E=this._getCenterOffset(u)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(E)?!1:(this.panBy(E,v),!0)},_createAnimProxy:function(){var u=this._proxy=Gr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(v){var E=ul,F=this._proxy.style[E];da(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),F===this._proxy.style[E]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){hr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),v=this.getZoom();da(this._proxy,this.project(u,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,v,E){if(this._animatingZoom)return!0;if(E=E||{},!this._zoomAnimated||E.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var F=this.getZoomScale(v),te=this._getCenterOffset(u)._divideBy(1-1/F);return E.animate!==!0&&!this.getSize().contains(te)?!1:($(function(){this._moveStart(!0,E.noMoveStart||!1)._animateZoom(u,v,!0)},this),!0)},_animateZoom:function(u,v,E,F){this._mapPane&&(E&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=v,pr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:v,noUpdate:F}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&qr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ri(u,v){return new Dr(u,v)}var Kn=ie.extend({options:{position:"topright"},initialize:function(u){S(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var v=this._map;return v&&v.removeControl(this),this.options.position=u,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var v=this._container=this.onAdd(u),E=this.getPosition(),F=u._controlCorners[E];return pr(v,"leaflet-control"),E.indexOf("bottom")!==-1?F.insertBefore(v,F.firstChild):F.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(hr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),Fi=function(u){return new Kn(u)};Dr.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},v="leaflet-",E=this._controlContainer=Gr("div",v+"control-container",this._container);function F(te,Le){var et=v+te+" "+v+Le;u[te+Le]=Gr("div",et,E)}F("top","left"),F("top","right"),F("bottom","left"),F("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)hr(this._controlCorners[u]);hr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var gl=Kn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,v,E,F){return E<F?-1:F<E?1:0}},initialize:function(u,v,E){S(this,E),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var F in u)this._addLayer(u[F],F);for(F in v)this._addLayer(v[F],F,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return Kn.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,v){return this._addLayer(u,v),this._map?this._update():this},addOverlay:function(u,v){return this._addLayer(u,v,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var v=this._getLayer(l(u));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){pr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(pr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):qr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return qr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",v=this._container=Gr("div",u),E=this.options.collapsed;v.setAttribute("aria-haspopup",!0),Vl(v),ju(v);var F=this._section=Gr("section",u+"-list");E&&(this._map.on("click",this.collapse,this),gr(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var te=this._layersLink=Gr("a",u+"-toggle",v);te.href="#",te.title="Layers",te.setAttribute("role","button"),gr(te,{keydown:function(Le){Le.keyCode===13&&this._expandSafely()},click:function(Le){fr(Le),this._expandSafely()}},this),E||this.expand(),this._baseLayersList=Gr("div",u+"-base",F),this._separator=Gr("div",u+"-separator",F),this._overlaysList=Gr("div",u+"-overlays",F),v.appendChild(F)},_getLayer:function(u){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&l(this._layers[v].layer)===u)return this._layers[v]},_addLayer:function(u,v,E){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:v,overlay:E}),this.options.sortLayers&&this._layers.sort(o(function(F,te){return this.options.sortFunction(F.layer,te.layer,F.name,te.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ua(this._baseLayersList),Ua(this._overlaysList),this._layerControlInputs=[];var u,v,E,F,te=0;for(E=0;E<this._layers.length;E++)F=this._layers[E],this._addItem(F),v=v||F.overlay,u=u||!F.overlay,te+=F.overlay?0:1;return this.options.hideSingleBase&&(u=u&&te>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=v&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var v=this._getLayer(l(u.target)),E=v.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;E&&this._map.fire(E,v)},_createRadioElement:function(u,v){var E='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(v?' checked="checked"':"")+"/>",F=document.createElement("div");return F.innerHTML=E,F.firstChild},_addItem:function(u){var v=document.createElement("label"),E=this._map.hasLayer(u.layer),F;u.overlay?(F=document.createElement("input"),F.type="checkbox",F.className="leaflet-control-layers-selector",F.defaultChecked=E):F=this._createRadioElement("leaflet-base-layers_"+l(this),E),this._layerControlInputs.push(F),F.layerId=l(u.layer),gr(F,"click",this._onInputClick,this);var te=document.createElement("span");te.innerHTML=" "+u.name;var Le=document.createElement("span");v.appendChild(Le),Le.appendChild(F),Le.appendChild(te);var et=u.overlay?this._overlaysList:this._baseLayersList;return et.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,v,E,F=[],te=[];this._handlingClick=!0;for(var Le=u.length-1;Le>=0;Le--)v=u[Le],E=this._getLayer(v.layerId).layer,v.checked?F.push(E):v.checked||te.push(E);for(Le=0;Le<te.length;Le++)this._map.hasLayer(te[Le])&&this._map.removeLayer(te[Le]);for(Le=0;Le<F.length;Le++)this._map.hasLayer(F[Le])||this._map.addLayer(F[Le]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,v,E,F=this._map.getZoom(),te=u.length-1;te>=0;te--)v=u[te],E=this._getLayer(v.layerId).layer,v.disabled=E.options.minZoom!==void 0&&F<E.options.minZoom||E.options.maxZoom!==void 0&&F>E.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,gr(u,"click",fr),this.expand();var v=this;setTimeout(function(){$r(u,"click",fr),v._preventClick=!1})}}),ga=function(u,v,E){return new gl(u,v,E)},wi=Kn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var v="leaflet-control-zoom",E=Gr("div",v+" leaflet-bar"),F=this.options;return this._zoomInButton=this._createButton(F.zoomInText,F.zoomInTitle,v+"-in",E,this._zoomIn),this._zoomOutButton=this._createButton(F.zoomOutText,F.zoomOutTitle,v+"-out",E,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),E},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,v,E,F,te){var Le=Gr("a",E,F);return Le.innerHTML=u,Le.href="#",Le.title=v,Le.setAttribute("role","button"),Le.setAttribute("aria-label",v),Vl(Le),gr(Le,"click",Mr),gr(Le,"click",te,this),gr(Le,"click",this._refocusOnMap,this),Le},_updateDisabled:function(){var u=this._map,v="leaflet-disabled";qr(this._zoomInButton,v),qr(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(pr(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(pr(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});Dr.mergeOptions({zoomControl:!0}),Dr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new wi,this.addControl(this.zoomControl))});var vu=function(u){return new wi(u)},Xo=Kn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var v="leaflet-control-scale",E=Gr("div",v),F=this.options;return this._addScales(F,v+"-line",E),u.on(F.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),E},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,v,E){u.metric&&(this._mScale=Gr("div",v,E)),u.imperial&&(this._iScale=Gr("div",v,E))},_update:function(){var u=this._map,v=u.getSize().y/2,E=u.distance(u.containerPointToLatLng([0,v]),u.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(E)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var v=this._getRoundNum(u),E=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,E,v/u)},_updateImperial:function(u){var v=u*3.2808399,E,F,te;v>5280?(E=v/5280,F=this._getRoundNum(E),this._updateScale(this._iScale,F+" mi",F/E)):(te=this._getRoundNum(v),this._updateScale(this._iScale,te+" ft",te/v))},_updateScale:function(u,v,E){u.style.width=Math.round(this.options.maxWidth*E)+"px",u.innerHTML=v},_getRoundNum:function(u){var v=Math.pow(10,(Math.floor(u)+"").length-1),E=u/v;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:1,v*E}}),Gl=function(u){return new Xo(u)},ql='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Eo=Kn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ze.inlineSvg?ql+" ":"")+"Leaflet</a>"},initialize:function(u){S(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=Gr("div","leaflet-control-attribution"),Vl(this._container);for(var v in u._layers)u._layers[v].getAttribution&&this.addAttribution(u._layers[v].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var v in this._attributions)this._attributions[v]&&u.push(v);var E=[];this.options.prefix&&E.push(this.options.prefix),u.length&&E.push(u.join(", ")),this._container.innerHTML=E.join(' <span aria-hidden="true">|</span> ')}}});Dr.mergeOptions({attributionControl:!0}),Dr.addInitHook(function(){this.options.attributionControl&&new Eo().addTo(this)});var Yl=function(u){return new Eo(u)};Kn.Layers=gl,Kn.Zoom=wi,Kn.Scale=Xo,Kn.Attribution=Eo,Fi.layers=ga,Fi.zoom=vu,Fi.scale=Gl,Fi.attribution=Yl;var ei=ie.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ei.addTo=function(u,v){return u.addHandler(v,this),this};var vc={Events:j},us=Ze.touch?"touchstart mousedown":"mousedown",jo=q.extend({options:{clickTolerance:3},initialize:function(u,v,E,F){S(this,F),this._element=u,this._dragStartTarget=v||u,this._preventOutline=E},enable:function(){this._enabled||(gr(this._dragStartTarget,us,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(jo._dragging===this&&this.finishDrag(!0),$r(this._dragStartTarget,us,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Ul(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){jo._dragging===this&&this.finishDrag();return}if(!(jo._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(jo._dragging=this,this._preventOutline&&$l(this._element),Ru(),Va(),!this._moving)){this.fire("down");var v=u.touches?u.touches[0]:u,E=gc(this._element);this._startPoint=new re(v.clientX,v.clientY),this._startPos=No(this._element),this._parentScale=pu(E);var F=u.type==="mousedown";gr(document,F?"mousemove":"touchmove",this._onMove,this),gr(document,F?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var v=u.touches&&u.touches.length===1?u.touches[0]:u,E=new re(v.clientX,v.clientY)._subtract(this._startPoint);!E.x&&!E.y||Math.abs(E.x)+Math.abs(E.y)<this.options.clickTolerance||(E.x/=this._parentScale.x,E.y/=this._parentScale.y,fr(u),this._moved||(this.fire("dragstart"),this._moved=!0,pr(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),pr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(E),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),Ti(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){qr(document.body,"leaflet-dragging"),this._lastTarget&&(qr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),$r(document,"mousemove touchmove",this._onMove,this),$r(document,"mouseup touchend touchcancel",this._onUp,this),Bo(),mo();var v=this._moved&&this._moving;this._moving=!1,jo._dragging=!1,v&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function Zl(u,v,E){var F,te=[1,4,2,8],Le,et,Pt,Rt,nn,kn,Hn,Cr;for(Le=0,kn=u.length;Le<kn;Le++)u[Le]._code=Nt(u[Le],v);for(Pt=0;Pt<4;Pt++){for(Hn=te[Pt],F=[],Le=0,kn=u.length,et=kn-1;Le<kn;et=Le++)Rt=u[Le],nn=u[et],Rt._code&Hn?nn._code&Hn||(Cr=xt(nn,Rt,Hn,v,E),Cr._code=Nt(Cr,v),F.push(Cr)):(nn._code&Hn&&(Cr=xt(nn,Rt,Hn,v,E),Cr._code=Nt(Cr,v),F.push(Cr)),F.push(Rt));u=F}return u}function zo(u,v){var E,F,te,Le,et,Pt,Rt,nn,kn;if(!u||u.length===0)throw new Error("latlngs not passed");Tn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Hn=ge([0,0]),Cr=ce(u),Ki=Cr.getNorthWest().distanceTo(Cr.getSouthWest())*Cr.getNorthEast().distanceTo(Cr.getNorthWest());Ki<1700&&(Hn=ml(u));var Oi=u.length,ps=[];for(E=0;E<Oi;E++){var Ci=ge(u[E]);ps.push(v.project(ge([Ci.lat-Hn.lat,Ci.lng-Hn.lng])))}for(Pt=Rt=nn=0,E=0,F=Oi-1;E<Oi;F=E++)te=ps[E],Le=ps[F],et=te.y*Le.x-Le.y*te.x,Rt+=(te.x+Le.x)*et,nn+=(te.y+Le.y)*et,Pt+=et*3;Pt===0?kn=ps[0]:kn=[Rt/Pt,nn/Pt];var no=v.unproject(be(kn));return ge([no.lat+Hn.lat,no.lng+Hn.lng])}function ml(u){for(var v=0,E=0,F=0,te=0;te<u.length;te++){var Le=ge(u[te]);v+=Le.lat,E+=Le.lng,F++}return ge([v/F,E/F])}var vl={__proto__:null,clipPolygon:Zl,polygonCenter:zo,centroid:ml};function ti(u,v){if(!v||!u.length)return u.slice();var E=v*v;return u=me(u,E),u=ji(u,E),u}function vo(u,v,E){return Math.sqrt(Pn(u,v,E,!0))}function ma(u,v,E){return Pn(u,v,E)}function ji(u,v){var E=u.length,F=typeof Uint8Array<"u"?Uint8Array:Array,te=new F(E);te[0]=te[E-1]=1,I(u,te,v,0,E-1);var Le,et=[];for(Le=0;Le<E;Le++)te[Le]&&et.push(u[Le]);return et}function I(u,v,E,F,te){var Le=0,et,Pt,Rt;for(Pt=F+1;Pt<=te-1;Pt++)Rt=Pn(u[Pt],u[F],u[te],!0),Rt>Le&&(et=Pt,Le=Rt);Le>E&&(v[et]=1,I(u,v,E,F,et),I(u,v,E,et,te))}function me(u,v){for(var E=[u[0]],F=1,te=0,Le=u.length;F<Le;F++)an(u[F],u[te])>v&&(E.push(u[F]),te=F);return te<Le-1&&E.push(u[Le-1]),E}var He;function ot(u,v,E,F,te){var Le=F?He:Nt(u,E),et=Nt(v,E),Pt,Rt,nn;for(He=et;;){if(!(Le|et))return[u,v];if(Le&et)return!1;Pt=Le||et,Rt=xt(u,v,Pt,E,te),nn=Nt(Rt,E),Pt===Le?(u=Rt,Le=nn):(v=Rt,et=nn)}}function xt(u,v,E,F,te){var Le=v.x-u.x,et=v.y-u.y,Pt=F.min,Rt=F.max,nn,kn;return E&8?(nn=u.x+Le*(Rt.y-u.y)/et,kn=Rt.y):E&4?(nn=u.x+Le*(Pt.y-u.y)/et,kn=Pt.y):E&2?(nn=Rt.x,kn=u.y+et*(Rt.x-u.x)/Le):E&1&&(nn=Pt.x,kn=u.y+et*(Pt.x-u.x)/Le),new re(nn,kn,te)}function Nt(u,v){var E=0;return u.x<v.min.x?E|=1:u.x>v.max.x&&(E|=2),u.y<v.min.y?E|=4:u.y>v.max.y&&(E|=8),E}function an(u,v){var E=v.x-u.x,F=v.y-u.y;return E*E+F*F}function Pn(u,v,E,F){var te=v.x,Le=v.y,et=E.x-te,Pt=E.y-Le,Rt=et*et+Pt*Pt,nn;return Rt>0&&(nn=((u.x-te)*et+(u.y-Le)*Pt)/Rt,nn>1?(te=E.x,Le=E.y):nn>0&&(te+=et*nn,Le+=Pt*nn)),et=u.x-te,Pt=u.y-Le,F?et*et+Pt*Pt:new re(te,Le)}function Tn(u){return!N(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function Yn(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Tn(u)}function or(u,v){var E,F,te,Le,et,Pt,Rt,nn;if(!u||u.length===0)throw new Error("latlngs not passed");Tn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var kn=ge([0,0]),Hn=ce(u),Cr=Hn.getNorthWest().distanceTo(Hn.getSouthWest())*Hn.getNorthEast().distanceTo(Hn.getNorthWest());Cr<1700&&(kn=ml(u));var Ki=u.length,Oi=[];for(E=0;E<Ki;E++){var ps=ge(u[E]);Oi.push(v.project(ge([ps.lat-kn.lat,ps.lng-kn.lng])))}for(E=0,F=0;E<Ki-1;E++)F+=Oi[E].distanceTo(Oi[E+1])/2;if(F===0)nn=Oi[0];else for(E=0,Le=0;E<Ki-1;E++)if(et=Oi[E],Pt=Oi[E+1],te=et.distanceTo(Pt),Le+=te,Le>F){Rt=(Le-F)/te,nn=[Pt.x-Rt*(Pt.x-et.x),Pt.y-Rt*(Pt.y-et.y)];break}var Ci=v.unproject(be(nn));return ge([Ci.lat+kn.lat,Ci.lng+kn.lng])}var Sr={__proto__:null,simplify:ti,pointToSegmentDistance:vo,closestPointOnSegment:ma,clipSegment:ot,_getEdgeIntersection:xt,_getBitCode:Nt,_sqClosestPointOnSegment:Pn,isFlat:Tn,_flat:Yn,polylineCenter:or},_i={project:function(u){return new re(u.lng,u.lat)},unproject:function(u){return new de(u.y,u.x)},bounds:new _e([-180,-90],[180,90])},Zr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new _e([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var v=Math.PI/180,E=this.R,F=u.lat*v,te=this.R_MINOR/E,Le=Math.sqrt(1-te*te),et=Le*Math.sin(F),Pt=Math.tan(Math.PI/4-F/2)/Math.pow((1-et)/(1+et),Le/2);return F=-E*Math.log(Math.max(Pt,1e-10)),new re(u.lng*v*E,F)},unproject:function(u){for(var v=180/Math.PI,E=this.R,F=this.R_MINOR/E,te=Math.sqrt(1-F*F),Le=Math.exp(-u.y/E),et=Math.PI/2-2*Math.atan(Le),Pt=0,Rt=.1,nn;Pt<15&&Math.abs(Rt)>1e-7;Pt++)nn=te*Math.sin(et),nn=Math.pow((1-nn)/(1+nn),te/2),Rt=Math.PI/2-2*Math.atan(Le*nn)-et,et+=Rt;return new de(et*v,u.x*v/E)}},ni={__proto__:null,LonLat:_i,Mercator:Zr,SphericalMercator:rt},zi=i({},Ue,{code:"EPSG:3395",projection:Zr,transformation:function(){var u=.5/(Math.PI*Zr.R);return _t(u,.5,-u,.5)}()}),qi=i({},Ue,{code:"EPSG:4326",projection:_i,transformation:_t(1/180,1,-1/180,.5)}),yo=i({},Ee,{projection:_i,transformation:_t(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,v){var E=v.lng-u.lng,F=v.lat-u.lat;return Math.sqrt(E*E+F*F)},infinite:!0});Ee.Earth=Ue,Ee.EPSG3395=zi,Ee.EPSG3857=le,Ee.EPSG900913=se,Ee.EPSG4326=qi,Ee.Simple=yo;var Er=q.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var v=u.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var E=this.getEvents();v.on(E,this),this.once("remove",function(){v.off(E,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});Dr.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var v=l(u);return this._layers[v]?this:(this._layers[v]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var v=l(u);return this._layers[v]?(this._loaded&&u.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,v){for(var E in this._layers)u.call(v,this._layers[E]);return this},_addLayers:function(u){u=u?N(u)?u:[u]:[];for(var v=0,E=u.length;v<E;v++)this.addLayer(u[v])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var v=l(u);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,v=-1/0,E=this._getZoomSpan();for(var F in this._zoomBoundLayers){var te=this._zoomBoundLayers[F].options;u=te.minZoom===void 0?u:Math.min(u,te.minZoom),v=te.maxZoom===void 0?v:Math.max(v,te.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=u===1/0?void 0:u,E!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Cs=Er.extend({initialize:function(u,v){S(this,v),this._layers={};var E,F;if(u)for(E=0,F=u.length;E<F;E++)this.addLayer(u[E])},addLayer:function(u){var v=this.getLayerId(u);return this._layers[v]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var v=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(u){var v=typeof u=="number"?u:this.getLayerId(u);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var v=Array.prototype.slice.call(arguments,1),E,F;for(E in this._layers)F=this._layers[E],F[u]&&F[u].apply(F,v);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,v){for(var E in this._layers)u.call(v,this._layers[E]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),yl=function(u,v){return new Cs(u,v)},Fs=Cs.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),Cs.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),Cs.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new ae;for(var v in this._layers){var E=this._layers[v];u.extend(E.getBounds?E.getBounds():E.getLatLng())}return u}}),yu=function(u,v){return new Fs(u,v)},Jo=ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){S(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,v){var E=this._getIconUrl(u);if(!E){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var F=this._createImg(E,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(F,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(F.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),F},_setIconStyles:function(u,v){var E=this.options,F=E[v+"Size"];typeof F=="number"&&(F=[F,F]);var te=be(F),Le=be(v==="shadow"&&E.shadowAnchor||E.iconAnchor||te&&te.divideBy(2,!0));u.className="leaflet-marker-"+v+" "+(E.className||""),Le&&(u.style.marginLeft=-Le.x+"px",u.style.marginTop=-Le.y+"px"),te&&(u.style.width=te.x+"px",u.style.height=te.y+"px")},_createImg:function(u,v){return v=v||document.createElement("img"),v.src=u,v},_getIconUrl:function(u){return Ze.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function zu(u){return new Jo(u)}var Ya=Jo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof Ya.imagePath!="string"&&(Ya.imagePath=this._detectIconPath()),(this.options.imagePath||Ya.imagePath)+Jo.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var v=function(E,F,te){var Le=F.exec(E);return Le&&Le[te]};return u=v(u,/^url\((['"])?(.+)\1\)$/,2),u&&v(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=Gr("div","leaflet-default-icon-path",document.body),v=So(u,"background-image")||So(u,"backgroundImage");if(document.body.removeChild(u),v=this._stripUrl(v),v)return v;var E=document.querySelector('link[href$="leaflet.css"]');return E?E.href.substring(0,E.href.length-11-1):""}}),Za=ei.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new jo(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),pr(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&qr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var v=this._marker,E=v._map,F=this._marker.options.autoPanSpeed,te=this._marker.options.autoPanPadding,Le=No(v._icon),et=E.getPixelBounds(),Pt=E.getPixelOrigin(),Rt=Z(et.min._subtract(Pt).add(te),et.max._subtract(Pt).subtract(te));if(!Rt.contains(Le)){var nn=be((Math.max(Rt.max.x,Le.x)-Rt.max.x)/(et.max.x-Rt.max.x)-(Math.min(Rt.min.x,Le.x)-Rt.min.x)/(et.min.x-Rt.min.x),(Math.max(Rt.max.y,Le.y)-Rt.max.y)/(et.max.y-Rt.max.y)-(Math.min(Rt.min.y,Le.y)-Rt.min.y)/(et.min.y-Rt.min.y)).multiplyBy(F);E.panBy(nn,{animate:!1}),this._draggable._newPos._add(nn),this._draggable._startPos._add(nn),Ti(v._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=$(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(H(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,u)))},_onDrag:function(u){var v=this._marker,E=v._shadow,F=No(v._icon),te=v._map.layerPointToLatLng(F);E&&Ti(E,F),v._latlng=te,u.latlng=te,u.oldLatLng=this._oldLatLng,v.fire("move",u).fire("drag",u)},_onDragEnd:function(u){H(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Yi=Er.extend({options:{icon:new Ya,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,v){S(this,v),this._latlng=ge(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var v=this._latlng;return this._latlng=ge(u),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),E=u.icon.createIcon(this._icon),F=!1;E!==this._icon&&(this._icon&&this._removeIcon(),F=!0,u.title&&(E.title=u.title),E.tagName==="IMG"&&(E.alt=u.alt||"")),pr(E,v),u.keyboard&&(E.tabIndex="0",E.setAttribute("role","button")),this._icon=E,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gr(E,"focus",this._panOnFocus,this);var te=u.icon.createShadow(this._shadow),Le=!1;te!==this._shadow&&(this._removeShadow(),Le=!0),te&&(pr(te,v),te.alt=""),this._shadow=te,u.opacity<1&&this._updateOpacity(),F&&this.getPane().appendChild(this._icon),this._initInteraction(),te&&Le&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$r(this._icon,"focus",this._panOnFocus,this),hr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&hr(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&Ti(this._icon,u),this._shadow&&Ti(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(pr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Za)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Za(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&Ls(this._icon,u),this._shadow&&Ls(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var v=this.options.icon.options,E=v.iconSize?be(v.iconSize):be(0,0),F=v.iconAnchor?be(v.iconAnchor):be(0,0);u.panInside(this._latlng,{paddingTopLeft:F,paddingBottomRight:E.subtract(F)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Qo(u,v){return new Yi(u,v)}var bo=Er.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return S(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Qs=bo.extend({options:{fill:!0,radius:10},initialize:function(u,v){S(this,v),this._latlng=ge(u),this._radius=this.options.radius},setLatLng:function(u){var v=this._latlng;return this._latlng=ge(u),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var v=u&&u.radius||this._radius;return bo.prototype.setStyle.call(this,u),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,v=this._radiusY||u,E=this._clickTolerance(),F=[u+E,v+E];this._pxBounds=new _e(this._point.subtract(F),this._point.add(F))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function bl(u,v){return new Qs(u,v)}var Ss=Qs.extend({initialize:function(u,v,E){if(typeof v=="number"&&(v=i({},E,{radius:v})),S(this,v),this._latlng=ge(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new ae(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:bo.prototype.setStyle,_project:function(){var u=this._latlng.lng,v=this._latlng.lat,E=this._map,F=E.options.crs;if(F.distance===Ue.distance){var te=Math.PI/180,Le=this._mRadius/Ue.R/te,et=E.project([v+Le,u]),Pt=E.project([v-Le,u]),Rt=et.add(Pt).divideBy(2),nn=E.unproject(Rt).lat,kn=Math.acos((Math.cos(Le*te)-Math.sin(v*te)*Math.sin(nn*te))/(Math.cos(v*te)*Math.cos(nn*te)))/te;(isNaN(kn)||kn===0)&&(kn=Le/Math.cos(Math.PI/180*v)),this._point=Rt.subtract(E.getPixelOrigin()),this._radius=isNaN(kn)?0:Rt.x-E.project([nn,u-kn]).x,this._radiusY=Rt.y-et.y}else{var Hn=F.unproject(F.project(this._latlng).subtract([this._mRadius,0]));this._point=E.latLngToLayerPoint(this._latlng),this._radius=this._point.x-E.latLngToLayerPoint(Hn).x}this._updateBounds()}});function js(u,v,E){return new Ss(u,v,E)}var zs=bo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,v){S(this,v),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var v=1/0,E=null,F=Pn,te,Le,et=0,Pt=this._parts.length;et<Pt;et++)for(var Rt=this._parts[et],nn=1,kn=Rt.length;nn<kn;nn++){te=Rt[nn-1],Le=Rt[nn];var Hn=F(u,te,Le,!0);Hn<v&&(v=Hn,E=F(u,te,Le))}return E&&(E.distance=Math.sqrt(v)),E},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return or(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,v){return v=v||this._defaultShape(),u=ge(u),v.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new ae,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Tn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var v=[],E=Tn(u),F=0,te=u.length;F<te;F++)E?(v[F]=ge(u[F]),this._bounds.extend(v[F])):v[F]=this._convertLatLngs(u[F]);return v},_project:function(){var u=new _e;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),v=new re(u,u);this._rawPxBounds&&(this._pxBounds=new _e([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(u,v,E){var F=u[0]instanceof de,te=u.length,Le,et;if(F){for(et=[],Le=0;Le<te;Le++)et[Le]=this._map.latLngToLayerPoint(u[Le]),E.extend(et[Le]);v.push(et)}else for(Le=0;Le<te;Le++)this._projectLatlngs(u[Le],v,E)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,E,F,te,Le,et,Pt,Rt;for(E=0,te=0,Le=this._rings.length;E<Le;E++)for(Rt=this._rings[E],F=0,et=Rt.length;F<et-1;F++)Pt=ot(Rt[F],Rt[F+1],u,F,!0),Pt&&(v[te]=v[te]||[],v[te].push(Pt[0]),(Pt[1]!==Rt[F+1]||F===et-2)&&(v[te].push(Pt[1]),te++))}},_simplifyPoints:function(){for(var u=this._parts,v=this.options.smoothFactor,E=0,F=u.length;E<F;E++)u[E]=ti(u[E],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,v){var E,F,te,Le,et,Pt,Rt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(E=0,Le=this._parts.length;E<Le;E++)for(Pt=this._parts[E],F=0,et=Pt.length,te=et-1;F<et;te=F++)if(!(!v&&F===0)&&vo(u,Pt[te],Pt[F])<=Rt)return!0;return!1}});function yc(u,v){return new zs(u,v)}zs._flat=Yn;var is=zs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var v=zs.prototype._convertLatLngs.call(this,u),E=v.length;return E>=2&&v[0]instanceof de&&v[0].equals(v[E-1])&&v.pop(),v},_setLatLngs:function(u){zs.prototype._setLatLngs.call(this,u),Tn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Tn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,v=this.options.weight,E=new re(v,v);if(u=new _e(u.min.subtract(E),u.max.add(E)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var F=0,te=this._rings.length,Le;F<te;F++)Le=Zl(this._rings[F],u,!0),Le.length&&this._parts.push(Le)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var v=!1,E,F,te,Le,et,Pt,Rt,nn;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Le=0,Rt=this._parts.length;Le<Rt;Le++)for(E=this._parts[Le],et=0,nn=E.length,Pt=nn-1;et<nn;Pt=et++)F=E[et],te=E[Pt],F.y>u.y!=te.y>u.y&&u.x<(te.x-F.x)*(u.y-F.y)/(te.y-F.y)+F.x&&(v=!v);return v||zs.prototype._containsPoint.call(this,u,!0)}});function va(u,v){return new is(u,v)}var Es=Fs.extend({initialize:function(u,v){S(this,v),this._layers={},u&&this.addData(u)},addData:function(u){var v=N(u)?u:u.features,E,F,te;if(v){for(E=0,F=v.length;E<F;E++)te=v[E],(te.geometries||te.geometry||te.features||te.coordinates)&&this.addData(te);return this}var Le=this.options;if(Le.filter&&!Le.filter(u))return this;var et=Ps(u,Le);return et?(et.feature=Ms(u),et.defaultOptions=et.options,this.resetStyle(et),Le.onEachFeature&&Le.onEachFeature(u,et),this.addLayer(et)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(v){this._setLayerStyle(v,u)},this)},_setLayerStyle:function(u,v){u.setStyle&&(typeof v=="function"&&(v=v(u.feature)),u.setStyle(v))}});function Ps(u,v){var E=u.type==="Feature"?u.geometry:u,F=E?E.coordinates:null,te=[],Le=v&&v.pointToLayer,et=v&&v.coordsToLatLng||ba,Pt,Rt,nn,kn;if(!F&&!E)return null;switch(E.type){case"Point":return Pt=et(F),ya(Le,u,Pt,v);case"MultiPoint":for(nn=0,kn=F.length;nn<kn;nn++)Pt=et(F[nn]),te.push(ya(Le,u,Pt,v));return new Fs(te);case"LineString":case"MultiLineString":return Rt=ks(F,E.type==="LineString"?0:1,et),new zs(Rt,v);case"Polygon":case"MultiPolygon":return Rt=ks(F,E.type==="Polygon"?1:2,et),new is(Rt,v);case"GeometryCollection":for(nn=0,kn=E.geometries.length;nn<kn;nn++){var Hn=Ps({geometry:E.geometries[nn],type:"Feature",properties:u.properties},v);Hn&&te.push(Hn)}return new Fs(te);case"FeatureCollection":for(nn=0,kn=E.features.length;nn<kn;nn++){var Cr=Ps(E.features[nn],v);Cr&&te.push(Cr)}return new Fs(te);default:throw new Error("Invalid GeoJSON object.")}}function ya(u,v,E,F){return u?u(v,E):new Yi(E,F&&F.markersInheritOptions&&F)}function ba(u){return new de(u[1],u[0],u[2])}function ks(u,v,E){for(var F=[],te=0,Le=u.length,et;te<Le;te++)et=v?ks(u[te],v-1,E):(E||ba)(u[te]),F.push(et);return F}function cs(u,v){return u=ge(u),u.alt!==void 0?[y(u.lng,v),y(u.lat,v),y(u.alt,v)]:[y(u.lng,v),y(u.lat,v)]}function ea(u,v,E,F){for(var te=[],Le=0,et=u.length;Le<et;Le++)te.push(v?ea(u[Le],Tn(u[Le])?0:v-1,E,F):cs(u[Le],F));return!v&&E&&te.length>0&&te.push(te[0].slice()),te}function _o(u,v){return u.feature?i({},u.feature,{geometry:v}):Ms(v)}function Ms(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var yt={toGeoJSON:function(u){return _o(this,{type:"Point",coordinates:cs(this.getLatLng(),u)})}};Yi.include(yt),Ss.include(yt),Qs.include(yt),zs.include({toGeoJSON:function(u){var v=!Tn(this._latlngs),E=ea(this._latlngs,v?1:0,!1,u);return _o(this,{type:(v?"Multi":"")+"LineString",coordinates:E})}}),is.include({toGeoJSON:function(u){var v=!Tn(this._latlngs),E=v&&!Tn(this._latlngs[0]),F=ea(this._latlngs,E?2:v?1:0,!0,u);return v||(F=[F]),_o(this,{type:(E?"Multi":"")+"Polygon",coordinates:F})}}),Cs.include({toMultiPoint:function(u){var v=[];return this.eachLayer(function(E){v.push(E.toGeoJSON(u).geometry.coordinates)}),_o(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(u){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(u);var E=v==="GeometryCollection",F=[];return this.eachLayer(function(te){if(te.toGeoJSON){var Le=te.toGeoJSON(u);if(E)F.push(Le.geometry);else{var et=Ms(Le);et.type==="FeatureCollection"?F.push.apply(F,et.features):F.push(et)}}}),E?_o(this,{geometries:F,type:"GeometryCollection"}):{type:"FeatureCollection",features:F}}});function Vt(u,v){return new Es(u,v)}var Mt=Vt,Sn=Er.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,v,E){this._url=u,this._bounds=ce(v),S(this,E)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(pr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){hr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&fa(this._image),this},bringToBack:function(){return this._map&&Io(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=ce(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",v=this._image=u?this._url:Gr("img");if(pr(v,"leaflet-image-layer"),this._zoomAnimated&&pr(v,"leaflet-zoom-animated"),this.options.className&&pr(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onload=o(this.fire,this,"load"),v.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(u){var v=this._map.getZoomScale(u.zoom),E=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;da(this._image,E,v)},_reset:function(){var u=this._image,v=new _e(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),E=v.getSize();Ti(u,v.min),u.style.width=E.x+"px",u.style.height=E.y+"px"},_updateOpacity:function(){Ls(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),$n=function(u,v,E){return new Sn(u,v,E)},cr=Sn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",v=this._image=u?this._url:Gr("video");if(pr(v,"leaflet-image-layer"),this._zoomAnimated&&pr(v,"leaflet-zoom-animated"),this.options.className&&pr(v,this.options.className),v.onselectstart=p,v.onmousemove=p,v.onloadeddata=o(this.fire,this,"load"),u){for(var E=v.getElementsByTagName("source"),F=[],te=0;te<E.length;te++)F.push(E[te].src);this._url=E.length>0?F:[v.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var Le=0;Le<this._url.length;Le++){var et=Gr("source");et.src=this._url[Le],v.appendChild(et)}}});function xi(u,v,E){return new cr(u,v,E)}var ri=Sn.extend({_initImage:function(){var u=this._image=this._url;pr(u,"leaflet-image-layer"),this._zoomAnimated&&pr(u,"leaflet-zoom-animated"),this.options.className&&pr(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function Kl(u,v,E){return new ri(u,v,E)}var Us=Er.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,v){u&&(u instanceof de||N(u))?(this._latlng=ge(u),S(this,v)):(S(this,u),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&Ls(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&Ls(this._container,1),this.bringToFront(),this.options.interactive&&(pr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(Ls(this._container,0),this._removeTimeout=setTimeout(o(hr,void 0,this._container),200)):hr(this._container),this.options.interactive&&(qr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=ge(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&fa(this._container),this},bringToBack:function(){return this._map&&Io(this._container),this},_prepareOpen:function(u){var v=this._source;if(!v._map)return!1;if(v instanceof Fs){v=null;var E=this._source._layers;for(var F in E)if(E[F]._map){v=E[F];break}if(!v)return!1;this._source=v}if(!u)if(v.getCenter)u=v.getCenter();else if(v.getLatLng)u=v.getLatLng();else if(v.getBounds)u=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")u.innerHTML=v;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),v=be(this.options.offset),E=this._getAnchor();this._zoomAnimated?Ti(this._container,u.add(E)):v=v.add(u).add(E);var F=this._containerBottom=-v.y,te=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=F+"px",this._container.style.left=te+"px"}},_getAnchor:function(){return[0,0]}});Dr.include({_initOverlay:function(u,v,E,F){var te=v;return te instanceof u||(te=new u(F).setContent(v)),E&&te.setLatLng(E),te}}),Er.include({_initOverlay:function(u,v,E,F){var te=E;return te instanceof u?(S(te,F),te._source=this):(te=v&&!F?v:new u(F,this),te.setContent(E)),te}});var Li=Us.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,Us.prototype.openOn.call(this,u)},onAdd:function(u){Us.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bo||this._source.on("preclick",Ga))},onRemove:function(u){Us.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bo||this._source.off("preclick",Ga))},getEvents:function(){var u=Us.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",v=this._container=Gr("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),E=this._wrapper=Gr("div",u+"-content-wrapper",v);if(this._contentNode=Gr("div",u+"-content",E),Vl(v),ju(this._contentNode),gr(v,"contextmenu",Ga),this._tipContainer=Gr("div",u+"-tip-container",v),this._tip=Gr("div",u+"-tip",this._tipContainer),this.options.closeButton){var F=this._closeButton=Gr("a",u+"-close-button",v);F.setAttribute("role","button"),F.setAttribute("aria-label","Close popup"),F.href="#close",F.innerHTML='<span aria-hidden="true">&#215;</span>',gr(F,"click",function(te){fr(te),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,v=u.style;v.width="",v.whiteSpace="nowrap";var E=u.offsetWidth;E=Math.min(E,this.options.maxWidth),E=Math.max(E,this.options.minWidth),v.width=E+1+"px",v.whiteSpace="",v.height="";var F=u.offsetHeight,te=this.options.maxHeight,Le="leaflet-popup-scrolled";te&&F>te?(v.height=te+"px",pr(u,Le)):qr(u,Le),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),E=this._getAnchor();Ti(this._container,v.add(E))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,v=parseInt(So(this._container,"marginBottom"),10)||0,E=this._container.offsetHeight+v,F=this._containerWidth,te=new re(this._containerLeft,-E-this._containerBottom);te._add(No(this._container));var Le=u.layerPointToContainerPoint(te),et=be(this.options.autoPanPadding),Pt=be(this.options.autoPanPaddingTopLeft||et),Rt=be(this.options.autoPanPaddingBottomRight||et),nn=u.getSize(),kn=0,Hn=0;Le.x+F+Rt.x>nn.x&&(kn=Le.x+F-nn.x+Rt.x),Le.x-kn-Pt.x<0&&(kn=Le.x-Pt.x),Le.y+E+Rt.y>nn.y&&(Hn=Le.y+E-nn.y+Rt.y),Le.y-Hn-Pt.y<0&&(Hn=Le.y-Pt.y),(kn||Hn)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([kn,Hn]))}},_getAnchor:function(){return be(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),ta=function(u,v){return new Li(u,v)};Dr.mergeOptions({closePopupOnClick:!0}),Dr.include({openPopup:function(u,v,E){return this._initOverlay(Li,u,v,E).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Er.include({bindPopup:function(u,v){return this._popup=this._initOverlay(Li,this._popup,u,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof Fs||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Mr(u);var v=u.layer||u.target;if(this._popup._source===v&&!(v instanceof bo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=v,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var _a=Us.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){Us.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){Us.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=Us.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",v=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Gr("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var v,E,F=this._map,te=this._container,Le=F.latLngToContainerPoint(F.getCenter()),et=F.layerPointToContainerPoint(u),Pt=this.options.direction,Rt=te.offsetWidth,nn=te.offsetHeight,kn=be(this.options.offset),Hn=this._getAnchor();Pt==="top"?(v=Rt/2,E=nn):Pt==="bottom"?(v=Rt/2,E=0):Pt==="center"?(v=Rt/2,E=nn/2):Pt==="right"?(v=0,E=nn/2):Pt==="left"?(v=Rt,E=nn/2):et.x<Le.x?(Pt="right",v=0,E=nn/2):(Pt="left",v=Rt+(kn.x+Hn.x)*2,E=nn/2),u=u.subtract(be(v,E,!0)).add(kn).add(Hn),qr(te,"leaflet-tooltip-right"),qr(te,"leaflet-tooltip-left"),qr(te,"leaflet-tooltip-top"),qr(te,"leaflet-tooltip-bottom"),pr(te,"leaflet-tooltip-"+Pt),Ti(te,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&Ls(this._container,u)},_animateZoom:function(u){var v=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(v)},_getAnchor:function(){return be(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),na=function(u,v){return new _a(u,v)};Dr.include({openTooltip:function(u,v,E){return this._initOverlay(_a,u,v,E).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Er.include({bindTooltip:function(u,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(_a,this._tooltip,u,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var v=u?"off":"on",E={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?E.add=this._openTooltip:(E.mouseover=this._openTooltip,E.mouseout=this.closeTooltip,E.click=this._openTooltip,this._map?this._addFocusListeners():E.add=this._addFocusListeners),this._tooltip.options.sticky&&(E.mousemove=this._moveTooltip),this[v](E),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof Fs||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&(gr(v,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),gr(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var v=typeof u.getElement=="function"&&u.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var v=u.latlng,E,F;this._tooltip.options.sticky&&u.originalEvent&&(E=this._map.mouseEventToContainerPoint(u.originalEvent),F=this._map.containerPointToLayerPoint(E),v=this._map.layerPointToLatLng(F)),this._tooltip.setLatLng(v)}});var ra=Jo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var v=u&&u.tagName==="DIV"?u:document.createElement("div"),E=this.options;if(E.html instanceof Element?(Ua(v),v.appendChild(E.html)):v.innerHTML=E.html!==!1?E.html:"",E.bgPos){var F=be(E.bgPos);v.style.backgroundPosition=-F.x+"px "+-F.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function ia(u){return new ra(u)}Jo.Default=Ya;var Ir=Er.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){S(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),hr(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(fa(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Io(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof re?u:new re(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var v=this.getPane().children,E=-u(-1/0,1/0),F=0,te=v.length,Le;F<te;F++)Le=v[F].style.zIndex,v[F]!==this._container&&Le&&(E=u(E,+Le));isFinite(E)&&(this.options.zIndex=E+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ze.ielt9){Ls(this._container,this.options.opacity);var u=+new Date,v=!1,E=!1;for(var F in this._tiles){var te=this._tiles[F];if(!(!te.current||!te.loaded)){var Le=Math.min(1,(u-te.loaded)/200);Ls(te.el,Le),Le<1?v=!0:(te.active?E=!0:this._onOpaqueTile(te),te.active=!0)}}E&&!this._noPrune&&this._pruneTiles(),v&&(H(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Gr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,v=this.options.maxZoom;if(u!==void 0){for(var E in this._levels)E=Number(E),this._levels[E].el.children.length||E===u?(this._levels[E].el.style.zIndex=v-Math.abs(u-E),this._onUpdateLevel(E)):(hr(this._levels[E].el),this._removeTilesAtZoom(E),this._onRemoveLevel(E),delete this._levels[E]);var F=this._levels[u],te=this._map;return F||(F=this._levels[u]={},F.el=Gr("div","leaflet-tile-container leaflet-zoom-animated",this._container),F.el.style.zIndex=v,F.origin=te.project(te.unproject(te.getPixelOrigin()),u).round(),F.zoom=u,this._setZoomTransform(F,te.getCenter(),te.getZoom()),p(F.el.offsetWidth),this._onCreateLevel(F)),this._level=F,F}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,v,E=this._map.getZoom();if(E>this.options.maxZoom||E<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)v=this._tiles[u],v.retain=v.current;for(u in this._tiles)if(v=this._tiles[u],v.current&&!v.active){var F=v.coords;this._retainParent(F.x,F.y,F.z,F.z-5)||this._retainChildren(F.x,F.y,F.z,F.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var v in this._tiles)this._tiles[v].coords.z===u&&this._removeTile(v)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)hr(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,v,E,F){var te=Math.floor(u/2),Le=Math.floor(v/2),et=E-1,Pt=new re(+te,+Le);Pt.z=+et;var Rt=this._tileCoordsToKey(Pt),nn=this._tiles[Rt];return nn&&nn.active?(nn.retain=!0,!0):(nn&&nn.loaded&&(nn.retain=!0),et>F?this._retainParent(te,Le,et,F):!1)},_retainChildren:function(u,v,E,F){for(var te=2*u;te<2*u+2;te++)for(var Le=2*v;Le<2*v+2;Le++){var et=new re(te,Le);et.z=E+1;var Pt=this._tileCoordsToKey(et),Rt=this._tiles[Pt];if(Rt&&Rt.active){Rt.retain=!0;continue}else Rt&&Rt.loaded&&(Rt.retain=!0);E+1<F&&this._retainChildren(te,Le,E+1,F)}},_resetView:function(u){var v=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var v=this.options;return v.minNativeZoom!==void 0&&u<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<u?v.maxNativeZoom:u},_setView:function(u,v,E,F){var te=Math.round(v);this.options.maxZoom!==void 0&&te>this.options.maxZoom||this.options.minZoom!==void 0&&te<this.options.minZoom?te=void 0:te=this._clampZoom(te);var Le=this.options.updateWhenZooming&&te!==this._tileZoom;(!F||Le)&&(this._tileZoom=te,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),te!==void 0&&this._update(u),E||this._pruneTiles(),this._noPrune=!!E),this._setZoomTransforms(u,v)},_setZoomTransforms:function(u,v){for(var E in this._levels)this._setZoomTransform(this._levels[E],u,v)},_setZoomTransform:function(u,v,E){var F=this._map.getZoomScale(E,u.zoom),te=u.origin.multiplyBy(F).subtract(this._map._getNewPixelOrigin(v,E)).round();Ze.any3d?da(u.el,te,F):Ti(u.el,te)},_resetGrid:function(){var u=this._map,v=u.options.crs,E=this._tileSize=this.getTileSize(),F=this._tileZoom,te=this._map.getPixelWorldBounds(this._tileZoom);te&&(this._globalTileRange=this._pxBoundsToTileRange(te)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,v.wrapLng[0]],F).x/E.x),Math.ceil(u.project([0,v.wrapLng[1]],F).x/E.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([v.wrapLat[0],0],F).y/E.x),Math.ceil(u.project([v.wrapLat[1],0],F).y/E.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var v=this._map,E=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),F=v.getZoomScale(E,this._tileZoom),te=v.project(u,this._tileZoom).floor(),Le=v.getSize().divideBy(F*2);return new _e(te.subtract(Le),te.add(Le))},_update:function(u){var v=this._map;if(v){var E=this._clampZoom(v.getZoom());if(u===void 0&&(u=v.getCenter()),this._tileZoom!==void 0){var F=this._getTiledPixelBounds(u),te=this._pxBoundsToTileRange(F),Le=te.getCenter(),et=[],Pt=this.options.keepBuffer,Rt=new _e(te.getBottomLeft().subtract([Pt,-Pt]),te.getTopRight().add([Pt,-Pt]));if(!(isFinite(te.min.x)&&isFinite(te.min.y)&&isFinite(te.max.x)&&isFinite(te.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var nn in this._tiles){var kn=this._tiles[nn].coords;(kn.z!==this._tileZoom||!Rt.contains(new re(kn.x,kn.y)))&&(this._tiles[nn].current=!1)}if(Math.abs(E-this._tileZoom)>1){this._setView(u,E);return}for(var Hn=te.min.y;Hn<=te.max.y;Hn++)for(var Cr=te.min.x;Cr<=te.max.x;Cr++){var Ki=new re(Cr,Hn);if(Ki.z=this._tileZoom,!!this._isValidTile(Ki)){var Oi=this._tiles[this._tileCoordsToKey(Ki)];Oi?Oi.current=!0:et.push(Ki)}}if(et.sort(function(Ci,no){return Ci.distanceTo(Le)-no.distanceTo(Le)}),et.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ps=document.createDocumentFragment();for(Cr=0;Cr<et.length;Cr++)this._addTile(et[Cr],ps);this._level.el.appendChild(ps)}}}},_isValidTile:function(u){var v=this._map.options.crs;if(!v.infinite){var E=this._globalTileRange;if(!v.wrapLng&&(u.x<E.min.x||u.x>E.max.x)||!v.wrapLat&&(u.y<E.min.y||u.y>E.max.y))return!1}if(!this.options.bounds)return!0;var F=this._tileCoordsToBounds(u);return ce(this.options.bounds).overlaps(F)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var v=this._map,E=this.getTileSize(),F=u.scaleBy(E),te=F.add(E),Le=v.unproject(F,u.z),et=v.unproject(te,u.z);return[Le,et]},_tileCoordsToBounds:function(u){var v=this._tileCoordsToNwSe(u),E=new ae(v[0],v[1]);return this.options.noWrap||(E=this._map.wrapLatLngBounds(E)),E},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var v=u.split(":"),E=new re(+v[0],+v[1]);return E.z=+v[2],E},_removeTile:function(u){var v=this._tiles[u];v&&(hr(v.el),delete this._tiles[u],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){pr(u,"leaflet-tile");var v=this.getTileSize();u.style.width=v.x+"px",u.style.height=v.y+"px",u.onselectstart=p,u.onmousemove=p,Ze.ielt9&&this.options.opacity<1&&Ls(u,this.options.opacity)},_addTile:function(u,v){var E=this._getTilePos(u),F=this._tileCoordsToKey(u),te=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(te),this.createTile.length<2&&$(o(this._tileReady,this,u,null,te)),Ti(te,E),this._tiles[F]={el:te,coords:u,current:!0},v.appendChild(te),this.fire("tileloadstart",{tile:te,coords:u})},_tileReady:function(u,v,E){v&&this.fire("tileerror",{error:v,tile:E,coords:u});var F=this._tileCoordsToKey(u);E=this._tiles[F],E&&(E.loaded=+new Date,this._map._fadeAnimated?(Ls(E.el,0),H(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(E.active=!0,this._pruneTiles()),v||(pr(E.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:E.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ze.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var v=new re(this._wrapX?f(u.x,this._wrapX):u.x,this._wrapY?f(u.y,this._wrapY):u.y);return v.z=u.z,v},_pxBoundsToTileRange:function(u){var v=this.getTileSize();return new _e(u.min.unscaleBy(v).floor(),u.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function Uo(u){return new Ir(u)}var hs=Ir.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,v){this._url=u,v=S(this,v),v.detectRetina&&Ze.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,v){return this._url===u&&v===void 0&&(v=!0),this._url=u,v||this.redraw(),this},createTile:function(u,v){var E=document.createElement("img");return gr(E,"load",o(this._tileOnLoad,this,v,E)),gr(E,"error",o(this._tileOnError,this,v,E)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(E.referrerPolicy=this.options.referrerPolicy),E.alt="",E.src=this.getTileUrl(u),E},getTileUrl:function(u){var v={r:Ze.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var E=this._globalTileRange.max.y-u.y;this.options.tms&&(v.y=E),v["-y"]=E}return D(this._url,i(v,this.options))},_tileOnLoad:function(u,v){Ze.ielt9?setTimeout(o(u,this,null,v),0):u(null,v)},_tileOnError:function(u,v,E){var F=this.options.errorTileUrl;F&&v.getAttribute("src")!==F&&(v.src=F),u(E,v)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,v=this.options.maxZoom,E=this.options.zoomReverse,F=this.options.zoomOffset;return E&&(u=v-u),u+F},_getSubdomain:function(u){var v=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var u,v;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(v=this._tiles[u].el,v.onload=p,v.onerror=p,!v.complete)){v.src=G;var E=this._tiles[u].coords;hr(v),delete this._tiles[u],this.fire("tileabort",{tile:v,coords:E})}},_removeTile:function(u){var v=this._tiles[u];if(v)return v.el.setAttribute("src",G),Ir.prototype._removeTile.call(this,u)},_tileReady:function(u,v,E){if(!(!this._map||E&&E.getAttribute("src")===G))return Ir.prototype._tileReady.call(this,u,v,E)}});function ii(u,v){return new hs(u,v)}var ui=hs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,v){this._url=u;var E=i({},this.defaultWmsParams);for(var F in v)F in this.options||(E[F]=v[F]);v=S(this,v);var te=v.detectRetina&&Ze.retina?2:1,Le=this.getTileSize();E.width=Le.x*te,E.height=Le.y*te,this.wmsParams=E},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,hs.prototype.onAdd.call(this,u)},getTileUrl:function(u){var v=this._tileCoordsToNwSe(u),E=this._crs,F=Z(E.project(v[0]),E.project(v[1])),te=F.min,Le=F.max,et=(this._wmsVersion>=1.3&&this._crs===qi?[te.y,te.x,Le.y,Le.x]:[te.x,te.y,Le.x,Le.y]).join(","),Pt=hs.prototype.getTileUrl.call(this,u);return Pt+T(this.wmsParams,Pt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+et},setParams:function(u,v){return i(this.wmsParams,u),v||this.redraw(),this}});function Ui(u,v){return new ui(u,v)}hs.WMS=ui,ii.wms=Ui;var mi=Er.extend({options:{padding:.1},initialize:function(u){S(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),pr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,v){var E=this._map.getZoomScale(v,this._zoom),F=this._map.getSize().multiplyBy(.5+this.options.padding),te=this._map.project(this._center,v),Le=F.multiplyBy(-E).add(te).subtract(this._map._getNewPixelOrigin(u,v));Ze.any3d?da(this._container,Le,E):Ti(this._container,Le)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,v=this._map.getSize(),E=this._map.containerPointToLayerPoint(v.multiplyBy(-u)).round();this._bounds=new _e(E,E.add(v.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),wo=mi.extend({options:{tolerance:0},getEvents:function(){var u=mi.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");gr(u,"mousemove",this._onMouseMove,this),gr(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),gr(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){H(this._redrawRequest),delete this._ctx,hr(this._container),$r(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var v in this._layers)u=this._layers[v],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mi.prototype._update.call(this);var u=this._bounds,v=this._container,E=u.getSize(),F=Ze.retina?2:1;Ti(v,u.min),v.width=F*E.x,v.height=F*E.y,v.style.width=E.x+"px",v.style.height=E.y+"px",Ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){mi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var v=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var v=u._order,E=v.next,F=v.prev;E?E.prev=F:this._drawLast=F,F?F.next=E:this._drawFirst=E,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var v=u.options.dashArray.split(/[, ]+/),E=[],F,te;for(te=0;te<v.length;te++){if(F=Number(v[te]),isNaN(F))return;E.push(F)}u.options._dashArray=E}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var v=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new _e,this._redrawBounds.extend(u._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(u._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var v=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,v=this._redrawBounds;if(this._ctx.save(),v){var E=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,E.x,E.y),this._ctx.clip()}this._drawing=!0;for(var F=this._drawFirst;F;F=F.next)u=F.layer,(!v||u._pxBounds&&u._pxBounds.intersects(v))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,v){if(this._drawing){var E,F,te,Le,et=u._parts,Pt=et.length,Rt=this._ctx;if(Pt){for(Rt.beginPath(),E=0;E<Pt;E++){for(F=0,te=et[E].length;F<te;F++)Le=et[E][F],Rt[F?"lineTo":"moveTo"](Le.x,Le.y);v&&Rt.closePath()}this._fillStroke(Rt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var v=u._point,E=this._ctx,F=Math.max(Math.round(u._radius),1),te=(Math.max(Math.round(u._radiusY),1)||F)/F;te!==1&&(E.save(),E.scale(1,te)),E.beginPath(),E.arc(v.x,v.y/te,F,0,Math.PI*2,!1),te!==1&&E.restore(),this._fillStroke(E,u)}},_fillStroke:function(u,v){var E=v.options;E.fill&&(u.globalAlpha=E.fillOpacity,u.fillStyle=E.fillColor||E.color,u.fill(E.fillRule||"evenodd")),E.stroke&&E.weight!==0&&(u.setLineDash&&u.setLineDash(v.options&&v.options._dashArray||[]),u.globalAlpha=E.opacity,u.lineWidth=E.weight,u.strokeStyle=E.color,u.lineCap=E.lineCap,u.lineJoin=E.lineJoin,u.stroke())},_onClick:function(u){for(var v=this._map.mouseEventToLayerPoint(u),E,F,te=this._drawFirst;te;te=te.next)E=te.layer,E.options.interactive&&E._containsPoint(v)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(E))&&(F=E);this._fireEvent(F?[F]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,v)}},_handleMouseOut:function(u){var v=this._hoveredLayer;v&&(qr(this._container,"leaflet-interactive"),this._fireEvent([v],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,v){if(!this._mouseHoverThrottled){for(var E,F,te=this._drawFirst;te;te=te.next)E=te.layer,E.options.interactive&&E._containsPoint(v)&&(F=E);F!==this._hoveredLayer&&(this._handleMouseOut(u),F&&(pr(this._container,"leaflet-interactive"),this._fireEvent([F],u,"mouseover"),this._hoveredLayer=F)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,v,E){this._map._fireDOMEvent(v,E||v.type,u)},_bringToFront:function(u){var v=u._order;if(v){var E=v.next,F=v.prev;if(E)E.prev=F;else return;F?F.next=E:E&&(this._drawFirst=E),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(u)}},_bringToBack:function(u){var v=u._order;if(v){var E=v.next,F=v.prev;if(F)F.next=E;else return;E?E.prev=F:F&&(this._drawLast=F),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(u)}}});function eo(u){return Ze.canvas?new wo(u):null}var Po=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Uu={_initContainer:function(){this._container=Gr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mi.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var v=u._container=Po("shape");pr(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",u._path=Po("path"),v.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var v=u._container;this._container.appendChild(v),u.options.interactive&&u.addInteractiveTarget(v)},_removePath:function(u){var v=u._container;hr(v),u.removeInteractiveTarget(v),delete this._layers[l(u)]},_updateStyle:function(u){var v=u._stroke,E=u._fill,F=u.options,te=u._container;te.stroked=!!F.stroke,te.filled=!!F.fill,F.stroke?(v||(v=u._stroke=Po("stroke")),te.appendChild(v),v.weight=F.weight+"px",v.color=F.color,v.opacity=F.opacity,F.dashArray?v.dashStyle=N(F.dashArray)?F.dashArray.join(" "):F.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=F.lineCap.replace("butt","flat"),v.joinstyle=F.lineJoin):v&&(te.removeChild(v),u._stroke=null),F.fill?(E||(E=u._fill=Po("fill")),te.appendChild(E),E.color=F.fillColor||F.color,E.opacity=F.fillOpacity):E&&(te.removeChild(E),u._fill=null)},_updateCircle:function(u){var v=u._point.round(),E=Math.round(u._radius),F=Math.round(u._radiusY||E);this._setPath(u,u._empty()?"M0 0":"AL "+v.x+","+v.y+" "+E+","+F+" 0,"+65535*360)},_setPath:function(u,v){u._path.v=v},_bringToFront:function(u){fa(u._container)},_bringToBack:function(u){Io(u._container)}},sa=Ze.vml?Po:ue,Zi=mi.extend({_initContainer:function(){this._container=sa("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sa("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){hr(this._container),$r(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mi.prototype._update.call(this);var u=this._bounds,v=u.getSize(),E=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,E.setAttribute("width",v.x),E.setAttribute("height",v.y)),Ti(E,u.min),E.setAttribute("viewBox",[u.min.x,u.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(u){var v=u._path=sa("path");u.options.className&&pr(v,u.options.className),u.options.interactive&&pr(v,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){hr(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var v=u._path,E=u.options;v&&(E.stroke?(v.setAttribute("stroke",E.color),v.setAttribute("stroke-opacity",E.opacity),v.setAttribute("stroke-width",E.weight),v.setAttribute("stroke-linecap",E.lineCap),v.setAttribute("stroke-linejoin",E.lineJoin),E.dashArray?v.setAttribute("stroke-dasharray",E.dashArray):v.removeAttribute("stroke-dasharray"),E.dashOffset?v.setAttribute("stroke-dashoffset",E.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),E.fill?(v.setAttribute("fill",E.fillColor||E.color),v.setAttribute("fill-opacity",E.fillOpacity),v.setAttribute("fill-rule",E.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(u,v){this._setPath(u,Q(u._parts,v))},_updateCircle:function(u){var v=u._point,E=Math.max(Math.round(u._radius),1),F=Math.max(Math.round(u._radiusY),1)||E,te="a"+E+","+F+" 0 1,0 ",Le=u._empty()?"M0 0":"M"+(v.x-E)+","+v.y+te+E*2+",0 "+te+-E*2+",0 ";this._setPath(u,Le)},_setPath:function(u,v){u._path.setAttribute("d",v)},_bringToFront:function(u){fa(u._path)},_bringToBack:function(u){Io(u._path)}});Ze.vml&&Zi.include(Uu);function gi(u){return Ze.svg||Ze.vml?new Zi(u):null}Dr.include({getRenderer:function(u){var v=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var v=this._paneRenderers[u];return v===void 0&&(v=this._createRenderer({pane:u}),this._paneRenderers[u]=v),v},_createRenderer:function(u){return this.options.preferCanvas&&eo(u)||gi(u)}});var As=is.extend({initialize:function(u,v){is.prototype.initialize.call(this,this._boundsToLatLngs(u),v)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=ce(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function to(u,v){return new As(u,v)}Zi.create=sa,Zi.pointsToPath=Q,Es.geometryToLayer=Ps,Es.coordsToLatLng=ba,Es.coordsToLatLngs=ks,Es.latLngToCoords=cs,Es.latLngsToCoords=ea,Es.getFeature=_o,Es.asFeature=Ms,Dr.mergeOptions({boxZoom:!0});var rr=ei.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){gr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){$r(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){hr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Va(),Ru(),this._startPoint=this._map.mouseEventToContainerPoint(u),gr(document,{contextmenu:Mr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=Gr("div","leaflet-zoom-box",this._container),pr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var v=new _e(this._point,this._startPoint),E=v.getSize();Ti(this._box,v.min),this._box.style.width=E.x+"px",this._box.style.height=E.y+"px"},_finish:function(){this._moved&&(hr(this._box),qr(this._container,"leaflet-crosshair")),mo(),Bo(),$r(document,{contextmenu:Mr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var v=new ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Dr.addInitHook("addHandler","boxZoom",rr),Dr.mergeOptions({doubleClickZoom:!0});var wa=ei.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var v=this._map,E=v.getZoom(),F=v.options.zoomDelta,te=u.originalEvent.shiftKey?E-F:E+F;v.options.doubleClickZoom==="center"?v.setZoom(te):v.setZoomAround(u.containerPoint,te)}});Dr.addInitHook("addHandler","doubleClickZoom",wa),Dr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var xa=ei.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new jo(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}pr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){qr(this._map._container,"leaflet-grab"),qr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=ce(this._map.options.maxBounds);this._offsetLimit=Z(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var v=this._lastTime=+new Date,E=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(E),this._times.push(v),this._prunePositions(v)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,v){return u-(u-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;u.x<v.min.x&&(u.x=this._viscousLimit(u.x,v.min.x)),u.y<v.min.y&&(u.y=this._viscousLimit(u.y,v.min.y)),u.x>v.max.x&&(u.x=this._viscousLimit(u.x,v.max.x)),u.y>v.max.y&&(u.y=this._viscousLimit(u.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,v=Math.round(u/2),E=this._initialWorldOffset,F=this._draggable._newPos.x,te=(F-v+E)%u+v-E,Le=(F+v+E)%u-v-E,et=Math.abs(te+E)<Math.abs(Le+E)?te:Le;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=et},_onDragEnd:function(u){var v=this._map,E=v.options,F=!E.inertia||u.noInertia||this._times.length<2;if(v.fire("dragend",u),F)v.fire("moveend");else{this._prunePositions(+new Date);var te=this._lastPos.subtract(this._positions[0]),Le=(this._lastTime-this._times[0])/1e3,et=E.easeLinearity,Pt=te.multiplyBy(et/Le),Rt=Pt.distanceTo([0,0]),nn=Math.min(E.inertiaMaxSpeed,Rt),kn=Pt.multiplyBy(nn/Rt),Hn=nn/(E.inertiaDeceleration*et),Cr=kn.multiplyBy(-Hn/2).round();!Cr.x&&!Cr.y?v.fire("moveend"):(Cr=v._limitOffset(Cr,v.options.maxBounds),$(function(){v.panBy(Cr,{duration:Hn,easeLinearity:et,noMoveStart:!0,animate:!0})}))}}});Dr.addInitHook("addHandler","dragging",xa),Dr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $o=ei.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),gr(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),$r(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,v=document.documentElement,E=u.scrollTop||v.scrollTop,F=u.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(F,E)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var v=this._panKeys={},E=this.keyCodes,F,te;for(F=0,te=E.left.length;F<te;F++)v[E.left[F]]=[-1*u,0];for(F=0,te=E.right.length;F<te;F++)v[E.right[F]]=[u,0];for(F=0,te=E.down.length;F<te;F++)v[E.down[F]]=[0,u];for(F=0,te=E.up.length;F<te;F++)v[E.up[F]]=[0,-1*u]},_setZoomDelta:function(u){var v=this._zoomKeys={},E=this.keyCodes,F,te;for(F=0,te=E.zoomIn.length;F<te;F++)v[E.zoomIn[F]]=u;for(F=0,te=E.zoomOut.length;F<te;F++)v[E.zoomOut[F]]=-u},_addHooks:function(){gr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){$r(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var v=u.keyCode,E=this._map,F;if(v in this._panKeys){if(!E._panAnim||!E._panAnim._inProgress)if(F=this._panKeys[v],u.shiftKey&&(F=be(F).multiplyBy(3)),E.options.maxBounds&&(F=E._limitOffset(be(F),E.options.maxBounds)),E.options.worldCopyJump){var te=E.wrapLatLng(E.unproject(E.project(E.getCenter()).add(F)));E.panTo(te)}else E.panBy(F)}else if(v in this._zoomKeys)E.setZoom(E.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&E._popup&&E._popup.options.closeOnEscapeKey)E.closePopup();else return;Mr(u)}}});Dr.addInitHook("addHandler","keyboard",$o),Dr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $s=ei.extend({addHooks:function(){gr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){$r(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var v=gu(u),E=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var F=Math.max(E-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),F),Mr(u)},_performZoom:function(){var u=this._map,v=u.getZoom(),E=this._map.options.zoomSnap||0;u._stop();var F=this._delta/(this._map.options.wheelPxPerZoomLevel*4),te=4*Math.log(2/(1+Math.exp(-Math.abs(F))))/Math.LN2,Le=E?Math.ceil(te/E)*E:te,et=u._limitZoom(v+(this._delta>0?Le:-Le))-v;this._delta=0,this._startTime=null,et&&(u.options.scrollWheelZoom==="center"?u.setZoom(v+et):u.setZoomAround(this._lastMousePos,v+et))}});Dr.addInitHook("addHandler","scrollWheelZoom",$s);var Gc=600;Dr.mergeOptions({tapHold:Ze.touchNative&&Ze.safari&&Ze.mobile,tapTolerance:15});var fs=ei.extend({addHooks:function(){gr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){$r(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var v=u.touches[0];this._startPos=this._newPos=new re(v.clientX,v.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(gr(document,"touchend",fr),gr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),Gc),gr(document,"touchend touchcancel contextmenu",this._cancel,this),gr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){$r(document,"touchend",fr),$r(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),$r(document,"touchend touchcancel contextmenu",this._cancel,this),$r(document,"touchmove",this._onMove,this)},_onMove:function(u){var v=u.touches[0];this._newPos=new re(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,v){var E=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});E._simulated=!0,v.target.dispatchEvent(E)}});Dr.addInitHook("addHandler","tapHold",fs),Dr.mergeOptions({touchZoom:Ze.touch,bounceAtZoomLimits:!0});var ds=ei.extend({addHooks:function(){pr(this._map._container,"leaflet-touch-zoom"),gr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){qr(this._map._container,"leaflet-touch-zoom"),$r(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var v=this._map;if(!(!u.touches||u.touches.length!==2||v._animatingZoom||this._zooming)){var E=v.mouseEventToContainerPoint(u.touches[0]),F=v.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(E.add(F)._divideBy(2))),this._startDist=E.distanceTo(F),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),gr(document,"touchmove",this._onTouchMove,this),gr(document,"touchend touchcancel",this._onTouchEnd,this),fr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var v=this._map,E=v.mouseEventToContainerPoint(u.touches[0]),F=v.mouseEventToContainerPoint(u.touches[1]),te=E.distanceTo(F)/this._startDist;if(this._zoom=v.getScaleZoom(te,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&te<1||this._zoom>v.getMaxZoom()&&te>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,te===1)return}else{var Le=E._add(F)._divideBy(2)._subtract(this._centerPoint);if(te===1&&Le.x===0&&Le.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(Le),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),H(this._animRequest);var et=o(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(et,this,!0),fr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,H(this._animRequest),$r(document,"touchmove",this._onTouchMove,this),$r(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Dr.addInitHook("addHandler","touchZoom",ds),Dr.BoxZoom=rr,Dr.DoubleClickZoom=wa,Dr.Drag=xa,Dr.Keyboard=$o,Dr.ScrollWheelZoom=$s,Dr.TapHold=fs,Dr.TouchZoom=ds,n.Bounds=_e,n.Browser=Ze,n.CRS=Ee,n.Canvas=wo,n.Circle=Ss,n.CircleMarker=Qs,n.Class=ie,n.Control=Kn,n.DivIcon=ra,n.DivOverlay=Us,n.DomEvent=Wl,n.DomUtil=ur,n.Draggable=jo,n.Evented=q,n.FeatureGroup=Fs,n.GeoJSON=Es,n.GridLayer=Ir,n.Handler=ei,n.Icon=Jo,n.ImageOverlay=Sn,n.LatLng=de,n.LatLngBounds=ae,n.Layer=Er,n.LayerGroup=Cs,n.LineUtil=Sr,n.Map=Dr,n.Marker=Yi,n.Mixin=vc,n.Path=bo,n.Point=re,n.PolyUtil=vl,n.Polygon=is,n.Polyline=zs,n.Popup=Li,n.PosAnimation=mu,n.Projection=ni,n.Rectangle=As,n.Renderer=mi,n.SVG=Zi,n.SVGOverlay=ri,n.TileLayer=hs,n.Tooltip=_a,n.Transformation=gt,n.Util=oe,n.VideoOverlay=cr,n.bind=o,n.bounds=Z,n.canvas=eo,n.circle=js,n.circleMarker=bl,n.control=Fi,n.divIcon=ia,n.extend=i,n.featureGroup=yu,n.geoJSON=Vt,n.geoJson=Mt,n.gridLayer=Uo,n.icon=zu,n.imageOverlay=$n,n.latLng=ge,n.latLngBounds=ce,n.layerGroup=yl,n.map=Ri,n.marker=Qo,n.point=be,n.polygon=va,n.polyline=yc,n.popup=ta,n.rectangle=to,n.setOptions=S,n.stamp=l,n.svg=gi,n.svgOverlay=Kl,n.tileLayer=ii,n.tooltip=na,n.transformation=_t,n.version=r,n.videoOverlay=xi;var Vo=window.L;n.noConflict=function(){return window.L=Vo,this},window.L=n})})(O2,O2.exports);var pn=O2.exports;const Qi=ly(pn);var b4={exports:{}};(function(t,e){(function(n,r){r(e)})(Zo,function(n){var r=typeof window<"u"?window:typeof Zo<"u"?Zo:typeof self<"u"?self:{};function i(c,f){return c(f={exports:{}},f.exports),f.exports}var s=i(function(c,f){(function(p){const y={escape:function(R){return R.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:m,mimeType:function(R){return R=m(R).toLowerCase(),function(){var j="application/font-woff",q="image/jpeg";return{woff:j,woff2:j,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:q,jpeg:q,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[R]||""},dataAsUrl:function(R,j){return`data:${j};base64,`+R},isDataUrl:function(R){return R.search(/^(data:)/)!==-1},canvasToBlob:function(R){return R.toBlob?new Promise(function(q){R.toBlob(q)}):(j=R,new Promise(function(q){const re=ee(j.toDataURL().split(",")[1]);var xe=re.length;const be=new Uint8Array(xe);for(let _e=0;_e<xe;_e++)be[_e]=re.charCodeAt(_e);q(new Blob([be],{type:"image/png"}))}));var j},resolveUrl:function(R,j){const q=document.implementation.createHTMLDocument(),re=q.createElement("base"),xe=(q.head.appendChild(re),q.createElement("a"));return q.body.appendChild(xe),re.href=j,xe.href=R,xe.href},getAndEncode:function(R){let j=G.impl.urlCache.find(function(q){return q.url===R});return j||(j={url:R,promise:null},G.impl.urlCache.push(j)),j.promise===null&&(G.impl.options.cacheBust&&(R+=(/\?/.test(R)?"&":"?")+new Date().getTime()),j.promise=new Promise(function(q){const re=G.impl.options.httpTimeout,xe=new XMLHttpRequest;let be;var _e;function Z(ae){console.error(ae),q("")}xe.onreadystatechange=function(){if(xe.readyState===4)if(xe.status!==200)be?q(be):Z(`cannot fetch resource: ${R}, status: `+xe.status);else{const ae=new FileReader;ae.onloadend=function(){var ce=ae.result.split(/,/)[1];q(ce)},ae.readAsDataURL(xe.response)}},xe.ontimeout=function(){be?q(be):Z(`timeout of ${re}ms occured while fetching resource: `+R)},xe.responseType="blob",xe.timeout=re,G.impl.options.useCredentials&&(xe.withCredentials=!0),xe.open("GET",R,!0),xe.send(),G.impl.options.imagePlaceholder&&(_e=G.impl.options.imagePlaceholder.split(/,/))&&_e[1]&&(be=_e[1])})),j.promise},uid:function(){let R=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+R++}}(),delay:function(R){return function(j){return new Promise(function(q){setTimeout(function(){q(j)},R)})}},asArray:function(R){const j=[],q=R.length;for(let re=0;re<q;re++)j.push(R[re]);return j},escapeXhtml:function(R){return R.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(R){return R!=="data:,"?new Promise(function(j,q){const re=new Image;G.impl.options.useCredentials&&(re.crossOrigin="use-credentials"),re.onload=function(){j(re)},re.onerror=q,re.src=R}):Promise.resolve()},width:function(R){var j=C(R,"border-left-width"),q=C(R,"border-right-width");return R.scrollWidth+j+q},height:function(R){var j=C(R,"border-top-width"),q=C(R,"border-bottom-width");return R.scrollHeight+j+q}};function m(R){return(R=/\.([^\.\/]*?)(\?|$)/g.exec(R))?R[1]:""}function C(R,j){const q=J(R).getPropertyValue(j);return parseFloat(q.replace("px",""))}const S=function(){const R=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(xe,be,_e){return j(xe)?Promise.resolve(xe).then(q).then(function(Z){let ae=Promise.resolve(xe);return Z.forEach(function(ce){ae=ae.then(function(de){return re(de,ce,be,_e)})}),ae}):Promise.resolve(xe)},shouldProcess:j,impl:{readUrls:q,inline:re}};function j(xe){return xe.search(R)!==-1}function q(xe){const be=[];for(var _e;(_e=R.exec(xe))!==null;)be.push(_e[1]);return be.filter(function(Z){return!y.isDataUrl(Z)})}function re(xe,be,_e,Z){return Promise.resolve(be).then(function(ae){return _e?y.resolveUrl(ae,_e):ae}).then(Z||y.getAndEncode).then(function(ae){return y.dataAsUrl(ae,y.mimeType(be))}).then(function(ae){return xe.replace((ce=be,new RegExp(`(url\\(['"]?)(${y.escape(ce)})(['"]?\\))`,"g")),`$1${ae}$3`);var ce})}}(),T={resolveAll:function(){return O().then(function(R){return Promise.all(R.map(function(j){return j.resolve()}))}).then(function(R){return R.join(`
`)})},impl:{readAll:O}};function O(){return Promise.resolve(y.asArray(document.styleSheets)).then(function(j){const q=[];return j.forEach(function(re){if(Object.getPrototypeOf(re).hasOwnProperty("cssRules"))try{y.asArray(re.cssRules||[]).forEach(q.push.bind(q))}catch(xe){console.log("Error while reading CSS rules from "+re.href,xe.toString())}}),q}).then(function(j){return j.filter(function(q){return q.type===CSSRule.FONT_FACE_RULE}).filter(function(q){return S.shouldProcess(q.style.getPropertyValue("src"))})}).then(function(j){return j.map(R)});function R(j){return{resolve:function(){var q=(j.parentStyleSheet||{}).href;return S.inlineAll(j.cssText,q)},src:function(){return j.style.getPropertyValue("src")}}}}const D={inlineAll:function R(j){return j instanceof Element?function(q){const re=q.style.getPropertyValue("background");return re?S.inlineAll(re).then(function(xe){q.style.setProperty("background",xe,re)}).then(function(){return q}):Promise.resolve(q)}(j).then(function(){return j instanceof HTMLImageElement?N(j).inline():Promise.all(y.asArray(j.childNodes).map(function(q){return R(q)}))}):Promise.resolve(j)},impl:{newImage:N}};function N(R){return{inline:function(j){return y.isDataUrl(R.src)?Promise.resolve():Promise.resolve(R.src).then(j||y.getAndEncode).then(function(q){return y.dataAsUrl(q,y.mimeType(R.src))}).then(function(q){return new Promise(function(re){R.onload=re,R.onerror=re,R.src=q})})}}}const U={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},G={toSvg:V,toPng:function(R,j){return(j=j||{}).raster=!0,K(R,j).then(function(q){return q.toDataURL()})},toJpeg:function(R,j){return(j=j||{}).raster=!0,K(R,j).then(function(q){return q.toDataURL("image/jpeg",j.quality||1)})},toBlob:function(R,j){return(j=j||{}).raster=!0,K(R,j).then(y.canvasToBlob)},toPixelData:function(R,j){return(j=j||{}).raster=!0,K(R,j).then(function(q){return q.getContext("2d").getImageData(0,0,y.width(R),y.height(R)).data})},toCanvas:function(R,j){return(j=j||{}).raster=!0,K(R,j||{})},impl:{fontFaces:T,images:D,util:y,inliner:S,urlCache:[],options:{}}},J=(c.exports=G,p.getComputedStyle||window.getComputedStyle),ee=p.atob||window.atob;function V(R,j){var q=j=j||{};return q.imagePlaceholder===void 0?G.impl.options.imagePlaceholder=U.imagePlaceholder:G.impl.options.imagePlaceholder=q.imagePlaceholder,q.cacheBust===void 0?G.impl.options.cacheBust=U.cacheBust:G.impl.options.cacheBust=q.cacheBust,q.useCredentials===void 0?G.impl.options.useCredentials=U.useCredentials:G.impl.options.useCredentials=q.useCredentials,Promise.resolve(R).then(function(re){return function xe(be,_e,Z,ae,ce=null){return Z||!_e||_e(be)?Promise.resolve(be).then(function(de){return de instanceof HTMLCanvasElement?y.makeImage(de.toDataURL()):de.nodeName==="IFRAME"?html2canvas(de.contentDocument.body).then(ge=>ge.toDataURL()).then(y.makeImage):de.cloneNode(!1)}).then(function(de){return function(ge,Ee){const Ue=ge.childNodes;return Ue.length===0?Promise.resolve(Ee):function(Ne,rt){const gt=J(ge);let _t=Promise.resolve();return rt.forEach(function(le){_t=_t.then(function(){return xe(le,_e,!1,ae,gt)}).then(function(se){se&&Ne.appendChild(se)})}),_t}(Ee,y.asArray(Ue)).then(function(){return Ee})}(be,de)}).then(function(de){return function(ge,Ee,Ue){return Ee instanceof Element?Promise.resolve().then(function(){(function(Ne,rt){const gt=J(Ne);gt.cssText?(rt.style.cssText=gt.cssText,function(_t,le){le.font=_t.font,le.fontFamily=_t.fontFamily,le.fontFeatureSettings=_t.fontFeatureSettings,le.fontKerning=_t.fontKerning,le.fontSize=_t.fontSize,le.fontStretch=_t.fontStretch,le.fontStyle=_t.fontStyle,le.fontVariant=_t.fontVariant,le.fontVariantCaps=_t.fontVariantCaps,le.fontVariantEastAsian=_t.fontVariantEastAsian,le.fontVariantLigatures=_t.fontVariantLigatures,le.fontVariantNumeric=_t.fontVariantNumeric,le.fontVariationSettings=_t.fontVariationSettings,le.fontWeight=_t.fontWeight}(gt,rt.style)):(Ue?function(_t,le,se,ue){const Q=se.style,ke=_t.style;for(var Ve of le){var Xe=le.getPropertyValue(Ve),lt=ke.getPropertyValue(Ve),at=(ke.setProperty(Ve,ue?"initial":"unset"),le.getPropertyValue(Ve));at!==Xe?Q.setProperty(Ve,Xe):Q.removeProperty(Ve),ke.setProperty(Ve,lt)}}(Ne,gt,rt,Z):function(_t,le,se){const ue=function(ke){if(ie[ke])return ie[ke];oe||((oe=document.createElement("iframe")).style.visibility="hidden",oe.style.position="fixed",document.body.appendChild(oe),oe.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Ve=document.createElement(ke),Xe=(oe.contentWindow.document.body.appendChild(Ve),Ve.textContent=".",oe.contentWindow.getComputedStyle(Ve)),lt={};return y.asArray(Xe).forEach(function(at){lt[at]=at==="width"||at==="height"?"auto":Xe.getPropertyValue(at)}),oe.contentWindow.document.body.removeChild(Ve),ie[ke]=lt}(se.tagName),Q=se.style;y.asArray(_t).forEach(function(ke){var Ve=_t.getPropertyValue(ke);(Ve!==ue[ke]||le&&Ve!==le.getPropertyValue(ke))&&Q.setProperty(ke,Ve,_t.getPropertyPriority(ke))})}(gt,ce,rt),Z&&(["inset-block","inset-block-start","inset-block-end"].forEach(_t=>rt.style.removeProperty(_t)),["left","right","top","bottom"].forEach(_t=>{rt.style.getPropertyValue(_t)&&rt.style.setProperty(_t,"0px")})))})(ge,Ee)}).then(function(){[":before",":after"].forEach(function(Ne){(function(rt){const gt=J(ge,rt),_t=gt.getPropertyValue("content");if(_t!==""&&_t!=="none"){const le=y.uid(),se=Ee.getAttribute("class"),ue=(se&&Ee.setAttribute("class",se+" "+le),document.createElement("style"));ue.appendChild(function(){const Q=`.${le}:`+rt,ke=(gt.cssText?function(){return`${gt.cssText} content: ${gt.getPropertyValue("content")};`}:function(){return y.asArray(gt).map(function(Ve){return Ve+": "+gt.getPropertyValue(Ve)+(gt.getPropertyPriority(Ve)?" !important":"")}).join("; ")+";"})();return document.createTextNode(Q+`{${ke}}`)}()),Ee.appendChild(ue)}})(Ne)})}).then(function(){ge instanceof HTMLTextAreaElement&&(Ee.innerHTML=ge.value),ge instanceof HTMLInputElement&&Ee.setAttribute("value",ge.value)}).then(function(){Ee instanceof SVGElement&&(Ee.setAttribute("xmlns","http://www.w3.org/2000/svg"),Ee instanceof SVGRectElement&&["width","height"].forEach(function(Ne){const rt=Ee.getAttribute(Ne);rt&&Ee.style.setProperty(Ne,rt)}))}).then(function(){return Ee}):Ee}(be,de,ae)}):Promise.resolve()}(re,j.filter,!0,!j.raster)}).then(pe).then($).then(function(re){j.bgcolor&&(re.style.backgroundColor=j.bgcolor),j.width&&(re.style.width=j.width+"px"),j.height&&(re.style.height=j.height+"px"),j.style&&Object.keys(j.style).forEach(function(be){re.style[be]=j.style[be]});let xe=null;return typeof j.onclone=="function"&&(xe=j.onclone(re)),Promise.resolve(xe).then(function(){return re})}).then(function(re){return re=re,xe=j.width||y.width(R),be=j.height||y.height(R),Promise.resolve(re).then(function(_e){return _e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(_e)}).then(y.escapeXhtml).then(function(_e){return`<foreignObject x="0" y="0" width="100%" height="100%">${_e}</foreignObject>`}).then(function(_e){return`<svg xmlns="http://www.w3.org/2000/svg" width="${xe}" height="${be}">${_e}</svg>`}).then(function(_e){return"data:image/svg+xml;charset=utf-8,"+_e});var xe,be}).then(function(re){return G.impl.urlCache=[],re})}function K(R,j){return V(R,j).then(y.makeImage).then(y.delay(0)).then(function(q){var re=typeof j.scale!="number"?1:j.scale;const xe=function(_e,Z){const ae=document.createElement("canvas");if(ae.width=(j.width||y.width(_e))*Z,ae.height=(j.height||y.height(_e))*Z,j.bgcolor){const ce=ae.getContext("2d");ce.fillStyle=j.bgcolor,ce.fillRect(0,0,ae.width,ae.height)}return ae}(R,re),be=xe.getContext("2d");return be.mozImageSmoothingEnabled=!1,be.msImageSmoothingEnabled=!1,be.imageSmoothingEnabled=!1,q&&(be.scale(re,re),be.drawImage(q,0,0)),oe&&(document.body.removeChild(oe),oe=null,H&&clearTimeout(H),H=setTimeout(()=>{H=null,ie={}},2e4)),xe})}function pe(R){return T.resolveAll().then(function(j){const q=document.createElement("style");return R.appendChild(q),q.appendChild(document.createTextNode(j)),R})}function $(R){return D.inlineAll(R).then(function(){return R})}let H=null,oe=null,ie={}})(r)}),o=i(function(c,f){(function(){function p(T,O,D){var N=new XMLHttpRequest;N.open("GET",T),N.responseType="blob",N.onload=function(){S(N.response,O,D)},N.onerror=function(){console.error("could not download file")},N.send()}function y(T){var O=new XMLHttpRequest;O.open("HEAD",T,!1);try{O.send()}catch{}return 200<=O.status&&299>=O.status}function m(T){try{T.dispatchEvent(new MouseEvent("click"))}catch{var O=document.createEvent("MouseEvents");O.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),T.dispatchEvent(O)}}var C=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,S=C.saveAs||(typeof window!="object"||window!==C?function(){}:"download"in HTMLAnchorElement.prototype?function(T,O,D){var N=C.URL||C.webkitURL,U=document.createElement("a");O=O||T.name||"download",U.download=O,U.rel="noopener",typeof T=="string"?(U.href=T,U.origin===location.origin?m(U):y(U.href)?p(T,O,D):m(U,U.target="_blank")):(U.href=N.createObjectURL(T),setTimeout(function(){N.revokeObjectURL(U.href)},4e4),setTimeout(function(){m(U)},0))}:"msSaveOrOpenBlob"in navigator?function(T,O,D){if(O=O||T.name||"download",typeof T!="string")navigator.msSaveOrOpenBlob(function(U,G){return G===void 0?G={autoBom:!1}:typeof G!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),G={autoBom:!G}),G.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(U.type)?new Blob(["\uFEFF",U],{type:U.type}):U}(T,D),O);else if(y(T))p(T,O,D);else{var N=document.createElement("a");N.href=T,N.target="_blank",setTimeout(function(){m(N)})}}:function(T,O,D,N){if((N=N||open("","_blank"))&&(N.document.title=N.document.body.innerText="downloading..."),typeof T=="string")return p(T,O,D);var U=T.type==="application/octet-stream",G=/constructor/i.test(C.HTMLElement)||C.safari,J=/CriOS\/[\d]+/.test(navigator.userAgent);if((J||U&&G)&&typeof FileReader=="object"){var ee=new FileReader;ee.onloadend=function(){var pe=ee.result;pe=J?pe:pe.replace(/^data:[^;]*;/,"data:attachment/file;"),N?N.location.href=pe:location=pe,N=null},ee.readAsDataURL(T)}else{var V=C.URL||C.webkitURL,K=V.createObjectURL(T);N?N.location=K:location.href=K,N=null,setTimeout(function(){V.revokeObjectURL(K)},4e4)}});C.saveAs=S.saveAs=S,c.exports=S})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var f=c.node,p=c.error;return console.warn("Map node is very big "+f.scrollWidth+"x"+f.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y={};for(var m in this.options)p.hasOwnProperty(m)?y[m]=p[m]:y[m]=this.options[m];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(y)}).then(function(C){return c._setElementsVisible(!0),c._toCanvas(C,y)}).then(function(C){return f==="image"?c._canvasToImage(C,y):f==="canvas"?C:c._canvasToBlob(C,y)}).then(function(C){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),C}).catch(function(C){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:C}),Promise.reject(C)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var y=c._map._container.querySelectorAll(p),m=!0,C=!1,S=void 0;try{for(var T,O=y[Symbol.iterator]();!(m=(T=O.next()).done);m=!0)T.value.style.opacity=f===!1?0:1}catch(D){C=!0,S=D}finally{try{!m&&O.return&&O.return()}finally{if(C)throw S}}})},_canvasToImage:function(c,f){var p=f.mimeType,y=c.toDataURL(p);return y.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(y)},_canvasToBlob:function(c,f){var p=f.mimeType;return new Promise(function(y,m){c.toBlob(function(C){y(C)},p)})},_toCanvas:function(c,f){var p=f.captionOffset,y=f.caption,m=f.captionFontSize,C=f.captionFont,S=f.captionColor,T=f.captionBgColor,O=this._node,D=O.screenHeight,N=O.screenWidth,U=document.createElement("canvas");U.width=N,U.height=D;for(var G=U.getContext("2d"),J=G.createImageData(N,D),ee=0;ee<c.length;++ee)J.data[ee]=c[ee];G.putImageData(J,0,0),J=null;var V=document.createElement("canvas"),K=V.getContext("2d"),pe=0,$=0,H=D,oe=N;if(this.options.cropImageByInnerWH===!0){for(var ie=[],R=0,j=0;j<D;++j){R=0;for(var q=0;q<N;++q)c[4*j*N+4*q+4]===0&&R++;R===N&&ie.push(j)}var re=this._getMinAndMaxOnValuesBreak(ie);pe=re.min;for(var xe=N,be=re.max,_e=[],Z=0,ae=$;ae<xe;++ae){Z=0;for(var ce=0;ce<D;++ce)c[4*ce*N+4*ae+4]===0&&Z++;Z===D&&_e.push(ae)}var de=this._getMinAndMaxOnValuesBreak(_e);$=de.min,xe=de.max,($===0&&xe===0||xe===null)&&(xe=N),(pe===0&&be===0||be===null)&&(be=D),this.options.debugMode===!0&&(console.log("emptyYLine",ie),console.log("minMaxY",re),console.log("emptyXLine",_e),console.log("minMaxX",de),console.log("debugX",{}),console.log("debugY",{})),pe===0&&be===D&&$===0&&xe===N||(pe+=this.options.onCropBorderSize,be-=this.options.onCropBorderSize,$+=this.options.onCropBorderSize,xe-=this.options.onCropBorderSize),H=be-pe,oe=xe-$,V.width=oe,V.height=H}else V.width=oe,V.height=H;var ge=null;return y&&(ge=typeof y=="function"?y.call(this):y),ge!==null&&(V.height=V.height+(p+m+p),K.beginPath(),K.rect(0,0,V.width,V.height),K.fillStyle=T,K.fill(),K.save()),K.drawImage(U,$,pe,oe,H,0,0,oe,H),ge!==null&&(K.font=m+"px "+C,K.fillStyle=S,K.fillText(ge,p,H+p+m)),Promise.resolve(V)},_getMinAndMaxOnValuesBreak:function(c){for(var f=0,p=0,y=!1,m=1;m<c.length;m++){if(c[m]-1!==c[m-1]){p=c[m],y=!0;break}f=c[m]}return y===!1&&c[0]>1?(f=0,p=c[0]):y===!1&&(f=c[c.length-1]||0,p=null),{min:f,max:p}},_getPixelData:function(c){var f=this,p=c.domtoimageOptions,y=p===void 0?{}:p;return this._getPixelDataOfNormalMap(y).catch(function(m){return console.warn("May be map size very big on that zoom level, we have error:",m.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),f._getPixelDataOfBigMap(y)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=this._map.getContainer();return this._node={node:f,screenHeight:f.scrollHeight,screenWidth:f.scrollWidth},s.toPixelData(f,c)},_getPixelDataOfBigMap:function(){var c=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),y=this._map.getPane("mapPane");y.style.width=2*p.clientWidth+"px",y.style.height=2*p.clientHeight+"px",y.style.overflow="hidden";var m=function(){y.style.width="initial",y.style.height="initial",y.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,f).then(function(C){return m(),C}).catch(function(C){return m(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:y,error:C,domtoimageOptions:f}):Promise.reject(C)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,f=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),f.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(f){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(f,p+".png")}).catch(function(f){c._map.fire("simpleMapScreenshoter.error",{e:f})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(f){var p=setInterval(function(){c._interaction||(f(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(b4,b4.exports);var nl=63710088e-1,TS={centimeters:nl*100,centimetres:nl*100,degrees:360/(2*Math.PI),feet:nl*3.28084,inches:nl*39.37,kilometers:nl/1e3,kilometres:nl/1e3,meters:nl,metres:nl,miles:nl/1609.344,millimeters:nl*1e3,millimetres:nl*1e3,nauticalmiles:nl/1852,radians:1,yards:nl*1.0936};function Wg(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function dv(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!_4(t[0])||!_4(t[1]))throw new Error("coordinates must contain numbers");return Wg({type:"Point",coordinates:t},e,n)}function Hh(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Wg({type:"Polygon",coordinates:t},e,n)}function Gg(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return Wg({type:"LineString",coordinates:t},e,n)}function s9(t,e="kilometers"){const n=TS[e];if(!n)throw new Error(e+" units is invalid");return t*n}function o9(t,e="kilometers"){const n=TS[e];if(!n)throw new Error(e+" units is invalid");return t/n}function D2(t){return t%(2*Math.PI)*180/Math.PI}function rc(t){return t%360*Math.PI/180}function _4(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function w4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function a9(t){return t.type==="Feature"?t.geometry:t}function OS(t,e,n={}){if(n.final===!0)return l9(t,e);const r=w4(t),i=w4(e),s=rc(r[0]),o=rc(i[0]),a=rc(r[1]),l=rc(i[1]),c=Math.sin(o-s)*Math.cos(l),f=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return D2(Math.atan2(c,f))}function l9(t,e){let n=OS(e,t);return n=(n+180)%360,n}function u9(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function c9(t,e,n,r={}){const i=u9(t),s=rc(i[0]),o=rc(i[1]),a=rc(n),l=o9(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),f=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=D2(f),y=D2(c);return dv([p,y],r.properties)}function x4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function DS(t,e,n={}){var r=x4(t),i=x4(e),s=rc(i[1]-r[1]),o=rc(i[0]-r[0]),a=rc(r[1]),l=rc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return s9(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}function h9(t,e,n={}){const i=a9(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=OS(i[o],i[o-1])-180;return c9(i[o],a,l,n)}else return dv(i[o])}else s+=DS(i[o],i[o+1],n);return dv(i[i.length-1])}var L4=h9;function f9(t,e){var n,r,i,s,o,a,l,c,f,p,y=0,m=t.type==="FeatureCollection",C=t.type==="Feature",S=m?t.features.length:1;for(n=0;n<S;n++){for(a=m?t.features[n].geometry:C?t.geometry:t,c=m?t.features[n].properties:C?t.properties:{},f=m?t.features[n].bbox:C?t.bbox:void 0,p=m?t.features[n].id:C?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,y,c,f,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,y,c,f,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],y,c,f,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function d9(t,e,n){var r=n;return f9(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function IS(t){return d9(t,(e,n)=>e+p9(n),0)}function p9(t){let e=0,n;switch(t.type){case"Polygon":return C4(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=C4(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function C4(t){let e=0;if(t&&t.length>0){e+=Math.abs(S4(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(S4(t[n]))}return e}var g9=nl*nl/2,b1=Math.PI/180;function S4(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*b1,l=s[1]*b1,c=o[0]*b1;n+=(c-a)*Math.sin(l),r++}return n*g9}var Dp=IS;function NS(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,f=0,p=0,y,m=t.type,C=m==="FeatureCollection",S=m==="Feature",T=C?t.features.length:1,O=0;O<T;O++){c=C?t.features[O].geometry:S?t.geometry:t,y=c?c.type==="GeometryCollection":!1,a=y?c.geometries.length:1;for(var D=0;D<a;D++){var N=0,U=0;if(o=y?c.geometries[D]:c,o!==null){l=o.coordinates;var G=o.type;switch(f=G==="Polygon"||G==="MultiPolygon"?1:0,G){case null:break;case"Point":if(e(l,p,O,N,U)===!1)return!1;p++,N++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,O,N,U)===!1)return!1;p++,G==="MultiPoint"&&N++}G==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(e(l[r][i],p,O,N,U)===!1)return!1;p++}G==="MultiLineString"&&N++,G==="Polygon"&&U++}G==="Polygon"&&N++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(U=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-f;s++){if(e(l[r][i][s],p,O,N,U)===!1)return!1;p++}U++}N++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(NS(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function m9(t,e={}){let n=0,r=0,i=0;return NS(t,function(s){n+=s[0],r+=s[1],i++}),dv([n/i,r/i],e.properties)}var yg=m9;function BS(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,f=0,p=0,y,m=t.type,C=m==="FeatureCollection",S=m==="Feature",T=C?t.features.length:1,O=0;O<T;O++){c=C?t.features[O].geometry:S?t.geometry:t,y=c?c.type==="GeometryCollection":!1,a=y?c.geometries.length:1;for(var D=0;D<a;D++){var N=0,U=0;if(o=y?c.geometries[D]:c,o!==null){l=o.coordinates;var G=o.type;switch(f=0,G){case null:break;case"Point":if(e(l,p,O,N,U)===!1)return!1;p++,N++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,O,N,U)===!1)return!1;p++,G==="MultiPoint"&&N++}G==="LineString"&&N++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(e(l[r][i],p,O,N,U)===!1)return!1;p++}G==="MultiLineString"&&N++,G==="Polygon"&&U++}G==="Polygon"&&N++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(U=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-f;s++){if(e(l[r][i][s],p,O,N,U)===!1)return!1;p++}U++}N++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(BS(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function v9(t,e){var n,r,i,s,o,a,l,c,f,p,y=0,m=t.type==="FeatureCollection",C=t.type==="Feature",S=m?t.features.length:1;for(n=0;n<S;n++){for(a=m?t.features[n].geometry:C?t.geometry:t,c=m?t.features[n].properties:C?t.properties:{},f=m?t.features[n].bbox:C?t.bbox:void 0,p=m?t.features[n].id:C?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,y,c,f,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,y,c,f,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],y,c,f,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function y9(t,e){v9(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Wg(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var f=n.coordinates[c],p={type:l,coordinates:f};if(e(Wg(p,i),r,c)===!1)return!1}})}function b9(t,e){y9(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,f=0;if(BS(n,function(p,y,m,C,S){if(a===void 0||r>l||C>c||S>f){a=p,l=r,c=C,f=S,s=0;return}var T=Gg([a,p],n.properties);if(e(T,r,i,S,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function _9(t,e,n){var r=n,i=!1;return b9(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function pv(t,e={}){return _9(t,(n,r)=>{const i=r.geometry.coordinates;return n+DS(i[0],i[1],e)},0)}var w9=pv;class Tl extends Qi.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});nt(this,"properties");nt(this,"_originalStyle");nt(this,"_path");this.properties={type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}},this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(O=>[O.lng,O.lat]);l.push(l[0]);const c=Hh([l]),f=IS(c),p=pv(Gg([...l]),{units:"meters"}),y=yg(c),m=Qi.latLng(y.geometry.coordinates[1],y.geometry.coordinates[0]),C=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",S=((i=this.properties)==null?void 0:i.category)||"forages",T=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(O=>({lat:O.lat,lng:O.lng})),surface:f,perimeter:p,center:{lat:m.lat,lng:m.lng},vertices:a.length,category:S,accessLevel:T,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:C}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}}setName(n){this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})}getName(){var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""}setLatLngs(n){return super.setLatLngs(n),this.updateProperties(),this}getMidPoints(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Qi.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r}moveVertex(n,r){const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Qi.Polygon.prototype.setLatLngs.call(this,[i]))}addVertex(n,r){const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Qi.Polygon.prototype.setLatLngs.call(this,[i]))}move(n){const i=this.getLatLngs()[0].map(s=>Qi.latLng(s.lat+n.lat,s.lng+n.lng));return Qi.Polygon.prototype.setLatLngs.call(this,[i]),this}getCenter(){const n=this.getLatLngs()[0];if(!n||n.length===0)return new Qi.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Qi.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=Hh([i]),o=yg(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calcul invalide");return Qi.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centrode avec turf.js, utilisation de la mthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Qi.LatLng(0,0)):new Qi.LatLng(i/o,s/o)}}getSegmentLengths(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r}highlight(){if(!this._originalStyle){this._originalStyle={...this.options};const n=(this._originalStyle.weight||3)*1.5;this.setStyle({weight:n,opacity:1,fillOpacity:Math.min((this._originalStyle.fillOpacity||.2)+.1,.4),className:"polygon-hover-effect"});try{this._path&&(this._path.style.filter="drop-shadow(0 0 3px rgba(43, 100, 81, 0.7))",this._path.style.transition="all 0.2s ease-in-out")}catch(r){console.warn("Impossible d'appliquer l'effet de lueur au polygone",r)}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch(n){console.warn("Impossible de restaurer le style du polygone",n)}}}}class vs extends Qi.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});nt(this,"properties");nt(this,"cachedProperties",{});nt(this,"needsUpdate",!0);nt(this,"_originalStyle");nt(this,"_path");nt(this,"updateProperties",()=>{var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=Gg(r),f=pv(c,{units:"meters"});let p;if(n.length===2)p=Qi.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const S=L4(c,f/2,{units:"meters"});p=Qi.latLng(S.geometry.coordinates[1],S.geometry.coordinates[0])}const y=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",m=((o=this.properties)==null?void 0:o.category)||"forages",C=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:f,coordinates:n.map(S=>({lat:S.lat,lng:S.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,category:m,accessLevel:C,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:y}},this.cachedProperties.length=f,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}});nt(this,"setName",n=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})});nt(this,"getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""});nt(this,"getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides dtects pour le segment",i);continue}r.push(Qi.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r});nt(this,"getMidPointAt",n=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Qi.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)});nt(this,"moveVertex",(n,r,i=!1)=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())});nt(this,"getSegmentLengths",()=>{const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return r});nt(this,"getSegmentLengthAt",n=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)});nt(this,"getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r});nt(this,"getLengthToVertex",n=>{const r=this.getLatLngs();if(n<0||n>=r.length||r.length<2)return 0;let i=0;for(let s=0;s<n;s++)i+=r[s].distanceTo(r[s+1]);return i});this.properties={type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}},this.updateProperties(),this.on("add",()=>{this.updateProperties()}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}highlight(){var n,r;if(!this._originalStyle){this._originalStyle={...this.options};const i=(((n=this._originalStyle)==null?void 0:n.weight)||3)*1.75,s=((r=this._originalStyle)==null?void 0:r.color)||"#2b6451";this.setStyle({weight:i,opacity:1,className:"line-hover-effect"});try{this._path&&(this._path.style.filter=`drop-shadow(0 0 4px ${s})`,this._path.style.transition="all 0.2s ease-in-out")}catch{console.warn("Impossible d'appliquer l'effet de lueur  la ligne")}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch{console.warn("Impossible de retirer l'effet de lueur de la ligne")}}}isPointNearLine(n,r=10){if(!this._map)return!1;const i=this.getLatLngs();if(i.length<2)return!1;for(let s=0;s<i.length-1;s++){const o=this._map.latLngToLayerPoint(i[s]),a=this._map.latLngToLayerPoint(i[s+1]),l=this._map.latLngToLayerPoint(n);if(Qi.LineUtil.pointToSegmentDistance(l,o,a)<=r)return!0}return!1}invalidateCache(){this.needsUpdate=!0,this.cachedProperties={}}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}addVertex(n,r,i=!1){const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Qi.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties={},i&&this.updateProperties())}move(n,r=!0){this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Qi.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this}getCenter(){if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Qi.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=Gg(r),s=pv(i,{units:"meters"}),o=L4(i,s/2,{units:"meters"}),a=Qi.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new Qi.LatLng(i,s);return this.cachedProperties.center=o,o}}}var Fr=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(Fr||{});function E4(t){if(!t)return Fr.PRIVATE;switch(t.toLowerCase()){case"private":return Fr.PRIVATE;case"company":return Fr.COMPANY;case"employee":return Fr.EMPLOYEE;case"visitor":return Fr.VISITOR;default:return console.warn(`Niveau d'accs inconnu: ${t}, utilisation de PRIVATE par dfaut`),Fr.PRIVATE}}function x9(t){switch(t){case Fr.PRIVATE:return"Priv";case Fr.COMPANY:return"Entreprise";case Fr.EMPLOYEE:return"Salaris";case Fr.VISITOR:return"Visiteurs";default:return"Inconnu"}}function L9(t){var n,r,i;const e=po();return t!==void 0?t:e.isAdmin?null:e.isEntreprise&&e.user?e.user.id:e.isSalarie&&((n=e.user)!=null&&n.enterprise_id)||e.isVisiteur&&((r=e.user)!=null&&r.enterprise_id)||!e.isAdmin&&((i=e.user)!=null&&i.enterprise_id)?e.user.enterprise_id:null}function P4(t,e){const n=t.filter(r=>r.columnId===e);return n.length>0?Math.max(...n.map(r=>r.order))+1:0}function C9(t){return{id:t.id,text:t.text,createdAt:t.created_at,userId:t.user,userName:t.user_name,userRole:t.user_role}}function k4(t){return{id:t.id,url:t.image,caption:t.caption,createdAt:t.created_at}}function Sc(){return new Date().toISOString()}const yh=mp("notes",()=>{const t=kt([]),e=kt([]),n=tr(()=>J=>t.value.find(ee=>ee.id===J)),r=tr(()=>J=>{const ee=t.value.find(V=>V.id===J);return ee?ee.color:"#6B7280"}),i=tr(()=>t.value.find(J=>J.isDefault)||t.value[0]),s=tr(()=>[...t.value].sort((J,ee)=>J.order-ee.order)),o=tr(()=>J=>e.value.filter(ee=>ee.columnId===J).sort((ee,V)=>ee.order-V.order)),a=tr(()=>e.value),l=tr(()=>J=>a.value.filter(ee=>ee.columnId===J).sort((ee,V)=>ee.order-V.order));async function c(){try{const J=[{id:"1",title:"Ides",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:" faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Termines",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=J}catch(J){throw console.error("[NotesStore][loadColumns] Erreur:",J),J}}async function f(J){}async function p(J,ee){try{const V=t.value.findIndex(K=>K.id===J);V!==-1&&(t.value[V]={...t.value[V],...ee})}catch(V){throw console.error("[NotesStore][updateColumn] Erreur:",V),V}}function y(J){if(!J.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const ee=Sc(),V=P4(e.value,J.columnId||""),K=E4(J.access_level),pe=L9(J.enterprise_id),$={...J,id:J.id,order:V,accessLevel:K,createdAt:J.created_at||ee,updatedAt:J.updated_at||ee,comments:[],photos:[],enterprise_id:pe};return e.value.push($),J.id}function m(J,ee){try{const V=e.value.findIndex(K=>K.id===J);V!==-1&&(ee.color&&(ee.style={...e.value[V].style,color:ee.color,fillColor:ee.color}),ee.access_level&&(ee.accessLevel=E4(ee.access_level),delete ee.access_level),e.value[V]={...e.value[V],...ee})}catch(V){throw console.error("[NotesStore][updateNote] Erreur:",V),V}}function C(J){e.value.findIndex(V=>V.id===J)!==-1?e.value=e.value.filter(V=>V.id!==J):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",J)}function S(J,ee){const V=e.value.findIndex(K=>K.id===J);if(V!==-1){const K=e.value[V];if(K.columnId!==ee){const $=P4(e.value,ee),H={...K,columnId:ee,order:$,updatedAt:Sc()};e.value[V]=H}else e.value[V]={...e.value[V],updatedAt:Sc()}}}function T(J,ee){ee.forEach((V,K)=>{const pe=e.value.findIndex($=>$.id===V&&$.columnId===J);pe!==-1&&(e.value[pe]={...e.value[pe],order:K,updatedAt:Sc()})})}async function O(J,ee){try{const V=po();if(!V.user)throw new Error("Vous devez tre connect pour ajouter un commentaire");if(!V.isEntreprise&&!V.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(R=>R.id===J))throw new Error(`La note avec l'ID ${J} n'existe pas`);const $=(await Yo.addComment(J,ee)).data,H=e.value.findIndex(R=>R.id===J);if(H===-1)return;const oe=e.value[H];oe.comments||(oe.comments=[]);const ie=C9($);return oe.comments.push(ie),oe.updatedAt=Sc(),e.value[H]={...oe},ie.id}catch(V){throw console.error("Erreur lors de l'ajout du commentaire:",V),V}}async function D(J,ee){try{const V=e.value.findIndex($=>$.id===J);if(V===-1)throw new Error(`La note avec l'ID ${J} n'existe pas`);const K=e.value[V];if(!K.comments||K.comments.length===0)throw new Error("Aucun commentaire trouv pour cette note");if(!K.comments.some($=>$.id===ee))throw new Error(`Le commentaire avec l'ID ${ee} n'existe pas`);await Yo.deleteComment(J,ee),K.comments=K.comments.filter($=>$.id!==ee),K.updatedAt=Sc(),e.value[V]={...K}}catch(V){throw console.error("Erreur lors de la suppression du commentaire:",V),V}}async function N(J,ee){try{if(ee.id&&ee.image){const V=e.value.findIndex($=>$.id===J);if(V===-1)return;const K=e.value[V];K.photos||(K.photos=[]);const pe=k4(ee);return K.photos.push(pe),K.updatedAt=Sc(),e.value[V]={...K},pe.id}else{const V=new FormData;V.append("image",ee.url),ee.caption&&V.append("caption",ee.caption);const pe=(await Yo.addPhoto(J,V)).data,$=e.value.findIndex(ie=>ie.id===J);if($===-1)return;const H=e.value[$];H.photos||(H.photos=[]);const oe=k4(pe);return H.photos.push(oe),H.updatedAt=Sc(),e.value[$]={...H},oe.id}}catch(V){throw console.error("Erreur lors de l'ajout de la photo:",V),V}}async function U(J,ee){try{await Yo.deletePhoto(J,ee);const V=e.value.findIndex($=>$.id===J);if(V===-1){console.error("[NotesStore] Note non trouve pour la suppression de la photo");return}e.value[V].photos||(e.value[V].photos=[]);const K=e.value[V],pe=(K.photos||[]).filter($=>$.id!==ee);e.value[V]={...K,photos:pe,updatedAt:Sc()}}catch(V){throw console.error("Erreur lors de la suppression de la photo:",V),V}}async function G(J,ee,V){try{await Yo.updatePhoto(J,ee,{caption:V});const K=e.value.findIndex(H=>H.id===J);if(K===-1||!e.value[K].photos)return;const pe=e.value[K],$=pe.photos.findIndex(H=>H.id===ee);if($===-1)return;pe.photos[$].caption=V,pe.updatedAt=Sc(),e.value[K]={...pe}}catch(K){throw console.error("Erreur lors de la mise  jour de la lgende:",K),K}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getDefaultColumn:i,getSortedColumns:s,getNotesByColumn:o,getAccessibleNotes:a,getAccessibleNotesByColumn:l,getAccessLevelLabel:x9,loadColumns:c,addColumn:f,updateColumn:p,addNote:y,updateNote:m,removeNote:C,moveNote:S,reorderNotes:T,addComment:O,removeComment:D,addPhoto:N,removePhoto:U,updatePhoto:G}});class rl extends pn.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=pn.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          position: relative;
          transition: filter 0.2s ease-in-out;
        }
        .geo-note-marker.hover {
          filter: brightness(1.2) drop-shadow(0 0 4px rgba(59, 130, 246, 0.7));
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});nt(this,"properties");nt(this,"_planSaved",!1);nt(this,"_isMoving",!1);nt(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note golocalise",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Fr.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:r.enterprise_id||null},this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;this._protectFromZoomAnimationErrors(c),c.on("zoomend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),c.on("moveend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),setTimeout(()=>this.forceVisible(),100)}}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,f=this._dbId||this.properties.id;c===f&&(this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,f=this._dbId||this.properties.id;if(c===f){if(this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style,updatedAt:new Date().toISOString()},this.setNoteStyle(l.detail.properties.style),f)try{const y=yh().notes.find(m=>m.id===parseInt(String(f)));y&&(this.properties.comments=y.comments||[],this.properties.photos=y.photos||[],this.properties.createdAt=y.createdAt,this.properties.updatedAt=y.updatedAt)}catch(p){console.error("[GeoNote] Erreur lors de la rcupration de la note depuis le store:",p)}this.getPopup()&&this.setPopupContent(this.createPopupContent())}}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}forceVisible(){try{const n=this.getElement();if(!n){console.warn("[GeoNote][forceVisible] lment DOM introuvable, recration de l'icne"),this.recreateIcon();return}n.style.display="block",n.style.visibility="visible",n.style.opacity="1";const r=n.querySelector(".geo-note-marker");r&&(r.style.display="flex",r.style.visibility="visible",r.style.opacity="1");const i=n.querySelector("svg");i&&(i.style.display="block",i.style.visibility="visible",i.style.opacity="1"),n.offsetHeight}catch(n){console.error("[GeoNote][forceVisible] Erreur:",n),this.recreateIcon()}}recreateIcon(){var n,r;try{const i=this.getLatLng(),o=`
        <div class="geo-note-marker" style="display: flex; visibility: visible; opacity: 1;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="display: block; visibility: visible; opacity: 1;">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${((n=this.properties.style)==null?void 0:n.fillColor)||((r=this.properties.style)==null?void 0:r.color)||"#2b6451"}" />
          </svg>
        </div>
      `,a=pn.divIcon({html:o,className:"geo-note-icon forced-visible",iconSize:[24,36],iconAnchor:[12,36]});if(this.setIcon(a),this._map){const l=this._map.latLngToLayerPoint(i),c=this.getElement();c&&pn.DomUtil.setPosition(c,l)}if(!document.getElementById("geo-note-forced-style")){const l=document.createElement("style");l.id="geo-note-forced-style",l.textContent=`
          .forced-visible {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            pointer-events: auto !important;
          }
          .forced-visible * {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
          .geo-note-marker {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
        `,document.head.appendChild(l)}}catch(i){console.error("[GeoNote][recreateIcon] Erreur lors de la recration de l'icne:",i)}}highlight(){const n=this.getElement();if(n){this.forceVisible(),n.style.visibility="visible",n.style.display="",n.style.opacity="1",n.style.zIndex="1000";const r=n.querySelector(".geo-note-marker");r&&r.classList.add("hover")}}unhighlight(){const n=this.getElement();if(n){this.forceVisible();const r=n.querySelector(".geo-note-marker");r&&r.classList.remove("hover"),n.style.zIndex="",n.style.visibility="visible",n.style.display="",n.style.opacity="1"}}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Ides",2:" faire",3:"En cours",4:"Termines",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case Fr.PRIVATE:return"Priv";case Fr.COMPANY:return"Entreprise";case Fr.EMPLOYEE:return"Salaris";case Fr.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Fr.PRIVATE:return"#9CA3AF";case Fr.COMPANY:return"#EF4444";case Fr.EMPLOYEE:return"#F59E0B";case Fr.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){pn.DomEvent.stopPropagation(n),this.editNote()}editNote(){const n=this._dbId,r=this._leaflet_id;if(n)try{const a=yh().notes.find(l=>l.id===parseInt(String(n)));a&&(this.properties.name=a.title,this.properties.description=a.description,this.properties.columnId=a.columnId,this.properties.accessLevel=a.accessLevel,this.properties.style={...a.style},this.properties.comments=a.comments||[],this.properties.photos=a.photos||[],this.properties.createdAt=a.createdAt,this.properties.updatedAt=a.updatedAt)}catch(o){console.error("[GeoNote] Erreur lors de la rcupration de la note depuis le store:",o)}const i={id:r,backendId:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:this.properties.comments||[],photos:this.properties.photos||[],createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:this.properties.updatedAt||new Date().toISOString()},s=new CustomEvent("geonote:edit",{detail:{note:i,source:this,backendId:n}});window.dispatchEvent(s),this.fire("note:edit",{note:i,source:this,backendId:n})}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Fr.PRIVATE);const n=this.properties.style||{};let r=n.color||n.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a)}}r||(r="#2b6451");const i=n.radius||12;this.properties.style={...n,color:r,weight:n.weight||2,fillColor:r,fillOpacity:n.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category}}setNoteStyle(n){const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451",s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?l.setAttribute("fill",i):this._updateIconWithNewColor(i)}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise  jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=n._accessLevel||n.accessLevel||this.properties.accessLevel,a=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o),a&&this.properties.category!==a&&(this.properties.category=a),this.refreshIconStyle()}refreshIconStyle(){const n=this.getElement();if(n&&(n.style.display="none",n.offsetHeight,n.style.display="",pn.DomUtil.setTransform(n,new pn.Point(0,0),1),this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());pn.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s"}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise  jour de la position:",r)}}_protectFromZoomAnimationErrors(n){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignore: proprits manquantes");return}typeof this.updatePositionDuringZoom=="function"?this.updatePositionDuringZoom(i):r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());pn.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la rcupration:",o)}}},n.on("zoomanim",i=>{this.updatePositionDuringZoom(i)})}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(n){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${n}" />
          </svg>
        </div>
      `,o=pn.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100)}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise  jour de l'icne:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,f;this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style,i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||this.properties.accessLevel||Fr.PRIVATE,s=((f=n.style)==null?void 0:f.category)||n.category||this.properties.category||"forages",o=n.columnId||this.properties.columnId||"1",a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a)}static fromBackendData(n){var l,c,f,p,y,m,C,S;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const T=n.location.coordinates;r=[T[1],T[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les donnes de la note ne contiennent pas de position valide");const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||Fr.PRIVATE,s=((f=n.style)==null?void 0:f.category)||n.category||"forages";n.accessLevel=i,n.category=s;const o=n.columnId||"1",a=new rl(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(y=n.style)==null?void 0:y.weight,fillColor:(m=n.style)==null?void 0:m.fillColor,fillOpacity:(C=n.style)==null?void 0:C.fillOpacity,radius:(S=n.style)==null?void 0:S.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),a}async saveNote(n){var r,i,s;if(this._planSaved)return this._dbId||0;try{this.updateProperties();let o=((r=this.properties.style)==null?void 0:r.color)||"#2b6451";if(o.startsWith("rgb")){const f=(i=this.getElement())==null?void 0:i.querySelector(".geo-note-marker svg path");if(f){const p=f.getAttribute("fill");p&&(o=p)}}const a={...this.properties.style,color:o,fillColor:o,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},l={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:a,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};if(this.properties.enterprise_id)l.enterprise_id=this.properties.enterprise_id;else{const f=po();!f.isAdmin&&((s=f.user)!=null&&s.enterprise_id)&&(l.enterprise_id=f.user.enterprise_id)}n&&(l.plan=n);let c;return this._dbId?c=(await Yo.updateNote(this._dbId,l)).data:(c=(await Yo.createNote(l)).data,this._dbId=c.id,yh().addNote({...c,id:c.id,columnId:c.column,accessLevel:c.access_level})),this._planSaved=!0,c.id}catch(o){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",o),ll().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?this.saveNote(parseInt(n)):this.saveNote();const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}updatePositionDuringZoom(n){try{if(!this._map||!n.center||n.zoom===void 0)return;const r=this.getElement();if(!r)return;r.style.opacity="0",r.style.transition="opacity 0.01s"}catch(r){console.warn("[GeoNote][updatePositionDuringZoom] Erreur lors de la gestion de l'animation de zoom:",r)}}updatePosition(){try{if(!this._map)return;const n=this.getElement();if(!n){console.warn("[GeoNote][updatePosition] lment DOM introuvable, recration de l'icne"),this.recreateIcon();return}const r=this._map.latLngToLayerPoint(this.getLatLng());pn.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s",n.style.visibility="visible",n.style.display="block";const i=n.getBoundingClientRect();i.width===0||i.height===0?(console.warn("[GeoNote][updatePosition] L'lment a une taille nulle, recration de l'icne"),this.recreateIcon()):setTimeout(()=>this.forceVisible(),50)}catch(n){console.warn("[GeoNote][updatePosition] Erreur lors de la mise  jour de la position:",n),this.recreateIcon()}}openInGoogleMaps(){const n=ll(),r=this.getLatLng();if(!r||isNaN(r.lat)||isNaN(r.lng)){n.warning("La position de la note est invalide ou manquante");return}ku(()=>Promise.resolve().then(()=>YS),void 0).then(i=>{i.openInGoogleMaps(r.lat,r.lng,"directions",this.properties.name)})}}function S9(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function E9(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function M4(t){var e,n,r,i,s,o,a,l,c,f,p,y,m,C,S,T,O,D,N;if(((e=t.properties)==null?void 0:e.type)==="Note"){const U=t.getLatLng();return{type_forme:"Note",data:{points:[[U.lng,U.lat]],style:{color:((n=t.properties.style)==null?void 0:n.color)||"#2b6451",weight:((r=t.properties.style)==null?void 0:r.weight)||3,opacity:((i=t.properties.style)==null?void 0:i.opacity)||1,fillColor:((s=t.properties.style)==null?void 0:s.fillColor)||"#2b6451",fillOpacity:((o=t.properties.style)==null?void 0:o.fillOpacity)||.2,name:((a=t.properties.style)==null?void 0:a.name)||""}}}}if(t instanceof Tl||((l=t.properties)==null?void 0:l.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(J=>[J.lng,J.lat]),style:{color:((c=t.properties.style)==null?void 0:c.color)||"#2b6451",weight:((f=t.properties.style)==null?void 0:f.weight)||3,opacity:((p=t.properties.style)==null?void 0:p.opacity)||1,fillColor:((y=t.properties.style)==null?void 0:y.fillColor)||"#2b6451",fillOpacity:((m=t.properties.style)==null?void 0:m.fillOpacity)||.2,name:((C=t.properties.style)==null?void 0:C.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof vs||((S=t.properties)==null?void 0:S.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(J=>[J.lng,J.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((T=t.properties.style)==null?void 0:T.color)||"#2b6451",weight:((O=t.properties.style)==null?void 0:O.weight)||3,opacity:((D=t.properties.style)==null?void 0:D.opacity)||1,name:((N=t.properties.style)==null?void 0:N.name)||""}}};throw new Error("Type de forme non reconnu")}function P9(t){var e,n,r,i,s,o,a,l,c,f,p,y,m,C,S,T,O;switch(t.type_forme){case"Polygon":{const D=t.data;if(!S9(D))return console.error("[DrawingStore] Donnes invalides pour Polygon"),null;const N=D.points.map(J=>Qi.latLng(J[1],J[0])),U=((e=D.style)==null?void 0:e._accessLevel)||((n=D.style)==null?void 0:n.accessLevel)||D.accessLevel||"visitor";D.accessLevel=U;const G=new Tl([N],{color:((r=D.style)==null?void 0:r.color)||"#2b6451",weight:((i=D.style)==null?void 0:i.weight)||3,opacity:((s=D.style)==null?void 0:s.opacity)||1,fillColor:((o=D.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=D.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=D.style)==null?void 0:l.dashArray)||"",name:((c=D.style)==null?void 0:c.name)||"",category:D.category||"forages",accessLevel:U});return G.updateProperties(),G}case"Line":{const D=t.data;if(!E9(D))return console.error("[DrawingStore] Donnes invalides pour Ligne"),null;const N=D.points.map(J=>Qi.latLng(J[1],J[0])),U=((f=D.style)==null?void 0:f._accessLevel)||((p=D.style)==null?void 0:p.accessLevel)||D.accessLevel||"visitor";D.accessLevel=U;const G=new vs(N,{...D.style||{},name:((y=D.style)==null?void 0:y.name)||"",category:D.category||"forages",accessLevel:U});return G.updateProperties(),G}case"Note":{const D=t.data;if(!D.location)return console.error("[DrawingStore] Donnes invalides pour Note"),null;try{const N={location:D.location,name:D.name||"Note golocalise",description:D.description||"",columnId:D.columnId||"en-cours",accessLevel:D.accessLevel||"private",category:D.category||"forages",style:{color:((m=D.style)==null?void 0:m.color)||"#2b6451",weight:((C=D.style)==null?void 0:C.weight)||2,fillColor:((S=D.style)==null?void 0:S.fillColor)||"#2b6451",fillOpacity:((T=D.style)==null?void 0:T.fillOpacity)||.8,radius:((O=D.style)==null?void 0:O.radius)||12},comments:D.comments||[],photos:D.photos||[],order:D.order||0,createdAt:D.createdAt||new Date().toISOString(),updatedAt:D.updatedAt||new Date().toISOString()},U=rl.fromBackendData(N);return U._dbId=t.id,U}catch(N){return console.error("[DrawingStore] Erreur lors de la cration de la Note:",N),null}}default:return console.warn("[DrawingStore] Type non gr pour la restauration:",t.type_forme),null}}const qg=mp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>t.elements.length===0?[]:t.elements.filter(n=>{var l,c;if(!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),!!a})},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){if(t instanceof Qi.Layer&&t.properties){const e=M4(t);this.elements.push(e)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(t.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels}),t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories};const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes};const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){if(this.currentMapId===t&&this.elements.length>0)return this.elements;this.loading=!0;try{const n=(await Ln.get(`/plans/${t}/`)).data;return this.elements=n.formes.map(r=>{if(r.type_forme)return{id:r.id,type_forme:r.type_forme,data:r.data||{}};try{const i=P9(r);if(i)return M4(i)}catch(i){console.error("Erreur lors de la conversion de la forme",{error:i,id:r.id,type:r.type_forme})}return r}),this.currentMapId=t,this.unsavedChanges=!1,n.preferences&&(n.preferences.currentTool&&this.setCurrentTool(n.preferences.currentTool),n.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...n.preferences.currentStyle}),n.preferences.lastUsedType&&(this.lastUsedType=n.preferences.lastUsedType)),this.elements}catch(e){throw console.error("Erreur lors du chargement des lments:",e),this.error="Erreur lors du chargement des lments du plan",e}finally{this.loading=!1}},async saveToPlan(t,e){this.loading=!0;try{const n=t||this.currentMapId;if(!n)throw new Error("Aucun plan slectionn pour la sauvegarde");const r=this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),i=(e==null?void 0:e.elementsToDelete)||[],s=`/plans/${n}/save_with_elements/`,o=await Ln.post(s,{formes:r,connexions:[],annotations:[],elementsToDelete:i,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),a=new Set(i);return this.elements=o.data.formes.filter(l=>!a.has(l.id)).map(l=>({...l,type_forme:l.type_forme})),this.unsavedChanges=!1,o.data}catch(n){throw console.error("Erreur lors de la sauvegarde du plan:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1}}}}),RS=mp("mapFilters",{state:()=>({filters:[],loading:!1,error:null}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=ll();this.loading=!0,this.error=null;try{const e=await Zm.getFilters();return this.filters=e.data,this.filters}catch(e){throw this.error="Erreur lors du chargement des filtres",t.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",e),e}finally{this.loading=!1}},async createFilter(t){this.loading=!0,this.error=null;try{const e=await Zm.createFilter(t);return this.filters.push(e.data),e.data}catch(e){throw this.error="Erreur lors de la cration du filtre",console.error("[MapFilterStore] Erreur lors de la cration du filtre:",e),e}finally{this.loading=!1}},async updateFilter(t,e){this.loading=!0,this.error=null;try{const n=await Zm.updateFilter(t,e),r=this.filters.findIndex(i=>i.id===t);return r!==-1&&(this.filters[r]=n.data),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise  jour du filtre:",n),n}finally{this.loading=!1}},async deleteFilter(t){this.loading=!0,this.error=null;try{return await Zm.deleteFilter(t),this.filters=this.filters.filter(e=>e.id!==t),!0}catch(e){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",e),e}finally{this.loading=!1}}}}),Qb=mp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var e,n;const t=po();this.loading=!0;try{let r="/plans/";const i={};t.isSalarie?i.salarie=(e=t.user)==null?void 0:e.id:t.isVisiteur&&(i.visiteur=(n=t.user)==null?void 0:n.id);const s=await Ln.get(r,{params:i});this.plans=s.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchPlansWithDetails(){var e,n;const t=po();this.loading=!0;try{let r="/plans/";const i={include_details:!0};t.isSalarie?i.salarie=(e=t.user)==null?void 0:e.id:t.isVisiteur&&(i.visiteur=(n=t.user)==null?void 0:n.id);const o=(await Ln.get(r,{params:i})).data.map(a=>({...a,entreprise:typeof a.entreprise=="object"?a.entreprise:null,salarie:typeof a.salarie=="object"?a.salarie:null,visiteur:typeof a.visiteur=="object"?a.visiteur:null}));return this.plans=o,{data:o}}catch(r){throw console.error("[IrrigationStore] Error fetching plans:",r),this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchClientPlans(t){this.loading=!0;try{return(await Ym.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var n;this.clearCurrentPlan(),this.loading=!0;const e=ll();try{const r=po();((n=r.user)==null?void 0:n.user_type)==="visiteur"&&(t={...t,visiteur:r.user.id,salarie_id:r.user.enterprise_id,entreprise_id:r.user.enterprise_id});const i={...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null},s=await Ym.createPlan(i);return this.plans.push(s.data),e.success(`Le plan "${s.data.nom}" a t cr avec succs`),s.data}catch(r){const i=r instanceof Error?r.message:String(r);throw console.error("Error creating plan:",i),this.error=i,e.error(`Erreur lors de la cration du plan : ${i}`),r}finally{this.loading=!1}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await Ym.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la cration du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var e,n;if(this.unsavedChanges){this.loading=!0;try{const r=await Ln.patch(`/plans/${t}/`,{...this.currentPlan,version:((e=this.currentPlan)==null?void 0:e.version)||1}),i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw console.error("[IrrigationStore][savePlan] ERREUR:",r),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}}},async updatePlanDetails(t,e){const n=ll();try{const{visiteur_id:r,salarie_id:i,entreprise_id:s,...o}=e,a={...o};r!==void 0&&(a.visiteur_id=r),i!==void 0&&(a.salarie_id=i),s!==void 0&&(a.entreprise_id=s);const l=await Ln.patch(`/plans/${t}/`,a);this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...l.data});const c=this.plans.findIndex(f=>f.id===t);return c!==-1&&(this.plans[c]={...this.plans[c],...l.data}),l.data}catch(r){throw console.error("Erreur lors de la mise  jour du plan:",r),n.error(`Erreur lors de la mise  jour du plan : ${r instanceof Error?r.message:String(r)}`),r}},async fetchPlanHistory(t){this.loading=!0;try{const e=await Ln.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la rcupration de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await Ln.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=ll();try{const r=this.plans.find(i=>i.id===t);await Ym.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a t supprim avec succs`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),k9={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},M9={class:"flex-1 flex flex-col overflow-hidden"},A9={class:"border-b border-gray-200"},T9={class:"flex -mb-px"},O9={class:"flex-1 overflow-hidden flex flex-col"},D9={key:0,class:"tab-content"},I9={class:"grid grid-cols-3 gap-1.5 mb-4"},N9=["onClick","title"],B9=["innerHTML"],R9={key:0,class:"grid grid-cols-2 gap-2 mt-2 mb-2"},F9={key:2,class:"my-4 border-t border-gray-200"},j9={key:3,class:"mt-4"},z9={key:0,class:"mb-4"},U9={class:"mb-4"},$9=["value"],V9={class:"mb-4"},H9={class:"grid grid-cols-1 gap-4"},W9={key:0,class:"space-y-1"},G9={class:"flex justify-between items-center"},q9={class:"text-sm font-medium text-gray-500"},Y9={class:"flex justify-between items-center"},Z9={class:"text-sm font-medium text-gray-500"},K9={class:"text-sm font-medium text-gray-500"},X9={key:1,class:"tab-content"},J9={class:"grid grid-cols-6 gap-2 mb-4"},Q9=["onClick","title"],ej={class:"space-y-4"},tj={class:"flex items-center gap-4"},nj={class:"flex items-center gap-2"},rj={class:"flex items-center gap-4"},ij=["value"],sj={key:0,class:"flex items-center gap-4"},oj={class:"flex items-center gap-2"},aj={key:2,class:"tab-content filters-tab"},lj={class:"filters-content"},uj={class:"space-y-2"},cj={class:"space-y-2 mt-4"},hj={class:"space-y-1"},fj={class:"flex items-center"},dj={class:"flex items-center"},pj={class:"flex items-center"},gj={class:"flex items-center"},mj={class:"flex items-center"},vj={class:"flex items-center"},yj={key:0,class:"flex items-center"},bj=["onUpdate:modelValue"],_j={class:"ml-2 text-sm text-gray-700"},wj={key:0,class:"mt-2 pt-2 border-t border-gray-200"},xj={class:"flex space-x-2"},Lj=["disabled"],Cj={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Sj={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ej={class:"space-y-2 mt-4"},Pj={class:"space-y-1"},kj={class:"flex items-center"},Mj={class:"flex items-center"},Aj={class:"flex items-center"},Tj=_s({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=qg(),i=po(),s=tr(()=>i.isAdmin),o=tr(()=>i.isEntreprise),a=RS(),l=Qb(),c=cu({name:""}),f=kt(!1),p=kt(["forages","clients","entrepots","livraisons","cultures","parcelles"]),y=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Note",label:"Note golocalise"}],m=le=>{switch(le){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c1.38 0 2.5-1.12 2.5-2.5S13.38 6 12 6s-2.5 1.12-2.5 2.5S10.62 11 12 11z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><ellipse cx="12" cy="22" rx="4" ry="1.5" stroke-width="2.5" fill="currentColor" fill-opacity="0.2"/></svg>';default:return""}},C=kt("tools");yi(C,(le,se)=>{le==="filters"&&se!=="filters"&&(n.selectedShape&&Ne("tool-selected",""),setTimeout(()=>{Z()},0)),se==="filters"&&le!=="filters"&&Z()});const S=kt("#2b6451"),T=kt(2),O=kt("solid"),D=kt("#2b6451"),N=kt(.2),U=kt(!0),G=kt(""),J=kt("default"),ee=kt("visitor"),V=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],K=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointills"}],pe=kt("company"),$=cu({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}}),H=le=>{pe.value=le,le==="company"?($.accessLevels.company=!0,$.accessLevels.employee=!1,$.accessLevels.visitor=!1):le==="employee"?($.accessLevels.company=!1,$.accessLevels.employee=!0,$.accessLevels.visitor=!1):le==="visitor"&&($.accessLevels.company=!1,$.accessLevels.employee=!1,$.accessLevels.visitor=!0),Z()},oe=le=>{n.selectedShape&&Ne("tool-selected",""),H(le)},ie=tr(()=>n.selectedShape&&n.selectedShape.properties||null),R=le=>{S.value=le,D.value=le,j({strokeColor:le,fillColor:le})},j=le=>{n.selectedShape&&Ne("style-update",le)},q=()=>{n.selectedShape&&Ne("properties-update",{name:G.value})},re=()=>{n.selectedShape&&Ne("properties-update",{category:J.value})},xe=()=>{n.selectedShape&&Ne("properties-update",{accessLevel:ee.value})},be=()=>{const le={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}};$.accessLevels.company=!0,$.accessLevels.employee=!0,$.accessLevels.visitor=!0,$.categories.forages=!0,$.categories.clients=!0,$.categories.entrepots=!0,$.categories.livraisons=!0,$.categories.cultures=!0,$.categories.parcelles=!0,$.shapeTypes.Polygon=!0,$.shapeTypes.Line=!0,$.shapeTypes.Note=!0,r.updateFilters(le),Ne("filter-change",le)},_e=()=>{ge(),be()},Z=()=>{const le={...$.accessLevels},se={...$.categories},ue={...$.shapeTypes},Q={accessLevels:le,categories:se,shapeTypes:ue};r.updateFilters(Q),Ne("filter-change",Q),setTimeout(()=>{window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:Q}}))},0)},ae=le=>`${Math.round(le)} m`,ce=le=>le>=1e4?`${(le/1e4).toFixed(2)} ha`:`${Math.round(le)} m`,de=le=>p.value.includes(le)?le:le.split("_").map(se=>se.charAt(0).toUpperCase()+se.slice(1)).join(" "),ge=()=>{n.selectedShape&&Ne("tool-selected","")};async function Ee(){var le,se;if(!(!c.name||f.value)){f.value=!0;try{const ue=c.name.toLowerCase().replace(/\s+/g,"_"),Q=l.currentPlan;let ke=null;if(Q!=null&&Q.entreprise_id?ke=Q.entreprise_id:Q!=null&&Q.entreprise&&typeof Q.entreprise=="object"&&"id"in Q.entreprise?ke=Q.entreprise.id:(le=i.user)!=null&&le.enterprise_id?ke=i.user.enterprise_id:i.isEntreprise&&((se=i.user)!=null&&se.id)&&(ke=i.user.id),!ke)return;const Ve=await a.createFilter({name:c.name,category:ue,entreprise:ke});$.categories[ue]||($.categories[ue]=!0);const Xe={...r.filters.categories};Xe[ue]=!0,r.updateFilters({categories:Xe}),Ne("filter-change",$),c.name=""}catch{}finally{f.value=!1}}}const Ue=()=>{ge(),C.value="filters"},Ne=e;jg(()=>{var le,se,ue,Q;if(n.selectedShape){const ke=n.selectedShape.options||{};S.value=ke.color||"#2b6451",T.value=ke.weight||3,O.value=ke.dashArray?"dashed":"solid",D.value=ke.fillColor||"#2b6451",N.value=ke.fillOpacity||.2;const Ve=n.selectedShape.type||((le=n.selectedShape.properties)==null?void 0:le.type)||"";U.value=Ve!=="Line",G.value=((se=n.selectedShape.properties)==null?void 0:se.name)||"",J.value=((ue=n.selectedShape.properties)==null?void 0:ue.category)||"forages",ee.value=((Q=n.selectedShape.properties)==null?void 0:Q.accessLevel)||"visitor"}}),Ks(async()=>{const le=r.filters;$.accessLevels.company=le.accessLevels.company,$.accessLevels.employee=le.accessLevels.employee,$.accessLevels.visitor=le.accessLevels.visitor,$.categories.forages=le.categories.forages,$.categories.clients=le.categories.clients,$.categories.entrepots=le.categories.entrepots,$.categories.livraisons=le.categories.livraisons,$.categories.cultures=le.categories.cultures,$.categories.parcelles=le.categories.parcelles,$.shapeTypes.Polygon=le.shapeTypes.Polygon,$.shapeTypes.Line=le.shapeTypes.Line,$.shapeTypes.Note=le.shapeTypes.Note;try{await a.fetchFilters();const se=a.getUniqueCategories,ue=[];se.forEach(Q=>{!p.value.includes(Q)&&!$.categories[Q]&&($.categories[Q]=!0,ue.push(Q))}),ue.length>0&&(r.updateFilters({categories:$.categories}),Ne("filter-change",$))}catch{}}),yi($,(le,se)=>{const ue=Object.keys(le.accessLevels).filter(Ve=>se.accessLevels[Ve]!==le.accessLevels[Ve]),Q=Object.keys(le.categories).filter(Ve=>se.categories[Ve]!==le.categories[Ve]),ke=Object.keys(le.shapeTypes).filter(Ve=>se.shapeTypes[Ve]!==le.shapeTypes[Ve]);ue.length>0||Q.length>0||ke.length>0,C.value==="filters"&&Z()},{deep:!0});const rt=le=>{Ne("tool-selected",n.selectedTool===le?"":le),window.innerWidth<768&&Ne("update:show",!1)},gt=()=>{var le;if(Ne("update:show",!1),n.selectedShape&&((le=n.selectedShape.properties)==null?void 0:le.type)==="Note"){const se=n.selectedShape.layer;se&&typeof se.editNote=="function"&&se.editNote()}},_t=()=>{var le;if(Ne("update:show",!1),n.selectedShape&&((le=n.selectedShape.properties)==null?void 0:le.type)==="Note"){const se=n.selectedShape.layer;se&&typeof se.openInGoogleMaps=="function"&&se.openInGoogleMaps()}};return(le,se)=>{var ue,Q;return Ie(),je("div",{class:Ei(["drawing-tools-panel",{open:t.show}])},[P("div",k9,[se[30]||(se[30]=P("div",{class:"flex items-center"},[P("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),P("h3",{class:"text-sm font-semibold text-gray-700"},"Outils")],-1)),P("button",{onClick:se[0]||(se[0]=ke=>le.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},se[29]||(se[29]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",M9,[P("div",A9,[P("nav",T9,[P("button",{onClick:se[1]||(se[1]=ke=>C.value="tools"),class:Ei([C.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},se[31]||(se[31]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),P("span",null,"Outils",-1)]),2),t.selectedShape&&((ue=t.selectedShape.properties)==null?void 0:ue.type)!=="Note"?(Ie(),je("button",{key:0,onClick:se[2]||(se[2]=ke=>C.value="style"),class:Ei([C.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},se[32]||(se[32]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),P("span",null,"Style",-1)]),2)):Kt("",!0),P("button",{onClick:Ue,class:Ei([C.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},se[33]||(se[33]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),P("span",null,"Filtres",-1)]),2)])]),P("div",O9,[C.value==="tools"?(Ie(),je("div",D9,[P("div",I9,[(Ie(!0),je(bn,null,sr(y.filter(ke=>ke.type!=="delete"),ke=>(Ie(),je("button",{key:ke.type,class:Ei(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":n.selectedTool===ke.type,"hover:bg-gray-50 border-gray-300 text-gray-700":n.selectedTool!==ke.type}]),onClick:Ve=>rt(ke.type),title:ke.label},[P("span",{class:"icon",innerHTML:m(ke.type)},null,8,B9)],10,N9))),128))]),t.selectedShape&&ie.value&&ie.value.type==="Note"?(Ie(),je("div",R9,[P("button",{class:"p-2 rounded-md border border-primary-200 bg-primary-50 text-primary-600 hover:bg-primary-100 flex items-center justify-center",onClick:gt,title:"diter la note"},se[34]||(se[34]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),P("span",{class:"text-sm"},"diter",-1)])),P("button",{class:"p-2 rounded-md border border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 flex items-center justify-center",onClick:_t,title:"Obtenir l'itinraire"},se[35]||(se[35]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),P("span",{class:"text-sm"},"Itinraire",-1)]))])):Kt("",!0),t.selectedShape?(Ie(),je("button",{key:1,class:Ei(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":n.selectedTool==="delete"}]),onClick:se[3]||(se[3]=ke=>le.$emit("delete-shape")),title:"Supprimer la forme"},se[36]||(se[36]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),P("span",{class:"text-sm"},"Supprimer",-1)]),2)):Kt("",!0),t.selectedShape&&ie.value?(Ie(),je("div",F9)):Kt("",!0),t.selectedShape&&ie.value?(Ie(),je("div",j9,[ie.value.type!=="Note"?(Ie(),je("div",z9,[se[37]||(se[37]=P("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),jn(P("input",{type:"text",id:"shapeName","onUpdate:modelValue":se[4]||(se[4]=ke=>G.value=ke),onChange:q,placeholder:"Donnez un nom  cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[di,G.value]])])):Kt("",!0),P("div",U9,[se[40]||(se[40]=P("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catgorie",-1)),jn(P("select",{id:"shapeCategory","onUpdate:modelValue":se[5]||(se[5]=ke=>J.value=ke),onChange:re,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[se[38]||(se[38]=lu('<option value="forages" data-v-4fd4fe60>Forages</option><option value="clients" data-v-4fd4fe60>Clients</option><option value="entrepots" data-v-4fd4fe60>Entrepts</option><option value="livraisons" data-v-4fd4fe60>Lieux de livraison</option><option value="cultures" data-v-4fd4fe60>Cultures</option><option value="parcelles" data-v-4fd4fe60>Noms des parcelles</option>',6)),(Ie(!0),je(bn,null,sr($.categories,(ke,Ve)=>(Ie(),je(bn,{key:Ve},[p.value.includes(String(Ve))?Kt("",!0):(Ie(),je("option",{key:0,value:String(Ve)},Ut(de(String(Ve))),9,$9))],64))),128)),se[39]||(se[39]=P("option",{value:"default"},"Autre",-1))],544),[[os,J.value]])]),P("div",V9,[se[42]||(se[42]=P("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accs",-1)),se[43]||(se[43]=P("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Dfinit qui peut voir cet lment sur la carte. ",-1)),jn(P("select",{id:"accessLevel","onUpdate:modelValue":se[6]||(se[6]=ke=>ee.value=ke),onChange:xe,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},se[41]||(se[41]=[P("option",{value:"private"},"Priv - visible uniquement par vous",-1),P("option",{value:"company"},"Entreprise - visible par l'entreprise",-1),P("option",{value:"employee"},"Salaris - visible par l'entreprise et ses salaris",-1),P("option",{value:"visitor"},"Visiteurs - visible par l'entreprise, ses salaris et ses visiteurs",-1)]),544),[[os,ee.value]])]),P("div",H9,[ie.value.type==="Polygon"?(Ie(),je("div",W9,[P("div",G9,[se[44]||(se[44]=P("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),P("span",q9,Ut(ce(ie.value.surface||0)),1)]),P("div",Y9,[se[45]||(se[45]=P("span",{class:"text-sm font-semibold text-gray-700"},"Primtre :",-1)),P("span",Z9,Ut(ae(ie.value.perimeter||0)),1)])])):ie.value.type==="Line"?(Ie(),je(bn,{key:1},[se[46]||(se[46]=P("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),P("span",K9,Ut(ae(ie.value.length||0)),1)],64)):Kt("",!0)])])):Kt("",!0)])):Kt("",!0),C.value==="style"&&t.selectedShape&&((Q=t.selectedShape.properties)==null?void 0:Q.type)!=="Note"?(Ie(),je("div",X9,[P("div",J9,[(Ie(),je(bn,null,sr(V,ke=>P("button",{key:ke,class:"w-8 h-8 rounded-full",style:Rl({backgroundColor:ke}),onClick:Ve=>R(ke),title:ke},null,12,Q9)),64))]),P("div",ej,[P("div",tj,[se[47]||(se[47]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),P("div",nj,[jn(P("input",{type:"color","onUpdate:modelValue":se[7]||(se[7]=ke=>S.value=ke),class:"w-16 h-8 rounded border",onChange:se[8]||(se[8]=ke=>j({strokeColor:S.value})),title:"Couleur du contour"},null,544),[[di,S.value]]),jn(P("input",{type:"range","onUpdate:modelValue":se[9]||(se[9]=ke=>T.value=ke),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:se[10]||(se[10]=ke=>j({strokeWidth:T.value})),title:"paisseur du contour"},null,544),[[di,T.value]])])]),P("div",rj,[se[48]||(se[48]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),jn(P("select",{"onUpdate:modelValue":se[11]||(se[11]=ke=>O.value=ke),class:"w-full rounded border",onChange:se[12]||(se[12]=ke=>j({strokeStyle:O.value}))},[(Ie(),je(bn,null,sr(K,ke=>P("option",{key:ke.value,value:ke.value},Ut(ke.label),9,ij)),64))],544),[[os,O.value]])]),U.value?(Ie(),je("div",sj,[se[49]||(se[49]=P("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),P("div",oj,[jn(P("input",{type:"color","onUpdate:modelValue":se[13]||(se[13]=ke=>D.value=ke),class:"w-16 h-8 rounded border",onChange:se[14]||(se[14]=ke=>j({fillColor:D.value})),title:"Couleur de remplissage"},null,544),[[di,D.value]]),jn(P("input",{type:"range","onUpdate:modelValue":se[15]||(se[15]=ke=>N.value=ke),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:se[16]||(se[16]=ke=>j({fillOpacity:N.value})),title:"Opacit du remplissage"},null,544),[[di,N.value]])])])):Kt("",!0)])])):Kt("",!0),C.value==="filters"?(Ie(),je("div",aj,[P("div",lj,[P("div",uj,[se[52]||(se[52]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accs",-1)),se[53]||(se[53]=P("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Slectionnez votre niveau d'accs pour filtrer les lments visibles sur la carte. ",-1)),P("div",null,[jn(P("select",{"onUpdate:modelValue":se[17]||(se[17]=ke=>pe.value=ke),onChange:se[18]||(se[18]=ke=>oe(pe.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},se[50]||(se[50]=[P("option",{value:"company"},"Entreprise (accs  tout)",-1),P("option",{value:"employee"},"Salaris (accs niveau salaris et visiteurs)",-1),P("option",{value:"visitor"},"Visiteurs (accs niveau visiteurs uniquement)",-1)]),544),[[os,pe.value]]),se[51]||(se[51]=P("div",{class:"mt-2 text-xs text-gray-500"},[P("p",null,[P("strong",null,"Entreprise"),zr(" : Vous verrez tous les lments (entreprise, salaris, visiteurs)")]),P("p",null,[P("strong",null,"Salaris"),zr(" : Vous verrez les lments pour salaris et visiteurs")]),P("p",null,[P("strong",null,"Visiteurs"),zr(" : Vous ne verrez que les lments pour visiteurs")])],-1))])]),P("div",cj,[se[62]||(se[62]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catgories",-1)),P("div",hj,[P("label",fj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":se[19]||(se[19]=ke=>$.categories.forages=ke),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.forages]]),se[54]||(se[54]=P("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),P("label",dj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":se[20]||(se[20]=ke=>$.categories.clients=ke),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.clients]]),se[55]||(se[55]=P("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),P("label",pj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":se[21]||(se[21]=ke=>$.categories.entrepots=ke),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.entrepots]]),se[56]||(se[56]=P("span",{class:"ml-2 text-sm text-gray-700"},"Entrepts",-1))]),P("label",gj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":se[22]||(se[22]=ke=>$.categories.livraisons=ke),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.livraisons]]),se[57]||(se[57]=P("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),P("label",mj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":se[23]||(se[23]=ke=>$.categories.cultures=ke),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.cultures]]),se[58]||(se[58]=P("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),P("label",vj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":se[24]||(se[24]=ke=>$.categories.parcelles=ke),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.parcelles]]),se[59]||(se[59]=P("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Ie(!0),je(bn,null,sr($.categories,(ke,Ve)=>(Ie(),je(bn,{key:Ve},[p.value.includes(String(Ve))?Kt("",!0):(Ie(),je("label",yj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":Xe=>$.categories[Ve]=Xe,onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,bj),[[Al,$.categories[Ve]]]),P("span",_j,Ut(Ve),1)]))],64))),128)),s.value||o.value?(Ie(),je("div",wj,[P("div",xj,[jn(P("input",{type:"text","onUpdate:modelValue":se[25]||(se[25]=ke=>c.name=ke),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[di,c.name]]),P("button",{onClick:Ee,disabled:!c.name||f.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(Ie(),je("svg",Sj,se[61]||(se[61]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ie(),je("svg",Cj,se[60]||(se[60]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,Lj)])])):Kt("",!0)])]),P("div",Ej,[se[66]||(se[66]=P("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),P("div",Pj,[P("label",kj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":se[26]||(se[26]=ke=>$.shapeTypes.Polygon=ke),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.shapeTypes.Polygon]]),se[63]||(se[63]=P("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),P("label",Mj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":se[27]||(se[27]=ke=>$.shapeTypes.Line=ke),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.shapeTypes.Line]]),se[64]||(se[64]=P("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),P("label",Aj,[jn(P("input",{type:"checkbox","onUpdate:modelValue":se[28]||(se[28]=ke=>$.shapeTypes.Note=ke),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.shapeTypes.Note]]),se[65]||(se[65]=P("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),P("div",{class:"pt-4 mb-4"},[P("button",{onClick:_e,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Rinitialiser ")])])])):Kt("",!0)])])],2)}}}),A4=Vc(Tj,[["__scopeId","data-v-4fd4fe60"]]),Oj={class:"map-toolbar w-full"},Dj={class:"hidden md:flex items-center space-x-2"},Ij={class:"dropdown"},Nj={class:"dropdown-menu"},Bj=["onClick"],Rj={key:0,class:"border-l pl-2 flex-1"},Fj={class:"flex items-center"},jj={class:"plan-info"},zj={class:"plan-name"},Uj={key:0,class:"plan-description"},$j={class:"border-l pl-2 ml-auto"},Vj={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Hj={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Wj={key:"saving"},Gj={key:"success",class:"save-success-text"},qj={key:"default"},Yj={class:"md:hidden"},Zj={class:"flex justify-between items-center"},Kj={key:0,class:"truncate mx-2 text-sm font-medium"},Xj={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},Jj={class:"flex justify-between items-center mb-3 border-b pb-2"},Qj={class:"flex flex-col space-y-4"},ez={key:0,class:"flex flex-col pb-3 border-b"},tz={class:"text-sm font-semibold text-gray-800"},nz={key:0,class:"text-xs text-gray-600 mt-1"},rz={class:"flex flex-col"},iz={class:"grid grid-cols-3 gap-2"},sz=["onClick"],oz={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},az={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},lz={key:"saving"},uz={key:"success",class:"save-success-text"},cz={key:"default"},hz=_s({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view"],setup(t,{emit:e}){const n=t,r=e,{lastSave:i,planName:s,planDescription:o,saveStatus:a}=Ab(n),l=kt("Hybride"),c=kt(!1),f=D=>{const N=D.currentTarget,U=N.nextElementSibling;if(U&&U.classList.contains("dropdown-menu")){const G=N.getBoundingClientRect();U.style.top=`${G.bottom}px`,U.style.left=`${G.left}px`}},p={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},y=tr(()=>i.value?new Date(i.value).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),m=D=>{l.value=D,r("change-map-type",D),c.value=!1},C=()=>{r("create-new-plan"),c.value=!1},S=()=>{r("load-plan"),c.value=!1},T=()=>{r("save-plan"),c.value=!1},O=()=>{r("adjust-view"),c.value=!1};return Ks(()=>{const D=setInterval(()=>{window.dispatchEvent(new CustomEvent("geonote:savePlan"))},6e4);Au(()=>{clearInterval(D)})}),yi(a,D=>{D==="saving"&&window.dispatchEvent(new CustomEvent("geonote:savePlan"))}),(D,N)=>(Ie(),je("div",Oj,[P("div",Dj,[P("div",Ij,[P("button",{class:"btn-toolbar dropdown-toggle",onMouseover:f},[N[2]||(N[2]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),P("span",null,Ut(p[l.value]),1)],32),P("div",Nj,[(Ie(),je(bn,null,sr(p,(U,G)=>P("button",{key:G,class:Ei(["dropdown-item",{active:G===l.value}]),onClick:J=>m(G)},Ut(U),11,Bj)),64))])]),cn(s)?(Ie(),je("div",Rj,[P("div",Fj,[P("div",jj,[P("h2",zj,Ut(cn(s)),1),cn(o)?(Ie(),je("p",Uj,Ut(cn(o)),1)):Kt("",!0)])])])):Kt("",!0),P("div",{class:"border-l pl-2"},[P("div",{class:"flex items-center space-x-1"},[P("button",{onClick:C,class:"btn-toolbar",title:"Nouveau plan"},N[3]||(N[3]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),P("button",{onClick:S,class:"btn-toolbar",title:"Charger un plan"},N[4]||(N[4]=[lu('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-f1cdc164><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-f1cdc164></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-f1cdc164></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-f1cdc164></path></svg><span class="hidden lg:inline ml-1" data-v-f1cdc164>Charger</span>',2)])),P("button",{onClick:T,class:"btn-toolbar",title:"Enregistrer le plan"},N[5]||(N[5]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),P("div",{class:"border-l pl-2"},[P("div",{class:"flex items-center space-x-1"},[P("button",{onClick:O,class:"btn-toolbar",title:"Ajuster la vue"},N[6]||(N[6]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),P("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)]))])]),P("div",$j,[P("div",{class:Ei(["text-xs hidden lg:flex items-center",{"text-gray-500":!cn(a),"text-primary-600 font-medium":cn(a)==="success","text-blue-600 font-medium":cn(a)==="saving"}])},[cn(a)==="saving"?(Ie(),je("svg",Vj,N[7]||(N[7]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Kt("",!0),cn(a)==="success"?(Ie(),je("svg",Hj,N[8]||(N[8]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Kt("",!0),Kr(v2,{name:"fade-slide",mode:"out-in"},{default:Il(()=>[cn(a)==="saving"?(Ie(),je("span",Wj," Sauvegarde en cours... ")):cn(a)==="success"?(Ie(),je("span",Gj," Sauvegarde russie ! ")):(Ie(),je("span",qj," Dernire modification : "+Ut(y.value),1))]),_:1})],2)])]),P("div",Yj,[P("div",Zj,[P("button",{onClick:N[0]||(N[0]=U=>c.value=!c.value),class:"p-2 rounded-md border bg-white shadow-sm"},N[9]||(N[9]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),cn(s)?(Ie(),je("div",Kj,Ut(cn(s)),1)):Kt("",!0),P("div",{class:"flex space-x-2"},[P("button",{onClick:C,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[10]||(N[10]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),P("button",{onClick:T,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[11]||(N[11]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),P("button",{onClick:O,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},N[12]||(N[12]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),c.value?(Ie(),je("div",Xj,[P("div",Jj,[N[14]||(N[14]=P("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),P("button",{onClick:N[1]||(N[1]=U=>c.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},N[13]||(N[13]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",Qj,[cn(s)?(Ie(),je("div",ez,[P("h3",tz,Ut(cn(s)),1),cn(o)?(Ie(),je("p",nz,Ut(cn(o)),1)):Kt("",!0)])):Kt("",!0),P("div",rz,[N[15]||(N[15]=P("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),P("div",iz,[(Ie(),je(bn,null,sr(p,(U,G)=>P("button",{key:G,class:Ei(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":G===l.value}]),onClick:J=>m(G)},Ut(U),11,sz)),64))])]),P("div",{class:"flex flex-col"},[N[18]||(N[18]=P("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),P("div",{class:"grid grid-cols-2 gap-2"},[P("button",{onClick:C,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},N[16]||(N[16]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),zr(" Nouveau ")])),P("button",{onClick:S,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},N[17]||(N[17]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),P("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),P("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),zr(" Charger ")]))])]),P("div",{class:Ei(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!cn(a),"text-primary-600 font-medium":cn(a)==="success","text-blue-600 font-medium":cn(a)==="saving"}])},[cn(a)==="saving"?(Ie(),je("svg",oz,N[19]||(N[19]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Kt("",!0),cn(a)==="success"?(Ie(),je("svg",az,N[20]||(N[20]=[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Kt("",!0),Kr(v2,{name:"fade-slide",mode:"out-in"},{default:Il(()=>[cn(a)==="saving"?(Ie(),je("span",lz," Sauvegarde en cours... ")):cn(a)==="success"?(Ie(),je("span",uz," Sauvegarde russie ! ")):(Ie(),je("span",cz," Dernire modification : "+Ut(y.value),1))]),_:1})],2)])])):Kt("",!0)])]))}}),fz=Vc(hz,[["__scopeId","data-v-f1cdc164"]]);function zf(t,e={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"},n="Date non dfinie"){if(!t)return n;try{const r=new Date(t);return isNaN(r.getTime())?(console.warn("[formatDate] Date invalide:",t),"Date invalide"):new Intl.DateTimeFormat("fr-FR",e).format(r)}catch(r){return console.error("[formatDate] Erreur lors du formatage de la date:",r),"Date invalide"}}function dz(t){if(!t)return null;try{const e=new Date(t);return isNaN(e.getTime())?(console.warn("[parseDate] Date invalide:",t),null):e}catch(e){return console.error("[parseDate] Erreur lors de la cration de la date:",e),null}}const pz={class:"comment-thread"},gz={key:0,class:"space-y-3 mb-4"},mz={class:"flex justify-between items-start"},vz={class:"flex items-center"},yz={class:"font-medium text-sm text-gray-900"},bz={class:"flex items-center"},_z={class:"text-xs text-gray-500"},wz=["onClick"],xz={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},Lz={key:1,class:"text-center text-sm text-gray-500 italic my-4"},Cz={key:2,class:"mt-3"},Sz={class:"flex justify-end mt-2"},Ez=["disabled"],Pz={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},kz=_s({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;yi(()=>n.comments,C=>{},{deep:!0});const r=e,i=po(),s=yh(),o=ll(),a=kt(""),l=tr(()=>i.isEntreprise||i.isAdmin);function c(C){return i.user&&C.userId===i.user.id||i.isAdmin}async function f(){var C;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajout avec succs"),r("comment-added")}catch(S){if(console.error("Erreur lors de l'ajout du commentaire:",S),(C=S.response)!=null&&C.data){const T=S.response.data;T.note?o.error(`Erreur: ${T.note[0]}`):T.user?o.error(`Erreur: ${T.user[0]}`):T.text?o.error(`Erreur: ${T.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(C){var S;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,C),o.success("Commentaire supprim"),r("comment-deleted")}catch(T){if(console.error("Erreur lors de la suppression du commentaire:",T),(S=T.response)!=null&&S.data){const O=T.response.data;O.detail?o.error(`Erreur: ${O.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function y(C){switch(C){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function m(C){switch(C){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salari";case"visiteur":return"Visiteur";default:return C}}return(C,S)=>(Ie(),je("div",pz,[C.comments&&C.comments.length>0?(Ie(),je("div",gz,[(Ie(!0),je(bn,null,sr(C.comments,T=>(Ie(),je("div",{key:T.id,class:"bg-gray-50 rounded-lg p-3"},[P("div",mz,[P("div",vz,[P("div",yz,Ut(T.userName),1),P("span",{class:Ei(["ml-2 text-xs px-2 py-0.5 rounded-full",y(T.userRole)])},Ut(m(T.userRole)),3)]),P("div",bz,[P("span",_z,Ut(cn(zf)(T.createdAt)),1),c(T)?(Ie(),je("button",{key:0,onClick:Bl(O=>p(T.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},S[1]||(S[1]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,wz)):Kt("",!0)])]),P("p",xz,Ut(T.text),1)]))),128))])):(Ie(),je("div",Lz," Aucun commentaire pour le moment ")),l.value?(Ie(),je("div",Cz,[jn(P("textarea",{"onUpdate:modelValue":S[0]||(S[0]=T=>a.value=T),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[di,a.value]]),P("div",Sz,[P("button",{type:"button",onClick:Bl(f,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,Ez)])])):(Ie(),je("div",Pz," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),Mz={class:"photo-gallery"},Az={key:0,class:"grid grid-cols-2 gap-2 mb-4"},Tz=["src","onClick"],Oz={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},Dz={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},Iz=["onClick"],Nz={key:1,class:"text-center text-sm text-gray-500 italic my-4"},Bz={class:"flex space-x-2 mt-3"},Rz={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},Fz={class:"relative bg-gray-900",style:{height:"300px"}},jz=["src"],zz={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},Uz={key:1,class:"flex space-x-3"},$z={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},Vz={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},Hz=["src"],Wz=_s({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=yh(),s=ll(),o=kt(null),a=kt(null),l=kt(null);let c=null;const f=kt(!1),p=kt(!1),y=kt(null),m=kt(null);function C(ee){y.value=ee,f.value=!0}async function S(ee){var V;if(confirm("tes-vous sr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,ee),s.success("Photo supprime"),r("photo-deleted"),f.value&&((V=y.value)==null?void 0:V.id)===ee&&(f.value=!1,y.value=null)}catch(K){console.error("Erreur lors de la suppression de la photo:",K),s.error("Erreur lors de la suppression de la photo")}}function T(){l.value&&l.value.click()}async function O(ee){const V=ee.target;if(!V.files||V.files.length===0)return;const K=V.files[0];if(!K.type.startsWith("image/")){s.error("Le fichier doit tre une image");return}if(K.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const pe=await D(K);await i.addPhoto(n.noteId,{url:pe}),V.value="",s.success("Photo ajoute"),r("photo-added")}catch(pe){console.error("Erreur lors de l'ajout de la photo:",pe),s.error("Erreur lors de l'ajout de la photo")}}function D(ee){return new Promise((V,K)=>{const pe=new FileReader;pe.onload=()=>V(pe.result),pe.onerror=K,pe.readAsDataURL(ee)})}yi(p,async ee=>{if(ee){m.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de camra non supporte sur ce navigateur");const V={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(V),o.value&&(o.value.srcObject=c,await new Promise(K=>{o.value.onloadedmetadata=()=>{o.value.play().then(K)}}))}catch(V){console.error("Erreur lors de l'accs  la camra:",V);let K="Impossible d'accder  la camra";V.name==="NotAllowedError"?K="L'accs  la camra a t refus. Veuillez vrifier vos permissions.":V.name==="NotFoundError"?K="Aucune camra n'a t trouve sur votre appareil.":V.name==="NotSupportedError"&&(K="Votre navigateur ne supporte pas l'accs  la camra."),s.error(K),p.value=!1}}else c&&(c.getTracks().forEach(V=>V.stop()),c=null)});function N(){if(!o.value||!a.value)return;const ee=o.value,V=a.value;V.width=ee.videoWidth,V.height=ee.videoHeight;const K=V.getContext("2d");K&&(K.drawImage(ee,0,0,V.width,V.height),m.value=V.toDataURL("image/jpeg"))}function U(){m.value=null}async function G(){if(m.value)try{await i.addPhoto(n.noteId,{url:m.value}),p.value=!1,s.success("Photo ajoute"),r("photo-added")}catch(ee){console.error("Erreur lors de l'ajout de la photo:",ee),s.error("Erreur lors de l'ajout de la photo")}}function J(){p.value=!1}return Au(()=>{c&&(c.getTracks().forEach(ee=>ee.stop()),c=null)}),(ee,V)=>(Ie(),je("div",Mz,[ee.photos&&ee.photos.length>0?(Ie(),je("div",Az,[(Ie(!0),je(bn,null,sr(ee.photos,K=>(Ie(),je("div",{key:K.id,class:"relative group"},[P("img",{src:K.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:pe=>C(K)},null,8,Tz),P("div",Oz,[P("div",Dz,[P("button",{onClick:Bl(pe=>S(K.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},V[2]||(V[2]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Iz)])])]))),128))])):(Ie(),je("div",Nz," Aucune photo pour le moment ")),P("div",Bz,[P("button",{type:"button",onClick:V[0]||(V[0]=K=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},V[3]||(V[3]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),zr(" Prendre une photo ")])),P("button",{type:"button",onClick:T,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},V[4]||(V[4]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),zr(" Tlverser ")])),P("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:O},null,544)]),p.value?(Ie(),je("div",Rz,[P("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[V[6]||(V[6]=P("h3",{class:"text-sm font-medium text-gray-700"},"Mode camra",-1)),P("button",{type:"button",onClick:J,class:"text-gray-400 hover:text-gray-500"},V[5]||(V[5]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",Fz,[m.value?(Ie(),je("img",{key:1,src:m.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,jz)):(Ie(),je("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),P("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),P("div",zz,[m.value?(Ie(),je("div",Uz,[P("button",{type:"button",onClick:U,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),P("button",{type:"button",onClick:G,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Ie(),je("button",{key:0,type:"button",onClick:N,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},V[7]||(V[7]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):Kt("",!0),f.value?(Ie(),je("div",$z,[P("div",Vz,[P("button",{type:"button",onClick:V[1]||(V[1]=K=>f.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},V[8]||(V[8]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),y.value?(Ie(),je("img",{key:0,src:y.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,Hz)):Kt("",!0)])])):Kt("",!0)]))}}),Gz=Vc(Wz,[["__scopeId","data-v-f87156b4"]]);function uy(t){return[t[1],t[0]]}function e_(t){return[t[1],t[0]]}function FS(t){return{type:"Point",coordinates:uy(t)}}function jS(t){if(Array.isArray(t))return t;if(typeof t=="object"&&t.type==="Point")return e_(t.coordinates);throw new Error("Format de localisation non reconnu")}function zS(t){if(Array.isArray(t))return uy(t);if(typeof t=="object"&&t.type==="Point")return t.coordinates;throw new Error("Format de localisation non reconnu")}function Gf(t){if(!t)return null;if(Array.isArray(t))return t.length>=2?{lat:t[0],lng:t[1]}:null;if("lat"in t&&"lng"in t){const{lat:e,lng:n}=t;return typeof e=="number"&&typeof n=="number"?{lat:e,lng:n}:null}if("type"in t&&"coordinates"in t){const{coordinates:e}=t;return Array.isArray(e)&&e.length>=2?{lat:e[1],lng:e[0]}:null}if("coordinates"in t){const{coordinates:e}=t;return Array.isArray(e)&&e.length>=2?{lat:e[1],lng:e[0]}:null}return null}function US(t,e){try{if(t&&typeof t.getLatLng=="function"){const n=t.getLatLng();if(n&&!isNaN(n.lat)&&!isNaN(n.lng))return{lat:n.lat,lng:n.lng}}else if(t&&t.location)return Gf(t.location);return e&&e.warning("La position est invalide ou manquante"),null}catch(n){return console.error("Error extracting coordinates:",n),e&&e.warning("Erreur lors de l'extraction des coordonnes"),null}}function $S(t){const e=Gf(t);return e?{type:"Point",coordinates:[e.lng,e.lat]}:null}function VS(t,e){const r=Km(e.lat-t.lat),i=Km(e.lng-t.lng),s=Math.sin(r/2)*Math.sin(r/2)+Math.cos(Km(t.lat))*Math.cos(Km(e.lat))*Math.sin(i/2)*Math.sin(i/2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}function Km(t){return t*Math.PI/180}const qz={leafletToGeoJSON:uy,geoJSONToLeaflet:e_,createGeoJSONPoint:FS,getLeafletCoordinates:jS,getGeoJSONCoordinates:zS,extractLatLng:Gf,safeGetLatLng:US,toGeoJSONPoint:$S,calculateDistance:VS},Yz=Object.freeze(Object.defineProperty({__proto__:null,calculateDistance:VS,createGeoJSONPoint:FS,default:qz,extractLatLng:Gf,geoJSONToLeaflet:e_,getGeoJSONCoordinates:zS,getLeafletCoordinates:jS,leafletToGeoJSON:uy,safeGetLatLng:US,toGeoJSONPoint:$S},Symbol.toStringTag,{value:"Module"})),Zz={class:"modal-header"},Kz={class:"modal-title"},Xz={class:"modal-tabs"},Jz={key:0,class:"badge"},Qz={key:0,class:"badge"},eU={class:"modal-content"},tU={key:0,class:"tab-content"},nU={class:"form-group"},rU={class:"form-group"},iU={key:0,class:"location-indicator"},sU={class:"form-group"},oU=["value"],aU={key:1,class:"form-group"},lU=["value"],uU={class:"form-group"},cU=["value"],hU={class:"form-group"},fU={class:"color-picker"},dU=["onClick"],pU={key:1,class:"tab-content"},gU={key:2,class:"tab-content"},mU=_s({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=yh(),s=ll(),o=po(),a=kt("info"),l=kt([]),c=kt(null),f=window.console;yi(a,async ie=>{ie==="comments"&&n.note&&n.note.id&&await m(n.note.id),ie==="photos"&&n.note&&n.note.id&&await C(n.note.id)});const p=kt({title:"",description:"",columnId:"",accessLevel:Fr.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],enterprise_id:null});function y(ie){if(!ie)return new Date().toISOString();try{const R=new Date(ie);return isNaN(R.getTime())?(f.warn("[NoteEditModal] Date invalide:",ie),new Date().toISOString()):R.toISOString()}catch(R){return f.error("[NoteEditModal] Erreur lors de la cration de la date:",R),new Date().toISOString()}}async function m(ie){try{const j=(await Yo.getComments(ie)).data.map(q=>({id:q.id,text:q.text,createdAt:q.created_at,userId:q.user,userName:q.user_name,userRole:q.user_role}));return n.note&&(i.updateNote(n.note.id,{comments:j}),p.value.comments=j),j}catch(R){return f.error("[NoteEditModal] Erreur lors du chargement des commentaires:",R),s.error("Erreur lors du chargement des commentaires"),[]}}async function C(ie){try{const j=(await Yo.getPhotos(ie)).data.map(q=>({id:q.id,url:q.image,createdAt:q.created_at,caption:q.caption}));return n.note&&(i.updateNote(n.note.id,{photos:j}),p.value.photos=j),j}catch(R){return f.error("[NoteEditModal] Erreur lors du chargement des photos:",R),s.error("Erreur lors du chargement des photos"),[]}}async function S(){if(o.isAdmin)try{const ie=await ca.getEntreprises();l.value=ie.data}catch(ie){f.error("[NoteEditModal] Erreur lors du chargement des entreprises:",ie),s.error("Erreur lors du chargement des entreprises")}}Ks(async()=>{var ie;if(await i.loadColumns(),await S(),n.note){const R=JSON.parse(JSON.stringify(n.note));R.createdAt=y(R.createdAt),R.updatedAt=y(R.updatedAt),p.value=R,o.isAdmin&&R.enterprise_id&&(c.value=R.enterprise_id),n.note.id&&await Promise.all([m(n.note.id),C(n.note.id)])}else if(n.isNewNote){if(p.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Fr.PRIVATE,style:{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:null},!o.isAdmin&&((ie=o.user)!=null&&ie.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id),n.location){const R=Gf(n.location);R?p.value.location=[R.lat,R.lng]:f.error("[NoteEditModal] Format de localisation non reconnu:",n.location)}}else f.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note")});const T=tr(()=>i.getSortedColumns),O=tr(()=>{var R;return((R=p.value.comments)==null?void 0:R.length)||0}),D=tr(()=>{var R;return((R=p.value.photos)==null?void 0:R.length)||0}),N=[{id:Fr.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:Fr.COMPANY,title:"Entreprise",description:"Visible par l'entreprise"},{id:Fr.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et ses salaris"},{id:Fr.VISITOR,title:"Visiteurs",description:"Visible par l'entreprise, ses salaris et ses visiteurs"}],U=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],G=ie=>{var R;if(p.value.style?(p.value.style.color=ie,p.value.style.fillColor=ie):p.value.style={color:ie,weight:2,opacity:1,fillColor:ie,fillOpacity:.6,radius:8},p.value.color=ie,(R=n.note)!=null&&R.id){const j=new CustomEvent("geonote:updateStyle",{detail:{noteId:n.note.id,style:{color:ie,fillColor:ie}}});window.dispatchEvent(j);const q=new CustomEvent("geonote:update",{detail:{noteId:n.note.id,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style}}});window.dispatchEvent(q)}},J=()=>{var ie,R,j,q,re,xe,be,_e,Z,ae;p.value={title:((ie=n.note)==null?void 0:ie.title)||"",description:((R=n.note)==null?void 0:R.description)||"",columnId:((j=n.note)==null?void 0:j.columnId)||"",accessLevel:((q=n.note)==null?void 0:q.accessLevel)||"private",style:((re=n.note)==null?void 0:re.style)||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},location:(()=>{var de;const ce=n.location||((de=n.note)==null?void 0:de.location);if(ce){const ge=Gf(ce);return ge?[ge.lat,ge.lng]:null}return null})(),comments:((xe=n.note)==null?void 0:xe.comments)||[],photos:((be=n.note)==null?void 0:be.photos)||[],enterprise_id:((_e=n.note)==null?void 0:_e.enterprise_id)||null},o.isAdmin&&((Z=n.note)!=null&&Z.enterprise_id)&&(c.value=n.note.enterprise_id),!o.isAdmin&&!p.value.enterprise_id&&((ae=o.user)!=null&&ae.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id)};Ks(()=>{J()}),yi(()=>n.note,()=>{J()},{deep:!0});function ee(){r("close")}async function V(){n.note&&n.note.id&&await m(n.note.id)}async function K(){n.note&&n.note.id&&await C(n.note.id)}async function pe(){n.note&&n.note.id&&await m(n.note.id)}async function $(){n.note&&n.note.id&&await C(n.note.id)}async function H(){var ie,R;try{const j=p.value.style.color;p.value.style={...p.value.style,color:j,fillColor:j,weight:2,opacity:1,fillOpacity:.6,radius:8};const q={title:p.value.title,description:p.value.description,columnId:p.value.columnId,style:p.value.style,access_level:p.value.accessLevel,comments:p.value.comments||[],photos:p.value.photos||[],color:j,enterprise_id:o.isAdmin?c.value:p.value.enterprise_id};if(!o.isAdmin&&((ie=o.user)!=null&&ie.enterprise_id)&&(q.enterprise_id=o.user.enterprise_id),p.value.location){const xe=Gf(p.value.location);xe&&(q.location={type:"Point",coordinates:[xe.lng,xe.lat]})}let re;if((R=n.note)!=null&&R.id){const xe=n.note.backendId||n.note.id;q.backendId=n.note.backendId,re=(await Yo.updateNote(xe,q)).data,i.updateNote(xe,{...p.value,...re,accessLevel:p.value.accessLevel,style:p.value.style,color:j,updatedAt:new Date().toISOString(),enterprise_id:q.enterprise_id,enterprise_name:p.value.enterprise_name});const _e=n.note.leafletId||n.note.id,Z=new CustomEvent("geonote:update",{detail:{noteId:_e,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style,color:j}}});window.dispatchEvent(Z),s.success("Note mise  jour avec succs")}else{if(re=(await Yo.createNote(q)).data,!re.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const be=i.getDefaultColumn,_e={...q,id:re.id,columnId:q.columnId||be.id,accessLevel:p.value.accessLevel,style:q.style,color:j};i.addNote(_e),s.success("Note cre avec succs")}re&&(!re.comments&&p.value.comments&&(re.comments=p.value.comments),!re.photos&&p.value.photos&&(re.photos=p.value.photos),re.color=j,re.style={...re.style,color:j,fillColor:j}),r("save",re),r("close")}catch(j){f.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",j),s.error("Erreur lors de la sauvegarde de la note")}}function oe(ie){ie.stopPropagation()}return(ie,R)=>{var j;return Ie(),je("div",{class:"modal-overlay",onClick:oe},[P("div",{class:"modal-container",onClick:R[8]||(R[8]=Bl(()=>{},["stop"]))},[P("form",{onSubmit:Bl(H,["prevent"]),class:"modal-form"},[P("div",Zz,[P("h3",Kz,Ut((j=ie.note)!=null&&j.id?"Modifier la note":"Nouvelle note"),1),P("button",{type:"button",onClick:ee,class:"close-button"},R[9]||(R[9]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",Xz,[P("button",{type:"button",onClick:R[0]||(R[0]=q=>a.value="info"),class:Ei(["tab-button",{active:a.value==="info"}])}," Informations ",2),P("button",{type:"button",onClick:R[1]||(R[1]=q=>a.value="comments"),class:Ei(["tab-button",{active:a.value==="comments"}])},[R[10]||(R[10]=zr(" Commentaires ")),O.value>0?(Ie(),je("span",Jz,Ut(O.value),1)):Kt("",!0)],2),P("button",{type:"button",onClick:R[2]||(R[2]=q=>a.value="photos"),class:Ei(["tab-button",{active:a.value==="photos"}])},[R[11]||(R[11]=zr(" Photos ")),D.value>0?(Ie(),je("span",Qz,Ut(D.value),1)):Kt("",!0)],2)]),P("div",eU,[a.value==="info"?(Ie(),je("div",tU,[P("div",nU,[R[12]||(R[12]=P("label",{for:"title"},"Titre",-1)),jn(P("input",{type:"text",id:"title","onUpdate:modelValue":R[3]||(R[3]=q=>p.value.title=q),required:""},null,512),[[di,p.value.title]])]),P("div",rU,[R[13]||(R[13]=P("label",{for:"description"},"Description",-1)),jn(P("textarea",{id:"description","onUpdate:modelValue":R[4]||(R[4]=q=>p.value.description=q),rows:"3"},null,512),[[di,p.value.description]])]),p.value.location?(Ie(),je("div",iU,R[14]||(R[14]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1),P("span",null,"Note golocalise",-1)]))):Kt("",!0),P("div",sU,[R[15]||(R[15]=P("label",{for:"column"},"tat",-1)),jn(P("select",{id:"column","onUpdate:modelValue":R[5]||(R[5]=q=>p.value.columnId=q)},[(Ie(!0),je(bn,null,sr(T.value,q=>(Ie(),je("option",{key:q.id,value:q.id},Ut(q.title),9,oU))),128))],512),[[os,p.value.columnId]])]),cn(o).isAdmin?(Ie(),je("div",aU,[R[17]||(R[17]=P("label",{for:"enterprise"},"Entreprise",-1)),jn(P("select",{id:"enterprise","onUpdate:modelValue":R[6]||(R[6]=q=>c.value=q)},[R[16]||(R[16]=P("option",{value:null},"Slectionner une entreprise",-1)),(Ie(!0),je(bn,null,sr(l.value,q=>(Ie(),je("option",{key:q.id,value:q.id},Ut(q.company_name||`${q.first_name} ${q.last_name}`),9,lU))),128))],512),[[os,c.value]])])):Kt("",!0),P("div",uU,[R[18]||(R[18]=P("label",{for:"accessLevel"},"Niveau d'accs",-1)),jn(P("select",{id:"accessLevel","onUpdate:modelValue":R[7]||(R[7]=q=>p.value.accessLevel=q)},[(Ie(),je(bn,null,sr(N,q=>P("option",{key:q.id,value:q.id},Ut(q.title)+" - "+Ut(q.description),9,cU)),64))],512),[[os,p.value.accessLevel]])]),P("div",hU,[R[19]||(R[19]=P("label",null,"Couleur",-1)),P("div",fU,[(Ie(),je(bn,null,sr(U,q=>P("div",{key:q,class:Ei(["color-option",{selected:p.value.style.color===q}]),style:Rl({backgroundColor:q}),onClick:re=>G(q)},null,14,dU)),64))])])])):a.value==="comments"?(Ie(),je("div",pU,[ie.note?(Ie(),Lo(kz,{key:0,noteId:ie.note.id,comments:p.value.comments||[],onCommentAdded:V,onCommentDeleted:pe},null,8,["noteId","comments"])):Kt("",!0)])):a.value==="photos"?(Ie(),je("div",gU,[ie.note?(Ie(),Lo(Gz,{key:0,noteId:ie.note.id,photos:p.value.photos||[],onPhotoAdded:K,onPhotoDeleted:$},null,8,["noteId","photos"])):Kt("",!0)])):Kt("",!0)]),P("div",{class:"modal-footer"},[R[20]||(R[20]=P("button",{type:"submit",class:"primary-button"},"Enregistrer",-1)),P("button",{type:"button",onClick:ee,class:"secondary-button"},"Annuler")])],32)])])}}}),HS=Vc(mU,[["__scopeId","data-v-972a86f5"]]);(()=>{var xn,Wn;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(h,g)=>()=>(g||h((g={exports:{}}).exports,g),g.exports),a=(h,g,_,x)=>{if(g&&typeof g=="object"||typeof g=="function")for(let k of r(g))!s.call(h,k)&&k!==_&&e(h,k,{get:()=>g[k],enumerable:!(x=n(g,k))||x.enumerable});return h},l=(h,g,_)=>(_=h!=null?t(i(h)):{},a(g||!h||!h.__esModule?e(_,"default",{value:h,enumerable:!0}):_,h)),c=o((h,g)=>{function _(){this.__data__=[],this.size=0}g.exports=_}),f=o((h,g)=>{function _(x,k){return x===k||x!==x&&k!==k}g.exports=_}),p=o((h,g)=>{var _=f();function x(k,B){for(var W=k.length;W--;)if(_(k[W][0],B))return W;return-1}g.exports=x}),y=o((h,g)=>{var _=p(),x=Array.prototype,k=x.splice;function B(W){var X=this.__data__,he=_(X,W);if(he<0)return!1;var we=X.length-1;return he==we?X.pop():k.call(X,he,1),--this.size,!0}g.exports=B}),m=o((h,g)=>{var _=p();function x(k){var B=this.__data__,W=_(B,k);return W<0?void 0:B[W][1]}g.exports=x}),C=o((h,g)=>{var _=p();function x(k){return _(this.__data__,k)>-1}g.exports=x}),S=o((h,g)=>{var _=p();function x(k,B){var W=this.__data__,X=_(W,k);return X<0?(++this.size,W.push([k,B])):W[X][1]=B,this}g.exports=x}),T=o((h,g)=>{var _=c(),x=y(),k=m(),B=C(),W=S();function X(he){var we=-1,Ge=he==null?0:he.length;for(this.clear();++we<Ge;){var ze=he[we];this.set(ze[0],ze[1])}}X.prototype.clear=_,X.prototype.delete=x,X.prototype.get=k,X.prototype.has=B,X.prototype.set=W,g.exports=X}),O=o((h,g)=>{var _=T();function x(){this.__data__=new _,this.size=0}g.exports=x}),D=o((h,g)=>{function _(x){var k=this.__data__,B=k.delete(x);return this.size=k.size,B}g.exports=_}),N=o((h,g)=>{function _(x){return this.__data__.get(x)}g.exports=_}),U=o((h,g)=>{function _(x){return this.__data__.has(x)}g.exports=_}),G=o((h,g)=>{var _=typeof Zo=="object"&&Zo&&Zo.Object===Object&&Zo;g.exports=_}),J=o((h,g)=>{var _=G(),x=typeof self=="object"&&self&&self.Object===Object&&self,k=_||x||Function("return this")();g.exports=k}),ee=o((h,g)=>{var _=J(),x=_.Symbol;g.exports=x}),V=o((h,g)=>{var _=ee(),x=Object.prototype,k=x.hasOwnProperty,B=x.toString,W=_?_.toStringTag:void 0;function X(he){var we=k.call(he,W),Ge=he[W];try{he[W]=void 0;var ze=!0}catch{}var mt=B.call(he);return ze&&(we?he[W]=Ge:delete he[W]),mt}g.exports=X}),K=o((h,g)=>{var _=Object.prototype,x=_.toString;function k(B){return x.call(B)}g.exports=k}),pe=o((h,g)=>{var _=ee(),x=V(),k=K(),B="[object Null]",W="[object Undefined]",X=_?_.toStringTag:void 0;function he(we){return we==null?we===void 0?W:B:X&&X in Object(we)?x(we):k(we)}g.exports=he}),$=o((h,g)=>{function _(x){var k=typeof x;return x!=null&&(k=="object"||k=="function")}g.exports=_}),H=o((h,g)=>{var _=pe(),x=$(),k="[object AsyncFunction]",B="[object Function]",W="[object GeneratorFunction]",X="[object Proxy]";function he(we){if(!x(we))return!1;var Ge=_(we);return Ge==B||Ge==W||Ge==k||Ge==X}g.exports=he}),oe=o((h,g)=>{var _=J(),x=_["__core-js_shared__"];g.exports=x}),ie=o((h,g)=>{var _=oe(),x=function(){var B=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return B?"Symbol(src)_1."+B:""}();function k(B){return!!x&&x in B}g.exports=k}),R=o((h,g)=>{var _=Function.prototype,x=_.toString;function k(B){if(B!=null){try{return x.call(B)}catch{}try{return B+""}catch{}}return""}g.exports=k}),j=o((h,g)=>{var _=H(),x=ie(),k=$(),B=R(),W=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,he=Function.prototype,we=Object.prototype,Ge=he.toString,ze=we.hasOwnProperty,mt=RegExp("^"+Ge.call(ze).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function At(Gt){if(!k(Gt)||x(Gt))return!1;var dn=_(Gt)?mt:X;return dn.test(B(Gt))}g.exports=At}),q=o((h,g)=>{function _(x,k){return x==null?void 0:x[k]}g.exports=_}),re=o((h,g)=>{var _=j(),x=q();function k(B,W){var X=x(B,W);return _(X)?X:void 0}g.exports=k}),xe=o((h,g)=>{var _=re(),x=J(),k=_(x,"Map");g.exports=k}),be=o((h,g)=>{var _=re(),x=_(Object,"create");g.exports=x}),_e=o((h,g)=>{var _=be();function x(){this.__data__=_?_(null):{},this.size=0}g.exports=x}),Z=o((h,g)=>{function _(x){var k=this.has(x)&&delete this.__data__[x];return this.size-=k?1:0,k}g.exports=_}),ae=o((h,g)=>{var _=be(),x="__lodash_hash_undefined__",k=Object.prototype,B=k.hasOwnProperty;function W(X){var he=this.__data__;if(_){var we=he[X];return we===x?void 0:we}return B.call(he,X)?he[X]:void 0}g.exports=W}),ce=o((h,g)=>{var _=be(),x=Object.prototype,k=x.hasOwnProperty;function B(W){var X=this.__data__;return _?X[W]!==void 0:k.call(X,W)}g.exports=B}),de=o((h,g)=>{var _=be(),x="__lodash_hash_undefined__";function k(B,W){var X=this.__data__;return this.size+=this.has(B)?0:1,X[B]=_&&W===void 0?x:W,this}g.exports=k}),ge=o((h,g)=>{var _=_e(),x=Z(),k=ae(),B=ce(),W=de();function X(he){var we=-1,Ge=he==null?0:he.length;for(this.clear();++we<Ge;){var ze=he[we];this.set(ze[0],ze[1])}}X.prototype.clear=_,X.prototype.delete=x,X.prototype.get=k,X.prototype.has=B,X.prototype.set=W,g.exports=X}),Ee=o((h,g)=>{var _=ge(),x=T(),k=xe();function B(){this.size=0,this.__data__={hash:new _,map:new(k||x),string:new _}}g.exports=B}),Ue=o((h,g)=>{function _(x){var k=typeof x;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?x!=="__proto__":x===null}g.exports=_}),Ne=o((h,g)=>{var _=Ue();function x(k,B){var W=k.__data__;return _(B)?W[typeof B=="string"?"string":"hash"]:W.map}g.exports=x}),rt=o((h,g)=>{var _=Ne();function x(k){var B=_(this,k).delete(k);return this.size-=B?1:0,B}g.exports=x}),gt=o((h,g)=>{var _=Ne();function x(k){return _(this,k).get(k)}g.exports=x}),_t=o((h,g)=>{var _=Ne();function x(k){return _(this,k).has(k)}g.exports=x}),le=o((h,g)=>{var _=Ne();function x(k,B){var W=_(this,k),X=W.size;return W.set(k,B),this.size+=W.size==X?0:1,this}g.exports=x}),se=o((h,g)=>{var _=Ee(),x=rt(),k=gt(),B=_t(),W=le();function X(he){var we=-1,Ge=he==null?0:he.length;for(this.clear();++we<Ge;){var ze=he[we];this.set(ze[0],ze[1])}}X.prototype.clear=_,X.prototype.delete=x,X.prototype.get=k,X.prototype.has=B,X.prototype.set=W,g.exports=X}),ue=o((h,g)=>{var _=T(),x=xe(),k=se(),B=200;function W(X,he){var we=this.__data__;if(we instanceof _){var Ge=we.__data__;if(!x||Ge.length<B-1)return Ge.push([X,he]),this.size=++we.size,this;we=this.__data__=new k(Ge)}return we.set(X,he),this.size=we.size,this}g.exports=W}),Q=o((h,g)=>{var _=T(),x=O(),k=D(),B=N(),W=U(),X=ue();function he(we){var Ge=this.__data__=new _(we);this.size=Ge.size}he.prototype.clear=x,he.prototype.delete=k,he.prototype.get=B,he.prototype.has=W,he.prototype.set=X,g.exports=he}),ke=o((h,g)=>{var _=re(),x=function(){try{var k=_(Object,"defineProperty");return k({},"",{}),k}catch{}}();g.exports=x}),Ve=o((h,g)=>{var _=ke();function x(k,B,W){B=="__proto__"&&_?_(k,B,{configurable:!0,enumerable:!0,value:W,writable:!0}):k[B]=W}g.exports=x}),Xe=o((h,g)=>{var _=Ve(),x=f();function k(B,W,X){(X!==void 0&&!x(B[W],X)||X===void 0&&!(W in B))&&_(B,W,X)}g.exports=k}),lt=o((h,g)=>{function _(x){return function(k,B,W){for(var X=-1,he=Object(k),we=W(k),Ge=we.length;Ge--;){var ze=we[x?Ge:++X];if(B(he[ze],ze,he)===!1)break}return k}}g.exports=_}),at=o((h,g)=>{var _=lt(),x=_();g.exports=x}),pt=o((h,g)=>{var _=J(),x=typeof h=="object"&&h&&!h.nodeType&&h,k=x&&typeof g=="object"&&g&&!g.nodeType&&g,B=k&&k.exports===x,W=B?_.Buffer:void 0,X=W?W.allocUnsafe:void 0;function he(we,Ge){if(Ge)return we.slice();var ze=we.length,mt=X?X(ze):new we.constructor(ze);return we.copy(mt),mt}g.exports=he}),jt=o((h,g)=>{var _=J(),x=_.Uint8Array;g.exports=x}),Bt=o((h,g)=>{var _=jt();function x(k){var B=new k.constructor(k.byteLength);return new _(B).set(new _(k)),B}g.exports=x}),qt=o((h,g)=>{var _=Bt();function x(k,B){var W=B?_(k.buffer):k.buffer;return new k.constructor(W,k.byteOffset,k.length)}g.exports=x}),Jt=o((h,g)=>{function _(x,k){var B=-1,W=x.length;for(k||(k=Array(W));++B<W;)k[B]=x[B];return k}g.exports=_}),gn=o((h,g)=>{var _=$(),x=Object.create,k=function(){function B(){}return function(W){if(!_(W))return{};if(x)return x(W);B.prototype=W;var X=new B;return B.prototype=void 0,X}}();g.exports=k}),Cn=o((h,g)=>{function _(x,k){return function(B){return x(k(B))}}g.exports=_}),Ye=o((h,g)=>{var _=Cn(),x=_(Object.getPrototypeOf,Object);g.exports=x}),st=o((h,g)=>{var _=Object.prototype;function x(k){var B=k&&k.constructor,W=typeof B=="function"&&B.prototype||_;return k===W}g.exports=x}),Qe=o((h,g)=>{var _=gn(),x=Ye(),k=st();function B(W){return typeof W.constructor=="function"&&!k(W)?_(x(W)):{}}g.exports=B}),$t=o((h,g)=>{function _(x){return x!=null&&typeof x=="object"}g.exports=_}),Yt=o((h,g)=>{var _=pe(),x=$t(),k="[object Arguments]";function B(W){return x(W)&&_(W)==k}g.exports=B}),wn=o((h,g)=>{var _=Yt(),x=$t(),k=Object.prototype,B=k.hasOwnProperty,W=k.propertyIsEnumerable,X=_(function(){return arguments}())?_:function(he){return x(he)&&B.call(he,"callee")&&!W.call(he,"callee")};g.exports=X}),mn=o((h,g)=>{var _=Array.isArray;g.exports=_}),_n=o((h,g)=>{var _=9007199254740991;function x(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=_}g.exports=x}),Rn=o((h,g)=>{var _=H(),x=_n();function k(B){return B!=null&&x(B.length)&&!_(B)}g.exports=k}),vn=o((h,g)=>{var _=Rn(),x=$t();function k(B){return x(B)&&_(B)}g.exports=k}),tn=o((h,g)=>{function _(){return!1}g.exports=_}),hn=o((h,g)=>{var _=J(),x=tn(),k=typeof h=="object"&&h&&!h.nodeType&&h,B=k&&typeof g=="object"&&g&&!g.nodeType&&g,W=B&&B.exports===k,X=W?_.Buffer:void 0,he=X?X.isBuffer:void 0,we=he||x;g.exports=we}),Bn=o((h,g)=>{var _=pe(),x=Ye(),k=$t(),B="[object Object]",W=Function.prototype,X=Object.prototype,he=W.toString,we=X.hasOwnProperty,Ge=he.call(Object);function ze(mt){if(!k(mt)||_(mt)!=B)return!1;var At=x(mt);if(At===null)return!0;var Gt=we.call(At,"constructor")&&At.constructor;return typeof Gt=="function"&&Gt instanceof Gt&&he.call(Gt)==Ge}g.exports=ze}),Jn=o((h,g)=>{var _=pe(),x=_n(),k=$t(),B="[object Arguments]",W="[object Array]",X="[object Boolean]",he="[object Date]",we="[object Error]",Ge="[object Function]",ze="[object Map]",mt="[object Number]",At="[object Object]",Gt="[object RegExp]",dn="[object Set]",yn="[object String]",er="[object WeakMap]",We="[object ArrayBuffer]",qe="[object DataView]",ut="[object Float32Array]",It="[object Float64Array]",bt="[object Int8Array]",Tt="[object Int16Array]",fe="[object Int32Array]",Se="[object Uint8Array]",De="[object Uint8ClampedArray]",Oe="[object Uint16Array]",Re="[object Uint32Array]",Fe={};Fe[ut]=Fe[It]=Fe[bt]=Fe[Tt]=Fe[fe]=Fe[Se]=Fe[De]=Fe[Oe]=Fe[Re]=!0,Fe[B]=Fe[W]=Fe[We]=Fe[X]=Fe[qe]=Fe[he]=Fe[we]=Fe[Ge]=Fe[ze]=Fe[mt]=Fe[At]=Fe[Gt]=Fe[dn]=Fe[yn]=Fe[er]=!1;function tt(it){return k(it)&&x(it.length)&&!!Fe[_(it)]}g.exports=tt}),ar=o((h,g)=>{function _(x){return function(k){return x(k)}}g.exports=_}),zn=o((h,g)=>{var _=G(),x=typeof h=="object"&&h&&!h.nodeType&&h,k=x&&typeof g=="object"&&g&&!g.nodeType&&g,B=k&&k.exports===x,W=B&&_.process,X=function(){try{var he=k&&k.require&&k.require("util").types;return he||W&&W.binding&&W.binding("util")}catch{}}();g.exports=X}),Lr=o((h,g)=>{var _=Jn(),x=ar(),k=zn(),B=k&&k.isTypedArray,W=B?x(B):_;g.exports=W}),ns=o((h,g)=>{function _(x,k){if(!(k==="constructor"&&typeof x[k]=="function")&&k!="__proto__")return x[k]}g.exports=_}),ki=o((h,g)=>{var _=Ve(),x=f(),k=Object.prototype,B=k.hasOwnProperty;function W(X,he,we){var Ge=X[he];(!(B.call(X,he)&&x(Ge,we))||we===void 0&&!(he in X))&&_(X,he,we)}g.exports=W}),Ft=o((h,g)=>{var _=ki(),x=Ve();function k(B,W,X,he){var we=!X;X||(X={});for(var Ge=-1,ze=W.length;++Ge<ze;){var mt=W[Ge],At=he?he(X[mt],B[mt],mt,X,B):void 0;At===void 0&&(At=B[mt]),we?x(X,mt,At):_(X,mt,At)}return X}g.exports=k}),Je=o((h,g)=>{function _(x,k){for(var B=-1,W=Array(x);++B<x;)W[B]=k(B);return W}g.exports=_}),Lt=o((h,g)=>{var _=9007199254740991,x=/^(?:0|[1-9]\d*)$/;function k(B,W){var X=typeof B;return W=W??_,!!W&&(X=="number"||X!="symbol"&&x.test(B))&&B>-1&&B%1==0&&B<W}g.exports=k}),In=o((h,g)=>{var _=Je(),x=wn(),k=mn(),B=hn(),W=Lt(),X=Lr(),he=Object.prototype,we=he.hasOwnProperty;function Ge(ze,mt){var At=k(ze),Gt=!At&&x(ze),dn=!At&&!Gt&&B(ze),yn=!At&&!Gt&&!dn&&X(ze),er=At||Gt||dn||yn,We=er?_(ze.length,String):[],qe=We.length;for(var ut in ze)(mt||we.call(ze,ut))&&!(er&&(ut=="length"||dn&&(ut=="offset"||ut=="parent")||yn&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||W(ut,qe)))&&We.push(ut);return We}g.exports=Ge}),nr=o((h,g)=>{function _(x){var k=[];if(x!=null)for(var B in Object(x))k.push(B);return k}g.exports=_}),Nn=o((h,g)=>{var _=$(),x=st(),k=nr(),B=Object.prototype,W=B.hasOwnProperty;function X(he){if(!_(he))return k(he);var we=x(he),Ge=[];for(var ze in he)ze=="constructor"&&(we||!W.call(he,ze))||Ge.push(ze);return Ge}g.exports=X}),Zt=o((h,g)=>{var _=In(),x=Nn(),k=Rn();function B(W){return k(W)?_(W,!0):x(W)}g.exports=B}),Ze=o((h,g)=>{var _=Ft(),x=Zt();function k(B){return _(B,x(B))}g.exports=k}),un=o((h,g)=>{var _=Xe(),x=pt(),k=qt(),B=Jt(),W=Qe(),X=wn(),he=mn(),we=vn(),Ge=hn(),ze=H(),mt=$(),At=Bn(),Gt=Lr(),dn=ns(),yn=Ze();function er(We,qe,ut,It,bt,Tt,fe){var Se=dn(We,ut),De=dn(qe,ut),Oe=fe.get(De);if(Oe){_(We,ut,Oe);return}var Re=Tt?Tt(Se,De,ut+"",We,qe,fe):void 0,Fe=Re===void 0;if(Fe){var tt=he(De),it=!tt&&Ge(De),ft=!tt&&!it&&Gt(De);Re=De,tt||it||ft?he(Se)?Re=Se:we(Se)?Re=B(Se):it?(Fe=!1,Re=x(De,!0)):ft?(Fe=!1,Re=k(De,!0)):Re=[]:At(De)||X(De)?(Re=Se,X(Se)?Re=yn(Se):(!mt(Se)||ze(Se))&&(Re=W(De))):Fe=!1}Fe&&(fe.set(De,Re),bt(Re,De,It,Tt,fe),fe.delete(De)),_(We,ut,Re)}g.exports=er}),sn=o((h,g)=>{var _=Q(),x=Xe(),k=at(),B=un(),W=$(),X=Zt(),he=ns();function we(Ge,ze,mt,At,Gt){Ge!==ze&&k(ze,function(dn,yn){if(Gt||(Gt=new _),W(dn))B(Ge,ze,yn,mt,we,At,Gt);else{var er=At?At(he(Ge,yn),dn,yn+"",Ge,ze,Gt):void 0;er===void 0&&(er=dn),x(Ge,yn,er)}},X)}g.exports=we}),An=o((h,g)=>{function _(x){return x}g.exports=_}),Qn=o((h,g)=>{function _(x,k,B){switch(B.length){case 0:return x.call(k);case 1:return x.call(k,B[0]);case 2:return x.call(k,B[0],B[1]);case 3:return x.call(k,B[0],B[1],B[2])}return x.apply(k,B)}g.exports=_}),ir=o((h,g)=>{var _=Qn(),x=Math.max;function k(B,W,X){return W=x(W===void 0?B.length-1:W,0),function(){for(var he=arguments,we=-1,Ge=x(he.length-W,0),ze=Array(Ge);++we<Ge;)ze[we]=he[W+we];we=-1;for(var mt=Array(W+1);++we<W;)mt[we]=he[we];return mt[W]=X(ze),_(B,this,mt)}}g.exports=k}),Wr=o((h,g)=>{function _(x){return function(){return x}}g.exports=_}),Un=o((h,g)=>{var _=Wr(),x=ke(),k=An(),B=x?function(W,X){return x(W,"toString",{configurable:!0,enumerable:!1,value:_(X),writable:!0})}:k;g.exports=B}),li=o((h,g)=>{var _=800,x=16,k=Date.now;function B(W){var X=0,he=0;return function(){var we=k(),Ge=x-(we-he);if(he=we,Ge>0){if(++X>=_)return arguments[0]}else X=0;return W.apply(void 0,arguments)}}g.exports=B}),kr=o((h,g)=>{var _=Un(),x=li(),k=x(_);g.exports=k}),Do=o((h,g)=>{var _=An(),x=ir(),k=kr();function B(W,X){return k(x(W,X,_),W+"")}g.exports=B}),lr=o((h,g)=>{var _=f(),x=Rn(),k=Lt(),B=$();function W(X,he,we){if(!B(we))return!1;var Ge=typeof he;return(Ge=="number"?x(we)&&k(he,we.length):Ge=="string"&&he in we)?_(we[he],X):!1}g.exports=W}),br=o((h,g)=>{var _=Do(),x=lr();function k(B){return _(function(W,X){var he=-1,we=X.length,Ge=we>1?X[we-1]:void 0,ze=we>2?X[2]:void 0;for(Ge=B.length>3&&typeof Ge=="function"?(we--,Ge):void 0,ze&&x(X[0],X[1],ze)&&(Ge=we<3?void 0:Ge,we=1),W=Object(W);++he<we;){var mt=X[he];mt&&B(W,mt,he,Ge)}return W})}g.exports=k}),Gi=o((h,g)=>{var _=sn(),x=br(),k=x(function(B,W,X){_(B,W,X)});g.exports=k}),ws=o((h,g)=>{var _=pe(),x=$t(),k="[object Symbol]";function B(W){return typeof W=="symbol"||x(W)&&_(W)==k}g.exports=B}),zl=o((h,g)=>{var _=mn(),x=ws(),k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,B=/^\w*$/;function W(X,he){if(_(X))return!1;var we=typeof X;return we=="number"||we=="symbol"||we=="boolean"||X==null||x(X)?!0:B.test(X)||!k.test(X)||he!=null&&X in Object(he)}g.exports=W}),hu=o((h,g)=>{var _=se(),x="Expected a function";function k(B,W){if(typeof B!="function"||W!=null&&typeof W!="function")throw new TypeError(x);var X=function(){var he=arguments,we=W?W.apply(this,he):he[0],Ge=X.cache;if(Ge.has(we))return Ge.get(we);var ze=B.apply(this,he);return X.cache=Ge.set(we,ze)||Ge,ze};return X.cache=new(k.Cache||_),X}k.Cache=_,g.exports=k}),Wc=o((h,g)=>{var _=hu(),x=500;function k(B){var W=_(B,function(he){return X.size===x&&X.clear(),he}),X=W.cache;return W}g.exports=k}),fu=o((h,g)=>{var _=Wc(),x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,B=_(function(W){var X=[];return W.charCodeAt(0)===46&&X.push(""),W.replace(x,function(he,we,Ge,ze){X.push(Ge?ze.replace(k,"$1"):we||he)}),X});g.exports=B}),fc=o((h,g)=>{function _(x,k){for(var B=-1,W=x==null?0:x.length,X=Array(W);++B<W;)X[B]=k(x[B],B,x);return X}g.exports=_}),dc=o((h,g)=>{var _=ee(),x=fc(),k=mn(),B=ws(),W=_?_.prototype:void 0,X=W?W.toString:void 0;function he(we){if(typeof we=="string")return we;if(k(we))return x(we,he)+"";if(B(we))return X?X.call(we):"";var Ge=we+"";return Ge=="0"&&1/we==-1/0?"-0":Ge}g.exports=he}),ul=o((h,g)=>{var _=dc();function x(k){return k==null?"":_(k)}g.exports=x}),cl=o((h,g)=>{var _=mn(),x=zl(),k=fu(),B=ul();function W(X,he){return _(X)?X:x(X,he)?[X]:k(B(X))}g.exports=W}),Nu=o((h,g)=>{var _=ws();function x(k){if(typeof k=="string"||_(k))return k;var B=k+"";return B=="0"&&1/k==-1/0?"-0":B}g.exports=x}),pc=o((h,g)=>{var _=cl(),x=Nu();function k(B,W){W=_(W,B);for(var X=0,he=W.length;B!=null&&X<he;)B=B[x(W[X++])];return X&&X==he?B:void 0}g.exports=k}),So=o((h,g)=>{var _=pc();function x(k,B,W){var X=k==null?void 0:_(k,B);return X===void 0?W:X}g.exports=x}),Gr=o((h,g)=>{(function(_,x){typeof h=="object"&&typeof g<"u"?g.exports=x():(_=_||self).RBush=x()})(h,function(){function _(We,qe,ut,It,bt){(function Tt(fe,Se,De,Oe,Re){for(;Oe>De;){if(Oe-De>600){var Fe=Oe-De+1,tt=Se-De+1,it=Math.log(Fe),ft=.5*Math.exp(2*it/3),Ct=.5*Math.sqrt(it*ft*(Fe-ft)/Fe)*(tt-Fe/2<0?-1:1),St=Math.max(De,Math.floor(Se-tt*ft/Fe+Ct)),en=Math.min(Oe,Math.floor(Se+(Fe-tt)*ft/Fe+Ct));Tt(fe,Se,St,en,Re)}var On=fe[Se],Fn=De,Gn=Oe;for(x(fe,De,Se),Re(fe[Oe],On)>0&&x(fe,De,Oe);Fn<Gn;){for(x(fe,Fn,Gn),Fn++,Gn--;Re(fe[Fn],On)<0;)Fn++;for(;Re(fe[Gn],On)>0;)Gn--}Re(fe[De],On)===0?x(fe,De,Gn):x(fe,++Gn,Oe),Gn<=Se&&(De=Gn+1),Se<=Gn&&(Oe=Gn-1)}})(We,qe,ut||0,It||We.length-1,bt||k)}function x(We,qe,ut){var It=We[qe];We[qe]=We[ut],We[ut]=It}function k(We,qe){return We<qe?-1:We>qe?1:0}var B=function(We){We===void 0&&(We=9),this._maxEntries=Math.max(4,We),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function W(We,qe,ut){if(!ut)return qe.indexOf(We);for(var It=0;It<qe.length;It++)if(ut(We,qe[It]))return It;return-1}function X(We,qe){he(We,0,We.children.length,qe,We)}function he(We,qe,ut,It,bt){bt||(bt=yn(null)),bt.minX=1/0,bt.minY=1/0,bt.maxX=-1/0,bt.maxY=-1/0;for(var Tt=qe;Tt<ut;Tt++){var fe=We.children[Tt];we(bt,We.leaf?It(fe):fe)}return bt}function we(We,qe){return We.minX=Math.min(We.minX,qe.minX),We.minY=Math.min(We.minY,qe.minY),We.maxX=Math.max(We.maxX,qe.maxX),We.maxY=Math.max(We.maxY,qe.maxY),We}function Ge(We,qe){return We.minX-qe.minX}function ze(We,qe){return We.minY-qe.minY}function mt(We){return(We.maxX-We.minX)*(We.maxY-We.minY)}function At(We){return We.maxX-We.minX+(We.maxY-We.minY)}function Gt(We,qe){return We.minX<=qe.minX&&We.minY<=qe.minY&&qe.maxX<=We.maxX&&qe.maxY<=We.maxY}function dn(We,qe){return qe.minX<=We.maxX&&qe.minY<=We.maxY&&qe.maxX>=We.minX&&qe.maxY>=We.minY}function yn(We){return{children:We,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function er(We,qe,ut,It,bt){for(var Tt=[qe,ut];Tt.length;)if(!((ut=Tt.pop())-(qe=Tt.pop())<=It)){var fe=qe+Math.ceil((ut-qe)/It/2)*It;_(We,fe,qe,ut,bt),Tt.push(qe,fe,fe,ut)}}return B.prototype.all=function(){return this._all(this.data,[])},B.prototype.search=function(We){var qe=this.data,ut=[];if(!dn(We,qe))return ut;for(var It=this.toBBox,bt=[];qe;){for(var Tt=0;Tt<qe.children.length;Tt++){var fe=qe.children[Tt],Se=qe.leaf?It(fe):fe;dn(We,Se)&&(qe.leaf?ut.push(fe):Gt(We,Se)?this._all(fe,ut):bt.push(fe))}qe=bt.pop()}return ut},B.prototype.collides=function(We){var qe=this.data;if(!dn(We,qe))return!1;for(var ut=[];qe;){for(var It=0;It<qe.children.length;It++){var bt=qe.children[It],Tt=qe.leaf?this.toBBox(bt):bt;if(dn(We,Tt)){if(qe.leaf||Gt(We,Tt))return!0;ut.push(bt)}}qe=ut.pop()}return!1},B.prototype.load=function(We){if(!We||!We.length)return this;if(We.length<this._minEntries){for(var qe=0;qe<We.length;qe++)this.insert(We[qe]);return this}var ut=this._build(We.slice(),0,We.length-1,0);if(this.data.children.length)if(this.data.height===ut.height)this._splitRoot(this.data,ut);else{if(this.data.height<ut.height){var It=this.data;this.data=ut,ut=It}this._insert(ut,this.data.height-ut.height-1,!0)}else this.data=ut;return this},B.prototype.insert=function(We){return We&&this._insert(We,this.data.height-1),this},B.prototype.clear=function(){return this.data=yn([]),this},B.prototype.remove=function(We,qe){if(!We)return this;for(var ut,It,bt,Tt=this.data,fe=this.toBBox(We),Se=[],De=[];Tt||Se.length;){if(Tt||(Tt=Se.pop(),It=Se[Se.length-1],ut=De.pop(),bt=!0),Tt.leaf){var Oe=W(We,Tt.children,qe);if(Oe!==-1)return Tt.children.splice(Oe,1),Se.push(Tt),this._condense(Se),this}bt||Tt.leaf||!Gt(Tt,fe)?It?(ut++,Tt=It.children[ut],bt=!1):Tt=null:(Se.push(Tt),De.push(ut),ut=0,It=Tt,Tt=Tt.children[0])}return this},B.prototype.toBBox=function(We){return We},B.prototype.compareMinX=function(We,qe){return We.minX-qe.minX},B.prototype.compareMinY=function(We,qe){return We.minY-qe.minY},B.prototype.toJSON=function(){return this.data},B.prototype.fromJSON=function(We){return this.data=We,this},B.prototype._all=function(We,qe){for(var ut=[];We;)We.leaf?qe.push.apply(qe,We.children):ut.push.apply(ut,We.children),We=ut.pop();return qe},B.prototype._build=function(We,qe,ut,It){var bt,Tt=ut-qe+1,fe=this._maxEntries;if(Tt<=fe)return X(bt=yn(We.slice(qe,ut+1)),this.toBBox),bt;It||(It=Math.ceil(Math.log(Tt)/Math.log(fe)),fe=Math.ceil(Tt/Math.pow(fe,It-1))),(bt=yn([])).leaf=!1,bt.height=It;var Se=Math.ceil(Tt/fe),De=Se*Math.ceil(Math.sqrt(fe));er(We,qe,ut,De,this.compareMinX);for(var Oe=qe;Oe<=ut;Oe+=De){var Re=Math.min(Oe+De-1,ut);er(We,Oe,Re,Se,this.compareMinY);for(var Fe=Oe;Fe<=Re;Fe+=Se){var tt=Math.min(Fe+Se-1,Re);bt.children.push(this._build(We,Fe,tt,It-1))}}return X(bt,this.toBBox),bt},B.prototype._chooseSubtree=function(We,qe,ut,It){for(;It.push(qe),!qe.leaf&&It.length-1!==ut;){for(var bt=1/0,Tt=1/0,fe=void 0,Se=0;Se<qe.children.length;Se++){var De=qe.children[Se],Oe=mt(De),Re=(Fe=We,tt=De,(Math.max(tt.maxX,Fe.maxX)-Math.min(tt.minX,Fe.minX))*(Math.max(tt.maxY,Fe.maxY)-Math.min(tt.minY,Fe.minY))-Oe);Re<Tt?(Tt=Re,bt=Oe<bt?Oe:bt,fe=De):Re===Tt&&Oe<bt&&(bt=Oe,fe=De)}qe=fe||qe.children[0]}var Fe,tt;return qe},B.prototype._insert=function(We,qe,ut){var It=ut?We:this.toBBox(We),bt=[],Tt=this._chooseSubtree(It,this.data,qe,bt);for(Tt.children.push(We),we(Tt,It);qe>=0&&bt[qe].children.length>this._maxEntries;)this._split(bt,qe),qe--;this._adjustParentBBoxes(It,bt,qe)},B.prototype._split=function(We,qe){var ut=We[qe],It=ut.children.length,bt=this._minEntries;this._chooseSplitAxis(ut,bt,It);var Tt=this._chooseSplitIndex(ut,bt,It),fe=yn(ut.children.splice(Tt,ut.children.length-Tt));fe.height=ut.height,fe.leaf=ut.leaf,X(ut,this.toBBox),X(fe,this.toBBox),qe?We[qe-1].children.push(fe):this._splitRoot(ut,fe)},B.prototype._splitRoot=function(We,qe){this.data=yn([We,qe]),this.data.height=We.height+1,this.data.leaf=!1,X(this.data,this.toBBox)},B.prototype._chooseSplitIndex=function(We,qe,ut){for(var It,bt,Tt,fe,Se,De,Oe,Re=1/0,Fe=1/0,tt=qe;tt<=ut-qe;tt++){var it=he(We,0,tt,this.toBBox),ft=he(We,tt,ut,this.toBBox),Ct=(bt=it,Tt=ft,fe=void 0,Se=void 0,De=void 0,Oe=void 0,fe=Math.max(bt.minX,Tt.minX),Se=Math.max(bt.minY,Tt.minY),De=Math.min(bt.maxX,Tt.maxX),Oe=Math.min(bt.maxY,Tt.maxY),Math.max(0,De-fe)*Math.max(0,Oe-Se)),St=mt(it)+mt(ft);Ct<Re?(Re=Ct,It=tt,Fe=St<Fe?St:Fe):Ct===Re&&St<Fe&&(Fe=St,It=tt)}return It||ut-qe},B.prototype._chooseSplitAxis=function(We,qe,ut){var It=We.leaf?this.compareMinX:Ge,bt=We.leaf?this.compareMinY:ze;this._allDistMargin(We,qe,ut,It)<this._allDistMargin(We,qe,ut,bt)&&We.children.sort(It)},B.prototype._allDistMargin=function(We,qe,ut,It){We.children.sort(It);for(var bt=this.toBBox,Tt=he(We,0,qe,bt),fe=he(We,ut-qe,ut,bt),Se=At(Tt)+At(fe),De=qe;De<ut-qe;De++){var Oe=We.children[De];we(Tt,We.leaf?bt(Oe):Oe),Se+=At(Tt)}for(var Re=ut-qe-1;Re>=qe;Re--){var Fe=We.children[Re];we(fe,We.leaf?bt(Fe):Fe),Se+=At(fe)}return Se},B.prototype._adjustParentBBoxes=function(We,qe,ut){for(var It=ut;It>=0;It--)we(qe[It],We)},B.prototype._condense=function(We){for(var qe=We.length-1,ut=void 0;qe>=0;qe--)We[qe].children.length===0?qe>0?(ut=We[qe-1].children).splice(ut.indexOf(We[qe]),1):this.clear():X(We[qe],this.toBBox)},B})}),hr=o(h=>{Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:h.earthRadius*100,centimetres:h.earthRadius*100,degrees:h.earthRadius/111325,feet:h.earthRadius*3.28084,inches:h.earthRadius*39.37,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:h.earthRadius*1e3,millimetres:h.earthRadius*1e3,nauticalmiles:h.earthRadius/1852,radians:1,yards:h.earthRadius*1.0936},h.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g(Oe,Re,Fe){Fe===void 0&&(Fe={});var tt={type:"Feature"};return(Fe.id===0||Fe.id)&&(tt.id=Fe.id),Fe.bbox&&(tt.bbox=Fe.bbox),tt.properties=Re||{},tt.geometry=Oe,tt}h.feature=g;function _(Oe,Re,Fe){switch(Oe){case"Point":return x(Re).geometry;case"LineString":return X(Re).geometry;case"Polygon":return B(Re).geometry;case"MultiPoint":return ze(Re).geometry;case"MultiLineString":return Ge(Re).geometry;case"MultiPolygon":return mt(Re).geometry;default:throw new Error(Oe+" is invalid")}}h.geometry=_;function x(Oe,Re,Fe){if(Fe===void 0&&(Fe={}),!Oe)throw new Error("coordinates is required");if(!Array.isArray(Oe))throw new Error("coordinates must be an Array");if(Oe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Tt(Oe[0])||!Tt(Oe[1]))throw new Error("coordinates must contain numbers");var tt={type:"Point",coordinates:Oe};return g(tt,Re,Fe)}h.point=x;function k(Oe,Re,Fe){return Fe===void 0&&(Fe={}),we(Oe.map(function(tt){return x(tt,Re)}),Fe)}h.points=k;function B(Oe,Re,Fe){Fe===void 0&&(Fe={});for(var tt=0,it=Oe;tt<it.length;tt++){var ft=it[tt];if(ft.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Ct=0;Ct<ft[ft.length-1].length;Ct++)if(ft[ft.length-1][Ct]!==ft[0][Ct])throw new Error("First and last Position are not equivalent.")}var St={type:"Polygon",coordinates:Oe};return g(St,Re,Fe)}h.polygon=B;function W(Oe,Re,Fe){return Fe===void 0&&(Fe={}),we(Oe.map(function(tt){return B(tt,Re)}),Fe)}h.polygons=W;function X(Oe,Re,Fe){if(Fe===void 0&&(Fe={}),Oe.length<2)throw new Error("coordinates must be an array of two or more positions");var tt={type:"LineString",coordinates:Oe};return g(tt,Re,Fe)}h.lineString=X;function he(Oe,Re,Fe){return Fe===void 0&&(Fe={}),we(Oe.map(function(tt){return X(tt,Re)}),Fe)}h.lineStrings=he;function we(Oe,Re){Re===void 0&&(Re={});var Fe={type:"FeatureCollection"};return Re.id&&(Fe.id=Re.id),Re.bbox&&(Fe.bbox=Re.bbox),Fe.features=Oe,Fe}h.featureCollection=we;function Ge(Oe,Re,Fe){Fe===void 0&&(Fe={});var tt={type:"MultiLineString",coordinates:Oe};return g(tt,Re,Fe)}h.multiLineString=Ge;function ze(Oe,Re,Fe){Fe===void 0&&(Fe={});var tt={type:"MultiPoint",coordinates:Oe};return g(tt,Re,Fe)}h.multiPoint=ze;function mt(Oe,Re,Fe){Fe===void 0&&(Fe={});var tt={type:"MultiPolygon",coordinates:Oe};return g(tt,Re,Fe)}h.multiPolygon=mt;function At(Oe,Re,Fe){Fe===void 0&&(Fe={});var tt={type:"GeometryCollection",geometries:Oe};return g(tt,Re,Fe)}h.geometryCollection=At;function Gt(Oe,Re){if(Re===void 0&&(Re=0),Re&&!(Re>=0))throw new Error("precision must be a positive number");var Fe=Math.pow(10,Re||0);return Math.round(Oe*Fe)/Fe}h.round=Gt;function dn(Oe,Re){Re===void 0&&(Re="kilometers");var Fe=h.factors[Re];if(!Fe)throw new Error(Re+" units is invalid");return Oe*Fe}h.radiansToLength=dn;function yn(Oe,Re){Re===void 0&&(Re="kilometers");var Fe=h.factors[Re];if(!Fe)throw new Error(Re+" units is invalid");return Oe/Fe}h.lengthToRadians=yn;function er(Oe,Re){return qe(yn(Oe,Re))}h.lengthToDegrees=er;function We(Oe){var Re=Oe%360;return Re<0&&(Re+=360),Re}h.bearingToAzimuth=We;function qe(Oe){var Re=Oe%(2*Math.PI);return Re*180/Math.PI}h.radiansToDegrees=qe;function ut(Oe){var Re=Oe%360;return Re*Math.PI/180}h.degreesToRadians=ut;function It(Oe,Re,Fe){if(Re===void 0&&(Re="kilometers"),Fe===void 0&&(Fe="kilometers"),!(Oe>=0))throw new Error("length must be a positive number");return dn(yn(Oe,Re),Fe)}h.convertLength=It;function bt(Oe,Re,Fe){if(Re===void 0&&(Re="meters"),Fe===void 0&&(Fe="kilometers"),!(Oe>=0))throw new Error("area must be a positive number");var tt=h.areaFactors[Re];if(!tt)throw new Error("invalid original units");var it=h.areaFactors[Fe];if(!it)throw new Error("invalid final units");return Oe/tt*it}h.convertArea=bt;function Tt(Oe){return!isNaN(Oe)&&Oe!==null&&!Array.isArray(Oe)}h.isNumber=Tt;function fe(Oe){return!!Oe&&Oe.constructor===Object}h.isObject=fe;function Se(Oe){if(!Oe)throw new Error("bbox is required");if(!Array.isArray(Oe))throw new Error("bbox must be an Array");if(Oe.length!==4&&Oe.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Oe.forEach(function(Re){if(!Tt(Re))throw new Error("bbox must only contain numbers")})}h.validateBBox=Se;function De(Oe){if(!Oe)throw new Error("id is required");if(["string","number"].indexOf(typeof Oe)===-1)throw new Error("id must be a number or a string")}h.validateId=De}),Ua=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=hr();function _(qe,ut,It){if(qe!==null)for(var bt,Tt,fe,Se,De,Oe,Re,Fe=0,tt=0,it,ft=qe.type,Ct=ft==="FeatureCollection",St=ft==="Feature",en=Ct?qe.features.length:1,On=0;On<en;On++){Re=Ct?qe.features[On].geometry:St?qe.geometry:qe,it=Re?Re.type==="GeometryCollection":!1,De=it?Re.geometries.length:1;for(var Fn=0;Fn<De;Fn++){var Gn=0,Jr=0;if(Se=it?Re.geometries[Fn]:Re,Se!==null){Oe=Se.coordinates;var ci=Se.type;switch(Fe=It&&(ci==="Polygon"||ci==="MultiPolygon")?1:0,ci){case null:break;case"Point":if(ut(Oe,tt,On,Gn,Jr)===!1)return!1;tt++,Gn++;break;case"LineString":case"MultiPoint":for(bt=0;bt<Oe.length;bt++){if(ut(Oe[bt],tt,On,Gn,Jr)===!1)return!1;tt++,ci==="MultiPoint"&&Gn++}ci==="LineString"&&Gn++;break;case"Polygon":case"MultiLineString":for(bt=0;bt<Oe.length;bt++){for(Tt=0;Tt<Oe[bt].length-Fe;Tt++){if(ut(Oe[bt][Tt],tt,On,Gn,Jr)===!1)return!1;tt++}ci==="MultiLineString"&&Gn++,ci==="Polygon"&&Jr++}ci==="Polygon"&&Gn++;break;case"MultiPolygon":for(bt=0;bt<Oe.length;bt++){for(Jr=0,Tt=0;Tt<Oe[bt].length;Tt++){for(fe=0;fe<Oe[bt][Tt].length-Fe;fe++){if(ut(Oe[bt][Tt][fe],tt,On,Gn,Jr)===!1)return!1;tt++}Jr++}Gn++}break;case"GeometryCollection":for(bt=0;bt<Se.geometries.length;bt++)if(_(Se.geometries[bt],ut,It)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function x(qe,ut,It,bt){var Tt=It;return _(qe,function(fe,Se,De,Oe,Re){Se===0&&It===void 0?Tt=fe:Tt=ut(Tt,fe,Se,De,Oe,Re)},bt),Tt}function k(qe,ut){var It;switch(qe.type){case"FeatureCollection":for(It=0;It<qe.features.length&&ut(qe.features[It].properties,It)!==!1;It++);break;case"Feature":ut(qe.properties,0);break}}function B(qe,ut,It){var bt=It;return k(qe,function(Tt,fe){fe===0&&It===void 0?bt=Tt:bt=ut(bt,Tt,fe)}),bt}function W(qe,ut){if(qe.type==="Feature")ut(qe,0);else if(qe.type==="FeatureCollection")for(var It=0;It<qe.features.length&&ut(qe.features[It],It)!==!1;It++);}function X(qe,ut,It){var bt=It;return W(qe,function(Tt,fe){fe===0&&It===void 0?bt=Tt:bt=ut(bt,Tt,fe)}),bt}function he(qe){var ut=[];return _(qe,function(It){ut.push(It)}),ut}function we(qe,ut){var It,bt,Tt,fe,Se,De,Oe,Re,Fe,tt,it=0,ft=qe.type==="FeatureCollection",Ct=qe.type==="Feature",St=ft?qe.features.length:1;for(It=0;It<St;It++){for(De=ft?qe.features[It].geometry:Ct?qe.geometry:qe,Re=ft?qe.features[It].properties:Ct?qe.properties:{},Fe=ft?qe.features[It].bbox:Ct?qe.bbox:void 0,tt=ft?qe.features[It].id:Ct?qe.id:void 0,Oe=De?De.type==="GeometryCollection":!1,Se=Oe?De.geometries.length:1,Tt=0;Tt<Se;Tt++){if(fe=Oe?De.geometries[Tt]:De,fe===null){if(ut(null,it,Re,Fe,tt)===!1)return!1;continue}switch(fe.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ut(fe,it,Re,Fe,tt)===!1)return!1;break}case"GeometryCollection":{for(bt=0;bt<fe.geometries.length;bt++)if(ut(fe.geometries[bt],it,Re,Fe,tt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}it++}}function Ge(qe,ut,It){var bt=It;return we(qe,function(Tt,fe,Se,De,Oe){fe===0&&It===void 0?bt=Tt:bt=ut(bt,Tt,fe,Se,De,Oe)}),bt}function ze(qe,ut){we(qe,function(It,bt,Tt,fe,Se){var De=It===null?null:It.type;switch(De){case null:case"Point":case"LineString":case"Polygon":return ut(g.feature(It,Tt,{bbox:fe,id:Se}),bt,0)===!1?!1:void 0}var Oe;switch(De){case"MultiPoint":Oe="Point";break;case"MultiLineString":Oe="LineString";break;case"MultiPolygon":Oe="Polygon";break}for(var Re=0;Re<It.coordinates.length;Re++){var Fe=It.coordinates[Re],tt={type:Oe,coordinates:Fe};if(ut(g.feature(tt,Tt),bt,Re)===!1)return!1}})}function mt(qe,ut,It){var bt=It;return ze(qe,function(Tt,fe,Se){fe===0&&Se===0&&It===void 0?bt=Tt:bt=ut(bt,Tt,fe,Se)}),bt}function At(qe,ut){ze(qe,function(It,bt,Tt){var fe=0;if(It.geometry){var Se=It.geometry.type;if(!(Se==="Point"||Se==="MultiPoint")){var De,Oe=0,Re=0,Fe=0;if(_(It,function(tt,it,ft,Ct,St){if(De===void 0||bt>Oe||Ct>Re||St>Fe){De=tt,Oe=bt,Re=Ct,Fe=St,fe=0;return}var en=g.lineString([De,tt],It.properties);if(ut(en,bt,Tt,St,fe)===!1)return!1;fe++,De=tt})===!1)return!1}}})}function Gt(qe,ut,It){var bt=It,Tt=!1;return At(qe,function(fe,Se,De,Oe,Re){Tt===!1&&It===void 0?bt=fe:bt=ut(bt,fe,Se,De,Oe,Re),Tt=!0}),bt}function dn(qe,ut){if(!qe)throw new Error("geojson is required");ze(qe,function(It,bt,Tt){if(It.geometry!==null){var fe=It.geometry.type,Se=It.geometry.coordinates;switch(fe){case"LineString":if(ut(It,bt,Tt,0,0)===!1)return!1;break;case"Polygon":for(var De=0;De<Se.length;De++)if(ut(g.lineString(Se[De],It.properties),bt,Tt,De)===!1)return!1;break}}})}function yn(qe,ut,It){var bt=It;return dn(qe,function(Tt,fe,Se,De){fe===0&&It===void 0?bt=Tt:bt=ut(bt,Tt,fe,Se,De)}),bt}function er(qe,ut){if(ut=ut||{},!g.isObject(ut))throw new Error("options is invalid");var It=ut.featureIndex||0,bt=ut.multiFeatureIndex||0,Tt=ut.geometryIndex||0,fe=ut.segmentIndex||0,Se=ut.properties,De;switch(qe.type){case"FeatureCollection":It<0&&(It=qe.features.length+It),Se=Se||qe.features[It].properties,De=qe.features[It].geometry;break;case"Feature":Se=Se||qe.properties,De=qe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":De=qe;break;default:throw new Error("geojson is invalid")}if(De===null)return null;var Oe=De.coordinates;switch(De.type){case"Point":case"MultiPoint":return null;case"LineString":return fe<0&&(fe=Oe.length+fe-1),g.lineString([Oe[fe],Oe[fe+1]],Se,ut);case"Polygon":return Tt<0&&(Tt=Oe.length+Tt),fe<0&&(fe=Oe[Tt].length+fe-1),g.lineString([Oe[Tt][fe],Oe[Tt][fe+1]],Se,ut);case"MultiLineString":return bt<0&&(bt=Oe.length+bt),fe<0&&(fe=Oe[bt].length+fe-1),g.lineString([Oe[bt][fe],Oe[bt][fe+1]],Se,ut);case"MultiPolygon":return bt<0&&(bt=Oe.length+bt),Tt<0&&(Tt=Oe[bt].length+Tt),fe<0&&(fe=Oe[bt][Tt].length-fe-1),g.lineString([Oe[bt][Tt][fe],Oe[bt][Tt][fe+1]],Se,ut)}throw new Error("geojson is invalid")}function We(qe,ut){if(ut=ut||{},!g.isObject(ut))throw new Error("options is invalid");var It=ut.featureIndex||0,bt=ut.multiFeatureIndex||0,Tt=ut.geometryIndex||0,fe=ut.coordIndex||0,Se=ut.properties,De;switch(qe.type){case"FeatureCollection":It<0&&(It=qe.features.length+It),Se=Se||qe.features[It].properties,De=qe.features[It].geometry;break;case"Feature":Se=Se||qe.properties,De=qe.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":De=qe;break;default:throw new Error("geojson is invalid")}if(De===null)return null;var Oe=De.coordinates;switch(De.type){case"Point":return g.point(Oe,Se,ut);case"MultiPoint":return bt<0&&(bt=Oe.length+bt),g.point(Oe[bt],Se,ut);case"LineString":return fe<0&&(fe=Oe.length+fe),g.point(Oe[fe],Se,ut);case"Polygon":return Tt<0&&(Tt=Oe.length+Tt),fe<0&&(fe=Oe[Tt].length+fe),g.point(Oe[Tt][fe],Se,ut);case"MultiLineString":return bt<0&&(bt=Oe.length+bt),fe<0&&(fe=Oe[bt].length+fe),g.point(Oe[bt][fe],Se,ut);case"MultiPolygon":return bt<0&&(bt=Oe.length+bt),Tt<0&&(Tt=Oe[bt].length+Tt),fe<0&&(fe=Oe[bt][Tt].length-fe),g.point(Oe[bt][Tt][fe],Se,ut)}throw new Error("geojson is invalid")}h.coordAll=he,h.coordEach=_,h.coordReduce=x,h.featureEach=W,h.featureReduce=X,h.findPoint=We,h.findSegment=er,h.flattenEach=ze,h.flattenReduce=mt,h.geomEach=we,h.geomReduce=Ge,h.lineEach=dn,h.lineReduce=yn,h.propEach=k,h.propReduce=B,h.segmentEach=At,h.segmentReduce=Gt}),fa=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=Ua();function _(x){var k=[1/0,1/0,-1/0,-1/0];return g.coordEach(x,function(B){k[0]>B[0]&&(k[0]=B[0]),k[1]>B[1]&&(k[1]=B[1]),k[2]<B[0]&&(k[2]=B[0]),k[3]<B[1]&&(k[3]=B[1])}),k}_.default=_,h.default=_}),Io=o((h,g)=>{var _=Gr(),x=hr(),k=Ua(),B=fa().default,W=k.featureEach;k.coordEach,x.polygon;var X=x.featureCollection;function he(we){var Ge=new _(we);return Ge.insert=function(ze){if(ze.type!=="Feature")throw new Error("invalid feature");return ze.bbox=ze.bbox?ze.bbox:B(ze),_.prototype.insert.call(this,ze)},Ge.load=function(ze){var mt=[];return Array.isArray(ze)?ze.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:B(At),mt.push(At)}):W(ze,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:B(At),mt.push(At)}),_.prototype.load.call(this,mt)},Ge.remove=function(ze,mt){if(ze.type!=="Feature")throw new Error("invalid feature");return ze.bbox=ze.bbox?ze.bbox:B(ze),_.prototype.remove.call(this,ze,mt)},Ge.clear=function(){return _.prototype.clear.call(this)},Ge.search=function(ze){var mt=_.prototype.search.call(this,this.toBBox(ze));return X(mt)},Ge.collides=function(ze){return _.prototype.collides.call(this,this.toBBox(ze))},Ge.all=function(){var ze=_.prototype.all.call(this);return X(ze)},Ge.toJSON=function(){return _.prototype.toJSON.call(this)},Ge.fromJSON=function(ze){return _.prototype.fromJSON.call(this,ze)},Ge.toBBox=function(ze){var mt;if(ze.bbox)mt=ze.bbox;else if(Array.isArray(ze)&&ze.length===4)mt=ze;else if(Array.isArray(ze)&&ze.length===6)mt=[ze[0],ze[1],ze[3],ze[4]];else if(ze.type==="Feature")mt=B(ze);else if(ze.type==="FeatureCollection")mt=B(ze);else throw new Error("invalid geojson");return{minX:mt[0],minY:mt[1],maxX:mt[2],maxY:mt[3]}},Ge}g.exports=he,g.exports.default=he});Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,x=arguments[1],k=0;k<_;k++)if(h.call(x,g[k],k,g))return k;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,x=arguments[1],k=0;k<_;k++){var B=g[k];if(h.call(x,B,k,g))return B}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var g=1;g<arguments.length;g++){var _=arguments[g];if(_!=null)for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(h[x]=_[x])}return h}),function(h){h.forEach(function(g){g.hasOwnProperty("remove")||Object.defineProperty(g,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,g){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),x=_.length>>>0;if(x===0)return!1;var k=g|0,B=Math.max(k>=0?k:x-Math.abs(k),0);function W(X,he){return X===he||typeof X=="number"&&typeof he=="number"&&isNaN(X)&&isNaN(he)}for(;B<x;){if(W(_[B],h))return!0;B++}return!1}});var Ul={version:"2.18.3"},pr=l(Gi()),qr={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},$a={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},xs={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Ls={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Bu={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},hl={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},da={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},Ti={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},No={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},Va={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},mo={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},du={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Ha={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Ru={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Bo={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},pa={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},Wa={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},$l={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},rs={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},gc={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},pu={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},ur={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},gr={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},Ro={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},$r={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},Fu={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},fl={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},dl=Ha,Fo={en:qr,de:$a,it:xs,id:Ls,ro:Bu,ru:hl,es:da,nl:Ti,fr:No,pt:dl,pt_br:du,pt_pt:Ha,zh:Va,zh_tw:mo,pl:Ru,sv:Bo,el:pa,hu:Wa,da:$l,no:rs,fa:gc,ua:pu,tr:ur,cz:gr,ja:Ro,fi:$r,ko:Fu,ky:fl},Ga={_globalEditModeEnabled:!1,enableGlobalEditMode(h){let g={...h};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(h=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(h)},handleLayerAdditionInGlobalEditMode(){let h=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let g in h){let _=h[g];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:h}){this._addedLayersEdit[L.stamp(h)]=h},_isRelevantForEdit(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowEditing}},ju=Ga,Vl={_globalDragModeEnabled:!1,enableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},h.forEach(g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,h.forEach(g=>{g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let h=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let g in h){let _=h[g];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:h}){this._addedLayersDrag[L.stamp(h)]=h},_isRelevantForDrag(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.draggable}},fr=Vl,Mr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(h=>{this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(h=>{h.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(h){let g=h.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let h=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:h}){this._addedLayersRemoval[L.stamp(h)]=h}},qa=Mr,mc={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{this._isRelevantForRotate(h)&&h.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{h.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(h){return h.pm&&h instanceof L.Polyline&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let h=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:h}){this._addedLayersRotate[L.stamp(h)]=h}},Hl=mc,gu=l(Gi()),pl={_fireDrawStart(h="Draw",g={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},h,g)},_fireDrawEnd(h="Draw",g={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},h,g)},_fireCreate(h,g="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:h,layer:h},g,_)},_fireCenterPlaced(h="Draw",g={}){let _=h==="Draw"?this._layer:void 0,x=h!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:x,latlng:this._layer.getLatLng()},h,g)},_fireCut(h,g,_,x="Draw",k={}){this.__fire(h,"pm:cut",{shape:this._shape,layer:g,originalLayer:_},x,k)},_fireEdit(h=this._layer,g="Edit",_={}){this.__fire(h,"pm:edit",{layer:this._layer,shape:this.getShape()},g,_)},_fireEnable(h="Edit",g={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDisable(h="Edit",g={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},h,g)},_fireUpdate(h="Edit",g={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},h,g)},_fireMarkerDragStart(h,g=void 0,_="Edit",x={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,x)},_fireMarkerDrag(h,g=void 0,_="Edit",x={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,x)},_fireMarkerDragEnd(h,g=void 0,_=void 0,x="Edit",k={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g,intersectionReset:_},x,k)},_fireDragStart(h="Edit",g={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},h,g)},_fireDrag(h,g="Edit",_={}){this.__fire(this._layer,"pm:drag",{...h,shape:this.getShape()},g,_)},_fireDragEnd(h="Edit",g={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragEnable(h="Edit",g={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragDisable(h="Edit",g={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},h,g)},_fireRemove(h,g=h,_="Edit",x={}){this.__fire(h,"pm:remove",{layer:g,shape:this.getShape()},_,x)},_fireVertexAdded(h,g,_,x="Edit",k={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:h,indexPath:g,latlng:_,shape:this.getShape()},x,k)},_fireVertexRemoved(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:h,indexPath:g,shape:this.getShape()},_,x)},_fireVertexClick(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,x)},_fireIntersect(h,g=this._layer,_="Edit",x={}){this.__fire(g,"pm:intersect",{layer:this._layer,intersection:h,shape:this.getShape()},_,x)},_fireLayerReset(h,g,_="Edit",x={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,x)},_fireChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:h,shape:this.getShape()},g,_)},_fireTextChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:h,shape:this.getShape()},g,_)},_fireTextFocus(h="Edit",g={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},h,g)},_fireTextBlur(h="Edit",g={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},h,g)},_fireSnapDrag(h,g,_="Snapping",x={}){this.__fire(h,"pm:snapdrag",g,_,x)},_fireSnap(h,g,_="Snapping",x={}){this.__fire(h,"pm:snap",g,_,x)},_fireUnsnap(h,g,_="Snapping",x={}){this.__fire(h,"pm:unsnap",g,_,x)},_fireRotationEnable(h,g,_="Rotation",x={}){this.__fire(h,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,x)},_fireRotationDisable(h,g="Rotation",_={}){this.__fire(h,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,_)},_fireRotationStart(h,g,_="Rotation",x={}){this.__fire(h,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},_,x)},_fireRotation(h,g,_,x=this._rotationLayer,k="Rotation",B={}){this.__fire(h,"pm:rotate",{layer:x,helpLayer:this._layer,startAngle:this._startAngle,angle:x.pm.getAngle(),angleDiff:g,oldLatLngs:_,newLatLngs:x.getLatLngs()},k,B)},_fireRotationEnd(h,g,_,x="Rotation",k={}){this.__fire(h,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},x,k)},_fireActionClick(h,g,_,x="Toolbar",k={}){this.__fire(this._map,"pm:actionclick",{text:h.text,action:h,btnName:g,button:_},x,k)},_fireButtonClick(h,g,_="Toolbar",x={}){this.__fire(this._map,"pm:buttonclick",{btnName:h,button:g},_,x)},_fireLangChange(h,g,_,x,k="Global",B={}){this.__fire(this.map,"pm:langchange",{oldLang:h,activeLang:g,fallback:_,translations:x},k,B)},_fireGlobalDragModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalEditModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalRemovalModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalCutModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},h,g)},_fireGlobalDrawModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},h,g)},_fireGlobalRotateModeToggled(h="Global",g={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},h,g)},_fireRemoveLayerGroup(h,g=h,_="Edit",x={}){this.__fire(h,"pm:remove",{layer:g,shape:void 0},_,x)},_fireKeyeventEvent(h,g,_,x="Global",k={}){this.__fire(this.map,"pm:keyevent",{event:h,eventType:g,focusOn:_},x,k)},__fire(h,g,_,x,k={}){_=(0,gu.default)(_,k,{source:x}),L.PM.Utils._fireEvent(h,g,_)}},Wl=pl,mu=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(h){this.map=h,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),h.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(h){let g="document";this.map.getContainer().contains(h.target)&&(g="map");let _={event:h,eventType:h.type,focusOn:g};this._lastEvents[h.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(h,h.type,g)},_onBlur(h){h.altKey=!1;let g={event:h,eventType:h.type,focusOn:"document"};this._lastEvents[h.type]=g,this._lastEvents.current=g},getLastKeyEvent(h="current"){return this._lastEvents[h]},isShiftKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.shiftKey},isAltKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.altKey},isCtrlKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.ctrlKey},isMetaKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.metaKey},getPressedKey(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.key}}),Dr=mu,Ri=l(So());function Kn(h){let g=L.PM.activeLang;return(0,Ri.default)(Fo[g],h)||(0,Ri.default)(Fo.en,h)||h}function Fi(h){for(let g=0;g<h.length;g+=1){let _=h[g];if(Array.isArray(_)){if(Fi(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function gl(h){return h.reduce((g,_)=>{if(_.length!==0){let x=Array.isArray(_)?gl(_):_;Array.isArray(x)?x.length!==0&&g.push(x):g.push(x)}return g},[])}function ga(h,g,_){let x={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:k,b:B,f:W}=x,X=h.lng,he=h.lat,we=_,Ge=Math.PI,ze=g*Ge/180,mt=Math.sin(ze),At=Math.cos(ze),Gt=(1-W)*Math.tan(he*Ge/180),dn=1/Math.sqrt(1+Gt*Gt),yn=Gt*dn,er=Math.atan2(Gt,At),We=dn*mt,qe=1-We*We,ut=qe*(k*k-B*B)/(B*B),It=1+ut/16384*(4096+ut*(-768+ut*(320-175*ut))),bt=ut/1024*(256+ut*(-128+ut*(74-47*ut))),Tt=we/(B*It),fe=2*Math.PI,Se,De,Oe;for(;Math.abs(Tt-fe)>1e-12;){Se=Math.cos(2*er+Tt),De=Math.sin(Tt),Oe=Math.cos(Tt);let en=bt*De*(Se+bt/4*(Oe*(-1+2*Se*Se)-bt/6*Se*(-3+4*De*De)*(-3+4*Se*Se)));fe=Tt,Tt=we/(B*It)+en}let Re=yn*De-dn*Oe*At,Fe=Math.atan2(yn*Oe+dn*De*At,(1-W)*Math.sqrt(We*We+Re*Re)),tt=Math.atan2(De*mt,dn*Oe-yn*De*At),it=W/16*qe*(4+W*(4-3*qe)),ft=tt-(1-it)*W*We*(Tt+it*De*(Se+it*Oe*(-1+2*Se*Se))),Ct=X+ft*180/Ge,St=Fe*180/Ge;return L.latLng(Ct,St)}function wi(h,g,_,x,k=!0){let B,W,X,he=[];for(let we=0;we<_;we+=1){if(k)B=we*360/_+x,W=ga(h,B,g),X=L.latLng(W.lng,W.lat);else{let Ge=h.lat+Math.cos(2*we*Math.PI/_)*g,ze=h.lng+Math.sin(2*we*Math.PI/_)*g;X=L.latLng(Ge,ze)}he.push(X)}return he}function vu(h,g,_){g=(g+360)%360;let x=Math.PI/180,k=180/Math.PI,{R:B}=L.CRS.Earth,W=h.lng*x,X=h.lat*x,he=g*x,we=Math.sin(X),Ge=Math.cos(X),ze=Math.cos(_/B),mt=Math.sin(_/B),At=Math.asin(we*ze+Ge*mt*Math.cos(he)),Gt=W+Math.atan2(Math.sin(he)*mt*Ge,ze-we*Math.sin(At));Gt*=k;let dn=Gt-360,yn=Gt<-180?Gt+360:Gt;return Gt=Gt>180?dn:yn,L.latLng([At*k,Gt])}function Xo(h,g,_){let x=h.latLngToContainerPoint(g),k=h.latLngToContainerPoint(_),B=Math.atan2(k.y-x.y,k.x-x.x)*180/Math.PI+90;return B+=B<0?360:0,B}function Gl(h,g,_,x){let k=Xo(h,g,_);return vu(g,k,x)}function ql(h,g,_="asc"){if(!g||Object.keys(g).length===0)return(he,we)=>he-we;let x=Object.keys(g),k,B=x.length-1,W={};for(;B>=0;)k=x[B],W[k.toLowerCase()]=g[k],B-=1;function X(he){if(he instanceof L.Marker)return"Marker";if(he instanceof L.Circle)return"Circle";if(he instanceof L.CircleMarker)return"CircleMarker";if(he instanceof L.Rectangle)return"Rectangle";if(he instanceof L.Polygon)return"Polygon";if(he instanceof L.Polyline)return"Line"}return(he,we)=>{let Ge,ze;if(Ge=X(he.layer).toLowerCase(),ze=X(we.layer).toLowerCase(),!Ge||!ze)return 0;let mt=Ge in W?W[Ge]:Number.MAX_SAFE_INTEGER,At=ze in W?W[ze]:Number.MAX_SAFE_INTEGER,Gt=0;return mt<At?Gt=-1:mt>At&&(Gt=1),_==="desc"?Gt*-1:Gt}}function Eo(h,g=h.getLatLngs()){return h instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function Yl(h,g){var _,x,k,B;if((x=(_=g.options.crs)==null?void 0:_.projection)!=null&&x.MAX_LATITUDE){let W=(B=(k=g.options.crs)==null?void 0:k.projection)==null?void 0:B.MAX_LATITUDE;h.lat=Math.max(Math.min(W,h.lat),-W)}return h}function ei(h){return h.options.renderer||h._map&&(h._map._getPaneRenderer(h.options.pane)||h._map.options.renderer||h._map._renderer)||h._renderer}var vc=L.Class.extend({includes:[ju,fr,qa,Hl,Wl],initialize(h){this.map=h,this.Draw=new L.PM.Draw(h),this.Toolbar=new L.PM.Toolbar(h),this.Keyboard=Dr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(h)},setLang(h="en",g,_="en"){if(h=h.trim().toLowerCase(),!/^[a-z]{2}$/.test(h)){let k=h.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(k){let B=[`${k[1]}_${k[2]}`,`${k[1]}`];for(let W of B)if(Fo[W]){h=W;break}}}let x=L.PM.activeLang;g&&(Fo[h]=(0,pr.default)(Fo[_],g)),L.PM.activeLang=h,this.map.pm.Toolbar.reinit(),this._fireLangChange(x,h,_,Fo[h])},addControls(h){this.Toolbar.addControls(h)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(h="Polygon",g){h==="Poly"&&(h="Polygon"),this.Draw.enable(h,g)},disableDraw(h="Polygon"){h==="Poly"&&(h="Polygon"),this.Draw.disable(h)},setPathOptions(h,g={}){let _=g.ignoreShapes||[],x=g.merge||!1;this.map.pm.Draw.shapes.forEach(k=>{_.indexOf(k)===-1&&this.map.pm.Draw[k].setPathOptions(h,x)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(h){let g=(0,pr.default)(this.globalOptions,h);g.editable&&(g.resizeableCircleMarker=g.editable,delete g.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!g.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let x=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!g.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),x=!0),this.map.pm.Draw.shapes.forEach(k=>{this.map.pm.Draw[k].setOptions(g)}),_&&this.map.pm.Draw.CircleMarker.enable(),x&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(k=>{k.pm.setOptions(g)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=g,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.enabled()&&h.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(h){return this.Draw.Cut.enable(h)},toggleGlobalCutMode(h){return this.Draw.Cut.toggle(h)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(h=!1){let g=L.PM.Utils.findLayers(this.map);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(x=>{_.addLayer(x)}),_},getGeomanDrawLayers(h=!1){let g=L.PM.Utils.findLayers(this.map).filter(x=>x._drawnByGeoman===!0);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(x=>{_.addLayer(x)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(h){this._touchEventCounter===0&&(L.DomEvent.on(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(h){this._touchEventCounter===1&&(L.DomEvent.off(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(h){ei(this.map)._onMouseMove(this._createMouseEvent("mousemove",h))},_canvasTouchClick(h){let g="";h.type==="touchstart"||h.type==="pointerdown"?g="mousedown":(h.type==="touchend"||h.type==="pointerup"||h.type==="touchcancel"||h.type==="pointercancel")&&(g="mouseup"),g&&ei(this.map)._onClick(this._createMouseEvent(g,h))},_createMouseEvent(h,g){let _,x=g.touches[0]||g.changedTouches[0];try{_=new MouseEvent(h,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:x.detail,screenX:x.screenX,screenY:x.screenY,clientX:x.clientX,clientY:x.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(h,g.bubbles,g.cancelable,g.view,x.detail,x.screenX,x.screenY,x.clientX,x.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return _}}),us=vc,jo=L.Control.extend({includes:[Wl],options:{position:"topleft",disableByOtherButtons:!0},initialize(h){this._button=L.Util.extend({},this.options,h)},onAdd(h){return this._map=h,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let h=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),h?h.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(h){return typeof h=="boolean"?this._button.toggleStatus=h:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(h){h&&h.preventDefault(),!this._button.disabled&&(this._button.onClick(h,{button:this,event:h}),this._clicked(h),this._button.afterClick(h,{button:this,event:h}))},_makeButton(h){let g=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${g}`,this._container);h.title&&_.setAttribute("title",h.title);let x=L.DomUtil.create("a","leaflet-buttons-control-button",_);x.setAttribute("role","button"),x.setAttribute("tabindex","0"),x.href="#";let k=L.DomUtil.create("div",`leaflet-pm-actions-container ${g}`,_),B=h.actions,W={cancel:{text:Kn("actions.cancel"),title:Kn("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:Kn("actions.finish"),title:Kn("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:Kn("actions.removeLastVertex"),title:Kn("actions.removeLastVertex"),onClick(){this._map.pm.Draw[h.jsClass]._removeLastVertex()}},finish:{text:Kn("actions.finish"),title:Kn("actions.finish"),onClick(he){this._map.pm.Draw[h.jsClass]._finishShape(he)}}};h._preparedActions=B.map(he=>{let we=typeof he=="string"?he:he.name,Ge;if(W[we])Ge=W[we];else if(he.text)Ge=he;else return Ge;let ze=L.DomUtil.create("a",`leaflet-pm-action ${g} action-${we}`,k);if(ze.setAttribute("role","button"),ze.setAttribute("tabindex","0"),ze.href="#",Ge.title&&(ze.title=Ge.title),ze.innerHTML=Ge.text,L.DomEvent.disableClickPropagation(ze),L.DomEvent.on(ze,"click",L.DomEvent.stop),Ge._node=ze,!h.disabled&&Ge.onClick){let mt=At=>{At.preventDefault();let Gt="",{buttons:dn}=this._map.pm.Toolbar;for(let yn in dn)if(dn[yn]._button===h){Gt=yn;break}this._fireActionClick(Ge,Gt,h)};L.DomEvent.addListener(ze,"click",mt,this),L.DomEvent.addListener(ze,"click",Ge.onClick,this),L.DomEvent.addListener(ze,"click",()=>this._updateActiveAction(h))}return Ge}),this._updateActiveAction(h),h.toggleStatus&&L.DomUtil.addClass(_,"active");let X=L.DomUtil.create("div","control-icon",x);return h.iconUrl&&X.setAttribute("src",h.iconUrl),h.className&&L.DomUtil.addClass(X,h.className),L.DomEvent.disableClickPropagation(x),L.DomEvent.on(x,"click",L.DomEvent.stop),h.disabled||(L.DomEvent.addListener(x,"click",this._onBtnClick,this),L.DomEvent.addListener(x,"click",this._triggerClick,this)),h.disabled&&(L.DomUtil.addClass(x,"pm-disabled"),x.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let h="",{buttons:g}=this._map.pm.Toolbar;for(let _ in g)if(g[_]._button===this._button){h=_;break}this._fireButtonClick(h,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let h="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,h),g.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(g,h),g.setAttribute("aria-disabled","false"))},_updateActiveAction(h){var g;(g=h._preparedActions)==null||g.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),Zl=jo;L.Control.PMButton=Zl;var zo=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(h){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(h)},reinit(){let h=this.isVisible;this.removeControls(),this._defineButtons(),h&&this.addControls()},init(h){this.map=h,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(h){let g=`${h}Container`;return this[g]||(this[g]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${h} leaflet-bar leaflet-control`)),this[g]},getButtons(){return this.buttons},addControls(h=this.options){typeof h.editPolygon<"u"&&(h.editMode=h.editPolygon),typeof h.deleteLayer<"u"&&(h.removalMode=h.deleteLayer),L.Util.setOptions(this,h),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let h=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in h){let x=h[_];L.Util.setOptions(x,{className:g.geomanIcons[_]})}},removeControls(){let h=this.getButtons();for(let g in h)h[g].remove();this.isVisible=!1},toggleControls(h=this.options){this.isVisible?this.removeControls():this.addControls(h)},_addButton(h,g){return this.buttons[h]=g,this.options[h]=!!this.options[h]||!1,this.buttons[h]},triggerClickOnToggledButtons(h){for(let g in this.buttons){let _=this.buttons[g];_._button.disableByOtherButtons&&_!==h&&_.toggled()&&_._triggerClick()}},toggleButton(h,g,_=!0){h==="editPolygon"&&(h="editMode"),h==="deleteLayer"&&(h="removalMode");let x=h;return _&&this.triggerClickOnToggledButtons(this.buttons[x]),this.buttons[x]?this.buttons[x].toggle(g):!1},_defineButtons(){let h={className:"control-icon leaflet-pm-icon-marker",title:Kn("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(mt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:Kn("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(mt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:Kn("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(mt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},x={title:Kn("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(mt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:Kn("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(mt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},B={title:Kn("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(mt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},W={title:Kn("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},X={title:Kn("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},he={title:Kn("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(mt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},we={title:Kn("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ge={title:Kn("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ze={className:"control-icon leaflet-pm-icon-text",title:Kn("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(mt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(h)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(B)),this._addButton("drawPolygon",new L.Control.PMButton(g)),this._addButton("drawCircle",new L.Control.PMButton(x)),this._addButton("drawCircleMarker",new L.Control.PMButton(k)),this._addButton("drawText",new L.Control.PMButton(ze)),this._addButton("editMode",new L.Control.PMButton(W)),this._addButton("dragMode",new L.Control.PMButton(X)),this._addButton("cutPolygon",new L.Control.PMButton(he)),this._addButton("removalMode",new L.Control.PMButton(we)),this._addButton("rotateMode",new L.Control.PMButton(Ge))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let h=this.getButtons(),g=[];this.options.drawControls===!1&&(g=g.concat(Object.keys(h).filter(_=>!h[_]._button.tool))),this.options.editControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="options"))),this.options.customControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="custom")));for(let _ in h)if(this.options[_]&&g.indexOf(_)===-1){let x=h[_]._button.tool;x||(x="draw"),h[_].setPosition(this._getBtnPosition(x)),h[_].addTo(this.map)}},_getBtnPosition(h){return this.options.positions&&this.options.positions[h]?this.options.positions[h]:this.options.position},setBlockPosition(h,g){this.options.positions[h]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(h,g){if(g)typeof g!="object"&&(g={name:g});else throw new TypeError("Button has no name");let _=this._btnNameMapping(h);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");let x=this.map.pm.Draw.createNewDrawInstance(g.name,_);g={...this.buttons[_]._button,...g};let k=this.createCustomControl(g);return{drawInstance:x,control:k}},createCustomControl(h){if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");h.onClick||(h.onClick=()=>{}),h.afterClick||(h.afterClick=()=>{}),h.toggle!==!1&&(h.toggle=!0),h.block&&(h.block=h.block.toLowerCase()),(!h.block||h.block==="draw")&&(h.block=""),h.className?h.className.indexOf("control-icon")===-1&&(h.className=`control-icon ${h.className}`):h.className="control-icon";let g={tool:h.block,className:h.className,title:h.title||"",jsClass:h.name,onClick:h.onClick,afterClick:h.afterClick,doToggle:h.toggle,toggleStatus:!1,disableOtherButtons:h.disableOtherButtons??!0,disableByOtherButtons:h.disableByOtherButtons??!0,cssToggle:h.toggle,position:this.options.position,actions:h.actions||[],disabled:!!h.disabled};this.options[h.name]!==!1&&(this.options[h.name]=!0);let _=this._addButton(h.name,new L.Control.PMButton(g));return this.changeControlOrder(),_},controlExists(h){return!!this.getButton(h)},getButton(h){return this.getButtons()[h]},getButtonsInBlock(h){let g={};if(h)for(let _ in this.getButtons()){let x=this.getButtons()[_];(x._button.tool===h||h==="draw"&&!x._button.tool)&&(g[_]=x)}return g},changeControlOrder(h=[]){let g=this._shapeMapping(),_=[];h.forEach(B=>{g[B]?_.push(g[B]):_.push(B)});let x=this.getButtons(),k={};_.forEach(B=>{x[B]&&(k[B]=x[B])}),Object.keys(x).filter(B=>!x[B]._button.tool||x[B]._button.tool==="draw").forEach(B=>{_.indexOf(B)===-1&&(k[B]=x[B])}),Object.keys(x).filter(B=>x[B]._button.tool==="edit").forEach(B=>{_.indexOf(B)===-1&&(k[B]=x[B])}),Object.keys(x).filter(B=>x[B]._button.tool==="options").forEach(B=>{_.indexOf(B)===-1&&(k[B]=x[B])}),Object.keys(x).filter(B=>x[B]._button.tool==="custom").forEach(B=>{_.indexOf(B)===-1&&(k[B]=x[B])}),Object.keys(x).forEach(B=>{_.indexOf(B)===-1&&(k[B]=x[B])}),this.map.pm.Toolbar.buttons=k,this._showHideButtons()},getControlOrder(){let h=this.getButtons(),g=[];for(let _ in h)g.push(_);return g},changeActionsOfControl(h,g){let _=this._btnNameMapping(h);if(!_)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=g,this.changeControlOrder()},setButtonDisabled(h,g){let _=this._btnNameMapping(h);g?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(h){let g=this._shapeMapping();return g[h]?g[h]:h}}),ml=zo,vl=l(Gi()),ti={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(h){h.forEach(g=>{if(Array.isArray(g)){this._assignEvents(g);return}g.off("drag",this._handleSnapping,this),g.on("drag",this._handleSnapping,this),g.off("dragend",this._cleanupSnapping,this),g.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(h){if(h){let g=h.target;g._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(g=>{g.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(h){var X,he,we;let g=h.target;if(g._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((X=h==null?void 0:h.originalEvent)==null?void 0:X.altKey)||((we=(he=this._map)==null?void 0:he.pm)==null?void 0:we.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(g.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let x=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,k;x?k=_.latlng:k=this._checkPrioritiySnapping(_);let B=this.options.snapDistance,W={marker:g,shape:this._shape,snapLatLng:k,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(W.marker,W),this._fireSnapDrag(this._layer,W),_.distance<B){g._orgLatLng=g.getLatLng(),g.setLatLng(k),g._snapped=!0,g._snapInfo=W;let Ge=()=>{this._snapLatLng=k,this._fireSnap(g,W),this._fireSnap(this._layer,W)},ze=this._snapLatLng||{},mt=k||{};(ze.lat!==mt.lat||ze.lng!==mt.lng)&&Ge()}else this._snapLatLng&&(this._unsnap(W),g._snapped=!1,g._snapInfo=void 0,this._fireUnsnap(W.marker,W),this._fireUnsnap(this._layer,W));return!0},_createSnapList(){let h=[],g=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(x=>{if((x instanceof L.Polyline||x instanceof L.Marker||x instanceof L.CircleMarker||x instanceof L.ImageOverlay)&&x.options.snapIgnore!==!0){if(x.options.snapIgnore===void 0&&(!L.PM.optIn&&x.options.pmIgnore===!0||L.PM.optIn&&x.options.pmIgnore!==!1))return;(x instanceof L.Circle||x instanceof L.CircleMarker)&&x.pm&&x.pm._hiddenPolyCircle?h.push(x.pm._hiddenPolyCircle):x instanceof L.ImageOverlay&&(x=L.rectangle(x.getBounds())),h.push(x);let k=L.polyline([],{color:"red",pmIgnore:!0});k._pmTempLayer=!0,g.push(k),(x instanceof L.Circle||x instanceof L.CircleMarker)&&g.push(k)}}),h=h.filter(x=>this._layer!==x),h=h.filter(x=>x._latlng||x._latlngs&&Fi(x._latlngs)),h=h.filter(x=>!x._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let x=L.polyline([],{color:"red",pmIgnore:!0});x._pmTempLayer=!0,g.push(x)}),this._snapList=h.concat(this._otherSnapLayers)):this._snapList=h,this.debugIndicatorLines=g},_handleSnapLayerRemoval({layer:h}){if(!h._leaflet_id)return;let g=this._snapList.findIndex(_=>_._leaflet_id===h._leaflet_id);g>-1&&this._snapList.splice(g,1)},_calcClosestLayer(h,g){return this._calcClosestLayers(h,g,1)[0]},_calcClosestLayers(h,g,_=1){let x=[],k={};g.forEach((W,X)=>{var we;if(W._parentCopy&&W._parentCopy===this._layer||((we=W.getLatLngs)==null?void 0:we.call(W).flat(5).length)<2)return;let he=this._calcLayerDistances(h,W);if(he.distance=Math.floor(he.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[X]){let Ge=L.polyline([],{color:"red",pmIgnore:!0});Ge._pmTempLayer=!0,this.debugIndicatorLines[X]=Ge}this.debugIndicatorLines[X].setLatLngs([h,he.latlng])}_===1&&(k.distance===void 0||he.distance-5<=k.distance)?(he.distance+5<k.distance&&(x=[]),k=he,k.layer=W,x.push(k)):_!==1&&(k={},k=he,k.layer=W,x.push(k))}),_!==1&&(x=x.sort((W,X)=>W.distance-X.distance)),_===-1&&(_=x.length);let B=this._getClosestLayerByPriority(x,_);return L.Util.isArray(B)?B:[B]},_calcLayerDistances(h,g){let _=this._map,x=g instanceof L.Marker||g instanceof L.CircleMarker,k=g instanceof L.Polygon,B=h;if(x){let W=g.getLatLng();return{latlng:{...W},distance:this._getDistance(_,W,B)}}return this._calcLatLngDistances(B,g.getLatLngs(),_,k)},_calcLatLngDistances(h,g,_,x=!1){let k,B,W,X=he=>{he.forEach((we,Ge)=>{if(Array.isArray(we)){X(we);return}if(this.options.snapSegment){let ze=we,mt;x?mt=Ge+1===he.length?0:Ge+1:mt=Ge+1===he.length?void 0:Ge+1;let At=he[mt];if(At){let Gt=this._getDistanceToSegment(_,h,ze,At);(B===void 0||Gt<B)&&(B=Gt,W=[ze,At])}}else{let ze=this._getDistance(_,h,we);(B===void 0||ze<B)&&(B=ze,k=we)}})};return X(g),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,h,W[0],W[1])},segment:W,distance:B}:{latlng:k,distance:B}},_getClosestLayerByPriority(h,g=1){h=h.sort((W,X)=>W._leaflet_id-X._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],x=this._map.pm.globalOptions.snappingOrder||[],k=0,B={};return x.concat(_).forEach(W=>{B[W]||(k+=1,B[W]=k)}),h.sort(ql("instanceofShape",B)),g===1?h[0]||{}:h.slice(0,g)},_checkPrioritiySnapping(h){let g=this._map,_=h.segment[0],x=h.segment[1],k=h.latlng,B=k;if(this.options.snapVertex){let W=this._getDistance(g,_,k),X=this._getDistance(g,x,k),he=W<X?_:x,we=W<X?W:X;if(this.options.snapMiddle){let ze=L.PM.Utils.calcMiddleLatLng(g,_,x),mt=this._getDistance(g,ze,k);mt<W&&mt<X&&(he=ze,we=mt)}let Ge=this.options.snapDistance;we<Ge&&(B=he)}return{...B}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(h,g,_,x){let k=h.getMaxZoom();k===1/0&&(k=h.getZoom());let B=h.project(g,k),W=h.project(_,k),X=h.project(x,k),he=L.LineUtil.closestPointOnSegment(B,W,X);return h.unproject(he,k)},_getDistanceToSegment(h,g,_,x){let k=h.latLngToContainerPoint(g),B=h.latLngToContainerPoint(_),W=h.latLngToContainerPoint(x);return L.LineUtil.pointToSegmentDistance(k,B,W)},_getDistance(h,g,_){return h.latLngToContainerPoint(g).distanceTo(h.latLngToContainerPoint(_))}},vo=ti,ma=L.Class.extend({includes:[vo,Wl],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(h){L.Util.setOptions(this,h),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(h){let g=new L.Icon.Default;g.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=g,this._map=h,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(h,g=!1){g?this.options.pathOptions=(0,vl.default)(this.options.pathOptions,h):this.options.pathOptions=h},getShapes(){return this.shapes},getShape(){return this._shape},enable(h,g){if(!h)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[h].enable(g)},disable(){this.shapes.forEach(h=>{this[h].disable()})},addControls(){this.shapes.forEach(h=>{this[h].addButton()})},getActiveShape(){let h;return this.shapes.forEach(g=>{this[g]._enabled&&(h=g)}),h},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let h=[];this._map.eachLayer(g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||h.push(g))}),this._enabled?h.forEach(g=>{L.PM.Utils.disablePopup(g)}):h.forEach(g=>{L.PM.Utils.enablePopup(g)})},createNewDrawInstance(h,g){let _=this._getShapeFromBtnName(g);if(this[h])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[h]=new L.PM.Draw[_](this._map),this[h].toolbarButtonName=h,this[h]._shape=h,this.shapes.push(h),this[g]&&this[h].setOptions(this[g].options),this[h].setOptions(this[h].options),this[h]},_getShapeFromBtnName(h){let g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[h]?g[h]:this[h]?this[h]._shape:h},_finishLayer(h){h.pm&&(h.pm.setOptions(this.options),h.pm._shape=this._shape,h.pm._map=this._map),this._addDrawnLayerProp(h)},_addDrawnLayerProp(h){h._drawnByGeoman=!0},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),ji=ma;ji.Marker=ji.extend({initialize(h){this._map=h,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(Kn("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(g=>{this.isRelevantMarker(g)&&g.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},isRelevantMarker(h){return h instanceof L.Marker&&h.pm&&!h._pmTempLayer&&!h.pm._initTextMarker},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(h){if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new L.Marker(g,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var h,g;(h=this.options.markerStyle)!=null&&h.icon&&((g=this._hintMarker)==null||g.setIcon(this.options.markerStyle.icon))}});var I=63710088e-1,me={centimeters:I*100,centimetres:I*100,degrees:I/111325,feet:I*3.28084,inches:I*39.37,kilometers:I/1e3,kilometres:I/1e3,meters:I,metres:I,miles:I/1609.344,millimeters:I*1e3,millimetres:I*1e3,nauticalmiles:I/1852,radians:1,yards:I*1.0936};function He(h,g,_){_===void 0&&(_={});var x={type:"Feature"};return(_.id===0||_.id)&&(x.id=_.id),_.bbox&&(x.bbox=_.bbox),x.properties=g||{},x.geometry=h,x}function ot(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!or(h[0])||!or(h[1]))throw new Error("coordinates must contain numbers");var x={type:"Point",coordinates:h};return He(x,g,_)}function xt(h,g,_){if(_===void 0&&(_={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");var x={type:"LineString",coordinates:h};return He(x,g,_)}function Nt(h,g){g===void 0&&(g={});var _={type:"FeatureCollection"};return g.id&&(_.id=g.id),g.bbox&&(_.bbox=g.bbox),_.features=h,_}function an(h,g){g===void 0&&(g="kilometers");var _=me[g];if(!_)throw new Error(g+" units is invalid");return h*_}function Pn(h,g){g===void 0&&(g="kilometers");var _=me[g];if(!_)throw new Error(g+" units is invalid");return h/_}function Tn(h){var g=h%(2*Math.PI);return g*180/Math.PI}function Yn(h){var g=h%360;return g*Math.PI/180}function or(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function Sr(h){var g,_,x={type:"FeatureCollection",features:[]};if(h.type==="Feature"?_=h.geometry:_=h,_.type==="LineString")g=[_.coordinates];else if(_.type==="MultiLineString")g=_.coordinates;else if(_.type==="MultiPolygon")g=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")g=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return g.forEach(function(k){g.forEach(function(B){for(var W=0;W<k.length-1;W++)for(var X=W;X<B.length-1;X++)if(!(k===B&&(Math.abs(W-X)===1||W===0&&X===k.length-2&&k[W][0]===k[k.length-1][0]&&k[W][1]===k[k.length-1][1]))){var he=_i(k[W][0],k[W][1],k[W+1][0],k[W+1][1],B[X][0],B[X][1],B[X+1][0],B[X+1][1]);he&&x.features.push(ot([he[0],he[1]]))}})}),x}function _i(h,g,_,x,k,B,W,X){var he,we,Ge,ze,mt,At={x:null,y:null,onLine1:!1,onLine2:!1};return he=(X-B)*(_-h)-(W-k)*(x-g),he===0?At.x!==null&&At.y!==null?At:!1:(we=g-B,Ge=h-k,ze=(W-k)*we-(X-B)*Ge,mt=(_-h)*we-(x-g)*Ge,we=ze/he,Ge=mt/he,At.x=h+we*(_-h),At.y=g+we*(x-g),we>=0&&we<=1&&(At.onLine1=!0),Ge>=0&&Ge<=1&&(At.onLine2=!0),At.onLine1&&At.onLine2?[At.x,At.y]:!1)}ji.Line=ji.extend({initialize(h){this._map=h,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Kn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine(){let h=this._layer.getLatLngs();if(h.length>0){let g=h[h.length-1];this._hintline.setLatLngs([g,this._hintMarker.getLatLng()])}},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let g=this._layer._defaultShape().slice();g.push(this._hintMarker.getLatLng()),this._change(g)},hasSelfIntersection(){return Sr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(h,g){let _=L.polyline(this._layer.getLatLngs());h&&(g||(g=this._hintMarker.getLatLng()),_.addLatLng(g));let x=Sr(_.toGeoJSON(15));this._doesSelfIntersect=x.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(x,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(h){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,h.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),x=_[_.length-1];if(g.equals(_[0])||_.length>0&&g.equals(x)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);let k=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(k,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(h)},_setHintLineAfterNewVertex(h){this._hintline.setLatLngs([h,h])},_removeLastVertex(){let h=this._markers;if(h.length<=1){this.disable();return}let g=this._layer.getLatLngs(),_=h[h.length-1],{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(h,_);h.pop(),this._layerGroup.removeLayer(_);let k=h[h.length-1],B=g.indexOf(k.getLatLng());g=g.slice(0,B+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,x,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=1)return;let g=L.polyline(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=1?g=Kn("tooltips.continueLine"):g=Kn("tooltips.finishLine"),this._hintMarker.setTooltipContent(g)},_change(h){this._fireChange(h,"Draw")},setStyle(){var h,g;(h=this._layer)==null||h.setStyle(this.options.templineStyle),(g=this._hintline)==null||g.setStyle(this.options.hintlineStyle)}}),ji.Polygon=ji.Line.extend({initialize(h){this._map=h,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(h){L.PM.Draw.Line.prototype.enable.call(this,h),this._layer.pm._shape="Polygon"},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),this._layer.getLatLngs().flat().length===1?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",()=>1),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=2?g=Kn("tooltips.continueLine"):g=Kn("tooltips.finishPoly"),this._hintMarker.setTooltipContent(g)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),ji.Rectangle=ji.extend({initialize(h){this._map=h,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(h){if(L.Util.setOptions(this,h),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Kn("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let g=0;g<2;g+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeStartingMarkers(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(Kn("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let h=this._startMarker.getLatLng();h&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([h,h]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}let g=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(g,"Draw")},_syncRectangleSize(){let h=Yl(this._startMarker.getLatLng(),this._map),g=Yl(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(h,g,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let x=[];_.forEach(k=>{!k.equals(h,1e-8)&&!k.equals(g,1e-8)&&x.push(k)}),x.forEach((k,B)=>{try{this._styleMarkers[B].setLatLng(k)}catch{}})}},_findCorners(){let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.options.rectangleAngle||0,this._map)},_finishShape(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(g))return;let x=L.rectangle([_,g],this.options.pathOptions);if(this.options.rectangleAngle){let B=L.PM.Utils._getRotatedRectangle(_,g,this.options.rectangleAngle||0,this._map);x.setLatLngs(B),x.pm&&x.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(x,"layerPane"),this._finishLayer(x),x.addTo(this._map.pm._getContainingLayer()),this._fireCreate(x);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},setStyle(){var h;(h=this._layer)==null||h.setStyle(this.options.pathOptions)}}),ji.CircleMarker=ji.extend({initialize(h){this._map=h,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(h){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let g={};L.extend(g,this.options.templineStyle),g.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),g),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Kn("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(Kn("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()})},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeCenterMarker(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let g=this._hintMarker.getLatLng();this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(Kn("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,g])},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let g=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(g,"Draw")},isRelevantMarker(h){return h instanceof L.CircleMarker&&!(h instanceof L.Circle)&&h.pm&&!h._pmTempLayer},_createMarker(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!h.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(g,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(h){h.pm&&this.options.markerEditable&&h.pm.enable()},_finishShape(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let W=this._hintMarker.getLatLng();_=this._distanceCalculation(g,W),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let x={...this.options.pathOptions,radius:_},k=new this._BaseCircleClass(g,x);this._setPane(k,"layerPane"),this._finishLayer(k),k.addTo(this._map.pm._getContainingLayer()),k.pm&&k.pm._updateHiddenPolyCircle(),this._fireCreate(k);let B=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(B))},_getNewDestinationOfHintMarker(){let h=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return h;let g=this._centerMarker.getLatLng(),_=this._distanceCalculation(g,h);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?h=Gl(this._map,g,h,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(h=Gl(this._map,g,h,this._getMaxDistanceInMeter()))}return h},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var g,_;let h={};L.extend(h,this.options.templineStyle),this.options[this._editableOption]&&(h.radius=0),(g=this._layer)==null||g.setStyle(h),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))}}),ji.Circle=ji.CircleMarker.extend({initialize(h){this._map=h,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(h,g){return this._map.distance(h,g)}});function Zr(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ni(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function zi(h){return h.type==="Feature"?h.geometry:h}function qi(h,g){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}function yo(h,g,_){if(h!==null)for(var x,k,B,W,X,he,we,Ge=0,ze=0,mt,At=h.type,Gt=At==="FeatureCollection",dn=At==="Feature",yn=Gt?h.features.length:1,er=0;er<yn;er++){we=Gt?h.features[er].geometry:dn?h.geometry:h,mt=we?we.type==="GeometryCollection":!1,X=mt?we.geometries.length:1;for(var We=0;We<X;We++){var qe=0,ut=0;if(W=mt?we.geometries[We]:we,W!==null){he=W.coordinates;var It=W.type;switch(Ge=0,It){case null:break;case"Point":if(g(he,ze,er,qe,ut)===!1)return!1;ze++,qe++;break;case"LineString":case"MultiPoint":for(x=0;x<he.length;x++){if(g(he[x],ze,er,qe,ut)===!1)return!1;ze++,It==="MultiPoint"&&qe++}It==="LineString"&&qe++;break;case"Polygon":case"MultiLineString":for(x=0;x<he.length;x++){for(k=0;k<he[x].length-Ge;k++){if(g(he[x][k],ze,er,qe,ut)===!1)return!1;ze++}It==="MultiLineString"&&qe++,It==="Polygon"&&ut++}It==="Polygon"&&qe++;break;case"MultiPolygon":for(x=0;x<he.length;x++){for(ut=0,k=0;k<he[x].length;k++){for(B=0;B<he[x][k].length-Ge;B++){if(g(he[x][k][B],ze,er,qe,ut)===!1)return!1;ze++}ut++}qe++}break;case"GeometryCollection":for(x=0;x<W.geometries.length;x++)if(yo(W.geometries[x],g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Er(h,g){if(h.type==="Feature")g(h,0);else if(h.type==="FeatureCollection")for(var _=0;_<h.features.length&&g(h.features[_],_)!==!1;_++);}function Cs(h,g,_){var x=_;return Er(h,function(k,B){B===0&&_===void 0?x=k:x=g(x,k,B)}),x}function yl(h,g){var _,x,k,B,W,X,he,we,Ge,ze,mt=0,At=h.type==="FeatureCollection",Gt=h.type==="Feature",dn=At?h.features.length:1;for(_=0;_<dn;_++){for(X=At?h.features[_].geometry:Gt?h.geometry:h,we=At?h.features[_].properties:Gt?h.properties:{},Ge=At?h.features[_].bbox:Gt?h.bbox:void 0,ze=At?h.features[_].id:Gt?h.id:void 0,he=X?X.type==="GeometryCollection":!1,W=he?X.geometries.length:1,k=0;k<W;k++){if(B=he?X.geometries[k]:X,B===null){if(g(null,mt,we,Ge,ze)===!1)return!1;continue}switch(B.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(B,mt,we,Ge,ze)===!1)return!1;break}case"GeometryCollection":{for(x=0;x<B.geometries.length;x++)if(g(B.geometries[x],mt,we,Ge,ze)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}mt++}}function Fs(h,g){yl(h,function(_,x,k,B,W){var X=_===null?null:_.type;switch(X){case null:case"Point":case"LineString":case"Polygon":return g(He(_,k,{bbox:B,id:W}),x,0)===!1?!1:void 0}var he;switch(X){case"MultiPoint":he="Point";break;case"MultiLineString":he="LineString";break;case"MultiPolygon":he="Polygon";break}for(var we=0;we<_.coordinates.length;we++){var Ge=_.coordinates[we],ze={type:he,coordinates:Ge};if(g(He(ze,k),x,we)===!1)return!1}})}function yu(h){if(!h)throw new Error("geojson is required");var g=[];return Fs(h,function(_){Jo(_,g)}),Nt(g)}function Jo(h,g){var _=[],x=h.geometry;if(x!==null){switch(x.type){case"Polygon":_=ni(x);break;case"LineString":_=[ni(x)]}_.forEach(function(k){var B=zu(k,h.properties);B.forEach(function(W){W.id=g.length,g.push(W)})})}}function zu(h,g){var _=[];return h.reduce(function(x,k){var B=xt([x,k],g);return B.bbox=Ya(x,k),_.push(B),k}),_}function Ya(h,g){var _=h[0],x=h[1],k=g[0],B=g[1],W=_<k?_:k,X=x<B?x:B,he=_>k?_:k,we=x>B?x:B;return[W,X,he,we]}var Za=yu,Yi=l(Io(),1);function Qo(h,g){var _={},x=[];if(h.type==="LineString"&&(h=He(h)),g.type==="LineString"&&(g=He(g)),h.type==="Feature"&&g.type==="Feature"&&h.geometry!==null&&g.geometry!==null&&h.geometry.type==="LineString"&&g.geometry.type==="LineString"&&h.geometry.coordinates.length===2&&g.geometry.coordinates.length===2){var k=bo(h,g);return k&&x.push(k),Nt(x)}var B=(0,Yi.default)();return B.load(Za(g)),Er(Za(h),function(W){Er(B.search(W),function(X){var he=bo(W,X);if(he){var we=ni(he).join(",");_[we]||(_[we]=!0,x.push(he))}})}),Nt(x)}function bo(h,g){var _=ni(h),x=ni(g);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(x.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var k=_[0][0],B=_[0][1],W=_[1][0],X=_[1][1],he=x[0][0],we=x[0][1],Ge=x[1][0],ze=x[1][1],mt=(ze-we)*(W-k)-(Ge-he)*(X-B),At=(Ge-he)*(B-we)-(ze-we)*(k-he),Gt=(W-k)*(B-we)-(X-B)*(k-he);if(mt===0)return null;var dn=At/mt,yn=Gt/mt;if(dn>=0&&dn<=1&&yn>=0&&yn<=1){var er=k+dn*(W-k),We=B+dn*(X-B);return ot([er,We])}return null}var Qs=Qo,bl=l(Io(),1);function Ss(h,g,_){_===void 0&&(_={});var x=Zr(h),k=Zr(g),B=Yn(k[1]-x[1]),W=Yn(k[0]-x[0]),X=Yn(x[1]),he=Yn(k[1]),we=Math.pow(Math.sin(B/2),2)+Math.pow(Math.sin(W/2),2)*Math.cos(X)*Math.cos(he);return an(2*Math.atan2(Math.sqrt(we),Math.sqrt(1-we)),_.units)}var js=Ss;function zs(h){var g=h[0],_=h[1],x=h[2],k=h[3],B=js(h.slice(0,2),[x,_]),W=js(h.slice(0,2),[g,k]);if(B>=W){var X=(_+k)/2;return[g,X-(x-g)/2,x,X+(x-g)/2]}else{var he=(g+x)/2;return[he-(k-_)/2,_,he+(k-_)/2,k]}}var yc=zs;function is(h){var g=[1/0,1/0,-1/0,-1/0];return yo(h,function(_){g[0]>_[0]&&(g[0]=_[0]),g[1]>_[1]&&(g[1]=_[1]),g[2]<_[0]&&(g[2]=_[0]),g[3]<_[1]&&(g[3]=_[1])}),g}is.default=is;var va=is;function Es(h,g){g===void 0&&(g={});var _=g.precision,x=g.coordinates,k=g.mutate;if(_=_==null||isNaN(_)?6:_,x=x==null||isNaN(x)?3:x,!h)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof x!="number")throw new Error("<coordinates> must be a number");(k===!1||k===void 0)&&(h=JSON.parse(JSON.stringify(h)));var B=Math.pow(10,_);return yo(h,function(W){Ps(W,B,x)}),h}function Ps(h,g,_){h.length>_&&h.splice(_,h.length);for(var x=0;x<h.length;x++)h[x]=Math.round(h[x]*g)/g;return h}var ya=Es;function ba(h,g,_){if(_===void 0&&(_={}),_.final===!0)return ks(h,g);var x=Zr(h),k=Zr(g),B=Yn(x[0]),W=Yn(k[0]),X=Yn(x[1]),he=Yn(k[1]),we=Math.sin(W-B)*Math.cos(he),Ge=Math.cos(X)*Math.sin(he)-Math.sin(X)*Math.cos(he)*Math.cos(W-B);return Tn(Math.atan2(we,Ge))}function ks(h,g){var _=ba(g,h);return _=(_+180)%360,_}function cs(h,g,_,x){x===void 0&&(x={});var k=Zr(h),B=Yn(k[0]),W=Yn(k[1]),X=Yn(_),he=Pn(g,x.units),we=Math.asin(Math.sin(W)*Math.cos(he)+Math.cos(W)*Math.sin(he)*Math.cos(X)),Ge=B+Math.atan2(Math.sin(X)*Math.sin(he)*Math.cos(W),Math.cos(he)-Math.sin(W)*Math.sin(we)),ze=Tn(Ge),mt=Tn(we);return ot([ze,mt],x.properties)}function ea(h,g,_){_===void 0&&(_={});var x=ot([1/0,1/0],{dist:1/0}),k=0;return Fs(h,function(B){for(var W=ni(B),X=0;X<W.length-1;X++){var he=ot(W[X]);he.properties.dist=js(g,he,_);var we=ot(W[X+1]);we.properties.dist=js(g,we,_);var Ge=js(he,we,_),ze=Math.max(he.properties.dist,we.properties.dist),mt=ba(he,we),At=cs(g,ze,mt+90,_),Gt=cs(g,ze,mt-90,_),dn=Qs(xt([At.geometry.coordinates,Gt.geometry.coordinates]),xt([he.geometry.coordinates,we.geometry.coordinates])),yn=null;dn.features.length>0&&(yn=dn.features[0],yn.properties.dist=js(g,yn,_),yn.properties.location=k+js(he,yn,_)),he.properties.dist<x.properties.dist&&(x=he,x.properties.index=X,x.properties.location=k),we.properties.dist<x.properties.dist&&(x=we,x.properties.index=X+1,x.properties.location=k+Ge),yn&&yn.properties.dist<x.properties.dist&&(x=yn,x.properties.index=X),k+=Ge}}),x}var _o=ea;function Ms(h,g){if(!h)throw new Error("line is required");if(!g)throw new Error("splitter is required");var _=qi(h),x=qi(g);if(_!=="LineString")throw new Error("line must be LineString");if(x==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(x==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var k=ya(g,{precision:7});switch(x){case"Point":return Vt(h,k);case"MultiPoint":return yt(h,k);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return yt(h,Qs(h,k))}}function yt(h,g){var _=[],x=(0,bl.default)();return Fs(g,function(k){if(_.forEach(function(X,he){X.id=he}),!_.length)_=Vt(h,k).features,_.forEach(function(X){X.bbox||(X.bbox=yc(va(X)))}),x.load(Nt(_));else{var B=x.search(k);if(B.features.length){var W=Mt(k,B);_=_.filter(function(X){return X.id!==W.id}),x.remove(W),Er(Vt(W,k),function(X){_.push(X),x.insert(X)})}}}),Nt(_)}function Vt(h,g){var _=[],x=ni(h)[0],k=ni(h)[h.geometry.coordinates.length-1];if(Sn(x,Zr(g))||Sn(k,Zr(g)))return Nt([h]);var B=(0,bl.default)(),W=Za(h);B.load(W);var X=B.search(g);if(!X.features.length)return Nt([h]);var he=Mt(g,X),we=[x],Ge=Cs(W,function(ze,mt,At){var Gt=ni(mt)[1],dn=Zr(g);return At===he.id?(ze.push(dn),_.push(xt(ze)),Sn(dn,Gt)?[dn]:[dn,Gt]):(ze.push(Gt),ze)},we);return Ge.length>1&&_.push(xt(Ge)),Nt(_)}function Mt(h,g){if(!g.features.length)throw new Error("lines must contain features");if(g.features.length===1)return g.features[0];var _,x=1/0;return Er(g,function(k){var B=_o(k,h),W=B.properties.dist;W<x&&(_=k,x=W)}),_}function Sn(h,g){return h[0]===g[0]&&h[1]===g[1]}var $n=Ms;function cr(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("point is required");if(!g)throw new Error("polygon is required");var x=Zr(h),k=zi(g),B=k.type,W=g.bbox,X=k.coordinates;if(W&&ri(x,W)===!1)return!1;B==="Polygon"&&(X=[X]);for(var he=!1,we=0;we<X.length&&!he;we++)if(xi(x,X[we][0],_.ignoreBoundary)){for(var Ge=!1,ze=1;ze<X[we].length&&!Ge;)xi(x,X[we][ze],!_.ignoreBoundary)&&(Ge=!0),ze++;Ge||(he=!0)}return he}function xi(h,g,_){var x=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var k=0,B=g.length-1;k<g.length;B=k++){var W=g[k][0],X=g[k][1],he=g[B][0],we=g[B][1],Ge=h[1]*(W-he)+X*(he-h[0])+we*(h[0]-W)===0&&(W-h[0])*(he-h[0])<=0&&(X-h[1])*(we-h[1])<=0;if(Ge)return!_;var ze=X>h[1]!=we>h[1]&&h[0]<(he-W)*(h[1]-X)/(we-X)+W;ze&&(x=!x)}return x}function ri(h,g){return g[0]<=h[0]&&g[1]<=h[1]&&g[2]>=h[0]&&g[3]>=h[1]}function Kl(h,g,_){_===void 0&&(_={});for(var x=Zr(h),k=ni(g),B=0;B<k.length-1;B++){var W=!1;if(_.ignoreEndVertices&&(B===0&&(W="start"),B===k.length-2&&(W="end"),B===0&&B+1===k.length-1&&(W="both")),Us(k[B],k[B+1],x,W,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function Us(h,g,_,x,k){var B=_[0],W=_[1],X=h[0],he=h[1],we=g[0],Ge=g[1],ze=_[0]-X,mt=_[1]-he,At=we-X,Gt=Ge-he,dn=ze*Gt-mt*At;if(k!==null){if(Math.abs(dn)>k)return!1}else if(dn!==0)return!1;if(x){if(x==="start")return Math.abs(At)>=Math.abs(Gt)?At>0?X<B&&B<=we:we<=B&&B<X:Gt>0?he<W&&W<=Ge:Ge<=W&&W<he;if(x==="end")return Math.abs(At)>=Math.abs(Gt)?At>0?X<=B&&B<we:we<B&&B<=X:Gt>0?he<=W&&W<Ge:Ge<W&&W<=he;if(x==="both")return Math.abs(At)>=Math.abs(Gt)?At>0?X<B&&B<we:we<B&&B<X:Gt>0?he<W&&W<Ge:Ge<W&&W<he}else return Math.abs(At)>=Math.abs(Gt)?At>0?X<=B&&B<=we:we<=B&&B<=X:Gt>0?he<=W&&W<=Ge:Ge<=W&&W<=he;return!1}var Li=Kl;function ta(h,g){var _=zi(h),x=zi(g),k=_.type,B=x.type,W=_.coordinates,X=x.coordinates;switch(k){case"Point":switch(B){case"Point":return ui(W,X);default:throw new Error("feature2 "+B+" geometry not supported")}case"MultiPoint":switch(B){case"Point":return _a(_,x);case"MultiPoint":return na(_,x);default:throw new Error("feature2 "+B+" geometry not supported")}case"LineString":switch(B){case"Point":return Li(x,_,{ignoreEndVertices:!0});case"LineString":return Ir(_,x);case"MultiPoint":return ra(_,x);default:throw new Error("feature2 "+B+" geometry not supported")}case"Polygon":switch(B){case"Point":return cr(x,_,{ignoreBoundary:!0});case"LineString":return Uo(_,x);case"Polygon":return hs(_,x);case"MultiPoint":return ia(_,x);default:throw new Error("feature2 "+B+" geometry not supported")}default:throw new Error("feature1 "+k+" geometry not supported")}}function _a(h,g){var _,x=!1;for(_=0;_<h.coordinates.length;_++)if(ui(h.coordinates[_],g.coordinates)){x=!0;break}return x}function na(h,g){for(var _=0,x=g.coordinates;_<x.length;_++){for(var k=x[_],B=!1,W=0,X=h.coordinates;W<X.length;W++){var he=X[W];if(ui(k,he)){B=!0;break}}if(!B)return!1}return!0}function ra(h,g){for(var _=!1,x=0,k=g.coordinates;x<k.length;x++){var B=k[x];if(Li(B,h,{ignoreEndVertices:!0})&&(_=!0),!Li(B,h))return!1}return!!_}function ia(h,g){for(var _=0,x=g.coordinates;_<x.length;_++){var k=x[_];if(!cr(k,h,{ignoreBoundary:!0}))return!1}return!0}function Ir(h,g){for(var _=!1,x=0,k=g.coordinates;x<k.length;x++){var B=k[x];if(Li({type:"Point",coordinates:B},h,{ignoreEndVertices:!0})&&(_=!0),!Li({type:"Point",coordinates:B},h,{ignoreEndVertices:!1}))return!1}return _}function Uo(h,g){var _=!1,x=0,k=va(h),B=va(g);if(!ii(k,B))return!1;for(x;x<g.coordinates.length-1;x++){var W=Ui(g.coordinates[x],g.coordinates[x+1]);if(cr({type:"Point",coordinates:W},h,{ignoreBoundary:!0})){_=!0;break}}return _}function hs(h,g){if(h.type==="Feature"&&h.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;var _=va(h),x=va(g);if(!ii(_,x))return!1;for(var k=zi(g).coordinates,B=0,W=k;B<W.length;B++)for(var X=W[B],he=0,we=X;he<we.length;he++){var Ge=we[he];if(!cr(Ge,h))return!1}return!0}function ii(h,g){return!(h[0]>g[0]||h[2]<g[2]||h[1]>g[1]||h[3]<g[3])}function ui(h,g){return h[0]===g[0]&&h[1]===g[1]}function Ui(h,g){return[(h[0]+g[0])/2,(h[1]+g[1])/2]}var mi=l(So()),wo=h=>()=>h,eo=h=>{let g=h?(_,x)=>x.minus(_).abs().isLessThanOrEqualTo(h):wo(!1);return(_,x)=>g(_,x)?0:_.comparedTo(x)};function Po(h){let g=h?(_,x,k,B,W)=>_.exponentiatedBy(2).isLessThanOrEqualTo(B.minus(x).exponentiatedBy(2).plus(W.minus(k).exponentiatedBy(2)).times(h)):wo(!1);return(_,x,k)=>{let B=_.x,W=_.y,X=k.x,he=k.y,we=W.minus(he).times(x.x.minus(X)).minus(B.minus(X).times(x.y.minus(he)));return g(we,B,W,X,he)?0:we.comparedTo(0)}}var Uu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,sa=Math.ceil,Zi=Math.floor,gi="[BigNumber Error] ",As=gi+"Number primitive has more than 15 significant digits: ",to=1e14,rr=14,wa=9007199254740991,xa=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],$o=1e7,$s=1e9;function Gc(h){var g,_,x,k=We.prototype={constructor:We,toString:null,valueOf:null},B=new We(1),W=20,X=4,he=-7,we=21,Ge=-1e7,ze=1e7,mt=!1,At=1,Gt=0,dn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},yn="0123456789abcdefghijklmnopqrstuvwxyz",er=!0;function We(fe,Se){var De,Oe,Re,Fe,tt,it,ft,Ct,St=this;if(!(St instanceof We))return new We(fe,Se);if(Se==null){if(fe&&fe._isBigNumber===!0){St.s=fe.s,!fe.c||fe.e>ze?St.c=St.e=null:fe.e<Ge?St.c=[St.e=0]:(St.e=fe.e,St.c=fe.c.slice());return}if((it=typeof fe=="number")&&fe*0==0){if(St.s=1/fe<0?(fe=-fe,-1):1,fe===~~fe){for(Fe=0,tt=fe;tt>=10;tt/=10,Fe++);Fe>ze?St.c=St.e=null:(St.e=Fe,St.c=[fe]);return}Ct=String(fe)}else{if(!Uu.test(Ct=String(fe)))return x(St,Ct,it);St.s=Ct.charCodeAt(0)==45?(Ct=Ct.slice(1),-1):1}(Fe=Ct.indexOf("."))>-1&&(Ct=Ct.replace(".","")),(tt=Ct.search(/e/i))>0?(Fe<0&&(Fe=tt),Fe+=+Ct.slice(tt+1),Ct=Ct.substring(0,tt)):Fe<0&&(Fe=Ct.length)}else{if(u(Se,2,yn.length,"Base"),Se==10&&er)return St=new We(fe),bt(St,W+St.e+1,X);if(Ct=String(fe),it=typeof fe=="number"){if(fe*0!=0)return x(St,Ct,it,Se);if(St.s=1/fe<0?(Ct=Ct.slice(1),-1):1,We.DEBUG&&Ct.replace(/^0\.0*|\./,"").length>15)throw Error(As+fe)}else St.s=Ct.charCodeAt(0)===45?(Ct=Ct.slice(1),-1):1;for(De=yn.slice(0,Se),Fe=tt=0,ft=Ct.length;tt<ft;tt++)if(De.indexOf(Oe=Ct.charAt(tt))<0){if(Oe=="."){if(tt>Fe){Fe=ft;continue}}else if(!Re&&(Ct==Ct.toUpperCase()&&(Ct=Ct.toLowerCase())||Ct==Ct.toLowerCase()&&(Ct=Ct.toUpperCase()))){Re=!0,tt=-1,Fe=0;continue}return x(St,String(fe),it,Se)}it=!1,Ct=_(Ct,Se,10,St.s),(Fe=Ct.indexOf("."))>-1?Ct=Ct.replace(".",""):Fe=Ct.length}for(tt=0;Ct.charCodeAt(tt)===48;tt++);for(ft=Ct.length;Ct.charCodeAt(--ft)===48;);if(Ct=Ct.slice(tt,++ft)){if(ft-=tt,it&&We.DEBUG&&ft>15&&(fe>wa||fe!==Zi(fe)))throw Error(As+St.s*fe);if((Fe=Fe-tt-1)>ze)St.c=St.e=null;else if(Fe<Ge)St.c=[St.e=0];else{if(St.e=Fe,St.c=[],tt=(Fe+1)%rr,Fe<0&&(tt+=rr),tt<ft){for(tt&&St.c.push(+Ct.slice(0,tt)),ft-=rr;tt<ft;)St.c.push(+Ct.slice(tt,tt+=rr));tt=rr-(Ct=Ct.slice(tt)).length}else tt-=ft;for(;tt--;Ct+="0");St.c.push(+Ct)}}else St.c=[St.e=0]}We.clone=Gc,We.ROUND_UP=0,We.ROUND_DOWN=1,We.ROUND_CEIL=2,We.ROUND_FLOOR=3,We.ROUND_HALF_UP=4,We.ROUND_HALF_DOWN=5,We.ROUND_HALF_EVEN=6,We.ROUND_HALF_CEIL=7,We.ROUND_HALF_FLOOR=8,We.EUCLID=9,We.config=We.set=function(fe){var Se,De;if(fe!=null)if(typeof fe=="object"){if(fe.hasOwnProperty(Se="DECIMAL_PLACES")&&(De=fe[Se],u(De,0,$s,Se),W=De),fe.hasOwnProperty(Se="ROUNDING_MODE")&&(De=fe[Se],u(De,0,8,Se),X=De),fe.hasOwnProperty(Se="EXPONENTIAL_AT")&&(De=fe[Se],De&&De.pop?(u(De[0],-1e9,0,Se),u(De[1],0,$s,Se),he=De[0],we=De[1]):(u(De,-1e9,$s,Se),he=-(we=De<0?-De:De))),fe.hasOwnProperty(Se="RANGE"))if(De=fe[Se],De&&De.pop)u(De[0],-1e9,-1,Se),u(De[1],1,$s,Se),Ge=De[0],ze=De[1];else if(u(De,-1e9,$s,Se),De)Ge=-(ze=De<0?-De:De);else throw Error(gi+Se+" cannot be zero: "+De);if(fe.hasOwnProperty(Se="CRYPTO"))if(De=fe[Se],De===!!De)if(De)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))mt=De;else throw mt=!De,Error(gi+"crypto unavailable");else mt=De;else throw Error(gi+Se+" not true or false: "+De);if(fe.hasOwnProperty(Se="MODULO_MODE")&&(De=fe[Se],u(De,0,9,Se),At=De),fe.hasOwnProperty(Se="POW_PRECISION")&&(De=fe[Se],u(De,0,$s,Se),Gt=De),fe.hasOwnProperty(Se="FORMAT"))if(De=fe[Se],typeof De=="object")dn=De;else throw Error(gi+Se+" not an object: "+De);if(fe.hasOwnProperty(Se="ALPHABET"))if(De=fe[Se],typeof De=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(De))er=De.slice(0,10)=="0123456789",yn=De;else throw Error(gi+Se+" invalid: "+De)}else throw Error(gi+"Object expected: "+fe);return{DECIMAL_PLACES:W,ROUNDING_MODE:X,EXPONENTIAL_AT:[he,we],RANGE:[Ge,ze],CRYPTO:mt,MODULO_MODE:At,POW_PRECISION:Gt,FORMAT:dn,ALPHABET:yn}},We.isBigNumber=function(fe){if(!fe||fe._isBigNumber!==!0)return!1;if(!We.DEBUG)return!0;var Se,De,Oe=fe.c,Re=fe.e,Fe=fe.s;e:if({}.toString.call(Oe)=="[object Array]"){if((Fe===1||Fe===-1)&&Re>=-1e9&&Re<=$s&&Re===Zi(Re)){if(Oe[0]===0){if(Re===0&&Oe.length===1)return!0;break e}if(Se=(Re+1)%rr,Se<1&&(Se+=rr),String(Oe[0]).length==Se){for(Se=0;Se<Oe.length;Se++)if(De=Oe[Se],De<0||De>=to||De!==Zi(De))break e;if(De!==0)return!0}}}else if(Oe===null&&Re===null&&(Fe===null||Fe===1||Fe===-1))return!0;throw Error(gi+"Invalid BigNumber: "+fe)},We.maximum=We.max=function(){return ut(arguments,-1)},We.minimum=We.min=function(){return ut(arguments,1)},We.random=function(){var fe=9007199254740992,Se=Math.random()*fe&2097151?function(){return Zi(Math.random()*fe)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(De){var Oe,Re,Fe,tt,it,ft=0,Ct=[],St=new We(B);if(De==null?De=W:u(De,0,$s),tt=sa(De/rr),mt)if(crypto.getRandomValues){for(Oe=crypto.getRandomValues(new Uint32Array(tt*=2));ft<tt;)it=Oe[ft]*131072+(Oe[ft+1]>>>11),it>=9e15?(Re=crypto.getRandomValues(new Uint32Array(2)),Oe[ft]=Re[0],Oe[ft+1]=Re[1]):(Ct.push(it%1e14),ft+=2);ft=tt/2}else if(crypto.randomBytes){for(Oe=crypto.randomBytes(tt*=7);ft<tt;)it=(Oe[ft]&31)*281474976710656+Oe[ft+1]*1099511627776+Oe[ft+2]*4294967296+Oe[ft+3]*16777216+(Oe[ft+4]<<16)+(Oe[ft+5]<<8)+Oe[ft+6],it>=9e15?crypto.randomBytes(7).copy(Oe,ft):(Ct.push(it%1e14),ft+=7);ft=tt/7}else throw mt=!1,Error(gi+"crypto unavailable");if(!mt)for(;ft<tt;)it=Se(),it<9e15&&(Ct[ft++]=it%1e14);for(tt=Ct[--ft],De%=rr,tt&&De&&(it=xa[rr-De],Ct[ft]=Zi(tt/it)*it);Ct[ft]===0;Ct.pop(),ft--);if(ft<0)Ct=[Fe=0];else{for(Fe=-1;Ct[0]===0;Ct.splice(0,1),Fe-=rr);for(ft=1,it=Ct[0];it>=10;it/=10,ft++);ft<rr&&(Fe-=rr-ft)}return St.e=Fe,St.c=Ct,St}}(),We.sum=function(){for(var fe=1,Se=arguments,De=new We(Se[0]);fe<Se.length;)De=De.plus(Se[fe++]);return De},_=function(){var fe="0123456789";function Se(De,Oe,Re,Fe){for(var tt,it=[0],ft,Ct=0,St=De.length;Ct<St;){for(ft=it.length;ft--;it[ft]*=Oe);for(it[0]+=Fe.indexOf(De.charAt(Ct++)),tt=0;tt<it.length;tt++)it[tt]>Re-1&&(it[tt+1]==null&&(it[tt+1]=0),it[tt+1]+=it[tt]/Re|0,it[tt]%=Re)}return it.reverse()}return function(De,Oe,Re,Fe,tt){var it,ft,Ct,St,en,On,Fn,Gn,Jr=De.indexOf("."),ci=W,Nr=X;for(Jr>=0&&(St=Gt,Gt=0,De=De.replace(".",""),Gn=new We(Oe),On=Gn.pow(De.length-Jr),Gt=St,Gn.c=Se(F(ds(On.c),On.e,"0"),10,Re,fe),Gn.e=Gn.c.length),Fn=Se(De,Oe,Re,tt?(it=yn,fe):(it=fe,yn)),Ct=St=Fn.length;Fn[--St]==0;Fn.pop());if(!Fn[0])return it.charAt(0);if(Jr<0?--Ct:(On.c=Fn,On.e=Ct,On.s=Fe,On=g(On,Gn,ci,Nr,Re),Fn=On.c,en=On.r,Ct=On.e),ft=Ct+ci+1,Jr=Fn[ft],St=Re/2,en=en||ft<0||Fn[ft+1]!=null,en=Nr<4?(Jr!=null||en)&&(Nr==0||Nr==(On.s<0?3:2)):Jr>St||Jr==St&&(Nr==4||en||Nr==6&&Fn[ft-1]&1||Nr==(On.s<0?8:7)),ft<1||!Fn[0])De=en?F(it.charAt(1),-ci,it.charAt(0)):it.charAt(0);else{if(Fn.length=ft,en)for(--Re;++Fn[--ft]>Re;)Fn[ft]=0,ft||(++Ct,Fn=[1].concat(Fn));for(St=Fn.length;!Fn[--St];);for(Jr=0,De="";Jr<=St;De+=it.charAt(Fn[Jr++]));De=F(De,Ct,it.charAt(0))}return De}}(),g=function(){function fe(Oe,Re,Fe){var tt,it,ft,Ct,St=0,en=Oe.length,On=Re%$o,Fn=Re/$o|0;for(Oe=Oe.slice();en--;)ft=Oe[en]%$o,Ct=Oe[en]/$o|0,tt=Fn*ft+Ct*On,it=On*ft+tt%$o*$o+St,St=(it/Fe|0)+(tt/$o|0)+Fn*Ct,Oe[en]=it%Fe;return St&&(Oe=[St].concat(Oe)),Oe}function Se(Oe,Re,Fe,tt){var it,ft;if(Fe!=tt)ft=Fe>tt?1:-1;else for(it=ft=0;it<Fe;it++)if(Oe[it]!=Re[it]){ft=Oe[it]>Re[it]?1:-1;break}return ft}function De(Oe,Re,Fe,tt){for(var it=0;Fe--;)Oe[Fe]-=it,it=Oe[Fe]<Re[Fe]?1:0,Oe[Fe]=it*tt+Oe[Fe]-Re[Fe];for(;!Oe[0]&&Oe.length>1;Oe.splice(0,1));}return function(Oe,Re,Fe,tt,it){var ft,Ct,St,en,On,Fn,Gn,Jr,ci,Nr,vi,io,Vu,aa,mf,Xa,_c,la=Oe.s==Re.s?1:-1,Os=Oe.c,$i=Re.c;if(!Os||!Os[0]||!$i||!$i[0])return new We(!Oe.s||!Re.s||(Os?$i&&Os[0]==$i[0]:!$i)?NaN:Os&&Os[0]==0||!$i?la*0:la/0);for(Jr=new We(la),ci=Jr.c=[],Ct=Oe.e-Re.e,la=Fe+Ct+1,it||(it=to,Ct=fs(Oe.e/rr)-fs(Re.e/rr),la=la/rr|0),St=0;$i[St]==(Os[St]||0);St++);if($i[St]>(Os[St]||0)&&Ct--,la<0)ci.push(1),en=!0;else{for(aa=Os.length,Xa=$i.length,St=0,la+=2,On=Zi(it/($i[0]+1)),On>1&&($i=fe($i,On,it),Os=fe(Os,On,it),Xa=$i.length,aa=Os.length),Vu=Xa,Nr=Os.slice(0,Xa),vi=Nr.length;vi<Xa;Nr[vi++]=0);_c=$i.slice(),_c=[0].concat(_c),mf=$i[0],$i[1]>=it/2&&mf++;do{if(On=0,ft=Se($i,Nr,Xa,vi),ft<0){if(io=Nr[0],Xa!=vi&&(io=io*it+(Nr[1]||0)),On=Zi(io/mf),On>1)for(On>=it&&(On=it-1),Fn=fe($i,On,it),Gn=Fn.length,vi=Nr.length;Se(Fn,Nr,Gn,vi)==1;)On--,De(Fn,Xa<Gn?_c:$i,Gn,it),Gn=Fn.length,ft=1;else On==0&&(ft=On=1),Fn=$i.slice(),Gn=Fn.length;if(Gn<vi&&(Fn=[0].concat(Fn)),De(Nr,Fn,vi,it),vi=Nr.length,ft==-1)for(;Se($i,Nr,Xa,vi)<1;)On++,De(Nr,Xa<vi?_c:$i,vi,it),vi=Nr.length}else ft===0&&(On++,Nr=[0]);ci[St++]=On,Nr[0]?Nr[vi++]=Os[Vu]||0:(Nr=[Os[Vu]],vi=1)}while((Vu++<aa||Nr[0]!=null)&&la--);en=Nr[0]!=null,ci[0]||ci.splice(0,1)}if(it==to){for(St=1,la=ci[0];la>=10;la/=10,St++);bt(Jr,Fe+(Jr.e=St+Ct*rr-1)+1,tt,en)}else Jr.e=Ct,Jr.r=+en;return Jr}}();function qe(fe,Se,De,Oe){var Re,Fe,tt,it,ft;if(De==null?De=X:u(De,0,8),!fe.c)return fe.toString();if(Re=fe.c[0],tt=fe.e,Se==null)ft=ds(fe.c),ft=Oe==1||Oe==2&&(tt<=he||tt>=we)?E(ft,tt):F(ft,tt,"0");else if(fe=bt(new We(fe),Se,De),Fe=fe.e,ft=ds(fe.c),it=ft.length,Oe==1||Oe==2&&(Se<=Fe||Fe<=he)){for(;it<Se;ft+="0",it++);ft=E(ft,Fe)}else if(Se-=tt,ft=F(ft,Fe,"0"),Fe+1>it){if(--Se>0)for(ft+=".";Se--;ft+="0");}else if(Se+=Fe-it,Se>0)for(Fe+1==it&&(ft+=".");Se--;ft+="0");return fe.s<0&&Re?"-"+ft:ft}function ut(fe,Se){for(var De,Oe,Re=1,Fe=new We(fe[0]);Re<fe.length;Re++)Oe=new We(fe[Re]),(!Oe.s||(De=Vo(Fe,Oe))===Se||De===0&&Fe.s===Se)&&(Fe=Oe);return Fe}function It(fe,Se,De){for(var Oe=1,Re=Se.length;!Se[--Re];Se.pop());for(Re=Se[0];Re>=10;Re/=10,Oe++);return(De=Oe+De*rr-1)>ze?fe.c=fe.e=null:De<Ge?fe.c=[fe.e=0]:(fe.e=De,fe.c=Se),fe}x=function(){var fe=/^(-?)0([xbo])(?=\w[\w.]*$)/i,Se=/^([^.]+)\.$/,De=/^\.([^.]+)$/,Oe=/^-?(Infinity|NaN)$/,Re=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Fe,tt,it,ft){var Ct,St=it?tt:tt.replace(Re,"");if(Oe.test(St))Fe.s=isNaN(St)?null:St<0?-1:1;else{if(!it&&(St=St.replace(fe,function(en,On,Fn){return Ct=(Fn=Fn.toLowerCase())=="x"?16:Fn=="b"?2:8,!ft||ft==Ct?On:en}),ft&&(Ct=ft,St=St.replace(Se,"$1").replace(De,"0.$1")),tt!=St))return new We(St,Ct);if(We.DEBUG)throw Error(gi+"Not a"+(ft?" base "+ft:"")+" number: "+tt);Fe.s=null}Fe.c=Fe.e=null}}();function bt(fe,Se,De,Oe){var Re,Fe,tt,it,ft,Ct,St,en=fe.c,On=xa;if(en){e:{for(Re=1,it=en[0];it>=10;it/=10,Re++);if(Fe=Se-Re,Fe<0)Fe+=rr,tt=Se,ft=en[Ct=0],St=Zi(ft/On[Re-tt-1]%10);else if(Ct=sa((Fe+1)/rr),Ct>=en.length)if(Oe){for(;en.length<=Ct;en.push(0));ft=St=0,Re=1,Fe%=rr,tt=Fe-rr+1}else break e;else{for(ft=it=en[Ct],Re=1;it>=10;it/=10,Re++);Fe%=rr,tt=Fe-rr+Re,St=tt<0?0:Zi(ft/On[Re-tt-1]%10)}if(Oe=Oe||Se<0||en[Ct+1]!=null||(tt<0?ft:ft%On[Re-tt-1]),Oe=De<4?(St||Oe)&&(De==0||De==(fe.s<0?3:2)):St>5||St==5&&(De==4||Oe||De==6&&(Fe>0?tt>0?ft/On[Re-tt]:0:en[Ct-1])%10&1||De==(fe.s<0?8:7)),Se<1||!en[0])return en.length=0,Oe?(Se-=fe.e+1,en[0]=On[(rr-Se%rr)%rr],fe.e=-Se||0):en[0]=fe.e=0,fe;if(Fe==0?(en.length=Ct,it=1,Ct--):(en.length=Ct+1,it=On[rr-Fe],en[Ct]=tt>0?Zi(ft/On[Re-tt]%On[tt])*it:0),Oe)for(;;)if(Ct==0){for(Fe=1,tt=en[0];tt>=10;tt/=10,Fe++);for(tt=en[0]+=it,it=1;tt>=10;tt/=10,it++);Fe!=it&&(fe.e++,en[0]==to&&(en[0]=1));break}else{if(en[Ct]+=it,en[Ct]!=to)break;en[Ct--]=0,it=1}for(Fe=en.length;en[--Fe]===0;en.pop());}fe.e>ze?fe.c=fe.e=null:fe.e<Ge&&(fe.c=[fe.e=0])}return fe}function Tt(fe){var Se,De=fe.e;return De===null?fe.toString():(Se=ds(fe.c),Se=De<=he||De>=we?E(Se,De):F(Se,De,"0"),fe.s<0?"-"+Se:Se)}return k.absoluteValue=k.abs=function(){var fe=new We(this);return fe.s<0&&(fe.s=1),fe},k.comparedTo=function(fe,Se){return Vo(this,new We(fe,Se))},k.decimalPlaces=k.dp=function(fe,Se){var De,Oe,Re,Fe=this;if(fe!=null)return u(fe,0,$s),Se==null?Se=X:u(Se,0,8),bt(new We(Fe),fe+Fe.e+1,Se);if(!(De=Fe.c))return null;if(Oe=((Re=De.length-1)-fs(this.e/rr))*rr,Re=De[Re])for(;Re%10==0;Re/=10,Oe--);return Oe<0&&(Oe=0),Oe},k.dividedBy=k.div=function(fe,Se){return g(this,new We(fe,Se),W,X)},k.dividedToIntegerBy=k.idiv=function(fe,Se){return g(this,new We(fe,Se),0,1)},k.exponentiatedBy=k.pow=function(fe,Se){var De,Oe,Re,Fe,tt,it,ft,Ct,St,en=this;if(fe=new We(fe),fe.c&&!fe.isInteger())throw Error(gi+"Exponent not an integer: "+Tt(fe));if(Se!=null&&(Se=new We(Se)),it=fe.e>14,!en.c||!en.c[0]||en.c[0]==1&&!en.e&&en.c.length==1||!fe.c||!fe.c[0])return St=new We(Math.pow(+Tt(en),it?fe.s*(2-v(fe)):+Tt(fe))),Se?St.mod(Se):St;if(ft=fe.s<0,Se){if(Se.c?!Se.c[0]:!Se.s)return new We(NaN);Oe=!ft&&en.isInteger()&&Se.isInteger(),Oe&&(en=en.mod(Se))}else{if(fe.e>9&&(en.e>0||en.e<-1||(en.e==0?en.c[0]>1||it&&en.c[1]>=24e7:en.c[0]<8e13||it&&en.c[0]<=9999975e7)))return Fe=en.s<0&&v(fe)?-0:0,en.e>-1&&(Fe=1/Fe),new We(ft?1/Fe:Fe);Gt&&(Fe=sa(Gt/rr+2))}for(it?(De=new We(.5),ft&&(fe.s=1),Ct=v(fe)):(Re=Math.abs(+Tt(fe)),Ct=Re%2),St=new We(B);;){if(Ct){if(St=St.times(en),!St.c)break;Fe?St.c.length>Fe&&(St.c.length=Fe):Oe&&(St=St.mod(Se))}if(Re){if(Re=Zi(Re/2),Re===0)break;Ct=Re%2}else if(fe=fe.times(De),bt(fe,fe.e+1,1),fe.e>14)Ct=v(fe);else{if(Re=+Tt(fe),Re===0)break;Ct=Re%2}en=en.times(en),Fe?en.c&&en.c.length>Fe&&(en.c.length=Fe):Oe&&(en=en.mod(Se))}return Oe?St:(ft&&(St=B.div(St)),Se?St.mod(Se):Fe?bt(St,Gt,X,tt):St)},k.integerValue=function(fe){var Se=new We(this);return fe==null?fe=X:u(fe,0,8),bt(Se,Se.e+1,fe)},k.isEqualTo=k.eq=function(fe,Se){return Vo(this,new We(fe,Se))===0},k.isFinite=function(){return!!this.c},k.isGreaterThan=k.gt=function(fe,Se){return Vo(this,new We(fe,Se))>0},k.isGreaterThanOrEqualTo=k.gte=function(fe,Se){return(Se=Vo(this,new We(fe,Se)))===1||Se===0},k.isInteger=function(){return!!this.c&&fs(this.e/rr)>this.c.length-2},k.isLessThan=k.lt=function(fe,Se){return Vo(this,new We(fe,Se))<0},k.isLessThanOrEqualTo=k.lte=function(fe,Se){return(Se=Vo(this,new We(fe,Se)))===-1||Se===0},k.isNaN=function(){return!this.s},k.isNegative=function(){return this.s<0},k.isPositive=function(){return this.s>0},k.isZero=function(){return!!this.c&&this.c[0]==0},k.minus=function(fe,Se){var De,Oe,Re,Fe,tt=this,it=tt.s;if(fe=new We(fe,Se),Se=fe.s,!it||!Se)return new We(NaN);if(it!=Se)return fe.s=-Se,tt.plus(fe);var ft=tt.e/rr,Ct=fe.e/rr,St=tt.c,en=fe.c;if(!ft||!Ct){if(!St||!en)return St?(fe.s=-Se,fe):new We(en?tt:NaN);if(!St[0]||!en[0])return en[0]?(fe.s=-Se,fe):new We(St[0]?tt:X==3?-0:0)}if(ft=fs(ft),Ct=fs(Ct),St=St.slice(),it=ft-Ct){for((Fe=it<0)?(it=-it,Re=St):(Ct=ft,Re=en),Re.reverse(),Se=it;Se--;Re.push(0));Re.reverse()}else for(Oe=(Fe=(it=St.length)<(Se=en.length))?it:Se,it=Se=0;Se<Oe;Se++)if(St[Se]!=en[Se]){Fe=St[Se]<en[Se];break}if(Fe&&(Re=St,St=en,en=Re,fe.s=-fe.s),Se=(Oe=en.length)-(De=St.length),Se>0)for(;Se--;St[De++]=0);for(Se=to-1;Oe>it;){if(St[--Oe]<en[Oe]){for(De=Oe;De&&!St[--De];St[De]=Se);--St[De],St[Oe]+=to}St[Oe]-=en[Oe]}for(;St[0]==0;St.splice(0,1),--Ct);return St[0]?It(fe,St,Ct):(fe.s=X==3?-1:1,fe.c=[fe.e=0],fe)},k.modulo=k.mod=function(fe,Se){var De,Oe,Re=this;return fe=new We(fe,Se),!Re.c||!fe.s||fe.c&&!fe.c[0]?new We(NaN):!fe.c||Re.c&&!Re.c[0]?new We(Re):(At==9?(Oe=fe.s,fe.s=1,De=g(Re,fe,0,3),fe.s=Oe,De.s*=Oe):De=g(Re,fe,0,At),fe=Re.minus(De.times(fe)),!fe.c[0]&&At==1&&(fe.s=Re.s),fe)},k.multipliedBy=k.times=function(fe,Se){var De,Oe,Re,Fe,tt,it,ft,Ct,St,en,On,Fn,Gn,Jr,ci,Nr=this,vi=Nr.c,io=(fe=new We(fe,Se)).c;if(!vi||!io||!vi[0]||!io[0])return!Nr.s||!fe.s||vi&&!vi[0]&&!io||io&&!io[0]&&!vi?fe.c=fe.e=fe.s=null:(fe.s*=Nr.s,!vi||!io?fe.c=fe.e=null:(fe.c=[0],fe.e=0)),fe;for(Oe=fs(Nr.e/rr)+fs(fe.e/rr),fe.s*=Nr.s,ft=vi.length,en=io.length,ft<en&&(Gn=vi,vi=io,io=Gn,Re=ft,ft=en,en=Re),Re=ft+en,Gn=[];Re--;Gn.push(0));for(Jr=to,ci=$o,Re=en;--Re>=0;){for(De=0,On=io[Re]%ci,Fn=io[Re]/ci|0,tt=ft,Fe=Re+tt;Fe>Re;)Ct=vi[--tt]%ci,St=vi[tt]/ci|0,it=Fn*Ct+St*On,Ct=On*Ct+it%ci*ci+Gn[Fe]+De,De=(Ct/Jr|0)+(it/ci|0)+Fn*St,Gn[Fe--]=Ct%Jr;Gn[Fe]=De}return De?++Oe:Gn.splice(0,1),It(fe,Gn,Oe)},k.negated=function(){var fe=new We(this);return fe.s=-fe.s||null,fe},k.plus=function(fe,Se){var De,Oe=this,Re=Oe.s;if(fe=new We(fe,Se),Se=fe.s,!Re||!Se)return new We(NaN);if(Re!=Se)return fe.s=-Se,Oe.minus(fe);var Fe=Oe.e/rr,tt=fe.e/rr,it=Oe.c,ft=fe.c;if(!Fe||!tt){if(!it||!ft)return new We(Re/0);if(!it[0]||!ft[0])return ft[0]?fe:new We(it[0]?Oe:Re*0)}if(Fe=fs(Fe),tt=fs(tt),it=it.slice(),Re=Fe-tt){for(Re>0?(tt=Fe,De=ft):(Re=-Re,De=it),De.reverse();Re--;De.push(0));De.reverse()}for(Re=it.length,Se=ft.length,Re-Se<0&&(De=ft,ft=it,it=De,Se=Re),Re=0;Se;)Re=(it[--Se]=it[Se]+ft[Se]+Re)/to|0,it[Se]=to===it[Se]?0:it[Se]%to;return Re&&(it=[Re].concat(it),++tt),It(fe,it,tt)},k.precision=k.sd=function(fe,Se){var De,Oe,Re,Fe=this;if(fe!=null&&fe!==!!fe)return u(fe,1,$s),Se==null?Se=X:u(Se,0,8),bt(new We(Fe),fe,Se);if(!(De=Fe.c))return null;if(Re=De.length-1,Oe=Re*rr+1,Re=De[Re]){for(;Re%10==0;Re/=10,Oe--);for(Re=De[0];Re>=10;Re/=10,Oe++);}return fe&&Fe.e+1>Oe&&(Oe=Fe.e+1),Oe},k.shiftedBy=function(fe){return u(fe,-9007199254740991,wa),this.times("1e"+fe)},k.squareRoot=k.sqrt=function(){var fe,Se,De,Oe,Re,Fe=this,tt=Fe.c,it=Fe.s,ft=Fe.e,Ct=W+4,St=new We("0.5");if(it!==1||!tt||!tt[0])return new We(!it||it<0&&(!tt||tt[0])?NaN:tt?Fe:1/0);if(it=Math.sqrt(+Tt(Fe)),it==0||it==1/0?(Se=ds(tt),(Se.length+ft)%2==0&&(Se+="0"),it=Math.sqrt(+Se),ft=fs((ft+1)/2)-(ft<0||ft%2),it==1/0?Se="5e"+ft:(Se=it.toExponential(),Se=Se.slice(0,Se.indexOf("e")+1)+ft),De=new We(Se)):De=new We(it+""),De.c[0]){for(ft=De.e,it=ft+Ct,it<3&&(it=0);;)if(Re=De,De=St.times(Re.plus(g(Fe,Re,Ct,1))),ds(Re.c).slice(0,it)===(Se=ds(De.c)).slice(0,it))if(De.e<ft&&--it,Se=Se.slice(it-3,it+1),Se=="9999"||!Oe&&Se=="4999"){if(!Oe&&(bt(Re,Re.e+W+2,0),Re.times(Re).eq(Fe))){De=Re;break}Ct+=4,it+=4,Oe=1}else{(!+Se||!+Se.slice(1)&&Se.charAt(0)=="5")&&(bt(De,De.e+W+2,1),fe=!De.times(De).eq(Fe));break}}return bt(De,De.e+W+1,X,fe)},k.toExponential=function(fe,Se){return fe!=null&&(u(fe,0,$s),fe++),qe(this,fe,Se,1)},k.toFixed=function(fe,Se){return fe!=null&&(u(fe,0,$s),fe=fe+this.e+1),qe(this,fe,Se)},k.toFormat=function(fe,Se,De){var Oe,Re=this;if(De==null)fe!=null&&Se&&typeof Se=="object"?(De=Se,Se=null):fe&&typeof fe=="object"?(De=fe,fe=Se=null):De=dn;else if(typeof De!="object")throw Error(gi+"Argument not an object: "+De);if(Oe=Re.toFixed(fe,Se),Re.c){var Fe,tt=Oe.split("."),it=+De.groupSize,ft=+De.secondaryGroupSize,Ct=De.groupSeparator||"",St=tt[0],en=tt[1],On=Re.s<0,Fn=On?St.slice(1):St,Gn=Fn.length;if(ft&&(Fe=it,it=ft,ft=Fe,Gn-=Fe),it>0&&Gn>0){for(Fe=Gn%it||it,St=Fn.substr(0,Fe);Fe<Gn;Fe+=it)St+=Ct+Fn.substr(Fe,it);ft>0&&(St+=Ct+Fn.slice(Fe)),On&&(St="-"+St)}Oe=en?St+(De.decimalSeparator||"")+((ft=+De.fractionGroupSize)?en.replace(new RegExp("\\d{"+ft+"}\\B","g"),"$&"+(De.fractionGroupSeparator||"")):en):St}return(De.prefix||"")+Oe+(De.suffix||"")},k.toFraction=function(fe){var Se,De,Oe,Re,Fe,tt,it,ft,Ct,St,en,On,Fn=this,Gn=Fn.c;if(fe!=null&&(it=new We(fe),!it.isInteger()&&(it.c||it.s!==1)||it.lt(B)))throw Error(gi+"Argument "+(it.isInteger()?"out of range: ":"not an integer: ")+Tt(it));if(!Gn)return new We(Fn);for(Se=new We(B),Ct=De=new We(B),Oe=ft=new We(B),On=ds(Gn),Fe=Se.e=On.length-Fn.e-1,Se.c[0]=xa[(tt=Fe%rr)<0?rr+tt:tt],fe=!fe||it.comparedTo(Se)>0?Fe>0?Se:Ct:it,tt=ze,ze=1/0,it=new We(On),ft.c[0]=0;St=g(it,Se,0,1),Re=De.plus(St.times(Oe)),Re.comparedTo(fe)!=1;)De=Oe,Oe=Re,Ct=ft.plus(St.times(Re=Ct)),ft=Re,Se=it.minus(St.times(Re=Se)),it=Re;return Re=g(fe.minus(De),Oe,0,1),ft=ft.plus(Re.times(Ct)),De=De.plus(Re.times(Oe)),ft.s=Ct.s=Fn.s,Fe=Fe*2,en=g(Ct,Oe,Fe,X).minus(Fn).abs().comparedTo(g(ft,De,Fe,X).minus(Fn).abs())<1?[Ct,Oe]:[ft,De],ze=tt,en},k.toNumber=function(){return+Tt(this)},k.toPrecision=function(fe,Se){return fe!=null&&u(fe,1,$s),qe(this,fe,Se,2)},k.toString=function(fe){var Se,De=this,Oe=De.s,Re=De.e;return Re===null?Oe?(Se="Infinity",Oe<0&&(Se="-"+Se)):Se="NaN":(fe==null?Se=Re<=he||Re>=we?E(ds(De.c),Re):F(ds(De.c),Re,"0"):fe===10&&er?(De=bt(new We(De),W+Re+1,X),Se=F(ds(De.c),De.e,"0")):(u(fe,2,yn.length,"Base"),Se=_(F(ds(De.c),Re,"0"),10,fe,Oe,!0)),Oe<0&&De.c[0]&&(Se="-"+Se)),Se},k.valueOf=k.toJSON=function(){return Tt(this)},k._isBigNumber=!0,k[Symbol.toStringTag]="BigNumber",k[Symbol.for("nodejs.util.inspect.custom")]=k.valueOf,h!=null&&We.set(h),We}function fs(h){var g=h|0;return h>0||h===g?g:g-1}function ds(h){for(var g,_,x=1,k=h.length,B=h[0]+"";x<k;){for(g=h[x++]+"",_=rr-g.length;_--;g="0"+g);B+=g}for(k=B.length;B.charCodeAt(--k)===48;);return B.slice(0,k+1||1)}function Vo(h,g){var _,x,k=h.c,B=g.c,W=h.s,X=g.s,he=h.e,we=g.e;if(!W||!X)return null;if(_=k&&!k[0],x=B&&!B[0],_||x)return _?x?0:-X:W;if(W!=X)return W;if(_=W<0,x=he==we,!k||!B)return x?0:!k^_?1:-1;if(!x)return he>we^_?1:-1;for(X=(he=k.length)<(we=B.length)?he:we,W=0;W<X;W++)if(k[W]!=B[W])return k[W]>B[W]^_?1:-1;return he==we?0:he>we^_?1:-1}function u(h,g,_,x){if(h<g||h>_||h!==Zi(h))throw Error(gi+(x||"Argument")+(typeof h=="number"?h<g||h>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(h))}function v(h){var g=h.c.length-1;return fs(h.e/rr)==g&&h.c[g]%2!=0}function E(h,g){return(h.length>1?h.charAt(0)+"."+h.slice(1):h)+(g<0?"e":"e+")+g}function F(h,g,_){var x,k;if(g<0){for(k=_+".";++g;k+=_);h=k+h}else if(x=h.length,++g>x){for(k=_,g-=x;--g;k+=_);h+=k}else g<x&&(h=h.slice(0,g)+"."+h.slice(g));return h}var te=Gc(),Le=te,et=class{constructor(h){nt(this,"key");nt(this,"left",null);nt(this,"right",null);this.key=h}},Pt=class extends et{constructor(h){super(h)}},Rt=class{constructor(){nt(this,"size",0);nt(this,"modificationCount",0);nt(this,"splayCount",0)}splay(h){let g=this.root;if(g==null)return this.compare(h,h),-1;let _=null,x=null,k=null,B=null,W=g,X=this.compare,he;for(;;)if(he=X(W.key,h),he>0){let we=W.left;if(we==null||(he=X(we.key,h),he>0&&(W.left=we.right,we.right=W,W=we,we=W.left,we==null)))break;_==null?x=W:_.left=W,_=W,W=we}else if(he<0){let we=W.right;if(we==null||(he=X(we.key,h),he<0&&(W.right=we.left,we.left=W,W=we,we=W.right,we==null)))break;k==null?B=W:k.right=W,k=W,W=we}else break;return k!=null&&(k.right=W.left,W.left=B),_!=null&&(_.left=W.right,W.right=x),this.root!==W&&(this.root=W,this.splayCount++),he}splayMin(h){let g=h,_=g.left;for(;_!=null;){let x=_;g.left=x.right,x.right=g,g=x,_=g.left}return g}splayMax(h){let g=h,_=g.right;for(;_!=null;){let x=_;g.right=x.left,x.left=g,g=x,_=g.right}return g}_delete(h){if(this.root==null||this.splay(h)!=0)return null;let g=this.root,_=g,x=g.left;if(this.size--,x==null)this.root=g.right;else{let k=g.right;g=this.splayMax(x),g.right=k,this.root=g}return this.modificationCount++,_}addNewRoot(h,g){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=h;return}g<0?(h.left=_,h.right=_.right,_.right=null):(h.right=_,h.left=_.left,_.left=null),this.root=h}_first(){let h=this.root;return h==null?null:(this.root=this.splayMin(h),this.root)}_last(){let h=this.root;return h==null?null:(this.root=this.splayMax(h),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(h){return this.validKey(h)&&this.splay(h)==0}defaultCompare(){return(h,g)=>h<g?-1:h>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:h=>{this.root=h},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:h=>{this.splayCount=h},splay:h=>this.splay(h),has:h=>this.has(h)}}},nn=class Kp extends Rt{constructor(_,x){super();nt(this,"root",null);nt(this,"compare");nt(this,"validKey");nt(this,xn,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=x??(k=>k!=null&&k!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let x of _)this.delete(x)}forEach(_){let x=this[Symbol.iterator](),k;for(;k=x.next(),!k.done;)_(k.value,k.value,this)}add(_){let x=this.splay(_);return x!=0&&this.addNewRoot(new Pt(_),x),this}addAndReturn(_){let x=this.splay(_);return x!=0&&this.addNewRoot(new Pt(_),x),this.root.key}addAll(_){for(let x of _)this.add(x)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let x=this.root.left;if(x==null)return null;let k=x.right;for(;k!=null;)x=k,k=x.right;return x.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let x=this.root.right;if(x==null)return null;let k=x.left;for(;k!=null;)x=k,k=x.left;return x.key}retainAll(_){let x=new Kp(this.compare,this.validKey),k=this.modificationCount;for(let B of _){if(k!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(B)&&this.splay(B)==0&&x.add(this.root.key)}x.size!=this.size&&(this.root=x.root,this.size=x.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let x=new Kp(this.compare,this.validKey);for(let k of this)_.has(k)&&x.add(k);return x}difference(_){let x=new Kp(this.compare,this.validKey);for(let k of this)_.has(k)||x.add(k);return x}union(_){let x=this.clone();return x.addAll(_),x}clone(){let _=new Kp(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function x(B,W){let X,he;do{if(X=B.left,he=B.right,X!=null){let we=new Pt(X.key);W.left=we,x(X,we)}if(he!=null){let we=new Pt(he.key);W.right=we,B=he,W=we}}while(he!=null)}let k=new Pt(_.key);return x(_,k),k}toSet(){return this.clone()}entries(){return new Cr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Wn=Symbol.iterator,xn=Symbol.toStringTag,Wn)](){return new Hn(this.wrap())}},kn=class{constructor(h){nt(this,"tree");nt(this,"path",new Array);nt(this,"modificationCount",null);nt(this,"splayCount");this.tree=h,this.splayCount=h.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let h=this.path[this.path.length-1];return this.getValue(h)}rebuildPath(h){this.path.splice(0,this.path.length),this.tree.splay(h),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(h){for(;h!=null;)this.path.push(h),h=h.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let h=this.path[this.path.length-1],g=h.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===h;)h=this.path.pop();return this.path.length>0}},Hn=class extends kn{getValue(h){return h.key}},Cr=class extends kn{getValue(h){return[h.key,h.key]}},Ki=h=>h,Oi=h=>{if(h){let g=new nn(eo(h)),_=new nn(eo(h)),x=(B,W)=>W.addAndReturn(B),k=B=>({x:x(B.x,g),y:x(B.y,_)});return k({x:new Le(0),y:new Le(0)}),k}return Ki},ps=h=>({set:g=>{Ci=ps(g)},reset:()=>ps(h),compare:eo(h),snap:Oi(h),orient:Po(h)}),Ci=ps(),no=(h,g)=>h.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(h.ur.x)&&h.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(h.ur.y),qc=(h,g)=>{if(g.ur.x.isLessThan(h.ll.x)||h.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(h.ll.y)||h.ur.y.isLessThan(g.ll.y))return null;let _=h.ll.x.isLessThan(g.ll.x)?g.ll.x:h.ll.x,x=h.ur.x.isLessThan(g.ur.x)?h.ur.x:g.ur.x,k=h.ll.y.isLessThan(g.ll.y)?g.ll.y:h.ll.y,B=h.ur.y.isLessThan(g.ur.y)?h.ur.y:g.ur.y;return{ll:{x:_,y:k},ur:{x,y:B}}},oa=(h,g)=>h.x.times(g.y).minus(h.y.times(g.x)),Ho=(h,g)=>h.x.times(g.x).plus(h.y.times(g.y)),ko=h=>Ho(h,h).sqrt(),pf=(h,g,_)=>{let x={x:g.x.minus(h.x),y:g.y.minus(h.y)},k={x:_.x.minus(h.x),y:_.y.minus(h.y)};return oa(k,x).div(ko(k)).div(ko(x))},bu=(h,g,_)=>{let x={x:g.x.minus(h.x),y:g.y.minus(h.y)},k={x:_.x.minus(h.x),y:_.y.minus(h.y)};return Ho(k,x).div(ko(k)).div(ko(x))},Xr=(h,g,_)=>g.y.isZero()?null:{x:h.x.plus(g.x.div(g.y).times(_.minus(h.y))),y:_},Ts=(h,g,_)=>g.x.isZero()?null:{x:_,y:h.y.plus(g.y.div(g.x).times(_.minus(h.x)))},Ae=(h,g,_,x)=>{if(g.x.isZero())return Ts(_,x,h.x);if(x.x.isZero())return Ts(h,g,_.x);if(g.y.isZero())return Xr(_,x,h.y);if(x.y.isZero())return Xr(h,g,_.y);let k=oa(g,x);if(k.isZero())return null;let B={x:_.x.minus(h.x),y:_.y.minus(h.y)},W=oa(B,g).div(k),X=oa(B,x).div(k),he=h.x.plus(X.times(g.x)),we=_.x.plus(W.times(x.x)),Ge=h.y.plus(X.times(g.y)),ze=_.y.plus(W.times(x.y)),mt=he.plus(we).div(2),At=Ge.plus(ze).div(2);return{x:mt,y:At}},ro=class WS{constructor(g,_){nt(this,"point");nt(this,"isLeft");nt(this,"segment");nt(this,"otherSE");nt(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=_}static compare(g,_){let x=WS.comparePoints(g.point,_.point);return x!==0?x:(g.point!==_.point&&g.link(_),g.isLeft!==_.isLeft?g.isLeft?1:-1:gs.compare(g.segment,_.segment))}static comparePoints(g,_){return g.x.isLessThan(_.x)?-1:g.x.isGreaterThan(_.x)?1:g.y.isLessThan(_.y)?-1:g.y.isGreaterThan(_.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let _=g.point.events;for(let x=0,k=_.length;x<k;x++){let B=_[x];this.point.events.push(B),B.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let _=0;_<g;_++){let x=this.point.events[_];if(x.segment.consumedBy===void 0)for(let k=_+1;k<g;k++){let B=this.point.events[k];B.consumedBy===void 0&&x.otherSE.point.events===B.otherSE.point.events&&x.segment.consume(B.segment)}}}getAvailableLinkedEvents(){let g=[];for(let _=0,x=this.point.events.length;_<x;_++){let k=this.point.events[_];k!==this&&!k.segment.ringOut&&k.segment.isInResult()&&g.push(k)}return g}getLeftmostComparator(g){let _=new Map,x=k=>{let B=k.otherSE;_.set(k,{sine:pf(this.point,g.point,B.point),cosine:bu(this.point,g.point,B.point)})};return(k,B)=>{_.has(k)||x(k),_.has(B)||x(B);let{sine:W,cosine:X}=_.get(k),{sine:he,cosine:we}=_.get(B);return W.isGreaterThanOrEqualTo(0)&&he.isGreaterThanOrEqualTo(0)?X.isLessThan(we)?1:X.isGreaterThan(we)?-1:0:W.isLessThan(0)&&he.isLessThan(0)?X.isLessThan(we)?-1:X.isGreaterThan(we)?1:0:he.isLessThan(W)?-1:he.isGreaterThan(W)?1:0}}},$u=0,gs=class A0{constructor(g,_,x,k){nt(this,"id");nt(this,"leftSE");nt(this,"rightSE");nt(this,"rings");nt(this,"windings");nt(this,"ringOut");nt(this,"consumedBy");nt(this,"prev");nt(this,"_prevInResult");nt(this,"_beforeState");nt(this,"_afterState");nt(this,"_isInResult");this.id=++$u,this.leftSE=g,g.segment=this,g.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=g,this.rings=x,this.windings=k}static compare(g,_){let x=g.leftSE.point.x,k=_.leftSE.point.x,B=g.rightSE.point.x,W=_.rightSE.point.x;if(W.isLessThan(x))return 1;if(B.isLessThan(k))return-1;let X=g.leftSE.point.y,he=_.leftSE.point.y,we=g.rightSE.point.y,Ge=_.rightSE.point.y;if(x.isLessThan(k)){if(he.isLessThan(X)&&he.isLessThan(we))return 1;if(he.isGreaterThan(X)&&he.isGreaterThan(we))return-1;let ze=g.comparePoint(_.leftSE.point);if(ze<0)return 1;if(ze>0)return-1;let mt=_.comparePoint(g.rightSE.point);return mt!==0?mt:-1}if(x.isGreaterThan(k)){if(X.isLessThan(he)&&X.isLessThan(Ge))return-1;if(X.isGreaterThan(he)&&X.isGreaterThan(Ge))return 1;let ze=_.comparePoint(g.leftSE.point);if(ze!==0)return ze;let mt=g.comparePoint(_.rightSE.point);return mt<0?1:mt>0?-1:1}if(X.isLessThan(he))return-1;if(X.isGreaterThan(he))return 1;if(B.isLessThan(W)){let ze=_.comparePoint(g.rightSE.point);if(ze!==0)return ze}if(B.isGreaterThan(W)){let ze=g.comparePoint(_.rightSE.point);if(ze<0)return 1;if(ze>0)return-1}if(!B.eq(W)){let ze=we.minus(X),mt=B.minus(x),At=Ge.minus(he),Gt=W.minus(k);if(ze.isGreaterThan(mt)&&At.isLessThan(Gt))return 1;if(ze.isLessThan(mt)&&At.isGreaterThan(Gt))return-1}return B.isGreaterThan(W)?1:B.isLessThan(W)||we.isLessThan(Ge)?-1:we.isGreaterThan(Ge)?1:g.id<_.id?-1:g.id>_.id?1:0}static fromRing(g,_,x){let k,B,W,X=ro.comparePoints(g,_);if(X<0)k=g,B=_,W=1;else if(X>0)k=_,B=g,W=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);let he=new ro(k,!0),we=new ro(B,!1);return new A0(he,we,[x],[W])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(_)?g:_},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(_)?g:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return Ci.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let _=this.bbox(),x=g.bbox(),k=qc(_,x);if(k===null)return null;let B=this.leftSE.point,W=this.rightSE.point,X=g.leftSE.point,he=g.rightSE.point,we=no(_,X)&&this.comparePoint(X)===0,Ge=no(x,B)&&g.comparePoint(B)===0,ze=no(_,he)&&this.comparePoint(he)===0,mt=no(x,W)&&g.comparePoint(W)===0;if(Ge&&we)return mt&&!ze?W:!mt&&ze?he:null;if(Ge)return ze&&B.x.eq(he.x)&&B.y.eq(he.y)?null:B;if(we)return mt&&W.x.eq(X.x)&&W.y.eq(X.y)?null:X;if(mt&&ze)return null;if(mt)return W;if(ze)return he;let At=Ae(B,this.vector(),X,g.vector());return At===null||!no(k,At)?null:Ci.snap(At)}split(g){let _=[],x=g.events!==void 0,k=new ro(g,!0),B=new ro(g,!1),W=this.rightSE;this.replaceRightSE(B),_.push(B),_.push(k);let X=new A0(k,W,this.rings.slice(),this.windings.slice());return ro.comparePoints(X.leftSE.point,X.rightSE.point)>0&&X.swapEvents(),ro.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),x&&(k.checkForConsuming(),B.checkForConsuming()),_}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,x=this.windings.length;_<x;_++)this.windings[_]*=-1}consume(g){let _=this,x=g;for(;_.consumedBy;)_=_.consumedBy;for(;x.consumedBy;)x=x.consumedBy;let k=A0.compare(_,x);if(k!==0){if(k>0){let B=_;_=x,x=B}if(_.prev===x){let B=_;_=x,x=B}for(let B=0,W=x.rings.length;B<W;B++){let X=x.rings[B],he=x.windings[B],we=_.rings.indexOf(X);we===-1?(_.rings.push(X),_.windings.push(he)):_.windings[we]+=he}x.rings=null,x.windings=null,x.consumedBy=_,x.leftSE.consumedBy=_.leftSE,x.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,x=this._afterState.windings,k=this._afterState.multiPolys;for(let X=0,he=this.rings.length;X<he;X++){let we=this.rings[X],Ge=this.windings[X],ze=_.indexOf(we);ze===-1?(_.push(we),x.push(Ge)):x[ze]+=Ge}let B=[],W=[];for(let X=0,he=_.length;X<he;X++){if(x[X]===0)continue;let we=_[X],Ge=we.poly;if(W.indexOf(Ge)===-1)if(we.isExterior)B.push(Ge);else{W.indexOf(Ge)===-1&&W.push(Ge);let ze=B.indexOf(we.poly);ze!==-1&&B.splice(ze,1)}}for(let X=0,he=B.length;X<he;X++){let we=B[X].multiPoly;k.indexOf(we)===-1&&k.push(we)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Ph.type){case"union":{let x=g.length===0,k=_.length===0;this._isInResult=x!==k;break}case"intersection":{let x,k;g.length<_.length?(x=g.length,k=_.length):(x=_.length,k=g.length),this._isInResult=k===Ph.numMultiPolys&&x<k;break}case"xor":{let x=Math.abs(g.length-_.length);this._isInResult=x%2===1;break}case"difference":{let x=k=>k.length===1&&k[0].isSubject;this._isInResult=x(g)!==x(_);break}}return this._isInResult}},Pr=class{constructor(h,g,_){nt(this,"poly");nt(this,"isExterior");nt(this,"segments");nt(this,"bbox");if(!Array.isArray(h)||h.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=_,this.segments=[],typeof h[0][0]!="number"||typeof h[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let x=Ci.snap({x:new Le(h[0][0]),y:new Le(h[0][1])});this.bbox={ll:{x:x.x,y:x.y},ur:{x:x.x,y:x.y}};let k=x;for(let B=1,W=h.length;B<W;B++){if(typeof h[B][0]!="number"||typeof h[B][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let X=Ci.snap({x:new Le(h[B][0]),y:new Le(h[B][1])});X.x.eq(k.x)&&X.y.eq(k.y)||(this.segments.push(gs.fromRing(k,X,this)),X.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=X.x),X.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=X.y),X.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=X.x),X.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=X.y),k=X)}(!x.x.eq(k.x)||!x.y.eq(k.y))&&this.segments.push(gs.fromRing(k,x,this))}getSweepEvents(){let h=[];for(let g=0,_=this.segments.length;g<_;g++){let x=this.segments[g];h.push(x.leftSE),h.push(x.rightSE)}return h}},Sh=class{constructor(h,g){nt(this,"multiPoly");nt(this,"exteriorRing");nt(this,"interiorRings");nt(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Pr(h[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,x=h.length;_<x;_++){let k=new Pr(h[_],this,!1);k.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.bbox.ll.x),k.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.bbox.ll.y),k.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.bbox.ur.x),k.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.bbox.ur.y),this.interiorRings.push(k)}this.multiPoly=g}getSweepEvents(){let h=this.exteriorRing.getSweepEvents();for(let g=0,_=this.interiorRings.length;g<_;g++){let x=this.interiorRings[g].getSweepEvents();for(let k=0,B=x.length;k<B;k++)h.push(x[k])}return h}},ld=class{constructor(h,g){nt(this,"isSubject");nt(this,"polys");nt(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof h[0][0][0]=="number"&&(h=[h])}catch{}this.polys=[],this.bbox={ll:{x:new Le(Number.POSITIVE_INFINITY),y:new Le(Number.POSITIVE_INFINITY)},ur:{x:new Le(Number.NEGATIVE_INFINITY),y:new Le(Number.NEGATIVE_INFINITY)}};for(let _=0,x=h.length;_<x;_++){let k=new Sh(h[_],this);k.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.bbox.ll.x),k.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.bbox.ll.y),k.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.bbox.ur.x),k.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.bbox.ur.y),this.polys.push(k)}this.isSubject=g}getSweepEvents(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let x=this.polys[g].getSweepEvents();for(let k=0,B=x.length;k<B;k++)h.push(x[k])}return h}},Eh=class I2{constructor(g){nt(this,"events");nt(this,"poly");nt(this,"_isExteriorRing");nt(this,"_enclosingRing");this.events=g;for(let _=0,x=g.length;_<x;_++)g[_].segment.ringOut=this;this.poly=null}static factory(g){let _=[];for(let x=0,k=g.length;x<k;x++){let B=g[x];if(!B.isInResult()||B.ringOut)continue;let W=null,X=B.leftSE,he=B.rightSE,we=[X],Ge=X.point,ze=[];for(;W=X,X=he,we.push(X),X.point!==Ge;)for(;;){let mt=X.getAvailableLinkedEvents();if(mt.length===0){let dn=we[0].point,yn=we[we.length-1].point;throw new Error(`Unable to complete output ring starting at [${dn.x}, ${dn.y}]. Last matching segment found ends at [${yn.x}, ${yn.y}].`)}if(mt.length===1){he=mt[0].otherSE;break}let At=null;for(let dn=0,yn=ze.length;dn<yn;dn++)if(ze[dn].point===X.point){At=dn;break}if(At!==null){let dn=ze.splice(At)[0],yn=we.splice(dn.index);yn.unshift(yn[0].otherSE),_.push(new I2(yn.reverse()));continue}ze.push({index:we.length,point:X.point});let Gt=X.getLeftmostComparator(W);he=mt.sort(Gt)[0].otherSE;break}_.push(new I2(we))}return _}getGeom(){let g=this.events[0].point,_=[g];for(let we=1,Ge=this.events.length-1;we<Ge;we++){let ze=this.events[we].point,mt=this.events[we+1].point;Ci.orient(ze,g,mt)!==0&&(_.push(ze),g=ze)}if(_.length===1)return null;let x=_[0],k=_[1];Ci.orient(x,g,k)===0&&_.shift(),_.push(_[0]);let B=this.isExteriorRing()?1:-1,W=this.isExteriorRing()?0:_.length-1,X=this.isExteriorRing()?_.length:-1,he=[];for(let we=W;we!=X;we+=B)he.push([_[we].x.toNumber(),_[we].y.toNumber()]);return he}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var k,B;let g=this.events[0];for(let W=1,X=this.events.length;W<X;W++){let he=this.events[W];ro.compare(g,he)>0&&(g=he)}let _=g.segment.prevInResult(),x=_?_.prevInResult():null;for(;;){if(!_)return null;if(!x)return _.ringOut;if(x.ringOut!==_.ringOut)return((k=x.ringOut)==null?void 0:k.enclosingRing())!==_.ringOut?_.ringOut:(B=_.ringOut)==null?void 0:B.enclosingRing();_=x.prevInResult(),x=_?_.prevInResult():null}}},Ka=class{constructor(h){nt(this,"exteriorRing");nt(this,"interiorRings");this.exteriorRing=h,h.poly=this,this.interiorRings=[]}addInterior(h){this.interiorRings.push(h),h.poly=this}getGeom(){let h=this.exteriorRing.getGeom();if(h===null)return null;let g=[h];for(let _=0,x=this.interiorRings.length;_<x;_++){let k=this.interiorRings[_].getGeom();k!==null&&g.push(k)}return g}},Yc=class{constructor(h){nt(this,"rings");nt(this,"polys");this.rings=h,this.polys=this._composePolys(h)}getGeom(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let x=this.polys[g].getGeom();x!==null&&h.push(x)}return h}_composePolys(h){var _;let g=[];for(let x=0,k=h.length;x<k;x++){let B=h[x];if(!B.poly)if(B.isExteriorRing())g.push(new Ka(B));else{let W=B.enclosingRing();W!=null&&W.poly||g.push(new Ka(W)),(_=W==null?void 0:W.poly)==null||_.addInterior(B)}}return g}},gf=class{constructor(h,g=gs.compare){nt(this,"queue");nt(this,"tree");nt(this,"segments");this.queue=h,this.tree=new nn(g),this.segments=[]}process(h){let g=h.segment,_=[];if(h.consumedBy)return h.isLeft?this.queue.delete(h.otherSE):this.tree.delete(g),_;h.isLeft&&this.tree.add(g);let x=g,k=g;do x=this.tree.lastBefore(x);while(x!=null&&x.consumedBy!=null);do k=this.tree.firstAfter(k);while(k!=null&&k.consumedBy!=null);if(h.isLeft){let B=null;if(x){let X=x.getIntersection(g);if(X!==null&&(g.isAnEndpoint(X)||(B=X),!x.isAnEndpoint(X))){let he=this._splitSafely(x,X);for(let we=0,Ge=he.length;we<Ge;we++)_.push(he[we])}}let W=null;if(k){let X=k.getIntersection(g);if(X!==null&&(g.isAnEndpoint(X)||(W=X),!k.isAnEndpoint(X))){let he=this._splitSafely(k,X);for(let we=0,Ge=he.length;we<Ge;we++)_.push(he[we])}}if(B!==null||W!==null){let X=null;B===null?X=W:W===null?X=B:X=ro.comparePoints(B,W)<=0?B:W,this.queue.delete(g.rightSE),_.push(g.rightSE);let he=g.split(X);for(let we=0,Ge=he.length;we<Ge;we++)_.push(he[we])}_.length>0?(this.tree.delete(g),_.push(h)):(this.segments.push(g),g.prev=x)}else{if(x&&k){let B=x.getIntersection(k);if(B!==null){if(!x.isAnEndpoint(B)){let W=this._splitSafely(x,B);for(let X=0,he=W.length;X<he;X++)_.push(W[X])}if(!k.isAnEndpoint(B)){let W=this._splitSafely(k,B);for(let X=0,he=W.length;X<he;X++)_.push(W[X])}}}this.tree.delete(g)}return _}_splitSafely(h,g){this.tree.delete(h);let _=h.rightSE;this.queue.delete(_);let x=h.split(g);return x.push(_),h.consumedBy===void 0&&this.tree.add(h),x}},bp=class{constructor(){nt(this,"type");nt(this,"numMultiPolys")}run(h,g,_){bc.type=h;let x=[new ld(g,!0)];for(let he=0,we=_.length;he<we;he++)x.push(new ld(_[he],!1));if(bc.numMultiPolys=x.length,bc.type==="difference"){let he=x[0],we=1;for(;we<x.length;)qc(x[we].bbox,he.bbox)!==null?we++:x.splice(we,1)}if(bc.type==="intersection")for(let he=0,we=x.length;he<we;he++){let Ge=x[he];for(let ze=he+1,mt=x.length;ze<mt;ze++)if(qc(Ge.bbox,x[ze].bbox)===null)return[]}let k=new nn(ro.compare);for(let he=0,we=x.length;he<we;he++){let Ge=x[he].getSweepEvents();for(let ze=0,mt=Ge.length;ze<mt;ze++)k.add(Ge[ze])}let B=new gf(k),W=null;for(k.size!=0&&(W=k.first(),k.delete(W));W;){let he=B.process(W);for(let we=0,Ge=he.length;we<Ge;we++){let ze=he[we];ze.consumedBy===void 0&&k.add(ze)}k.size!=0?(W=k.first(),k.delete(W)):W=null}Ci.reset();let X=Eh.factory(B.segments);return new Yc(X).getGeom()}},bc=new bp,Ph=bc,Xl=(h,...g)=>Ph.run("intersection",h,g),_p=(h,...g)=>Ph.run("difference",h,g);Ci.set;function kh(h){let g={type:"Feature"};return g.geometry=h,g}function Mh(h){return h.type==="Feature"?h.geometry:h}function ud(h){return h&&h.geometry&&h.geometry.coordinates?h.geometry.coordinates:h}function cd(h){return kh({type:"LineString",coordinates:h})}function La(h){return kh({type:"MultiLineString",coordinates:h})}function hd(h){return kh({type:"Polygon",coordinates:h})}function fd(h){return kh({type:"MultiPolygon",coordinates:h})}function dd(h,g){let _=Mh(h),x=Mh(g),k=Xl(_.coordinates,x.coordinates);return k.length===0?null:k.length===1?hd(k[0]):fd(k)}function w(h,g){let _=Mh(h),x=Mh(g),k=_p(_.coordinates,x.coordinates);return k.length===0?null:k.length===1?hd(k[0]):fd(k)}function M(h){return Array.isArray(h)?1+M(h[0]):-1}function z(h){h instanceof L.Polyline&&(h=h.toGeoJSON(15));let g=ud(h),_=M(g),x=[];return _>1?g.forEach(k=>{x.push(cd(k))}):x.push(h),x}function ne(h){let g=[];return h.eachLayer(_=>{g.push(ud(_.toGeoJSON(15)))}),La(g)}ji.Cut=ji.Polygon.extend({initialize(h){this._map=h,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);g._latlngInfos=this._layer._latlngInfo,this.cut(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:x,originalLayer:k})=>{this._fireCut(k,x,k),this._fireCut(this._map,x,k),k.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(h){let g=this._map._layers,_=h._latlngInfos||[];Object.keys(g).map(x=>g[x]).filter(x=>x.pm).filter(x=>!x._pmTempLayer).filter(x=>!L.PM.optIn&&!x.options.pmIgnore||L.PM.optIn&&x.options.pmIgnore===!1).filter(x=>x instanceof L.Polyline).filter(x=>x!==h).filter(x=>x.pm.options.allowCutting).filter(x=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(x)>-1:!0).filter(x=>!this._layerGroup.hasLayer(x)).filter(x=>{try{let k=!!Qs(h.toGeoJSON(15),x.toGeoJSON(15)).features.length>0;return k||x instanceof L.Polyline&&!(x instanceof L.Polygon)?k:!!dd(h.toGeoJSON(15),x.toGeoJSON(15))}catch{return x instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(x=>{let k;if(x instanceof L.Polygon){k=L.polygon(x.getLatLngs());let he=k.getLatLngs();_.forEach(we=>{if(we&&we.snapInfo){let{latlng:Ge}=we,ze=this._calcClosestLayer(Ge,[k]);if(ze&&ze.segment&&ze.distance<this.options.snapDistance){let{segment:mt}=ze;if(mt&&mt.length===2){let{indexPath:At,parentPath:Gt,newIndex:dn}=L.PM.Utils._getIndexFromSegment(he,mt);(At.length>1?(0,mi.default)(he,Gt):he).splice(dn,0,Ge)}}}})}else k=x;let B=this._cutLayer(h,k),W=L.geoJSON(B,x.options);W.getLayers().length===1&&([W]=W.getLayers()),this._setPane(W,"layerPane");let X=W.addTo(this._map.pm._getContainingLayer());if(X.pm.enable(x.pm.options),X.pm.disable(),x._pmTempLayer=!0,h._pmTempLayer=!0,x.remove(),x.removeFrom(this._map.pm._getContainingLayer()),h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),X.getLayers&&X.getLayers().length===0&&this._map.pm.removeLayer({target:X}),X instanceof L.LayerGroup?(X.eachLayer(he=>{this._addDrawnLayerProp(he)}),this._addDrawnLayerProp(X)):this._addDrawnLayerProp(X),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let he=this.options.layersToCut.indexOf(x);he>-1&&this.options.layersToCut.splice(he,1)}this._editedLayers.push({layer:X,originalLayer:x})})},_cutLayer(h,g){let _=L.geoJSON(),x;if(g instanceof L.Polygon)x=w(g.toGeoJSON(15),h.toGeoJSON(15));else{let k=z(g);k.forEach(B=>{let W=$n(B,h.toGeoJSON(15)),X;W&&W.features.length>0?X=L.geoJSON(W):X=L.geoJSON(B),X.getLayers().forEach(he=>{ta(h.toGeoJSON(15),he.toGeoJSON(15))||he.addTo(_)})}),k.length>1?x=ne(_):x=_.toGeoJSON(15)}return x},_change:L.Util.falseFn}),ji.Text=ji.extend({initialize(h){this._map=h,this._shape="Text",this.toolbarButtonName="drawText"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(Kn("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var h;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(h=this._hintMarker)==null||h.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker(h){var k,B,W,X;if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(k=this.options.textOptions)==null?void 0:k.className){let he=this.options.textOptions.className.split(" ");this.textArea.classList.add(...he)}let _=this._createTextIcon(this.textArea),x=new L.Marker(g,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(x,"markerPane"),this._finishLayer(x),x.pm||(x.options.draggable=!1),x.addTo(this._map.pm._getContainingLayer()),x.pm){x.pm.textArea=this.textArea,L.setOptions(x.pm,{removeIfEmpty:((B=this.options.textOptions)==null?void 0:B.removeIfEmpty)??!0});let he=((W=this.options.textOptions)==null?void 0:W.focusAfterDraw)??!0;x.pm._createTextMarker(he),(X=this.options.textOptions)!=null&&X.text&&x.pm.setText(this.options.textOptions.text)}this._fireCreate(x),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(h){this.enable(),this._hintMarker.setLatLng(h.latlng)},_createTextArea(){let h=document.createElement("textarea");return h.readOnly=!0,h.classList.add("pm-textarea","pm-disabled"),h},_createTextIcon(h){return L.divIcon({className:"pm-text-marker",html:h})}});var ve={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ei(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let h=this._getDOMElem();h&&(ei(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(h)):L.DomEvent.on(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,ei(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let h=this._getDOMElem();h&&(ei(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(h)):L.DomEvent.off(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(h){let g={originalEvent:h.touches?h.touches[0]:h,target:this._layer};return h.type.indexOf("touch")===-1&&(g.containerPoint=this._map.mouseEventToContainerPoint(h),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown(h){if(h.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(h);let g=h._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",h);if(this._layer instanceof L.Marker&&(this.options.snappable&&!g&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let x="resizeableCircleMarker";this._layer instanceof L.Circle&&(x="resizeableCircle"),this.options.snappable&&!g&&!_?this._layer.pm.options[x]||this._initSnappableMarkersDrag():this._layer.pm.options[x]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=h.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(h){this._overwriteEventIfItComesFromMarker(h);let g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",h),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=h.latlng),this._onLayerDrag(h),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(h){let g=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",h),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,g&&L.DomUtil.removeClass(g,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(h){let{latlng:g}=h,_={lat:g.lat-this._tempDragCoord.lat,lng:g.lng-this._tempDragCoord.lng},x=k=>k.map(B=>{if(Array.isArray(B))return x(B);let W={lat:B.lat+_.lat,lng:B.lng+_.lng};return(B.alt||B.alt===0)&&(W.alt=B.alt),W});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let k=x([this._layer.getLatLng()]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let k=this._layer.getLatLng();this._layer._snapped&&(k=this._layer._orgLatLng);let B=x([k]);this._layer.setLatLng(B[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let k=x([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(k),this._fireChange(this._layer.getBounds(),"Edit")}else{let k=x(this._layer.getLatLngs());this._layer.setLatLngs(k),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,h.layer=this._layer,this._fireDrag(h)},addDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.addClass(h,"leaflet-pm-draggable")},removeDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_getDOMElem(){let h=null;return this._layer._path?h=this._layer._path:this._layer._renderer&&this._layer._renderer._container?h=this._layer._renderer._container:this._layer._image?h=this._layer._image:this._layer._icon&&(h=this._layer._icon),h},_overwriteEventIfItComesFromMarker(h){h.target.getLatLng&&(!h.target._radius||h.target._radius<=10)&&(h.containerPoint=this._map.mouseEventToContainerPoint(h.originalEvent),h.latlng=this._map.containerPointToLatLng(h.containerPoint))},_syncLayers(h,g){if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(x=>{x instanceof L.LayerGroup&&(_=_.concat(x.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let x in this._parentLayerGroup){let k=this._parentLayerGroup[x];k.pm&&(_=k.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(x=>!!x.pm).filter(x=>!!x.pm.options.draggable),_.forEach(x=>{x!==this._layer&&x.pm[h]&&(x._snapped=!1,x.pm[h](g))})),_.length>0}return!1},_stopDOMImageDrag(h){return h.preventDefault(),!1}},Ce=ve,Pe=l(So());function Me(h,g,_,x){return _.unproject(g.transform(_.project(h,x)),x)}function Te(h,g,_){let x=_.getMaxZoom();if(x===1/0&&(x=_.getZoom()),L.Util.isArray(h)){let k=[];return h.forEach(B=>{k.push(Te(B,g,_))}),k}return h instanceof L.LatLng?Me(h,g,_,x):null}function $e(h,g){g instanceof L.Layer&&(g=g.getLatLng());let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.project(g,_)}function ct(h,g){let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.unproject(g,_)}var Ot={_onRotateStart(h){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=$e(this._map,this._rotationOriginLatLng),this._rotationStartPoint=$e(this._map,h.target.getLatLng()),this._initialRotateLatLng=Eo(this._layer),this._startAngle=this.getAngle();let g=Eo(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate(h){let g=$e(this._map,h.target.getLatLng()),_=this._rotationStartPoint,x=this._rotationOriginPoint,k=Math.atan2(g.y-x.y,g.x-x.x)-Math.atan2(_.y-x.y,_.x-x.x);this._layer.setLatLngs(this._rotateLayer(k,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let B=this;function W(Ge,ze=[],mt=-1){if(mt>-1&&ze.push(mt),L.Util.isArray(Ge[0]))Ge.forEach((At,Gt)=>W(At,ze.slice(),Gt));else{let At=ze.length>0?(0,Pe.default)(B._markers,ze):B._markers[0];Ge.forEach((Gt,dn)=>{At[dn].setLatLng(Gt)})}}W(this._layer.getLatLngs());let X=Eo(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(k,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let he=k*180/Math.PI;he=he<0?he+360:he;let we=he+this._startAngle;this._setAngle(we),this._rotationLayer.pm._setAngle(we),this._fireRotation(this._rotationLayer,he,X),this._fireRotation(this._map,he,X),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let h=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let g=Eo(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Eo(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,h,g),this._fireRotationEnd(this._map,h,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(h,g,_,x,k){let B=$e(k,_);return this._matrix=x.clone().rotate(h,B).flip(),Te(g,this._matrix,k)},_setAngle(h){h=h<0?h+360:h,this._angle=h%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let h=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=h.getCenter();return h.removeFrom(this._layer._map),g},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Xo(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),h),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Eo(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(h){let g=this.getAngle(),_=this._layer.getLatLngs(),x=h*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(x,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+h),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(x,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let k=this.getAngle()-g;k=k<0?k+360:k,this._startAngle=g,this._fireRotation(this._layer,k,_,this._layer),this._fireRotation(this._map||this._layer._map,k,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(h){let g=h-this.getAngle();this.rotateLayer(g)},getAngle(){return this._angle||0},setInitAngle(h){this._setAngle(h)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(h){this._rotationCenter=h,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(h)}},Dt=Ot,wt=L.Class.extend({includes:[Ce,vo,Dt,Wl],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(h){L.Util.setOptions(this,h)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(h,g){let _=g.target,x={layer:this._layer,marker:_,event:g},k="";return h==="move"?k="moveVertexValidation":h==="add"?k="addVertexValidation":h==="remove"&&(k="removeVertexValidation"),this.options[k]&&typeof this.options[k]=="function"&&!this.options[k](x)?(h==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(h){return h._cancelDragEventChain?(h._latlng=h._cancelDragEventChain,h.update(),!1):!0},_vertexValidationDragEnd(h){return h._cancelDragEventChain?(h._cancelDragEventChain=null,!1):!0}}),Ht=wt;Ht.LayerGroup=L.Class.extend({initialize(h){this._layerGroup=h,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(x=>this._initLayer(x));let g=x=>{if(x.layer._pmTempLayer)return;this._layers=this.getLayers();let k=this._layers.filter(B=>!B.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in B.pm._parentLayerGroup));k.forEach(B=>{this._initLayer(B)}),k.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(g,100,this),this),this._layerGroup.on("layerremove",x=>{this._removeLayerFromGroup(x.target)},this);let _=x=>{x.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.enable(h,g)):_.pm.enable(h)})},disable(h=[]){h.length===0&&(this._layers=this.getLayers()),this._layers.forEach(g=>{g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1&&(h.push(g._leaflet_id),g.pm.disable(h)):g.pm.disable()})},enabled(h=[]){return h.length===0&&(this._layers=this.getLayers()),!!this._layers.find(g=>g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1?(h.push(g._leaflet_id),g.pm.enabled(h)):!1:g.pm.enabled())},toggleEdit(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.toggleEdit(h,g)):_.pm.toggleEdit(h)})},_initLayer(h){let g=L.Util.stamp(this._layerGroup);h.pm._parentLayerGroup||(h.pm._parentLayerGroup={}),h.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup(h){if(h.pm&&h.pm._layerGroup){let g=L.Util.stamp(this._layerGroup);delete h.pm._layerGroup[g]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(h=>h.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var h;return this._map||((h=this._layers.find(g=>!!g._map))==null?void 0:h._map)||null},getLayers(h=!1,g=!0,_=!0,x=[]){let k=[];return h?this._layerGroup.getLayers().forEach(B=>{k.push(B),B instanceof L.LayerGroup&&x.indexOf(B._leaflet_id)===-1&&(x.push(B._leaflet_id),k=k.concat(B.pm.getLayers(!0,!0,!0,x)))}):k=this._layerGroup.getLayers(),_&&(k=k.filter(B=>!(B instanceof L.LayerGroup))),g&&(k=k.filter(B=>!!B.pm),k=k.filter(B=>!B._pmTempLayer),k=k.filter(B=>!L.PM.optIn&&!B.options.pmIgnore||L.PM.optIn&&B.options.pmIgnore===!1)),k},setOptions(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this.options=h,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.setOptions(h,g)):_.pm.setOptions(h))})}}),Ht.Marker=Ht.extend({_shape:"Marker",initialize(h){this._layer=h,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(h={draggable:!0}){if(L.Util.setOptions(this,h),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(h){let g=h.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)}});var zt=l(So()),ht={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let h=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=h.filter((g,_,x)=>x.indexOf(g)===_)},_removeFromCache(h){let g=this.markerCache.indexOf(h);g>-1&&this.markerCache.splice(g,1)},renderLimits(h){this.markerCache.forEach(g=>{h.includes(g)?this._markerGroup.addLayer(g):this._markerGroup.removeLayer(g)})},applyLimitFilters({latlng:h={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let g=[...this._filterClosestMarkers(h)];this.renderLimits(g)},_filterClosestMarkers(h){let g=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?g:(g.sort((x,k)=>{let B=x._latlng.distanceTo(h),W=k._latlng.distanceTo(h);return B-W}),g.filter((x,k)=>_>-1?k<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(h){this._preventRenderMarkers=!!h}},vt=ht;Ht.Line=Ht.extend({includes:[vt],_shape:"Line",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(h){return this.enabled()?this.disable():this.enable(h),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let h=this._map,g=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(h),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=x=>{if(Array.isArray(x[0]))return x.map(_,this);let k=x.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&x.map((B,W)=>{let X=this.isPolygon()?(W+1)%x.length:W+1;return this._createMiddleMarker(k[W],k[X])}),k};this._markers=_(g),this.filterMarkerGroup(),h.addLayer(this._markerGroup)},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker(h,g){if(!h||!g)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,h.getLatLng(),g.getLatLng()),x=this._createMarker(_),k=L.divIcon({className:"marker-icon marker-icon-middle"});return x.setIcon(k),x.leftM=h,x.rightM=g,h._middleMarkerNext=x,g._middleMarkerPrev=x,x.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),x.on("movestart",this._onMiddleMarkerMoveStart,this),x},_onMiddleMarkerClick(h){let g=h.target;if(!this._vertexValidation("add",h))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMoveStart(h){let g=h.target;if(g.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",h)){g.on("move",this._onMiddleMarkerMovePrevent,this);return}g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMovePrevent(h){let g=h.target;this._vertexValidationDrag(g)},_onMiddleMarkerMoveEnd(h){let g=h.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(g))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),setTimeout(()=>{delete g._dragging},100)},_addMarker(h,g,_){h.off("movestart",this._onMiddleMarkerMoveStart,this),h.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let x=h.getLatLng(),k=this._layer._latlngs;delete h.leftM,delete h.rightM;let{indexPath:B,index:W,parentPath:X}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),he=B.length>1?(0,zt.default)(k,X):k,we=B.length>1?(0,zt.default)(this._markers,X):this._markers;he.splice(W+1,0,x),we.splice(W+1,0,h),this._layer.setLatLngs(k),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(g,h),this._createMiddleMarker(h,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(h,L.PM.Utils.findDeepMarkerIndex(this._markers,h).indexPath,x),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Sr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(h){let g=this._layer,_,x;if(this.options.allowSelfIntersection?_=!1:(x=Sr(this._layer.toGeoJSON(15)),_=x.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;h?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(x)}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(h,g){h.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,g):_._icon&&(g&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(h){let g=h.target;if(!this._vertexValidation("remove",h))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Eo(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:x,index:k,parentPath:B}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!x)return;let W=x.length>1?(0,zt.default)(_,B):_,X=x.length>1?(0,zt.default)(this._markers,B):this._markers,he=B[B.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!he&&(W.length<=2||this.isPolygon()&&W.length<=3)){this._flashLayer();return}W.splice(k,1),this._layer.setLatLngs(_),this.isPolygon()&&W.length<=2&&W.splice(0,W.length);let we=!1;if(W.length<=1&&(W.splice(0,W.length),B.length>1&&x.length>1&&(_=gl(_)),this._layer.setLatLngs(_),this._initMarkers(),we=!0),Fi(_)||this._layer.remove(),_=gl(_),this._layer.setLatLngs(_),this._markers=gl(this._markers),!we&&(X=x.length>1?(0,zt.default)(this._markers,B):this._markers,g._middleMarkerPrev&&(this._markerGroup.removeLayer(g._middleMarkerPrev),this._removeFromCache(g._middleMarkerPrev)),g._middleMarkerNext&&(this._markerGroup.removeLayer(g._middleMarkerNext),this._removeFromCache(g._middleMarkerNext)),this._markerGroup.removeLayer(g),this._removeFromCache(g),X)){let Ge,ze;if(this.isPolygon()?(Ge=(k+1)%X.length,ze=(k+(X.length-1))%X.length):(ze=k-1<0?void 0:k-1,Ge=k+1>=X.length?void 0:k+1),Ge!==ze){let mt=X[ze],At=X[Ge];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(mt,At)}X.splice(k,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,x),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(h){let g=this._layer.getLatLngs(),_=h.getLatLng(),{indexPath:x,index:k,parentPath:B}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);(x.length>1?(0,zt.default)(g,B):g).splice(k,1,_),this._layer.setLatLngs(g)},_getNeighborMarkers(h){let{indexPath:g,index:_,parentPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),k=g.length>1?(0,zt.default)(this._markers,x):this._markers,B=(_+1)%k.length,W=(_+(k.length-1))%k.length,X=k[W],he=k[B];return{prevMarker:X,nextMarker:he}},_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),x=L.polyline([g.getLatLng(),h.getLatLng()]),k=L.polyline([h.getLatLng(),_.getLatLng()]),B=Qs(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,W=Qs(this._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return h.getLatLng()===this._markers[0][0].getLatLng()?W+=1:h.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(B+=1),!(B<=2&&W<=2)},_onMarkerDragStart(h){let g=h.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",h))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Eo(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(g):this._markerAllowedToDrag=null},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g))return;let{indexPath:_,index:x,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(g);let B=_.length>1?(0,zt.default)(this._markers,k):this._markers,W=(x+1)%B.length,X=(x+(B.length-1))%B.length,he=g.getLatLng(),we=B[X].getLatLng(),Ge=B[W].getLatLng();if(g._middleMarkerNext){let ze=L.PM.Utils.calcMiddleLatLng(this._map,he,Ge);g._middleMarkerNext.setLatLng(ze)}if(g._middleMarkerPrev){let ze=L.PM.Utils.calcMiddleLatLng(this._map,he,we);g._middleMarkerPrev.setLatLng(ze)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),x=!this.options.allowSelfIntersection&&this.hasSelfIntersection();x&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(x=!1);let k=!this.options.allowSelfIntersection&&x;if(this._fireMarkerDragEnd(h,_,k),k){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(h,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(h){let g=h.target;if(g._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireVertexClick(h,_)}}),Ht.Polygon=Ht.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),x=L.polyline([g.getLatLng(),h.getLatLng()]),k=L.polyline([h.getLatLng(),_.getLatLng()]),B=Qs(this._layer.toGeoJSON(15),x.toGeoJSON(15)).features.length,W=Qs(this._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return!(B<=2&&W<=2)}}),Ht.Rectangle=Ht.Polygon.extend({_shape:"Rectangle",_initMarkers(){let h=this._map,g=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,h.addLayer(this._markerGroup),this._markers=[],this._markers[0]=g.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,x)=>{let k=this._cornerMarkers.find(B=>B._index===x);k&&k.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(h,g){let _=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=h,_._index=g,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(h=>{h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(h){if(!this._vertexValidation("move",h))return;let g=h.target,_=this._cornerMarkers;g._oppositeCornerLatLng=_.find(k=>k._index===(g._index+2)%4).getLatLng(),g._snapped=!1;let{indexPath:x}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,x)},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g)||g._index===void 0)return;this._adjustRectangleForMarkerMove(g);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;this._cornerMarkers.forEach(x=>{delete x._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragEnd(h,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(h){L.extend(h._origLatLng,h._latlng);let g=L.PM.Utils._getRotatedRectangle(h.getLatLng(),h._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(h),this._layer.redraw()},_adjustAllMarkers(h){let g=this._layer.getLatLngs()[0];if(g&&g.length!==4&&g.length>0)g.forEach((_,x)=>{this._cornerMarkers[x].setLatLng(_)}),this._cornerMarkers.slice(g.length).forEach(_=>{_.setLatLng(g[0])});else if(!g||!g.length)console.error("The layer has no LatLngs");else{let _=g.findIndex(x=>h.getLatLng().equals(x));_>-1?(this._cornerMarkers[(h._index+1)%4].setLatLng(g[(_+1)%4]),this._cornerMarkers[(h._index+2)%4].setLatLng(g[(_+2)%4]),this._cornerMarkers[(h._index+3)%4].setLatLng(g[(_+3)%4])):this._cornerMarkers.forEach(x=>{x.setLatLng(g[x._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Xo(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.getAngle(),this._map||this)}}),Ht.CircleMarker=Ht.extend({_shape:"CircleMarker",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let h=this._map;this._helperLayers&&(this._helperLayers.removeFrom(h),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);let g=this._layer.getLatLng(),_=this._layer._radius,x=this._getLatLngOnCircle(g,_);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(x),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(h,g){let _=this._map.project(h),x=L.point(_.x+g,_.y);return this._map.unproject(x)},_createHintLine(h,g){let _=h.getLatLng(),x=g.getLatLng();this._hintline=L.polyline([_,x],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(h){let g=this._createMarker(h);return this.options.draggable?(L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("move",this._moveCircle,this)):g.dragging.disable(),g},_createOuterMarker(h){let g=this._createMarker(h);return g.on("drag",this._resizeCircle,this),g},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=h,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),g.on("click",this._onVertexClick,this),this._helperLayers.addLayer(g),g},_moveCircle(h){if(h.target._cancelDragEventChain)return;let g=this._centerMarker.getLatLng();this._layer.setLatLng(g);let _=this._layer._radius,x=this._getLatLngOnCircle(g,_);this._outerMarker._latlng=x,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let h=this._layer.getLatLng(),g=this._layer._radius,_=this._getLatLngOnCircle(h,g);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(h),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,g])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag(h){let g=h.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(h)},_onMarkerDragEnd(h){this._extedingMarkerDragEnd();let g=h.target;this._vertexValidationDragEnd(g)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(h))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let h=this._layer._map||this._map;if(h){let g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),h,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(g);let x=h&&h.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!x).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!x),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?g=Gl(this._map,h,g,this._getMinDistanceInMeter(h)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(g=Gl(this._map,h,g,this._getMaxDistanceInMeter(h))),g},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))},_getMinDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,h)},_getMaxDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,h)},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Ht.Circle=Ht.CircleMarker.extend({_shape:"Circle",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(h){L.PM.Edit.CircleMarker.prototype.enable.call(this,h||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let h=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(h,g){return this._map.distance(h,g)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Ht.ImageOverlay=Ht.extend({_shape:"ImageOverlay",initialize(h){this._layer=h,this._enabled=!1},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},enabled(){return this._enabled},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let h=this._layer.getBounds(),g=h.getNorthWest(),_=h.getNorthEast(),x=h.getSouthEast(),k=h.getSouthWest();return[g,_,x,k]}}),Ht.Text=Ht.extend({_shape:"Text",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let h=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),h.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let h=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${h}px`,this.textArea.style.width=`${g}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(h){h.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(h={}){let g=this._hasFocus;this._hasFocus=h.type==="focus",!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(h){h&&(this.textArea.value=h),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let g=this.options.className.split(" ");this.textArea.classList.add(...g)}let h=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(h),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(h=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),h===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(h){h.preventDefault()}});var Xt=function(h,g,_,x,k,B){this._matrix=[h,g,_,x,k,B]};Xt.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Xt.prototype={transform(h){return this._transform(h.clone())},_transform(h){let g=this._matrix,{x:_,y:x}=h;return h.x=g[0]*_+g[1]*x+g[4],h.y=g[2]*_+g[3]*x+g[5],h},untransform(h){let g=this._matrix;return new L.Point((h.x/g[0]-g[4])/g[0],(h.y/g[2]-g[5])/g[2])},clone(){let h=this._matrix;return new L.PM.Matrix(h[0],h[1],h[2],h[3],h[4],h[5])},translate(h){if(h===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let g,_;return typeof h=="number"?(g=h,_=h):(g=h.x,_=h.y),this._add(1,0,0,1,g,_)},scale(h,g){if(h===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,x;return g=g||L.point(0,0),typeof h=="number"?(_=h,x=h):(_=h.x,x=h.y),this._add(_,0,0,x,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},rotate(h,g){let _=Math.cos(h),x=Math.sin(h);return g=g||new L.Point(0,0),this._add(_,x,-x,_,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(h,g,_,x,k,B){let W=[[],[],[]],X=this._matrix,he=[[X[0],X[2],X[4]],[X[1],X[3],X[5]],[0,0,1]],we=[[h,_,k],[g,x,B],[0,0,1]],Ge;h&&h instanceof L.PM.Matrix&&(X=h._matrix,we=[[X[0],X[2],X[4]],[X[1],X[3],X[5]],[0,0,1]]);for(let ze=0;ze<3;ze+=1)for(let mt=0;mt<3;mt+=1){Ge=0;for(let At=0;At<3;At+=1)Ge+=he[ze][At]*we[At][mt];W[ze][mt]=Ge}return this._matrix=[W[0][0],W[1][0],W[0][1],W[1][1],W[0][2],W[1][2]],this}};var ln=Xt,Qt={calcMiddleLatLng(h,g,_){let x=h.project(g),k=h.project(_);return h.unproject(x._add(k)._divideBy(2))},findLayers(h){let g=[];return h.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&g.push(_)}),g=g.filter(_=>!!_.pm),g=g.filter(_=>!_._pmTempLayer),g=g.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),g},circleToPolygon(h,g=60,_=!0){let x=h.getLatLng(),k=h.getRadius(),B=wi(x,k,g,0,_),W=[];for(let X=0;X<B.length;X+=1){let he=[B[X].lat,B[X].lng];W.push(he)}return L.polygon(W,h.options)},disablePopup(h){h.getPopup()&&(h._tempPopupCopy=h.getPopup(),h.unbindPopup())},enablePopup(h){h._tempPopupCopy&&(h.bindPopup(h._tempPopupCopy),delete h._tempPopupCopy)},_fireEvent(h,g,_,x=!1){h.fire(g,_,x);let{groups:k}=this.getAllParentGroups(h);k.forEach(B=>{B.fire(g,_,x)})},getAllParentGroups(h){let g=[],_=[],x=k=>{for(let B in k._eventParents)if(g.indexOf(B)===-1){g.push(B);let W=k._eventParents[B];_.push(W),x(W)}};return!h._pmLastGroupFetch||!h._pmLastGroupFetch.time||new Date().getTime()-h._pmLastGroupFetch.time>1e3?(x(h),h._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:g},{groupIds:g,groups:_}):{groups:h._pmLastGroupFetch.groups,groupIds:h._pmLastGroupFetch.groupIds}},createGeodesicPolygon:wi,getTranslation:Kn,findDeepCoordIndex(h,g,_=!0){let x,k=W=>(X,he)=>{let we=W.concat(he);if(_){if(X.lat&&X.lat===g.lat&&X.lng===g.lng)return x=we,!0}else if(X.lat&&L.latLng(X).equals(g))return x=we,!0;return Array.isArray(X)&&X.some(k(we))};h.some(k([]));let B={};return x&&(B={indexPath:x,index:x[x.length-1],parentPath:x.slice(0,x.length-1)}),B},findDeepMarkerIndex(h,g){let _,x=B=>(W,X)=>{let he=B.concat(X);return W._leaflet_id===g._leaflet_id?(_=he,!0):Array.isArray(W)&&W.some(x(he))};h.some(x([]));let k={};return _&&(k={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),k},_getIndexFromSegment(h,g){if(g&&g.length===2){let _=this.findDeepCoordIndex(h,g[0]),x=this.findDeepCoordIndex(h,g[1]),k=Math.max(_.index,x.index);return(_.index===0||x.index===0)&&k!==1&&(k+=1),{indexA:_,indexB:x,newIndex:k,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(h,g,_,x){let k=$e(x,h),B=$e(x,g),W=_*Math.PI/180,X=Math.cos(W),he=Math.sin(W),we=(B.x-k.x)*X+(B.y-k.y)*he,Ge=(B.y-k.y)*X-(B.x-k.x)*he,ze=we*X+k.x,mt=we*he+k.y,At=-Ge*he+k.x,Gt=Ge*X+k.y,dn=ct(x,k),yn=ct(x,{x:ze,y:mt}),er=ct(x,B),We=ct(x,{x:At,y:Gt});return[dn,yn,er,We]},pxRadiusToMeterRadius(h,g,_){let x=g.project(_),k=L.point(x.x+h,x.y);return g.distance(g.unproject(k),_)}},En=Qt;L.PM=L.PM||{version:Ul.version,Map:us,Toolbar:ml,Draw:ji,Edit:Ht,Utils:En,Matrix:ln,activeLang:"en",optIn:!1,initialize(h){this.addInitHooks(h)},setOptIn(h){this.optIn=!!h},addInitHooks(){function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(x);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(k);function B(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(B);function W(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(W);function X(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(X);function he(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(he)},reInitLayer(h){h instanceof L.LayerGroup&&h.eachLayer(g=>{this.reInitLayer(g)}),h.pm||L.PM.optIn&&h.options.pmIgnore!==!1||h.options.pmIgnore||(h instanceof L.Map?h.pm=new L.PM.Map(h):h instanceof L.Marker?h.options.textMarker?(h.pm=new L.PM.Edit.Text(h),h.pm._initTextMarker(),h.pm._createTextMarker(!1)):h.pm=new L.PM.Edit.Marker(h):h instanceof L.Circle?h.pm=new L.PM.Edit.Circle(h):h instanceof L.CircleMarker?h.pm=new L.PM.Edit.CircleMarker(h):h instanceof L.Rectangle?h.pm=new L.PM.Edit.Rectangle(h):h instanceof L.Polygon?h.pm=new L.PM.Edit.Polygon(h):h instanceof L.Polyline?h.pm=new L.PM.Edit.Line(h):h instanceof L.LayerGroup?h.pm=new L.PM.Edit.LayerGroup(h):h instanceof L.ImageOverlay&&(h.pm=new L.PM.Edit.ImageOverlay(h)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(h){let g=this._map.mouseEventToLayerPoint(h),_,x;for(let k=this._drawFirst;k;k=k.next)_=k.layer,_.options.interactive&&_._containsPoint(g)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(_))&&(x=_);x&&(L.DomEvent.fakeStop(h),this._fireEvent([x],h))}}),L.PM.initialize()})();var vU={exports:{}};(function(t){(function(e){var n;n=pn,t.exports=e(n)})(function(e){return e.Polyline._flat=e.LineUtil.isFlat||e.Polyline._flat||function(n){return!e.Util.isArray(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"},e.GeometryUtil=e.extend(e.GeometryUtil||{},{distance:function(n,r,i){return n.latLngToLayerPoint(r).distanceTo(n.latLngToLayerPoint(i))},distanceSegment:function(n,r,i,s){var o=n.latLngToLayerPoint(r),a=n.latLngToLayerPoint(i),l=n.latLngToLayerPoint(s);return e.LineUtil.pointToSegmentDistance(o,a,l)},readableDistance:function(n,r){var i=r!=="imperial",s;return i?n>1e3?s=(n/1e3).toFixed(2)+" km":s=n.toFixed(1)+" m":(n*=1.09361,n>1760?s=(n/1760).toFixed(2)+" miles":s=n.toFixed(1)+" yd"),s},belongsSegment:function(n,r,i,s){s=s===void 0?.2:s;var o=r.distanceTo(i),a=r.distanceTo(n)+n.distanceTo(i)-o;return a/o<s},length:function(n){var r=e.GeometryUtil.accumulatedLengths(n);return r.length>0?r[r.length-1]:0},accumulatedLengths:function(n){if(typeof n.getLatLngs=="function"&&(n=n.getLatLngs()),n.length===0)return[];for(var r=0,i=[0],s=0,o=n.length-1;s<o;s++)r+=n[s].distanceTo(n[s+1]),i.push(r);return i},closestOnSegment:function(n,r,i,s){var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());var a=n.project(r,o),l=n.project(i,o),c=n.project(s,o),f=e.LineUtil.closestPointOnSegment(a,l,c);return n.unproject(f,o)},closestOnCircle:function(n,r){const i=n.getLatLng(),s=n.getRadius(),o=typeof s=="number"?s:s.radius,a=r.lng,l=r.lat,c=i.lng,f=i.lat,p=a-c,y=l-f,m=Math.sqrt(p*p+y*y),C=c+p/m*o,S=f+y/m*o;return new e.LatLng(S,C)},closest:function(n,r,i,s){var o,a=1/0,l=null,c,f,p,y;if(r instanceof Array)if(r[0]instanceof Array&&typeof r[0][0]!="number"){for(c=0;c<r.length;c++)y=e.GeometryUtil.closest(n,r[c],i,s),y&&y.distance<a&&(a=y.distance,l=y);return l}else if(r[0]instanceof e.LatLng||typeof r[0][0]=="number"||typeof r[0].lat=="number")r=e.polyline(r);else return l;if(!(r instanceof e.Polyline))return l;if(o=JSON.parse(JSON.stringify(r.getLatLngs().slice(0))),r instanceof e.Polygon){var m=function(O){if(e.Polyline._flat(O))O.push(O[0]);else for(var D=0;D<O.length;D++)m(O[D])};m(o)}if(e.Polyline._flat(o)){if(s){for(c=0,f=o.length;c<f;c++){var C=o[c];p=e.GeometryUtil.distance(n,i,C),p<a&&(a=p,l=C,l.distance=p)}return l}for(c=0,f=o.length;c<f-1;c++){var S=o[c],T=o[c+1];p=e.GeometryUtil.distanceSegment(n,i,S,T),p<=a&&(a=p,l=e.GeometryUtil.closestOnSegment(n,i,S,T),l.distance=p)}return l}else{for(c=0;c<o.length;c++)y=e.GeometryUtil.closest(n,o[c],i,s),y.distance<a&&(a=y.distance,l=y);return l}},closestLayer:function(n,r,i){for(var s=1/0,o=null,a=null,l=1/0,c=0,f=r.length;c<f;c++){var p=r[c];if(p instanceof e.LayerGroup){var y=e.GeometryUtil.closestLayer(n,p.getLayers(),i);y.distance<s&&(s=y.distance,o=y)}else p instanceof e.Circle?(a=this.closestOnCircle(p,i),l=e.GeometryUtil.distance(n,i,a)):typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(n,i,a)):(a=e.GeometryUtil.closest(n,p,i),a&&(l=a.distance)),l<s&&(s=l,o={layer:p,latlng:a,distance:l})}return o},nClosestLayers:function(n,r,i,s){if(s=typeof s=="number"?s:r.length,s<1||r.length<1)return null;for(var o=[],a,l,c=0,f=r.length;c<f;c++){var p=r[c];if(p instanceof e.LayerGroup){var y=e.GeometryUtil.closestLayer(n,p.getLayers(),i);o.push(y)}else p instanceof e.Circle?(l=this.closestOnCircle(p,i),a=e.GeometryUtil.distance(n,i,l)):typeof p.getLatLng=="function"?(l=p.getLatLng(),a=e.GeometryUtil.distance(n,i,l)):(l=e.GeometryUtil.closest(n,p,i),l&&(a=l.distance)),o.push({layer:p,latlng:l,distance:a})}return o.sort(function(m,C){return m.distance-C.distance}),o.length>s?o.slice(0,s):o},layersWithin:function(n,r,i,s){s=typeof s=="number"?s:1/0;for(var o=[],a=null,l=0,c=0,f=r.length;c<f;c++){var p=r[c];typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(n,i,a)):(a=e.GeometryUtil.closest(n,p,i),a&&(l=a.distance)),a&&l<s&&o.push({layer:p,latlng:a,distance:l})}var y=o.sort(function(m,C){return m.distance-C.distance});return y},closestLayerSnap:function(n,r,i,s,o){s=typeof s=="number"?s:1/0,o=typeof o=="boolean"?o:!0;var a=e.GeometryUtil.closestLayer(n,r,i);if(!a||a.distance>s)return null;if(o&&typeof a.layer.getLatLngs=="function"){var l=e.GeometryUtil.closest(n,a.layer,a.latlng,!0);l.distance<s&&(a.latlng=l,a.distance=e.GeometryUtil.distance(n,l,i))}return a},interpolateOnPointSegment:function(n,r,i){return e.point(n.x*(1-i)+i*r.x,n.y*(1-i)+i*r.y)},interpolateOnLine:function(n,r,i){r=r instanceof e.Polyline?r.getLatLngs():r;var s=r.length;if(s<2)return null;if(i=Math.max(Math.min(i,1),0),i===0)return{latLng:r[0]instanceof e.LatLng?r[0]:e.latLng(r[0]),predecessor:-1};if(i==1)return{latLng:r[r.length-1]instanceof e.LatLng?r[r.length-1]:e.latLng(r[r.length-1]),predecessor:r.length-2};var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());for(var a=[],l=0,c=0;c<s;c++)a[c]=n.project(r[c],o),c>0&&(l+=a[c-1].distanceTo(a[c]));for(var f=l*i,p=0,y=0,c=0;y<f;c++){var m=a[c],C=a[c+1];p=y,y+=m.distanceTo(C)}if(m==null&&C==null)var m=a[0],C=a[1],c=1;var S=y-p!==0?(f-p)/(y-p):0,T=e.GeometryUtil.interpolateOnPointSegment(m,C,S);return{latLng:n.unproject(T,o),predecessor:c-1}},locateOnLine:function(n,r,i){var s=r.getLatLngs();if(i.equals(s[0]))return 0;if(i.equals(s[s.length-1]))return 1;for(var o=e.GeometryUtil.closest(n,r,i,!1),a=e.GeometryUtil.accumulatedLengths(s),l=a[a.length-1],c=0,f=!1,p=0,y=s.length-1;p<y;p++){var m=s[p],C=s[p+1];if(c=a[p],e.GeometryUtil.belongsSegment(o,m,C,.001)){c+=m.distanceTo(o),f=!0;break}}if(!f)throw"Could not interpolate "+i.toString()+" within "+r.toString();return c/l},reverse:function(n){return e.polyline(n.getLatLngs().slice(0).reverse())},extract:function(n,r,i,s){if(i>s)return e.GeometryUtil.extract(n,e.GeometryUtil.reverse(r),1-i,1-s);i=Math.max(Math.min(i,1),0),s=Math.max(Math.min(s,1),0);var o=r.getLatLngs(),a=e.GeometryUtil.interpolateOnLine(n,r,i),l=e.GeometryUtil.interpolateOnLine(n,r,s);if(i==s){var c=e.GeometryUtil.interpolateOnLine(n,r,s);return[c.latLng]}a.predecessor==-1&&(a.predecessor=0),l.predecessor==-1&&(l.predecessor=0);var f=o.slice(a.predecessor+1,l.predecessor+1);return f.unshift(a.latLng),f.push(l.latLng),f},isBefore:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs();return i[i.length-1].equals(s[0])},isAfter:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs();return i[0].equals(s[s.length-1])},startsAtExtremity:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs(),o=i[0];return o.equals(s[0])||o.equals(s[s.length-1])},computeAngle:function(n,r){return Math.atan2(r.y-n.y,r.x-n.x)*180/Math.PI},computeSlope:function(n,r){var i=(r.y-n.y)/(r.x-n.x),s=n.y-i*n.x;return{a:i,b:s}},rotatePoint:function(n,r,i,s){var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());var a=i*Math.PI/180,l=n.project(r,o),c=n.project(s,o),f=Math.cos(a)*(l.x-c.x)-Math.sin(a)*(l.y-c.y)+c.x,p=Math.sin(a)*(l.x-c.x)+Math.cos(a)*(l.y-c.y)+c.y;return n.unproject(new e.Point(f,p),o)},bearing:function(n,r){var i=Math.PI/180,s=n.lat*i,o=r.lat*i,a=n.lng*i,l=r.lng*i,c=Math.sin(l-a)*Math.cos(o),f=Math.cos(s)*Math.sin(o)-Math.sin(s)*Math.cos(o)*Math.cos(l-a),p=(Math.atan2(c,f)*180/Math.PI+360)%360;return p>=180?p-360:p},destination:function(n,r,i){r=(r+360)%360;var s=Math.PI/180,o=180/Math.PI,a=e.CRS.Earth.R,l=n.lng*s,c=n.lat*s,f=r*s,p=Math.sin(c),y=Math.cos(c),m=Math.cos(i/a),C=Math.sin(i/a),S=Math.asin(p*m+y*C*Math.cos(f)),T=l+Math.atan2(Math.sin(f)*C*y,m-p*Math.sin(S));return T=T*o,T=T>180?T-360:T<-180?T+360:T,e.latLng([S*o,T])},angle:function(n,r,i){var s=n.latLngToContainerPoint(r),o=n.latLngToContainerPoint(i),a=Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI+90;return a+=a<0?360:0,a},destinationOnSegment:function(n,r,i,s){var o=e.GeometryUtil.angle(n,r,i),a=e.GeometryUtil.destination(r,o,s);return e.GeometryUtil.closestOnSegment(n,a,r,i)}}),e.GeometryUtil})})(vU);L.Map.mergeOptions({almostOver:!0,almostDistance:25,almostSamplingPeriod:50,almostOnMouseMove:!0});L.Handler.AlmostOver=L.Handler.extend({includes:L.Evented||L.Mixin.Events,initialize:function(t){this._map=t,this._layers=[],this._previous=null,this._marker=null,this._buffer=0,this.__mouseMoveSampling=function(){var e=new Date;return function(n){var r=new Date,i=r-e<this._map.options.almostSamplingPeriod;i||this._layers.length===0||(e=r,this._map.fire("mousemovesample",{latlng:n.latlng}))}}()},addHooks:function(){this._map.options.almostOnMouseMove&&(this._map.on("mousemove",this.__mouseMoveSampling,this),this._map.on("mousemovesample",this._onMouseMove,this)),this._map.on("click dblclick",this._onMouseClick,this),this._map;function t(){this._buffer=this._map.layerPointToLatLng([0,0]).lat-this._map.layerPointToLatLng([this._map.options.almostDistance,this._map.options.almostDistance]).lat}this._map.on("viewreset zoomend",t,this),this._map.whenReady(t,this)},removeHooks:function(){this._map.off("mousemovesample"),this._map.off("mousemove",this.__mouseMoveSampling,this),this._map.off("click dblclick",this._onMouseClick,this)},addLayer:function(t){typeof t.eachLayer=="function"?t.eachLayer(function(e){this.addLayer(e)},this):(typeof this.indexLayer=="function"&&this.indexLayer(t),this._layers.push(t))},removeLayer:function(t){if(typeof t.eachLayer=="function")t.eachLayer(function(n){this.removeLayer(n)},this);else{typeof this.unindexLayer=="function"&&this.unindexLayer(t);var e=this._layers.indexOf(t);0<=e&&this._layers.splice(e,1)}this._previous=null},getClosest:function(t){var e=L.GeometryUtil.closestLayerSnap,n=this._map.options.almostDistance,r=[];return typeof this.searchBuffer=="function"?r=this.searchBuffer(t,this._buffer):r=this._layers,e(this._map,r,t,n,!1)},_onMouseMove:function(t){var e=this.getClosest(t.latlng);e?(this._previous?L.stamp(this._previous.layer)!=L.stamp(e.layer)&&(this._map.fire("almost:out",{layer:this._previous.layer}),this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng})):this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng}),this._map.fire("almost:move",{layer:e.layer,latlng:e.latlng})):this._previous&&this._map.fire("almost:out",{layer:this._previous.layer}),this._previous=e},_onMouseClick:function(t){var e=this.getClosest(t.latlng);e&&this._map.fire("almost:"+t.type,{layer:e.layer,latlng:e.latlng})}});L.LayerIndexMixin!==void 0&&L.Handler.AlmostOver.include(L.LayerIndexMixin);L.Map.addInitHook("addHandler","almostOver",L.Handler.AlmostOver);var yU=MS,bU=Jb,_U="Expected a function";function wU(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(_U);return bU(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),yU(t,e,{leading:r,maxWait:e,trailing:i})}var xU=wU;const Pd=ly(xU),Sl=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=pn.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n},Ea=(t,e="m",n="")=>{let r,i;return e==="m"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`};function LU(){const t=kt(null),e=kt(null),n=kt(null),r=kt(null),i=kt(""),s=kt(null),o=kt(!1);kt(null);const a=()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(R=>R.remove()),document.querySelectorAll(".drawing-help-message").forEach(R=>R.remove())};window.addEventListener("clearControlPoints",a),Au(()=>{window.removeEventListener("clearControlPoints",a),t.value&&(t.value.remove(),t.value=null)});const l=(R,j)=>{const q=pn.DomUtil.create("div","measure-tooltip");if(q.innerHTML=j,q.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(q),t.value){const re=t.value.latLngToContainerPoint(R);q.style.left=`${re.x+10}px`,q.style.top=`${re.y-25}px`}return q},c=Pd((R,j,q)=>{if(R&&(R.innerHTML=q,t.value)){const re=t.value.latLngToContainerPoint(j);R.style.left=`${re.x+10}px`,R.style.top=`${re.y-25}px`}},100),f=(R,j,q)=>{R.on("mouseover",()=>{const re=l(R.getLatLng(),q());R.measureDiv=re}),R.on("mousemove",re=>{R.measureDiv&&t.value&&c(R.measureDiv,re.latlng,q())}),R.on("mouseout",()=>{R.measureDiv&&(R.measureDiv.remove(),R.measureDiv=void 0)})};let p=[];const y=()=>{var R;p.cleanup&&p.cleanup(),n.value&&n.value.clearLayers(),p=[],(R=r.value)==null||R.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(j=>j.remove())},m=(R,j="#2563EB")=>{const q=typeof window<"u"&&window.innerWidth<768,re=pn.circleMarker(R,{radius:q?14:6,color:j,fillColor:j,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(re),re},C=(R,j)=>{var re,xe,be,_e,Z,ae;const q={type:j,style:R.options||{}};try{if(R instanceof pn.Polygon)try{const de=R.getLatLngs()[0].map(Ee=>[Ee.lng,Ee.lat]);de.push(de[0]);const ge=Hh([de]);q.surface=Dp(ge),q.perimeter=w9(Gg(de),{units:"meters"})}catch(ce){console.warn("Erreur lors du calcul des proprits du polygone:",ce),q.surface=0,q.perimeter=0}else if(R instanceof pn.Polyline&&!(R instanceof pn.Polygon))try{const ce=R.getLatLngs();let de=0;for(let ge=1;ge<ce.length;ge++)de+=ce[ge].distanceTo(ce[ge-1]);q.length=de}catch(ce){console.warn("Erreur lors du calcul de la longueur de la ligne:",ce),q.length=0}q.style={...q.style,color:((re=R.options)==null?void 0:re.color)||"#3388ff",weight:((xe=R.options)==null?void 0:xe.weight)||3,opacity:((be=R.options)==null?void 0:be.opacity)||1,fillColor:((_e=R.options)==null?void 0:_e.fillColor)||"#3388ff",fillOpacity:((Z=R.options)==null?void 0:Z.fillOpacity)||.2,dashArray:((ae=R.options)==null?void 0:ae.dashArray)||""}}catch(ce){console.error("Erreur lors du calcul des proprits de la forme:",ce),q.style=q.style||{color:"#3388ff",weight:3,opacity:1,fillColor:"#3388ff",fillOpacity:.2,dashArray:""}}return q},S=()=>{if(!t.value||!t.value.almostOver||!e.value)return;e.value.getLayers().filter(j=>j instanceof vs||j instanceof pn.Polyline&&!(j instanceof pn.Polygon)||j instanceof Tl||j instanceof rl).forEach(j=>{var q;(q=t.value)==null||q.almostOver.addLayer(j)})},T=(R,j,q)=>{const re={almostOnMouseMove:!0,zoomAnimation:!0,fadeAnimation:!0,markerZoomAnimation:!0},xe=pn.map(R,re).setView(j,q);t.value=xe,pn.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(xe);const be=new pn.FeatureGroup;return be.addTo(xe),e.value=be,xe.almostOver?xe.almostOver.options.tolerance=25:console.warn("Leaflet.AlmostOver plugin not loaded properly"),n.value=pn.featureGroup().addTo(xe),r.value=pn.featureGroup().addTo(xe),xe.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:be,snapLayers:[be,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),xe.whenReady(()=>{t.value&&t.value.almostOver&&e.value&&setTimeout(S,100)}),xe.on("pm:drawstart",_e=>{o.value=!0,_e.shape==="Circle"&&i.value==="Semicircle"&&(xe.getContainer().style.cursor="crosshair")}),xe.on("pm:drawend",()=>{o.value=!1,xe.getContainer().style.cursor="",s.value&&Sl("Cliquez sur la forme pour afficher les points de contrle")}),xe.on("pm:create",H),be.on("click",_e=>{var ae,ce,de;pn.DomEvent.stopPropagation(_e);const Z=_e.layer;Z.name&&!((ae=Z.properties)!=null&&ae.name)?(Z.properties||(Z.properties={}),Z.properties.name=Z.name):(ce=Z.properties)!=null&&ce.name&&!Z.name&&(Z.name=Z.properties.name),(de=r.value)==null||de.clearLayers(),y(),s.value=Z,Z instanceof pn.Polygon?K(Z):Z instanceof vs||Z instanceof pn.Polyline?V(Z):Z instanceof rl&&pe(Z)}),xe.on("pm:edit",_e=>{var ae;const Z=_e.layer;if(Z){const ce=((ae=Z.properties)==null?void 0:ae.type)||"unknown";J(Z,ce),Z instanceof pn.Polygon?K(Z):Z instanceof vs?(Z.updateProperties(),J(Z,"Line"),V(Z)):Z instanceof pn.Polyline?V(Z):Z instanceof rl&&(Z.updateProperties(),pe(Z))}}),xe.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(_e=>_e.remove()),Sl("Dplacez la forme  l'endroit souhait")}),xe.on("pm:dragend",_e=>{var ae;const Z=_e.layer;if(Z){const ce=((ae=Z.properties)==null?void 0:ae.type)||"unknown";Z instanceof vs?(Z.updateProperties(),J(Z,"Line"),V(Z)):J(Z,ce)}setTimeout(()=>{Sl("Cliquez sur la forme pour afficher les points de contrle")},100)}),xe.on("pm:remove",()=>{var _e;(_e=document.querySelector(".drawing-help-message"))==null||_e.remove()}),xe.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(_e=>_e.remove()),Sl("Utilisez les points de contrle pour modifier la forme")}),xe.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(_e=>_e.remove())}),xe.on("zoomstart",()=>{s.value&&(y(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(_e=>_e.remove()))}),xe.on("almost:over",function(_e){const ae=_e.layer;if(ae){if(s.value===ae)return;if(ae instanceof vs){const ce={...ae.options};ae._originalStyle=ce;const de=ce;ae.setStyle({weight:(de.weight||3)+2,opacity:Math.min((de.opacity||1)+.2,1)}),document.querySelectorAll(".drawing-help-message").forEach(ge=>ge.remove()),Sl("Cliquez pour slectionner cette ligne"),xe.getContainer()&&(xe.getContainer().style.cursor="pointer")}else if(ae instanceof Tl){const ce={...ae.options};ae._originalStyle=ce,ae.setStyle({weight:(ce.weight||3)+2,opacity:Math.min((ce.opacity||1)+.2,1),fillOpacity:Math.min((ce.fillOpacity||.2)+.1,.4)}),document.querySelectorAll(".drawing-help-message").forEach(de=>de.remove()),Sl("Cliquez pour slectionner ce polygone"),xe.getContainer()&&(xe.getContainer().style.cursor="pointer")}else if(ae instanceof rl){const ce=ae.getElement();ce&&(ce.classList.add("geo-note-pulse"),ce.style.zIndex="1000",ce.style.visibility="visible",ce.style.display="flex",ce.style.opacity="1",ce.style.filter="drop-shadow(0 0 5px rgba(59, 130, 246, 0.7))"),document.querySelectorAll(".drawing-help-message").forEach(de=>de.remove()),Sl("Cliquez pour slectionner cette note"),xe.getContainer()&&(xe.getContainer().style.cursor="pointer")}}}),xe.on("almost:out",function(_e){const ae=_e.layer;if(ae){if(s.value===ae)return;if(ae instanceof vs&&ae._originalStyle)ae.setStyle(ae._originalStyle),ae._originalStyle=void 0;else if(ae instanceof Tl)ae._originalStyle&&(ae.setStyle(ae._originalStyle),ae._originalStyle=void 0);else if(ae instanceof rl){const ce=ae.getElement();ce?(ce.classList.remove("geo-note-pulse"),ce.style.zIndex="",ce.style.filter="none",ce.style.opacity="1",ce.style.display="block",ce.style.visibility="visible",Array.from(ce.querySelectorAll("*")).forEach(de=>{de.style.visibility="visible",de.style.display="block",de.style.opacity="1"}),setTimeout(()=>{try{const de=ce.getBoundingClientRect();(de.width===0||de.height===0)&&(console.warn("[almost:out] L'lment a une taille nulle aprs sortie, recration de l'icne"),ae.recreateIcon())}catch(de){console.error("[almost:out] Erreur lors de la vrification de la taille:",de),ae.recreateIcon()}},100)):(console.warn("[almost:out] lment DOM introuvable, recration de l'icne"),ae.recreateIcon())}(!s.value||s.value&&s.value!==ae)&&document.querySelectorAll(".drawing-help-message").forEach(ce=>ce.remove()),xe.getContainer()&&!document.querySelectorAll(".geo-note-pulse").length&&!document.querySelectorAll(".line-hover-effect").length&&(xe.getContainer().style.cursor="")}}),xe.on("almost:click",function(_e){var ce,de;const ae=_e.layer;ae&&s.value===ae||(s.value&&y(),ae&&ae instanceof vs?(s.value=ae,(ce=r.value)==null||ce.clearLayers(),y(),V(ae),Sl("Utilisez les points de contrle pour modifier la ligne")):ae&&ae instanceof Tl?(s.value=ae,(de=r.value)==null||de.clearLayers(),y(),K(ae),Sl("Utilisez les points de contrle pour modifier le polygone")):ae&&ae instanceof rl&&(s.value=ae,ae.editNote()))}),be.on("layeradd",function(_e){xe.almostOver&&(_e.layer instanceof vs||_e.layer instanceof pn.Polyline&&!(_e.layer instanceof pn.Polygon)||_e.layer instanceof Tl||_e.layer instanceof rl)&&xe.almostOver.addLayer(_e.layer)}),be.on("layerremove",function(_e){xe.almostOver&&(_e.layer instanceof vs||_e.layer instanceof pn.Polyline&&!(_e.layer instanceof pn.Polygon)||_e.layer instanceof Tl||_e.layer instanceof rl)&&xe.almostOver.removeLayer(_e.layer)}),xe},O=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const R=e.value.getBounds();if(R.isValid()){const j={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(R,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value&&(t.value.options.fadeAnimation=j.fadeAnimation),setTimeout(()=>{try{t.value&&(t.value.options.zoomAnimation=j.zoomAnimation,t.value.options.markerZoomAnimation=j.markerZoomAnimation)}catch(q){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",q)}},500)}catch(q){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",q)}},500)}}catch(R){if(console.warn("[useMapDrawing] Error adjusting view:",R),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(j){console.error("[useMapDrawing] Erreur lors de la restauration aprs chec:",j)}}},D=R=>{var q;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(re=>re.remove());try{const re=t.value.pm;re.globalEditModeEnabled()&&re.disableGlobalEditMode(),re.globalRemovalModeEnabled()&&re.disableGlobalRemovalMode(),re.disableDraw(),y(),(q=r.value)==null||q.clearLayers()}catch(re){console.error("Error disabling modes:",re)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:R}})),i.value=R,!R){y(),S();return}let j=R;switch(R){case"Note":j="GeoNote";break;case"Polygon":j="Polygon";break;case"Line":j="Line";break;default:j=R}R=j,oe(),setTimeout(()=>{var re,xe,be,_e,Z,ae,ce;try{switch(R){case"Polygon":Sl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(re=t.value)==null||re.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(xe=t.value)==null||xe.off("pm:create"),(be=t.value)==null||be.on("pm:create",de=>{var ge,Ee,Ue;if(de.shape==="Polygon"&&de.layer){const Ne=de.layer.getLatLngs()[0];(ge=t.value)==null||ge.removeLayer(de.layer),(Ee=e.value)!=null&&Ee.hasLayer(de.layer)&&e.value.removeLayer(de.layer);const rt=new Tl(Ne,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(rt),s.value=rt,rt.updateProperties()),(Ue=t.value)==null||Ue.pm.disableDraw(),oe()}});break;case"Line":Sl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(_e=t.value)==null||_e.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Z=t.value)==null||Z.off("pm:create"),(ae=t.value)==null||ae.on("pm:create",de=>{var ge,Ee,Ue;if(de.shape==="Line"&&de.layer){const Ne=de.layer.getLatLngs();(ge=t.value)==null||ge.removeLayer(de.layer),(Ee=e.value)!=null&&Ee.hasLayer(de.layer)&&e.value.removeLayer(de.layer);const rt=new vs(Ne,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(rt),s.value=rt,rt.updateProperties()),(Ue=t.value)==null||Ue.pm.disableDraw(),oe()}});break;case"GeoNote":if(Sl("Cliquez pour ajouter une note golocalise, double-cliquez pour diter"),t.value){const de=async Ee=>{if(!t.value||!e.value)return null;try{const Ue=qg(),Ne=new rl(Ee,{color:"#3B82F6",name:"Note golocalise",description:"",columnId:"1"});e.value.addLayer(Ne),s.value=Ne,Ne.updateProperties();try{const rt=Ue.currentMapId||void 0,gt=await Ne.saveNote(rt),_t=Ne._leaflet_id;return window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:Ne,leafletId:_t,backendId:gt}})),Ne.openPopup(),Ne}catch(rt){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",rt),ku(async()=>{const{useNotificationStore:gt}=await Promise.resolve().then(()=>rB);return{useNotificationStore:gt}},void 0).then(({useNotificationStore:gt})=>{gt().error("Erreur lors de la cration de la note")}),null}}catch(Ue){return console.error("[useMapDrawing] Erreur lors de la cration de la note:",Ue),null}},ge=async Ee=>{pn.DomEvent.stopPropagation(Ee),pn.DomEvent.preventDefault(Ee);const Ue=await de(Ee.latlng);Ue&&t.value&&(t.value.off("click",ge),e.value&&e.value.getLayers().forEach(Ne=>{if(Ne.off&&typeof Ne.off=="function")try{Ne.off("click")}catch(rt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",rt)}}),D(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:Ue,leafletId:Ue._leaflet_id}})))};if(t.value.on("click",ge),e.value){const Ee=async Ne=>{pn.DomEvent.stopPropagation(Ne),pn.DomEvent.preventDefault(Ne);const rt=await de(Ne.latlng);return rt&&t.value&&(t.value.off("click",ge),e.value&&e.value.getLayers().forEach(gt=>{if(gt.off&&typeof gt.off=="function")try{gt.off("click")}catch(_t){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",_t)}}),D(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:rt,leafletId:rt._leaflet_id}}))),!1};e.value.getLayers().forEach(Ne=>{Ne.on("click",Ee)});const Ue=()=>{e.value&&e.value.getLayers().forEach(Ne=>{if(Ne.off&&typeof Ne.off=="function")try{Ne.off("click")}catch(rt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",rt)}}),window.removeEventListener("tool:changed",Ue)};window.addEventListener("tool:changed",Ue)}}break;case"delete":Sl("Cliquez sur une forme pour la supprimer"),(ce=t.value)==null||ce.pm.enableGlobalRemovalMode();break}}catch(de){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",de)}},100)},N=R=>{if(!s.value)return;const j=s.value;j.properties=j.properties||{},j.properties.style=j.properties.style||{},j.properties.style={...j.properties.style,...R};{const q={};R.fillColor&&(q.fillColor=R.fillColor),R.fillOpacity!==void 0&&(q.fillOpacity=R.fillOpacity),R.strokeColor&&(q.color=R.strokeColor),R.strokeOpacity!==void 0&&(q.opacity=R.strokeOpacity),R.strokeWidth!==void 0&&(q.weight=R.strokeWidth),R.dashArray&&(q.dashArray=R.dashArray),"setStyle"in j&&j.setStyle(q)}},U=R=>{if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}s.value.properties||(s.value.properties={}),s.value.properties.type,s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3));const j=s.value.properties.type,q=s.value.properties.category,re="category"in R&&R.category!==q;if(Object.keys(R).forEach(be=>{be==="type"&&j||s.value&&(s.value.properties[be]=R[be]),be==="name"&&(s.value.name=R[be])}),j&&(s.value.properties.type=j),q&&!re&&(s.value.properties.category=q),s.value&&s.value._dbId&&re){const be=qg(),_e=be.elements.find(Z=>{var ae;return Z.id===((ae=s.value)==null?void 0:ae._dbId)});if(_e){const Z=_e;Z.data||(Z.data={}),Z.data.category=s.value.properties.category,be.$patch({unsavedChanges:!0})}}const xe=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:re}});window.dispatchEvent(xe)},G=R=>{s.value=null,al(()=>{s.value=R})},J=(R,j)=>{AS((re,xe)=>{const be=C(re,xe);re.properties={...be},G(re),re.fire("properties:updated",{shape:re,properties:re.properties})},100)(R,j)},ee=(R,j)=>pn.latLng((R.lat+j.lat)/2,(R.lng+j.lng)/2),V=R=>{if(!t.value||!e.value)return;y();const j=R.getLatLngs();if(!j||j.length===0){console.warn("Pas de points pour la ligne");return}let q=null;if(R instanceof vs){const re=R.getCenter();q=m(re,"#059669"),p.push(q),f(q,R,()=>{const xe=R.getLength()||0;return Ea(xe,"m","Longueur totale")}),q.on("mousedown",xe=>{if(!t.value)return;pn.DomEvent.stopPropagation(xe),t.value.dragging.disable();let be=!0;const _e=R.getLatLngs().map(ge=>pn.latLng(ge.lat,ge.lng)),Z=xe.latlng;R instanceof vs&&(R.off("move:end"),R.off("vertex:moved"),R.off("latlngs:updated"),R.off("properties:updated")),p.forEach((ge,Ee)=>{Ee>0&&(ge.setStyle({opacity:0,fillOpacity:0}),ge.measureDiv&&(ge.measureDiv.style.display="none"))});const ce=Pd(ge=>{if(!be)return;const Ee=ge.latlng.lng-Z.lng,Ue=ge.latlng.lat-Z.lat,Ne=_e.map(rt=>pn.latLng(rt.lat+Ue,rt.lng+Ee));pn.Polyline.prototype.setLatLngs.call(R,Ne),q==null||q.setLatLng(ge.latlng)},16),de=()=>{if(be=!1,!!t.value){if(t.value.off("mousemove",ce),document.removeEventListener("mouseup",de),t.value.dragging.enable(),R instanceof vs){const ge=()=>{y(),V(R)};R.on("move:end",ge),R.on("vertex:moved",ge),R.on("latlngs:updated",ge),R.on("properties:updated",ge),R.updateProperties(),J(R,"Line")}y(),V(R)}};t.value.on("mousemove",ce),document.addEventListener("mouseup",de)})}if(j.forEach((re,xe)=>{const be=m(re,"#DC2626");p.push(be),f(be,R,()=>{if(R instanceof vs){const _e=R.getLength()||0,Z=R.getLengthToVertex?R.getLengthToVertex(xe):0;return[Ea(Z,"m","Distance depuis le dbut"),Ea(_e,"m","Longueur totale")].join("<br>")}return""}),be.on("mousedown",_e=>{if(!t.value)return;pn.DomEvent.stopPropagation(_e),t.value.dragging.disable();let Z=!0;R instanceof vs&&(R.off("move:end"),R.off("vertex:moved"),R.off("latlngs:updated"),R.off("properties:updated")),p.forEach((de,ge)=>{ge!==xe+1&&(de.setStyle({opacity:0,fillOpacity:0}),de.measureDiv&&(de.measureDiv.style.display="none"))});const ae=Pd(de=>{if(!Z)return;const ge=R.getLatLngs();ge[xe]=de.latlng,pn.Polyline.prototype.setLatLngs.call(R,ge),be.setLatLng(de.latlng)},16),ce=()=>{if(Z=!1,!!t.value){if(t.value.off("mousemove",ae),document.removeEventListener("mouseup",ce),t.value.dragging.enable(),R instanceof vs){const de=()=>{y(),V(R)};R.on("move:end",de),R.on("vertex:moved",de),R.on("latlngs:updated",de),R.on("properties:updated",de),R.updateProperties(),J(R,"Line")}y(),V(R)}};t.value.on("mousemove",ae),document.addEventListener("mouseup",ce)})}),j.length>=2)for(let re=0;re<j.length-1;re++){const xe=j[re],be=j[re+1],_e=pn.latLng((xe.lat+be.lat)/2,(xe.lng+be.lng)/2),Z=m(_e,"#2b6451");p.push(Z),f(Z,R,()=>{if(R instanceof vs){const ae=R.getSegmentLengthAt(re),ce=R.getLength()||0,de=(R.getLengthToVertex?R.getLengthToVertex(re):0)+ae/2;return[Ea(ae,"m","Longueur du segment"),Ea(ae/2,"m","Demi-segment"),Ea(de,"m","Distance depuis le dbut"),Ea(ce,"m","Longueur totale")].join("<br>")}return""})}if(R instanceof vs){const re=()=>{y(),V(R)},xe=()=>{p.forEach((be,_e)=>{_e>0&&(be.setStyle({opacity:0,fillOpacity:0}),be.measureDiv&&(be.measureDiv.style.display="none"))})};R.on("move:start",xe),R.on("move:end",re),R.on("vertex:moved",re),R.on("latlngs:updated",re),R.on("properties:updated",re),p.cleanup=()=>{R.off("move:start",xe),R.off("move:end",re),R.off("vertex:moved",re),R.off("latlngs:updated",re),R.off("properties:updated",re)}}},K=R=>{if(!t.value||!e.value)return;y();const j=R.getLatLngs()[0],q=j.map(ce=>[ce.lng,ce.lat]);q.push(q[0]);const re=Hh([q]),xe=Dp(re),be=j.reduce((ce,de,ge)=>{const Ee=j[(ge+1)%j.length];return ce+de.distanceTo(Ee)},0);let _e;if(typeof R.getCenter=="function")try{_e=R.getCenter()}catch(ce){console.warn("Erreur lors de la rcupration du centre du polygone via getCenter(), utilisation de la mthode alternative",ce);const de=yg(re);_e=pn.latLng(de.geometry.coordinates[1],de.geometry.coordinates[0])}else{const ce=yg(re);_e=pn.latLng(ce.geometry.coordinates[1],ce.geometry.coordinates[0])}const Z=m(_e,"#059669");p.push(Z),f(Z,R,()=>[Ea(be,"m","Primtre"),Ea(xe,"m","Surface")].join("<br>")),Z.on("mousedown",ce=>{if(!t.value)return;pn.DomEvent.stopPropagation(ce),t.value.dragging.disable();let de=!0;const ge=ce.latlng,Ee=[...j];p.forEach((gt,_t)=>{_t>0&&gt.setStyle({opacity:0,fillOpacity:0})});const Ue=Pd(gt=>{if(!de)return;const _t=gt.latlng.lng-ge.lng,le=gt.latlng.lat-ge.lat,se=Ee.map(ue=>pn.latLng(ue.lat+le,ue.lng+_t));pn.Polygon.prototype.setLatLngs.call(R,[se]),Z.setLatLng(gt.latlng)},16),Ne=gt=>{de&&Ue(gt)},rt=()=>{if(de=!1,!!t.value){if(t.value.off("mousemove",Ne),document.removeEventListener("mouseup",rt),t.value.dragging.enable(),R.properties){const gt=R.getLatLngs()[0],_t=gt.map(se=>[se.lng,se.lat]);_t.push(_t[0]);const le=Hh([_t]);R.properties.area=Dp(le),R.properties.perimeter=gt.reduce((se,ue,Q)=>{const ke=gt[(Q+1)%gt.length];return se+ue.distanceTo(ke)},0),R.properties.surface=R.properties.area}y(),K(R),s.value=null,al(()=>{s.value=R})}};t.value.on("mousemove",Ne),document.addEventListener("mouseup",rt)}),j.forEach((ce,de)=>{const ge=m(ce,"#DC2626");p.push(ge),f(ge,R,()=>{const Ee=j[(de-1+j.length)%j.length],Ue=j[(de+1)%j.length],Ne=ce.distanceTo(Ee),rt=ce.distanceTo(Ue);return[Ea(Ne,"m","Distance au point prcdent"),Ea(rt,"m","Distance au point suivant"),Ea(be,"m","Primtre total"),Ea(xe,"m","Surface")].join("<br>")}),ge.on("mousedown",Ee=>{if(pn.DomEvent.stopPropagation(Ee),!t.value)return;t.value.dragging.disable();let Ue=!0;Z&&(Z.setStyle({opacity:0,fillOpacity:0}),Z.measureDiv&&(Z.measureDiv.style.display="none"));const Ne=Pd(_t=>{if(!Ue)return;j[de]=_t.latlng,pn.Polygon.prototype.setLatLngs.call(R,[j]),ge.setLatLng(_t.latlng);const le=p.slice(j.length+1),se=(de-1+j.length)%j.length,ue=le[se];if(ue){const ke=j[se],Ve=j[de],Xe=pn.latLng((ke.lat+Ve.lat)/2,(ke.lng+Ve.lng)/2);ue.setLatLng(Xe)}const Q=le[de];if(Q){const ke=j[de],Ve=j[(de+1)%j.length],Xe=pn.latLng((ke.lat+Ve.lat)/2,(ke.lng+Ve.lng)/2);Q.setLatLng(Xe)}},16),rt=_t=>{Ue&&Ne(_t)},gt=()=>{if(Ue=!1,!!t.value){if(t.value.off("mousemove",rt),document.removeEventListener("mouseup",gt),t.value.dragging.enable(),R.properties){const _t=R.getLatLngs()[0].map(se=>[se.lng,se.lat]);_t.push(_t[0]);const le=Hh([_t]);R.properties.area=Dp(le),R.properties.perimeter=j.reduce((se,ue,Q)=>{const ke=j[(Q+1)%j.length];return se+ue.distanceTo(ke)},0),R.properties.surface=R.properties.area}y(),K(R),s.value=null,al(()=>{s.value=R})}};t.value.on("mousemove",rt),document.addEventListener("mouseup",gt)})}),(()=>{const ce=R.getLatLngs()[0];p.slice(ce.length+1).forEach(ge=>{n.value&&n.value.removeLayer(ge)}),p=p.slice(0,ce.length+1);const de=new Array(ce.length);for(let ge=0;ge<ce.length;ge++){const Ee=ce[ge],Ue=ce[(ge+1)%ce.length];de[ge]=ee(Ee,Ue)}de.forEach((ge,Ee)=>{const Ue=m(ge,"#2b6451");p.push(Ue),f(Ue,R,()=>{const Ne=ce[Ee],rt=ce[(Ee+1)%ce.length],gt=Ne.distanceTo(rt);return[Ea(gt,"m","Longueur du segment"),Ea(be,"m","Primtre total"),Ea(xe,"m","Surface")].join("<br>")}),Ue.on("mousedown",Ne=>{if(!t.value)return;pn.DomEvent.stopPropagation(Ne),t.value.dragging.disable();let rt=!0;const gt=Ee;Z&&(Z.setStyle({opacity:0,fillOpacity:0}),Z.measureDiv&&(Z.measureDiv.style.display="none"));const _t=[...R.getLatLngs()[0]];_t.splice((gt+1)%_t.length,0,ge),R.setLatLngs([_t]),y(),K(R);const le=gt+1,se=1+le,ue=le<p.length-1?p[se]:null;if(ue){const Q=Ve=>{if(!rt)return;const Xe=R.getLatLngs()[0];Xe[le]=Ve.latlng,R.setLatLngs([Xe]),ue.setLatLng(Ve.latlng);const lt=p.slice(1+Xe.length),at=(le-1+Xe.length)%Xe.length,pt=le;if(lt[at]){const jt=Xe[at],Bt=Xe[le],qt=pn.latLng((jt.lat+Bt.lat)/2,(jt.lng+Bt.lng)/2);lt[at].setLatLng(qt)}if(lt[pt]){const jt=Xe[le],Bt=Xe[(le+1)%Xe.length],qt=pn.latLng((jt.lat+Bt.lat)/2,(jt.lng+Bt.lng)/2);lt[pt].setLatLng(qt)}},ke=()=>{if(rt=!1,!!t.value){if(t.value.off("mousemove",Q),document.removeEventListener("mouseup",ke),t.value.dragging.enable(),R.properties){const Ve=R.getLatLngs()[0].map(lt=>[lt.lng,lt.lat]);Ve.push(Ve[0]);const Xe=Hh([Ve]);R.properties.area=Dp(Xe),R.properties.perimeter=R.getLatLngs()[0].reduce((lt,at,pt,jt)=>{const Bt=jt[(pt+1)%jt.length];return lt+at.distanceTo(Bt)},0)}y(),K(R),s.value=null,al(()=>{s.value=R})}};t.value.on("mousemove",Q),document.addEventListener("mouseup",ke)}else t.value.dragging.enable(),y(),K(R)})})})()},pe=R=>{if(!t.value||!e.value)return;y();const j=R.getLatLng(),q=m(j,"#059669");p.push(q),f(q,R,()=>`Position: ${j.lat.toFixed(6)}, ${j.lng.toFixed(6)}`),q.on("mousedown",re=>{if(!t.value)return;pn.DomEvent.stopPropagation(re),t.value.dragging.disable(),R.startMoving();let xe=!0;const _e=Pd(ae=>{xe&&(q.setLatLng(ae.latlng),R.setLatLng(ae.latlng))},16),Z=()=>{t.value&&(t.value.off("mousemove",_e),document.removeEventListener("mouseup",Z),t.value.dragging.enable(),xe=!1,R.finishMoving(),R.updateProperties(),s.value=null,al(()=>{s.value=R,y(),pe(R)}))};t.value.on("mousemove",_e),document.addEventListener("mouseup",Z)}),s.value=R},$=R=>{if(!(!t.value||!r.value)){r.value.clearLayers();try{if(R instanceof rl){const j=R.getLatLng();if(j){const q=pn.circleMarker(j,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(q)}}else if(R instanceof Tl||R instanceof pn.Polygon){let j=[];if("getLatLngs"in R){const re=R.getLatLngs();if(Array.isArray(re)&&re.length>0){const xe=re[0];Array.isArray(xe)?j=xe:xe instanceof pn.LatLng&&(j=re)}}let q=null;if(R instanceof Tl&&typeof R.getCenter=="function")q=R.getCenter();else if(j.length>0){const re=j.map(_e=>[_e.lng,_e.lat]);re.push(re[0]);const xe=Hh([re]),be=yg(xe);q=pn.latLng(be.geometry.coordinates[1],be.geometry.coordinates[0])}if(q){const re=pn.circleMarker(q,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value&&r.value.addLayer(re)}j.forEach(re=>{if(re){const xe=pn.circleMarker(re,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value&&r.value.addLayer(xe)}});for(let re=0;re<j.length;re++){const xe=j[re],be=j[(re+1)%j.length];if(xe&&be){const _e=pn.latLng((xe.lat+be.lat)/2,(xe.lng+be.lng)/2),Z=pn.circleMarker(_e,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(Z)}}}}catch(j){console.error("[generateTempControlPoints] Erreur lors de la gnration des points temporaires:",j)}}},H=R=>{var re,xe,be,_e,Z;const j=R.layer;(re=e.value)==null||re.addLayer(j);let q="unknown";if(j instanceof pn.Polygon?q="Polygon":j instanceof pn.Polyline&&!(j instanceof pn.Polygon)&&(q="Line"),j.properties=C(j,q),j.properties||(j.properties={}),j.properties.category||(j.properties.category="forages"),j.properties.accessLevel||(j.properties.accessLevel="visitor"),j._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=j,window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:j,type:q,properties:j.properties}})),j.on("mouseover",()=>{(!s.value||s.value!==j)&&$(j)}),j.on("mouseout",()=>{var ae;(!s.value||s.value!==j)&&((ae=r.value)==null||ae.clearLayers())}),j instanceof pn.Polygon){const ae=j.getLatLngs()[0],ce=new Tl([ae],{...j.options});ce.updateProperties(),(xe=e.value)==null||xe.removeLayer(j),(be=e.value)==null||be.addLayer(ce),s.value=ce,K(ce)}else if(j instanceof vs)V(j),t.value&&t.value.almostOver&&t.value.almostOver.addLayer(j);else if(j instanceof pn.Polyline&&!(j instanceof pn.Polygon)){const ae=j.getLatLngs(),ce=new vs(ae,{...j.options});ce.updateProperties(),(_e=e.value)==null||_e.removeLayer(j),(Z=e.value)==null||Z.addLayer(ce),s.value=ce,V(ce),t.value&&t.value.almostOver&&t.value.almostOver.addLayer(ce)}Sl("Cliquez sur la forme pour afficher les points de contrle")},oe=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",H))},ie=()=>{if(t.value&&t.value.almostOver){const R=t.value.almostOver.options.tolerance;return t.value.almostOver.options.tolerance=0,()=>{t.value&&t.value.almostOver&&(t.value.almostOver.options.tolerance=R)}}return()=>{}};return window.addEventListener("edit:start",()=>{const R=ie(),j=()=>{R(),window.removeEventListener("edit:end",j)};window.addEventListener("edit:end",j)}),{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:T,setDrawingTool:D,updateShapeStyle:N,updateShapeProperties:U,adjustView:O,clearActiveControlPoints:y,addLinesToAlmostOver:S}}const Vi=Symbol("newer"),Go=Symbol("older");class CU{constructor(e,n){typeof e!="number"&&(n=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,n&&(this.assign(n),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[Vi]&&(e===this.oldest&&(this.oldest=e[Vi]),e[Vi][Go]=e[Go]),e[Go]&&(e[Go][Vi]=e[Vi]),e[Vi]=void 0,e[Go]=this.newest,this.newest&&(this.newest[Vi]=e),this.newest=e)}assign(e){let n,r=this.limit||Number.MAX_VALUE;this._keymap.clear();let i=e[Symbol.iterator]();for(let s=i.next();!s.done;s=i.next()){let o=new T4(s.value[0],s.value[1]);if(this._keymap.set(o.key,o),n?(n[Vi]=o,o[Go]=n):this.oldest=o,n=o,r--==0)throw new Error("overflow")}this.newest=n,this.size=this._keymap.size}get(e){var n=this._keymap.get(e);if(n)return this._markEntryAsUsed(n),n.value}set(e,n){var r=this._keymap.get(e);return r?(r.value=n,this._markEntryAsUsed(r),this):(this._keymap.set(e,r=new T4(e,n)),this.newest?(this.newest[Vi]=r,r[Go]=this.newest):this.oldest=r,this.newest=r,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[Vi]?(this.oldest=this.oldest[Vi],this.oldest[Go]=void 0):(this.oldest=void 0,this.newest=void 0),e[Vi]=e[Go]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let n=this._keymap.get(e);return n?n.value:void 0}has(e){return this._keymap.has(e)}delete(e){var n=this._keymap.get(e);if(n)return this._keymap.delete(n.key),n[Vi]&&n[Go]?(n[Go][Vi]=n[Vi],n[Vi][Go]=n[Go]):n[Vi]?(n[Vi][Go]=void 0,this.oldest=n[Vi]):n[Go]?(n[Go][Vi]=void 0,this.newest=n[Go]):this.oldest=this.newest=void 0,this.size--,n.value}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new n_(this.oldest)}values(){return new r_(this.oldest)}entries(){return this}[Symbol.iterator](){return new t_(this.oldest)}forEach(e,n){typeof n!="object"&&(n=this);let r=this.oldest;for(;r;)e.call(n,r.value,r.key,this),r=r[Vi]}toJSON(){for(var e=new Array(this.size),n=0,r=this.oldest;r;)e[n++]={key:r.key,value:r.value},r=r[Vi];return e}toString(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,n=n[Vi],n&&(e+=" < ");return e}}function T4(t,e){this.key=t,this.value=e,this[Vi]=void 0,this[Go]=void 0}function t_(t){this.entry=t}t_.prototype[Symbol.iterator]=function(){return this};t_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Vi],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}};function n_(t){this.entry=t}n_.prototype[Symbol.iterator]=function(){return this};n_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Vi],{done:!1,value:t.key}):{done:!0,value:void 0}};function r_(t){this.entry=t}r_.prototype[Symbol.iterator]=function(){return this};r_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Vi],{done:!1,value:t.value}):{done:!0,value:void 0}};function SU(t,e){let n=0,r=null;r=setInterval(function(){if(n>=20)throw clearInterval(r),new Error("window.google not found after 10 seconds");window.google&&window.google.maps&&window.google.maps.Map&&(clearInterval(r),t.call(e)),++n},500)}L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{maxZoom:21,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._tileCallbacks={},this._lru=new CU(100),this._imagesPerTile=1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(t){L.GridLayer.prototype.onAdd.call(this,t),this._initMutantContainer(),this._logoContainer&&t._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&t._controlCorners.bottomright.appendChild(this._attributionContainer),SU(()=>{this._map&&(this._initMutant(),google.maps.event.addListenerOnce(this._mutant,"idle",()=>{this._map&&(this._checkZoomLevels(),this._mutantIsReady=!0)}))})},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle")},addGoogleLayer:function(t,e){return this._subLayers||(this._subLayers={}),this.whenReady(()=>{var n=google.maps[t],r=new n(e);r.setMap(this._mutant),this._subLayers[t]=r}),this},removeGoogleLayer:function(t){return this.whenReady(()=>{var e=this._subLayers&&this._subLayers[t];e&&(e.setMap(null),delete this._subLayers[t])}),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.pointerEvents="none",this._mutantContainer.style.visibility="hidden",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);const t=this._mutantContainer.style;this._map.options.zoomSnap<1?(t.width="180%",t.height="180%"):(t.width="100%",t.height="100%"),t.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){if(!this._mutant){var t={center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,styles:this.options.styles||[],backgroundColor:"transparent"};this.options.mapId!=null&&(t.mapId=this.options.mapId);var e=new google.maps.Map(this._mutantContainer,t);this._mutant=e,this._update(),this.fire("spawned",{mapObject:e}),this._waitControls(),this.once("controls_ready",this._setupAttribution)}},_attachObserver:function(e){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(e,{childList:!0,subtree:!0}),Array.prototype.forEach.call(e.querySelectorAll("img"),this._boundOnMutatedImage)},_waitControls:function(){const t=setInterval(()=>{const e=this._mutant.__gm.layoutManager;if(!e)return;clearInterval(t);let n;Object.keys(e).forEach(function(r){const i=e[r];i.get&&i.get(1)instanceof Node&&(n=i)}),this.fire("controls_ready",{positions:n})},50)},_setupAttribution:function(t){if(!this._map)return;const e=google.maps.ControlPosition,n=this._attributionContainer=t.positions.get(e.BOTTOM_RIGHT);L.DomUtil.addClass(n,"leaflet-control leaflet-control-attribution"),L.DomEvent.disableClickPropagation(n),n.style.height="14px",this._map._controlCorners.bottomright.appendChild(n),this._logoContainer=t.positions.get(e.BOTTOM_LEFT),this._logoContainer.style.pointerEvents="auto",this._map._controlCorners.bottomleft.appendChild(this._logoContainer)},_onMutations:function(e){for(var n=0;n<e.length;++n)for(var r=e[n],i=0;i<r.addedNodes.length;++i){var s=r.addedNodes[i];s instanceof HTMLImageElement?this._onMutatedImage(s):s instanceof HTMLElement&&Array.prototype.forEach.call(s.querySelectorAll("img"),this._boundOnMutatedImage)}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+|VinaFnapurmBegrtn)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+|VinaFnapurmBegrtn)/,_onMutatedImage:function(e){let n,r=e.src.match(this._roadRegexp),i=0;if(r?(n={z:r[1],x:r[2],y:r[3]},this._imagesPerTile>1&&(e.style.zIndex=1,i=1)):(r=e.src.match(this._satRegexp),r&&(n={x:r[1],y:r[2],z:r[3]}),i=0),n){var s=this._tileCoordsToKey(n);e.style.position="absolute";var o=s+"/"+i;this._lru.set(o,e),o in this._tileCallbacks&&this._tileCallbacks[o]&&(this._tileCallbacks[o].forEach(a=>a(e)),delete this._tileCallbacks[o])}},createTile:function(t,e){const n=this._tileCoordsToKey(t),r=L.DomUtil.create("div");r.style.textAlign="left",r.dataset.pending=this._imagesPerTile,e=e.bind(this,null,r);for(var i=0;i<this._imagesPerTile;++i){const s=n+"/"+i,o=this._lru.get(s);o?(r.appendChild(this._clone(o)),--r.dataset.pending):(this._tileCallbacks[s]=this._tileCallbacks[s]||[],this._tileCallbacks[s].push((function(a){return(function(l){a.appendChild(this._clone(l)),--a.dataset.pending,parseInt(a.dataset.pending)||e()}).bind(this)}).bind(this)(r)))}return parseInt(r.dataset.pending)||L.Util.requestAnimFrame(e),r},_clone:function(t){const e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){const t=this._map.getZoom(),e=this._mutant.getZoom();!t||!e||(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_update:function(t){if(this._mutant){t=t||this._map.getCenter();const e=new google.maps.LatLng(t.lat,t.lng),n=Math.round(this._map.getZoom()),r=this._mutant.getZoom();this._mutant.setCenter(e),n!==r&&(this._mutant.setZoom(n),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this,t)},whenReady:function(t,e){return this._mutant?t.call(e||this,{target:this}):this.on("spawned",t,e),this}});L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)};let T0=!1,Ef=null;function i_(){return T0?Promise.resolve():Ef||(Ef=new Promise(async(t,e)=>{var n;try{if(window.google&&window.google.maps){T0=!0,t();return}try{const r=await k2.getGoogleMapsApiKey(),i=((n=r==null?void 0:r.data)==null?void 0:n.url)||"https://maps.googleapis.com/maps/api/js?libraries=places",s=document.createElement("script");s.type="text/javascript";const o=new URL(i);o.searchParams.has("loading")||o.searchParams.append("loading","async"),s.src=o.toString(),s.async=!0,s.defer=!0,s.onload=()=>{T0=!0,t()},s.onerror=()=>{Ef=null,e(new Error("Failed to load Google Maps API"))},document.head.appendChild(s)}catch(r){console.warn("Error loading Google Maps API:",r),Ef=null,e(r)}}catch(r){Ef=null,e(r)}}),Ef)}function GS(){return T0||window.google&&window.google.maps}function s_(t,e,n){if(isNaN(t)||isNaN(e))return"#";let r=`https://www.google.com/maps/dir/?api=1&destination=${t},${e}`;return n&&(r+=`&destination_place_id=${encodeURIComponent(n)}`),r}function o_(t,e,n){if(isNaN(t)||isNaN(e))return"#";let r=`https://www.google.com/maps/search/?api=1&query=${t},${e}`;return n&&(r+=`&query_place_id=${encodeURIComponent(n)}`),r}function qS(t,e,n="directions",r){if(isNaN(t)||isNaN(e))return;const i=n==="directions"?s_(t,e,r):o_(t,e,r);window.open(i,"_blank")}const EU={loadGoogleMapsApi:i_,isGoogleMapsLoaded:GS,getGoogleMapsDirectionsUrl:s_,getGoogleMapsSearchUrl:o_,openInGoogleMaps:qS},YS=Object.freeze(Object.defineProperty({__proto__:null,default:EU,getGoogleMapsDirectionsUrl:s_,getGoogleMapsSearchUrl:o_,isGoogleMapsLoaded:GS,loadGoogleMapsApi:i_,openInGoogleMaps:qS},Symbol.toStringTag,{value:"Module"}));function PU(){const t=kt(null),e=kt("Hybride"),n=kt(null),r=kt(!1),i={maxZoom:19,updateWhenZooming:!0,updateWhenIdle:!0,noWrap:!0,keepBuffer:2,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:pn.latLngBounds(pn.latLng(41.333,-5.566),pn.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,useCache:!0,priorityLevels:3},s={Hybride:pn.layerGroup([pn.gridLayer.googleMutant({type:"hybrid",maxZoom:i.maxZoom})]),Cadastre:pn.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...i,attribution:"Cadastre - Carte  IGN/Geoportail",maxNativeZoom:18}),IGN:pn.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...i,attribution:"Carte IGN  IGN/Geoportail",maxNativeZoom:18})},o=async()=>{try{await i_(),r.value=!0}catch(f){console.error("Failed to load Google Maps API:",f),r.value=!1,e.value==="Hybride"&&(e.value="IGN")}};return{map:t,currentBaseMap:e,baseMaps:s,initMap:async f=>{r.value||await o(),t.value=f,f.options.zoomSnap=.5,f.options.zoomDelta=.5,f.options.wheelPxPerZoomLevel=120,f.options.zoomAnimation=!0,f.options.fadeAnimation=!0,f.options.markerZoomAnimation=!0,f.options.preferCanvas=!0,f.options.renderer=pn.canvas(),f.options.minZoom=2,f.options.maxZoom=19,f.options.scrollWheelZoom=!0,f.options.doubleClickZoom=!0;const p=pn.latLngBounds(pn.latLng(-90,-180),pn.latLng(90,180));f.setMaxBounds(p),f.options.maxBoundsViscosity=1,f.options.trackResize=!0;let y=null;f.getZoom(),f.on("zoomstart",()=>{f.getZoom(),f.options.zoomAnimation=!1,f.options.markerZoomAnimation=!1}),f.on("zoomend",()=>{y&&clearTimeout(y),y=setTimeout(()=>{setTimeout(()=>{f.options.zoomAnimation=!0,f.options.markerZoomAnimation=!0,f.invalidateSize({animate:!1,pan:!1});const C=f.getBounds(),S=f.options.maxBounds;S&&!C.intersects(S)&&f.panInsideBounds(S,{animate:!1}),f.eachLayer(T=>{T.properties&&T.properties.type==="Note"&&typeof T.updatePosition=="function"&&T.updatePosition()})},250)},250)});const m=f._zoomAnimation;m&&(f._zoomAnimation=function(C){try{this._animatingZoom||m.call(this,C)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),f.on("zoomanim",C=>{f.eachLayer(S=>{S.properties&&S.properties.type==="Note"&&typeof S.updatePositionDuringZoom=="function"&&S.updatePositionDuringZoom(C)})}),f&&(f.whenReady(()=>{const C=e.value;if(s[C]){if(n.value&&f.hasLayer(n.value))try{f.removeLayer(n.value)}catch(S){console.warn("Erreur lors de la suppression de la couche active prcdente:",S)}n.value=s[C];try{n.value.addTo(f)}catch(S){console.error(`Erreur lors de l'ajout de la couche ${C}:`,S)}}else console.warn(`Couche de base non disponible: ${C}`)}),f.on("baselayerchange",C=>{e.value=C.name,n.value=C.layer}))},changeBaseMap:async f=>{if(f==="Hybride"&&!r.value&&(await o(),!r.value)){console.warn("Cannot switch to Hybride: Google Maps API not loaded");return}if(!t.value||!s[f]){console.warn(`Impossible de changer la carte de base: ${t.value?"type de carte non disponible":"carte non initialise"}`);return}try{if(e.value===f)return;const p=t.value,y=p.getCenter(),m=p.getZoom();p.options.zoomAnimation=!1,p.options.fadeAnimation=!1,p.options.markerZoomAnimation=!1;const C=s[f];if(n.value&&p.hasLayer(n.value))try{p.removeLayer(n.value)}catch(S){console.warn("Erreur lors de la suppression de la couche active:",S)}try{C instanceof pn.LayerGroup,C.addTo(p)}catch(S){console.error("Erreur lors de l'ajout de la nouvelle couche:",S);try{p.hasLayer(C)&&p.removeLayer(C),C.addTo(p)}catch(T){throw console.error("chec de la rcupration:",T),new Error("Impossible d'ajouter la nouvelle couche")}}n.value=C,e.value=f;try{p.setView(y,m,{animate:!1,duration:0,noMoveStart:!0})}catch(S){console.warn("Erreur lors de la rinitialisation de la vue:",S)}try{p.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{p.eachLayer(S=>{S.properties&&S.properties.type==="Note"&&typeof S.updatePosition=="function"&&S.updatePosition()})},100)}catch(S){console.warn("Erreur lors du rafrachissement de la carte:",S)}setTimeout(()=>{p.options.zoomAnimation=!0,p.options.fadeAnimation=!0,p.options.markerZoomAnimation=!0},500)}catch(p){if(console.error("Erreur lors du changement de carte de base:",p),t.value)try{const y=t.value;y.eachLayer(C=>{(C instanceof pn.TileLayer||C instanceof pn.LayerGroup)&&y.removeLayer(C)});const m=s[f];m.addTo(y),n.value=m,e.value=f,y.options.zoomAnimation=!0,y.options.fadeAnimation=!0,y.options.markerZoomAnimation=!0,y.invalidateSize({animate:!1,pan:!1})}catch(y){console.error("Erreur lors de la rcupration aprs chec:",y)}}},cleanup:()=>{t.value&&(t.value.remove(),t.value=null),n.value&&(n.value=null)},isGoogleMapsLoaded:r}}const kU={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},MU={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},AU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},TU={key:0,class:"mb-4"},OU={key:0,class:"animate-pulse"},DU=["value"],IU={key:1,class:"mb-4"},NU={key:0,class:"animate-pulse"},BU=["disabled"],RU={value:null},FU=["value"],jU={key:2,class:"mb-4"},zU={key:0,class:"animate-pulse"},UU=["disabled"],$U={value:null},VU=["value"],HU={class:"mb-4"},WU={class:"mb-6"},GU={class:"flex justify-end space-x-3"},qU=["disabled"],YU={key:0},ZU={key:1},KU=_s({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(oe){return oe?typeof oe=="object"?oe.id:oe:null}function i(oe){if(oe===null)throw new Error("Invalid ID");return oe}const s=t,o=n,a=po(),l=Qb(),c=qg(),f=kt(!1),p=kt(null),y=kt([]),m=kt([]),C=kt([]),S=kt(null),T=kt(null),O=kt(!1),D=kt(!1),N=kt(!1),U=kt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),G=tr(()=>{var oe,ie,R;return((oe=a.user)==null?void 0:oe.user_type)==="admin"?U.value.nom.trim()&&U.value.entreprise&&U.value.salarie:((ie=a.user)==null?void 0:ie.user_type)==="entreprise"?U.value.nom.trim()&&U.value.salarie:(((R=a.user)==null?void 0:R.user_type)==="salarie",U.value.nom.trim())});yi(()=>U.value.entreprise,async oe=>{if(!s.modelValue)return;U.value.salarie=null,U.value.visiteur=null,m.value=[];const ie=r(oe);ie?await J(ie):y.value=[]}),yi(()=>U.value.salarie,async oe=>{if(!s.modelValue)return;U.value.visiteur=null;const ie=r(oe);ie?await ee(ie):m.value=[]}),yi(()=>s.modelValue,oe=>{var ie,R,j;oe?((ie=a.user)==null?void 0:ie.user_type)==="admin"?$():((R=a.user)==null?void 0:R.user_type)==="entreprise"?J(a.user.id):((j=a.user)==null?void 0:j.user_type)==="salarie"&&ee(a.user.id):(U.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},S.value=null,T.value=null,m.value=[],y.value=[],C.value=[],p.value=null)});async function J(oe){O.value=!0;try{const ie=await ca.getUsers({role:"SALARIE",entreprise:oe});y.value=ie.data}catch(ie){console.error("[NewPlanModal] Error loading salaries:",ie),y.value=[]}finally{O.value=!1}}async function ee(oe){D.value=!0;try{const ie=await ca.getUsers({role:"VISITEUR",salarie:oe});m.value=ie.data}catch(ie){console.error("[NewPlanModal] Error loading visiteurs:",ie),m.value=[]}finally{D.value=!1}}async function V(oe){s.modelValue&&(S.value=oe,U.value.salarie=oe.id,await ee(oe.id),o("salarieSelected",oe))}function K(oe){s.modelValue&&(T.value=oe,U.value.visiteur=oe.id,o("visiteurSelected",oe))}function pe(){o("update:modelValue",!1),U.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},S.value=null,T.value=null,m.value=[],p.value=null}async function $(){N.value=!0;try{const oe=await a.fetchEnterprises();C.value=oe}catch(oe){console.error("[NewPlanModal] Error loading entreprises:",oe),C.value=[]}finally{N.value=!1}}async function H(){var oe,ie;p.value=null,f.value=!0;try{const R={nom:U.value.nom.trim(),description:U.value.description.trim()},j=a.user;if(!j)throw new Error("User not found");if(j.user_type==="admin"){if(!U.value.entreprise||!U.value.salarie)throw new Error("Missing required fields");R.entreprise=i(r(U.value.entreprise)),R.salarie=i(r(U.value.salarie)),U.value.visiteur&&(R.visiteur=U.value.visiteur)}else if(j.user_type==="entreprise"){if(!U.value.salarie)throw new Error("Missing required fields");R.entreprise=j.id,R.salarie=i(r(U.value.salarie)),U.value.visiteur&&(R.visiteur=U.value.visiteur)}else if(j.user_type==="salarie"){if(!j.entreprise)throw new Error("Missing required fields");R.entreprise=j.entreprise.id,R.salarie=j.id,U.value.visiteur&&(R.visiteur=U.value.visiteur)}else if(j.user_type==="visiteur"){if(!j.entreprise||!j.salarie)throw new Error("Missing required fields");R.entreprise=j.entreprise.id,R.salarie=j.salarie.id,R.visiteur=j.id}l.clearCurrentPlan(),c.setCurrentPlan(null);const q=await l.createPlan(R);o("created",q.id),pe()}catch(R){console.error("[NewPlanModal] Error creating plan:",R),console.error("Response data:",(oe=R.response)==null?void 0:oe.data);let j="Une erreur est survenue lors de la cration du plan";(ie=R.response)!=null&&ie.data&&(typeof R.response.data=="object"?j=Object.entries(R.response.data).map(([q,re])=>Array.isArray(re)?`${q}: ${re.join(", ")}`:`${q}: ${re}`).join(`
`):typeof R.response.data=="string"&&(j=R.response.data)),p.value=j}finally{f.value=!1}}return e({salaries:y,visiteurs:m,selectedSalarie:S,selectedVisiteur:T,loadSalaries:J,loadVisiteurs:ee,selectSalarie:V,selectVisiteur:K}),(oe,ie)=>{var R,j,q,re;return oe.modelValue?(Ie(),je("div",kU,[P("div",MU,[P("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[ie[6]||(ie[6]=P("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),P("button",{onClick:pe,class:"text-gray-400 hover:text-gray-500"},ie[5]||(ie[5]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",AU,[cn(a).isAdmin?(Ie(),je("div",TU,[ie[9]||(ie[9]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),N.value?(Ie(),je("div",OU,ie[7]||(ie[7]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):jn((Ie(),je("select",{key:1,"onUpdate:modelValue":ie[0]||(ie[0]=xe=>U.value.entreprise=xe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[ie[8]||(ie[8]=P("option",{value:null},"Slectionnez une entreprise",-1)),(Ie(!0),je(bn,null,sr(C.value,xe=>(Ie(),je("option",{key:xe.id,value:xe.id},Ut(cn(Is)(xe)),9,DU))),128))],512)),[[os,U.value.entreprise]])])):Kt("",!0),((R=cn(a).user)==null?void 0:R.user_type)==="admin"||((j=cn(a).user)==null?void 0:j.user_type)==="entreprise"?(Ie(),je("div",IU,[ie[11]||(ie[11]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),O.value?(Ie(),je("div",NU,ie[10]||(ie[10]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):jn((Ie(),je("select",{key:1,id:"edit-salarie","onUpdate:modelValue":ie[1]||(ie[1]=xe=>U.value.salarie=xe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:cn(a).isAdmin&&!U.value.entreprise},[P("option",RU,Ut(y.value.length?"Slectionnez un salarie":"Aucun salarie disponible"),1),(Ie(!0),je(bn,null,sr(y.value,xe=>(Ie(),je("option",{key:xe.id,value:xe.id},Ut(cn(Is)(xe)),9,FU))),128))],8,BU)),[[os,U.value.salarie]])])):Kt("",!0),((q=cn(a).user)==null?void 0:q.user_type)!=="visiteur"?(Ie(),je("div",jU,[ie[13]||(ie[13]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),D.value?(Ie(),je("div",zU,ie[12]||(ie[12]=[P("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):jn((Ie(),je("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":ie[2]||(ie[2]=xe=>U.value.visiteur=xe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!m.value.length||((re=cn(a).user)==null?void 0:re.user_type)!=="salarie"&&!U.value.salarie},[P("option",$U,Ut(m.value.length?"Slectionnez un visiteur":"Aucun visiteur disponible"),1),(Ie(!0),je(bn,null,sr(m.value,xe=>(Ie(),je("option",{key:xe.id,value:xe.id},Ut(cn(Is)(xe)),9,VU))),128))],8,UU)),[[os,U.value.visiteur]])])):Kt("",!0),P("div",HU,[ie[14]||(ie[14]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),jn(P("input",{id:"edit-nom","onUpdate:modelValue":ie[3]||(ie[3]=xe=>U.value.nom=xe),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[di,U.value.nom]])]),P("div",WU,[ie[15]||(ie[15]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),jn(P("textarea",{id:"edit-description","onUpdate:modelValue":ie[4]||(ie[4]=xe=>U.value.description=xe),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[di,U.value.description]])]),P("div",GU,[P("button",{onClick:pe,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),P("button",{onClick:H,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!G.value||f.value},[f.value?(Ie(),je("span",YU,"Cration en cours...")):(Ie(),je("span",ZU,"Crer"))],8,qU)])])])])):Kt("",!0)}}});function Ni(t){"@babel/helpers - typeof";return Ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ni(t)}var Ba=Uint8Array,su=Uint16Array,a_=Int32Array,cy=new Ba([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hy=new Ba([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),N2=new Ba([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ZS=function(t,e){for(var n=new su(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new a_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},KS=ZS(cy,2),XS=KS.b,B2=KS.r;XS[28]=258,B2[258]=28;var JS=ZS(hy,0),XU=JS.b,O4=JS.r,R2=new su(32768);for(var ss=0;ss<32768;++ss){var Ih=(ss&43690)>>1|(ss&21845)<<1;Ih=(Ih&52428)>>2|(Ih&13107)<<2,Ih=(Ih&61680)>>4|(Ih&3855)<<4,R2[ss]=((Ih&65280)>>8|(Ih&255)<<8)>>1}var Rc=function(t,e,n){for(var r=t.length,i=0,s=new su(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new su(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new su(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],f=e-t[i],p=o[t[i]-1]++<<f,y=p|(1<<f)-1;p<=y;++p)a[R2[p]>>l]=c}else for(a=new su(r),i=0;i<r;++i)t[i]&&(a[i]=R2[o[t[i]-1]++]>>15-t[i]);return a},of=new Ba(288);for(var ss=0;ss<144;++ss)of[ss]=8;for(var ss=144;ss<256;++ss)of[ss]=9;for(var ss=256;ss<280;++ss)of[ss]=7;for(var ss=280;ss<288;++ss)of[ss]=8;var Yg=new Ba(32);for(var ss=0;ss<32;++ss)Yg[ss]=5;var JU=Rc(of,9,0),QU=Rc(of,9,1),e$=Rc(Yg,5,0),t$=Rc(Yg,5,1),_1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Ku=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},w1=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},l_=function(t){return(t+7)/8|0},QS=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Ba(t.subarray(e,n))},n$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ec=function(t,e,n){var r=new Error(e||n$[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,ec),!n)throw r;return r},r$=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Ba(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Ba(i*3));var c=function(gt){var _t=n.length;if(gt>_t){var le=new Ba(Math.max(_t*2,gt));le.set(n),n=le}},f=e.f||0,p=e.p||0,y=e.b||0,m=e.l,C=e.d,S=e.m,T=e.n,O=i*8;do{if(!m){f=Ku(t,p,1);var D=Ku(t,p+1,3);if(p+=3,D)if(D==1)m=QU,C=t$,S=9,T=5;else if(D==2){var J=Ku(t,p,31)+257,ee=Ku(t,p+10,15)+4,V=J+Ku(t,p+5,31)+1;p+=14;for(var K=new Ba(V),pe=new Ba(19),$=0;$<ee;++$)pe[N2[$]]=Ku(t,p+$*3,7);p+=ee*3;for(var H=_1(pe),oe=(1<<H)-1,ie=Rc(pe,H,1),$=0;$<V;){var R=ie[Ku(t,p,oe)];p+=R&15;var N=R>>4;if(N<16)K[$++]=N;else{var j=0,q=0;for(N==16?(q=3+Ku(t,p,3),p+=2,j=K[$-1]):N==17?(q=3+Ku(t,p,7),p+=3):N==18&&(q=11+Ku(t,p,127),p+=7);q--;)K[$++]=j}}var re=K.subarray(0,J),xe=K.subarray(J);S=_1(re),T=_1(xe),m=Rc(re,S,1),C=Rc(xe,T,1)}else ec(1);else{var N=l_(p)+4,U=t[N-4]|t[N-3]<<8,G=N+U;if(G>i){l&&ec(0);break}a&&c(y+U),n.set(t.subarray(N,G),y),e.b=y+=U,e.p=p=G*8,e.f=f;continue}if(p>O){l&&ec(0);break}}a&&c(y+131072);for(var be=(1<<S)-1,_e=(1<<T)-1,Z=p;;Z=p){var j=m[w1(t,p)&be],ae=j>>4;if(p+=j&15,p>O){l&&ec(0);break}if(j||ec(2),ae<256)n[y++]=ae;else if(ae==256){Z=p,m=null;break}else{var ce=ae-254;if(ae>264){var $=ae-257,de=cy[$];ce=Ku(t,p,(1<<de)-1)+XS[$],p+=de}var ge=C[w1(t,p)&_e],Ee=ge>>4;ge||ec(3),p+=ge&15;var xe=XU[Ee];if(Ee>3){var de=hy[Ee];xe+=w1(t,p)&(1<<de)-1,p+=de}if(p>O){l&&ec(0);break}a&&c(y+131072);var Ue=y+ce;if(y<xe){var Ne=s-xe,rt=Math.min(xe,Ue);for(Ne+y<0&&ec(3);y<rt;++y)n[y]=r[Ne+y]}for(;y<Ue;++y)n[y]=n[y-xe]}}e.l=m,e.p=Z,e.b=y,e.f=f,m&&(f=1,e.m=S,e.d=C,e.n=T)}while(!f);return y!=n.length&&o?QS(n,0,y):n.subarray(0,y)},oh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Ip=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},x1=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:tE,l:0};if(i==1){var o=new Ba(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(G,J){return G.f-J.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,f=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};f!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=f&&n[c].f<n[p].f?c++:p++],n[f++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=s[0].s,r=1;r<i;++r)s[r].s>y&&(y=s[r].s);var m=new su(y+1),C=F2(n[f-1],m,0);if(C>e){var r=0,S=0,T=C-e,O=1<<T;for(s.sort(function(J,ee){return m[ee.s]-m[J.s]||J.f-ee.f});r<i;++r){var D=s[r].s;if(m[D]>e)S+=O-(1<<C-m[D]),m[D]=e;else break}for(S>>=T;S>0;){var N=s[r].s;m[N]<e?S-=1<<e-m[N]++-1:++r}for(;r>=0&&S;--r){var U=s[r].s;m[U]==e&&(--m[U],++S)}C=e}return{t:new Ba(m),l:C}},F2=function(t,e,n){return t.s==-1?Math.max(F2(t.l,e,n+1),F2(t.r,e,n+1)):e[t.s]=n},D4=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new su(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Np=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},eE=function(t,e,n){var r=n.length,i=l_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},I4=function(t,e,n,r,i,s,o,a,l,c,f){oh(e,f++,n),++i[256];for(var p=x1(i,15),y=p.t,m=p.l,C=x1(s,15),S=C.t,T=C.l,O=D4(y),D=O.c,N=O.n,U=D4(S),G=U.c,J=U.n,ee=new su(19),V=0;V<D.length;++V)++ee[D[V]&31];for(var V=0;V<G.length;++V)++ee[G[V]&31];for(var K=x1(ee,7),pe=K.t,$=K.l,H=19;H>4&&!pe[N2[H-1]];--H);var oe=c+5<<3,ie=Np(i,of)+Np(s,Yg)+o,R=Np(i,y)+Np(s,S)+o+14+3*H+Np(ee,pe)+2*ee[16]+3*ee[17]+7*ee[18];if(l>=0&&oe<=ie&&oe<=R)return eE(e,f,t.subarray(l,l+c));var j,q,re,xe;if(oh(e,f,1+(R<ie)),f+=2,R<ie){j=Rc(y,m,0),q=y,re=Rc(S,T,0),xe=S;var be=Rc(pe,$,0);oh(e,f,N-257),oh(e,f+5,J-1),oh(e,f+10,H-4),f+=14;for(var V=0;V<H;++V)oh(e,f+3*V,pe[N2[V]]);f+=3*H;for(var _e=[D,G],Z=0;Z<2;++Z)for(var ae=_e[Z],V=0;V<ae.length;++V){var ce=ae[V]&31;oh(e,f,be[ce]),f+=pe[ce],ce>15&&(oh(e,f,ae[V]>>5&127),f+=ae[V]>>12)}}else j=JU,q=of,re=e$,xe=Yg;for(var V=0;V<a;++V){var de=r[V];if(de>255){var ce=de>>18&31;Ip(e,f,j[ce+257]),f+=q[ce+257],ce>7&&(oh(e,f,de>>23&31),f+=cy[ce]);var ge=de&31;Ip(e,f,re[ge]),f+=xe[ge],ge>3&&(Ip(e,f,de>>5&8191),f+=hy[ge])}else Ip(e,f,j[de]),f+=q[de]}return Ip(e,f,j[256]),f+q[256]},i$=new a_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),tE=new Ba(0),s$=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Ba(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,f=(s.r||0)&7;if(e){f&&(l[0]=s.r>>3);for(var p=i$[e-1],y=p>>13,m=p&8191,C=(1<<n)-1,S=s.p||new su(32768),T=s.h||new su(C+1),O=Math.ceil(n/3),D=2*O,N=function(se){return(t[se]^t[se+1]<<O^t[se+2]<<D)&C},U=new a_(25e3),G=new su(288),J=new su(32),ee=0,V=0,K=s.i||0,pe=0,$=s.w||0,H=0;K+2<o;++K){var oe=N(K),ie=K&32767,R=T[oe];if(S[ie]=R,T[oe]=ie,$<=K){var j=o-K;if((ee>7e3||pe>24576)&&(j>423||!c)){f=I4(t,l,0,U,G,J,V,pe,H,K-H,f),pe=ee=V=0,H=K;for(var q=0;q<286;++q)G[q]=0;for(var q=0;q<30;++q)J[q]=0}var re=2,xe=0,be=m,_e=ie-R&32767;if(j>2&&oe==N(K-_e))for(var Z=Math.min(y,j)-1,ae=Math.min(32767,K),ce=Math.min(258,j);_e<=ae&&--be&&ie!=R;){if(t[K+re]==t[K+re-_e]){for(var de=0;de<ce&&t[K+de]==t[K+de-_e];++de);if(de>re){if(re=de,xe=_e,de>Z)break;for(var ge=Math.min(_e,de-2),Ee=0,q=0;q<ge;++q){var Ue=K-_e+q&32767,Ne=S[Ue],rt=Ue-Ne&32767;rt>Ee&&(Ee=rt,R=Ue)}}}ie=R,R=S[ie],_e+=ie-R&32767}if(xe){U[pe++]=268435456|B2[re]<<18|O4[xe];var gt=B2[re]&31,_t=O4[xe]&31;V+=cy[gt]+hy[_t],++G[257+gt],++J[_t],$=K+re,++ee}else U[pe++]=t[K],++G[t[K]]}}for(K=Math.max(K,$);K<o;++K)U[pe++]=t[K],++G[t[K]];f=I4(t,l,c,U,G,J,V,pe,H,K-H,f),c||(s.r=f&7|l[f/8|0]<<3,f-=7,s.h=T,s.p=S,s.i=K,s.w=$)}else{for(var K=s.w||0;K<o+c;K+=65535){var le=K+65535;le>=o&&(l[f/8|0]=c,le=o),f=eE(l,f+1,t.subarray(K,le))}s.i=o}return QS(a,0,r+l_(f)+i)},nE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},o$=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Ba(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return s$(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},rE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},a$=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=nE();i.p(e.dictionary),rE(t,2,i.d())}},l$=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ec(6,"invalid zlib data"),(t[1]>>5&1)==1&&ec(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function j2(t,e){e||(e={});var n=nE();n.p(t);var r=o$(t,e,e.dictionary?6:2,4);return a$(r,e),rE(r,r.length-4,n.d()),r}function u$(t,e){return r$(t.subarray(l$(t),-4),{i:2},e,e)}var c$=typeof TextDecoder<"u"&&new TextDecoder,h$=0;try{c$.decode(tE,{stream:!0}),h$=1}catch{}var xr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function L1(){xr.console&&typeof xr.console.log=="function"&&xr.console.log.apply(xr.console,arguments)}var Hi={log:L1,warn:function(t){xr.console&&(typeof xr.console.warn=="function"?xr.console.warn.apply(xr.console,arguments):L1.call(null,arguments))},error:function(t){xr.console&&(typeof xr.console.error=="function"?xr.console.error.apply(xr.console,arguments):L1(t))}};function C1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Df(r.response,e,n)},r.onerror=function(){Hi.error("could not download file")},r.send()}function N4(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Xm(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var bg,z2,Df=xr.saveAs||((typeof window>"u"?"undefined":Ni(window))!=="object"||window!==xr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=xr.URL||xr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?N4(i.href)?C1(t,e,n):Xm(i,i.target="_blank"):Xm(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Xm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(N4(t))C1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Xm(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Ni(s)!=="object"&&(Hi.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return C1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(xr.HTMLElement)||xr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Ni(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var f=a.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},a.readAsDataURL(t)}else{var l=xr.URL||xr.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function iE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function S1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Pa(n,r,i,s,e[0],7,-680876936),s=Pa(s,n,r,i,e[1],12,-389564586),i=Pa(i,s,n,r,e[2],17,606105819),r=Pa(r,i,s,n,e[3],22,-1044525330),n=Pa(n,r,i,s,e[4],7,-176418897),s=Pa(s,n,r,i,e[5],12,1200080426),i=Pa(i,s,n,r,e[6],17,-1473231341),r=Pa(r,i,s,n,e[7],22,-45705983),n=Pa(n,r,i,s,e[8],7,1770035416),s=Pa(s,n,r,i,e[9],12,-1958414417),i=Pa(i,s,n,r,e[10],17,-42063),r=Pa(r,i,s,n,e[11],22,-1990404162),n=Pa(n,r,i,s,e[12],7,1804603682),s=Pa(s,n,r,i,e[13],12,-40341101),i=Pa(i,s,n,r,e[14],17,-1502002290),n=ka(n,r=Pa(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ka(s,n,r,i,e[6],9,-1069501632),i=ka(i,s,n,r,e[11],14,643717713),r=ka(r,i,s,n,e[0],20,-373897302),n=ka(n,r,i,s,e[5],5,-701558691),s=ka(s,n,r,i,e[10],9,38016083),i=ka(i,s,n,r,e[15],14,-660478335),r=ka(r,i,s,n,e[4],20,-405537848),n=ka(n,r,i,s,e[9],5,568446438),s=ka(s,n,r,i,e[14],9,-1019803690),i=ka(i,s,n,r,e[3],14,-187363961),r=ka(r,i,s,n,e[8],20,1163531501),n=ka(n,r,i,s,e[13],5,-1444681467),s=ka(s,n,r,i,e[2],9,-51403784),i=ka(i,s,n,r,e[7],14,1735328473),n=Ma(n,r=ka(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Ma(s,n,r,i,e[8],11,-2022574463),i=Ma(i,s,n,r,e[11],16,1839030562),r=Ma(r,i,s,n,e[14],23,-35309556),n=Ma(n,r,i,s,e[1],4,-1530992060),s=Ma(s,n,r,i,e[4],11,1272893353),i=Ma(i,s,n,r,e[7],16,-155497632),r=Ma(r,i,s,n,e[10],23,-1094730640),n=Ma(n,r,i,s,e[13],4,681279174),s=Ma(s,n,r,i,e[0],11,-358537222),i=Ma(i,s,n,r,e[3],16,-722521979),r=Ma(r,i,s,n,e[6],23,76029189),n=Ma(n,r,i,s,e[9],4,-640364487),s=Ma(s,n,r,i,e[12],11,-421815835),i=Ma(i,s,n,r,e[15],16,530742520),n=Aa(n,r=Ma(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Aa(s,n,r,i,e[7],10,1126891415),i=Aa(i,s,n,r,e[14],15,-1416354905),r=Aa(r,i,s,n,e[5],21,-57434055),n=Aa(n,r,i,s,e[12],6,1700485571),s=Aa(s,n,r,i,e[3],10,-1894986606),i=Aa(i,s,n,r,e[10],15,-1051523),r=Aa(r,i,s,n,e[1],21,-2054922799),n=Aa(n,r,i,s,e[8],6,1873313359),s=Aa(s,n,r,i,e[15],10,-30611744),i=Aa(i,s,n,r,e[6],15,-1560198380),r=Aa(r,i,s,n,e[13],21,1309151649),n=Aa(n,r,i,s,e[4],6,-145523070),s=Aa(s,n,r,i,e[11],10,-1120210379),i=Aa(i,s,n,r,e[2],15,718787259),r=Aa(r,i,s,n,e[9],21,-343485551),t[0]=qh(n,t[0]),t[1]=qh(r,t[1]),t[2]=qh(i,t[2]),t[3]=qh(s,t[3])}function fy(t,e,n,r,i,s){return e=qh(qh(e,t),qh(r,s)),qh(e<<i|e>>>32-i,n)}function Pa(t,e,n,r,i,s,o){return fy(e&n|~e&r,t,e,i,s,o)}function ka(t,e,n,r,i,s,o){return fy(e&r|n&~r,t,e,i,s,o)}function Ma(t,e,n,r,i,s,o){return fy(e^n^r,t,e,i,s,o)}function Aa(t,e,n,r,i,s,o){return fy(n^(e|~r),t,e,i,s,o)}function sE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)S1(r,f$(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(S1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,S1(r,i),r}function f$(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}bg=xr.atob.bind(xr),z2=xr.btoa.bind(xr);var B4="0123456789abcdef".split("");function d$(t){for(var e="",n=0;n<4;n++)e+=B4[t>>8*n+4&15]+B4[t>>8*n&15];return e}function p$(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function U2(t){return sE(t).map(p$).join("")}var g$=function(t){for(var e=0;e<t.length;e++)t[e]=d$(t[e]);return t.join("")}(sE("hello"))!="5d41402abc4b2a76b9719d911017c592";function qh(t,e){if(g$){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function $2(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var f=a[l];c=(c+f+o.charCodeAt(l))%256,a[l]=a[c],a[c]=f}n=t,r=a}else a=r;var p=e.length,y=0,m=0,C="";for(l=0;l<p;l++)m=(m+(f=a[y=(y+1)%256]))%256,a[y]=a[m],a[m]=f,o=a[(a[y]+a[m])%256],C+=String.fromCharCode(e.charCodeAt(l)^o);return C}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var R4={print:4,modify:8,copy:16,"annot-forms":32};function zd(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(R4.perm!==void 0)throw new Error("Invalid permission: "+a);i+=R4[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=U2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=$2(this.encryptionKey,this.padding)}function Ud(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function F4(t){if(Ni(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){xr.console&&Hi.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function gv(t){if(!(this instanceof gv))return new gv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function oE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Ff(t,e,n,r,i){if(!(this instanceof Ff))return new Ff(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,oE.call(this,r,i)}function Hd(t,e,n,r,i){if(!(this instanceof Hd))return new Hd(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,oE.call(this,r,i)}function wr(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",f=null;Ni(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,y={},m={internal:{},__private__:{}};m.__private__.PubSub=F4;var C="1.3",S=m.__private__.getPdfVersion=function(){return C};m.__private__.setPdfVersion=function(I){C=I};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return T};var O=m.__private__.getPageFormat=function(I){return T[I]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},N=D.COMPAT;function U(){this.saveGraphicsState(),Q(new Lt(Qe,0,0,-Qe,0,ma()*Qe).toString()+" cm"),this.setFontSize(this.getFontSize()/Qe),c="n",N=D.ADVANCED}function G(){this.restoreGraphicsState(),c="S",N=D.COMPAT}var J=m.__private__.combineFontStyleAndFontWeight=function(I,me){if(I=="bold"&&me=="normal"||I=="bold"&&me==400||I=="normal"&&me=="italic"||I=="bold"&&me=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return me&&(I=me==400||me==="normal"?I==="italic"?"italic":"normal":me!=700&&me!=="bold"||I!=="normal"?(me==700?"bold":me)+""+I:"bold"),I};m.advancedAPI=function(I){var me=N===D.COMPAT;return me&&U.call(this),typeof I!="function"||(I(this),me&&G.call(this)),this},m.compatAPI=function(I){var me=N===D.ADVANCED;return me&&G.call(this),typeof I!="function"||(I(this),me&&U.call(this)),this},m.isAdvancedAPI=function(){return N===D.ADVANCED};var ee,V=function(I){if(N!==D.ADVANCED)throw new Error(I+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},K=m.roundToPrecision=m.__private__.roundToPrecision=function(I,me){var He=e||me;if(isNaN(I)||isNaN(He))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return I.toFixed(He).replace(/0+$/,"")};ee=m.hpf=m.__private__.hpf=typeof l=="number"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return K(I,l)}:l==="smart"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return K(I,I>-1&&I<1?16:5)}:function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return K(I,16)};var pe=m.f2=m.__private__.f2=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f2");return K(I,2)},$=m.__private__.f3=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f3");return K(I,3)},H=m.scale=m.__private__.scale=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.scale");return N===D.COMPAT?I*Qe:N===D.ADVANCED?I:void 0},oe=function(I){return N===D.COMPAT?ma()-I:N===D.ADVANCED?I:void 0},ie=function(I){return H(oe(I))};m.__private__.setPrecision=m.setPrecision=function(I){typeof parseInt(I,10)=="number"&&(e=parseInt(I,10))};var R,j="00000000000000000000000000000000",q=m.__private__.getFileId=function(){return j},re=m.__private__.setFileId=function(I){return j=I!==void 0&&/^[a-fA-F0-9]{32}$/.test(I)?I.toUpperCase():j.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(rs=new zd(f.userPermissions,f.userPassword,f.ownerPassword,j)),j};m.setFileId=function(I){return re(I),this},m.getFileId=function(){return q()};var xe=m.__private__.convertDateToPDFDate=function(I){var me=I.getTimezoneOffset(),He=me<0?"+":"-",ot=Math.floor(Math.abs(me/60)),xt=Math.abs(me%60),Nt=[He,ce(ot),"'",ce(xt),"'"].join("");return["D:",I.getFullYear(),ce(I.getMonth()+1),ce(I.getDate()),ce(I.getHours()),ce(I.getMinutes()),ce(I.getSeconds()),Nt].join("")},be=m.__private__.convertPDFDateToDate=function(I){var me=parseInt(I.substr(2,4),10),He=parseInt(I.substr(6,2),10)-1,ot=parseInt(I.substr(8,2),10),xt=parseInt(I.substr(10,2),10),Nt=parseInt(I.substr(12,2),10),an=parseInt(I.substr(14,2),10);return new Date(me,He,ot,xt,Nt,an,0)},_e=m.__private__.setCreationDate=function(I){var me;if(I===void 0&&(I=new Date),I instanceof Date)me=xe(I);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(I))throw new Error("Invalid argument passed to jsPDF.setCreationDate");me=I}return R=me},Z=m.__private__.getCreationDate=function(I){var me=R;return I==="jsDate"&&(me=be(R)),me};m.setCreationDate=function(I){return _e(I),this},m.getCreationDate=function(I){return Z(I)};var ae,ce=m.__private__.padd2=function(I){return("0"+parseInt(I)).slice(-2)},de=m.__private__.padd2Hex=function(I){return("00"+(I=I.toString())).substr(I.length)},ge=0,Ee=[],Ue=[],Ne=0,rt=[],gt=[],_t=!1,le=Ue,se=function(){ge=0,Ne=0,Ue=[],Ee=[],rt=[],An=Ze(),Qn=Ze()};m.__private__.setCustomOutputDestination=function(I){_t=!0,le=I};var ue=function(I){_t||(le=I)};m.__private__.resetCustomOutputDestination=function(){_t=!1,le=Ue};var Q=m.__private__.out=function(I){return I=I.toString(),Ne+=I.length+1,le.push(I),le},ke=m.__private__.write=function(I){return Q(arguments.length===1?I.toString():Array.prototype.join.call(arguments," "))},Ve=m.__private__.getArrayBuffer=function(I){for(var me=I.length,He=new ArrayBuffer(me),ot=new Uint8Array(He);me--;)ot[me]=I.charCodeAt(me);return He},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Xe};var lt=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(I){return lt=N===D.ADVANCED?I/Qe:I,this};var at,pt=m.__private__.getFontSize=m.getFontSize=function(){return N===D.COMPAT?lt:lt*Qe},jt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(I){return jt=I,this},m.__private__.getR2L=m.getR2L=function(){return jt};var Bt,qt=m.__private__.setZoomMode=function(I){var me=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(I))at=I;else if(isNaN(I)){if(me.indexOf(I)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+I+'" is not recognized.');at=I}else at=parseInt(I,10)};m.__private__.getZoomMode=function(){return at};var Jt,gn=m.__private__.setPageMode=function(I){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(I)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+I+'" is not recognized.');Bt=I};m.__private__.getPageMode=function(){return Bt};var Cn=m.__private__.setLayoutMode=function(I){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(I)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+I+'" is not recognized.');Jt=I};m.__private__.getLayoutMode=function(){return Jt},m.__private__.setDisplayMode=m.setDisplayMode=function(I,me,He){return qt(I),Cn(me),gn(He),this};var Ye={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(I){if(Object.keys(Ye).indexOf(I)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ye[I]},m.__private__.getDocumentProperties=function(){return Ye},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(I){for(var me in Ye)Ye.hasOwnProperty(me)&&I[me]&&(Ye[me]=I[me]);return this},m.__private__.setDocumentProperty=function(I,me){if(Object.keys(Ye).indexOf(I)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ye[I]=me};var st,Qe,$t,Yt,wn,mn={},_n={},Rn=[],vn={},tn={},hn={},Bn={},Jn=null,ar=0,zn=[],Lr=new F4(m),ns=t.hotfixes||[],ki={},Ft={},Je=[],Lt=function I(me,He,ot,xt,Nt,an){if(!(this instanceof I))return new I(me,He,ot,xt,Nt,an);isNaN(me)&&(me=1),isNaN(He)&&(He=0),isNaN(ot)&&(ot=0),isNaN(xt)&&(xt=1),isNaN(Nt)&&(Nt=0),isNaN(an)&&(an=0),this._matrix=[me,He,ot,xt,Nt,an]};Object.defineProperty(Lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Lt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Lt.prototype.join=function(I){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ee).join(I)},Lt.prototype.multiply=function(I){var me=I.sx*this.sx+I.shy*this.shx,He=I.sx*this.shy+I.shy*this.sy,ot=I.shx*this.sx+I.sy*this.shx,xt=I.shx*this.shy+I.sy*this.sy,Nt=I.tx*this.sx+I.ty*this.shx+this.tx,an=I.tx*this.shy+I.ty*this.sy+this.ty;return new Lt(me,He,ot,xt,Nt,an)},Lt.prototype.decompose=function(){var I=this.sx,me=this.shy,He=this.shx,ot=this.sy,xt=this.tx,Nt=this.ty,an=Math.sqrt(I*I+me*me),Pn=(I/=an)*He+(me/=an)*ot;He-=I*Pn,ot-=me*Pn;var Tn=Math.sqrt(He*He+ot*ot);return Pn/=Tn,I*(ot/=Tn)<me*(He/=Tn)&&(I=-I,me=-me,Pn=-Pn,an=-an),{scale:new Lt(an,0,0,Tn,0,0),translate:new Lt(1,0,0,1,xt,Nt),rotate:new Lt(I,me,-me,I,0,0),skew:new Lt(1,0,Pn,1,0,0)}},Lt.prototype.toString=function(I){return this.join(" ")},Lt.prototype.inversed=function(){var I=this.sx,me=this.shy,He=this.shx,ot=this.sy,xt=this.tx,Nt=this.ty,an=1/(I*ot-me*He),Pn=ot*an,Tn=-me*an,Yn=-He*an,or=I*an;return new Lt(Pn,Tn,Yn,or,-Pn*xt-Yn*Nt,-Tn*xt-or*Nt)},Lt.prototype.applyToPoint=function(I){var me=I.x*this.sx+I.y*this.shx+this.tx,He=I.x*this.shy+I.y*this.sy+this.ty;return new us(me,He)},Lt.prototype.applyToRectangle=function(I){var me=this.applyToPoint(I),He=this.applyToPoint(new us(I.x+I.w,I.y+I.h));return new jo(me.x,me.y,He.x-me.x,He.y-me.y)},Lt.prototype.clone=function(){var I=this.sx,me=this.shy,He=this.shx,ot=this.sy,xt=this.tx,Nt=this.ty;return new Lt(I,me,He,ot,xt,Nt)},m.Matrix=Lt;var In=m.matrixMult=function(I,me){return me.multiply(I)},nr=new Lt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=nr;var Nn=function(I,me){if(!tn[I]){var He=(me instanceof Ff?"Sh":"P")+(Object.keys(vn).length+1).toString(10);me.id=He,tn[I]=He,vn[He]=me,Lr.publish("addPattern",me)}};m.ShadingPattern=Ff,m.TilingPattern=Hd,m.addShadingPattern=function(I,me){return V("addShadingPattern()"),Nn(I,me),this},m.beginTilingPattern=function(I){V("beginTilingPattern()"),zo(I.boundingBox[0],I.boundingBox[1],I.boundingBox[2]-I.boundingBox[0],I.boundingBox[3]-I.boundingBox[1],I.matrix)},m.endTilingPattern=function(I,me){V("endTilingPattern()"),me.stream=gt[ae].join(`
`),Nn(I,me),Lr.publish("endTilingPattern",me),Je.pop().restore()};var Zt=m.__private__.newObject=function(){var I=Ze();return un(I,!0),I},Ze=m.__private__.newObjectDeferred=function(){return ge++,Ee[ge]=function(){return Ne},ge},un=function(I,me){return me=typeof me=="boolean"&&me,Ee[I]=Ne,me&&Q(I+" 0 obj"),I},sn=m.__private__.newAdditionalObject=function(){var I={objId:Ze(),content:""};return rt.push(I),I},An=Ze(),Qn=Ze(),ir=m.__private__.decodeColorString=function(I){var me=I.split(" ");if(me.length!==2||me[1]!=="g"&&me[1]!=="G")me.length===5&&(me[4]==="k"||me[4]==="K")&&(me=[(1-me[0])*(1-me[3]),(1-me[1])*(1-me[3]),(1-me[2])*(1-me[3]),"r"]);else{var He=parseFloat(me[0]);me=[He,He,He,"r"]}for(var ot="#",xt=0;xt<3;xt++)ot+=("0"+Math.floor(255*parseFloat(me[xt])).toString(16)).slice(-2);return ot},Wr=m.__private__.encodeColorString=function(I){var me;typeof I=="string"&&(I={ch1:I});var He=I.ch1,ot=I.ch2,xt=I.ch3,Nt=I.ch4,an=I.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof He=="string"&&He.charAt(0)!=="#"){var Pn=new iE(He);if(Pn.ok)He=Pn.toHex();else if(!/^\d*\.?\d*$/.test(He))throw new Error('Invalid color "'+He+'" passed to jsPDF.encodeColorString.')}if(typeof He=="string"&&/^#[0-9A-Fa-f]{3}$/.test(He)&&(He="#"+He[1]+He[1]+He[2]+He[2]+He[3]+He[3]),typeof He=="string"&&/^#[0-9A-Fa-f]{6}$/.test(He)){var Tn=parseInt(He.substr(1),16);He=Tn>>16&255,ot=Tn>>8&255,xt=255&Tn}if(ot===void 0||Nt===void 0&&He===ot&&ot===xt)if(typeof He=="string")me=He+" "+an[0];else switch(I.precision){case 2:me=pe(He/255)+" "+an[0];break;case 3:default:me=$(He/255)+" "+an[0]}else if(Nt===void 0||Ni(Nt)==="object"){if(Nt&&!isNaN(Nt.a)&&Nt.a===0)return me=["1.","1.","1.",an[1]].join(" ");if(typeof He=="string")me=[He,ot,xt,an[1]].join(" ");else switch(I.precision){case 2:me=[pe(He/255),pe(ot/255),pe(xt/255),an[1]].join(" ");break;default:case 3:me=[$(He/255),$(ot/255),$(xt/255),an[1]].join(" ")}}else if(typeof He=="string")me=[He,ot,xt,Nt,an[2]].join(" ");else switch(I.precision){case 2:me=[pe(He),pe(ot),pe(xt),pe(Nt),an[2]].join(" ");break;case 3:default:me=[$(He),$(ot),$(xt),$(Nt),an[2]].join(" ")}return me},Un=m.__private__.getFilters=function(){return o},li=m.__private__.putStream=function(I){var me=(I=I||{}).data||"",He=I.filters||Un(),ot=I.alreadyAppliedFilters||[],xt=I.addLength1||!1,Nt=me.length,an=I.objectId,Pn=function(zi){return zi};if(f!==null&&an===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Pn=rs.encryptor(an,0));var Tn={};He===!0&&(He=["FlateEncode"]);var Yn=I.additionalKeyValues||[],or=(Tn=wr.API.processDataByFilters!==void 0?wr.API.processDataByFilters(me,He):{data:me,reverseChain:[]}).reverseChain+(Array.isArray(ot)?ot.join(" "):ot.toString());if(Tn.data.length!==0&&(Yn.push({key:"Length",value:Tn.data.length}),xt===!0&&Yn.push({key:"Length1",value:Nt})),or.length!=0)if(or.split("/").length-1==1)Yn.push({key:"Filter",value:or});else{Yn.push({key:"Filter",value:"["+or+"]"});for(var Sr=0;Sr<Yn.length;Sr+=1)if(Yn[Sr].key==="DecodeParms"){for(var _i=[],Zr=0;Zr<Tn.reverseChain.split("/").length-1;Zr+=1)_i.push("null");_i.push(Yn[Sr].value),Yn[Sr].value="["+_i.join(" ")+"]"}}Q("<<");for(var ni=0;ni<Yn.length;ni++)Q("/"+Yn[ni].key+" "+Yn[ni].value);Q(">>"),Tn.data.length!==0&&(Q("stream"),Q(Pn(Tn.data)),Q("endstream"))},kr=m.__private__.putPage=function(I){var me=I.number,He=I.data,ot=I.objId,xt=I.contentsObjId;un(ot,!0),Q("<</Type /Page"),Q("/Parent "+I.rootDictionaryObjId+" 0 R"),Q("/Resources "+I.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(ee(I.mediaBox.bottomLeftX))+" "+parseFloat(ee(I.mediaBox.bottomLeftY))+" "+ee(I.mediaBox.topRightX)+" "+ee(I.mediaBox.topRightY)+"]"),I.cropBox!==null&&Q("/CropBox ["+ee(I.cropBox.bottomLeftX)+" "+ee(I.cropBox.bottomLeftY)+" "+ee(I.cropBox.topRightX)+" "+ee(I.cropBox.topRightY)+"]"),I.bleedBox!==null&&Q("/BleedBox ["+ee(I.bleedBox.bottomLeftX)+" "+ee(I.bleedBox.bottomLeftY)+" "+ee(I.bleedBox.topRightX)+" "+ee(I.bleedBox.topRightY)+"]"),I.trimBox!==null&&Q("/TrimBox ["+ee(I.trimBox.bottomLeftX)+" "+ee(I.trimBox.bottomLeftY)+" "+ee(I.trimBox.topRightX)+" "+ee(I.trimBox.topRightY)+"]"),I.artBox!==null&&Q("/ArtBox ["+ee(I.artBox.bottomLeftX)+" "+ee(I.artBox.bottomLeftY)+" "+ee(I.artBox.topRightX)+" "+ee(I.artBox.topRightY)+"]"),typeof I.userUnit=="number"&&I.userUnit!==1&&Q("/UserUnit "+I.userUnit),Lr.publish("putPage",{objId:ot,pageContext:zn[me],pageNumber:me,page:He}),Q("/Contents "+xt+" 0 R"),Q(">>"),Q("endobj");var Nt=He.join(`
`);return N===D.ADVANCED&&(Nt+=`
Q`),un(xt,!0),li({data:Nt,filters:Un(),objectId:xt}),Q("endobj"),ot},Do=m.__private__.putPages=function(){var I,me,He=[];for(I=1;I<=ar;I++)zn[I].objId=Ze(),zn[I].contentsObjId=Ze();for(I=1;I<=ar;I++)He.push(kr({number:I,data:gt[I],objId:zn[I].objId,contentsObjId:zn[I].contentsObjId,mediaBox:zn[I].mediaBox,cropBox:zn[I].cropBox,bleedBox:zn[I].bleedBox,trimBox:zn[I].trimBox,artBox:zn[I].artBox,userUnit:zn[I].userUnit,rootDictionaryObjId:An,resourceDictionaryObjId:Qn}));un(An,!0),Q("<</Type /Pages");var ot="/Kids [";for(me=0;me<ar;me++)ot+=He[me]+" 0 R ";Q(ot+"]"),Q("/Count "+ar),Q(">>"),Q("endobj"),Lr.publish("postPutPages")},lr=function(I){Lr.publish("putFont",{font:I,out:Q,newObject:Zt,putStream:li}),I.isAlreadyPutted!==!0&&(I.objectNumber=Zt(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Ud(I.postScriptName)),Q("/Subtype /Type1"),typeof I.encoding=="string"&&Q("/Encoding /"+I.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},br=function(){for(var I in mn)mn.hasOwnProperty(I)&&(p===!1||p===!0&&y.hasOwnProperty(I))&&lr(mn[I])},Gi=function(I){I.objectNumber=Zt();var me=[];me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Form"}),me.push({key:"BBox",value:"["+[ee(I.x),ee(I.y),ee(I.x+I.width),ee(I.y+I.height)].join(" ")+"]"}),me.push({key:"Matrix",value:"["+I.matrix.toString()+"]"});var He=I.pages[1].join(`
`);li({data:He,additionalKeyValues:me,objectId:I.objectNumber}),Q("endobj")},ws=function(){for(var I in ki)ki.hasOwnProperty(I)&&Gi(ki[I])},zl=function(I,me){var He,ot=[],xt=1/(me-1);for(He=0;He<1;He+=xt)ot.push(He);if(ot.push(1),I[0].offset!=0){var Nt={offset:0,color:I[0].color};I.unshift(Nt)}if(I[I.length-1].offset!=1){var an={offset:1,color:I[I.length-1].color};I.push(an)}for(var Pn="",Tn=0,Yn=0;Yn<ot.length;Yn++){for(He=ot[Yn];He>I[Tn+1].offset;)Tn++;var or=I[Tn].offset,Sr=(He-or)/(I[Tn+1].offset-or),_i=I[Tn].color,Zr=I[Tn+1].color;Pn+=de(Math.round((1-Sr)*_i[0]+Sr*Zr[0]).toString(16))+de(Math.round((1-Sr)*_i[1]+Sr*Zr[1]).toString(16))+de(Math.round((1-Sr)*_i[2]+Sr*Zr[2]).toString(16))}return Pn.trim()},hu=function(I,me){me||(me=21);var He=Zt(),ot=zl(I.colors,me),xt=[];xt.push({key:"FunctionType",value:"0"}),xt.push({key:"Domain",value:"[0.0 1.0]"}),xt.push({key:"Size",value:"["+me+"]"}),xt.push({key:"BitsPerSample",value:"8"}),xt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),li({data:ot,additionalKeyValues:xt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:He}),Q("endobj"),I.objectNumber=Zt(),Q("<< /ShadingType "+I.type),Q("/ColorSpace /DeviceRGB");var Nt="/Coords ["+ee(parseFloat(I.coords[0]))+" "+ee(parseFloat(I.coords[1]))+" ";I.type===2?Nt+=ee(parseFloat(I.coords[2]))+" "+ee(parseFloat(I.coords[3])):Nt+=ee(parseFloat(I.coords[2]))+" "+ee(parseFloat(I.coords[3]))+" "+ee(parseFloat(I.coords[4]))+" "+ee(parseFloat(I.coords[5])),Q(Nt+="]"),I.matrix&&Q("/Matrix ["+I.matrix.toString()+"]"),Q("/Function "+He+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},Wc=function(I,me){var He=Ze(),ot=Zt();me.push({resourcesOid:He,objectOid:ot}),I.objectNumber=ot;var xt=[];xt.push({key:"Type",value:"/Pattern"}),xt.push({key:"PatternType",value:"1"}),xt.push({key:"PaintType",value:"1"}),xt.push({key:"TilingType",value:"1"}),xt.push({key:"BBox",value:"["+I.boundingBox.map(ee).join(" ")+"]"}),xt.push({key:"XStep",value:ee(I.xStep)}),xt.push({key:"YStep",value:ee(I.yStep)}),xt.push({key:"Resources",value:He+" 0 R"}),I.matrix&&xt.push({key:"Matrix",value:"["+I.matrix.toString()+"]"}),li({data:I.stream,additionalKeyValues:xt,objectId:I.objectNumber}),Q("endobj")},fu=function(I){var me;for(me in vn)vn.hasOwnProperty(me)&&(vn[me]instanceof Ff?hu(vn[me]):vn[me]instanceof Hd&&Wc(vn[me],I))},fc=function(I){for(var me in I.objectNumber=Zt(),Q("<<"),I)switch(me){case"opacity":Q("/ca "+pe(I[me]));break;case"stroke-opacity":Q("/CA "+pe(I[me]))}Q(">>"),Q("endobj")},dc=function(){var I;for(I in hn)hn.hasOwnProperty(I)&&fc(hn[I])},ul=function(){for(var I in Q("/XObject <<"),ki)ki.hasOwnProperty(I)&&ki[I].objectNumber>=0&&Q("/"+I+" "+ki[I].objectNumber+" 0 R");Lr.publish("putXobjectDict"),Q(">>")},cl=function(){rs.oid=Zt(),Q("<<"),Q("/Filter /Standard"),Q("/V "+rs.v),Q("/R "+rs.r),Q("/U <"+rs.toHexString(rs.U)+">"),Q("/O <"+rs.toHexString(rs.O)+">"),Q("/P "+rs.P),Q(">>"),Q("endobj")},Nu=function(){for(var I in Q("/Font <<"),mn)mn.hasOwnProperty(I)&&(p===!1||p===!0&&y.hasOwnProperty(I))&&Q("/"+I+" "+mn[I].objectNumber+" 0 R");Q(">>")},pc=function(){if(Object.keys(vn).length>0){for(var I in Q("/Shading <<"),vn)vn.hasOwnProperty(I)&&vn[I]instanceof Ff&&vn[I].objectNumber>=0&&Q("/"+I+" "+vn[I].objectNumber+" 0 R");Lr.publish("putShadingPatternDict"),Q(">>")}},So=function(I){if(Object.keys(vn).length>0){for(var me in Q("/Pattern <<"),vn)vn.hasOwnProperty(me)&&vn[me]instanceof m.TilingPattern&&vn[me].objectNumber>=0&&vn[me].objectNumber<I&&Q("/"+me+" "+vn[me].objectNumber+" 0 R");Lr.publish("putTilingPatternDict"),Q(">>")}},Gr=function(){if(Object.keys(hn).length>0){var I;for(I in Q("/ExtGState <<"),hn)hn.hasOwnProperty(I)&&hn[I].objectNumber>=0&&Q("/"+I+" "+hn[I].objectNumber+" 0 R");Lr.publish("putGStateDict"),Q(">>")}},hr=function(I){un(I.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Nu(),pc(),So(I.objectOid),Gr(),ul(),Q(">>"),Q("endobj")},Ua=function(){var I=[];br(),dc(),ws(),fu(I),Lr.publish("putResources"),I.forEach(hr),hr({resourcesOid:Qn,objectOid:Number.MAX_SAFE_INTEGER}),Lr.publish("postPutResources")},fa=function(){Lr.publish("putAdditionalObjects");for(var I=0;I<rt.length;I++){var me=rt[I];un(me.objId,!0),Q(me.content),Q("endobj")}Lr.publish("postPutAdditionalObjects")},Io=function(I){_n[I.fontName]=_n[I.fontName]||{},_n[I.fontName][I.fontStyle]=I.id},Ul=function(I,me,He,ot,xt){var Nt={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:I,fontName:me,fontStyle:He,encoding:ot,isStandardFont:xt||!1,metadata:{}};return Lr.publish("addFont",{font:Nt,instance:this}),mn[Nt.id]=Nt,Io(Nt),Nt.id},pr=function(I){for(var me=0,He=Xe.length;me<He;me++){var ot=Ul.call(this,I[me][0],I[me][1],I[me][2],Xe[me][3],!0);p===!1&&(y[ot]=!0);var xt=I[me][0].split("-");Io({id:ot,fontName:xt[0],fontStyle:xt[1]||""})}Lr.publish("addFonts",{fonts:mn,dictionary:_n})},qr=function(I){return I.foo=function(){try{return I.apply(this,arguments)}catch(ot){var me=ot.stack||"";~me.indexOf(" at ")&&(me=me.split(" at ")[1]);var He="Error in function "+me.split(`
`)[0].split("<")[0]+": "+ot.message;if(!xr.console)throw new Error(He);xr.console.error(He,ot),xr.alert&&alert(He)}},I.foo.bar=I,I.foo},$a=function(I,me){var He,ot,xt,Nt,an,Pn,Tn,Yn,or;if(xt=(me=me||{}).sourceEncoding||"Unicode",an=me.outputEncoding,(me.autoencode||an)&&mn[st].metadata&&mn[st].metadata[xt]&&mn[st].metadata[xt].encoding&&(Nt=mn[st].metadata[xt].encoding,!an&&mn[st].encoding&&(an=mn[st].encoding),!an&&Nt.codePages&&(an=Nt.codePages[0]),typeof an=="string"&&(an=Nt[an]),an)){for(Tn=!1,Pn=[],He=0,ot=I.length;He<ot;He++)(Yn=an[I.charCodeAt(He)])?Pn.push(String.fromCharCode(Yn)):Pn.push(I[He]),Pn[He].charCodeAt(0)>>8&&(Tn=!0);I=Pn.join("")}for(He=I.length;Tn===void 0&&He!==0;)I.charCodeAt(He-1)>>8&&(Tn=!0),He--;if(!Tn)return I;for(Pn=me.noBOM?[]:[254,255],He=0,ot=I.length;He<ot;He++){if((or=(Yn=I.charCodeAt(He))>>8)>>8)throw new Error("Character at position "+He+" of string '"+I+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Pn.push(or),Pn.push(Yn-(or<<8))}return String.fromCharCode.apply(void 0,Pn)},xs=m.__private__.pdfEscape=m.pdfEscape=function(I,me){return $a(I,me).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ls=m.__private__.beginPage=function(I){gt[++ar]=[],zn[ar]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(I[0]),topRightY:Number(I[1])}},da(ar),ue(gt[ae])},Bu=function(I,me){var He,ot,xt;switch(n=me||n,typeof I=="string"&&(He=O(I.toLowerCase()),Array.isArray(He)&&(ot=He[0],xt=He[1])),Array.isArray(I)&&(ot=I[0]*Qe,xt=I[1]*Qe),isNaN(ot)&&(ot=i[0],xt=i[1]),(ot>14400||xt>14400)&&(Hi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ot=Math.min(14400,ot),xt=Math.min(14400,xt)),i=[ot,xt],n.substr(0,1)){case"l":xt>ot&&(i=[xt,ot]);break;case"p":ot>xt&&(i=[xt,ot])}Ls(i),Wl(gu),Q(wi),Yl!==0&&Q(Yl+" J"),ei!==0&&Q(ei+" j"),Lr.publish("addPage",{pageNumber:ar})},hl=function(I){I>0&&I<=ar&&(gt.splice(I,1),zn.splice(I,1),ar--,ae>ar&&(ae=ar),this.setPage(ae))},da=function(I){I>0&&I<=ar&&(ae=I)},Ti=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return gt.length-1},No=function(I,me,He){var ot,xt=void 0;return He=He||{},I=I!==void 0?I:mn[st].fontName,me=me!==void 0?me:mn[st].fontStyle,ot=I.toLowerCase(),_n[ot]!==void 0&&_n[ot][me]!==void 0?xt=_n[ot][me]:_n[I]!==void 0&&_n[I][me]!==void 0?xt=_n[I][me]:He.disableWarning===!1&&Hi.warn("Unable to look up font label for font '"+I+"', '"+me+"'. Refer to getFontList() for available fonts."),xt||He.noFallback||(xt=_n.times[me])==null&&(xt=_n.times.normal),xt},Va=m.__private__.putInfo=function(){var I=Zt(),me=function(ot){return ot};for(var He in f!==null&&(me=rs.encryptor(I,0)),Q("<<"),Q("/Producer ("+xs(me("jsPDF "+wr.version))+")"),Ye)Ye.hasOwnProperty(He)&&Ye[He]&&Q("/"+He.substr(0,1).toUpperCase()+He.substr(1)+" ("+xs(me(Ye[He]))+")");Q("/CreationDate ("+xs(me(R))+")"),Q(">>"),Q("endobj")},mo=m.__private__.putCatalog=function(I){var me=(I=I||{}).rootDictionaryObjId||An;switch(Zt(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+me+" 0 R"),at||(at="fullwidth"),at){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var He=""+at;He.substr(He.length-1)==="%"&&(at=parseInt(at)/100),typeof at=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+pe(at)+"]")}switch(Jt||(Jt="continuous"),Jt){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}Bt&&Q("/PageMode /"+Bt),Lr.publish("putCatalog"),Q(">>"),Q("endobj")},du=m.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(ge+1)),Q("/Root "+ge+" 0 R"),Q("/Info "+(ge-1)+" 0 R"),f!==null&&Q("/Encrypt "+rs.oid+" 0 R"),Q("/ID [ <"+j+"> <"+j+"> ]"),Q(">>")},Ha=m.__private__.putHeader=function(){Q("%PDF-"+C),Q("%")},Ru=m.__private__.putXRef=function(){var I="0000000000";Q("xref"),Q("0 "+(ge+1)),Q("0000000000 65535 f ");for(var me=1;me<=ge;me++)typeof Ee[me]=="function"?Q((I+Ee[me]()).slice(-10)+" 00000 n "):Ee[me]!==void 0?Q((I+Ee[me]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Bo=m.__private__.buildDocument=function(){se(),ue(Ue),Lr.publish("buildDocument"),Ha(),Do(),fa(),Ua(),f!==null&&cl(),Va(),mo();var I=Ne;return Ru(),du(),Q("startxref"),Q(""+I),Q("%%EOF"),ue(gt[ae]),Ue.join(`
`)},pa=m.__private__.getBlob=function(I){return new Blob([Ve(I)],{type:"application/pdf"})},Wa=m.output=m.__private__.output=qr(function(I,me){switch(typeof(me=me||{})=="string"?me={filename:me}:me.filename=me.filename||"generated.pdf",I){case void 0:return Bo();case"save":m.save(me.filename);break;case"arraybuffer":return Ve(Bo());case"blob":return pa(Bo());case"bloburi":case"bloburl":if(xr.URL!==void 0&&typeof xr.URL.createObjectURL=="function")return xr.URL&&xr.URL.createObjectURL(pa(Bo()))||void 0;Hi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var He="",ot=Bo();try{He=z2(ot)}catch{He=z2(unescape(encodeURIComponent(ot)))}return"data:application/pdf;filename="+me.filename+";base64,"+He;case"pdfobjectnewwindow":if(Object.prototype.toString.call(xr)==="[object Window]"){var xt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Nt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';me.pdfObjectUrl&&(xt=me.pdfObjectUrl,Nt="");var an='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+xt+'"'+Nt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(me)+");<\/script></body></html>",Pn=xr.open();return Pn!==null&&Pn.document.write(an),Pn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(xr)==="[object Window]"){var Tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(me.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+me.filename+'" width="500px" height="400px" /></body></html>',Yn=xr.open();if(Yn!==null){Yn.document.write(Tn);var or=this;Yn.document.documentElement.querySelector("#pdfViewer").onload=function(){Yn.document.title=me.filename,Yn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(or.output("bloburl"))}}return Yn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(xr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Sr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",me)+'"></iframe></body></html>',_i=xr.open();if(_i!==null&&(_i.document.write(Sr),_i.document.title=me.filename),_i||typeof safari>"u")return _i;break;case"datauri":case"dataurl":return xr.document.location.href=this.output("datauristring",me);default:return null}}),$l=function(I){return Array.isArray(ns)===!0&&ns.indexOf(I)>-1};switch(r){case"pt":Qe=1;break;case"mm":Qe=72/25.4;break;case"cm":Qe=72/2.54;break;case"in":Qe=72;break;case"px":Qe=$l("px_scaling")==1?.75:96/72;break;case"pc":case"em":Qe=12;break;case"ex":Qe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Qe=r}var rs=null;_e(),re();var gc=function(I){return f!==null?rs.encryptor(I,0):function(me){return me}},pu=m.__private__.getPageInfo=m.getPageInfo=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:zn[I].objId,pageNumber:I,pageContext:zn[I]}},ur=m.__private__.getPageInfoByObjId=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var me in zn)if(zn[me].objId===I)break;return pu(me)},gr=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:zn[ae].objId,pageNumber:ae,pageContext:zn[ae]}};m.addPage=function(){return Bu.apply(this,arguments),this},m.setPage=function(){return da.apply(this,arguments),ue.call(this,gt[ae]),this},m.insertPage=function(I){return this.addPage(),this.movePage(ae,I),this},m.movePage=function(I,me){var He,ot;if(I>me){He=gt[I],ot=zn[I];for(var xt=I;xt>me;xt--)gt[xt]=gt[xt-1],zn[xt]=zn[xt-1];gt[me]=He,zn[me]=ot,this.setPage(me)}else if(I<me){He=gt[I],ot=zn[I];for(var Nt=I;Nt<me;Nt++)gt[Nt]=gt[Nt+1],zn[Nt]=zn[Nt+1];gt[me]=He,zn[me]=ot,this.setPage(me)}return this},m.deletePage=function(){return hl.apply(this,arguments),this},m.__private__.text=m.text=function(I,me,He,ot,xt){var Nt,an,Pn,Tn,Yn,or,Sr,_i,Zr,ni=(ot=ot||{}).scope||this;if(typeof I=="number"&&typeof me=="number"&&(typeof He=="string"||Array.isArray(He))){var zi=He;He=me,me=I,I=zi}if(arguments[3]instanceof Lt?(V("The transform parameter of text() with a Matrix value"),Zr=xt):(Pn=arguments[4],Tn=arguments[5],Ni(Sr=arguments[3])==="object"&&Sr!==null||(typeof Pn=="string"&&(Tn=Pn,Pn=null),typeof Sr=="string"&&(Tn=Sr,Sr=null),typeof Sr=="number"&&(Pn=Sr,Sr=null),ot={flags:Sr,angle:Pn,align:Tn})),isNaN(me)||isNaN(He)||I==null)throw new Error("Invalid arguments passed to jsPDF.text");if(I.length===0)return ni;var qi="",yo=!1,Er=typeof ot.lineHeightFactor=="number"?ot.lineHeightFactor:Hl,Cs=ni.internal.scaleFactor;function yl(ii){return ii=ii.split("	").join(Array(ot.TabLen||9).join(" ")),xs(ii,Sr)}function Fs(ii){for(var ui,Ui=ii.concat(),mi=[],wo=Ui.length;wo--;)typeof(ui=Ui.shift())=="string"?mi.push(ui):Array.isArray(ii)&&(ui.length===1||ui[1]===void 0&&ui[2]===void 0)?mi.push(ui[0]):mi.push([ui[0],ui[1],ui[2]]);return mi}function yu(ii,ui){var Ui;if(typeof ii=="string")Ui=ui(ii)[0];else if(Array.isArray(ii)){for(var mi,wo,eo=ii.concat(),Po=[],Uu=eo.length;Uu--;)typeof(mi=eo.shift())=="string"?Po.push(ui(mi)[0]):Array.isArray(mi)&&typeof mi[0]=="string"&&(wo=ui(mi[0],mi[1],mi[2]),Po.push([wo[0],wo[1],wo[2]]));Ui=Po}return Ui}var Jo=!1,zu=!0;if(typeof I=="string")Jo=!0;else if(Array.isArray(I)){var Ya=I.concat();an=[];for(var Za,Yi=Ya.length;Yi--;)(typeof(Za=Ya.shift())!="string"||Array.isArray(Za)&&typeof Za[0]!="string")&&(zu=!1);Jo=zu}if(Jo===!1)throw new Error('Type of text must be string or Array. "'+I+'" is not recognized.');typeof I=="string"&&(I=I.match(/[\r?\n]/)?I.split(/\r\n|\r|\n/g):[I]);var Qo=lt/ni.internal.scaleFactor,bo=Qo*(Er-1);switch(ot.baseline){case"bottom":He-=bo;break;case"top":He+=Qo-bo;break;case"hanging":He+=Qo-2*bo;break;case"middle":He+=Qo/2-bo}if((or=ot.maxWidth||0)>0&&(typeof I=="string"?I=ni.splitTextToSize(I,or):Object.prototype.toString.call(I)==="[object Array]"&&(I=I.reduce(function(ii,ui){return ii.concat(ni.splitTextToSize(ui,or))},[]))),Nt={text:I,x:me,y:He,options:ot,mutex:{pdfEscape:xs,activeFontKey:st,fonts:mn,activeFontSize:lt}},Lr.publish("preProcessText",Nt),I=Nt.text,Pn=(ot=Nt.options).angle,!(Zr instanceof Lt)&&Pn&&typeof Pn=="number"){Pn*=Math.PI/180,ot.rotationDirection===0&&(Pn=-Pn),N===D.ADVANCED&&(Pn=-Pn);var Qs=Math.cos(Pn),bl=Math.sin(Pn);Zr=new Lt(Qs,bl,-bl,Qs,0,0)}else Pn&&Pn instanceof Lt&&(Zr=Pn);N!==D.ADVANCED||Zr||(Zr=nr),(Yn=ot.charSpace||ql)!==void 0&&(qi+=ee(H(Yn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_i=ot.horizontalScale)!==void 0&&(qi+=ee(100*_i)+` Tz
`),ot.lang;var Ss=-1,js=ot.renderingMode!==void 0?ot.renderingMode:ot.stroke,zs=ni.internal.getCurrentPageInfo().pageContext;switch(js){case 0:case!1:case"fill":Ss=0;break;case 1:case!0:case"stroke":Ss=1;break;case 2:case"fillThenStroke":Ss=2;break;case 3:case"invisible":Ss=3;break;case 4:case"fillAndAddForClipping":Ss=4;break;case 5:case"strokeAndAddPathForClipping":Ss=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ss=6;break;case 7:case"addToPathForClipping":Ss=7}var yc=zs.usedRenderingMode!==void 0?zs.usedRenderingMode:-1;Ss!==-1?qi+=Ss+` Tr
`:yc!==-1&&(qi+=`0 Tr
`),Ss!==-1&&(zs.usedRenderingMode=Ss),Tn=ot.align||"left";var is,va=lt*Er,Es=ni.internal.pageSize.getWidth(),Ps=mn[st];Yn=ot.charSpace||ql,or=ot.maxWidth||0,Sr=Object.assign({autoencode:!0,noBOM:!0},ot.flags);var ya=[],ba=function(ii){return ni.getStringUnitWidth(ii,{font:Ps,charSpace:Yn,fontSize:lt,doKerning:!1})*lt/Cs};if(Object.prototype.toString.call(I)==="[object Array]"){var ks;an=Fs(I),Tn!=="left"&&(is=an.map(ba));var cs,ea=0;if(Tn==="right"){me-=is[0],I=[],Yi=an.length;for(var _o=0;_o<Yi;_o++)_o===0?(cs=Kn(me),ks=Fi(He)):(cs=H(ea-is[_o]),ks=-va),I.push([an[_o],cs,ks]),ea=is[_o]}else if(Tn==="center"){me-=is[0]/2,I=[],Yi=an.length;for(var Ms=0;Ms<Yi;Ms++)Ms===0?(cs=Kn(me),ks=Fi(He)):(cs=H((ea-is[Ms])/2),ks=-va),I.push([an[Ms],cs,ks]),ea=is[Ms]}else if(Tn==="left"){I=[],Yi=an.length;for(var yt=0;yt<Yi;yt++)I.push(an[yt])}else if(Tn==="justify"&&Ps.encoding==="Identity-H"){I=[],Yi=an.length,or=or!==0?or:Es;for(var Vt=0,Mt=0;Mt<Yi;Mt++)if(ks=Mt===0?Fi(He):-va,cs=Mt===0?Kn(me):Vt,Mt<Yi-1){var Sn=H((or-is[Mt])/(an[Mt].split(" ").length-1)),$n=an[Mt].split(" ");I.push([$n[0]+" ",cs,ks]),Vt=0;for(var cr=1;cr<$n.length;cr++){var xi=(ba($n[cr-1]+" "+$n[cr])-ba($n[cr]))*Cs+Sn;cr==$n.length-1?I.push([$n[cr],xi,0]):I.push([$n[cr]+" ",xi,0]),Vt-=xi}}else I.push([an[Mt],cs,ks]);I.push(["",Vt,0])}else{if(Tn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(I=[],Yi=an.length,or=or!==0?or:Es,Mt=0;Mt<Yi;Mt++)ks=Mt===0?Fi(He):-va,cs=Mt===0?Kn(me):0,Mt<Yi-1?ya.push(ee(H((or-is[Mt])/(an[Mt].split(" ").length-1)))):ya.push(0),I.push([an[Mt],cs,ks])}}var ri=typeof ot.R2L=="boolean"?ot.R2L:jt;ri===!0&&(I=yu(I,function(ii,ui,Ui){return[ii.split("").reverse().join(""),ui,Ui]})),Nt={text:I,x:me,y:He,options:ot,mutex:{pdfEscape:xs,activeFontKey:st,fonts:mn,activeFontSize:lt}},Lr.publish("postProcessText",Nt),I=Nt.text,yo=Nt.mutex.isHex||!1;var Kl=mn[st].encoding;Kl!=="WinAnsiEncoding"&&Kl!=="StandardEncoding"||(I=yu(I,function(ii,ui,Ui){return[yl(ii),ui,Ui]})),an=Fs(I),I=[];for(var Us,Li,ta,_a=0,na=1,ra=Array.isArray(an[0])?na:_a,ia="",Ir=function(ii,ui,Ui){var mi="";return Ui instanceof Lt?(Ui=typeof ot.angle=="number"?In(Ui,new Lt(1,0,0,1,ii,ui)):In(new Lt(1,0,0,1,ii,ui),Ui),N===D.ADVANCED&&(Ui=In(new Lt(1,0,0,-1,0,0),Ui)),mi=Ui.join(" ")+` Tm
`):mi=ee(ii)+" "+ee(ui)+` Td
`,mi},Uo=0;Uo<an.length;Uo++){switch(ia="",ra){case na:ta=(yo?"<":"(")+an[Uo][0]+(yo?">":")"),Us=parseFloat(an[Uo][1]),Li=parseFloat(an[Uo][2]);break;case _a:ta=(yo?"<":"(")+an[Uo]+(yo?">":")"),Us=Kn(me),Li=Fi(He)}ya!==void 0&&ya[Uo]!==void 0&&(ia=ya[Uo]+` Tw
`),Uo===0?I.push(ia+Ir(Us,Li,Zr)+ta):ra===_a?I.push(ia+ta):ra===na&&I.push(ia+Ir(Us,Li,Zr)+ta)}I=ra===_a?I.join(` Tj
T* `):I.join(` Tj
`),I+=` Tj
`;var hs=`BT
/`;return hs+=st+" "+lt+` Tf
`,hs+=ee(lt*Er)+` TL
`,hs+=Xo+`
`,hs+=qi,hs+=I,Q(hs+="ET"),y[st]=!0,ni};var Ro=m.__private__.clip=m.clip=function(I){return Q(I==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ro("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Q("n"),this};var $r=m.__private__.isValidStyle=function(I){var me=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(I)!==-1&&(me=!0),me};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(I){return $r(I)&&(c=I),this};var Fu=m.__private__.getStyle=m.getStyle=function(I){var me=c;switch(I){case"D":case"S":me="S";break;case"F":me="f";break;case"FD":case"DF":me="B";break;case"f":case"f*":case"B":case"B*":me=I}return me},fl=m.close=function(){return Q("h"),this};m.stroke=function(){return Q("S"),this},m.fill=function(I){return dl("f",I),this},m.fillEvenOdd=function(I){return dl("f*",I),this},m.fillStroke=function(I){return dl("B",I),this},m.fillStrokeEvenOdd=function(I){return dl("B*",I),this};var dl=function(I,me){Ni(me)==="object"?ju(me,I):Q(I)},Fo=function(I){I===null||N===D.ADVANCED&&I===void 0||(I=Fu(I),Q(I))};function Ga(I,me,He,ot,xt){var Nt=new Hd(me||this.boundingBox,He||this.xStep,ot||this.yStep,this.gState,xt||this.matrix);Nt.stream=this.stream;var an=I+"$$"+this.cloneIndex+++"$$";return Nn(an,Nt),Nt}var ju=function(I,me){var He=tn[I.key],ot=vn[He];if(ot instanceof Ff)Q("q"),Q(Vl(me)),ot.gState&&m.setGState(ot.gState),Q(I.matrix.toString()+" cm"),Q("/"+He+" sh"),Q("Q");else if(ot instanceof Hd){var xt=new Lt(1,0,0,-1,0,ma());I.matrix&&(xt=xt.multiply(I.matrix||nr),He=Ga.call(ot,I.key,I.boundingBox,I.xStep,I.yStep,xt).id),Q("q"),Q("/Pattern cs"),Q("/"+He+" scn"),ot.gState&&m.setGState(ot.gState),Q(me),Q("Q")}},Vl=function(I){switch(I){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},fr=m.moveTo=function(I,me){return Q(ee(H(I))+" "+ee(ie(me))+" m"),this},Mr=m.lineTo=function(I,me){return Q(ee(H(I))+" "+ee(ie(me))+" l"),this},qa=m.curveTo=function(I,me,He,ot,xt,Nt){return Q([ee(H(I)),ee(ie(me)),ee(H(He)),ee(ie(ot)),ee(H(xt)),ee(ie(Nt)),"c"].join(" ")),this};m.__private__.line=m.line=function(I,me,He,ot,xt){if(isNaN(I)||isNaN(me)||isNaN(He)||isNaN(ot)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.line");return N===D.COMPAT?this.lines([[He-I,ot-me]],I,me,[1,1],xt||"S"):this.lines([[He-I,ot-me]],I,me,[1,1]).stroke()},m.__private__.lines=m.lines=function(I,me,He,ot,xt,Nt){var an,Pn,Tn,Yn,or,Sr,_i,Zr,ni,zi,qi,yo;if(typeof I=="number"&&(yo=He,He=me,me=I,I=yo),ot=ot||[1,1],Nt=Nt||!1,isNaN(me)||isNaN(He)||!Array.isArray(I)||!Array.isArray(ot)||!$r(xt)||typeof Nt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(fr(me,He),an=ot[0],Pn=ot[1],Yn=I.length,zi=me,qi=He,Tn=0;Tn<Yn;Tn++)(or=I[Tn]).length===2?(zi=or[0]*an+zi,qi=or[1]*Pn+qi,Mr(zi,qi)):(Sr=or[0]*an+zi,_i=or[1]*Pn+qi,Zr=or[2]*an+zi,ni=or[3]*Pn+qi,zi=or[4]*an+zi,qi=or[5]*Pn+qi,qa(Sr,_i,Zr,ni,zi,qi));return Nt&&fl(),Fo(xt),this},m.path=function(I){for(var me=0;me<I.length;me++){var He=I[me],ot=He.c;switch(He.op){case"m":fr(ot[0],ot[1]);break;case"l":Mr(ot[0],ot[1]);break;case"c":qa.apply(this,ot);break;case"h":fl()}}return this},m.__private__.rect=m.rect=function(I,me,He,ot,xt){if(isNaN(I)||isNaN(me)||isNaN(He)||isNaN(ot)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.rect");return N===D.COMPAT&&(ot=-ot),Q([ee(H(I)),ee(ie(me)),ee(H(He)),ee(H(ot)),"re"].join(" ")),Fo(xt),this},m.__private__.triangle=m.triangle=function(I,me,He,ot,xt,Nt,an){if(isNaN(I)||isNaN(me)||isNaN(He)||isNaN(ot)||isNaN(xt)||isNaN(Nt)||!$r(an))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[He-I,ot-me],[xt-He,Nt-ot],[I-xt,me-Nt]],I,me,[1,1],an,!0),this},m.__private__.roundedRect=m.roundedRect=function(I,me,He,ot,xt,Nt,an){if(isNaN(I)||isNaN(me)||isNaN(He)||isNaN(ot)||isNaN(xt)||isNaN(Nt)||!$r(an))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Pn=4/3*(Math.SQRT2-1);return xt=Math.min(xt,.5*He),Nt=Math.min(Nt,.5*ot),this.lines([[He-2*xt,0],[xt*Pn,0,xt,Nt-Nt*Pn,xt,Nt],[0,ot-2*Nt],[0,Nt*Pn,-xt*Pn,Nt,-xt,Nt],[2*xt-He,0],[-xt*Pn,0,-xt,-Nt*Pn,-xt,-Nt],[0,2*Nt-ot],[0,-Nt*Pn,xt*Pn,-Nt,xt,-Nt]],I+xt,me,[1,1],an,!0),this},m.__private__.ellipse=m.ellipse=function(I,me,He,ot,xt){if(isNaN(I)||isNaN(me)||isNaN(He)||isNaN(ot)||!$r(xt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Nt=4/3*(Math.SQRT2-1)*He,an=4/3*(Math.SQRT2-1)*ot;return fr(I+He,me),qa(I+He,me-an,I+Nt,me-ot,I,me-ot),qa(I-Nt,me-ot,I-He,me-an,I-He,me),qa(I-He,me+an,I-Nt,me+ot,I,me+ot),qa(I+Nt,me+ot,I+He,me+an,I+He,me),Fo(xt),this},m.__private__.circle=m.circle=function(I,me,He,ot){if(isNaN(I)||isNaN(me)||isNaN(He)||!$r(ot))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(I,me,He,He,ot)},m.setFont=function(I,me,He){return He&&(me=J(me,He)),st=No(I,me,{disableWarning:!1}),this};var mc=m.__private__.getFont=m.getFont=function(){return mn[No.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var I,me,He={};for(I in _n)if(_n.hasOwnProperty(I))for(me in He[I]=[],_n[I])_n[I].hasOwnProperty(me)&&He[I].push(me);return He},m.addFont=function(I,me,He,ot,xt){var Nt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Nt.indexOf(arguments[3])!==-1?xt=arguments[3]:arguments[3]&&Nt.indexOf(arguments[3])==-1&&(He=J(He,ot)),xt=xt||"Identity-H",Ul.call(this,I,me,He,xt)};var Hl,gu=t.lineWidth||.200025,pl=m.__private__.getLineWidth=m.getLineWidth=function(){return gu},Wl=m.__private__.setLineWidth=m.setLineWidth=function(I){return gu=I,Q(ee(H(I))+" w"),this};m.__private__.setLineDash=wr.API.setLineDash=wr.API.setLineDashPattern=function(I,me){if(I=I||[],me=me||0,isNaN(me)||!Array.isArray(I))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return I=I.map(function(He){return ee(H(He))}).join(" "),me=ee(H(me)),Q("["+I+"] "+me+" d"),this};var mu=m.__private__.getLineHeight=m.getLineHeight=function(){return lt*Hl};m.__private__.getLineHeight=m.getLineHeight=function(){return lt*Hl};var Dr=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(I){return typeof(I=I||1.15)=="number"&&(Hl=I),this},Ri=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Hl};Dr(t.lineHeight);var Kn=m.__private__.getHorizontalCoordinate=function(I){return H(I)},Fi=m.__private__.getVerticalCoordinate=function(I){return N===D.ADVANCED?I:zn[ae].mediaBox.topRightY-zn[ae].mediaBox.bottomLeftY-H(I)},gl=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(I){return ee(Kn(I))},ga=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(I){return ee(Fi(I))},wi=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return ir(wi)},m.__private__.setStrokeColor=m.setDrawColor=function(I,me,He,ot){return wi=Wr({ch1:I,ch2:me,ch3:He,ch4:ot,pdfColorType:"draw",precision:2}),Q(wi),this};var vu=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return ir(vu)},m.__private__.setFillColor=m.setFillColor=function(I,me,He,ot){return vu=Wr({ch1:I,ch2:me,ch3:He,ch4:ot,pdfColorType:"fill",precision:2}),Q(vu),this};var Xo=t.textColor||"0 g",Gl=m.__private__.getTextColor=m.getTextColor=function(){return ir(Xo)};m.__private__.setTextColor=m.setTextColor=function(I,me,He,ot){return Xo=Wr({ch1:I,ch2:me,ch3:He,ch4:ot,pdfColorType:"text",precision:3}),this};var ql=t.charSpace,Eo=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(ql||0)};m.__private__.setCharSpace=m.setCharSpace=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ql=I,this};var Yl=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(I){var me=m.CapJoinStyles[I];if(me===void 0)throw new Error("Line cap style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yl=me,Q(me+" J"),this};var ei=0;m.__private__.setLineJoin=m.setLineJoin=function(I){var me=m.CapJoinStyles[I];if(me===void 0)throw new Error("Line join style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ei=me,Q(me+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(I){if(I=I||0,isNaN(I))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(ee(H(I))+" M"),this},m.GState=gv,m.setGState=function(I){(I=typeof I=="string"?hn[Bn[I]]:vc(null,I)).equals(Jn)||(Q("/"+I.id+" gs"),Jn=I)};var vc=function(I,me){if(!I||!Bn[I]){var He=!1;for(var ot in hn)if(hn.hasOwnProperty(ot)&&hn[ot].equals(me)){He=!0;break}if(He)me=hn[ot];else{var xt="GS"+(Object.keys(hn).length+1).toString(10);hn[xt]=me,me.id=xt}return I&&(Bn[I]=me.id),Lr.publish("addGState",me),me}};m.addGState=function(I,me){return vc(I,me),this},m.saveGraphicsState=function(){return Q("q"),Rn.push({key:st,size:lt,color:Xo}),this},m.restoreGraphicsState=function(){Q("Q");var I=Rn.pop();return st=I.key,lt=I.size,Xo=I.color,Jn=null,this},m.setCurrentTransformationMatrix=function(I){return Q(I.toString()+" cm"),this},m.comment=function(I){return Q("#"+I),this};var us=function(I,me){var He=I||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return He},set:function(Nt){isNaN(Nt)||(He=parseFloat(Nt))}});var ot=me||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ot},set:function(Nt){isNaN(Nt)||(ot=parseFloat(Nt))}});var xt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return xt},set:function(Nt){xt=Nt.toString()}}),this},jo=function(I,me,He,ot){us.call(this,I,me),this.type="rect";var xt=He||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return xt},set:function(an){isNaN(an)||(xt=parseFloat(an))}});var Nt=ot||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Nt},set:function(an){isNaN(an)||(Nt=parseFloat(an))}}),this},Zl=function(){this.page=ar,this.currentPage=ae,this.pages=gt.slice(0),this.pagesContext=zn.slice(0),this.x=$t,this.y=Yt,this.matrix=wn,this.width=ti(ae),this.height=ma(ae),this.outputDestination=le,this.id="",this.objectNumber=-1};Zl.prototype.restore=function(){ar=this.page,ae=this.currentPage,zn=this.pagesContext,gt=this.pages,$t=this.x,Yt=this.y,wn=this.matrix,vo(ae,this.width),ji(ae,this.height),le=this.outputDestination};var zo=function(I,me,He,ot,xt){Je.push(new Zl),ar=ae=0,gt=[],$t=I,Yt=me,wn=xt,Ls([He,ot])},ml=function(I){if(Ft[I])Je.pop().restore();else{var me=new Zl,He="Xo"+(Object.keys(ki).length+1).toString(10);me.id=He,Ft[I]=He,ki[He]=me,Lr.publish("addFormObject",me),Je.pop().restore()}};for(var vl in m.beginFormObject=function(I,me,He,ot,xt){return zo(I,me,He,ot,xt),this},m.endFormObject=function(I){return ml(I),this},m.doFormObject=function(I,me){var He=ki[Ft[I]];return Q("q"),Q(me.toString()+" cm"),Q("/"+He.id+" Do"),Q("Q"),this},m.getFormObject=function(I){var me=ki[Ft[I]];return{x:me.x,y:me.y,width:me.width,height:me.height,matrix:me.matrix}},m.save=function(I,me){return I=I||"generated.pdf",(me=me||{}).returnPromise=me.returnPromise||!1,me.returnPromise===!1?(Df(pa(Bo()),I),typeof Df.unload=="function"&&xr.setTimeout&&setTimeout(Df.unload,911),this):new Promise(function(He,ot){try{var xt=Df(pa(Bo()),I);typeof Df.unload=="function"&&xr.setTimeout&&setTimeout(Df.unload,911),He(xt)}catch(Nt){ot(Nt.message)}})},wr.API)wr.API.hasOwnProperty(vl)&&(vl==="events"&&wr.API.events.length?function(I,me){var He,ot,xt;for(xt=me.length-1;xt!==-1;xt--)He=me[xt][0],ot=me[xt][1],I.subscribe.apply(I,[He].concat(typeof ot=="function"?[ot]:ot))}(Lr,wr.API.events):m[vl]=wr.API[vl]);var ti=m.getPageWidth=function(I){return(zn[I=I||ae].mediaBox.topRightX-zn[I].mediaBox.bottomLeftX)/Qe},vo=m.setPageWidth=function(I,me){zn[I].mediaBox.topRightX=me*Qe+zn[I].mediaBox.bottomLeftX},ma=m.getPageHeight=function(I){return(zn[I=I||ae].mediaBox.topRightY-zn[I].mediaBox.bottomLeftY)/Qe},ji=m.setPageHeight=function(I,me){zn[I].mediaBox.topRightY=me*Qe+zn[I].mediaBox.bottomLeftY};return m.internal={pdfEscape:xs,getStyle:Fu,getFont:mc,getFontSize:pt,getCharSpace:Eo,getTextColor:Gl,getLineHeight:mu,getLineHeightFactor:Ri,getLineWidth:pl,write:ke,getHorizontalCoordinate:Kn,getVerticalCoordinate:Fi,getCoordinateString:gl,getVerticalCoordinateString:ga,collections:{},newObject:Zt,newAdditionalObject:sn,newObjectDeferred:Ze,newObjectDeferredBegin:un,getFilters:Un,putStream:li,events:Lr,scaleFactor:Qe,pageSize:{getWidth:function(){return ti(ae)},setWidth:function(I){vo(ae,I)},getHeight:function(){return ma(ae)},setHeight:function(I){ji(ae,I)}},encryptionOptions:f,encryption:rs,getEncryptor:gc,output:Wa,getNumberOfPages:Ti,pages:gt,out:Q,f2:pe,f3:$,getPageInfo:pu,getPageInfoByObjId:ur,getCurrentPageInfo:gr,getPDFVersion:S,Point:us,Rectangle:jo,Matrix:Lt,hasHotfix:$l},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ti(ae)},set:function(I){vo(ae,I)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return ma(ae)},set:function(I){ji(ae,I)},enumerable:!0,configurable:!0}),pr.call(m,Xe),st="F1",Bu(i,n),Lr.publish("initialized"),m}zd.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},zd.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},zd.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},zd.prototype.processOwnerPassword=function(t,e){return $2(U2(e).substr(0,5),t)},zd.prototype.encryptor=function(t,e){var n=U2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return $2(n,r)}},gv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Ni(t)!==Ni(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},wr.API={events:[]},wr.version="2.5.2";var Gs=wr.API,u_=1,id=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},kd=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Tr=function(t){return t.toFixed(2)},Nh=function(t){return t.toFixed(5)};Gs.__acroform__={};var jl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},j4=function(t){return t*u_},Pc=function(t){var e=new lE,n=Vn.internal.getHeight(t)||0,r=Vn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Tr(r)),Number(Tr(n))],e},m$=Gs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},v$=Gs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},y$=Gs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},ao=Gs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return y$(t,e-1)},lo=Gs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return m$(t,e-1)},uo=Gs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return v$(t,e-1)},b$=Gs.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Tr(l.lowerLeft_X)),Number(Tr(l.lowerLeft_Y)),Number(Tr(l.upperRight_X)),Number(Tr(l.upperRight_Y))]},_$=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=V2(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Tr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Pc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},V2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function($){return $.split(`
`)}):i.map(function($){return[$]});var s=n,o=Vn.internal.getHeight(t)||0;o=o<0?-o:o;var a=Vn.internal.getWidth(t)||0;a=a<0?-a:a;var l=function($,H,oe){if($+1<i.length){var ie=H+" "+i[$+1][0];return Jm(ie,t,oe).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,f,p=Jm("3",t,s).height,y=t.multiline?o-s:(o-p)/2,m=y+=2,C=0,S=0,T=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Jm(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var O="",D=0,N=0;N<i.length;N++)if(i.hasOwnProperty(N)){var U=!1;if(i[N].length!==1&&T!==i[N].length-1){if((p+2)*(D+2)+2>o)continue e;O+=i[N][T],U=!0,S=N,N--}else{O=(O+=i[N][T]+" ").substr(O.length-1)==" "?O.substr(0,O.length-1):O;var G=parseInt(N),J=l(G,O,s),ee=N>=i.length-1;if(J&&!ee){O+=" ",T=0;continue}if(J||ee){if(ee)S=G;else if(t.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(D+2)+2>o)continue e;S=G}}for(var V="",K=C;K<=S;K++){var pe=i[K];if(t.multiline){if(K===S){V+=pe[T]+" ",T=(T+1)%pe.length;continue}if(K===C){V+=pe[pe.length-1]+" ";continue}}V+=pe[0]+" "}switch(V=V.substr(V.length-1)==" "?V.substr(0,V.length-1):V,f=Jm(V,t,s).width,t.textAlign){case"right":c=a-f-2;break;case"center":c=(a-f)/2;break;case"left":default:c=2}e+=Tr(c)+" "+Tr(m)+` Td
`,e+="("+id(V)+`) Tj
`,e+=-Tr(c)+` 0 Td
`,m=-(s+2),f=0,C=U?S:S+1,D++,O=""}break}return r.text=e,r.fontSize=s,r},Jm=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},w$={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},x$=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},L$=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Ni(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},C$=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(cc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(w$)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");u_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new uE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&x$(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=b$(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Vn.createDefaultAppearanceStream(a),Ni(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var f=_$(a);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(a.appearanceStreamContent){var p="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var m=a.appearanceStreamContent[y];if(p+="/"+y+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var C=m[o];typeof C=="function"&&(C=C.call(i,a)),p+="/"+o+" "+C+" ",i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C)}}else typeof(C=m)=="function"&&(C=C.call(i,a)),p+="/"+o+" "+C,i.internal.acroformPlugin.xForms.indexOf(C)>=0||i.internal.acroformPlugin.xForms.push(C);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&L$(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},aE=Gs.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Ni(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+id(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},E1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+id(r(t))+")"},Nc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Nc.prototype.toString=function(){return this.objId+" 0 R"},Nc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Nc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:aE(i,this.objId,this.scope)}):i instanceof Nc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var lE=function(){Nc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};jl(lE,Nc);var uE=function(){Nc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+id(n(t))+")"}},set:function(n){t=n}})};jl(uE,Nc);var cc=function t(){Nc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute F supplied.');e=O}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ao(e,3)},set:function(O){O?this.F=lo(e,3):this.F=uo(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(O){if(isNaN(O))throw new Error('Invalid value "'+O+'" for attribute Ff supplied.');n=O}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(O){r=O!==void 0?O:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(O){r[0]=O}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(O){r[1]=O}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(O){r[2]=O}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(O){r[3]=O}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(O){switch(O){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=O;break;default:throw new Error('Invalid value "'+O+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof mv)return;s="FieldObject"+t.FieldNum++}var O=function(D){return D};return this.scope&&(O=this.scope.internal.getEncryptor(this.objId)),"("+id(O(s))+")"},set:function(O){s=O.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(O){s=O}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(O){o=O}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(O){a=O}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(O){l=O}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/u_:c},set:function(O){c=O}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(O){f=O}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof mv||this instanceof qf))return E1(p,this.objId,this.scope)},set:function(O){O=O.toString(),p=O}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof qo?y:E1(y,this.objId,this.scope)},set:function(O){O=O.toString(),y=this instanceof qo?O:O.substr(0,1)==="("?kd(O.substr(1,O.length-2)):kd(O)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof qo?kd(y.substr(1,y.length-1)):y},set:function(O){O=O.toString(),y=this instanceof qo?"/"+O:O}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(O){this.V=O}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof qo?m:E1(m,this.objId,this.scope)},set:function(O){O=O.toString(),m=this instanceof qo?O:O.substr(0,1)==="("?kd(O.substr(1,O.length-2)):kd(O)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof qo?kd(m.substr(1,m.length-1)):m},set:function(O){O=O.toString(),m=this instanceof qo?"/"+O:O}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var C,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(O){O=!!O,S=O}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(C)return C},set:function(O){C=O}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,1)},set:function(O){O?this.Ff=lo(this.Ff,1):this.Ff=uo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,2)},set:function(O){O?this.Ff=lo(this.Ff,2):this.Ff=uo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,3)},set:function(O){O?this.Ff=lo(this.Ff,3):this.Ff=uo(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(O){if([0,1,2].indexOf(O)===-1)throw new Error('Invalid value "'+O+'" for attribute Q supplied.');T=O}}),Object.defineProperty(this,"textAlign",{get:function(){var O;switch(T){case 0:default:O="left";break;case 1:O="center";break;case 2:O="right"}return O},configurable:!0,enumerable:!0,set:function(O){switch(O){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};jl(cc,Nc);var Jd=function(){cc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return aE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,18)},set:function(n){n?this.Ff=lo(this.Ff,18):this.Ff=uo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=lo(this.Ff,19):this.Ff=uo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,20)},set:function(n){n?(this.Ff=lo(this.Ff,20),e.sort()):this.Ff=uo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,22)},set:function(n){n?this.Ff=lo(this.Ff,22):this.Ff=uo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,23)},set:function(n){n?this.Ff=lo(this.Ff,23):this.Ff=uo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,27)},set:function(n){n?this.Ff=lo(this.Ff,27):this.Ff=uo(this.Ff,27)}}),this.hasAppearanceStream=!1};jl(Jd,cc);var Qd=function(){Jd.call(this),this.fontName="helvetica",this.combo=!1};jl(Qd,Jd);var ep=function(){Qd.call(this),this.combo=!0};jl(ep,Qd);var O0=function(){ep.call(this),this.edit=!0};jl(O0,ep);var qo=function(){cc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,15)},set:function(n){n?this.Ff=lo(this.Ff,15):this.Ff=uo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,16)},set:function(n){n?this.Ff=lo(this.Ff,16):this.Ff=uo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,17)},set:function(n){n?this.Ff=lo(this.Ff,17):this.Ff=uo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,26)},set:function(n){n?this.Ff=lo(this.Ff,26):this.Ff=uo(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+id(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Ni(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};jl(qo,cc);var D0=function(){qo.call(this),this.pushButton=!0};jl(D0,qo);var tp=function(){qo.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};jl(tp,qo);var mv=function(){var t,e;cc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+id(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Ni(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Vn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};jl(mv,cc),tp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},tp.prototype.createOption=function(t){var e=new mv;return e.Parent=this,e.optionName=t,this.Kids.push(e),S$.call(this.scope,e),e};var I0=function(){qo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Vn.CheckBox.createAppearanceStream()};jl(I0,qo);var qf=function(){cc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,13)},set:function(e){e?this.Ff=lo(this.Ff,13):this.Ff=uo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,21)},set:function(e){e?this.Ff=lo(this.Ff,21):this.Ff=uo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,23)},set:function(e){e?this.Ff=lo(this.Ff,23):this.Ff=uo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,24)},set:function(e){e?this.Ff=lo(this.Ff,24):this.Ff=uo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,25)},set:function(e){e?this.Ff=lo(this.Ff,25):this.Ff=uo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,26)},set:function(e){e?this.Ff=lo(this.Ff,26):this.Ff=uo(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};jl(qf,cc);var N0=function(){qf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ao(this.Ff,14)},set:function(t){t?this.Ff=lo(this.Ff,14):this.Ff=uo(this.Ff,14)}}),this.password=!0};jl(N0,qf);var Vn={CheckBox:{createAppearanceStream:function(){return{N:{On:Vn.CheckBox.YesNormal},D:{On:Vn.CheckBox.YesPushDown,Off:Vn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=V2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Tr(Vn.internal.getWidth(t))+" "+Tr(Vn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Tr(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Pc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Vn.internal.getHeight(t),o=Vn.internal.getWidth(t),a=V2(t,t.caption);return i.push("1 g"),i.push("0 0 "+Tr(o)+" "+Tr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Tr(o-1)+" "+Tr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Tr(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Tr(Vn.internal.getWidth(t))+" "+Tr(Vn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Vn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Vn.RadioButton.Circle.YesNormal,e.D[t]=Vn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Pc(t);e.scope=t.scope;var n=[],r=Vn.internal.getWidth(t)<=Vn.internal.getHeight(t)?Vn.internal.getWidth(t)/4:Vn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Vn.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Nh(Vn.internal.getWidth(t)/2)+" "+Nh(Vn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=[],r=Vn.internal.getWidth(t)<=Vn.internal.getHeight(t)?Vn.internal.getWidth(t)/4:Vn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Vn.internal.Bezier_C).toFixed(5)),o=Number((r*Vn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Nh(Vn.internal.getWidth(t)/2)+" "+Nh(Vn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Nh(Vn.internal.getWidth(t)/2)+" "+Nh(Vn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=[],r=Vn.internal.getWidth(t)<=Vn.internal.getHeight(t)?Vn.internal.getWidth(t)/4:Vn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Vn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Nh(Vn.internal.getWidth(t)/2)+" "+Nh(Vn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Vn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Vn.RadioButton.Cross.YesNormal,e.D[t]=Vn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Pc(t);e.scope=t.scope;var n=[],r=Vn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Tr(Vn.internal.getWidth(t)-2)+" "+Tr(Vn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Tr(r.x1.x)+" "+Tr(r.x1.y)+" m"),n.push(Tr(r.x2.x)+" "+Tr(r.x2.y)+" l"),n.push(Tr(r.x4.x)+" "+Tr(r.x4.y)+" m"),n.push(Tr(r.x3.x)+" "+Tr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=Vn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Tr(Vn.internal.getWidth(t))+" "+Tr(Vn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Tr(Vn.internal.getWidth(t)-2)+" "+Tr(Vn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Tr(n.x1.x)+" "+Tr(n.x1.y)+" m"),r.push(Tr(n.x2.x)+" "+Tr(n.x2.y)+" l"),r.push(Tr(n.x4.x)+" "+Tr(n.x4.y)+" m"),r.push(Tr(n.x3.x)+" "+Tr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Pc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Tr(Vn.internal.getWidth(t))+" "+Tr(Vn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Vn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Vn.internal.getWidth(t),n=Vn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Vn.internal.getWidth=function(t){var e=0;return Ni(t)==="object"&&(e=j4(t.Rect[2])),e},Vn.internal.getHeight=function(t){var e=0;return Ni(t)==="object"&&(e=j4(t.Rect[3])),e};var S$=Gs.addField=function(t){if(C$(this,t),!(t instanceof cc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Gs.AcroFormChoiceField=Jd,Gs.AcroFormListBox=Qd,Gs.AcroFormComboBox=ep,Gs.AcroFormEditBox=O0,Gs.AcroFormButton=qo,Gs.AcroFormPushButton=D0,Gs.AcroFormRadioButton=tp,Gs.AcroFormCheckBox=I0,Gs.AcroFormTextField=qf,Gs.AcroFormPasswordField=N0,Gs.AcroFormAppearance=Vn,Gs.AcroForm={ChoiceField:Jd,ListBox:Qd,ComboBox:ep,EditBox:O0,Button:qo,PushButton:D0,RadioButton:tp,CheckBox:I0,TextField:qf,PasswordField:N0,Appearance:Vn},wr.AcroForm={ChoiceField:Jd,ListBox:Qd,ComboBox:ep,EditBox:O0,Button:qo,PushButton:D0,RadioButton:tp,CheckBox:I0,TextField:qf,PasswordField:N0,Appearance:Vn};wr.AcroForm;function cE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function($,H){var oe,ie,R,j,q,re=e;if((H=H||e)==="RGBA"||$.data!==void 0&&$.data instanceof Uint8ClampedArray&&"height"in $&&"width"in $)return"RGBA";if(J($))for(q in n)for(R=n[q],oe=0;oe<R.length;oe+=1){for(j=!0,ie=0;ie<R[oe].length;ie+=1)if(R[oe][ie]!==void 0&&R[oe][ie]!==$[ie]){j=!1;break}if(j===!0){re=q;break}}else for(q in n)for(R=n[q],oe=0;oe<R.length;oe+=1){for(j=!0,ie=0;ie<R[oe].length;ie+=1)if(R[oe][ie]!==void 0&&R[oe][ie]!==$.charCodeAt(ie)){j=!1;break}if(j===!0){re=q;break}}return re===e&&H!==e&&(re=H),re},i=function $(H){for(var oe=this.internal.write,ie=this.internal.putStream,R=(0,this.internal.getFilters)();R.indexOf("FlateEncode")!==-1;)R.splice(R.indexOf("FlateEncode"),1);H.objectId=this.internal.newObject();var j=[];if(j.push({key:"Type",value:"/XObject"}),j.push({key:"Subtype",value:"/Image"}),j.push({key:"Width",value:H.width}),j.push({key:"Height",value:H.height}),H.colorSpace===T.INDEXED?j.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(H.palette.length/3-1)+" "+("sMask"in H&&H.sMask!==void 0?H.objectId+2:H.objectId+1)+" 0 R]"}):(j.push({key:"ColorSpace",value:"/"+H.colorSpace}),H.colorSpace===T.DEVICE_CMYK&&j.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),j.push({key:"BitsPerComponent",value:H.bitsPerComponent}),"decodeParameters"in H&&H.decodeParameters!==void 0&&j.push({key:"DecodeParms",value:"<<"+H.decodeParameters+">>"}),"transparency"in H&&Array.isArray(H.transparency)){for(var q="",re=0,xe=H.transparency.length;re<xe;re++)q+=H.transparency[re]+" "+H.transparency[re]+" ";j.push({key:"Mask",value:"["+q+"]"})}H.sMask!==void 0&&j.push({key:"SMask",value:H.objectId+1+" 0 R"});var be=H.filter!==void 0?["/"+H.filter]:void 0;if(ie({data:H.data,additionalKeyValues:j,alreadyAppliedFilters:be,objectId:H.objectId}),oe("endobj"),"sMask"in H&&H.sMask!==void 0){var _e="/Predictor "+H.predictor+" /Colors 1 /BitsPerComponent "+H.bitsPerComponent+" /Columns "+H.width,Z={width:H.width,height:H.height,colorSpace:"DeviceGray",bitsPerComponent:H.bitsPerComponent,decodeParameters:_e,data:H.sMask};"filter"in H&&(Z.filter=H.filter),$.call(this,Z)}if(H.colorSpace===T.INDEXED){var ae=this.internal.newObject();ie({data:V(new Uint8Array(H.palette)),objectId:ae}),oe("endobj")}},s=function(){var $=this.internal.collections.addImage_images;for(var H in $)i.call(this,$[H])},o=function(){var $,H=this.internal.collections.addImage_images,oe=this.internal.write;for(var ie in H)oe("/I"+($=H[ie]).index,$.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var $=this.internal.collections.addImage_images;return a.call(this),$},c=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function($){return typeof t["process"+$.toUpperCase()]=="function"},p=function($){return Ni($)==="object"&&$.nodeType===1},y=function($,H){if($.nodeName==="IMG"&&$.hasAttribute("src")){var oe=""+$.getAttribute("src");if(oe.indexOf("data:image/")===0)return bg(unescape(oe).split("base64,").pop());var ie=t.loadFile(oe,!0);if(ie!==void 0)return ie}if($.nodeName==="CANVAS"){if($.width===0||$.height===0)throw new Error("Given canvas must have data. Canvas width: "+$.width+", height: "+$.height);var R;switch(H){case"PNG":R="image/png";break;case"WEBP":R="image/webp";break;case"JPEG":case"JPG":default:R="image/jpeg"}return bg($.toDataURL(R,1).split("base64,").pop())}},m=function($){var H=this.internal.collections.addImage_images;if(H){for(var oe in H)if($===H[oe].alias)return H[oe]}},C=function($,H,oe){return $||H||($=-96,H=-96),$<0&&($=-1*oe.width*72/$/this.internal.scaleFactor),H<0&&(H=-1*oe.height*72/H/this.internal.scaleFactor),$===0&&($=H*oe.width/oe.height),H===0&&(H=$*oe.height/oe.width),[$,H]},S=function($,H,oe,ie,R,j){var q=C.call(this,oe,ie,R),re=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,be=l.call(this);if(oe=q[0],ie=q[1],be[R.index]=R,j){j*=Math.PI/180;var _e=Math.cos(j),Z=Math.sin(j),ae=function(de){return de.toFixed(4)},ce=[ae(_e),ae(Z),ae(-1*Z),ae(_e),0,0,"cm"]}this.internal.write("q"),j?(this.internal.write([1,"0","0",1,re($),xe(H+ie),"cm"].join(" ")),this.internal.write(ce.join(" ")),this.internal.write([re(oe),"0","0",re(ie),"0","0","cm"].join(" "))):this.internal.write([re(oe),"0","0",re(ie),re($),xe(H+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+R.index+" Do"),this.internal.write("Q")},T=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=t.__addimage__.sHashCode=function($){var H,oe,ie=0;if(typeof $=="string")for(oe=$.length,H=0;H<oe;H++)ie=(ie<<5)-ie+$.charCodeAt(H),ie|=0;else if(J($))for(oe=$.byteLength/2,H=0;H<oe;H++)ie=(ie<<5)-ie+$[H],ie|=0;return ie},N=t.__addimage__.validateStringAsBase64=function($){($=$||"").toString().trim();var H=!0;return $.length===0&&(H=!1),$.length%4!=0&&(H=!1),/^[A-Za-z0-9+/]+$/.test($.substr(0,$.length-2))===!1&&(H=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test($.substr(-2))===!1&&(H=!1),H},U=t.__addimage__.extractImageFromDataUrl=function($){var H=($=$||"").split("base64,"),oe=null;if(H.length===2){var ie=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(H[0]);Array.isArray(ie)&&(oe={mimeType:ie[1],charset:ie[2],data:H[1]})}return oe},G=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function($){return G()&&$ instanceof ArrayBuffer};var J=t.__addimage__.isArrayBufferView=function($){return G()&&typeof Uint32Array<"u"&&($ instanceof Int8Array||$ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&$ instanceof Uint8ClampedArray||$ instanceof Int16Array||$ instanceof Uint16Array||$ instanceof Int32Array||$ instanceof Uint32Array||$ instanceof Float32Array||$ instanceof Float64Array)},ee=t.__addimage__.binaryStringToUint8Array=function($){for(var H=$.length,oe=new Uint8Array(H),ie=0;ie<H;ie++)oe[ie]=$.charCodeAt(ie);return oe},V=t.__addimage__.arrayBufferToBinaryString=function($){for(var H="",oe=J($)?$:new Uint8Array($),ie=0;ie<oe.length;ie+=8192)H+=String.fromCharCode.apply(null,oe.subarray(ie,ie+8192));return H};t.addImage=function(){var $,H,oe,ie,R,j,q,re,xe;if(typeof arguments[1]=="number"?(H=e,oe=arguments[1],ie=arguments[2],R=arguments[3],j=arguments[4],q=arguments[5],re=arguments[6],xe=arguments[7]):(H=arguments[1],oe=arguments[2],ie=arguments[3],R=arguments[4],j=arguments[5],q=arguments[6],re=arguments[7],xe=arguments[8]),Ni($=arguments[0])==="object"&&!p($)&&"imageData"in $){var be=$;$=be.imageData,H=be.format||H||e,oe=be.x||oe||0,ie=be.y||ie||0,R=be.w||be.width||R,j=be.h||be.height||j,q=be.alias||q,re=be.compression||re,xe=be.rotation||be.angle||xe}var _e=this.internal.getFilters();if(re===void 0&&_e.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(oe)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var Z=K.call(this,$,H,q,re);return S.call(this,oe,ie,R,j,Z,xe),this};var K=function($,H,oe,ie){var R,j,q;if(typeof $=="string"&&r($)===e){$=unescape($);var re=pe($,!1);(re!==""||(re=t.loadFile($,!0))!==void 0)&&($=re)}if(p($)&&($=y($,H)),H=r($,H),!f(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(((q=oe)==null||q.length===0)&&(oe=function(xe){return typeof xe=="string"||J(xe)?D(xe):J(xe.data)?D(xe.data):null}($)),(R=m.call(this,oe))||(G()&&($ instanceof Uint8Array||H==="RGBA"||(j=$,$=ee($))),R=this["process"+H.toUpperCase()]($,c.call(this),oe,function(xe){return xe&&typeof xe=="string"&&(xe=xe.toUpperCase()),xe in t.image_compression?xe:O.NONE}(ie),j)),!R)throw new Error("An unknown error occurred whilst processing the image.");return R},pe=t.__addimage__.convertBase64ToBinaryString=function($,H){var oe;H=typeof H!="boolean"||H;var ie,R="";if(typeof $=="string"){ie=(oe=U($))!==null?oe.data:$;try{R=bg(ie)}catch(j){if(H)throw N(ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+j.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return R};t.getImageProperties=function($){var H,oe,ie="";if(p($)&&($=y($)),typeof $=="string"&&r($)===e&&((ie=pe($,!1))===""&&(ie=t.loadFile($)||""),$=ie),oe=r($),!f(oe))throw new Error("addImage does not support files of type '"+oe+"', please ensure that a plugin for '"+oe+"' support is added.");if(!G()||$ instanceof Uint8Array||($=ee($)),!(H=this["process"+oe.toUpperCase()]($)))throw new Error("An unknown error occurred whilst processing the image");return H.fileType=oe,H}})(wr.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};wr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,f=!1,p=0;p<c.length&&!f;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var m=this.internal.pdfEscape,C=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),O=this.internal.getEncryptor(S.objId),D=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(O(r.contents))+")",s+=" /Popup "+T.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(O(D))+") >>",S.content=s;var N=S.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+N,r.open&&(s+=" /Open true"),s+=" >>",T.content=s,this.internal.write(S.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var U=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(C(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+U+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var G=this.annotations._nameMap[r.options.name];r.options.pageNumber=G.page,r.options.top=G.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(C(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var J=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+J+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var f=this.splitTextToSize(n,a).length;o=Math.ceil(c*f)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(wr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(S){return e[S.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},a=t.__arabicParser__.isArabicEndLetter=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(S){return o(S)&&i.indexOf(S.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(S){return o(S)&&s(S)&&e[S.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(S){var T=0,O=n,D="",N=0;for(T=0;T<S.length;T+=1)O[S.charCodeAt(T)]!==void 0?(N++,typeof(O=O[S.charCodeAt(T)])=="number"&&(D+=String.fromCharCode(O),O=n,N=0),T===S.length-1&&(O=n,D+=S.charAt(T-(N-1)),T-=N-1,N=0)):(O=n,D+=S.charAt(T-N),T-=N,N=0);return D};t.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&r[S.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(S,T,O){return o(S)?s(S)===!1?-1:!c(S)||!o(T)&&!o(O)||!o(O)&&a(T)||a(S)&&!o(T)||a(S)&&l(T)||a(S)&&a(T)?0:f(S)&&o(T)&&!a(T)&&o(O)&&c(O)?3:a(S)||!o(O)?1:2:-1},m=function(S){var T=0,O=0,D=0,N="",U="",G="",J=(S=S||"").split("\\s+"),ee=[];for(T=0;T<J.length;T+=1){for(ee.push(""),O=0;O<J[T].length;O+=1)N=J[T][O],U=J[T][O-1],G=J[T][O+1],o(N)?(D=y(N,U,G),ee[T]+=D!==-1?String.fromCharCode(e[N.charCodeAt(0)][D]):N):ee[T]+=N;ee[T]=p(ee[T])}return ee.join(" ")},C=t.__arabicParser__.processArabic=t.processArabic=function(){var S,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,O=[];if(Array.isArray(T)){var D=0;for(O=[],D=0;D<T.length;D+=1)Array.isArray(T[D])?O.push([m(T[D][0]),T[D][1],T[D][2]]):O.push([m(T[D])]);S=O}else S=m(T);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};t.events.push(["preProcessText",C])}(wr.API),wr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(wr.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(S){l=S}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(S){f=S}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(S){p=S}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var C=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return C},set:function(S){C=S}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var f=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,m=0,C=0,S=0,T=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var O=c.maxWidth;O>0?typeof l=="string"?l=this.splitTextToSize(l,O):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,U){return N.concat(T.splitTextToSize(U,O))},[])):l=Array.isArray(l)?l:[l];for(var D=0;D<l.length;D++)m<(S=this.getStringUnitWidth(l[D],{font:p})*f)&&(m=S);return m!==0&&(C=l.length),{w:m/=y,h:Math.max((C*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,f,p,y){if(r.call(this),!f)throw new Error("No data for PDF table.");var m,C,S,T,O=[],D=[],N=[],U={},G={},J=[],ee=[],V=(y=y||{}).autoSize||!1,K=y.printHeaders!==!1,pe=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,$=y.margins||Object.assign({width:this.getPageWidth()},e),H=typeof y.padding=="number"?y.padding:3,oe=y.headerBackgroundColor||"#c8c8c8",ie=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=K,this.internal.__cell__.margins=$,this.internal.__cell__.table_font_size=pe,this.internal.__cell__.padding=H,this.internal.__cell__.headerBackgroundColor=oe,this.internal.__cell__.headerTextColor=ie,this.setFontSize(pe),p==null)D=O=Object.keys(f[0]),N=O.map(function(){return"left"});else if(Array.isArray(p)&&Ni(p[0])==="object")for(O=p.map(function(be){return be.name}),D=p.map(function(be){return be.prompt||be.name||""}),N=p.map(function(be){return be.align||"left"}),m=0;m<p.length;m+=1)G[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=O=p,N=O.map(function(){return"left"}));if(V||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<O.length;m+=1){for(U[T=O[m]]=f.map(function(be){return be[T]}),this.setFont(void 0,"bold"),J.push(this.getTextDimensions(D[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),C=U[T],this.setFont(void 0,"normal"),S=0;S<C.length;S+=1)J.push(this.getTextDimensions(C[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);G[T]=Math.max.apply(null,J)+H+H,J=[]}if(K){var R={};for(m=0;m<O.length;m+=1)R[O[m]]={},R[O[m]].text=D[m],R[O[m]].align=N[m];var j=a.call(this,R,G);ee=O.map(function(be){return new s(l,c,G[be],j,R[be].text,void 0,R[be].align)}),this.setTableHeaderRow(ee),this.printHeaderRow(1,!1)}var q=p.reduce(function(be,_e){return be[_e.name]=_e.align,be},{});for(m=0;m<f.length;m+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:m,data:f[m]},this);var re=a.call(this,f[m],G);for(S=0;S<O.length;S+=1){var xe=f[m][O[S]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:m,col:S,data:xe},this),o.call(this,new s(l,c,G[O[S]],re,xe,m+2,q[O[S]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(m){var C=l[m];return this.splitTextToSize(C.hasOwnProperty("text")?C.text:C,c[m]-f-f)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/y+f+f},this).reduce(function(m,C){return Math.max(m,C)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){f=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=l;var C=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(C)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),n=!1}}(wr.API);var hE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},fE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],H2=cE(fE),dE=[100,200,300,400,500,600,700,800,900],E$=cE(dE);function W2(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return hE[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof H2[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function z4(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var P$={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},U4={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function $4(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function k$(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},P$,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=W2(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+$4(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var f=H2[l],p=f<=H2.normal?-1:1,y=z4(c,fE,f,p);if(!y)throw new Error("Could not find a matching font-stretch value for "+l);return y}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var f=hE[l],p=0;p<f.length;++p)if(c[f[p]])return c[f[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var f=E$[l],p=z4(c,dE,f,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+$4(s)+"'.");return o}function V4(t){return t.trimLeft()}function M$(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function A$(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Qm,H4,W4,P1=["times"];(function(t){var e,n,r,i,s,o,a,l,c,f=function(Z){return Z=Z||{},this.isStrokeTransparent=Z.isStrokeTransparent||!1,this.strokeOpacity=Z.strokeOpacity||1,this.strokeStyle=Z.strokeStyle||"#000000",this.fillStyle=Z.fillStyle||"#000000",this.isFillTransparent=Z.isFillTransparent||!1,this.fillOpacity=Z.fillOpacity||1,this.font=Z.font||"10px sans-serif",this.textBaseline=Z.textBaseline||"alphabetic",this.textAlign=Z.textAlign||"left",this.lineWidth=Z.lineWidth||1,this.lineJoin=Z.lineJoin||"miter",this.lineCap=Z.lineCap||"butt",this.path=Z.path||[],this.transform=Z.transform!==void 0?Z.transform.clone():new l,this.globalCompositeOperation=Z.globalCompositeOperation||"normal",this.globalAlpha=Z.globalAlpha||1,this.clip_path=Z.clip_path||[],this.currentPoint=Z.currentPoint||new o,this.miterLimit=Z.miterLimit||10,this.lastPoint=Z.lastPoint||new o,this.lineDashOffset=Z.lineDashOffset||0,this.lineDash=Z.lineDash||[],this.margin=Z.margin||[0,0,0,0],this.prevPageLastElemOffset=Z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Z.ignoreClearRect!="boolean"||Z.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new f}]);var p=function(Z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ae=Z;Object.defineProperty(this,"pdf",{get:function(){return ae}});var ce=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ce},set:function(ue){ce=!!ue}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(ue){de=!!ue}});var ge=0;Object.defineProperty(this,"posX",{get:function(){return ge},set:function(ue){isNaN(ue)||(ge=ue)}});var Ee=0;Object.defineProperty(this,"posY",{get:function(){return Ee},set:function(ue){isNaN(ue)||(Ee=ue)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ue){var Q;typeof ue=="number"?Q=[ue,ue,ue,ue]:((Q=new Array(4))[0]=ue[0],Q[1]=ue.length>=2?ue[1]:Q[0],Q[2]=ue.length>=3?ue[2]:Q[0],Q[3]=ue.length>=4?ue[3]:Q[1]),c.margin=Q}});var Ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ue},set:function(ue){Ue=ue}});var Ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ne},set:function(ue){Ne=ue}});var rt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return rt},set:function(ue){rt=ue}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ue){ue instanceof f&&(c=ue)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ue){c.path=ue}});var gt=[];Object.defineProperty(this,"ctxStack",{get:function(){return gt},set:function(ue){gt=ue}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ue){var Q;Q=y(ue),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ue){var Q=y(ue);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ue){["butt","round","square"].indexOf(ue)!==-1&&(this.ctx.lineCap=ue,this.pdf.setLineCap(ue))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ue){isNaN(ue)||(this.ctx.lineWidth=ue,this.pdf.setLineWidth(ue))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ue){["bevel","round","miter"].indexOf(ue)!==-1&&(this.ctx.lineJoin=ue,this.pdf.setLineJoin(ue))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ue){isNaN(ue)||(this.ctx.miterLimit=ue,this.pdf.setMiterLimit(ue))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ue){this.ctx.textBaseline=ue}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ue){["right","end","center","left","start"].indexOf(ue)!==-1&&(this.ctx.textAlign=ue)}});var _t=null;function le(ue,Q){if(_t===null){var ke=function(Ve){var Xe=[];return Object.keys(Ve).forEach(function(lt){Ve[lt].forEach(function(at){var pt=null;switch(at){case"bold":pt={family:lt,weight:"bold"};break;case"italic":pt={family:lt,style:"italic"};break;case"bolditalic":pt={family:lt,weight:"bold",style:"italic"};break;case"":case"normal":pt={family:lt}}pt!==null&&(pt.ref={name:lt,style:at},Xe.push(pt))})}),Xe}(ue.getFontList());_t=function(Ve){for(var Xe={},lt=0;lt<Ve.length;++lt){var at=W2(Ve[lt]),pt=at.family,jt=at.stretch,Bt=at.style,qt=at.weight;Xe[pt]=Xe[pt]||{},Xe[pt][jt]=Xe[pt][jt]||{},Xe[pt][jt][Bt]=Xe[pt][jt][Bt]||{},Xe[pt][jt][Bt][qt]=at}return Xe}(ke.concat(Q))}return _t}var se=null;Object.defineProperty(this,"fontFaces",{get:function(){return se},set:function(ue){_t=null,se=ue}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ue){var Q;if(this.ctx.font=ue,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ue))!==null){var ke=Q[1],Ve=(Q[2],Q[3]),Xe=Q[4],lt=(Q[5],Q[6]),at=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(at==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:at==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var pt=function(Ye){var st,Qe,$t=[],Yt=Ye.trim();if(Yt==="")return P1;if(Yt in U4)return[U4[Yt]];for(;Yt!=="";){switch(Qe=null,st=(Yt=V4(Yt)).charAt(0)){case'"':case"'":Qe=M$(Yt.substring(1),st);break;default:Qe=A$(Yt)}if(Qe===null||($t.push(Qe[0]),(Yt=V4(Qe[1]))!==""&&Yt.charAt(0)!==","))return P1;Yt=Yt.replace(/^,/,"")}return $t}(lt);if(this.fontFaces){var jt=k$(le(this.pdf,this.fontFaces),pt.map(function(Ye){return{family:Ye,stretch:"normal",weight:Ve,style:ke}}));this.pdf.setFont(jt.ref.name,jt.ref.style)}else{var Bt="";(Ve==="bold"||parseInt(Ve,10)>=700||ke==="bold")&&(Bt="bold"),ke==="italic"&&(Bt+="italic"),Bt.length===0&&(Bt="normal");for(var qt="",Jt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},gn=0;gn<pt.length;gn++){if(this.pdf.internal.getFont(pt[gn],Bt,{noFallback:!0,disableWarning:!0})!==void 0){qt=pt[gn];break}if(Bt==="bolditalic"&&this.pdf.internal.getFont(pt[gn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qt=pt[gn],Bt="bold";else if(this.pdf.internal.getFont(pt[gn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qt=pt[gn],Bt="normal";break}}if(qt===""){for(var Cn=0;Cn<pt.length;Cn++)if(Jt[pt[Cn]]){qt=Jt[pt[Cn]];break}}qt=qt===""?"Times":qt,this.pdf.setFont(qt,Bt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ue){this.ctx.globalCompositeOperation=ue}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ue){this.ctx.globalAlpha=ue}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ue){this.ctx.lineDashOffset=ue,_e.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ue){this.ctx.lineDash=ue,_e.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ue){this.ctx.ignoreClearRect=!!ue}})};p.prototype.setLineDash=function(Z){this.lineDash=Z},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){U.call(this,"fill",!1)},p.prototype.stroke=function(){U.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(Z,ae){if(isNaN(Z)||isNaN(ae))throw Hi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ce=this.ctx.transform.applyToPoint(new o(Z,ae));this.path.push({type:"mt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(Z,ae)},p.prototype.closePath=function(){var Z=new o(0,0),ae=0;for(ae=this.path.length-1;ae!==-1;ae--)if(this.path[ae].type==="begin"&&Ni(this.path[ae+1])==="object"&&typeof this.path[ae+1].x=="number"){Z=new o(this.path[ae+1].x,this.path[ae+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(Z.x,Z.y)},p.prototype.lineTo=function(Z,ae){if(isNaN(Z)||isNaN(ae))throw Hi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ce=this.ctx.transform.applyToPoint(new o(Z,ae));this.path.push({type:"lt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),U.call(this,null,!0)},p.prototype.quadraticCurveTo=function(Z,ae,ce,de){if(isNaN(ce)||isNaN(de)||isNaN(Z)||isNaN(ae))throw Hi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ge=this.ctx.transform.applyToPoint(new o(ce,de)),Ee=this.ctx.transform.applyToPoint(new o(Z,ae));this.path.push({type:"qct",x1:Ee.x,y1:Ee.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new o(ge.x,ge.y)},p.prototype.bezierCurveTo=function(Z,ae,ce,de,ge,Ee){if(isNaN(ge)||isNaN(Ee)||isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(de))throw Hi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ue=this.ctx.transform.applyToPoint(new o(ge,Ee)),Ne=this.ctx.transform.applyToPoint(new o(Z,ae)),rt=this.ctx.transform.applyToPoint(new o(ce,de));this.path.push({type:"bct",x1:Ne.x,y1:Ne.y,x2:rt.x,y2:rt.y,x:Ue.x,y:Ue.y}),this.ctx.lastPoint=new o(Ue.x,Ue.y)},p.prototype.arc=function(Z,ae,ce,de,ge,Ee){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(de)||isNaN(ge))throw Hi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ee=!!Ee,!this.ctx.transform.isIdentity){var Ue=this.ctx.transform.applyToPoint(new o(Z,ae));Z=Ue.x,ae=Ue.y;var Ne=this.ctx.transform.applyToPoint(new o(0,ce)),rt=this.ctx.transform.applyToPoint(new o(0,0));ce=Math.sqrt(Math.pow(Ne.x-rt.x,2)+Math.pow(Ne.y-rt.y,2))}Math.abs(ge-de)>=2*Math.PI&&(de=0,ge=2*Math.PI),this.path.push({type:"arc",x:Z,y:ae,radius:ce,startAngle:de,endAngle:ge,counterclockwise:Ee})},p.prototype.arcTo=function(Z,ae,ce,de,ge){throw new Error("arcTo not implemented.")},p.prototype.rect=function(Z,ae,ce,de){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(de))throw Hi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Z,ae),this.lineTo(Z+ce,ae),this.lineTo(Z+ce,ae+de),this.lineTo(Z,ae+de),this.lineTo(Z,ae),this.lineTo(Z+ce,ae),this.lineTo(Z,ae)},p.prototype.fillRect=function(Z,ae,ce,de){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(de))throw Hi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ge={};this.lineCap!=="butt"&&(ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Z,ae,ce,de),this.fill(),ge.hasOwnProperty("lineCap")&&(this.lineCap=ge.lineCap),ge.hasOwnProperty("lineJoin")&&(this.lineJoin=ge.lineJoin)}},p.prototype.strokeRect=function(Z,ae,ce,de){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(de))throw Hi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");C.call(this)||(this.beginPath(),this.rect(Z,ae,ce,de),this.stroke())},p.prototype.clearRect=function(Z,ae,ce,de){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(de))throw Hi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Z,ae,ce,de))},p.prototype.save=function(Z){Z=typeof Z!="boolean"||Z;for(var ae=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("q");if(this.pdf.setPage(ae),Z){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},p.prototype.restore=function(Z){Z=typeof Z!="boolean"||Z;for(var ae=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("Q");this.pdf.setPage(ae),Z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(Z){var ae,ce,de,ge;if(Z.isCanvasGradient===!0&&(Z=Z.getColor()),!Z)return{r:0,g:0,b:0,a:0,style:Z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Z))ae=0,ce=0,de=0,ge=0;else{var Ee=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Z);if(Ee!==null)ae=parseInt(Ee[1]),ce=parseInt(Ee[2]),de=parseInt(Ee[3]),ge=1;else if((Ee=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Z))!==null)ae=parseInt(Ee[1]),ce=parseInt(Ee[2]),de=parseInt(Ee[3]),ge=parseFloat(Ee[4]);else{if(ge=1,typeof Z=="string"&&Z.charAt(0)!=="#"){var Ue=new iE(Z);Z=Ue.ok?Ue.toHex():"#000000"}Z.length===4?(ae=Z.substring(1,2),ae+=ae,ce=Z.substring(2,3),ce+=ce,de=Z.substring(3,4),de+=de):(ae=Z.substring(1,3),ce=Z.substring(3,5),de=Z.substring(5,7)),ae=parseInt(ae,16),ce=parseInt(ce,16),de=parseInt(de,16)}}return{r:ae,g:ce,b:de,a:ge,style:Z}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},C=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(Z,ae,ce,de){if(isNaN(ae)||isNaN(ce)||typeof Z!="string")throw Hi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!m.call(this)){var ge=re(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;H.call(this,{text:Z,x:ae,y:ce,scale:Ee,angle:ge,align:this.textAlign,maxWidth:de})}},p.prototype.strokeText=function(Z,ae,ce,de){if(isNaN(ae)||isNaN(ce)||typeof Z!="string")throw Hi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!C.call(this)){de=isNaN(de)?void 0:de;var ge=re(this.ctx.transform.rotation),Ee=this.ctx.transform.scaleX;H.call(this,{text:Z,x:ae,y:ce,scale:Ee,renderingMode:"stroke",angle:ge,align:this.textAlign,maxWidth:de})}},p.prototype.measureText=function(Z){if(typeof Z!="string")throw Hi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ae=this.pdf,ce=this.pdf.internal.scaleFactor,de=ae.internal.getFontSize(),ge=ae.getStringUnitWidth(Z)*de/ae.internal.scaleFactor,Ee=function(Ue){var Ne=(Ue=Ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ne}}),this};return new Ee({width:ge*=Math.round(96*ce/72*1e4)/1e4})},p.prototype.scale=function(Z,ae){if(isNaN(Z)||isNaN(ae))throw Hi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ce=new l(Z,0,0,ae,0,0);this.ctx.transform=this.ctx.transform.multiply(ce)},p.prototype.rotate=function(Z){if(isNaN(Z))throw Hi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ae=new l(Math.cos(Z),Math.sin(Z),-Math.sin(Z),Math.cos(Z),0,0);this.ctx.transform=this.ctx.transform.multiply(ae)},p.prototype.translate=function(Z,ae){if(isNaN(Z)||isNaN(ae))throw Hi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ce=new l(1,0,0,1,Z,ae);this.ctx.transform=this.ctx.transform.multiply(ce)},p.prototype.transform=function(Z,ae,ce,de,ge,Ee){if(isNaN(Z)||isNaN(ae)||isNaN(ce)||isNaN(de)||isNaN(ge)||isNaN(Ee))throw Hi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ue=new l(Z,ae,ce,de,ge,Ee);this.ctx.transform=this.ctx.transform.multiply(Ue)},p.prototype.setTransform=function(Z,ae,ce,de,ge,Ee){Z=isNaN(Z)?1:Z,ae=isNaN(ae)?0:ae,ce=isNaN(ce)?0:ce,de=isNaN(de)?1:de,ge=isNaN(ge)?0:ge,Ee=isNaN(Ee)?0:Ee,this.ctx.transform=new l(Z,ae,ce,de,ge,Ee)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(Z,ae,ce,de,ge,Ee,Ue,Ne,rt){var gt=this.pdf.getImageProperties(Z),_t=1,le=1,se=1,ue=1;de!==void 0&&Ne!==void 0&&(se=Ne/de,ue=rt/ge,_t=gt.width/de*Ne/de,le=gt.height/ge*rt/ge),Ee===void 0&&(Ee=ae,Ue=ce,ae=0,ce=0),de!==void 0&&Ne===void 0&&(Ne=de,rt=ge),de===void 0&&Ne===void 0&&(Ne=gt.width,rt=gt.height);for(var Q,ke=this.ctx.transform.decompose(),Ve=re(ke.rotate.shx),Xe=new l,lt=(Xe=(Xe=(Xe=Xe.multiply(ke.translate)).multiply(ke.skew)).multiply(ke.scale)).applyToRectangle(new a(Ee-ae*se,Ue-ce*ue,de*_t,ge*le)),at=T.call(this,lt),pt=[],jt=0;jt<at.length;jt+=1)pt.indexOf(at[jt])===-1&&pt.push(at[jt]);if(N(pt),this.autoPaging)for(var Bt=pt[0],qt=pt[pt.length-1],Jt=Bt;Jt<qt+1;Jt++){this.pdf.setPage(Jt);var gn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Cn=Jt===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=Jt===1?0:Ye+(Jt-2)*st;if(this.ctx.clip_path.length!==0){var $t=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Q,this.posX+this.margin[3],-Qe+Cn+this.ctx.prevPageLastElemOffset),G.call(this,"fill",!0),this.path=$t}var Yt=JSON.parse(JSON.stringify(lt));Yt=D([Yt],this.posX+this.margin[3],-Qe+Cn+this.ctx.prevPageLastElemOffset)[0];var wn=(Jt>Bt||Jt<qt)&&S.call(this);wn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gn,st,null).clip().discardPath()),this.pdf.addImage(Z,"JPEG",Yt.x,Yt.y,Yt.w,Yt.h,null,null,Ve),wn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Z,"JPEG",lt.x,lt.y,lt.w,lt.h,null,null,Ve)};var T=function(Z,ae,ce){var de=[];ae=ae||this.pdf.internal.pageSize.width,ce=ce||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ge=this.posY+this.ctx.prevPageLastElemOffset;switch(Z.type){default:case"mt":case"lt":de.push(Math.floor((Z.y+ge)/ce)+1);break;case"arc":de.push(Math.floor((Z.y+ge-Z.radius)/ce)+1),de.push(Math.floor((Z.y+ge+Z.radius)/ce)+1);break;case"qct":var Ee=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x,Z.y);de.push(Math.floor((Ee.y+ge)/ce)+1),de.push(Math.floor((Ee.y+Ee.h+ge)/ce)+1);break;case"bct":var Ue=be(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x2,Z.y2,Z.x,Z.y);de.push(Math.floor((Ue.y+ge)/ce)+1),de.push(Math.floor((Ue.y+Ue.h+ge)/ce)+1);break;case"rect":de.push(Math.floor((Z.y+ge)/ce)+1),de.push(Math.floor((Z.y+Z.h+ge)/ce)+1)}for(var Ne=0;Ne<de.length;Ne+=1)for(;this.pdf.internal.getNumberOfPages()<de[Ne];)O.call(this);return de},O=function(){var Z=this.fillStyle,ae=this.strokeStyle,ce=this.font,de=this.lineCap,ge=this.lineWidth,Ee=this.lineJoin;this.pdf.addPage(),this.fillStyle=Z,this.strokeStyle=ae,this.font=ce,this.lineCap=de,this.lineWidth=ge,this.lineJoin=Ee},D=function(Z,ae,ce){for(var de=0;de<Z.length;de++)switch(Z[de].type){case"bct":Z[de].x2+=ae,Z[de].y2+=ce;case"qct":Z[de].x1+=ae,Z[de].y1+=ce;case"mt":case"lt":case"arc":default:Z[de].x+=ae,Z[de].y+=ce}return Z},N=function(Z){return Z.sort(function(ae,ce){return ae-ce})},U=function(Z,ae){for(var ce,de,ge=this.fillStyle,Ee=this.strokeStyle,Ue=this.lineCap,Ne=this.lineWidth,rt=Math.abs(Ne*this.ctx.transform.scaleX),gt=this.lineJoin,_t=JSON.parse(JSON.stringify(this.path)),le=JSON.parse(JSON.stringify(this.path)),se=[],ue=0;ue<le.length;ue++)if(le[ue].x!==void 0)for(var Q=T.call(this,le[ue]),ke=0;ke<Q.length;ke+=1)se.indexOf(Q[ke])===-1&&se.push(Q[ke]);for(var Ve=0;Ve<se.length;Ve++)for(;this.pdf.internal.getNumberOfPages()<se[Ve];)O.call(this);if(N(se),this.autoPaging)for(var Xe=se[0],lt=se[se.length-1],at=Xe;at<lt+1;at++){this.pdf.setPage(at),this.fillStyle=ge,this.strokeStyle=Ee,this.lineCap=Ue,this.lineWidth=rt,this.lineJoin=gt;var pt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],jt=at===1?this.posY+this.margin[0]:this.margin[0],Bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Jt=at===1?0:Bt+(at-2)*qt;if(this.ctx.clip_path.length!==0){var gn=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ce,this.posX+this.margin[3],-Jt+jt+this.ctx.prevPageLastElemOffset),G.call(this,Z,!0),this.path=gn}if(de=JSON.parse(JSON.stringify(_t)),this.path=D(de,this.posX+this.margin[3],-Jt+jt+this.ctx.prevPageLastElemOffset),ae===!1||at===0){var Cn=(at>Xe||at<lt)&&S.call(this);Cn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,qt,null).clip().discardPath()),G.call(this,Z,ae),Cn&&this.pdf.restoreGraphicsState()}this.lineWidth=Ne}else this.lineWidth=rt,G.call(this,Z,ae),this.lineWidth=Ne;this.path=_t},G=function(Z,ae){if((Z!=="stroke"||ae||!C.call(this))&&(Z==="stroke"||ae||!m.call(this))){for(var ce,de,ge=[],Ee=this.path,Ue=0;Ue<Ee.length;Ue++){var Ne=Ee[Ue];switch(Ne.type){case"begin":ge.push({begin:!0});break;case"close":ge.push({close:!0});break;case"mt":ge.push({start:Ne,deltas:[],abs:[]});break;case"lt":var rt=ge.length;if(Ee[Ue-1]&&!isNaN(Ee[Ue-1].x)&&(ce=[Ne.x-Ee[Ue-1].x,Ne.y-Ee[Ue-1].y],rt>0)){for(;rt>=0;rt--)if(ge[rt-1].close!==!0&&ge[rt-1].begin!==!0){ge[rt-1].deltas.push(ce),ge[rt-1].abs.push(Ne);break}}break;case"bct":ce=[Ne.x1-Ee[Ue-1].x,Ne.y1-Ee[Ue-1].y,Ne.x2-Ee[Ue-1].x,Ne.y2-Ee[Ue-1].y,Ne.x-Ee[Ue-1].x,Ne.y-Ee[Ue-1].y],ge[ge.length-1].deltas.push(ce);break;case"qct":var gt=Ee[Ue-1].x+2/3*(Ne.x1-Ee[Ue-1].x),_t=Ee[Ue-1].y+2/3*(Ne.y1-Ee[Ue-1].y),le=Ne.x+2/3*(Ne.x1-Ne.x),se=Ne.y+2/3*(Ne.y1-Ne.y),ue=Ne.x,Q=Ne.y;ce=[gt-Ee[Ue-1].x,_t-Ee[Ue-1].y,le-Ee[Ue-1].x,se-Ee[Ue-1].y,ue-Ee[Ue-1].x,Q-Ee[Ue-1].y],ge[ge.length-1].deltas.push(ce);break;case"arc":ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(ge[ge.length-1].abs)&&ge[ge.length-1].abs.push(Ne)}}de=ae?null:Z==="stroke"?"stroke":"fill";for(var ke=!1,Ve=0;Ve<ge.length;Ve++)if(ge[Ve].arc)for(var Xe=ge[Ve].abs,lt=0;lt<Xe.length;lt++){var at=Xe[lt];at.type==="arc"?V.call(this,at.x,at.y,at.radius,at.startAngle,at.endAngle,at.counterclockwise,void 0,ae,!ke):oe.call(this,at.x,at.y),ke=!0}else if(ge[Ve].close===!0)this.pdf.internal.out("h"),ke=!1;else if(ge[Ve].begin!==!0){var pt=ge[Ve].start.x,jt=ge[Ve].start.y;ie.call(this,ge[Ve].deltas,pt,jt),ke=!0}de&&K.call(this,de),ae&&pe.call(this)}},J=function(Z){var ae=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ce=ae*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Z-ce;case"top":return Z+ae-ce;case"hanging":return Z+ae-2*ce;case"middle":return Z+ae/2-ce;case"ideographic":return Z;case"alphabetic":default:return Z}},ee=function(Z){return Z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var Z=function(){};return Z.colorStops=[],Z.addColorStop=function(ae,ce){this.colorStops.push([ae,ce])},Z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Z.isCanvasGradient=!0,Z},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var V=function(Z,ae,ce,de,ge,Ee,Ue,Ne,rt){for(var gt=j.call(this,ce,de,ge,Ee),_t=0;_t<gt.length;_t++){var le=gt[_t];_t===0&&(rt?$.call(this,le.x1+Z,le.y1+ae):oe.call(this,le.x1+Z,le.y1+ae)),R.call(this,Z,ae,le.x2,le.y2,le.x3,le.y3,le.x4,le.y4)}Ne?pe.call(this):K.call(this,Ue)},K=function(Z){switch(Z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},pe=function(){this.pdf.clip(),this.pdf.discardPath()},$=function(Z,ae){this.pdf.internal.out(n(Z)+" "+r(ae)+" m")},H=function(Z){var ae;switch(Z.align){case"right":case"end":ae="right";break;case"center":ae="center";break;case"left":case"start":default:ae="left"}var ce=this.pdf.getTextDimensions(Z.text),de=J.call(this,Z.y),ge=ee.call(this,de)-ce.h,Ee=this.ctx.transform.applyToPoint(new o(Z.x,de)),Ue=this.ctx.transform.decompose(),Ne=new l;Ne=(Ne=(Ne=Ne.multiply(Ue.translate)).multiply(Ue.skew)).multiply(Ue.scale);for(var rt,gt,_t,le=this.ctx.transform.applyToRectangle(new a(Z.x,de,ce.w,ce.h)),se=Ne.applyToRectangle(new a(Z.x,ge,ce.w,ce.h)),ue=T.call(this,se),Q=[],ke=0;ke<ue.length;ke+=1)Q.indexOf(ue[ke])===-1&&Q.push(ue[ke]);if(N(Q),this.autoPaging)for(var Ve=Q[0],Xe=Q[Q.length-1],lt=Ve;lt<Xe+1;lt++){this.pdf.setPage(lt);var at=lt===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],jt=this.pdf.internal.pageSize.height-this.margin[2],Bt=jt-this.margin[0],qt=this.pdf.internal.pageSize.width-this.margin[1],Jt=qt-this.margin[3],gn=lt===1?0:pt+(lt-2)*Bt;if(this.ctx.clip_path.length!==0){var Cn=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(rt,this.posX+this.margin[3],-1*gn+at),G.call(this,"fill",!0),this.path=Cn}var Ye=D([JSON.parse(JSON.stringify(se))],this.posX+this.margin[3],-gn+at+this.ctx.prevPageLastElemOffset)[0];Z.scale>=.01&&(gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(gt*Z.scale),_t=this.lineWidth,this.lineWidth=_t*Z.scale);var st=this.autoPaging!=="text";if(st||Ye.y+Ye.h<=jt){if(st||Ye.y>=at&&Ye.x<=qt){var Qe=st?Z.text:this.pdf.splitTextToSize(Z.text,Z.maxWidth||qt-Ye.x)[0],$t=D([JSON.parse(JSON.stringify(le))],this.posX+this.margin[3],-gn+at+this.ctx.prevPageLastElemOffset)[0],Yt=st&&(lt>Ve||lt<Xe)&&S.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,Bt,null).clip().discardPath()),this.pdf.text(Qe,$t.x,$t.y,{angle:Z.angle,align:ae,renderingMode:Z.renderingMode}),Yt&&this.pdf.restoreGraphicsState()}}else Ye.y<jt&&(this.ctx.prevPageLastElemOffset+=jt-Ye.y);Z.scale>=.01&&(this.pdf.setFontSize(gt),this.lineWidth=_t)}else Z.scale>=.01&&(gt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(gt*Z.scale),_t=this.lineWidth,this.lineWidth=_t*Z.scale),this.pdf.text(Z.text,Ee.x+this.posX,Ee.y+this.posY,{angle:Z.angle,align:ae,renderingMode:Z.renderingMode,maxWidth:Z.maxWidth}),Z.scale>=.01&&(this.pdf.setFontSize(gt),this.lineWidth=_t)},oe=function(Z,ae,ce,de){ce=ce||0,de=de||0,this.pdf.internal.out(n(Z+ce)+" "+r(ae+de)+" l")},ie=function(Z,ae,ce){return this.pdf.lines(Z,ae,ce,null,null)},R=function(Z,ae,ce,de,ge,Ee,Ue,Ne){this.pdf.internal.out([e(i(ce+Z)),e(s(de+ae)),e(i(ge+Z)),e(s(Ee+ae)),e(i(Ue+Z)),e(s(Ne+ae)),"c"].join(" "))},j=function(Z,ae,ce,de){for(var ge=2*Math.PI,Ee=Math.PI/2;ae>ce;)ae-=ge;var Ue=Math.abs(ce-ae);Ue<ge&&de&&(Ue=ge-Ue);for(var Ne=[],rt=de?-1:1,gt=ae;Ue>1e-5;){var _t=gt+rt*Math.min(Ue,Ee);Ne.push(q.call(this,Z,gt,_t)),Ue-=Math.abs(_t-gt),gt=_t}return Ne},q=function(Z,ae,ce){var de=(ce-ae)/2,ge=Z*Math.cos(de),Ee=Z*Math.sin(de),Ue=ge,Ne=-Ee,rt=Ue*Ue+Ne*Ne,gt=rt+Ue*ge+Ne*Ee,_t=4/3*(Math.sqrt(2*rt*gt)-gt)/(Ue*Ee-Ne*ge),le=Ue-_t*Ne,se=Ne+_t*Ue,ue=le,Q=-se,ke=de+ae,Ve=Math.cos(ke),Xe=Math.sin(ke);return{x1:Z*Math.cos(ae),y1:Z*Math.sin(ae),x2:le*Ve-se*Xe,y2:le*Xe+se*Ve,x3:ue*Ve-Q*Xe,y3:ue*Xe+Q*Ve,x4:Z*Math.cos(ce),y4:Z*Math.sin(ce)}},re=function(Z){return 180*Z/Math.PI},xe=function(Z,ae,ce,de,ge,Ee){var Ue=Z+.5*(ce-Z),Ne=ae+.5*(de-ae),rt=ge+.5*(ce-ge),gt=Ee+.5*(de-Ee),_t=Math.min(Z,ge,Ue,rt),le=Math.max(Z,ge,Ue,rt),se=Math.min(ae,Ee,Ne,gt),ue=Math.max(ae,Ee,Ne,gt);return new a(_t,se,le-_t,ue-se)},be=function(Z,ae,ce,de,ge,Ee,Ue,Ne){var rt,gt,_t,le,se,ue,Q,ke,Ve,Xe,lt,at,pt,jt,Bt=ce-Z,qt=de-ae,Jt=ge-ce,gn=Ee-de,Cn=Ue-ge,Ye=Ne-Ee;for(gt=0;gt<41;gt++)Ve=(Q=(_t=Z+(rt=gt/40)*Bt)+rt*((se=ce+rt*Jt)-_t))+rt*(se+rt*(ge+rt*Cn-se)-Q),Xe=(ke=(le=ae+rt*qt)+rt*((ue=de+rt*gn)-le))+rt*(ue+rt*(Ee+rt*Ye-ue)-ke),gt==0?(lt=Ve,at=Xe,pt=Ve,jt=Xe):(lt=Math.min(lt,Ve),at=Math.min(at,Xe),pt=Math.max(pt,Ve),jt=Math.max(jt,Xe));return new a(Math.round(lt),Math.round(at),Math.round(pt-lt),Math.round(jt-at))},_e=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Z,ae,ce=(Z=this.ctx.lineDash,ae=this.ctx.lineDashOffset,JSON.stringify({lineDash:Z,lineDashOffset:ae}));this.prevLineDash!==ce&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ce)}}})(wr.API),function(t){var e=function(s){var o,a,l,c,f,p,y,m,C,S;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(f=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(f=((f=((f=((f=(f-(S=f%85))/85)-(C=f%85))/85)-(m=f%85))/85)-(y=f%85))/85)%85,a.push(p+33,y+33,m+33,C+33,S+33)):a.push(122);return function(T,O){for(var D=O;D>0;D--)T.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,f,p=String,y="length",m=255,C="charCodeAt",S="slice",T="replace";for(s[S](-2),s=s[S](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),l=[],c=0,f=(s+=o="uuuuu"[S](s[y]%5||5))[y];f>c;c+=5)a=52200625*(s[C](c)-33)+614125*(s[C](c+1)-33)+7225*(s[C](c+2)-33)+85*(s[C](c+3)-33)+(s[C](c+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(O,D){for(var N=D;N>0;N--)O.pop()}(l,o[y]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=j2(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(wr.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,f){var p=new XMLHttpRequest,y=0,m=function(C){var S=C.length,T=[],O=String.fromCharCode;for(y=0;y<S;y+=1)T.push(O(255&C.charCodeAt(y)));return T.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?f(m(this.responseText)):f(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(wr.API),function(t){function e(){return(xr.html2canvas?Promise.resolve(xr.html2canvas):ku(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(xr.DOMPurify?Promise.resolve(xr.DOMPurify):ku(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Ni(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,f){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),y=c.firstChild;y;y=y.nextSibling)f!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||p.appendChild(l(y,f));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var y=0;y<c.length;++y){var m=c[y],C=m.src.find(function(S){return S.format==="truetype"});C&&l.addFont(C.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||wr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,f){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,f).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=l.call(c,o,a);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,wr.getPageSize=function(o,a,l){if(Ni(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+l).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+a}var m,C=0,S=0;if(y.hasOwnProperty(p))C=y[p][1]/f,S=y[p][0]/f;else try{C=l[1],S=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",S>C&&(m=S,S=C,C=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",C>S&&(m=S,S=C,C=m)}return{width:S,height:C,unit:a,k:f,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(W2):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(wr.API),wr.API.addJS=function(t){return W4=t,this.internal.events.subscribe("postPutResources",function(){Qm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),H4=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+W4+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Qm!==void 0&&H4!==void 0&&this.internal.out("/Names <</JavaScript "+Qm+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,f=[];for(s=0;s<c;s++){var p=n.internal.newObject();f.push(p);var y=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<f.length;s++)n.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(wr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var y,m=256*p.charCodeAt(4)+p.charCodeAt(5),C=p.length,S={width:0,height:0,numcomponents:1},T=4;T<C;T+=2){if(T+=m,e.indexOf(p.charCodeAt(T+1))!==-1){y=256*p.charCodeAt(T+5)+p.charCodeAt(T+6),S={width:256*p.charCodeAt(T+7)+p.charCodeAt(T+8),height:y,numcomponents:p.charCodeAt(T+9)};break}m=256*p.charCodeAt(T+2)+p.charCodeAt(T+3)}return S}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}f={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return f}}(wr.API);var Md,e0,G4,q4,Y4,T$=function(){var t,e,n;function r(s){var o,a,l,c,f,p,y,m,C,S,T,O,D,N;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),C=(function(){var U,G;for(G=[],U=0;U<4;++U)G.push(String.fromCharCode(this.data[this.pos++]));return G}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*f/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(C==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,O=0;0<=o?O<o:O>o;0<=o?++O:--O)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((S=l-this.transparency.indexed.length)>0)for(D=0;0<=S?D<S:D>S;0<=S?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":y=(T=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,T.slice(0,y)),this.text[m]=String.fromCharCode.apply(String,T.slice(y+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(p,y,m,C){var S,T,O,D,N,U,G,J,ee,V,K,pe,$,H,oe,ie,R,j,q,re,xe,be=Math.ceil((c.width-p)/m),_e=Math.ceil((c.height-y)/C),Z=c.width==be&&c.height==_e;for(H=o*be,pe=Z?a:new Uint8Array(H*_e),U=s.length,$=0,T=0;$<_e&&l<U;){switch(s[l++]){case 0:for(D=R=0;R<H;D=R+=1)pe[T++]=s[l++];break;case 1:for(D=j=0;j<H;D=j+=1)S=s[l++],N=D<o?0:pe[T-o],pe[T++]=(S+N)%256;break;case 2:for(D=q=0;q<H;D=q+=1)S=s[l++],O=(D-D%o)/o,oe=$&&pe[($-1)*H+O*o+D%o],pe[T++]=(oe+S)%256;break;case 3:for(D=re=0;re<H;D=re+=1)S=s[l++],O=(D-D%o)/o,N=D<o?0:pe[T-o],oe=$&&pe[($-1)*H+O*o+D%o],pe[T++]=(S+Math.floor((N+oe)/2))%256;break;case 4:for(D=xe=0;xe<H;D=xe+=1)S=s[l++],O=(D-D%o)/o,N=D<o?0:pe[T-o],$===0?oe=ie=0:(oe=pe[($-1)*H+O*o+D%o],ie=O&&pe[($-1)*H+(O-1)*o+D%o]),G=N+oe-ie,J=Math.abs(G-N),V=Math.abs(G-oe),K=Math.abs(G-ie),ee=J<=V&&J<=K?N:V<=K?oe:ie,pe[T++]=(S+ee)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!Z){var ae=((y+$*C)*c.width+p)*o,ce=$*H;for(D=0;D<be;D+=1){for(var de=0;de<o;de+=1)a[ae++]=pe[ce++];ae+=(m-1)*o}}$++}}return s=u$(s),c.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,f,p,y,m;for(a=this.palette,f=this.transparency.indexed||[],c=new Uint8Array((f.length||0)+a.length),l=0,s=0,o=p=0,y=a.length;p<y;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(m=f[s++])!=null?m:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,f,p,y,m,C,S,T,O;if(l=this.colors,S=null,a=this.hasAlphaChannel,this.palette.length&&(S=(O=this._decodedPalette)!=null?O:this._decodedPalette=this.decodePalette(),l=4,a=!0),C=(c=s.data||s).length,p=S||o,f=y=0,l===1)for(;f<C;)m=S?4*o[f/4]:y,T=p[m++],c[f++]=T,c[f++]=T,c[f++]=T,c[f++]=a?p[m++]:255,y=m;else for(;f<C;)m=S?4*o[f/4]:y,c[f++]=p[m++],c[f++]=p[m++],c[f++]=p[m++],c[f++]=a?p[m++]:255,y=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(xr)==="[object Window]"){try{e=xr.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,f,p,y,m;if(this.animation){for(m=[],a=f=0,p=(y=this.animation.frames).length;f<p;a=++f)o=y[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,m.push(o.image=t(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,f,p,y=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,f=p.numPlays,(o=function(){var m,C;if(m=a++%c,C=l[m],y.renderFrame(s,m),c>1&&a/c<f)return y.animation._timeout=setTimeout(o,C.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function O$(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,f=[],p=0,y=null,m=0,C=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,C=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var S=t[e++];p=t[e++]|t[e++]<<8,y=t[e++],!(1&S)&&(y=null),m=S>>2&7,e++;break;case 254:for(;;){if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var T=t[e++]|t[e++]<<8,O=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,U=t[e++],G=U>>6&1,J=1<<(7&U)+1,ee=a,V=l,K=!1;U>>7&&(K=!0,ee=e,V=J,e+=3*J);var pe=e;for(e++;;){var $;if(!(($=t[e++])>=0))throw Error("Invalid block size");if($===0)break;e+=$}f.push({x:T,y:O,width:D,height:N,has_local_palette:K,palette_offset:ee,palette_size:V,data_offset:pe,data_length:e-pe,transparent_index:y,interlaced:!!G,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return C},this.frameInfo=function(H){if(H<0||H>=f.length)throw new Error("Frame index out of range.");return f[H]},this.decodeAndBlitFrameBGRA=function(H,oe){var ie=this.frameInfo(H),R=ie.width*ie.height,j=new Uint8Array(R);Z4(t,ie.data_offset,j,R);var q=ie.palette_offset,re=ie.transparent_index;re===null&&(re=256);var xe=ie.width,be=n-xe,_e=xe,Z=4*(ie.y*n+ie.x),ae=4*((ie.y+ie.height)*n+ie.x),ce=Z,de=4*be;ie.interlaced===!0&&(de+=4*n*7);for(var ge=8,Ee=0,Ue=j.length;Ee<Ue;++Ee){var Ne=j[Ee];if(_e===0&&(_e=xe,(ce+=de)>=ae&&(de=4*be+4*n*(ge-1),ce=Z+(xe+be)*(ge<<1),ge>>=1)),Ne===re)ce+=4;else{var rt=t[q+3*Ne],gt=t[q+3*Ne+1],_t=t[q+3*Ne+2];oe[ce++]=_t,oe[ce++]=gt,oe[ce++]=rt,oe[ce++]=255}--_e}},this.decodeAndBlitFrameRGBA=function(H,oe){var ie=this.frameInfo(H),R=ie.width*ie.height,j=new Uint8Array(R);Z4(t,ie.data_offset,j,R);var q=ie.palette_offset,re=ie.transparent_index;re===null&&(re=256);var xe=ie.width,be=n-xe,_e=xe,Z=4*(ie.y*n+ie.x),ae=4*((ie.y+ie.height)*n+ie.x),ce=Z,de=4*be;ie.interlaced===!0&&(de+=4*n*7);for(var ge=8,Ee=0,Ue=j.length;Ee<Ue;++Ee){var Ne=j[Ee];if(_e===0&&(_e=xe,(ce+=de)>=ae&&(de=4*be+4*n*(ge-1),ce=Z+(xe+be)*(ge<<1),ge>>=1)),Ne===re)ce+=4;else{var rt=t[q+3*Ne],gt=t[q+3*Ne+1],_t=t[q+3*Ne+2];oe[ce++]=rt,oe[ce++]=gt,oe[ce++]=_t,oe[ce++]=255}--_e}}}function Z4(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,f=0,p=0,y=0,m=t[e++],C=new Int32Array(4096),S=null;;){for(;f<16&&m!==0;)p|=t[e++]<<f,f+=8,m===1?m=t[e++]:--m;if(f<l)break;var T=p&c;if(p>>=l,f-=l,T!==s){if(T===o)break;for(var O=T<a?T:S,D=0,N=O;N>s;)N=C[N]>>8,++D;var U=N;if(y+D+(O!==T?1:0)>r)return void Hi.log("Warning, gif stream longer than expected.");n[y++]=U;var G=y+=D;for(O!==T&&(n[y++]=U),N=O;D--;)N=C[N],n[--G]=255&N,N>>=8;S!==null&&a<4096&&(C[a++]=S<<8|U,a>=c+1&&l<12&&(++l,c=c<<1|1)),S=T}else a=o+1,c=(1<<(l=i+1))-1,S=null}return y!==r&&Hi.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function k1(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),f=new Array(64),p=new Array(65535),y=new Array(65535),m=new Array(64),C=new Array(64),S=[],T=0,O=7,D=new Array(64),N=new Array(64),U=new Array(64),G=new Array(256),J=new Array(2048),ee=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],V=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],pe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],$=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],H=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],oe=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],R=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function j(Z,ae){for(var ce=0,de=0,ge=new Array,Ee=1;Ee<=16;Ee++){for(var Ue=1;Ue<=Z[Ee];Ue++)ge[ae[de]]=[],ge[ae[de]][0]=ce,ge[ae[de]][1]=Ee,de++,ce++;ce*=2}return ge}function q(Z){for(var ae=Z[0],ce=Z[1]-1;ce>=0;)ae&1<<ce&&(T|=1<<O),ce--,--O<0&&(T==255?(re(255),re(0)):re(T),O=7,T=0)}function re(Z){S.push(Z)}function xe(Z){re(Z>>8&255),re(255&Z)}function be(Z,ae,ce,de,ge){for(var Ee,Ue=ge[0],Ne=ge[240],rt=function(Xe,lt){var at,pt,jt,Bt,qt,Jt,gn,Cn,Ye,st,Qe=0;for(Ye=0;Ye<8;++Ye){at=Xe[Qe],pt=Xe[Qe+1],jt=Xe[Qe+2],Bt=Xe[Qe+3],qt=Xe[Qe+4],Jt=Xe[Qe+5],gn=Xe[Qe+6];var $t=at+(Cn=Xe[Qe+7]),Yt=at-Cn,wn=pt+gn,mn=pt-gn,_n=jt+Jt,Rn=jt-Jt,vn=Bt+qt,tn=Bt-qt,hn=$t+vn,Bn=$t-vn,Jn=wn+_n,ar=wn-_n;Xe[Qe]=hn+Jn,Xe[Qe+4]=hn-Jn;var zn=.707106781*(ar+Bn);Xe[Qe+2]=Bn+zn,Xe[Qe+6]=Bn-zn;var Lr=.382683433*((hn=tn+Rn)-(ar=mn+Yt)),ns=.5411961*hn+Lr,ki=1.306562965*ar+Lr,Ft=.707106781*(Jn=Rn+mn),Je=Yt+Ft,Lt=Yt-Ft;Xe[Qe+5]=Lt+ns,Xe[Qe+3]=Lt-ns,Xe[Qe+1]=Je+ki,Xe[Qe+7]=Je-ki,Qe+=8}for(Qe=0,Ye=0;Ye<8;++Ye){at=Xe[Qe],pt=Xe[Qe+8],jt=Xe[Qe+16],Bt=Xe[Qe+24],qt=Xe[Qe+32],Jt=Xe[Qe+40],gn=Xe[Qe+48];var In=at+(Cn=Xe[Qe+56]),nr=at-Cn,Nn=pt+gn,Zt=pt-gn,Ze=jt+Jt,un=jt-Jt,sn=Bt+qt,An=Bt-qt,Qn=In+sn,ir=In-sn,Wr=Nn+Ze,Un=Nn-Ze;Xe[Qe]=Qn+Wr,Xe[Qe+32]=Qn-Wr;var li=.707106781*(Un+ir);Xe[Qe+16]=ir+li,Xe[Qe+48]=ir-li;var kr=.382683433*((Qn=An+un)-(Un=Zt+nr)),Do=.5411961*Qn+kr,lr=1.306562965*Un+kr,br=.707106781*(Wr=un+Zt),Gi=nr+br,ws=nr-br;Xe[Qe+40]=ws+Do,Xe[Qe+24]=ws-Do,Xe[Qe+8]=Gi+lr,Xe[Qe+56]=Gi-lr,Qe++}for(Ye=0;Ye<64;++Ye)st=Xe[Ye]*lt[Ye],m[Ye]=st>0?st+.5|0:st-.5|0;return m}(Z,ae),gt=0;gt<64;++gt)C[ee[gt]]=rt[gt];var _t=C[0]-ce;ce=C[0],_t==0?q(de[0]):(q(de[y[Ee=32767+_t]]),q(p[Ee]));for(var le=63;le>0&&C[le]==0;)le--;if(le==0)return q(Ue),ce;for(var se,ue=1;ue<=le;){for(var Q=ue;C[ue]==0&&ue<=le;)++ue;var ke=ue-Q;if(ke>=16){se=ke>>4;for(var Ve=1;Ve<=se;++Ve)q(Ne);ke&=15}Ee=32767+C[ue],q(ge[(ke<<4)+y[Ee]]),q(p[Ee]),ue++}return le!=63&&q(Ue),ce}function _e(Z){Z=Math.min(Math.max(Z,1),100),s!=Z&&(function(ae){for(var ce=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var ge=o((ce[de]*ae+50)/100);ge=Math.min(Math.max(ge,1),255),a[ee[de]]=ge}for(var Ee=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ue=0;Ue<64;Ue++){var Ne=o((Ee[Ue]*ae+50)/100);Ne=Math.min(Math.max(Ne,1),255),l[ee[Ue]]=Ne}for(var rt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],gt=0,_t=0;_t<8;_t++)for(var le=0;le<8;le++)c[gt]=1/(a[ee[gt]]*rt[_t]*rt[le]*8),f[gt]=1/(l[ee[gt]]*rt[_t]*rt[le]*8),gt++}(Z<50?Math.floor(5e3/Z):Math.floor(200-2*Z)),s=Z)}this.encode=function(Z,ae){ae&&_e(ae),S=new Array,T=0,O=7,xe(65496),xe(65504),xe(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),xe(1),xe(1),re(0),re(0),function(){xe(65499),xe(132),re(0);for(var pt=0;pt<64;pt++)re(a[pt]);re(1);for(var jt=0;jt<64;jt++)re(l[jt])}(),function(pt,jt){xe(65472),xe(17),re(8),xe(jt),xe(pt),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)}(Z.width,Z.height),function(){xe(65476),xe(418),re(0);for(var pt=0;pt<16;pt++)re(V[pt+1]);for(var jt=0;jt<=11;jt++)re(K[jt]);re(16);for(var Bt=0;Bt<16;Bt++)re(pe[Bt+1]);for(var qt=0;qt<=161;qt++)re($[qt]);re(1);for(var Jt=0;Jt<16;Jt++)re(H[Jt+1]);for(var gn=0;gn<=11;gn++)re(oe[gn]);re(17);for(var Cn=0;Cn<16;Cn++)re(ie[Cn+1]);for(var Ye=0;Ye<=161;Ye++)re(R[Ye])}(),xe(65498),xe(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var ce=0,de=0,ge=0;T=0,O=7,this.encode.displayName="_encode_";for(var Ee,Ue,Ne,rt,gt,_t,le,se,ue,Q=Z.data,ke=Z.width,Ve=Z.height,Xe=4*ke,lt=0;lt<Ve;){for(Ee=0;Ee<Xe;){for(gt=Xe*lt+Ee,le=-1,se=0,ue=0;ue<64;ue++)_t=gt+(se=ue>>3)*Xe+(le=4*(7&ue)),lt+se>=Ve&&(_t-=Xe*(lt+1+se-Ve)),Ee+le>=Xe&&(_t-=Ee+le-Xe+4),Ue=Q[_t++],Ne=Q[_t++],rt=Q[_t++],D[ue]=(J[Ue]+J[Ne+256>>0]+J[rt+512>>0]>>16)-128,N[ue]=(J[Ue+768>>0]+J[Ne+1024>>0]+J[rt+1280>>0]>>16)-128,U[ue]=(J[Ue+1280>>0]+J[Ne+1536>>0]+J[rt+1792>>0]>>16)-128;ce=be(D,c,ce,e,r),de=be(N,f,de,n,i),ge=be(U,f,ge,n,i),Ee+=32}lt+=8}if(O>=0){var at=[];at[1]=O+1,at[0]=(1<<O+1)-1,q(at)}return xe(65497),new Uint8Array(S)},t=t||50,function(){for(var Z=String.fromCharCode,ae=0;ae<256;ae++)G[ae]=Z(ae)}(),e=j(V,K),n=j(H,oe),r=j(pe,$),i=j(ie,R),function(){for(var Z=1,ae=2,ce=1;ce<=15;ce++){for(var de=Z;de<ae;de++)y[32767+de]=ce,p[32767+de]=[],p[32767+de][1]=ce,p[32767+de][0]=de;for(var ge=-(ae-1);ge<=-Z;ge++)y[32767+ge]=ce,p[32767+ge]=[],p[32767+ge][1]=ce,p[32767+ge][0]=ae-1+ge;Z<<=1,ae<<=1}}(),function(){for(var Z=0;Z<256;Z++)J[Z]=19595*Z,J[Z+256>>0]=38470*Z,J[Z+512>>0]=7471*Z+32768,J[Z+768>>0]=-11059*Z,J[Z+1024>>0]=-21709*Z,J[Z+1280>>0]=32768*Z+8421375,J[Z+1536>>0]=-27439*Z,J[Z+1792>>0]=-5329*Z}(),_e(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Xu(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function K4(t){function e(V){if(!V)throw Error("assert :P")}function n(V,K,pe){for(var $=0;4>$;$++)if(V[K+$]!=pe.charCodeAt($))return!0;return!1}function r(V,K,pe,$,H){for(var oe=0;oe<H;oe++)V[K+oe]=pe[$+oe]}function i(V,K,pe,$){for(var H=0;H<$;H++)V[K+H]=pe}function s(V){return new Int32Array(V)}function o(V,K){for(var pe=[],$=0;$<V;$++)pe.push(new K);return pe}function a(V,K){var pe=[];return function $(H,oe,ie){for(var R=ie[oe],j=0;j<R&&(H.push(ie.length>oe+1?[]:new K),!(ie.length<oe+1));j++)$(H[j],oe+1,ie)}(pe,0,V),pe}var l=function(){var V=this;function K(w,M){for(var z=1<<M-1>>>0;w&z;)z>>>=1;return z?(w&z-1)+z:w}function pe(w,M,z,ne,ve){e(!(ne%z));do w[M+(ne-=z)]=ve;while(0<ne)}function $(w,M,z,ne,ve){if(e(2328>=ve),512>=ve)var Ce=s(512);else if((Ce=s(ve))==null)return 0;return function(Pe,Me,Te,$e,ct,Ot){var Dt,wt,Ht=Me,zt=1<<Te,ht=s(16),vt=s(16);for(e(ct!=0),e($e!=null),e(Pe!=null),e(0<Te),wt=0;wt<ct;++wt){if(15<$e[wt])return 0;++ht[$e[wt]]}if(ht[0]==ct)return 0;for(vt[1]=0,Dt=1;15>Dt;++Dt){if(ht[Dt]>1<<Dt)return 0;vt[Dt+1]=vt[Dt]+ht[Dt]}for(wt=0;wt<ct;++wt)Dt=$e[wt],0<$e[wt]&&(Ot[vt[Dt]++]=wt);if(vt[15]==1)return($e=new H).g=0,$e.value=Ot[0],pe(Pe,Ht,1,zt,$e),zt;var Xt,ln=-1,Qt=zt-1,En=0,xn=1,Wn=1,h=1<<Te;for(wt=0,Dt=1,ct=2;Dt<=Te;++Dt,ct<<=1){if(xn+=Wn<<=1,0>(Wn-=ht[Dt]))return 0;for(;0<ht[Dt];--ht[Dt])($e=new H).g=Dt,$e.value=Ot[wt++],pe(Pe,Ht+En,ct,h,$e),En=K(En,Dt)}for(Dt=Te+1,ct=2;15>=Dt;++Dt,ct<<=1){if(xn+=Wn<<=1,0>(Wn-=ht[Dt]))return 0;for(;0<ht[Dt];--ht[Dt]){if($e=new H,(En&Qt)!=ln){for(Ht+=h,Xt=1<<(ln=Dt)-Te;15>ln&&!(0>=(Xt-=ht[ln]));)++ln,Xt<<=1;zt+=h=1<<(Xt=ln-Te),Pe[Me+(ln=En&Qt)].g=Xt+Te,Pe[Me+ln].value=Ht-Me-ln}$e.g=Dt-Te,$e.value=Ot[wt++],pe(Pe,Ht+(En>>Te),ct,h,$e),En=K(En,Dt)}}return xn!=2*vt[15]-1?0:zt}(w,M,z,ne,ve,Ce)}function H(){this.value=this.g=0}function oe(){this.value=this.g=0}function ie(){this.G=o(5,H),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Yi,oe)}function R(w,M,z,ne){e(w!=null),e(M!=null),e(2147483648>ne),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=M,w.pa=z,w.Jd=M,w.Yc=z+ne,w.Zc=4<=ne?z+ne-4+1:z,Ee(w)}function j(w,M){for(var z=0;0<M--;)z|=Ne(w,128)<<M;return z}function q(w,M){var z=j(w,M);return Ue(w)?-z:z}function re(w,M,z,ne){var ve,Ce=0;for(e(w!=null),e(M!=null),e(4294967288>ne),w.Sb=ne,w.Ra=0,w.u=0,w.h=0,4<ne&&(ne=4),ve=0;ve<ne;++ve)Ce+=M[z+ve]<<8*ve;w.Ra=Ce,w.bb=ne,w.oa=M,w.pa=z}function xe(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Qs-8>>>0,++w.bb,w.u-=8;ce(w)&&(w.h=1,w.u=0)}function be(w,M){if(e(0<=M),!w.h&&M<=bo){var z=ae(w)&Qo[M];return w.u+=M,xe(w),z}return w.h=1,w.u=0}function _e(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ae(w){return w.Ra>>>(w.u&Qs-1)>>>0}function ce(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Qs}function de(w,M){w.u=M,w.h=ce(w)}function ge(w){w.u>=bl&&(e(w.u>=bl),xe(w))}function Ee(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function Ue(w){return j(w,1)}function Ne(w,M){var z=w.Ca;0>w.b&&Ee(w);var ne=w.b,ve=z*M>>>8,Ce=(w.I>>>ne>ve)+0;for(Ce?(z-=ve,w.I-=ve+1<<ne>>>0):z=ve+1,ne=z,ve=0;256<=ne;)ve+=8,ne>>=8;return ne=7^ve+Ss[ne],w.b-=ne,w.Ca=(z<<ne)-1,Ce}function rt(w,M,z){w[M+0]=z>>24&255,w[M+1]=z>>16&255,w[M+2]=z>>8&255,w[M+3]=z>>0&255}function gt(w,M){return w[M+0]<<0|w[M+1]<<8}function _t(w,M){return gt(w,M)|w[M+2]<<16}function le(w,M){return gt(w,M)|gt(w,M+2)<<16}function se(w,M){var z=1<<M;return e(w!=null),e(0<M),w.X=s(z),w.X==null?0:(w.Mb=32-M,w.Xa=M,1)}function ue(w,M){e(w!=null),e(M!=null),e(w.Xa==M.Xa),r(M.X,0,w.X,0,1<<M.Xa)}function Q(){this.X=[],this.Xa=this.Mb=0}function ke(w,M,z,ne){e(z!=null),e(ne!=null);var ve=z[0],Ce=ne[0];return ve==0&&(ve=(w*Ce+M/2)/M),Ce==0&&(Ce=(M*ve+w/2)/w),0>=ve||0>=Ce?0:(z[0]=ve,ne[0]=Ce,1)}function Ve(w,M){return w+(1<<M)-1>>>M}function Xe(w,M){return((4278255360&w)+(4278255360&M)>>>0&4278255360)+((16711935&w)+(16711935&M)>>>0&16711935)>>>0}function lt(w,M){V[M]=function(z,ne,ve,Ce,Pe,Me,Te){var $e;for($e=0;$e<Pe;++$e){var ct=V[w](Me[Te+$e-1],ve,Ce+$e);Me[Te+$e]=Xe(z[ne+$e],ct)}}}function at(){this.ud=this.hd=this.jd=0}function pt(w,M){return((4278124286&(w^M))>>>1)+(w&M)>>>0}function jt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Bt(w,M){return jt(w+(w-M+.5>>1))}function qt(w,M,z){return Math.abs(M-z)-Math.abs(w-z)}function Jt(w,M,z,ne,ve,Ce,Pe){for(ne=Ce[Pe-1],z=0;z<ve;++z)Ce[Pe+z]=ne=Xe(w[M+z],ne)}function gn(w,M,z,ne,ve){var Ce;for(Ce=0;Ce<z;++Ce){var Pe=w[M+Ce],Me=Pe>>8&255,Te=16711935&(Te=(Te=16711935&Pe)+((Me<<16)+Me));ne[ve+Ce]=(4278255360&Pe)+Te>>>0}}function Cn(w,M){M.jd=w>>0&255,M.hd=w>>8&255,M.ud=w>>16&255}function Ye(w,M,z,ne,ve,Ce){var Pe;for(Pe=0;Pe<ne;++Pe){var Me=M[z+Pe],Te=Me>>>8,$e=Me,ct=255&(ct=(ct=Me>>>16)+((w.jd<<24>>24)*(Te<<24>>24)>>>5));$e=255&($e=($e=$e+((w.hd<<24>>24)*(Te<<24>>24)>>>5))+((w.ud<<24>>24)*(ct<<24>>24)>>>5)),ve[Ce+Pe]=(4278255360&Me)+(ct<<16)+$e}}function st(w,M,z,ne,ve){V[M]=function(Ce,Pe,Me,Te,$e,ct,Ot,Dt,wt){for(Te=Ot;Te<Dt;++Te)for(Ot=0;Ot<wt;++Ot)$e[ct++]=ve(Me[ne(Ce[Pe++])])},V[w]=function(Ce,Pe,Me,Te,$e,ct,Ot){var Dt=8>>Ce.b,wt=Ce.Ea,Ht=Ce.K[0],zt=Ce.w;if(8>Dt)for(Ce=(1<<Ce.b)-1,zt=(1<<Dt)-1;Pe<Me;++Pe){var ht,vt=0;for(ht=0;ht<wt;++ht)ht&Ce||(vt=ne(Te[$e++])),ct[Ot++]=ve(Ht[vt&zt]),vt>>=Dt}else V["VP8LMapColor"+z](Te,$e,Ht,zt,ct,Ot,Pe,Me,wt)}}function Qe(w,M,z,ne,ve){for(z=M+z;M<z;){var Ce=w[M++];ne[ve++]=Ce>>16&255,ne[ve++]=Ce>>8&255,ne[ve++]=Ce>>0&255}}function $t(w,M,z,ne,ve){for(z=M+z;M<z;){var Ce=w[M++];ne[ve++]=Ce>>16&255,ne[ve++]=Ce>>8&255,ne[ve++]=Ce>>0&255,ne[ve++]=Ce>>24&255}}function Yt(w,M,z,ne,ve){for(z=M+z;M<z;){var Ce=(Pe=w[M++])>>16&240|Pe>>12&15,Pe=Pe>>0&240|Pe>>28&15;ne[ve++]=Ce,ne[ve++]=Pe}}function wn(w,M,z,ne,ve){for(z=M+z;M<z;){var Ce=(Pe=w[M++])>>16&248|Pe>>13&7,Pe=Pe>>5&224|Pe>>3&31;ne[ve++]=Ce,ne[ve++]=Pe}}function mn(w,M,z,ne,ve){for(z=M+z;M<z;){var Ce=w[M++];ne[ve++]=Ce>>0&255,ne[ve++]=Ce>>8&255,ne[ve++]=Ce>>16&255}}function _n(w,M,z,ne,ve,Ce){if(Ce==0)for(z=M+z;M<z;)rt(ne,((Ce=w[M++])[0]>>24|Ce[1]>>8&65280|Ce[2]<<8&16711680|Ce[3]<<24)>>>0),ve+=32;else r(ne,ve,w,M,z)}function Rn(w,M){V[M][0]=V[w+"0"],V[M][1]=V[w+"1"],V[M][2]=V[w+"2"],V[M][3]=V[w+"3"],V[M][4]=V[w+"4"],V[M][5]=V[w+"5"],V[M][6]=V[w+"6"],V[M][7]=V[w+"7"],V[M][8]=V[w+"8"],V[M][9]=V[w+"9"],V[M][10]=V[w+"10"],V[M][11]=V[w+"11"],V[M][12]=V[w+"12"],V[M][13]=V[w+"13"],V[M][14]=V[w+"0"],V[M][15]=V[w+"0"]}function vn(w){return w==fs||w==ds||w==Vo||w==u}function tn(){this.eb=[],this.size=this.A=this.fb=0}function hn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Bn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new tn,this.f.kb=new hn,this.sd=null}function Jn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ar(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function zn(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Lr(w,M){var z=w.T,ne=M.ba.f.RGBA,ve=ne.eb,Ce=ne.fb+w.ka*ne.A,Pe=Ts[M.ba.S],Me=w.y,Te=w.O,$e=w.f,ct=w.N,Ot=w.ea,Dt=w.W,wt=M.cc,Ht=M.dc,zt=M.Mc,ht=M.Nc,vt=w.ka,Xt=w.ka+w.T,ln=w.U,Qt=ln+1>>1;for(vt==0?Pe(Me,Te,null,null,$e,ct,Ot,Dt,$e,ct,Ot,Dt,ve,Ce,null,null,ln):(Pe(M.ec,M.fc,Me,Te,wt,Ht,zt,ht,$e,ct,Ot,Dt,ve,Ce-ne.A,ve,Ce,ln),++z);vt+2<Xt;vt+=2)wt=$e,Ht=ct,zt=Ot,ht=Dt,ct+=w.Rc,Dt+=w.Rc,Ce+=2*ne.A,Pe(Me,(Te+=2*w.fa)-w.fa,Me,Te,wt,Ht,zt,ht,$e,ct,Ot,Dt,ve,Ce-ne.A,ve,Ce,ln);return Te+=w.fa,w.j+Xt<w.o?(r(M.ec,M.fc,Me,Te,ln),r(M.cc,M.dc,$e,ct,Qt),r(M.Mc,M.Nc,Ot,Dt,Qt),z--):1&Xt||Pe(Me,Te,null,null,$e,ct,Ot,Dt,$e,ct,Ot,Dt,ve,Ce+ne.A,null,null,ln),z}function ns(w,M,z){var ne=w.F,ve=[w.J];if(ne!=null){var Ce=w.U,Pe=M.ba.S,Me=Pe==$o||Pe==Vo;M=M.ba.f.RGBA;var Te=[0],$e=w.ka;Te[0]=w.T,w.Kb&&($e==0?--Te[0]:(--$e,ve[0]-=w.width),w.j+w.ka+w.T==w.o&&(Te[0]=w.o-w.j-$e));var ct=M.eb;$e=M.fb+$e*M.A,w=ui(ne,ve[0],w.width,Ce,Te,ct,$e+(Me?0:3),M.A),e(z==Te),w&&vn(Pe)&&hs(ct,$e,Me,Ce,Te,M.A)}return 0}function ki(w){var M=w.ma,z=M.ba.S,ne=11>z,ve=z==rr||z==xa||z==$o||z==$s||z==12||vn(z);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!zu(M.Oa,w,ve?11:12))return 0;if(ve&&vn(z)&&an(),w.da)alert("todo:use_scaling");else{if(ne){if(M.Ib=zn,w.Kb){if(z=w.U+1>>1,M.memory=s(w.U+2*z),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+w.U,M.Mc=M.cc,M.Nc=M.dc+z,M.Ib=Lr,an()}}else alert("todo:EmitYUV");ve&&(M.Jb=ns,ne&&xt())}if(ne&&!bc){for(w=0;256>w;++w)Ph[w]=89858*(w-128)+Ka>>Eh,kh[w]=-22014*(w-128)+Ka,_p[w]=-45773*(w-128),Xl[w]=113618*(w-128)+Ka>>Eh;for(w=Yc;w<gf;++w)M=76283*(w-16)+Ka>>Eh,Mh[w-Yc]=Er(M,255),ud[w-Yc]=Er(M+8>>4,15);bc=1}return 1}function Ft(w){var M=w.ma,z=w.U,ne=w.T;return e(!(1&w.ka)),0>=z||0>=ne?0:(z=M.Ib(w,M),M.Jb!=null&&M.Jb(w,M,z),M.Dc+=z,1)}function Je(w){w.ma.memory=null}function Lt(w,M,z,ne){return be(w,8)!=47?0:(M[0]=be(w,14)+1,z[0]=be(w,14)+1,ne[0]=be(w,1),be(w,3)!=0?0:!w.h)}function In(w,M){if(4>w)return w+1;var z=w-2>>1;return(2+(1&w)<<z)+be(M,z)+1}function nr(w,M){return 120<M?M-120:1<=(z=((z=et[M-1])>>4)*w+(8-(15&z)))?z:1;var z}function Nn(w,M,z){var ne=ae(z),ve=w[M+=255&ne].g-8;return 0<ve&&(de(z,z.u+8),ne=ae(z),M+=w[M].value,M+=ne&(1<<ve)-1),de(z,z.u+w[M].g),w[M].value}function Zt(w,M,z){return z.g+=w.g,z.value+=w.value<<M>>>0,e(8>=z.g),w.g}function Ze(w,M,z){var ne=w.xc;return e((M=ne==0?0:w.vc[w.md*(z>>ne)+(M>>ne)])<w.Wb),w.Ya[M]}function un(w,M,z,ne){var ve=w.ab,Ce=w.c*M,Pe=w.C;M=Pe+M;var Me=z,Te=ne;for(ne=w.Ta,z=w.Ua;0<ve--;){var $e=w.gc[ve],ct=Pe,Ot=M,Dt=Me,wt=Te,Ht=(Te=ne,Me=z,$e.Ea);switch(e(ct<Ot),e(Ot<=$e.nc),$e.hc){case 2:yc(Dt,wt,(Ot-ct)*Ht,Te,Me);break;case 0:var zt=ct,ht=Ot,vt=Te,Xt=Me,ln=(h=$e).Ea;zt==0&&(js(Dt,wt,null,null,1,vt,Xt),Jt(Dt,wt+1,0,0,ln-1,vt,Xt+1),wt+=ln,Xt+=ln,++zt);for(var Qt=1<<h.b,En=Qt-1,xn=Ve(ln,h.b),Wn=h.K,h=h.w+(zt>>h.b)*xn;zt<ht;){var g=Wn,_=h,x=1;for(zs(Dt,wt,vt,Xt-ln,1,vt,Xt);x<ln;){var k=(x&~En)+Qt;k>ln&&(k=ln),(0,ya[g[_++]>>8&15])(Dt,wt+ +x,vt,Xt+x-ln,k-x,vt,Xt+x),x=k}wt+=ln,Xt+=ln,++zt&En||(h+=xn)}Ot!=$e.nc&&r(Te,Me-Ht,Te,Me+(Ot-ct-1)*Ht,Ht);break;case 1:for(Ht=Dt,ht=wt,ln=(Dt=$e.Ea)-(Xt=Dt&~(vt=(wt=1<<$e.b)-1)),zt=Ve(Dt,$e.b),Qt=$e.K,$e=$e.w+(ct>>$e.b)*zt;ct<Ot;){for(En=Qt,xn=$e,Wn=new at,h=ht+Xt,g=ht+Dt;ht<h;)Cn(En[xn++],Wn),ba(Wn,Ht,ht,wt,Te,Me),ht+=wt,Me+=wt;ht<g&&(Cn(En[xn++],Wn),ba(Wn,Ht,ht,ln,Te,Me),ht+=ln,Me+=ln),++ct&vt||($e+=zt)}break;case 3:if(Dt==Te&&wt==Me&&0<$e.b){for(ht=Te,Dt=Ht=Me+(Ot-ct)*Ht-(Xt=(Ot-ct)*Ve($e.Ea,$e.b)),wt=Te,vt=Me,zt=[],Xt=(ln=Xt)-1;0<=Xt;--Xt)zt[Xt]=wt[vt+Xt];for(Xt=ln-1;0<=Xt;--Xt)ht[Dt+Xt]=zt[Xt];is($e,ct,Ot,Te,Ht,Te,Me)}else is($e,ct,Ot,Dt,wt,Te,Me)}Me=ne,Te=z}Te!=z&&r(ne,z,Me,Te,Ce)}function sn(w,M){var z=w.V,ne=w.Ba+w.c*w.C,ve=M-w.C;if(e(M<=w.l.o),e(16>=ve),0<ve){var Ce=w.l,Pe=w.Ta,Me=w.Ua,Te=Ce.width;if(un(w,ve,z,ne),ve=Me=[Me],e((z=w.C)<(ne=M)),e(Ce.v<Ce.va),ne>Ce.o&&(ne=Ce.o),z<Ce.j){var $e=Ce.j-z;z=Ce.j,ve[0]+=$e*Te}if(z>=ne?z=0:(ve[0]+=4*Ce.v,Ce.ka=z-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=ne-z,z=1),z){if(Me=Me[0],11>(z=w.ca).S){var ct=z.f.RGBA,Ot=(ne=z.S,ve=Ce.U,Ce=Ce.T,$e=ct.eb,ct.A),Dt=Ce;for(ct=ct.fb+w.Ma*ct.A;0<Dt--;){var wt=Pe,Ht=Me,zt=ve,ht=$e,vt=ct;switch(ne){case to:ks(wt,Ht,zt,ht,vt);break;case rr:cs(wt,Ht,zt,ht,vt);break;case fs:cs(wt,Ht,zt,ht,vt),hs(ht,vt,0,zt,1,0);break;case wa:Ms(wt,Ht,zt,ht,vt);break;case xa:_n(wt,Ht,zt,ht,vt,1);break;case ds:_n(wt,Ht,zt,ht,vt,1),hs(ht,vt,0,zt,1,0);break;case $o:_n(wt,Ht,zt,ht,vt,0);break;case Vo:_n(wt,Ht,zt,ht,vt,0),hs(ht,vt,1,zt,1,0);break;case $s:ea(wt,Ht,zt,ht,vt);break;case u:ea(wt,Ht,zt,ht,vt),ii(ht,vt,zt,1,0);break;case Gc:_o(wt,Ht,zt,ht,vt);break;default:e(0)}Me+=Te,ct+=Ot}w.Ma+=Ce}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=z.height)}}w.C=M,e(w.C<=w.i)}function An(w){var M;if(0<w.ua)return 0;for(M=0;M<w.Wb;++M){var z=w.Ya[M].G,ne=w.Ya[M].H;if(0<z[1][ne[1]+0].g||0<z[2][ne[2]+0].g||0<z[3][ne[3]+0].g)return 0}return 1}function Qn(w,M,z,ne,ve,Ce){if(w.Z!=0){var Pe=w.qd,Me=w.rd;for(e(Xr[w.Z]!=null);M<z;++M)Xr[w.Z](Pe,Me,ne,ve,ne,ve,Ce),Pe=ne,Me=ve,ve+=Ce;w.qd=Pe,w.rd=Me}}function ir(w,M){var z=w.l.ma,ne=z.Z==0||z.Z==1?w.l.j:w.C;if(ne=w.C<ne?ne:w.C,e(M<=w.l.o),M>ne){var ve=w.l.width,Ce=z.ca,Pe=z.tb+ve*ne,Me=w.V,Te=w.Ba+w.c*ne,$e=w.gc;e(w.ab==1),e($e[0].hc==3),Es($e[0],ne,M,Me,Te,Ce,Pe),Qn(z,ne,M,Ce,Pe,ve)}w.C=w.Ma=M}function Wr(w,M,z,ne,ve,Ce,Pe){var Me=w.$/ne,Te=w.$%ne,$e=w.m,ct=w.s,Ot=z+w.$,Dt=Ot;ve=z+ne*ve;var wt=z+ne*Ce,Ht=280+ct.ua,zt=w.Pb?Me:16777216,ht=0<ct.ua?ct.Wa:null,vt=ct.wc,Xt=Ot<wt?Ze(ct,Te,Me):null;e(w.C<Ce),e(wt<=ve);var ln=!1;e:for(;;){for(;ln||Ot<wt;){var Qt=0;if(Me>=zt){var En=Ot-z;e((zt=w).Pb),zt.wd=zt.m,zt.xd=En,0<zt.s.ua&&ue(zt.s.Wa,zt.s.vb),zt=Me+Rt}if(Te&vt||(Xt=Ze(ct,Te,Me)),e(Xt!=null),Xt.Qb&&(M[Ot]=Xt.qb,ln=!0),!ln)if(ge($e),Xt.jc){Qt=$e,En=M;var xn=Ot,Wn=Xt.pd[ae(Qt)&Yi-1];e(Xt.jc),256>Wn.g?(de(Qt,Qt.u+Wn.g),En[xn]=Wn.value,Qt=0):(de(Qt,Qt.u+Wn.g-256),e(256<=Wn.value),Qt=Wn.value),Qt==0&&(ln=!0)}else Qt=Nn(Xt.G[0],Xt.H[0],$e);if($e.h)break;if(ln||256>Qt){if(!ln)if(Xt.nd)M[Ot]=(Xt.qb|Qt<<8)>>>0;else{if(ge($e),ln=Nn(Xt.G[1],Xt.H[1],$e),ge($e),En=Nn(Xt.G[2],Xt.H[2],$e),xn=Nn(Xt.G[3],Xt.H[3],$e),$e.h)break;M[Ot]=(xn<<24|ln<<16|Qt<<8|En)>>>0}if(ln=!1,++Ot,++Te>=ne&&(Te=0,++Me,Pe!=null&&Me<=Ce&&!(Me%16)&&Pe(w,Me),ht!=null))for(;Dt<Ot;)Qt=M[Dt++],ht.X[(506832829*Qt&4294967295)>>>ht.Mb]=Qt}else if(280>Qt){if(Qt=In(Qt-256,$e),En=Nn(Xt.G[4],Xt.H[4],$e),ge($e),En=nr(ne,En=In(En,$e)),$e.h)break;if(Ot-z<En||ve-Ot<Qt)break e;for(xn=0;xn<Qt;++xn)M[Ot+xn]=M[Ot+xn-En];for(Ot+=Qt,Te+=Qt;Te>=ne;)Te-=ne,++Me,Pe!=null&&Me<=Ce&&!(Me%16)&&Pe(w,Me);if(e(Ot<=ve),Te&vt&&(Xt=Ze(ct,Te,Me)),ht!=null)for(;Dt<Ot;)Qt=M[Dt++],ht.X[(506832829*Qt&4294967295)>>>ht.Mb]=Qt}else{if(!(Qt<Ht))break e;for(ln=Qt-280,e(ht!=null);Dt<Ot;)Qt=M[Dt++],ht.X[(506832829*Qt&4294967295)>>>ht.Mb]=Qt;Qt=Ot,e(!(ln>>>(En=ht).Xa)),M[Qt]=En.X[ln],ln=!0}ln||e($e.h==ce($e))}if(w.Pb&&$e.h&&Ot<ve)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&ue(w.s.vb,w.s.Wa);else{if($e.h)break e;Pe!=null&&Pe(w,Me>Ce?Ce:Me),w.a=0,w.$=Ot-z}return 1}return w.a=3,0}function Un(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var M=w.Wa;M!=null&&(M.X=null),w.vb=null,e(w!=null)}function li(){var w=new ml;return w==null?null:(w.a=0,w.xb=bu,Rn("Predictor","VP8LPredictors"),Rn("Predictor","VP8LPredictors_C"),Rn("PredictorAdd","VP8LPredictorsAdd"),Rn("PredictorAdd","VP8LPredictorsAdd_C"),yc=gn,ba=Ye,ks=Qe,cs=$t,ea=Yt,_o=wn,Ms=mn,V.VP8LMapColor32b=va,V.VP8LMapColor8b=Ps,w)}function kr(w,M,z,ne,ve){var Ce=1,Pe=[w],Me=[M],Te=ne.m,$e=ne.s,ct=null,Ot=0;e:for(;;){if(z)for(;Ce&&be(Te,1);){var Dt=Pe,wt=Me,Ht=ne,zt=1,ht=Ht.m,vt=Ht.gc[Ht.ab],Xt=be(ht,2);if(Ht.Oc&1<<Xt)Ce=0;else{switch(Ht.Oc|=1<<Xt,vt.hc=Xt,vt.Ea=Dt[0],vt.nc=wt[0],vt.K=[null],++Ht.ab,e(4>=Ht.ab),Xt){case 0:case 1:vt.b=be(ht,3)+2,zt=kr(Ve(vt.Ea,vt.b),Ve(vt.nc,vt.b),0,Ht,vt.K),vt.K=vt.K[0];break;case 3:var ln,Qt=be(ht,8)+1,En=16<Qt?0:4<Qt?1:2<Qt?2:3;if(Dt[0]=Ve(vt.Ea,En),vt.b=En,ln=zt=kr(Qt,1,0,Ht,vt.K)){var xn,Wn=Qt,h=vt,g=1<<(8>>h.b),_=s(g);if(_==null)ln=0;else{var x=h.K[0],k=h.w;for(_[0]=h.K[0][0],xn=1;xn<1*Wn;++xn)_[xn]=Xe(x[k+xn],_[xn-1]);for(;xn<4*g;++xn)_[xn]=0;h.K[0]=null,h.K[0]=_,ln=1}}zt=ln;break;case 2:break;default:e(0)}Ce=zt}}if(Pe=Pe[0],Me=Me[0],Ce&&be(Te,1)&&!(Ce=1<=(Ot=be(Te,4))&&11>=Ot)){ne.a=3;break e}var B;if(B=Ce)t:{var W,X,he,we=ne,Ge=Pe,ze=Me,mt=Ot,At=z,Gt=we.m,dn=we.s,yn=[null],er=1,We=0,qe=Pt[mt];n:for(;;){if(At&&be(Gt,1)){var ut=be(Gt,3)+2,It=Ve(Ge,ut),bt=Ve(ze,ut),Tt=It*bt;if(!kr(It,bt,0,we,yn))break n;for(yn=yn[0],dn.xc=ut,W=0;W<Tt;++W){var fe=yn[W]>>8&65535;yn[W]=fe,fe>=er&&(er=fe+1)}}if(Gt.h)break n;for(X=0;5>X;++X){var Se=F[X];!X&&0<mt&&(Se+=1<<mt),We<Se&&(We=Se)}var De=o(er*qe,H),Oe=er,Re=o(Oe,ie);if(Re==null)var Fe=null;else e(65536>=Oe),Fe=Re;var tt=s(We);if(Fe==null||tt==null||De==null){we.a=1;break n}var it=De;for(W=he=0;W<er;++W){var ft=Fe[W],Ct=ft.G,St=ft.H,en=0,On=1,Fn=0;for(X=0;5>X;++X){Se=F[X],Ct[X]=it,St[X]=he,!X&&0<mt&&(Se+=1<<mt);i:{var Gn,Jr=Se,ci=we,Nr=tt,vi=it,io=he,Vu=0,aa=ci.m,mf=be(aa,1);if(i(Nr,0,0,Jr),mf){var Xa=be(aa,1)+1,_c=be(aa,1),la=be(aa,_c==0?1:8);Nr[la]=1,Xa==2&&(Nr[la=be(aa,8)]=1);var Os=1}else{var $i=s(19),pd=be(aa,4)+4;if(19<pd){ci.a=3;var vf=0;break i}for(Gn=0;Gn<pd;++Gn)$i[Le[Gn]]=be(aa,3);var yf=void 0,bf=void 0,gd=ci,Vr=$i,md=Jr,vm=Nr,Zc=0,Hu=gd.m,ym=8,bm=o(128,H);r:for(;$(bm,0,7,Vr,19);){if(be(Hu,1)){var _l=2+2*be(Hu,3);if((yf=2+be(Hu,_l))>md)break r}else yf=md;for(bf=0;bf<md&&yf--;){ge(Hu);var _m=bm[0+(127&ae(Hu))];de(Hu,Hu.u+_m.g);var Wu=_m.value;if(16>Wu)vm[bf++]=Wu,Wu!=0&&(ym=Wu);else{var wp=Wu==16,xp=Wu-16,wm=E[xp],Ca=be(Hu,v[xp])+wm;if(bf+Ca>md)break r;for(var wc=wp?ym:0;0<Ca--;)vm[bf++]=wc}}Zc=1;break r}Zc||(gd.a=3),Os=Zc}(Os=Os&&!aa.h)&&(Vu=$(vi,io,8,Nr,Jr)),Os&&Vu!=0?vf=Vu:(ci.a=3,vf=0)}if(vf==0)break n;if(On&&te[X]==1&&(On=it[he].g==0),en+=it[he].g,he+=vf,3>=X){var Kc,vd=tt[0];for(Kc=1;Kc<Se;++Kc)tt[Kc]>vd&&(vd=tt[Kc]);Fn+=vd}}if(ft.nd=On,ft.Qb=0,On&&(ft.qb=(Ct[3][St[3]+0].value<<24|Ct[1][St[1]+0].value<<16|Ct[2][St[2]+0].value)>>>0,en==0&&256>Ct[0][St[0]+0].value&&(ft.Qb=1,ft.qb+=Ct[0][St[0]+0].value<<8)),ft.jc=!ft.Qb&&6>Fn,ft.jc){var Xc,_u=ft;for(Xc=0;Xc<Yi;++Xc){var wu=Xc,Gu=_u.pd[wu],Ah=_u.G[0][_u.H[0]+wu];256<=Ah.value?(Gu.g=Ah.g+256,Gu.value=Ah.value):(Gu.g=0,Gu.value=0,wu>>=Zt(Ah,8,Gu),wu>>=Zt(_u.G[1][_u.H[1]+wu],16,Gu),wu>>=Zt(_u.G[2][_u.H[2]+wu],0,Gu),Zt(_u.G[3][_u.H[3]+wu],24,Gu))}}}dn.vc=yn,dn.Wb=er,dn.Ya=Fe,dn.yc=De,B=1;break t}B=0}if(!(Ce=B)){ne.a=3;break e}if(0<Ot){if($e.ua=1<<Ot,!se($e.Wa,Ot)){ne.a=1,Ce=0;break e}}else $e.ua=0;var _f=ne,qu=Pe,wy=Me,xu=_f.s,yd=xu.xc;if(_f.c=qu,_f.i=wy,xu.md=Ve(qu,yd),xu.wc=yd==0?-1:(1<<yd)-1,z){ne.xb=pf;break e}if((ct=s(Pe*Me))==null){ne.a=1,Ce=0;break e}Ce=(Ce=Wr(ne,ct,0,Pe,Me,Me,null))&&!Te.h;break e}return Ce?(ve!=null?ve[0]=ct:(e(ct==null),e(z)),ne.$=0,z||Un($e)):Un($e),Ce}function Do(w,M){var z=w.c*w.i,ne=z+M+16*M;return e(w.c<=M),w.V=s(ne),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+z+M,1)}function lr(w,M){var z=w.C,ne=M-z,ve=w.V,Ce=w.Ba+w.c*z;for(e(M<=w.l.o);0<ne;){var Pe=16<ne?16:ne,Me=w.l.ma,Te=w.l.width,$e=Te*Pe,ct=Me.ca,Ot=Me.tb+Te*z,Dt=w.Ta,wt=w.Ua;un(w,Pe,ve,Ce),Ui(Dt,wt,ct,Ot,$e),Qn(Me,z,z+Pe,ct,Ot,Te),ne-=Pe,ve+=Pe*w.c,z+=Pe}e(z==M),w.C=w.Ma=M}function br(){this.ub=this.yd=this.td=this.Rb=0}function Gi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ws(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function zl(){this.Yb=function(){var w=[];return function M(z,ne,ve){for(var Ce=ve[ne],Pe=0;Pe<Ce&&(z.push(ve.length>ne+1?[]:0),!(ve.length<ne+1));Pe++)M(z[Pe],ne+1,ve)}(w,0,[3,11]),w}()}function hu(){this.jb=s(3),this.Wc=a([4,8],zl),this.Xc=a([4,17],zl)}function Wc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function fu(){this.ld=this.La=this.dd=this.tc=0}function fc(){this.Na=this.la=0}function dc(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ul(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function cl(){this.uc=this.M=this.Nb=0,this.wa=Array(new fu),this.Y=0,this.ya=Array(new ul),this.aa=0,this.l=new So}function Nu(){this.y=s(16),this.f=s(8),this.ea=s(8)}function pc(){this.cb=this.a=0,this.sc="",this.m=new _e,this.Od=new br,this.Kc=new Gi,this.ed=new Wc,this.Qa=new ws,this.Ic=this.$c=this.Aa=0,this.D=new cl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,_e),this.ia=0,this.pb=o(4,dc),this.Pa=new hu,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Nu),this.Hd=0,this.rb=Array(new fc),this.sb=0,this.wa=Array(new fu),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ul),this.L=this.aa=0,this.gd=a([4,2],fu),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function So(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Gr(){var w=new pc;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Hn||(Hn=Io)),w}function hr(w,M,z){return w.a==0&&(w.a=M,w.sc=z,w.cb=0),0}function Ua(w,M,z){return 3<=z&&w[M+0]==157&&w[M+1]==1&&w[M+2]==42}function fa(w,M){if(w==null)return 0;if(w.a=0,w.sc="OK",M==null)return hr(w,2,"null VP8Io passed to VP8GetHeaders()");var z=M.data,ne=M.w,ve=M.ha;if(4>ve)return hr(w,7,"Truncated header.");var Ce=z[ne+0]|z[ne+1]<<8|z[ne+2]<<16,Pe=w.Od;if(Pe.Rb=!(1&Ce),Pe.td=Ce>>1&7,Pe.yd=Ce>>4&1,Pe.ub=Ce>>5,3<Pe.td)return hr(w,3,"Incorrect keyframe parameters.");if(!Pe.yd)return hr(w,4,"Frame not displayable.");ne+=3,ve-=3;var Me=w.Kc;if(Pe.Rb){if(7>ve)return hr(w,7,"cannot parse picture header");if(!Ua(z,ne,ve))return hr(w,3,"Bad code word");Me.c=16383&(z[ne+4]<<8|z[ne+3]),Me.Td=z[ne+4]>>6,Me.i=16383&(z[ne+6]<<8|z[ne+5]),Me.Ud=z[ne+6]>>6,ne+=7,ve-=7,w.za=Me.c+15>>4,w.Ub=Me.i+15>>4,M.width=Me.c,M.height=Me.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((Ce=w.Pa).jb,0,255,Ce.jb.length),e((Ce=w.Qa)!=null),Ce.Cb=0,Ce.Bb=0,Ce.Fb=1,i(Ce.Zb,0,0,Ce.Zb.length),i(Ce.Lb,0,0,Ce.Lb)}if(Pe.ub>ve)return hr(w,7,"bad partition length");R(Ce=w.m,z,ne,Pe.ub),ne+=Pe.ub,ve-=Pe.ub,Pe.Rb&&(Me.Ld=Ue(Ce),Me.Kd=Ue(Ce)),Me=w.Qa;var Te,$e=w.Pa;if(e(Ce!=null),e(Me!=null),Me.Cb=Ue(Ce),Me.Cb){if(Me.Bb=Ue(Ce),Ue(Ce)){for(Me.Fb=Ue(Ce),Te=0;4>Te;++Te)Me.Zb[Te]=Ue(Ce)?q(Ce,7):0;for(Te=0;4>Te;++Te)Me.Lb[Te]=Ue(Ce)?q(Ce,6):0}if(Me.Bb)for(Te=0;3>Te;++Te)$e.jb[Te]=Ue(Ce)?j(Ce,8):255}else Me.Bb=0;if(Ce.Ka)return hr(w,3,"cannot parse segment header");if((Me=w.ed).zd=Ue(Ce),Me.Tb=j(Ce,6),Me.wb=j(Ce,3),Me.Pc=Ue(Ce),Me.Pc&&Ue(Ce)){for($e=0;4>$e;++$e)Ue(Ce)&&(Me.vd[$e]=q(Ce,6));for($e=0;4>$e;++$e)Ue(Ce)&&(Me.od[$e]=q(Ce,6))}if(w.L=Me.Tb==0?0:Me.zd?1:2,Ce.Ka)return hr(w,3,"cannot parse filter header");var ct=ve;if(ve=Te=ne,ne=Te+ct,Me=ct,w.Xb=(1<<j(w.m,2))-1,ct<3*($e=w.Xb))z=7;else{for(Te+=3*$e,Me-=3*$e,ct=0;ct<$e;++ct){var Ot=z[ve+0]|z[ve+1]<<8|z[ve+2]<<16;Ot>Me&&(Ot=Me),R(w.Jc[+ct],z,Te,Ot),Te+=Ot,Me-=Ot,ve+=3}R(w.Jc[+$e],z,Te,Me),z=Te<ne?0:5}if(z!=0)return hr(w,z,"cannot parse partitions");for(z=j(Te=w.m,7),ve=Ue(Te)?q(Te,4):0,ne=Ue(Te)?q(Te,4):0,Me=Ue(Te)?q(Te,4):0,$e=Ue(Te)?q(Te,4):0,Te=Ue(Te)?q(Te,4):0,ct=w.Qa,Ot=0;4>Ot;++Ot){if(ct.Cb){var Dt=ct.Zb[Ot];ct.Fb||(Dt+=z)}else{if(0<Ot){w.pb[Ot]=w.pb[0];continue}Dt=z}var wt=w.pb[Ot];wt.Sc[0]=nn[Er(Dt+ve,127)],wt.Sc[1]=kn[Er(Dt+0,127)],wt.Eb[0]=2*nn[Er(Dt+ne,127)],wt.Eb[1]=101581*kn[Er(Dt+Me,127)]>>16,8>wt.Eb[1]&&(wt.Eb[1]=8),wt.Qc[0]=nn[Er(Dt+$e,117)],wt.Qc[1]=kn[Er(Dt+Te,127)],wt.lc=Dt+Te}if(!Pe.Rb)return hr(w,4,"Not a key frame.");for(Ue(Ce),Pe=w.Pa,z=0;4>z;++z){for(ve=0;8>ve;++ve)for(ne=0;3>ne;++ne)for(Me=0;11>Me;++Me)$e=Ne(Ce,no[z][ve][ne][Me])?j(Ce,8):ps[z][ve][ne][Me],Pe.Wc[z][ve].Yb[ne][Me]=$e;for(ve=0;17>ve;++ve)Pe.Xc[z][ve]=Pe.Wc[z][qc[ve]]}return w.kc=Ue(Ce),w.kc&&(w.Bd=j(Ce,8)),w.cb=1}function Io(w,M,z,ne,ve,Ce,Pe){var Me=M[ve].Yb[z];for(z=0;16>ve;++ve){if(!Ne(w,Me[z+0]))return ve;for(;!Ne(w,Me[z+1]);)if(Me=M[++ve].Yb[0],z=0,ve==16)return 16;var Te=M[ve+1].Yb;if(Ne(w,Me[z+2])){var $e=w,ct=0;if(Ne($e,(Dt=Me)[(Ot=z)+3]))if(Ne($e,Dt[Ot+6])){for(Me=0,Ot=2*(ct=Ne($e,Dt[Ot+8]))+(Dt=Ne($e,Dt[Ot+9+ct])),ct=0,Dt=Cr[Ot];Dt[Me];++Me)ct+=ct+Ne($e,Dt[Me]);ct+=3+(8<<Ot)}else Ne($e,Dt[Ot+7])?(ct=7+2*Ne($e,165),ct+=Ne($e,145)):ct=5+Ne($e,159);else ct=Ne($e,Dt[Ot+4])?3+Ne($e,Dt[Ot+5]):2;Me=Te[2]}else ct=1,Me=Te[1];Te=Pe+Ki[ve],0>($e=w).b&&Ee($e);var Ot,Dt=$e.b,wt=(Ot=$e.Ca>>1)-($e.I>>Dt)>>31;--$e.b,$e.Ca+=wt,$e.Ca|=1,$e.I-=(Ot+1&wt)<<Dt,Ce[Te]=((ct^wt)-wt)*ne[(0<ve)+0]}return 16}function Ul(w){var M=w.rb[w.sb-1];M.la=0,M.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function pr(w,M){if(w==null)return 0;if(M==null)return hr(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!fa(w,M))return 0;if(e(w.cb),M.ac==null||M.ac(M)){M.ob&&(w.L=0);var z=La[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=M.v-z>>4,w.zb=M.j-z>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=M.o+15+z>>4,w.Hb=M.va+15+z>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ne=w.ed;for(z=0;4>z;++z){var ve;if(w.Qa.Cb){var Ce=w.Qa.Lb[z];w.Qa.Fb||(Ce+=ne.Tb)}else Ce=ne.Tb;for(ve=0;1>=ve;++ve){var Pe=w.gd[z][ve],Me=Ce;if(ne.Pc&&(Me+=ne.vd[0],ve&&(Me+=ne.od[0])),0<(Me=0>Me?0:63<Me?63:Me)){var Te=Me;0<ne.wb&&(Te=4<ne.wb?Te>>2:Te>>1)>9-ne.wb&&(Te=9-ne.wb),1>Te&&(Te=1),Pe.dd=Te,Pe.tc=2*Me+Te,Pe.ld=40<=Me?2:15<=Me?1:0}else Pe.tc=0;Pe.La=ve}}}z=0}else hr(w,6,"Frame setup failed"),z=w.a;if(z=z==0){if(z){w.$c=0,0<w.Aa||(w.Ic=fd);e:{z=w.Ic,ne=4*(Te=w.za);var $e=32*Te,ct=Te+1,Ot=0<w.L?Te*(0<w.Aa?2:1):0,Dt=(w.Aa==2?2:1)*Te;if((Pe=ne+832+(ve=3*(16*z+La[w.L])/2*$e)+(Ce=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Pe)z=0;else{if(Pe>w.Vb){if(w.Vb=0,w.Ec=s(Pe),w.Fc=0,w.Ec==null){z=hr(w,1,"no memory during frame initialization.");break e}w.Vb=Pe}Pe=w.Ec,Me=w.Fc,w.Ac=Pe,w.Bc=Me,Me+=ne,w.Gd=o($e,Nu),w.Hd=0,w.rb=o(ct+1,fc),w.sb=1,w.wa=Ot?o(Ot,fu):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Te),e(!0),w.oc=Pe,w.pc=Me,Me+=832,w.ya=o(Dt,ul),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Te),w.R=16*Te,w.B=8*Te,Te=($e=La[w.L])*w.R,$e=$e/2*w.B,w.sa=Pe,w.ta=Me+Te,w.qa=w.sa,w.ra=w.ta+16*z*w.R+$e,w.Ha=w.qa,w.Ia=w.ra+8*z*w.B+$e,w.$c=0,Me+=ve,w.mb=Ce?Pe:null,w.nb=Ce?Me:null,e(Me+Ce<=w.Fc+w.Vb),Ul(w),i(w.Ac,w.Bc,0,ne),z=1}}if(z){if(M.ka=0,M.y=w.sa,M.O=w.ta,M.f=w.qa,M.N=w.ra,M.ea=w.Ha,M.Vd=w.Ia,M.fa=w.R,M.Rc=w.B,M.F=null,M.J=0,!Uu){for(z=-255;255>=z;++z)mi[255+z]=0>z?-z:z;for(z=-1020;1020>=z;++z)wo[1020+z]=-128>z?-128:127<z?127:z;for(z=-112;112>=z;++z)eo[112+z]=-16>z?-16:15<z?15:z;for(z=-255;510>=z;++z)Po[255+z]=0>z?0:255<z?255:z;Uu=1}yt=Va,Vt=hl,Sn=da,$n=Ti,cr=No,Mt=Bu,xi=vu,ri=Xo,Kl=Eo,Us=Yl,Li=Gl,ta=ql,_a=ei,na=vc,ra=Ri,ia=Kn,Ir=Fi,Uo=gl,Ho[0]=$r,Ho[1]=du,Ho[2]=gr,Ho[3]=Ro,Ho[4]=Fu,Ho[5]=dl,Ho[6]=fl,Ho[7]=Fo,Ho[8]=ju,Ho[9]=Ga,oa[0]=$l,oa[1]=Ru,oa[2]=Bo,oa[3]=pa,oa[4]=rs,oa[5]=gc,oa[6]=pu,ko[0]=qa,ko[1]=Ha,ko[2]=Vl,ko[3]=fr,ko[4]=Hl,ko[5]=mc,ko[6]=gu,z=1}else z=0}z&&(z=function(wt,Ht){for(wt.M=0;wt.M<wt.Va;++wt.M){var zt,ht=wt.Jc[wt.M&wt.Xb],vt=wt.m,Xt=wt;for(zt=0;zt<Xt.za;++zt){var ln=vt,Qt=Xt,En=Qt.Ac,xn=Qt.Bc+4*zt,Wn=Qt.zc,h=Qt.ya[Qt.aa+zt];if(Qt.Qa.Bb?h.$b=Ne(ln,Qt.Pa.jb[0])?2+Ne(ln,Qt.Pa.jb[2]):Ne(ln,Qt.Pa.jb[1]):h.$b=0,Qt.kc&&(h.Ad=Ne(ln,Qt.Bd)),h.Za=!Ne(ln,145)+0,h.Za){var g=h.Ob,_=0;for(Qt=0;4>Qt;++Qt){var x,k=Wn[0+Qt];for(x=0;4>x;++x){k=Ci[En[xn+x]][k];for(var B=Oi[Ne(ln,k[0])];0<B;)B=Oi[2*B+Ne(ln,k[B])];k=-B,En[xn+x]=k}r(g,_,En,xn,4),_+=4,Wn[0+Qt]=k}}else k=Ne(ln,156)?Ne(ln,128)?1:3:Ne(ln,163)?2:0,h.Ob[0]=k,i(En,xn,k,4),i(Wn,0,k,4);h.Dd=Ne(ln,142)?Ne(ln,114)?Ne(ln,183)?1:3:2:0}if(Xt.m.Ka)return hr(wt,7,"Premature end-of-partition0 encountered.");for(;wt.ja<wt.za;++wt.ja){if(Xt=ht,ln=(vt=wt).rb[vt.sb-1],En=vt.rb[vt.sb+vt.ja],zt=vt.ya[vt.aa+vt.ja],xn=vt.kc?zt.Ad:0)ln.la=En.la=0,zt.Za||(ln.Na=En.Na=0),zt.Hc=0,zt.Gc=0,zt.ia=0;else{var W,X;if(ln=En,En=Xt,xn=vt.Pa.Xc,Wn=vt.ya[vt.aa+vt.ja],h=vt.pb[Wn.$b],Qt=Wn.ad,g=0,_=vt.rb[vt.sb-1],k=x=0,i(Qt,g,0,384),Wn.Za)var he=0,we=xn[3];else{B=s(16);var Ge=ln.Na+_.Na;if(Ge=Hn(En,xn[1],Ge,h.Eb,0,B,0),ln.Na=_.Na=(0<Ge)+0,1<Ge)yt(B,0,Qt,g);else{var ze=B[0]+3>>3;for(B=0;256>B;B+=16)Qt[g+B]=ze}he=1,we=xn[0]}var mt=15&ln.la,At=15&_.la;for(B=0;4>B;++B){var Gt=1&At;for(ze=X=0;4>ze;++ze)mt=mt>>1|(Gt=(Ge=Hn(En,we,Ge=Gt+(1&mt),h.Sc,he,Qt,g))>he)<<7,X=X<<2|(3<Ge?3:1<Ge?2:Qt[g+0]!=0),g+=16;mt>>=4,At=At>>1|Gt<<7,x=(x<<8|X)>>>0}for(we=mt,he=At>>4,W=0;4>W;W+=2){for(X=0,mt=ln.la>>4+W,At=_.la>>4+W,B=0;2>B;++B){for(Gt=1&At,ze=0;2>ze;++ze)Ge=Gt+(1&mt),mt=mt>>1|(Gt=0<(Ge=Hn(En,xn[2],Ge,h.Qc,0,Qt,g)))<<3,X=X<<2|(3<Ge?3:1<Ge?2:Qt[g+0]!=0),g+=16;mt>>=2,At=At>>1|Gt<<5}k|=X<<4*W,we|=mt<<4<<W,he|=(240&At)<<W}ln.la=we,_.la=he,Wn.Hc=x,Wn.Gc=k,Wn.ia=43690&k?0:h.ia,xn=!(x|k)}if(0<vt.L&&(vt.wa[vt.Y+vt.ja]=vt.gd[zt.$b][zt.Za],vt.wa[vt.Y+vt.ja].La|=!xn),Xt.Ka)return hr(wt,7,"Premature end-of-file encountered.")}if(Ul(wt),vt=Ht,Xt=1,zt=(ht=wt).D,ln=0<ht.L&&ht.M>=ht.zb&&ht.M<=ht.Va,ht.Aa==0)e:{if(zt.M=ht.M,zt.uc=ln,yu(ht,zt),Xt=1,zt=(X=ht.D).Nb,ln=(k=La[ht.L])*ht.R,En=k/2*ht.B,B=16*zt*ht.R,ze=8*zt*ht.B,xn=ht.sa,Wn=ht.ta-ln+B,h=ht.qa,Qt=ht.ra-En+ze,g=ht.Ha,_=ht.Ia-En+ze,At=(mt=X.M)==0,x=mt>=ht.Va-1,ht.Aa==2&&yu(ht,X),X.uc)for(Gt=(Ge=ht).D.M,e(Ge.D.uc),X=Ge.yb;X<Ge.Hb;++X){he=X,we=Gt;var dn=(yn=(Se=Ge).D).Nb;W=Se.R;var yn=yn.wa[yn.Y+he],er=Se.sa,We=Se.ta+16*dn*W+16*he,qe=yn.dd,ut=yn.tc;if(ut!=0)if(e(3<=ut),Se.L==1)0<he&&ia(er,We,W,ut+4),yn.La&&Uo(er,We,W,ut),0<we&&ra(er,We,W,ut+4),yn.La&&Ir(er,We,W,ut);else{var It=Se.B,bt=Se.qa,Tt=Se.ra+8*dn*It+8*he,fe=Se.Ha,Se=Se.Ia+8*dn*It+8*he;dn=yn.ld,0<he&&(ri(er,We,W,ut+4,qe,dn),Us(bt,Tt,fe,Se,It,ut+4,qe,dn)),yn.La&&(ta(er,We,W,ut,qe,dn),na(bt,Tt,fe,Se,It,ut,qe,dn)),0<we&&(xi(er,We,W,ut+4,qe,dn),Kl(bt,Tt,fe,Se,It,ut+4,qe,dn)),yn.La&&(Li(er,We,W,ut,qe,dn),_a(bt,Tt,fe,Se,It,ut,qe,dn))}}if(ht.ia&&alert("todo:DitherRow"),vt.put!=null){if(X=16*mt,mt=16*(mt+1),At?(vt.y=ht.sa,vt.O=ht.ta+B,vt.f=ht.qa,vt.N=ht.ra+ze,vt.ea=ht.Ha,vt.W=ht.Ia+ze):(X-=k,vt.y=xn,vt.O=Wn,vt.f=h,vt.N=Qt,vt.ea=g,vt.W=_),x||(mt-=k),mt>vt.o&&(mt=vt.o),vt.F=null,vt.J=null,ht.Fa!=null&&0<ht.Fa.length&&X<mt&&(vt.J=ji(ht,vt,X,mt-X),vt.F=ht.mb,vt.F==null&&vt.F.length==0)){Xt=hr(ht,3,"Could not decode alpha data.");break e}X<vt.j&&(k=vt.j-X,X=vt.j,e(!(1&k)),vt.O+=ht.R*k,vt.N+=ht.B*(k>>1),vt.W+=ht.B*(k>>1),vt.F!=null&&(vt.J+=vt.width*k)),X<mt&&(vt.O+=vt.v,vt.N+=vt.v>>1,vt.W+=vt.v>>1,vt.F!=null&&(vt.J+=vt.v),vt.ka=X-vt.j,vt.U=vt.va-vt.v,vt.T=mt-X,Xt=vt.put(vt))}zt+1!=ht.Ic||x||(r(ht.sa,ht.ta-ln,xn,Wn+16*ht.R,ln),r(ht.qa,ht.ra-En,h,Qt+8*ht.B,En),r(ht.Ha,ht.Ia-En,g,_+8*ht.B,En))}if(!Xt)return hr(wt,6,"Output aborted.")}return 1}(w,M)),M.bc!=null&&M.bc(M),z&=1}return z?(w.cb=0,z):0}function qr(w,M,z,ne,ve){ve=w[M+z+32*ne]+(ve>>3),w[M+z+32*ne]=-256&ve?0>ve?0:255:ve}function $a(w,M,z,ne,ve,Ce){qr(w,M,0,z,ne+ve),qr(w,M,1,z,ne+Ce),qr(w,M,2,z,ne-Ce),qr(w,M,3,z,ne-ve)}function xs(w){return(20091*w>>16)+w}function Ls(w,M,z,ne){var ve,Ce=0,Pe=s(16);for(ve=0;4>ve;++ve){var Me=w[M+0]+w[M+8],Te=w[M+0]-w[M+8],$e=(35468*w[M+4]>>16)-xs(w[M+12]),ct=xs(w[M+4])+(35468*w[M+12]>>16);Pe[Ce+0]=Me+ct,Pe[Ce+1]=Te+$e,Pe[Ce+2]=Te-$e,Pe[Ce+3]=Me-ct,Ce+=4,M++}for(ve=Ce=0;4>ve;++ve)Me=(w=Pe[Ce+0]+4)+Pe[Ce+8],Te=w-Pe[Ce+8],$e=(35468*Pe[Ce+4]>>16)-xs(Pe[Ce+12]),qr(z,ne,0,0,Me+(ct=xs(Pe[Ce+4])+(35468*Pe[Ce+12]>>16))),qr(z,ne,1,0,Te+$e),qr(z,ne,2,0,Te-$e),qr(z,ne,3,0,Me-ct),Ce++,ne+=32}function Bu(w,M,z,ne){var ve=w[M+0]+4,Ce=35468*w[M+4]>>16,Pe=xs(w[M+4]),Me=35468*w[M+1]>>16;$a(z,ne,0,ve+Pe,w=xs(w[M+1]),Me),$a(z,ne,1,ve+Ce,w,Me),$a(z,ne,2,ve-Ce,w,Me),$a(z,ne,3,ve-Pe,w,Me)}function hl(w,M,z,ne,ve){Ls(w,M,z,ne),ve&&Ls(w,M+16,z,ne+4)}function da(w,M,z,ne){Vt(w,M+0,z,ne,1),Vt(w,M+32,z,ne+128,1)}function Ti(w,M,z,ne){var ve;for(w=w[M+0]+4,ve=0;4>ve;++ve)for(M=0;4>M;++M)qr(z,ne,M,ve,w)}function No(w,M,z,ne){w[M+0]&&$n(w,M+0,z,ne),w[M+16]&&$n(w,M+16,z,ne+4),w[M+32]&&$n(w,M+32,z,ne+128),w[M+48]&&$n(w,M+48,z,ne+128+4)}function Va(w,M,z,ne){var ve,Ce=s(16);for(ve=0;4>ve;++ve){var Pe=w[M+0+ve]+w[M+12+ve],Me=w[M+4+ve]+w[M+8+ve],Te=w[M+4+ve]-w[M+8+ve],$e=w[M+0+ve]-w[M+12+ve];Ce[0+ve]=Pe+Me,Ce[8+ve]=Pe-Me,Ce[4+ve]=$e+Te,Ce[12+ve]=$e-Te}for(ve=0;4>ve;++ve)Pe=(w=Ce[0+4*ve]+3)+Ce[3+4*ve],Me=Ce[1+4*ve]+Ce[2+4*ve],Te=Ce[1+4*ve]-Ce[2+4*ve],$e=w-Ce[3+4*ve],z[ne+0]=Pe+Me>>3,z[ne+16]=$e+Te>>3,z[ne+32]=Pe-Me>>3,z[ne+48]=$e-Te>>3,ne+=64}function mo(w,M,z){var ne,ve=M-32,Ce=gi,Pe=255-w[ve-1];for(ne=0;ne<z;++ne){var Me,Te=Ce,$e=Pe+w[M-1];for(Me=0;Me<z;++Me)w[M+Me]=Te[$e+w[ve+Me]];M+=32}}function du(w,M){mo(w,M,4)}function Ha(w,M){mo(w,M,8)}function Ru(w,M){mo(w,M,16)}function Bo(w,M){var z;for(z=0;16>z;++z)r(w,M+32*z,w,M-32,16)}function pa(w,M){var z;for(z=16;0<z;--z)i(w,M,w[M-1],16),M+=32}function Wa(w,M,z){var ne;for(ne=0;16>ne;++ne)i(M,z+32*ne,w,16)}function $l(w,M){var z,ne=16;for(z=0;16>z;++z)ne+=w[M-1+32*z]+w[M+z-32];Wa(ne>>5,w,M)}function rs(w,M){var z,ne=8;for(z=0;16>z;++z)ne+=w[M-1+32*z];Wa(ne>>4,w,M)}function gc(w,M){var z,ne=8;for(z=0;16>z;++z)ne+=w[M+z-32];Wa(ne>>4,w,M)}function pu(w,M){Wa(128,w,M)}function ur(w,M,z){return w+2*M+z+2>>2}function gr(w,M){var z,ne=M-32;for(ne=new Uint8Array([ur(w[ne-1],w[ne+0],w[ne+1]),ur(w[ne+0],w[ne+1],w[ne+2]),ur(w[ne+1],w[ne+2],w[ne+3]),ur(w[ne+2],w[ne+3],w[ne+4])]),z=0;4>z;++z)r(w,M+32*z,ne,0,ne.length)}function Ro(w,M){var z=w[M-1],ne=w[M-1+32],ve=w[M-1+64],Ce=w[M-1+96];rt(w,M+0,16843009*ur(w[M-1-32],z,ne)),rt(w,M+32,16843009*ur(z,ne,ve)),rt(w,M+64,16843009*ur(ne,ve,Ce)),rt(w,M+96,16843009*ur(ve,Ce,Ce))}function $r(w,M){var z,ne=4;for(z=0;4>z;++z)ne+=w[M+z-32]+w[M-1+32*z];for(ne>>=3,z=0;4>z;++z)i(w,M+32*z,ne,4)}function Fu(w,M){var z=w[M-1+0],ne=w[M-1+32],ve=w[M-1+64],Ce=w[M-1-32],Pe=w[M+0-32],Me=w[M+1-32],Te=w[M+2-32],$e=w[M+3-32];w[M+0+96]=ur(ne,ve,w[M-1+96]),w[M+1+96]=w[M+0+64]=ur(z,ne,ve),w[M+2+96]=w[M+1+64]=w[M+0+32]=ur(Ce,z,ne),w[M+3+96]=w[M+2+64]=w[M+1+32]=w[M+0+0]=ur(Pe,Ce,z),w[M+3+64]=w[M+2+32]=w[M+1+0]=ur(Me,Pe,Ce),w[M+3+32]=w[M+2+0]=ur(Te,Me,Pe),w[M+3+0]=ur($e,Te,Me)}function fl(w,M){var z=w[M+1-32],ne=w[M+2-32],ve=w[M+3-32],Ce=w[M+4-32],Pe=w[M+5-32],Me=w[M+6-32],Te=w[M+7-32];w[M+0+0]=ur(w[M+0-32],z,ne),w[M+1+0]=w[M+0+32]=ur(z,ne,ve),w[M+2+0]=w[M+1+32]=w[M+0+64]=ur(ne,ve,Ce),w[M+3+0]=w[M+2+32]=w[M+1+64]=w[M+0+96]=ur(ve,Ce,Pe),w[M+3+32]=w[M+2+64]=w[M+1+96]=ur(Ce,Pe,Me),w[M+3+64]=w[M+2+96]=ur(Pe,Me,Te),w[M+3+96]=ur(Me,Te,Te)}function dl(w,M){var z=w[M-1+0],ne=w[M-1+32],ve=w[M-1+64],Ce=w[M-1-32],Pe=w[M+0-32],Me=w[M+1-32],Te=w[M+2-32],$e=w[M+3-32];w[M+0+0]=w[M+1+64]=Ce+Pe+1>>1,w[M+1+0]=w[M+2+64]=Pe+Me+1>>1,w[M+2+0]=w[M+3+64]=Me+Te+1>>1,w[M+3+0]=Te+$e+1>>1,w[M+0+96]=ur(ve,ne,z),w[M+0+64]=ur(ne,z,Ce),w[M+0+32]=w[M+1+96]=ur(z,Ce,Pe),w[M+1+32]=w[M+2+96]=ur(Ce,Pe,Me),w[M+2+32]=w[M+3+96]=ur(Pe,Me,Te),w[M+3+32]=ur(Me,Te,$e)}function Fo(w,M){var z=w[M+0-32],ne=w[M+1-32],ve=w[M+2-32],Ce=w[M+3-32],Pe=w[M+4-32],Me=w[M+5-32],Te=w[M+6-32],$e=w[M+7-32];w[M+0+0]=z+ne+1>>1,w[M+1+0]=w[M+0+64]=ne+ve+1>>1,w[M+2+0]=w[M+1+64]=ve+Ce+1>>1,w[M+3+0]=w[M+2+64]=Ce+Pe+1>>1,w[M+0+32]=ur(z,ne,ve),w[M+1+32]=w[M+0+96]=ur(ne,ve,Ce),w[M+2+32]=w[M+1+96]=ur(ve,Ce,Pe),w[M+3+32]=w[M+2+96]=ur(Ce,Pe,Me),w[M+3+64]=ur(Pe,Me,Te),w[M+3+96]=ur(Me,Te,$e)}function Ga(w,M){var z=w[M-1+0],ne=w[M-1+32],ve=w[M-1+64],Ce=w[M-1+96];w[M+0+0]=z+ne+1>>1,w[M+2+0]=w[M+0+32]=ne+ve+1>>1,w[M+2+32]=w[M+0+64]=ve+Ce+1>>1,w[M+1+0]=ur(z,ne,ve),w[M+3+0]=w[M+1+32]=ur(ne,ve,Ce),w[M+3+32]=w[M+1+64]=ur(ve,Ce,Ce),w[M+3+64]=w[M+2+64]=w[M+0+96]=w[M+1+96]=w[M+2+96]=w[M+3+96]=Ce}function ju(w,M){var z=w[M-1+0],ne=w[M-1+32],ve=w[M-1+64],Ce=w[M-1+96],Pe=w[M-1-32],Me=w[M+0-32],Te=w[M+1-32],$e=w[M+2-32];w[M+0+0]=w[M+2+32]=z+Pe+1>>1,w[M+0+32]=w[M+2+64]=ne+z+1>>1,w[M+0+64]=w[M+2+96]=ve+ne+1>>1,w[M+0+96]=Ce+ve+1>>1,w[M+3+0]=ur(Me,Te,$e),w[M+2+0]=ur(Pe,Me,Te),w[M+1+0]=w[M+3+32]=ur(z,Pe,Me),w[M+1+32]=w[M+3+64]=ur(ne,z,Pe),w[M+1+64]=w[M+3+96]=ur(ve,ne,z),w[M+1+96]=ur(Ce,ve,ne)}function Vl(w,M){var z;for(z=0;8>z;++z)r(w,M+32*z,w,M-32,8)}function fr(w,M){var z;for(z=0;8>z;++z)i(w,M,w[M-1],8),M+=32}function Mr(w,M,z){var ne;for(ne=0;8>ne;++ne)i(M,z+32*ne,w,8)}function qa(w,M){var z,ne=8;for(z=0;8>z;++z)ne+=w[M+z-32]+w[M-1+32*z];Mr(ne>>4,w,M)}function mc(w,M){var z,ne=4;for(z=0;8>z;++z)ne+=w[M+z-32];Mr(ne>>3,w,M)}function Hl(w,M){var z,ne=4;for(z=0;8>z;++z)ne+=w[M-1+32*z];Mr(ne>>3,w,M)}function gu(w,M){Mr(128,w,M)}function pl(w,M,z){var ne=w[M-z],ve=w[M+0],Ce=3*(ve-ne)+sa[1020+w[M-2*z]-w[M+z]],Pe=Zi[112+(Ce+4>>3)];w[M-z]=gi[255+ne+Zi[112+(Ce+3>>3)]],w[M+0]=gi[255+ve-Pe]}function Wl(w,M,z,ne){var ve=w[M+0],Ce=w[M+z];return As[255+w[M-2*z]-w[M-z]]>ne||As[255+Ce-ve]>ne}function mu(w,M,z,ne){return 4*As[255+w[M-z]-w[M+0]]+As[255+w[M-2*z]-w[M+z]]<=ne}function Dr(w,M,z,ne,ve){var Ce=w[M-3*z],Pe=w[M-2*z],Me=w[M-z],Te=w[M+0],$e=w[M+z],ct=w[M+2*z],Ot=w[M+3*z];return 4*As[255+Me-Te]+As[255+Pe-$e]>ne?0:As[255+w[M-4*z]-Ce]<=ve&&As[255+Ce-Pe]<=ve&&As[255+Pe-Me]<=ve&&As[255+Ot-ct]<=ve&&As[255+ct-$e]<=ve&&As[255+$e-Te]<=ve}function Ri(w,M,z,ne){var ve=2*ne+1;for(ne=0;16>ne;++ne)mu(w,M+ne,z,ve)&&pl(w,M+ne,z)}function Kn(w,M,z,ne){var ve=2*ne+1;for(ne=0;16>ne;++ne)mu(w,M+ne*z,1,ve)&&pl(w,M+ne*z,1)}function Fi(w,M,z,ne){var ve;for(ve=3;0<ve;--ve)Ri(w,M+=4*z,z,ne)}function gl(w,M,z,ne){var ve;for(ve=3;0<ve;--ve)Kn(w,M+=4,z,ne)}function ga(w,M,z,ne,ve,Ce,Pe,Me){for(Ce=2*Ce+1;0<ve--;){if(Dr(w,M,z,Ce,Pe))if(Wl(w,M,z,Me))pl(w,M,z);else{var Te=w,$e=M,ct=z,Ot=Te[$e-2*ct],Dt=Te[$e-ct],wt=Te[$e+0],Ht=Te[$e+ct],zt=Te[$e+2*ct],ht=27*(Xt=sa[1020+3*(wt-Dt)+sa[1020+Ot-Ht]])+63>>7,vt=18*Xt+63>>7,Xt=9*Xt+63>>7;Te[$e-3*ct]=gi[255+Te[$e-3*ct]+Xt],Te[$e-2*ct]=gi[255+Ot+vt],Te[$e-ct]=gi[255+Dt+ht],Te[$e+0]=gi[255+wt-ht],Te[$e+ct]=gi[255+Ht-vt],Te[$e+2*ct]=gi[255+zt-Xt]}M+=ne}}function wi(w,M,z,ne,ve,Ce,Pe,Me){for(Ce=2*Ce+1;0<ve--;){if(Dr(w,M,z,Ce,Pe))if(Wl(w,M,z,Me))pl(w,M,z);else{var Te=w,$e=M,ct=z,Ot=Te[$e-ct],Dt=Te[$e+0],wt=Te[$e+ct],Ht=Zi[112+((zt=3*(Dt-Ot))+4>>3)],zt=Zi[112+(zt+3>>3)],ht=Ht+1>>1;Te[$e-2*ct]=gi[255+Te[$e-2*ct]+ht],Te[$e-ct]=gi[255+Ot+zt],Te[$e+0]=gi[255+Dt-Ht],Te[$e+ct]=gi[255+wt-ht]}M+=ne}}function vu(w,M,z,ne,ve,Ce){ga(w,M,z,1,16,ne,ve,Ce)}function Xo(w,M,z,ne,ve,Ce){ga(w,M,1,z,16,ne,ve,Ce)}function Gl(w,M,z,ne,ve,Ce){var Pe;for(Pe=3;0<Pe;--Pe)wi(w,M+=4*z,z,1,16,ne,ve,Ce)}function ql(w,M,z,ne,ve,Ce){var Pe;for(Pe=3;0<Pe;--Pe)wi(w,M+=4,1,z,16,ne,ve,Ce)}function Eo(w,M,z,ne,ve,Ce,Pe,Me){ga(w,M,ve,1,8,Ce,Pe,Me),ga(z,ne,ve,1,8,Ce,Pe,Me)}function Yl(w,M,z,ne,ve,Ce,Pe,Me){ga(w,M,1,ve,8,Ce,Pe,Me),ga(z,ne,1,ve,8,Ce,Pe,Me)}function ei(w,M,z,ne,ve,Ce,Pe,Me){wi(w,M+4*ve,ve,1,8,Ce,Pe,Me),wi(z,ne+4*ve,ve,1,8,Ce,Pe,Me)}function vc(w,M,z,ne,ve,Ce,Pe,Me){wi(w,M+4,1,ve,8,Ce,Pe,Me),wi(z,ne+4,1,ve,8,Ce,Pe,Me)}function us(){this.ba=new Bn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ar,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function jo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Zl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zo(){this.ua=0,this.Wa=new Q,this.vb=new Q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new H}function ml(){this.xb=this.a=0,this.l=new So,this.ca=new Bn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Z,this.Pb=0,this.wd=new Z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zo,this.ab=0,this.gc=o(4,Zl),this.Oc=0}function vl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new So,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ti(w,M,z,ne,ve,Ce,Pe){for(w=w==null?0:w[M+0],M=0;M<Pe;++M)ve[Ce+M]=w+z[ne+M]&255,w=ve[Ce+M]}function vo(w,M,z,ne,ve,Ce,Pe){var Me;if(w==null)ti(null,null,z,ne,ve,Ce,Pe);else for(Me=0;Me<Pe;++Me)ve[Ce+Me]=w[M+Me]+z[ne+Me]&255}function ma(w,M,z,ne,ve,Ce,Pe){if(w==null)ti(null,null,z,ne,ve,Ce,Pe);else{var Me,Te=w[M+0],$e=Te,ct=Te;for(Me=0;Me<Pe;++Me)$e=ct+(Te=w[M+Me])-$e,ct=z[ne+Me]+(-256&$e?0>$e?0:255:$e)&255,$e=Te,ve[Ce+Me]=ct}}function ji(w,M,z,ne){var ve=M.width,Ce=M.o;if(e(w!=null&&M!=null),0>z||0>=ne||z+ne>Ce)return null;if(!w.Cc){if(w.ga==null){var Pe;if(w.ga=new vl,(Pe=w.ga==null)||(Pe=M.width*M.o,e(w.Gb.length==0),w.Gb=s(Pe),w.Uc=0,w.Gb==null?Pe=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Pe=1),Pe=!Pe),!Pe){Pe=w.ga;var Me=w.Fa,Te=w.P,$e=w.qc,ct=w.mb,Ot=w.nb,Dt=Te+1,wt=$e-1,Ht=Pe.l;if(e(Me!=null&&ct!=null&&M!=null),Xr[0]=null,Xr[1]=ti,Xr[2]=vo,Xr[3]=ma,Pe.ca=ct,Pe.tb=Ot,Pe.c=M.width,Pe.i=M.height,e(0<Pe.c&&0<Pe.i),1>=$e)M=0;else if(Pe.$a=Me[Te+0]>>0&3,Pe.Z=Me[Te+0]>>2&3,Pe.Lc=Me[Te+0]>>4&3,Te=Me[Te+0]>>6&3,0>Pe.$a||1<Pe.$a||4<=Pe.Z||1<Pe.Lc||Te)M=0;else if(Ht.put=Ft,Ht.ac=ki,Ht.bc=Je,Ht.ma=Pe,Ht.width=M.width,Ht.height=M.height,Ht.Da=M.Da,Ht.v=M.v,Ht.va=M.va,Ht.j=M.j,Ht.o=M.o,Pe.$a)e:{e(Pe.$a==1),M=li();t:for(;;){if(M==null){M=0;break e}if(e(Pe!=null),Pe.mc=M,M.c=Pe.c,M.i=Pe.i,M.l=Pe.l,M.l.ma=Pe,M.l.width=Pe.c,M.l.height=Pe.i,M.a=0,re(M.m,Me,Dt,wt),!kr(Pe.c,Pe.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&An(M.s)?(Pe.ic=1,Me=M.c*M.i,M.Ta=null,M.Ua=0,M.V=s(Me),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(Pe.ic=0,M=Do(M,Pe.c)),!M))break t;M=1;break e}Pe.mc=null,M=0}else M=wt>=Pe.c*Pe.i;Pe=!M}if(Pe)return null;w.ga.Lc!=1?w.Ga=0:ne=Ce-z}e(w.ga!=null),e(z+ne<=Ce);e:{if(M=(Me=w.ga).c,Ce=Me.l.o,Me.$a==0){if(Dt=w.rc,wt=w.Vc,Ht=w.Fa,Te=w.P+1+z*M,$e=w.mb,ct=w.nb+z*M,e(Te<=w.P+w.qc),Me.Z!=0)for(e(Xr[Me.Z]!=null),Pe=0;Pe<ne;++Pe)Xr[Me.Z](Dt,wt,Ht,Te,$e,ct,M),Dt=$e,wt=ct,ct+=M,Te+=M;else for(Pe=0;Pe<ne;++Pe)r($e,ct,Ht,Te,M),Dt=$e,wt=ct,ct+=M,Te+=M;w.rc=Dt,w.Vc=wt}else{if(e(Me.mc!=null),M=z+ne,e((Pe=Me.mc)!=null),e(M<=Pe.i),Pe.C>=M)M=1;else if(Me.ic||xt(),Me.ic){Me=Pe.V,Dt=Pe.Ba,wt=Pe.c;var zt=Pe.i,ht=(Ht=1,Te=Pe.$/wt,$e=Pe.$%wt,ct=Pe.m,Ot=Pe.s,Pe.$),vt=wt*zt,Xt=wt*M,ln=Ot.wc,Qt=ht<Xt?Ze(Ot,$e,Te):null;e(ht<=vt),e(M<=zt),e(An(Ot));t:for(;;){for(;!ct.h&&ht<Xt;){if($e&ln||(Qt=Ze(Ot,$e,Te)),e(Qt!=null),ge(ct),256>(zt=Nn(Qt.G[0],Qt.H[0],ct)))Me[Dt+ht]=zt,++ht,++$e>=wt&&($e=0,++Te<=M&&!(Te%16)&&ir(Pe,Te));else{if(!(280>zt)){Ht=0;break t}zt=In(zt-256,ct);var En,xn=Nn(Qt.G[4],Qt.H[4],ct);if(ge(ct),!(ht>=(xn=nr(wt,xn=In(xn,ct)))&&vt-ht>=zt)){Ht=0;break t}for(En=0;En<zt;++En)Me[Dt+ht+En]=Me[Dt+ht+En-xn];for(ht+=zt,$e+=zt;$e>=wt;)$e-=wt,++Te<=M&&!(Te%16)&&ir(Pe,Te);ht<Xt&&$e&ln&&(Qt=Ze(Ot,$e,Te))}e(ct.h==ce(ct))}ir(Pe,Te>M?M:Te);break t}!Ht||ct.h&&ht<vt?(Ht=0,Pe.a=ct.h?5:3):Pe.$=ht,M=Ht}else M=Wr(Pe,Pe.V,Pe.Ba,Pe.c,Pe.i,M,lr);if(!M){ne=0;break e}}z+ne>=Ce&&(w.Cc=1),ne=1}if(!ne)return null;if(w.Cc&&((ne=w.ga)!=null&&(ne.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+z*ve}function I(w,M,z,ne,ve,Ce){for(;0<ve--;){var Pe,Me=w,Te=M+(z?1:0),$e=w,ct=M+(z?0:3);for(Pe=0;Pe<ne;++Pe){var Ot=$e[ct+4*Pe];Ot!=255&&(Ot*=32897,Me[Te+4*Pe+0]=Me[Te+4*Pe+0]*Ot>>23,Me[Te+4*Pe+1]=Me[Te+4*Pe+1]*Ot>>23,Me[Te+4*Pe+2]=Me[Te+4*Pe+2]*Ot>>23)}M+=Ce}}function me(w,M,z,ne,ve){for(;0<ne--;){var Ce;for(Ce=0;Ce<z;++Ce){var Pe=w[M+2*Ce+0],Me=15&($e=w[M+2*Ce+1]),Te=4369*Me,$e=(240&$e|$e>>4)*Te>>16;w[M+2*Ce+0]=(240&Pe|Pe>>4)*Te>>16&240|(15&Pe|Pe<<4)*Te>>16>>4&15,w[M+2*Ce+1]=240&$e|Me}M+=ve}}function He(w,M,z,ne,ve,Ce,Pe,Me){var Te,$e,ct=255;for($e=0;$e<ve;++$e){for(Te=0;Te<ne;++Te){var Ot=w[M+Te];Ce[Pe+4*Te]=Ot,ct&=Ot}M+=z,Pe+=Me}return ct!=255}function ot(w,M,z,ne,ve){var Ce;for(Ce=0;Ce<ve;++Ce)z[ne+Ce]=w[M+Ce]>>8}function xt(){hs=I,ii=me,ui=He,Ui=ot}function Nt(w,M,z){V[w]=function(ne,ve,Ce,Pe,Me,Te,$e,ct,Ot,Dt,wt,Ht,zt,ht,vt,Xt,ln){var Qt,En=ln-1>>1,xn=Me[Te+0]|$e[ct+0]<<16,Wn=Ot[Dt+0]|wt[Ht+0]<<16;e(ne!=null);var h=3*xn+Wn+131074>>2;for(M(ne[ve+0],255&h,h>>16,zt,ht),Ce!=null&&(h=3*Wn+xn+131074>>2,M(Ce[Pe+0],255&h,h>>16,vt,Xt)),Qt=1;Qt<=En;++Qt){var g=Me[Te+Qt]|$e[ct+Qt]<<16,_=Ot[Dt+Qt]|wt[Ht+Qt]<<16,x=xn+g+Wn+_+524296,k=x+2*(g+Wn)>>3;h=k+xn>>1,xn=(x=x+2*(xn+_)>>3)+g>>1,M(ne[ve+2*Qt-1],255&h,h>>16,zt,ht+(2*Qt-1)*z),M(ne[ve+2*Qt-0],255&xn,xn>>16,zt,ht+(2*Qt-0)*z),Ce!=null&&(h=x+Wn>>1,xn=k+_>>1,M(Ce[Pe+2*Qt-1],255&h,h>>16,vt,Xt+(2*Qt-1)*z),M(Ce[Pe+2*Qt+0],255&xn,xn>>16,vt,Xt+(2*Qt+0)*z)),xn=g,Wn=_}1&ln||(h=3*xn+Wn+131074>>2,M(ne[ve+ln-1],255&h,h>>16,zt,ht+(ln-1)*z),Ce!=null&&(h=3*Wn+xn+131074>>2,M(Ce[Pe+ln-1],255&h,h>>16,vt,Xt+(ln-1)*z)))}}function an(){Ts[to]=Ae,Ts[rr]=$u,Ts[wa]=ro,Ts[xa]=gs,Ts[$o]=Pr,Ts[$s]=Sh,Ts[Gc]=ld,Ts[fs]=$u,Ts[ds]=gs,Ts[Vo]=Pr,Ts[u]=Sh}function Pn(w){return w&-16384?0>w?0:255:w>>bp}function Tn(w,M){return Pn((19077*w>>8)+(26149*M>>8)-14234)}function Yn(w,M,z){return Pn((19077*w>>8)-(6419*M>>8)-(13320*z>>8)+8708)}function or(w,M){return Pn((19077*w>>8)+(33050*M>>8)-17685)}function Sr(w,M,z,ne,ve){ne[ve+0]=Tn(w,z),ne[ve+1]=Yn(w,M,z),ne[ve+2]=or(w,M)}function _i(w,M,z,ne,ve){ne[ve+0]=or(w,M),ne[ve+1]=Yn(w,M,z),ne[ve+2]=Tn(w,z)}function Zr(w,M,z,ne,ve){var Ce=Yn(w,M,z);M=Ce<<3&224|or(w,M)>>3,ne[ve+0]=248&Tn(w,z)|Ce>>5,ne[ve+1]=M}function ni(w,M,z,ne,ve){var Ce=240&or(w,M)|15;ne[ve+0]=240&Tn(w,z)|Yn(w,M,z)>>4,ne[ve+1]=Ce}function zi(w,M,z,ne,ve){ne[ve+0]=255,Sr(w,M,z,ne,ve+1)}function qi(w,M,z,ne,ve){_i(w,M,z,ne,ve),ne[ve+3]=255}function yo(w,M,z,ne,ve){Sr(w,M,z,ne,ve),ne[ve+3]=255}function Er(w,M){return 0>w?0:w>M?M:w}function Cs(w,M,z){V[w]=function(ne,ve,Ce,Pe,Me,Te,$e,ct,Ot){for(var Dt=ct+(-2&Ot)*z;ct!=Dt;)M(ne[ve+0],Ce[Pe+0],Me[Te+0],$e,ct),M(ne[ve+1],Ce[Pe+0],Me[Te+0],$e,ct+z),ve+=2,++Pe,++Te,ct+=2*z;1&Ot&&M(ne[ve+0],Ce[Pe+0],Me[Te+0],$e,ct)}}function yl(w,M,z){return z==0?w==0?M==0?6:5:M==0?4:0:z}function Fs(w,M,z,ne,ve){switch(w>>>30){case 3:Vt(M,z,ne,ve,0);break;case 2:Mt(M,z,ne,ve);break;case 1:$n(M,z,ne,ve)}}function yu(w,M){var z,ne,ve=M.M,Ce=M.Nb,Pe=w.oc,Me=w.pc+40,Te=w.oc,$e=w.pc+584,ct=w.oc,Ot=w.pc+600;for(z=0;16>z;++z)Pe[Me+32*z-1]=129;for(z=0;8>z;++z)Te[$e+32*z-1]=129,ct[Ot+32*z-1]=129;for(0<ve?Pe[Me-1-32]=Te[$e-1-32]=ct[Ot-1-32]=129:(i(Pe,Me-32-1,127,21),i(Te,$e-32-1,127,9),i(ct,Ot-32-1,127,9)),ne=0;ne<w.za;++ne){var Dt=M.ya[M.aa+ne];if(0<ne){for(z=-1;16>z;++z)r(Pe,Me+32*z-4,Pe,Me+32*z+12,4);for(z=-1;8>z;++z)r(Te,$e+32*z-4,Te,$e+32*z+4,4),r(ct,Ot+32*z-4,ct,Ot+32*z+4,4)}var wt=w.Gd,Ht=w.Hd+ne,zt=Dt.ad,ht=Dt.Hc;if(0<ve&&(r(Pe,Me-32,wt[Ht].y,0,16),r(Te,$e-32,wt[Ht].f,0,8),r(ct,Ot-32,wt[Ht].ea,0,8)),Dt.Za){var vt=Pe,Xt=Me-32+16;for(0<ve&&(ne>=w.za-1?i(vt,Xt,wt[Ht].y[15],4):r(vt,Xt,wt[Ht+1].y,0,4)),z=0;4>z;z++)vt[Xt+128+z]=vt[Xt+256+z]=vt[Xt+384+z]=vt[Xt+0+z];for(z=0;16>z;++z,ht<<=2)vt=Pe,Xt=Me+cd[z],Ho[Dt.Ob[z]](vt,Xt),Fs(ht,zt,16*+z,vt,Xt)}else if(vt=yl(ne,ve,Dt.Ob[0]),oa[vt](Pe,Me),ht!=0)for(z=0;16>z;++z,ht<<=2)Fs(ht,zt,16*+z,Pe,Me+cd[z]);for(z=Dt.Gc,vt=yl(ne,ve,Dt.Dd),ko[vt](Te,$e),ko[vt](ct,Ot),ht=zt,vt=Te,Xt=$e,255&(Dt=z>>0)&&(170&Dt?Sn(ht,256,vt,Xt):cr(ht,256,vt,Xt)),Dt=ct,ht=Ot,255&(z>>=8)&&(170&z?Sn(zt,320,Dt,ht):cr(zt,320,Dt,ht)),ve<w.Ub-1&&(r(wt[Ht].y,0,Pe,Me+480,16),r(wt[Ht].f,0,Te,$e+224,8),r(wt[Ht].ea,0,ct,Ot+224,8)),z=8*Ce*w.B,wt=w.sa,Ht=w.ta+16*ne+16*Ce*w.R,zt=w.qa,Dt=w.ra+8*ne+z,ht=w.Ha,vt=w.Ia+8*ne+z,z=0;16>z;++z)r(wt,Ht+z*w.R,Pe,Me+32*z,16);for(z=0;8>z;++z)r(zt,Dt+z*w.B,Te,$e+32*z,8),r(ht,vt+z*w.B,ct,Ot+32*z,8)}}function Jo(w,M,z,ne,ve,Ce,Pe,Me,Te){var $e=[0],ct=[0],Ot=0,Dt=Te!=null?Te.kd:0,wt=Te??new jo;if(w==null||12>z)return 7;wt.data=w,wt.w=M,wt.ha=z,M=[M],z=[z],wt.gb=[wt.gb];e:{var Ht=M,zt=z,ht=wt.gb;if(e(w!=null),e(zt!=null),e(ht!=null),ht[0]=0,12<=zt[0]&&!n(w,Ht[0],"RIFF")){if(n(w,Ht[0]+8,"WEBP")){ht=3;break e}var vt=le(w,Ht[0]+4);if(12>vt||4294967286<vt){ht=3;break e}if(Dt&&vt>zt[0]-8){ht=7;break e}ht[0]=vt,Ht[0]+=12,zt[0]-=12}ht=0}if(ht!=0)return ht;for(vt=0<wt.gb[0],z=z[0];;){e:{var Xt=w;zt=M,ht=z;var ln=$e,Qt=ct,En=Ht=[0];if((h=Ot=[Ot])[0]=0,8>ht[0])ht=7;else{if(!n(Xt,zt[0],"VP8X")){if(le(Xt,zt[0]+4)!=10){ht=3;break e}if(18>ht[0]){ht=7;break e}var xn=le(Xt,zt[0]+8),Wn=1+_t(Xt,zt[0]+12);if(2147483648<=Wn*(Xt=1+_t(Xt,zt[0]+15))){ht=3;break e}En!=null&&(En[0]=xn),ln!=null&&(ln[0]=Wn),Qt!=null&&(Qt[0]=Xt),zt[0]+=18,ht[0]-=18,h[0]=1}ht=0}}if(Ot=Ot[0],Ht=Ht[0],ht!=0)return ht;if(zt=!!(2&Ht),!vt&&Ot)return 3;if(Ce!=null&&(Ce[0]=!!(16&Ht)),Pe!=null&&(Pe[0]=zt),Me!=null&&(Me[0]=0),Pe=$e[0],Ht=ct[0],Ot&&zt&&Te==null){ht=0;break}if(4>z){ht=7;break}if(vt&&Ot||!vt&&!Ot&&!n(w,M[0],"ALPH")){z=[z],wt.na=[wt.na],wt.P=[wt.P],wt.Sa=[wt.Sa];e:{xn=w,ht=M,vt=z;var h=wt.gb;ln=wt.na,Qt=wt.P,En=wt.Sa,Wn=22,e(xn!=null),e(vt!=null),Xt=ht[0];var g=vt[0];for(e(ln!=null),e(En!=null),ln[0]=null,Qt[0]=null,En[0]=0;;){if(ht[0]=Xt,vt[0]=g,8>g){ht=7;break e}var _=le(xn,Xt+4);if(4294967286<_){ht=3;break e}var x=8+_+1&-2;if(Wn+=x,0<h&&Wn>h){ht=3;break e}if(!n(xn,Xt,"VP8 ")||!n(xn,Xt,"VP8L")){ht=0;break e}if(g[0]<x){ht=7;break e}n(xn,Xt,"ALPH")||(ln[0]=xn,Qt[0]=Xt+8,En[0]=_),Xt+=x,g-=x}}if(z=z[0],wt.na=wt.na[0],wt.P=wt.P[0],wt.Sa=wt.Sa[0],ht!=0)break}z=[z],wt.Ja=[wt.Ja],wt.xa=[wt.xa];e:if(h=w,ht=M,vt=z,ln=wt.gb[0],Qt=wt.Ja,En=wt.xa,xn=ht[0],Xt=!n(h,xn,"VP8 "),Wn=!n(h,xn,"VP8L"),e(h!=null),e(vt!=null),e(Qt!=null),e(En!=null),8>vt[0])ht=7;else{if(Xt||Wn){if(h=le(h,xn+4),12<=ln&&h>ln-12){ht=3;break e}if(Dt&&h>vt[0]-8){ht=7;break e}Qt[0]=h,ht[0]+=8,vt[0]-=8,En[0]=Wn}else En[0]=5<=vt[0]&&h[xn+0]==47&&!(h[xn+4]>>5),Qt[0]=vt[0];ht=0}if(z=z[0],wt.Ja=wt.Ja[0],wt.xa=wt.xa[0],M=M[0],ht!=0)break;if(4294967286<wt.Ja)return 3;if(Me==null||zt||(Me[0]=wt.xa?2:1),Pe=[Pe],Ht=[Ht],wt.xa){if(5>z){ht=7;break}Me=Pe,Dt=Ht,zt=Ce,w==null||5>z?w=0:5<=z&&w[M+0]==47&&!(w[M+4]>>5)?(vt=[0],h=[0],ln=[0],re(Qt=new Z,w,M,z),Lt(Qt,vt,h,ln)?(Me!=null&&(Me[0]=vt[0]),Dt!=null&&(Dt[0]=h[0]),zt!=null&&(zt[0]=ln[0]),w=1):w=0):w=0}else{if(10>z){ht=7;break}Me=Ht,w==null||10>z||!Ua(w,M+3,z-3)?w=0:(Dt=w[M+0]|w[M+1]<<8|w[M+2]<<16,zt=16383&(w[M+7]<<8|w[M+6]),w=16383&(w[M+9]<<8|w[M+8]),1&Dt||3<(Dt>>1&7)||!(Dt>>4&1)||Dt>>5>=wt.Ja||!zt||!w?w=0:(Pe&&(Pe[0]=zt),Me&&(Me[0]=w),w=1))}if(!w||(Pe=Pe[0],Ht=Ht[0],Ot&&($e[0]!=Pe||ct[0]!=Ht)))return 3;Te!=null&&(Te[0]=wt,Te.offset=M-Te.w,e(4294967286>M-Te.w),e(Te.offset==Te.ha-z));break}return ht==0||ht==7&&Ot&&Te==null?(Ce!=null&&(Ce[0]|=wt.na!=null&&0<wt.na.length),ne!=null&&(ne[0]=Pe),ve!=null&&(ve[0]=Ht),0):ht}function zu(w,M,z){var ne=M.width,ve=M.height,Ce=0,Pe=0,Me=ne,Te=ve;if(M.Da=w!=null&&0<w.Da,M.Da&&(Me=w.cd,Te=w.bd,Ce=w.v,Pe=w.j,11>z||(Ce&=-2,Pe&=-2),0>Ce||0>Pe||0>=Me||0>=Te||Ce+Me>ne||Pe+Te>ve))return 0;if(M.v=Ce,M.j=Pe,M.va=Ce+Me,M.o=Pe+Te,M.U=Me,M.T=Te,M.da=w!=null&&0<w.da,M.da){if(!ke(Me,Te,z=[w.ib],Ce=[w.hb]))return 0;M.ib=z[0],M.hb=Ce[0]}return M.ob=w!=null&&w.ob,M.Kb=w==null||!w.Sd,M.da&&(M.ob=M.ib<3*ne/4&&M.hb<3*ve/4,M.Kb=0),1}function Ya(w){if(w==null)return 2;if(11>w.S){var M=w.f.RGBA;M.fb+=(w.height-1)*M.A,M.A=-M.A}else M=w.f.kb,w=w.height,M.O+=(w-1)*M.fa,M.fa=-M.fa,M.N+=(w-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(w-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(w-1)*M.lb,M.lb=-M.lb);return 0}function Za(w,M,z,ne){if(ne==null||0>=w||0>=M)return 2;if(z!=null){if(z.Da){var ve=z.cd,Ce=z.bd,Pe=-2&z.v,Me=-2&z.j;if(0>Pe||0>Me||0>=ve||0>=Ce||Pe+ve>w||Me+Ce>M)return 2;w=ve,M=Ce}if(z.da){if(!ke(w,M,ve=[z.ib],Ce=[z.hb]))return 2;w=ve[0],M=Ce[0]}}ne.width=w,ne.height=M;e:{var Te=ne.width,$e=ne.height;if(w=ne.S,0>=Te||0>=$e||!(w>=to&&13>w))w=2;else{if(0>=ne.Rd&&ne.sd==null){Pe=Ce=ve=M=0;var ct=(Me=Te*dd[w])*$e;if(11>w||(Ce=($e+1)/2*(M=(Te+1)/2),w==12&&(Pe=(ve=Te)*$e)),($e=s(ct+2*Ce+Pe))==null){w=1;break e}ne.sd=$e,11>w?((Te=ne.f.RGBA).eb=$e,Te.fb=0,Te.A=Me,Te.size=ct):((Te=ne.f.kb).y=$e,Te.O=0,Te.fa=Me,Te.Fd=ct,Te.f=$e,Te.N=0+ct,Te.Ab=M,Te.Cd=Ce,Te.ea=$e,Te.W=0+ct+Ce,Te.Db=M,Te.Ed=Ce,w==12&&(Te.F=$e,Te.J=0+ct+2*Ce),Te.Tc=Pe,Te.lb=ve)}if(M=1,ve=ne.S,Ce=ne.width,Pe=ne.height,ve>=to&&13>ve)if(11>ve)w=ne.f.RGBA,M&=(Me=Math.abs(w.A))*(Pe-1)+Ce<=w.size,M&=Me>=Ce*dd[ve],M&=w.eb!=null;else{w=ne.f.kb,Me=(Ce+1)/2,ct=(Pe+1)/2,Te=Math.abs(w.fa),$e=Math.abs(w.Ab);var Ot=Math.abs(w.Db),Dt=Math.abs(w.lb),wt=Dt*(Pe-1)+Ce;M&=Te*(Pe-1)+Ce<=w.Fd,M&=$e*(ct-1)+Me<=w.Cd,M=(M&=Ot*(ct-1)+Me<=w.Ed)&Te>=Ce&$e>=Me&Ot>=Me,M&=w.y!=null,M&=w.f!=null,M&=w.ea!=null,ve==12&&(M&=Dt>=Ce,M&=wt<=w.Tc,M&=w.F!=null)}else M=0;w=M?0:2}}return w!=0||z!=null&&z.fd&&(w=Ya(ne)),w}var Yi=64,Qo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],bo=24,Qs=32,bl=8,Ss=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];lt("Predictor0","PredictorAdd0"),V.Predictor0=function(){return 4278190080},V.Predictor1=function(w){return w},V.Predictor2=function(w,M,z){return M[z+0]},V.Predictor3=function(w,M,z){return M[z+1]},V.Predictor4=function(w,M,z){return M[z-1]},V.Predictor5=function(w,M,z){return pt(pt(w,M[z+1]),M[z+0])},V.Predictor6=function(w,M,z){return pt(w,M[z-1])},V.Predictor7=function(w,M,z){return pt(w,M[z+0])},V.Predictor8=function(w,M,z){return pt(M[z-1],M[z+0])},V.Predictor9=function(w,M,z){return pt(M[z+0],M[z+1])},V.Predictor10=function(w,M,z){return pt(pt(w,M[z-1]),pt(M[z+0],M[z+1]))},V.Predictor11=function(w,M,z){var ne=M[z+0];return 0>=qt(ne>>24&255,w>>24&255,(M=M[z-1])>>24&255)+qt(ne>>16&255,w>>16&255,M>>16&255)+qt(ne>>8&255,w>>8&255,M>>8&255)+qt(255&ne,255&w,255&M)?ne:w},V.Predictor12=function(w,M,z){var ne=M[z+0];return(jt((w>>24&255)+(ne>>24&255)-((M=M[z-1])>>24&255))<<24|jt((w>>16&255)+(ne>>16&255)-(M>>16&255))<<16|jt((w>>8&255)+(ne>>8&255)-(M>>8&255))<<8|jt((255&w)+(255&ne)-(255&M)))>>>0},V.Predictor13=function(w,M,z){var ne=M[z-1];return(Bt((w=pt(w,M[z+0]))>>24&255,ne>>24&255)<<24|Bt(w>>16&255,ne>>16&255)<<16|Bt(w>>8&255,ne>>8&255)<<8|Bt(w>>0&255,ne>>0&255))>>>0};var js=V.PredictorAdd0;V.PredictorAdd1=Jt,lt("Predictor2","PredictorAdd2"),lt("Predictor3","PredictorAdd3"),lt("Predictor4","PredictorAdd4"),lt("Predictor5","PredictorAdd5"),lt("Predictor6","PredictorAdd6"),lt("Predictor7","PredictorAdd7"),lt("Predictor8","PredictorAdd8"),lt("Predictor9","PredictorAdd9"),lt("Predictor10","PredictorAdd10"),lt("Predictor11","PredictorAdd11"),lt("Predictor12","PredictorAdd12"),lt("Predictor13","PredictorAdd13");var zs=V.PredictorAdd2;st("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),st("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var yc,is=V.ColorIndexInverseTransform,va=V.MapARGB,Es=V.VP8LColorIndexInverseTransformAlpha,Ps=V.MapAlpha,ya=V.VP8LPredictorsAdd=[];ya.length=16,(V.VP8LPredictors=[]).length=16,(V.VP8LPredictorsAdd_C=[]).length=16,(V.VP8LPredictors_C=[]).length=16;var ba,ks,cs,ea,_o,Ms,yt,Vt,Mt,Sn,$n,cr,xi,ri,Kl,Us,Li,ta,_a,na,ra,ia,Ir,Uo,hs,ii,ui,Ui,mi=s(511),wo=s(2041),eo=s(225),Po=s(767),Uu=0,sa=wo,Zi=eo,gi=Po,As=mi,to=0,rr=1,wa=2,xa=3,$o=4,$s=5,Gc=6,fs=7,ds=8,Vo=9,u=10,v=[2,3,7],E=[3,3,11],F=[280,256,256,256,40],te=[0,1,1,1,0],Le=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],et=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Pt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Rt=8,nn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Hn=null,Cr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ki=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Oi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ps=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ci=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],no=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],qc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],oa=[],Ho=[],ko=[],pf=1,bu=2,Xr=[],Ts=[];Nt("UpsampleRgbLinePair",Sr,3),Nt("UpsampleBgrLinePair",_i,3),Nt("UpsampleRgbaLinePair",yo,4),Nt("UpsampleBgraLinePair",qi,4),Nt("UpsampleArgbLinePair",zi,4),Nt("UpsampleRgba4444LinePair",ni,2),Nt("UpsampleRgb565LinePair",Zr,2);var Ae=V.UpsampleRgbLinePair,ro=V.UpsampleBgrLinePair,$u=V.UpsampleRgbaLinePair,gs=V.UpsampleBgraLinePair,Pr=V.UpsampleArgbLinePair,Sh=V.UpsampleRgba4444LinePair,ld=V.UpsampleRgb565LinePair,Eh=16,Ka=1<<Eh-1,Yc=-227,gf=482,bp=6,bc=0,Ph=s(256),Xl=s(256),_p=s(256),kh=s(256),Mh=s(gf-Yc),ud=s(gf-Yc);Cs("YuvToRgbRow",Sr,3),Cs("YuvToBgrRow",_i,3),Cs("YuvToRgbaRow",yo,4),Cs("YuvToBgraRow",qi,4),Cs("YuvToArgbRow",zi,4),Cs("YuvToRgba4444Row",ni,2),Cs("YuvToRgb565Row",Zr,2);var cd=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],La=[0,2,8],hd=[8,7,6,4,4,2,2,2,1,1,1,1],fd=1;this.WebPDecodeRGBA=function(w,M,z,ne,ve){var Ce=rr,Pe=new us,Me=new Bn;Pe.ba=Me,Me.S=Ce,Me.width=[Me.width],Me.height=[Me.height];var Te=Me.width,$e=Me.height,ct=new Jn;if(ct==null||w==null)var Ot=2;else e(ct!=null),Ot=Jo(w,M,z,ct.width,ct.height,ct.Pd,ct.Qd,ct.format,null);if(Ot!=0?Te=0:(Te!=null&&(Te[0]=ct.width[0]),$e!=null&&($e[0]=ct.height[0]),Te=1),Te){Me.width=Me.width[0],Me.height=Me.height[0],ne!=null&&(ne[0]=Me.width),ve!=null&&(ve[0]=Me.height);e:{if(ne=new So,(ve=new jo).data=w,ve.w=M,ve.ha=z,ve.kd=1,M=[0],e(ve!=null),((w=Jo(ve.data,ve.w,ve.ha,null,null,null,M,null,ve))==0||w==7)&&M[0]&&(w=4),(M=w)==0){if(e(Pe!=null),ne.data=ve.data,ne.w=ve.w+ve.offset,ne.ha=ve.ha-ve.offset,ne.put=Ft,ne.ac=ki,ne.bc=Je,ne.ma=Pe,ve.xa){if((w=li())==null){Pe=1;break e}if(function(Dt,wt){var Ht=[0],zt=[0],ht=[0];t:for(;;){if(Dt==null)return 0;if(wt==null)return Dt.a=2,0;if(Dt.l=wt,Dt.a=0,re(Dt.m,wt.data,wt.w,wt.ha),!Lt(Dt.m,Ht,zt,ht)){Dt.a=3;break t}if(Dt.xb=bu,wt.width=Ht[0],wt.height=zt[0],!kr(Ht[0],zt[0],1,Dt,null))break t;return 1}return e(Dt.a!=0),0}(w,ne)){if(ne=(M=Za(ne.width,ne.height,Pe.Oa,Pe.ba))==0){t:{ne=w;n:for(;;){if(ne==null){ne=0;break t}if(e(ne.s.yc!=null),e(ne.s.Ya!=null),e(0<ne.s.Wb),e((z=ne.l)!=null),e((ve=z.ma)!=null),ne.xb!=0){if(ne.ca=ve.ba,ne.tb=ve.tb,e(ne.ca!=null),!zu(ve.Oa,z,xa)){ne.a=2;break n}if(!Do(ne,z.width)||z.da)break n;if((z.da||vn(ne.ca.S))&&xt(),11>ne.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ne.ca.f.kb.F!=null&&xt()),ne.Pb&&0<ne.s.ua&&ne.s.vb.X==null&&!se(ne.s.vb,ne.s.Wa.Xa)){ne.a=1;break n}ne.xb=0}if(!Wr(ne,ne.V,ne.Ba,ne.c,ne.i,z.o,sn))break n;ve.Dc=ne.Ma,ne=1;break t}e(ne.a!=0),ne=0}ne=!ne}ne&&(M=w.a)}else M=w.a}else{if((w=new Gr)==null){Pe=1;break e}if(w.Fa=ve.na,w.P=ve.P,w.qc=ve.Sa,fa(w,ne)){if((M=Za(ne.width,ne.height,Pe.Oa,Pe.ba))==0){if(w.Aa=0,z=Pe.Oa,e((ve=w)!=null),z!=null){if(0<(Te=0>(Te=z.Md)?0:100<Te?255:255*Te/100)){for($e=ct=0;4>$e;++$e)12>(Ot=ve.pb[$e]).lc&&(Ot.ia=Te*hd[0>Ot.lc?0:Ot.lc]>>3),ct|=Ot.ia;ct&&(alert("todo:VP8InitRandom"),ve.ia=1)}ve.Ga=z.Id,100<ve.Ga?ve.Ga=100:0>ve.Ga&&(ve.Ga=0)}pr(w,ne)||(M=w.a)}}else M=w.a}M==0&&Pe.Oa!=null&&Pe.Oa.fd&&(M=Ya(Pe.ba))}Pe=M}Ce=Pe!=0?null:11>Ce?Me.f.RGBA.eb:Me.f.kb.y}else Ce=null;return Ce};var dd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(V,K){for(var pe="",$=0;$<4;$++)pe+=String.fromCharCode(V[K++]);return pe}function f(V,K){return(V[K+0]<<0|V[K+1]<<8|V[K+2]<<16)>>>0}function p(V,K){return(V[K+0]<<0|V[K+1]<<8|V[K+2]<<16|V[K+3]<<24)>>>0}new l;var y=[0],m=[0],C=[],S=new l,T=t,O=function(V,K){var pe={},$=0,H=!1,oe=0,ie=0;if(pe.frames=[],!function(ae,ce,de,ge){for(var Ee=0;Ee<ge;Ee++)if(ae[ce+Ee]!=de.charCodeAt(Ee))return!0;return!1}(V,K,"RIFF",4)){var R,j;for(p(V,K+=4),K+=8;K<V.length;){var q=c(V,K),re=p(V,K+=4);K+=4;var xe=re+(1&re);switch(q){case"VP8 ":case"VP8L":pe.frames[$]===void 0&&(pe.frames[$]={}),(Z=pe.frames[$]).src_off=H?ie:K-8,Z.src_size=oe+re+8,$++,H&&(H=!1,oe=0,ie=0);break;case"VP8X":(Z=pe.header={}).feature_flags=V[K];var be=K+4;Z.canvas_width=1+f(V,be),be+=3,Z.canvas_height=1+f(V,be),be+=3;break;case"ALPH":H=!0,oe=xe+8,ie=K-8;break;case"ANIM":(Z=pe.header).bgcolor=p(V,K),be=K+4,Z.loop_count=(R=V)[(j=be)+0]<<0|R[j+1]<<8,be+=2;break;case"ANMF":var _e,Z;(Z=pe.frames[$]={}).offset_x=2*f(V,K),K+=3,Z.offset_y=2*f(V,K),K+=3,Z.width=1+f(V,K),K+=3,Z.height=1+f(V,K),K+=3,Z.duration=f(V,K),K+=3,_e=V[K++],Z.dispose=1&_e,Z.blend=_e>>1&1}q!="ANMF"&&(K+=xe)}return pe}}(T,0);O.response=T,O.rgbaoutput=!0,O.dataurl=!1;var D=O.header?O.header:null,N=O.frames?O.frames:null;if(D){D.loop_counter=D.loop_count,y=[D.canvas_height],m=[D.canvas_width];for(var U=0;U<N.length&&N[U].blend!=0;U++);}var G=N[0],J=S.WebPDecodeRGBA(T,G.src_off,G.src_size,m,y);G.rgba=J,G.imgwidth=m[0],G.imgheight=y[0];for(var ee=0;ee<m[0]*y[0]*4;ee++)C[ee]=J[ee];return this.width=m,this.height=y,this.data=C,this}(function(t){var e=function(){return typeof j2=="function"},n=function(y,m,C,S){var T=4,O=o;switch(S){case t.image_compression.FAST:T=1,O=s;break;case t.image_compression.MEDIUM:T=6,O=a;break;case t.image_compression.SLOW:T=9,O=l}y=r(y,m,C,O);var D=j2(y,{level:T});return t.__addimage__.arrayBufferToBinaryString(D)},r=function(y,m,C,S){for(var T,O,D,N=y.length/m,U=new Uint8Array(y.length+N),G=f(),J=0;J<N;J+=1){if(D=J*m,T=y.subarray(D,D+m),S)U.set(S(T,C,O),D+J);else{for(var ee,V=G.length,K=[];ee<V;ee+=1)K[ee]=G[ee](T,C,O);var pe=p(K.concat());U.set(K[pe],D+J)}O=T}return U},i=function(y){var m=Array.apply([],y);return m.unshift(0),m},s=function(y,m){var C,S=[],T=y.length;S[0]=1;for(var O=0;O<T;O+=1)C=y[O-m]||0,S[O+1]=y[O]-C+256&255;return S},o=function(y,m,C){var S,T=[],O=y.length;T[0]=2;for(var D=0;D<O;D+=1)S=C&&C[D]||0,T[D+1]=y[D]-S+256&255;return T},a=function(y,m,C){var S,T,O=[],D=y.length;O[0]=3;for(var N=0;N<D;N+=1)S=y[N-m]||0,T=C&&C[N]||0,O[N+1]=y[N]+256-(S+T>>>1)&255;return O},l=function(y,m,C){var S,T,O,D,N=[],U=y.length;N[0]=4;for(var G=0;G<U;G+=1)S=y[G-m]||0,T=C&&C[G]||0,O=C&&C[G-m]||0,D=c(S,T,O),N[G+1]=y[G]-D+256&255;return N},c=function(y,m,C){if(y===m&&m===C)return y;var S=Math.abs(m-C),T=Math.abs(y-C),O=Math.abs(y+m-C-C);return S<=T&&S<=O?y:T<=O?m:C},f=function(){return[i,s,o,a,l]},p=function(y){var m=y.map(function(C){return C.reduce(function(S,T){return S+Math.abs(T)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(y,m,C,S){var T,O,D,N,U,G,J,ee,V,K,pe,$,H,oe,ie,R=this.decode.FLATE_DECODE,j="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(D=new T$(y)).imgData,O=D.bits,T=D.colorSpace,U=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){V=(ee=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,pe=new Uint8Array(V*D.colors),K=new Uint8Array(V);var q,re=D.pixelBitlength-D.bits;for(oe=0,ie=0;oe<V;oe++){for(H=ee[oe],q=0;q<re;)pe[ie++]=H>>>q&255,q+=D.bits;K[oe]=H>>>q&255}}if(D.bits===16){V=(ee=new Uint32Array(D.decodePixels().buffer)).length,pe=new Uint8Array(V*(32/D.pixelBitlength)*D.colors),K=new Uint8Array(V*(32/D.pixelBitlength)),$=D.colors>1,oe=0,ie=0;for(var xe=0;oe<V;)H=ee[oe++],pe[ie++]=H>>>0&255,$&&(pe[ie++]=H>>>16&255,H=ee[oe++],pe[ie++]=H>>>0&255),K[xe++]=H>>>16&255;O=8}S!==t.image_compression.NONE&&e()?(y=n(pe,D.width*D.colors,D.colors,S),J=n(K,D.width,1,S)):(y=pe,J=K,R=void 0)}if(D.colorType===3&&(T=this.color_spaces.INDEXED,G=D.palette,D.transparency.indexed)){var be=D.transparency.indexed,_e=0;for(oe=0,V=be.length;oe<V;++oe)_e+=be[oe];if((_e/=255)===V-1&&be.indexOf(0)!==-1)N=[be.indexOf(0)];else if(_e!==V){for(ee=D.decodePixels(),K=new Uint8Array(ee.length),oe=0,V=ee.length;oe<V;oe++)K[oe]=be[ee[oe]];J=n(K,D.width,1)}}var Z=function(ae){var ce;switch(ae){case t.image_compression.FAST:ce=11;break;case t.image_compression.MEDIUM:ce=13;break;case t.image_compression.SLOW:ce=14;break;default:ce=12}return ce}(S);return R===this.decode.FLATE_DECODE&&(j="/Predictor "+Z+" "),j+="/Colors "+U+" /BitsPerComponent "+O+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(J&&this.__addimage__.isArrayBuffer(J)||this.__addimage__.isArrayBufferView(J))&&(J=this.__addimage__.arrayBufferToBinaryString(J)),{alias:C,data:y,index:m,filter:R,decodeParameters:j,transparency:N,palette:G,sMask:J,predictor:Z,width:D.width,height:D.height,bitsPerComponent:O,colorSpace:T}}}})(wr.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new O$(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},f=new k1(100).encode(c,100);return t.processJPEG.call(this,f,n,r,i)},t.processGIF87A=t.processGIF89A}(wr.API),Xu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xu.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Hi.log("bit decode error:"+n)}},Xu.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Xu.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Xu.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Xu.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,f=r*this.width*4+4*i;this.data[f]=l,this.data[f+1]=a,this.data[f+2]=o,this.data[f+3]=c}this.pos+=t}},Xu.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,f=i*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=a,this.data[f+3]=255}this.pos+=t}},Xu.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Xu.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Xu.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Xu(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new k1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(wr.API),K4.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new K4(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new k1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(wr.API),wr.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var f=r[c],p=r[c+1],y=r[c+2],m=r[c+3];s[a++]=f,s[a++]=p,s[a++]=y,o[l++]=m}var C=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:C,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},wr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Md=wr.API,e0=Md.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=c.fof?c.fof:1,p=e.doKerning!==!1,y=0,m=t.length,C=0,S=a[0]||l,T=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(y=p&&Ni(c[r])==="object"&&!isNaN(parseInt(c[r][C],10))?c[r][C]/f:0,T.push((a[r]||S)/l+y)),C=r;return T},G4=Md.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Md.processArabic&&(t=Md.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:e0.apply(this,arguments).reduce(function(s,o){return s+o},0)},q4=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},Y4=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,f=[],p=[f],y=n.textIndent||0,m=0,C=0,S=t.split(" "),T=e0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?S[0].length+2:n.lineIndent||0){var O=Array(l).join(" "),D=[];S.map(function(U){(U=U.split(/\s*\n/)).length>1?D=D.concat(U.map(function(G,J){return(J&&G.length?`
`:"")+G})):D.push(U[0])}),S=D,l=G4.apply(this,[O,n])}for(s=0,o=S.length;s<o;s++){var N=0;if(r=S[s],l&&r[0]==`
`&&(r=r.substr(1),N=1),y+m+(C=(i=e0.apply(this,[r,n])).reduce(function(U,G){return U+G},0))>e||N){if(C>e){for(a=q4.apply(this,[r,i,e-(y+m),e]),f.push(a.shift()),f=[a.pop()];a.length;)p.push([a.shift()]);C=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(U,G){return U+G},0)}else f=[r];p.push(f),y=C+l,m=T}else f.push(r),y+=m+C,m=T}return c=l?function(U,G){return(G?O:"")+U.join(" ")}:function(U){return U.join(" ")},p.map(c)},Md.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(Y4.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var y,m,C,S,T=["{"];for(var O in p){if(y=p[O],isNaN(parseInt(O,10))?m="'"+O+"'":(O=parseInt(O,10),m=(m=s(O).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof y=="number")y<0?(C=s(y).slice(3),S="-"):(C=s(y).slice(2),S=""),C=S+C.slice(0,-1)+r[C.slice(-1)];else{if(Ni(y)!=="object")throw new Error("Don't know what to do with value type "+Ni(y)+".");C=o(y)}T.push(m+C)}return T.push("}"),T.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,m,C,S,T={},O=1,D=T,N=[],U="",G="",J=p.length-1,ee=1;ee<J;ee+=1)(S=p[ee])=="'"?y?(C=y.join(""),y=void 0):y=[]:y?y.push(S):S=="{"?(N.push([D,C]),D={},C=void 0):S=="}"?((m=N.pop())[0][m[1]]=D,C=void 0,D=m[0]):S=="-"?O=-1:C===void 0?n.hasOwnProperty(S)?(U+=n[S],C=parseInt(U,16)*O,O=1,U=""):U+=S:n.hasOwnProperty(S)?(G+=n[S],D[C]=parseInt(G,16)*O,O=1,C=void 0,G=""):G+=S;return T},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},f={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var y=p.font,m=f.Unicode[y.postScriptName];m&&(y.metadata.Unicode={},y.metadata.Unicode.widths=m.widths,y.metadata.Unicode.kerning=m.kerning);var C=c.Unicode[y.postScriptName];C&&(y.metadata.Unicode.encoding=C,y.encoding=C.codePages[0])}])}(wr.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(bg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(wr),function(t){function e(){return(xr.canvg?Promise.resolve(xr.canvg):ku(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}wr.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw Hi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Hi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=o;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(C){return C.fromString(p,n,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(C){return C.render(y)}).then(function(){m.addImage(f.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),wr.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},wr.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,f=0,p=0;function y(C,S){var T,O=!1;for(T=0;T<C.length;T+=1)C[T]===S&&(O=!0);return O}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(p=0;p<m;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(Ni(t)==="object"){for(i in t)if(s=t[i],y(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&y(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(f=0;f<s[c].length;f+=1)typeof s[c][f]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var C,S=[];for(C in n)n[C].explicitSet===!0&&(n[C].type==="name"?S.push("/"+C+" /"+n[C].value):S.push("/"+C+" "+n[C].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(wr.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],f=[""],p=0,y=s.length;p<y;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return f.join("");a=a.toString(16),f.push(c[4-a.length],a)}return f.join("")},r=function(s){var o,a,l,c,f,p,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,y=(a=Object.keys(s).sort(function(m,C){return m-C})).length;p<y;p++)o=a[p],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",C=0;C<y.length;C++)m+=String.fromCharCode(y[C]);var S=c();f({data:m,addLength1:!0,objectId:S}),l("endobj");var T=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:T}),l("endobj");var O=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Ud(a.fontName)),l("/FontFile2 "+S+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var D=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Ud(a.fontName)),l("/FontDescriptor "+O+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+T+" 0 R"),l("/BaseFont /"+Ud(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+D+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,y="",m=0;m<p.length;m++)y+=String.fromCharCode(p[m]);var C=c();f({data:y,addLength1:!0,objectId:C}),l("endobj");var S=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:S}),l("endobj");var T=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+C+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Ud(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var O=0;O<a.metadata.hmtx.widths.length;O++)a.metadata.hmtx.widths[O]=parseInt(a.metadata.hmtx.widths[O]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+Ud(a.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,f=s.options||{},p=s.mutex||{},y=p.pdfEscape,m=p.activeFontKey,C=p.fonts,S=m,T="",O=0,D="",N=C[S].encoding;if(C[S].encoding!=="Identity-H")return{text:a,x:l,y:c,options:f,mutex:p};for(D=a,S=m,Array.isArray(a)&&(D=a[0]),O=0;O<D.length;O+=1)C[S].metadata.hasOwnProperty("cmap")&&(o=C[S].metadata.cmap.unicode.codeMap[D[O].charCodeAt(0)]),o||D[O].charCodeAt(0)<256&&C[S].metadata.hasOwnProperty("Unicode")?T+=D[O]:T+="";var U="";return parseInt(S.slice(1))<14||N==="WinAnsiEncoding"?U=y(T,S).split("").map(function(G){return G.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(U=n(T,C[S])),p.isHex=!0,{text:U,x:l,y:c,options:f,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(wr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(wr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,f,p=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],C={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],O=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,N=0;this.__bidiEngine__={};var U=function($){var H=$.charCodeAt(),oe=H>>8,ie=S[oe];return ie!==void 0?p[256*ie+(255&H)]:oe===252||oe===253?"AL":O.test(oe)?"L":oe===8?"R":"N"},G=function($){for(var H,oe=0;oe<$.length;oe++){if((H=U($.charAt(oe)))==="L")return!1;if(H==="R")return!0}return!1},J=function($,H,oe,ie){var R,j,q,re,xe=H[ie];switch(xe){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(xe="AN");break;case"AL":D=!0,xe="R";break;case"WS":xe="N";break;case"CS":ie<1||ie+1>=H.length||(R=oe[ie-1])!=="EN"&&R!=="AN"||(j=H[ie+1])!=="EN"&&j!=="AN"?xe="N":D&&(j="AN"),xe=j===R?j:"N";break;case"ES":xe=(R=ie>0?oe[ie-1]:"B")==="EN"&&ie+1<H.length&&H[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&oe[ie-1]==="EN"){xe="EN";break}if(D){xe="N";break}for(q=ie+1,re=H.length;q<re&&H[q]==="ET";)q++;xe=q<re&&H[q]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(re=H.length,q=ie+1;q<re&&H[q]==="NSM";)q++;if(q<re){var be=$[ie],_e=be>=1425&&be<=2303||be===64286;if(R=H[q],_e&&(R==="R"||R==="AL")){xe="R";break}}}xe=ie<1||(R=H[ie-1])==="B"?"N":oe[ie-1];break;case"B":D=!1,i=!0,xe=N;break;case"S":s=!0,xe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":xe="N"}return xe},ee=function($,H,oe){var ie=$.split("");return oe&&V(ie,oe,{hiLevel:N}),ie.reverse(),H&&H.reverse(),ie.join("")},V=function($,H,oe){var ie,R,j,q,re,xe=-1,be=$.length,_e=0,Z=[],ae=N?m:y,ce=[];for(D=!1,i=!1,s=!1,R=0;R<be;R++)ce[R]=U($[R]);for(j=0;j<be;j++){if(re=_e,Z[j]=J($,ce,Z,j),ie=240&(_e=ae[re][C[Z[j]]]),_e&=15,H[j]=q=ae[_e][5],ie>0)if(ie===16){for(R=xe;R<j;R++)H[R]=1;xe=-1}else xe=-1;if(ae[_e][6])xe===-1&&(xe=j);else if(xe>-1){for(R=xe;R<j;R++)H[R]=q;xe=-1}ce[j]==="B"&&(H[j]=0),oe.hiLevel|=q}s&&function(de,ge,Ee){for(var Ue=0;Ue<Ee;Ue++)if(de[Ue]==="S"){ge[Ue]=N;for(var Ne=Ue-1;Ne>=0&&de[Ne]==="WS";Ne--)ge[Ne]=N}}(ce,H,be)},K=function($,H,oe,ie,R){if(!(R.hiLevel<$)){if($===1&&N===1&&!i)return H.reverse(),void(oe&&oe.reverse());for(var j,q,re,xe,be=H.length,_e=0;_e<be;){if(ie[_e]>=$){for(re=_e+1;re<be&&ie[re]>=$;)re++;for(xe=_e,q=re-1;xe<q;xe++,q--)j=H[xe],H[xe]=H[q],H[q]=j,oe&&(j=oe[xe],oe[xe]=oe[q],oe[q]=j);_e=re}_e++}}},pe=function($,H,oe){var ie=$.split(""),R={hiLevel:N};return oe||(oe=[]),V(ie,oe,R),function(j,q,re){if(re.hiLevel!==0&&f)for(var xe,be=0;be<j.length;be++)q[be]===1&&(xe=T.indexOf(j[be]))>=0&&(j[be]=T[xe+1])}(ie,oe,R),K(2,ie,H,oe,R),K(1,ie,H,oe,R),ie.join("")};return this.__bidiEngine__.doBidiReorder=function($,H,oe){if(function(R,j){if(j)for(var q=0;q<R.length;q++)j[q]=q;a===void 0&&(a=G(R)),c===void 0&&(c=G(R))}($,H),o||!l||c)if(o&&l&&a^c)N=a?1:0,$=ee($,H,oe);else if(!o&&l&&c)N=a?1:0,$=pe($,H,oe),$=ee($,H);else if(!o||a||l||c){if(o&&!l&&a^c)$=ee($,H),a?(N=0,$=pe($,H,oe)):(N=1,$=pe($,H,oe),$=ee($,H));else if(o&&a&&!l&&c)N=1,$=pe($,H,oe),$=ee($,H);else if(!o&&!l&&a^c){var ie=f;a?(N=1,$=pe($,H,oe),N=0,f=!1,$=pe($,H,oe),f=ie):(N=0,$=pe($,H,oe),$=ee($,H),N=1,f=!1,$=pe($,H,oe),f=ie,$=ee($,H))}}else N=0,$=pe($,H,oe);else N=a?1:0,$=pe($,H,oe);return $},this.__bidiEngine__.setOptions=function($){$&&(o=$.isInputVisual,l=$.isOutputVisual,a=$.isInputRtl,c=$.isOutputRtl,f=$.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(wr),wr.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new af(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new q$(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new D$(this.contents),this.head=new N$(this),this.name=new z$(this),this.cmap=new pE(this),this.toUnicode={},this.hhea=new B$(this),this.maxp=new U$(this),this.hmtx=new $$(this),this.post=new F$(this),this.os2=new R$(this),this.loca=new G$(this),this.glyf=new V$(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var hc,af=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),D$=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,f,p,y,m,C,S;for(S in m=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),o=Math.floor(p/l),f=16*m-p,(i=new af).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(f),s=16*m,c=i.pos+s,a=null,C=[],n)for(y=n[S],i.writeString(S),i.writeInt(t(y)),i.writeInt(c),i.writeInt(y.length),C=C.concat(y),S==="head"&&(a=c),c+=y.length;c%4;)C.push(0),c++;return i.write(C),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=gE.call(n);n.length%4;)n.push(0);for(s=new af(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),I$={}.hasOwnProperty,Hc=function(t,e){for(var n in e)I$.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};hc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var N$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new af).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),X4=function(){function t(e,n){var r,i,s,o,a,l,c,f,p,y,m,C,S,T,O,D,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),y=m/2,e.pos+=6,s=function(){var U,G;for(G=[],l=U=0;0<=y?U<y:U>y;l=0<=y?++U:--U)G.push(e.readUInt16());return G}(),e.pos+=2,S=function(){var U,G;for(G=[],l=U=0;0<=y?U<y:U>y;l=0<=y?++U:--U)G.push(e.readUInt16());return G}(),c=function(){var U,G;for(G=[],l=U=0;0<=y?U<y:U>y;l=0<=y?++U:--U)G.push(e.readUInt16());return G}(),f=function(){var U,G;for(G=[],l=U=0;0<=y?U<y:U>y;l=0<=y?++U:--U)G.push(e.readUInt16());return G}(),i=(this.length-e.pos+this.offset)/2,a=function(){var U,G;for(G=[],l=U=0;0<=i?U<i:U>i;l=0<=i?++U:--U)G.push(e.readUInt16());return G}(),l=O=0,N=s.length;O<N;l=++O)for(T=s[l],r=D=C=S[l];C<=T?D<=T:D>=T;r=C<=T?++D:--D)f[l]===0?o=r+c[l]:(o=a[f[l]/2+(r-C)-(y-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,f,p,y,m,C,S,T,O,D,N,U,G,J,ee,V,K,pe,$,H,oe,ie,R,j,q,re,xe,be,_e,Z,ae,ce,de,ge,Ee,Ue,Ne,rt,gt,_t;switch(ie=new af,o=Object.keys(e).sort(function(le,se){return le-se}),n){case"macroman":for(S=0,T=function(){var le=[];for(C=0;C<256;++C)le.push(0);return le}(),D={0:0},s={},R=0,xe=o.length;R<xe;R++)D[Ne=e[i=o[R]]]==null&&(D[Ne]=++S),s[i]={old:e[i],new:D[e[i]]},T[i]=D[e[i]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(T),{charMap:s,subtable:ie.data,maxGlyphID:S+1};case"unicode":for(H=[],p=[],N=0,D={},r={},O=c=null,j=0,be=o.length;j<be;j++)D[G=e[i=o[j]]]==null&&(D[G]=++N),r[i]={old:G,new:D[G]},a=D[G]-i,O!=null&&a===c||(O&&p.push(O),H.push(i),c=a),O=i;for(O&&p.push(O),p.push(65535),H.push(65535),pe=2*(K=H.length),V=2*Math.pow(Math.log(K)/Math.LN2,2),y=Math.log(V/2)/Math.LN2,ee=2*K-V,l=[],J=[],m=[],C=q=0,_e=H.length;q<_e;C=++q){if($=H[C],f=p[C],$===65535){l.push(0),J.push(0);break}if($-(oe=r[$].new)>=32768)for(l.push(0),J.push(2*(m.length+K-C)),i=re=$;$<=f?re<=f:re>=f;i=$<=f?++re:--re)m.push(r[i].new);else l.push(oe-$),J.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*K+2*m.length),ie.writeUInt16(0),ie.writeUInt16(pe),ie.writeUInt16(V),ie.writeUInt16(y),ie.writeUInt16(ee),Ee=0,Z=p.length;Ee<Z;Ee++)i=p[Ee],ie.writeUInt16(i);for(ie.writeUInt16(0),Ue=0,ae=H.length;Ue<ae;Ue++)i=H[Ue],ie.writeUInt16(i);for(rt=0,ce=l.length;rt<ce;rt++)a=l[rt],ie.writeUInt16(a);for(gt=0,de=J.length;gt<de;gt++)U=J[gt],ie.writeUInt16(U);for(_t=0,ge=m.length;_t<ge;_t++)S=m[_t],ie.writeUInt16(S);return{charMap:r,subtable:ie.data,maxGlyphID:N+1}}},t}(),pE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new X4(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=X4.encode(n,r),(s=new af).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),B$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),R$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),F$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),j$=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},z$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,f,p,y,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,y=i.length;p<y;o=++p)s=i[o],n.pos=s.offset,f=n.readString(s.length),a=new j$(f,s),c[m=s.nameID]==null&&(c[m]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),U$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),$$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,p;for(p=[],r=f=0;0<=s?f<s:f>s;r=0<=s?++f:--f)p.push(n.readInt16());return p}(),this.widths=(function(){var f,p,y,m;for(m=[],f=0,p=(y=this.metrics).length;f<p;f++)o=y[f],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),gE=[].slice,V$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,f,p,y;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new af(r.read(s))).readShort(),f=l.readShort(),y=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new W$(l,f,y,c,p):new H$(l,a,f,y,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),H$=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),W$=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new af(gE.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),G$=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Hc(e,hc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var f=new Array(4*i.length),p=0;p<i.length;++p)f[4*p+3]=255&i[p],f[4*p+2]=(65280&i[p])>>8,f[4*p+1]=(16711680&i[p])>>16,f[4*p]=(4278190080&i[p])>>24;return f},e}(),q$=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,f,p,y,m,C,S,T,O;for(i in r=pE.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},O=r.charMap)m[(l=O[i]).old]=l.new;for(C in y=r.maxGlyphID,o)C in m||(m[C]=y++);return f=function(D){var N,U;for(N in U={},D)U[D[N]]=N;return U}(m),p=Object.keys(f).sort(function(D,N){return D-N}),S=function(){var D,N,U;for(U=[],D=0,N=p.length;D<N;D++)a=p[D],U.push(f[a]);return U}(),s=this.font.glyf.encode(o,S,m),c=this.font.loca.encode(s.offsets,S),T={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},t}();wr.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();var vv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */vv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",p=1,y=2,m=4,C=1,S=2,T=1,O=2,D=4,N=8,U=16,G=32,J=64,ee=128,V=256,K=512,pe=30,$="...",H=800,oe=16,ie=1,R=2,j=3,q=1/0,re=9007199254740991,xe=17976931348623157e292,be=NaN,_e=4294967295,Z=_e-1,ae=_e>>>1,ce=[["ary",ee],["bind",T],["bindKey",O],["curry",N],["curryRight",U],["flip",K],["partial",G],["partialRight",J],["rearg",V]],de="[object Arguments]",ge="[object Array]",Ee="[object AsyncFunction]",Ue="[object Boolean]",Ne="[object Date]",rt="[object DOMException]",gt="[object Error]",_t="[object Function]",le="[object GeneratorFunction]",se="[object Map]",ue="[object Number]",Q="[object Null]",ke="[object Object]",Ve="[object Promise]",Xe="[object Proxy]",lt="[object RegExp]",at="[object Set]",pt="[object String]",jt="[object Symbol]",Bt="[object Undefined]",qt="[object WeakMap]",Jt="[object WeakSet]",gn="[object ArrayBuffer]",Cn="[object DataView]",Ye="[object Float32Array]",st="[object Float64Array]",Qe="[object Int8Array]",$t="[object Int16Array]",Yt="[object Int32Array]",wn="[object Uint8Array]",mn="[object Uint8ClampedArray]",_n="[object Uint16Array]",Rn="[object Uint32Array]",vn=/\b__p \+= '';/g,tn=/\b(__p \+=) '' \+/g,hn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Bn=/&(?:amp|lt|gt|quot|#39);/g,Jn=/[&<>"']/g,ar=RegExp(Bn.source),zn=RegExp(Jn.source),Lr=/<%-([\s\S]+?)%>/g,ns=/<%([\s\S]+?)%>/g,ki=/<%=([\s\S]+?)%>/g,Ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Je=/^\w*$/,Lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,In=/[\\^$.*+?()[\]{}|]/g,nr=RegExp(In.source),Nn=/^\s+/,Zt=/\s/,Ze=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,un=/\{\n\/\* \[wrapped with (.+)\] \*/,sn=/,? & /,An=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Qn=/[()=,{}\[\]\/\s]/,ir=/\\(\\)?/g,Wr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Un=/\w*$/,li=/^[-+]0x[0-9a-f]+$/i,kr=/^0b[01]+$/i,Do=/^\[object .+?Constructor\]$/,lr=/^0o[0-7]+$/i,br=/^(?:0|[1-9]\d*)$/,Gi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ws=/($^)/,zl=/['\n\r\u2028\u2029\\]/g,hu="\\ud800-\\udfff",Wc="\\u0300-\\u036f",fu="\\ufe20-\\ufe2f",fc="\\u20d0-\\u20ff",dc=Wc+fu+fc,ul="\\u2700-\\u27bf",cl="a-z\\xdf-\\xf6\\xf8-\\xff",Nu="\\xac\\xb1\\xd7\\xf7",pc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",So="\\u2000-\\u206f",Gr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hr="A-Z\\xc0-\\xd6\\xd8-\\xde",Ua="\\ufe0e\\ufe0f",fa=Nu+pc+So+Gr,Io="[']",Ul="["+hu+"]",pr="["+fa+"]",qr="["+dc+"]",$a="\\d+",xs="["+ul+"]",Ls="["+cl+"]",Bu="[^"+hu+fa+$a+ul+cl+hr+"]",hl="\\ud83c[\\udffb-\\udfff]",da="(?:"+qr+"|"+hl+")",Ti="[^"+hu+"]",No="(?:\\ud83c[\\udde6-\\uddff]){2}",Va="[\\ud800-\\udbff][\\udc00-\\udfff]",mo="["+hr+"]",du="\\u200d",Ha="(?:"+Ls+"|"+Bu+")",Ru="(?:"+mo+"|"+Bu+")",Bo="(?:"+Io+"(?:d|ll|m|re|s|t|ve))?",pa="(?:"+Io+"(?:D|LL|M|RE|S|T|VE))?",Wa=da+"?",$l="["+Ua+"]?",rs="(?:"+du+"(?:"+[Ti,No,Va].join("|")+")"+$l+Wa+")*",gc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ur=$l+Wa+rs,gr="(?:"+[xs,No,Va].join("|")+")"+ur,Ro="(?:"+[Ti+qr+"?",qr,No,Va,Ul].join("|")+")",$r=RegExp(Io,"g"),Fu=RegExp(qr,"g"),fl=RegExp(hl+"(?="+hl+")|"+Ro+ur,"g"),dl=RegExp([mo+"?"+Ls+"+"+Bo+"(?="+[pr,mo,"$"].join("|")+")",Ru+"+"+pa+"(?="+[pr,mo+Ha,"$"].join("|")+")",mo+"?"+Ha+"+"+Bo,mo+"+"+pa,pu,gc,$a,gr].join("|"),"g"),Fo=RegExp("["+du+hu+dc+Ua+"]"),Ga=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ju=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vl=-1,fr={};fr[Ye]=fr[st]=fr[Qe]=fr[$t]=fr[Yt]=fr[wn]=fr[mn]=fr[_n]=fr[Rn]=!0,fr[de]=fr[ge]=fr[gn]=fr[Ue]=fr[Cn]=fr[Ne]=fr[gt]=fr[_t]=fr[se]=fr[ue]=fr[ke]=fr[lt]=fr[at]=fr[pt]=fr[qt]=!1;var Mr={};Mr[de]=Mr[ge]=Mr[gn]=Mr[Cn]=Mr[Ue]=Mr[Ne]=Mr[Ye]=Mr[st]=Mr[Qe]=Mr[$t]=Mr[Yt]=Mr[se]=Mr[ue]=Mr[ke]=Mr[lt]=Mr[at]=Mr[pt]=Mr[jt]=Mr[wn]=Mr[mn]=Mr[_n]=Mr[Rn]=!0,Mr[gt]=Mr[_t]=Mr[qt]=!1;var qa={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},mc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hl={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},gu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pl=parseFloat,Wl=parseInt,mu=typeof Zo=="object"&&Zo&&Zo.Object===Object&&Zo,Dr=typeof self=="object"&&self&&self.Object===Object&&self,Ri=mu||Dr||Function("return this")(),Kn=e&&!e.nodeType&&e,Fi=Kn&&!0&&t&&!t.nodeType&&t,gl=Fi&&Fi.exports===Kn,ga=gl&&mu.process,wi=function(){try{var yt=Fi&&Fi.require&&Fi.require("util").types;return yt||ga&&ga.binding&&ga.binding("util")}catch{}}(),vu=wi&&wi.isArrayBuffer,Xo=wi&&wi.isDate,Gl=wi&&wi.isMap,ql=wi&&wi.isRegExp,Eo=wi&&wi.isSet,Yl=wi&&wi.isTypedArray;function ei(yt,Vt,Mt){switch(Mt.length){case 0:return yt.call(Vt);case 1:return yt.call(Vt,Mt[0]);case 2:return yt.call(Vt,Mt[0],Mt[1]);case 3:return yt.call(Vt,Mt[0],Mt[1],Mt[2])}return yt.apply(Vt,Mt)}function vc(yt,Vt,Mt,Sn){for(var $n=-1,cr=yt==null?0:yt.length;++$n<cr;){var xi=yt[$n];Vt(Sn,xi,Mt(xi),yt)}return Sn}function us(yt,Vt){for(var Mt=-1,Sn=yt==null?0:yt.length;++Mt<Sn&&Vt(yt[Mt],Mt,yt)!==!1;);return yt}function jo(yt,Vt){for(var Mt=yt==null?0:yt.length;Mt--&&Vt(yt[Mt],Mt,yt)!==!1;);return yt}function Zl(yt,Vt){for(var Mt=-1,Sn=yt==null?0:yt.length;++Mt<Sn;)if(!Vt(yt[Mt],Mt,yt))return!1;return!0}function zo(yt,Vt){for(var Mt=-1,Sn=yt==null?0:yt.length,$n=0,cr=[];++Mt<Sn;){var xi=yt[Mt];Vt(xi,Mt,yt)&&(cr[$n++]=xi)}return cr}function ml(yt,Vt){var Mt=yt==null?0:yt.length;return!!Mt&&an(yt,Vt,0)>-1}function vl(yt,Vt,Mt){for(var Sn=-1,$n=yt==null?0:yt.length;++Sn<$n;)if(Mt(Vt,yt[Sn]))return!0;return!1}function ti(yt,Vt){for(var Mt=-1,Sn=yt==null?0:yt.length,$n=Array(Sn);++Mt<Sn;)$n[Mt]=Vt(yt[Mt],Mt,yt);return $n}function vo(yt,Vt){for(var Mt=-1,Sn=Vt.length,$n=yt.length;++Mt<Sn;)yt[$n+Mt]=Vt[Mt];return yt}function ma(yt,Vt,Mt,Sn){var $n=-1,cr=yt==null?0:yt.length;for(Sn&&cr&&(Mt=yt[++$n]);++$n<cr;)Mt=Vt(Mt,yt[$n],$n,yt);return Mt}function ji(yt,Vt,Mt,Sn){var $n=yt==null?0:yt.length;for(Sn&&$n&&(Mt=yt[--$n]);$n--;)Mt=Vt(Mt,yt[$n],$n,yt);return Mt}function I(yt,Vt){for(var Mt=-1,Sn=yt==null?0:yt.length;++Mt<Sn;)if(Vt(yt[Mt],Mt,yt))return!0;return!1}var me=or("length");function He(yt){return yt.split("")}function ot(yt){return yt.match(An)||[]}function xt(yt,Vt,Mt){var Sn;return Mt(yt,function($n,cr,xi){if(Vt($n,cr,xi))return Sn=cr,!1}),Sn}function Nt(yt,Vt,Mt,Sn){for(var $n=yt.length,cr=Mt+(Sn?1:-1);Sn?cr--:++cr<$n;)if(Vt(yt[cr],cr,yt))return cr;return-1}function an(yt,Vt,Mt){return Vt===Vt?is(yt,Vt,Mt):Nt(yt,Tn,Mt)}function Pn(yt,Vt,Mt,Sn){for(var $n=Mt-1,cr=yt.length;++$n<cr;)if(Sn(yt[$n],Vt))return $n;return-1}function Tn(yt){return yt!==yt}function Yn(yt,Vt){var Mt=yt==null?0:yt.length;return Mt?ni(yt,Vt)/Mt:be}function or(yt){return function(Vt){return Vt==null?n:Vt[yt]}}function Sr(yt){return function(Vt){return yt==null?n:yt[Vt]}}function _i(yt,Vt,Mt,Sn,$n){return $n(yt,function(cr,xi,ri){Mt=Sn?(Sn=!1,cr):Vt(Mt,cr,xi,ri)}),Mt}function Zr(yt,Vt){var Mt=yt.length;for(yt.sort(Vt);Mt--;)yt[Mt]=yt[Mt].value;return yt}function ni(yt,Vt){for(var Mt,Sn=-1,$n=yt.length;++Sn<$n;){var cr=Vt(yt[Sn]);cr!==n&&(Mt=Mt===n?cr:Mt+cr)}return Mt}function zi(yt,Vt){for(var Mt=-1,Sn=Array(yt);++Mt<yt;)Sn[Mt]=Vt(Mt);return Sn}function qi(yt,Vt){return ti(Vt,function(Mt){return[Mt,yt[Mt]]})}function yo(yt){return yt&&yt.slice(0,ya(yt)+1).replace(Nn,"")}function Er(yt){return function(Vt){return yt(Vt)}}function Cs(yt,Vt){return ti(Vt,function(Mt){return yt[Mt]})}function yl(yt,Vt){return yt.has(Vt)}function Fs(yt,Vt){for(var Mt=-1,Sn=yt.length;++Mt<Sn&&an(Vt,yt[Mt],0)>-1;);return Mt}function yu(yt,Vt){for(var Mt=yt.length;Mt--&&an(Vt,yt[Mt],0)>-1;);return Mt}function Jo(yt,Vt){for(var Mt=yt.length,Sn=0;Mt--;)yt[Mt]===Vt&&++Sn;return Sn}var zu=Sr(qa),Ya=Sr(mc);function Za(yt){return"\\"+gu[yt]}function Yi(yt,Vt){return yt==null?n:yt[Vt]}function Qo(yt){return Fo.test(yt)}function bo(yt){return Ga.test(yt)}function Qs(yt){for(var Vt,Mt=[];!(Vt=yt.next()).done;)Mt.push(Vt.value);return Mt}function bl(yt){var Vt=-1,Mt=Array(yt.size);return yt.forEach(function(Sn,$n){Mt[++Vt]=[$n,Sn]}),Mt}function Ss(yt,Vt){return function(Mt){return yt(Vt(Mt))}}function js(yt,Vt){for(var Mt=-1,Sn=yt.length,$n=0,cr=[];++Mt<Sn;){var xi=yt[Mt];(xi===Vt||xi===f)&&(yt[Mt]=f,cr[$n++]=Mt)}return cr}function zs(yt){var Vt=-1,Mt=Array(yt.size);return yt.forEach(function(Sn){Mt[++Vt]=Sn}),Mt}function yc(yt){var Vt=-1,Mt=Array(yt.size);return yt.forEach(function(Sn){Mt[++Vt]=[Sn,Sn]}),Mt}function is(yt,Vt,Mt){for(var Sn=Mt-1,$n=yt.length;++Sn<$n;)if(yt[Sn]===Vt)return Sn;return-1}function va(yt,Vt,Mt){for(var Sn=Mt+1;Sn--;)if(yt[Sn]===Vt)return Sn;return Sn}function Es(yt){return Qo(yt)?ks(yt):me(yt)}function Ps(yt){return Qo(yt)?cs(yt):He(yt)}function ya(yt){for(var Vt=yt.length;Vt--&&Zt.test(yt.charAt(Vt)););return Vt}var ba=Sr(Hl);function ks(yt){for(var Vt=fl.lastIndex=0;fl.test(yt);)++Vt;return Vt}function cs(yt){return yt.match(fl)||[]}function ea(yt){return yt.match(dl)||[]}var _o=function yt(Vt){Vt=Vt==null?Ri:Ms.defaults(Ri.Object(),Vt,Ms.pick(Ri,ju));var Mt=Vt.Array,Sn=Vt.Date,$n=Vt.Error,cr=Vt.Function,xi=Vt.Math,ri=Vt.Object,Kl=Vt.RegExp,Us=Vt.String,Li=Vt.TypeError,ta=Mt.prototype,_a=cr.prototype,na=ri.prototype,ra=Vt["__core-js_shared__"],ia=_a.toString,Ir=na.hasOwnProperty,Uo=0,hs=function(){var d=/[^.]+$/.exec(ra&&ra.keys&&ra.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),ii=na.toString,ui=ia.call(ri),Ui=Ri._,mi=Kl("^"+ia.call(Ir).replace(In,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wo=gl?Vt.Buffer:n,eo=Vt.Symbol,Po=Vt.Uint8Array,Uu=wo?wo.allocUnsafe:n,sa=Ss(ri.getPrototypeOf,ri),Zi=ri.create,gi=na.propertyIsEnumerable,As=ta.splice,to=eo?eo.isConcatSpreadable:n,rr=eo?eo.iterator:n,wa=eo?eo.toStringTag:n,xa=function(){try{var d=wf(ri,"defineProperty");return d({},"",{}),d}catch{}}(),$o=Vt.clearTimeout!==Ri.clearTimeout&&Vt.clearTimeout,$s=Sn&&Sn.now!==Ri.Date.now&&Sn.now,Gc=Vt.setTimeout!==Ri.setTimeout&&Vt.setTimeout,fs=xi.ceil,ds=xi.floor,Vo=ri.getOwnPropertySymbols,u=wo?wo.isBuffer:n,v=Vt.isFinite,E=ta.join,F=Ss(ri.keys,ri),te=xi.max,Le=xi.min,et=Sn.now,Pt=Vt.parseInt,Rt=xi.random,nn=ta.reverse,kn=wf(Vt,"DataView"),Hn=wf(Vt,"Map"),Cr=wf(Vt,"Promise"),Ki=wf(Vt,"Set"),Oi=wf(Vt,"WeakMap"),ps=wf(ri,"create"),Ci=Oi&&new Oi,no={},qc=xf(kn),oa=xf(Hn),Ho=xf(Cr),ko=xf(Ki),pf=xf(Oi),bu=eo?eo.prototype:n,Xr=bu?bu.valueOf:n,Ts=bu?bu.toString:n;function Ae(d){if(Vs(d)&&!Br(d)&&!(d instanceof Pr)){if(d instanceof gs)return d;if(Ir.call(d,"__wrapped__"))return fw(d)}return new gs(d)}var ro=function(){function d(){}return function(b){if(!Ds(b))return{};if(Zi)return Zi(b);d.prototype=b;var A=new d;return d.prototype=n,A}}();function $u(){}function gs(d,b){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Ae.templateSettings={escape:Lr,evaluate:ns,interpolate:ki,variable:"",imports:{_:Ae}},Ae.prototype=$u.prototype,Ae.prototype.constructor=Ae,gs.prototype=ro($u.prototype),gs.prototype.constructor=gs;function Pr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function Sh(){var d=new Pr(this.__wrapped__);return d.__actions__=wl(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=wl(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=wl(this.__views__),d}function ld(){if(this.__filtered__){var d=new Pr(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function Eh(){var d=this.__wrapped__.value(),b=this.__dir__,A=Br(d),Y=b<0,ye=A?d.length:0,Be=ak(0,ye,this.__views__),Ke=Be.start,dt=Be.end,Et=dt-Ke,rn=Y?dt:Ke-1,on=this.__iteratees__,fn=on.length,Dn=0,Xn=Le(Et,this.__takeCount__);if(!A||!Y&&ye==Et&&Xn==Et)return _u(d,this.__actions__);var mr=[];e:for(;Et--&&Dn<Xn;){rn+=b;for(var Yr=-1,vr=d[rn];++Yr<fn;){var si=on[Yr],hi=si.iteratee,Ql=si.type,Qa=hi(vr);if(Ql==R)vr=Qa;else if(!Qa){if(Ql==ie)continue e;break e}}mr[Dn++]=vr}return mr}Pr.prototype=ro($u.prototype),Pr.prototype.constructor=Pr;function Ka(d){var b=-1,A=d==null?0:d.length;for(this.clear();++b<A;){var Y=d[b];this.set(Y[0],Y[1])}}function Yc(){this.__data__=ps?ps(null):{},this.size=0}function gf(d){var b=this.has(d)&&delete this.__data__[d];return this.size-=b?1:0,b}function bp(d){var b=this.__data__;if(ps){var A=b[d];return A===l?n:A}return Ir.call(b,d)?b[d]:n}function bc(d){var b=this.__data__;return ps?b[d]!==n:Ir.call(b,d)}function Ph(d,b){var A=this.__data__;return this.size+=this.has(d)?0:1,A[d]=ps&&b===n?l:b,this}Ka.prototype.clear=Yc,Ka.prototype.delete=gf,Ka.prototype.get=bp,Ka.prototype.has=bc,Ka.prototype.set=Ph;function Xl(d){var b=-1,A=d==null?0:d.length;for(this.clear();++b<A;){var Y=d[b];this.set(Y[0],Y[1])}}function _p(){this.__data__=[],this.size=0}function kh(d){var b=this.__data__,A=vt(b,d);if(A<0)return!1;var Y=b.length-1;return A==Y?b.pop():As.call(b,A,1),--this.size,!0}function Mh(d){var b=this.__data__,A=vt(b,d);return A<0?n:b[A][1]}function ud(d){return vt(this.__data__,d)>-1}function cd(d,b){var A=this.__data__,Y=vt(A,d);return Y<0?(++this.size,A.push([d,b])):A[Y][1]=b,this}Xl.prototype.clear=_p,Xl.prototype.delete=kh,Xl.prototype.get=Mh,Xl.prototype.has=ud,Xl.prototype.set=cd;function La(d){var b=-1,A=d==null?0:d.length;for(this.clear();++b<A;){var Y=d[b];this.set(Y[0],Y[1])}}function hd(){this.size=0,this.__data__={hash:new Ka,map:new(Hn||Xl),string:new Ka}}function fd(d){var b=km(this,d).delete(d);return this.size-=b?1:0,b}function dd(d){return km(this,d).get(d)}function w(d){return km(this,d).has(d)}function M(d,b){var A=km(this,d),Y=A.size;return A.set(d,b),this.size+=A.size==Y?0:1,this}La.prototype.clear=hd,La.prototype.delete=fd,La.prototype.get=dd,La.prototype.has=w,La.prototype.set=M;function z(d){var b=-1,A=d==null?0:d.length;for(this.__data__=new La;++b<A;)this.add(d[b])}function ne(d){return this.__data__.set(d,l),this}function ve(d){return this.__data__.has(d)}z.prototype.add=z.prototype.push=ne,z.prototype.has=ve;function Ce(d){var b=this.__data__=new Xl(d);this.size=b.size}function Pe(){this.__data__=new Xl,this.size=0}function Me(d){var b=this.__data__,A=b.delete(d);return this.size=b.size,A}function Te(d){return this.__data__.get(d)}function $e(d){return this.__data__.has(d)}function ct(d,b){var A=this.__data__;if(A instanceof Xl){var Y=A.__data__;if(!Hn||Y.length<i-1)return Y.push([d,b]),this.size=++A.size,this;A=this.__data__=new La(Y)}return A.set(d,b),this.size=A.size,this}Ce.prototype.clear=Pe,Ce.prototype.delete=Me,Ce.prototype.get=Te,Ce.prototype.has=$e,Ce.prototype.set=ct;function Ot(d,b){var A=Br(d),Y=!A&&Lf(d),ye=!A&&!Y&&Th(d),Be=!A&&!Y&&!ye&&xd(d),Ke=A||Y||ye||Be,dt=Ke?zi(d.length,Us):[],Et=dt.length;for(var rn in d)(b||Ir.call(d,rn))&&!(Ke&&(rn=="length"||ye&&(rn=="offset"||rn=="parent")||Be&&(rn=="buffer"||rn=="byteLength"||rn=="byteOffset")||eh(rn,Et)))&&dt.push(rn);return dt}function Dt(d){var b=d.length;return b?d[yf(0,b-1)]:n}function wt(d,b){return Mm(wl(d),Wn(b,0,d.length))}function Ht(d){return Mm(wl(d))}function zt(d,b,A){(A!==n&&!Yu(d[b],A)||A===n&&!(b in d))&&En(d,b,A)}function ht(d,b,A){var Y=d[b];(!(Ir.call(d,b)&&Yu(Y,A))||A===n&&!(b in d))&&En(d,b,A)}function vt(d,b){for(var A=d.length;A--;)if(Yu(d[A][0],b))return A;return-1}function Xt(d,b,A,Y){return B(d,function(ye,Be,Ke){b(Y,ye,A(ye),Ke)}),Y}function ln(d,b){return d&&xc(b,Wo(b),d)}function Qt(d,b){return d&&xc(b,Ll(b),d)}function En(d,b,A){b=="__proto__"&&xa?xa(d,b,{configurable:!0,enumerable:!0,value:A,writable:!0}):d[b]=A}function xn(d,b){for(var A=-1,Y=b.length,ye=Mt(Y),Be=d==null;++A<Y;)ye[A]=Be?n:zy(d,b[A]);return ye}function Wn(d,b,A){return d===d&&(A!==n&&(d=d<=A?d:A),b!==n&&(d=d>=b?d:b)),d}function h(d,b,A,Y,ye,Be){var Ke,dt=b&p,Et=b&y,rn=b&m;if(A&&(Ke=ye?A(d,Y,ye,Be):A(d)),Ke!==n)return Ke;if(!Ds(d))return d;var on=Br(d);if(on){if(Ke=uk(d),!dt)return wl(d,Ke)}else{var fn=Sa(d),Dn=fn==_t||fn==le;if(Th(d))return F_(d,dt);if(fn==ke||fn==de||Dn&&!ye){if(Ke=Et||Dn?{}:rw(d),!dt)return Et?JP(d,Qt(Ke,d)):XP(d,ln(Ke,d))}else{if(!Mr[fn])return ye?d:{};Ke=ck(d,fn,dt)}}Be||(Be=new Ce);var Xn=Be.get(d);if(Xn)return Xn;Be.set(d,Ke),Ow(d)?d.forEach(function(vr){Ke.add(h(vr,b,A,vr,d,Be))}):Aw(d)&&d.forEach(function(vr,si){Ke.set(si,h(vr,b,A,si,d,Be))});var mr=rn?Et?Ey:Sy:Et?Ll:Wo,Yr=on?n:mr(d);return us(Yr||d,function(vr,si){Yr&&(si=vr,vr=d[si]),ht(Ke,si,h(vr,b,A,si,d,Be))}),Ke}function g(d){var b=Wo(d);return function(A){return _(A,d,b)}}function _(d,b,A){var Y=A.length;if(d==null)return!Y;for(d=ri(d);Y--;){var ye=A[Y],Be=b[ye],Ke=d[ye];if(Ke===n&&!(ye in d)||!Be(Ke))return!1}return!0}function x(d,b,A){if(typeof d!="function")throw new Li(o);return Sp(function(){d.apply(n,A)},b)}function k(d,b,A,Y){var ye=-1,Be=ml,Ke=!0,dt=d.length,Et=[],rn=b.length;if(!dt)return Et;A&&(b=ti(b,Er(A))),Y?(Be=vl,Ke=!1):b.length>=i&&(Be=yl,Ke=!1,b=new z(b));e:for(;++ye<dt;){var on=d[ye],fn=A==null?on:A(on);if(on=Y||on!==0?on:0,Ke&&fn===fn){for(var Dn=rn;Dn--;)if(b[Dn]===fn)continue e;Et.push(on)}else Be(b,fn,Y)||Et.push(on)}return Et}var B=V_(Gt),W=V_(dn,!0);function X(d,b){var A=!0;return B(d,function(Y,ye,Be){return A=!!b(Y,ye,Be),A}),A}function he(d,b,A){for(var Y=-1,ye=d.length;++Y<ye;){var Be=d[Y],Ke=b(Be);if(Ke!=null&&(dt===n?Ke===Ke&&!Jl(Ke):A(Ke,dt)))var dt=Ke,Et=Be}return Et}function we(d,b,A,Y){var ye=d.length;for(A=Hr(A),A<0&&(A=-A>ye?0:ye+A),Y=Y===n||Y>ye?ye:Hr(Y),Y<0&&(Y+=ye),Y=A>Y?0:Iw(Y);A<Y;)d[A++]=b;return d}function Ge(d,b){var A=[];return B(d,function(Y,ye,Be){b(Y,ye,Be)&&A.push(Y)}),A}function ze(d,b,A,Y,ye){var Be=-1,Ke=d.length;for(A||(A=fk),ye||(ye=[]);++Be<Ke;){var dt=d[Be];b>0&&A(dt)?b>1?ze(dt,b-1,A,Y,ye):vo(ye,dt):Y||(ye[ye.length]=dt)}return ye}var mt=H_(),At=H_(!0);function Gt(d,b){return d&&mt(d,b,Wo)}function dn(d,b){return d&&At(d,b,Wo)}function yn(d,b){return zo(b,function(A){return th(d[A])})}function er(d,b){b=qu(b,d);for(var A=0,Y=b.length;d!=null&&A<Y;)d=d[Lc(b[A++])];return A&&A==Y?d:n}function We(d,b,A){var Y=b(d);return Br(d)?Y:vo(Y,A(d))}function qe(d){return d==null?d===n?Bt:Q:wa&&wa in ri(d)?ok(d):bk(d)}function ut(d,b){return d>b}function It(d,b){return d!=null&&Ir.call(d,b)}function bt(d,b){return d!=null&&b in ri(d)}function Tt(d,b,A){return d>=Le(b,A)&&d<te(b,A)}function fe(d,b,A){for(var Y=A?vl:ml,ye=d[0].length,Be=d.length,Ke=Be,dt=Mt(Be),Et=1/0,rn=[];Ke--;){var on=d[Ke];Ke&&b&&(on=ti(on,Er(b))),Et=Le(on.length,Et),dt[Ke]=!A&&(b||ye>=120&&on.length>=120)?new z(Ke&&on):n}on=d[0];var fn=-1,Dn=dt[0];e:for(;++fn<ye&&rn.length<Et;){var Xn=on[fn],mr=b?b(Xn):Xn;if(Xn=A||Xn!==0?Xn:0,!(Dn?yl(Dn,mr):Y(rn,mr,A))){for(Ke=Be;--Ke;){var Yr=dt[Ke];if(!(Yr?yl(Yr,mr):Y(d[Ke],mr,A)))continue e}Dn&&Dn.push(mr),rn.push(Xn)}}return rn}function Se(d,b,A,Y){return Gt(d,function(ye,Be,Ke){b(Y,A(ye),Be,Ke)}),Y}function De(d,b,A){b=qu(b,d),d=aw(d,b);var Y=d==null?d:d[Lc(Lu(b))];return Y==null?n:ei(Y,d,A)}function Oe(d){return Vs(d)&&qe(d)==de}function Re(d){return Vs(d)&&qe(d)==gn}function Fe(d){return Vs(d)&&qe(d)==Ne}function tt(d,b,A,Y,ye){return d===b?!0:d==null||b==null||!Vs(d)&&!Vs(b)?d!==d&&b!==b:it(d,b,A,Y,tt,ye)}function it(d,b,A,Y,ye,Be){var Ke=Br(d),dt=Br(b),Et=Ke?ge:Sa(d),rn=dt?ge:Sa(b);Et=Et==de?ke:Et,rn=rn==de?ke:rn;var on=Et==ke,fn=rn==ke,Dn=Et==rn;if(Dn&&Th(d)){if(!Th(b))return!1;Ke=!0,on=!1}if(Dn&&!on)return Be||(Be=new Ce),Ke||xd(d)?ew(d,b,A,Y,ye,Be):ik(d,b,Et,A,Y,ye,Be);if(!(A&C)){var Xn=on&&Ir.call(d,"__wrapped__"),mr=fn&&Ir.call(b,"__wrapped__");if(Xn||mr){var Yr=Xn?d.value():d,vr=mr?b.value():b;return Be||(Be=new Ce),ye(Yr,vr,A,Y,Be)}}return Dn?(Be||(Be=new Ce),sk(d,b,A,Y,ye,Be)):!1}function ft(d){return Vs(d)&&Sa(d)==se}function Ct(d,b,A,Y){var ye=A.length,Be=ye,Ke=!Y;if(d==null)return!Be;for(d=ri(d);ye--;){var dt=A[ye];if(Ke&&dt[2]?dt[1]!==d[dt[0]]:!(dt[0]in d))return!1}for(;++ye<Be;){dt=A[ye];var Et=dt[0],rn=d[Et],on=dt[1];if(Ke&&dt[2]){if(rn===n&&!(Et in d))return!1}else{var fn=new Ce;if(Y)var Dn=Y(rn,on,Et,d,b,fn);if(!(Dn===n?tt(on,rn,C|S,Y,fn):Dn))return!1}}return!0}function St(d){if(!Ds(d)||pk(d))return!1;var b=th(d)?mi:Do;return b.test(xf(d))}function en(d){return Vs(d)&&qe(d)==lt}function On(d){return Vs(d)&&Sa(d)==at}function Fn(d){return Vs(d)&&Nm(d.length)&&!!fr[qe(d)]}function Gn(d){return typeof d=="function"?d:d==null?Cl:typeof d=="object"?Br(d)?Vu(d[0],d[1]):io(d):Ww(d)}function Jr(d){if(!Cp(d))return F(d);var b=[];for(var A in ri(d))Ir.call(d,A)&&A!="constructor"&&b.push(A);return b}function ci(d){if(!Ds(d))return yk(d);var b=Cp(d),A=[];for(var Y in d)Y=="constructor"&&(b||!Ir.call(d,Y))||A.push(Y);return A}function Nr(d,b){return d<b}function vi(d,b){var A=-1,Y=xl(d)?Mt(d.length):[];return B(d,function(ye,Be,Ke){Y[++A]=b(ye,Be,Ke)}),Y}function io(d){var b=ky(d);return b.length==1&&b[0][2]?sw(b[0][0],b[0][1]):function(A){return A===d||Ct(A,d,b)}}function Vu(d,b){return Ay(d)&&iw(b)?sw(Lc(d),b):function(A){var Y=zy(A,d);return Y===n&&Y===b?Uy(A,d):tt(b,Y,C|S)}}function aa(d,b,A,Y,ye){d!==b&&mt(b,function(Be,Ke){if(ye||(ye=new Ce),Ds(Be))mf(d,b,Ke,A,aa,Y,ye);else{var dt=Y?Y(Oy(d,Ke),Be,Ke+"",d,b,ye):n;dt===n&&(dt=Be),zt(d,Ke,dt)}},Ll)}function mf(d,b,A,Y,ye,Be,Ke){var dt=Oy(d,A),Et=Oy(b,A),rn=Ke.get(Et);if(rn){zt(d,A,rn);return}var on=Be?Be(dt,Et,A+"",d,b,Ke):n,fn=on===n;if(fn){var Dn=Br(Et),Xn=!Dn&&Th(Et),mr=!Dn&&!Xn&&xd(Et);on=Et,Dn||Xn||mr?Br(dt)?on=dt:so(dt)?on=wl(dt):Xn?(fn=!1,on=F_(Et,!0)):mr?(fn=!1,on=j_(Et,!0)):on=[]:Ep(Et)||Lf(Et)?(on=dt,Lf(dt)?on=Nw(dt):(!Ds(dt)||th(dt))&&(on=rw(Et))):fn=!1}fn&&(Ke.set(Et,on),ye(on,Et,Y,Be,Ke),Ke.delete(Et)),zt(d,A,on)}function Xa(d,b){var A=d.length;if(A)return b+=b<0?A:0,eh(b,A)?d[b]:n}function _c(d,b,A){b.length?b=ti(b,function(Be){return Br(Be)?function(Ke){return er(Ke,Be.length===1?Be[0]:Be)}:Be}):b=[Cl];var Y=-1;b=ti(b,Er(dr()));var ye=vi(d,function(Be,Ke,dt){var Et=ti(b,function(rn){return rn(Be)});return{criteria:Et,index:++Y,value:Be}});return Zr(ye,function(Be,Ke){return KP(Be,Ke,A)})}function la(d,b){return Os(d,b,function(A,Y){return Uy(d,Y)})}function Os(d,b,A){for(var Y=-1,ye=b.length,Be={};++Y<ye;){var Ke=b[Y],dt=er(d,Ke);A(dt,Ke)&&Zc(Be,qu(Ke,d),dt)}return Be}function $i(d){return function(b){return er(b,d)}}function pd(d,b,A,Y){var ye=Y?Pn:an,Be=-1,Ke=b.length,dt=d;for(d===b&&(b=wl(b)),A&&(dt=ti(d,Er(A)));++Be<Ke;)for(var Et=0,rn=b[Be],on=A?A(rn):rn;(Et=ye(dt,on,Et,Y))>-1;)dt!==d&&As.call(dt,Et,1),As.call(d,Et,1);return d}function vf(d,b){for(var A=d?b.length:0,Y=A-1;A--;){var ye=b[A];if(A==Y||ye!==Be){var Be=ye;eh(ye)?As.call(d,ye,1):Kc(d,ye)}}return d}function yf(d,b){return d+ds(Rt()*(b-d+1))}function bf(d,b,A,Y){for(var ye=-1,Be=te(fs((b-d)/(A||1)),0),Ke=Mt(Be);Be--;)Ke[Y?Be:++ye]=d,d+=A;return Ke}function gd(d,b){var A="";if(!d||b<1||b>re)return A;do b%2&&(A+=d),b=ds(b/2),b&&(d+=d);while(b);return A}function Vr(d,b){return Dy(ow(d,b,Cl),d+"")}function md(d){return Dt(Ld(d))}function vm(d,b){var A=Ld(d);return Mm(A,Wn(b,0,A.length))}function Zc(d,b,A,Y){if(!Ds(d))return d;b=qu(b,d);for(var ye=-1,Be=b.length,Ke=Be-1,dt=d;dt!=null&&++ye<Be;){var Et=Lc(b[ye]),rn=A;if(Et==="__proto__"||Et==="constructor"||Et==="prototype")return d;if(ye!=Ke){var on=dt[Et];rn=Y?Y(on,Et,dt):n,rn===n&&(rn=Ds(on)?on:eh(b[ye+1])?[]:{})}ht(dt,Et,rn),dt=dt[Et]}return d}var Hu=Ci?function(d,b){return Ci.set(d,b),d}:Cl,ym=xa?function(d,b){return xa(d,"toString",{configurable:!0,enumerable:!1,value:Vy(b),writable:!0})}:Cl;function bm(d){return Mm(Ld(d))}function _l(d,b,A){var Y=-1,ye=d.length;b<0&&(b=-b>ye?0:ye+b),A=A>ye?ye:A,A<0&&(A+=ye),ye=b>A?0:A-b>>>0,b>>>=0;for(var Be=Mt(ye);++Y<ye;)Be[Y]=d[Y+b];return Be}function _m(d,b){var A;return B(d,function(Y,ye,Be){return A=b(Y,ye,Be),!A}),!!A}function Wu(d,b,A){var Y=0,ye=d==null?Y:d.length;if(typeof b=="number"&&b===b&&ye<=ae){for(;Y<ye;){var Be=Y+ye>>>1,Ke=d[Be];Ke!==null&&!Jl(Ke)&&(A?Ke<=b:Ke<b)?Y=Be+1:ye=Be}return ye}return wp(d,b,Cl,A)}function wp(d,b,A,Y){var ye=0,Be=d==null?0:d.length;if(Be===0)return 0;b=A(b);for(var Ke=b!==b,dt=b===null,Et=Jl(b),rn=b===n;ye<Be;){var on=ds((ye+Be)/2),fn=A(d[on]),Dn=fn!==n,Xn=fn===null,mr=fn===fn,Yr=Jl(fn);if(Ke)var vr=Y||mr;else rn?vr=mr&&(Y||Dn):dt?vr=mr&&Dn&&(Y||!Xn):Et?vr=mr&&Dn&&!Xn&&(Y||!Yr):Xn||Yr?vr=!1:vr=Y?fn<=b:fn<b;vr?ye=on+1:Be=on}return Le(Be,Z)}function xp(d,b){for(var A=-1,Y=d.length,ye=0,Be=[];++A<Y;){var Ke=d[A],dt=b?b(Ke):Ke;if(!A||!Yu(dt,Et)){var Et=dt;Be[ye++]=Ke===0?0:Ke}}return Be}function wm(d){return typeof d=="number"?d:Jl(d)?be:+d}function Ca(d){if(typeof d=="string")return d;if(Br(d))return ti(d,Ca)+"";if(Jl(d))return Ts?Ts.call(d):"";var b=d+"";return b=="0"&&1/d==-1/0?"-0":b}function wc(d,b,A){var Y=-1,ye=ml,Be=d.length,Ke=!0,dt=[],Et=dt;if(A)Ke=!1,ye=vl;else if(Be>=i){var rn=b?null:nk(d);if(rn)return zs(rn);Ke=!1,ye=yl,Et=new z}else Et=b?[]:dt;e:for(;++Y<Be;){var on=d[Y],fn=b?b(on):on;if(on=A||on!==0?on:0,Ke&&fn===fn){for(var Dn=Et.length;Dn--;)if(Et[Dn]===fn)continue e;b&&Et.push(fn),dt.push(on)}else ye(Et,fn,A)||(Et!==dt&&Et.push(fn),dt.push(on))}return dt}function Kc(d,b){return b=qu(b,d),d=aw(d,b),d==null||delete d[Lc(Lu(b))]}function vd(d,b,A,Y){return Zc(d,b,A(er(d,b)),Y)}function Xc(d,b,A,Y){for(var ye=d.length,Be=Y?ye:-1;(Y?Be--:++Be<ye)&&b(d[Be],Be,d););return A?_l(d,Y?0:Be,Y?Be+1:ye):_l(d,Y?Be+1:0,Y?ye:Be)}function _u(d,b){var A=d;return A instanceof Pr&&(A=A.value()),ma(b,function(Y,ye){return ye.func.apply(ye.thisArg,vo([Y],ye.args))},A)}function wu(d,b,A){var Y=d.length;if(Y<2)return Y?wc(d[0]):[];for(var ye=-1,Be=Mt(Y);++ye<Y;)for(var Ke=d[ye],dt=-1;++dt<Y;)dt!=ye&&(Be[ye]=k(Be[ye]||Ke,d[dt],b,A));return wc(ze(Be,1),b,A)}function Gu(d,b,A){for(var Y=-1,ye=d.length,Be=b.length,Ke={};++Y<ye;){var dt=Y<Be?b[Y]:n;A(Ke,d[Y],dt)}return Ke}function Ah(d){return so(d)?d:[]}function _f(d){return typeof d=="function"?d:Cl}function qu(d,b){return Br(d)?d:Ay(d,b)?[d]:hw(Mi(d))}var wy=Vr;function xu(d,b,A){var Y=d.length;return A=A===n?Y:A,!b&&A>=Y?d:_l(d,b,A)}var yd=$o||function(d){return Ri.clearTimeout(d)};function F_(d,b){if(b)return d.slice();var A=d.length,Y=Uu?Uu(A):new d.constructor(A);return d.copy(Y),Y}function xy(d){var b=new d.constructor(d.byteLength);return new Po(b).set(new Po(d)),b}function qP(d,b){var A=b?xy(d.buffer):d.buffer;return new d.constructor(A,d.byteOffset,d.byteLength)}function YP(d){var b=new d.constructor(d.source,Un.exec(d));return b.lastIndex=d.lastIndex,b}function ZP(d){return Xr?ri(Xr.call(d)):{}}function j_(d,b){var A=b?xy(d.buffer):d.buffer;return new d.constructor(A,d.byteOffset,d.length)}function z_(d,b){if(d!==b){var A=d!==n,Y=d===null,ye=d===d,Be=Jl(d),Ke=b!==n,dt=b===null,Et=b===b,rn=Jl(b);if(!dt&&!rn&&!Be&&d>b||Be&&Ke&&Et&&!dt&&!rn||Y&&Ke&&Et||!A&&Et||!ye)return 1;if(!Y&&!Be&&!rn&&d<b||rn&&A&&ye&&!Y&&!Be||dt&&A&&ye||!Ke&&ye||!Et)return-1}return 0}function KP(d,b,A){for(var Y=-1,ye=d.criteria,Be=b.criteria,Ke=ye.length,dt=A.length;++Y<Ke;){var Et=z_(ye[Y],Be[Y]);if(Et){if(Y>=dt)return Et;var rn=A[Y];return Et*(rn=="desc"?-1:1)}}return d.index-b.index}function U_(d,b,A,Y){for(var ye=-1,Be=d.length,Ke=A.length,dt=-1,Et=b.length,rn=te(Be-Ke,0),on=Mt(Et+rn),fn=!Y;++dt<Et;)on[dt]=b[dt];for(;++ye<Ke;)(fn||ye<Be)&&(on[A[ye]]=d[ye]);for(;rn--;)on[dt++]=d[ye++];return on}function $_(d,b,A,Y){for(var ye=-1,Be=d.length,Ke=-1,dt=A.length,Et=-1,rn=b.length,on=te(Be-dt,0),fn=Mt(on+rn),Dn=!Y;++ye<on;)fn[ye]=d[ye];for(var Xn=ye;++Et<rn;)fn[Xn+Et]=b[Et];for(;++Ke<dt;)(Dn||ye<Be)&&(fn[Xn+A[Ke]]=d[ye++]);return fn}function wl(d,b){var A=-1,Y=d.length;for(b||(b=Mt(Y));++A<Y;)b[A]=d[A];return b}function xc(d,b,A,Y){var ye=!A;A||(A={});for(var Be=-1,Ke=b.length;++Be<Ke;){var dt=b[Be],Et=Y?Y(A[dt],d[dt],dt,A,d):n;Et===n&&(Et=d[dt]),ye?En(A,dt,Et):ht(A,dt,Et)}return A}function XP(d,b){return xc(d,My(d),b)}function JP(d,b){return xc(d,tw(d),b)}function xm(d,b){return function(A,Y){var ye=Br(A)?vc:Xt,Be=b?b():{};return ye(A,d,dr(Y,2),Be)}}function bd(d){return Vr(function(b,A){var Y=-1,ye=A.length,Be=ye>1?A[ye-1]:n,Ke=ye>2?A[2]:n;for(Be=d.length>3&&typeof Be=="function"?(ye--,Be):n,Ke&&Ja(A[0],A[1],Ke)&&(Be=ye<3?n:Be,ye=1),b=ri(b);++Y<ye;){var dt=A[Y];dt&&d(b,dt,Y,Be)}return b})}function V_(d,b){return function(A,Y){if(A==null)return A;if(!xl(A))return d(A,Y);for(var ye=A.length,Be=b?ye:-1,Ke=ri(A);(b?Be--:++Be<ye)&&Y(Ke[Be],Be,Ke)!==!1;);return A}}function H_(d){return function(b,A,Y){for(var ye=-1,Be=ri(b),Ke=Y(b),dt=Ke.length;dt--;){var Et=Ke[d?dt:++ye];if(A(Be[Et],Et,Be)===!1)break}return b}}function QP(d,b,A){var Y=b&T,ye=Lp(d);function Be(){var Ke=this&&this!==Ri&&this instanceof Be?ye:d;return Ke.apply(Y?A:this,arguments)}return Be}function W_(d){return function(b){b=Mi(b);var A=Qo(b)?Ps(b):n,Y=A?A[0]:b.charAt(0),ye=A?xu(A,1).join(""):b.slice(1);return Y[d]()+ye}}function _d(d){return function(b){return ma(Vw($w(b).replace($r,"")),d,"")}}function Lp(d){return function(){var b=arguments;switch(b.length){case 0:return new d;case 1:return new d(b[0]);case 2:return new d(b[0],b[1]);case 3:return new d(b[0],b[1],b[2]);case 4:return new d(b[0],b[1],b[2],b[3]);case 5:return new d(b[0],b[1],b[2],b[3],b[4]);case 6:return new d(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new d(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var A=ro(d.prototype),Y=d.apply(A,b);return Ds(Y)?Y:A}}function ek(d,b,A){var Y=Lp(d);function ye(){for(var Be=arguments.length,Ke=Mt(Be),dt=Be,Et=wd(ye);dt--;)Ke[dt]=arguments[dt];var rn=Be<3&&Ke[0]!==Et&&Ke[Be-1]!==Et?[]:js(Ke,Et);if(Be-=rn.length,Be<A)return K_(d,b,Lm,ye.placeholder,n,Ke,rn,n,n,A-Be);var on=this&&this!==Ri&&this instanceof ye?Y:d;return ei(on,this,Ke)}return ye}function G_(d){return function(b,A,Y){var ye=ri(b);if(!xl(b)){var Be=dr(A,3);b=Wo(b),A=function(dt){return Be(ye[dt],dt,ye)}}var Ke=d(b,A,Y);return Ke>-1?ye[Be?b[Ke]:Ke]:n}}function q_(d){return Qc(function(b){var A=b.length,Y=A,ye=gs.prototype.thru;for(d&&b.reverse();Y--;){var Be=b[Y];if(typeof Be!="function")throw new Li(o);if(ye&&!Ke&&Pm(Be)=="wrapper")var Ke=new gs([],!0)}for(Y=Ke?Y:A;++Y<A;){Be=b[Y];var dt=Pm(Be),Et=dt=="wrapper"?Py(Be):n;Et&&Ty(Et[0])&&Et[1]==(ee|N|G|V)&&!Et[4].length&&Et[9]==1?Ke=Ke[Pm(Et[0])].apply(Ke,Et[3]):Ke=Be.length==1&&Ty(Be)?Ke[dt]():Ke.thru(Be)}return function(){var rn=arguments,on=rn[0];if(Ke&&rn.length==1&&Br(on))return Ke.plant(on).value();for(var fn=0,Dn=A?b[fn].apply(this,rn):on;++fn<A;)Dn=b[fn].call(this,Dn);return Dn}})}function Lm(d,b,A,Y,ye,Be,Ke,dt,Et,rn){var on=b&ee,fn=b&T,Dn=b&O,Xn=b&(N|U),mr=b&K,Yr=Dn?n:Lp(d);function vr(){for(var si=arguments.length,hi=Mt(si),Ql=si;Ql--;)hi[Ql]=arguments[Ql];if(Xn)var Qa=wd(vr),eu=Jo(hi,Qa);if(Y&&(hi=U_(hi,Y,ye,Xn)),Be&&(hi=$_(hi,Be,Ke,Xn)),si-=eu,Xn&&si<rn){var oo=js(hi,Qa);return K_(d,b,Lm,vr.placeholder,A,hi,oo,dt,Et,rn-si)}var Zu=fn?A:this,rh=Dn?Zu[d]:d;return si=hi.length,dt?hi=_k(hi,dt):mr&&si>1&&hi.reverse(),on&&Et<si&&(hi.length=Et),this&&this!==Ri&&this instanceof vr&&(rh=Yr||Lp(rh)),rh.apply(Zu,hi)}return vr}function Y_(d,b){return function(A,Y){return Se(A,d,b(Y),{})}}function Cm(d,b){return function(A,Y){var ye;if(A===n&&Y===n)return b;if(A!==n&&(ye=A),Y!==n){if(ye===n)return Y;typeof A=="string"||typeof Y=="string"?(A=Ca(A),Y=Ca(Y)):(A=wm(A),Y=wm(Y)),ye=d(A,Y)}return ye}}function Ly(d){return Qc(function(b){return b=ti(b,Er(dr())),Vr(function(A){var Y=this;return d(b,function(ye){return ei(ye,Y,A)})})})}function Sm(d,b){b=b===n?" ":Ca(b);var A=b.length;if(A<2)return A?gd(b,d):b;var Y=gd(b,fs(d/Es(b)));return Qo(b)?xu(Ps(Y),0,d).join(""):Y.slice(0,d)}function tk(d,b,A,Y){var ye=b&T,Be=Lp(d);function Ke(){for(var dt=-1,Et=arguments.length,rn=-1,on=Y.length,fn=Mt(on+Et),Dn=this&&this!==Ri&&this instanceof Ke?Be:d;++rn<on;)fn[rn]=Y[rn];for(;Et--;)fn[rn++]=arguments[++dt];return ei(Dn,ye?A:this,fn)}return Ke}function Z_(d){return function(b,A,Y){return Y&&typeof Y!="number"&&Ja(b,A,Y)&&(A=Y=n),b=nh(b),A===n?(A=b,b=0):A=nh(A),Y=Y===n?b<A?1:-1:nh(Y),bf(b,A,Y,d)}}function Em(d){return function(b,A){return typeof b=="string"&&typeof A=="string"||(b=Cu(b),A=Cu(A)),d(b,A)}}function K_(d,b,A,Y,ye,Be,Ke,dt,Et,rn){var on=b&N,fn=on?Ke:n,Dn=on?n:Ke,Xn=on?Be:n,mr=on?n:Be;b|=on?G:J,b&=~(on?J:G),b&D||(b&=-4);var Yr=[d,b,ye,Xn,fn,mr,Dn,dt,Et,rn],vr=A.apply(n,Yr);return Ty(d)&&lw(vr,Yr),vr.placeholder=Y,uw(vr,d,b)}function Cy(d){var b=xi[d];return function(A,Y){if(A=Cu(A),Y=Y==null?0:Le(Hr(Y),292),Y&&v(A)){var ye=(Mi(A)+"e").split("e"),Be=b(ye[0]+"e"+(+ye[1]+Y));return ye=(Mi(Be)+"e").split("e"),+(ye[0]+"e"+(+ye[1]-Y))}return b(A)}}var nk=Ki&&1/zs(new Ki([,-0]))[1]==q?function(d){return new Ki(d)}:Gy;function X_(d){return function(b){var A=Sa(b);return A==se?bl(b):A==at?yc(b):qi(b,d(b))}}function Jc(d,b,A,Y,ye,Be,Ke,dt){var Et=b&O;if(!Et&&typeof d!="function")throw new Li(o);var rn=Y?Y.length:0;if(rn||(b&=-97,Y=ye=n),Ke=Ke===n?Ke:te(Hr(Ke),0),dt=dt===n?dt:Hr(dt),rn-=ye?ye.length:0,b&J){var on=Y,fn=ye;Y=ye=n}var Dn=Et?n:Py(d),Xn=[d,b,A,Y,ye,on,fn,Be,Ke,dt];if(Dn&&vk(Xn,Dn),d=Xn[0],b=Xn[1],A=Xn[2],Y=Xn[3],ye=Xn[4],dt=Xn[9]=Xn[9]===n?Et?0:d.length:te(Xn[9]-rn,0),!dt&&b&(N|U)&&(b&=-25),!b||b==T)var mr=QP(d,b,A);else b==N||b==U?mr=ek(d,b,dt):(b==G||b==(T|G))&&!ye.length?mr=tk(d,b,A,Y):mr=Lm.apply(n,Xn);var Yr=Dn?Hu:lw;return uw(Yr(mr,Xn),d,b)}function J_(d,b,A,Y){return d===n||Yu(d,na[A])&&!Ir.call(Y,A)?b:d}function Q_(d,b,A,Y,ye,Be){return Ds(d)&&Ds(b)&&(Be.set(b,d),aa(d,b,n,Q_,Be),Be.delete(b)),d}function rk(d){return Ep(d)?n:d}function ew(d,b,A,Y,ye,Be){var Ke=A&C,dt=d.length,Et=b.length;if(dt!=Et&&!(Ke&&Et>dt))return!1;var rn=Be.get(d),on=Be.get(b);if(rn&&on)return rn==b&&on==d;var fn=-1,Dn=!0,Xn=A&S?new z:n;for(Be.set(d,b),Be.set(b,d);++fn<dt;){var mr=d[fn],Yr=b[fn];if(Y)var vr=Ke?Y(Yr,mr,fn,b,d,Be):Y(mr,Yr,fn,d,b,Be);if(vr!==n){if(vr)continue;Dn=!1;break}if(Xn){if(!I(b,function(si,hi){if(!yl(Xn,hi)&&(mr===si||ye(mr,si,A,Y,Be)))return Xn.push(hi)})){Dn=!1;break}}else if(!(mr===Yr||ye(mr,Yr,A,Y,Be))){Dn=!1;break}}return Be.delete(d),Be.delete(b),Dn}function ik(d,b,A,Y,ye,Be,Ke){switch(A){case Cn:if(d.byteLength!=b.byteLength||d.byteOffset!=b.byteOffset)return!1;d=d.buffer,b=b.buffer;case gn:return!(d.byteLength!=b.byteLength||!Be(new Po(d),new Po(b)));case Ue:case Ne:case ue:return Yu(+d,+b);case gt:return d.name==b.name&&d.message==b.message;case lt:case pt:return d==b+"";case se:var dt=bl;case at:var Et=Y&C;if(dt||(dt=zs),d.size!=b.size&&!Et)return!1;var rn=Ke.get(d);if(rn)return rn==b;Y|=S,Ke.set(d,b);var on=ew(dt(d),dt(b),Y,ye,Be,Ke);return Ke.delete(d),on;case jt:if(Xr)return Xr.call(d)==Xr.call(b)}return!1}function sk(d,b,A,Y,ye,Be){var Ke=A&C,dt=Sy(d),Et=dt.length,rn=Sy(b),on=rn.length;if(Et!=on&&!Ke)return!1;for(var fn=Et;fn--;){var Dn=dt[fn];if(!(Ke?Dn in b:Ir.call(b,Dn)))return!1}var Xn=Be.get(d),mr=Be.get(b);if(Xn&&mr)return Xn==b&&mr==d;var Yr=!0;Be.set(d,b),Be.set(b,d);for(var vr=Ke;++fn<Et;){Dn=dt[fn];var si=d[Dn],hi=b[Dn];if(Y)var Ql=Ke?Y(hi,si,Dn,b,d,Be):Y(si,hi,Dn,d,b,Be);if(!(Ql===n?si===hi||ye(si,hi,A,Y,Be):Ql)){Yr=!1;break}vr||(vr=Dn=="constructor")}if(Yr&&!vr){var Qa=d.constructor,eu=b.constructor;Qa!=eu&&"constructor"in d&&"constructor"in b&&!(typeof Qa=="function"&&Qa instanceof Qa&&typeof eu=="function"&&eu instanceof eu)&&(Yr=!1)}return Be.delete(d),Be.delete(b),Yr}function Qc(d){return Dy(ow(d,n,gw),d+"")}function Sy(d){return We(d,Wo,My)}function Ey(d){return We(d,Ll,tw)}var Py=Ci?function(d){return Ci.get(d)}:Gy;function Pm(d){for(var b=d.name+"",A=no[b],Y=Ir.call(no,b)?A.length:0;Y--;){var ye=A[Y],Be=ye.func;if(Be==null||Be==d)return ye.name}return b}function wd(d){var b=Ir.call(Ae,"placeholder")?Ae:d;return b.placeholder}function dr(){var d=Ae.iteratee||Hy;return d=d===Hy?Gn:d,arguments.length?d(arguments[0],arguments[1]):d}function km(d,b){var A=d.__data__;return dk(b)?A[typeof b=="string"?"string":"hash"]:A.map}function ky(d){for(var b=Wo(d),A=b.length;A--;){var Y=b[A],ye=d[Y];b[A]=[Y,ye,iw(ye)]}return b}function wf(d,b){var A=Yi(d,b);return St(A)?A:n}function ok(d){var b=Ir.call(d,wa),A=d[wa];try{d[wa]=n;var Y=!0}catch{}var ye=ii.call(d);return Y&&(b?d[wa]=A:delete d[wa]),ye}var My=Vo?function(d){return d==null?[]:(d=ri(d),zo(Vo(d),function(b){return gi.call(d,b)}))}:qy,tw=Vo?function(d){for(var b=[];d;)vo(b,My(d)),d=sa(d);return b}:qy,Sa=qe;(kn&&Sa(new kn(new ArrayBuffer(1)))!=Cn||Hn&&Sa(new Hn)!=se||Cr&&Sa(Cr.resolve())!=Ve||Ki&&Sa(new Ki)!=at||Oi&&Sa(new Oi)!=qt)&&(Sa=function(d){var b=qe(d),A=b==ke?d.constructor:n,Y=A?xf(A):"";if(Y)switch(Y){case qc:return Cn;case oa:return se;case Ho:return Ve;case ko:return at;case pf:return qt}return b});function ak(d,b,A){for(var Y=-1,ye=A.length;++Y<ye;){var Be=A[Y],Ke=Be.size;switch(Be.type){case"drop":d+=Ke;break;case"dropRight":b-=Ke;break;case"take":b=Le(b,d+Ke);break;case"takeRight":d=te(d,b-Ke);break}}return{start:d,end:b}}function lk(d){var b=d.match(un);return b?b[1].split(sn):[]}function nw(d,b,A){b=qu(b,d);for(var Y=-1,ye=b.length,Be=!1;++Y<ye;){var Ke=Lc(b[Y]);if(!(Be=d!=null&&A(d,Ke)))break;d=d[Ke]}return Be||++Y!=ye?Be:(ye=d==null?0:d.length,!!ye&&Nm(ye)&&eh(Ke,ye)&&(Br(d)||Lf(d)))}function uk(d){var b=d.length,A=new d.constructor(b);return b&&typeof d[0]=="string"&&Ir.call(d,"index")&&(A.index=d.index,A.input=d.input),A}function rw(d){return typeof d.constructor=="function"&&!Cp(d)?ro(sa(d)):{}}function ck(d,b,A){var Y=d.constructor;switch(b){case gn:return xy(d);case Ue:case Ne:return new Y(+d);case Cn:return qP(d,A);case Ye:case st:case Qe:case $t:case Yt:case wn:case mn:case _n:case Rn:return j_(d,A);case se:return new Y;case ue:case pt:return new Y(d);case lt:return YP(d);case at:return new Y;case jt:return ZP(d)}}function hk(d,b){var A=b.length;if(!A)return d;var Y=A-1;return b[Y]=(A>1?"& ":"")+b[Y],b=b.join(A>2?", ":" "),d.replace(Ze,`{
/* [wrapped with `+b+`] */
`)}function fk(d){return Br(d)||Lf(d)||!!(to&&d&&d[to])}function eh(d,b){var A=typeof d;return b=b??re,!!b&&(A=="number"||A!="symbol"&&br.test(d))&&d>-1&&d%1==0&&d<b}function Ja(d,b,A){if(!Ds(A))return!1;var Y=typeof b;return(Y=="number"?xl(A)&&eh(b,A.length):Y=="string"&&b in A)?Yu(A[b],d):!1}function Ay(d,b){if(Br(d))return!1;var A=typeof d;return A=="number"||A=="symbol"||A=="boolean"||d==null||Jl(d)?!0:Je.test(d)||!Ft.test(d)||b!=null&&d in ri(b)}function dk(d){var b=typeof d;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?d!=="__proto__":d===null}function Ty(d){var b=Pm(d),A=Ae[b];if(typeof A!="function"||!(b in Pr.prototype))return!1;if(d===A)return!0;var Y=Py(A);return!!Y&&d===Y[0]}function pk(d){return!!hs&&hs in d}var gk=ra?th:Yy;function Cp(d){var b=d&&d.constructor,A=typeof b=="function"&&b.prototype||na;return d===A}function iw(d){return d===d&&!Ds(d)}function sw(d,b){return function(A){return A==null?!1:A[d]===b&&(b!==n||d in ri(A))}}function mk(d){var b=Dm(d,function(Y){return A.size===c&&A.clear(),Y}),A=b.cache;return b}function vk(d,b){var A=d[1],Y=b[1],ye=A|Y,Be=ye<(T|O|ee),Ke=Y==ee&&A==N||Y==ee&&A==V&&d[7].length<=b[8]||Y==(ee|V)&&b[7].length<=b[8]&&A==N;if(!(Be||Ke))return d;Y&T&&(d[2]=b[2],ye|=A&T?0:D);var dt=b[3];if(dt){var Et=d[3];d[3]=Et?U_(Et,dt,b[4]):dt,d[4]=Et?js(d[3],f):b[4]}return dt=b[5],dt&&(Et=d[5],d[5]=Et?$_(Et,dt,b[6]):dt,d[6]=Et?js(d[5],f):b[6]),dt=b[7],dt&&(d[7]=dt),Y&ee&&(d[8]=d[8]==null?b[8]:Le(d[8],b[8])),d[9]==null&&(d[9]=b[9]),d[0]=b[0],d[1]=ye,d}function yk(d){var b=[];if(d!=null)for(var A in ri(d))b.push(A);return b}function bk(d){return ii.call(d)}function ow(d,b,A){return b=te(b===n?d.length-1:b,0),function(){for(var Y=arguments,ye=-1,Be=te(Y.length-b,0),Ke=Mt(Be);++ye<Be;)Ke[ye]=Y[b+ye];ye=-1;for(var dt=Mt(b+1);++ye<b;)dt[ye]=Y[ye];return dt[b]=A(Ke),ei(d,this,dt)}}function aw(d,b){return b.length<2?d:er(d,_l(b,0,-1))}function _k(d,b){for(var A=d.length,Y=Le(b.length,A),ye=wl(d);Y--;){var Be=b[Y];d[Y]=eh(Be,A)?ye[Be]:n}return d}function Oy(d,b){if(!(b==="constructor"&&typeof d[b]=="function")&&b!="__proto__")return d[b]}var lw=cw(Hu),Sp=Gc||function(d,b){return Ri.setTimeout(d,b)},Dy=cw(ym);function uw(d,b,A){var Y=b+"";return Dy(d,hk(Y,wk(lk(Y),A)))}function cw(d){var b=0,A=0;return function(){var Y=et(),ye=oe-(Y-A);if(A=Y,ye>0){if(++b>=H)return arguments[0]}else b=0;return d.apply(n,arguments)}}function Mm(d,b){var A=-1,Y=d.length,ye=Y-1;for(b=b===n?Y:b;++A<b;){var Be=yf(A,ye),Ke=d[Be];d[Be]=d[A],d[A]=Ke}return d.length=b,d}var hw=mk(function(d){var b=[];return d.charCodeAt(0)===46&&b.push(""),d.replace(Lt,function(A,Y,ye,Be){b.push(ye?Be.replace(ir,"$1"):Y||A)}),b});function Lc(d){if(typeof d=="string"||Jl(d))return d;var b=d+"";return b=="0"&&1/d==-1/0?"-0":b}function xf(d){if(d!=null){try{return ia.call(d)}catch{}try{return d+""}catch{}}return""}function wk(d,b){return us(ce,function(A){var Y="_."+A[0];b&A[1]&&!ml(d,Y)&&d.push(Y)}),d.sort()}function fw(d){if(d instanceof Pr)return d.clone();var b=new gs(d.__wrapped__,d.__chain__);return b.__actions__=wl(d.__actions__),b.__index__=d.__index__,b.__values__=d.__values__,b}function xk(d,b,A){(A?Ja(d,b,A):b===n)?b=1:b=te(Hr(b),0);var Y=d==null?0:d.length;if(!Y||b<1)return[];for(var ye=0,Be=0,Ke=Mt(fs(Y/b));ye<Y;)Ke[Be++]=_l(d,ye,ye+=b);return Ke}function Lk(d){for(var b=-1,A=d==null?0:d.length,Y=0,ye=[];++b<A;){var Be=d[b];Be&&(ye[Y++]=Be)}return ye}function Ck(){var d=arguments.length;if(!d)return[];for(var b=Mt(d-1),A=arguments[0],Y=d;Y--;)b[Y-1]=arguments[Y];return vo(Br(A)?wl(A):[A],ze(b,1))}var Sk=Vr(function(d,b){return so(d)?k(d,ze(b,1,so,!0)):[]}),Ek=Vr(function(d,b){var A=Lu(b);return so(A)&&(A=n),so(d)?k(d,ze(b,1,so,!0),dr(A,2)):[]}),Pk=Vr(function(d,b){var A=Lu(b);return so(A)&&(A=n),so(d)?k(d,ze(b,1,so,!0),n,A):[]});function kk(d,b,A){var Y=d==null?0:d.length;return Y?(b=A||b===n?1:Hr(b),_l(d,b<0?0:b,Y)):[]}function Mk(d,b,A){var Y=d==null?0:d.length;return Y?(b=A||b===n?1:Hr(b),b=Y-b,_l(d,0,b<0?0:b)):[]}function Ak(d,b){return d&&d.length?Xc(d,dr(b,3),!0,!0):[]}function Tk(d,b){return d&&d.length?Xc(d,dr(b,3),!0):[]}function Ok(d,b,A,Y){var ye=d==null?0:d.length;return ye?(A&&typeof A!="number"&&Ja(d,b,A)&&(A=0,Y=ye),we(d,b,A,Y)):[]}function dw(d,b,A){var Y=d==null?0:d.length;if(!Y)return-1;var ye=A==null?0:Hr(A);return ye<0&&(ye=te(Y+ye,0)),Nt(d,dr(b,3),ye)}function pw(d,b,A){var Y=d==null?0:d.length;if(!Y)return-1;var ye=Y-1;return A!==n&&(ye=Hr(A),ye=A<0?te(Y+ye,0):Le(ye,Y-1)),Nt(d,dr(b,3),ye,!0)}function gw(d){var b=d==null?0:d.length;return b?ze(d,1):[]}function Dk(d){var b=d==null?0:d.length;return b?ze(d,q):[]}function Ik(d,b){var A=d==null?0:d.length;return A?(b=b===n?1:Hr(b),ze(d,b)):[]}function Nk(d){for(var b=-1,A=d==null?0:d.length,Y={};++b<A;){var ye=d[b];Y[ye[0]]=ye[1]}return Y}function mw(d){return d&&d.length?d[0]:n}function Bk(d,b,A){var Y=d==null?0:d.length;if(!Y)return-1;var ye=A==null?0:Hr(A);return ye<0&&(ye=te(Y+ye,0)),an(d,b,ye)}function Rk(d){var b=d==null?0:d.length;return b?_l(d,0,-1):[]}var Fk=Vr(function(d){var b=ti(d,Ah);return b.length&&b[0]===d[0]?fe(b):[]}),jk=Vr(function(d){var b=Lu(d),A=ti(d,Ah);return b===Lu(A)?b=n:A.pop(),A.length&&A[0]===d[0]?fe(A,dr(b,2)):[]}),zk=Vr(function(d){var b=Lu(d),A=ti(d,Ah);return b=typeof b=="function"?b:n,b&&A.pop(),A.length&&A[0]===d[0]?fe(A,n,b):[]});function Uk(d,b){return d==null?"":E.call(d,b)}function Lu(d){var b=d==null?0:d.length;return b?d[b-1]:n}function $k(d,b,A){var Y=d==null?0:d.length;if(!Y)return-1;var ye=Y;return A!==n&&(ye=Hr(A),ye=ye<0?te(Y+ye,0):Le(ye,Y-1)),b===b?va(d,b,ye):Nt(d,Tn,ye,!0)}function Vk(d,b){return d&&d.length?Xa(d,Hr(b)):n}var Hk=Vr(vw);function vw(d,b){return d&&d.length&&b&&b.length?pd(d,b):d}function Wk(d,b,A){return d&&d.length&&b&&b.length?pd(d,b,dr(A,2)):d}function Gk(d,b,A){return d&&d.length&&b&&b.length?pd(d,b,n,A):d}var qk=Qc(function(d,b){var A=d==null?0:d.length,Y=xn(d,b);return vf(d,ti(b,function(ye){return eh(ye,A)?+ye:ye}).sort(z_)),Y});function Yk(d,b){var A=[];if(!(d&&d.length))return A;var Y=-1,ye=[],Be=d.length;for(b=dr(b,3);++Y<Be;){var Ke=d[Y];b(Ke,Y,d)&&(A.push(Ke),ye.push(Y))}return vf(d,ye),A}function Iy(d){return d==null?d:nn.call(d)}function Zk(d,b,A){var Y=d==null?0:d.length;return Y?(A&&typeof A!="number"&&Ja(d,b,A)?(b=0,A=Y):(b=b==null?0:Hr(b),A=A===n?Y:Hr(A)),_l(d,b,A)):[]}function Kk(d,b){return Wu(d,b)}function Xk(d,b,A){return wp(d,b,dr(A,2))}function Jk(d,b){var A=d==null?0:d.length;if(A){var Y=Wu(d,b);if(Y<A&&Yu(d[Y],b))return Y}return-1}function Qk(d,b){return Wu(d,b,!0)}function eM(d,b,A){return wp(d,b,dr(A,2),!0)}function tM(d,b){var A=d==null?0:d.length;if(A){var Y=Wu(d,b,!0)-1;if(Yu(d[Y],b))return Y}return-1}function nM(d){return d&&d.length?xp(d):[]}function rM(d,b){return d&&d.length?xp(d,dr(b,2)):[]}function iM(d){var b=d==null?0:d.length;return b?_l(d,1,b):[]}function sM(d,b,A){return d&&d.length?(b=A||b===n?1:Hr(b),_l(d,0,b<0?0:b)):[]}function oM(d,b,A){var Y=d==null?0:d.length;return Y?(b=A||b===n?1:Hr(b),b=Y-b,_l(d,b<0?0:b,Y)):[]}function aM(d,b){return d&&d.length?Xc(d,dr(b,3),!1,!0):[]}function lM(d,b){return d&&d.length?Xc(d,dr(b,3)):[]}var uM=Vr(function(d){return wc(ze(d,1,so,!0))}),cM=Vr(function(d){var b=Lu(d);return so(b)&&(b=n),wc(ze(d,1,so,!0),dr(b,2))}),hM=Vr(function(d){var b=Lu(d);return b=typeof b=="function"?b:n,wc(ze(d,1,so,!0),n,b)});function fM(d){return d&&d.length?wc(d):[]}function dM(d,b){return d&&d.length?wc(d,dr(b,2)):[]}function pM(d,b){return b=typeof b=="function"?b:n,d&&d.length?wc(d,n,b):[]}function Ny(d){if(!(d&&d.length))return[];var b=0;return d=zo(d,function(A){if(so(A))return b=te(A.length,b),!0}),zi(b,function(A){return ti(d,or(A))})}function yw(d,b){if(!(d&&d.length))return[];var A=Ny(d);return b==null?A:ti(A,function(Y){return ei(b,n,Y)})}var gM=Vr(function(d,b){return so(d)?k(d,b):[]}),mM=Vr(function(d){return wu(zo(d,so))}),vM=Vr(function(d){var b=Lu(d);return so(b)&&(b=n),wu(zo(d,so),dr(b,2))}),yM=Vr(function(d){var b=Lu(d);return b=typeof b=="function"?b:n,wu(zo(d,so),n,b)}),bM=Vr(Ny);function _M(d,b){return Gu(d||[],b||[],ht)}function wM(d,b){return Gu(d||[],b||[],Zc)}var xM=Vr(function(d){var b=d.length,A=b>1?d[b-1]:n;return A=typeof A=="function"?(d.pop(),A):n,yw(d,A)});function bw(d){var b=Ae(d);return b.__chain__=!0,b}function LM(d,b){return b(d),d}function Am(d,b){return b(d)}var CM=Qc(function(d){var b=d.length,A=b?d[0]:0,Y=this.__wrapped__,ye=function(Be){return xn(Be,d)};return b>1||this.__actions__.length||!(Y instanceof Pr)||!eh(A)?this.thru(ye):(Y=Y.slice(A,+A+(b?1:0)),Y.__actions__.push({func:Am,args:[ye],thisArg:n}),new gs(Y,this.__chain__).thru(function(Be){return b&&!Be.length&&Be.push(n),Be}))});function SM(){return bw(this)}function EM(){return new gs(this.value(),this.__chain__)}function PM(){this.__values__===n&&(this.__values__=Dw(this.value()));var d=this.__index__>=this.__values__.length,b=d?n:this.__values__[this.__index__++];return{done:d,value:b}}function kM(){return this}function MM(d){for(var b,A=this;A instanceof $u;){var Y=fw(A);Y.__index__=0,Y.__values__=n,b?ye.__wrapped__=Y:b=Y;var ye=Y;A=A.__wrapped__}return ye.__wrapped__=d,b}function AM(){var d=this.__wrapped__;if(d instanceof Pr){var b=d;return this.__actions__.length&&(b=new Pr(this)),b=b.reverse(),b.__actions__.push({func:Am,args:[Iy],thisArg:n}),new gs(b,this.__chain__)}return this.thru(Iy)}function TM(){return _u(this.__wrapped__,this.__actions__)}var OM=xm(function(d,b,A){Ir.call(d,A)?++d[A]:En(d,A,1)});function DM(d,b,A){var Y=Br(d)?Zl:X;return A&&Ja(d,b,A)&&(b=n),Y(d,dr(b,3))}function IM(d,b){var A=Br(d)?zo:Ge;return A(d,dr(b,3))}var NM=G_(dw),BM=G_(pw);function RM(d,b){return ze(Tm(d,b),1)}function FM(d,b){return ze(Tm(d,b),q)}function jM(d,b,A){return A=A===n?1:Hr(A),ze(Tm(d,b),A)}function _w(d,b){var A=Br(d)?us:B;return A(d,dr(b,3))}function ww(d,b){var A=Br(d)?jo:W;return A(d,dr(b,3))}var zM=xm(function(d,b,A){Ir.call(d,A)?d[A].push(b):En(d,A,[b])});function UM(d,b,A,Y){d=xl(d)?d:Ld(d),A=A&&!Y?Hr(A):0;var ye=d.length;return A<0&&(A=te(ye+A,0)),Bm(d)?A<=ye&&d.indexOf(b,A)>-1:!!ye&&an(d,b,A)>-1}var $M=Vr(function(d,b,A){var Y=-1,ye=typeof b=="function",Be=xl(d)?Mt(d.length):[];return B(d,function(Ke){Be[++Y]=ye?ei(b,Ke,A):De(Ke,b,A)}),Be}),VM=xm(function(d,b,A){En(d,A,b)});function Tm(d,b){var A=Br(d)?ti:vi;return A(d,dr(b,3))}function HM(d,b,A,Y){return d==null?[]:(Br(b)||(b=b==null?[]:[b]),A=Y?n:A,Br(A)||(A=A==null?[]:[A]),_c(d,b,A))}var WM=xm(function(d,b,A){d[A?0:1].push(b)},function(){return[[],[]]});function GM(d,b,A){var Y=Br(d)?ma:_i,ye=arguments.length<3;return Y(d,dr(b,4),A,ye,B)}function qM(d,b,A){var Y=Br(d)?ji:_i,ye=arguments.length<3;return Y(d,dr(b,4),A,ye,W)}function YM(d,b){var A=Br(d)?zo:Ge;return A(d,Im(dr(b,3)))}function ZM(d){var b=Br(d)?Dt:md;return b(d)}function KM(d,b,A){(A?Ja(d,b,A):b===n)?b=1:b=Hr(b);var Y=Br(d)?wt:vm;return Y(d,b)}function XM(d){var b=Br(d)?Ht:bm;return b(d)}function JM(d){if(d==null)return 0;if(xl(d))return Bm(d)?Es(d):d.length;var b=Sa(d);return b==se||b==at?d.size:Jr(d).length}function QM(d,b,A){var Y=Br(d)?I:_m;return A&&Ja(d,b,A)&&(b=n),Y(d,dr(b,3))}var eA=Vr(function(d,b){if(d==null)return[];var A=b.length;return A>1&&Ja(d,b[0],b[1])?b=[]:A>2&&Ja(b[0],b[1],b[2])&&(b=[b[0]]),_c(d,ze(b,1),[])}),Om=$s||function(){return Ri.Date.now()};function tA(d,b){if(typeof b!="function")throw new Li(o);return d=Hr(d),function(){if(--d<1)return b.apply(this,arguments)}}function xw(d,b,A){return b=A?n:b,b=d&&b==null?d.length:b,Jc(d,ee,n,n,n,n,b)}function Lw(d,b){var A;if(typeof b!="function")throw new Li(o);return d=Hr(d),function(){return--d>0&&(A=b.apply(this,arguments)),d<=1&&(b=n),A}}var By=Vr(function(d,b,A){var Y=T;if(A.length){var ye=js(A,wd(By));Y|=G}return Jc(d,Y,b,A,ye)}),Cw=Vr(function(d,b,A){var Y=T|O;if(A.length){var ye=js(A,wd(Cw));Y|=G}return Jc(b,Y,d,A,ye)});function Sw(d,b,A){b=A?n:b;var Y=Jc(d,N,n,n,n,n,n,b);return Y.placeholder=Sw.placeholder,Y}function Ew(d,b,A){b=A?n:b;var Y=Jc(d,U,n,n,n,n,n,b);return Y.placeholder=Ew.placeholder,Y}function Pw(d,b,A){var Y,ye,Be,Ke,dt,Et,rn=0,on=!1,fn=!1,Dn=!0;if(typeof d!="function")throw new Li(o);b=Cu(b)||0,Ds(A)&&(on=!!A.leading,fn="maxWait"in A,Be=fn?te(Cu(A.maxWait)||0,b):Be,Dn="trailing"in A?!!A.trailing:Dn);function Xn(oo){var Zu=Y,rh=ye;return Y=ye=n,rn=oo,Ke=d.apply(rh,Zu),Ke}function mr(oo){return rn=oo,dt=Sp(si,b),on?Xn(oo):Ke}function Yr(oo){var Zu=oo-Et,rh=oo-rn,Gw=b-Zu;return fn?Le(Gw,Be-rh):Gw}function vr(oo){var Zu=oo-Et,rh=oo-rn;return Et===n||Zu>=b||Zu<0||fn&&rh>=Be}function si(){var oo=Om();if(vr(oo))return hi(oo);dt=Sp(si,Yr(oo))}function hi(oo){return dt=n,Dn&&Y?Xn(oo):(Y=ye=n,Ke)}function Ql(){dt!==n&&yd(dt),rn=0,Y=Et=ye=dt=n}function Qa(){return dt===n?Ke:hi(Om())}function eu(){var oo=Om(),Zu=vr(oo);if(Y=arguments,ye=this,Et=oo,Zu){if(dt===n)return mr(Et);if(fn)return yd(dt),dt=Sp(si,b),Xn(Et)}return dt===n&&(dt=Sp(si,b)),Ke}return eu.cancel=Ql,eu.flush=Qa,eu}var nA=Vr(function(d,b){return x(d,1,b)}),rA=Vr(function(d,b,A){return x(d,Cu(b)||0,A)});function iA(d){return Jc(d,K)}function Dm(d,b){if(typeof d!="function"||b!=null&&typeof b!="function")throw new Li(o);var A=function(){var Y=arguments,ye=b?b.apply(this,Y):Y[0],Be=A.cache;if(Be.has(ye))return Be.get(ye);var Ke=d.apply(this,Y);return A.cache=Be.set(ye,Ke)||Be,Ke};return A.cache=new(Dm.Cache||La),A}Dm.Cache=La;function Im(d){if(typeof d!="function")throw new Li(o);return function(){var b=arguments;switch(b.length){case 0:return!d.call(this);case 1:return!d.call(this,b[0]);case 2:return!d.call(this,b[0],b[1]);case 3:return!d.call(this,b[0],b[1],b[2])}return!d.apply(this,b)}}function sA(d){return Lw(2,d)}var oA=wy(function(d,b){b=b.length==1&&Br(b[0])?ti(b[0],Er(dr())):ti(ze(b,1),Er(dr()));var A=b.length;return Vr(function(Y){for(var ye=-1,Be=Le(Y.length,A);++ye<Be;)Y[ye]=b[ye].call(this,Y[ye]);return ei(d,this,Y)})}),Ry=Vr(function(d,b){var A=js(b,wd(Ry));return Jc(d,G,n,b,A)}),kw=Vr(function(d,b){var A=js(b,wd(kw));return Jc(d,J,n,b,A)}),aA=Qc(function(d,b){return Jc(d,V,n,n,n,b)});function lA(d,b){if(typeof d!="function")throw new Li(o);return b=b===n?b:Hr(b),Vr(d,b)}function uA(d,b){if(typeof d!="function")throw new Li(o);return b=b==null?0:te(Hr(b),0),Vr(function(A){var Y=A[b],ye=xu(A,0,b);return Y&&vo(ye,Y),ei(d,this,ye)})}function cA(d,b,A){var Y=!0,ye=!0;if(typeof d!="function")throw new Li(o);return Ds(A)&&(Y="leading"in A?!!A.leading:Y,ye="trailing"in A?!!A.trailing:ye),Pw(d,b,{leading:Y,maxWait:b,trailing:ye})}function hA(d){return xw(d,1)}function fA(d,b){return Ry(_f(b),d)}function dA(){if(!arguments.length)return[];var d=arguments[0];return Br(d)?d:[d]}function pA(d){return h(d,m)}function gA(d,b){return b=typeof b=="function"?b:n,h(d,m,b)}function mA(d){return h(d,p|m)}function vA(d,b){return b=typeof b=="function"?b:n,h(d,p|m,b)}function yA(d,b){return b==null||_(d,b,Wo(b))}function Yu(d,b){return d===b||d!==d&&b!==b}var bA=Em(ut),_A=Em(function(d,b){return d>=b}),Lf=Oe(function(){return arguments}())?Oe:function(d){return Vs(d)&&Ir.call(d,"callee")&&!gi.call(d,"callee")},Br=Mt.isArray,wA=vu?Er(vu):Re;function xl(d){return d!=null&&Nm(d.length)&&!th(d)}function so(d){return Vs(d)&&xl(d)}function xA(d){return d===!0||d===!1||Vs(d)&&qe(d)==Ue}var Th=u||Yy,LA=Xo?Er(Xo):Fe;function CA(d){return Vs(d)&&d.nodeType===1&&!Ep(d)}function SA(d){if(d==null)return!0;if(xl(d)&&(Br(d)||typeof d=="string"||typeof d.splice=="function"||Th(d)||xd(d)||Lf(d)))return!d.length;var b=Sa(d);if(b==se||b==at)return!d.size;if(Cp(d))return!Jr(d).length;for(var A in d)if(Ir.call(d,A))return!1;return!0}function EA(d,b){return tt(d,b)}function PA(d,b,A){A=typeof A=="function"?A:n;var Y=A?A(d,b):n;return Y===n?tt(d,b,n,A):!!Y}function Fy(d){if(!Vs(d))return!1;var b=qe(d);return b==gt||b==rt||typeof d.message=="string"&&typeof d.name=="string"&&!Ep(d)}function kA(d){return typeof d=="number"&&v(d)}function th(d){if(!Ds(d))return!1;var b=qe(d);return b==_t||b==le||b==Ee||b==Xe}function Mw(d){return typeof d=="number"&&d==Hr(d)}function Nm(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=re}function Ds(d){var b=typeof d;return d!=null&&(b=="object"||b=="function")}function Vs(d){return d!=null&&typeof d=="object"}var Aw=Gl?Er(Gl):ft;function MA(d,b){return d===b||Ct(d,b,ky(b))}function AA(d,b,A){return A=typeof A=="function"?A:n,Ct(d,b,ky(b),A)}function TA(d){return Tw(d)&&d!=+d}function OA(d){if(gk(d))throw new $n(s);return St(d)}function DA(d){return d===null}function IA(d){return d==null}function Tw(d){return typeof d=="number"||Vs(d)&&qe(d)==ue}function Ep(d){if(!Vs(d)||qe(d)!=ke)return!1;var b=sa(d);if(b===null)return!0;var A=Ir.call(b,"constructor")&&b.constructor;return typeof A=="function"&&A instanceof A&&ia.call(A)==ui}var jy=ql?Er(ql):en;function NA(d){return Mw(d)&&d>=-9007199254740991&&d<=re}var Ow=Eo?Er(Eo):On;function Bm(d){return typeof d=="string"||!Br(d)&&Vs(d)&&qe(d)==pt}function Jl(d){return typeof d=="symbol"||Vs(d)&&qe(d)==jt}var xd=Yl?Er(Yl):Fn;function BA(d){return d===n}function RA(d){return Vs(d)&&Sa(d)==qt}function FA(d){return Vs(d)&&qe(d)==Jt}var jA=Em(Nr),zA=Em(function(d,b){return d<=b});function Dw(d){if(!d)return[];if(xl(d))return Bm(d)?Ps(d):wl(d);if(rr&&d[rr])return Qs(d[rr]());var b=Sa(d),A=b==se?bl:b==at?zs:Ld;return A(d)}function nh(d){if(!d)return d===0?d:0;if(d=Cu(d),d===q||d===-1/0){var b=d<0?-1:1;return b*xe}return d===d?d:0}function Hr(d){var b=nh(d),A=b%1;return b===b?A?b-A:b:0}function Iw(d){return d?Wn(Hr(d),0,_e):0}function Cu(d){if(typeof d=="number")return d;if(Jl(d))return be;if(Ds(d)){var b=typeof d.valueOf=="function"?d.valueOf():d;d=Ds(b)?b+"":b}if(typeof d!="string")return d===0?d:+d;d=yo(d);var A=kr.test(d);return A||lr.test(d)?Wl(d.slice(2),A?2:8):li.test(d)?be:+d}function Nw(d){return xc(d,Ll(d))}function UA(d){return d?Wn(Hr(d),-9007199254740991,re):d===0?d:0}function Mi(d){return d==null?"":Ca(d)}var $A=bd(function(d,b){if(Cp(b)||xl(b)){xc(b,Wo(b),d);return}for(var A in b)Ir.call(b,A)&&ht(d,A,b[A])}),Bw=bd(function(d,b){xc(b,Ll(b),d)}),Rm=bd(function(d,b,A,Y){xc(b,Ll(b),d,Y)}),VA=bd(function(d,b,A,Y){xc(b,Wo(b),d,Y)}),HA=Qc(xn);function WA(d,b){var A=ro(d);return b==null?A:ln(A,b)}var GA=Vr(function(d,b){d=ri(d);var A=-1,Y=b.length,ye=Y>2?b[2]:n;for(ye&&Ja(b[0],b[1],ye)&&(Y=1);++A<Y;)for(var Be=b[A],Ke=Ll(Be),dt=-1,Et=Ke.length;++dt<Et;){var rn=Ke[dt],on=d[rn];(on===n||Yu(on,na[rn])&&!Ir.call(d,rn))&&(d[rn]=Be[rn])}return d}),qA=Vr(function(d){return d.push(n,Q_),ei(Rw,n,d)});function YA(d,b){return xt(d,dr(b,3),Gt)}function ZA(d,b){return xt(d,dr(b,3),dn)}function KA(d,b){return d==null?d:mt(d,dr(b,3),Ll)}function XA(d,b){return d==null?d:At(d,dr(b,3),Ll)}function JA(d,b){return d&&Gt(d,dr(b,3))}function QA(d,b){return d&&dn(d,dr(b,3))}function e6(d){return d==null?[]:yn(d,Wo(d))}function t6(d){return d==null?[]:yn(d,Ll(d))}function zy(d,b,A){var Y=d==null?n:er(d,b);return Y===n?A:Y}function n6(d,b){return d!=null&&nw(d,b,It)}function Uy(d,b){return d!=null&&nw(d,b,bt)}var r6=Y_(function(d,b,A){b!=null&&typeof b.toString!="function"&&(b=ii.call(b)),d[b]=A},Vy(Cl)),i6=Y_(function(d,b,A){b!=null&&typeof b.toString!="function"&&(b=ii.call(b)),Ir.call(d,b)?d[b].push(A):d[b]=[A]},dr),s6=Vr(De);function Wo(d){return xl(d)?Ot(d):Jr(d)}function Ll(d){return xl(d)?Ot(d,!0):ci(d)}function o6(d,b){var A={};return b=dr(b,3),Gt(d,function(Y,ye,Be){En(A,b(Y,ye,Be),Y)}),A}function a6(d,b){var A={};return b=dr(b,3),Gt(d,function(Y,ye,Be){En(A,ye,b(Y,ye,Be))}),A}var l6=bd(function(d,b,A){aa(d,b,A)}),Rw=bd(function(d,b,A,Y){aa(d,b,A,Y)}),u6=Qc(function(d,b){var A={};if(d==null)return A;var Y=!1;b=ti(b,function(Be){return Be=qu(Be,d),Y||(Y=Be.length>1),Be}),xc(d,Ey(d),A),Y&&(A=h(A,p|y|m,rk));for(var ye=b.length;ye--;)Kc(A,b[ye]);return A});function c6(d,b){return Fw(d,Im(dr(b)))}var h6=Qc(function(d,b){return d==null?{}:la(d,b)});function Fw(d,b){if(d==null)return{};var A=ti(Ey(d),function(Y){return[Y]});return b=dr(b),Os(d,A,function(Y,ye){return b(Y,ye[0])})}function f6(d,b,A){b=qu(b,d);var Y=-1,ye=b.length;for(ye||(ye=1,d=n);++Y<ye;){var Be=d==null?n:d[Lc(b[Y])];Be===n&&(Y=ye,Be=A),d=th(Be)?Be.call(d):Be}return d}function d6(d,b,A){return d==null?d:Zc(d,b,A)}function p6(d,b,A,Y){return Y=typeof Y=="function"?Y:n,d==null?d:Zc(d,b,A,Y)}var jw=X_(Wo),zw=X_(Ll);function g6(d,b,A){var Y=Br(d),ye=Y||Th(d)||xd(d);if(b=dr(b,4),A==null){var Be=d&&d.constructor;ye?A=Y?new Be:[]:Ds(d)?A=th(Be)?ro(sa(d)):{}:A={}}return(ye?us:Gt)(d,function(Ke,dt,Et){return b(A,Ke,dt,Et)}),A}function m6(d,b){return d==null?!0:Kc(d,b)}function v6(d,b,A){return d==null?d:vd(d,b,_f(A))}function y6(d,b,A,Y){return Y=typeof Y=="function"?Y:n,d==null?d:vd(d,b,_f(A),Y)}function Ld(d){return d==null?[]:Cs(d,Wo(d))}function b6(d){return d==null?[]:Cs(d,Ll(d))}function _6(d,b,A){return A===n&&(A=b,b=n),A!==n&&(A=Cu(A),A=A===A?A:0),b!==n&&(b=Cu(b),b=b===b?b:0),Wn(Cu(d),b,A)}function w6(d,b,A){return b=nh(b),A===n?(A=b,b=0):A=nh(A),d=Cu(d),Tt(d,b,A)}function x6(d,b,A){if(A&&typeof A!="boolean"&&Ja(d,b,A)&&(b=A=n),A===n&&(typeof b=="boolean"?(A=b,b=n):typeof d=="boolean"&&(A=d,d=n)),d===n&&b===n?(d=0,b=1):(d=nh(d),b===n?(b=d,d=0):b=nh(b)),d>b){var Y=d;d=b,b=Y}if(A||d%1||b%1){var ye=Rt();return Le(d+ye*(b-d+pl("1e-"+((ye+"").length-1))),b)}return yf(d,b)}var L6=_d(function(d,b,A){return b=b.toLowerCase(),d+(A?Uw(b):b)});function Uw(d){return $y(Mi(d).toLowerCase())}function $w(d){return d=Mi(d),d&&d.replace(Gi,zu).replace(Fu,"")}function C6(d,b,A){d=Mi(d),b=Ca(b);var Y=d.length;A=A===n?Y:Wn(Hr(A),0,Y);var ye=A;return A-=b.length,A>=0&&d.slice(A,ye)==b}function S6(d){return d=Mi(d),d&&zn.test(d)?d.replace(Jn,Ya):d}function E6(d){return d=Mi(d),d&&nr.test(d)?d.replace(In,"\\$&"):d}var P6=_d(function(d,b,A){return d+(A?"-":"")+b.toLowerCase()}),k6=_d(function(d,b,A){return d+(A?" ":"")+b.toLowerCase()}),M6=W_("toLowerCase");function A6(d,b,A){d=Mi(d),b=Hr(b);var Y=b?Es(d):0;if(!b||Y>=b)return d;var ye=(b-Y)/2;return Sm(ds(ye),A)+d+Sm(fs(ye),A)}function T6(d,b,A){d=Mi(d),b=Hr(b);var Y=b?Es(d):0;return b&&Y<b?d+Sm(b-Y,A):d}function O6(d,b,A){d=Mi(d),b=Hr(b);var Y=b?Es(d):0;return b&&Y<b?Sm(b-Y,A)+d:d}function D6(d,b,A){return A||b==null?b=0:b&&(b=+b),Pt(Mi(d).replace(Nn,""),b||0)}function I6(d,b,A){return(A?Ja(d,b,A):b===n)?b=1:b=Hr(b),gd(Mi(d),b)}function N6(){var d=arguments,b=Mi(d[0]);return d.length<3?b:b.replace(d[1],d[2])}var B6=_d(function(d,b,A){return d+(A?"_":"")+b.toLowerCase()});function R6(d,b,A){return A&&typeof A!="number"&&Ja(d,b,A)&&(b=A=n),A=A===n?_e:A>>>0,A?(d=Mi(d),d&&(typeof b=="string"||b!=null&&!jy(b))&&(b=Ca(b),!b&&Qo(d))?xu(Ps(d),0,A):d.split(b,A)):[]}var F6=_d(function(d,b,A){return d+(A?" ":"")+$y(b)});function j6(d,b,A){return d=Mi(d),A=A==null?0:Wn(Hr(A),0,d.length),b=Ca(b),d.slice(A,A+b.length)==b}function z6(d,b,A){var Y=Ae.templateSettings;A&&Ja(d,b,A)&&(b=n),d=Mi(d),b=Rm({},b,Y,J_);var ye=Rm({},b.imports,Y.imports,J_),Be=Wo(ye),Ke=Cs(ye,Be),dt,Et,rn=0,on=b.interpolate||ws,fn="__p += '",Dn=Kl((b.escape||ws).source+"|"+on.source+"|"+(on===ki?Wr:ws).source+"|"+(b.evaluate||ws).source+"|$","g"),Xn="//# sourceURL="+(Ir.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vl+"]")+`
`;d.replace(Dn,function(vr,si,hi,Ql,Qa,eu){return hi||(hi=Ql),fn+=d.slice(rn,eu).replace(zl,Za),si&&(dt=!0,fn+=`' +
__e(`+si+`) +
'`),Qa&&(Et=!0,fn+=`';
`+Qa+`;
__p += '`),hi&&(fn+=`' +
((__t = (`+hi+`)) == null ? '' : __t) +
'`),rn=eu+vr.length,vr}),fn+=`';
`;var mr=Ir.call(b,"variable")&&b.variable;if(!mr)fn=`with (obj) {
`+fn+`
}
`;else if(Qn.test(mr))throw new $n(a);fn=(Et?fn.replace(vn,""):fn).replace(tn,"$1").replace(hn,"$1;"),fn="function("+(mr||"obj")+`) {
`+(mr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(dt?", __e = _.escape":"")+(Et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+fn+`return __p
}`;var Yr=Hw(function(){return cr(Be,Xn+"return "+fn).apply(n,Ke)});if(Yr.source=fn,Fy(Yr))throw Yr;return Yr}function U6(d){return Mi(d).toLowerCase()}function $6(d){return Mi(d).toUpperCase()}function V6(d,b,A){if(d=Mi(d),d&&(A||b===n))return yo(d);if(!d||!(b=Ca(b)))return d;var Y=Ps(d),ye=Ps(b),Be=Fs(Y,ye),Ke=yu(Y,ye)+1;return xu(Y,Be,Ke).join("")}function H6(d,b,A){if(d=Mi(d),d&&(A||b===n))return d.slice(0,ya(d)+1);if(!d||!(b=Ca(b)))return d;var Y=Ps(d),ye=yu(Y,Ps(b))+1;return xu(Y,0,ye).join("")}function W6(d,b,A){if(d=Mi(d),d&&(A||b===n))return d.replace(Nn,"");if(!d||!(b=Ca(b)))return d;var Y=Ps(d),ye=Fs(Y,Ps(b));return xu(Y,ye).join("")}function G6(d,b){var A=pe,Y=$;if(Ds(b)){var ye="separator"in b?b.separator:ye;A="length"in b?Hr(b.length):A,Y="omission"in b?Ca(b.omission):Y}d=Mi(d);var Be=d.length;if(Qo(d)){var Ke=Ps(d);Be=Ke.length}if(A>=Be)return d;var dt=A-Es(Y);if(dt<1)return Y;var Et=Ke?xu(Ke,0,dt).join(""):d.slice(0,dt);if(ye===n)return Et+Y;if(Ke&&(dt+=Et.length-dt),jy(ye)){if(d.slice(dt).search(ye)){var rn,on=Et;for(ye.global||(ye=Kl(ye.source,Mi(Un.exec(ye))+"g")),ye.lastIndex=0;rn=ye.exec(on);)var fn=rn.index;Et=Et.slice(0,fn===n?dt:fn)}}else if(d.indexOf(Ca(ye),dt)!=dt){var Dn=Et.lastIndexOf(ye);Dn>-1&&(Et=Et.slice(0,Dn))}return Et+Y}function q6(d){return d=Mi(d),d&&ar.test(d)?d.replace(Bn,ba):d}var Y6=_d(function(d,b,A){return d+(A?" ":"")+b.toUpperCase()}),$y=W_("toUpperCase");function Vw(d,b,A){return d=Mi(d),b=A?n:b,b===n?bo(d)?ea(d):ot(d):d.match(b)||[]}var Hw=Vr(function(d,b){try{return ei(d,n,b)}catch(A){return Fy(A)?A:new $n(A)}}),Z6=Qc(function(d,b){return us(b,function(A){A=Lc(A),En(d,A,By(d[A],d))}),d});function K6(d){var b=d==null?0:d.length,A=dr();return d=b?ti(d,function(Y){if(typeof Y[1]!="function")throw new Li(o);return[A(Y[0]),Y[1]]}):[],Vr(function(Y){for(var ye=-1;++ye<b;){var Be=d[ye];if(ei(Be[0],this,Y))return ei(Be[1],this,Y)}})}function X6(d){return g(h(d,p))}function Vy(d){return function(){return d}}function J6(d,b){return d==null||d!==d?b:d}var Q6=q_(),eT=q_(!0);function Cl(d){return d}function Hy(d){return Gn(typeof d=="function"?d:h(d,p))}function tT(d){return io(h(d,p))}function nT(d,b){return Vu(d,h(b,p))}var rT=Vr(function(d,b){return function(A){return De(A,d,b)}}),iT=Vr(function(d,b){return function(A){return De(d,A,b)}});function Wy(d,b,A){var Y=Wo(b),ye=yn(b,Y);A==null&&!(Ds(b)&&(ye.length||!Y.length))&&(A=b,b=d,d=this,ye=yn(b,Wo(b)));var Be=!(Ds(A)&&"chain"in A)||!!A.chain,Ke=th(d);return us(ye,function(dt){var Et=b[dt];d[dt]=Et,Ke&&(d.prototype[dt]=function(){var rn=this.__chain__;if(Be||rn){var on=d(this.__wrapped__),fn=on.__actions__=wl(this.__actions__);return fn.push({func:Et,args:arguments,thisArg:d}),on.__chain__=rn,on}return Et.apply(d,vo([this.value()],arguments))})}),d}function sT(){return Ri._===this&&(Ri._=Ui),this}function Gy(){}function oT(d){return d=Hr(d),Vr(function(b){return Xa(b,d)})}var aT=Ly(ti),lT=Ly(Zl),uT=Ly(I);function Ww(d){return Ay(d)?or(Lc(d)):$i(d)}function cT(d){return function(b){return d==null?n:er(d,b)}}var hT=Z_(),fT=Z_(!0);function qy(){return[]}function Yy(){return!1}function dT(){return{}}function pT(){return""}function gT(){return!0}function mT(d,b){if(d=Hr(d),d<1||d>re)return[];var A=_e,Y=Le(d,_e);b=dr(b),d-=_e;for(var ye=zi(Y,b);++A<d;)b(A);return ye}function vT(d){return Br(d)?ti(d,Lc):Jl(d)?[d]:wl(hw(Mi(d)))}function yT(d){var b=++Uo;return Mi(d)+b}var bT=Cm(function(d,b){return d+b},0),_T=Cy("ceil"),wT=Cm(function(d,b){return d/b},1),xT=Cy("floor");function LT(d){return d&&d.length?he(d,Cl,ut):n}function CT(d,b){return d&&d.length?he(d,dr(b,2),ut):n}function ST(d){return Yn(d,Cl)}function ET(d,b){return Yn(d,dr(b,2))}function PT(d){return d&&d.length?he(d,Cl,Nr):n}function kT(d,b){return d&&d.length?he(d,dr(b,2),Nr):n}var MT=Cm(function(d,b){return d*b},1),AT=Cy("round"),TT=Cm(function(d,b){return d-b},0);function OT(d){return d&&d.length?ni(d,Cl):0}function DT(d,b){return d&&d.length?ni(d,dr(b,2)):0}return Ae.after=tA,Ae.ary=xw,Ae.assign=$A,Ae.assignIn=Bw,Ae.assignInWith=Rm,Ae.assignWith=VA,Ae.at=HA,Ae.before=Lw,Ae.bind=By,Ae.bindAll=Z6,Ae.bindKey=Cw,Ae.castArray=dA,Ae.chain=bw,Ae.chunk=xk,Ae.compact=Lk,Ae.concat=Ck,Ae.cond=K6,Ae.conforms=X6,Ae.constant=Vy,Ae.countBy=OM,Ae.create=WA,Ae.curry=Sw,Ae.curryRight=Ew,Ae.debounce=Pw,Ae.defaults=GA,Ae.defaultsDeep=qA,Ae.defer=nA,Ae.delay=rA,Ae.difference=Sk,Ae.differenceBy=Ek,Ae.differenceWith=Pk,Ae.drop=kk,Ae.dropRight=Mk,Ae.dropRightWhile=Ak,Ae.dropWhile=Tk,Ae.fill=Ok,Ae.filter=IM,Ae.flatMap=RM,Ae.flatMapDeep=FM,Ae.flatMapDepth=jM,Ae.flatten=gw,Ae.flattenDeep=Dk,Ae.flattenDepth=Ik,Ae.flip=iA,Ae.flow=Q6,Ae.flowRight=eT,Ae.fromPairs=Nk,Ae.functions=e6,Ae.functionsIn=t6,Ae.groupBy=zM,Ae.initial=Rk,Ae.intersection=Fk,Ae.intersectionBy=jk,Ae.intersectionWith=zk,Ae.invert=r6,Ae.invertBy=i6,Ae.invokeMap=$M,Ae.iteratee=Hy,Ae.keyBy=VM,Ae.keys=Wo,Ae.keysIn=Ll,Ae.map=Tm,Ae.mapKeys=o6,Ae.mapValues=a6,Ae.matches=tT,Ae.matchesProperty=nT,Ae.memoize=Dm,Ae.merge=l6,Ae.mergeWith=Rw,Ae.method=rT,Ae.methodOf=iT,Ae.mixin=Wy,Ae.negate=Im,Ae.nthArg=oT,Ae.omit=u6,Ae.omitBy=c6,Ae.once=sA,Ae.orderBy=HM,Ae.over=aT,Ae.overArgs=oA,Ae.overEvery=lT,Ae.overSome=uT,Ae.partial=Ry,Ae.partialRight=kw,Ae.partition=WM,Ae.pick=h6,Ae.pickBy=Fw,Ae.property=Ww,Ae.propertyOf=cT,Ae.pull=Hk,Ae.pullAll=vw,Ae.pullAllBy=Wk,Ae.pullAllWith=Gk,Ae.pullAt=qk,Ae.range=hT,Ae.rangeRight=fT,Ae.rearg=aA,Ae.reject=YM,Ae.remove=Yk,Ae.rest=lA,Ae.reverse=Iy,Ae.sampleSize=KM,Ae.set=d6,Ae.setWith=p6,Ae.shuffle=XM,Ae.slice=Zk,Ae.sortBy=eA,Ae.sortedUniq=nM,Ae.sortedUniqBy=rM,Ae.split=R6,Ae.spread=uA,Ae.tail=iM,Ae.take=sM,Ae.takeRight=oM,Ae.takeRightWhile=aM,Ae.takeWhile=lM,Ae.tap=LM,Ae.throttle=cA,Ae.thru=Am,Ae.toArray=Dw,Ae.toPairs=jw,Ae.toPairsIn=zw,Ae.toPath=vT,Ae.toPlainObject=Nw,Ae.transform=g6,Ae.unary=hA,Ae.union=uM,Ae.unionBy=cM,Ae.unionWith=hM,Ae.uniq=fM,Ae.uniqBy=dM,Ae.uniqWith=pM,Ae.unset=m6,Ae.unzip=Ny,Ae.unzipWith=yw,Ae.update=v6,Ae.updateWith=y6,Ae.values=Ld,Ae.valuesIn=b6,Ae.without=gM,Ae.words=Vw,Ae.wrap=fA,Ae.xor=mM,Ae.xorBy=vM,Ae.xorWith=yM,Ae.zip=bM,Ae.zipObject=_M,Ae.zipObjectDeep=wM,Ae.zipWith=xM,Ae.entries=jw,Ae.entriesIn=zw,Ae.extend=Bw,Ae.extendWith=Rm,Wy(Ae,Ae),Ae.add=bT,Ae.attempt=Hw,Ae.camelCase=L6,Ae.capitalize=Uw,Ae.ceil=_T,Ae.clamp=_6,Ae.clone=pA,Ae.cloneDeep=mA,Ae.cloneDeepWith=vA,Ae.cloneWith=gA,Ae.conformsTo=yA,Ae.deburr=$w,Ae.defaultTo=J6,Ae.divide=wT,Ae.endsWith=C6,Ae.eq=Yu,Ae.escape=S6,Ae.escapeRegExp=E6,Ae.every=DM,Ae.find=NM,Ae.findIndex=dw,Ae.findKey=YA,Ae.findLast=BM,Ae.findLastIndex=pw,Ae.findLastKey=ZA,Ae.floor=xT,Ae.forEach=_w,Ae.forEachRight=ww,Ae.forIn=KA,Ae.forInRight=XA,Ae.forOwn=JA,Ae.forOwnRight=QA,Ae.get=zy,Ae.gt=bA,Ae.gte=_A,Ae.has=n6,Ae.hasIn=Uy,Ae.head=mw,Ae.identity=Cl,Ae.includes=UM,Ae.indexOf=Bk,Ae.inRange=w6,Ae.invoke=s6,Ae.isArguments=Lf,Ae.isArray=Br,Ae.isArrayBuffer=wA,Ae.isArrayLike=xl,Ae.isArrayLikeObject=so,Ae.isBoolean=xA,Ae.isBuffer=Th,Ae.isDate=LA,Ae.isElement=CA,Ae.isEmpty=SA,Ae.isEqual=EA,Ae.isEqualWith=PA,Ae.isError=Fy,Ae.isFinite=kA,Ae.isFunction=th,Ae.isInteger=Mw,Ae.isLength=Nm,Ae.isMap=Aw,Ae.isMatch=MA,Ae.isMatchWith=AA,Ae.isNaN=TA,Ae.isNative=OA,Ae.isNil=IA,Ae.isNull=DA,Ae.isNumber=Tw,Ae.isObject=Ds,Ae.isObjectLike=Vs,Ae.isPlainObject=Ep,Ae.isRegExp=jy,Ae.isSafeInteger=NA,Ae.isSet=Ow,Ae.isString=Bm,Ae.isSymbol=Jl,Ae.isTypedArray=xd,Ae.isUndefined=BA,Ae.isWeakMap=RA,Ae.isWeakSet=FA,Ae.join=Uk,Ae.kebabCase=P6,Ae.last=Lu,Ae.lastIndexOf=$k,Ae.lowerCase=k6,Ae.lowerFirst=M6,Ae.lt=jA,Ae.lte=zA,Ae.max=LT,Ae.maxBy=CT,Ae.mean=ST,Ae.meanBy=ET,Ae.min=PT,Ae.minBy=kT,Ae.stubArray=qy,Ae.stubFalse=Yy,Ae.stubObject=dT,Ae.stubString=pT,Ae.stubTrue=gT,Ae.multiply=MT,Ae.nth=Vk,Ae.noConflict=sT,Ae.noop=Gy,Ae.now=Om,Ae.pad=A6,Ae.padEnd=T6,Ae.padStart=O6,Ae.parseInt=D6,Ae.random=x6,Ae.reduce=GM,Ae.reduceRight=qM,Ae.repeat=I6,Ae.replace=N6,Ae.result=f6,Ae.round=AT,Ae.runInContext=yt,Ae.sample=ZM,Ae.size=JM,Ae.snakeCase=B6,Ae.some=QM,Ae.sortedIndex=Kk,Ae.sortedIndexBy=Xk,Ae.sortedIndexOf=Jk,Ae.sortedLastIndex=Qk,Ae.sortedLastIndexBy=eM,Ae.sortedLastIndexOf=tM,Ae.startCase=F6,Ae.startsWith=j6,Ae.subtract=TT,Ae.sum=OT,Ae.sumBy=DT,Ae.template=z6,Ae.times=mT,Ae.toFinite=nh,Ae.toInteger=Hr,Ae.toLength=Iw,Ae.toLower=U6,Ae.toNumber=Cu,Ae.toSafeInteger=UA,Ae.toString=Mi,Ae.toUpper=$6,Ae.trim=V6,Ae.trimEnd=H6,Ae.trimStart=W6,Ae.truncate=G6,Ae.unescape=q6,Ae.uniqueId=yT,Ae.upperCase=Y6,Ae.upperFirst=$y,Ae.each=_w,Ae.eachRight=ww,Ae.first=mw,Wy(Ae,function(){var d={};return Gt(Ae,function(b,A){Ir.call(Ae.prototype,A)||(d[A]=b)}),d}(),{chain:!1}),Ae.VERSION=r,us(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Ae[d].placeholder=Ae}),us(["drop","take"],function(d,b){Pr.prototype[d]=function(A){A=A===n?1:te(Hr(A),0);var Y=this.__filtered__&&!b?new Pr(this):this.clone();return Y.__filtered__?Y.__takeCount__=Le(A,Y.__takeCount__):Y.__views__.push({size:Le(A,_e),type:d+(Y.__dir__<0?"Right":"")}),Y},Pr.prototype[d+"Right"]=function(A){return this.reverse()[d](A).reverse()}}),us(["filter","map","takeWhile"],function(d,b){var A=b+1,Y=A==ie||A==j;Pr.prototype[d]=function(ye){var Be=this.clone();return Be.__iteratees__.push({iteratee:dr(ye,3),type:A}),Be.__filtered__=Be.__filtered__||Y,Be}}),us(["head","last"],function(d,b){var A="take"+(b?"Right":"");Pr.prototype[d]=function(){return this[A](1).value()[0]}}),us(["initial","tail"],function(d,b){var A="drop"+(b?"":"Right");Pr.prototype[d]=function(){return this.__filtered__?new Pr(this):this[A](1)}}),Pr.prototype.compact=function(){return this.filter(Cl)},Pr.prototype.find=function(d){return this.filter(d).head()},Pr.prototype.findLast=function(d){return this.reverse().find(d)},Pr.prototype.invokeMap=Vr(function(d,b){return typeof d=="function"?new Pr(this):this.map(function(A){return De(A,d,b)})}),Pr.prototype.reject=function(d){return this.filter(Im(dr(d)))},Pr.prototype.slice=function(d,b){d=Hr(d);var A=this;return A.__filtered__&&(d>0||b<0)?new Pr(A):(d<0?A=A.takeRight(-d):d&&(A=A.drop(d)),b!==n&&(b=Hr(b),A=b<0?A.dropRight(-b):A.take(b-d)),A)},Pr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Pr.prototype.toArray=function(){return this.take(_e)},Gt(Pr.prototype,function(d,b){var A=/^(?:filter|find|map|reject)|While$/.test(b),Y=/^(?:head|last)$/.test(b),ye=Ae[Y?"take"+(b=="last"?"Right":""):b],Be=Y||/^find/.test(b);ye&&(Ae.prototype[b]=function(){var Ke=this.__wrapped__,dt=Y?[1]:arguments,Et=Ke instanceof Pr,rn=dt[0],on=Et||Br(Ke),fn=function(si){var hi=ye.apply(Ae,vo([si],dt));return Y&&Dn?hi[0]:hi};on&&A&&typeof rn=="function"&&rn.length!=1&&(Et=on=!1);var Dn=this.__chain__,Xn=!!this.__actions__.length,mr=Be&&!Dn,Yr=Et&&!Xn;if(!Be&&on){Ke=Yr?Ke:new Pr(this);var vr=d.apply(Ke,dt);return vr.__actions__.push({func:Am,args:[fn],thisArg:n}),new gs(vr,Dn)}return mr&&Yr?d.apply(this,dt):(vr=this.thru(fn),mr?Y?vr.value()[0]:vr.value():vr)})}),us(["pop","push","shift","sort","splice","unshift"],function(d){var b=ta[d],A=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",Y=/^(?:pop|shift)$/.test(d);Ae.prototype[d]=function(){var ye=arguments;if(Y&&!this.__chain__){var Be=this.value();return b.apply(Br(Be)?Be:[],ye)}return this[A](function(Ke){return b.apply(Br(Ke)?Ke:[],ye)})}}),Gt(Pr.prototype,function(d,b){var A=Ae[b];if(A){var Y=A.name+"";Ir.call(no,Y)||(no[Y]=[]),no[Y].push({name:b,func:A})}}),no[Lm(n,O).name]=[{name:"wrapper",func:n}],Pr.prototype.clone=Sh,Pr.prototype.reverse=ld,Pr.prototype.value=Eh,Ae.prototype.at=CM,Ae.prototype.chain=SM,Ae.prototype.commit=EM,Ae.prototype.next=PM,Ae.prototype.plant=MM,Ae.prototype.reverse=AM,Ae.prototype.toJSON=Ae.prototype.valueOf=Ae.prototype.value=TM,Ae.prototype.first=Ae.prototype.head,rr&&(Ae.prototype[rr]=kM),Ae},Ms=_o();Fi?((Fi.exports=Ms)._=Ms,Kn._=Ms):Ri._=Ms}).call(Zo)})(vv,vv.exports);var Y$=vv.exports;const Z$={class:"h-full flex"},K$={class:"flex-1 relative"},X$={key:0,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},J$={class:"text-center max-w-lg mx-auto p-8"},Q$={class:"space-y-4"},eV={class:"map-parent"},tV={class:"map-content flex flex-col h-full"},nV={class:"flex-1 flex flex-col md:flex-row relative"},rV={class:"flex-1 relative"},iV={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},sV={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},oV={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},aV={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},lV={key:0,class:"space-y-4"},uV={key:0,class:"space-y-2"},cV={class:"grid grid-cols-1 gap-2"},hV=["onClick"],fV={class:"font-medium text-gray-900"},dV={key:1,class:"space-y-2"},pV={class:"flex items-center mb-4"},gV={class:"text-sm text-gray-600"},mV={class:"grid grid-cols-1 gap-2"},vV=["onClick"],yV={class:"font-medium text-gray-900"},bV={key:2,class:"space-y-2"},_V={class:"flex items-center mb-4"},wV={class:"text-sm text-gray-600"},xV={class:"grid grid-cols-1 gap-2"},LV={key:0,class:"text-center py-4"},CV=["onClick"],SV={class:"font-medium text-gray-900"},EV={key:3,class:"space-y-2"},PV={class:"flex items-center mb-4"},kV={class:"text-sm text-gray-600"},MV={class:"grid grid-cols-1 gap-2"},AV=["onClick"],TV={class:"font-medium text-gray-900"},OV={class:"text-sm text-gray-500"},DV={class:"text-xs text-gray-400 mt-1"},IV=["onClick"],NV={key:1,class:"space-y-4"},BV={key:0,class:"space-y-2"},RV={class:"grid grid-cols-1 gap-2"},FV={key:0,class:"text-center py-8"},jV=["onClick"],zV={class:"font-medium text-gray-900"},UV={key:1,class:"space-y-2"},$V={class:"flex items-center mb-4"},VV={class:"text-sm text-gray-600"},HV={class:"grid grid-cols-1 gap-2"},WV=["onClick"],GV={class:"font-medium text-gray-900"},qV={class:"text-sm text-gray-500"},YV={class:"text-xs text-gray-400 mt-1"},ZV=["onClick"],KV={key:2,class:"space-y-4"},XV={key:0,class:"space-y-2"},JV={class:"grid grid-cols-1 gap-2"},QV=["onClick"],eH={class:"font-medium text-gray-900"},tH={key:1,class:"space-y-2"},nH={class:"flex items-center mb-4"},rH={class:"text-sm text-gray-600"},iH={class:"grid grid-cols-1 gap-2"},sH={key:0,class:"text-center py-4"},oH=["onClick"],aH={class:"font-medium text-gray-900"},lH={key:2,class:"space-y-2"},uH={class:"flex items-center mb-4"},cH={class:"text-sm text-gray-600"},hH={class:"grid grid-cols-1 gap-2"},fH=["onClick"],dH={class:"font-medium text-gray-900"},pH={class:"text-sm text-gray-500"},gH={class:"text-xs text-gray-400 mt-1"},mH=["onClick"],vH={key:3,class:"space-y-4"},yH={key:0,class:"text-center py-8"},bH={key:1,class:"space-y-2"},_H=["onClick"],wH={class:"font-medium text-gray-900"},xH={class:"text-sm text-gray-500"},LH={class:"text-xs text-gray-400 mt-1"},CH=["onClick"],SH={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},EH={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},PH={class:"text-center mb-4"},kH={class:"mt-2 text-gray-600"},J4=_s({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=nB(),r=kt(null),i=kt(!1),s=Qb(),o=qg(),a=yh(),l=ll(),c=kt([]),f=kt({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:y,map:m,initMap:C,setDrawingTool:S,updateShapeStyle:T,updateShapeProperties:O,featureGroup:D,adjustView:N,clearActiveControlPoints:U,isDrawing:G}=LU(),{initMap:J,changeBaseMap:ee}=PU(),V=kt(!1),K=kt(!1),pe=kt(!1),$=kt(!1),H=kt(null),oe=kt(null),ie=kt(null),R=kt(!1),j=kt(null),q=po(),re=kt([]),xe=kt([]),be=kt([]),_e=kt(null),Z=kt(null),ae=kt(null),ce=kt(!1),de=kt(!1),ge=kt(!1),Ee=kt(null),Ue=tr(()=>q.isSalarie||_e.value?xe.value:[]),Ne=tr(()=>{if(!y.value)return null;const Ft=y.value.properties||{};let Je="unknown";Ft.type?Je=Ft.type:y.value instanceof Tl||y.value instanceof pn.Polygon?Je="Polygon":(y.value instanceof vs||y.value instanceof pn.Polyline&&!(y.value instanceof pn.Polygon))&&(Je="Line"),Ft.type||(y.value.properties||(y.value.properties={}),y.value.properties.type=Je);let Lt;if(Ft.style&&Ft.style.name)Lt=Ft.style.name;else if(Ft.name)Lt=Ft.name;else if(y.value.name)Lt=y.value.name;else{const Nn=Object.getOwnPropertyDescriptor(y.value,"name");Nn&&Nn.value&&(Lt=Nn.value);const Zt=["_name","displayName","title"];for(const Ze of Zt)if(y.value[Ze]){Lt=y.value[Ze];break}}Lt&&(y.value.properties||(y.value.properties={}),y.value.properties.name=Lt,y.value.properties.style||(y.value.properties.style={}),y.value.properties.style.name=Lt,y.value.name=Lt,typeof y.value.setName=="function"&&y.value.setName(Lt)),y.value.properties.category||(y.value.properties.category="forages"),y.value.properties.accessLevel||(y.value.properties.accessLevel="visitor");const In={...Ft,type:Je,name:Lt||y.value.name||Ft.name||void 0,category:y.value.properties.category||"forages",accessLevel:y.value.properties.accessLevel||"visitor"};return{type:Je,properties:In,layer:y.value,options:y.value.options||{}}});function rt(Ft){const Je=Ft.getCenter(),Lt=Ft.getZoom(),In={lat:Je.lat,lng:Je.lng,zoom:Lt};document.cookie=`mapState=${JSON.stringify(In)};max-age=2592000;path=/`}function gt(){const Je=document.cookie.split(";").find(Lt=>Lt.trim().startsWith("mapState="));if(Je)try{return JSON.parse(Je.split("=")[1])}catch(Lt){return console.error("Erreur lors de la lecture du cookie de position:",Lt),null}return null}Ks(async()=>{var Ft,Je;window.addEventListener("resize",ki);try{if(await s.fetchPlans(),(q.isAdmin||q.isEntreprise)&&await st(),q.isEntreprise){ce.value=!0;try{const un=await Ln.get("/users/",{params:{role:"SALARIE",entreprise:(Ft=q.user)==null?void 0:Ft.id}});re.value=un.data}catch(un){console.error("Error loading salaries:",un),re.value=[]}finally{ce.value=!1}}if(q.isSalarie){de.value=!0;try{const un=await q.fetchSalarieVisiteurs(((Je=q.user)==null?void 0:Je.id)||0);xe.value=Array.isArray(un)?un:[un]}catch(un){console.error("Error loading clients:",un)}finally{de.value=!1}}const Lt=gt(),In=Lt?[Lt.lat,Lt.lng]:[46.603354,1.888334],nr=(Lt==null?void 0:Lt.zoom)??6;if(r.value&&!m.value){const un=C(r.value,In,nr);un.pm.setLang("fr"),un.pm.addControls({rotateMode:!1}),J(un),un.on("moveend",()=>{rt(un)}),window.addEventListener("map-set-location",sn=>{if(un&&sn.detail){const{lat:An,lng:Qn,zoom:ir}=sn.detail;un.flyTo([An,Qn],ir,{duration:1.5,easeLinearity:.25})}}),D.value&&(D.value.on("layeradd",sn=>{const An=sn.layer;An&&An._leaflet_id&&c.value.findIndex(ir=>ir.layer&&ir.layer._leaflet_id===An._leaflet_id)===-1&&c.value.push({layer:An,id:An._dbId||An._leaflet_id})}),D.value.on("layerremove",sn=>{const An=sn.layer;if(An&&An._leaflet_id&&!An._dbId&&(!An.properties||An.properties&&!An.properties.type)){const ir=c.value.findIndex(Wr=>Wr.layer&&Wr.layer._leaflet_id===An._leaflet_id);ir!==-1&&c.value.splice(ir,1)}}))}if(f.value.planId)try{await ke(f.value.planId);const un=document.querySelector(".map-parent");un instanceof HTMLElement&&(un.style.display="block"),f.value.lat&&f.value.lng&&m.value&&m.value.flyTo([f.value.lat,f.value.lng],30),f.value.noteId&&D.value&&setTimeout(()=>{var An;const sn=((An=D.value)==null?void 0:An.getLayers())||[];for(const Qn of sn)if(Qn._dbId===f.value.noteId||Qn.id===f.value.noteId){if(typeof Qn.fire=="function"&&Qn.fire("click"),typeof Qn.bringToFront=="function"&&Qn.bringToFront(),m.value){const ir=typeof Qn.getLatLng=="function"?Qn.getLatLng():[f.value.lat,f.value.lng];m.value.flyTo(ir,18)}break}},1e3),f.value.tool&&S(f.value.tool)}catch(un){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",un),await Nn()}else await Nn();async function Nn(){const un=localStorage.getItem("lastPlanId");if(un)try{await ke(parseInt(un));const sn=document.querySelector(".map-parent");sn instanceof HTMLElement&&(sn.style.display="block")}catch(sn){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",sn),H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue(),localStorage.removeItem("lastPlanId")}else H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue()}window.addEventListener("shape:created",un=>{const{shape:sn,type:An,properties:Qn}=un.detail;o.addElement(sn),S("")}),window.addEventListener("geonote:savePlan",()=>{Ve()}),window.addEventListener("geonote:select",un=>{if(un.detail&&un.detail.geoNote){const sn=un.detail.geoNote;y.value=sn,al(()=>{})}}),window.addEventListener("categoriesReactivated",un=>{Bn()}),window.addEventListener("shapeTypesReactivated",un=>{Bn()});const Zt=un=>{if(!un||!un.note){console.error("[MapView] Erreur: e.note est undefined ou null",un);return}const sn=un.note;oe.value={id:sn.id,title:sn.title||sn.name,description:sn.description,location:sn.location,columnId:sn.columnId||a.getDefaultColumn.id,accessLevel:sn.accessLevel,style:sn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:sn.createdAt||new Date().toISOString(),updatedAt:sn.updatedAt||new Date().toISOString(),comments:sn.comments||[],photos:sn.photos||[]},pe.value=!0},Ze=un=>{if(!un.detail||!un.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",un);return}const sn=un.detail.note;let Qn=un.detail.backendId||sn.backendId;if(!Qn){const ir=c.value.find(Wr=>Wr.layer===un.detail.source);Qn=ir?ir.id:sn.id}oe.value={id:Qn,leafletId:sn.id,title:sn.title||sn.name,description:sn.description,location:sn.location,columnId:sn.columnId||a.getDefaultColumn.id,accessLevel:sn.accessLevel,style:sn.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:sn.createdAt||new Date().toISOString(),updatedAt:sn.updatedAt||new Date().toISOString(),comments:sn.comments||[],photos:sn.photos||[]},pe.value=!0};window.addEventListener("geonote:edit",Ze),D.value&&(D.value.off("note:edit"),D.value.on("note:edit",Zt))}catch(Lt){console.error("Error during component mount:",Lt),H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue(),localStorage.removeItem("lastPlanId")}}),yi(()=>o.hasUnsavedChanges,Ft=>{Ft&&H.value&&(s.markUnsavedChanges(),Ve())});let _t;Ks(()=>{_t=setInterval(()=>{o.hasUnsavedChanges&&H.value&&Ve()},6e4)}),Au(()=>{clearInterval(_t)}),yi(()=>s.plans,Ft=>{K.value&&ae.value},{deep:!0}),yi(()=>o.filters,(Ft,Je)=>{if(Je){const Lt=JSON.stringify(Je.accessLevels)!==JSON.stringify(Ft.accessLevels),In=JSON.stringify(Je.categories)!==JSON.stringify(Ft.categories),nr=JSON.stringify(Je.shapeTypes)!==JSON.stringify(Ft.shapeTypes);(Lt||In||nr)&&Bn()}else Bn()},{deep:!0});const le=Ft=>{Bn()};Ks(()=>{window.addEventListener("filtersChanged",le)}),Au(()=>{window.removeEventListener("filtersChanged",le)}),yi(()=>o.getFilteredElements,(Ft,Je)=>{Bn()},{deep:!0}),yi(m,async Ft=>{var Je;Ft&&s.currentPlan&&!((Je=D.value)!=null&&Je.getLayers().length)&&(ue(),await o.loadPlanElements(s.currentPlan.id))}),yi(()=>s.currentPlan,async(Ft,Je)=>{if((Ft==null?void 0:Ft.id)!==(Je==null?void 0:Je.id))try{if(Ft){H.value=Ft;const Lt=document.querySelector(".map-parent");Lt instanceof HTMLElement&&(Lt.style.display="block")}else{H.value=null,ue();const Lt=document.querySelector(".map-parent");Lt instanceof HTMLElement&&(Lt.style.display="none")}}catch(Lt){console.error("[MapView][watch currentPlan] ERREUR:",Lt),H.value=null,ue()}},{immediate:!0}),ff(()=>{m.value&&m.value.off("moveend"),window.removeEventListener("resize",ki),window.removeEventListener("shape:created",()=>{})});function se(){i.value=!i.value}function ue(){D.value&&(D.value.eachLayer(Ft=>{var Je;((Je=Ft.properties)==null?void 0:Je.type)==="Note"&&typeof Ft.resetPlanSaveState=="function"&&Ft.resetPlanSaveState()}),D.value.clearLayers()),c.value=[],U(),y.value=null,p.value=""}async function Q(Ft){try{ue(),await o.loadPlanElements(Ft);const Je=s.getPlanById(Ft);if(Je){H.value=Je,s.setCurrentPlan(Je),o.setCurrentPlan(Je.id),localStorage.setItem("lastPlanId",Je.id.toString());try{const In=(await Yo.getNotesByPlan(Ft)).data,nr=yh();m.value&&D.value&&In.forEach(Nn=>{try{if(nr.addNote({...Nn,id:Nn.id,columnId:Nn.column,accessLevel:Nn.access_level}),Nn.location&&Nn.location.type==="Point"&&Array.isArray(Nn.location.coordinates)&&Nn.location.coordinates.length===2){const Zt=rl.fromBackendData({name:Nn.title,description:Nn.description,location:Nn.location,columnId:Nn.column,accessLevel:Nn.access_level,style:Nn.style||{color:Nn.color||"#3B82F6",weight:2,opacity:1,fillColor:Nn.color||"#3B82F6",fillOpacity:.6,radius:8},category:Nn.category||"forages",comments:Nn.comments||[],photos:Nn.photos||[]});Zt._dbId=Nn.id,D.value.addLayer(Zt),c.value.push({id:Nn.id,type:"Note",layer:Zt,properties:Zt.properties})}}catch(Zt){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note golocalise:",Zt)}})}catch(Lt){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes golocalises:",Lt)}if(m.value&&D.value){const Lt=o.getCurrentElements.reduce((Zt,Ze)=>(Zt[Ze.type_forme]||(Zt[Ze.type_forme]=[]),Zt[Ze.type_forme].push(Ze),Zt),{}),In=["Note","Polygon","Line"],nr=Object.keys(Lt).sort((Zt,Ze)=>{const un=In.indexOf(Zt),sn=In.indexOf(Ze);return(un===-1?999:un)-(sn===-1?999:sn)}),Nn=Zt=>{switch(Zt){case"Note":return 20;case"Line":return 10;case"Polygon":return 5;default:return 10}};for(const Zt of nr){const Ze=Lt[Zt],un=Nn(Zt);for(let sn=0;sn<Ze.length;sn+=un){const An=Ze.slice(sn,sn+un);await Promise.all(An.map(async Qn=>{var Wr;if(!D.value||!Qn.data)return;let ir=null;switch(Qn.type_forme){case"Polygon":{const Un=Qn.data;if(Un.points&&Un.points.length>0){const li=Un.points.map(kr=>pn.latLng(kr[1],kr[0]));ir=new Tl(li,Un.style),Un.name&&(ir.properties={name:Un.name},ir.name=Un.name)}break}case"Line":{const Un=Qn.data;if(Un.points&&Un.points.length>0){const li=Un.points.map(kr=>pn.latLng(kr[1],kr[0]));ir=new vs(li,Un.style),Un.name&&(ir.properties={name:Un.name},ir.name=Un.name)}break}case"Note":{const Un=Qn.data;if(Un.location&&Array.isArray(Un.location)&&Un.location.length===2||Un.location&&typeof Un.location=="object"&&Un.location.type==="Point"&&Array.isArray(Un.location.coordinates)&&Un.location.coordinates.length===2)try{Un.category||(Un.category="forages"),Un.accessLevel||(Un.accessLevel="private");const kr=rl.fromBackendData(Un);kr._dbId=Qn.id,ir=kr}catch(kr){console.error("[MapView][refreshMapWithPlan] Erreur lors de la cration de la Note:",kr)}else console.error("[MapView][refreshMapWithPlan] Donnes invalides pour Note:",Un);break}}ir&&(ir._dbId=Qn.id,(Wr=D.value)==null||Wr.addLayer(ir),c.value.push({id:Qn.id,type:Qn.type_forme,layer:ir,properties:ir.properties}))})),await new Promise(Qn=>requestAnimationFrame(()=>setTimeout(Qn,0)))}}setTimeout(()=>{N(),m.value&&m.value.invalidateSize({animate:!1,pan:!1})},100)}}else console.error(`Plan ${Ft} introuvable aprs chargement`);K.value=!1}catch(Je){throw console.error("Erreur lors du rafrachissement de la carte:",Je),Je}}async function ke(Ft){var Je;try{if(!s.getPlanById(Ft))try{await Ln.get(`/plans/${Ft}/`)}catch(In){throw((Je=In.response)==null?void 0:Je.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouv - conservation de lastPlanId pour fallback"),H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue()),In}await Q(Ft),K.value=!1,qt()}catch(Lt){throw console.error("Erreur lors du chargement du plan:",Lt),H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue(),Lt}}async function Ve(){var Ft;if(!R.value){if(!H.value||!D.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}R.value=!0,j.value="saving";try{const Je=[],Lt=new Set(o.getCurrentElements.filter(Ze=>Ze.id!==void 0).map(Ze=>Ze.id)),In=new Set;D.value.eachLayer(Ze=>{var Qn,ir,Wr,Un,li,kr,Do;let un,sn;const An={color:Ze.options.color||"#2b6451",weight:Ze.options.weight||3,opacity:Ze.options.opacity||1,fillColor:Ze.options.fillColor||"#2b6451",fillOpacity:Ze.options.fillOpacity||.2,dashArray:Ze.options.dashArray||""};if(Ze instanceof pn.Polyline&&!(Ze instanceof pn.Polygon)){un="Line";const lr=Ze.getLatLngs(),br=((Qn=Ze.properties)==null?void 0:Qn.category)||"forages",Gi=((ir=Ze.properties)==null?void 0:ir.accessLevel)||"visitor";sn={points:lr.map(ws=>[ws.lng,ws.lat]),name:((Wr=Ze.properties)==null?void 0:Wr.name)||"",category:br,accessLevel:Gi,style:{...An,_accessLevel:Gi,accessLevel:Gi}}}else if(Ze instanceof pn.Polygon){un="Polygon";const lr=Ze.getLatLngs()[0],br=((Un=Ze.properties)==null?void 0:Un.category)||"forages",Gi=((li=Ze.properties)==null?void 0:li.accessLevel)||"visitor";sn={points:lr.map(ws=>[ws.lng,ws.lat]),name:((kr=Ze.properties)==null?void 0:kr.name)||"",category:br,accessLevel:Gi,style:{...An,_accessLevel:Gi,accessLevel:Gi}}}else if(((Do=Ze.properties)==null?void 0:Do.type)==="Note"){const lr=Ze;if(lr._dbId&&typeof lr._dbId=="number"&&In.add(lr._dbId),typeof lr.saveNote=="function")try{if(lr.properties&&(lr.properties.style||(lr.properties.style={}),lr.properties.accessLevel&&(lr.properties.style._accessLevel=lr.properties.accessLevel,lr.properties.style.accessLevel=lr.properties.accessLevel),lr.properties.style.color)){const br=lr.properties.style.color;lr.properties.style.color=br,lr.properties.style.fillColor=br}H.value&&H.value.id?lr.saveNote(H.value.id):lr.saveNote()}catch(br){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",br)}else console.warn("[savePlan] La note ne possde pas de mthode saveNote");un=void 0,sn=void 0}if(un&&sn){let lr=Ze._elementId;Ze._dbId&&(lr=Ze._dbId,typeof lr=="number"&&In.add(lr)),Je.push({id:lr,type_forme:un,data:sn})}});const nr=Array.from(Lt).filter(Ze=>!In.has(Ze)),Nn=Je.filter(Ze=>!Ze.id||!nr.includes(Ze.id));o.elements=Nn;const Zt=await o.saveToPlan(H.value.id,{elementsToDelete:nr});if(Zt&&((Ft=H.value)!=null&&Ft.id)){const Ze=H.value.id;H.value={...H.value,...Zt},s.updatePlanDetails(Ze,Zt)}j.value="success",D.value&&D.value.eachLayer(Ze=>{var un;((un=Ze.properties)==null?void 0:un.type)==="Note"&&typeof Ze.resetPlanSaveState=="function"&&Ze.resetPlanSaveState()}),setTimeout(()=>{j.value=null},3e3)}catch(Je){console.error("Erreur lors de la sauvegarde du plan:",Je),j.value=null}finally{R.value=!1}}}Au(()=>{q.user||jt(),s.clearCurrentPlan(),o.clearCurrentPlan(),D.value&&D.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function Xe(Ft){var Je;if(O(Ft),y.value&&((Je=y.value.properties)==null?void 0:Je.type)==="Note")if(typeof y.value.saveNote=="function")try{if(Ft.category&&(y.value.properties.category=Ft.category),Ft.accessLevel&&(y.value.properties.accessLevel=Ft.accessLevel,y.value.properties.style||(y.value.properties.style={}),y.value.properties.style._accessLevel=Ft.accessLevel,y.value.properties.style.accessLevel=Ft.accessLevel),y.value.properties.style&&y.value.properties.style.color){const Lt=y.value.properties.style.color;y.value.properties.style.color=Lt,y.value.properties.style.fillColor=Lt}H.value&&H.value.id?y.value.saveNote(H.value.id):y.value.saveNote(),y.value.bindPopup&&y.value.createPopupContent&&y.value.bindPopup(y.value.createPopupContent())}catch(Lt){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",Lt)}else console.warn("[MapView][updateShapeProperties] La note ne possde pas de mthode saveNote");else if(Ft.category&&y.value&&y.value._dbId){const Lt=y.value._dbId,In=o.elements.find(nr=>nr.id===Lt);if(In){const nr=In;nr.data||(nr.data={}),nr.data.category=Ft.category,o.$patch({unsavedChanges:!0})}}}const lt=()=>{D.value&&N()},at=async()=>{var Ft;if(y.value&&D.value){const Je=y.value._leaflet_id,Lt=y.value._dbId;if(((Ft=y.value.properties)==null?void 0:Ft.type)==="Note"&&Lt)try{await Yo.deleteNote(Lt),a.removeNote(Lt),l.success("Note supprime avec succs")}catch(nr){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${Lt} du backend:`,nr),l.error("Erreur lors de la suppression de la note")}S(""),D.value.removeLayer(y.value),c.value=c.value.filter(nr=>nr.layer&&nr.layer._leaflet_id!==Je),y.value=null}};async function pt(Ft){await s.fetchPlans();const Je=s.getPlanById(Ft);Je?(localStorage.setItem("lastPlanId",Ft.toString()),H.value=Je,s.setCurrentPlan(Je),o.setCurrentPlan(Je.id),V.value=!1,qt()):console.error(`Plan ${Ft} introuvable aprs cration! Vrifiez les permissions.`)}yi(_e,async Ft=>{var Je;if(Ft&&((Je=q.user)==null?void 0:Je.user_type)==="admin"){de.value=!0;try{const Lt=await q.fetchSalarieVisiteurs(Ft.id);xe.value=Array.isArray(Lt)?Lt:[Lt]}catch(Lt){console.error("[MapView][watch selectedSalarie] Error:",Lt),xe.value=[]}finally{de.value=!1}}});function jt(){localStorage.removeItem("lastPlanId")}const Bt=Y$.debounce(()=>{m.value&&al(()=>{var Ft;try{if(m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())){if(m.value.invalidateSize({animate:!1}),(Ft=D.value)!=null&&Ft.getLayers().length)try{N()}catch(Je){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Je)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Je){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Je)}})},250);function qt(){Bt()}yi(H,(Ft,Je)=>{Ft&&Ft.id!==(Je==null?void 0:Je.id)&&al(()=>{qt()})});const Jt=kt(null),gn=kt(!1),Cn=kt([]),Ye=tr(()=>Jt.value?re.value.filter(Je=>{var nr;const Lt=Je.entreprise;return(typeof Lt=="object"&&Lt!==null?Lt.id:Lt)===((nr=Jt.value)==null?void 0:nr.id)}):[]);async function st(){gn.value=!0;try{const Ft=await Ln.get("/users/",{params:{role:"ENTREPRISE"}});Cn.value=Ft.data}catch(Ft){console.error("[MapView] Error loading entreprises:",Ft),Cn.value=[]}finally{gn.value=!1}}async function Qe(Ft){Jt.value=Ft,ce.value=!0;try{const Je=await Ln.get("/users/",{params:{role:"SALARIE",entreprise:Ft.id}});re.value=Je.data}catch(Je){console.error("[MapView] Error loading salaries for entreprise:",Je),re.value=[]}finally{ce.value=!1}}function $t(){Jt.value=null,_e.value=null,ae.value=null,re.value=[],xe.value=[],be.value=[]}function Yt(){_e.value=null,ae.value=null,xe.value=[],be.value=[]}function wn(){ae.value=null,be.value=[]}async function mn(Ft){var Je;_e.value=Ft,de.value=!0;try{const Lt={role:"VISITEUR",salarie:Ft.id};q.isEntreprise?Lt.entreprise=(Je=q.user)==null?void 0:Je.id:Jt.value&&(Lt.entreprise=Jt.value.id);const In=await Ln.get("/users/",{params:Lt});Array.isArray(In.data)?(xe.value=In.data,In.data.forEach((nr,Nn)=>{})):(console.warn("Format de rponse inattendu:",In.data),xe.value=[]),xe.value.length===0&&console.warn("Aucun visiteur trouv pour ce salarie")}catch(Lt){if(console.error("ERREUR lors du chargement des visiteurs:",Lt),Lt&&typeof Lt=="object"&&"response"in Lt){const In=Lt;console.error("Dtails de l'erreur:",{status:In.response.status,data:In.response.data})}xe.value=[]}finally{de.value=!1}}function _n(){pe.value=!1,oe.value=null}function Rn(Ft){ie.value=Ft,$.value=!0}async function vn(){var Ft,Je,Lt;if((Ft=ie.value)!=null&&Ft.id)try{const In=ie.value.id,nr={selectedClient:ae.value,selectedSalarie:_e.value,isNoVisiteurView:ae.value&&ae.value.id===-1};if(await s.deletePlan(In),$.value=!1,ie.value=null,await new Promise(Nn=>setTimeout(Nn,50)),nr.isNoVisiteurView)await zn();else if(nr.selectedClient){const Nn={visiteur:nr.selectedClient.id};nr.selectedSalarie&&(Nn.salarie=nr.selectedSalarie.id),q.isEntreprise?Nn.entreprise=(Je=q.user)==null?void 0:Je.id:Jt.value&&(Nn.entreprise=Jt.value.id);const Zt=await Ln.get("/plans/",{params:Nn});be.value=Zt.data}else await s.fetchPlans();((Lt=H.value)==null?void 0:Lt.id)===In&&(H.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),ue(),localStorage.removeItem("lastPlanId"))}catch(In){console.error("Erreur lors de la suppression du plan:",In),alert("Une erreur est survenue lors de la suppression du plan"),$.value=!1,ie.value=null}}function tn(){$.value=!1,ie.value=null}function hn(Ft){o.updateFilters(Ft),Bn(),setTimeout(()=>{Bn()},100)}function Bn(){if(!D.value)return;const Ft=[];c.value.forEach((Zt,Ze)=>{Zt.layer&&!Zt.id&&(!Zt.layer.properties||Zt.layer.properties&&!Zt.layer.properties.type)&&Ft.push(Ze)});for(let Zt=Ft.length-1;Zt>=0;Zt--)c.value.splice(Ft[Zt],1);({...o.filters.accessLevels},{...o.filters.categories}),{...o.filters.shapeTypes},o.elements.length,o.elements.map(Zt=>({id:Zt.id,type_forme:Zt.type_forme}));const Je=o.getFilteredElements,Lt=D.value.getLayers();Lt.map(Zt=>({_leaflet_id:Zt._leaflet_id,_dbId:Zt._dbId,hasProperties:!!Zt.properties,propertyType:Zt.properties?Zt.properties.type:null,category:Zt.properties?Zt.properties.category:null}));const In=new Map;c.value.forEach(Zt=>{Zt.layer&&Zt.id&&In.set(Zt.id,Zt.layer)});const nr=new Map;Lt.forEach(Zt=>{Zt._dbId&&nr.set(Zt,Zt._dbId)});const Nn=new Set(Je.map(Zt=>Zt.id));Array.from(Nn),Lt.forEach(Zt=>{const Ze=Zt._dbId;if(Zt._leaflet_id,!Ze){if(!Zt.properties)return;Zt._dbId=Date.now()+Math.floor(Math.random()*1e3)}const un=Zt.properties||{},sn=un.type||Zt.type_forme||"";let An=un.category;if(Zt._dbId){const lr=o.elements.find(br=>br.id===Zt._dbId);if(lr){const br=lr.data;br&&br.category&&(An!==br.category&&(An=br.category),Zt.properties||(Zt.properties={}),Zt.properties.category=An)}}An||(An="default");const Qn=un.accessLevel||"visitor";let ir=!1;sn?ir=sn in o.filters.shapeTypes&&o.filters.shapeTypes[sn]===!0:ir=o.filters.shapeTypes.Polygon===!0;let Wr=!1;An&&An in o.filters.categories?Wr=o.filters.categories[An]===!0:Wr=o.filters.categories.forages===!0;let Un=!1;const li={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let kr="visitor";li.company?kr="company":li.employee?kr="employee":li.visitor&&(kr="visitor"),kr==="company"?Un=!0:kr==="employee"?Un=Qn==="employee"||Qn==="visitor":kr==="visitor"&&(Un=Qn==="visitor"),ir&&Wr&&Un?D.value.hasLayer(Zt)||(An&&An!=="default"&&(!Zt.properties||!Zt.properties.category)&&(Zt.properties||(Zt.properties={}),Zt.properties.category=An),D.value.addLayer(Zt)):D.value.hasLayer(Zt)&&D.value.removeLayer(Zt)}),c.value.forEach(Zt=>{if(!Zt.layer)return;const Ze=Zt.layer;if(Ze._leaflet_id,Ze._dbId,D.value.hasLayer(Ze))return;const un=Ze.properties||{},sn=un.type||Ze.type_forme||"";let An=null;if(Ze._dbId){const lr=o.elements.find(br=>br.id===Ze._dbId);if(lr){const br=lr.data;br&&br.category&&(An=br.category)}}!An&&un.category&&(An=un.category),An||(An="default");const Qn=un.accessLevel||"visitor";if(Ze.properties||(Ze.properties={}),An&&An!=="default"&&(Ze.properties.category=An,Ze._dbId)){const lr=o.elements.find(br=>br.id===Ze._dbId);if(lr){const br=lr;br.data||(br.data={}),br.data.category!==An&&(br.data.category=An,o.$patch({unsavedChanges:!0}))}}Ze.properties.accessLevel||(Ze.properties.accessLevel="visitor");let ir=!1;sn?ir=sn in o.filters.shapeTypes&&o.filters.shapeTypes[sn]===!0:ir=o.filters.shapeTypes.Polygon===!0;let Wr=!1;if(An)if(An in o.filters.categories)Wr=o.filters.categories[An]===!0;else if(RS().getUniqueCategories.includes(An)){const Gi={...o.filters.categories};Gi[An]=!0,o.updateFilters({categories:Gi}),Wr=!0}else Wr=o.filters.categories.forages===!0;else Wr=o.filters.categories.forages===!0;let Un=!1;const li={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let kr="visitor";if(li.company?kr="company":li.employee?kr="employee":li.visitor&&(kr="visitor"),kr==="company"?Un=!0:kr==="employee"?Un=Qn==="employee"||Qn==="visitor":kr==="visitor"&&(Un=Qn==="visitor"),ir&&Wr&&Un){if(An&&An!=="default"&&(Ze.properties||(Ze.properties={}),Ze.properties.category=An,Ze._dbId)){const lr=o.elements.find(br=>br.id===Ze._dbId);if(lr){const br=lr;br.data||(br.data={}),br.data.category!==An&&(br.data.category=An,o.$patch({unsavedChanges:!0}))}}D.value.addLayer(Ze)}})}function Jn(Ft){if(D.value){const Lt=D.value.getLayers().find(In=>In._leaflet_id===Ft.id||In._leaflet_id===Ft.leafletId);Lt&&(Lt.properties.name=Ft.title,Lt.properties.description=Ft.description,Lt.properties.columnId=Ft.columnId,Lt.properties.accessLevel=Ft.accessLevel,Lt.properties.comments=Ft.comments||[],Lt.properties.photos=Ft.photos||[],Lt.properties.updatedAt=new Date().toISOString(),Lt.properties.category||(Lt.properties.category="forages"),Lt.setNoteStyle({color:Ft.style.color,fillColor:Ft.style.fillColor,weight:Ft.style.weight,fillOpacity:Ft.style.fillOpacity,radius:Ft.style.radius}),Lt.closePopup(),Lt.unbindPopup(),Lt.bindPopup(Lt.createPopupContent()),window.dispatchEvent(new CustomEvent("geonote:update",{detail:{noteId:Ft.id,properties:{name:Ft.title,description:Ft.description,columnId:Ft.columnId,accessLevel:Ft.accessLevel,style:Ft.style,comments:Ft.comments,photos:Ft.photos,updatedAt:new Date().toISOString()}}})))}}async function ar(Ft){var Je;ae.value=Ft,ge.value=!0;try{const Lt={visiteur:Ft.id};q.isEntreprise?Lt.entreprise=(Je=q.user)==null?void 0:Je.id:Jt.value&&(Lt.entreprise=Jt.value.id),_e.value&&(Lt.salarie=_e.value.id);const In=await Ln.get("/plans/",{params:Lt});be.value=In.data}catch(Lt){console.error("[MapView] Error loading client plans:",Lt),be.value=[]}finally{ge.value=!1}}async function zn(){var Je;const Ft={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};ae.value=Ft,ge.value=!0;try{const Lt={visiteur_null:!0};q.isEntreprise?Lt.entreprise=(Je=q.user)==null?void 0:Je.id:Jt.value&&(Lt.entreprise=Jt.value.id),_e.value&&(Lt.salarie=_e.value.id);const In=await Ln.get("/plans/",{params:Lt});be.value=In.data}catch(Lt){console.error("[MapView] Error loading plans without visiteur:",Lt),be.value=[]}finally{ge.value=!1}}async function Lr(){var Ft;if(_e.value=null,ae.value=null,be.value=[],q.isEntreprise){ce.value=!0;try{const Je=await Ln.get("/users/",{params:{role:"SALARIE",entreprise:(Ft=q.user)==null?void 0:Ft.id}});re.value=Je.data}catch(Je){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salaris:",Je),re.value=[]}finally{ce.value=!1}}K.value=!0}const ns=kt(window.innerWidth<768);function ki(){ns.value=window.innerWidth<768}return(Ft,Je)=>{var Lt,In,nr,Nn,Zt;return Ie(),je(bn,null,[P("div",Z$,[P("div",K$,[H.value?Kt("",!0):(Ie(),je("div",X$,[P("div",J$,[Je[10]||(Je[10]=lu('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+i9+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),P("div",Q$,[P("button",{onClick:Je[0]||(Je[0]=Ze=>V.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Je[8]||(Je[8]=[P("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),zr(" Crer un nouveau plan ")])),P("button",{onClick:Lr,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Je[9]||(Je[9]=[P("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),zr(" Charger un plan existant ")]))])])])),jn(P("div",eV,[P("div",tV,[H.value?(Ie(),Lo(fz,{key:0,"last-save":(Lt=H.value)!=null&&Lt.date_modification?new Date(H.value.date_modification):void 0,"plan-name":(In=H.value)==null?void 0:In.nom,"plan-description":(nr=H.value)==null?void 0:nr.description,"save-status":j.value,onChangeMapType:cn(ee),onCreateNewPlan:Je[1]||(Je[1]=Ze=>V.value=!0),onLoadPlan:Lr,onSavePlan:Ve,onAdjustView:lt,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):Kt("",!0),P("div",nV,[i.value&&H.value?(Ie(),je("div",{key:0,onClick:se,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):Kt("",!0),P("div",rV,[P("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),H.value?(Ie(),je(bn,{key:1},[ns.value?(Ie(),Lo(Fd,{key:0,to:"body"},[Kr(A4,{show:i.value,"onUpdate:show":Je[2]||(Je[2]=Ze=>i.value=Ze),"selected-tool":cn(p),"selected-shape":Ne.value,"is-drawing":cn(G),onToolSelected:cn(S),onFilterChange:hn,onDeleteShape:at,onPropertiesUpdate:Xe,onStyleUpdate:cn(T),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])])):(Ie(),Lo(A4,{key:1,show:i.value,"onUpdate:show":Je[3]||(Je[3]=Ze=>i.value=Ze),"selected-tool":cn(p),"selected-shape":Ne.value,"is-drawing":cn(G),onToolSelected:cn(S),onFilterChange:hn,onDeleteShape:at,onPropertiesUpdate:Xe,onStyleUpdate:cn(T),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"]))],64)):Kt("",!0),H.value?(Ie(),je("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:se},Je[11]||(Je[11]=[lu('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils</span></div></div>',1)]))):Kt("",!0)])])],512),[[Hb,H.value]]),(Ie(),Lo(Fd,{to:"body"},[Kr(KU,{ref_key:"newPlanModalRef",ref:Ee,modelValue:V.value,"onUpdate:modelValue":Je[4]||(Je[4]=Ze=>V.value=Ze),onCreated:pt,onSalarieSelected:Je[5]||(Je[5]=Ze=>_e.value=Ze),onVisiteurSelected:Je[6]||(Je[6]=Ze=>Z.value=Ze)},null,8,["modelValue"])])),(Ie(),Lo(Fd,{to:"body"},[K.value?(Ie(),je("div",iV,[P("div",sV,[P("div",oV,[Je[13]||(Je[13]=P("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),P("button",{onClick:Je[7]||(Je[7]=Ze=>K.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Je[12]||(Je[12]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",aV,[cn(q).isAdmin?(Ie(),je("div",lV,[Jt.value?_e.value?ae.value?(Ie(),je("div",EV,[P("div",PV,[P("button",{onClick:wn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[29]||(Je[29]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),zr(" Retour  la liste des clients ")])),Je[30]||(Je[30]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",kV,Ut(cn(Is)(ae.value)),1)]),Je[32]||(Je[32]=P("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),P("div",MV,[ge.value?(Ie(),je(bn,{key:0},sr(3,Ze=>P("div",{key:Ze,class:"animate-pulse"},Je[31]||(Je[31]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),P("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ie(!0),je(bn,{key:1},sr(be.value,Ze=>(Ie(),je("div",{key:Ze.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:un=>ke(Ze.id),class:"w-full text-left"},[P("div",TV,Ut(Ze.nom),1),P("div",OV,Ut(Ze.description),1),P("div",DV," Modifi le "+Ut(cn(zf)(Ze.date_modification)),1)],8,AV),cn(q).isAdmin||cn(q).isEntreprise?(Ie(),je("button",{key:0,onClick:Bl(un=>Rn(Ze),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,IV)):Kt("",!0)]))),128))])])):(Ie(),je("div",bV,[P("div",_V,[P("button",{onClick:Yt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[22]||(Je[22]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),zr(" Retour  la liste des salaries ")])),Je[23]||(Je[23]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",wV,Ut(cn(Is)(_e.value)),1)]),Je[28]||(Je[28]=P("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),P("div",xV,[P("button",{onClick:zn,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Je[24]||(Je[24]=[P("div",null,[P("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),P("div",{class:"text-xs text-primary-600"},"Afficher les plans crs sans visiteur associ")],-1),P("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),de.value?(Ie(),je(bn,{key:0},sr(3,Ze=>P("div",{key:Ze,class:"animate-pulse"},Je[25]||(Je[25]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ie(),je(bn,{key:1},[Ue.value.length===0?(Ie(),je("div",LV,Je[26]||(Je[26]=[P("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),P("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ie(!0),je(bn,{key:1},sr(Ue.value,Ze=>(Ie(),je("button",{key:Ze.id,onClick:un=>ar(Ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",SV,Ut(cn(Is)(Ze)),1)]),Je[27]||(Je[27]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,CV))),128))],64))])])):(Ie(),je("div",dV,[P("div",pV,[P("button",{onClick:$t,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[17]||(Je[17]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),zr(" Retour  la liste des entreprises ")])),Je[18]||(Je[18]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",gV,Ut(cn(Is)(Jt.value)),1)]),Je[21]||(Je[21]=P("h3",{class:"font-medium text-gray-700"},"Slectionnez un salarie",-1)),P("div",mV,[ce.value?(Ie(),je(bn,{key:0},sr(3,Ze=>P("div",{key:Ze,class:"animate-pulse"},Je[19]||(Je[19]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ie(!0),je(bn,{key:1},sr(Ye.value,Ze=>(Ie(),je("button",{key:Ze.id,onClick:un=>mn(Ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",yV,Ut(cn(Is)(Ze)),1)]),Je[20]||(Je[20]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,vV))),128))])])):(Ie(),je("div",uV,[Je[16]||(Je[16]=P("h3",{class:"font-medium text-gray-700"},"Slectionnez une entreprise",-1)),P("div",cV,[gn.value?(Ie(),je(bn,{key:0},sr(3,Ze=>P("div",{key:Ze,class:"animate-pulse"},Je[14]||(Je[14]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ie(!0),je(bn,{key:1},sr(Cn.value,Ze=>(Ie(),je("button",{key:Ze.id,onClick:un=>Qe(Ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",fV,Ut(cn(Is)(Ze)),1)]),Je[15]||(Je[15]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,hV))),128))])]))])):cn(q).isSalarie?(Ie(),je("div",NV,[ae.value?(Ie(),je("div",UV,[P("div",$V,[P("button",{onClick:wn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[38]||(Je[38]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),zr(" Retour  la liste des clients ")])),Je[39]||(Je[39]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",VV,Ut(cn(Is)(ae.value)),1)]),Je[41]||(Je[41]=P("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),P("div",HV,[ge.value?(Ie(),je(bn,{key:0},sr(3,Ze=>P("div",{key:Ze,class:"animate-pulse"},Je[40]||(Je[40]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),P("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ie(!0),je(bn,{key:1},sr(be.value,Ze=>(Ie(),je("div",{key:Ze.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:un=>ke(Ze.id),class:"w-full text-left"},[P("div",GV,Ut(Ze.nom),1),P("div",qV,Ut(Ze.description),1),P("div",YV," Modifi le "+Ut(cn(zf)(Ze.date_modification)),1)],8,WV),cn(q).isAdmin||cn(q).isEntreprise?(Ie(),je("button",{key:0,onClick:Bl(un=>Rn(Ze),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,ZV)):Kt("",!0)]))),128))])])):(Ie(),je("div",BV,[Je[37]||(Je[37]=P("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),P("div",RV,[P("button",{onClick:zn,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Je[33]||(Je[33]=[P("div",null,[P("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),P("div",{class:"text-xs text-primary-600"},"Afficher les plans crs sans visiteur associ")],-1),P("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),de.value?(Ie(),je(bn,{key:0},sr(3,Ze=>P("div",{key:Ze,class:"animate-pulse"},Je[34]||(Je[34]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ie(),je(bn,{key:1},[Ue.value.length===0?(Ie(),je("div",FV,Je[35]||(Je[35]=[P("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),P("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):(Ie(!0),je(bn,{key:1},sr(Ue.value,Ze=>(Ie(),je("button",{key:Ze.id,onClick:un=>ar(Ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",zV,Ut(cn(Is)(Ze)),1)]),Je[36]||(Je[36]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,jV))),128))],64))])]))])):cn(q).isEntreprise?(Ie(),je("div",KV,[_e.value?ae.value?(Ie(),je("div",lH,[P("div",uH,[P("button",{onClick:wn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[52]||(Je[52]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),zr(" Retour  la liste des visiteurs ")])),Je[53]||(Je[53]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",cH,Ut(cn(Is)(ae.value)),1)]),Je[55]||(Je[55]=P("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),P("div",hH,[ge.value?(Ie(),je(bn,{key:0},sr(3,Ze=>P("div",{key:Ze,class:"animate-pulse"},Je[54]||(Je[54]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),P("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ie(!0),je(bn,{key:1},sr(be.value,Ze=>(Ie(),je("div",{key:Ze.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:un=>ke(Ze.id),class:"w-full text-left"},[P("div",dH,Ut(Ze.nom),1),P("div",pH,Ut(Ze.description),1),P("div",gH," Modifi le "+Ut(cn(zf)(Ze.date_modification)),1)],8,fH),cn(q).isAdmin||cn(q).isEntreprise?(Ie(),je("button",{key:0,onClick:Bl(un=>Rn(Ze),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,mH)):Kt("",!0)]))),128))])])):(Ie(),je("div",tH,[P("div",nH,[P("button",{onClick:Yt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Je[45]||(Je[45]=[P("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),zr(" Retour  la liste des salaris ")])),Je[46]||(Je[46]=P("span",{class:"mx-2 text-gray-400"},"|",-1)),P("span",rH,Ut(cn(Is)(_e.value)),1)]),Je[51]||(Je[51]=P("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),P("div",iH,[P("button",{onClick:zn,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Je[47]||(Je[47]=[P("div",null,[P("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),P("div",{class:"text-xs text-primary-600"},"Afficher les plans crs sans visiteur associ")],-1),P("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),de.value?(Ie(),je(bn,{key:0},sr(3,Ze=>P("div",{key:Ze,class:"animate-pulse"},Je[48]||(Je[48]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ie(),je(bn,{key:1},[Ue.value.length===0?(Ie(),je("div",sH,Je[49]||(Je[49]=[P("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salari",-1),P("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ie(!0),je(bn,{key:1},sr(Ue.value,Ze=>(Ie(),je("button",{key:Ze.id,onClick:un=>ar(Ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",aH,Ut(cn(Is)(Ze)),1)]),Je[50]||(Je[50]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,oH))),128))],64))])])):(Ie(),je("div",XV,[Je[44]||(Je[44]=P("h3",{class:"font-medium text-gray-700"},"Slectionnez un salari",-1)),P("div",JV,[ce.value?(Ie(),je(bn,{key:0},sr(3,Ze=>P("div",{key:Ze,class:"animate-pulse"},Je[42]||(Je[42]=[P("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[P("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),P("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ie(!0),je(bn,{key:1},sr(re.value,Ze=>(Ie(),je("button",{key:Ze.id,onClick:un=>mn(Ze),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[P("div",null,[P("div",eH,Ut(cn(Is)(Ze)),1)]),Je[43]||(Je[43]=P("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,QV))),128))])]))])):(Ie(),je("div",vH,[cn(s).plans.length===0?(Ie(),je("div",yH,Je[56]||(Je[56]=[P("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Ie(),je("div",bH,[(Ie(!0),je(bn,null,sr(cn(s).plans,Ze=>(Ie(),je("div",{key:Ze.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[P("button",{onClick:un=>ke(Ze.id),class:"w-full text-left"},[P("div",wH,Ut(Ze.nom),1),P("div",xH,Ut(Ze.description),1),P("div",LH," Modifi le "+Ut(cn(zf)(Ze.date_modification)),1)],8,_H),cn(q).isAdmin||cn(q).isEntreprise?(Ie(),je("button",{key:0,onClick:Bl(un=>Rn(Ze),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,CH)):Kt("",!0)]))),128))]))]))])])])):Kt("",!0)])),(Ie(),Lo(Fd,{to:"body"},[$.value?(Ie(),je("div",SH,[P("div",EH,[P("div",PH,[Je[57]||(Je[57]=P("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),Je[58]||(Je[58]=P("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),P("p",kH,' tes-vous sr de vouloir supprimer le plan "'+Ut(ie.value?ie.value.nom:"")+'" ? Cette action est irrversible. ',1)]),P("div",{class:"flex justify-center space-x-4"},[P("button",{onClick:tn,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),P("button",{onClick:vn,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):Kt("",!0)]))])]),(Ie(),Lo(Fd,{to:"body"},[pe.value?(Ie(),Lo(HS,{key:0,note:oe.value,"is-new-note":!((Nn=oe.value)!=null&&Nn.id),location:(Zt=oe.value)==null?void 0:Zt.location,onClose:_n,onSave:Jn},null,8,["note","is-new-note","location"])):Kt("",!0)]))],64)}}}),MH={class:"fixed inset-0 z-[3001] overflow-y-auto"},AH={class:"flex items-center justify-center min-h-screen w-full p-0"},TH={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},OH={class:"p-4 md:p-6"},DH={class:"flex justify-between items-center mb-4 border-b pb-4"},IH={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},NH={class:"mt-4"},BH={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},RH={class:"flex"},FH={class:"ml-3"},jH={class:"text-sm font-medium text-red-800"},zH={key:0},UH={key:1},$H=["value"],VH={key:2},HH={key:3},WH=["value"],GH={key:4,class:"bg-blue-50 p-3 rounded-md mb-4"},qH={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},YH={key:0,class:"mt-2 text-sm text-red-600"},ZH={key:0,class:"mt-2 text-sm text-red-600"},KH={key:5},XH={class:"flex items-center"},JH={key:6,class:"border-t pt-4 mt-4"},QH={class:"mb-4"},eW={class:"mb-4"},tW={key:7},nW={key:8},rW={key:0,class:"mt-2 text-sm text-red-600"},iW={class:"flex justify-end space-x-3"},sW=["disabled"],oW={key:0,class:"mr-2"},aW=_s({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=kt(!1),s=kt(""),o=kt(""),a=kt(""),l=kt(""),c=kt(""),f=cu({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});Ks(()=>{var y;(y=n.user)!=null&&y.id?(f.id=n.user.id,f.first_name=n.user.first_name||"",f.last_name=n.user.last_name||"",f.username=n.user.username||"",f.email=n.user.email||"",f.company_name=n.user.company_name||"",f.role=n.user.role||"VISITEUR",f.is_active=n.user.is_active??!0,f.ecowitt_api_key=n.user.ecowitt_api_key||"",f.ecowitt_application_key=n.user.ecowitt_application_key||"",f.storage_quota=n.user.storage_quota||50,f.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?f.salarie=n.user.salarie.id:f.salarie=n.user.salarie:n.user.salarie_id?f.salarie=n.user.salarie_id:n.currentSalarie&&(f.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?f.entreprise=n.user.entreprise.id:f.entreprise=n.user.entreprise:n.user.entreprise_id?f.entreprise=n.user.entreprise_id:n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(f.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?f.role="SALARIE":n.isAdmin||(f.role="VISITEUR"))}),jg(()=>{f.role==="ADMIN"||f.role==="ENTREPRISE"?(f.salarie=null,f.entreprise=null):f.role==="SALARIE"&&(f.salarie=null,n.isEntreprise&&n.currentEntreprise&&(f.entreprise=parseInt(n.currentEntreprise)))}),jg(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(y=>{switch(y.field){case"email":s.value=y.message;break;case"username":o.value=y.message;break;case"password":a.value=y.message;break;case"non_field_error":default:l.value=y.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let y=!0;if(f.id||(f.password!==c.value?(a.value="Les mots de passe ne correspondent pas",y=!1):f.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractres",y=!1)),!!y){i.value=!0;try{const m={...f};f.id&&delete m.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(f.role)&&(m.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),m.salarie&&(m.salarie_id=m.salarie,delete m.salarie),n.currentSalarie&&f.role==="VISITEUR"&&(m.salarie_id=parseInt(n.currentSalarie)),await r("save",m),r("refresh")}catch(m){console.error("Erreur locale:",m)}finally{i.value=!1}}}return(y,m)=>(Ie(),je("div",MH,[P("div",AH,[m[43]||(m[43]=P("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[P("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),P("div",TH,[P("div",null,[P("div",OH,[P("div",DH,[P("h3",IH,Ut(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),P("button",{type:"button",onClick:m[0]||(m[0]=C=>y.$emit("close")),class:"text-gray-400 hover:text-gray-500"},m[16]||(m[16]=[P("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),P("div",NH,[l.value?(Ie(),je("div",BH,[P("div",RH,[m[17]||(m[17]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",FH,[P("h3",jH,Ut(l.value),1)])])])):Kt("",!0),P("form",{onSubmit:Bl(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Ie(),je("div",zH,[m[19]||(m[19]=P("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),jn(P("select",{id:"role","onUpdate:modelValue":m[1]||(m[1]=C=>f.role=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[18]||(m[18]=[P("option",{value:"ADMIN"},"Administrateur",-1),P("option",{value:"ENTREPRISE"},"Entreprise",-1),P("option",{value:"SALARIE"},"Salarie",-1),P("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[os,f.role]])])):Kt("",!0),t.isAdmin&&f.role==="SALARIE"?(Ie(),je("div",UH,[m[21]||(m[21]=P("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),jn(P("select",{id:"entreprise","onUpdate:modelValue":m[2]||(m[2]=C=>f.entreprise=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[m[20]||(m[20]=P("option",{value:null},"-- Slectionner une entreprise --",-1)),(Ie(!0),je(bn,null,sr(t.entreprises,C=>(Ie(),je("option",{key:C.id,value:C.id},Ut(C.first_name)+" "+Ut(C.last_name)+" ("+Ut(C.company_name||"Entreprise")+") ",9,$H))),128))],512),[[os,f.entreprise]])])):Kt("",!0),t.isEntreprise&&!f.id?(Ie(),je("div",VH,[m[23]||(m[23]=P("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),jn(P("select",{id:"role","onUpdate:modelValue":m[3]||(m[3]=C=>f.role=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[22]||(m[22]=[P("option",{value:"SALARIE"},"Salarie",-1),P("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[os,f.role]])])):Kt("",!0),(t.isAdmin||t.isEntreprise)&&f.role==="VISITEUR"&&!t.currentSalarie?(Ie(),je("div",HH,[m[25]||(m[25]=P("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),jn(P("select",{id:"salarie","onUpdate:modelValue":m[4]||(m[4]=C=>f.salarie=C),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[m[24]||(m[24]=P("option",{value:null},"-- Slectionner un salarie --",-1)),(Ie(!0),je(bn,null,sr(t.salaries,C=>(Ie(),je("option",{key:C.id,value:C.id},Ut(C.first_name)+" "+Ut(C.last_name)+" ("+Ut(C.company_name||"Salarie")+") ",9,WH))),128))],512),[[os,f.salarie]])])):Kt("",!0),t.currentSalarie&&!t.isAdmin&&!t.isEntreprise?(Ie(),je("div",GH,m[26]||(m[26]=[lu('<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><p class="text-sm text-blue-700"> Vous tes en train de crer un visiteur qui sera automatiquement associ  votre compte. </p></div></div>',1)]))):Kt("",!0),P("div",qH,[P("div",null,[m[27]||(m[27]=P("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),jn(P("input",{type:"text",id:"first_name","onUpdate:modelValue":m[5]||(m[5]=C=>f.first_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[di,f.first_name]])]),P("div",null,[m[28]||(m[28]=P("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),jn(P("input",{type:"text",id:"last_name","onUpdate:modelValue":m[6]||(m[6]=C=>f.last_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[di,f.last_name]])])]),P("div",null,[m[29]||(m[29]=P("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),jn(P("input",{type:"email",id:"email","onUpdate:modelValue":m[7]||(m[7]=C=>f.email=C),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[di,f.email]]),s.value?(Ie(),je("div",YH,Ut(s.value),1)):Kt("",!0)]),P("div",null,[m[30]||(m[30]=P("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),jn(P("input",{type:"text",id:"username","onUpdate:modelValue":m[8]||(m[8]=C=>f.username=C),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[di,f.username]]),o.value?(Ie(),je("div",ZH,Ut(o.value),1)):Kt("",!0)]),P("div",null,[m[31]||(m[31]=P("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),jn(P("input",{type:"text",id:"company_name","onUpdate:modelValue":m[9]||(m[9]=C=>f.company_name=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[di,f.company_name]])]),f.role==="ENTREPRISE"||f.role==="SALARIE"?(Ie(),je("div",KH,[m[33]||(m[33]=P("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),P("div",XH,[jn(P("input",{type:"number",id:"storage_quota","onUpdate:modelValue":m[10]||(m[10]=C=>f.storage_quota=C),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[di,f.storage_quota]]),m[32]||(m[32]=P("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),m[34]||(m[34]=P("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):Kt("",!0),f.role==="ENTREPRISE"?(Ie(),je("div",JH,[m[39]||(m[39]=P("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),P("div",QH,[m[35]||(m[35]=P("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Cl API Ecowitt",-1)),jn(P("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":m[11]||(m[11]=C=>f.ecowitt_api_key=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl API Ecowitt"},null,512),[[di,f.ecowitt_api_key]]),m[36]||(m[36]=P("p",{class:"mt-1 text-sm text-gray-500"},"Cl API pour accder aux services mto Ecowitt",-1))]),P("div",eW,[m[37]||(m[37]=P("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Cl d'application Ecowitt",-1)),jn(P("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":m[12]||(m[12]=C=>f.ecowitt_application_key=C),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl d'application Ecowitt"},null,512),[[di,f.ecowitt_application_key]]),m[38]||(m[38]=P("p",{class:"mt-1 text-sm text-gray-500"},"Cl d'application pour accder aux services mto Ecowitt",-1))])])):Kt("",!0),f.id?Kt("",!0):(Ie(),je("div",tW,[m[40]||(m[40]=P("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),jn(P("input",{type:"password",id:"password","onUpdate:modelValue":m[13]||(m[13]=C=>f.password=C),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[di,f.password]])])),f.id?Kt("",!0):(Ie(),je("div",nW,[m[41]||(m[41]=P("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),jn(P("input",{type:"password",id:"password_confirm","onUpdate:modelValue":m[14]||(m[14]=C=>c.value=C),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[di,c.value]]),a.value?(Ie(),je("div",rW,Ut(a.value),1)):Kt("",!0)])),P("div",iW,[P("button",{type:"button",onClick:m[15]||(m[15]=C=>y.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),P("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Ie(),je("span",oW,m[42]||(m[42]=[P("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):Kt("",!0),zr(" "+Ut(f.id?"Enregistrer":"Crer"),1)],8,sW)])],32)])])])])])]))}}),lW={class:"fixed inset-0 z-[3001] overflow-y-auto"},uW={class:"flex items-center justify-center min-h-screen w-full"},cW={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},hW={class:"p-4 md:p-6"},fW={class:"flex items-start"},dW={class:"ml-4 flex-1"},pW={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},gW={class:"mt-2"},mW={class:"text-sm text-gray-500"},vW={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},yW=_s({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Ie(),je("div",lW,[P("div",uW,[n[3]||(n[3]=P("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[P("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),P("div",cW,[P("div",hW,[P("div",fW,[n[2]||(n[2]=P("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[P("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),P("div",dW,[P("h3",pW,Ut(t.title),1),P("div",gW,[P("p",mW,Ut(t.message),1)])])]),P("div",vW,[P("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),P("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),bW={class:"min-h-full bg-gray-50"},_W={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},wW={class:"flex justify-between items-center mb-8"},xW={class:"text-3xl font-extrabold text-gray-900"},LW={key:0},CW={key:1},SW={key:2},EW={key:0},PW={key:1},kW={key:2},MW={class:"bg-white shadow rounded-lg mb-6 p-4"},AW={class:"space-y-4"},TW={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},OW={key:0},DW={key:0,value:"ADMIN"},IW={key:1,value:"ENTREPRISE"},NW={key:1},BW=["value"],RW={key:2},FW=["value"],jW={class:"w-full"},zW={class:"bg-white shadow rounded-lg"},UW={class:"overflow-x-auto"},$W={class:"min-w-full divide-y divide-gray-200"},VW={class:"bg-gray-50"},HW={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},WW={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},GW={class:"bg-white divide-y divide-gray-200"},qW={key:0,class:"animate-pulse"},YW={key:1},ZW={class:"px-6 py-4 whitespace-nowrap"},KW={class:"flex items-center"},XW={class:"flex-shrink-0 h-10 w-10"},JW={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},QW={class:"text-primary-600 font-medium"},eG={class:"ml-4"},tG={class:"text-sm font-medium text-gray-900"},nG={class:"text-sm text-gray-500"},rG={class:"px-6 py-4 whitespace-nowrap"},iG={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},sG={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},oG={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},aG={class:"px-6 py-4 whitespace-nowrap"},lG={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},uG=["onClick"],cG=["onClick"],hG={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},fG=_s({__name:"UserListView",setup(t){const e=po(),n=ll(),r=kt([]),i=kt([]),s=kt([]),o=kt(!1),a=kt(!1),l=kt(null),c=kt(null),f=kt(!0),p=kt([]),y=cu({role:"",search:"",salarie:"",entreprise:""}),m=tr(()=>e.isAdmin),C=tr(()=>e.isEntreprise),S=tr(()=>e.isSalarie),T=tr(()=>m.value?r.value.filter($=>$.role==="SALARIE"):C.value?r.value.filter($=>{var H,oe;return $.role==="SALARIE"&&((H=$.entreprise)==null?void 0:H.id)===((oe=e.user)==null?void 0:oe.id)}):[]),O=tr(()=>{let $=r.value;if(C.value&&($=$.filter(H=>{var oe,ie,R,j,q;return H.role==="SALARIE"?((oe=H.entreprise)==null?void 0:oe.id)===((ie=e.user)==null?void 0:ie.id):H.role==="VISITEUR"?((j=(R=H.salarie)==null?void 0:R.entreprise)==null?void 0:j.id)===((q=e.user)==null?void 0:q.id):!1})),S.value&&($=$.filter(H=>{var oe,ie;return H.role==="VISITEUR"&&(H.salarie_id===((oe=e.user)==null?void 0:oe.id)||H.salarie&&H.salarie.id===((ie=e.user)==null?void 0:ie.id))})),(m.value||C.value)&&(y.role&&($=$.filter(H=>H.role===y.role)),y.salarie&&($=$.filter(H=>{var ie;const oe=((ie=H.salarie)==null?void 0:ie.id)||H.salarie_id;return(oe==null?void 0:oe.toString())===y.salarie.toString()})),y.entreprise&&m.value&&($=$.filter(H=>{var oe,ie,R,j,q;return H.role==="SALARIE"?((ie=(oe=H.entreprise)==null?void 0:oe.id)==null?void 0:ie.toString())===y.entreprise.toString():H.role==="VISITEUR"?((q=(j=(R=H.salarie)==null?void 0:R.entreprise)==null?void 0:j.id)==null?void 0:q.toString())===y.entreprise.toString():!1}))),y.search){const H=y.search.toLowerCase();$=$.filter(oe=>{var ie,R,j,q;return((ie=oe.username)==null?void 0:ie.toLowerCase().includes(H))||((R=oe.email)==null?void 0:R.toLowerCase().includes(H))||((j=oe.first_name)==null?void 0:j.toLowerCase().includes(H))||((q=oe.last_name)==null?void 0:q.toLowerCase().includes(H))||oe.company_name&&oe.company_name.toLowerCase().includes(H)})}return $});Ks(async()=>{await D(),await N()});async function D(){var $,H,oe;f.value=!0;try{if(m.value)r.value=await e.fetchUsers();else if(C.value){const[ie,R]=await Promise.all([h1({role:"SALARIE",entrepriseId:($=e.user)==null?void 0:$.id}),h1({role:"VISITEUR",entrepriseId:(H=e.user)==null?void 0:H.id})]);r.value=[...ie,...R]}else S.value&&(r.value=await h1({role:"VISITEUR",salarieId:(oe=e.user)==null?void 0:oe.id,includeDetails:!0}))}catch(ie){console.error("Error fetching users:",ie),n.error("Erreur lors du chargement des utilisateurs")}finally{f.value=!1}}async function N(){var $,H;m.value?(s.value=await e.fetchEnterprises(),i.value=await e.fetchEntrepriseSalaries((($=e.user)==null?void 0:$.id)||0)):C.value&&(i.value=await e.fetchEntrepriseSalaries(((H=e.user)==null?void 0:H.id)||0))}function U(){l.value=null,p.value=[],o.value=!0}function G(){o.value=!1,l.value=null,p.value=[]}function J($){l.value=$,p.value=[],o.value=!0}function ee($){c.value=$,a.value=!0}function V($){return!!(m.value||C.value&&($.role==="SALARIE"||$.role==="VISITEUR")||S.value&&$.role==="VISITEUR")}async function K($){var H;try{p.value=[],l.value?(await e.updateUser(l.value.id,$),n.success("Utilisateur mis  jour avec succs")):(await e.createUser($),n.success("Utilisateur cr avec succs")),o.value=!1,await D()}catch(oe){(H=oe.response)!=null&&H.data?p.value=q7(oe.response.data):n.error("Une erreur est survenue")}}async function pe(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprim avec succs"),a.value=!1,await D()}catch{n.error("Erreur lors de la suppression de l'utilisateur")}}return($,H)=>{var oe,ie,R,j;return Ie(),je("div",bW,[P("div",_W,[P("div",wW,[P("h1",xW,[m.value?(Ie(),je("span",LW,"Gestion des utilisateurs")):C.value?(Ie(),je("span",CW,"Gestion des salaries et visiteurs")):S.value?(Ie(),je("span",SW,"Gestion des visiteurs")):Kt("",!0)]),P("button",{onClick:U,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[H[5]||(H[5]=P("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(Ie(),je("span",EW,"Nouvel utilisateur")):C.value?(Ie(),je("span",PW,"Nouveau salarie/visiteur")):S.value?(Ie(),je("span",kW,"Nouvel visiteur")):Kt("",!0)])]),P("div",MW,[P("div",AW,[P("div",TW,[m.value||C.value?(Ie(),je("div",OW,[H[9]||(H[9]=P("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),jn(P("select",{id:"role-filter","onUpdate:modelValue":H[0]||(H[0]=q=>y.role=q),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[H[6]||(H[6]=P("option",{value:""},"Tous les rles",-1)),m.value?(Ie(),je("option",DW,"Administrateur")):Kt("",!0),m.value?(Ie(),je("option",IW,"Entreprise")):Kt("",!0),H[7]||(H[7]=P("option",{value:"SALARIE"},"Salarie",-1)),H[8]||(H[8]=P("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[os,y.role]])])):Kt("",!0),m.value?(Ie(),je("div",NW,[H[11]||(H[11]=P("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),jn(P("select",{id:"entreprise-filter","onUpdate:modelValue":H[1]||(H[1]=q=>y.entreprise=q),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[H[10]||(H[10]=P("option",{value:""},"Toutes les entreprises",-1)),(Ie(!0),je(bn,null,sr(s.value,q=>(Ie(),je("option",{key:q.id,value:q.id},Ut(cn(Is)(q)),9,BW))),128))],512),[[os,y.entreprise]])])):Kt("",!0),m.value||C.value?(Ie(),je("div",RW,[H[13]||(H[13]=P("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),jn(P("select",{id:"salarie-filter","onUpdate:modelValue":H[2]||(H[2]=q=>y.salarie=q),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[H[12]||(H[12]=P("option",{value:""},"Tous les salaries",-1)),(Ie(!0),je(bn,null,sr(T.value,q=>(Ie(),je("option",{key:q.id,value:q.id},Ut(cn(Is)(q)),9,FW))),128))],512),[[os,y.salarie]])])):Kt("",!0)]),P("div",jW,[H[14]||(H[14]=P("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),jn(P("input",{type:"text",id:"search","onUpdate:modelValue":H[3]||(H[3]=q=>y.search=q),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[di,y.search]])])])]),P("div",zW,[P("div",UW,[P("table",$W,[P("thead",VW,[P("tr",null,[H[15]||(H[15]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),H[16]||(H[16]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rle ",-1)),H[17]||(H[17]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),m.value||C.value?(Ie(),je("th",HW," Entreprise ")):Kt("",!0),m.value||C.value?(Ie(),je("th",WW," Salarie ")):Kt("",!0),H[18]||(H[18]=P("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),H[19]||(H[19]=P("th",{scope:"col",class:"relative px-6 py-3"},[P("span",{class:"sr-only"},"Actions")],-1))])]),P("tbody",GW,[f.value?(Ie(),je("tr",qW,H[20]||(H[20]=[P("td",{colspan:"7",class:"py-4 px-6"},[P("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):O.value.length===0?(Ie(),je("tr",YW,H[21]||(H[21]=[P("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouv ",-1)]))):Kt("",!0),(Ie(!0),je(bn,null,sr(O.value,q=>{var re;return Ie(),je("tr",{key:q.id},[P("td",ZW,[P("div",KW,[P("div",XW,[P("div",JW,[P("span",QW,Ut(cn(Z7)(q.first_name,q.last_name)),1)])]),P("div",eG,[P("div",tG,Ut(cn(Is)(q)),1),P("div",nG,Ut(q.username),1)])])]),P("td",rG,[P("span",{class:Ei(cn(J7)())},Ut(cn(X7)(q.role)),3)]),P("td",iG,Ut(q.email),1),m.value||C.value?(Ie(),je("td",sG,[q.role==="ENTREPRISE"?(Ie(),je(bn,{key:0},[zr(" - ")],64)):q.role==="SALARIE"?(Ie(),je(bn,{key:1},[zr(Ut(q.entreprise?cn(Is)(q.entreprise):"Non assign"),1)],64)):q.role==="VISITEUR"?(Ie(),je(bn,{key:2},[zr(Ut((re=q.salarie)!=null&&re.entreprise?cn(Is)(q.salarie.entreprise):"Non assign"),1)],64)):(Ie(),je(bn,{key:3},[zr(" - ")],64))])):Kt("",!0),m.value||C.value?(Ie(),je("td",oG,[q.role==="ENTREPRISE"||q.role==="ADMIN"?(Ie(),je(bn,{key:0},[zr(" - ")],64)):q.role==="SALARIE"?(Ie(),je(bn,{key:1},[zr(" - ")],64)):(Ie(),je(bn,{key:2},[zr(Ut(q.salarie?cn(Is)(q.salarie):"Non assign"),1)],64))])):Kt("",!0),P("td",aG,[P("span",{class:Ei(cn(Q7)(q.is_active))},Ut(q.is_active?"Actif":"Inactif"),3)]),P("td",lG,[P("button",{onClick:xe=>J(q),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,uG),V(q)?(Ie(),je("button",{key:0,onClick:xe=>ee(q),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,cG)):Kt("",!0)])])}),128))])])])])]),o.value?(Ie(),je("div",hG,[Kr(aW,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":m.value,"is-entreprise":C.value,"current-salarie":S.value?(ie=(oe=cn(e).user)==null?void 0:oe.id)==null?void 0:ie.toString():void 0,"current-entreprise":C.value?(j=(R=cn(e).user)==null?void 0:R.id)==null?void 0:j.toString():void 0,"api-errors":p.value,onClose:G,onSave:K},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):Kt("",!0),a.value?(Ie(),Lo(yW,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:pe,onCancel:H[4]||(H[4]=q=>a.value=!1)})):Kt("",!0)])}}});var mE={exports:{}};const dG=SS(hI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Q4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q4(Object(n),!0).forEach(function(r){pG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B0(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B0=function(e){return typeof e}:B0=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B0(t)}function pG(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Du(){return Du=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Du.apply(this,arguments)}function gG(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function mG(t,e){if(t==null)return{};var n=gG(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vG(t){return yG(t)||bG(t)||_G(t)||wG()}function yG(t){if(Array.isArray(t))return G2(t)}function bG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _G(t,e){if(t){if(typeof t=="string")return G2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G2(t,e)}}function G2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var xG="1.14.0";function bh(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Lh=bh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),cm=bh(/Edge/i),e5=bh(/firefox/i),_g=bh(/safari/i)&&!bh(/chrome/i)&&!bh(/android/i),vE=bh(/iP(ad|od|hone)/i),LG=bh(/chrome/i)&&bh(/android/i),yE={capture:!1,passive:!1};function oi(t,e,n){t.addEventListener(e,n,!Lh&&yE)}function Qr(t,e,n){t.removeEventListener(e,n,!Lh&&yE)}function yv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function CG(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function tc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&yv(t,e):yv(t,e))||r&&t===n)return t;if(t===n)break}while(t=CG(t))}return null}var t5=/\s+/g;function Ns(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(t5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(t5," ")}}function Zn(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Yf(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Zn(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function bE(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Fc(){var t=document.scrollingElement;return t||document.documentElement}function ys(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,f,p;if(t!==window&&t.parentNode&&t!==Fc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,f=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,f=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Lh))do if(i&&i.getBoundingClientRect&&(Zn(i,"transform")!=="none"||n&&Zn(i,"position")!=="static")){var y=i.getBoundingClientRect();o-=y.top+parseInt(Zn(i,"border-top-width")),a-=y.left+parseInt(Zn(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var m=Yf(i||t),C=m&&m.a,S=m&&m.d;m&&(o/=S,a/=C,p/=C,f/=S,l=o+f,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:f}}}function n5(t,e,n){for(var r=Yh(t,!0),i=ys(t)[e];r;){var s=ys(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Fc())break;r=Yh(r,!1)}return!1}function up(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==_r.ghost&&(r||o[s]!==_r.dragged)&&tc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function c_(t,e){for(var n=t.lastElementChild;n&&(n===_r.ghost||Zn(n,"display")==="none"||e&&!yv(n,e));)n=n.previousElementSibling;return n||null}function qs(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==_r.clone&&(!e||yv(t,e))&&n++;return n}function r5(t){var e=0,n=0,r=Fc();if(t)do{var i=Yf(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function SG(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function Yh(t,e){if(!t||!t.getBoundingClientRect)return Fc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=Zn(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Fc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Fc()}function EG(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function M1(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var wg;function _E(t,e){return function(){if(!wg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),wg=setTimeout(function(){wg=void 0},e)}}}function PG(){clearTimeout(wg),wg=void 0}function wE(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function h_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function i5(t,e){Zn(t,"position","absolute"),Zn(t,"top",e.top),Zn(t,"left",e.left),Zn(t,"width",e.width),Zn(t,"height",e.height)}function A1(t){Zn(t,"position",""),Zn(t,"top",""),Zn(t,"left",""),Zn(t,"width",""),Zn(t,"height","")}var Ra="Sortable"+new Date().getTime();function kG(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(Zn(i,"display")==="none"||i===_r.ghost)){t.push({target:i,rect:ys(i)});var s=Uc({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=Yf(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(SG(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,f=c.fromRect,p=ys(c),y=c.prevFromRect,m=c.prevToRect,C=a.rect,S=Yf(c,!0);S&&(p.top-=S.f,p.left-=S.e),c.toRect=p,c.thisAnimationDuration&&M1(y,p)&&!M1(f,p)&&(C.top-p.top)/(C.left-p.left)===(f.top-p.top)/(f.left-p.left)&&(l=AG(C,y,m,i.options)),M1(p,f)||(c.prevFromRect=f,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,C,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){Zn(r,"transition",""),Zn(r,"transform","");var a=Yf(this.el),l=a&&a.a,c=a&&a.d,f=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!f,r.animatingY=!!p,Zn(r,"transform","translate3d("+f+"px,"+p+"px,0)"),this.forRepaintDummy=MG(r),Zn(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Zn(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Zn(r,"transition",""),Zn(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function MG(t){return t.offsetWidth}function AG(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Ad=[],T1={initializeByDefault:!0},hm={mount:function(e){for(var n in T1)T1.hasOwnProperty(n)&&!(n in e)&&(e[n]=T1[n]);Ad.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ad.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Ad.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Uc({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Uc({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Ad.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Du(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Ad.forEach(function(i){typeof i.eventProperties=="function"&&Du(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Ad.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function Xp(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,f=t.oldDraggableIndex,p=t.newDraggableIndex,y=t.originalEvent,m=t.putSortable,C=t.extraEventProperties;if(e=e||n&&n[Ra],!!e){var S,T=e.options,O="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Lh&&!cm?S=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(r,!0,!0)),S.to=o||n,S.from=a||n,S.item=i||n,S.clone=s,S.oldIndex=l,S.newIndex=c,S.oldDraggableIndex=f,S.newDraggableIndex=p,S.originalEvent=y,S.pullMode=m?m.lastPutMode:void 0;var D=Uc(Uc({},C),hm.getEventProperties(r,e));for(var N in D)S[N]=D[N];n&&n.dispatchEvent(S),T[O]&&T[O].call(e,S)}}var TG=["evt"],El=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=mG(r,TG);hm.pluginEvent.bind(_r)(e,n,Uc({dragEl:Mn,parentEl:Hs,ghostEl:Rr,rootEl:ms,nextEl:If,lastDownEl:R0,cloneEl:Ws,cloneHidden:Gh,dragStarted:Jp,putSortable:ua,activeSortable:_r.active,originalEvent:i,oldIndex:Wd,oldDraggableIndex:xg,newIndex:nu,newDraggableIndex:Wh,hideGhostForTarget:SE,unhideGhostForTarget:EE,cloneNowHidden:function(){Gh=!0},cloneNowShown:function(){Gh=!1},dispatchSortableEvent:function(a){tl({sortable:n,name:a,originalEvent:i})}},s))};function tl(t){Xp(Uc({putSortable:ua,cloneEl:Ws,targetEl:Mn,rootEl:ms,oldIndex:Wd,oldDraggableIndex:xg,newIndex:nu,newDraggableIndex:Wh},t))}var Mn,Hs,Rr,ms,If,R0,Ws,Gh,Wd,nu,xg,Wh,t0,ua,$d=!1,bv=!1,_v=[],Pf,Ju,O1,D1,s5,o5,Jp,Td,Lg,Cg=!1,n0=!1,F0,Ta,I1=[],q2=!1,wv=[],dy=typeof document<"u",r0=vE,a5=cm||Lh?"cssFloat":"float",OG=dy&&!LG&&!vE&&"draggable"in document.createElement("div"),xE=function(){if(dy){if(Lh)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),LE=function(e,n){var r=Zn(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=up(e,0,n),o=up(e,1,n),a=s&&Zn(s),l=o&&Zn(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ys(s).width,f=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+ys(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[a5]==="none"||o&&r[a5]==="none"&&c+f>i)?"vertical":"horizontal"},DG=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},IG=function(e,n){var r;return _v.some(function(i){var s=i[Ra].options.emptyInsertThreshold;if(!(!s||c_(i))){var o=ys(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},CE=function(e){function n(s,o){return function(a,l,c,f){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,f),o)(a,l,c,f);var y=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===y||s.join&&s.indexOf(y)>-1}}var r={},i=e.group;(!i||B0(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},SE=function(){!xE&&Rr&&Zn(Rr,"display","none")},EE=function(){!xE&&Rr&&Zn(Rr,"display","")};dy&&document.addEventListener("click",function(t){if(bv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),bv=!1,!1},!0);var kf=function(e){if(Mn){e=e.touches?e.touches[0]:e;var n=IG(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Ra]._onDragOver(r)}}},NG=function(e){Mn&&Mn.parentNode[Ra]._isOutsideThisEl(e.target)};function _r(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Du({},e),t[Ra]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return LE(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:_r.supportPointer!==!1&&"PointerEvent"in window&&!_g,emptyInsertThreshold:5};hm.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);CE(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:OG,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?oi(t,"pointerdown",this._onTapStart):(oi(t,"mousedown",this._onTapStart),oi(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(oi(t,"dragover",this),oi(t,"dragenter",this)),_v.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Du(this,kG())}_r.prototype={constructor:_r,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Td=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Mn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,f=i.filter;if(VG(r),!Mn&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&_g&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=tc(l,i.draggable,r,!1),!(l&&l.animated)&&R0!==l)){if(Wd=qs(l),xg=qs(l,i.draggable),typeof f=="function"){if(f.call(this,e,l,this)){tl({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),El("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(f&&(f=f.split(",").some(function(p){if(p=tc(c,p.trim(),r,!1),p)return tl({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),El("filter",n,{evt:e}),!0}),f)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!tc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Mn&&r.parentNode===s){var c=ys(r);if(ms=s,Mn=r,Hs=Mn.parentNode,If=Mn.nextSibling,R0=r,t0=o.group,_r.dragged=Mn,Pf={target:Mn,clientX:(n||e).clientX,clientY:(n||e).clientY},s5=Pf.clientX-c.left,o5=Pf.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Mn.style["will-change"]="all",l=function(){if(El("delayEnded",i,{evt:e}),_r.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!e5&&i.nativeDraggable&&(Mn.draggable=!0),i._triggerDragStart(e,n),tl({sortable:i,name:"choose",originalEvent:e}),Ns(Mn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(f){bE(Mn,f.trim(),N1)}),oi(a,"dragover",kf),oi(a,"mousemove",kf),oi(a,"touchmove",kf),oi(a,"mouseup",i._onDrop),oi(a,"touchend",i._onDrop),oi(a,"touchcancel",i._onDrop),e5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Mn.draggable=!0),El("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(cm||Lh))){if(_r.eventCanceled){this._onDrop();return}oi(a,"mouseup",i._disableDelayedDrag),oi(a,"touchend",i._disableDelayedDrag),oi(a,"touchcancel",i._disableDelayedDrag),oi(a,"mousemove",i._delayedDragTouchMoveHandler),oi(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&oi(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Mn&&N1(Mn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Qr(e,"mouseup",this._disableDelayedDrag),Qr(e,"touchend",this._disableDelayedDrag),Qr(e,"touchcancel",this._disableDelayedDrag),Qr(e,"mousemove",this._delayedDragTouchMoveHandler),Qr(e,"touchmove",this._delayedDragTouchMoveHandler),Qr(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?oi(document,"pointermove",this._onTouchMove):n?oi(document,"touchmove",this._onTouchMove):oi(document,"mousemove",this._onTouchMove):(oi(Mn,"dragend",this),oi(ms,"dragstart",this._onDragStart));try{document.selection?j0(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if($d=!1,ms&&Mn){El("dragStarted",this,{evt:n}),this.nativeDraggable&&oi(document,"dragover",NG);var r=this.options;!e&&Ns(Mn,r.dragClass,!1),Ns(Mn,r.ghostClass,!0),_r.active=this,e&&this._appendGhost(),tl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Ju){this._lastX=Ju.clientX,this._lastY=Ju.clientY,SE();for(var e=document.elementFromPoint(Ju.clientX,Ju.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Ju.clientX,Ju.clientY),e!==n);)n=e;if(Mn.parentNode[Ra]._isOutsideThisEl(e),n)do{if(n[Ra]){var r=void 0;if(r=n[Ra]._onDragOver({clientX:Ju.clientX,clientY:Ju.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);EE()}},_onTouchMove:function(e){if(Pf){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=Rr&&Yf(Rr,!0),a=Rr&&o&&o.a,l=Rr&&o&&o.d,c=r0&&Ta&&r5(Ta),f=(s.clientX-Pf.clientX+i.x)/(a||1)+(c?c[0]-I1[0]:0)/(a||1),p=(s.clientY-Pf.clientY+i.y)/(l||1)+(c?c[1]-I1[1]:0)/(l||1);if(!_r.active&&!$d){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Rr){o?(o.e+=f-(O1||0),o.f+=p-(D1||0)):o={a:1,b:0,c:0,d:1,e:f,f:p};var y="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Zn(Rr,"webkitTransform",y),Zn(Rr,"mozTransform",y),Zn(Rr,"msTransform",y),Zn(Rr,"transform",y),O1=f,D1=p,Ju=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Rr){var e=this.options.fallbackOnBody?document.body:ms,n=ys(Mn,!0,r0,!0,e),r=this.options;if(r0){for(Ta=e;Zn(Ta,"position")==="static"&&Zn(Ta,"transform")==="none"&&Ta!==document;)Ta=Ta.parentNode;Ta!==document.body&&Ta!==document.documentElement?(Ta===document&&(Ta=Fc()),n.top+=Ta.scrollTop,n.left+=Ta.scrollLeft):Ta=Fc(),I1=r5(Ta)}Rr=Mn.cloneNode(!0),Ns(Rr,r.ghostClass,!1),Ns(Rr,r.fallbackClass,!0),Ns(Rr,r.dragClass,!0),Zn(Rr,"transition",""),Zn(Rr,"transform",""),Zn(Rr,"box-sizing","border-box"),Zn(Rr,"margin",0),Zn(Rr,"top",n.top),Zn(Rr,"left",n.left),Zn(Rr,"width",n.width),Zn(Rr,"height",n.height),Zn(Rr,"opacity","0.8"),Zn(Rr,"position",r0?"absolute":"fixed"),Zn(Rr,"zIndex","100000"),Zn(Rr,"pointerEvents","none"),_r.ghost=Rr,e.appendChild(Rr),Zn(Rr,"transform-origin",s5/parseInt(Rr.style.width)*100+"% "+o5/parseInt(Rr.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(El("dragStart",this,{evt:e}),_r.eventCanceled){this._onDrop();return}El("setupClone",this),_r.eventCanceled||(Ws=h_(Mn),Ws.draggable=!1,Ws.style["will-change"]="",this._hideClone(),Ns(Ws,this.options.chosenClass,!1),_r.clone=Ws),r.cloneId=j0(function(){El("clone",r),!_r.eventCanceled&&(r.options.removeCloneOnHide||ms.insertBefore(Ws,Mn),r._hideClone(),tl({sortable:r,name:"clone"}))}),!n&&Ns(Mn,s.dragClass,!0),n?(bv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Qr(document,"mouseup",r._onDrop),Qr(document,"touchend",r._onDrop),Qr(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Mn)),oi(document,"drop",r),Zn(Mn,"transform","translateZ(0)")),$d=!0,r._dragStartId=j0(r._dragStarted.bind(r,n,e)),oi(document,"selectstart",r),Jp=!0,_g&&Zn(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=_r.active,f=t0===l,p=a.sort,y=ua||c,m,C=this,S=!1;if(q2)return;function T(re,xe){El(re,C,Uc({evt:e,isOwner:f,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:y,target:r,completed:D,onMove:function(_e,Z){return i0(ms,n,Mn,i,_e,ys(_e),e,Z)},changed:N},xe))}function O(){T("dragOverAnimationCapture"),C.captureAnimationState(),C!==y&&y.captureAnimationState()}function D(re){return T("dragOverCompleted",{insertion:re}),re&&(f?c._hideClone():c._showClone(C),C!==y&&(Ns(Mn,ua?ua.options.ghostClass:c.options.ghostClass,!1),Ns(Mn,a.ghostClass,!0)),ua!==C&&C!==_r.active?ua=C:C===_r.active&&ua&&(ua=null),y===C&&(C._ignoreWhileAnimating=r),C.animateAll(function(){T("dragOverAnimationComplete"),C._ignoreWhileAnimating=null}),C!==y&&(y.animateAll(),y._ignoreWhileAnimating=null)),(r===Mn&&!Mn.animated||r===n&&!r.animated)&&(Td=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(Mn.parentNode[Ra]._isOutsideThisEl(e.target),!re&&kf(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),S=!0}function N(){nu=qs(Mn),Wh=qs(Mn,a.draggable),tl({sortable:C,name:"change",toEl:n,newIndex:nu,newDraggableIndex:Wh,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=tc(r,a.draggable,n,!0),T("dragOver"),_r.eventCanceled)return S;if(Mn.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||C._ignoreWhileAnimating===r)return D(!1);if(bv=!1,c&&!a.disabled&&(f?p||(o=Hs!==ms):ua===this||(this.lastPutMode=t0.checkPull(this,c,Mn,e))&&l.checkPut(this,c,Mn,e))){if(m=this._getDirection(e,r)==="vertical",i=ys(Mn),T("dragOverValid"),_r.eventCanceled)return S;if(o)return Hs=ms,O(),this._hideClone(),T("revert"),_r.eventCanceled||(If?ms.insertBefore(Mn,If):ms.appendChild(Mn)),D(!0);var U=c_(n,a.draggable);if(!U||jG(e,m,this)&&!U.animated){if(U===Mn)return D(!1);if(U&&n===e.target&&(r=U),r&&(s=ys(r)),i0(ms,n,Mn,i,r,s,e,!!r)!==!1)return O(),n.appendChild(Mn),Hs=n,N(),D(!0)}else if(U&&FG(e,m,this)){var G=up(n,0,a,!0);if(G===Mn)return D(!1);if(r=G,s=ys(r),i0(ms,n,Mn,i,r,s,e,!1)!==!1)return O(),n.insertBefore(Mn,G),Hs=n,N(),D(!0)}else if(r.parentNode===n){s=ys(r);var J=0,ee,V=Mn.parentNode!==n,K=!DG(Mn.animated&&Mn.toRect||i,r.animated&&r.toRect||s,m),pe=m?"top":"left",$=n5(r,"top","top")||n5(Mn,"top","top"),H=$?$.scrollTop:void 0;Td!==r&&(ee=s[pe],Cg=!1,n0=!K&&a.invertSwap||V),J=zG(e,r,s,m,K?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,n0,Td===r);var oe;if(J!==0){var ie=qs(Mn);do ie-=J,oe=Hs.children[ie];while(oe&&(Zn(oe,"display")==="none"||oe===Rr))}if(J===0||oe===r)return D(!1);Td=r,Lg=J;var R=r.nextElementSibling,j=!1;j=J===1;var q=i0(ms,n,Mn,i,r,s,e,j);if(q!==!1)return(q===1||q===-1)&&(j=q===1),q2=!0,setTimeout(RG,30),O(),j&&!R?n.appendChild(Mn):r.parentNode.insertBefore(Mn,j?R:r),$&&wE($,0,H-$.scrollTop),Hs=Mn.parentNode,ee!==void 0&&!n0&&(F0=Math.abs(ee-ys(r)[pe])),N(),D(!0)}if(n.contains(Mn))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Qr(document,"mousemove",this._onTouchMove),Qr(document,"touchmove",this._onTouchMove),Qr(document,"pointermove",this._onTouchMove),Qr(document,"dragover",kf),Qr(document,"mousemove",kf),Qr(document,"touchmove",kf)},_offUpEvents:function(){var e=this.el.ownerDocument;Qr(e,"mouseup",this._onDrop),Qr(e,"touchend",this._onDrop),Qr(e,"pointerup",this._onDrop),Qr(e,"touchcancel",this._onDrop),Qr(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(nu=qs(Mn),Wh=qs(Mn,r.draggable),El("drop",this,{evt:e}),Hs=Mn&&Mn.parentNode,nu=qs(Mn),Wh=qs(Mn,r.draggable),_r.eventCanceled){this._nulling();return}$d=!1,n0=!1,Cg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Y2(this.cloneId),Y2(this._dragStartId),this.nativeDraggable&&(Qr(document,"drop",this),Qr(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_g&&Zn(document.body,"user-select",""),Zn(Mn,"transform",""),e&&(Jp&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Rr&&Rr.parentNode&&Rr.parentNode.removeChild(Rr),(ms===Hs||ua&&ua.lastPutMode!=="clone")&&Ws&&Ws.parentNode&&Ws.parentNode.removeChild(Ws),Mn&&(this.nativeDraggable&&Qr(Mn,"dragend",this),N1(Mn),Mn.style["will-change"]="",Jp&&!$d&&Ns(Mn,ua?ua.options.ghostClass:this.options.ghostClass,!1),Ns(Mn,this.options.chosenClass,!1),tl({sortable:this,name:"unchoose",toEl:Hs,newIndex:null,newDraggableIndex:null,originalEvent:e}),ms!==Hs?(nu>=0&&(tl({rootEl:Hs,name:"add",toEl:Hs,fromEl:ms,originalEvent:e}),tl({sortable:this,name:"remove",toEl:Hs,originalEvent:e}),tl({rootEl:Hs,name:"sort",toEl:Hs,fromEl:ms,originalEvent:e}),tl({sortable:this,name:"sort",toEl:Hs,originalEvent:e})),ua&&ua.save()):nu!==Wd&&nu>=0&&(tl({sortable:this,name:"update",toEl:Hs,originalEvent:e}),tl({sortable:this,name:"sort",toEl:Hs,originalEvent:e})),_r.active&&((nu==null||nu===-1)&&(nu=Wd,Wh=xg),tl({sortable:this,name:"end",toEl:Hs,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){El("nulling",this),ms=Mn=Hs=Rr=If=Ws=R0=Gh=Pf=Ju=Jp=nu=Wh=Wd=xg=Td=Lg=ua=t0=_r.dragged=_r.ghost=_r.clone=_r.active=null,wv.forEach(function(e){e.checked=!0}),wv.length=O1=D1=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Mn&&(this._onDragOver(e),BG(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],tc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||$G(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];tc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return tc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=hm.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&CE(r)},destroy:function(){El("destroy",this);var e=this.el;e[Ra]=null,Qr(e,"mousedown",this._onTapStart),Qr(e,"touchstart",this._onTapStart),Qr(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Qr(e,"dragover",this),Qr(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_v.splice(_v.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Gh){if(El("hideClone",this),_r.eventCanceled)return;Zn(Ws,"display","none"),this.options.removeCloneOnHide&&Ws.parentNode&&Ws.parentNode.removeChild(Ws),Gh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Gh){if(El("showClone",this),_r.eventCanceled)return;Mn.parentNode==ms&&!this.options.group.revertClone?ms.insertBefore(Ws,Mn):If?ms.insertBefore(Ws,If):ms.appendChild(Ws),this.options.group.revertClone&&this.animate(Mn,Ws),Zn(Ws,"display",""),Gh=!1}}};function BG(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function i0(t,e,n,r,i,s,o,a){var l,c=t[Ra],f=c.options.onMove,p;return window.CustomEvent&&!Lh&&!cm?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||ys(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),f&&(p=f.call(c,l,o)),p}function N1(t){t.draggable=!1}function RG(){q2=!1}function FG(t,e,n){var r=ys(up(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function jG(t,e,n){var r=ys(c_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function zG(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,f=r?n.top:n.left,p=r?n.bottom:n.right,y=!1;if(!o){if(a&&F0<c*i){if(!Cg&&(Lg===1?l>f+c*s/2:l<p-c*s/2)&&(Cg=!0),Cg)y=!0;else if(Lg===1?l<f+F0:l>p-F0)return-Lg}else if(l>f+c*(1-i)/2&&l<p-c*(1-i)/2)return UG(e)}return y=y||o,y&&(l<f+c*s/2||l>p-c*s/2)?l>f+c/2?1:-1:0}function UG(t){return qs(Mn)<qs(t)?1:-1}function $G(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function VG(t){wv.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&wv.push(r)}}function j0(t){return setTimeout(t,0)}function Y2(t){return clearTimeout(t)}dy&&oi(document,"touchmove",function(t){(_r.active||$d)&&t.cancelable&&t.preventDefault()});_r.utils={on:oi,off:Qr,css:Zn,find:bE,is:function(e,n){return!!tc(e,n,e,!1)},extend:EG,throttle:_E,closest:tc,toggleClass:Ns,clone:h_,index:qs,nextTick:j0,cancelNextTick:Y2,detectDirection:LE,getChild:up};_r.get=function(t){return t[Ra]};_r.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(_r.utils=Uc(Uc({},_r.utils),r.utils)),hm.mount(r)})};_r.create=function(t,e){return new _r(t,e)};_r.version=xG;var xo=[],Qp,Z2,K2=!1,B1,R1,xv,eg;function HG(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?oi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?oi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?oi(document,"touchmove",this._handleFallbackAutoScroll):oi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Qr(document,"dragover",this._handleAutoScroll):(Qr(document,"pointermove",this._handleFallbackAutoScroll),Qr(document,"touchmove",this._handleFallbackAutoScroll),Qr(document,"mousemove",this._handleFallbackAutoScroll)),l5(),z0(),PG()},nulling:function(){xv=Z2=Qp=K2=eg=B1=R1=null,xo.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(xv=n,r||this.options.forceAutoScrollFallback||cm||Lh||_g){F1(n,this.options,a,r);var l=Yh(a,!0);K2&&(!eg||s!==B1||o!==R1)&&(eg&&l5(),eg=setInterval(function(){var c=Yh(document.elementFromPoint(s,o),!0);c!==l&&(l=c,z0()),F1(n,i.options,c,r)},10),B1=s,R1=o)}else{if(!this.options.bubbleScroll||Yh(a,!0)===Fc()){z0();return}F1(n,this.options,Yh(a,!1),!1)}}},Du(t,{pluginName:"scroll",initializeByDefault:!0})}function z0(){xo.forEach(function(t){clearInterval(t.pid)}),xo=[]}function l5(){clearInterval(eg)}var F1=_E(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Fc(),c=!1,f;Z2!==n&&(Z2=n,z0(),Qp=e.scroll,f=e.scrollFn,Qp===!0&&(Qp=Yh(n,!0)));var p=0,y=Qp;do{var m=y,C=ys(m),S=C.top,T=C.bottom,O=C.left,D=C.right,N=C.width,U=C.height,G=void 0,J=void 0,ee=m.scrollWidth,V=m.scrollHeight,K=Zn(m),pe=m.scrollLeft,$=m.scrollTop;m===l?(G=N<ee&&(K.overflowX==="auto"||K.overflowX==="scroll"||K.overflowX==="visible"),J=U<V&&(K.overflowY==="auto"||K.overflowY==="scroll"||K.overflowY==="visible")):(G=N<ee&&(K.overflowX==="auto"||K.overflowX==="scroll"),J=U<V&&(K.overflowY==="auto"||K.overflowY==="scroll"));var H=G&&(Math.abs(D-i)<=o&&pe+N<ee)-(Math.abs(O-i)<=o&&!!pe),oe=J&&(Math.abs(T-s)<=o&&$+U<V)-(Math.abs(S-s)<=o&&!!$);if(!xo[p])for(var ie=0;ie<=p;ie++)xo[ie]||(xo[ie]={});(xo[p].vx!=H||xo[p].vy!=oe||xo[p].el!==m)&&(xo[p].el=m,xo[p].vx=H,xo[p].vy=oe,clearInterval(xo[p].pid),(H!=0||oe!=0)&&(c=!0,xo[p].pid=setInterval((function(){r&&this.layer===0&&_r.active._onTouchMove(xv);var R=xo[this.layer].vy?xo[this.layer].vy*a:0,j=xo[this.layer].vx?xo[this.layer].vx*a:0;typeof f=="function"&&f.call(_r.dragged.parentNode[Ra],j,R,t,xv,xo[this.layer].el)!=="continue"||wE(xo[this.layer].el,j,R)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&y!==l&&(y=Yh(y,!1)));K2=c}},30),PE=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var f=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(f.clientX,f.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function f_(){}f_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=up(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:PE};Du(f_,{pluginName:"revertOnSpill"});function d_(){}d_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:PE};Du(d_,{pluginName:"removeOnSpill"});var Eu;function WG(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;Eu=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,f=this.options;if(i&&i!==c){var p=Eu;s(i)!==!1?(Ns(i,f.swapClass,!0),Eu=i):Eu=null,p&&p!==Eu&&Ns(p,f.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;Eu&&Ns(Eu,a.swapClass,!1),Eu&&(a.swap||i&&i.options.swap)&&s!==Eu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),GG(s,Eu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){Eu=null}},Du(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Eu}}})}function GG(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=qs(t),s=qs(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Ar=[],tu=[],Bp,Qu,Rp=!1,Pl=!1,Od=!1,Xi,Fp,s0;function qG(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?oi(document,"pointerup",this._deselectMultiDrag):(oi(document,"mouseup",this._deselectMultiDrag),oi(document,"touchend",this._deselectMultiDrag)),oi(document,"keydown",this._checkKeyDown),oi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Ar.length&&Qu===e?Ar.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;Xi=r},delayEnded:function(){this.isMultiDrag=~Ar.indexOf(Xi)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Ar.length;s++)tu.push(h_(Ar[s])),tu[s].sortableIndex=Ar[s].sortableIndex,tu[s].draggable=!1,tu[s].style["will-change"]="",Ns(tu[s],this.options.selectedClass,!1),Ar[s]===Xi&&Ns(tu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ar.length&&Qu===r&&(u5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(u5(!1,i),tu.forEach(function(o){Zn(o,"display","")}),r(),s0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(tu.forEach(function(o){Zn(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),s0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&Qu&&Qu.multiDrag._deselectMultiDrag(),Ar.forEach(function(r){r.sortableIndex=qs(r)}),Ar=Ar.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Od=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Ar.forEach(function(o){o!==Xi&&Zn(o,"position","absolute")});var s=ys(Xi,!1,!0,!0);Ar.forEach(function(o){o!==Xi&&i5(o,s)}),Pl=!0,Rp=!0}i.animateAll(function(){Pl=!1,Rp=!1,r.options.animation&&Ar.forEach(function(o){A1(o)}),r.options.sort&&o0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;Pl&&~Ar.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Ar.length>1&&(Ar.forEach(function(a){s.addAnimationState({target:a,rect:Pl?ys(a):o}),A1(a),a.fromRect=o,r.removeAnimationState(a)}),Pl=!1,YG(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),Rp=!1,c.animation&&Ar.length>1&&(Pl||!i&&!o.options.sort&&!l)){var f=ys(Xi,!1,!0,!0);Ar.forEach(function(y){y!==Xi&&(i5(y,f),a.appendChild(y))}),Pl=!0}if(!i)if(Pl||o0(),Ar.length>1){var p=s0;o._showClone(r),o.options.animation&&!s0&&p&&tu.forEach(function(y){o.addAnimationState({target:y,rect:Fp}),y.fromRect=Fp,y.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Ar.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Fp=Du({},r);var o=Yf(Xi,!0);Fp.top-=o.f,Fp.left-=o.e}},dragOverAnimationComplete:function(){Pl&&(Pl=!1,o0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,f=c||this.sortable;if(r){var p=this.options,y=s.children;if(!Od)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Ns(Xi,p.selectedClass,!~Ar.indexOf(Xi)),~Ar.indexOf(Xi))Ar.splice(Ar.indexOf(Xi),1),Bp=null,Xp({sortable:o,rootEl:i,name:"deselect",targetEl:Xi});else{if(Ar.push(Xi),Xp({sortable:o,rootEl:i,name:"select",targetEl:Xi}),r.shiftKey&&Bp&&o.el.contains(Bp)){var m=qs(Bp),C=qs(Xi);if(~m&&~C&&m!==C){var S,T;for(C>m?(T=m,S=C):(T=C,S=m+1);T<S;T++)~Ar.indexOf(y[T])||(Ns(y[T],p.selectedClass,!0),Ar.push(y[T]),Xp({sortable:o,rootEl:i,name:"select",targetEl:y[T]}))}}else Bp=Xi;Qu=f}if(Od&&this.isMultiDrag){if(Pl=!1,(s[Ra].options.sort||s!==i)&&Ar.length>1){var O=ys(Xi),D=qs(Xi,":not(."+this.options.selectedClass+")");if(!Rp&&p.animation&&(Xi.thisAnimationDuration=null),f.captureAnimationState(),!Rp&&(p.animation&&(Xi.fromRect=O,Ar.forEach(function(U){if(U.thisAnimationDuration=null,U!==Xi){var G=Pl?ys(U):O;U.fromRect=G,f.addAnimationState({target:U,rect:G})}})),o0(),Ar.forEach(function(U){y[D]?s.insertBefore(U,y[D]):s.appendChild(U),D++}),l===qs(Xi))){var N=!1;Ar.forEach(function(U){if(U.sortableIndex!==qs(U)){N=!0;return}}),N&&a("update")}Ar.forEach(function(U){A1(U)}),f.animateAll()}Qu=f}(i===s||c&&c.lastPutMode!=="clone")&&tu.forEach(function(U){U.parentNode&&U.parentNode.removeChild(U)})}},nullingGlobal:function(){this.isMultiDrag=Od=!1,tu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Qr(document,"pointerup",this._deselectMultiDrag),Qr(document,"mouseup",this._deselectMultiDrag),Qr(document,"touchend",this._deselectMultiDrag),Qr(document,"keydown",this._checkKeyDown),Qr(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Od<"u"&&Od)&&Qu===this.sortable&&!(n&&tc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Ar.length;){var r=Ar[0];Ns(r,this.options.selectedClass,!1),Ar.shift(),Xp({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Du(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[Ra];!r||!r.options.multiDrag||~Ar.indexOf(n)||(Qu&&Qu!==r&&(Qu.multiDrag._deselectMultiDrag(),Qu=r),Ns(n,r.options.selectedClass,!0),Ar.push(n))},deselect:function(n){var r=n.parentNode[Ra],i=Ar.indexOf(n);!r||!r.options.multiDrag||!~i||(Ns(n,r.options.selectedClass,!1),Ar.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Ar.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Pl&&s!==Xi?o=-1:Pl?o=qs(s,":not(."+n.options.selectedClass+")"):o=qs(s),i.push({multiDragElement:s,index:o})}),{items:vG(Ar),clones:[].concat(tu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function YG(t,e){Ar.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function u5(t,e){tu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function o0(){Ar.forEach(function(t){t!==Xi&&t.parentNode&&t.parentNode.removeChild(t)})}_r.mount(new HG);_r.mount(d_,f_);const ZG=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:qG,Sortable:_r,Swap:WG,default:_r},Symbol.toStringTag,{value:"Module"})),KG=SS(ZG);(function(t,e){(function(r,i){t.exports=i(dG,KG)})(typeof self<"u"?self:Zo,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var f in a)o.d(c,f,(function(p){return a[p]}).bind(null,f));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,f){if(a(l),c===void 0)return l;switch(f){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,y){return l.call(c,p,y)};case 3:return function(p,y,m){return l.call(c,p,y,m)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,f=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(y){try{return l(y)}catch{return f.slice()}};i.exports.f=function(m){return f&&c.call(m)=="[object Window]"?p(m):l(a(m))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),f=o("fc6a"),p=o("c04e"),y=o("5135"),m=o("0cfb"),C=Object.getOwnPropertyDescriptor;s.f=a?C:function(T,O){if(T=f(T),O=p(O,!0),m)try{return C(T,O)}catch{}if(y(T,O))return c(!l.f.call(T,O),T[O])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),f=o("ae40"),p=c("reduce"),y=f("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!y},{reduce:function(C){return l(this,C,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,f){var p=c.exec;if(typeof p=="function"){var y=p.call(c,f);if(typeof y!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return y}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,f)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),f=o("9112");for(var p in l){var y=a[p],m=y&&y.prototype;if(m&&m.forEach!==c)try{f(m,"forEach",c)}catch{m.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),f=l("forEach"),p=c("forEach");i.exports=!f||!p?function(m){return a(this,m,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var f=0,p={next:function(){return{done:!!f++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(y,m){if(!m&&!c)return!1;var C=!1;try{var S={};S[l]=function(){return{next:function(){return{done:C=!0}}}},y(S)}catch{}return C}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),f=l("species");i.exports=function(p){return c>=51||!a(function(){var y=[],m=y.constructor={};return m[f]=function(){return{foo:1}},y[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(f,p){var y=a(f);return y<0?l(y+p,0):c(y,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),f=o("6eeb"),p=o("ce4e"),y=o("e893"),m=o("94ca");i.exports=function(C,S){var T=C.target,O=C.global,D=C.stat,N,U,G,J,ee,V;if(O?U=a:D?U=a[T]||p(T,{}):U=(a[T]||{}).prototype,U)for(G in S){if(ee=S[G],C.noTargetGet?(V=l(U,G),J=V&&V.value):J=U[G],N=m(O?G:T+(D?".":"#")+G,C.forced),!N&&J!==void 0){if(typeof ee==typeof J)continue;y(ee,J)}(C.sham||J&&J.sham)&&c(ee,"sham",!0),f(U,G,ee,C)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),f=o("ad6d"),p="toString",y=RegExp.prototype,m=y[p],C=c(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),S=m.name!=p;(C||S)&&a(RegExp.prototype,p,function(){var O=l(this),D=String(O.source),N=O.flags,U=String(N===void 0&&O instanceof RegExp&&!("flags"in y)?f.call(O):N);return"/"+D+"/"+U},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),f=o("5a34"),p=o("1d80"),y=o("ab13"),m=o("c430"),C="".startsWith,S=Math.min,T=y("startsWith"),O=!m&&!T&&!!function(){var D=l(String.prototype,"startsWith");return D&&!D.writable}();a({target:"String",proto:!0,forced:!O&&!T},{startsWith:function(N){var U=String(p(this));f(N);var G=c(S(arguments.length>1?arguments[1]:void 0,U.length)),J=String(N);return C?C.call(U,J,G):U.slice(G,G+J.length)===J}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,f=c&&c.versions,p=f&&f.v8,y,m;p?(y=p.split("."),m=y[0]+y[1]):l&&(y=l.match(/Edge\/(\d+)/),(!y||y[1]>=74)&&(y=l.match(/Chrome\/(\d+)/),y&&(m=y[1]))),i.exports=m&&+m},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),f=c("iterator");i.exports=function(p){if(p!=null)return p[f]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),f=o("df75");i.exports=a?Object.defineProperties:function(y,m){c(y);for(var C=f(m),S=C.length,T=0,O;S>T;)l.f(y,O=C[T++],m[O]);return y}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),f="String Iterator",p=l.set,y=l.getterFor(f);c(String,"String",function(m){p(this,{type:f,string:String(m),index:0})},function(){var C=y(this),S=C.string,T=C.index,O;return T>=S.length?{value:void 0,done:!0}:(O=a(S,T),C.index+=O.length,{value:O,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(f){return l(f)=="String"?c.call(f,""):Object(f)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),f=a("unscopables"),p=Array.prototype;p[f]==null&&c.f(p,f,{configurable:!0,value:l(null)}),i.exports=function(y){p[f][y]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),f=c("match");i.exports=function(p){var y;return a(p)&&((y=p[f])!==void 0?!!y:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),f=function(p){return function(y,m,C){var S=a(y),T=l(S.length),O=c(C,T),D;if(p&&m!=m){for(;T>O;)if(D=S[O++],D!=D)return!0}else for(;T>O;O++)if((p||O in S)&&S[O]===m)return p||O||0;return!p&&-1}};i.exports={includes:f(!0),indexOf:f(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),f=o("ae40"),p=c("filter"),y=f("filter");a({target:"Array",proto:!0,forced:!p||!y},{filter:function(C){return l(this,C,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),f=o("e95a"),p=o("50c4"),y=o("8418"),m=o("35a1");i.exports=function(S){var T=l(S),O=typeof this=="function"?this:Array,D=arguments.length,N=D>1?arguments[1]:void 0,U=N!==void 0,G=m(T),J=0,ee,V,K,pe,$,H;if(U&&(N=a(N,D>2?arguments[2]:void 0,2)),G!=null&&!(O==Array&&f(G)))for(pe=G.call(T),$=pe.next,V=new O;!(K=$.call(pe)).done;J++)H=U?c(pe,N,[K.value,J],!0):K.value,y(V,J,H);else for(ee=p(T.length),V=new O(ee);ee>J;J++)H=U?N(T[J],J):T[J],y(V,J,H);return V.length=J,V}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(f){return l(f)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),f=o("50c4"),p=o("a691"),y=o("1d80"),m=o("8aa5"),C=o("14c3"),S=Math.max,T=Math.min,O=Math.floor,D=/\$([$&'`]|\d\d?|<[^>]*>)/g,N=/\$([$&'`]|\d\d?)/g,U=function(G){return G===void 0?G:String(G)};a("replace",2,function(G,J,ee,V){var K=V.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,pe=V.REPLACE_KEEPS_$0,$=K?"$":"$0";return[function(ie,R){var j=y(this),q=ie==null?void 0:ie[G];return q!==void 0?q.call(ie,j,R):J.call(String(j),ie,R)},function(oe,ie){if(!K&&pe||typeof ie=="string"&&ie.indexOf($)===-1){var R=ee(J,oe,this,ie);if(R.done)return R.value}var j=l(oe),q=String(this),re=typeof ie=="function";re||(ie=String(ie));var xe=j.global;if(xe){var be=j.unicode;j.lastIndex=0}for(var _e=[];;){var Z=C(j,q);if(Z===null||(_e.push(Z),!xe))break;var ae=String(Z[0]);ae===""&&(j.lastIndex=m(q,f(j.lastIndex),be))}for(var ce="",de=0,ge=0;ge<_e.length;ge++){Z=_e[ge];for(var Ee=String(Z[0]),Ue=S(T(p(Z.index),q.length),0),Ne=[],rt=1;rt<Z.length;rt++)Ne.push(U(Z[rt]));var gt=Z.groups;if(re){var _t=[Ee].concat(Ne,Ue,q);gt!==void 0&&_t.push(gt);var le=String(ie.apply(void 0,_t))}else le=H(Ee,q,Ue,Ne,gt,ie);Ue>=de&&(ce+=q.slice(de,Ue)+le,de=Ue+Ee.length)}return ce+q.slice(de)}];function H(oe,ie,R,j,q,re){var xe=R+oe.length,be=j.length,_e=N;return q!==void 0&&(q=c(q),_e=D),J.call(re,_e,function(Z,ae){var ce;switch(ae.charAt(0)){case"$":return"$";case"&":return oe;case"`":return ie.slice(0,R);case"'":return ie.slice(xe);case"<":ce=q[ae.slice(1,-1)];break;default:var de=+ae;if(de===0)return Z;if(de>be){var ge=O(de/10);return ge===0?Z:ge<=be?j[ge-1]===void 0?ae.charAt(1):j[ge-1]+ae.charAt(1):Z}ce=j[de-1]}return ce===void 0?"":ce})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,f){return l[c]||(l[c]=f!==void 0?f:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),f=o("825a");i.exports=a("Reflect","ownKeys")||function(y){var m=l.f(f(y)),C=c.f;return C?m.concat(C(y)):m}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),f=o("50c4"),p=o("1c0b"),y=o("65f0");a({target:"Array",proto:!0},{flatMap:function(C){var S=c(this),T=f(S.length),O;return p(C),O=y(S,0),O.length=l(O,S,S,T,0,1,C,arguments.length>1?arguments[1]:void 0),O}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(f){return function(p,y){var m=String(l(p)),C=a(y),S=m.length,T,O;return C<0||C>=S?f?"":void 0:(T=m.charCodeAt(C),T<55296||T>56319||C+1===S||(O=m.charCodeAt(C+1))<56320||O>57343?f?m.charAt(C):T:f?m.slice(C,C+2):(T-55296<<10)+(O-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),f=c("species");i.exports=function(p,y){var m;return l(p)&&(m=p.constructor,typeof m=="function"&&(m===Array||l(m.prototype))?m=void 0:a(m)&&(m=m[f],m===null&&(m=void 0))),new(m===void 0?Array:m)(y===0?0:y)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),f=o("9112"),p=o("5135"),y=o("f772"),m=o("d012"),C=l.WeakMap,S,T,O,D=function(K){return O(K)?T(K):S(K,{})},N=function(K){return function(pe){var $;if(!c(pe)||($=T(pe)).type!==K)throw TypeError("Incompatible receiver, "+K+" required");return $}};if(a){var U=new C,G=U.get,J=U.has,ee=U.set;S=function(K,pe){return ee.call(U,K,pe),pe},T=function(K){return G.call(U,K)||{}},O=function(K){return J.call(U,K)}}else{var V=y("state");m[V]=!0,S=function(K,pe){return f(K,V,pe),pe},T=function(K){return p(K,V)?K[V]:{}},O=function(K){return p(K,V)}}i.exports={set:S,get:T,has:O,enforce:D,getterFor:N}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),f=o("ce4e"),p=o("8925"),y=o("69f3"),m=y.get,C=y.enforce,S=String(String).split("String");(i.exports=function(T,O,D,N){var U=N?!!N.unsafe:!1,G=N?!!N.enumerable:!1,J=N?!!N.noTargetGet:!1;if(typeof D=="function"&&(typeof O=="string"&&!c(D,"name")&&l(D,"name",O),C(D).source=S.join(typeof O=="string"?O:"")),T===a){G?T[O]=D:f(O,D);return}else U?!J&&T[O]&&(G=!0):delete T[O];G?T[O]=D:l(T,O,D)})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),f=o("d1e7").f,p=function(y){return function(m){for(var C=c(m),S=l(C),T=S.length,O=0,D=[],N;T>O;)N=S[O++],(!a||f.call(C,N))&&D.push(y?[N,C[N]]:C[N]);return D}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),f=o("9bf2").f;i.exports=function(p){var y=a.Symbol||(a.Symbol={});l(y,p)||f(y,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),f=o("d012"),p=o("1be4"),y=o("cc12"),m=o("f772"),C=">",S="<",T="prototype",O="script",D=m("IE_PROTO"),N=function(){},U=function(K){return S+O+C+K+S+"/"+O+C},G=function(K){K.write(U("")),K.close();var pe=K.parentWindow.Object;return K=null,pe},J=function(){var K=y("iframe"),pe="java"+O+":",$;return K.style.display="none",p.appendChild(K),K.src=String(pe),$=K.contentWindow.document,$.open(),$.write(U("document.F=Object")),$.close(),$.F},ee,V=function(){try{ee=document.domain&&new ActiveXObject("htmlfile")}catch{}V=ee?G(ee):J();for(var K=c.length;K--;)delete V[T][c[K]];return V()};f[D]=!0,i.exports=Object.create||function(pe,$){var H;return pe!==null?(N[T]=a(pe),H=new N,N[T]=null,H[D]=pe):H=V(),$===void 0?H:l(H,$)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),f=o("d2bb"),p=o("d44e"),y=o("9112"),m=o("6eeb"),C=o("b622"),S=o("c430"),T=o("3f8c"),O=o("ae93"),D=O.IteratorPrototype,N=O.BUGGY_SAFARI_ITERATORS,U=C("iterator"),G="keys",J="values",ee="entries",V=function(){return this};i.exports=function(K,pe,$,H,oe,ie,R){l($,pe,H);var j=function(ge){if(ge===oe&&_e)return _e;if(!N&&ge in xe)return xe[ge];switch(ge){case G:return function(){return new $(this,ge)};case J:return function(){return new $(this,ge)};case ee:return function(){return new $(this,ge)}}return function(){return new $(this)}},q=pe+" Iterator",re=!1,xe=K.prototype,be=xe[U]||xe["@@iterator"]||oe&&xe[oe],_e=!N&&be||j(oe),Z=pe=="Array"&&xe.entries||be,ae,ce,de;if(Z&&(ae=c(Z.call(new K)),D!==Object.prototype&&ae.next&&(!S&&c(ae)!==D&&(f?f(ae,D):typeof ae[U]!="function"&&y(ae,U,V)),p(ae,q,!0,!0),S&&(T[q]=V))),oe==J&&be&&be.name!==J&&(re=!0,_e=function(){return be.call(this)}),(!S||R)&&xe[U]!==_e&&y(xe,U,_e),T[pe]=_e,oe)if(ce={values:j(J),keys:ie?_e:j(G),entries:j(ee)},R)for(de in ce)(N||re||!(de in xe))&&m(xe,de,ce[de]);else a({target:pe,proto:!0,forced:N||re},ce);return ce}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(f,p,y){var m=a(p);m in f?l.f(f,m,c(0,y)):f[m]=y}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(f,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function f(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==f&&document.currentScript)return document.currentScript;try{throw new Error}catch(ee){var y=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,m=/@([^@]*):(\d+):(\d+)\s*$/ig,C=y.exec(ee.stack)||m.exec(ee.stack),S=C&&C[1]||!1,T=C&&C[2]||!1,O=document.location.href.replace(document.location.hash,""),D,N,U,G=document.getElementsByTagName("script");S===O&&(D=document.documentElement.outerHTML,N=new RegExp("(?:[^\\n]+?\\n){0,"+(T-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),U=D.replace(N,"$1").trim());for(var J=0;J<G.length;J++)if(G[J].readyState==="interactive"||G[J].src===S||S===O&&G[J].innerHTML&&G[J].innerHTML.trim()===U)return G[J];return null}}return f})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,f){return c+(f?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(f,p,y){return l.f(f,p,c(1,y))}:function(f,p,y){return f[p]=y,f}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,f=String.prototype.replace,p=c,y=function(){var T=/a/,O=/b*/g;return c.call(T,"a"),c.call(O,"a"),T.lastIndex!==0||O.lastIndex!==0}(),m=l.UNSUPPORTED_Y||l.BROKEN_CARET,C=/()??/.exec("")[1]!==void 0,S=y||C||m;S&&(p=function(O){var D=this,N,U,G,J,ee=m&&D.sticky,V=a.call(D),K=D.source,pe=0,$=O;return ee&&(V=V.replace("y",""),V.indexOf("g")===-1&&(V+="g"),$=String(O).slice(D.lastIndex),D.lastIndex>0&&(!D.multiline||D.multiline&&O[D.lastIndex-1]!==`
`)&&(K="(?: "+K+")",$=" "+$,pe++),U=new RegExp("^(?:"+K+")",V)),C&&(U=new RegExp("^"+K+"$(?!\\s)",V)),y&&(N=D.lastIndex),G=c.call(ee?U:D,$),ee?G?(G.input=G.input.slice(pe),G[0]=G[0].slice(pe),G.index=D.lastIndex,D.lastIndex+=G[0].length):D.lastIndex=0:y&&G&&(D.lastIndex=D.global?G.index+G[0].length:N),C&&G&&G.length>1&&f.call(G[0],U,function(){for(J=1;J<arguments.length-2;J++)arguments[J]===void 0&&(G[J]=void 0)}),G}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(C,S){var T=p[f(C)];return T==m?!0:T==y?!1:typeof S=="function"?a(S):!!S},f=c.normalize=function(C){return String(C).replace(l,".").toLowerCase()},p=c.data={},y=c.NATIVE="N",m=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),f=o("861d"),p=o("7b0b"),y=o("50c4"),m=o("8418"),C=o("65f0"),S=o("1dde"),T=o("b622"),O=o("2d00"),D=T("isConcatSpreadable"),N=9007199254740991,U="Maximum allowed index exceeded",G=O>=51||!l(function(){var K=[];return K[D]=!1,K.concat()[0]!==K}),J=S("concat"),ee=function(K){if(!f(K))return!1;var pe=K[D];return pe!==void 0?!!pe:c(K)},V=!G||!J;a({target:"Array",proto:!0,forced:V},{concat:function(pe){var $=p(this),H=C($,0),oe=0,ie,R,j,q,re;for(ie=-1,j=arguments.length;ie<j;ie++)if(re=ie===-1?$:arguments[ie],ee(re)){if(q=y(re.length),oe+q>N)throw TypeError(U);for(R=0;R<q;R++,oe++)R in re&&m(H,oe,re[R])}else{if(oe>=N)throw TypeError(U);m(H,oe++,re)}return H.length=oe,H}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,f,p){try{return p?c(a(f)[0],f[1]):c(f)}catch(m){var y=l.return;throw y!==void 0&&a(y.call(l)),m}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),f=o("c04e"),p=Object.defineProperty;s.f=a?p:function(m,C,S){if(c(m),C=f(C,!0),c(S),l)try{return p(m,C,S)}catch{}if("get"in S||"set"in S)throw TypeError("Accessors not supported");return"value"in S&&(m[C]=S.value),m}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),f=o("d44e"),p=o("3f8c"),y=function(){return this};i.exports=function(m,C,S){var T=C+" Iterator";return m.prototype=l(a,{next:c(1,S)}),f(m,T,!1,!0),p[T]=y,m}},"9f7f":function(i,s,o){var a=o("d039");function l(c,f){return RegExp(c,f)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),f=function(p,y,m,C,S,T,O,D){for(var N=S,U=0,G=O?c(O,D,3):!1,J;U<C;){if(U in m){if(J=G?G(m[U],U,y):m[U],T>0&&a(J))N=f(p,y,J,l(J.length),N,T-1)-1;else{if(N>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[N]=J}N++}U++}return N};i.exports=f},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),f=o("50c4"),p=o("7b0b"),y=o("65f0"),m=o("8418"),C=o("1dde"),S=o("ae40"),T=C("splice"),O=S("splice",{ACCESSORS:!0,0:0,1:2}),D=Math.max,N=Math.min,U=9007199254740991,G="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!T||!O},{splice:function(ee,V){var K=p(this),pe=f(K.length),$=l(ee,pe),H=arguments.length,oe,ie,R,j,q,re;if(H===0?oe=ie=0:H===1?(oe=0,ie=pe-$):(oe=H-2,ie=N(D(c(V),0),pe-$)),pe+oe-ie>U)throw TypeError(G);for(R=y(K,ie),j=0;j<ie;j++)q=$+j,q in K&&m(R,j,K[q]);if(R.length=ie,oe<ie){for(j=$;j<pe-ie;j++)q=j+ie,re=j+oe,q in K?K[re]=K[q]:delete K[re];for(j=pe;j>pe-ie+oe;j--)delete K[j-1]}else if(oe>ie)for(j=pe-ie;j>$;j--)q=j+ie-1,re=j+oe-1,q in K?K[re]=K[q]:delete K[re];for(j=0;j<oe;j++)K[j+$]=arguments[j+2];return K.length=pe-ie+oe,R}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),f=o("c430"),p=o("83ab"),y=o("4930"),m=o("fdbf"),C=o("d039"),S=o("5135"),T=o("e8b5"),O=o("861d"),D=o("825a"),N=o("7b0b"),U=o("fc6a"),G=o("c04e"),J=o("5c6c"),ee=o("7c73"),V=o("df75"),K=o("241c"),pe=o("057f"),$=o("7418"),H=o("06cf"),oe=o("9bf2"),ie=o("d1e7"),R=o("9112"),j=o("6eeb"),q=o("5692"),re=o("f772"),xe=o("d012"),be=o("90e3"),_e=o("b622"),Z=o("e538"),ae=o("746f"),ce=o("d44e"),de=o("69f3"),ge=o("b727").forEach,Ee=re("hidden"),Ue="Symbol",Ne="prototype",rt=_e("toPrimitive"),gt=de.set,_t=de.getterFor(Ue),le=Object[Ne],se=l.Symbol,ue=c("JSON","stringify"),Q=H.f,ke=oe.f,Ve=pe.f,Xe=ie.f,lt=q("symbols"),at=q("op-symbols"),pt=q("string-to-symbol-registry"),jt=q("symbol-to-string-registry"),Bt=q("wks"),qt=l.QObject,Jt=!qt||!qt[Ne]||!qt[Ne].findChild,gn=p&&C(function(){return ee(ke({},"a",{get:function(){return ke(this,"a",{value:7}).a}})).a!=7})?function(vn,tn,hn){var Bn=Q(le,tn);Bn&&delete le[tn],ke(vn,tn,hn),Bn&&vn!==le&&ke(le,tn,Bn)}:ke,Cn=function(vn,tn){var hn=lt[vn]=ee(se[Ne]);return gt(hn,{type:Ue,tag:vn,description:tn}),p||(hn.description=tn),hn},Ye=m?function(vn){return typeof vn=="symbol"}:function(vn){return Object(vn)instanceof se},st=function(tn,hn,Bn){tn===le&&st(at,hn,Bn),D(tn);var Jn=G(hn,!0);return D(Bn),S(lt,Jn)?(Bn.enumerable?(S(tn,Ee)&&tn[Ee][Jn]&&(tn[Ee][Jn]=!1),Bn=ee(Bn,{enumerable:J(0,!1)})):(S(tn,Ee)||ke(tn,Ee,J(1,{})),tn[Ee][Jn]=!0),gn(tn,Jn,Bn)):ke(tn,Jn,Bn)},Qe=function(tn,hn){D(tn);var Bn=U(hn),Jn=V(Bn).concat(_n(Bn));return ge(Jn,function(ar){(!p||Yt.call(Bn,ar))&&st(tn,ar,Bn[ar])}),tn},$t=function(tn,hn){return hn===void 0?ee(tn):Qe(ee(tn),hn)},Yt=function(tn){var hn=G(tn,!0),Bn=Xe.call(this,hn);return this===le&&S(lt,hn)&&!S(at,hn)?!1:Bn||!S(this,hn)||!S(lt,hn)||S(this,Ee)&&this[Ee][hn]?Bn:!0},wn=function(tn,hn){var Bn=U(tn),Jn=G(hn,!0);if(!(Bn===le&&S(lt,Jn)&&!S(at,Jn))){var ar=Q(Bn,Jn);return ar&&S(lt,Jn)&&!(S(Bn,Ee)&&Bn[Ee][Jn])&&(ar.enumerable=!0),ar}},mn=function(tn){var hn=Ve(U(tn)),Bn=[];return ge(hn,function(Jn){!S(lt,Jn)&&!S(xe,Jn)&&Bn.push(Jn)}),Bn},_n=function(tn){var hn=tn===le,Bn=Ve(hn?at:U(tn)),Jn=[];return ge(Bn,function(ar){S(lt,ar)&&(!hn||S(le,ar))&&Jn.push(lt[ar])}),Jn};if(y||(se=function(){if(this instanceof se)throw TypeError("Symbol is not a constructor");var tn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),hn=be(tn),Bn=function(Jn){this===le&&Bn.call(at,Jn),S(this,Ee)&&S(this[Ee],hn)&&(this[Ee][hn]=!1),gn(this,hn,J(1,Jn))};return p&&Jt&&gn(le,hn,{configurable:!0,set:Bn}),Cn(hn,tn)},j(se[Ne],"toString",function(){return _t(this).tag}),j(se,"withoutSetter",function(vn){return Cn(be(vn),vn)}),ie.f=Yt,oe.f=st,H.f=wn,K.f=pe.f=mn,$.f=_n,Z.f=function(vn){return Cn(_e(vn),vn)},p&&(ke(se[Ne],"description",{configurable:!0,get:function(){return _t(this).description}}),f||j(le,"propertyIsEnumerable",Yt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!y,sham:!y},{Symbol:se}),ge(V(Bt),function(vn){ae(vn)}),a({target:Ue,stat:!0,forced:!y},{for:function(vn){var tn=String(vn);if(S(pt,tn))return pt[tn];var hn=se(tn);return pt[tn]=hn,jt[hn]=tn,hn},keyFor:function(tn){if(!Ye(tn))throw TypeError(tn+" is not a symbol");if(S(jt,tn))return jt[tn]},useSetter:function(){Jt=!0},useSimple:function(){Jt=!1}}),a({target:"Object",stat:!0,forced:!y,sham:!p},{create:$t,defineProperty:st,defineProperties:Qe,getOwnPropertyDescriptor:wn}),a({target:"Object",stat:!0,forced:!y},{getOwnPropertyNames:mn,getOwnPropertySymbols:_n}),a({target:"Object",stat:!0,forced:C(function(){$.f(1)})},{getOwnPropertySymbols:function(tn){return $.f(N(tn))}}),ue){var Rn=!y||C(function(){var vn=se();return ue([vn])!="[null]"||ue({a:vn})!="{}"||ue(Object(vn))!="{}"});a({target:"JSON",stat:!0,forced:Rn},{stringify:function(tn,hn,Bn){for(var Jn=[tn],ar=1,zn;arguments.length>ar;)Jn.push(arguments[ar++]);if(zn=hn,!(!O(hn)&&tn===void 0||Ye(tn)))return T(hn)||(hn=function(Lr,ns){if(typeof zn=="function"&&(ns=zn.call(this,Lr,ns)),!Ye(ns))return ns}),Jn[1]=hn,ue.apply(null,Jn)}})}se[Ne][rt]||R(se[Ne],rt,se[Ne].valueOf),ce(se,Ue),xe[Ee]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),f=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:f},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var f=[][l];return!!f&&a(function(){f.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var f=/./;try{"/./"[c](f)}catch{try{return f[l]=!1,"/./"[c](f)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),f=Object.defineProperty,p={},y=function(m){throw m};i.exports=function(m,C){if(c(p,m))return p[m];C||(C={});var S=[][m],T=c(C,"ACCESSORS")?C.ACCESSORS:!1,O=c(C,0)?C[0]:y,D=c(C,1)?C[1]:void 0;return p[m]=!!S&&!l(function(){if(T&&!a)return!0;var N={length:-1};T?f(N,1,{enumerable:!0,get:y}):N[1]=1,S.call(N,O,D)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),f=o("b622"),p=o("c430"),y=f("iterator"),m=!1,C=function(){return this},S,T,O;[].keys&&(O=[].keys(),"next"in O?(T=a(a(O)),T!==Object.prototype&&(S=T)):m=!0),S==null&&(S={}),!p&&!c(S,y)&&l(S,y,C),i.exports={IteratorPrototype:S,BUGGY_SAFARI_ITERATORS:m}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,f=c.toString,p=/^\s*function ([^ (]*)/,y="name";a&&!(y in c)&&l(c,y,{configurable:!0,get:function(){try{return f.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),f=o("90e3"),p=o("4930"),y=o("fdbf"),m=l("wks"),C=a.Symbol,S=y?C:C&&C.withoutSetter||f;i.exports=function(T){return c(m,T)||(p&&c(C,T)?m[T]=C[T]:m[T]=S("Symbol."+T)),m[T]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),f=o("d039"),p=f(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(m){return c(l(m))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),f=o("50c4"),p=o("65f0"),y=[].push,m=function(C){var S=C==1,T=C==2,O=C==3,D=C==4,N=C==6,U=C==5||N;return function(G,J,ee,V){for(var K=c(G),pe=l(K),$=a(J,ee,3),H=f(pe.length),oe=0,ie=V||p,R=S?ie(G,H):T?ie(G,0):void 0,j,q;H>oe;oe++)if((U||oe in pe)&&(j=pe[oe],q=$(j,oe,K),C)){if(S)R[oe]=q;else if(q)switch(C){case 3:return!0;case 5:return j;case 6:return oe;case 2:y.call(R,j)}else if(D)return!1}return N?-1:O||D?D:R}};i.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var f,p;if(c&&typeof(f=l.toString)=="function"&&!a(p=f.call(l))||typeof(f=l.valueOf)=="function"&&!a(p=f.call(l))||!c&&typeof(f=l.toString)=="function"&&!a(p=f.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",f=a[c]||l(c,{});i.exports=f},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),f=o("ae40"),p="findIndex",y=!0,m=f(p);p in[]&&Array(1)[p](function(){y=!1}),a({target:"Array",proto:!0,forced:y||!m},{findIndex:function(S){return l(this,S,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),f=o("ae40"),p=[].indexOf,y=!!p&&1/[1].indexOf(1,-0)<0,m=c("indexOf"),C=f("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:y||!m||!C},{indexOf:function(T){return y?p.apply(this,arguments)||0:l(this,T,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,f=o("d012");i.exports=function(p,y){var m=l(p),C=0,S=[],T;for(T in m)!a(f,T)&&a(m,T)&&S.push(T);for(;y.length>C;)a(m,T=y[C++])&&(~c(S,T)||S.push(T));return S}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),f=o("ae40"),p=f("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,f=l(c)&&l(c.createElement);i.exports=function(p){return f?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,f){try{l(a,c,f)}catch{a[c]=f}return f}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(f){return typeof f=="function"?f:void 0};i.exports=function(f,p){return arguments.length<2?c(a[f])||c(l[f]):a[f]&&a[f][p]||l[f]&&l[f][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var y=l(this,p);return!!y&&y.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,f={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(f,[]),c=f instanceof Array}catch{}return function(m,C){return a(m),l(C),c?p.call(m,C):m.__proto__=C,m}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),f=c("toStringTag");i.exports=function(p,y,m){p&&!l(p=m?p:p.prototype,f)&&a(p,f,{configurable:!0,value:y})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),f=o("50c4"),p=function(y){return function(m,C,S,T){a(C);var O=l(m),D=c(O),N=f(O.length),U=y?N-1:0,G=y?-1:1;if(S<2)for(;;){if(U in D){T=D[U],U+=G;break}if(U+=G,y?U<0:N<=U)throw TypeError("Reduce of empty array with no initial value")}for(;y?U>=0:N>U;U+=G)U in D&&(T=C(T,D[U],U,O));return T}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),f=o("9263"),p=o("9112"),y=c("species"),m=!l(function(){var D=/./;return D.exec=function(){var N=[];return N.groups={a:"7"},N},"".replace(D,"$<a>")!=="7"}),C=function(){return"a".replace(/./,"$0")==="$0"}(),S=c("replace"),T=function(){return/./[S]?/./[S]("a","$0")==="":!1}(),O=!l(function(){var D=/(?:)/,N=D.exec;D.exec=function(){return N.apply(this,arguments)};var U="ab".split(D);return U.length!==2||U[0]!=="a"||U[1]!=="b"});i.exports=function(D,N,U,G){var J=c(D),ee=!l(function(){var oe={};return oe[J]=function(){return 7},""[D](oe)!=7}),V=ee&&!l(function(){var oe=!1,ie=/a/;return D==="split"&&(ie={},ie.constructor={},ie.constructor[y]=function(){return ie},ie.flags="",ie[J]=/./[J]),ie.exec=function(){return oe=!0,null},ie[J](""),!oe});if(!ee||!V||D==="replace"&&!(m&&C&&!T)||D==="split"&&!O){var K=/./[J],pe=U(J,""[D],function(oe,ie,R,j,q){return ie.exec===f?ee&&!q?{done:!0,value:K.call(ie,R,j)}:{done:!0,value:oe.call(R,ie,j)}:{done:!1}},{REPLACE_KEEPS_$0:C,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:T}),$=pe[0],H=pe[1];a(String.prototype,D,$),a(RegExp.prototype,J,N==2?function(oe,ie){return H.call(oe,this,ie)}:function(oe){return H.call(oe,this)})}G&&p(RegExp.prototype[J],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),f=o("ae40"),p=c("map"),y=f("map");a({target:"Array",proto:!0,forced:!p||!y},{map:function(C){return l(this,C,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),f=o("fc6a"),p=o("06cf"),y=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(C){for(var S=f(C),T=p.f,O=c(S),D={},N=0,U,G;O.length>N;)G=T(S,U=O[N++]),G!==void 0&&y(D,U,G);return D}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),f=o("9112"),p=o("b622"),y=p("iterator"),m=p("toStringTag"),C=c.values;for(var S in l){var T=a[S],O=T&&T.prototype;if(O){if(O[y]!==C)try{f(O,y,C)}catch{O[y]=C}if(O[m]||f(O,m,S),l[S]){for(var D in c)if(O[D]!==c[D])try{f(O,D,c[D])}catch{O[D]=c[D]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(f){return a(f,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),f=o("5135"),p=o("861d"),y=o("9bf2").f,m=o("e893"),C=c.Symbol;if(l&&typeof C=="function"&&(!("description"in C.prototype)||C().description!==void 0)){var S={},T=function(){var J=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),ee=this instanceof T?new C(J):J===void 0?C():C(J);return J===""&&(S[ee]=!0),ee};m(T,C);var O=T.prototype=C.prototype;O.constructor=T;var D=O.toString,N=String(C("test"))=="Symbol(test)",U=/^Symbol\((.*)\)[^)]+$/;y(O,"description",{configurable:!0,get:function(){var J=p(this)?this.valueOf():this,ee=D.call(J);if(f(S,J))return"";var V=N?ee.slice(7,-1):ee.replace(U,"$1");return V===""?void 0:V}}),a({global:!0,forced:!0},{Symbol:T})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),f=o("e177"),p=c("IE_PROTO"),y=Object.prototype;i.exports=f?Object.getPrototypeOf:function(m){return m=l(m),a(m,p)?m[p]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?y:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),f=o("69f3"),p=o("7dd0"),y="Array Iterator",m=f.set,C=f.getterFor(y);i.exports=p(Array,"Array",function(S,T){m(this,{type:y,target:a(S),index:0,kind:T})},function(){var S=C(this),T=S.target,O=S.kind,D=S.index++;return!T||D>=T.length?(S.target=void 0,{value:void 0,done:!0}):O=="keys"?{value:D,done:!1}:O=="values"?{value:T[D],done:!1}:{value:[D,T[D]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),f=o("06cf").f,p=o("83ab"),y=l(function(){f(1)}),m=!p||y;a({target:"Object",stat:!0,forced:m,sham:!p},{getOwnPropertyDescriptor:function(S,T){return f(c(S),T)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),f=o("9bf2");i.exports=function(p,y){for(var m=l(y),C=f.f,S=c.f,T=0;T<m.length;T++){var O=m[T];a(p,O)||C(p,O,S(y,O))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),f=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||f[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),f=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",y=function(m,C){try{return m[C]}catch{}};i.exports=a?l:function(m){var C,S,T;return m===void 0?"Undefined":m===null?"Null":typeof(S=y(C=Object(m),f))=="string"?S:p?l(C):(T=l(C))=="Object"&&typeof C.callee=="function"?"Arguments":T}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(f){return c[f]||(c[f]=l(f))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function f(Ye,st,Qe){return st in Ye?Object.defineProperty(Ye,st,{value:Qe,enumerable:!0,configurable:!0,writable:!0}):Ye[st]=Qe,Ye}function p(Ye,st){var Qe=Object.keys(Ye);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(Ye);st&&($t=$t.filter(function(Yt){return Object.getOwnPropertyDescriptor(Ye,Yt).enumerable})),Qe.push.apply(Qe,$t)}return Qe}function y(Ye){for(var st=1;st<arguments.length;st++){var Qe=arguments[st]!=null?arguments[st]:{};st%2?p(Object(Qe),!0).forEach(function($t){f(Ye,$t,Qe[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ye,Object.getOwnPropertyDescriptors(Qe)):p(Object(Qe)).forEach(function($t){Object.defineProperty(Ye,$t,Object.getOwnPropertyDescriptor(Qe,$t))})}return Ye}function m(Ye){if(Array.isArray(Ye))return Ye}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function C(Ye,st){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ye)))){var Qe=[],$t=!0,Yt=!1,wn=void 0;try{for(var mn=Ye[Symbol.iterator](),_n;!($t=(_n=mn.next()).done)&&(Qe.push(_n.value),!(st&&Qe.length===st));$t=!0);}catch(Rn){Yt=!0,wn=Rn}finally{try{!$t&&mn.return!=null&&mn.return()}finally{if(Yt)throw wn}}return Qe}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function S(Ye,st){(st==null||st>Ye.length)&&(st=Ye.length);for(var Qe=0,$t=new Array(st);Qe<st;Qe++)$t[Qe]=Ye[Qe];return $t}function T(Ye,st){if(Ye){if(typeof Ye=="string")return S(Ye,st);var Qe=Object.prototype.toString.call(Ye).slice(8,-1);if(Qe==="Object"&&Ye.constructor&&(Qe=Ye.constructor.name),Qe==="Map"||Qe==="Set")return Array.from(Ye);if(Qe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qe))return S(Ye,st)}}function O(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(Ye,st){return m(Ye)||C(Ye,st)||T(Ye,st)||O()}function N(Ye){if(Array.isArray(Ye))return S(Ye)}function U(Ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ye))return Array.from(Ye)}function G(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J(Ye){return N(Ye)||U(Ye)||T(Ye)||G()}var ee=o("a352"),V=o.n(ee);function K(Ye){Ye.parentElement!==null&&Ye.parentElement.removeChild(Ye)}function pe(Ye,st,Qe){var $t=Qe===0?Ye.children[0]:Ye.children[Qe-1].nextSibling;Ye.insertBefore(st,$t)}var $=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function H(Ye){var st=Object.create(null);return function($t){var Yt=st[$t];return Yt||(st[$t]=Ye($t))}}var oe=/-(\w)/g,ie=H(function(Ye){return Ye.replace(oe,function(st,Qe){return Qe.toUpperCase()})});o("5db7"),o("73d9");var R=["Start","Add","Remove","Update","End"],j=["Choose","Unchoose","Sort","Filter","Clone"],q=["Move"],re=[q,R,j].flatMap(function(Ye){return Ye}).map(function(Ye){return"on".concat(Ye)}),xe={manage:q,manageAndEmit:R,emit:j};function be(Ye){return re.indexOf(Ye)!==-1}o("caad"),o("2ca0");var _e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Z(Ye){return _e.includes(Ye)}function ae(Ye){return["transition-group","TransitionGroup"].includes(Ye)}function ce(Ye){return["id","class","role","style"].includes(Ye)||Ye.startsWith("data-")||Ye.startsWith("aria-")||Ye.startsWith("on")}function de(Ye){return Ye.reduce(function(st,Qe){var $t=D(Qe,2),Yt=$t[0],wn=$t[1];return st[Yt]=wn,st},{})}function ge(Ye){var st=Ye.$attrs,Qe=Ye.componentData,$t=Qe===void 0?{}:Qe,Yt=de(Object.entries(st).filter(function(wn){var mn=D(wn,2),_n=mn[0];return mn[1],ce(_n)}));return y(y({},Yt),$t)}function Ee(Ye){var st=Ye.$attrs,Qe=Ye.callBackBuilder,$t=de(Ue(st));Object.entries(Qe).forEach(function(wn){var mn=D(wn,2),_n=mn[0],Rn=mn[1];xe[_n].forEach(function(vn){$t["on".concat(vn)]=Rn(vn)})});var Yt="[data-draggable]".concat($t.draggable||"");return y(y({},$t),{},{draggable:Yt})}function Ue(Ye){return Object.entries(Ye).filter(function(st){var Qe=D(st,2),$t=Qe[0];return Qe[1],!ce($t)}).map(function(st){var Qe=D(st,2),$t=Qe[0],Yt=Qe[1];return[ie($t),Yt]}).filter(function(st){var Qe=D(st,2),$t=Qe[0];return Qe[1],!be($t)})}o("c740");function Ne(Ye,st){if(!(Ye instanceof st))throw new TypeError("Cannot call a class as a function")}function rt(Ye,st){for(var Qe=0;Qe<st.length;Qe++){var $t=st[Qe];$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Ye,$t.key,$t)}}function gt(Ye,st,Qe){return st&&rt(Ye.prototype,st),Ye}var _t=function(st){var Qe=st.el;return Qe},le=function(st,Qe){return st.__draggable_context=Qe},se=function(st){return st.__draggable_context},ue=function(){function Ye(st){var Qe=st.nodes,$t=Qe.header,Yt=Qe.default,wn=Qe.footer,mn=st.root,_n=st.realList;Ne(this,Ye),this.defaultNodes=Yt,this.children=[].concat(J($t),J(Yt),J(wn)),this.externalComponent=mn.externalComponent,this.rootTransition=mn.transition,this.tag=mn.tag,this.realList=_n}return gt(Ye,[{key:"render",value:function(Qe,$t){var Yt=this.tag,wn=this.children,mn=this._isRootComponent,_n=mn?{default:function(){return wn}}:wn;return Qe(Yt,$t,_n)}},{key:"updated",value:function(){var Qe=this.defaultNodes,$t=this.realList;Qe.forEach(function(Yt,wn){le(_t(Yt),{element:$t[wn],index:wn})})}},{key:"getUnderlyingVm",value:function(Qe){return se(Qe)}},{key:"getVmIndexFromDomIndex",value:function(Qe,$t){var Yt=this.defaultNodes,wn=Yt.length,mn=$t.children,_n=mn.item(Qe);if(_n===null)return wn;var Rn=se(_n);if(Rn)return Rn.index;if(wn===0)return 0;var vn=_t(Yt[0]),tn=J(mn).findIndex(function(hn){return hn===vn});return Qe<tn?0:wn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ye}(),Q=o("8bbf");function ke(Ye,st){var Qe=Ye[st];return Qe?Qe():[]}function Ve(Ye){var st=Ye.$slots,Qe=Ye.realList,$t=Ye.getKey,Yt=Qe||[],wn=["header","footer"].map(function(hn){return ke(st,hn)}),mn=D(wn,2),_n=mn[0],Rn=mn[1],vn=st.item;if(!vn)throw new Error("draggable element must have an item slot");var tn=Yt.flatMap(function(hn,Bn){return vn({element:hn,index:Bn}).map(function(Jn){return Jn.key=$t(hn),Jn.props=y(y({},Jn.props||{}),{},{"data-draggable":!0}),Jn})});if(tn.length!==Yt.length)throw new Error("Item slot must have only one child");return{header:_n,footer:Rn,default:tn}}function Xe(Ye){var st=ae(Ye),Qe=!Z(Ye)&&!st;return{transition:st,externalComponent:Qe,tag:Qe?Object(Q.resolveComponent)(Ye):st?Q.TransitionGroup:Ye}}function lt(Ye){var st=Ye.$slots,Qe=Ye.tag,$t=Ye.realList,Yt=Ye.getKey,wn=Ve({$slots:st,realList:$t,getKey:Yt}),mn=Xe(Qe);return new ue({nodes:wn,root:mn,realList:$t})}function at(Ye,st){var Qe=this;Object(Q.nextTick)(function(){return Qe.$emit(Ye.toLowerCase(),st)})}function pt(Ye){var st=this;return function(Qe,$t){if(st.realList!==null)return st["onDrag".concat(Ye)](Qe,$t)}}function jt(Ye){var st=this,Qe=pt.call(this,Ye);return function($t,Yt){Qe.call(st,$t,Yt),at.call(st,Ye,$t)}}var Bt=null,qt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(st){return st}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Jt=["update:modelValue","change"].concat(J([].concat(J(xe.manageAndEmit),J(xe.emit)).map(function(Ye){return Ye.toLowerCase()}))),gn=Object(Q.defineComponent)({name:"draggable",inheritAttrs:!1,props:qt,emits:Jt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var st=this.$slots,Qe=this.$attrs,$t=this.tag,Yt=this.componentData,wn=this.realList,mn=this.getKey,_n=lt({$slots:st,tag:$t,realList:wn,getKey:mn});this.componentStructure=_n;var Rn=ge({$attrs:Qe,componentData:Yt});return _n.render(Q.h,Rn)}catch(vn){return this.error=!0,Object(Q.h)("pre",{style:{color:"red"}},vn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&$.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var st=this;if(!this.error){var Qe=this.$attrs,$t=this.$el,Yt=this.componentStructure;Yt.updated();var wn=Ee({$attrs:Qe,callBackBuilder:{manageAndEmit:function(Rn){return jt.call(st,Rn)},emit:function(Rn){return at.bind(st,Rn)},manage:function(Rn){return pt.call(st,Rn)}}}),mn=$t.nodeType===1?$t:$t.parentElement;this._sortable=new V.a(mn,wn),this.targetDomElement=mn,mn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var st=this.list;return st||this.modelValue},getKey:function(){var st=this.itemKey;return typeof st=="function"?st:function(Qe){return Qe[st]}}},watch:{$attrs:{handler:function(st){var Qe=this._sortable;Qe&&Ue(st).forEach(function($t){var Yt=D($t,2),wn=Yt[0],mn=Yt[1];Qe.option(wn,mn)})},deep:!0}},methods:{getUnderlyingVm:function(st){return this.componentStructure.getUnderlyingVm(st)||null},getUnderlyingPotencialDraggableComponent:function(st){return st.__draggable_component__},emitChanges:function(st){var Qe=this;Object(Q.nextTick)(function(){return Qe.$emit("change",st)})},alterList:function(st){if(this.list){st(this.list);return}var Qe=J(this.modelValue);st(Qe),this.$emit("update:modelValue",Qe)},spliceList:function(){var st=arguments,Qe=function(Yt){return Yt.splice.apply(Yt,J(st))};this.alterList(Qe)},updatePosition:function(st,Qe){var $t=function(wn){return wn.splice(Qe,0,wn.splice(st,1)[0])};this.alterList($t)},getRelatedContextFromMoveEvent:function(st){var Qe=st.to,$t=st.related,Yt=this.getUnderlyingPotencialDraggableComponent(Qe);if(!Yt)return{component:Yt};var wn=Yt.realList,mn={list:wn,component:Yt};if(Qe!==$t&&wn){var _n=Yt.getUnderlyingVm($t)||{};return y(y({},_n),mn)}return mn},getVmIndexFromDomIndex:function(st){return this.componentStructure.getVmIndexFromDomIndex(st,this.targetDomElement)},onDragStart:function(st){this.context=this.getUnderlyingVm(st.item),st.item._underlying_vm_=this.clone(this.context.element),Bt=st.item},onDragAdd:function(st){var Qe=st.item._underlying_vm_;if(Qe!==void 0){K(st.item);var $t=this.getVmIndexFromDomIndex(st.newIndex);this.spliceList($t,0,Qe);var Yt={element:Qe,newIndex:$t};this.emitChanges({added:Yt})}},onDragRemove:function(st){if(pe(this.$el,st.item,st.oldIndex),st.pullMode==="clone"){K(st.clone);return}var Qe=this.context,$t=Qe.index,Yt=Qe.element;this.spliceList($t,1);var wn={element:Yt,oldIndex:$t};this.emitChanges({removed:wn})},onDragUpdate:function(st){K(st.item),pe(st.from,st.item,st.oldIndex);var Qe=this.context.index,$t=this.getVmIndexFromDomIndex(st.newIndex);this.updatePosition(Qe,$t);var Yt={element:this.context.element,oldIndex:Qe,newIndex:$t};this.emitChanges({moved:Yt})},computeFutureIndex:function(st,Qe){if(!st.element)return 0;var $t=J(Qe.to.children).filter(function(_n){return _n.style.display!=="none"}),Yt=$t.indexOf(Qe.related),wn=st.component.getVmIndexFromDomIndex(Yt),mn=$t.indexOf(Bt)!==-1;return mn||!Qe.willInsertAfter?wn:wn+1},onDragMove:function(st,Qe){var $t=this.move,Yt=this.realList;if(!$t||!Yt)return!0;var wn=this.getRelatedContextFromMoveEvent(st),mn=this.computeFutureIndex(wn,st),_n=y(y({},this.context),{},{futureIndex:mn}),Rn=y(y({},st),{},{relatedContext:wn,draggedContext:_n});return $t(Rn,Qe)},onDragEnd:function(){Bt=null}}}),Cn=gn;s.default=Cn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),f=o("23cb"),p=o("50c4"),y=o("fc6a"),m=o("8418"),C=o("b622"),S=o("1dde"),T=o("ae40"),O=S("slice"),D=T("slice",{ACCESSORS:!0,0:0,1:2}),N=C("species"),U=[].slice,G=Math.max;a({target:"Array",proto:!0,forced:!O||!D},{slice:function(ee,V){var K=y(this),pe=p(K.length),$=f(ee,pe),H=f(V===void 0?pe:V,pe),oe,ie,R;if(c(K)&&(oe=K.constructor,typeof oe=="function"&&(oe===Array||c(oe.prototype))?oe=void 0:l(oe)&&(oe=oe[N],oe===null&&(oe=void 0)),oe===Array||oe===void 0))return U.call(K,$,H);for(ie=new(oe===void 0?Array:oe)(G(H-$,0)),R=0;$<H;$++,R++)$ in K&&m(ie,R,K[$]);return ie.length=R,ie}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(mE);var XG=mE.exports;const JG=ly(XG),QG={class:"min-h-full bg-gray-50"},eq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},tq={class:"sm:flex sm:items-center"},nq={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},rq={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},iq={class:"mt-6 bg-white shadow rounded-lg p-4"},sq={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},oq=["value"],aq={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},lq={key:1,class:"mt-6 pb-4"},uq={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},cq={key:1,class:"md:flex md:space-x-4 md:overflow-x-auto gap-4 grid grid-cols-1"},hq={class:"bg-white rounded-lg shadow overflow-hidden"},fq={class:"flex items-center"},dq={class:"flex items-center"},pq={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},gq={class:"p-2"},mq={class:"min-h-[100px] draggable-container"},vq={class:"note-container"},yq={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},bq={class:"flex items-center"},_q={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},wq={class:"text-sm font-medium text-gray-900 truncate"},xq={class:"px-3 py-2"},Lq={class:"text-sm text-gray-500 line-clamp-2"},Cq={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex items-center space-x-2"},Sq={class:"text-xs text-gray-500"},Eq={key:0,class:"text-xs text-gray-700"},Pq={class:"flex space-x-1 ml-auto"},kq={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note golocalise"},Mq={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},Aq=["onClick"],Tq=["onClick"],Oq=["onClick"],Dq=["onClick"],Iq={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Nq={class:"flex items-center justify-center min-h-screen w-full"},Bq={class:"relative bg-white w-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden mx-auto my-auto"},Rq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},Fq=_s({__name:"NotesView",setup(t){const e=kt([]),n=ay(),r=ll(),i=yh(),s=po(),o=kt(!0),a=kt(!1),l=kt(!1),c=kt(null),f=kt(null),p=kt("info"),y=kt(window.innerWidth<768),m=()=>{y.value=window.innerWidth<768},C=tr(()=>i.getSortedColumns),S=[{id:Fr.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:Fr.COMPANY,title:"Entreprise",description:"Visible par l'entreprise"},{id:Fr.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et ses salaris"},{id:Fr.VISITOR,title:"Visiteurs",description:"Visible par l'entreprise, ses salaris et ses visiteurs"}],T=cu({search:"",date:"",accessLevel:""}),O=tr(()=>{let be=i.getAccessibleNotes;if(T.search){const _e=T.search.toLowerCase();be=be.filter(Z=>Z.title.toLowerCase().includes(_e)||Z.description.toLowerCase().includes(_e))}if(T.accessLevel&&(be=be.filter(_e=>_e.accessLevel===T.accessLevel)),T.date){const _e=new Date;_e.setHours(0,0,0,0);const Z=new Date(_e);Z.setDate(_e.getDate()-_e.getDay());const ae=new Date(_e.getFullYear(),_e.getMonth(),1);be=be.filter(ce=>{const de=dz(ce.createdAt);return de?T.date==="today"?de>=_e:T.date==="week"?de>=Z:T.date==="month"?de>=ae:!0:!1})}return be}),D=tr(()=>be=>O.value.filter(_e=>_e.columnId===be));function N(be){if(be==null)return"Non dfini";switch(be){case Fr.PRIVATE:return"Priv";case Fr.COMPANY:return"Entreprise";case Fr.EMPLOYEE:return"Salaris";case Fr.VISITOR:return"Visiteurs";default:return"Non dfini"}}function U(be){if(be==null)return"#9CA3AF";switch(be){case Fr.PRIVATE:return"#9CA3AF";case Fr.COMPANY:return"#EF4444";case Fr.EMPLOYEE:return"#F59E0B";case Fr.VISITOR:return"#10B981";default:return"#6B7280"}}Ks(()=>{G().catch(be=>{console.error("[NotesView] Erreur lors du chargement des donnes:",be),r.error("Erreur lors du chargement des donnes")}),document.addEventListener("click",xe),window.addEventListener("resize",m)});async function G(){var be;try{if(o.value=!0,await i.loadColumns(),s.isAdmin)try{const ge=await ca.getEntreprises();e.value=ge.data}catch(ge){console.error("[NotesView][loadInitialData] Erreur chargement entreprises:",ge)}const _e={};!s.isAdmin&&((be=s.user)!=null&&be.enterprise_id)&&(_e.enterprise_id=s.user.enterprise_id);const Z=await Yo.getNotes(_e);Z.data.length>0?Z.data.forEach((ge,Ee)=>{}):console.warn("[NotesView][loadInitialData] Aucune note reue du backend!");const ae=i.columns.map(ge=>ge.id),ce=Z.data.filter(ge=>{const Ee=(ge.column||ge.column_id||"").toString();return Ee===""||!ae.includes(Ee)});if(ce.length>0){console.warn(`[NotesView][loadInitialData] ${ce.length} notes avec des colonnes invalides:`,ce);for(const ge of ce)try{await Yo.updateNote(ge.id,{column:"2"})}catch(Ee){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${ge.id}  la colonne  faire:`,Ee)}}const de=Z.data.map(ge=>{let Ee;if(s.isAdmin&&ge.enterprise_id!=null)if(ge.enterprise_name)Ee=ge.enterprise_name;else{const Ue=e.value.find(Ne=>Ne.id===ge.enterprise_id);Ee=Ue?Is(Ue):void 0}return{id:ge.id,title:ge.title,description:ge.description,location:ge.location,columnId:(ge.column||ge.column_id||"2").toString(),access_level:ge.access_level,style:ge.style||{},comments:ge.comments||[],photos:ge.photos||[],order:ge.order||0,createdAt:ge.created_at,updatedAt:ge.updated_at,enterprise_id:ge.enterprise_id,enterprise_name:Ee}});i.notes.length=0,de.forEach(ge=>{i.addNote(ge)});for(const ge of i.columns){const Ee=i.getNotesByColumn(ge.id);Ee.length>0&&Ee.forEach(Ue=>{})}}catch(_e){console.error("[NotesView][loadInitialData] Erreur:",_e),r.error("Erreur lors du chargement des donnes")}finally{o.value=!1}}function J(){n.push({path:"/",query:{tool:"Note"}})}async function ee(be){if(!be.location){r.warning("Cette note n'est pas golocalise");return}try{const ae=(await Yo.getNote(be.id)).data.plan;n.push({path:"/",query:{lat:Array.isArray(be.location)?be.location[0].toString():be.location.coordinates[1].toString(),lng:Array.isArray(be.location)?be.location[1].toString():be.location.coordinates[0].toString(),noteId:be.id.toString(),planId:ae?ae.toString():void 0}})}catch(_e){console.error("[NotesView][viewOnMap] Erreur lors de la rcupration des dtails de la note:",_e),r.error("Erreur lors de l'ouverture de la note sur la carte")}}function V(be){if(!be.location){r.warning("Cette note n'est pas golocalise");return}ku(()=>Promise.resolve().then(()=>Yz),void 0).then(_e=>{ku(()=>Promise.resolve().then(()=>YS),void 0).then(Z=>{const ae=_e.extractLatLng(be.location);if(!ae){r.warning("Coordonnes de la note invalides");return}Z.openInGoogleMaps(ae.lat,ae.lng,"directions",be.title)})})}function K(be){f.value=JSON.parse(JSON.stringify(be)),p.value="info",l.value=!0}async function pe(be){var Z,ae;let _e=be.enterprise_id;if(_e==null&&(s.isAdmin?_e=null:s.isEntreprise&&s.user?_e=s.user.id:s.isSalarie&&((Z=s.user)!=null&&Z.enterprise_id)?_e=s.user.enterprise_id:s.isVisiteur&&s.user?_e=s.user.enterprise_id??null:!s.isAdmin&&((ae=s.user)!=null&&ae.enterprise_id)&&(_e=s.user.enterprise_id),_e!==null&&be.id&&i.updateNote(be.id,{enterprise_id:_e})),_e!==null&&be.id){const ce=i.notes.findIndex(de=>de.id===be.id);if(ce!==-1&&!be.enterprise_name){const de=e.value.find(ge=>ge.id===_e);de&&(i.notes[ce].enterprise_name=Is(de))}}}function $(be){c.value=be,a.value=!0}async function H(){if(c.value)try{try{await Yo.deleteNote(c.value.id)}catch(be){if(!(be.response&&be.response.status===404))throw be}i.removeNote(c.value.id),r.success("Note supprime avec succs")}catch(be){console.error("Erreur lors de la suppression de la note:",be),r.error("Erreur lors de la suppression de la note")}finally{a.value=!1,c.value=null}}async function oe(be,_e){try{if(be.added){const{element:Z}=be.added,ae=typeof Z=="object"&&Z.id?Z.id:null;if(!ae)throw console.error("[NotesView][onDragChange] ID de note invalide:",Z),new Error("ID de note invalide");i.moveNote(ae,_e);const de=D.value(_e).map(Ee=>Ee.id);i.reorderNotes(_e,de);const ge=i.getColumnById(_e);r.success(`Note dplace vers ${(ge==null?void 0:ge.title)||"une autre colonne"}`),await ie(ae,{columnId:_e})}if(be.moved){const Z=D.value(_e),ae=Z.map(ce=>ce.id);i.reorderNotes(_e,ae),r.success("Ordre des notes mis  jour");for(const[ce,de]of Z.entries())await ie(de.id,{order:ce})}}catch(Z){console.error("[NotesView][onDragChange] Erreur:",Z),r.error("Une erreur est survenue lors du dplacement de la note")}}async function ie(be,_e){try{const Z=i.notes.find(de=>de.id===be);if(!Z){console.error("[NotesView][updateNoteInBackend] Note non trouve:",be);return}const ae={..._e};if(_e.columnId){const de=i.getColumnById(_e.columnId);de?(ae.column=de.id,delete ae.columnId,delete ae.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouve: ${_e.columnId}`)}const ce={...Z,...ae,updatedAt:new Date().toISOString()};await Yo.updateNote(be,ce)}catch(Z){throw console.error("[NotesView][updateNoteInBackend] Erreur:",Z),Z}}function R(){var _e;let be=null;s.isAdmin?be=null:s.isEntreprise&&s.user?be=s.user.id:s.isSalarie&&((_e=s.user)!=null&&_e.enterprise_id)?be=s.user.enterprise_id:s.isVisiteur&&s.user&&(be=s.user.enterprise_id??null),f.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:i.getDefaultColumn.id,accessLevel:Fr.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[],enterprise_id:be},l.value=!0,p.value="info"}const j=kt(null),q=kt(!1);function re(){q.value=!q.value}function xe(be){j.value&&!j.value.contains(be.target)&&(q.value=!1)}return Ks(()=>{document.addEventListener("click",xe),window.addEventListener("resize",m)}),ff(()=>{document.removeEventListener("click",xe),window.removeEventListener("resize",m)}),(be,_e)=>{var Z,ae;return Ie(),je("div",QG,[P("div",eq,[P("div",tq,[_e[6]||(_e[6]=P("div",{class:"sm:flex-auto"},[P("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),P("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),P("div",nq,[P("div",{class:"relative",ref_key:"dropdownRef",ref:j},[P("button",{onClick:re,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},_e[5]||(_e[5]=[zr(" Crer "),P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),q.value?(Ie(),je("div",rq,[P("div",{class:"py-1"},[P("button",{onClick:R,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),P("button",{onClick:J,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note golocalise ")])])):Kt("",!0)],512)])]),P("div",iq,[P("div",sq,[P("div",null,[_e[7]||(_e[7]=P("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),jn(P("input",{type:"text",id:"search","onUpdate:modelValue":_e[0]||(_e[0]=ce=>T.search=ce),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[di,T.search]])]),P("div",null,[_e[9]||(_e[9]=P("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),jn(P("select",{id:"date","onUpdate:modelValue":_e[1]||(_e[1]=ce=>T.date=ce),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},_e[8]||(_e[8]=[P("option",{value:""},"Toutes les dates",-1),P("option",{value:"today"},"Aujourd'hui",-1),P("option",{value:"week"},"Cette semaine",-1),P("option",{value:"month"},"Ce mois",-1)]),512),[[os,T.date]])]),P("div",null,[_e[11]||(_e[11]=P("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),jn(P("select",{id:"accessLevel","onUpdate:modelValue":_e[2]||(_e[2]=ce=>T.accessLevel=ce),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[_e[10]||(_e[10]=P("option",{value:""},"Tous les niveaux",-1)),(Ie(),je(bn,null,sr(S,ce=>P("option",{key:ce.id,value:ce.id},Ut(ce.title),9,oq)),64))],512),[[os,T.accessLevel]])])])]),o.value?(Ie(),je("div",aq,_e[12]||(_e[12]=[P("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),P("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Ie(),je("div",lq,[O.value.length===0?(Ie(),je("div",uq,_e[13]||(_e[13]=[P("p",{class:"text-sm text-gray-500"},"Aucune note trouve",-1)]))):Kt("",!0),O.value.length>0?(Ie(),je("div",cq,[(Ie(!0),je(bn,null,sr(C.value,ce=>(Ie(),je("div",{key:ce.id,class:"column-wrapper md:w-80 md:flex-shrink-0 mb-4 md:mb-0"},[P("div",hq,[P("div",{class:"p-3 flex items-center justify-between no-select",style:Rl({backgroundColor:ce.color+"20",borderBottom:"2px solid "+ce.color})},[P("div",fq,[P("h3",{class:"text-sm font-semibold",style:Rl({color:ce.color})},Ut(ce.title),5)]),P("div",dq,[P("span",pq,Ut(D.value(ce.id).length),1)])],4),P("div",gq,[P("div",mq,[Kr(cn(JG),{list:D.value(ce.id),class:"space-y-2 empty-column-drop-zone",group:"notes","item-key":"id",handle:y.value?null:".note-drag-handle",onChange:de=>oe(de,ce.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:y.value},{item:Il(({element:de})=>[P("div",vq,[P("div",yq,[P("div",{class:Ei(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!y.value,"no-select":!0}])},[P("div",bq,[y.value?Kt("",!0):(Ie(),je("svg",_q,_e[14]||(_e[14]=[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),P("h4",wq,Ut(de.title),1)]),P("div",null,[P("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:Rl({backgroundColor:U(de.accessLevel)+"20",color:U(de.accessLevel)})},Ut(N(de.accessLevel)||"Non dfini"),5)])],2),P("div",xq,[P("p",Lq,Ut(de.description||"Aucune description"),1)]),P("div",Cq,[P("span",Sq,Ut(de.updatedAt?cn(zf)(de.updatedAt):de.createdAt?cn(zf)(de.createdAt):"Date non dfinie"),1),cn(s).isAdmin?(Ie(),je("span",Eq,Ut(de.enterprise_name||"Non assigne"),1)):Kt("",!0),P("div",Pq,[de.location?(Ie(),je("span",kq,_e[15]||(_e[15]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Ie(),je("span",Mq,_e[16]||(_e[16]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),de.location?(Ie(),je(bn,{key:2},[P("button",{onClick:ge=>V(de),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},_e[17]||(_e[17]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,Aq),P("button",{onClick:ge=>ee(de),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},_e[18]||(_e[18]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,Tq)],64)):Kt("",!0),P("button",{onClick:ge=>K(de),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"diter la note"},_e[19]||(_e[19]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,Oq),P("button",{onClick:ge=>$(de),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},_e[20]||(_e[20]=[P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Dq)])])])])]),"empty-content":Il(()=>_e[21]||(_e[21]=[P("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])):Kt("",!0)]))]),a.value?(Ie(),je("div",Iq,[P("div",Nq,[_e[23]||(_e[23]=P("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),P("div",Bq,[_e[22]||(_e[22]=lu('<div class="p-4 md:p-6" data-v-284d4e46><div class="flex items-start" data-v-284d4e46><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-284d4e46><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-284d4e46><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-284d4e46></path></svg></div><div class="ml-4 flex-1" data-v-284d4e46><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-284d4e46> Supprimer la note </h3><div class="mt-2" data-v-284d4e46><p class="text-sm text-gray-500" data-v-284d4e46> tes-vous sr de vouloir supprimer cette note ? Cette action est irrversible. </p></div></div></div></div>',1)),P("div",Rq,[P("button",{onClick:H,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),P("button",{onClick:_e[3]||(_e[3]=ce=>a.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):Kt("",!0),l.value?(Ie(),Lo(HS,{key:1,note:f.value,"is-new-note":!((Z=f.value)!=null&&Z.id),location:(ae=f.value)==null?void 0:ae.location,onClose:_e[4]||(_e[4]=ce=>l.value=!1),onSave:pe},null,8,["note","is-new-note","location"])):Kt("",!0)])}}}),jq=Vc(Fq,[["__scopeId","data-v-284d4e46"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function fm(t){return t+.5|0}const Zh=(t,e,n)=>Math.max(Math.min(t,n),e);function tg(t){return Zh(fm(t*2.55),0,255)}function tf(t){return Zh(fm(t*255),0,255)}function hh(t){return Zh(fm(t/2.55)/100,0,1)}function c5(t){return Zh(fm(t*100),0,100)}const Pu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},X2=[..."0123456789ABCDEF"],zq=t=>X2[t&15],Uq=t=>X2[(t&240)>>4]+X2[t&15],a0=t=>(t&240)>>4===(t&15),$q=t=>a0(t.r)&&a0(t.g)&&a0(t.b)&&a0(t.a);function Vq(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Pu[t[1]]*17,g:255&Pu[t[2]]*17,b:255&Pu[t[3]]*17,a:e===5?Pu[t[4]]*17:255}:(e===7||e===9)&&(n={r:Pu[t[1]]<<4|Pu[t[2]],g:Pu[t[3]]<<4|Pu[t[4]],b:Pu[t[5]]<<4|Pu[t[6]],a:e===9?Pu[t[7]]<<4|Pu[t[8]]:255})),n}const Hq=(t,e)=>t<255?e(t):"";function Wq(t){var e=$q(t)?zq:Uq;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Hq(t.a,e):void 0}const Gq=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function kE(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function qq(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Yq(t,e,n){const r=kE(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function Zq(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function p_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,f;return s!==o&&(f=s-o,c=a>.5?f/(2-s-o):f/(s+o),l=Zq(n,r,i,f,s),l=l*60+.5),[l|0,c||0,a]}function g_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(tf)}function m_(t,e,n){return g_(kE,t,e,n)}function Kq(t,e,n){return g_(Yq,t,e,n)}function Xq(t,e,n){return g_(qq,t,e,n)}function ME(t){return(t%360+360)%360}function Jq(t){const e=Gq.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?tg(+e[5]):tf(+e[5]));const i=ME(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Kq(i,s,o):e[1]==="hsv"?r=Xq(i,s,o):r=m_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function Qq(t,e){var n=p_(t);n[0]=ME(n[0]+e),n=m_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function eY(t){if(!t)return;const e=p_(t),n=e[0],r=c5(e[1]),i=c5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${hh(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const h5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},f5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function tY(){const t={},e=Object.keys(f5),n=Object.keys(h5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,h5[s]);s=parseInt(f5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let l0;function nY(t){l0||(l0=tY(),l0.transparent=[0,0,0,0]);const e=l0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const rY=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function iY(t){const e=rY.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?tg(o):Zh(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?tg(r):Zh(r,0,255)),i=255&(e[4]?tg(i):Zh(i,0,255)),s=255&(e[6]?tg(s):Zh(s,0,255)),{r,g:i,b:s,a:n}}}function sY(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${hh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const j1=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Dd=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function oY(t,e,n){const r=Dd(hh(t.r)),i=Dd(hh(t.g)),s=Dd(hh(t.b));return{r:tf(j1(r+n*(Dd(hh(e.r))-r))),g:tf(j1(i+n*(Dd(hh(e.g))-i))),b:tf(j1(s+n*(Dd(hh(e.b))-s))),a:t.a+n*(e.a-t.a)}}function u0(t,e,n){if(t){let r=p_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=m_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function AE(t,e){return t&&Object.assign(e||{},t)}function d5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=tf(t[3]))):(e=AE(t,{r:0,g:0,b:0,a:1}),e.a=tf(e.a)),e}function aY(t){return t.charAt(0)==="r"?iY(t):Jq(t)}class Zg{constructor(e){if(e instanceof Zg)return e;const n=typeof e;let r;n==="object"?r=d5(e):n==="string"&&(r=Vq(e)||nY(e)||aY(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=AE(this._rgb);return e&&(e.a=hh(e.a)),e}set rgb(e){this._rgb=d5(e)}rgbString(){return this._valid?sY(this._rgb):void 0}hexString(){return this._valid?Wq(this._rgb):void 0}hslString(){return this._valid?eY(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=oY(this._rgb,e._rgb,n)),this}clone(){return new Zg(this.rgb)}alpha(e){return this._rgb.a=tf(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=fm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return u0(this._rgb,2,e),this}darken(e){return u0(this._rgb,2,-e),this}saturate(e){return u0(this._rgb,1,e),this}desaturate(e){return u0(this._rgb,1,-e),this}rotate(e){return Qq(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function ah(){}const lY=(()=>{let t=0;return()=>t++})();function bi(t){return t===null||typeof t>"u"}function bs(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ai(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ys(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ru(t,e){return Ys(t)?t:e}function Ur(t,e){return typeof t>"u"?e:t}const uY=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,TE=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function es(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ii(t,e,n,r){let i,s,o;if(bs(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(ai(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Lv(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Cv(t){if(bs(t))return t.map(Cv);if(ai(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Cv(t[n[i]]);return e}return t}function OE(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function cY(t,e,n,r){if(!OE(t))return;const i=e[t],s=n[t];ai(i)&&ai(s)?Kg(i,s,r):e[t]=Cv(s)}function Kg(t,e,n){const r=bs(e)?e:[e],i=r.length;if(!ai(t))return t;n=n||{};const s=n.merger||cY;let o;for(let a=0;a<i;++a){if(o=r[a],!ai(o))continue;const l=Object.keys(o);for(let c=0,f=l.length;c<f;++c)s(l[c],t,o,n)}return t}function Sg(t,e){return Kg(t,e,{merger:hY})}function hY(t,e,n){if(!OE(t))return;const r=e[t],i=n[t];ai(r)&&ai(i)?Sg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Cv(i))}const p5={"":t=>t,x:t=>t.x,y:t=>t.y};function fY(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function dY(t){const e=fY(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function lf(t,e){return(p5[e]||(p5[e]=dY(e)))(t)}function v_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Xg=t=>typeof t<"u",uf=t=>typeof t=="function",g5=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function pY(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ls=Math.PI,as=2*ls,gY=as+ls,Sv=Number.POSITIVE_INFINITY,mY=ls/180,co=ls/2,Mf=ls/4,m5=ls*2/3,Kh=Math.log10,jc=Math.sign;function Eg(t,e,n){return Math.abs(t-e)<n}function v5(t){const e=Math.round(t);t=Eg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Kh(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function vY(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function cp(t){return!isNaN(parseFloat(t))&&isFinite(t)}function yY(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function DE(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ic(t){return t*(ls/180)}function y_(t){return t*(180/ls)}function y5(t){if(!Ys(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function IE(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*ls&&(s+=as),{angle:s,distance:i}}function J2(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function bY(t,e){return(t-e+gY)%as-ls}function iu(t){return(t%as+as)%as}function Jg(t,e,n,r){const i=iu(t),s=iu(e),o=iu(n),a=iu(s-i),l=iu(o-i),c=iu(i-s),f=iu(i-o);return i===s||i===o||r&&s===o||a>l&&c<f}function Ko(t,e,n){return Math.max(e,Math.min(n,t))}function _Y(t){return Ko(t,-32768,32767)}function gh(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function b_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const mh=(t,e,n,r)=>b_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),wY=(t,e,n)=>b_(t,n,r=>t[r][e]>=n);function xY(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const NE=["push","pop","shift","splice","unshift"];function LY(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),NE.forEach(n=>{const r="_onData"+v_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function b5(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(NE.forEach(s=>{delete t[s]}),delete t._chartjs)}function BE(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const RE=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function FE(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,RE.call(window,()=>{r=!1,t.apply(e,n)}))}}function CY(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const __=t=>t==="start"?"left":t==="end"?"right":"center",Oa=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,SY=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function jE(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:f,minDefined:p,maxDefined:y}=o.getUserBounds();p&&(i=Ko(Math.min(mh(a,l,c).lo,n?r:mh(e,l,o.getPixelForValue(c)).lo),0,r-1)),y?s=Ko(Math.max(mh(a,o.axis,f,!0).hi+1,n?0:mh(e,l,o.getPixelForValue(f),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function zE(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const c0=t=>t===0||t===1,_5=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*as/n)),w5=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*as/n)+1,Pg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*co)+1,easeOutSine:t=>Math.sin(t*co),easeInOutSine:t=>-.5*(Math.cos(ls*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>c0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>c0(t)?t:_5(t,.075,.3),easeOutElastic:t=>c0(t)?t:w5(t,.075,.3),easeInOutElastic(t){return c0(t)?t:t<.5?.5*_5(t*2,.1125,.45):.5+.5*w5(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Pg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Pg.easeInBounce(t*2)*.5:Pg.easeOutBounce(t*2-1)*.5+.5};function w_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function x5(t){return w_(t)?t:new Zg(t)}function z1(t){return w_(t)?t:new Zg(t).saturate(.5).darken(.1).hexString()}const EY=["x","y","borderWidth","radius","tension"],PY=["color","borderColor","backgroundColor"];function kY(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:PY},numbers:{type:"number",properties:EY}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function MY(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const L5=new Map;function AY(t,e){e=e||{};const n=t+JSON.stringify(e);let r=L5.get(n);return r||(r=new Intl.NumberFormat(t,e),L5.set(n,r)),r}function dm(t,e,n){return AY(e,n).format(t)}const UE={values(t){return bs(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=TY(t,n)}const o=Kh(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),dm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Kh(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?UE.numeric.call(this,t,e,n):""}};function TY(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var py={formatters:UE};function OY(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:py.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ed=Object.create(null),Q2=Object.create(null);function kg(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function U1(t,e,n){return typeof e=="string"?Kg(kg(t,e),n):Kg(kg(t,""),e)}class DY{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>z1(i.backgroundColor),this.hoverBorderColor=(r,i)=>z1(i.borderColor),this.hoverColor=(r,i)=>z1(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return U1(this,e,n)}get(e){return kg(this,e)}describe(e,n){return U1(Q2,e,n)}override(e,n){return U1(ed,e,n)}route(e,n,r,i){const s=kg(this,e),o=kg(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return ai(l)?Object.assign({},c,l):Ur(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Zs=new DY({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[kY,MY,OY]);function IY(t){return!t||bi(t.size)||bi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ev(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function NY(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,f,p,y;for(l=0;l<a;l++)if(p=n[l],p!=null&&!bs(p))o=Ev(t,i,s,o,p);else if(bs(p))for(c=0,f=p.length;c<f;c++)y=p[c],y!=null&&!bs(y)&&(o=Ev(t,i,s,o,y));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function Af(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function C5(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function eb(t,e,n,r){$E(t,e,n,r,null)}function $E(t,e,n,r,i){let s,o,a,l,c,f,p,y;const m=e.pointStyle,C=e.rotation,S=e.radius;let T=(C||0)*mY;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(S)||S<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,S,0,0,as):t.arc(n,r,S,0,as),t.closePath();break;case"triangle":f=i?i/2:S,t.moveTo(n+Math.sin(T)*f,r-Math.cos(T)*S),T+=m5,t.lineTo(n+Math.sin(T)*f,r-Math.cos(T)*S),T+=m5,t.lineTo(n+Math.sin(T)*f,r-Math.cos(T)*S),t.closePath();break;case"rectRounded":c=S*.516,l=S-c,o=Math.cos(T+Mf)*l,p=Math.cos(T+Mf)*(i?i/2-c:l),a=Math.sin(T+Mf)*l,y=Math.sin(T+Mf)*(i?i/2-c:l),t.arc(n-p,r-a,c,T-ls,T-co),t.arc(n+y,r-o,c,T-co,T),t.arc(n+p,r+a,c,T,T+co),t.arc(n-y,r+o,c,T+co,T+ls),t.closePath();break;case"rect":if(!C){l=Math.SQRT1_2*S,f=i?i/2:l,t.rect(n-f,r-l,2*f,2*l);break}T+=Mf;case"rectRot":p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+y,r-o),t.lineTo(n+p,r+a),t.lineTo(n-y,r+o),t.closePath();break;case"crossRot":T+=Mf;case"cross":p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+y,r-o),t.lineTo(n-y,r+o);break;case"star":p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+y,r-o),t.lineTo(n-y,r+o),T+=Mf,p=Math.cos(T)*(i?i/2:S),o=Math.cos(T)*S,a=Math.sin(T)*S,y=Math.sin(T)*(i?i/2:S),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+y,r-o),t.lineTo(n-y,r+o);break;case"line":o=i?i/2:Math.cos(T)*S,a=Math.sin(T)*S,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(i?i/2:S),r+Math.sin(T)*S);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function vh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function gy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function my(t){t.restore()}function BY(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function RY(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function FY(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),bi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function jY(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,f=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,f),t.lineTo(a,f),t.stroke()}}function zY(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function td(t,e,n,r,i,s={}){const o=bs(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,FY(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&zY(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),bi(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),jY(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Qg(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ls,ls,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,ls,co,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,co,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-co,!0),t.lineTo(n+o.topLeft,r)}const UY=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$Y=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function VY(t,e){const n=(""+t).match(UY);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const HY=t=>+t||0;function x_(t,e){const n={},r=ai(e),i=r?Object.keys(e):e,s=ai(t)?r?o=>Ur(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=HY(s(o));return n}function VE(t){return x_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Zf(t){return x_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function za(t){const e=VE(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Oo(t,e){t=t||{},e=e||Zs.font;let n=Ur(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Ur(t.style,e.style);r&&!(""+r).match($Y)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Ur(t.family,e.family),lineHeight:VY(Ur(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Ur(t.weight,e.weight),string:""};return i.string=IY(i),i}function ng(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function WY(t,e,n){const{min:r,max:i}=t,s=TE(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function df(t,e){return Object.assign(Object.create(t),e)}function L_(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=qE("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>L_([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return WE(a,l,()=>QY(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return E5(a).includes(l)},ownKeys(a){return E5(a)},set(a,l,c){const f=a._storage||(a._storage=i());return a[l]=f[l]=c,delete a._keys,!0}})}function hp(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:HE(t,r),setContext:s=>hp(t,s,n,r),override:s=>hp(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return WE(s,o,()=>qY(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function HE(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:uf(n)?n:()=>n,isIndexable:uf(r)?r:()=>r}}const GY=(t,e)=>t?t+v_(e):e,C_=(t,e)=>ai(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function WE(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function qY(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return uf(a)&&o.isScriptable(e)&&(a=YY(e,a,t,n)),bs(a)&&a.length&&(a=ZY(e,a,t,o.isIndexable)),C_(e,a)&&(a=hp(a,i,s&&s[e],o)),a}function YY(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),C_(t,l)&&(l=S_(i._scopes,i,t,l)),l}function ZY(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(ai(e[0])){const l=e,c=i._scopes.filter(f=>f!==l);e=[];for(const f of l){const p=S_(c,i,t,f);e.push(hp(p,s,o&&o[t],a))}}return e}function GE(t,e,n){return uf(t)?t(e,n):t}const KY=(t,e)=>t===!0?e:typeof t=="string"?lf(e,t):void 0;function XY(t,e,n,r,i){for(const s of e){const o=KY(n,s);if(o){t.add(o);const a=GE(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function S_(t,e,n,r){const i=e._rootScopes,s=GE(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=S5(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=S5(a,o,s,l,r),l===null)?!1:L_(Array.from(a),[""],i,s,()=>JY(e,n,r))}function S5(t,e,n,r,i){for(;n;)n=XY(t,e,n,r,i);return n}function JY(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return bs(i)&&ai(n)?n:i||{}}function QY(t,e,n,r){let i;for(const s of e)if(i=qE(GY(s,t),n),typeof i<"u")return C_(t,i)?S_(n,r,t,i):i}function qE(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function E5(t){let e=t._keys;return e||(e=t._keys=eZ(t._scopes)),e}function eZ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function YE(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,f;for(a=0,l=r;a<l;++a)c=a+n,f=e[c],o[a]={r:i.parse(lf(f,s),c)};return o}const tZ=Number.EPSILON||1e-14,fp=(t,e)=>e<t.length&&!t[e].skip&&t[e],ZE=t=>t==="x"?"y":"x";function nZ(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=J2(s,i),l=J2(o,s);let c=a/(a+l),f=l/(a+l);c=isNaN(c)?0:c,f=isNaN(f)?0:f;const p=r*c,y=r*f;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+y*(o.x-i.x),y:s.y+y*(o.y-i.y)}}}function rZ(t,e,n){const r=t.length;let i,s,o,a,l,c=fp(t,0);for(let f=0;f<r-1;++f)if(l=c,c=fp(t,f+1),!(!l||!c)){if(Eg(e[f],0,tZ)){n[f]=n[f+1]=0;continue}i=n[f]/e[f],s=n[f+1]/e[f],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[f]=i*o*e[f],n[f+1]=s*o*e[f])}}function iZ(t,e,n="x"){const r=ZE(n),i=t.length;let s,o,a,l=fp(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=fp(t,c+1),!a)continue;const f=a[n],p=a[r];o&&(s=(f-o[n])/3,a[`cp1${n}`]=f-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-f)/3,a[`cp2${n}`]=f+s,a[`cp2${r}`]=p+s*e[c])}}function sZ(t,e="x"){const n=ZE(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=fp(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=fp(t,o+1),!!l){if(c){const f=c[e]-l[e];i[o]=f!==0?(c[n]-l[n])/f:0}s[o]=a?c?jc(i[o-1])!==jc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}rZ(t,i,s),iZ(t,s,e)}function h0(t,e,n){return Math.max(Math.min(t,n),e)}function oZ(t,e){let n,r,i,s,o,a=vh(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&vh(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=h0(i.cp1x,e.left,e.right),i.cp1y=h0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=h0(i.cp2x,e.left,e.right),i.cp2y=h0(i.cp2y,e.top,e.bottom)))}function aZ(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")sZ(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=nZ(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&oZ(t,n)}function E_(){return typeof window<"u"&&typeof document<"u"}function P_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Pv(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const vy=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function lZ(t,e){return vy(t).getPropertyValue(e)}const uZ=["top","right","bottom","left"];function Kf(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=uZ[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const cZ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function hZ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(cZ(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Nf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=vy(n),s=i.boxSizing==="border-box",o=Kf(i,"padding"),a=Kf(i,"border","width"),{x:l,y:c,box:f}=hZ(t,n),p=o.left+(f&&a.left),y=o.top+(f&&a.top);let{width:m,height:C}=e;return s&&(m-=o.width+a.width,C-=o.height+a.height),{x:Math.round((l-p)/m*n.width/r),y:Math.round((c-y)/C*n.height/r)}}function fZ(t,e,n){let r,i;if(e===void 0||n===void 0){const s=P_(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=vy(s),l=Kf(a,"border","width"),c=Kf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Pv(a.maxWidth,s,"clientWidth"),i=Pv(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Sv,maxHeight:i||Sv}}const f0=t=>Math.round(t*10)/10;function dZ(t,e,n,r){const i=vy(t),s=Kf(i,"margin"),o=Pv(i.maxWidth,t,"clientWidth")||Sv,a=Pv(i.maxHeight,t,"clientHeight")||Sv,l=fZ(t,e,n);let{width:c,height:f}=l;if(i.boxSizing==="content-box"){const y=Kf(i,"border","width"),m=Kf(i,"padding");c-=m.width+y.width,f-=m.height+y.height}return c=Math.max(0,c-s.width),f=Math.max(0,r?c/r:f-s.height),c=f0(Math.min(c,o,l.maxWidth)),f=f0(Math.min(f,a,l.maxHeight)),c&&!f&&(f=f0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&f>l.height&&(f=l.height,c=f0(Math.floor(f*r))),{width:c,height:f}}function P5(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const pZ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};E_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function k5(t,e){const n=lZ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Bf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function gZ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function mZ(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Bf(t,i,n),a=Bf(i,s,n),l=Bf(s,e,n),c=Bf(o,a,n),f=Bf(a,l,n);return Bf(c,f,n)}const vZ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},yZ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function np(t,e,n){return t?vZ(e,n):yZ()}function KE(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function XE(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function JE(t){return t==="angle"?{between:Jg,compare:bY,normalize:iu}:{between:gh,compare:(e,n)=>e-n,normalize:e=>e}}function M5({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function bZ(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=JE(r),l=e.length;let{start:c,end:f,loop:p}=t,y,m;if(p){for(c+=l,f+=l,y=0,m=l;y<m&&o(a(e[c%l][r]),i,s);++y)c--,f--;c%=l,f%=l}return f<c&&(f+=l),{start:c,end:f,loop:p,style:t.style}}function QE(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=JE(r),{start:f,end:p,loop:y,style:m}=bZ(t,e,n),C=[];let S=!1,T=null,O,D,N;const U=()=>l(i,N,O)&&a(i,N)!==0,G=()=>a(s,O)===0||l(s,N,O),J=()=>S||U(),ee=()=>!S||G();for(let V=f,K=f;V<=p;++V)D=e[V%o],!D.skip&&(O=c(D[r]),O!==N&&(S=l(O,i,s),T===null&&J()&&(T=a(O,i)===0?V:K),T!==null&&ee()&&(C.push(M5({start:T,end:V,loop:y,count:o,style:m})),T=null),K=V,N=O));return T!==null&&C.push(M5({start:T,end:p,loop:y,count:o,style:m})),C}function eP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=QE(r[i],t.points,e);s.length&&n.push(...s)}return n}function _Z(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function wZ(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function xZ(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=_Z(n,i,s,r);if(r===!0)return A5(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return A5(t,wZ(n,o,l,c),n,e)}function A5(t,e,n,r){return!r||!r.setContext||!n?e:LZ(t,e,n,r)}function LZ(t,e,n,r){const i=t._chart.getContext(),s=T5(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let f=s,p=e[0].start,y=p;function m(C,S,T,O){const D=a?-1:1;if(C!==S){for(C+=l;n[C%l].skip;)C-=D;for(;n[S%l].skip;)S+=D;C%l!==S%l&&(c.push({start:C%l,end:S%l,loop:T,style:O}),f=O,p=S%l)}}for(const C of e){p=a?p:C.start;let S=n[p%l],T;for(y=p+1;y<=C.end;y++){const O=n[y%l];T=T5(r.setContext(df(i,{type:"segment",p0:S,p1:O,p0DataIndex:(y-1)%l,p1DataIndex:y%l,datasetIndex:o}))),CZ(T,f)&&m(p,y-1,C.loop,f),S=O,f=T}p<y-1&&m(p,y-1,C.loop,f)}return c}function T5(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function CZ(t,e){if(!e)return!1;const n=[],r=function(i,s){return w_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class SZ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=RE.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var lh=new SZ;const O5="transparent",EZ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=x5(t||O5),i=r.valid&&x5(e||O5);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class PZ{constructor(e,n,r,i){const s=n[r];i=ng([e.to,i,s,e.from]);const o=ng([e.from,s,i]);this._active=!0,this._fn=e.fn||EZ[e.type||typeof o],this._easing=Pg[e.easing]||Pg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=ng([e.to,n,i,e.from]),this._from=ng([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class tP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ai(e))return;const n=Object.keys(Zs.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!ai(s))return;const o={};for(const a of n)o[a]=s[a];(bs(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=MZ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&kZ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const f=n[c];let p=s[c];const y=r.get(c);if(p)if(y&&p.active()){p.update(y,f,a);continue}else p.cancel();if(!y||!y.duration){e[c]=f;continue}s[c]=p=new PZ(y,e,c,f),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return lh.add(this._chart,r),!0}}function kZ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function MZ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function D5(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function AZ(t,e,n){if(n===!1)return!1;const r=D5(t,n),i=D5(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function TZ(t){let e,n,r,i;return ai(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function nP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function I5(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],Ys(c)&&(s||e===0||jc(e)===jc(c))&&(e+=c)}return e}}function OZ(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function N5(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function DZ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function IZ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function NZ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function B5(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function R5(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,f=DZ(s,o,r),p=e.length;let y;for(let m=0;m<p;++m){const C=e[m],{[l]:S,[c]:T}=C,O=C._stacks||(C._stacks={});y=O[c]=NZ(i,f,S),y[a]=T,y._top=B5(y,o,!0,r.type),y._bottom=B5(y,o,!1,r.type);const D=y._visualValues||(y._visualValues={});D[a]=T}}function $1(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function BZ(t,e){return df(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function RZ(t,e,n){return df(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function jp(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const V1=t=>t==="reset"||t==="none",F5=(t,e)=>e?t:Object.assign({},t),FZ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:nP(n,!0),values:null};class oc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=N5(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&jp(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,y,m,C)=>p==="x"?y:p==="r"?C:m,s=n.xAxisID=Ur(r.xAxisID,$1(e,"x")),o=n.yAxisID=Ur(r.yAxisID,$1(e,"y")),a=n.rAxisID=Ur(r.rAxisID,$1(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),f=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&b5(this._data,this),e._stacked&&jp(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ai(n))this._data=OZ(n);else if(r!==n){if(r){b5(r,this);const i=this._cachedMeta;jp(i),i._parsed=[]}n&&Object.isExtensible(n)&&LY(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=N5(n.vScale,n),n.stack!==r.stack&&(i=!0,jp(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&R5(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],f,p,y;if(this._parsing===!1)r._parsed=i,r._sorted=!0,y=i;else{bs(i[e])?y=this.parseArrayData(r,i,e,n):ai(i[e])?y=this.parseObjectData(r,i,e,n):y=this.parsePrimitiveData(r,i,e,n);const m=()=>p[a]===null||c&&p[a]<c[a];for(f=0;f<n;++f)r._parsed[f+e]=p=y[f],l&&(m()&&(l=!1),c=p);r._sorted=l}o&&R5(this,y)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),f=s===o,p=new Array(i);let y,m,C;for(y=0,m=i;y<m;++y)C=y+r,p[y]={[a]:f||s.parse(c[C],C),[l]:o.parse(n[C],C)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,f,p;for(l=0,c=i;l<c;++l)f=l+r,p=n[f],a[l]={x:s.parse(p[0],f),y:o.parse(p[1],f)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let f,p,y,m;for(f=0,p=i;f<p;++f)y=f+r,m=n[y],c[f]={x:s.parse(lf(m,a),y),y:o.parse(lf(m,l),y)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:nP(i,!0),values:n._stacks[e.axis]._visualValues};return I5(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=I5(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=FZ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:p}=IZ(a);let y,m;function C(){m=i[y];const S=m[a.axis];return!Ys(m[e.axis])||f>S||p<S}for(y=0;y<o&&!(!C()&&(this.updateRangeFromParsed(c,e,m,l),s));++y);if(s){for(y=o-1;y>=0;--y)if(!C()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Ys(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=TZ(Ur(this.options.clip,AZ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let f;for(r.dataset&&r.dataset.draw(e,s,a,l),f=a;f<a+l;++f){const p=i[f];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(f=0;f<o.length;++f)o[f].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=RZ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=BZ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Xg(r);if(a)return F5(a,l);const c=this.chart.config,f=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],y=c.getOptionScopes(this.getDataset(),f),m=Object.keys(Zs.elements[e]),C=()=>this.getContext(r,i,n),S=c.resolveNamedOptions(y,m,C,p);return S.$shared&&(S.$shared=l,s[o]=Object.freeze(F5(S,l))),S}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const f=this.chart.config,p=f.datasetAnimationScopeKeys(this._type,n),y=f.getOptionScopes(this.getDataset(),p);l=f.createResolver(y,this.getContext(e,r,n))}const c=new tP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||V1(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){V1(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!V1(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&jp(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}nt(oc,"defaults",{}),nt(oc,"datasetElementType",null),nt(oc,"dataElementType",null);function jZ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=BE(r.sort((i,s)=>i-s))}return t._cache.$bar}function zZ(t){const e=t.iScale,n=jZ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Xg(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function UZ(t,e,n,r){const i=n.barThickness;let s,o;return bi(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function $Z(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function VZ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function rP(t,e,n,r){return bs(t)?VZ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function j5(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,f,p,y;for(c=n,f=n+r;c<f;++c)y=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(rP(y,p,s,c));return l}function H1(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function HZ(t,e,n){return t!==0?jc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function WZ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function GZ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:f}=WZ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=f:(s[z5(f,o,a,l)]=!0,i=c)),s[z5(i,o,a,l)]=!0,t.borderSkipped=s}function z5(t,e,n,r){return r?(t=qZ(t,e,n),t=U5(t,n,e)):t=U5(t,e,n),t}function qZ(t,e,n){return t===e?n:t===n?e:t}function U5(t,e,n){return t==="start"?e:t==="end"?n:t}function YZ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class U0 extends oc{parsePrimitiveData(e,n,r,i){return j5(e,n,r,i)}parseArrayData(e,n,r,i){return j5(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,f=o.axis==="x"?a:l,p=[];let y,m,C,S;for(y=r,m=r+i;y<m;++y)S=n[y],C={},C[s.axis]=s.parse(lf(S,c),y),p.push(rP(lf(S,f),C,o,y));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=H1(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),f=this._getRuler(),{sharedOptions:p,includeOptions:y}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const C=this.getParsed(m),S=s||bi(C[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),T=this._calculateBarIndexPixels(m,f),O=(C._stacks||{})[a.axis],D={horizontal:c,base:S.base,enableBorderRadius:!O||H1(C._custom)||o===O._top||o===O._bottom,x:c?S.head:T.center,y:c?T.center:S.head,height:c?T.size:Math.abs(S.size),width:c?Math.abs(S.size):T.size};y&&(D.options=p||this.resolveDataElementOptions(m,e[m].active?"active":i));const N=D.options||e[m].options;GZ(D,N,O,o),YZ(D,N,f.ratio),this.updateElement(e[m],m,D,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),f=c&&c[l.vScale.axis];if(bi(f)||isNaN(f))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||zZ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,f=H1(c);let p=l[n.axis],y=0,m=r?this.applyStack(n,l,r):p,C,S;m!==p&&(y=m-p,m=p),f&&(p=c.barStart,m=c.barEnd-c.barStart,p!==0&&jc(p)!==jc(c.barEnd)&&(y=0),y+=p);const T=!bi(s)&&!f?s:y;let O=n.getPixelForValue(T);if(this.chart.getDataVisibility(e)?C=n.getPixelForValue(y+m):C=O,S=C-O,Math.abs(S)<o){S=HZ(S,n,a)*o,p===a&&(O-=S/2);const D=n.getPixelForDecimal(0),N=n.getPixelForDecimal(1),U=Math.min(D,N),G=Math.max(D,N);O=Math.max(Math.min(O,G),U),C=O+S,r&&!f&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(C)-n.getValueForPixel(O))}if(O===n.getPixelForValue(a)){const D=jc(S)*n.getLineWidthForValue(a)/2;O+=D,S-=D}return{size:S,base:O,head:C,center:C+S/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=Ur(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,f=i.barThickness==="flex"?$Z(e,n,i,c):UZ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=f.start+f.chunk*p+f.chunk/2,l=Math.min(o,f.chunk*f.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}nt(U0,"id","bar"),nt(U0,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),nt(U0,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class $0 extends oc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Ur(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Ur(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),f=o.axis,p=a.axis;for(let y=n;y<n+r;y++){const m=e[y],C=!s&&this.getParsed(y),S={},T=S[f]=s?o.getPixelForDecimal(.5):o.getPixelForValue(C[f]),O=S[p]=s?a.getBasePixel():a.getPixelForValue(C[p]);S.skip=isNaN(T)||isNaN(O),c&&(S.options=l||this.resolveDataElementOptions(y,m.active?"active":i),s&&(S.options.radius=0)),this.updateElement(m,y,S,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=Ur(r&&r._custom,s),i}}nt($0,"id","bubble"),nt($0,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),nt($0,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function ZZ(t,e,n){let r=1,i=1,s=0,o=0;if(e<as){const a=t,l=a+e,c=Math.cos(a),f=Math.sin(a),p=Math.cos(l),y=Math.sin(l),m=(N,U,G)=>Jg(N,a,l,!0)?1:Math.max(U,U*n,G,G*n),C=(N,U,G)=>Jg(N,a,l,!0)?-1:Math.min(U,U*n,G,G*n),S=m(0,c,p),T=m(co,f,y),O=C(ls,c,p),D=C(ls+co,f,y);r=(S-O)/2,i=(T-D)/2,s=-(S+O)/2,o=-(T+D)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Uf extends oc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(ai(r[e])){const{key:l="value"}=this._parsing;s=c=>+lf(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return ic(this.options.rotation-90)}_getCircumference(){return ic(this.options.circumference)}_getRotationExtents(){let e=as,n=-as;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(uY(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:f,rotation:p}=this._getRotationExtents(),{ratioX:y,ratioY:m,offsetX:C,offsetY:S}=ZZ(p,f,l),T=(r.width-o)/y,O=(r.height-o)/m,D=Math.max(Math.min(T,O)/2,0),N=TE(this.options.radius,D),U=Math.max(N*l,0),G=(N-U)/this._getVisibleDatasetWeightTotal();this.offsetX=C*N,this.offsetY=S*N,i.total=this.calculateTotal(),this.outerRadius=N-G*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-G*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/as)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,f=(a.left+a.right)/2,p=(a.top+a.bottom)/2,y=s&&c.animateScale,m=y?0:this.innerRadius,C=y?0:this.outerRadius,{sharedOptions:S,includeOptions:T}=this._getSharedOptions(n,i);let O=this._getRotation(),D;for(D=0;D<n;++D)O+=this._circumference(D,s);for(D=n;D<n+r;++D){const N=this._circumference(D,s),U=e[D],G={x:f+this.offsetX,y:p+this.offsetY,startAngle:O,endAngle:O+N,circumference:N,outerRadius:C,innerRadius:m};T&&(G.options=S||this.resolveDataElementOptions(D,U.active?"active":i)),O+=N,this.updateElement(U,D,G,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?as*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=dm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Ur(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}nt(Uf,"id","doughnut"),nt(Uf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),nt(Uf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),nt(Uf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class V0 extends oc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=jE(n,i,o);this._drawStart=a,this._drawCount=l,zE(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,i),y=o.axis,m=a.axis,{spanGaps:C,segment:S}=this.options,T=cp(C)?C:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||s||i==="none",D=n+r,N=e.length;let U=n>0&&this.getParsed(n-1);for(let G=0;G<N;++G){const J=e[G],ee=O?J:{};if(G<n||G>=D){ee.skip=!0;continue}const V=this.getParsed(G),K=bi(V[m]),pe=ee[y]=o.getPixelForValue(V[y],G),$=ee[m]=s||K?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,V,l):V[m],G);ee.skip=isNaN(pe)||isNaN($)||K,ee.stop=G>0&&Math.abs(V[y]-U[y])>T,S&&(ee.parsed=V,ee.raw=c.data[G]),p&&(ee.options=f||this.resolveDataElementOptions(G,J.active?"active":i)),O||this.updateElement(J,G,ee,i),U=V}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}nt(V0,"id","line"),nt(V0,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),nt(V0,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Mg extends oc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=dm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return YE.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,f=c.xCenter,p=c.yCenter,y=c.getIndexAngle(0)-.5*ls;let m=y,C;const S=360/this.countVisibleElements();for(C=0;C<n;++C)m+=this._computeAngle(C,i,S);for(C=n;C<n+r;C++){const T=e[C];let O=m,D=m+this._computeAngle(C,i,S),N=o.getDataVisibility(C)?c.getDistanceFromCenterForValue(this.getParsed(C).r):0;m=D,s&&(l.animateScale&&(N=0),l.animateRotate&&(O=D=y));const U={x:f,y:p,innerRadius:0,outerRadius:N,startAngle:O,endAngle:D,options:this.resolveDataElementOptions(C,T.active?"active":i)};this.updateElement(T,C,U,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?ic(this.resolveDataElementOptions(e,n).angle||r):0}}nt(Mg,"id","polarArea"),nt(Mg,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),nt(Mg,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class tb extends Uf{}nt(tb,"id","pie"),nt(tb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class H0 extends oc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return YE.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),f=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:f.x,y=o?s.yCenter:f.y,m={x:p,y,angle:f.angle,skip:isNaN(p)||isNaN(y),options:c};this.updateElement(l,a,m,i)}}}nt(H0,"id","radar"),nt(H0,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),nt(H0,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class W0 extends oc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=jE(n,r,i);if(this._drawStart=s,this._drawCount=o,zE(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,f=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(f),y=this.includeOptions(i,p),m=o.axis,C=a.axis,{spanGaps:S,segment:T}=this.options,O=cp(S)?S:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||s||i==="none";let N=n>0&&this.getParsed(n-1);for(let U=n;U<n+r;++U){const G=e[U],J=this.getParsed(U),ee=D?G:{},V=bi(J[C]),K=ee[m]=o.getPixelForValue(J[m],U),pe=ee[C]=s||V?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,J,l):J[C],U);ee.skip=isNaN(K)||isNaN(pe)||V,ee.stop=U>0&&Math.abs(J[m]-N[m])>O,T&&(ee.parsed=J,ee.raw=c.data[U]),y&&(ee.options=p||this.resolveDataElementOptions(U,G.active?"active":i)),D||this.updateElement(G,U,ee,i),N=J}this.updateSharedOptions(p,i,f)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}nt(W0,"id","scatter"),nt(W0,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),nt(W0,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var KZ=Object.freeze({__proto__:null,BarController:U0,BubbleController:$0,DoughnutController:Uf,LineController:V0,PieController:tb,PolarAreaController:Mg,RadarController:H0,ScatterController:W0});function Tf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class k_{constructor(e){nt(this,"options");this.options=e||{}}static override(e){Object.assign(k_.prototype,e)}init(){}formats(){return Tf()}parse(){return Tf()}format(){return Tf()}add(){return Tf()}diff(){return Tf()}startOf(){return Tf()}endOf(){return Tf()}}var iP={_date:k_};function XZ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?wY:mh;if(r){if(i._sharedOptions){const c=s[0],f=typeof c.getRange=="function"&&c.getRange(e);if(f){const p=l(s,e,n-f),y=l(s,e,n+f);return{lo:p.lo,hi:y.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function yy(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:f}=s[a],{lo:p,hi:y}=XZ(s[a],e,o,i);for(let m=p;m<=y;++m){const C=f[m];C.skip||r(C,c,m)}}}function JZ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function W1(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||yy(t,n,e,function(a,l,c){!i&&!vh(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function QZ(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:f}=o.getProps(["startAngle","endAngle"],r),{angle:p}=IE(o,{x:e.x,y:e.y});Jg(p,c,f)&&i.push({element:o,datasetIndex:a,index:l})}return yy(t,n,e,s),i}function eK(t,e,n,r,i,s){let o=[];const a=JZ(n);let l=Number.POSITIVE_INFINITY;function c(f,p,y){const m=f.inRange(e.x,e.y,i);if(r&&!m)return;const C=f.getCenterPoint(i);if(!(!!s||t.isPointInArea(C))&&!m)return;const T=a(e,C);T<l?(o=[{element:f,datasetIndex:p,index:y}],l=T):T===l&&o.push({element:f,datasetIndex:p,index:y})}return yy(t,n,e,c),o}function G1(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?QZ(t,e,n,i):eK(t,e,n,r,i,s)}function $5(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return yy(t,n,e,(l,c,f)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:f}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var tK={modes:{index(t,e,n,r){const i=Nf(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?W1(t,i,s,r,o):G1(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const f=a[0].index,p=c.data[f];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:f})}),l):[]},dataset(t,e,n,r){const i=Nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?W1(t,i,s,r,o):G1(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let f=0;f<c.length;++f)a.push({element:c[f],datasetIndex:l,index:f})}return a},point(t,e,n,r){const i=Nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return W1(t,i,s,r,o)},nearest(t,e,n,r){const i=Nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return G1(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Nf(e,t);return $5(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Nf(e,t);return $5(t,i,"y",n.intersect,r)}}};const sP=["left","top","right","bottom"];function zp(t,e){return t.filter(n=>n.pos===e)}function V5(t,e){return t.filter(n=>sP.indexOf(n.pos)===-1&&n.box.axis===e)}function Up(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function nK(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function rK(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!sP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function iK(t,e){const n=rK(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],f=c&&a.stackWeight/c.weight;a.horizontal?(a.width=f?f*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=f?f*i:l&&e.availableHeight)}return n}function sK(t){const e=nK(t),n=Up(e.filter(c=>c.box.fullSize),!0),r=Up(zp(e,"left"),!0),i=Up(zp(e,"right")),s=Up(zp(e,"top"),!0),o=Up(zp(e,"bottom")),a=V5(e,"x"),l=V5(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:zp(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function H5(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function oP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function oK(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!ai(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&oP(o,s.getPadding());const a=Math.max(0,e.outerWidth-H5(o,t,"left","right")),l=Math.max(0,e.outerHeight-H5(o,t,"top","bottom")),c=a!==t.w,f=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:f}:{same:f,other:c}}function aK(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function lK(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function rg(t,e,n,r){const i=[];let s,o,a,l,c,f;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,lK(a.horizontal,e));const{same:p,other:y}=oK(e,n,a,r);c|=p&&i.length,f=f||y,l.fullSize||i.push(a)}return c&&rg(i,e,n,r)||f}function d0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function W5(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},f=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*f,y=c.size||l.height;Xg(c.start)&&(o=c.start),l.fullSize?d0(l,i.left,o,n.outerWidth-i.right-i.left,y):d0(l,e.left+c.placed,o,p,y),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*f,y=c.size||l.width;Xg(c.start)&&(s=c.start),l.fullSize?d0(l,s,i.top,y,n.outerHeight-i.bottom-i.top):d0(l,s,e.top+c.placed,y,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var ja={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=za(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=sK(t.boxes),l=a.vertical,c=a.horizontal;Ii(t.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});const f=l.reduce((S,T)=>T.box.options&&T.box.options.display===!1?S:S+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/f,hBoxMaxHeight:o/2}),y=Object.assign({},i);oP(y,za(r));const m=Object.assign({maxPadding:y,w:s,h:o,x:i.left,y:i.top},i),C=iK(l.concat(c),p);rg(a.fullSize,m,p,C),rg(l,m,p,C),rg(c,m,p,C)&&rg(l,m,p,C),aK(m),W5(a.leftAndTop,m,p,C),m.x+=m.w,m.y+=m.h,W5(a.rightAndBottom,m,p,C),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ii(a.chartArea,S=>{const T=S.box;Object.assign(T,t.chartArea),T.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class aP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class uK extends aP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const G0="$chartjs",cK={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},G5=t=>t===null||t==="";function hK(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[G0]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",G5(i)){const s=k5(t,"width");s!==void 0&&(t.width=s)}if(G5(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=k5(t,"height");s!==void 0&&(t.height=s)}return t}const lP=pZ?{passive:!0}:!1;function fK(t,e,n){t.addEventListener(e,n,lP)}function dK(t,e,n){t.canvas.removeEventListener(e,n,lP)}function pK(t,e){const n=cK[t.type]||t.type,{x:r,y:i}=Nf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function kv(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function gK(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||kv(a.addedNodes,r),o=o&&!kv(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function mK(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||kv(a.removedNodes,r),o=o&&!kv(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const em=new Map;let q5=0;function uP(){const t=window.devicePixelRatio;t!==q5&&(q5=t,em.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function vK(t,e){em.size||window.addEventListener("resize",uP),em.set(t,e)}function yK(t){em.delete(t),em.size||window.removeEventListener("resize",uP)}function bK(t,e,n){const r=t.canvas,i=r&&P_(r);if(!i)return;const s=FE((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,f=l.contentRect.height;c===0&&f===0||s(c,f)});return o.observe(i),vK(t,s),o}function q1(t,e,n){n&&n.disconnect(),e==="resize"&&yK(t)}function _K(t,e,n){const r=t.canvas,i=FE(s=>{t.ctx!==null&&n(pK(s,t))},t);return fK(r,e,i),i}class wK extends aP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(hK(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[G0])return!1;const r=n[G0].initial;["height","width"].forEach(s=>{const o=r[s];bi(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[G0],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:gK,detach:mK,resize:bK}[n]||_K;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:q1,detach:q1,resize:q1}[n]||dK)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return dZ(e,n,r,i)}isAttached(e){const n=P_(e);return!!(n&&n.isConnected)}}function xK(t){return!E_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?uK:wK}var x0;let Ch=(x0=class{constructor(){nt(this,"x");nt(this,"y");nt(this,"active",!1);nt(this,"options");nt(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return cp(this.x)&&cp(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},nt(x0,"defaults",{}),nt(x0,"defaultRoutes"),x0);function LK(t,e){const n=t.options.ticks,r=CK(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?EK(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return PK(e,c,s,o/i),c;const f=SK(s,e,i);if(o>0){let p,y;const m=o>1?Math.round((l-a)/(o-1)):null;for(p0(e,c,f,bi(m)?0:a-m,a),p=0,y=o-1;p<y;p++)p0(e,c,f,s[p],s[p+1]);return p0(e,c,f,l,bi(m)?e.length:l+m),c}return p0(e,c,f),c}function CK(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function SK(t,e,n){const r=kK(t),i=e.length/n;if(!r)return Math.max(i,1);const s=vY(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function EK(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function PK(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function p0(t,e,n,r,i){const s=Ur(r,0),o=Math.min(Ur(i,t.length),t.length);let a=0,l,c,f;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),f=s;f<0;)a++,f=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===f&&(e.push(t[c]),a++,f=Math.round(s+a*n))}function kK(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const MK=t=>t==="left"?"right":t==="right"?"left":t,Y5=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Z5=(t,e)=>Math.min(e||t,t);function K5(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function AK(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function TK(t,e){Ii(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function $p(t){return t.drawTicks?t.tickLength:0}function X5(t,e){if(!t.display)return 0;const n=Oo(t.font,e),r=za(t.padding);return(bs(t.text)?t.text.length:1)*n.lineHeight+r.height}function OK(t,e){return df(t,{scale:e,type:"scale"})}function DK(t,e,n){return df(t,{tick:n,index:e,type:"tick"})}function IK(t,e,n){let r=__(t);return(n&&e!=="right"||!n&&e==="right")&&(r=MK(r)),r}function NK(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:f}=l;let p=0,y,m,C;const S=o-i,T=a-s;if(t.isHorizontal()){if(m=Oa(r,s,a),ai(n)){const O=Object.keys(n)[0],D=n[O];C=f[O].getPixelForValue(D)+S-e}else n==="center"?C=(c.bottom+c.top)/2+S-e:C=Y5(t,n,e);y=a-s}else{if(ai(n)){const O=Object.keys(n)[0],D=n[O];m=f[O].getPixelForValue(D)-T+e}else n==="center"?m=(c.left+c.right)/2-T+e:m=Y5(t,n,e);C=Oa(r,o,i),p=n==="left"?-co:co}return{titleX:m,titleY:C,maxWidth:y,rotation:p}}class sd extends Ch{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=ru(e,Number.POSITIVE_INFINITY),n=ru(n,Number.NEGATIVE_INFINITY),r=ru(r,Number.POSITIVE_INFINITY),i=ru(i,Number.NEGATIVE_INFINITY),{min:ru(e,r),max:ru(n,i),minDefined:Ys(e),maxDefined:Ys(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:ru(n,ru(r,n)),max:ru(r,ru(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){es(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=WY(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?K5(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=LK(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){es(this.options.afterUpdate,[this])}beforeSetDimensions(){es(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){es(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),es(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){es(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=es(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){es(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){es(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Z5(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const f=this._getLabelSizes(),p=f.widest.width,y=f.highest.height,m=Ko(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),p+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-$p(e.grid)-n.padding-X5(e.title,this.chart.options.font),c=Math.sqrt(p*p+y*y),o=y_(Math.min(Math.asin(Ko((f.highest.height+6)/a,-1,1)),Math.asin(Ko(l/c,-1,1))-Math.asin(Ko(y/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){es(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){es(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=X5(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=$p(s)+l):(e.height=this.maxHeight,e.width=$p(s)+l),r.display&&this.ticks.length){const{first:c,last:f,widest:p,highest:y}=this._getLabelSizes(),m=r.padding*2,C=ic(this.labelRotation),S=Math.cos(C),T=Math.sin(C);if(a){const O=r.mirror?0:T*p.width+S*y.height;e.height=Math.min(this.maxHeight,e.height+O+m)}else{const O=r.mirror?0:S*p.width+T*y.height;e.width=Math.min(this.maxWidth,e.width+O+m)}this._calculatePadding(c,f,T,S)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let y=0,m=0;l?c?(y=i*e.width,m=r*n.height):(y=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?y=e.width:s!=="inner"&&(y=e.width/2,m=n.width/2),this.paddingLeft=Math.max((y-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((m-p+o)*this.width/(this.width-p),0)}else{let f=n.height/2,p=e.height/2;s==="start"?(f=0,p=e.height):s==="end"&&(f=n.height,p=0),this.paddingTop=f+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){es(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)bi(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=K5(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Z5(n,r));let c=0,f=0,p,y,m,C,S,T,O,D,N,U,G;for(p=0;p<n;p+=l){if(C=e[p].label,S=this._resolveTickFontOptions(p),i.font=T=S.string,O=s[T]=s[T]||{data:{},gc:[]},D=S.lineHeight,N=U=0,!bi(C)&&!bs(C))N=Ev(i,O.data,O.gc,N,C),U=D;else if(bs(C))for(y=0,m=C.length;y<m;++y)G=C[y],!bi(G)&&!bs(G)&&(N=Ev(i,O.data,O.gc,N,G),U+=D);o.push(N),a.push(U),c=Math.max(N,c),f=Math.max(U,f)}TK(s,n);const J=o.indexOf(c),ee=a.indexOf(f),V=K=>({width:o[K]||0,height:a[K]||0});return{first:V(0),last:V(n-1),widest:V(J),highest:V(ee),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return _Y(this._alignToPixels?Af(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=DK(this.getContext(),e,r))}return this.$context||(this.$context=OK(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ic(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),y=$p(s),m=[],C=a.setContext(this.getContext()),S=C.display?C.width:0,T=S/2,O=function(j){return Af(r,j,S)};let D,N,U,G,J,ee,V,K,pe,$,H,oe;if(o==="top")D=O(this.bottom),ee=this.bottom-y,K=D-T,$=O(e.top)+T,oe=e.bottom;else if(o==="bottom")D=O(this.top),$=e.top,oe=O(e.bottom)-T,ee=D+T,K=this.top+y;else if(o==="left")D=O(this.right),J=this.right-y,V=D-T,pe=O(e.left)+T,H=e.right;else if(o==="right")D=O(this.left),pe=e.left,H=O(e.right)-T,J=D+T,V=this.left+y;else if(n==="x"){if(o==="center")D=O((e.top+e.bottom)/2+.5);else if(ai(o)){const j=Object.keys(o)[0],q=o[j];D=O(this.chart.scales[j].getPixelForValue(q))}$=e.top,oe=e.bottom,ee=D+T,K=ee+y}else if(n==="y"){if(o==="center")D=O((e.left+e.right)/2);else if(ai(o)){const j=Object.keys(o)[0],q=o[j];D=O(this.chart.scales[j].getPixelForValue(q))}J=D-T,V=J-y,pe=e.left,H=e.right}const ie=Ur(i.ticks.maxTicksLimit,p),R=Math.max(1,Math.ceil(p/ie));for(N=0;N<p;N+=R){const j=this.getContext(N),q=s.setContext(j),re=a.setContext(j),xe=q.lineWidth,be=q.color,_e=re.dash||[],Z=re.dashOffset,ae=q.tickWidth,ce=q.tickColor,de=q.tickBorderDash||[],ge=q.tickBorderDashOffset;U=AK(this,N,l),U!==void 0&&(G=Af(r,U,xe),c?J=V=pe=H=G:ee=K=$=oe=G,m.push({tx1:J,ty1:ee,tx2:V,ty2:K,x1:pe,y1:$,x2:H,y2:oe,width:xe,color:be,borderDash:_e,borderDashOffset:Z,tickWidth:ae,tickColor:ce,tickBorderDash:de,tickBorderDashOffset:ge}))}return this._ticksLength=p,this._borderValue=D,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:f,mirror:p}=s,y=$p(r.grid),m=y+f,C=p?-f:m,S=-ic(this.labelRotation),T=[];let O,D,N,U,G,J,ee,V,K,pe,$,H,oe="middle";if(i==="top")J=this.bottom-C,ee=this._getXAxisLabelAlignment();else if(i==="bottom")J=this.top+C,ee=this._getXAxisLabelAlignment();else if(i==="left"){const R=this._getYAxisLabelAlignment(y);ee=R.textAlign,G=R.x}else if(i==="right"){const R=this._getYAxisLabelAlignment(y);ee=R.textAlign,G=R.x}else if(n==="x"){if(i==="center")J=(e.top+e.bottom)/2+m;else if(ai(i)){const R=Object.keys(i)[0],j=i[R];J=this.chart.scales[R].getPixelForValue(j)+m}ee=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")G=(e.left+e.right)/2-m;else if(ai(i)){const R=Object.keys(i)[0],j=i[R];G=this.chart.scales[R].getPixelForValue(j)}ee=this._getYAxisLabelAlignment(y).textAlign}n==="y"&&(l==="start"?oe="top":l==="end"&&(oe="bottom"));const ie=this._getLabelSizes();for(O=0,D=a.length;O<D;++O){N=a[O],U=N.label;const R=s.setContext(this.getContext(O));V=this.getPixelForTick(O)+s.labelOffset,K=this._resolveTickFontOptions(O),pe=K.lineHeight,$=bs(U)?U.length:1;const j=$/2,q=R.color,re=R.textStrokeColor,xe=R.textStrokeWidth;let be=ee;o?(G=V,ee==="inner"&&(O===D-1?be=this.options.reverse?"left":"right":O===0?be=this.options.reverse?"right":"left":be="center"),i==="top"?c==="near"||S!==0?H=-$*pe+pe/2:c==="center"?H=-ie.highest.height/2-j*pe+pe:H=-ie.highest.height+pe/2:c==="near"||S!==0?H=pe/2:c==="center"?H=ie.highest.height/2-j*pe:H=ie.highest.height-$*pe,p&&(H*=-1),S!==0&&!R.showLabelBackdrop&&(G+=pe/2*Math.sin(S))):(J=V,H=(1-$)*pe/2);let _e;if(R.showLabelBackdrop){const Z=za(R.backdropPadding),ae=ie.heights[O],ce=ie.widths[O];let de=H-Z.top,ge=0-Z.left;switch(oe){case"middle":de-=ae/2;break;case"bottom":de-=ae;break}switch(ee){case"center":ge-=ce/2;break;case"right":ge-=ce;break;case"inner":O===D-1?ge-=ce:O>0&&(ge-=ce/2);break}_e={left:ge,top:de,width:ce+Z.width,height:ae+Z.height,color:R.backdropColor}}T.push({label:U,font:K,textOffset:H,options:{rotation:S,color:q,strokeColor:re,strokeWidth:xe,textAlign:be,textBaseline:oe,translation:[G,J],backdrop:_e}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ic(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,f;return n==="left"?i?(f=this.right+s,r==="near"?c="left":r==="center"?(c="center",f+=l/2):(c="right",f+=l)):(f=this.right-a,r==="near"?c="right":r==="center"?(c="center",f-=l/2):(c="left",f=this.left)):n==="right"?i?(f=this.left+s,r==="near"?c="right":r==="center"?(c="center",f-=l/2):(c="left",f-=l)):(f=this.left+a,r==="near"?c="left":r==="center"?(c="center",f+=l/2):(c="right",f=this.right)):c="right",{textAlign:c,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,f)=>{!f.width||!f.color||(r.save(),r.lineWidth=f.width,r.strokeStyle=f.color,r.setLineDash(f.borderDash||[]),r.lineDashOffset=f.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,f,p,y;this.isHorizontal()?(c=Af(e,this.left,o)-o/2,f=Af(e,this.right,a)+a/2,p=y=l):(p=Af(e,this.top,o)-o/2,y=Af(e,this.bottom,a)+a/2,c=f=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(f,y),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&gy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,f=o.textOffset;td(r,c,0,f,l,a)}i&&my(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Oo(r.font),o=za(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ai(n)?(l+=o.bottom,bs(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:f,maxWidth:p,rotation:y}=NK(this,l,n,a);td(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:y,textAlign:IK(a,n,i),textBaseline:"middle",translation:[c,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Ur(e.grid&&e.grid.z,-1),i=Ur(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==sd.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Oo(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class g0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;FK(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,BK(e,o,r),this.override&&Zs.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Zs[i]&&(delete Zs[i][r],this.override&&delete ed[r])}}function BK(t,e,n){const r=Kg(Object.create(null),[n?Zs.get(n):{},Zs.get(e),t.defaults]);Zs.set(e,r),t.defaultRoutes&&RK(e,t.defaultRoutes),t.descriptors&&Zs.describe(e,t.descriptors)}function RK(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Zs.route(s,i,l,a)})}function FK(t){return"id"in t&&"defaults"in t}class jK{constructor(){this.controllers=new g0(oc,"datasets",!0),this.elements=new g0(Ch,"elements"),this.plugins=new g0(Object,"plugins"),this.scales=new g0(sd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Ii(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=v_(e);es(r["before"+i],[],r),n[e](r),es(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Ac=new jK;class zK{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(es(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){bi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=Ur(r.options&&r.options.plugins,{}),s=UK(r);return i===!1&&!n?[]:VK(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function UK(t){const e={},n=[],r=Object.keys(Ac.plugins.items);for(let s=0;s<r.length;s++)n.push(Ac.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function $K(t,e){return!e&&t===!1?null:t===!0?{}:t}function VK(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=$K(r[l],i);c!==null&&s.push({plugin:a,options:HK(t.config,{plugin:a,local:n[l]},c,o)})}return s}function HK(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function nb(t,e){const n=Zs.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function WK(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function GK(t,e){return t===e?"_index_":"_value_"}function J5(t){if(t==="x"||t==="y"||t==="r")return t}function qK(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function rb(t,...e){if(J5(t))return t;for(const n of e){const r=n.axis||qK(n.position)||t.length>1&&J5(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Q5(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function YK(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Q5(t,"x",n[0])||Q5(t,"y",n[0])}return{}}function ZK(t,e){const n=ed[t.type]||{scales:{}},r=e.scales||{},i=nb(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ai(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=rb(o,a,YK(o,t),Zs.scales[a.type]),c=GK(l,i),f=n.scales||{};s[o]=Sg(Object.create(null),[{axis:l},a,f[l],f[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||nb(a,e),f=(ed[a]||{}).scales||{};Object.keys(f).forEach(p=>{const y=WK(p,l),m=o[y+"AxisID"]||y;s[m]=s[m]||Object.create(null),Sg(s[m],[{axis:y},r[m],f[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Sg(a,[Zs.scales[a.type],Zs.scale])}),s}function cP(t){const e=t.options||(t.options={});e.plugins=Ur(e.plugins,{}),e.scales=ZK(t,e)}function hP(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function KK(t){return t=t||{},t.data=hP(t.data),cP(t),t}const e3=new Map,fP=new Set;function m0(t,e){let n=e3.get(t);return n||(n=e(),e3.set(t,n),fP.add(n)),n}const Vp=(t,e,n)=>{const r=lf(e,n);r!==void 0&&t.add(r)};class XK{constructor(e){this._config=KK(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=hP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),cP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return m0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return m0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return m0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return m0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(f=>{e&&(l.add(e),f.forEach(p=>Vp(l,e,p))),f.forEach(p=>Vp(l,i,p)),f.forEach(p=>Vp(l,ed[s]||{},p)),f.forEach(p=>Vp(l,Zs,p)),f.forEach(p=>Vp(l,Q2,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),fP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ed[n]||{},Zs.datasets[n]||{},{type:n},Zs,Q2]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=t3(this._resolverCache,e,i);let l=o;if(QK(o,n)){s.$shared=!1,r=uf(r)?r():r;const c=this.createResolver(e,r,a);l=hp(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=t3(this._resolverCache,e,r);return ai(n)?hp(s,n,void 0,i):s}}function t3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:L_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const JK=t=>ai(t)&&Object.getOwnPropertyNames(t).some(e=>uf(t[e]));function QK(t,e){const{isScriptable:n,isIndexable:r}=HE(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(uf(a)||JK(a))||o&&bs(a))return!0}return!1}var eX="4.4.1";const tX=["top","bottom","left","right","chartArea"];function n3(t,e){return t==="top"||t==="bottom"||tX.indexOf(t)===-1&&e==="x"}function r3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function i3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),es(n&&n.onComplete,[t],e)}function nX(t){const e=t.chart,n=e.options.animation;es(n&&n.onProgress,[t],e)}function dP(t){return E_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const q0={},s3=t=>{const e=dP(t);return Object.values(q0).filter(n=>n.canvas===e).pop()};function rX(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function iX(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function v0(t,e,n){return t.options.clip?t[n]:e[n]}function sX(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:v0(n,e,"left"),right:v0(n,e,"right"),top:v0(r,e,"top"),bottom:v0(r,e,"bottom")}:e}class Oc{static register(...e){Ac.add(...e),o3()}static unregister(...e){Ac.remove(...e),o3()}constructor(e,n){const r=this.config=new XK(n),i=dP(e),s=s3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||xK(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,f=l&&l.width;if(this.id=lY(),this.ctx=a,this.canvas=l,this.width=f,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zK,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=CY(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],q0[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}lh.listen(this,"complete",i3),lh.listen(this,"progress",nX),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return bi(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ac}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():P5(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return C5(this.canvas,this.ctx),this}stop(){return lh.stop(this),this}resize(e,n){lh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,P5(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),es(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ii(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=rb(o,a),c=l==="r",f=l==="x";return{options:a,dposition:c?"chartArea":f?"bottom":"left",dtype:c?"radialLinear":f?"category":"linear"}}))),Ii(s,o=>{const a=o.options,l=a.id,c=rb(l,a),f=Ur(a.type,o.dtype);(a.position===void 0||n3(a.position,c)!==n3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===f)p=r[l];else{const y=Ac.getScale(f);p=new y({id:l,type:f,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),Ii(i,(o,a)=>{o||delete r[a]}),Ii(r,o=>{ja.configure(this,o,o.options),ja.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(r3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||nb(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Ac.getController(a),{datasetElementType:c,dataElementType:f}=Zs.datasets[a];Object.assign(l,{dataElementType:Ac.getElement(f),datasetElementType:c&&Ac.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ii(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,f=this.data.datasets.length;c<f;c++){const{controller:p}=this.getDatasetMeta(c),y=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(y),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Ii(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(r3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ii(this.scales,e=>{ja.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!g5(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;rX(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!g5(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ja.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ii(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,uf(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(lh.has(this)?this.attached&&!lh.running(this)&&lh.start(this):(this.draw(),i3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=sX(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&gy(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&my(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return vh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=tK.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=df(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Xg(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),lh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),C5(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete q0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ii(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ii(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ii(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Lv(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(f=>!c.some(p=>f.datasetIndex===p.datasetIndex&&f.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=pY(e),c=iX(e,this._lastEvent,r,l);r&&(this._lastEvent=null,es(s.onHover,[e,a,this],this),l&&es(s.onClick,[e,a,this],this));const f=!Lv(a,i);return(f||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,f}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}nt(Oc,"defaults",Zs),nt(Oc,"instances",q0),nt(Oc,"overrides",ed),nt(Oc,"registry",Ac),nt(Oc,"version",eX),nt(Oc,"getChart",s3);function o3(){return Ii(Oc.instances,t=>t._plugins.invalidate())}function oX(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+co,r-co),t.closePath(),t.clip()}function aX(t){return x_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function lX(t,e,n,r){const i=aX(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Ko(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ko(i.innerStart,0,o),innerEnd:Ko(i.innerEnd,0,o)}}function Id(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Mv(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:f}=e,p=Math.max(e.outerRadius+r+n-c,0),y=f>0?f+r+n+c:0;let m=0;const C=i-l;if(r){const R=f>0?f-r:0,j=p>0?p-r:0,q=(R+j)/2,re=q!==0?C*q/(q+r):C;m=(C-re)/2}const S=Math.max(.001,C*p-n/ls)/p,T=(C-S)/2,O=l+T+m,D=i-T-m,{outerStart:N,outerEnd:U,innerStart:G,innerEnd:J}=lX(e,y,p,D-O),ee=p-N,V=p-U,K=O+N/ee,pe=D-U/V,$=y+G,H=y+J,oe=O+G/$,ie=D-J/H;if(t.beginPath(),s){const R=(K+pe)/2;if(t.arc(o,a,p,K,R),t.arc(o,a,p,R,pe),U>0){const xe=Id(V,pe,o,a);t.arc(xe.x,xe.y,U,pe,D+co)}const j=Id(H,D,o,a);if(t.lineTo(j.x,j.y),J>0){const xe=Id(H,ie,o,a);t.arc(xe.x,xe.y,J,D+co,ie+Math.PI)}const q=(D-J/y+(O+G/y))/2;if(t.arc(o,a,y,D-J/y,q,!0),t.arc(o,a,y,q,O+G/y,!0),G>0){const xe=Id($,oe,o,a);t.arc(xe.x,xe.y,G,oe+Math.PI,O-co)}const re=Id(ee,O,o,a);if(t.lineTo(re.x,re.y),N>0){const xe=Id(ee,K,o,a);t.arc(xe.x,xe.y,N,O-co,K)}}else{t.moveTo(o,a);const R=Math.cos(K)*p+o,j=Math.sin(K)*p+a;t.lineTo(R,j);const q=Math.cos(pe)*p+o,re=Math.sin(pe)*p+a;t.lineTo(q,re)}t.closePath()}function uX(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Mv(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%as||as))}return Mv(t,e,n,r,l,i),t.fill(),l}function cX(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:f,borderDash:p,borderDashOffset:y}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=y,m?(t.lineWidth=c*2,t.lineJoin=f||"round"):(t.lineWidth=c,t.lineJoin=f||"bevel");let C=e.endAngle;if(s){Mv(t,e,n,r,C,i);for(let S=0;S<s;++S)t.stroke();isNaN(a)||(C=o+(a%as||as))}m&&oX(t,e,C),s||(Mv(t,e,n,r,C,i),t.stroke())}class ig extends Ch{constructor(n){super();nt(this,"circumference");nt(this,"endAngle");nt(this,"fullCircles");nt(this,"innerRadius");nt(this,"outerRadius");nt(this,"pixelMargin");nt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=IE(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:f,outerRadius:p,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,S=Ur(y,c-l)>=as||Jg(o,l,c),T=gh(a,f+m,p+m);return S&&T}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:f}=this.options,p=(s+o)/2,y=(a+l+f+c)/2;return{x:r+Math.cos(p)*y,y:i+Math.sin(p)*y}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>as?Math.floor(i/as):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(ls,i||0)),f=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,uX(n,this,f,o,a),cX(n,this,f,o,a),n.restore()}}nt(ig,"id","arc"),nt(ig,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),nt(ig,"defaultRoutes",{backgroundColor:"backgroundColor"}),nt(ig,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function pP(t,e,n=e){t.lineCap=Ur(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ur(n.borderDash,e.borderDash)),t.lineDashOffset=Ur(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ur(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ur(n.borderWidth,e.borderWidth),t.strokeStyle=Ur(n.borderColor,e.borderColor)}function hX(t,e,n){t.lineTo(n.x,n.y)}function fX(t){return t.stepped?BY:t.tension||t.cubicInterpolationMode==="monotone"?RY:hX}function gP(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),f=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!f?r+c-l:c-l}}function dX(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=gP(i,n,r),f=fX(s);let{move:p=!0,reverse:y}=r||{},m,C,S;for(m=0;m<=c;++m)C=i[(a+(y?c-m:m))%o],!C.skip&&(p?(t.moveTo(C.x,C.y),p=!1):f(t,S,C,y,s.stepped),S=C);return l&&(C=i[(a+(y?c:0))%o],f(t,S,C,y,s.stepped)),!!l}function pX(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=gP(i,n,r),{move:l=!0,reverse:c}=r||{};let f=0,p=0,y,m,C,S,T,O;const D=U=>(o+(c?a-U:U))%s,N=()=>{S!==T&&(t.lineTo(f,T),t.lineTo(f,S),t.lineTo(f,O))};for(l&&(m=i[D(0)],t.moveTo(m.x,m.y)),y=0;y<=a;++y){if(m=i[D(y)],m.skip)continue;const U=m.x,G=m.y,J=U|0;J===C?(G<S?S=G:G>T&&(T=G),f=(p*f+U)/++p):(N(),t.lineTo(U,G),C=J,p=0,S=T=G),O=G}N()}function ib(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?pX:dX}function gX(t){return t.stepped?gZ:t.tension||t.cubicInterpolationMode==="monotone"?mZ:Bf}function mX(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),pP(t,e.options),t.stroke(i)}function vX(t,e,n,r){const{segments:i,options:s}=e,o=ib(e);for(const a of i)pP(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const yX=typeof Path2D=="function";function bX(t,e,n,r){yX&&!e.options.segment?mX(t,e,n,r):vX(t,e,n,r)}class Xh extends Ch{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;aZ(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xZ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=eP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=gX(r);let c,f;for(c=0,f=o.length;c<f;++c){const{start:p,end:y}=o[c],m=s[p],C=s[y];if(m===C){a.push(m);continue}const S=Math.abs((i-m[n])/(C[n]-m[n])),T=l(m,C,S,r.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,r){return ib(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=ib(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),bX(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}nt(Xh,"id","line"),nt(Xh,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),nt(Xh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),nt(Xh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function a3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Y0 extends Ch{constructor(n){super();nt(this,"parsed");nt(this,"skip");nt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return a3(this,n,"x",r)}inYRange(n,r){return a3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!vh(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,eb(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}nt(Y0,"id","point"),nt(Y0,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),nt(Y0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function mP(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,f,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,f=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),f=Math.max(r,i)),{left:a,top:c,right:l,bottom:f}}function Jh(t,e,n,r){return t?0:Ko(e,n,r)}function _X(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=VE(r);return{t:Jh(i.top,s.top,0,n),r:Jh(i.right,s.right,0,e),b:Jh(i.bottom,s.bottom,0,n),l:Jh(i.left,s.left,0,e)}}function wX(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=Zf(i),o=Math.min(e,n),a=t.borderSkipped,l=r||ai(i);return{topLeft:Jh(!l||a.top||a.left,s.topLeft,0,o),topRight:Jh(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Jh(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Jh(!l||a.bottom||a.right,s.bottomRight,0,o)}}function xX(t){const e=mP(t),n=e.right-e.left,r=e.bottom-e.top,i=_X(t,n/2,r/2),s=wX(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Y1(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&mP(t,r);return a&&(i||gh(e,a.left,a.right))&&(s||gh(n,a.top,a.bottom))}function LX(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function CX(t,e){t.rect(e.x,e.y,e.w,e.h)}function Z1(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Z0 extends Ch{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=xX(this),a=LX(o.radius)?Qg:CX;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,Z1(o,n,s)),e.clip(),a(e,Z1(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Z1(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return Y1(this,e,n,r)}inXRange(e,n){return Y1(this,e,null,n)}inYRange(e,n){return Y1(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}nt(Z0,"id","bar"),nt(Z0,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),nt(Z0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var SX=Object.freeze({__proto__:null,ArcElement:ig,BarElement:Z0,LineElement:Xh,PointElement:Y0});const sb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],l3=sb.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function vP(t){return sb[t%sb.length]}function yP(t){return l3[t%l3.length]}function EX(t,e){return t.borderColor=vP(e),t.backgroundColor=yP(e),++e}function PX(t,e){return t.backgroundColor=t.data.map(()=>vP(e++)),e}function kX(t,e){return t.backgroundColor=t.data.map(()=>yP(e++)),e}function MX(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof Uf?e=PX(n,e):i instanceof Mg?e=kX(n,e):i&&(e=EX(n,e))}}function u3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function AX(t){return t&&(t.borderColor||t.backgroundColor)}var TX={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(u3(r)||AX(i)||s&&u3(s)))return;const o=MX(t);r.forEach(o)}};function OX(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let f=e,p,y,m,C,S;for(o[l++]=t[f],p=0;p<s-2;p++){let T=0,O=0,D;const N=Math.floor((p+1)*a)+1+e,U=Math.min(Math.floor((p+2)*a)+1,n)+e,G=U-N;for(D=N;D<U;D++)T+=t[D].x,O+=t[D].y;T/=G,O/=G;const J=Math.floor(p*a)+1+e,ee=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:V,y:K}=t[f];for(m=C=-1,D=J;D<ee;D++)C=.5*Math.abs((V-T)*(t[D].y-K)-(V-t[D].x)*(O-K)),C>m&&(m=C,y=t[D],S=D);o[l++]=y,f=S}return o[l++]=t[c],o}function DX(t,e,n,r){let i=0,s=0,o,a,l,c,f,p,y,m,C,S;const T=[],O=e+n-1,D=t[e].x,U=t[O].x-D;for(o=e;o<e+n;++o){a=t[o],l=(a.x-D)/U*r,c=a.y;const G=l|0;if(G===f)c<C?(C=c,p=o):c>S&&(S=c,y=o),i=(s*i+a.x)/++s;else{const J=o-1;if(!bi(p)&&!bi(y)){const ee=Math.min(p,y),V=Math.max(p,y);ee!==m&&ee!==J&&T.push({...t[ee],x:i}),V!==m&&V!==J&&T.push({...t[V],x:i})}o>0&&J!==m&&T.push(t[J]),T.push(a),f=G,s=0,C=S=c,p=y=m=o}}return T}function bP(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function c3(t){t.data.datasets.forEach(e=>{bP(e)})}function IX(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Ko(mh(e,s.axis,o).lo,0,n-1)),c?i=Ko(mh(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var NX={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){c3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(ng([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const f=t.scales[l.xAxisID];if(f.type!=="linear"&&f.type!=="time"||t.options.parsing)return;let{start:p,count:y}=IX(l,c);const m=n.threshold||4*r;if(y<=m){bP(i);return}bi(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(S){this._data=S}}));let C;switch(n.algorithm){case"lttb":C=OX(c,p,y,r,n);break;case"min-max":C=DX(c,p,y,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=C})},destroy(t){c3(t)}};function BX(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=M_(l,c,i);const f=ob(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:f,start:i[l],end:i[c]});continue}const p=eP(e,f);for(const y of p){const m=ob(n,s[y.start],s[y.end],y.loop),C=QE(a,i,m);for(const S of C)o.push({source:S,target:y,start:{[n]:h3(f,m,"start",Math.max)},end:{[n]:h3(f,m,"end",Math.min)}})}}return o}function ob(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=iu(i),s=iu(s)),{property:t,start:i,end:s}}function RX(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=M_(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function M_(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function h3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function _P(t,e){let n=[],r=!1;return bs(t)?(r=!0,n=t):n=RX(t,e),n.length?new Xh({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function f3(t){return t&&t.fill!==!1}function FX(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Ys(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function jX(t,e,n){const r=VX(t);if(ai(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Ys(i)&&Math.floor(i)===i?zX(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function zX(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function UX(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:ai(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function $X(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:ai(t)?r=t.value:r=e.getBaseValue(),r}function VX(t){const e=t.options,n=e.fill;let r=Ur(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function HX(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=WX(e,n);a.push(_P({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let f=c.start;f<=c.end;f++)GX(i,o[f],a)}return new Xh({points:i,options:{}})}function WX(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function GX(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=qX(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function qX(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const f=s[c],p=o[f.start][n],y=o[f.end][n];if(gh(i,p,y)){a=i===p,l=i===y;break}}return{first:a,last:l,point:r}}class wP{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:as},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function YX(t){const{chart:e,fill:n,line:r}=t;if(Ys(n))return ZX(e,n);if(n==="stack")return HX(t);if(n==="shape")return!0;const i=KX(t);return i instanceof wP?i:_P(i,r)}function ZX(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function KX(t){return(t.scale||{}).getPointPositionForValue?JX(t):XX(t)}function XX(t){const{scale:e={},fill:n}=t,r=UX(n,e);if(Ys(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function JX(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=$X(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new wP({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function K1(t,e,n){const r=YX(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:f=c,below:p=c}=l||{};r&&i.points.length&&(gy(t,n),QX(t,{line:i,target:r,above:f,below:p,area:n,scale:s,axis:o}),my(t))}function QX(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(d3(t,r,o.top),p3(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),d3(t,r,o.bottom)),p3(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function d3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,f=i[l],p=i[M_(l,c,i)];s?(t.moveTo(f.x,f.y),s=!1):(t.lineTo(f.x,n),t.lineTo(f.x,f.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function p3(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=BX(n,r,i);for(const{source:l,target:c,start:f,end:p}of a){const{style:{backgroundColor:y=s}={}}=l,m=r!==!0;t.save(),t.fillStyle=y,eJ(t,o,m&&ob(i,f,p)),t.beginPath();const C=!!n.pathSegment(t,l);let S;if(m){C?t.closePath():g3(t,r,p,i);const T=!!r.pathSegment(t,c,{move:C,reverse:!0});S=C&&T,S||g3(t,r,f,i)}t.closePath(),t.fill(S?"evenodd":"nonzero"),t.restore()}}function eJ(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function g3(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var tJ={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Xh&&(l={visible:t.isDatasetVisible(o),index:o,fill:jX(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=FX(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&K1(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;f3(s)&&K1(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!f3(r)||n.drawTime!=="beforeDatasetDraw"||K1(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const m3=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},nJ=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class v3 extends Ch{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=es(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Oo(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=m3(r,s);let c,f;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,f=this._fitRows(o,s,a,l)+10):(f=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],f=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let y=-1,m=-f;return this.legendItems.forEach((C,S)=>{const T=r+n/2+s.measureText(C.text).width;(S===0||c[c.length-1]+T+2*a>o)&&(p+=f,c[c.length-(S>0?0:1)]=0,m+=f,y++),l[S]={left:0,top:m,row:y,width:T,height:i},c[c.length-1]+=T+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],f=o-e;let p=a,y=0,m=0,C=0,S=0;return this.legendItems.forEach((T,O)=>{const{itemWidth:D,itemHeight:N}=rJ(r,n,s,T,i);O>0&&m+N+2*a>f&&(p+=y+a,c.push({width:y,height:m}),C+=y+a,S++,y=m=0),l[O]={left:C,top:m,col:S,width:D,height:N},y=Math.max(y,D),m+=N+a}),p+=y,c.push({width:y,height:m}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=np(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Oa(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Oa(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Oa(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Oa(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;gy(e,this),this._draw(),my(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Zs.color,l=np(e.rtl,this.left,this.width),c=Oo(o.font),{padding:f}=o,p=c.size,y=p/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:C,boxHeight:S,itemHeight:T}=m3(o,p),O=function(J,ee,V){if(isNaN(C)||C<=0||isNaN(S)||S<0)return;i.save();const K=Ur(V.lineWidth,1);if(i.fillStyle=Ur(V.fillStyle,a),i.lineCap=Ur(V.lineCap,"butt"),i.lineDashOffset=Ur(V.lineDashOffset,0),i.lineJoin=Ur(V.lineJoin,"miter"),i.lineWidth=K,i.strokeStyle=Ur(V.strokeStyle,a),i.setLineDash(Ur(V.lineDash,[])),o.usePointStyle){const pe={radius:S*Math.SQRT2/2,pointStyle:V.pointStyle,rotation:V.rotation,borderWidth:K},$=l.xPlus(J,C/2),H=ee+y;$E(i,pe,$,H,o.pointStyleWidth&&C)}else{const pe=ee+Math.max((p-S)/2,0),$=l.leftForLtr(J,C),H=Zf(V.borderRadius);i.beginPath(),Object.values(H).some(oe=>oe!==0)?Qg(i,{x:$,y:pe,w:C,h:S,radius:H}):i.rect($,pe,C,S),i.fill(),K!==0&&i.stroke()}i.restore()},D=function(J,ee,V){td(i,V.text,J,ee+T/2,c,{strikethrough:V.hidden,textAlign:l.textAlign(V.textAlign)})},N=this.isHorizontal(),U=this._computeTitleHeight();N?m={x:Oa(s,this.left+f,this.right-r[0]),y:this.top+f+U,line:0}:m={x:this.left+f,y:Oa(s,this.top+U+f,this.bottom-n[0].height),line:0},KE(this.ctx,e.textDirection);const G=T+f;this.legendItems.forEach((J,ee)=>{i.strokeStyle=J.fontColor,i.fillStyle=J.fontColor;const V=i.measureText(J.text).width,K=l.textAlign(J.textAlign||(J.textAlign=o.textAlign)),pe=C+y+V;let $=m.x,H=m.y;l.setWidth(this.width),N?ee>0&&$+pe+f>this.right&&(H=m.y+=G,m.line++,$=m.x=Oa(s,this.left+f,this.right-r[m.line])):ee>0&&H+G>this.bottom&&($=m.x=$+n[m.line].width+f,m.line++,H=m.y=Oa(s,this.top+U+f,this.bottom-n[m.line].height));const oe=l.x($);if(O(oe,H,J),$=SY(K,$+C+y,N?$+pe:this.right,e.rtl),D(l.x($),H,J),N)m.x+=pe+f;else if(typeof J.text!="string"){const ie=c.lineHeight;m.y+=xP(J,ie)+f}else m.y+=G}),XE(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Oo(n.font),i=za(n.padding);if(!n.display)return;const s=np(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let f,p=this.left,y=this.width;if(this.isHorizontal())y=Math.max(...this.lineWidths),f=this.top+c,p=Oa(e.align,p,this.right-y);else{const C=this.columnSizes.reduce((S,T)=>Math.max(S,T.height),0);f=c+Oa(e.align,this.top,this.bottom-C-e.labels.padding-this._computeTitleHeight())}const m=Oa(a,p,p+y);o.textAlign=s.textAlign(__(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,td(o,n.text,m,f,r)}_computeTitleHeight(){const e=this.options.title,n=Oo(e.font),r=za(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(gh(e,this.left,this.right)&&gh(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],gh(e,i.left,i.left+i.width)&&gh(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!oJ(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=nJ(i,r);i&&!s&&es(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&es(n.onHover,[e,r,this],this)}else r&&es(n.onClick,[e,r,this],this)}}function rJ(t,e,n,r,i){const s=iJ(r,t,e,n),o=sJ(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function iJ(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function sJ(t,e,n){let r=t;return typeof e.text!="string"&&(r=xP(e,n)),r}function xP(t,e){const n=t.text?t.text.length:0;return e*n}function oJ(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var aJ={id:"legend",_element:v3,start(t,e,n){const r=t.legend=new v3({ctx:t.ctx,options:n,chart:t});ja.configure(t,r,n),ja.addBox(t,r)},stop(t){ja.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;ja.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),f=za(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class A_ extends Ch{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=bs(r.text)?r.text.length:1;this._padding=za(r.padding);const s=i*Oo(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,f,p;return this.isHorizontal()?(f=Oa(a,r,s),p=n+e,c=s-r):(o.position==="left"?(f=r+e,p=Oa(a,i,n),l=ls*-.5):(f=s-e,p=Oa(a,n,i),l=ls*.5),c=i-n),{titleX:f,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Oo(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);td(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:__(n.align),textBaseline:"middle",translation:[o,a]})}}function lJ(t,e){const n=new A_({ctx:t.ctx,options:e,chart:t});ja.configure(t,n,e),ja.addBox(t,n),t.titleBlock=n}var uJ={id:"title",_element:A_,start(t,e,n){lJ(t,n)},stop(t){const e=t.titleBlock;ja.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;ja.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const y0=new WeakMap;var cJ={id:"subtitle",start(t,e,n){const r=new A_({ctx:t.ctx,options:n,chart:t});ja.configure(t,r,n),ja.addBox(t,r),y0.set(t,r)},stop(t){ja.removeBox(t,y0.get(t)),y0.delete(t)},beforeUpdate(t,e,n){const r=y0.get(t);ja.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const sg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),f=J2(e,c);f<i&&(i=f,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function kc(t,e){return e&&(bs(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function uh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function hJ(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function y3(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Oo(e.bodyFont),c=Oo(e.titleFont),f=Oo(e.footerFont),p=s.length,y=i.length,m=r.length,C=za(e.padding);let S=C.height,T=0,O=r.reduce((U,G)=>U+G.before.length+G.lines.length+G.after.length,0);if(O+=t.beforeBody.length+t.afterBody.length,p&&(S+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),O){const U=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;S+=m*U+(O-m)*l.lineHeight+(O-1)*e.bodySpacing}y&&(S+=e.footerMarginTop+y*f.lineHeight+(y-1)*e.footerSpacing);let D=0;const N=function(U){T=Math.max(T,n.measureText(U).width+D)};return n.save(),n.font=c.string,Ii(t.title,N),n.font=l.string,Ii(t.beforeBody.concat(t.afterBody),N),D=e.displayColors?o+2+e.boxPadding:0,Ii(r,U=>{Ii(U.before,N),Ii(U.lines,N),Ii(U.after,N)}),D=0,n.font=f.string,Ii(t.footer,N),n.restore(),T+=C.width,{width:T,height:S}}function fJ(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function dJ(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function pJ(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),dJ(c,t,e,n)&&(c="center"),c}function b3(t,e,n){const r=n.yAlign||e.yAlign||fJ(t,n);return{xAlign:n.xAlign||e.xAlign||pJ(t,e,n,r),yAlign:r}}function gJ(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function mJ(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function _3(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:f,topRight:p,bottomLeft:y,bottomRight:m}=Zf(o);let C=gJ(e,a);const S=mJ(e,l,c);return l==="center"?a==="left"?C+=c:a==="right"&&(C-=c):a==="left"?C-=Math.max(f,y)+i:a==="right"&&(C+=Math.max(p,m)+i),{x:Ko(C,0,r.width-e.width),y:Ko(S,0,r.height-e.height)}}function b0(t,e,n){const r=za(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function w3(t){return kc([],uh(t))}function vJ(t,e,n){return df(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function x3(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const LP={beforeTitle:ah,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:ah,beforeBody:ah,beforeLabel:ah,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return bi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ah,afterBody:ah,beforeFooter:ah,footer:ah,afterFooter:ah};function kl(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?LP[e].call(n,r):i}class ab extends Ch{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new tP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=vJ(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=kl(r,"beforeTitle",this,e),s=kl(r,"title",this,e),o=kl(r,"afterTitle",this,e);let a=[];return a=kc(a,uh(i)),a=kc(a,uh(s)),a=kc(a,uh(o)),a}getBeforeBody(e,n){return w3(kl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Ii(e,s=>{const o={before:[],lines:[],after:[]},a=x3(r,s);kc(o.before,uh(kl(a,"beforeLabel",this,s))),kc(o.lines,kl(a,"label",this,s)),kc(o.after,uh(kl(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return w3(kl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=kl(r,"beforeFooter",this,e),s=kl(r,"footer",this,e),o=kl(r,"afterFooter",this,e);let a=[];return a=kc(a,uh(i)),a=kc(a,uh(s)),a=kc(a,uh(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(hJ(this.chart,n[l]));return e.filter&&(a=a.filter((f,p,y)=>e.filter(f,p,y,r))),e.itemSort&&(a=a.sort((f,p)=>e.itemSort(f,p,r))),Ii(a,f=>{const p=x3(e.callbacks,f);i.push(kl(p,"labelColor",this,f)),s.push(kl(p,"labelPointStyle",this,f)),o.push(kl(p,"labelTextColor",this,f))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=sg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=y3(this,r),c=Object.assign({},a,l),f=b3(this.chart,r,c),p=_3(r,c,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:f,bottomRight:p}=Zf(a),{x:y,y:m}=e,{width:C,height:S}=n;let T,O,D,N,U,G;return s==="center"?(U=m+S/2,i==="left"?(T=y,O=T-o,N=U+o,G=U-o):(T=y+C,O=T+o,N=U-o,G=U+o),D=T):(i==="left"?O=y+Math.max(l,f)+o:i==="right"?O=y+C-Math.max(c,p)-o:O=this.caretX,s==="top"?(N=m,U=N-o,T=O-o,D=O+o):(N=m+S,U=N+o,T=O+o,D=O-o),G=N),{x1:T,x2:O,x3:D,y1:N,y2:U,y3:G}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=np(r.rtl,this.x,this.width);for(e.x=b0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Oo(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,f=Oo(s.bodyFont),p=b0(this,"left",s),y=i.x(p),m=l<f.lineHeight?(f.lineHeight-l)/2:0,C=n.y+m;if(s.usePointStyle){const S={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=i.leftForLtr(y,c)+c/2,O=C+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,eb(e,S,T,O),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,eb(e,S,T,O)}else{e.lineWidth=ai(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const S=i.leftForLtr(y,c),T=i.leftForLtr(i.xPlus(y,1),c-2),O=Zf(o.borderRadius);Object.values(O).some(D=>D!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Qg(e,{x:S,y:C,w:c,h:l,radius:O}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Qg(e,{x:T,y:C+1,w:c-2,h:l-2,radius:O}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(S,C,c,l),e.strokeRect(S,C,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,C+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:f}=r,p=Oo(r.bodyFont);let y=p.lineHeight,m=0;const C=np(r.rtl,this.x,this.width),S=function(V){n.fillText(V,C.x(e.x+m),e.y+y/2),e.y+=y+s},T=C.textAlign(o);let O,D,N,U,G,J,ee;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=b0(this,T,r),n.fillStyle=r.bodyColor,Ii(this.beforeBody,S),m=a&&T!=="right"?o==="center"?c/2+f:c+2+f:0,U=0,J=i.length;U<J;++U){for(O=i[U],D=this.labelTextColors[U],n.fillStyle=D,Ii(O.before,S),N=O.lines,a&&N.length&&(this._drawColorBox(n,e,U,C,r),y=Math.max(p.lineHeight,l)),G=0,ee=N.length;G<ee;++G)S(N[G]),y=p.lineHeight;Ii(O.after,S)}m=0,y=p.lineHeight,Ii(this.afterBody,S),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=np(r.rtl,this.x,this.width);for(e.x=b0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Oo(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:f}=r,{topLeft:p,topRight:y,bottomLeft:m,bottomRight:C}=Zf(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-y,l),n.quadraticCurveTo(a+c,l,a+c,l+y),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+f-C),n.quadraticCurveTo(a+c,l+f,a+c-C,l+f),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+f),n.quadraticCurveTo(a,l+f,a,l+f-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=sg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=y3(this,e),l=Object.assign({},o,this._size),c=b3(n,e,l),f=_3(e,l,c,n);(i._to!==f.x||s._to!==f.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=za(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),KE(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),XE(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Lv(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Lv(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=sg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}nt(ab,"positioners",sg);var yJ={id:"tooltip",_element:ab,positioners:sg,afterInit(t,e,n){n&&(t.tooltip=new ab({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:LP},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},bJ=Object.freeze({__proto__:null,Colors:TX,Decimation:NX,Filler:tJ,Legend:aJ,SubTitle:cJ,Title:uJ,Tooltip:yJ});const _J=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function wJ(t,e,n,r){const i=t.indexOf(e);if(i===-1)return _J(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const xJ=(t,e)=>t===null?null:Ko(Math.round(t),0,e);function L3(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class lb extends sd{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(bi(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:wJ(r,e,Ur(n,e),this._addedLabels),xJ(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return L3.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}nt(lb,"id","category"),nt(lb,"defaults",{ticks:{callback:L3}});function LJ(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:f,maxDigits:p,includeBounds:y}=t,m=s||1,C=f-1,{min:S,max:T}=e,O=!bi(o),D=!bi(a),N=!bi(c),U=(T-S)/(p+1);let G=v5((T-S)/C/m)*m,J,ee,V,K;if(G<1e-14&&!O&&!D)return[{value:S},{value:T}];K=Math.ceil(T/G)-Math.floor(S/G),K>C&&(G=v5(K*G/C/m)*m),bi(l)||(J=Math.pow(10,l),G=Math.ceil(G*J)/J),i==="ticks"?(ee=Math.floor(S/G)*G,V=Math.ceil(T/G)*G):(ee=S,V=T),O&&D&&s&&yY((a-o)/s,G/1e3)?(K=Math.round(Math.min((a-o)/G,f)),G=(a-o)/K,ee=o,V=a):N?(ee=O?o:ee,V=D?a:V,K=c-1,G=(V-ee)/K):(K=(V-ee)/G,Eg(K,Math.round(K),G/1e3)?K=Math.round(K):K=Math.ceil(K));const pe=Math.max(y5(G),y5(ee));J=Math.pow(10,bi(l)?pe:l),ee=Math.round(ee*J)/J,V=Math.round(V*J)/J;let $=0;for(O&&(y&&ee!==o?(n.push({value:o}),ee<o&&$++,Eg(Math.round((ee+$*G)*J)/J,o,C3(o,U,t))&&$++):ee<o&&$++);$<K;++$){const H=Math.round((ee+$*G)*J)/J;if(D&&H>a)break;n.push({value:H})}return D&&y&&V!==a?n.length&&Eg(n[n.length-1].value,a,C3(a,U,t))?n[n.length-1].value=a:n.push({value:a}):(!D||V===a)&&n.push({value:V}),n}function C3(t,e,{horizontal:n,minRotation:r}){const i=ic(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Av extends sd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return bi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=jc(i),c=jc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=LJ(i,s);return e.bounds==="ticks"&&DE(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return dm(e,this.chart.options.locale,this.options.ticks.format)}}class ub extends Av{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ys(e)?e:0,this.max=Ys(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ic(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}nt(ub,"id","linear"),nt(ub,"defaults",{ticks:{callback:py.formatters.numeric}});const tm=t=>Math.floor(Kh(t)),Of=(t,e)=>Math.pow(10,tm(t)+e);function S3(t){return t/Math.pow(10,tm(t))===1}function E3(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function CJ(t,e){const n=e-t;let r=tm(n);for(;E3(t,e,r)>10;)r++;for(;E3(t,e,r)<10;)r--;return Math.min(r,tm(t))}function SJ(t,{min:e,max:n}){e=ru(t.min,e);const r=[],i=tm(e);let s=CJ(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,f=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-f)/Math.pow(10,s)),y=ru(t.min,Math.round((l+f+p*Math.pow(10,s))*o)/o);for(;y<n;)r.push({value:y,major:S3(y),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),y=Math.round((l+f+p*Math.pow(10,s))*o)/o;const m=ru(t.max,y);return r.push({value:m,major:S3(m),significand:p}),r}class cb extends sd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=Av.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Ys(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ys(e)?Math.max(0,e):null,this.max=Ys(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ys(this._userMin)&&(this.min=e===Of(this.min,0)?Of(this.min,-1):Of(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Of(r,-1)),o(Of(i,1)))),r<=0&&s(Of(i,-1)),i<=0&&o(Of(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=SJ(n,this);return e.bounds==="ticks"&&DE(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":dm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Kh(e),this._valueRange=Kh(this.max)-Kh(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Kh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}nt(cb,"id","logarithmic"),nt(cb,"defaults",{ticks:{callback:py.formatters.logarithmic,major:{enabled:!0}}});function hb(t){const e=t.ticks;if(e.display&&t.display){const n=za(e.backdropPadding);return Ur(e.font&&e.font.size,Zs.font.size)+n.height}return 0}function EJ(t,e,n){return n=bs(n)?n:[n],{w:NY(t,e.string,n),h:n.length*e.lineHeight}}function P3(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function PJ(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?ls/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const f=t.getPointPosition(l,t.drawingArea+i[l],a),p=Oo(c.font),y=EJ(t.ctx,p,t._pointLabels[l]);r[l]=y;const m=iu(t.getIndexAngle(l)+a),C=Math.round(y_(m)),S=P3(C,f.x,y.w,0,180),T=P3(C,f.y,y.h,90,270);kJ(n,e,m,S,T)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=TJ(t,r,i)}function kJ(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function MJ(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(y_(iu(l.angle+co))),f=IJ(l.y,a.h,c),p=OJ(c),y=DJ(l.x,a.w,p);return{visible:!0,x:l.x,y:f,textAlign:p,left:y,top:f,right:y+a.w,bottom:f+a.h}}function AJ(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(vh({x:n,y:r},e)||vh({x:n,y:s},e)||vh({x:i,y:r},e)||vh({x:i,y:s},e))}function TJ(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:hb(s)/2,additionalAngle:o?ls/i:0};let c;for(let f=0;f<i;f++){l.padding=n[f],l.size=e[f];const p=MJ(t,f,l);r.push(p),a==="auto"&&(p.visible=AJ(p,c),p.visible&&(c=p))}return r}function OJ(t){return t===0||t===180?"center":t<180?"left":"right"}function DJ(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function IJ(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function NJ(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!bi(a)){const l=Zf(e.borderRadius),c=za(e.backdropPadding);t.fillStyle=a;const f=r-c.left,p=i-c.top,y=s-r+c.width,m=o-i+c.height;Object.values(l).some(C=>C!==0)?(t.beginPath(),Qg(t,{x:f,y:p,w:y,h:m,radius:l}),t.fill()):t.fillRect(f,p,y,m)}}function BJ(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));NJ(n,o,s);const a=Oo(o.font),{x:l,y:c,textAlign:f}=s;td(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:f,textBaseline:"middle"})}}function CP(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,as);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function RJ(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),CP(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function FJ(t,e,n){return df(t,{label:n,index:e,type:"pointLabel"})}class og extends Av{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=za(hb(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Ys(e)&&!isNaN(e)?e:0,this.max=Ys(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/hb(this.options))}generateTickLabels(e){Av.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=es(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?PJ(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=as/(this._pointLabels.length||1),r=this.options.startAngle||0;return iu(e*n+ic(r))}getDistanceFromCenterForValue(e){if(bi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(bi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return FJ(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-co+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),CP(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&BJ(this,o),i.display&&this.ticks.forEach((f,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(f.value);const y=this.getContext(p),m=i.setContext(y),C=s.setContext(y);RJ(this,m,l,o,C)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const f=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:y}=f;!y||!p||(e.lineWidth=y,e.strokeStyle=p,e.setLineDash(f.borderDash),e.lineDashOffset=f.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),f=Oo(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=f.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=za(c.backdropPadding);e.fillRect(-o/2-p.left,-s-f.size/2-p.top,o+p.width,f.size+p.height)}td(e,a.label,0,-s,f,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}nt(og,"id","radialLinear"),nt(og,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:py.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),nt(og,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),nt(og,"descriptors",{angleLines:{_fallback:"grid"}});const by={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Nl=Object.keys(by);function k3(t,e){return t-e}function M3(t,e){if(bi(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Ys(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(cp(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function A3(t,e,n,r){const i=Nl.length;for(let s=Nl.indexOf(t);s<i-1;++s){const o=by[Nl[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Nl[s]}return Nl[i-1]}function jJ(t,e,n,r,i){for(let s=Nl.length-1;s>=Nl.indexOf(n);s--){const o=Nl[s];if(by[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Nl[n?Nl.indexOf(n):0]}function zJ(t){for(let e=Nl.indexOf(t)+1,n=Nl.length;e<n;++e)if(by[Nl[e]].common)return Nl[e]}function T3(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=b_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function UJ(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function O3(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:UJ(t,r,i,n)}class nm extends sd{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new iP._date(e.adapters.date);i.init(n),Sg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:M3(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Ys(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Ys(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=xY(i,s,o);return this._unit=n.unit||(r.autoSkip?A3(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):jJ(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:zJ(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),O3(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ko(n,0,o),r=Ko(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||A3(s.minUnit,n,r,this._getLabelCapacity(n)),a=Ur(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=cp(l)||l===!0,f={};let p=n,y,m;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const C=i.ticks.source==="data"&&this.getDataTimestamps();for(y=p,m=0;y<r;y=+e.add(y,a,o),m++)T3(f,y,C);return(y===r||i.bounds==="ticks"||m===1)&&T3(f,y,C),Object.keys(f).sort(k3).map(S=>+S)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return es(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,f=l&&a[l],p=c&&a[c],y=r[n],m=c&&p&&y&&y.major;return this._adapter.format(e,i||(m?p:f))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=ic(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,O3(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(M3(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return BE(e.sort(k3))}}nt(nm,"id","time"),nt(nm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function _0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=mh(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=mh(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class fb extends nm{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=_0(n,this.min),this._tableRange=_0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,f;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)f=i[o+1],l=i[o-1],c=i[o],Math.round((f+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(_0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return _0(this._table,r*this._tableRange+this._minPos,!0)}}nt(fb,"id","timeseries"),nt(fb,"defaults",nm.defaults);var $J=Object.freeze({__proto__:null,CategoryScale:lb,LinearScale:ub,LogarithmicScale:cb,RadialLinearScale:og,TimeScale:nm,TimeSeriesScale:fb});const VJ=[KZ,SX,bJ,$J];Oc.register(...VJ);const SP=6048e5,HJ=864e5,pm=6e4,gm=36e5,WJ=1e3,D3=Symbol.for("constructDateFrom");function Xs(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&D3 in t?t[D3](e):t instanceof Date?new t.constructor(e):new Date(e)}function Or(t,e){return Xs(e||t,t)}function _y(t,e,n){const r=Or(t,n==null?void 0:n.in);return isNaN(e)?Xs((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function T_(t,e,n){const r=Or(t,n==null?void 0:n.in);if(isNaN(e))return Xs(t,NaN);if(!e)return r;const i=r.getDate(),s=Xs(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function O_(t,e,n){return Xs(t,+Or(t)+e)}function GJ(t,e,n){return O_(t,e*gm)}let qJ={};function od(){return qJ}function $c(t,e){var a,l,c,f;const n=od(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,i=Or(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function dp(t,e){return $c(t,{...e,weekStartsOn:1})}function EP(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getFullYear(),i=Xs(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=dp(i),o=Xs(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=dp(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function Tv(t){const e=Or(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ad(t,...e){const n=Xs.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function db(t,e){const n=Or(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function PP(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e),s=db(r),o=db(i),a=+s-Tv(s),l=+o-Tv(o);return Math.round((a-l)/HJ)}function YJ(t,e){const n=EP(t,e),r=Xs(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),dp(r)}function ZJ(t,e,n){const r=Or(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*pm),r}function KJ(t,e,n){return T_(t,e*3,n)}function XJ(t,e,n){return O_(t,e*1e3)}function JJ(t,e,n){return _y(t,e*7,n)}function QJ(t,e,n){return T_(t,e*12,n)}function Ag(t,e){const n=+Or(t)-+Or(e);return n<0?-1:n>0?1:n}function eQ(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function kP(t){return!(!eQ(t)&&typeof t!="number"||isNaN(+Or(t)))}function tQ(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function nQ(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function MP(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e),s=I3(r,i),o=Math.abs(PP(r,i));r.setDate(r.getDate()-s*o);const a=+(I3(r,i)===-s),l=s*(o-a);return l===0?0:l}function I3(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function mm(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function rQ(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e),s=(+r-+i)/gm;return mm(n==null?void 0:n.roundingMethod)(s)}function D_(t,e){return+Or(t)-+Or(e)}function iQ(t,e,n){const r=D_(t,e)/pm;return mm(n==null?void 0:n.roundingMethod)(r)}function AP(t,e){const n=Or(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function TP(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function sQ(t,e){const n=Or(t,e==null?void 0:e.in);return+AP(n,e)==+TP(n,e)}function OP(t,e,n){const[r,i,s]=ad(n==null?void 0:n.in,t,t,e),o=Ag(i,s),a=Math.abs(tQ(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=Ag(i,s)===-o;sQ(r)&&a===1&&Ag(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function oQ(t,e,n){const r=OP(t,e,n)/3;return mm(n==null?void 0:n.roundingMethod)(r)}function aQ(t,e,n){const r=D_(t,e)/1e3;return mm(n==null?void 0:n.roundingMethod)(r)}function lQ(t,e,n){const r=MP(t,e,n)/7;return mm(n==null?void 0:n.roundingMethod)(r)}function uQ(t,e,n){const[r,i]=ad(n==null?void 0:n.in,t,e),s=Ag(r,i),o=Math.abs(nQ(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=Ag(r,i)===-s,l=s*(o-+a);return l===0?0:l}function cQ(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function hQ(t,e){const n=Or(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function fQ(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function DP(t,e){const n=Or(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function dQ(t,e){const n=Or(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function pQ(t,e){var a,l;const n=od(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Or(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function gQ(t,e){const n=Or(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function mQ(t,e){const n=Or(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function vQ(t,e){const n=Or(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const yQ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},bQ=(t,e,n)=>{let r;const i=yQ[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function X1(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const _Q={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},wQ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xQ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},LQ={date:X1({formats:_Q,defaultWidth:"full"}),time:X1({formats:wQ,defaultWidth:"full"}),dateTime:X1({formats:xQ,defaultWidth:"full"})},CQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},SQ=(t,e,n,r)=>CQ[t];function Hp(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const EQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},PQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},MQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},AQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},TQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},OQ=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},DQ={ordinalNumber:OQ,era:Hp({values:EQ,defaultWidth:"wide"}),quarter:Hp({values:PQ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Hp({values:kQ,defaultWidth:"wide"}),day:Hp({values:MQ,defaultWidth:"wide"}),dayPeriod:Hp({values:AQ,defaultWidth:"wide",formattingValues:TQ,defaultFormattingWidth:"wide"})};function Wp(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?NQ(a,p=>p.test(o)):IQ(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const f=e.slice(o.length);return{value:c,rest:f}}}function IQ(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function NQ(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function BQ(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const RQ=/^(\d+)(th|st|nd|rd)?/i,FQ=/\d+/i,jQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},zQ={any:[/^b/i,/^(a|c)/i]},UQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$Q={any:[/1/i,/2/i,/3/i,/4/i]},VQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},HQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},WQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},GQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},YQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ZQ={ordinalNumber:BQ({matchPattern:RQ,parsePattern:FQ,valueCallback:t=>parseInt(t,10)}),era:Wp({matchPatterns:jQ,defaultMatchWidth:"wide",parsePatterns:zQ,defaultParseWidth:"any"}),quarter:Wp({matchPatterns:UQ,defaultMatchWidth:"wide",parsePatterns:$Q,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Wp({matchPatterns:VQ,defaultMatchWidth:"wide",parsePatterns:HQ,defaultParseWidth:"any"}),day:Wp({matchPatterns:WQ,defaultMatchWidth:"wide",parsePatterns:GQ,defaultParseWidth:"any"}),dayPeriod:Wp({matchPatterns:qQ,defaultMatchWidth:"any",parsePatterns:YQ,defaultParseWidth:"any"})},IP={code:"en-US",formatDistance:bQ,formatLong:LQ,formatRelative:SQ,localize:DQ,match:ZQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function KQ(t,e){const n=Or(t,e==null?void 0:e.in);return PP(n,DP(n))+1}function NP(t,e){const n=Or(t,e==null?void 0:e.in),r=+dp(n)-+YJ(n);return Math.round(r/SP)+1}function I_(t,e){var f,p,y,m;const n=Or(t,e==null?void 0:e.in),r=n.getFullYear(),i=od(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(y=i.locale)==null?void 0:y.options)==null?void 0:m.firstWeekContainsDate)??1,o=Xs((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=$c(o,e),l=Xs((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=$c(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function XQ(t,e){var a,l,c,f;const n=od(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,i=I_(t,e),s=Xs((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),$c(s,e)}function BP(t,e){const n=Or(t,e==null?void 0:e.in),r=+$c(n,e)-+XQ(n,e);return Math.round(r/SP)+1}function Di(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Bh={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Di(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Di(n+1,2)},d(t,e){return Di(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Di(t.getHours()%12||12,e.length)},H(t,e){return Di(t.getHours(),e.length)},m(t,e){return Di(t.getMinutes(),e.length)},s(t,e){return Di(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Di(i,e.length)}},Nd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},N3={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Bh.y(t,e)},Y:function(t,e,n,r){const i=I_(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Di(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Di(s,e.length)},R:function(t,e){const n=EP(t);return Di(n,e.length)},u:function(t,e){const n=t.getFullYear();return Di(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Di(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Di(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Bh.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Di(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=BP(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Di(i,e.length)},I:function(t,e,n){const r=NP(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Di(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Bh.d(t,e)},D:function(t,e,n){const r=KQ(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Di(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Di(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Di(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Di(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Nd.noon:r===0?i=Nd.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Nd.evening:r>=12?i=Nd.afternoon:r>=4?i=Nd.morning:i=Nd.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Bh.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Bh.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Di(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Di(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Bh.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Bh.s(t,e)},S:function(t,e){return Bh.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return R3(r);case"XXXX":case"XX":return Rf(r);case"XXXXX":case"XXX":default:return Rf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return R3(r);case"xxxx":case"xx":return Rf(r);case"xxxxx":case"xxx":default:return Rf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+B3(r,":");case"OOOO":default:return"GMT"+Rf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+B3(r,":");case"zzzz":default:return"GMT"+Rf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Di(r,e.length)},T:function(t,e,n){return Di(+t,e.length)}};function B3(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Di(s,2)}function R3(t,e){return t%60===0?(t>0?"-":"+")+Di(Math.abs(t)/60,2):Rf(t,e)}function Rf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Di(Math.trunc(r/60),2),s=Di(r%60,2);return n+i+e+s}const F3=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},RP=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},JQ=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return F3(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",F3(r,e)).replace("{{time}}",RP(i,e))},pb={p:RP,P:JQ},QQ=/^D+$/,eee=/^Y+$/,tee=["D","DD","YY","YYYY"];function FP(t){return QQ.test(t)}function jP(t){return eee.test(t)}function gb(t,e,n){const r=nee(t,e,n);if(console.warn(r),tee.includes(t))throw new RangeError(r)}function nee(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ree=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,iee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,see=/^'([^]*?)'?$/,oee=/''/g,aee=/[a-zA-Z]/;function lee(t,e,n){var f,p,y,m,C,S,T,O;const r=od(),i=(n==null?void 0:n.locale)??r.locale??IP,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(y=r.locale)==null?void 0:y.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((S=(C=n==null?void 0:n.locale)==null?void 0:C.options)==null?void 0:S.weekStartsOn)??r.weekStartsOn??((O=(T=r.locale)==null?void 0:T.options)==null?void 0:O.weekStartsOn)??0,a=Or(t,n==null?void 0:n.in);if(!kP(a))throw new RangeError("Invalid time value");let l=e.match(iee).map(D=>{const N=D[0];if(N==="p"||N==="P"){const U=pb[N];return U(D,i.formatLong)}return D}).join("").match(ree).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const N=D[0];if(N==="'")return{isToken:!1,value:uee(D)};if(N3[N])return{isToken:!0,value:D};if(N.match(aee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");return{isToken:!1,value:D}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(D=>{if(!D.isToken)return D.value;const N=D.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&jP(N)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&FP(N))&&gb(N,e,String(t));const U=N3[N[0]];return U(a,N,i.localize,c)}).join("")}function uee(t){const e=t.match(see);return e?e[1].replace(oee,"'"):t}function cee(){return Object.assign({},od())}function hee(t,e){const n=Or(t,e==null?void 0:e.in).getDay();return n===0?7:n}function fee(t,e){const n=dee(e)?new e(0):Xs(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function dee(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const pee=10;class zP{constructor(){nt(this,"subPriority",0)}validate(e,n){return!0}}class gee extends zP{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class mee extends zP{constructor(n,r){super();nt(this,"priority",pee);nt(this,"subPriority",-1);this.context=n||(i=>Xs(r,i))}set(n,r){return r.timestampIsSet?n:Xs(n,fee(n,this.context))}}class Pi{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new gee(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class vee extends Pi{constructor(){super(...arguments);nt(this,"priority",140);nt(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const ho={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Dc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function fo(t,e){return t&&{value:e(t.value),rest:t.rest}}function Bs(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Ic(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*gm+s*pm+o*WJ),rest:e.slice(n[0].length)}}function UP(t){return Bs(ho.anyDigitsSigned,t)}function Js(t,e){switch(t){case 1:return Bs(ho.singleDigit,e);case 2:return Bs(ho.twoDigits,e);case 3:return Bs(ho.threeDigits,e);case 4:return Bs(ho.fourDigits,e);default:return Bs(new RegExp("^\\d{1,"+t+"}"),e)}}function Ov(t,e){switch(t){case 1:return Bs(ho.singleDigitSigned,e);case 2:return Bs(ho.twoDigitsSigned,e);case 3:return Bs(ho.threeDigitsSigned,e);case 4:return Bs(ho.fourDigitsSigned,e);default:return Bs(new RegExp("^-?\\d{1,"+t+"}"),e)}}function N_(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function $P(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function VP(t){return t%400===0||t%4===0&&t%100!==0}class yee extends Pi{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return fo(Js(4,n),s);case"yo":return fo(i.ordinalNumber(n,{unit:"year"}),s);default:return fo(Js(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=$P(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class bee extends Pi{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return fo(Js(4,n),s);case"Yo":return fo(i.ordinalNumber(n,{unit:"year"}),s);default:return fo(Js(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=I_(n,s);if(i.isTwoDigitYear){const l=$P(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),$c(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),$c(n,s)}}class _ee extends Pi{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return Ov(r==="R"?4:r.length,n)}set(n,r,i){const s=Xs(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),dp(s)}}class wee extends Pi{constructor(){super(...arguments);nt(this,"priority",130);nt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return Ov(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class xee extends Pi{constructor(){super(...arguments);nt(this,"priority",120);nt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Js(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Lee extends Pi{constructor(){super(...arguments);nt(this,"priority",120);nt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Js(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Cee extends Pi{constructor(){super(...arguments);nt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);nt(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return fo(Bs(ho.month,n),s);case"MM":return fo(Js(2,n),s);case"Mo":return fo(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class See extends Pi{constructor(){super(...arguments);nt(this,"priority",110);nt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return fo(Bs(ho.month,n),s);case"LL":return fo(Js(2,n),s);case"Lo":return fo(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function Eee(t,e,n){const r=Or(t,n==null?void 0:n.in),i=BP(r,n)-e;return r.setDate(r.getDate()-i*7),Or(r,n==null?void 0:n.in)}class Pee extends Pi{constructor(){super(...arguments);nt(this,"priority",100);nt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return Bs(ho.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Js(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return $c(Eee(n,i,s),s)}}function kee(t,e,n){const r=Or(t,n==null?void 0:n.in),i=NP(r,n)-e;return r.setDate(r.getDate()-i*7),r}class Mee extends Pi{constructor(){super(...arguments);nt(this,"priority",100);nt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return Bs(ho.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Js(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return dp(kee(n,i))}}const Aee=[31,28,31,30,31,30,31,31,30,31,30,31],Tee=[31,29,31,30,31,30,31,31,30,31,30,31];class Oee extends Pi{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"subPriority",1);nt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return Bs(ho.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Js(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=VP(i),o=n.getMonth();return s?r>=1&&r<=Tee[o]:r>=1&&r<=Aee[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class Dee extends Pi{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"subpriority",1);nt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return Bs(ho.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Js(r.length,n)}}validate(n,r){const i=n.getFullYear();return VP(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function B_(t,e,n){var p,y,m,C;const r=od(),i=(n==null?void 0:n.weekStartsOn)??((y=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((C=(m=r.locale)==null?void 0:m.options)==null?void 0:C.weekStartsOn)??0,s=Or(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,f=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return _y(s,f,n)}class Iee extends Pi{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=B_(n,i,s),n.setHours(0,0,0,0),n}}class Nee extends Pi{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return fo(Js(r.length,n),o);case"eo":return fo(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=B_(n,i,s),n.setHours(0,0,0,0),n}}class Bee extends Pi{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return fo(Js(r.length,n),o);case"co":return fo(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=B_(n,i,s),n.setHours(0,0,0,0),n}}function Ree(t,e,n){const r=Or(t,n==null?void 0:n.in),i=hee(r,n),s=e-i;return _y(r,s,n)}class Fee extends Pi{constructor(){super(...arguments);nt(this,"priority",90);nt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Js(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return fo(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return fo(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return fo(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return fo(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=Ree(n,i),n.setHours(0,0,0,0),n}}class jee extends Pi{constructor(){super(...arguments);nt(this,"priority",80);nt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(N_(i),0,0,0),n}}class zee extends Pi{constructor(){super(...arguments);nt(this,"priority",80);nt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(N_(i),0,0,0),n}}class Uee extends Pi{constructor(){super(...arguments);nt(this,"priority",80);nt(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(N_(i),0,0,0),n}}class $ee extends Pi{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return Bs(ho.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Js(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class Vee extends Pi{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return Bs(ho.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Js(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class Hee extends Pi{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return Bs(ho.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Js(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class Wee extends Pi{constructor(){super(...arguments);nt(this,"priority",70);nt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return Bs(ho.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Js(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class Gee extends Pi{constructor(){super(...arguments);nt(this,"priority",60);nt(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return Bs(ho.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Js(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class qee extends Pi{constructor(){super(...arguments);nt(this,"priority",50);nt(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return Bs(ho.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Js(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class Yee extends Pi{constructor(){super(...arguments);nt(this,"priority",30);nt(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return fo(Js(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class Zee extends Pi{constructor(){super(...arguments);nt(this,"priority",10);nt(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Ic(Dc.basicOptionalMinutes,n);case"XX":return Ic(Dc.basic,n);case"XXXX":return Ic(Dc.basicOptionalSeconds,n);case"XXXXX":return Ic(Dc.extendedOptionalSeconds,n);case"XXX":default:return Ic(Dc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Xs(n,n.getTime()-Tv(n)-i)}}class Kee extends Pi{constructor(){super(...arguments);nt(this,"priority",10);nt(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Ic(Dc.basicOptionalMinutes,n);case"xx":return Ic(Dc.basic,n);case"xxxx":return Ic(Dc.basicOptionalSeconds,n);case"xxxxx":return Ic(Dc.extendedOptionalSeconds,n);case"xxx":default:return Ic(Dc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Xs(n,n.getTime()-Tv(n)-i)}}class Xee extends Pi{constructor(){super(...arguments);nt(this,"priority",40);nt(this,"incompatibleTokens","*")}parse(n){return UP(n)}set(n,r,i){return[Xs(n,i*1e3),{timestampIsSet:!0}]}}class Jee extends Pi{constructor(){super(...arguments);nt(this,"priority",20);nt(this,"incompatibleTokens","*")}parse(n){return UP(n)}set(n,r,i){return[Xs(n,i),{timestampIsSet:!0}]}}const Qee={G:new vee,y:new yee,Y:new bee,R:new _ee,u:new wee,Q:new xee,q:new Lee,M:new Cee,L:new See,w:new Pee,I:new Mee,d:new Oee,D:new Dee,E:new Iee,e:new Nee,c:new Bee,i:new Fee,a:new jee,b:new zee,B:new Uee,h:new $ee,H:new Vee,K:new Hee,k:new Wee,m:new Gee,s:new qee,S:new Yee,X:new Zee,x:new Kee,t:new Xee,T:new Jee},ete=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tte=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,nte=/^'([^]*?)'?$/,rte=/''/g,ite=/\S/,ste=/[a-zA-Z]/;function ote(t,e,n,r){var T,O,D,N,U,G,J,ee;const i=()=>Xs((r==null?void 0:r.in)||n,NaN),s=cee(),o=(r==null?void 0:r.locale)??s.locale??IP,a=(r==null?void 0:r.firstWeekContainsDate)??((O=(T=r==null?void 0:r.locale)==null?void 0:T.options)==null?void 0:O.firstWeekContainsDate)??s.firstWeekContainsDate??((N=(D=s.locale)==null?void 0:D.options)==null?void 0:N.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((G=(U=r==null?void 0:r.locale)==null?void 0:U.options)==null?void 0:G.weekStartsOn)??s.weekStartsOn??((ee=(J=s.locale)==null?void 0:J.options)==null?void 0:ee.weekStartsOn)??0;if(!e)return t?i():Or(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},f=[new mee(r==null?void 0:r.in,n)],p=e.match(tte).map(V=>{const K=V[0];if(K in pb){const pe=pb[K];return pe(V,o.formatLong)}return V}).join("").match(ete),y=[];for(let V of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&jP(V)&&gb(V,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&FP(V)&&gb(V,e,t);const K=V[0],pe=Qee[K];if(pe){const{incompatibleTokens:$}=pe;if(Array.isArray($)){const oe=y.find(ie=>$.includes(ie.token)||ie.token===K);if(oe)throw new RangeError(`The format string mustn't contain \`${oe.fullToken}\` and \`${V}\` at the same time`)}else if(pe.incompatibleTokens==="*"&&y.length>0)throw new RangeError(`The format string mustn't contain \`${V}\` and any other token at the same time`);y.push({token:K,fullToken:V});const H=pe.run(t,V,o.match,c);if(!H)return i();f.push(H.setter),t=H.rest}else{if(K.match(ste))throw new RangeError("Format string contains an unescaped latin alphabet character `"+K+"`");if(V==="''"?V="'":K==="'"&&(V=ate(V)),t.indexOf(V)===0)t=t.slice(V.length);else return i()}}if(t.length>0&&ite.test(t))return i();const m=f.map(V=>V.priority).sort((V,K)=>K-V).filter((V,K,pe)=>pe.indexOf(V)===K).map(V=>f.filter(K=>K.priority===V).sort((K,pe)=>pe.subPriority-K.subPriority)).map(V=>V[0]);let C=Or(n,r==null?void 0:r.in);if(isNaN(+C))return i();const S={};for(const V of m){if(!V.validate(C,c))return i();const K=V.set(C,S,c);Array.isArray(K)?(C=K[0],Object.assign(S,K[1])):C=K}return C}function ate(t){return t.match(nte)[1].replace(rte,"'")}function lte(t,e){const n=Or(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function ute(t,e){const n=Or(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function cte(t,e){const n=Or(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function hte(t,e){const n=()=>Xs(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=gte(t);let s;if(i.date){const c=mte(i.date,r);s=vte(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=yte(i.time),isNaN(a)))return n();if(i.timezone){if(l=bte(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),f=Or(0,e==null?void 0:e.in);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return Or(o+a+l,e==null?void 0:e.in)}const w0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},fte=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,dte=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,pte=/^([+-])(\d{2})(?::?(\d{2}))?$/;function gte(t){const e={},n=t.split(w0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],w0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(w0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=w0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function mte(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function vte(t,e){if(e===null)return new Date(NaN);const n=t.match(fte);if(!n)return new Date(NaN);const r=!!n[4],i=Gp(n[1]),s=Gp(n[2])-1,o=Gp(n[3]),a=Gp(n[4]),l=Gp(n[5])-1;if(r)return Cte(e,a,l)?_te(e,a,l):new Date(NaN);{const c=new Date(0);return!xte(e,s,o)||!Lte(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function Gp(t){return t?parseInt(t):1}function yte(t){const e=t.match(dte);if(!e)return NaN;const n=J1(e[1]),r=J1(e[2]),i=J1(e[3]);return Ste(n,r,i)?n*gm+r*pm+i*1e3:NaN}function J1(t){return t&&parseFloat(t.replace(",","."))||0}function bte(t){if(t==="Z")return 0;const e=t.match(pte);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Ete(r,i)?n*(r*gm+i*pm):NaN}function _te(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const wte=[31,null,31,30,31,30,31,31,30,31,30,31];function HP(t){return t%400===0||t%4===0&&t%100!==0}function xte(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(wte[e]||(HP(t)?29:28))}function Lte(t,e){return e>=1&&e<=(HP(t)?366:365)}function Cte(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Ste(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Ete(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Pte={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};iP._date.override({_id:"date-fns",formats:function(){return Pte},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Or(t):n==="string"&&(typeof e=="string"?t=ote(t,e,new Date,this.options):t=hte(t,this.options)),kP(t)?t.getTime():null},format:function(t,e){return lee(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return O_(t,e);case"second":return XJ(t,e);case"minute":return ZJ(t,e);case"hour":return GJ(t,e);case"day":return _y(t,e);case"week":return JJ(t,e);case"month":return T_(t,e);case"quarter":return KJ(t,e);case"year":return QJ(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return D_(t,e);case"second":return aQ(t,e);case"minute":return iQ(t,e);case"hour":return rQ(t,e);case"day":return MP(t,e);case"week":return lQ(t,e);case"month":return OP(t,e);case"quarter":return oQ(t,e);case"year":return uQ(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return cte(t);case"minute":return ute(t);case"hour":return lte(t);case"day":return db(t);case"week":return $c(t);case"isoWeek":return $c(t,{weekStartsOn:+n});case"month":return hQ(t);case"quarter":return cQ(t);case"year":return DP(t);default:return t}},endOf:function(t,e){switch(e){case"second":return vQ(t);case"minute":return gQ(t);case"hour":return dQ(t);case"day":return AP(t);case"week":return pQ(t);case"month":return TP(t);case"quarter":return mQ(t);case"year":return fQ(t);default:return t}}});const kte={class:"container mx-auto px-4 py-8 min-h-full"},Mte={class:"mb-8"},Ate={key:0,class:"mb-6"},Tte={class:"flex gap-4"},Ote=["disabled"],Dte={key:0,value:""},Ite=["value"],Nte={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},Bte={class:"flex"},Rte={class:"ml-3"},Fte={class:"text-sm font-medium text-red-800"},jte={key:2,class:"mb-6 p-6 bg-gray-100 border border-gray-300 rounded-md text-center"},zte={class:"flex flex-col items-center"},Ute={class:"text-gray-600 mb-4"},$te={key:0,class:"mt-2"},Vte={key:3,class:"mb-6"},Hte={class:"flex gap-4"},Wte=["disabled"],Gte={key:0,value:""},qte={key:1,value:""},Yte=["value"],Zte=["disabled"],Kte={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},Xte={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},Jte={class:"font-medium"},Qte={class:"font-medium"},ene={class:"font-medium"},tne={class:"text-gray-500"},nne={class:"font-medium"},rne={class:"font-medium"},ine={class:"font-medium"},sne={class:"md:col-span-2 lg:col-span-3 flex items-center"},one=["href"],ane={key:4,class:"mb-6"},lne={class:"border-b border-gray-200"},une={class:"-mb-px flex space-x-8","aria-label":"Tabs"},cne=["onClick"],hne={key:5,class:"mb-8"},fne={class:"flex justify-between items-center mb-4"},dne={class:"text-sm text-gray-600"},pne={key:0,class:"flex items-center"},gne={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},mne={class:"bg-white rounded-lg shadow-md p-6"},vne={class:"text-4xl font-bold text-primary-600 mb-2"},yne={class:"text-sm text-gray-600"},bne={class:"bg-white rounded-lg shadow-md p-6"},_ne={class:"text-4xl font-bold text-primary-600 mb-2"},wne={class:"mt-4"},xne={class:"w-full bg-gray-200 rounded-full h-2.5"},Lne={class:"bg-white rounded-lg shadow-md p-6"},Cne={class:"text-4xl font-bold text-primary-600 mb-2"},Sne={class:"text-sm text-gray-600"},Ene={class:"bg-white rounded-lg shadow-md p-6"},Pne={class:"text-4xl font-bold text-primary-600 mb-2"},kne={class:"text-sm text-gray-600"},Mne={class:"bg-white rounded-lg shadow-md p-6"},Ane={class:"text-4xl font-bold text-primary-600 mb-2"},Tne={class:"text-sm text-gray-600"},One={class:"bg-white rounded-lg shadow-md p-6"},Dne={class:"text-4xl font-bold text-primary-600 mb-2"},Ine={class:"text-sm text-gray-600"},Nne={key:6,class:"mb-8"},Bne={class:"flex justify-between items-center mb-4"},Rne={class:"text-sm text-gray-600"},Fne={class:"flex items-center"},jne={key:0,class:"flex items-center mr-3"},zne=["disabled"],Une={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},$ne={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},Vne=["value"],Hne={key:0,class:"mt-1 text-sm text-red-600"},Wne={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Gne={class:"bg-white rounded-lg shadow-md p-6"},qne={class:"chart-container"},Yne={class:"bg-white rounded-lg shadow-md p-6"},Zne={class:"chart-container"},Kne={class:"bg-white rounded-lg shadow-md p-6"},Xne={class:"chart-container"},Jne={class:"bg-white rounded-lg shadow-md p-6"},Qne={class:"chart-container"},ere={class:"bg-white rounded-lg shadow-md p-6"},tre={class:"chart-container"},nre={class:"bg-white rounded-lg shadow-md p-6"},rre={class:"chart-container"},ire=_s({__name:"MeteoView",setup(t){const e=ll(),n=po(),r=kt({}),i=kt(new Date),s=kt(""),o=kt([]),a=kt(""),l=kt([]),c=kt(null),f=kt(""),p=kt(""),y=kt(!1);tr(()=>{var ue;return((ue=n.user)==null?void 0:ue.user_type)||""});const m=tr(()=>n.isAdmin);let C=null;const S=tr(()=>!a.value||!o.value.length?null:o.value.find(ue=>ue.mac===a.value));function T(ue){return ue?ue.latitude&&ue.longitude&&ue.latitude!==0&&ue.longitude!==0:!1}function O(ue){return T(ue)?`${ue.latitude.toFixed(6)}, ${ue.longitude.toFixed(6)}`:""}function D(ue){if(!T(ue))return"#";const Q=ue.latitude,ke=ue.longitude,Ve=ue.name||"Station mto";return require("@/utils/googleMapsLoader").getGoogleMapsSearchUrl(Q,ke,Ve)}async function N(){try{f.value="";const ue={};m.value&&c.value&&(ue.entreprise=c.value);const Q=await d1.getDevices(ue);let ke=[];if(Q.data&&Q.data.devices&&Array.isArray(Q.data.devices)&&Q.data.devices.length>0&&typeof Q.data.devices[1]=="string"){let Ve=Q.data.devices[1];f.value=Ve,console.warn("[fetchDevices] Message d'erreur API reu:",f.value);return}if(Q.data&&Q.data.devices&&Array.isArray(Q.data.devices))ke=Q.data.devices;else if(Array.isArray(Q.data))ke=Q.data;else if(typeof Q.data=="object"&&Q.data!==null){for(const Ve in Q.data)if(Array.isArray(Q.data[Ve])){ke=Q.data[Ve];break}}o.value=ke.filter(Ve=>Ve!==null&&typeof Ve=="object").map(Ve=>{var lt,at;const Xe=Ve.mac||Ve.imei;return{id:Ve.id,name:Ve.name||`Station ${Xe}`,mac:Xe,model:((lt=Ve.stationtype)==null?void 0:lt.split("_")[0])||"Inconnu",firmware_version:(at=Ve.stationtype)!=null&&at.includes("_V")?Ve.stationtype.split("_V")[1]:"1.0",timezone:Ve.date_zone_id||"UTC",created_at:Ve.createtime?new Date(Ve.createtime*1e3).toISOString():new Date().toISOString(),latitude:Ve.latitude||0,longitude:Ve.longitude||0}}),o.value.length>0?a.value=o.value[0].mac:(console.warn("[fetchDevices] Aucun appareil disponible"),r.value={})}catch(ue){console.error("[fetchDevices] Erreur lors de la rcupration des appareils:",ue),ue.response&&ue.response.data&&ue.response.data.error?f.value=ue.response.data.error:(f.value="Erreur lors de la rcupration des stations mto",e.error("Erreur lors de la rcupration des stations mto")),o.value=[],a.value="",r.value={}}}async function U(){try{if(!a.value){console.warn("[fetchWeatherData] Aucun appareil slectionn");return}f.value="",y.value=!0;const ue={mac:a.value};m.value&&c.value&&(ue.entreprise=c.value);const Q=await d1.getRealTimeData(ue);let ke;Q.data&&"data"in Q.data?ke=Q.data.data:Q.data&&("outdoor"in Q.data||"indoor"in Q.data)?ke=Q.data:(ke={},console.warn("[fetchWeatherData] Format de rponse non reconnu")),r.value=ke,i.value=new Date,s.value=new Date().toLocaleString(),f.value=""}catch(ue){console.error("[fetchWeatherData] Erreur lors de la rcupration des donnes mto:",ue),ue.response&&ue.response.data&&ue.response.data.error?f.value=ue.response.data.error:(f.value="Erreur lors de la rcupration des donnes mto",e.error("Erreur lors de la rcupration des donnes mto")),r.value={}}finally{y.value=!1}}function G(ue){if(ue==null)return"0";const Q=typeof ue=="string"?parseFloat(ue):ue;return isNaN(Q)?"0":((Q-32)*5/9).toFixed(1)}function J(ue){if(ue==null)return"0";const Q=typeof ue=="string"?parseFloat(ue):ue;return isNaN(Q)?"0":(Q*1.60934).toFixed(1)}function ee(ue){if(ue==null)return"0";const Q=typeof ue=="string"?parseFloat(ue):ue;return isNaN(Q)?"0":(Q*25.4).toFixed(1)}function V(ue){if(ue==null)return"0";const Q=typeof ue=="string"?parseFloat(ue):ue;return isNaN(Q)?"0":(Q*33.8639).toFixed(1)}function K(ue){if(!ue)return"N/A";const Q=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],ke=Math.round(ue/22.5)%16;return Q[ke]}function pe(ue){return ue?ue>0?"En hausse":"En baisse":"Stable"}async function $(){if(m.value)try{const ue=await ca.getUsers({role:"ENTREPRISE"});l.value=ue.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(ue){console.error("Erreur lors de la rcupration des entreprises:",ue),e.error("Erreur lors de la rcupration des entreprises")}}async function H(){try{o.value=[],a.value="",r.value={},f.value="",Object.values(Ue).forEach(ue=>{try{ue.destroy()}catch(Q){console.error("Erreur lors de la destruction d'un graphique:",Q)}}),Ue={},await N()}catch(ue){console.error("Erreur lors de la rcupration des appareils avec l'entreprise:",ue),e.error("Erreur lors du changement d'entreprise")}}const oe=[{id:"realtime",name:"Temps rel"},{id:"history",name:"Historique"}],ie=kt("realtime"),R=kt("today"),j=kt("5min"),q=kt(""),re=kt(""),xe=()=>{const ue=new Date,Q=new Date(ue);Q.setDate(ue.getDate()-1),q.value=Q.toISOString().split("T")[0],re.value=Q.toISOString().split("T")[0]},be=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],_e=tr(()=>{const ue=Ne(),Q=new Date(ue.start),ke=new Date(ue.end);ke.setHours(23,59,59,999);const Ve=Math.abs(ke.getTime()-Q.getTime()),Xe=Math.ceil(Ve/(1e3*60*60*24)),at=Math.abs(new Date().getTime()-Q.getTime()),pt=Math.ceil(at/(1e3*60*60*24));return be.filter(jt=>Xe<=jt.maxDays&&pt<=jt.maxPastDays)});yi(R,ue=>{ue==="custom"&&xe(),!_e.value.some(ke=>ke.value===j.value)&&_e.value.length>0&&(j.value=_e.value[0].value)}),yi([q,re],()=>{R.value==="custom"&&!_e.value.some(Q=>Q.value===j.value)&&_e.value.length>0&&(j.value=_e.value[0].value)});const Z=kt(null),ae=kt(null),ce=kt(null),de=kt(null),ge=kt(null),Ee=kt(null);let Ue={};const Ne=()=>{let ue=new Date,Q=new Date;switch(R.value){case"today":ue.setHours(0,0,0,0);break;case"yesterday":ue.setDate(ue.getDate()-1),ue.setHours(0,0,0,0),Q.setDate(Q.getDate()-1),Q.setHours(23,59,59,999);break;case"week":ue.setDate(ue.getDate()-7);break;case"month":ue.setDate(ue.getDate()-30);break;case"custom":ue=new Date(q.value),Q=new Date(re.value);break}return{start:ue.toISOString().split("T")[0],end:Q.toISOString().split("T")[0]}},rt=async()=>{try{if(gt.value)return;if(gt.value=!0,_e.value.length===0){e.warning("Aucun intervalle disponible pour cette priode"),gt.value=!1;return}_e.value.some(Ve=>Ve.value===j.value)||(j.value=_e.value[0].value);const Q=Ne(),ke={mac:a.value,start_date:Q.start,end_date:Q.end,cycle_type:j.value};m.value&&c.value&&(ke.entreprise=c.value);try{const Xe=(await d1.getHistoryData(ke)).data,lt=[{type:"temp",ref:Z},{type:"humidity",ref:ae},{type:"pressure",ref:ce},{type:"wind",ref:de},{type:"rain",ref:ge},{type:"solar",ref:Ee}];for(const at of lt)if(at.ref.value){const pt=se(Xe,at.type);_t(at.type,at.ref.value,pt)}s.value=new Date().toLocaleString()}catch(Ve){console.error("[updateAllCharts] Erreur lors de la rcupration des donnes:",Ve),e.error("Erreur lors de la rcupration des donnes historiques")}finally{gt.value=!1}}catch(ue){console.error("[updateAllCharts] Erreur lors de la mise  jour des graphiques:",ue),e.error("Erreur lors de la mise  jour des graphiques"),gt.value=!1}},gt=kt(!1),_t=(ue,Q,ke)=>{try{if(Ue[ue]&&(Ue[ue].destroy(),delete Ue[ue]),!ke.datasets||!ke.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${ue}`),Ue[ue]=new Oc(Q,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donne disponible"}}}});return}let Ve="hour";j.value==="5min"||j.value==="30min"?Ve="hour":(j.value==="4hour"||j.value==="1day")&&(Ve="day");const Xe=Ne(),lt=new Date(Xe.start),at=new Date(Xe.end);at.setHours(23,59,59,999);const pt={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(jt){return jt.length>0?new Date(jt[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:Ve,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:lt.getTime(),max:at.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:le(ue)},ticks:{callback:function(jt){const Bt=typeof jt=="string"?parseFloat(jt):jt;switch(ue){case"temp":return Bt.toFixed(1)+"C";case"humidity":return Bt.toFixed(0)+"%";case"pressure":return Bt.toFixed(0)+" hPa";case"wind":case"rain":return Bt.toFixed(1)+(ue==="wind"?" km/h":" mm");case"solar":return Bt.toFixed(0)+" W/m";default:return Bt}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};Ue[ue]=new Oc(Q,{type:"line",data:{datasets:ke.datasets||[]},options:pt})}catch(Ve){console.error(`[updateChart] Erreur lors de la mise  jour du graphique ${ue}:`,Ve)}},le=ue=>{switch(ue){case"temp":return"Temprature (C)";case"humidity":return"Humidit (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Prcipitations (mm)";case"solar":return"Rayonnement (W/m)";default:return""}},se=(ue,Q)=>{var lt,at,pt,jt,Bt,qt,Jt,gn,Cn,Ye,st,Qe,$t,Yt,wn,mn,_n,Rn,vn;if(!ue)return console.warn(`[formatHistoryDataForChart] Pas de donnes pour ${Q}`),null;let ke;if("data"in ue)ke=ue.data;else if(Q in ue)ke=ue;else return console.warn(`[formatHistoryDataForChart] Structure de donnes non reconnue pour ${Q}`),null;const Ve=[],Xe=(tn,hn,Bn,Jn)=>{if(!Array.isArray(tn)){console.warn(`[formatHistoryDataForChart] Les donnes pour ${hn} ne sont pas un tableau`);return}const ar=tn.map(zn=>{const Lr=parseFloat(String(zn.value));return{x:zn.time,y:Jn?Jn(Lr):Lr}}).filter(zn=>!isNaN(zn.y));ar.length>0&&Ve.push({label:hn,data:ar,borderColor:Bn,fill:!1,tension:.4})};switch(Q){case"temp":(at=(lt=ke.outdoor)==null?void 0:lt.temperature)!=null&&at.list?Xe(Object.entries(ke.outdoor.temperature.list).map(([tn,hn])=>({time:parseInt(tn)*1e3,value:hn})),"Temprature","#FF6384",tn=>(tn-32)*5/9):(pt=ke.outdoor)!=null&&pt.temperature&&Xe(ke.outdoor.temperature,"Temprature","#FF6384",tn=>(tn-32)*5/9);break;case"humidity":(Bt=(jt=ke.outdoor)==null?void 0:jt.humidity)!=null&&Bt.list?Xe(Object.entries(ke.outdoor.humidity.list).map(([tn,hn])=>({time:parseInt(tn)*1e3,value:hn})),"Humidit","#36A2EB"):(qt=ke.outdoor)!=null&&qt.humidity&&Xe(ke.outdoor.humidity,"Humidit","#36A2EB");break;case"pressure":(gn=(Jt=ke.pressure)==null?void 0:Jt.absolute)!=null&&gn.list?Xe(Object.entries(ke.pressure.absolute.list).map(([tn,hn])=>({time:parseInt(tn)*1e3,value:hn})),"Pression","#4BC0C0",tn=>tn*33.8639):(Cn=ke.pressure)!=null&&Cn.absolute&&Xe(ke.pressure.absolute,"Pression","#4BC0C0",tn=>tn*33.8639);break;case"wind":(st=(Ye=ke.wind)==null?void 0:Ye.wind_speed)!=null&&st.list?(Xe(Object.entries(ke.wind.wind_speed.list).map(([tn,hn])=>({time:parseInt(tn)*1e3,value:hn})),"Vitesse du vent","#FFCE56",tn=>tn*1.60934),(Qe=ke.wind.wind_gust)!=null&&Qe.list&&Xe(Object.entries(ke.wind.wind_gust.list).map(([tn,hn])=>({time:parseInt(tn)*1e3,value:hn})),"Rafales","#FF9F40",tn=>tn*1.60934)):($t=ke.wind)!=null&&$t.wind_speed&&(Xe(ke.wind.wind_speed,"Vitesse du vent","#FFCE56",tn=>tn*1.60934),ke.wind.wind_gust&&Xe(ke.wind.wind_gust,"Rafales","#FF9F40",tn=>tn*1.60934));break;case"rain":(wn=(Yt=ke.rainfall)==null?void 0:Yt.daily)!=null&&wn.list?Xe(Object.entries(ke.rainfall.daily.list).map(([tn,hn])=>({time:parseInt(tn)*1e3,value:hn})),"Prcipitations journalires","#9966FF",tn=>tn*25.4):(mn=ke.rainfall)!=null&&mn.daily&&Xe(ke.rainfall.daily,"Prcipitations journalires","#9966FF",tn=>tn*25.4);break;case"solar":(Rn=(_n=ke.solar_and_uvi)==null?void 0:_n.solar)!=null&&Rn.list?Xe(Object.entries(ke.solar_and_uvi.solar.list).map(([tn,hn])=>({time:parseInt(tn)*1e3,value:hn})),"Rayonnement solaire","#FF9F40"):(vn=ke.solar_and_uvi)!=null&&vn.solar&&Xe(ke.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return{datasets:Ve}};return Au(()=>{Object.values(Ue).forEach(ue=>ue.destroy())}),yi([R,j,q,re],()=>{ie.value==="history"&&a.value&&rt()}),Ks(async()=>{const ue=[];m.value&&ue.push($()),await Promise.all(ue),await N(),C=window.setInterval(U,5*60*1e3)}),yi(c,async ue=>{m.value&&await N()}),yi(a,ue=>{ue?(U(),ie.value==="history"&&rt()):r.value={}}),yi(ie,ue=>{ue==="history"&&a.value&&rt()}),Au(()=>{C&&clearInterval(C)}),(ue,Q)=>{var Ve,Xe,lt,at,pt,jt,Bt,qt,Jt,gn,Cn,Ye,st,Qe,$t,Yt,wn,mn,_n,Rn,vn,tn,hn,Bn,Jn,ar,zn,Lr,ns,ki,Ft,Je,Lt,In,nr,Nn,Zt,Ze,un;const ke=Rb("router-link");return Ie(),je("div",kte,[P("div",Mte,[Q[41]||(Q[41]=P("h1",{class:"text-3xl font-bold mb-4"},"Mto",-1)),m.value?(Ie(),je("div",Ate,[Q[6]||(Q[6]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une entreprise ",-1)),P("div",Tte,[jn(P("select",{"onUpdate:modelValue":Q[0]||(Q[0]=sn=>c.value=sn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:H},[l.value.length?Kt("",!0):(Ie(),je("option",Dte,"Chargement des entreprises...")),(Ie(!0),je(bn,null,sr(l.value,sn=>(Ie(),je("option",{key:sn.id,value:sn.id},Ut(sn.company_name||`${sn.first_name} ${sn.last_name}`),9,Ite))),128))],40,Ote),[[os,c.value]])])])):Kt("",!0),f.value?(Ie(),je("div",Nte,[P("div",Bte,[Q[7]||(Q[7]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",Rte,[P("h3",Fte,Ut(f.value),1)])])])):Kt("",!0),f.value&&(f.value.includes("cls API")||f.value.includes("Ecowitt"))?(Ie(),je("div",jte,[P("div",zte,[Q[9]||(Q[9]=P("svg",{class:"h-12 w-12 text-gray-400 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[P("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)),Q[10]||(Q[10]=P("h2",{class:"text-xl font-bold text-gray-700 mb-2"},"Configuration requise",-1)),P("p",Ute,Ut(f.value),1),f.value.includes("ajouter dans la gestion")?(Ie(),je("div",$te,[Kr(ke,{to:"/users",class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:Il(()=>Q[8]||(Q[8]=[zr(" Configurer les cls API ")])),_:1})])):Kt("",!0)])])):Kt("",!0),!f.value||!(f.value.includes("cls API")||f.value.includes("Ecowitt"))?(Ie(),je("div",Vte,[Q[19]||(Q[19]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une station ",-1)),P("div",Hte,[jn(P("select",{"onUpdate:modelValue":Q[1]||(Q[1]=sn=>a.value=sn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||f.value)},[!o.value.length&&!f.value?(Ie(),je("option",Gte,"Chargement des stations...")):Kt("",!0),f.value?(Ie(),je("option",qte,"Aucune station disponible")):Kt("",!0),(Ie(!0),je(bn,null,sr(o.value,sn=>(Ie(),je("option",{key:sn.mac,value:sn.mac},Ut(sn.name)+" ("+Ut(sn.model)+" - v"+Ut(sn.firmware_version)+") ",9,Yte))),128))],8,Wte),[[os,a.value]]),P("button",{onClick:U,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||f.value)}," Actualiser ",8,Zte)]),S.value?(Ie(),je("div",Kte,[Q[18]||(Q[18]=P("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),P("div",Xte,[P("div",null,[Q[11]||(Q[11]=P("span",{class:"text-gray-500"},"Modle:",-1)),P("p",Jte,Ut(S.value.model),1)]),P("div",null,[Q[12]||(Q[12]=P("span",{class:"text-gray-500"},"Version:",-1)),P("p",Qte,Ut(S.value.firmware_version),1)]),P("div",null,[Q[13]||(Q[13]=P("span",{class:"text-gray-500"},"ID:",-1)),P("p",ene,Ut(S.value.id),1)]),P("div",null,[P("span",tne,Ut((Ve=S.value.mac)!=null&&Ve.includes(":")?"MAC:":"IMEI:"),1),P("p",nne,Ut(S.value.mac),1)]),P("div",null,[Q[14]||(Q[14]=P("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),P("p",rne,Ut(S.value.timezone),1)]),P("div",null,[Q[15]||(Q[15]=P("span",{class:"text-gray-500"},"Installation:",-1)),P("p",ine,Ut(new Date(S.value.created_at).toLocaleDateString()),1)]),P("div",sne,[Q[17]||(Q[17]=P("span",{class:"text-gray-500 mr-2"},"Position:",-1)),T(S.value)?(Ie(),je("a",{key:0,href:D(S.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[Q[16]||(Q[16]=P("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),zr(" "+Ut(O(S.value)),1)],8,one)):Kt("",!0)])])])):Kt("",!0)])):Kt("",!0),!f.value||!(f.value.includes("cls API")||f.value.includes("Ecowitt"))?(Ie(),je("div",ane,[P("div",lne,[P("nav",une,[(Ie(),je(bn,null,sr(oe,sn=>P("button",{key:sn.id,onClick:An=>ie.value=sn.id,class:Ei([ie.value===sn.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},Ut(sn.name),11,cne)),64))])])])):Kt("",!0),(!f.value||!(f.value.includes("cls API")||f.value.includes("Ecowitt")))&&ie.value==="realtime"?(Ie(),je("div",hne,[P("div",fne,[P("p",dne," Dernire mise  jour : "+Ut(i.value?new Date(i.value).toLocaleString():"Jamais"),1),y.value?(Ie(),je("div",pne,Q[20]||(Q[20]=[P("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),P("span",{class:"text-primary-600"},"Chargement des donnes...",-1)]))):Kt("",!0)]),P("div",gne,[P("div",mne,[Q[21]||(Q[21]=P("h2",{class:"text-xl font-semibold mb-4"},"Temprature Extrieure",-1)),P("div",vne,Ut(G((lt=(Xe=r.value.outdoor)==null?void 0:Xe.temperature)==null?void 0:lt.value))+"C ",1),P("div",yne," Min: "+Ut(G(((pt=(at=r.value.outdoor)==null?void 0:at.temperature)==null?void 0:pt.min)||"0"))+"C Max: "+Ut(G(((Bt=(jt=r.value.outdoor)==null?void 0:jt.temperature)==null?void 0:Bt.max)||"0"))+"C ",1)]),P("div",bne,[Q[22]||(Q[22]=P("h2",{class:"text-xl font-semibold mb-4"},"Humidit",-1)),P("div",_ne,Ut(((Jt=(qt=r.value.outdoor)==null?void 0:qt.humidity)==null?void 0:Jt.value)||"0")+"% ",1),P("div",wne,[P("div",xne,[P("div",{class:"bg-primary-600 h-2.5 rounded-full",style:Rl({width:`${((Cn=(gn=r.value.outdoor)==null?void 0:gn.humidity)==null?void 0:Cn.value)||0}%`})},null,4)])])]),P("div",Lne,[Q[23]||(Q[23]=P("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphrique",-1)),P("div",Cne,Ut(V((st=(Ye=r.value.pressure)==null?void 0:Ye.absolute)==null?void 0:st.value))+" hPa ",1),P("div",Sne," Tendance: "+Ut(pe(($t=(Qe=r.value.pressure)==null?void 0:Qe.absolute)==null?void 0:$t.trend)),1)]),P("div",Ene,[Q[25]||(Q[25]=P("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),P("div",Pne,Ut(J(((wn=(Yt=r.value.wind)==null?void 0:Yt.speed)==null?void 0:wn.value)||((_n=(mn=r.value.wind)==null?void 0:mn.wind_speed)==null?void 0:_n.value)))+" km/h ",1),P("div",kne,[zr(" Direction: "+Ut(K(((vn=(Rn=r.value.wind)==null?void 0:Rn.direction)==null?void 0:vn.value)||((hn=(tn=r.value.wind)==null?void 0:tn.wind_direction)==null?void 0:hn.value)))+" ",1),Q[24]||(Q[24]=P("br",null,null,-1)),zr(" Rafales: "+Ut(J(((Jn=(Bn=r.value.wind)==null?void 0:Bn.gust)==null?void 0:Jn.value)||((zn=(ar=r.value.wind)==null?void 0:ar.wind_gust)==null?void 0:zn.value)))+" km/h ",1)])]),P("div",Mne,[Q[27]||(Q[27]=P("h2",{class:"text-xl font-semibold mb-4"},"Prcipitations",-1)),P("div",Ane,Ut(ee((ns=(Lr=r.value.rainfall)==null?void 0:Lr.daily)==null?void 0:ns.value))+" mm ",1),P("div",Tne,[zr(" Taux: "+Ut(ee(((Ft=(ki=r.value.rainfall)==null?void 0:ki.rate)==null?void 0:Ft.value)||((Lt=(Je=r.value.rainfall)==null?void 0:Je.rain_rate)==null?void 0:Lt.value)))+" mm/h ",1),Q[26]||(Q[26]=P("br",null,null,-1)),zr(" Mensuel: "+Ut(ee((nr=(In=r.value.rainfall)==null?void 0:In.monthly)==null?void 0:nr.value))+" mm ",1)])]),P("div",One,[Q[28]||(Q[28]=P("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),P("div",Dne,Ut(((Zt=(Nn=r.value.solar_and_uvi)==null?void 0:Nn.solar)==null?void 0:Zt.value)||"0")+" W/m ",1),P("div",Ine," UV: "+Ut(((un=(Ze=r.value.solar_and_uvi)==null?void 0:Ze.uvi)==null?void 0:un.value)||"0"),1)])])])):(!f.value||!(f.value.includes("cls API")||f.value.includes("Ecowitt")))&&ie.value==="history"?(Ie(),je("div",Nne,[P("div",Bne,[P("p",Rne," Dernire mise  jour : "+Ut(s.value?s.value:"Jamais"),1),P("div",Fne,[gt.value?(Ie(),je("div",jne,Q[29]||(Q[29]=[P("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),P("span",{class:"text-sm text-primary-600"},"Chargement des donnes...",-1)]))):Kt("",!0),P("button",{onClick:rt,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value||gt.value}," Actualiser ",8,zne)])]),P("div",Une,[P("div",null,[Q[31]||(Q[31]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Priode ",-1)),jn(P("select",{"onUpdate:modelValue":Q[2]||(Q[2]=sn=>R.value=sn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},Q[30]||(Q[30]=[lu('<option value="today" data-v-ad9826c9>Aujourd&#39;hui</option><option value="yesterday" data-v-ad9826c9>Hier</option><option value="week" data-v-ad9826c9>7 derniers jours</option><option value="month" data-v-ad9826c9>30 derniers jours</option><option value="custom" data-v-ad9826c9>Priode personnalise</option>',5)]),512),[[os,R.value]])]),R.value==="custom"?(Ie(),je("div",$ne,[P("div",null,[Q[32]||(Q[32]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de dbut ",-1)),jn(P("input",{type:"date","onUpdate:modelValue":Q[3]||(Q[3]=sn=>q.value=sn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[di,q.value]])]),P("div",null,[Q[33]||(Q[33]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),jn(P("input",{type:"date","onUpdate:modelValue":Q[4]||(Q[4]=sn=>re.value=sn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[di,re.value]])])])):Kt("",!0),P("div",null,[Q[34]||(Q[34]=P("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),jn(P("select",{"onUpdate:modelValue":Q[5]||(Q[5]=sn=>j.value=sn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Ie(!0),je(bn,null,sr(_e.value,sn=>(Ie(),je("option",{key:sn.value,value:sn.value},Ut(sn.label),9,Vne))),128))],512),[[os,j.value]]),p.value?(Ie(),je("div",Hne,Ut(p.value),1)):Kt("",!0)])]),P("div",Wne,[P("div",Gne,[Q[35]||(Q[35]=P("h3",{class:"text-lg font-semibold mb-4"},"Temprature",-1)),P("div",qne,[P("canvas",{ref_key:"tempChart",ref:Z},null,512)])]),P("div",Yne,[Q[36]||(Q[36]=P("h3",{class:"text-lg font-semibold mb-4"},"Humidit",-1)),P("div",Zne,[P("canvas",{ref_key:"humidityChart",ref:ae},null,512)])]),P("div",Kne,[Q[37]||(Q[37]=P("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),P("div",Xne,[P("canvas",{ref_key:"pressureChart",ref:ce},null,512)])]),P("div",Jne,[Q[38]||(Q[38]=P("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),P("div",Qne,[P("canvas",{ref_key:"windChart",ref:de},null,512)])]),P("div",ere,[Q[39]||(Q[39]=P("h3",{class:"text-lg font-semibold mb-4"},"Prcipitations",-1)),P("div",tre,[P("canvas",{ref_key:"rainChart",ref:ge},null,512)])]),P("div",nre,[Q[40]||(Q[40]=P("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),P("div",rre,[P("canvas",{ref_key:"solarChart",ref:Ee},null,512)])])])])):Kt("",!0)])])}}}),sre=Vc(ire,[["__scopeId","data-v-ad9826c9"]]),ore={class:"settings-page max-w-xl mx-auto py-10 px-4 min-h-full"},are={key:0,class:"mb-6"},lre={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 mb-6"},ure={class:"flex"},cre={class:"ml-3"},hre={class:"text-sm text-red-700"},fre={class:"bg-white shadow rounded-lg p-6"},dre=["disabled"],pre=["disabled"],gre={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},mre={key:0,class:"text-green-600 mt-2"},vre=_s({__name:"ParametresView",setup(t){const e=kt(""),n=kt(""),r=kt(!1),i=kt("");Ks(async()=>{await s()});async function s(){r.value=!0,i.value="";try{const a=await k2.getGoogleMapsApiKey();a.data&&a.data.key_status==="configured"?e.value="":e.value=""}catch(a){console.error("Erreur lors de la rcupration de la cl API:",a),i.value="Impossible de rcuprer la cl API. Veuillez ressayer plus tard."}finally{r.value=!1}}async function o(){if(!e.value){i.value="La cl API est requise.";return}r.value=!0,i.value="",n.value="";try{await k2.setGoogleMapsApiKey(e.value),n.value="Cl API sauvegarde avec succs.",setTimeout(()=>{n.value=""},3e3)}catch(a){console.error("Erreur lors de la sauvegarde de la cl API:",a),i.value="Impossible de sauvegarder la cl API. Veuillez ressayer plus tard."}finally{r.value=!1}}return(a,l)=>(Ie(),je("div",ore,[l[6]||(l[6]=P("h1",{class:"text-2xl font-bold mb-6"},"Paramtres de l'application",-1)),r.value?(Ie(),je("div",are,l[1]||(l[1]=[lu('<div class="animate-pulse flex space-x-4" data-v-097ea248><div class="flex-1 space-y-4 py-1" data-v-097ea248><div class="h-4 bg-gray-200 rounded w-3/4" data-v-097ea248></div><div class="space-y-2" data-v-097ea248><div class="h-4 bg-gray-200 rounded" data-v-097ea248></div><div class="h-4 bg-gray-200 rounded w-5/6" data-v-097ea248></div></div></div></div>',1)]))):Kt("",!0),i.value?(Ie(),je("div",lre,[P("div",ure,[l[2]||(l[2]=P("div",{class:"flex-shrink-0"},[P("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[P("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),P("div",cre,[P("p",hre,Ut(i.value),1)])])])):Kt("",!0),P("div",fre,[P("form",{onSubmit:Bl(o,["prevent"]),class:"space-y-4"},[P("div",null,[l[3]||(l[3]=P("label",{for:"google-maps-api-key",class:"block text-sm font-medium text-gray-700"},"Cl API Google Maps",-1)),jn(P("input",{id:"google-maps-api-key","onUpdate:modelValue":l[0]||(l[0]=c=>e.value=c),type:"password",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre cl API Google Maps",autocomplete:"off",disabled:r.value},null,8,dre),[[di,e.value]])]),P("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r.value},[r.value?(Ie(),je("svg",gre,l[4]||(l[4]=[P("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),P("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Kt("",!0),l[5]||(l[5]=zr(" Sauvegarder "))],8,pre),n.value?(Ie(),je("p",mre,Ut(n.value),1)):Kt("",!0)],32)])]))}}),yre=Vc(vre,[["__scopeId","data-v-097ea248"]]),WP=eB({history:TN("/"),routes:[{path:"/",name:"home",component:J4,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"],isMapRoute:!0}},{path:"/meteo",name:"meteo",component:sre,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:fG,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>ku(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:r9,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>ku(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>ku(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:SF,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:jq,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:J4,meta:{requiresAuth:!0,isMapRoute:!0}},{path:"/parametres",name:"parametres",component:yre,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>ku(()=>import("./NotFoundView.js"),[])}]});WP.beforeEach(async(t,e,n)=>{var a,l;const r=po();if(!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function bre(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function f(){if("serviceWorker"in navigator){if(a=await ku(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=f(),c}const R_=cv(rF),GP=fI();R_.use(GP);R_.use(WP);const _re=po(GP);window.INITIAL_STATE&&_re.initialize(window.INITIAL_STATE);R_.mount("#app");bre({immediate:!0,onRegistered(t){},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){}});export{Ni as _,cu as a,P as b,je as c,_s as d,Kt as e,cn as f,zr as g,jn as h,Ie as i,lu as j,Kr as k,Il as l,Rb as m,Ei as n,Ks as o,nB as p,ay as q,kt as r,Zo as s,Ut as t,po as u,di as v,Bl as w,ly as x};
